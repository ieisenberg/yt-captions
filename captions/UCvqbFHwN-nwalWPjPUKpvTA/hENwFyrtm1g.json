[
  {
    "text": "great to see so many people made it here I think we have a full house today uh so",
    "start": "399",
    "end": "6040"
  },
  {
    "text": "uh topic for for our talk is going to be open polic agents an introduction and a",
    "start": "6040",
    "end": "11400"
  },
  {
    "text": "deep dive uh I'm Anders I work for styra the creators and maintainers of opa or",
    "start": "11400",
    "end": "16840"
  },
  {
    "text": "one of the maintainers yeah I'm I'm Xander I work on open source at Microsoft yeah uh so what we're going to",
    "start": "16840",
    "end": "23800"
  },
  {
    "text": "do today I'm going to give a introduction to Opa for those not familiar uh and followed by some updates",
    "start": "23800",
    "end": "30119"
  },
  {
    "text": "from the project and then Sanders is going to cover uh the OPA gatekeeper",
    "start": "30119",
    "end": "35239"
  },
  {
    "text": "project so let's start with an Opa introduction uh and for those not",
    "start": "35239",
    "end": "40600"
  },
  {
    "text": "familiar what what is even when we talk about open policy then uh might be good to know what what is policy in the first",
    "start": "40600",
    "end": "47079"
  },
  {
    "text": "place uh so policy is basically a set of rules uh and these rules can be",
    "start": "47079",
    "end": "52920"
  },
  {
    "text": "basically anything that a real life rule could be or a real life policy could be so it could reflect things like",
    "start": "52920",
    "end": "59160"
  },
  {
    "text": "organizational r rules how many people are allowed in a in a room or things",
    "start": "59160",
    "end": "65080"
  },
  {
    "text": "like permissions uh should this user be uh should be allowed to perform a",
    "start": "65080",
    "end": "71560"
  },
  {
    "text": "certain action given some conditions uh it could cover things like infrastructure or kubernetes manifest or",
    "start": "71560",
    "end": "78240"
  },
  {
    "text": "whatnot wherever you can imagine having rules uh you can use",
    "start": "78240",
    "end": "83920"
  },
  {
    "text": "Opa uh but that's just rules from policy what what we really want to do here is we want to treat policy as code",
    "start": "83920",
    "end": "90520"
  },
  {
    "text": "that is really what the kind of movement that uh I'd say opa started what we want to do is we want to work with policy as",
    "start": "90520",
    "end": "97799"
  },
  {
    "text": "we work with any other type of code we want to we want to test our policies we want to work with code review linting",
    "start": "97799",
    "end": "104439"
  },
  {
    "text": "and whatnot so basically all these uh benefits that we have of working with",
    "start": "104439",
    "end": "109520"
  },
  {
    "text": "anything as code we want to we want to work with policy the same way we don't want that to be in locked into a PDF",
    "start": "109520",
    "end": "115640"
  },
  {
    "text": "document or a Word document or or whatnot but we want to we want to be able to collaborate on the rules of our",
    "start": "115640",
    "end": "122039"
  },
  {
    "text": "system as well uh a key concept of opa or policy",
    "start": "122039",
    "end": "127880"
  },
  {
    "text": "engines in general is that we want to decouple policy from applications uh so that we can do all of",
    "start": "127880",
    "end": "134040"
  },
  {
    "text": "these things that I mentioned uh we we don't want to kind of uh couple policy",
    "start": "134040",
    "end": "139959"
  },
  {
    "text": "with other type of business logic we want to be able to work with them uh as an isolated and first class",
    "start": "139959",
    "end": "147599"
  },
  {
    "text": "concept so that's policy so what's Opa then it's an open source general purpose",
    "start": "148080",
    "end": "153360"
  },
  {
    "text": "policy engine uh and general purpose is important that's basically one of the",
    "start": "153360",
    "end": "158680"
  },
  {
    "text": "kind of core Promises of opa that we should be able to work with one technology to cover all of these use",
    "start": "158680",
    "end": "165440"
  },
  {
    "text": "cases as of February uh three years ago it's a graduated project I think it was",
    "start": "165440",
    "end": "171480"
  },
  {
    "text": "submitted in 2017 or so so it's it's been we've been around here for a long",
    "start": "171480",
    "end": "177000"
  },
  {
    "text": "time what Opa does is provide us a unified tool set and a framework to work with policy across the whole Cloud",
    "start": "177000",
    "end": "184120"
  },
  {
    "text": "native stack and again we decouple policy from",
    "start": "184120",
    "end": "189680"
  },
  {
    "text": "application logic and we try and uh we separate uh what we call a policy",
    "start": "189680",
    "end": "195000"
  },
  {
    "text": "decision that's basically what Opa does it provides us decisions it doesn't enforce those decisions that will be up",
    "start": "195000",
    "end": "200920"
  },
  {
    "text": "to your application and what that means uh is highly specific to the context of",
    "start": "200920",
    "end": "206319"
  },
  {
    "text": "that application so Opa will tell you no this user should not be allowed and then how you choose to enforce that that is",
    "start": "206319",
    "end": "213239"
  },
  {
    "text": "up to you uh policies they're written in a declarative language called Rego I think we'll uh come back to that in a",
    "start": "213239",
    "end": "221799"
  },
  {
    "text": "bit first some word on our community we've been a around for a long time so",
    "start": "221799",
    "end": "227640"
  },
  {
    "text": "we have a a Vibrant Community of users and contributors uh there's over 100",
    "start": "227640",
    "end": "232760"
  },
  {
    "text": "Integrations listed on on the OPA ecosystem page so pretty much any technology you choose to work with you",
    "start": "232760",
    "end": "239879"
  },
  {
    "text": "can probably integrate Opa in some shape or form we have uh 9,000 GitHub Stars 8,000",
    "start": "239879",
    "end": "246959"
  },
  {
    "text": "slack users and hundreds of millions of downloads uh and there's not just the",
    "start": "246959",
    "end": "252840"
  },
  {
    "text": "OPA the core product but there's uh a bunch of projects that kind of spun out of opa such as uh Opa gatekeeper comest",
    "start": "252840",
    "end": "261000"
  },
  {
    "text": "and so on and uh if you if you want to offer some Rego write some policy",
    "start": "261000",
    "end": "266400"
  },
  {
    "text": "there's Integrations for pretty much any editor out there",
    "start": "266400",
    "end": "271720"
  },
  {
    "text": "so how does it work how does all these different Technologies integrate Opa it's uh a fairly simple model",
    "start": "272280",
    "end": "279720"
  },
  {
    "text": "actually uh we call it the policy decision model it basically works that you have a service and when we say",
    "start": "279720",
    "end": "286240"
  },
  {
    "text": "service we have a a quite broad definition of that it could be uh it",
    "start": "286240",
    "end": "291919"
  },
  {
    "text": "could be a a Linux P module a cafka broker a microservice basically anywhere where",
    "start": "291919",
    "end": "297639"
  },
  {
    "text": "you have a request from a user or other service rather than trying to make a",
    "start": "297639",
    "end": "302680"
  },
  {
    "text": "decision on that uh on that request yourself in your service you delegate that responsibility to Opa and you say",
    "start": "302680",
    "end": "310320"
  },
  {
    "text": "should this request be allowed or not should this deployment be allowed or should this or that",
    "start": "310320",
    "end": "317520"
  },
  {
    "text": "uh uh please provide me a decision on that and that's basically what Opa does",
    "start": "317520",
    "end": "323280"
  },
  {
    "text": "and the query we send to Opa is just Json and what we get back in a in the form of the decision is also just Jon",
    "start": "323280",
    "end": "330160"
  },
  {
    "text": "so it's Json in and Json out so basically any application or stack where you can deal with Json and possibly an",
    "start": "330160",
    "end": "337919"
  },
  {
    "text": "HTTP request which is probably almost all Technologies written in the last 20",
    "start": "337919",
    "end": "343639"
  },
  {
    "text": "years uh which explains why Opa is uh so",
    "start": "343639",
    "end": "349080"
  },
  {
    "text": "prevalent if we zoom in a bit here on on uh actual policy evaluation it might",
    "start": "349080",
    "end": "355880"
  },
  {
    "text": "look something like this you have a Json document in this case it looks like an HTTP API sending us a query asking",
    "start": "355880",
    "end": "365000"
  },
  {
    "text": "should this be allowed or not we have a request we have a user and we have a policy in between and",
    "start": "365000",
    "end": "372880"
  },
  {
    "text": "this policy says that by default uh allow should not be or allow should be",
    "start": "372880",
    "end": "378160"
  },
  {
    "text": "false that's a fairly sensible default for an authorization policy don't don't",
    "start": "378160",
    "end": "383280"
  },
  {
    "text": "allow anything unless unless we approve it uh the next condition says allow if",
    "start": "383280",
    "end": "391360"
  },
  {
    "text": "admin is in the input user rle so if we have an admin we should allow it regardless of any other",
    "start": "391360",
    "end": "397759"
  },
  {
    "text": "parameters uh that's not the case here so uh we're we're going to move on to the next allow condition or the next",
    "start": "397759",
    "end": "404800"
  },
  {
    "text": "rule in which we say allow read requests or get requests to if the first path",
    "start": "404800",
    "end": "411160"
  },
  {
    "text": "component is users so anyone can read uh from users it's not a get request though",
    "start": "411160",
    "end": "417560"
  },
  {
    "text": "that's not what we have in the inputs so uh we're still not allowed the final allow rule says if",
    "start": "417560",
    "end": "425680"
  },
  {
    "text": "it's a put request which this is meaning someone is trying to modify a",
    "start": "425680",
    "end": "431319"
  },
  {
    "text": "user then the name of the user must name match the name of the user in the path",
    "start": "431319",
    "end": "438639"
  },
  {
    "text": "and again it doesn't this is Peter trying to modify Anders so this would I",
    "start": "438639",
    "end": "445160"
  },
  {
    "text": "didn't this would not be allowed to so uh the end result here is Opa says this",
    "start": "445160",
    "end": "450639"
  },
  {
    "text": "is false so that's basically a crash course Ino and and policy",
    "start": "450639",
    "end": "457160"
  },
  {
    "text": "evaluation and of course again we're not going to have to go step through all of this here but in this case we have a",
    "start": "457160",
    "end": "464840"
  },
  {
    "text": "kubernetes admission review object uh but to Opa this is just Json none of",
    "start": "464840",
    "end": "470400"
  },
  {
    "text": "these things actually mean anything it's just uh a bunch of structured attributes so we can make policy decisions on",
    "start": "470400",
    "end": "477240"
  },
  {
    "text": "anything and this could be a terraform plan or uh or what have",
    "start": "477240",
    "end": "482800"
  },
  {
    "text": "you so why isuse Opa can't we just write this in python or Java or whatnot it's a",
    "start": "482800",
    "end": "489280"
  },
  {
    "text": "very common question and it's a valid one as well so again one of the ideas behind",
    "start": "489280",
    "end": "496199"
  },
  {
    "text": "Opa and I think the problem becomes apparent when you start to have one team",
    "start": "496199",
    "end": "502000"
  },
  {
    "text": "that says can't we just do this in Python and in the same organization you have another team says can't we just do",
    "start": "502000",
    "end": "508280"
  },
  {
    "text": "this in Java can't we just do this in CP and and now you have policies",
    "start": "508280",
    "end": "514440"
  },
  {
    "text": "scattered all across the organization and it's written in different languages it's very hard to audit it's",
    "start": "514440",
    "end": "521279"
  },
  {
    "text": "very hard to control from a central point or place ya Wang from Bloomberg did a a",
    "start": "521279",
    "end": "529120"
  },
  {
    "text": "great talk on ISO and opa the other day where she said and somebody asked her why can't you just use the offer station",
    "start": "529120",
    "end": "536040"
  },
  {
    "text": "mechanism provided by Jupiter Hub or I think it was uh and",
    "start": "536040",
    "end": "541839"
  },
  {
    "text": "she said yeah we could do that but Opa provides us a generic way to apply policy consistently across all of our",
    "start": "541839",
    "end": "548440"
  },
  {
    "text": "services and systems so the policy they used for Jupiter Hub they could use",
    "start": "548440",
    "end": "554680"
  },
  {
    "text": "reuse for other use cases and and that's kind of the point of of using Opa and",
    "start": "554680",
    "end": "560040"
  },
  {
    "text": "rather than than uh trying to solve this just as an as something you solve",
    "start": "560040",
    "end": "565519"
  },
  {
    "text": "isolated in your team but trying to kind of uh to solve it for for our whole",
    "start": "565519",
    "end": "572959"
  },
  {
    "text": "organization some some more on that uh so what would you use native or Opa over",
    "start": "574720",
    "end": "580680"
  },
  {
    "text": "native authorization systems is of course this idea that you can share policy across teams or organizations or",
    "start": "580680",
    "end": "589600"
  },
  {
    "text": "departments and this decoupling of policy where you no longer write uh your",
    "start": "589600",
    "end": "594839"
  },
  {
    "text": "policies in the same language as your applications that means that we can also we can centralize management of that we",
    "start": "594839",
    "end": "601600"
  },
  {
    "text": "might have a security team that wants to do audit or reviews of that and they're not going to they're they might not know",
    "start": "601600",
    "end": "607399"
  },
  {
    "text": "all of these programming languages or Frameworks but if they learn one language like Rego they can work with",
    "start": "607399",
    "end": "613600"
  },
  {
    "text": "this across the whole organization auditing and particularly in regulated Industries you need to know",
    "start": "613600",
    "end": "621959"
  },
  {
    "text": "and this is one feature of opa all these decisions are logged and they're logged in a uniform format too so we will we we",
    "start": "621959",
    "end": "629360"
  },
  {
    "text": "will have one place where all these logs are stored and and we we know where to go to see what what uh what decisions",
    "start": "629360",
    "end": "636880"
  },
  {
    "text": "were made in our systems and of course going back to policy as code we want to be able to",
    "start": "636880",
    "end": "642399"
  },
  {
    "text": "test our policies and we want to test them in a single way as well another benefit of this decoupling",
    "start": "642399",
    "end": "648920"
  },
  {
    "text": "is that we can uh we can do policy updates without having to recompile or",
    "start": "648920",
    "end": "654519"
  },
  {
    "text": "redeploy our applications and we don't we don't really need to reach out to to",
    "start": "654519",
    "end": "659839"
  },
  {
    "text": "the teams are responsible for these applications if we treat policy as a concept of its",
    "start": "659839",
    "end": "667120"
  },
  {
    "text": "own so that was a crash course to Opa so uh now for some project",
    "start": "667120",
    "end": "673760"
  },
  {
    "text": "updates so the big thing going on and we've been working on for I'd say like the the last six months or so is uh the",
    "start": "673760",
    "end": "681320"
  },
  {
    "text": "an upcoming 1.0 release where we tried to uh resolve some",
    "start": "681320",
    "end": "686880"
  },
  {
    "text": "ambiguities uh and other things in the language I think the first commit was",
    "start": "686880",
    "end": "692440"
  },
  {
    "text": "2015 and we've tried to never break uh break the contract or backwards",
    "start": "692440",
    "end": "698160"
  },
  {
    "text": "compatibility ever since um and I should say right away I don't think this is",
    "start": "698160",
    "end": "703360"
  },
  {
    "text": "going to be like a huge pain for anyone we have good good Tooling in place and so on but but but it's basically what",
    "start": "703360",
    "end": "709560"
  },
  {
    "text": "we're what we need to do for the first time we're going to have to do some changes in the language some of these changes improve",
    "start": "709560",
    "end": "716839"
  },
  {
    "text": "readability via some syntax sugar we'll show Show an example of that soon but it",
    "start": "716839",
    "end": "722120"
  },
  {
    "text": "means the if keyword the contains keyword are going to be mandatory for for rules future keywords are uh or Imports",
    "start": "722120",
    "end": "729800"
  },
  {
    "text": "are no longer future that future is now so that will uh just go",
    "start": "729800",
    "end": "734880"
  },
  {
    "text": "away some built-in functions are no longer relevant and will be deprecated or are deprecated already will just be",
    "start": "734880",
    "end": "742199"
  },
  {
    "text": "removed if you run Opa with strict mode today uh you'll basically have this",
    "start": "742199",
    "end": "748000"
  },
  {
    "text": "already uh some things like duplicate Imports uh using input at data or data",
    "start": "748000",
    "end": "754560"
  },
  {
    "text": "as variable names uh or using deprecated functions uh i' would say very few of",
    "start": "754560",
    "end": "759880"
  },
  {
    "text": "you are doing this so should the impact should be uh fairly",
    "start": "759880",
    "end": "765480"
  },
  {
    "text": "minimal to provide an example what a a Rego policy would look like today we",
    "start": "765480",
    "end": "770519"
  },
  {
    "text": "have uh following the package we have some imports of future keywords those",
    "start": "770519",
    "end": "776160"
  },
  {
    "text": "are no longer necessary we will see uh allow and it follow like in the old way",
    "start": "776160",
    "end": "784320"
  },
  {
    "text": "would just be followed by the the curly braces uh now we can write oneliner",
    "start": "784320",
    "end": "789680"
  },
  {
    "text": "rules if and we can skip the curly braces same thing with uh the violations",
    "start": "789680",
    "end": "796320"
  },
  {
    "text": "rule which is a rule building a set a set of strings this case we we will now",
    "start": "796320",
    "end": "802480"
  },
  {
    "text": "uh the syntax which be changed to use contains so as you can see uh a bit more",
    "start": "802480",
    "end": "808600"
  },
  {
    "text": "compact uh if you so want you can still use the the curly braces uh and so on but I",
    "start": "808600",
    "end": "815120"
  },
  {
    "text": "think all in all uh a more readable way to present a",
    "start": "815120",
    "end": "821360"
  },
  {
    "text": "Rego so what what can we do to prepare uh there's really no need to wait for",
    "start": "821360",
    "end": "826959"
  },
  {
    "text": "for that release basically all of these things are already in Opa today uh what you can do is you can say",
    "start": "826959",
    "end": "834920"
  },
  {
    "text": "import Rego dov1 in all your policies and the parser will parse that as uh a a",
    "start": "834920",
    "end": "842199"
  },
  {
    "text": "V1 policy and if there's anything that not conformant or compliant it will complain about",
    "start": "842199",
    "end": "848240"
  },
  {
    "text": "it you can even say to the OPA format Opa fmt rioo uh V1 and it will reformat",
    "start": "848240",
    "end": "854759"
  },
  {
    "text": "your source code to to use if and to use contains and to use this",
    "start": "854759",
    "end": "860480"
  },
  {
    "text": "import and the only time where you will need to do some manual modifications is probably if you use input or data as",
    "start": "860480",
    "end": "866880"
  },
  {
    "text": "variable names those are reserved keywords from on or using one of the deprecated functions and if you're",
    "start": "866880",
    "end": "874120"
  },
  {
    "text": "unsure am I using a deprecated functions you you probably are not they have the these these functions have not been uh",
    "start": "874120",
    "end": "880519"
  },
  {
    "text": "part of the documentation for for years and that's it basically uh and",
    "start": "880519",
    "end": "887680"
  },
  {
    "text": "just as a final thing we will provide a a sort of legacy mode if if you if you",
    "start": "887680",
    "end": "893320"
  },
  {
    "text": "do need to run uh perhaps mixed deployments of of of modern Rego and",
    "start": "893320",
    "end": "898680"
  },
  {
    "text": "older uh for for a for a the foreseeable future you you will be able to do that",
    "start": "898680",
    "end": "904320"
  },
  {
    "text": "you will just have to say that this is this is older an older version I can't update right now for for whatever",
    "start": "904320",
    "end": "911759"
  },
  {
    "text": "reason and uh I wrote a Blog about it if if you're interested to learn more about",
    "start": "911759",
    "end": "917000"
  },
  {
    "text": "uh what Opa 1.0 entails but it's it's not a whole lot of more more than this but if you if you prefer that in written",
    "start": "917000",
    "end": "924000"
  },
  {
    "text": "form uh go check it out okay with that with that out of the",
    "start": "924000",
    "end": "930079"
  },
  {
    "text": "way what what else is uh what else is ahead of us uh so a few features on on on a road",
    "start": "930079",
    "end": "937160"
  },
  {
    "text": "map runtime scheme of validation of input uh meaning if the input data does",
    "start": "937160",
    "end": "943519"
  },
  {
    "text": "not conform to what you expect uh Opa can fail without even evaluating a",
    "start": "943519",
    "end": "949680"
  },
  {
    "text": "policy uh configuration options just today if you do a typo in your config",
    "start": "949680",
    "end": "955319"
  },
  {
    "text": "that that might be like silently ignored or so we will be better on on failing",
    "start": "955319",
    "end": "960399"
  },
  {
    "text": "early on that cases open the test Runner will be better will be improved to to actually",
    "start": "960399",
    "end": "967800"
  },
  {
    "text": "today we'll mostly say like this test failed and you'll have to figure out why we'll try and improve on that so we'll",
    "start": "967800",
    "end": "974240"
  },
  {
    "text": "actually say this is what you expected and this is what you got uh we're also looking at uh some",
    "start": "974240",
    "end": "982560"
  },
  {
    "text": "buil-in or uh language addition to better deal with undefined values inside",
    "start": "982560",
    "end": "987920"
  },
  {
    "text": "of of rules exactly what that will look like remains to be seen rule level tracing is another",
    "start": "987920",
    "end": "995639"
  },
  {
    "text": "common request you have the decision log which will tell you what uh what Opa decided but it can be hard to try and",
    "start": "995639",
    "end": "1003079"
  },
  {
    "text": "figure out like how did it get to that decision so that is something that rule level tracing could help",
    "start": "1003079",
    "end": "1009519"
  },
  {
    "text": "with uh an ellipses operator to help with things like pattern matching uh I",
    "start": "1009519",
    "end": "1015399"
  },
  {
    "text": "think that's kind of would be a hard to explain exactly what how that would look",
    "start": "1015399",
    "end": "1021120"
  },
  {
    "text": "like but uh do check the OPA issue board there's an issue to that describes that",
    "start": "1021120",
    "end": "1027918"
  },
  {
    "text": "finally uh we're also looking at uh dependency management or package management or what you want to call it",
    "start": "1027919",
    "end": "1034918"
  },
  {
    "text": "to see like how how can we improve the situation where where you can actually share code work with libraries and so",
    "start": "1034919",
    "end": "1043640"
  },
  {
    "text": "on uh should just mention of course like as with any road map this is a best gu",
    "start": "1043640",
    "end": "1049000"
  },
  {
    "text": "gu and we'll see what happens but this is these are some of the things we we",
    "start": "1049000",
    "end": "1054520"
  },
  {
    "text": "intend to work on if if there's something you feel strongly about uh let us",
    "start": "1054520",
    "end": "1061679"
  },
  {
    "text": "know finally uh just two cool projects in in the ecosystem right now uh there's",
    "start": "1062160",
    "end": "1068919"
  },
  {
    "text": "a project from Microsoft Regaro which is basically Opa written in",
    "start": "1068919",
    "end": "1074280"
  },
  {
    "text": "Rust uh I think they have uh most things covered uh there is still a few built-in",
    "start": "1074280",
    "end": "1080679"
  },
  {
    "text": "functions or so that that might not uh work as expected but it's a very cool project so so do check it out check that",
    "start": "1080679",
    "end": "1087559"
  },
  {
    "text": "out there's also bindings to a lot of other languages uh there's Regal I don't know",
    "start": "1087559",
    "end": "1093480"
  },
  {
    "text": "if if you all used it already there's a linter for for Rego which is also written in Rego itself but that's a cool",
    "start": "1093480",
    "end": "1100679"
  },
  {
    "text": "project uh I have been uh involved in that myself so I I guess I'm I'm a bit",
    "start": "1100679",
    "end": "1107760"
  },
  {
    "text": "biased and that's it for for me all right so I'm going to talk a little bit about",
    "start": "1107760",
    "end": "1114159"
  },
  {
    "text": "gatekeeper and I'm going to structure this very similarly to the first section here so those of you that are already",
    "start": "1114159",
    "end": "1121200"
  },
  {
    "text": "Avid gatekeeper users uh there's going to be some repeat information in here so just bear with me and we'll get to the",
    "start": "1121200",
    "end": "1127760"
  },
  {
    "text": "the upcoming features towards the end of this so what is gatekeeper at a high",
    "start": "1127760",
    "end": "1133919"
  },
  {
    "text": "level it is a policy controller for kubernetes power",
    "start": "1133919",
    "end": "1139360"
  },
  {
    "text": "by open policy agent that's the backing engine um I don't know how many folks in",
    "start": "1139360",
    "end": "1144559"
  },
  {
    "text": "this room have ever tried to write uh kubernetes validating admission web hook",
    "start": "1144559",
    "end": "1149760"
  },
  {
    "text": "um I have it really didn't go well um it's a challenging thing and um that's",
    "start": "1149760",
    "end": "1155640"
  },
  {
    "text": "not to say that I'm I'm super great at writing Rego either but uh one of the other features that tackles that is",
    "start": "1155640",
    "end": "1161960"
  },
  {
    "text": "there's a robust policy library that accompanies gatekeeper um so you can",
    "start": "1161960",
    "end": "1167120"
  },
  {
    "text": "find that in our Docs so some of the core features that we",
    "start": "1167120",
    "end": "1172559"
  },
  {
    "text": "really Target with this project first one being admission controls so you don't have to write those web hooks",
    "start": "1172559",
    "end": "1178400"
  },
  {
    "text": "anymore um we find that like a lot of folks so like in an Ideal World right",
    "start": "1178400",
    "end": "1184280"
  },
  {
    "text": "all of your workloads are running on kubernetes there's no other form of compute that you have to think about",
    "start": "1184280",
    "end": "1189440"
  },
  {
    "text": "whatsoever um and I think for me at least I know that's not the reality um",
    "start": "1189440",
    "end": "1194720"
  },
  {
    "text": "and so having a system that we can do admission control with in our kubernetes",
    "start": "1194720",
    "end": "1199960"
  },
  {
    "text": "clusters that also ties in to you know Opa and our other systems you know",
    "start": "1199960",
    "end": "1205720"
  },
  {
    "text": "utilizes that same ecosystem is a huge benefit to users so what does admission control",
    "start": "1205720",
    "end": "1214240"
  },
  {
    "text": "look like um this is one of the crds the the core Primitives that we use in this",
    "start": "1214240",
    "end": "1220240"
  },
  {
    "text": "um and this is a constraint template this is a cluster scoped object and this",
    "start": "1220240",
    "end": "1226240"
  },
  {
    "text": "defines what the policy is um so you can see we've got the",
    "start": "1226240",
    "end": "1231720"
  },
  {
    "text": "properties there which are the the input and uh at the bottom that's the Rego um",
    "start": "1231720",
    "end": "1238760"
  },
  {
    "text": "that was shown a little earlier um so this is where the policy definition lives I kind of like to think of this as",
    "start": "1238760",
    "end": "1244919"
  },
  {
    "text": "like an interface um from there we go to",
    "start": "1244919",
    "end": "1250000"
  },
  {
    "text": "an actual constraint um and if the constraint template is the interface this is the implementation of the",
    "start": "1250000",
    "end": "1256240"
  },
  {
    "text": "interface uh this is a namespace scoped object object and this is what defines",
    "start": "1256240",
    "end": "1262360"
  },
  {
    "text": "how we want to apply and enforce that policy so in this case we're saying that we want namespace objects to be subject",
    "start": "1262360",
    "end": "1271320"
  },
  {
    "text": "to that policy that we previously saw another large feature here is",
    "start": "1271320",
    "end": "1278760"
  },
  {
    "text": "mutation so um just admission control based on the object that's trying to",
    "start": "1278760",
    "end": "1285400"
  },
  {
    "text": "enter the kubernetes cluster that that's one facet of it but occas Al you will want to",
    "start": "1285400",
    "end": "1291039"
  },
  {
    "text": "change some shape of the data on this object we see this with things like",
    "start": "1291039",
    "end": "1296760"
  },
  {
    "text": "wanting to have a specific label applied to pods entering a cluster uh maybe what",
    "start": "1296760",
    "end": "1302960"
  },
  {
    "text": "team owns it or something like that so that's where the various mutation",
    "start": "1302960",
    "end": "1308159"
  },
  {
    "text": "operators come into play they can enact those changes on objects um this is the",
    "start": "1308159",
    "end": "1314880"
  },
  {
    "text": "assigned metadata mutator um and this does EX exactly what I alluded to on the",
    "start": "1314880",
    "end": "1321000"
  },
  {
    "text": "previous slide this adds an owner annotation to all",
    "start": "1321000",
    "end": "1326720"
  },
  {
    "text": "pods or matching the name engine x dash you get it and lastly this is one that we saw a",
    "start": "1326720",
    "end": "1336360"
  },
  {
    "text": "huge gap in when looking at other policy systems initially was auditing so and",
    "start": "1336360",
    "end": "1342279"
  },
  {
    "text": "this is a a gap that you know validating emission web hooks themselves leave um you know what the shape of things coming",
    "start": "1342279",
    "end": "1349799"
  },
  {
    "text": "into your cluster looks like but having stood up a few kubernetes Platforms in",
    "start": "1349799",
    "end": "1356200"
  },
  {
    "text": "my day I I know that folks don't always start with policy um usually it's",
    "start": "1356200",
    "end": "1362360"
  },
  {
    "text": "standing up the cluster getting the initial compute going and then there's then there's those early workloads and then policy occurs somewhere down the",
    "start": "1362360",
    "end": "1368559"
  },
  {
    "text": "line there how do you have information about all the workloads that are",
    "start": "1368559",
    "end": "1374000"
  },
  {
    "text": "currently running within the cluster and that's where auditing comes in it will run through and make sure that all of",
    "start": "1374000",
    "end": "1382360"
  },
  {
    "text": "the resources in the cluster are compliant with the policies that you have in place uh so here's what results from",
    "start": "1382360",
    "end": "1389720"
  },
  {
    "text": "auditing look like um there's a a few different ways you can consume these um there are some Prometheus metrics that",
    "start": "1389720",
    "end": "1396480"
  },
  {
    "text": "are exposed if you are interested in uh audit violation counts at a high level",
    "start": "1396480",
    "end": "1402960"
  },
  {
    "text": "um and then beyond that the audit violations are also uh added to the",
    "start": "1402960",
    "end": "1409200"
  },
  {
    "text": "status object of the constraint that the object was in violation of um this",
    "start": "1409200",
    "end": "1415520"
  },
  {
    "text": "approach has introduced some challenges to those so a little preview to to some upcoming",
    "start": "1415520",
    "end": "1421720"
  },
  {
    "text": "features um so now that you've got the the very basics down um we're going to",
    "start": "1421720",
    "end": "1427760"
  },
  {
    "text": "talk about what's new um so in the past when we were putting all of those audit",
    "start": "1427760",
    "end": "1434080"
  },
  {
    "text": "violations on the uh the status of the constraint um um folks that run large",
    "start": "1434080",
    "end": "1440919"
  },
  {
    "text": "clusters with a lot of policies and like I know that these days there are a lot of companies and teams running huge",
    "start": "1440919",
    "end": "1446679"
  },
  {
    "text": "multi-tenant clusters um you start to run into ETD limits and and performance",
    "start": "1446679",
    "end": "1452200"
  },
  {
    "text": "implications with that um so one of the newer features um that launched is Pub",
    "start": "1452200",
    "end": "1458679"
  },
  {
    "text": "sub support for these audit violations um So currently the the driver that's",
    "start": "1458679",
    "end": "1464000"
  },
  {
    "text": "supported is Dapper backed by redis um and this is what structure of that data",
    "start": "1464000",
    "end": "1469399"
  },
  {
    "text": "is going to look like um and this way it's um a lot more possible to tie into",
    "start": "1469399",
    "end": "1475279"
  },
  {
    "text": "whatever other systems that you're utilizing if you're just subscribing to a topic um on on reddis uh you can",
    "start": "1475279",
    "end": "1484679"
  },
  {
    "text": "follow up you know that information with whatever additional automation you you have in",
    "start": "1484679",
    "end": "1490640"
  },
  {
    "text": "place uh beyond that is integration with the new native kubernetes object",
    "start": "1490640",
    "end": "1497159"
  },
  {
    "text": "validating admission policy um so I don't remember which kubernetes released this uh this one alpha in um but uh it's",
    "start": "1497159",
    "end": "1506080"
  },
  {
    "text": "a a newer native object for admission um",
    "start": "1506080",
    "end": "1511320"
  },
  {
    "text": "and this way you know we we've gotten some questions on like why support this",
    "start": "1511320",
    "end": "1517200"
  },
  {
    "text": "this native object you know is in gatekeeper kind of a a competing um Paradigm to this and not really at all I",
    "start": "1517200",
    "end": "1524000"
  },
  {
    "text": "think um this provides folks the opportunity to work work with the uh",
    "start": "1524000",
    "end": "1529679"
  },
  {
    "text": "cell language or common expression language that that Google helped develop um if if you want to use that instead of",
    "start": "1529679",
    "end": "1536919"
  },
  {
    "text": "Rego this provides you that opportunity um this will just create those underlying admission objects uh. are",
    "start": "1536919",
    "end": "1544520"
  },
  {
    "text": "native to kubernetes um another thing where this comes in handy is uh gatekeeper has the concept of like",
    "start": "1544520",
    "end": "1551919"
  },
  {
    "text": "external data so you can use gatekeeper to consult other systems if you need",
    "start": "1551919",
    "end": "1558279"
  },
  {
    "text": "outside data to make a decision um and being able to then tie in that outside",
    "start": "1558279",
    "end": "1564360"
  },
  {
    "text": "data with validating admission policies is something you wouldn't be able to do strictly with the native object um so",
    "start": "1564360",
    "end": "1571679"
  },
  {
    "text": "this is a very new feature um we will have an alpha of it in our next",
    "start": "1571679",
    "end": "1577679"
  },
  {
    "text": "gatekeeper release um but the the initial PR has been merged on the main",
    "start": "1577679",
    "end": "1582840"
  },
  {
    "text": "branch if anyone wants to go look at it um there's a demo in in the main repo",
    "start": "1582840",
    "end": "1588480"
  },
  {
    "text": "right now um with instructions on how to run that if you'd like to see things actually working um QR code there and a",
    "start": "1588480",
    "end": "1595279"
  },
  {
    "text": "little bitly link um check that out it's uh there was a lot of work that went into this over the last six months and I",
    "start": "1595279",
    "end": "1601720"
  },
  {
    "text": "think hopefully folks are excited to try it out I think you know we on the team were we really excited about",
    "start": "1601720",
    "end": "1607919"
  },
  {
    "text": "it um and then this is the the new new one that is not actually merged at all",
    "start": "1607919",
    "end": "1614919"
  },
  {
    "text": "yet this is very much a work in progress we're hoping to have an alpha in our",
    "start": "1614919",
    "end": "1620200"
  },
  {
    "text": "next release but as always time will tell um we heard some feedback for folks",
    "start": "1620200",
    "end": "1625960"
  },
  {
    "text": "that were using gatekeeper and writing policies that they wanted a little bit more granular control over how the",
    "start": "1625960",
    "end": "1632840"
  },
  {
    "text": "policies are enforced and I think the uh the request that actually kicked this discussion off was what if I want to",
    "start": "1632840",
    "end": "1640600"
  },
  {
    "text": "exclude one constraint from the audit process I don't feel the need to audit",
    "start": "1640600",
    "end": "1646600"
  },
  {
    "text": "this constraint um and looking at that it it opened the door to a lot more granular control over",
    "start": "1646600",
    "end": "1654799"
  },
  {
    "text": "how these policies are enforced so going forward we have this feature called enforcement actions and it is going to",
    "start": "1654799",
    "end": "1661360"
  },
  {
    "text": "allow you to Define how each action how each constraint is enforced at various",
    "start": "1661360",
    "end": "1668159"
  },
  {
    "text": "entry points like the the web hook or the gator CLI um and each you will be",
    "start": "1668159",
    "end": "1675000"
  },
  {
    "text": "able to take different actions per point um hopefully this example here you can",
    "start": "1675000",
    "end": "1681279"
  },
  {
    "text": "see we've got a deny on this constraint which is only enforced at the web Hook",
    "start": "1681279",
    "end": "1687519"
  },
  {
    "text": "and the gator level so there wouldn't be any kind of auditing associated with this",
    "start": "1687519",
    "end": "1693519"
  },
  {
    "text": "constraint and uh this is not a demo um but if you want to see a very detailed",
    "start": "1693559",
    "end": "1699080"
  },
  {
    "text": "design dock of how this is going to work go ahead and take a look here um I started this dock about 6 months ago and",
    "start": "1699080",
    "end": "1705960"
  },
  {
    "text": "then our engineering team came and made it not bad so I think it's in a pretty good space right now um there's really",
    "start": "1705960",
    "end": "1712960"
  },
  {
    "text": "good detail on on how the feature is going to work and what backwards compatibility is going to look",
    "start": "1712960",
    "end": "1720320"
  },
  {
    "text": "like and if you want to get involved and I I add this one particularly because we",
    "start": "1720360",
    "end": "1725720"
  },
  {
    "text": "are interested in having folks drop by the community meeting and providing feedback on the enforcement actions",
    "start": "1725720",
    "end": "1731360"
  },
  {
    "text": "design we are early enough along in that process that we would love to hear input on if this would be a useful feature to",
    "start": "1731360",
    "end": "1737720"
  },
  {
    "text": "you all and if the current API that we have designed actually um fits what you would expect from something like this so",
    "start": "1737720",
    "end": "1744799"
  },
  {
    "text": "we have a gatekeeper channel on the OPA slack and then um on the GitHub repo you",
    "start": "1744799",
    "end": "1751640"
  },
  {
    "text": "can find information on when our community meetings take place they're also on the cncf",
    "start": "1751640",
    "end": "1759919"
  },
  {
    "text": "calendar that's what we",
    "start": "1760000",
    "end": "1763519"
  },
  {
    "text": "got uh yeah if if there are any questions uh",
    "start": "1767039",
    "end": "1774320"
  },
  {
    "text": "or if not yeah there are questions good uh I just want to say like after uh if",
    "start": "1774320",
    "end": "1779799"
  },
  {
    "text": "you'd rather come and talk with us later we be in the OPA kiosk in the in the project Pavilion so we'll we'll stick",
    "start": "1779799",
    "end": "1786360"
  },
  {
    "text": "around there for for an hour or so after this so come talk to us there too yeah",
    "start": "1786360",
    "end": "1791880"
  },
  {
    "text": "so a brief question about mutations uh so do you see any improvements in that",
    "start": "1791880",
    "end": "1797679"
  },
  {
    "text": "area I'm actually asking specifically because you meant that the constraints will be",
    "start": "1797679",
    "end": "1804399"
  },
  {
    "text": "better targeted but maybe there's also some room Improvement uh regarding the",
    "start": "1804399",
    "end": "1810000"
  },
  {
    "text": "mutations so let's say I want only to run mutations on Create events to set",
    "start": "1810000",
    "end": "1815919"
  },
  {
    "text": "some defaults but we have some some issues with immutable Fields so they will",
    "start": "1815919",
    "end": "1822760"
  },
  {
    "text": "trigger during updates but never work sure yeah I um I don't know of any",
    "start": "1822760",
    "end": "1828279"
  },
  {
    "text": "specific improvements planned to to mutations um the mutators at this point",
    "start": "1828279",
    "end": "1834120"
  },
  {
    "text": "but um definitely would love to have you open an issue on that one on the repo and uh we can talk about it with the",
    "start": "1834120",
    "end": "1840279"
  },
  {
    "text": "team I think there's definitely a use case there thanks sorry I also don't know where you are because the light is",
    "start": "1840279",
    "end": "1847000"
  },
  {
    "text": "like right in my eye so if someone ask a question and I'm looking in a completely different direction like it's it's",
    "start": "1847000",
    "end": "1852159"
  },
  {
    "text": "nothing personal I swear any other questions",
    "start": "1852159",
    "end": "1859919"
  },
  {
    "text": "hi um might be a slightly basic question given that I'm a newbie to Opa but can",
    "start": "1860720",
    "end": "1866799"
  },
  {
    "text": "you give an example of a uh an implementation how this would be worked in let's say to traffic within a",
    "start": "1866799",
    "end": "1874000"
  },
  {
    "text": "kubernetes cluster so there's couple of different options I can think of about interception and re-rooting into Opa but",
    "start": "1874000",
    "end": "1880000"
  },
  {
    "text": "can you give a typical example on what works well uh sure so so yeah there's a",
    "start": "1880000",
    "end": "1886720"
  },
  {
    "text": "there's a couple of way to you can integrate Opa if if we're talking about something like uh authorization or app",
    "start": "1886720",
    "end": "1893720"
  },
  {
    "text": "level authorization the normal deployment pattern in kubernetes would probably be as a side car so Opa runs on",
    "start": "1893720",
    "end": "1900559"
  },
  {
    "text": "the same uh host or in the same pod as your application meaning when you query Opa it's a it's a request to Local Host",
    "start": "1900559",
    "end": "1907799"
  },
  {
    "text": "essentially making it uh fast a low latency uh and in some cases you would",
    "start": "1907799",
    "end": "1915919"
  },
  {
    "text": "modify your application to to somehow intercept the request and send it over to Opa and then deal with the response",
    "start": "1915919",
    "end": "1923200"
  },
  {
    "text": "there's also uh the option to put a proxy in front of your application maybe a service mesh like Envoy Doo uh where",
    "start": "1923200",
    "end": "1931399"
  },
  {
    "text": "where those would be responsible for calling Opa and deal with the result and that is that that would be preferable if",
    "start": "1931399",
    "end": "1938039"
  },
  {
    "text": "you don't if you don't want or can't touch the code of of your applications okay perfect thank",
    "start": "1938039",
    "end": "1946000"
  },
  {
    "text": "you thank",
    "start": "1946840",
    "end": "1950120"
  },
  {
    "text": "you sweet all right I think that is it then if you have any other questions just come find us in the OPA herea",
    "start": "1952519",
    "end": "1960279"
  },
  {
    "text": "thanks everyone",
    "start": "1960279",
    "end": "1965880"
  }
]