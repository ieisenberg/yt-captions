[
  {
    "text": "all right so I'm going to start we're not going to start the program officially for another minute um out of respect for people getting here um but I",
    "start": "160",
    "end": "7319"
  },
  {
    "text": "will start with some of my Preamble so here's my first question who in the room",
    "start": "7319",
    "end": "13040"
  },
  {
    "text": "plays Minecraft okay okay maybe not quite half",
    "start": "13040",
    "end": "20000"
  },
  {
    "text": "whose kids play Minecraft okay also about half so you",
    "start": "20000",
    "end": "27480"
  },
  {
    "text": "all um probably want to keep your phone especially those of you who have kids that play it who think that what you do",
    "start": "27480",
    "end": "34040"
  },
  {
    "text": "for a living is kind of dorky or they don't understand it is pull your phone out because you're going to be able to",
    "start": "34040",
    "end": "39559"
  },
  {
    "text": "take some photos of the slides and you're going to be able to come home and say see I do cool stuff for work um so",
    "start": "39559",
    "end": "48039"
  },
  {
    "text": "um and I I'm going to say right away because I will forget as soon as we go into this swing of things that we have",
    "start": "48039",
    "end": "54920"
  },
  {
    "text": "my wonderful colleague Marcel to thank for a lot of the Minecraft",
    "start": "54920",
    "end": "60440"
  },
  {
    "text": "um imagery that you're going to see throughout the slid so thank you",
    "start": "60440",
    "end": "65670"
  },
  {
    "text": "[Applause]",
    "start": "65670",
    "end": "71600"
  },
  {
    "text": "Marcela okay I think we can get started I think we only have a few seconds before it",
    "start": "71600",
    "end": "77680"
  },
  {
    "text": "hits the magic 11:15 Mark um the first thing I want to do is I want to thank",
    "start": "77680",
    "end": "83360"
  },
  {
    "text": "you all for coming um you know and I want to thank Justin for Justin and",
    "start": "83360",
    "end": "88720"
  },
  {
    "text": "Marcel for the title to this talk because it's not every day that you can pump up Minecraft in the middle of a",
    "start": "88720",
    "end": "95040"
  },
  {
    "text": "title that H that shows up here at cuon so I'm sure that that's what Drew many",
    "start": "95040",
    "end": "100560"
  },
  {
    "text": "of you um I will tell you that I've had the pleasure of working with Justin over the course of the last month or two I'm",
    "start": "100560",
    "end": "106799"
  },
  {
    "text": "preparing for this talk and really understanding what he's implemented and it is a great story so you're in for a",
    "start": "106799",
    "end": "114000"
  },
  {
    "text": "treat and so with that um we'll go ahead and get started um I will let my",
    "start": "114000",
    "end": "120640"
  },
  {
    "text": "colleague here Justin introduce himself and then I'll introduce myself as well hey everybody uh Justin headed BP of",
    "start": "120640",
    "end": "127240"
  },
  {
    "text": "devops at Super League uh yeah I get to work on the cool stuff with kubernetes so uh and uh help",
    "start": "127240",
    "end": "135120"
  },
  {
    "text": "my team build out neat and interesting stuff so yeah and you've been at Super League for about four years almost",
    "start": "135120",
    "end": "142200"
  },
  {
    "text": "almost four years yeah almost four years and I was just asking Justin that he uh he's been doing kubernetes for about",
    "start": "142200",
    "end": "147640"
  },
  {
    "text": "seven years so you have a fair bit of experience with this and so you'll see as we go into the details that he he",
    "start": "147640",
    "end": "154760"
  },
  {
    "text": "really had to uh tap in on that to be able to address the uh the particular use case here my name is Cornelia I work",
    "start": "154760",
    "end": "162159"
  },
  {
    "text": "for spectroc cloud um which is a kubernetes management platform we're not going to talk a a whole lot about spectr",
    "start": "162159",
    "end": "169120"
  },
  {
    "text": "Cloud today um I'll maybe sprinkle in a little bit here and there to tell you a little bit about it um in terms of my",
    "start": "169120",
    "end": "175280"
  },
  {
    "text": "background I have been doing Cloud native for more than a decade I spent",
    "start": "175280",
    "end": "180400"
  },
  {
    "text": "seven or eight years at pivotal working on cloud Foundry anybody do any Cloud Foundry in the past yep so some Cloud",
    "start": "180400",
    "end": "187319"
  },
  {
    "text": "Foundry in here and then towards my the end of my pivotal tenure I also spent some time I started working with",
    "start": "187319",
    "end": "193560"
  },
  {
    "text": "kubernetes who brought pivotal container service to Market um I also wrote a book",
    "start": "193560",
    "end": "198799"
  },
  {
    "text": "called Cloud native patterns it's a Manning book um targeted at the application developer and the",
    "start": "198799",
    "end": "204200"
  },
  {
    "text": "application architect to help you understand how to write software for the cloud so with that we'll start the story",
    "start": "204200",
    "end": "212920"
  },
  {
    "text": "all right uh this talk could have also been called there and Back Again The Hobbit's tail or I mean you know a",
    "start": "212920",
    "end": "219879"
  },
  {
    "text": "Minecraft tail basically uh and it's about a journey to Bare Metal so it's uh it's there and",
    "start": "219879",
    "end": "226439"
  },
  {
    "text": "back again because um as you'll see as we get into it we started on bare metal",
    "start": "226439",
    "end": "232040"
  },
  {
    "text": "even myself uh actually started my career in Chicago and um",
    "start": "232040",
    "end": "238319"
  },
  {
    "text": "about I'm not sure sure which direction I'm at but right across the street is an eonic Data Center and I used to spend a",
    "start": "238319",
    "end": "244280"
  },
  {
    "text": "lot of you know Long Cold Nights in there just racking and stacking and",
    "start": "244280",
    "end": "249879"
  },
  {
    "text": "crash carding and fixing things that were broken uh you know before you didn't have to go in and drive into",
    "start": "249879",
    "end": "255079"
  },
  {
    "text": "places so that's kind of uh what this uh talk",
    "start": "255079",
    "end": "260199"
  },
  {
    "text": "is going to be about here's the uh General agenda of",
    "start": "260199",
    "end": "268240"
  },
  {
    "text": "what we'll go through uh we'll talk about you know going to the cloud uh laying a foundation for bare",
    "start": "268240",
    "end": "276280"
  },
  {
    "text": "metal going through kind of how you do life cycle Management in a bare metal environment which is a little bit",
    "start": "276280",
    "end": "282520"
  },
  {
    "text": "different especially for a Minecraft workload and we'll talk about you know the results and how it happened and you",
    "start": "282520",
    "end": "289160"
  },
  {
    "text": "know did it actually work at the end uh I guess probably a little bit",
    "start": "289160",
    "end": "296840"
  },
  {
    "text": "about super league and what super league is uh essentially Super League is a brand",
    "start": "296840",
    "end": "303080"
  },
  {
    "text": "activation agency so they're helping to bring uh Brands like Mattel into Roblox",
    "start": "303080",
    "end": "310600"
  },
  {
    "text": "or places or other brands like Nickelodeon into like my mine Hut or",
    "start": "310600",
    "end": "316440"
  },
  {
    "text": "Minecraft worlds so they're building out experiences for you know people to play",
    "start": "316440",
    "end": "321960"
  },
  {
    "text": "and uh getting people excited about Brands and the interactions within you know those kind of uh you know",
    "start": "321960",
    "end": "331080"
  },
  {
    "text": "digital worlds that a lot of people are spending their times in so and and correct me if I'm wrong but I think",
    "start": "331080",
    "end": "336560"
  },
  {
    "text": "you've told me that part of what you did also was you kind of helped people come",
    "start": "336560",
    "end": "342000"
  },
  {
    "text": "together as groups to to game right yeah uh M Hut itself is the largest Java",
    "start": "342000",
    "end": "349600"
  },
  {
    "text": "based server community in the world and so there's just uh it's a little",
    "start": "349600",
    "end": "355720"
  },
  {
    "text": "different than other Minecraft hosting places or um you know just having a",
    "start": "355720",
    "end": "360800"
  },
  {
    "text": "server by yourself um talk a little bit about it but there there's a you know",
    "start": "360800",
    "end": "366000"
  },
  {
    "text": "there's a community and Lobby and kind of gathering place where everyone comes in when they're joining and and going off to their own servers or to you know",
    "start": "366000",
    "end": "373160"
  },
  {
    "text": "kind of promote their own servers and so on and so forth so it's uh it's all about interactivity and community and uh",
    "start": "373160",
    "end": "381560"
  },
  {
    "text": "and also like a family like friendly place for kids to play Minecraft as well",
    "start": "381560",
    "end": "386880"
  },
  {
    "text": "so very cool",
    "start": "386880",
    "end": "391400"
  },
  {
    "text": "all right we'll talk about what started all this off um going into survival",
    "start": "392319",
    "end": "398720"
  },
  {
    "text": "mode uh first we moved mine Hut to the cloud so it started in a provider called",
    "start": "398960",
    "end": "406160"
  },
  {
    "text": "ovh where we were doing kind of dedicated servers um everything was kind of manually done so on and so forth uh",
    "start": "406160",
    "end": "413520"
  },
  {
    "text": "and we migrated over to AWS ECS so we were looking for you know a more",
    "start": "413520",
    "end": "419759"
  },
  {
    "text": "professional stable uh platform that we could get help with if we needed it uh",
    "start": "419759",
    "end": "425800"
  },
  {
    "text": "ovh is primarily European provider and so kind of the the hours were not",
    "start": "425800",
    "end": "431400"
  },
  {
    "text": "conducive to that uh we wanted on demand um ability to do you know API",
    "start": "431400",
    "end": "437280"
  },
  {
    "text": "everything and uh kind of get a little bit more modern with the container orchestration platform",
    "start": "437280",
    "end": "444440"
  },
  {
    "text": "so after AWS uh they decided to moveed",
    "start": "444440",
    "end": "449680"
  },
  {
    "text": "to gcp so this is prior to me being there but uh the AWS infrastructure got",
    "start": "449680",
    "end": "455440"
  },
  {
    "text": "compromised and uh they brought in a consultant to try and you know ask them what they should do and where they",
    "start": "455440",
    "end": "462039"
  },
  {
    "text": "should go in the future and the consultant uh kind of built out a solution using kubernetes uh at that",
    "start": "462039",
    "end": "469360"
  },
  {
    "text": "time really the only place if you wanted to manage kubernetes was GK and Google",
    "start": "469360",
    "end": "475159"
  },
  {
    "text": "and so that's where it moved",
    "start": "475159",
    "end": "481319"
  },
  {
    "text": "now I started at Super League uh one month before the pandemic hit uh I actually started to build",
    "start": "481879",
    "end": "489960"
  },
  {
    "text": "started at Super League to build out a live in-person Esports platform globally",
    "start": "489960",
    "end": "496080"
  },
  {
    "text": "um and that did not happen so uh but uh you know everyone was uh had a little",
    "start": "496080",
    "end": "503639"
  },
  {
    "text": "bit more time on their hands when the pandemic started everything shut down uh people started playing mine Hut on or",
    "start": "503639",
    "end": "509960"
  },
  {
    "text": "Minecraft on M Hut a lot more and uh",
    "start": "509960",
    "end": "515039"
  },
  {
    "text": "the the cost was getting out of control so I'm curious is there anybody in here",
    "start": "515039",
    "end": "521240"
  },
  {
    "text": "who I know many of you said you play Minecraft is it anybody playing Minecraft on mine",
    "start": "521240",
    "end": "527639"
  },
  {
    "text": "Hut you doing it mostly on your own local machines yeah I'm seeing a lot of",
    "start": "528160",
    "end": "533320"
  },
  {
    "text": "nodding heads interesting okay so just for a little bit of background what mine Hut is is it's an environment where you",
    "start": "533320",
    "end": "539720"
  },
  {
    "text": "can go and instead of having to run M Minecraft locally you can just run it up",
    "start": "539720",
    "end": "545079"
  },
  {
    "text": "in the cloud and that's really important context for us to have because you you'll see as we go through this story",
    "start": "545079",
    "end": "550800"
  },
  {
    "text": "you'll see that what that means is that because the game is actually running in the cloud it's stateful those of you who",
    "start": "550800",
    "end": "557640"
  },
  {
    "text": "play M Minecraft know even more than I do because I'm afraid I don't play um",
    "start": "557640",
    "end": "563839"
  },
  {
    "text": "that it's stateful you care about it remembering where you've just come from and where your you know what the what",
    "start": "563839",
    "end": "570480"
  },
  {
    "text": "the environment it looks like where you currently are in the game so that's what we're talking about here is that we're",
    "start": "570480",
    "end": "576360"
  },
  {
    "text": "talking about a whole bunch of different instances of Minecraft that are running on these servers and so before the",
    "start": "576360",
    "end": "583200"
  },
  {
    "text": "pandemic they had a certain amount of traffic and then the pandemic hit and people were running more Minecraft on",
    "start": "583200",
    "end": "591279"
  },
  {
    "text": "their infrastructure that very infrastructure that he just talked about being in in",
    "start": "591279",
    "end": "597120"
  },
  {
    "text": "gcp so uh we faced with kind of what to do um M",
    "start": "597560",
    "end": "604200"
  },
  {
    "text": "Hut essentially is a free service so people especially at that time could come and just build a server out and we",
    "start": "604200",
    "end": "611000"
  },
  {
    "text": "would run it for them and uh and that was unsustainable with the numbers that",
    "start": "611000",
    "end": "616200"
  },
  {
    "text": "we were getting up to and so we we wondered you know how are we going to",
    "start": "616200",
    "end": "621279"
  },
  {
    "text": "keep this running and keep the lights on and while still uh uh not going bankrupt",
    "start": "621279",
    "end": "627279"
  },
  {
    "text": "on this product so so we had to get",
    "start": "627279",
    "end": "632639"
  },
  {
    "text": "creative in gcp uh at the height of all this we were spending about 200k a month",
    "start": "636440",
    "end": "642560"
  },
  {
    "text": "on uh on mine Hut was mostly compute uh but",
    "start": "642560",
    "end": "648839"
  },
  {
    "text": "a big part of it is also uh with games and is egress cost so those are all uh",
    "start": "648839",
    "end": "655440"
  },
  {
    "text": "very expensive items in you know your top public public clouds and so we uh we",
    "start": "655440",
    "end": "662240"
  },
  {
    "text": "took a look around we looked at a number of different options uh you know going",
    "start": "662240",
    "end": "668240"
  },
  {
    "text": "back to Dedicated servers building things out ourselves you know even taking down Colo space and buying",
    "start": "668240",
    "end": "674200"
  },
  {
    "text": "servers so but uh ultimately we looked at bare metal and it promised a pretty",
    "start": "674200",
    "end": "680360"
  },
  {
    "text": "good cost savings on the machine side it looked like it would be at least 50% uh we didn't have EBS storage then",
    "start": "680360",
    "end": "687399"
  },
  {
    "text": "because they would have storage inside the machine came came with the pricing and the network was a big one which was at least",
    "start": "687399",
    "end": "693959"
  },
  {
    "text": "90% savings",
    "start": "693959",
    "end": "697639"
  },
  {
    "text": "so but okay so so Justin wanted to move the",
    "start": "699959",
    "end": "705160"
  },
  {
    "text": "Justin and his organization decided to move to Bare Metal but if you remember when he talked about moving into the",
    "start": "705160",
    "end": "710839"
  },
  {
    "text": "cloud they were originally on bare metal when they moved over to the cloud there were a couple of reasons for doing so it",
    "start": "710839",
    "end": "717480"
  },
  {
    "text": "was to have that agility it was to be able to use apis to provision things it",
    "start": "717480",
    "end": "722760"
  },
  {
    "text": "was that that ability to have some level of elasticity in the amount of resources",
    "start": "722760",
    "end": "728639"
  },
  {
    "text": "that you're using and you remember that they moved from bare metal into ECS so",
    "start": "728639",
    "end": "734320"
  },
  {
    "text": "they were moving into a containerized environment so that's the challenge that we're going to talk about here which is",
    "start": "734320",
    "end": "741880"
  },
  {
    "text": "hey when we're moving to be back to Bare Metal we're not moving back to the bare metal that we came from initially we",
    "start": "741880",
    "end": "749360"
  },
  {
    "text": "want to bring those benefits that came from the cloud we want to bring those",
    "start": "749360",
    "end": "754880"
  },
  {
    "text": "back with us over into the um bare metal environment and so we're going to talk",
    "start": "754880",
    "end": "761360"
  },
  {
    "text": "about each each of those three things so Justin maybe first talk about your containerized architecture yeah this is",
    "start": "761360",
    "end": "767600"
  },
  {
    "text": "a simplifed view of what mine Hut looks like on top of kubernetes uh especially from the player traffic",
    "start": "767600",
    "end": "774320"
  },
  {
    "text": "perspective so at the you know the entry point obviously the player is connecting",
    "start": "774320",
    "end": "780920"
  },
  {
    "text": "in they go through um we use cloud flare Spectrum to basically clean up the",
    "start": "780920",
    "end": "786199"
  },
  {
    "text": "traffic prevent major um volumetric Doses and from there it hits uh what's",
    "start": "786199",
    "end": "792920"
  },
  {
    "text": "called a velocity proxy so uh velocity is a it's an open source um tool that",
    "start": "792920",
    "end": "799279"
  },
  {
    "text": "Minecraft um people can use to uh well proxy their Minecraft TR traffic so that",
    "start": "799279",
    "end": "806600"
  },
  {
    "text": "sits in a um basically a bgp ecmp uh setup uh that",
    "start": "806600",
    "end": "814639"
  },
  {
    "text": "has uh sticky sessions or constant hashing so that players aren't going to be be dropped if uh something happens",
    "start": "814639",
    "end": "822320"
  },
  {
    "text": "you know with a node or something so the from there in general people will get",
    "start": "822320",
    "end": "827839"
  },
  {
    "text": "dumped into the game Lobby and that's where kind of that Community thing happens where people can see um uh top",
    "start": "827839",
    "end": "836000"
  },
  {
    "text": "servers that are being played right now they can interact with things like the Nickelodeon event they can uh do parkl",
    "start": "836000",
    "end": "843800"
  },
  {
    "text": "and all these other things in Minecraft in there and get um rewards and so on and so forth for doing that kind of",
    "start": "843800",
    "end": "849440"
  },
  {
    "text": "stuff uh from there they can then jump over to their own game server someone",
    "start": "849440",
    "end": "856560"
  },
  {
    "text": "else's um and play you know Minecraft as you know as a community or with you know",
    "start": "856560",
    "end": "864160"
  },
  {
    "text": "just one person or you can have you know tens of people in there so uh the uh",
    "start": "864160",
    "end": "870920"
  },
  {
    "text": "I'll talk a little bit about the the other things a little later that you see on there but that's kind of the gist of",
    "start": "870920",
    "end": "876079"
  },
  {
    "text": "what it looks like playing from the player traffic perspective and and those components most of those components that",
    "start": "876079",
    "end": "882320"
  },
  {
    "text": "you talked about are implemented as relatively standard web services web uis",
    "start": "882320",
    "end": "887680"
  },
  {
    "text": "those types of things and all that's running in kubernetes that's correct yeah okay so",
    "start": "887680",
    "end": "893199"
  },
  {
    "text": "it's that containerized architecture all right so the second thing that we talked about was we didn't",
    "start": "893199",
    "end": "898800"
  },
  {
    "text": "want to lose that containerized so kubernetes is the solution there but hang on a second kubernetes on bare",
    "start": "898800",
    "end": "905399"
  },
  {
    "text": "metal well I wanted to again I wanted to maintain that level of API support that",
    "start": "905399",
    "end": "912800"
  },
  {
    "text": "I had for being able to get a cluster getting a cluster very easily being able",
    "start": "912800",
    "end": "918040"
  },
  {
    "text": "to have some level of elasticity but hang on a second bare metal and the the",
    "start": "918040",
    "end": "924199"
  },
  {
    "text": "way this the solution works here is it leverages something called Maz ma is a",
    "start": "924199",
    "end": "930120"
  },
  {
    "text": "project that comes out of canonical and it is basically a cloudlike API for",
    "start": "930120",
    "end": "935759"
  },
  {
    "text": "hardware and so what you see on the screen here is on the top you see a bunch of different operating systems",
    "start": "935759",
    "end": "941399"
  },
  {
    "text": "that are available and on the bottom you see a whole bunch of different Hardware elements that are available and those",
    "start": "941399",
    "end": "948440"
  },
  {
    "text": "things if you if you remember going to like ec2 or gcp and uh spinning up a",
    "start": "948440",
    "end": "954759"
  },
  {
    "text": "virtual machine that's basically what you're doing you're saying I want one of these these machine types and I want",
    "start": "954759",
    "end": "960199"
  },
  {
    "text": "this operating system on it so that's what Maz gives you Ma gives you that API",
    "start": "960199",
    "end": "965600"
  },
  {
    "text": "that makes bare metal look like a cloud now there's a second element to apis and",
    "start": "965600",
    "end": "972360"
  },
  {
    "text": "that is well okay now I have an API for bare metal machines how do I turn those",
    "start": "972360",
    "end": "977920"
  },
  {
    "text": "bare metal machines into a kubernetes cluster and that's where cluster API",
    "start": "977920",
    "end": "983199"
  },
  {
    "text": "comes in so I I just want to check I my",
    "start": "983199",
    "end": "988240"
  },
  {
    "text": "time here is showing 20 minutes and you just showed me 5 minutes so I think we're good",
    "start": "988240",
    "end": "995639"
  },
  {
    "text": "so so I'm I'm G to keep going based on this timer somebody do let me know if",
    "start": "995639",
    "end": "1001000"
  },
  {
    "text": "there is a difference because we have a lot more than five minutes of content left apologize for that so cluster API",
    "start": "1001000",
    "end": "1008600"
  },
  {
    "text": "is a cncf project how many people are doing things with cluster API today only",
    "start": "1008600",
    "end": "1014720"
  },
  {
    "text": "only a little maybe a quarter of you maybe a little bit less than a quarter so what cluster API is is it is an API",
    "start": "1014720",
    "end": "1022199"
  },
  {
    "text": "that allows you to interact with clusters exactly the same way that you",
    "start": "1022199",
    "end": "1027280"
  },
  {
    "text": "interact with workloads on your clusters today in workloads what do you do you",
    "start": "1027280",
    "end": "1033120"
  },
  {
    "text": "create a deployment that deployment you just apply that into the cluster and",
    "start": "1033120",
    "end": "1039120"
  },
  {
    "text": "then all the magic happens that deployment gets converted into replica sets replica sets get converted into",
    "start": "1039120",
    "end": "1045600"
  },
  {
    "text": "pods all of that stuff is kept up to date for you well cluster API does that",
    "start": "1045600",
    "end": "1051039"
  },
  {
    "text": "for you for clusters and so cluster API has a number",
    "start": "1051039",
    "end": "1057520"
  },
  {
    "text": "of different providers here's just a handful of them these are the providers that we support in our spectral Cloud",
    "start": "1057520",
    "end": "1064000"
  },
  {
    "text": "product so we can attach to any one of these environments including bare metal",
    "start": "1064000",
    "end": "1069640"
  },
  {
    "text": "environments that you see on here and what that cluster API does is it we have",
    "start": "1069640",
    "end": "1075120"
  },
  {
    "text": "built an open source project called the cluster API Prov provider for Maz we've done that at spectroc Cloud so you can",
    "start": "1075120",
    "end": "1081880"
  },
  {
    "text": "find that in our GitHub repository and that again leverages the cluster API specification that is",
    "start": "1081880",
    "end": "1088880"
  },
  {
    "text": "totally open source we've created an implementation for maass that is also open source that allows you to",
    "start": "1088880",
    "end": "1095240"
  },
  {
    "text": "instrument those clusters using an API just like you would in the cloud so you",
    "start": "1095240",
    "end": "1100640"
  },
  {
    "text": "see how we're working our way towards bare metal but these are the ingredients that you need to maintain all of the",
    "start": "1100640",
    "end": "1107919"
  },
  {
    "text": "goodness that you got when you moved up into the",
    "start": "1107919",
    "end": "1112840"
  },
  {
    "text": "cloud so how does the lasticity work with bare metal uh one thing you if you haven't",
    "start": "1113400",
    "end": "1121360"
  },
  {
    "text": "worked with bare metal uh before or you haven't worked with it in a while um that you you'll notice right away is",
    "start": "1121360",
    "end": "1127360"
  },
  {
    "text": "deploy times uh when you're spinning up full physical machines including powering and back up and on uh it will",
    "start": "1127360",
    "end": "1134400"
  },
  {
    "text": "take about 15 minutes each so uh as far as Min Hut goes in our",
    "start": "1134400",
    "end": "1140000"
  },
  {
    "text": "setup we have different node pools that we use for different workloads inside of",
    "start": "1140000",
    "end": "1145400"
  },
  {
    "text": "inside of the cluster um we've got a obviously the control plane uh a default",
    "start": "1145400",
    "end": "1150760"
  },
  {
    "text": "and proxy node pools and those are for the most part not elastic so they're",
    "start": "1150760",
    "end": "1156440"
  },
  {
    "text": "dedicated they have fixed number of machines that we run and uh that's due",
    "start": "1156440",
    "end": "1162760"
  },
  {
    "text": "to some of the statefulness that we'll talk about in mine Hut on uh the the",
    "start": "1162760",
    "end": "1167919"
  },
  {
    "text": "game side though we do Autos scale that so that's obviously our main workload it's the one that goes you know up and",
    "start": "1167919",
    "end": "1174039"
  },
  {
    "text": "down with Peaks and valleys and we do separate node pools for uh paid servers",
    "start": "1174039",
    "end": "1180480"
  },
  {
    "text": "um people can pay on M Hut to have extra CPU or Ram or basically disc space you",
    "start": "1180480",
    "end": "1186480"
  },
  {
    "text": "know your your basic things um for their server to run to host more um plugins",
    "start": "1186480",
    "end": "1192039"
  },
  {
    "text": "and our people uh so we have a paid paid pool and a free pool the um we use different",
    "start": "1192039",
    "end": "1200640"
  },
  {
    "text": "schedulers for each of them on the paid pool we'll spread the pods evenly across",
    "start": "1200640",
    "end": "1205720"
  },
  {
    "text": "you know it's a the pay pool stays fairly static it doesn't move up and down too much uh as you know the day",
    "start": "1205720",
    "end": "1212760"
  },
  {
    "text": "goes on and so forth most of those servers stay running 24/7 on the free pool though we use uh a",
    "start": "1212760",
    "end": "1219520"
  },
  {
    "text": "method of Bin packing on the scheduler to basically pack them in as tight as",
    "start": "1219520",
    "end": "1224679"
  },
  {
    "text": "possible when um new ones come up uh they'll also get packed onto the",
    "start": "1224679",
    "end": "1231240"
  },
  {
    "text": "highest node and it keeps things you know light on the end so that the basic kubernetes Auto scheduler can uh remove",
    "start": "1231240",
    "end": "1239120"
  },
  {
    "text": "the nodes that are not in use uh as the day goes up and down so one thing to",
    "start": "1239120",
    "end": "1245400"
  },
  {
    "text": "note on how we do free plans is they have a 4-Hour time limit where they'll get shut down for the day um and that",
    "start": "1245400",
    "end": "1253240"
  },
  {
    "text": "allows us to do the bin packing otherwise uh people will keep their Mindcraft server up like months at a",
    "start": "1253240",
    "end": "1260280"
  },
  {
    "text": "time so which would not allow us to do Autos scaling at all for the most part oh interesting so it's two so you're",
    "start": "1260280",
    "end": "1266600"
  },
  {
    "text": "you're what you're doing there is you're leveraging an SLA to be able to allow you to have different operational",
    "start": "1266600",
    "end": "1273120"
  },
  {
    "text": "capabilities as well so yes yeah very",
    "start": "1273120",
    "end": "1277840"
  },
  {
    "text": "cool uh kind of what about all the other stuff um yes there's the game that is running but you know the the game and",
    "start": "1280600",
    "end": "1287720"
  },
  {
    "text": "obviously a service doesn't run by itself uh there's other services we run inside Kates like",
    "start": "1287720",
    "end": "1294279"
  },
  {
    "text": "databases uh messaging observability uh we use utilize operators for that or",
    "start": "1294279",
    "end": "1302640"
  },
  {
    "text": "open source other products like gats we're messaging uh and we try",
    "start": "1302640",
    "end": "1308039"
  },
  {
    "text": "to uh basically run everything we can inside a kubernetes workload and not be dependent on having things outside of",
    "start": "1308039",
    "end": "1316480"
  },
  {
    "text": "it and when it comes comes to storage which is probably something maybe you'll wonder about uh we use we try to keep it",
    "start": "1316480",
    "end": "1323200"
  },
  {
    "text": "really really simple and we use a product called Topo lvm which if you're familiar with Linux lvm is basically an",
    "start": "1323200",
    "end": "1329760"
  },
  {
    "text": "interface into that that utilizes those local discs in a way um that you can",
    "start": "1329760",
    "end": "1336159"
  },
  {
    "text": "basically provision persistent volumes from the kubernetes API and have it all flow",
    "start": "1336159",
    "end": "1341919"
  },
  {
    "text": "through we have uh one thing that we do run in the bare metal environment outside of kubernetes",
    "start": "1341919",
    "end": "1348720"
  },
  {
    "text": "and this is uh minio which used for object storage it is basically when you",
    "start": "1348720",
    "end": "1355039"
  },
  {
    "text": "think of the game World in mine Hut it's a it's a database for the most part it is the state of the world it's what's",
    "start": "1355039",
    "end": "1361640"
  },
  {
    "text": "ever been created in there it's what's going on and we back that up as an object into menio and we keep hot data",
    "start": "1361640",
    "end": "1368840"
  },
  {
    "text": "sitting there in the data center for like the last two or three weeks of servers that have started after that it",
    "start": "1368840",
    "end": "1375440"
  },
  {
    "text": "gets um it gets flushed out we also utilize back blazes in the background to keep like a",
    "start": "1375440",
    "end": "1381480"
  },
  {
    "text": "full uh Archive of every server that's ever been created at minine Hut",
    "start": "1381480",
    "end": "1387760"
  },
  {
    "text": "so uh but we don't just use bare metal so",
    "start": "1387760",
    "end": "1393000"
  },
  {
    "text": "there's a lot of things that we want to utilize that are just simpler in different places uh take for instance",
    "start": "1393000",
    "end": "1399640"
  },
  {
    "text": "like ads iot um we actually farm that back out to AWS and you know we also use",
    "start": "1399640",
    "end": "1407919"
  },
  {
    "text": "utilize some SAS offering offerings for the observability side and to get things",
    "start": "1407919",
    "end": "1413760"
  },
  {
    "text": "that our small team isn't going to be able to manage and continually take care",
    "start": "1413760",
    "end": "1420039"
  },
  {
    "text": "of uh on a bare metal environment so I think at least on our philosophy is we",
    "start": "1420039",
    "end": "1428679"
  },
  {
    "text": "only specialize when we need to per Cloud um because super leag does work where I we're in all the different",
    "start": "1428679",
    "end": "1434400"
  },
  {
    "text": "clouds with different workloads but we select tooling that works across the clouds and we try to go deep on that",
    "start": "1434400",
    "end": "1441039"
  },
  {
    "text": "tooling instead of attempting to use whatever is very specific in that cloud yeah so I the the net net of that",
    "start": "1441039",
    "end": "1449080"
  },
  {
    "text": "is it's hybrid so when you're going to Bare Metal it doesn't mean you have to run every single thing in bare metal it",
    "start": "1449080",
    "end": "1455640"
  },
  {
    "text": "means that you can choose to create kind of a a a varied topology and just to",
    "start": "1455640",
    "end": "1461320"
  },
  {
    "text": "drive home that point that Justin was making is that even when you are running things on your kubernetes cluster",
    "start": "1461320",
    "end": "1467960"
  },
  {
    "text": "whether it's bare metal or anything else there's a whole host of services out there where Helm chards that that are",
    "start": "1467960",
    "end": "1475080"
  },
  {
    "text": "packaged up or other various packaging mechanisms these are just some of the things that we for example in Spector",
    "start": "1475080",
    "end": "1481320"
  },
  {
    "text": "Cloud offer out of the box that you can just either install on your cluster or use to uh configure your cluster so",
    "start": "1481320",
    "end": "1487840"
  },
  {
    "text": "there's lots of kubernetes native Services there as well so we're now at bare metal we've",
    "start": "1487840",
    "end": "1495320"
  },
  {
    "text": "landed on on bare metal we're running on bare metal so what happens with day two",
    "start": "1495320",
    "end": "1502480"
  },
  {
    "text": "so we managed to maintain some of these apis but how do we do the life cycle management and where things get really",
    "start": "1502480",
    "end": "1509720"
  },
  {
    "text": "interesting here is that Justin's hinted at it a few times is that these",
    "start": "1509720",
    "end": "1514840"
  },
  {
    "text": "workloads that are running on some of these node pools hint hint um are",
    "start": "1514840",
    "end": "1521279"
  },
  {
    "text": "stateful and so you can't just do a normal kubernetes upgrade to upgrade",
    "start": "1521279",
    "end": "1527000"
  },
  {
    "text": "those nodes in because if somebody's running and remember he talked about sticky sessions on the Ingress there if",
    "start": "1527000",
    "end": "1533399"
  },
  {
    "text": "somebody's running in the middle of a game and you are cycling that node that's a pretty bad experience so that's",
    "start": "1533399",
    "end": "1539720"
  },
  {
    "text": "what Justin wants to tell you about now is how we actually how he how they've actually implemented that life cycle",
    "start": "1539720",
    "end": "1546640"
  },
  {
    "text": "management of the kubernetes cluster when you have stateful workloads",
    "start": "1546640",
    "end": "1552039"
  },
  {
    "text": "running sure so the the statefulness of mine Hut is is really the three",
    "start": "1552039",
    "end": "1559520"
  },
  {
    "text": "different areas there the velocity proxy game world or game Lobby and it behaves differently depending on uh which one",
    "start": "1559520",
    "end": "1566720"
  },
  {
    "text": "you were to you know for instance kill uh when it comes to um I guess",
    "start": "1566720",
    "end": "1574399"
  },
  {
    "text": "taking a step back though the main thing that we're trying to prevent is player disruption so",
    "start": "1574399",
    "end": "1580120"
  },
  {
    "text": "we if you all play video games then you don't like it to just drop off the server and uh lose your progress or lose",
    "start": "1580120",
    "end": "1586679"
  },
  {
    "text": "whatever is going on so that's uh a big thing we try to take into account uh for",
    "start": "1586679",
    "end": "1592559"
  },
  {
    "text": "the game lobbies it's not so much of a big deal um you know there's it's not your world where you're building things",
    "start": "1592559",
    "end": "1598880"
  },
  {
    "text": "necessarily and you're able to just uh actually not get fully disconnected from",
    "start": "1598880",
    "end": "1605039"
  },
  {
    "text": "this service you'll you'll get switched to another Lobby if one were to break down so we we intercept and redirect you",
    "start": "1605039",
    "end": "1611720"
  },
  {
    "text": "on the game World side uh obviously you don't want to be disconnected but if you are you will get switch back and put",
    "start": "1611720",
    "end": "1618320"
  },
  {
    "text": "into the lobby where for whatever reason why your game went down uh you can restart it back",
    "start": "1618320",
    "end": "1624039"
  },
  {
    "text": "up and the only real sticking point is on the velocity proxies so Minecraft",
    "start": "1624039",
    "end": "1631440"
  },
  {
    "text": "does not behave like a web service or your browser or something where you're just hitting some service it it's not",
    "start": "1631440",
    "end": "1637360"
  },
  {
    "text": "going to retry for you you're going to just get dropped and disconnected and you're going to have to load back in the",
    "start": "1637360",
    "end": "1642960"
  },
  {
    "text": "client if that proxy goes down so uh which which is uh unfortunate the way",
    "start": "1642960",
    "end": "1649760"
  },
  {
    "text": "that it works um but it it is how it works and uh",
    "start": "1649760",
    "end": "1655200"
  },
  {
    "text": "that's something that we have to deal with",
    "start": "1655200",
    "end": "1658760"
  },
  {
    "text": "so so how do we do upgrades when we have all these kind of stateful databases of",
    "start": "1661240",
    "end": "1669080"
  },
  {
    "text": "the Minecraft world running well we uh we utilize some",
    "start": "1669080",
    "end": "1675080"
  },
  {
    "text": "special um Flags inside of Cappy to tell it to pause all the game pools",
    "start": "1675080",
    "end": "1680760"
  },
  {
    "text": "that are out there as well as the uh proxy pools so we can do this um we can",
    "start": "1680760",
    "end": "1688360"
  },
  {
    "text": "do these steps weeks in advance from doing the actual downtime so what we'll do we'll pause them we'll update the",
    "start": "1688360",
    "end": "1695720"
  },
  {
    "text": "cluster spec to say you know go to the next kubernetes version we'll let the",
    "start": "1695720",
    "end": "1701320"
  },
  {
    "text": "control plane the default pools um you know even the pools running databases we",
    "start": "1701320",
    "end": "1706919"
  },
  {
    "text": "just let them run through and they cycle in and out no problem and how long does that usually",
    "start": "1706919",
    "end": "1712679"
  },
  {
    "text": "take um it can take it can take a while so remember this is bare metal so when",
    "start": "1712679",
    "end": "1718480"
  },
  {
    "text": "you're cycling the machine out it's at least 15 20 maybe even 30 minutes for a new machine to come up and then drop one",
    "start": "1718480",
    "end": "1724919"
  },
  {
    "text": "out ah so so that you were saying that you could do it weeks in advance you are sometimes starting an upgrade process",
    "start": "1724919",
    "end": "1731720"
  },
  {
    "text": "several days before you hit a maintenance window yes ah interesting Okay so",
    "start": "1731720",
    "end": "1738200"
  },
  {
    "text": "and then we'll take uh a full downtime maintenance this is where we will you",
    "start": "1738200",
    "end": "1743320"
  },
  {
    "text": "know tell the community we're going to shut down for a few hours uh we'll safely drain all of their",
    "start": "1743320",
    "end": "1748600"
  },
  {
    "text": "game worlds off saves them back over to menio and and also back up into back",
    "start": "1748600",
    "end": "1753640"
  },
  {
    "text": "blaz uh and then we will do what is basically a mass delete",
    "start": "1753640",
    "end": "1759919"
  },
  {
    "text": "of all the machines uh for the game and the proxy pools we'll uh we'll Cappy",
    "start": "1759919",
    "end": "1765840"
  },
  {
    "text": "delete them uh inside of cppy so basically cppy",
    "start": "1765840",
    "end": "1770880"
  },
  {
    "text": "delete machine everything in that pool and then we'll tell Cappy to unpause and",
    "start": "1770880",
    "end": "1778240"
  },
  {
    "text": "Cappy will just bring them all back up at once and so this is like the best way",
    "start": "1778240",
    "end": "1784360"
  },
  {
    "text": "to minimize downtime for us and and the current way we do things uh and it takes",
    "start": "1784360",
    "end": "1790320"
  },
  {
    "text": "we take a two-hour maintenance window but usually we can get done fairly quickly this way like within an hour so",
    "start": "1790320",
    "end": "1797399"
  },
  {
    "text": "that is super cool so what I want to do is I want to show you a little bit more about Cappy because most of you said",
    "start": "1797399",
    "end": "1802840"
  },
  {
    "text": "that you aren't familiar with cluster API I mentioned this so what you can see here is that you can SP each one of",
    "start": "1802840",
    "end": "1808760"
  },
  {
    "text": "those boxes are resources just like a deployment is a resource just like a pod",
    "start": "1808760",
    "end": "1813960"
  },
  {
    "text": "as a resource just like a replica set as a resource so these are the resources that exist in the cluster API so you've",
    "start": "1813960",
    "end": "1820919"
  },
  {
    "text": "got a cluster and then that cluster is broken down into on the top side you see",
    "start": "1820919",
    "end": "1826120"
  },
  {
    "text": "the control plane nodes and the machines that make up those control plane nodes",
    "start": "1826120",
    "end": "1831159"
  },
  {
    "text": "and on the Lower Side you see the worker pools and that's where Justin was talking about there's many different",
    "start": "1831159",
    "end": "1837000"
  },
  {
    "text": "worker pools some of those worker pools are hosting things that can be cycled before the maintenance window no problem",
    "start": "1837000",
    "end": "1844559"
  },
  {
    "text": "and some of those worker pools need to be held until the maintenance window happens so you can see down here under",
    "start": "1844559",
    "end": "1852039"
  },
  {
    "text": "machine deployment there's a couple of properties there that those are the properties that Justin is leveraging so",
    "start": "1852039",
    "end": "1858720"
  },
  {
    "text": "he's going in and he's changing a value in the machine deployment to say paused",
    "start": "1858720",
    "end": "1863799"
  },
  {
    "text": "only for those pools that have the game worlds running on them and the proxies",
    "start": "1863799",
    "end": "1869200"
  },
  {
    "text": "then he's also using Cappy to change the the counts so he's deleting all of the",
    "start": "1869200",
    "end": "1875000"
  },
  {
    "text": "nodes and then he brings C uh he unpauses so he changes that value back",
    "start": "1875000",
    "end": "1881399"
  },
  {
    "text": "to it's not paused and then let's Cappy do the rest of the work so he's",
    "start": "1881399",
    "end": "1886840"
  },
  {
    "text": "literally Lally just changing attributes on resources the same way that you do",
    "start": "1886840",
    "end": "1892240"
  },
  {
    "text": "with your workloads and that's pretty damn cool cluster API is pretty",
    "start": "1892240",
    "end": "1897919"
  },
  {
    "text": "awesome what about emergency maintenance so you know there's OS security issues",
    "start": "1897919",
    "end": "1903440"
  },
  {
    "text": "some kubernetes issues occasionally that you want to get out there right away uh this is bare metal and the functions a",
    "start": "1903440",
    "end": "1910840"
  },
  {
    "text": "little differently than your VMS and AWS so there is uh occasionally things just",
    "start": "1910840",
    "end": "1916080"
  },
  {
    "text": "wrong with the Mach machines um a little bit more so than you get in in on just running on VMS so we use uh a couple",
    "start": "1916080",
    "end": "1924639"
  },
  {
    "text": "open source projects called node problem detector uh to kind of look at those",
    "start": "1924639",
    "end": "1929840"
  },
  {
    "text": "real low-level items that could be not working quite the way that they",
    "start": "1929840",
    "end": "1937480"
  },
  {
    "text": "should and we also use another project called um well kurd the kubernetes",
    "start": "1937480",
    "end": "1943600"
  },
  {
    "text": "reboot Damon and that's sitting there uh basically we run a boonu underneath and",
    "start": "1943600",
    "end": "1949440"
  },
  {
    "text": "is sitting there basically looking for the VAR lib reboot required uh file",
    "start": "1949440",
    "end": "1954880"
  },
  {
    "text": "which means that um unattended upgrades found something in in a security issue that needed to be upgraded and couldn't",
    "start": "1954880",
    "end": "1962120"
  },
  {
    "text": "do it is not able to upgrade without you know rebooting a server so we uh obviously that wouldn't work",
    "start": "1962120",
    "end": "1970679"
  },
  {
    "text": "for the stateful workloads we wouldn't want them to go down um unless uh it was serious enough security",
    "start": "1970679",
    "end": "1978320"
  },
  {
    "text": "issue that we wanted to do that so uh we will allow kurd and NPD to run on",
    "start": "1978320",
    "end": "1986440"
  },
  {
    "text": "like default and other node pools uh that and allow them to reboot as needed",
    "start": "1986440",
    "end": "1992240"
  },
  {
    "text": "and make sure that only one is rebooting at a time and we'll do a special release",
    "start": "1992240",
    "end": "1997760"
  },
  {
    "text": "if we need to if we want to have game nodes and everything else do that so we",
    "start": "1997760",
    "end": "2003399"
  },
  {
    "text": "do have an emergency way for the uh game nodes and pods to come down and",
    "start": "2003399",
    "end": "2011720"
  },
  {
    "text": "that the way we do that is we extend the uh termination grace period seconds to make it quite long and we intercept the",
    "start": "2011720",
    "end": "2019840"
  },
  {
    "text": "term and do a game save and it saves out to the minio cluster so it's it is",
    "start": "2019840",
    "end": "2026880"
  },
  {
    "text": "fairly safe for us to do it it does cause player disruption so we don't do it unless required but that is how we",
    "start": "2026880",
    "end": "2032960"
  },
  {
    "text": "basically do emergency maintenance on these excellent all right so we've only got a couple of minutes left so why",
    "start": "2032960",
    "end": "2039440"
  },
  {
    "text": "don't you tell us a little bit about the results that you got and maybe real quick what you're planning on in the future sure uh we got 65% cost reduction",
    "start": "2039440",
    "end": "2048800"
  },
  {
    "text": "so so that is pretty pretty awesome uh the machines um you know 55 to 66%",
    "start": "2048800",
    "end": "2055599"
  },
  {
    "text": "depending on the config that we're using for those uh network is 90 to 100 so you're probably like a 100 that doesn't",
    "start": "2055599",
    "end": "2061878"
  },
  {
    "text": "sound right but some of these bare metal providers will give you the network for free and the machine price so you're not",
    "start": "2061879",
    "end": "2067599"
  },
  {
    "text": "even paying for any egress out of their systems so another thing was a bonus we",
    "start": "2067599",
    "end": "2072878"
  },
  {
    "text": "got 15% better performance on the uh uh over VMS we didn't have to add any",
    "start": "2072879",
    "end": "2080358"
  },
  {
    "text": "new people to the team to manage all of this uh the only downside is some of these Services aren't stressed as much",
    "start": "2080359",
    "end": "2085878"
  },
  {
    "text": "so you'll hit some interesting things and you'll need to work with them on and the like the boot times infrastructure",
    "start": "2085879",
    "end": "2091800"
  },
  {
    "text": "iteration takes longer cool and what's next uh we recently went",
    "start": "2091800",
    "end": "2098119"
  },
  {
    "text": "to Cox Edge we love bare metal so much we were currently current previously in equinix metal and uh we went we're",
    "start": "2098119",
    "end": "2105880"
  },
  {
    "text": "working on doing hybrid multi- Region Game worlds splitting up the traffic uh globally and uh making the automation",
    "start": "2105880",
    "end": "2113160"
  },
  {
    "text": "for katees a little bit better so with that we have like one",
    "start": "2113160",
    "end": "2118880"
  },
  {
    "text": "minute left for questions the other thing that I'll tell you is the QR code there will take you to where the slides",
    "start": "2118880",
    "end": "2124040"
  },
  {
    "text": "are so if you didn't get a chance to snap all the um in that that's taking you to the",
    "start": "2124040",
    "end": "2129760"
  },
  {
    "text": "schedule and then spectral cloud has a booth on the show floor we're at Booth 014 so please stop by if you have um",
    "start": "2129760",
    "end": "2137560"
  },
  {
    "text": "Justin's going to be there part of the time I'll be there part of the time lots of my colleagues are experts on Cappy so",
    "start": "2137560",
    "end": "2143800"
  },
  {
    "text": "if you want to come learn a little bit more about Cappy we uh can answer those questions as well so we literally have",
    "start": "2143800",
    "end": "2149720"
  },
  {
    "text": "just a few seconds left for questions is there a question I see one right here in the front and then I'll go to you and I",
    "start": "2149720",
    "end": "2155119"
  },
  {
    "text": "think we can take those two questions yeah and there's a mic there if you that way we can have it recorded So for uh",
    "start": "2155119",
    "end": "2162359"
  },
  {
    "text": "any of your sort of disruptive operations whether you're doing upgrades or like some of your bin packing do you",
    "start": "2162359",
    "end": "2167839"
  },
  {
    "text": "ever do any sort of like simulation or data analysis to make sure that things are going to go okay before you do the",
    "start": "2167839",
    "end": "2174280"
  },
  {
    "text": "real thing uh no the answer is no and we have one more question here um",
    "start": "2174280",
    "end": "2182440"
  },
  {
    "text": "if you can say that in the mic that would be helpful I mean I I I it's great to see the number of savings that you",
    "start": "2182440",
    "end": "2188359"
  },
  {
    "text": "mention in terms of machines and the network but when it comes to kubernetes",
    "start": "2188359",
    "end": "2193720"
  },
  {
    "text": "schedule and an Autos scaler how did you find that gold act to to make those",
    "start": "2193720",
    "end": "2198920"
  },
  {
    "text": "savings based on your workloads right how did you figure that out how did you figure out I didn't catch I didn't catch",
    "start": "2198920",
    "end": "2205640"
  },
  {
    "text": "that the bare metal infrastructure for the workloads to get that gold maybe we it's",
    "start": "2205640",
    "end": "2212079"
  },
  {
    "text": "kind of hard to hear so maybe we can just if you can just come up and and we can take that offline yeah thanks",
    "start": "2212079",
    "end": "2217400"
  },
  {
    "text": "everyone for coming really appreciate it hey",
    "start": "2217400",
    "end": "2224559"
  }
]