[
  {
    "start": "0",
    "end": "91000"
  },
  {
    "text": "hi",
    "start": "2800",
    "end": "4319"
  },
  {
    "text": "my name is nick this talk is called in",
    "start": "4319",
    "end": "7279"
  },
  {
    "text": "search of a cube cuddle blend command",
    "start": "7279",
    "end": "10719"
  },
  {
    "text": "no there's no cube cuddle blame command",
    "start": "10719",
    "end": "13120"
  },
  {
    "text": "right now",
    "start": "13120",
    "end": "14559"
  },
  {
    "text": "this talk is about why there should be",
    "start": "14559",
    "end": "16640"
  },
  {
    "text": "one",
    "start": "16640",
    "end": "17840"
  },
  {
    "text": "what it would do why it's hard to build",
    "start": "17840",
    "end": "20880"
  },
  {
    "text": "and why you should care about it",
    "start": "20880",
    "end": "24240"
  },
  {
    "text": "let me start with why i care about it",
    "start": "24240",
    "end": "28400"
  },
  {
    "text": "i work on tiltdown we want to make",
    "start": "28400",
    "end": "31279"
  },
  {
    "text": "developing on kubernetes a pleasant",
    "start": "31279",
    "end": "33200"
  },
  {
    "text": "experience",
    "start": "33200",
    "end": "35040"
  },
  {
    "text": "you edit your source code tilt updates",
    "start": "35040",
    "end": "37520"
  },
  {
    "text": "your cluster",
    "start": "37520",
    "end": "38960"
  },
  {
    "text": "we wanted you to help you understand the",
    "start": "38960",
    "end": "41680"
  },
  {
    "text": "progress it's making and how that change",
    "start": "41680",
    "end": "43440"
  },
  {
    "text": "is affecting your app",
    "start": "43440",
    "end": "45760"
  },
  {
    "text": "lots of tools have this problem and they",
    "start": "45760",
    "end": "48559"
  },
  {
    "text": "all solve it in a different way",
    "start": "48559",
    "end": "52079"
  },
  {
    "text": "what does this mean exactly let me give",
    "start": "52480",
    "end": "55280"
  },
  {
    "text": "you an example",
    "start": "55280",
    "end": "57280"
  },
  {
    "text": "you apply a deployment you want to check",
    "start": "57280",
    "end": "59840"
  },
  {
    "text": "if it worked",
    "start": "59840",
    "end": "61280"
  },
  {
    "text": "one approach to a cube cuddle blind",
    "start": "61280",
    "end": "63280"
  },
  {
    "text": "command would trace",
    "start": "63280",
    "end": "64960"
  },
  {
    "text": "each cause to its effect and tell you",
    "start": "64960",
    "end": "67840"
  },
  {
    "text": "how far along the deployment is",
    "start": "67840",
    "end": "72240"
  },
  {
    "text": "developers often want this tracking in",
    "start": "72240",
    "end": "75360"
  },
  {
    "text": "the reverse direction as well",
    "start": "75360",
    "end": "78000"
  },
  {
    "text": "you know a pod is crashing is that pod",
    "start": "78000",
    "end": "80479"
  },
  {
    "text": "from the deployment you just created",
    "start": "80479",
    "end": "83040"
  },
  {
    "text": "or is it from an older revision of that",
    "start": "83040",
    "end": "85200"
  },
  {
    "text": "deployment",
    "start": "85200",
    "end": "86720"
  },
  {
    "text": "where did the different containers and",
    "start": "86720",
    "end": "88159"
  },
  {
    "text": "sidecars of the pod come from",
    "start": "88159",
    "end": "91758"
  },
  {
    "start": "91000",
    "end": "91000"
  },
  {
    "text": "when we tilt team started down this path",
    "start": "92079",
    "end": "95840"
  },
  {
    "text": "we thought this would be easy it turned",
    "start": "95840",
    "end": "98400"
  },
  {
    "text": "out not to be so easy",
    "start": "98400",
    "end": "100479"
  },
  {
    "text": "we tried a lot of approaches many of",
    "start": "100479",
    "end": "103040"
  },
  {
    "text": "them failed",
    "start": "103040",
    "end": "104159"
  },
  {
    "text": "it was pretty frustrating i don't want",
    "start": "104159",
    "end": "107200"
  },
  {
    "text": "to put you through that",
    "start": "107200",
    "end": "109520"
  },
  {
    "text": "i want to explain the problem to you in",
    "start": "109520",
    "end": "111920"
  },
  {
    "text": "the way that i wish someone had",
    "start": "111920",
    "end": "113600"
  },
  {
    "text": "explained",
    "start": "113600",
    "end": "114079"
  },
  {
    "text": "the problem to us because this problem",
    "start": "114079",
    "end": "117280"
  },
  {
    "text": "has",
    "start": "117280",
    "end": "117680"
  },
  {
    "text": "old theoretical roots we're going to",
    "start": "117680",
    "end": "120560"
  },
  {
    "text": "talk about",
    "start": "120560",
    "end": "121200"
  },
  {
    "text": "those roots we're going to take a tour",
    "start": "121200",
    "end": "123600"
  },
  {
    "text": "of some of the tools that try to solve",
    "start": "123600",
    "end": "125439"
  },
  {
    "text": "this problem",
    "start": "125439",
    "end": "126479"
  },
  {
    "text": "and how they solve it and i'm going to",
    "start": "126479",
    "end": "129520"
  },
  {
    "text": "talk about",
    "start": "129520",
    "end": "130160"
  },
  {
    "text": "some ways future dev tools might make",
    "start": "130160",
    "end": "132160"
  },
  {
    "text": "this easier",
    "start": "132160",
    "end": "133360"
  },
  {
    "text": "if anyone here works on kubernetes",
    "start": "133360",
    "end": "137680"
  },
  {
    "start": "137000",
    "end": "137000"
  },
  {
    "text": "now i don't want this to be just a talk",
    "start": "138319",
    "end": "141920"
  },
  {
    "text": "about",
    "start": "141920",
    "end": "143280"
  },
  {
    "text": "how to write tube cuddle blame if i",
    "start": "143280",
    "end": "146319"
  },
  {
    "text": "wanted cube cuddle blame i",
    "start": "146319",
    "end": "147920"
  },
  {
    "text": "wouldn't have given this talk i would",
    "start": "147920",
    "end": "149520"
  },
  {
    "text": "have used that time to build my own",
    "start": "149520",
    "end": "152160"
  },
  {
    "text": "cube cuddle plugin",
    "start": "152160",
    "end": "155200"
  },
  {
    "text": "i'm more interested in the abstract",
    "start": "155519",
    "end": "157599"
  },
  {
    "text": "problem",
    "start": "157599",
    "end": "158640"
  },
  {
    "text": "and its history because if you",
    "start": "158640",
    "end": "160720"
  },
  {
    "text": "understand the history",
    "start": "160720",
    "end": "162080"
  },
  {
    "text": "you can make sense of the different",
    "start": "162080",
    "end": "163519"
  },
  {
    "text": "approaches you can reach for",
    "start": "163519",
    "end": "166480"
  },
  {
    "text": "non-kubernetes tools even non-computers",
    "start": "166480",
    "end": "169760"
  },
  {
    "text": "for inspiration on solutions and we",
    "start": "169760",
    "end": "172400"
  },
  {
    "text": "might to see",
    "start": "172400",
    "end": "173200"
  },
  {
    "text": "better kubernetes debugging tools in the",
    "start": "173200",
    "end": "175840"
  },
  {
    "text": "future",
    "start": "175840",
    "end": "178239"
  },
  {
    "text": "so let's talk about why this is hard",
    "start": "178560",
    "end": "183440"
  },
  {
    "start": "182000",
    "end": "182000"
  },
  {
    "text": "the fundamental kubernetes architecture",
    "start": "183519",
    "end": "186000"
  },
  {
    "text": "is a control loop",
    "start": "186000",
    "end": "187840"
  },
  {
    "text": "the system runs in a loop you declare a",
    "start": "187840",
    "end": "191040"
  },
  {
    "text": "desired state",
    "start": "191040",
    "end": "193200"
  },
  {
    "text": "what the loop does next is a function of",
    "start": "193200",
    "end": "195680"
  },
  {
    "text": "the diff",
    "start": "195680",
    "end": "196239"
  },
  {
    "text": "between the desired state and the",
    "start": "196239",
    "end": "198720"
  },
  {
    "text": "current state",
    "start": "198720",
    "end": "201360"
  },
  {
    "text": "i tried to describe kubernetes to a",
    "start": "201920",
    "end": "203920"
  },
  {
    "text": "friend she",
    "start": "203920",
    "end": "205680"
  },
  {
    "text": "researches history of science she says",
    "start": "205680",
    "end": "209040"
  },
  {
    "text": "oh nick",
    "start": "209040",
    "end": "209680"
  },
  {
    "text": "i i know what you're talking about we've",
    "start": "209680",
    "end": "212000"
  },
  {
    "text": "been talking about that for decades",
    "start": "212000",
    "end": "213920"
  },
  {
    "text": "let me send you a paper she sent me this",
    "start": "213920",
    "end": "217280"
  },
  {
    "text": "paper",
    "start": "217280",
    "end": "218080"
  },
  {
    "text": "uh origins of feedback control by auto",
    "start": "218080",
    "end": "220640"
  },
  {
    "text": "mare",
    "start": "220640",
    "end": "221920"
  },
  {
    "text": "great paper old control loop papers",
    "start": "221920",
    "end": "224959"
  },
  {
    "text": "typically have a ton of calculus because",
    "start": "224959",
    "end": "226959"
  },
  {
    "text": "they're really about functions on",
    "start": "226959",
    "end": "228480"
  },
  {
    "text": "differences",
    "start": "228480",
    "end": "229840"
  },
  {
    "text": "this paper is about history it's tons of",
    "start": "229840",
    "end": "232319"
  },
  {
    "text": "fun very readable",
    "start": "232319",
    "end": "233760"
  },
  {
    "text": "not much math you probably don't",
    "start": "233760",
    "end": "237120"
  },
  {
    "text": "interact with water clocks and windmills",
    "start": "237120",
    "end": "239360"
  },
  {
    "text": "day to day",
    "start": "239360",
    "end": "241040"
  },
  {
    "text": "but you do probably interact with",
    "start": "241040",
    "end": "242640"
  },
  {
    "text": "thermostats and they have this property",
    "start": "242640",
    "end": "244879"
  },
  {
    "text": "that demonstrates the cyclic",
    "start": "244879",
    "end": "246319"
  },
  {
    "text": "relationship",
    "start": "246319",
    "end": "247120"
  },
  {
    "text": "between cause and effect that we're",
    "start": "247120",
    "end": "248640"
  },
  {
    "text": "describing",
    "start": "248640",
    "end": "250319"
  },
  {
    "text": "let's say the current temperature is 60",
    "start": "250319",
    "end": "252159"
  },
  {
    "text": "degrees fahrenheit you turn the",
    "start": "252159",
    "end": "254480"
  },
  {
    "text": "thermostat to 70 degrees fahrenheit",
    "start": "254480",
    "end": "257440"
  },
  {
    "text": "you wait a bit then turn it to 90",
    "start": "257440",
    "end": "260079"
  },
  {
    "text": "degrees fahrenheit",
    "start": "260079",
    "end": "261840"
  },
  {
    "text": "the heat is on did the first setting",
    "start": "261840",
    "end": "264320"
  },
  {
    "text": "make the heat turn on",
    "start": "264320",
    "end": "266000"
  },
  {
    "text": "or did the second setting make it turn",
    "start": "266000",
    "end": "267919"
  },
  {
    "text": "on",
    "start": "267919",
    "end": "269040"
  },
  {
    "text": "what does it even mean for one change to",
    "start": "269040",
    "end": "271360"
  },
  {
    "text": "cause the heat to turn on",
    "start": "271360",
    "end": "274719"
  },
  {
    "start": "274000",
    "end": "274000"
  },
  {
    "text": "the other important part of a control",
    "start": "274960",
    "end": "276560"
  },
  {
    "text": "loop is that it's",
    "start": "276560",
    "end": "278080"
  },
  {
    "text": "a declarative system it inherits a lot",
    "start": "278080",
    "end": "281120"
  },
  {
    "text": "of the same problems as",
    "start": "281120",
    "end": "282720"
  },
  {
    "text": "other declarative systems you might be",
    "start": "282720",
    "end": "285120"
  },
  {
    "text": "familiar with",
    "start": "285120",
    "end": "286880"
  },
  {
    "text": "uh css is pretty widespread you may be",
    "start": "286880",
    "end": "290320"
  },
  {
    "text": "scared of",
    "start": "290320",
    "end": "291199"
  },
  {
    "text": "css i was a ui engineer for many years",
    "start": "291199",
    "end": "295360"
  },
  {
    "text": "and i think css is great i think it is",
    "start": "295360",
    "end": "297759"
  },
  {
    "text": "one of the great declarative programming",
    "start": "297759",
    "end": "299680"
  },
  {
    "text": "languages",
    "start": "299680",
    "end": "300479"
  },
  {
    "text": "of all time uh when you look at the",
    "start": "300479",
    "end": "303840"
  },
  {
    "text": "initial",
    "start": "303840",
    "end": "304400"
  },
  {
    "text": "css proposal the inventories of css",
    "start": "304400",
    "end": "307840"
  },
  {
    "text": "noted that hey it has this nice property",
    "start": "307840",
    "end": "310880"
  },
  {
    "text": "it makes",
    "start": "310880",
    "end": "311440"
  },
  {
    "text": "styles very pluggable it gives you a lot",
    "start": "311440",
    "end": "314240"
  },
  {
    "text": "of room to change the implementation",
    "start": "314240",
    "end": "316160"
  },
  {
    "text": "and for different contributors to",
    "start": "316160",
    "end": "317759"
  },
  {
    "text": "contribute to the style and",
    "start": "317759",
    "end": "319600"
  },
  {
    "text": "to optimize the implementation later",
    "start": "319600",
    "end": "323520"
  },
  {
    "text": "the trade-off is is that css like other",
    "start": "323600",
    "end": "326560"
  },
  {
    "text": "declarative systems can be very hard to",
    "start": "326560",
    "end": "328479"
  },
  {
    "text": "debug",
    "start": "328479",
    "end": "329280"
  },
  {
    "text": "unless you have a good mental model",
    "start": "329280",
    "end": "330880"
  },
  {
    "text": "about what the underlying system is",
    "start": "330880",
    "end": "332800"
  },
  {
    "text": "doing",
    "start": "332800",
    "end": "334080"
  },
  {
    "text": "i remember an old story from the gmail",
    "start": "334080",
    "end": "336560"
  },
  {
    "text": "ui team where",
    "start": "336560",
    "end": "338320"
  },
  {
    "text": "someone added a bad selector that looked",
    "start": "338320",
    "end": "340320"
  },
  {
    "text": "innocent",
    "start": "340320",
    "end": "341759"
  },
  {
    "text": "and that selector killed the performance",
    "start": "341759",
    "end": "343840"
  },
  {
    "text": "of the entire page",
    "start": "343840",
    "end": "345440"
  },
  {
    "text": "it took them weeks to figure out why",
    "start": "345440",
    "end": "348400"
  },
  {
    "text": "even to figure out which selector caused",
    "start": "348400",
    "end": "350400"
  },
  {
    "text": "the problem",
    "start": "350400",
    "end": "352880"
  },
  {
    "text": "modern css debuggers have come a long",
    "start": "352880",
    "end": "355120"
  },
  {
    "text": "way displaying calls and effect",
    "start": "355120",
    "end": "357280"
  },
  {
    "text": "you can see the order the rules are",
    "start": "357280",
    "end": "358639"
  },
  {
    "text": "applied in and where they're declared",
    "start": "358639",
    "end": "360240"
  },
  {
    "text": "you can see",
    "start": "360240",
    "end": "361039"
  },
  {
    "text": "rules cancelling each other out and you",
    "start": "361039",
    "end": "363440"
  },
  {
    "text": "can edit them in place",
    "start": "363440",
    "end": "365680"
  },
  {
    "text": "this is frankly what we should aspire to",
    "start": "365680",
    "end": "368479"
  },
  {
    "text": "in",
    "start": "368479",
    "end": "368720"
  },
  {
    "text": "kubernetes land but",
    "start": "368720",
    "end": "372080"
  },
  {
    "text": "now we're going to take a look at what",
    "start": "372080",
    "end": "374400"
  },
  {
    "text": "exists today",
    "start": "374400",
    "end": "375520"
  },
  {
    "text": "in the kubernetes ecosystem",
    "start": "375520",
    "end": "378800"
  },
  {
    "start": "378000",
    "end": "378000"
  },
  {
    "text": "the sample app we're going to look at is",
    "start": "378800",
    "end": "380960"
  },
  {
    "text": "a stripped-down version of tilt",
    "start": "380960",
    "end": "384000"
  },
  {
    "text": "we build and push an image we apply a",
    "start": "384000",
    "end": "387280"
  },
  {
    "text": "deployment",
    "start": "387280",
    "end": "388560"
  },
  {
    "text": "we track the deployment's progress and",
    "start": "388560",
    "end": "390479"
  },
  {
    "text": "wait for the first pod to become ready",
    "start": "390479",
    "end": "393520"
  },
  {
    "text": "quick review of the life cycle of a",
    "start": "393520",
    "end": "395840"
  },
  {
    "text": "deployment so you understand what's",
    "start": "395840",
    "end": "397600"
  },
  {
    "text": "going on in these examples",
    "start": "397600",
    "end": "399759"
  },
  {
    "text": "a deployment creates a replica set and",
    "start": "399759",
    "end": "402639"
  },
  {
    "text": "the replica set",
    "start": "402639",
    "end": "403600"
  },
  {
    "text": "creates a pod then the pod is the bit",
    "start": "403600",
    "end": "407199"
  },
  {
    "text": "that runs your containers that runs your",
    "start": "407199",
    "end": "409120"
  },
  {
    "text": "code",
    "start": "409120",
    "end": "411440"
  },
  {
    "text": "we're going to look at how these tools",
    "start": "412319",
    "end": "414240"
  },
  {
    "text": "differ the pros and cons",
    "start": "414240",
    "end": "416319"
  },
  {
    "text": "and where they fall down if you want to",
    "start": "416319",
    "end": "419120"
  },
  {
    "text": "follow along there's a repo",
    "start": "419120",
    "end": "420720"
  },
  {
    "text": "where you can run these examples it's at",
    "start": "420720",
    "end": "423199"
  },
  {
    "text": "the bottom of your screen there",
    "start": "423199",
    "end": "426000"
  },
  {
    "text": "the first example i'm going to show you",
    "start": "426000",
    "end": "428240"
  },
  {
    "text": "is what the tilt team did",
    "start": "428240",
    "end": "429919"
  },
  {
    "text": "first again we thought this would be",
    "start": "429919",
    "end": "433680"
  },
  {
    "text": "easy",
    "start": "433680",
    "end": "435680"
  },
  {
    "text": "deployment would get a label for example",
    "start": "435680",
    "end": "438720"
  },
  {
    "text": "we might apply the label deployed at 10",
    "start": "438720",
    "end": "441199"
  },
  {
    "text": "am",
    "start": "441199",
    "end": "441759"
  },
  {
    "text": "january 10th if you see a pod with that",
    "start": "441759",
    "end": "445280"
  },
  {
    "text": "label",
    "start": "445280",
    "end": "446000"
  },
  {
    "text": "you know it belongs to this deployment",
    "start": "446000",
    "end": "450880"
  },
  {
    "text": "here's what the code look like",
    "start": "450880",
    "end": "454240"
  },
  {
    "text": "this is the kubernetes go client library",
    "start": "454240",
    "end": "457120"
  },
  {
    "text": "client go",
    "start": "457120",
    "end": "458000"
  },
  {
    "text": "a client go gives you an object called",
    "start": "458000",
    "end": "460960"
  },
  {
    "text": "an informer",
    "start": "460960",
    "end": "462319"
  },
  {
    "text": "an informer handles watching for",
    "start": "462319",
    "end": "464080"
  },
  {
    "text": "kubernetes objects",
    "start": "464080",
    "end": "465599"
  },
  {
    "text": "retrying when there's an error and",
    "start": "465599",
    "end": "467680"
  },
  {
    "text": "notifying your code about every change",
    "start": "467680",
    "end": "470879"
  },
  {
    "text": "we can configure it to only watch pods",
    "start": "470879",
    "end": "473680"
  },
  {
    "text": "with the label we care about",
    "start": "473680",
    "end": "475280"
  },
  {
    "text": "which is what you see in bold here",
    "start": "475280",
    "end": "479840"
  },
  {
    "text": "let's watch what this looks like this is",
    "start": "480000",
    "end": "482240"
  },
  {
    "text": "an ascii cinema",
    "start": "482240",
    "end": "484160"
  },
  {
    "text": "video of the tool running our code is",
    "start": "484160",
    "end": "486879"
  },
  {
    "text": "going to print an update every time the",
    "start": "486879",
    "end": "488639"
  },
  {
    "text": "pod status changes",
    "start": "488639",
    "end": "492479"
  },
  {
    "text": "and we see the deployment was a success",
    "start": "492479",
    "end": "496560"
  },
  {
    "start": "496000",
    "end": "496000"
  },
  {
    "text": "all of our examples have a crash flag",
    "start": "496720",
    "end": "499199"
  },
  {
    "text": "that lets us see how it behaves",
    "start": "499199",
    "end": "501199"
  },
  {
    "text": "when the pod crashes dash dash crash",
    "start": "501199",
    "end": "504400"
  },
  {
    "text": "so we can watch this deployment come out",
    "start": "504400",
    "end": "506879"
  },
  {
    "text": "and eventually we're going to see it hit",
    "start": "506879",
    "end": "508400"
  },
  {
    "text": "an error",
    "start": "508400",
    "end": "510800"
  },
  {
    "text": "great perfect we saw it so at this point",
    "start": "511759",
    "end": "515599"
  },
  {
    "text": "we thought we had solved the problem we",
    "start": "515599",
    "end": "517039"
  },
  {
    "text": "were pretty happy",
    "start": "517039",
    "end": "518959"
  },
  {
    "text": "now this is very efficient it only",
    "start": "518959",
    "end": "521599"
  },
  {
    "text": "watches the pods that matter",
    "start": "521599",
    "end": "523839"
  },
  {
    "text": "we need to inject labels but that's okay",
    "start": "523839",
    "end": "526000"
  },
  {
    "text": "we can do that for the kind of tool",
    "start": "526000",
    "end": "527680"
  },
  {
    "text": "we're building",
    "start": "527680",
    "end": "529680"
  },
  {
    "text": "then we launched it and everybody hated",
    "start": "529680",
    "end": "532480"
  },
  {
    "text": "this",
    "start": "532480",
    "end": "532880"
  },
  {
    "text": "and they complained all the time",
    "start": "532880",
    "end": "536720"
  },
  {
    "text": "because we had made a mistake we assumed",
    "start": "536720",
    "end": "540480"
  },
  {
    "text": "that kubernetes would see",
    "start": "540480",
    "end": "542720"
  },
  {
    "text": "the label on the pod template and would",
    "start": "542720",
    "end": "545760"
  },
  {
    "text": "see that that was the only thing that",
    "start": "545760",
    "end": "547120"
  },
  {
    "text": "had changed",
    "start": "547120",
    "end": "548399"
  },
  {
    "text": "so it would update the existing pod with",
    "start": "548399",
    "end": "551200"
  },
  {
    "text": "the new label",
    "start": "551200",
    "end": "553120"
  },
  {
    "text": "that is not what happens the",
    "start": "553120",
    "end": "556160"
  },
  {
    "text": "what happens and the way it's specified",
    "start": "556160",
    "end": "558080"
  },
  {
    "text": "to happen is that the deployment",
    "start": "558080",
    "end": "560000"
  },
  {
    "text": "controller will notice that the",
    "start": "560000",
    "end": "562399"
  },
  {
    "text": "pod template spec has changed and",
    "start": "562399",
    "end": "564959"
  },
  {
    "text": "replaced the pod entirely",
    "start": "564959",
    "end": "568080"
  },
  {
    "text": "it was very important to people we",
    "start": "568080",
    "end": "570160"
  },
  {
    "text": "learned that",
    "start": "570160",
    "end": "571519"
  },
  {
    "text": "if nothing changes the pod should stay",
    "start": "571519",
    "end": "574399"
  },
  {
    "text": "as is it shouldn't restart it",
    "start": "574399",
    "end": "577760"
  },
  {
    "text": "and people hated the behavior where it",
    "start": "577760",
    "end": "579839"
  },
  {
    "text": "started every time",
    "start": "579839",
    "end": "582880"
  },
  {
    "text": "so we looked for alternatives the first",
    "start": "582959",
    "end": "585839"
  },
  {
    "text": "alternative",
    "start": "585839",
    "end": "586800"
  },
  {
    "text": "we will look at is cube cuddle rollout",
    "start": "586800",
    "end": "590240"
  },
  {
    "text": "it ships with cube cuddle",
    "start": "590240",
    "end": "593760"
  },
  {
    "text": "the example code that we're going to",
    "start": "594080",
    "end": "595760"
  },
  {
    "text": "look at uses cube cuddle roll out as a",
    "start": "595760",
    "end": "598320"
  },
  {
    "text": "library",
    "start": "598320",
    "end": "600240"
  },
  {
    "text": "let's watch so it's going to wait for",
    "start": "600240",
    "end": "603680"
  },
  {
    "text": "the deployment",
    "start": "603680",
    "end": "604320"
  },
  {
    "text": "rollout to finish and it's a little bit",
    "start": "604320",
    "end": "607360"
  },
  {
    "text": "repetitive but",
    "start": "607360",
    "end": "608720"
  },
  {
    "text": "good success deployment successfully",
    "start": "608720",
    "end": "610640"
  },
  {
    "text": "rolled out",
    "start": "610640",
    "end": "613120"
  },
  {
    "start": "613000",
    "end": "613000"
  },
  {
    "text": "now let's look at what happens when the",
    "start": "613519",
    "end": "615760"
  },
  {
    "text": "pod crashes we start the command with",
    "start": "615760",
    "end": "617600"
  },
  {
    "text": "dash dash crash",
    "start": "617600",
    "end": "619440"
  },
  {
    "text": "we build and push the image deploy the",
    "start": "619440",
    "end": "621440"
  },
  {
    "text": "deployment",
    "start": "621440",
    "end": "622560"
  },
  {
    "text": "wait for the deployment to finish",
    "start": "622560",
    "end": "625839"
  },
  {
    "text": "and waiting",
    "start": "626000",
    "end": "628640"
  },
  {
    "text": "and it times out okay",
    "start": "629279",
    "end": "632399"
  },
  {
    "text": "what happens when you dig into how",
    "start": "632399",
    "end": "635760"
  },
  {
    "text": "cube cuddle raw is implemented it's very",
    "start": "635760",
    "end": "638800"
  },
  {
    "text": "simple",
    "start": "638800",
    "end": "640480"
  },
  {
    "text": "it watches for changes the deployment it",
    "start": "640480",
    "end": "643120"
  },
  {
    "text": "checks the",
    "start": "643120",
    "end": "643839"
  },
  {
    "text": "spec field on the deployment against the",
    "start": "643839",
    "end": "646160"
  },
  {
    "text": "status field on the deployment",
    "start": "646160",
    "end": "647760"
  },
  {
    "text": "to see if it's finished",
    "start": "647760",
    "end": "650800"
  },
  {
    "text": "here is the code the full function",
    "start": "652160",
    "end": "655760"
  },
  {
    "text": "has a few more if branches",
    "start": "655760",
    "end": "658959"
  },
  {
    "text": "but it's not substantially more",
    "start": "658959",
    "end": "660880"
  },
  {
    "text": "complicated than the checks that you see",
    "start": "660880",
    "end": "662959"
  },
  {
    "text": "here",
    "start": "662959",
    "end": "663519"
  },
  {
    "text": "the checks in bolt they check that the",
    "start": "663519",
    "end": "666959"
  },
  {
    "text": "number of updated pods is",
    "start": "666959",
    "end": "668720"
  },
  {
    "text": "what we expected it to be",
    "start": "668720",
    "end": "675120"
  },
  {
    "text": "what cube cuddle roll is really good at",
    "start": "675120",
    "end": "677440"
  },
  {
    "text": "is understanding the plants",
    "start": "677440",
    "end": "680000"
  },
  {
    "text": "any information about a pod that's",
    "start": "680000",
    "end": "682079"
  },
  {
    "text": "propagated up to the deployment",
    "start": "682079",
    "end": "684000"
  },
  {
    "text": "it can find that out but because of the",
    "start": "684000",
    "end": "686959"
  },
  {
    "text": "information we care about",
    "start": "686959",
    "end": "688880"
  },
  {
    "text": "isn't in the deployment status it can't",
    "start": "688880",
    "end": "691680"
  },
  {
    "text": "tell us why things are failing",
    "start": "691680",
    "end": "695279"
  },
  {
    "text": "let's look at a different tool let's",
    "start": "696480",
    "end": "698160"
  },
  {
    "text": "look at helm uh",
    "start": "698160",
    "end": "699920"
  },
  {
    "text": "helm also has the ability to track",
    "start": "699920",
    "end": "701680"
  },
  {
    "text": "progress it has two flags dash dash",
    "start": "701680",
    "end": "703760"
  },
  {
    "text": "above and dash dash watch",
    "start": "703760",
    "end": "705920"
  },
  {
    "text": "that let you track the progress of a",
    "start": "705920",
    "end": "707519"
  },
  {
    "text": "helm upgrade",
    "start": "707519",
    "end": "709839"
  },
  {
    "text": "just as an aside helm is pretty awesome",
    "start": "709839",
    "end": "712880"
  },
  {
    "text": "if you want tips on how to use the go",
    "start": "712880",
    "end": "716000"
  },
  {
    "text": "client for kubernetes i highly recommend",
    "start": "716000",
    "end": "718000"
  },
  {
    "text": "you look at how helm uses it",
    "start": "718000",
    "end": "719920"
  },
  {
    "text": "the code is very readable the code is",
    "start": "719920",
    "end": "721760"
  },
  {
    "text": "very well organized",
    "start": "721760",
    "end": "724160"
  },
  {
    "text": "of the examples that i wrote for this",
    "start": "724160",
    "end": "726000"
  },
  {
    "text": "talk this was the easiest",
    "start": "726000",
    "end": "728160"
  },
  {
    "text": "to write it uses helm as a library to",
    "start": "728160",
    "end": "731200"
  },
  {
    "text": "watch progress and it's a couple of",
    "start": "731200",
    "end": "732800"
  },
  {
    "text": "lines",
    "start": "732800",
    "end": "735120"
  },
  {
    "text": "let's watch a video of what it does",
    "start": "735920",
    "end": "739200"
  },
  {
    "text": "again we're going to build and push an",
    "start": "739200",
    "end": "740880"
  },
  {
    "text": "image deploy a deployment",
    "start": "740880",
    "end": "742880"
  },
  {
    "text": "and wait on the deployment to come up",
    "start": "742880",
    "end": "745760"
  },
  {
    "text": "deployment is not ready",
    "start": "745760",
    "end": "747519"
  },
  {
    "text": "deployed successfully great that is",
    "start": "747519",
    "end": "750079"
  },
  {
    "text": "exactly what we wanted",
    "start": "750079",
    "end": "752079"
  },
  {
    "start": "752000",
    "end": "752000"
  },
  {
    "text": "uh let's try again with a crashing pod",
    "start": "752079",
    "end": "756959"
  },
  {
    "text": "we're going to apply the new deployment",
    "start": "756959",
    "end": "759760"
  },
  {
    "text": "with the crashing pod",
    "start": "759760",
    "end": "761680"
  },
  {
    "text": "deployment is not ready deployment is",
    "start": "761680",
    "end": "764240"
  },
  {
    "text": "not ready",
    "start": "764240",
    "end": "766480"
  },
  {
    "text": "the pod is still not ready",
    "start": "766480",
    "end": "773120"
  },
  {
    "text": "and it times out",
    "start": "773120",
    "end": "775920"
  },
  {
    "start": "778000",
    "end": "778000"
  },
  {
    "text": "okay let's let's try to figure out",
    "start": "778560",
    "end": "780399"
  },
  {
    "text": "what's happening when you unpack the",
    "start": "780399",
    "end": "782399"
  },
  {
    "text": "helm code",
    "start": "782399",
    "end": "783600"
  },
  {
    "text": "what does it do the helm code",
    "start": "783600",
    "end": "786800"
  },
  {
    "text": "pulls the status of the resource it just",
    "start": "786800",
    "end": "789279"
  },
  {
    "text": "deploys",
    "start": "789279",
    "end": "790079"
  },
  {
    "text": "it has a big switch statement of all the",
    "start": "790079",
    "end": "792320"
  },
  {
    "text": "different resource types it knows about",
    "start": "792320",
    "end": "794880"
  },
  {
    "text": "it checks their status and it checks",
    "start": "794880",
    "end": "796639"
  },
  {
    "text": "their children's status",
    "start": "796639",
    "end": "798079"
  },
  {
    "text": "and it does a type specific check to see",
    "start": "798079",
    "end": "799920"
  },
  {
    "text": "if it succeeded",
    "start": "799920",
    "end": "802720"
  },
  {
    "text": "here's what the code looks like uh it's",
    "start": "803680",
    "end": "806800"
  },
  {
    "text": "a bit more sophisticated than the cube",
    "start": "806800",
    "end": "808560"
  },
  {
    "text": "color rollout command",
    "start": "808560",
    "end": "810160"
  },
  {
    "text": "the important bit is the get new replica",
    "start": "810160",
    "end": "812560"
  },
  {
    "text": "set called in bold",
    "start": "812560",
    "end": "814560"
  },
  {
    "text": "we're not going to show the",
    "start": "814560",
    "end": "815519"
  },
  {
    "text": "implementation but what it does is it",
    "start": "815519",
    "end": "817519"
  },
  {
    "text": "makes a best guess",
    "start": "817519",
    "end": "819360"
  },
  {
    "text": "of what the current replica set is based",
    "start": "819360",
    "end": "821760"
  },
  {
    "text": "on the creation timestamp",
    "start": "821760",
    "end": "823199"
  },
  {
    "text": "and whether the fields match the",
    "start": "823199",
    "end": "824880"
  },
  {
    "text": "deployment",
    "start": "824880",
    "end": "826639"
  },
  {
    "text": "then it does a similar check to what",
    "start": "826639",
    "end": "828240"
  },
  {
    "text": "cute cuddle rod does to see if the",
    "start": "828240",
    "end": "830320"
  },
  {
    "text": "deployment and the replica set are",
    "start": "830320",
    "end": "832000"
  },
  {
    "text": "finished",
    "start": "832000",
    "end": "834399"
  },
  {
    "text": "this is a fine approach it's easy to",
    "start": "834880",
    "end": "837360"
  },
  {
    "text": "understand and easy to reason about",
    "start": "837360",
    "end": "840000"
  },
  {
    "text": "the downside is that there is no",
    "start": "840000",
    "end": "842160"
  },
  {
    "text": "universal definition of done",
    "start": "842160",
    "end": "844399"
  },
  {
    "text": "each new resource type has its own",
    "start": "844399",
    "end": "846320"
  },
  {
    "text": "definition in that big switch block that",
    "start": "846320",
    "end": "848639"
  },
  {
    "text": "helm team maintains",
    "start": "848639",
    "end": "850639"
  },
  {
    "text": "those definitions are easy to add but",
    "start": "850639",
    "end": "852480"
  },
  {
    "text": "still you have to add them",
    "start": "852480",
    "end": "856639"
  },
  {
    "text": "the third alternative we're going to",
    "start": "856639",
    "end": "858160"
  },
  {
    "text": "look at is cube spy trace",
    "start": "858160",
    "end": "861120"
  },
  {
    "text": "now we're not going to look at too much",
    "start": "861120",
    "end": "862720"
  },
  {
    "text": "of the code i will warn you",
    "start": "862720",
    "end": "864320"
  },
  {
    "text": "the code is very dense it does a lot",
    "start": "864320",
    "end": "867360"
  },
  {
    "text": "but it's very comprehensive and you can",
    "start": "867360",
    "end": "869600"
  },
  {
    "text": "learn a lot by reading it",
    "start": "869600",
    "end": "872720"
  },
  {
    "text": "let's take a look at a video of it in",
    "start": "873519",
    "end": "875199"
  },
  {
    "text": "action uh",
    "start": "875199",
    "end": "876639"
  },
  {
    "text": "unlike the other ones we're gonna pause",
    "start": "876639",
    "end": "878959"
  },
  {
    "text": "in the middle of this video just",
    "start": "878959",
    "end": "880320"
  },
  {
    "text": "uh just to understand it a little bit",
    "start": "880320",
    "end": "881920"
  },
  {
    "text": "better because there's a lot",
    "start": "881920",
    "end": "884399"
  },
  {
    "text": "q spice trays starts to hint that blame",
    "start": "884399",
    "end": "887279"
  },
  {
    "text": "isn't a straight line",
    "start": "887279",
    "end": "889279"
  },
  {
    "text": "it doesn't go straight from deployment",
    "start": "889279",
    "end": "891279"
  },
  {
    "text": "to running pod",
    "start": "891279",
    "end": "892480"
  },
  {
    "text": "we can see the current pod and we can",
    "start": "892480",
    "end": "895360"
  },
  {
    "text": "also see the pod it's replacing",
    "start": "895360",
    "end": "898560"
  },
  {
    "text": "let's unpause the video and watch it",
    "start": "898560",
    "end": "900639"
  },
  {
    "text": "roll out",
    "start": "900639",
    "end": "901839"
  },
  {
    "text": "now what's going to happen is that we",
    "start": "901839",
    "end": "904399"
  },
  {
    "text": "can see",
    "start": "904399",
    "end": "905040"
  },
  {
    "text": "the new pond has become ready and it has",
    "start": "905040",
    "end": "908079"
  },
  {
    "text": "replaced the old pod",
    "start": "908079",
    "end": "910839"
  },
  {
    "text": "great now let's look at what it means to",
    "start": "910839",
    "end": "913839"
  },
  {
    "start": "912000",
    "end": "912000"
  },
  {
    "text": "crash",
    "start": "913839",
    "end": "915440"
  },
  {
    "text": "again we're going to watch it roll out",
    "start": "915440",
    "end": "918079"
  },
  {
    "text": "and we're going to pause",
    "start": "918079",
    "end": "920000"
  },
  {
    "text": "at opportune time right here",
    "start": "920000",
    "end": "924399"
  },
  {
    "text": "now you can see that the current rollout",
    "start": "924720",
    "end": "926880"
  },
  {
    "text": "is crashing and it's crashing with the",
    "start": "926880",
    "end": "928320"
  },
  {
    "text": "error message container completed with",
    "start": "928320",
    "end": "929920"
  },
  {
    "text": "exit code one",
    "start": "929920",
    "end": "931440"
  },
  {
    "text": "and you can see that because the current",
    "start": "931440",
    "end": "932959"
  },
  {
    "text": "raw is crashing",
    "start": "932959",
    "end": "934560"
  },
  {
    "text": "the previous rollout is still up",
    "start": "934560",
    "end": "937199"
  },
  {
    "text": "revision 10 has not yet replaced",
    "start": "937199",
    "end": "939199"
  },
  {
    "text": "revision 9.",
    "start": "939199",
    "end": "942079"
  },
  {
    "text": "this is awesome this is this is what we",
    "start": "942079",
    "end": "944240"
  },
  {
    "text": "wanted",
    "start": "944240",
    "end": "945360"
  },
  {
    "text": "let's dig into how cube spy trace works",
    "start": "945360",
    "end": "948959"
  },
  {
    "text": "now the other tools we looked at tracked",
    "start": "948959",
    "end": "950800"
  },
  {
    "text": "resources top down they started with a",
    "start": "950800",
    "end": "952639"
  },
  {
    "text": "deployment",
    "start": "952639",
    "end": "953600"
  },
  {
    "text": "and looked to its children cube spy",
    "start": "953600",
    "end": "956160"
  },
  {
    "text": "trace doesn't do that",
    "start": "956160",
    "end": "958399"
  },
  {
    "text": "if you look at the bold above it's",
    "start": "958399",
    "end": "961040"
  },
  {
    "text": "watching",
    "start": "961040",
    "end": "961839"
  },
  {
    "text": "every pod in the name space why",
    "start": "961839",
    "end": "966800"
  },
  {
    "text": "so cute spy trace does both a top-down",
    "start": "966800",
    "end": "970240"
  },
  {
    "text": "and bottom-up analysis first it creates",
    "start": "970240",
    "end": "974000"
  },
  {
    "text": "tables",
    "start": "974000",
    "end": "974880"
  },
  {
    "text": "of every type it knows about",
    "start": "974880",
    "end": "978160"
  },
  {
    "text": "it looks at an annotation deployment to",
    "start": "978160",
    "end": "980399"
  },
  {
    "text": "find",
    "start": "980399",
    "end": "981279"
  },
  {
    "text": "the current replica set",
    "start": "981279",
    "end": "984320"
  },
  {
    "text": "then it looks at all the pods in the",
    "start": "984320",
    "end": "986639"
  },
  {
    "text": "namespace",
    "start": "986639",
    "end": "987759"
  },
  {
    "text": "and at the owner ref at each pod to",
    "start": "987759",
    "end": "990480"
  },
  {
    "text": "figure out which",
    "start": "990480",
    "end": "991680"
  },
  {
    "text": "pods belong to that replica set",
    "start": "991680",
    "end": "996880"
  },
  {
    "text": "this seems like a lot of work but",
    "start": "996880",
    "end": "1000160"
  },
  {
    "text": "cube spy's insight is that you need to",
    "start": "1000160",
    "end": "1002639"
  },
  {
    "text": "do both",
    "start": "1002639",
    "end": "1004160"
  },
  {
    "text": "the owner references tell you",
    "start": "1004160",
    "end": "1005920"
  },
  {
    "text": "definitively",
    "start": "1005920",
    "end": "1007360"
  },
  {
    "text": "these pods come from this replica set",
    "start": "1007360",
    "end": "1011440"
  },
  {
    "text": "but deployment is mutable it has",
    "start": "1011440",
    "end": "1014160"
  },
  {
    "text": "revisions and the owner references",
    "start": "1014160",
    "end": "1016480"
  },
  {
    "text": "can't tell you which revision of the",
    "start": "1016480",
    "end": "1018720"
  },
  {
    "text": "deployment",
    "start": "1018720",
    "end": "1019680"
  },
  {
    "text": "created which pod they simply don't have",
    "start": "1019680",
    "end": "1022079"
  },
  {
    "text": "that information",
    "start": "1022079",
    "end": "1024000"
  },
  {
    "text": "to find out which deployment created",
    "start": "1024000",
    "end": "1025760"
  },
  {
    "text": "which pod",
    "start": "1025760",
    "end": "1027038"
  },
  {
    "text": "we need the deployment controller to",
    "start": "1027039",
    "end": "1028640"
  },
  {
    "text": "pass some information down the object",
    "start": "1028640",
    "end": "1030880"
  },
  {
    "text": "graph",
    "start": "1030880",
    "end": "1031678"
  },
  {
    "text": "and we need to check that that info has",
    "start": "1031679",
    "end": "1033438"
  },
  {
    "text": "propagated",
    "start": "1033439",
    "end": "1036000"
  },
  {
    "text": "so this is great uh we have to build",
    "start": "1036559",
    "end": "1039520"
  },
  {
    "text": "tables of resources up front",
    "start": "1039520",
    "end": "1041438"
  },
  {
    "text": "we still have to do a lot of custom",
    "start": "1041439",
    "end": "1043120"
  },
  {
    "text": "analysis for each resource type",
    "start": "1043120",
    "end": "1045520"
  },
  {
    "text": "this approach isn't easily portable to",
    "start": "1045520",
    "end": "1047678"
  },
  {
    "text": "other types or to custom resources",
    "start": "1047679",
    "end": "1052160"
  },
  {
    "text": "i want to briefly talk about what tilt",
    "start": "1052160",
    "end": "1055039"
  },
  {
    "text": "does today",
    "start": "1055039",
    "end": "1056480"
  },
  {
    "text": "and it's not that much different than",
    "start": "1056480",
    "end": "1058240"
  },
  {
    "text": "what cuba spy does",
    "start": "1058240",
    "end": "1059600"
  },
  {
    "text": "it's less comprehensive than cube spy",
    "start": "1059600",
    "end": "1062080"
  },
  {
    "text": "which does a lot of different checks",
    "start": "1062080",
    "end": "1065120"
  },
  {
    "text": "tilt does use owner references heavily",
    "start": "1065120",
    "end": "1068320"
  },
  {
    "text": "every time tilt deploys a resource it",
    "start": "1068320",
    "end": "1070559"
  },
  {
    "text": "grabs the uid",
    "start": "1070559",
    "end": "1071919"
  },
  {
    "text": "that cube cuddle apply returns",
    "start": "1071919",
    "end": "1075200"
  },
  {
    "text": "it watches all pods and every time tilt",
    "start": "1075200",
    "end": "1077679"
  },
  {
    "text": "sees a pod",
    "start": "1077679",
    "end": "1078799"
  },
  {
    "text": "it climbs the owner references to see if",
    "start": "1078799",
    "end": "1081039"
  },
  {
    "text": "that pod",
    "start": "1081039",
    "end": "1082000"
  },
  {
    "text": "belongs to the thing that we just",
    "start": "1082000",
    "end": "1083600"
  },
  {
    "text": "deployed",
    "start": "1083600",
    "end": "1085919"
  },
  {
    "text": "now we still need to do the top down",
    "start": "1085919",
    "end": "1088160"
  },
  {
    "text": "matching",
    "start": "1088160",
    "end": "1089039"
  },
  {
    "text": "but we wanted this to work for any type",
    "start": "1089039",
    "end": "1091520"
  },
  {
    "text": "not just for deployments",
    "start": "1091520",
    "end": "1093679"
  },
  {
    "text": "so we use a label approach it's a little",
    "start": "1093679",
    "end": "1096880"
  },
  {
    "text": "bit technical",
    "start": "1096880",
    "end": "1097840"
  },
  {
    "text": "uh but i'll try to walk you through it",
    "start": "1097840",
    "end": "1100640"
  },
  {
    "text": "we",
    "start": "1100640",
    "end": "1100960"
  },
  {
    "text": "inject a label into the pod template",
    "start": "1100960",
    "end": "1102960"
  },
  {
    "text": "spec they are not",
    "start": "1102960",
    "end": "1104240"
  },
  {
    "text": "random labels they're and they're also",
    "start": "1104240",
    "end": "1106799"
  },
  {
    "text": "not auto-incrementing revision labels",
    "start": "1106799",
    "end": "1108720"
  },
  {
    "text": "like deployment controller ads",
    "start": "1108720",
    "end": "1110720"
  },
  {
    "text": "they're content-based labels they're a",
    "start": "1110720",
    "end": "1113440"
  },
  {
    "text": "hash of the pod template spec",
    "start": "1113440",
    "end": "1115919"
  },
  {
    "text": "this ensures that the label changes if",
    "start": "1115919",
    "end": "1118000"
  },
  {
    "text": "and only if the contents of the pod",
    "start": "1118000",
    "end": "1119679"
  },
  {
    "text": "change",
    "start": "1119679",
    "end": "1120720"
  },
  {
    "text": "and this gives us the semantics we want",
    "start": "1120720",
    "end": "1122799"
  },
  {
    "text": "where kubernetes will restart the pod",
    "start": "1122799",
    "end": "1125039"
  },
  {
    "text": "only if the contents change",
    "start": "1125039",
    "end": "1128080"
  },
  {
    "text": "now deployments are special in that they",
    "start": "1128080",
    "end": "1130400"
  },
  {
    "text": "can guarantee that this label will make",
    "start": "1130400",
    "end": "1132320"
  },
  {
    "text": "it down to all the pods",
    "start": "1132320",
    "end": "1134640"
  },
  {
    "text": "this isn't true for all resource types",
    "start": "1134640",
    "end": "1138000"
  },
  {
    "text": "so till we'll check if the label made it",
    "start": "1138000",
    "end": "1140240"
  },
  {
    "text": "down to the pod",
    "start": "1140240",
    "end": "1141679"
  },
  {
    "text": "and if it did we will only pay attention",
    "start": "1141679",
    "end": "1144480"
  },
  {
    "text": "to pods that match the current",
    "start": "1144480",
    "end": "1146799"
  },
  {
    "text": "uh template hash label",
    "start": "1146799",
    "end": "1151840"
  },
  {
    "text": "here's what it looks like uh we're going",
    "start": "1151919",
    "end": "1154160"
  },
  {
    "text": "to watch the video",
    "start": "1154160",
    "end": "1155280"
  },
  {
    "text": "and again we're going to wait till the",
    "start": "1155280",
    "end": "1156640"
  },
  {
    "text": "deployment comes out and we're going to",
    "start": "1156640",
    "end": "1158000"
  },
  {
    "text": "pause briefly",
    "start": "1158000",
    "end": "1160960"
  },
  {
    "text": "now when we applied the deployment we",
    "start": "1161039",
    "end": "1163760"
  },
  {
    "text": "got the uid of that deployment",
    "start": "1163760",
    "end": "1166720"
  },
  {
    "text": "and we also looked at the content based",
    "start": "1166720",
    "end": "1168880"
  },
  {
    "text": "label",
    "start": "1168880",
    "end": "1170240"
  },
  {
    "text": "on each pod that we're watching and we",
    "start": "1170240",
    "end": "1172640"
  },
  {
    "text": "saw that we actually saw",
    "start": "1172640",
    "end": "1174160"
  },
  {
    "text": "three pods two of the pods had",
    "start": "1174160",
    "end": "1178160"
  },
  {
    "text": "a content label from a previous revision",
    "start": "1178160",
    "end": "1181600"
  },
  {
    "text": "of the deployment",
    "start": "1181600",
    "end": "1182320"
  },
  {
    "text": "so we're going to ignore those but we",
    "start": "1182320",
    "end": "1184480"
  },
  {
    "text": "are going to keep track of the new pod",
    "start": "1184480",
    "end": "1188080"
  },
  {
    "text": "let's wait for it to succeed and we're",
    "start": "1189280",
    "end": "1191200"
  },
  {
    "text": "good",
    "start": "1191200",
    "end": "1193039"
  },
  {
    "start": "1193000",
    "end": "1193000"
  },
  {
    "text": "now for completeness let's look at what",
    "start": "1193039",
    "end": "1195520"
  },
  {
    "text": "this looks like when it's crashing",
    "start": "1195520",
    "end": "1198160"
  },
  {
    "text": "again we're going to build the image",
    "start": "1198160",
    "end": "1199760"
  },
  {
    "text": "push the image apply the deployment",
    "start": "1199760",
    "end": "1202159"
  },
  {
    "text": "ignore the pause that don't match the",
    "start": "1202159",
    "end": "1204159"
  },
  {
    "text": "current revision",
    "start": "1204159",
    "end": "1205280"
  },
  {
    "text": "and we can see the error of the pod",
    "start": "1205280",
    "end": "1209280"
  },
  {
    "text": "that corresponded to this revision",
    "start": "1209280",
    "end": "1213760"
  },
  {
    "text": "so this gives us what we need i am not",
    "start": "1214320",
    "end": "1217200"
  },
  {
    "text": "super happy with this solution and i'll",
    "start": "1217200",
    "end": "1218960"
  },
  {
    "text": "tell you why",
    "start": "1218960",
    "end": "1220640"
  },
  {
    "text": "all the indexing and owner of traversing",
    "start": "1220640",
    "end": "1223280"
  },
  {
    "text": "means",
    "start": "1223280",
    "end": "1224000"
  },
  {
    "text": "this is very complicated and it's hard",
    "start": "1224000",
    "end": "1226720"
  },
  {
    "text": "to make this perform well",
    "start": "1226720",
    "end": "1228880"
  },
  {
    "text": "uh the the upside is that it does work",
    "start": "1228880",
    "end": "1231600"
  },
  {
    "text": "well",
    "start": "1231600",
    "end": "1232000"
  },
  {
    "text": "with any resource types it",
    "start": "1232000",
    "end": "1235120"
  },
  {
    "text": "allows us to track the process of custom",
    "start": "1235120",
    "end": "1237600"
  },
  {
    "text": "track the progress of custom resources",
    "start": "1237600",
    "end": "1240159"
  },
  {
    "text": "it allows us to properly display events",
    "start": "1240159",
    "end": "1242240"
  },
  {
    "text": "and events are super helpful for",
    "start": "1242240",
    "end": "1244000"
  },
  {
    "text": "debugging",
    "start": "1244000",
    "end": "1246480"
  },
  {
    "text": "so i want to close this talk with a",
    "start": "1246960",
    "end": "1249280"
  },
  {
    "text": "small rant",
    "start": "1249280",
    "end": "1250480"
  },
  {
    "text": "if you'll indulge me i don't want you to",
    "start": "1250480",
    "end": "1254000"
  },
  {
    "start": "1251000",
    "end": "1251000"
  },
  {
    "text": "come away from this talk saying",
    "start": "1254000",
    "end": "1255679"
  },
  {
    "text": "oh cute cuddle rod is bad cubispide",
    "start": "1255679",
    "end": "1258320"
  },
  {
    "text": "trace is better tilt is the best",
    "start": "1258320",
    "end": "1261120"
  },
  {
    "text": "uh all of these approaches have",
    "start": "1261120",
    "end": "1262720"
  },
  {
    "text": "trade-offs some are simple and fast and",
    "start": "1262720",
    "end": "1264880"
  },
  {
    "text": "efficient",
    "start": "1264880",
    "end": "1266080"
  },
  {
    "text": "some are more complex and give you more",
    "start": "1266080",
    "end": "1268480"
  },
  {
    "text": "information",
    "start": "1268480",
    "end": "1269200"
  },
  {
    "text": "but are slower when i was looking at",
    "start": "1269200",
    "end": "1272880"
  },
  {
    "text": "examples for this talk i looked at",
    "start": "1272880",
    "end": "1275120"
  },
  {
    "text": "cube cuddle tree a cube cuddle plugin",
    "start": "1275120",
    "end": "1277919"
  },
  {
    "text": "that",
    "start": "1277919",
    "end": "1278640"
  },
  {
    "text": "visualizes the owner reference graph",
    "start": "1278640",
    "end": "1282480"
  },
  {
    "text": "i laughed out loud when i read this",
    "start": "1282480",
    "end": "1284080"
  },
  {
    "text": "comment directly from the code",
    "start": "1284080",
    "end": "1286640"
  },
  {
    "text": "uh cute cuddle tree just grabs all the",
    "start": "1286640",
    "end": "1288960"
  },
  {
    "text": "resources in the namespace it sets the",
    "start": "1288960",
    "end": "1290960"
  },
  {
    "text": "qps to a thousand so that it doesn't get",
    "start": "1290960",
    "end": "1293039"
  },
  {
    "text": "throttled",
    "start": "1293039",
    "end": "1294880"
  },
  {
    "text": "and this is not me shaming cube cuddle",
    "start": "1294880",
    "end": "1297440"
  },
  {
    "text": "tree",
    "start": "1297440",
    "end": "1298480"
  },
  {
    "text": "because this is what it needs to do",
    "start": "1298480",
    "end": "1302480"
  },
  {
    "text": "and i hope you see how much that stinks",
    "start": "1302960",
    "end": "1306240"
  },
  {
    "text": "and it's not because anyone did a bad",
    "start": "1306240",
    "end": "1309120"
  },
  {
    "text": "job",
    "start": "1309120",
    "end": "1310159"
  },
  {
    "text": "it's because these are inherently hard",
    "start": "1310159",
    "end": "1312320"
  },
  {
    "text": "problems to solve in a declarative",
    "start": "1312320",
    "end": "1314240"
  },
  {
    "text": "system",
    "start": "1314240",
    "end": "1315280"
  },
  {
    "text": "and to solve it we need to do some more",
    "start": "1315280",
    "end": "1317360"
  },
  {
    "text": "work",
    "start": "1317360",
    "end": "1319039"
  },
  {
    "text": "but if the underlying infrastructure",
    "start": "1319039",
    "end": "1322000"
  },
  {
    "text": "gave us a little bit of help",
    "start": "1322000",
    "end": "1323840"
  },
  {
    "text": "and did some things automatically for us",
    "start": "1323840",
    "end": "1326320"
  },
  {
    "text": "that would make it a lot easier",
    "start": "1326320",
    "end": "1329679"
  },
  {
    "start": "1329000",
    "end": "1329000"
  },
  {
    "text": "so what might that look like let's start",
    "start": "1329760",
    "end": "1332720"
  },
  {
    "text": "with the bottom up analysis",
    "start": "1332720",
    "end": "1334480"
  },
  {
    "text": "what can you figure out when you look at",
    "start": "1334480",
    "end": "1336320"
  },
  {
    "text": "a pod",
    "start": "1336320",
    "end": "1337840"
  },
  {
    "text": "right now kubernetes gives you owner",
    "start": "1337840",
    "end": "1339600"
  },
  {
    "text": "references which are good",
    "start": "1339600",
    "end": "1342240"
  },
  {
    "text": "but there is no api to easily traverse",
    "start": "1342240",
    "end": "1344640"
  },
  {
    "text": "them uh",
    "start": "1344640",
    "end": "1345600"
  },
  {
    "text": "the kubernetes api is very much",
    "start": "1345600",
    "end": "1348559"
  },
  {
    "text": "optimized for querying types",
    "start": "1348559",
    "end": "1350720"
  },
  {
    "text": "not procuring graphs objects which is",
    "start": "1350720",
    "end": "1353200"
  },
  {
    "text": "good if you're trying to build",
    "start": "1353200",
    "end": "1354640"
  },
  {
    "text": "a controller like a deployment",
    "start": "1354640",
    "end": "1356240"
  },
  {
    "text": "controller but not so good",
    "start": "1356240",
    "end": "1358240"
  },
  {
    "text": "if you're trying to attribute blame uh",
    "start": "1358240",
    "end": "1361280"
  },
  {
    "text": "the other thing about the owner",
    "start": "1361280",
    "end": "1362240"
  },
  {
    "text": "references",
    "start": "1362240",
    "end": "1362880"
  },
  {
    "text": "is they don't really tell you which",
    "start": "1362880",
    "end": "1365039"
  },
  {
    "text": "revision did what",
    "start": "1365039",
    "end": "1367360"
  },
  {
    "text": "uh they only tell you which",
    "start": "1367360",
    "end": "1370720"
  },
  {
    "text": "resource it came from",
    "start": "1370720",
    "end": "1374080"
  },
  {
    "text": "then there's the other side what can you",
    "start": "1374080",
    "end": "1376720"
  },
  {
    "text": "figure out",
    "start": "1376720",
    "end": "1377360"
  },
  {
    "text": "if you're just looking at a deployment",
    "start": "1377360",
    "end": "1380320"
  },
  {
    "text": "what's weird is that",
    "start": "1380320",
    "end": "1382000"
  },
  {
    "text": "there are a lot of common patterns",
    "start": "1382000",
    "end": "1385039"
  },
  {
    "text": "uh that you see in different resource",
    "start": "1385039",
    "end": "1387280"
  },
  {
    "text": "types",
    "start": "1387280",
    "end": "1388720"
  },
  {
    "text": "most controllers have a way to propagate",
    "start": "1388720",
    "end": "1391039"
  },
  {
    "text": "information from the parent to the child",
    "start": "1391039",
    "end": "1393760"
  },
  {
    "text": "to see which revision caused which child",
    "start": "1393760",
    "end": "1396320"
  },
  {
    "text": "change",
    "start": "1396320",
    "end": "1397679"
  },
  {
    "text": "and lots of controllers have ways to",
    "start": "1397679",
    "end": "1399520"
  },
  {
    "text": "propagate status from the child to the",
    "start": "1399520",
    "end": "1401600"
  },
  {
    "text": "parent",
    "start": "1401600",
    "end": "1403360"
  },
  {
    "text": "but they all do it inconsistently they",
    "start": "1403360",
    "end": "1406080"
  },
  {
    "text": "all",
    "start": "1406080",
    "end": "1406400"
  },
  {
    "text": "reinvent the wheel every time even",
    "start": "1406400",
    "end": "1408880"
  },
  {
    "text": "though we've kind of established the",
    "start": "1408880",
    "end": "1410320"
  },
  {
    "text": "patterns by this point",
    "start": "1410320",
    "end": "1412480"
  },
  {
    "text": "uh and we're getting to the point where",
    "start": "1412480",
    "end": "1414960"
  },
  {
    "text": "it might be worth thinking about",
    "start": "1414960",
    "end": "1416320"
  },
  {
    "text": "what would a generic api look like what",
    "start": "1416320",
    "end": "1419039"
  },
  {
    "text": "are the common idioms that all",
    "start": "1419039",
    "end": "1420559"
  },
  {
    "text": "controllers should be using for this",
    "start": "1420559",
    "end": "1424240"
  },
  {
    "start": "1424000",
    "end": "1424000"
  },
  {
    "text": "lastly i want to tease you a bit",
    "start": "1424799",
    "end": "1428080"
  },
  {
    "text": "the kubernetes ecosystem is only going",
    "start": "1428080",
    "end": "1430320"
  },
  {
    "text": "to get more complicated",
    "start": "1430320",
    "end": "1432080"
  },
  {
    "text": "uh we're seeing more custom resources",
    "start": "1432080",
    "end": "1435440"
  },
  {
    "text": "we're starting to see mutated mission",
    "start": "1435440",
    "end": "1437520"
  },
  {
    "text": "controllers which are really cool",
    "start": "1437520",
    "end": "1439760"
  },
  {
    "text": "uh but they modify pause and add",
    "start": "1439760",
    "end": "1442400"
  },
  {
    "text": "sidecars and add volumes and other",
    "start": "1442400",
    "end": "1444480"
  },
  {
    "text": "things",
    "start": "1444480",
    "end": "1446400"
  },
  {
    "text": "but we can't tell they came from those",
    "start": "1446400",
    "end": "1449120"
  },
  {
    "text": "mutated mission controllers",
    "start": "1449120",
    "end": "1451600"
  },
  {
    "text": "what would a debugging experience look",
    "start": "1451600",
    "end": "1453200"
  },
  {
    "text": "like that was as nice as the css",
    "start": "1453200",
    "end": "1455440"
  },
  {
    "text": "debuggers of today",
    "start": "1455440",
    "end": "1456720"
  },
  {
    "text": "that lets you see a hierarchy of rules",
    "start": "1456720",
    "end": "1458559"
  },
  {
    "text": "that let you see what change each one",
    "start": "1458559",
    "end": "1460480"
  },
  {
    "text": "made",
    "start": "1460480",
    "end": "1461440"
  },
  {
    "text": "and that lets you attribute blame",
    "start": "1461440",
    "end": "1466960"
  },
  {
    "text": "so thank you very much for listening to",
    "start": "1467840",
    "end": "1470240"
  },
  {
    "text": "my talk",
    "start": "1470240",
    "end": "1471760"
  },
  {
    "text": "again my name is nick i want to give a",
    "start": "1471760",
    "end": "1474000"
  },
  {
    "text": "big shout out to ellen korbs and sasha",
    "start": "1474000",
    "end": "1477120"
  },
  {
    "text": "mumbartz who",
    "start": "1477120",
    "end": "1478480"
  },
  {
    "text": "helped me put together this deck and",
    "start": "1478480",
    "end": "1480400"
  },
  {
    "text": "gave a lot of feedback on this talk that",
    "start": "1480400",
    "end": "1482240"
  },
  {
    "text": "helped make it a lot better than",
    "start": "1482240",
    "end": "1483919"
  },
  {
    "text": "what it was at the beginning i also want",
    "start": "1483919",
    "end": "1486720"
  },
  {
    "text": "to thank all the projects i featured in",
    "start": "1486720",
    "end": "1488159"
  },
  {
    "text": "this talk",
    "start": "1488159",
    "end": "1489039"
  },
  {
    "text": "client go cube cuddle helm and cube spy",
    "start": "1489039",
    "end": "1493039"
  },
  {
    "text": "i hope none of them think i was",
    "start": "1493039",
    "end": "1494240"
  },
  {
    "text": "criticizing them because i'm not i",
    "start": "1494240",
    "end": "1497120"
  },
  {
    "text": "think these are all awesome projects",
    "start": "1497120",
    "end": "1500720"
  },
  {
    "text": "and now we have some time for questions",
    "start": "1500720",
    "end": "1503840"
  },
  {
    "text": "so let's go to the questions",
    "start": "1503840",
    "end": "1507840"
  }
]