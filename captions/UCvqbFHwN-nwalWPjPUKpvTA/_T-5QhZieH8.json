[
  {
    "start": "0",
    "end": "210000"
  },
  {
    "text": "hi i'm ron welcome to my talk on threat modelling securing kubernetes infrastructure and deployment i'm the head of security",
    "start": "640",
    "end": "8000"
  },
  {
    "text": "at control plane and we're a consultancy specializing in cloud-native security out of london i'm also a contributor to the gke cis",
    "start": "8000",
    "end": "15280"
  },
  {
    "text": "benchmark and cncf financial user group kubernetes detectors i need to start by acknowledging that a",
    "start": "15280",
    "end": "22160"
  },
  {
    "text": "lot of the thought behind codified controls automated testing and compliance",
    "start": "22160",
    "end": "27199"
  },
  {
    "text": "and the role of attack trees presented here are those of john meadows who founded the cncf financial services",
    "start": "27199",
    "end": "33120"
  },
  {
    "text": "user group we were supposed to present together today but unfortunately couldn't owing to circumstances beyond our control",
    "start": "33120",
    "end": "39840"
  },
  {
    "text": "in this session today we're going to introduce threat modelling and threat modeling kubernetes we're going to show how your threat",
    "start": "39840",
    "end": "46000"
  },
  {
    "text": "model helps define your control sets subsequently we'll look at how tests associated with your threat model",
    "start": "46000",
    "end": "52640"
  },
  {
    "text": "and controls assist with sock integration and addressing compliance culture shock and we'll finish with some gotchas and a",
    "start": "52640",
    "end": "60359"
  },
  {
    "text": "tldr so to start with a baseline i'm going to very quickly describe the threat",
    "start": "60359",
    "end": "66159"
  },
  {
    "text": "modelling process with the 5ws and how in fact if this is all you take away from the talk and",
    "start": "66159",
    "end": "72880"
  },
  {
    "text": "act on with your own kubernetes implementations that's a good thing so what is",
    "start": "72880",
    "end": "78880"
  },
  {
    "text": "threat modeling it seems to be used interchangeably as a noun and a verb well the definition of threat",
    "start": "78880",
    "end": "85680"
  },
  {
    "text": "modeling will use takes the form of the verb and it's not just about defining the risks to the system",
    "start": "85680",
    "end": "90880"
  },
  {
    "text": "but about how they are addressed so why should we do any threat modeling at all",
    "start": "90880",
    "end": "96079"
  },
  {
    "text": "well threat modeling can prevent you from finding out about security issues when it's too late if done properly establishing a threat",
    "start": "96079",
    "end": "102880"
  },
  {
    "text": "modelling program provides the opportunity for the right kind of cloud kubernetes migration",
    "start": "102880",
    "end": "108399"
  },
  {
    "text": "where your developers drive from a capability and experience perspective and security compliance developers work",
    "start": "108399",
    "end": "114479"
  },
  {
    "text": "in tandem to enable that to secure compliant fashion using the threat model",
    "start": "114479",
    "end": "120159"
  },
  {
    "text": "effectively this means shifting security left in the development process and identifying the security",
    "start": "120159",
    "end": "125439"
  },
  {
    "text": "requirements for the developer so you should really start threat modeling as early as possible",
    "start": "125439",
    "end": "131200"
  },
  {
    "text": "as soon as a shared understanding of an architecture starts to develop you should be threat modelling this",
    "start": "131200",
    "end": "136480"
  },
  {
    "text": "provides real benefits if you find a security issue early and are able to change the architecture to",
    "start": "136480",
    "end": "141760"
  },
  {
    "text": "be more secure before anything has been implemented you'll have saved a huge amount of",
    "start": "141760",
    "end": "147599"
  },
  {
    "text": "rework and likely arrived at a more secure and usable implementation",
    "start": "147599",
    "end": "153280"
  },
  {
    "text": "if security issues are picked up later in the process you'll be trying to retrofit security into the architecture you may",
    "start": "153280",
    "end": "160239"
  },
  {
    "text": "be successful but the chances are you'll end up with a more complex and compromised solution",
    "start": "160239",
    "end": "166400"
  },
  {
    "text": "so threat modeling just doesn't stop with the first release once you've got an in-flight project with an existing threat model",
    "start": "166400",
    "end": "172560"
  },
  {
    "text": "when the tickets and features are defined for each release evaluate and update the threat model around those specific",
    "start": "172560",
    "end": "178800"
  },
  {
    "text": "features and tickets so who should contribute to your your threat model",
    "start": "178800",
    "end": "185519"
  },
  {
    "text": "basically everybody each day told us something to contribute and their own unique view of the world",
    "start": "185519",
    "end": "191440"
  },
  {
    "text": "now architects have a vision for the system if that system is already in use then",
    "start": "191440",
    "end": "198879"
  },
  {
    "text": "devops will know how that works in practice and they'll know about those little tricks and",
    "start": "198879",
    "end": "203920"
  },
  {
    "text": "deviations they have to get things working that may stray away from the the intended architecture",
    "start": "203920",
    "end": "212239"
  },
  {
    "text": "your security operations center your pentest teams your threat intelligence teams are also useful people to have on board",
    "start": "212239",
    "end": "220000"
  },
  {
    "text": "these people know about the tactics techniques and processes that attackers use bringing these teams to the threat",
    "start": "220000",
    "end": "226000"
  },
  {
    "text": "modeling sessions is critical after all these are the teams who are skilled at breaking into your systems",
    "start": "226000",
    "end": "231840"
  },
  {
    "text": "who better to validate your assumptions on what is secure another point to note here is that if",
    "start": "231840",
    "end": "237439"
  },
  {
    "text": "you are threat modelling in the existing system a powerful technique could be to take the threats you've identified",
    "start": "237439",
    "end": "243200"
  },
  {
    "text": "ask one of the pen testing team to attempt to exploit those threats it's a great validation of your threat",
    "start": "243200",
    "end": "249200"
  },
  {
    "text": "model if you start identifying threats with the real world evidence produced by",
    "start": "249200",
    "end": "255280"
  },
  {
    "text": "the pen testing teams last but not least include product",
    "start": "255280",
    "end": "260639"
  },
  {
    "text": "owners business analysts and internal users in your threat modeling sessions these",
    "start": "260639",
    "end": "266240"
  },
  {
    "text": "people know as much as there is to know about their data and they can help determine the boundary between",
    "start": "266240",
    "end": "271520"
  },
  {
    "text": "necessary business function and security now a few words of caution here if you",
    "start": "271520",
    "end": "278080"
  },
  {
    "text": "start workshopping with all of these stakeholders that only works best if they're completely familiar with the project",
    "start": "278080",
    "end": "284400"
  },
  {
    "text": "and the solution um i've been in a few sessions where that hasn't been the case and uh",
    "start": "284400",
    "end": "292560"
  },
  {
    "text": "frankly it's been chaos so if you need to arrange some preparatory",
    "start": "292560",
    "end": "298720"
  },
  {
    "text": "sessions to establish a baseline amongst all these individuals first always make sure that you have some",
    "start": "298720",
    "end": "304479"
  },
  {
    "text": "documentation or architecture diagrams available that detail how the system works to refer to during these sessions",
    "start": "304479",
    "end": "312479"
  },
  {
    "text": "also if you're threat modeling early early on with that t this set of stakeholders and",
    "start": "312800",
    "end": "318479"
  },
  {
    "text": "you've yet to define the architecture then just prepare to draw a lot of mock-up architecture diagrams",
    "start": "318479",
    "end": "325840"
  },
  {
    "text": "sadly threat modelling is really done best in a room with a whiteboard unfortunately as we all know it's just",
    "start": "326080",
    "end": "332400"
  },
  {
    "text": "not possible right now additionally if you're at a large organization",
    "start": "332400",
    "end": "337600"
  },
  {
    "text": "it's actually likely that your stakeholders will be globally distributed anyway so video conferencing it is and with",
    "start": "337600",
    "end": "345360"
  },
  {
    "text": "that you'll be at the mercy of the collaborative tooling that you're allowed to use by your organization",
    "start": "345360",
    "end": "351039"
  },
  {
    "text": "so be wary of that when you're planning your sessions",
    "start": "351039",
    "end": "355199"
  },
  {
    "start": "354000",
    "end": "636000"
  },
  {
    "text": "finally how does one actually perform a threat model well here's the basic threat modeling",
    "start": "356240",
    "end": "362800"
  },
  {
    "text": "processes defined by adam shostak and adopted by os there are four simple steps what are you",
    "start": "362800",
    "end": "369600"
  },
  {
    "text": "building what can go wrong once it's built what should you do about those things that can go wrong and did you do a",
    "start": "369600",
    "end": "375280"
  },
  {
    "text": "decent job of analysis so for the first thing what are you building steps all about information",
    "start": "375280",
    "end": "380639"
  },
  {
    "text": "gathering and context setting understanding the nature of the data criticality of the system what the architecture is and how it's",
    "start": "380639",
    "end": "386960"
  },
  {
    "text": "provisioned and maintained the second step is obviously the point at which vulnerabilities in the system",
    "start": "386960",
    "end": "392319"
  },
  {
    "text": "and resulting threats are identified and crucially prioritized following which you're going to create a backlog",
    "start": "392319",
    "end": "398240"
  },
  {
    "text": "of mitigating security requirements new architectures bug fixes and so forth in order to answer what should you do",
    "start": "398240",
    "end": "404560"
  },
  {
    "text": "about those things that could go wrong the final step is to identify whether you did a decent job of your threat model",
    "start": "404560",
    "end": "411120"
  },
  {
    "text": "so you're going to review the outputs from the previous three steps you're also going to incorporate external sources such as pen testing at",
    "start": "411120",
    "end": "418479"
  },
  {
    "text": "this point once a threat model has been established for a system it's this step that's repeated",
    "start": "418479",
    "end": "423599"
  },
  {
    "text": "just to make sure the answers to the first three questions are relevant to the system at the current point in time",
    "start": "423599",
    "end": "431840"
  },
  {
    "text": "that's quite it's all been quite abstract so far but uh what does this threat modeling",
    "start": "431840",
    "end": "438720"
  },
  {
    "text": "process look like for kubernetes well the four c's of cloud native",
    "start": "438720",
    "end": "444000"
  },
  {
    "text": "security are cloud clusters containers and code so to secure your full stack you're",
    "start": "444000",
    "end": "450560"
  },
  {
    "text": "gonna obviously need to consider the configuration of the cloud service provider the cluster what the container is comprised of and",
    "start": "450560",
    "end": "456880"
  },
  {
    "text": "how they configure to run and the security of application code itself",
    "start": "456880",
    "end": "462240"
  },
  {
    "text": "now we can broadly address the security of the latter three through the design of the cluster and",
    "start": "462240",
    "end": "468400"
  },
  {
    "text": "the ci cd pipeline and regardless regardless of whether you're a small or large organization",
    "start": "468400",
    "end": "474560"
  },
  {
    "text": "it's good practice to provide standardized components for application teams to consume so you'll provide a cluster for them to",
    "start": "474560",
    "end": "481120"
  },
  {
    "text": "use or a means to provision and scale their own clusters you'll define the baseline configuration",
    "start": "481120",
    "end": "487120"
  },
  {
    "text": "of that cluster and you'll place some restrictions on what that what applications can do in terms of configuring that cluster",
    "start": "487120",
    "end": "495758"
  },
  {
    "text": "you'll also obviously provide those application teams with a ci cd pipeline used to build container images and and",
    "start": "495840",
    "end": "502240"
  },
  {
    "text": "deploy those to your to your kubernetes cluster so for each of these patterns you're going",
    "start": "502240",
    "end": "508240"
  },
  {
    "text": "to end up creating reusable threat models and those threat models are going to",
    "start": "508240",
    "end": "513279"
  },
  {
    "text": "generally going to be along the lines of cluster provisioning and scaling cluster runtime cluster configuration",
    "start": "513279",
    "end": "519200"
  },
  {
    "text": "and then threat models for the application ci cd pipeline and the output to those threat models",
    "start": "519200",
    "end": "524560"
  },
  {
    "text": "will define the architecture of the standardized components and patterns your application teams",
    "start": "524560",
    "end": "529760"
  },
  {
    "text": "will use this all raises a really important point doing a runtime threat model",
    "start": "529760",
    "end": "537680"
  },
  {
    "text": "is not enough you need to ensure you think of the architectural solution from an end-to-end perspective",
    "start": "537680",
    "end": "544959"
  },
  {
    "text": "you need to ensure that you're truly thinking through things through right from the client experience through deployment",
    "start": "544959",
    "end": "551519"
  },
  {
    "text": "to help operation stuff utilize your your cluster solution you can have the",
    "start": "551519",
    "end": "557760"
  },
  {
    "text": "most secure system in the world at runtime but if it's exploited because you forgot about supply chain security and",
    "start": "557760",
    "end": "565200"
  },
  {
    "text": "and deploying the system in securely then uh you've wasted your time you really have to think this through",
    "start": "565200",
    "end": "571120"
  },
  {
    "text": "from an end-to-end perspective so defining what you're building any good architectural diagram will do",
    "start": "571120",
    "end": "578240"
  },
  {
    "text": "you can also use open source tools like cloud mapper to get as much info as possible on your environment",
    "start": "578240",
    "end": "586560"
  },
  {
    "text": "but just to mention data flow diagrams here data flow diagrams are really important really useful for breaking",
    "start": "586560",
    "end": "593519"
  },
  {
    "text": "down what you're building into flows processes trust boundaries and stores within a",
    "start": "593519",
    "end": "599279"
  },
  {
    "text": "system and once you have that depiction that makes a technique called stride which",
    "start": "599279",
    "end": "604480"
  },
  {
    "text": "i'll describe in a couple of slides that makes it a lot easier to do so if your architectural diagrams aren't",
    "start": "604480",
    "end": "609839"
  },
  {
    "text": "fit for purpose consider drawing a data flow diagram instead you can draw data flow diagrams",
    "start": "609839",
    "end": "615680"
  },
  {
    "text": "of a specific interaction like kubernetes pod launch or the whole system",
    "start": "615680",
    "end": "621200"
  },
  {
    "text": "like this depiction of a simple ci cd again you may need to create multiple",
    "start": "621200",
    "end": "628880"
  },
  {
    "text": "diagrams just to reflect uh the end to end the end-to-end solution",
    "start": "628880",
    "end": "636560"
  },
  {
    "start": "636000",
    "end": "805000"
  },
  {
    "text": "so now you have these architectural diagrams and you have all of this information",
    "start": "638000",
    "end": "643519"
  },
  {
    "text": "you need to start identifying what can go wrong now if you're experienced in the threat modeling and security space",
    "start": "643519",
    "end": "649120"
  },
  {
    "text": "then brainstorm to your heart's content annotate your architecture diagrams make copious notes as you let your",
    "start": "649120",
    "end": "655360"
  },
  {
    "text": "imagination run wild if you've not threat modelled before it will be helpful to use a straight",
    "start": "655360",
    "end": "661200"
  },
  {
    "text": "framework stride and pass pasta are two examples so strides in acronym stands for",
    "start": "661200",
    "end": "667519"
  },
  {
    "text": "spoofing tampering repudiation information disclosure denial of service",
    "start": "667519",
    "end": "673279"
  },
  {
    "text": "and elevation of privilege one can use stride to characterize and",
    "start": "673279",
    "end": "678880"
  },
  {
    "text": "identify the kinds of threats that affect processes data flows and stores within your system",
    "start": "678880",
    "end": "686160"
  },
  {
    "text": "and their most common and stride is most commonly applied or used in conjunction with data flow diagrams because as i",
    "start": "686160",
    "end": "691360"
  },
  {
    "text": "said earlier data flow diagrams and diagrams that do explicitly display",
    "start": "691360",
    "end": "696399"
  },
  {
    "text": "those processes data flows stores within your system",
    "start": "696399",
    "end": "701680"
  },
  {
    "text": "there are more other more explicit sources of threats for example the mitre attack matrix and",
    "start": "701680",
    "end": "708079"
  },
  {
    "text": "also reverse engineering benchmarks can also form a valuable source",
    "start": "708079",
    "end": "714160"
  },
  {
    "text": "one warning a thing to bear in mind is that you need to define when to stop identifying threats if",
    "start": "714160",
    "end": "721600"
  },
  {
    "text": "you're not careful you can threat model in an endless spiral of despair kicking out every issue out there",
    "start": "721600",
    "end": "729360"
  },
  {
    "text": "so when do you stop if you're experienced in this space and everybody is familiar with",
    "start": "729360",
    "end": "735920"
  },
  {
    "text": "kubernetes and cloud-native solutions you can time-box your activities because you'll know roughly when you're done",
    "start": "735920",
    "end": "742079"
  },
  {
    "text": "otherwise if you're threat modelling for the first time if you have one really good stride",
    "start": "742079",
    "end": "748079"
  },
  {
    "text": "attack per element represented in a data flow diagram that's an okay first pass finally when",
    "start": "748079",
    "end": "755839"
  },
  {
    "text": "you're identifying threats there are a great a wealth of great talks and existing threat models available within the",
    "start": "755839",
    "end": "761360"
  },
  {
    "text": "community and so it's no surprise that i'm gonna talk briefly about",
    "start": "761360",
    "end": "766480"
  },
  {
    "text": "cncf financial user group protectors so",
    "start": "766480",
    "end": "772079"
  },
  {
    "text": "in conjunction with other members of the cncf financial user group we treat modeled the whole kubernetes system by asking what can go wrong",
    "start": "772079",
    "end": "779200"
  },
  {
    "text": "we looked at attacks of the api server central d cubelets exploiting aspects of cni or",
    "start": "779200",
    "end": "786880"
  },
  {
    "text": "csi we looked at compromised workloads in the various permission permissive configurations that could be",
    "start": "786880",
    "end": "792800"
  },
  {
    "text": "accidentally granted we also looked at some cloud prime provider integration and meta",
    "start": "792800",
    "end": "797920"
  },
  {
    "text": "data api file attacks and these are tech trees are open sourced in github for your use",
    "start": "797920",
    "end": "805600"
  },
  {
    "start": "805000",
    "end": "980000"
  },
  {
    "text": "now attack trees are a highly useful threat modeling tool and you should use them whilst identifying your threats they provide a",
    "start": "806079",
    "end": "812240"
  },
  {
    "text": "formal methodical way of describing the security of systems based on varying attacks basically you",
    "start": "812240",
    "end": "817839"
  },
  {
    "text": "represent attacks against the system in a tree structure with the goal is the route mode and different ways of achieving that goal",
    "start": "817839",
    "end": "823920"
  },
  {
    "text": "as leaf notes attack trees were coined by bruce schneier in 99 and we've got a brief or simple example",
    "start": "823920",
    "end": "831199"
  },
  {
    "text": "of an attack tree to the right here it's simplified for the point of explanation attack trees can be quite",
    "start": "831199",
    "end": "837279"
  },
  {
    "text": "large and squarely difficult to present on powerpoint slides so we've got this approached version",
    "start": "837279",
    "end": "842959"
  },
  {
    "text": "here so to start drawing an attack tree you start with a negative outcome that you want to avoid",
    "start": "842959",
    "end": "848720"
  },
  {
    "text": "so in this case it's at the top and it's malicious code in the workload you subsequently ask how it could be",
    "start": "848720",
    "end": "855600"
  },
  {
    "text": "achieved to flesh out the rest of the tree to explain the key on the right",
    "start": "855600",
    "end": "861199"
  },
  {
    "text": "the shape of each node dictates whether the node is an and or at all and nodes require both",
    "start": "861199",
    "end": "867760"
  },
  {
    "text": "conditions joining the node from below to be true whilst all nodes indicate that what lies",
    "start": "867760",
    "end": "872880"
  },
  {
    "text": "beneath are multiple ways in which the node can be realized so one way",
    "start": "872880",
    "end": "880320"
  },
  {
    "text": "to have malicious code running as part of the kubernetes workload is to deploy a poison container image",
    "start": "880320",
    "end": "887920"
  },
  {
    "text": "and if you look below that node in order to deploy that poison container image",
    "start": "887920",
    "end": "893360"
  },
  {
    "text": "you need to poison the image within the container registry and the image needs to be deployed and",
    "start": "893360",
    "end": "898399"
  },
  {
    "text": "in this case it will be deployed as part of a normal release going further down the tree in",
    "start": "898399",
    "end": "903680"
  },
  {
    "text": "order to poison the image in the container registry you will obviously need to obtain the image pull secret",
    "start": "903680",
    "end": "909920"
  },
  {
    "text": "and you're relying on that pull secret having right and overripe privileges within the container registry",
    "start": "909920",
    "end": "916880"
  },
  {
    "text": "finally there are actually three different ways in which you could um obtain the image pull secret you",
    "start": "916880",
    "end": "923120"
  },
  {
    "text": "could make a commentators api request or you could use a running container with host",
    "start": "923120",
    "end": "928959"
  },
  {
    "text": "file system access thus accessing the password on the host or you can obtain it from a cubelet",
    "start": "928959",
    "end": "934480"
  },
  {
    "text": "using the unauthenticated port for example now attack tray trays are useful tools",
    "start": "934480",
    "end": "939920"
  },
  {
    "text": "for collaboration between dev teams and security security teams who aren't necessarily okay with all the cloud native",
    "start": "939920",
    "end": "946320"
  },
  {
    "text": "technologies often recognize the high level outcomes that must be avoided such as information disclosure um",
    "start": "946320",
    "end": "954320"
  },
  {
    "text": "uh extra data exfiltration and so on when these when the when security teams",
    "start": "954320",
    "end": "960240"
  },
  {
    "text": "are faced with new technologies they don't know exactly how they're achieved but a tech trees are a great way of fleshing this out with with technical",
    "start": "960240",
    "end": "966480"
  },
  {
    "text": "detail below and helps establish a common point of reference between development teams and security",
    "start": "966480",
    "end": "973759"
  },
  {
    "text": "when discussing the overall security posture of the of the system",
    "start": "973759",
    "end": "981199"
  },
  {
    "start": "980000",
    "end": "1406000"
  },
  {
    "text": "now if you don't want to use the tech trees as i said create tables or annotate your own diagrams",
    "start": "981199",
    "end": "986800"
  },
  {
    "text": "there's a threat model of a cluster at runtime it's not pretty but it's perfectly valid just labeled",
    "start": "986800",
    "end": "992160"
  },
  {
    "text": "all the things that could go wrong in an architecture diagram don't get too precious about your diagrams and architectures you will be",
    "start": "992160",
    "end": "998560"
  },
  {
    "text": "redrawing them and updating them countless times as you build your threat model so initially don't worry about your",
    "start": "998560",
    "end": "1004480"
  },
  {
    "text": "connections being a little bit off because you'll be redrawing those lines soon enough",
    "start": "1004480",
    "end": "1010240"
  },
  {
    "text": "now you've got a whole host of threats identified well what are you going to do about that well to define your control sets",
    "start": "1010240",
    "end": "1016959"
  },
  {
    "text": "evaluate and prioritize your threats then map controls directly onto them you",
    "start": "1016959",
    "end": "1022160"
  },
  {
    "text": "could end up with a particularly busy architecture diagram like so or you could annotate your attack trees",
    "start": "1022160",
    "end": "1028880"
  },
  {
    "text": "by breaking different branches with an appropriate control we'll talk a little bit more about the temperatures",
    "start": "1028880",
    "end": "1036839"
  },
  {
    "text": "later so when you look at selecting controls what controls do you have to choose from",
    "start": "1036839",
    "end": "1043520"
  },
  {
    "text": "well frankly there's loads here's a here's a quick menu of controls",
    "start": "1043520",
    "end": "1048880"
  },
  {
    "text": "just like any good menu don't order everything it will make you sick we'll talk about how you minimize",
    "start": "1048880",
    "end": "1055520"
  },
  {
    "text": "the number of controls you need to implement later so in the networking space if you're concerned about the compromise of",
    "start": "1055520",
    "end": "1061840"
  },
  {
    "text": "a container and subsequent pivot across the network is kubernetes network policy for starters",
    "start": "1061840",
    "end": "1067120"
  },
  {
    "text": "if you're running a service mesh then there's the ability to have the ingress and egress rules and access controls between workloads and layer 7.",
    "start": "1067120",
    "end": "1074559"
  },
  {
    "text": "initially you've got infra firewalls whether they whatever they may be called for your cloud provider be it security groups or kneckles or",
    "start": "1074559",
    "end": "1081760"
  },
  {
    "text": "simply just firewalls these will provide you with networking restrictions at the node and sublet",
    "start": "1081760",
    "end": "1087440"
  },
  {
    "text": "subnet layer level at layer 3 and 4. also some container native ids and ips",
    "start": "1087440",
    "end": "1093760"
  },
  {
    "text": "systems can now be configured to restrict the network connections made by running containers well worth considering",
    "start": "1093760",
    "end": "1101280"
  },
  {
    "text": "what controls can you use to constrain a compromised container at runtime maybe one that would attempt to",
    "start": "1101280",
    "end": "1107840"
  },
  {
    "text": "break out onto the host the first thing is just to get the basics right define a secure security",
    "start": "1107840",
    "end": "1113039"
  },
  {
    "text": "context for your pods and containers it's all the usual stuff run as non-route then allow privilege",
    "start": "1113039",
    "end": "1118320"
  },
  {
    "text": "escalation drop all your linux capabilities and use app armor profiles or sc linux if you can",
    "start": "1118320",
    "end": "1126320"
  },
  {
    "text": "container compatible ids and ips systems are pretty prevalent too to use them ones like falcon there are also paid",
    "start": "1126960",
    "end": "1133840"
  },
  {
    "text": "solutions that offer a lot more capability than just runtime protection with container image scanning and",
    "start": "1133840",
    "end": "1139120"
  },
  {
    "text": "mission control at all so if your oil likes to throw money at things then these are well worth using",
    "start": "1139120",
    "end": "1145919"
  },
  {
    "text": "just finally over the last few years sandbox and isolation technologies have started to emerge their implementations differ but the goal is",
    "start": "1146320",
    "end": "1153440"
  },
  {
    "text": "the same it's to isolate the running workload from the host's kernel as much as possible the three that are currently the most",
    "start": "1153440",
    "end": "1159280"
  },
  {
    "text": "prevalent are cata g visor and firecracker it's a space to watch with interest",
    "start": "1159280",
    "end": "1164880"
  },
  {
    "text": "there are currently a few limitations to investigate before you dive into using these for everything for example service mesh compatibility",
    "start": "1164880",
    "end": "1173120"
  },
  {
    "text": "so whether accidentally or maliciously your users are going to misconfigure your clusters",
    "start": "1173200",
    "end": "1178960"
  },
  {
    "text": "workloads or just accidentally break things again getting our back right is one of",
    "start": "1178960",
    "end": "1184000"
  },
  {
    "text": "the basics it's not easy though but thankfully there are plenty of open source tools to help on that front make sure you enable",
    "start": "1184000",
    "end": "1192000"
  },
  {
    "text": "the kubernetes admission controllers uh the cis benchmarks have uh recommendations on that front on what",
    "start": "1192000",
    "end": "1198720"
  },
  {
    "text": "you should enable and finally no talk on kubernetes our back or policy is complete these days",
    "start": "1198720",
    "end": "1204159"
  },
  {
    "text": "without mentioning the open policy agent provides the ability to enforce custom policy and appears to be the future in",
    "start": "1204159",
    "end": "1210559"
  },
  {
    "text": "the pod security policy space there are a couple of implementations you could use as admission controllers",
    "start": "1210559",
    "end": "1216240"
  },
  {
    "text": "so kubernetes native implementation in the form of gatekeeper you can still use a plain opa to enforce",
    "start": "1216240",
    "end": "1222080"
  },
  {
    "text": "your your other custom policy if you say wish",
    "start": "1222080",
    "end": "1226320"
  },
  {
    "text": "now the majority of the controls that i just mentioned are to protect your cluster from a compromised container it goes without saying that the most",
    "start": "1227440",
    "end": "1233600"
  },
  {
    "text": "important element in preventing this is embedding security within ci cd which is a torque in itself as a wealth",
    "start": "1233600",
    "end": "1239520"
  },
  {
    "text": "of information on security checks and tooling each stage of obtaining a build pipeline for just a note of increasing importance",
    "start": "1239520",
    "end": "1246080"
  },
  {
    "text": "and focus particularly within financial services is the ability to attest that a container image you have built",
    "start": "1246080",
    "end": "1252000"
  },
  {
    "text": "has been subject to all of the security tests implemented as part of your pipeline this involves collecting metadata from",
    "start": "1252000",
    "end": "1258240"
  },
  {
    "text": "each stage of your pipeline and validating it at cluster admission time graphic is paired with criticism and toto are the open",
    "start": "1258240",
    "end": "1264960"
  },
  {
    "text": "source technologies to consider in this space so you might read all of that you might",
    "start": "1264960",
    "end": "1272159"
  },
  {
    "text": "have a threat model with loads of threats in it and then you might pull together all of your controls decide to enforce the",
    "start": "1272159",
    "end": "1278799"
  },
  {
    "text": "defense in depth and end up with this an example cluster from the infra perspective",
    "start": "1278799",
    "end": "1284640"
  },
  {
    "text": "you can see how the infrastructure controls segregate nodes allowing one to enforce controls on",
    "start": "1284640",
    "end": "1290400"
  },
  {
    "text": "networking at the infrastructure level and theoretically segregating the cloud permissions a workload can access",
    "start": "1290400",
    "end": "1296159"
  },
  {
    "text": "at the instance level that's theoretical we'll touch on that later",
    "start": "1296159",
    "end": "1301360"
  },
  {
    "text": "the architecture gets even more complicated when you look at all the services and configuration that will need to be configured within",
    "start": "1301360",
    "end": "1307120"
  },
  {
    "text": "kubernetes itself my advice is not to do all of this particularly straight off the bat",
    "start": "1307120",
    "end": "1313280"
  },
  {
    "text": "unless you have a really really good reason to and your threat model will justify it",
    "start": "1313280",
    "end": "1319520"
  },
  {
    "text": "instead start simple after complement of these complementing control sets",
    "start": "1319520",
    "end": "1324960"
  },
  {
    "text": "there's absolutely no need to implement an entire category of controls to demonstrate defense in depth",
    "start": "1324960",
    "end": "1330000"
  },
  {
    "text": "your security architecture needs to be as simple as possible to mitigate the threats you've identified to an acceptable level",
    "start": "1330000",
    "end": "1336159"
  },
  {
    "text": "bear in mind the more security the more complex your security architecture becomes the more automation you need to",
    "start": "1336159",
    "end": "1341919"
  },
  {
    "text": "provision to both provision and automatically test clusters in effect there's the ability to",
    "start": "1341919",
    "end": "1346960"
  },
  {
    "text": "provision a cluster supporting services and run a full suite of tests from just one push of a button it's the only way to ensure that a",
    "start": "1346960",
    "end": "1353520"
  },
  {
    "text": "complex solution is maintainable and scalable so when choosing",
    "start": "1353520",
    "end": "1358799"
  },
  {
    "text": "the minimum set of controls risk has to be the determining factor prioritize the threats in your",
    "start": "1358799",
    "end": "1365360"
  },
  {
    "text": "threat model according to the risk they pose that will help you go from a lengthy list of threats to understanding",
    "start": "1365360",
    "end": "1371280"
  },
  {
    "text": "where to start first which threats are significant enough to eliminate at the starting set of controls required",
    "start": "1371280",
    "end": "1378080"
  },
  {
    "text": "at this point i'll again extol the virtue of the tech trees there's controls you devised",
    "start": "1378080",
    "end": "1383360"
  },
  {
    "text": "labeling and plotting them onto your attack trees as a means of breaking the branches are a great way of showing you",
    "start": "1383360",
    "end": "1389200"
  },
  {
    "text": "how your security controls can theoretically combine to stop attacks they'll also demonstrate another means",
    "start": "1389200",
    "end": "1395200"
  },
  {
    "text": "of defense in depth not by doubling up on controls for a certain category but showing how seemingly unrelated controls can",
    "start": "1395200",
    "end": "1401919"
  },
  {
    "text": "mitigate attackers from working their way through your system now automated testing is often",
    "start": "1401919",
    "end": "1407919"
  },
  {
    "start": "1406000",
    "end": "1586000"
  },
  {
    "text": "overlooked when implementing controls or codifying controls just like in mainstream software engineering you wouldn't dream of",
    "start": "1407919",
    "end": "1413919"
  },
  {
    "text": "releasing code without testing so too with codifying security you must write tests to validate the efficiency",
    "start": "1413919",
    "end": "1420400"
  },
  {
    "text": "of the control or the efficacy of the control if the first time your control is tested by the",
    "start": "1420400",
    "end": "1425760"
  },
  {
    "text": "attacker is at run time you're in for a bad day so the only way to validate control implementation",
    "start": "1425760",
    "end": "1430960"
  },
  {
    "text": "is to do so repeatedly using automated tests in some cases you may be able to focus",
    "start": "1430960",
    "end": "1436400"
  },
  {
    "text": "on implementing the controls in such a way that you can automatically test them at runtime in addition to the sdlc",
    "start": "1436400",
    "end": "1442799"
  },
  {
    "text": "this gives a continuous security monitoring capability it's like the holy grail of automated security",
    "start": "1442799",
    "end": "1449200"
  },
  {
    "text": "it's important to note you test the threat to be mitigated not the specific implementation you have",
    "start": "1449200",
    "end": "1454400"
  },
  {
    "text": "coded for your patrol in other words check to make sure you can't access your s3 bucket via http",
    "start": "1454400",
    "end": "1461600"
  },
  {
    "text": "rather than validating your code is as you expected while implementing it this is a common mistake often",
    "start": "1461600",
    "end": "1469520"
  },
  {
    "text": "encountered by junior developers who test their implementation or the happy path rather than truly",
    "start": "1469520",
    "end": "1474799"
  },
  {
    "text": "checking the intent of their code finally in the test space one potential",
    "start": "1474799",
    "end": "1480559"
  },
  {
    "text": "project to be aware of is proposal native security to secure kubernetes",
    "start": "1480559",
    "end": "1485679"
  },
  {
    "text": "end-to-end via configuration and codified controls tests for the",
    "start": "1485679",
    "end": "1491679"
  },
  {
    "text": "department of defense earlier in this talk we discussed the importance of",
    "start": "1491679",
    "end": "1496880"
  },
  {
    "text": "ensuring that you threat model from an end-to-end perspective and ensure that the sock and other",
    "start": "1496880",
    "end": "1503120"
  },
  {
    "text": "operational teams are involved well taking this to its logical conclusion we must implement",
    "start": "1503120",
    "end": "1508960"
  },
  {
    "text": "controls for our threat models and ensure we implement any appropriate detective controls with our soccer teams",
    "start": "1508960",
    "end": "1515919"
  },
  {
    "text": "also ensuring we have uh suitable automated testing in place",
    "start": "1515919",
    "end": "1521200"
  },
  {
    "text": "after all what good is a detective control if it isn't written appropriately to genuinely alert a sock team member or process",
    "start": "1521200",
    "end": "1528960"
  },
  {
    "text": "so step one do your threat model told you how to now off you go and do it",
    "start": "1528960",
    "end": "1535760"
  },
  {
    "text": "step two reproduce the attacks identified repeatedly against test clusters and",
    "start": "1535760",
    "end": "1540960"
  },
  {
    "text": "gather the signals step three take these signals and work with the sock to configure their",
    "start": "1540960",
    "end": "1547039"
  },
  {
    "text": "their seam tool you may need some training at this point",
    "start": "1547039",
    "end": "1552080"
  },
  {
    "text": "you may want to use your attack trees so your sock has situational awareness in order to",
    "start": "1552080",
    "end": "1557360"
  },
  {
    "text": "understand how the signals they're receiving relates to an attacker's path through your system",
    "start": "1557360",
    "end": "1563440"
  },
  {
    "text": "and so forth you'll probably need to review audit configurations during this step just to make sure logs are neither sort of too",
    "start": "1563440",
    "end": "1569360"
  },
  {
    "text": "full or too slim finally you want to rerun your test cases",
    "start": "1569360",
    "end": "1574640"
  },
  {
    "text": "and make sure the stock lights up and you want to keep iterating on this so as your system develops you'll",
    "start": "1574640",
    "end": "1580559"
  },
  {
    "text": "identify new threats you'll identify new detective controls you'll need to keep going back to the sock",
    "start": "1580559",
    "end": "1587279"
  },
  {
    "start": "1586000",
    "end": "1667000"
  },
  {
    "text": "so if your organization is new to cloud you're in the middle of a kubernetes implementation and you haven't thus far engaged the",
    "start": "1587279",
    "end": "1593520"
  },
  {
    "text": "compliance and infosec team be aware that they are likely to be in a state of absolute shock as they evaluate",
    "start": "1593520",
    "end": "1598559"
  },
  {
    "text": "your architecture for the first time you're going to need to approach them prepared scaring them straight into a no",
    "start": "1598559",
    "end": "1604880"
  },
  {
    "text": "is a real risk here so come armed with your security documentation and threat model",
    "start": "1604880",
    "end": "1610080"
  },
  {
    "text": "show them there's some precedent followed in terms of standards adhered to like the cis benchmarks for kubernetes",
    "start": "1610080",
    "end": "1615840"
  },
  {
    "text": "and related test results from qpench also note if you're in gcp is that",
    "start": "1615840",
    "end": "1621279"
  },
  {
    "text": "google have open sourced gke patterns that demonstrate adherence to pci dss",
    "start": "1621279",
    "end": "1626799"
  },
  {
    "text": "and i believe that's the subject of another talk here at qcon again if you're following this pattern",
    "start": "1626799",
    "end": "1632159"
  },
  {
    "text": "or using this pattern you're demonstrating precedent and adherence to standards you can also get one step ahead of the",
    "start": "1632159",
    "end": "1638640"
  },
  {
    "text": "curve by mapping controls to your compliance requirements thus your tests prove your compliance and you",
    "start": "1638640",
    "end": "1645919"
  },
  {
    "text": "move the assessment away from something that is just checklist based realistically though not all",
    "start": "1645919",
    "end": "1652480"
  },
  {
    "text": "requirements bestowed upon you by your organization will be testable or even applicable to cloud native",
    "start": "1652480",
    "end": "1657919"
  },
  {
    "text": "so if policy rewrites are required then use that as an opportunity to write policy in such a way",
    "start": "1657919",
    "end": "1663279"
  },
  {
    "text": "that compliance can be demonstrated with automated tests",
    "start": "1663279",
    "end": "1668320"
  },
  {
    "start": "1667000",
    "end": "1727000"
  },
  {
    "text": "she's going to finish with a couple of gotchas so i mentioned node segregation earlier on as a",
    "start": "1668320",
    "end": "1673840"
  },
  {
    "text": "as a tool for implementing security you can put firewall rules around your different nodes at the",
    "start": "1673840",
    "end": "1679760"
  },
  {
    "text": "infrastructure level you can also make sure that your nodes have different instance permissions",
    "start": "1679760",
    "end": "1684960"
  },
  {
    "text": "so that your workloads are are not able or only able to assume a",
    "start": "1684960",
    "end": "1691440"
  },
  {
    "text": "minimal set of roles so you could keep privileged roles on different notes well",
    "start": "1691440",
    "end": "1698159"
  },
  {
    "text": "that's still too much thinking along the happy path so tim mulchler and greg castle gave an excellent talk at",
    "start": "1698320",
    "end": "1704159"
  },
  {
    "text": "cubicon san diego on how using node segregation does not guarantee security within a kubernetes cluster",
    "start": "1704159",
    "end": "1710159"
  },
  {
    "text": "their demo showed attacks that included being able to reschedule malicious workloads on other nodes",
    "start": "1710159",
    "end": "1715520"
  },
  {
    "text": "these were historically possible and shouldn't be possible now but the talk is worth revisiting and taking into",
    "start": "1715520",
    "end": "1720799"
  },
  {
    "text": "account and deciding how important node segregation really is within your security architecture",
    "start": "1720799",
    "end": "1728559"
  },
  {
    "start": "1727000",
    "end": "1807000"
  },
  {
    "text": "so if you run a service mesh in your cluster it will need some linux capabilities that would not be authorized if you had",
    "start": "1728880",
    "end": "1736399"
  },
  {
    "text": "implemented a restrictive pod security policy so for example with istio",
    "start": "1736399",
    "end": "1741679"
  },
  {
    "text": "if you have an installation that does not use the istio cni plug-in which is still in alpha then istio init",
    "start": "1741679",
    "end": "1748399"
  },
  {
    "text": "containers will be run in each of the application pods and each of these require nat admin and",
    "start": "1748399",
    "end": "1754159"
  },
  {
    "text": "net raw linux capabilities now if i recall from about a year to 18 months ago",
    "start": "1754159",
    "end": "1760480"
  },
  {
    "text": "the istio containers back then ran with i believe maybe the privileged flag and root don't",
    "start": "1760480",
    "end": "1766960"
  },
  {
    "text": "quote me on that but it appears that things are much better now regardless you will still need to relax",
    "start": "1766960",
    "end": "1773360"
  },
  {
    "text": "your pods security policies to allow these capabilities now the",
    "start": "1773360",
    "end": "1778399"
  },
  {
    "text": "eagle-eyed among you will recall liz rice's talk from qcon 2019 in north america on the dangers of",
    "start": "1778399",
    "end": "1784880"
  },
  {
    "text": "capnet raw however the attack from that talk doesn't succeed within istio service",
    "start": "1784880",
    "end": "1790159"
  },
  {
    "text": "mesh hence the asterisk so regardless if you want to lock this down",
    "start": "1790159",
    "end": "1797279"
  },
  {
    "text": "the solution is to implement some custom policy using opa uh within a allow list",
    "start": "1797279",
    "end": "1803679"
  },
  {
    "text": "for istio containers so specifically largest gotcha of them",
    "start": "1803679",
    "end": "1808799"
  },
  {
    "start": "1807000",
    "end": "1890000"
  },
  {
    "text": "all is that large regulated organizations with existing on-prem infrastructure tend to take that mindset",
    "start": "1808799",
    "end": "1814320"
  },
  {
    "text": "into the cloud so be wary and keep in mind that introducing cloud native and kubernetes into a large regulated organization",
    "start": "1814320",
    "end": "1821360"
  },
  {
    "text": "requires as much of a cultural change as a technological change as you all know large regulated",
    "start": "1821360",
    "end": "1827440"
  },
  {
    "text": "organizations like financial services organizations have numerous compliance requirements",
    "start": "1827440",
    "end": "1832720"
  },
  {
    "text": "that results in security architectures that place special emphasis on a few areas strict change control standardization of",
    "start": "1832720",
    "end": "1839919"
  },
  {
    "text": "security architectures and extensive logging audit and protective monitoring requirements",
    "start": "1839919",
    "end": "1845360"
  },
  {
    "text": "unfortunately the byproducts of that focus over many years within an on-prem",
    "start": "1845360",
    "end": "1850399"
  },
  {
    "text": "environment have resulted in the following practices heavily manual change control processes",
    "start": "1850399",
    "end": "1855840"
  },
  {
    "text": "which are slow time and resource consuming our reliance on detective rather than",
    "start": "1855840",
    "end": "1860880"
  },
  {
    "text": "preventive controls within security architectures so an example of that would be the manual change control process that",
    "start": "1860880",
    "end": "1866720"
  },
  {
    "text": "involves admin click ops and then reliance on the sock to detect",
    "start": "1866720",
    "end": "1873279"
  },
  {
    "text": "any misconfiguration made by that admin after the event now neither of these practices are",
    "start": "1873279",
    "end": "1878640"
  },
  {
    "text": "particularly secure maintainable or scalable within cloud and so obviously red flags to be wary of as you",
    "start": "1878640",
    "end": "1884720"
  },
  {
    "text": "start your migration to kubernetes or cloud",
    "start": "1884720",
    "end": "1889760"
  },
  {
    "text": "so in short i know we're running a little bit over threat model do it early on get everyone involved",
    "start": "1890880",
    "end": "1896399"
  },
  {
    "text": "keep it up to date draw attack trees they're really useful they break down high level threat outcomes into discrete steps",
    "start": "1896399",
    "end": "1903200"
  },
  {
    "text": "providing a great resource for security and for writing tests they allow you to determine the controls",
    "start": "1903200",
    "end": "1908399"
  },
  {
    "text": "needed to secure your solution without over-egging the cake they provide they",
    "start": "1908399",
    "end": "1913440"
  },
  {
    "text": "also provide a great source of situational awareness for the sock make sure you apply and test your",
    "start": "1913440",
    "end": "1919360"
  },
  {
    "text": "controls in an automated fashion remembering to test the threat the control mitigates not the implementation",
    "start": "1919360",
    "end": "1925440"
  },
  {
    "text": "of the control itself and once you've done all of this you'll be able to run these automated tests against test",
    "start": "1925440",
    "end": "1932320"
  },
  {
    "text": "infrastructures so that integrating with the sock should be relatively easy",
    "start": "1932320",
    "end": "1937519"
  },
  {
    "text": "so we're finished with the obligatory hiring slide and thanks for attending the talk",
    "start": "1937519",
    "end": "1945679"
  }
]