[
  {
    "start": "0",
    "end": "136000"
  },
  {
    "text": "hello yes thank you for coming this afternoon we want to talk about",
    "start": "410",
    "end": "8550"
  },
  {
    "text": "something that I think at least everyone I talked to is kubernetes is great and",
    "start": "8550",
    "end": "14780"
  },
  {
    "text": "lots of good solutions going on but how can you have a serious platform if you",
    "start": "14780",
    "end": "20400"
  },
  {
    "text": "have no backup and recovery so I my",
    "start": "20400",
    "end": "25830"
  },
  {
    "text": "background I'm from Red Hat and that clue and I have been working with kubernetes and and storage solutions for",
    "start": "25830",
    "end": "32189"
  },
  {
    "text": "the last couple years so let Dylan introduce himself hi my name is Dylan",
    "start": "32189",
    "end": "38399"
  },
  {
    "text": "Murray I've been a Red Hat for about four years now working mainly on open shift and today I'm focused on mnship",
    "start": "38399",
    "end": "45300"
  },
  {
    "text": "migration which has been using Valero and rustic for our cluster migration use",
    "start": "45300",
    "end": "51090"
  },
  {
    "text": "case yeah so what happened was I thought this was sort of a serious thing that we",
    "start": "51090",
    "end": "57449"
  },
  {
    "text": "should solve so I had been working a lot with rook stuff and with new bow which you'll hear more about which is a multi",
    "start": "57449",
    "end": "64799"
  },
  {
    "text": "cloud gateway for for s3 service and so I contacted Dylan's Matt I didn't even",
    "start": "64799",
    "end": "72000"
  },
  {
    "text": "know Dylan at the time I contacted Dylan's manager because I knew about the effort had been working with them I said",
    "start": "72000",
    "end": "77130"
  },
  {
    "text": "I think we should do something a Q Khan and he said well I I don't I don't like",
    "start": "77130",
    "end": "82409"
  },
  {
    "text": "to travel too much but I got this really smart guy doing and if you want to",
    "start": "82409",
    "end": "87450"
  },
  {
    "text": "collaborate with him so Dylan and I put in the abstract thinking we know these technologies should work",
    "start": "87450",
    "end": "93150"
  },
  {
    "text": "together but we didn't really know we get accepted so after that we decided to",
    "start": "93150",
    "end": "98909"
  },
  {
    "text": "do a proof of concept and also I think by the end of the session you'll see that we were able to prove that our",
    "start": "98909",
    "end": "105720"
  },
  {
    "text": "hypothesis is accurate and you might find it an interesting solution for you",
    "start": "105720",
    "end": "111450"
  },
  {
    "text": "all right well I'll pass it over to Dylan oh just real quick on the overview we're",
    "start": "111450",
    "end": "118439"
  },
  {
    "text": "going to go through Valero do a bit on rook talk about nuba which is a multi cloud",
    "start": "118439",
    "end": "124439"
  },
  {
    "text": "gateway for s3 object service and look is sort of what we're going to do in the",
    "start": "124439",
    "end": "131009"
  },
  {
    "text": "demo and then actually do a demo using kubernetes and and all these technologies all right thanks so what",
    "start": "131009",
    "end": "139950"
  },
  {
    "start": "136000",
    "end": "454000"
  },
  {
    "text": "actually is bolero well at its core it's a backup/restore tool for applications",
    "start": "139950",
    "end": "146010"
  },
  {
    "text": "that are running on kubernetes it's primarily focused on three use cases disaster recovery data migration and",
    "start": "146010",
    "end": "152489"
  },
  {
    "text": "then data protection so the project's been around for about three and a half years or so at about 120 contributors",
    "start": "152489",
    "end": "159150"
  },
  {
    "text": "and growing and recently celebrated their one to release excellent team to",
    "start": "159150",
    "end": "164340"
  },
  {
    "text": "work with we've been using Valero and rustic pretty heavily for my team's use case and it's Matassa community to work",
    "start": "164340",
    "end": "170430"
  },
  {
    "text": "with it used to be called arc back when hekia was still around so I hear a lot",
    "start": "170430",
    "end": "176370"
  },
  {
    "text": "of people today still say oh you mean arc pepto arc but it's now under VMware it's called Valero so you can basically",
    "start": "176370",
    "end": "186030"
  },
  {
    "text": "bake up or break up the back of the rostral process and the two components for Valero it operates on the",
    "start": "186030",
    "end": "191910"
  },
  {
    "text": "community's resources itself and then also the persistent volume data so Valero extends the communities API and",
    "start": "191910",
    "end": "198720"
  },
  {
    "text": "it's runs as a conveyance controller and it's watching for the creation of backup and restore objects and wouldn't",
    "start": "198720",
    "end": "205739"
  },
  {
    "text": "actually detects the creation of these resources it runs the reconciliation process based on the specified criteria to do the",
    "start": "205739",
    "end": "212880"
  },
  {
    "text": "backup or restore workflow so on the resource front for simplicity you can",
    "start": "212880",
    "end": "220799"
  },
  {
    "text": "basically think of it as if I took the object definition and dumped it out with",
    "start": "220799",
    "end": "225870"
  },
  {
    "text": "the Amalur JSON and then stored that somewhere then at restore time or just",
    "start": "225870",
    "end": "230880"
  },
  {
    "text": "trying to recreate or replay that object on the cluster obviously it's not that",
    "start": "230880",
    "end": "235920"
  },
  {
    "text": "simple but falero is going to do some of the heavy lifting of removing the status of resource and removing some metadata",
    "start": "235920",
    "end": "241620"
  },
  {
    "text": "fields that would otherwise not allow you to replay the object on the cluster then for some customization you from the",
    "start": "241620",
    "end": "249950"
  },
  {
    "text": "application front you can customize using hooks so a perfect example of one",
    "start": "249950",
    "end": "255180"
  },
  {
    "text": "you want to use a hook would be say your pod was a Postgres database and the post-crisis database obviously puts a",
    "start": "255180",
    "end": "261780"
  },
  {
    "text": "lock when it's running you may have the requirement that priority backup you're gonna have a hook",
    "start": "261780",
    "end": "268580"
  },
  {
    "text": "on the pod that's actually going to run a file system freeze then customization on a resource specific case I can tell",
    "start": "268580",
    "end": "276500"
  },
  {
    "text": "you how my team uses this is you know open shift routes they have sub domains",
    "start": "276500",
    "end": "281660"
  },
  {
    "text": "that change based on where the clusters are where the actual resources being replayed on so our plugin will actually",
    "start": "281660",
    "end": "288890"
  },
  {
    "text": "go and do a subdomain swap on the route every one time so on the persistent",
    "start": "288890",
    "end": "295490"
  },
  {
    "text": "volume front you kind of have two ways to do this if you have volumes that are",
    "start": "295490",
    "end": "300680"
  },
  {
    "text": "provided by a cloud provider so think abs is your GCP port work situation then",
    "start": "300680",
    "end": "308930"
  },
  {
    "text": "Valero is actually going to use their native snapshot API and so in that case the precision volume data will actually",
    "start": "308930",
    "end": "314360"
  },
  {
    "text": "be stored on the specified cloud provider then for all other types of volumes you can fall back to a file",
    "start": "314360",
    "end": "319880"
  },
  {
    "text": "system based approach using a tool called rustic and rustic is essentially just a file system copy but it also has",
    "start": "319880",
    "end": "327080"
  },
  {
    "text": "the duplication for added efficiency so",
    "start": "327080",
    "end": "332150"
  },
  {
    "text": "talk a little bit more about rustic how actually works from the user perspective is any volumes that the user wants to",
    "start": "332150",
    "end": "338510"
  },
  {
    "text": "back up with rustic you're gonna find the Associated pods and now those pods you're gonna add a specific annotation",
    "start": "338510",
    "end": "344660"
  },
  {
    "text": "and the annotation is going to include the list of volumes that you want to backup at runtime and then when velaro",
    "start": "344660",
    "end": "351830"
  },
  {
    "text": "is actually running through the backup and it finds this annotation it goes and creates a pod volume backup resource and",
    "start": "351830",
    "end": "357290"
  },
  {
    "text": "that's another custom resource that's part of the valero installation and when rustic sees the creation of a pod volume",
    "start": "357290",
    "end": "363680"
  },
  {
    "text": "backup it's simply gonna go find the volume perform the filesystem back up and store the data into object storage",
    "start": "363680",
    "end": "370060"
  },
  {
    "text": "then I'm restore it's pretty much the opposite if it finds that a restore",
    "start": "370060",
    "end": "375650"
  },
  {
    "text": "isn't associated pod volume back up flower crates the pod volume restore and rustic is going to run a restore on that",
    "start": "375650",
    "end": "382580"
  },
  {
    "text": "person's volume data so I mention object storage every velaro installation needs",
    "start": "382580",
    "end": "388400"
  },
  {
    "text": "an Associated backup storage location and this backup storage location is some form of object storage most typically",
    "start": "388400",
    "end": "396470"
  },
  {
    "text": "it's an s3 compatible endpoint that falero is talking to so in our case",
    "start": "396470",
    "end": "401630"
  },
  {
    "text": "for this demo you're gonna see later we use nuba but you can also use AWS s3 Mineo which is an open source solution",
    "start": "401630",
    "end": "409670"
  },
  {
    "text": "to stand up an s3 bucket then there is also a zero blob storage Google Cloud storage I've been a bunch of community",
    "start": "409670",
    "end": "416210"
  },
  {
    "text": "maintained providers and then the persistent volume data if it's using rustic will actually be stored in this",
    "start": "416210",
    "end": "422780"
  },
  {
    "text": "object storage if it's from the cloud provider as I mentioned before it'll just be stored on that then lastly the",
    "start": "422780",
    "end": "430340"
  },
  {
    "text": "as I mentioned it's extending the kameez API so it's fully integrated if you want",
    "start": "430340",
    "end": "435800"
  },
  {
    "text": "to actually use cube cuddle to look at the backup resources and create backup resources but Valera also ships with the",
    "start": "435800",
    "end": "442490"
  },
  {
    "text": "CLI tool and the CLI tool kind of abstracts some of the necessaries respect information that you have to",
    "start": "442490",
    "end": "448640"
  },
  {
    "text": "fill out so I find it very useful and I would definitely recommend it so now I'll turn over to Annette talk about",
    "start": "448640",
    "end": "454700"
  },
  {
    "start": "454000",
    "end": "903000"
  },
  {
    "text": "rook yeah so when we were looking at putting this solution together I had",
    "start": "454700",
    "end": "461660"
  },
  {
    "text": "done a lot of work with with rooks F and we needed storage especially for the",
    "start": "461660",
    "end": "468950"
  },
  {
    "text": "applications that we were going to test with this we needed storage we also thought at the time that we would look",
    "start": "468950",
    "end": "476480"
  },
  {
    "text": "at the container storage interface herself so I'll go into that a little more but rook is essentially a storage",
    "start": "476480",
    "end": "484220"
  },
  {
    "text": "operator in particular it has multiple storage types that it can orchestrate",
    "start": "484220",
    "end": "490510"
  },
  {
    "text": "the one that I'm most familiar with this stuff so it's an open source project it",
    "start": "490510",
    "end": "497830"
  },
  {
    "text": "started about three years ago is currently a CNC F project incubation",
    "start": "497830",
    "end": "504890"
  },
  {
    "text": "project as of about a year ago and it works you know within the kubernetes",
    "start": "504890",
    "end": "510980"
  },
  {
    "text": "framework you know there's an operator there's a cluster custom resource",
    "start": "510980",
    "end": "518930"
  },
  {
    "text": "so it in terms of working with kubernetes it's a very good fit so just",
    "start": "518930",
    "end": "526940"
  },
  {
    "text": "like any operator you know you're gonna have your different resources pools objects store",
    "start": "526940",
    "end": "534319"
  },
  {
    "text": "storage cluster and as an operator and what's really nice with stuff if you've",
    "start": "534319",
    "end": "540749"
  },
  {
    "text": "ever dealt with soft as the storage type stuff can be sort of complicated it has",
    "start": "540749",
    "end": "547199"
  },
  {
    "text": "a lot of knobs so with an operator orchestrating stuff you basically turn",
    "start": "547199",
    "end": "552870"
  },
  {
    "text": "the knobs a particular way via the the cluster CR and then you deploy South",
    "start": "552870",
    "end": "562189"
  },
  {
    "text": "containerized and those knobs are already decided so the the user for the",
    "start": "562189",
    "end": "568559"
  },
  {
    "text": "most part doesn't have to learn all the complexities of stuff and how to tune it the the idea is that you you tune it",
    "start": "568559",
    "end": "575970"
  },
  {
    "text": "ahead of time and then you deploy it that way and some things not all things",
    "start": "575970",
    "end": "581550"
  },
  {
    "text": "but some things if you try to change it it's gonna get changed back so that's you know it's always watching for what",
    "start": "581550",
    "end": "588779"
  },
  {
    "text": "the desire to say it is and like I said if the desired state is not there it would move it back to that so just a",
    "start": "588779",
    "end": "599279"
  },
  {
    "text": "sort of an example there in terms of the architecture we have on on the left",
    "start": "599279",
    "end": "607040"
  },
  {
    "text": "you know the clusters the objects or the things that we want to do in terms of",
    "start": "607040",
    "end": "612649"
  },
  {
    "text": "Stan shading it and then we're gonna give it it to to kubernetes then we're",
    "start": "612649",
    "end": "618120"
  },
  {
    "text": "gonna get resources out of that that will become essentially what what the",
    "start": "618120",
    "end": "625769"
  },
  {
    "text": "you know the the pods and things like that that make up stuff and then we now",
    "start": "625769",
    "end": "635040"
  },
  {
    "text": "have also with the CSI driver again we did not use the CSI driver in this case",
    "start": "635040",
    "end": "640350"
  },
  {
    "text": "for doing snapshot part of that is because and I think this is going to",
    "start": "640350",
    "end": "647910"
  },
  {
    "text": "change over time but right now if you snapshot your snapshotting into SEF you still need to then mount that volume",
    "start": "647910",
    "end": "655740"
  },
  {
    "text": "somewhere and get the data out and copy it somewhere else other than",
    "start": "655740",
    "end": "660890"
  },
  {
    "text": "so that if you need to restore you you have the data so by doing what Dylan",
    "start": "660890",
    "end": "667190"
  },
  {
    "text": "went over using rustic we essentially moved the data and the volume directly into into our backup target without",
    "start": "667190",
    "end": "675920"
  },
  {
    "text": "going through SEF so here's just say what the custom resource definition",
    "start": "675920",
    "end": "683750"
  },
  {
    "text": "could look like for the cluster C are some important things there are the",
    "start": "683750",
    "end": "689240"
  },
  {
    "text": "sufferers and what's really nice about you know using this type of storage",
    "start": "689240",
    "end": "695930"
  },
  {
    "text": "operator is that as soon as you go from one version ACEF to the other so you",
    "start": "695930",
    "end": "701810"
  },
  {
    "text": "literally go in and edit the the cluster custom resource you go from one version",
    "start": "701810",
    "end": "707870"
  },
  {
    "text": "and stuff to the other and you have essentially upgraded stuff it'll do a rolling update this can be done even",
    "start": "707870",
    "end": "715490"
  },
  {
    "text": "when you have you know application iOS going on it'll do a rolling upgrade you",
    "start": "715490",
    "end": "723740"
  },
  {
    "text": "still probably do it during a maintenance window if you had large rook self environment so there the other",
    "start": "723740",
    "end": "733310"
  },
  {
    "text": "thing there use all notes this is a good I guess thing to do in a POC you have to",
    "start": "733310",
    "end": "738380"
  },
  {
    "text": "be careful but essentially what that does is that if you've created your",
    "start": "738380",
    "end": "744470"
  },
  {
    "text": "cluster and you if you're familiar with kubernetes you add another node if that node has storage available it",
    "start": "744470",
    "end": "751520"
  },
  {
    "text": "immediately gets seen by the by the operator and it adds it to the soft clustering",
    "start": "751520",
    "end": "756650"
  },
  {
    "text": "so like I said you have to be careful because sometimes you don't want storage add it to the stuff cluster but it'll",
    "start": "756650",
    "end": "762080"
  },
  {
    "text": "just sort of gobble up everything so so",
    "start": "762080",
    "end": "767300"
  },
  {
    "text": "what is new boom nuba might be new nuba might be new to some of you it's",
    "start": "767300",
    "end": "774800"
  },
  {
    "text": "recently an open source project and if you search we have some references at",
    "start": "774800",
    "end": "780200"
  },
  {
    "text": "the end NUMA - core and you'll see the the",
    "start": "780200",
    "end": "785510"
  },
  {
    "text": "github and all of the information there so what it is at you know sort of a",
    "start": "785510",
    "end": "792410"
  },
  {
    "text": "simple idea is it sits it's a multi-cloud gateway that is doing",
    "start": "792410",
    "end": "798410"
  },
  {
    "text": "object service s3 object service and it's it's a relatively sort of simple",
    "start": "798410",
    "end": "806269"
  },
  {
    "text": "idea but it's it's quite powerful which is that you can have back what's called",
    "start": "806269",
    "end": "811609"
  },
  {
    "text": "backing store Anubha you can have different backing store across multiple",
    "start": "811609",
    "end": "816980"
  },
  {
    "text": "clouds and even multiple types of storage so you could even have in the case of the demo we're going to show we",
    "start": "816980",
    "end": "823999"
  },
  {
    "text": "just have the the Nuba backing store different storage devices on the machines who are using so we the rook",
    "start": "823999",
    "end": "832040"
  },
  {
    "text": "stuff is using some of the storage devices and nuba is using the other ones so it could be storage devices",
    "start": "832040",
    "end": "839389"
  },
  {
    "text": "it could be EBS volumes it could be you know in any of the cloud storage types",
    "start": "839389",
    "end": "845899"
  },
  {
    "text": "so it's very flexible if you add to that now that you can have bucket classes",
    "start": "845899",
    "end": "853879"
  },
  {
    "text": "these are our kubernetes resources so you can have a bucket class similar to a",
    "start": "853879",
    "end": "860269"
  },
  {
    "text": "stores class that has a policy in it that says you know for for this this if",
    "start": "860269",
    "end": "866299"
  },
  {
    "text": "you specify creating a bucket using this bucket class then you will get this kind",
    "start": "866299",
    "end": "871879"
  },
  {
    "text": "of policy and the policy might be you know I want to do mirroring across these these different clouds or I want to",
    "start": "871879",
    "end": "878419"
  },
  {
    "text": "spread the data in a particular way so the idea of a multi cloud gateway in",
    "start": "878419",
    "end": "885049"
  },
  {
    "text": "this case is truly that is that you have your your your data your objects spread",
    "start": "885049",
    "end": "892309"
  },
  {
    "text": "across multiple clouds as well as on Prem and this is all done via the the",
    "start": "892309",
    "end": "899179"
  },
  {
    "text": "the bucket class definition so what we",
    "start": "899179",
    "end": "905839"
  },
  {
    "start": "903000",
    "end": "1053000"
  },
  {
    "text": "want to do now sort of transition into our demo because want to show how this is real and we do have plans it's not we",
    "start": "905839",
    "end": "914809"
  },
  {
    "text": "don't have a link here we have plans of uploading this to YouTube and having",
    "start": "914809",
    "end": "920480"
  },
  {
    "text": "sort of how we put that put it together as well as just showing you how it works but right now what I want to do is just",
    "start": "920480",
    "end": "926509"
  },
  {
    "text": "go through quickly what what we're doing so in our case we",
    "start": "926509",
    "end": "931709"
  },
  {
    "text": "just created one namespace project and it's a a wordpress app using a my sequel",
    "start": "931709",
    "end": "942260"
  },
  {
    "text": "back-end and each of them have persistent storage that persistent storage was claimed using a rooks",
    "start": "942260",
    "end": "950690"
  },
  {
    "text": "f-block storage class so the the persistent",
    "start": "950690",
    "end": "955800"
  },
  {
    "text": "volumes are on on rook stuff so then",
    "start": "955800",
    "end": "961640"
  },
  {
    "text": "going to go ahead and use WordPress to add an article then do a backup via",
    "start": "961640",
    "end": "968610"
  },
  {
    "text": "Valero which will be shown here prior to that we're going to do some annotation and try to tell rustic what needs to",
    "start": "968610",
    "end": "976200"
  },
  {
    "text": "backup and then do a backup then bad things happen using a very simple thing",
    "start": "976200",
    "end": "985290"
  },
  {
    "text": "like cube kettle delete namespace we're going to basically remove all of the",
    "start": "985290",
    "end": "991680"
  },
  {
    "text": "resources from open stuff for that namespace and we'll we'll validate that it's gone",
    "start": "991680",
    "end": "998540"
  },
  {
    "text": "once it's gone going to go ahead and do a restore and the restore is and and I",
    "start": "998540",
    "end": "1009320"
  },
  {
    "text": "didn't mention it and the prior thing but but the target for the the the backup is Anubha so velaro is configured",
    "start": "1009320",
    "end": "1018560"
  },
  {
    "text": "to use an s3 bucket the s3 bucket is on nuba so we're going to actually restore from nuba and get the get the namespace",
    "start": "1018560",
    "end": "1028400"
  },
  {
    "text": "back and see if it works so I think with that you want to go ahead okay so",
    "start": "1028400",
    "end": "1040550"
  },
  {
    "text": "Dylan's gonna go ahead and do a demo for you and it's recorded there's a lot of",
    "start": "1040550",
    "end": "1047089"
  },
  {
    "text": "moving pieces here so we just didn't want to take the chance that the network was faulty and have some issues with",
    "start": "1047089",
    "end": "1053450"
  },
  {
    "start": "1053000",
    "end": "1120000"
  },
  {
    "text": "that yeah I know better than I do alive all right so you know obviously the",
    "start": "1053450",
    "end": "1060770"
  },
  {
    "text": "primary tool being used in this demo is Valero but let's go ahead and show you what that actually looks like on the",
    "start": "1060770",
    "end": "1066260"
  },
  {
    "text": "cluster so the Valero namespace consists of a rustic daemon set and a Valero",
    "start": "1066260",
    "end": "1071300"
  },
  {
    "text": "deployment so rustic is running on every node in the cluster and the Valero is just running in a single pod and then",
    "start": "1071300",
    "end": "1078380"
  },
  {
    "text": "let's also show you what the might sorry the WordPress application looks like which is back on my sequel so we have",
    "start": "1078380",
    "end": "1084380"
  },
  {
    "text": "two pods you have the WordPress pod and the my sequel pod and each pod has a",
    "start": "1084380",
    "end": "1090320"
  },
  {
    "text": "persistent volume associated with them so let's take a look at the PVCs you can",
    "start": "1090320",
    "end": "1098780"
  },
  {
    "text": "see that the CSI RBD storage class has provision them and I can now show you",
    "start": "1098780",
    "end": "1104660"
  },
  {
    "text": "what the actual persistent volumes look like to prove you that their set values for vision by Brooke so it would stump",
    "start": "1104660",
    "end": "1114320"
  },
  {
    "text": "out the PD definition you can see the annotation provision by Brooke stuff",
    "start": "1114320",
    "end": "1120010"
  },
  {
    "start": "1120000",
    "end": "1194000"
  },
  {
    "text": "okay and so now let's show you the Nuba console and you know as Annette just",
    "start": "1120550",
    "end": "1126679"
  },
  {
    "text": "mentioned Valera was installed with a backup storage location that points to an s3 bucket on nuba and we'll show you",
    "start": "1126679",
    "end": "1134870"
  },
  {
    "text": "that in a second so this is the Nuba console and in here we can go and click on the buckets tab and we have the",
    "start": "1134870",
    "end": "1142190"
  },
  {
    "text": "bucket name Valero and you can see that it's got zero objects inside of it so it's completely empty now let's log into",
    "start": "1142190",
    "end": "1149330"
  },
  {
    "text": "the WordPress app show you what that looks like so here's the admin home page",
    "start": "1149330",
    "end": "1155330"
  },
  {
    "text": "but let's see what the actual home page has any articles on it and I think we just have hello world so let's go ahead",
    "start": "1155330",
    "end": "1161840"
  },
  {
    "text": "and actually add our own cue con article",
    "start": "1161840",
    "end": "1166960"
  },
  {
    "text": "any second now",
    "start": "1168700",
    "end": "1172179"
  },
  {
    "text": "all right so we'll fill this new post and publish it and now that it's",
    "start": "1184530",
    "end": "1195270"
  },
  {
    "start": "1194000",
    "end": "1339000"
  },
  {
    "text": "published we're actually you know we've stored some new data in my sequel so what we're expecting to see here is",
    "start": "1195270",
    "end": "1202140"
  },
  {
    "text": "after we create it back up and delete the namespace and restore we should see that article there otherwise everything",
    "start": "1202140",
    "end": "1208470"
  },
  {
    "text": "we're saying isn't true right so the next thing that we need to",
    "start": "1208470",
    "end": "1213600"
  },
  {
    "text": "do is since we have purses and volumes that were going to back up using rustic",
    "start": "1213600",
    "end": "1218820"
  },
  {
    "text": "the first thing we have to do is annotate those pots right so we have two pods with two purses and volumes so",
    "start": "1218820",
    "end": "1225000"
  },
  {
    "text": "that's one annotation on each pod you'll see the annotation looks like it's back",
    "start": "1225000",
    "end": "1230160"
  },
  {
    "text": "up top Valero dot io / backup volumes and then it takes in a comma-separated list so since I only have one volume",
    "start": "1230160",
    "end": "1237210"
  },
  {
    "text": "here that I'm trying to back up you can see it's my sequel persistent storage I'll go ahead and annotate that my",
    "start": "1237210",
    "end": "1242220"
  },
  {
    "text": "sequel pod and now let's go ahead and at ap WordPress pod you can see the name of",
    "start": "1242220",
    "end": "1252630"
  },
  {
    "text": "this volume is just WordPress persistent storage so now that both pods are",
    "start": "1252630",
    "end": "1258570"
  },
  {
    "text": "annotated there's nothing left to do other than creating the Valero backup co so to do this as I mentioned before you",
    "start": "1258570",
    "end": "1266100"
  },
  {
    "text": "can use you know cube cuddle and create your own backup definition but I really like using the Vallejo CLI it's a lot",
    "start": "1266100",
    "end": "1272340"
  },
  {
    "text": "simpler and it allows me to include this flag include namespaces the thing might",
    "start": "1272340",
    "end": "1277920"
  },
  {
    "text": "be cut off a little the top but I'm gonna specify just one namespace my sequel WordPress then we're again given",
    "start": "1277920",
    "end": "1283650"
  },
  {
    "text": "a name which in this case will be WordPress cute comm all right so the",
    "start": "1283650",
    "end": "1290700"
  },
  {
    "text": "backups crated we can view the backup using the CLI describe it and this is actually going to essentially list the",
    "start": "1290700",
    "end": "1296370"
  },
  {
    "text": "backup resource in a human readable format which is why it's pretty beneficial to use the bloggers feel I in",
    "start": "1296370",
    "end": "1302370"
  },
  {
    "text": "this case because it can actually talk to the s3 bucket grab logs and all that kind of stuff so you can see the backups",
    "start": "1302370",
    "end": "1309120"
  },
  {
    "text": "in progress and on the bottom is gonna specify the list of rustic backups that are running which in this case was just",
    "start": "1309120",
    "end": "1314760"
  },
  {
    "text": "one and you can see that I can actually access the backups er just from cue",
    "start": "1314760",
    "end": "1321860"
  },
  {
    "text": "cuddle as well but let's go back to the Valera CLI so it's a lot cleaner so now",
    "start": "1321860",
    "end": "1328760"
  },
  {
    "text": "that we describe it you can see that the rustic backups have completed and the overall backup itself has completed and",
    "start": "1328760",
    "end": "1335930"
  },
  {
    "text": "succeeded with no warning snores so the backup is done let's now simulate Oh",
    "start": "1335930",
    "end": "1344990"
  },
  {
    "text": "before we do that let's take a look at the actual bucket right let's make sure that all that backup data was stored there and since we use rustic we should",
    "start": "1344990",
    "end": "1351680"
  },
  {
    "text": "expect to see all the rustic snapshot data in the bucket as well so you can see we have some backup metadata and the",
    "start": "1351680",
    "end": "1359420"
  },
  {
    "text": "actual tar file of all the resources that were included then we have all the rustic snapshots as well alright so",
    "start": "1359420",
    "end": "1368750"
  },
  {
    "text": "we've verified that our backup is good all this data is stored in nuba there's only one more thing to do and that's to",
    "start": "1368750",
    "end": "1375110"
  },
  {
    "text": "destroy everything so let's go ahead and probably make them as common disaster",
    "start": "1375110",
    "end": "1380660"
  },
  {
    "text": "scenario someone fat fingering and deleting your namespace because I've done that multiple times so let's bring",
    "start": "1380660",
    "end": "1388160"
  },
  {
    "text": "it up run a cube cuddle delete namespace",
    "start": "1388160",
    "end": "1392350"
  },
  {
    "text": "and now that it's gone let's go ahead and verify that the persistent volume is no longer exist to prove to you that you",
    "start": "1399960",
    "end": "1407259"
  },
  {
    "text": "know I didn't just cheat and leave all the data on the cluster so you see on",
    "start": "1407259",
    "end": "1415779"
  },
  {
    "text": "the right there are no claims that exist in the my circle WordPress namespace and as I'll show you next you know then the",
    "start": "1415779",
    "end": "1421659"
  },
  {
    "text": "name space itself is gone completely destroyed no my sequel WordPress",
    "start": "1421659",
    "end": "1427990"
  },
  {
    "text": "namespace here alright so now we want to do is create our Valero restore object and to do this",
    "start": "1427990",
    "end": "1435909"
  },
  {
    "text": "I'm going to use a Valero CLI again we're shouldn't evil arrow restore create and then we're going to give it",
    "start": "1435909",
    "end": "1441460"
  },
  {
    "text": "the name of the backup that we want to restore from so you can see I'm doing -",
    "start": "1441460",
    "end": "1446470"
  },
  {
    "text": "- from backup and WordPress cube column",
    "start": "1446470",
    "end": "1451679"
  },
  {
    "text": "now the restores gonna run let's go ahead and describe it you can see how to",
    "start": "1452789",
    "end": "1464259"
  },
  {
    "text": "new Resik restores at the bottom and the phase itself is in progress I can",
    "start": "1464259",
    "end": "1470080"
  },
  {
    "text": "actually list the restores that exist in the Bolero namespace you're gonna see - because it took me two tries to get the",
    "start": "1470080",
    "end": "1475600"
  },
  {
    "text": "video but you can see the most recent one is 21 seconds so that's when we're gonna use so let's describe it again you",
    "start": "1475600",
    "end": "1485919"
  },
  {
    "text": "can see we still have one rustic restore in progress and I'll specify the details",
    "start": "1485919",
    "end": "1495730"
  },
  {
    "text": "flags to get a little more information about the actual rustic restores themselves you can you can see their",
    "start": "1495730",
    "end": "1501759"
  },
  {
    "text": "names and refer back to the Blair objects but now that's completed let's",
    "start": "1501759",
    "end": "1508470"
  },
  {
    "text": "go ahead and check out our pods that are running in the WordPress namespace and",
    "start": "1508470",
    "end": "1517750"
  },
  {
    "text": "you can see they're back we should have two new persistent volumes that were provisioned and you",
    "start": "1517750",
    "end": "1529809"
  },
  {
    "text": "can see we have to persist volume claims that are bound to set volumes so if the",
    "start": "1529809",
    "end": "1535720"
  },
  {
    "start": "1534000",
    "end": "1617000"
  },
  {
    "text": "rustic restore was successful we should expect to see that article that was already created otherwise it would have",
    "start": "1535720",
    "end": "1541360"
  },
  {
    "text": "brought up the blank install of WordPress so we're gonna refresh WordPress and you can see the articles",
    "start": "1541360",
    "end": "1549580"
  },
  {
    "text": "still there so everything worked and now let's go ahead and prove that you know",
    "start": "1549580",
    "end": "1554590"
  },
  {
    "text": "the database is actually able to accept new transactions that we didn't secure anything up in the application state so",
    "start": "1554590",
    "end": "1562509"
  },
  {
    "text": "do that let's just create a new article which will create another my sequel transaction and storing data in the",
    "start": "1562509",
    "end": "1567669"
  },
  {
    "text": "database",
    "start": "1567669",
    "end": "1569730"
  },
  {
    "text": "so go ahead and publish this one",
    "start": "1581010",
    "end": "1584450"
  },
  {
    "text": "done no errors although the home page and there's our second article so you",
    "start": "1588950",
    "end": "1594110"
  },
  {
    "text": "can see that we took the entire application destroyed its same space and restored it from a previous backup taken",
    "start": "1594110",
    "end": "1600830"
  },
  {
    "text": "in bolero so lastly here is a list of resources and links if you are",
    "start": "1600830",
    "end": "1607100"
  },
  {
    "text": "interested in any of these projects we have some of the community information for each open-source project and a list",
    "start": "1607100",
    "end": "1614900"
  },
  {
    "text": "of websites and their github so yeah so it looks like that we were a little",
    "start": "1614900",
    "end": "1620120"
  },
  {
    "start": "1617000",
    "end": "1641000"
  },
  {
    "text": "speedy so if there's any questions that we can take I'm not sure how we hear you",
    "start": "1620120",
    "end": "1628640"
  },
  {
    "text": "but sure you speak up I'll repeat the question if I can do yeah sure",
    "start": "1628640",
    "end": "1643970"
  },
  {
    "text": "so Valero is gonna skip the restoring of any resource that already exists in the namespace so if I back back up a",
    "start": "1643970",
    "end": "1651260"
  },
  {
    "text": "namespace that has say five deployments and ideally three of them that's what you're asking about on the restore it's",
    "start": "1651260",
    "end": "1657710"
  },
  {
    "text": "not going to overwrite the to running deployments it's only going to recreate the three deleted deployments yeah sure",
    "start": "1657710",
    "end": "1666970"
  },
  {
    "text": "you're asking if I wanted to run a back and restore from yes great question yeah",
    "start": "1673920",
    "end": "1689650"
  },
  {
    "text": "so um actually that that brings up a he asked if there's any scheduling of backups that you can restore from with",
    "start": "1689650",
    "end": "1695440"
  },
  {
    "text": "Valero and yeah I didn't get into all the specific details of Buffalo can do but scheduling is a big one so you can",
    "start": "1695440",
    "end": "1701380"
  },
  {
    "text": "schedule a backup to run every two hours every three hours you don't have to actually write your own code automate",
    "start": "1701380",
    "end": "1707020"
  },
  {
    "text": "that yourself yeah great question yeah see three over here I'll start in the",
    "start": "1707020",
    "end": "1712510"
  },
  {
    "text": "front yeah you yep yeah great question",
    "start": "1712510",
    "end": "1721420"
  },
  {
    "text": "yes can you use Valero for migrating across clusters an answer is absolutely that is that is what my team uses it for",
    "start": "1721420",
    "end": "1727990"
  },
  {
    "text": "actually a Red Hat so that is one of the prioritized use cases of Valero itself",
    "start": "1727990",
    "end": "1734080"
  },
  {
    "text": "yeah sure in the blue shirt right here or blue hoodie yeah so did you catch",
    "start": "1734080",
    "end": "1743020"
  },
  {
    "text": "that yeah so most recently actually",
    "start": "1743020",
    "end": "1748960"
  },
  {
    "text": "literally last week I back up 15 namespaces with a total of 80 gigabytes",
    "start": "1748960",
    "end": "1755980"
  },
  {
    "text": "of data and I used rustic for the backup so rustic also exposes the incremental",
    "start": "1755980",
    "end": "1762280"
  },
  {
    "text": "backups and restores so in that case the initial backup would have taken a long time how my team gets around that is we",
    "start": "1762280",
    "end": "1769900"
  },
  {
    "text": "take multiple backups then at the last time when I actually want to switch the application over we run a restore first",
    "start": "1769900",
    "end": "1778960"
  },
  {
    "text": "before taking the app down so um you kind of get incremental progress but it does take a long time if you have 80",
    "start": "1778960",
    "end": "1784510"
  },
  {
    "text": "gigs of data because you know rustic is just performing a filesystem copy so it benefits yourself to stage the data and",
    "start": "1784510",
    "end": "1789760"
  },
  {
    "text": "take advantage of the deduplication yeah I'm gonna get",
    "start": "1789760",
    "end": "1794860"
  },
  {
    "text": "the blue shirt right there yeah I'm",
    "start": "1794860",
    "end": "1803920"
  },
  {
    "text": "sorry is that yeah we didn't how many files rustic can read I'm still missing",
    "start": "1803920",
    "end": "1815220"
  },
  {
    "text": "oh you're asking at how many files gonna do in parallel at one time I don't know",
    "start": "1815850",
    "end": "1823600"
  },
  {
    "text": "the specifics about that on a rustic side but you know that the actual backup and restore process is serialized so there's no parallelization there yet so",
    "start": "1823600",
    "end": "1830980"
  },
  {
    "text": "can we take the question in the back behind yeah",
    "start": "1830980",
    "end": "1835860"
  },
  {
    "text": "yeah a great question so writing a plugin is super easy it it's essentially",
    "start": "1842330",
    "end": "1848580"
  },
  {
    "text": "two functions that you specify the list of resources the plug-in target is going to operate on then the specific backup a",
    "start": "1848580",
    "end": "1855360"
  },
  {
    "text": "restore functionality of how you're gonna mutate the object now you asked about filesystem freezing of a database that is not where a plug-in will go that",
    "start": "1855360",
    "end": "1862230"
  },
  {
    "text": "would go into a hook and a hook right now currently velaro you can expose a command or a script that gets run prior",
    "start": "1862230",
    "end": "1869160"
  },
  {
    "text": "to the backup operation for plugins that's for resource specific operations so say like secrets I wanted to mutate a",
    "start": "1869160",
    "end": "1876660"
  },
  {
    "text": "specific feel in the secret during backup time you would list hey this is going to be this plug-in runs for these",
    "start": "1876660",
    "end": "1882540"
  },
  {
    "text": "resources and it does the specific behavior of a backup time and so you asked if there was any community written",
    "start": "1882540",
    "end": "1888450"
  },
  {
    "text": "plugins there there are but they are pretty I would say I've seen them kind",
    "start": "1888450",
    "end": "1894690"
  },
  {
    "text": "of specialized for customer specific use cases not necessarily generalized since falero supports all the kubernetes",
    "start": "1894690",
    "end": "1900330"
  },
  {
    "text": "resources out of the box unless you're operating on like a different flavor of humanities there's not like a necessary huge need for it",
    "start": "1900330",
    "end": "1906299"
  },
  {
    "text": "yeah yeah in the front",
    "start": "1906299",
    "end": "1909860"
  },
  {
    "text": "[Music] so you're asking if I can back up the",
    "start": "1914560",
    "end": "1921230"
  },
  {
    "text": "EBS data into the s3 bucket itself yep so you can use rustic on EBS volumes you don't have to use the cloud native",
    "start": "1921230",
    "end": "1927080"
  },
  {
    "text": "snapshot tool in order to do that you just have to annotate the pod that's gonna be include in the backup and",
    "start": "1927080",
    "end": "1932510"
  },
  {
    "text": "that's gonna tell Valero even though it's an EBS volume don't use the cloud snapshot use rustic yeah you have the",
    "start": "1932510",
    "end": "1949940"
  },
  {
    "text": "option to restore from any backup that exists on the cluster right so um yes",
    "start": "1949940",
    "end": "1955960"
  },
  {
    "text": "and so Valera by itself it will timestamp the end at a timestamp at the",
    "start": "1955960",
    "end": "1961550"
  },
  {
    "text": "end of the backup that way you can kind of sort through which backup is at which time if you want to do that yeah yeah we",
    "start": "1961550",
    "end": "1967280"
  },
  {
    "text": "probably could take a few more questions and then I think we need to give up this stage yeah yes yeah absolutely",
    "start": "1967280",
    "end": "1980390"
  },
  {
    "text": "um so that's just a flag on the backup CR you can say don't include persistent volumes yeah yeah yeah in fact that's",
    "start": "1980390",
    "end": "1988790"
  },
  {
    "text": "probably the easier thing to do so yeah yeah I see right there",
    "start": "1988790",
    "end": "1995919"
  },
  {
    "text": "I didn't catch the last minutes yes but I did catch the everything else yeah so",
    "start": "2006190",
    "end": "2016140"
  },
  {
    "text": "yeah that's actually a great question and preventing application downtime has not been an easy problem for my team to",
    "start": "2016140",
    "end": "2021700"
  },
  {
    "text": "solve in this case the best way that we found to do it is so say the backup takes two hours",
    "start": "2021700",
    "end": "2027280"
  },
  {
    "text": "and since rustic allows for incremental backups what you want to do is what",
    "start": "2027280",
    "end": "2032740"
  },
  {
    "text": "we've done is say two hours a lot elapses take another backup that might take ten minutes bring the application",
    "start": "2032740",
    "end": "2038950"
  },
  {
    "text": "down run a final backup and that will probably take a minute 45 seconds then run a final restore I saw one up here",
    "start": "2038950",
    "end": "2046720"
  },
  {
    "text": "yep yep so in order to migrate across",
    "start": "2046720",
    "end": "2054310"
  },
  {
    "text": "clusters you have to install velaro in both clusters you configure them to point to the same s3 bucket and on",
    "start": "2054310",
    "end": "2060610"
  },
  {
    "text": "cluster one you take a backup the velaro controller on cluster 2 will automatically sync with the s3 8 s3",
    "start": "2060610",
    "end": "2067330"
  },
  {
    "text": "bucket and run a restore from there I'm",
    "start": "2067330",
    "end": "2073360"
  },
  {
    "text": "sorry yeah yeah your backup namespace on",
    "start": "2073360",
    "end": "2079868"
  },
  {
    "text": "cluster one that gets stored in the s3 bucket and then you run the restore and cluster to you pointing to that backup yep yes the ingress controller I don't",
    "start": "2079869",
    "end": "2096490"
  },
  {
    "text": "see why you couldn't but I have never done that so I couldn't say for sure but I don't see why I mean if there's any",
    "start": "2096490",
    "end": "2101890"
  },
  {
    "text": "state involved it would have to be in some kind of persistent storage excuse",
    "start": "2101890",
    "end": "2111490"
  },
  {
    "text": "me I think it is yeah",
    "start": "2111490",
    "end": "2119160"
  },
  {
    "text": "yes rare",
    "start": "2119970",
    "end": "2123420"
  },
  {
    "text": "yeah so it's kind of a couple reasons one I don't have any experience with CSI",
    "start": "2127660",
    "end": "2133460"
  },
  {
    "text": "so we explored it briefly for using this but it's as a net mentioned earlier one",
    "start": "2133460",
    "end": "2139850"
  },
  {
    "text": "of the drawbacks is if we were to use CSI force F right that doesn't actually give you data protection if the stuff",
    "start": "2139850",
    "end": "2145520"
  },
  {
    "text": "cluster goes down so you want to take a backup and store the data somewhere else with CSI it's going to store the CSI",
    "start": "2145520",
    "end": "2151250"
  },
  {
    "text": "snapshot in SEF so we didn't really feel like that was actually providing data protection for this time and actually as",
    "start": "2151250",
    "end": "2157640"
  },
  {
    "text": "we're looking you know having snapshot capability for CSI most the strategies I've seen for backup and restore",
    "start": "2157640",
    "end": "2164260"
  },
  {
    "text": "snapshot creative all create the volume take the data out and put it somewhere",
    "start": "2164260",
    "end": "2169700"
  },
  {
    "text": "else because so that it actually is protected so snapshot is good but it",
    "start": "2169700",
    "end": "2175430"
  },
  {
    "text": "doesn't give you data protection yep no",
    "start": "2175430",
    "end": "2183590"
  },
  {
    "text": "you cannot do you cross region if you're using a cloud provider there's pretty strict requirements they have to all be in the same region yeah yeah",
    "start": "2183590",
    "end": "2193570"
  },
  {
    "text": "yep great questions whoo he's asking how does bolero manage failures so it kind",
    "start": "2203050",
    "end": "2208310"
  },
  {
    "text": "of separates errors and into like hard warning or hard errors and like soft",
    "start": "2208310",
    "end": "2214460"
  },
  {
    "text": "warnings so an example of a soft warning would be hey I can restore this object",
    "start": "2214460",
    "end": "2219920"
  },
  {
    "text": "because it already exists in the cluster and a hard error like say the rustic restore actually failed the restore is",
    "start": "2219920",
    "end": "2226820"
  },
  {
    "text": "going to go into an error State on the Status yeah",
    "start": "2226820",
    "end": "2231490"
  },
  {
    "text": "sort of like a checkpoint yeah the backups can completely stop if it's",
    "start": "2241070",
    "end": "2247160"
  },
  {
    "text": "using rustic you will at least have all that snapshot data preserved in the backup so the next time you ran the",
    "start": "2247160",
    "end": "2252500"
  },
  {
    "text": "backup it wouldn't have to go and redo all of that snapshot data but the back of itself is gonna stop right there and",
    "start": "2252500",
    "end": "2257960"
  },
  {
    "text": "go into an error State yeah if the",
    "start": "2257960",
    "end": "2265250"
  },
  {
    "text": "cluster running the bolero soul is just completely wiped away well the the purpose here is that you're using velaro",
    "start": "2265250",
    "end": "2271430"
  },
  {
    "text": "to store it off cluster right so in this case I'm probably storing my data in",
    "start": "2271430",
    "end": "2276620"
  },
  {
    "text": "Amazon or an s3 bucket off cluster I know in this case nuba was running on",
    "start": "2276620",
    "end": "2281630"
  },
  {
    "text": "the cluster and but we were using storage that was on the actual node disk",
    "start": "2281630",
    "end": "2287720"
  },
  {
    "text": "themselves so if a cluster died but the machines were okay we would have had that data stored still but ideally you",
    "start": "2287720",
    "end": "2294680"
  },
  {
    "text": "know you want to replicate data which nuba gives you the ability to clone all",
    "start": "2294680",
    "end": "2300710"
  },
  {
    "text": "of your data across different bucket classes right so that that's how you can actually replicate data in the case of the actual cluster going down and dying",
    "start": "2300710",
    "end": "2307250"
  },
  {
    "text": "yeah sure sorry speak up",
    "start": "2307250",
    "end": "2316150"
  },
  {
    "text": "did I catch you right there you want to change the namespace name between backup and restore I don't believe so I think",
    "start": "2319940",
    "end": "2334170"
  },
  {
    "text": "that what would happen is Valero on restore it's gonna say hey this namespace already exists and it won't",
    "start": "2334170",
    "end": "2339590"
  },
  {
    "text": "recreate anything so if there are objects that don't exist that namespace it will restore those but it's not gonna",
    "start": "2339590",
    "end": "2345720"
  },
  {
    "text": "force overwrite any objects in the cluster that might be a configuration parameter I'm not sure yeah",
    "start": "2345720",
    "end": "2351390"
  },
  {
    "text": "so I think we need to call it a wrap thank you very much",
    "start": "2351390",
    "end": "2356530"
  },
  {
    "text": "[Applause]",
    "start": "2356530",
    "end": "2361659"
  }
]