[
  {
    "text": "um welcome sorry for the D Day but now we actually can start if people can stop",
    "start": "0",
    "end": "8490"
  },
  {
    "text": "talking whatever okay so there is two of us here today me",
    "start": "8490",
    "end": "14580"
  },
  {
    "text": "I'm Richard I'm a part of Prometheus team I'm wearing a few other hats this",
    "start": "14580",
    "end": "20010"
  },
  {
    "text": "is Ben hi and I'm going to hand over for Ben for the first half oh just for the",
    "start": "20010",
    "end": "27090"
  },
  {
    "text": "structure of this talk we decided to keep some concerns and best practices about operations and observability in",
    "start": "27090",
    "end": "34380"
  },
  {
    "text": "here even though it is permissive specific course chances are if you're new to prometheus you hugely benefit",
    "start": "34380",
    "end": "40800"
  },
  {
    "text": "from the observability stuff as well alright so who here is heard of",
    "start": "40800",
    "end": "45989"
  },
  {
    "text": "Prometheus yay who's not using it yet but it's thinking about it alright who's",
    "start": "45989",
    "end": "54449"
  },
  {
    "text": "already using it it's like it's like a concept testing yep and then how many",
    "start": "54449",
    "end": "59550"
  },
  {
    "text": "people are like full on it's all in production awesome people yeah nice",
    "start": "59550",
    "end": "67280"
  },
  {
    "text": "so where did Prometheus come from so back in late 2012 early 2013 we were",
    "start": "67290",
    "end": "77780"
  },
  {
    "text": "SoundCloud was working on their own container environment so they were already doing a containerized",
    "start": "77780",
    "end": "83100"
  },
  {
    "text": "environment and they had a couple of X Google engineers that knew that",
    "start": "83100",
    "end": "89420"
  },
  {
    "text": "container monitoring was going to be a different story than a normal setup and",
    "start": "89420",
    "end": "94579"
  },
  {
    "text": "they they had graphite and it was okay and they had Nagios and it was okay but",
    "start": "94579",
    "end": "99630"
  },
  {
    "text": "they really wanted to to converge those tools and you know being form of Googler",
    "start": "99630",
    "end": "106409"
  },
  {
    "text": "engineers they had used Boardman which is Google's one of Google's internal monitoring systems and it was really",
    "start": "106409",
    "end": "113250"
  },
  {
    "text": "well put together to do container monitoring and and it's a little",
    "start": "113250",
    "end": "121170"
  },
  {
    "text": "different in it from something like Nagios for monitoring is it started with this time series database and it uses",
    "start": "121170",
    "end": "128129"
  },
  {
    "text": "that uses a time series database as its core Prometheus is very simple it uses only",
    "start": "128129",
    "end": "135380"
  },
  {
    "text": "metrics that are numeric it started with",
    "start": "135380",
    "end": "141540"
  },
  {
    "text": "the instrumentation so actually the first thing that was developed when they were developing corinthians was an",
    "start": "141540",
    "end": "147660"
  },
  {
    "text": "instrumentation library so that they could start collecting the NIR they could start producing the data in order",
    "start": "147660",
    "end": "153090"
  },
  {
    "text": "for it to be used for monitoring it's not an event logging system it's not a",
    "start": "153090",
    "end": "158970"
  },
  {
    "text": "replacement for elasticsearch or Splunk or those kind of things we consider that",
    "start": "158970",
    "end": "164280"
  },
  {
    "text": "a separate a separate system is and so Prometheus is like a very specialized",
    "start": "164280",
    "end": "169980"
  },
  {
    "text": "single tool to make it really like",
    "start": "169980",
    "end": "174989"
  },
  {
    "text": "powerful without needing to handle every use case and okay so the main selling",
    "start": "174989",
    "end": "185010"
  },
  {
    "text": "point is it's it's very simple it has very dynamic built-in service discovery",
    "start": "185010",
    "end": "191330"
  },
  {
    "text": "it has a very powerful query language for extracting data from the metrics it's super simple to operate it's super",
    "start": "191330",
    "end": "198420"
  },
  {
    "text": "efficient you can monitor many many many thousands of processes with with one",
    "start": "198420",
    "end": "206010"
  },
  {
    "text": "Prometheus server it's pull based it uses it it knows your",
    "start": "206010",
    "end": "212730"
  },
  {
    "text": "network topology and collects the data you can do blackbox monitoring by configuring a blackbox exporter it can",
    "start": "212730",
    "end": "221850"
  },
  {
    "text": "do white box monitoring so it can it can go directly into your application and pull data out so that you know you can",
    "start": "221850",
    "end": "228600"
  },
  {
    "text": "expose things that are are more granular than you could get out of your event logs so one of the things that I talk",
    "start": "228600",
    "end": "236310"
  },
  {
    "text": "about when developing is if you have things that you might want to have from",
    "start": "236310",
    "end": "241470"
  },
  {
    "text": "debugging you can have metrics for those without having to actually have the cost of debug level logs it has some",
    "start": "241470",
    "end": "252989"
  },
  {
    "text": "stability guarantees were we don't have a very good security model yet but",
    "start": "252989",
    "end": "259290"
  },
  {
    "text": "that's a work in progress so one of the things that we talked about is time series so what is a time",
    "start": "259290",
    "end": "264599"
  },
  {
    "text": "series because this is kind of fundamental to how Prometheus works it's a a regularly",
    "start": "264599",
    "end": "271379"
  },
  {
    "text": "collected data point with a timestamp over a long period of time which could",
    "start": "271379",
    "end": "277560"
  },
  {
    "text": "be hours or days or months or years and in Prometheus we'd like to collect",
    "start": "277560",
    "end": "284039"
  },
  {
    "text": "really raw data so if you have an event in your system you get a request to an",
    "start": "284039",
    "end": "290009"
  },
  {
    "text": "API your API generates an error you make a database request whatever you count",
    "start": "290009",
    "end": "296099"
  },
  {
    "text": "those and just we store the raw counts in Prometheus but some things aren't",
    "start": "296099",
    "end": "304229"
  },
  {
    "text": "really countable how many things are in a queue or the temperature of a sensor",
    "start": "304229",
    "end": "309539"
  },
  {
    "text": "those things are what we call gages is they they go up and down and you can only you you have to sample them instead",
    "start": "309539",
    "end": "317280"
  },
  {
    "text": "of with a counter you sample when you sample a counter you know it was one at time a and 10 at time B Prometheus is",
    "start": "317280",
    "end": "328020"
  },
  {
    "text": "super efficient we just did some had some new benchmarking recently where the",
    "start": "328020",
    "end": "335400"
  },
  {
    "text": "important key metric for us was actually not how fast we could ingest because it",
    "start": "335400",
    "end": "341099"
  },
  {
    "text": "turns out that a million samples per second is more than plenty for just about every situation we've run across",
    "start": "341099",
    "end": "346639"
  },
  {
    "text": "what we really wanted is we we want to get the the cost to ingest down so we",
    "start": "346639",
    "end": "352409"
  },
  {
    "text": "got it - it's now about 200,000 samples per second per CPU so if you don't want",
    "start": "352409",
    "end": "359550"
  },
  {
    "text": "to waste resources on your monitoring Prometheus's this is a super super",
    "start": "359550",
    "end": "366029"
  },
  {
    "text": "efficient there actually this is a typo it's actually not 1.3 bits per sample it's actually 1.3 bytes per sample and",
    "start": "366029",
    "end": "373740"
  },
  {
    "text": "that's of course data dependent so the Prometheus compression can actually do a little better so for example if you just",
    "start": "373740",
    "end": "380279"
  },
  {
    "text": "have a piece of data that doesn't change that compresses down to point 1 7 bytes",
    "start": "380279",
    "end": "386490"
  },
  {
    "text": "per sample so it's it's really really cheap to ingest lots and lots of data and if it's not changing it's not it's",
    "start": "386490",
    "end": "393149"
  },
  {
    "text": "even less of a big deal how do you get data into Prometheus well",
    "start": "393149",
    "end": "398700"
  },
  {
    "text": "we have a very simple text representation and basically the metric",
    "start": "398700",
    "end": "404280"
  },
  {
    "text": "name represents some line of code so HTTP requests total represents the",
    "start": "404280",
    "end": "410130"
  },
  {
    "text": "request Handler in your application and then you can tag it so some labels come",
    "start": "410130",
    "end": "415560"
  },
  {
    "text": "from the code like the status code or the method and some labels come from your discovery like the environment so",
    "start": "415560",
    "end": "423000"
  },
  {
    "text": "one of the key things about prometheus is we have two two basic kinds of labels",
    "start": "423000",
    "end": "428730"
  },
  {
    "text": "we have labels that come from the target we have labels that come from discovery so that you can the application",
    "start": "428730",
    "end": "436110"
  },
  {
    "text": "developer doesn't have to know about the environment that the code is running in because you could take a piece of code",
    "start": "436110",
    "end": "442140"
  },
  {
    "text": "from kubernetes or other some other random piece of software and if your",
    "start": "442140",
    "end": "447750"
  },
  {
    "text": "company has different hierarchical concepts they'll you can apply those",
    "start": "447750",
    "end": "455070"
  },
  {
    "text": "labels differently than another company would so one of the interesting things",
    "start": "455070",
    "end": "461370"
  },
  {
    "text": "about prometheus is we went with a a vector style programming language or a query language versus SQL because it",
    "start": "461370",
    "end": "469260"
  },
  {
    "text": "makes some things much much simpler so when you do a very simple query like",
    "start": "469260",
    "end": "475500"
  },
  {
    "text": "average average temperature by city that's pretty simple it's also pretty",
    "start": "475500",
    "end": "480750"
  },
  {
    "text": "easy to do in in SQL but if you want to take and two different metrics and do",
    "start": "480750",
    "end": "487560"
  },
  {
    "text": "math between them in SQL that gets super complicated super fast and there's even",
    "start": "487560",
    "end": "494970"
  },
  {
    "text": "worse examples than this where a single line of prom ql would be hundreds of",
    "start": "494970",
    "end": "499980"
  },
  {
    "text": "lines of SQL for visualization we start out with our own dashboard system but",
    "start": "499980",
    "end": "507300"
  },
  {
    "text": "most of us working on Prometheus are we're all back-end developers we don't have a lot of UI people so we've said",
    "start": "507300",
    "end": "513990"
  },
  {
    "text": "we'll just delete that code and let gravano be our our front-end so most people who are using prometheus",
    "start": "513990",
    "end": "519930"
  },
  {
    "text": "are using Gryphon ah it's beautiful it's nice I like it a lot and then now I'm",
    "start": "519930",
    "end": "525150"
  },
  {
    "text": "gonna hand off to Richard to talk about the second half second half yeah so the second half before we hopefully have",
    "start": "525150",
    "end": "531930"
  },
  {
    "text": "of time for questions we just want to look at some basic concepts of both good",
    "start": "531930",
    "end": "538080"
  },
  {
    "text": "operations and good observability one of these single most things to realize and",
    "start": "538080",
    "end": "544350"
  },
  {
    "text": "actually you have at the front of your head while while designing systems and working on systems is the concept of",
    "start": "544350",
    "end": "549480"
  },
  {
    "text": "toil which is basically manual work which you repeat endlessly and which",
    "start": "549480",
    "end": "554580"
  },
  {
    "text": "doesn't generate lasting benefit also it's scales roughly linearly with your workload or the amount of users or",
    "start": "554580",
    "end": "561270"
  },
  {
    "text": "whatever why is this such important concept basically while you're always",
    "start": "561270",
    "end": "567690"
  },
  {
    "text": "putting out fires course there's an outage here or a need to provision new service there bla bla bla bla bla you",
    "start": "567690",
    "end": "573570"
  },
  {
    "text": "don't have time to actually sit down and think about the whole system to actually engineer a good system basically by",
    "start": "573570",
    "end": "580290"
  },
  {
    "text": "getting rid of that kind of work which does not provide any lasting value you have time to focus on stuff which",
    "start": "580290",
    "end": "586860"
  },
  {
    "text": "actually benefits you and your company or your team or whatever obviously while",
    "start": "586860",
    "end": "592350"
  },
  {
    "text": "while trying to change your system it means you even have to have more workers",
    "start": "592350",
    "end": "598350"
  },
  {
    "text": "he keeps your old stuff working and whatever your scripts your new monitoring and such which helps you",
    "start": "598350",
    "end": "604560"
  },
  {
    "text": "reduce your toil will come out on top so it's really important when you try to to",
    "start": "604560",
    "end": "610920"
  },
  {
    "text": "do anything any change at your company but especially when you want to reduce",
    "start": "610920",
    "end": "617010"
  },
  {
    "text": "work you kind of have to explain that you increase work for a short time until",
    "start": "617010",
    "end": "622470"
  },
  {
    "text": "you reduce the total amount of work so having immediate benefits which you can't wake in xocai people look here",
    "start": "622470",
    "end": "628800"
  },
  {
    "text": "this is good stuff that what's good that's what gets you buy-in then we have",
    "start": "628800",
    "end": "635130"
  },
  {
    "text": "the concept of sleep most humans like to sleep and how do you how do you get your",
    "start": "635130",
    "end": "642990"
  },
  {
    "text": "system into a state where you actually have time for family for time off for whatever instead of being woken by the",
    "start": "642990",
    "end": "649470"
  },
  {
    "text": "pager or by any emergency all the time basically it depends a little bit or a",
    "start": "649470",
    "end": "655050"
  },
  {
    "text": "lot on on agreeing within your company how you want to run things and if",
    "start": "655050",
    "end": "661339"
  },
  {
    "text": "something is not actionable like you don't know what to do with an alert then it cannot be an alert",
    "start": "661339",
    "end": "667410"
  },
  {
    "text": "by definition you should not be vocal it should not be escalated unless you know what to do and how to fix and how",
    "start": "667410",
    "end": "673110"
  },
  {
    "text": "to approach it if it's not urgent it should also not be an alert it should be persistent in your ticket system or",
    "start": "673110",
    "end": "679500"
  },
  {
    "text": "whatever and you can do it during business hours next business day there is no need to be woken at 3:00 in the",
    "start": "679500",
    "end": "684960"
  },
  {
    "text": "morning for something which could easily be handled next morning also if you have good users user prediction or even auto",
    "start": "684960",
    "end": "692370"
  },
  {
    "text": "scaling that also means you don't get welcomed by random stuff just going 1%",
    "start": "692370",
    "end": "697590"
  },
  {
    "text": "over whatever your baseline is and again try to do this during business hours",
    "start": "697590",
    "end": "702920"
  },
  {
    "text": "then something really important if there is no by the people who build it playbook documentation how to run a",
    "start": "702920",
    "end": "710010"
  },
  {
    "text": "thing it should never ever go into production chorus basically if you do any any other way what happens is the",
    "start": "710010",
    "end": "717900"
  },
  {
    "text": "on-call engineers are the ones who then get to document the system they didn't build which is not a good thing to have",
    "start": "717900",
    "end": "724410"
  },
  {
    "text": "and also if there is no clear concept which is agreed upon by management what",
    "start": "724410",
    "end": "730440"
  },
  {
    "text": "the actual targets of availability and of latency and of all these things is for that product it should also not go",
    "start": "730440",
    "end": "737460"
  },
  {
    "text": "into production course if you don't know what you're actually running you shouldn't be running it or you should",
    "start": "737460",
    "end": "743100"
  },
  {
    "text": "think more about how to run it also really important while while having",
    "start": "743100",
    "end": "748860"
  },
  {
    "text": "these discussions in your company every single role will think a lot differently",
    "start": "748860",
    "end": "755550"
  },
  {
    "text": "about what you actually do and some people care deeply about certain aspects",
    "start": "755550",
    "end": "762030"
  },
  {
    "text": "of what you do and none at all about others and this is really important to keep in mind the managers they will",
    "start": "762030",
    "end": "768210"
  },
  {
    "text": "think about revenue and that's about it and about process actually execution but",
    "start": "768210",
    "end": "773490"
  },
  {
    "text": "they don't actually do the process so that's the architects they care about good process definition and about a good",
    "start": "773490",
    "end": "779850"
  },
  {
    "text": "clean design which hopefully also gets implemented then others would like to",
    "start": "779850",
    "end": "786660"
  },
  {
    "text": "have just the high-level overview of yes things are fine teammates obviously want their team to be motivated and to have energy while",
    "start": "786660",
    "end": "793920"
  },
  {
    "text": "working and not be suddenly demotivated and the actual operator but this is us being beer 200 okay it's",
    "start": "793920",
    "end": "804060"
  },
  {
    "text": "fine and the actual operators they probably want to have some sleep and family time so you should try and",
    "start": "804060",
    "end": "811170"
  },
  {
    "text": "optimize for that as well and tell everyone basically you have this big picture and everyone wants the",
    "start": "811170",
    "end": "817320"
  },
  {
    "text": "same thing but they care about different aspects of this so when talking about how to implement something new hopefully",
    "start": "817320",
    "end": "822810"
  },
  {
    "text": "prometheus at your company you should you should really try to to tell people",
    "start": "822810",
    "end": "829140"
  },
  {
    "text": "what they want to hear and what they need to hear instead of just telling everyone the same story but also I'll",
    "start": "829140",
    "end": "835920"
  },
  {
    "text": "obviously never ever lie course that'll come back to you and it'll not be pretty",
    "start": "835920",
    "end": "841640"
  },
  {
    "text": "so post mortems are also huge in importance course mistakes will happen",
    "start": "841640",
    "end": "847050"
  },
  {
    "text": "no system is perfect something will break so you have to design the system in a way that braking is fine you have",
    "start": "847050",
    "end": "855060"
  },
  {
    "text": "to learn from those mistakes course if you just keep making the same mistakes you will lose a ton of users and also",
    "start": "855060",
    "end": "860880"
  },
  {
    "text": "this is like the textbook definition of toil but there's a very important aspect",
    "start": "860880",
    "end": "865950"
  },
  {
    "text": "if people fear attribution when they make a mistake they will not be honest",
    "start": "865950",
    "end": "871560"
  },
  {
    "text": "about what mistakes they made so unless you have a culture at your company in",
    "start": "871560",
    "end": "876630"
  },
  {
    "text": "your team in your whatever where where it's actually okay to say okay I made a mistake and this is how this mistake",
    "start": "876630",
    "end": "882959"
  },
  {
    "text": "folds into the whole big picture and everyone else is also honest about their mistakes about their actions when they",
    "start": "882959",
    "end": "889200"
  },
  {
    "text": "did what and what they didn't do and such then you can actually write those blame free post-mortems where you write",
    "start": "889200",
    "end": "895560"
  },
  {
    "text": "explicitly someone that acts you don't have to name them but you write engineer",
    "start": "895560",
    "end": "900720"
  },
  {
    "text": "of database team drop database that was not a good idea and everything was gone you write this down curse then people",
    "start": "900720",
    "end": "907200"
  },
  {
    "text": "can read it later and they can learn from that and you can build institutional knowledge in your company based on those past mistakes and not",
    "start": "907200",
    "end": "914220"
  },
  {
    "text": "repeat those mistakes but it's really really important to build this trust course if someone assumes that if they",
    "start": "914220",
    "end": "920279"
  },
  {
    "text": "document that it did something wrong that they only pick daily be kicked out of the company or something they will",
    "start": "920279",
    "end": "926820"
  },
  {
    "text": "never ever document this properly so this trust internally is hugely",
    "start": "926820",
    "end": "932629"
  },
  {
    "text": "then leveraging this one pistol system again hopefully prometheus if you have",
    "start": "932629",
    "end": "939209"
  },
  {
    "text": "one combined system as opposed to a ton of different systems you can actually",
    "start": "939209",
    "end": "944939"
  },
  {
    "text": "correlate that data you can take different aspects of your whole state of",
    "start": "944939",
    "end": "950009"
  },
  {
    "text": "the system and you can you can actually make deductions if you have both your services and your data center in the",
    "start": "950009",
    "end": "956609"
  },
  {
    "text": "same monitoring system you can actually graph the power usage against how many",
    "start": "956609",
    "end": "961949"
  },
  {
    "text": "users you have on that system myself I started in networking and we had weird",
    "start": "961949",
    "end": "967169"
  },
  {
    "text": "issues with a line where the out a quick",
    "start": "967169",
    "end": "973049"
  },
  {
    "text": "change in outside temperature up or down took down a certain long-haul line or a",
    "start": "973049",
    "end": "978720"
  },
  {
    "text": "certain dark fiber which took ages to find out we didn't have premises but",
    "start": "978720",
    "end": "984949"
  },
  {
    "text": "even that such things you could in theory just correlate and just put into context if you have the data and the",
    "start": "984949",
    "end": "991559"
  },
  {
    "text": "same in the same system and there is tons and tons and tons of other things and as you now have this good way to do",
    "start": "991559",
    "end": "998790"
  },
  {
    "text": "math to do actual math on your metrics you have the ideal starting point to jump into your logs into your traces",
    "start": "998790",
    "end": "1005959"
  },
  {
    "text": "into whatever course metrics are usually the start of something course they're easy to aggregate and easy to work with",
    "start": "1005959",
    "end": "1012319"
  },
  {
    "text": "so you can go from there and you can jump into other parts of your whole observability system to get the full",
    "start": "1012319",
    "end": "1019399"
  },
  {
    "text": "picture sometimes metrics are already enough but sometimes you just need to look somewhere else and this is almost always",
    "start": "1019399",
    "end": "1026329"
  },
  {
    "text": "the best starting point and when you have this one source of truth which",
    "start": "1026329",
    "end": "1032389"
  },
  {
    "text": "might be one system or several systems then you have everyone agree on that",
    "start": "1032389",
    "end": "1037668"
  },
  {
    "text": "state you have the same technical overview for your current state you have the same data in your drill down you",
    "start": "1037669",
    "end": "1043428"
  },
  {
    "text": "have the same data in the PDFs which you sent to customers when they want to have an auditory part or just monthly or",
    "start": "1043429",
    "end": "1049490"
  },
  {
    "text": "whatever report you have the same stuff which sales can use to base their SLS and SAS on if the same stuff for",
    "start": "1049490",
    "end": "1057139"
  },
  {
    "text": "accounting bla bla bla bla bla so by having this one source of data you actually agree on what the state of your",
    "start": "1057139",
    "end": "1064250"
  },
  {
    "text": "system is throughout all the different teams in your company which also is not very",
    "start": "1064250",
    "end": "1069870"
  },
  {
    "text": "often the case and should be so yeah a little bit placket if I don't know if",
    "start": "1069870",
    "end": "1075299"
  },
  {
    "text": "this actually translate to Chinese this if all you have is a hammer saying but",
    "start": "1075299",
    "end": "1080429"
  },
  {
    "text": "no it probably doesn't okay so we have some time for questions shoot hold on",
    "start": "1080429",
    "end": "1091190"
  },
  {
    "text": "there any color correlation capability in permit use right now between what",
    "start": "1091190",
    "end": "1096570"
  },
  {
    "text": "sorry correlation even correlation and metrics correlation there's no automatic",
    "start": "1096570",
    "end": "1103410"
  },
  {
    "text": "correlation for a simple reason in a big system you will always find something which correlates with something so you",
    "start": "1103410",
    "end": "1110520"
  },
  {
    "text": "have to have at least as of right now that you have to have humans look at the data and make deductions automated",
    "start": "1110520",
    "end": "1116669"
  },
  {
    "text": "automated correlations the systems aren't far enough yeah there are there",
    "start": "1116669",
    "end": "1122309"
  },
  {
    "text": "are some companies out there working on external correlation systems that pull",
    "start": "1122309",
    "end": "1127679"
  },
  {
    "text": "the data from Prometheus so the idea that we had with Corinthians is it's the",
    "start": "1127679",
    "end": "1132720"
  },
  {
    "text": "data collector and it's the first level of monitoring and we wanted to keep it",
    "start": "1132720",
    "end": "1141540"
  },
  {
    "text": "simple and robust and not require tons",
    "start": "1141540",
    "end": "1146760"
  },
  {
    "text": "and tons of CPU time so that a single Prometheus server is very very a very",
    "start": "1146760",
    "end": "1152250"
  },
  {
    "text": "very small piece of the overall system so people are building external",
    "start": "1152250",
    "end": "1157410"
  },
  {
    "text": "correlators that will use the Prometheus data and then spend the extra CPU time",
    "start": "1157410",
    "end": "1162929"
  },
  {
    "text": "outside of the act the thing that keeps your your alerts going okay I think",
    "start": "1162929",
    "end": "1174260"
  },
  {
    "text": "promises is great but have one problem to put it at into a production that we",
    "start": "1174260",
    "end": "1180780"
  },
  {
    "text": "need to build how they have available cluster and it should be scalable so so",
    "start": "1180780",
    "end": "1187290"
  },
  {
    "text": "is there any effort to make promises hi available and scalable there's actually",
    "start": "1187290",
    "end": "1194010"
  },
  {
    "text": "several so for just normal committees you can just run to as there and they can do basically they",
    "start": "1194010",
    "end": "1200429"
  },
  {
    "text": "both do exactly the same so if one fails you have the same but you also have a remote read/write API where you send",
    "start": "1200429",
    "end": "1207660"
  },
  {
    "text": "data to two other in jester's there's two which are basically modified modified promises which are tennis and",
    "start": "1207660",
    "end": "1214710"
  },
  {
    "text": "cortex and there's tons of others we have a total of 12 different ones listed in the meantime and those can actually",
    "start": "1214710",
    "end": "1220950"
  },
  {
    "text": "do a JN per system and such so currently you should probably be looking at cortex",
    "start": "1220950",
    "end": "1226049"
  },
  {
    "text": "if you need more availability than then standard parameters can give you but",
    "start": "1226049",
    "end": "1231299"
  },
  {
    "text": "again this is basically modified from easiest so it comes from Prometheus team members yeah yeah so or I think we're",
    "start": "1231299",
    "end": "1240210"
  },
  {
    "text": "gonna be talking about more about that these drive tomorrow so well we'll be talking about high availability and and that kind of stuff tomorrow more",
    "start": "1240210",
    "end": "1248700"
  },
  {
    "text": "questions I think you had a second",
    "start": "1248700",
    "end": "1254130"
  },
  {
    "text": "question scalability and did the",
    "start": "1254130",
    "end": "1259620"
  },
  {
    "text": "retention you just answered me thank you okay yeah well just data retention you can do it with one single instance or",
    "start": "1259620",
    "end": "1266640"
  },
  {
    "text": "you should be using two but what we've been doing at work for since late 2015",
    "start": "1266640",
    "end": "1272940"
  },
  {
    "text": "we kept the same data within the same systems and it just worked we got into",
    "start": "1272940",
    "end": "1278490"
  },
  {
    "text": "scaling issues towards the end but 2.0 really is changed all that",
    "start": "1278490",
    "end": "1283650"
  },
  {
    "text": "so just long term retention if you take good care of your machines already works within parameters and also I mean if you",
    "start": "1283650",
    "end": "1293280"
  },
  {
    "text": "do the pairing you basically average a it kind of depends on what you want to",
    "start": "1293280",
    "end": "1299940"
  },
  {
    "text": "have here or your availability for if you want to have it for alerts h.a like",
    "start": "1299940",
    "end": "1305400"
  },
  {
    "text": "just having a pair is already way enough if you want to have graphs which are",
    "start": "1305400",
    "end": "1310799"
  },
  {
    "text": "continuous if you need to show them to customers and such currently I would be using cortex you mentioned cortex so how",
    "start": "1310799",
    "end": "1323340"
  },
  {
    "text": "about Sun has compared to cot X what is the liberation between science okay Tom",
    "start": "1323340",
    "end": "1330710"
  },
  {
    "text": "wielkie one of Prometheus team started cortex basically a hosted as a service",
    "start": "1330710",
    "end": "1337220"
  },
  {
    "text": "primitives which is scalable and and runs directly in the cloud so with graph",
    "start": "1337220",
    "end": "1343340"
  },
  {
    "text": "on ax he's currently working at Ravana they actually do like hosted hosts of",
    "start": "1343340",
    "end": "1348679"
  },
  {
    "text": "cortex as a service yep and you so you were asking about Thanos yes so so",
    "start": "1348679",
    "end": "1355549"
  },
  {
    "text": "actually uh my company is actually working or doing the Thanos deployment",
    "start": "1355549",
    "end": "1361720"
  },
  {
    "text": "because I really like the way it uses an existing bucket storage so we're just",
    "start": "1361720",
    "end": "1369080"
  },
  {
    "text": "using the Google compute engine store I think you have to start early yeah so so",
    "start": "1369080",
    "end": "1374090"
  },
  {
    "text": "so CentOS is a different way of doing prometheus scaling where basically",
    "start": "1374090",
    "end": "1379820"
  },
  {
    "text": "instead of having a separate database cluster it takes the data and puts it",
    "start": "1379820",
    "end": "1385759"
  },
  {
    "text": "into a cloud storage so if you have any kind of cloud storage like s3 or Google",
    "start": "1385759",
    "end": "1392960"
  },
  {
    "text": "compute or even Seth you can you can just Dennis will take your data and put",
    "start": "1392960",
    "end": "1399710"
  },
  {
    "text": "it into the external storage and as they basically work on two different layers",
    "start": "1399710",
    "end": "1406239"
  },
  {
    "text": "long-term I expect both tennis and cortex two to merge back together so you basically have these distributors",
    "start": "1406239",
    "end": "1413629"
  },
  {
    "text": "in jesters and emitters and you have object storage based storage down below",
    "start": "1413629",
    "end": "1419619"
  },
  {
    "text": "so you basically have two layers of redundancy yeah I think they're already working on that cortello yes for tennis",
    "start": "1419619",
    "end": "1426799"
  },
  {
    "text": "yes but they were so actually it's just planning yeah I don't know how much more",
    "start": "1426799",
    "end": "1432889"
  },
  {
    "text": "time we have but we'll just so the memory usage of of promises is in is",
    "start": "1432889",
    "end": "1441109"
  },
  {
    "text": "increasing and I was wondering if I",
    "start": "1441109",
    "end": "1447679"
  },
  {
    "text": "could how to reduce the memory usage of promises server okay so the question was",
    "start": "1447679",
    "end": "1456409"
  },
  {
    "text": "how to reduce memory usage of permeate fermitas is designed to use as much memory as it gets but it doesn't need",
    "start": "1456409",
    "end": "1464170"
  },
  {
    "text": "that memory so what it does is it just keeps everything in REM to be quicker when it answers to you but you come on",
    "start": "1464170",
    "end": "1471970"
  },
  {
    "text": "lines like where I can tell it the target value of how much RAM it should know that's gone it's gone yeah so so",
    "start": "1471970",
    "end": "1479110"
  },
  {
    "text": "changed but it's know it's gone there's there's no merit so Prometheus use the Prometheus 2.0 uses as much memory as is",
    "start": "1479110",
    "end": "1487750"
  },
  {
    "text": "needed for storing the ingestion and handling queries so we're currently",
    "start": "1487750",
    "end": "1494740"
  },
  {
    "text": "working on improving our internal metrics so that you can tell is my",
    "start": "1494740",
    "end": "1499840"
  },
  {
    "text": "memory being used by ingestion or is my memory being used by queries so one of the things that we've I discovered was I",
    "start": "1499840",
    "end": "1507010"
  },
  {
    "text": "had a bunch of Gryphon on queries that were written and those graph on a queries used a lot of memory so we went",
    "start": "1507010",
    "end": "1517059"
  },
  {
    "text": "through and created recording rules to optimize to reduce the amount of memory",
    "start": "1517059",
    "end": "1522250"
  },
  {
    "text": "for display and that that significantly reduced the amount of memory so you can",
    "start": "1522250",
    "end": "1527350"
  },
  {
    "text": "use recording rules to pre aggregate data for display and then the other",
    "start": "1527350",
    "end": "1532720"
  },
  {
    "text": "thing is you might just have to it might be you have to shard so if you have one know one single Prometheus server may",
    "start": "1532720",
    "end": "1538870"
  },
  {
    "text": "not be enough once you get a certain amount of ingestion because you need a significant amount of memory to buffer",
    "start": "1538870",
    "end": "1545620"
  },
  {
    "text": "all of that ingestion and it's it's just kind of it's one of those things where",
    "start": "1545620",
    "end": "1551440"
  },
  {
    "text": "Prometheus does need quite a lot of memory but not a lot of CPU we are",
    "start": "1551440",
    "end": "1556630"
  },
  {
    "text": "working on a bunch of optimizations so we've been going through over the last few releases and optimizing our code to",
    "start": "1556630",
    "end": "1564520"
  },
  {
    "text": "reduce the overall memory usage for things like compactions so look in the next few releases the",
    "start": "1564520",
    "end": "1571750"
  },
  {
    "text": "memory usage should start to come down it's still pretty certain you can",
    "start": "1571750",
    "end": "1576880"
  },
  {
    "text": "influence the caching any other",
    "start": "1576880",
    "end": "1584140"
  },
  {
    "text": "questions well not",
    "start": "1584140",
    "end": "1588600"
  },
  {
    "text": "I have a question because currently we collect metrics and super measures to",
    "start": "1590509",
    "end": "1597409"
  },
  {
    "text": "compute the house index of the kubernetes clusters so now we run pro",
    "start": "1597409",
    "end": "1604940"
  },
  {
    "text": "measures inside a cluster I want to ask if it's a good good practice or not or",
    "start": "1604940",
    "end": "1612619"
  },
  {
    "text": "we should move pro measures out of the cluster",
    "start": "1612619",
    "end": "1618219"
  },
  {
    "text": "yeah no it's it's actually totally fine and normal to run Prometheus inside a kubernetes cluster",
    "start": "1620709",
    "end": "1627459"
  },
  {
    "text": "it's totally fine to run it outside the coop it it really doesn't matter it mostly it's it depends on how much",
    "start": "1627459",
    "end": "1634459"
  },
  {
    "text": "durability you want and how durable your storage is inside kubernetes if you've",
    "start": "1634459",
    "end": "1639649"
  },
  {
    "text": "got a good if you've got a good durable storage layer for your kubernetes cluster then it's totally fine to run",
    "start": "1639649",
    "end": "1646849"
  },
  {
    "text": "Prometheus inside the cluster and actually one of the things like the way we deploy it or the way we recommend",
    "start": "1646849",
    "end": "1653959"
  },
  {
    "text": "deploying it is actually deploying a one Prometheus per kubernetes namespace so",
    "start": "1653959",
    "end": "1658999"
  },
  {
    "text": "if you've got multiple applications you can deploy a Prometheus per application and we can we can maybe talk about that",
    "start": "1658999",
    "end": "1666169"
  },
  {
    "text": "more in the deep dive but there's one important consideration if you want to use primitives for monitoring the",
    "start": "1666169",
    "end": "1672679"
  },
  {
    "text": "availability of that cluster you have to have something sitting outside of that cluster looking into it so depending on",
    "start": "1672679",
    "end": "1680959"
  },
  {
    "text": "how important it is to you at least what we do we have physical machines which",
    "start": "1680959",
    "end": "1686149"
  },
  {
    "text": "are dedicated to be used as prometheus instances and those monitor other Prometheus servers to make sure that we",
    "start": "1686149",
    "end": "1692779"
  },
  {
    "text": "know if a certain server goes down course if that server goes down course the cluster is going away you won't have",
    "start": "1692779",
    "end": "1698719"
  },
  {
    "text": "any alerting on the cluster anymore you won't even know that that cluster is gone so you want to have something which",
    "start": "1698719",
    "end": "1704959"
  },
  {
    "text": "looks into that from the outside if you have like ten clusters you can do cross checks between those still there should",
    "start": "1704959",
    "end": "1711739"
  },
  {
    "text": "probably be something sitting outside or above checking all these below yeah",
    "start": "1711739",
    "end": "1716869"
  },
  {
    "text": "similarly we have we we have several different environments in our network and we have one overall ops",
    "start": "1716869",
    "end": "1724279"
  },
  {
    "text": "environment that cross monitors all of the other environments anyone else",
    "start": "1724279",
    "end": "1734889"
  },
  {
    "text": "whilst I recognize it's not the primary use case what is there a preferred",
    "start": "1740400",
    "end": "1745410"
  },
  {
    "text": "long-term metric storage engine at the moment this is a religious question",
    "start": "1745410",
    "end": "1754110"
  },
  {
    "text": "quite sorry so the common path currently would be to take good care of your",
    "start": "1754110",
    "end": "1760780"
  },
  {
    "text": "premises servers ever since 2.0 we can do snapshots so take good backups of",
    "start": "1760780",
    "end": "1766810"
  },
  {
    "text": "that server and then to use either or cortex or Athena's there's people",
    "start": "1766810",
    "end": "1773230"
  },
  {
    "text": "putting stuff into other databases as well they're also happy but if you're asking someone from premises team if the",
    "start": "1773230",
    "end": "1779620"
  },
  {
    "text": "answer it probably be either cortex or tennis yeah and also depending a little bit on what you actually need and what",
    "start": "1779620",
    "end": "1785290"
  },
  {
    "text": "your what your prime targets are if you just want scalability blah blah blah",
    "start": "1785290",
    "end": "1791230"
  },
  {
    "text": "blah blah cortex is probably better if you want to be really certain that the data is not going away I would be",
    "start": "1791230",
    "end": "1796780"
  },
  {
    "text": "currently more looking at panis it kind of depends have time for maybe two more",
    "start": "1796780",
    "end": "1807360"
  },
  {
    "text": "okay boom thank you very much [Applause]",
    "start": "1809130",
    "end": "1817989"
  }
]