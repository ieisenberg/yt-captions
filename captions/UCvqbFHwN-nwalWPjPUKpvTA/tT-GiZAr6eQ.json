[
  {
    "start": "0",
    "end": "45000"
  },
  {
    "text": "hello everyone welcome to the kind deep dive my name is Benjamin elder I'm at",
    "start": "329",
    "end": "5759"
  },
  {
    "text": "Google and this is Antonio is an engineering manager SUSE hello so today",
    "start": "5759",
    "end": "12120"
  },
  {
    "text": "we're going to talk about the cig testing kind project okay what is kind",
    "start": "12120",
    "end": "19859"
  },
  {
    "text": "so kind is kubernetes and docker so we run kubernetes nodes as docker",
    "start": "19859",
    "end": "25949"
  },
  {
    "text": "containers and we built this for testing cookies so you used our containers to",
    "start": "25949",
    "end": "31349"
  },
  {
    "text": "simulate notes they can do multi node you doing H a control plane most importantly we can take communities and",
    "start": "31349",
    "end": "37050"
  },
  {
    "text": "we can build and run it from source which could boot a cluster in around 30 seconds if we're only good in one node",
    "start": "37050",
    "end": "44870"
  },
  {
    "start": "45000",
    "end": "102000"
  },
  {
    "text": "so we one kind for testing kubernetes first of all we're also interested in",
    "start": "45500",
    "end": "50550"
  },
  {
    "text": "testing applications and controllers and the cluster API project has picked up",
    "start": "50550",
    "end": "55649"
  },
  {
    "text": "the bootstrapping we try to support that so for testing kubernetes we want to run",
    "start": "55649",
    "end": "61770"
  },
  {
    "text": "to everything in a block kubernetes is CI is backed by kubernetes so everything",
    "start": "61770",
    "end": "67200"
  },
  {
    "text": "needs to work in a pod and we can run darker and darker in a pod so there we",
    "start": "67200",
    "end": "73770"
  },
  {
    "text": "go can't run geumsan pod we can kind of run containers on the pod we need to be able to build kubernetes from source which a",
    "start": "73770",
    "end": "80670"
  },
  {
    "text": "lot of the local clusters could do and it should at least pass the conformance tests now we're targeting the tests that",
    "start": "80670",
    "end": "88920"
  },
  {
    "text": "we normally already run on pull requests on GCE and at some point cops so we wind",
    "start": "88920",
    "end": "98640"
  },
  {
    "text": "up with darker and darker and darker it's okay",
    "start": "98640",
    "end": "104100"
  },
  {
    "start": "102000",
    "end": "133000"
  },
  {
    "text": "so we pack everything into a node image we put cubelet cube item docker systemd",
    "start": "104100",
    "end": "110759"
  },
  {
    "text": "now we've actually switched to container d recently and the core images are all",
    "start": "110759",
    "end": "116969"
  },
  {
    "text": "preloaded at CD core dns pause cube api server etc so then it works without",
    "start": "116969",
    "end": "122070"
  },
  {
    "text": "depending on the internet at all from locally images we don't have to worry about flakes from things being pulled to nodes",
    "start": "122070",
    "end": "127840"
  },
  {
    "text": "and runtime everything's packed in the image you have the image you can blue cluster so it looks something like this",
    "start": "127840",
    "end": "134770"
  },
  {
    "start": "133000",
    "end": "193000"
  },
  {
    "text": "when it's running so it got darker on the desktop or NCI then we have this",
    "start": "134770",
    "end": "142060"
  },
  {
    "text": "node container and in the node container we've run system D because kubernetes expects cubelet to run under system D be",
    "start": "142060",
    "end": "150970"
  },
  {
    "text": "automatically restarted and most tools do so container T as well um and then it",
    "start": "150970",
    "end": "157390"
  },
  {
    "text": "looks a lot like normal cube atoms so we've got cube proxy we've got a TD you've got core DNS and they're all just containers sort of within this container",
    "start": "157390",
    "end": "164580"
  },
  {
    "text": "now the reason we need to do it this way is that cubelet needs its own runtime",
    "start": "164580",
    "end": "170530"
  },
  {
    "text": "cubelets do not share runtimes with anyone else cuba wants to manage all your containers so in each node we run a",
    "start": "170530",
    "end": "176800"
  },
  {
    "text": "container deep we have all the images there and cubic gets do you think it has",
    "start": "176800",
    "end": "182230"
  },
  {
    "text": "its own machine so now we wind up with container D and docker and container D",
    "start": "182230",
    "end": "189000"
  },
  {
    "text": "which is just fine so what have we been up to well since",
    "start": "189000",
    "end": "196390"
  },
  {
    "start": "193000",
    "end": "321000"
  },
  {
    "text": "the last time we spoke about this here's some of the things so we are now release",
    "start": "196390",
    "end": "201880"
  },
  {
    "text": "blocking signal for kubernetes and presubmit blocking signal for kubernetes so when you send a PR we're gonna run",
    "start": "201880",
    "end": "208300"
  },
  {
    "text": "kind to make sure everything works and before we release kubernetes there's a dashboard with all the test results and",
    "start": "208300",
    "end": "214540"
  },
  {
    "text": "the release team is monitoring to make sure they work how this is nice because kind is vendor agnostic there's no cloud",
    "start": "214540",
    "end": "222489"
  },
  {
    "text": "providers there's no vent or anything it's just playing upstream kubernetes and Antonia will talk about this in a",
    "start": "222489",
    "end": "230470"
  },
  {
    "text": "bit it's also the first time we've actually managed to get ipv6 and CI most of our CIS GCE where that's not an",
    "start": "230470",
    "end": "236830"
  },
  {
    "text": "option because Google has provided the resources for this so we were able to run ipv6 CI on ECE by doing all local",
    "start": "236830",
    "end": "246510"
  },
  {
    "text": "we've been working on some user experience improvements so previously kind of an create",
    "start": "246510",
    "end": "252860"
  },
  {
    "text": "different confirm files for each one because cubed of his output isn't really emerged well and it was just for testing",
    "start": "252860",
    "end": "258440"
  },
  {
    "text": "and we didn't want to clobber your cute config and have somebody get hurt up so we've put some work into that now we do",
    "start": "258440",
    "end": "265250"
  },
  {
    "text": "keep config merging it will just work like a usual tool like chaos sorban cube",
    "start": "265250",
    "end": "270530"
  },
  {
    "text": "or something when you do kind of a cluster it will just be configured and you don't need to think about it",
    "start": "270530",
    "end": "276310"
  },
  {
    "text": "we reworked the patching long time that we use for patching the under now you",
    "start": "276310",
    "end": "281840"
  },
  {
    "text": "config so that if you want to turn on some Advanced Options you can just patch cubed em config directly and our config",
    "start": "281840",
    "end": "287600"
  },
  {
    "text": "and we had a container D conflict patching which we'll be using to prototype and build out local registry",
    "start": "287600",
    "end": "295040"
  },
  {
    "text": "support so that you can configure your registries and everything of the container he config because Tamil was",
    "start": "295040",
    "end": "300650"
  },
  {
    "text": "not something you want to be editing was said we over hold their dependencies and",
    "start": "300650",
    "end": "305750"
  },
  {
    "text": "drop the binary by about 75% if you've worked with kubernetes tool and before you can probably guess my but spoiler",
    "start": "305750",
    "end": "312890"
  },
  {
    "text": "client go and all the API machinery he's pretty big we got rid of that so we",
    "start": "312890",
    "end": "322010"
  },
  {
    "start": "321000",
    "end": "329000"
  },
  {
    "text": "worked on caps a few here in the community you'll recognize stephen augustus here the kept man so we've",
    "start": "322010",
    "end": "330290"
  },
  {
    "start": "329000",
    "end": "394000"
  },
  {
    "text": "brought a kept for building kubernetes without cloud providers at some point the cloud provider sig is moving all of",
    "start": "330290",
    "end": "337220"
  },
  {
    "text": "the cloud providers out of tree to be external but it taking is taking some time and we want to make sure that when",
    "start": "337220",
    "end": "343310"
  },
  {
    "text": "we rip all that code out it's still gonna work okay was like you know it'd be nice if we could test without it and also kind",
    "start": "343310",
    "end": "350240"
  },
  {
    "text": "could build smaller binaries without the cloud providers because the cloud provider packages are really big you",
    "start": "350240",
    "end": "355490"
  },
  {
    "text": "pull in some generated code for a cloud provider API and it could be tens of megabytes each so once this went in we",
    "start": "355490",
    "end": "362600"
  },
  {
    "text": "were able to drop around 220 X from the first image bill which was pretty nice kind images were on the order of like",
    "start": "362600",
    "end": "369380"
  },
  {
    "text": "1.4 gigs so it's a pretty nice reduction and we're hoping to help the cloud",
    "start": "369380",
    "end": "375050"
  },
  {
    "text": "provider removal effort spin up some testing with real clusters using the well we also thanks to the community now",
    "start": "375050",
    "end": "382590"
  },
  {
    "text": "have homebrew and chocolaty packages so you can brew install kine and chocolate install training which is pretty nice",
    "start": "382590",
    "end": "388229"
  },
  {
    "text": "and we have a few other things but this list was getting pretty long so I'm gonna move on now so release blocking CI",
    "start": "388229",
    "end": "396539"
  },
  {
    "start": "394000",
    "end": "417000"
  },
  {
    "text": "so on kerbin ice test grid we are running the conformance tests",
    "start": "396539",
    "end": "401550"
  },
  {
    "text": "we're running a bunch more tests that are closer to what we run on real clouds",
    "start": "401550",
    "end": "407460"
  },
  {
    "text": "not all of it but a lot of it and as you can see it's just right in there with GCE and like chests and GPU as you name",
    "start": "407460",
    "end": "415560"
  },
  {
    "text": "it and we have an increase with walking and one of the things who knows here is",
    "start": "415560",
    "end": "421800"
  },
  {
    "start": "417000",
    "end": "426000"
  },
  {
    "text": "those times are pretty small this time includes cloning but we have a fully to",
    "start": "421800",
    "end": "428669"
  },
  {
    "text": "be sweet and around 20 minutes might be more like 25 there varies a bit but this is inordinately faster than",
    "start": "428669",
    "end": "436949"
  },
  {
    "text": "what we usually have it's normally at least an hour so we're hoping to get that feedback loop a lot tighter for our",
    "start": "436949",
    "end": "443130"
  },
  {
    "text": "contributors so Antonio is gonna talk about some what we've been doing with",
    "start": "443130",
    "end": "448500"
  },
  {
    "start": "445000",
    "end": "475000"
  },
  {
    "text": "the networking okay let's look at the need to block him in kind so this is the",
    "start": "448500",
    "end": "454169"
  },
  {
    "text": "typical cluster that you deploy when you are testing how come you are doing the end-to-end conformance testing so you",
    "start": "454169",
    "end": "460169"
  },
  {
    "text": "have a control player to have two workers and if you look into it you just",
    "start": "460169",
    "end": "465240"
  },
  {
    "text": "see you can see that there are two to kind of network consists a kubernetes networking that's inside the docker",
    "start": "465240",
    "end": "472050"
  },
  {
    "text": "containers and the docker networking so the document working is implemented with",
    "start": "472050",
    "end": "478530"
  },
  {
    "text": "Lib network the lead network is the implementation of the container level model and it support different plugins",
    "start": "478530",
    "end": "486210"
  },
  {
    "text": "we just are using the bridge plugin we are not using double layer or the other planets of the network the good things",
    "start": "486210",
    "end": "492720"
  },
  {
    "text": "with the need network implementation is that it supports activities and it support service for marketp so you can",
    "start": "492720",
    "end": "500000"
  },
  {
    "text": "expose posts in the course from the docker containers in kind we are using",
    "start": "500000",
    "end": "506370"
  },
  {
    "text": "the default which networking there are a lot of requests to support custom bridges but",
    "start": "506370",
    "end": "512099"
  },
  {
    "text": "problem is that docker embeds a DNA cell with a local host address the problem is",
    "start": "512099",
    "end": "517318"
  },
  {
    "text": "that this is writen in the result comes in the docker not and when cubelet",
    "start": "517319",
    "end": "524068"
  },
  {
    "text": "creates a pop install this result of coffee in the pot and it creates a tennis loop because the pod cannot reach",
    "start": "524069",
    "end": "531269"
  },
  {
    "text": "that in that dns server and also corner select the loop is in Cortinas the other",
    "start": "531269",
    "end": "539130"
  },
  {
    "text": "problem that we have with the Lindo goal that we're trying to solve is a nice typical request phone usage that they",
    "start": "539130",
    "end": "546209"
  },
  {
    "text": "want to shut down or would the laptop and bring up the cluster game the",
    "start": "546209",
    "end": "552209"
  },
  {
    "text": "problem is that they open the dr. susan is doesn't guarantee the same ip for the",
    "start": "552209",
    "end": "559410"
  },
  {
    "text": "same content so you can be lucky and the cluster comes up and is working or maybe",
    "start": "559410",
    "end": "567060"
  },
  {
    "text": "it's not working because they don't have the same ip address the other limitation",
    "start": "567060",
    "end": "572610"
  },
  {
    "text": "with Akkad is that the supporting Mac and Windows deployment ation of document Mac and Windows is sushena a better",
    "start": "572610",
    "end": "579389"
  },
  {
    "text": "machine so the problem is that you cannot assist a contain it from the",
    "start": "579389",
    "end": "584759"
  },
  {
    "text": "horse needed a token sila bridge so the only workaround that you have is to",
    "start": "584759",
    "end": "590370"
  },
  {
    "text": "forward port from the mr. machine that teaches in a Mac or Windows and after",
    "start": "590370",
    "end": "596220"
  },
  {
    "text": "the after the services or the continously through this for what the port there are other more tricky ways to",
    "start": "596220",
    "end": "605759"
  },
  {
    "text": "solve this problem but the standard way of solving these provinces for working parts so we see in this diagram the the",
    "start": "605759",
    "end": "616560"
  },
  {
    "text": "workflow how local creates the net",
    "start": "616560",
    "end": "622079"
  },
  {
    "text": "bodies you create the know it basically creates a base pair between the",
    "start": "622079",
    "end": "627990"
  },
  {
    "text": "container not and attaches to the Bristol which docker 0 then it assign an",
    "start": "627990",
    "end": "635519"
  },
  {
    "text": "IP address based on the built-in - driver and use the local resolve dot-com",
    "start": "635519",
    "end": "643589"
  },
  {
    "text": "filters fittin in the locker cause other systems all in there in the docker containers",
    "start": "643589",
    "end": "650250"
  },
  {
    "text": "it also can have a beautiful rules for if you fall you'll do for mapping it at",
    "start": "650250",
    "end": "657500"
  },
  {
    "text": "IP tables to forward the ports then once",
    "start": "657500",
    "end": "663060"
  },
  {
    "start": "661000",
    "end": "713000"
  },
  {
    "text": "we spent at the token how to implement the network we need to understand how",
    "start": "663060",
    "end": "669050"
  },
  {
    "text": "kind the kubernetes manage the network inside the docker knows so basically we",
    "start": "669050",
    "end": "676500"
  },
  {
    "text": "can differentiate two different networking networking models in",
    "start": "676500",
    "end": "683460"
  },
  {
    "text": "kubernetes so desde what working does let's call it the internal networking that is based on the end-to-end",
    "start": "683460",
    "end": "690030"
  },
  {
    "text": "connectivity principle so every pulse should be able to reach every other pot in every other node no not involved and",
    "start": "690030",
    "end": "700140"
  },
  {
    "text": "you have the external to service of the pot to serve the communication that you have different types implemented by",
    "start": "700140",
    "end": "706140"
  },
  {
    "text": "cuban artists at this cluster IP in all four load balancer ingress so to provide",
    "start": "706140",
    "end": "718130"
  },
  {
    "text": "networking to a kubernetes cluster do you need a CNI applied kind by default",
    "start": "718130",
    "end": "723900"
  },
  {
    "text": "while using with but we didn't support the PVC at that time we were looking at",
    "start": "723900",
    "end": "730580"
  },
  {
    "text": "calico and the other problems but the thinnest can use a very simple neighborhood is just a simple bridge",
    "start": "730580",
    "end": "738030"
  },
  {
    "text": "with only one subject there is so simply that we realized that we didn't need all",
    "start": "738030",
    "end": "744060"
  },
  {
    "text": "this extra filter from the common prime so we created our own CNI plugin this",
    "start": "744060",
    "end": "751590"
  },
  {
    "text": "was very simple it's supported ipv6 and the most important thing is that you can",
    "start": "751590",
    "end": "757920"
  },
  {
    "text": "disable it you don't want to use kind net that is our CNI you can disable and",
    "start": "757920",
    "end": "763470"
  },
  {
    "text": "start your own trying kind it is very",
    "start": "763470",
    "end": "768600"
  },
  {
    "start": "767000",
    "end": "811000"
  },
  {
    "text": "simple as they say so most of the heavy lifting of of the of the network implementation is based",
    "start": "768600",
    "end": "775980"
  },
  {
    "text": "on the CNI reference plugins so for creating the both interfaces it uses the",
    "start": "775980",
    "end": "784980"
  },
  {
    "text": "PTP priming that basically create a beeper between the pot and the host then",
    "start": "784980",
    "end": "791850"
  },
  {
    "text": "it calls to the host local host local I pump plugin that is assigning one IP",
    "start": "791850",
    "end": "797310"
  },
  {
    "text": "address based on the subnet the pot cider assignee to the north we are also",
    "start": "797310",
    "end": "804300"
  },
  {
    "text": "using the permit plugin if you want if you want to suppose the pot forced to",
    "start": "804300",
    "end": "809339"
  },
  {
    "text": "the host then the missing part here is",
    "start": "809339",
    "end": "814800"
  },
  {
    "start": "811000",
    "end": "886000"
  },
  {
    "text": "that we need to provide a connectivity between posts between not so kind of",
    "start": "814800",
    "end": "820170"
  },
  {
    "text": "implement to control loops so the first control loop is watching the note expect",
    "start": "820170",
    "end": "827070"
  },
  {
    "text": "to to get the pot cider and then installs route to that pot submit",
    "start": "827070",
    "end": "834150"
  },
  {
    "text": "through that node IP this way we achieved put to port connectivity and this world for ipv4 and for a BBC's is",
    "start": "834150",
    "end": "841890"
  },
  {
    "text": "that simple IP addresses jeans taiwan route from this this course is able to reach the what subnet through that no",
    "start": "841890",
    "end": "849410"
  },
  {
    "text": "the other control loop is installing an IP table rules to not muster up the",
    "start": "849410",
    "end": "856440"
  },
  {
    "text": "traffic we say that kubernetes need a end-to-end connectivity without not",
    "start": "856440",
    "end": "861870"
  },
  {
    "text": "between nodes so this is based on the IP IP masquerading that one is used in",
    "start": "861870",
    "end": "870720"
  },
  {
    "text": "another project but we don't implement it in kind net and result of the scope",
    "start": "870720",
    "end": "876480"
  },
  {
    "text": "is way how to handle the services and this terminal traffic all these english load balancers are not going to be",
    "start": "876480",
    "end": "883380"
  },
  {
    "text": "permitted in kindly so this is a an",
    "start": "883380",
    "end": "888390"
  },
  {
    "start": "886000",
    "end": "1025000"
  },
  {
    "text": "example of how kind it works in a",
    "start": "888390",
    "end": "893400"
  },
  {
    "text": "multicast in a multi node cluster server",
    "start": "893400",
    "end": "899290"
  },
  {
    "text": "so you can see that each node has a different pot subnet assign it because",
    "start": "899290",
    "end": "906460"
  },
  {
    "text": "an IP address assigned to the ETH interface and Kainat is just Italian",
    "start": "906460",
    "end": "912130"
  },
  {
    "text": "routers in style installing the corresponding IP table rules and the CNI plugin sister is",
    "start": "912130",
    "end": "918670"
  },
  {
    "text": "creating with their faces given your IP addresses and you have in format when",
    "start": "918670",
    "end": "923890"
  },
  {
    "text": "necessary so this is we talked before",
    "start": "923890",
    "end": "930370"
  },
  {
    "text": "about the services and disturb the traffic and this is one of the most requested a most problematic cleaning",
    "start": "930370",
    "end": "937330"
  },
  {
    "text": "kind because we have several layers of utilization and this depends a lot on",
    "start": "937330",
    "end": "943810"
  },
  {
    "text": "the local network so when you have a Linux cost you can expose the services",
    "start": "943810",
    "end": "950710"
  },
  {
    "text": "the same way that you are response in the services in a parameter environment so you can use metal be I think that you",
    "start": "950710",
    "end": "957700"
  },
  {
    "text": "have a great tutorial on how to use metal the biggest kind the otherwise just just I'll install one route to to",
    "start": "957700",
    "end": "966490"
  },
  {
    "text": "the service subnet through one of the nodes of the cluster and then you can",
    "start": "966490",
    "end": "971710"
  },
  {
    "text": "start to support the services using the kubernetes services like not for crowd",
    "start": "971710",
    "end": "977020"
  },
  {
    "text": "you can reach the cluster a period you can also switch the the pod IP addresses",
    "start": "977020",
    "end": "982360"
  },
  {
    "text": "the problem is when you are using mac and windows course because we say that you cannot reach this the containers",
    "start": "982360",
    "end": "990130"
  },
  {
    "text": "territory so you need to start to forward and to change port forwarding rules and this is the",
    "start": "990130",
    "end": "997420"
  },
  {
    "text": "tricky part with the multi no crusted there are a lot of different solutions",
    "start": "997420",
    "end": "1003590"
  },
  {
    "text": "there is no a standard way some people is running an English with in a cosmic",
    "start": "1003590",
    "end": "1009810"
  },
  {
    "text": "war port other people is just using node court and this a very nice solution using",
    "start": "1009810",
    "end": "1017910"
  },
  {
    "text": "inlets that's basically basically standard in the ingress service and were",
    "start": "1017910",
    "end": "1026220"
  },
  {
    "start": "1025000",
    "end": "1178000"
  },
  {
    "text": "able to do so I'm gonna step in for a little demo here hopefully it goes fine or my laptop",
    "start": "1026220",
    "end": "1034130"
  },
  {
    "text": "can block",
    "start": "1034130",
    "end": "1036730"
  },
  {
    "text": "okay so I want to show you how easy this is so I have kind my laptop it's a",
    "start": "1043390",
    "end": "1051220"
  },
  {
    "text": "little bit ahead but it's more or less the most recent release so to create a cluster and literally just do time",
    "start": "1051220",
    "end": "1059140"
  },
  {
    "text": "create cluster so what it's doing right now is it made sure that the node image is available which has everything packed",
    "start": "1059140",
    "end": "1064900"
  },
  {
    "text": "into it it started a container we wrote some configuration for things like container to UK metal now we're starting the",
    "start": "1064900",
    "end": "1072040"
  },
  {
    "text": "control plane this is basically just keep Ataman it that'll run for a little bit wait for the API server to be",
    "start": "1072040",
    "end": "1077830"
  },
  {
    "text": "healthy depending on your host it may be tens of seconds it may be a little bit",
    "start": "1077830",
    "end": "1082929"
  },
  {
    "text": "longer hopefully I'll be pretty sure right here sorry this is on my Mac this is it",
    "start": "1082929",
    "end": "1089470"
  },
  {
    "text": "totally on my Mac I am not trying to use conference wipe so this is done so if we",
    "start": "1089470",
    "end": "1096610"
  },
  {
    "text": "do",
    "start": "1096610",
    "end": "1098820"
  },
  {
    "text": "well they're not registered yet because they are all static quads but here we go so now we've got some fawns coming up so",
    "start": "1104280",
    "end": "1111450"
  },
  {
    "text": "what else happened we installed kind of the C&I we installed a storage class it's not super",
    "start": "1111450",
    "end": "1118060"
  },
  {
    "text": "great we'll talk about that in a bit and we set the cube cuddle context so it just works previously in kind has invention we had",
    "start": "1118060",
    "end": "1123940"
  },
  {
    "text": "a separate one but now we will always install the contacts this prefix with kind you can tell it's kind and just out",
    "start": "1123940",
    "end": "1129430"
  },
  {
    "text": "of the box you'll be able to talk to it and we can see now that most of our pods are running or DNS will schedule next",
    "start": "1129430",
    "end": "1136210"
  },
  {
    "text": "now that the to proxy is up and give it",
    "start": "1136210",
    "end": "1142120"
  },
  {
    "text": "a little bit more it's about warmed up now we have DNS everything should work you can avoid things so and around a",
    "start": "1142120",
    "end": "1149050"
  },
  {
    "text": "minute if you're lucky you'll have a cluster ready to go and we hope that this means that people will just create",
    "start": "1149050",
    "end": "1155500"
  },
  {
    "text": "and delete clusters to no end we want you to test and a totally clean environment reproducible whenever we",
    "start": "1155500",
    "end": "1162010"
  },
  {
    "text": "host so when we're done we just tell",
    "start": "1162010",
    "end": "1169090"
  },
  {
    "text": "kind of delete it goes away easy as that",
    "start": "1169090",
    "end": "1174240"
  },
  {
    "text": "so what's next well we really want to be",
    "start": "1175110",
    "end": "1181630"
  },
  {
    "start": "1178000",
    "end": "1391000"
  },
  {
    "text": "running more of the kubernetes tests we want to reach as close to full parity with cloud-based testing and pre cement",
    "start": "1181630",
    "end": "1188830"
  },
  {
    "text": "as we can and possibly even just phase that out and say you want to test your cloud providers great let's do it we'll",
    "start": "1188830",
    "end": "1195670"
  },
  {
    "text": "put it in post submit if you've got clean signal the release team will pay attention to it but nobody's PR needs to past it we want to get persistent volume",
    "start": "1195670",
    "end": "1204610"
  },
  {
    "text": "support that works across multiple nodes there are a number of local persistent volume implementations but no one really",
    "start": "1204610",
    "end": "1211660"
  },
  {
    "text": "has one yet that works well with multiple nodes there are a few that do",
    "start": "1211660",
    "end": "1217660"
  },
  {
    "text": "work with multiple nodes but they'll pin all of the workloads to the one node where it's running it just doesn't",
    "start": "1217660",
    "end": "1223300"
  },
  {
    "text": "really help you test things like rolling deployments which is one of the only reasons you'd actually want multiple",
    "start": "1223300",
    "end": "1228400"
  },
  {
    "text": "nodes locally these nodes are not getting you more compute or more RAM they're just letting kubernetes treat it",
    "start": "1228400",
    "end": "1233530"
  },
  {
    "text": "as multiple nodes so you can do things like rolling updates so we're working with six storage there we're gonna try",
    "start": "1233530",
    "end": "1241180"
  },
  {
    "text": "to push that forward some more there are some work with the CSI plugins to have a",
    "start": "1241180",
    "end": "1247510"
  },
  {
    "text": "generic general support for running a daemon set of drivers for storage and",
    "start": "1247510",
    "end": "1255430"
  },
  {
    "text": "then there is a local storage driver we can run that and that will open up also running other drivers as Damon sets",
    "start": "1255430",
    "end": "1261430"
  },
  {
    "text": "where anywhere you would want to have one like per node we want to make an",
    "start": "1261430",
    "end": "1266800"
  },
  {
    "text": "integrated kubernetes testing workflow right now we have a shell script right it's not too bad we want to make sure that you can take kind and scripted for",
    "start": "1266800",
    "end": "1273490"
  },
  {
    "text": "years case but since our number one original goal was testing the kubernetes project itself we plan to have one",
    "start": "1273490",
    "end": "1280600"
  },
  {
    "text": "command that you just run and it just does what priests and it does so you don't need to think about it we don't want you fiddling any knobs trying to",
    "start": "1280600",
    "end": "1286930"
  },
  {
    "text": "figure out what the flags are just install kind run the command it'll test it we're gonna try to figure out that host",
    "start": "1286930",
    "end": "1293550"
  },
  {
    "text": "restart support we fixed most of the problems but that network one needs a little bit more exploring what we're",
    "start": "1293550",
    "end": "1299820"
  },
  {
    "text": "gonna do with DNS like Antonia mentioned when you do not use the default docker",
    "start": "1299820",
    "end": "1304980"
  },
  {
    "text": "bridge docker breaks some behavior there it's not the same and so they've intentionally not ever change that on",
    "start": "1304980",
    "end": "1311460"
  },
  {
    "text": "the default bridge because it is pretty definite breaking behavior oh we didn't realize that I told that later in the",
    "start": "1311460",
    "end": "1316680"
  },
  {
    "text": "project so we're gonna have to look at how we can handle that and we've started working on better support for local",
    "start": "1316680",
    "end": "1323130"
  },
  {
    "text": "registries so one thing I should have shown I did show is a core work flowing kinda is side loading images so you",
    "start": "1323130",
    "end": "1330780"
  },
  {
    "text": "build your image locally you're gonna test it you do kinda load docker image and it will just take that image and",
    "start": "1330780",
    "end": "1336750"
  },
  {
    "text": "stick it on all the nodes in the cluster and you can filter down to other nodes if you want and so what that lets you do",
    "start": "1336750",
    "end": "1341760"
  },
  {
    "text": "is without any network content lead very simply on any host take an image stick",
    "start": "1341760",
    "end": "1348690"
  },
  {
    "text": "it in to find clustered it's available you can run a deployment with it etc alright there are a couple of drawbacks",
    "start": "1348690",
    "end": "1354180"
  },
  {
    "text": "like if you're really iterating doing this all time as opposed to just like a test rig you're gonna want to avoid",
    "start": "1354180",
    "end": "1359550"
  },
  {
    "text": "pushing layers you've already pushed so we can do some work to make it avoid that but we can really do that already",
    "start": "1359550",
    "end": "1365340"
  },
  {
    "text": "works out of the box is a registry and we can persist it separately from the kind cluster so you can continue to",
    "start": "1365340",
    "end": "1370800"
  },
  {
    "text": "create and delete clusters and have that clean state but already have your images pushed and available to kind so we've",
    "start": "1370800",
    "end": "1377970"
  },
  {
    "text": "got a tutorial on the site now that will let you do this with a little bit of bash and some new features that we have",
    "start": "1377970",
    "end": "1383340"
  },
  {
    "text": "but we really want to have a very clean push button UX for that so we're looking at that next so if you're interested",
    "start": "1383340",
    "end": "1392460"
  },
  {
    "start": "1391000",
    "end": "1421000"
  },
  {
    "text": "come join us we have the bi-weekly sub project meetings under stick testing we",
    "start": "1392460",
    "end": "1397500"
  },
  {
    "text": "also tend to attend we are now bi-weekly sig testing meetings or reachable on the",
    "start": "1397500",
    "end": "1404280"
  },
  {
    "text": "community sick testing mailing list there is a kind channel and the kubernetes slack we're also in the SiC",
    "start": "1404280",
    "end": "1409350"
  },
  {
    "text": "testing channel if you burn any slack our repo is at 16 set aside and that is also a go get herbal bath",
    "start": "1409350",
    "end": "1415540"
  },
  {
    "text": "though you want to turn on modules and we have docs at kind on six I kiss too",
    "start": "1415540",
    "end": "1420890"
  },
  {
    "text": "so thanks for coming anyone have any questions",
    "start": "1420890",
    "end": "1426790"
  },
  {
    "text": "for patching um no so something else",
    "start": "1429610",
    "end": "1435740"
  },
  {
    "text": "that again that's like we can get a wall on one of the next things I want to do is write a guide for every feature in",
    "start": "1435740",
    "end": "1442220"
  },
  {
    "text": "the config now that we've got a new format that's a little bit better with the last one where you're struggling for a bit we were using go doc to document",
    "start": "1442220",
    "end": "1449120"
  },
  {
    "text": "things and it's just not that great way of documenting a good thing so we're gonna write a dedicated page you just for how to use config but there are some",
    "start": "1449120",
    "end": "1457850"
  },
  {
    "text": "examples in the repo and we will be doing some at a workshop tomorrow",
    "start": "1457850",
    "end": "1464590"
  },
  {
    "text": "it is and kubernetes ci we do this I don't really recommend it there are a",
    "start": "1476980",
    "end": "1482710"
  },
  {
    "text": "number of pitfalls but criminai CIS terminated space so we do it you need to",
    "start": "1482710",
    "end": "1488440"
  },
  {
    "text": "run docker and docker or similar and then you're gonna need to handle a couple of things like making sure you",
    "start": "1488440",
    "end": "1493810"
  },
  {
    "text": "clean up properly and there are things like probably your kubernetes hosts",
    "start": "1493810",
    "end": "1499210"
  },
  {
    "text": "aren't expecting to have multiple cubelets on them so they're resource when it's not going to be tuned for this so there's things like inotify limits",
    "start": "1499210",
    "end": "1506920"
  },
  {
    "text": "that are not named spaced so if you run a bunch of kind clusters on a host they'll bump up against the limit that",
    "start": "1506920",
    "end": "1513040"
  },
  {
    "text": "would have been reasonable for one cubed but are not reasonable for like five two words",
    "start": "1513040",
    "end": "1518460"
  },
  {
    "text": "that is a party trick that I have a prototype for I'm not sure I don't want",
    "start": "1533370",
    "end": "1538870"
  },
  {
    "text": "to ship it okay it will be a really good",
    "start": "1538870",
    "end": "1547330"
  },
  {
    "text": "name I also hope no one actually uses it so [Laughter]",
    "start": "1547330",
    "end": "1554660"
  },
  {
    "text": "we've got some work on that we've decoupled most of the internals so like",
    "start": "1560730",
    "end": "1566440"
  },
  {
    "text": "kind create cluster is not very comfy docker there's a provider interface for creating and listing Paulo nodes and",
    "start": "1566440",
    "end": "1573250"
  },
  {
    "text": "whatnot and in the nodes themselves have a simple interface for interacting with them the problem is just that it's a bit",
    "start": "1573250",
    "end": "1580510"
  },
  {
    "text": "to maintain and the kubernetes project itself doesn't need it so we're leaving some rings for it to be possible in the",
    "start": "1580510",
    "end": "1586450"
  },
  {
    "text": "future but we're not pushing it that strongly um at some point we'd be particularly interested in things where",
    "start": "1586450",
    "end": "1592810"
  },
  {
    "text": "we run docker images as VMs because there are a couple things that we can't",
    "start": "1592810",
    "end": "1597820"
  },
  {
    "text": "quite do right like lot security policy may go away anyhow it looks like but we can't",
    "start": "1597820",
    "end": "1604240"
  },
  {
    "text": "support properly and kind because we don't know if your host has the right like a farmer or whatever um so we just",
    "start": "1604240",
    "end": "1610660"
  },
  {
    "text": "don't support that if we had a mode where we ran has VMs we wouldn't want to",
    "start": "1610660",
    "end": "1615760"
  },
  {
    "text": "use that incriminated see I probably but it might be useful for local development we can use those same images and not",
    "start": "1615760",
    "end": "1621700"
  },
  {
    "text": "change the codebase too much the biggest problem has been that just things are not that compatible and it's already",
    "start": "1621700",
    "end": "1627220"
  },
  {
    "text": "very new tricky to just get things to work right inside of docker a lot of",
    "start": "1627220",
    "end": "1633010"
  },
  {
    "text": "kind is pretty simple but just getting things just right so that you can actually get all these things sort of run in the containers",
    "start": "1633010",
    "end": "1639120"
  },
  {
    "text": "any problematic and different container runtimes they're a bit different",
    "start": "1639120",
    "end": "1644360"
  },
  {
    "text": "you",
    "start": "1654020",
    "end": "1656560"
  },
  {
    "text": "yes yeah and we know there's some rough edges there because it was the initial",
    "start": "1664620",
    "end": "1669789"
  },
  {
    "text": "use case like for example we're talking about we want to make like local registry is a better thing and we're",
    "start": "1669789",
    "end": "1675460"
  },
  {
    "text": "taking a little over time because every time we had a feature people immediately depend on it trying to get it right but",
    "start": "1675460",
    "end": "1681159"
  },
  {
    "text": "yeah so um a team I work with at Google works on sto and they've moved most of",
    "start": "1681159",
    "end": "1686889"
  },
  {
    "text": "their CI to it so they're also using it for local development I actually did a talk in Barcelona it should be recorded",
    "start": "1686889",
    "end": "1693190"
  },
  {
    "text": "at the last cube con about testing your apps with it we also talked a bit about when you'd want to use it when you might",
    "start": "1693190",
    "end": "1698769"
  },
  {
    "text": "want to do just something like unit testing and where that pulse",
    "start": "1698769",
    "end": "1703559"
  },
  {
    "text": "I was on a job thank you okay",
    "start": "1712720",
    "end": "1721169"
  },
  {
    "text": "no it should be possible in fact so we have a repo github.com kind - CI /",
    "start": "1732610",
    "end": "1740240"
  },
  {
    "text": "examples and I believe honest here just PR support for that two weeks ago three",
    "start": "1740240",
    "end": "1749419"
  },
  {
    "text": "weeks ago something like that",
    "start": "1749419",
    "end": "1752380"
  },
  {
    "text": "and we're definitely interested in that the kubernetes project has a lot of Google Cloud credits for doing",
    "start": "1758570",
    "end": "1764000"
  },
  {
    "text": "development and Google Cloud build has some nice properties around being an isolated disposable environment that",
    "start": "1764000",
    "end": "1770480"
  },
  {
    "text": "would be pretty suitable for kind",
    "start": "1770480",
    "end": "1773770"
  },
  {
    "text": "so you so we have a tutorial for how you can use that now but it's the things like maybe kind discovering it and",
    "start": "1787100",
    "end": "1792380"
  },
  {
    "text": "configuring it in the nose for you or something like that and like having lifecycle management for it so that you",
    "start": "1792380",
    "end": "1799399"
  },
  {
    "text": "know some developers are gonna be really comfortable deploying this and hacking up there kind of use it but other people",
    "start": "1799399",
    "end": "1804740"
  },
  {
    "text": "may not be familiar with that we get a lot of people that are just starting with kubernetes so something they can just push a button and it works",
    "start": "1804740",
    "end": "1811720"
  },
  {
    "text": "who else well thank you all for coming if you",
    "start": "1816410",
    "end": "1823030"
  },
  {
    "text": "want stickers we have a ton of them up here we'll be pulling those out thanks",
    "start": "1823030",
    "end": "1829230"
  },
  {
    "text": "[Applause]",
    "start": "1829760",
    "end": "1834859"
  }
]