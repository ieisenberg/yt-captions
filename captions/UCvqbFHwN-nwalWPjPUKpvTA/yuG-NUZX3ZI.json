[
  {
    "text": "hello everybody welcome to this",
    "start": "640",
    "end": "2879"
  },
  {
    "text": "presentation about extending system day",
    "start": "2879",
    "end": "5279"
  },
  {
    "text": "security features with ebpf",
    "start": "5279",
    "end": "7839"
  },
  {
    "text": "i'm mauricio vazquez and i work for",
    "start": "7839",
    "end": "10800"
  },
  {
    "text": "microsoft",
    "start": "10800",
    "end": "12799"
  },
  {
    "text": "before i start talking about the work",
    "start": "12799",
    "end": "15360"
  },
  {
    "text": "that we did to introduce some new",
    "start": "15360",
    "end": "17680"
  },
  {
    "text": "security features based on bpa for",
    "start": "17680",
    "end": "19920"
  },
  {
    "text": "systemd i want to",
    "start": "19920",
    "end": "22320"
  },
  {
    "text": "talk about the security features uh",
    "start": "22320",
    "end": "24400"
  },
  {
    "text": "where array this is in there before with",
    "start": "24400",
    "end": "26560"
  },
  {
    "text": "this on of our work so yeah before",
    "start": "26560",
    "end": "30560"
  },
  {
    "text": "we implemented these security features",
    "start": "30560",
    "end": "32960"
  },
  {
    "text": "uh csnd already supported some features",
    "start": "32960",
    "end": "36000"
  },
  {
    "text": "based on ebpf and the first feature",
    "start": "36000",
    "end": "39360"
  },
  {
    "text": "supported was the ip firewall in this",
    "start": "39360",
    "end": "42800"
  },
  {
    "text": "case this feature allows us to count the",
    "start": "42800",
    "end": "45920"
  },
  {
    "text": "ap packets based on the ap and also to",
    "start": "45920",
    "end": "48640"
  },
  {
    "text": "deny or to allow those packets based on",
    "start": "48640",
    "end": "51600"
  },
  {
    "text": "the ap address of of those packets",
    "start": "51600",
    "end": "54960"
  },
  {
    "text": "in this case those programs were",
    "start": "54960",
    "end": "57360"
  },
  {
    "text": "implemented by writing the ebpf code",
    "start": "57360",
    "end": "60000"
  },
  {
    "text": "directly in assembly there was some kind",
    "start": "60000",
    "end": "62800"
  },
  {
    "text": "of custom compiler that translated a",
    "start": "62800",
    "end": "66960"
  },
  {
    "text": "configuration provided by the user to",
    "start": "66960",
    "end": "70000"
  },
  {
    "text": "the ebpf assembly code",
    "start": "70000",
    "end": "72640"
  },
  {
    "text": "another feature related to ebpf in csnd",
    "start": "72640",
    "end": "76640"
  },
  {
    "text": "was the costs and the support for custom",
    "start": "76640",
    "end": "79200"
  },
  {
    "text": "programs also for the ap",
    "start": "79200",
    "end": "81439"
  },
  {
    "text": "firewall in this case the the user can",
    "start": "81439",
    "end": "84799"
  },
  {
    "text": "implement its own",
    "start": "84799",
    "end": "88240"
  },
  {
    "text": "ebpf program so the user can compile the",
    "start": "88240",
    "end": "91360"
  },
  {
    "text": "program and the user also is in charge",
    "start": "91360",
    "end": "94320"
  },
  {
    "text": "of loading and pinning the programs and",
    "start": "94320",
    "end": "96799"
  },
  {
    "text": "then",
    "start": "96799",
    "end": "97920"
  },
  {
    "text": "the only thing that is passed to ccnd in",
    "start": "97920",
    "end": "100479"
  },
  {
    "text": "this case is the part of those pain",
    "start": "100479",
    "end": "102960"
  },
  {
    "text": "programs in the vpf file system",
    "start": "102960",
    "end": "107920"
  },
  {
    "text": "some months ago",
    "start": "108960",
    "end": "111439"
  },
  {
    "text": "csnd got support for libby pf so there",
    "start": "111439",
    "end": "114479"
  },
  {
    "text": "was a new property implemented there",
    "start": "114479",
    "end": "117280"
  },
  {
    "text": "that is called allow buying ports and",
    "start": "117280",
    "end": "120000"
  },
  {
    "text": "this is the first property that was",
    "start": "120000",
    "end": "122560"
  },
  {
    "text": "implemented by using the ebpf support in",
    "start": "122560",
    "end": "124640"
  },
  {
    "text": "systemd",
    "start": "124640",
    "end": "126079"
  },
  {
    "text": "by using this property the users are",
    "start": "126079",
    "end": "128800"
  },
  {
    "text": "able to restrict the set of parts that",
    "start": "128800",
    "end": "130959"
  },
  {
    "text": "an application can bind to",
    "start": "130959",
    "end": "133200"
  },
  {
    "text": "and this was done by julia from facebook",
    "start": "133200",
    "end": "136160"
  },
  {
    "text": "and this is already released this is",
    "start": "136160",
    "end": "138800"
  },
  {
    "text": "available on the latest system the",
    "start": "138800",
    "end": "141599"
  },
  {
    "text": "release that is a version 249.",
    "start": "141599",
    "end": "146000"
  },
  {
    "text": "the nice thing about the word the julia",
    "start": "146000",
    "end": "148640"
  },
  {
    "text": "di is that",
    "start": "148640",
    "end": "150400"
  },
  {
    "text": "this work also introduced support for",
    "start": "150400",
    "end": "153200"
  },
  {
    "text": "libby pf in cindy so it was not only",
    "start": "153200",
    "end": "155599"
  },
  {
    "text": "about implementing this allowed by parts",
    "start": "155599",
    "end": "158000"
  },
  {
    "text": "but",
    "start": "158000",
    "end": "158720"
  },
  {
    "text": "a whole framework for implementing new",
    "start": "158720",
    "end": "161400"
  },
  {
    "text": "functionalities based on ebpf that use",
    "start": "161400",
    "end": "164480"
  },
  {
    "text": "libpf",
    "start": "164480",
    "end": "165760"
  },
  {
    "text": "were merged on systemd",
    "start": "165760",
    "end": "169360"
  },
  {
    "text": "so why is this support relevant okay the",
    "start": "169360",
    "end": "173840"
  },
  {
    "text": "first thing important for us is that by",
    "start": "173840",
    "end": "177040"
  },
  {
    "text": "having the support this is much easier",
    "start": "177040",
    "end": "179040"
  },
  {
    "text": "to develop to implement new ebpf based",
    "start": "179040",
    "end": "182640"
  },
  {
    "text": "features this is mainly because",
    "start": "182640",
    "end": "185519"
  },
  {
    "text": "by using libpar we don't have to worry",
    "start": "185519",
    "end": "187599"
  },
  {
    "text": "about writing the code in assembly so we",
    "start": "187599",
    "end": "190959"
  },
  {
    "text": "can write the code inside to see we can",
    "start": "190959",
    "end": "193360"
  },
  {
    "text": "use clan to compile to ebpf assembly",
    "start": "193360",
    "end": "196560"
  },
  {
    "text": "code so yeah this is much easier this is",
    "start": "196560",
    "end": "199440"
  },
  {
    "text": "just the same as in other programming",
    "start": "199440",
    "end": "201280"
  },
  {
    "text": "languages that we are usually writing",
    "start": "201280",
    "end": "203280"
  },
  {
    "text": "the coding",
    "start": "203280",
    "end": "204640"
  },
  {
    "text": "in high level languages and using a",
    "start": "204640",
    "end": "206480"
  },
  {
    "text": "compiler to",
    "start": "206480",
    "end": "208080"
  },
  {
    "text": "generate assembly code this is in the",
    "start": "208080",
    "end": "210799"
  },
  {
    "text": "specific case or ebp if there is no",
    "start": "210799",
    "end": "213519"
  },
  {
    "text": "that many people that is able to write",
    "start": "213519",
    "end": "215519"
  },
  {
    "text": "ebpf assembly code and yeah this is",
    "start": "215519",
    "end": "218159"
  },
  {
    "text": "slower to to develop a functionality",
    "start": "218159",
    "end": "221040"
  },
  {
    "text": "using assembly",
    "start": "221040",
    "end": "222720"
  },
  {
    "text": "and",
    "start": "222720",
    "end": "223599"
  },
  {
    "text": "this is also very difficult to maintain",
    "start": "223599",
    "end": "226000"
  },
  {
    "text": "also yeah in summary",
    "start": "226000",
    "end": "228720"
  },
  {
    "text": "developing the programs using",
    "start": "228720",
    "end": "231519"
  },
  {
    "text": "c is much easier and",
    "start": "231519",
    "end": "234720"
  },
  {
    "text": "faster for for us",
    "start": "234720",
    "end": "237040"
  },
  {
    "text": "the other important factor about lvpf is",
    "start": "237040",
    "end": "240239"
  },
  {
    "text": "that we have the full",
    "start": "240239",
    "end": "242560"
  },
  {
    "text": "libidpf api available so by using this",
    "start": "242560",
    "end": "245360"
  },
  {
    "text": "library where we are able to handle the",
    "start": "245360",
    "end": "248000"
  },
  {
    "text": "different dpf objects in the kernel so",
    "start": "248000",
    "end": "250239"
  },
  {
    "text": "for instance we are able to create the",
    "start": "250239",
    "end": "251760"
  },
  {
    "text": "maps we are able to update delete get",
    "start": "251760",
    "end": "255599"
  },
  {
    "text": "the elements in a map we are able to",
    "start": "255599",
    "end": "257680"
  },
  {
    "text": "load the programs in the kernel to",
    "start": "257680",
    "end": "259759"
  },
  {
    "text": "attach those programs to the different",
    "start": "259759",
    "end": "262160"
  },
  {
    "text": "hook points and so on so there are",
    "start": "262160",
    "end": "265040"
  },
  {
    "text": "so many functions in the",
    "start": "265040",
    "end": "267520"
  },
  {
    "text": "lbpf api that we that we",
    "start": "267520",
    "end": "270720"
  },
  {
    "text": "have now available on systemd",
    "start": "270720",
    "end": "273919"
  },
  {
    "text": "the tennis bar can be a little bit",
    "start": "273919",
    "end": "276400"
  },
  {
    "text": "obvious but i want to make it clear why",
    "start": "276400",
    "end": "278400"
  },
  {
    "text": "we chose to use libpf so",
    "start": "278400",
    "end": "282639"
  },
  {
    "text": "libyapf is the official kernel library",
    "start": "282639",
    "end": "286800"
  },
  {
    "text": "for ebpfs actually this is this library",
    "start": "286800",
    "end": "290080"
  },
  {
    "text": "is directly developed in the",
    "start": "290080",
    "end": "292639"
  },
  {
    "text": "kernel source tree so",
    "start": "292639",
    "end": "294800"
  },
  {
    "text": "this is this is important for us because",
    "start": "294800",
    "end": "296800"
  },
  {
    "text": "each time there is a new",
    "start": "296800",
    "end": "298800"
  },
  {
    "text": "kernel feature related to ebpf this",
    "start": "298800",
    "end": "301919"
  },
  {
    "text": "support is implemented in in liberia so",
    "start": "301919",
    "end": "304639"
  },
  {
    "text": "we can say that libidpf is always",
    "start": "304639",
    "end": "307360"
  },
  {
    "text": "updated to",
    "start": "307360",
    "end": "308800"
  },
  {
    "text": "support the latest kernel their htc vpf",
    "start": "308800",
    "end": "312800"
  },
  {
    "text": "features in the linux kernel",
    "start": "312800",
    "end": "315280"
  },
  {
    "text": "some of those features that are",
    "start": "315280",
    "end": "317520"
  },
  {
    "text": "interesting for us regarding the",
    "start": "317520",
    "end": "320240"
  },
  {
    "text": "implementation that we did for ccnt are",
    "start": "320240",
    "end": "322960"
  },
  {
    "text": "compiled once run everywhere so this is",
    "start": "322960",
    "end": "325759"
  },
  {
    "text": "a technology that allows us to compile",
    "start": "325759",
    "end": "328960"
  },
  {
    "text": "the abpf program while we compile the",
    "start": "328960",
    "end": "331919"
  },
  {
    "text": "whole system binary",
    "start": "331919",
    "end": "334720"
  },
  {
    "text": "and then we just deploy that program in",
    "start": "334720",
    "end": "337199"
  },
  {
    "text": "the different target machines without",
    "start": "337199",
    "end": "339520"
  },
  {
    "text": "having to to recompile that",
    "start": "339520",
    "end": "342960"
  },
  {
    "text": "i will explain a little bit more about",
    "start": "342960",
    "end": "344880"
  },
  {
    "text": "that in a second the second feature that",
    "start": "344880",
    "end": "347360"
  },
  {
    "text": "was interesting for us is bpf skeleton",
    "start": "347360",
    "end": "349840"
  },
  {
    "text": "so",
    "start": "349840",
    "end": "351120"
  },
  {
    "text": "the bpf skeleton is a mechanism that is",
    "start": "351120",
    "end": "353600"
  },
  {
    "text": "implemented in bpf tool",
    "start": "353600",
    "end": "356479"
  },
  {
    "text": "by using it we are able to get a c",
    "start": "356479",
    "end": "360240"
  },
  {
    "text": "representation we are able to generate a",
    "start": "360240",
    "end": "362479"
  },
  {
    "text": "skeleton from an",
    "start": "362479",
    "end": "364240"
  },
  {
    "text": "bpf object file that represents all the",
    "start": "364240",
    "end": "367120"
  },
  {
    "text": "elements that are inside that file so",
    "start": "367120",
    "end": "369440"
  },
  {
    "text": "for instance when we route the",
    "start": "369440",
    "end": "372319"
  },
  {
    "text": "bpf program with the find some maps we",
    "start": "372319",
    "end": "374639"
  },
  {
    "text": "define some programs and so on and we",
    "start": "374639",
    "end": "377120"
  },
  {
    "text": "can handle all of those by using this",
    "start": "377120",
    "end": "380240"
  },
  {
    "text": "this skeleton so this is a",
    "start": "380240",
    "end": "382080"
  },
  {
    "text": "simplification that makes it easier",
    "start": "382080",
    "end": "384319"
  },
  {
    "text": "again to implement",
    "start": "384319",
    "end": "386639"
  },
  {
    "text": "and to handle the ebpf programs maps and",
    "start": "386639",
    "end": "390000"
  },
  {
    "text": "so on",
    "start": "390000",
    "end": "392400"
  },
  {
    "text": "okay so let's go into the details of the",
    "start": "392400",
    "end": "395120"
  },
  {
    "text": "different properties that we implement",
    "start": "395120",
    "end": "398000"
  },
  {
    "text": "actually we we did",
    "start": "398000",
    "end": "400400"
  },
  {
    "text": "two of them the",
    "start": "400400",
    "end": "402319"
  },
  {
    "text": "first one is restoration network",
    "start": "402319",
    "end": "404240"
  },
  {
    "text": "interfaces as",
    "start": "404240",
    "end": "406080"
  },
  {
    "text": "it is implicit in the name this is for",
    "start": "406080",
    "end": "408160"
  },
  {
    "text": "restricting the",
    "start": "408160",
    "end": "410080"
  },
  {
    "text": "the network interfaces the processes can",
    "start": "410080",
    "end": "412800"
  },
  {
    "text": "access we",
    "start": "412800",
    "end": "414400"
  },
  {
    "text": "support both analog or and deny list",
    "start": "414400",
    "end": "419919"
  },
  {
    "text": "yeah for instance this co this could be",
    "start": "419919",
    "end": "421840"
  },
  {
    "text": "used when we know that there is a",
    "start": "421840",
    "end": "423520"
  },
  {
    "text": "service that shouldn't be accessing the",
    "start": "423520",
    "end": "425840"
  },
  {
    "text": "the internet so in that case we could",
    "start": "425840",
    "end": "429280"
  },
  {
    "text": "whether we coordinate the traffic on the",
    "start": "429280",
    "end": "431520"
  },
  {
    "text": "internet facing network interface",
    "start": "431520",
    "end": "434319"
  },
  {
    "text": "or",
    "start": "434319",
    "end": "435280"
  },
  {
    "text": "we could lock that interface to the load",
    "start": "435280",
    "end": "438160"
  },
  {
    "text": "back okay sorry",
    "start": "438160",
    "end": "440000"
  },
  {
    "text": "lock that service to the loopback",
    "start": "440000",
    "end": "442400"
  },
  {
    "text": "interface so we have different options",
    "start": "442400",
    "end": "444479"
  },
  {
    "text": "so the idea is",
    "start": "444479",
    "end": "446560"
  },
  {
    "text": "if we know the interfaces the assist",
    "start": "446560",
    "end": "449520"
  },
  {
    "text": "assistant the service should be using",
    "start": "449520",
    "end": "451440"
  },
  {
    "text": "then we can limit those interfaces to be",
    "start": "451440",
    "end": "453840"
  },
  {
    "text": "sure that this service is not able to",
    "start": "453840",
    "end": "456319"
  },
  {
    "text": "use any other network interface on the",
    "start": "456319",
    "end": "459280"
  },
  {
    "text": "system",
    "start": "459280",
    "end": "459840"
  },
  {
    "text": "[Music]",
    "start": "459840",
    "end": "461440"
  },
  {
    "text": "regarding the implementation of this",
    "start": "461440",
    "end": "464720"
  },
  {
    "text": "a future",
    "start": "464720",
    "end": "466560"
  },
  {
    "text": "we did that by attaching two ebpf",
    "start": "466560",
    "end": "469919"
  },
  {
    "text": "programs to the c group english and",
    "start": "469919",
    "end": "472639"
  },
  {
    "text": "egress hawks",
    "start": "472639",
    "end": "474080"
  },
  {
    "text": "of the city service",
    "start": "474080",
    "end": "476560"
  },
  {
    "text": "and what is nice about this person group",
    "start": "476560",
    "end": "479759"
  },
  {
    "text": "eppf program is that",
    "start": "479759",
    "end": "482400"
  },
  {
    "text": "we can keep separated ebpf programs for",
    "start": "482400",
    "end": "485520"
  },
  {
    "text": "each system this service so in this case",
    "start": "485520",
    "end": "487360"
  },
  {
    "text": "we have two different",
    "start": "487360",
    "end": "489440"
  },
  {
    "text": "ebpf programs for each system this",
    "start": "489440",
    "end": "491599"
  },
  {
    "text": "service that is using this feature and",
    "start": "491599",
    "end": "494639"
  },
  {
    "text": "from the implementation point of view we",
    "start": "494639",
    "end": "496639"
  },
  {
    "text": "don't have to worry about handling the",
    "start": "496639",
    "end": "498720"
  },
  {
    "text": "logio where is this application running",
    "start": "498720",
    "end": "501759"
  },
  {
    "text": "i mean what is the c group where this",
    "start": "501759",
    "end": "504160"
  },
  {
    "text": "application is running because each time",
    "start": "504160",
    "end": "506400"
  },
  {
    "text": "the programs are executed this is",
    "start": "506400",
    "end": "508560"
  },
  {
    "text": "implicit they see where the application",
    "start": "508560",
    "end": "511360"
  },
  {
    "text": "is running is already implicit on the",
    "start": "511360",
    "end": "513518"
  },
  {
    "text": "program",
    "start": "513519",
    "end": "515919"
  },
  {
    "text": "in order to determine if a network",
    "start": "516080",
    "end": "518479"
  },
  {
    "text": "interfaces are allowed or not we have a",
    "start": "518479",
    "end": "521279"
  },
  {
    "text": "hashmap where we save the different",
    "start": "521279",
    "end": "523839"
  },
  {
    "text": "network interface indexes",
    "start": "523839",
    "end": "526160"
  },
  {
    "text": "if the interface is not",
    "start": "526160",
    "end": "528320"
  },
  {
    "text": "allowed we just drop the packet",
    "start": "528320",
    "end": "532959"
  },
  {
    "text": "the size of this program is rather small",
    "start": "533200",
    "end": "535839"
  },
  {
    "text": "we have something like 50 lines of code",
    "start": "535839",
    "end": "538080"
  },
  {
    "text": "this is in c code",
    "start": "538080",
    "end": "539920"
  },
  {
    "text": "and yeah i want to mention here that",
    "start": "539920",
    "end": "543040"
  },
  {
    "text": "the the pr that is implemented this is a",
    "start": "543040",
    "end": "546000"
  },
  {
    "text": "little bit",
    "start": "546000",
    "end": "547200"
  },
  {
    "text": "big but actually the piece that is doing",
    "start": "547200",
    "end": "550480"
  },
  {
    "text": "the real work on ebpf is is very small",
    "start": "550480",
    "end": "552800"
  },
  {
    "text": "so all the logic that we have around is",
    "start": "552800",
    "end": "555120"
  },
  {
    "text": "to load the programs to populating the",
    "start": "555120",
    "end": "557839"
  },
  {
    "text": "maps and so on actually",
    "start": "557839",
    "end": "560399"
  },
  {
    "text": "the logic that is inside the abpf",
    "start": "560399",
    "end": "562480"
  },
  {
    "text": "program is very very small",
    "start": "562480",
    "end": "564720"
  },
  {
    "text": "for this feature we require the kernel",
    "start": "564720",
    "end": "568240"
  },
  {
    "text": "version 5.7 this is because we decided",
    "start": "568240",
    "end": "571200"
  },
  {
    "text": "to use ebpf links for handling the",
    "start": "571200",
    "end": "574560"
  },
  {
    "text": "csnd demon reload and re and demo reason",
    "start": "574560",
    "end": "578160"
  },
  {
    "text": "so it is because we got a file",
    "start": "578160",
    "end": "581040"
  },
  {
    "text": "descriptor for the vpf link we don't",
    "start": "581040",
    "end": "583680"
  },
  {
    "text": "have to worry about unloading the",
    "start": "583680",
    "end": "585680"
  },
  {
    "text": "program detaching the program and so on",
    "start": "585680",
    "end": "587839"
  },
  {
    "text": "we can just pass the full descriptor for",
    "start": "587839",
    "end": "590959"
  },
  {
    "text": "the link",
    "start": "590959",
    "end": "592080"
  },
  {
    "text": "from one season the instance to the",
    "start": "592080",
    "end": "594800"
  },
  {
    "text": "another one",
    "start": "594800",
    "end": "597440"
  },
  {
    "text": "the",
    "start": "598399",
    "end": "599440"
  },
  {
    "text": "the support is already merged so it was",
    "start": "599440",
    "end": "602560"
  },
  {
    "text": "merged some months ago and this will be",
    "start": "602560",
    "end": "605040"
  },
  {
    "text": "available in the next season the release",
    "start": "605040",
    "end": "607360"
  },
  {
    "text": "this is version 250.",
    "start": "607360",
    "end": "611440"
  },
  {
    "text": "okay this is time to",
    "start": "611440",
    "end": "613600"
  },
  {
    "text": "do a quick demonstration about how we",
    "start": "613600",
    "end": "615920"
  },
  {
    "text": "can use that",
    "start": "615920",
    "end": "618560"
  },
  {
    "text": "in my system i have two different",
    "start": "618560",
    "end": "620959"
  },
  {
    "text": "network interfaces i have the good back",
    "start": "620959",
    "end": "623200"
  },
  {
    "text": "one and i have another that i use to",
    "start": "623200",
    "end": "625680"
  },
  {
    "text": "reach the internet",
    "start": "625680",
    "end": "628240"
  },
  {
    "text": "in order to create a temporary",
    "start": "628240",
    "end": "632399"
  },
  {
    "text": "a cnd unit i'm going to use this and",
    "start": "632399",
    "end": "634959"
  },
  {
    "text": "iran",
    "start": "634959",
    "end": "635920"
  },
  {
    "text": "and i'm going to pass the",
    "start": "635920",
    "end": "638320"
  },
  {
    "text": "resilient network interfaces property to",
    "start": "638320",
    "end": "640720"
  },
  {
    "text": "show you how it works so let's start by",
    "start": "640720",
    "end": "643519"
  },
  {
    "text": "creating a service that is only able to",
    "start": "643519",
    "end": "647120"
  },
  {
    "text": "access the",
    "start": "647120",
    "end": "649279"
  },
  {
    "text": "internet the interface that is used to",
    "start": "649279",
    "end": "651760"
  },
  {
    "text": "reach the internet so",
    "start": "651760",
    "end": "653519"
  },
  {
    "text": "in this case the ping is working this",
    "start": "653519",
    "end": "655680"
  },
  {
    "text": "pin is going to the public internet and",
    "start": "655680",
    "end": "658399"
  },
  {
    "text": "this is the interface that we use to",
    "start": "658399",
    "end": "660000"
  },
  {
    "text": "reach the internet so yeah everything is",
    "start": "660000",
    "end": "661920"
  },
  {
    "text": "working fine as it should be",
    "start": "661920",
    "end": "664959"
  },
  {
    "text": "if i try to paint the",
    "start": "664959",
    "end": "667519"
  },
  {
    "text": "local host",
    "start": "667519",
    "end": "669760"
  },
  {
    "text": "with the same rule this is not gonna",
    "start": "669760",
    "end": "671440"
  },
  {
    "text": "work because in this case the whose",
    "start": "671440",
    "end": "673519"
  },
  {
    "text": "packets are going to the lootback",
    "start": "673519",
    "end": "675519"
  },
  {
    "text": "interface but the restoration allows",
    "start": "675519",
    "end": "678640"
  },
  {
    "text": "only to use the",
    "start": "678640",
    "end": "680360"
  },
  {
    "text": "mp0s3 interface",
    "start": "680360",
    "end": "684240"
  },
  {
    "text": "if i change this to the lootback",
    "start": "684240",
    "end": "687519"
  },
  {
    "text": "interface",
    "start": "687519",
    "end": "689120"
  },
  {
    "text": "this will start working again",
    "start": "689120",
    "end": "693200"
  },
  {
    "text": "another thing that i can do is to",
    "start": "693360",
    "end": "695839"
  },
  {
    "text": "restore it to user adding ids so by",
    "start": "695839",
    "end": "699200"
  },
  {
    "text": "using this syntax and saying that the",
    "start": "699200",
    "end": "702320"
  },
  {
    "text": "service is able to use",
    "start": "702320",
    "end": "704320"
  },
  {
    "text": "any network interface on the host but",
    "start": "704320",
    "end": "707839"
  },
  {
    "text": "the mp0 h31 so in this case",
    "start": "707839",
    "end": "710800"
  },
  {
    "text": "this ping should work because it's using",
    "start": "710800",
    "end": "713040"
  },
  {
    "text": "a interface different than the",
    "start": "713040",
    "end": "715959"
  },
  {
    "text": "mp0831 so this is useful for instance to",
    "start": "715959",
    "end": "719360"
  },
  {
    "text": "erase read the services from reaching",
    "start": "719360",
    "end": "721600"
  },
  {
    "text": "the internet in this case",
    "start": "721600",
    "end": "725120"
  },
  {
    "text": "and what else i can do i can",
    "start": "725120",
    "end": "728639"
  },
  {
    "text": "define final list or interface that are",
    "start": "728639",
    "end": "730959"
  },
  {
    "text": "supported so if i try to",
    "start": "730959",
    "end": "733839"
  },
  {
    "text": "to ping the load back this is going to",
    "start": "733839",
    "end": "736079"
  },
  {
    "text": "work and in this case also if i",
    "start": "736079",
    "end": "738880"
  },
  {
    "text": "try to ping",
    "start": "738880",
    "end": "741120"
  },
  {
    "text": "the",
    "start": "741120",
    "end": "742639"
  },
  {
    "text": "internet this is also going to work",
    "start": "742639",
    "end": "744880"
  },
  {
    "text": "because both interfaces are allowed",
    "start": "744880",
    "end": "747279"
  },
  {
    "text": "there",
    "start": "747279",
    "end": "748320"
  },
  {
    "text": "finally",
    "start": "748320",
    "end": "749440"
  },
  {
    "text": "i can also use a",
    "start": "749440",
    "end": "752560"
  },
  {
    "text": "very",
    "start": "752560",
    "end": "753519"
  },
  {
    "text": "deny approach with a list so in this",
    "start": "753519",
    "end": "755760"
  },
  {
    "text": "case it says",
    "start": "755760",
    "end": "757040"
  },
  {
    "text": "none of those interfaces there is",
    "start": "757040",
    "end": "759120"
  },
  {
    "text": "allowed so",
    "start": "759120",
    "end": "760800"
  },
  {
    "text": "this is not working and yeah the same",
    "start": "760800",
    "end": "763760"
  },
  {
    "text": "happens for this one",
    "start": "763760",
    "end": "765920"
  },
  {
    "text": "that is also not working",
    "start": "765920",
    "end": "769519"
  },
  {
    "text": "let's go to the second property that we",
    "start": "771120",
    "end": "773519"
  },
  {
    "text": "implemented this is again uh regarding",
    "start": "773519",
    "end": "776480"
  },
  {
    "text": "security and this time this is for",
    "start": "776480",
    "end": "778639"
  },
  {
    "text": "restricting the the types of devices and",
    "start": "778639",
    "end": "781519"
  },
  {
    "text": "that processes are able to access we",
    "start": "781519",
    "end": "783920"
  },
  {
    "text": "also support the law or the denied list",
    "start": "783920",
    "end": "786480"
  },
  {
    "text": "in this case",
    "start": "786480",
    "end": "787760"
  },
  {
    "text": "and this feature provides an additional",
    "start": "787760",
    "end": "789920"
  },
  {
    "text": "security layer because we are able to",
    "start": "789920",
    "end": "792079"
  },
  {
    "text": "restrict the processes for accessing",
    "start": "792079",
    "end": "794560"
  },
  {
    "text": "some of the dangerous prices around",
    "start": "794560",
    "end": "797839"
  },
  {
    "text": "sony use case examples of that is that",
    "start": "797839",
    "end": "801040"
  },
  {
    "text": "if we have a service that should be",
    "start": "801040",
    "end": "803279"
  },
  {
    "text": "accessing files on a given partition",
    "start": "803279",
    "end": "805680"
  },
  {
    "text": "then we can restore it",
    "start": "805680",
    "end": "807360"
  },
  {
    "text": "the types of file systems that these",
    "start": "807360",
    "end": "809600"
  },
  {
    "text": "services",
    "start": "809600",
    "end": "810800"
  },
  {
    "text": "this service is able to access to the",
    "start": "810800",
    "end": "813440"
  },
  {
    "text": "type of devices entirely of that given",
    "start": "813440",
    "end": "816079"
  },
  {
    "text": "partition",
    "start": "816079",
    "end": "817200"
  },
  {
    "text": "also if there are other services that we",
    "start": "817200",
    "end": "819600"
  },
  {
    "text": "know that they don't require these",
    "start": "819600",
    "end": "821680"
  },
  {
    "text": "dangerous file system then we could",
    "start": "821680",
    "end": "824480"
  },
  {
    "text": "restrict those from being used by those",
    "start": "824480",
    "end": "827440"
  },
  {
    "text": "services so examples of dangerous fire",
    "start": "827440",
    "end": "829519"
  },
  {
    "text": "systems are",
    "start": "829519",
    "end": "831040"
  },
  {
    "text": "ccfs tracfs and so on",
    "start": "831040",
    "end": "835839"
  },
  {
    "text": "regarding the implementation this is",
    "start": "835839",
    "end": "837760"
  },
  {
    "text": "using the linear security modules",
    "start": "837760",
    "end": "840560"
  },
  {
    "text": "together with ebpf so those are the",
    "start": "840560",
    "end": "843279"
  },
  {
    "text": "traditional lsn hooks but this sign into",
    "start": "843279",
    "end": "846399"
  },
  {
    "text": "instrumented with ebpf what that means",
    "start": "846399",
    "end": "848800"
  },
  {
    "text": "is that",
    "start": "848800",
    "end": "850079"
  },
  {
    "text": "we are able to use ebpf to",
    "start": "850079",
    "end": "852720"
  },
  {
    "text": "make a decision on what to do once the",
    "start": "852720",
    "end": "855360"
  },
  {
    "text": "hook is involved so we can do a look up",
    "start": "855360",
    "end": "857519"
  },
  {
    "text": "in a map or we can implement whatever",
    "start": "857519",
    "end": "859920"
  },
  {
    "text": "logic we want to make the decision",
    "start": "859920",
    "end": "862399"
  },
  {
    "text": "in this specific case we are using the",
    "start": "862399",
    "end": "864959"
  },
  {
    "text": "file open hook so each time the process",
    "start": "864959",
    "end": "868480"
  },
  {
    "text": "tries to open a file we run",
    "start": "868480",
    "end": "871360"
  },
  {
    "text": "our ebpf program and based on some logic",
    "start": "871360",
    "end": "874320"
  },
  {
    "text": "we are able to decide if the process is",
    "start": "874320",
    "end": "877040"
  },
  {
    "text": "able to access the file or not",
    "start": "877040",
    "end": "881199"
  },
  {
    "text": "in this case the lsm ebpf programs are",
    "start": "881839",
    "end": "886160"
  },
  {
    "text": "not c group aware so what it means for",
    "start": "886160",
    "end": "889279"
  },
  {
    "text": "us is that we have to keep a single",
    "start": "889279",
    "end": "891760"
  },
  {
    "text": "global program in the host",
    "start": "891760",
    "end": "894880"
  },
  {
    "text": "and because of that we have to",
    "start": "894880",
    "end": "899279"
  },
  {
    "text": "keep a global ebp map of maps where we",
    "start": "899279",
    "end": "902800"
  },
  {
    "text": "store the different uh magical numbers",
    "start": "902800",
    "end": "905440"
  },
  {
    "text": "of the file systems and this is indexed",
    "start": "905440",
    "end": "908160"
  },
  {
    "text": "by secret by d so",
    "start": "908160",
    "end": "910160"
  },
  {
    "text": "in this specific case",
    "start": "910160",
    "end": "912399"
  },
  {
    "text": "the order map is accessed by",
    "start": "912399",
    "end": "915760"
  },
  {
    "text": "the c group id so we have this helper to",
    "start": "915760",
    "end": "919360"
  },
  {
    "text": "get what is the signal id where the",
    "start": "919360",
    "end": "921680"
  },
  {
    "text": "application is running and the inner map",
    "start": "921680",
    "end": "924800"
  },
  {
    "text": "we have a list of allo or deny file",
    "start": "924800",
    "end": "927839"
  },
  {
    "text": "system magical numbers and i'll show you",
    "start": "927839",
    "end": "929920"
  },
  {
    "text": "in a second how we are able to access",
    "start": "929920",
    "end": "931920"
  },
  {
    "text": "those magic numbers",
    "start": "931920",
    "end": "934000"
  },
  {
    "text": "so",
    "start": "934000",
    "end": "934959"
  },
  {
    "text": "the the magic the the program is",
    "start": "934959",
    "end": "938160"
  },
  {
    "text": "receives this strut file this is an",
    "start": "938160",
    "end": "941040"
  },
  {
    "text": "internal kernel",
    "start": "941040",
    "end": "943519"
  },
  {
    "text": "structure so for this reason we have to",
    "start": "943519",
    "end": "945680"
  },
  {
    "text": "use vpf car to rate the magic number so",
    "start": "945680",
    "end": "949360"
  },
  {
    "text": "we have the file and we have the",
    "start": "949360",
    "end": "950720"
  },
  {
    "text": "different members where we can find",
    "start": "950720",
    "end": "953600"
  },
  {
    "text": "what is the magic number of the file",
    "start": "953600",
    "end": "955920"
  },
  {
    "text": "system that is being accessed",
    "start": "955920",
    "end": "959360"
  },
  {
    "text": "the important part here is that the",
    "start": "959360",
    "end": "962720"
  },
  {
    "text": "layout of this structure could change in",
    "start": "962720",
    "end": "965360"
  },
  {
    "text": "different kernel versions so that's the",
    "start": "965360",
    "end": "967120"
  },
  {
    "text": "reason why we are using chord even if",
    "start": "967120",
    "end": "969279"
  },
  {
    "text": "the layout change from a kernel version",
    "start": "969279",
    "end": "971839"
  },
  {
    "text": "to another one",
    "start": "971839",
    "end": "973440"
  },
  {
    "text": "lbpf will be able to calculate the",
    "start": "973440",
    "end": "976800"
  },
  {
    "text": "specific offsets before loading the",
    "start": "976800",
    "end": "979120"
  },
  {
    "text": "program into the",
    "start": "979120",
    "end": "980839"
  },
  {
    "text": "kernel again this program is rather",
    "start": "980839",
    "end": "984639"
  },
  {
    "text": "small this is just 66 lines of code and",
    "start": "984639",
    "end": "988880"
  },
  {
    "text": "the kernel requirements are very similar",
    "start": "988880",
    "end": "991279"
  },
  {
    "text": "to our previous property this is 5.7 but",
    "start": "991279",
    "end": "995120"
  },
  {
    "text": "this time we also need to have this",
    "start": "995120",
    "end": "998399"
  },
  {
    "text": "a compilation flag",
    "start": "998399",
    "end": "1001440"
  },
  {
    "text": "whether we have to",
    "start": "1001440",
    "end": "1002880"
  },
  {
    "text": "to have bpf in this compilation flag or",
    "start": "1002880",
    "end": "1006959"
  },
  {
    "text": "otherwise we have to bolt the kernel",
    "start": "1006959",
    "end": "1009360"
  },
  {
    "text": "with this a parameter we have to include",
    "start": "1009360",
    "end": "1012800"
  },
  {
    "text": "vpf in the list of",
    "start": "1012800",
    "end": "1014720"
  },
  {
    "text": "linux security modules that are used",
    "start": "1014720",
    "end": "1018480"
  },
  {
    "text": "regarding the status of this pr we",
    "start": "1018480",
    "end": "1020959"
  },
  {
    "text": "already have one approval we are waiting",
    "start": "1020959",
    "end": "1023120"
  },
  {
    "text": "for all the reviewers but yeah",
    "start": "1023120",
    "end": "1026480"
  },
  {
    "text": "there has been a lot of interaction",
    "start": "1026480",
    "end": "1027918"
  },
  {
    "text": "there a lot of comments a lot of",
    "start": "1027919",
    "end": "1029760"
  },
  {
    "text": "reworking done by iago and",
    "start": "1029760",
    "end": "1032319"
  },
  {
    "text": "i think this is going to emerge for the",
    "start": "1032319",
    "end": "1035678"
  },
  {
    "text": "next release so because yeah this is",
    "start": "1035679",
    "end": "1037760"
  },
  {
    "text": "almost ready to be merged for the next",
    "start": "1037760",
    "end": "1040000"
  },
  {
    "text": "one",
    "start": "1040000",
    "end": "1041360"
  },
  {
    "text": "okay this is time for another",
    "start": "1041360",
    "end": "1043760"
  },
  {
    "text": "demonstration about this feature",
    "start": "1043760",
    "end": "1047280"
  },
  {
    "text": "i have",
    "start": "1048000",
    "end": "1049600"
  },
  {
    "text": "enabled the bpf security module and the",
    "start": "1049600",
    "end": "1053840"
  },
  {
    "text": "kernel both parameters so this is",
    "start": "1053840",
    "end": "1055919"
  },
  {
    "text": "important to be sure that",
    "start": "1055919",
    "end": "1057760"
  },
  {
    "text": "this this parameter is set to",
    "start": "1057760",
    "end": "1060880"
  },
  {
    "text": "be able to",
    "start": "1060880",
    "end": "1062480"
  },
  {
    "text": "try this feature",
    "start": "1062480",
    "end": "1065440"
  },
  {
    "text": "um i'm going to create song",
    "start": "1065440",
    "end": "1069200"
  },
  {
    "text": "i'm going to create a",
    "start": "1069200",
    "end": "1070799"
  },
  {
    "text": "a file on the temporary folder just to",
    "start": "1070799",
    "end": "1073039"
  },
  {
    "text": "test",
    "start": "1073039",
    "end": "1074160"
  },
  {
    "text": "let me check that we are able to access",
    "start": "1074160",
    "end": "1076080"
  },
  {
    "text": "that file from the host so yeah this is",
    "start": "1076080",
    "end": "1078080"
  },
  {
    "text": "working fine and again i'm going to use",
    "start": "1078080",
    "end": "1081200"
  },
  {
    "text": "a systemd run to create a temporary",
    "start": "1081200",
    "end": "1084160"
  },
  {
    "text": "service but in this case this is going",
    "start": "1084160",
    "end": "1086240"
  },
  {
    "text": "to be with the restricted file systems",
    "start": "1086240",
    "end": "1089039"
  },
  {
    "text": "property",
    "start": "1089039",
    "end": "1090640"
  },
  {
    "text": "so for instance",
    "start": "1090640",
    "end": "1092880"
  },
  {
    "text": "let's say that we are going to three",
    "start": "1092880",
    "end": "1095200"
  },
  {
    "text": "only 2x4 and i'm going to",
    "start": "1095200",
    "end": "1098640"
  },
  {
    "text": "cut the contents of that file so as you",
    "start": "1098640",
    "end": "1101520"
  },
  {
    "text": "can see here we got",
    "start": "1101520",
    "end": "1104799"
  },
  {
    "text": "an operational error message while",
    "start": "1104799",
    "end": "1106880"
  },
  {
    "text": "trying to access that file if we look at",
    "start": "1106880",
    "end": "1110000"
  },
  {
    "text": "the output of the amount common",
    "start": "1110000",
    "end": "1112880"
  },
  {
    "text": "we can see that the tmp folder is the",
    "start": "1112880",
    "end": "1116000"
  },
  {
    "text": "type tmpfs",
    "start": "1116000",
    "end": "1118720"
  },
  {
    "text": "so this is the reason why this is not",
    "start": "1118720",
    "end": "1120880"
  },
  {
    "text": "working so we can add the mpfs here",
    "start": "1120880",
    "end": "1125600"
  },
  {
    "text": "and you can see that everything worked",
    "start": "1125600",
    "end": "1128160"
  },
  {
    "text": "fine we were we were able to access the",
    "start": "1128160",
    "end": "1131039"
  },
  {
    "text": "contents",
    "start": "1131039",
    "end": "1132240"
  },
  {
    "text": "of the file",
    "start": "1132240",
    "end": "1135039"
  },
  {
    "text": "for instance if i try to get",
    "start": "1135280",
    "end": "1139200"
  },
  {
    "text": "the command line",
    "start": "1139200",
    "end": "1141840"
  },
  {
    "text": "of the executor again in this case there",
    "start": "1141840",
    "end": "1144480"
  },
  {
    "text": "is a problem because the proc is a",
    "start": "1144480",
    "end": "1147360"
  },
  {
    "text": "different lc file system so in this case",
    "start": "1147360",
    "end": "1150880"
  },
  {
    "text": "to be able to do that i should use the i",
    "start": "1150880",
    "end": "1153760"
  },
  {
    "text": "should add rock",
    "start": "1153760",
    "end": "1155679"
  },
  {
    "text": "there so in this case this is working",
    "start": "1155679",
    "end": "1158810"
  },
  {
    "text": "[Music]",
    "start": "1158810",
    "end": "1160080"
  },
  {
    "text": "i could for example say that",
    "start": "1160080",
    "end": "1162799"
  },
  {
    "text": "this is able to use whatever file system",
    "start": "1162799",
    "end": "1165600"
  },
  {
    "text": "he wants but not to use should in this",
    "start": "1165600",
    "end": "1168480"
  },
  {
    "text": "case this is frog",
    "start": "1168480",
    "end": "1170559"
  },
  {
    "text": "so if i try to read",
    "start": "1170559",
    "end": "1172880"
  },
  {
    "text": "the file",
    "start": "1172880",
    "end": "1174960"
  },
  {
    "text": "on the tmp fs file system this is going",
    "start": "1174960",
    "end": "1177919"
  },
  {
    "text": "to work but if i try to read",
    "start": "1177919",
    "end": "1182399"
  },
  {
    "text": "if i try to read something on the block",
    "start": "1184880",
    "end": "1187679"
  },
  {
    "text": "i face this is not gonna work",
    "start": "1187679",
    "end": "1190480"
  },
  {
    "text": "so yeah by using this feature we are",
    "start": "1190480",
    "end": "1192480"
  },
  {
    "text": "able to translate the file system the",
    "start": "1192480",
    "end": "1196640"
  },
  {
    "text": "process",
    "start": "1196640",
    "end": "1197760"
  },
  {
    "text": "can",
    "start": "1197760",
    "end": "1199120"
  },
  {
    "text": "access",
    "start": "1199120",
    "end": "1201600"
  },
  {
    "text": "if you want to know more details about",
    "start": "1202720",
    "end": "1205440"
  },
  {
    "text": "the work what and we did there are some",
    "start": "1205440",
    "end": "1208559"
  },
  {
    "text": "links on on the presentation so the",
    "start": "1208559",
    "end": "1210640"
  },
  {
    "text": "first one is about blood post where we",
    "start": "1210640",
    "end": "1213120"
  },
  {
    "text": "include all the details of the",
    "start": "1213120",
    "end": "1214559"
  },
  {
    "text": "implementation we have also some",
    "start": "1214559",
    "end": "1217440"
  },
  {
    "text": "pointers to the code",
    "start": "1217440",
    "end": "1219200"
  },
  {
    "text": "and here we have different pointers to",
    "start": "1219200",
    "end": "1221280"
  },
  {
    "text": "the different",
    "start": "1221280",
    "end": "1222880"
  },
  {
    "text": "topics that i cover in this presentation",
    "start": "1222880",
    "end": "1227520"
  },
  {
    "text": "i think this is all thank you very much",
    "start": "1227520",
    "end": "1229520"
  },
  {
    "text": "for your time and yeah i'm happy to take",
    "start": "1229520",
    "end": "1231840"
  },
  {
    "text": "any questions that you can have",
    "start": "1231840",
    "end": "1233760"
  },
  {
    "text": "thank you bye",
    "start": "1233760",
    "end": "1236640"
  }
]