[
  {
    "text": "welcome to another cubon presentation this time about my favorite project aror",
    "start": "640",
    "end": "5920"
  },
  {
    "text": "outs and how you do laser focus deployments so my name is ctis I'm",
    "start": "5920",
    "end": "11599"
  },
  {
    "text": "working as a developer Advocate at uh codr now octopus deploy I'm also part of the Argo team focusing mainly on Argo CD",
    "start": "11599",
    "end": "18720"
  },
  {
    "text": "and Argo alls uh Cod is an Enterprise Solution on",
    "start": "18720",
    "end": "25160"
  },
  {
    "text": "top of all the four Argo projects um we also offer a hard and sec distribution",
    "start": "25160",
    "end": "30679"
  },
  {
    "text": "of Argo CD and we are the creators of the first ever gups certification this presentation is not about cpress but if",
    "start": "30679",
    "end": "37680"
  },
  {
    "text": "this is interesting to you we have a booth uh outside and you can come and talk to us so today we are going to talk about",
    "start": "37680",
    "end": "44440"
  },
  {
    "text": "Argo outs we are going to see how you can do laser focused uh deployments I'm actually going to show you two methods",
    "start": "44440",
    "end": "51879"
  },
  {
    "text": "the easy but not very flexible and the hard but flexible as it usually goes and",
    "start": "51879",
    "end": "58640"
  },
  {
    "text": "then the CCF sent an email to all um speakers and said if you have a demo do",
    "start": "58640",
    "end": "64760"
  },
  {
    "text": "a recording because the Wi-Fi sucks so I followed their advice and we have not just one but two live demos without any",
    "start": "64760",
    "end": "72600"
  },
  {
    "text": "recording so hopefully this will work so just to start with the basics we",
    "start": "72600",
    "end": "78759"
  },
  {
    "text": "are going to talk about Progressive delivery and Progressive delivery in the context of Argo roll out means blue",
    "start": "78759",
    "end": "84759"
  },
  {
    "text": "green and Canary deployments so for blue green you have your version running it's live users are looking looking at it",
    "start": "84759",
    "end": "90960"
  },
  {
    "text": "then you start a new instance of the application the next version it doesn't get any traffic so this is your chance",
    "start": "90960",
    "end": "96880"
  },
  {
    "text": "to do some unit test some integration test some smoke tests then you're confident and you say okay this looks",
    "start": "96880",
    "end": "102479"
  },
  {
    "text": "correct and you switch the traffic and after a while you completely discard the old version so this is blue green and",
    "start": "102479",
    "end": "109640"
  },
  {
    "text": "for canaris it's the same thing but instead of having a single point of time where you do the traffic switch you gradually send more traffic to the new",
    "start": "109640",
    "end": "116000"
  },
  {
    "text": "version so you start with 10% then 20% 30% and so on if and if something goes",
    "start": "116000",
    "end": "121840"
  },
  {
    "text": "wrong at any point you can roll back so why do we need this because if",
    "start": "121840",
    "end": "127439"
  },
  {
    "text": "you are familiar with how kubernetes works out of the box kubernetes only offers um rolling deployments where you",
    "start": "127439",
    "end": "134319"
  },
  {
    "text": "lose one pod and you gain another pod from the new version and this is not something you have direct control on you",
    "start": "134319",
    "end": "139720"
  },
  {
    "text": "cannot you know stop the process and do something else and there is also the recreate strategy which I'm not going to",
    "start": "139720",
    "end": "145640"
  },
  {
    "text": "talk about it because it has downtime and we don't want downtime at",
    "start": "145640",
    "end": "151160"
  },
  {
    "text": "all so how do we do canaris we use Argo roll outs which is one of the four Argo",
    "start": "151160",
    "end": "157480"
  },
  {
    "text": "projects one important thing to know is that it's completely self-contained it works on its own you don't need Argo CD",
    "start": "157480",
    "end": "164480"
  },
  {
    "text": "to run it and if you get Aro roll out you get access to a new custom resource which is the roll out and it defines how",
    "start": "164480",
    "end": "170920"
  },
  {
    "text": "you do um Progressive delivery both blue green and canaris there is also a UI",
    "start": "170920",
    "end": "176959"
  },
  {
    "text": "that you can use and there is also the capability to do this smoke test to understand if the deployment is",
    "start": "176959",
    "end": "182120"
  },
  {
    "text": "successful or not so this is the UI I have started the canar you can see on",
    "start": "182120",
    "end": "187560"
  },
  {
    "text": "the left I'm sending 20% of the traffic to the new version and then I said stop so this is my chance to do some checks",
    "start": "187560",
    "end": "194360"
  },
  {
    "text": "and make a decision whether I want to continue or not and at the bottom you can see the PODS of the new version and",
    "start": "194360",
    "end": "199720"
  },
  {
    "text": "the old version and you can understand what is going on so roll out gives you access to this",
    "start": "199720",
    "end": "205920"
  },
  {
    "text": "roll out resource which is exactly the same as a standard deployment it has the exact same Fields as the deployment",
    "start": "205920",
    "end": "211640"
  },
  {
    "text": "resource of kubernetes but there is an extra field for your strategy where you define how the progressive delivery",
    "start": "211640",
    "end": "217480"
  },
  {
    "text": "process uh Works in this example I'm saying I want a canary and I'm going to start with 10% of the traffic to the new",
    "start": "217480",
    "end": "224599"
  },
  {
    "text": "version and then I will stop for 1 hour and then we continue and so on and so",
    "start": "224599",
    "end": "231040"
  },
  {
    "text": "on so if you get our gouds now we have Progressive delivery with kubernetes behind the scenes it works with replica",
    "start": "231040",
    "end": "237439"
  },
  {
    "text": "sets so in the case of blue green you have new replica set that is the new version and it doesn't get any traffic",
    "start": "237439",
    "end": "244239"
  },
  {
    "text": "you do your checks and then at some point you switch to that replica set and then once you are confident you destroy",
    "start": "244239",
    "end": "250079"
  },
  {
    "text": "the old replica set and canaris it's similar you just use um different percentages for traffic now one major",
    "start": "250079",
    "end": "257720"
  },
  {
    "text": "decision that you have to make once you adopt AR gor out is if you want to use a traffic manager or not if you don't use",
    "start": "257720",
    "end": "264000"
  },
  {
    "text": "a traffic manager you can get a canary but the percentages only work with a number of PODS so if you you want to",
    "start": "264000",
    "end": "270039"
  },
  {
    "text": "send 10% of traffic to the new version you need to launch the number of PODS uh a new number of pods which match 10% to",
    "start": "270039",
    "end": "277759"
  },
  {
    "text": "the number of old pods uh maybe this works for you maybe it doesn't if you get a traffic manager you don't have",
    "start": "277759",
    "end": "283360"
  },
  {
    "text": "these limitations the number of PODS now doesn't correlate with the uh percentage so you can do whatever you want and set",
    "start": "283360",
    "end": "290039"
  },
  {
    "text": "as much traffic as you want to as many new pods as you want linkerd is just an example it doesn't have to be a linkerd",
    "start": "290039",
    "end": "297520"
  },
  {
    "text": "there are several traffic managers supported out of the box and there is also support for the",
    "start": "297520",
    "end": "302919"
  },
  {
    "text": "new Gateway API which is the new specification from kubernetes and it's let's say the next generation of uh",
    "start": "302919",
    "end": "310000"
  },
  {
    "text": "Ingress so even if your traffic manager is not one of those supported out of the box maybe it supports uh the Gateway",
    "start": "310000",
    "end": "319080"
  },
  {
    "text": "API uh so the whole point is that we want to automate everything we want to automate not just the deployment but",
    "start": "319479",
    "end": "324680"
  },
  {
    "text": "also the roll backs so we want to start the deployment process and then instruct algor outs to look at our metrics and",
    "start": "324680",
    "end": "331360"
  },
  {
    "text": "make a decision if the deployment is successful or not we don't want to have a human there so you also need to have",
    "start": "331360",
    "end": "337120"
  },
  {
    "text": "metrics to effectively use argor and argor can monitor those metrics and make",
    "start": "337120",
    "end": "342400"
  },
  {
    "text": "the decision uh there are several other features and I don't have you know to",
    "start": "342400",
    "end": "347680"
  },
  {
    "text": "talk about all of them today uh there is also a CLI there are metrics for the controller itself uh I'm going to focus",
    "start": "347680",
    "end": "355039"
  },
  {
    "text": "on the second bullet point header based routing and why this is an important feature but you should spend some time",
    "start": "355039",
    "end": "361400"
  },
  {
    "text": "you know to look at argor louds and see what other uh capabilities it has okay",
    "start": "361400",
    "end": "366599"
  },
  {
    "text": "so now we know the basics and let's say ARG out is the best thing ever and you want to adopt it in your company and you",
    "start": "366599",
    "end": "372680"
  },
  {
    "text": "read the documentation and if you look at the documentation everything is super simple you have a single kubernetes",
    "start": "372680",
    "end": "378759"
  },
  {
    "text": "service there is the old version the new version you send some traffic and you say yeah that's",
    "start": "378759",
    "end": "384120"
  },
  {
    "text": "simple but in reality things are not like this you don't have a single service you have many services that",
    "start": "384120",
    "end": "390720"
  },
  {
    "text": "cooperate especially if you work in a company that has adopted microservices so here I have an example of an",
    "start": "390720",
    "end": "396199"
  },
  {
    "text": "application let's say it's a an ESOP and there are the services responsible for",
    "start": "396199",
    "end": "401440"
  },
  {
    "text": "the public access where everybody can log in and buy stuff then I also have my internal users which from the internet",
    "start": "401440",
    "end": "407800"
  },
  {
    "text": "can do some stuff in the application and then I also have some partners and they using a different subset of all the",
    "start": "407800",
    "end": "414440"
  },
  {
    "text": "services and I choose to do a canary deployment on the o service which is right in the middle and is used by",
    "start": "414440",
    "end": "421319"
  },
  {
    "text": "everybody because we want to work with the simplest scenario possible so if we do that we have a huge blast radius",
    "start": "421319",
    "end": "428759"
  },
  {
    "text": "because this both service is used by everybody so yes I can start you know a canar process and if something goes",
    "start": "428759",
    "end": "434400"
  },
  {
    "text": "wrong yes I will roll back but in those five minutes that something goes wrong",
    "start": "434400",
    "end": "439759"
  },
  {
    "text": "everybody will be affected public internet users and partners and maybe",
    "start": "439759",
    "end": "445080"
  },
  {
    "text": "this is not something I want maybe I want to decide my own risk according to the users and according to their uh",
    "start": "445080",
    "end": "452000"
  },
  {
    "text": "acceptances so I want to do something different the other problem that you have with argor is that out of the box",
    "start": "452000",
    "end": "458479"
  },
  {
    "text": "if you uh start a canal algor is not very smart it will do a percentage",
    "start": "458479",
    "end": "464039"
  },
  {
    "text": "according to requests so it will get some requests and it will say okay this request I'm going to send this to the",
    "start": "464039",
    "end": "470280"
  },
  {
    "text": "old version and this request I'm going to send to the new version so if you have an individual user using the",
    "start": "470280",
    "end": "475520"
  },
  {
    "text": "application and that user starts five requests maybe some of these Quest will go to the new version some will go to",
    "start": "475520",
    "end": "482159"
  },
  {
    "text": "the old version and this is for the single user so maybe your application doesn't even support this because you",
    "start": "482159",
    "end": "487319"
  },
  {
    "text": "know the user might log in they will see a green button because that UI screen went to the new version and then after",
    "start": "487319",
    "end": "493680"
  },
  {
    "text": "some time this button will become red because it went to the other version so this is something that normally we don't",
    "start": "493680",
    "end": "499159"
  },
  {
    "text": "want usually applications don't work like this instead what we prefer is to make argor LS a bit smarter and",
    "start": "499159",
    "end": "506599"
  },
  {
    "text": "understand users so we want to have a set of users and when we say we want 30% of the traffic to go to the new uh to",
    "start": "506599",
    "end": "512800"
  },
  {
    "text": "the new version usually we mean 30% of users should go to the new version so if",
    "start": "512800",
    "end": "518240"
  },
  {
    "text": "you select a single user either it will go to the old version so all the request will go to the old version or all the",
    "start": "518240",
    "end": "524600"
  },
  {
    "text": "request will go to the new version so the experience of each user individually will not be affected by the canary so",
    "start": "524600",
    "end": "531279"
  },
  {
    "text": "this is what we want to do and even if you look you know how companies apply canaris in practice this",
    "start": "531279",
    "end": "536959"
  },
  {
    "text": "is almost always what business wants so nobody you know really says just select a random 30% in use the new version they",
    "start": "536959",
    "end": "544320"
  },
  {
    "text": "say we are deploying to Europe let's start with France we are deploying globally let's start uh with the us we",
    "start": "544320",
    "end": "551959"
  },
  {
    "text": "are deploying internally let's start with our internal users so there is some kind of grouping on who would like to",
    "start": "551959",
    "end": "557680"
  },
  {
    "text": "see the canary first it's not completely random so if you adopt aror out and just",
    "start": "557680",
    "end": "565600"
  },
  {
    "text": "read the documentation what you get out of a box is good but not enough yes you get a nice way you know to Define",
    "start": "565600",
    "end": "571959"
  },
  {
    "text": "canaris and Blen deployments and a nice way to integrate with traffic managers but everything else is not supported",
    "start": "571959",
    "end": "577920"
  },
  {
    "text": "like as I said you have a huge blast radius so everybody will be affected if something goes wrong uh the percentages",
    "start": "577920",
    "end": "584720"
  },
  {
    "text": "for canaris are request based and not user based and you want user based and also you have problems that you don't",
    "start": "584720",
    "end": "591079"
  },
  {
    "text": "really control you know who will see the canary or not so some people adopt aror outs and they are instantly you know",
    "start": "591079",
    "end": "597640"
  },
  {
    "text": "disappointed with the capabilities they get out of the box so can we do",
    "start": "597640",
    "end": "602880"
  },
  {
    "text": "better yes we can but first an intermission let's talk about my second",
    "start": "602880",
    "end": "608560"
  },
  {
    "text": "favorite project the Gateway API so the Gateway API is completely",
    "start": "608560",
    "end": "614480"
  },
  {
    "text": "unrelated to argor out it's a new specification from kubernetes U essentially it tries to fix the mistakes",
    "start": "614480",
    "end": "621760"
  },
  {
    "text": "of the Ingress control of the in specification or expand the English specification to cover cases that right",
    "start": "621760",
    "end": "627839"
  },
  {
    "text": "now they are not covered by English and you need to go to a specific traffic provider uh so this standard is",
    "start": "627839",
    "end": "633079"
  },
  {
    "text": "implemented by a lot of providers and specifically for argor we are interested in the HP route object which defines how",
    "start": "633079",
    "end": "641399"
  },
  {
    "text": "you connect to a kubernetes service so as I said aror out supports",
    "start": "641399",
    "end": "647399"
  },
  {
    "text": "the Gateway API and this means that right now you get out of the box support",
    "start": "647399",
    "end": "652800"
  },
  {
    "text": "for several tra traffic providers which also implement the API so maybe you need",
    "start": "652800",
    "end": "658079"
  },
  {
    "text": "you know to press your traffic provider and ask for Gateway API support because",
    "start": "658079",
    "end": "663200"
  },
  {
    "text": "if they do that you will unlock the capability to use algor outs with your favorite uh traffic provider and I'm",
    "start": "663200",
    "end": "670040"
  },
  {
    "text": "saying this because you know it's the chicken and egg situation people want to use a traffic provider but there isn't Gateway API support so you need to ask",
    "start": "670040",
    "end": "677040"
  },
  {
    "text": "the provider to add Gateway support so that you can use it so let's see uh back to the main",
    "start": "677040",
    "end": "685360"
  },
  {
    "text": "topic two methods to improve our situation so initially I want to make a CH and say I will I will control the",
    "start": "685360",
    "end": "690959"
  },
  {
    "text": "risk for users because some users don't want to have problems with a canar maybe they don't want to see the canary at all",
    "start": "690959",
    "end": "697000"
  },
  {
    "text": "so in my case I will make a selection and say I have some VIP users and I don't want them to be affected at all",
    "start": "697000",
    "end": "704519"
  },
  {
    "text": "even if a canar is happening then I have normal users and I pass them in the canary and then I have let's say the",
    "start": "704519",
    "end": "710200"
  },
  {
    "text": "bleeding edge users and I want all of them to see the canary as soon as possible so in this case I can do a um",
    "start": "710200",
    "end": "717360"
  },
  {
    "text": "slicing of my network and instead of connecting everybody to the same URL or the same path I will Define different",
    "start": "717360",
    "end": "724240"
  },
  {
    "text": "URLs or different paths for these customers and I will make sure that each URL has a different Behavior according",
    "start": "724240",
    "end": "730320"
  },
  {
    "text": "to the canary so in the example I was talking before instead of sending everybody to the O service I will send",
    "start": "730320",
    "end": "736800"
  },
  {
    "text": "my partners to O service SL table the general public to O service SL preview",
    "start": "736800",
    "end": "742320"
  },
  {
    "text": "and the sorry slash um canar and my internet to slash preview and this pack",
    "start": "742320",
    "end": "749480"
  },
  {
    "text": "based you know writing is just an example you can also do host or you can do a combination whatever you prefer",
    "start": "749480",
    "end": "754519"
  },
  {
    "text": "this is just for the the demo so the end result is right now if you look at how",
    "start": "754519",
    "end": "760040"
  },
  {
    "text": "the canar is progressing blue is the old version green is the new version users",
    "start": "760040",
    "end": "765399"
  },
  {
    "text": "that go a SL canar look at the canar normally you know traffic starts to the old version and then gradually goes to",
    "start": "765399",
    "end": "772000"
  },
  {
    "text": "the new version users that are in stable they always see the previous version so",
    "start": "772000",
    "end": "777639"
  },
  {
    "text": "they are never affected by anything and at the end when I'm fully confident that the canary has you know finished and",
    "start": "777639",
    "end": "784440"
  },
  {
    "text": "there are some issues then they all switch instantly to the new version and then my internal users which I have",
    "start": "784440",
    "end": "790680"
  },
  {
    "text": "decided and said I want them to see the new version as soon as possible as soon as the canar start they see the new",
    "start": "790680",
    "end": "796560"
  },
  {
    "text": "version right away so this is the choice I made you know to present a different risk according to the the user type so",
    "start": "796560",
    "end": "804839"
  },
  {
    "text": "this is what I had before this is a huge blast radius where everybody's affected by my canary and now I've changed things",
    "start": "804839",
    "end": "811839"
  },
  {
    "text": "because I control how risk goes so Partners no longer see the canary at all",
    "start": "811839",
    "end": "817079"
  },
  {
    "text": "so they are not affected by anything H I have moved the the blast radius to the internet users because they will see the",
    "start": "817079",
    "end": "823360"
  },
  {
    "text": "canary as soon as it starts so if there is a problem they will be affected right away and then for the general public you",
    "start": "823360",
    "end": "829440"
  },
  {
    "text": "know they are affected because they look at the canary but because they go gradually the blast radius is not as big",
    "start": "829440",
    "end": "835399"
  },
  {
    "text": "um as previously so how does it work in practice uh it's really simple you still",
    "start": "835399",
    "end": "842720"
  },
  {
    "text": "have the basic HTTP route remember we are using the Gateway API that defines the canary so this is what Normal public",
    "start": "842720",
    "end": "849800"
  },
  {
    "text": "looks but I have also defined two additional routes and each one goes",
    "start": "849800",
    "end": "855079"
  },
  {
    "text": "always to the stable or always to the uh new version so instead of having one route as you normally have with the",
    "start": "855079",
    "end": "861680"
  },
  {
    "text": "canar now I have three so live demo I have this exact",
    "start": "861680",
    "end": "869959"
  },
  {
    "text": "uh example here so this is my application it's a very simple",
    "start": "869959",
    "end": "875040"
  },
  {
    "text": "application where each box makes a request every uh 3 seconds and this is",
    "start": "875040",
    "end": "881600"
  },
  {
    "text": "my public instance what normal users see and first of all you can see that right now I have a canary uh in progress if we",
    "start": "881600",
    "end": "889000"
  },
  {
    "text": "go look also in the terminal it's like this I've started a canary this is the roll out CLI you can see at the bottom",
    "start": "889000",
    "end": "896639"
  },
  {
    "text": "with yellow the new uh pods and with green the old pods and right now it's stopped and 30% of the traffic goes to",
    "start": "896639",
    "end": "903560"
  },
  {
    "text": "the new version so this is what you get out of the box with Argo roll outs and",
    "start": "903560",
    "end": "908680"
  },
  {
    "text": "you can instantly see first of all this 30% like usually 30% of the boxes are um",
    "start": "908680",
    "end": "915000"
  },
  {
    "text": "yellow but also you can see the complete Randomness so a box you know sends a request and it hits version 1.0 then the",
    "start": "915000",
    "end": "923120"
  },
  {
    "text": "same box sends another request and randomly goes to the new version which as I said is not what we normally want",
    "start": "923120",
    "end": "929600"
  },
  {
    "text": "so if you see I made this decision and this is accessible at SL canar so I say",
    "start": "929600",
    "end": "934720"
  },
  {
    "text": "the general public should go at SL canar but I also have another end point which I use for my partners and this goes to",
    "start": "934720",
    "end": "942000"
  },
  {
    "text": "SL stable so even though a canar is running right now my partners always",
    "start": "942000",
    "end": "948000"
  },
  {
    "text": "connect to version 1.0 so nothing will happen to them if you know 2.0 has an",
    "start": "948000",
    "end": "953839"
  },
  {
    "text": "issue and then I also have my internet which is my own users and I send all of them to the new",
    "start": "953839",
    "end": "959759"
  },
  {
    "text": "version because I want you know to detect problems as soon as POS possible so even though canar right now is in",
    "start": "959759",
    "end": "965720"
  },
  {
    "text": "progress I have three different kinds of users and they see different things according to what I um want to with you",
    "start": "965720",
    "end": "973680"
  },
  {
    "text": "know the risk so that's one",
    "start": "973680",
    "end": "978079"
  },
  {
    "text": "method is it perfect uh no it's not perfect we have gained some control of",
    "start": "981360",
    "end": "986759"
  },
  {
    "text": "you know the risk we can make some uh changes and decide who's going to see the canary or not H but we need to set",
    "start": "986759",
    "end": "993560"
  },
  {
    "text": "up this in advance like we need to make a decision in advance decide who are the users go into the respective",
    "start": "993560",
    "end": "999639"
  },
  {
    "text": "applications and use the respective URL and this doesn't change like as soon as the canary starts everybody sees what",
    "start": "999639",
    "end": "1006440"
  },
  {
    "text": "they are supposed to see I cannot change things uh in the middle I also haven't solved my problem yet regarding requests",
    "start": "1006440",
    "end": "1012920"
  },
  {
    "text": "so people that see the canary they still have a random number of requests that go to the new version and we don't have this with users so it's better but it's",
    "start": "1012920",
    "end": "1022639"
  },
  {
    "text": "still you know not perfect but it's super easy to set up you just saw I just created two new routes so can we do",
    "start": "1022639",
    "end": "1029319"
  },
  {
    "text": "better and of course um we can so normally what you get out of the",
    "start": "1029319",
    "end": "1035678"
  },
  {
    "text": "box is that you know remember the traffic provider randomly sends uh some request to the new um version but we",
    "start": "1035679",
    "end": "1043400"
  },
  {
    "text": "also have the capability to use headers so here argor outs has support and says",
    "start": "1043400",
    "end": "1049080"
  },
  {
    "text": "instead of blindly blindly sending um a request to the new version it will make",
    "start": "1049080",
    "end": "1054760"
  },
  {
    "text": "a choice and it will look for an HTP header and only if this HTP header exists and has a specific value then it",
    "start": "1054760",
    "end": "1061840"
  },
  {
    "text": "will make the decision to send that version to the canary so here I made a simple example where I'm say x Canary",
    "start": "1061840",
    "end": "1068520"
  },
  {
    "text": "equals true and I will set up aror allows to only send request the new version if this header um is on the",
    "start": "1068520",
    "end": "1076159"
  },
  {
    "text": "request so if I have this basic building block",
    "start": "1076159",
    "end": "1083200"
  },
  {
    "text": "now I have the capability to Define canaris for users so I can select my application and make it a bit smarter",
    "start": "1083200",
    "end": "1090039"
  },
  {
    "text": "and say for this user the HTP header will be there so this user will have all",
    "start": "1090039",
    "end": "1095919"
  },
  {
    "text": "the request from his application to the new version while that user doesn't have",
    "start": "1095919",
    "end": "1101120"
  },
  {
    "text": "that HP header so all the request from that user will go to the uh old application so I made the change where",
    "start": "1101120",
    "end": "1107720"
  },
  {
    "text": "it's not any any more request based it's user based uh the selection of how new",
    "start": "1107720",
    "end": "1113440"
  },
  {
    "text": "version versus old version works and the nice things about HTP headers is that they are fully Dynamic I can change them",
    "start": "1113440",
    "end": "1120559"
  },
  {
    "text": "on the fly so first of all there are you know several networking components that allow you to change headers you can",
    "start": "1120559",
    "end": "1126799"
  },
  {
    "text": "monitor headers inject headers modify headers this is one of the popular capabilities of also service message or",
    "start": "1126799",
    "end": "1134159"
  },
  {
    "text": "Gateway API sorry or Gateway products um or balancers and it's not static anymore",
    "start": "1134159",
    "end": "1141400"
  },
  {
    "text": "even while a canar is running I can go and change the header and uh do stuff so",
    "start": "1141400",
    "end": "1146799"
  },
  {
    "text": "HP headers give me many more capabilities not only in regards to the request versus uh user selection but",
    "start": "1146799",
    "end": "1154520"
  },
  {
    "text": "also that I don't have to decide things in advance I can change my mind even in the middle of a canary so how I do this",
    "start": "1154520",
    "end": "1163039"
  },
  {
    "text": "Argo roll outs has the capability where you define your roll out and in a step of a canary you essentially say look",
    "start": "1163039",
    "end": "1169039"
  },
  {
    "text": "instead of just selecting a random percentage of requests and sending them to the new version you will only send",
    "start": "1169039",
    "end": "1175919"
  },
  {
    "text": "them if uh this x Canary header exist and if the value is uh yes and that's it",
    "start": "1175919",
    "end": "1183280"
  },
  {
    "text": "okay that's the only thing I need to change uh but as always there is a limitation you need to check if your",
    "start": "1183280",
    "end": "1190360"
  },
  {
    "text": "traffic provider supports this as well so argor out supports header based routing but this only works if your",
    "start": "1190360",
    "end": "1197640"
  },
  {
    "text": "traffic provider for header based routing and this comes back to the discussion about the Gateway API that",
    "start": "1197640",
    "end": "1204159"
  },
  {
    "text": "before the introduction of the Gateway API uh the only networking provider that",
    "start": "1204159",
    "end": "1209320"
  },
  {
    "text": "supported this was EO so if you wanted to do this with argor you had to choose ISO that was the only implementation now",
    "start": "1209320",
    "end": "1218159"
  },
  {
    "text": "with the Gateway API it doesn't really matter if you use e or not it only matters if your traffic provider",
    "start": "1218159",
    "end": "1223880"
  },
  {
    "text": "supports uh header based routing the demo that you're going to see next is used using uh traffic version",
    "start": "1223880",
    "end": "1231280"
  },
  {
    "text": "3.0 and it supports the Gateway API plus header based routing so this is why I'm",
    "start": "1231280",
    "end": "1237280"
  },
  {
    "text": "saying it's a bit more complex to set up H but hopefully you know as time progresses and traffic managers support",
    "start": "1237280",
    "end": "1243840"
  },
  {
    "text": "the Gateway API this is also be this will also be much simpler uh to implement so check your traffic uh",
    "start": "1243840",
    "end": "1250600"
  },
  {
    "text": "provide them so second demo uh",
    "start": "1250600",
    "end": "1259320"
  },
  {
    "text": "so here I have my other roll out and I have this exact same thing in the steps",
    "start": "1260640",
    "end": "1266600"
  },
  {
    "text": "I'm saying you're going to send 20% of the traffic to the new version but only if this Canary header exists and it has",
    "start": "1266600",
    "end": "1274120"
  },
  {
    "text": "the value as yes so now instead of having H three different let's say URLs",
    "start": "1274120",
    "end": "1281000"
  },
  {
    "text": "I have a single URL so you see at the top the URL is just Local Host there isn't a path anymore H it's exactly the",
    "start": "1281000",
    "end": "1287400"
  },
  {
    "text": "same the same demo and right now you're looking at the default Behavior where you know nothing strange happens so I",
    "start": "1287400",
    "end": "1293440"
  },
  {
    "text": "modified a bit this application at the top I can enable or disable the HP",
    "start": "1293440",
    "end": "1299120"
  },
  {
    "text": "header on the Fly okay this is just a simple example in your case maybe you could have a networking proxy or some",
    "start": "1299120",
    "end": "1306520"
  },
  {
    "text": "other way to let's say decide that French users will have the header enabled and non-french users will not",
    "start": "1306520",
    "end": "1311880"
  },
  {
    "text": "have the header enable H maybe even your application has somewhere settings where the users themselves can decide say yes",
    "start": "1311880",
    "end": "1319880"
  },
  {
    "text": "show me bleeding edge stuff I want to test the latest versions and I don't care about the risk so this is something that you can set per user so the Magic",
    "start": "1319880",
    "end": "1328200"
  },
  {
    "text": "Moment is that right now you know nothing is U happening but if I go and set this and say oh I want bleeding Ed",
    "start": "1328200",
    "end": "1334039"
  },
  {
    "text": "stuff and I hit apply everything goes to the new version",
    "start": "1334039",
    "end": "1340440"
  },
  {
    "text": "so right now I'm a user where all my requests have this uh header so all my requests go to the new version and I can",
    "start": "1340440",
    "end": "1347480"
  },
  {
    "text": "easily test this if if I open another browser simulating let's say a second",
    "start": "1347480",
    "end": "1356158"
  },
  {
    "text": "user and I also send them to the exact same URL so not a different",
    "start": "1357159",
    "end": "1363400"
  },
  {
    "text": "URL and this user is not affected so now I have achieved what I wanted I have settings per user okay each user can see",
    "start": "1364080",
    "end": "1371559"
  },
  {
    "text": "different things according to uh their selection instead of just you know having specific uh groups",
    "start": "1371559",
    "end": "1380399"
  },
  {
    "text": "so have I improved things uh yes I still have full control of the blast radius I",
    "start": "1384000",
    "end": "1389080"
  },
  {
    "text": "can control who looks at the canary and who doesn't now my clients can make a",
    "start": "1389080",
    "end": "1394320"
  },
  {
    "text": "choice if they want I don't need to set up anything in advance they can choose if they want to see the new version or",
    "start": "1394320",
    "end": "1400159"
  },
  {
    "text": "not and they can even change this on the Fly while the canary um is",
    "start": "1400159",
    "end": "1406360"
  },
  {
    "text": "running the problem is that here and apar know from the support you need to check if your traffic provider supports",
    "start": "1406360",
    "end": "1412279"
  },
  {
    "text": "this maybe you also need to do some source code changes so in my simple example I change the source code you",
    "start": "1412279",
    "end": "1417840"
  },
  {
    "text": "know to add this small box at top um where I can select the header maybe this is something that you can do as well so",
    "start": "1417840",
    "end": "1424159"
  },
  {
    "text": "it's a bit more complex that simply uh setting different routes as we have seen in the previous",
    "start": "1424159",
    "end": "1430080"
  },
  {
    "text": "example but everything else you know is improved so today we have seen that if",
    "start": "1430080",
    "end": "1435840"
  },
  {
    "text": "you try to adopt argor out out of the box yes you get a nice way you know for doing canaris and blue green deployments",
    "start": "1435840",
    "end": "1442120"
  },
  {
    "text": "but usually for a real production deployment you need some extra H capabilities by default the r of",
    "start": "1442120",
    "end": "1448960"
  },
  {
    "text": "percentage goes to requests and you don't want to do that H also by default you know you cannot change things on the",
    "start": "1448960",
    "end": "1454840"
  },
  {
    "text": "fly so we have seen two ways one was the static URL routing where we had three",
    "start": "1454840",
    "end": "1461240"
  },
  {
    "text": "routes and we would select that these users would go to this stable uh version",
    "start": "1461240",
    "end": "1466640"
  },
  {
    "text": "these users would go to the canar vers and these users would go to the preview version this is great but it's something",
    "start": "1466640",
    "end": "1471919"
  },
  {
    "text": "that you need to set it up in advance so it's not very flexible and then we have seen the smarter way with HTTP headers",
    "start": "1471919",
    "end": "1478399"
  },
  {
    "text": "where not only you can make the change per user but you can also change everything uh on the fly so whenever I",
    "start": "1478399",
    "end": "1486919"
  },
  {
    "text": "talk about argor outs usually people bring to the discussion feature Flags because some of the things that you have",
    "start": "1486919",
    "end": "1492799"
  },
  {
    "text": "seen are similar to feature Flags like with feature Flags you can also you know enable features according to different",
    "start": "1492799",
    "end": "1498399"
  },
  {
    "text": "users you can group your users and say this feature will be only available to France and that feature will not be",
    "start": "1498399",
    "end": "1504200"
  },
  {
    "text": "available outside of uh France and yes feature Flags you know are a great thing",
    "start": "1504200",
    "end": "1510600"
  },
  {
    "text": "you can use them along with canaris and blue grid deployments not know one or the other but my comment there is that",
    "start": "1510600",
    "end": "1517720"
  },
  {
    "text": "all the solutions I've shown you are uh are set up once you spend effort once",
    "start": "1517720",
    "end": "1524440"
  },
  {
    "text": "you set it up and that's it feature Flags need constant maintenance okay I'm",
    "start": "1524440",
    "end": "1529480"
  },
  {
    "text": "actually betting right now that if you're using feature Flags there is at least one feature flag in your code base",
    "start": "1529480",
    "end": "1535559"
  },
  {
    "text": "which at some point you know was important then everybody said okay let's switch everybody to the new version and",
    "start": "1535559",
    "end": "1541679"
  },
  {
    "text": "the code is still there you still have an if else statement that does something different and the else doesn't run",
    "start": "1541679",
    "end": "1548120"
  },
  {
    "text": "anymore so ideally you should spend some time you know to go and clean up your feature Flags in order to simplify your",
    "start": "1548120",
    "end": "1553600"
  },
  {
    "text": "life but as you add more feature Flags this needs uh constant maintenance so I'm saying this",
    "start": "1553600",
    "end": "1559640"
  },
  {
    "text": "because people always come and ask me about this comparison table like how do you compare all these possibilities so",
    "start": "1559640",
    "end": "1566279"
  },
  {
    "text": "here is the comparison table if you want to have it but it's not really a comparison because you can do two of",
    "start": "1566279",
    "end": "1572559"
  },
  {
    "text": "them at the same time or three of them at the same time so I could have a scenario where I'm using feature flags",
    "start": "1572559",
    "end": "1578080"
  },
  {
    "text": "and header based routing and for some users I send them to SL table because I don't want them to H look at the canary",
    "start": "1578080",
    "end": "1585159"
  },
  {
    "text": "at all but you have like the capability to see you know what you can do according to your uh needs and also in",
    "start": "1585159",
    "end": "1591440"
  },
  {
    "text": "some of those you need cooperation with the developers so if you want to adopt feature Flags you need to talk with the",
    "start": "1591440",
    "end": "1597080"
  },
  {
    "text": "developers because they need to modify the code in order to add feature Flags the first solution I've shown you the",
    "start": "1597080",
    "end": "1603679"
  },
  {
    "text": "the static setup maybe it's limited but it's something you can quickly you know set up on your own just with argor and a",
    "start": "1603679",
    "end": "1610159"
  },
  {
    "text": "traffic manager and without any other uh user um sorry developer involvement so",
    "start": "1610159",
    "end": "1618799"
  },
  {
    "text": "uh apart from the developers you can also see the third row the adoption effort where I'm explaining why I",
    "start": "1618799",
    "end": "1625080"
  },
  {
    "text": "believe uh feature flags are high because it's something that you not only need initial investment but then as you",
    "start": "1625080",
    "end": "1631600"
  },
  {
    "text": "know you add more feature Flags you also need to update them and you also need to clean them up um and do whatever you",
    "start": "1631600",
    "end": "1637360"
  },
  {
    "text": "want so feel free to choose you know whichever method works for you but it's possible to use two of them or three of",
    "start": "1637360",
    "end": "1644640"
  },
  {
    "text": "them at the same time and that's it thank you very",
    "start": "1644640",
    "end": "1651520"
  },
  {
    "text": "[Applause]",
    "start": "1651520",
    "end": "1656720"
  },
  {
    "text": "much we have enough time for questions there are two microphones between the",
    "start": "1656720",
    "end": "1663559"
  },
  {
    "text": "rows no",
    "start": "1664760",
    "end": "1668039"
  },
  {
    "text": "questions yes it's working maybe no",
    "start": "1672600",
    "end": "1678760"
  },
  {
    "text": "hello uh yeah all right sorry um if you if you like set up the canary",
    "start": "1678760",
    "end": "1684360"
  },
  {
    "text": "are there situations you've experienced where not enough people use the canary service to like satisfy whatever you're",
    "start": "1684360",
    "end": "1691320"
  },
  {
    "text": "measuring again a bit uh come closer to the microphone I didn't hear anything",
    "start": "1691320",
    "end": "1696720"
  },
  {
    "text": "can you hear that all right yeah um yeah if you've set up a canary and not enough people are using the new Canary endpoint",
    "start": "1696720",
    "end": "1704480"
  },
  {
    "text": "like for some reason your users are all asleep at some point um um is there",
    "start": "1704480",
    "end": "1709679"
  },
  {
    "text": "other mechanisms for you to set up kind of like Drive synthetic traffic to meet whatever metrics you're measuring yes so",
    "start": "1709679",
    "end": "1716919"
  },
  {
    "text": "one feature I didn't talk about because it wasn't for this presentation is that you can set up analysis uh templates",
    "start": "1716919",
    "end": "1723200"
  },
  {
    "text": "with Argo outs and you can uh either look at metric providers there or run",
    "start": "1723200",
    "end": "1728519"
  },
  {
    "text": "custom tests so the proper way to use argor outs is while the canar is running",
    "start": "1728519",
    "end": "1733600"
  },
  {
    "text": "you can also start a custom test that either creates real traffic or simulated",
    "start": "1733600",
    "end": "1739440"
  },
  {
    "text": "traffic and it sends to the canary and then you start another analysis that checks the metrics while this simulated",
    "start": "1739440",
    "end": "1746120"
  },
  {
    "text": "traffic is running so you can do it with real users but you can also do it with fake users or with a combination uh of",
    "start": "1746120",
    "end": "1753919"
  },
  {
    "text": "two but yes ideally while a canar is running you want to test the uh the",
    "start": "1753919",
    "end": "1759120"
  },
  {
    "text": "canary one feature that is coming in the Gateway um API and the plugin which",
    "start": "1759120",
    "end": "1764320"
  },
  {
    "text": "already as I said exists for ISO is where you can um mirror traffic so you can have you know your real traffic go",
    "start": "1764320",
    "end": "1770519"
  },
  {
    "text": "to production system and then you mirror the traffic and you send it to a completely separate system and then you",
    "start": "1770519",
    "end": "1775919"
  },
  {
    "text": "test whatever you want to test without affecting uh production at",
    "start": "1775919",
    "end": "1781600"
  },
  {
    "text": "all yes hello my name is John fellow traffic routing Enthusiast could you expand on",
    "start": "1781960",
    "end": "1790000"
  },
  {
    "text": "the pros and cons of using a cookie header to do traffic versus an",
    "start": "1790000",
    "end": "1795440"
  },
  {
    "text": "x-h header uh I haven't checked this topic I can",
    "start": "1795440",
    "end": "1801880"
  },
  {
    "text": "research it I don't think there is a real uh Advantage usually cookies I think are not",
    "start": "1801880",
    "end": "1807760"
  },
  {
    "text": "supported everywhere in the you know networking stock while I think headers are more Universal they are a well-known",
    "start": "1807760",
    "end": "1814120"
  },
  {
    "text": "solution and you can find let's say really all traditional proxies and they support headers the classic problem you",
    "start": "1814120",
    "end": "1820000"
  },
  {
    "text": "have is you start a cookie or a header somewhere in the beginning of a stock and then somewhere in the middle somebody either cuts it discards it or",
    "start": "1820000",
    "end": "1827440"
  },
  {
    "text": "changes this so I believe headers are a bit more bulletproof but I might be",
    "start": "1827440",
    "end": "1832919"
  },
  {
    "text": "wrong yeah most most cookies are just passed to the cookie that cookie colon header and your login session would be",
    "start": "1832919",
    "end": "1839799"
  },
  {
    "text": "dependent on a cookie header as well okay but two cookies um always requir",
    "start": "1839799",
    "end": "1845399"
  },
  {
    "text": "like uh a browser based application can I have a backend application yes and a browser based application so this works",
    "start": "1845399",
    "end": "1851200"
  },
  {
    "text": "with backend applications as well remember in the beginning I said the O service itself doesn't have a web",
    "start": "1851200",
    "end": "1856679"
  },
  {
    "text": "service at all when I'm starting the canary",
    "start": "1856679",
    "end": "1862720"
  },
  {
    "text": "yes hi in this presentation you mainly talked about how to set it up so traffic",
    "start": "1862720",
    "end": "1868559"
  },
  {
    "text": "routes to multiple canaries or the main stable one but what flow do you suggest",
    "start": "1868559",
    "end": "1875240"
  },
  {
    "text": "when you have now decided that everyone should be moved to this 2.0 version um I guess you can manually go",
    "start": "1875240",
    "end": "1882519"
  },
  {
    "text": "in and run the Argo CD roll out uh whatever command for rolling it out what what is the flow your suggesting for",
    "start": "1882519",
    "end": "1888519"
  },
  {
    "text": "this kind of so that was another presentation from yesterday the suggestion is to have Argo outs",
    "start": "1888519",
    "end": "1895399"
  },
  {
    "text": "automatically promoted for everything so everything all the demos you have seen are while the canar is running the",
    "start": "1895399",
    "end": "1901720"
  },
  {
    "text": "assumption is that at some point argor makes a decision and says yes the new version is great so it promotes on its",
    "start": "1901720",
    "end": "1908720"
  },
  {
    "text": "own the canary to 100% of the traffic for everybody and then it doesn't matter where you are maybe this was a a thing",
    "start": "1908720",
    "end": "1915559"
  },
  {
    "text": "to improve in the demo before the canar starts this/ table SL preview SL Canary",
    "start": "1915559",
    "end": "1922039"
  },
  {
    "text": "they show the exact same thing version one and after you finish the canar again they show the exact same thing they show",
    "start": "1922039",
    "end": "1928880"
  },
  {
    "text": "version 2.0 and to follow up on that so let's say that now some some since the user",
    "start": "1928880",
    "end": "1936360"
  },
  {
    "text": "can decide if they want to have that hitter sometimes if they want the canary that was one of the examples right let's",
    "start": "1936360",
    "end": "1942159"
  },
  {
    "text": "say now you have decided to roll out to this new Canary version for everyone but",
    "start": "1942159",
    "end": "1947320"
  },
  {
    "text": "the user is still on the canary so the next time you want to use do a new Canary do they have to say Canary 2 or",
    "start": "1947320",
    "end": "1954200"
  },
  {
    "text": "that like I guess they you have to communicate to the user to go back to the stable one because you're about to",
    "start": "1954200",
    "end": "1960080"
  },
  {
    "text": "make a new Canary does it make sense uh if you're talking about this you know nice selection I have there is a big",
    "start": "1960080",
    "end": "1966440"
  },
  {
    "text": "discussion whether you want to expose it to the user or not so if you want your users to be smart yes you can expose it",
    "start": "1966440",
    "end": "1973720"
  },
  {
    "text": "to them but if you don't want them to to do this uh I've actually had some some companies where I proposed this method",
    "start": "1973720",
    "end": "1979480"
  },
  {
    "text": "and they said no business is never going to know approve users selecting their",
    "start": "1979480",
    "end": "1984519"
  },
  {
    "text": "risk we will make the selection for them and they are going not going to know anything at all so it depends on your",
    "start": "1984519",
    "end": "1990200"
  },
  {
    "text": "use case all right thank",
    "start": "1990200",
    "end": "1993919"
  },
  {
    "text": "you yes probably last question yes um so I'm just looking at the slides um that",
    "start": "1997159",
    "end": "2003320"
  },
  {
    "text": "you're showing the new syntax um I know that the um set header route is the way to tell whether the traffic go to Canary",
    "start": "2003320",
    "end": "2009679"
  },
  {
    "text": "versus stable um and then the new syntax for the HTTP HTTP route is that the one",
    "start": "2009679",
    "end": "2016039"
  },
  {
    "text": "how how does it decide which sets of user is going to stable versus which set of user going to Canary so that they're",
    "start": "2016039",
    "end": "2022960"
  },
  {
    "text": "following not based on request wait wait which which example are you talking about the first one or the second one",
    "start": "2022960",
    "end": "2028480"
  },
  {
    "text": "the dynamic one okay so here I have the dynamic this is a standard um roll out",
    "start": "2028480",
    "end": "2035440"
  },
  {
    "text": "the only thing new here is that I'm saying I'm going to use uh special routes so it's not a standard Canary",
    "start": "2035440",
    "end": "2042120"
  },
  {
    "text": "anymore I'm using the Gateway API plugin because this is only supported by the a",
    "start": "2042120",
    "end": "2047599"
  },
  {
    "text": "plugin um then I'm saying start the canary and you will send 20% of the traffic to New users but if there is a",
    "start": "2047599",
    "end": "2056839"
  },
  {
    "text": "NP header which is called X Canary and it's called yes then those users will",
    "start": "2056839",
    "end": "2062118"
  },
  {
    "text": "always be selected for this 25% and they will go um to the new vers",
    "start": "2062119",
    "end": "2068760"
  },
  {
    "text": "whether this header is present or not in my example you know it was super simple because I had the the UI but you need to",
    "start": "2068760",
    "end": "2075358"
  },
  {
    "text": "decide in your in your application if this is something per user or not maybe you don't want to use it to be per user",
    "start": "2075359",
    "end": "2082320"
  },
  {
    "text": "and you want it to be per region so you decide that everybody you know in France has this header so it can be 10 users",
    "start": "2082320",
    "end": "2089638"
  },
  {
    "text": "100 users it doesn't matter okay so we have to choose the user and then we have to apply that header to that group of",
    "start": "2089639",
    "end": "2095200"
  },
  {
    "text": "user yes it's all the request um let's see also maybe in the",
    "start": "2095200",
    "end": "2101119"
  },
  {
    "text": "browser so [Music] here you can see the request they run",
    "start": "2101119",
    "end": "2107760"
  },
  {
    "text": "every 3 seconds and all the request apart from the original one they have",
    "start": "2107760",
    "end": "2112920"
  },
  {
    "text": "this uh header at the end X Canary yes so it's",
    "start": "2112920",
    "end": "2119200"
  },
  {
    "text": "running you know all the time for every request thank you and that's it thank you very much",
    "start": "2119200",
    "end": "2128240"
  }
]