[
  {
    "start": "0",
    "end": "70000"
  },
  {
    "text": "i'd like to thank everyone joining us welcome to today's cncf webinar argo real enterprise scale with k-8s",
    "start": "1599",
    "end": "8880"
  },
  {
    "text": "and we're saying that right y'all sorry it's early sounds good okay i'm libby schultz i'll",
    "start": "8880",
    "end": "15599"
  },
  {
    "text": "be moderating today's webinar we would like to welcome our presenters today al kimner principal software engineer",
    "start": "15599",
    "end": "21680"
  },
  {
    "text": "and architect at new relic daniel jimble staff engineer at new relic and caleb trotton",
    "start": "21680",
    "end": "27279"
  },
  {
    "text": "product manager telemetry data platform at new relic a few housekeeping items before we get",
    "start": "27279",
    "end": "33200"
  },
  {
    "text": "started during the webinar you are not able to talk as an attendee there is a q a box at the bottom of your screen",
    "start": "33200",
    "end": "39520"
  },
  {
    "text": "please feel free to drop your questions in there and we'll get to as many as we can at the end this is an official",
    "start": "39520",
    "end": "44879"
  },
  {
    "text": "webinar of the cncf and as such as subject to the cncf code of conduct please do not add anything to the chat",
    "start": "44879",
    "end": "51440"
  },
  {
    "text": "or questions that would be in violation of that code of conduct and be respectful of all of your fellow participants and presenters",
    "start": "51440",
    "end": "58079"
  },
  {
    "text": "please also note that the recording and slides will be posted later today to the cncf webinar page",
    "start": "58079",
    "end": "63359"
  },
  {
    "text": "at cncf dot io slash webinars and with that i will hand it over to you guys all right hello and good",
    "start": "63359",
    "end": "71119"
  },
  {
    "start": "70000",
    "end": "86000"
  },
  {
    "text": "morning good afternoon or good evening everyone welcome um before we get started with the",
    "start": "71119",
    "end": "77119"
  },
  {
    "text": "presentation i want to uh have a word from our legal team",
    "start": "77119",
    "end": "82159"
  },
  {
    "text": "so this is our safe harbor slide we can move on next slide please i'm al kimner principal engineer",
    "start": "82159",
    "end": "88479"
  },
  {
    "start": "86000",
    "end": "195000"
  },
  {
    "text": "architect i help engineering teams build software and systems that's simple to maintain and scale my",
    "start": "88479",
    "end": "94479"
  },
  {
    "text": "favorite hobby is scuba diving hey everybody i'm caleb trotton i have",
    "start": "94479",
    "end": "100079"
  },
  {
    "text": "been an engineer at new relic for a while and i'm now a product manager with the telemetry data platform focusing on",
    "start": "100079",
    "end": "106479"
  },
  {
    "text": "cincd when we're not in a global pandemic in my free time i like to spend it in a",
    "start": "106479",
    "end": "112079"
  },
  {
    "text": "bowling alley hi everybody i'm daniel hindell and i'm",
    "start": "112079",
    "end": "118880"
  },
  {
    "text": "a soft engineer neroli i engage with teams on temporary bases to help them with their",
    "start": "118880",
    "end": "125680"
  },
  {
    "text": "projects and when i'm nothing from in front of a keyboard i enjoy climbing and trying learning",
    "start": "125680",
    "end": "133680"
  },
  {
    "text": "cool and we're excited and grateful to have the opportunity to talk to you today about argo",
    "start": "134080",
    "end": "139680"
  },
  {
    "text": "uh we have a packed agenda for our presentation day with two compelling demos i'm going to give you an overview of new",
    "start": "140000",
    "end": "145360"
  },
  {
    "text": "relic's ingestion streaming and storage architecture which should set the stage of what problems we have and how argo fits into that i'll",
    "start": "145360",
    "end": "152720"
  },
  {
    "text": "cover our use of argo cd and the scale at which we're using it caleb will walk us through how argo",
    "start": "152720",
    "end": "158160"
  },
  {
    "text": "rollouts give us a better gives us a better experience than a kubernetes rolling update for a deployment and showing and showing",
    "start": "158160",
    "end": "165040"
  },
  {
    "text": "a demo of the deployment with an automated canary analysis after that we'll cover additional needs",
    "start": "165040",
    "end": "170959"
  },
  {
    "text": "we have with orchestration at scale and how argo workflow helps us there daniel is going to cover",
    "start": "170959",
    "end": "177280"
  },
  {
    "text": "how we use terraform an open policy agent with an argo workflow to safely roll out infrastructure as code changes our main",
    "start": "177280",
    "end": "184080"
  },
  {
    "text": "objectives today are that you'll be able to understand how to safely implement",
    "start": "184080",
    "end": "189200"
  },
  {
    "text": "continuous delivery at scale for both kubernetes resources and infrastructure as code pipelines",
    "start": "189200",
    "end": "195920"
  },
  {
    "start": "195000",
    "end": "229000"
  },
  {
    "text": "here's a high level diagram of the telemetry data platform at new relic the parts of the diagram are made up of",
    "start": "196400",
    "end": "202400"
  },
  {
    "text": "approximately a few hundred different microservices this part of the platform supports",
    "start": "202400",
    "end": "207760"
  },
  {
    "text": "ingesting many petabytes of data a day from all over the world with millisecond response times for the",
    "start": "207760",
    "end": "213360"
  },
  {
    "text": "querying of the ingested data i point out both the amount of data we ingest and the",
    "start": "213360",
    "end": "218799"
  },
  {
    "text": "response time on queries for the ingested data because all these services are dealing with an incredible amount of throughput",
    "start": "218799",
    "end": "225040"
  },
  {
    "text": "and we are also continuously deploying updates all the time",
    "start": "225040",
    "end": "230080"
  },
  {
    "start": "229000",
    "end": "251000"
  },
  {
    "text": "this chart shows the data growth over time for the period that engineering teams on",
    "start": "230080",
    "end": "236239"
  },
  {
    "text": "the telomere telemetry data platform migrated these services to kubernetes",
    "start": "236239",
    "end": "241840"
  },
  {
    "text": "which brings us to how does new relic do continuous delivery in a distributed system that ingests such a",
    "start": "241840",
    "end": "247439"
  },
  {
    "text": "massive amount of data safely without interruption this is where argosidi enters the",
    "start": "247439",
    "end": "253280"
  },
  {
    "start": "251000",
    "end": "310000"
  },
  {
    "text": "picture first some history about argo argo was created in 2017",
    "start": "253280",
    "end": "259440"
  },
  {
    "text": "at athletics which was acquired by intuit in january of 2018 who open sourced argo a few months later",
    "start": "259440",
    "end": "266720"
  },
  {
    "text": "blackrock contributed argo events to the argo project argo then joined the cncf",
    "start": "266720",
    "end": "272160"
  },
  {
    "text": "in april of 2020. so why argo well at new relic we are constantly",
    "start": "272160",
    "end": "278080"
  },
  {
    "text": "evolving our systems along with our internal engineering processes and operations one of those changes was introducing",
    "start": "278080",
    "end": "283919"
  },
  {
    "text": "kubernetes kubernetes was a good fit for us because we have been multi-cloud for many years and our services exist across multiple",
    "start": "283919",
    "end": "290479"
  },
  {
    "text": "public cloud providers and private data centers in many different regions kubernetes was a natural fit",
    "start": "290479",
    "end": "296560"
  },
  {
    "text": "and since all of our argo tools and since all of the argo tools are implemented as controllers and custom",
    "start": "296560",
    "end": "302080"
  },
  {
    "text": "resources in kubernetes argos seemed like a good fit too which led us to look at argo cd",
    "start": "302080",
    "end": "310720"
  },
  {
    "start": "310000",
    "end": "353000"
  },
  {
    "text": "this is a long list of features that made it compelling for us to pick argo cd for our continuous delivery needs and",
    "start": "310720",
    "end": "316720"
  },
  {
    "text": "this is not even the full list i just ran out of room on the slide one of the main drivers was",
    "start": "316720",
    "end": "322160"
  },
  {
    "text": "for us to have the ability to easily manage and deploy multiple kubernetes clusters with a get",
    "start": "322160",
    "end": "327600"
  },
  {
    "text": "ops workflow we have lots of kubernetes clusters and we're creating more and more all the",
    "start": "327600",
    "end": "332880"
  },
  {
    "text": "time so argo cd was the easiest way to get up and running and checked all the boxes for all the",
    "start": "332880",
    "end": "339039"
  },
  {
    "text": "things we wanted all in all we've been extremely pleased with it a bonus as of last week argo cd version",
    "start": "339039",
    "end": "345600"
  },
  {
    "text": "1.8 just shipped and added horizontal controls controller scaling so now we can have even more",
    "start": "345600",
    "end": "350840"
  },
  {
    "text": "kubernetes working at a company that focuses on",
    "start": "350840",
    "end": "356479"
  },
  {
    "start": "353000",
    "end": "400000"
  },
  {
    "text": "observability it would not feel right without sharing some stats about our current argo cd instance we are at approximately 3 000",
    "start": "356479",
    "end": "362960"
  },
  {
    "text": "applications and over 10 000 kubernetes deployments in the last month the kubernetes clusters are very big",
    "start": "362960",
    "end": "369120"
  },
  {
    "text": "with most over a thousand nodes we've segmented our services into different workloads and workloads are",
    "start": "369120",
    "end": "375600"
  },
  {
    "text": "assigned to different size kubernetes clusters i'm pointing all this out because we have lots of",
    "start": "375600",
    "end": "380880"
  },
  {
    "text": "variables with dozens of internal engineering teams and a whole bunch of services and lots of changes",
    "start": "380880",
    "end": "386800"
  },
  {
    "text": "argo cd makes the rate of change possible but we're still missing the safe part of",
    "start": "386800",
    "end": "392240"
  },
  {
    "text": "this continuous delivery story and now caleb is going to talk to you about that take it away caleb",
    "start": "392240",
    "end": "399039"
  },
  {
    "text": "thank you al uh so i'm going to talk to everybody today about argo rollouts and how that helps us with",
    "start": "399280",
    "end": "405840"
  },
  {
    "start": "400000",
    "end": "410000"
  },
  {
    "text": "the safety of so many deployments happening every day",
    "start": "405840",
    "end": "411199"
  },
  {
    "start": "410000",
    "end": "530000"
  },
  {
    "text": "so with hundreds if not thousands of deployments a day we need a way to make sure that changes",
    "start": "411199",
    "end": "416880"
  },
  {
    "text": "roll out safely and don't require an extreme amount of effort from",
    "start": "416880",
    "end": "422479"
  },
  {
    "text": "engineers to make sure that the deployment works right for this we like to use a canary deploy",
    "start": "422479",
    "end": "428880"
  },
  {
    "text": "strategy if you're not familiar with the canary deploy strategy that involves deploying one or some",
    "start": "428880",
    "end": "435520"
  },
  {
    "text": "small number of instances with a new change waiting some amount of time to make sure",
    "start": "435520",
    "end": "441599"
  },
  {
    "text": "that new change is safe and then once you've determined that it is safe rolling that change out to the rest of",
    "start": "441599",
    "end": "447440"
  },
  {
    "text": "your instances this can totally be done manually in",
    "start": "447440",
    "end": "452560"
  },
  {
    "text": "terms of verifying whether the canary is done safe but we",
    "start": "452560",
    "end": "458400"
  },
  {
    "text": "don't want to have uh you know a human involved for 30 or 60 minutes every time a deploy is made when we're making",
    "start": "458400",
    "end": "464960"
  },
  {
    "text": "hundreds of them a day so something that we were really looking for was automated canary analysis",
    "start": "464960",
    "end": "472800"
  },
  {
    "text": "automated canary analysis allows you to query some metric provider and",
    "start": "474240",
    "end": "481199"
  },
  {
    "text": "use that to determine whether the deployment of your canary is safe and then in the case that it is it",
    "start": "481199",
    "end": "488080"
  },
  {
    "text": "detects that there's something wrong with the metrics can automate a rollback",
    "start": "488080",
    "end": "493440"
  },
  {
    "text": "so we looked at argo rollouts for this because the standard kubernetes deployment resource",
    "start": "493440",
    "end": "498800"
  },
  {
    "text": "doesn't provide most of this stuff that you see here their rolling update strategy",
    "start": "498800",
    "end": "505120"
  },
  {
    "text": "allows you to roll out things slowly one at a time as long as probes",
    "start": "505120",
    "end": "513440"
  },
  {
    "text": "as long as the probe conditions are met but not really that advanced use case of stopping",
    "start": "513440",
    "end": "518560"
  },
  {
    "text": "pausing running analysis in more granular steps so argo rollouts um",
    "start": "518560",
    "end": "526080"
  },
  {
    "text": "does provide this stuff for us and i'm going to walk you through now some of the pieces",
    "start": "526080",
    "end": "531680"
  },
  {
    "start": "530000",
    "end": "571000"
  },
  {
    "text": "of argo rollouts and why it was compelling first i want to talk about the custom",
    "start": "531680",
    "end": "537200"
  },
  {
    "text": "resources that argo rollouts provides we're going to start with some of the",
    "start": "537200",
    "end": "542720"
  },
  {
    "text": "lower level stuff which are the experiments and analysis templates and analysis runs",
    "start": "542720",
    "end": "548880"
  },
  {
    "text": "and then i'm going to cover the rollout resource which basically encompasses all of these",
    "start": "548880",
    "end": "554480"
  },
  {
    "text": "things into one drop-in deployment replacement and then i'm going to talk a",
    "start": "554480",
    "end": "559600"
  },
  {
    "text": "little bit about all the metric providers that can be used with analysis templates to do the automated canary analysis",
    "start": "559600",
    "end": "565519"
  },
  {
    "text": "and then finally i'm going to show a demo of all of that coming together so let's talk about",
    "start": "565519",
    "end": "573120"
  },
  {
    "start": "571000",
    "end": "613000"
  },
  {
    "text": "experiments first an experiment at its core creates uh two",
    "start": "573120",
    "end": "578160"
  },
  {
    "text": "different replica sets each of those replica sets has its own pod spec template",
    "start": "578160",
    "end": "583519"
  },
  {
    "text": "so you can deploy uh something with as small of a change as",
    "start": "583519",
    "end": "590399"
  },
  {
    "text": "a different version in your docker image or you could have two wildly different pod specs it's up to you",
    "start": "590399",
    "end": "598880"
  },
  {
    "text": "what you do with those pods with just an experiment is up to you they'll be run and you can go",
    "start": "599600",
    "end": "604959"
  },
  {
    "text": "poke them however you see fit but where it gets a little more interesting is when you pair an experiment",
    "start": "604959",
    "end": "610800"
  },
  {
    "text": "with an analysis template to be run against those pods so an analysis template describes three",
    "start": "610800",
    "end": "618560"
  },
  {
    "start": "613000",
    "end": "647000"
  },
  {
    "text": "metric providers what to query and what a successful query looks like",
    "start": "618560",
    "end": "625839"
  },
  {
    "text": "from there the experiment will use the analysis template and initiate an analysis run uh an analysis run is",
    "start": "627920",
    "end": "635120"
  },
  {
    "text": "really just an instance of that analysis template with arguments filled in uh typically with",
    "start": "635120",
    "end": "640480"
  },
  {
    "text": "information about one or more of those pods in your stable or canary replica set",
    "start": "640480",
    "end": "647839"
  },
  {
    "start": "647000",
    "end": "764000"
  },
  {
    "text": "and finally what what most folks actually interact with in argo rollouts is the",
    "start": "648640",
    "end": "654079"
  },
  {
    "text": "rollout resource like i said this is a drop-in replacement for deployment if you didn't use any of argo rollout's",
    "start": "654079",
    "end": "661920"
  },
  {
    "text": "advanced features and didn't specify like a canary strategy",
    "start": "661920",
    "end": "668320"
  },
  {
    "text": "you could just use it like a drop in deployment replacement but you're not going to get all the",
    "start": "668320",
    "end": "674640"
  },
  {
    "text": "goodies in it until you um specify a special strategy like canary or blue",
    "start": "674640",
    "end": "681120"
  },
  {
    "text": "green deployments um our gorilla supports blue green deploys which i'm not going to cover today but",
    "start": "681120",
    "end": "686160"
  },
  {
    "text": "i encourage you to go google it and see if that is uh something that you're interested in as well",
    "start": "686160",
    "end": "692000"
  },
  {
    "text": "so on the right here we have um a really basic uh example uh mostly taken from the um",
    "start": "692560",
    "end": "700079"
  },
  {
    "text": "argo rollout stocks uh showing that um most of the spec is just like a",
    "start": "700079",
    "end": "706000"
  },
  {
    "text": "deployment however what we see here is an alternate strategy with canary",
    "start": "706000",
    "end": "711120"
  },
  {
    "text": "in this example what we're doing is uh deploying 20 of the instances first",
    "start": "711120",
    "end": "719760"
  },
  {
    "text": "pausing for five minutes and then running a one-time analysis uh using the success rate",
    "start": "719760",
    "end": "727360"
  },
  {
    "text": "analysis template and passing in an argument with the service name of the service being deployed",
    "start": "727360",
    "end": "735440"
  },
  {
    "text": "the analysis type that's used here of running a one type analysis or a",
    "start": "737839",
    "end": "743600"
  },
  {
    "text": "one-time analysis uh at the end of that pause duration is one way that argo rollouts lets you",
    "start": "743600",
    "end": "749920"
  },
  {
    "text": "configure analysis to run but there are other ways including running analysis in the",
    "start": "749920",
    "end": "755519"
  },
  {
    "text": "background uh the entire time that your canary steps are progressing",
    "start": "755519",
    "end": "762959"
  },
  {
    "start": "764000",
    "end": "869000"
  },
  {
    "text": "last before i get to the demo i want to talk about all the different metric providers that you can specify in an analysis template",
    "start": "764880",
    "end": "772880"
  },
  {
    "text": "so first you can run a kubernetes job this would instantiate a kubernetes job on the",
    "start": "772880",
    "end": "777920"
  },
  {
    "text": "cluster and uh just look for the exit status of that",
    "start": "777920",
    "end": "783040"
  },
  {
    "text": "job if it exits zero your job is successful if it's non-zero it failed",
    "start": "783040",
    "end": "789760"
  },
  {
    "text": "you can fire off http requests against any endpoint and as long as it returns json you can",
    "start": "789760",
    "end": "796720"
  },
  {
    "text": "specify what json path and what values you're looking at in that json payload and",
    "start": "796720",
    "end": "803760"
  },
  {
    "text": "which ones you consider failure and success you can also integrate with a tool",
    "start": "803760",
    "end": "808959"
  },
  {
    "text": "called kyenta kayenta is traditionally a piece of the spinnaker ecosystem although you can run",
    "start": "808959",
    "end": "815839"
  },
  {
    "text": "it stand alone the main thing that cayanta does is perform a",
    "start": "815839",
    "end": "821519"
  },
  {
    "text": "different type of statistical analysis on the two different groups of instances that you're comparing",
    "start": "821519",
    "end": "827360"
  },
  {
    "text": "called the man whitney analysis google that if you want to learn more about statistics and",
    "start": "827360",
    "end": "833680"
  },
  {
    "text": "this can be integrated with and kyensa has its own set of metric providers that you can",
    "start": "833680",
    "end": "839920"
  },
  {
    "text": "configure there too so also you can directly query",
    "start": "839920",
    "end": "846480"
  },
  {
    "text": "different metric providers uh prometheus if you have prompt ql queries that you",
    "start": "846480",
    "end": "852639"
  },
  {
    "text": "want to run as well as a number of commercial providers that includes ourselves new",
    "start": "852639",
    "end": "857839"
  },
  {
    "text": "relic datadog and wavefront the demo i'm about to show you is going",
    "start": "857839",
    "end": "862959"
  },
  {
    "text": "to be using new relic as the metric provider because that's what we use here",
    "start": "862959",
    "end": "870079"
  },
  {
    "start": "869000",
    "end": "1321000"
  },
  {
    "text": "uh so let me pop out of the presentation and start showing you some stuff",
    "start": "870079",
    "end": "877120"
  },
  {
    "text": "i'm gonna start uh first with a rollout resource so what i'm gonna demo is i have an argo cd application with two",
    "start": "877120",
    "end": "883120"
  },
  {
    "text": "resources in it a rollout and an analysis template this is the rollout uh you can see we",
    "start": "883120",
    "end": "890000"
  },
  {
    "text": "have five replicas and then we're going to have this canary deploy strategy",
    "start": "890000",
    "end": "895519"
  },
  {
    "text": "where we deploy 20 of those resources aka one instance uh we're going to pause",
    "start": "895519",
    "end": "903040"
  },
  {
    "text": "for uh only 20 seconds uh this is a demo on a webinar and i want to keep it a bit snappy",
    "start": "903040",
    "end": "909680"
  },
  {
    "text": "and then we're going to run a one-time analysis against the error rate of the",
    "start": "909680",
    "end": "914720"
  },
  {
    "text": "application we're going to be passing in a an application name",
    "start": "914720",
    "end": "919920"
  },
  {
    "text": "which is webinar demo app the canary hash this is a something",
    "start": "919920",
    "end": "925920"
  },
  {
    "text": "provided by argo rollouts it is the replica set identifier segment of",
    "start": "925920",
    "end": "931279"
  },
  {
    "text": "uh the pods name um and the latest value here basically says",
    "start": "931279",
    "end": "937920"
  },
  {
    "text": "give me the pod template hash from the canary group and this is uh just another argument",
    "start": "937920",
    "end": "945360"
  },
  {
    "text": "into our analysis template saying how long to run our query for in our metric provider so against new",
    "start": "945360",
    "end": "952839"
  },
  {
    "text": "relic the rest of this spec looks exactly like a",
    "start": "952839",
    "end": "958560"
  },
  {
    "text": "typical deployment spec we have an image we have environment variables",
    "start": "958560",
    "end": "965279"
  },
  {
    "text": "most of these environment variables are just hooking up the new relic agent and then we have one environment variable",
    "start": "965279",
    "end": "970480"
  },
  {
    "text": "that takes the rollout pod template hash and using kubernetes downward api makes that",
    "start": "970480",
    "end": "976880"
  },
  {
    "text": "available as a environment variable in our container which we are then using to add to the",
    "start": "976880",
    "end": "983040"
  },
  {
    "text": "instrumentation by the agent so that we can pick up uh in our transactions whether a",
    "start": "983040",
    "end": "990959"
  },
  {
    "text": "given pod belongs to the canary group or to the stable group",
    "start": "990959",
    "end": "996000"
  },
  {
    "text": "this error rate analysis template that we're referencing here it takes four arguments it takes",
    "start": "996000",
    "end": "1004000"
  },
  {
    "text": "application name the canary hash we saw that in our rollout",
    "start": "1004000",
    "end": "1009680"
  },
  {
    "text": "we have this since uh this is defaulting to one minute so any rollout using this analysis template",
    "start": "1009680",
    "end": "1017920"
  },
  {
    "text": "for any of these arguments that have a value there that value is the default and so you",
    "start": "1017920",
    "end": "1022959"
  },
  {
    "text": "don't have to pass it in for these val for these arguments that don't have a default you're required to",
    "start": "1022959",
    "end": "1028880"
  },
  {
    "text": "pass in a value from your rollout so we're using 20 seconds as the sense",
    "start": "1028880",
    "end": "1034480"
  },
  {
    "text": "here the error threshold we didn't pass in we're using the default that is 1.0",
    "start": "1034480",
    "end": "1039760"
  },
  {
    "text": "which is a one percent error rate threshold uh we're specifying",
    "start": "1039760",
    "end": "1045760"
  },
  {
    "text": "a failure condition which is that the error rate is uh greater than or equal to the",
    "start": "1045760",
    "end": "1051200"
  },
  {
    "text": "threshold so this will fail if the error rate goes above one percent and then the",
    "start": "1051200",
    "end": "1056320"
  },
  {
    "text": "query that we're giving to new relic uh is uh the shorthand of it is what is",
    "start": "1056320",
    "end": "1062160"
  },
  {
    "text": "the error rate of this application with this pod template hash so",
    "start": "1062160",
    "end": "1069280"
  },
  {
    "text": "in our example we are saying what is the error rate of the canary pod that we've deployed",
    "start": "1069280",
    "end": "1076160"
  },
  {
    "text": "so let me jump over here to argo cd for a second to this application i have this rollout running already i am",
    "start": "1076880",
    "end": "1085200"
  },
  {
    "text": "going to make some changes to it now and i would uh caveat i would typically",
    "start": "1085200",
    "end": "1091679"
  },
  {
    "text": "do this in a more get ops fashion but again this is a demo and i want to keep it snappy so we're just going to edit",
    "start": "1091679",
    "end": "1096720"
  },
  {
    "text": "the manifest directly to simulate a new deployment",
    "start": "1096720",
    "end": "1101760"
  },
  {
    "text": "i'm going to deploy release 4 and we're going to see what argo",
    "start": "1101760",
    "end": "1107360"
  },
  {
    "text": "rollouts does with this you'll see first uh that it spun up a",
    "start": "1107360",
    "end": "1113600"
  },
  {
    "text": "new replica set with one pod and scaled down the stable replica set",
    "start": "1113600",
    "end": "1119440"
  },
  {
    "text": "to four pods so we still have five pods total running",
    "start": "1119440",
    "end": "1124559"
  },
  {
    "text": "in a second what you're going to see here we go is an analysis run was executed and very quickly we see",
    "start": "1125440",
    "end": "1133120"
  },
  {
    "text": "that the canary replica set uh has been scaled up to five pods um the old replica set is scaling",
    "start": "1133120",
    "end": "1140320"
  },
  {
    "text": "down to zero um so if we take a look at this analysis run it's all green so you're not going to",
    "start": "1140320",
    "end": "1146640"
  },
  {
    "text": "see a ton of information up front but if you dig into the manifest you'll notice",
    "start": "1146640",
    "end": "1152160"
  },
  {
    "text": "that we have an error rate of zero at this time",
    "start": "1152160",
    "end": "1157600"
  },
  {
    "text": "so let's go the other way let's uh let's deploy something bad so i have a",
    "start": "1159120",
    "end": "1165280"
  },
  {
    "text": "version of this application that uh boots up completely fine but",
    "start": "1165280",
    "end": "1170559"
  },
  {
    "text": "there's a bug in it that causes um all of the background processing that it does",
    "start": "1170559",
    "end": "1176000"
  },
  {
    "text": "to air so let's deploy that version",
    "start": "1176000",
    "end": "1181600"
  },
  {
    "text": "again just like last time we get one pod on a new replica set here our old",
    "start": "1182799",
    "end": "1188160"
  },
  {
    "text": "replica set scales down",
    "start": "1188160",
    "end": "1193840"
  },
  {
    "text": "i'm going to show you something while we're waiting here which is um this is a new relic",
    "start": "1197120",
    "end": "1204480"
  },
  {
    "text": "and i have a query here that is showing basically the same thing the error rate for this application and we're already",
    "start": "1204480",
    "end": "1210799"
  },
  {
    "text": "seeing that this has just recently spiked up if i jump back to argo cd you're going",
    "start": "1210799",
    "end": "1218799"
  },
  {
    "text": "to see that another analysis run uh occurred uh and the newer replica set rev6",
    "start": "1218799",
    "end": "1226960"
  },
  {
    "text": "uh because the analysis run failed scaled down so it automatically rolled back and the previous stable replica sets",
    "start": "1226960",
    "end": "1233600"
  },
  {
    "text": "scaled back up uh to its full five instances if you look",
    "start": "1233600",
    "end": "1239280"
  },
  {
    "text": "at the analysis run we get some events um the analysis failed and specifically the metric",
    "start": "1239280",
    "end": "1244880"
  },
  {
    "text": "error rate failed uh and if we look at uh you know some of the data behind",
    "start": "1244880",
    "end": "1251280"
  },
  {
    "text": "the scenes we have you know a full 100 error rate of course we want to roll it back",
    "start": "1251280",
    "end": "1258000"
  },
  {
    "text": "so that's the basic demo of how argo rollouts works again",
    "start": "1259679",
    "end": "1266799"
  },
  {
    "text": "this kind of metric analysis automated analysis is is really important to us with the",
    "start": "1266799",
    "end": "1273679"
  },
  {
    "text": "scale and the sheer number of deployments that we're doing in a day um again hundreds if not thousands",
    "start": "1273679",
    "end": "1279919"
  },
  {
    "text": "that's uh not the kind of uh time and attention that we want to force engineers",
    "start": "1279919",
    "end": "1285039"
  },
  {
    "text": "uh to pay um we this is uh you know really allowing us to continue",
    "start": "1285039",
    "end": "1290320"
  },
  {
    "text": "to move fast uh while making changes in a safe manner um so i'm gonna kick it",
    "start": "1290320",
    "end": "1295520"
  },
  {
    "text": "back to al now to talk a little bit more about this scale and how we orchestrate changes to it",
    "start": "1295520",
    "end": "1302559"
  },
  {
    "text": "cool thanks caleb uh that's a pretty compelling demo i hope uh everyone um this shows you exactly how to",
    "start": "1302559",
    "end": "1309360"
  },
  {
    "text": "implement safe continuous delivery using our rollouts and how we do it too in this section i'm",
    "start": "1309360",
    "end": "1316000"
  },
  {
    "text": "going to dive into the additional needs we had with orchestration at scale",
    "start": "1316000",
    "end": "1321840"
  },
  {
    "text": "so there's a few issues with orchestrating at this scale that new relic has how do you mix it how",
    "start": "1322720",
    "end": "1328480"
  },
  {
    "text": "do you safely make changes how do you add capacity and how do you isolate failures",
    "start": "1328480",
    "end": "1333600"
  },
  {
    "text": "a common approach is to scale out deployments to other regions but this doesn't work if your applications are sensitive to",
    "start": "1333600",
    "end": "1339919"
  },
  {
    "text": "latency and you need to be close to where your customers are it might seem straightforward to just keep scaling out your kubernetes",
    "start": "1339919",
    "end": "1345919"
  },
  {
    "text": "clusters by adding more nodes but that's not actually a good practice up to a point um you know our clusters are already",
    "start": "1345919",
    "end": "1352960"
  },
  {
    "text": "thousands of nodes so you know it seems like we need another mechanism",
    "start": "1352960",
    "end": "1358320"
  },
  {
    "text": "we need to create some boundaries to limit failures in our systems",
    "start": "1358320",
    "end": "1363519"
  },
  {
    "text": "this high scalability post highlights the next set of changes we introduce which is a cellular architecture",
    "start": "1364080",
    "end": "1372159"
  },
  {
    "text": "we needed to paralyze and isolate by sharding our data set",
    "start": "1372159",
    "end": "1378158"
  },
  {
    "text": "are the slides moving forward there we go next slide we definitely have a need to",
    "start": "1378240",
    "end": "1385200"
  },
  {
    "start": "1380000",
    "end": "1427000"
  },
  {
    "text": "support incremental capacity which cell architecture does very nicely",
    "start": "1385200",
    "end": "1390559"
  },
  {
    "text": "being able to isolate so one cell does not impact another cell is a huge benefit to our operations this",
    "start": "1390559",
    "end": "1397280"
  },
  {
    "text": "allows us to continuously deploy changes to a small subset of our cells without",
    "start": "1397280",
    "end": "1402320"
  },
  {
    "text": "impacting all cells incorporating a cell architecture into the automated",
    "start": "1402320",
    "end": "1408000"
  },
  {
    "text": "canary analysis deployment that caleb shows means we can have a really high confidence our changes are",
    "start": "1408000",
    "end": "1413679"
  },
  {
    "text": "not causing an issue not only are we doing canary analysis inside of an application deployment",
    "start": "1413679",
    "end": "1419840"
  },
  {
    "text": "it's also now inside of a cell that's isolated from our whole environment",
    "start": "1419840",
    "end": "1426000"
  },
  {
    "start": "1427000",
    "end": "1450000"
  },
  {
    "text": "so the telemetry data platform looks like this inside of a region where we can just keep adding cells as we need more",
    "start": "1428400",
    "end": "1434480"
  },
  {
    "text": "capacity in isolation and we end up with n number of cells this architecture can be applied",
    "start": "1434480",
    "end": "1440559"
  },
  {
    "text": "to any number of applications you just have to look at how you route and charge your",
    "start": "1440559",
    "end": "1446000"
  },
  {
    "text": "data set next slide this is the same data growth",
    "start": "1446000",
    "end": "1452480"
  },
  {
    "start": "1450000",
    "end": "1480000"
  },
  {
    "text": "chart i shared before but now it's faceted by cells the large blue area at the bottom",
    "start": "1452480",
    "end": "1457840"
  },
  {
    "text": "that cell now serves a significantly smaller amount of overall capacity there's also",
    "start": "1457840",
    "end": "1463520"
  },
  {
    "text": "a few interesting visuals in this chart in the top left the purple and grain cells actually taper off and disappear",
    "start": "1463520",
    "end": "1469600"
  },
  {
    "text": "completely in the middle of the chart a whole bunch more cells start appearing this is where we started using argo",
    "start": "1469600",
    "end": "1476159"
  },
  {
    "text": "workflows for our orchestration of cell builds the amount of orchestration at this",
    "start": "1476159",
    "end": "1482320"
  },
  {
    "start": "1480000",
    "end": "1490000"
  },
  {
    "text": "scale requires us to have a flexible orchestration systems that many teams can interact with and that's where arco workflows comes in",
    "start": "1482320",
    "end": "1490158"
  },
  {
    "start": "1490000",
    "end": "1635000"
  },
  {
    "text": "argo workflows is perfect for this in the system in the systems we just talked about moving to cell architecture we have",
    "start": "1490640",
    "end": "1497039"
  },
  {
    "text": "approximately 20 teams involved each team needs to deploy their services",
    "start": "1497039",
    "end": "1502240"
  },
  {
    "text": "and most teams need a combination of steps like creating infrastructure resources like databases and s3 buckets and other",
    "start": "1502240",
    "end": "1508880"
  },
  {
    "text": "things via infrastructure as code pipelines they also then need to deploy their",
    "start": "1508880",
    "end": "1514480"
  },
  {
    "text": "applications to kubernetes that depend on those resources and we want to automate all this and we",
    "start": "1514480",
    "end": "1519679"
  },
  {
    "text": "want it to be safe and to happen continuously for each team",
    "start": "1519679",
    "end": "1526400"
  },
  {
    "text": "creates one or many workflows however they like and the different steps they",
    "start": "1526400",
    "end": "1532559"
  },
  {
    "text": "need to get their service deployed to a target cell and it really boils down to since a step",
    "start": "1532559",
    "end": "1538559"
  },
  {
    "text": "is a container it gives them a really powerful abstraction that's easy to maintain",
    "start": "1538559",
    "end": "1544799"
  },
  {
    "text": "next slide one of the nice features in argo workflows is that the workflow can",
    "start": "1545840",
    "end": "1551520"
  },
  {
    "text": "call another workflow or also a workflow template so here we created a cell build workflow",
    "start": "1551520",
    "end": "1558720"
  },
  {
    "text": "that each team has added all their own workflows to again the",
    "start": "1558720",
    "end": "1563760"
  },
  {
    "text": "team workflows are everything they need to deploy their services to a cell and we really stress to the teams that",
    "start": "1563760",
    "end": "1569600"
  },
  {
    "text": "all the steps are out of potent so we can rerun the workflow safely",
    "start": "1569600",
    "end": "1574799"
  },
  {
    "text": "this parent workflow here is actually a directed acyclic graph or dag sorry for the tiny",
    "start": "1574799",
    "end": "1582159"
  },
  {
    "text": "image but the point of showing you this was so that some serial steps happen at the beginning",
    "start": "1582159",
    "end": "1587760"
  },
  {
    "text": "and then some parallel steps happen later on as the dependencies are resolved in the dag",
    "start": "1587760",
    "end": "1593600"
  },
  {
    "text": "the steps at the beginning are actually an argo workflow template calling terraform and then we start",
    "start": "1593600",
    "end": "1600320"
  },
  {
    "text": "deploying kubernetes resources using argo cdn argo rollouts so i hope i've done a good job",
    "start": "1600320",
    "end": "1606320"
  },
  {
    "text": "explaining our orchestration and scale and how argo workflows helps us we what i haven't explained is how to",
    "start": "1606320",
    "end": "1613200"
  },
  {
    "text": "safely run auto applies of terraform which daniel is going to talk us through",
    "start": "1613200",
    "end": "1618640"
  },
  {
    "text": "and how that works and show us a cool demo too take it away daniel",
    "start": "1618640",
    "end": "1627840"
  },
  {
    "text": "stop sharing because i'm not able to take this thing thank you",
    "start": "1632960",
    "end": "1641840"
  },
  {
    "start": "1635000",
    "end": "1688000"
  },
  {
    "text": "i'm going to talk about how we have uh implemented our telephone pipeline using our workflows when we start with our",
    "start": "1646159",
    "end": "1654480"
  },
  {
    "text": "product of concept to integrate our existing telephone code into our goal we had some requirements to",
    "start": "1654480",
    "end": "1659919"
  },
  {
    "text": "accomplish we had to use turbo workflows to run terraform every step had to be hidden potent that",
    "start": "1659919",
    "end": "1666320"
  },
  {
    "text": "way can be run multiple times if needed without affecting the current infrastructure",
    "start": "1666320",
    "end": "1671679"
  },
  {
    "text": "the solution has to be generic for all teams that way it's easy to lock for them and everything",
    "start": "1671679",
    "end": "1677840"
  },
  {
    "text": "avoids reinventing the wheel over and over and we have to make sure that terraform can run without human",
    "start": "1677840",
    "end": "1684240"
  },
  {
    "text": "interaction and trust in what is going to be applied",
    "start": "1684240",
    "end": "1689520"
  },
  {
    "start": "1688000",
    "end": "1706000"
  },
  {
    "text": "uh our workflows help us because an arrow overflow is able to trigger another workflow",
    "start": "1689520",
    "end": "1695840"
  },
  {
    "text": "we can use artifacts between steps to pass data for example and all workflows can be launched with",
    "start": "1695840",
    "end": "1702399"
  },
  {
    "text": "different inputs such as surname in our place",
    "start": "1702399",
    "end": "1707440"
  },
  {
    "start": "1706000",
    "end": "1727000"
  },
  {
    "text": "then our workflows run shadow images under the hood we have to create a new uh image for us",
    "start": "1708000",
    "end": "1714320"
  },
  {
    "text": "to fit our needs uh using terraform tfm opa and comp effects also the documents",
    "start": "1714320",
    "end": "1721600"
  },
  {
    "text": "use different inputs and it doesn't require more interaction and terraform",
    "start": "1721600",
    "end": "1729120"
  },
  {
    "start": "1727000",
    "end": "1766000"
  },
  {
    "text": "we had already some existing telephone codes where we were previously creating our infrastructure with another",
    "start": "1729120",
    "end": "1734799"
  },
  {
    "text": "angular pipeline but we had to do a few changes to make it even better",
    "start": "1734799",
    "end": "1740320"
  },
  {
    "text": "we have to we have to switch to their homework spaces so we don't have to duplicate the code for",
    "start": "1740320",
    "end": "1745360"
  },
  {
    "text": "every cell when the code is always the same and it only changes different variables and",
    "start": "1745360",
    "end": "1751279"
  },
  {
    "text": "if we need to overwrite some values for a specific for a specific cell we can specify them",
    "start": "1751279",
    "end": "1756320"
  },
  {
    "text": "on a df bar file uh the directional workspaces gets related automatically if it doesn't",
    "start": "1756320",
    "end": "1762720"
  },
  {
    "text": "exist as it can happen for new cells",
    "start": "1762720",
    "end": "1767840"
  },
  {
    "start": "1766000",
    "end": "1796000"
  },
  {
    "text": "the open policy agent covers the need in making sure that the traffic code that we're applying",
    "start": "1768159",
    "end": "1775039"
  },
  {
    "text": "won't do any underserved changes such as deleting a kubernetes cluster for example",
    "start": "1775039",
    "end": "1780880"
  },
  {
    "text": "it uses a real query language where things can specify there are acceptance",
    "start": "1780880",
    "end": "1785919"
  },
  {
    "text": "policies and if theratron plan doesn't pass the open the opi policies",
    "start": "1785919",
    "end": "1791520"
  },
  {
    "text": "the processes cancel and it access without error i'm going to show i'm going to quick",
    "start": "1791520",
    "end": "1798799"
  },
  {
    "start": "1796000",
    "end": "1828000"
  },
  {
    "text": "demo so this is a workflows interface",
    "start": "1798799",
    "end": "1805519"
  },
  {
    "text": "and here i have some terraform code what i'm gonna try to show is like uh we",
    "start": "1805840",
    "end": "1813200"
  },
  {
    "text": "are gonna create or like we are simulate like we are creating a cover in this cluster",
    "start": "1813200",
    "end": "1818240"
  },
  {
    "text": "then we are deploying uh some apps into that cluster and in that only we are creating an s3",
    "start": "1818240",
    "end": "1825120"
  },
  {
    "text": "bucket if we go to the ntf i'm just using another source because i'm going to spend time",
    "start": "1825120",
    "end": "1831600"
  },
  {
    "start": "1828000",
    "end": "1839000"
  },
  {
    "text": "creating a new cluster right now but the interesting part here is uh this",
    "start": "1831600",
    "end": "1836880"
  },
  {
    "text": "transform rail file which is the one that allows us uh",
    "start": "1836880",
    "end": "1842880"
  },
  {
    "text": "that allow us to make sure that we are applying things in a safe way for example uh we have",
    "start": "1842880",
    "end": "1849600"
  },
  {
    "text": "this new resource where we are setting different ways uh if the plan is gonna delete another",
    "start": "1849600",
    "end": "1856399"
  },
  {
    "text": "resource it says that it's gonna have a hundred points if it creates a new one it's gonna have ten",
    "start": "1856399",
    "end": "1862720"
  },
  {
    "text": "points and if modify one is gonna add one point we see that our",
    "start": "1862720",
    "end": "1868320"
  },
  {
    "text": "plus radius is 30 so if uh the overall calculation of",
    "start": "1868320",
    "end": "1873600"
  },
  {
    "text": "all the resources are over 50 is gonna be cancelled automatically the plan",
    "start": "1873600",
    "end": "1881120"
  },
  {
    "text": "and the arrow google flow that we're using is the virtual template where",
    "start": "1882159",
    "end": "1890640"
  },
  {
    "start": "1886000",
    "end": "1974000"
  },
  {
    "text": "basically we launched the terraform container uh we are cloning the repository",
    "start": "1890640",
    "end": "1898320"
  },
  {
    "text": "to to get to all the all the data all the files and then we are specifying the the",
    "start": "1898320",
    "end": "1905840"
  },
  {
    "text": "docker image here we have some secrets that are",
    "start": "1905840",
    "end": "1911519"
  },
  {
    "text": "already on the kubernetes cluster that allow us to clone the the",
    "start": "1911519",
    "end": "1916720"
  },
  {
    "text": "repository and then here is where we launched the docker image and we are",
    "start": "1916720",
    "end": "1922320"
  },
  {
    "text": "passing uh the values to the different environment variables that we need for",
    "start": "1922320",
    "end": "1927840"
  },
  {
    "text": "example we need to pass that data from directory where the code is the telephone version",
    "start": "1927840",
    "end": "1933600"
  },
  {
    "text": "if we want to force one otherwise it will detect our terraformation written in the code and",
    "start": "1933600",
    "end": "1939679"
  },
  {
    "text": "we'll download it automatically if it isn't already present on the local container",
    "start": "1939679",
    "end": "1944960"
  },
  {
    "text": "then we specify the workspace which basically is the name of the cell in our case and where the opa file is",
    "start": "1944960",
    "end": "1953120"
  },
  {
    "text": "also we can use concepts as well and then the action that we're going to",
    "start": "1953120",
    "end": "1959840"
  },
  {
    "text": "apply that can be planned applied slowly then we have our uh aw access keys",
    "start": "1959840",
    "end": "1967440"
  },
  {
    "text": "that again are stored on the cluster that allow us to communicate with",
    "start": "1967440",
    "end": "1973840"
  },
  {
    "start": "1974000",
    "end": "2059000"
  },
  {
    "text": "anyways then uh this workflow is uh um in here i'm simulating",
    "start": "1974840",
    "end": "1983600"
  },
  {
    "text": "the one that i'll show previously the the huge one so basically it's a dac and i use the",
    "start": "1983600",
    "end": "1990640"
  },
  {
    "text": "stacks so i have three tasks here one task is a uh that creates the coordinates",
    "start": "1990640",
    "end": "1999039"
  },
  {
    "text": "cluster and it uh refers to the workflow template",
    "start": "1999039",
    "end": "2004320"
  },
  {
    "text": "that i showed previously we are going to pass only different values which is the",
    "start": "2004320",
    "end": "2009600"
  },
  {
    "text": "workspace in our case the cell name the psd that we want to apply in our case is that directory",
    "start": "2009600",
    "end": "2017600"
  },
  {
    "text": "where our opf file is and then the action that is applied then the second step is our deploy apps",
    "start": "2017600",
    "end": "2025039"
  },
  {
    "text": "in that step we can see that castle dependency so that set will be launched",
    "start": "2025039",
    "end": "2032000"
  },
  {
    "text": "after the previous one is finished and the only that it changed is a psd",
    "start": "2032000",
    "end": "2038880"
  },
  {
    "text": "and here we're using a contest conference instead of opa and",
    "start": "2038880",
    "end": "2045360"
  },
  {
    "text": "then for that create s3 we don't have any dependency which means that uh at the beginning",
    "start": "2045360",
    "end": "2051200"
  },
  {
    "text": "both and the kubernetes cluster and creator 3 are going to be run on parallel so",
    "start": "2051200",
    "end": "2059839"
  },
  {
    "start": "2059000",
    "end": "2155000"
  },
  {
    "text": "go here first of all i'm gonna",
    "start": "2059839",
    "end": "2067679"
  },
  {
    "text": "show that we don't have any template so the what we need to do first is upload the",
    "start": "2068320",
    "end": "2074240"
  },
  {
    "text": "template into our cluster",
    "start": "2074240",
    "end": "2077839"
  },
  {
    "text": "so i'm going to run a template create and i'm going to specify where the",
    "start": "2083119",
    "end": "2088240"
  },
  {
    "text": "template is so again now if i leave certain place",
    "start": "2088240",
    "end": "2095118"
  },
  {
    "text": "i can see that i have one if i go for from the interface and to work for templates we can see it also here",
    "start": "2095119",
    "end": "2104240"
  },
  {
    "text": "then let's create a new cell",
    "start": "2104800",
    "end": "2116560"
  },
  {
    "text": "so i'm gonna submit um the the workflow in the workflow channel",
    "start": "2116560",
    "end": "2122079"
  },
  {
    "text": "in that case it's just a workflow not a workflow template and i'm gonna pass a parameter which is that's the name",
    "start": "2122079",
    "end": "2131839"
  },
  {
    "text": "i can check the locks from the console",
    "start": "2137119",
    "end": "2142480"
  },
  {
    "text": "we can see uh different colors uh in our case means that every color is a",
    "start": "2142960",
    "end": "2149200"
  },
  {
    "text": "different set or a different container or we can go on the",
    "start": "2149200",
    "end": "2155920"
  },
  {
    "text": "web ui which it's analyzer we can see how it created the kubernetes",
    "start": "2155920",
    "end": "2162400"
  },
  {
    "text": "cluster",
    "start": "2162400",
    "end": "2164799"
  },
  {
    "text": "so it's detected that we are uh using director from 1279",
    "start": "2169359",
    "end": "2175680"
  },
  {
    "text": "then the workspace webinar demo doesn't exist so it creates uh automatically the",
    "start": "2176320",
    "end": "2183200"
  },
  {
    "text": "workspace it says that it's going to create a new resource",
    "start": "2183200",
    "end": "2188560"
  },
  {
    "text": "and as the opa is only 10 because it's creating any one it passed the phx multiplies",
    "start": "2188560",
    "end": "2194960"
  },
  {
    "text": "safely the code then it deploys the apps and the same for the",
    "start": "2194960",
    "end": "2200640"
  },
  {
    "text": "create s3 bucket so now let's go to the code",
    "start": "2200640",
    "end": "2207760"
  },
  {
    "text": "and imagine that i say oh i'm going to change the restore name and",
    "start": "2208320",
    "end": "2213680"
  },
  {
    "text": "i'm gonna add you if you are familiar with uh perform",
    "start": "2213680",
    "end": "2218880"
  },
  {
    "text": "you know that this operation basically what it's gonna do is gonna destroy the previous cluster and it's gonna create a",
    "start": "2218880",
    "end": "2224160"
  },
  {
    "text": "new one so uh change name",
    "start": "2224160",
    "end": "2229838"
  },
  {
    "text": "commit the changes",
    "start": "2230320",
    "end": "2233200"
  },
  {
    "text": "i'm gonna trigger again the same step or the same workflow",
    "start": "2239440",
    "end": "2246078"
  },
  {
    "text": "we see another workflow",
    "start": "2246560",
    "end": "2249760"
  },
  {
    "text": "and if i open the government of this cluster",
    "start": "2252640",
    "end": "2258480"
  },
  {
    "text": "now it detected already the network",
    "start": "2265200",
    "end": "2270400"
  },
  {
    "text": "space because it has been created before and it says that this tries to it's going to destroy",
    "start": "2270400",
    "end": "2277359"
  },
  {
    "text": "a cluster and it's going to create the new one that we have set so it's 110",
    "start": "2277359",
    "end": "2284400"
  },
  {
    "text": "that the total score because it's 100 for deleting a new result for deleting resources and 10 for adding",
    "start": "2284400",
    "end": "2290160"
  },
  {
    "text": "one and then it says that it failed the opi checks and it cancel the operation",
    "start": "2290160",
    "end": "2298160"
  },
  {
    "text": "and as it cancels the operation we can see that the deploy apps uh set didn't run",
    "start": "2298160",
    "end": "2306320"
  },
  {
    "text": "and that's basically how we are using uh our workflows with ultraphone",
    "start": "2306560",
    "end": "2313839"
  },
  {
    "text": "cool daniel that's a pretty sweet demo i definitely showcases how we use terraform and opa with an argo workflow",
    "start": "2314480",
    "end": "2320800"
  },
  {
    "text": "to safely roll out our infrastructure changes this fits nicely with what caleb showed",
    "start": "2320800",
    "end": "2326880"
  },
  {
    "text": "combined argo cd and argo rollouts so we can build new cells in a safe and automated fashion without",
    "start": "2326880",
    "end": "2332480"
  },
  {
    "text": "any degradation of our service at scale now we're going to leave the rest of the time for questions",
    "start": "2332480",
    "end": "2339200"
  },
  {
    "text": "and no a hot dog is not a sandwich so",
    "start": "2339200",
    "end": "2354079"
  },
  {
    "text": "let's see i'll try to go in order here i think um [Music]",
    "start": "2354079",
    "end": "2361619"
  },
  {
    "text": "we had a question about crds i think it was uh related to machine machine templates",
    "start": "2361680",
    "end": "2369920"
  },
  {
    "text": "for kids and how you manage the comp complexity of that simultaneously um we do that with our go workflows",
    "start": "2369920",
    "end": "2377520"
  },
  {
    "text": "essentially we'll have a oh you know a step in a workflow that uses uh argo cd",
    "start": "2377520",
    "end": "2385680"
  },
  {
    "text": "and argo rollouts to push out you know crds and then we can run any validation that",
    "start": "2385680",
    "end": "2392240"
  },
  {
    "text": "we want and then you can have another step that you know in the workflow that does",
    "start": "2392240",
    "end": "2397839"
  },
  {
    "text": "whatever you need to do with machine templates um as and you know those are treated as code",
    "start": "2397839",
    "end": "2404000"
  },
  {
    "text": "as well the next question um",
    "start": "2404000",
    "end": "2410079"
  },
  {
    "text": "how would a list of applications and application details uh ui look with 200 microservices",
    "start": "2410079",
    "end": "2416880"
  },
  {
    "text": "is it a drill down ui or is everything going to be on the same page caleb you want to take this yeah i can",
    "start": "2416880",
    "end": "2423200"
  },
  {
    "text": "take that um since we deal with having you know 3000 applications in one argo cd um so any individual application looks",
    "start": "2423200",
    "end": "2430960"
  },
  {
    "text": "like what you saw in in my demo where it's scoped to just the resources that that application",
    "start": "2430960",
    "end": "2436960"
  },
  {
    "text": "controls the list of applications is is one big list but it is filterable",
    "start": "2436960",
    "end": "2445359"
  },
  {
    "text": "so um you can group them together by by project which is uh at least in our",
    "start": "2445359",
    "end": "2452160"
  },
  {
    "text": "case we typically tie that to like a namespace or a team um and then you can also filter it by like which cluster you're targeting",
    "start": "2452160",
    "end": "2458720"
  },
  {
    "text": "um you can put arbitrary labels on those applications and filter by that um kind of a robust filtering system",
    "start": "2458720",
    "end": "2465599"
  },
  {
    "text": "there so it's not exactly drilled down but it's like a filterable list i hope that answered their question",
    "start": "2465599",
    "end": "2473520"
  },
  {
    "start": "2469000",
    "end": "2529000"
  },
  {
    "text": "i think the next question is from muhammad a good habit with cicd is performing a dast",
    "start": "2476720",
    "end": "2483599"
  },
  {
    "text": "which i think is the dynamic security testing how can we perform these tests to canary",
    "start": "2483599",
    "end": "2490079"
  },
  {
    "text": "release i can take that too because um",
    "start": "2490079",
    "end": "2495440"
  },
  {
    "text": "i think it probably depends on your your das tool but um i can imagine uh",
    "start": "2495440",
    "end": "2502160"
  },
  {
    "text": "using either a job metric provider in a canary release or a webmetric provider",
    "start": "2502160",
    "end": "2509280"
  },
  {
    "text": "and either running a kubernetes job that goes and asks your das tool to go do a thing and then uh inspect the",
    "start": "2509280",
    "end": "2515839"
  },
  {
    "text": "results so you know run that scan look at the results see if there",
    "start": "2515839",
    "end": "2521119"
  },
  {
    "text": "there's bad stuff there and if there is uh fail that canary",
    "start": "2521119",
    "end": "2526559"
  },
  {
    "text": "cool um are all the examples from the demos",
    "start": "2530240",
    "end": "2536560"
  },
  {
    "text": "and any public repo unfortunately not um but i think we",
    "start": "2536560",
    "end": "2543359"
  },
  {
    "text": "we we will probably create a public blog post on new relic and be able to share um",
    "start": "2543359",
    "end": "2550560"
  },
  {
    "text": "share a lot of the content",
    "start": "2550560",
    "end": "2553680"
  },
  {
    "text": "i think the next one is related to an answer that i gave asynchronously yep i see that cool let's see",
    "start": "2560560",
    "end": "2569119"
  },
  {
    "text": "ah okay how do you manage destroying resources if the workflow is cancelled",
    "start": "2570000",
    "end": "2575680"
  },
  {
    "text": "uh it kind of depends what the step in the workflow's doing um",
    "start": "2575680",
    "end": "2582640"
  },
  {
    "text": "if you're using rollouts then you're in good shape because it automatically rolls you back",
    "start": "2582640",
    "end": "2589359"
  },
  {
    "text": "for the terraform stuff we showed it essentially will",
    "start": "2590079",
    "end": "2596800"
  },
  {
    "text": "if it passes the opa checks and then it fails for some reason",
    "start": "2596800",
    "end": "2602000"
  },
  {
    "text": "then you know you're going to get alerted and have to dive in to see what's wrong",
    "start": "2602000",
    "end": "2607440"
  },
  {
    "text": "if it's another step that's running a container that an engineering team has created it just depends on what that is",
    "start": "2607440",
    "end": "2614720"
  },
  {
    "text": "you know it doesn't have that rollback functionality unless you built it into the step itself hope that answered your",
    "start": "2614720",
    "end": "2621280"
  },
  {
    "text": "question",
    "start": "2621280",
    "end": "2623599"
  },
  {
    "start": "2624000",
    "end": "2679000"
  },
  {
    "text": "are we running an argo for each case cluster or yeah or or do we have one that manages",
    "start": "2630560",
    "end": "2636079"
  },
  {
    "text": "all of them so um i the short answer is we have one that",
    "start": "2636079",
    "end": "2641520"
  },
  {
    "text": "manages all of them um the real answer is we have two that each manage all of them but we definitely take the",
    "start": "2641520",
    "end": "2649920"
  },
  {
    "text": "um like singular approach the only one of those components that is deployed to every cluster is the argo rollouts",
    "start": "2649920",
    "end": "2656800"
  },
  {
    "text": "component because that is a controller that needs to run on every cluster everything else is centrally managed in one",
    "start": "2656800",
    "end": "2664240"
  },
  {
    "text": "yeah and that's where you know you get to a certain number of clusters and apps and you really need the 1 8 release that",
    "start": "2664240",
    "end": "2672319"
  },
  {
    "text": "was just released last week",
    "start": "2672319",
    "end": "2677839"
  },
  {
    "start": "2679000",
    "end": "2729000"
  },
  {
    "text": "so does argo provide notification hooks for successful deployments it does",
    "start": "2687440",
    "end": "2694319"
  },
  {
    "text": "actually and one of the components in argo we didn't cover was argo events",
    "start": "2694319",
    "end": "2700079"
  },
  {
    "text": "which has its own huge powerful ecosystem for really creating",
    "start": "2700079",
    "end": "2705839"
  },
  {
    "text": "event-based pipelines to to react to anything going on",
    "start": "2705839",
    "end": "2711200"
  },
  {
    "text": "from many different sources not just argo itself but you could watch kafka",
    "start": "2711200",
    "end": "2717040"
  },
  {
    "text": "topics and pub sub you know and environments and",
    "start": "2717040",
    "end": "2722560"
  },
  {
    "text": "things like that",
    "start": "2722560",
    "end": "2733839"
  },
  {
    "start": "2729000",
    "end": "2787000"
  },
  {
    "text": "which one are we tackling next i think the one from alexi probably um how do we create",
    "start": "2750000",
    "end": "2756800"
  },
  {
    "text": "another environment for the application as new instances of",
    "start": "2756800",
    "end": "2762079"
  },
  {
    "text": "the application that consists of hundreds of services and components and additional dependencies for example it might require to create a",
    "start": "2762079",
    "end": "2769599"
  },
  {
    "text": "pv resource and may you know rely on centralized instances",
    "start": "2769599",
    "end": "2775040"
  },
  {
    "text": "of like rabbit and q can you copy application to create new instances i.e copy dev01 test04 staging etc",
    "start": "2775040",
    "end": "2783119"
  },
  {
    "text": "or create one from scratch every time",
    "start": "2783119",
    "end": "2789040"
  },
  {
    "start": "2787000",
    "end": "2829000"
  },
  {
    "text": "i have opinions yeah go for it sure um like this is why we do get ops",
    "start": "2789040",
    "end": "2796000"
  },
  {
    "text": "um where creating a new version so especially i think with the stuff",
    "start": "2796000",
    "end": "2801760"
  },
  {
    "text": "that we're deploying a lot of these are helm charts um and uh argo cd handles",
    "start": "2801760",
    "end": "2807599"
  },
  {
    "text": "uh like helm and customize and other um renders uh very well um so you wouldn't",
    "start": "2807599",
    "end": "2814560"
  },
  {
    "text": "necessarily be creating one from scratch but you would be creating a new application with the exact same helm chart but with different parameters",
    "start": "2814560",
    "end": "2820960"
  },
  {
    "text": "for your different environments and that's how you deploy a new one",
    "start": "2820960",
    "end": "2830079"
  },
  {
    "start": "2829000",
    "end": "2884000"
  },
  {
    "text": "yep cool uh here's one for daniel uh where are you holding terraform state",
    "start": "2830079",
    "end": "2836160"
  },
  {
    "text": "for your workflows um well we are storing it on on",
    "start": "2836160",
    "end": "2844400"
  },
  {
    "text": "s3 but for the demo i was using minio on local so yeah i'm going to spend a",
    "start": "2844400",
    "end": "2850800"
  },
  {
    "text": "lot of time like quitting the s3 yeah so each each workflow that a team owns",
    "start": "2850800",
    "end": "2858880"
  },
  {
    "text": "uh has their own state backend and an s3 bucket i think that's using dynamo for locking",
    "start": "2858880",
    "end": "2865920"
  },
  {
    "text": "as well but it's anywhere terraform really can",
    "start": "2865920",
    "end": "2871760"
  },
  {
    "text": "store it but we definitely like making sure our state is pushed up somewhere so multiple",
    "start": "2871760",
    "end": "2878000"
  },
  {
    "text": "people can interact with it",
    "start": "2878000",
    "end": "2881119"
  },
  {
    "start": "2884000",
    "end": "2934000"
  },
  {
    "text": "safely",
    "start": "2884839",
    "end": "2887839"
  },
  {
    "text": "so this one's interesting are there any features to debug build container inside like circle ci has",
    "start": "2891520",
    "end": "2901839"
  },
  {
    "text": "that one i'm not sure of i think you'll be able to look at the logs but if you need to",
    "start": "2904640",
    "end": "2912319"
  },
  {
    "text": "you're gonna try to like init into you know or execute into the container",
    "start": "2912319",
    "end": "2917599"
  },
  {
    "text": "uh you might have to introduce your own like pause mechanism there or something",
    "start": "2917599",
    "end": "2924480"
  },
  {
    "text": "so you can you know look at the what's going on",
    "start": "2924480",
    "end": "2930558"
  },
  {
    "text": "so this is a good question does it compare versions of kubernetes resources against what argo created manual edits",
    "start": "2941440",
    "end": "2948720"
  },
  {
    "text": "of things like emvs resource limits requests etc so yeah it has a sync",
    "start": "2948720",
    "end": "2957200"
  },
  {
    "text": "component to it so like if you edit the state of a resource that is managed by argo like fargo cd",
    "start": "2957200",
    "end": "2964800"
  },
  {
    "text": "or argo rollouts if you edit that manually with cube ctl um it'll essentially be out of sync",
    "start": "2964800",
    "end": "2972480"
  },
  {
    "text": "with the the git repo that's coming from and this is where like get ops comes in",
    "start": "2972480",
    "end": "2977680"
  },
  {
    "text": "where if that happens the next sync will essentially blow away",
    "start": "2977680",
    "end": "2983920"
  },
  {
    "text": "those changes i can actually show this real quick um because i'm out of sync right now",
    "start": "2983920",
    "end": "2990160"
  },
  {
    "start": "2984000",
    "end": "3054000"
  },
  {
    "text": "um in in that application that i have demoed let me let me do this so um",
    "start": "2990160",
    "end": "2999838"
  },
  {
    "text": "so like you know i made some manual edits to that rollout through this ui",
    "start": "3000720",
    "end": "3006319"
  },
  {
    "text": "and it now tells me that i'm out of sync with what's in git and and you can get this diff",
    "start": "3006319",
    "end": "3013760"
  },
  {
    "text": "um here let me show the compact version you can get a diff about like what has changed here versus",
    "start": "3013760",
    "end": "3020240"
  },
  {
    "text": "what is in the get repo backing this application um and somebody had asked about",
    "start": "3020240",
    "end": "3026640"
  },
  {
    "text": "notifications earlier like um we we specifically use the argo cd notifications",
    "start": "3026640",
    "end": "3032880"
  },
  {
    "text": "um project that's in the argo like labs org um and um that will send out",
    "start": "3032880",
    "end": "3040800"
  },
  {
    "text": "notifications when like into slack when a application goes",
    "start": "3040800",
    "end": "3046160"
  },
  {
    "text": "out of sync for any reason which is really handy",
    "start": "3046160",
    "end": "3055838"
  },
  {
    "start": "3054000",
    "end": "3079000"
  },
  {
    "text": "let's see we've got a couple more questions libby how much time do we have still",
    "start": "3062400",
    "end": "3070800"
  },
  {
    "text": "we have about seven minutes okay you are good to go",
    "start": "3071040",
    "end": "3083839"
  },
  {
    "start": "3079000",
    "end": "3139000"
  },
  {
    "text": "yeah that one says uh in your github workflow how to how do you manage",
    "start": "3084720",
    "end": "3090400"
  },
  {
    "text": "credentials like required by argo to access gift repositories are they",
    "start": "3090400",
    "end": "3096480"
  },
  {
    "text": "stored in plain text this basics fall in their repository itself so um",
    "start": "3096480",
    "end": "3103359"
  },
  {
    "text": "we're using uh secrets uh coordinated secrets to store all kind of credentials",
    "start": "3103359",
    "end": "3110400"
  },
  {
    "text": "and then with uh vargo cd or google flow it's really easy to to get them",
    "start": "3110400",
    "end": "3116480"
  },
  {
    "text": "it's just yeah it's like uh when you define a bot that you want to use a secret i",
    "start": "3116480",
    "end": "3122720"
  },
  {
    "text": "think it's exactly the same definition",
    "start": "3122720",
    "end": "3126880"
  },
  {
    "text": "like yeah yeah you say like the value from secret key reference and then that's it",
    "start": "3127920",
    "end": "3139839"
  },
  {
    "start": "3139000",
    "end": "3184000"
  },
  {
    "text": "does argo have ldap and 80 integration yeah this was on one of my slides uh it actually has",
    "start": "3148319",
    "end": "3155520"
  },
  {
    "text": "that sso integration and you know very granular our back controls",
    "start": "3155520",
    "end": "3163359"
  },
  {
    "text": "that you know we'll let you have multi-tenancy and things like that",
    "start": "3163359",
    "end": "3168800"
  },
  {
    "text": "and you could even deploy you know different argo instances to the same kubernetes cluster if you",
    "start": "3168800",
    "end": "3174480"
  },
  {
    "text": "really needed to um in their own name spaces and have some granular control of",
    "start": "3174480",
    "end": "3180079"
  },
  {
    "text": "what teams can access and stuff so like that",
    "start": "3180079",
    "end": "3183920"
  },
  {
    "start": "3184000",
    "end": "3294000"
  },
  {
    "text": "i have one for you caleb what other tools did you test before settling on argo",
    "start": "3190240",
    "end": "3195838"
  },
  {
    "text": "that's funny and i was laughing because i spearheaded a effort to test a whole bunch of tools on",
    "start": "3196720",
    "end": "3203119"
  },
  {
    "text": "the way to coming to argo um",
    "start": "3203119",
    "end": "3208720"
  },
  {
    "text": "uh we looked at some commercial providers um we previously had uh and so we looked at",
    "start": "3208720",
    "end": "3214800"
  },
  {
    "text": "harness we looked at um we looked at tecton uh we looked at a number of other",
    "start": "3214800",
    "end": "3223200"
  },
  {
    "text": "like pipelining tools specifically in the argo workflows space so like go cd and",
    "start": "3223200",
    "end": "3230480"
  },
  {
    "text": "that list is a little long we previously had experience with spinnaker so we had",
    "start": "3230480",
    "end": "3237359"
  },
  {
    "text": "done an evaluation of that",
    "start": "3237359",
    "end": "3240799"
  },
  {
    "text": "it all kind of boiled down to this collection of tools each solving",
    "start": "3244400",
    "end": "3250800"
  },
  {
    "text": "specific needs that we had very well in their own like pinpointed way like so",
    "start": "3250800",
    "end": "3256240"
  },
  {
    "text": "argo cd um you know did the get ops and the syncing and didn't try to do anything",
    "start": "3256240",
    "end": "3261520"
  },
  {
    "text": "else didn't try to be like an all-in-one tool but our go workflows did the pipelining and it did that really well",
    "start": "3261520",
    "end": "3267359"
  },
  {
    "text": "but it didn't you know try to be everything and we found that flexibility to meet all of our",
    "start": "3267359",
    "end": "3273599"
  },
  {
    "text": "needs um and together you know like putting these three things together",
    "start": "3273599",
    "end": "3279680"
  },
  {
    "text": "um drew a really nice overall picture",
    "start": "3279680",
    "end": "3293838"
  },
  {
    "text": "all right we have about three minutes you want to go tackle another one yeah let's do it i was just reading",
    "start": "3301040",
    "end": "3306960"
  },
  {
    "text": "through through so i'm trying to figure out which one i can answer next and which ones i've already answered",
    "start": "3306960",
    "end": "3313680"
  },
  {
    "text": "see i can answer one of these so how do you set up and configure aggro",
    "start": "3314240",
    "end": "3319839"
  },
  {
    "text": "cd do you use cluster bootstrapping features app of apps um",
    "start": "3319839",
    "end": "3325599"
  },
  {
    "text": "so yeah the the team that manages the argo installation for all of this stuff",
    "start": "3325599",
    "end": "3330799"
  },
  {
    "text": "it's all managed through a git repo that is synced through argo cd so there's",
    "start": "3330799",
    "end": "3336160"
  },
  {
    "text": "one bootstrapping step to get argo cd like up and running the first time and then it's just a an automatic sync of all of",
    "start": "3336160",
    "end": "3344000"
  },
  {
    "text": "the argo components after that specifically using the app of apps method",
    "start": "3344000",
    "end": "3363838"
  },
  {
    "start": "3374000",
    "end": "3511000"
  },
  {
    "text": "so here's a question for do you do you think argo could be utilized for",
    "start": "3381119",
    "end": "3386160"
  },
  {
    "text": "setting up base apps of the kubernetes clusters like a paths layer of the application that we use in",
    "start": "3386160",
    "end": "3392000"
  },
  {
    "text": "our infrastructure logging file b plus log slash ingress controllers",
    "start": "3392000",
    "end": "3398480"
  },
  {
    "text": "metal lb for bellmatter clusters storage class definitions for cloud providers etc or do you think argo is a good primary",
    "start": "3398480",
    "end": "3406079"
  },
  {
    "text": "primarily for application state management i think it's both really",
    "start": "3406079",
    "end": "3412559"
  },
  {
    "text": "um you know this is where the get ops workflow really comes in so like",
    "start": "3412559",
    "end": "3419599"
  },
  {
    "text": "the source of truth is really in get for all this and argo is just the intermediary of you know applying those changes and",
    "start": "3419599",
    "end": "3427119"
  },
  {
    "text": "that really lets us have confidence of you know what the changes were who made the changes somebody reviewed",
    "start": "3427119",
    "end": "3434400"
  },
  {
    "text": "the changes we you know you can have different environments for testing those out and then you know argo is you know the",
    "start": "3434400",
    "end": "3441119"
  },
  {
    "text": "delivery mechanism but it's also doing stuff like caleb showed with rollouts which is giving us the metric",
    "start": "3441119",
    "end": "3449760"
  },
  {
    "text": "based analysis for canaries and other things and then with workflows orchestrating it",
    "start": "3449760",
    "end": "3455200"
  },
  {
    "text": "all together so we can kind of do anything we want with it in some regard i think one of the important",
    "start": "3455200",
    "end": "3460799"
  },
  {
    "text": "things is like we really push that all the things we're",
    "start": "3460799",
    "end": "3466000"
  },
  {
    "text": "we're deploying are idepotent so that way we could rerun the steps over and over again if",
    "start": "3466000",
    "end": "3471920"
  },
  {
    "text": "we need to right like it's safe to just say hey they run and they will not make any changes",
    "start": "3471920",
    "end": "3478000"
  },
  {
    "text": "if they don't need to",
    "start": "3478000",
    "end": "3480799"
  },
  {
    "text": "all right i think that's all we have time for uh thanks everyone for joining us i'll",
    "start": "3484640",
    "end": "3491359"
  },
  {
    "text": "remind you that the slides and recording will be up later today on the cncf website and um",
    "start": "3491359",
    "end": "3499359"
  },
  {
    "text": "thanks again for joining us thank you all for your presentation and all your q a and we will see you at",
    "start": "3499359",
    "end": "3506240"
  },
  {
    "text": "a cncf webinar very soon",
    "start": "3506240",
    "end": "3513200"
  }
]