[
  {
    "text": "today i'm going to talk about dual stack kubernetes with the direct server written",
    "start": "1120",
    "end": "6879"
  },
  {
    "text": "and this is a lit this is a little bit background about me i'm kanan",
    "start": "6879",
    "end": "12799"
  },
  {
    "text": "i'm i'm just working as a senior technical lead at a tata communications limiter i have almost 13 plus years of",
    "start": "12799",
    "end": "19279"
  },
  {
    "text": "experience in tech industry and yeah just i have provided my twitter plus linkedin",
    "start": "19279",
    "end": "26880"
  },
  {
    "text": "link yeah so yeah let us let us talk about uh the",
    "start": "26880",
    "end": "32880"
  },
  {
    "text": "actual speak the agenda is like what is dsr",
    "start": "32880",
    "end": "39120"
  },
  {
    "text": "and how dsr data routing will happen and what is the business use case for",
    "start": "39120",
    "end": "45680"
  },
  {
    "text": "dsr and how uh dual stack kubernetes with the dsr setup",
    "start": "45680",
    "end": "53680"
  },
  {
    "text": "looks like and uh and then i'll show the demo",
    "start": "53680",
    "end": "58879"
  },
  {
    "text": "then uh yeah then the questionnaire",
    "start": "58879",
    "end": "62960"
  },
  {
    "text": "basically what is dsr dsr is nothing but direct server return",
    "start": "64799",
    "end": "70799"
  },
  {
    "text": "so which means whenever you are requesting any data to the server",
    "start": "70799",
    "end": "76799"
  },
  {
    "text": "i mean um from a client i mean from our mobile application or anything",
    "start": "76799",
    "end": "82880"
  },
  {
    "text": "is our client right so then when we whenever we are trying to reach out to",
    "start": "82880",
    "end": "88000"
  },
  {
    "text": "the server first it will it will just reach out to the",
    "start": "88000",
    "end": "93040"
  },
  {
    "text": "uh first it will reach out to the load balancer for that particular",
    "start": "93040",
    "end": "98840"
  },
  {
    "text": "server then it will then it will reach to the server the target server where we need",
    "start": "98840",
    "end": "105200"
  },
  {
    "text": "to fetch the data uh for the security purpose",
    "start": "105200",
    "end": "110320"
  },
  {
    "text": "i mean basically what what they did is like uh by default they are just applying the",
    "start": "110320",
    "end": "116640"
  },
  {
    "text": "source nat which means our source ip would be completely netted i mean",
    "start": "116640",
    "end": "122799"
  },
  {
    "text": "it would be completely trans translated to the different ip address and then it will",
    "start": "122799",
    "end": "128720"
  },
  {
    "text": "send it send out to the application then when the application replace back",
    "start": "128720",
    "end": "135599"
  },
  {
    "text": "the same flow i mean whatever the flow the data comes from",
    "start": "135599",
    "end": "140840"
  },
  {
    "text": "the application right from the client right with the same data flow it will go go back",
    "start": "140840",
    "end": "148480"
  },
  {
    "text": "that is the traditional way but in case of dsr the moment data received on",
    "start": "148480",
    "end": "156959"
  },
  {
    "text": "server so it will just reply back to the client directly so in between there might be a",
    "start": "156959",
    "end": "163440"
  },
  {
    "text": "switch which will just route the data towards the test",
    "start": "163440",
    "end": "168720"
  },
  {
    "text": "towards the client which is requested basically director server written",
    "start": "168720",
    "end": "174400"
  },
  {
    "text": "is a method of load balancing that allows traffic returning from a load balanced server to be routed",
    "start": "174400",
    "end": "181120"
  },
  {
    "text": "asymmetrically skipping the load balancer and traveling back to clients through the server's",
    "start": "181120",
    "end": "187599"
  },
  {
    "text": "default gateway in a traditional way of",
    "start": "187599",
    "end": "194239"
  },
  {
    "text": "routing uh first of all from from the internet just i mean as a client we are just",
    "start": "194239",
    "end": "200080"
  },
  {
    "text": "requesting any data to the server and then first it will reach out to the",
    "start": "200080",
    "end": "205440"
  },
  {
    "text": "load balancer then load balancer will do the source",
    "start": "205440",
    "end": "211360"
  },
  {
    "text": "netting okay it will just hide the source ip and then it will just send it send out",
    "start": "211360",
    "end": "217280"
  },
  {
    "text": "to the particular server and once we got the response back to the load",
    "start": "217280",
    "end": "223680"
  },
  {
    "text": "balancer and then load balancer [Music] and then it will just route back to the",
    "start": "223680",
    "end": "229040"
  },
  {
    "text": "corresponding flight here",
    "start": "229040",
    "end": "234080"
  },
  {
    "text": "the problem is like whatever the whatever i mean from the intern from the",
    "start": "234080",
    "end": "239120"
  },
  {
    "text": "client to server whatever the data path it is sending with the same data part it",
    "start": "239120",
    "end": "244560"
  },
  {
    "text": "has to reach the back but this we cannot do it for all the application say for example",
    "start": "244560",
    "end": "251760"
  },
  {
    "text": "for highly data streamed applications and all we cannot we cannot send the same i mean uh i mean",
    "start": "251760",
    "end": "259040"
  },
  {
    "text": "we can send it via load balancer we can request it via load balancer but the video data cannot be transformed via",
    "start": "259040",
    "end": "266639"
  },
  {
    "text": "load balancer so which will which will heavily affect the load balancer right so that's the only reason we are",
    "start": "266639",
    "end": "272960"
  },
  {
    "text": "going to dsr but yeah i mean uh with respect to dsr what will happen is like",
    "start": "272960",
    "end": "278080"
  },
  {
    "text": "um uh from the internet first of all uh the data",
    "start": "278080",
    "end": "284320"
  },
  {
    "text": "i mean whatever the data we are requesting so that request will reach to the load balancer and then load balancer will send it to",
    "start": "284320",
    "end": "291680"
  },
  {
    "text": "the corresponding web server and then web server will directly reply",
    "start": "291680",
    "end": "296880"
  },
  {
    "text": "back to the client through the switch basically here we are avoiding the so",
    "start": "296880",
    "end": "303919"
  },
  {
    "text": "many hops you can see like uh from the client it has to reach load balancer and then",
    "start": "303919",
    "end": "309360"
  },
  {
    "text": "from load balancer to the particular node correct and then from the node to the",
    "start": "309360",
    "end": "315120"
  },
  {
    "text": "application but here in this case the application will directly reply back to the",
    "start": "315120",
    "end": "321759"
  },
  {
    "text": "client which were originated by which which originated the traffic",
    "start": "321759",
    "end": "327039"
  },
  {
    "text": "yeah so i mean basically this is this is the dsr",
    "start": "327600",
    "end": "333039"
  },
  {
    "text": "uh so what is the business use case uh for this guy this this dsr",
    "start": "333039",
    "end": "340639"
  },
  {
    "text": "the number uh number one suppose uh if you are the client and you want to",
    "start": "340639",
    "end": "347039"
  },
  {
    "text": "see how much how much how much server you are utilizing it i",
    "start": "347039",
    "end": "352400"
  },
  {
    "text": "mean if you if you want to see it we can see it through this dsr method",
    "start": "352400",
    "end": "357840"
  },
  {
    "text": "and you wanted to will based on the source ip i mean",
    "start": "357840",
    "end": "365039"
  },
  {
    "text": "then we can we can go with dsr method then as a server you wanted to allow",
    "start": "365360",
    "end": "371440"
  },
  {
    "text": "particular uh i mean in a server you wanted to allow particular source id",
    "start": "371440",
    "end": "378080"
  },
  {
    "text": "then also we can we can we can go ahead with dsr method because uh we we never masqueraded the",
    "start": "378080",
    "end": "386479"
  },
  {
    "text": "incoming uh source id so since we have uh complete privilege to",
    "start": "386479",
    "end": "392720"
  },
  {
    "text": "you know see the source ap uh we can uh we can just secure our application based",
    "start": "392720",
    "end": "399600"
  },
  {
    "text": "on the train source and then uh",
    "start": "399600",
    "end": "405280"
  },
  {
    "text": "the latest the the trending one like video games multimedia content delivery network",
    "start": "405280",
    "end": "411680"
  },
  {
    "text": "uh actually these these are all the things were uh completely based on the",
    "start": "411680",
    "end": "417120"
  },
  {
    "text": "data's data server uh direct server written okay",
    "start": "417120",
    "end": "422560"
  },
  {
    "text": "the reason is like i mean the moment you are requesting for a video i mean if you if you are",
    "start": "422560",
    "end": "428400"
  },
  {
    "text": "requesting uh youtube to play the video that request would be just only one just",
    "start": "428400",
    "end": "433440"
  },
  {
    "text": "you just some one or two packets of iv packet right but the reply might be such",
    "start": "433440",
    "end": "439599"
  },
  {
    "text": "a very huge data packet correct and when whenever you are requesting",
    "start": "439599",
    "end": "445680"
  },
  {
    "text": "your request will go via the load balancer because your request is like hey i want",
    "start": "445680",
    "end": "451599"
  },
  {
    "text": "this particular video that's the only request you will be having it but the video content would be such a so",
    "start": "451599",
    "end": "458560"
  },
  {
    "text": "huge data correct so that never come back with the same load balancer so i mean if if we if we",
    "start": "458560",
    "end": "465360"
  },
  {
    "text": "allow the data to be transferred via load balancer i mean it would be like you know almost the load balancer will",
    "start": "465360",
    "end": "471599"
  },
  {
    "text": "get overloaded right so just to avoid such kind of conditions we are going with",
    "start": "471599",
    "end": "477759"
  },
  {
    "text": "that server data okay uh basically the streaming streaming services need a huge amount of video",
    "start": "477759",
    "end": "484879"
  },
  {
    "text": "data from the server to the mobile client application but actually the actually whenever you are requesting",
    "start": "484879",
    "end": "491440"
  },
  {
    "text": "that request would be you know very very very very less number of packet but uh but the response would be huge number of",
    "start": "491440",
    "end": "498080"
  },
  {
    "text": "packet correct so yeah i mean this is the only reason and like the emails and the emails and",
    "start": "498080",
    "end": "504400"
  },
  {
    "text": "dollars is one of the best use best business use case for for direct direct",
    "start": "504400",
    "end": "509440"
  },
  {
    "text": "server item i mean basically the email if you are attaching",
    "start": "509440",
    "end": "515440"
  },
  {
    "text": "such a very huge content and if if all the mails go load balancer",
    "start": "515440",
    "end": "521039"
  },
  {
    "text": "the load balancer cannot even understand it right so that's the whole idea for",
    "start": "521039",
    "end": "526160"
  },
  {
    "text": "direct server so here in our case yes we have brought up the",
    "start": "526160",
    "end": "535279"
  },
  {
    "text": "dual stack kubernetes with direct server written basically this is our whole architecture",
    "start": "535279",
    "end": "541920"
  },
  {
    "text": "first of all for dual stack kubernetes what is required the par ip should be the pod",
    "start": "541920",
    "end": "548959"
  },
  {
    "text": "should support both ipv4 as well as ipv6 i mean both ip address it should",
    "start": "548959",
    "end": "555200"
  },
  {
    "text": "support right and then i mean that is the main criteria",
    "start": "555200",
    "end": "561040"
  },
  {
    "text": "so now with the pod networking we have supported both ipv4 as well as ipv6",
    "start": "561040",
    "end": "568800"
  },
  {
    "text": "so uh in the in the cni uh we we would have we would have",
    "start": "568800",
    "end": "574000"
  },
  {
    "text": "clearly mentioned what is the pod subnet what is the pod ipv4 subnet ip and ipv6",
    "start": "574000",
    "end": "580959"
  },
  {
    "text": "subnet ap so based on that your pod will be allocated with both ipv4 as well as",
    "start": "580959",
    "end": "586640"
  },
  {
    "text": "ipv6 for ips okay and",
    "start": "586640",
    "end": "592959"
  },
  {
    "text": "now uh yes we need to have a router this physical router",
    "start": "593120",
    "end": "599760"
  },
  {
    "text": "basically this physical router should be having a ecmp under pgp capability",
    "start": "599760",
    "end": "608240"
  },
  {
    "text": "and we will be having our kubernetes cluster node correct and we and we might be running a pod on",
    "start": "608800",
    "end": "617279"
  },
  {
    "text": "both the nodes uh i mean there might be a case like you know in a single deployment can have",
    "start": "617279",
    "end": "623440"
  },
  {
    "text": "multiple replica and which may which which might run across all the nodes so",
    "start": "623440",
    "end": "629120"
  },
  {
    "text": "i mean this is one of the use case like you know it is it is running on both the nodes this is we can consider like you know",
    "start": "629120",
    "end": "636000"
  },
  {
    "text": "this is one of the deployment now whenever the data is being requested",
    "start": "636000",
    "end": "641440"
  },
  {
    "text": "first it will first it will reach to internet then it will reach to the",
    "start": "641440",
    "end": "648800"
  },
  {
    "text": "then it will reach to the router now router should should",
    "start": "649040",
    "end": "655120"
  },
  {
    "text": "send it to the corresponding kubernetes cluster node okay prior to that",
    "start": "655120",
    "end": "660399"
  },
  {
    "text": "uh there is something called service yammer correct i mean you can see there is something called service amongst so",
    "start": "660399",
    "end": "667279"
  },
  {
    "text": "the service yaml there is a parameter called external ip so the moment you have mentioned the",
    "start": "667279",
    "end": "674480"
  },
  {
    "text": "ipv4 as well as ipv6 external ip uh",
    "start": "674480",
    "end": "679920"
  },
  {
    "text": "then your kubernetes cluster node should",
    "start": "679920",
    "end": "684959"
  },
  {
    "text": "advertise those external ip to the physical router",
    "start": "684959",
    "end": "690640"
  },
  {
    "text": "okay basically uh the first step would be your kubernetes cluster should have",
    "start": "690640",
    "end": "696720"
  },
  {
    "text": "both ipv4 and ipv6 capability i mean your power should have allocated with both ipv4 as well as ipv6 ip number one",
    "start": "696720",
    "end": "705120"
  },
  {
    "text": "number two on your service yaml there is a parameter called external ip so where",
    "start": "705120",
    "end": "711360"
  },
  {
    "text": "you will you will use you can mention the public ip a public virtual ip so",
    "start": "711360",
    "end": "717760"
  },
  {
    "text": "that public virtual iep will be advertised from the kubernetes node to the actual physical router",
    "start": "717760",
    "end": "725519"
  },
  {
    "text": "okay then your kubernetes node will be having ipvs",
    "start": "725519",
    "end": "730880"
  },
  {
    "text": "adm ipvs adm is a linux utility uh which is which is which is basically used to route the data",
    "start": "730880",
    "end": "738000"
  },
  {
    "text": "in an effective way okay uh so the moment",
    "start": "738000",
    "end": "743120"
  },
  {
    "text": "uh okay so now we have we have just allocated some of the ipv4 and ipv6",
    "start": "743120",
    "end": "748160"
  },
  {
    "text": "external ip to the part and the moment uh the",
    "start": "748160",
    "end": "753440"
  },
  {
    "text": "uh traffic is originated from the client first it first it will reach out to the",
    "start": "753440",
    "end": "758639"
  },
  {
    "text": "internet then it will reach out to the router now since our kubernetes cluster",
    "start": "758639",
    "end": "765760"
  },
  {
    "text": "kubernetes node have advertised those ips now router knows which is the",
    "start": "765760",
    "end": "771440"
  },
  {
    "text": "which which is the node it should forward okay so and then it should have the ecmp",
    "start": "771440",
    "end": "777680"
  },
  {
    "text": "capability like who is the shortest path to reach out the",
    "start": "777680",
    "end": "783360"
  },
  {
    "text": "reach out the incoming packet to the kubernetes customer and then uh you know the the router will",
    "start": "784959",
    "end": "790720"
  },
  {
    "text": "forward the data to the uh the shortest path kubernetes cluster",
    "start": "790720",
    "end": "796079"
  },
  {
    "text": "node okay then once that data",
    "start": "796079",
    "end": "801120"
  },
  {
    "text": "is reached with that uh once the data is reached on the kubernetes cluster node",
    "start": "801120",
    "end": "807680"
  },
  {
    "text": "then how it will be routing to the pod and how it will reply back i mean that's",
    "start": "807680",
    "end": "813600"
  },
  {
    "text": "what we are going we are going to see in depth actually in a further slide",
    "start": "813600",
    "end": "819839"
  },
  {
    "text": "clear to that how we achieved it i mean that's what i'm going to explain now uh there is a open source cube router",
    "start": "820000",
    "end": "827839"
  },
  {
    "text": "which supports ipv4 with dsr yes actually we have taken the cube",
    "start": "827839",
    "end": "834079"
  },
  {
    "text": "router open source ipv4 supported with dsr package",
    "start": "834079",
    "end": "840800"
  },
  {
    "text": "and then on top of it we have we have just enabled that dual stack external external light",
    "start": "840800",
    "end": "847120"
  },
  {
    "text": "okay and uh yes the the first thing what we did is like for",
    "start": "847120",
    "end": "853519"
  },
  {
    "text": "the pod ip we were we should be able to allocate both ipv4 as well as ipv6",
    "start": "853519",
    "end": "860000"
  },
  {
    "text": "ip and then in an external ip in the external ip",
    "start": "860000",
    "end": "866480"
  },
  {
    "text": "we were we were we were supporting both ipv4 as well as ipv6 ip",
    "start": "866480",
    "end": "872240"
  },
  {
    "text": "okay i mean uh so that both in i mean for a same application",
    "start": "872240",
    "end": "877760"
  },
  {
    "text": "for both ipv4 and ipv6 can you know it can send the send and",
    "start": "877760",
    "end": "883519"
  },
  {
    "text": "receive the traffic at the same time now the moment you have mentioned this",
    "start": "883519",
    "end": "889600"
  },
  {
    "text": "external ip the cube router",
    "start": "889600",
    "end": "894639"
  },
  {
    "text": "will start advertise the external i mean will start advertise the ipv4 and ipv6",
    "start": "894639",
    "end": "902240"
  },
  {
    "text": "external ip to the ex to the gateway i mean to the to the router basically",
    "start": "902240",
    "end": "908240"
  },
  {
    "text": "so this router should have the ecmp and the pgp capability",
    "start": "908240",
    "end": "914240"
  },
  {
    "text": "so here the moment you have ordered the external ip i mean it will just start you know",
    "start": "915440",
    "end": "923040"
  },
  {
    "text": "it will just start advertising the eyepiece",
    "start": "923040",
    "end": "927639"
  },
  {
    "text": "actually how we are achieving uh achieving this",
    "start": "928079",
    "end": "933040"
  },
  {
    "text": "there is something called mangle ip table so",
    "start": "933519",
    "end": "938959"
  },
  {
    "text": "uh whenever the service is being uh whenever the service has been applied",
    "start": "938959",
    "end": "946000"
  },
  {
    "text": "first we will create a manual table okay under the manual table there is a",
    "start": "946000",
    "end": "951120"
  },
  {
    "text": "parameter called firewall mark okay just we will set the firewall mark",
    "start": "951120",
    "end": "958320"
  },
  {
    "text": "and whenever that whenever the ip packet comes with the destination ip as a external ip",
    "start": "958320",
    "end": "965360"
  },
  {
    "text": "which which is mentioned on this service uh this manual i mean this manual table",
    "start": "965360",
    "end": "971120"
  },
  {
    "text": "just it will it will just mark the incoming packet with some hexadecimal value",
    "start": "971120",
    "end": "977279"
  },
  {
    "text": "this hexadecimal value is a unique number which is derived from both both external ip and the port",
    "start": "977279",
    "end": "984560"
  },
  {
    "text": "number so that i mean so that we we are all we will always get the unique firewall mark",
    "start": "984560",
    "end": "992880"
  },
  {
    "text": "and then uh once we have the once we have the firewall mark",
    "start": "994240",
    "end": "999519"
  },
  {
    "text": "we will we will add the entry to the ipvs adm table okay basically i mean in the demo i will",
    "start": "999519",
    "end": "1006959"
  },
  {
    "text": "show you each and every ipvs adm table contains its pod id",
    "start": "1006959",
    "end": "1012800"
  },
  {
    "text": "okay and the moment the moment the data comes with the",
    "start": "1012800",
    "end": "1018399"
  },
  {
    "text": "external i mean destination ips external ip",
    "start": "1018399",
    "end": "1023680"
  },
  {
    "text": "then through mangle table we are just marking the packet with a firewall mark",
    "start": "1023680",
    "end": "1030880"
  },
  {
    "text": "then uh it will be router to the ipvs adm table",
    "start": "1030880",
    "end": "1036000"
  },
  {
    "text": "once it is routed to the ipvs adm table in the ipvs stadium table we will be having an entry for this particular",
    "start": "1036000",
    "end": "1042000"
  },
  {
    "text": "firewall mark these are all the i mean uh i mean following some",
    "start": "1042000",
    "end": "1047520"
  },
  {
    "text": "following parts would be supported i mean such kind of entry would be that i mean i am showing it in the demo",
    "start": "1047520",
    "end": "1054080"
  },
  {
    "text": "like uh that i mean for in a deployment there might be a multiple replica correct",
    "start": "1054080",
    "end": "1059440"
  },
  {
    "text": "so there might be a chance that like a single single uh i mean for the entire deployment will be having one",
    "start": "1059440",
    "end": "1066559"
  },
  {
    "text": "ipv4 and one ipv6 external ip so in that case",
    "start": "1066559",
    "end": "1072080"
  },
  {
    "text": "for ipv4 firewall mark will be having the corresponding ipv4 part ip",
    "start": "1072080",
    "end": "1078400"
  },
  {
    "text": "and then ipv6 firewallbar will be having the corresponding ipv6 for ip",
    "start": "1078400",
    "end": "1087120"
  },
  {
    "text": "now uh since we were creating the ipvs adm table with the firewall",
    "start": "1087520",
    "end": "1094000"
  },
  {
    "text": "mark mode the incoming data never be masked masked",
    "start": "1094000",
    "end": "1099440"
  },
  {
    "text": "rather on top of the incoming packet the ipvcm will add another 20 bytes of",
    "start": "1099440",
    "end": "1106840"
  },
  {
    "text": "data uh the source ip would be the node ap and then the destination ip would be the",
    "start": "1106840",
    "end": "1113120"
  },
  {
    "text": "uh pod ip and then it will just route the data so that's how",
    "start": "1113120",
    "end": "1118960"
  },
  {
    "text": "the packets which is belongs to the external iep when it reaches to the node",
    "start": "1118960",
    "end": "1124240"
  },
  {
    "text": "it is just reaching out to the pod so on the part we were creating the ipip",
    "start": "1124240",
    "end": "1131120"
  },
  {
    "text": "tunneling so that the i mean once it once it reaches to the part that it just removes the first",
    "start": "1131120",
    "end": "1138000"
  },
  {
    "text": "first 20 20 bytes of header and then uh the further i mean with the with the",
    "start": "1138000",
    "end": "1144960"
  },
  {
    "text": "further uh data it can it is it will be able to detect",
    "start": "1144960",
    "end": "1150080"
  },
  {
    "text": "like you know that that is belongs to that node and then it will send it to the application",
    "start": "1150080",
    "end": "1156000"
  },
  {
    "text": "once the application is processed it will just reply back to the it will it will just reply back to the",
    "start": "1156000",
    "end": "1164080"
  },
  {
    "text": "reply back as a response directly to the client that's how the direct server written",
    "start": "1164080",
    "end": "1170400"
  },
  {
    "text": "with the dsr is working just i'll show you the term yeah",
    "start": "1170400",
    "end": "1178519"
  },
  {
    "text": "there is a i mean uh in my keyboard does in my simple kubernetes cluster just i am",
    "start": "1179120",
    "end": "1184799"
  },
  {
    "text": "running only one just one of the part which is a simple web server",
    "start": "1184799",
    "end": "1190559"
  },
  {
    "text": "okay so you have seen inside that part",
    "start": "1190559",
    "end": "1196720"
  },
  {
    "text": "uh there is uh there are two ips will be created",
    "start": "1196720",
    "end": "1202400"
  },
  {
    "text": "were created for this part one one for ipv4 and another one for ipv6 i mean just we have",
    "start": "1205520",
    "end": "1212960"
  },
  {
    "text": "enabled the dual stack uh functionality for the entire tuperontous cluster",
    "start": "1212960",
    "end": "1218159"
  },
  {
    "text": "also with respect to the cni just we have assigned both ipv4 as well as ipv6 address",
    "start": "1218159",
    "end": "1225039"
  },
  {
    "text": "so with this way you know uh for a single part we are locating both ipv4 as well as ipv6 ip address",
    "start": "1225039",
    "end": "1235720"
  },
  {
    "text": "so you can see i mean every every deployment or every stateful site will",
    "start": "1236720",
    "end": "1241919"
  },
  {
    "text": "have its corresponding service service correct so likewise uh yes our our application also having a",
    "start": "1241919",
    "end": "1251360"
  },
  {
    "text": "service so here you can see there are there are two ip address where mentioned",
    "start": "1251360",
    "end": "1258000"
  },
  {
    "text": "in fact these two ip address are the public ips okay uh one one",
    "start": "1258000",
    "end": "1263600"
  },
  {
    "text": "one is for ipv4 another one is for ipv6 in fact here you can give n number of",
    "start": "1263600",
    "end": "1268720"
  },
  {
    "text": "ipv4 and ipv6 address which means for a single deployment you can have n number of public ips in both ipv4 as well as",
    "start": "1268720",
    "end": "1277200"
  },
  {
    "text": "ipv6 so now apply this in fact just now we have we have seen it",
    "start": "1277200",
    "end": "1283840"
  },
  {
    "text": "there is no tunnels were created only only the only the you know for uh for a",
    "start": "1283840",
    "end": "1289280"
  },
  {
    "text": "particular part we have both ipv4 as well as cycling basic ip",
    "start": "1289280",
    "end": "1294480"
  },
  {
    "text": "in fact this this is springable and the uh you can see that okay it is",
    "start": "1294480",
    "end": "1301039"
  },
  {
    "text": "springable within the kubernetes cluster",
    "start": "1301039",
    "end": "1305840"
  },
  {
    "text": "see for both ipv4 and then ipv6 address you know it is responding back",
    "start": "1325440",
    "end": "1330799"
  },
  {
    "text": "so now we are creating the service with the external ip uh",
    "start": "1330799",
    "end": "1337120"
  },
  {
    "text": "so let me just apply this",
    "start": "1337120",
    "end": "1341640"
  },
  {
    "text": "see like the the moment i have applied the external ip you can see",
    "start": "1352640",
    "end": "1360440"
  },
  {
    "text": "that there are two tunnels see by default you know the pod had one ipad one ipv4",
    "start": "1362080",
    "end": "1368880"
  },
  {
    "text": "right address and then one ipv6 address so now the moment we created the service",
    "start": "1368880",
    "end": "1374320"
  },
  {
    "text": "with external ip it is creating there are two tunnels it is creating one with ipv6 another one",
    "start": "1374320",
    "end": "1380720"
  },
  {
    "text": "with ipv4 okay and this is the ipip tunnel the the",
    "start": "1380720",
    "end": "1387440"
  },
  {
    "text": "to ip61 okay and yes actually this particular tunnel has",
    "start": "1387440",
    "end": "1393039"
  },
  {
    "text": "been created within the pod okay let us understand what is creating",
    "start": "1393039",
    "end": "1399280"
  },
  {
    "text": "on the node",
    "start": "1399280",
    "end": "1402600"
  },
  {
    "text": "and see here let me see here there is a entry",
    "start": "1405600",
    "end": "1412080"
  },
  {
    "text": "for this for for there is entry on the manual table",
    "start": "1412080",
    "end": "1417440"
  },
  {
    "text": "so for this particular public ap if any packets were received",
    "start": "1417440",
    "end": "1422480"
  },
  {
    "text": "just we are marking that packet with this id i mean any any tcp packet is coming just",
    "start": "1422480",
    "end": "1428640"
  },
  {
    "text": "we are marking that tcp packet with this id then we are routing this packet to ipvs adm",
    "start": "1428640",
    "end": "1437520"
  },
  {
    "text": "yes actually we are we are we are we are setting i know uh a muscles as well in fact this is",
    "start": "1437520",
    "end": "1442880"
  },
  {
    "text": "this is just to avoid you know uh in case uh we have we have uh set in",
    "start": "1442880",
    "end": "1448559"
  },
  {
    "text": "mtu and we should uh i mean this is just auto calculate the",
    "start": "1448559",
    "end": "1453840"
  },
  {
    "text": "entire mtv and then it'll it'll just start just accordingly uh i mean that is the functional divided",
    "start": "1453840",
    "end": "1459760"
  },
  {
    "text": "by default functionality of cube router but yeah we have extended with ipv6 also",
    "start": "1459760",
    "end": "1465360"
  },
  {
    "text": "so if you have seen it so here with this we are setting the in case if",
    "start": "1465360",
    "end": "1470480"
  },
  {
    "text": "this destination ip comes we are just said we are just marking that particular tcp packet with this id",
    "start": "1470480",
    "end": "1478159"
  },
  {
    "text": "and when you see this ipvs adm",
    "start": "1478159",
    "end": "1483760"
  },
  {
    "text": "command you can see like you know there are two firewall marks were created",
    "start": "1483760",
    "end": "1490240"
  },
  {
    "text": "i mean the highlighted highlighted things were two firewall marks so each firewall mark",
    "start": "1496720",
    "end": "1502880"
  },
  {
    "text": "the corresponding ip table were created so that when the packet comes we are",
    "start": "1502880",
    "end": "1508159"
  },
  {
    "text": "just marking it so and then it is routing to the ipvs adm so basically the ipvs adm is a linux",
    "start": "1508159",
    "end": "1514559"
  },
  {
    "text": "utility which which just forward the packet to the destined",
    "start": "1514559",
    "end": "1520880"
  },
  {
    "text": "to the destination for our case that destination is a pod ap correct",
    "start": "1520880",
    "end": "1526960"
  },
  {
    "text": "so when the external when the data with the external ip comes external",
    "start": "1526960",
    "end": "1532240"
  },
  {
    "text": "uh destination ib comes we are just routing to the ibb cdm table",
    "start": "1532240",
    "end": "1537760"
  },
  {
    "text": "by marking that packet and then with the same firewall mark",
    "start": "1537760",
    "end": "1542799"
  },
  {
    "text": "we have the corresponding particle right so yeah i mean we have uh individual",
    "start": "1542799",
    "end": "1549679"
  },
  {
    "text": "mark for the individual ipv4 and the port combination so here i have one ipv4",
    "start": "1549679",
    "end": "1555360"
  },
  {
    "text": "and i pick one ipv6 external ap i mean public ap so that's the reason that corresponding firewall mark has been",
    "start": "1555360",
    "end": "1562000"
  },
  {
    "text": "calculated and then it's corresponding for ips being assigned okay on the ipvs",
    "start": "1562000",
    "end": "1567760"
  },
  {
    "text": "adm table so now uh i mean due to this uh",
    "start": "1567760",
    "end": "1574320"
  },
  {
    "text": "ibbs area table the packet the incoming packets were directly routed to the",
    "start": "1574320",
    "end": "1580159"
  },
  {
    "text": "pod so the pod might be situated situated i mean it might be placed on on the same node or on the different",
    "start": "1580159",
    "end": "1587919"
  },
  {
    "text": "node if it is on the different node the packet would be routed so before routing",
    "start": "1587919",
    "end": "1593600"
  },
  {
    "text": "it what is happening is like like you know it is just encapsulating the",
    "start": "1593600",
    "end": "1600080"
  },
  {
    "text": "i mean it is just encapsulating the ip packet with this part ip and then it",
    "start": "1600080",
    "end": "1605520"
  },
  {
    "text": "is simply it is routing it so when it reaches through that the strained part basically this is this is a part ap",
    "start": "1605520",
    "end": "1611840"
  },
  {
    "text": "right so when it reaches to that the straight part okay uh we have this",
    "start": "1611840",
    "end": "1619760"
  },
  {
    "text": "we we we have this tunnel right so",
    "start": "1620400",
    "end": "1626520"
  },
  {
    "text": "we have the tunnel since we have the tunnel",
    "start": "1627279",
    "end": "1632480"
  },
  {
    "text": "uh under the pod eyepiece so once it reaches here it it just remove the first first ip",
    "start": "1632480",
    "end": "1639679"
  },
  {
    "text": "header so which belongs to the part then when it see the ip address so it is",
    "start": "1639679",
    "end": "1646080"
  },
  {
    "text": "belongs to the external line it is belongs to the public ap and that same public ap has",
    "start": "1646080",
    "end": "1652320"
  },
  {
    "text": "been assigned in our part and then uh it will it will allow the application to",
    "start": "1652320",
    "end": "1659039"
  },
  {
    "text": "consume the data okay uh application to allow application",
    "start": "1659039",
    "end": "1664720"
  },
  {
    "text": "to allow the consumer data with the preserved source ip actually we just",
    "start": "1664720",
    "end": "1670240"
  },
  {
    "text": "preserved the source ip by putting another ip another another ip packet on top of it",
    "start": "1670240",
    "end": "1676240"
  },
  {
    "text": "basically we have preserved it right uh so uh i mean we have just a tunnel date so",
    "start": "1676240",
    "end": "1681600"
  },
  {
    "text": "when it when when when it reaches here just we remove the first first 20 bytes",
    "start": "1681600",
    "end": "1686880"
  },
  {
    "text": "and then we have the further packets so with this we are i mean",
    "start": "1686880",
    "end": "1691919"
  },
  {
    "text": "we are able to consume with our application then the application will directly reply",
    "start": "1691919",
    "end": "1697520"
  },
  {
    "text": "back to the destination uh i mean the the i mean the source id",
    "start": "1697520",
    "end": "1703279"
  },
  {
    "text": "will be there uh the state public ap the",
    "start": "1703279",
    "end": "1709200"
  },
  {
    "text": "destination would be the destination would be that uh the traffic which is originated by the",
    "start": "1709200",
    "end": "1717360"
  },
  {
    "text": "the traffic which which you are originated by the user so uh",
    "start": "1717360",
    "end": "1723039"
  },
  {
    "text": "i mean with this the packets were directly reaching towards the source ip okay i mean in between there",
    "start": "1723039",
    "end": "1729919"
  },
  {
    "text": "might be some uh some default gateway to reach out the packet to that to the user",
    "start": "1729919",
    "end": "1736640"
  },
  {
    "text": "i mean it never follow the same ideal ideal way like you know first it it it",
    "start": "1736640",
    "end": "1742240"
  },
  {
    "text": "did not to follow the follow to come through i firewall firewall",
    "start": "1742240",
    "end": "1747440"
  },
  {
    "text": "firewall rule and then the actual physical router then from the physical router to the",
    "start": "1747440",
    "end": "1752960"
  },
  {
    "text": "firewall rule then then load balancer then kubernetes node",
    "start": "1752960",
    "end": "1759200"
  },
  {
    "text": "then when it reaches to the kubernetes node again we might have some we",
    "start": "1759200",
    "end": "1764480"
  },
  {
    "text": "we might keep some ingress so through that it will reach out to the part but in this",
    "start": "1764480",
    "end": "1771120"
  },
  {
    "text": "but with this with this solution with this dual stack direct server return solution",
    "start": "1771120",
    "end": "1778240"
  },
  {
    "text": "in a single deployment we can have a number of public ips which we can assign it on",
    "start": "1778240",
    "end": "1784000"
  },
  {
    "text": "both ipv4 as well as ipv6 and then at the same time the application can serve both the",
    "start": "1784000",
    "end": "1790799"
  },
  {
    "text": "traffic so basically mostly the video streamings and all",
    "start": "1790799",
    "end": "1796880"
  },
  {
    "text": "generally working with this kind of manner",
    "start": "1796880",
    "end": "1802080"
  },
  {
    "text": "uh say for example okay now if i just call it see it is reachable",
    "start": "1802159",
    "end": "1808399"
  },
  {
    "text": "and if i cal with this external ip again it is reachable",
    "start": "1808399",
    "end": "1815600"
  },
  {
    "text": "again it will be reach out reachable so in fact this part would be reachable from",
    "start": "1817919",
    "end": "1824000"
  },
  {
    "text": "outside my network also because uh i mean we were advertising this ip towards",
    "start": "1824000",
    "end": "1831440"
  },
  {
    "text": "uh towards the router correct so that's how",
    "start": "1831440",
    "end": "1837520"
  },
  {
    "text": "the complete dual stack with the dsr has been is being established yeah so thank you thank you so much",
    "start": "1837520",
    "end": "1845440"
  }
]