[
  {
    "text": "we basically locate people into teams that can be easier for us if we're more compressed so the people who say",
    "start": "186580",
    "end": "193660"
  },
  {
    "text": "basically if you could fill the seats towards the front the front rows are reserved for well see some of the seats",
    "start": "193660",
    "end": "199480"
  },
  {
    "text": "for those with accessibility needs but other than that if you could try and fill out the front rows it'll just save",
    "start": "199480",
    "end": "205990"
  },
  {
    "text": "us time when we come to see medication soon and if people will cover that when",
    "start": "205990",
    "end": "211150"
  },
  {
    "text": "we get there [Music]",
    "start": "211150",
    "end": "214860"
  },
  {
    "text": "okay",
    "start": "247040",
    "end": "250040"
  },
  {
    "text": "oh yeah and you get all that yet",
    "start": "283900",
    "end": "289570"
  },
  {
    "text": "open bang",
    "start": "318220",
    "end": "321430"
  },
  {
    "text": "okay um I think people are still filing in but I think we should get started because we've only got so much time",
    "start": "358580",
    "end": "364620"
  },
  {
    "text": "right we've got a lot to get through so first of all welcome and thank you for",
    "start": "364620",
    "end": "370379"
  },
  {
    "text": "coming slightly relieves that the registered counts of 640 as of last night hasn't",
    "start": "370379",
    "end": "378240"
  },
  {
    "text": "quite eventuated so that's good and so we have a lot of clusters who spun up",
    "start": "378240",
    "end": "384479"
  },
  {
    "text": "for this which thankfully won't all be necessary but that's probably gonna work out just about right now I would say okay so yes welcome to bulletproof",
    "start": "384479",
    "end": "392400"
  },
  {
    "text": "kubernetes learn by hacking first of all",
    "start": "392400",
    "end": "398069"
  },
  {
    "text": "I'm going to introduce ourselves this is Anna Cullen she worked for an",
    "start": "398069",
    "end": "404039"
  },
  {
    "text": "amazing fintechs start-up in London called pay base and as infrastructure",
    "start": "404039",
    "end": "410099"
  },
  {
    "text": "engineer there and this is Luke Luke",
    "start": "410099",
    "end": "415710"
  },
  {
    "text": "bond he is a co-founder of control plane he's been working a lot in the industry for quite a few years and control plane",
    "start": "415710",
    "end": "423479"
  },
  {
    "text": "is a consultancy around kubernetes and security and all things cloud native all",
    "start": "423479",
    "end": "430590"
  },
  {
    "text": "right so the plan for today what we're going to cover we're going to talk about",
    "start": "430590",
    "end": "435690"
  },
  {
    "text": "a few things that you should keep in mind when we are thinking about kubernetes security then we'll go into",
    "start": "435690",
    "end": "443219"
  },
  {
    "text": "allocating everyone into teams with your own clusters and then we'll do some",
    "start": "443219",
    "end": "449699"
  },
  {
    "text": "hacking yeah okay so first a bit of theory",
    "start": "449699",
    "end": "458210"
  },
  {
    "text": "you",
    "start": "465740",
    "end": "467800"
  },
  {
    "text": "yeah so all of the different places were kubernetes is application workloads",
    "start": "946730",
    "end": "954080"
  },
  {
    "text": "workload configuration cluster configuration from a developer point of view from an Operations point",
    "start": "954080",
    "end": "960330"
  },
  {
    "text": "of view cluster deployment all of the good examples that you guys gave and there's a lot lot more yeah specially",
    "start": "960330",
    "end": "967590"
  },
  {
    "text": "even you dig into any of them the huge subject something like cluster deployments just like when you think can",
    "start": "967590",
    "end": "973980"
  },
  {
    "text": "in your organization what are the controls around a developer putting any olds vulnerable piece of software into",
    "start": "973980",
    "end": "980370"
  },
  {
    "text": "your cluster that's I mean it's a big problem space in itself right so focusing here mostly about the runtime",
    "start": "980370",
    "end": "986160"
  },
  {
    "text": "stuff today but some yeah it's a big space so we can have kernel exploits",
    "start": "986160",
    "end": "995670"
  },
  {
    "text": "itself so as I'm sure we all know containers are just processors running on Linux with a few few kernel features",
    "start": "995670",
    "end": "1003830"
  },
  {
    "text": "that gives them some isolation namespaces and C groups but that means that although we have mount namespaces",
    "start": "1003830",
    "end": "1011090"
  },
  {
    "text": "and Network namespaces they give us partition between some segregation some degree of segregation between between",
    "start": "1011090",
    "end": "1018050"
  },
  {
    "text": "our applications in terms of what they can do and what they can access on the system we are sharing one kernel so",
    "start": "1018050",
    "end": "1023530"
  },
  {
    "text": "containers don't give us we're not we're not we're not immune to kernel bugs",
    "start": "1023530",
    "end": "1029510"
  },
  {
    "text": "basically so kernel exploits a dirty cow are just as valid inside containers without further configuration and then",
    "start": "1029510",
    "end": "1038900"
  },
  {
    "text": "we are outside and various misconfigurations around the cluster like whether how good your are back is",
    "start": "1038900",
    "end": "1047500"
  },
  {
    "text": "whether you have certain old versions of kubernetes that have certain bugs in them if you're mounting Mountain things",
    "start": "1047500",
    "end": "1055160"
  },
  {
    "text": "too freely that's something to look for when you're looking into the clusters that we have today and obviously your application",
    "start": "1055160",
    "end": "1062930"
  },
  {
    "text": "security as well too so if if someone's going to break into your cluster it's generally going to be via vulnerable",
    "start": "1062930",
    "end": "1068180"
  },
  {
    "text": "workloads and if that workload has some as poor app sack let's say then you can",
    "start": "1068180",
    "end": "1074330"
  },
  {
    "text": "gain a foothold in there and then it's a question of what you can do from there so that's what we mean by pivoting",
    "start": "1074330",
    "end": "1081490"
  },
  {
    "text": "here from there you want to see you want to see what tools you have inside the container how they have ami be useful to",
    "start": "1081490",
    "end": "1088630"
  },
  {
    "text": "access other things in the system there we're going to look at there is where we're going to find out how good a",
    "start": "1088630",
    "end": "1094000"
  },
  {
    "text": "network policy and things like that are in our clusters so if you think for example what you want to avoid is if you",
    "start": "1094000",
    "end": "1100420"
  },
  {
    "text": "someone breaks into a web front-end for example gets shell and then is able to query the database if there's no need",
    "start": "1100420",
    "end": "1107470"
  },
  {
    "text": "for that application to query the database you should add network policy that locks it down just talking about putting layers of defense all the way",
    "start": "1107470",
    "end": "1113500"
  },
  {
    "text": "through especially when it comes to the protection of data only the services that should be able to talk to the database should be able to do it with",
    "start": "1113500",
    "end": "1119770"
  },
  {
    "text": "network policy so yeah you can get into container and see what we can access we",
    "start": "1119770",
    "end": "1125440"
  },
  {
    "text": "probably want to have a look around for various ports that's coming up in a few slides",
    "start": "1125440",
    "end": "1130690"
  },
  {
    "text": "program look around for various ports in terms of cubelet and api and seeing what we can access there and a lot of this",
    "start": "1130690",
    "end": "1137830"
  },
  {
    "text": "stuff can be prevented by some new stuff over here on the left like disallowing privileged containers setting security",
    "start": "1137830",
    "end": "1145450"
  },
  {
    "text": "policies using some sort of armor I see",
    "start": "1145450",
    "end": "1152740"
  },
  {
    "text": "Linux these kind of things to lock down what containers are able to do should a work lately become routes or an attacker",
    "start": "1152740",
    "end": "1158590"
  },
  {
    "text": "get in the container and become route they can still then have their privileges limiters by the way that",
    "start": "1158590",
    "end": "1164470"
  },
  {
    "text": "strong configuration so in terms of what",
    "start": "1164470",
    "end": "1172600"
  },
  {
    "text": "you can do to protect the production cluster is there some best practices",
    "start": "1172600",
    "end": "1178210"
  },
  {
    "text": "that were probably published by a cloud next in 2018 so when you set up a",
    "start": "1178210",
    "end": "1185350"
  },
  {
    "text": "cluster you should make sure that you restrict access to keep CTL to only the",
    "start": "1185350",
    "end": "1191170"
  },
  {
    "text": "people in your team that really need it you should always always use our back no",
    "start": "1191170",
    "end": "1196990"
  },
  {
    "text": "matter what and most of the big cloud platform so like AWS TCP and Azure at",
    "start": "1196990",
    "end": "1205120"
  },
  {
    "text": "the moment they all support her back by default as your was a bit late to the game but they do it now so that's good use",
    "start": "1205120",
    "end": "1213049"
  },
  {
    "text": "network policies to make sure that more",
    "start": "1213049",
    "end": "1218419"
  },
  {
    "text": "privileged less privileged pods cannot get access to more privileged workloads",
    "start": "1218419",
    "end": "1225169"
  },
  {
    "text": "and databases and stuff like that push drop TLS and use names vices then you",
    "start": "1225169",
    "end": "1233690"
  },
  {
    "text": "should always keep your kubernetes updated if use the managed version that shouldn't be much of a problem you",
    "start": "1233690",
    "end": "1240260"
  },
  {
    "text": "should always use a minimum of minimal operating system with as little features as possible follow the list privileged",
    "start": "1240260",
    "end": "1249250"
  },
  {
    "text": "access in terms of a and roles use",
    "start": "1249250",
    "end": "1255049"
  },
  {
    "text": "private IP s on your node always audit everything and have logging available",
    "start": "1255049",
    "end": "1262929"
  },
  {
    "text": "again disable dashboards disable the default service account tokens that on",
    "start": "1262929",
    "end": "1269570"
  },
  {
    "text": "GCP comes comes by default with the full compute access which you won't want on",
    "start": "1269570",
    "end": "1276320"
  },
  {
    "text": "your communities clusters protect node metadata you don't have to do that anymore scan images it's totally a mask",
    "start": "1276320",
    "end": "1284770"
  },
  {
    "text": "and also make sure that you protect your secret and use the service mesh for",
    "start": "1284770",
    "end": "1291140"
  },
  {
    "text": "authentication and encryption there's a few other things but this is a good checklist sort of so you can use and",
    "start": "1291140",
    "end": "1298610"
  },
  {
    "text": "guide you through ok so this list it's",
    "start": "1298610",
    "end": "1304850"
  },
  {
    "text": "just an example of all of the different ports that you can use for kubernetes to",
    "start": "1304850",
    "end": "1310850"
  },
  {
    "text": "sort of go into your clusters and explore and see what you have access to",
    "start": "1310850",
    "end": "1316990"
  },
  {
    "text": "we won't go through them but we'll make sure to leave them on the screen when",
    "start": "1316990",
    "end": "1322970"
  },
  {
    "text": "you start hacking ok",
    "start": "1322970",
    "end": "1328010"
  },
  {
    "text": "so we have published a cheat sheet that you can use with some compare with some",
    "start": "1328010",
    "end": "1333930"
  },
  {
    "text": "details that will help you for the scenarios yeah it contains kind of",
    "start": "1333930",
    "end": "1340260"
  },
  {
    "text": "things like some some common things to look for a few little functions and tools because we don't we kind of want",
    "start": "1340260",
    "end": "1347400"
  },
  {
    "text": "to give you a bit of a head start on some of these things because a short time that we have in the workshop today basically so let's create some things um",
    "start": "1347400",
    "end": "1365360"
  },
  {
    "text": "yeah so shall I do the team allocation that's fun okay so",
    "start": "1365360",
    "end": "1371840"
  },
  {
    "text": "okay moment it's gonna take some time so well what I need to do is split us up into 22 teams because that's the number",
    "start": "1381190",
    "end": "1388429"
  },
  {
    "text": "of clusters that we have we have 24 tables so I will basically like pair a",
    "start": "1388429",
    "end": "1395179"
  },
  {
    "text": "few of them up and I'm gonna come around and I'm going to come around and give",
    "start": "1395179",
    "end": "1400429"
  },
  {
    "text": "you team names because you'll need those names to get your credentials so someone in each team can take a note of the team",
    "start": "1400429",
    "end": "1407960"
  },
  {
    "text": "name I give them so okay so you are team",
    "start": "1407960",
    "end": "1420460"
  },
  {
    "text": "you are",
    "start": "1428150",
    "end": "1430900"
  },
  {
    "text": "Hyperion these are Greek Titans mostly I think",
    "start": "1437380",
    "end": "1443800"
  },
  {
    "text": "yes it is",
    "start": "1460070",
    "end": "1465299"
  },
  {
    "text": "hey if you so you're all gonna be in the same team",
    "start": "1499690",
    "end": "1505470"
  },
  {
    "text": "you will be one team",
    "start": "1546970",
    "end": "1550559"
  },
  {
    "text": "okay guys you're going to be",
    "start": "1611700",
    "end": "1617148"
  },
  {
    "text": "okay so all we really needed just to do at this point was note your team name",
    "start": "1777370",
    "end": "1782510"
  },
  {
    "text": "sorry it took a while to get that around you will really welcome to her started",
    "start": "1782510",
    "end": "1787990"
  },
  {
    "text": "doing whatever you like of course but that was all that was required of you so",
    "start": "1787990",
    "end": "1796070"
  },
  {
    "text": "what we've got in that list in the github repository is a list of IP",
    "start": "1796070",
    "end": "1801350"
  },
  {
    "text": "addresses for your team and other teams of course best not to use the other ones because destroyed fun for everybody",
    "start": "1801350",
    "end": "1810460"
  },
  {
    "text": "that's the team's so basically I'm we're going to kind of let you go at it for a",
    "start": "1810789",
    "end": "1817280"
  },
  {
    "text": "while all you've got to go off is the fact that there are some IP addresses and in the cheat sheet you might find",
    "start": "1817280",
    "end": "1823580"
  },
  {
    "text": "some ideas for things you could try like I said if you're new to security that",
    "start": "1823580",
    "end": "1829460"
  },
  {
    "text": "might be a bit of a thin brief so at some points we'll give you some hints to",
    "start": "1829460",
    "end": "1834890"
  },
  {
    "text": "move it along because you want to make sure they everyone gets something out of it so do you worst for now yes",
    "start": "1834890",
    "end": "1850090"
  },
  {
    "text": "so he goes straight ahead",
    "start": "1863210",
    "end": "1867559"
  },
  {
    "text": "yeah well you have access into a cluster so you have the IP addresses to sort of",
    "start": "1894960",
    "end": "1900190"
  },
  {
    "text": "try to break into that class yes yes",
    "start": "1900190",
    "end": "1907980"
  },
  {
    "text": "got in and done things I just discourage you from changing things too much so",
    "start": "1921179",
    "end": "1926309"
  },
  {
    "text": "that your teammates might have time to figure out what's going on you could do some mischief on and impact other",
    "start": "1926309",
    "end": "1933479"
  },
  {
    "text": "people's enjoyment of the workshop but trying to be in the spirit of the game",
    "start": "1933479",
    "end": "1940339"
  },
  {
    "text": "and that let me let me see what Thanks",
    "start": "1947100",
    "end": "1951380"
  },
  {
    "text": "oh yeah",
    "start": "1954789",
    "end": "1957478"
  },
  {
    "text": "yeah um if you do manage to get in we're",
    "start": "1961130",
    "end": "1967910"
  },
  {
    "text": "going to so that there's gonna be a point soon we're going to give you some clues for those who are not in yet there",
    "start": "1967910",
    "end": "1975799"
  },
  {
    "text": "will be a few stages of clues but once we do get through that what we're also we wanting to do is write something to",
    "start": "1975799",
    "end": "1981049"
  },
  {
    "text": "the file system on the hosts that we can verify so if you manage to do that let",
    "start": "1981049",
    "end": "1986840"
  },
  {
    "text": "us know and telling me what team you're in and I'll come and check it but you know it's necessary expected to be there",
    "start": "1986840",
    "end": "1992929"
  },
  {
    "text": "yep just to be clear this is that attempt on the host of one of your nodes",
    "start": "1992929",
    "end": "1998150"
  },
  {
    "text": "not inside the container if you manage to get in",
    "start": "1998150",
    "end": "2003240"
  },
  {
    "text": "11:40",
    "start": "2020150",
    "end": "2023150"
  },
  {
    "text": "that's the conversation I think that's good",
    "start": "2040990",
    "end": "2045250"
  },
  {
    "text": "confused silence",
    "start": "2049399",
    "end": "2052358"
  },
  {
    "text": "find anything interesting or just staring at IP addresses hmm and my end",
    "start": "2082200",
    "end": "2091300"
  },
  {
    "text": "map that's that that sounds like here on the right track that may be one of a",
    "start": "2091300",
    "end": "2099730"
  },
  {
    "text": "number of things that is interesting one put you have one person's I said they'd",
    "start": "2099730",
    "end": "2106210"
  },
  {
    "text": "been using n map I will leave the other one a little bit later I'm assuming that",
    "start": "2106210",
    "end": "2121030"
  },
  {
    "text": "not many other people have got something which engage where we are",
    "start": "2121030",
    "end": "2127620"
  },
  {
    "text": "[Music]",
    "start": "2145630",
    "end": "2148889"
  },
  {
    "text": "Oh",
    "start": "2155610",
    "end": "2157640"
  },
  {
    "text": "so if you haven't looked in here you'll find a in a moment you'll find a useful",
    "start": "2164980",
    "end": "2177450"
  },
  {
    "text": "they all get push",
    "start": "2179760",
    "end": "2183330"
  },
  {
    "text": "I'm basically where we want to start with this scenario is we've all you've",
    "start": "2189910",
    "end": "2194980"
  },
  {
    "text": "got to go on is that there are some IPS you might think what kind of you bish",
    "start": "2194980",
    "end": "2200920"
  },
  {
    "text": "you want to know what's running on which ports anyone know a tool that is useful for scanning open ports and and map yes",
    "start": "2200920",
    "end": "2210610"
  },
  {
    "text": "nm APN map will give you a little thing you can copy/paste in a moment so you",
    "start": "2210610",
    "end": "2216610"
  },
  {
    "text": "can run that yourself I can't even think if it's a kubernetes cluster might there",
    "start": "2216610",
    "end": "2222040"
  },
  {
    "text": "be some interesting what kind of ports let that think I need for own your workloads for a moment not like cube API",
    "start": "2222040",
    "end": "2227920"
  },
  {
    "text": "and whatnot didn't think of what kind of port rangers might be interesting to start scanning",
    "start": "2227920",
    "end": "2234030"
  },
  {
    "text": "thirty thousand and above someone suggested yes that's a good one because they are that if that's the range for",
    "start": "2237910",
    "end": "2243670"
  },
  {
    "text": "node ports right not all not all of our workloads are going to be running with node ports but it's a good place to",
    "start": "2243670",
    "end": "2249580"
  },
  {
    "text": "start so shortly we'll give you an example of something you can something",
    "start": "2249580",
    "end": "2257620"
  },
  {
    "text": "you get an nmap script that you can run to look for ports in that range and that's probably a good place to start for this scenario",
    "start": "2257620",
    "end": "2264990"
  },
  {
    "text": "how's that more MORE",
    "start": "2293360",
    "end": "2298680"
  },
  {
    "text": "why not let's go all the way so these these are these are batch functions if",
    "start": "2298680",
    "end": "2304200"
  },
  {
    "text": "you're on a machine that doesn't have any map and it's Linux then and bunchy",
    "start": "2304200",
    "end": "2309750"
  },
  {
    "text": "based then that might be how you'd install any map you don't have to leave it as an exercise for you you're using a different different system and pasting",
    "start": "2309750",
    "end": "2316920"
  },
  {
    "text": "these functions in well we'll define those functions for you you could then say for after pasting the end map cube",
    "start": "2316920",
    "end": "2322920"
  },
  {
    "text": "one you will then be able to type NMAC cube as though a bash commands and it",
    "start": "2322920",
    "end": "2328140"
  },
  {
    "text": "will run that thing right so it's going to scan for the first one M map and map and map cube is going to scan for common",
    "start": "2328140",
    "end": "2335190"
  },
  {
    "text": "ports like we saw in that table in the earlier slide and then n map cube discover is gonna be a little different",
    "start": "2335190",
    "end": "2346710"
  },
  {
    "text": "and then we've got some ones down the bottom here so this is you don't use",
    "start": "2346710",
    "end": "2353640"
  },
  {
    "text": "cube and E that's from another exercise but these are so much some more commands",
    "start": "2353640",
    "end": "2358980"
  },
  {
    "text": "where you might want to scan for particular ranges this range here is you might say it's probably a bit a bit",
    "start": "2358980",
    "end": "2365190"
  },
  {
    "text": "large but it gives you an idea of the syntax so that you can use it to scan for example the 30,000 range",
    "start": "2365190",
    "end": "2372860"
  },
  {
    "text": "and then I guess once you find some workload there may be something about",
    "start": "2377079",
    "end": "2384109"
  },
  {
    "text": "the way as well let me have to be too much hints",
    "start": "2384109",
    "end": "2389109"
  },
  {
    "text": "Oh",
    "start": "2447730",
    "end": "2449760"
  },
  {
    "text": "something in minds",
    "start": "2504830",
    "end": "2507790"
  },
  {
    "text": "and anything any interesting workloads there's",
    "start": "2528170",
    "end": "2535150"
  },
  {
    "text": "cool we have found some what appears to be nginx in some cases yeah",
    "start": "2535430",
    "end": "2542740"
  },
  {
    "text": "um",
    "start": "2547170",
    "end": "2549589"
  },
  {
    "text": "anyone who has found a work load and then has made a request to it found anything interesting yeah what what was",
    "start": "2553580",
    "end": "2563430"
  },
  {
    "text": "the interesting thing that you found",
    "start": "2563430",
    "end": "2566480"
  },
  {
    "text": "Burrell which is a contrived hint as to what you should do next",
    "start": "2571820",
    "end": "2579170"
  },
  {
    "text": "yep sorry",
    "start": "2589890",
    "end": "2596289"
  },
  {
    "text": "- temp - flag just a message whatever",
    "start": "2598410",
    "end": "2607869"
  },
  {
    "text": "message like hello or whatever you wanna tell us",
    "start": "2607869",
    "end": "2612810"
  },
  {
    "text": "I think they found something in that day",
    "start": "2621680",
    "end": "2625660"
  },
  {
    "text": "so the the hint that it gives you is a link to a CVE from memory for",
    "start": "2635630",
    "end": "2644000"
  },
  {
    "text": "shell-shocked which is a vulnerability",
    "start": "2644000",
    "end": "2649580"
  },
  {
    "text": "that you can eat well in this case that you're able to use to exploit to break",
    "start": "2649580",
    "end": "2656280"
  },
  {
    "text": "city get get shell into the container basically so that hint the obviously it's not really representative in the",
    "start": "2656280",
    "end": "2662550"
  },
  {
    "text": "real in the real world of something quite so it's only quite so clear but you will generally find hints of what",
    "start": "2662550",
    "end": "2670020"
  },
  {
    "text": "kind of service that is and then you think of what kind of attacks you can make on it this is more of a knapsack thing I guess but we'll get into the",
    "start": "2670020",
    "end": "2676590"
  },
  {
    "text": "container implications on spaghetti oh",
    "start": "2676590",
    "end": "2680210"
  },
  {
    "text": "can you beat on the host so nothing the container on the host on the node no and",
    "start": "2686540",
    "end": "2696240"
  },
  {
    "text": "yeah so important to to mention so try to send this file on the worker node so",
    "start": "2696240",
    "end": "2703920"
  },
  {
    "text": "outside of a container which we've not",
    "start": "2703920",
    "end": "2709320"
  },
  {
    "text": "yet given you well-liked sufficient hints to do that but for the advanced among you you may be there",
    "start": "2709320",
    "end": "2716240"
  },
  {
    "text": "okay so for those who were able to get shell into that container via shell",
    "start": "2746470",
    "end": "2752420"
  },
  {
    "text": "shock I will give you some more commands",
    "start": "2752420",
    "end": "2757940"
  },
  {
    "text": "that are useful to copy paste after this but the next thing you want to do once you've gained the foothold is to pivots",
    "start": "2757940",
    "end": "2764000"
  },
  {
    "text": "to find somewhere else you can get and see what you can reach once you're in ok",
    "start": "2764000",
    "end": "2771200"
  },
  {
    "text": "cool will come and verify that in a moment or we can do it from here what's your team name well cover that after this so",
    "start": "2771200",
    "end": "2782080"
  },
  {
    "text": "you want to look at what you can get to from there so that's going to be basically looking around and seeing what",
    "start": "2782080",
    "end": "2787340"
  },
  {
    "text": "you have access to and this information",
    "start": "2787340",
    "end": "2792590"
  },
  {
    "text": "may be useful also the how do I change",
    "start": "2792590",
    "end": "2797660"
  },
  {
    "text": "tabs down",
    "start": "2797660",
    "end": "2805780"
  },
  {
    "text": "so these commands from earlier you you are using them earlier to okay we'll",
    "start": "2813820",
    "end": "2820780"
  },
  {
    "text": "come to you in a sec we're using these commands earlier to scan the the notes from the outside and you will likely",
    "start": "2820780",
    "end": "2827200"
  },
  {
    "text": "have found a note port that was open you can also use these to scan for what you",
    "start": "2827200",
    "end": "2833800"
  },
  {
    "text": "can access from inside the container so and map from that compromise workload",
    "start": "2833800",
    "end": "2840370"
  },
  {
    "text": "and see what you can reach and then have a look around a cluster from there",
    "start": "2840370",
    "end": "2846150"
  },
  {
    "text": "running nmap inside the container anyone find anything interesting yes button",
    "start": "2850890",
    "end": "2861690"
  },
  {
    "text": "this is very good and what did you use",
    "start": "2861690",
    "end": "2867670"
  },
  {
    "text": "to find that",
    "start": "2867670",
    "end": "2870180"
  },
  {
    "text": "you probably want to have a look at what's mounted into that container might be something interesting mounted in",
    "start": "2898300",
    "end": "2903650"
  },
  {
    "text": "there maybe some sort of powerful UNIX",
    "start": "2903650",
    "end": "2909109"
  },
  {
    "text": "socket with IP addresses and you're just",
    "start": "2909109",
    "end": "2921650"
  },
  {
    "text": "joining a team",
    "start": "2921650",
    "end": "2924309"
  },
  {
    "text": "and you look and you look in",
    "start": "2936820",
    "end": "2940780"
  },
  {
    "text": "and an 81 and if you don't have if you can't find anything let us know so that",
    "start": "2991230",
    "end": "2997770"
  },
  {
    "text": "we can look into it for you but yeah the polls you are looking for thirty thousand and eighty one",
    "start": "2997770",
    "end": "3005590"
  },
  {
    "text": "so the chatter on the",
    "start": "3027180",
    "end": "3031019"
  },
  {
    "text": "I might have to syntax around I'm not",
    "start": "3055710",
    "end": "3061440"
  },
  {
    "text": "super",
    "start": "3061440",
    "end": "3063859"
  },
  {
    "text": "[Music]",
    "start": "3105770",
    "end": "3108829"
  },
  {
    "text": "nmap scans there are some some of the things I deployed haven't worked so I can do it again for you particularly try",
    "start": "3135359",
    "end": "3142030"
  },
  {
    "text": "thirty thousand and eighty one you could",
    "start": "3142030",
    "end": "3147520"
  },
  {
    "text": "but",
    "start": "3147520",
    "end": "3149880"
  },
  {
    "text": "cheat sheets which is basically if you're having trouble doing the shell shop exploit to get a shell into",
    "start": "3167710",
    "end": "3173060"
  },
  {
    "text": "container you can use what's in here so our support scanning will have",
    "start": "3173060",
    "end": "3178700"
  },
  {
    "text": "identified thirty thousand and eighty one is got something running there when we curl it it tells us about",
    "start": "3178700",
    "end": "3185090"
  },
  {
    "text": "shell-shocked were like okay let's try that so this number one check shell-shocked is a curl command you can",
    "start": "3185090",
    "end": "3190700"
  },
  {
    "text": "use with obviously your host IP and it will thank you then you will start to",
    "start": "3190700",
    "end": "3199220"
  },
  {
    "text": "see okay I can find a way to get a shell from there and then now we can run scans",
    "start": "3199220",
    "end": "3207380"
  },
  {
    "text": "from within there to see what we can access what we can also do here is this",
    "start": "3207380",
    "end": "3221900"
  },
  {
    "text": "creation of this temp /k just shorthand for cube control so this is basically",
    "start": "3221900",
    "end": "3230740"
  },
  {
    "text": "downloading cube control so you can use it from there which is which is going to",
    "start": "3230980",
    "end": "3236090"
  },
  {
    "text": "be quite handy right okay",
    "start": "3236090",
    "end": "3243500"
  },
  {
    "text": "so then once you've done that what we want to start looking for next is look",
    "start": "3243500",
    "end": "3251600"
  },
  {
    "text": "at what mountains you will find that the docker socket is mounted in there which is a bit of a goldmine but you don't",
    "start": "3251600",
    "end": "3259040"
  },
  {
    "text": "have access to it right away or at least not that obviously what you'll then want",
    "start": "3259040",
    "end": "3265370"
  },
  {
    "text": "to do is yes so you'll want to think okay I am in",
    "start": "3265370",
    "end": "3273580"
  },
  {
    "text": "a container what how how contained am I what kind of how have I been locked down",
    "start": "3273580",
    "end": "3279369"
  },
  {
    "text": "what can I do from here there's a tool called a Meyer contained which you can",
    "start": "3279369",
    "end": "3284680"
  },
  {
    "text": "use this is in the cheat sheet as well that will that will give you some useful information about some of your avenues",
    "start": "3284680",
    "end": "3292119"
  },
  {
    "text": "for exploit from there so basically if you were in a situation where you had a Palmers that comp all this kind of stuff",
    "start": "3292119",
    "end": "3298270"
  },
  {
    "text": "all your syscalls blocks you kind of really like caged in right this will tell you the extent to which you are",
    "start": "3298270",
    "end": "3304330"
  },
  {
    "text": "caged in I suppose so that might be useful for you so you wanna basically",
    "start": "3304330",
    "end": "3317470"
  },
  {
    "text": "what you would love to discover is that you have you're a privileged user you can get route you can do what you want and you don't have much lockdown so am i",
    "start": "3317470",
    "end": "3325240"
  },
  {
    "text": "privileged am i container tell you that",
    "start": "3325240",
    "end": "3328920"
  },
  {
    "text": "yes but you need to mention that it's not in the container it's in the work enough yeah",
    "start": "3341340",
    "end": "3346390"
  },
  {
    "text": "you burn it",
    "start": "3346390",
    "end": "3348839"
  },
  {
    "text": "this is the first you may just come out",
    "start": "3413960",
    "end": "3423920"
  },
  {
    "text": "URI BIA they managed to capture the flag so let's quickly give it up and and",
    "start": "3440620",
    "end": "3450520"
  },
  {
    "text": "we'll continue with its giving everyone a chance to continue with the yeah with",
    "start": "3450520",
    "end": "3456010"
  },
  {
    "text": "the scenario and yeah let us know if you need any more help",
    "start": "3456010",
    "end": "3460829"
  },
  {
    "text": "in about five minutes should I stop the thing",
    "start": "3465350",
    "end": "3471800"
  },
  {
    "text": "such TMP",
    "start": "3505480",
    "end": "3508799"
  },
  {
    "text": "maybe minute you found another one you got the define",
    "start": "3560240",
    "end": "3567900"
  },
  {
    "text": "Oh okay well there's only five minutes",
    "start": "3567900",
    "end": "3574330"
  },
  {
    "text": "we're gonna show the salute in math but that's fine yeah we'll show you the",
    "start": "3574330",
    "end": "3579700"
  },
  {
    "text": "solution in about five minutes oh yeah",
    "start": "3579700",
    "end": "3590049"
  },
  {
    "text": "[Music]",
    "start": "3723100",
    "end": "3726199"
  },
  {
    "text": "as of time so just analysts has pushed some more things to the the same teach",
    "start": "3735830",
    "end": "3743240"
  },
  {
    "text": "sheet where you can find some of that stuff I was talking about before late",
    "start": "3743240",
    "end": "3748780"
  },
  {
    "text": "something you want to look for whenever you were able to get into a workload you see if there is a service account",
    "start": "3748780",
    "end": "3754820"
  },
  {
    "text": "mounted one thing to look for is you'll find that in run secrets if it's there",
    "start": "3754820",
    "end": "3762700"
  },
  {
    "text": "this is a reason to always make your are back read it really fine-grained really",
    "start": "3762700",
    "end": "3768170"
  },
  {
    "text": "tight tight don't give anyone access to things they don't need to if you're using if you're not using our back then",
    "start": "3768170",
    "end": "3773240"
  },
  {
    "text": "that service token is probably going to be really powerful so it's something to look for when you get in there and then we're using that",
    "start": "3773240",
    "end": "3782600"
  },
  {
    "text": "some people had asked some people that asked if they had got hold of a service",
    "start": "3782600",
    "end": "3788720"
  },
  {
    "text": "account what could they do with it and how to form that into a request that they can make to kubernetes so that's",
    "start": "3788720",
    "end": "3794540"
  },
  {
    "text": "how you can do that here we can use the queue control command that we created up above earlier you can find it in this",
    "start": "3794540",
    "end": "3801260"
  },
  {
    "text": "document slash attempt such k and then you can get past the token in like that and then you're able to see what kind of",
    "start": "3801260",
    "end": "3807470"
  },
  {
    "text": "requests you can make on the kubernetes server secrets is something the first",
    "start": "3807470",
    "end": "3813530"
  },
  {
    "text": "thing you want to look for although they're secret to be encrypted in that CD if your service account token and it allows you to get secrets god forbid",
    "start": "3813530",
    "end": "3820490"
  },
  {
    "text": "hopefully it doesn't then you won't you certainly one of the things you want to try now what we can do from there and",
    "start": "3820490",
    "end": "3828290"
  },
  {
    "text": "this in this scenario is grab some secrets out of there and then we can SSH",
    "start": "3828290",
    "end": "3834740"
  },
  {
    "text": "into the node alternate Lea it's all a bit contrived for what we're trying to highlight here is the kind of the kind",
    "start": "3834740",
    "end": "3843140"
  },
  {
    "text": "of process you can go through and what that teaches you about how to secure your clusters and in fact the kind of",
    "start": "3843140",
    "end": "3849610"
  },
  {
    "text": "the kind of vulnerabilities we've exploiters if you can even call them those they're sort of lazy",
    "start": "3849610",
    "end": "3855860"
  },
  {
    "text": "misconfigurations and there's a lot you can do to avoid",
    "start": "3855860",
    "end": "3861050"
  },
  {
    "text": "getting yourself into that situation this at the end of the slides you don't",
    "start": "3861050",
    "end": "3866660"
  },
  {
    "text": "have a slice to you will tweak them out after but there is a link a few useful links one of",
    "start": "3866660",
    "end": "3872000"
  },
  {
    "text": "which is this one by my colleague Andy on kubernetes blog which is basically",
    "start": "3872000",
    "end": "3878180"
  },
  {
    "text": "just like if you want to be given like a you know top end list of basic things",
    "start": "3878180",
    "end": "3883880"
  },
  {
    "text": "you can do to in your cluster to prevent to protect you against these kind of things then I think it covers up very well",
    "start": "3883880",
    "end": "3889820"
  },
  {
    "text": "it's basically well you can you can really for yourself I guess we haven't really got the time for it",
    "start": "3889820",
    "end": "3895940"
  },
  {
    "text": "some people had asked if they can get the the the docker image that was that",
    "start": "3895940",
    "end": "3905660"
  },
  {
    "text": "was vulnerable for the nginx one I will tell you that if you can open the docker",
    "start": "3905660",
    "end": "3911990"
  },
  {
    "text": "hub there please it might be a useful exercise for you to take back and",
    "start": "3911990",
    "end": "3917450"
  },
  {
    "text": "challenge your friends and family",
    "start": "3917450",
    "end": "3921609"
  },
  {
    "text": "by then whole of Kentico defame",
    "start": "3936589",
    "end": "3941800"
  },
  {
    "text": "it's called vulnerability has a service",
    "start": "3941800",
    "end": "3948890"
  },
  {
    "text": "CVE and with the number so that's the docker image that was running on that",
    "start": "3948890",
    "end": "3953900"
  },
  {
    "text": "node port someone also asked how would we know to craft that particular request",
    "start": "3953900",
    "end": "3958940"
  },
  {
    "text": "through the header probably wouldn't but it's nevertheless that's how that application works what else do I want to",
    "start": "3958940",
    "end": "3967520"
  },
  {
    "text": "tell you we'll make sure that all of those slides are available and we'll",
    "start": "3967520",
    "end": "3972680"
  },
  {
    "text": "clean up that cheat sheet so that is more clear of what we've done and how",
    "start": "3972680",
    "end": "3977960"
  },
  {
    "text": "we've done it and yeah you'll see all of the resources posted on the presentation and let us know if you have any",
    "start": "3977960",
    "end": "3985940"
  },
  {
    "text": "questions",
    "start": "3985940",
    "end": "3988420"
  },
  {
    "text": "particularly congratulations to you're",
    "start": "3995339",
    "end": "4001390"
  },
  {
    "text": "the one the start of an EU are [Laughter]",
    "start": "4001390",
    "end": "4007490"
  },
  {
    "text": "[Applause]",
    "start": "4007770",
    "end": "4011820"
  }
]