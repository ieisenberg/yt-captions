[
  {
    "text": "thank you for having us here and thank you for joining our talk today um we are",
    "start": "120",
    "end": "5680"
  },
  {
    "text": "very excited to present Network ACL Made Easy establishing zot trust Network",
    "start": "5680",
    "end": "11920"
  },
  {
    "text": "policies in a like just a few clicks I'm Juno and here's yungi today we're going",
    "start": "11920",
    "end": "18520"
  },
  {
    "text": "to guide you through the process of setting up zero trust Network policies",
    "start": "18520",
    "end": "23560"
  },
  {
    "text": "efficiently and effectively yeah um",
    "start": "23560",
    "end": "30279"
  },
  {
    "text": "here's our bios and Company bio thing so uh we're going to introduce ourselves",
    "start": "30279",
    "end": "36840"
  },
  {
    "text": "and um the expert expertise we bring to this topic our team at theory has a",
    "start": "36840",
    "end": "43920"
  },
  {
    "text": "strong background in the security innovation field um especially the",
    "start": "43920",
    "end": "49719"
  },
  {
    "text": "offensive security thing we have like over 70 wins in the international",
    "start": "49719",
    "end": "55559"
  },
  {
    "text": "hacking competition which called the CD app yeah you can play this City have experience in the next um room and also",
    "start": "55559",
    "end": "64640"
  },
  {
    "text": "uh one the most like um greatest hacking",
    "start": "64640",
    "end": "69920"
  },
  {
    "text": "competition which is called defon CF for like six times and we also find some",
    "start": "69920",
    "end": "76360"
  },
  {
    "text": "numerous verab abilities and reported across like various Global vendors such",
    "start": "76360",
    "end": "81759"
  },
  {
    "text": "as Google Microsoft Apple and also the cncf incubating project um such as the",
    "start": "81759",
    "end": "88280"
  },
  {
    "text": "Argo City and kubernetes",
    "start": "88280",
    "end": "91920"
  },
  {
    "text": "yeah and yeah this is our one of main topic so what is zero trust zero trust I",
    "start": "93320",
    "end": "101680"
  },
  {
    "text": "think everyone knows about the zero trust yeah um the security model um the",
    "start": "101680",
    "end": "108000"
  },
  {
    "text": "Zer security model is gaining traction as it shifts away from traditional parameter spased",
    "start": "108000",
    "end": "114320"
  },
  {
    "text": "security Zer architecture focuses on granual access control through two main",
    "start": "114320",
    "end": "119880"
  },
  {
    "text": "components the first one is Network level ACLS which is the simple file",
    "start": "119880",
    "end": "125399"
  },
  {
    "text": "rules inbound and outbound traffics and some additional authentication and",
    "start": "125399",
    "end": "130440"
  },
  {
    "text": "authorizations yeah we can um do the authentication and authorization through the mtls or access control I I mean the",
    "start": "130440",
    "end": "138640"
  },
  {
    "text": "access tokens and the HTTP headers or yeah some layer seven authentication",
    "start": "138640",
    "end": "144879"
  },
  {
    "text": "thing but our presentation will focus in establishing that label ACLS not the um",
    "start": "144879",
    "end": "152800"
  },
  {
    "text": "like layers sa authentication or authorization okay um we're going to",
    "start": "152800",
    "end": "158440"
  },
  {
    "text": "focus on establishing Network level AC ACLS from scratch which form the",
    "start": "158440",
    "end": "164560"
  },
  {
    "text": "foundational framework of jous architecture oh",
    "start": "164560",
    "end": "170040"
  },
  {
    "text": "sorry by the end of this session um I think you will get the first one you",
    "start": "170040",
    "end": "175360"
  },
  {
    "text": "will be equipped to utilize Network logs in the AWS INF infrastructure and the",
    "start": "175360",
    "end": "180959"
  },
  {
    "text": "second setup like initial firewall Ru sets um in this case this is the",
    "start": "180959",
    "end": "186400"
  },
  {
    "text": "security group groups and the AWS from scratch and manage them using a trapo",
    "start": "186400",
    "end": "193840"
  },
  {
    "text": "back terap back dashboard with some like Google spreadsheet thing so um this process is designed to",
    "start": "193840",
    "end": "201879"
  },
  {
    "text": "ensure adequate Automation and maintain performance from a ux perspective um I",
    "start": "201879",
    "end": "207480"
  },
  {
    "text": "think um I can say it it is more like developer P developer experience",
    "start": "207480",
    "end": "212959"
  },
  {
    "text": "perspective or like security managers or security engineer perspective who doesn't know much about the infrastr",
    "start": "212959",
    "end": "220360"
  },
  {
    "text": "infrastructure as it callede or just some like random CLI thing because we're going to use spread sheet to like",
    "start": "220360",
    "end": "229519"
  },
  {
    "text": "um making the security rules and like inbound and outbound rules things and um",
    "start": "229519",
    "end": "236200"
  },
  {
    "text": "finally it will help you understand your like your teams and your company's current network security postures on the",
    "start": "236200",
    "end": "242760"
  },
  {
    "text": "AWS infrastructure and lay the foundation for continuous monitoring and rules",
    "start": "242760",
    "end": "250120"
  },
  {
    "text": "updates and yeah I think everyone all in",
    "start": "251079",
    "end": "256199"
  },
  {
    "text": "the room might be like wondering why we have to make a security group who making",
    "start": "256199",
    "end": "264520"
  },
  {
    "text": "a security go boost as in AWS infrastructure automatic automatically so this is is our like motivation and",
    "start": "264520",
    "end": "271680"
  },
  {
    "text": "our like um team's goal on the project yeah because yeah we do the cyber",
    "start": "271680",
    "end": "279120"
  },
  {
    "text": "security Consulting um focus on the offensive security one but yeah one of",
    "start": "279120",
    "end": "284160"
  },
  {
    "text": "our customer um it was trying to obtain a cyber security compliance",
    "start": "284160",
    "end": "290639"
  },
  {
    "text": "certification in South Korea so um they encounter two main issues the first one",
    "start": "290639",
    "end": "297680"
  },
  {
    "text": "is constructing fine grain INB and outbound rules from scratch um is a little bit funny on our",
    "start": "297680",
    "end": "305400"
  },
  {
    "text": "like International standards but in South Korea um the question of the does",
    "start": "305400",
    "end": "311199"
  },
  {
    "text": "the company has a proper pipeline where a system to manage their network",
    "start": "311199",
    "end": "316919"
  },
  {
    "text": "security is the major criteria of the compliance certifications even the AWS",
    "start": "316919",
    "end": "323400"
  },
  {
    "text": "or the kubernetes St also yeah even the outbound rules and the second one is um",
    "start": "323400",
    "end": "331080"
  },
  {
    "text": "they have to map the firewall rule set Ru cells rule sets for 500 instances among the",
    "start": "331080",
    "end": "339919"
  },
  {
    "text": "multiple AWS accounts so they were like struggled with maintaining and making",
    "start": "339919",
    "end": "346240"
  },
  {
    "text": "rules say or among the among these 500 instances so it contains the kubernetes",
    "start": "346240",
    "end": "352800"
  },
  {
    "text": "nose and even just like um monolithic",
    "start": "352800",
    "end": "357840"
  },
  {
    "text": "ec2 instances so the first challenge what we um",
    "start": "357840",
    "end": "364759"
  },
  {
    "text": "encounter was addressed um by analyzing traffic to automatically generate",
    "start": "364759",
    "end": "370639"
  },
  {
    "text": "initial Wess and the second one is Tackle by introducing an infrastructure",
    "start": "370639",
    "end": "376720"
  },
  {
    "text": "as code solution with a unified dashboard for easier Management in this case the unified dashboard is this press",
    "start": "376720",
    "end": "384720"
  },
  {
    "text": " um as you know if the company uses a kubernetes",
    "start": "384720",
    "end": "390080"
  },
  {
    "text": "infrastructures only um I think it is easy to like manage their Network policy",
    "start": "390080",
    "end": "395720"
  },
  {
    "text": "and network rulle sets because there are a lot of like good Solutions such as like Calico armo ass cystic or solo IO",
    "start": "395720",
    "end": "404319"
  },
  {
    "text": "yeah they're also on the Showcase room so you can find out them yeah uh by",
    "start": "404319",
    "end": "409560"
  },
  {
    "text": "using that you can easily pre-populate the network policies based on the network traffic and the kubernetes",
    "start": "409560",
    "end": "416960"
  },
  {
    "text": "Clusters um however in our case the clients also heavily uses the AWS only",
    "start": "416960",
    "end": "425919"
  },
  {
    "text": "um infrastructures like the ec2 as I mentioned and some like RDS thing so um",
    "start": "425919",
    "end": "433800"
  },
  {
    "text": "we have to analyze the aws's tra the traffics among their like AWS",
    "start": "433800",
    "end": "440720"
  },
  {
    "text": "infrastructures so um after this talk it will be very helpful if your team or",
    "start": "440720",
    "end": "447680"
  },
  {
    "text": "your company uses the hybrid system system which um is using the kubernetes",
    "start": "447680",
    "end": "453479"
  },
  {
    "text": "and AWS infra in the uh same time yeah um this is our agenda which is",
    "start": "453479",
    "end": "462879"
  },
  {
    "text": "how we solve this problem and challenges in like um and finally we made some like",
    "start": "462879",
    "end": "469879"
  },
  {
    "text": "open source thing that um everyone can easily establish their security groups",
    "start": "469879",
    "end": "475479"
  },
  {
    "text": "and security rules in just a few clicks all um okay so the first part is how I'm",
    "start": "475479",
    "end": "484159"
  },
  {
    "text": "going to show how we analyze traffic inside the AWS architecture and second",
    "start": "484159",
    "end": "489360"
  },
  {
    "text": "one um I'm going to say how how we create and test bu ruless among the 500",
    "start": "489360",
    "end": "496960"
  },
  {
    "text": "instance and the third one is yeah attach Ruess to all AWS instances over",
    "start": "496960",
    "end": "504120"
  },
  {
    "text": "like 5002s and RDS and other like load balancers",
    "start": "504120",
    "end": "509919"
  },
  {
    "text": "and finally um we also discuss some like gas and optimizations for using terao",
    "start": "509919",
    "end": "516880"
  },
  {
    "text": "and like AWS infrastructures yeah it will be very fun so all Source CES are",
    "start": "516880",
    "end": "523320"
  },
  {
    "text": "available Avail available on our GitHub after this talk so you can yeah check",
    "start": "523320",
    "end": "530800"
  },
  {
    "text": "out okay um the um the first thing analyze the AWS traffic",
    "start": "530959",
    "end": "539920"
  },
  {
    "text": "yeah we have um the feature the AWS has a feature",
    "start": "540279",
    "end": "546600"
  },
  {
    "text": "to make the users can analyze their traffic among their instances which is",
    "start": "546600",
    "end": "552720"
  },
  {
    "text": "called VP VPC flow logs so it is a feature that enables you to capture",
    "start": "552720",
    "end": "559040"
  },
  {
    "text": "information about the IP traffic going to end from network interfaces in your",
    "start": "559040",
    "end": "564399"
  },
  {
    "text": "like VPC so if you want to capture the all um traffics among the bpcs then you",
    "start": "564399",
    "end": "571600"
  },
  {
    "text": "have to enable um the bpc flow LS for the every bpc",
    "start": "571600",
    "end": "579600"
  },
  {
    "text": "bpc um and it can be sent to like AWS Cloud watch logs or even the S3 or the",
    "start": "579680",
    "end": "588519"
  },
  {
    "text": "data fire holes we chose S3 for faster iteration and cost efficiency and we",
    "start": "588519",
    "end": "596000"
  },
  {
    "text": "collected VPC logs for 7 days because we didn't have much time to like finish",
    "start": "596000",
    "end": "601600"
  },
  {
    "text": "this work so yeah 7 days is like okay to us and sync them into an like isolated",
    "start": "601600",
    "end": "608079"
  },
  {
    "text": "machine because of the security purpose and established a new toing framework based on the data",
    "start": "608079",
    "end": "615839"
  },
  {
    "text": "set um we requested like 67 gigaby of logs",
    "start": "616680",
    "end": "623760"
  },
  {
    "text": "record it for seven days someone might be might think that",
    "start": "623760",
    "end": "630320"
  },
  {
    "text": "yeah 67 gab per seven days is not that much but yeah for us it is like hard to",
    "start": "630320",
    "end": "637880"
  },
  {
    "text": "analyze the entire LS like within the seconds or minutes because 67 gabes is",
    "start": "637880",
    "end": "644320"
  },
  {
    "text": "also like CES for us and this is the compressed thing so if we just",
    "start": "644320",
    "end": "651240"
  },
  {
    "text": "decompress the 67 GB it becomes around one terabyte yeah so it's huuse",
    "start": "651240",
    "end": "659480"
  },
  {
    "text": "and what we did is by compressing the logs and grouping them by ip/ Port we",
    "start": "659480",
    "end": "666680"
  },
  {
    "text": "reduced the size to one gabes I mean the bpc pl logs is just text based thing so",
    "start": "666680",
    "end": "672760"
  },
  {
    "text": "we have to optimize in like um some data structures that we can easily control",
    "start": "672760",
    "end": "679560"
  },
  {
    "text": "and manage and like manipulate so we wrote a bpc flow Lo",
    "start": "679560",
    "end": "685320"
  },
  {
    "text": "parser and aggreg aggregator in Rust so",
    "start": "685320",
    "end": "690639"
  },
  {
    "text": "we have to like Pro process around like 20 million lines per",
    "start": "690639",
    "end": "697920"
  },
  {
    "text": "seconds so um here's how we created the VPC flow log uh log parer so first we",
    "start": "698200",
    "end": "705440"
  },
  {
    "text": "aggregate the CSV files which is the output of the bpc PLS and split each",
    "start": "705440",
    "end": "711079"
  },
  {
    "text": "column then grouped by ip/ Port yeah it's super simple the format you um as",
    "start": "711079",
    "end": "717760"
  },
  {
    "text": "you can see it includes like Source address and destination address and yeah",
    "start": "717760",
    "end": "724000"
  },
  {
    "text": "and other things like um to we we have to leverage our like multiple core servers because",
    "start": "724000",
    "end": "731480"
  },
  {
    "text": "we have like um like 200 core servers in in house so we converted a four Loop to",
    "start": "731480",
    "end": "738800"
  },
  {
    "text": "like 4ore H and then into use use the into parer which is the um rust multi",
    "start": "738800",
    "end": "748760"
  },
  {
    "text": "Library is rayon feature so um it helps a lot to us to um make a multi um",
    "start": "748760",
    "end": "758240"
  },
  {
    "text": "multipress program to pass the um millions of million lines of code uh",
    "start": "758240",
    "end": "765040"
  },
  {
    "text": "logs so here's the simple demo video that pares",
    "start": "765040",
    "end": "772560"
  },
  {
    "text": "like 20 million like hundreds of millions lines per like seconds yeah",
    "start": "772560",
    "end": "778240"
  },
  {
    "text": "we'll see just using the",
    "start": "778240",
    "end": "783800"
  },
  {
    "text": "cargo yeah we just pared over like 80 million thing in just few",
    "start": "783800",
    "end": "790480"
  },
  {
    "text": "seconds and yeah I'm going to hand the mic over to yongi next as the upcoming",
    "start": "790480",
    "end": "796279"
  },
  {
    "text": "slides will delve deeper into the technical aspects so yeah here's",
    "start": "796279",
    "end": "803480"
  },
  {
    "text": "Yi um um okay uh yeah so uh uh thanks J for",
    "start": "807320",
    "end": "817920"
  },
  {
    "text": "the uh great intro um next we'll discuss about creating fire fire whees using our",
    "start": "817920",
    "end": "825199"
  },
  {
    "text": "dashboard and local simulation um we are introducing a new",
    "start": "825199",
    "end": "831839"
  },
  {
    "text": "dashboard in this slide We compare the current and desire state of world set",
    "start": "831839",
    "end": "837160"
  },
  {
    "text": "Management in fact aess UI is not very useful when it comes to managing many",
    "start": "837160",
    "end": "843360"
  },
  {
    "text": "security groups in many instances to update One Security Group we should visit Pages back and forth",
    "start": "843360",
    "end": "849639"
  },
  {
    "text": "between instances network interfaces and security groups to manage this we typically",
    "start": "849639",
    "end": "856199"
  },
  {
    "text": "introduce IAC Solutions like Tero uh we went on we went one step",
    "start": "856199",
    "end": "861759"
  },
  {
    "text": "further by writing UniFi dashboard we picked spreadsheet as a",
    "start": "861759",
    "end": "867959"
  },
  {
    "text": "proof of concept with still gives some level of interactivity and",
    "start": "867959",
    "end": "873600"
  },
  {
    "text": "visualization to create initial rul set we first wrote a SQL based script that",
    "start": "875040",
    "end": "881000"
  },
  {
    "text": "shows traffic not covered by our rule set the initial one is empty so it'll",
    "start": "881000",
    "end": "886440"
  },
  {
    "text": "show all traffics then we convert these logs into a spreadsheet based D dashboard which",
    "start": "886440",
    "end": "892800"
  },
  {
    "text": "serve us our Pro concept we'll see it on our next slide",
    "start": "892800",
    "end": "899440"
  },
  {
    "text": "building the Ruess consists of three steps first we write Ruess on spreadsheet based on based on the given",
    "start": "900120",
    "end": "908440"
  },
  {
    "text": "spreadsheet template then we connect them to AWS resources using names we also support",
    "start": "908440",
    "end": "915720"
  },
  {
    "text": "support Wild Card based name matching and then we also have variable",
    "start": "915720",
    "end": "921360"
  },
  {
    "text": "sheet uh expanded in later stages once we build a Wess we test them",
    "start": "921360",
    "end": "930519"
  },
  {
    "text": "locally in it involves simulating the new rules to see which connections are",
    "start": "930519",
    "end": "935600"
  },
  {
    "text": "still this dis",
    "start": "935600",
    "end": "938959"
  },
  {
    "text": "load the third step is applying the fire rules set to actual",
    "start": "941440",
    "end": "946680"
  },
  {
    "text": "instances we deploy a uh we deploy SEC groups with terraform to each",
    "start": "946680",
    "end": "954440"
  },
  {
    "text": "instance first we convert the West into terone config",
    "start": "955000",
    "end": "960199"
  },
  {
    "text": "and then use terone CLI to apply them to AWS instances to unload config into AWS",
    "start": "960199",
    "end": "966680"
  },
  {
    "text": "we first run the terapon plan command which Compares them which compares the",
    "start": "966680",
    "end": "971839"
  },
  {
    "text": "terapon config with the current state in AWS then the ter C records required",
    "start": "971839",
    "end": "978959"
  },
  {
    "text": "actions into a g file then run terone apply which",
    "start": "978959",
    "end": "986560"
  },
  {
    "text": "executes the actions from the plan it involves invoking AWS apis from the",
    "start": "986560",
    "end": "992680"
  },
  {
    "text": "plan to actually add security groups to the given AWS",
    "start": "992680",
    "end": "998480"
  },
  {
    "text": "account so why use tone well we can directly invoke a apis from the list of",
    "start": "999560",
    "end": "1005759"
  },
  {
    "text": "rules like using BTO library from python the reason was that we can",
    "start": "1005759",
    "end": "1011800"
  },
  {
    "text": "delegate State Management to terone without additional coding eort terap automatically compares the",
    "start": "1011800",
    "end": "1018560"
  },
  {
    "text": "local config with the actual status in the cloud so it makes us easy to write our",
    "start": "1018560",
    "end": "1025199"
  },
  {
    "text": "PC so let's move on to the demo showcasing the process from the spreadsheet to Tero and then to",
    "start": "1025959",
    "end": "1034679"
  },
  {
    "text": "AWS so the rulet is populated from the spreadsheet and the plan is",
    "start": "1036880",
    "end": "1042880"
  },
  {
    "text": "one and the actual group is added to AWS",
    "start": "1042880",
    "end": "1049039"
  },
  {
    "text": "after creating the Ruess we attach the new security groups and remove the old",
    "start": "1051440",
    "end": "1056960"
  },
  {
    "text": "ones by generating a list of aw CLI comments difference comments are uh",
    "start": "1056960",
    "end": "1063760"
  },
  {
    "text": "executed for ec2 RDS and elb instances ensuring that security groups are",
    "start": "1063760",
    "end": "1069880"
  },
  {
    "text": "correctly attached to each type of",
    "start": "1069880",
    "end": "1074160"
  },
  {
    "text": "resources during the build simulation and apply Loop of security groups our goal is to achieve some level",
    "start": "1075679",
    "end": "1083240"
  },
  {
    "text": "of compliance we first verify that our security groups are correctly attached",
    "start": "1083240",
    "end": "1088480"
  },
  {
    "text": "to all instances then we check that there are no R rules anymore so that all subnet",
    "start": "1088480",
    "end": "1095679"
  },
  {
    "text": "mask in the rule set become fine great enough we wrote some post check scripts",
    "start": "1095679",
    "end": "1101720"
  },
  {
    "text": "to help verifying this requirements if all checks pass and",
    "start": "1101720",
    "end": "1107240"
  },
  {
    "text": "everything works our jav",
    "start": "1107240",
    "end": "1111080"
  },
  {
    "text": "Stone now let's discuss some gachas and troubleshooting process uh throughout",
    "start": "1112960",
    "end": "1118159"
  },
  {
    "text": "the uh throughout applying our PC also we applied one hack to terraform",
    "start": "1118159",
    "end": "1124600"
  },
  {
    "text": "to make the iterations much faster so what could go wrong with the",
    "start": "1124600",
    "end": "1132480"
  },
  {
    "text": "in the process when implementing the PC there",
    "start": "1132480",
    "end": "1138280"
  },
  {
    "text": "is all always a risk of things being broken for example if our assumptions",
    "start": "1138280",
    "end": "1143919"
  },
  {
    "text": "some of our assumptions are incorrect or some or there are some implementation bugs then some instances could go down",
    "start": "1143919",
    "end": "1153840"
  },
  {
    "text": "immediately uh fortunately to us our client had staging and development",
    "start": "1153840",
    "end": "1160400"
  },
  {
    "text": "environments this allowed us to test and apply our framework gradually starting",
    "start": "1160400",
    "end": "1165720"
  },
  {
    "text": "uh starting with the dep staging and the production stage page also this approach enabled us to",
    "start": "1165720",
    "end": "1173240"
  },
  {
    "text": "conduct some scream test it is applying changes getting feedback and fixing",
    "start": "1173240",
    "end": "1179120"
  },
  {
    "text": "issues before moving to more critical environments after all it took uh 17",
    "start": "1179120",
    "end": "1185840"
  },
  {
    "text": "Buck fixes to get everything working",
    "start": "1185840",
    "end": "1189919"
  },
  {
    "text": "smoothly uh we encountered three major issues during our implementation first we discovered that",
    "start": "1191200",
    "end": "1198039"
  },
  {
    "text": "only up to five security groups are allowed per a instance uh a",
    "start": "1198039",
    "end": "1204840"
  },
  {
    "text": "interface second we had difficulty determining whether a connection in the",
    "start": "1204840",
    "end": "1210320"
  },
  {
    "text": "flow look was from a client or a server um and final one is our",
    "start": "1210320",
    "end": "1218159"
  },
  {
    "text": "deployment process in the iteration was too",
    "start": "1218159",
    "end": "1223360"
  },
  {
    "text": "slow let's look at each of these issues and how we address them",
    "start": "1223360",
    "end": "1230320"
  },
  {
    "text": "so the first problem our initial plan was to create one sec one a secet group",
    "start": "1231679",
    "end": "1238559"
  },
  {
    "text": "per given rul set group as shown here in the",
    "start": "1238559",
    "end": "1244400"
  },
  {
    "text": "spreadsheet however we quickly hit a limitation a only allows a maximum of",
    "start": "1244400",
    "end": "1250640"
  },
  {
    "text": "five security groups per network interface to work around this is this",
    "start": "1250640",
    "end": "1257200"
  },
  {
    "text": "issue we modify our approach so instead of uh dividing the r",
    "start": "1257200",
    "end": "1264200"
  },
  {
    "text": "set group into one Security Group we combine multiple groups into one secret group per",
    "start": "1264200",
    "end": "1270240"
  },
  {
    "text": "instance then we attach it them to its corresponding instance in a onetoone",
    "start": "1270240",
    "end": "1277600"
  },
  {
    "text": "relationship while this solved our immediate problem it's worth noting that we are still limited to uh about 300 M",
    "start": "1277600",
    "end": "1286720"
  },
  {
    "text": "voles per instance uh using five security groups in",
    "start": "1286720",
    "end": "1292158"
  },
  {
    "text": "total the second problem was uh this is a par isue so we should check if the",
    "start": "1293760",
    "end": "1300120"
  },
  {
    "text": "source address in our VPC flow looks point server or client to make a proper",
    "start": "1300120",
    "end": "1305840"
  },
  {
    "text": "server site W set the pro problem is that the VP flow",
    "start": "1305840",
    "end": "1311000"
  },
  {
    "text": "L format doesn't distinguish between client and server like this look",
    "start": "1311000",
    "end": "1317279"
  },
  {
    "text": "here also so the first look per connection is not guaranteed to point the client to server",
    "start": "1317279",
    "end": "1325480"
  },
  {
    "text": "connection so to solve this issue we implemented a set of heris sticks to",
    "start": "1325679",
    "end": "1331240"
  },
  {
    "text": "determine the source address is server or client so first for TCP connections we",
    "start": "1331240",
    "end": "1339080"
  },
  {
    "text": "can use the TCP Flex field and the flow log uh by looking for the SN flag to",
    "start": "1339080",
    "end": "1346400"
  },
  {
    "text": "identify the initiator we can ident identify the specific",
    "start": "1346400",
    "end": "1352120"
  },
  {
    "text": "logies for the client or for the server second we assume that Source",
    "start": "1352120",
    "end": "1358679"
  },
  {
    "text": "ports above specific Port were likely initiated by",
    "start": "1358679",
    "end": "1363799"
  },
  {
    "text": "clients because they are assigned as a f Port range and it is",
    "start": "1363799",
    "end": "1370880"
  },
  {
    "text": "around 30 uh 30,000 in a",
    "start": "1370880",
    "end": "1376440"
  },
  {
    "text": "Linux um we also assume that the more heavily used Port between source and uh",
    "start": "1376440",
    "end": "1382760"
  },
  {
    "text": "destination Port was more likely to be a server server p uh using these teristics we swapped",
    "start": "1382760",
    "end": "1390480"
  },
  {
    "text": "source and destination uh on aggregation stage to make the vpg flow aggregation",
    "start": "1390480",
    "end": "1399600"
  },
  {
    "text": "consistent um one cave out of this approach is that some network network",
    "start": "1399600",
    "end": "1405279"
  },
  {
    "text": "scanners uh that scan some vulnerab uh to the externally faced",
    "start": "1405279",
    "end": "1412600"
  },
  {
    "text": "interfaces set their Source port to some known ports ports like uh 80 and uh",
    "start": "1412600",
    "end": "1421559"
  },
  {
    "text": "443 which is the HTTP server Port so we have to be care careful with",
    "start": "1421559",
    "end": "1428480"
  },
  {
    "text": "this heris stick because we can wrongly add some scanner host uh if we don't",
    "start": "1428480",
    "end": "1435279"
  },
  {
    "text": "take this take this account",
    "start": "1435279",
    "end": "1439760"
  },
  {
    "text": "um our final major issue was slow deployment speed after finding that our initial",
    "start": "1441559",
    "end": "1447760"
  },
  {
    "text": "heris stics were sufficient we needed to add or remove more firewall permissions",
    "start": "1447760",
    "end": "1453400"
  },
  {
    "text": "based on customers feedback then we found that the terone",
    "start": "1453400",
    "end": "1458840"
  },
  {
    "text": "plan command went much slower than we anticipated for example if we add 50 rul",
    "start": "1458840",
    "end": "1465240"
  },
  {
    "text": "set from a thousand rul set terone would make a thousand LOF request to AWS and",
    "start": "1465240",
    "end": "1471640"
  },
  {
    "text": "50 generative requests however due to a side rate",
    "start": "1471640",
    "end": "1477840"
  },
  {
    "text": "limit this could delay deployments by about 10",
    "start": "1477840",
    "end": "1483320"
  },
  {
    "text": "minutes it's worth noting that this issue has been known since 2017 it's",
    "start": "1484360",
    "end": "1489760"
  },
  {
    "text": "still an open issue in terap because it requires a structural structural change",
    "start": "1489760",
    "end": "1495440"
  },
  {
    "text": "to tform itself to address the slow deployment speed we",
    "start": "1495440",
    "end": "1502960"
  },
  {
    "text": "asked ourself can we reduce those quy requests uh can we reduce this quy",
    "start": "1502960",
    "end": "1508840"
  },
  {
    "text": "request into one request the idea is that you can actually get all 1,000",
    "start": "1508840",
    "end": "1514399"
  },
  {
    "text": "security groups at at once and filter them locally so we created a caching layer to",
    "start": "1514399",
    "end": "1521200"
  },
  {
    "text": "terraform by introducing a HTTP proxy between tform and",
    "start": "1521200",
    "end": "1526279"
  },
  {
    "text": "AWS uh we internally called this to AWS terapon boost uh and it reduces a 999 qu request",
    "start": "1526279",
    "end": "1538559"
  },
  {
    "text": "here um at this point I'd like to demonstrate this tool in action showing how it speeds of the terraform plan",
    "start": "1539720",
    "end": "1547080"
  },
  {
    "text": "process so first we run the terap plan without the uh without our boost",
    "start": "1547080",
    "end": "1555559"
  },
  {
    "text": "proxy we first one the plan command uh for 30",
    "start": "1556960",
    "end": "1563398"
  },
  {
    "text": "second but even after 30 seconds the plan command still does not",
    "start": "1564760",
    "end": "1571440"
  },
  {
    "text": "end it is because of the AWS rate",
    "start": "1571440",
    "end": "1576600"
  },
  {
    "text": "limiting",
    "start": "1578480",
    "end": "1581480"
  },
  {
    "text": "so yeah we just interrupted command and we on the plan stage with the with our",
    "start": "1584520",
    "end": "1592279"
  },
  {
    "text": "proxy then the plan step gets much faster and after a few seconds the plan",
    "start": "1592279",
    "end": "1599520"
  },
  {
    "text": "stays complet and shows the required action to",
    "start": "1599520",
    "end": "1604759"
  },
  {
    "text": "us so let's wrap up we'll discuss what we didn't like and how can we improve",
    "start": "1607559",
    "end": "1613120"
  },
  {
    "text": "during the PC stage so here's an overview of the",
    "start": "1613120",
    "end": "1619000"
  },
  {
    "text": "entire system first we start by collecting Vish flow LS into S3",
    "start": "1619000",
    "end": "1624120"
  },
  {
    "text": "bucket then we analyze this traffic data grouping it by ipn Port using our rust",
    "start": "1624120",
    "end": "1629799"
  },
  {
    "text": "based program next we build and simulate our rul set using",
    "start": "1629799",
    "end": "1635600"
  },
  {
    "text": "spreadsheet and then we import this R set into trackform generating TF configuration",
    "start": "1635600",
    "end": "1641760"
  },
  {
    "text": "files finally we apply these configurations to our instances using",
    "start": "1641760",
    "end": "1647159"
  },
  {
    "text": "trone accelerated by our a terapon boost tool written in go",
    "start": "1647159",
    "end": "1653399"
  },
  {
    "text": "language the whole process allows us to go from World Network looks to implement",
    "start": "1653399",
    "end": "1658600"
  },
  {
    "text": "secret groups in a structured efficient",
    "start": "1658600",
    "end": "1662840"
  },
  {
    "text": "manner while our solution uh might be effective uh it does have some",
    "start": "1664279",
    "end": "1670519"
  },
  {
    "text": "limitations first uh the IP address keep changing uh it this affects both intern",
    "start": "1670519",
    "end": "1678320"
  },
  {
    "text": "IPS in VPC and exter external",
    "start": "1678320",
    "end": "1683639"
  },
  {
    "text": "IPS for example for the internal IPS AWS has a feature called Autos scaling",
    "start": "1683679",
    "end": "1690440"
  },
  {
    "text": "groups which creates the instances um automatically in",
    "start": "1690440",
    "end": "1698480"
  },
  {
    "text": "VPC and for the external IP case uh there there are some changing uh inbound",
    "start": "1698760",
    "end": "1705919"
  },
  {
    "text": "address when we use some prox Solutions like Cloud flare and for the outbound for the",
    "start": "1705919",
    "end": "1713559"
  },
  {
    "text": "outbound connection if the client uses a domain based connection that does some DNS look up",
    "start": "1713559",
    "end": "1721440"
  },
  {
    "text": "and gets IP address and then connects then the IP address can",
    "start": "1721440",
    "end": "1727000"
  },
  {
    "text": "change to work around this issue uh for external IPS we can manage",
    "start": "1727000",
    "end": "1733600"
  },
  {
    "text": "external IPS in domain level so",
    "start": "1733600",
    "end": "1739200"
  },
  {
    "text": "a plus fire will actually supports this but it is much more expensive for uh than the secret group so for this for",
    "start": "1739200",
    "end": "1747919"
  },
  {
    "text": "this PC we done this manually using the V",
    "start": "1747919",
    "end": "1753440"
  },
  {
    "text": "vares uh so if the uh referred domain is updated the V sheet is updated and then",
    "start": "1753440",
    "end": "1760640"
  },
  {
    "text": "the new rules are applied for the internal IP uh there are",
    "start": "1760640",
    "end": "1766360"
  },
  {
    "text": "two solutions first is using the security groups as",
    "start": "1766360",
    "end": "1771440"
  },
  {
    "text": "source and destination address uh a support this and it allows",
    "start": "1771440",
    "end": "1777320"
  },
  {
    "text": "fine grain Network ACS without specifying internal",
    "start": "1777320",
    "end": "1782480"
  },
  {
    "text": "IPS if it is not possible somehow like it is cross cross soft net or cross um",
    "start": "1782480",
    "end": "1790120"
  },
  {
    "text": "cross count the corresponding subnet can be specified instead",
    "start": "1790120",
    "end": "1797600"
  },
  {
    "text": "uh looking ahead we see several areas for potential improvement from our",
    "start": "1799360",
    "end": "1805000"
  },
  {
    "text": "work first our aggregator could be replaced with some cots ETL Solutions",
    "start": "1805000",
    "end": "1811880"
  },
  {
    "text": "like snowflake click house and duck DB instead of manually writing the r",
    "start": "1811880",
    "end": "1818320"
  },
  {
    "text": "programs uh because there uh because they support CSP as the data",
    "start": "1818320",
    "end": "1824240"
  },
  {
    "text": "source uh I think it it can actually work",
    "start": "1824240",
    "end": "1829919"
  },
  {
    "text": "and more resarch types can be supported at in the Boost tool currently",
    "start": "1829919",
    "end": "1836960"
  },
  {
    "text": "we only support Security Group rules resources then for the",
    "start": "1836960",
    "end": "1842960"
  },
  {
    "text": "dashboard uh currently we are using Google spreadsheet but I think we can",
    "start": "1842960",
    "end": "1848320"
  },
  {
    "text": "add some fancy UI instead of using the spreadsh sheet and we need to address the",
    "start": "1848320",
    "end": "1855519"
  },
  {
    "text": "maintenance con good M Main cost of our One to1 aggregated Security",
    "start": "1855519",
    "end": "1861519"
  },
  {
    "text": "groups uh they are actually not fully compatible with some existing security",
    "start": "1861519",
    "end": "1868720"
  },
  {
    "text": "workflows like uh there are a bunch of security rules that will uh that is",
    "start": "1868720",
    "end": "1873840"
  },
  {
    "text": "created for security security group they are all expanded and applied per",
    "start": "1873840",
    "end": "1880240"
  },
  {
    "text": "instance that might be not very convenient for some manual fixes after",
    "start": "1880240",
    "end": "1885519"
  },
  {
    "text": "this ideally uh each of the rule set could be",
    "start": "1885519",
    "end": "1892240"
  },
  {
    "text": "Port can be ported into connections between security groups instead of",
    "start": "1892240",
    "end": "1897519"
  },
  {
    "text": "ips five we can further uh reduce S3 Quest by using S3",
    "start": "1897519",
    "end": "1905320"
  },
  {
    "text": "bpc endpoint um for the initial PC we pulled",
    "start": "1905320",
    "end": "1910960"
  },
  {
    "text": "all of the VPC flow looks from S3 to our isolated machine outside the CL outside",
    "start": "1910960",
    "end": "1916399"
  },
  {
    "text": "the a cloud and it will cost some band R cost but by",
    "start": "1916399",
    "end": "1922399"
  },
  {
    "text": "using S3 bpc end point uh the cost will greatly reduce and recently AWS introduced a",
    "start": "1922399",
    "end": "1930960"
  },
  {
    "text": "notion of zero ETL uh and it says that there are some zero",
    "start": "1930960",
    "end": "1937679"
  },
  {
    "text": "copy way of uh constructing the ETL from directly from",
    "start": "1937679",
    "end": "1943039"
  },
  {
    "text": "S3 and we can compress the compress uh and we can store the compressed looks uh",
    "start": "1943039",
    "end": "1950399"
  },
  {
    "text": "which is agre aggregated by the r script for use",
    "start": "1950399",
    "end": "1955840"
  },
  {
    "text": "reuse um that's it for our presentation uh thank you for listening",
    "start": "1957440",
    "end": "1963690"
  },
  {
    "text": "[Applause]",
    "start": "1963690",
    "end": "1967868"
  }
]