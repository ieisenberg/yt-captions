[
  {
    "text": "okay hello it's 11:30 um let's get",
    "start": "4170",
    "end": "10210"
  },
  {
    "text": "started thank you for coming first off I know there's a lot of stuff going on at coop con and I love coming to these",
    "start": "10210",
    "end": "16030"
  },
  {
    "text": "things this is my second one I'm gonna talk today about kubernetes",
    "start": "16030",
    "end": "22650"
  },
  {
    "text": "configuration customization my name is Jeff Reagan I have been working on open",
    "start": "22650",
    "end": "28359"
  },
  {
    "text": "source kubernetes for about a year and a half now I work on the apps lifecycle team at Google and we concern ourselves",
    "start": "28359",
    "end": "35410"
  },
  {
    "text": "with things like how do we do updates how do we make developer tools how do we",
    "start": "35410",
    "end": "40840"
  },
  {
    "text": "write controllers and how do we configure clusters so the gentleman in",
    "start": "40840",
    "end": "46989"
  },
  {
    "text": "the lower right is Brian grant he's a principal engineer at Google and he's one of the cofounders of kubernetes and",
    "start": "46989",
    "end": "52960"
  },
  {
    "text": "he maintains this spreadsheet that shows tools that are used to configure",
    "start": "52960",
    "end": "59170"
  },
  {
    "text": "kubernetes he's been maintaining this for a couple years now I don't know if he still keeps doing it it's intentionally too small to read and it",
    "start": "59170",
    "end": "65620"
  },
  {
    "text": "goes down below the page here there's actually a link to it if you're interested up at the top this shows you",
    "start": "65620",
    "end": "73630"
  },
  {
    "text": "that configuring kubernetes is not a done deal it's not something that everybody agrees on and people are still",
    "start": "73630",
    "end": "79210"
  },
  {
    "text": "writing new tools to help manage it but if you look at all these tools you see",
    "start": "79210",
    "end": "85810"
  },
  {
    "text": "they have features and long various dimensions okay so some of them talk about applications some of them talk",
    "start": "85810",
    "end": "92560"
  },
  {
    "text": "about you know what is an application taking a bunch of resources calling an application describing it and maybe you",
    "start": "92560",
    "end": "98740"
  },
  {
    "text": "have a maintainer of that app then there's going to be things like app discovery like an app store if you have",
    "start": "98740",
    "end": "103780"
  },
  {
    "text": "an application maybe you need a place to go get it download it so on package management you've got a bunch of",
    "start": "103780",
    "end": "110020"
  },
  {
    "text": "resources how do i bundle it up how do I describe the dependency of this bundle on this other bundle over here dashboard",
    "start": "110020",
    "end": "117670"
  },
  {
    "text": "stuff whoo that's loud dashboard e stuff which apps am i running how long have",
    "start": "117670",
    "end": "124360"
  },
  {
    "text": "they been running are they healthy life cycle management rollouts roll up roll",
    "start": "124360",
    "end": "129670"
  },
  {
    "text": "backs and upgrades and customization given some set of some configuration how",
    "start": "129670",
    "end": "135760"
  },
  {
    "text": "do I adapt it to my needs right okay so that's what I'm gonna focus on just that",
    "start": "135760",
    "end": "141189"
  },
  {
    "text": "part customize is the command-line utility it closes several old kou cuddle",
    "start": "141189",
    "end": "147459"
  },
  {
    "text": "issues and it composes with other tools it's sponsored by cig CLI and we've been working on it for about six months or so",
    "start": "147459",
    "end": "155849"
  },
  {
    "text": "this is what it looks like you say customize build and then you give a name of a directory and that's gonna spit out",
    "start": "155849",
    "end": "162909"
  },
  {
    "text": "a mo to stand it out and then you can pipe that into coop level apply or you can",
    "start": "162909",
    "end": "167980"
  },
  {
    "text": "stick it into version control and then pipe it to coop cuddle apply later that",
    "start": "167980",
    "end": "173470"
  },
  {
    "text": "directory looks like this I'll do a little toy example there's three conventional resources in there a config",
    "start": "173470",
    "end": "180310"
  },
  {
    "text": "map deployment and a service there's nothing weird about those things just standard yeah mo and you drop in another",
    "start": "180310",
    "end": "187510"
  },
  {
    "text": "file called customization yeah mo right which also looks like a kubernetes resource here is a toy example of what",
    "start": "187510",
    "end": "197470"
  },
  {
    "text": "the customization file looks like so in this case there is a resource of stanza",
    "start": "197470",
    "end": "203109"
  },
  {
    "text": "that's that gives a list of files below it there's one file here service dog ammo and there is a name free fix",
    "start": "203109",
    "end": "210400"
  },
  {
    "text": "specified it says demo - okay all this is doing is saying open the service demo",
    "start": "210400",
    "end": "215919"
  },
  {
    "text": "file reading the information there find the name change the name by putting a prefix in front of it and then send that",
    "start": "215919",
    "end": "222489"
  },
  {
    "text": "to standard out that's it toy example this tool is about",
    "start": "222489",
    "end": "229599"
  },
  {
    "text": "kubernetes aware patching okay it's just patching so the customization file has",
    "start": "229599",
    "end": "237579"
  },
  {
    "text": "two things in it generally operands these are the things that you want to include in your output and some of those",
    "start": "237579",
    "end": "243340"
  },
  {
    "text": "things are gonna get patched and it has operations these are the ways you're",
    "start": "243340",
    "end": "249790"
  },
  {
    "text": "going to patch those operands yo I saw one example which was appended name prefix to all of the names it works sort",
    "start": "249790",
    "end": "258070"
  },
  {
    "text": "of like this you've got a cluster out there you're gonna send a stream of amyl to that cluster via coop cuddle apply",
    "start": "258070",
    "end": "264360"
  },
  {
    "text": "there's gonna be a bunch of operands coming in from the from the left these are the resources that you're the",
    "start": "264360",
    "end": "269800"
  },
  {
    "text": "that you're operating on and then you're gonna like operate on them you're gonna patch them in this case you did a name prefix change now it's possible since",
    "start": "269800",
    "end": "278500"
  },
  {
    "text": "customized weeds and yeah MO and write see mo out to send the output of customized into customized again for",
    "start": "278500",
    "end": "286030"
  },
  {
    "text": "further customization and there's practical reasons to do this which we'll discuss in the next in the first example",
    "start": "286030",
    "end": "292449"
  },
  {
    "text": "here so just want to pause and mention again or emphasize customized input is",
    "start": "292449",
    "end": "298840"
  },
  {
    "text": "caba√±a GMO you can coop cuddle apply that yeah more without customized to",
    "start": "298840",
    "end": "304479"
  },
  {
    "text": "start customizing you just add a customization file ok everybody has a",
    "start": "304479",
    "end": "311979"
  },
  {
    "text": "use case that's similar to this you have multiple variants multiple and environments that you want to maintain",
    "start": "311979",
    "end": "318759"
  },
  {
    "text": "and those environments have most most things are in common you've got in this",
    "start": "318759",
    "end": "325090"
  },
  {
    "text": "case we're going to talk about three environments or three variants development staging and production so",
    "start": "325090",
    "end": "331030"
  },
  {
    "text": "development is something where you're going to send say an hourly build of your server to the cluster every hour",
    "start": "331030",
    "end": "340029"
  },
  {
    "text": "and staging is where you're going to say I'm going to take one of those QA builds one of the one of the builds from",
    "start": "340029",
    "end": "346240"
  },
  {
    "text": "development that have been modified or that have been signed off by QA and I'm gonna send it to staging and staging as",
    "start": "346240",
    "end": "351909"
  },
  {
    "text": "a place where we're going to test it with real traffic maybe 1% of traffic and then if that works well we're going",
    "start": "351909",
    "end": "359199"
  },
  {
    "text": "to take that image and all of its configuration and send it to production so managing 3 variants that Hottel have",
    "start": "359199",
    "end": "367120"
  },
  {
    "text": "a lot of things in common that's what customized is good at ok",
    "start": "367120",
    "end": "373469"
  },
  {
    "text": "let me just mention here that the difference between project production here has say three thousand replicas",
    "start": "375060",
    "end": "381850"
  },
  {
    "text": "have more CPU usage and a specific image the other guys have they're using far",
    "start": "381850",
    "end": "388030"
  },
  {
    "text": "less resources and they're also running different images and that's it everything else is the same so you could",
    "start": "388030",
    "end": "398050"
  },
  {
    "text": "do this with the following setup you have one customization final here that's",
    "start": "398050",
    "end": "403600"
  },
  {
    "text": "listing all of the resource yamo that you're going to use in all of your environments and then you have",
    "start": "403600",
    "end": "409240"
  },
  {
    "text": "three more customization files one for each variant production staging and",
    "start": "409240",
    "end": "414389"
  },
  {
    "text": "development now at the top is development that specifies let's do a",
    "start": "414389",
    "end": "420070"
  },
  {
    "text": "name prefix of dev right that's all we're gonna do there I'll explain the basis line in a second staging we're",
    "start": "420070",
    "end": "427630"
  },
  {
    "text": "going to have a different prefix and we're going to say let's use the image",
    "start": "427630",
    "end": "432880"
  },
  {
    "text": "tagged with QA because it's been qualified by QA and in production we're",
    "start": "432880",
    "end": "438099"
  },
  {
    "text": "going to use a name prefix prod so that's going to distinguish those",
    "start": "438099",
    "end": "443440"
  },
  {
    "text": "resources from all the other staging and development resources and we're going to use a specific image because this",
    "start": "443440",
    "end": "449409"
  },
  {
    "text": "production we want to know exactly what we're running and that's it you've got three variants what does that look like",
    "start": "449409",
    "end": "456940"
  },
  {
    "text": "on disk and what does that dot dot slash dot dot slash base main okay the file",
    "start": "456940",
    "end": "463419"
  },
  {
    "text": "layout is like this let's imagine the app is called WordPress WordPress and it describes it subscribed by it like just",
    "start": "463419",
    "end": "470889"
  },
  {
    "text": "these two resource files a deployment and a service so in the directory up",
    "start": "470889",
    "end": "477400"
  },
  {
    "text": "there we have a we have a directory called WordPress that holds our app we have a subdirectory called base in the",
    "start": "477400",
    "end": "482979"
  },
  {
    "text": "base as two files there are two resource files and there's also a small file in V dot txt that has some name value pairs",
    "start": "482979",
    "end": "489789"
  },
  {
    "text": "that we're going to use to generate a config map now the customization file in",
    "start": "489789",
    "end": "495520"
  },
  {
    "text": "that directory is saying use deployment news service and generate a config map",
    "start": "495520",
    "end": "501550"
  },
  {
    "text": "from this simple text file that's it that's what's in that directory",
    "start": "501550",
    "end": "507389"
  },
  {
    "text": "now how do we generate production now",
    "start": "507389",
    "end": "512828"
  },
  {
    "text": "look on the right in the there's another sibling directory to base called overlays inside overlay those three sub",
    "start": "512829",
    "end": "519430"
  },
  {
    "text": "directories production staging and development in the production directory of another customization file this file",
    "start": "519430",
    "end": "526810"
  },
  {
    "text": "is going to say this file is going to get all of its it's going to use the",
    "start": "526810",
    "end": "532540"
  },
  {
    "text": "base which is the sibling directory it's going to get the deployment and the the service and the config map that are in",
    "start": "532540",
    "end": "538930"
  },
  {
    "text": "that directory and it's going to apply to patches one patch is going to change",
    "start": "538930",
    "end": "544000"
  },
  {
    "text": "the replica count because we're going to a production we want to have a lot more replicas and it's going to crank up the",
    "start": "544000",
    "end": "549100"
  },
  {
    "text": "same resource allocation just kind of simple right how do I deploy that with",
    "start": "549100",
    "end": "559269"
  },
  {
    "text": "this command you say customize build and then you specify the directory from which you're going to get the customization in this case the",
    "start": "559269",
    "end": "565870"
  },
  {
    "text": "production directory and then you can just pipe that to cuddle apply staging",
    "start": "565870",
    "end": "571870"
  },
  {
    "text": "you might imagine is similar we're just going to go use that customization and we're going to pipe that to coop could",
    "start": "571870",
    "end": "578050"
  },
  {
    "text": "look like so how does this work let me",
    "start": "578050",
    "end": "583509"
  },
  {
    "text": "run you through all of the source code for customize now it's just these seven steps when you run customize world-first",
    "start": "583509",
    "end": "591430"
  },
  {
    "text": "customize has to understand how to read kubernetes objects so it weaves in some information or it uses hard coded",
    "start": "591430",
    "end": "597579"
  },
  {
    "text": "information so that it understands what the deployment is understands what a service is what a pod disruption budget",
    "start": "597579",
    "end": "602920"
  },
  {
    "text": "is etc let's step one step two it's gonna read the customization file from",
    "start": "602920",
    "end": "608079"
  },
  {
    "text": "the target that you specified on the command line step three it's going to look in that",
    "start": "608079",
    "end": "614589"
  },
  {
    "text": "customization file for the basis line and it's going to customize all the bases so this is a recursive step that",
    "start": "614589",
    "end": "622439"
  },
  {
    "text": "customization is going to come in and be customized again based on what you're seeing in the target directory the",
    "start": "622439",
    "end": "629649"
  },
  {
    "text": "fourth step is it's going to load the files that are in the target directory that are specified in the customization",
    "start": "629649",
    "end": "635709"
  },
  {
    "text": "file at that level now then we get to the the actual",
    "start": "635709",
    "end": "641510"
  },
  {
    "text": "transformation we're going to go through all of the resources that we've collected both reading directly from the",
    "start": "641510",
    "end": "647480"
  },
  {
    "text": "target directory and the resources that have been customized in a recursion step and we're going to apply the",
    "start": "647480",
    "end": "653210"
  },
  {
    "text": "transformations we're going to change the CPU count we're going to change the memory we're going to change we're going to add name prefixes now six since we're",
    "start": "653210",
    "end": "663890"
  },
  {
    "text": "changing the names of some of these things if we change the name of the config map we have to change the content",
    "start": "663890",
    "end": "669740"
  },
  {
    "text": "with the deployment so that it knows that it's going to use the right config map so we have to go down and hook up and correctly change the names to make",
    "start": "669740",
    "end": "677210"
  },
  {
    "text": "sure everything makes sense finally then we omit llam√≥ so that's basically how it",
    "start": "677210",
    "end": "683330"
  },
  {
    "text": "works I can end the talk right there but",
    "start": "683330",
    "end": "691280"
  },
  {
    "text": "let me go on and give you a few more tricks that customizes does for you here",
    "start": "691280",
    "end": "697730"
  },
  {
    "text": "is an example sometimes you have a situation where you have a server that depends on another service so in this",
    "start": "697730",
    "end": "703670"
  },
  {
    "text": "case WordPress depends on my sequel it needs to know where my sequel is it needs to know what my sequel is called",
    "start": "703670",
    "end": "709460"
  },
  {
    "text": "in the kubernetes namespace so you can define in a customization file you can",
    "start": "709460",
    "end": "714470"
  },
  {
    "text": "defined a variable VARs the Vivaro stanza that says let's make an",
    "start": "714470",
    "end": "719600"
  },
  {
    "text": "environment variable called my suit not an environment variable but a customized variable called my sequel service and",
    "start": "719600",
    "end": "725000"
  },
  {
    "text": "it's going to take on the value of whatever is in the resource service with the name my sequel API version 1 v1 in",
    "start": "725000",
    "end": "734450"
  },
  {
    "text": "the name field and then it's going to be able to put that in other places so in this case it's going to go sticking in",
    "start": "734450",
    "end": "740180"
  },
  {
    "text": "the deployment in the the command to the image make an environment variable for it etc so and that gets put into",
    "start": "740180",
    "end": "747050"
  },
  {
    "text": "standard out this is not a general templating mechanism this is simply taking data out of one company's",
    "start": "747050",
    "end": "753110"
  },
  {
    "text": "resource and sticking in another kubernetes resource",
    "start": "753110",
    "end": "758440"
  },
  {
    "text": "- another trick that you can do calling it a trick is generate config maps and",
    "start": "759280",
    "end": "767270"
  },
  {
    "text": "you can generate config maps by merging data from multiple environmental files so this common commonly the case where",
    "start": "767270",
    "end": "774970"
  },
  {
    "text": "you as the web app developers say you've got some some properties that say set up",
    "start": "774970",
    "end": "782210"
  },
  {
    "text": "how control how the web page maybe looks and over you know down the hallway",
    "start": "782210",
    "end": "788120"
  },
  {
    "text": "there's the dev ops team and they've got properties that control how ingress works or things that they want to they",
    "start": "788120",
    "end": "795410"
  },
  {
    "text": "want to maintain under their control database passwords and whatnot and you",
    "start": "795410",
    "end": "800450"
  },
  {
    "text": "can generate a config map from both of these things that merges this data together and gives it a unique name so",
    "start": "800450",
    "end": "806780"
  },
  {
    "text": "in this case our base has a generator stanza in the customization file that",
    "start": "806780",
    "end": "812390"
  },
  {
    "text": "says look in this particular file and make a config map from these things and then when you do the overlay remember",
    "start": "812390",
    "end": "819290"
  },
  {
    "text": "you're gonna customize this stuff that's coming in from the base you can add a name prefix a prod and you're gonna",
    "start": "819290",
    "end": "826280"
  },
  {
    "text": "throw in some more you're gonna merge in the data from this other file and that's",
    "start": "826280",
    "end": "831530"
  },
  {
    "text": "gonna on the right hand side generally the config map with the name prod - the original name that was in the base and",
    "start": "831530",
    "end": "837800"
  },
  {
    "text": "then a hash of the contents of the file so the hash is important if you went and",
    "start": "837800",
    "end": "843680"
  },
  {
    "text": "changed some of the environment variables that are that are feeding another config map that will generate a new hash suffix and that's important so",
    "start": "843680",
    "end": "851810"
  },
  {
    "text": "that your deployments realize that they they are going to be pointing in new data",
    "start": "851810",
    "end": "858100"
  },
  {
    "text": "okay so this is all just patching again customize is just a means to manage kubernetes targeted patching see that",
    "start": "858850",
    "end": "867310"
  },
  {
    "text": "these are some of the things you might want to patch namespaces names labels annotations and so forth in the",
    "start": "867310",
    "end": "873069"
  },
  {
    "text": "container you're gonna you're gonna want to modify the image tags the arguments to the image tags and so on you're gonna",
    "start": "873069",
    "end": "878290"
  },
  {
    "text": "worry about the budgets the CPU resources are using the memory the",
    "start": "878290",
    "end": "883630"
  },
  {
    "text": "replicas and and policies anything that you can specify in our llamo file basically another trick is you can",
    "start": "883630",
    "end": "890980"
  },
  {
    "text": "kubernetes customize really works well with git so you can customize the",
    "start": "890980",
    "end": "896110"
  },
  {
    "text": "contents of a git repo and this example underscores the fact that you're not modifying the input at all in place",
    "start": "896110",
    "end": "905139"
  },
  {
    "text": "you're only patching it after you take a look at it so you were going directly from a git repo into the cluster and",
    "start": "905139",
    "end": "912699"
  },
  {
    "text": "applying customizations as we go likewise you can specify that your base",
    "start": "912699",
    "end": "919959"
  },
  {
    "text": "is all the resources off over in this directory in this particular git repo",
    "start": "919959",
    "end": "927870"
  },
  {
    "text": "so what does a rollback look like you make a change you send it out to",
    "start": "930529",
    "end": "935989"
  },
  {
    "text": "production something goes wrong you CD into the target directory where you're working you just step one make one step",
    "start": "935989",
    "end": "943909"
  },
  {
    "text": "backwards and you were in your git log and you go back to where you change say you activated a flag or whatever",
    "start": "943909",
    "end": "950629"
  },
  {
    "text": "whatever you did to make a change that broke production and then you build it again and you send it out to to your",
    "start": "950629",
    "end": "956569"
  },
  {
    "text": "cluster you verify it with ku cuddle diff which is one of my colleagues has been working on that or you can look at",
    "start": "956569",
    "end": "963859"
  },
  {
    "text": "the annotations on your resources now another thing that is important when",
    "start": "963859",
    "end": "971390"
  },
  {
    "text": "you're using other people's configurations whether it's somebody who's over in Italy or somebody who's",
    "start": "971390",
    "end": "976730"
  },
  {
    "text": "down the hall who's maintaining the original source material source material every configuration is keeping up with",
    "start": "976730",
    "end": "982520"
  },
  {
    "text": "the changes that those folks make right so the general approach is you fork",
    "start": "982520",
    "end": "988760"
  },
  {
    "text": "their config you can do many variations on this but the idea is for that config drop in a customization file to adapt",
    "start": "988760",
    "end": "995600"
  },
  {
    "text": "that configuration to your needs periodically get rebase to keep up okay",
    "start": "995600",
    "end": "1002050"
  },
  {
    "text": "and the nice thing about this rebase is since you're not modifying the source material at all it's always going to",
    "start": "1002050",
    "end": "1007750"
  },
  {
    "text": "work there's never going to be a stage where you have to do a human is going to have to merge the data right you won't",
    "start": "1007750",
    "end": "1014740"
  },
  {
    "text": "have to resolve conflicts so that means it could be upgraded automatically it",
    "start": "1014740",
    "end": "1020020"
  },
  {
    "text": "could just be done automatically so get repo of resources with",
    "start": "1020020",
    "end": "1027089"
  },
  {
    "text": "customizations describing your variants is a simple powerful way to manage shared configuration patching",
    "start": "1027089",
    "end": "1035688"
  },
  {
    "text": "so here's where I would normally do a demo of something but this stuff is just too boring to demo so I'm not going to",
    "start": "1035870",
    "end": "1042209"
  },
  {
    "text": "do that I would just have a mole coming out to standard out nobody wants to see that there's a lot of examples on our",
    "start": "1042209",
    "end": "1049260"
  },
  {
    "text": "git repo site that are part of it that are tested as part of our end-to-end and I know they work I hate it when I go",
    "start": "1049260",
    "end": "1055679"
  },
  {
    "text": "somewhere and the examples don't work so these work talk is almost over I just",
    "start": "1055679",
    "end": "1062760"
  },
  {
    "text": "want to mention a couple of things about the philosophy behind this why we decided to do this the design goals were",
    "start": "1062760",
    "end": "1069200"
  },
  {
    "text": "make some things composable make it compact in Cooper ninties style so the",
    "start": "1069200",
    "end": "1074550"
  },
  {
    "text": "actual customization Fowler's could be used as a resource we wanted to work really well with git and we wanted to be",
    "start": "1074550",
    "end": "1080820"
  },
  {
    "text": "simple composable that means we want it to be work in pipes be work with plain",
    "start": "1080820",
    "end": "1088110"
  },
  {
    "text": "text do one thing and do it well and you know send any errors to standard error",
    "start": "1088110",
    "end": "1093420"
  },
  {
    "text": "and just if there's no input there should be no output this guy here on the left is Doug McIlroy I like to imagine",
    "start": "1093420",
    "end": "1099059"
  },
  {
    "text": "that he gave that beer to Ken Thompson to get him to put pipes into Unix we",
    "start": "1099059",
    "end": "1104670"
  },
  {
    "text": "want this thing to work with pipes so he was kind of our patron saint community",
    "start": "1104670",
    "end": "1109679"
  },
  {
    "text": "style means we want to understand how to patch we want to know how to patch raw resource files we want to be able to",
    "start": "1109679",
    "end": "1116309"
  },
  {
    "text": "work with CDs we want it to be extensible we're gonna target cout cuddle apply cool apply is the main API",
    "start": "1116309",
    "end": "1124320"
  },
  {
    "text": "for kubernetes and we're gonna use patch concepts they already familiar with them",
    "start": "1124320",
    "end": "1130170"
  },
  {
    "text": "if you've worked with coop cuddle apply you've already been doing patching without maybe not being aware of it",
    "start": "1130170",
    "end": "1135350"
  },
  {
    "text": "we're just bringing a little bit of that out and putting it into this this tool",
    "start": "1135350",
    "end": "1141410"
  },
  {
    "text": "we want it to be really work really well with get workflows so you can share your",
    "start": "1141410",
    "end": "1148890"
  },
  {
    "text": "basis for example via get and you can capture upgrades maintained by somebody else with git rebase and you know",
    "start": "1148890",
    "end": "1158040"
  },
  {
    "text": "upgrades are just simple because you're bringing in stuff that does not have to be resolved by a human",
    "start": "1158040",
    "end": "1164710"
  },
  {
    "text": "we want it to be simple so there's no templating there is no new language to",
    "start": "1164710",
    "end": "1169840"
  },
  {
    "text": "learn that doesn't have any unit testing or has no idea for you to use there's no unintentional API and so",
    "start": "1169840",
    "end": "1177039"
  },
  {
    "text": "there's nothing layered on top of the community's resources they're just broad resources that's what you're working",
    "start": "1177039",
    "end": "1182919"
  },
  {
    "text": "with and you know there's no forced notion of a package or application",
    "start": "1182919",
    "end": "1191130"
  },
  {
    "text": "so these are examples of what we're not doing this is a template that's a Lua",
    "start": "1191320",
    "end": "1197440"
  },
  {
    "text": "script the thing on the left is board config stuff that we use inside Google",
    "start": "1197440",
    "end": "1202620"
  },
  {
    "text": "and all of those things are difficult to maintain because they have logic in them templates have logic in them and when",
    "start": "1202620",
    "end": "1209290"
  },
  {
    "text": "you make changes to them you have to merge you have have a human that's going to go in and look and sure make sure",
    "start": "1209290",
    "end": "1214750"
  },
  {
    "text": "that any change is merged correctly into whatever it is that you did for your own customization because you actually edited the template to make to add your",
    "start": "1214750",
    "end": "1222700"
  },
  {
    "text": "own customizations okay so coming soon in Co cuddle 1.13",
    "start": "1222700",
    "end": "1232520"
  },
  {
    "text": "Cooper Nate is 1.13 we're going to have customization integrated into coop cuddle which was always the plan",
    "start": "1232520",
    "end": "1238520"
  },
  {
    "text": "it closed coop cuddle bugs that's why we wrote it and when that happens when you",
    "start": "1238520",
    "end": "1243860"
  },
  {
    "text": "type cout cuddle apply on a directory if there's a customization file present it will honor that if there is no",
    "start": "1243860",
    "end": "1250100"
  },
  {
    "text": "customization file present it'll just do what it always did we're thinking about putting up an",
    "start": "1250100",
    "end": "1255559"
  },
  {
    "text": "example site of customizations kind of like go doc org where you could just",
    "start": "1255559",
    "end": "1262070"
  },
  {
    "text": "browse for other people's work and even use it if you wanted to you could fork it you could base base your",
    "start": "1262070",
    "end": "1268250"
  },
  {
    "text": "configuration off of it so thanks thanks to all the contributors that are actually working on customize",
    "start": "1268250",
    "end": "1274659"
  },
  {
    "text": "and replicate is a company in in the u.s. that made this nice website and",
    "start": "1274659",
    "end": "1279669"
  },
  {
    "text": "customized that IO to help people learn about customized SIG's CLI sponsored the",
    "start": "1279669",
    "end": "1285789"
  },
  {
    "text": "work here and Brian grant wouldn't call him out he wrote this nice document called declarative application",
    "start": "1285789",
    "end": "1292499"
  },
  {
    "text": "management and that's kind of the foundational document for this work the",
    "start": "1292499",
    "end": "1297759"
  },
  {
    "text": "inspiration okay thank you questions [Applause]",
    "start": "1297759",
    "end": "1305030"
  },
  {
    "text": "[Music] okay let's you elaborate more about the",
    "start": "1305030",
    "end": "1313940"
  },
  {
    "text": "second use case the patch 1 this is the",
    "start": "1313940",
    "end": "1319430"
  },
  {
    "text": "variables right the variables okay so that's a situation where you're you're",
    "start": "1319430",
    "end": "1325340"
  },
  {
    "text": "generating that particular case was WordPress depends on my sequel and in",
    "start": "1325340",
    "end": "1331010"
  },
  {
    "text": "the command line and the deployment for running WordPress you have to tell it on the command line where WordPress is and",
    "start": "1331010",
    "end": "1337250"
  },
  {
    "text": "that may involve using the name of the kubernetes object the name of the service right so you need to go in find",
    "start": "1337250",
    "end": "1344660"
  },
  {
    "text": "that name in the in the resource in the in the service in this case and then",
    "start": "1344660",
    "end": "1349880"
  },
  {
    "text": "stick it there on the command line since that name might be generated it might be it might be modified but customized you",
    "start": "1349880",
    "end": "1355820"
  },
  {
    "text": "have to like go find it",
    "start": "1355820",
    "end": "1359289"
  },
  {
    "text": "so can understand that the patch is to fix the original deployment which didn't",
    "start": "1363500",
    "end": "1369540"
  },
  {
    "text": "check whether the dependencies app so why we have this patch the patch is to",
    "start": "1369540",
    "end": "1377070"
  },
  {
    "text": "fix the issue that the original deployment didn't have this curl command",
    "start": "1377070",
    "end": "1382290"
  },
  {
    "text": "to check whether different dependencies up the purpose of this use case partly the",
    "start": "1382290",
    "end": "1389070"
  },
  {
    "text": "purpose of this use case is that right there the purpose of this use case is we need to sometimes hook things up using",
    "start": "1389070",
    "end": "1395190"
  },
  {
    "text": "generated names so we needed to provide a variable Mac of our mechanism to allow that to happen",
    "start": "1395190",
    "end": "1400940"
  },
  {
    "text": "yes so it's not so much patching as it is finding a one name field from one",
    "start": "1400940",
    "end": "1408599"
  },
  {
    "text": "hunk of llam√≥ and sticking that in another hunk of llam√≥ so if your prefix",
    "start": "1408599",
    "end": "1413669"
  },
  {
    "text": "all of the resources so it should just work right it should just work yes oh",
    "start": "1413669",
    "end": "1419749"
  },
  {
    "text": "and except in this case because in this particular case we have arguments on the container image the command that you're",
    "start": "1419749",
    "end": "1428190"
  },
  {
    "text": "running we don't know what that format is it could be anything right it could be a coral - - blah blah you know and",
    "start": "1428190",
    "end": "1435809"
  },
  {
    "text": "then some name customize can't understand the structure of that command so we can't patch it really so does the",
    "start": "1435809",
    "end": "1443549"
  },
  {
    "text": "curl command exist in the original deployment llam√≥ yeah it does it could",
    "start": "1443549",
    "end": "1450479"
  },
  {
    "text": "yeah okay yeah we're gonna have",
    "start": "1450479",
    "end": "1459330"
  },
  {
    "text": "microphone delivery here in a second so in your tempo so I saw that when you",
    "start": "1459330",
    "end": "1466710"
  },
  {
    "text": "customize you adding some hash to a conflict back then the secrets right yes we ever have that and why not adding to",
    "start": "1466710",
    "end": "1474409"
  },
  {
    "text": "deployment and service results so you're",
    "start": "1474409",
    "end": "1480749"
  },
  {
    "text": "speaking about the config map generation so the config Maps get generated from data that's on disk like an environment",
    "start": "1480749",
    "end": "1486570"
  },
  {
    "text": "file this is one of the bugs that we're closing actually one of the issues that was one of the features that was requested so you can just generate the",
    "start": "1486570",
    "end": "1493679"
  },
  {
    "text": "config map on the fly now if you edit a",
    "start": "1493679",
    "end": "1499139"
  },
  {
    "text": "config map you've changed the constants the config map and you don't change the name and you push that config mint out",
    "start": "1499139",
    "end": "1504450"
  },
  {
    "text": "to production the deployments not going to read it it's not going to know that the values inside the config map have",
    "start": "1504450",
    "end": "1509820"
  },
  {
    "text": "changed best practice says modify create a new",
    "start": "1509820",
    "end": "1515129"
  },
  {
    "text": "config map with a new name then tell your deployment edit your deployment Patrick to point at that new config map with a",
    "start": "1515129",
    "end": "1522820"
  },
  {
    "text": "new name that will trigger a rollout right and and it'll capture the the old",
    "start": "1522820",
    "end": "1528730"
  },
  {
    "text": "replica set will start fading away and the new replica set will look at that new config map with a new name the hash",
    "start": "1528730",
    "end": "1534909"
  },
  {
    "text": "is there too you know we just needed a new name and the and the safest way to do that is to is to make a suffix which",
    "start": "1534909",
    "end": "1541360"
  },
  {
    "text": "with a hash of the contents yep hello I",
    "start": "1541360",
    "end": "1547960"
  },
  {
    "text": "have a two question first days I only sees a modification in your example so",
    "start": "1547960",
    "end": "1554590"
  },
  {
    "text": "sometimes I may need to add some add or",
    "start": "1554590",
    "end": "1560169"
  },
  {
    "text": "remove some we saw our parameter in my deeper memo so I'm not sure can just to",
    "start": "1560169",
    "end": "1567370"
  },
  {
    "text": "help me to add some ID all removed some parameter to murdered to our to our",
    "start": "1567370",
    "end": "1574809"
  },
  {
    "text": "deployment llamo and what part of the deployment llamo do you want to modify for example I'm not sure for example I",
    "start": "1574809",
    "end": "1584169"
  },
  {
    "text": "need to add some environmental property for different environment for example",
    "start": "1584169",
    "end": "1590409"
  },
  {
    "text": "there or a staging environment right so in that case the best thing to do is to",
    "start": "1590409",
    "end": "1597850"
  },
  {
    "text": "patch a config map and have the deployment get the information from the config map okay okay Carson and another",
    "start": "1597850",
    "end": "1604480"
  },
  {
    "text": "question is do you have some grandma pre check for the merge for example if I",
    "start": "1604480",
    "end": "1613419"
  },
  {
    "text": "write wrong name prefix so can we during",
    "start": "1613419",
    "end": "1619750"
  },
  {
    "text": "my worst okay can the choose how tell me or were me",
    "start": "1619750",
    "end": "1625960"
  },
  {
    "text": "that is there something wrong yes so the question is about name conflicts if when",
    "start": "1625960",
    "end": "1632620"
  },
  {
    "text": "you run customize build it's not always going to work sometimes you make it a name conflict and it will fail so it",
    "start": "1632620",
    "end": "1641110"
  },
  {
    "text": "checks in kubernetes all the objects have to have a unique group version kind name and so that's verified before the",
    "start": "1641110",
    "end": "1647860"
  },
  {
    "text": "output is generated so you're safe it's a Cooper you will help me right",
    "start": "1647860",
    "end": "1653420"
  },
  {
    "text": "what cooper kubernetes allow me to check it know the customize will fail in the",
    "start": "1653420",
    "end": "1658700"
  },
  {
    "text": "build step if that happens okay God",
    "start": "1658700",
    "end": "1662769"
  },
  {
    "text": "thank you for presentation I saw a pain in your person she that",
    "start": "1670090",
    "end": "1676490"
  },
  {
    "text": "sees you you use calico to right Department and it is exactly what I'm",
    "start": "1676490",
    "end": "1684110"
  },
  {
    "text": "doing now after I listen to your talk I'm thinking it is possible to in my",
    "start": "1684110",
    "end": "1692180"
  },
  {
    "text": "program or coda to use your customized to generate Yama to northern use command",
    "start": "1692180",
    "end": "1700040"
  },
  {
    "text": "line use customized to generate a grammar did you say generator Yammer generate llamo yes did you say client go",
    "start": "1700040",
    "end": "1708020"
  },
  {
    "text": "also yes yes so we're not using client go at all we're not so customized",
    "start": "1708020",
    "end": "1716270"
  },
  {
    "text": "doesn't use Clank oh it's not actually hitting the server at all it's just reading text and writing text so it is",
    "start": "1716270",
    "end": "1723920"
  },
  {
    "text": "possible to use your customers as a API",
    "start": "1723920",
    "end": "1729350"
  },
  {
    "text": "to generate Yammer instant of use command line because my",
    "start": "1729350",
    "end": "1735350"
  },
  {
    "text": "program needed to generate a lot of llamo for users usually notes no done",
    "start": "1735350",
    "end": "1741050"
  },
  {
    "text": "anything about a pass like units yeah so what it does it customized weeds in",
    "start": "1741050",
    "end": "1748370"
  },
  {
    "text": "llamo the only llamo that it generates from scratch is for at the moment is for",
    "start": "1748370",
    "end": "1753710"
  },
  {
    "text": "secrets and config Maps and takes raw data and will roll that up into a secret",
    "start": "1753710",
    "end": "1759230"
  },
  {
    "text": "or a config map for you and then it emits yamo so it has to start with the ammo and it patches that llamo and then",
    "start": "1759230",
    "end": "1766790"
  },
  {
    "text": "spits it out to standard out yes yeah I will provide you the pace Yama yeah you",
    "start": "1766790",
    "end": "1773360"
  },
  {
    "text": "can provide the base yes that's the X but that's the expectation you provide raw ammo or somebody else does and then",
    "start": "1773360",
    "end": "1781010"
  },
  {
    "text": "you're only adding rules to how you want to modify it to your for your own purposes",
    "start": "1781010",
    "end": "1786350"
  },
  {
    "text": "because and the reason you want to have that in a separate file this customization file is because you don't",
    "start": "1786350",
    "end": "1791630"
  },
  {
    "text": "want to edit the source material because you do you occasionally want to rebase",
    "start": "1791630",
    "end": "1796850"
  },
  {
    "text": "and capture new source material well thank you okay yes thank you",
    "start": "1796850",
    "end": "1808780"
  },
  {
    "text": "unfortunately I just joined the last part of your talk sorry for that so I don't know if you talked about that",
    "start": "1808780",
    "end": "1814460"
  },
  {
    "text": "already how does it integrate with helm how does",
    "start": "1814460",
    "end": "1819799"
  },
  {
    "text": "it integrate with helm geez I'm sorry I have to put the microphone down for a second okay",
    "start": "1819799",
    "end": "1826899"
  },
  {
    "text": "okay let's see if this works it just so happens I have a slide",
    "start": "1832390",
    "end": "1838900"
  },
  {
    "text": "okay so helm what does home do helm has a template command to generate yamo",
    "start": "1838900",
    "end": "1845500"
  },
  {
    "text": "customized reads llamo and write CMO so just use home template to take your",
    "start": "1845500",
    "end": "1852950"
  },
  {
    "text": "chart squeeze all the go template stuff and the values out of it emit pure llamo and they can use a customization file to",
    "start": "1852950",
    "end": "1860270"
  },
  {
    "text": "then modify that that llamo you",
    "start": "1860270",
    "end": "1865820"
  },
  {
    "text": "you you",
    "start": "1866179",
    "end": "1870810"
  },
  {
    "text": "I want to know will it replace hell will this replace home yeah I don't know I'm",
    "start": "1877040",
    "end": "1884870"
  },
  {
    "text": "sure people are gonna continue to use home this is just an alternative there's not always one answer there's no silver",
    "start": "1884870",
    "end": "1890540"
  },
  {
    "text": "bullet to anything right this provides you with a so home takes a template",
    "start": "1890540",
    "end": "1895820"
  },
  {
    "text": "approach and values and helm v3 is going to introduce the possibility doing Lua",
    "start": "1895820",
    "end": "1901490"
  },
  {
    "text": "scripting as much as I understand it so that's one way to manage shared",
    "start": "1901490",
    "end": "1906650"
  },
  {
    "text": "configuration right another way to manage it the customized approach is to do patching so and the advantage there",
    "start": "1906650",
    "end": "1914150"
  },
  {
    "text": "is that you're you're not really modifying the source material and you can apply these layers of patching to",
    "start": "1914150",
    "end": "1920240"
  },
  {
    "text": "help you manage your different environments so from the beginning we thought about how are you going to",
    "start": "1920240",
    "end": "1925610"
  },
  {
    "text": "manage multiple environments multiple variations right that's a little bit trickier with home mmm I was thinking",
    "start": "1925610",
    "end": "1932720"
  },
  {
    "text": "about that mmm here's a situation if we have a application with a deployment llamo and",
    "start": "1932720",
    "end": "1940460"
  },
  {
    "text": "we might add a parameter like my SoCo endpoint right when we edit the other",
    "start": "1940460",
    "end": "1950320"
  },
  {
    "text": "custom lights - yamo won't know we were at a Mexican point so they will use it",
    "start": "1950320",
    "end": "1959240"
  },
  {
    "text": "in every environment and they they won't know it if the original for sure tell",
    "start": "1959240",
    "end": "1968180"
  },
  {
    "text": "them by person right so that you're saying if are you concerned that if",
    "start": "1968180",
    "end": "1974540"
  },
  {
    "text": "somebody modifies the deployment in a base yes that the other people won't know about it yes yes yes",
    "start": "1974540",
    "end": "1981200"
  },
  {
    "text": "okay so those are the people it's on them to fork your configuration mm-hmm",
    "start": "1981200",
    "end": "1987740"
  },
  {
    "text": "right and then use their fork got it use their fork and when they go ahead and",
    "start": "1987740",
    "end": "1994760"
  },
  {
    "text": "they want to merge in new changes they should just look at that merge yeah",
    "start": "1994760",
    "end": "2001150"
  },
  {
    "text": "in some situations they might but just I",
    "start": "2001150",
    "end": "2006460"
  },
  {
    "text": "was thinking that with him when we have a template and the we should write a value term value llamo rank and when",
    "start": "2006460",
    "end": "2014980"
  },
  {
    "text": "well llamo miss some miss some variables they were warning you that like I read a",
    "start": "2014980",
    "end": "2025059"
  },
  {
    "text": "template with my security and point but but if you thought write a variable like",
    "start": "2025059",
    "end": "2035290"
  },
  {
    "text": "mr. clay right okay I think I see what you're getting at so customize has in it some linting",
    "start": "2035290",
    "end": "2043059"
  },
  {
    "text": "features it looks for common errors and mistakes and things where name references aren't going to hook up these",
    "start": "2043059",
    "end": "2049030"
  },
  {
    "text": "linting things can always get better you you want the the ammo that's spit out to",
    "start": "2049030",
    "end": "2054460"
  },
  {
    "text": "be correct and of course that's what we aspire to and and we can always use people that",
    "start": "2054460",
    "end": "2059530"
  },
  {
    "text": "are improving our linting code okay I think we're out of time thank you very much",
    "start": "2059530",
    "end": "2066000"
  },
  {
    "text": "[Applause]",
    "start": "2066000",
    "end": "2070039"
  }
]