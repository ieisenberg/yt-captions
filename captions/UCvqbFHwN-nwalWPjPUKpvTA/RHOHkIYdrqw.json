[
  {
    "text": "hello everybody how are we doing today on the last day of kubecon good yeah I feel about the same yeah",
    "start": "1620",
    "end": "8639"
  },
  {
    "text": "that was that was about as half-hearted as I was expecting wonderful uh thank you very much for joining me today we're",
    "start": "8639",
    "end": "14219"
  },
  {
    "text": "going to talk about uh agones and quilkin uh open source multiplayer game server orchestration and service",
    "start": "14219",
    "end": "20100"
  },
  {
    "text": "National kubernetes I think I managed to fit all the buzzwords in almost um thank you very much for hanging out",
    "start": "20100",
    "end": "26939"
  },
  {
    "text": "with me uh a little about me before we get started uh my name is Mark Mandel or",
    "start": "26939",
    "end": "33120"
  },
  {
    "text": "Mark Mandel depending on if I'm using my American or Australian accent I technically develop a relations for",
    "start": "33120",
    "end": "38700"
  },
  {
    "text": "gaming on Google Cloud um I'm founder I'm one of the founders I should say and maintainers on both of",
    "start": "38700",
    "end": "44879"
  },
  {
    "text": "the open source projects we're talking about today which is at corners and Culkin you can find all my details up here uh before we get started I would",
    "start": "44879",
    "end": "53280"
  },
  {
    "text": "love to pull the room because this is going to be a distributed audience and possibly a little different from some of",
    "start": "53280",
    "end": "58980"
  },
  {
    "text": "the normal people I give this to who here works in the video game industry",
    "start": "58980",
    "end": "64018"
  },
  {
    "text": "small pocket of people over here okay cool that sounds fine who here went to",
    "start": "64019",
    "end": "69360"
  },
  {
    "text": "uh Joseph's talk earlier today about agonism PlayStation okay a lot of you got some giving not",
    "start": "69360",
    "end": "75900"
  },
  {
    "text": "everyone okay that's perfect who here likes video games okay now I understand what's going on",
    "start": "75900",
    "end": "81060"
  },
  {
    "text": "awesome awesome no that's great that's great that's great okay cool um we're gonna be talking about some fun",
    "start": "81060",
    "end": "86580"
  },
  {
    "text": "stuff today and we're we're we've got half an hour so some of it'll be a little surface but hopefully I'll be able to give you enough information to",
    "start": "86580",
    "end": "92520"
  },
  {
    "text": "be able to go oh that's interesting cool so what do I want to talk about today",
    "start": "92520",
    "end": "98100"
  },
  {
    "text": "um I want to talk about fast-paced real-time multiplayer games",
    "start": "98100",
    "end": "104040"
  },
  {
    "text": "um your OverWatch is your fortnites your rocket leagues all those kind of fun stuff um and I want to talk about uh kind of",
    "start": "104040",
    "end": "112220"
  },
  {
    "text": "two interesting kind of problems both a little bit about how we host and scale",
    "start": "112220",
    "end": "117600"
  },
  {
    "text": "them but also how we look at securing and monitoring and doing interesting",
    "start": "117600",
    "end": "124079"
  },
  {
    "text": "things that's on a service Meshi kind of stuff with the UDP traffic that also happens",
    "start": "124079",
    "end": "130259"
  },
  {
    "text": "um with game server workloads and we'll dig a little bit into both and we'll talk about how some of that stuff works as well before we go too deep",
    "start": "130259",
    "end": "136020"
  },
  {
    "text": "um I am going to be doing a live demo because I like being afraid",
    "start": "136020",
    "end": "141120"
  },
  {
    "text": "um I'll be using a open source uh game called sonatic who here has heard of",
    "start": "141120",
    "end": "146160"
  },
  {
    "text": "sonotic I'm guessing like three people yep okay I counted that about right perfect um I'm gonna use an open source game",
    "start": "146160",
    "end": "151800"
  },
  {
    "text": "called sonatic it's like if you ever remember like Circa 2000 like Unreal Tournament 2000 that kind of game it's",
    "start": "151800",
    "end": "157680"
  },
  {
    "text": "very much in that vein um it's lots of fun Okay cool so let's talk a little bit about real time",
    "start": "157680",
    "end": "164040"
  },
  {
    "text": "games I'm going to talk about one particular pattern which we call dedicated Game servers and we're gonna talk about some of the challenges",
    "start": "164040",
    "end": "169800"
  },
  {
    "text": "they're in um and hopefully how the two projects we're going to talk about today Aquinas and quilkin help mitigate some of those",
    "start": "169800",
    "end": "174959"
  },
  {
    "text": "challenges sweet so dedicated game server very quick primer",
    "start": "174959",
    "end": "180420"
  },
  {
    "text": "um think of it as you are playing a game with some people there is a full simulation of that game happening",
    "start": "180420",
    "end": "186900"
  },
  {
    "text": "somewhere on a process running in the cloud that is what we call a dedicated game server its job is that many people",
    "start": "186900",
    "end": "192540"
  },
  {
    "text": "will connect to a dedicated game server and it has the state of what's Happening inside the game and it communicates that state back down to the players",
    "start": "192540",
    "end": "199319"
  },
  {
    "text": "how dedicated Game servers work that's a whole talk on them yourself but that's the basic deal of how dedicated game server works now there are some",
    "start": "199319",
    "end": "206640"
  },
  {
    "text": "challenges that come with dedicated Game servers I love dedicated Game servers I live with them all the time",
    "start": "206640",
    "end": "212400"
  },
  {
    "text": "um but they are kind of very much in the very classic monolith sense one big",
    "start": "212400",
    "end": "219060"
  },
  {
    "text": "thing that encapsulates pretty much everything that happens inside that game you'll get everything from communication",
    "start": "219060",
    "end": "224760"
  },
  {
    "text": "runtimes to simulation stuff to play authentication it all sits inside this dedicated game server process",
    "start": "224760",
    "end": "230760"
  },
  {
    "text": "that means yes it is a single point of failure um dedicated Game servers usually handle",
    "start": "230760",
    "end": "236280"
  },
  {
    "text": "a wide variety of in-memory State because they're running that whole simulation inside of them so if they go down and all the players are connected",
    "start": "236280",
    "end": "242640"
  },
  {
    "text": "to them uh have a bad experience if that game server goes down which is not great",
    "start": "242640",
    "end": "248040"
  },
  {
    "text": "um this also means that unfortunately some people in the games scene aren't the nicest of people",
    "start": "248040",
    "end": "253920"
  },
  {
    "text": "um so that could mean they can be Target for attack um they can get DDOS you can have all",
    "start": "253920",
    "end": "259380"
  },
  {
    "text": "kinds of horrible stuff people are like I'm losing I don't want to um it's fine so",
    "start": "259380",
    "end": "266400"
  },
  {
    "text": "there are interesting problems about how to orchestrate and scale them we sort of talk early today speaking about agonists",
    "start": "266400",
    "end": "272340"
  },
  {
    "text": "I'm going to talk a little bit about Ghana is going to focus probably more on the quilkin side today but for those who aren't familiar uh one",
    "start": "272340",
    "end": "279180"
  },
  {
    "text": "of the projects I work on is a project called agoniz um and we'll show some examples of a gun is agoniz is a open",
    "start": "279180",
    "end": "286560"
  },
  {
    "text": "source project that teaches kubernetes how to run game servers basically the",
    "start": "286560",
    "end": "292080"
  },
  {
    "text": "major thing that it does is that it's aware that hey if you have players playing on a game don't shut it down",
    "start": "292080",
    "end": "299940"
  },
  {
    "text": "but if you don't have players playing on it that's okay we can shut it down we can do stuff to it um it introduces new Concepts to",
    "start": "299940",
    "end": "306479"
  },
  {
    "text": "kubernetes like game server and fleets and we'll have a look at some of that as well it's it's nice been working on it",
    "start": "306479",
    "end": "311880"
  },
  {
    "text": "probably for about five years now we've had a wide variety of contributors and thanks to the extensibility of kubernetes with crds and operators and",
    "start": "311880",
    "end": "319020"
  },
  {
    "text": "controllers it's really nice the sort of stuff we can do inside there but",
    "start": "319020",
    "end": "324960"
  },
  {
    "text": "let's talk a little about some more challenges with dedicated Game servers because I want to talk a little bit about UDP game protocols",
    "start": "324960",
    "end": "330660"
  },
  {
    "text": "so if you're not familiar pretty much all your multiplayer games generally speaking as per everything it",
    "start": "330660",
    "end": "336780"
  },
  {
    "text": "depends are UDP based just take it for granted that's why it is it's a low latency thing it works better that's",
    "start": "336780",
    "end": "342780"
  },
  {
    "text": "again a whole other talk but the fun problem with dedicated Game servers or just gaming in general around",
    "start": "342780",
    "end": "349080"
  },
  {
    "text": "UDP game protocols is there's no standards it's not a thing",
    "start": "349080",
    "end": "356639"
  },
  {
    "text": "um many use some kind of quote-unquote reliable UDP um that doesn't mean like a",
    "start": "356639",
    "end": "363180"
  },
  {
    "text": "re-implementation of TCP but that's just the thing that happens uh security and encryption can vary greatly",
    "start": "363180",
    "end": "370259"
  },
  {
    "text": "um we'll find there's a variety of sort of protocols not really protocols but kind of libraries like Unreal Engine has",
    "start": "370259",
    "end": "376320"
  },
  {
    "text": "some stuff Unity has some stuff there's libraries like netcode and kcp steam has game networking sockets a lot of times",
    "start": "376320",
    "end": "383460"
  },
  {
    "text": "you'll just end up in a proprietary solution because it's just better for your particular game to get better",
    "start": "383460",
    "end": "388560"
  },
  {
    "text": "bandwidth or throughput or anything else um and security also like I said really",
    "start": "388560",
    "end": "393780"
  },
  {
    "text": "widely varies um some people use dtls which is awesome some people take stuff from lip sodium",
    "start": "393780",
    "end": "399539"
  },
  {
    "text": "I've seen projects where they're just like that little bit of Quicks really nice I'll take that thanks",
    "start": "399539",
    "end": "404699"
  },
  {
    "text": "um all the way down to who's gonna look at my traffic anyway it doesn't matter um so like",
    "start": "404699",
    "end": "409919"
  },
  {
    "text": "uh right it's uh very different from sort of probably what all of us many of",
    "start": "409919",
    "end": "415680"
  },
  {
    "text": "us who work in sort of the cloud native landscape like there's no hdp there's no grpc like none of that exists so the",
    "start": "415680",
    "end": "421259"
  },
  {
    "text": "only guarantee that you can have in this environment is that you will get an array of bytes",
    "start": "421259",
    "end": "427860"
  },
  {
    "text": "cool awesome thanks okay so how do we start looking at",
    "start": "427860",
    "end": "433020"
  },
  {
    "text": "problems like we're talking about right like communication and like uh you know making making some kind of",
    "start": "433020",
    "end": "440039"
  },
  {
    "text": "Standards or like useful tools for this kind of stuff so it isn't just baked into the dedicated games over all the time so I will definitely not be the",
    "start": "440039",
    "end": "447000"
  },
  {
    "text": "first person to say this or point this out I mean we've all seen this happen before proxies proxies are great",
    "start": "447000",
    "end": "452580"
  },
  {
    "text": "um we see them all over the place from everything from sidecars to everything else um in this environment if we have a udb",
    "start": "452580",
    "end": "460199"
  },
  {
    "text": "proxy just talking theoretically at this point we start to get some some nice things that happen here uh we have",
    "start": "460199",
    "end": "466139"
  },
  {
    "text": "redundant points of Entry we can't really get away from the monolith per se as much but at least we can hide the",
    "start": "466139",
    "end": "471840"
  },
  {
    "text": "information about where those game servers are because usually we're making a direct connection to an IPM port",
    "start": "471840",
    "end": "477240"
  },
  {
    "text": "the game client gets that information suddenly it's available to you so anything we can do to hide that is nice",
    "start": "477240",
    "end": "482460"
  },
  {
    "text": "we can put some commodity stuff in it we'll look at that some monitoring some information if we want to like",
    "start": "482460",
    "end": "487979"
  },
  {
    "text": "manipulate the the UDP packets we can do that too and it just generally makes it much harder to take down we can distribute",
    "start": "487979",
    "end": "494160"
  },
  {
    "text": "load if we're getting ddosed we can put smarts in it that otherwise we would have to have put inside our dedicated",
    "start": "494160",
    "end": "499620"
  },
  {
    "text": "game server or running a different process so yay proxies definitely not a New Concept to anyone",
    "start": "499620",
    "end": "506400"
  },
  {
    "text": "here so if this is where we get into quilkin um over the last couple of years",
    "start": "506400",
    "end": "512459"
  },
  {
    "text": "um been building this with Embark Studios and we've had some other people float through which have been lovely quicken's a non-transparent UDP proxy",
    "start": "512459",
    "end": "518820"
  },
  {
    "text": "specifically designed for use with dedicated Game servers I.E there is no protocol",
    "start": "518820",
    "end": "525420"
  },
  {
    "text": "um we want to do stuff like Access Control Telemetry data metrics and more",
    "start": "525420",
    "end": "530459"
  },
  {
    "text": "um I will say Quicken uh it is not yet GA I think is the best way to put it it works",
    "start": "530459",
    "end": "536220"
  },
  {
    "text": "um we keep finding new stuff so we break apis on occasion but I've been working on it with inbox Studios and I think",
    "start": "536220",
    "end": "541380"
  },
  {
    "text": "it's safe to say that they've been using it for their upcoming game because they've published stuff about that and we've had some other uptick in some",
    "start": "541380",
    "end": "547620"
  },
  {
    "text": "other places as well so I'm going to take you through sort of an example of",
    "start": "547620",
    "end": "552660"
  },
  {
    "text": "these two working together um and how we can both orchestrate Game servers as well as do access control on",
    "start": "552660",
    "end": "557940"
  },
  {
    "text": "them um ideally without actually touching our game server code or potentially even our",
    "start": "557940",
    "end": "563160"
  },
  {
    "text": "game client so a little bit about quilkin quilkin really has two kind of Concepts and",
    "start": "563160",
    "end": "569279"
  },
  {
    "text": "you'll pick up that they're kind of the same Concepts in Envoy thank you very much that team for like opening up that proxy space it's awesome we lift a bunch",
    "start": "569279",
    "end": "575519"
  },
  {
    "text": "of stuff from there um we have endpoints which are basically addresses and we have filters strangely enough uh",
    "start": "575519",
    "end": "582839"
  },
  {
    "text": "we have a variety of filters uh it'll probably expand over time we can do all kinds of stuff like do basic firewall",
    "start": "582839",
    "end": "588240"
  },
  {
    "text": "rules we can do compression we can do routing to different endpoints we'll look at that a fair amount we can add to packets we can remove from",
    "start": "588240",
    "end": "594839"
  },
  {
    "text": "packets all that kind of fun stuff but everything we do inside our filters really is about manipulating a",
    "start": "594839",
    "end": "601800"
  },
  {
    "text": "array of butts because that's all we can guarantee we go so if we have a look at a sample config",
    "start": "601800",
    "end": "609899"
  },
  {
    "text": "here this is just a static quilkin config um it's yaml just like everything else we do with our time",
    "start": "609899",
    "end": "616380"
  },
  {
    "text": "um we can specify a set of filters here we're concatenating bytes and we'll look",
    "start": "616380",
    "end": "621600"
  },
  {
    "text": "at this later so if we wanted to add say a routing token to the end of our packets",
    "start": "621600",
    "end": "626940"
  },
  {
    "text": "um which is exactly what we're doing here we can do that through a concatenate bytes filter we can say hey I bandage",
    "start": "626940",
    "end": "634080"
  },
  {
    "text": "that and add our routing token of a not very secure please don't do this four five six",
    "start": "634080",
    "end": "640080"
  },
  {
    "text": "um onto the end of every byte that comes through our system and then we can pass it on to an endpoint",
    "start": "640080",
    "end": "645720"
  },
  {
    "text": "nothing more more fancy than that so we can start doing these layers of filters to be able to manipulate our packets",
    "start": "645720",
    "end": "651720"
  },
  {
    "text": "even though they're fairly rudimentary and we can start to do some relatively sophisticated things",
    "start": "651720",
    "end": "657120"
  },
  {
    "text": "okay so that's the static configuration but if you're saying okay cool Mark You've Got Game servers that's Dynamic",
    "start": "657120",
    "end": "663420"
  },
  {
    "text": "they're spinning up they're going away people are playing on them you're scaling them up and down how do we integrate this thing with like",
    "start": "663420",
    "end": "671399"
  },
  {
    "text": "something like a gun is which is like an orchestrator that manages Game Servers well again we we talk a little bit about",
    "start": "671399",
    "end": "677399"
  },
  {
    "text": "Envoy a little bit um we implemented an XDS API uh it's an XDS compliant API uh if anyone's looking",
    "start": "677399",
    "end": "684000"
  },
  {
    "text": "for a rust implementation of XDS we have one I guess um that might be useful for some people",
    "start": "684000",
    "end": "689940"
  },
  {
    "text": "um people here anyone not familiar with XCS which is also totally fine some people all right cool cool XDS is a relative",
    "start": "689940",
    "end": "697740"
  },
  {
    "text": "standard API for configuring proxy servers um it has cluster discoveries listener discoveries endpoint discoveries and so",
    "start": "697740",
    "end": "703980"
  },
  {
    "text": "you can write programmatic configuration of how you want however many um proxies to be configured by their",
    "start": "703980",
    "end": "710880"
  },
  {
    "text": "filters and where they're going and all that kind of stuff but that's hard and we don't want to do that",
    "start": "710880",
    "end": "717300"
  },
  {
    "text": "right I know a bunch of hands went up we're like I don't know how XDS works that seems hard um so we looked at it and we're like",
    "start": "717300",
    "end": "724200"
  },
  {
    "text": "okay we are often building stuff for the gun is which we'll actually look at in action in a bit",
    "start": "724200",
    "end": "730200"
  },
  {
    "text": "um and we want to run quilkin with it so yes you can write your own programmatic configuration for how the stuff works",
    "start": "730200",
    "end": "735300"
  },
  {
    "text": "but um if this is a common pattern and we both like these Open Source Products and",
    "start": "735300",
    "end": "741000"
  },
  {
    "text": "um we want to use them together we created a set of providers inside quilkin so",
    "start": "741000",
    "end": "746880"
  },
  {
    "text": "this now means that what you can also do is you can run quilkin in proxy mode but you can also run it in a manage mode",
    "start": "746880",
    "end": "752940"
  },
  {
    "text": "which says hey we're going to take all our Dynamic information from me either inside the kubernetes cluster or what's",
    "start": "752940",
    "end": "758640"
  },
  {
    "text": "happening inside um Agonist itself so we can see things like oh there's a",
    "start": "758640",
    "end": "764220"
  },
  {
    "text": "bunch of Game servers running your clusters those becomes endpoints uh we'll have a config map for the system so we can see what's going on inside of",
    "start": "764220",
    "end": "770040"
  },
  {
    "text": "it for filters we want so we'll kind of have a look at that in action",
    "start": "770040",
    "end": "775500"
  },
  {
    "text": "because that this this is actually one thing I think is actually quite exciting um when you start building layers on top",
    "start": "775500",
    "end": "781139"
  },
  {
    "text": "of these layers and suddenly you have these systems that can talk to each other without having to know the complexities of things like XDS although",
    "start": "781139",
    "end": "787560"
  },
  {
    "text": "the capability of such is still there and I think that's really really cool",
    "start": "787560",
    "end": "792740"
  },
  {
    "text": "so let's have a look at how that works all right so if you have cooking in management mode drop a config map in",
    "start": "793500",
    "end": "800399"
  },
  {
    "text": "your cluster um make sure it has cool confident map and here we just have",
    "start": "800399",
    "end": "806519"
  },
  {
    "text": "another set of filters that we want to do now what we're actually going to do here is um you saw before we sent in a",
    "start": "806519",
    "end": "812160"
  },
  {
    "text": "routing token um we're going to capture that routing token it's the last three uh bytes of",
    "start": "812160",
    "end": "818399"
  },
  {
    "text": "the packet as it goes through again we're just getting array of bytes nothing more than that we're gonna take that array of bytes we're gonna drop it",
    "start": "818399",
    "end": "823920"
  },
  {
    "text": "off the capture filter will pass that information that routing token to the next filter",
    "start": "823920",
    "end": "829800"
  },
  {
    "text": "the token router will be like oh cool I see you have a routing token um and as part of the metadata for",
    "start": "829800",
    "end": "835860"
  },
  {
    "text": "endpoints you can attach tokens to them strangely enough it'll look through the endpoints and say which one does it match to if it matches that endpoint",
    "start": "835860",
    "end": "841800"
  },
  {
    "text": "that's where it's going to send that information to and we'll see this in action in a sec but this this basically is all I need to",
    "start": "841800",
    "end": "848820"
  },
  {
    "text": "configure the filters inside n number of proxies inside my cluster when I'm running in managing on its mode",
    "start": "848820",
    "end": "857100"
  },
  {
    "text": "to create a fleet now I know some of you weren't here for the talk previously about running a gun is um I've gone as uh has Game servers and",
    "start": "857100",
    "end": "864959"
  },
  {
    "text": "it has fleets um kubernetes you have pods deployments game service fleets kind of the same so fleets are just big groups of Game",
    "start": "864959",
    "end": "870660"
  },
  {
    "text": "servers usually you want to run a bunch of them because they run they take a while to spin up you want to have warm sets so that you can basically grab one",
    "start": "870660",
    "end": "876240"
  },
  {
    "text": "of them which we'll talk about in a minute it's a crd basically what we're doing is",
    "start": "876240",
    "end": "881760"
  },
  {
    "text": "we're saying hey how many of them do we want and what does the container spec look like it's a pod template spec",
    "start": "881760",
    "end": "887820"
  },
  {
    "text": "um we do a lot of port management and all kinds of other stuff for today's talk I'm going to hand wave a lot of that away but essentially I'm going to",
    "start": "887820",
    "end": "893519"
  },
  {
    "text": "have a bunch of Game servers running inside my system they're going to spin up using this Fleet we're going to have three of them they're going to come up",
    "start": "893519",
    "end": "900000"
  },
  {
    "text": "in what's called a ready state which basically means they've loaded all their information and they can take players and we're going to have them available",
    "start": "900000",
    "end": "907380"
  },
  {
    "text": "but there is one other concept that's going to tie quilkin and a gun is together in a",
    "start": "907380",
    "end": "913740"
  },
  {
    "text": "really nice way I was saying before that um",
    "start": "913740",
    "end": "918779"
  },
  {
    "text": "when corkin's running in manager Gunners mode uh endpoints get picked up when Game servers exist they actually get",
    "start": "918779",
    "end": "924360"
  },
  {
    "text": "picked up when Game servers move into what we call in allocated mode um allocation is kind of a weird special",
    "start": "924360",
    "end": "930720"
  },
  {
    "text": "thing that agones does that kind of breaks the kubernetes Paradigm just a smidge",
    "start": "930720",
    "end": "936300"
  },
  {
    "text": "um we'll see it in action but it's more of an imperative command that basically says go find me uh go find me a set of",
    "start": "936300",
    "end": "944339"
  },
  {
    "text": "Game servers that match those selectors we have up there find the best one for me and Market is allocated move it to an",
    "start": "944339",
    "end": "950880"
  },
  {
    "text": "allocated State and that's this special State we were talking about before that says I have players don't mess with my",
    "start": "950880",
    "end": "957180"
  },
  {
    "text": "game because I need them to finish otherwise they post mean things on Reddit we don't like that that's bad",
    "start": "957180",
    "end": "963720"
  },
  {
    "text": "nobody likes that or they put things on Twitter or whatever people are using these days um but the other thing that Culkin does",
    "start": "963720",
    "end": "969779"
  },
  {
    "text": "it's also quite nice is it looks for annotations on those game servers to know what those routing tokens are and",
    "start": "969779",
    "end": "975720"
  },
  {
    "text": "so it manages it for us one of the extra things we can do during allocation is attach an annotation to",
    "start": "975720",
    "end": "981480"
  },
  {
    "text": "that game server that it's requesting so it'll be like oh cool go get me in that game server sweet I'm going to grab it",
    "start": "981480",
    "end": "987000"
  },
  {
    "text": "I'm going to mark it as allocated and then I'm also going to be like these are the routing tokens that are available to me right now I've you know made some",
    "start": "987000",
    "end": "993480"
  },
  {
    "text": "random number generation hopefully something cryptographically secure and I'm going to hand those over I could",
    "start": "993480",
    "end": "999120"
  },
  {
    "text": "do that at allocation time I can actually do that whenever as long as I have access to the kubernetes API and then in theory",
    "start": "999120",
    "end": "1005600"
  },
  {
    "text": "all that stuff should all roll through together and we suddenly have access control and",
    "start": "1005600",
    "end": "1010759"
  },
  {
    "text": "we can be able to do things like if this player has the right token they get access to their game server if they",
    "start": "1010759",
    "end": "1015920"
  },
  {
    "text": "don't they get booted off if they're doing something nefarious we can stop their access pretty quickly across a whole range of proxies",
    "start": "1015920",
    "end": "1022759"
  },
  {
    "text": "so should we try it in action cool this will be fine I also realized",
    "start": "1022759",
    "end": "1030678"
  },
  {
    "text": "that my cluster is still in the US um so the gameplay traffic might be a little slow but it should be fine all right uh",
    "start": "1030679",
    "end": "1037699"
  },
  {
    "text": "let me go I have no idea is that big enough or do I need to make it bigger bigger bigger all right let's do it",
    "start": "1037699",
    "end": "1045319"
  },
  {
    "text": "also going to do this over my shoulder just for funsies",
    "start": "1045319",
    "end": "1049480"
  },
  {
    "text": "we're good thumbs up excellent all right",
    "start": "1050419",
    "end": "1055539"
  },
  {
    "text": "this should work where's my mouse perfect perfect all right okay",
    "start": "1057020",
    "end": "1062240"
  },
  {
    "text": "I'm in the right spot I am not uh",
    "start": "1062240",
    "end": "1068419"
  },
  {
    "text": "let me jump to quilkin oh cat fantastic okay so I have",
    "start": "1068419",
    "end": "1078620"
  },
  {
    "text": "nothing in my hat um I have a cluster it has a gun is already installed on it",
    "start": "1078620",
    "end": "1083840"
  },
  {
    "text": "um I don't have any game servers um Game Servers",
    "start": "1083840",
    "end": "1089660"
  },
  {
    "text": "there's nothing there so the first thing I'm going to do is I'm going to create that Fleet of Game servers we saw before",
    "start": "1089660",
    "end": "1095679"
  },
  {
    "text": "so this is going to create that Fleet we saw with three Game Servers and the internet here is good yes",
    "start": "1097940",
    "end": "1105740"
  },
  {
    "text": "if we have a quick look we can see we have three of them they're going to take a little bit to spin up they're about a",
    "start": "1105740",
    "end": "1110780"
  },
  {
    "text": "gig in size each this is the dedicated game server for that game we were talking about called sonatic",
    "start": "1110780",
    "end": "1116000"
  },
  {
    "text": "um you'll see here the state there they each have an address import so if you ever play dedicated games behind the scenes you usually get a direct address",
    "start": "1116000",
    "end": "1122299"
  },
  {
    "text": "to connect to with a client a quick look beautiful they're all up and ready",
    "start": "1122299",
    "end": "1128120"
  },
  {
    "text": "fantastic all right so next thing we need to do is install a quilkin in its",
    "start": "1128120",
    "end": "1134120"
  },
  {
    "text": "manage mode",
    "start": "1134120",
    "end": "1139100"
  },
  {
    "text": "remind me what files I have in here ah there it is",
    "start": "1140480",
    "end": "1146080"
  },
  {
    "text": "so that's going to install um that config map we saw before with all the filters in it and we're gonna",
    "start": "1148039",
    "end": "1154760"
  },
  {
    "text": "see um that the XCS control plane has spun up so basically it's just a grpc endpoint that each of the proxies is",
    "start": "1154760",
    "end": "1160760"
  },
  {
    "text": "going to connect to so that it knows what configuration information to get",
    "start": "1160760",
    "end": "1166480"
  },
  {
    "text": "make sure that all works beautiful yay up and running fantastic Good Start",
    "start": "1168080",
    "end": "1174860"
  },
  {
    "text": "um we'll also see there's a there's a service for it too yeah perfect perfect okay next we need some",
    "start": "1174860",
    "end": "1181700"
  },
  {
    "text": "proxy pools to connect to and a UDP load balancer to throw in front of it um those will be set up so that",
    "start": "1181700",
    "end": "1189620"
  },
  {
    "text": "um all right proxy pools yeah there we go those will be set up so that they",
    "start": "1189620",
    "end": "1195740"
  },
  {
    "text": "connect back to that um manage Economist mode and they'll be looking at",
    "start": "1195740",
    "end": "1201460"
  },
  {
    "text": "the configuration that we've set up in that config map and what game servers we have available now all that game servers",
    "start": "1201460",
    "end": "1207200"
  },
  {
    "text": "are ready so we won't have any endpoints yet we can actually inspect that uh let's just have a quick look uh pods",
    "start": "1207200",
    "end": "1213740"
  },
  {
    "text": "beautiful that's all up and running all right let me show you what that looks like",
    "start": "1213740",
    "end": "1220900"
  },
  {
    "text": "um I'm actually we have a config endpoint so we're gonna have a quick look come here port forward yeah give me that",
    "start": "1221120",
    "end": "1229600"
  },
  {
    "text": "beautiful we'll just hide that for a sec nope wrong one",
    "start": "1230660",
    "end": "1236080"
  },
  {
    "text": "yeah so this now means that we can have a look at our config and that's a lot so",
    "start": "1236179",
    "end": "1243380"
  },
  {
    "text": "let's scroll up a little bit but we can see that the config on that proxy has those filters we were talking about before there's our our capture there's",
    "start": "1243380",
    "end": "1250160"
  },
  {
    "text": "our token router so it's going to grab that end of the packet and push it up uh we don't we can see we're connected",
    "start": "1250160",
    "end": "1255860"
  },
  {
    "text": "to our cocoa management system um but we don't have any endpoints or anything like that set up so let's get",
    "start": "1255860",
    "end": "1262100"
  },
  {
    "text": "that going um I'm also just gonna quickly check to",
    "start": "1262100",
    "end": "1268160"
  },
  {
    "text": "see if we have an external IP we do okay so that's where we're actually going to end up connecting to uh when we send out",
    "start": "1268160",
    "end": "1273620"
  },
  {
    "text": "traffic for our game so rather than connecting directly to the game server we can actually set it through a load balancer scatter the load across that",
    "start": "1273620",
    "end": "1279740"
  },
  {
    "text": "proxies and hopefully save ourselves some headaches all right let us",
    "start": "1279740",
    "end": "1287840"
  },
  {
    "text": "allocate a game server so I'm going to allocate a game server again basically being like the manual Matchmaker that",
    "start": "1287840",
    "end": "1292940"
  },
  {
    "text": "says okay I have a game server let's get this up and running so we'll create that stuff usually this is something like a Matchmaker does",
    "start": "1292940",
    "end": "1298820"
  },
  {
    "text": "through an API or something like that but we'll do it uh uh we'll do it on their behalf so I'm",
    "start": "1298820",
    "end": "1305059"
  },
  {
    "text": "just going to create this game server allocation um it's going to look through my game servers it's going to return me the",
    "start": "1305059",
    "end": "1310100"
  },
  {
    "text": "state of which one it is that's allocated so we can actually look at it this again means that we have players on",
    "start": "1310100",
    "end": "1315380"
  },
  {
    "text": "it it's it's demarcated it's special",
    "start": "1315380",
    "end": "1319120"
  },
  {
    "text": "awesome so it's allocated we can see that there so we can do scale up and down we could actually do rolling updates and all kinds of other fun stuff",
    "start": "1320419",
    "end": "1326480"
  },
  {
    "text": "the cluster without having to worry about whether or not something bad was going to happen Okay cool",
    "start": "1326480",
    "end": "1332240"
  },
  {
    "text": "um oh no now we have to actually connect to it and play a game but before we do that if you remember we need to attach",
    "start": "1332240",
    "end": "1338059"
  },
  {
    "text": "that routing token to the end of our packets before it goes through now I have this open source game",
    "start": "1338059",
    "end": "1343820"
  },
  {
    "text": "I don't want to mess with the code on this open source game that seems scary and I don't like that so we can run an",
    "start": "1343820",
    "end": "1351020"
  },
  {
    "text": "instance of the proxy to do this too right um in production you may do this as part",
    "start": "1351020",
    "end": "1356539"
  },
  {
    "text": "of your game client just because things like consoles are really restrictive on like what you can do with them but PC and other places this would probably be",
    "start": "1356539",
    "end": "1363020"
  },
  {
    "text": "perfectly fine um what I need to do is get my external IP",
    "start": "1363020",
    "end": "1371080"
  },
  {
    "text": "that looks pretty good this is gonna be great for my neck later",
    "start": "1371919",
    "end": "1377860"
  },
  {
    "text": "all right so you'll you'll uh where are we let's scroll down you'll recognize this from before this is",
    "start": "1378679",
    "end": "1385280"
  },
  {
    "text": "literally the same concatenate bite uh filtering that we were talking about previously so rather than",
    "start": "1385280",
    "end": "1393260"
  },
  {
    "text": "let's put our load balancer I can beautiful",
    "start": "1393260",
    "end": "1398360"
  },
  {
    "text": "awesome all right so Theory being is what we can do is we can spin up an instance Fair quilkin locally",
    "start": "1398360",
    "end": "1406340"
  },
  {
    "text": "cool that's going to accept our game client traffic which is going to stick",
    "start": "1406340",
    "end": "1411740"
  },
  {
    "text": "our client token on it to our routing token on it that's going to send to the load balancer then from the load balancer it'll go to one of the proxies",
    "start": "1411740",
    "end": "1417440"
  },
  {
    "text": "the proxy is gonna be like cool I see you have one of the tokens that's fantastic actually let me double let me show you something real quick before I",
    "start": "1417440",
    "end": "1423320"
  },
  {
    "text": "before I do this um we can actually look at this now but yeah it'll look at the token pass the",
    "start": "1423320",
    "end": "1429380"
  },
  {
    "text": "token and be like Ah that's the endpoint I need to send to and we'll be able to play a game but if we have a look at our config",
    "start": "1429380",
    "end": "1435799"
  },
  {
    "text": "real quick we can see our endpoints right we allocated a game server the management system sees that there's an address",
    "start": "1435799",
    "end": "1441740"
  },
  {
    "text": "there's our token on it our 456 very secure stuff so in theory this should",
    "start": "1441740",
    "end": "1446780"
  },
  {
    "text": "all work now okay moment of truth let's run our proxy",
    "start": "1446780",
    "end": "1452539"
  },
  {
    "text": "that's all up and running let's pop over here and let's run sonatic",
    "start": "1452539",
    "end": "1460700"
  },
  {
    "text": "this will be fun all right so rather than connecting to a remote address",
    "start": "1462620",
    "end": "1469000"
  },
  {
    "text": "I am 1.0127.0.0.1 I'm going to connect to 7000 which is",
    "start": "1469700",
    "end": "1476360"
  },
  {
    "text": "local and everything is working black screen for whatever reason this game is",
    "start": "1476360",
    "end": "1482360"
  },
  {
    "text": "actually a good thing don't tell me why um but yes now this is connecting to my guns cluster that is running over in I",
    "start": "1482360",
    "end": "1490880"
  },
  {
    "text": "think it's us West actually um but it's running through my local proxy and I got dead already wow that",
    "start": "1490880",
    "end": "1497720"
  },
  {
    "text": "was that was really fast uh that was on purpose uh for sure",
    "start": "1497720",
    "end": "1503720"
  },
  {
    "text": "um it's because I'm playing on a trackpad it's not not how bad I am at video games um but it's yeah it's running the",
    "start": "1503720",
    "end": "1508880"
  },
  {
    "text": "information through the proxy that is local through the UDP load balancer um and then and then into the game",
    "start": "1508880",
    "end": "1515299"
  },
  {
    "text": "server um people will always ask Mark what's the overhead for this um so usually we",
    "start": "1515299",
    "end": "1520940"
  },
  {
    "text": "see about a P99 about half a millisecond through the proxy um that's sort of worst case scenario",
    "start": "1520940",
    "end": "1526279"
  },
  {
    "text": "which is reasonable and fine it's not too bad um but it does mean yeah now we can nice",
    "start": "1526279",
    "end": "1531740"
  },
  {
    "text": "do nice things like either manipulate our traffic we can do this access",
    "start": "1531740",
    "end": "1536960"
  },
  {
    "text": "control like we're talking about before we can either remove or add stuff if we want to remove that annotation at",
    "start": "1536960",
    "end": "1542900"
  },
  {
    "text": "runtime from that game server because I'm doing something that I shouldn't be doing inside the game we're able to do that and you can start building out",
    "start": "1542900",
    "end": "1549500"
  },
  {
    "text": "architectures of proxies as well but there is actually something else that I want to show you that's also cool again we talking about breaking apart the",
    "start": "1549500",
    "end": "1555919"
  },
  {
    "text": "monolith it's very much that traditional monolithic microservices kind of conversation um I will I will exit this that is fine",
    "start": "1555919",
    "end": "1563000"
  },
  {
    "text": "but if I come over here and we refresh this page because it should be fine um yeah suddenly we can do stuff like have generic metrics for our UDP",
    "start": "1563000",
    "end": "1570500"
  },
  {
    "text": "communication that we wouldn't otherwise have necessarily been as easy to get to uh running this out of a game server um",
    "start": "1570500",
    "end": "1576740"
  },
  {
    "text": "I don't know if you know this but there's not really a Prometheus exporter for like Unity or unreal um would be really nice if there was if",
    "start": "1576740",
    "end": "1583279"
  },
  {
    "text": "actually I should talk to those people that'd be really handy if any of you are here can you write one of those thank you um but we can start seeing things like",
    "start": "1583279",
    "end": "1589700"
  },
  {
    "text": "Network traffic rates and and the information packet drops errors how many sessions we have the length again all",
    "start": "1589700",
    "end": "1595760"
  },
  {
    "text": "that nice stuff that you get from open source standards where you're like oh look I'm running basically a service",
    "start": "1595760",
    "end": "1601460"
  },
  {
    "text": "mesh where I can start to start pull this kind of information out we have lots of other cool stuff we're looking at doing",
    "start": "1601460",
    "end": "1607520"
  },
  {
    "text": "um one of the things I'm actively looking at right now is uh being able to like talk to external systems like if",
    "start": "1607520",
    "end": "1613159"
  },
  {
    "text": "you're rate limiting something and you've got someone who's sending way too many packets you know like they shouldn't be doing that we should tell like a firewall to stop them from doing",
    "start": "1613159",
    "end": "1618860"
  },
  {
    "text": "that or something like that we can do all kinds of interesting stuff there but again we start to break apart the monolith which I think is really",
    "start": "1618860",
    "end": "1625220"
  },
  {
    "text": "exciting um and is is particular to this particular use case but we can kind of start to set some standards as well",
    "start": "1625220",
    "end": "1632720"
  },
  {
    "text": "everything we're building here as well is very like simple in its oh you don't",
    "start": "1632720",
    "end": "1637940"
  },
  {
    "text": "need to see that um very simple and sort of its usage if you do need to like build it into your",
    "start": "1637940",
    "end": "1643159"
  },
  {
    "text": "game client which in some cases you will again what we're doing here it's adding a routing token to the end of a packet",
    "start": "1643159",
    "end": "1648980"
  },
  {
    "text": "um we're trying to be as simple and composable as possible we also have some unreal um clients in there as well if you want",
    "start": "1648980",
    "end": "1655159"
  },
  {
    "text": "to do that for those of us who work in video games I know there's a small pocket over there that's why I mention that all right cool",
    "start": "1655159",
    "end": "1662000"
  },
  {
    "text": "let's wrap it up so we saw a nice demo that actually meant that",
    "start": "1662000",
    "end": "1667220"
  },
  {
    "text": "um we can Implement uh UDP proxies and definitely I want to say like I'm not",
    "start": "1667220",
    "end": "1673039"
  },
  {
    "text": "definitely not the first to do this there's a bunch of prior art here that we've definitely leveraged across both wider Tech and the gaming industry but",
    "start": "1673039",
    "end": "1679940"
  },
  {
    "text": "suddenly yeah we can start to talk about open source standard tooling for this",
    "start": "1679940",
    "end": "1685400"
  },
  {
    "text": "kind of work um we can make it so that game servers are harder to take down we can have more",
    "start": "1685400",
    "end": "1690679"
  },
  {
    "text": "redundancy um we can kind of give some of the would have traditionally been probably some of",
    "start": "1690679",
    "end": "1696500"
  },
  {
    "text": "the more proprietary proxying solution for games um out to The Wider video game industry which makes me happy",
    "start": "1696500",
    "end": "1703820"
  },
  {
    "text": "um and it does also mean that in a space where there are no standards when you start",
    "start": "1703820",
    "end": "1709460"
  },
  {
    "text": "building proxies as we've seen like with everything else that we've seen through Envoy and like through traffic and through all the variety of proxies and",
    "start": "1709460",
    "end": "1715700"
  },
  {
    "text": "sidecars we've seen in the in the cloud native space if when you make it easy to do I don't say the right thing the",
    "start": "1715700",
    "end": "1721820"
  },
  {
    "text": "better things um then you can start to set those standards and that that also really excites me",
    "start": "1721820",
    "end": "1727760"
  },
  {
    "text": "so yeah this is this is literally what we what we ended up with uh with the demo that I showed um this isn't the",
    "start": "1727760",
    "end": "1733940"
  },
  {
    "text": "only way you could configure this you could do all kinds of other fun stuff you could be like here I'm gonna give",
    "start": "1733940",
    "end": "1739880"
  },
  {
    "text": "the game client three proxies out of the set of 20 that I have um maybe you'll get some of them maybe",
    "start": "1739880",
    "end": "1745520"
  },
  {
    "text": "you'll get all of them maybe I'll do fun things like honey pots and proxies when I know some people are not very nice",
    "start": "1745520",
    "end": "1750740"
  },
  {
    "text": "people and be like I'm just going to send all the bad traffic over here because I know it's getting bad traffic you can start doing all kinds of other",
    "start": "1750740",
    "end": "1756919"
  },
  {
    "text": "interesting things but yeah we have the iguana's XDS provider it talks to the dedicated game",
    "start": "1756919",
    "end": "1761960"
  },
  {
    "text": "server sees what's going on there and uh can manipulate all the rest of the proxies um so yeah so finally to",
    "start": "1761960",
    "end": "1768919"
  },
  {
    "text": "wrap up um I will also mention my business cards are down here in the front so if you think oh maybe in the",
    "start": "1768919",
    "end": "1774200"
  },
  {
    "text": "future I will have a question for Mark my contact details are there but we have active communities across both projects",
    "start": "1774200",
    "end": "1780860"
  },
  {
    "text": "um if you're interested in Game servers game server orchestration or just in general um operators and crds and extending",
    "start": "1780860",
    "end": "1787640"
  },
  {
    "text": "kubernetes in weird and wonderful ways agones.dev we have lots and lots of contributors there it's uh we have a slack that's",
    "start": "1787640",
    "end": "1793820"
  },
  {
    "text": "available as well quilkin um is been running for a couple years but it's still I would say relatively",
    "start": "1793820",
    "end": "1799100"
  },
  {
    "text": "new but but it's been growing quite nicely over the last last period um you find a Discord there you can see",
    "start": "1799100",
    "end": "1805039"
  },
  {
    "text": "the age of each project by which chat platform everyone uses we would definitely love uh to have you",
    "start": "1805039",
    "end": "1811220"
  },
  {
    "text": "contribute I do want to give some credits as well to the external Community I work with on quilkin especially those from Embark Luna De",
    "start": "1811220",
    "end": "1818000"
  },
  {
    "text": "Clos I started the project with affenia Uber who did a lot of the initial work",
    "start": "1818000",
    "end": "1823039"
  },
  {
    "text": "and Aaron power who's been doing a lot of the work on quilkin in the last little while and is absolutely killing",
    "start": "1823039",
    "end": "1828500"
  },
  {
    "text": "it okay finally um I know it's almost lunch time and you won't want to run but if you do have",
    "start": "1828500",
    "end": "1834380"
  },
  {
    "text": "questions the please walk up to microphones and ask them otherwise thank you very much for your time I know it's precious and really appreciate you",
    "start": "1834380",
    "end": "1840799"
  },
  {
    "text": "spending your Cube come with me I hope you learned something interesting [Applause]",
    "start": "1840799",
    "end": "1849279"
  }
]