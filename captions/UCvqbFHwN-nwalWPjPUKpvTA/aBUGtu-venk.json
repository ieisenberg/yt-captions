[
  {
    "text": "okay um we'll go ahead and get started now since it's 4:30 um hello I'm Karen",
    "start": "1120",
    "end": "6839"
  },
  {
    "text": "and this is sui we're part of the orchestration team at Robin Hood um where we manage our kubernetes clusters",
    "start": "6839",
    "end": "13799"
  },
  {
    "text": "and today what we'll be talking about is going through the Journey of how um Robin Hood's strategy for kubernetes um",
    "start": "13799",
    "end": "20640"
  },
  {
    "text": "authorization and authentication has evolved so to give you a little bit of",
    "start": "20640",
    "end": "27679"
  },
  {
    "text": "context um Robin Hood decide as a company to actually start using kubernetes at the end of 2018 and the",
    "start": "27679",
    "end": "35559"
  },
  {
    "text": "designed decision was to have um our own self-managed kues clusters on top of AWS",
    "start": "35559",
    "end": "43120"
  },
  {
    "text": "and that's still what we are using today and we went with a multi-tenant model so",
    "start": "43120",
    "end": "49160"
  },
  {
    "text": "each application gets its own namespace and every application has a corresponding team that owns it and a",
    "start": "49160",
    "end": "56680"
  },
  {
    "text": "team might own multiple Nam spaces if they have multiple applic appliations so um yeah in case you can't see it the top",
    "start": "56680",
    "end": "64040"
  },
  {
    "text": "is the kubernetes resources and um the two boxes inside are the name spaces and",
    "start": "64040",
    "end": "70680"
  },
  {
    "text": "here at the bottom um I have Google Groups because at that point in time um",
    "start": "70680",
    "end": "76119"
  },
  {
    "text": "that was something that already existed in the company um each team had a corresponding Google group and this",
    "start": "76119",
    "end": "82720"
  },
  {
    "text": "Google group was used for things like um emailing and also using Google Calendars",
    "start": "82720",
    "end": "87840"
  },
  {
    "text": "so we decided to Leverage The already um existing Google Groups and use that to",
    "start": "87840",
    "end": "94159"
  },
  {
    "text": "um get access to the kubernetes Clusters and Associated name spaces so because we",
    "start": "94159",
    "end": "99200"
  },
  {
    "text": "wanted to have each team to have access to the Nay spaces they own we created a",
    "start": "99200",
    "end": "104600"
  },
  {
    "text": "cluster rule for this um namespace admin and that included things that a regular",
    "start": "104600",
    "end": "110000"
  },
  {
    "text": "application team might need like managing their pods and we also created",
    "start": "110000",
    "end": "115040"
  },
  {
    "text": "a rule binding in every single Nam space to bind to that cluster rule",
    "start": "115040",
    "end": "120360"
  },
  {
    "text": "and use the Google Groups but um this covers application teams but you might be wondering um what",
    "start": "120360",
    "end": "127039"
  },
  {
    "text": "about infrastructure teams that might have needs to access resources across several namespaces or even to manage",
    "start": "127039",
    "end": "134360"
  },
  {
    "text": "cluster wide resources and for that we used a cluster rule called admin rule which is very",
    "start": "134360",
    "end": "141040"
  },
  {
    "text": "similar to the built-in cluster admin cluster rule which gives um permissions to do literally anything in the cluster",
    "start": "141040",
    "end": "148400"
  },
  {
    "text": "via the wild card version and resources and the Google group on the bottom right is the infrastructure",
    "start": "148400",
    "end": "155080"
  },
  {
    "text": "team and they are the ones that have access to this so um this was our",
    "start": "155080",
    "end": "161200"
  },
  {
    "text": "initial design and that worked fine when Robin Hood was a small startup with very",
    "start": "161200",
    "end": "166280"
  },
  {
    "text": "few Engineers but as the company grew this um initial design was no longer",
    "start": "166280",
    "end": "171480"
  },
  {
    "text": "going to work and the one of the primary reasons for that is that our",
    "start": "171480",
    "end": "177000"
  },
  {
    "text": "infrastructure team grew by 4X and more",
    "start": "177000",
    "end": "182120"
  },
  {
    "text": "um and this meant that if we kept our initial design there would be too many Engineers that have full cluster admin",
    "start": "182120",
    "end": "189239"
  },
  {
    "text": "access so we needed to do something about this and change our security",
    "start": "189239",
    "end": "194920"
  },
  {
    "text": "posture so what I have here is a table comparing um our original access policy",
    "start": "194920",
    "end": "202280"
  },
  {
    "text": "and I say that in quotes because it was not a formalized access policy mainly because it was pretty straightforward we",
    "start": "202280",
    "end": "208439"
  },
  {
    "text": "just defined admin access as people who had full permissions to do anything cluster wide and the people who were",
    "start": "208439",
    "end": "215799"
  },
  {
    "text": "allowed to have this admin access um was the well I put it as plural but really",
    "start": "215799",
    "end": "221480"
  },
  {
    "text": "there was one infrastructure team in the beginning um and non-admins so application teams just had their own",
    "start": "221480",
    "end": "228200"
  },
  {
    "text": "namespace scoped permissions um and we created a new access policy because of the problem",
    "start": "228200",
    "end": "234920"
  },
  {
    "text": "that we didn't want to give so many Engineers full cluster wide access um",
    "start": "234920",
    "end": "240000"
  },
  {
    "text": "and because this was more complicated than our original policy we needed to put it in a formal document and one",
    "start": "240000",
    "end": "248239"
  },
  {
    "text": "thing we started with was to actually uh modify our definition of what admin access means so we separated this into",
    "start": "248239",
    "end": "255840"
  },
  {
    "text": "two categories so the first category is first order admin access and what I mean",
    "start": "255840",
    "end": "262199"
  },
  {
    "text": "by first order is that someone who has access via a direct cluster role binding",
    "start": "262199",
    "end": "268000"
  },
  {
    "text": "reference has um first order access and that's not enough for defining what",
    "start": "268000",
    "end": "275000"
  },
  {
    "text": "admin access means um so we had a second category called second order and um as",
    "start": "275000",
    "end": "281520"
  },
  {
    "text": "an example of second order access um someone who can um manage the resources",
    "start": "281520",
    "end": "286800"
  },
  {
    "text": "within highly privileged name spaces like Cube system can be considered to have second order access because they",
    "start": "286800",
    "end": "292440"
  },
  {
    "text": "can um touch things like the API server so after we defined redefined what I've",
    "start": "292440",
    "end": "299120"
  },
  {
    "text": "been access means we also had to um set or decide who actually gets to have this",
    "start": "299120",
    "end": "305240"
  },
  {
    "text": "admin access and we wanted to make it something more complex than just granting to infrastructure teams so we",
    "start": "305240",
    "end": "312360"
  },
  {
    "text": "had finer grain guidelines for that and I'll talk about that a little bit more we kept our policy for application teams",
    "start": "312360",
    "end": "319440"
  },
  {
    "text": "the same because those were just names space scope permissions and that was not a security concern so the way we approached um the",
    "start": "319440",
    "end": "328479"
  },
  {
    "text": "problem between um getting from where we stood to um achieve our new access",
    "start": "328479",
    "end": "334720"
  },
  {
    "text": "policy is we enumerated the things that we had to do and we ranked it um in",
    "start": "334720",
    "end": "340080"
  },
  {
    "text": "order of priority so we wanted to tackle the solutions that would give us quick",
    "start": "340080",
    "end": "345240"
  },
  {
    "text": "wins so things that were low effort would would give us high impact and the",
    "start": "345240",
    "end": "350280"
  },
  {
    "text": "first step to do this was to um enforce fine grain admin access and what that",
    "start": "350280",
    "end": "356039"
  },
  {
    "text": "means is instead of granting um full wild card access access to infrastructure teams is is to actually",
    "start": "356039",
    "end": "361800"
  },
  {
    "text": "create an allow list of permissions instead to follow the principles of lease privilege and the first step to do",
    "start": "361800",
    "end": "369039"
  },
  {
    "text": "that was to actually survey um the existing state we wanted to see what",
    "start": "369039",
    "end": "374319"
  },
  {
    "text": "different Google Groups existed for the various infrastructure teams and look at where they were used in the arbac",
    "start": "374319",
    "end": "380560"
  },
  {
    "text": "resources and to start with we looked at a few open source tools um we used Q",
    "start": "380560",
    "end": "387720"
  },
  {
    "text": "scan which was actually a great starting point for identifying what sort of permissions um we might want to look at",
    "start": "387720",
    "end": "393800"
  },
  {
    "text": "more closely that teams had but we did run into a few limitations here one of which was that the results were noisy so",
    "start": "393800",
    "end": "401080"
  },
  {
    "text": "the custom cluster rule that we defined for application teams to use for namespace admin permissions would show",
    "start": "401080",
    "end": "407360"
  },
  {
    "text": "up in the results so it was listing a role binding in every single namespace so the results were very noisy and there",
    "start": "407360",
    "end": "414120"
  },
  {
    "text": "were also some feature gaps that we encountered where it didn't handle some edge cases well we also also um looked",
    "start": "414120",
    "end": "420479"
  },
  {
    "text": "at arbac tool but that also had limitations so we ended up just riding our own which was also useful for us to",
    "start": "420479",
    "end": "426240"
  },
  {
    "text": "have um custom logic like aggregating information across the different clusters that we",
    "start": "426240",
    "end": "431560"
  },
  {
    "text": "have so once we had the state of what it looked like then we could actually start",
    "start": "431560",
    "end": "437039"
  },
  {
    "text": "with um making those fine grain permissions and turning them into the arbac",
    "start": "437039",
    "end": "442599"
  },
  {
    "text": "resources and we started out with asking groups which permissions they actually need but I have this little question",
    "start": "442599",
    "end": "449400"
  },
  {
    "text": "work here because teams had no idea what they needed um the problem with granting people um full Wild Card Provisions is",
    "start": "449400",
    "end": "457080"
  },
  {
    "text": "that they don't really think about what they need access to because they can just do anything um so we relied on U we",
    "start": "457080",
    "end": "463639"
  },
  {
    "text": "REM relied on audit logs from the API server to see what historically these",
    "start": "463639",
    "end": "468759"
  },
  {
    "text": "teams were accessing and with that we were able to Define cluster roles for each team and",
    "start": "468759",
    "end": "475360"
  },
  {
    "text": "create the corresponding cluster role bindings and part of this exercise of",
    "start": "475360",
    "end": "480960"
  },
  {
    "text": "surveying the different um cluster rules that existed we actually found several",
    "start": "480960",
    "end": "486280"
  },
  {
    "text": "cluster rules that were quite privileged and were no longer used so we had to do",
    "start": "486280",
    "end": "491680"
  },
  {
    "text": "cleanup of those as well and next um I'll hand it off to sui",
    "start": "491680",
    "end": "498479"
  },
  {
    "text": "to talk about how we changed our Access Control mechanism for kubernetes thank you um so so far we looked at how our",
    "start": "498479",
    "end": "507400"
  },
  {
    "text": "arback looked like how we we have leveraged our back to Grant permissions to people now I'm going to talk about",
    "start": "507400",
    "end": "515518"
  },
  {
    "text": "how we designed a better Access Control mechanism but before we get to that I want to talk about where we were what we",
    "start": "515519",
    "end": "522518"
  },
  {
    "text": "had to kind of understand how we went on to design something new so initially",
    "start": "522519",
    "end": "528959"
  },
  {
    "text": "when we bootstrapped our clusters we used guard which is a third party web hook authenticator so generally the data",
    "start": "528959",
    "end": "536320"
  },
  {
    "text": "flow looks like users make Cube cuddle request and they pass in their ID token",
    "start": "536320",
    "end": "542519"
  },
  {
    "text": "uh as a better token to API server and the API server uses the web hook configuration which is passed as uh a",
    "start": "542519",
    "end": "549760"
  },
  {
    "text": "bunch of flags in the kuun API server configuration it reaches out to the web",
    "start": "549760",
    "end": "554800"
  },
  {
    "text": "hook authenticator and forwards the ID token so the web hook authenticator in this",
    "start": "554800",
    "end": "559880"
  },
  {
    "text": "case guard is responsible for verifying the token getting the relevant username",
    "start": "559880",
    "end": "565560"
  },
  {
    "text": "from it which is email for us um and guard uses Google Groups as we have",
    "start": "565560",
    "end": "571839"
  },
  {
    "text": "already established so it first checks if the domain in the username field is a",
    "start": "571839",
    "end": "577360"
  },
  {
    "text": "valid domain if the domain is valid then it makes another follow follow-up API",
    "start": "577360",
    "end": "583200"
  },
  {
    "text": "call to the Google admin directory API and lists all the groups that this email belongs to and this and it injects these",
    "start": "583200",
    "end": "590160"
  },
  {
    "text": "groups into the token review object and passes it back to API server which uses",
    "start": "590160",
    "end": "595360"
  },
  {
    "text": "this uh list of groups and the ARA configurations on the cluster to decide if the request should be authorized or",
    "start": "595360",
    "end": "602600"
  },
  {
    "text": "not so uh the question here is how would users be able to get this ID token to",
    "start": "602600",
    "end": "608720"
  },
  {
    "text": "present in the cube CTL request conveniently God provided us a uh binary",
    "start": "608720",
    "end": "615040"
  },
  {
    "text": "uh which is uh which is something you can invoke by running the command guard get token - or Google um once you run",
    "start": "615040",
    "end": "622240"
  },
  {
    "text": "this command uh it fetches the ID token and refresh token which are redacted here for a good reason uh the ID token",
    "start": "622240",
    "end": "629920"
  },
  {
    "text": "is subject to expire but the refresh token enables the cube C to fetch a new one whenever the issued ID token expires",
    "start": "629920",
    "end": "637279"
  },
  {
    "text": "without requiring any user intervention um you may be imagining like oh why is the client ID in secret",
    "start": "637279",
    "end": "643880"
  },
  {
    "text": "not deducted isn't it a secret as it says in the field uh looks like no it is",
    "start": "643880",
    "end": "650720"
  },
  {
    "text": "not a secret the reason being guard is a o client uh which is uh a desktop",
    "start": "650720",
    "end": "655800"
  },
  {
    "text": "application essentially so the client ID and the client see secret uh are hardcoded into the binary itself and the",
    "start": "655800",
    "end": "662800"
  },
  {
    "text": "client ID and secret are only used to get the ID token that the users can present when running the cube CDL",
    "start": "662800",
    "end": "668279"
  },
  {
    "text": "commands so the best part about Oath desktop app is it only runs against a",
    "start": "668279",
    "end": "673480"
  },
  {
    "text": "local host redirect or o URL so even if this client ID and secret are exposed uh",
    "start": "673480",
    "end": "679440"
  },
  {
    "text": "all that can be done is invoking a local host request and updating the cube",
    "start": "679440",
    "end": "684519"
  },
  {
    "text": "config file as you can see in the screenshot uh we have",
    "start": "684519",
    "end": "689720"
  },
  {
    "text": "you uh the client ID and secret are hardcoded what does that mean that means the client o client is a single point of",
    "start": "689720",
    "end": "697000"
  },
  {
    "text": "failure and with any given single point of failures what the risk is if it goes",
    "start": "697000",
    "end": "703360"
  },
  {
    "text": "down it literally takes down everything and that's exactly what happened for us",
    "start": "703360",
    "end": "708600"
  },
  {
    "text": "so all of a sudden all of our users started reporting that they're all uh they're not able to fetch the token or",
    "start": "708600",
    "end": "714760"
  },
  {
    "text": "not unable to run any Cube Cal commands and the error very discri descriptively is the O client was",
    "start": "714760",
    "end": "721160"
  },
  {
    "text": "deleted uh luckily we have a brake glass system so the admin were able to use this brake glass to troubleshoot uh what",
    "start": "721160",
    "end": "728240"
  },
  {
    "text": "was happening in the Clusters um unfortunately uh Google uh",
    "start": "728240",
    "end": "733639"
  },
  {
    "text": "uh guard runs as a part on the control print noes but the logs even at a trace level were only giving very basic",
    "start": "733639",
    "end": "740560"
  },
  {
    "text": "information like the token um has been received uh for review uh as you",
    "start": "740560",
    "end": "746519"
  },
  {
    "text": "generally do we try to turn everything off which is delete all the guard server parts and spin them back up but the",
    "start": "746519",
    "end": "753519"
  },
  {
    "text": "issue was not resolved so at this point we started talking to the Google Cloud admins uh in the company and trying to",
    "start": "753519",
    "end": "760680"
  },
  {
    "text": "understand what happened to the OD client we were trying to look at the audit logs we were not able to identify",
    "start": "760680",
    "end": "765920"
  },
  {
    "text": "what happened to the Google client uh a nugget of information that I want to add here is like this was set up in like",
    "start": "765920",
    "end": "772639"
  },
  {
    "text": "late 2018 like Karen was mentioning so none of us were around when this was",
    "start": "772639",
    "end": "778839"
  },
  {
    "text": "established so we had very limited idea of where this o client is coming from so that made it even more difficult for us",
    "start": "778839",
    "end": "784800"
  },
  {
    "text": "to figure out so then we engaged Google Cloud support uh but they were not able to provide any information so what we",
    "start": "784800",
    "end": "792000"
  },
  {
    "text": "ended up doing was we patched guard locally created our own o client built a",
    "start": "792000",
    "end": "798480"
  },
  {
    "text": "binary out of it and shipped it to every engineer's laptop for them to start authenticating",
    "start": "798480",
    "end": "805519"
  },
  {
    "text": "again but our hard to find what happened the O client has not stopped there we",
    "start": "806120",
    "end": "811240"
  },
  {
    "text": "started reaching out to the guard Community to understand what happened it's been a little over one year since",
    "start": "811240",
    "end": "817800"
  },
  {
    "text": "we filed the issue and it is still open and we have no idea what happened to this o client as you can see uh through the",
    "start": "817800",
    "end": "825240"
  },
  {
    "text": "slides uh we are already reaching a point where the O PL situation is not",
    "start": "825240",
    "end": "830399"
  },
  {
    "text": "ideal uh you can also see that the tokens Auto refresh that means uh it is",
    "start": "830399",
    "end": "835800"
  },
  {
    "text": "not necessarily that the tokens have shortlived access the tokens can be retrieved without any MFA uh from an",
    "start": "835800",
    "end": "843560"
  },
  {
    "text": "operational standpoint it was very difficult for us to look at the logs or understand uh what is going on from the",
    "start": "843560",
    "end": "849440"
  },
  {
    "text": "go guard server perspective also guard runs as a control plane component so that's an additional",
    "start": "849440",
    "end": "855600"
  },
  {
    "text": "add-on for us to maintain and you can imagine how cluster add-ons life cycle works so it's a lot of overhead for us",
    "start": "855600",
    "end": "861320"
  },
  {
    "text": "to maintain and support it so with this we have decided to stop using guard all",
    "start": "861320",
    "end": "868759"
  },
  {
    "text": "this calls for figuring out what the new system should look like so all of us came together and chalked up the",
    "start": "868759",
    "end": "875079"
  },
  {
    "text": "requirements for the new authen and odzi system that we want to use so the three key things that we were starting to look",
    "start": "875079",
    "end": "881600"
  },
  {
    "text": "at are from a security perspective we wanted groups but we don't want them to be used for anything but kubernetes",
    "start": "881600",
    "end": "888399"
  },
  {
    "text": "cluster access then we wanted to have shortlived access and have MFA associated with it but the token",
    "start": "888399",
    "end": "895199"
  },
  {
    "text": "lifetime is a big challenge like we don't want to be too secure that it expires every minute when you're",
    "start": "895199",
    "end": "900440"
  },
  {
    "text": "actively performing actions we don't want it to be too long that it is not it is going to be a security RK all over",
    "start": "900440",
    "end": "907199"
  },
  {
    "text": "again uh the third aspect is the reliability we wanted more auditability",
    "start": "907199",
    "end": "912320"
  },
  {
    "text": "observability as well as we want the system the IDP to be able to handle the load that is presented to",
    "start": "912320",
    "end": "918839"
  },
  {
    "text": "it so uh we narrowed down to using either",
    "start": "918839",
    "end": "924199"
  },
  {
    "text": "OCTA or AWS for this use case and we also wanted to use oid which is open ID connect uh the best",
    "start": "924199",
    "end": "931480"
  },
  {
    "text": "part about Oz as quoted here from kubernetes document uh is that the ID token once it's it's retrieved",
    "start": "931480",
    "end": "938920"
  },
  {
    "text": "kubernetes does not need to call back the identity provider so there is no overhead for us in terms of managing",
    "start": "938920",
    "end": "945480"
  },
  {
    "text": "another cluster add-on of any kind so after debating and experimenting",
    "start": "945480",
    "end": "952920"
  },
  {
    "text": "and evaluating we have decided to use OCTA which is very standard with other",
    "start": "952920",
    "end": "958199"
  },
  {
    "text": "things that that we use uh so the best part about API server is it allows us to",
    "start": "958199",
    "end": "963759"
  },
  {
    "text": "use multiple authenticators so the we were continuing to for the migration we",
    "start": "963759",
    "end": "969000"
  },
  {
    "text": "kept the web hook authenticator as is so that we don't disrupt people's workflows but we added new ODC Flags to the API",
    "start": "969000",
    "end": "976440"
  },
  {
    "text": "server configuration which include the issue or URL and the client ID which is for environment it's a conscious choice",
    "start": "976440",
    "end": "983360"
  },
  {
    "text": "we could be more granular but we chose for environment and we used email and groups as the means of validating the",
    "start": "983360",
    "end": "990800"
  },
  {
    "text": "tokens as well as using them for authorization so uh let's look at the",
    "start": "990800",
    "end": "997480"
  },
  {
    "text": "data flow now so the user logs into IDP uh then IDP provides the user with",
    "start": "997480",
    "end": "1004519"
  },
  {
    "text": "the ID token refresh token and an access token when the user makes the Cube Cal calls like before they present the ID",
    "start": "1004519",
    "end": "1011839"
  },
  {
    "text": "token um and as a better token now the API server looks at the better token",
    "start": "1011839",
    "end": "1019120"
  },
  {
    "text": "and it is now able to validate the jot which is Json web token uh that is",
    "start": "1019120",
    "end": "1024918"
  },
  {
    "text": "presented uh in the ID token the reason that APS server is able to do it is",
    "start": "1024919",
    "end": "1030839"
  },
  {
    "text": "because during the bootstrapping we provide a bunch of oidc flags so when it's first bootstrapping and",
    "start": "1030839",
    "end": "1037918"
  },
  {
    "text": "uh starting to run uh it sets up a handshake with the IDP and gets all the",
    "start": "1037919",
    "end": "1043959"
  },
  {
    "text": "relevant secrets to be able to validate the jot signature so once it verifies",
    "start": "1043959",
    "end": "1049400"
  },
  {
    "text": "that the jot is valid then it looks if the jot is expired if it is not expired",
    "start": "1049400",
    "end": "1055080"
  },
  {
    "text": "then we use the Google groups in the claims that we mentioned before to authorize the user and let them perform",
    "start": "1055080",
    "end": "1061320"
  },
  {
    "text": "the actions so this is how a sample ID token looks like AUD is the oath client",
    "start": "1061320",
    "end": "1067120"
  },
  {
    "text": "ID the email is the email of the user who is performing the action the groups are the list of groups that the uh email",
    "start": "1067120",
    "end": "1075600"
  },
  {
    "text": "is associated with but the question goes back to uh how can user get this ID",
    "start": "1075600",
    "end": "1081440"
  },
  {
    "text": "token and present uh it to API server so to be able to support this we used uh",
    "start": "1081440",
    "end": "1087720"
  },
  {
    "text": "another open source project called Cube lugin which is essentially a cube CTL plugin that we can use to perform oidc",
    "start": "1087720",
    "end": "1094679"
  },
  {
    "text": "login so on the client side they use the same ISS URL and the client ID that we have configured on the API server and we",
    "start": "1094679",
    "end": "1102520"
  },
  {
    "text": "try to extract the email and groups from this oidc login request and make sure",
    "start": "1102520",
    "end": "1108480"
  },
  {
    "text": "these are available in the token that they present so as you can imagine with any",
    "start": "1108480",
    "end": "1114600"
  },
  {
    "text": "new system there will be challenges um so even for this new system that we try",
    "start": "1114600",
    "end": "1120039"
  },
  {
    "text": "to build and migrate we land into some challenges surprisingly not from a",
    "start": "1120039",
    "end": "1125080"
  },
  {
    "text": "migration perspective but essentially from a perspective of how do we do authorization we already have these",
    "start": "1125080",
    "end": "1131280"
  },
  {
    "text": "groups and these groups are exclusive to kubernetes access so we wanted to see how we want to fit them into the role",
    "start": "1131280",
    "end": "1137799"
  },
  {
    "text": "bindings and cluster roll bindings uh Karen just talked about so we try to do",
    "start": "1137799",
    "end": "1143080"
  },
  {
    "text": "the same exercise we try to talk to people uh try to understand what they want we also did not want all the",
    "start": "1143080",
    "end": "1148840"
  },
  {
    "text": "cluster uh admins to have the same group so we wanted to kind of break it down",
    "start": "1148840",
    "end": "1153960"
  },
  {
    "text": "further and make it more grandular but the challenge with this is",
    "start": "1153960",
    "end": "1159679"
  },
  {
    "text": "how would the group ownership work like will the users be granted access as in",
    "start": "1159679",
    "end": "1165400"
  },
  {
    "text": "as in their their on boarding into the company or how do we do this and also what is the lifetime of this access so",
    "start": "1165400",
    "end": "1173640"
  },
  {
    "text": "initially we made it easy for ourselves and we said everybody has persisted",
    "start": "1173640",
    "end": "1179360"
  },
  {
    "text": "persistent privileged access but very soon we are like yes this is a good step",
    "start": "1179360",
    "end": "1185080"
  },
  {
    "text": "forward for the migration but we wanted to make it better so we took on",
    "start": "1185080",
    "end": "1190320"
  },
  {
    "text": "ourselves a challenge on how we want to remediate uh persistent privileged access",
    "start": "1190320",
    "end": "1196480"
  },
  {
    "text": "K thanks",
    "start": "1196480",
    "end": "1200240"
  },
  {
    "text": "okay so um now that we have um now that we have switched over from using Google",
    "start": "1201720",
    "end": "1208640"
  },
  {
    "text": "Groups to OCTA groups that enables us to actually um provide something called um",
    "start": "1208640",
    "end": "1214720"
  },
  {
    "text": "just in time privileged access and um the reason that we wanted to do this so kind of going back to when we",
    "start": "1214720",
    "end": "1221440"
  },
  {
    "text": "restructured our access policy um part of the um fine grained um part of the",
    "start": "1221440",
    "end": "1228240"
  },
  {
    "text": "policy for admin access is that there are some uh privileged permissions",
    "start": "1228240",
    "end": "1234200"
  },
  {
    "text": "cluster wide um that infrastructure teams don't need all of the time but they might have legitimate use cases for",
    "start": "1234200",
    "end": "1241360"
  },
  {
    "text": "um if a system is down if they need to help a team debug if they're setting something up um that's new and so for",
    "start": "1241360",
    "end": "1248760"
  },
  {
    "text": "that we need to provide these users um a way to just request that access",
    "start": "1248760",
    "end": "1255000"
  },
  {
    "text": "temporarily only while they need it and then have that expired um automatically so I'll do um a walk",
    "start": "1255000",
    "end": "1261960"
  },
  {
    "text": "through of what that flow looks like so up here on the screen um a user still makes um an access request the way that",
    "start": "1261960",
    "end": "1269159"
  },
  {
    "text": "they would normally um to join the user group The OCTA user group and then once",
    "start": "1269159",
    "end": "1275000"
  },
  {
    "text": "they are added to that group then they can refresh their OCTA ID token to actually pick up that group membership",
    "start": "1275000",
    "end": "1281679"
  },
  {
    "text": "information and then they can use um Cube CTL commands as normal to get the permissions that the group that they",
    "start": "1281679",
    "end": "1287760"
  },
  {
    "text": "just joint um has and where thej in time system comes",
    "start": "1287760",
    "end": "1293799"
  },
  {
    "text": "in is the access the automatic access revocation part so we use the automatic",
    "start": "1293799",
    "end": "1299880"
  },
  {
    "text": "group expiration tooling to actually periodically check if the user's access",
    "start": "1299880",
    "end": "1305159"
  },
  {
    "text": "request has expired or not and um this is something that we are actually",
    "start": "1305159",
    "end": "1310559"
  },
  {
    "text": "working on rolling out an onboarding currently and the initial challenges",
    "start": "1310559",
    "end": "1316640"
  },
  {
    "text": "that we faced were were actually not related to the technology part it was",
    "start": "1316640",
    "end": "1322039"
  },
  {
    "text": "entirely cultural we faced a lot of push back from the teams that we talked to at first and um that's expected because who",
    "start": "1322039",
    "end": "1330000"
  },
  {
    "text": "likes it when you take away permissions from them and you know add some friction to their process so similar to when we",
    "start": "1330000",
    "end": "1338000"
  },
  {
    "text": "were designing the actual Google Groups when we went and talked to the users to see how they felt we did the same thing",
    "start": "1338000",
    "end": "1344360"
  },
  {
    "text": "here we talked to the users asked them what their pain points were kind of presented like what we wanted the user",
    "start": "1344360",
    "end": "1350159"
  },
  {
    "text": "flow to look like and listen to their feedback and we had a PC where we had",
    "start": "1350159",
    "end": "1355400"
  },
  {
    "text": "people actually experience that user flow and we modified it based on their feedback as",
    "start": "1355400",
    "end": "1360799"
  },
  {
    "text": "well so um I'm going to talk about some of the takeaways overall from this um",
    "start": "1360799",
    "end": "1367039"
  },
  {
    "text": "whole journey and um ongoing process so like I just mentioned um I think it's",
    "start": "1367039",
    "end": "1372320"
  },
  {
    "text": "really important to talk to the users um I'm not sure about your teams but I think um it's easy to to work in a silo",
    "start": "1372320",
    "end": "1379960"
  },
  {
    "text": "and just kind of like work on the projects that you want to do and um feel like are right for the users but it's",
    "start": "1379960",
    "end": "1386360"
  },
  {
    "text": "really important to take their feedback into consideration um but a caveat here",
    "start": "1386360",
    "end": "1391720"
  },
  {
    "text": "is um you should sometimes take what they say with a grain of salt um one",
    "start": "1391720",
    "end": "1397200"
  },
  {
    "text": "thing that we encountered when we were actually surveying users on um what permissions they need and how they want",
    "start": "1397200",
    "end": "1403720"
  },
  {
    "text": "the structure to look at sometimes what they were telling us didn't actually match the data that we were looking at",
    "start": "1403720",
    "end": "1409880"
  },
  {
    "text": "so um do incorporate user feedback but also look at the data and fact check and",
    "start": "1409880",
    "end": "1416159"
  },
  {
    "text": "another takeaway is it's really important to implement um both best",
    "start": "1416159",
    "end": "1421679"
  },
  {
    "text": "practices for both um arbac and general and for infrastructure um for arbach one",
    "start": "1421679",
    "end": "1428600"
  },
  {
    "text": "thing that we are moving towards is to actually not let people um have their",
    "start": "1428600",
    "end": "1435039"
  },
  {
    "text": "individual um individual names like referenced in the role bindings and we want to rely more on the OCTA groups now",
    "start": "1435039",
    "end": "1443400"
  },
  {
    "text": "because the OCTA groups have that automatic exploration and have better governance on who is allowed to be in",
    "start": "1443400",
    "end": "1450320"
  },
  {
    "text": "which group so outside of testing environments we really um are leaning in on the um OCTA groups and another",
    "start": "1450320",
    "end": "1457840"
  },
  {
    "text": "infrastructure best practice which you're probably aware of is to use continuous deployment and have things",
    "start": "1457840",
    "end": "1463120"
  },
  {
    "text": "checked into code but we really felt the pain of um how in the past asked um when",
    "start": "1463120",
    "end": "1469120"
  },
  {
    "text": "Robin Hood was first starting out how some of the manual processes like really came to hurt us later because when we",
    "start": "1469120",
    "end": "1475520"
  },
  {
    "text": "were doing the cleanup of the unused cluster rules it was really really hard to trace back um what those rules were",
    "start": "1475520",
    "end": "1483240"
  },
  {
    "text": "used for we really had to hunt through logs to see which ones were in use um and funny but not really that funny",
    "start": "1483240",
    "end": "1490840"
  },
  {
    "text": "story is when I was doing the cleanup I actually accidentally removed a cluster roll that was still in use and and",
    "start": "1490840",
    "end": "1499080"
  },
  {
    "text": "because the it was not on continuous deployment it had to be recreated manually and we had to backport it into",
    "start": "1499080",
    "end": "1504720"
  },
  {
    "text": "code so um yeah really important to check in all of your resources as code and have it on",
    "start": "1504720",
    "end": "1510840"
  },
  {
    "text": "CD and um another learning that we took away um which we actually implemented when we moved to OCTA groups is to have",
    "start": "1510840",
    "end": "1517799"
  },
  {
    "text": "proper governance on user groups so um besides the reliability and issues and",
    "start": "1517799",
    "end": "1524120"
  },
  {
    "text": "the operational toil that we saw with um using Google Groups with guard is that",
    "start": "1524120",
    "end": "1529399"
  },
  {
    "text": "um the governance of Google Groups was difficult because the Google Groups were not used um just for a kubernetes",
    "start": "1529399",
    "end": "1535760"
  },
  {
    "text": "cluster um like we mentioned earlier it's just part of the regular onboarding process to get added to your teams",
    "start": "1535760",
    "end": "1541760"
  },
  {
    "text": "Google group because you know you need it for mailing and for calendar events",
    "start": "1541760",
    "end": "1546919"
  },
  {
    "text": "um but beyond that there were other problems where people might get added to other teams Google Groups because",
    "start": "1546919",
    "end": "1552320"
  },
  {
    "text": "they're interested in like the events that they're um interested in their team's events and want to see it show up",
    "start": "1552320",
    "end": "1558559"
  },
  {
    "text": "on their calendar as well so it was pretty messy and it wasn't exactly a onetoone mapping of Team um what who was",
    "start": "1558559",
    "end": "1566520"
  },
  {
    "text": "actually in a team and that team's corresponding Google group so by switching over to Octor groups and",
    "start": "1566520",
    "end": "1572520"
  },
  {
    "text": "having a better policy for who can create those user groups and um how people get added and removed from those",
    "start": "1572520",
    "end": "1579159"
  },
  {
    "text": "groups we moved away from those problems and lastly um having a way to provide um",
    "start": "1579159",
    "end": "1587360"
  },
  {
    "text": "Prov finding a way to request temporary access is very important for the",
    "start": "1587360",
    "end": "1593200"
  },
  {
    "text": "privileged access which people might need um only temporarily and um it's not",
    "start": "1593200",
    "end": "1599279"
  },
  {
    "text": "a good security practice to Grant those all the time but you still want to provide a way to users to get these",
    "start": "1599279",
    "end": "1605240"
  },
  {
    "text": "permissions because they do have legitimate reasons um to use those and you don't want to um have too much toil",
    "start": "1605240",
    "end": "1612200"
  },
  {
    "text": "in their process so yeah these are all the takeaways that we had and it is still an Ono going process so I'm sure",
    "start": "1612200",
    "end": "1619720"
  },
  {
    "text": "we will learn more and oh yeah quick blurb we are hiring so check out our",
    "start": "1619720",
    "end": "1626039"
  },
  {
    "text": "careers page and now opening up the floor if anyone has any",
    "start": "1626039",
    "end": "1632720"
  },
  {
    "text": "questions thanks for presentation uh I wonder if you can elaborate what was the",
    "start": "1632720",
    "end": "1638200"
  },
  {
    "text": "timeline of adoption of this new authorization approach and how you scheduled",
    "start": "1638200",
    "end": "1643399"
  },
  {
    "text": "it um are you referring from the migration to the OCTA groups yes um when did we start yeah so as",
    "start": "1643399",
    "end": "1652799"
  },
  {
    "text": "mentioned before uh there are two means of apsr allows you to have more than one",
    "start": "1652799",
    "end": "1657880"
  },
  {
    "text": "authentication mechanism so it was very transparent from a user perspective so we added the new ODC based authorization",
    "start": "1657880",
    "end": "1665200"
  },
  {
    "text": "and authentication but we continue to support the old uh means of doing things",
    "start": "1665200",
    "end": "1670640"
  },
  {
    "text": "and we did a lot of dog footing we adopted within our INF teams and eventually onboarded like into the",
    "start": "1670640",
    "end": "1676720"
  },
  {
    "text": "application teams so that uh we know all the Pains of doing uh the wrong things fixing it and making it better for",
    "start": "1676720",
    "end": "1682840"
  },
  {
    "text": "everyone so I would say end to end it was around like 6 months of migration",
    "start": "1682840",
    "end": "1688159"
  },
  {
    "text": "from it when it began versus when we ripped off God entirely from our ecosystem thank",
    "start": "1688159",
    "end": "1695320"
  },
  {
    "text": "you uh forgive me if this is a stupid question but uh I heard earlier that you",
    "start": "1697279",
    "end": "1702320"
  },
  {
    "text": "were uh based in gcp did you have any problems with uh like gcp project rule uh roles granting like additional access",
    "start": "1702320",
    "end": "1709679"
  },
  {
    "text": "to users that um you like weren't intending on a project by project basis or anything like that um",
    "start": "1709679",
    "end": "1717600"
  },
  {
    "text": "so we were using gcp only for um using guard like our kuber clusters themselves",
    "start": "1717600",
    "end": "1724600"
  },
  {
    "text": "are not like managed on Google yeah for guard to be able to have certain service",
    "start": "1724600",
    "end": "1729840"
  },
  {
    "text": "account to be able to kind of make those Google APA calls is the only use case",
    "start": "1729840",
    "end": "1734880"
  },
  {
    "text": "where we use the gcp projects okay cool thank",
    "start": "1734880",
    "end": "1739919"
  },
  {
    "text": "you are you guys worried about the amount of groups you're adding to individual users and kind of blowing up",
    "start": "1739919",
    "end": "1746200"
  },
  {
    "text": "those oidc tokens so some type of like principal store versus I guess this kind",
    "start": "1746200",
    "end": "1752360"
  },
  {
    "text": "of rback approach yeah so that was definitely something that we looked into when we were actually designing the OCTA",
    "start": "1752360",
    "end": "1758080"
  },
  {
    "text": "groups um and that's part of like the data collection that we were talking about where if like we had gone with um",
    "start": "1758080",
    "end": "1763720"
  },
  {
    "text": "like every single you know cluster rule gets an OCTA group then some team that are like why want like all of these",
    "start": "1763720",
    "end": "1769159"
  },
  {
    "text": "permissions they'd be in you know like I don't know 40 OCTA groups or something like that so um but those are those are",
    "start": "1769159",
    "end": "1775960"
  },
  {
    "text": "the edge cases right so for the majority of users they are in their team based OCTA group and that's all they need to",
    "start": "1775960",
    "end": "1782519"
  },
  {
    "text": "be in but um for the edge cases we kind of had to find the balance between um",
    "start": "1782519",
    "end": "1787640"
  },
  {
    "text": "like being in too many groups so um we decided there that for certain cluster",
    "start": "1787640",
    "end": "1793480"
  },
  {
    "text": "rules we might want to just have um we would we would have the group associated",
    "start": "1793480",
    "end": "1799240"
  },
  {
    "text": "with that team like used in that cluster role if that answers your question okay and then I guess what is the process for",
    "start": "1799240",
    "end": "1804960"
  },
  {
    "text": "not creating too many groups and onboarding a new group so essentially uh the application",
    "start": "1804960",
    "end": "1812519"
  },
  {
    "text": "teams don't have permissions to manage the role bindings so it's essentially something that we will have to do so",
    "start": "1812519",
    "end": "1818159"
  },
  {
    "text": "there's more control there um and also the OCTA group creation is not like everybody in the company can do either",
    "start": "1818159",
    "end": "1824799"
  },
  {
    "text": "so there are some Productions and Gils from that perspective Ive uh but if you're talking about like the payload in",
    "start": "1824799",
    "end": "1830679"
  },
  {
    "text": "the HTTP request that is more controll through the Rex mechanisms and the prefixes that you can set up so that the",
    "start": "1830679",
    "end": "1838200"
  },
  {
    "text": "payload is not too large to be able to handle it okay thank",
    "start": "1838200",
    "end": "1843519"
  },
  {
    "text": "you thank you for nice presentation my question is regarding the fine grain",
    "start": "1845279",
    "end": "1850840"
  },
  {
    "text": "aess have you thought through or any plan for having let's say have your cluster with different name spaces and",
    "start": "1850840",
    "end": "1858919"
  },
  {
    "text": "different teams are having access to those different name spaces and within that different resources any like f gr",
    "start": "1858919",
    "end": "1865639"
  },
  {
    "text": "access like okay this team has access to this name space only read only within",
    "start": "1865639",
    "end": "1871720"
  },
  {
    "text": "that also some resources are very restricted and stuff like that so um",
    "start": "1871720",
    "end": "1877320"
  },
  {
    "text": "that's something that we would love to do in the future but um for now we considered um or for now we're more",
    "start": "1877320",
    "end": "1884480"
  },
  {
    "text": "focused on the cluster wide um permissions because because those are a lot more powerful than the names space",
    "start": "1884480",
    "end": "1890159"
  },
  {
    "text": "names space scoped ones but certainly like we are aware that um some applications maybe have more strict",
    "start": "1890159",
    "end": "1896039"
  },
  {
    "text": "requirements than other ones um so something that we have planned um but have not worked on yet okay thank",
    "start": "1896039",
    "end": "1904440"
  },
  {
    "text": "you hi thanks for the presentation actually that previous question was basically identical to my own I guess a",
    "start": "1904919",
    "end": "1911480"
  },
  {
    "text": "follow-up that I had is I'm curious how much of this was manual as far as your",
    "start": "1911480",
    "end": "1916559"
  },
  {
    "text": "team having to provision access and Define what the scope of access is versus how much of it could be",
    "start": "1916559",
    "end": "1922760"
  },
  {
    "text": "self-service like I imagine now you have a lot of teams and you having to manually sort of um audit each request",
    "start": "1922760",
    "end": "1928919"
  },
  {
    "text": "can be pretty daunting um so that's a great question",
    "start": "1928919",
    "end": "1934240"
  },
  {
    "text": "um so when we first started uh as Karen was mentioning everybody had star access",
    "start": "1934240",
    "end": "1940000"
  },
  {
    "text": "so it was not a problem when we first started but we looked at the data and we",
    "start": "1940000",
    "end": "1945840"
  },
  {
    "text": "provided them a little more granular access but since then we have not essentially received more requests",
    "start": "1945840",
    "end": "1952519"
  },
  {
    "text": "because we were a lot more data driven we were looking at past 12 to 18 months of data but yes it is subject to change",
    "start": "1952519",
    "end": "1960320"
  },
  {
    "text": "when more custom resources are added um and things like that but because we have",
    "start": "1960320",
    "end": "1965880"
  },
  {
    "text": "uh continuous deployment it would be as simple as for them to submit a diff um and after that everything is handled for",
    "start": "1965880",
    "end": "1972919"
  },
  {
    "text": "them and we have very fast based roll out especially for for role Bindings",
    "start": "1972919",
    "end": "1978039"
  },
  {
    "text": "that way they can get their access in short duration and don't have to wait for days or",
    "start": "1978039",
    "end": "1984000"
  },
  {
    "text": "hours got it so they would make a PR and you would approve it and then it would",
    "start": "1984000",
    "end": "1989200"
  },
  {
    "text": "get integrated is that what you're saying yeah like so far we haven't had to do it but if you that is how we",
    "start": "1989200",
    "end": "1995519"
  },
  {
    "text": "envision it to be done okay thank you um just some context I'm asking from the perspective of someone that works for a",
    "start": "1995519",
    "end": "2002039"
  },
  {
    "text": "cloud service provider that is going to be building out an authorization management system on top of a managed",
    "start": "2002039",
    "end": "2007919"
  },
  {
    "text": "kubernetes offering so I'm picking everybody's brains as far as how some of this works so I guess last question",
    "start": "2007919",
    "end": "2013840"
  },
  {
    "text": "would be how different would you have designed things if you were designing this management system not for um",
    "start": "2013840",
    "end": "2019840"
  },
  {
    "text": "internal users so employees of your company but for um like B2B like people",
    "start": "2019840",
    "end": "2025320"
  },
  {
    "text": "whose data you might not have access to that's a very interesting question um",
    "start": "2025320",
    "end": "2033440"
  },
  {
    "text": "I would probably say um and not a lot would change except we",
    "start": "2033440",
    "end": "2039679"
  },
  {
    "text": "would probably start with very basic read only access and from there people",
    "start": "2039679",
    "end": "2045960"
  },
  {
    "text": "are able to kind of request access and add more permissions but we would",
    "start": "2045960",
    "end": "2051040"
  },
  {
    "text": "probably not be asking them to add permissions to like oh I want permissions to create my own role bindings for example so we would be",
    "start": "2051040",
    "end": "2057919"
  },
  {
    "text": "little more cautious there but if they want more access they can get it but we'll be more data driven and probably",
    "start": "2057919",
    "end": "2065000"
  },
  {
    "text": "revoke those permissions if it's unused for like last 30 days for example so to maintain the Clean Slate over and over",
    "start": "2065000",
    "end": "2072000"
  },
  {
    "text": "again okay thank you very much hey thanks for the talk uh I had a",
    "start": "2072000",
    "end": "2078560"
  },
  {
    "text": "question on feel free to correct me if my understanding of this is wrong but you previously had Google Groups people",
    "start": "2078560",
    "end": "2084398"
  },
  {
    "text": "managing access to teams via those Google Groups now you have OCTA groups and OCTA groups are managing uh the The",
    "start": "2084399",
    "end": "2090919"
  },
  {
    "text": "Binding the role bindings and all that stuff who was like how are you protecting that the same same people",
    "start": "2090919",
    "end": "2097680"
  },
  {
    "text": "can't modify those OCTA groups and and you have a duplicate of some duplication",
    "start": "2097680",
    "end": "2102839"
  },
  {
    "text": "of information there too right uh is is that something you guys are trying to deprecate off Google like what's the",
    "start": "2102839",
    "end": "2108240"
  },
  {
    "text": "situation there so part of the reason why we wanted to move from Google Groups to OCTA groups we're still using Google",
    "start": "2108240",
    "end": "2114640"
  },
  {
    "text": "Groups you know for all of the Google things but um the company was kind of",
    "start": "2114640",
    "end": "2120480"
  },
  {
    "text": "centralizing on us using OCTA groups for accessing other things like outside of kubernetes so it did make sense for us",
    "start": "2120480",
    "end": "2127200"
  },
  {
    "text": "to use that as well um and as for the drift question yeah that's definitely",
    "start": "2127200",
    "end": "2132800"
  },
  {
    "text": "something that were that was in discussion when um we were choosing which solution and um as for the",
    "start": "2132800",
    "end": "2141040"
  },
  {
    "text": "management of Google Groups it wasn't like a free-for-all where anyone could add or remove um it was there wasn't as",
    "start": "2141040",
    "end": "2148040"
  },
  {
    "text": "much control for who could create Google Groups but once it was created then um typically if it was like a team-based",
    "start": "2148040",
    "end": "2154200"
  },
  {
    "text": "Google group then the manager would be the one who's allowed to add or remove people um and as for drift of group",
    "start": "2154200",
    "end": "2162280"
  },
  {
    "text": "membership um we don't have a solution for that something that we had talked about um was like sinking from um",
    "start": "2162280",
    "end": "2170440"
  },
  {
    "text": "directly from uh like oh like from work days like team membership but the reason",
    "start": "2170440",
    "end": "2176280"
  },
  {
    "text": "that we didn't want to go for um go for that is because sometimes that can be out of sync and then you would have to",
    "start": "2176280",
    "end": "2182240"
  },
  {
    "text": "you know do some manual changes there which is why we wanted to have the oct groups that was just dedicated for",
    "start": "2182240",
    "end": "2188520"
  },
  {
    "text": "kubernetes Access and who's managing those OCTA groups um so that's managed",
    "start": "2188520",
    "end": "2193599"
  },
  {
    "text": "by the security team okay so it's well audited yeah and also like even if you",
    "start": "2193599",
    "end": "2199000"
  },
  {
    "text": "create an OCTA group the membership is not granted by default so we would still",
    "start": "2199000",
    "end": "2204160"
  },
  {
    "text": "we would still expect users to submit a request to be able to get access to the OCTA group and there will be a",
    "start": "2204160",
    "end": "2210240"
  },
  {
    "text": "designated owners associated with the group itself who would be accepting uh",
    "start": "2210240",
    "end": "2215680"
  },
  {
    "text": "the request to join the group group and in some of the critical groups and role bindings we made sure there are more",
    "start": "2215680",
    "end": "2222800"
  },
  {
    "text": "than one layers of approvals so that it could be done by some of the admins or",
    "start": "2222800",
    "end": "2227880"
  },
  {
    "text": "infra people so that it's more catered and more careful got it makes sense thanks thanks everybody so that's going",
    "start": "2227880",
    "end": "2234920"
  },
  {
    "text": "to be all the questions for this session if it's okay if you have other questions you can meet when we step off stage and",
    "start": "2234920",
    "end": "2241200"
  },
  {
    "text": "get ready for the next presentation thank you right",
    "start": "2241200",
    "end": "2248599"
  }
]