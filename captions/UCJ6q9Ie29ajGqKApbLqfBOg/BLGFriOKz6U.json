[
  {
    "text": "thanks all for coming my name is Ivan christic and I head security engineering and architecture for Apple really really",
    "start": "199",
    "end": "5480"
  },
  {
    "text": "happy to be here and tell you about three iOS security mechanisms one of which is new to iOS 10 uh in a pretty",
    "start": "5480",
    "end": "12799"
  },
  {
    "text": "great level of detail but before I do that because everyone has been asking",
    "start": "12799",
    "end": "17920"
  },
  {
    "text": "let's talk about decrypted kernel caches so as most of you know sounds",
    "start": "17920",
    "end": "24599"
  },
  {
    "text": "like by the laughter in the iOS 10 betas we shipped uh Colonel CES unencrypted",
    "start": "24599",
    "end": "31080"
  },
  {
    "text": "and then in the subsequent beta we actually shipped for pre iPhone 5S devices even iboot and boot logos",
    "start": "31080",
    "end": "36719"
  },
  {
    "text": "unencrypted so yes this is on purpose um we from time to time revisit the",
    "start": "36719",
    "end": "41760"
  },
  {
    "text": "efficacy of some of our security mechanisms and in this case while doing some other optimizations we took a look",
    "start": "41760",
    "end": "47239"
  },
  {
    "text": "and realized that we could simply remove this encryption and uh not in any way impact platform security so there is uh",
    "start": "47239",
    "end": "54399"
  },
  {
    "text": "no impact to the encryption of user data it was simply a way to do an optimization and that's really all there",
    "start": "54399",
    "end": "60239"
  },
  {
    "text": "is to it so with that let's talk about hardened webkit jit mapping this is a",
    "start": "60239",
    "end": "66360"
  },
  {
    "text": "new feature in iOS 10 and as background so you understand where this is coming from uh JavaScript",
    "start": "66360",
    "end": "73920"
  },
  {
    "text": "on iOS uh in Safari requires just in time compilation to give a really great",
    "start": "73920",
    "end": "79840"
  },
  {
    "text": "uh JavaScript performance but IOS as a platform normally enforces code signing on every executable page so clearly this",
    "start": "79840",
    "end": "86759"
  },
  {
    "text": "is a conflict and in order to bring the jit to safario iOS we've had to relax",
    "start": "86759",
    "end": "92360"
  },
  {
    "text": "the normal code signing policy and allow the jit to emit new unsigned native code",
    "start": "92360",
    "end": "98720"
  },
  {
    "text": "and the way they used to work in iOS 9 is there was this uh 32 megabyte uh jit",
    "start": "98720",
    "end": "103880"
  },
  {
    "text": "memory region uh it was readable writable and executable and what that meant is that an attacker who had a",
    "start": "103880",
    "end": "110680"
  },
  {
    "text": "right anyware primitive that was uh exploitable from JavaScript could actually use it for arbitrary code",
    "start": "110680",
    "end": "116079"
  },
  {
    "text": "execution because they could take their shell code they could put it into the uh jit region and simply jump to",
    "start": "116079",
    "end": "124159"
  },
  {
    "text": "it on arm processors it used to be the case that the read bit for uh memory",
    "start": "125280",
    "end": "132280"
  },
  {
    "text": "page protections was implicit every page was readable but in rv8 that changed they actually introduced support for",
    "start": "132280",
    "end": "137959"
  },
  {
    "text": "execute only memory and we built the software side of this in the iOS 10 kernel so what this lets us do is pretty",
    "start": "137959",
    "end": "144640"
  },
  {
    "text": "interesting we can now emit secret data into a page that the process can execute",
    "start": "144640",
    "end": "150800"
  },
  {
    "text": "but the process itself cannot read so what are we going to do with",
    "start": "150800",
    "end": "156080"
  },
  {
    "text": "this well we're going to take our jit memory region and that same physical jit memory we're actually going to create",
    "start": "156080",
    "end": "161879"
  },
  {
    "text": "two virtual mappings one of them is going to be executable one of them is going to be writeable and the writeable",
    "start": "161879",
    "end": "168159"
  },
  {
    "text": "mapping will be at a secret location here's what I mean we create",
    "start": "168159",
    "end": "174280"
  },
  {
    "text": "these two mappings we put the writable mapping at a random secret address then we create a specialized mem copy that",
    "start": "174280",
    "end": "182000"
  },
  {
    "text": "actually has the address of the secret writable region as immediate values inside this new mem copy that we're",
    "start": "182000",
    "end": "188080"
  },
  {
    "text": "emitting we then make that M Copy execute only and discard the address of the writable mapping from elsewhere in",
    "start": "188080",
    "end": "194319"
  },
  {
    "text": "the process now we use this specialized nem copy for all of our jit Rite",
    "start": "194319",
    "end": "200000"
  },
  {
    "text": "operations so here's the replicate code that does this the green uh shows where we actually Mark our new mem copy as",
    "start": "200000",
    "end": "206879"
  },
  {
    "text": "execute only and then later on in the code we simply zero out the address of",
    "start": "206879",
    "end": "212519"
  },
  {
    "text": "the writable mapping from elsewhere in that process so if this is hard to visualize",
    "start": "212519",
    "end": "218040"
  },
  {
    "text": "here's what it looks like this is IOS 9 single region read write execute iOS 10 still one physical memory region but two",
    "start": "218040",
    "end": "224920"
  },
  {
    "text": "different mappings the executable one on the left the writable one on the right and then in the red you can see our",
    "start": "224920",
    "end": "231040"
  },
  {
    "text": "execute only page that has the specialized M Copy we've emitted and the way this works is you call the M Copy",
    "start": "231040",
    "end": "237680"
  },
  {
    "text": "with a buffer this is what the jit normally does it uses the secret address of the rable region that's inside of it",
    "start": "237680",
    "end": "244560"
  },
  {
    "text": "to actually move the buffer into the rable region because these are two mappings pointing to the same memory",
    "start": "244560",
    "end": "250519"
  },
  {
    "text": "that makes it appear in the executable region to which we can simply jump but",
    "start": "250519",
    "end": "256120"
  },
  {
    "text": "the process other than the M Copy function doesn't know where the rable region is so let me actually show you",
    "start": "256120",
    "end": "262160"
  },
  {
    "text": "what this looks like",
    "start": "262160",
    "end": "265600"
  },
  {
    "text": "I have two phones here and the one we're connected to right now when the top",
    "start": "271600",
    "end": "276720"
  },
  {
    "text": "piece goes away here let me show you here so this is an iPhone running uh iOS",
    "start": "276720",
    "end": "283440"
  },
  {
    "text": "93 and if we look at the memory map for the web content process which includes",
    "start": "283440",
    "end": "288720"
  },
  {
    "text": "the Safari jit you'll basically see these two guard pages and then you'll see one 32 megabyte region that's",
    "start": "288720",
    "end": "294680"
  },
  {
    "text": "readable writable and executable and this is our normal jit region but if I switch to the iOS 10",
    "start": "294680",
    "end": "302560"
  },
  {
    "text": "phone it looks a little bit different we still have our guard pages but we now have one mapping that's executable one",
    "start": "302639",
    "end": "309759"
  },
  {
    "text": "mapping that's writable and we have this execute only mapping so let me show you what's in there I'm going to attach a",
    "start": "309759",
    "end": "316759"
  },
  {
    "text": "debugger to the web content process and we'll take the address of",
    "start": "316759",
    "end": "322919"
  },
  {
    "text": "our executor only region and see what's",
    "start": "322919",
    "end": "328240"
  },
  {
    "text": "there so what we do here is as immediate values we'll encode the address you read",
    "start": "328240",
    "end": "333360"
  },
  {
    "text": "this from the bottom up 1708 a c0000 that is the address if I scroll up of",
    "start": "333360",
    "end": "339440"
  },
  {
    "text": "our writable region right there and then the rest of this is effectively just the mem copy you would",
    "start": "339440",
    "end": "345520"
  },
  {
    "text": "expect and the way this works from inside the process if we take a look at for example the readable and executable",
    "start": "345520",
    "end": "352840"
  },
  {
    "text": "region and from the context of the process we attempt to read what's in it",
    "start": "352840",
    "end": "359919"
  },
  {
    "text": "that'll succeed it'll return a zero error code but if I take our execute only mapping which has the mem copy",
    "start": "363120",
    "end": "370160"
  },
  {
    "text": "function which includes the",
    "start": "370160",
    "end": "373240"
  },
  {
    "text": "secret that simply fails bad access exception the memory is not readable only executable",
    "start": "375639",
    "end": "383479"
  },
  {
    "text": "so where this gets us is that an attacker who simply has a right anywhere primitive from the context of uh",
    "start": "392599",
    "end": "399240"
  },
  {
    "text": "JavaScript can no longer use it uh by itself for arbitrary code execution in the process instead they have to subvert",
    "start": "399240",
    "end": "405960"
  },
  {
    "text": "control flow usually through r or a similar mechanism it's kind of a nice mitigation that raises the cost of",
    "start": "405960",
    "end": "411440"
  },
  {
    "text": "exploiting memory corruption bugs in particular in",
    "start": "411440",
    "end": "416039"
  },
  {
    "text": "webkit so I want to move on to uh the future I'm going to be talking about which is data protection and specifically how it uses the secure",
    "start": "417160",
    "end": "423440"
  },
  {
    "text": "Enclave processor in iOS devices data protection is the name for",
    "start": "423440",
    "end": "430440"
  },
  {
    "text": "the feature that protects all user data add rest on our devices and when we set out to design this we had a pretty clear",
    "start": "430440",
    "end": "437720"
  },
  {
    "text": "set of goals in mind we wanted user data to be protected with strong cryptographic Keys No offline attacks",
    "start": "437720",
    "end": "443919"
  },
  {
    "text": "which meant that the keys protecting user data had to be bound to the hardware no Brute Force so hard limit on",
    "start": "443919",
    "end": "449599"
  },
  {
    "text": "the number of incorrect passcard attempts and we wanted to build something that could be used as a base",
    "start": "449599",
    "end": "454840"
  },
  {
    "text": "for secure alternative unlock mechanisms like Biometrics in touch ID and the auto unlock feature which is new to Mac OS",
    "start": "454840",
    "end": "461479"
  },
  {
    "text": "Sierra and lets you unlock your Mac from your Apple watch but we also had one more goal",
    "start": "461479",
    "end": "467879"
  },
  {
    "text": "which is to entirely sidestep the attack surface for the AP this is the application processor this is the normal",
    "start": "467879",
    "end": "473840"
  },
  {
    "text": "uh CPU the trun all uh uh all the rest of the code in the operating system and",
    "start": "473840",
    "end": "479080"
  },
  {
    "text": "so what did does this mean to sidestep the surface well it means that the authentication policies that I described such as our hard limits they need to",
    "start": "479080",
    "end": "485560"
  },
  {
    "text": "apply even under an adversarial AP and no long-term key material should ever be",
    "start": "485560",
    "end": "491039"
  },
  {
    "text": "exposed to the AP any short-term key material that's exposed needs to be ephemeral and needs to be bound to the",
    "start": "491039",
    "end": "496400"
  },
  {
    "text": "session which means it basically stops being valid after the device is rebooted so the way we set out to do",
    "start": "496400",
    "end": "503280"
  },
  {
    "text": "this is we introduced the secure Enclave processor which is dedicated silicon running a small trusted Computing base",
    "start": "503280",
    "end": "509680"
  },
  {
    "text": "that serves as our cryptographic co-processor it has Hardware accelerated uh crypto on it and arbiter is the",
    "start": "509680",
    "end": "515839"
  },
  {
    "text": "Arbiter of all user data access on these devices has its own encrypted memory has a very narrow interface with which it",
    "start": "515839",
    "end": "521800"
  },
  {
    "text": "communicates to the normal um AP and in the factory we actually do uh key pairing so that the SCP has secure",
    "start": "521800",
    "end": "529720"
  },
  {
    "text": "channels to both the touch ID sensor and the secure element which is what's used for Apple pay",
    "start": "529720",
    "end": "536800"
  },
  {
    "text": "transactions the the SCP also has a true random number generator on board this is",
    "start": "538200",
    "end": "544079"
  },
  {
    "text": "a free running oscillators and the very first time the SCP is powered in the",
    "start": "544079",
    "end": "549480"
  },
  {
    "text": "factory it uses this true random number generator to generate what we call the uid key this is a unique private key",
    "start": "549480",
    "end": "555920"
  },
  {
    "text": "that will always stay within uh that Enclave processor and is not exportable in fact the only way that the uid key",
    "start": "555920",
    "end": "562079"
  },
  {
    "text": "can be used is through cryptographic operations that are exposed by the secure um which is burned into the hard",
    "start": "562079",
    "end": "569560"
  },
  {
    "text": "at the factory and is not mutable so no mutable software ever gets to see this key material and it originated from",
    "start": "569560",
    "end": "576200"
  },
  {
    "text": "within the core itself now that we have the uid key that",
    "start": "576200",
    "end": "581920"
  },
  {
    "text": "forms the root device key that will be used in deriving all the rest of the keys and when it comes to keys that are",
    "start": "581920",
    "end": "587760"
  },
  {
    "text": "actually used to directly protect user data we group them in what we call user key bags so user key bags are sets of",
    "start": "587760",
    "end": "594120"
  },
  {
    "text": "keys generated for each user and they're wrapped by a master key which is derived from a combination of the user passcode",
    "start": "594120",
    "end": "601320"
  },
  {
    "text": "and the uid key in the hardware so this lets us make it a case",
    "start": "601320",
    "end": "606600"
  },
  {
    "text": "that after 10 incorrect passcode attempts the SCP will simply refuse to process any further attempts and so long",
    "start": "606600",
    "end": "612440"
  },
  {
    "text": "as it refuses to do so as it's the only thing that can ask for cryptographic operations to take place on the uid key",
    "start": "612440",
    "end": "618320"
  },
  {
    "text": "it is not possible to uh make any more attempts now for the user keyack Keys um",
    "start": "618320",
    "end": "624279"
  },
  {
    "text": "I mentioned it's a set of them this is because they're used for different purposes and they're available at different time times so this is",
    "start": "624279",
    "end": "630760"
  },
  {
    "text": "effectively uh the key list they're class Keys we call them a through D and",
    "start": "630760",
    "end": "637240"
  },
  {
    "text": "uh some of these are keys that are always available when the uh system is uh is running and then some of them are",
    "start": "637240",
    "end": "643680"
  },
  {
    "text": "only available after the user has unlocked their device at least once and uh yet Class A is stronger these are",
    "start": "643680",
    "end": "649639"
  },
  {
    "text": "only available while the user is actively using the unlocked device now mind you classes AC and D these are",
    "start": "649639",
    "end": "655600"
  },
  {
    "text": "256bit a keys uh for class B it's actually a key pair with curve 25519 and",
    "start": "655600",
    "end": "662320"
  },
  {
    "text": "what that lets us do is make the public key always available but the private key is only available while the device is",
    "start": "662320",
    "end": "669560"
  },
  {
    "text": "unlocked so I'll explain about that in a moment meanwhile here's just in case you're curious what an actual annotated",
    "start": "669560",
    "end": "675120"
  },
  {
    "text": "keyag looks like uh this sits on uh the file system of every iOS device just Els",
    "start": "675120",
    "end": "680240"
  },
  {
    "text": "us the version the kdf salt iteration count used to uh Drive the keys and then",
    "start": "680240",
    "end": "685399"
  },
  {
    "text": "actually has the key identifiers uh for the wrapped Keys themselves and in the case of the Class B key the raw bites of",
    "start": "685399",
    "end": "692680"
  },
  {
    "text": "the public key for class",
    "start": "692680",
    "end": "695920"
  },
  {
    "text": "B so I mentioned that the master key is derived from a combination of the user passcode and the uid key um this is a",
    "start": "701200",
    "end": "707279"
  },
  {
    "text": "very straightforward process effectively we take the user passcode and the salt in userland we run it through key",
    "start": "707279",
    "end": "713320"
  },
  {
    "text": "derivation function and then we move it over to the hardware side where the SCP will continue iterating on it using the",
    "start": "713320",
    "end": "718720"
  },
  {
    "text": "uid key and the number of iterations uh is chosen to meet a time goal which is",
    "start": "718720",
    "end": "725880"
  },
  {
    "text": "between 100 and 150 MC so we want it to be the case that derivation takes a certain amount of",
    "start": "725880",
    "end": "732320"
  },
  {
    "text": "time so now that you understand how the keys work the question is how do we use this to actually protect file system",
    "start": "732360",
    "end": "738560"
  },
  {
    "text": "data file blogs themselves are encrypted with axts uh in with 128 bit keys but",
    "start": "738560",
    "end": "744480"
  },
  {
    "text": "the thing to know is that each file actually has its own unique random key that is generated by the SCP for it and",
    "start": "744480",
    "end": "751880"
  },
  {
    "text": "those raw file keys are never exposed to the normal application processor instead",
    "start": "751880",
    "end": "757800"
  },
  {
    "text": "they're wrapped with a key from the user keyag for long-term storage and remember those keys are only uh can only be",
    "start": "757800",
    "end": "763360"
  },
  {
    "text": "unwrapped by the SCP and then while the system is in use they're also wrapped with an ephemeral key that is bound to",
    "start": "763360",
    "end": "770680"
  },
  {
    "text": "that boot session of the phone so this is kind of an interesting thing to think about let me show you what it looks like",
    "start": "770680",
    "end": "776360"
  },
  {
    "text": "at boot of the device the as engine in the SCP generates an ephemeral key and",
    "start": "776360",
    "end": "782639"
  },
  {
    "text": "through a secure outbound Channel sends it to the storage controller this is the nand controller for the unit then later",
    "start": "782639",
    "end": "788839"
  },
  {
    "text": "when the phone is running or the device is running and you attempt to open a file the uh Colonel will fetch the",
    "start": "788839",
    "end": "796440"
  },
  {
    "text": "wrapped file key from the metadata we'll send it over to the SCP which will use",
    "start": "796440",
    "end": "801680"
  },
  {
    "text": "the uh user keyack key to unwrap it and then it'll rewrap it to that ephemeral",
    "start": "801680",
    "end": "807240"
  },
  {
    "text": "key that was chosen at boot and it's this ephemerally wrapped file",
    "start": "807240",
    "end": "812560"
  },
  {
    "text": "key that is sent back into the kernel from where it's sent into the storage controller which can now use the Emeral",
    "start": "812560",
    "end": "819959"
  },
  {
    "text": "key to um unwrap the real file key retrieve the cipher text from The nand",
    "start": "819959",
    "end": "825120"
  },
  {
    "text": "Flash and send the clear tax text back back into the kernel what's important",
    "start": "825120",
    "end": "831000"
  },
  {
    "text": "about this is that if you look at the keys that are exposed to the kernel none of them have any long-term value after the device is rebooted that ephemerally",
    "start": "831000",
    "end": "837959"
  },
  {
    "text": "wrapped key uh simply serves no purpose",
    "start": "837959",
    "end": "843360"
  },
  {
    "text": "so hitting the goals we set out for data protection actually requires quite a few moving parts and uh I wanted to walk you",
    "start": "843360",
    "end": "851759"
  },
  {
    "text": "through what it actually looks like when a device boots when a device is first",
    "start": "851759",
    "end": "857079"
  },
  {
    "text": "unlocked when it's locked and then finally when we use a touch ID",
    "start": "857079",
    "end": "862720"
  },
  {
    "text": "unlock the first thing that happens is that the kernel boots this is coming off the system",
    "start": "862839",
    "end": "867880"
  },
  {
    "text": "partition and the apple key store will load what we call the D key this is the uh class D key out of effaceable storage",
    "start": "867880",
    "end": "875600"
  },
  {
    "text": "and effable storage is if you're not familiar with it a part of our n flash where we allow no wear leveling and no",
    "start": "875600",
    "end": "881079"
  },
  {
    "text": "relocation of blocks which means we can securely erase things that are in that section of uh the flash so this uh D key",
    "start": "881079",
    "end": "887839"
  },
  {
    "text": "is retrieved and sent into the uh SCP which decrypts it using the uid key and",
    "start": "887839",
    "end": "894000"
  },
  {
    "text": "hardware and loads it into the SKS keuring SKS is the application on the SEC secure Enclave that um handles our",
    "start": "894000",
    "end": "901199"
  },
  {
    "text": "data protection Keys it's called a secure key store secure key service and so now this decrypted class D key is",
    "start": "901199",
    "end": "907320"
  },
  {
    "text": "loaded into the key ring the kernel will decrypt file system",
    "start": "907320",
    "end": "912360"
  },
  {
    "text": "metadata using a media key media key is another key that stored in aable storage and at this point laun D kicks",
    "start": "912360",
    "end": "918720"
  },
  {
    "text": "in mounts the user partition and starts a demon called keyag d keybag d loads",
    "start": "918720",
    "end": "924639"
  },
  {
    "text": "the system keyag which is just sitting as a file in the file system and it can do so now because our class D key is",
    "start": "924639",
    "end": "931120"
  },
  {
    "text": "available decrypts this key bag using yet another key from aable sto storage called the protection key and send it",
    "start": "931120",
    "end": "938759"
  },
  {
    "text": "into SKS where finally the device keyack can be unwrapped the class B public key",
    "start": "938759",
    "end": "944279"
  },
  {
    "text": "loaded into the key ring so if you look at what this",
    "start": "944279",
    "end": "950079"
  },
  {
    "text": "means normal class Keys A and C in particular and the private key for class",
    "start": "951519",
    "end": "956639"
  },
  {
    "text": "B those are not decryptable on until the user can present their passcode and the master key can be derived but the device",
    "start": "956639",
    "end": "963360"
  },
  {
    "text": "in this state can read all class d protected files and can use the class B",
    "start": "963360",
    "end": "968639"
  },
  {
    "text": "keys to write files that are only readable after the user unlocks the",
    "start": "968639",
    "end": "974600"
  },
  {
    "text": "device it's kind of a Dropbox",
    "start": "974600",
    "end": "978560"
  },
  {
    "text": "mechanism after this laun D will simply permit user space to continue",
    "start": "979759",
    "end": "985240"
  },
  {
    "text": "booting now let's talk about first unlock",
    "start": "985240",
    "end": "990279"
  },
  {
    "text": "first springboard which is the um uh user-facing user interface on uh um on",
    "start": "993639",
    "end": "1000680"
  },
  {
    "text": "the device will acquire the passcode from the user and it'll send it to the SCP which will generate the uh master",
    "start": "1000680",
    "end": "1008000"
  },
  {
    "text": "key using a combination of the passcode I just received and the uid hardware",
    "start": "1008000",
    "end": "1013360"
  },
  {
    "text": "key now that we have the master key we can take the user key bag and the RP all of the class keys and add them to the",
    "start": "1015240",
    "end": "1020839"
  },
  {
    "text": "key ring but we'll do one more step we'll take our master key we'll generate a",
    "start": "1020839",
    "end": "1026438"
  },
  {
    "text": "random secret and we'll encrypt the master key with that random secret the random secret will be sent to",
    "start": "1026439",
    "end": "1033720"
  },
  {
    "text": "sbio which is another app running on the SCP which is responsible for doing",
    "start": "1033720",
    "end": "1039000"
  },
  {
    "text": "biometric matching for the touch ID sensor mind you it's not the master key or even the encrypted master key that",
    "start": "1039000",
    "end": "1044558"
  },
  {
    "text": "sent over just the random secret it's SKS that still holds on to the master key encrypted with that",
    "start": "1044559",
    "end": "1050960"
  },
  {
    "text": "secret after this SKS will securely destroy the master key the raw master key from its memory holding on only to",
    "start": "1050960",
    "end": "1057799"
  },
  {
    "text": "the encrypted version with the secret that it's sent to as bio you'll see how we use that in a",
    "start": "1057799",
    "end": "1063760"
  },
  {
    "text": "second but first because lock is simple let me show you what happens here once the device locks we simply notify the",
    "start": "1063760",
    "end": "1070799"
  },
  {
    "text": "SCP it purges the class A and B private keys from its key ring and that leaves",
    "start": "1070799",
    "end": "1075919"
  },
  {
    "text": "the public key for class B Class C which if if you remember is meant to be accessible anytime the user has unlocked",
    "start": "1075919",
    "end": "1082320"
  },
  {
    "text": "the device at least once and finally the class D key so here's how Touch ID Works in this",
    "start": "1082320",
    "end": "1091039"
  },
  {
    "text": "model pressing the home button starts the sensor and the sensor acquires an image",
    "start": "1095480",
    "end": "1101440"
  },
  {
    "text": "and sends it to the S bio app in the SCP this app actually performs the match",
    "start": "1101440",
    "end": "1108520"
  },
  {
    "text": "and determines whether the uh fingerprint that was just acquired matches the fingerprint of the authorized user if so it takes the",
    "start": "1108520",
    "end": "1115559"
  },
  {
    "text": "random secret that we handed it earlier and sents it back to SKS to the secure key store that lets SKS decrypt the",
    "start": "1115559",
    "end": "1123520"
  },
  {
    "text": "master key yet again and upon that decrypt all the rest of the class keys and add them to the",
    "start": "1123520",
    "end": "1131080"
  },
  {
    "text": "keuring after that the raw master key is once again securely destroyed",
    "start": "1131760",
    "end": "1139200"
  },
  {
    "text": "I want to mention one more thing which is that data protection and uh how it interacts with the secure Enclave also",
    "start": "1139400",
    "end": "1145480"
  },
  {
    "text": "enabled us to securely do a feature um called update later which is basically that when a user logs in and unlocks",
    "start": "1145480",
    "end": "1152120"
  },
  {
    "text": "their device uh they're notified that there's a software update available and they can choose to do the update right then and there but they can also say",
    "start": "1152120",
    "end": "1158640"
  },
  {
    "text": "install later and if they choose install later we'll prompt them for their passcode and",
    "start": "1158640",
    "end": "1164400"
  },
  {
    "text": "if we can verify that it's the correct one we will enable the creation of what we call an OT this is a onetime unlock",
    "start": "1164400",
    "end": "1170679"
  },
  {
    "text": "token and it's a token that the SCP creates after this the user is going to",
    "start": "1170679",
    "end": "1175919"
  },
  {
    "text": "log their device but once the user set install later we use on device the same",
    "start": "1175919",
    "end": "1181799"
  },
  {
    "text": "predictive technology that underlies our proactive assistant to make a best guess",
    "start": "1181799",
    "end": "1187360"
  },
  {
    "text": "of a time of day when the user is not going to be using their device and the device is going to likely have",
    "start": "1187360",
    "end": "1193760"
  },
  {
    "text": "power so once we've made that uh prediction the user is interacting with",
    "start": "1193760",
    "end": "1198840"
  },
  {
    "text": "their device over the course of the day and at some point they'll have unlocked the device and based on our prediction of the right um update window time we",
    "start": "1198840",
    "end": "1206159"
  },
  {
    "text": "will conclude that this is likely the last time they're unlocking their device before eventually they will hit the",
    "start": "1206159",
    "end": "1212760"
  },
  {
    "text": "update window later so because of this and because we enabled creation of theat earlier we will actually create an otat",
    "start": "1212760",
    "end": "1219520"
  },
  {
    "text": "at this time the software update sub system will say there's an OT created please persist",
    "start": "1219520",
    "end": "1225320"
  },
  {
    "text": "it for me and it'll also start an 8 hour timer um if a OT is not used for 8 hours uh it'll be destroyed and the user niser",
    "start": "1225320",
    "end": "1233159"
  },
  {
    "text": "is continuing to use their device and will at some point lock it and probably go to bed but at this point we're persisting that otat which means that",
    "start": "1233159",
    "end": "1240400"
  },
  {
    "text": "when we hit the update window time in this case we guess that 3:00 a.m. is a good time the software update can run on",
    "start": "1240400",
    "end": "1246120"
  },
  {
    "text": "the device and after it's finished it can reboot the device and use the",
    "start": "1246120",
    "end": "1253559"
  },
  {
    "text": "otot to unwrap uh access to user data once again to to finish doing things",
    "start": "1253559",
    "end": "1259440"
  },
  {
    "text": "like migrating data uh if required by the new software update so that when the user next goes to use their device",
    "start": "1259440",
    "end": "1265520"
  },
  {
    "text": "rather than a software update having taken place and their device being fully locked as if they had rebooted it uh",
    "start": "1265520",
    "end": "1270640"
  },
  {
    "text": "instead they get a fully working device ready to go with the latest software on",
    "start": "1270640",
    "end": "1277080"
  },
  {
    "text": "it there's one more thing I want to call out about this which is something we call thec security mode um we have a",
    "start": "1277120",
    "end": "1283840"
  },
  {
    "text": "feature called the motion and this is because if you think about it we have a billion active devices out there and uh",
    "start": "1283840",
    "end": "1289120"
  },
  {
    "text": "we need to have some ability to be able to debug a production device and",
    "start": "1289120",
    "end": "1294679"
  },
  {
    "text": "so the demotion feature is a way to take a production device and enable some",
    "start": "1294679",
    "end": "1299720"
  },
  {
    "text": "debugging functionality like JTAG and the ability to load development software on the application processor though not",
    "start": "1299720",
    "end": "1305679"
  },
  {
    "text": "the SCP this requires both that um after being authorized for this on the",
    "start": "1305679",
    "end": "1310840"
  },
  {
    "text": "personalization server the uh device to be demoted is fully erased and a new um",
    "start": "1310840",
    "end": "1316120"
  },
  {
    "text": "OS loaded on it but the key thing about it is that it also forces a different",
    "start": "1316120",
    "end": "1321559"
  },
  {
    "text": "uid key to show up to the SCP and this is done in Hardware in other words if a",
    "start": "1321559",
    "end": "1326880"
  },
  {
    "text": "production device is demoted the uid key that was used in deriving the master key that protects any user data previously",
    "start": "1326880",
    "end": "1333080"
  },
  {
    "text": "on that device is simply unavailable to any software a different uid key turns",
    "start": "1333080",
    "end": "1340360"
  },
  {
    "text": "up so if you remember the goals that we set out uh for ourselves for data protection this is how we manage to meet",
    "start": "1340360",
    "end": "1347200"
  },
  {
    "text": "every single one of them",
    "start": "1347200",
    "end": "1350519"
  },
  {
    "text": "what I want to talk about next is synchronizing secrets we have a number of features",
    "start": "1360080",
    "end": "1366760"
  },
  {
    "text": "where it's really really useful to be able to move the user secret between their different devices passwords and",
    "start": "1366760",
    "end": "1373279"
  },
  {
    "text": "credit card information for Safari are a good example but also some new features like Auto unlock which I mentioned",
    "start": "1373279",
    "end": "1379400"
  },
  {
    "text": "earlier which wants to be able to move securely move cryptographic Keys between a user's Mac and their Apple watch and",
    "start": "1379400",
    "end": "1385120"
  },
  {
    "text": "then homekit is another good example where uh we want all cryptographic keys to be available on all of the users",
    "start": "1385120",
    "end": "1390720"
  },
  {
    "text": "devices so they can control their homekit devices and of course there's bound to be many more uses for uh um the",
    "start": "1390720",
    "end": "1398039"
  },
  {
    "text": "ability to do this and if you look at how synchronizing Secrets has",
    "start": "1398039",
    "end": "1403080"
  },
  {
    "text": "traditionally been done there's basically been two approaches either you generate a strong random key that's",
    "start": "1403080",
    "end": "1409039"
  },
  {
    "text": "going to be protecting all the secrets all the rest of the secrets as they're moving which means that usually the user",
    "start": "1409039",
    "end": "1414279"
  },
  {
    "text": "has to print a key or write it down uh and so it has the right cryptographic security level but not an acceptable",
    "start": "1414279",
    "end": "1420760"
  },
  {
    "text": "user experience or the second option is to derive a key that'll be used to",
    "start": "1420760",
    "end": "1426000"
  },
  {
    "text": "protect the rest of the secrets from the user's password which is a problem because uh",
    "start": "1426000",
    "end": "1433039"
  },
  {
    "text": "users tend to not choose cryptographically strong passwords and if this is a password that belongs to",
    "start": "1433039",
    "end": "1438080"
  },
  {
    "text": "some account account they have it usually means that the account provider backend is in a privileged position they may be able to bruteforce the password",
    "start": "1438080",
    "end": "1444799"
  },
  {
    "text": "uh and therefore um access all of the users uh Secrets as well why don't users uh just pick strong",
    "start": "1444799",
    "end": "1453320"
  },
  {
    "text": "keys well this is from um a book on",
    "start": "1453320",
    "end": "1459640"
  },
  {
    "text": "cryptography humans are not very good at this so when we looked at synchronizing",
    "start": "1459640",
    "end": "1466360"
  },
  {
    "text": "secrets and what the goals are for a mechanis to do this we were actually pretty inspired about what we've done with data protection we wanted selected",
    "start": "1466360",
    "end": "1474159"
  },
  {
    "text": "user Secrets available on all devices we wanted strong cryptographic Keys protecting them we wanted the user to be",
    "start": "1474159",
    "end": "1479880"
  },
  {
    "text": "able to recover this even if they lose their devices without having to write down uh a key and put it in their sock",
    "start": "1479880",
    "end": "1486279"
  },
  {
    "text": "drawer and we wanted the user secrets to not be exposed to Apple at any point we",
    "start": "1486279",
    "end": "1491720"
  },
  {
    "text": "also wanted no Brute Force ability so here is how we approach this",
    "start": "1491720",
    "end": "1497279"
  },
  {
    "text": "with iCloud keychain we have every device that participates generate an iCloud keychain synchronization key pair",
    "start": "1497279",
    "end": "1502960"
  },
  {
    "text": "this is a strong key pair and when a user has a new device that they want to have uh received their secrets they",
    "start": "1502960",
    "end": "1508960"
  },
  {
    "text": "actually have to explicitly approve it from a device that they already started with and once that",
    "start": "1508960",
    "end": "1517120"
  },
  {
    "text": "happens the devices can start receiving all of the rest of the secrets now the way this synchronization Circle works is",
    "start": "1517120",
    "end": "1523600"
  },
  {
    "text": "it uses the Apple Cloud backend for message passing and for storage but the backend is in no way in a privileged",
    "start": "1523600",
    "end": "1529919"
  },
  {
    "text": "position because again this is protected by what was a locally generated strong key pair so this is one part of the",
    "start": "1529919",
    "end": "1535760"
  },
  {
    "text": "story but what if the user loses all of their devices or what if they need to configure a new device without actually",
    "start": "1535760",
    "end": "1541080"
  },
  {
    "text": "having access to the old one so for this we have a feature called iCloud keychain",
    "start": "1541080",
    "end": "1546120"
  },
  {
    "text": "backup and here's what we do we have a new credential the iCloud security code and most often this is the",
    "start": "1546120",
    "end": "1553799"
  },
  {
    "text": "device passcode the passcode of the actual device this is a credential that's clearly unknown to",
    "start": "1553799",
    "end": "1559640"
  },
  {
    "text": "Apple we then generate a strong random key which we call the escro key and we",
    "start": "1559640",
    "end": "1565880"
  },
  {
    "text": "will wrap this escrow key with a key derived from that iCloud security code most commonly the device passcode we",
    "start": "1565880",
    "end": "1572799"
  },
  {
    "text": "then take the wrapped escrow key send that to Apple and we back up a copy of",
    "start": "1572799",
    "end": "1578559"
  },
  {
    "text": "the iCloud keychain secrets and that are encrypted themselves with the escrow key now if a device is lost or the user has",
    "start": "1578559",
    "end": "1585679"
  },
  {
    "text": "a new device but no access to the old one they can recover secrets so long as they have their iCloud password and this",
    "start": "1585679",
    "end": "1590880"
  },
  {
    "text": "new cronal the iCloud security code so if we look at the goals that we have for synchronizing secrets we meet",
    "start": "1590880",
    "end": "1596799"
  },
  {
    "text": "the first four with a combination of iCloud keychain and iCloud keychain backup but what about that last",
    "start": "1596799",
    "end": "1603440"
  },
  {
    "text": "one the attack surface in the back end here is quite tricky if we implemented naively what I just described the back",
    "start": "1604200",
    "end": "1611360"
  },
  {
    "text": "end is clearly in a position to Brute Force the I security code and access the escrow key remember the I security code",
    "start": "1611360",
    "end": "1616960"
  },
  {
    "text": "is most commonly the device pass code which means uh you know only a million possibilities usually and so what we",
    "start": "1616960",
    "end": "1623640"
  },
  {
    "text": "need is just like with a secure Enclave we need some way to enforce a policy over the escro key that prevents brute",
    "start": "1623640",
    "end": "1629360"
  },
  {
    "text": "force and does so even under an adversarial Cloud so we said what if unwrapping the",
    "start": "1629360",
    "end": "1635760"
  },
  {
    "text": "escro key could only take place in Hardware security",
    "start": "1635760",
    "end": "1640000"
  },
  {
    "text": "modules let me tell you about cloud keyal cloud keyal is a just an internal",
    "start": "1640919",
    "end": "1646760"
  },
  {
    "text": "name for a collection of Ware security modules which if anyone is not familiar they're cryptographic co-processors that",
    "start": "1646760",
    "end": "1653080"
  },
  {
    "text": "can uh generate Keys securely within the hardware that are non-exportable and just expose cryptographic operations on",
    "start": "1653080",
    "end": "1660120"
  },
  {
    "text": "them we have a fleet of them that are running custom secure code within the Hardware security modules themselves and",
    "start": "1660120",
    "end": "1666240"
  },
  {
    "text": "these are connected to the Apple Cloud the key Vault Fleet operates its own certificate Authority where the private",
    "start": "1666240",
    "end": "1671960"
  },
  {
    "text": "key never leaves the hardware of the Hardware security modules and each iOS device hardcodes the certificate of the",
    "start": "1671960",
    "end": "1679720"
  },
  {
    "text": "keyal fleet this is the simple unit for cloud keyal it's a host paired to a Hardware",
    "start": "1679720",
    "end": "1686200"
  },
  {
    "text": "security module and then the Hardware security module has access to a number of keys most importantly the first one",
    "start": "1686200",
    "end": "1692080"
  },
  {
    "text": "which is the custom secure code signing key so this is a code that allows software to be loaded into the Hardware",
    "start": "1692080",
    "end": "1698360"
  },
  {
    "text": "security module and then lastly that service key which allows unwrapping the",
    "start": "1698360",
    "end": "1703480"
  },
  {
    "text": "user's escro records so what's an escro record I mentioned earlier",
    "start": "1703480",
    "end": "1708919"
  },
  {
    "text": "it's the user strong randomly generated escrow key it's an SRP verifier for",
    "start": "1708919",
    "end": "1714000"
  },
  {
    "text": "their iCloud security code commonly deviced passcode and then it's a maximum failure count of how many incorrect",
    "start": "1714000",
    "end": "1720840"
  },
  {
    "text": "attempts on the iCloud security code are allowed within the context of this record before no further attempts are",
    "start": "1720840",
    "end": "1727640"
  },
  {
    "text": "allowed So This escar Record is encrypted to the public service key for",
    "start": "1727640",
    "end": "1733399"
  },
  {
    "text": "the cloud KEYT where does this get us well we've effectively built a kind of data",
    "start": "1733399",
    "end": "1740159"
  },
  {
    "text": "protection but for Esco records the private key for default service is simply not available to any mutable",
    "start": "1740159",
    "end": "1746679"
  },
  {
    "text": "software just like our uid key and D SCP and effectively when a user wants to do",
    "start": "1746679",
    "end": "1752480"
  },
  {
    "text": "an escco recovery uh they retrieve their escco record from the Apple Cloud they establish a session to Cloud key Vault",
    "start": "1752480",
    "end": "1758720"
  },
  {
    "text": "for SRP and the Vault will unwrap the record find the U SRP verifier for the",
    "start": "1758720",
    "end": "1764440"
  },
  {
    "text": "ioud security code so long as the user can present the right out security code code the cloud key WT will return that",
    "start": "1764440",
    "end": "1770519"
  },
  {
    "text": "strong randomly generated escro key which protects all of the rest of their secrets and if SRP fails The Vault unit",
    "start": "1770519",
    "end": "1777240"
  },
  {
    "text": "bumps a secure counter where if a maximum failure count from the record is reached the record is",
    "start": "1777240",
    "end": "1783120"
  },
  {
    "text": "marked terminal and the cloud keyal will refuse to process any further attempts",
    "start": "1783120",
    "end": "1788720"
  },
  {
    "text": "with that record",
    "start": "1788720",
    "end": "1792120"
  },
  {
    "text": "the thing is that a user can't simply escr to only one key Vault unit we need the redundancy in this",
    "start": "1798600",
    "end": "1805679"
  },
  {
    "text": "design because uh these units can fail but if we simply said well why don't we escort five units that's because every",
    "start": "1805679",
    "end": "1812960"
  },
  {
    "text": "new unit you escort to increases that maximum failure count if you escrow to uh five Cloud key volt units then",
    "start": "1812960",
    "end": "1819919"
  },
  {
    "text": "instead of having you know 10 maximum failure uh attempts you're now up to 50",
    "start": "1819919",
    "end": "1825080"
  },
  {
    "text": "so here's what we've done we've paired the cloud key volt units into clubs that actually these are clubs of five and",
    "start": "1825080",
    "end": "1830679"
  },
  {
    "text": "they share a single service key so the user generates their escco record targeting a specific club and that club",
    "start": "1830679",
    "end": "1838159"
  },
  {
    "text": "is certified by the fleet certificate Authority this solves our redundancy problem because now we have five units",
    "start": "1838159",
    "end": "1845279"
  },
  {
    "text": "but it doesn't solve Brute Force limiting because club members could still be attacked with partitioning",
    "start": "1845279",
    "end": "1850360"
  },
  {
    "text": "attacks this simply means if you have a club of five one of them can be isolated from the network and then you make 10",
    "start": "1850360",
    "end": "1856279"
  },
  {
    "text": "attempts on it using the record if that doesn't work you move it aside you isolate the next one from the club and",
    "start": "1856279",
    "end": "1861880"
  },
  {
    "text": "you repeat the process until ultimately you've gotten the maximum failure count multiplied by the five units in the",
    "start": "1861880",
    "end": "1869080"
  },
  {
    "text": "club so what we've done is implemented a quorum commit scheme where each club actually maintains its own failure count",
    "start": "1869080",
    "end": "1875960"
  },
  {
    "text": "I'm sorry each Club member maintains its own failure count for each Esco record and when an escco recovery is in",
    "start": "1875960",
    "end": "1881519"
  },
  {
    "text": "progress it actually prompts a vote where a majority Quorum is required to proceed so this provides both redundancy",
    "start": "1881519",
    "end": "1887559"
  },
  {
    "text": "and breaks membership partitioning attacks here's how it works this by the way is the overall",
    "start": "1887559",
    "end": "1892600"
  },
  {
    "text": "Fleet design so the fleet is partitioning these clubs so five units there's authenticated object storage in the back and then there is an iCloud",
    "start": "1892600",
    "end": "1899440"
  },
  {
    "text": "Escrow Service proxy in the front so here is what an escrow transaction looks like effectively one",
    "start": "1899440",
    "end": "1905480"
  },
  {
    "text": "cloudkey unit out of the club is chosen as the originator and says I propose an update please give me your failure",
    "start": "1905480",
    "end": "1910679"
  },
  {
    "text": "account for a specific escco record the rest of the units say here's my counter I vote Yes on this update because I'm",
    "start": "1910679",
    "end": "1917039"
  },
  {
    "text": "not in another trans actions so I can do this then we move to the next phase where the originator says very good we",
    "start": "1917039",
    "end": "1922519"
  },
  {
    "text": "have majority Quorum no one's record is terminal so prepare to update the failure counter to five all the rest of",
    "start": "1922519",
    "end": "1929600"
  },
  {
    "text": "the club members say very well I've verified that we have majority Quorum I stand ready to increase the counter",
    "start": "1929600",
    "end": "1935159"
  },
  {
    "text": "after that the originat says excellent increase the counter and finally all of the rest of the club members confirm",
    "start": "1935159",
    "end": "1940559"
  },
  {
    "text": "that they now have the new failer count of five for this",
    "start": "1940559",
    "end": "1945440"
  },
  {
    "text": "record now now I mentioned that there's this Custom Security Code signing key",
    "start": "1946639",
    "end": "1954120"
  },
  {
    "text": "that lets you sign any software you want to have running on these Hardware security modules that power the cloud",
    "start": "1954120",
    "end": "1960080"
  },
  {
    "text": "key Vault and the way to use this very powerful key uh requires an actual",
    "start": "1960080",
    "end": "1965960"
  },
  {
    "text": "physical Quorum of smart cards so when uh we create a new Fleet there's a",
    "start": "1965960",
    "end": "1971519"
  },
  {
    "text": "secure ceremony where uh the uh three admin cards that can unlock the Cs cik",
    "start": "1971519",
    "end": "1980600"
  },
  {
    "text": "are put in uh tamper resistant evidence bags and are handed to three different organizations that Apple which then",
    "start": "1980600",
    "end": "1987120"
  },
  {
    "text": "stored them in three separate physical safes but yet if someone managed to get",
    "start": "1987120",
    "end": "1994639"
  },
  {
    "text": "their hands on all of the admin cards they could put them together sign a new custom secure code image that can bypass",
    "start": "1994639",
    "end": "2002159"
  },
  {
    "text": "all the protection I described and bruteforce the iCloud security code for any arbitrary escar record couldn't",
    "start": "2002159",
    "end": "2010559"
  },
  {
    "text": "they no let me tell you why before a fleet",
    "start": "2010679",
    "end": "2018080"
  },
  {
    "text": "goes into production a cloud keyal Fleet the members of those three card carrying organizations at Apple meet in a secure",
    "start": "2018080",
    "end": "2023960"
  },
  {
    "text": "facility they cross check the serial numbers on all the evidence bags from the original ceremony and the cards",
    "start": "2023960",
    "end": "2030519"
  },
  {
    "text": "within them and then they make a series of attestations that are recorded they attest that they were present when the",
    "start": "2030519",
    "end": "2035960"
  },
  {
    "text": "cards were created they attest that no other admin cards were created that the evidence bags have been sealed the",
    "start": "2035960",
    "end": "2041440"
  },
  {
    "text": "entire time and that the cards that are present today are exactly the cards that were originally",
    "start": "2041440",
    "end": "2047040"
  },
  {
    "text": "created and then the cards are combined using a novel physical one-way hash",
    "start": "2047040",
    "end": "2055280"
  },
  {
    "text": "function is um our CP crypto blender",
    "start": "2060240",
    "end": "2067720"
  },
  {
    "text": "thank you I thought you might like that after this is done a number of",
    "start": "2070359",
    "end": "2076000"
  },
  {
    "text": "final arations are recorded all the people present attest that all the cards that were originally",
    "start": "2076000",
    "end": "2081878"
  },
  {
    "text": "created are now destroyed that the cards were not in the interim used to sign any other custom secure code that can be",
    "start": "2081879",
    "end": "2087398"
  },
  {
    "text": "loaded into the fleet and finally that no other mechanism is known that would allow the custom secure code to be",
    "start": "2087399",
    "end": "2094000"
  },
  {
    "text": "changed or new code loaded",
    "start": "2094000",
    "end": "2098159"
  },
  {
    "text": "why do we do this why take that last step that's extremely",
    "start": "2100119",
    "end": "2106400"
  },
  {
    "text": "unusual you know we've seen with data protection in the secure Enclave processor that we go to tremendous",
    "start": "2107640",
    "end": "2112720"
  },
  {
    "text": "lengths when it comes to engineering these security systems that provide trust in how we protect user data but we",
    "start": "2112720",
    "end": "2120400"
  },
  {
    "text": "realize that when data leaves the device the stakes are even higher and we're",
    "start": "2120400",
    "end": "2125599"
  },
  {
    "text": "fortunate that we've earned the trust of our customer customers but we realize that that's something that we have to keep earning so here when we make a",
    "start": "2125599",
    "end": "2133760"
  },
  {
    "text": "statement like your secrets are not exposed to Apple when they're being synchronized we have to be able to make",
    "start": "2133760",
    "end": "2139400"
  },
  {
    "text": "it unequivocally and if we still retain possession of these admin cards there's",
    "start": "2139400",
    "end": "2144480"
  },
  {
    "text": "the possibility that that's not true so because of that we destroy the cards and",
    "start": "2144480",
    "end": "2151440"
  },
  {
    "text": "I hope that gives you some feel for how seriously and how passionately we take our mission to protect user data",
    "start": "2151440",
    "end": "2159200"
  },
  {
    "text": "so those are the three features that I wanted to talk about today and before we",
    "start": "2159640",
    "end": "2164960"
  },
  {
    "text": "move on I want to share some news with you I'm very happy to say that Apple",
    "start": "2164960",
    "end": "2172560"
  },
  {
    "text": "today is announcing an Apple security Bounty",
    "start": "2172560",
    "end": "2176759"
  },
  {
    "text": "program thank you we've had great help from",
    "start": "2182240",
    "end": "2187560"
  },
  {
    "text": "researchers like you in improving iOS security all along and as the security mechanisms we build such as some of the",
    "start": "2187560",
    "end": "2194319"
  },
  {
    "text": "ones that I've been describing to you today have gotten stronger feedback that we've heard pretty consistently both",
    "start": "2194319",
    "end": "2200440"
  },
  {
    "text": "from uh my red team uh at Apple and also from from researchers directly is that",
    "start": "2200440",
    "end": "2207040"
  },
  {
    "text": "it's getting increasingly more difficult to find some of those most critical types of security",
    "start": "2207040",
    "end": "2213200"
  },
  {
    "text": "vulnerabilities so the Apple security Bounty program is going to reward researchers who actually share critical",
    "start": "2213680",
    "end": "2219560"
  },
  {
    "text": "vulnerabilities with apple and we're going to make it a top priority to resolve these confirmed issues as",
    "start": "2219560",
    "end": "2225440"
  },
  {
    "text": "quickly as possible we'll provide public recognition unless asked otherwise and let me tell you where",
    "start": "2225440",
    "end": "2232119"
  },
  {
    "text": "we're starting this is our list of initial",
    "start": "2232119",
    "end": "2237119"
  },
  {
    "text": "categories we believe that these payment amounts are commensurate with the level of difficulty in attacking some of these",
    "start": "2239440",
    "end": "2245720"
  },
  {
    "text": "systems you'll see that there are four categories for on device vulnerabilities and one for any unauthorized access to",
    "start": "2245720",
    "end": "2253520"
  },
  {
    "text": "iCloud account data on Apple servers in addition to uh these exact",
    "start": "2253520",
    "end": "2262160"
  },
  {
    "text": "amounts uh we will let researchers uh donate the reward to charity of their",
    "start": "2262160",
    "end": "2267200"
  },
  {
    "text": "choosing and if they do so we will add our option match that one for one doubling the donation and I mentioned",
    "start": "2267200",
    "end": "2273720"
  },
  {
    "text": "that these are all Maximum payments the exact payment amount will uh be",
    "start": "2273720",
    "end": "2279720"
  },
  {
    "text": "determined after uh we on the engineering on the engineering team review the actual report uh that is uh",
    "start": "2279720",
    "end": "2286720"
  },
  {
    "text": "submitted this has to be a clear Report with a technical proof of concept uh it needs to show the vulnerability uh",
    "start": "2286720",
    "end": "2292800"
  },
  {
    "text": "present in the latest version of iOS and on the latest Hardware where that's applicable and we'll look at both novelty for the vulnerability and also",
    "start": "2292800",
    "end": "2299960"
  },
  {
    "text": "the likelihood of user exposure so frequently how much interaction is required from the user to actually exploit the vulnerability and we know",
    "start": "2299960",
    "end": "2307680"
  },
  {
    "text": "that there could be uh important vulnerabilities elsewhere but this is where we're starting",
    "start": "2307680",
    "end": "2313520"
  },
  {
    "text": "today so the program goes live September and we're inviting a few dozen",
    "start": "2313520",
    "end": "2319839"
  },
  {
    "text": "researchers to participate initially this is because we want these",
    "start": "2319839",
    "end": "2325480"
  },
  {
    "text": "interactions to be really great",
    "start": "2325480",
    "end": "2330680"
  },
  {
    "text": "but it's not meant to be any kind of exclusive Club so if someone who is not",
    "start": "2330680",
    "end": "2336359"
  },
  {
    "text": "in the program brings to us a vulnerability that would be covered under the program we welcome that we're",
    "start": "2336359",
    "end": "2342839"
  },
  {
    "text": "going to take a look and if the work merits it we'll invite them into the program and will reward the vulnerability that they",
    "start": "2342839",
    "end": "2350720"
  },
  {
    "text": "found very happy to get this off the ground and uh so pleased to be able to tell you about it today thank you very",
    "start": "2351440",
    "end": "2358119"
  },
  {
    "text": "much and I'm happy to uh take some questions [Applause]",
    "start": "2358119",
    "end": "2363470"
  },
  {
    "text": "[Music]",
    "start": "2363470",
    "end": "2367000"
  },
  {
    "text": "all right go ahead um just quick to what extent has the um problems you've been",
    "start": "2380280",
    "end": "2386200"
  },
  {
    "text": "having with the FBI trying to unlock devices influenced your security architecture going forth in iOS 10 I'm",
    "start": "2386200",
    "end": "2393200"
  },
  {
    "text": "an engineer uh I'm happy to answer technical questions about what I've covered today",
    "start": "2393200",
    "end": "2399318"
  },
  {
    "text": "go ahead uh hello so maybe I just missed in some way is there any mechanism by",
    "start": "2404240",
    "end": "2409280"
  },
  {
    "text": "which a user can uh audit possibly revoke the list of devices that have been access that have been given trust",
    "start": "2409280",
    "end": "2415640"
  },
  {
    "text": "access by his other devices imagining situations where somebody has a a friend of mine forance had a phone sitting",
    "start": "2415640",
    "end": "2421560"
  },
  {
    "text": "unlocked on a counter and then walked away momentarily somebody could like set it up trust to their devices and suddenly their key bags and everything",
    "start": "2421560",
    "end": "2427760"
  },
  {
    "text": "are just being synced across constantly permanently keyb backs are definitely not being synced I'm sorry I just I'm",
    "start": "2427760",
    "end": "2433440"
  },
  {
    "text": "just standing up in front of a microphone being kind of nervous not a problem so for um for iCloud keychain",
    "start": "2433440",
    "end": "2438640"
  },
  {
    "text": "it's uh sufficient to change your iCloud password and that'll actually break uh",
    "start": "2438640",
    "end": "2443880"
  },
  {
    "text": "the pairing uh the some of the details for that I believe we have in the iOS",
    "start": "2443880",
    "end": "2449440"
  },
  {
    "text": "security guide which is a public document and if you find any part of that that doesn't answer your question uh shoot us an email and we'll see if we",
    "start": "2449440",
    "end": "2455480"
  },
  {
    "text": "can get you an answer can you get a list of those devices though so that you know if you need to revoke them I see uh no",
    "start": "2455480",
    "end": "2460560"
  },
  {
    "text": "that is not available right now okay M go ahead hi what is the the",
    "start": "2460560",
    "end": "2469400"
  },
  {
    "text": "reason why you're doing this now I mean you've had many software updates and this is the first time that you're talking about your data Protection",
    "start": "2469400",
    "end": "2476119"
  },
  {
    "text": "Program and also why is now the time to release the Bounty security",
    "start": "2476119",
    "end": "2481160"
  },
  {
    "text": "program well it's not the first time we're talking about this the iOS security guide which again is a publicly",
    "start": "2481160",
    "end": "2486280"
  },
  {
    "text": "available document go CL into um uh it hits most of the outline of the design",
    "start": "2486280",
    "end": "2491800"
  },
  {
    "text": "and how it interacts with the secure Enclave what I've done today is uh offered I think a lot of new detail that",
    "start": "2491800",
    "end": "2498000"
  },
  {
    "text": "I thought would be particularly interesting to a a super technical security audience um but you know it's",
    "start": "2498000",
    "end": "2503599"
  },
  {
    "text": "not our our first time describing uh how our security works and in fact the the guide is now quite long and gives a",
    "start": "2503599",
    "end": "2510599"
  },
  {
    "text": "pretty comprehensive overview of virtually every single security mechanism that we have um as for the",
    "start": "2510599",
    "end": "2517440"
  },
  {
    "text": "Apple security Bounty program uh you know I tried to uh I Tred to sort of answer that by by by saying that the",
    "start": "2517440",
    "end": "2524319"
  },
  {
    "text": "feedback we've been hearing pretty consistently for um uh for some time now is that the difficulty in actually",
    "start": "2524319",
    "end": "2531280"
  },
  {
    "text": "finding some of these most critical critical kinds of vulnerabilities has been going up and up as we've continued",
    "start": "2531280",
    "end": "2536800"
  },
  {
    "text": "to invest into technical security mechanisms and so uh the difficulty of",
    "start": "2536800",
    "end": "2542200"
  },
  {
    "text": "finding these now is such that we want to reward the people who spend the time and effort and frankly creativ to be",
    "start": "2542200",
    "end": "2547800"
  },
  {
    "text": "able to still find vulnerabilities in some of these categories go ahead you mentioned how",
    "start": "2547800",
    "end": "2555520"
  },
  {
    "text": "the secure Enclave that you described today and the secure element for Apple pay are separate Hardware modules can",
    "start": "2555520",
    "end": "2562680"
  },
  {
    "text": "you speak us to why like the history as to how that came to be why wasn't Apple Pages developed on top of the secure",
    "start": "2562680",
    "end": "2568160"
  },
  {
    "text": "Enclave you know it's um that's a pretty hard question and uh",
    "start": "2568160",
    "end": "2574079"
  },
  {
    "text": "I'm going to focus just on what I covered today if you don't mind but again uh feel free to shoot us an email and we'll see if we can get you uh an",
    "start": "2574079",
    "end": "2582640"
  },
  {
    "text": "answer yes hello hi oh over",
    "start": "2583520",
    "end": "2591240"
  },
  {
    "text": "here other way are your uh systems are your uh cryptographic methods 140-2",
    "start": "2591240",
    "end": "2598839"
  },
  {
    "text": "validated fips I'm sorry who's talking aha I see",
    "start": "2598839",
    "end": "2604559"
  },
  {
    "text": "you uh we I think the exact status of the fips certification should be",
    "start": "2604559",
    "end": "2610440"
  },
  {
    "text": "mentioned in the I security guide uh essentially some of it is validated and some is not okay thank you",
    "start": "2610440",
    "end": "2618319"
  },
  {
    "text": "MH uhuh all right you go ahead and try yep I hear you okay okay you hear me um",
    "start": "2618520",
    "end": "2624079"
  },
  {
    "text": "so after you destroy that code signing key um is there any way to update the the",
    "start": "2624079",
    "end": "2633079"
  },
  {
    "text": "firmware or the software running on the on the cloud there's not in fact that's the very purpose of destroying that uh",
    "start": "2633079",
    "end": "2639520"
  },
  {
    "text": "that signing key so uh go ahead so what if there's some vulnerability that's discovered later do you have to wipe out",
    "start": "2639520",
    "end": "2645359"
  },
  {
    "text": "the entire Farm the entire fleet and restart if a critical vulnerability were to be discovered in the cloud keal Fleet we would have to stand up a new Fleet",
    "start": "2645359",
    "end": "2652559"
  },
  {
    "text": "that has the patch software and then over time migrate new user enrollments to that Fleet okay thank",
    "start": "2652559",
    "end": "2659960"
  },
  {
    "text": "you go ahead so in keeping with uh that story of the extreme methods you're uh",
    "start": "2659960",
    "end": "2665880"
  },
  {
    "text": "measures you're going to to protect protect users from misuse of key material that Apple might have can you",
    "start": "2665880",
    "end": "2672240"
  },
  {
    "text": "talk to us about mitigations that might be in place uh to keep the secure",
    "start": "2672240",
    "end": "2677839"
  },
  {
    "text": "element from ever being forced to run software that would divulge the key material it",
    "start": "2677839",
    "end": "2684359"
  },
  {
    "text": "has I think you mean the secure Enclave rather than the forgive me yes the software that runs on the SCP is covered",
    "start": "2684359",
    "end": "2691760"
  },
  {
    "text": "by the same secure boot chain that validates all the rest of the software that's running on iOS devices",
    "start": "2691760",
    "end": "2697440"
  },
  {
    "text": "I understand if that's all you're willing to say thank",
    "start": "2697440",
    "end": "2701559"
  },
  {
    "text": "you okay we have uh someone in the back go ahead so with the Apple watch you if you",
    "start": "2705280",
    "end": "2711760"
  },
  {
    "text": "can unlock Max and phones and if I lose that Apple watch how do you protect uh",
    "start": "2711760",
    "end": "2718880"
  },
  {
    "text": "all of the other accounts that I have all of the other accounts you said",
    "start": "2718880",
    "end": "2724079"
  },
  {
    "text": "I I mean all all of the other devices so if with the Apple watch if I can unlock my Mac and if I lose that Apple watch",
    "start": "2724079",
    "end": "2731240"
  },
  {
    "text": "mhm uh what kind of what kind of security yeah it's a good question so uh",
    "start": "2731240",
    "end": "2737280"
  },
  {
    "text": "I don't know if you um do you use an Apple Watch no",
    "start": "2737280",
    "end": "2742359"
  },
  {
    "text": "ha if you did you would know that uh when you uh",
    "start": "2742359",
    "end": "2747720"
  },
  {
    "text": "set up your Apple watch you actually have to pick a passcode for it and uh you can set up your phone to effectively",
    "start": "2747720",
    "end": "2754000"
  },
  {
    "text": "uh um help you unlock your watch but the has a sensor where the moment you remove",
    "start": "2754000",
    "end": "2759040"
  },
  {
    "text": "it from uh your wrist it'll lock and once you put it back on your wrist you",
    "start": "2759040",
    "end": "2764079"
  },
  {
    "text": "can either unlock it using your phone or you have to enter a Pasco directly into the",
    "start": "2764079",
    "end": "2769078"
  },
  {
    "text": "watch follow on question from what you said earlier so if the case that that you have to migrate over to another",
    "start": "2770319",
    "end": "2775880"
  },
  {
    "text": "Fleet what is what mechanism is there to prevent say FBI migrating everybody's",
    "start": "2775880",
    "end": "2781359"
  },
  {
    "text": "data escrow Keys over to their Fleet and effectively own there is no ability to",
    "start": "2781359",
    "end": "2787559"
  },
  {
    "text": "migrate an existing record to a new Fleet that's simply not possible what we can do is stand up a new Fleet and",
    "start": "2787559",
    "end": "2793760"
  },
  {
    "text": "migrate new enrollments into that Fleet so in other words the existing body of",
    "start": "2793760",
    "end": "2798800"
  },
  {
    "text": "escar Records can only ever be decrypted by the club that the user created the escco record to what we can do is make",
    "start": "2798800",
    "end": "2805520"
  },
  {
    "text": "it so that further enrollments can go into the new Fleet and that by the way requires the ca search for the new Fleet",
    "start": "2805520",
    "end": "2812400"
  },
  {
    "text": "to be present on the iOS device so it has to come through a software update existing phones existing devices will",
    "start": "2812400",
    "end": "2819240"
  },
  {
    "text": "continue operating with the possibly compromised or older software of Fleet",
    "start": "2819240",
    "end": "2825119"
  },
  {
    "text": "they will use the best Fleet that's available to them given the software version that they're running I see uh we have tremendous uptake on our updates uh",
    "start": "2825119",
    "end": "2833319"
  },
  {
    "text": "so um you know more than 90% of our user base is using the latest version of iOS so that's a good place to be right thank",
    "start": "2833319",
    "end": "2839520"
  },
  {
    "text": "you MH go ahead for your for the 10 passcode attempts before it Fells out is",
    "start": "2839520",
    "end": "2845119"
  },
  {
    "text": "that is that enforced in the SE or is that value stored outside of the C it is",
    "start": "2845119",
    "end": "2850480"
  },
  {
    "text": "enforced fully in the SCP the SCP has a secure monotonically increasing counter okay and if uh that counter reaches 10",
    "start": "2850480",
    "end": "2857760"
  },
  {
    "text": "incorrect passcode attempts it will simply refuse to use the uid key any further for that user key bag okay so",
    "start": "2857760",
    "end": "2864160"
  },
  {
    "text": "it's not stored in memory or anything like that it's all in set up it's fully within the SCP right thank you",
    "start": "2864160",
    "end": "2870880"
  },
  {
    "text": "yes with all the research around U making fake fingerprints and being able",
    "start": "2870880",
    "end": "2876200"
  },
  {
    "text": "to duplicate human fingerprint based on like a fingerprint record and you look at the OPM breach where all these fingerprint records were stolen it seems",
    "start": "2876200",
    "end": "2882160"
  },
  {
    "text": "kind of scary that like a touch ID sensor someone may be able to to reproduce a a fake finger then get into",
    "start": "2882160",
    "end": "2887480"
  },
  {
    "text": "a device within the 48 hour window is there any thoughts around some sort of mitigations to mitigate you know you",
    "start": "2887480",
    "end": "2893920"
  },
  {
    "text": "know malicious fingerprint scans or maybe even make it configurable to reduce that that 48 hour window to something a little bit less at least the",
    "start": "2893920",
    "end": "2900040"
  },
  {
    "text": "end user Make it",
    "start": "2900040",
    "end": "2902599"
  },
  {
    "text": "configurable it's an interesting question um I think",
    "start": "2905079",
    "end": "2910280"
  },
  {
    "text": "for uh Biometrics in general I think uh these uh vulnerabilities are to some",
    "start": "2910599",
    "end": "2916040"
  },
  {
    "text": "degree inherent and we do the the very best we can with both our sensor and how",
    "start": "2916040",
    "end": "2921520"
  },
  {
    "text": "it's used you saw that you know we make all the template matching happen in the secure Enclave none of that ever touches",
    "start": "2921520",
    "end": "2927319"
  },
  {
    "text": "the uh the application processor that said we continue to follow um the research that's happening in that space",
    "start": "2927319",
    "end": "2933559"
  },
  {
    "text": "and uh certainly would continue improving as best we can over time thank",
    "start": "2933559",
    "end": "2940480"
  },
  {
    "text": "you go ahead hi uh would you be willing to talk about the upcoming features of",
    "start": "2940920",
    "end": "2946799"
  },
  {
    "text": "watchtower in iOS 10 and a bit of the design of that structure I'm going to um focus on what",
    "start": "2946799",
    "end": "2954359"
  },
  {
    "text": "I talked about today I was wondering if you'd be willing to talk about any of the",
    "start": "2954359",
    "end": "2959680"
  },
  {
    "text": "mechanisms against side Channel attacks you might have so in particular em or power or",
    "start": "2959680",
    "end": "2964760"
  },
  {
    "text": "sound uh you know I'm not sure what of that we discuss in the iOS security guide uh I think um if uh we don't cover",
    "start": "2964760",
    "end": "2972240"
  },
  {
    "text": "that that would be an interesting thing to consider adding so please shoot us an email and we'll see what we can do go",
    "start": "2972240",
    "end": "2978160"
  },
  {
    "text": "ahead yeah I was just curious what's the most persistent security issue you face with iOS in",
    "start": "2978160",
    "end": "2984838"
  },
  {
    "text": "general tough audience questions thank you",
    "start": "2987440",
    "end": "2996460"
  },
  {
    "text": "[Applause] no really don't thank you go",
    "start": "2996460",
    "end": "3003160"
  },
  {
    "text": "ahead yeah uh I'm coming from the Chinese team and where team is new team",
    "start": "3003160",
    "end": "3009520"
  },
  {
    "text": "is focus on uh Apple uh secret research and uh from last year to now we fed uh",
    "start": "3009520",
    "end": "3018680"
  },
  {
    "text": "feedb the some secret problem to Apple secret but we have a problem uh because",
    "start": "3018680",
    "end": "3027160"
  },
  {
    "text": "we found the secret Apple secret uh feed the feedback uh response is too slow so",
    "start": "3027160",
    "end": "3035680"
  },
  {
    "text": "and maybe uh one secret problem uh to uh",
    "start": "3035680",
    "end": "3042079"
  },
  {
    "text": "about one year so how can we uh solution this problem I I I I'm sorry I didn't",
    "start": "3042079",
    "end": "3049000"
  },
  {
    "text": "quite follow your question you're saying that which part was SL yeah we we fed we feed back some uh SEC problem to the uh",
    "start": "3049000",
    "end": "3058119"
  },
  {
    "text": "IPO security but the IPO security is the response too",
    "start": "3058119",
    "end": "3063720"
  },
  {
    "text": "slow I see the question was uh security response you know we we get a tremendous",
    "start": "3063720",
    "end": "3068760"
  },
  {
    "text": "amount of issues and U overwhelmingly uh all of them are answered very quickly uh",
    "start": "3068760",
    "end": "3073960"
  },
  {
    "text": "if you have issues that for some reason you're having trouble with please send another email you should not be encountering that kind of",
    "start": "3073960",
    "end": "3080200"
  },
  {
    "text": "issue all right folks I think that's all we have time for thank you very much for coming again",
    "start": "3080200",
    "end": "3087559"
  },
  {
    "text": "I really hope you liked what you heard",
    "start": "3087559",
    "end": "3091559"
  }
]