[
  {
    "start": "0",
    "end": "77000"
  },
  {
    "text": "[Music]",
    "start": "1700",
    "end": "4810"
  },
  {
    "text": "hello so very welcome to my talk I'm Chung or we are also three team members",
    "start": "7639",
    "end": "13980"
  },
  {
    "text": "who will not be presenting here who is Antonio Kim and Dave",
    "start": "13980",
    "end": "21060"
  },
  {
    "text": "so a little bit about myself or material handle is on the screen or I'm currently",
    "start": "21060",
    "end": "27900"
  },
  {
    "text": "a undergraduate computer science student at Purdue University in the U.S",
    "start": "27900",
    "end": "33120"
  },
  {
    "text": "or um I'm from Vietnam currently I'm focusing on Mac OS and iOS research or I",
    "start": "33120",
    "end": "40680"
  },
  {
    "text": "used to blog about CTF write-ups or challenge or what I have seized doing from doing some of them since then along",
    "start": "40680",
    "end": "47520"
  },
  {
    "text": "uh since quite a long so today agenda first uh we'll discuss",
    "start": "47520",
    "end": "52680"
  },
  {
    "text": "the current state of iOS research then we can look at",
    "start": "52680",
    "end": "58079"
  },
  {
    "text": "our design goal in building an emulator then we'll talk about how how we",
    "start": "58079",
    "end": "63120"
  },
  {
    "text": "implemented it and also the ways that we can use to remove for research then",
    "start": "63120",
    "end": "68760"
  },
  {
    "text": "we'll talk about its future and Route Maps so let's Dive Right In",
    "start": "68760",
    "end": "76159"
  },
  {
    "start": "77000",
    "end": "406000"
  },
  {
    "text": "so we need to talk about the current way we are doing iOS research uh the most",
    "start": "77280",
    "end": "82979"
  },
  {
    "text": "common way is to using to use real device and you also have a few options for that",
    "start": "82979",
    "end": "89159"
  },
  {
    "text": "or first you can use a something called security research device by Apple or",
    "start": "89159",
    "end": "96479"
  },
  {
    "text": "there is a real device however the main problem with this is that you are you have to cite ndis and or your obligated",
    "start": "96479",
    "end": "105119"
  },
  {
    "text": "to report all your findings to Apple uh other options is to use internal",
    "start": "105119",
    "end": "113220"
  },
  {
    "text": "device so this device are mostly stolen or and because it's only limited",
    "start": "113220",
    "end": "119640"
  },
  {
    "text": "internal use only so you have some legal issues there so it might be not be preferable for most",
    "start": "119640",
    "end": "125939"
  },
  {
    "text": "of researchers and also these devices are really rare because they have to be leaked",
    "start": "125939",
    "end": "132599"
  },
  {
    "text": "on the left is some of this device that on the rise is the cables that will you'll be using when to debug this",
    "start": "132599",
    "end": "140040"
  },
  {
    "text": "device next you can use of the show to your broken device so these are device you",
    "start": "140040",
    "end": "146760"
  },
  {
    "text": "can get from the store but you have to hack it first to in order to or to",
    "start": "146760",
    "end": "152160"
  },
  {
    "text": "research it so it's pretty high it's already a high barrier to or to deal",
    "start": "152160",
    "end": "157800"
  },
  {
    "text": "with however there are some reason Recent",
    "start": "157800",
    "end": "163080"
  },
  {
    "text": "research with the Checkmate exploit which allows you to do debugging provided that you can build yourself a",
    "start": "163080",
    "end": "169140"
  },
  {
    "text": "cables on like on the right on the light the pictures on the right this is this",
    "start": "169140",
    "end": "174959"
  },
  {
    "text": "and set up by another researcher",
    "start": "174959",
    "end": "178879"
  },
  {
    "text": "oh another option is for non-joboken device this device are a highly sandbox and",
    "start": "182060",
    "end": "190140"
  },
  {
    "text": "pre-secure so it is really hard to and it's really hard to to work with it",
    "start": "190140",
    "end": "196080"
  },
  {
    "text": "because you're only limited to the panic lock which is not interactive at all if",
    "start": "196080",
    "end": "201420"
  },
  {
    "text": "you want to do kernel debugging and hacking or something like that you cannot you have can also use all",
    "start": "201420",
    "end": "208200"
  },
  {
    "text": "maps and with all of these problems posed by real device or we try to solve some of",
    "start": "208200",
    "end": "216300"
  },
  {
    "text": "them using emulation so some options for animations well you have the third party",
    "start": "216300",
    "end": "222900"
  },
  {
    "text": "commercial LS emulator these are pretty popular or pretty state-of-the-art or",
    "start": "222900",
    "end": "229080"
  },
  {
    "text": "really cool but however they are pretty expensive so I never I never try it personally or",
    "start": "229080",
    "end": "238140"
  },
  {
    "text": "and if you want to dive into a smaller loadable stuff such as iboot or sap or",
    "start": "238140",
    "end": "244319"
  },
  {
    "text": "is also limited to on premises only so unless you are a big company or a government agency you",
    "start": "244319",
    "end": "252780"
  },
  {
    "text": "probably cannot get access to it",
    "start": "252780",
    "end": "256159"
  },
  {
    "text": "or you can use also use VM Apple which is a Mac VM provided by Apple or this is",
    "start": "260459",
    "end": "267000"
  },
  {
    "text": "also Limited in customization but somehow some people have managed to do some really cool work with it",
    "start": "267000",
    "end": "275060"
  },
  {
    "text": "and you can also use other security or  report so this is presented a",
    "start": "276240",
    "end": "282960"
  },
  {
    "text": "Blackheart Europe like in 2019 but however the problem is that they are",
    "start": "282960",
    "end": "289979"
  },
  {
    "text": "they only support like two iOS version only so if that's pretty limited or they",
    "start": "289979",
    "end": "295199"
  },
  {
    "text": "also have very limited Hardware support and it also have uh it's also really hard to maintain because of the code",
    "start": "295199",
    "end": "302820"
  },
  {
    "text": "quality uh and it's also abundant by now",
    "start": "302820",
    "end": "308240"
  },
  {
    "text": "so so we try to build an emulator that can",
    "start": "308240",
    "end": "313860"
  },
  {
    "text": "solve as much of the problems that posed by these methods are possible",
    "start": "313860",
    "end": "320400"
  },
  {
    "text": "so let's now let's talk about is design goal so we want to we want the free to",
    "start": "320400",
    "end": "326100"
  },
  {
    "text": "use our research or emulator so is US",
    "start": "326100",
    "end": "331680"
  },
  {
    "text": "research fairly as possible and by that we mean we want to have a wide range of",
    "start": "331680",
    "end": "337440"
  },
  {
    "text": "iOS version support and we want also want to debug the kernel easily and we",
    "start": "337440",
    "end": "342780"
  },
  {
    "text": "also want to use it for fuzzing so with these disciples we have come up",
    "start": "342780",
    "end": "351539"
  },
  {
    "text": "with some very notable features first uh the amateur model actual Hardware so it's it it tries to we have",
    "start": "351539",
    "end": "360120"
  },
  {
    "text": "as close as to the real Hardware as possible or it supports a right range of iOS",
    "start": "360120",
    "end": "365940"
  },
  {
    "text": "version ranging from IOS 14 to iOS 16 which is currently still in beta",
    "start": "365940",
    "end": "371160"
  },
  {
    "text": "or we also support circularm and I would stop but that is pretty experimental",
    "start": "371160",
    "end": "376380"
  },
  {
    "text": "brand new or you can also debug the kernel with it or very easily",
    "start": "376380",
    "end": "382800"
  },
  {
    "text": "or it also helps USB support so you can install real iOS or it also supports some custom",
    "start": "382800",
    "end": "391759"
  },
  {
    "text": "CPU features by Apple and the best part is that we are open source so you can uh",
    "start": "391759",
    "end": "398100"
  },
  {
    "text": "you can check out our repo which is in the QR on the side",
    "start": "398100",
    "end": "403280"
  },
  {
    "text": "so how did we do that well there are a lot of challenges and we will walk into",
    "start": "405180",
    "end": "410340"
  },
  {
    "start": "406000",
    "end": "603000"
  },
  {
    "text": "what walks you to the general ideas so how does the new device get model",
    "start": "410340",
    "end": "416419"
  },
  {
    "text": "well first we will look at for the information in the device tree then",
    "start": "416419",
    "end": "421860"
  },
  {
    "text": "we'll build a stop model so the model that does nothing but basically locks every access by the like every injection",
    "start": "421860",
    "end": "428520"
  },
  {
    "text": "from the CPU and we and with these tools we can do Dynamic and static reverse",
    "start": "428520",
    "end": "435180"
  },
  {
    "text": "engineering to see how does the hardware behave how does it works and then we can",
    "start": "435180",
    "end": "440639"
  },
  {
    "text": "once we know the protocol we can write emulation code to emulate the need",
    "start": "440639",
    "end": "445919"
  },
  {
    "text": "response and then we'll have a device that is emulated",
    "start": "445919",
    "end": "451400"
  },
  {
    "text": "so let's walk through some steps first the device tree the revised three can be",
    "start": "451819",
    "end": "457199"
  },
  {
    "text": "found in our stream firmware which you can download from Apple or the best thing about it is that it",
    "start": "457199",
    "end": "464099"
  },
  {
    "text": "contains a rich amount of peripherals information or and is used heavily by the iOS kernel",
    "start": "464099",
    "end": "470759"
  },
  {
    "text": "to merge drivers so let's have a look at the example entry so on the screen is on the device",
    "start": "470759",
    "end": "478919"
  },
  {
    "text": "re-entry of the gpio controller so on the left is the property name and on the",
    "start": "478919",
    "end": "485039"
  },
  {
    "text": "right is values let's have a look at some interesting ones so the arrows is currently pointing to",
    "start": "485039",
    "end": "492419"
  },
  {
    "text": "the comparable or property so this the compiler probably is used to match",
    "start": "492419",
    "end": "497520"
  },
  {
    "text": "drivers so it will look at the strings in the comparable property and then find the appropriate drivers to for the",
    "start": "497520",
    "end": "504539"
  },
  {
    "text": "correct device and it will uh another interesting one is interrupt so this is basically an",
    "start": "504539",
    "end": "512880"
  },
  {
    "text": "a list of interrupts that the device will use so in this case the G5 will use",
    "start": "512880",
    "end": "517979"
  },
  {
    "text": "a hex or 83 to hex 89 interrupts",
    "start": "517979",
    "end": "524399"
  },
  {
    "text": "or you also have the rack entry which is basically where the device is in the",
    "start": "524399",
    "end": "530519"
  },
  {
    "text": "memory so basically it's mmio address and you also have the number the hash",
    "start": "530519",
    "end": "537060"
  },
  {
    "text": "GPI opens which is shorted for a number of UPL pins this device have",
    "start": "537060",
    "end": "543740"
  },
  {
    "text": "so with this information we can build a stop model so we map and dummy memory",
    "start": "544860",
    "end": "550380"
  },
  {
    "text": "region into the memo address in the device tree then on each rise or each",
    "start": "550380",
    "end": "557040"
  },
  {
    "text": "assessed by the CPU will lock them and then print the back choice or and with",
    "start": "557040",
    "end": "562920"
  },
  {
    "text": "the battery is we can travel or travel through related code to see what what is the logic of the software what it is",
    "start": "562920",
    "end": "569519"
  },
  {
    "text": "trying to do or something like that and we can also even try to drive the interrupt lines to see how those",
    "start": "569519",
    "end": "576000"
  },
  {
    "text": "interrupts are processed so here is an example log from or for",
    "start": "576000",
    "end": "582300"
  },
  {
    "text": "the display controller so I don't know you can you can see it but oh but we",
    "start": "582300",
    "end": "588000"
  },
  {
    "text": "have a we have to offset the seafood is trying to the value and also the vector is PC",
    "start": "588000",
    "end": "594240"
  },
  {
    "text": "so we can easily navigate to the iOS kernel code",
    "start": "594240",
    "end": "599959"
  },
  {
    "text": "next is a really interesting CPU features or custom a very custom one by",
    "start": "602880",
    "end": "609720"
  },
  {
    "start": "603000",
    "end": "775000"
  },
  {
    "text": "Apple so it's called SPO gxf or this is using",
    "start": "609720",
    "end": "615480"
  },
  {
    "text": "both iOS kernel and also in user userline browser it's basically a custom",
    "start": "615480",
    "end": "621360"
  },
  {
    "text": "privilege level created by Apple or so how how does this privilege level",
    "start": "621360",
    "end": "627899"
  },
  {
    "text": "fits into the normal one you may ask well let's have a look at the normal",
    "start": "627899",
    "end": "633540"
  },
  {
    "text": "previous level model so we have el3 to er0 the the higher or the higher number",
    "start": "633540",
    "end": "640800"
  },
  {
    "text": "the more privilege it is so el0 is you the user display and er3 is the",
    "start": "640800",
    "end": "647579"
  },
  {
    "text": "supervisor thank you so for gxm it basically creates a GL2",
    "start": "647579",
    "end": "657120"
  },
  {
    "text": "and gl3 is largely from the normal one so or GL2 is",
    "start": "657120",
    "end": "664740"
  },
  {
    "text": "guarded mode for el2 so it is more privileged compared to normal el3 el2 or",
    "start": "664740",
    "end": "672060"
  },
  {
    "text": "so gxl is shorted for garden execution feature so you have a garden execution level to",
    "start": "672060",
    "end": "680279"
  },
  {
    "text": "enter it you use the G enter instruction which is a non-style one or",
    "start": "680279",
    "end": "686399"
  },
  {
    "text": "and you can use exit to exit from the god mode to normal mode",
    "start": "686399",
    "end": "692579"
  },
  {
    "text": "so the difference between Goddard and normal mode is that God mode can have different permission so you can create",
    "start": "692579",
    "end": "699720"
  },
  {
    "text": "pages that can only be written by God mode but cannot be modified by normal mode",
    "start": "699720",
    "end": "706579"
  },
  {
    "text": "so here we how it's worked so on this on on screen is the normal page descriptor",
    "start": "708720",
    "end": "714959"
  },
  {
    "text": "so this uh so this describes how a page this describes the permission of the",
    "start": "714959",
    "end": "721320"
  },
  {
    "text": "page so is it is readable writable or executable so yeah so so the color bits",
    "start": "721320",
    "end": "728339"
  },
  {
    "text": "are the ones that used to determine the permission however I could change the definition of",
    "start": "728339",
    "end": "734399"
  },
  {
    "text": "this bit or and they change they convert into index so they match it into an",
    "start": "734399",
    "end": "741420"
  },
  {
    "text": "index instead of passing it a permission itself and the index is used to look up on the",
    "start": "741420",
    "end": "746940"
  },
  {
    "text": "permission resistor which is 64-bit and and you can have 16 permission index",
    "start": "746940",
    "end": "754260"
  },
  {
    "text": "and each permission will have four bits which will describe the permission each",
    "start": "754260",
    "end": "759660"
  },
  {
    "text": "page half so two bits for guarded mode and two bits for normal mode",
    "start": "759660",
    "end": "765779"
  },
  {
    "text": "so permission bids on page level now becomes indexed for a system resistor",
    "start": "765779",
    "end": "772200"
  },
  {
    "text": "so how it is used in iOS kernel well or apple has a thing called prosection",
    "start": "772200",
    "end": "778440"
  },
  {
    "text": "layer or which is normally shorted for PPL or this contains seriously sensitive",
    "start": "778440",
    "end": "785579"
  },
  {
    "text": "code or so you can have when you compare the",
    "start": "785579",
    "end": "791700"
  },
  {
    "text": "size of God code and normal code you can see a large difference so for my",
    "start": "791700",
    "end": "798120"
  },
  {
    "text": "comparison so show that there are more than 300 times smaller for garden code",
    "start": "798120",
    "end": "803480"
  },
  {
    "text": "so which means that a series sensitive code has less attack surface or if you",
    "start": "803480",
    "end": "810540"
  },
  {
    "text": "attack if you hacker when you hack it the normal mode you also need to hike PPL to in order to do more fancy",
    "start": "810540",
    "end": "818420"
  },
  {
    "text": "exploration Primitives so you can jump from garden mode to",
    "start": "818420",
    "end": "826019"
  },
  {
    "text": "normal mode but not the other way around the other way is being used is for jit",
    "start": "826019",
    "end": "833639"
  },
  {
    "text": "so browsers tends to use jit to or speed up the execution process of JavaScript",
    "start": "833639",
    "end": "840540"
  },
  {
    "text": "so what it does is compile JavaScript to native code so to do that it has it",
    "start": "840540",
    "end": "847139"
  },
  {
    "text": "create pages that are both writable and executable",
    "start": "847139",
    "end": "851959"
  },
  {
    "text": "however these are some problems or 4G page you constantly need to switch",
    "start": "852839",
    "end": "859019"
  },
  {
    "text": "between this mode or for when you're compiling you need to switch to right mode and when you're executing you need",
    "start": "859019",
    "end": "864899"
  },
  {
    "text": "to have it in execute mode so changing the permission generate takes a lot of",
    "start": "864899",
    "end": "871440"
  },
  {
    "text": "or it's pretty slow or it takes a lot of work from the CPU so perform performance",
    "start": "871440",
    "end": "877680"
  },
  {
    "text": "is integrated or so output design",
    "start": "877680",
    "end": "883820"
  },
  {
    "text": "Expo to fix this problem to improve the speed of the jit compiler",
    "start": "883820",
    "end": "890940"
  },
  {
    "text": "so let's have a look of the process of changing so this is an excerpt from the method",
    "start": "890940",
    "end": "898079"
  },
  {
    "text": "that changed the right protection mode so this is a method that changed between read execute to write or read write and",
    "start": "898079",
    "end": "906480"
  },
  {
    "text": "vice versa so on the left is the part for isoq mode and on the right",
    "start": "906480",
    "end": "911820"
  },
  {
    "text": "is for the right mode so the difference between too fast is shown by the top",
    "start": "911820",
    "end": "917220"
  },
  {
    "text": "arrows which are the values it are rendered from the different location so",
    "start": "917220",
    "end": "922320"
  },
  {
    "text": "the first location will contain the values that will that will configure the page to execute mode and all right mode",
    "start": "922320",
    "end": "931500"
  },
  {
    "text": "so the MSO here is the trick or if you when the CPU file the MSR instruction it",
    "start": "931500",
    "end": "939180"
  },
  {
    "text": "will change the permission of the page that is splr configured",
    "start": "939180",
    "end": "945420"
  },
  {
    "text": "so you can see there is no Cisco involved no shopping involved so it runs",
    "start": "945420",
    "end": "950459"
  },
  {
    "text": "really fast",
    "start": "950459",
    "end": "952880"
  },
  {
    "text": "so with this completed logic or we have to implement it in kumu to you know to",
    "start": "956220",
    "end": "964079"
  },
  {
    "start": "958000",
    "end": "1168000"
  },
  {
    "text": "ask support for it so how do we do that so first first thing first or you need",
    "start": "964079",
    "end": "969600"
  },
  {
    "text": "to have to you need to decode more instructions which is the G enter and gxit or there's",
    "start": "969600",
    "end": "975660"
  },
  {
    "text": "a custom instruction or you also have to rework the page table logic because the",
    "start": "975660",
    "end": "982079"
  },
  {
    "text": "save will no longer understand the page permission the same way however we still",
    "start": "982079",
    "end": "987240"
  },
  {
    "text": "have uh we still haven't figured everything out yet so and the Q moves tlb have some",
    "start": "987240",
    "end": "994740"
  },
  {
    "text": "limitations so we still require a flushes until we flushes or which may serve without the fourth performance or",
    "start": "994740",
    "end": "1001579"
  },
  {
    "text": "when the permission are being changed or next let's talk about usb so why do",
    "start": "1001579",
    "end": "1009199"
  },
  {
    "text": "you want why do you really want USB emulation you might ask well we can use it for restoring so restoring is a fancy",
    "start": "1009199",
    "end": "1016459"
  },
  {
    "text": "way of like installing an operating system or for iOS device so when we",
    "start": "1016459",
    "end": "1022940"
  },
  {
    "text": "restore an iOS device it's recording installing an iOS on the device",
    "start": "1022940",
    "end": "1028699"
  },
  {
    "text": "or just say it's also really useful you can use it for networking for example",
    "start": "1028699",
    "end": "1034220"
  },
  {
    "text": "like SSH and you can and you can also connect the device to xcode using USB",
    "start": "1034220",
    "end": "1042740"
  },
  {
    "text": "however to implement USB there are some challenge where we Face the first",
    "start": "1042740",
    "end": "1047780"
  },
  {
    "text": "problem is that our salary has USB drivers for synopsis controllers or if",
    "start": "1047780",
    "end": "1054320"
  },
  {
    "text": "you never heard of them or they build Hardware IP or basically",
    "start": "1054320",
    "end": "1060500"
  },
  {
    "text": "the controller however the data sheets are tends to be payable so you need to",
    "start": "1060500",
    "end": "1067220"
  },
  {
    "text": "have a deal with the synopsis to you know in order to get uh",
    "start": "1067220",
    "end": "1072559"
  },
  {
    "text": "a documentation on how the device works however there is the other way to around",
    "start": "1072559",
    "end": "1077840"
  },
  {
    "text": "that or here on the screen is an excerpt from",
    "start": "1077840",
    "end": "1083960"
  },
  {
    "text": "qmo code or so in the comments they are really interesting lives so they link a",
    "start": "1083960",
    "end": "1091520"
  },
  {
    "text": "documentation or for the device which interestingly enough is of is",
    "start": "1091520",
    "end": "1098059"
  },
  {
    "text": "freely available to the public or so when synopsis don't give it to you let the other Hardware manufacturer give",
    "start": "1098059",
    "end": "1105440"
  },
  {
    "text": "it to you because or hardware for example or even Intel when they make",
    "start": "1105440",
    "end": "1111799"
  },
  {
    "text": "some boards which is a Highway IP they release documentation for it which the",
    "start": "1111799",
    "end": "1117320"
  },
  {
    "text": "US the USB section for it or is basically a copy from the synopsis one",
    "start": "1117320",
    "end": "1124179"
  },
  {
    "text": "okay so the second problem is the actual iPhone use newer stenosis controller so",
    "start": "1132440",
    "end": "1139360"
  },
  {
    "text": "or documentation for this for the new controller tend to be Sparrow sponsor so",
    "start": "1139360",
    "end": "1145640"
  },
  {
    "text": "you have less of them or a few of them so it's not as much as available compared to all controller we used to",
    "start": "1145640",
    "end": "1152840"
  },
  {
    "text": "walk around this by forcing iOS to load drivers for the old controller however",
    "start": "1152840",
    "end": "1158120"
  },
  {
    "text": "luckily we are able to implement the new controller by now",
    "start": "1158120",
    "end": "1164679"
  },
  {
    "text": "so that's for the controller or the USB also have the the USB bus that we need",
    "start": "1166760",
    "end": "1172700"
  },
  {
    "start": "1168000",
    "end": "1251000"
  },
  {
    "text": "to implement it so if you don't know you still have two sides or one is the whole side which is essentially your PC",
    "start": "1172700",
    "end": "1179780"
  },
  {
    "text": "and the other side is the draw the the thing you connect to your PC which can",
    "start": "1179780",
    "end": "1185120"
  },
  {
    "text": "be your flash drive or your iPhone or kumu does not support device mode or",
    "start": "1185120",
    "end": "1191539"
  },
  {
    "text": "because it's used it is built to Emirate emulate a PC so we have to enter the",
    "start": "1191539",
    "end": "1197900"
  },
  {
    "text": "support for that oh so how do we do that",
    "start": "1197900",
    "end": "1203780"
  },
  {
    "text": "well we connect the iOS VM to a USB host to Unix pipe or on the screen is uh the",
    "start": "1203780",
    "end": "1212840"
  },
  {
    "text": "simple diagram of how it works so on the top level you have the software running",
    "start": "1212840",
    "end": "1218000"
  },
  {
    "text": "the software will talk to the controller which can be the synopsis Drive synthesis USB or the esci which is the",
    "start": "1218000",
    "end": "1227020"
  },
  {
    "text": "USD 2.0 controller and this controller can talk or this controller are emulated",
    "start": "1227020",
    "end": "1233360"
  },
  {
    "text": "in kumu so and this controller will talk to a physical layer which will",
    "start": "1233360",
    "end": "1240860"
  },
  {
    "text": "implemented it through some proxy device and this device will talk to each other through sockets",
    "start": "1240860",
    "end": "1246799"
  },
  {
    "text": "or units of pets so how can we use it for research so well",
    "start": "1246799",
    "end": "1254299"
  },
  {
    "start": "1251000",
    "end": "1546000"
  },
  {
    "text": "let me show you",
    "start": "1254299",
    "end": "1257019"
  },
  {
    "text": "so okay",
    "start": "1260660",
    "end": "1264820"
  },
  {
    "text": "so in the first demo or we will try to restore iOS so let me so here we",
    "start": "1265700",
    "end": "1273080"
  },
  {
    "text": "are starting on on iOS VM on the left is the iOS and on the right is the Linux VM",
    "start": "1273080",
    "end": "1280760"
  },
  {
    "text": "which acts as a host which runs I device restore on there and the restore has",
    "start": "1280760",
    "end": "1286220"
  },
  {
    "text": "started you can see the protocol is creeping up uh with speeding up the process here",
    "start": "1286220",
    "end": "1291740"
  },
  {
    "text": "because restore tends to take a few more few more minutes",
    "start": "1291740",
    "end": "1296559"
  },
  {
    "text": "there we go or the restore complete successfully or you",
    "start": "1320299",
    "end": "1327140"
  },
  {
    "text": "can see the it says or restore finish and all the device will restart or we",
    "start": "1327140",
    "end": "1334460"
  },
  {
    "text": "override the restart Behavior to make a stop so it makes it easier for recording so the process took 11 minutes",
    "start": "1334460",
    "end": "1343120"
  },
  {
    "text": "okay next I will I will run it or I will do a lively mode just",
    "start": "1351740",
    "end": "1358960"
  },
  {
    "text": "so here we will start an iOS VM or we are I am running in snapshot mode so it",
    "start": "1360140",
    "end": "1366320"
  },
  {
    "text": "does not persist any change",
    "start": "1366320",
    "end": "1369519"
  },
  {
    "text": "where's my mouse",
    "start": "1372080",
    "end": "1375100"
  },
  {
    "text": "give a moment for to put up",
    "start": "1384980",
    "end": "1388780"
  },
  {
    "text": "oh wait what's wrong with this it didn't show anything",
    "start": "1397580",
    "end": "1402520"
  },
  {
    "text": "give a moment for the USB to initialize",
    "start": "1407600",
    "end": "1412120"
  },
  {
    "text": "there we go so um I'm also on the so the lock screen is",
    "start": "1416780",
    "end": "1423440"
  },
  {
    "text": "the Linux VM so you can use OS USB it shows the iOS device it's on USB bus or",
    "start": "1423440",
    "end": "1430880"
  },
  {
    "text": "now we will use ifoxy or so this the tool where so to so this tool will",
    "start": "1430880",
    "end": "1437900"
  },
  {
    "text": "forward basically forward the traffic from our local port or 222 and full",
    "start": "1437900",
    "end": "1444080"
  },
  {
    "text": "forward is 2.44 on the iOS device over USB so let's do an SSH here",
    "start": "1444080",
    "end": "1452679"
  },
  {
    "text": "and the first and the first word is Alpine everyone knows that",
    "start": "1457700",
    "end": "1463520"
  },
  {
    "text": "will we are a root shell inside the iOS VM I can show it to you using your name",
    "start": "1463520",
    "end": "1469400"
  },
  {
    "text": "you can see it is running I send you and the model is currently emitting is the",
    "start": "1469400",
    "end": "1475400"
  },
  {
    "text": "iPhone 12 or iPhone 11. oh you can also run software verse to see",
    "start": "1475400",
    "end": "1482240"
  },
  {
    "text": "the version is currently running and we can also run other commands to explore the iOS device let's start with",
    "start": "1482240",
    "end": "1489140"
  },
  {
    "text": "simple or I will try OS on the root you can see there are some uh files there",
    "start": "1489140",
    "end": "1495980"
  },
  {
    "text": "you can use hashtalk to list all the process planning so there are these are",
    "start": "1495980",
    "end": "1501500"
  },
  {
    "text": "real service that runs on real device so you have running board you have",
    "start": "1501500",
    "end": "1507980"
  },
  {
    "text": "installed you have chronotas you have launch D basically like your actual device",
    "start": "1507980",
    "end": "1513940"
  },
  {
    "text": "foreign",
    "start": "1514820",
    "end": "1517000"
  },
  {
    "text": "so in the previous demo we explore the we look at the restore process of iOS or",
    "start": "1526720",
    "end": "1532520"
  },
  {
    "text": "we even got the best shell on an installer iOS or device and we also even",
    "start": "1532520",
    "end": "1539659"
  },
  {
    "text": "Associated to the VM using over USB",
    "start": "1539659",
    "end": "1544900"
  },
  {
    "text": "next thing uh we do have iBook support or so if you",
    "start": "1545500",
    "end": "1552140"
  },
  {
    "start": "1546000",
    "end": "1701000"
  },
  {
    "text": "don't know or I would install iPhone Bluetooth is used for Recovery or and or",
    "start": "1552140",
    "end": "1559400"
  },
  {
    "text": "to load the kernel so why do you want to emulate iboot",
    "start": "1559400",
    "end": "1564500"
  },
  {
    "text": "because I would is in the circle route chain so if you can hike I would or",
    "start": "1564500",
    "end": "1570140"
  },
  {
    "text": "somehow or it will get uh it will give you a lot of power over the kernel the",
    "start": "1570140",
    "end": "1575600"
  },
  {
    "text": "software the device is running so because it is a part of the circle boot chain",
    "start": "1575600",
    "end": "1581120"
  },
  {
    "text": "and one more reason is uh we use iBook to verify our model because I would tend",
    "start": "1581120",
    "end": "1588440"
  },
  {
    "text": "to Hardware in a really peculiar way so we will wait so",
    "start": "1588440",
    "end": "1594320"
  },
  {
    "text": "if you can run I would then we have more chance that our model is emulate the",
    "start": "1594320",
    "end": "1599480"
  },
  {
    "text": "hardware correctly and our support is pretty experimental so it's not really ready for production",
    "start": "1599480",
    "end": "1606279"
  },
  {
    "text": "and it doesn't or hasn't been published yet but I will give you a demo right now",
    "start": "1606279",
    "end": "1614020"
  },
  {
    "text": "so here we go or we start off iboot or you can see the boot Banner on the top",
    "start": "1622400",
    "end": "1627500"
  },
  {
    "text": "left on the right is the recovery screen that you will generally see",
    "start": "1627500",
    "end": "1633140"
  },
  {
    "text": "or open up the Linux VM we can use all the eye recovery to query information",
    "start": "1633140",
    "end": "1639140"
  },
  {
    "text": "about the device and you can also get a shower or by using S",
    "start": "1639140",
    "end": "1645520"
  },
  {
    "text": "and that's it or unfortunately it does or you can also attach a debugger to all",
    "start": "1645520",
    "end": "1652640"
  },
  {
    "text": "these demos or however for iBook or this or",
    "start": "1652640",
    "end": "1658960"
  },
  {
    "text": "we are still pretty new to it so that's that's all we got for today",
    "start": "1658960",
    "end": "1666220"
  },
  {
    "text": "so in the to recap or output was loaded in the demo and we use a recovery in the",
    "start": "1673640",
    "end": "1681679"
  },
  {
    "text": "Linux VM to interact with the recovery mode which can get some query some",
    "start": "1681679",
    "end": "1687140"
  },
  {
    "text": "device information and get a recovery show however the recovery show for release builds tends to be",
    "start": "1687140",
    "end": "1694000"
  },
  {
    "text": "registered so in or there's not much to do with it",
    "start": "1694000",
    "end": "1699760"
  },
  {
    "start": "1701000",
    "end": "1741000"
  },
  {
    "text": "next uh we also both removed for rainbow",
    "start": "1701000",
    "end": "1706520"
  },
  {
    "text": "focusing first thing so to support rate of fasting we we implemented a snapshot",
    "start": "1706520",
    "end": "1713539"
  },
  {
    "text": "feature so the problem we are trying to solve is that because iOS boot time",
    "start": "1713539",
    "end": "1719480"
  },
  {
    "text": "is not fast enough for fuzzing so for first thing you want it to run something",
    "start": "1719480",
    "end": "1724700"
  },
  {
    "text": "repeatedly as fast as possible or so we started using snapshot so",
    "start": "1724700",
    "end": "1730520"
  },
  {
    "text": "because snapshot is faster than normal booting so it reduced the cycle or the",
    "start": "1730520",
    "end": "1736400"
  },
  {
    "text": "cycle Time by 10 times",
    "start": "1736400",
    "end": "1740860"
  },
  {
    "text": "we also out could coverage support to Kimu or because I value code coverage",
    "start": "1741620",
    "end": "1747140"
  },
  {
    "text": "for today today is Magic because we're running TCG so it's very easy for us",
    "start": "1747140",
    "end": "1755840"
  },
  {
    "text": "to report coverage",
    "start": "1755840",
    "end": "1758860"
  },
  {
    "start": "1761000",
    "end": "1881000"
  },
  {
    "text": "so we try to fast the USB stack here is the simple diagram so you have FL",
    "start": "1761000",
    "end": "1767000"
  },
  {
    "text": "running in persistent mode it will fall then for a kumu process and the Kumo will start by",
    "start": "1767000",
    "end": "1773380"
  },
  {
    "text": "restoring a snapshot oh the snapshot will be a fuzzable state so you can start sending commands or",
    "start": "1773380",
    "end": "1780559"
  },
  {
    "text": "inputs to it immediately then we have uh dummy USB host which will read or input",
    "start": "1780559",
    "end": "1788419"
  },
  {
    "text": "from AFL and send it to the iOS VM for processing so if I was standing",
    "start": "1788419",
    "end": "1795440"
  },
  {
    "text": "red or it will be reported to FL and if not or",
    "start": "1795440",
    "end": "1800620"
  },
  {
    "text": "no it will be also reported to AFL for or for startups",
    "start": "1800620",
    "end": "1808419"
  },
  {
    "text": "and here's the FL running or USB fasting",
    "start": "1808419",
    "end": "1815620"
  },
  {
    "text": "we also look into Cisco fuzzing so the diagram is pretty similar or we also",
    "start": "1819620",
    "end": "1826640"
  },
  {
    "text": "have persistent mode FFL or A4 kumu and then kumu does the snapshot restore then",
    "start": "1826640",
    "end": "1832940"
  },
  {
    "text": "inside the iOS VM we will have a program the USB program that receive input from AFL",
    "start": "1832940",
    "end": "1841000"
  },
  {
    "text": "using custom instructions oh and we'll do a Cisco based on the input you get if",
    "start": "1841000",
    "end": "1848000"
  },
  {
    "text": "I was panicked then it will be reported to AFL otherwise or",
    "start": "1848000",
    "end": "1853820"
  },
  {
    "text": "it will end the current cycle and do a snapshot restore again",
    "start": "1853820",
    "end": "1859720"
  },
  {
    "text": "here's a screenshot of AFL running Cisco first thing or we tend to uh leave a",
    "start": "1860059",
    "end": "1866779"
  },
  {
    "text": "better speed or with Cisco fuzzing compared to USB however uh there's still a lot of",
    "start": "1866779",
    "end": "1874159"
  },
  {
    "text": "challenges for fuzzing oh the first is summer interrupts so this interrupts can",
    "start": "1874159",
    "end": "1881120"
  },
  {
    "start": "1881000",
    "end": "1931000"
  },
  {
    "text": "Will interfere with the coverage result making it pretty random so it is not consistent at all or",
    "start": "1881120",
    "end": "1888080"
  },
  {
    "text": "our current solution for that is to mask every instructor possible however without interrupts our thread is",
    "start": "1888080",
    "end": "1894860"
  },
  {
    "text": "currently the only one running so the so iOS will never know if the if the some",
    "start": "1894860",
    "end": "1901039"
  },
  {
    "text": "stock for this thread has ended or not so it will never switch to other threat which prevents or which reduce our",
    "start": "1901039",
    "end": "1908899"
  },
  {
    "text": "opposing harness and the second problem is that apple does not provide sanitizer bills for iOS so maybe we're thinking",
    "start": "1908899",
    "end": "1917600"
  },
  {
    "text": "about hooking allocator functions so hooking my locks freeze and try to watch watch what I was doing but oh this is",
    "start": "1917600",
    "end": "1926539"
  },
  {
    "text": "still very far from perfect",
    "start": "1926539",
    "end": "1930580"
  },
  {
    "start": "1931000",
    "end": "1989000"
  },
  {
    "text": "so let's talk about the future well there are there are a lot of features we're still implementing and we want to",
    "start": "1932299",
    "end": "1940100"
  },
  {
    "text": "have it done in the future we want a proper working frame buffer or for the",
    "start": "1940100",
    "end": "1945620"
  },
  {
    "text": "Jui and also we want the touchscreen to work so you can interact with it like a",
    "start": "1945620",
    "end": "1950720"
  },
  {
    "text": "real device or we also want to emulate step because",
    "start": "1950720",
    "end": "1956320"
  },
  {
    "text": "step is an essential part to ours and it's hard and as the name suggests which",
    "start": "1956320",
    "end": "1962419"
  },
  {
    "text": "is circle and processor it contains a lot of security related function so it",
    "start": "1962419",
    "end": "1967580"
  },
  {
    "text": "might be so it is an interesting Target to Emirates or apparently we also need",
    "start": "1967580",
    "end": "1973159"
  },
  {
    "text": "to emit the GPU because our iOS GUI use a lot of GPU and a friendly it refused",
    "start": "1973159",
    "end": "1981080"
  },
  {
    "text": "to work without the GPU implemented and we also want to improve our fuzzles to get some bucks",
    "start": "1981080",
    "end": "1988700"
  },
  {
    "text": "so through that we need your help our code is currently open source or on",
    "start": "1988700",
    "end": "1995480"
  },
  {
    "start": "1989000",
    "end": "2019000"
  },
  {
    "text": "the link on the screen or you can add add our reverse engineering process to a lot of ways or",
    "start": "1995480",
    "end": "2002440"
  },
  {
    "text": "you can either contribute directly to a repo or support the Linux on all marks",
    "start": "2002440",
    "end": "2008019"
  },
  {
    "text": "efforts because uh these are marks shares a lot of peripherals with iOS so",
    "start": "2008019",
    "end": "2013899"
  },
  {
    "text": "is transferable knowledge",
    "start": "2013899",
    "end": "2017820"
  },
  {
    "text": "or during this there was there were a lot of projects that were very helpful to us especially as asylums or team or",
    "start": "2019179",
    "end": "2027820"
  },
  {
    "text": "also we or and also others useful projects are mentioned on the screen",
    "start": "2027820",
    "end": "2035340"
  },
  {
    "start": "2039000",
    "end": "2089000"
  },
  {
    "text": "two ways so you can see our emotion is totally possible even so it's not not a",
    "start": "2039580",
    "end": "2046120"
  },
  {
    "text": "trivial task or you also we can also explore a lot about iOS device our",
    "start": "2046120",
    "end": "2053320"
  },
  {
    "text": "Hardware so Hawaii Hardware or through emulation",
    "start": "2053320",
    "end": "2058898"
  },
  {
    "text": "or we can also we also see that how to remove enables multiple secret",
    "start": "2058899",
    "end": "2064839"
  },
  {
    "text": "applications such as fasting or and we hope that our effort will lower the",
    "start": "2064839",
    "end": "2070720"
  },
  {
    "text": "entry barrier to iOS research so or when a lot of when more people look at iOS it",
    "start": "2070720",
    "end": "2077500"
  },
  {
    "text": "will become more secure for all of us thank you [Music]",
    "start": "2077500",
    "end": "2084820"
  },
  {
    "text": "[Music]",
    "start": "2088659",
    "end": "2091769"
  }
]