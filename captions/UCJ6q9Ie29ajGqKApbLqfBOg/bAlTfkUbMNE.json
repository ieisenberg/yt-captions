[
  {
    "text": "[Music]",
    "start": "2410",
    "end": "20550"
  },
  {
    "text": "w",
    "start": "28960",
    "end": "31960"
  },
  {
    "text": "which is a hardening script that right now uh can uh help secure a system help",
    "start": "39040",
    "end": "44559"
  },
  {
    "text": "secure a red hat or mandri system I I say help of course because uh securing a",
    "start": "44559",
    "end": "50719"
  },
  {
    "text": "system is never quite done um I'm also uh working with mandre soft on all",
    "start": "50719",
    "end": "56640"
  },
  {
    "text": "manners of things so uh throw me an email and buyer distribution and all kinds of things okay so we're going to",
    "start": "56640",
    "end": "63480"
  },
  {
    "text": "talk today about running secure DNS servers and um and basically go over",
    "start": "63480",
    "end": "70400"
  },
  {
    "text": "right now what this what we're going to cover here um first I've got a few slides just on installing and",
    "start": "70400",
    "end": "75600"
  },
  {
    "text": "configuring the Unix bind server um just because this will really help when you go to try to Cho um we're going to try",
    "start": "75600",
    "end": "82520"
  },
  {
    "text": "to simulate attacks and uh we we Define attacks rather broadly as um both",
    "start": "82520",
    "end": "89439"
  },
  {
    "text": "attacks against the server and uh information probes that are unwanted um",
    "start": "89439",
    "end": "94479"
  },
  {
    "text": "we're going to talk about what you can do about those attacks so we're just very much attack and defense style um",
    "start": "94479",
    "end": "100799"
  },
  {
    "text": "we'll get into CH roooting demons trting the trting name d running as a non as",
    "start": "100799",
    "end": "105960"
  },
  {
    "text": "non-root user um we'll look at uh we'll look at split Horizon briefly um and I",
    "start": "105960",
    "end": "112159"
  },
  {
    "text": "say briefly because we've only got an hour and you could split Horizon in an8 um and uh we'll talk a little bit about",
    "start": "112159",
    "end": "118159"
  },
  {
    "text": "djbdns okay and we'll try to we'll try to do questions at that point if we've got",
    "start": "118159",
    "end": "123479"
  },
  {
    "text": "time left over so let's get moving um this talk by the way is intended to be",
    "start": "123479",
    "end": "130200"
  },
  {
    "text": "interactive if you get bored uh let me know if you get completely snowed um",
    "start": "130200",
    "end": "136680"
  },
  {
    "text": "also let me know because we can Slow Down Speed up and do all kinds of things to uh to try to bring everybody into up",
    "start": "136680",
    "end": "142959"
  },
  {
    "text": "to speed okay so a couple introductory a",
    "start": "142959",
    "end": "148519"
  },
  {
    "text": "couple introductory remarks what's DNS do I promise we won't stay this basic",
    "start": "148519",
    "end": "153760"
  },
  {
    "text": "but let's let's talk let's let's just let's just talk let's just talk a little bit about what DNS is and how it works",
    "start": "153760",
    "end": "159920"
  },
  {
    "text": "in general okay so DNS is just there to provide a mapping between machine names",
    "start": "159920",
    "end": "165440"
  },
  {
    "text": "and IP addresses okay when I type dubdub dub. uh uh slashdot.org into my browser",
    "start": "165440",
    "end": "173159"
  },
  {
    "text": "um machines don't understand that they get IP addresses so there's this extra service on the internet called DNS that",
    "start": "173159",
    "end": "180239"
  },
  {
    "text": "make some translation of of slashdot.org to slots IP address so I can route",
    "start": "180239",
    "end": "185879"
  },
  {
    "text": "packets there okay um originally back in the day U before I was on the internet",
    "start": "185879",
    "end": "191799"
  },
  {
    "text": "of course they just had a big uh a big Etsy hosts file it just had a big listing of name of host names and IP",
    "start": "191799",
    "end": "198560"
  },
  {
    "text": "addresses this had some serious problems because after a while you know like you could definitely get out of date it",
    "start": "198560",
    "end": "204640"
  },
  {
    "text": "would take you you know it could take you a week to get on the internet because you've you know or or could take",
    "start": "204640",
    "end": "210000"
  },
  {
    "text": "you a week to get into that file so you've got your web server ready to go but now you've got to wait a week for that file to get updated for when to get",
    "start": "210000",
    "end": "215920"
  },
  {
    "text": "a fresh copy um and it is definitely not fault tolerant um which is kind of crazy",
    "start": "215920",
    "end": "222080"
  },
  {
    "text": "because the internet's supposed to be massively fault tolerant um so this was",
    "start": "222080",
    "end": "227120"
  },
  {
    "text": "replaced by something that was a whole lot more distributed um called domain name service okay and basically the way",
    "start": "227120",
    "end": "235040"
  },
  {
    "text": "it works is instead of querying some Central server and asking for an Etsy hosts file file um what we what we end",
    "start": "235040",
    "end": "242640"
  },
  {
    "text": "up doing is asking is is trying to find out who's got the information that we want okay you want to know about um say",
    "start": "242640",
    "end": "249319"
  },
  {
    "text": "you want to know about one of the machines in the math department at College Park University of Maryland College Park um well you can ask those",
    "start": "249319",
    "end": "255840"
  },
  {
    "text": "Central servers hey who's responsible for College Park okay for University of Maryland and they'll tell you go talk to",
    "start": "255840",
    "end": "262880"
  },
  {
    "text": "a name server at uh at a University of Maryland and that machine will say oh yeah I know about University of Maryland",
    "start": "262880",
    "end": "269000"
  },
  {
    "text": "but we've deleg all the stuff about the math department specifically to this other machine so go talk to it so you",
    "start": "269000",
    "end": "275759"
  },
  {
    "text": "can talk to that other machine and then you can ask hey can you give me the the address for something in the math department and this sounds mildly",
    "start": "275759",
    "end": "282560"
  },
  {
    "text": "convoluted but the idea is that I can distribute the administration of the system and also um and also the points",
    "start": "282560",
    "end": "288639"
  },
  {
    "text": "of failure um across the entire internet so you give a you know as I think we all have gotten used to um you don't really",
    "start": "288639",
    "end": "295080"
  },
  {
    "text": "have to worry about you know DNS being totally totally fried for any long length of time or any one DNS server",
    "start": "295080",
    "end": "301160"
  },
  {
    "text": "somewhere taking down a large part of the internet um we can talk about how you would take down DNS it's pretty",
    "start": "301160",
    "end": "309240"
  },
  {
    "text": "doable okay so um basically again a couple more",
    "start": "309240",
    "end": "315560"
  },
  {
    "text": "introductory slides I promise then we'll get on to some of the good stuff um basically you have when you when you",
    "start": "315560",
    "end": "322280"
  },
  {
    "text": "have a name server a machine that goes and makes these translations from names to IPS most of them you say most but",
    "start": "322280",
    "end": "328759"
  },
  {
    "text": "most of them have some information they're actually responsible for okay it might be University of Maryland it might",
    "start": "328759",
    "end": "335840"
  },
  {
    "text": "be uh it might also it it might be University of Maryland it might be University of Maryland and their reverse",
    "start": "335840",
    "end": "341479"
  },
  {
    "text": "IP addresses um name servers tend to mostly all have some part of the DNS",
    "start": "341479",
    "end": "348120"
  },
  {
    "text": "space they're responsible for um whenever you have to make a query you have to talk to somebody first you talk",
    "start": "348120",
    "end": "354360"
  },
  {
    "text": "to root servers okay um and I'll I'll kind of try to explain explain how this works uh",
    "start": "354360",
    "end": "362000"
  },
  {
    "text": "in essence you are in this this is a diagram we'll come back to here and there but in essence when you make a uh",
    "start": "362000",
    "end": "368400"
  },
  {
    "text": "when you want to know about slashdot.org okay your machine your client machine is configured to go and has a resolver on",
    "start": "368400",
    "end": "375319"
  },
  {
    "text": "it resolver is generally a library or a program or a program linked against that library and that resolver is going to go",
    "start": "375319",
    "end": "381360"
  },
  {
    "text": "and talk to your isp's DNS server your isp's DNS server whatever DNS server",
    "start": "381360",
    "end": "386400"
  },
  {
    "text": "you've told it but often you get this from your ISP or you've set up one of your own depending on how enterprising you are um and how much of a how much of",
    "start": "386400",
    "end": "393360"
  },
  {
    "text": "a headache you want to have um so basically your resolver goes and makes a query about against your isp's web your",
    "start": "393360",
    "end": "400520"
  },
  {
    "text": "isp's DNS server okay that DNS server can consult three different sources of information first thing it'll do is is",
    "start": "400520",
    "end": "407520"
  },
  {
    "text": "see if it's already got an answer to whatever you're asking either if it's already responsible for some if it's",
    "start": "407520",
    "end": "413880"
  },
  {
    "text": "already responsible for the data you're asking about in other words if you're talking to the University of Maryland's web d DNS server are you asking about",
    "start": "413880",
    "end": "421560"
  },
  {
    "text": "something at the University of Maryland if you are ah I got that in a file I'll give you the I'll give you the info you",
    "start": "421560",
    "end": "427240"
  },
  {
    "text": "need if you're not before it goes and goes through a whole lot of work to get you know slashdot.org or whatever",
    "start": "427240",
    "end": "434599"
  },
  {
    "text": "whatever name you're looking for it checks and sees if it's done that in the past say day and if it has it's kept a",
    "start": "434599",
    "end": "440639"
  },
  {
    "text": "cash and then if none of that is if if none of that is uh appropriate okay I've",
    "start": "440639",
    "end": "446520"
  },
  {
    "text": "got a mouse pointer here what it's going to do is talk to the root servers it's",
    "start": "446520",
    "end": "451759"
  },
  {
    "text": "going to talk to it's going to find out okay if we're looking for say something at um math. umd.edu",
    "start": "451759",
    "end": "458800"
  },
  {
    "text": "okay it's going to go and talk to the root servers it's going to find out who's responsible for umd.edu the",
    "start": "458800",
    "end": "466039"
  },
  {
    "text": "machine responsible for umd.edu is actually it's called tranor but we're",
    "start": "466039",
    "end": "471520"
  },
  {
    "text": "going to call it NS ns. umd.edu okay and um from there it's going to say",
    "start": "471520",
    "end": "477960"
  },
  {
    "text": "okay do you have information on this machine in the math department and that thing is going to say no I don't maintain the database for the math",
    "start": "477960",
    "end": "483960"
  },
  {
    "text": "department you got to talk to ns. math. umd.edu and then you go and ask it do",
    "start": "483960",
    "end": "490800"
  },
  {
    "text": "you have the IP address for this one machine I want and it says yeah here it is okay I don't know if everybody",
    "start": "490800",
    "end": "496759"
  },
  {
    "text": "remembers University but this is actually exactly what happens at University when you're trying to uh get your financial aid um you know you get",
    "start": "496759",
    "end": "503919"
  },
  {
    "text": "you get passed across campus and it's it's never go over that desk over there it's always across campus",
    "start": "503919",
    "end": "509840"
  },
  {
    "text": "and in DNS this is you know in in the University it's kind of a good thing because well they think it's a good",
    "start": "509840",
    "end": "515919"
  },
  {
    "text": "thing because maybe fewer people get financial aid because some of them just Dro from exhaustion walking back and forth across campus okay in DNS this is",
    "start": "515919",
    "end": "523080"
  },
  {
    "text": "a good thing because if one name server if one name server fails we're not all we're not all screwed um second it's a",
    "start": "523080",
    "end": "530720"
  },
  {
    "text": "it's a good thing because it means that the math department doesn't have to wait on Central University Administration to",
    "start": "530720",
    "end": "535920"
  },
  {
    "text": "update their list of names and IP addresses they can do it themselves so that distribution is is a good",
    "start": "535920",
    "end": "543040"
  },
  {
    "text": "thing okay so that concludes our introductory material and what uh DNS",
    "start": "543040",
    "end": "548519"
  },
  {
    "text": "was did I uh lose anybody raise a hand you okay cool um what I've given you to",
    "start": "548519",
    "end": "555880"
  },
  {
    "text": "start is basically just instructions on how to compile bind date um this is",
    "start": "555880",
    "end": "561160"
  },
  {
    "text": "really fun stuff yeah um go to ifc.org download the uh download The Source",
    "start": "561160",
    "end": "567399"
  },
  {
    "text": "tarball um and use these commands to untar it and you'll have to change one",
    "start": "567399",
    "end": "572920"
  },
  {
    "text": "make file um and you're going to just going to have to change one thing and that's to that's to set two variables to",
    "start": "572920",
    "end": "579880"
  },
  {
    "text": "the existing file this is this is really simple the files the file you download is not changed in years it's not",
    "start": "579880",
    "end": "586279"
  },
  {
    "text": "changing anytime soon you just have to add these two things to the file because it makes sure that the the entirety of",
    "start": "586279",
    "end": "592800"
  },
  {
    "text": "uh of your build happens in user local or or gets placed in user local what you",
    "start": "592800",
    "end": "598399"
  },
  {
    "text": "get in the end is this big long make file that I've quoted here and this is mostly just for your use when you go",
    "start": "598399",
    "end": "604519"
  },
  {
    "text": "home because this makes it a whole lot easier instead of having to spend three hours getting this compiled and shoting it you can just kind of follow the",
    "start": "604519",
    "end": "610560"
  },
  {
    "text": "instructions we've got okay once you've got that make file it's just make depend",
    "start": "610560",
    "end": "616640"
  },
  {
    "text": "make make install very fairly similar to what you're used to it would be nice if they autocom it but they didn't for bind",
    "start": "616640",
    "end": "623640"
  },
  {
    "text": "date okay on Linux this can be a lot easier um right you know you just go to",
    "start": "623640",
    "end": "629120"
  },
  {
    "text": "find out the site where your uh where your distribution stores all their RPMs and download the right one okay when",
    "start": "629120",
    "end": "635399"
  },
  {
    "text": "these slides were written the right one or when this particular set of slides in the in the talk was written the right",
    "start": "635399",
    "end": "641600"
  },
  {
    "text": "one was 822 p7 um where are we now",
    "start": "641600",
    "end": "647000"
  },
  {
    "text": "guys anybody know what's that what where are we in the eight series I know",
    "start": "647000",
    "end": "652560"
  },
  {
    "text": "there's there's a nine series but where are we in the eight series 823 p",
    "start": "652560",
    "end": "659639"
  },
  {
    "text": "no 824 okay so we're not clear on this hit isc's site I'll tell you the most",
    "start": "659639",
    "end": "665279"
  },
  {
    "text": "recent one the thing is whatever whatever number you had this morning six hours later there's been another bind",
    "start": "665279",
    "end": "670639"
  },
  {
    "text": "patch because the darn thing's broken again so just just go get the most recent one um now for to to configure",
    "start": "670639",
    "end": "679760"
  },
  {
    "text": "bind um if you for the there are some people in the room who are still using bind 4 we've basically written this",
    "start": "679760",
    "end": "686240"
  },
  {
    "text": "towards bind eight but the techniques here um car over um to bind four they",
    "start": "686240",
    "end": "691440"
  },
  {
    "text": "also carry over transparently to bind to bind n um but if you're still using bind",
    "start": "691440",
    "end": "696639"
  },
  {
    "text": "four we've got this uh Nam d.on file we're using now and I've included a sample if you look at it they were kind",
    "start": "696639",
    "end": "703639"
  },
  {
    "text": "of going they were they were trying to make the uh configuration file look like C so it's a little more obvious what",
    "start": "703639",
    "end": "709320"
  },
  {
    "text": "applied to what zones and I've just given you an example and we're going to we're going to uh add",
    "start": "709320",
    "end": "714920"
  },
  {
    "text": "a whole lot to this example as we go okay it's not important to understand all the pieces of it right now I just",
    "start": "714920",
    "end": "720160"
  },
  {
    "text": "want to show you an example so I can add to it okay um before we get on to attacking",
    "start": "720160",
    "end": "727240"
  },
  {
    "text": "DNS servers I'm trying to I want to give you guys just a little bit in terms of buying date most people don't take",
    "start": "727240",
    "end": "732360"
  },
  {
    "text": "advantage of logging logging is one of the two very boring but essential areas of security um the other one is patching",
    "start": "732360",
    "end": "740000"
  },
  {
    "text": "you know patching and logging very very boring but when you uh when you find yourself getting rooted um you really",
    "start": "740000",
    "end": "745959"
  },
  {
    "text": "wish that you would either patched or you had good logs you could figure out what the heck had happened to your machines um if you can what I've done is",
    "start": "745959",
    "end": "753920"
  },
  {
    "text": "I've given you a cheat sheet I'm going to give you a cheat sheet tells you how to set up your logging so you don't have to read about it and uh you can just get",
    "start": "753920",
    "end": "760320"
  },
  {
    "text": "really great logs for security incidents okay the way this basically works is bind dat and bind n Define something",
    "start": "760320",
    "end": "767160"
  },
  {
    "text": "called a channel which is a method of a method of of spitting a log out to something meaningful okay and it's got a",
    "start": "767160",
    "end": "773880"
  },
  {
    "text": "category which is a specific type of data to pump along that channel okay standard is is kind of um you've got a",
    "start": "773880",
    "end": "780880"
  },
  {
    "text": "channel which is your normal CIS log and you've got um and you've got a category which is all the categories and you just",
    "start": "780880",
    "end": "786800"
  },
  {
    "text": "spit everything to CIS log and Wade through when something goes wrong um but you can make this a lot more refined um",
    "start": "786800",
    "end": "794079"
  },
  {
    "text": "to look at channels that F the what we're all used to is is is uh is the is",
    "start": "794079",
    "end": "799639"
  },
  {
    "text": "the channel what I'm calling infosis log you can call it whatever you want but basically everything goes to Sis",
    "start": "799639",
    "end": "806560"
  },
  {
    "text": "everything goes to CIS log and it goes as demon doino you can change that you can make it go out as um mail. warning",
    "start": "806560",
    "end": "815000"
  },
  {
    "text": "um demon. info seems Seems like a pretty good one to start with you can spit out logs to a file um you can spit out logs",
    "start": "815000",
    "end": "822240"
  },
  {
    "text": "to console to Standard air um and you can also just spit out your logs to uh the bit bucket and trust me there are a",
    "start": "822240",
    "end": "829560"
  },
  {
    "text": "bunch of buying there's a bunch of buying channels that you just want to go to the bit bucket because um it's a bunch of stuff that's unless you've read",
    "start": "829560",
    "end": "836480"
  },
  {
    "text": "some of the buying source code doesn't make a whole lot of sense so um what I've given you is basically a",
    "start": "836480",
    "end": "844199"
  },
  {
    "text": "list of some of the buying channels that are really useful okay cames all the cname errors if you see cname if you see",
    "start": "844199",
    "end": "851759"
  },
  {
    "text": "stuff coming out of the cname channel it just means um gee this is stuff where one of your Zone databases is probably",
    "start": "851759",
    "end": "857720"
  },
  {
    "text": "corrupt um sometimes it can be a security problem so again read your logs um lame servers is a pain in the",
    "start": "857720",
    "end": "865560"
  },
  {
    "text": "butt um and there are three there I've got three pages of logging channels the best way to learn about each of these is",
    "start": "865560",
    "end": "871600"
  },
  {
    "text": "to look at the DNS and bind book or um some of the documentation go go over",
    "start": "871600",
    "end": "877639"
  },
  {
    "text": "what goes in each Channel okay so here's your cheat sheet okay you can you can ignore the past",
    "start": "877639",
    "end": "884160"
  },
  {
    "text": "eight slides until you've got a problem if you just stick to this um this is not to get you to stop reading your",
    "start": "884160",
    "end": "889759"
  },
  {
    "text": "documentation but it's it's more I figure you're all busy um and uh if you start out with a cheat sheet that means",
    "start": "889759",
    "end": "896000"
  },
  {
    "text": "you can Implement some you can implement this as soon as you go home and get around to everything else you want to do when you've got time but this should",
    "start": "896000",
    "end": "902320"
  },
  {
    "text": "make things this should give you some additional logging in in um to go with the default logging this just creates",
    "start": "902320",
    "end": "908880"
  },
  {
    "text": "One log file called security and puts in the uh the six different channels and",
    "start": "908880",
    "end": "914120"
  },
  {
    "text": "the six different categories that are the most important to be monitoring for security if you get one of these things",
    "start": "914120",
    "end": "919199"
  },
  {
    "text": "it's often something that's going wrong insist as an example is internal is internal consistency it's a it's a",
    "start": "919199",
    "end": "926720"
  },
  {
    "text": "they've they've cut it badly but it's internal consistency so if if B says that it just had an internal consistency",
    "start": "926720",
    "end": "932079"
  },
  {
    "text": "problem that often happens when you've got a buffer overflow or one of the many other types of vulnerabilities that that",
    "start": "932079",
    "end": "937920"
  },
  {
    "text": "you guys are going to spend this entire conference studying and possibly using um OS anything to do with the OS",
    "start": "937920",
    "end": "945399"
  },
  {
    "text": "Panic anything really bad security okay that seemed like an important One X for",
    "start": "945399",
    "end": "950680"
  },
  {
    "text": "out um a lot of us like to watch who's doing Zone transfers from us so if you",
    "start": "950680",
    "end": "956360"
  },
  {
    "text": "if you want to you can send everything to xfer out you you can watch xfer out and filter for any any um any servers",
    "start": "956360",
    "end": "962839"
  },
  {
    "text": "that aren't your secondaries if you see Zone transfers um that aren't your secondaries that's probably bad um",
    "start": "962839",
    "end": "970120"
  },
  {
    "text": "update is something else to watch that's for dynamic update um okay so let's get",
    "start": "970120",
    "end": "975440"
  },
  {
    "text": "away from the boring stuff and the introductory stuff okay what I want to do right now is actually say is actually",
    "start": "975440",
    "end": "981800"
  },
  {
    "text": "turn a turn our turn ourselves over to uh to the and take the role of the attacker okay if I want us to learn as",
    "start": "981800",
    "end": "988240"
  },
  {
    "text": "much as I could or if I wanted to take down your DNS server what would I do um",
    "start": "988240",
    "end": "993680"
  },
  {
    "text": "against you because really the best way I think that you can possibly make sure that you're you know that you're secure",
    "start": "993680",
    "end": "999959"
  },
  {
    "text": "enough I won't say secure but secure enough is to actually try to take some time think like an attacker and say what",
    "start": "999959",
    "end": "1006120"
  },
  {
    "text": "could I get because you're not going to be you're not ever going to have perfect security your organization you can't",
    "start": "1006120",
    "end": "1011680"
  },
  {
    "text": "even get as close as you'd like to get probably because your manager is going to say listen I only want you to spend the next year and a half securing our",
    "start": "1011680",
    "end": "1017959"
  },
  {
    "text": "systems I can't have you spend the next four years um at least that was that was probably what I got um so I think what",
    "start": "1017959",
    "end": "1026720"
  },
  {
    "text": "what you really want to do is take some time and take and attack your systems um",
    "start": "1026720",
    "end": "1031918"
  },
  {
    "text": "and say these are this is what an attacker gets if they go after us because that lets you sit down and actually prioritize and say this is what",
    "start": "1031919",
    "end": "1038079"
  },
  {
    "text": "I want to fix and this is what I call acceptable risk and we talked to some of the military guys um a lot of them will",
    "start": "1038079",
    "end": "1044319"
  },
  {
    "text": "get on you know what we've defined as acceptable risk and what we haven't and and the idea is to not um is to not make",
    "start": "1044319",
    "end": "1052080"
  },
  {
    "text": "um is to not make suppositions you don't want to you don't want to or assumptions you don't want to make assumptions you don't assume yeah there's a bunch of",
    "start": "1052080",
    "end": "1058840"
  },
  {
    "text": "stuff that we're probably vulnerable on you want to know what it is so um I'm going to give you the beginning of the",
    "start": "1058840",
    "end": "1064960"
  },
  {
    "text": "attacks and and it'll be up to you to follow the industry and see uh where these things go okay so um DNS servers have",
    "start": "1064960",
    "end": "1074200"
  },
  {
    "text": "traditionally made really great cracking targets for two very very basic reasons bind keeps having security holes it's",
    "start": "1074200",
    "end": "1081240"
  },
  {
    "text": "the new send mail right okay it stinks it's bad anybody here write bind okay it",
    "start": "1081240",
    "end": "1087880"
  },
  {
    "text": "stinks it's bad um we don't really have a great substitute um maybe dbns will be",
    "start": "1087880",
    "end": "1094039"
  },
  {
    "text": "that but right now it's not widely deployed so what we've all got is this thing that just is pretty god- awful",
    "start": "1094039",
    "end": "1100960"
  },
  {
    "text": "because we keep finding new stuff and it doesn't really matter what version you're running um you've got a better",
    "start": "1100960",
    "end": "1106360"
  },
  {
    "text": "shot if you're running open bsds bind four or whatever um but otherwise there are going to be vulnerabilities so we're",
    "start": "1106360",
    "end": "1112360"
  },
  {
    "text": "going to do is is talk about how you can kind of Dodge some of those um okay so why else is buying a common Target um it",
    "start": "1112360",
    "end": "1119640"
  },
  {
    "text": "it runs as rude stuff that runs as rude is really nice to go after because you don't have to worry about escalating",
    "start": "1119640",
    "end": "1125280"
  },
  {
    "text": "privilege you just crack that and now you've got root done end of story runs his roote it's network accessible lots",
    "start": "1125280",
    "end": "1131480"
  },
  {
    "text": "of people have to run it um that's a nice way in that's a nice Vector Okay so so um what are we going",
    "start": "1131480",
    "end": "1140400"
  },
  {
    "text": "to do first let's let's just let's just try to find out how much we can find out about the average Target and I've used",
    "start": "1140400",
    "end": "1146799"
  },
  {
    "text": "two I've used two examples one's the domain um dumb target. J um because well",
    "start": "1146799",
    "end": "1153520"
  },
  {
    "text": "I figured nobody could sue me for using that one um and the other will be bastial linux.org because again nobody",
    "start": "1153520",
    "end": "1158960"
  },
  {
    "text": "can sue me for that one um okay if we run if we start up NS lookup you can do",
    "start": "1158960",
    "end": "1164919"
  },
  {
    "text": "this with dig I know if we start up NS lookup you can do this with pearl I know",
    "start": "1164919",
    "end": "1170320"
  },
  {
    "text": "NS lookup um set query just tell it you want to see the name service for his own",
    "start": "1170320",
    "end": "1175720"
  },
  {
    "text": "and we we ask what are the name servers for Dum target. J and it comes back with",
    "start": "1175720",
    "end": "1180760"
  },
  {
    "text": "we've got two we've got uh Dum target. J and ns2 dodar doj and we can find out",
    "start": "1180760",
    "end": "1187440"
  },
  {
    "text": "and so now we know which machines the DNS servers so we jot these down in our little form and say okay we know the DNS",
    "start": "1187440",
    "end": "1193440"
  },
  {
    "text": "servers let's let's find out what we can get out of them use this command this is dig NIS",
    "start": "1193440",
    "end": "1200120"
  },
  {
    "text": "lookup can also do this Pearl can also do this but we're all we're doing is we're just going to get his own transfer",
    "start": "1200120",
    "end": "1206320"
  },
  {
    "text": "so we tell we talk to we talk to the name server um for Dum target. J and we",
    "start": "1206320",
    "end": "1211559"
  },
  {
    "text": "tell it to give us a Zone transfer axfr stands for Zone transfer it's the command that's actually passed um to get",
    "start": "1211559",
    "end": "1217679"
  },
  {
    "text": "a Zone transfer to DNS servers and we're going to get a bunch of really useful information here and I want you to not",
    "start": "1217679",
    "end": "1223880"
  },
  {
    "text": "dismiss this look at everything look at the last five lines the last six lines here on the next on the next slide to",
    "start": "1223880",
    "end": "1230840"
  },
  {
    "text": "kind of look at what kind of information we're getting okay um we're getting some we're getting",
    "start": "1230840",
    "end": "1237640"
  },
  {
    "text": "we're getting IP addresses for machines getting some interesting data like pennium 133 and red hat",
    "start": "1237640",
    "end": "1244280"
  },
  {
    "text": "62 okay we're finding out what machine handles the mail thus is a send mail",
    "start": "1244280",
    "end": "1249440"
  },
  {
    "text": "process running possibly thus if there's a sendmail exploit that we've got in our hands right now we might be able to use",
    "start": "1249440",
    "end": "1254799"
  },
  {
    "text": "to get roote on another machine okay um we can look at some of the other machines we should pay attention to the",
    "start": "1254799",
    "end": "1260760"
  },
  {
    "text": "name okay we've got a machine called really dumb Target J okay and it says uh",
    "start": "1260760",
    "end": "1268280"
  },
  {
    "text": "it claims that it's the admin's trusted workstation it's an Athlon 850 it's running Red Hat 61 um so this could be",
    "start": "1268280",
    "end": "1276600"
  },
  {
    "text": "interesting um we've got rather dumb Target and so on we can look at all the puns",
    "start": "1276600",
    "end": "1282919"
  },
  {
    "text": "um okay so first what's your initial reaction I mean to those of you already",
    "start": "1282919",
    "end": "1288279"
  },
  {
    "text": "know about this to those of you already know about this this is not a big deal yeah in the",
    "start": "1288279",
    "end": "1294360"
  },
  {
    "text": "back can I spoof the names of the machines that are in my DNS",
    "start": "1297520",
    "end": "1303158"
  },
  {
    "text": "records yeah we'll talk about it the question was can we hide some of this information that we just got out of that",
    "start": "1305320",
    "end": "1310679"
  },
  {
    "text": "zone transfer I'm going to talk I'm going to teach you how to hide it and teach you how to at least resist some of",
    "start": "1310679",
    "end": "1315840"
  },
  {
    "text": "these simple attacks and uh and really resist some of the some of the more determined attackers to at least slow",
    "start": "1315840",
    "end": "1321559"
  },
  {
    "text": "them down okay so wait we got two commands and we've got a full dump of their Zone okay this normally would have",
    "start": "1321559",
    "end": "1328080"
  },
  {
    "text": "a lot more machines but dumb target. J was had to fit in two slides",
    "start": "1328080",
    "end": "1333720"
  },
  {
    "text": "um Okay so we've got we also had a txt record that we looked at okay so look at",
    "start": "1333720",
    "end": "1339640"
  },
  {
    "text": "that Edmonds trusted workstation okay gee um I wonder if that",
    "start": "1339640",
    "end": "1345559"
  },
  {
    "text": "might be the system in's workstation um um I wonder if other machines will trust",
    "start": "1345559",
    "end": "1350600"
  },
  {
    "text": "it I wonder if it'll be like the past three environments that I've been in where the admins trusted workstation",
    "start": "1350600",
    "end": "1356200"
  },
  {
    "text": "could run rsh commands to a bunch of machines uh to run backups yes this does",
    "start": "1356200",
    "end": "1361600"
  },
  {
    "text": "sound stupid yes it's also commonly done one of the things you people will will definitely see both within and outside",
    "start": "1361600",
    "end": "1367919"
  },
  {
    "text": "your organization is that when you go to audit it a lot of the stuff that you thought was obvious um like don't use",
    "start": "1367919",
    "end": "1374440"
  },
  {
    "text": "rsh is actually not so obvious part of that that's because sist men don't always know about security part of it",
    "start": "1374440",
    "end": "1381240"
  },
  {
    "text": "because they don't always have time to implement security that don't always have time to is important a lot of",
    "start": "1381240",
    "end": "1386320"
  },
  {
    "text": "systemm have a huge T list of things to do security is kind of at the bottom",
    "start": "1386320",
    "end": "1391360"
  },
  {
    "text": "because if they don't get around to working on security no one's really going to notice whereas if they don't get around to fixing the mail server",
    "start": "1391360",
    "end": "1397039"
  },
  {
    "text": "they'll have 53 users all yelling at them about how the mail server is not up um so we're going to see the stuff that",
    "start": "1397039",
    "end": "1403640"
  },
  {
    "text": "we're seeing here is going to be somewhat obvious but it's also um it's also so common",
    "start": "1403640",
    "end": "1410200"
  },
  {
    "text": "um okay what else was in there okay we saw Hino records remember we saw we saw",
    "start": "1410200",
    "end": "1416279"
  },
  {
    "text": "records that said the San's trusted box was running Red Hat 61 okay on on this",
    "start": "1416279",
    "end": "1421880"
  },
  {
    "text": "laptop here um you know personal stash I keep a bunch of red hat 61 exploits I",
    "start": "1421880",
    "end": "1427080"
  },
  {
    "text": "mean I have a bunch of red hat 60 exploits 61 62 it's all sorted by distribution and architecture okay a lot",
    "start": "1427080",
    "end": "1434200"
  },
  {
    "text": "of people who are compromising systems also have the the same kind of toolkit possibly on a cdrom okay um if I know",
    "start": "1434200",
    "end": "1441120"
  },
  {
    "text": "the trust the sadman's machine is a redhe hat 61 box um well it might be",
    "start": "1441120",
    "end": "1446360"
  },
  {
    "text": "patched it might not and I can just basically look through my directory and say okay which exploits do I have I know",
    "start": "1446360",
    "end": "1451480"
  },
  {
    "text": "I need to scan his machine and say oh so he's running sendmail and I'll check sendmail I have an exploit against",
    "start": "1451480",
    "end": "1456880"
  },
  {
    "text": "sendmail for Red Hat 61 okay he's going down um so this is we don't want to be",
    "start": "1456880",
    "end": "1463120"
  },
  {
    "text": "giving all this information away and we are yeah",
    "start": "1463120",
    "end": "1469799"
  },
  {
    "text": "okay first the question was in my experience how common is it for people to use Hino and I'll add txt records in",
    "start": "1474159",
    "end": "1480399"
  },
  {
    "text": "their Zone data um one pretty uncommon um large organizations tend to go for",
    "start": "1480399",
    "end": "1487080"
  },
  {
    "text": "this there's a reason for this um I was at a shop that only had say 200 machines",
    "start": "1487080",
    "end": "1492240"
  },
  {
    "text": "and one of their biggest problems actually was keeping inventory what do we have what OS versions are we running",
    "start": "1492240",
    "end": "1497559"
  },
  {
    "text": "um Who's got what machines and so they started using txt info records to",
    "start": "1497559",
    "end": "1502679"
  },
  {
    "text": "basically just keep track of inventory through DNS not many shops do this now you definitely would like to know about",
    "start": "1502679",
    "end": "1508559"
  },
  {
    "text": "it if your organization is doing it something to check out but um let's say it's a minority now but it's probably",
    "start": "1508559",
    "end": "1514880"
  },
  {
    "text": "dangerous minority Yeah",
    "start": "1514880",
    "end": "1519440"
  },
  {
    "text": "question",
    "start": "1526679",
    "end": "1529679"
  },
  {
    "text": "okay anybody um the the uh the follow-up comment was gentleman here works for University Big 10 he says seven Class B",
    "start": "1542600",
    "end": "1550679"
  },
  {
    "text": "networks um that's a lot of machines and they're using um txt andh info um",
    "start": "1550679",
    "end": "1557200"
  },
  {
    "text": "records to uh to keep track of all their machines so if if you got all that um",
    "start": "1557200",
    "end": "1562640"
  },
  {
    "text": "that'd be really useful um I know that when I get home as a closet black hat",
    "start": "1562640",
    "end": "1568320"
  },
  {
    "text": "I'm going after this what was that yeah I'm I'm I'm going to go and",
    "start": "1568320",
    "end": "1573480"
  },
  {
    "text": "check I mean there's 10 okay so I'm going to go home and check those 10 thanks a lot this gentleman here was socially",
    "start": "1573480",
    "end": "1580360"
  },
  {
    "text": "engineered okay okay so first I don't really think",
    "start": "1582440",
    "end": "1587840"
  },
  {
    "text": "I should be letting everyone do a Zone transfer okay Zone transfers are primarily because organizations tend to",
    "start": "1587840",
    "end": "1593640"
  },
  {
    "text": "have more than one DNS server what you do is you make one of you make one of your DNS servers a primary and then you",
    "start": "1593640",
    "end": "1599760"
  },
  {
    "text": "set up two you know you set up one or two or three or 10 um other DNS servers",
    "start": "1599760",
    "end": "1606360"
  },
  {
    "text": "that can basically get copies of the complete Zone data every so often and then distribute it so now instead of",
    "start": "1606360",
    "end": "1612039"
  },
  {
    "text": "everybody shooting their DNS requests at one machine and pounding that machine into Oblivion um we can have it you know",
    "start": "1612039",
    "end": "1618559"
  },
  {
    "text": "we can pound on two or more machines okay so Zone transfers are mostly just keep all of those um duplicate machines",
    "start": "1618559",
    "end": "1624960"
  },
  {
    "text": "which we'll call secondary or slave servers updated with the primary one okay Zone transfers were not meant for",
    "start": "1624960",
    "end": "1631320"
  },
  {
    "text": "for Jay to have his fun with red hat.com or whatever I work for mandri um so we",
    "start": "1631320",
    "end": "1638919"
  },
  {
    "text": "can use the uh we can use the um allow transfer directive to try to block some of this off okay um and I what I want to",
    "start": "1638919",
    "end": "1647320"
  },
  {
    "text": "do is show you the named. file we working on before and we'll use the uh we'll look at the allow transfer",
    "start": "1647320",
    "end": "1653159"
  },
  {
    "text": "directive in adding that okay so what I do first is we're just looking italics",
    "start": "1653159",
    "end": "1658840"
  },
  {
    "text": "you see ACL secondaries okay ACL Access Control list I want to define a group of",
    "start": "1658840",
    "end": "1664159"
  },
  {
    "text": "machines but I don't feel like continually copying the IP addresses throughout the file so I'm just defining a macro called secondaries and what I do",
    "start": "1664159",
    "end": "1671440"
  },
  {
    "text": "if you look down here that main options block that we've got here this options block basically defines the default defs",
    "start": "1671440",
    "end": "1678000"
  },
  {
    "text": "for our site the defaults for This Server you generally want a default deny stance everywhere you can get it in",
    "start": "1678000",
    "end": "1684360"
  },
  {
    "text": "terms of in terms of security okay we want to say no one's allowed to do Zone transfers whatsoever okay no one's",
    "start": "1684360",
    "end": "1690679"
  },
  {
    "text": "allowed to do Zone transfers that's going to break something so the next section of our file for our zon besal",
    "start": "1690679",
    "end": "1697240"
  },
  {
    "text": "linux.org we say okay you can do Zone transfers but Zone transfers can only be",
    "start": "1697240",
    "end": "1702679"
  },
  {
    "text": "originated by our secondaries so the buy server is going to say okay I'm going to block Zone transfers from everywhere",
    "start": "1702679",
    "end": "1708080"
  },
  {
    "text": "everyone for everyone from everyone for every Zone",
    "start": "1708080",
    "end": "1713720"
  },
  {
    "text": "except on best linux.org I'm going to allow the secondaries to do Zone transfers okay and I'm going to do this",
    "start": "1713720",
    "end": "1720559"
  },
  {
    "text": "for also the the reverse section the reverse section of best linux.org is",
    "start": "1720559",
    "end": "1725919"
  },
  {
    "text": "that 192 1681 Fu and we're going to allow transfers again just to the",
    "start": "1725919",
    "end": "1732600"
  },
  {
    "text": "secondaries okay and then you'll see on the local on the local Zone this is just",
    "start": "1732600",
    "end": "1738039"
  },
  {
    "text": "for the existing machine so Ain't nobody got to be able to do uh Zone transfers from here because it's just uh it's not",
    "start": "1738039",
    "end": "1744320"
  },
  {
    "text": "necessary uh we shouldn't have secondaries for for the local host for Local Host",
    "start": "1744320",
    "end": "1749960"
  },
  {
    "text": "info okay the nice thing is that what we just did was we blocked that zone transfer",
    "start": "1749960",
    "end": "1756760"
  },
  {
    "text": "attack okay we blocked it when someone doesn't take the time to spoof their IP address and find some way to get the",
    "start": "1756760",
    "end": "1762600"
  },
  {
    "text": "replies so for the bulk of attacks we've just we've just blocked somebody from doing Zone transfers to get lots of data",
    "start": "1762600",
    "end": "1767960"
  },
  {
    "text": "from us which sorry which I'm really happy about um okay so there was",
    "start": "1767960",
    "end": "1775720"
  },
  {
    "text": "something else we had set in here okay we said looking at the first slide looking at the F the uh the first page",
    "start": "1775720",
    "end": "1783039"
  },
  {
    "text": "of this file we have these allow query lines okay and we say in general we're",
    "start": "1783039",
    "end": "1788240"
  },
  {
    "text": "only going to allow queries against this uh against this server from internal hosts internals an ACL we Define to be",
    "start": "1788240",
    "end": "1796640"
  },
  {
    "text": "um our intern internal our internal IP space okay and then for each Zone we",
    "start": "1796640",
    "end": "1802159"
  },
  {
    "text": "said okay if we're authoritative for basol linux.org that means we're giving out data on basal linux.org to the whole",
    "start": "1802159",
    "end": "1808000"
  },
  {
    "text": "world so we better allow queries against that so then we do this allow query any",
    "start": "1808000",
    "end": "1813640"
  },
  {
    "text": "which means anybody nobody only our internal Nets are allowed to quer us for",
    "start": "1813640",
    "end": "1819159"
  },
  {
    "text": "anything but if you're if you're quaring us specifically about basal linux.org you can be anybody in the world okay if",
    "start": "1819159",
    "end": "1826000"
  },
  {
    "text": "I just confused you raise your hand cool okay um and we're doing the we're doing",
    "start": "1826000",
    "end": "1833600"
  },
  {
    "text": "the same thing on the other zones specifically saying who's allowed to query again default deny you don't get",
    "start": "1833600",
    "end": "1840919"
  },
  {
    "text": "nothing unless I already thought of you and decided you should get some data okay only give people what access they",
    "start": "1840919",
    "end": "1847000"
  },
  {
    "text": "require okay so we're setting a default deny on queries and then we're saying",
    "start": "1847000",
    "end": "1852360"
  },
  {
    "text": "who's allowed to actually query our servers now what about those allow recursion lines okay so the thing with",
    "start": "1852360",
    "end": "1860600"
  },
  {
    "text": "allow recursion there's queries and then there's recursive queries and the",
    "start": "1860600",
    "end": "1865639"
  },
  {
    "text": "difference if you remember that diagram we showed up earlier was that normal queries okay a normal query",
    "start": "1865639",
    "end": "1871320"
  },
  {
    "text": "non-recursive normal query asks you for one piece of information hey can you",
    "start": "1871320",
    "end": "1876639"
  },
  {
    "text": "tell me who's responsible for this subdomain hey can you tell me um what",
    "start": "1876639",
    "end": "1881840"
  },
  {
    "text": "the address is for www.b linux.org okay a recursive query",
    "start": "1881840",
    "end": "1887720"
  },
  {
    "text": "says hi I'm a resolver and I'm trying to find Yahoo okay and and that one",
    "start": "1887720",
    "end": "1894200"
  },
  {
    "text": "requires that my name server go and talk to the root servers find out who's got yahoo.com then talk to the name server",
    "start": "1894200",
    "end": "1900559"
  },
  {
    "text": "for Yahoo and find out who's got www. and and ask that server excuse me and ask that server what's the IP address",
    "start": "1900559",
    "end": "1906760"
  },
  {
    "text": "for www.com that's that you know the two-part or three-part or four-part query that's lots of work that recursive",
    "start": "1906760",
    "end": "1913679"
  },
  {
    "text": "query we should only be doing for our own internal hosts um now have I",
    "start": "1913679",
    "end": "1920240"
  },
  {
    "text": "confused okay cool the the this is this is something that that people get confused on very easily introdu in terms",
    "start": "1920240",
    "end": "1927919"
  },
  {
    "text": "of um recursive queries versus straight queries will you I'm",
    "start": "1927919",
    "end": "1934159"
  },
  {
    "text": "sorry okay um I'm using the question was how do I Define an internal host and",
    "start": "1934840",
    "end": "1940279"
  },
  {
    "text": "what I'm doing is I'm defining my internal hosts as those IP addresses I believe I own um this is not massively",
    "start": "1940279",
    "end": "1947360"
  },
  {
    "text": "granular um it is also spoof um but we're doing what we",
    "start": "1947360",
    "end": "1952639"
  },
  {
    "text": "can you can back a lot of this up with work on your firewall as well but it's really smart to do it in at least you",
    "start": "1952639",
    "end": "1958679"
  },
  {
    "text": "know in two or three ways the important bit is that you're trying to do this you're trying to do everything we're",
    "start": "1958679",
    "end": "1963720"
  },
  {
    "text": "doing to secure a system in multiple ways because of a little principle we call defense in depth which basically",
    "start": "1963720",
    "end": "1969080"
  },
  {
    "text": "means protect something in as many ways as you can so that if one of the ways you're using fails because oh the vendor",
    "start": "1969080",
    "end": "1975200"
  },
  {
    "text": "announces a bug in it or oh somebody finds a you know some really smart guy at Defcon or even black hat um comes up",
    "start": "1975200",
    "end": "1981880"
  },
  {
    "text": "with some way to compromise your method of Defense you're still you know you're still not nailed um so you can do some",
    "start": "1981880",
    "end": "1989279"
  },
  {
    "text": "of this through the firewall but not all of it depending on your firewall okay so the other thing with",
    "start": "1989279",
    "end": "1996159"
  },
  {
    "text": "the recursion the other thing with the recursion lines is we can stop cash poisoning attacks okay and we can stop",
    "start": "1996159",
    "end": "2002679"
  },
  {
    "text": "we can even stop some of the some of the DNS buff overflows because some of the uh some of the attacks that we've got",
    "start": "2002679",
    "end": "2008320"
  },
  {
    "text": "actually depend on an attacker being able to get our name server to query his",
    "start": "2008320",
    "end": "2014159"
  },
  {
    "text": "name server for some information okay um now how do you do that well you you know",
    "start": "2014159",
    "end": "2020279"
  },
  {
    "text": "do what we did with NS lookup we point at us or or dig we point our resolver or",
    "start": "2020279",
    "end": "2025639"
  },
  {
    "text": "whatever program we're using our resolver for we point that at a given DNS server Jay's DNS server we pointed",
    "start": "2025639",
    "end": "2031480"
  },
  {
    "text": "at J's DNS server and we say by the way do you have some information about hacks.com",
    "start": "2031480",
    "end": "2037600"
  },
  {
    "text": "and I say hack stories.com I don't have anything about that I go and ask the root servers you know anything about hack stories.com and it says go talk to",
    "start": "2037600",
    "end": "2044039"
  },
  {
    "text": "this machine over here and I go and talk to hack stores. my my DNS server is now going to talk to hack.com and hack.com",
    "start": "2044039",
    "end": "2050560"
  },
  {
    "text": "delivers some nice little payload um and we'll I'll I'll bring up an attack where",
    "start": "2050560",
    "end": "2055760"
  },
  {
    "text": "this is really useful it delivers a nice little payload um to either give us some bad data that we can serve to other",
    "start": "2055760",
    "end": "2062200"
  },
  {
    "text": "people or to um root our machine or at least take over the DNS server and",
    "start": "2062200",
    "end": "2067919"
  },
  {
    "text": "possibly root the machine um or whatever so one of the things we want to do is drop recursion just to avoid having our",
    "start": "2067919",
    "end": "2075040"
  },
  {
    "text": "DNS server asking um bad DNS servers or untrusted DNS servers for info um not to",
    "start": "2075040",
    "end": "2081638"
  },
  {
    "text": "completely avoid it but to avoid an attack or making our DNS server do things like that",
    "start": "2081639",
    "end": "2088158"
  },
  {
    "text": "okay um yeah in the back there's a",
    "start": "2088159",
    "end": "2094158"
  },
  {
    "text": "question",
    "start": "2095879",
    "end": "2098879"
  },
  {
    "text": "the the question is to clarify recursive queries versus straight queries and what I want to do to the annoyance of the",
    "start": "2116400",
    "end": "2123800"
  },
  {
    "text": "people watching this on video possibly um is basically take us back to take us",
    "start": "2123800",
    "end": "2130640"
  },
  {
    "text": "back to this diagram um I've got a pointer so there are there are two different",
    "start": "2130640",
    "end": "2137560"
  },
  {
    "text": "ways there are two different kinds of information you can query me for on a bind server okay the resolver can ask me",
    "start": "2137560",
    "end": "2143680"
  },
  {
    "text": "something about basal linux.org and my DNS server will just go since it's",
    "start": "2143680",
    "end": "2149000"
  },
  {
    "text": "responsible for basal linux.org and check its database okay and if that and",
    "start": "2149000",
    "end": "2155280"
  },
  {
    "text": "if that resolver if it's external resolver if it's somebody who I don't have to give DNS services to who all",
    "start": "2155280",
    "end": "2161040"
  },
  {
    "text": "I've got to do is basically give the basol linux.org information to and that's it okay that's a straight query",
    "start": "2161040",
    "end": "2167640"
  },
  {
    "text": "that's the allow query lines on the other hand okay if there's a resolver",
    "start": "2167640",
    "end": "2172800"
  },
  {
    "text": "that's asking me for um uh for www.m math.",
    "start": "2172800",
    "end": "2179000"
  },
  {
    "text": "doedu okay that's a recursive query because they ask for www.mmm.edu",
    "start": "2179000",
    "end": "2184960"
  },
  {
    "text": "okay something I'm not respons responsible for I don't have that information so I've got to go talk to",
    "start": "2184960",
    "end": "2190440"
  },
  {
    "text": "root servers I've got to go talk to the University of Maryland okay I've got to go then and talk to the math",
    "start": "2190440",
    "end": "2197160"
  },
  {
    "text": "Department's name server and get the data that's through that that that's you know that that's not a single query",
    "start": "2197160",
    "end": "2203359"
  },
  {
    "text": "that's a recursive query it means that my name server is sitting there doing all that work okay traditionally if I'm",
    "start": "2203359",
    "end": "2209119"
  },
  {
    "text": "an ISP I've got to do that for everybody who comes looking okay if I'm an ISP",
    "start": "2209119",
    "end": "2214599"
  },
  {
    "text": "I've got to do that for for all of my for everybody body I support okay if I'm a university I've got to do that for",
    "start": "2214599",
    "end": "2220000"
  },
  {
    "text": "everybody on the University Network those recursive queries if you aren't somebody that I'm supposed to that I'm",
    "start": "2220000",
    "end": "2225880"
  },
  {
    "text": "supposed to provide this service to okay if you're the rest of the world then all I want to do is just do those straight",
    "start": "2225880",
    "end": "2232200"
  },
  {
    "text": "queries I just want to tell you about bastial linux.org I don't want to tell you about all the other domains because",
    "start": "2232200",
    "end": "2237440"
  },
  {
    "text": "you should have your own isp's DNS server your own University's DNS server to make queries about math about math.",
    "start": "2237440",
    "end": "2244960"
  },
  {
    "text": "umd.edu or about flash dot or whatever is that is that cleared up",
    "start": "2244960",
    "end": "2252599"
  },
  {
    "text": "okay so again just to annoy the people who are watching this on video we're going to jump back to the slide we were",
    "start": "2252920",
    "end": "2261359"
  },
  {
    "text": "at okay so the question is are we safe from from data mining yet we just cut",
    "start": "2265680",
    "end": "2271720"
  },
  {
    "text": "off those Zone transfers okay that's great so someone can't do that attack anymore they can't just ask for his Zone",
    "start": "2271720",
    "end": "2277200"
  },
  {
    "text": "transfer and get tons and tons of data well that's fine but if they know about",
    "start": "2277200",
    "end": "2282920"
  },
  {
    "text": "our hosts if they know about which hosts we own um or they know how to make queries they can even script this but",
    "start": "2282920",
    "end": "2288440"
  },
  {
    "text": "they can basically just make individual queries now what I'm doing is I'm firing dig at a particular name server in this",
    "start": "2288440",
    "end": "2295720"
  },
  {
    "text": "case I'm I'm using Local Host um just because I had to craft these slides myself um and I'm asking for an Hino",
    "start": "2295720",
    "end": "2304440"
  },
  {
    "text": "record for dumb. target. J okay so I'm asking for dum. target. J's",
    "start": "2304440",
    "end": "2311119"
  },
  {
    "text": "hinfo record and if we look at if we look at the at the answer we get dum.",
    "start": "2311119",
    "end": "2316200"
  },
  {
    "text": "target. J pennium 166 Red Hat 61 this is the same kind of information we're",
    "start": "2316200",
    "end": "2322079"
  },
  {
    "text": "getting from the Zone transfer now I've got to get it piece by piece I have to go after I have to Target each machine",
    "start": "2322079",
    "end": "2327319"
  },
  {
    "text": "and ask the DNS server you have an Hino record for this machine do you have a txt record for each machine okay so some",
    "start": "2327319",
    "end": "2335400"
  },
  {
    "text": "somebody's going to ask well where do you get that list of machines well I can sit there and I can say it seems from",
    "start": "2335400",
    "end": "2340599"
  },
  {
    "text": "looking at who is that Jay owns 192.168.1 everything so I can go and ask",
    "start": "2340599",
    "end": "2348119"
  },
  {
    "text": "it okay tell me about the machine 192.168.1.1 you have an Hino record on",
    "start": "2348119",
    "end": "2354160"
  },
  {
    "text": "that what about 1.2 do you have an Hino record on that and I can keep going and just get as much information as I want",
    "start": "2354160",
    "end": "2361359"
  },
  {
    "text": "and if I were a smart J I'd probably you know sit down with pearl and and take about 10 or 15 minutes and automate this",
    "start": "2361359",
    "end": "2367800"
  },
  {
    "text": "um and somebody probably has um or if they haven't you probably will",
    "start": "2367800",
    "end": "2373280"
  },
  {
    "text": "um but we're we're still giving away too much information so what can we do um",
    "start": "2373280",
    "end": "2379319"
  },
  {
    "text": "yeah we'll just we'll just stop giving away so much info okay stop stop using H info records where's the University guy",
    "start": "2379319",
    "end": "2385599"
  },
  {
    "text": "let's pick on him okay um you know let's let's stop using those hinos let's go",
    "start": "2385599",
    "end": "2391319"
  },
  {
    "text": "talk to our bosses and St and say you want to maintain the inventory in another way and um they can laugh in our",
    "start": "2391319",
    "end": "2396880"
  },
  {
    "text": "face or they can tell us oh I didn't realize it was that dangerous okay so when they say that um the first",
    "start": "2396880",
    "end": "2404000"
  },
  {
    "text": "possibility is that they'll listen to us and they say okay we'll remove all the H info and txts we didn't realize it was quite so dangerous okay um and you know",
    "start": "2404000",
    "end": "2412760"
  },
  {
    "text": "maybe they'll even listen to us when we say could you not call the principal machine principal or as as my friend",
    "start": "2412760",
    "end": "2419119"
  },
  {
    "text": "Mike Rash who's in this audience is brought up could we not make the firewalls name firewall you know",
    "start": "2419119",
    "end": "2428359"
  },
  {
    "text": "yeah so um these this is this is one of the things you can do okay if your site",
    "start": "2428640",
    "end": "2433920"
  },
  {
    "text": "is huge and and and needs to do this or if your manager is particularly pointy headed um you can go after other kinds",
    "start": "2433920",
    "end": "2440400"
  },
  {
    "text": "of solutions bind nine Implement something called views which are basically just B's way of trying to",
    "start": "2440400",
    "end": "2446960"
  },
  {
    "text": "implement this other thing called uh split Horizon DNS and what you do in essence is you're going to maintain two",
    "start": "2446960",
    "end": "2453880"
  },
  {
    "text": "different sets of DNS info the set you give up to the to the whole world that says this machine's my web server this",
    "start": "2453880",
    "end": "2460800"
  },
  {
    "text": "machine's my DNS server you don't need to know about anything else and then the set that we use in the rest of the",
    "start": "2460800",
    "end": "2466680"
  },
  {
    "text": "University which says this is the machine that's running running Red Hat 61 it's an Athlon 850 and so on and",
    "start": "2466680",
    "end": "2473319"
  },
  {
    "text": "hopefully if we can segment if we can if we can split our DNS into two pieces it's called split horizon or split brain",
    "start": "2473319",
    "end": "2480079"
  },
  {
    "text": "then we can actually stop Outsiders at least possibly from getting a lot of that info no it's not perfect fix but it",
    "start": "2480079",
    "end": "2487720"
  },
  {
    "text": "takes us one step closer to the goal okay okay the question is why should we",
    "start": "2487720",
    "end": "2493280"
  },
  {
    "text": "even put all that information in DNS to begin with I don't know you know I mean",
    "start": "2493280",
    "end": "2498520"
  },
  {
    "text": "you know why are we still running tnet I I don't know um I mean you know it's",
    "start": "2498520",
    "end": "2503640"
  },
  {
    "text": "it's actually I I do know the problem is that first there are lots of people who",
    "start": "2503640",
    "end": "2508720"
  },
  {
    "text": "say we still need this functionality until we can take the four days four months to replace it we're going to have",
    "start": "2508720",
    "end": "2513960"
  },
  {
    "text": "to keep using it second the alternative doesn't work for us third security is",
    "start": "2513960",
    "end": "2521040"
  },
  {
    "text": "not a real threat right so we'll just keep all that H info and txt records and we won't patch because no one's going to",
    "start": "2521040",
    "end": "2527520"
  },
  {
    "text": "come after us because we're just a little University um and that's kind of I mean that's kind of why people do that",
    "start": "2527520",
    "end": "2534680"
  },
  {
    "text": "stuff it's they don't have time to fix it they don't think they're going to get targeted",
    "start": "2534680",
    "end": "2540040"
  },
  {
    "text": "um oh sorry it's yeah the first qu the first issue is it's extra work to put it in but it's also extra work to not have",
    "start": "2540040",
    "end": "2546520"
  },
  {
    "text": "it in some kind of centralized database so everyone's made their own decisions and all I can tell you guys is",
    "start": "2546520",
    "end": "2552800"
  },
  {
    "text": "what I think the right decisions are and how you can try to convince your managers or um or your underlings or",
    "start": "2552800",
    "end": "2558800"
  },
  {
    "text": "whatever to do the right thing okay we'll do what we can so but but even",
    "start": "2558800",
    "end": "2564040"
  },
  {
    "text": "with the in in terms of keeping a complete map lots of people like to be able to say okay I don't have to tell",
    "start": "2564040",
    "end": "2569800"
  },
  {
    "text": "all the users where the printer is I just say send all your send send all your printouts to printer. bestial Linux",
    "start": "2569800",
    "end": "2576559"
  },
  {
    "text": ".org okay so calling it instead of printer you know whatever name means now",
    "start": "2576559",
    "end": "2581599"
  },
  {
    "text": "I have to do more work so it was originally it was seen as doing less work because printer is just called printer it's all good um it's a decision",
    "start": "2581599",
    "end": "2589559"
  },
  {
    "text": "each person makes okay nobody's got perfect security yet they've had to balance that with their other",
    "start": "2589559",
    "end": "2595000"
  },
  {
    "text": "goals okay so split Horizon DNS we use two separate DNS servers okay often",
    "start": "2595000",
    "end": "2601119"
  },
  {
    "text": "we're going to use a firewall or packet filter to separate them they can be on the same machine they don't have to be on separate machines we've just got to",
    "start": "2601119",
    "end": "2607880"
  },
  {
    "text": "have something that actually sends some of the traffic to one DNS server and some of the traffic to another you can",
    "start": "2607880",
    "end": "2613440"
  },
  {
    "text": "do this manually but it can be a pain um now possibly you run on the same you run",
    "start": "2613440",
    "end": "2618839"
  },
  {
    "text": "them both on the same machine and you tell the machine to to you tell the machine forward all the all all the",
    "start": "2618839",
    "end": "2624119"
  },
  {
    "text": "external requests in to this DNS server and forward the internal requests into this other DNS server running on two",
    "start": "2624119",
    "end": "2629960"
  },
  {
    "text": "separate ports okay you can do this um possibly that same machine they're both",
    "start": "2629960",
    "end": "2635160"
  },
  {
    "text": "sitting on might be the fire firewall um lots of really small sites do that okay the idea behind the internal DNS server",
    "start": "2635160",
    "end": "2642280"
  },
  {
    "text": "okay it only accepts requests from internal hosts internal internal only",
    "start": "2642280",
    "end": "2647640"
  },
  {
    "text": "you enforce this via the firewall and you enforce this via your Nam d.com file",
    "start": "2647640",
    "end": "2654160"
  },
  {
    "text": "okay you've do it both ways again defense in depth the next thing is it's got all the information you want to put",
    "start": "2654160",
    "end": "2660800"
  },
  {
    "text": "in it not all the information that you could put in it but all the information you've decided you need in ter",
    "start": "2660800",
    "end": "2666000"
  },
  {
    "text": "internally okay and that's that's a personal decision okay it's going to forward all",
    "start": "2666000",
    "end": "2671599"
  },
  {
    "text": "you're going to you're going to forward all requests for external data to the external DNS server okay and there are",
    "start": "2671599",
    "end": "2677000"
  },
  {
    "text": "directives to do this you can put in the configuration file or you can do this with the packet filter itself um and then you won't allow Zone",
    "start": "2677000",
    "end": "2684559"
  },
  {
    "text": "transfers off this internal machine unless you've got other internal secondaries and then you only allow Zone",
    "start": "2684559",
    "end": "2689800"
  },
  {
    "text": "transfers from the internal secondaries you're very careful about that and you again enforce this with the firewall",
    "start": "2689800",
    "end": "2696599"
  },
  {
    "text": "your external DNS server on the other hand okay um the external DNS server",
    "start": "2696599",
    "end": "2702000"
  },
  {
    "text": "should should be doing recursion for your internal hosts okay that means when your internal hosts asks for",
    "start": "2702000",
    "end": "2707359"
  },
  {
    "text": "slashdot.org okay the external DNS server the one that we've really got to worry about gets all the slashdot.org",
    "start": "2707359",
    "end": "2713640"
  },
  {
    "text": "recursion it has to do all that extra work of talking to the root servers and talking to Ser to name servers you don't",
    "start": "2713640",
    "end": "2719319"
  },
  {
    "text": "trust the idea is that you try to insulate your internal DNS server from",
    "start": "2719319",
    "end": "2724720"
  },
  {
    "text": "either talking to external DS servers or talking to external clients that way we give the attacker very few ways to",
    "start": "2724720",
    "end": "2731160"
  },
  {
    "text": "actually get at our DNS server at our internal one okay we've still got to have that external one right okay so the",
    "start": "2731160",
    "end": "2737359"
  },
  {
    "text": "external one's the one we're going to put all our risk on it's going to have a much sparer Zone database it'll know about the web server it'll know about",
    "start": "2737359",
    "end": "2743880"
  },
  {
    "text": "this about the mail servers but it's not going to know about a whole bunch else okay um also we can look at doing",
    "start": "2743880",
    "end": "2750839"
  },
  {
    "text": "something like we can do Network address translation where all of our clients seem to come from a single IP address",
    "start": "2750839",
    "end": "2756359"
  },
  {
    "text": "and the name for that IP address might be client. basol linux.org instead of",
    "start": "2756359",
    "end": "2761839"
  },
  {
    "text": "you know um admin you know or whatever you guys are using for your names okay and we'll allow Zone transfers from this",
    "start": "2761839",
    "end": "2768520"
  },
  {
    "text": "host from the external DNS server to the other you know to the other secondary servers because you know the names must",
    "start": "2768520",
    "end": "2775079"
  },
  {
    "text": "go on okay so let's look at we we've talked",
    "start": "2775079",
    "end": "2780599"
  },
  {
    "text": "about datami some so let's look at what we can do to crack the DNS server okay buying date to bind 821 was vulnerable",
    "start": "2780599",
    "end": "2788040"
  },
  {
    "text": "to remote route exploit this was not good cuz a whole lot of systems were vulnerable and it was really bad and a",
    "start": "2788040",
    "end": "2793839"
  },
  {
    "text": "lot of us found out about vulnerable name servers um when this happened okay",
    "start": "2793839",
    "end": "2799200"
  },
  {
    "text": "um the thing is you had lots of exploitable systems because Red Hat 6o among lots and other distributions was",
    "start": "2799200",
    "end": "2805359"
  },
  {
    "text": "shipping with this by default and lots of people don't patch their systems so lots of people got nailed there are a",
    "start": "2805359",
    "end": "2810680"
  },
  {
    "text": "couple worms that just basically sit there and and go after a name server get rude on a machine Mach and",
    "start": "2810680",
    "end": "2818160"
  },
  {
    "text": "propagate okay there's a tutorial I'm not going to walk through this attack because we're really out of time if you guys beg me um I'd be happy during a uh",
    "start": "2818359",
    "end": "2825960"
  },
  {
    "text": "during a b or or a break to actually illustrate the attack on on on a laptop with a VMware machine um but you can",
    "start": "2825960",
    "end": "2832880"
  },
  {
    "text": "just hit this website dub. hack. co.za and that has two files the",
    "start": "2832880",
    "end": "2840599"
  },
  {
    "text": "how-to which you know was partly responsible for making it so damn easy to use the exploit and then the exploit",
    "start": "2840599",
    "end": "2847000"
  },
  {
    "text": "itself which is t66 c i checks I checked this this morning before I got on my plane um both of those files are there",
    "start": "2847000",
    "end": "2853400"
  },
  {
    "text": "they're easy to find um go get them and uh uh root your favorite I mean um test",
    "start": "2853400",
    "end": "2858800"
  },
  {
    "text": "your machines um okay so now suppose you've you've got",
    "start": "2858800",
    "end": "2866160"
  },
  {
    "text": "your exploit you know how to use it you've tested it on a system you know it works against your red hat system um how",
    "start": "2866160",
    "end": "2871200"
  },
  {
    "text": "do you find machines well the thing is the way script kitties tend to work is not that they they generally Target you",
    "start": "2871200",
    "end": "2876599"
  },
  {
    "text": "they generally go looking for vulnerable vulnerable systems CU script Kitty's Mo tends to be something along the lines of",
    "start": "2876599",
    "end": "2883400"
  },
  {
    "text": "find a find a find an exploit site download five exploits hopefully one of",
    "start": "2883400",
    "end": "2889319"
  },
  {
    "text": "them works for you now that you find the one that works scan large portions of the internet for machines that are",
    "start": "2889319",
    "end": "2894520"
  },
  {
    "text": "actually vulnerable to this take those machines and use them for whatever you want porn sites we sites um dos dos uh",
    "start": "2894520",
    "end": "2904160"
  },
  {
    "text": "uh you know something to add to your dos Army um whatever it is you want to do with rooted boxes okay so um if you",
    "start": "2904160",
    "end": "2912079"
  },
  {
    "text": "wanted to find out if a machine was vulnerable the great thing about bind is you know you just ask ask bind what",
    "start": "2912079",
    "end": "2917440"
  },
  {
    "text": "version are you if it's 820 or 821 um nail it okay so this dig command is the",
    "start": "2917440",
    "end": "2924119"
  },
  {
    "text": "is the canonical one we all use supplement your URS for those two for those two urs's and it'll tell you what",
    "start": "2924119",
    "end": "2930640"
  },
  {
    "text": "version of bind you've got here's the output on my system in red okay 822 okay",
    "start": "2930640",
    "end": "2937119"
  },
  {
    "text": "that wasn't that wasn't good for that wasn't vulnerable to that exploit but it was vulnerable to others okay so everyone's going to go after me when",
    "start": "2937119",
    "end": "2943119"
  },
  {
    "text": "they get home I I've taken that machine down um okay so we can look at actually",
    "start": "2943119",
    "end": "2950359"
  },
  {
    "text": "changing that output we don't have to say 820 anymore a bunch of you will all of a sudden start stand up screaming on",
    "start": "2950359",
    "end": "2956960"
  },
  {
    "text": "your chairs on the tables you're going to make them collapse you're going to fall down you're going to sue me because I put up this slide but you're going to",
    "start": "2956960",
    "end": "2963319"
  },
  {
    "text": "scream security through obscurity is bad well yeah obscurity can be really really",
    "start": "2963319",
    "end": "2969760"
  },
  {
    "text": "useful it'd be nice to not tell the attackers what version of Bine we're running it's not that we're going to use that as our only defense but it sure as",
    "start": "2969760",
    "end": "2976720"
  },
  {
    "text": "hell like you know slow some people down and possibly stop some people from Ever coming after us okay it may not defend",
    "start": "2976720",
    "end": "2983119"
  },
  {
    "text": "against their attack but maybe maybe you know maybe 90% of the people who would have come after us don't come after us anymore because they think we're not",
    "start": "2983119",
    "end": "2989559"
  },
  {
    "text": "running the version of Bine that they're looking for you know it's a it's a it's a Jedi mind trick um okay so basically",
    "start": "2989559",
    "end": "2997720"
  },
  {
    "text": "it's very easy to do this in the options section we write version and whatever we wanted to kick out any string you want",
    "start": "2997720",
    "end": "3002960"
  },
  {
    "text": "doesn't have to be digits I'd go for digits okay I I used go away here you",
    "start": "3002960",
    "end": "3008839"
  },
  {
    "text": "can use anything you want um I'd try to blend in um if somebody's searching for 822 then if you've got go away you",
    "start": "3008839",
    "end": "3015880"
  },
  {
    "text": "probably don't match um but you know go for 90 go for go for 497 since that",
    "start": "3015880",
    "end": "3021240"
  },
  {
    "text": "seems to be relatively safe to the stuff that's hitting 822 um um I would just you know pick something",
    "start": "3021240",
    "end": "3028720"
  },
  {
    "text": "this is not this is not a complete protection but it does save you against a lot of the script kitties who are basically going and scanning large",
    "start": "3028720",
    "end": "3034760"
  },
  {
    "text": "portions of the internet looking for somebody that's vulnerable okay um there are other",
    "start": "3034760",
    "end": "3040440"
  },
  {
    "text": "defenses okay there's actually defenses against the attack we're more to the point we're going to try to contain the attack right now what we've talked about",
    "start": "3040440",
    "end": "3047200"
  },
  {
    "text": "so far when we when we tried to limit everybody's access to our DNS server was we try to give an attacker who is firing",
    "start": "3047200",
    "end": "3052720"
  },
  {
    "text": "off that attack less ability to get to our DNS servers or to get our DNS servers to do things that we don't want",
    "start": "3052720",
    "end": "3058440"
  },
  {
    "text": "it to do for them okay the particular attack for 82821 depends on you being able to on an",
    "start": "3058440",
    "end": "3065960"
  },
  {
    "text": "attacker being able to get my DNS server the target DNS server to query his machine if we never get if he can't get",
    "start": "3065960",
    "end": "3073160"
  },
  {
    "text": "that to happen the attack fails right there and the bulk of the script Cav will just go away a really really good attacker who",
    "start": "3073160",
    "end": "3080119"
  },
  {
    "text": "were luckily in the minority will probably try to find some other kind of access they might uh they might uh SP",
    "start": "3080119",
    "end": "3085400"
  },
  {
    "text": "Pro their IP address they might do uh they might actually just try to come from some machine inside your domain but",
    "start": "3085400",
    "end": "3091559"
  },
  {
    "text": "um well I'll give you as much as I can right okay so what do we do when they actually what do we do when they",
    "start": "3091559",
    "end": "3097440"
  },
  {
    "text": "actually got access when they had enough access to launch their attack and we just want to contain a successful one",
    "start": "3097440",
    "end": "3103200"
  },
  {
    "text": "okay the first thing is don't be vulnerable okay patch your machines I'm",
    "start": "3103200",
    "end": "3108839"
  },
  {
    "text": "not saying patch your machines because I want to be annoying I'm saying patch your machines cuz like at least 10% of",
    "start": "3108839",
    "end": "3113880"
  },
  {
    "text": "this room doesn't have their machines fully patched who's patched in the last two months raise your",
    "start": "3113880",
    "end": "3119520"
  },
  {
    "text": "hand okay for people who are watching this on video there a significant number of hands that did not go up how about in",
    "start": "3119520",
    "end": "3125799"
  },
  {
    "text": "the last six months raise your hand if you H if you if you patched in the last",
    "start": "3125799",
    "end": "3130960"
  },
  {
    "text": "six okay so for those watching this on video it was significantly less than 10% of the room um let's just say um they're",
    "start": "3130960",
    "end": "3139040"
  },
  {
    "text": "having they're not a lot of people patching so um patch your systems don't don't be vulnerable I promised you there",
    "start": "3139040",
    "end": "3144240"
  },
  {
    "text": "were two really boring areas of security one was logging two is patching okay",
    "start": "3144240",
    "end": "3149440"
  },
  {
    "text": "what else can we do well we had a remote root hole so we can um we can remove the",
    "start": "3149440",
    "end": "3154880"
  },
  {
    "text": "uh we can't remove the remote part DNS is available to everybody basically um but we can remove the root part okay if",
    "start": "3154880",
    "end": "3162359"
  },
  {
    "text": "you run DNS as a non-root user like user DNS um then uh they don't get user root",
    "start": "3162359",
    "end": "3169440"
  },
  {
    "text": "when they break in when they get this system to give them a shell instead of getting a root shell they get a shell with user DNS",
    "start": "3169440",
    "end": "3175920"
  },
  {
    "text": "who hopefully won't have a whole lot of access on your system okay and I've given you instructions for how you can do this pretty easily all you do is",
    "start": "3175920",
    "end": "3183200"
  },
  {
    "text": "create a create a DNS user create a DNS group and modify your nit scripts to",
    "start": "3183200",
    "end": "3189680"
  },
  {
    "text": "actually um tell the DNS server to drop privileges from root down to user DNS",
    "start": "3189680",
    "end": "3195920"
  },
  {
    "text": "warning don't use user nobody don't use any of the users that's already on your system if you use usern nobody for DNS",
    "start": "3195920",
    "end": "3202200"
  },
  {
    "text": "and user nobody's also being used to like own all the CGI scripts or something um then you've got a problem",
    "start": "3202200",
    "end": "3207880"
  },
  {
    "text": "because you just gave somebody somebody gets user nobody they use user nobody to modify the CGI scripts and now they're",
    "start": "3207880",
    "end": "3213520"
  },
  {
    "text": "on your system with whatever user the web was and then they continue you know we've got this privilege escalation",
    "start": "3213520",
    "end": "3219280"
  },
  {
    "text": "problem so use distinct users for each server I like DNS um so we don't have",
    "start": "3219280",
    "end": "3227280"
  },
  {
    "text": "our our attacker at this point if our attacker fires the exploit the attacker doesn't get rude anymore okay this also",
    "start": "3227280",
    "end": "3234200"
  },
  {
    "text": "is not really great if the attacker was a worm the worm is not really happy anymore it it it's coming against the",
    "start": "3234200",
    "end": "3239520"
  },
  {
    "text": "system and not getting what it expected and worms are pretty stupid usually so um you just save yourself from a worm",
    "start": "3239520",
    "end": "3245240"
  },
  {
    "text": "and a whole bunch of other attackers okay um your attacker if they're bright can still probably try to escalate",
    "start": "3245240",
    "end": "3251559"
  },
  {
    "text": "privilege okay that means that they'll get us your DNS and now they'll find something else that's vulnerable in the",
    "start": "3251559",
    "end": "3256960"
  },
  {
    "text": "system that could only get attacked through a local hole they'll exploit the local local hole to get roote okay so we",
    "start": "3256960",
    "end": "3264040"
  },
  {
    "text": "want to try to we want to try to block this but this is a whole another talk or an article which I've I've given you a link to on a a set u ID audit you can",
    "start": "3264040",
    "end": "3271440"
  },
  {
    "text": "audit your system and try to find everything that's running is route that that that user DNS could exploit and try",
    "start": "3271440",
    "end": "3277040"
  },
  {
    "text": "to uh and try to strip page away from it you know make sure that there are fewer ways to get from user DNS to user",
    "start": "3277040",
    "end": "3283200"
  },
  {
    "text": "rout there's another cool thing we can do through the DNS server itself and that's we can shot it and shot it for",
    "start": "3283200",
    "end": "3289400"
  },
  {
    "text": "for those of you who haven't played with this before basically says that instead of the user DNS being able to walk",
    "start": "3289400",
    "end": "3294440"
  },
  {
    "text": "around the file system system and read anything that's World readable they can only read this small little directory",
    "start": "3294440",
    "end": "3299480"
  },
  {
    "text": "we've stuck them in that we've carefully constructed okay and if they can only read that their their attack doesn't get",
    "start": "3299480",
    "end": "3305000"
  },
  {
    "text": "them very far because now they're on the system with user DNS they can't really do much they can't get much information",
    "start": "3305000",
    "end": "3310079"
  },
  {
    "text": "they're pretty much styed which is absolutely wonderful and what I've what I've given you is again sheet sheets you",
    "start": "3310079",
    "end": "3316799"
  },
  {
    "text": "won't use till you get home on how to chot um uh bind under Solaris okay and",
    "start": "3316799",
    "end": "3323960"
  },
  {
    "text": "this is a full slides it basically means you create a directory called cherot Nam D you stick everything in it that name d",
    "start": "3323960",
    "end": "3331480"
  },
  {
    "text": "needs and then you start name d out of there and that includes copying over the",
    "start": "3331480",
    "end": "3336520"
  },
  {
    "text": "libraries and this basically this technique can be used for other systems or you can do what you know a lot of",
    "start": "3336520",
    "end": "3342640"
  },
  {
    "text": "people do which is look for my paper or other people's paper on papers on this and and copy so the same uh exploration",
    "start": "3342640",
    "end": "3349400"
  },
  {
    "text": "of how to trot something doesn't have to be done multiple times okay if we run named d roed we've",
    "start": "3349400",
    "end": "3355920"
  },
  {
    "text": "locked them into this directory called chero Nam D which again for this particular attack and basically all the",
    "start": "3355920",
    "end": "3361200"
  },
  {
    "text": "DNS attacks that I've seen that are trying to for remote route gives an attacker basically not a zilch nothing I",
    "start": "3361200",
    "end": "3368520"
  },
  {
    "text": "mean they're they're on but they can't really do anything so so what was the point you know um so it's it's pretty",
    "start": "3368520",
    "end": "3375240"
  },
  {
    "text": "cool okay you'll have to change your init script to um to actually start your DNS server this way but once you've done",
    "start": "3375240",
    "end": "3381760"
  },
  {
    "text": "this it's pretty maintenance free okay so what else would you do at this point",
    "start": "3381760",
    "end": "3387680"
  },
  {
    "text": "on bind um I'd go for split Horizon because I like it because you know you can you can cut the amount of data you",
    "start": "3387680",
    "end": "3393799"
  },
  {
    "text": "have you can cut your you can cut the attack Vector on your internal DNS servers um you can stop giving away so",
    "start": "3393799",
    "end": "3400000"
  },
  {
    "text": "much information um split Horizon is cool and I I gave you guys some some work on how to do this um the next thing",
    "start": "3400000",
    "end": "3407119"
  },
  {
    "text": "you can really do is basically just go read the book um this is again what a lot of people be like wait a second I",
    "start": "3407119",
    "end": "3412440"
  },
  {
    "text": "came to your talk for this yeah the talk gives gives you everything that I can do that I can give you right now but the",
    "start": "3412440",
    "end": "3417960"
  },
  {
    "text": "best way to really secure a system is to understand it as thoroughly as possible so when something weird is going on you",
    "start": "3417960",
    "end": "3423520"
  },
  {
    "text": "understand if this is abnormal or normal and you also understand you might understand the attack itself if you're",
    "start": "3423520",
    "end": "3429640"
  },
  {
    "text": "watching if you're watching a new attack we've never seen before okay I've also thrown in a few slides about djb DNS um",
    "start": "3429640",
    "end": "3437359"
  },
  {
    "text": "and I'm I'm promising you guys an article if you look on my website I'm going to put up some extra slides and an article specifically on djbdns",
    "start": "3437359",
    "end": "3444920"
  },
  {
    "text": "the problem with DJ BNS is it's it's definitely not for the timid you should really understand your buying servers",
    "start": "3444920",
    "end": "3450720"
  },
  {
    "text": "and DNS in general before you try to run it um basically it's a whole lot safer",
    "start": "3450720",
    "end": "3456280"
  },
  {
    "text": "than bind because they've taken all the pieces instead of having this really big this really big complex system running",
    "start": "3456280",
    "end": "3463280"
  },
  {
    "text": "as roots which is bind you get a you get a bunch of little pieces um that all run",
    "start": "3463280",
    "end": "3468960"
  },
  {
    "text": "with only the level of privilege they require and they're pretty detached from each other so they only communicate what they need to the nice thing is that",
    "start": "3468960",
    "end": "3475799"
  },
  {
    "text": "you've actually got the part the part of the system that's vulnerable when there is a vulnerability released in in bind",
    "start": "3475799",
    "end": "3481920"
  },
  {
    "text": "that part of the system will have full ability to communicate with the rest of the system to get it to do weird things",
    "start": "3481920",
    "end": "3487319"
  },
  {
    "text": "in this case with djbdns since it's separated into pieces the part that's vulnerable may have no ability to pass",
    "start": "3487319",
    "end": "3494200"
  },
  {
    "text": "data or pass data without filtering to the parts that actually can do whatever the attacker wants which means that you",
    "start": "3494200",
    "end": "3501359"
  },
  {
    "text": "can be a whole lot safer with this stuff this is the same this is the same M Mo as as uh PO is replacing sendmail with",
    "start": "3501359",
    "end": "3507880"
  },
  {
    "text": "postfix okay um and I really like that a lot as well the problem is it's really",
    "start": "3507880",
    "end": "3513480"
  },
  {
    "text": "pretty difficult to administer you have to really learn a lot um basically djbdns is broken up into a few pieces",
    "start": "3513480",
    "end": "3521119"
  },
  {
    "text": "one is called DNS cache which just does the recursive query part okay instead of",
    "start": "3521119",
    "end": "3526359"
  },
  {
    "text": "instead of having one big server that does it all you've got DNS cache that does all the recursive queries you've",
    "start": "3526359",
    "end": "3531440"
  },
  {
    "text": "got tiny DNS that actually does the stuff that's specific to your domain domain okay and only request specific to",
    "start": "3531440",
    "end": "3537280"
  },
  {
    "text": "your domain so tiny DNS is the stuff that is is the one that the world is talking to the world who needs to all",
    "start": "3537280",
    "end": "3542960"
  },
  {
    "text": "know about best linux.org okay and your internal clients only talk to DNS cache",
    "start": "3542960",
    "end": "3548520"
  },
  {
    "text": "okay so you they break out the functionality and get a whole lot of security out of that um you also we also",
    "start": "3548520",
    "end": "3554839"
  },
  {
    "text": "separate who the the part of the system that does the Zone transfers into a separate demon and again this gives us a",
    "start": "3554839",
    "end": "3560160"
  },
  {
    "text": "whole lot more granular of control and also an ability to try to to try to um make it a whole lot tougher for someone",
    "start": "3560160",
    "end": "3566400"
  },
  {
    "text": "to exploit this system if there's a bug c.org which is normally really great",
    "start": "3566400",
    "end": "3571799"
  },
  {
    "text": "for watching for reading debates and stuff actually has a great article on how to set up djb DNS in like 10 minutes",
    "start": "3571799",
    "end": "3579559"
  },
  {
    "text": "um maintaining its a different story but this will help you set it up um the nice",
    "start": "3579559",
    "end": "3585160"
  },
  {
    "text": "thing is a lot of what we've done here is a lot easier to do with djbdns all the servers run is run non-root as",
    "start": "3585160",
    "end": "3591119"
  },
  {
    "text": "default okay all of them run true rooted by default we don't have to do anything weird there they haven't had a security",
    "start": "3591119",
    "end": "3597039"
  },
  {
    "text": "hole yet and they're promising what is now a smaller sum of money but still promising a prize to anybody who can come up with a hole prize has gone",
    "start": "3597039",
    "end": "3604520"
  },
  {
    "text": "uncollected prize has not gone uncollected if they'd offered one for bind which has had oh God know knows how",
    "start": "3604520",
    "end": "3610359"
  },
  {
    "text": "many problems okay there's also some cool stuff like if you if you don't want to Nat and you want to make all your",
    "start": "3610359",
    "end": "3616760"
  },
  {
    "text": "machines if you don't want to give out internal internal data you're like this gentleman over here who said why are we giving out all this internal data you",
    "start": "3616760",
    "end": "3622760"
  },
  {
    "text": "set up wall DNS and wall DNS basically says okay you want to know what the IP what what the name is for 1.2.3.4 ah",
    "start": "3622760",
    "end": "3631119"
  },
  {
    "text": "it's uh 1.2.3.4 in essence and again we're we're restricting",
    "start": "3631119",
    "end": "3636680"
  },
  {
    "text": "data okay because we're separating out data we can stop people from doing queries we don't want to do queries and",
    "start": "3636680",
    "end": "3642599"
  },
  {
    "text": "it's really easy to go split Horizon this way so should you use it okay it's",
    "start": "3642599",
    "end": "3647640"
  },
  {
    "text": "got a much better security history from B than bind it's got a much better architecture selling your boss in the",
    "start": "3647640",
    "end": "3653359"
  },
  {
    "text": "switch will be difficult heck selling yourself on the switch will be difficult because of the work involved um It's",
    "start": "3653359",
    "end": "3658880"
  },
  {
    "text": "relatively easy to set up split Horizon um but it's also relatively difficult to configure um but I sure as heck like it",
    "start": "3658880",
    "end": "3666160"
  },
  {
    "text": "and I'll give you guys some more information on my website I promise okay so uh go learn more about this because",
    "start": "3666160",
    "end": "3672880"
  },
  {
    "text": "DNS is one hell of a problem I mean you know if your vulner if your DNS server gets taken over um your clients are",
    "start": "3672880",
    "end": "3679880"
  },
  {
    "text": "really nailed um okay so go in peace send no more update your uh update your DNS",
    "start": "3679880",
    "end": "3687799"
  },
  {
    "text": "servers either run djb or uh or make your bind into a much better configured machine and that's it check out my",
    "start": "3687799",
    "end": "3694079"
  },
  {
    "text": "website for more [Applause]",
    "start": "3694079",
    "end": "3700050"
  },
  {
    "text": "info",
    "start": "3713440",
    "end": "3716440"
  }
]