[
  {
    "start": "0",
    "end": "64000"
  },
  {
    "text": "[Music]",
    "start": "1700",
    "end": "4810"
  },
  {
    "text": "all right welcome blacket thank you for joining us today this talk is called I am the one who kns so my name is Goan",
    "start": "8719",
    "end": "16358"
  },
  {
    "text": "I'm the head of security research for an Israel bested startup atic we focus on cloud security with a special focus on",
    "start": "16359",
    "end": "23080"
  },
  {
    "text": "cloud infrastructure security so two sents about myself I've been doing security research for a very long time",
    "start": "23080",
    "end": "29640"
  },
  {
    "text": "basically my background is Windows exploitation active directory and trade intelligence I love everything to Cloud",
    "start": "29640",
    "end": "36280"
  },
  {
    "text": "security noway I spent most of my time researching the many cloud services out there I also work during the years of",
    "start": "36280",
    "end": "42520"
  },
  {
    "text": "sever lar organizations such as Microsoft and checkpoint and spent few years in smaller security startups in",
    "start": "42520",
    "end": "48440"
  },
  {
    "text": "Israel so this is my second time speaking in blackhead and I'm super excited to speak in front of you and I",
    "start": "48440",
    "end": "54480"
  },
  {
    "text": "let N present himself hi hi everyone I'm nom I'm A Cloud security research and my",
    "start": "54480",
    "end": "60440"
  },
  {
    "text": "background is an embedded devices and offensive security okay so actually this talk",
    "start": "60440",
    "end": "66240"
  },
  {
    "start": "64000",
    "end": "299000"
  },
  {
    "text": "started based on a brand stomic session nor and I had around one of the core Services the mighty IM service and how",
    "start": "66240",
    "end": "72560"
  },
  {
    "text": "it defer in function from One Cloud uh vendor to another now before we start",
    "start": "72560",
    "end": "78240"
  },
  {
    "text": "just a little bit of context about why we think this is an important topic to speak about we know that organization",
    "start": "78240",
    "end": "83960"
  },
  {
    "text": "deploy their infrastructure on a multicloud platform more and more these days and the reason is there are times",
    "start": "83960",
    "end": "89000"
  },
  {
    "text": "you want to lift and shift on premises infrastructure for example to get redundancy so you distribute it across",
    "start": "89000",
    "end": "94399"
  },
  {
    "text": "different vendors sometimes you just want to reduce cost or choose the best of bre service so you may run your",
    "start": "94399",
    "end": "100600"
  },
  {
    "text": "workloads on AWS but for some reason the development team has a special requirement to use a specific database",
    "start": "100600",
    "end": "106600"
  },
  {
    "text": "that only exists in gcp now once you do that you are now managing two separately",
    "start": "106600",
    "end": "112880"
  },
  {
    "text": "Cloud infrastructures especially I am infrastructures now on the surface it seem that all vendors give a similar set",
    "start": "112880",
    "end": "118880"
  },
  {
    "text": "of management tools and cor services that help us actually support us managing those services in the cloud but",
    "start": "118880",
    "end": "125200"
  },
  {
    "text": "how actually does it behave under the hood are all vendors actually following the same rules the same best practices",
    "start": "125200",
    "end": "132599"
  },
  {
    "text": "and are all vendors following the share responsibility model in exact the same way now what about us the security",
    "start": "132599",
    "end": "139720"
  },
  {
    "text": "professional that need to manage the cloud do we really understand how each provider Implement its own access model",
    "start": "139720",
    "end": "146280"
  },
  {
    "text": "and what are the do and don'ts of each platform and it's hard enough to be expert on one Cloud platform but often",
    "start": "146280",
    "end": "154040"
  },
  {
    "text": "we copy features and routines from one platform to another and those may work differently from what we",
    "start": "154040",
    "end": "160239"
  },
  {
    "text": "expect at the beginning and we know that Vendo spends Millions sometimes billions",
    "start": "160239",
    "end": "165319"
  },
  {
    "text": "of dollars on securing their infrastructure each year but how does it actually translate into better security",
    "start": "165319",
    "end": "172319"
  },
  {
    "text": "posture on our end the consumer side if you think about it I IM and all around",
    "start": "172319",
    "end": "180000"
  },
  {
    "text": "am actually none of those mistakes or weak spot that surround IM are actually the cloud provider responsibility right",
    "start": "180000",
    "end": "187120"
  },
  {
    "text": "it's basically all on us we are as Cloud consumers the one that accountable for that security so if you're a fortune h00",
    "start": "187120",
    "end": "195200"
  },
  {
    "text": "company that's great you probably have a dedicated security team for each Cloud vendor and even then sometimes things",
    "start": "195200",
    "end": "202000"
  },
  {
    "text": "can get a bit complex so think about how user access different resources in the cloud what about authentication and",
    "start": "202000",
    "end": "208319"
  },
  {
    "text": "authorization logic evalu policies what about internal service communication so those nonhuman identities nonhuman",
    "start": "208319",
    "end": "214840"
  },
  {
    "text": "services that need to speak one with each other do we really understand how each vendor operate internally under the",
    "start": "214840",
    "end": "220920"
  },
  {
    "text": "hood and what are the risk involved in managing those management entities and what about encryption and encryption",
    "start": "220920",
    "end": "226560"
  },
  {
    "text": "keys do we have full visibility into our multicloud platform encryption keys and last but not least what about logging do",
    "start": "226560",
    "end": "233920"
  },
  {
    "text": "we log everything how can we use logs to our advantage now",
    "start": "233920",
    "end": "239959"
  },
  {
    "text": "today we're going to focus basically on the hidden risk of managing an multicloud IM environment we will focus",
    "start": "239959",
    "end": "245720"
  },
  {
    "text": "through main differences between each cloud infostructure and talk about the weak security spots of those platform",
    "start": "245720",
    "end": "252720"
  },
  {
    "text": "and when I say weak security spots I refer to infrastructure features that",
    "start": "252720",
    "end": "257759"
  },
  {
    "text": "are shared among all vendors such as permissions non-human identities default",
    "start": "257759",
    "end": "263400"
  },
  {
    "text": "policies Etc now we talk about several use cases and see how inconsistence",
    "start": "263400",
    "end": "268720"
  },
  {
    "text": "entit actually can can lead to unintended access and what are the steps the defender can take in order to",
    "start": "268720",
    "end": "274199"
  },
  {
    "text": "improve their overall security posture now don't get me wrong here I'm not saying other security flows are not used",
    "start": "274199",
    "end": "281360"
  },
  {
    "text": "by ters or less important to protect against but if there is one thing we would like you to take from this",
    "start": "281360",
    "end": "286479"
  },
  {
    "text": "specific session is that I am is the backbone service it is the core service it is the Gateway that control every",
    "start": "286479",
    "end": "292919"
  },
  {
    "text": "access to your Cloud resources and it must be protected so let's let's begin",
    "start": "292919",
    "end": "299840"
  },
  {
    "start": "299000",
    "end": "563000"
  },
  {
    "text": "so let's spend two minutes on I am so at a high level view I am composed of identities which is basically anything",
    "start": "299840",
    "end": "306360"
  },
  {
    "text": "that can authenticate against the IM am service and in addition it provide us premission documents that Define who can",
    "start": "306360",
    "end": "313479"
  },
  {
    "text": "access what and under which condition and each provider has its own unique identities and share some of those",
    "start": "313479",
    "end": "320039"
  },
  {
    "text": "between the vendors so you have users and groups which are shared between all vendors but also have some special type",
    "start": "320039",
    "end": "325400"
  },
  {
    "text": "of identities such as predefined groups in gcp that those represent all authenticated users or project owners so",
    "start": "325400",
    "end": "331240"
  },
  {
    "text": "you need to be very well familiar with the infrastructure in order to make good security",
    "start": "331240",
    "end": "337080"
  },
  {
    "text": "policies now if we look at identities we can break those to two main categories human identities and non-human",
    "start": "337080",
    "end": "344000"
  },
  {
    "text": "identities now non-human identities today are very important to security H actually each vendor has its own",
    "start": "344000",
    "end": "350479"
  },
  {
    "text": "implementation for non human identities and you mention those and during the",
    "start": "350479",
    "end": "355520"
  },
  {
    "text": "session now if you put the major three providers one again another this is how the comparison looks like on",
    "start": "355520",
    "end": "362319"
  },
  {
    "text": "the left side of the chart we have many different types of identities and on the right we have those permission documents",
    "start": "362319",
    "end": "368960"
  },
  {
    "text": "now each provider uses some kind of permission documents usually in the form of Json and those documents are linked",
    "start": "368960",
    "end": "375599"
  },
  {
    "text": "to the identities we see on the left now the linkage operation sometimes it's called a siging or buying or attachment",
    "start": "375599",
    "end": "380960"
  },
  {
    "text": "but it doesn't matter it's basically the same the same purpose serve the same purpose now the major difference the",
    "start": "380960",
    "end": "386160"
  },
  {
    "text": "first major difference between those fends is that Azure in and gcp follow what I call the classical Ro based",
    "start": "386160",
    "end": "392759"
  },
  {
    "text": "access model so they allow you to limit the effect of each document permission to a specific scope and this is a very",
    "start": "392759",
    "end": "399680"
  },
  {
    "text": "important security enhancement so for example you can give someone administrative permissions but limit the",
    "start": "399680",
    "end": "405039"
  },
  {
    "text": "effect of those permission on a certain scope so in AZ for example you can limit those to Resource Group or in gcp you",
    "start": "405039",
    "end": "411199"
  },
  {
    "text": "can limit those to a project now in AWS the scope is actually part of the policy",
    "start": "411199",
    "end": "418160"
  },
  {
    "text": "itself and it is much more more limited and harder to manage and usually based on some kind of string manipulation now",
    "start": "418160",
    "end": "425240"
  },
  {
    "text": "I'm not saying a gcp have better policy capabilities because they are not I'm",
    "start": "425240",
    "end": "430560"
  },
  {
    "text": "saying that the way security is defined by AWS is way way different from other vendos and we need again to be familiar",
    "start": "430560",
    "end": "437319"
  },
  {
    "text": "with those now the second major difference is that AWS access model is heavily based on identity policies",
    "start": "437319",
    "end": "444280"
  },
  {
    "text": "whether gcp is kind of resource based D and Azure is a mixture of both and the",
    "start": "444280",
    "end": "449879"
  },
  {
    "text": "third major difference is that Azu and gcp are full-blown identity providers with full management capabilities and",
    "start": "449879",
    "end": "456199"
  },
  {
    "text": "AWS has something they call single sign on which is a bit of misic name because",
    "start": "456199",
    "end": "461599"
  },
  {
    "text": "single sign on is not actually the main feature of that service basically single sign on is kind of mini directory within",
    "start": "461599",
    "end": "468280"
  },
  {
    "text": "AWS and if you are not using it yet we strongly recommend you start using it because it let you actually manage",
    "start": "468280",
    "end": "474720"
  },
  {
    "text": "access to multiple AE account in much more convenient way",
    "start": "474720",
    "end": "480639"
  },
  {
    "text": "all right so on the slide we see how a typical organizational structure looks",
    "start": "480639",
    "end": "485960"
  },
  {
    "text": "like among uh the three providers and all vendors allow us to gather resources in the same way usually in some sort of",
    "start": "485960",
    "end": "493080"
  },
  {
    "text": "container container for resources so in AWS the main container for resources is called an AWS account and this is the",
    "start": "493080",
    "end": "499520"
  },
  {
    "text": "small unit that can contain different resources and you set up AWS account and there of course you can provision",
    "start": "499520",
    "end": "505440"
  },
  {
    "text": "resources and policies now in gcp the way this work you have a a main basic",
    "start": "505440",
    "end": "510479"
  },
  {
    "text": "container which called the project and you can roll up Ser project into folders and folders have a nice State structure",
    "start": "510479",
    "end": "516599"
  },
  {
    "text": "up up way to the organizational resource now Azure uses basic resource container",
    "start": "516599",
    "end": "522080"
  },
  {
    "text": "is called Resource Group and every resource must belong at least to one Resource Group and if not Azure will",
    "start": "522080",
    "end": "527360"
  },
  {
    "text": "make you create a new Resource Group now if you have again a bunch of resources",
    "start": "527360",
    "end": "532440"
  },
  {
    "text": "that that serve the same application logic you usually Store and put those in the same Resource Group now as I",
    "start": "532440",
    "end": "538560"
  },
  {
    "text": "mentioned a working a bit differently and the main reason again they use Scopes that",
    "start": "538560",
    "end": "544880"
  },
  {
    "text": "restrict access to container in the organizational structure so you can choose different scope for example in a",
    "start": "544880",
    "end": "551120"
  },
  {
    "text": "you can use subscription or management group but in AWS the there are no scopes so Scopes are actually defined inside",
    "start": "551120",
    "end": "557519"
  },
  {
    "text": "the policies and now we going going to talk about those H during the",
    "start": "557519",
    "end": "562720"
  },
  {
    "text": "session all right so now that we cover some basic uh I let's zoom out for a",
    "start": "562720",
    "end": "569440"
  },
  {
    "start": "563000",
    "end": "813000"
  },
  {
    "text": "second and think about the cloud infrastructure attack surface and why actually I IM permission are so",
    "start": "569440",
    "end": "576279"
  },
  {
    "text": "important and most likely many of you heard about the aw permission and of",
    "start": "576279",
    "end": "582680"
  },
  {
    "text": "course how it can be abused by attackers and actually we had some breaches during the years that abuse that specific",
    "start": "582680",
    "end": "588760"
  },
  {
    "text": "permission in order to gain high privilege access to different assets in the cloud but actually how many of you",
    "start": "588760",
    "end": "594880"
  },
  {
    "text": "can tell me what is the equivalent of pestol in gcp if you are not exper on on",
    "start": "594880",
    "end": "600040"
  },
  {
    "text": "gcp now it actually called the service account act as permission and it is very",
    "start": "600040",
    "end": "605360"
  },
  {
    "text": "very similar to pestol and can be abused in similar ways and this bring me to my next point so actually I am",
    "start": "605360",
    "end": "611640"
  },
  {
    "text": "infrastructure uses thousands sometimes 10 of thousands of different permissions but actually attackers don't really care",
    "start": "611640",
    "end": "618640"
  },
  {
    "text": "about most of these permissions usually they focus on management permissions attackers don't really care about",
    "start": "618640",
    "end": "624720"
  },
  {
    "text": "implementation details or how I am defer between clown vendors all they need is access to the IM service which of course",
    "start": "624720",
    "end": "631519"
  },
  {
    "text": "publicly open to the internet then in the security context such as compromise credential or some kind of token and",
    "start": "631519",
    "end": "637920"
  },
  {
    "text": "they need the security context to have enough permission so to be attached with the relevant permission documents and",
    "start": "637920",
    "end": "643560"
  },
  {
    "text": "then they can act on their objective now if they don't have those permission they will try to privilege escalate but",
    "start": "643560",
    "end": "649000"
  },
  {
    "text": "usually looking for specific types of permissions now when attackers or",
    "start": "649000",
    "end": "655200"
  },
  {
    "text": "security researchers hunt for new bugs they usually use specific exploitation techniques or chain of those techniques",
    "start": "655200",
    "end": "662519"
  },
  {
    "text": "and usually those techniques are very well documented into different categories now if you think about permission we can actually think about",
    "start": "662519",
    "end": "668720"
  },
  {
    "text": "permissions and permission Management in the same way right because uh actually I am permission are there are some",
    "start": "668720",
    "end": "675320"
  },
  {
    "text": "specific I am permission that are particularly interesting for attackers and we can break down those to two SE to",
    "start": "675320",
    "end": "681040"
  },
  {
    "text": "several subgroups and the first group is a sment operation so any sment operation is potentially very dangerous and can be",
    "start": "681040",
    "end": "687480"
  },
  {
    "text": "abused by attackers the second one is called execution rights and also we have delegation permissions and grants which",
    "start": "687480",
    "end": "693600"
  },
  {
    "text": "are specific to AWS and creation of new credentials and some routines around",
    "start": "693600",
    "end": "698680"
  },
  {
    "text": "encryption and on the screen you see several examples of those and of course this is not a complete list just just to",
    "start": "698680",
    "end": "704639"
  },
  {
    "text": "make a point so assignment operation can be something really really simple we can assign if we have assignment operation",
    "start": "704639",
    "end": "711040"
  },
  {
    "text": "that allow us to assign ourself to a new group then we can privileg escalate and add ourself to a high privilege group",
    "start": "711040",
    "end": "716680"
  },
  {
    "text": "but each cloud provider actually have specific and very interesting assignment operation that are unique for each",
    "start": "716680",
    "end": "722000"
  },
  {
    "text": "vendor so for example in Azure you have something some permission that allow you to assign a manage identity to a",
    "start": "722000",
    "end": "728200"
  },
  {
    "text": "workload now if that workload is compromised attackers can assign new",
    "start": "728200",
    "end": "733720"
  },
  {
    "text": "identity new manag identity with potential high privilege permission and without giving any secret they can get",
    "start": "733720",
    "end": "740760"
  },
  {
    "text": "uh the tokens that represent that that manage identity the second category is",
    "start": "740760",
    "end": "746360"
  },
  {
    "text": "code execution rights and there are different type of code execution routines some are simple so direct code",
    "start": "746360",
    "end": "752240"
  },
  {
    "text": "executions for example editing or modifying uh or creating new serverless",
    "start": "752240",
    "end": "757839"
  },
  {
    "text": "function and round those in some way and in that way you can again try and pro escalate some not so obvious code",
    "start": "757839",
    "end": "763880"
  },
  {
    "text": "execution routines is where you provide some kind of configuration file to the cloud provider so infostructure is code",
    "start": "763880",
    "end": "770519"
  },
  {
    "text": "and the cloud provider run those configuration files those templates for you and basically execute code behind",
    "start": "770519",
    "end": "776480"
  },
  {
    "text": "the scene and the lesson my favorite of course is creation of new credentials and you probably say well it's the",
    "start": "776480",
    "end": "782279"
  },
  {
    "text": "oldest technique in the book right why we even put that in its own category but actually it used constantly by",
    "start": "782279",
    "end": "788839"
  },
  {
    "text": "adversaries and each cloud provider have a lot of different H credential uh permissions uh that allow you either",
    "start": "788839",
    "end": "796199"
  },
  {
    "text": "edit new credentials or edit credentials and if you look at the solar Wix that happened two years ago one of the MPS",
    "start": "796199",
    "end": "803519"
  },
  {
    "text": "they use were actually adding new secrets to application but nobody monitor that or noticed that actually",
    "start": "803519",
    "end": "808639"
  },
  {
    "text": "the tag was discovered from a different angle all right so let's let's shift J",
    "start": "808639",
    "end": "815040"
  },
  {
    "start": "813000",
    "end": "957000"
  },
  {
    "text": "and talk about uh something very really important which is nonhuman identities which is a big topic by itself and we",
    "start": "815040",
    "end": "821120"
  },
  {
    "text": "don't have a lot of time to cover everything but but I'll do my best so non-human identities are actually",
    "start": "821120",
    "end": "827480"
  },
  {
    "text": "crucial part of every well-designed cloud infrastructure and we see more and more cloud services that start actually",
    "start": "827480",
    "end": "834360"
  },
  {
    "text": "adding support for those non-human identities and vendors are pushing their uh their users actually to use those",
    "start": "834360",
    "end": "840839"
  },
  {
    "text": "menenti and for a good reason because it basically provide the cloud workload you're running the ability to",
    "start": "840839",
    "end": "847079"
  },
  {
    "text": "authenticate again the IM without storing any secret within the application logic or on the work itself",
    "start": "847079",
    "end": "854320"
  },
  {
    "text": "so actually it's a security enhancement now each Cloud vendor has its own implementation for those non-human",
    "start": "854320",
    "end": "860480"
  },
  {
    "text": "identities and some of the cloud providers has a very special implementation of those identities but",
    "start": "860480",
    "end": "865959"
  },
  {
    "text": "they all share again the main Concepts so basically you can send an HTTP request from the workload and get a",
    "start": "865959",
    "end": "873000"
  },
  {
    "text": "token back to you and again the only restriction is that you must run within that workload whether it's virtual",
    "start": "873000",
    "end": "879079"
  },
  {
    "text": "machine container or service function it doesn't matter you need to be on the workload itself now so how does it work",
    "start": "879079",
    "end": "885360"
  },
  {
    "text": "actually it's like working like in a magical way right so actually if you",
    "start": "885360",
    "end": "891000"
  },
  {
    "text": "think about it h Cloud providers need to store some kind of Secret for those non-human identities I love to call",
    "start": "891000",
    "end": "897160"
  },
  {
    "text": "those manag identities the way Microsoft folders so those manag identities need to have some kind of Secrets but the",
    "start": "897160",
    "end": "902480"
  },
  {
    "text": "secret are not stored on the workload they usually stored in the infrastructure itself now if we are not",
    "start": "902480",
    "end": "910160"
  },
  {
    "text": "careful enough non human identities can expose our infrastructure to new risk",
    "start": "910160",
    "end": "915279"
  },
  {
    "text": "such as pre escalation technique and manage ID are tightly related to am permission because manage identity are",
    "start": "915279",
    "end": "920839"
  },
  {
    "text": "actually authenticating directly against the I IM service and uh they have some",
    "start": "920839",
    "end": "926680"
  },
  {
    "text": "kind of long-term tokens but those tokens are not located on the local",
    "start": "926680",
    "end": "932880"
  },
  {
    "text": "machines and here's a a simple project collection technique so basically if you",
    "start": "932880",
    "end": "938040"
  },
  {
    "text": "have enough permission we can initiate a new instance and if we have assignment",
    "start": "938040",
    "end": "943079"
  },
  {
    "text": "permission that we can assign new roles attach new roles to that2 instance we can PR pretty easily privilege escalate",
    "start": "943079",
    "end": "950079"
  },
  {
    "text": "and get any administrative role we want and access different apis in that specific AWS account",
    "start": "950079",
    "end": "957759"
  },
  {
    "start": "957000",
    "end": "1097000"
  },
  {
    "text": "now let let's think about hybrid managed entities so this is a new thing that",
    "start": "957759",
    "end": "964839"
  },
  {
    "text": "actually the cloud providers adopting it more and more so hybrid manage identities or non humanties are very",
    "start": "964839",
    "end": "970920"
  },
  {
    "text": "special because as I mentioned there is a long-term ccet that need to be stored somewhere but when we are using hybrid",
    "start": "970920",
    "end": "978040"
  },
  {
    "text": "instance metadata when we are accessing and when we are running agent that represent those hybrid connections",
    "start": "978040",
    "end": "985360"
  },
  {
    "text": "actually the secrets the longterm secrets are stored on the machine themselves on your data center because",
    "start": "985360",
    "end": "991800"
  },
  {
    "text": "they're running those spirital machines are running on your data center so actually when you are attaching manage",
    "start": "991800",
    "end": "997399"
  },
  {
    "text": "identities from your Cloud UI you are attaching those to your hybrid instance",
    "start": "997399",
    "end": "1004079"
  },
  {
    "text": "uh hybrid machine in your environment actually the secrets whatever it certificate or something else are stored",
    "start": "1004079",
    "end": "1011160"
  },
  {
    "text": "on your workload and if those are compromise of course it can lead to potential risks and with that I we have",
    "start": "1011160",
    "end": "1019240"
  },
  {
    "text": "nor Contin the lecture there you go so the next thing",
    "start": "1019240",
    "end": "1027280"
  },
  {
    "text": "we want to talk about are defaults and I titled this defaults are an attacker's best friend which is a little bit of a",
    "start": "1027280",
    "end": "1033678"
  },
  {
    "text": "provocative title maybe some defaults are an attacker's best friend but some certainly are before we understand that",
    "start": "1033679",
    "end": "1039959"
  },
  {
    "text": "we need to talk about why defaults exist and different csps have a different",
    "start": "1039959",
    "end": "1045360"
  },
  {
    "text": "approach to that particular question the Azure G c p approach to a default is",
    "start": "1045360",
    "end": "1050960"
  },
  {
    "text": "this is a prefab construct that you should absolutely use you should select the right one attach it to your Scopes",
    "start": "1050960",
    "end": "1057480"
  },
  {
    "text": "use it with your identities and go forward and be successful AWS approach",
    "start": "1057480",
    "end": "1063400"
  },
  {
    "text": "is defaults at least in the I am space as a sort of starting point on a leas privilege Journey there are point that",
    "start": "1063400",
    "end": "1069640"
  },
  {
    "text": "you start from and then taper down into a more leas privilege situation whether",
    "start": "1069640",
    "end": "1075880"
  },
  {
    "text": "you take the first approach or the second approach when defaults are vulnerable then their inherent property",
    "start": "1075880",
    "end": "1082120"
  },
  {
    "text": "of being very very common makes for a dangerous cocktail what we're going to see in this section is a selection of I",
    "start": "1082120",
    "end": "1089200"
  },
  {
    "text": "am focused default risks that's not to say that there aren't a ton of nonim focused default risks but these are the",
    "start": "1089200",
    "end": "1095720"
  },
  {
    "text": "I am focused ones or a few of them so let's start with AWS AWS manage policies if you are not",
    "start": "1095720",
    "end": "1103400"
  },
  {
    "start": "1097000",
    "end": "1217000"
  },
  {
    "text": "familiar with AWS manag policies AWS manag policies are essentially Json policy documents",
    "start": "1103400",
    "end": "1109360"
  },
  {
    "text": "owned and managed by AWS which you can simply attach into your",
    "start": "1109360",
    "end": "1116480"
  },
  {
    "text": "identities the issue with that is that if we understand how Json policy documents work then we understand that",
    "start": "1116600",
    "end": "1123320"
  },
  {
    "text": "they have to be broad by definition because they have a resource field and the value of that resource field can",
    "start": "1123320",
    "end": "1129480"
  },
  {
    "text": "only be a wild card whether that's a FSE star or a path with some starts this is",
    "start": "1129480",
    "end": "1134919"
  },
  {
    "text": "because AWS owns the documents and they cannot possibly know the names of your resources in your",
    "start": "1134919",
    "end": "1141880"
  },
  {
    "text": "accounts Translating that into a few famously common managed policies that",
    "start": "1141880",
    "end": "1147240"
  },
  {
    "text": "sometimes create vulnerabilities which are quite common we have readon access sounds pretty innocent right you should",
    "start": "1147240",
    "end": "1153919"
  },
  {
    "text": "be using view only access and not readon access as readon access gives data",
    "start": "1153919",
    "end": "1159000"
  },
  {
    "text": "Access Data access to S3 buckets data access to St storage services so a",
    "start": "1159000",
    "end": "1164240"
  },
  {
    "text": "common permission used by some third party vendors which is quite dangerous cloud Trail read only access again you",
    "start": "1164240",
    "end": "1170200"
  },
  {
    "text": "might be deploying this not really experts on AWS in using this manage policy but again once we understand the",
    "start": "1170200",
    "end": "1177200"
  },
  {
    "text": "internal mechanizations of a managed policy we understand why this can't work AWS doesn't know the name of my cloud",
    "start": "1177200",
    "end": "1184440"
  },
  {
    "text": "trail bucket so they can only possibly put a wildcarded expression in there",
    "start": "1184440",
    "end": "1189559"
  },
  {
    "text": "which means that it grants S3 get object on every resource in the account you can get every object in the account as long",
    "start": "1189559",
    "end": "1196600"
  },
  {
    "text": "as you know the path so again understanding the underlying construction stops us from getting Lost",
    "start": "1196600",
    "end": "1201960"
  },
  {
    "text": "in Translation and exposes these default risks same goes for pass assigning other",
    "start": "1201960",
    "end": "1207240"
  },
  {
    "text": "roles or managed identities permission modifiers or assume roles all of which can lead into direct privilege",
    "start": "1207240",
    "end": "1213400"
  },
  {
    "text": "escalations because they're not least privileged scoped down moving on to",
    "start": "1213400",
    "end": "1218640"
  },
  {
    "start": "1217000",
    "end": "1411000"
  },
  {
    "text": "Azure so the first thing about Azure is I think Azure really believes in the sort of default role approach it can",
    "start": "1218640",
    "end": "1225200"
  },
  {
    "text": "sometimes be difficult to select the right one but we see this in the rooll limitation right Azure has a custom roll",
    "start": "1225200",
    "end": "1231720"
  },
  {
    "text": "mechanism you can use it but you're limited to 5,000 per directory so as a fully-fledged Enterprise strategy it's",
    "start": "1231720",
    "end": "1238720"
  },
  {
    "text": "quite it can be quite difficult to support and attackers in Azure can leverage read permissions and the",
    "start": "1238720",
    "end": "1245200"
  },
  {
    "text": "assignment permissions that eagle talked about in order to use these default uh permissions when they're not properly",
    "start": "1245200",
    "end": "1251520"
  },
  {
    "text": "scoped to exfiltrate data and escalate privileges the next thing we're going to talk about from an Azure standpoint is",
    "start": "1251520",
    "end": "1258280"
  },
  {
    "text": "access ACC Keys which are an IM bypass that is essentially created by default by many storage Services let's take a",
    "start": "1258280",
    "end": "1265200"
  },
  {
    "text": "deeper dive in to that so I created this storage account uh and immediately",
    "start": "1265200",
    "end": "1271240"
  },
  {
    "text": "without me doing anything it created these two access Keys what are access keys well they do basically what it says",
    "start": "1271240",
    "end": "1277400"
  },
  {
    "text": "on the tin right they're a pair of permanent credentials that you're supposed to rotate with which you canot",
    "start": "1277400",
    "end": "1283440"
  },
  {
    "text": "only access read like do have read access to data with a bypass to the",
    "start": "1283440",
    "end": "1289240"
  },
  {
    "text": "entire IM system like just directly using these credentials you can also have management and right access to data",
    "start": "1289240",
    "end": "1295080"
  },
  {
    "text": "so this gives quite a quite uh large control of storage accounts and the same",
    "start": "1295080",
    "end": "1300520"
  },
  {
    "text": "goes for cha for uh sorry for Cosmos DB same goes for uh for red is same goes",
    "start": "1300520",
    "end": "1306679"
  },
  {
    "text": "for a bunch of other St storage Services now if you look at the image at the",
    "start": "1306679",
    "end": "1311760"
  },
  {
    "text": "bottom they do give you this like check box to tick it off to disable it and they say well disable at your own risk",
    "start": "1311760",
    "end": "1318960"
  },
  {
    "text": "right because he might be breaking your system and disabling all your access and then if you go into the Azure docks they",
    "start": "1318960",
    "end": "1324240"
  },
  {
    "text": "give you a handy idea for how to fix this which is we have this metric for",
    "start": "1324240",
    "end": "1329559"
  },
  {
    "text": "transactions under specific authentication here I put SAS and and access keys and you can see how many",
    "start": "1329559",
    "end": "1336520"
  },
  {
    "text": "access Keys uh how many times access keys were used sounds perfect turn on the metric look for a flat like make",
    "start": "1336520",
    "end": "1343720"
  },
  {
    "text": "make everybody stop using access keys look for a flatline turn on the toggle whenn when whenn the problem with that",
    "start": "1343720",
    "end": "1351120"
  },
  {
    "text": "is that I just created this bucket and I never used the access keys",
    "start": "1351120",
    "end": "1358240"
  },
  {
    "text": "I just clicked clicked clicked I never even clicked show on the access keys I don't have the access keys and yet we",
    "start": "1358240",
    "end": "1364279"
  },
  {
    "text": "have access to this the reason this is happening is probably to our best",
    "start": "1364279",
    "end": "1369600"
  },
  {
    "text": "estimation because Azure is using these access Keys internally to access your",
    "start": "1369600",
    "end": "1374679"
  },
  {
    "text": "data like for portal display for example and other mechanism like the portal does break a little if you disable them and",
    "start": "1374679",
    "end": "1381960"
  },
  {
    "text": "so and by the way when I showed this to e said maybe it's just the creation right it's just like the bump for creation no it lasts all the way uh uh",
    "start": "1381960",
    "end": "1389960"
  },
  {
    "text": "throughout and the issue with that is that they they're an ion bypass that's very hard for Defenders to notice and",
    "start": "1389960",
    "end": "1397799"
  },
  {
    "text": "it's quite hard to disable you can do a deeper dive into the a into into the logs and look for all the activity and",
    "start": "1397799",
    "end": "1404000"
  },
  {
    "text": "sort of like find whether your users are doing activity but it's much more complex than an easy",
    "start": "1404000",
    "end": "1411039"
  },
  {
    "start": "1411000",
    "end": "1521000"
  },
  {
    "text": "fix now on to gcp so gcp has a sort of Legacy concept from the olden days",
    "start": "1411039",
    "end": "1417320"
  },
  {
    "text": "called basic roles which is still quite prolific basic roles viewer editor and",
    "start": "1417320",
    "end": "1424279"
  },
  {
    "text": "owner uh we focused in on the first two uh have strong and Broad permissions how",
    "start": "1424279",
    "end": "1430080"
  },
  {
    "text": "broad like you see the fancy numbers here on the right right but they're basically for all of the cloud platform",
    "start": "1430080",
    "end": "1435799"
  },
  {
    "text": "viewer is uh sounds again innocent sounds like view only sounds like",
    "start": "1435799",
    "end": "1440840"
  },
  {
    "text": "metadata no viewer lets you query big query like for example viewer gives you",
    "start": "1440840",
    "end": "1446480"
  },
  {
    "text": "very uh significant data access uh editor basically is like a power user permission that that you can escalate uh",
    "start": "1446480",
    "end": "1453320"
  },
  {
    "text": "to admin if you're crafty and want to enough uh and the way they scope it down",
    "start": "1453320",
    "end": "1459320"
  },
  {
    "text": "in in uh the compute engine in GCE is another older mechanism called AIS",
    "start": "1459320",
    "end": "1465279"
  },
  {
    "text": "Scopes which is the name is a little maybe like to me name was a little confusing because it's not about scoping",
    "start": "1465279",
    "end": "1470840"
  },
  {
    "text": "down to resources it's about scoping down to apis it's about scoping down to services so you uh take these uh axis",
    "start": "1470840",
    "end": "1479159"
  },
  {
    "text": "Scopes you just select out of the list that Google has you take these axis Scopes you attach them to the basic role",
    "start": "1479159",
    "end": "1484840"
  },
  {
    "text": "and the sort of intersection of those permissions creates a permission map the third thing that's important to know is",
    "start": "1484840",
    "end": "1491000"
  },
  {
    "text": "default service accounts whenever you turn on a service in gcp uh unless you've disabled this Behavior a default",
    "start": "1491000",
    "end": "1498640"
  },
  {
    "text": "service account is created and the thing is for many services the permissions that that default service has account",
    "start": "1498640",
    "end": "1505279"
  },
  {
    "text": "has is those same basic roles viewer editor usually editor uh or at least for",
    "start": "1505279",
    "end": "1511600"
  },
  {
    "text": "compute engine it's editor uh are those basic roles so the totality of this",
    "start": "1511600",
    "end": "1517640"
  },
  {
    "text": "brings us to another kind of danger Dangerous combination which is if I",
    "start": "1517640",
    "end": "1522720"
  },
  {
    "start": "1521000",
    "end": "1571000"
  },
  {
    "text": "started a computer engine machine I got the default service account because I just clicked through um uh that meant I",
    "start": "1522720",
    "end": "1529320"
  },
  {
    "text": "got the default editor role because no one edited the permissions for the default service account which by the way",
    "start": "1529320",
    "end": "1535039"
  },
  {
    "text": "you can and should do and someone gave it the cloud platform access scope this",
    "start": "1535039",
    "end": "1540799"
  },
  {
    "text": "is like a mistake that someone needs to make right the default access scope is cool it only lets you like write some",
    "start": "1540799",
    "end": "1546360"
  },
  {
    "text": "logs and do some viewon and it's it's all right but if you want the machine to",
    "start": "1546360",
    "end": "1551520"
  },
  {
    "text": "actually do something then the sort of Doc's way of getting you through that process without giving you an entire IM",
    "start": "1551520",
    "end": "1557559"
  },
  {
    "text": "course is they tell you put the cloud platform scope Cloud platform scope is virtually everything it's very very",
    "start": "1557559",
    "end": "1563840"
  },
  {
    "text": "Broad and so if you have the cloud platform scope that's a pesque to project admin and it's quite dangerous",
    "start": "1563840",
    "end": "1571320"
  },
  {
    "start": "1571000",
    "end": "1790000"
  },
  {
    "text": "not even to mention like if this machine happens to be public or happens to have leaked keys or happens to be vulnerable",
    "start": "1571320",
    "end": "1577440"
  },
  {
    "text": "or there happens to be a way of running code in this machine in which case it's like a full account takeover vector and",
    "start": "1577440",
    "end": "1583480"
  },
  {
    "text": "not just a a PE risk in the environment next thing we're going to talk about is",
    "start": "1583480",
    "end": "1588640"
  },
  {
    "text": "logs and specifically that logs have limits now logs are awesome logs are incredible and they are probably better",
    "start": "1588640",
    "end": "1595720"
  },
  {
    "text": "than they ever were in the cloud this is not like to take like to throw dirt at at Cloud logging which is quite good but",
    "start": "1595720",
    "end": "1603720"
  },
  {
    "text": "especially because it's good and we learn to rely on it we need to understand its limits and be able to",
    "start": "1603720",
    "end": "1609840"
  },
  {
    "text": "contextualize them correctly why is that because we use logging both obviously to know what's going on do detection do",
    "start": "1609840",
    "end": "1616919"
  },
  {
    "text": "incidental response and that's not so much the topic of this talk but it's incredibly important and you all like",
    "start": "1616919",
    "end": "1622000"
  },
  {
    "text": "live this and know this the second reason we use logging is actually to build better permissions because in",
    "start": "1622000",
    "end": "1627520"
  },
  {
    "text": "order to know whether I can take permissions away from someone what I would usually do is try to examine the",
    "start": "1627520",
    "end": "1634000"
  },
  {
    "text": "logs and see what they're actually using right a sort of use it or lose it philosophy and if logs have limits then",
    "start": "1634000",
    "end": "1641520"
  },
  {
    "text": "I can't be sure enough that I can freely remove and that leads to permission sprawl uh broadly also so attackers can",
    "start": "1641520",
    "end": "1648960"
  },
  {
    "text": "hide behind unlogged apis opaque apis log manipulation distributed logging",
    "start": "1648960",
    "end": "1654000"
  },
  {
    "text": "we're going to dive into that from vendor from a cloud uh service provider specific perspective last piece of like",
    "start": "1654000",
    "end": "1661720"
  },
  {
    "text": "advice is log whatever you can but then there's the parenthesis right log whatever you can afford to because some",
    "start": "1661720",
    "end": "1668880"
  },
  {
    "text": "some logging for like data actions or data plane actions uh some uh some uh users or some uh organizations find",
    "start": "1668880",
    "end": "1676080"
  },
  {
    "text": "prohibitively expensive and that's perfectly understandable and at the end it's a risk cost calculation that we're",
    "start": "1676080",
    "end": "1682200"
  },
  {
    "text": "all forced to make AWS so a few like logs have limits points in AWS there has",
    "start": "1682200",
    "end": "1689120"
  },
  {
    "text": "been a long known uh passive reconnaissance technique for AWS for role enumeration if you're not familiar",
    "start": "1689120",
    "end": "1695559"
  },
  {
    "text": "uh with it uh then absolutely uh look it up but basically you can save IM policies with a role and they don't",
    "start": "1695559",
    "end": "1701799"
  },
  {
    "text": "agree to save if the role isn't real so you can sort of do a brew Force enumeration on roles and targets account",
    "start": "1701799",
    "end": "1708240"
  },
  {
    "text": "and this has been known for a while uh dat actions again because dat action logging is quite expensive uh sometimes",
    "start": "1708240",
    "end": "1714240"
  },
  {
    "text": "it's not turned on and then that can be leveraged to retrieve data uh cloud trail manipulation so AWS has a really",
    "start": "1714240",
    "end": "1720799"
  },
  {
    "text": "cool thing which is the cloud trail digest right it does like a hash check some digest on the cloud trail logs to",
    "start": "1720799",
    "end": "1728279"
  },
  {
    "text": "show that nobody has manipulated them but let's go back to the shared responsibility model whose",
    "start": "1728279",
    "end": "1734279"
  },
  {
    "text": "responsibility is it to check the digest that's right me you us who actually checks the digest the",
    "start": "1734279",
    "end": "1742159"
  },
  {
    "text": "question is not a lot of people check the digest so an attacker can often go manipulate the digest remove events they",
    "start": "1742159",
    "end": "1749000"
  },
  {
    "text": "don't like by overriding if they've already like done a PE that's strong enough right have to do it and uh and",
    "start": "1749000",
    "end": "1754960"
  },
  {
    "text": "manipulate cloud trail in some scenarios last thing I heard after we constructed this presentation at a conference two",
    "start": "1754960",
    "end": "1760720"
  },
  {
    "text": "weeks ago uh research by cat Traxler from Vectra I have the link here definitely look it up you can use S3",
    "start": "1760720",
    "end": "1767039"
  },
  {
    "text": "replication to do a cross account data exfiltration uh which isn't logged at the source account so you can just leak",
    "start": "1767039",
    "end": "1773039"
  },
  {
    "text": "out S3 data under certain conditions like there have to already bs3 replications about the number of Destin",
    "start": "1773039",
    "end": "1779760"
  },
  {
    "text": "destinations won't go deep into that but again these vectors for unlock data replication are quite or unlock data",
    "start": "1779760",
    "end": "1787399"
  },
  {
    "text": "exfiltration are important uh in AWS in Azure so if you are familiar with the",
    "start": "1787399",
    "end": "1793720"
  },
  {
    "start": "1790000",
    "end": "1836000"
  },
  {
    "text": "sort of azure approach to logging there's a central activity log which most mostly only contains manage",
    "start": "1793720",
    "end": "1799720"
  },
  {
    "text": "policies the other logs are distributed they're managed by each service you sort of have to control which storage",
    "start": "1799720",
    "end": "1805880"
  },
  {
    "text": "accounts they go to and gather it from them there are Azure internal ways to like make this entire Orchestra play",
    "start": "1805880",
    "end": "1812480"
  },
  {
    "text": "together but it's not out of the box in a way that like gcp and and AWS are and",
    "start": "1812480",
    "end": "1820600"
  },
  {
    "text": "read actions are not logged to that Central activity log which means they're very very often um missed secondly that",
    "start": "1820600",
    "end": "1828200"
  },
  {
    "text": "issue of distributed logging again makes logs have limits and makes logging more difficult in that particular",
    "start": "1828200",
    "end": "1836760"
  },
  {
    "start": "1836000",
    "end": "1881000"
  },
  {
    "text": "context sorry the multicloud conclusion for this",
    "start": "1836919",
    "end": "1844080"
  },
  {
    "text": "whether you're already multicloud or considering multicloud or deciding to go multicloud or managing multicloud is",
    "start": "1844080",
    "end": "1850720"
  },
  {
    "text": "that multiple Lo clouds multiply both log dispersal and the amount of",
    "start": "1850720",
    "end": "1855760"
  },
  {
    "text": "languages that you have to process logs in because all of this has de different schemas all of this has different",
    "start": "1855760",
    "end": "1861880"
  },
  {
    "text": "abstractions all of this has different meanings and there's no onetoone translation unfortunately there's no",
    "start": "1861880",
    "end": "1868120"
  },
  {
    "text": "magic solution I can offer on this stage to make everything magically better uh but this is an important thing to be",
    "start": "1868120",
    "end": "1874600"
  },
  {
    "text": "aware of both when managing an environment and when making decisions and considerations",
    "start": "1874600",
    "end": "1880799"
  },
  {
    "text": "strategically so this has been this up until now has been the well I I I I",
    "start": "1880799",
    "end": "1886120"
  },
  {
    "start": "1881000",
    "end": "1910000"
  },
  {
    "text": "think a lot a lot of uh some of it has been like the classic black ad of oo things are scary be",
    "start": "1886120",
    "end": "1893679"
  },
  {
    "text": "afraid but then what can we actually do what can we do practically to make",
    "start": "1893679",
    "end": "1899080"
  },
  {
    "text": "things uh better uh for our organizations and for our Defenders I'm going to bring up two points here one is",
    "start": "1899080",
    "end": "1905559"
  },
  {
    "text": "pretty practical and the other is a little more philosophical but bear with me the first thing is try to limit the",
    "start": "1905559",
    "end": "1911320"
  },
  {
    "start": "1910000",
    "end": "2038000"
  },
  {
    "text": "effect of mistakes because IM systems in all three of the vendors we discussed",
    "start": "1911320",
    "end": "1916440"
  },
  {
    "text": "today are complex and they're complex in different ways they're complex to different degrees but all of them are",
    "start": "1916440",
    "end": "1921760"
  },
  {
    "text": "complex and we find that organizations will make mistakes and so one of the",
    "start": "1921760",
    "end": "1927080"
  },
  {
    "text": "most important things is limiting the effect that a mistake can have one of the things that can that that that can",
    "start": "1927080",
    "end": "1933880"
  },
  {
    "text": "do that is sticking to one AWS account or gcp project or Azure Resource Group",
    "start": "1933880",
    "end": "1939240"
  },
  {
    "text": "per workload but again don't get lost in translation why an AWS account is a",
    "start": "1939240",
    "end": "1944919"
  },
  {
    "text": "strong security boundary relatively speaking you can only do account actions under specific precondition you have to",
    "start": "1944919",
    "end": "1950840"
  },
  {
    "text": "have bilateral permission etc etc etc an Azure Resource Group is only as strong",
    "start": "1950840",
    "end": "1956240"
  },
  {
    "text": "as a security boundary as you make it if you went to the higher organizational units we saw in the resource map earlier",
    "start": "1956240",
    "end": "1963200"
  },
  {
    "text": "like the subscription or the or the organization and you gave permissions then your resource Group is not a",
    "start": "1963200",
    "end": "1969399"
  },
  {
    "text": "security boundary so understand when there when that's a security boundary and when not and try to apply it in a",
    "start": "1969399",
    "end": "1975519"
  },
  {
    "text": "way which actually limits mistakes deploy organizational policies to limit mistakes so these are different in every",
    "start": "1975519",
    "end": "1981399"
  },
  {
    "text": "cloud and Azure you can do something like organization wide policies or deny assignments on the all principles",
    "start": "1981399",
    "end": "1987799"
  },
  {
    "text": "principle in gcp you can use organizational policies in uh AWS the classic way is service control policies",
    "start": "1987799",
    "end": "1994519"
  },
  {
    "text": "or scps a few examples of things that people like to do which we think are good practice in AWS deny access to the",
    "start": "1994519",
    "end": "2002159"
  },
  {
    "text": "root account deny cloud trail delete Trail which is like the first step of evasion no more logging uh now we can do",
    "start": "2002159",
    "end": "2009200"
  },
  {
    "text": "uh whatever or in or in uh gcp we just talked earlier about the default service",
    "start": "2009200",
    "end": "2014360"
  },
  {
    "text": "account plus basic role issue you can actually disable I am. automatic I am",
    "start": "2014360",
    "end": "2019440"
  },
  {
    "text": "grants for default service accounts which disables that exact uh Behavior so",
    "start": "2019440",
    "end": "2025679"
  },
  {
    "text": "you can protect yourself organizationally of course avoid permanent credentials and secure human",
    "start": "2025679",
    "end": "2031519"
  },
  {
    "text": "identities in as much as you can because those are the primary entry vectors into",
    "start": "2031519",
    "end": "2037360"
  },
  {
    "text": "any environment second point which said before more philosophical is about how do we build permissions and building",
    "start": "2037360",
    "end": "2044159"
  },
  {
    "start": "2038000",
    "end": "2157000"
  },
  {
    "text": "permissions is like sculpting you can do it like clay or you can do it like marble you can do it constructively",
    "start": "2044159",
    "end": "2049358"
  },
  {
    "text": "building block onto block onto block onto block until you have something functional that does what you need or",
    "start": "2049359",
    "end": "2054839"
  },
  {
    "text": "you can do it like marble you can take a big hunk of permissions and kind of chisel away at it until you have a form",
    "start": "2054839",
    "end": "2060118"
  },
  {
    "text": "vaguely resembling least privilege and Clay building is something that I think",
    "start": "2060119",
    "end": "2065280"
  },
  {
    "text": "security teams like and developers hate right because I don't know yet what permissions I need and I'm not the IM am",
    "start": "2065280",
    "end": "2072118"
  },
  {
    "text": "expert so I can't tell you exactly which permissions I need and so the challenge of that is knowing exactly what you need",
    "start": "2072119",
    "end": "2077679"
  },
  {
    "text": "and the risk is dysfunctionality lack of flexibility reduced velocity so all of",
    "start": "2077679",
    "end": "2082960"
  },
  {
    "text": "these are the reasons to not do that marble the challenge is to prove a negative just like we talked before when",
    "start": "2082960",
    "end": "2088638"
  },
  {
    "text": "we were talking about the limitations of logs you need to be absolutely sure that someone doesn't need a permission before",
    "start": "2088639",
    "end": "2094520"
  },
  {
    "text": "you remove it otherwise you will make a lot of people very upset but the risk of that is that you end up",
    "start": "2094520",
    "end": "2100960"
  },
  {
    "text": "being over permissive and in fact the sort of thing we find most common in actual practice is people take the big",
    "start": "2100960",
    "end": "2107119"
  },
  {
    "text": "hunk of marble kind of Promise themselves to Chisel away at it someday and then never actually do or at least",
    "start": "2107119",
    "end": "2114720"
  },
  {
    "text": "don't in the really painful and substantial areas like the pass roll the act as the assignment permissions you",
    "start": "2114720",
    "end": "2120240"
  },
  {
    "text": "know the places where priv escalation or or or all these permissions that ego showed before that actually hurt you our",
    "start": "2120240",
    "end": "2126960"
  },
  {
    "text": "recommendation is kind of boring here which is a hybrid approach try to not Place hunks of marble that are too large",
    "start": "2126960",
    "end": "2134160"
  },
  {
    "text": "like don't start from the biggest power user permission you can get from that service try to place smaller blocks and",
    "start": "2134160",
    "end": "2140160"
  },
  {
    "text": "then chisel away at them because then if you didn't get to Chisel at least you don't have a a larger danger looming",
    "start": "2140160",
    "end": "2148280"
  },
  {
    "text": "over you and also you are controlled uh for uh for mistakes and you are uh yeah",
    "start": "2148280",
    "end": "2157520"
  },
  {
    "start": "2157000",
    "end": "2282000"
  },
  {
    "text": "uh uh and and to and and sort of in line with that and to make the sort of clay sculpting or hybrid sculpting process",
    "start": "2157520",
    "end": "2164000"
  },
  {
    "text": "easier we built a tool called access undenied on AWS it's an AWS tool as the name implies and it came from the issue",
    "start": "2164000",
    "end": "2172359"
  },
  {
    "text": "that some deny messages are not detailed actually AWS has gotten much better with it uh to begin with a year ago none of",
    "start": "2172359",
    "end": "2179440"
  },
  {
    "text": "them were detailed now some of them are significantly more detailed but still none are fully detailed for security",
    "start": "2179440",
    "end": "2185040"
  },
  {
    "text": "reasons uh and so if you don't know what you're getting a deny then a you're very frustrated but B you don't necessarily",
    "start": "2185040",
    "end": "2192319"
  },
  {
    "text": "know what permission to add and what that leads to his permission sprawl because under the pressure of usability",
    "start": "2192319",
    "end": "2199400"
  },
  {
    "text": "again you add a big hunk of marble it works and now not only does it work you're you're kind of afraid to touch it",
    "start": "2199400",
    "end": "2206760"
  },
  {
    "text": "right because it didn't work before and now you did the thing and now it works and so and so and so that's exactly how",
    "start": "2206760",
    "end": "2213720"
  },
  {
    "text": "permission sprawl happens you do something then it becomes the thing that works and then you don't touch it",
    "start": "2213720",
    "end": "2219079"
  },
  {
    "text": "anymore so what access undenied does is it scans the whole permission landscape it scans the scps the permission",
    "start": "2219079",
    "end": "2224680"
  },
  {
    "text": "boundaries the identity policies the resource policies then it runs a permission simulation to tell you whether it should work or not and scans",
    "start": "2224680",
    "end": "2231400"
  },
  {
    "text": "the policies to tell you what sort of statement is the one causing the deny or what statement do you need to have an",
    "start": "2231400",
    "end": "2237880"
  },
  {
    "text": "allow and we're going to have have a have a demo uh before that the demo",
    "start": "2237880",
    "end": "2243160"
  },
  {
    "text": "starts from already having the cloud trail event there are reasons why we did it uh uh uh This Way namely that when",
    "start": "2243160",
    "end": "2250839"
  },
  {
    "text": "things are happening from service sources or not from your particular machine then cloud trail is the only",
    "start": "2250839",
    "end": "2256520"
  },
  {
    "text": "centralized location you where you can see all right not all but the most of",
    "start": "2256520",
    "end": "2261920"
  },
  {
    "text": "the things that have happened uh so imagine that we already ran S3 list bucket we tried to list the objects in a",
    "start": "2261920",
    "end": "2268560"
  },
  {
    "text": "bucket we got this access denied message and now we are going to run the tool so",
    "start": "2268560",
    "end": "2274960"
  },
  {
    "text": "I apologize for the text size but I will do my best you know football commentator",
    "start": "2274960",
    "end": "2280000"
  },
  {
    "text": "narration uh effort so we start with the cloud trail event that we saved into a",
    "start": "2280000",
    "end": "2285040"
  },
  {
    "start": "2282000",
    "end": "2379000"
  },
  {
    "text": "Json file it's called access denied cloud trail event so let's look at that file uh see what there is in it if you",
    "start": "2285040",
    "end": "2292240"
  },
  {
    "text": "are not like versed in the sort of arcan of of cloud trail events it says",
    "start": "2292240",
    "end": "2297800"
  },
  {
    "text": "access denied and not much else it says the source account the action but not y AIS was denied so now let's look at",
    "start": "2297800",
    "end": "2304839"
  },
  {
    "text": "running the tool before that let's look at the sort of commands that are available we have two commands one is",
    "start": "2304839",
    "end": "2310760"
  },
  {
    "text": "called analyze it does the works it analyzes the cloud trail event tells you y AIS was denied another one that's",
    "start": "2310760",
    "end": "2317640"
  },
  {
    "text": "really helpful is get scps it just downloads the service control policies so that it doesn't have to do it every",
    "start": "2317640",
    "end": "2323720"
  },
  {
    "text": "time again and again and again because it's quite a heavy burden in terms of apis so now we ran an analysis here to",
    "start": "2323720",
    "end": "2330240"
  },
  {
    "text": "make it quick for the demo I ran it without uh service control policy so you're going to see the little warning there it is and we have the the response",
    "start": "2330240",
    "end": "2338520"
  },
  {
    "text": "so basically under assessment result we have it's a missing allow and an identity based policies so we don't have",
    "start": "2338520",
    "end": "2344720"
  },
  {
    "text": "a deny we're just missing an allow and then we have where we need to attach a new policy that's RNA AWS IM account ID",
    "start": "2344720",
    "end": "2353480"
  },
  {
    "text": "see I I got the account ID scrubbed because I know some of yall are have plans uh uh and uh and then uh the",
    "start": "2353480",
    "end": "2361680"
  },
  {
    "text": "policy that we need to add which is allow S3 list bucket and uh do it for",
    "start": "2361680",
    "end": "2367200"
  },
  {
    "text": "this this particular bucket so now you can add the least privilege policy and avoid the kind of sprawl that happens",
    "start": "2367200",
    "end": "2372760"
  },
  {
    "text": "this was a very simple example uh but it also works in complicated cases",
    "start": "2372760",
    "end": "2378440"
  },
  {
    "text": "right uh that's just one tool I think there's an incredible world world of tooling uh uh these are mostly the IM",
    "start": "2378440",
    "end": "2385319"
  },
  {
    "start": "2379000",
    "end": "2457000"
  },
  {
    "text": "Tools around AWS the reason they're AWS Centric is because both the power and",
    "start": "2385319",
    "end": "2392280"
  },
  {
    "text": "complexity of AWS IM I think invited this concentrated Community effort to",
    "start": "2392280",
    "end": "2397800"
  },
  {
    "text": "make an open- Source uh uh stab at this issue I think spaces like Azure have",
    "start": "2397800",
    "end": "2402839"
  },
  {
    "text": "incredible tools for like pen testing or red teaming or or or or active directory",
    "start": "2402839",
    "end": "2409240"
  },
  {
    "text": "uh but not particularly Tools in this space so uh policy Sentry lets you sculpt out of play by specifying your",
    "start": "2409240",
    "end": "2415480"
  },
  {
    "text": "policies and crud IM live monitors what apis are running on your machine and",
    "start": "2415480",
    "end": "2420880"
  },
  {
    "text": "does uh a similar thing which is tell you the least privileged policies you need to add and there's a bunch of tools",
    "start": "2420880",
    "end": "2427160"
  },
  {
    "text": "that scan your cloud trail in your environment and tell you which policies are safe to remove because they haven't",
    "start": "2427160",
    "end": "2432960"
  },
  {
    "text": "been used like Cloud tracker repo kid and a bunch of privileg escalation tools which are the rest of the ones in there",
    "start": "2432960",
    "end": "2439280"
  },
  {
    "text": "and without without any further Ado uh we're happy to take questions thank you so much for listening",
    "start": "2439280",
    "end": "2446960"
  },
  {
    "text": "[Music]",
    "start": "2448820",
    "end": "2451929"
  },
  {
    "text": "[Music]",
    "start": "2455770",
    "end": "2458860"
  }
]