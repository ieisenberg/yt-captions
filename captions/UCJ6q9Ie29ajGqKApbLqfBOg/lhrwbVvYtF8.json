[
  {
    "text": "conference and produced by the sound of knowledge [Music]",
    "start": "199",
    "end": "21489"
  },
  {
    "text": "Incorporated directory and windows 200000 Kerberos and uh later on the next track",
    "start": "21680",
    "end": "27880"
  },
  {
    "text": "we're actually going to talk about encrypted file systems I know the web page actually said distributed file systems but that was kind of a typo",
    "start": "27880",
    "end": "34079"
  },
  {
    "text": "between D and E I hope that's not too much of a problem um mostly what this",
    "start": "34079",
    "end": "39200"
  },
  {
    "text": "talk is going to be focused on is Kerberos and how it integrates into Windows 2000 or in active directory into",
    "start": "39200",
    "end": "44399"
  },
  {
    "text": "Windows 2000 and also some of the interoperability issues between Unix and",
    "start": "44399",
    "end": "49480"
  },
  {
    "text": "Windows 2000 so we're going to start out with",
    "start": "49480",
    "end": "55920"
  },
  {
    "text": "what is Windows 2000 keros how does it work what makes it up and how is it different from",
    "start": "55920",
    "end": "61600"
  },
  {
    "text": "ntlm um we're going to make a comparison between Windows 2000 keros versus MIT",
    "start": "61600",
    "end": "67280"
  },
  {
    "text": "ceros that Unix uses we're going to talk about delegation and client authentication and we're going to talk",
    "start": "67280",
    "end": "73880"
  },
  {
    "text": "about um a tool that JD has been work um a tool that's available called it's a",
    "start": "73880",
    "end": "79200"
  },
  {
    "text": "native Windows 2000 keros netcat and also a tool that JD has been working on a keros tel neck client and server for",
    "start": "79200",
    "end": "86840"
  },
  {
    "text": "Windows what we hope to get from this is to gain",
    "start": "86840",
    "end": "91920"
  },
  {
    "text": "an understanding of keros so that everybody will implement it Windows 2000 ntlm as everybody knows is insecure",
    "start": "91920",
    "end": "99759"
  },
  {
    "text": "that's just the way it goes I mean if there's been one complaint about Windows is forever it's ntlm we would like to",
    "start": "99759",
    "end": "105880"
  },
  {
    "text": "see everybody moving off of that platform onto Windows 2000 using Cerros it is really quite a nice product and it",
    "start": "105880",
    "end": "113640"
  },
  {
    "text": "works really well um we want to reduce older prod protocol dependencies nlm even ntlm vers version two it's really",
    "start": "113640",
    "end": "121119"
  },
  {
    "text": "not necessary we want to get a sense of new traffic patterns and we basically just want to get a good understanding of what",
    "start": "121119",
    "end": "127479"
  },
  {
    "text": "Microsoft has done to implement Kerberos you want to",
    "start": "127479",
    "end": "134120"
  },
  {
    "text": "start okay um so when keros um several years ago MIT um came",
    "start": "134120",
    "end": "142200"
  },
  {
    "text": "up with keros now it is it version five it's an open standard it has rfc's it is the internet standard for ticketing",
    "start": "142200",
    "end": "149480"
  },
  {
    "text": "system um and in Windows 2000 in Native mode it is the default authentication",
    "start": "149480",
    "end": "155680"
  },
  {
    "text": "method um it was you will still use ntlm for several things and I think we're going to talk about a couple of those",
    "start": "155680",
    "end": "162239"
  },
  {
    "text": "and it's used for if you're using an old nt4 clients or if you're using Windows 9895 Windows 31 landman all those old",
    "start": "162239",
    "end": "170440"
  },
  {
    "text": "clients um it's really really weak as anybody who's ever used lock crack on",
    "start": "170440",
    "end": "175680"
  },
  {
    "text": "their machines has shown",
    "start": "175680",
    "end": "179560"
  },
  {
    "text": "um how's it different from ntlm ntlm uh or anti- landman authentication if",
    "start": "181120",
    "end": "186480"
  },
  {
    "text": "anybody's not familiar with ntlm um uses a password hash system and it actually it creates a hash sends it",
    "start": "186480",
    "end": "194159"
  },
  {
    "text": "across the wire and sends it to the next machine which is very easy to sniff you",
    "start": "194159",
    "end": "199280"
  },
  {
    "text": "pull the password off you run Loft crack against the hash and you've got the user's password it requires a fewer",
    "start": "199280",
    "end": "205560"
  },
  {
    "text": "authentication calls which means less opportunity for somebody to actually get a hold of the the authentication system",
    "start": "205560",
    "end": "212760"
  },
  {
    "text": "and it's also it makes it a little bit quicker a little less uh buggy it's definitely more sophisticated and it",
    "start": "212760",
    "end": "219159"
  },
  {
    "text": "actually is more complicated um is it more secure it's definitely more secure than ntlm it's in",
    "start": "219159",
    "end": "227319"
  },
  {
    "text": "pure mode that's what's known as native mode in Windows 2000 um nlm version 2 is strong in pure",
    "start": "227319",
    "end": "234200"
  },
  {
    "text": "mode um the only people that I ever use it are people who have only nt4 and I think it's P4 or something like that",
    "start": "234200",
    "end": "241319"
  },
  {
    "text": "environments um because you can't do with 198 which is the same problem with keros but this is a real solution ntlm",
    "start": "241319",
    "end": "248319"
  },
  {
    "text": "version 2 was kind of just a hack just to try to get us over the ntlm",
    "start": "248319",
    "end": "254439"
  },
  {
    "text": "barrier you",
    "start": "254879",
    "end": "258040"
  },
  {
    "text": "take hi my name is uh JD glosser um this is a definitely a break for me it's the",
    "start": "259880",
    "end": "266639"
  },
  {
    "text": "first time I haven't been trying to catch Greg in two years so um uh before I start before I get into",
    "start": "266639",
    "end": "272840"
  },
  {
    "text": "this um Moss want to talk about uh the Deep knowledge thing he said um uh if you're an experienc experienced keros",
    "start": "272840",
    "end": "279639"
  },
  {
    "text": "admin this talk probably won't do too much for you we're not going to get into um an incredible amount of uh like",
    "start": "279639",
    "end": "287160"
  },
  {
    "text": "ticket details and different things uh the reason for that is um based on the email I get",
    "start": "287160",
    "end": "293360"
  },
  {
    "text": "um I've created this presentation to address that issue so there's basically one point in this that I want to try and",
    "start": "293360",
    "end": "299759"
  },
  {
    "text": "get across for some of those who are trying to get their mind around keros um I'm new to it myself uh Microsoft",
    "start": "299759",
    "end": "306440"
  },
  {
    "text": "dropped this whole big thing on us and now we have to deal with it and understand it um so this just kind of",
    "start": "306440",
    "end": "312240"
  },
  {
    "text": "represents um my effort to work with it deal with it uh I hope it will be very",
    "start": "312240",
    "end": "317639"
  },
  {
    "text": "beneficial to some of you um we do have some new information that's going to be unique uh that I found um just on the",
    "start": "317639",
    "end": "325319"
  },
  {
    "text": "differences between ENT keros and Unix keros",
    "start": "325319",
    "end": "330759"
  },
  {
    "text": "um but if you're super proficient in keros uh just you know U feel free to you know",
    "start": "330759",
    "end": "339440"
  },
  {
    "text": "not be in the talk I I hope you won't be disappointed but there it",
    "start": "339440",
    "end": "344600"
  },
  {
    "text": "is okay Windows 2000 kerros is based on the RFC",
    "start": "345039",
    "end": "351080"
  },
  {
    "text": "wait okay sorry getting ahead of myself a bit here one of the first things with NT",
    "start": "351080",
    "end": "356880"
  },
  {
    "text": "ceros is it's tightly integrated with the n platform uh it's um welded into when log",
    "start": "356880",
    "end": "364400"
  },
  {
    "text": "on and the local security Authority server system it locates the KDC via VIA DNS um",
    "start": "364400",
    "end": "373199"
  },
  {
    "text": "Windows 2000 has made a heavy shift towards um using DNS natively uh it's required for",
    "start": "373199",
    "end": "379400"
  },
  {
    "text": "installation uh which is different than normal there's no support for dce style",
    "start": "379400",
    "end": "386520"
  },
  {
    "text": "cross realm trust that there is in Unix there's no raw um cose 5 API calls and",
    "start": "386520",
    "end": "393919"
  },
  {
    "text": "this is going to be pretty significant for developers it does support this new",
    "start": "393919",
    "end": "399080"
  },
  {
    "text": "thing called um uh the generic Security Service API and I haven't had a chance to test",
    "start": "399080",
    "end": "405880"
  },
  {
    "text": "it out yet but uh it should enable Linux clients to deal directly with",
    "start": "405880",
    "end": "411160"
  },
  {
    "text": "um anti Cerro servers another ENT difference is that",
    "start": "411160",
    "end": "416879"
  },
  {
    "text": "post-dated tickets are not yet implemented I don't yet know the ramification of that but I just make it noce a",
    "start": "416879",
    "end": "423160"
  },
  {
    "text": "difference also NT is making use of the um off data field inside of a ticket for where all the SIDS are going to",
    "start": "423160",
    "end": "431160"
  },
  {
    "text": "be all right Microsoft's version is based U pretty heavily on the RFC",
    "start": "438280",
    "end": "444599"
  },
  {
    "text": "1510 and the Cur Roos change password protocol",
    "start": "446680",
    "end": "451520"
  },
  {
    "text": "um do you have anything you want to say on the PK in",
    "start": "455000",
    "end": "460800"
  },
  {
    "text": "it okay other than I mean supporting PK in it means that it will be so it",
    "start": "461599",
    "end": "466759"
  },
  {
    "text": "supports PK which I don't know how many people actually Implement uh CER Roos on Unix but that's how kro sessions are",
    "start": "466759",
    "end": "472879"
  },
  {
    "text": "started on Unix so basically it help it's what um drives the interoperability with Unix",
    "start": "472879",
    "end": "479800"
  },
  {
    "text": "the main goal of this is essentially uh to have uh KERO clients inside of a",
    "start": "482479",
    "end": "487560"
  },
  {
    "text": "Windows 2000 domain as well as kerro servers",
    "start": "487560",
    "end": "492759"
  },
  {
    "text": "that I don't know I just wonder have idea guys can",
    "start": "492759",
    "end": "501120"
  },
  {
    "text": "okay",
    "start": "501639",
    "end": "504639"
  },
  {
    "text": "hello uh Standalone Windows 2000 system in a ceros realm uh when this is the",
    "start": "506840",
    "end": "512680"
  },
  {
    "text": "case we'll be defaulting back to ntlm and we're all right back to where we started um this is going to be like one",
    "start": "512680",
    "end": "519599"
  },
  {
    "text": "of the biggest issues because uh corporations just can't seem to get rid of Windows 98 uh for mobile users or for scanners",
    "start": "519599",
    "end": "527200"
  },
  {
    "text": "all different types of things you can use ceros as uh as",
    "start": "527200",
    "end": "533560"
  },
  {
    "text": "strictly as a resource domain which maps to um the old style Microsoft um resource domain as well as a simple",
    "start": "533560",
    "end": "540800"
  },
  {
    "text": "account domain however the big thing that we're all hoping for is uh ntid Unix um",
    "start": "540800",
    "end": "547440"
  },
  {
    "text": "integration will be smooth this is really important to me uh I imagine it is uh to all the rest",
    "start": "547440",
    "end": "554959"
  },
  {
    "text": "of you as well I have yet to see this though so I",
    "start": "554959",
    "end": "560040"
  },
  {
    "text": "don't know um as we'll talk about I we show in the class I mean they have gone through",
    "start": "560040",
    "end": "567079"
  },
  {
    "text": "many different scenarios of trying to make Unix inter well with this and like I said although I have never seen it the",
    "start": "567079",
    "end": "573279"
  },
  {
    "text": "technology is there and we'll be we'll be going over",
    "start": "573279",
    "end": "578120"
  },
  {
    "text": "that so based on the email I get um a lot of people you know they grab the documentation they try to run through",
    "start": "582560",
    "end": "588760"
  },
  {
    "text": "ceros and try and wrap their head around it so I thought I'd try and spend a little bit of time trying to explain it",
    "start": "588760",
    "end": "595160"
  },
  {
    "text": "and I tried to uh develop this animated system to show different key",
    "start": "595160",
    "end": "600760"
  },
  {
    "text": "exchanges basically Cabos it's a three-point entity system that grants",
    "start": "600760",
    "end": "607360"
  },
  {
    "text": "secure network authorization each entity is called a principal the main player is going to be",
    "start": "607360",
    "end": "613600"
  },
  {
    "text": "being uh KDC the client principle and the service",
    "start": "613600",
    "end": "619519"
  },
  {
    "text": "principal got some thoughts you want to um did you go on what the different",
    "start": "619720",
    "end": "625160"
  },
  {
    "text": "aspect what those are and later on the I mention go ahead so um to to kind of point out what these",
    "start": "625160",
    "end": "631720"
  },
  {
    "text": "are the KDC is called the key distribution center um this would be kind of your central distribution for",
    "start": "631720",
    "end": "638680"
  },
  {
    "text": "Keys kind of it's actually in Windows 2000 is your domain controller it's actually easier to picture in Windows",
    "start": "638680",
    "end": "644680"
  },
  {
    "text": "2000 because we have had the concept of domain controllers for a long time client server principles are exactly",
    "start": "644680",
    "end": "651160"
  },
  {
    "text": "what they sound like um a client trying to access a server and uh both of these",
    "start": "651160",
    "end": "656920"
  },
  {
    "text": "will be have um will be accessing the the key distribution",
    "start": "656920",
    "end": "661959"
  },
  {
    "text": "center okay the biggest new thing is that curos is a ticket based system um and it's basically based on",
    "start": "667639",
    "end": "674399"
  },
  {
    "text": "two concepts one is a network entry and the other is a service usage system as",
    "start": "674399",
    "end": "680920"
  },
  {
    "text": "the um main Concepts involved it also has this uh notion",
    "start": "680920",
    "end": "687440"
  },
  {
    "text": "called The Realm which Maps really um pretty neatly over to an N domain a",
    "start": "687440",
    "end": "693320"
  },
  {
    "text": "realm is basically any all of the database that is protected by a KDC which consists of the users uh the",
    "start": "693320",
    "end": "700240"
  },
  {
    "text": "service names and their Crypt key results in a realm so anytime you have a",
    "start": "700240",
    "end": "705920"
  },
  {
    "text": "KDC um that list of names consists of the",
    "start": "705920",
    "end": "712560"
  },
  {
    "text": "realm this is going to be one of the the biggest things for uh NT administrators is Kos is very very time dependent um NT",
    "start": "717399",
    "end": "725720"
  },
  {
    "text": "administrators have never had to worry about this issue before um some uh security Savvy admins who watch their",
    "start": "725720",
    "end": "733120"
  },
  {
    "text": "logs a lot are pretty good about keeping their servers in sync uh so that they can trace logs across different servers",
    "start": "733120",
    "end": "740079"
  },
  {
    "text": "but they other than that it hasn't really been a big deal and people haven't devoted much time towards uh",
    "start": "740079",
    "end": "746639"
  },
  {
    "text": "keeping their machines synced up however now you have to and I I really feel that this is a good thing it's",
    "start": "746639",
    "end": "752560"
  },
  {
    "text": "going to have ramifications on a lot of other issues um especially for forensics people it's going to make their jobs a",
    "start": "752560",
    "end": "757920"
  },
  {
    "text": "lot easier uh having your servers in sync just has the added benefit of uh anytime you have to go track your logs",
    "start": "757920",
    "end": "764440"
  },
  {
    "text": "across multiple machines it's going to be very very beneficial so this is one thing I'm really happy to see everyone",
    "start": "764440",
    "end": "769639"
  },
  {
    "text": "knows I'm big into uh log auditing so you see you can stop",
    "start": "769639",
    "end": "776020"
  },
  {
    "text": "[Music] smiling basically princip principles can't be more than 5 minutes out of sync",
    "start": "776020",
    "end": "782480"
  },
  {
    "text": "or uh authorization starts to get messed up so this is going to um basically result in a lot of setup issue problems",
    "start": "782480",
    "end": "790519"
  },
  {
    "text": "probably for people who aren't used to the concept of making sure that all of their time servers uh are in",
    "start": "790519",
    "end": "797639"
  },
  {
    "text": "sync all tickets are timestamped and checked that's a whole new concept hash has never had an expiration limit um",
    "start": "797639",
    "end": "805240"
  },
  {
    "text": "there was no uh basically double checking of hashes",
    "start": "805240",
    "end": "810399"
  },
  {
    "text": "some thoughts on",
    "start": "811360",
    "end": "813920"
  },
  {
    "text": "that okay for me this was probably one of the biggest um the biggest slides was",
    "start": "818720",
    "end": "824000"
  },
  {
    "text": "just noticing the difference of where Windows 2000 um differs from",
    "start": "824000",
    "end": "830279"
  },
  {
    "text": "MIT now I realized that there's going to be some uh Unix implementations out there that have a better integration",
    "start": "830279",
    "end": "836759"
  },
  {
    "text": "than this but this is just based on what the standard is Windows 2000 is much more tightly",
    "start": "836759",
    "end": "844160"
  },
  {
    "text": "integrated than raw keros for Unix uh Unix has different applications that",
    "start": "844160",
    "end": "851199"
  },
  {
    "text": "they actually use for logging on logging off Windows users just log on log off as",
    "start": "851199",
    "end": "856720"
  },
  {
    "text": "as usual whereas uh Unix users had to run K in it K",
    "start": "856720",
    "end": "862440"
  },
  {
    "text": "destroy uh Unix didn't have this concept of domain membership that Windows 2000",
    "start": "862440",
    "end": "867920"
  },
  {
    "text": "has um um but that is contrasted with um uh",
    "start": "867920",
    "end": "873000"
  },
  {
    "text": "unix's curb 5 uh configuration",
    "start": "873000",
    "end": "878040"
  },
  {
    "text": "file one big difference is that in Windows 2000 all of the the services that shipped with Microsoft do",
    "start": "878040",
    "end": "884519"
  },
  {
    "text": "authenticate with um with Cur R so this is this is a pretty good thing it's a",
    "start": "884519",
    "end": "890920"
  },
  {
    "text": "good uh it's a good deal in that it really",
    "start": "890920",
    "end": "896079"
  },
  {
    "text": "ensures that all the passwords going across the wire for the different services of Microsoft are encrypted now Microsoft as far as I'm aware of and the",
    "start": "896079",
    "end": "902560"
  },
  {
    "text": "services I've seen don't do any encrypted data yet they just do encrypted authentication I hope to see that change",
    "start": "902560",
    "end": "908759"
  },
  {
    "text": "because what I really want to see is servers that are keros aware that do data encryption as [Music]",
    "start": "908759",
    "end": "916480"
  },
  {
    "text": "well basically NT uh handles this through the service control manager uh which is different than how",
    "start": "916480",
    "end": "923399"
  },
  {
    "text": "Unix handles it Unix uh deals with saved keys from",
    "start": "923399",
    "end": "929440"
  },
  {
    "text": "What's called the key tab think you have some comments on that um key",
    "start": "929440",
    "end": "935519"
  },
  {
    "text": "tab that's fine it key tab is just a a basically um the Unix is kind of the",
    "start": "935519",
    "end": "943000"
  },
  {
    "text": "cache something special before you go on though one thing I do want to mention is that he uh he was talking about though",
    "start": "943000",
    "end": "949000"
  },
  {
    "text": "it does authenticate it does encrypted authentication but doesn't do encrypted data um they it do Windows 2000 does",
    "start": "949000",
    "end": "956560"
  },
  {
    "text": "provide a way to have both encrypted Authentication and encrypt the data as somebody pointed out to me earlier you",
    "start": "956560",
    "end": "961839"
  },
  {
    "text": "can actually do curb roast over IPC so you can create um inside your inet you",
    "start": "961839",
    "end": "967480"
  },
  {
    "text": "can use IPC to encrypt all the data that's going back and forth and use Cur Rose to actually do your um",
    "start": "967480",
    "end": "973639"
  },
  {
    "text": "authentication as everything that I've seen now I said as an side thought I hope people don't feel too distracted by",
    "start": "973639",
    "end": "979560"
  },
  {
    "text": "this but I I set up IPC and it was pretty fluid and when and it used cerose",
    "start": "979560",
    "end": "985240"
  },
  {
    "text": "and it's not like I even had to do anything special for ceros to use IPC it was just integrated quite well so that",
    "start": "985240",
    "end": "990360"
  },
  {
    "text": "is a a very very reasonable way to have that kind of",
    "start": "990360",
    "end": "995680"
  },
  {
    "text": "system all right this is the new thing that you uh what is",
    "start": "1001000",
    "end": "1007519"
  },
  {
    "text": "that all right this is the new thing that you really have to uh come to grips with as an administrator as an nente",
    "start": "1007519",
    "end": "1013680"
  },
  {
    "text": "person you've never seen this before um and that's the keros ticket it",
    "start": "1013680",
    "end": "1019959"
  },
  {
    "text": "and the different things that it",
    "start": "1019959",
    "end": "1022920"
  },
  {
    "text": "contains you know actually I should probably mention because everybody's looking kind of confused in their book right now there's a bunch of these",
    "start": "1025079",
    "end": "1031720"
  },
  {
    "text": "slides that didn't make it in because of some printing problems um the the updated slides will be available on the",
    "start": "1031720",
    "end": "1038558"
  },
  {
    "text": "black hat.com website um and we'll make sure that they get there so you can download",
    "start": "1038559",
    "end": "1044319"
  },
  {
    "text": "them this is a um I forgot where I stole this slide from I think I got it from",
    "start": "1046280",
    "end": "1053080"
  },
  {
    "text": "msj uh right so I'm going to run through",
    "start": "1053080",
    "end": "1058640"
  },
  {
    "text": "these different fields as n administrators uh one of the",
    "start": "1058640",
    "end": "1063720"
  },
  {
    "text": "part of the C2 requirements has been you know not to let the username out you know one of the security requirements is",
    "start": "1063720",
    "end": "1069000"
  },
  {
    "text": "uh in the control out Delete sequence you know set it so that the name is not shown um and seeing usernames on the",
    "start": "1069000",
    "end": "1074720"
  },
  {
    "text": "wire you know uh nulling numerations you know that's been a big thing however",
    "start": "1074720",
    "end": "1081200"
  },
  {
    "text": "that really just becomes irrelevant uh with ceros because this part of the ticket is always unencrypted and it's",
    "start": "1081200",
    "end": "1087000"
  },
  {
    "text": "always in the open and you can always see it basically the trade-off is going to be that the encryption is so much",
    "start": "1087000",
    "end": "1093000"
  },
  {
    "text": "stronger that having that half uh piece of the puzzle is just not going to be an issue anymore but it is a mindset difference for uh n administrators it's",
    "start": "1093000",
    "end": "1100720"
  },
  {
    "text": "not going to do you much good to run around trying to protect usernames if everything on your wire um as far as the",
    "start": "1100720",
    "end": "1107480"
  },
  {
    "text": "the username goes is in plain text the real trick to uh",
    "start": "1107480",
    "end": "1115760"
  },
  {
    "text": "keros is this encryption key right here and then the encryption key that",
    "start": "1115760",
    "end": "1121240"
  },
  {
    "text": "surrounds [Music] it um and this is really what we're going to spend most of the talk talking",
    "start": "1121240",
    "end": "1127760"
  },
  {
    "text": "about and it's really the only point in this that that I have to get across",
    "start": "1127760",
    "end": "1132919"
  },
  {
    "text": "um if you really understand how this works in relationship to how this works",
    "start": "1132919",
    "end": "1139520"
  },
  {
    "text": "um the rest of these are just going to fall in place and and as you what I found is that in talking to other people",
    "start": "1139520",
    "end": "1146400"
  },
  {
    "text": "once we kind of went through this and got them to understand that the next time that they looked at documentation",
    "start": "1146400",
    "end": "1151720"
  },
  {
    "text": "the documentation just started to make a lot more sense and that's really what I hope to achieve out of this",
    "start": "1151720",
    "end": "1156750"
  },
  {
    "text": "[Music] talk want to talk about something um yes",
    "start": "1156750",
    "end": "1162559"
  },
  {
    "text": "you do gu you want to go over what each one is okay all right the ticket flags are",
    "start": "1162559",
    "end": "1170520"
  },
  {
    "text": "going to be used for um are various Fields with inside the ticket that can be used for different things uh",
    "start": "1170520",
    "end": "1176159"
  },
  {
    "text": "basically they get used for things like um uh ticket forwarding um uh Microsoft",
    "start": "1176159",
    "end": "1182120"
  },
  {
    "text": "makes use of it in a new thing called delegation which is another new issue that NTI administrators are going to",
    "start": "1182120",
    "end": "1187720"
  },
  {
    "text": "have to deal with because you guys have never had to deal with um uh delegation and impersonation across machines",
    "start": "1187720",
    "end": "1195440"
  },
  {
    "text": "before uh domain name principal name that's just who you're trying to get a hold",
    "start": "1195760",
    "end": "1201240"
  },
  {
    "text": "of uh start time and end time this is a new thing because keros has this uh notion of expiration and uh session",
    "start": "1201240",
    "end": "1210480"
  },
  {
    "text": "times which NT administrators have never had to deal with before because past just doesn't have that that notion built",
    "start": "1210480",
    "end": "1216200"
  },
  {
    "text": "into it all right this was the key sequence",
    "start": "1216200",
    "end": "1223520"
  },
  {
    "text": "that I really tried to understand I was looking through some various documentation and and um I didn't",
    "start": "1223520",
    "end": "1229840"
  },
  {
    "text": "really uh find anything to my satisfaction of how this works so I put this",
    "start": "1229840",
    "end": "1236559"
  },
  {
    "text": "together how ceros is built into uh Windows NT works like this when the user",
    "start": "1236679",
    "end": "1241720"
  },
  {
    "text": "sits down to log on at the keyboard it goes to uh the wind logon sequence the",
    "start": "1241720",
    "end": "1249240"
  },
  {
    "text": "lsas just as it did before however there's Now new piece",
    "start": "1249240",
    "end": "1254600"
  },
  {
    "text": "called the cero security support provider interface uh that takes takes over and starts talking kerro",
    "start": "1254600",
    "end": "1262480"
  },
  {
    "text": "language",
    "start": "1262480",
    "end": "1265480"
  },
  {
    "text": "anything the important thing about what that um kspi does is this it takes the",
    "start": "1268640",
    "end": "1275360"
  },
  {
    "text": "password and turns it into a one-way hash which becomes the client Crypt key however this Crypt key never gets",
    "start": "1275360",
    "end": "1282600"
  },
  {
    "text": "sent across the wire which is uh significantly different than how inlm works",
    "start": "1282600",
    "end": "1289679"
  },
  {
    "text": "so this is held in stasis for a moment and then what's called the ticket",
    "start": "1289679",
    "end": "1294720"
  },
  {
    "text": "granting ticket request is made to the server so if you have this notion",
    "start": "1294720",
    "end": "1299960"
  },
  {
    "text": "of uh comes in the machine uh calculates this hash and then holds it and then",
    "start": "1299960",
    "end": "1306760"
  },
  {
    "text": "sends out this request for a ticket granting ticket this is sent in clear",
    "start": "1306760",
    "end": "1311799"
  },
  {
    "text": "text so there's no encryption around there's nothing to protect there",
    "start": "1311799",
    "end": "1317880"
  },
  {
    "text": "um this diagram just represents that Crypt key being held now he's going to",
    "start": "1321039",
    "end": "1326279"
  },
  {
    "text": "go talk to the principal",
    "start": "1326279",
    "end": "1329159"
  },
  {
    "text": "KDC this represents the first uh network",
    "start": "1332919",
    "end": "1339039"
  },
  {
    "text": "uh uh connection request for uh for the client from the PDC this is in the open",
    "start": "1339039",
    "end": "1346799"
  },
  {
    "text": "what the KDC at this point is going to do do is go talk to the active [Music]",
    "start": "1346799",
    "end": "1353159"
  },
  {
    "text": "directory it's going to search the active directory for the name that was in that",
    "start": "1353159",
    "end": "1359440"
  },
  {
    "text": "ticket and basically there's it's a two-part list so what what the active directory stores is a two-part list the",
    "start": "1359440",
    "end": "1365720"
  },
  {
    "text": "username and the user's Crypt key the KDC does not actually have the user's",
    "start": "1365720",
    "end": "1371200"
  },
  {
    "text": "password it just has this Crypt key then the server also has its own personal Crypt key that no one else",
    "start": "1371200",
    "end": "1377440"
  },
  {
    "text": "knows about um for anybody who's has investigated uh",
    "start": "1377440",
    "end": "1384760"
  },
  {
    "text": "Windows 2000 keros um their documentation actually calls the c key",
    "start": "1384760",
    "end": "1390039"
  },
  {
    "text": "the long-term key so if you start reading it and you see that that's what they're referring",
    "start": "1390039",
    "end": "1396000"
  },
  {
    "text": "to um my initial understanding of keros would have been greatly enhanced if I just would have seen a color diagram and",
    "start": "1398880",
    "end": "1404600"
  },
  {
    "text": "I never saw one so I'm hoping this helps you",
    "start": "1404600",
    "end": "1409840"
  },
  {
    "text": "I did this uh I did this first slide and you'll see that the next ones get a little better and that's cuz I had some great help from Dale cottington um it",
    "start": "1409840",
    "end": "1417559"
  },
  {
    "text": "was just much cooler at animation than I was so these get better thing to notice about these",
    "start": "1417559",
    "end": "1423960"
  },
  {
    "text": "session Keys is at this moment you just saw those two things that slid across they",
    "start": "1423960",
    "end": "1429840"
  },
  {
    "text": "were all part of the same network datagram so we're on our second leg of the",
    "start": "1429840",
    "end": "1435159"
  },
  {
    "text": "trip this has been held in stasis this Crypt key and the server Crypt key",
    "start": "1435159",
    "end": "1442240"
  },
  {
    "text": "were used and what was wrapped inside these things is essentially um going back to",
    "start": "1442240",
    "end": "1449279"
  },
  {
    "text": "that ticket the the uh encrypted key part is what's a session um or what are called session",
    "start": "1449279",
    "end": "1456000"
  },
  {
    "text": "Keys the yellow represents a border because that session key was locked with",
    "start": "1456000",
    "end": "1462919"
  },
  {
    "text": "that I'm going to go back to uh",
    "start": "1462919",
    "end": "1468080"
  },
  {
    "text": "basically the outside part of this in relation to that part",
    "start": "1471320",
    "end": "1480039"
  },
  {
    "text": "there okay so what you're looking at here this is what's called the ticket granting",
    "start": "1481760",
    "end": "1487360"
  },
  {
    "text": "ticket what this means is this is basically what happens when a client first comes on the network uh the client",
    "start": "1487360",
    "end": "1494039"
  },
  {
    "text": "logs on he contacts the KDC and says I want to start actually doing keros",
    "start": "1494039",
    "end": "1499559"
  },
  {
    "text": "authentication and the way that it has to do that is it has to start the initial session with the key",
    "start": "1499559",
    "end": "1505000"
  },
  {
    "text": "distribution center and this is that initial um this is that",
    "start": "1505000",
    "end": "1510399"
  },
  {
    "text": "initialization okay so the client's log on is not yet complete he's still waiting he has he doesn't know if he's",
    "start": "1510960",
    "end": "1516480"
  },
  {
    "text": "successfully logged on yet the only active directory um",
    "start": "1516480",
    "end": "1522279"
  },
  {
    "text": "interaction that this uh piece has is that the lookup mechanism for",
    "start": "1522279",
    "end": "1527760"
  },
  {
    "text": "these two things was used and obtained so you're sent back and now the",
    "start": "1527760",
    "end": "1533679"
  },
  {
    "text": "client is uh going to take a look at these like the return of the function",
    "start": "1533679",
    "end": "1539480"
  },
  {
    "text": "call this session key has been locked with this Crypt key as it was listed in",
    "start": "1539960",
    "end": "1545039"
  },
  {
    "text": "the active directory now this was generated from a password and a one-way",
    "start": "1545039",
    "end": "1550159"
  },
  {
    "text": "hash the same as what went through uh the wind logon LSA KS um SPI",
    "start": "1550159",
    "end": "1557720"
  },
  {
    "text": "uh deal if this password and oneway hash was the",
    "start": "1557720",
    "end": "1563360"
  },
  {
    "text": "same as this one this session key is going to be successfully unlocked by the client and at that point the client will",
    "start": "1563360",
    "end": "1569399"
  },
  {
    "text": "finally know that his log on was complete if this script key fails to",
    "start": "1569399",
    "end": "1574679"
  },
  {
    "text": "unlock that that means it didn't match that one and the logon's going to fail and the user is going to have to try",
    "start": "1574679",
    "end": "1580200"
  },
  {
    "text": "another password this part of the package that",
    "start": "1580200",
    "end": "1585760"
  },
  {
    "text": "just arrived at the client is opaque to the client it's encrypted shown by the red border with this key the client",
    "start": "1585760",
    "end": "1592840"
  },
  {
    "text": "doesn't know this key and so he can't unencrypt this this is what's known as",
    "start": "1592840",
    "end": "1598120"
  },
  {
    "text": "his TGT or ticket granting",
    "start": "1598120",
    "end": "1601840"
  },
  {
    "text": "ticket the client has to keep this and use it for all other",
    "start": "1603440",
    "end": "1610559"
  },
  {
    "text": "uh requests that he makes back from uh the server these things are going to be",
    "start": "1610559",
    "end": "1615880"
  },
  {
    "text": "timestamped and what the server does at this point is start taking note that he issued this",
    "start": "1615880",
    "end": "1621240"
  },
  {
    "text": "at like let's say 8:00 a.m. in the morning by default uh they're given 8 hour timestamps so they're good for",
    "start": "1621240",
    "end": "1626559"
  },
  {
    "text": "eight hours from the time they're issued have some thoughts on that all",
    "start": "1626559",
    "end": "1633799"
  },
  {
    "text": "right no I got it I'll do the rest of",
    "start": "1633799",
    "end": "1637840"
  },
  {
    "text": "these so the main next point is that eventually the server is going to want",
    "start": "1640559",
    "end": "1646559"
  },
  {
    "text": "to make a request of something so the server's got basically these",
    "start": "1646559",
    "end": "1652320"
  },
  {
    "text": "tickets that he's going to send back uh with uh encrypted again in two different",
    "start": "1652320",
    "end": "1658000"
  },
  {
    "text": "parts the server since it has this red key can unlock this box and check that this ticket ticket granting ticket",
    "start": "1658000",
    "end": "1664240"
  },
  {
    "text": "hasn't been tampered with and he knows that uh it's from the one that he sent over here it also verifies with what's",
    "start": "1664240",
    "end": "1670279"
  },
  {
    "text": "in here",
    "start": "1670279",
    "end": "1676240"
  },
  {
    "text": "okay goad EXC me are you say that the uh request is actually encrypted or is it",
    "start": "1676240",
    "end": "1681559"
  },
  {
    "text": "just signed",
    "start": "1681559",
    "end": "1686720"
  },
  {
    "text": "um you mean whether if the data is encrypted or not yeah just signed so it knows it came from the I it would be",
    "start": "1687360",
    "end": "1694799"
  },
  {
    "text": "more valid to say signed although it's not really the concept of it's not there's no real concept of signatures in",
    "start": "1694799",
    "end": "1700840"
  },
  {
    "text": "keros so encrypted is it encrypted yeah as far as yeah well I guess it's encrypted then I haven't actually looked",
    "start": "1700840",
    "end": "1707000"
  },
  {
    "text": "at a sniff hash might be a better ter yeah I guess hash would be a better I mean because it's it's locked that yeah",
    "start": "1707000",
    "end": "1713480"
  },
  {
    "text": "it would be encrypted because it's locked with that with that key um so you would never be able to see what's inside that request without actually unlocking",
    "start": "1713480",
    "end": "1720039"
  },
  {
    "text": "that first so it would be encrypting the encrypted data would be more",
    "start": "1720039",
    "end": "1724960"
  },
  {
    "text": "accurate the KDC TR um serves as a trusted entity here so um it has the",
    "start": "1725760",
    "end": "1732440"
  },
  {
    "text": "Crypt key that the client has um",
    "start": "1732440",
    "end": "1739519"
  },
  {
    "text": "so I wasn't sure did you have a a concern okay okay oh and I forgot if",
    "start": "1739519",
    "end": "1745919"
  },
  {
    "text": "anybody does have a question while we're going through this please feel free to to stop and",
    "start": "1745919",
    "end": "1751240"
  },
  {
    "text": "ask all right so before those things BW off the screen there's there's um a",
    "start": "1751720",
    "end": "1756880"
  },
  {
    "text": "request that was made in there for the service question go ahead the 8 hour",
    "start": "1756880",
    "end": "1763039"
  },
  {
    "text": "timean is that concrete or can that be adjusted oh how long you",
    "start": "1763039",
    "end": "1769519"
  },
  {
    "text": "have for some reason I thought on Windows 2000 that it's adjustable but I'm not completely positive on that um I",
    "start": "1769519",
    "end": "1776279"
  },
  {
    "text": "know like expiration Tes of how long the tickets expire and things like that are adjustable but I actually didn't see the",
    "start": "1776279",
    "end": "1781480"
  },
  {
    "text": "one for keros and it's something that I I'm trying to look at but I by default I know it is five",
    "start": "1781480",
    "end": "1787600"
  },
  {
    "text": "minutes you men an 8 hour time talking about the the session you're talking about the session oh yeah that is",
    "start": "1787600",
    "end": "1794159"
  },
  {
    "text": "configurable sorry I I thought you meant the time stamp that it checks with okay NT also does a caching um which is",
    "start": "1794159",
    "end": "1800440"
  },
  {
    "text": "different than the Unix version um so that people don't have to keep Rel logging on after they're uh and that's",
    "start": "1800440",
    "end": "1806240"
  },
  {
    "text": "configurable in your security policy there was a question over here I",
    "start": "1806240",
    "end": "1811640"
  },
  {
    "text": "think okay okay so actually at this point the",
    "start": "1811640",
    "end": "1819159"
  },
  {
    "text": "active directory is um used again in a lookup and This Ss stands for Server",
    "start": "1819159",
    "end": "1826320"
  },
  {
    "text": "service and that represents like let's say the printer server service that the client wants to",
    "start": "1826320",
    "end": "1831559"
  },
  {
    "text": "use so the KDC at this point uh is going to issue another thing he's got the the client making the",
    "start": "1831559",
    "end": "1838279"
  },
  {
    "text": "request and then the server also has the username and the Crypt key for the printer service or the file service or",
    "start": "1838279",
    "end": "1846000"
  },
  {
    "text": "or whatever these two cryp keys are obtained from the active directory and they're used to formulate another ticket",
    "start": "1846000",
    "end": "1855960"
  },
  {
    "text": "thanks to Dale for the much nicer slide there I'm really PowerPoint deprived so",
    "start": "1859799",
    "end": "1867159"
  },
  {
    "text": "there's a couple other slides in here that I blatantly stole I'll mentioned them out but they were they were too beautiful not to steal",
    "start": "1867159",
    "end": "1872639"
  },
  {
    "text": "so um okay so the points to notice is the coloration around these",
    "start": "1872639",
    "end": "1879200"
  },
  {
    "text": "boxes um you got them being locked with the Crypt key again pertaining to the client",
    "start": "1879200",
    "end": "1887240"
  },
  {
    "text": "and now you've got this this other ticket that's encrypted with the key for the printer server so again this part of",
    "start": "1887240",
    "end": "1895200"
  },
  {
    "text": "the ticket is opaque to the client he can't do anything with this but what he does do is he can",
    "start": "1895200",
    "end": "1901960"
  },
  {
    "text": "unlock this client session and obtain this red key that's in",
    "start": "1901960",
    "end": "1907530"
  },
  {
    "text": "[Music] there I thought I had a thing but he'll",
    "start": "1907530",
    "end": "1912679"
  },
  {
    "text": "keep that key and hold it like right in there so imagine there's a little red box like right there",
    "start": "1912679",
    "end": "1919000"
  },
  {
    "text": "now he's actually going to make the request to the printer principal this will be leg four of our six leg",
    "start": "1919000",
    "end": "1926960"
  },
  {
    "text": "Journey the session key that that he just obtained and stored right here he",
    "start": "1926960",
    "end": "1932159"
  },
  {
    "text": "locks his service request uh with that key this red key also matches this red",
    "start": "1932159",
    "end": "1940799"
  },
  {
    "text": "key right here however he can't touch or alter this red key because it's locked and encrypted with the key for the",
    "start": "1940799",
    "end": "1946919"
  },
  {
    "text": "printer server [Music] and then he's going to fire that",
    "start": "1946919",
    "end": "1952900"
  },
  {
    "text": "[Music] off the printer server's got his key and",
    "start": "1952900",
    "end": "1958799"
  },
  {
    "text": "he's ready for a",
    "start": "1958799",
    "end": "1961440"
  },
  {
    "text": "request so this is leg five he uses his key to unlock This",
    "start": "1964279",
    "end": "1972600"
  },
  {
    "text": "Server session key if this is successful then they then the printer",
    "start": "1972600",
    "end": "1978679"
  },
  {
    "text": "service was just successful because a trusted entity um issued this so if this",
    "start": "1978679",
    "end": "1984159"
  },
  {
    "text": "encrypts this that's like one form of authentication now he gets the session",
    "start": "1984159",
    "end": "1989760"
  },
  {
    "text": "key and he stores it so imagine a little red box right there this red session key can now",
    "start": "1989760",
    "end": "1996799"
  },
  {
    "text": "unlock this red session key because it matches that one over",
    "start": "1996799",
    "end": "2002279"
  },
  {
    "text": "there there's a a time stamp and a name in here and if those come out and verify",
    "start": "2002279",
    "end": "2007799"
  },
  {
    "text": "then he knows that this client request was also authenticated by the KDC",
    "start": "2007799",
    "end": "2013960"
  },
  {
    "text": "server uh okay I guess I show these being unlocked so there's one being unlocked if that was successful then",
    "start": "2019200",
    "end": "2025639"
  },
  {
    "text": "he'd be able to use a red key to unlock that",
    "start": "2025639",
    "end": "2030399"
  },
  {
    "text": "one so one thing to notice with this as you T as we said before the hash is",
    "start": "2031000",
    "end": "2036039"
  },
  {
    "text": "never sent Across The Wire this is a big deal because that's exactly how ntlm was at its weakest um the only thing that is",
    "start": "2036039",
    "end": "2043279"
  },
  {
    "text": "actually sent across the wire is the encrypted data each side of it has a version of the key and this is not weak",
    "start": "2043279",
    "end": "2050878"
  },
  {
    "text": "encryption this packet is essentially like sending a pgp packet across so if you're if you're worried about anyone",
    "start": "2050879",
    "end": "2056320"
  },
  {
    "text": "touching this you can essentially view this as if you were sending someone a pgp file and if they crack and break that um it's going to take them a lot of",
    "start": "2056320",
    "end": "2063200"
  },
  {
    "text": "CPU Cycles so this is pretty strong and also if they try it'll probably be used useless because the time stamp will be",
    "start": "2063200",
    "end": "2069280"
  },
  {
    "text": "off by the time they actually able to crack the encryption keros does take uh passwords",
    "start": "2069280",
    "end": "2075440"
  },
  {
    "text": "up to 128 characters in length uh then T version does and it it will allow spaces",
    "start": "2075440",
    "end": "2081118"
  },
  {
    "text": "in the password itself or the past phrase so you can get some pretty long",
    "start": "2081119",
    "end": "2086480"
  },
  {
    "text": "you can make some pretty long or pretty tough uh keys",
    "start": "2086480",
    "end": "2092598"
  },
  {
    "text": "there all right if that was successful that means that these two now possess identical",
    "start": "2093440",
    "end": "2100560"
  },
  {
    "text": "symmetric session Keys they've both been authenticated because each person could decrypt the part of the package that um",
    "start": "2100560",
    "end": "2107960"
  },
  {
    "text": "related to that person and it shows uh that they were both authenticated by the",
    "start": "2107960",
    "end": "2115440"
  },
  {
    "text": "KDC and now that they both have this uh identical session key then they they can",
    "start": "2115440",
    "end": "2121040"
  },
  {
    "text": "now begin uh a symmetrically a symmetrically encrypted uh data session",
    "start": "2121040",
    "end": "2129119"
  },
  {
    "text": "how was that I can't say that five times",
    "start": "2129119",
    "end": "2133119"
  },
  {
    "text": "fast so before we go there I mean what is that pretty clear to everybody I mean it took me like forever just to poke a",
    "start": "2134359",
    "end": "2140880"
  },
  {
    "text": "stick in my eye before that became clear at all and so if anybody has any question that last slide implies I if",
    "start": "2140880",
    "end": "2148359"
  },
  {
    "text": "you oh you're talking about the data encryption um you if you leave encryption you simply authenticated the",
    "start": "2148359",
    "end": "2155359"
  },
  {
    "text": "client to the server proceed using to say the data encryption is more Unix",
    "start": "2155359",
    "end": "2161240"
  },
  {
    "text": "Unix is the one actually uses the session key maybe in the future um you Windows 2000 will but when Unix does use",
    "start": "2161240",
    "end": "2167079"
  },
  {
    "text": "the session key to encrypt data yeah repeat the question oh I'm sorry the",
    "start": "2167079",
    "end": "2172800"
  },
  {
    "text": "question was um uh the last slide actually showed okay the symmetric keys will now",
    "start": "2172800",
    "end": "2179480"
  },
  {
    "text": "be used to encrypt data between those hosts which is actually something that Windows 2000 doesn't support because it",
    "start": "2179480",
    "end": "2185280"
  },
  {
    "text": "does not support keros encrypted data passing across wire other than the authentication um like said the",
    "start": "2185280",
    "end": "2191960"
  },
  {
    "text": "authentication all is encrypted but the data flow after that is not like I said you can use IPC to encrypt data but it's",
    "start": "2191960",
    "end": "2198319"
  },
  {
    "text": "not really using ceros to do that um Unix does support keros and to do that",
    "start": "2198319",
    "end": "2204400"
  },
  {
    "text": "and um the tool that JD made the telnet CLI would basically do this function it",
    "start": "2204400",
    "end": "2209599"
  },
  {
    "text": "will um use the session keys to encrypt the data yeah IP SEC will do this but this is at the application Level this is",
    "start": "2209599",
    "end": "2216240"
  },
  {
    "text": "has nothing to do with um right IP protocols this will work over any network protocol there was a couple",
    "start": "2216240",
    "end": "2222960"
  },
  {
    "text": "other questions yeah real quickly talk down the steps of",
    "start": "2222960",
    "end": "2228480"
  },
  {
    "text": "what happens a recap the authentication the ones we just went through sure we",
    "start": "2228480",
    "end": "2234560"
  },
  {
    "text": "can do that again okay um go ahead verbally so Bas it I you know you kind",
    "start": "2234560",
    "end": "2241200"
  },
  {
    "text": "of need the pictures cuz I needed the pictures that's why I say that let me see the micophone Maybe going over it a",
    "start": "2241200",
    "end": "2248119"
  },
  {
    "text": "couple times will help um all right we don't want to do that do um do basically",
    "start": "2248119",
    "end": "2253920"
  },
  {
    "text": "what what's going on is the the client principal the the server that's trying",
    "start": "2253920",
    "end": "2259560"
  },
  {
    "text": "to connect and he wants to make a print job it uh makes her makes a request to the KDC and says I'm trying to connect",
    "start": "2259560",
    "end": "2266640"
  },
  {
    "text": "to a very specific server I'm trying to print it then sends a request off where's my",
    "start": "2266640",
    "end": "2272640"
  },
  {
    "text": "request oops oh oops oh well so it sent a request",
    "start": "2272640",
    "end": "2279599"
  },
  {
    "text": "including with the TG the uh ticket getting ticket um saying with exactly",
    "start": "2279599",
    "end": "2284680"
  },
  {
    "text": "what it wanted to accomplished the KDC sends back this this setup here which is",
    "start": "2284680",
    "end": "2290280"
  },
  {
    "text": "basically two copies of the session ticket one encrypted with the server key",
    "start": "2290280",
    "end": "2296480"
  },
  {
    "text": "and one encrypted with the client key the client un encrypts the the key and",
    "start": "2296480",
    "end": "2302000"
  },
  {
    "text": "then it has a copy of the session key it uses the session key to encrypt the service request does that make sense so",
    "start": "2302000",
    "end": "2308800"
  },
  {
    "text": "far okay um it then sends back it it has this this this part right here the part",
    "start": "2308800",
    "end": "2314400"
  },
  {
    "text": "in purple it doesn't even touch it doesn't oh I'm sorry I'm sorry I'm really bad at",
    "start": "2314400",
    "end": "2320000"
  },
  {
    "text": "this right there if you notice um right over here this this client",
    "start": "2320000",
    "end": "2326920"
  },
  {
    "text": "machine all it has is has that data it cannot do anything with it this is um",
    "start": "2326920",
    "end": "2332240"
  },
  {
    "text": "this is actually once again for protection if it could get access to this session key it could actually um uh",
    "start": "2332240",
    "end": "2338640"
  },
  {
    "text": "what would the word be masquerade or basically you could take hijack the session if you had access to it but only",
    "start": "2338640",
    "end": "2345240"
  },
  {
    "text": "This Server right here can actually unlock that so it keeps a hold of This Server key session key attaches it to",
    "start": "2345240",
    "end": "2351160"
  },
  {
    "text": "the session request um sends it across the wire as you see we have the session request",
    "start": "2351160",
    "end": "2358400"
  },
  {
    "text": "encrypted with this session key and it has as over here and it has the server",
    "start": "2358400",
    "end": "2364599"
  },
  {
    "text": "session key which has been locked with the server key unlocks it so that it actually gets a",
    "start": "2364599",
    "end": "2371119"
  },
  {
    "text": "hold of that session key and then it unlocks with session request it can then verify also what else it also does is it",
    "start": "2371119",
    "end": "2378240"
  },
  {
    "text": "checks the time stamp um inside here this has been timestamped with the client principles",
    "start": "2378240",
    "end": "2384400"
  },
  {
    "text": "the the time on that machine it checks it sees if it's within a 5 minute boundary and if it is it goes ahead and",
    "start": "2384400",
    "end": "2390800"
  },
  {
    "text": "accept the session request and they start transferring data back and forth is that clear okay",
    "start": "2390800",
    "end": "2398240"
  },
  {
    "text": "okay two question one",
    "start": "2398240",
    "end": "2404920"
  },
  {
    "text": "multiple within multiple time zones I",
    "start": "2404920",
    "end": "2410760"
  },
  {
    "text": "also I I we start that question over again I'm trying to understand how",
    "start": "2414319",
    "end": "2419839"
  },
  {
    "text": "Microsoft implementation of C actually work in in an environment where you have",
    "start": "2419839",
    "end": "2425319"
  },
  {
    "text": "different different levels of unit right right we will actually so he wants",
    "start": "2425319",
    "end": "2430440"
  },
  {
    "text": "to know what his question was was first of all what happens in different different time zones the answer is I",
    "start": "2430440",
    "end": "2436319"
  },
  {
    "text": "have no idea I've actually never even thought about that and I've never tried it um the other question is was about",
    "start": "2436319",
    "end": "2443160"
  },
  {
    "text": "interoperability and how Windows 2000 really does it and actually we will get in we will actually get to that a little bit later and we'll show some slides",
    "start": "2443160",
    "end": "2449160"
  },
  {
    "text": "some diagrams want to send us an email I'll try and answer that for off oh it's GMT oh the okay so time stamps are GMT",
    "start": "2449160",
    "end": "2455520"
  },
  {
    "text": "so there's no there's no issue that makes sense",
    "start": "2455520",
    "end": "2462160"
  },
  {
    "text": "man um was was there any other questions about that particular this is like the",
    "start": "2462160",
    "end": "2467240"
  },
  {
    "text": "fundamental of keros right here once you get this it kind of goes downhill from there",
    "start": "2467240",
    "end": "2474200"
  },
  {
    "text": "so question okay",
    "start": "2474359",
    "end": "2480079"
  },
  {
    "text": "Des way I think that's kind of a stretch I I see no P yeah it is not a pki system",
    "start": "2481400",
    "end": "2488680"
  },
  {
    "text": "at all um there is no public key used there's no generation of multiple Keys",
    "start": "2488680",
    "end": "2494119"
  },
  {
    "text": "it is very much a symmetric Key System yeah you don't have to deal with um uh you don't have to deal with",
    "start": "2494119",
    "end": "2500560"
  },
  {
    "text": "certificate revocation um that's one of the reasons why it's more scalable uh than a pki system it's it's totally",
    "start": "2500560",
    "end": "2506960"
  },
  {
    "text": "different than that infrastructure it's extensible and it could include pki and some people talk",
    "start": "2506960",
    "end": "2513200"
  },
  {
    "text": "about that um but I don't I don't expect to see that for a while people are still just trying to get this into service you",
    "start": "2513200",
    "end": "2521559"
  },
  {
    "text": "canuse um as a",
    "start": "2521760",
    "end": "2526800"
  },
  {
    "text": "so actually you can use um you you can interoperate with like Unix using",
    "start": "2530240",
    "end": "2535839"
  },
  {
    "text": "Standalone servers and we'll kind of go over that as well the question was do I have to have set up a domain or can I use Standalone servers and I I'm not",
    "start": "2535839",
    "end": "2543559"
  },
  {
    "text": "sure I fully understand the question but when we go further into how it interoperates maybe you'll get a better idea and I'll get a better idea for your",
    "start": "2543559",
    "end": "2549480"
  },
  {
    "text": "question okay this was another slide I had to put",
    "start": "2549480",
    "end": "2555839"
  },
  {
    "text": "together just for my own benefit because um I kept hearing this thing that that keros was scalable and I I didn't get it I didn't",
    "start": "2555839",
    "end": "2562960"
  },
  {
    "text": "see um where that it was and for the first authentication it's actually more",
    "start": "2562960",
    "end": "2568760"
  },
  {
    "text": "uh processive intensive than ntlm for for like one printer service request",
    "start": "2568760",
    "end": "2574440"
  },
  {
    "text": "ntlm is a lot faster uh you can see from",
    "start": "2574440",
    "end": "2579599"
  },
  {
    "text": "here ntlm consists of uh five Network trips the client will make a request the",
    "start": "2579599",
    "end": "2587160"
  },
  {
    "text": "server will generate uh a challenge the client has to respond with that hash the",
    "start": "2587160",
    "end": "2593280"
  },
  {
    "text": "server is then going to pass through to the PDC um that would be uh",
    "start": "2593280",
    "end": "2599240"
  },
  {
    "text": "four uh wait three four and five coming back with the challenge and it has to go back and this",
    "start": "2599240",
    "end": "2605839"
  },
  {
    "text": "system right here so one request is going to equal five Network trips 20 requests is going to equal 100 trips it",
    "start": "2605839",
    "end": "2612200"
  },
  {
    "text": "has to do this exact same sequence every single time it wants to touch anything on the server it needs a file if it",
    "start": "2612200",
    "end": "2619559"
  },
  {
    "text": "needs a",
    "start": "2619559",
    "end": "2622079"
  },
  {
    "text": "printer now at first glance it doesn't look like uh keros is going to be an",
    "start": "2625079",
    "end": "2631000"
  },
  {
    "text": "improvement because it actually takes six the first two bars go up and back",
    "start": "2631000",
    "end": "2637640"
  },
  {
    "text": "and that that's the ticket granting ticket session then the client decides that he wants to talk to some server so",
    "start": "2637640",
    "end": "2644599"
  },
  {
    "text": "he has to make a second one a server request so you've got the next up arrow and down",
    "start": "2644599",
    "end": "2650000"
  },
  {
    "text": "arrow of before trips then the client actually takes those tickets he just got and goes and talks to the server so",
    "start": "2650000",
    "end": "2657200"
  },
  {
    "text": "you've got one request at six Network trips",
    "start": "2657200",
    "end": "2663359"
  },
  {
    "text": "the where the Improvement comes in is that the client never has to do that again he doesn't ever have to talk to",
    "start": "2663359",
    "end": "2669040"
  },
  {
    "text": "the KDC again at least for the next 8 hours so all of the next trips he only has to make these two Network passes so",
    "start": "2669040",
    "end": "2676280"
  },
  {
    "text": "if he if he needs to get 20 files or or 20 print jobs he only has to make a total of 40 Network trips versus 100 for",
    "start": "2676280",
    "end": "2683079"
  },
  {
    "text": "ntlm so that's where your scalability comes in have some thoughts on",
    "start": "2683079",
    "end": "2690838"
  },
  {
    "text": "that it's all yours baby okay okay so um now we're going to",
    "start": "2691960",
    "end": "2699640"
  },
  {
    "text": "talk about the whole how clients are used oh sorry one of the scale building questions I guess",
    "start": "2699640",
    "end": "2707119"
  },
  {
    "text": "is the KDC will all domain controllers access the KDC or do they have to go",
    "start": "2707119",
    "end": "2712839"
  },
  {
    "text": "back to the primary KDC in your network I'm sorry asked that question one more time KDC yeah um in this Windows 2000",
    "start": "2712839",
    "end": "2720760"
  },
  {
    "text": "environment do I do the Cent request have to go to one KDC in the or can all",
    "start": "2720760",
    "end": "2727680"
  },
  {
    "text": "the domain controllers do the authentication for it you have more than one KC what's that",
    "start": "2727680",
    "end": "2733800"
  },
  {
    "text": "can you have more than one KDC I believe it not not in a single round one per round right but I think that each active",
    "start": "2733800",
    "end": "2740319"
  },
  {
    "text": "directory acts as a KDC okay just like a just like a regular domain controller it's just yeah it does",
    "start": "2740319",
    "end": "2747079"
  },
  {
    "text": "all the standard stuff that are kind of the way you expect domain controllers to act he asked basically what what role",
    "start": "2747079",
    "end": "2753400"
  },
  {
    "text": "does the domain controller fill as far as a KDC does all domain act as a KDC and the answer is yes want to talk about",
    "start": "2753400",
    "end": "2759720"
  },
  {
    "text": "the fact that bdcs don't exist anymore um so the uh with Windows 2000 the",
    "start": "2759720",
    "end": "2767200"
  },
  {
    "text": "concept of a primary domain controller and backup domain controllers was just thrown out the window we only have",
    "start": "2767200",
    "end": "2772640"
  },
  {
    "text": "domain controllers uh this is for scalability Speed um there was far too",
    "start": "2772640",
    "end": "2778440"
  },
  {
    "text": "many problems with replication not happening correctly using a backup domain control was just not the greatest",
    "start": "2778440",
    "end": "2784680"
  },
  {
    "text": "idea in the world so this kind of makes makes things a little bit smoother oh go ahead what what type of",
    "start": "2784680",
    "end": "2791240"
  },
  {
    "text": "DNS record uh is used to represent the KBC you mentioned I don't think it it",
    "start": "2791240",
    "end": "2797960"
  },
  {
    "text": "actually is I don't think there is a I've never seen a DNS record for keros now um I haven't looked at Kos in DNS so",
    "start": "2797960",
    "end": "2805640"
  },
  {
    "text": "and it's been a long time since I've done DNS Windows DNS has a server record",
    "start": "2805640",
    "end": "2810680"
  },
  {
    "text": "which is does it use a server record okay then it use a standard server record for finding the names when you go to join everything all right so uses the",
    "start": "2810680",
    "end": "2817359"
  },
  {
    "text": "server record that's a new one for um for what is it bind",
    "start": "2817359",
    "end": "2823838"
  },
  {
    "text": "8126 it what have to be in bind it be able to interoperate what",
    "start": "2824839",
    "end": "2831599"
  },
  {
    "text": "that yeah yeah I mean I've heard the server record before it was it was new with the whole new bind 8",
    "start": "2831599",
    "end": "2837960"
  },
  {
    "text": "stuff um what",
    "start": "2837960",
    "end": "2842400"
  },
  {
    "text": "options yes KDC is a single point of failure absolutely his question was um",
    "start": "2845359",
    "end": "2850599"
  },
  {
    "text": "the basically is the KDC a single point of failure and absolutely unfortunately whenever you have an authentication system you will always have a single",
    "start": "2850599",
    "end": "2857200"
  },
  {
    "text": "point of failure",
    "start": "2857200",
    "end": "2862480"
  },
  {
    "text": "yeah okay for now okay all right wait I one oh yeah I just want to comment on the slide just so everyone knows um this",
    "start": "2863200",
    "end": "2870359"
  },
  {
    "text": "this slide in the next couple of slides uh we blatantly stole from a program manager in Microsoft He's listed at the",
    "start": "2870359",
    "end": "2876839"
  },
  {
    "text": "at the back um he just set up this beautiful slide so I just want to let everybody know",
    "start": "2876839",
    "end": "2882480"
  },
  {
    "text": "that okay I think are we we're too far back no it you're sh",
    "start": "2882480",
    "end": "2890319"
  },
  {
    "text": "are you sure okay all right so we're going to go over some some um inter some issues client issues how they work",
    "start": "2890319",
    "end": "2897280"
  },
  {
    "text": "interoperate uh this is an example of when a customer wants to have non Windows clients use their Windows 2000",
    "start": "2897280",
    "end": "2905079"
  },
  {
    "text": "accounts to use Kos Authentication and if you notice basically have our Unix workstation and we have our Windows 2000",
    "start": "2905079",
    "end": "2911960"
  },
  {
    "text": "server so on your Unix workstation you're going to set up your Etsy curb.com file and you're going to I've",
    "start": "2911960",
    "end": "2918400"
  },
  {
    "text": "actually never set one up but I know that it has basically where your your KDC is and um all the the information",
    "start": "2918400",
    "end": "2925599"
  },
  {
    "text": "that's necessary to create the session and you're going to use kenit which is the like I said the tool that you",
    "start": "2925599",
    "end": "2931280"
  },
  {
    "text": "traditionally use in Unix to establish a Cerro session and you're going to use that with the went 2000 account oops",
    "start": "2931280",
    "end": "2938559"
  },
  {
    "text": "that went too fast you're going to use it with their Windows 2000 account and that will allow",
    "start": "2938559",
    "end": "2944040"
  },
  {
    "text": "C sessions to happen with Unix this is with a Unix client and a Windows 2000 domain",
    "start": "2944040",
    "end": "2950079"
  },
  {
    "text": "controller okay employee has a Windows 2000 computer that they want to use in a",
    "start": "2950119",
    "end": "2955240"
  },
  {
    "text": "Kerberos realm okay so you configure the system Standalone you do not put it in a",
    "start": "2955240",
    "end": "2960480"
  },
  {
    "text": "domain um I think somebody was asking about this earlier how do you have it as a standalone this is how when you have it as Standalone the this is what you do",
    "start": "2960480",
    "end": "2967799"
  },
  {
    "text": "when you want to actually have your Windows 2000 talk on your Unix keros um system use case setup to configure the",
    "start": "2967799",
    "end": "2974400"
  },
  {
    "text": "realm this is the the Unix method that's used to initially set up the KDC and the and the other um aspects of keros within",
    "start": "2974400",
    "end": "2981839"
  },
  {
    "text": "the Unix environment um use case setup to establish the local account mapping",
    "start": "2981839",
    "end": "2986880"
  },
  {
    "text": "you basically have to have an account on the Windows 2000 box that maps to an account on the Unix",
    "start": "2986880",
    "end": "2992599"
  },
  {
    "text": "box and then you just log on to the keros realm it's that simple",
    "start": "2992599",
    "end": "2998040"
  },
  {
    "text": "and as I said I don't think I need this right now as I said I'm kind of talking out of my",
    "start": "2998040",
    "end": "3005839"
  },
  {
    "text": "head because I've actually never interoperated with Unix but I know how how it's supposed to work according to",
    "start": "3005839",
    "end": "3011040"
  },
  {
    "text": "both Unix and the Windows 2000 stuff set be",
    "start": "3011040",
    "end": "3017000"
  },
  {
    "text": "onent no it would be run on the Linux client K case setup is actually setting",
    "start": "3017040",
    "end": "3022799"
  },
  {
    "text": "up the keros the KDC and and things like that the the actual ceros",
    "start": "3022799",
    "end": "3028480"
  },
  {
    "text": "concept it' be like with Windows 2000 you just go in you just click Windows setup active",
    "start": "3028480",
    "end": "3034520"
  },
  {
    "text": "directory is there any synchronization between password changes is there what",
    "start": "3034520",
    "end": "3039839"
  },
  {
    "text": "synchronization between to change the password [Music]",
    "start": "3039839",
    "end": "3046219"
  },
  {
    "text": "between um I don't know with Unix I'm not sure how that actually the the",
    "start": "3046319",
    "end": "3051520"
  },
  {
    "text": "password changes my initial talk would say no that it's not that smart",
    "start": "3051520",
    "end": "3057319"
  },
  {
    "text": "but I mean I'll be honest one thing I don't I have not been able to drive yet",
    "start": "3057319",
    "end": "3062359"
  },
  {
    "text": "is how account actually when you set up the accounts how you actually get them to be in sync and I believe that you",
    "start": "3062359",
    "end": "3069880"
  },
  {
    "text": "would have to actually manually change the passwords on on both sides he asked um how do you keep these passwords and",
    "start": "3069880",
    "end": "3075559"
  },
  {
    "text": "think um trustworthy like and I think he just telling that into the box isn't that",
    "start": "3075559",
    "end": "3080599"
  },
  {
    "text": "trustworthy okay um oh I don't even know what this",
    "start": "3080599",
    "end": "3085760"
  },
  {
    "text": "is",
    "start": "3085760",
    "end": "3088559"
  },
  {
    "text": "okay let's move on okay so oh cross domain",
    "start": "3092640",
    "end": "3098680"
  },
  {
    "text": "authentication all right so most people who have a Windows 2000 environment have",
    "start": "3098680",
    "end": "3104079"
  },
  {
    "text": "multiple domains I would guess how many people here use multiple domains in their Windows 2000 environment okay well",
    "start": "3104079",
    "end": "3110319"
  },
  {
    "text": "if you don't then you probably will because I'm sure you're all huge companies that have thousands and thousands of employees so you just don't",
    "start": "3110319",
    "end": "3117480"
  },
  {
    "text": "want to keep everybody in One domain so let me see here the laser pointer we got here we have company.com",
    "start": "3117480",
    "end": "3124400"
  },
  {
    "text": "which should be your company and we've split off into two different sections we have the West Section the west side of",
    "start": "3124400",
    "end": "3131400"
  },
  {
    "text": "the country and the east side over here as you can see the the domains um each",
    "start": "3131400",
    "end": "3136839"
  },
  {
    "text": "one has a separate KDC because as you know there's a specific domain controller for each domain this KDC is",
    "start": "3136839",
    "end": "3143319"
  },
  {
    "text": "actually the domain controller and we have server and we have clients in all these",
    "start": "3143319",
    "end": "3148880"
  },
  {
    "text": "domains um what's that what initially happens is this Windows 2000 machine",
    "start": "3148880",
    "end": "3156599"
  },
  {
    "text": "this client sends the ticket getting ticket request to the KDC um",
    "start": "3156599",
    "end": "3162960"
  },
  {
    "text": "unfortunately this K oh I'm sorry maybe I should mention it actually wants to reach the server over here sorry about",
    "start": "3162960",
    "end": "3168200"
  },
  {
    "text": "that it's what we're trying to do is this client right here is trying to",
    "start": "3168200",
    "end": "3173920"
  },
  {
    "text": "access the server in this completely other domain and as you can probably guess this server is not in this kdc's",
    "start": "3173920",
    "end": "3182960"
  },
  {
    "text": "Global catalog actually it is in the global catalog but it's not in its",
    "start": "3182960",
    "end": "3189280"
  },
  {
    "text": "realm um so it sends it tiet getting a uh ticket up to the KDC and that KDC",
    "start": "3189280",
    "end": "3196599"
  },
  {
    "text": "replies back searches its realm its uh database and doesn't find anything so it",
    "start": "3196599",
    "end": "3202920"
  },
  {
    "text": "sends what's called a referral ticket back to um the server and what this",
    "start": "3202920",
    "end": "3208000"
  },
  {
    "text": "referral ticket says is I am not the KDC for that server but you want to send the",
    "start": "3208000",
    "end": "3214640"
  },
  {
    "text": "the actual request to the server it then that machine does a",
    "start": "3214640",
    "end": "3222480"
  },
  {
    "text": "lookup and then verifies where that server is and then sends a ticket getting ticket again to the correct",
    "start": "3222480",
    "end": "3232039"
  },
  {
    "text": "KDC but it's passing through that KC it's not actually passing through it",
    "start": "3232480",
    "end": "3238319"
  },
  {
    "text": "it's referring it it goes to the KDC in the first place asks for the server it says I",
    "start": "3238319",
    "end": "3244720"
  },
  {
    "text": "don't have it so here's a ticket a referral ticket and it just directly goes to the KDC",
    "start": "3244720",
    "end": "3249839"
  },
  {
    "text": "itself and then and then actually and then it gets the correct and it gets the ticket and then it can start",
    "start": "3249839",
    "end": "3255760"
  },
  {
    "text": "establishing that session one thing just want to note is",
    "start": "3255760",
    "end": "3261240"
  },
  {
    "text": "that one thing the curve Rose ticket does is it keeps track of as it goes like this cross realm it keeps track of",
    "start": "3261240",
    "end": "3266640"
  },
  {
    "text": "the Realms it Traverse sorry go ahead I need uh one things keros does is in that",
    "start": "3266640",
    "end": "3272480"
  },
  {
    "text": "ticket it keeps track of the Realms that it traversed to get to its finally to its final point so if this were extended",
    "start": "3272480",
    "end": "3279720"
  },
  {
    "text": "to include a third one you would actually the the final KDC would actually track back and know that it",
    "start": "3279720",
    "end": "3285799"
  },
  {
    "text": "went to that one to that one to that one so there there is a path that's followed and the KDC uh can choose to reject uh",
    "start": "3285799",
    "end": "3294520"
  },
  {
    "text": "that path if it chooses but it it it is a recorded uh track of events of how it",
    "start": "3294520",
    "end": "3300040"
  },
  {
    "text": "got there record in the",
    "start": "3300040",
    "end": "3305240"
  },
  {
    "text": "ticket right okay so one thing that should mentioned here is um so actually can I",
    "start": "3306079",
    "end": "3313079"
  },
  {
    "text": "get a who here um has is pretty decently familiar with when with active directory",
    "start": "3313079",
    "end": "3318720"
  },
  {
    "text": "because I should probably step through a quick model of the way active directory works so this next part makes sense um",
    "start": "3318720",
    "end": "3325359"
  },
  {
    "text": "as you know active directory is very DNS dependent they've just taken this concept of DNS and you know ldap",
    "start": "3325359",
    "end": "3332359"
  },
  {
    "text": "type directories and kind of molded them together in this huge creates this huge database of every object that's on your",
    "start": "3332359",
    "end": "3337880"
  },
  {
    "text": "network and the way that it's organized is through domains exactly like DNS um",
    "start": "3337880",
    "end": "3343880"
  },
  {
    "text": "domains are what you'd expect I have my company.com and you have subdomains my",
    "start": "3343880",
    "end": "3350160"
  },
  {
    "text": "or easty company.com west. company.com exactly like this this is a domain they",
    "start": "3350160",
    "end": "3356000"
  },
  {
    "text": "also concepts of what are called forests what a forest is is a grouping of domains I might have my company.com and",
    "start": "3356000",
    "end": "3363920"
  },
  {
    "text": "your company.com and I can actually create what's called a forest and you can then actually give permissions to",
    "start": "3363920",
    "end": "3370839"
  },
  {
    "text": "people to established on the forest itself so you don't have to go through and and individually map things to each",
    "start": "3370839",
    "end": "3378400"
  },
  {
    "text": "domain and the reason why I bring this up is because kerros does not work through forests so if you have two",
    "start": "3378400",
    "end": "3385760"
  },
  {
    "text": "forests you have your company.com and my company.com and you try to establish a session between a machine with between",
    "start": "3385760",
    "end": "3392359"
  },
  {
    "text": "these two it will go back down to ntlm it will not support M multiple",
    "start": "3392359",
    "end": "3398640"
  },
  {
    "text": "forests and the reason this is is because what the KDC does to try to establish to to give it its referral",
    "start": "3398640",
    "end": "3405400"
  },
  {
    "text": "ticket it looks in the global catalog the global catalog is what um Windows",
    "start": "3405400",
    "end": "3411799"
  },
  {
    "text": "2000 calls basically that huge database of information it looks in there there",
    "start": "3411799",
    "end": "3416880"
  },
  {
    "text": "finds the server that you're looking for and then sends the referral ticket to that server if it can't get find it in",
    "start": "3416880",
    "end": "3422680"
  },
  {
    "text": "the global catalog then it doesn't work now only domain share Global cataloges forests do not hence it will not work",
    "start": "3422680",
    "end": "3430480"
  },
  {
    "text": "through Forest really important because you won't the the one of the big problems with keros on Windows 2000",
    "start": "3430480",
    "end": "3437480"
  },
  {
    "text": "while it's very slick and it incorporates really well you never know what the hell is going on at least with",
    "start": "3437480",
    "end": "3443680"
  },
  {
    "text": "Unix you know what's going on you establish the canate you watch it happen you NT it just happens and it's if",
    "start": "3443680",
    "end": "3449960"
  },
  {
    "text": "you're not paying attention all of a sudden you're using ntlm and you had no intention of doing so and especially",
    "start": "3449960",
    "end": "3456160"
  },
  {
    "text": "with Forest it's something you're going to do over the Internet because it's usually two different companies and that's definitely someplace you don't",
    "start": "3456160",
    "end": "3462319"
  },
  {
    "text": "want to be using ntlm now I don't have a solution to this problem so go",
    "start": "3462319",
    "end": "3468359"
  },
  {
    "text": "ahead looks like trying to uh",
    "start": "3468359",
    "end": "3477000"
  },
  {
    "text": "trying to why can't it's like DNS you know Prim DNS",
    "start": "3477000",
    "end": "3484480"
  },
  {
    "text": "doesn't know the answer doesn't query for you why can't KC do that well this",
    "start": "3484480",
    "end": "3489559"
  },
  {
    "text": "would be doing what's called a non-recursive query at this point um and the reason actually because",
    "start": "3489559",
    "end": "3496240"
  },
  {
    "text": "the load of the KDC would be the reason why um DNS for example he asked why why are we basically having why doesn't the",
    "start": "3496240",
    "end": "3503720"
  },
  {
    "text": "KDC itself make the request to the next KDC see and then move on on behalf of the of the the Windows 2000 professional",
    "start": "3503720",
    "end": "3510720"
  },
  {
    "text": "machine there and I would say the biggest answer is because of server bandwidth DNS uses UDP and it's like",
    "start": "3510720",
    "end": "3519079"
  },
  {
    "text": "that it's fast um keros ticket transaction isn't the fastest thing in the world and this amount of bandwidth",
    "start": "3519079",
    "end": "3525920"
  },
  {
    "text": "that it's used is only used once because from that point on this transaction between these two machines have no",
    "start": "3525920",
    "end": "3531480"
  },
  {
    "text": "interaction with the kdc's",
    "start": "3531480",
    "end": "3535200"
  },
  {
    "text": "yeah uh earlier yesterday they talked about having two different so would this support that one",
    "start": "3536960",
    "end": "3545000"
  },
  {
    "text": "internal in your company and one for external it would be it's kind of a different concept because what you're",
    "start": "3545000",
    "end": "3550760"
  },
  {
    "text": "actually would be doing is um you'd run your active directory on your internal you have to be running active directory",
    "start": "3550760",
    "end": "3556200"
  },
  {
    "text": "to to if you want to use the Windows 2000 unless you're I mean the realm you can't run off the external I mean you",
    "start": "3556200",
    "end": "3562160"
  },
  {
    "text": "could have a DNS server in the external and have a pass data back and forth through but you have to make sure your internal one is what holds your either",
    "start": "3562160",
    "end": "3569599"
  },
  {
    "text": "is your Unix box that's maintaining the realm or is the domain controller running active directory well if I understand that",
    "start": "3569599",
    "end": "3576640"
  },
  {
    "text": "right thenm on stuff that's not active directory",
    "start": "3576640",
    "end": "3584119"
  },
  {
    "text": "[Music] but are you talking about across the internet",
    "start": "3590850",
    "end": "3598038"
  },
  {
    "text": "yeah um I mean I that's tough I don't know if",
    "start": "3600400",
    "end": "3606839"
  },
  {
    "text": "you could actually do Kos across the internet like that just like blatantly with any company out there",
    "start": "3606839",
    "end": "3613680"
  },
  {
    "text": "um do ipulation well if you're doing IPC",
    "start": "3613680",
    "end": "3619319"
  },
  {
    "text": "encapsulation you're creating a tunnel and at that point you're kind of making your your inonet so the problem with",
    "start": "3619319",
    "end": "3625799"
  },
  {
    "text": "what what you're talking about is this entire network would have to be on the internet for that Windows 2000 professional to be able to establish a",
    "start": "3625799",
    "end": "3632160"
  },
  {
    "text": "curb session it has to have full access to the machine on the internet so the",
    "start": "3632160",
    "end": "3637920"
  },
  {
    "text": "firewall itself would block any real curb Rose traffic between it and the internet unless you use IPC to another",
    "start": "3637920",
    "end": "3643640"
  },
  {
    "text": "network does that make sense or am I not understand the question",
    "start": "3643640",
    "end": "3649680"
  },
  {
    "text": "okay okay no you you really you don't want to",
    "start": "3649799",
    "end": "3656200"
  },
  {
    "text": "use curos as your tunneling method if you want to create a VPN you really should use you know um what is that",
    "start": "3656200",
    "end": "3662640"
  },
  {
    "text": "called layered lt2p or whatever the layer 2 tunneling you want to use",
    "start": "3662640",
    "end": "3667799"
  },
  {
    "text": "encryption for your for your protocol right IP sec I think works quite well",
    "start": "3667799",
    "end": "3673280"
  },
  {
    "text": "for for tunneling as well also that there's just going to um",
    "start": "3673280",
    "end": "3679720"
  },
  {
    "text": "there's just going to be issues of it's not going to make sense I mean IPC is very resource intensive I mean if you have tons and tons of IPC traffic you're",
    "start": "3679720",
    "end": "3686480"
  },
  {
    "text": "probably going to be buying very expensive routers so you just need to apply what technology makes sense for what problem you're trying to solve you",
    "start": "3686480",
    "end": "3692640"
  },
  {
    "text": "may need IPC between to internets or or two externet and then uh uh C Roos makes",
    "start": "3692640",
    "end": "3699000"
  },
  {
    "text": "sense for keeping your accounting data you know separate from your engineering data or something um and those aren't",
    "start": "3699000",
    "end": "3705200"
  },
  {
    "text": "really mixable soes that get to your question yeah okay okay so one thing that I actually",
    "start": "3705200",
    "end": "3711720"
  },
  {
    "text": "did not mention with the initial uh cross domain is you actually need and",
    "start": "3711720",
    "end": "3716839"
  },
  {
    "text": "one reason why another reason why this won't necessarily work across the internet is you need a trust relationship established between the",
    "start": "3716839",
    "end": "3722480"
  },
  {
    "text": "domains that you're going to allow keros authentication through um and let me go over exactly",
    "start": "3722480",
    "end": "3730079"
  },
  {
    "text": "what that trust relationship looks like so if you look here we've got microsoft.com europe. microsoft.com and",
    "start": "3730079",
    "end": "3736119"
  },
  {
    "text": "far east. microsoft.com and we have kerro trust relationships between them",
    "start": "3736119",
    "end": "3742079"
  },
  {
    "text": "um but if you'll notice there's no trust relationship between Europe and this",
    "start": "3742079",
    "end": "3747559"
  },
  {
    "text": "bottom domain we'll call untrusted docomo",
    "start": "3747559",
    "end": "3754200"
  },
  {
    "text": "docomo we can than Microsoft transitive uh sorry there's a shortcut trust right",
    "start": "3756319",
    "end": "3763760"
  },
  {
    "text": "there um I created all kinds of trust relationships here but I did not create one here um we can think Microsoft",
    "start": "3763760",
    "end": "3771880"
  },
  {
    "text": "domains for this uh actually and I actually think this is in the KERO spec but I'm not positive cuz I was reading",
    "start": "3771880",
    "end": "3777039"
  },
  {
    "text": "about it but I was reading Microsoft documentation so they could be just making me believe it was actual spec so",
    "start": "3777039",
    "end": "3784039"
  },
  {
    "text": "what that means is that there is a trust relationship between these domains this is another thing you have to be very",
    "start": "3784039",
    "end": "3790240"
  },
  {
    "text": "wary of because it's all possible that you didn't really want this trust relationship to exist um but it does and",
    "start": "3790240",
    "end": "3798960"
  },
  {
    "text": "this the this this helps in administration a lot because otherwise",
    "start": "3798960",
    "end": "3804079"
  },
  {
    "text": "you'd have to have this domain trust this you'd have to have this domain and you end up with this huge network of",
    "start": "3804079",
    "end": "3810440"
  },
  {
    "text": "trusts which gets a little complicated by allowing this pass through trust it kind of simplifies your authentication",
    "start": "3810440",
    "end": "3817039"
  },
  {
    "text": "um your Administration and I think that's a good thing because wherever you have complicated Administration you have",
    "start": "3817039",
    "end": "3823880"
  },
  {
    "text": "you're going to have a problem with um you're going to you're going to forget something I mean I even forget things with simple configuration so who knows",
    "start": "3823880",
    "end": "3831480"
  },
  {
    "text": "what I do with that so this should uh but just something to be very wary of and realize you",
    "start": "3831480",
    "end": "3837319"
  },
  {
    "text": "know and know who where your trust relationships are happening let's see next slide oh and",
    "start": "3837319",
    "end": "3845039"
  },
  {
    "text": "then um as you can see here it does allow for we we've set up a Windows 2000 trust here which is going to be pure nlm",
    "start": "3845039",
    "end": "3852200"
  },
  {
    "text": "there's going to be no Kerberos through here and then one and then we set up a cerose",
    "start": "3852200",
    "end": "3858960"
  },
  {
    "text": "realm and this is going to be just ceros right here this is going to be for like your Unix servers and you've set up a",
    "start": "3858960",
    "end": "3864760"
  },
  {
    "text": "Unix realm the authentication to",
    "start": "3864760",
    "end": "3869079"
  },
  {
    "text": "there okay does anybody have any questions about the way um window those domains back back backup",
    "start": "3870559",
    "end": "3877680"
  },
  {
    "text": "one but that trust is only established that one other right here yes the this",
    "start": "3877680",
    "end": "3884760"
  },
  {
    "text": "this does not have as what I could tell this does not have actual trust with",
    "start": "3884760",
    "end": "3889960"
  },
  {
    "text": "these other domains because this keros realm is very specifically only trusting this domain",
    "start": "3889960",
    "end": "3897480"
  },
  {
    "text": "any other what said well see like I said when I read",
    "start": "3897880",
    "end": "3904240"
  },
  {
    "text": "the windows documentation it kind of implied that it was a curb standard for that I haven't done this um if it is a",
    "start": "3904240",
    "end": "3910520"
  },
  {
    "text": "curro standard then yes they're all going to be transitive explicit trust created",
    "start": "3910520",
    "end": "3917119"
  },
  {
    "text": "outside or otherwise as I was told are not trans you mean with uh like with this",
    "start": "3917119",
    "end": "3924760"
  },
  {
    "text": "right here yeah okay well I believe you I know that this how this works right here I'm not quite sure about this",
    "start": "3924760",
    "end": "3930440"
  },
  {
    "text": "aspect right there but I mean I'm that's something I'm looking into still like I said the the problem as far",
    "start": "3930440",
    "end": "3938039"
  },
  {
    "text": "as I've seen is the whole interoperability with Unix and Windows 2000 is kind of theoretical because I haven't seen anybody actually use it yet",
    "start": "3938039",
    "end": "3945319"
  },
  {
    "text": "other than maybe the Windows 2000 guys",
    "start": "3945319",
    "end": "3950119"
  },
  {
    "text": "yeah okay see how this work going back to ear",
    "start": "3952640",
    "end": "3958119"
  },
  {
    "text": "points there no cross possible there's no cross what cross",
    "start": "3958119",
    "end": "3966640"
  },
  {
    "text": "possible um the question was about cross realm authentication yes you can do crossr authentication it's cross",
    "start": "3966799",
    "end": "3974520"
  },
  {
    "text": "Forest I'm saying you hads each of those",
    "start": "3974520",
    "end": "3980319"
  },
  {
    "text": "sub um you will have kdcs in each of those subdomains that's how it works so",
    "start": "3980319",
    "end": "3985839"
  },
  {
    "text": "there is cross there's cross domain but there's not cross forest and that's the problem you have to understand what the",
    "start": "3985839",
    "end": "3992200"
  },
  {
    "text": "way yeah it's a plan words a forest like I said is a different do so it's a",
    "start": "3992200",
    "end": "3998599"
  },
  {
    "text": "different the problem is you got to separate what they're looking as domain is domain and subdomain so you have um",
    "start": "3998599",
    "end": "4005480"
  },
  {
    "text": "microsoft.com well if I had sun.com but I wanted to have everybody have one",
    "start": "4005480",
    "end": "4010799"
  },
  {
    "text": "person actually be the administrator for both microsoft.com and sun.com I would create a",
    "start": "4010799",
    "end": "4016640"
  },
  {
    "text": "forest do that make sense but between Sun and Microsoft I cannot do uh cerose",
    "start": "4016640",
    "end": "4023839"
  },
  {
    "text": "authentication because the way active directory works it only the active directory actually doesn't have a global",
    "start": "4023839",
    "end": "4029960"
  },
  {
    "text": "catalog for Sun",
    "start": "4029960",
    "end": "4033559"
  },
  {
    "text": "ticket is have you know that's my idty if I want to pass over you",
    "start": "4046559",
    "end": "4053839"
  },
  {
    "text": "know right yep and that'll work",
    "start": "4053839",
    "end": "4060319"
  },
  {
    "text": "fine okay so Unix using Unix kdcs with Windows 2000",
    "start": "4062119",
    "end": "4067480"
  },
  {
    "text": "authorization um as you can see here we have our uh we have our um Unix KDC right here",
    "start": "4067480",
    "end": "4075200"
  },
  {
    "text": "and Windows 2000 professional server here and we have a Windows 2000 active directory server KDC over here with a",
    "start": "4075200",
    "end": "4082319"
  },
  {
    "text": "Windows 2000 server and once again what we're going to want to do is we want the Windows 2000 server to make a connection",
    "start": "4082319",
    "end": "4088319"
  },
  {
    "text": "to this print server right here it sends the ticket ticketing",
    "start": "4088319",
    "end": "4094119"
  },
  {
    "text": "ticket getting ticket request up to the m to the uh Unix",
    "start": "4094119",
    "end": "4099838"
  },
  {
    "text": "KDC which then gives it a referral just like it would in um in the Windows 2000",
    "start": "4099839",
    "end": "4104880"
  },
  {
    "text": "environment and it does a name mapping with the NT account like I said you have to have a",
    "start": "4104880",
    "end": "4110880"
  },
  {
    "text": "name mapping between Unix and Windows 2000 it doesn't automatic this one thing the Unix does not just because it's",
    "start": "4110880",
    "end": "4117000"
  },
  {
    "text": "Cerros enabled it's not active directory enabled so Unix does not understand active directory you have to establish",
    "start": "4117000",
    "end": "4124238"
  },
  {
    "text": "name mapping between the two so it checks its database does a name map sends the ticket",
    "start": "4124239",
    "end": "4130080"
  },
  {
    "text": "back okay and then it sends the the the Authentication",
    "start": "4130080",
    "end": "4136400"
  },
  {
    "text": "and it just starts working like I said this is all transparent to the user on",
    "start": "4136400",
    "end": "4141640"
  },
  {
    "text": "Windows 2000 which can be very cool and very devastating at the same",
    "start": "4141640",
    "end": "4147718"
  },
  {
    "text": "time all right these are some of the differences I've noticed uh with NT ceros versus um MIT uh NT caches",
    "start": "4149560",
    "end": "4157560"
  },
  {
    "text": "passwords for Ticket renewal uh so that the users don't have to keep logging on uh that's different than Unix",
    "start": "4157560",
    "end": "4164359"
  },
  {
    "text": "world at this point it's not certain whether NT uses um uh caching of tracking um ticket caching for tracking",
    "start": "4164359",
    "end": "4172120"
  },
  {
    "text": "stolen replay tickets I haven't been able to nail that one down yet and I'm not sure that NT does it Unix does do",
    "start": "4172120",
    "end": "4177960"
  },
  {
    "text": "this um to prevent intercepted tickets and basically try to use you know like a you know pass the ticket type of",
    "start": "4177960",
    "end": "4186199"
  },
  {
    "text": "thing uh the other big thing um that I'm concerned about is Microsoft doesn't",
    "start": "4186199",
    "end": "4191560"
  },
  {
    "text": "support segregated kerro services like MIT does you can't split out the as server um with the ticket granting",
    "start": "4191560",
    "end": "4198640"
  },
  {
    "text": "server into two separate servers you talk about what those are yes all",
    "start": "4198640",
    "end": "4206159"
  },
  {
    "text": "right um I guess I haven't covered that yet uh kerro supports this idea of",
    "start": "4206159",
    "end": "4213000"
  },
  {
    "text": "having uh two separate Services the authentication Service and the ticket granting service there are actually two",
    "start": "4213000",
    "end": "4218600"
  },
  {
    "text": "separate entities and the authentication Service just authenticates the client and then it's out of the picture MI set",
    "start": "4218600",
    "end": "4225719"
  },
  {
    "text": "it up so that those could actually run on two separate servers so you could basically create two separate Bastion hosts have a very simple server that's",
    "start": "4225719",
    "end": "4232280"
  },
  {
    "text": "very easy to maintain very easy to guard since this is um where all of your authorization data lies um these should",
    "start": "4232280",
    "end": "4239560"
  },
  {
    "text": "be as simple as possible as easy to protect you know very non- busy servers easy to",
    "start": "4239560",
    "end": "4247719"
  },
  {
    "text": "audit uh you in Unix you can run them on the same server some people for Extra Protection run them on separate servers",
    "start": "4247760",
    "end": "4254080"
  },
  {
    "text": "if one gets compromised they have to go uh get into the other one and it does make it more difficult but the biggest",
    "start": "4254080",
    "end": "4259679"
  },
  {
    "text": "thing is just since it's it's simpler it's a lot easier to maintain and watch what's going",
    "start": "4259679",
    "end": "4265239"
  },
  {
    "text": "on uh I'll back up for a second um I have a slide on this this coming later",
    "start": "4265239",
    "end": "4271280"
  },
  {
    "text": "but Microsoft mixes these together they run both of those Services run on the",
    "start": "4271280",
    "end": "4276480"
  },
  {
    "text": "same box you can't separate them out also on a um a Microsoft uh new PDC",
    "start": "4276480",
    "end": "4286920"
  },
  {
    "text": "there's over 30 Services running so you have an incredibly busy server it's going to be very difficult to make",
    "start": "4286920",
    "end": "4292400"
  },
  {
    "text": "Bastion host with this and I do I personally have a problem with that um",
    "start": "4292400",
    "end": "4297960"
  },
  {
    "text": "one of the reasons I bring this up to you guys is you guys do have purchasing power and one thing Microsoft is good at",
    "start": "4297960",
    "end": "4303280"
  },
  {
    "text": "is that they do listen to customer requests so if enough customers you know talk about this and want this you will",
    "start": "4303280",
    "end": "4308880"
  },
  {
    "text": "see it happen another brand new thing for um uh",
    "start": "4308880",
    "end": "4317000"
  },
  {
    "text": "n administrators is a delegation keros under n supports full delegation nt4 did",
    "start": "4317000",
    "end": "4324960"
  },
  {
    "text": "not do that I I I have a really hard time saying Windows 2000 and windows 2K is",
    "start": "4324960",
    "end": "4330400"
  },
  {
    "text": "like this whole big thing and I really hate saying that so if you hear me say NT I mix them up a lot to me it's still",
    "start": "4330400",
    "end": "4335920"
  },
  {
    "text": "NT with just new stuff and so I'll try not to confuse",
    "start": "4335920",
    "end": "4341600"
  },
  {
    "text": "you but under Windows 2000 uh you now have the ability to delegate a",
    "start": "4341600",
    "end": "4349880"
  },
  {
    "text": "client's credentials across several hosts and have one server make requests",
    "start": "4349880",
    "end": "4355280"
  },
  {
    "text": "to other servers on that client's behalf using that client's uh credentials now that has a lot of",
    "start": "4355280",
    "end": "4362000"
  },
  {
    "text": "implications for you as an administrator because nt4 did not have",
    "start": "4362000",
    "end": "4367400"
  },
  {
    "text": "this capability if a N4 servers never stored the user credentials or the",
    "start": "4367400",
    "end": "4373800"
  },
  {
    "text": "password so an n server could never authenticate uh a user to another server",
    "start": "4373800",
    "end": "4380639"
  },
  {
    "text": "however kerro solves this problem uh with ticket forwarding we're not going to talk about ticket forwarding today",
    "start": "4380639",
    "end": "4387480"
  },
  {
    "text": "but with ticket forwarding since the server is able to basically impersonate the client fully",
    "start": "4387480",
    "end": "4394639"
  },
  {
    "text": "it can travel around the domain as that user now this is really useful because",
    "start": "4394639",
    "end": "4399800"
  },
  {
    "text": "when you set up your acl's properly then clients will only have access to the things that they're supposed to have access",
    "start": "4399800",
    "end": "4405679"
  },
  {
    "text": "however it does require you to start tracking the stuff and know what's going on people who have e-commerce sites with different databases here a Visa database",
    "start": "4405679",
    "end": "4412320"
  },
  {
    "text": "here um you know some file databases here and your developers start making use of impersonation uh it increases the",
    "start": "4412320",
    "end": "4419920"
  },
  {
    "text": "security but you're going to start seeing users show up in your log so it's it's it's going to be different",
    "start": "4419920",
    "end": "4426960"
  },
  {
    "text": "um the all right so it didn't exist before",
    "start": "4426960",
    "end": "4433080"
  },
  {
    "text": "it's a new management task that you're going to have to beware Ware of it's there's going to be a new way that you're going to have to look at your",
    "start": "4433080",
    "end": "4439480"
  },
  {
    "text": "logs uh the big Pro of this is that it really does help uh control proper ACL usage um if you have if a client makes a",
    "start": "4439480",
    "end": "4448679"
  },
  {
    "text": "request um see if a client makes a request like uh let's say this is um IIs",
    "start": "4448679",
    "end": "4456960"
  },
  {
    "text": "and this is um uh part of the service uh your e-commerce service that the client's trying to get to and he makes a",
    "start": "4456960",
    "end": "4462440"
  },
  {
    "text": "request here the server is going to impersonate that user this yellow represents an",
    "start": "4462440",
    "end": "4469159"
  },
  {
    "text": "incoming client request the red represents the server he's going to call what's the actual impersonate user API",
    "start": "4469159",
    "end": "4476600"
  },
  {
    "text": "with the impersonate this completely totally wraps the entire keros uh ticket",
    "start": "4476600",
    "end": "4482920"
  },
  {
    "text": "forwarding algorithm and allows the server to take on the role of the client and now this the server only has",
    "start": "4482920",
    "end": "4490280"
  },
  {
    "text": "permissions that the client has so it's not possible for the the the server or for the client to have access",
    "start": "4490280",
    "end": "4497719"
  },
  {
    "text": "to more things than what he was granted if a strong enough uh account is",
    "start": "4497719",
    "end": "4504120"
  },
  {
    "text": "compromised this can be dangerous because it it's just like you know compromising um uh domain admin",
    "start": "4504120",
    "end": "4512638"
  },
  {
    "text": "account the con is that it can get out of hand if it's not properly controlled um you can have users going all over the",
    "start": "4513760",
    "end": "4520159"
  },
  {
    "text": "place cuz it it does does have some problems there you got some all",
    "start": "4520159",
    "end": "4528400"
  },
  {
    "text": "right all right one thing I wanted to do uh and I will have these available online I I learned from some of the other speakers that this just didn't go",
    "start": "4529199",
    "end": "4535360"
  },
  {
    "text": "over well because you you couldn't see them but with some pocket traces I went through and I documented some actual",
    "start": "4535360",
    "end": "4541320"
  },
  {
    "text": "keros packet traces so you can see the the traffic patterns and um I thought it",
    "start": "4541320",
    "end": "4546800"
  },
  {
    "text": "came out pretty cool for me when I want to look at the diagram I want to understand the traffic that's running underneath my network so uh I realized",
    "start": "4546800",
    "end": "4553239"
  },
  {
    "text": "if I put these up on here in the slides and went down you most of you people wouldn't be able to see it anyway so if you're interested in it uh if you go to",
    "start": "4553239",
    "end": "4560760"
  },
  {
    "text": "this URL after August 7th that's when I get back uh there will be a package there and you can go through it and if",
    "start": "4560760",
    "end": "4568920"
  },
  {
    "text": "you go through and read it and then run your own net sniffer you it should start to make sense to you this new traffic that you'll be seeing when you",
    "start": "4568920",
    "end": "4575600"
  },
  {
    "text": "install active directory services on your network",
    "start": "4575600",
    "end": "4580800"
  },
  {
    "text": "all right uh when we all started this thing you know we had this idea of um uh",
    "start": "4587840",
    "end": "4593360"
  },
  {
    "text": "we wanted to start using the new security features in active director to start doing stuff and after a while of",
    "start": "4593360",
    "end": "4599600"
  },
  {
    "text": "you know digging through everything I just came to what I really wanted to use was I was actually really excited that",
    "start": "4599600",
    "end": "4604920"
  },
  {
    "text": "uh Cabos was being used by Microsoft it does present some really cool",
    "start": "4604920",
    "end": "4610000"
  },
  {
    "text": "things the one thing Microsoft currently doesn't do is they doesn't they don't offer uh a sh I was always disappointed",
    "start": "4610000",
    "end": "4616120"
  },
  {
    "text": "that no one so far has made sshd uh for NT so the closest thing I could do was",
    "start": "4616120",
    "end": "4622920"
  },
  {
    "text": "come up with a kerberized version of a service while the Microsoft Services all",
    "start": "4622920",
    "end": "4629239"
  },
  {
    "text": "have built-in ability to uh do authentication most of them aren't configured to do data encryption across",
    "start": "4629239",
    "end": "4635800"
  },
  {
    "text": "the wire and there is no remote shell data encryption that that I'm aware of maybe so anyway",
    "start": "4635800",
    "end": "4643480"
  },
  {
    "text": "is there who makes that yeah there is at least one if you",
    "start": "4646440",
    "end": "4651719"
  },
  {
    "text": "go to",
    "start": "4651719",
    "end": "4654080"
  },
  {
    "text": "the now F secure shied away from that they they didn't touch that they created a whole new IP SE thing okay the the",
    "start": "4659440",
    "end": "4667600"
  },
  {
    "text": "closest thing I'd ever I'd be interested in the URL the only thing I'd ever seen was there was a guy in Russia that had made one that ran off sigin but I didn't",
    "start": "4667600",
    "end": "4673280"
  },
  {
    "text": "really want to use that so I don't oh excellent if you have the URL I'd love to have it but I haven't seen",
    "start": "4673280",
    "end": "4679639"
  },
  {
    "text": "it um so anyway it was a good idea kind of to get my hands dirty play around with it and see what was going on um netcat",
    "start": "4679639",
    "end": "4687199"
  },
  {
    "text": "is a great tool it's been around um so I thought the cool thing to do for black hat would be to update it a bit and it",
    "start": "4687199",
    "end": "4694360"
  },
  {
    "text": "required um all right so I'm getting home this will also be at this",
    "start": "4694360",
    "end": "4700280"
  },
  {
    "text": "website uh after August 7th when I get back it'll have a source code to it and I've gone through and documented it so",
    "start": "4700280",
    "end": "4706159"
  },
  {
    "text": "you can see the changes that were made to it and where Kerberos was plugged into",
    "start": "4706159",
    "end": "4711638"
  },
  {
    "text": "it there were a couple issues that came up in trying to um uh cize",
    "start": "4712199",
    "end": "4717639"
  },
  {
    "text": "netcat um basically uh netcat is great because you can uh T that into an NT",
    "start": "4717639",
    "end": "4722880"
  },
  {
    "text": "server run stuff personally I I use the uh MKS toolkit so if anyone here runs",
    "start": "4722880",
    "end": "4728440"
  },
  {
    "text": "that um what I really like doing is tting in and running it just like a Unix server so because of that I had the",
    "start": "4728440",
    "end": "4735679"
  },
  {
    "text": "option of either encrypting character or running through the ceros encryption stuff character by character or changing",
    "start": "4735679",
    "end": "4741719"
  },
  {
    "text": "the default behavior of netcat to basically do a bulk send encrypt and decrypt so I chose that",
    "start": "4741719",
    "end": "4748639"
  },
  {
    "text": "option so depending on what mode you put netcat in you get two different",
    "start": "4748639",
    "end": "4754760"
  },
  {
    "text": "behaviors I also had to build a new client to work with netcat in that mode",
    "start": "4754760",
    "end": "4760080"
  },
  {
    "text": "so you'll see that as well and source code will be available for that",
    "start": "4760080",
    "end": "4765679"
  },
  {
    "text": "this just represents how I really like to work um and with this I have um since I do a lot of administrative tasks that",
    "start": "4765679",
    "end": "4772080"
  },
  {
    "text": "are pretty confidential for me using this with MKS shell is pretty effective solution and to me it's been one of the",
    "start": "4772080",
    "end": "4778080"
  },
  {
    "text": "it's one of the coolest things I've been able to do hopefully you guys will will think it's cool Joey bought me a round of",
    "start": "4778080",
    "end": "4784560"
  },
  {
    "text": "drinks when I told him about it so that was kind of",
    "start": "4784560",
    "end": "4788800"
  },
  {
    "text": "encouraging some differences that you probably should be aware of and this has a couple ramifications for",
    "start": "4790520",
    "end": "4795840"
  },
  {
    "text": "administrators who do uh forensic auditing and you have to start looking at binary",
    "start": "4795840",
    "end": "4802480"
  },
  {
    "text": "files uh these are the actual API calls some of them Microsoft has about 15 API",
    "start": "4802480",
    "end": "4808719"
  },
  {
    "text": "calls to make a make curbo sessions for",
    "start": "4808719",
    "end": "4814040"
  },
  {
    "text": "applications this is a couple of them uh I have a full list on the site",
    "start": "4814040",
    "end": "4819880"
  },
  {
    "text": "if you want to go there one of the bigger things though and the the real reason I bring this up",
    "start": "4819880",
    "end": "4826480"
  },
  {
    "text": "is that if you compare it to this list of the Unix apis you can see how drastically different they are Unix has",
    "start": "4826480",
    "end": "4831679"
  },
  {
    "text": "about 30 API calls uh for doing uh programming now this is really going to",
    "start": "4831679",
    "end": "4837080"
  },
  {
    "text": "affect you guys in a way um because it's really going to have a dramatic effect on porting applications so the",
    "start": "4837080",
    "end": "4844120"
  },
  {
    "text": "programmers who are doing this are going to have to do something completely totally different and this is one thing",
    "start": "4844120",
    "end": "4849320"
  },
  {
    "text": "I'm a little bit upset with Microsoft about because I didn't I don't know why they did this it's really going to make porting a dragon and it's going to cause",
    "start": "4849320",
    "end": "4855840"
  },
  {
    "text": "some delay in getting some cooler applications um uh cized Unix has got",
    "start": "4855840",
    "end": "4861679"
  },
  {
    "text": "some great stuff and it' be great if NT could make use of that since they've got this infrastructure that works now",
    "start": "4861679",
    "end": "4868080"
  },
  {
    "text": "they've made porting applications difficult I don't understand that so I'm hoping you guys with",
    "start": "4868080",
    "end": "4873480"
  },
  {
    "text": "purchasing power are going to March over there and start demanding",
    "start": "4873480",
    "end": "4878920"
  },
  {
    "text": "stuff someone have a question no I said it's just deviation from the uh",
    "start": "4878920",
    "end": "4886560"
  },
  {
    "text": "yeah okay so out of all this here were some uh Microsoft criticisms I had criticisms aren't necessarily bad",
    "start": "4889400",
    "end": "4895719"
  },
  {
    "text": "they're just you know things I'd like to see uh for the future um there are some things I think Microsoft has done a",
    "start": "4895719",
    "end": "4901080"
  },
  {
    "text": "really good job on these are just uh my nitpicks the first and foremost is the",
    "start": "4901080",
    "end": "4907199"
  },
  {
    "text": "As and ticket graning components cannot be separated out to Standalone Services uh this breaks from MIT and I do think",
    "start": "4907199",
    "end": "4914000"
  },
  {
    "text": "it affects guys directly because it's going to be harder for you guys to maintain and make Bastion host if you cannot separate out the Windows 2000",
    "start": "4914000",
    "end": "4921719"
  },
  {
    "text": "parts or the active directory parts from the cabaro",
    "start": "4921719",
    "end": "4927040"
  },
  {
    "text": "parts uh I really would love to see uh Windows have the ability to be trimmed down it was it was great to take the CD",
    "start": "4927880",
    "end": "4935920"
  },
  {
    "text": "install it and have everything up and running take a laptop with you and and have tons of functionality was incredibly easy to set up uh however",
    "start": "4935920",
    "end": "4943719"
  },
  {
    "text": "once you start working with with it on a large scale um that ease of use starts to have",
    "start": "4943719",
    "end": "4950719"
  },
  {
    "text": "problems Windows NT or Windows 2000 domain controller runs by just basically",
    "start": "4952920",
    "end": "4958159"
  },
  {
    "text": "by default 24 to 30 Services uh winds DNS DFS IIs um that just creates a",
    "start": "4958159",
    "end": "4965400"
  },
  {
    "text": "really noisy system and it does effect I I spent a",
    "start": "4965400",
    "end": "4970440"
  },
  {
    "text": "lot of time looking at low-level security issues and I'm just becoming more and more convinced that it's it's not the lowlevel security issues that",
    "start": "4970440",
    "end": "4975800"
  },
  {
    "text": "are the problem we're always going to be plagued with that but it really does you know come to manageability since these two things",
    "start": "4975800",
    "end": "4982239"
  },
  {
    "text": "directly affect manageability I actually um I think these affect security far more than any of the low-level issues I",
    "start": "4982239",
    "end": "4989800"
  },
  {
    "text": "am far more worried about this than I am about you know someone spoofing my ticket or or some someone playing around",
    "start": "4989800",
    "end": "4995920"
  },
  {
    "text": "with the bits um I have a good question go ahead um",
    "start": "4995920",
    "end": "5003080"
  },
  {
    "text": "what what kind of is",
    "start": "5003080",
    "end": "5007840"
  },
  {
    "text": "ofices a more M I haven't even heard of those things directory you mean within",
    "start": "5013440",
    "end": "5018679"
  },
  {
    "text": "active directory there is no difference oh sorry the active D he's asking um how many service variations there are when",
    "start": "5018679",
    "end": "5024440"
  },
  {
    "text": "you have a active directory take on different roles for instance being a certificate Authority or depending on",
    "start": "5024440",
    "end": "5031120"
  },
  {
    "text": "what kind of services you have in your domain is that what you're asking no there",
    "start": "5031120",
    "end": "5036440"
  },
  {
    "text": "and those they they don't affect what services you're running at all all they affect is basically the database the",
    "start": "5042520",
    "end": "5048120"
  },
  {
    "text": "global catalog and the and the and the schema catalog wow well if you run winds then it will",
    "start": "5048120",
    "end": "5055600"
  },
  {
    "text": "they'll have a win service but that's not NE I mean that's more of Legacy support for active directory if you're",
    "start": "5055600",
    "end": "5061800"
  },
  {
    "text": "running native active directory then you won't have that stuff",
    "start": "5061800",
    "end": "5066320"
  },
  {
    "text": "okay I also have a criticism for users and buyers um some of you guys here in the audience have",
    "start": "5069080",
    "end": "5076480"
  },
  {
    "text": "incredibly I also have a criticism for users and buyers um some of you guys out there have large budgets and you will be",
    "start": "5076480",
    "end": "5082600"
  },
  {
    "text": "buying stuff and and Microsoft is good about lisening so it's going to depend on what you ask them what you demand",
    "start": "5082600",
    "end": "5088520"
  },
  {
    "text": "with your purchasing power and again I really do think that this affects security far more than anything else I",
    "start": "5088520",
    "end": "5094159"
  },
  {
    "text": "mean Microsoft can run security patches you know day and night but there are some",
    "start": "5094159",
    "end": "5099600"
  },
  {
    "text": "fundamental things that need to take place but people aren't asking for those people are really asking for",
    "start": "5099600",
    "end": "5105040"
  },
  {
    "text": "fixes the second biggest thing is Windows 2000 has really dropped a lot of",
    "start": "5105040",
    "end": "5110639"
  },
  {
    "text": "stuff on us it's huge um the amount of things that that we were you know just trying to cover to get ready for the",
    "start": "5110639",
    "end": "5116320"
  },
  {
    "text": "talk and everything um it's really large it's going to take everyone a long time to get really comfortable with it understand all the bits and",
    "start": "5116320",
    "end": "5122719"
  },
  {
    "text": "pieces how they uh interoperate what's the best use in which case and it really",
    "start": "5122719",
    "end": "5128880"
  },
  {
    "text": "needs time to time to mature however users haven't really been willing to pay",
    "start": "5128880",
    "end": "5133960"
  },
  {
    "text": "for maturity people with purchasing power want new features they want this they want that and that's what they pay",
    "start": "5133960",
    "end": "5139239"
  },
  {
    "text": "for I don't know many people who uh you know pay for just you know stabilized versions of things you know if one",
    "start": "5139239",
    "end": "5145320"
  },
  {
    "text": "application didn't change for two years most people aren't willing to buy they want to buy the next version um so this",
    "start": "5145320",
    "end": "5151800"
  },
  {
    "text": "is just something you know you guys this is driven by you guys so it's up to",
    "start": "5151800",
    "end": "5158199"
  },
  {
    "text": "you what I would love to see now we've got this whole big mess I'd love to just see it mature for two years before you know Microsoft drops the next big thing",
    "start": "5158199",
    "end": "5164760"
  },
  {
    "text": "on us but Microsoft will if users start telling them that that's what they want anyway but as a security person this is",
    "start": "5164760",
    "end": "5171040"
  },
  {
    "text": "really what I want to see now now I want some time to rest a little",
    "start": "5171040",
    "end": "5175280"
  },
  {
    "text": "bit wow all right hey it's lunch so if people want to go um so why don't break",
    "start": "5180960",
    "end": "5186159"
  },
  {
    "text": "off and then start and finish this up when we get back all right have",
    "start": "5186159",
    "end": "5193080"
  },
  {
    "text": "left um you can pretty much skip my notes there you are thanks for coming so actually so we have the next part of",
    "start": "5193080",
    "end": "5198400"
  },
  {
    "text": "this session um we're going to finish up with the ceros and answer any questions that you have about keros and then we're",
    "start": "5198400",
    "end": "5203800"
  },
  {
    "text": "going to get into the encrypted file [Applause]",
    "start": "5203800",
    "end": "5211400"
  },
  {
    "text": "system you're ftping it to um a directory that doesn't support NTFS it will not stay",
    "start": "5211400",
    "end": "5218800"
  },
  {
    "text": "encrypted I mean it will just automatically decrypt it for you as I said the operating system does all this",
    "start": "5219000",
    "end": "5224639"
  },
  {
    "text": "nice stuff for you underneath the hood which can be kind of cool and can be kind of bad at the same time and this is",
    "start": "5224639",
    "end": "5230880"
  },
  {
    "text": "one one of those examples although another example if your user then copies",
    "start": "5230880",
    "end": "5237040"
  },
  {
    "text": "this file it will the encrypted version will be encrypted or the the copied",
    "start": "5237040",
    "end": "5242119"
  },
  {
    "text": "version will be encrypted as well so as far and I I I really hammered on",
    "start": "5242119",
    "end": "5248320"
  },
  {
    "text": "this for probably about three or four days just trying to find some way to move the file copy it you know rename it",
    "start": "5248320",
    "end": "5255080"
  },
  {
    "text": "try to I could delete the file but I could not accomplish a way to read the",
    "start": "5255080",
    "end": "5261840"
  },
  {
    "text": "file no if it's an NTFS partition it will not decrypted compression yes it's",
    "start": "5264719",
    "end": "5272360"
  },
  {
    "text": "absolutely different than the compression attribute window right that's a good point it um",
    "start": "5272360",
    "end": "5279000"
  },
  {
    "text": "nt4 does not support encrypted file system because it doesn't support the whole key structure I mean that's one",
    "start": "5279000",
    "end": "5284800"
  },
  {
    "text": "thing I guess we're not really getting into this is how to really get a to get the fullest understanding of this you",
    "start": "5284800",
    "end": "5289880"
  },
  {
    "text": "need to understand how certificates and public Keys exist on Windows 2000 and",
    "start": "5289880",
    "end": "5295239"
  },
  {
    "text": "this uses that infrastructure all",
    "start": "5295239",
    "end": "5301880"
  },
  {
    "text": "right if you're on a computer a different computer than the than the other computer must be Tre trusted for",
    "start": "5303119",
    "end": "5309400"
  },
  {
    "text": "delegation so if basically you're trying to read a file on somebody else's",
    "start": "5309400",
    "end": "5314679"
  },
  {
    "text": "computer or on another computer but you do have access to it and you have the key you will not be able to read it",
    "start": "5314679",
    "end": "5320960"
  },
  {
    "text": "unless the computers are set up to be trusted for delegation basically what this is in Windows 2000 it is the method",
    "start": "5320960",
    "end": "5328199"
  },
  {
    "text": "how it passes private Keys around or allows private keys to be used on multiple computers by default private",
    "start": "5328199",
    "end": "5334600"
  },
  {
    "text": "keys can only be used on the computer that it's stored on but when you turn on this trusted for delegation it can be",
    "start": "5334600",
    "end": "5341159"
  },
  {
    "text": "used on other computers real sticky sub subject to use something like that and before you turn",
    "start": "5341159",
    "end": "5346800"
  },
  {
    "text": "delegation on you should make sure it's something specifically that you want",
    "start": "5346800",
    "end": "5351760"
  },
  {
    "text": "on okay um so the concern is backing up",
    "start": "5353199",
    "end": "5358880"
  },
  {
    "text": "uh if I move this into an non NFS partition how am I going to be able to back up my and keep it",
    "start": "5358880",
    "end": "5365639"
  },
  {
    "text": "encrypted Microsoft came up with a solution um specifically using the Windows 2000 backup system you have to",
    "start": "5365639",
    "end": "5372520"
  },
  {
    "text": "use either the Windows 2000 Backup Tool or any tool that uses the apis provided",
    "start": "5372520",
    "end": "5378040"
  },
  {
    "text": "by Microsoft so any backup system that says specifically made for Windows 2000 will support this but what happens is",
    "start": "5378040",
    "end": "5385000"
  },
  {
    "text": "when you copy these files and you move it to any kind of media be it a optical CD ROM tape whatever it will hold its",
    "start": "5385000",
    "end": "5392719"
  },
  {
    "text": "encryption it will not unencrypted at that point but it will only do this through these",
    "start": "5392719",
    "end": "5400119"
  },
  {
    "text": "tools um and this is is actually a good way to back up um and recover files",
    "start": "5400119",
    "end": "5407400"
  },
  {
    "text": "you'll run into this if a user has left the company and he has a lot of",
    "start": "5407400",
    "end": "5413199"
  },
  {
    "text": "encrypted files and you have no idea how to to recover them you can back up all his encrypted files it'll stay",
    "start": "5413199",
    "end": "5420000"
  },
  {
    "text": "encrypted and it will allow you to encrypt to back it up and then you can send it to the whoever your recovery agent is and he then will be able to",
    "start": "5420000",
    "end": "5426800"
  },
  {
    "text": "decrypt them and by the way if anybody has any questions please feel free to to stop me",
    "start": "5426800",
    "end": "5433000"
  },
  {
    "text": "anytime",
    "start": "5433000",
    "end": "5435920"
  },
  {
    "text": "yeah um it's never shuttled around the key is the keys are never stored in active directory the keys are always",
    "start": "5438800",
    "end": "5445000"
  },
  {
    "text": "stored in the local machine so basically you have to shuttle the files to the computer you don't",
    "start": "5445000",
    "end": "5451239"
  },
  {
    "text": "shuttle the keys around what if you turn on that it what it does is it actually has it go",
    "start": "5451239",
    "end": "5457880"
  },
  {
    "text": "to the computer to read the uh the private key yeah it's not an active directory",
    "start": "5457880",
    "end": "5463960"
  },
  {
    "text": "it's the the directory doesn't store the private key at that point presumably",
    "start": "5463960",
    "end": "5471599"
  },
  {
    "text": "because still password as ANM as well as",
    "start": "5478400",
    "end": "5484719"
  },
  {
    "text": "that's only if you're using um like if you're using a mixed environment otherwise it'll use keros",
    "start": "5484719",
    "end": "5492000"
  },
  {
    "text": "actually yeah you'll still have the N domain it'll still have the same database with the the ENT hashing and",
    "start": "5492239",
    "end": "5497679"
  },
  {
    "text": "everything like that access right because then you have",
    "start": "5497679",
    "end": "5505480"
  },
  {
    "text": "they have access to your key well not if it's an inlm machine because ntlm can't do the delegation so it will break down",
    "start": "5505480",
    "end": "5512280"
  },
  {
    "text": "at that point here that's all I have to say that's the thing I know I'm actually here to to",
    "start": "5512280",
    "end": "5518440"
  },
  {
    "text": "watch myself but you know I I do know that that one thing um ntlm can't",
    "start": "5518440",
    "end": "5523600"
  },
  {
    "text": "authenticate to another machine so um at that point it'll just it'll just stop it won't",
    "start": "5523600",
    "end": "5530320"
  },
  {
    "text": "work um you can like I said use backup to send file to Recovery Agent",
    "start": "5530320",
    "end": "5535600"
  },
  {
    "text": "administrator so how it works EFS uses a symmetric key encryption along with",
    "start": "5535600",
    "end": "5541800"
  },
  {
    "text": "public key encryption in combination to give you the speed and to give you the the power of public key um the file",
    "start": "5541800",
    "end": "5549159"
  },
  {
    "text": "encryption key is a symmetric bulk encryption key this is what actually does the work of encrypting the file and",
    "start": "5549159",
    "end": "5555560"
  },
  {
    "text": "this is a basically a symmetric bult key is a key that is uh that is used to as",
    "start": "5555560",
    "end": "5560960"
  },
  {
    "text": "it says encrypt bulk and large amounts of files it's expected to be",
    "start": "5560960",
    "end": "5567440"
  },
  {
    "text": "fast do you know what what algorithm you us well it uses desz X okay Dez X is a extended version of",
    "start": "5567960",
    "end": "5575920"
  },
  {
    "text": "Dez created by Microsoft it's a standard though at this",
    "start": "5575920",
    "end": "5583360"
  },
  {
    "text": "point but it was created by Microsoft that matters was that",
    "start": "5583360",
    "end": "5589520"
  },
  {
    "text": "publish yes it is um and it as far as I know NSA hasn't",
    "start": "5589520",
    "end": "5594560"
  },
  {
    "text": "really looked at it yet but put a little back door in or anything",
    "start": "5594560",
    "end": "5601280"
  },
  {
    "text": "um so the way this works to be to be secure is you use the uh the file",
    "start": "5601280",
    "end": "5608080"
  },
  {
    "text": "encryption key is is basically a nice bulk encryption key but then it takes",
    "start": "5608080",
    "end": "5613119"
  },
  {
    "text": "that file encryption key and it encrypts that and it actually encrypts that using",
    "start": "5613119",
    "end": "5618719"
  },
  {
    "text": "the user's public key now that particular algorithm is RSA",
    "start": "5618719",
    "end": "5625400"
  },
  {
    "text": "in case anybody's interested uses the RSA base encryption algorithm for its public key access so it uses the public",
    "start": "5625400",
    "end": "5631159"
  },
  {
    "text": "key and encrypts it at that point um and then the encrypted version of the",
    "start": "5631159",
    "end": "5637559"
  },
  {
    "text": "F the encrypted version of the f is then stored with the file and is unique to",
    "start": "5637920",
    "end": "5643520"
  },
  {
    "text": "each file",
    "start": "5643520",
    "end": "5648719"
  },
  {
    "text": "okay so the way the proper way if you want to handle recovery",
    "start": "5651280",
    "end": "5657600"
  },
  {
    "text": "Keys is you want to make sure that the best way to do it is you export the private keys from the recovery account",
    "start": "5657600",
    "end": "5663119"
  },
  {
    "text": "and remove them the computer and the reason why you want to do this is because you really don't want these",
    "start": "5663119",
    "end": "5668400"
  },
  {
    "text": "things hanging around recovery Keyes give everybody whoever gets access to this key it gives them access to every",
    "start": "5668400",
    "end": "5676159"
  },
  {
    "text": "other file that's been encrypted that this knows about and you want to keep these Keys stored in locked storage and",
    "start": "5676159",
    "end": "5683040"
  },
  {
    "text": "also you actually want to keep two copies of it you want to keep one copy on on board and a lock storage and you",
    "start": "5683040",
    "end": "5688880"
  },
  {
    "text": "want to keep another copy on offside location in another safe",
    "start": "5688880",
    "end": "5694410"
  },
  {
    "text": "[Music]",
    "start": "5694410",
    "end": "5701670"
  },
  {
    "text": "okay all right so I'm going to actually draw a diagram now up here uh I'm going",
    "start": "5701880",
    "end": "5707159"
  },
  {
    "text": "to show you guys exactly what an encrypted well not exactly because it's just a a diagram of what an encrypted",
    "start": "5707159",
    "end": "5712320"
  },
  {
    "text": "file looks like um takes two keys it's actually made up of up",
    "start": "5712320",
    "end": "5719960"
  },
  {
    "text": "to three up at very least three parts",
    "start": "5719960",
    "end": "5725639"
  },
  {
    "text": "this is the actual data that you're looking at and the FK creates What's called the",
    "start": "5727280",
    "end": "5737280"
  },
  {
    "text": "ddk this is one FK and this is the other",
    "start": "5737280",
    "end": "5743880"
  },
  {
    "text": "one so what you're looking at here this is the file encryption key signed with",
    "start": "5747119",
    "end": "5752280"
  },
  {
    "text": "the users public key which creates What's called the data decryption",
    "start": "5752280",
    "end": "5759119"
  },
  {
    "text": "key and also underneath it creates What's called the data recovery key and",
    "start": "5759119",
    "end": "5764320"
  },
  {
    "text": "this is an FK that's created with the um that this is this FK is same as this one",
    "start": "5764320",
    "end": "5770440"
  },
  {
    "text": "but this one is actually encrypted using the recovery agent public key this is",
    "start": "5770440",
    "end": "5775760"
  },
  {
    "text": "how the recovery agent will always have access to this file and this you can have as many of these particular Fields",
    "start": "5775760",
    "end": "5783040"
  },
  {
    "text": "as you have recovery agents in your domain is that clear",
    "start": "5783040",
    "end": "5790760"
  },
  {
    "text": "[Music] okay okay so the main components that make up EFS are the crypto",
    "start": "5795510",
    "end": "5802480"
  },
  {
    "text": "API the EFS service itself the EFS driver and the EFS file system runtime",
    "start": "5802480",
    "end": "5809600"
  },
  {
    "text": "Library let me kind of give you a drawing of the way how the components",
    "start": "5809600",
    "end": "5817000"
  },
  {
    "text": "interact so the first thing that happens is uh you have an",
    "start": "5826560",
    "end": "5833520"
  },
  {
    "text": "application in every situation that I've used the application is Windows Explorer",
    "start": "5833520",
    "end": "5838600"
  },
  {
    "text": "Windows Explorer makes a call to the uh 132 subsystem",
    "start": "5838600",
    "end": "5844560"
  },
  {
    "text": "that sees that it's a an encrypted file and it first sends things off to the um",
    "start": "5845239",
    "end": "5852080"
  },
  {
    "text": "EFS",
    "start": "5852080",
    "end": "5854560"
  },
  {
    "text": "driver which then sends a request to the crypto",
    "start": "5858920",
    "end": "5865719"
  },
  {
    "text": "API which then sends a request to the the uh RSA base provider",
    "start": "5866000",
    "end": "5873080"
  },
  {
    "text": "what also happens is this actually makes an IO manager request let me see if I can get out of",
    "start": "5874599",
    "end": "5881000"
  },
  {
    "text": "everybody's way which sends a request to the EFS",
    "start": "5881000",
    "end": "5891079"
  },
  {
    "text": "Driver best this is the runtime Library this actually does this explains to this",
    "start": "5902280",
    "end": "5908480"
  },
  {
    "text": "passes the information in oh not driver this is service and then this goes to the hard",
    "start": "5908480",
    "end": "5915199"
  },
  {
    "text": "drive um so what's happen oh and by the way this is all user mode up",
    "start": "5915199",
    "end": "5921960"
  },
  {
    "text": "here and this is all kernel mode um they try to keep as much as",
    "start": "5921960",
    "end": "5928239"
  },
  {
    "text": "possible down in the up in the user mode obviously as it's much safer there um so",
    "start": "5928239",
    "end": "5933760"
  },
  {
    "text": "basically what happens is app calls the win32 call which then sends it down to the io manager the io manager sees that",
    "start": "5933760",
    "end": "5941760"
  },
  {
    "text": "it's actually an encrypted file sends it down to the well actually IO manager sends it to the NTFS driver which sees",
    "start": "5941760",
    "end": "5948040"
  },
  {
    "text": "it's an encrypted file sends it to the EFS driver which then starts replaying",
    "start": "5948040",
    "end": "5953360"
  },
  {
    "text": "with the runtime Library the runtime Library acts as intermediary in the kernel mode to the user mode for the EFS",
    "start": "5953360",
    "end": "5961159"
  },
  {
    "text": "services and actually does the encrypt the decryption and all the other services like that DFS service of course",
    "start": "5961159",
    "end": "5969040"
  },
  {
    "text": "makes the actual call to the crypto API to actually come up with the keys the",
    "start": "5969040",
    "end": "5974199"
  },
  {
    "text": "keys get passed to the runtime Library which like I said does the encryption all this gets handed back up the stack",
    "start": "5974199",
    "end": "5980239"
  },
  {
    "text": "and back to the app now that's kind of a quick overview but does that kind of make sense to everybody how the the initial layout of",
    "start": "5980239",
    "end": "5987040"
  },
  {
    "text": "that works okay",
    "start": "5987040",
    "end": "5991719"
  },
  {
    "text": "[Music]",
    "start": "5997330",
    "end": "6000430"
  },
  {
    "text": "all right so the Crypt API is an interface for crypto operations in Windows 2000 it",
    "start": "6006719",
    "end": "6014280"
  },
  {
    "text": "is the API that does all crypto operations it creates the public keys and private key pairs it um hands it to",
    "start": "6014280",
    "end": "6021679"
  },
  {
    "text": "the certificates it does all the work work um it's used to generate the file encryption keys and then the public key",
    "start": "6021679",
    "end": "6028280"
  },
  {
    "text": "pair that is used to encrypt and decrypt the file encryption Keys you have to use crypto API you",
    "start": "6028280",
    "end": "6034560"
  },
  {
    "text": "cannot replace it with anything else I I've heard rumors that it'll change in the future but I I I don't know anything",
    "start": "6034560",
    "end": "6040400"
  },
  {
    "text": "about it but at this point it is the only way of doing it and uh EFS is uses",
    "start": "6040400",
    "end": "6046880"
  },
  {
    "text": "a desx it's a variation of Dez and also EFS uses the base CS cryptographic",
    "start": "6046880",
    "end": "6053320"
  },
  {
    "text": "service provider um this cannot be changed it will not use the enhanced",
    "start": "6053320",
    "end": "6058639"
  },
  {
    "text": "service provider um it's kind of bad because it's a little weaker than the",
    "start": "6058639",
    "end": "6063760"
  },
  {
    "text": "the base one but it also it can be exported so you have no export issues when dealing with",
    "start": "6063760",
    "end": "6071080"
  },
  {
    "text": "this the EFS service calls crypto API to generate the file encryption key this",
    "start": "6078840",
    "end": "6085000"
  },
  {
    "text": "produces like I said the data decryption field and the data recovery field and the runtime library is called by EFS",
    "start": "6085000",
    "end": "6091679"
  },
  {
    "text": "driver reads encrypts and saves a file to disk one thing that um one thing to keep",
    "start": "6091679",
    "end": "6099320"
  },
  {
    "text": "remember to remember about this you never have to worry about well let me let me back up for a second as many",
    "start": "6099320",
    "end": "6106320"
  },
  {
    "text": "people are probably aware one of the biggest Pro one of the biggest problems when dealing with encryption is the the",
    "start": "6106320",
    "end": "6112080"
  },
  {
    "text": "memory the the page file because things end up in the page file unencrypted it",
    "start": "6112080",
    "end": "6118320"
  },
  {
    "text": "is possible not not highly likely but possible that people can access that",
    "start": "6118320",
    "end": "6123920"
  },
  {
    "text": "memory file and actually read all your stuff now they solve this problem with",
    "start": "6123920",
    "end": "6130159"
  },
  {
    "text": "the file encryption keys by using non-paged pool memory so it will never actually be paged you um so you don't",
    "start": "6130159",
    "end": "6136520"
  },
  {
    "text": "have to worry about that happening but encrypted files are sent to are sent to",
    "start": "6136520",
    "end": "6141760"
  },
  {
    "text": "the page file so one thing you can do to actually uh prevent any kind of issues",
    "start": "6141760",
    "end": "6148159"
  },
  {
    "text": "is to have a policy to clear the paging file every time the computer turns off this is done in group",
    "start": "6148159",
    "end": "6155560"
  },
  {
    "text": "[Music] policy um as like I said before encrypted files require the presence of",
    "start": "6157080",
    "end": "6162320"
  },
  {
    "text": "at least two certificates on the computer one for the user and one for the agent Recovery [Music]",
    "start": "6162320",
    "end": "6168560"
  },
  {
    "text": "Agent so if you're going to be encrypting your drive um I got together some best practice some things that I I",
    "start": "6168560",
    "end": "6174960"
  },
  {
    "text": "built for myself when I first started uh doing this and also things that I pulled from the resource kit and some good",
    "start": "6174960",
    "end": "6181520"
  },
  {
    "text": "places to go are you encrypt my documents for obvious reason this is where everybody stores their documents",
    "start": "6181520",
    "end": "6187800"
  },
  {
    "text": "and uh you don't even think about it as you're saving your Word documents your PowerPoint it's encrypted encrypt temp",
    "start": "6187800",
    "end": "6196480"
  },
  {
    "text": "for once again obvious reasons whenever you open a Word document it throws a file in Temp and if that that directory",
    "start": "6196480",
    "end": "6202080"
  },
  {
    "text": "is not encrypted it's not going to be encrypted in temp um personally I have a script that",
    "start": "6202080",
    "end": "6207840"
  },
  {
    "text": "runs that clears temp every time it I reboot the machine so that's another option encrypt folders not files",
    "start": "6207840",
    "end": "6215280"
  },
  {
    "text": "encrypting folders gives you gives you that ability to make to not have to constantly keep administering what files",
    "start": "6215280",
    "end": "6221280"
  },
  {
    "text": "have been encrypted and what's not if you know what the folders that are encrypted then you're doing okay um",
    "start": "6221280",
    "end": "6227199"
  },
  {
    "text": "export private keys for Recovery counts and store them safely as I said before um",
    "start": "6227199",
    "end": "6233599"
  },
  {
    "text": "don't use Recovery Agent account for anything but recovering data in fact you",
    "start": "6233599",
    "end": "6238679"
  },
  {
    "text": "just don't even want to know it exists unless you have to recover some data anytime you use an account and you use",
    "start": "6238679",
    "end": "6244520"
  },
  {
    "text": "it on the network you expose yourself for that e that account to be exploited and this is just one account you do not",
    "start": "6244520",
    "end": "6250080"
  },
  {
    "text": "want people to [Music] exploit okay",
    "start": "6250080",
    "end": "6257119"
  },
  {
    "text": "so let me let me before we go into this let me explain a little bit about the way recovery agents work",
    "start": "6257119",
    "end": "6264599"
  },
  {
    "text": "so you saw in my example of the file the file encryption key for the recovery agent well one thing Microsoft",
    "start": "6264599",
    "end": "6271080"
  },
  {
    "text": "recommends is that you don't keep the same recovery agent for very long you rotate through them make another account",
    "start": "6271080",
    "end": "6277360"
  },
  {
    "text": "be the recovery agent um and such the problem is oh go ahead is there any",
    "start": "6277360",
    "end": "6283679"
  },
  {
    "text": "problems with working remotely you're not connect to thec no well if you have the file",
    "start": "6283679",
    "end": "6291280"
  },
  {
    "text": "locally and you have and everything know no because like I said the certificate and the key are stored on your local",
    "start": "6291280",
    "end": "6297639"
  },
  {
    "text": "machine so there's no recovery if you had to do recovery it",
    "start": "6297639",
    "end": "6302800"
  },
  {
    "text": "would be a little bit different it depends if you have the recovery keys on your machine then it's not a problem but",
    "start": "6302800",
    "end": "6308480"
  },
  {
    "text": "if you don't then you have to import the keys and I'll actually talk a little bit on how to reimport Keys it's kind of a",
    "start": "6308480",
    "end": "6314159"
  },
  {
    "text": "certificate Services thing but I think we could probably touch on it to give you an idea how that",
    "start": "6314159",
    "end": "6319678"
  },
  {
    "text": "works okay um so if you were to rotate through agents and Recovery agents you",
    "start": "6319800",
    "end": "6326239"
  },
  {
    "text": "may you take away the certificate from one one agent and then you move on and you give it to another person you still",
    "start": "6326239",
    "end": "6332199"
  },
  {
    "text": "have that public and private that that private key and that certificate which you should keep because otherwise you",
    "start": "6332199",
    "end": "6338320"
  },
  {
    "text": "will that Recovery Agent cannot access the new one cannot access files that",
    "start": "6338320",
    "end": "6343440"
  },
  {
    "text": "were encrypted with the old Recovery Agent key so what'll end up happening is",
    "start": "6343440",
    "end": "6348960"
  },
  {
    "text": "you'll have a lot of files out of date that you can't encrypt anymore so you want to keep them archived you",
    "start": "6348960",
    "end": "6356360"
  },
  {
    "text": "don't want to destroy them um I was trying to go through I was trying to figure out how you would do this and how",
    "start": "6356360",
    "end": "6361800"
  },
  {
    "text": "you would keep track of them and the best way I could think of is with dates basically you have a recovery agent from",
    "start": "6361800",
    "end": "6367960"
  },
  {
    "text": "this date to this date and you put that on the floppy disc that you store it on um you say this Recovery Agent worked",
    "start": "6367960",
    "end": "6374440"
  },
  {
    "text": "from this date to this date you look at the date in the file and you know which key you need when you actually save the",
    "start": "6374440",
    "end": "6380440"
  },
  {
    "text": "key to dis it encrypts the key which requires a password cuz it uses the password to make the to encrypt",
    "start": "6380440",
    "end": "6388639"
  },
  {
    "text": "it um does that was that clear about the recovery agents for everybody okay um never rename the RSA",
    "start": "6388639",
    "end": "6396040"
  },
  {
    "text": "folder you'll find the RSA folder in your in your path um it actually stores all the keys there and if you if you",
    "start": "6396040",
    "end": "6403199"
  },
  {
    "text": "rename it then EFS will stop working um after you set up your domain",
    "start": "6403199",
    "end": "6408719"
  },
  {
    "text": "change the default Recovery Agent as soon as possible you don't want it to be the administrator account because it's",
    "start": "6408719",
    "end": "6413800"
  },
  {
    "text": "the administrator account you want to kind of like delegate that power [Music]",
    "start": "6413800",
    "end": "6420639"
  },
  {
    "text": "out it's a good idea to designate two or more recovery agents per organizational",
    "start": "6420639",
    "end": "6425920"
  },
  {
    "text": "unit um this is kind of to make sure that you don't run into a situation of",
    "start": "6425920",
    "end": "6431159"
  },
  {
    "text": "not being able to get access to a file you you it is best to designate a",
    "start": "6431159",
    "end": "6436320"
  },
  {
    "text": "computer for each account and provide access to the proper administrator have the computer set up and have it used for",
    "start": "6436320",
    "end": "6442040"
  },
  {
    "text": "nothing else there aren't any other keys on it no other users it is used for whoever H is",
    "start": "6442040",
    "end": "6447880"
  },
  {
    "text": "the the recovery agent so that he can use that computer to actually do the file",
    "start": "6447880",
    "end": "6454559"
  },
  {
    "text": "recovery um Implement a recovery agent archive program to make sure you can access files encrypted with obsolete",
    "start": "6455520",
    "end": "6461080"
  },
  {
    "text": "Keys as I said before um store them mark them make sure you know what the dates are and make two copies of them one for",
    "start": "6461080",
    "end": "6468719"
  },
  {
    "text": "local and one for offsite um recovery certificates and private Keys must be exported and stored",
    "start": "6468719",
    "end": "6475239"
  },
  {
    "text": "in a controlled secure manner like we",
    "start": "6475239",
    "end": "6479280"
  },
  {
    "text": "said hurry oops that was it um there was",
    "start": "6481679",
    "end": "6487320"
  },
  {
    "text": "something else oh yeah so let me go over real quick make another diagram for",
    "start": "6487320",
    "end": "6494840"
  },
  {
    "text": "you once this gets done [Music]",
    "start": "6498159",
    "end": "6504669"
  },
  {
    "text": "and they have both attached to the crypto",
    "start": "6510199",
    "end": "6513880"
  },
  {
    "text": "API um then you have your EFS driver or uh",
    "start": "6517520",
    "end": "6524760"
  },
  {
    "text": "file uh service which takes the public key",
    "start": "6524760",
    "end": "6530880"
  },
  {
    "text": "and it uh attaches these two keys together comes down here crypto API",
    "start": "6535400",
    "end": "6541639"
  },
  {
    "text": "creates the two FKS comes to the EFS service which then attaches each one",
    "start": "6541639",
    "end": "6548320"
  },
  {
    "text": "each of the those two headers here's the actual data you're",
    "start": "6548320",
    "end": "6553400"
  },
  {
    "text": "encrypting passes the data to the EFS service which then actually uses it to",
    "start": "6553400",
    "end": "6559760"
  },
  {
    "text": "encrypt the data so this is once again your ddk",
    "start": "6559760",
    "end": "6564719"
  },
  {
    "text": "and this is your drk and this is the",
    "start": "6564800",
    "end": "6570400"
  },
  {
    "text": "data all right and that's pretty much the basics for go ahead",
    "start": "6573760",
    "end": "6580118"
  },
  {
    "text": "so they're actually different for each",
    "start": "6581760",
    "end": "6585800"
  },
  {
    "text": "file your certificate is different per user per user",
    "start": "6587679",
    "end": "6594040"
  },
  {
    "text": "um no it's stored on your local machine oh it's located IR right I'm sorry it's",
    "start": "6595639",
    "end": "6600760"
  },
  {
    "text": "stored in the certificates folder if you go and um if you bring up the certificate snap in for uh for active",
    "start": "6600760",
    "end": "6606840"
  },
  {
    "text": "directory it's actually stored there and then the recovery must be the certificate but not the private",
    "start": "6606840",
    "end": "6612920"
  },
  {
    "text": "key and you need the private key so for instance um if I was a recovery agent I",
    "start": "6612920",
    "end": "6620000"
  },
  {
    "text": "would have to and I'd had the the private key stored in a ly disc I would go into active directory into",
    "start": "6620000",
    "end": "6625239"
  },
  {
    "text": "certificates or in the snapin has everybody used MMC snap-in it's kind of a cool little tool and you right click",
    "start": "6625239",
    "end": "6631320"
  },
  {
    "text": "on the certificates and you say import key and you just point at that floppy disc and then you can import the keys",
    "start": "6631320",
    "end": "6637080"
  },
  {
    "text": "and at that point you'd be able to recover the file that would had been encrypted with that",
    "start": "6637080",
    "end": "6642360"
  },
  {
    "text": "key are you saying yes it actually stores a private",
    "start": "6642639",
    "end": "6647920"
  },
  {
    "text": "can of floppy I thought it was actually storing the signature no the recovery",
    "start": "6647920",
    "end": "6654639"
  },
  {
    "text": "nope that would be the public key and no it doesn't it stores the actually stores the private key in fact and as you could",
    "start": "6655360",
    "end": "6662560"
  },
  {
    "text": "probably guess storing a private key is a big deal and by default private keys are not exportable you have to specify",
    "start": "6662560",
    "end": "6669719"
  },
  {
    "text": "them every one of them except the recovery agent CER private key it is the only one by default that is",
    "start": "6669719",
    "end": "6677760"
  },
  {
    "text": "exportable anybody have any other questions okay well thank you very much",
    "start": "6681560",
    "end": "6689880"
  },
  {
    "text": "um if you have have any questions about keros or any other questions about encrypted file system um our email names",
    "start": "6689880",
    "end": "6697719"
  },
  {
    "text": "are on the slides so feel free to contact us and thanks for coming",
    "start": "6697719",
    "end": "6704480"
  }
]