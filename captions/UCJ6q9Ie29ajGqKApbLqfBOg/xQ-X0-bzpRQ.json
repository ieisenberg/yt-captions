[
  {
    "text": "welcome to the South Seas a PE room where Nick Crowley is going to",
    "start": "60",
    "end": "5100"
  },
  {
    "text": "present to talk about the art of defense how vulnerabilities helped shape security features and mitigations in",
    "start": "5100",
    "end": "11550"
  },
  {
    "text": "Android before we begin a couple quick announcements the business Hall and beat",
    "start": "11550",
    "end": "16650"
  },
  {
    "text": "Bayside a B continues to host our vendor area that is open until 5 o'clock this",
    "start": "16650",
    "end": "21930"
  },
  {
    "text": "evening blackhat Arsenal also continues today in the palm foyer on level three and that",
    "start": "21930",
    "end": "28890"
  },
  {
    "text": "runs until I believe five as well but then there's also an Arsenal reception at 5 o'clock this evening and also if",
    "start": "28890",
    "end": "35700"
  },
  {
    "text": "you haven't picked up any merchandise today today's the last day to visit the black hat store for all kinds of great",
    "start": "35700",
    "end": "40770"
  },
  {
    "text": "swags and books and stuff like that before begin make sure that you've got",
    "start": "40770",
    "end": "46200"
  },
  {
    "text": "any phones and such on vibrate so we don't interrupt the talk thank you",
    "start": "46200",
    "end": "51590"
  },
  {
    "text": "all right good morning everybody hear me yes all right",
    "start": "52039",
    "end": "57480"
  },
  {
    "text": "anyway I wanted to say welcome thank you for coming today I wanted to first of all say thank you",
    "start": "57480",
    "end": "62699"
  },
  {
    "text": "to black hat it's actually my first time presenting here so I really appreciate the honor and the opportunity hey hey",
    "start": "62699",
    "end": "70170"
  },
  {
    "text": "thank you this makes me feel much better so thank you very much my name is Nick",
    "start": "70170",
    "end": "75570"
  },
  {
    "text": "crawl which I'm one of the original founding members of the Android security team I've been working in the security",
    "start": "75570",
    "end": "82560"
  },
  {
    "text": "industry for about 14 years now seven of those years focused exclusively on",
    "start": "82560",
    "end": "87689"
  },
  {
    "text": "improving the security of andr itself it's been an amazing opportunity I've",
    "start": "87689",
    "end": "93119"
  },
  {
    "text": "had a really incredibly unique opportunity to basically watch Android sort of grow and mature from a security",
    "start": "93119",
    "end": "100140"
  },
  {
    "text": "perspective I don't know I keep hearing numbers I don't know what the exact number is buy keep hearing numbers like just 1.5 billion Android devices a 1.75",
    "start": "100140",
    "end": "108899"
  },
  {
    "text": "billion Android devices I lose track but I'm very proud to say that I have code",
    "start": "108899",
    "end": "113970"
  },
  {
    "text": "running on pretty much every one of them so if you have a boy if you have a",
    "start": "113970",
    "end": "120149"
  },
  {
    "text": "Eclair or donut device this is really the wrong place for us so so in my seven years in Android I've",
    "start": "120149",
    "end": "127680"
  },
  {
    "text": "seen a lot of security vulnerabilities I see the law bugs",
    "start": "127680",
    "end": "132700"
  },
  {
    "text": "and a lot of fear uncertainty and doubt",
    "start": "132700",
    "end": "137790"
  },
  {
    "text": "it seems like often you read in the press that some Billy billions Android",
    "start": "137790",
    "end": "143500"
  },
  {
    "text": "devices are affected by bug X but yeah after the press dies down you",
    "start": "143500",
    "end": "150069"
  },
  {
    "text": "never really hear what happens next you never really hear about the lessons",
    "start": "150069",
    "end": "155110"
  },
  {
    "text": "that we've learned and the improvements that we made to make Android safer for everybody today I'm hoping to give you a",
    "start": "155110",
    "end": "162370"
  },
  {
    "text": "really small glimpse into how we think about security vulnerabilities and not",
    "start": "162370",
    "end": "168310"
  },
  {
    "text": "what we do not only to fix a bug which is very important but also to prevent similar bugs and make Android more",
    "start": "168310",
    "end": "174069"
  },
  {
    "text": "secure for everybody so what's our agenda for today the first",
    "start": "174069",
    "end": "180430"
  },
  {
    "text": "thing I want to do is give you a really quick overview of the Android security architecture the architecture itself is",
    "start": "180430",
    "end": "185590"
  },
  {
    "text": "something where I could spend an entire presentation on we're going to talk about from a very high level on sort of the design and philosophy that we have",
    "start": "185590",
    "end": "192220"
  },
  {
    "text": "behind the security architectural after that I'm really gonna jump into some bugs that we see in the past and",
    "start": "192220",
    "end": "197950"
  },
  {
    "text": "some vulnerabilities that we've seen in the past and talk about how Andrew responded to those bugs and what we did",
    "start": "197950",
    "end": "203410"
  },
  {
    "text": "to make things better at the end of it I'm just gonna give a little bit of my opinion my advice about where we Android",
    "start": "203410",
    "end": "211720"
  },
  {
    "text": "and we the security industry as a whole the entire ecosystem go to make users",
    "start": "211720",
    "end": "217450"
  },
  {
    "text": "safer to make them to protect data to make sure that vulnerabilities aren't happening",
    "start": "217450",
    "end": "224489"
  },
  {
    "text": "but first a word from our sponsors so I",
    "start": "225570",
    "end": "230980"
  },
  {
    "text": "head up the Android platform security team and we really have three main goals in the team data arrest protection data",
    "start": "230980",
    "end": "239109"
  },
  {
    "text": "in transit protection and the device integrity but there's actually a lot more to Android then the code that runs",
    "start": "239109",
    "end": "247150"
  },
  {
    "text": "on the device androids making really heavy investments to protect our ecosystem and to protect",
    "start": "247150",
    "end": "253959"
  },
  {
    "text": "the entire ecosystem not just code which happens to run on the device I'm really excited about the",
    "start": "253959",
    "end": "259510"
  },
  {
    "text": "code that runs on the device that's where my expertise is but there's a lot of things that we're doing first of all when people think about",
    "start": "259510",
    "end": "266980"
  },
  {
    "text": "Android security this is a typical model that they think of so first you have Google Play we know",
    "start": "266980",
    "end": "274220"
  },
  {
    "text": "that Google Play is the safest source to get Android applications we have the lowest mal rates anywhere",
    "start": "274220",
    "end": "279760"
  },
  {
    "text": "but we also allow in the interest of openness we allow people to download applications from from other sources but",
    "start": "279760",
    "end": "287660"
  },
  {
    "text": "we make sure we notify people that hey you know this is sort of risky do you",
    "start": "287660",
    "end": "292730"
  },
  {
    "text": "want to do this you don't want to do this you have to get an install confirmation for every application so that's the sort of additional barrier if",
    "start": "292730",
    "end": "299480"
  },
  {
    "text": "you've consented we will make sure that we're keeping track of the apps that you install and try to keep badness as far",
    "start": "299480",
    "end": "306140"
  },
  {
    "text": "away from your device as possible so we have our verify apps morning they only",
    "start": "306140",
    "end": "311660"
  },
  {
    "text": "get to the stuff that I really love the runtime Security checks the end the sandbox is the permissions all the stuff",
    "start": "311660",
    "end": "318230"
  },
  {
    "text": "that makes Android Android so this is actually a very simple model but",
    "start": "318230",
    "end": "323620"
  },
  {
    "text": "there's actually quite a few moving parts and I don't expect everybody to you hopefully you'll get a copy these",
    "start": "323620",
    "end": "330770"
  },
  {
    "text": "slides alright this is a lot of information but for example we we really focus on",
    "start": "330770",
    "end": "337490"
  },
  {
    "text": "defense in depth and we I've already talked about Google Play Google Play does a number of things to",
    "start": "337490",
    "end": "344300"
  },
  {
    "text": "protect users keep badness away from users static analysis dynamic analysis",
    "start": "344300",
    "end": "349490"
  },
  {
    "text": "we're looking at applications to make sure that are they trying to do something bad to device but we also get",
    "start": "349490",
    "end": "355160"
  },
  {
    "text": "additional information such as developer reputation where we try to make decisions about is not only as a program",
    "start": "355160",
    "end": "361880"
  },
  {
    "text": "is a program trustworthy or not trustworthy but as a developer backing up that program trustworthy or not",
    "start": "361880",
    "end": "367430"
  },
  {
    "text": "trustworthy staff analysis dynamic analysis reputation that kind of thing the other",
    "start": "367430",
    "end": "374750"
  },
  {
    "text": "things we do are things like chrome Safe Browsing again the goal is to build sort of layers of the defense concentric",
    "start": "374750",
    "end": "380150"
  },
  {
    "text": "rings of defense and so if you if chrome believes that you're about to visit badness whether its badness through an",
    "start": "380150",
    "end": "386450"
  },
  {
    "text": "apk badness through a phishing site that is through it's something else chrome make sure we warn you again try to keep",
    "start": "386450",
    "end": "393230"
  },
  {
    "text": "you away from edge we have things like safety net we actually have",
    "start": "393230",
    "end": "398800"
  },
  {
    "text": "safety net as our way to measure the health of the ecosystem I really like to think of security vulnerabilities like",
    "start": "398800",
    "end": "404780"
  },
  {
    "text": "the medical industry thinks about disease is something we're trying to prevent and what we do is we try to",
    "start": "404780",
    "end": "410360"
  },
  {
    "text": "measure the level of exploitation that we see in the ecosystem we try to measure what the health of the ecosystem",
    "start": "410360",
    "end": "415670"
  },
  {
    "text": "is I would try to collect a lot of really good information and statistics about the safety of the ecosystem",
    "start": "415670",
    "end": "424960"
  },
  {
    "text": "if you want to learn more I listed some links up here source.android.com slash",
    "start": "426700",
    "end": "432260"
  },
  {
    "text": "security as our primary landing spot for secure technical security information",
    "start": "432260",
    "end": "438190"
  },
  {
    "text": "just a few months ago we published the Android security year in review and so",
    "start": "438190",
    "end": "444440"
  },
  {
    "text": "it gives sort of our perspective on the state of the security state of the ecosystem what we see it you know where",
    "start": "444440",
    "end": "451670"
  },
  {
    "text": "we see the ecosystem going what what we see happening in the ecosystem and if you have an opportunity to I would",
    "start": "451670",
    "end": "458540"
  },
  {
    "text": "really encourage you to review the Android security State of the Union it was a to the 2015 black hat presentation",
    "start": "458540",
    "end": "466690"
  },
  {
    "text": "where we really talked about the security of the ecosystem and what we're doing sort of sort of a overall lot",
    "start": "466690",
    "end": "473890"
  },
  {
    "text": "over all the information is a year old but for the most part it's still accurate and so",
    "start": "473890",
    "end": "480560"
  },
  {
    "text": "I really encourage you to review it",
    "start": "480560",
    "end": "483880"
  },
  {
    "text": "so now we're going to jump into really the area that I love the area that I'm",
    "start": "485830",
    "end": "491030"
  },
  {
    "text": "excited about the Android platform",
    "start": "491030",
    "end": "495220"
  },
  {
    "text": "Android was originally built from the ground up with security of mine",
    "start": "497950",
    "end": "503020"
  },
  {
    "text": "initially we focused on application sound boxes so the area at the top",
    "start": "503020",
    "end": "508130"
  },
  {
    "text": "that's labeled user 1 user 2 games contact that kind of thing I apologize uh I'll try to point on different on",
    "start": "508130",
    "end": "514370"
  },
  {
    "text": "both screens the focus early on was I'm making sure that applications were compartmentalized",
    "start": "514370",
    "end": "520940"
  },
  {
    "text": "from other applications that application developers could have control over the integrity of their data the",
    "start": "520940",
    "end": "527270"
  },
  {
    "text": "confidentiality of their data and that we protected the application data and the way we did this was through work all",
    "start": "527270",
    "end": "534230"
  },
  {
    "text": "uid sandboxes uid said what we did was for those who are familiar with multi-user Linux",
    "start": "534230",
    "end": "540020"
  },
  {
    "text": "systems every Linux user logs into with the device one Linux user can't access",
    "start": "540020",
    "end": "545930"
  },
  {
    "text": "the file if the process other data associate with other users and so we reuse that model because there was a",
    "start": "545930",
    "end": "551360"
  },
  {
    "text": "time proven model and we said let's go ahead and apply that to applications so each application ran runs in its own",
    "start": "551360",
    "end": "559970"
  },
  {
    "text": "dedicated UID space and so this was great this gave application isolation it",
    "start": "559970",
    "end": "566090"
  },
  {
    "text": "gave the Milley for developers to really control the integrity and the confidentiality of their data and then",
    "start": "566090",
    "end": "573140"
  },
  {
    "text": "we started growing on it growing from there so the next major addition that we",
    "start": "573140",
    "end": "578780"
  },
  {
    "text": "made was to start splitting up Android to differ into multiple different physical users so we refer to the phrase",
    "start": "578780",
    "end": "585620"
  },
  {
    "text": "the meet users the person who's actually using the tablet so we started introducing segmentation separation",
    "start": "585620",
    "end": "591200"
  },
  {
    "text": "between different physical users on the same Android device again with the goal of having isolation and",
    "start": "591200",
    "end": "597460"
  },
  {
    "text": "compartmentalization throughout Android in Android 5 oh we switch to SELinux",
    "start": "597460",
    "end": "605270"
  },
  {
    "text": "fully enforcing mode and one of the great things that that did was that actually",
    "start": "605270",
    "end": "610450"
  },
  {
    "text": "created sandboxes not only around the applications where we focused a lot of our initial efforts but also on every",
    "start": "610450",
    "end": "619250"
  },
  {
    "text": "component that runs on android every root component every system component one of the things that a lot of people",
    "start": "619250",
    "end": "624470"
  },
  {
    "text": "don't realize is that starting as Android 5 oh there is no user space",
    "start": "624470",
    "end": "629870"
  },
  {
    "text": "concept of an all-powerful root user the root user has escalates constraints",
    "start": "629870",
    "end": "636080"
  },
  {
    "text": "and controls sorry every individual program on Android down to the small",
    "start": "636080",
    "end": "641089"
  },
  {
    "text": "shell script has an selinux policy around it that really dictates the minimal properties of what we expect so",
    "start": "641089",
    "end": "647540"
  },
  {
    "text": "people talk about oh I rooted my Android device root as a concept does not exist",
    "start": "647540",
    "end": "653960"
  },
  {
    "text": "in any daemon that we have to get the same level of compromise on a post 500 device you really have to target the",
    "start": "653960",
    "end": "659660"
  },
  {
    "text": "kernel where the kernel does the security enforcement's but the idea is",
    "start": "659660",
    "end": "664839"
  },
  {
    "text": "what we've been doing it's really focusing so security",
    "start": "664839",
    "end": "669970"
  },
  {
    "text": "engineers and security designers their job is to draw boxes around things and say this is a one compartment this is in",
    "start": "669970",
    "end": "676060"
  },
  {
    "text": "our department and so what we've been doing is building up Andrew over time getting tighter and tighter compartmentalization for every component",
    "start": "676060",
    "end": "682660"
  },
  {
    "text": "that runs in Android we now we also you know we recognize that",
    "start": "682660",
    "end": "688900"
  },
  {
    "text": "there are vulnerabilities against the kernel and so an area that we have start",
    "start": "688900",
    "end": "694120"
  },
  {
    "text": "have an area that we've been focusing on are things like trust zone the hardware",
    "start": "694120",
    "end": "699220"
  },
  {
    "text": "for berries for sensitive data where even a kernel compromise could be",
    "start": "699220",
    "end": "704260"
  },
  {
    "text": "problematic we have capabilities to put cryptokeys fingerprints other things into the hardware into trust zone to try",
    "start": "704260",
    "end": "712330"
  },
  {
    "text": "to protect that though the most sensitive data again this is all focused on maintaining",
    "start": "712330",
    "end": "718030"
  },
  {
    "text": "the integrity and confidentiality of application data",
    "start": "718030",
    "end": "723420"
  },
  {
    "text": "we take a very classic approach to information security I don't know how",
    "start": "723420",
    "end": "729370"
  },
  {
    "text": "many people here are familiar with the AIC model the accessibility integrity and",
    "start": "729370",
    "end": "734500"
  },
  {
    "text": "confidentiality model so we're big believers in it and we do a number of",
    "start": "734500",
    "end": "740860"
  },
  {
    "text": "things to protect against that exploit mitigation things like ASO rmx we're one",
    "start": "740860",
    "end": "748420"
  },
  {
    "text": "of the first operating systems to basically ban a statically of non PI",
    "start": "748420",
    "end": "755230"
  },
  {
    "text": "binaries and we said hey we really believe that a SLR is important we're",
    "start": "755230",
    "end": "760720"
  },
  {
    "text": "going to through card not only all of our applications but all of the third-party applications to use that",
    "start": "760720",
    "end": "766260"
  },
  {
    "text": "exploit containment like I mentioned before every process is",
    "start": "766260",
    "end": "771700"
  },
  {
    "text": "@fc Linux sandbox we know that bad things do happen we know that the mitigations are medications the design",
    "start": "771700",
    "end": "776860"
  },
  {
    "text": "bias time so we're going to make sure that we can reason about the state of the system even in the presence of a",
    "start": "776860",
    "end": "782530"
  },
  {
    "text": "compromised architectural decomposition I mentioned this already the goal of a security",
    "start": "782530",
    "end": "788740"
  },
  {
    "text": "engineer is really to take big monolithic components to try to make them as small as possible",
    "start": "788740",
    "end": "794040"
  },
  {
    "text": "attack surface reduction is one of the most valuable things that we can do as security engineers if there's",
    "start": "794040",
    "end": "799660"
  },
  {
    "text": "functionality which isn't needed let's turn it off one of the things that we did in Android M for example is removed",
    "start": "799660",
    "end": "805720"
  },
  {
    "text": "access to large chunks of the /system filesystem so if you try to just scroll over the files there you may be able to",
    "start": "805720",
    "end": "812020"
  },
  {
    "text": "get a few files that we've opened up but for the most part the entire system is gone in Android and safe by design API",
    "start": "812020",
    "end": "819100"
  },
  {
    "text": "so we know that we develop features but they're too hard to use people won't use",
    "start": "819100",
    "end": "824710"
  },
  {
    "text": "it we try to make our API s and everything that we do as simple as",
    "start": "824710",
    "end": "830650"
  },
  {
    "text": "possible and make the secure way the easy way so these are really the philosophies",
    "start": "830650",
    "end": "835660"
  },
  {
    "text": "that we believe in and now we're going to talk about software flaws",
    "start": "835660",
    "end": "841170"
  },
  {
    "text": "jump into like some specific vulnerabilities people make mistakes it's very easy to create a software bug",
    "start": "841170",
    "end": "847930"
  },
  {
    "text": "and so our job as security engineers is to create environments where even if",
    "start": "847930",
    "end": "853330"
  },
  {
    "text": "somebody makes a mistake it's not caste dropping",
    "start": "853330",
    "end": "857790"
  },
  {
    "text": "the first thought I wanted to talk about was something that you might have heard about from last year it was a",
    "start": "858930",
    "end": "865720"
  },
  {
    "text": "vulnerability called ping pong root so how many people were here last year for",
    "start": "865720",
    "end": "871090"
  },
  {
    "text": "the black cat talk have heard about this vulnerability so this is a you know this is a",
    "start": "871090",
    "end": "877920"
  },
  {
    "text": "vulnerability it was actually I don't the Keene team folks discovered it I gave a link at the bottom of the page",
    "start": "877920",
    "end": "884830"
  },
  {
    "text": "that talks about their blackhat slides I really couldn't do the level of justice",
    "start": "884830",
    "end": "890590"
  },
  {
    "text": "that they could do to it but it was a kernel based vulnerability it happened to do because there was a failure to",
    "start": "890590",
    "end": "896290"
  },
  {
    "text": "initiative to clear out some data structures on the paint sockets and so the result was kernel code",
    "start": "896290",
    "end": "903310"
  },
  {
    "text": "execution eventually the device comm userspace selinux turned off the user",
    "start": "903310",
    "end": "908770"
  },
  {
    "text": "space is compromised bad things happened",
    "start": "908770",
    "end": "913050"
  },
  {
    "text": "so it's interesting I talked about software flaws and so we started tracing back after this oh",
    "start": "915090",
    "end": "922180"
  },
  {
    "text": "I'm sorry I actually wanted to talk about learning and so this was actually publicly disclosed the first that we heard about it was on OSS security",
    "start": "922180",
    "end": "930010"
  },
  {
    "text": "they sent a nice email saying hey can we get CV for this and so that immediately start our",
    "start": "930010",
    "end": "935170"
  },
  {
    "text": "incident response process so we started reviewing how did this",
    "start": "935170",
    "end": "940510"
  },
  {
    "text": "actually happen and it turns out that some Engineer yours truly was trying to",
    "start": "940510",
    "end": "945670"
  },
  {
    "text": "do a security hardening and so I was trying to get rid of set UID binaries and I said hey why don't we open up",
    "start": "945670",
    "end": "952180"
  },
  {
    "text": "these ICMP sockets so we don't have to have a set UID root ping this is awesome because we get rid of set UID root",
    "start": "952180",
    "end": "957250"
  },
  {
    "text": "programs the the thing is that I didn't realize at the time but this was opening up the security holes making the ping",
    "start": "957250",
    "end": "963640"
  },
  {
    "text": "sockets reachable to use a space so people make mistakes I'm probably one of the first people one of the first people",
    "start": "963640",
    "end": "969820"
  },
  {
    "text": "up here to actually be talking about mistake that I made for that was presented at blackhat maybe maybe not",
    "start": "969820",
    "end": "976480"
  },
  {
    "text": "don't know so obviously first priority when we see",
    "start": "976480",
    "end": "983770"
  },
  {
    "text": "bug fix the bug and that's easy we start our incident",
    "start": "983770",
    "end": "989320"
  },
  {
    "text": "response process we had notification out to our partners right away we make sure they knew what they were doing we had",
    "start": "989320",
    "end": "994390"
  },
  {
    "text": "our devices patched with in record time we wrote something called our we wrote",
    "start": "994390",
    "end": "1000510"
  },
  {
    "text": "unit tests we have a unit testing framework called CTS as our compatibility test suite so we got testing in place for it and so we",
    "start": "1000510",
    "end": "1007890"
  },
  {
    "text": "followed these sort of standard Incident Response process but that's not enough and that's you know that's not good",
    "start": "1007890",
    "end": "1013560"
  },
  {
    "text": "enough going back to the principles I talked about earlier exploit mitigation containment tax service reduction safe",
    "start": "1013560",
    "end": "1019620"
  },
  {
    "text": "by default architectural decomposition is enough just solely fix bugs",
    "start": "1019620",
    "end": "1025310"
  },
  {
    "text": "so the first thing we did was actually a recommendation that was suggested by the Keene team folks so Jeff which is",
    "start": "1026900",
    "end": "1034110"
  },
  {
    "text": "sitting over there somewhere was city of the Keene team presentation at blackhat he was watching the presentation he has",
    "start": "1034110",
    "end": "1040770"
  },
  {
    "text": "laptop out and so as the presentation was going on they're talking about well there's this list poison value it's",
    "start": "1040770",
    "end": "1047220"
  },
  {
    "text": "actually pointing to users face that means if you this data structure is coming from a area of region that's not",
    "start": "1047220",
    "end": "1054780"
  },
  {
    "text": "in the kernel is coming from user space so he's in the audience he starts typing up a patch for this let's get it fixed",
    "start": "1054780",
    "end": "1060210"
  },
  {
    "text": "so something I was really happy about within 12 days after blackhat was done",
    "start": "1060210",
    "end": "1066100"
  },
  {
    "text": "we had a patch submitted accepted to the upstream kernel where not only we made",
    "start": "1066100",
    "end": "1071830"
  },
  {
    "text": "our devices safer but we made devices across the entire Linux community safer so that was the first mitigation that we",
    "start": "1071830",
    "end": "1078610"
  },
  {
    "text": "put in place let's get the list pointer out of use of space",
    "start": "1078610",
    "end": "1084059"
  },
  {
    "text": "what are some other changes that we made so we started reviewing it and say well",
    "start": "1084240",
    "end": "1090160"
  },
  {
    "text": "the ICP sake we're going that family we're going to need to continue to make sure that it's accessible because it's",
    "start": "1090160",
    "end": "1095440"
  },
  {
    "text": "needed for legitimate functionality but are there are other socket families that we can go after and we don't have to",
    "start": "1095440",
    "end": "1101170"
  },
  {
    "text": "expose them to use a space so for the most part we already had the where are",
    "start": "1101170",
    "end": "1106840"
  },
  {
    "text": "we disallowing things like net link sockets ton sockets a lot of the other socket",
    "start": "1106840",
    "end": "1114460"
  },
  {
    "text": "classes that you see up on this sort of never allow role and so but one of the things we realized",
    "start": "1114460",
    "end": "1121600"
  },
  {
    "text": "is that one socket class in particular sorry SELinux defined something called",
    "start": "1121600",
    "end": "1128080"
  },
  {
    "text": "the generic socket classes for socket classes which aren't known Tassie Linux policy I sort of the generic name would",
    "start": "1128080",
    "end": "1134200"
  },
  {
    "text": "give it that class was still open and that was needed - that was opened up for Bluetooth sockets and so I said well why",
    "start": "1134200",
    "end": "1140470"
  },
  {
    "text": "is this open is anybody using it so we put in rules we check to see if a baby's using it nobody's using it tax surface",
    "start": "1140470",
    "end": "1146200"
  },
  {
    "text": "reduction it's something we can eliminate and so we wouldn't have shut down we back forward that as a CDE 2016",
    "start": "1146200",
    "end": "1153340"
  },
  {
    "text": "37 62 notified the entire notify the entire ecosystem our partners the public",
    "start": "1153340",
    "end": "1159420"
  },
  {
    "text": "and you know make sure we address that it actually addressed a number of bugs not just not like for example we've seen",
    "start": "1159420",
    "end": "1167560"
  },
  {
    "text": "some vulnerabilities against the AF MSM IPC of socket family and so it's an area",
    "start": "1167560",
    "end": "1173710"
  },
  {
    "text": "where we had already been sought to a blocking law of socket classes and we finished showing it down the other thing",
    "start": "1173710",
    "end": "1179710"
  },
  {
    "text": "that we've done over time is to really focus on off the white listing a surprising number of bugs come from",
    "start": "1179710",
    "end": "1186460"
  },
  {
    "text": "iocked all's and so one of the changes that Google contributed to the upstream selinux community was the ability to do",
    "start": "1186460",
    "end": "1193360"
  },
  {
    "text": "eye filtering on an octal by octal basis this shift is part of Andrew where we're",
    "start": "1193360",
    "end": "1200080"
  },
  {
    "text": "actually blocking access to the to the I octal that gets the MAC address and an N",
    "start": "1200080",
    "end": "1205480"
  },
  {
    "text": "we push that forward we basically have a white list of every I octal that you can",
    "start": "1205480",
    "end": "1210520"
  },
  {
    "text": "have on networking sockets so again a TAC service reduction very low-cost way",
    "start": "1210520",
    "end": "1216750"
  },
  {
    "text": "high-impact way of making user safer so I talked about limiting network",
    "start": "1216750",
    "end": "1224920"
  },
  {
    "text": "socket families I talked about the list pointer mitigation I talked about I aqua filtering we had one bug and we able to",
    "start": "1224920",
    "end": "1233260"
  },
  {
    "text": "turn that fix that one bug we want to fix every bug in fact a lot of the bugs that you see in the Android security",
    "start": "1233260",
    "end": "1238360"
  },
  {
    "text": "bulletins are key from reachable to use a space we send them out anyway because in the interests of defense-in-depth and",
    "start": "1238360",
    "end": "1245260"
  },
  {
    "text": "making sure that even if you and make sure that people can't change vulnerability you want to get them fixed one bug three mitigations so something",
    "start": "1245260",
    "end": "1252910"
  },
  {
    "text": "that I'm really happy about and the mitigations have been effective",
    "start": "1252910",
    "end": "1259440"
  },
  {
    "text": "so we've already seen the three different bugs at least three different bugs that",
    "start": "1259440",
    "end": "1266080"
  },
  {
    "text": "sort of stopped counting because I was already out type rank presentation three different bugs that were the were",
    "start": "1266080",
    "end": "1272200"
  },
  {
    "text": "the mitigations helped lower the severity of this bug we still fixed it we still know if I partners we still",
    "start": "1272200",
    "end": "1278260"
  },
  {
    "text": "make sure it's addressed but the severity isn't it's great and I listed",
    "start": "1278260",
    "end": "1283570"
  },
  {
    "text": "them up here the 2016 20:59 IPC router the first two have to do with the MSM",
    "start": "1283570",
    "end": "1289570"
  },
  {
    "text": "ipeec socket family the third one was a security vulnerability in the Nexus 5",
    "start": "1289570",
    "end": "1294790"
  },
  {
    "text": "wireless LAN driver so the mitigations are effective we know that they work they do we know that they reduce the",
    "start": "1294790",
    "end": "1300310"
  },
  {
    "text": "severity of bugs ah",
    "start": "1300310",
    "end": "1304080"
  },
  {
    "text": "stage-fright how many people here have heard of stage fright oh come on the",
    "start": "1306450",
    "end": "1312040"
  },
  {
    "text": "rest of you I think everybody in this room is her stage fright",
    "start": "1312040",
    "end": "1317190"
  },
  {
    "text": "so this was a vulnerability that was discovered by Joshua Drake he reported it privately to us",
    "start": "1318100",
    "end": "1326080"
  },
  {
    "text": "we learn though about we really appreciate it it's awesome public",
    "start": "1326080",
    "end": "1331280"
  },
  {
    "text": "disclosure came later the first time I heard about was NPR National Public Radio there was a blog post about it PR",
    "start": "1331280",
    "end": "1337760"
  },
  {
    "text": "advertising buys for this purposes this presentation I'm",
    "start": "1337760",
    "end": "1342770"
  },
  {
    "text": "actually gonna be focusing on one particular CVE CV 2015 38 24 and this is",
    "start": "1342770",
    "end": "1349970"
  },
  {
    "text": "called the mpeg-4 px 3G integer overflow",
    "start": "1349970",
    "end": "1355750"
  },
  {
    "text": "stagefright to me was a very interesting bug and it's actually how many people",
    "start": "1361090",
    "end": "1368059"
  },
  {
    "text": "are familiar with the phrase a successful failure no no how many people have watched the",
    "start": "1368059",
    "end": "1374809"
  },
  {
    "text": "movie Apollo 13 yeah so Apollo 13 they were launching a",
    "start": "1374809",
    "end": "1381620"
  },
  {
    "text": "spacecraft in the moon and they stirred the KY rejent tanks and",
    "start": "1381620",
    "end": "1388520"
  },
  {
    "text": "boom things exploded they need to figure out how to get the astronauts home safely there was a consumable problem",
    "start": "1388520",
    "end": "1395540"
  },
  {
    "text": "and they did it they got them home safely it was one of NASA's finest hours and in the same way I consider stage",
    "start": "1395540",
    "end": "1402559"
  },
  {
    "text": "fright to be one of Android Security's finest hours so it allowed to a lot of different",
    "start": "1402559",
    "end": "1408770"
  },
  {
    "text": "things we had our monthly patching cycle so this month is actually gonna be the 12th",
    "start": "1408770",
    "end": "1414980"
  },
  {
    "text": "month where we've been patching the Nexus devices making sure that all these",
    "start": "1414980",
    "end": "1420650"
  },
  {
    "text": "devices are updated on a monthly basis something I'm very proud of it introduced the public security",
    "start": "1420650",
    "end": "1427970"
  },
  {
    "text": "bulletins so we had been notifying partners about the security issues and we said well",
    "start": "1427970",
    "end": "1433870"
  },
  {
    "text": "you know let's go ahead the public security bulletins I mentioned you know they have a lot of bugs in there a lot",
    "start": "1433870",
    "end": "1440030"
  },
  {
    "text": "of them aren't reachable actually have this nice quote from J duck every time I look at the changes in",
    "start": "1440030",
    "end": "1445760"
  },
  {
    "text": "these bulletins I get sad because a lot of the time these bugs are useless for attackers I just wanna make sure I",
    "start": "1445760",
    "end": "1451809"
  },
  {
    "text": "mentioned that no evidence of malicious exploitation",
    "start": "1451809",
    "end": "1456940"
  },
  {
    "text": "now our visibility may not be great but nobody in the ecosystem has found anybody exploiting this on a malicious",
    "start": "1456940",
    "end": "1465039"
  },
  {
    "text": "basis I mean we see an isolated tax here in there the mitigations and the mitigations",
    "start": "1465039",
    "end": "1473140"
  },
  {
    "text": "actually bought time and they did exactly how that what they are intended to do they boss time to deploy the patches make sure people are fixed the",
    "start": "1473140",
    "end": "1480039"
  },
  {
    "text": "device device diversity also helps Stanley nobody's ever performed an attack at such large scale where there's",
    "start": "1480039",
    "end": "1486580"
  },
  {
    "text": "so many different devices if frustrates an attacker it complicates the testing process perform really the exploit",
    "start": "1486580",
    "end": "1492669"
  },
  {
    "text": "containment worked and I'm going to talk more about that later on if forsworn ability chaining",
    "start": "1492669",
    "end": "1499409"
  },
  {
    "text": "the patch itself is widely distributed according to Imperium the the stage",
    "start": "1499409",
    "end": "1506230"
  },
  {
    "text": "right patches are on anywhere from 57 to 89% of the 1.5 or 1.75 billion devices",
    "start": "1506230",
    "end": "1514980"
  },
  {
    "text": "that are on the internet so amazing amazing soul patch penetration",
    "start": "1514980",
    "end": "1521370"
  },
  {
    "text": "significant architectural improvements I'm going to talk about that later and it has visibility the and rewards",
    "start": "1521370",
    "end": "1527620"
  },
  {
    "text": "program we pay up to $50,000 if you if you can produce the right kind of",
    "start": "1527620",
    "end": "1533980"
  },
  {
    "text": "exploit with the right kind of test with a patch available and where we want to",
    "start": "1533980",
    "end": "1539049"
  },
  {
    "text": "pay for bone builds and you want Android to be as safe as possible so we've got a significant rationale to Admiral Andreea",
    "start": "1539049",
    "end": "1544840"
  },
  {
    "text": "vulnerability rewards program so let's talk a little bit about",
    "start": "1544840",
    "end": "1550149"
  },
  {
    "text": "patching I mentioned the superior numbers for for where we're at but this last",
    "start": "1550149",
    "end": "1556480"
  },
  {
    "text": "year has actually bought huge improvements at the rate at which updates are actually being delivered to",
    "start": "1556480",
    "end": "1563200"
  },
  {
    "text": "users devices to really give you a sense of where we're at you can take a look at this table and this table shows 22",
    "start": "1563200",
    "end": "1570820"
  },
  {
    "text": "devices across 22 flagship devices across the four major manufacturers over",
    "start": "1570820",
    "end": "1576100"
  },
  {
    "text": "the last three months and whether they have security patches or not so this is based on real data that's coming in",
    "start": "1576100",
    "end": "1582220"
  },
  {
    "text": "safety net items from some of our telemetry and you can see that the vast majority",
    "start": "1582220",
    "end": "1589509"
  },
  {
    "text": "of devices are within a 30-day patch window even greater percentage are",
    "start": "1589509",
    "end": "1595779"
  },
  {
    "text": "within sixty days and all of them are basically within a 90-day patch window so we've made tremendous progress",
    "start": "1595779",
    "end": "1601419"
  },
  {
    "text": "addressing of patching throughout the ecosystem and",
    "start": "1601419",
    "end": "1606659"
  },
  {
    "text": "Samsung in particular is really noteworthy they've been providing updates for all of their flagship models",
    "start": "1606659",
    "end": "1612639"
  },
  {
    "text": "for the last for the last three months LG has been making significant progress",
    "start": "1612639",
    "end": "1618539"
  },
  {
    "text": "but to be balanced there are actually lots of different Android devices and most Android devices aren't are still",
    "start": "1618539",
    "end": "1626559"
  },
  {
    "text": "not getting updates and so we're continuing to work with our OEM partners and carrier partners to make sure that",
    "start": "1626559",
    "end": "1632500"
  },
  {
    "text": "updates are reaching an increasing number of devices at faster and faster cadence I",
    "start": "1632500",
    "end": "1640590"
  },
  {
    "text": "mentioned containment stage-fright would I start the media",
    "start": "1641970",
    "end": "1647379"
  },
  {
    "text": "server was designed to containment and we actually focused on that there was a",
    "start": "1647379",
    "end": "1652899"
  },
  {
    "text": "presentation gave by given by rich Cannings back in 2009 at the Houston security conference where we talked",
    "start": "1652899",
    "end": "1659710"
  },
  {
    "text": "about how we understood at that time that parsing media codecs was dangerous and so we created a sandbox at that time",
    "start": "1659710",
    "end": "1667110"
  },
  {
    "text": "it was actually the it was first effective in the vulnerability that Charlie Miller discovered Oh search 2009",
    "start": "1667110",
    "end": "1674529"
  },
  {
    "text": "to below till it was an MPEG 4 parts and vulnerability and in the case of stay",
    "start": "1674529",
    "end": "1681100"
  },
  {
    "text": "trying the case of the bugs that were reported they were contained the the vulnerability required the tech",
    "start": "1681100",
    "end": "1689830"
  },
  {
    "text": "the excellent what's contained we were able to reason about what would happen to the device in the presence of a",
    "start": "1689830",
    "end": "1695080"
  },
  {
    "text": "compromised J duck posted this on Twitter you know he he was showing how his",
    "start": "1695080",
    "end": "1701919"
  },
  {
    "text": "exploit works he said however media server is limited by both his privileges which were pretty high and the SQLite",
    "start": "1701919",
    "end": "1708580"
  },
  {
    "text": "policy and we can't even read the shell script interpreter so",
    "start": "1708580",
    "end": "1715018"
  },
  {
    "text": "now you know media server grew up it would develop more features and so I think there was a fair point that",
    "start": "1715400",
    "end": "1723170"
  },
  {
    "text": "we had to revisit the containment that was happening on the device for stage right",
    "start": "1723170",
    "end": "1730340"
  },
  {
    "text": "so first bug first priority fix the bug the bug fix was pretty simple if",
    "start": "1731120",
    "end": "1737600"
  },
  {
    "text": "size is less than chunk size return malformed thing to keep in mind here is that chunk",
    "start": "1737600",
    "end": "1743820"
  },
  {
    "text": "size of the 64-bit value this will become important later so we're fortunate that the",
    "start": "1743820",
    "end": "1751590"
  },
  {
    "text": "vulnerability was to report I sorry the vulnerability reporters looked at the patch created the patch I looked at the",
    "start": "1751590",
    "end": "1757500"
  },
  {
    "text": "patch other people in the media team looked at the patch and nobody saw any problem with it awesome except it wasn't awesome",
    "start": "1757500",
    "end": "1764570"
  },
  {
    "text": "so turns out that there was a bug in the patch and I mentioned that chunk size was a 64-bit value and it turns out that",
    "start": "1764570",
    "end": "1771420"
  },
  {
    "text": "if you do the arithmetic operation it's actually doing it as a 32-bit value so",
    "start": "1771420",
    "end": "1776640"
  },
  {
    "text": "you still end up with an inch or underflow so that led to CVE 2015 38 64",
    "start": "1776640",
    "end": "1783900"
  },
  {
    "text": "which was to get the patch properly fixed I reviewed this vulnerability reporter review this humans make",
    "start": "1783900",
    "end": "1789840"
  },
  {
    "text": "mistakes in the efforts in creates software and it's up to security professionals to help put seat belts on",
    "start": "1789840",
    "end": "1797010"
  },
  {
    "text": "and make sure these environments is safer slowly fixing bugs is acceptable I mentioned that earlier",
    "start": "1797010",
    "end": "1804170"
  },
  {
    "text": "so we did a number of changes to make Android more secure I want to talk about",
    "start": "1804170",
    "end": "1809880"
  },
  {
    "text": "media server refactoring and row flow protections ASLR these are",
    "start": "1809880",
    "end": "1815670"
  },
  {
    "text": "all things that we did I'm going to talk about each one of these so the first thing we did was I talked",
    "start": "1815670",
    "end": "1822210"
  },
  {
    "text": "about the principle of architectural decomposition trying to take big things and turn them into little things this is",
    "start": "1822210",
    "end": "1828180"
  },
  {
    "text": "how we make the systems more secure and so we looked at the containment model for media server and we said are there",
    "start": "1828180",
    "end": "1835920"
  },
  {
    "text": "things that changes we can do to make it better so the first thing we did was we actually created we had one process",
    "start": "1835920",
    "end": "1841380"
  },
  {
    "text": "called mediate server and it had a number of different services in there and so what we did was D splitting the",
    "start": "1841380",
    "end": "1846570"
  },
  {
    "text": "six parts six servers and you can sort of see the breakdown here you have media",
    "start": "1846570",
    "end": "1851910"
  },
  {
    "text": "DRM server media codecs server extractor server server",
    "start": "1851910",
    "end": "1857960"
  },
  {
    "text": "and this was actually really nice because what it allow us to do is where",
    "start": "1857960",
    "end": "1863340"
  },
  {
    "text": "media server before had a whole set of permissions the ability to access the GPU the ability to make network sockets",
    "start": "1863340",
    "end": "1869310"
  },
  {
    "text": "we are able to partition those permissions across all the other ones now a lot of that stage-fright",
    "start": "1869310",
    "end": "1875730"
  },
  {
    "text": "vulnerabilities occurred in the media code I start in the media extractor service down in the very lower right",
    "start": "1875730",
    "end": "1881970"
  },
  {
    "text": "hand corner and one of the things you'll see there is that that doesn't have any permissions it's one of the tightest",
    "start": "1881970",
    "end": "1887940"
  },
  {
    "text": "sandboxes today on Android and so we know if a vulnerability was to happen like stage fright",
    "start": "1887940",
    "end": "1893190"
  },
  {
    "text": "we could reason about it and make sure that the the extractor service is appropriately contained",
    "start": "1893190",
    "end": "1899720"
  },
  {
    "text": "so the media server refactoring was archit was a huge improvement for",
    "start": "1900440",
    "end": "1905520"
  },
  {
    "text": "android security that's the improved architectural decomposition vastly improved separation of privileges",
    "start": "1905520",
    "end": "1912710"
  },
  {
    "text": "the date most dangerous code was moved to the most isolated process where we could reason about and contain it and",
    "start": "1912710",
    "end": "1919830"
  },
  {
    "text": "the containment model was significant more robust everybody's safer",
    "start": "1919830",
    "end": "1924680"
  },
  {
    "text": "the other thing we found was in drawer flows so I'm sure everybody here is",
    "start": "1925730",
    "end": "1930960"
  },
  {
    "text": "familiar with computer math you keep adding to a certain value and eventually it wraps around you and never this is",
    "start": "1930960",
    "end": "1938160"
  },
  {
    "text": "something that only computer science folks seem to accept if you're to tell somebody a mathematician hey if you take",
    "start": "1938160",
    "end": "1944280"
  },
  {
    "text": "a number and you add one to it you'll end up with a number of this less than it they're gonna tell you you're crazy but somehow this is being accepted",
    "start": "1944280",
    "end": "1949800"
  },
  {
    "text": "within the secure the computer science community for decades in C and C++ you add values if you have",
    "start": "1949800",
    "end": "1958680"
  },
  {
    "text": "a signed value it's undefined if it wraps around if you have unsigned value it takes the",
    "start": "1958680",
    "end": "1965220"
  },
  {
    "text": "value modulo two this is defined but it's also defined to be counterintuitive that's not the the expectation that most",
    "start": "1965220",
    "end": "1971580"
  },
  {
    "text": "people have is that numbers don't get smaller if you add two us so all the vulnerabilities that OS are a",
    "start": "1971580",
    "end": "1978870"
  },
  {
    "text": "big chunk of the vulnerabilities that we saw were unsigned integer overflows we said what can we do to make it better you be SAP you be San is the undefined",
    "start": "1978870",
    "end": "1986820"
  },
  {
    "text": "behavior sad Kaiser that's built into playing and we said we can fix this",
    "start": "1986820",
    "end": "1992000"
  },
  {
    "text": "so we turned we turned on the undefined we turned on integer",
    "start": "1992000",
    "end": "1998370"
  },
  {
    "text": "overflow protection across Android and what did that do",
    "start": "1998370",
    "end": "2003520"
  },
  {
    "text": "so here with the original code here is the original assembly before this before you beasts and was turned on",
    "start": "2003520",
    "end": "2010600"
  },
  {
    "text": "you can see there was an arithmetic operation and the arithmetic operation didn't have a checking you allocated a",
    "start": "2010600",
    "end": "2017630"
  },
  {
    "text": "too small of a region that you copied into that too small of a region memory",
    "start": "2017630",
    "end": "2023030"
  },
  {
    "text": "corruption happens bad things happen world goes boom we turned on and your overflow sanitization what does the",
    "start": "2023030",
    "end": "2029240"
  },
  {
    "text": "enjoy overflow sanitization do it actually if there's a wraparound on and your value it calls abort so it adds",
    "start": "2029240",
    "end": "2035660"
  },
  {
    "text": "safety belts and seat belts to every arithmetic operation so in this case we",
    "start": "2035660",
    "end": "2041390"
  },
  {
    "text": "had our original we had our original vulnerability but we turned on Andrew sanitization so there",
    "start": "2041390",
    "end": "2046970"
  },
  {
    "text": "was some assembly I was out of here it's a 64-bit assembly so you have to do that's two 32-bit operations the essence",
    "start": "2046970",
    "end": "2052190"
  },
  {
    "text": "of this code basically is that if the number gets too big if the number wraps around call abort so",
    "start": "2052190",
    "end": "2059108"
  },
  {
    "text": "this would have been sufficient to catch the vulnerability an addition it would have been",
    "start": "2059109",
    "end": "2065658"
  },
  {
    "text": "sufficient to catch the vulnerability even in the presence of our initial malformed patch so you can see we added",
    "start": "2065659",
    "end": "2072320"
  },
  {
    "text": "a chat there we said oh if it if the 32-bit edition wraps around I start if",
    "start": "2072320",
    "end": "2077868"
  },
  {
    "text": "the 32-bit value doesn't make any sense go and go ahead and return air malformed and then the compiler back to stop and",
    "start": "2077869",
    "end": "2083990"
  },
  {
    "text": "it said ok I'm going to add the check and make sure that you actually mean what you say you mean",
    "start": "2083990",
    "end": "2090940"
  },
  {
    "text": "so UV 7 is amazing we turn without the",
    "start": "2091419",
    "end": "2097609"
  },
  {
    "text": "pouch it would have stopped the bug with the bad patch it would stop the bug obviously we want the correct patch",
    "start": "2097609",
    "end": "2103250"
  },
  {
    "text": "because then it's still a denial of service but that's the goal to turn security bugs into just plain bugs",
    "start": "2103250",
    "end": "2110210"
  },
  {
    "text": "that's a and I encourage you to read this link it's our hardening the media staff post",
    "start": "2110210",
    "end": "2115660"
  },
  {
    "text": "where we go into a lot more detail a SLR SLR is something that had a lot of",
    "start": "2115660",
    "end": "2122650"
  },
  {
    "text": "people really care about and it was really effective in the early day jizz our early stages of the stage fright",
    "start": "2122650",
    "end": "2128620"
  },
  {
    "text": "vulnerability so we said after this happened are there things that we can do to make a SLR",
    "start": "2128620",
    "end": "2134020"
  },
  {
    "text": "better so randomize all the things first thing we did was we recognized",
    "start": "2134020",
    "end": "2141370"
  },
  {
    "text": "eight bits of randomness isn't really enough it's good for remote attacks but even",
    "start": "2141370",
    "end": "2147580"
  },
  {
    "text": "when the SR was created it was recognized that eight bits of entropy isn't really that much",
    "start": "2147580",
    "end": "2153360"
  },
  {
    "text": "the project zero folks outlined to the stage fright exploit and",
    "start": "2153360",
    "end": "2158530"
  },
  {
    "text": "they believed that they could exploit it and on just about under ten minutes so we said let's increase it to 16 bits",
    "start": "2158530",
    "end": "2165730"
  },
  {
    "text": "let's increase the base and map randomization to 16 bits and so the same",
    "start": "2165730",
    "end": "2171010"
  },
  {
    "text": "vulnerability had it occurred to testicle E we will expect he would have taken about 45 hours to perform the",
    "start": "2171010",
    "end": "2177130"
  },
  {
    "text": "exploit versus ten Nets significant improvement we sent this upstream the entire Linux community is",
    "start": "2177130",
    "end": "2184200"
  },
  {
    "text": "safer as a result of the changes we made but let's randomize more the second",
    "start": "2184200",
    "end": "2190960"
  },
  {
    "text": "change that we made is focused on what I call library load",
    "start": "2190960",
    "end": "2196450"
  },
  {
    "text": "order randomization normally when you load libraries you load them sequentially but we realize the",
    "start": "2196450",
    "end": "2202120"
  },
  {
    "text": "libraries don't need to be loaded sequentially they can be loaded out of order so rather than going one two three four let's do two three one for this",
    "start": "2202120",
    "end": "2208990"
  },
  {
    "text": "time man one three two for the next time it adds a little bit more entropy it builds on top of the EM map based",
    "start": "2208990",
    "end": "2215410"
  },
  {
    "text": "randomization that we already have and so it makes things a little bit safer for the executable code segments it",
    "start": "2215410",
    "end": "2221140"
  },
  {
    "text": "doesn't do anything to address malloc to murmuring or things like that it also doesn't do anything to address the the",
    "start": "2221140",
    "end": "2226540"
  },
  {
    "text": "linker the base linker or the PI executable but I think it's a solid improvement",
    "start": "2226540",
    "end": "2233490"
  },
  {
    "text": "this was a late change to the slides where this was just checked in about 15",
    "start": "2233580",
    "end": "2240010"
  },
  {
    "text": "days ago so it's not gonna be part of Android n but probably the next version of Android could be Oh could be n plus why I don't",
    "start": "2240010",
    "end": "2246300"
  },
  {
    "text": "know what is we actually start inserting random gaps in between shared libraries with this",
    "start": "2246300",
    "end": "2253080"
  },
  {
    "text": "was primarily done to support a future see if I work that we're working on but it also has the advantage that there's",
    "start": "2253080",
    "end": "2259770"
  },
  {
    "text": "now gaps between shared libraries and sort of more randomization so it's harder for an attacker to find a region",
    "start": "2259770",
    "end": "2265050"
  },
  {
    "text": "of executable to jump to there's been a bunch of other changes",
    "start": "2265050",
    "end": "2271160"
  },
  {
    "text": "prior to in Android M the media server was allowed something called exact mount",
    "start": "2271160",
    "end": "2276390"
  },
  {
    "text": "this was the ability to create anonymous executable memory so if you look at the",
    "start": "2276390",
    "end": "2282960"
  },
  {
    "text": "right hand side you'll see a call to M AB to with map anonymous before this",
    "start": "2282960",
    "end": "2289410"
  },
  {
    "text": "would actually return so what attackers would do is they would get enough of a rope chain in order to sort of set up",
    "start": "2289410",
    "end": "2295740"
  },
  {
    "text": "their initial payload their load their payload into memory map is X Cuba and then jump to the shellcode that's no",
    "start": "2295740",
    "end": "2301800"
  },
  {
    "text": "longer possible in Android n so right now in media server the only way you can",
    "start": "2301800",
    "end": "2309000"
  },
  {
    "text": "get X cubed code loaded into memory is it must come from a verified partition this was partially true back in the",
    "start": "2309000",
    "end": "2315600"
  },
  {
    "text": "Android M stage too like we don't allow media server to load executable code from the from the data partition but",
    "start": "2315600",
    "end": "2322620"
  },
  {
    "text": "this is now more true today you literally cannot map anything in a memory executable and less has come from",
    "start": "2322620",
    "end": "2327840"
  },
  {
    "text": "a verified partition signature checked verified DM very protected partition",
    "start": "2327840",
    "end": "2333290"
  },
  {
    "text": "edition we have set comp enforcement for the media server process only a whitelist of system calls are allowed to",
    "start": "2333290",
    "end": "2341190"
  },
  {
    "text": "be executed so if you try for example executing epinet module well",
    "start": "2341190",
    "end": "2346980"
  },
  {
    "text": "that's shut down we'll just kill the process on invalid system call so we've",
    "start": "2346980",
    "end": "2353190"
  },
  {
    "text": "had the we've had the restriction on loading executable code from data data in place for a while this just makes us",
    "start": "2353190",
    "end": "2359580"
  },
  {
    "text": "more solid and more protected so we saw a bug there's lots of",
    "start": "2359580",
    "end": "2366480"
  },
  {
    "text": "post-mortems there was lots of things that happen and when we got around to it we spent",
    "start": "2366480",
    "end": "2372660"
  },
  {
    "text": "time really putting in place seven solid mitigations that not only protected a",
    "start": "2372660",
    "end": "2377810"
  },
  {
    "text": "server process but a lot of the mitigations protect Android as a whole and so significant improvements that",
    "start": "2377810",
    "end": "2384290"
  },
  {
    "text": "we've made I wanted to talk about data in transit protection",
    "start": "2384290",
    "end": "2390849"
  },
  {
    "text": "so everybody in this room knows that the network is not be trusted",
    "start": "2391090",
    "end": "2400450"
  },
  {
    "text": "this has always been true especially for mobile devices so you carry around some",
    "start": "2401200",
    "end": "2407840"
  },
  {
    "text": "of the most confidential information on your device and there is still in this world too",
    "start": "2407840",
    "end": "2414230"
  },
  {
    "text": "much unencrypted traffic so I hope everybody can go back and identify what you can do to move to",
    "start": "2414230",
    "end": "2421400"
  },
  {
    "text": "HTTPS please do that let's get rid of clear text completely",
    "start": "2421400",
    "end": "2427420"
  },
  {
    "text": "so in marshmallow or we had a big focus on on clear text traffic and so we",
    "start": "2429190",
    "end": "2438440"
  },
  {
    "text": "introduced two features in marshmallow that were intended to address the problems of clear text",
    "start": "2438440",
    "end": "2445520"
  },
  {
    "text": "traffic the first one was our cleared of text death mode I actually hate that",
    "start": "2445520",
    "end": "2451100"
  },
  {
    "text": "phrase but clear text death mode and a strict mode actually a death penalty",
    "start": "2451100",
    "end": "2457250"
  },
  {
    "text": "strict mode if we detect if the library is with an Android detect that you're trying to",
    "start": "2457250",
    "end": "2463310"
  },
  {
    "text": "perform clear text traffic we will go ahead and if you've opted into it we",
    "start": "2463310",
    "end": "2469400"
  },
  {
    "text": "will go ahead and kill your application on your behalf to make sure that you just can't do that it prevents accidental regressions in it it's a best",
    "start": "2469400",
    "end": "2476000"
  },
  {
    "text": "effort we've instrumented various libraries around android we there's lots of ways to work around it it's intended",
    "start": "2476000",
    "end": "2481610"
  },
  {
    "text": "to help you as a developer be more secure similarly we also introduced an",
    "start": "2481610",
    "end": "2488030"
  },
  {
    "text": "application manifest called Android uses clear text traffic Eagles false and this",
    "start": "2488030",
    "end": "2493220"
  },
  {
    "text": "is a message to other parts of Android that this is a message to other parts of",
    "start": "2493220",
    "end": "2498920"
  },
  {
    "text": "Android that clear text traffic is it other other",
    "start": "2498920",
    "end": "2505910"
  },
  {
    "text": "parts Andrea are not allowed to issue clear text traffic requests on your behalf so these are not limited to http these",
    "start": "2505910",
    "end": "2514400"
  },
  {
    "text": "are not limited to HTTP and so that was really the big focus of",
    "start": "2514400",
    "end": "2521710"
  },
  {
    "text": "Android marshmallow",
    "start": "2521710",
    "end": "2524950"
  },
  {
    "text": "and nougat we also recognize that there's a lot of",
    "start": "2528460",
    "end": "2536170"
  },
  {
    "text": "poorly encrypted traffic so we said what can we do to address that",
    "start": "2536170",
    "end": "2544030"
  },
  {
    "text": "and in 2014 there was a security researcher who scanned a number of applications in",
    "start": "2544030",
    "end": "2551090"
  },
  {
    "text": "market in our in Google Play and said",
    "start": "2551090",
    "end": "2556660"
  },
  {
    "text": "are these applications based on static code analysis doing things that would make them subject to man the middle",
    "start": "2556900",
    "end": "2564410"
  },
  {
    "text": "attacks against HTTP or TLS and if you do a Google so if you do a miter search",
    "start": "2564410",
    "end": "2570530"
  },
  {
    "text": "a CV search for Android x.509 you actually find that they're about 1,400",
    "start": "2570530",
    "end": "2575990"
  },
  {
    "text": "applications where they weren't using HTTPS properly",
    "start": "2575990",
    "end": "2582760"
  },
  {
    "text": "so one of the big focuses for our data in transit team was how could we",
    "start": "2582760",
    "end": "2589400"
  },
  {
    "text": "actually make this better and what can we do to improve the situation",
    "start": "2589400",
    "end": "2594819"
  },
  {
    "text": "first thing we had to do was understand why are these bugs happening",
    "start": "2597400",
    "end": "2604900"
  },
  {
    "text": "the one of the most common reasons that we found was",
    "start": "2605110",
    "end": "2610780"
  },
  {
    "text": "so if you have a development environment you're testing out your application well",
    "start": "2610780",
    "end": "2617330"
  },
  {
    "text": "you need to be able to connect to a server that you control and you need to be and that server hopefully doesn't",
    "start": "2617330",
    "end": "2623660"
  },
  {
    "text": "have your probably your company's private certificate so you might create a certificate on your own local machine",
    "start": "2623660",
    "end": "2628940"
  },
  {
    "text": "and you might hard code this in or you might temporarily disable HTTPS because",
    "start": "2628940",
    "end": "2634030"
  },
  {
    "text": "you're trying to test out your application you're trying to make sure it works so we found that a lot of",
    "start": "2634030",
    "end": "2639500"
  },
  {
    "text": "people were accidentally leaving in debugging code to their application",
    "start": "2639500",
    "end": "2644750"
  },
  {
    "text": "or they just weren't thinking about removing it later another thing that we found was a lot of",
    "start": "2644750",
    "end": "2654030"
  },
  {
    "text": "the api's that are available on android and other operating systems to have global state associated with them so",
    "start": "2654030",
    "end": "2661290"
  },
  {
    "text": "it's very common for an Android application developer to grab code from here or code from here or code from here",
    "start": "2661290",
    "end": "2667920"
  },
  {
    "text": "and not necessarily understand exactly what not understand at a very fine grain",
    "start": "2667920",
    "end": "2674550"
  },
  {
    "text": "level exactly what that codes doing and that's dangerous for its own case but in",
    "start": "2674550",
    "end": "2679590"
  },
  {
    "text": "the case of HCBS it actually opened up security holes in your application the",
    "start": "2679590",
    "end": "2685440"
  },
  {
    "text": "application the third-party libraries were changing global state",
    "start": "2685440",
    "end": "2690320"
  },
  {
    "text": "insecure code samples online Koff Stack Overflow call",
    "start": "2690980",
    "end": "2697250"
  },
  {
    "text": "there's a lot of bad advice out there about what to do and there's a lot of people that are cutting and pasting code",
    "start": "2697250",
    "end": "2703910"
  },
  {
    "text": "I think the the presentation that who",
    "start": "2703910",
    "end": "2709620"
  },
  {
    "text": "gave the all the intro presentation for Black Caps",
    "start": "2709620",
    "end": "2715070"
  },
  {
    "text": "yeah he talked about this we as an ecosystem I sorry we as an industry don't actually",
    "start": "2715070",
    "end": "2722460"
  },
  {
    "text": "share the proper ways to do this we rely on places like Stack Overflow to it and a lot of times they're wrong",
    "start": "2722460",
    "end": "2729290"
  },
  {
    "text": "we also see vulnerabilities that occur due to connections to legacy servers",
    "start": "2729290",
    "end": "2735680"
  },
  {
    "text": "I wanted to list out a few samples of code that we've seen for the love of God",
    "start": "2737030",
    "end": "2743550"
  },
  {
    "text": "please do not put any of these into your app into your",
    "start": "2743550",
    "end": "2748650"
  },
  {
    "text": "application at all a developer might want to say well I",
    "start": "2748650",
    "end": "2754590"
  },
  {
    "text": "have this a default hostname verified err and that make sure that when I'm making a request I'm actually connecting",
    "start": "2754590",
    "end": "2762480"
  },
  {
    "text": "to dub dub dub dot my company comm instead of WWE welcome the problem is",
    "start": "2762480",
    "end": "2769830"
  },
  {
    "text": "when you're in a development environment you might need connecting to your desktop machine which has a slightly different hostname so people put this in",
    "start": "2769830",
    "end": "2777150"
  },
  {
    "text": "their code let's just we'll honor the certificate but we just won't actually check the name on the certificate itself",
    "start": "2777150",
    "end": "2783289"
  },
  {
    "text": "so we return true all the time to verify it seems to work good in development a",
    "start": "2783289",
    "end": "2789000"
  },
  {
    "text": "seasonal work good in production everything's great it's broken another example was really focused",
    "start": "2789000",
    "end": "2795809"
  },
  {
    "text": "around checking to see if a client was trusted I sorry I check to see if the server was",
    "start": "2795809",
    "end": "2802230"
  },
  {
    "text": "trusted now the contract with these api's is that",
    "start": "2802230",
    "end": "2807680"
  },
  {
    "text": "they return it they throw an exception if something is bad well for development",
    "start": "2807680",
    "end": "2812970"
  },
  {
    "text": "you might not want to do that and say don't throw the exception again it looks like everything's working but it's not working how you intended",
    "start": "2812970",
    "end": "2820549"
  },
  {
    "text": "so we introduced the network security configure we recognized that the existing API is were too prone I talked",
    "start": "2820549",
    "end": "2826170"
  },
  {
    "text": "about safe by default we're trying to make things safe by default it's an easier API to use to configure",
    "start": "2826170",
    "end": "2832410"
  },
  {
    "text": "TLS traffic it allows you fine-grained control over insecure secure traffic",
    "start": "2832410",
    "end": "2838220"
  },
  {
    "text": "it has special provisions for debug ability within your code so you can add",
    "start": "2838220",
    "end": "2843869"
  },
  {
    "text": "special rules that the operating system will enforcement that we remove it at a build time it allows you to really limit",
    "start": "2843869",
    "end": "2851579"
  },
  {
    "text": "the CAS that you want to trust and it provides a really easy mechanism for",
    "start": "2851579",
    "end": "2856829"
  },
  {
    "text": "doing pinning of your application so we think it's a good solid",
    "start": "2856829",
    "end": "2861930"
  },
  {
    "text": "improvement try to remove the remove the really complicated code make it a static configuration file that defines how your",
    "start": "2861930",
    "end": "2868529"
  },
  {
    "text": "service runs I listed a few examples here",
    "start": "2868529",
    "end": "2874010"
  },
  {
    "text": "let's say for example you have a web browser an application and it connects",
    "start": "2874010",
    "end": "2881069"
  },
  {
    "text": "some lots of different places and it could connect to your secure web site and you want to force that that will always be secure so we can enforce that",
    "start": "2881069",
    "end": "2888210"
  },
  {
    "text": "but other places you don't mind if it's insecure so this is a syntax that is",
    "start": "2888210",
    "end": "2893880"
  },
  {
    "text": "used to say I want to enforce that all",
    "start": "2893880",
    "end": "2899220"
  },
  {
    "text": "the traffic to secure example comm and subdomains of that traffic are always supposed to be secure and we don't allow",
    "start": "2899220",
    "end": "2905910"
  },
  {
    "text": "any kind of clear traffic very simple very easy to understand no need to write any code",
    "start": "2905910",
    "end": "2912610"
  },
  {
    "text": "you might want to restrict which cas you trust perhaps you don't trust a certificate from a random country and so",
    "start": "2913360",
    "end": "2923540"
  },
  {
    "text": "you could actually embed that within your application and say i only want to trust these certificates and so you can",
    "start": "2923540",
    "end": "2929390"
  },
  {
    "text": "find out lots of control lots of power very simple syntax or you can even do pinning and so again",
    "start": "2929390",
    "end": "2937460"
  },
  {
    "text": "you could embed a hash of your of your certificate into your application itself",
    "start": "2937460",
    "end": "2943400"
  },
  {
    "text": "and that way if you if you're the network to android network stack tries to detect to",
    "start": "2943400",
    "end": "2950060"
  },
  {
    "text": "connect to something that's not allowed it will be rejected the data is very the expiration date is",
    "start": "2950060",
    "end": "2956780"
  },
  {
    "text": "bearer during the course of writing the network",
    "start": "2956780",
    "end": "2961880"
  },
  {
    "text": "security config we had them really the opportunity to revisit how we thought about large chunks of how we do certificate",
    "start": "2961880",
    "end": "2968690"
  },
  {
    "text": "management and so one of the things we did was we",
    "start": "2968690",
    "end": "2975680"
  },
  {
    "text": "reevaluate how we should handle user installed certs and so by default android files and",
    "start": "2975680",
    "end": "2984830"
  },
  {
    "text": "process another data is protected from other applications is protected from the user but that same rule wasn't true for",
    "start": "2984830",
    "end": "2991070"
  },
  {
    "text": "network traffic and so we said there's an inconsistency here we also start seeing interest from",
    "start": "2991070",
    "end": "2998270"
  },
  {
    "text": "nation states so you guys might have read about this back in 2015 Qasr stands",
    "start": "2998270",
    "end": "3003790"
  },
  {
    "text": "considering requiring all of their citizens to install a certificate on their device concerning so",
    "start": "3003790",
    "end": "3011760"
  },
  {
    "text": "we said let's revisit how we think about this most application developers weren't",
    "start": "3011760",
    "end": "3019060"
  },
  {
    "text": "actually aware that they're secure trap that could be intercepted by a library on android and we also found that just",
    "start": "3019060",
    "end": "3026050"
  },
  {
    "text": "user installed certificates were not really commonly used so one of the changes that we made for n was to go to",
    "start": "3026050",
    "end": "3033700"
  },
  {
    "text": "have consistency with the file model in the process model and actually say that",
    "start": "3033700",
    "end": "3039700"
  },
  {
    "text": "users all applications which target nougat or above no longer trust user installed certs by default we empower",
    "start": "3039700",
    "end": "3045859"
  },
  {
    "text": "application developers to make that choice whether they want to trust it or not but nougat applications are above no longer",
    "start": "3045859",
    "end": "3053180"
  },
  {
    "text": "on or user-installed starts",
    "start": "3053180",
    "end": "3057190"
  },
  {
    "text": "where do we go from here so we only have a couple minutes left",
    "start": "3058329",
    "end": "3066249"
  },
  {
    "text": "so I talked a lot about safe by design the architecture is that kind of thing",
    "start": "3066249",
    "end": "3071650"
  },
  {
    "text": "we as an industry need to move away from memory unsafe languages",
    "start": "3071650",
    "end": "3078519"
  },
  {
    "text": "something like eighty five point nine percent of the security bugs that we deal with an Android have to do with",
    "start": "3078519",
    "end": "3085249"
  },
  {
    "text": "native code vulnerabilities Android was a great offer ever Andrew",
    "start": "3085249",
    "end": "3092990"
  },
  {
    "text": "really has encouraged the use of Java for applications it's been one of the things that saved us over and over again applications are very secure because",
    "start": "3092990",
    "end": "3099230"
  },
  {
    "text": "they use Java we need to get more memories more memory safety within these platforms and that's true for even",
    "start": "3099230",
    "end": "3105140"
  },
  {
    "text": "critical infrastructure things like the Linux kernel need to figure out a way to make this happen I don't know how to do it but we need to figure it out",
    "start": "3105140",
    "end": "3112748"
  },
  {
    "text": "and we also really need to invest in defenses so",
    "start": "3113349",
    "end": "3119349"
  },
  {
    "text": "exploit mitigation exploit containment CFI we need to invest in mitigations and",
    "start": "3119349",
    "end": "3125989"
  },
  {
    "text": "make sure that we're honoring these principles that are up here and that we",
    "start": "3125989",
    "end": "3131450"
  },
  {
    "text": "are protecting our users and making the entire making the entire ecosystem safer so",
    "start": "3131450",
    "end": "3138249"
  },
  {
    "text": "blackhat soundbites we have a really robust - multi-layered defense it's designed to mitigate and",
    "start": "3138249",
    "end": "3145039"
  },
  {
    "text": "contain vulnerabilities it's something I'm very proud of we are",
    "start": "3145039",
    "end": "3150589"
  },
  {
    "text": "really heavily investing learning from vulnerabilities in and try to figure out how we can make these better and we know",
    "start": "3150589",
    "end": "3156380"
  },
  {
    "text": "the phone abilities will never go away but they can you imagine it can be contained people can be kept safety and than the presence of vulnerabilities",
    "start": "3156380",
    "end": "3162249"
  },
  {
    "text": "so I want to say thank you",
    "start": "3162249",
    "end": "3166690"
  },
  {
    "text": "[Applause] [Music]",
    "start": "3167300",
    "end": "3171329"
  }
]