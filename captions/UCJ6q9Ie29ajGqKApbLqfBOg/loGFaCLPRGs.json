[
  {
    "text": "[Music]",
    "start": "29420",
    "end": "43679"
  },
  {
    "text": "my name is Cesar Cudo and he is eron Newman we be welcome to",
    "start": "57719",
    "end": "64198"
  },
  {
    "text": "this talk we will be talking about some the last vulnerabilities in Microsoft",
    "start": "64199",
    "end": "71840"
  },
  {
    "text": "SQL Server most of them have have been already",
    "start": "71840",
    "end": "77439"
  },
  {
    "text": "fixed but we we think that it's important that you know all the",
    "start": "77439",
    "end": "83360"
  },
  {
    "text": "vulnerabilities we we don't have nothing against Microsoft I think that SQL",
    "start": "83360",
    "end": "89280"
  },
  {
    "text": "Server is a very good product is one of the best database server",
    "start": "89280",
    "end": "96439"
  },
  {
    "text": "so let's start with this okay okay yeah this presentation is really kind of the",
    "start": "96439",
    "end": "101759"
  },
  {
    "text": "um culmination of about a couple months of research by Caesar um kind of",
    "start": "101759",
    "end": "107960"
  },
  {
    "text": "blackboot testing there's a a presentation that goes along with it that really goes into the methodology that Caesar followed to do that blackbox",
    "start": "107960",
    "end": "115079"
  },
  {
    "text": "testing so we recommend you to look at that as well um this is just a quick outline we're going to start looking",
    "start": "115079",
    "end": "121360"
  },
  {
    "text": "collecting passwords looking at some passwords that could be pulled out of um SQL server and we'll talk about",
    "start": "121360",
    "end": "128520"
  },
  {
    "text": "elevating privileges uh meaning going from a less privileged user to a more privileged user we'll be covering how to",
    "start": "128520",
    "end": "135360"
  },
  {
    "text": "break out of SQL server and gain access to the operating system uh and then we'll finish up with a denial of service",
    "start": "135360",
    "end": "142360"
  },
  {
    "text": "attack uh and at the end we're going to go over uh re some resources and um wrap",
    "start": "142360",
    "end": "147560"
  },
  {
    "text": "up and as well we have a de a demonstration of a a SQL injection tool that Caesar's uh written that's uh",
    "start": "147560",
    "end": "155200"
  },
  {
    "text": "really interesting in some of the techniques it uses um collecting passwords uh is where",
    "start": "155200",
    "end": "163159"
  },
  {
    "text": "we'll start I guess let me start by explaining SQL server has two modes of authentication uh one where you can use",
    "start": "163159",
    "end": "170720"
  },
  {
    "text": "your windows credentials and that's actually the recommended method that um Microsoft uh recommends you use there is",
    "start": "170720",
    "end": "178319"
  },
  {
    "text": "however also a second method and that's what with the sa account uh and those are standard logins where you can create an account and then SQL Server maintains",
    "start": "178319",
    "end": "184959"
  },
  {
    "text": "those logins um so now why is that important because",
    "start": "184959",
    "end": "191000"
  },
  {
    "text": "if if you're using Microsoft SQL Server uses a lot of processes that run jobs or",
    "start": "191000",
    "end": "196720"
  },
  {
    "text": "do other tasks and they processes outside of SQL Server so that they",
    "start": "196720",
    "end": "201959"
  },
  {
    "text": "actually need a login and password to authenticate to SQL Server now because they need those login passwords and",
    "start": "201959",
    "end": "208200"
  },
  {
    "text": "they're run uh not by user but at a schedu of time they need to store that password somewhere and pull it out um",
    "start": "208200",
    "end": "215200"
  },
  {
    "text": "and and that's really where where those passwords are stored is where we're going to look today uh and show you some",
    "start": "215200",
    "end": "220319"
  },
  {
    "text": "of the places you should lock down and make sure you didn't leave these passwords there um there these passwords",
    "start": "220319",
    "end": "226120"
  },
  {
    "text": "are actually stored usually somewhere in the registry or in tables uh somewhere",
    "start": "226120",
    "end": "231400"
  },
  {
    "text": "else and and they're usually I don't even like to use the word weekly encrypted they're really encoded using",
    "start": "231400",
    "end": "236799"
  },
  {
    "text": "an algorithm that you can't obviously see what the password is but there's really no secret key to encrypt it so",
    "start": "236799",
    "end": "243799"
  },
  {
    "text": "it's really just the knowledge of the algorithm that's that's keeping it um keeping it secret uh and and just",
    "start": "243799",
    "end": "250680"
  },
  {
    "text": "because I went over what I just went over they're saved with that weak encryption because they need to be pulled out later decrypted so they could",
    "start": "250680",
    "end": "257079"
  },
  {
    "text": "be used to authenticate uh and so the real issue is not that they're do that this is being done the real issue is",
    "start": "257079",
    "end": "263880"
  },
  {
    "text": "that if you leave Access Control where people can pull that out by default out of a SQL Server that's where the real",
    "start": "263880",
    "end": "269759"
  },
  {
    "text": "real problem arises um the first place is in DTS packages DTS data transformation",
    "start": "269759",
    "end": "276600"
  },
  {
    "text": "Services it's really a fancy way to write a script in SQL server and to",
    "start": "276600",
    "end": "282000"
  },
  {
    "text": "allow it to suck data from one place manipulate it and then push it into another place uh and a d a DTS package",
    "start": "282000",
    "end": "288759"
  },
  {
    "text": "is really a combination of what Transformations you want to make to the database and the connection information",
    "start": "288759",
    "end": "294720"
  },
  {
    "text": "and that's what's important is a connection information where you can get in trouble because that connection information includes",
    "start": "294720",
    "end": "300280"
  },
  {
    "text": "the username and password um it could be stored that DTS package could be stored",
    "start": "300280",
    "end": "306280"
  },
  {
    "text": "at a number of different places on SQL Server uh in what's called a metadata Service uh it could also be stored in",
    "start": "306280",
    "end": "313199"
  },
  {
    "text": "structured uh storage files and invis Visual Basic files so the real uh",
    "start": "313199",
    "end": "319080"
  },
  {
    "text": "weaknesses we found were when it was stored in SQL server or when it was stored in a metadata Services file",
    "start": "319080",
    "end": "326960"
  },
  {
    "text": "um there's also really two passwords associated with the DTs package and this",
    "start": "326960",
    "end": "332280"
  },
  {
    "text": "is where it can get a little bit confusing there's a password that password that it uses for the connection",
    "start": "332280",
    "end": "337720"
  },
  {
    "text": "information and that's the one we're more worried about people getting there's also a password where you can",
    "start": "337720",
    "end": "342960"
  },
  {
    "text": "encrypt the DTs package so let's just be clear there's a there's a password that encrypts the package to protect it and",
    "start": "342960",
    "end": "349840"
  },
  {
    "text": "within that there's also a password that the DTs package uses to log on to the system it's going to pull data out",
    "start": "349840",
    "end": "356759"
  },
  {
    "text": "of um when you save DTS packages in SQL Server they're encoded using a",
    "start": "356759",
    "end": "362319"
  },
  {
    "text": "proprietary algorithm and they're stored in the msdb database in a table called Cy DTS packages now uh the first thing",
    "start": "362319",
    "end": "370560"
  },
  {
    "text": "you want to do is if you want to pull us out as a as an evil hacker is you just try to select from the table and now",
    "start": "370560",
    "end": "376440"
  },
  {
    "text": "permissions to select from those tables are not given by default so the knowing SQL server and how it works you have to",
    "start": "376440",
    "end": "382880"
  },
  {
    "text": "say to yourself well I can't direct select directly from the table what I can the first thing I try to do though",
    "start": "382880",
    "end": "388319"
  },
  {
    "text": "is go find a store procedure procedure that selects from that and use that store procedure to actually select from",
    "start": "388319",
    "end": "394280"
  },
  {
    "text": "it uh and that works because uh the ownership chaining in SQL Server allows",
    "start": "394280",
    "end": "400080"
  },
  {
    "text": "someone if if a store procedure and the table are owned by the same people which everything all system objects will be",
    "start": "400080",
    "end": "406680"
  },
  {
    "text": "you're allowed to select on that object even if you don't have permissions to it so uh what what you have here is uh two",
    "start": "406680",
    "end": "414599"
  },
  {
    "text": "two EXT two store procedures SP new DTS packages and SP get TS packages uh and",
    "start": "414599",
    "end": "421199"
  },
  {
    "text": "both of those are granted to public uh they they're granted execute permissions",
    "start": "421199",
    "end": "426319"
  },
  {
    "text": "are granted to public so all users can execute that um so to uncover the",
    "start": "426319",
    "end": "432000"
  },
  {
    "text": "passwords we're going to show a little demonstration the first thing you do is get the DTs package data uh and this is",
    "start": "432000",
    "end": "437680"
  },
  {
    "text": "what we're going to show here have to get the right window up now",
    "start": "437680",
    "end": "447479"
  },
  {
    "text": "so the first thing you do is we're going to set user to guest so that we're a non-page user no I wanted to say that",
    "start": "451560",
    "end": "458120"
  },
  {
    "text": "all the script are the user already connected is a c m user but we in every",
    "start": "458120",
    "end": "464120"
  },
  {
    "text": "script we will set to a low privilege user with the set user instruction so we",
    "start": "464120",
    "end": "469919"
  },
  {
    "text": "so we will demonstrate that the lower privileged user can execute that",
    "start": "469919",
    "end": "476199"
  },
  {
    "text": "comments so execute this and you see that uh we're now the the guest user and",
    "start": "476199",
    "end": "482319"
  },
  {
    "text": "then um we call enumerate DTS packages which actually gives us a list of all the DTs packages that are saved in our",
    "start": "482319",
    "end": "488639"
  },
  {
    "text": "database uh and using the information we pull out of that such as the name the ID and the version ID that's uh parameters",
    "start": "488639",
    "end": "495639"
  },
  {
    "text": "we have to feed into the get TTS package uh to actually pull out the password so",
    "start": "495639",
    "end": "500840"
  },
  {
    "text": "I just cut and pasted those earlier uh and then I execute this and",
    "start": "500840",
    "end": "506280"
  },
  {
    "text": "what I get back is this package data and so now still looking at the package data",
    "start": "506280",
    "end": "512719"
  },
  {
    "text": "I one second these two step are are only necessary if you are exploiting this Ro",
    "start": "512719",
    "end": "519240"
  },
  {
    "text": "SQL injection if you have if you can log to the server then you can log with",
    "start": "519240",
    "end": "525120"
  },
  {
    "text": "Enterprise Manager just open the page the package right right so you can either",
    "start": "525120",
    "end": "531080"
  },
  {
    "text": "get this package data here or you could just simply go to Enterprise Manager and you um this is the management tool for",
    "start": "531080",
    "end": "537880"
  },
  {
    "text": "SQL Server and you can go into Data transformation services and when you do",
    "start": "537880",
    "end": "544360"
  },
  {
    "text": "properties here or you design",
    "start": "544360",
    "end": "548519"
  },
  {
    "text": "package this brings up the package uh it takes a minute and then you go into",
    "start": "549560",
    "end": "556440"
  },
  {
    "text": "properties and yeah right here is the password and it's in Asis is there but",
    "start": "556440",
    "end": "562640"
  },
  {
    "text": "if you do a memory dump of it you'll see that the password's actually a memory you can't read uh the password that was",
    "start": "562640",
    "end": "569000"
  },
  {
    "text": "fixed in SQL Server 7 but right now you can still read the password from memory",
    "start": "569000",
    "end": "575880"
  },
  {
    "text": "is so that's how you would get the password decrypted without having to understand the entire uh algorithm for",
    "start": "575880",
    "end": "583600"
  },
  {
    "text": "how it's",
    "start": "583600",
    "end": "585959"
  },
  {
    "text": "encoded okay so once you get that DTS package if you have access to that database you could simply use Enterprise",
    "start": "592519",
    "end": "598600"
  },
  {
    "text": "Manager if you don't if you're using it through SQL injection and pulling that package data back you just insert it",
    "start": "598600",
    "end": "604000"
  },
  {
    "text": "into your own SQL instance you'd open the DTs package through Enterprise managers just like I showed and then",
    "start": "604000",
    "end": "610320"
  },
  {
    "text": "you'll be able to read that out of memory uh fix for this is uh to use",
    "start": "610320",
    "end": "616040"
  },
  {
    "text": "strong passwords whenever you save a DTS package uh you can use a password to",
    "start": "616040",
    "end": "621560"
  },
  {
    "text": "encrypt it actually and so you want to choose a strong password because if it can also be Brute Force so um you can't",
    "start": "621560",
    "end": "629000"
  },
  {
    "text": "use it an easy password on that uh another place that DTS packages",
    "start": "629000",
    "end": "634079"
  },
  {
    "text": "are saved is in the metadata Services um this is actually saved in the database",
    "start": "634079",
    "end": "639519"
  },
  {
    "text": "as well but in a different set of tables uh the connection password is actually saved in clear text in a in a table in",
    "start": "639519",
    "end": "646360"
  },
  {
    "text": "the msdb database under rtbl dbmb props uh and it's actually saved in",
    "start": "646360",
    "end": "654160"
  },
  {
    "text": "a column called c1120 so it's actually it's probably",
    "start": "654160",
    "end": "659600"
  },
  {
    "text": "been there for years but the the thing is it's buried so far down that probably no one has ever noticed that there's",
    "start": "659600",
    "end": "666279"
  },
  {
    "text": "public permissions to select from this table um so in this case it wasn't even you",
    "start": "666279",
    "end": "673800"
  },
  {
    "text": "didn't even need to find a store of procedure it was really just permissions have to be REM revoked from that table",
    "start": "673800",
    "end": "678839"
  },
  {
    "text": "and this is uh let me go ahead out here and show you once",
    "start": "678839",
    "end": "684279"
  },
  {
    "text": "again I have to find that",
    "start": "687279",
    "end": "691240"
  },
  {
    "text": "I already did this",
    "start": "697880",
    "end": "700600"
  },
  {
    "text": "one and once again that's that's the actual password that I entered when I created that DTS package and I'm the",
    "start": "706560",
    "end": "712720"
  },
  {
    "text": "guest user right now",
    "start": "712720",
    "end": "716560"
  },
  {
    "text": "uh so the recommended uh solution for this is to to revoke that permission from that table uh it's also recommended",
    "start": "721399",
    "end": "728160"
  },
  {
    "text": "you don't even store it in here actually um Microsoft has as in Service Pack 3",
    "start": "728160",
    "end": "733720"
  },
  {
    "text": "has actually removed this functionality where you have to go dig pretty deep into some properties and turn this on if",
    "start": "733720",
    "end": "740399"
  },
  {
    "text": "you really wanted to use it so it's best just not even to use uh this setting and to save it somewhere else uh encrypted",
    "start": "740399",
    "end": "747279"
  },
  {
    "text": "with the password uh replication is another source uh",
    "start": "747279",
    "end": "754199"
  },
  {
    "text": "where you need to enter a password so that if I'm replicated with a remote server I need authentication credentials",
    "start": "754199",
    "end": "760720"
  },
  {
    "text": "to connect to that remote server so where's it going to store those um here's one instance of if you log into",
    "start": "760720",
    "end": "766720"
  },
  {
    "text": "Enterprise Manager using SQL authentication um you create a subscription a subscription is basically",
    "start": "766720",
    "end": "773959"
  },
  {
    "text": "saying uh I want to replicate pull data to me there's a publisher that publishes the data and there's a subscriber who",
    "start": "773959",
    "end": "781160"
  },
  {
    "text": "who gets the data if you create a subscription and then you use Windows synchronization manager to synchronize",
    "start": "781160",
    "end": "787160"
  },
  {
    "text": "that what it will do is take the pa the username and the password that you're currently logged on with and will save",
    "start": "787160",
    "end": "793560"
  },
  {
    "text": "that in the registry um it will save it in the registry encoded uh so that later on",
    "start": "793560",
    "end": "800800"
  },
  {
    "text": "when it needs to synchronize it could just pull that value out and use that to log on to the remote server uh and this",
    "start": "800800",
    "end": "806440"
  },
  {
    "text": "uh this registry key is actually created with read permissions uh everyone what's",
    "start": "806440",
    "end": "812720"
  },
  {
    "text": "that and user can read exactly yes the user can read this is actually the register key it's stored under it's",
    "start": "812720",
    "end": "818959"
  },
  {
    "text": "stored under hkey local machine and actually the name of the key that it's stored under is dynamic it really",
    "start": "818959",
    "end": "825120"
  },
  {
    "text": "depends on what your Publisher's name is so the public depending on what the SC subscription name is and the publication",
    "start": "825120",
    "end": "832120"
  },
  {
    "text": "name is is how it will create it and we'll show you an example uh and it's actually stored under the value",
    "start": "832120",
    "end": "837440"
  },
  {
    "text": "subscriber encrypted password binary uh here's actually the SQL",
    "start": "837440",
    "end": "843920"
  },
  {
    "text": "command uh in the master database there's an extended store procedure called xpor reg re that can be used to",
    "start": "843920",
    "end": "851759"
  },
  {
    "text": "read values from the registry um and have have the have theault permission to",
    "start": "851759",
    "end": "859079"
  },
  {
    "text": "every user right right execute permission is granted to public on this uh on this function by",
    "start": "859079",
    "end": "865560"
  },
  {
    "text": "default um so we'll go out there we'll go out to SQL Server again and I'll have",
    "start": "865560",
    "end": "871399"
  },
  {
    "text": "to search around and find the right script",
    "start": "871399",
    "end": "875079"
  },
  {
    "text": "again here it is these are big enough for everyone to see I'll take that as a",
    "start": "876680",
    "end": "884600"
  },
  {
    "text": "yes I don't I don't see what's that the",
    "start": "884600",
    "end": "890759"
  },
  {
    "text": "color um I don't know how to change that in properties properties is it that big a",
    "start": "891839",
    "end": "898680"
  },
  {
    "text": "deal or okay sorry I'll I'll next time I'll make sure that doesn't",
    "start": "898680",
    "end": "905000"
  },
  {
    "text": "happen um I'm not sure uh so we're we're the guest user",
    "start": "914040",
    "end": "919959"
  },
  {
    "text": "now so then we go in and we try selecting uh and I know ahead of time that the password is decrypted with that",
    "start": "919959",
    "end": "927160"
  },
  {
    "text": "extended to procedure so oh it's not necessary to know the the encoding",
    "start": "927160",
    "end": "932839"
  },
  {
    "text": "algorithm so you have to only use that extended to procedure right so this is a",
    "start": "932839",
    "end": "938720"
  },
  {
    "text": "little tricky this this script doesn't work straight out of the boxes what you do is you execute this and it pulls the",
    "start": "938720",
    "end": "943759"
  },
  {
    "text": "value back this master XP reppel help connect uh that you do need",
    "start": "943759",
    "end": "949079"
  },
  {
    "text": "administrative privileges to run but what you do is take the value you got back from reg Reed take it to your own",
    "start": "949079",
    "end": "955600"
  },
  {
    "text": "local msde version and run it there so you kind of have to do this in two steps",
    "start": "955600",
    "end": "960959"
  },
  {
    "text": "really uh but this so you don't have to figure out the encrypt the uh encoding algorithm yourself it's really here in",
    "start": "960959",
    "end": "967480"
  },
  {
    "text": "the XP reppel help",
    "start": "967480",
    "end": "970639"
  },
  {
    "text": "connect uh so what do we do for this once again apply Service Pack 3 um which",
    "start": "975040",
    "end": "981440"
  },
  {
    "text": "I think actually a lot of people have done over the last uh couple weeks when we actually pre prepared the",
    "start": "981440",
    "end": "987120"
  },
  {
    "text": "presentation I had a feeling that most people would not have applied it but um that's changed a lot um and now in um in",
    "start": "987120",
    "end": "997079"
  },
  {
    "text": "Service Pack 3 it does not save it in the registry anymore so every time you want to synchronize it's going to PO uh",
    "start": "997079",
    "end": "1003639"
  },
  {
    "text": "ask you for the password the username and password to use um as well it's",
    "start": "1003639",
    "end": "1008839"
  },
  {
    "text": "recommended that you revoke execute permissions from XP reg read I think this is probably the biggest hole in SQL",
    "start": "1008839",
    "end": "1014279"
  },
  {
    "text": "Server right now is that public permissions on XP regre exist in there and I could on a default installation I",
    "start": "1014279",
    "end": "1020360"
  },
  {
    "text": "could pull out the passwords out of the um LSA Secrets area out of the Sam",
    "start": "1020360",
    "end": "1025400"
  },
  {
    "text": "database all that because it's running under a local system um and as well",
    "start": "1025400",
    "end": "1030918"
  },
  {
    "text": "there's how you do it from SQL query analyzer uh SQL agent that's kind of the uh scheduling engine for SQL Server it",
    "start": "1030919",
    "end": "1039360"
  },
  {
    "text": "runs as a separate process um and it does maintenance such as I I want to do a backup every",
    "start": "1039360",
    "end": "1045678"
  },
  {
    "text": "midnight or I want to dump the database every uh 4 hours the transaction log something like that so you need to",
    "start": "1045679",
    "end": "1051960"
  },
  {
    "text": "configure it to use a password to log into the um into the database so",
    "start": "1051960",
    "end": "1057080"
  },
  {
    "text": "obviously you got to enter that and then it's got to be stored someplace so um when you do set it up to use SQL Server",
    "start": "1057080",
    "end": "1063720"
  },
  {
    "text": "authentication it does require a CIS admin login and password although I've heard rumors that that's not true in",
    "start": "1063720",
    "end": "1069880"
  },
  {
    "text": "Service Pack 3 but I'm not 100% sure about that uh but it's usually a CIS",
    "start": "1069880",
    "end": "1075080"
  },
  {
    "text": "admin you use to to uh you have to enter to to to connect to the SQL Server uh",
    "start": "1075080",
    "end": "1080760"
  },
  {
    "text": "the password is saved and coded in the LSA Secrets area and the SQL agent uh is",
    "start": "1080760",
    "end": "1086440"
  },
  {
    "text": "typically run under a Windows NT administrative account because it has to access that LSA region and that can only",
    "start": "1086440",
    "end": "1092400"
  },
  {
    "text": "be done by a Windows administrator um so now uh permissions on the LSA",
    "start": "1092400",
    "end": "1100240"
  },
  {
    "text": "secret is locked down very well um now if you uh so if you're logged on to SQL",
    "start": "1100240",
    "end": "1107200"
  },
  {
    "text": "Server it's going to be hard to get there except that there is an a stored procedure which calls an extended store",
    "start": "1107200",
    "end": "1112760"
  },
  {
    "text": "procedure which will ret retrieve this for you and this uh this procedure is actually executed to to public uh by",
    "start": "1112760",
    "end": "1120720"
  },
  {
    "text": "default uh I have the example to show okay",
    "start": "1120720",
    "end": "1127640"
  },
  {
    "text": "yes um actually it is it's uh there's there's keys out there on the SQL",
    "start": "1143919",
    "end": "1149559"
  },
  {
    "text": "security.com website or there's there's sample scripts it there's I haven't seen one that's fully uh like a like a PW",
    "start": "1149559",
    "end": "1156440"
  },
  {
    "text": "dump a PW there's nothing like that what it is is I've seen scripts of how to pull one key out so you'd have to be",
    "start": "1156440",
    "end": "1162559"
  },
  {
    "text": "smart enough to paste all those together and figure it out so the capability is there but I haven't seen a tool that",
    "start": "1162559",
    "end": "1168760"
  },
  {
    "text": "does it uh which one am I looking for SQL SQ",
    "start": "1168760",
    "end": "1176559"
  },
  {
    "text": "p no I'm sorry bear with me just one the",
    "start": "1176559",
    "end": "1183520"
  },
  {
    "text": "password is save en code but you don't know to it's not necessary that you you know",
    "start": "1183520",
    "end": "1191280"
  },
  {
    "text": "the the algorithm because there is a function in a dll that you can code",
    "start": "1191280",
    "end": "1198400"
  },
  {
    "text": "that small C program and get and decode the password right so there's there's your password but notice that it doesn't",
    "start": "1198400",
    "end": "1205240"
  },
  {
    "text": "look like anything that any of us would understand but what you could do is take that function pass it to something",
    "start": "1205240",
    "end": "1210440"
  },
  {
    "text": "there's a a guy in Russia uh Martin J yeah gimmers I guess this is his handle",
    "start": "1210440",
    "end": "1217280"
  },
  {
    "text": "um he actually uh figured out that in the SEC sem com and. dll there's a",
    "start": "1217280",
    "end": "1224320"
  },
  {
    "text": "decrypt function you pass this uh this string into there and it will decrypt it for you that's basically the same thing",
    "start": "1224320",
    "end": "1230480"
  },
  {
    "text": "that SQL Server is using to decrypt it so that's how you would there you have the URL to download the the program yeah",
    "start": "1230480",
    "end": "1237919"
  },
  {
    "text": "that that's a c program to uh decrypt it he he he he helped me to to the code",
    "start": "1237919",
    "end": "1245559"
  },
  {
    "text": "the the password",
    "start": "1245559",
    "end": "1251760"
  },
  {
    "text": "um so the fixes for this once again are and and really the fixes for all this is to use Windows authentication um",
    "start": "1251760",
    "end": "1259280"
  },
  {
    "text": "sometimes it's not always possible because if you have a firewall you're going to be blocking Port 138 139 and",
    "start": "1259280",
    "end": "1266039"
  },
  {
    "text": "you're not going to be able to but if you can it's really strongly recommended you use Windows NT authentication revoke",
    "start": "1266039",
    "end": "1271720"
  },
  {
    "text": "execute from that SP get SQL asent properties um that's that's the the line",
    "start": "1271720",
    "end": "1278200"
  },
  {
    "text": "to to remove it and apply Service Pack 3 uh and Service Pack three this Pro",
    "start": "1278200",
    "end": "1284080"
  },
  {
    "text": "stored procedure won't return that field with a password for you unless you're sis admin",
    "start": "1284080",
    "end": "1290120"
  },
  {
    "text": "okay okay let's see now some some other ways to elevate",
    "start": "1290120",
    "end": "1297360"
  },
  {
    "text": "privileges okay Global temporized St procedure they can be created by any",
    "start": "1301720",
    "end": "1308240"
  },
  {
    "text": "user also they can be executed by any user can be alter dropped ITC by any",
    "start": "1308240",
    "end": "1317279"
  },
  {
    "text": "user without rest this mean that if any user a usern name is show create a",
    "start": "1317279",
    "end": "1325039"
  },
  {
    "text": "global temporary proc procure then any other user can can do whatever he want on that",
    "start": "1325039",
    "end": "1333840"
  },
  {
    "text": "global global to procedure and the user who create the this the global procedure",
    "start": "1333840",
    "end": "1340360"
  },
  {
    "text": "can set permission on it so thinking with a huging mind then",
    "start": "1340360",
    "end": "1346799"
  },
  {
    "text": "this is a good opportunity to opportunity to insert Tran",
    "start": "1346799",
    "end": "1352919"
  },
  {
    "text": "code okay how how the Tran code could be insert so first you have to do is to",
    "start": "1352919",
    "end": "1360559"
  },
  {
    "text": "search on this object system table on tempdb database you have to look for the",
    "start": "1360559",
    "end": "1368400"
  },
  {
    "text": "names of object that start with double double sign number no pound sign pound",
    "start": "1368400",
    "end": "1376200"
  },
  {
    "text": "sign double pound sign okay okay because the the global temporary procedure",
    "start": "1376200",
    "end": "1382520"
  },
  {
    "text": "always start with with a double number sign okay after you find one only you",
    "start": "1382520",
    "end": "1389400"
  },
  {
    "text": "have to do is just alter the alter the store procedure and insert the code that",
    "start": "1389400",
    "end": "1396159"
  },
  {
    "text": "that you want then you only have to wait for a user probably the user who create",
    "start": "1396159",
    "end": "1403480"
  },
  {
    "text": "it will execute it so if he if he the user has higher privilege then the",
    "start": "1403480",
    "end": "1410200"
  },
  {
    "text": "attacker will be able to to elate privileges okay this is not considered a",
    "start": "1410200",
    "end": "1419480"
  },
  {
    "text": "vulnerability by Microsoft because they work as designed and as documented but",
    "start": "1419480",
    "end": "1426840"
  },
  {
    "text": "in documentation is not explicit explicitly told that the danger of using",
    "start": "1426840",
    "end": "1434520"
  },
  {
    "text": "Global CH procedure and also also isn't",
    "start": "1434520",
    "end": "1440880"
  },
  {
    "text": "isn't especially told that any user can alter alter",
    "start": "1440880",
    "end": "1446080"
  },
  {
    "text": "them so in my personal opinion this is a a bad design a bad design okay I know",
    "start": "1446080",
    "end": "1455039"
  },
  {
    "text": "that these kind of object are not very commonly used but the r the risk exist",
    "start": "1455039",
    "end": "1461960"
  },
  {
    "text": "so you have to avoid using them",
    "start": "1461960",
    "end": "1467640"
  },
  {
    "text": "okay now let's see some background on how SQL Server check permission on ofhe",
    "start": "1468720",
    "end": "1475919"
  },
  {
    "text": "heads okay SQL",
    "start": "1475919",
    "end": "1481880"
  },
  {
    "text": "Server H if the same user owns a view store",
    "start": "1481880",
    "end": "1487559"
  },
  {
    "text": "procedure store procedure user defined function or a trigger and the all the",
    "start": "1487559",
    "end": "1495520"
  },
  {
    "text": "off off offet references reference it inside the the the store procedure or",
    "start": "1495520",
    "end": "1503320"
  },
  {
    "text": "the view Etc then as Qs server only check check checks permission on the on",
    "start": "1503320",
    "end": "1511200"
  },
  {
    "text": "the main object not on the underlying object this is called uh this is called",
    "start": "1511200",
    "end": "1517880"
  },
  {
    "text": "ownership chaining this mean that for example if a user show create a",
    "start": "1517880",
    "end": "1524559"
  },
  {
    "text": "procedure then if all the references referenced of object are also owned by",
    "start": "1524559",
    "end": "1532880"
  },
  {
    "text": "the user show and then another user Mary can exe execute that store procedure",
    "start": "1532880",
    "end": "1540399"
  },
  {
    "text": "then Mary will have access to the underlying object no matter if Mary have",
    "start": "1540399",
    "end": "1545840"
  },
  {
    "text": "permission or not on on them this you can see this all the time",
    "start": "1545840",
    "end": "1552600"
  },
  {
    "text": "when you are using system store procedure for example when you are using SP password you can change and your",
    "start": "1552600",
    "end": "1560520"
  },
  {
    "text": "password so you are updating 6X login system table but you can update CX login",
    "start": "1560520",
    "end": "1568600"
  },
  {
    "text": "system table directly but you can do it using SP password St procedure that's is",
    "start": "1568600",
    "end": "1574000"
  },
  {
    "text": "that is a valid example",
    "start": "1574000",
    "end": "1579080"
  },
  {
    "text": "okay okay if SI login is the databas database owner of any database then the",
    "start": "1579480",
    "end": "1587720"
  },
  {
    "text": "SA is mapped to the DB user also all user that are members of",
    "start": "1587720",
    "end": "1596320"
  },
  {
    "text": "DB owner role can create objects and designate them as owned by dbo this mean",
    "start": "1596320",
    "end": "1603120"
  },
  {
    "text": "that all the user member or DB owner role can when creating object can use",
    "start": "1603120",
    "end": "1608679"
  },
  {
    "text": "the dbo prefix okay but what what happen if a",
    "start": "1608679",
    "end": "1615799"
  },
  {
    "text": "view or St procedure could be another of like I said before like triggers user",
    "start": "1615799",
    "end": "1621039"
  },
  {
    "text": "defined function references object in a different Database The View procedure is",
    "start": "1621039",
    "end": "1627679"
  },
  {
    "text": "owned by dbo",
    "start": "1627679",
    "end": "1633159"
  },
  {
    "text": "sorry and the object is owned by a different Dev in a different database",
    "start": "1633480",
    "end": "1638799"
  },
  {
    "text": "let's see an example",
    "start": "1638799",
    "end": "1643000"
  },
  {
    "text": "okay in this example first we will add a we are logged as a s admin user so we",
    "start": "1648600",
    "end": "1655440"
  },
  {
    "text": "will add a test user then we we use the northwin database then we we will grant",
    "start": "1655440",
    "end": "1662519"
  },
  {
    "text": "the user we will gr the user access to the database and then we we will add the",
    "start": "1662519",
    "end": "1669000"
  },
  {
    "text": "user to the DB owner Ro and then we will set the connection to that",
    "start": "1669000",
    "end": "1676039"
  },
  {
    "text": "user okay here we will create being the user test we",
    "start": "1676039",
    "end": "1683480"
  },
  {
    "text": "will create a St procedure name it test and that St procedure will select all",
    "start": "1683480",
    "end": "1689919"
  },
  {
    "text": "the rows from the 6X login system table this should shouldn't",
    "start": "1689919",
    "end": "1695720"
  },
  {
    "text": "work but let's",
    "start": "1695720",
    "end": "1699760"
  },
  {
    "text": "try so we have we are only a DB owner if we already accessed c x",
    "start": "1703640",
    "end": "1711320"
  },
  {
    "text": "login system table is clear the",
    "start": "1711320",
    "end": "1717840"
  },
  {
    "text": "example okay why the previous examples work",
    "start": "1729760",
    "end": "1736640"
  },
  {
    "text": "because SQL Server perform as Access Control in the next way first it checks",
    "start": "1736640",
    "end": "1742799"
  },
  {
    "text": "permissions on the store procedure then SQ server gets the Sid of",
    "start": "1742799",
    "end": "1749519"
  },
  {
    "text": "the user in the current database that owns the store procedure in the example we see the user is the dbo user and the",
    "start": "1749519",
    "end": "1758440"
  },
  {
    "text": "Sid will be one that is the s s Sid okay and then SQ server compares the",
    "start": "1758440",
    "end": "1768640"
  },
  {
    "text": "Sid that already have with the SIDS of the owners of the object referenced in",
    "start": "1768640",
    "end": "1775360"
  },
  {
    "text": "the store procedure and because the Sid of the owner of the St procure matches",
    "start": "1775360",
    "end": "1783159"
  },
  {
    "text": "the Sid of the owner of the object referen it in the store procedure the",
    "start": "1783159",
    "end": "1788399"
  },
  {
    "text": "example that we prly see works",
    "start": "1788399",
    "end": "1793480"
  },
  {
    "text": "fine okay the access control are not not well designed to handle when a user is member",
    "start": "1793519",
    "end": "1801720"
  },
  {
    "text": "of DB a role but it's not the dbo user also the user also is not member of C",
    "start": "1801720",
    "end": "1807880"
  },
  {
    "text": "admin Road and the user create a start procedure using the DB",
    "start": "1807880",
    "end": "1813120"
  },
  {
    "text": "prefix but the user doesn't have permission on the object referen it in",
    "start": "1813120",
    "end": "1819200"
  },
  {
    "text": "the start position like I said before this also apply to view triggers and user defined fure this mean that any DB",
    "start": "1819200",
    "end": "1825880"
  },
  {
    "text": "owner can impersonate sa when sa is is m is mapped to the dbo",
    "start": "1825880",
    "end": "1832240"
  },
  {
    "text": "user this also work when using window authentication because if you're using",
    "start": "1832240",
    "end": "1837640"
  },
  {
    "text": "window authentication sa login could be a database owner so you will also be",
    "start": "1837640",
    "end": "1844880"
  },
  {
    "text": "vulnerable if you are using window authentication okay let's see now an",
    "start": "1844880",
    "end": "1851279"
  },
  {
    "text": "exploit for this this plit we be will be elevating privilege and we be start",
    "start": "1851279",
    "end": "1858519"
  },
  {
    "text": "being a DB a DB owner user and we'll",
    "start": "1858519",
    "end": "1865480"
  },
  {
    "text": "be will be we'll be finishing being a cmin",
    "start": "1865480",
    "end": "1872120"
  },
  {
    "text": "user okay this start as the same as before",
    "start": "1875240",
    "end": "1881960"
  },
  {
    "text": "here we with this uh vulnerability",
    "start": "1881960",
    "end": "1888440"
  },
  {
    "text": "we we can use that vulnerability to add",
    "start": "1888440",
    "end": "1894000"
  },
  {
    "text": "a DB owner use directly using SI procedure add the user to a c",
    "start": "1894000",
    "end": "1900840"
  },
  {
    "text": "admin role because in the Sy procedure is checked for ownership for RO",
    "start": "1900840",
    "end": "1907000"
  },
  {
    "text": "ownership so we can bypass that that that checks so we have to we what we can",
    "start": "1907000",
    "end": "1913399"
  },
  {
    "text": "use is exploit the SQL injection vulnerability in spms drop retry that",
    "start": "1913399",
    "end": "1920440"
  },
  {
    "text": "was that was the discovered by Chris anle some time",
    "start": "1920440",
    "end": "1926720"
  },
  {
    "text": "before okay so we need to have right right permission on CX login system",
    "start": "1926720",
    "end": "1934039"
  },
  {
    "text": "table so because we need to upate update a a",
    "start": "1934039",
    "end": "1939960"
  },
  {
    "text": "field so we can be C admin so the fifth we do is to create a view so we will",
    "start": "1939960",
    "end": "1948039"
  },
  {
    "text": "have right permission on on C because look",
    "start": "1948039",
    "end": "1953320"
  },
  {
    "text": "because uh because we will have right permission on The View so the because the ownership chaining we will have",
    "start": "1953320",
    "end": "1959480"
  },
  {
    "text": "right permission on six x logins but we we won't be able to write directory so",
    "start": "1959480",
    "end": "1964720"
  },
  {
    "text": "we will use SP drop retry to write to CX login",
    "start": "1964720",
    "end": "1972840"
  },
  {
    "text": "table but first it could happen that the sa login",
    "start": "1973200",
    "end": "1981399"
  },
  {
    "text": "is not m to the dbo user but that doesn't matter because we can",
    "start": "1981399",
    "end": "1987000"
  },
  {
    "text": "exct this and we we except this instuction so we",
    "start": "1987000",
    "end": "1995679"
  },
  {
    "text": "update the the Sid field with uh value of one that means",
    "start": "1995679",
    "end": "2004039"
  },
  {
    "text": "that the that user will be the sa login",
    "start": "2004039",
    "end": "2009240"
  },
  {
    "text": "so no matter if sa login is mapped to the dvo user we can add",
    "start": "2009240",
    "end": "2016080"
  },
  {
    "text": "it okay after that we only have to update the previous previously created",
    "start": "2016080",
    "end": "2024760"
  },
  {
    "text": "view with a value with a value of 19 18",
    "start": "2024760",
    "end": "2030399"
  },
  {
    "text": "18 on the X status field that value means that we are CAD",
    "start": "2030399",
    "end": "2036279"
  },
  {
    "text": "means so let's try the example and at the end we",
    "start": "2036279",
    "end": "2042600"
  },
  {
    "text": "will be erasing we will be dropping the view and",
    "start": "2042600",
    "end": "2049638"
  },
  {
    "text": "return the return all back to before the hug",
    "start": "2049639",
    "end": "2055760"
  },
  {
    "text": "okay",
    "start": "2055760",
    "end": "2058760"
  },
  {
    "text": "oh sorry I",
    "start": "2080280",
    "end": "2085480"
  },
  {
    "text": "forgot to",
    "start": "2085480",
    "end": "2088760"
  },
  {
    "text": "mark okay there is the user test is now",
    "start": "2092560",
    "end": "2098240"
  },
  {
    "text": "member of you can see there Ro membership is checked so if the",
    "start": "2098240",
    "end": "2107480"
  },
  {
    "text": "user is member of C admin then that that rows are",
    "start": "2107480",
    "end": "2113720"
  },
  {
    "text": "displayed the same",
    "start": "2113720",
    "end": "2119320"
  },
  {
    "text": "exploit could be done by",
    "start": "2121119",
    "end": "2125838"
  },
  {
    "text": "sorry the same floit could be done by by user member of DB security a me role DB",
    "start": "2131280",
    "end": "2138720"
  },
  {
    "text": "data writer Ro role DB DD me role so",
    "start": "2138720",
    "end": "2144400"
  },
  {
    "text": "because DB DB security admin Ro can WR can grant right permissions on any table",
    "start": "2144400",
    "end": "2150160"
  },
  {
    "text": "so I use remember of DB security admin role can grant itself WR permission on",
    "start": "2150160",
    "end": "2156400"
  },
  {
    "text": "the tablet of his choice and a user member of DB data writer role",
    "start": "2156400",
    "end": "2162359"
  },
  {
    "text": "has right permission to all tables and a user member of DB ddl admin role can",
    "start": "2162359",
    "end": "2170359"
  },
  {
    "text": "alter object that doesn't own but to successfully exploit this that",
    "start": "2170359",
    "end": "2177680"
  },
  {
    "text": "the user member of that Ro f m become theb owner after become theb owner then",
    "start": "2177680",
    "end": "2184560"
  },
  {
    "text": "they can become C admin",
    "start": "2184560",
    "end": "2188680"
  },
  {
    "text": "okay here is the example in",
    "start": "2194240",
    "end": "2200359"
  },
  {
    "text": "this in this",
    "start": "2200599",
    "end": "2204160"
  },
  {
    "text": "example we add a user then we add a user to the DB security tering Ro the loo",
    "start": "2206000",
    "end": "2212920"
  },
  {
    "text": "sorry then we add the we set the user to the new created user and then we update",
    "start": "2212920",
    "end": "2222599"
  },
  {
    "text": "the sorry first we must Grant uh our Ser",
    "start": "2237000",
    "end": "2243520"
  },
  {
    "text": "write permissions update permission on C user table on user table",
    "start": "2243520",
    "end": "2250960"
  },
  {
    "text": "so we will be able to update the roles filled on C user table with a",
    "start": "2250960",
    "end": "2258520"
  },
  {
    "text": "value a value of one that mean that we'll be elevating",
    "start": "2258520",
    "end": "2264480"
  },
  {
    "text": "privileges to theb owner",
    "start": "2264480",
    "end": "2269079"
  },
  {
    "text": "role we can see that the user is now the owner",
    "start": "2271680",
    "end": "2277599"
  },
  {
    "text": "here you can see we check for ownership for RO for Road member if he road is if",
    "start": "2277599",
    "end": "2286359"
  },
  {
    "text": "member of the RO DB owner so like it is member then we can",
    "start": "2286359",
    "end": "2292839"
  },
  {
    "text": "see it here so that was when the user is member",
    "start": "2292839",
    "end": "2300319"
  },
  {
    "text": "of DB security admin Ro so one time the user becomes TV owner",
    "start": "2300319",
    "end": "2306640"
  },
  {
    "text": "then the user can use the the previous exploit to become C",
    "start": "2306640",
    "end": "2312760"
  },
  {
    "text": "me okay now it's almost the same if the user is member of DB data writer Ro is",
    "start": "2313200",
    "end": "2320319"
  },
  {
    "text": "just come write directly to S user system table of course always using spms",
    "start": "2320319",
    "end": "2328480"
  },
  {
    "text": "drop Rory drop",
    "start": "2328480",
    "end": "2333000"
  },
  {
    "text": "Rory let's execute this",
    "start": "2334480",
    "end": "2339440"
  },
  {
    "text": "now again you can see that the user the user has elevated privileges",
    "start": "2361000",
    "end": "2368240"
  },
  {
    "text": "okay and last when the user is member of dbdd ddl admin the user must the user",
    "start": "2368240",
    "end": "2376839"
  },
  {
    "text": "must find a a view in which the user has",
    "start": "2376839",
    "end": "2382680"
  },
  {
    "text": "update permissions because the user is member of DB ddl",
    "start": "2382680",
    "end": "2389480"
  },
  {
    "text": "admin role it can alter it no matter if the user doesn't own the The View so",
    "start": "2389480",
    "end": "2397640"
  },
  {
    "text": "what does here is it Alters it alter a",
    "start": "2397640",
    "end": "2403040"
  },
  {
    "text": "view that is by default in North wi",
    "start": "2403040",
    "end": "2408400"
  },
  {
    "text": "database and insert a a query that select all the",
    "start": "2408400",
    "end": "2417000"
  },
  {
    "text": "rows from s user system Table after that",
    "start": "2417000",
    "end": "2422760"
  },
  {
    "text": "it only have to update that view with to be become DB",
    "start": "2422760",
    "end": "2429920"
  },
  {
    "text": "owner here you can see that the user has successfully become D",
    "start": "2436880",
    "end": "2443079"
  },
  {
    "text": "owner",
    "start": "2443079",
    "end": "2446079"
  },
  {
    "text": "okay okay the fix for this in after you apply service three is there is a new",
    "start": "2452560",
    "end": "2459280"
  },
  {
    "text": "server option that is called all allow cross database ownership chaining this",
    "start": "2459280",
    "end": "2465480"
  },
  {
    "text": "option is disabled by default when you are installing installing Service Pack 3",
    "start": "2465480",
    "end": "2472680"
  },
  {
    "text": "but during installation you can enable it there is a message that say that it",
    "start": "2472680",
    "end": "2479599"
  },
  {
    "text": "is not recommended to enable it but but never say because the reason because it",
    "start": "2479599",
    "end": "2486000"
  },
  {
    "text": "is not recommended okay also the option can be enabled or",
    "start": "2486000",
    "end": "2492400"
  },
  {
    "text": "disabled later using the SP config configure system sub procure you that",
    "start": "2492400",
    "end": "2499800"
  },
  {
    "text": "that com command is to enable the option if you pass a zero instead of one you",
    "start": "2499800",
    "end": "2507119"
  },
  {
    "text": "disable the option also the option can be set PA",
    "start": "2507119",
    "end": "2513599"
  },
  {
    "text": "database using the spdb option sub procedure you specify the database then",
    "start": "2513599",
    "end": "2521319"
  },
  {
    "text": "the property and then the value to enable or disable okay also you if you haven't",
    "start": "2521319",
    "end": "2529800"
  },
  {
    "text": "applied applied Service Pack three yet you can revoke start revoking execute",
    "start": "2529800",
    "end": "2536359"
  },
  {
    "text": "permission on SPM Ms drop retry but if you already have applied",
    "start": "2536359",
    "end": "2543119"
  },
  {
    "text": "Service Pack 3 then spms drop Rory is not more is not",
    "start": "2543119",
    "end": "2548880"
  },
  {
    "text": "more vulnerable to SQL injector does that I just does that make",
    "start": "2548880",
    "end": "2554000"
  },
  {
    "text": "sense to everybody what exactly is going on what it's doing is and it's what it's a good case for is if in SQL injection",
    "start": "2554000",
    "end": "2561839"
  },
  {
    "text": "or in a SQL web application you may have set up a user and said well I don't want this user to be sa which is a good",
    "start": "2561839",
    "end": "2568440"
  },
  {
    "text": "practice so I create him as a database owner and what this is is a way for somebody using SQL injection to become",
    "start": "2568440",
    "end": "2575920"
  },
  {
    "text": "from DB owner an essay so I don't know any have some question",
    "start": "2575920",
    "end": "2582079"
  },
  {
    "text": "maybe I I wasn't very you kind of understand what what was going on there",
    "start": "2582079",
    "end": "2588079"
  },
  {
    "text": "okay thank you okay let's see now",
    "start": "2588079",
    "end": "2594160"
  },
  {
    "text": "okay uh he he's asking which uh how are the passwords encoded which passwords are you referring to",
    "start": "2597760",
    "end": "2606359"
  },
  {
    "text": "uh at the beginning uh there was a couple of them we can go back there are different algorithm you are referring to the",
    "start": "2608160",
    "end": "2615480"
  },
  {
    "text": "algorithm I I I didn't reserve the algor because there are many easy way to get the password so I don't want to lose",
    "start": "2615480",
    "end": "2622200"
  },
  {
    "text": "time on that sorry okay let's see now how we can get",
    "start": "2622200",
    "end": "2630079"
  },
  {
    "text": "for the system okay after an attacker because she ad me okay the the game is",
    "start": "2630079",
    "end": "2637160"
  },
  {
    "text": "over because the the attacker has has complet control over the",
    "start": "2637160",
    "end": "2643960"
  },
  {
    "text": "database but the the attacker still needs a way to go to gain control of the",
    "start": "2643960",
    "end": "2650680"
  },
  {
    "text": "operating system if there is some scenaries where",
    "start": "2650680",
    "end": "2657119"
  },
  {
    "text": "XP CM CMD shell and it's D has been removed that you you must find another",
    "start": "2657119",
    "end": "2665160"
  },
  {
    "text": "way to to execute command over operative system so you C what you can do isy some",
    "start": "2665160",
    "end": "2672079"
  },
  {
    "text": "buffer overflows that some store proc some extended store procedure are are are",
    "start": "2672079",
    "end": "2679440"
  },
  {
    "text": "vulnerable to buffer overflow because they don't properly validate the input data in this case the extend procedure",
    "start": "2679440",
    "end": "2687079"
  },
  {
    "text": "name XP make with task has two par parameters file and",
    "start": "2687079",
    "end": "2693200"
  },
  {
    "text": "tplg that are not correctly validated so if you but if you pass a long stream of",
    "start": "2693200",
    "end": "2701440"
  },
  {
    "text": "to any of these parameters then there is a uni code stack",
    "start": "2701440",
    "end": "2707040"
  },
  {
    "text": "Overflow and you can exploit that overflow to execute command operating",
    "start": "2707040",
    "end": "2713319"
  },
  {
    "text": "system okay let's see an example what is time we having time we",
    "start": "2713319",
    "end": "2721480"
  },
  {
    "text": "have plenty of time yeah",
    "start": "2721480",
    "end": "2725400"
  },
  {
    "text": "okay now we we're going to bypass a very long string in the five",
    "start": "2728280",
    "end": "2735200"
  },
  {
    "text": "parameter now you can see there is an accept violation if you if you run",
    "start": "2735400",
    "end": "2742240"
  },
  {
    "text": "visual C++ we will be able to",
    "start": "2742240",
    "end": "2747680"
  },
  {
    "text": "see how we can overwrite the save the return address",
    "start": "2748319",
    "end": "2756280"
  },
  {
    "text": "okay I know that uni code buffer overflow are",
    "start": "2768319",
    "end": "2775119"
  },
  {
    "text": "difficult to exploit but are not impossible",
    "start": "2775119",
    "end": "2780599"
  },
  {
    "text": "okay here you can see that we have control of the of",
    "start": "2797240",
    "end": "2804359"
  },
  {
    "text": "thetion of the problem because we we pass a large amount of X there is the",
    "start": "2804359",
    "end": "2813920"
  },
  {
    "text": "the x value of the X letter this",
    "start": "2813920",
    "end": "2819599"
  },
  {
    "text": "feature okay now let's see the the other overflow in the tplt",
    "start": "2829079",
    "end": "2838680"
  },
  {
    "text": "parameter and here again you can see the same",
    "start": "2840559",
    "end": "2847520"
  },
  {
    "text": "go ahead can you repeat uh I mean that uh what does that give you the capability to do this he I don't think",
    "start": "2859480",
    "end": "2865119"
  },
  {
    "text": "he's demonstrating the xplay he just showed that he over I'm showing I I'm showing that it's it is possible to",
    "start": "2865119",
    "end": "2872160"
  },
  {
    "text": "exploit that not showing an exploit just showing",
    "start": "2872160",
    "end": "2877440"
  },
  {
    "text": "that that 0058 0058 showed that he we've overwritten the stack pointer so you can",
    "start": "2877440",
    "end": "2883920"
  },
  {
    "text": "inject code in there um and and get open a command line and execute a command I",
    "start": "2883920",
    "end": "2891640"
  },
  {
    "text": "know that uni code buffer over very hard to exploit but if you saw other talk you",
    "start": "2891640",
    "end": "2899720"
  },
  {
    "text": "probably saw 10 technique to exploit them okay after you apply Service Pack",
    "start": "2899720",
    "end": "2906400"
  },
  {
    "text": "three the the Overflow is fixed okay but this doesn't represent a",
    "start": "2906400",
    "end": "2913160"
  },
  {
    "text": "a big risk because the XP make web task can can only be executed by member of",
    "start": "2913160",
    "end": "2920599"
  },
  {
    "text": "these admin roles but like I said before sometime you have to find another way to",
    "start": "2920599",
    "end": "2925640"
  },
  {
    "text": "execute command and I think this is a Val",
    "start": "2925640",
    "end": "2931160"
  },
  {
    "text": "example okay now let's see onlyb providers",
    "start": "2931160",
    "end": "2937760"
  },
  {
    "text": "If he if if he if we use the open row set and open data source functions we",
    "start": "2937760",
    "end": "2945480"
  },
  {
    "text": "can execute queries against olb providers so I decide to try to exploit",
    "start": "2945480",
    "end": "2952319"
  },
  {
    "text": "a an old hole and to use the shell the",
    "start": "2952319",
    "end": "2957400"
  },
  {
    "text": "shell access function so if we specify",
    "start": "2957400",
    "end": "2962720"
  },
  {
    "text": "the J orb provider",
    "start": "2962720",
    "end": "2968720"
  },
  {
    "text": "4.0 then let's see what",
    "start": "2969000",
    "end": "2974599"
  },
  {
    "text": "happen Okay well",
    "start": "2984880",
    "end": "2991599"
  },
  {
    "text": "this we can we have a last mini problem soore this no it's okay it's okay it's",
    "start": "2991599",
    "end": "2997720"
  },
  {
    "text": "okay okay uh this is not supposed to work there is a last minute problem",
    "start": "2997720",
    "end": "3003599"
  },
  {
    "text": "sorry uh the sh shet",
    "start": "3003599",
    "end": "3009599"
  },
  {
    "text": "4.0 Microsoft Access provider it's blocked there is a default option that",
    "start": "3009599",
    "end": "3017240"
  },
  {
    "text": "is a that is called the sandbox mode that is blocked by theault so you can",
    "start": "3017240",
    "end": "3024359"
  },
  {
    "text": "use the shell function outside Microsoft Access if you try to use",
    "start": "3024359",
    "end": "3030599"
  },
  {
    "text": "like like there it won't work because the shed the J sandbox block the use of",
    "start": "3030599",
    "end": "3039160"
  },
  {
    "text": "of the shell function oxide access so but then if we try",
    "start": "3039160",
    "end": "3045520"
  },
  {
    "text": "again using an older provider the 3o 51",
    "start": "3045520",
    "end": "3051000"
  },
  {
    "text": "provider then we are able to use the the shell function because the the sh shet",
    "start": "3051000",
    "end": "3059440"
  },
  {
    "text": "sandbox fails to block that provider so we have another way",
    "start": "3059440",
    "end": "3065920"
  },
  {
    "text": "to sorry for not being for not being able to show it but there was a problem",
    "start": "3065920",
    "end": "3071839"
  },
  {
    "text": "here but you can try it at your home or here it will work I'm sure it will",
    "start": "3071839",
    "end": "3079200"
  },
  {
    "text": "work okay well like I said before this is",
    "start": "3079200",
    "end": "3085240"
  },
  {
    "text": "when we use the another provider it not block it but the the sh",
    "start": "3085240",
    "end": "3093880"
  },
  {
    "text": "sandbox okay this this bag is not particular related to SQL Server",
    "start": "3093880",
    "end": "3101680"
  },
  {
    "text": "because the this bag is related to the sh sandbo which fails to block the shell",
    "start": "3101680",
    "end": "3108559"
  },
  {
    "text": "function when you said outside access outside Microsoft Access so uh this",
    "start": "3108559",
    "end": "3116680"
  },
  {
    "text": "moment uh there is no fix a available yet",
    "start": "3116680",
    "end": "3123280"
  },
  {
    "text": "okay sometimes is very useful useful to to know under which Windows account SQL",
    "start": "3123280",
    "end": "3132280"
  },
  {
    "text": "Server service run as so this helps an attacker to determine what privilege",
    "start": "3132280",
    "end": "3139880"
  },
  {
    "text": "will gain over the operating system when executed command when exploiting buffer",
    "start": "3139880",
    "end": "3144960"
  },
  {
    "text": "overflows so to do this we can",
    "start": "3144960",
    "end": "3150599"
  },
  {
    "text": "use the uh B in the open Rive function",
    "start": "3150599",
    "end": "3156359"
  },
  {
    "text": "that when the function is invoked with with no parameters",
    "start": "3156359",
    "end": "3164960"
  },
  {
    "text": "okay when the function is the function is invoked in this",
    "start": "3180880",
    "end": "3185920"
  },
  {
    "text": "way then you will be able to see under what account is running SQL server in",
    "start": "3185920",
    "end": "3191960"
  },
  {
    "text": "this case the system account this is this is not big deal but this is very",
    "start": "3191960",
    "end": "3198720"
  },
  {
    "text": "useful when you are exploiting SQ injection because you can do the same",
    "start": "3198720",
    "end": "3204079"
  },
  {
    "text": "using the XP R read extended St procedure but if",
    "start": "3204079",
    "end": "3209799"
  },
  {
    "text": "you're exploiting SQL injection it's very difficult to get the result back so",
    "start": "3209799",
    "end": "3215119"
  },
  {
    "text": "in that way it's very simple to get to know under under which account is running SQL",
    "start": "3215119",
    "end": "3221880"
  },
  {
    "text": "server and sometime if there are multiple instance you will you will need",
    "start": "3221880",
    "end": "3227799"
  },
  {
    "text": "to provide one instant name to know the account on what it is ruing",
    "start": "3227799",
    "end": "3237039"
  },
  {
    "text": "okay okay after you apply Service Pack three I think it's it is fixed the the",
    "start": "3244559",
    "end": "3251559"
  },
  {
    "text": "windows account is not more returning in the err message",
    "start": "3251559",
    "end": "3258280"
  },
  {
    "text": "okay another some question any questions on that or everybody fallen asleep yet",
    "start": "3258280",
    "end": "3266960"
  },
  {
    "text": "uh denial a service attacks this one is actually pretty quick but so if an if a hacker can't do anything else in your",
    "start": "3266960",
    "end": "3272920"
  },
  {
    "text": "database and he's just frustrated I guess he'll go ahead and just try to bring it down",
    "start": "3272920",
    "end": "3278599"
  },
  {
    "text": "um and really what this one is based on is temporary tables where there's a",
    "start": "3278599",
    "end": "3283839"
  },
  {
    "text": "there's a tempdb in Microsoft SQL server and there's a guest user in it so everybody really can get access to that",
    "start": "3283839",
    "end": "3290640"
  },
  {
    "text": "and can create tables create temporary tables and uh they can't you can't",
    "start": "3290640",
    "end": "3295799"
  },
  {
    "text": "remove that ability um so this query down here that we're showing will actually do an endless loop and we'll",
    "start": "3295799",
    "end": "3302640"
  },
  {
    "text": "create a table and we'll insert rows into that table and what will that that will do is just grow and grow and grow",
    "start": "3302640",
    "end": "3307760"
  },
  {
    "text": "until it consumes 20 Gigabytes on your um your hard drive and at that point um",
    "start": "3307760",
    "end": "3313880"
  },
  {
    "text": "the SQL Server will likely fail or something something really nasty will happen so well say the Bold of Windows 2",
    "start": "3313880",
    "end": "3323480"
  },
  {
    "text": "is in the same dis will be more problems oh yeah",
    "start": "3323480",
    "end": "3329039"
  },
  {
    "text": "okay so we'll just show um an example of",
    "start": "3329039",
    "end": "3335079"
  },
  {
    "text": "this so once again we'll just set guest so we're a non-privileged user and then",
    "start": "3342720",
    "end": "3349039"
  },
  {
    "text": "actually what we'll do is go out here and look at the dis size and we see there's um about",
    "start": "3349039",
    "end": "3357359"
  },
  {
    "text": "4.3 free space and then we will execute this command and let it run",
    "start": "3357359",
    "end": "3363520"
  },
  {
    "text": "for for a minute or two and it's it's just sitting there loading the table and loading the time to to to fill the hard",
    "start": "3363520",
    "end": "3371319"
  },
  {
    "text": "disk will depend on the processor power and the this",
    "start": "3371319",
    "end": "3377160"
  },
  {
    "text": "capacity so now we'll just look at the size again two four I don't know how much I",
    "start": "3377160",
    "end": "3382880"
  },
  {
    "text": "ate up there let me see if it's different no it depends on the proc the processor",
    "start": "3382880",
    "end": "3389920"
  },
  {
    "text": "power if you don't have much power it will be more slowly they",
    "start": "3389920",
    "end": "3396798"
  },
  {
    "text": "grow yeah see it's going down a little bit now because before is 432 so now",
    "start": "3398839",
    "end": "3404119"
  },
  {
    "text": "it's 431 so it's eating up space so I'm not going to you can't let it Ru so at",
    "start": "3404119",
    "end": "3410079"
  },
  {
    "text": "the end we can oh you want can see I'm just going to cancel it because I don't know how it's going to affect",
    "start": "3410079",
    "end": "3418240"
  },
  {
    "text": "I don't want my laptop crashing okay",
    "start": "3418559",
    "end": "3425680"
  },
  {
    "text": "um Sy I don't know but you should be able to restrict these things because",
    "start": "3437359",
    "end": "3444480"
  },
  {
    "text": "any user can do this any user can fill up your hard disk I",
    "start": "3444480",
    "end": "3450079"
  },
  {
    "text": "don't",
    "start": "3450079",
    "end": "3452240"
  },
  {
    "text": "know exactly yeah so if you're you don't have to be an administrator so so yes is is it can a can somebody that has no",
    "start": "3463839",
    "end": "3470200"
  },
  {
    "text": "access to your database bring it down this is not what we're saying but can a non-private user bring your database",
    "start": "3470200",
    "end": "3475280"
  },
  {
    "text": "down that that's that that I would consider that a vulnerability as well if your competitor can do a SQL injection",
    "start": "3475280",
    "end": "3481599"
  },
  {
    "text": "and decides well you know I really want to bring a sight down that that I think that's a great example of of how it",
    "start": "3481599",
    "end": "3487640"
  },
  {
    "text": "could be pretty dangerous too SQL injection the main problem is you you",
    "start": "3487640",
    "end": "3494720"
  },
  {
    "text": "don't have a way to restrict this so any user can do this and you you can do",
    "start": "3494720",
    "end": "3501680"
  },
  {
    "text": "anything to prevent this I'm not pushing back seriously the injection",
    "start": "3501680",
    "end": "3508119"
  },
  {
    "text": "but it doesn't need to use temp tables anybody could do this but you but you can restrict access to table using store",
    "start": "3513359",
    "end": "3520200"
  },
  {
    "text": "procedures you can restrict us store procedure and the user won't be able to",
    "start": "3520200",
    "end": "3525440"
  },
  {
    "text": "insert directly on table but here there",
    "start": "3525440",
    "end": "3530480"
  },
  {
    "text": "is okay um currently there really is no prote against this so you you have to",
    "start": "3531520",
    "end": "3537799"
  },
  {
    "text": "make sure you don't have SQL injection or you have to trust all your users um Microsoft apparently I is going",
    "start": "3537799",
    "end": "3545599"
  },
  {
    "text": "to add something in Yukon um to prevent this um the work around obviously is to put some kind of",
    "start": "3545599",
    "end": "3552400"
  },
  {
    "text": "agent to use your SQL agent to alert you when your tempdb starts growing to some ridiculous size um this is yeah I mean",
    "start": "3552400",
    "end": "3560280"
  },
  {
    "text": "you saw how fast it was going it wasn't too fast it might take a couple hours to fill up so um",
    "start": "3560280",
    "end": "3566599"
  },
  {
    "text": "that should give you enough time to react before it starts crashing",
    "start": "3566599",
    "end": "3571880"
  },
  {
    "text": "things uh I mean it should be uh how much utilization the question is how much utilization does that uh denial a",
    "start": "3574720",
    "end": "3581559"
  },
  {
    "text": "service do I haven't done any performance metrics on processor processor utilization yeah sometimes it",
    "start": "3581559",
    "end": "3587920"
  },
  {
    "text": "goes High very high",
    "start": "3587920",
    "end": "3592280"
  },
  {
    "text": "so now just we'll just uh do some resources uh conclusions and then show you",
    "start": "3603000",
    "end": "3608400"
  },
  {
    "text": "uh the the utility uh for recommendation we have the next",
    "start": "3608400",
    "end": "3615640"
  },
  {
    "text": "okay you must this is very know but you must keep your SQ server up to date with",
    "start": "3615640",
    "end": "3621319"
  },
  {
    "text": "hot fixes also it is very recommended that you use Windows credential for",
    "start": "3621319",
    "end": "3629319"
  },
  {
    "text": "authentication also never enable Closs database ownership because it's very",
    "start": "3629319",
    "end": "3634960"
  },
  {
    "text": "dangerous like we saw also you must run SQL Server service",
    "start": "3634960",
    "end": "3642359"
  },
  {
    "text": "under a non-privileged user and restrict the that user right on the operating",
    "start": "3642359",
    "end": "3648720"
  },
  {
    "text": "system then you you can set SQL Server asent alerts on critical issues so if so",
    "start": "3648720",
    "end": "3657000"
  },
  {
    "text": "Brom happens on your server you will get a response back from the",
    "start": "3657000",
    "end": "3663160"
  },
  {
    "text": "server uh you ought to as well other recommendations run your periodic checks",
    "start": "3664960",
    "end": "3670319"
  },
  {
    "text": "checks on system and object and non-system objects make sure permissions haven't been uh monkeyed with on those",
    "start": "3670319",
    "end": "3678079"
  },
  {
    "text": "um audit audit yourself as as often as possible because some of these can be",
    "start": "3678079",
    "end": "3683720"
  },
  {
    "text": "used as a back door to put something in in there and then come back later uh and as Caesar says pray a little bit he said",
    "start": "3683720",
    "end": "3694119"
  },
  {
    "text": "shoke uh resources to stay patched uh microsoft.com there's a security and a",
    "start": "3694119",
    "end": "3701000"
  },
  {
    "text": "SQL directory out there you ought to check those out every once in a while um",
    "start": "3701000",
    "end": "3706680"
  },
  {
    "text": "mssql security.net there's a mailing list out there that you can go join and it's targeted specifically just for SQL",
    "start": "3706680",
    "end": "3713720"
  },
  {
    "text": "server and it will alert you uh for the um there's a white paper out there uh",
    "start": "3713720",
    "end": "3719720"
  },
  {
    "text": "written by Caesar manipulating Microsoft SQL server using SQL injection and um",
    "start": "3719720",
    "end": "3725520"
  },
  {
    "text": "you can go down you can use that technique to exploit all this stuff and you will own a server on uh and as well",
    "start": "3725520",
    "end": "3733000"
  },
  {
    "text": "there's uh other security information out there on uh my own website appsec",
    "start": "3733000",
    "end": "3738920"
  },
  {
    "text": "in.com and Chip Andrews has a good uh website SQL security.com",
    "start": "3738920",
    "end": "3745760"
  },
  {
    "text": "okay as a summary we can say that there is a hug security Improvement in",
    "start": "3746640",
    "end": "3753520"
  },
  {
    "text": "Sp Service Pack 3 mostly As a result of independent security Reserve work but I",
    "start": "3753520",
    "end": "3761680"
  },
  {
    "text": "Microsoft do M Microsoft did a great effort too okay there is some H without",
    "start": "3761680",
    "end": "3770240"
  },
  {
    "text": "PHX yet like we saw and SQL Server 7",
    "start": "3770240",
    "end": "3775279"
  },
  {
    "text": "seems to be for Goot and that is not fixed yet for SQL Server 7 also for",
    "start": "3775279",
    "end": "3780880"
  },
  {
    "text": "Microsoft data so okay you must find you must buy",
    "start": "3780880",
    "end": "3789279"
  },
  {
    "text": "SQL Server 2000 okay if you last last if you use SQL Server",
    "start": "3789279",
    "end": "3797920"
  },
  {
    "text": "authentication sooner or later you will get hack so you must avoid use SQL",
    "start": "3797920",
    "end": "3803920"
  },
  {
    "text": "Server Authentication that's what Microsoft recommends that as well",
    "start": "3803920",
    "end": "3809160"
  },
  {
    "text": "so okay now let's see this tool is this is a new tool to",
    "start": "3809160",
    "end": "3816119"
  },
  {
    "text": "exploit SQ in shap J this tool use the techniques described in my paper called",
    "start": "3816119",
    "end": "3824000"
  },
  {
    "text": "manipulating Microsoft SQL server using SQL injection okay we we don't cover",
    "start": "3824000",
    "end": "3830119"
  },
  {
    "text": "that technique here because we don't have time but you can read the paper okay this tool allows to get the",
    "start": "3830119",
    "end": "3837799"
  },
  {
    "text": "query so back to your SQL Server so you only have to have a SQL Server box then",
    "start": "3837799",
    "end": "3845279"
  },
  {
    "text": "you have to find a web application vulnerable to SQL injection and then",
    "start": "3845279",
    "end": "3851799"
  },
  {
    "text": "using the tool you will you will be able to get the result back to your",
    "start": "3851799",
    "end": "3857319"
  },
  {
    "text": "server this works even if the quer results cannot be returned to the",
    "start": "3857319",
    "end": "3862839"
  },
  {
    "text": "browser there is some scenaries when you can't get the result back to the browser so this",
    "start": "3862839",
    "end": "3869400"
  },
  {
    "text": "will this tool will work okay also this will work only if open connection are",
    "start": "3869400",
    "end": "3877359"
  },
  {
    "text": "not blocked at 5 wordss but h% of site vulnerable to sq sh just",
    "start": "3877359",
    "end": "3884720"
  },
  {
    "text": "don't block outb so it will work most of the time that is another way to bypass",
    "start": "3884720",
    "end": "3890480"
  },
  {
    "text": "firew filter but I plan to add them for",
    "start": "3890480",
    "end": "3896680"
  },
  {
    "text": "okay also this tool allow you to set arbitrary oldbone connection ports so",
    "start": "3896680",
    "end": "3904119"
  },
  {
    "text": "you can bypass some filters so you can start trying some port to see what happened and then bypass the",
    "start": "3904119",
    "end": "3911440"
  },
  {
    "text": "filters okay now we will see a a demo and you can download the tool from the",
    "start": "3911440",
    "end": "3918880"
  },
  {
    "text": "last version of the tool from that side from Aron side also I think the tool is in the CD",
    "start": "3918880",
    "end": "3926559"
  },
  {
    "text": "black hat CD but I recommended you to in the next week to download again to get",
    "start": "3926559",
    "end": "3932359"
  },
  {
    "text": "the last version it's probably not up there yet it's probably probably check Monday it'll be up there so there is it",
    "start": "3932359",
    "end": "3939119"
  },
  {
    "text": "is it is still in beta so I have't much time to",
    "start": "3939119",
    "end": "3945559"
  },
  {
    "text": "okay first you have to set your SQL Server properties like the SQL server",
    "start": "3945559",
    "end": "3953720"
  },
  {
    "text": "name the login name to authenticate to your server the",
    "start": "3953720",
    "end": "3959440"
  },
  {
    "text": "password the port that will be us it and there is a the max amount of Rous",
    "start": "3959440",
    "end": "3969039"
  },
  {
    "text": "returned when we execute a query okay this is a little confusing I think",
    "start": "3969039",
    "end": "3976160"
  },
  {
    "text": "um Caesar Roose so it doesn't see uh it's it's very logical to him but um the",
    "start": "3976160",
    "end": "3982680"
  },
  {
    "text": "top the top SQL Server is actually your own SQL Server it's not the SQL Server",
    "start": "3982680",
    "end": "3987839"
  },
  {
    "text": "you're attacking you put a local SQL Server the web application is going to",
    "start": "3987839",
    "end": "3993319"
  },
  {
    "text": "log into the remote SQL server and pass the results back to that SQL your SQL",
    "start": "3993319",
    "end": "3998359"
  },
  {
    "text": "Server so that's what you're entering at the top yes you if you read the paper we",
    "start": "3998359",
    "end": "4004520"
  },
  {
    "text": "understand okay no but no not H I'm not I'm referring to",
    "start": "4004520",
    "end": "4012160"
  },
  {
    "text": "you okay first you must find uh website vulnerable to sq injection this is very",
    "start": "4012200",
    "end": "4022200"
  },
  {
    "text": "easy there are a lot of SES what we've just done is created a a",
    "start": "4025520",
    "end": "4033920"
  },
  {
    "text": "test uh ASP page we have an input box so we try single",
    "start": "4033920",
    "end": "4041319"
  },
  {
    "text": "code and submit the query and we see an error message but here the the",
    "start": "4041319",
    "end": "4049839"
  },
  {
    "text": "query is using a parentheses so we we have to add a parentheses to be able to",
    "start": "4049839",
    "end": "4055520"
  },
  {
    "text": "inser code so we add a parenthesis and comments and now we don't have the error",
    "start": "4055520",
    "end": "4063119"
  },
  {
    "text": "so we we are able to execute code so here in the application we already",
    "start": "4063119",
    "end": "4069079"
  },
  {
    "text": "have the me the method that the web application it is using to submit the",
    "start": "4069079",
    "end": "4075559"
  },
  {
    "text": "data is the post method the HTTP post method so here you enter the URL then",
    "start": "4075559",
    "end": "4084319"
  },
  {
    "text": "select the method the HTTP method and here you put you put the post data and",
    "start": "4084319",
    "end": "4092720"
  },
  {
    "text": "you must complete the post data with uh less",
    "start": "4092720",
    "end": "4098560"
  },
  {
    "text": "less than sign with three a and a greater than greater than sign in that",
    "start": "4098560",
    "end": "4106000"
  },
  {
    "text": "place will be",
    "start": "4106000",
    "end": "4109080"
  },
  {
    "text": "injected sorry in that place in that play will be injected the",
    "start": "4111239",
    "end": "4117440"
  },
  {
    "text": "code so you you don't have to do anything just find a page a web page",
    "start": "4117440",
    "end": "4123679"
  },
  {
    "text": "vulnerable and then complete that field",
    "start": "4123679",
    "end": "4129159"
  },
  {
    "text": "okay after that you only have to click go and it it will f",
    "start": "4129400",
    "end": "4137440"
  },
  {
    "text": "it will first it will get the linked servers okay that information that is it",
    "start": "4139080",
    "end": "4145838"
  },
  {
    "text": "is showed is from the SQL server on the vulnerable a website so we are able to",
    "start": "4145839",
    "end": "4154798"
  },
  {
    "text": "get the data back to our server and now we are seeing that data okay we can see",
    "start": "4154799",
    "end": "4160880"
  },
  {
    "text": "the link server in the SQL Server that we are ATT talk",
    "start": "4160880",
    "end": "4166600"
  },
  {
    "text": "also all the database and here we can see the version also the login name used by the",
    "start": "4166600",
    "end": "4175600"
  },
  {
    "text": "web application to login in the database and the username of the current",
    "start": "4175600",
    "end": "4183838"
  },
  {
    "text": "login also it is show that if the user is member of DB owner R and if the user",
    "start": "4183839",
    "end": "4190560"
  },
  {
    "text": "is member of the C admin Ro here it's very confusing because we are in the same",
    "start": "4190560",
    "end": "4197640"
  },
  {
    "text": "server okay but this is the attacked server after that you only have to",
    "start": "4198080",
    "end": "4203280"
  },
  {
    "text": "select any database and then click list tables and",
    "start": "4203280",
    "end": "4209080"
  },
  {
    "text": "you will get all the tables okay after that you choose any",
    "start": "4209080",
    "end": "4215590"
  },
  {
    "text": "[Music] table and click list files and we'll get",
    "start": "4215590",
    "end": "4221800"
  },
  {
    "text": "the file of that table and finally",
    "start": "4221800",
    "end": "4226840"
  },
  {
    "text": "you choose the files that the fields that you want to retrieve in a query and",
    "start": "4226840",
    "end": "4233040"
  },
  {
    "text": "just here it is BU the query and just click here and we'll get the result back",
    "start": "4233040",
    "end": "4241679"
  },
  {
    "text": "that table has no do something from North Wind yes here we'll get the table",
    "start": "4241679",
    "end": "4247600"
  },
  {
    "text": "from North Wind database territory stable and hold",
    "start": "4247600",
    "end": "4253840"
  },
  {
    "text": "information from territory stable okay so now you have all the table",
    "start": "4253840",
    "end": "4260159"
  },
  {
    "text": "content you can cut and paste and you have",
    "start": "4260159",
    "end": "4267760"
  },
  {
    "text": "okay can you this uh he's asking this uh works because of a coding bug a SQL",
    "start": "4273239",
    "end": "4281159"
  },
  {
    "text": "injection bug and has nothing to do with any service pack no no this is not fix in s because in the paper is it is",
    "start": "4281159",
    "end": "4290280"
  },
  {
    "text": "explained it use the open row function with the SQ SQL onlyb provider that is",
    "start": "4290280",
    "end": "4297960"
  },
  {
    "text": "allowed to all use all user to use it so any use no matter which login the web",
    "start": "4297960",
    "end": "4305960"
  },
  {
    "text": "application use to authenticate that you will be able to do this of course restriction permissions on tables on on",
    "start": "4305960",
    "end": "4314199"
  },
  {
    "text": "on databases with will apply if the user don't have permission in some tables or database",
    "start": "4314199",
    "end": "4321280"
  },
  {
    "text": "you won't be able to get that data",
    "start": "4321280",
    "end": "4327840"
  },
  {
    "text": "okay okay well yeah sometime if the f is",
    "start": "4330040",
    "end": "4335120"
  },
  {
    "text": "well configur configured you have to block all of connection",
    "start": "4335120",
    "end": "4341800"
  },
  {
    "text": "then okay because it is connecting back to your server what it does",
    "start": "4341800",
    "end": "4347760"
  },
  {
    "text": "is in inject code exploting SQL injection in the the in the SQL Server",
    "start": "4347760",
    "end": "4355440"
  },
  {
    "text": "of the web application that it issue a outb connection to your server and bring",
    "start": "4355440",
    "end": "4361400"
  },
  {
    "text": "all the data to your server so if the fare is broking outb",
    "start": "4361400",
    "end": "4366480"
  },
  {
    "text": "connection you can avoid this but there are many way to viice that I think we're almost done okay some",
    "start": "4366480",
    "end": "4373239"
  },
  {
    "text": "question",
    "start": "4373239",
    "end": "4376239"
  },
  {
    "text": "what uh what right what's what's to prevent somebody if you compromise that server from running this on that box I",
    "start": "4384639",
    "end": "4392400"
  },
  {
    "text": "don't know if I understand the question these",
    "start": "4392400",
    "end": "4397719"
  },
  {
    "text": "okay okay yeah if there's right there's a there's a ladyb",
    "start": "4411159",
    "end": "4416639"
  },
  {
    "text": "providers which are specifically designed to go through a firewall um so um I think you you won't",
    "start": "4416639",
    "end": "4424480"
  },
  {
    "text": "have a big problem with it anyways unless somebody's really smart with their firewall other other",
    "start": "4424480",
    "end": "4432080"
  },
  {
    "text": "question okay",
    "start": "4432080",
    "end": "4436080"
  },
  {
    "text": "you yes no no well for this yes but the there's Olay this is a SQL Olay DB",
    "start": "4452360",
    "end": "4459280"
  },
  {
    "text": "provider there's also a number of other providers that will use different protocols okay to connect back so you",
    "start": "4459280",
    "end": "4466880"
  },
  {
    "text": "could do this over a number of different protocols you can use another oldb provider that will use a proxy and we",
    "start": "4466880",
    "end": "4473400"
  },
  {
    "text": "proxy the connection using eror ID erds so you can byass bypass the firew",
    "start": "4473400",
    "end": "4480280"
  },
  {
    "text": "if there is a pro near in the DMF so there are many ways of doing",
    "start": "4480280",
    "end": "4487600"
  },
  {
    "text": "this another question okay okay well thanks thanks",
    "start": "4488120",
    "end": "4495520"
  },
  {
    "text": "for coming thank for being",
    "start": "4495520",
    "end": "4499239"
  },
  {
    "text": "here I think we're exactly it's like",
    "start": "4501600",
    "end": "4507760"
  },
  {
    "text": "uh e",
    "start": "4523960",
    "end": "4527960"
  }
]