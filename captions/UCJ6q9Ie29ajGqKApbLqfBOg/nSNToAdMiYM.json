[
  {
    "text": "[Music]",
    "start": "15700",
    "end": "19840"
  },
  {
    "text": "[Music]",
    "start": "29810",
    "end": "33620"
  },
  {
    "text": "with ice cream and everything um okay now",
    "start": "51520",
    "end": "58640"
  },
  {
    "text": "basically here's yet another myth people think that you can't over you can't",
    "start": "58640",
    "end": "64518"
  },
  {
    "text": "exploit a Unicode buffer so that once it's been copied into a Unicode buffer",
    "start": "64519",
    "end": "71360"
  },
  {
    "text": "that interleaving of data and zeros that typically happens is going to",
    "start": "71360",
    "end": "78600"
  },
  {
    "text": "mean that it's now not exploitable well you'd be wrong in that",
    "start": "78600",
    "end": "84759"
  },
  {
    "text": "case actually um Chris anley was the first one to actually publish any information",
    "start": "84759",
    "end": "92280"
  },
  {
    "text": "on this um turns out that on the x86 it very conveniently has variable",
    "start": "92280",
    "end": "100560"
  },
  {
    "text": "length instructions and so what we can do is we can use this to",
    "start": "100560",
    "end": "107920"
  },
  {
    "text": "interleave the the op codes and the bytes Etc so that we can actually",
    "start": "107920",
    "end": "114759"
  },
  {
    "text": "cause a Unicode we can jump back into a Unicode buff",
    "start": "114759",
    "end": "120600"
  },
  {
    "text": "and actually have it be useful basically it's called Venetian",
    "start": "120600",
    "end": "126880"
  },
  {
    "text": "method as in like venetian blind so you've got a you know a spot that's that's open and a spot that's not and so",
    "start": "126880",
    "end": "133160"
  },
  {
    "text": "on and it's it's kind of an interesting technique it requires a somewhat larger",
    "start": "133160",
    "end": "138400"
  },
  {
    "text": "buffer than normal I think about the smallest shell cut that's been put together is is around um 512 bytes along",
    "start": "138400",
    "end": "145760"
  },
  {
    "text": "those lines are 512 characters so uh you it takes a little bit larger overrun",
    "start": "145760",
    "end": "151040"
  },
  {
    "text": "than than normal to actually exploit it but I'm sure that somebody really very clever will figure out how to reduce",
    "start": "151040",
    "end": "157360"
  },
  {
    "text": "that at some point so um don't ever get the mistaken notion that oh well it's",
    "start": "157360",
    "end": "162720"
  },
  {
    "text": "only a little buffer overrun we'll just leave it in there um that's almost",
    "start": "162720",
    "end": "169200"
  },
  {
    "text": "always a very bad idea okay number one thing I can't say",
    "start": "169200",
    "end": "175319"
  },
  {
    "text": "this often enough Michael I could probably say it in a chorus don't trust you user",
    "start": "175319",
    "end": "180680"
  },
  {
    "text": "input um also get rid of unsafe",
    "start": "180680",
    "end": "186319"
  },
  {
    "text": "functions okay a really bad developer can figure out a way to screw up",
    "start": "186319",
    "end": "192200"
  },
  {
    "text": "anything even using totally safe function calls you pass the wrong num",
    "start": "192200",
    "end": "197319"
  },
  {
    "text": "wrong length to Str end copy way it goes okay Etc but given that and a really",
    "start": "197319",
    "end": "205879"
  },
  {
    "text": "superlative developer will never make any errors even given unsafe functions in the worst of conditions right okay",
    "start": "205879",
    "end": "213360"
  },
  {
    "text": "for the rest of us the other 99.7 of the world are somewhere in the middle and",
    "start": "213360",
    "end": "219159"
  },
  {
    "text": "the better the tools we've got the better the results will be and one of the things that will give you better",
    "start": "219159",
    "end": "224439"
  },
  {
    "text": "tools are the safe function calls so we can use the stress safe functions which",
    "start": "224439",
    "end": "232360"
  },
  {
    "text": "get around a lot of the inherent problems with the old stru copy stru cat",
    "start": "232360",
    "end": "237480"
  },
  {
    "text": "Etc so use these pay attention to your Unicode and Enz",
    "start": "237480",
    "end": "243760"
  },
  {
    "text": "size mismatches anywhere you're transferring data between the two be",
    "start": "243760",
    "end": "249079"
  },
  {
    "text": "careful and lastly you can use um managed code now I'd like to spend a",
    "start": "249079",
    "end": "256120"
  },
  {
    "text": "little bit of time talking about the uh slgs flag and it was unfortunately subject of",
    "start": "256120",
    "end": "264160"
  },
  {
    "text": "a little bit of controversy about a year ago and um and it's not because it",
    "start": "264160",
    "end": "270800"
  },
  {
    "text": "didn't work but it won't save you from everything that's you know nothing will",
    "start": "270800",
    "end": "277199"
  },
  {
    "text": "save you from everything I mean the the analogy that I like to use is I've got a",
    "start": "277199",
    "end": "283160"
  },
  {
    "text": "really pretty fast car and I like to drive fast and it's got great brakes and it's got seat belts and it's got airbags",
    "start": "283160",
    "end": "289320"
  },
  {
    "text": "and so if I screw up a little bit all those things will save me yeah I can hit",
    "start": "289320",
    "end": "295680"
  },
  {
    "text": "hit the brakes really hard the ABS will stop very very quickly and off I go but",
    "start": "295680",
    "end": "300880"
  },
  {
    "text": "if I go skitting on the ice and Plumb it off a 2,000t cliff those seat belts aren't going to save me but I do use the",
    "start": "300880",
    "end": "308960"
  },
  {
    "text": "seat belts religiously I don't go out of my driveway without them because I just",
    "start": "308960",
    "end": "314479"
  },
  {
    "text": "don't know so it's something that is a good practice but it does not mean by",
    "start": "314479",
    "end": "321560"
  },
  {
    "text": "any stretch of the imagination that you can just continue to write crappy code",
    "start": "321560",
    "end": "326720"
  },
  {
    "text": "and then the slgs flag is magically going to save you from all your mistakes because it won't it will magically save",
    "start": "326720",
    "end": "333880"
  },
  {
    "text": "you from some of your mistakes and so if you've done everything else right you've code",
    "start": "333880",
    "end": "339720"
  },
  {
    "text": "reviewed you've tested you've written as solid code as you can and",
    "start": "339720",
    "end": "345360"
  },
  {
    "text": "then somehow or another you know something has slipped through all of those things slgs might just stop it",
    "start": "345360",
    "end": "353400"
  },
  {
    "text": "from being anything dangerous it would have prevented Slammer it would have prevented Slammer",
    "start": "353400",
    "end": "360680"
  },
  {
    "text": "um you know buggy code is still buggy it doesn't help you with Heap overruns",
    "start": "360680",
    "end": "367000"
  },
  {
    "text": "doesn't help multi-stage attacks doesn't help you if say a virtual function",
    "start": "367000",
    "end": "372280"
  },
  {
    "text": "pointer table is overrun um but then again like I said",
    "start": "372280",
    "end": "378440"
  },
  {
    "text": "those seat belts aren't going to save me all the time either but having lived through pretty nasty car crash without",
    "start": "378440",
    "end": "384960"
  },
  {
    "text": "seat belts I'm not going to do that again so um",
    "start": "384960",
    "end": "391240"
  },
  {
    "text": "biggest thing is to write solid code I mean there's no there's not really",
    "start": "392280",
    "end": "397919"
  },
  {
    "text": "that's particularly uh amazing about writing secure code for the most part it's just",
    "start": "397919",
    "end": "404360"
  },
  {
    "text": "writing robust solid code if you've write code that stands up and behaves",
    "start": "404360",
    "end": "411880"
  },
  {
    "text": "correctly regardless of inputs then you're probably not going to have terribly many security problems as a",
    "start": "411880",
    "end": "419160"
  },
  {
    "text": "result of code quality okay so review your code go back",
    "start": "419160",
    "end": "425759"
  },
  {
    "text": "through it and look at it one useful technique that I've seen is I look at the diffs of what I check in so I'll",
    "start": "425759",
    "end": "432919"
  },
  {
    "text": "check it in I'll look at the diffs so that brings very clearly what did I change and so it allows me to focus on",
    "start": "432919",
    "end": "439440"
  },
  {
    "text": "that and then get somebody else to review it a fresh set of eyes hey you",
    "start": "439440",
    "end": "445000"
  },
  {
    "text": "know would you take a look at this I changed this and this and this and here's what I was thinking about and this is what I did and does that you",
    "start": "445000",
    "end": "452039"
  },
  {
    "text": "know does that look right that'll catch a lot more stuff all right now if it's",
    "start": "452039",
    "end": "458440"
  },
  {
    "text": "really important get somebody who really knows what they're doing to go through",
    "start": "458440",
    "end": "463800"
  },
  {
    "text": "it and review it hire them pay them lots of money and then test test test test",
    "start": "463800",
    "end": "470720"
  },
  {
    "text": "test some more it turns out that there's only so much that you're ever going to catch through code review you will there",
    "start": "470720",
    "end": "478720"
  },
  {
    "text": "are certain classes of bugs that require all sorts of State information Etc that",
    "start": "478720",
    "end": "486759"
  },
  {
    "text": "only happen under really weird circumstances and you can find these",
    "start": "486759",
    "end": "491960"
  },
  {
    "text": "through testing and you'll be more effective at finding these through texting I was talking with somebody one",
    "start": "491960",
    "end": "498440"
  },
  {
    "text": "of the internal product groups and they said that they had created a um a fuzzer",
    "start": "498440",
    "end": "505080"
  },
  {
    "text": "for their protocol that was intelligent about their protocol and would just abused the hell out of their",
    "start": "505080",
    "end": "512039"
  },
  {
    "text": "protocol and what they said is they found roughly a third of their bugs",
    "start": "512039",
    "end": "519240"
  },
  {
    "text": "through threat modeling another third through code review and the final third",
    "start": "519240",
    "end": "524440"
  },
  {
    "text": "came out of really solid extensive testing and that particular component",
    "start": "524440",
    "end": "531880"
  },
  {
    "text": "has a very very low rate of security fixes so um so these guys are doing",
    "start": "531880",
    "end": "538920"
  },
  {
    "text": "something wrong right and that's that's where I try and look",
    "start": "538920",
    "end": "543600"
  },
  {
    "text": "at so zip right through this since we're running",
    "start": "544560",
    "end": "550519"
  },
  {
    "text": "behind going okay let's talk about um sockets I",
    "start": "552200",
    "end": "559200"
  },
  {
    "text": "like to write sockets code um networking kind of stuff um it's it's fun and it",
    "start": "559200",
    "end": "565880"
  },
  {
    "text": "helps me go uh you know take over things and and do useful things on the network",
    "start": "565880",
    "end": "572279"
  },
  {
    "text": "and um so I I tend to like sockets it's one of my favorite topics um now here's",
    "start": "572279",
    "end": "580240"
  },
  {
    "text": "an interesting thing that some of the guys that um were part of the The Loft",
    "start": "580240",
    "end": "586519"
  },
  {
    "text": "figured out and U brought to our attention back in uh I think about 1997",
    "start": "586519",
    "end": "594240"
  },
  {
    "text": "98 is that a socket that's bound to inat or any",
    "start": "594240",
    "end": "600000"
  },
  {
    "text": "can be hijacked by one bound specifically to a specific IP and who",
    "start": "600000",
    "end": "605920"
  },
  {
    "text": "understands what I just said almost nobody okay so what that means is when I go to bind a socket for",
    "start": "605920",
    "end": "615720"
  },
  {
    "text": "listening on a server I can",
    "start": "615720",
    "end": "620839"
  },
  {
    "text": "specify what interfaces I want it to listen on if I want it to listen on all",
    "start": "620839",
    "end": "626519"
  },
  {
    "text": "the interfaces on the machine I specify zero for the IP address and it just",
    "start": "626519",
    "end": "633000"
  },
  {
    "text": "magically listens on all the interfaces on the machine and if people pop up and down Wireless and take cards in and out",
    "start": "633000",
    "end": "638920"
  },
  {
    "text": "and all that I'm still listening on all the things so it's very very convenient okay now if somebody comes and rebinds",
    "start": "638920",
    "end": "646880"
  },
  {
    "text": "to the same port but specifies a specific IP now they're more specific",
    "start": "646880",
    "end": "652000"
  },
  {
    "text": "than I am and they get preference okay so what they can then do",
    "start": "652000",
    "end": "659680"
  },
  {
    "text": "is they can then intercept my traffic modify it play Man in the middle attacks",
    "start": "659680",
    "end": "665680"
  },
  {
    "text": "sniff it Etc and then pass it along to the real server so the real server",
    "start": "665680",
    "end": "670920"
  },
  {
    "text": "really doesn't understand the difference he just sees a lot of connections from 1271 all right",
    "start": "670920",
    "end": "678480"
  },
  {
    "text": "so what we did was created a socket option that got rid of this problem it's",
    "start": "678480",
    "end": "684720"
  },
  {
    "text": "calledo exclusive adder and so the one of the best things to do is to go ahead",
    "start": "684720",
    "end": "691079"
  },
  {
    "text": "and set this option and now you're not susceptible to um to hijacking the",
    "start": "691079",
    "end": "698120"
  },
  {
    "text": "operating system is going to say all right this is the only person I'm going to give this particular port to",
    "start": "698120",
    "end": "704120"
  },
  {
    "text": "everybody else can't have it whether they're more specific or not and it it",
    "start": "704120",
    "end": "710279"
  },
  {
    "text": "helps a lot it also one thing that you do have to pay attention to is you have",
    "start": "710279",
    "end": "715800"
  },
  {
    "text": "to shut down these sockets cleanly because otherwise you can get get into sometimes a condition where if you",
    "start": "715800",
    "end": "721800"
  },
  {
    "text": "bounce the server drop it and try and come back up then the stack still has some things open and you'll fail coming",
    "start": "721800",
    "end": "728200"
  },
  {
    "text": "back up but that won't occur if you shut down the socket cleanly I go into a lot",
    "start": "728200",
    "end": "733440"
  },
  {
    "text": "of detail in in the book on this so I'm going to try and uh flip over it here",
    "start": "733440",
    "end": "739519"
  },
  {
    "text": "now in Windows Server 2003 we've actually put Access Control lists on the",
    "start": "739519",
    "end": "745480"
  },
  {
    "text": "sockets and so it mitigates this threat without setting as so exclusive ad are used though I",
    "start": "745480",
    "end": "752959"
  },
  {
    "text": "suspect it's going to be a long a good long while before um most people are writing code specifically for Windows",
    "start": "752959",
    "end": "760360"
  },
  {
    "text": "2003 and later okay now when you're riding a",
    "start": "760360",
    "end": "767720"
  },
  {
    "text": "network aware application one of the worst things you can do is fail to give",
    "start": "767720",
    "end": "773920"
  },
  {
    "text": "the user choices about where it's going to listen if",
    "start": "773920",
    "end": "779720"
  },
  {
    "text": "you know if if I'm trying to configure a system for use on the",
    "start": "779720",
    "end": "785279"
  },
  {
    "text": "internet then I want that front end to expose as little as possible and then",
    "start": "785279",
    "end": "791560"
  },
  {
    "text": "the back end exposes a richer interface so I can administer it etc etc and so",
    "start": "791560",
    "end": "797000"
  },
  {
    "text": "I'd like to just turn off things that listen on the internet I don't want to",
    "start": "797000",
    "end": "802560"
  },
  {
    "text": "rely on the firewall or something else in front of",
    "start": "802560",
    "end": "807600"
  },
  {
    "text": "me to block things I want to I want that just to be off I want to take the",
    "start": "807600",
    "end": "812760"
  },
  {
    "text": "position defense in depth if that firewall in front of me failed I still want to not to fall",
    "start": "812760",
    "end": "819839"
  },
  {
    "text": "over so the minimum level would be to specify allow the user to specify which",
    "start": "819839",
    "end": "825760"
  },
  {
    "text": "interfaces we're going to listen on which which network cards now this can",
    "start": "825760",
    "end": "831160"
  },
  {
    "text": "get a little bit tricky because if you specify a network card and then you go ahead one day and change it now you've",
    "start": "831160",
    "end": "837240"
  },
  {
    "text": "got an application that's not listening on anything at all and it can um take you a little bit to figure that out now",
    "start": "837240",
    "end": "843880"
  },
  {
    "text": "even better is specify which IP addresses it'll listen on and that's",
    "start": "843880",
    "end": "850839"
  },
  {
    "text": "that's a a second stage and then the best is to allow the user to restrict",
    "start": "850839",
    "end": "855920"
  },
  {
    "text": "the client side IPS as well so I can say all right this service is only going to",
    "start": "855920",
    "end": "861800"
  },
  {
    "text": "really talk to people on this set of ips and now I've got a richest set of of",
    "start": "861800",
    "end": "867880"
  },
  {
    "text": "configurability now what's also convenient in some cases",
    "start": "867880",
    "end": "874399"
  },
  {
    "text": "is to allow the client and the server to customize the port used we see this on",
    "start": "874399",
    "end": "879920"
  },
  {
    "text": "web servers all the time you see HTTP something something something colon port",
    "start": "879920",
    "end": "885399"
  },
  {
    "text": "number and um and away we go IPv6 which is going to be really cool",
    "start": "885399",
    "end": "892519"
  },
  {
    "text": "when we can actually use it um allows the concept of a local network a sight",
    "start": "892519",
    "end": "900000"
  },
  {
    "text": "level Network and a Global Network and you can also listen on um local site or",
    "start": "900000",
    "end": "908480"
  },
  {
    "text": "Global addresses and so that's a um some really cool",
    "start": "908480",
    "end": "914320"
  },
  {
    "text": "flexibility now some people think that firewalls are going away they're just terribly archaic and um nobody's going",
    "start": "914320",
    "end": "922440"
  },
  {
    "text": "to use them in in some sort of bright and shiny future that I really don't see coming I don't think they're going away",
    "start": "922440",
    "end": "929120"
  },
  {
    "text": "I think we're going to see more of them I don't think you should depend on it as your sole line of defense that's",
    "start": "929120",
    "end": "935680"
  },
  {
    "text": "ridiculous but um they're not going away there's too much stuff out there that's",
    "start": "935680",
    "end": "941279"
  },
  {
    "text": "trying to get you not to have a single device that's blocking a lot of the junk",
    "start": "941279",
    "end": "946600"
  },
  {
    "text": "if for anything else it's just to preserve your own bandwidth why let the attackers use huge amounts of your",
    "start": "946600",
    "end": "952560"
  },
  {
    "text": "internal bandwidth when you can just block it at the gates um another thing",
    "start": "952560",
    "end": "958199"
  },
  {
    "text": "that you'll see I think increasingly is a lot more people using host level",
    "start": "958199",
    "end": "965880"
  },
  {
    "text": "firewalling um yesterday uh Steve Riley and one of the",
    "start": "965880",
    "end": "971000"
  },
  {
    "text": "guys that works foring Tim baller were talking about what we used for open hack and we used IP set configurations to",
    "start": "971000",
    "end": "978600"
  },
  {
    "text": "implement some firewalling and that pushed things right down to the host level there's some neat",
    "start": "978600",
    "end": "984880"
  },
  {
    "text": "stuff you can do with that because you can enforce it at group policy level Etc but what the net net bottom line is is",
    "start": "984880",
    "end": "991440"
  },
  {
    "text": "these firewalls aren't going away and so you UT to write an app that's friendly to firewalls okay an app that's like not",
    "start": "991440",
    "end": "998759"
  },
  {
    "text": "friendly to firewalls is say FTP make a connection out to 21 say yeah give me",
    "start": "998759",
    "end": "1004079"
  },
  {
    "text": "this data he says fine I'll connect back to you on Port you know whatever Port",
    "start": "1004079",
    "end": "1010079"
  },
  {
    "text": "you just specified well now I have to open up my firewall rules to allow Connections in that's a prescription for",
    "start": "1010079",
    "end": "1017160"
  },
  {
    "text": "disaster right so that's an example of how not to write a firewall friendly",
    "start": "1017160",
    "end": "1023400"
  },
  {
    "text": "application and so if you're if you're writing a uh an application follow a few",
    "start": "1023400",
    "end": "1030038"
  },
  {
    "text": "rules to um to make it easier on yourself use one connection to do the",
    "start": "1030039",
    "end": "1036798"
  },
  {
    "text": "job don't make connections in both directions tcpip is quite capable of",
    "start": "1036799",
    "end": "1042720"
  },
  {
    "text": "transmitting data in both directions I don't need one socket for each Direction so um you know use it use it for what",
    "start": "1042720",
    "end": "1050000"
  },
  {
    "text": "it's worth um terminal services does it right",
    "start": "1050000",
    "end": "1055440"
  },
  {
    "text": "everything runs over one port one connection and it's very easy for me to",
    "start": "1055440",
    "end": "1061120"
  },
  {
    "text": "set up a firewall rule that allows terminal services to this one machine and just have it all",
    "start": "1061120",
    "end": "1068840"
  },
  {
    "text": "work um Can don't use UDP if you can possibly help it it's very very spoof",
    "start": "1068880",
    "end": "1075360"
  },
  {
    "text": "the connection based Protocols are a lot easier to make manage in the long run because you've got a directionality to",
    "start": "1075360",
    "end": "1082280"
  },
  {
    "text": "it I can make a firewall rule that says I'll allow Connections in but not out or out but not in whereas with UDP I I",
    "start": "1082280",
    "end": "1089640"
  },
  {
    "text": "don't know whether it's in or out it's just going somewhere",
    "start": "1089640",
    "end": "1095039"
  },
  {
    "text": "so yet another area to look at is that host-based trust is inherently very very",
    "start": "1095039",
    "end": "1102080"
  },
  {
    "text": "weak port-based trust is even worse uh older Unix protocols had uh the",
    "start": "1102080",
    "end": "1109360"
  },
  {
    "text": "r Services rsh R log on Etc and they basically assumed that if you're coming",
    "start": "1109360",
    "end": "1114600"
  },
  {
    "text": "from a machine that I knew about and we're coming from a low Port then you must be rude on that machine and so I'm",
    "start": "1114600",
    "end": "1120919"
  },
  {
    "text": "going to trust you and I'm just going to run whatever you ask me to well yeah those things were built in a far",
    "start": "1120919",
    "end": "1127760"
  },
  {
    "text": "friendlier time and era than we have now they're just simply um not appropriate",
    "start": "1127760",
    "end": "1133400"
  },
  {
    "text": "so don't base Trust on a host name or an IP address or where she had a port",
    "start": "1133400",
    "end": "1140080"
  },
  {
    "text": "number don't trust DNS names you don't know somebody might have corrupted the",
    "start": "1140080",
    "end": "1145840"
  },
  {
    "text": "the DNS records there's a whole bunch of different ways to screw up somebody's",
    "start": "1145840",
    "end": "1151799"
  },
  {
    "text": "DNS they may have forged um a bad response to your query you said all",
    "start": "1151799",
    "end": "1158000"
  },
  {
    "text": "right where's www.f.com and they said oh I know it's over here bam and um now",
    "start": "1158000",
    "end": "1165880"
  },
  {
    "text": "your resolver is corrupted now you're going to the wrong h most and away we go",
    "start": "1165880",
    "end": "1171120"
  },
  {
    "text": "if you need to know who a client or a server is require a shared secret use some cryptography use some certificates",
    "start": "1171120",
    "end": "1178640"
  },
  {
    "text": "make sure you know who you're talking to all right because you can't rely on DNS names it's just not it's just not",
    "start": "1178640",
    "end": "1185480"
  },
  {
    "text": "something you can really trust Deni of service is is yet another",
    "start": "1185480",
    "end": "1191520"
  },
  {
    "text": "pet peeve of mine sometimes I there have been times in the past where I've gone to talk to people and theyve said well",
    "start": "1191520",
    "end": "1198760"
  },
  {
    "text": "you know well we've considered all the security stuff I said well what happens if I open 10 million connections well",
    "start": "1198760",
    "end": "1204960"
  },
  {
    "text": "that's denol of service we haven't worried about that yet well you know what good is your app if it's not",
    "start": "1204960",
    "end": "1211919"
  },
  {
    "text": "running none none none at all so you've got to consider this um you got to plan",
    "start": "1211919",
    "end": "1219720"
  },
  {
    "text": "for denial of service in your threat modeling um it's uh you know there's several",
    "start": "1219720",
    "end": "1227840"
  },
  {
    "text": "types of denal service there's crashes it's almost always a code quality problem that caus crashes trusting user",
    "start": "1227840",
    "end": "1234919"
  },
  {
    "text": "input Etc um there's CPU starvation attacks",
    "start": "1234919",
    "end": "1240919"
  },
  {
    "text": "these are a little bit harder to figure out um and it's typically due to",
    "start": "1240919",
    "end": "1246240"
  },
  {
    "text": "inefficient code it's there's some function that behaves really well when",
    "start": "1246240",
    "end": "1252400"
  },
  {
    "text": "you give it 10 characters worth that behaves really poorly when you give it 512 characters worth there some",
    "start": "1252400",
    "end": "1259960"
  },
  {
    "text": "variation thereof you can overcome this by inspection you can overcome it through",
    "start": "1259960",
    "end": "1267480"
  },
  {
    "text": "testing and profiling figure out what functions are really eating CPU do some",
    "start": "1267480",
    "end": "1273799"
  },
  {
    "text": "function level profiling while feeding in abusive input and that'll really show them up make sure you test for",
    "start": "1273799",
    "end": "1281080"
  },
  {
    "text": "pathological inputs and for example a few years ago if I did a list dot dot",
    "start": "1281080",
    "end": "1289120"
  },
  {
    "text": "slashstar do dostar go on for a while against a um",
    "start": "1289120",
    "end": "1296600"
  },
  {
    "text": "particular implementation of FTP server the CPU would go to 100% it would stay",
    "start": "1296600",
    "end": "1301760"
  },
  {
    "text": "there for several hours okay that's that's no good that's the type of thing that we um want to",
    "start": "1301760",
    "end": "1310200"
  },
  {
    "text": "avoid memory starvation attacks are another class of denial of service to be",
    "start": "1310200",
    "end": "1317279"
  },
  {
    "text": "aware of uh a couple of main rules to remember here don't pre-allocate large",
    "start": "1317279",
    "end": "1323240"
  },
  {
    "text": "structures until you're sure you have a valid client uh we had a problem with",
    "start": "1323240",
    "end": "1328760"
  },
  {
    "text": "this in terminal Services a couple of years back where you know you just make a connection to port 3389 and Bam it",
    "start": "1328760",
    "end": "1336760"
  },
  {
    "text": "allocates a me of data you know just getting ready um well what happens if",
    "start": "1336760",
    "end": "1342600"
  },
  {
    "text": "somebody's Port scanning you that's that's no good so we we fixed that one um you also also want to place balance",
    "start": "1342600",
    "end": "1349720"
  },
  {
    "text": "on the amount of input that you'll accept from users I mean say you decide",
    "start": "1349720",
    "end": "1355559"
  },
  {
    "text": "you're going to you know get rid of buffer overflows you're going to dynamically allocate everything so then",
    "start": "1355559",
    "end": "1361360"
  },
  {
    "text": "somebody feeds you you know two gigs worth of of string now you're out of",
    "start": "1361360",
    "end": "1367360"
  },
  {
    "text": "memory that's no good either okay resource starvation is actually a",
    "start": "1367360",
    "end": "1376080"
  },
  {
    "text": "much much more difficult problem to manage because we get into a situation",
    "start": "1376080",
    "end": "1382080"
  },
  {
    "text": "where okay for every new connection I'm going to spawn off a new threat or process to service that connection and",
    "start": "1382080",
    "end": "1390279"
  },
  {
    "text": "way we go so now somebody comes along and establishes 4 million connections to",
    "start": "1390279",
    "end": "1395679"
  },
  {
    "text": "my box and then it falls over okay fine well that's no good so what do we do all",
    "start": "1395679",
    "end": "1402159"
  },
  {
    "text": "right well let's put a cap on the number of connections all right 40 4,9 that would be enough for",
    "start": "1402159",
    "end": "1409520"
  },
  {
    "text": "anybody so now one guy comes along and it allocates all 4096 and now nobody else can get it that's no good",
    "start": "1409520",
    "end": "1416039"
  },
  {
    "text": "either um and then you say okay well I'll make",
    "start": "1416039",
    "end": "1421080"
  },
  {
    "text": "it per user per IP address each IP address can only have I don't know 124",
    "start": "1421080",
    "end": "1427559"
  },
  {
    "text": "or something and then it turns out that your most popular client is somebody's",
    "start": "1427559",
    "end": "1433679"
  },
  {
    "text": "proxy server and now your most popular client is getting wedged off all all the",
    "start": "1433679",
    "end": "1438720"
  },
  {
    "text": "time and so now that's that's not a very good uh approach either one of the most",
    "start": "1438720",
    "end": "1444799"
  },
  {
    "text": "interesting approaches is to change Behavior whether or not you're under",
    "start": "1444799",
    "end": "1450279"
  },
  {
    "text": "attack or not if you start entering a so what you want to do is set up logic to",
    "start": "1450279",
    "end": "1456159"
  },
  {
    "text": "to hit a a phase where you know that you're under attack you're seeing",
    "start": "1456159",
    "end": "1461880"
  },
  {
    "text": "resource starvation issues and so now we're going to change Behavior to start",
    "start": "1461880",
    "end": "1467919"
  },
  {
    "text": "shuck off people that aren't progressing normally look for abusive situations",
    "start": "1467919",
    "end": "1473720"
  },
  {
    "text": "start closing their connections and defend ourselves um there's a lot of logic",
    "start": "1473720",
    "end": "1480080"
  },
  {
    "text": "built into particularly the SMB implementation for that right now and",
    "start": "1480080",
    "end": "1486480"
  },
  {
    "text": "it's very very effective at shocking off attacks there's uh ways for example to",
    "start": "1486480",
    "end": "1493520"
  },
  {
    "text": "really kill the CPU on any machine that exposes um SS C this was presented at um",
    "start": "1493520",
    "end": "1501760"
  },
  {
    "text": "younik security Symposium two years ago and they also presented an interesting",
    "start": "1501760",
    "end": "1508440"
  },
  {
    "text": "approach which is going to take some standard changes to to roll out but it's",
    "start": "1508440",
    "end": "1513559"
  },
  {
    "text": "a useful thing to think about um which is to make it",
    "start": "1513559",
    "end": "1519600"
  },
  {
    "text": "as is is CPU intensive on your attacker is it is for you to respond you don't",
    "start": "1519600",
    "end": "1526559"
  },
  {
    "text": "what you want to look out for is a situation where it's very cheap for somebody else to get you to do a lot of work so um these can be very very",
    "start": "1526559",
    "end": "1534880"
  },
  {
    "text": "complex and difficult to work around and require some some pretty extensive",
    "start": "1534880",
    "end": "1540200"
  },
  {
    "text": "design modifications so you know as a software manager the last thing in the",
    "start": "1540200",
    "end": "1547120"
  },
  {
    "text": "world I want to see is big changes late in the process what I'd really rather do is think about these things very early",
    "start": "1547120",
    "end": "1553799"
  },
  {
    "text": "on and get them fixed early",
    "start": "1553799",
    "end": "1558278"
  },
  {
    "text": "now if you impersonation is a uh is is a",
    "start": "1561080",
    "end": "1566960"
  },
  {
    "text": "fun thing to to look at in any kind of operating system and uh so what what's",
    "start": "1566960",
    "end": "1576640"
  },
  {
    "text": "what's wrong with this code anybody see couple people okay what we're going",
    "start": "1576640",
    "end": "1584039"
  },
  {
    "text": "to try and do here is we're going to impersonate the logged on user and then if the user is an",
    "start": "1584039",
    "end": "1593480"
  },
  {
    "text": "admin then we'll go do horrible stuff and then we'll revert to self well what",
    "start": "1593480",
    "end": "1599840"
  },
  {
    "text": "if the impersonation failed it could have failed and if it",
    "start": "1599840",
    "end": "1605120"
  },
  {
    "text": "did then you're going to continue running under your elevated account and",
    "start": "1605120",
    "end": "1610520"
  },
  {
    "text": "you're going to perform actions on somebody else's behalf and they've just escalated privilege and you've had it",
    "start": "1610520",
    "end": "1620240"
  },
  {
    "text": "okay you also want to be aware of clients that can impersonate you if you're a privileged process you want to",
    "start": "1624640",
    "end": "1632200"
  },
  {
    "text": "really look out for those types of things um an interesting wrinkle on this",
    "start": "1632200",
    "end": "1637279"
  },
  {
    "text": "is Comm and RPC callbacks so I'm going to say to this com object say hey I'm",
    "start": "1637279",
    "end": "1645880"
  },
  {
    "text": "going to register this sync let me know when you're done then he pops back to me when he's done",
    "start": "1645880",
    "end": "1651360"
  },
  {
    "text": "now that server has just become my client if that Server doesn't take care",
    "start": "1651360",
    "end": "1656960"
  },
  {
    "text": "to regulate the level at which she can be impersonated then I can impersonate the",
    "start": "1656960",
    "end": "1663480"
  },
  {
    "text": "server and escalate privilege that way so that's something else to be aware",
    "start": "1663480",
    "end": "1670799"
  },
  {
    "text": "of next is don't impersonate and then just execute whatever comes along if",
    "start": "1670799",
    "end": "1677159"
  },
  {
    "text": "your model is is well you know somebody's going to hand me a dll and then I'm going to just run",
    "start": "1677159",
    "end": "1683000"
  },
  {
    "text": "it you know if they call revert to self you've had it um so that's",
    "start": "1683000",
    "end": "1688360"
  },
  {
    "text": "a something to look out for we made a change for this in Windows Server",
    "start": "1688360",
    "end": "1695320"
  },
  {
    "text": "2003 where we decided that impersonation should be a privilege and that not",
    "start": "1695320",
    "end": "1700559"
  },
  {
    "text": "everybody should have it it reduces the potential for local escalation of privilege attacks and so it's right now",
    "start": "1700559",
    "end": "1708799"
  },
  {
    "text": "it's admins and service and accounts only that can can uh do this by default",
    "start": "1708799",
    "end": "1714320"
  },
  {
    "text": "so if you've got an app that requires impersonation and it's having problems on on 2003 this could be",
    "start": "1714320",
    "end": "1722480"
  },
  {
    "text": "why but if you need to you can add that you know whatever user you need into the the privilege and that'll fix the",
    "start": "1722480",
    "end": "1728760"
  },
  {
    "text": "problem right away so always check your returns look",
    "start": "1728760",
    "end": "1734080"
  },
  {
    "text": "for impersonation functions and always allow only identify um on what's going",
    "start": "1734080",
    "end": "1744799"
  },
  {
    "text": "on so here's what to do code review and",
    "start": "1744880",
    "end": "1750880"
  },
  {
    "text": "testing that's I can't stress this highly enough um think about integer overflows",
    "start": "1750880",
    "end": "1758480"
  },
  {
    "text": "it's not something that's really commonly talked about a whole lot there's not a lot of awareness in this",
    "start": "1758480",
    "end": "1764159"
  },
  {
    "text": "area but the attackers are certainly raising awareness in this area of for",
    "start": "1764159",
    "end": "1769559"
  },
  {
    "text": "other attackers and so people that are trying to you know not be uh attacked",
    "start": "1769559",
    "end": "1777480"
  },
  {
    "text": "need to really be aware of it too um conf countermeasures for for denial",
    "start": "1777480",
    "end": "1782640"
  },
  {
    "text": "service are are very often quite complex and so you better plan that into your",
    "start": "1782640",
    "end": "1788799"
  },
  {
    "text": "development schedule really early and uh check your returns I think I could turn over to Michael now thank you very much",
    "start": "1788799",
    "end": "1796640"
  },
  {
    "text": "um just want to tell you a little story about the impersonation work that we did the impersonation privilege that we",
    "start": "1796640",
    "end": "1803240"
  },
  {
    "text": "added to Windows Server so I was the guy who pushed it through to get it into the into the product and uh basically what",
    "start": "1803240",
    "end": "1811440"
  },
  {
    "text": "we did originally the original plan was we weren't going to Grant this to everybody uh originally was just going to be granted to admins and service",
    "start": "1811440",
    "end": "1818559"
  },
  {
    "text": "accounts which is network service local service and local system and the IPC",
    "start": "1818559",
    "end": "1824399"
  },
  {
    "text": "guys basically got the whole of Windows everyone who ships anything in Windows to run all their Reg ression tests absolutely everything took about two",
    "start": "1824399",
    "end": "1830600"
  },
  {
    "text": "weeks and the IPC guys came back really moaning because basically 20% of their",
    "start": "1830600",
    "end": "1836960"
  },
  {
    "text": "regression tests worked the other 80% just failed because of some of the funky",
    "start": "1836960",
    "end": "1842320"
  },
  {
    "text": "stuff they do with impersonation so we decided at that point by the way this is November last",
    "start": "1842320",
    "end": "1848480"
  },
  {
    "text": "year this was all happening this is like release candidate to of Windows",
    "start": "1848480",
    "end": "1854440"
  },
  {
    "text": "server and so we decided that we would Grant the privil to everyone and then",
    "start": "1854440",
    "end": "1859600"
  },
  {
    "text": "allow people to take it out if they didn't need it so we presented this proposal to Jim Alin who is the the big",
    "start": "1859600",
    "end": "1866760"
  },
  {
    "text": "big head honch of Windows who basically looked me Square in the eye and",
    "start": "1866760",
    "end": "1872200"
  },
  {
    "text": "said go back think about it some more we're not granting this to everyone no",
    "start": "1872200",
    "end": "1878000"
  },
  {
    "text": "way and so I went back thought about it some more and basically went looked at",
    "start": "1878000",
    "end": "1883559"
  },
  {
    "text": "the bugs that were being found in IPC and dcom found a way around it and they fixed a whole bunch of their the issues",
    "start": "1883559",
    "end": "1889720"
  },
  {
    "text": "they fixed their bugs so we could maintain the the the uh the privilege",
    "start": "1889720",
    "end": "1895519"
  },
  {
    "text": "and in the end 99.7% of their regression tests passed and the other three that",
    "start": "1895519",
    "end": "1902679"
  },
  {
    "text": "failed they actually admitted were just not real world scenarios anyway and they were just torture tests and they were",
    "start": "1902679",
    "end": "1908760"
  },
  {
    "text": "they were happy at that point so it's just an idea of like how some of the the culture is changing the fact that Alin",
    "start": "1908760",
    "end": "1914519"
  },
  {
    "text": "stared me down and just said we don't pay you the money you do to women on things uh go back and think about it",
    "start": "1914519",
    "end": "1920440"
  },
  {
    "text": "some more I want to ship a secure product the other thing I want to also point out is that in the framework just",
    "start": "1920440",
    "end": "1927200"
  },
  {
    "text": "talking about integer overflows if you're writing in vb.net integer overflows will automatically cause an",
    "start": "1927200",
    "end": "1932880"
  },
  {
    "text": "exception and in C they don't you need to put the word checked around the",
    "start": "1932880",
    "end": "1938320"
  },
  {
    "text": "operation and if there is an integer overflow it will throw an exception so there is actually support in the framework um for helping mitigate",
    "start": "1938320",
    "end": "1946120"
  },
  {
    "text": "integer overflow tax right so I'm want to move into sort of a different area uh because I you probably",
    "start": "1946120",
    "end": "1953039"
  },
  {
    "text": "worked out by now that David and I we sort of do sort of we have similar goals in life but we do things in a different",
    "start": "1953039",
    "end": "1959440"
  },
  {
    "text": "way we work on different Technologies and one of the areas that I tend to spend a lot lot of my time is in the area of of crypto work and there's I",
    "start": "1959440",
    "end": "1967559"
  },
  {
    "text": "mean I've seen I've seen it all uh and a lot of this stuff and cration which is",
    "start": "1967559",
    "end": "1973039"
  },
  {
    "text": "where people think that exclusive war is you know the Savior and I'll just like use exclusive or in a funky way with",
    "start": "1973039",
    "end": "1979000"
  },
  {
    "text": "some some numbers that no one's ever going to work out and no one will ever break my encryption scheme well you know",
    "start": "1979000",
    "end": "1985080"
  },
  {
    "text": "anyone's Kid Sister can break most of these things so you know don't roll your own crypto functions thinking",
    "start": "1985080",
    "end": "1991840"
  },
  {
    "text": "that no one will ever work it out and in fact you know what encryption is easy",
    "start": "1991840",
    "end": "1997600"
  },
  {
    "text": "the hard part of cryptography is not the encryption it's the key management that's the hard part not the encryption",
    "start": "1997600",
    "end": "2004799"
  },
  {
    "text": "so just call crypto API or uh if using CN C++ on win32 or system. security.",
    "start": "2004799",
    "end": "2011240"
  },
  {
    "text": "cryptography which you're using manage code if you're using say VB or ASP or some com client some high level",
    "start": "2011240",
    "end": "2017559"
  },
  {
    "text": "scripting client then use cycom and the other one is you know don't store Secrets uh in code or in configuration",
    "start": "2017559",
    "end": "2024559"
  },
  {
    "text": "files because they will get found out on that very subject storing secrets",
    "start": "2024559",
    "end": "2031159"
  },
  {
    "text": "in software is impossible your threat model should reflect the fact that the secret data can be compromised if",
    "start": "2031159",
    "end": "2037200"
  },
  {
    "text": "certain condition I exist but you can raise the bar substantially at least try",
    "start": "2037200",
    "end": "2042519"
  },
  {
    "text": "to raise the bar uh embedding secrets in code don't stay secret for very long so",
    "start": "2042519",
    "end": "2049760"
  },
  {
    "text": "just you know obviously don't go doing that I actually heard one guy luckily not someone who work from on a News Group luckily the guy doesn't work for",
    "start": "2049760",
    "end": "2055760"
  },
  {
    "text": "Microsoft otherwise we'd be having a little chat with the guy but he was saying that because for those of you not aware but visual studio uh 2003 which is",
    "start": "2055760",
    "end": "2064358"
  },
  {
    "text": "about to be released we've included a community Community Edition I think that's the correct word of an of a an",
    "start": "2064359",
    "end": "2070960"
  },
  {
    "text": "obfuscation technology for for manage code and so this guy in the news group say well does that mean I can start",
    "start": "2070960",
    "end": "2076560"
  },
  {
    "text": "embedding passwords in my code because no one will work it out it's like no",
    "start": "2076560",
    "end": "2082200"
  },
  {
    "text": "don't embed secrets in code period obfuscation Technologies or or otherwise just don't go doing it the recommended",
    "start": "2082200",
    "end": "2088839"
  },
  {
    "text": "way of doing it today um obviously this depends on the threats is to use the data protection API that does require",
    "start": "2088839",
    "end": "2095560"
  },
  {
    "text": "Windows 2000 later there are no plans to back propop this 24 or to any te any",
    "start": "2095560",
    "end": "2101839"
  },
  {
    "text": "version of the OS prior to that because there's actually a lot of infrastructure required um to support dpapi it's much",
    "start": "2101839",
    "end": "2108119"
  },
  {
    "text": "more preferable to LSA Secrets if any of you are familiar with LSA secrets for a number of reasons uh in in the the",
    "start": "2108119",
    "end": "2114560"
  },
  {
    "text": "subject that David talked about about lease privilege there there's four reasons most of the time why people have",
    "start": "2114560",
    "end": "2120400"
  },
  {
    "text": "to run as system or as admin one is an Ackle problem the other one is you're opening some resource for full control",
    "start": "2120400",
    "end": "2126760"
  },
  {
    "text": "or All Access um and the akle says you need to be an admin to do that another one is a",
    "start": "2126760",
    "end": "2133240"
  },
  {
    "text": "privilege that's required and another one is if you're storing LSA Secrets",
    "start": "2133240",
    "end": "2138280"
  },
  {
    "text": "because to call into LSA Secrets requires you be an admin actually it's kind of funny the LSA secrets apis to",
    "start": "2138280",
    "end": "2143880"
  },
  {
    "text": "actually store and retrieve the data don't require you to be an admin but to get a policy handle requires you to be",
    "start": "2143880",
    "end": "2149400"
  },
  {
    "text": "an admin and have guess what the first argument is on the LSA Secrets apis the policy handle so you actually need to be",
    "start": "2149400",
    "end": "2155240"
  },
  {
    "text": "an admin to store an LSA secret so we actually there's actually two services in Windows that used to run a system",
    "start": "2155240",
    "end": "2161200"
  },
  {
    "text": "that now run as Network or local service because they no longer store their secret data in LSA Secrets rather they",
    "start": "2161200",
    "end": "2166880"
  },
  {
    "text": "store it um in using the data protection API the other reason for using DP API of",
    "start": "2166880",
    "end": "2173200"
  },
  {
    "text": "LSA Secrets is you got to like write this much code just to get a handle essentially to to the LSA and do sort of",
    "start": "2173200",
    "end": "2180720"
  },
  {
    "text": "the the prep work and then finally do some funky stuff and you store the data",
    "start": "2180720",
    "end": "2186680"
  },
  {
    "text": "with and then you probably AV somewhere while you've been doing that whereas in the data protection API there are just",
    "start": "2186680",
    "end": "2191839"
  },
  {
    "text": "two functions um cryp protect and crypt unprotect data they're dead easy also",
    "start": "2191839",
    "end": "2197079"
  },
  {
    "text": "cry dpapi uh does not persist the data for you uh you get given a blob back and",
    "start": "2197079",
    "end": "2202880"
  },
  {
    "text": "then you can persist that data the nice thing about that is that you can store that in a registry or can you can store it in a file share you can store it in",
    "start": "2202880",
    "end": "2209440"
  },
  {
    "text": "an XML configuration file whatever and that means that you can back up your",
    "start": "2209440",
    "end": "2214520"
  },
  {
    "text": "application and back up the secret data whereas if you're storing data using LSA Secrets you've got to do a system backup",
    "start": "2214520",
    "end": "2221680"
  },
  {
    "text": "which you may not want to do you may just want to back up the application uh the other nice thing is dpapi provides an Integrity check as",
    "start": "2221680",
    "end": "2227760"
  },
  {
    "text": "well so actually know whether the data has been uh has been changed or not and there are some options in dpapi but the",
    "start": "2227760",
    "end": "2233800"
  },
  {
    "text": "general rule of thumb is that the account that encrypts the data is the account that can decrypt the data because it's actually key material",
    "start": "2233800",
    "end": "2239839"
  },
  {
    "text": "that's tied to your password and is held in your uh in your profile",
    "start": "2239839",
    "end": "2244880"
  },
  {
    "text": "information so storing secrets in memory so there's a new API so basically the",
    "start": "2244880",
    "end": "2250920"
  },
  {
    "text": "way you store secrets and data by the way the main threat here is the is the crash dump if there's",
    "start": "2250920",
    "end": "2257680"
  },
  {
    "text": "some secret data in memory and the application crashes and a crash dump is written out then potentially the data",
    "start": "2257680",
    "end": "2265599"
  },
  {
    "text": "could be written out to the crash dump file as well which means one of two situations can possibly exist what",
    "start": "2265599",
    "end": "2271520"
  },
  {
    "text": "happens if the crash dump file is sent somewhere or what happens if someone can read that crash dump file you may now",
    "start": "2271520",
    "end": "2276599"
  },
  {
    "text": "have access to the secret data there's also a small window of opportunity that data could be paged out to the page file",
    "start": "2276599",
    "end": "2283000"
  },
  {
    "text": "um I'm I'm not too worried about the threat of someone hooking a debugger up to a running process because I'm just",
    "start": "2283000",
    "end": "2289000"
  },
  {
    "text": "going to wait until the data is unencrypted I mean that's not I don't think that's a real threat uh but the",
    "start": "2289000",
    "end": "2295119"
  },
  {
    "text": "crash dump I think is actually a very valid threat and so basically the way your application should deal with secret data in memory is you acquire the data",
    "start": "2295119",
    "end": "2302800"
  },
  {
    "text": "immediately encrypt it if you want to be the data to be relatively long long lived decrypt it use it you know re redo",
    "start": "2302800",
    "end": "2310440"
  },
  {
    "text": "as necessary and finally when you're done you just scrub the data so you keep the window of opportunity when the secret data is exposed in the wild as",
    "start": "2310440",
    "end": "2317599"
  },
  {
    "text": "small as possible which means that if there is a crash and the application crash dumps or crash dump file is",
    "start": "2317599",
    "end": "2323119"
  },
  {
    "text": "created the window of opportunity of it being in plain text is greatly reduced",
    "start": "2323119",
    "end": "2328160"
  },
  {
    "text": "now obviously you're not going to encrypt all this stuff in memory there's some stuff you just don't care about but some stuff is Absolut should absolutely",
    "start": "2328160",
    "end": "2334920"
  },
  {
    "text": "be encrypted in memory like keys personally identifiable information I mean you know privacy is a big issue",
    "start": "2334920",
    "end": "2340960"
  },
  {
    "text": "it's one of the the four cornerstones of trustworthy Computing is the whole notion of privacy uh you know if you're",
    "start": "2340960",
    "end": "2346599"
  },
  {
    "text": "dealing with health information or anything that's personally identifiable you may seriously have to consider encrypting it in memory in case it's",
    "start": "2346599",
    "end": "2353119"
  },
  {
    "text": "leaked out there's a function that we've added to uh Windows Server 2003 called",
    "start": "2353119",
    "end": "2358880"
  },
  {
    "text": "cryp protect and Crypton protect memory and you can tie it to the running process you can tie it to the machine and you can also share it across",
    "start": "2358880",
    "end": "2364760"
  },
  {
    "text": "processes as well but the default is to lock it just for that application so just that process can encrypt and",
    "start": "2364760",
    "end": "2370839"
  },
  {
    "text": "decrypt the data there was originally no um no plans to back propop this to Prior",
    "start": "2370839",
    "end": "2378920"
  },
  {
    "text": "versions of the OS however cryp protect and Crypton protect memory are basically just a wrapper over a internal function",
    "start": "2378920",
    "end": "2386720"
  },
  {
    "text": "called RTL encrypt and RTL decrypt memory they are now documented um in the",
    "start": "2386720",
    "end": "2391839"
  },
  {
    "text": "platform SDK and in fact on this slide this is not in there but when you get the soft copy of these slides that C++",
    "start": "2391839",
    "end": "2398760"
  },
  {
    "text": "file uh is actually some rapper code to call RTL encrypt and RTL decrypt memory",
    "start": "2398760",
    "end": "2404520"
  },
  {
    "text": "the reason why I've done that is because RTL and cryp memory and RTL DCP memory are not exported from the DL these a bit",
    "start": "2404520",
    "end": "2411160"
  },
  {
    "text": "of bit of funky stuff um to call them um so they're now documented in the platform SDK so now you got this support",
    "start": "2411160",
    "end": "2417480"
  },
  {
    "text": "on Windows 2000 and on Windows XP you notied that bullet point 5 there",
    "start": "2417480",
    "end": "2422640"
  },
  {
    "text": "is scrub the data when you finished with it well turns out that calling",
    "start": "2422640",
    "end": "2430240"
  },
  {
    "text": "memet may not work to scrub the data so imagine a imagine the following function",
    "start": "2430240",
    "end": "2436960"
  },
  {
    "text": "uh Fu it's got a stack based buffer doesn't have to be a stack based buffer just for argument sake let's just say",
    "start": "2436960",
    "end": "2442000"
  },
  {
    "text": "it's a stack based buffer you let's say it's called password you get the password from the user do funky stuff",
    "start": "2442000",
    "end": "2447800"
  },
  {
    "text": "with password uh mem set so what's wrong with that codee",
    "start": "2447800",
    "end": "2454880"
  },
  {
    "text": "well the actual question is there's the actual answer is there's nothing wrong with the code the code the C code is",
    "start": "2457599",
    "end": "2463000"
  },
  {
    "text": "absolutely fine so long as you don't compile it if you compile it now you've",
    "start": "2463000",
    "end": "2468720"
  },
  {
    "text": "got a problem because there's a a very simple peephole optimization that just",
    "start": "2468720",
    "end": "2474720"
  },
  {
    "text": "about every C and C++ compiler does where they know the semantics of",
    "start": "2474720",
    "end": "2480520"
  },
  {
    "text": "memet and it realizes that you're writing to this buffer and then the",
    "start": "2480520",
    "end": "2485560"
  },
  {
    "text": "function finishes and nothing is reading from the buffer it's called Dead store removal and so it realizes that no one's",
    "start": "2485560",
    "end": "2492160"
  },
  {
    "text": "reading from the buffer again it's the end of the function so why even bother doing the mem set and so the optimizer",
    "start": "2492160",
    "end": "2498480"
  },
  {
    "text": "even at some of the lowest levels of optimization it's a peephole optimization removes it from the code so",
    "start": "2498480",
    "end": "2504520"
  },
  {
    "text": "the code is fine but the generated code doesn't have the call to M set and",
    "start": "2504520",
    "end": "2510319"
  },
  {
    "text": "believe me this actually affects a lot of compilers this is not a a visual C++",
    "start": "2510319",
    "end": "2515560"
  },
  {
    "text": "uh bug it affects a lot of comp compilers so we ended up writing a little macro um called secure Zer memor",
    "start": "2515560",
    "end": "2521560"
  },
  {
    "text": "which basically just plays volatile pointer tricks uh to not be optimized out uh it's available in wibas Doh",
    "start": "2521560",
    "end": "2528839"
  },
  {
    "text": "you're more than welcome to use it in your own code but um I wouldn't use it for everything I would just use it for",
    "start": "2528839",
    "end": "2534920"
  },
  {
    "text": "scrubbing secret data because it's dog slow relative to a C and M",
    "start": "2534920",
    "end": "2541000"
  },
  {
    "text": "Set uh in terms of Access Control issues uh and and sort of David's alluded to",
    "start": "2542400",
    "end": "2548599"
  },
  {
    "text": "some of this but be very careful about what echles and permissions you have on certain",
    "start": "2548599",
    "end": "2555079"
  },
  {
    "text": "data because sometimes you know an echo like everyone read may not be appropriate for some kinds of data like",
    "start": "2555079",
    "end": "2560880"
  },
  {
    "text": "a key for example an encryption key you may not want everyone to read that data you may only want admins to read that",
    "start": "2560880",
    "end": "2566960"
  },
  {
    "text": "data so be very careful about what accles you're using to protect certain data also don't depend on inheriting",
    "start": "2566960",
    "end": "2574480"
  },
  {
    "text": "system defaults in general the system defaults are actually very good now in Windows XP onwards and in general you",
    "start": "2574480",
    "end": "2581800"
  },
  {
    "text": "can create something in the right place and you'll inherit a good default Ackle but don't rely on it because it may not",
    "start": "2581800",
    "end": "2589040"
  },
  {
    "text": "be correct for what you want to do there's also another type of daal called",
    "start": "2589040",
    "end": "2594680"
  },
  {
    "text": "a null deal which is just plain evil they are now banned in Windows basically",
    "start": "2594680",
    "end": "2600839"
  },
  {
    "text": "all as as we probably already know but all objects in Windows NC or named objects can be protected with an arle",
    "start": "2600839",
    "end": "2606800"
  },
  {
    "text": "and if if you have a null dle it means you have no defense you do not have an Ackle on the on the on the object there",
    "start": "2606800",
    "end": "2612640"
  },
  {
    "text": "is no defense for that object uh there was one null daal in Windows",
    "start": "2612640",
    "end": "2618319"
  },
  {
    "text": "XP and we let it slip through we fixed it in xpsp 1 but what it was you know the little balloon that pops up in the",
    "start": "2618319",
    "end": "2624480"
  },
  {
    "text": "bottom that says hey you've got a uh you're running low on dis space well that was protected by mutch so we didn't",
    "start": "2624480",
    "end": "2630359"
  },
  {
    "text": "have multiple balloons popping up so the application didn't try to pop multiple balloons up well there's a null daal on",
    "start": "2630359",
    "end": "2635640"
  },
  {
    "text": "that and the attack was that you could like change the daal on the object on",
    "start": "2635640",
    "end": "2641880"
  },
  {
    "text": "the mutex to say deny access to the mutex so no one could ever acquire the mutex so the balloon would never pop up",
    "start": "2641880",
    "end": "2649119"
  },
  {
    "text": "to some people that was actually seen as a feature and and we're like you know what there's there's no security issue",
    "start": "2649119",
    "end": "2654599"
  },
  {
    "text": "here we're not even going to bother we'll fix it in service pack one it's just not an issue so that was the only known null deckle in Windows",
    "start": "2654599",
    "end": "2662319"
  },
  {
    "text": "XP um you got to be aware that if you got a call to set security script to daal and the second actually the second",
    "start": "2662319",
    "end": "2668680"
  },
  {
    "text": "argument is true and the third argument is null uh you've got a bug you've got no you have no protection on that object",
    "start": "2668680",
    "end": "2675800"
  },
  {
    "text": "anyone can do anything to the object anything whatsoever you have no",
    "start": "2675800",
    "end": "2682280"
  },
  {
    "text": "protection so active X controls we've actually now put got a rule in place um",
    "start": "2684280",
    "end": "2689680"
  },
  {
    "text": "Thou shalt produce no more active X controls unless you've got a really good reason and you better have a real really",
    "start": "2689680",
    "end": "2698200"
  },
  {
    "text": "really good reason to come up with a reason for generating a new activat control uh all you know new",
    "start": "2698200",
    "end": "2705000"
  },
  {
    "text": "functionality of that nature should be moving over in Microsoft over to manage code and part of the reason is a lot of",
    "start": "2705000",
    "end": "2711800"
  },
  {
    "text": "people mark their controls are safe for scripting which is just literally like saying yeah just trust me I'm safe to be",
    "start": "2711800",
    "end": "2717920"
  },
  {
    "text": "scripted so let me explain very briefly what that means so if you look at Excel",
    "start": "2717920",
    "end": "2723640"
  },
  {
    "text": "Excel does what it does and it does what it does very very well it does number stuff it does chatting stuff does pivot",
    "start": "2723640",
    "end": "2730119"
  },
  {
    "text": "table stuff and it's it's a well-written app and it's not designed to be malicious and so on however it exposes",
    "start": "2730119",
    "end": "2738119"
  },
  {
    "text": "an object model and that object model allows you to file sorry do do the equivalent of a file save as see colum",
    "start": "2738119",
    "end": "2745720"
  },
  {
    "text": "back boot.ini save out an XLS file as boot.ini why can you do that well",
    "start": "2745720",
    "end": "2752319"
  },
  {
    "text": "Everyone's an admin so you can stomp on the boot that ini file but what the whole whole point is is that means that",
    "start": "2752319",
    "end": "2758200"
  },
  {
    "text": "Excel is not safe to be scripted because script can do anything to the object model and who knows what",
    "start": "2758200",
    "end": "2765720"
  },
  {
    "text": "it could do and you know so if you can actually stomp over something change something or expose sensitive",
    "start": "2765720",
    "end": "2772720"
  },
  {
    "text": "information then that's an example of something that is not safe to be scripted so let me give another couple",
    "start": "2772720",
    "end": "2777839"
  },
  {
    "text": "of examples there's a bug found in an active X control just before Windows XP shipped about 3 months before the",
    "start": "2777839",
    "end": "2783599"
  },
  {
    "text": "product shipped there's an activ S control that had one method on it called print this activat control was marked to",
    "start": "2783599",
    "end": "2789359"
  },
  {
    "text": "safe for scripting which means it probably not it may not throw UI uh when you um when you instantiate it depending",
    "start": "2789359",
    "end": "2796559"
  },
  {
    "text": "on the on the uh security policy in IE well this print method had two arguments one was a directory the other",
    "start": "2796559",
    "end": "2804160"
  },
  {
    "text": "one was a printer location and so what I could do is you you come to Mike's bad website I could instantiate this control",
    "start": "2804160",
    "end": "2810599"
  },
  {
    "text": "you may not know about it depending on your security policy and I can print the contents of your my documents directory",
    "start": "2810599",
    "end": "2817000"
  },
  {
    "text": "on my printer across the internet so the first question is you can't do that you can't print across the",
    "start": "2817000",
    "end": "2823359"
  },
  {
    "text": "internet of course you can internet printing protocol built into the product you bet and so that's an example of",
    "start": "2823359",
    "end": "2829200"
  },
  {
    "text": "something that's not safe to be scripted as it turned out that method wasn't even needed it was there for debugging that",
    "start": "2829200",
    "end": "2834880"
  },
  {
    "text": "someone accidentally left in and so it just got pulled all together uh a couple of other examples I was asked to review",
    "start": "2834880",
    "end": "2840760"
  },
  {
    "text": "some um three active X controls actually about this time last year they're going to be shipping out a band of any Windows",
    "start": "2840760",
    "end": "2846599"
  },
  {
    "text": "product there's three activx controls and it was asked you know were they safe for scripting and it was really easy no",
    "start": "2846599",
    "end": "2852680"
  },
  {
    "text": "no no it was real simple and and the reason was the first one allowed you to manipulate digital images directly on on",
    "start": "2852680",
    "end": "2859640"
  },
  {
    "text": "a digital camera problem is that also included deleting images on the digital",
    "start": "2859640",
    "end": "2864839"
  },
  {
    "text": "camera so you could like hook up you know your digital camera with your 1 gig Micro Drive after coming back from your",
    "start": "2864839",
    "end": "2870520"
  },
  {
    "text": "vacation in the poll which you're never going to go back to ever you come to Mike's bad website I instantiate the",
    "start": "2870520",
    "end": "2876040"
  },
  {
    "text": "control and delete all the pictures on your camera by the way I can enumerate all the camera connections as well and",
    "start": "2876040",
    "end": "2881880"
  },
  {
    "text": "just walk through them all and delete them all with with no knowledge of what the cameras are not safe for scripting",
    "start": "2881880",
    "end": "2887680"
  },
  {
    "text": "another example was a control that um controlled uh webcams and once again I could actually",
    "start": "2887680",
    "end": "2894800"
  },
  {
    "text": "enumerate all the webcams connected to the machine and turn them all off so those are examples of controls that are",
    "start": "2894800",
    "end": "2900440"
  },
  {
    "text": "just not safe for scripting so the reason why these are issues is because you can actually",
    "start": "2900440",
    "end": "2907079"
  },
  {
    "text": "repurpose an ActiveX control you could have an ActiveX control that comes from a specific website or Is on the box but",
    "start": "2907079",
    "end": "2912599"
  },
  {
    "text": "another website can call that ActiveX control now you can bind an ActiveX",
    "start": "2912599",
    "end": "2917720"
  },
  {
    "text": "control to a website in other words I will only do funky stuff if the request",
    "start": "2917720",
    "end": "2922800"
  },
  {
    "text": "came from my website uh there are ways around that I'll I'll sort of get onto some of those uh in a moment but uh",
    "start": "2922800",
    "end": "2930640"
  },
  {
    "text": "We've basically outlawed new functionality except in ex exceptional circumstances as controls in fact I had",
    "start": "2930640",
    "end": "2938280"
  },
  {
    "text": "a conversation uh about this time last week with some people in the pki division and there's some functionality",
    "start": "2938280",
    "end": "2944359"
  },
  {
    "text": "they want to expose they done pretty sensitive stuff on the client and they said should we write this as an active X",
    "start": "2944359",
    "end": "2950240"
  },
  {
    "text": "control uh well why are you even considering activ controll and say well we want backward compatibility to Windows",
    "start": "2950240",
    "end": "2956079"
  },
  {
    "text": "95 it's like how much do you really want that backward compatibility to Windows 95 and they said well not really it's",
    "start": "2956079",
    "end": "2963160"
  },
  {
    "text": "not a big issue so how sensitive is the data you're dealing with and they said it's extremely sensitive so so are you",
    "start": "2963160",
    "end": "2969880"
  },
  {
    "text": "willing to compromise a future version of the OS where things are going to get better for the sake of just running this",
    "start": "2969880",
    "end": "2975839"
  },
  {
    "text": "stuff on Windows 95 and they said no there was a 30- second conversation uh the whole thing is going",
    "start": "2975839",
    "end": "2982400"
  },
  {
    "text": "to be written in manage code not in as a a C++ activat control uh that way it's",
    "start": "2982400",
    "end": "2987680"
  },
  {
    "text": "it's less Poss the chance of them making a mistake is greatly",
    "start": "2987680",
    "end": "2992760"
  },
  {
    "text": "reduced so talks about some of the web application issues and then we'll finally WRA it up but Dave's already",
    "start": "2992760",
    "end": "2998480"
  },
  {
    "text": "alluded to this and I'm going to say it again and you know what if your neighbors awake sorry your neighbors",
    "start": "2998480",
    "end": "3004440"
  },
  {
    "text": "asleep nudge him wake him up I'm going to tell you one thing I going tell you one thing only you can either go back to",
    "start": "3004440",
    "end": "3010520"
  },
  {
    "text": "sleep or leave after that quite frankly this is probably the single most",
    "start": "3010520",
    "end": "3016079"
  },
  {
    "text": "important thing that developers need to understand and that is the all input is evil and still proven otherwise because",
    "start": "3016079",
    "end": "3023400"
  },
  {
    "text": "good guys always give you good stuff bad guys don't if you look at the slammer worm one of",
    "start": "3023400",
    "end": "3029720"
  },
  {
    "text": "the issues there was the fact there was this UDP packet the first bites of the UDP packet can be treated like as a verb",
    "start": "3029720",
    "end": "3035520"
  },
  {
    "text": "and then the rest of the payload is the data that's associated like the noun that's associated with that verb well it",
    "start": "3035520",
    "end": "3041720"
  },
  {
    "text": "turns out that that value is number four it means give me some information about an instance of SQL server and the rest",
    "start": "3041720",
    "end": "3047880"
  },
  {
    "text": "of the data was the registry key to open and so what happened inside of the",
    "start": "3047880",
    "end": "3054240"
  },
  {
    "text": "uh the ssrp code is there were buildup this string because normally the only",
    "start": "3054240",
    "end": "3060720"
  },
  {
    "text": "bit of code that would hand off a packet like that came from the SQL Server team from a client code some client code",
    "start": "3060720",
    "end": "3067920"
  },
  {
    "text": "that's written by the same guys that wrote the server it was always well formed attackers don't use ssrp doc",
    "start": "3067920",
    "end": "3077400"
  },
  {
    "text": "which is where the buffer overun occur they don't use that they write their little pear script as David so",
    "start": "3077400",
    "end": "3083240"
  },
  {
    "text": "eloquently showed they bypass a client all together and so don't trust the data",
    "start": "3083240",
    "end": "3088720"
  },
  {
    "text": "because you have a client app because bad guys don't use your client app they go underneath the radar and if you're",
    "start": "3088720",
    "end": "3095559"
  },
  {
    "text": "look at about any security issue not any I mean there's information disclosure attacks where you can view sensitive",
    "start": "3095559",
    "end": "3101400"
  },
  {
    "text": "data they don't really count but things like buffer overruns why did buffer overruns happen because you expected",
    "start": "3101400",
    "end": "3106880"
  },
  {
    "text": "this and got this that's all it is it's an input trust issue why do canonicalization problems happen I'll",
    "start": "3106880",
    "end": "3113119"
  },
  {
    "text": "explain what they are in a moment cross scripting issues SQL injection attacks they're all because you expected",
    "start": "3113119",
    "end": "3118599"
  },
  {
    "text": "something well formed and someone gave you something different and you never expected it so I'm not kidding you know",
    "start": "3118599",
    "end": "3125720"
  },
  {
    "text": "what you can get up and leave now if you promise that all your code from now on",
    "start": "3125720",
    "end": "3130960"
  },
  {
    "text": "will never trust one bite that comes into the system you can leave I don't give a crap just that one little lesson",
    "start": "3130960",
    "end": "3138079"
  },
  {
    "text": "I truly believe that developers take that one lesson and take it to heart we'll have solved about every problem go",
    "start": "3138079",
    "end": "3144799"
  },
  {
    "text": "out there sure we have a bucketload of other issues but we'll worry about those later we just solve that one issue we'll",
    "start": "3144799",
    "end": "3151240"
  },
  {
    "text": "have solved so many problems I'm dead serious all right off off the soap box",
    "start": "3151240",
    "end": "3158480"
  },
  {
    "text": "for a minute so canonicalization problems never make a decision based on the name of something because there's",
    "start": "3158480",
    "end": "3165040"
  },
  {
    "text": "often more than one way of correctly naming a file or a",
    "start": "3165040",
    "end": "3170280"
  },
  {
    "text": "resource and the thing is if you look for something you say well if I see this I'm not going to allow it what happens",
    "start": "3170280",
    "end": "3175400"
  },
  {
    "text": "if there's an alternate way of naming it which is still valid and here's just some examples I give web examples but",
    "start": "3175400",
    "end": "3180920"
  },
  {
    "text": "these don't have to be web examples at all um I make a request for default. ASP",
    "start": "3180920",
    "end": "3186040"
  },
  {
    "text": "dot so let's say for example I got a file that says some code that says well someone makes a request for default. ASP",
    "start": "3186040",
    "end": "3191400"
  },
  {
    "text": "and the name is Michael I'm not going to allow them access so what I do is I make a request for default.asp DOT and when",
    "start": "3191400",
    "end": "3198440"
  },
  {
    "text": "whatever the app is passes that request on to create file and create file says oh the OS says or file system says that",
    "start": "3198440",
    "end": "3204079"
  },
  {
    "text": "that dot shouldn't be there strips It Off I now have access to default.asp the irony of the second one",
    "start": "3204079",
    "end": "3211240"
  },
  {
    "text": "um is it only happens on our secure file system NTFS uh so upgrade to Fat no",
    "start": "3211240",
    "end": "3218119"
  },
  {
    "text": "kiding um but what this is is and the example here this was found a long long time ago in IIs but I has these or had",
    "start": "3218119",
    "end": "3226599"
  },
  {
    "text": "doesn't have it anymore has well has a default case but doesn't have that default case anymore if it see a request",
    "start": "3226599",
    "end": "3232400"
  },
  {
    "text": "for a file oh it's a ASP file or route it on to aspd there a request for a HTR",
    "start": "3232400",
    "end": "3238040"
  },
  {
    "text": "file or rep it onto ismd if it didn't know what it was it would route it onto",
    "start": "3238040",
    "end": "3243280"
  },
  {
    "text": "the default Handler which was just to pass it onto the file system what happens is if you request default ASP",
    "start": "3243280",
    "end": "3249440"
  },
  {
    "text": "col colon dollar data you're actually passing when it gets into NTFS NTFS is",
    "start": "3249440",
    "end": "3255319"
  },
  {
    "text": "Oh you mean the default data string colon No Name colon is the default data",
    "start": "3255319",
    "end": "3260400"
  },
  {
    "text": "stream and dollar data is the dollar data type you can actually type data streams it would return the source code",
    "start": "3260400",
    "end": "3266839"
  },
  {
    "text": "for the ASP file back to the attacker the um the one below it is",
    "start": "3266839",
    "end": "3272799"
  },
  {
    "text": "actually an overlong utfa escape for a backslash so dot dot percent C 1% 1 C is",
    "start": "3272799",
    "end": "3281640"
  },
  {
    "text": "actually a 2te representation of a backslash in utf8 but it's invalid the",
    "start": "3281640",
    "end": "3287200"
  },
  {
    "text": "canonical form of any of any byte representation in utf8 is the least number of bytes that can represent that",
    "start": "3287200",
    "end": "3293599"
  },
  {
    "text": "character and so a backs slash is less than 7f and it can be represented in one bite this is two bytes and what would",
    "start": "3293599",
    "end": "3301240"
  },
  {
    "text": "happen is I would see in that dubdub dub. f.com wax script so it thinks okay",
    "start": "3301240",
    "end": "3306640"
  },
  {
    "text": "I'm executing because the scripts directory is much as execute execute stuff which by the way I six no longer",
    "start": "3306640",
    "end": "3313040"
  },
  {
    "text": "does by default then see dot dot dot dot have no idea what that is so it thinks",
    "start": "3313040",
    "end": "3319240"
  },
  {
    "text": "it's a subdirect underneath uh underneath scripts but it's not but it still thinks it's executing",
    "start": "3319240",
    "end": "3325760"
  },
  {
    "text": "because there's no dire Dory there a bit further on I would then clean it up and say oh that's a backlash but it's not",
    "start": "3325760",
    "end": "3332200"
  },
  {
    "text": "it's actually an invalid character it's over long escape and they put the backslash in which was the mistake it",
    "start": "3332200",
    "end": "3337480"
  },
  {
    "text": "made but and then we actually would actually execute it the problem is you're in the scripts directory Mark",
    "start": "3337480",
    "end": "3342880"
  },
  {
    "text": "execute walking out of the script's directory then down into say win system 32 tftp doxe or something like that it",
    "start": "3342880",
    "end": "3350880"
  },
  {
    "text": "would execute it the reason why the next two are interesting is is because of",
    "start": "3350880",
    "end": "3357839"
  },
  {
    "text": "functionality that's exported by urlm urlm exports these things called zones and the most common um uh consumer of",
    "start": "3357839",
    "end": "3366200"
  },
  {
    "text": "zones is is IE by far and there's five zones there my computer internet internet trusted and untrusted and what",
    "start": "3366200",
    "end": "3373599"
  },
  {
    "text": "happens is there's a little heuristic that Ur urlm used to use which was if it",
    "start": "3373599",
    "end": "3379760"
  },
  {
    "text": "saw no dots in the name then it must be a net bias name net bias can't be routed",
    "start": "3379760",
    "end": "3386880"
  },
  {
    "text": "therefore it must be behind the firewall therefore it must be in the internet",
    "start": "3386880",
    "end": "3392599"
  },
  {
    "text": "Zone well the first one which is all those numbers is actually a decim a",
    "start": "3392599",
    "end": "3398160"
  },
  {
    "text": "dotless decimal IP address where you take the first octet multiply by two to 24th second octet 2 to the 16th third",
    "start": "3398160",
    "end": "3405240"
  },
  {
    "text": "octet 2 to the 8th throw in the fourth octet for good measure add them all up that's your dotless decimal IP address",
    "start": "3405240",
    "end": "3411280"
  },
  {
    "text": "has no has no dots in its name but that could be the IP address for Mike's bad website on the internet so what it does",
    "start": "3411280",
    "end": "3418599"
  },
  {
    "text": "it puts you in the intranet Zone which will probably have a less strict security policy than the internet Zone",
    "start": "3418599",
    "end": "3426119"
  },
  {
    "text": "and stuff may work in the internet Zone even though this website is on the internet and the last one is is just",
    "start": "3426119",
    "end": "3432839"
  },
  {
    "text": "stupid um there's no dots in that name right yeah right percent to is just an",
    "start": "3432839",
    "end": "3438000"
  },
  {
    "text": "escape dot I've actually seen someone say luckily once again not inside",
    "start": "3438000",
    "end": "3443280"
  },
  {
    "text": "Microsoft otherwise we would have had a little chat with that person where they said what we'll do is when we",
    "start": "3443280",
    "end": "3448480"
  },
  {
    "text": "get these requests um we'll just we'll just unescape them and that's fine and then we'll see you know these dubdub",
    "start": "3448480",
    "end": "3455079"
  },
  {
    "text": "dubbad code.com well it turns out you can escape escapes so you could have",
    "start": "3455079",
    "end": "3460520"
  },
  {
    "text": "percent 2f to e and percent 2 f is actually an escape",
    "start": "3460520",
    "end": "3465720"
  },
  {
    "text": "percent and so if you do one level R Escape you still got a percent 2 e left the",
    "start": "3465720",
    "end": "3471559"
  },
  {
    "text": "dot the sad part is you can escape escapes escapes escapes so this guy actually proposed once again in the news",
    "start": "3471559",
    "end": "3477400"
  },
  {
    "text": "group that what he would do is write some code that Span in a loop unescaping until there's no Escape characters left",
    "start": "3477400",
    "end": "3483760"
  },
  {
    "text": "so what's an attack are going to do send a bajillion requests that are a few thousand bytes long where it's an N",
    "start": "3483760",
    "end": "3490559"
  },
  {
    "text": "level nested um bunch of escapes and now the app just spends all its time",
    "start": "3490559",
    "end": "3495799"
  },
  {
    "text": "spinning in a loop on escaping denial of service URL scan which is a nice EP",
    "start": "3495799",
    "end": "3501680"
  },
  {
    "text": "filter that sits in front of I will do one level by default will do one level un escaping and if it sees Escape",
    "start": "3501680",
    "end": "3508520"
  },
  {
    "text": "characters left four I think it just does a 404 doesn't even bother going any",
    "start": "3508520",
    "end": "3515200"
  },
  {
    "text": "further so the other reason so the whole point here is not making decision",
    "start": "3515440",
    "end": "3520799"
  },
  {
    "text": "decisions based on the name of something because you will get it wrong and you",
    "start": "3520799",
    "end": "3525839"
  },
  {
    "text": "know what when you think you know all the right things along com something else to prove you're wrong so how many",
    "start": "3525839",
    "end": "3531720"
  },
  {
    "text": "of you are even aware that don't work for Microsoft how many of you are aware of the Turkish eye problem",
    "start": "3531720",
    "end": "3537799"
  },
  {
    "text": "all right you're going to learn something then so it turns out that Turkish has four letter eyes how many of",
    "start": "3537799",
    "end": "3543359"
  },
  {
    "text": "you knew that one I I I actually knew it beforehand because it's actually in the Chicago",
    "start": "3543359",
    "end": "3549400"
  },
  {
    "text": "book of style not as a security issue they don't have security vulnerabilities in there but it turns out they actually",
    "start": "3549400",
    "end": "3555760"
  },
  {
    "text": "had mentioned in the Chicago book of sty there are four letter i in Turkish so if you take a lowercase eye with a DOT and",
    "start": "3555760",
    "end": "3562839"
  },
  {
    "text": "uppercase it in the Turkish local you'll get the one that's in from just one in from",
    "start": "3562839",
    "end": "3568200"
  },
  {
    "text": "the the right you'll get an uppercase eye with a DOT above it and if you take a normal sort of um Latin uppercase eye",
    "start": "3568200",
    "end": "3576720"
  },
  {
    "text": "without the dot and lowercase it you'll get the second eye which is like a lowercase eye but with no",
    "start": "3576720",
    "end": "3583240"
  },
  {
    "text": "Dot and so in the Turkish local uppercase F I L E does not equal F funny",
    "start": "3583240",
    "end": "3590160"
  },
  {
    "text": "looking i l e they're totally different strengths so let's look at this code oh",
    "start": "3590160",
    "end": "3595799"
  },
  {
    "text": "by the way that's what it looks like an eye with a little dot above it big eye with a DOT above it so this is actually some code that was found in the",
    "start": "3595799",
    "end": "3602400"
  },
  {
    "text": "framework The NET Framework uh quite a while before we shipped and someone started thinking",
    "start": "3602400",
    "end": "3608400"
  },
  {
    "text": "about different locals and colonization issues and there's some code that looks a little bit like this which is",
    "start": "3608400",
    "end": "3615000"
  },
  {
    "text": "basically someone makes a we're never going to allow someone to do a file request file call and whack whack so if",
    "start": "3615000",
    "end": "3620039"
  },
  {
    "text": "we see someone making a file request we're going to reject it there's actually a little lesson to be learn from that which I'll come once in a",
    "start": "3620039",
    "end": "3626319"
  },
  {
    "text": "minute so what they do is the upper caser and if you see the word file then n you can't do it well in the Turkish",
    "start": "3626319",
    "end": "3632319"
  },
  {
    "text": "local if someone makes a request for lowercase f lowercase i with a DOT above it lowercase L lowercase e and uppercase",
    "start": "3632319",
    "end": "3640280"
  },
  {
    "text": "it you end up with this over here that",
    "start": "3640280",
    "end": "3645599"
  },
  {
    "text": "is not the same as file without the dots above it and so the string compare doesn't",
    "start": "3645599",
    "end": "3652520"
  },
  {
    "text": "doesn't compute so now I have access to get stuff using the original URL which",
    "start": "3652520",
    "end": "3658039"
  },
  {
    "text": "is lowercase f lowercase i lowercase L lowercase e all because you're in the Turkish",
    "start": "3658039",
    "end": "3665280"
  },
  {
    "text": "local well there's actually another little meta rule here which is never go",
    "start": "3665280",
    "end": "3670640"
  },
  {
    "text": "looking for bad things because it assumes you know all the bad things so",
    "start": "3670640",
    "end": "3676440"
  },
  {
    "text": "when we spoke to these guys so what what do you really want to what do you really mean by don't allow file we say well",
    "start": "3676440",
    "end": "3682119"
  },
  {
    "text": "really what we mean is only allow http well why don't you do that",
    "start": "3682119",
    "end": "3688400"
  },
  {
    "text": "instead because if you look for just HTTP and nothing else if you don't see some if you don't let's say in the",
    "start": "3688400",
    "end": "3695839"
  },
  {
    "text": "Albanian local it turns out there's a funky H well if you don't see HTTP after",
    "start": "3695839",
    "end": "3702799"
  },
  {
    "text": "doing a an upper case of HTTP you're going to get a problem in the Albanian",
    "start": "3702799",
    "end": "3707920"
  },
  {
    "text": "local which you know what it's going to annoy a couple of people in Albania but there a lot better to annoy a couple of people in Albania than have the whole of",
    "start": "3707920",
    "end": "3714559"
  },
  {
    "text": "turkey compromised depending on your politics so the lesson here is when",
    "start": "3714559",
    "end": "3720920"
  },
  {
    "text": "you're doing when you're looking for things don't go looking for bad things oh if I see a request and it's got some",
    "start": "3720920",
    "end": "3726680"
  },
  {
    "text": "bad thing I'm going to reject the request because that assumes you know all the bad things from now until eternity and you know what no one is",
    "start": "3726680",
    "end": "3734200"
  },
  {
    "text": "that clever no one even thought about the Turkish eye problem and all of a sudden becomes a real vulnerability okay",
    "start": "3734200",
    "end": "3740760"
  },
  {
    "text": "it only affects the Turkish but it becomes a real problem and how many do we know if there there any other ones like this there probably are that don't",
    "start": "3740760",
    "end": "3747640"
  },
  {
    "text": "rely to don't rely on locals and may rely on other things we don't know so you should only have a look for what you",
    "start": "3747640",
    "end": "3753640"
  },
  {
    "text": "expect if you don't see what you expect reject the request the worst you going to do is annoy a couple of people it's",
    "start": "3753640",
    "end": "3759720"
  },
  {
    "text": "certain a lot better to have someone phone you up saying I'm annoyed versus a million people phoning you up saying you",
    "start": "3759720",
    "end": "3764839"
  },
  {
    "text": "I've been hacked it's a lot better to have the former I'm not going to spend much time",
    "start": "3764839",
    "end": "3770680"
  },
  {
    "text": "on cross-site scripting issues I assume you all basically know what they are but the the the sort of the Core lesson here",
    "start": "3770680",
    "end": "3779839"
  },
  {
    "text": "is not the fact that script runs in a browser it's not the fact that the server sends some data back to the client when it shouldn't do that's",
    "start": "3779839",
    "end": "3786160"
  },
  {
    "text": "interpreted as data but it's actually code the real issue is trusting input",
    "start": "3786160",
    "end": "3793440"
  },
  {
    "text": "again so you know here's some classic code you know response. write request. query string or you know whatever some",
    "start": "3793680",
    "end": "3801000"
  },
  {
    "text": "so something some data that comes from the client is just echoed back into the into the client into some other client's",
    "start": "3801000",
    "end": "3807000"
  },
  {
    "text": "browser so this is an example of a little web page you can hardly read and it just takes someone's name as in the",
    "start": "3807000",
    "end": "3812920"
  },
  {
    "text": "query string and Echoes it back and the assumption is it's always somebody's valid name well what happens and and the",
    "start": "3812920",
    "end": "3820440"
  },
  {
    "text": "rest of the bodies always escapes you can't read it but it's like name equals and it's some JavaScript in",
    "start": "3820440",
    "end": "3825960"
  },
  {
    "text": "HTML so the web page Echoes that back because it thinks it's someone's name but it's not it's JavaScript and HTML",
    "start": "3825960",
    "end": "3832440"
  },
  {
    "text": "and executes it and in this case it can actually steal someone's cookie you may think well whoops you do who",
    "start": "3832440",
    "end": "3837799"
  },
  {
    "text": "cares you'd be amazed how many banks store the user's password in a cookie so",
    "start": "3837799",
    "end": "3842880"
  },
  {
    "text": "if I can steal that cookie I now have your password and that could be really nasty you start moving funds",
    "start": "3842880",
    "end": "3850880"
  },
  {
    "text": "around the next one SQL injection attacks and I assume you all kind of know SQL injection attacks",
    "start": "3851839",
    "end": "3858480"
  },
  {
    "text": "but the issue here is trusting input again I'll explain why in a minute I",
    "start": "3858480",
    "end": "3864200"
  },
  {
    "text": "wrote this in C and the reason why I wrote wrot this in C because I originally wrote this in C++ I actually don't know VB very well so I originally",
    "start": "3864200",
    "end": "3870000"
  },
  {
    "text": "wrote this in C++ and I was calling to olb and uh someone told me you know what",
    "start": "3870000",
    "end": "3876279"
  },
  {
    "text": "as soon as the manage code stuff ships and c ships and bb.net ships you security gu is going to be out of out of",
    "start": "3876279",
    "end": "3881720"
  },
  {
    "text": "business I'm like great why said well all the security problems go away which",
    "start": "3881720",
    "end": "3887520"
  },
  {
    "text": "just made me write it in C to make a point which is the problems don't go away uh you still got to think about",
    "start": "3887520",
    "end": "3893200"
  },
  {
    "text": "this stuff so there's a whole bucket load of vulnerabilities in here I'll explain some of them very quickly first",
    "start": "3893200",
    "end": "3898319"
  },
  {
    "text": "one is we connecting his sa back to SQL server s admin account I'll explain why that's a bad thing shortly next we're",
    "start": "3898319",
    "end": "3903680"
  },
  {
    "text": "embedding a really hard to guess password in the code you know don't embed secrets in code next we using",
    "start": "3903680",
    "end": "3909839"
  },
  {
    "text": "string concatenation to build up a SQL statement and uh you'll see why it's bad in a moment and last but by no means",
    "start": "3909839",
    "end": "3916039"
  },
  {
    "text": "least if there is an error uh this code tells you exactly why this whole thing",
    "start": "3916039",
    "end": "3921920"
  },
  {
    "text": "failed which gives you attack a lot of information there's actually a fifth bug in here here and that is that if this",
    "start": "3921920",
    "end": "3928079"
  },
  {
    "text": "connection is opened an exception is raised the connection is not closed back to SQL Server eventually is closed but",
    "start": "3928079",
    "end": "3934920"
  },
  {
    "text": "if I could do a thousand of these connections I may have a thousand zombie connections back to SQL server and the",
    "start": "3934920",
    "end": "3940160"
  },
  {
    "text": "fix there is have a finally clause which always closes the connection down on success or on failure so why string",
    "start": "3940160",
    "end": "3946480"
  },
  {
    "text": "concatenation is wrong I'm want to assume you kind of know this stuff but I'll go through it real quick you got a shipping ID type in one the good guy",
    "start": "3946480",
    "end": "3953000"
  },
  {
    "text": "types in 101 it builds up a SQL statement select has shipped from from detail Ral 101 says yeah it's shipped no",
    "start": "3953000",
    "end": "3960359"
  },
  {
    "text": "it hasn't bad guys don't do that the typeing 101 single quote or 1al 1--",
    "start": "3960359",
    "end": "3967160"
  },
  {
    "text": "which changes the the SQL statement so 1 equals 1 is true for every Row in the",
    "start": "3967160",
    "end": "3972640"
  },
  {
    "text": "table and now you've got the shipping ID for everyone's shipping stat uh shipping uh item you may think well who cares",
    "start": "3972640",
    "end": "3980000"
  },
  {
    "text": "when we presented this to Bill he immediately jumped on this and said oh Select Credit Card information from",
    "start": "3980000",
    "end": "3986839"
  },
  {
    "text": "customer where credit card number equals whatever or one equals one now you got everyone's credit card information and",
    "start": "3986839",
    "end": "3993799"
  },
  {
    "text": "the Das Dash Operator just a comment operator makes it really easy to build a valid SQL",
    "start": "3993799",
    "end": "3999200"
  },
  {
    "text": "statement then of course you can concatenate SQL statements so they can actually select some data and then go",
    "start": "3999200",
    "end": "4005039"
  },
  {
    "text": "and delete the orders table I actually know of a website and it was actually running a pearl based Commerce app that",
    "start": "4005039",
    "end": "4012520"
  },
  {
    "text": "was homegrown and they actually had a SE injection attack and they were selling cars you could actually go",
    "start": "4012520",
    "end": "4019760"
  },
  {
    "text": "in and let's assume they were selling Ferraris you could go in you can actually change the price of a Ferrari",
    "start": "4019760",
    "end": "4026400"
  },
  {
    "text": "to $100 log off come back in again buy it for $100 the only downside is you have",
    "start": "4026400",
    "end": "4032240"
  },
  {
    "text": "to pay the full shipping cost come back in again change the price to back to what it was because no one",
    "start": "4032240",
    "end": "4039200"
  },
  {
    "text": "ever looks at the audit logs anyway and you got yourself a Ferrari for like you know $111,000 or something because the",
    "start": "4039200",
    "end": "4045680"
  },
  {
    "text": "shipping costs were fairly expensive I can live with that um so SQL injection attacks are",
    "start": "4045680",
    "end": "4051640"
  },
  {
    "text": "pretty serious and the last one and you know by no means least is uh you can call really",
    "start": "4051640",
    "end": "4058440"
  },
  {
    "text": "serious stuff at the back end so the first question you probably asking yourself say hold on a minute deleting",
    "start": "4058440",
    "end": "4064400"
  },
  {
    "text": "tables and calling these extended store procedures you know not everyone can do that so why can an attacker call",
    "start": "4064400",
    "end": "4072400"
  },
  {
    "text": "those because you're connecting his sa from this web code back to the database",
    "start": "4072400",
    "end": "4078160"
  },
  {
    "text": "so which principle does that defeat the principle of lease privilege you don't need to be sa to querious",
    "start": "4078160",
    "end": "4085160"
  },
  {
    "text": "thinking database you need to be sa if you're doing funky stuff to the database or",
    "start": "4085160",
    "end": "4090319"
  },
  {
    "text": "attacking it I'll grant you that but just to query a bunch of tables no like",
    "start": "4090319",
    "end": "4095920"
  },
  {
    "text": "I have a a database that I have at work that keeps track of a whole bunch of vulnerability statistics I have a web an",
    "start": "4095920",
    "end": "4101040"
  },
  {
    "text": "asp.net application in front of it and it connects back to SQL Server as one specific account that data is held in",
    "start": "4101040",
    "end": "4107838"
  },
  {
    "text": "the registry it's not held within the web space that account can query three",
    "start": "4107839",
    "end": "4113679"
  },
  {
    "text": "tables and execute 20 store procedures nothing else you know what if",
    "start": "4113679",
    "end": "4119278"
  },
  {
    "text": "you want the password for it I'll give you the password because there's nothing else you can do and so any connection",
    "start": "4119279",
    "end": "4124960"
  },
  {
    "text": "that's done through this web service can can only query three tables and call 20",
    "start": "4124960",
    "end": "4130199"
  },
  {
    "text": "store procedures nothing else the only reason people connect from a web server",
    "start": "4130199",
    "end": "4136040"
  },
  {
    "text": "or any code back to SQL server or any database as a sis admin account is because they're so damn lazy they don't",
    "start": "4136040",
    "end": "4142120"
  },
  {
    "text": "want to handle the access denied cases the problem is if your code is not handling the access denied cases then",
    "start": "4142120",
    "end": "4148440"
  },
  {
    "text": "chance are very good that the malicious code will never get an access denied error error either so the next one is",
    "start": "4148440",
    "end": "4155278"
  },
  {
    "text": "how does your attacker know to type 10,1 single quote blah blah blah because if",
    "start": "4155279",
    "end": "4161238"
  },
  {
    "text": "you type in something that builds up an invalid SQL statement the exception handling code says this sequel statement's wrong oh I need to move the",
    "start": "4161239",
    "end": "4168440"
  },
  {
    "text": "single quote from there to there it's like hacking by numbers in fact it's quite funny when I",
    "start": "4168440",
    "end": "4174159"
  },
  {
    "text": "actually presented this to the SQL Server team they actually don't like me is James here he left he left oh great Okay cool",
    "start": "4174159",
    "end": "4181480"
  },
  {
    "text": "so James left that's great I can tell you the story James is the one of the Architects on SQL Server he doesn't like me telling this story so when I",
    "start": "4181480",
    "end": "4188040"
  },
  {
    "text": "presented this to SQL server and uh there was actually a typo in this I actually left out the word exec before",
    "start": "4188040",
    "end": "4194159"
  },
  {
    "text": "xpor command shell and you can imagine in front of a few hundred people there took great Delight in telling me that I",
    "start": "4194159",
    "end": "4200400"
  },
  {
    "text": "sucked because the exploit didn't work because I left out the exec so I actually had the exploit code on my",
    "start": "4200400",
    "end": "4206440"
  },
  {
    "text": "machine so I tested it out without the exec the error message that came back literally was haha you suck you missed",
    "start": "4206440",
    "end": "4212560"
  },
  {
    "text": "out the exec so like it's hacking by numbers you know it's like just let let the database tell you how to what to do",
    "start": "4212560",
    "end": "4220159"
  },
  {
    "text": "next so anyway the points are even if you don't build webhouse even if you don't build SQL Server apps or database",
    "start": "4220159",
    "end": "4226480"
  },
  {
    "text": "apps in general the ultimate lesson here has got nothing to do whatsoever with",
    "start": "4226480",
    "end": "4232159"
  },
  {
    "text": "understanding how SQL injection attack work got nothing to do with understanding all this stuff what the ultimate lesson here is just don't trust",
    "start": "4232159",
    "end": "4238800"
  },
  {
    "text": "user data just don't if someone can give you stuff bad guys will give you bad",
    "start": "4238800",
    "end": "4244360"
  },
  {
    "text": "stuff and the moment you think it's always well formed is the day you're going to get whacked unfortunately that point it's too late and so here's an",
    "start": "4244360",
    "end": "4252199"
  },
  {
    "text": "example I mean validate for correctness and reject it if it's not correct as an",
    "start": "4252199",
    "end": "4257719"
  },
  {
    "text": "example if you take a social security number well the first question is why but let's assume you do unless you",
    "start": "4257719",
    "end": "4264000"
  },
  {
    "text": "ass you do you you do it for valid reasons there is one valid representation for a social security",
    "start": "4264000",
    "end": "4270120"
  },
  {
    "text": "number three digits a-2 digits or-4 digits nothing else if you got a for a field or some data that expects that you",
    "start": "4270120",
    "end": "4276920"
  },
  {
    "text": "look for that and if you don't see it you reject the request because there's no other valid representation for a",
    "start": "4276920",
    "end": "4282040"
  },
  {
    "text": "social security number don't go looking for bad things it assumes you know all the bad things and you don't no one does",
    "start": "4282040",
    "end": "4289600"
  },
  {
    "text": "no one is that clever um when he's transmitting um web data out not only should you validate it",
    "start": "4289600",
    "end": "4295760"
  },
  {
    "text": "on the way and make sure it's correct when it comes to Echo it back out you should seriously consider HTML encoding",
    "start": "4295760",
    "end": "4301000"
  },
  {
    "text": "or URL encoding the output depending on how the output is being used because that will actually NE to um the",
    "start": "4301000",
    "end": "4307440"
  },
  {
    "text": "JavaScript or HTML that's in the cross scripting attack however there are some attacks that do not require you to have",
    "start": "4307440",
    "end": "4315800"
  },
  {
    "text": "the tag symbols there's actually a number of tags that do not require you have the tag symbols in place so do not",
    "start": "4315800",
    "end": "4322320"
  },
  {
    "text": "think you take just any old junk and just HTML encode the output because there's some attacks that do not require",
    "start": "4322320",
    "end": "4328760"
  },
  {
    "text": "the tags examples are if you got a a tag where there's something that goes inside",
    "start": "4328760",
    "end": "4334960"
  },
  {
    "text": "the tag like some parameter in the tag and some data comes from the user then goes inside that tag you don't need",
    "start": "4334960",
    "end": "4342040"
  },
  {
    "text": "the tag symbols in fact if you do you got a problem and so even HTML or URL encoding",
    "start": "4342040",
    "end": "4347560"
  },
  {
    "text": "the output is not going to help you by the way something else to be aware of a lot of people say well why don't when I take a request for SQL Server why don't",
    "start": "4347560",
    "end": "4354360"
  },
  {
    "text": "I just double up all the quotes well I can actually send you a",
    "start": "4354360",
    "end": "4359400"
  },
  {
    "text": "hex string that has no quotes in it but every hex bite",
    "start": "4359400",
    "end": "4364800"
  },
  {
    "text": "represents the bite um car the character but as a hex string no quotes in that",
    "start": "4364800",
    "end": "4371880"
  },
  {
    "text": "it's another example of canonicalization where there's a valid representation of something else if you're using SQL",
    "start": "4371880",
    "end": "4378000"
  },
  {
    "text": "statements then use SQL placeholders as well parameterized queries as they're sometimes call and finally um compile",
    "start": "4378000",
    "end": "4383600"
  },
  {
    "text": "with the GS flag as David said you have crap code and you compile with GS it's still crap it's just taking a really",
    "start": "4383600",
    "end": "4389760"
  },
  {
    "text": "nasty situation and may just make it nasty it's just we look it as an insurance policy you use good apis you",
    "start": "4389760",
    "end": "4396760"
  },
  {
    "text": "review the code you test the crap out of the code and you compile with GS just in case you miss something that's what",
    "start": "4396760",
    "end": "4402920"
  },
  {
    "text": "we've done in Windows Server 2003 just about all the OS is compiled with that option by default just in",
    "start": "4402920",
    "end": "4410760"
  },
  {
    "text": "case all right I'm going to scream through this because we're basically done and that is this notion of data",
    "start": "4410760",
    "end": "4416400"
  },
  {
    "text": "mutation testing big problem right now is that most testers are goody two shoes testers they just want to prove that",
    "start": "4416400",
    "end": "4421600"
  },
  {
    "text": "something works as security testers we don't want to prove that something works we want to prove that something works in interesting ways if you know what I",
    "start": "4421600",
    "end": "4428320"
  },
  {
    "text": "mean so the notion the first notion here is you decompose the app that originally comes from the threat model then you",
    "start": "4428320",
    "end": "4434280"
  },
  {
    "text": "look at the interface into the app this is how attackers think ultimately and so if you test the same way you're going to",
    "start": "4434280",
    "end": "4439800"
  },
  {
    "text": "find issues then look at the input points look at the data structures that are being used and then then document the valid data structures once you've",
    "start": "4439800",
    "end": "4446960"
  },
  {
    "text": "done that start mutating the data this is like a a taxonomy of ways of mutating",
    "start": "4446960",
    "end": "4453639"
  },
  {
    "text": "the data so an example let's say your file you got an app that consumes a file so that's a container a container has a",
    "start": "4453639",
    "end": "4460679"
  },
  {
    "text": "name the file name to jump over to contents make the make the file name",
    "start": "4460679",
    "end": "4465719"
  },
  {
    "text": "make it long or change it length jump over to length make it too long make it too short make it zero length make it",
    "start": "4465719",
    "end": "4472560"
  },
  {
    "text": "random make it null make it zero back to the container again make it a link to something else um make it exist when it",
    "start": "4472560",
    "end": "4479920"
  },
  {
    "text": "shouldn't exist make it not exist when it should exist um deny access to the file all these kinds of things it's a",
    "start": "4479920",
    "end": "4486000"
  },
  {
    "text": "way of structurally thinking about how to build uh data that sort of lies and cheets an example real simple example of",
    "start": "4486000",
    "end": "4493320"
  },
  {
    "text": "a portion of an XML file and some of the things you can sort of lie and cheat about the only reason I made it an XML",
    "start": "4493320",
    "end": "4499199"
  },
  {
    "text": "file is apparently all Microsoft presentations have to have XML so this has got an XML file on it but this just",
    "start": "4499199",
    "end": "4505199"
  },
  {
    "text": "give you an idea of the sort of things you can look at and break it down to data structures and how can you lie and cheat about those particular data",
    "start": "4505199",
    "end": "4513119"
  },
  {
    "text": "structures so from a testing perspective and I you know flew through that because we're out of time",
    "start": "4513760",
    "end": "4519880"
  },
  {
    "text": "um in most organizations there's always someone who's just downright evil and",
    "start": "4519880",
    "end": "4525040"
  },
  {
    "text": "you should foster that person and make them a damn good security Tester the old",
    "start": "4525040",
    "end": "4530280"
  },
  {
    "text": "type of tester just doesn't cut it for security testing Pro you know reading the spec and proving that the stuff on",
    "start": "4530280",
    "end": "4536440"
  },
  {
    "text": "the spec represents what is in that code that's not what a security tester wants to do they want to see if they can find",
    "start": "4536440",
    "end": "4543360"
  },
  {
    "text": "other interesting bits of functionality and with that we are",
    "start": "4543360",
    "end": "4548679"
  },
  {
    "text": "basically done the summary just a repeat of uh the agenda and uh the stock price",
    "start": "4548679",
    "end": "4553920"
  },
  {
    "text": "sucks me David got to pay for the beer and so uh that's why a little commercial",
    "start": "4553920",
    "end": "4559320"
  },
  {
    "text": "for writing secure code in the second edition and uh with that we are done any",
    "start": "4559320",
    "end": "4568120"
  },
  {
    "text": "questions yeah yeah so first of all I want to",
    "start": "4568400",
    "end": "4574080"
  },
  {
    "text": "apologize we end up sorry I ended up making some changes to the slides uh",
    "start": "4574080",
    "end": "4580120"
  },
  {
    "text": "that are not in the handouts um so yeah we'll give them these to the black hatat people who can make make them available",
    "start": "4580120",
    "end": "4585360"
  },
  {
    "text": "on the website yeah but I apologize for the changes that were made but there were appropriate",
    "start": "4585360",
    "end": "4591639"
  },
  {
    "text": "changes anything else all right oh",
    "start": "4591639",
    "end": "4599760"
  },
  {
    "text": "yeah that that's a good question the question is how you know how how hard was it to get people to change the",
    "start": "4606120",
    "end": "4612360"
  },
  {
    "text": "mindset Dave has and I use this quote all the time and I think he's dead right",
    "start": "4612360",
    "end": "4619000"
  },
  {
    "text": "and that is that people want to do the right I think in general people want to do the right thing but sometimes you got",
    "start": "4619000",
    "end": "4625480"
  },
  {
    "text": "to show them what the right thing is the good thing is a whole bunch of people at Microsoft the the security education",
    "start": "4625480",
    "end": "4631400"
  },
  {
    "text": "that we put in place to to Foster this stuff was just a no-brainer and the reason is if you think about it windows",
    "start": "4631400",
    "end": "4637719"
  },
  {
    "text": "and Microsoft in general they love they're full of Geeks they love learning new things and when you give them this",
    "start": "4637719",
    "end": "4644000"
  },
  {
    "text": "time in the security pushes that we had to spend no time but spending sorry",
    "start": "4644000",
    "end": "4649159"
  },
  {
    "text": "spend time on nothing but security they just soaked it in and it was actually a",
    "start": "4649159",
    "end": "4654320"
  },
  {
    "text": "bit of a in fact the thing that worried us is the pendulum swung so far it's like hold on a minute temper that with",
    "start": "4654320",
    "end": "4660480"
  },
  {
    "text": "you know we actually we have to ship a product one day um you know let's just temper that with a bit of reality um so",
    "start": "4660480",
    "end": "4667120"
  },
  {
    "text": "if anything that actually went to the extreme um but in general I I have no I",
    "start": "4667120",
    "end": "4674159"
  },
  {
    "text": "had no problem problems at all with people understanding what the right thing is because all of a sudden they",
    "start": "4674159",
    "end": "4679920"
  },
  {
    "text": "recognized they were told what the right thing is and they recognize the right thing to do and they they just do it it was actually pretty cool because you",
    "start": "4679920",
    "end": "4686920"
  },
  {
    "text": "know once we started teaching people what a security screw up looked like now you've got tons and tons of Geeks with a",
    "start": "4686920",
    "end": "4693600"
  },
  {
    "text": "new thing to check out you know wow what is this okay well you know and they they",
    "start": "4693600",
    "end": "4698840"
  },
  {
    "text": "you know there was a huge Synergy that developed I mean they start working on it together and it's one of the reasons",
    "start": "4698840",
    "end": "4703920"
  },
  {
    "text": "why the second edition is twice as fat as the first edition because we got tons and tons of feedback and oh did you",
    "start": "4703920",
    "end": "4710639"
  },
  {
    "text": "think of this and well no I really thought of that well W that's interesting and um and it really kind of",
    "start": "4710639",
    "end": "4718080"
  },
  {
    "text": "um went from there so it's it's been a a fascinating thing to be uh you know to",
    "start": "4718080",
    "end": "4724159"
  },
  {
    "text": "be part of and um yeah and let's face it in today's world security really is a",
    "start": "4724159",
    "end": "4730280"
  },
  {
    "text": "feature you know if you can say well my stuff secure it's going to stay up no matter what what's thrown at and and",
    "start": "4730280",
    "end": "4736400"
  },
  {
    "text": "it's it's not going to turn around and bite you that's a that's a really nice",
    "start": "4736400",
    "end": "4742080"
  },
  {
    "text": "you know feature to uh to have because people do buy security I mean if you think about it um how many of you",
    "start": "4742080",
    "end": "4749120"
  },
  {
    "text": "replaced a car just because you know it's an old car and it doesn't have abs and you want a new car that does have",
    "start": "4749120",
    "end": "4755560"
  },
  {
    "text": "abs because you want your family to be safer yeah same thing with code I think",
    "start": "4755560",
    "end": "4761679"
  },
  {
    "text": "so uh yeah it's been a um it's been a really interesting experience the other",
    "start": "4761679",
    "end": "4767159"
  },
  {
    "text": "thing that we that we never expected was it amazing what happens when you take a bunch of people who are",
    "start": "4767159",
    "end": "4772560"
  },
  {
    "text": "not Security Experts but you got to realize that windows and all these product groups are full of people who are experts in their domain they",
    "start": "4772560",
    "end": "4778719"
  },
  {
    "text": "understand file systems U they understand internationalization issues and they and they know that stuff backwards then when you infuse them with",
    "start": "4778719",
    "end": "4785400"
  },
  {
    "text": "a bit of security expertise because they had to because it was all part of the security push we trading eight 8 and a",
    "start": "4785400",
    "end": "4790840"
  },
  {
    "text": "half thousand people in 10 days to make sure they understood what the issues were it was mandatory for everyone to attend then there's a lot of ongoing",
    "start": "4790840",
    "end": "4797719"
  },
  {
    "text": "training and people started thinking about this stuff they thought about their domain with this evil mindset and",
    "start": "4797719",
    "end": "4802840"
  },
  {
    "text": "the fact that stuff can't be trusted and the fact that there are threats to the system and the fact that if you build it attackers will come well they also",
    "start": "4802840",
    "end": "4810679"
  },
  {
    "text": "started writing things about well man my stuff whatever it is when it's exposed",
    "start": "4810679",
    "end": "4816320"
  },
  {
    "text": "to these security issues can have these kinds of problems and in fact one of the chapters in the second edition of the book is the internationalization issues",
    "start": "4816320",
    "end": "4822960"
  },
  {
    "text": "of security that from internationalization guys not from us because they wrote this document",
    "start": "4822960",
    "end": "4829600"
  },
  {
    "text": "which is like have you thought about all these issues when it's you all a sudden start taking you got a buffer this this",
    "start": "4829600",
    "end": "4834719"
  },
  {
    "text": "big the most simple of the lot you got a buffer this big and it fits an English string and then you convert that to",
    "start": "4834719",
    "end": "4841360"
  },
  {
    "text": "German the buff is not big enough all of a sudden that's just one of the most simple of the examples there's all sorts",
    "start": "4841360",
    "end": "4847320"
  },
  {
    "text": "of things they started thinking about that went that we never even thought about cuz we're not domain experts in internationalization but it was amazing",
    "start": "4847320",
    "end": "4854400"
  },
  {
    "text": "what was generated when all these domain experts started thinking about security it's just amazing then what happens is",
    "start": "4854400",
    "end": "4859480"
  },
  {
    "text": "they think about things they spread the information around everyone and that get some other evil bastard thinking about",
    "start": "4859480",
    "end": "4864679"
  },
  {
    "text": "something and all of a sudden you got all these you know issues that people never even thought about and that just",
    "start": "4864679",
    "end": "4870280"
  },
  {
    "text": "Cascade it I mean it was just unbelievable to watch the energy was unbelievable and if you're on a metric",
    "start": "4870280",
    "end": "4875360"
  },
  {
    "text": "people really want like metrics it used to take me 5 minutes to walk to the cafeteria and back now the height of the",
    "start": "4875360",
    "end": "4881840"
  },
  {
    "text": "security push it would take me an hour cuz everyone would stop to ask questions now it takes me about 40 only about 45",
    "start": "4881840",
    "end": "4887600"
  },
  {
    "text": "minutes the the cafeteria is literally 5 minutes away but everyone's stopping to ask questions and bounce ideas around",
    "start": "4887600",
    "end": "4893239"
  },
  {
    "text": "and and such the other thing that I've noticed is that the emails we get are no",
    "start": "4893239",
    "end": "4898719"
  },
  {
    "text": "longer stupid questions like what's a buffer overrun it's like I have this I",
    "start": "4898719",
    "end": "4903840"
  },
  {
    "text": "have these threats I have these conditions I have these restrictions that I need to be aware of application",
    "start": "4903840",
    "end": "4910239"
  },
  {
    "text": "compatibility internationalization robustness shipping on time all these other things that go into it it's like",
    "start": "4910239",
    "end": "4916560"
  },
  {
    "text": "what do you think as opposed to what's the buffal RO room it's like these are you know they're very very pointed",
    "start": "4916560",
    "end": "4921960"
  },
  {
    "text": "questions now from people that really understand what it takes to build secure",
    "start": "4921960",
    "end": "4927239"
  },
  {
    "text": "software which is hugely exciting to see one of the coolest things was during the",
    "start": "4927239",
    "end": "4932600"
  },
  {
    "text": "security audit I was one of the PO saps that got assigned to actually read code",
    "start": "4932600",
    "end": "4937800"
  },
  {
    "text": "and try and find bugs which um turned out to be quite difficult so it was you know go beat your head against the wall",
    "start": "4937800",
    "end": "4944360"
  },
  {
    "text": "for two weeks kind of assignment and um so I'd you know go find my favorite pet",
    "start": "4944360",
    "end": "4950440"
  },
  {
    "text": "peeves you know like not setting you know so exclusive add or Etc and so I go",
    "start": "4950440",
    "end": "4957920"
  },
  {
    "text": "and I find all the places in the code that call bind you know the whole Windows tree it's pretty big and um I'm",
    "start": "4957920",
    "end": "4964199"
  },
  {
    "text": "going through and Time After Time After Time it's like yep got to do this to do",
    "start": "4964199",
    "end": "4969520"
  },
  {
    "text": "it right book says so and you know seeing comments and the code B based on",
    "start": "4969520",
    "end": "4975080"
  },
  {
    "text": "you know something that I wrote in a book that actually fixed security problems on a widespread basis was very",
    "start": "4975080",
    "end": "4982080"
  },
  {
    "text": "very cool because it meant that you know we got to substantially improve the",
    "start": "4982080",
    "end": "4987120"
  },
  {
    "text": "quality of what we ship and that's that helps all the customers that that's really the bottom line so um it's been",
    "start": "4987120",
    "end": "4994280"
  },
  {
    "text": "uh uh yeah it's it's been an interesting experience it's also a little scary when the you know your book becomes required",
    "start": "4994280",
    "end": "5001120"
  },
  {
    "text": "reading for the whole Windows division try try and tell you know five th000 developers anything and uh it's amazing",
    "start": "5001120",
    "end": "5008199"
  },
  {
    "text": "they they uh yeah it wasn't as bad as we thought though it was uh we didn't get",
    "start": "5008199",
    "end": "5013880"
  },
  {
    "text": "that many people telling us that we you know didn't know certain things from Whole on the ground true so any other",
    "start": "5013880",
    "end": "5023039"
  },
  {
    "text": "questions thank you very much for your [Applause]",
    "start": "5023520",
    "end": "5032189"
  },
  {
    "text": "time",
    "start": "5033440",
    "end": "5036440"
  },
  {
    "text": "e",
    "start": "5063320",
    "end": "5066320"
  },
  {
    "text": "e",
    "start": "5093320",
    "end": "5096320"
  },
  {
    "text": "e e",
    "start": "5123320",
    "end": "5127320"
  }
]