[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "[Music]",
    "start": "910",
    "end": "9599"
  },
  {
    "text": "all right good afternoon everyone my name is chris doman i'm the cto and",
    "start": "9599",
    "end": "14799"
  },
  {
    "text": "co-founder of case security and before that i worked on alienvault's open threat exchange that you might have",
    "start": "14799",
    "end": "21119"
  },
  {
    "text": "seen before also another portal called threat crowd but before all that i used to work in instant response at pwc",
    "start": "21119",
    "end": "27599"
  },
  {
    "text": "working for this guy james thanks chris i'm this guy james",
    "start": "27599",
    "end": "33600"
  },
  {
    "text": "james campbell ceo and co-founder of kb security um long-time cyber response and",
    "start": "33600",
    "end": "39760"
  },
  {
    "text": "forensics buff and uh self-confessed nerd um i previously before cato i used",
    "start": "39760",
    "end": "45840"
  },
  {
    "text": "to run the cyber instant response team at pvc uk and before coming over to the uk i used",
    "start": "45840",
    "end": "52000"
  },
  {
    "text": "to run the ir side of things in australian government at the australian signals directorate",
    "start": "52000",
    "end": "59199"
  },
  {
    "text": "great so thanks for joining today so let's get into it so as per our website here's a",
    "start": "59199",
    "end": "64878"
  },
  {
    "start": "60000",
    "end": "345000"
  },
  {
    "text": "description of our presentation but i mean we know people don't like to read the whole thing so we've been nice here and",
    "start": "64879",
    "end": "72320"
  },
  {
    "text": "i've distilled this down into kind of some key messages here and some things that we're going to talk about today on the agenda",
    "start": "72320",
    "end": "78400"
  },
  {
    "text": "and really it's it's about a story um and a story about our interactions with",
    "start": "78400",
    "end": "83520"
  },
  {
    "text": "a hacker group known as team tnt um and a story around uh the compromise of",
    "start": "83520",
    "end": "89280"
  },
  {
    "text": "kubernetes systems particularly in cloud environments um there's also a little bit of a twist",
    "start": "89280",
    "end": "96079"
  },
  {
    "text": "with some weird gifts we've come across um and just for a bit of laughter as well which is great um but at the end",
    "start": "96079",
    "end": "103040"
  },
  {
    "text": "we're also gonna make sure that we've got some key take-homes for you um and some advice around actually protecting",
    "start": "103040",
    "end": "110079"
  },
  {
    "text": "yourself particularly when it comes to vulnerable kubernetes platforms",
    "start": "110079",
    "end": "115439"
  },
  {
    "text": "so over to chris to kind of start off the story uh for kd",
    "start": "115439",
    "end": "120479"
  },
  {
    "text": "yeah so this is how our story begins so one day i think back in august 2020 i",
    "start": "120479",
    "end": "128080"
  },
  {
    "text": "was looking at our usual field uh feed of malware coming through every day lots of stuff in there",
    "start": "128080",
    "end": "133760"
  },
  {
    "text": "and this one gonna caught my eye it's got a really cool logo on it you can see there it says team tnt",
    "start": "133760",
    "end": "139599"
  },
  {
    "text": "and at this point i didn't know what that meant no i hadn't really reported on them yet but digging in it looked",
    "start": "139599",
    "end": "144640"
  },
  {
    "text": "kind of interesting so this is what it was doing and this is",
    "start": "144640",
    "end": "150640"
  },
  {
    "text": "what really kind of got us interested so you can see here what the script is doing is it's taking the root aws",
    "start": "150640",
    "end": "157040"
  },
  {
    "text": "credentials file and it's sending off to the attacker server which is that url ending with the php script",
    "start": "157040",
    "end": "163280"
  },
  {
    "text": "and what that aws credential file can do is a ton of stuff actually so it contains your access key as you can see",
    "start": "163280",
    "end": "169440"
  },
  {
    "text": "here it contains your secret key and an attacker can take this they can sit at their laptop and if that credential has",
    "start": "169440",
    "end": "176480"
  },
  {
    "text": "access they can go and do things like download all the files and s3 they can start and stop ec2 instances so tons of",
    "start": "176480",
    "end": "183519"
  },
  {
    "text": "different things i can potentially do here and looking at the network peak app here which is what that script sends",
    "start": "183519",
    "end": "188959"
  },
  {
    "text": "over in red is what they're sent to the attacker server and then blue is what the attacker server sends back you can",
    "start": "188959",
    "end": "195920"
  },
  {
    "text": "see in response to that stolen data it just says thanks very nice to them",
    "start": "195920",
    "end": "202480"
  },
  {
    "text": "yeah it was very nice of them so i started looking around the server a little bit more i could see here that there are some",
    "start": "202480",
    "end": "207840"
  },
  {
    "text": "more files so there's an open directory i can see there's this php script which is stealing those credits there's also a",
    "start": "207840",
    "end": "213920"
  },
  {
    "text": "cube in as well which is still in kubernetes credentials something to talk about in a minute and there's some other",
    "start": "213920",
    "end": "219120"
  },
  {
    "text": "open directories too which is potentially quite interesting but the next folder i looked at had this",
    "start": "219120",
    "end": "226080"
  },
  {
    "text": "message instead don't even try a little new view so clearly these guys can protect their",
    "start": "226080",
    "end": "231440"
  },
  {
    "text": "servers a little bit stop you looking around next server had this stop it now quite a",
    "start": "231440",
    "end": "238400"
  },
  {
    "text": "clear directory uh directive on that folder i think at this point they definitely don't want you",
    "start": "238400",
    "end": "243760"
  },
  {
    "text": "looking around that's for sure yeah i don't know like that the research is poking their serve as much",
    "start": "243760",
    "end": "250720"
  },
  {
    "text": "and then just to kind of set the scene here this is around one in the morning i was looking at the server looking at this malware so i was sitting back in my",
    "start": "251120",
    "end": "257600"
  },
  {
    "text": "chair headphones full blast listening to music came across this instead says activate sound that plays anyway access",
    "start": "257600",
    "end": "264320"
  },
  {
    "text": "granted access denied access denied",
    "start": "264320",
    "end": "271600"
  },
  {
    "text": "access denied so i guess a pretty clear message that they didn't want people looking around",
    "start": "271600",
    "end": "277680"
  },
  {
    "text": "their server and then finally in the next folder on this um",
    "start": "277680",
    "end": "283520"
  },
  {
    "text": "i'm not even sure how to describe this one james he's high fiving himself but thank you for marketing on uh",
    "start": "283520",
    "end": "289520"
  },
  {
    "text": "putting in the box in there we really appreciate it we'll meet on this now",
    "start": "289520",
    "end": "295759"
  },
  {
    "text": "we'll move on quickly from this one yeah move on to that um so what we did next is what and you",
    "start": "295759",
    "end": "301759"
  },
  {
    "text": "could start to do is we wrote this up in the blog post so can i get this news out there",
    "start": "301759",
    "end": "307280"
  },
  {
    "text": "and we wrote this post in it we're talking about the malware we're talking about how it does that kind of aws",
    "start": "307680",
    "end": "312960"
  },
  {
    "text": "credit we're talking about earlier you can see here as well we include a screenshot of their home page because",
    "start": "312960",
    "end": "318160"
  },
  {
    "text": "these attackers team tnt do actually have their own official home page and at this point the home page has a quite",
    "start": "318160",
    "end": "324400"
  },
  {
    "text": "nice advice actually for victims it was saying things like here are some free sound boxes to analyze our malware with",
    "start": "324400",
    "end": "329840"
  },
  {
    "text": "here's some other kind of stuff you should know too and when we did publish this it got",
    "start": "329840",
    "end": "335759"
  },
  {
    "text": "quite a lot of attention because as we said before no one else has kind of covered this aws credit kind of method",
    "start": "335759",
    "end": "340880"
  },
  {
    "text": "particularly when it came to um worms doing it like this",
    "start": "340880",
    "end": "345440"
  },
  {
    "start": "345000",
    "end": "445000"
  },
  {
    "text": "but then the next day i think after you posted this we got this somewhat strange post uh comment on our blog post",
    "start": "346560",
    "end": "354240"
  },
  {
    "text": "yeah this one was interesting one you don't often get a situation where hackers actually send you a message um",
    "start": "354240",
    "end": "361680"
  },
  {
    "text": "and in this case we thought we'd share it because they actually were wondering whether or not we would um and i'll read",
    "start": "361680",
    "end": "367840"
  },
  {
    "text": "out a little bit for you so they said you're confusing yourself free your mind um by the way because of your posting",
    "start": "367840",
    "end": "374319"
  },
  {
    "text": "and a whole bunch of ascii text which obviously probably means that they were a bit frustrated by our post um",
    "start": "374319",
    "end": "381280"
  },
  {
    "text": "you know what you are doing here is advertising at the expense of others now i'm assuming others means attackers",
    "start": "381280",
    "end": "387440"
  },
  {
    "text": "because we had quite a lot of people actually thank us for their posts because help them find some malicious",
    "start": "387440",
    "end": "392479"
  },
  {
    "text": "activity on their kubernetes environments um but on a positive note it was really",
    "start": "392479",
    "end": "398960"
  },
  {
    "text": "nice for them to finish some of these sentences with sorry um so they are trying to be polite which is nice and of",
    "start": "398960",
    "end": "405440"
  },
  {
    "text": "course they are quite curious whether or not we would post this comment so we've done one better we've talked about it at black hat now they definitely posted",
    "start": "405440",
    "end": "412639"
  },
  {
    "text": "that comment uh considered that um and then they sign off with best regards so you know the they're trying",
    "start": "412639",
    "end": "419360"
  },
  {
    "text": "their best to be formal and nice at least at some point so we had to go away and think about whether or not we were",
    "start": "419360",
    "end": "425360"
  },
  {
    "text": "actually going to respond to this um which was which was an interesting thought",
    "start": "425360",
    "end": "431919"
  },
  {
    "text": "yeah and i was kind of going back and checking their web server because it had a new mail on the next time we saw it um",
    "start": "432319",
    "end": "438800"
  },
  {
    "text": "it had this reference to to us on it actually yeah quite nice of them",
    "start": "438800",
    "end": "446000"
  },
  {
    "start": "445000",
    "end": "545000"
  },
  {
    "text": "so in response we don't send them an email saying that um you know trust set the record clear here and james wrote",
    "start": "446240",
    "end": "452479"
  },
  {
    "text": "wrote this email to them yeah and i think um one of the points they pointed out in their own comment",
    "start": "452479",
    "end": "457520"
  },
  {
    "text": "was that they thought we had one component wrong in our blog um so we wanted to actually ask them like why was",
    "start": "457520",
    "end": "464319"
  },
  {
    "text": "it wrong and and show them our analysis um and indeed if it was wrong then uh we",
    "start": "464319",
    "end": "469759"
  },
  {
    "text": "would update the blog and post their comment if they wanted to so um so we thought that was only fair um",
    "start": "469759",
    "end": "475919"
  },
  {
    "text": "to go back with our thoughts and so i said thank you for taking the time to write to us any comments are greatly",
    "start": "475919",
    "end": "481440"
  },
  {
    "text": "appreciated uh we definitely appreciate your update on based on the point that we're trying to make and so in a very fact-based way we said",
    "start": "481440",
    "end": "488800"
  },
  {
    "text": "here's the way we explain our analysis here um and we also point out to you uh",
    "start": "488800",
    "end": "493840"
  },
  {
    "text": "some of the other research has been done they said we'd love to hear your thoughts and confirm the above",
    "start": "493840",
    "end": "499599"
  },
  {
    "text": "and get your perspective on this and of course if there's something wrong i will be happy to go make a correction",
    "start": "499599",
    "end": "506160"
  },
  {
    "text": "and update our blog asap thanks for reaching out we look forward to hearing back",
    "start": "506160",
    "end": "511680"
  },
  {
    "text": "um now we didn't get an email back um but they did make an update at least i",
    "start": "511680",
    "end": "516719"
  },
  {
    "text": "guess on their site didn't make chris yeah so they changed it straight away back to this which doesn't mention us",
    "start": "516719",
    "end": "522880"
  },
  {
    "text": "anymore and this says that they're gonna go to sleep and you won't see their malware anymore",
    "start": "522880",
    "end": "528480"
  },
  {
    "text": "yeah very very odd and they were um you know they did kind of start a trend in that chris of them",
    "start": "528480",
    "end": "533839"
  },
  {
    "text": "talking to other researchers as well yeah following on from this a lot of other people have had contact from them",
    "start": "533839",
    "end": "540560"
  },
  {
    "text": "i think yeah very peculiar but uh interesting nonetheless",
    "start": "540560",
    "end": "546640"
  },
  {
    "start": "545000",
    "end": "725000"
  },
  {
    "text": "great so um we're going to talk a little bit now about how they do exploitation and",
    "start": "547760",
    "end": "552880"
  },
  {
    "text": "command control etc and kind of get into some of the tooling um but before i kick that off um you",
    "start": "552880",
    "end": "559440"
  },
  {
    "text": "know we often obviously pull together different scenarios and case studies we run",
    "start": "559440",
    "end": "565839"
  },
  {
    "text": "simulations as well to make sure you know we ourselves understand how to do forensics on compromised environments",
    "start": "565839",
    "end": "572240"
  },
  {
    "text": "and in one particular case we pulled together a case study around vulnerable kubernetes environments and this was for",
    "start": "572240",
    "end": "577760"
  },
  {
    "text": "a different conference um if you want to see uh this data it's actually online free to",
    "start": "577760",
    "end": "582959"
  },
  {
    "text": "the community if you want to have your hand at humanities forensics we put a whole bunch of stuff on github and on our web page uh please do go check it",
    "start": "582959",
    "end": "589760"
  },
  {
    "text": "out and um as part of this you know you you always wonder like have i set up this",
    "start": "589760",
    "end": "596080"
  },
  {
    "text": "environment in a way where hackers do actually compromise it and also have have i simulated the same sort of events",
    "start": "596080",
    "end": "603279"
  },
  {
    "text": "that an attacker would do um well we've got a pretty good verification of this because",
    "start": "603279",
    "end": "609360"
  },
  {
    "text": "we stood up this uh kubernetes kind of case study early in the morning",
    "start": "609360",
    "end": "614560"
  },
  {
    "text": "we spent a few hours running our simulation so compromising in a way that a normal attacker would and then we did",
    "start": "614560",
    "end": "620480"
  },
  {
    "text": "a forensic capture of the node um only to find out that 30 minutes later",
    "start": "620480",
    "end": "625600"
  },
  {
    "text": "team tnt just compromised the exact same node um which was kind of annoying because it",
    "start": "625600",
    "end": "631200"
  },
  {
    "text": "polluted our environment that we were trying to do for a case study and another conference um",
    "start": "631200",
    "end": "636320"
  },
  {
    "text": "so that was quite a quite a funny one um but you know case in point they compromised it in the same way they did",
    "start": "636320",
    "end": "642720"
  },
  {
    "text": "the same thing that our simulation did as well so that was great validation for us um",
    "start": "642720",
    "end": "648240"
  },
  {
    "text": "but also raises a really important point here um we only had this environment online for a day",
    "start": "648240",
    "end": "654160"
  },
  {
    "text": "um you know and we were keeping an eye on it of course and then within that day it got compromised and so you know this",
    "start": "654160",
    "end": "661519"
  },
  {
    "text": "is a really good point to highlight if you do have kind of misconfigured values classes out there or vulnerable",
    "start": "661519",
    "end": "666959"
  },
  {
    "text": "kubernetes clusters um and they're public facing chances are they're probably already compromised so",
    "start": "666959",
    "end": "673760"
  },
  {
    "text": "just who for thought there that it literally happens that quickly so an interesting one nonetheless now if",
    "start": "673760",
    "end": "680480"
  },
  {
    "text": "you do need to go out and analyze your systems if you're if you're just rushed out the door because you've seen that",
    "start": "680480",
    "end": "686079"
  },
  {
    "text": "slide i don't blame you but um if you do need to have a look there are plenty of log files that kubernetes generates and",
    "start": "686079",
    "end": "692800"
  },
  {
    "text": "docker generates as well which helps you identify if you've been compromised",
    "start": "692800",
    "end": "697839"
  },
  {
    "text": "but not only that you do need to kind of dive deep and do a little bit more forensics so you can truly understand the risk um and if you do that we",
    "start": "697839",
    "end": "704880"
  },
  {
    "text": "recommend doing that on the kubernetes node we like to highlight this because some people just look at the actual",
    "start": "704880",
    "end": "710079"
  },
  {
    "text": "containers themselves um you do need to look at the node as well it gives you some extra logging information there's",
    "start": "710079",
    "end": "715839"
  },
  {
    "text": "also kind of file system versioning kind of foo happening to you which actually helps you with your analysis and work",
    "start": "715839",
    "end": "722000"
  },
  {
    "text": "out what's going on so just some food thought there when it comes to forensic analysis again",
    "start": "722000",
    "end": "728880"
  },
  {
    "start": "725000",
    "end": "895000"
  },
  {
    "text": "loads of stuff on our github page and stuff you can check out and that will help with that hopefully um now kind of",
    "start": "728880",
    "end": "735440"
  },
  {
    "text": "moving on from that and it's like what are you looking for and how do they get in well again it kind of revolves around",
    "start": "735440",
    "end": "741920"
  },
  {
    "text": "open apis now the actual attackers you know they say this wasn't a worm um",
    "start": "741920",
    "end": "748160"
  },
  {
    "text": "i'll let everybody on the internet decide whether or not it's a worm but i feel like it's a little bit of like a",
    "start": "748160",
    "end": "753360"
  },
  {
    "text": "worm function um so essentially what happens the attackers scan an ip arranged they say open apis",
    "start": "753360",
    "end": "760399"
  },
  {
    "text": "they compromise those machines and then they do the same thing again so that that now compromised machine goes again",
    "start": "760399",
    "end": "767040"
  },
  {
    "text": "scans new ip ranges and then compromises those and so on and so i don't know it kinda sounds like a wormy function what",
    "start": "767040",
    "end": "774000"
  },
  {
    "text": "do you think chris yeah kind of",
    "start": "774000",
    "end": "779680"
  },
  {
    "text": "what do we know um so you know so it does start with the kubernetes apis",
    "start": "780079",
    "end": "786399"
  },
  {
    "text": "and what happens is that these are unauthenticated apis and public facing you know with no kind of um",
    "start": "786399",
    "end": "793440"
  },
  {
    "text": "allow listing in place and these attackers are running a number of shell commands we've distilled just some of it",
    "start": "793440",
    "end": "799680"
  },
  {
    "text": "down here for you on the screen um so they run a bunch of shell commands they'll bring down some scripts and and",
    "start": "799680",
    "end": "805279"
  },
  {
    "text": "run some things um one of them is mass scan so they'll go and do mass scan",
    "start": "805279",
    "end": "810320"
  },
  {
    "text": "across other public ip ranges the one interesting point here as well is that",
    "start": "810320",
    "end": "815360"
  },
  {
    "text": "they'll also look at your land ranges as well so your local network ranges so the chances are if you've got one",
    "start": "815360",
    "end": "821279"
  },
  {
    "text": "compromised kubernetes node uh you probably have others so uh by that",
    "start": "821279",
    "end": "827199"
  },
  {
    "text": "virtue so um definitely need to go and have a look at your entire estate at that point because the chances are",
    "start": "827199",
    "end": "832800"
  },
  {
    "text": "they're probably all configured very similar or if not the same",
    "start": "832800",
    "end": "838079"
  },
  {
    "text": "and then they do actually pick on docker apis as well so do keep an eye out for",
    "start": "838160",
    "end": "843600"
  },
  {
    "text": "that in addition to that in addition to cuban eddies and then one of the cool things they do do and you know shout out",
    "start": "843600",
    "end": "850240"
  },
  {
    "text": "to them is that um they don't just go off and scan the entire internet um the the workers that are compromised will",
    "start": "850240",
    "end": "857440"
  },
  {
    "text": "actually communicate to the attacker's server um they'll actually get um whatever the latest ip block range",
    "start": "857440",
    "end": "864160"
  },
  {
    "text": "they're meant to be scanning um just so there's not a reputation there and it's a bit more efficient so very smart um",
    "start": "864160",
    "end": "870160"
  },
  {
    "text": "this is actually public as well so they actually publicly publish how many infected devices they have at any one",
    "start": "870160",
    "end": "876320"
  },
  {
    "text": "moment they're a little bit weird but kind of interesting as well um and i guess i've got a cool logo too press",
    "start": "876320",
    "end": "884959"
  },
  {
    "text": "yeah i like a bit of ascii um you know so it is quite peculiar that",
    "start": "884959",
    "end": "890160"
  },
  {
    "text": "they they're very public um and very interesting on that front",
    "start": "890160",
    "end": "895920"
  },
  {
    "start": "895000",
    "end": "1400000"
  },
  {
    "text": "so you saw that there was like 6000 odd compromised systems in that screenshot yeah there were a lot of people having",
    "start": "896880",
    "end": "902880"
  },
  {
    "text": "problems with this and definitely back in the day when we first started noticing this activity there were lots",
    "start": "902880",
    "end": "908399"
  },
  {
    "text": "of chatter on forums and stuff i think there was a bit of education needed to you know um to kind of get",
    "start": "908399",
    "end": "915120"
  },
  {
    "text": "some information out there and let people know how these compromises were occurring because they didn't all",
    "start": "915120",
    "end": "920480"
  },
  {
    "text": "understand what was going on and they were like i locked down ssh and all these things like how are these things",
    "start": "920480",
    "end": "926000"
  },
  {
    "text": "happening um and so again another reason why we're here to try and help uh you know raise awareness and get people to",
    "start": "926000",
    "end": "932160"
  },
  {
    "text": "protect themselves this one is a little bit funny as well uh in you know if you can say compromise is funny but it's a",
    "start": "932160",
    "end": "937600"
  },
  {
    "text": "little bit funny that the attack attackers actually set up a user account in their own names um so that was the interesting one uh",
    "start": "937600",
    "end": "944240"
  },
  {
    "text": "from a post that we saw at forum yeah a bit bit cheeky of them",
    "start": "944240",
    "end": "950720"
  },
  {
    "text": "i might know one yeah yeah exactly uh appreciate you for the command control side",
    "start": "950720",
    "end": "956480"
  },
  {
    "text": "all right cool uh so how do team tnt maintain access to these networks after",
    "start": "956480",
    "end": "961519"
  },
  {
    "text": "they compromise them",
    "start": "961519",
    "end": "964240"
  },
  {
    "text": "one of the ways to do it is through their ise bots so pretty classic stuff they use the ies tsunami ic bot and it",
    "start": "967680",
    "end": "975360"
  },
  {
    "text": "just works which i guess the reason they've been using it for so long",
    "start": "975360",
    "end": "980319"
  },
  {
    "text": "i see um like you know it's old school but it's you know it's always cool it's cool to still see it",
    "start": "980959",
    "end": "987199"
  },
  {
    "text": "kicking around more ascii out there as you can see on there tnt hub",
    "start": "987199",
    "end": "992560"
  },
  {
    "text": "weight on my heart so i connected into their server last week and you can see here um 221 clients",
    "start": "992560",
    "end": "999839"
  },
  {
    "text": "connected in so that's 220 victims and one attacker as well",
    "start": "999839",
    "end": "1005759"
  },
  {
    "text": "um and also you can look on the right side there has a decompiled um ipa address as well so that's how they",
    "start": "1005759",
    "end": "1011920"
  },
  {
    "text": "connect and they can point it directly there getting ahead of myself there chris",
    "start": "1011920",
    "end": "1016959"
  },
  {
    "text": "there you go also they use weavscope which is a",
    "start": "1016959",
    "end": "1022240"
  },
  {
    "text": "perfectly legitimate kubernetes administration tool and the cool thing about reefscope is that you've got this beautiful kind of",
    "start": "1022240",
    "end": "1028240"
  },
  {
    "text": "graphical interface so you can go and you can click stuff and start and stop containers and they actually install",
    "start": "1028240",
    "end": "1035120"
  },
  {
    "text": "this on the host stuff they compromise them and the other thing they do as well is they will actually look for open",
    "start": "1035120",
    "end": "1041839"
  },
  {
    "text": "weave scope installations and just connect and compromise that way too",
    "start": "1041839",
    "end": "1046959"
  },
  {
    "text": "there are actually a ton of other back doors they do as well so i won't go through all of these because they're",
    "start": "1048559",
    "end": "1053919"
  },
  {
    "text": "generally the same as other crypto mining worms the one that i will pull out here is teammate",
    "start": "1053919",
    "end": "1059280"
  },
  {
    "text": "and teammate is all like t-mux if you've ever used that one before so if you're a linux user you might have used tmux it",
    "start": "1059280",
    "end": "1065760"
  },
  {
    "text": "means that i can sit on my laptop you're on your laptop you can kind of both type and do some screen sharing stuff",
    "start": "1065760",
    "end": "1072640"
  },
  {
    "text": "and teammate is a bit like tmux but it can toggle through nuts and do some other stuff that makes it easier to",
    "start": "1072640",
    "end": "1077679"
  },
  {
    "text": "deploy so how the team tmd do privesque",
    "start": "1077679",
    "end": "1086000"
  },
  {
    "text": "well if you remember right at the beginning of the talk we were showing how they were stealing some aws credential files they still do",
    "start": "1086880",
    "end": "1093600"
  },
  {
    "text": "that but they're actually a lot more sophisticated when they're on than they were back then so here we can see that they're stealing",
    "start": "1093600",
    "end": "1099360"
  },
  {
    "text": "at the top of this script the environment variables the system so there are passwords there and then just",
    "start": "1099360",
    "end": "1105039"
  },
  {
    "text": "after that they're selling the docker environment variables so it's actually pretty similar to um the other environment variables but really",
    "start": "1105039",
    "end": "1111440"
  },
  {
    "text": "important if you are attacking kubernetes systems and at the bottom of this script they're still seeing the root ns credentials files but now they",
    "start": "1111440",
    "end": "1118400"
  },
  {
    "text": "clean them up a bit they're gripping them out like having some templating so getting a little bit more sophisticated there too",
    "start": "1118400",
    "end": "1125440"
  },
  {
    "text": "and then this is pretty unique as well actually so what they do now as of a few months ago is they'll scrape the ada",
    "start": "1127120",
    "end": "1133440"
  },
  {
    "text": "best metadata url so hit that magic ip address there one six nine dot whatever",
    "start": "1133440",
    "end": "1139200"
  },
  {
    "text": "and what that gives you is things like what reason you're running in also things like the secret key and the",
    "start": "1139200",
    "end": "1145120"
  },
  {
    "text": "access key and some of the other data as well around your system and if you can remember the capital one",
    "start": "1145120",
    "end": "1151200"
  },
  {
    "text": "breach that was actually really a big part of that too with capital one the attacker stole the credits from the",
    "start": "1151200",
    "end": "1156320"
  },
  {
    "text": "metadata url and that laptop pulled down some really sensitive information from s3",
    "start": "1156320",
    "end": "1161840"
  },
  {
    "text": "and then finally at the bottom of this you'll see another magic ip address and that is the amazon elastic kubernetes",
    "start": "1161840",
    "end": "1168480"
  },
  {
    "text": "service ip they're hitting that to also steal credentials there too so some more kind of amazon kubernetes specific stuff",
    "start": "1168480",
    "end": "1174640"
  },
  {
    "text": "they're coming out with now too",
    "start": "1174640",
    "end": "1178600"
  },
  {
    "text": "and it's not just aws so here we can see team tnt stealing a ton of credential files including the gcp so google cloud",
    "start": "1179919",
    "end": "1187440"
  },
  {
    "text": "credential files there's other stuff there too like the ssh keys um there's things like filezilla so tons of stuff",
    "start": "1187440",
    "end": "1194080"
  },
  {
    "text": "they still know and uh just in case azure is feeling",
    "start": "1194080",
    "end": "1200720"
  },
  {
    "text": "left out they now support azure as well or they're about to so they actually give a heads up of what's about to",
    "start": "1200720",
    "end": "1206320"
  },
  {
    "text": "happen often from their official twitter account it's really nice let me give them a heads up again another kind of odd thing",
    "start": "1206320",
    "end": "1212880"
  },
  {
    "text": "isn't it chris like they're very vocal um but a nice one to give researchers a heads up that they're about to target as",
    "start": "1212880",
    "end": "1218720"
  },
  {
    "text": "years so um it's more like a product support uh",
    "start": "1218720",
    "end": "1223840"
  },
  {
    "text": "announcement isn't it yeah very odd they are a lot more charlie than average",
    "start": "1223840",
    "end": "1229120"
  },
  {
    "text": "hackers and um i mean yeah just going through just a couple of these so here they're applying some researchers saying that",
    "start": "1229120",
    "end": "1235919"
  },
  {
    "text": "they're finding it really tough now because aws is recognizing when they're stealing those keys really quickly so",
    "start": "1235919",
    "end": "1241679"
  },
  {
    "text": "good work from aws there and then sometimes just weird they have",
    "start": "1241679",
    "end": "1248080"
  },
  {
    "text": "like a fan club on twitter now as well so omg hacker family all that kind of stuff",
    "start": "1248080",
    "end": "1255679"
  },
  {
    "text": "sad sometimes isn't it but funny yeah",
    "start": "1255919",
    "end": "1262559"
  },
  {
    "text": "and then uh here are a few other ways to do proves as well",
    "start": "1262559",
    "end": "1267120"
  },
  {
    "text": "so one kind of smart thing they do is they use a tool called docker escape off github",
    "start": "1267600",
    "end": "1274640"
  },
  {
    "text": "i love the name does what it says on the gym yeah it's pretty uh yeah what does it",
    "start": "1274640",
    "end": "1280000"
  },
  {
    "text": "escape some docker um and they do that through some sockets so there are some network sockets and file sockets they",
    "start": "1280000",
    "end": "1285360"
  },
  {
    "text": "used to break out also in particular exploits as well and what they've done there is they've uploaded it to docker hub so it's just",
    "start": "1285360",
    "end": "1292159"
  },
  {
    "text": "easier to deploy australia's container and full credit here to aquaset for finding this one first",
    "start": "1292159",
    "end": "1298799"
  },
  {
    "text": "another tool they run is called break out the box or botb and you can kind of see from the command",
    "start": "1299919",
    "end": "1304960"
  },
  {
    "text": "they're running here while it does so it scrapes uh google cloud credentials some other metadata too also still some",
    "start": "1304960",
    "end": "1311760"
  },
  {
    "text": "kubernetes sequence as well and then we've got payrolties and",
    "start": "1311760",
    "end": "1318159"
  },
  {
    "text": "pillaries is quite similar to breakout of the box actually it also has some kind of cloud and container specific",
    "start": "1318159",
    "end": "1323760"
  },
  {
    "text": "attacks and then this is my favorite one um so",
    "start": "1323760",
    "end": "1329840"
  },
  {
    "text": "if you ever use infection monkey before infection monkey is kind of like a friendly aws worm you deploy it in your",
    "start": "1329840",
    "end": "1336559"
  },
  {
    "text": "account you set up an infection monkey server and then it tunnels through your account and it will tell you like what",
    "start": "1336559",
    "end": "1342080"
  },
  {
    "text": "questions are insecure it kind of works its way through and gives you a really nice kind of heads up there but what",
    "start": "1342080",
    "end": "1348240"
  },
  {
    "text": "team tmt were doing for a little while and this was spotted by tencent is they were actually running their own infection monkey server compromising",
    "start": "1348240",
    "end": "1354720"
  },
  {
    "text": "other people's networks and then pointing this back at their server to get some more information around the networks that was that was kind of an",
    "start": "1354720",
    "end": "1360960"
  },
  {
    "text": "odd one and we've gone through kind of a couple",
    "start": "1360960",
    "end": "1366640"
  },
  {
    "text": "of the tools that they use but there's actually so much more if we had time to go into it",
    "start": "1366640",
    "end": "1371679"
  },
  {
    "text": "so this is a screenshot of one of the folders from one of their servers showing some of their custom tooling and",
    "start": "1371679",
    "end": "1378799"
  },
  {
    "text": "some of the other things that they're doing here they're doing things like cleaning up old logs their ssh brake",
    "start": "1378799",
    "end": "1384480"
  },
  {
    "text": "forcing they're exploiting redis systems and installing some custom drivers as well",
    "start": "1384480",
    "end": "1390000"
  },
  {
    "text": "there's a ton of different stuff these guys do actually and at the end of the talk we include some references so if you're interested in you know what else",
    "start": "1390000",
    "end": "1396080"
  },
  {
    "text": "they do there's a lot more to hear about oh thanks chris i think it goes",
    "start": "1396080",
    "end": "1403200"
  },
  {
    "text": "without saying you know they're very vocal there's lots of um information online uh just be careful if you go",
    "start": "1403200",
    "end": "1409679"
  },
  {
    "text": "poking around then make sure you know what you're doing uh don't go just clicking on stuff because you might end",
    "start": "1409679",
    "end": "1414720"
  },
  {
    "text": "up being compromised yourself so just like a be careful at home kids kind of message",
    "start": "1414720",
    "end": "1420240"
  },
  {
    "text": "people before people go jump out and look at those ips and everything and links we've just put on the uh on the",
    "start": "1420240",
    "end": "1425600"
  },
  {
    "text": "slides so um so nextbit is kind of like you know why are they doing this right and",
    "start": "1425600",
    "end": "1431919"
  },
  {
    "text": "um unfortunately the first answer to that is is not very sexy um but pretty obvious um the second answer",
    "start": "1431919",
    "end": "1439440"
  },
  {
    "text": "to that is more around like what could you do and that's the scarier one and we wanted",
    "start": "1439440",
    "end": "1444480"
  },
  {
    "text": "to make sure we kind of touched on that in our presentation make sure we kind of",
    "start": "1444480",
    "end": "1449520"
  },
  {
    "text": "get you know some of this information out there and again uh have people looking into their kubernetes",
    "start": "1449520",
    "end": "1455039"
  },
  {
    "text": "configurations and their environments make sure they protect themselves from such attacks",
    "start": "1455039",
    "end": "1460159"
  },
  {
    "text": "and so the first reason is well they do it for crypto mining um yeah i know not too",
    "start": "1460159",
    "end": "1467279"
  },
  {
    "text": "exciting right um and we all know crypto mining on cpus particularly you know in",
    "start": "1467279",
    "end": "1473840"
  },
  {
    "text": "containers is probably not the most efficient option um but they do have quite a lot of machines say you know",
    "start": "1473840",
    "end": "1480799"
  },
  {
    "text": "what maybe maybe it is maybe they do get a little bit of something out of it um but i think what i'm more concerned",
    "start": "1480799",
    "end": "1487200"
  },
  {
    "text": "about is what could actually happen and as you saw before you know they go ahead and steal credentials whether they be in",
    "start": "1487200",
    "end": "1492960"
  },
  {
    "text": "aws or gcp and you know azure coming soon right um and say you know what",
    "start": "1492960",
    "end": "1498720"
  },
  {
    "text": "could you be doing with that sort of information which people might not be seeing or uh is yet to happen",
    "start": "1498720",
    "end": "1506880"
  },
  {
    "text": "and you know just and a lot of people kind of think of that hole it won't happen to me thing but um i put this one in here because if",
    "start": "1506960",
    "end": "1513600"
  },
  {
    "text": "you have been compromised by a crypto mining worm in your kubernetes environment",
    "start": "1513600",
    "end": "1518799"
  },
  {
    "text": "and that was the only thing that happened i would consider that a very much a shot over the bowels and consider",
    "start": "1518799",
    "end": "1524000"
  },
  {
    "text": "yourself lucky so make sure you have gone and actually remediated uh what the underlying root cause was an issue there",
    "start": "1524000",
    "end": "1530159"
  },
  {
    "text": "and you've investigated done some forensics around that um so let's kind of talk a little bit more",
    "start": "1530159",
    "end": "1536400"
  },
  {
    "start": "1535000",
    "end": "1771000"
  },
  {
    "text": "scary then what could actually happen well let's start on the kubernetes sides on the nodes themselves and kind of",
    "start": "1536400",
    "end": "1543279"
  },
  {
    "text": "risks that it could represent well one of the ones which seems the most obvious is data excel so a lot of",
    "start": "1543279",
    "end": "1549039"
  },
  {
    "text": "these containers have access to databases with sensitive information or file shares and so an attacker could",
    "start": "1549039",
    "end": "1555279"
  },
  {
    "text": "obviously spend a little bit more time on these containers and actually start stealing some data",
    "start": "1555279",
    "end": "1561200"
  },
  {
    "text": "and then that can even lead to ransom to holding your data to ransom or looking to disrupt your system say you know they",
    "start": "1561200",
    "end": "1568720"
  },
  {
    "text": "have to spend a little bit more time to do this but if they do um you know it can have a big effect and",
    "start": "1568720",
    "end": "1574799"
  },
  {
    "text": "the other thing as well is it's quite hard to spot um a lot of people don't tend to do investigations when it",
    "start": "1574799",
    "end": "1580640"
  },
  {
    "text": "involves containers and kubernetes especially uh find it hard to dive in deep on the forensic side so that's",
    "start": "1580640",
    "end": "1587440"
  },
  {
    "text": "something that we do need to start doing more and more um you know in order to find uh kind of what the underlying root",
    "start": "1587440",
    "end": "1593600"
  },
  {
    "text": "causes are and the actual risk that's happening rather than just crypto mining running and then blowing it away",
    "start": "1593600",
    "end": "1600320"
  },
  {
    "text": "the one that's really scary as well is you know a lot of these containers run kind of web apps or you know web",
    "start": "1600320",
    "end": "1606720"
  },
  {
    "text": "services and you know you could inject some code in there you could be running drive by downloads you know the world is",
    "start": "1606720",
    "end": "1612640"
  },
  {
    "text": "your oyster right and you could go ahead and crop data and you know and therefore",
    "start": "1612640",
    "end": "1618080"
  },
  {
    "text": "potentially compromise your users so now you are the third party arrest as a result of your compromised kubernetes",
    "start": "1618080",
    "end": "1624400"
  },
  {
    "text": "environment they super fought there now the more kind of even more scary",
    "start": "1624400",
    "end": "1629600"
  },
  {
    "text": "side and not to be too scary i guess but it is scary and it is something that can happen and may have already happened we",
    "start": "1629600",
    "end": "1635919"
  },
  {
    "text": "just haven't seen it um is is you know with those credentials they're stealing",
    "start": "1635919",
    "end": "1641039"
  },
  {
    "text": "you can potentially use that to spin up or even destroy resources as well um so",
    "start": "1641039",
    "end": "1646799"
  },
  {
    "text": "i've definitely seen gpu resources being spun up used for crypto mining um that's a little bit more obvious when your",
    "start": "1646799",
    "end": "1653120"
  },
  {
    "text": "account starts draining um full of credits but you know when it comes to",
    "start": "1653120",
    "end": "1658399"
  },
  {
    "text": "destroying resources is also something to consider as well that can be quite disruptive",
    "start": "1658399",
    "end": "1664080"
  },
  {
    "text": "you can also use those credentials to access other parts of the environment what happens is that a lot of customers",
    "start": "1664080",
    "end": "1671120"
  },
  {
    "text": "and people out there are setting up these environments and aws credentials and gcp credentials with excess",
    "start": "1671120",
    "end": "1677600"
  },
  {
    "text": "privileges and part of the reason of that is because identity and access management is hard and it's definitely",
    "start": "1677600",
    "end": "1683679"
  },
  {
    "text": "hard for cloud as well it's very complicated and there's lots of solutions out there to kind of help with that which i'm going to but",
    "start": "1683679",
    "end": "1690480"
  },
  {
    "text": "um one part of of that is the fact that the reason why it's hard well because it's hard is um you know people just",
    "start": "1690480",
    "end": "1697679"
  },
  {
    "text": "want things to work and so they add access privileges to those accounts just to make things work um and that presents",
    "start": "1697679",
    "end": "1703840"
  },
  {
    "text": "the risk lets people access other parts of the environment etc and the same goes with those credits you can even create",
    "start": "1703840",
    "end": "1710399"
  },
  {
    "text": "accounts and k we actually did a case study where we proved you could use those privileges and stuff like that to",
    "start": "1710399",
    "end": "1716480"
  },
  {
    "text": "create accounts and then you know and then that can actually lead to console access which is pretty",
    "start": "1716480",
    "end": "1722960"
  },
  {
    "text": "pretty crazy right like if you can think about an attacker creating an account and then accessing your aws or your",
    "start": "1722960",
    "end": "1729360"
  },
  {
    "text": "azure or your gcp console you know no matter what endpoint solution you're running across your cloud estate you're",
    "start": "1729360",
    "end": "1735840"
  },
  {
    "text": "not going to spot that and they could go in and they could disrupt things or hold that account to ransom you name it like",
    "start": "1735840",
    "end": "1742159"
  },
  {
    "text": "the world is your oyster as an attacker at that point um is this happening we're not sure um has",
    "start": "1742159",
    "end": "1748880"
  },
  {
    "text": "it happened we're not sure either but certainly it's probably happened to some extent it's just that people don't",
    "start": "1748880",
    "end": "1753919"
  },
  {
    "text": "investigate deep enough to actually see this happening and that's where you need to actually do forensics on your human native environments and you also need to",
    "start": "1753919",
    "end": "1760399"
  },
  {
    "text": "have a few forensics on your cloud data as well and actually start piecing together this part but something to be aware of and",
    "start": "1760399",
    "end": "1767039"
  },
  {
    "text": "something that you should look to protect yourself against but you know what it sounds very doom",
    "start": "1767039",
    "end": "1772960"
  },
  {
    "start": "1771000",
    "end": "2017000"
  },
  {
    "text": "and gloom uh ironically like a lot of things there's some quite simple ways you can do to kind of protect yourself",
    "start": "1772960",
    "end": "1779200"
  },
  {
    "text": "against this and so this is something we kind of wanted to you know finish up on just to make sure you had some key",
    "start": "1779200",
    "end": "1785120"
  },
  {
    "text": "takeaways to go home and make sure that you're in the right state and so",
    "start": "1785120",
    "end": "1791039"
  },
  {
    "text": "it sounds all basic but there are people not doing this and the first one is secure your api",
    "start": "1791039",
    "end": "1797600"
  },
  {
    "text": "and they so that's about setting up authentication but not just that but doing things like allow listing and",
    "start": "1797600",
    "end": "1803679"
  },
  {
    "text": "firewall rule sets just to make sure that only the machines and the servers or you know parts of the",
    "start": "1803679",
    "end": "1810159"
  },
  {
    "text": "network that are required to talk to your api uh do and not just the whole entire",
    "start": "1810159",
    "end": "1816080"
  },
  {
    "text": "internet which is you know not a great thing and then the other one as well as you",
    "start": "1816080",
    "end": "1821120"
  },
  {
    "text": "know we say aws credentials here it's just some you know it's just because we've looked at aws a lot um you know",
    "start": "1821120",
    "end": "1827200"
  },
  {
    "text": "this also reflects on gcp and azure as well you know make sure your credential usage is proper and correct um in your",
    "start": "1827200",
    "end": "1835279"
  },
  {
    "text": "containers a lot of people don't think this is a problem because containers spin up and down so therefore you know",
    "start": "1835279",
    "end": "1840880"
  },
  {
    "text": "the data is going to disappear and it's not a security risk it absolutely is a security risk so make sure you're using",
    "start": "1840880",
    "end": "1846240"
  },
  {
    "text": "credentials in a safe manner in your containers and where you do have to use credentials make sure you are assigning",
    "start": "1846240",
    "end": "1852399"
  },
  {
    "text": "least privilege um and make sure those privileges are only doing specifically what you need them to do they don't need",
    "start": "1852399",
    "end": "1859200"
  },
  {
    "text": "admin access to your entire estate like why the hell does you need credentials to the point where you can you know",
    "start": "1859200",
    "end": "1865760"
  },
  {
    "text": "create an account in the console that's pretty crazy too so you know spoof report there",
    "start": "1865760",
    "end": "1872000"
  },
  {
    "text": "um definitely some pretty obvious ones around reviewing network traffic so look for mining pools and mining protocols",
    "start": "1872000",
    "end": "1878480"
  },
  {
    "text": "this goes for um on-prem as well as cloud as well so just keep an eye out for that",
    "start": "1878480",
    "end": "1883919"
  },
  {
    "text": "yeah this one's a bit of a cheeky recommendation like obviously if you see your credentials flying out through http",
    "start": "1883919",
    "end": "1889919"
  },
  {
    "text": "um that's usually a bad sign um but that's what happens um",
    "start": "1889919",
    "end": "1894960"
  },
  {
    "text": "so you know we put it in there um you know and then some other ones around general kind of things that you should",
    "start": "1894960",
    "end": "1901200"
  },
  {
    "text": "be doing anyway so you're not using passwords and using key files etc and locking down your remote access",
    "start": "1901200",
    "end": "1907519"
  },
  {
    "text": "and then the one that's a bit of a bug bear for me just because i come across so many compromises with customers over",
    "start": "1907519",
    "end": "1913440"
  },
  {
    "text": "you know the last 10 years or so where people forget about the developer and test",
    "start": "1913440",
    "end": "1918799"
  },
  {
    "text": "environments and you know they tend to have quite good controls over uh the production environments and they're",
    "start": "1918799",
    "end": "1925279"
  },
  {
    "text": "quite locked down and a lot of the assessment tends to happen around production only",
    "start": "1925279",
    "end": "1930480"
  },
  {
    "text": "when it comes to fan testing and stuff like that but they never think about the developer environments in the test environments and those are just as",
    "start": "1930480",
    "end": "1936880"
  },
  {
    "text": "vulnerable if not even more vulnerable because they tend to have excess privileges tend to be a bit more",
    "start": "1936880",
    "end": "1942720"
  },
  {
    "text": "wild west so make sure you're keeping an eye out for those because those can lead to potential access to your production",
    "start": "1942720",
    "end": "1948720"
  },
  {
    "text": "environment as well so and also have a sense of data and magic",
    "start": "1948720",
    "end": "1953760"
  },
  {
    "text": "so there's some key kind of takeaways some of them seem quite basic but if i'm honest sometimes it only takes basic",
    "start": "1953760",
    "end": "1959440"
  },
  {
    "text": "things to solve these problems um so you know it does play in part that there is complexity to the cloud and so you",
    "start": "1959440",
    "end": "1966480"
  },
  {
    "text": "need to make the cloud less complex in order to understand you know to introduce these basic things",
    "start": "1966480",
    "end": "1972799"
  },
  {
    "text": "but um just in wrapping up we do want to kind of acknowledge some of the excellent research that's been out there",
    "start": "1972799",
    "end": "1978799"
  },
  {
    "text": "so ever since we started doing research on team tmt there's been loads of great um",
    "start": "1978799",
    "end": "1984799"
  },
  {
    "text": "kind of blogs and articles and knowledge sharing so we'll give a shout out here and you know what uh just because",
    "start": "1984799",
    "end": "1991600"
  },
  {
    "text": "they've been a good character so far in communications with us we've given a shout out to the attackers too down the",
    "start": "1991600",
    "end": "1997120"
  },
  {
    "text": "bottom and then i think that's it we move over to q a",
    "start": "1997120",
    "end": "2003200"
  },
  {
    "text": "thank you [Music]",
    "start": "2003200",
    "end": "2014950"
  },
  {
    "text": "you",
    "start": "2016960",
    "end": "2019039"
  }
]