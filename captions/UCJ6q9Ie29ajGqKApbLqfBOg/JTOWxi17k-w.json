[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "hello black hat how's everybody today great was that lunch",
    "start": "199",
    "end": "6640"
  },
  {
    "text": "awesome all right I'm done I'm out let's dropped the mic all right so today we're",
    "start": "10960",
    "end": "16240"
  },
  {
    "text": "going to talk about Amazon and um how many people by just a show of hands um have worked with Amazon I want to see",
    "start": "16240",
    "end": "22240"
  },
  {
    "text": "everybody raise their hand that all right awesome so um we're going to talk a little bit about bringing machete to",
    "start": "22240",
    "end": "28000"
  },
  {
    "text": "the Amazon what that means and we're going to talk about the cloud okay um but um so first let me",
    "start": "28000",
    "end": "33920"
  },
  {
    "text": "just introduce myself to the obligatory I'm I'm Eric Eric Peterson so uh I'm I'm primarily an ABC guy I've been doing ABC",
    "start": "33920",
    "end": "40200"
  },
  {
    "text": "for a long time working a lot of scanning products and um uh right now I work at a company called veric code uh",
    "start": "40200",
    "end": "46280"
  },
  {
    "text": "where I'm the director of Technology strategy and um we started getting in in involved in building things on top of",
    "start": "46280",
    "end": "52000"
  },
  {
    "text": "AWS in a big way um quite some time ago and I started playing around with AWS about uh since 2009 and along that way",
    "start": "52000",
    "end": "59320"
  },
  {
    "text": "along that Journey uh it was it was definitely a journey if you've watched other companies uh do",
    "start": "59320",
    "end": "64600"
  },
  {
    "text": "this or maybe yourself personally has gone through this journey um you get really excited and you do a lot of very exciting things and then you you do a",
    "start": "64600",
    "end": "71040"
  },
  {
    "text": "lot of scary things and and you learn a lot of uh things by making a lot of mistakes along the way so I'll be",
    "start": "71040",
    "end": "76159"
  },
  {
    "text": "sharing uh you know some of that as we go through the talk um as I go through this if anybody has a question they feel",
    "start": "76159",
    "end": "82600"
  },
  {
    "text": "like that just is burning a hole in their pocket you've got to ask it feel free go ahead if it's a bad question I'm",
    "start": "82600",
    "end": "87680"
  },
  {
    "text": "just going to ignore you uh but if it's a good question or a bad question you can save it to the end um but it's up to you uh it's a big",
    "start": "87680",
    "end": "94560"
  },
  {
    "text": "audience so maybe we'll have to leave it to the end but I will leave room for questions hopefully so um this is kind",
    "start": "94560",
    "end": "101119"
  },
  {
    "text": "of an agenda what we're going to try to talk about just some points hopefully this is really here for me to keep on on",
    "start": "101119",
    "end": "106920"
  },
  {
    "text": "topic but um we'll kind of go through a little bit of an intro and and and try to ground things and then we'll end up",
    "start": "106920",
    "end": "113240"
  },
  {
    "text": "on uh on on things at the very end and I have the old name for the project but uh should be machete anyways so let's talk",
    "start": "113240",
    "end": "121640"
  },
  {
    "start": "120000",
    "end": "197000"
  },
  {
    "text": "about um how I would like everyone here for the purpose of this talk or as a security researcher to think about Cloud",
    "start": "121640",
    "end": "129119"
  },
  {
    "text": "environments like AWS or or anyone anyone else I'd like you to to take a moment out and stop thinking about Cloud",
    "start": "129119",
    "end": "135519"
  },
  {
    "text": "as a SAS pass I ass blah blah blah blah blah my ass whatever it is and think",
    "start": "135519",
    "end": "141319"
  },
  {
    "text": "about it from a simple more kind of a simpler perspective of cloud being an",
    "start": "141319",
    "end": "146560"
  },
  {
    "text": "operating system right so think about what you get from an operating system you get disk you get memory you get",
    "start": "146560",
    "end": "152160"
  },
  {
    "text": "compute right what do I get from the cloud I get dis I get memory I get compute and I have a way to write code",
    "start": "152160",
    "end": "157280"
  },
  {
    "text": "and and interface with apis and and manage it that way and I think this is",
    "start": "157280",
    "end": "162400"
  },
  {
    "text": "the fundamental way that we should view Cloud environments as an operating system not as something a bunch of",
    "start": "162400",
    "end": "168920"
  },
  {
    "text": "virtual machines or a bunch of servers that somebody else manages for me or a bunch of whatever we want to call it",
    "start": "168920",
    "end": "174200"
  },
  {
    "text": "it's an operating system and it may be a very Advanced operating system or it may be a simple one depending upon the prior",
    "start": "174200",
    "end": "179360"
  },
  {
    "text": "you're using but it's an operating system and if you think of it in that frame of mind um and you you approach it",
    "start": "179360",
    "end": "185879"
  },
  {
    "text": "from a a security research perspective you can kind of change your perspective about how you start to view things and",
    "start": "185879",
    "end": "192200"
  },
  {
    "text": "you know windows and Linux that's just the micr kernel of this operating system right um and so that kind of leads you",
    "start": "192200",
    "end": "198480"
  },
  {
    "start": "197000",
    "end": "242000"
  },
  {
    "text": "to think about the infrastructure and the infrastructure itself that's the code of the operating system right I",
    "start": "198480",
    "end": "204000"
  },
  {
    "text": "write a few lines of code whatever my configuration management solution of choice is maybe I use anible Maybe use",
    "start": "204000",
    "end": "210080"
  },
  {
    "text": "chef and I create infrastructure out of code and I do that in a matter of seconds and that ease and the apis that",
    "start": "210080",
    "end": "217080"
  },
  {
    "text": "make that possible are all part of that operating system and nobody's really been spending time when you think about",
    "start": "217080",
    "end": "223920"
  },
  {
    "text": "it from an operating system point of view um doing uh very specific part you know targeted kind of testing from an",
    "start": "223920",
    "end": "230599"
  },
  {
    "text": "operating system uh Benchmark against this uh against against the cloud right",
    "start": "230599",
    "end": "236120"
  },
  {
    "text": "I'm sure plenty of people have been trying to hack into Amazon and all that other stuff but I'm talking about the whole system right so with that kind of",
    "start": "236120",
    "end": "243560"
  },
  {
    "start": "242000",
    "end": "280000"
  },
  {
    "text": "structure in mind let's talk a little bit about the U you know what you get and just kind of set some some uh",
    "start": "243560",
    "end": "249840"
  },
  {
    "text": "Baseline here so fully realized AWS application probably looks something like this um this is just one fancy",
    "start": "249840",
    "end": "256959"
  },
  {
    "text": "diagram there's lots of different fancy diagrams but it's a lot of components all these systems are virtualized all",
    "start": "256959",
    "end": "262120"
  },
  {
    "text": "these systems are created probably in seconds by some script or something that you can write and uh and if you created",
    "start": "262120",
    "end": "268080"
  },
  {
    "text": "it manually through the through the web UI you're you're doing it wrong but you know that's okay we all started there",
    "start": "268080",
    "end": "274039"
  },
  {
    "text": "right and uh and and we create all these systems and traditionally when we thought about building up an environment",
    "start": "274039",
    "end": "280199"
  },
  {
    "start": "280000",
    "end": "363000"
  },
  {
    "text": "we were mostly thinking about our applications when we were talking about application security or locking down but the interesting thing about that is the",
    "start": "280199",
    "end": "286320"
  },
  {
    "text": "applications themselves it's a very small part of the overall system right",
    "start": "286320",
    "end": "292000"
  },
  {
    "text": "so the Java code that I spent months working on or PHP God forbid or whatever it is that you're creating and you've",
    "start": "292000",
    "end": "298039"
  },
  {
    "text": "putting that sorry I have some biases apologize so you know that you've put into uh into your environment um that's",
    "start": "298039",
    "end": "304600"
  },
  {
    "text": "just a very small part of that environment and it exists in this much more complicated space that previous to",
    "start": "304600",
    "end": "310160"
  },
  {
    "text": "something like AWS you just um uh pretended it worked fine because it was",
    "start": "310160",
    "end": "315280"
  },
  {
    "text": "somebody else's responsibility but as a single individual you could create all of this and have it done in a day and",
    "start": "315280",
    "end": "320720"
  },
  {
    "text": "actually deploy your application in there but you might not realize that even though you've created all this it's",
    "start": "320720",
    "end": "326120"
  },
  {
    "text": "also your responsibility to to secure and manage all that and that's the entire system right the",
    "start": "326120",
    "end": "331759"
  },
  {
    "text": "majority of the system is going to be provided by whichever provider you're using but let's say AWS and while they",
    "start": "331759",
    "end": "337520"
  },
  {
    "text": "give you all these wonderful pieces here it's your responsibility to make sure they're secure to make sure that you're using them correctly and that when",
    "start": "337520",
    "end": "343720"
  },
  {
    "text": "you've hooked them together that you haven't introduced any sort of um uh you know emergent uh kind of uh chaos into",
    "start": "343720",
    "end": "350600"
  },
  {
    "text": "that system because it can get quite complex so if that's where I try to go",
    "start": "350600",
    "end": "357039"
  },
  {
    "text": "with a nice environment that's clean and makes a you know beautiful Visio diagram um what do I start out",
    "start": "357039",
    "end": "363680"
  },
  {
    "start": "363000",
    "end": "405000"
  },
  {
    "text": "with well I mean this should come in no surprise you get from AWS you get the equivalent of an infinite number of rack",
    "start": "363680",
    "end": "370160"
  },
  {
    "text": "empty racks that you can do anything it's like that scene from The Matrix where Neo steps out and says I need guns",
    "start": "370160",
    "end": "375800"
  },
  {
    "text": "lots of guns right and just guns start showing up so every day I wake up and I go I need servers lots of servers right",
    "start": "375800",
    "end": "382960"
  },
  {
    "text": "and uh they just start showing up and that was very exciting that's why I started playing with AWS the fact that I could go and create 100 systems just by",
    "start": "382960",
    "end": "390319"
  },
  {
    "text": "clicking a button was was unbelievable right and you get a friendly web interface you get a mile long list of of",
    "start": "390319",
    "end": "396240"
  },
  {
    "text": "compliance certifications and then you show up you or I right the customer we show",
    "start": "396240",
    "end": "402280"
  },
  {
    "text": "up and we put our stuff in it and this is what happens we create the the digital",
    "start": "402280",
    "end": "408160"
  },
  {
    "start": "405000",
    "end": "502000"
  },
  {
    "text": "equivalent of this right or the virtual equivalent of this right we uh we",
    "start": "408160",
    "end": "413599"
  },
  {
    "text": "started with these Grand Ambitions and everything was going to be absolutely perfect and clean just the way it started but a week goes by and maybe you",
    "start": "413599",
    "end": "420520"
  },
  {
    "text": "take a break and you step out and you gave one of your developer friends access to the to the console while you're away and then you come back and",
    "start": "420520",
    "end": "426479"
  },
  {
    "text": "you're like why are the 300 systems running and what are they named and why do I have 50 launch you know uh launch",
    "start": "426479",
    "end": "433240"
  },
  {
    "text": "group zeros laying around and why are all the firewall rules open to the entire internet and what the hell is",
    "start": "433240",
    "end": "438680"
  },
  {
    "text": "going on right and oh my God my bill it's like $5,000 what happened you know",
    "start": "438680",
    "end": "443919"
  },
  {
    "text": "how many people had that uh really fun experience the first time where they realized that uh you don't even know",
    "start": "443919",
    "end": "449039"
  },
  {
    "text": "what I'm going to ask you guys raising your you realize the bugs cost like real demonstrable dollars very quickly right",
    "start": "449039",
    "end": "456840"
  },
  {
    "text": "yeah I've written a buggy line of code and been like oops I just spent $300 right so you get the digital or the",
    "start": "456840",
    "end": "464479"
  },
  {
    "text": "virtual equivalent of this and um if you're like me you're at some point that guy hang you know stuck in there",
    "start": "464479",
    "end": "470520"
  },
  {
    "text": "somewhere trying to figure out what on Earth have I have I gotten myself into and um and so a lot of people go",
    "start": "470520",
    "end": "477520"
  },
  {
    "text": "you know what building uh applications on top AWS is complicated there's a lot of services I'm going to just do the",
    "start": "477520",
    "end": "483319"
  },
  {
    "text": "safe route and I'm going to forklift my existing applications in Amazon because",
    "start": "483319",
    "end": "488919"
  },
  {
    "text": "I've had you know maybe dozens maybe hundreds of people working on these apps and they've got an operations team and",
    "start": "488919",
    "end": "494639"
  },
  {
    "text": "everybody understands everything so I'm just going to forklift them and deploy them into Amazon and uh you know that's a nice",
    "start": "494639",
    "end": "501240"
  },
  {
    "text": "idea but the problem is that forklifting can also be a little bit dangerous right so forklifting is that process of taking",
    "start": "501240",
    "end": "506879"
  },
  {
    "text": "a legacy application and moving it into into something like AWS um a lot of",
    "start": "506879",
    "end": "512399"
  },
  {
    "text": "times it's the most expensive way because a lot of times we don't realize just how low our utilization of the",
    "start": "512399",
    "end": "518200"
  },
  {
    "text": "resources is right so sometimes we oversize the systems but it's also dangerous right you take all those",
    "start": "518200",
    "end": "525160"
  },
  {
    "text": "existing controls that you've got your ids's your firewalls your whatever it is you're using some fancy Sim product that",
    "start": "525160",
    "end": "531600"
  },
  {
    "text": "have been tracking all the events and you put that in ads and it's all wonderful but it's also completely",
    "start": "531600",
    "end": "536800"
  },
  {
    "text": "oblivious to something I'm going to be spending a lot of time talking about which is the API and how that is the",
    "start": "536800",
    "end": "543160"
  },
  {
    "text": "real uh controller for your entire environment the other problem that that comes out of this that I'll also talk",
    "start": "543160",
    "end": "549680"
  },
  {
    "text": "about is um how previously ignored or very low priority vulnerabilities or vulnerabilities you didn't think were",
    "start": "549680",
    "end": "555399"
  },
  {
    "text": "really that important to you become really bad things in in Amazon and the meaning of availability",
    "start": "555399",
    "end": "562680"
  },
  {
    "text": "also changes where you had a dozen people who are tasked with keeping a single machine up and running like I",
    "start": "562680",
    "end": "568519"
  },
  {
    "text": "like to think of avail in the in the realm of security the meaning of availability completely changes and so",
    "start": "568519",
    "end": "575079"
  },
  {
    "text": "it's not about having a dozen people or 100 people or a million people all tasked with keeping a single machine",
    "start": "575079",
    "end": "580120"
  },
  {
    "text": "running availability in AWS is about um having U multiple multiples of",
    "start": "580120",
    "end": "585720"
  },
  {
    "text": "everything right um You need to have at least two machines because failure is guaranteed and you know the Netflix guys",
    "start": "585720",
    "end": "592279"
  },
  {
    "text": "have talked a lot about this in the past if you've watched any of their talks where they talk about what they've done with chaos monkey where they said you",
    "start": "592279",
    "end": "598120"
  },
  {
    "text": "know what fail it's that things are going to blow up so let's just make that process happen a little faster so we'll",
    "start": "598120",
    "end": "603800"
  },
  {
    "text": "evolve a little bit faster and it's true sooner or later it's going to fail so that one box that runs in your data",
    "start": "603800",
    "end": "610200"
  },
  {
    "text": "center that nobody knows what it does but generates a $100 million you move that into cloud and you haven't thought",
    "start": "610200",
    "end": "615480"
  },
  {
    "text": "about rearching it it's the Titanic waiting to happen right so all this kind",
    "start": "615480",
    "end": "622760"
  },
  {
    "start": "621000",
    "end": "721000"
  },
  {
    "text": "of comes together at what you know kind of the first point I want to make here that what I think about is emerging insecurity right how many people ever",
    "start": "622760",
    "end": "629120"
  },
  {
    "text": "heard of like emergent properties of complex systems right where these properties come out of the woodwork that",
    "start": "629120",
    "end": "634240"
  },
  {
    "text": "you could never possibly expect a lot of people spend a lot of time trying to to",
    "start": "634240",
    "end": "639519"
  },
  {
    "text": "test every eventuality to test everything that they can possibly do before they deploy their software the problem within within an environment",
    "start": "639519",
    "end": "645720"
  },
  {
    "text": "like AWS or really any cloud provider is that that environment has a lot of very unpredictable things one of the things I",
    "start": "645720",
    "end": "653320"
  },
  {
    "text": "like to um remark on quite a lot is is something I call internet weather how many people have ever heard of Internet",
    "start": "653320",
    "end": "659600"
  },
  {
    "text": "weather so I'm I'm going to be the world's first internet weather reporter at some point um internet weather is you",
    "start": "659600",
    "end": "665480"
  },
  {
    "text": "know you come come to work one day and you're looking at the system you're like everything just seems to be running a little bit slower or this everything",
    "start": "665480",
    "end": "671360"
  },
  {
    "text": "seems to be running a little bit faster this system seems to be um just behaving a little bit odd and it's kind of like",
    "start": "671360",
    "end": "677079"
  },
  {
    "text": "all right well in the uh west region today things are running a little bit slower but in the East it's really fast",
    "start": "677079",
    "end": "682560"
  },
  {
    "text": "and it's going to be a nice sunny day right so this internet weather kind of affects your whole system so now the",
    "start": "682560",
    "end": "687760"
  },
  {
    "text": "systems you've got that were dependent on having consistent access to disk or a very reliable ability to to communicate",
    "start": "687760",
    "end": "694360"
  },
  {
    "text": "with systems well they're they're uh vulnerable to to internet weather right and these kind of emergent problems",
    "start": "694360",
    "end": "700360"
  },
  {
    "text": "start to be to enter into the system and a system that was perfectly secure starts to have these cascading failures",
    "start": "700360",
    "end": "706440"
  },
  {
    "text": "and if you look at like the most complex systems in the world things like airplanes or things like that you'll see this cascading failure effect where lots",
    "start": "706440",
    "end": "713320"
  },
  {
    "text": "of little things come together to conspire and cause a very uh big problem and of course the larger you scale these",
    "start": "713320",
    "end": "719839"
  },
  {
    "text": "systems the worse it gets um so internet weather guaranteed failure everything is software defined",
    "start": "719839",
    "end": "727519"
  },
  {
    "start": "721000",
    "end": "760000"
  },
  {
    "text": "um a lot of people don't build systems with the idea that I can take I can do the uh the virtual equivalent of yanking",
    "start": "727519",
    "end": "734040"
  },
  {
    "text": "an Ethernet card out of a machine and plugging it into another one without losing a packet right but I can do that",
    "start": "734040",
    "end": "740720"
  },
  {
    "text": "within a cloud environment I can take the virtual network adapter and plug it into another one right um and then all",
    "start": "740720",
    "end": "746800"
  },
  {
    "text": "the out of- band management capabilities are all happening completely outside of any of the traditional controls and this",
    "start": "746800",
    "end": "753360"
  },
  {
    "text": "I'm really talking about the API and the API is everything it's everything that we need to um really concern ourselves",
    "start": "753360",
    "end": "759440"
  },
  {
    "text": "with it so my recommendation on that point and kind of the the the piece here to",
    "start": "759440",
    "end": "765199"
  },
  {
    "start": "760000",
    "end": "887000"
  },
  {
    "text": "you know kind of put a bow on this is that I recommend um that we think about you know eventual consistency from a",
    "start": "765199",
    "end": "770560"
  },
  {
    "text": "security model right and this one's really tough because you could say oh this just sounds kind of like a a uh you",
    "start": "770560",
    "end": "777639"
  },
  {
    "text": "know a perfect world and I I'll be the first admit there are certain types of systems that are not going to map onto this but the idea is that you should get",
    "start": "777639",
    "end": "783680"
  },
  {
    "text": "your decision Loop tight enough so that you're able to respond versus trying to control change you're able to respond to",
    "start": "783680",
    "end": "790519"
  },
  {
    "text": "change and if you can respond to change fast enough it's better than being able to control change because the truth is",
    "start": "790519",
    "end": "796560"
  },
  {
    "text": "we'll never be able to control change and particularly in a cloud environment where the changes are a lot of times out of your control completely right if you",
    "start": "796560",
    "end": "804600"
  },
  {
    "text": "try to maintain complete control and your entire system for managing and securing your environment is based on",
    "start": "804600",
    "end": "809800"
  },
  {
    "text": "change control and then you move to an AWS like environment where your developers might be sitting at that",
    "start": "809800",
    "end": "815160"
  },
  {
    "text": "console or Internet weather is affecting you one day um you're eventually going to have chaos you're eventually not",
    "start": "815160",
    "end": "820480"
  },
  {
    "text": "going to be able to survive uh when something does change and it will happen um you thinking about that how",
    "start": "820480",
    "end": "827279"
  },
  {
    "text": "many people heard about the when Netflix like a year ago at Christmas time like died right did that happen to anybody",
    "start": "827279",
    "end": "833759"
  },
  {
    "text": "people like with their kids and they were screaming so the year after that happened how many people noticed any",
    "start": "833759",
    "end": "840279"
  },
  {
    "text": "disruption in Netflix's uh Services how many people knew that they shut off 50%",
    "start": "840279",
    "end": "847160"
  },
  {
    "text": "of their entire environment and nobody noticed right they realized that they couldn't control change and so they and",
    "start": "847160",
    "end": "853759"
  },
  {
    "text": "they got in that problem it bit them really big on Christmas probably one of the most important times of the year and",
    "start": "853759",
    "end": "858839"
  },
  {
    "text": "they said all right well the best way for us to handle this is to create the most chaotic event we can imagine and",
    "start": "858839",
    "end": "864680"
  },
  {
    "text": "accept that it's going to happen and they destroyed the entire east coast of their operations and they failed over",
    "start": "864680",
    "end": "869880"
  },
  {
    "text": "the west coast and nobody noticed it was amazing right now granted that works for a streaming platform where we have",
    "start": "869880",
    "end": "875519"
  },
  {
    "text": "millions of users it's going to be a different approach if you're managing a financial system where you have certain kinds of transactions that have to",
    "start": "875519",
    "end": "881800"
  },
  {
    "text": "maintain consistency so you can't apply this everywhere obviously all right so I keep on talking",
    "start": "881800",
    "end": "889639"
  },
  {
    "start": "887000",
    "end": "937000"
  },
  {
    "text": "about the API and this is the king of the jungle the line of this jungle line of of AWS or any environment is the API",
    "start": "889639",
    "end": "896800"
  },
  {
    "text": "if we're thinking traditionally about how I'm managing systems and I'm logging into them and I'm setting them up and I'm creating snowflakes and I'm going",
    "start": "896800",
    "end": "902680"
  },
  {
    "text": "about things the way I originally did I'm missing out on a very powerful piece of that environment I'm also missing out",
    "start": "902680",
    "end": "909399"
  },
  {
    "text": "on an entire channel for for how that environment gets managed or can be disrupted out from underneath of me and",
    "start": "909399",
    "end": "915279"
  },
  {
    "text": "that king of that jungle is the apis right and that's why you know if you spend a lot of time just looking at the",
    "start": "915279",
    "end": "921279"
  },
  {
    "text": "AWS console and you haven't delved into what you can do with the apis or built automation around that you're missing out on a big part of what um uh makes it",
    "start": "921279",
    "end": "929240"
  },
  {
    "text": "powerful but also what can make it very dangerous as well so when you think about that new introduction this new",
    "start": "929240",
    "end": "936360"
  },
  {
    "text": "line of the Jungle here you have to ask yourself what is actually my new attack surface so there's a really interesting",
    "start": "936360",
    "end": "942440"
  },
  {
    "start": "937000",
    "end": "1050000"
  },
  {
    "text": "you know kind of famous quote from christh where he talked about if your security sucks now you'll be pleasantly surprised by the lack of change when you",
    "start": "942440",
    "end": "949040"
  },
  {
    "text": "move to the cloud right and um I I would I would argue that in the reality it actually gets a lot worse it doesn't get",
    "start": "949040",
    "end": "956000"
  },
  {
    "text": "better and it's not because of anything that uh Amazon or Microsoft or anybody did it's",
    "start": "956000",
    "end": "962040"
  },
  {
    "text": "because you haven't spent the time to understand how these things affect you internet weather software defin",
    "start": "962040",
    "end": "968680"
  },
  {
    "text": "everything and um you know the API endpoints let's talk about those for a second right they're open by Design they",
    "start": "968680",
    "end": "974720"
  },
  {
    "text": "Trump all existing controls I could spend a lot of time locking down my machine and I could come right back in",
    "start": "974720",
    "end": "980680"
  },
  {
    "text": "behind it and clone it and disable a lot of the controls that I've created um the public uh or the private",
    "start": "980680",
    "end": "987319"
  },
  {
    "text": "IPS might be public when I create a machine inside of ec2 classic now most people when they create a new account",
    "start": "987319",
    "end": "993040"
  },
  {
    "text": "they're in in VPC but a lot of systems continue to run ec2 classic you get a private IP address and you can all sign",
    "start": "993040",
    "end": "999560"
  },
  {
    "text": "at a a public IP address and you might think oh well it's on a 10. network range nobody's going to be able to ever",
    "start": "999560",
    "end": "1005319"
  },
  {
    "text": "see that I'll have my admin interface running on that well guess what if I'm a a customer in ec2 classic I create my",
    "start": "1005319",
    "end": "1012079"
  },
  {
    "text": "own private system in there I can the private IP space is is open to a lot of things I can poke around and I've you",
    "start": "1012079",
    "end": "1019199"
  },
  {
    "text": "know taken a very casual look looking around and there are a lot of web servers running out there um and so I'll",
    "start": "1019199",
    "end": "1026280"
  },
  {
    "text": "get to that in a second right but the only thing ultimately the only thing that's really standing between you and a",
    "start": "1026280",
    "end": "1032199"
  },
  {
    "text": "total compromise of your entire data center is the security or the secrecy of your API keys and you know think about",
    "start": "1032199",
    "end": "1040480"
  },
  {
    "text": "that for a second it's not just that they're going to get access to a few systems is that you're going to let somebody get access to your entire data",
    "start": "1040480",
    "end": "1046839"
  },
  {
    "text": "center right so API access in the virtual world in",
    "start": "1046839",
    "end": "1053720"
  },
  {
    "start": "1050000",
    "end": "1066000"
  },
  {
    "text": "the cloud World means physical access right and that's the the piece that we have to realize is is U kind of the the",
    "start": "1053720",
    "end": "1060760"
  },
  {
    "text": "Lynch pin of this whole thing so what exactly can happen if I uh",
    "start": "1060760",
    "end": "1066440"
  },
  {
    "start": "1066000",
    "end": "1113000"
  },
  {
    "text": "uh have the the you know a credential exposure well so pretty common we've probably heard about people where they",
    "start": "1066440",
    "end": "1072360"
  },
  {
    "text": "go in and uh you know somebody gets access to the keys and the first thing they do is they set up a Bitcoin mining",
    "start": "1072360",
    "end": "1078320"
  },
  {
    "text": "operation how many how many people have had that happen to them one two three okay I've been lucky it hasn't happened",
    "start": "1078320",
    "end": "1084280"
  },
  {
    "text": "to me but it's um it's very real and um you know I think that everybody who had",
    "start": "1084280",
    "end": "1090080"
  },
  {
    "text": "that happen to them is actually the the luckiest of the bunch to be honest right you had an impact to your bill but what",
    "start": "1090080",
    "end": "1096440"
  },
  {
    "text": "they could really do is they could go further than that they could adjust you know go in and alter your applications they could start spreading you know some",
    "start": "1096440",
    "end": "1102039"
  },
  {
    "text": "sort of malware they could use your environment to launch additional attacks they could download all of your customer data from from your environment I mean",
    "start": "1102039",
    "end": "1108960"
  },
  {
    "text": "maybe they do all four of these things ultimately once they're done with this they could go in and they could nuke the",
    "start": "1108960",
    "end": "1114200"
  },
  {
    "start": "1113000",
    "end": "1151000"
  },
  {
    "text": "entire data center right and there are companies that have found this out the hard way who have",
    "start": "1114200",
    "end": "1120320"
  },
  {
    "text": "built environments and uh and accidentally let their credentials get exposed and some of them just had",
    "start": "1120320",
    "end": "1125480"
  },
  {
    "text": "Bitcoin mining operations but there was a there was a pretty um uh a pretty big",
    "start": "1125480",
    "end": "1131080"
  },
  {
    "text": "case where a company had this happen to them where they lost their entire environment had to shut down completely",
    "start": "1131080",
    "end": "1136400"
  },
  {
    "text": "right so the entire um ability for your uh company to function rests on top of",
    "start": "1136400",
    "end": "1142600"
  },
  {
    "text": "the secrecy of those API keys so you can guess where I'm going with this we're going to talk a little about how we might get access to these keys",
    "start": "1142600",
    "end": "1148799"
  },
  {
    "text": "right so what are some of the traditional controls I can bypass so let's take an",
    "start": "1148799",
    "end": "1154760"
  },
  {
    "start": "1151000",
    "end": "1267000"
  },
  {
    "text": "ec2 system put it in VPC lock it down block all the network traffic throw away",
    "start": "1154760",
    "end": "1159880"
  },
  {
    "text": "the SSH Keys throw away the passwords just shut everything down make it absolutely impossible in the physical",
    "start": "1159880",
    "end": "1166280"
  },
  {
    "text": "world I would have to actually at this point walk up to the machine and and do something on the",
    "start": "1166280",
    "end": "1171880"
  },
  {
    "text": "console well you could say that machine is completely locked down but in AWS I",
    "start": "1171880",
    "end": "1177320"
  },
  {
    "text": "can just make an API call if I've got the permissions to do so I can make a call in there clone that system open it",
    "start": "1177320",
    "end": "1183000"
  },
  {
    "text": "up I don't have to have the keys I don't have to have anything snapshot it mount it to a machine that I do have control",
    "start": "1183000",
    "end": "1189039"
  },
  {
    "text": "uh of and then I can extract anything I need or want and the best part about that is",
    "start": "1189039",
    "end": "1194480"
  },
  {
    "text": "there are no traditional controls that you have in place that are probably going to detect me doing that right same is true of RDS I've built out",
    "start": "1194480",
    "end": "1202400"
  },
  {
    "text": "U my you know database hosted in RDS maybe it's my SQL Oracle postgress and",
    "start": "1202400",
    "end": "1207840"
  },
  {
    "text": "uh I don't need your passwords to get to that database I just need a snapshot you could have come up with the world's most",
    "start": "1207840",
    "end": "1213840"
  },
  {
    "text": "complicated password that database if I can snapshot it I can mount it and take it someplace else so as an attacker if",
    "start": "1213840",
    "end": "1220320"
  },
  {
    "text": "I'm looking at your applications running in AWS or any Cloud environment and I",
    "start": "1220320",
    "end": "1225480"
  },
  {
    "text": "and I I look at that and I go you know what I could spend all day with the SQL injection vulnerability that I'm trying",
    "start": "1225480",
    "end": "1230760"
  },
  {
    "text": "to perfect or I could just find one of these lesser vulnerabilities I'm going to talk about in a second extract the",
    "start": "1230760",
    "end": "1237280"
  },
  {
    "text": "API Keys clone that database move it into another account so you don't even see the impact of your bill and pull out",
    "start": "1237280",
    "end": "1244440"
  },
  {
    "text": "all the data and completely ex exfiltrate all of your information without uh without you ever really",
    "start": "1244440",
    "end": "1250360"
  },
  {
    "text": "knowing that it happened right there's no transactions in your web server there's no transactions in your IDs logs",
    "start": "1250360",
    "end": "1255919"
  },
  {
    "text": "there's none of that I just made an API call copied snapshot of your database and now I have all of your",
    "start": "1255919",
    "end": "1261840"
  },
  {
    "text": "information so what are some ways that I can get access to uh to the apis right",
    "start": "1261840",
    "end": "1267720"
  },
  {
    "start": "1267000",
    "end": "1289000"
  },
  {
    "text": "so the obvious big mistake is I can you can accidentally check in your API keys to",
    "start": "1267720",
    "end": "1273279"
  },
  {
    "text": "GitHub um I you know would like to believe that that doesn't happen anymore I did a",
    "start": "1273279",
    "end": "1279760"
  },
  {
    "text": "search last night and uh I was really uh really disturbed by what I saw um and I",
    "start": "1279760",
    "end": "1286039"
  },
  {
    "text": "can also exploit vulnerabilities to access Med data so last night when I was looking at get help I did a quick search",
    "start": "1286039",
    "end": "1291559"
  },
  {
    "start": "1289000",
    "end": "1339000"
  },
  {
    "text": "for secret access key and in like the second page of results there's somebody who's going to have a very bad day right",
    "start": "1291559",
    "end": "1298400"
  },
  {
    "text": "it was that easy so the good news about this is that Amazon and other folks have",
    "start": "1298400",
    "end": "1303760"
  },
  {
    "text": "gotten wise to this and they are proactively going out there and trying to find this stuff and alert people before it becomes bad so they are doing",
    "start": "1303760",
    "end": "1309799"
  },
  {
    "text": "the right thing but this is something that's all too easy to do so be very careful about when you're",
    "start": "1309799",
    "end": "1315840"
  },
  {
    "text": "checking in your code that you're not hardcoding your credentials it's so easy to do almost everybody does",
    "start": "1315840",
    "end": "1321279"
  },
  {
    "text": "it thankfully when you go through a lot of the code on GitHub you're starting to see a lot of placeholders for things um",
    "start": "1321279",
    "end": "1326799"
  },
  {
    "text": "so it's a suggestion that people are getting wise or maybe they've just gotten burned by it a little bit too",
    "start": "1326799",
    "end": "1332000"
  },
  {
    "text": "much um but if you want to think about how uh you know quickly this can turn from you know a mistake to really bad um",
    "start": "1332000",
    "end": "1339840"
  },
  {
    "start": "1339000",
    "end": "1390000"
  },
  {
    "text": "set up an API Honeypot take in account you don't care about or it doesn't have systems check in those credentials on",
    "start": "1339840",
    "end": "1345240"
  },
  {
    "text": "the GitHub and then spend a little time looking at your environment and within about 60 Minutes you should see machines",
    "start": "1345240",
    "end": "1351200"
  },
  {
    "text": "starting to pop up in your environment right or did I say 60 seconds 60 Minutes about 60 Minutes or",
    "start": "1351200",
    "end": "1357200"
  },
  {
    "text": "Less it might be 60 seconds it depends if you get lucky right um and it'll be",
    "start": "1357200",
    "end": "1363080"
  },
  {
    "text": "amazing you'll be like wow the power of the cloud look all these machines just generating themselves except you're not the one doing it right and you're the",
    "start": "1363080",
    "end": "1369480"
  },
  {
    "text": "next thing you know they're setting up a very effective Bitcoin mining operation in your environment so that's the best thing",
    "start": "1369480",
    "end": "1375320"
  },
  {
    "text": "that can possibly happen but how can I get access to this a if I haven't like gone and accidentally checked it into my",
    "start": "1375320",
    "end": "1381520"
  },
  {
    "text": "account or I haven't um just made some really uh really dumb Mistake by posting my credentials online somewhere um and",
    "start": "1381520",
    "end": "1388640"
  },
  {
    "text": "so the first area that I want to focus on is metadata and if you search on Google for",
    "start": "1388640",
    "end": "1395240"
  },
  {
    "start": "1390000",
    "end": "1428000"
  },
  {
    "text": "images of metadata you get all kinds of really cool Metallica like stuff I had no idea The Internet Is Awesome right so",
    "start": "1395240",
    "end": "1401320"
  },
  {
    "text": "I love this particular one so this is cloud metadata okay and it is out there and it's",
    "start": "1401320",
    "end": "1406760"
  },
  {
    "text": "something that we don't necessarily think about um but when I bring up a machine inside of ec2 um there's metadata associated",
    "start": "1406760",
    "end": "1413679"
  },
  {
    "text": "with that machine so that the machine can know who it is what it needs to do when it starts up how's it going to bootstrap and if I'm using some of the",
    "start": "1413679",
    "end": "1420320"
  },
  {
    "text": "permissions and policy models that I should be using um it's going to also contain",
    "start": "1420320",
    "end": "1425919"
  },
  {
    "text": "credentials so what is cloud metadata so it's uh kind of loosely",
    "start": "1425919",
    "end": "1431480"
  },
  {
    "start": "1428000",
    "end": "1519000"
  },
  {
    "text": "based on a standard RFC standard that was um uh kind of Taken for this this task and um it does all kinds of a some",
    "start": "1431480",
    "end": "1438720"
  },
  {
    "text": "things um so I can drop a startup script so if you ever wondered how a uh an ec2",
    "start": "1438720",
    "end": "1444120"
  },
  {
    "text": "instance can uh automatically bootstrap itself um how I can pass a script into that machine when it starts up um it's",
    "start": "1444120",
    "end": "1450400"
  },
  {
    "text": "using uh something a project called cloud in it that pulls in these these scripts automatically starts up runs",
    "start": "1450400",
    "end": "1456679"
  },
  {
    "text": "them and um uh I can put a lot of information into metadata as well outside of uh you know tags and other",
    "start": "1456679",
    "end": "1463360"
  },
  {
    "text": "information um and then it also has all kinds of other data and it's not just AWS that has this all Cloud providers",
    "start": "1463360",
    "end": "1469480"
  },
  {
    "text": "have metad data to some extent except Ms Aur is a little bit different um they",
    "start": "1469480",
    "end": "1475600"
  },
  {
    "text": "actually have it in a in a fixed file that lives on the the file system all the other ones provided dynamically",
    "start": "1475600",
    "end": "1480840"
  },
  {
    "text": "through this uh through this interface um and interesting enough I just learned um just the other day that",
    "start": "1480840",
    "end": "1486919"
  },
  {
    "text": "uh while Google has this they have introduced a custom header that makes it",
    "start": "1486919",
    "end": "1492120"
  },
  {
    "text": "much much harder to get access to the metadata which will kind of make it more difficult to extract metadata from",
    "start": "1492120",
    "end": "1498120"
  },
  {
    "text": "system systems and some of the techniques I'll talk about but um at least you know at least there's some ideas of how this will improve and I I",
    "start": "1498120",
    "end": "1504159"
  },
  {
    "text": "expect it will improve at some point but right now if I make a request to that AWS URL I just fire up W uh you know WG",
    "start": "1504159",
    "end": "1511679"
  },
  {
    "text": "or curl I'm going to get back a lot of really interesting information and I would recommend that",
    "start": "1511679",
    "end": "1517320"
  },
  {
    "text": "you use the uh W getter curl because using the command line tools you're not going to get everything so here's just a",
    "start": "1517320",
    "end": "1523360"
  },
  {
    "start": "1519000",
    "end": "1561000"
  },
  {
    "text": "a list of you know running this WG command what I'm going to uh get out of of this and you can see here I've got",
    "start": "1523360",
    "end": "1530200"
  },
  {
    "text": "all kinds of great stuff you know what my public IP address is what my instance ID is these are all the things that I I",
    "start": "1530200",
    "end": "1536880"
  },
  {
    "text": "I can't necessarily get to because they're outside of the system but um just running that W get command is going",
    "start": "1536880",
    "end": "1542159"
  },
  {
    "text": "to give me access to all of this and each one of the ones here that is a folder means there's more data behind",
    "start": "1542159",
    "end": "1547559"
  },
  {
    "text": "that uh more information now if I wanted to extract",
    "start": "1547559",
    "end": "1552799"
  },
  {
    "text": "my credentials out of the metadata if I've assigned a policy or a profile to my instance um what's going to happen is",
    "start": "1552799",
    "end": "1559440"
  },
  {
    "text": "it's going to put that information into a key that's U into the IM am uh key uh",
    "start": "1559440",
    "end": "1566960"
  },
  {
    "start": "1561000",
    "end": "1614000"
  },
  {
    "text": "with the security credentials under a profile and I'm just going to have to do a couple requests to figure out what the profile is and I'm going to get back",
    "start": "1566960",
    "end": "1572760"
  },
  {
    "text": "something like this and the data in red is everything that I need to authenticate and get",
    "start": "1572760",
    "end": "1579919"
  },
  {
    "text": "access right I can take that information pop that into a configuration file my local machine and basically I have these",
    "start": "1579919",
    "end": "1586760"
  },
  {
    "text": "credentials now ready to go running on my system and I can make those API calls with this credentials from anywhere that",
    "start": "1586760",
    "end": "1592240"
  },
  {
    "text": "I need to be so of course the question you're you're wondering is all right well so I can run this from the local machine um what can I what else can I do",
    "start": "1592240",
    "end": "1599760"
  },
  {
    "text": "with this how am I going to get this outside of the machine that I already have access to right and of course these",
    "start": "1599760",
    "end": "1605679"
  },
  {
    "text": "Keys rotate I think there's like a 24-hour timeline on on on how long this key rotates but I've got 24 hours I can",
    "start": "1605679",
    "end": "1611679"
  },
  {
    "text": "do a lot of damage in 24 hours so this is where some of the old",
    "start": "1611679",
    "end": "1616880"
  },
  {
    "start": "1614000",
    "end": "1658000"
  },
  {
    "text": "vulnerabilities I was talking about kind of gain a new life um some of the ones",
    "start": "1616880",
    "end": "1621919"
  },
  {
    "text": "that clearly we're still spending a lot of time worrying about like command injection but we might not be thinking about service side request forgery or",
    "start": "1621919",
    "end": "1628600"
  },
  {
    "text": "even wondering about you know unintended proxy all these kind of lead in a in a direction of where I can somehow trick",
    "start": "1628600",
    "end": "1635399"
  },
  {
    "text": "the application that I've built to make a web request on my behalf and a lot of these",
    "start": "1635399",
    "end": "1641840"
  },
  {
    "text": "vulnerabilities are out there but a lot of times people go what's the big deal I can trick the application to go pull down uh you know a web page somewhere",
    "start": "1641840",
    "end": "1649000"
  },
  {
    "text": "well remember all the metadata apis are just hosted on a web URL right so um",
    "start": "1649000",
    "end": "1656279"
  },
  {
    "text": "what can I do with that well some real world examples of that are um how many people heard about what happened to prei",
    "start": "1656279",
    "end": "1662000"
  },
  {
    "start": "1658000",
    "end": "1782000"
  },
  {
    "text": "so pre is a a presentation company that um they've they've created this kind of",
    "start": "1662000",
    "end": "1667039"
  },
  {
    "text": "new way to do presentations and uh they have a configuration file and they're entirely AWS based you can upload that",
    "start": "1667039",
    "end": "1673679"
  },
  {
    "text": "configuration file into into into their environment it kind of loads it you can put urls in your presentation like go",
    "start": "1673679",
    "end": "1680039"
  },
  {
    "text": "fetch this image and put it in the presentation for me so the attacker was actually chasing",
    "start": "1680039",
    "end": "1687960"
  },
  {
    "text": "a bug Bounty very responsibly disclosed this um figured out oh I'm just going to go and create a presentation that has",
    "start": "1687960",
    "end": "1693799"
  },
  {
    "text": "every single metadata URL and information request that I need and I'm going to put that in a presentation I'm",
    "start": "1693799",
    "end": "1700080"
  },
  {
    "text": "going to upload that to prey and within seconds he got back a presentation that was perfect it had all of the private",
    "start": "1700080",
    "end": "1705880"
  },
  {
    "text": "data of the instance that was running right right and he did this because he was able to exploit one of those",
    "start": "1705880",
    "end": "1711919"
  },
  {
    "text": "vulnerabilities I just talked about um at black hat uh in in Vegas this year Andreas ranero he uh published",
    "start": "1711919",
    "end": "1719919"
  },
  {
    "text": "uh a technique similar to this using a a service side request vulnerability uh uh or request forgery",
    "start": "1719919",
    "end": "1727519"
  },
  {
    "text": "so where he could go in and uh do the same thing he was testing an application figured out you could trick the",
    "start": "1727519",
    "end": "1732840"
  },
  {
    "text": "application to request a URL requested the metadata pulled that back and um and he had to actually to take it a step",
    "start": "1732840",
    "end": "1738720"
  },
  {
    "text": "further he found out that they had tried at least to lock down the uh the policy associated with those credentials so all",
    "start": "1738720",
    "end": "1744919"
  },
  {
    "text": "he could do was inject a sqs message um a into the query uh Q system that AWS",
    "start": "1744919",
    "end": "1751919"
  },
  {
    "text": "provides you um and then he had to exploit a a accelery python vulnerability but once he was in there",
    "start": "1751919",
    "end": "1756960"
  },
  {
    "text": "and he had API access it was only a matter of time and as you start to look you start",
    "start": "1756960",
    "end": "1762159"
  },
  {
    "text": "to think about these vulnerabilities that are lower priority or ones that we haven't necessarily been looking at because we've only been concerned",
    "start": "1762159",
    "end": "1768240"
  },
  {
    "text": "ourselves with SQL injection and crossy scripting if we haven't been thinking about these types of vulnerabilities the",
    "start": "1768240",
    "end": "1773760"
  },
  {
    "text": "ones that are maybe not as exciting when we move to the cloud we could be in for a very rude awakening",
    "start": "1773760",
    "end": "1781120"
  },
  {
    "text": "right so what are some of the things that I can do to control API access well there's not a whole heck of a lot now if",
    "start": "1781120",
    "end": "1787000"
  },
  {
    "start": "1782000",
    "end": "1877000"
  },
  {
    "text": "if if you're using um Google's environment because they have a custom header it's very hard to forge a custom",
    "start": "1787000",
    "end": "1792080"
  },
  {
    "text": "header into a request uh to to do that so that that's going to stop a lot of things but if you're in AWS the only",
    "start": "1792080",
    "end": "1798559"
  },
  {
    "text": "control I really have is I can specify a source IP address when I apply that to the policy um uh that I've created or I",
    "start": "1798559",
    "end": "1805640"
  },
  {
    "text": "sign to my API credentials um and I can assign a a a source IP and you know one",
    "start": "1805640",
    "end": "1812399"
  },
  {
    "text": "thing I might consider doing is assigning the um the source IP of the VPC Gateway that's being used in my VPC",
    "start": "1812399",
    "end": "1818799"
  },
  {
    "text": "environment um you can't lock it down to just oh I'll just lock it down to 10. one you know private IP address space",
    "start": "1818799",
    "end": "1825240"
  },
  {
    "text": "because anybody else in AWS can fire up a machine and private IP space and make that same request right um so that's one",
    "start": "1825240",
    "end": "1833120"
  },
  {
    "text": "uh control you can do um I think this is going to improve in time I'm sure that that AWS is is is going to think about",
    "start": "1833120",
    "end": "1839799"
  },
  {
    "text": "how to lock this down and I think the goog what Google's doing is going to try to become a standard um it doesn't necessarily eliminate the problem uh if",
    "start": "1839799",
    "end": "1846799"
  },
  {
    "text": "I have a command injection vulnerability I can still get access to that information and once I figure out as an",
    "start": "1846799",
    "end": "1852960"
  },
  {
    "text": "attacker that you're running an AWS the first thing that I should be going for is not",
    "start": "1852960",
    "end": "1858840"
  },
  {
    "text": "any of the other vulnerabilities the only thing I care about is getting access to your metadata because that's ideally going to",
    "start": "1858840",
    "end": "1864360"
  },
  {
    "text": "give me access to a lot of a lot of lot of systems in your environment and of course I need to make sure that I'm locking down those policies and that's",
    "start": "1864360",
    "end": "1871399"
  },
  {
    "text": "one of the other problems that I see quite often right so how do you detect if this is even happening right well for",
    "start": "1871399",
    "end": "1877919"
  },
  {
    "start": "1877000",
    "end": "1916000"
  },
  {
    "text": "a lot of people um they use their bill as their IDS system when they move to to",
    "start": "1877919",
    "end": "1883480"
  },
  {
    "text": "something like Amazon right they're like oh I got a really big Bill something something bad must be happening right",
    "start": "1883480",
    "end": "1889600"
  },
  {
    "text": "that became their uh their their their intrusion detection system and uh you know they might not get that bill for",
    "start": "1889600",
    "end": "1895039"
  },
  {
    "text": "for 30 days um all these people have been extremely lucky right so my ask is",
    "start": "1895039",
    "end": "1901519"
  },
  {
    "text": "you know please please don't use your bill as an IDs um ask yourself am I",
    "start": "1901519",
    "end": "1906679"
  },
  {
    "text": "doing anything to actually detect or know what's happening in the background when these AP API calls are being made",
    "start": "1906679",
    "end": "1912760"
  },
  {
    "text": "am I monitoring this side Channel that's that's occurring in my environment and um know there are a lot of things you",
    "start": "1912760",
    "end": "1918880"
  },
  {
    "start": "1916000",
    "end": "1975000"
  },
  {
    "text": "can do there first you can turn on cloud trail in AWS how many people have have played around with cloud trail so turn",
    "start": "1918880",
    "end": "1925279"
  },
  {
    "text": "this on immediately please um everybody should have this turned on I think it should be on by default the moment you",
    "start": "1925279",
    "end": "1931919"
  },
  {
    "text": "uh um start a new uh account in ABS you should turn this on you need to turn it on in all of your regions it'll start",
    "start": "1931919",
    "end": "1938279"
  },
  {
    "text": "storing all the access requests that are happening in uh to your API all the API calls and everything and I'll start",
    "start": "1938279",
    "end": "1944559"
  },
  {
    "text": "storing it in a bucket S3 bucket of your choice and and um you know you can say you know what I'll just keep 6 months",
    "start": "1944559",
    "end": "1950120"
  },
  {
    "text": "worth of data or however long you want to store it um you can use something like log stash as an open source",
    "start": "1950120",
    "end": "1955559"
  },
  {
    "text": "solution to track and monitor all that information um you can go out and buy a commercial solution but if you're",
    "start": "1955559",
    "end": "1961360"
  },
  {
    "text": "building a system or trying to detect intrusions in your ads environment and you're not looking at your cloud trail",
    "start": "1961360",
    "end": "1966519"
  },
  {
    "text": "records that's a huge problem that's a huge mistake so absolutely please turn that",
    "start": "1966519",
    "end": "1972519"
  },
  {
    "text": "on but once you've turned that on you're starting to watch it now you got to really turn your attention to what I I",
    "start": "1972519",
    "end": "1977559"
  },
  {
    "start": "1975000",
    "end": "2014000"
  },
  {
    "text": "call this excessive lack of access control which is where you've got developers creating policies like this right how many people have been like I",
    "start": "1977559",
    "end": "1983880"
  },
  {
    "text": "don't know why it's not working well just open it up right I'll just open up more permissions oh just open we'll get",
    "start": "1983880",
    "end": "1989919"
  },
  {
    "text": "back and we'll fix that later it's just the API I'm not giving anyone the keys right well this is the absolute worst thing you could do only only uh uh I've",
    "start": "1989919",
    "end": "1998120"
  },
  {
    "text": "seen people who are like oh well um I'll lock it down and uh and and I'll block a",
    "start": "1998120",
    "end": "2003279"
  },
  {
    "text": "few services but then they allow people to access I am well I can create user accounts all I want right so I can",
    "start": "2003279",
    "end": "2008360"
  },
  {
    "text": "create new permissions um so this this kind of excessive lack of Access Control is is kind of part of the devops culture",
    "start": "2008360",
    "end": "2015240"
  },
  {
    "start": "2014000",
    "end": "2088000"
  },
  {
    "text": "which I love um because I think it's all about getting stuff done but as we've give developers who don't uh necessarily",
    "start": "2015240",
    "end": "2022120"
  },
  {
    "text": "have a great track record of security because they've been focused on building great stuff bring them into this",
    "start": "2022120",
    "end": "2027720"
  },
  {
    "text": "environment where they're often predisposed at just making it work um you start to see a lot of policies like",
    "start": "2027720",
    "end": "2033120"
  },
  {
    "text": "that and when I've looked at a lot of AWS environments and this has happened in every AWS environment that I've",
    "start": "2033120",
    "end": "2038320"
  },
  {
    "text": "looked at where you have some developers who are new to it they start creating this stuff they start using the Wizards and the automated systems and they start",
    "start": "2038320",
    "end": "2045080"
  },
  {
    "text": "creating these policies that are basically open completely and there's really no way to audit all that",
    "start": "2045080",
    "end": "2052280"
  },
  {
    "text": "stuff so it's on us to kind of guide uh you know the folks who are using this",
    "start": "2052280",
    "end": "2057520"
  },
  {
    "text": "and keep um you know keep devops popular powerful by not uh not allowing the",
    "start": "2057520",
    "end": "2063200"
  },
  {
    "text": "developers to kind of shoot themselves in the foot are ourselves if we're the ones playing around with it and realize",
    "start": "2063200",
    "end": "2068720"
  },
  {
    "text": "that that API access is actually the most important thing that I should be concerning myself with not spending",
    "start": "2068720",
    "end": "2075000"
  },
  {
    "text": "years trying to make sure that the IP tables rules are perfect right or my security group rules are perfect those",
    "start": "2075000",
    "end": "2080839"
  },
  {
    "text": "things are important but if I haven't locked down my API they're all easily",
    "start": "2080839",
    "end": "2087720"
  },
  {
    "start": "2088000",
    "end": "2173000"
  },
  {
    "text": "bypassed the other piece of information that that we sometimes think need to think about in terms of where data can",
    "start": "2088040",
    "end": "2093679"
  },
  {
    "text": "leak out of my AWS environment is tags so tags is something I can assign to",
    "start": "2093679",
    "end": "2099200"
  },
  {
    "text": "pretty much any entity in AWS um it's really wonderful tool it's",
    "start": "2099200",
    "end": "2105400"
  },
  {
    "text": "the only way you're really going to be able to make sense of stuff because everything has got you know complicated ID numbers associated with it you're",
    "start": "2105400",
    "end": "2110720"
  },
  {
    "text": "never going to remember um unless you're Rainman and so you can use tags to assign stuff but realize a lot of us are",
    "start": "2110720",
    "end": "2116960"
  },
  {
    "text": "probably also using thirdparty services that help us manage AWS maybe we're",
    "start": "2116960",
    "end": "2122400"
  },
  {
    "text": "using something that helps keep track of our bills maybe we're using something that starts up systems like right scale or whatnot to help me create",
    "start": "2122400",
    "end": "2128359"
  },
  {
    "text": "environments well they have access to all the tags maybe I'm using a a permissions",
    "start": "2128359",
    "end": "2134119"
  },
  {
    "text": "model and I can do this in AWS I can define a policy that defines who has",
    "start": "2134119",
    "end": "2139560"
  },
  {
    "text": "access to what based on tags what I've just done there is transition the uh the security rights to",
    "start": "2139560",
    "end": "2146359"
  },
  {
    "text": "whoever can create and change tags because if they can create or change tags in my environment now they can",
    "start": "2146359",
    "end": "2151440"
  },
  {
    "text": "create or change the permissions of my environment effectively and I've seen people put a",
    "start": "2151440",
    "end": "2156640"
  },
  {
    "text": "lot of very interesting stuff here in tags I've seen people put passwords in here I've seen people put API keys in",
    "start": "2156640",
    "end": "2162680"
  },
  {
    "text": "here thinking oh this is just going to stay with an AWS those are some of the most scary examples that information can",
    "start": "2162680",
    "end": "2169160"
  },
  {
    "text": "leak out pretty easily so I talked a little bit about",
    "start": "2169160",
    "end": "2175119"
  },
  {
    "start": "2173000",
    "end": "2290000"
  },
  {
    "text": "this just to explain just kind of how that works so if I'm running an an ec2 classic and really the way to get around this is to you should get off ec2 class",
    "start": "2175119",
    "end": "2182079"
  },
  {
    "text": "can get into VPC but for example let's say I'm I'm on a system and I say tell me what the uh",
    "start": "2182079",
    "end": "2188280"
  },
  {
    "text": "uh IP addresses for for a A system that I've uh created and maybe I've given it a nice uh you know C name it tells me oh",
    "start": "2188280",
    "end": "2195800"
  },
  {
    "text": "it's an alias for this other site and then I go into Amazon and I say well what what does that site resolve to and",
    "start": "2195800",
    "end": "2201640"
  },
  {
    "text": "if I make that DNS resolution inside of Amazon Amazon does something extremely helpful which is it translates it to the",
    "start": "2201640",
    "end": "2208359"
  },
  {
    "text": "private IP that I can use so that when when I'm doing my network requests it's routed within Amazon's environment which",
    "start": "2208359",
    "end": "2215319"
  },
  {
    "text": "is great because that traffic doesn't have to go over the open internet but I now know that this server is listening",
    "start": "2215319",
    "end": "2221319"
  },
  {
    "text": "on that private IP address now why is that useful well a long time ago we used to you know see",
    "start": "2221319",
    "end": "2227839"
  },
  {
    "text": "vulnerabilities where um a lot of debug information used to escape we used to see a lot of uh extra uh error messages",
    "start": "2227839",
    "end": "2235160"
  },
  {
    "text": "or details like that and then people started saying you I'm going to turn that off whenever the web server is listening on a public IP address I'm",
    "start": "2235160",
    "end": "2241280"
  },
  {
    "text": "going to make sure that it doesn't give any detailed error messages but for a private IP address oh it's probably a",
    "start": "2241280",
    "end": "2246480"
  },
  {
    "text": "developer using that system so I'm going to cough up all the goods right still happens a day and I can tell",
    "start": "2246480",
    "end": "2253280"
  },
  {
    "text": "you looking at some of the systems that I saw inside AWS that they're in that same ballpark they're giving up a lot",
    "start": "2253280",
    "end": "2259200"
  },
  {
    "text": "more information or they administrative in interfaces that they're not expecting the entire world to have access",
    "start": "2259200",
    "end": "2266119"
  },
  {
    "text": "to granted if uh if I have my web server behind uh you know elb I'm going to get the elb IP address that might not be",
    "start": "2266119",
    "end": "2272319"
  },
  {
    "text": "very useful to me but if I do manage to get the actual IP address that's going to be very useful to me because that's",
    "start": "2272319",
    "end": "2278599"
  },
  {
    "text": "where I'm going to start my attack it's not the public side I can just spend all day going over the Amazon Network very",
    "start": "2278599",
    "end": "2284359"
  },
  {
    "text": "high speed pentesting that private private",
    "start": "2284359",
    "end": "2288480"
  },
  {
    "text": "interface there's also an opportunity to leak things out of other services so looking at ad us buckets um there was",
    "start": "2289920",
    "end": "2296560"
  },
  {
    "start": "2290000",
    "end": "2374000"
  },
  {
    "text": "some research that was done um a little while ago about one in seven buckets out there have absolutely no access",
    "start": "2296560",
    "end": "2302480"
  },
  {
    "text": "credentials on them whatsoever is completely open um that's probably intentional for a lot of them but just",
    "start": "2302480",
    "end": "2309560"
  },
  {
    "text": "taking kind of a cursory look at some of the stuff out there I think actually this example where it's just excessive",
    "start": "2309560",
    "end": "2314720"
  },
  {
    "text": "lack of Access Control with EBS um sometimes I don't",
    "start": "2314720",
    "end": "2320480"
  },
  {
    "text": "think about you know how easy it is to just clone a system I mean how many times have you had a system in Amazon",
    "start": "2320480",
    "end": "2325520"
  },
  {
    "text": "where it just destroyed itself for some reason you're like ah I can't get it to boot how am I going to get access to it well the answer to that is just snapshot",
    "start": "2325520",
    "end": "2332680"
  },
  {
    "text": "it and mount it to another machine that does boot you can easily get access to it well I can use that same method of",
    "start": "2332680",
    "end": "2339200"
  },
  {
    "text": "attack if I've gotten access to your environment to clone any machine I don't need your SSH keys right um I can get",
    "start": "2339200",
    "end": "2346160"
  },
  {
    "text": "around that if I enable EBS encryption and you might not have turned on EBS encryption because you were thinking ah",
    "start": "2346160",
    "end": "2352440"
  },
  {
    "text": "they've got the keys so I don't really is it real encryption anyways because they've got the keys and what difference do it make just turn it on it's not",
    "start": "2352440",
    "end": "2358720"
  },
  {
    "text": "going to impact anything and it's actually going to prevent this type of uh uh of of cloning of the environment",
    "start": "2358720",
    "end": "2364960"
  },
  {
    "text": "particular if I want to take that out of your environment and bring it into mind own and it's a very easy flag that you",
    "start": "2364960",
    "end": "2370960"
  },
  {
    "text": "can turn on when you're creating a DBS volume so all that comes together to kind of call what I what I call here the",
    "start": "2370960",
    "end": "2378000"
  },
  {
    "start": "2374000",
    "end": "2427000"
  },
  {
    "text": "full stack hack where you have a lot of these little different pieces of information or or leakage where I've got",
    "start": "2378000",
    "end": "2383560"
  },
  {
    "text": "private IP space which gives me an administrative interface I can find vulnerabilities more likely in that type",
    "start": "2383560",
    "end": "2389000"
  },
  {
    "text": "of interface that gives me the ability to extract metadata I can go from there to find API keys that let me create",
    "start": "2389000",
    "end": "2394400"
  },
  {
    "text": "other accounts or maybe clone additional information or your database and I can do all of that outside of the",
    "start": "2394400",
    "end": "2401280"
  },
  {
    "text": "traditional world right again not spending any time banging on the front",
    "start": "2401280",
    "end": "2406800"
  },
  {
    "text": "door of your application where you've got all your defenses all your logs everything that's managing that pointed at that uh pointing at that",
    "start": "2406800",
    "end": "2414319"
  },
  {
    "text": "environment so to get a handle on all that to kind of um uh help uh you know",
    "start": "2414319",
    "end": "2419680"
  },
  {
    "text": "people who are using AWS better understand uh what permissions they have in their environment um I started",
    "start": "2419680",
    "end": "2425800"
  },
  {
    "text": "working on a tool um and it's a you know got a great name and a and an image of",
    "start": "2425800",
    "end": "2431359"
  },
  {
    "start": "2427000",
    "end": "2458000"
  },
  {
    "text": "course and uh and the idea was to uh um give people the ability to kind of enumerate some of this data so they can",
    "start": "2431359",
    "end": "2437640"
  },
  {
    "text": "see what's going on and to do it in a very automated or programmatic way so that I don't have to spend a lot of time",
    "start": "2437640",
    "end": "2442760"
  },
  {
    "text": "looking at a web UI um you know bring that information a little bit closer and there's a lot of big systems out there",
    "start": "2442760",
    "end": "2449119"
  },
  {
    "text": "there's a lot of people who created things am um Amazon's got a couple tools I'll talk about a couple other tools that are out there um so this isn't the",
    "start": "2449119",
    "end": "2455760"
  },
  {
    "text": "only thing that's out there um but I wanted to make my life easier on a couple things",
    "start": "2455760",
    "end": "2461760"
  },
  {
    "start": "2458000",
    "end": "2498000"
  },
  {
    "text": "um first thing is I wanted to be able to analyze all of the I am permissions and and really understand what does this",
    "start": "2461760",
    "end": "2466960"
  },
  {
    "text": "user or this key actually have access to what can it touch and what can it touch right um the other piece was I wanted to",
    "start": "2466960",
    "end": "2474319"
  },
  {
    "text": "be able to record all the services and and things that were in use like so I could start to understand what are some of those connections between the",
    "start": "2474319",
    "end": "2480160"
  },
  {
    "text": "environments um and then I also wanted to be able to crack open these Amis and EBS images quickly and extract as much",
    "start": "2480160",
    "end": "2486160"
  },
  {
    "text": "information as I could from them um if I ever needed to and uh of course the last part is is coming soon I'm",
    "start": "2486160",
    "end": "2492280"
  },
  {
    "text": "sorry I'm still working on it um so I have a couple screenshots of uh of the",
    "start": "2492280",
    "end": "2497960"
  },
  {
    "text": "system there's not a fancy interface on there but I wanted to be something I could I could script and control so this",
    "start": "2497960",
    "end": "2503079"
  },
  {
    "start": "2498000",
    "end": "2521000"
  },
  {
    "text": "is just an example of doing some permissions analysis where I'm extracting all the all the keys it's not going to make a lot of sense it's a lot",
    "start": "2503079",
    "end": "2509319"
  },
  {
    "text": "of tiny text but this kind of output is the kind of thing where it's going to come back and say okay this user can",
    "start": "2509319",
    "end": "2514880"
  },
  {
    "text": "access these things or these systems can all be accessed through this user and start to connect those dots",
    "start": "2514880",
    "end": "2521319"
  },
  {
    "start": "2521000",
    "end": "2575000"
  },
  {
    "text": "together um the other part piece is basically pulling all the resources together um and the the piece that I I",
    "start": "2521319",
    "end": "2528560"
  },
  {
    "text": "wanted to make also incorporated into this tool is the ability to track change",
    "start": "2528560",
    "end": "2533640"
  },
  {
    "text": "right um after the fact so it can interface with cloud trail logs if you haven't even um been running that you",
    "start": "2533640",
    "end": "2540400"
  },
  {
    "text": "just started that that that's great but if you've had those running for a while it'll pull that information in so you can see what changed when um based on um",
    "start": "2540400",
    "end": "2548760"
  },
  {
    "text": "you know how this you know system is extracting information so I can see here that this cc2 system transitioned from",
    "start": "2548760",
    "end": "2555000"
  },
  {
    "text": "running state to stop State on this time and whatnot and I get that information out of a lot of other tools um I can get",
    "start": "2555000",
    "end": "2562240"
  },
  {
    "text": "that out of the ABS console but after 14 days or couple hours that information",
    "start": "2562240",
    "end": "2567440"
  },
  {
    "text": "can be gone or I have to go digging through the cloud trail logs so I'm I'm really trying to make this information",
    "start": "2567440",
    "end": "2573760"
  },
  {
    "text": "more at your fingertips and there are certainly other tools out there like Netflix is security monkey and a whole bunch of Open Source",
    "start": "2573760",
    "end": "2581400"
  },
  {
    "start": "2575000",
    "end": "2622000"
  },
  {
    "text": "stuff that's very good at tracking resources I think what you'll find very interesting the tool that I'm going to",
    "start": "2581400",
    "end": "2587680"
  },
  {
    "text": "hopefully release very soon here is it's focus on IM permissions and really defining exactly what a user can do or",
    "start": "2587680",
    "end": "2593720"
  },
  {
    "text": "can't do and what resources and systems it has access to um if you have a higher support level uh within AWS you also",
    "start": "2593720",
    "end": "2600599"
  },
  {
    "text": "have something called trusted advisor which um provides a lot of good information to give you some auditing tools for your security groups as well",
    "start": "2600599",
    "end": "2607640"
  },
  {
    "text": "um and then Andreas released his Nimbo Stratus tool which was designed to kind of exploit that very specific",
    "start": "2607640",
    "end": "2613040"
  },
  {
    "text": "vulnerability he found to extract metadata um he also has some am uh things there as well it's worth checking",
    "start": "2613040",
    "end": "2618440"
  },
  {
    "text": "out some good stuff so you guys have been a great",
    "start": "2618440",
    "end": "2623559"
  },
  {
    "start": "2622000",
    "end": "2791000"
  },
  {
    "text": "audience I hope this kind of broadened your mind to think about what when you're building an Adis environment and how you would go about that I want if",
    "start": "2623559",
    "end": "2630400"
  },
  {
    "text": "anything uh for you to come out of this is to one hope that you have a luck dragon in all of your clouds but two",
    "start": "2630400",
    "end": "2638200"
  },
  {
    "text": "think about the API think about what's possible with that when you forklifting your applications or bringing them into",
    "start": "2638200",
    "end": "2643440"
  },
  {
    "text": "into an Amazon environment don't just think about the traditional controls realize that you've got this uh this",
    "start": "2643440",
    "end": "2649359"
  },
  {
    "text": "this big hole that you can drive a truck through basically uh and and spend some time trying to lock that down any",
    "start": "2649359",
    "end": "2654880"
  },
  {
    "text": "questions folks sure two um on the compliance side",
    "start": "2654880",
    "end": "2661000"
  },
  {
    "text": "of the logging you know I think there's some false sense of security around the PCI or Hipp because they don't do",
    "start": "2661000",
    "end": "2667480"
  },
  {
    "text": "anything on compliance Beyond data center Network yeah so their environment is is perfect until you show up right",
    "start": "2667480",
    "end": "2674040"
  },
  {
    "text": "you know and then you start putting your stuff into the environment so all those certifications a lot of them go out the window the moment you start deploying",
    "start": "2674040",
    "end": "2680480"
  },
  {
    "text": "your apps some people have have considered like oh Amazon's got PCI certification great I've got PCI",
    "start": "2680480",
    "end": "2686480"
  },
  {
    "text": "certific no it doesn't work that way right um they've gone and certified their empty racks essentially as a place",
    "start": "2686480",
    "end": "2695480"
  },
  {
    "text": "where you can build a PCI certif ified environment on top of but you've got to do the extra extra uh extra work to make",
    "start": "2695480",
    "end": "2701559"
  },
  {
    "text": "that reality right and you said you had a second question yeah um SS management",
    "start": "2701559",
    "end": "2707119"
  },
  {
    "text": "so you know have to think about the internal threats as well what about all the amazonis admins that Share account",
    "start": "2707119",
    "end": "2713839"
  },
  {
    "text": "I've heard that access isul have the same passwords for all",
    "start": "2713839",
    "end": "2720720"
  },
  {
    "text": "well so I I do know this is that if I turn on cloud trail I see every access to my to my environment and that's",
    "start": "2720720",
    "end": "2727720"
  },
  {
    "text": "well so everything goes to the API the web access so when I'm on the web console it's going through the API when",
    "start": "2727720",
    "end": "2734760"
  },
  {
    "text": "uh um when I trigger any service or anything like that it's going through the API so there's really there's nothing that can be accomplished outside",
    "start": "2734760",
    "end": "2740960"
  },
  {
    "text": "of that API um so at the very at the very so I don't know that for a fact that would be a question for AWS I",
    "start": "2740960",
    "end": "2746880"
  },
  {
    "text": "certainly haven't seen anything in the years that I've been doing it where I'm like who did that I mean you'll see",
    "start": "2746880",
    "end": "2752920"
  },
  {
    "text": "stuff like an ec2 system being rebooted because you have maintenance events and things like that and you'll",
    "start": "2752920",
    "end": "2758680"
  },
  {
    "text": "see an event where okay this machine has to be rebooted because whatever last couple weeks a whole mess of machines",
    "start": "2758680",
    "end": "2765040"
  },
  {
    "text": "got rebooted in AWS um so you'll see those kinds of events or where systems have to get",
    "start": "2765040",
    "end": "2770520"
  },
  {
    "text": "restarted but um I've never seen anything that would suggest that that's possible um but it's worth you know",
    "start": "2770520",
    "end": "2776839"
  },
  {
    "text": "asking uh we should we should trust but verify right so any other",
    "start": "2776839",
    "end": "2783119"
  },
  {
    "text": "questions awesome you guys have been a great audience thank you very much really appreciate it",
    "start": "2783119",
    "end": "2789650"
  },
  {
    "text": "[Music] [Applause]",
    "start": "2789650",
    "end": "2793409"
  }
]