[
  {
    "start": "0",
    "end": "45000"
  },
  {
    "text": "welcome to black hat Windows 2K security held February 14th through the 15th 2001",
    "start": "18800",
    "end": "24560"
  },
  {
    "text": "in Las Vegas Nevada the following videotape was recorded live at the conference and produced by the sound of",
    "start": "24560",
    "end": "30320"
  },
  {
    "text": "knowledge Incorporated this is videotape number five more technical track null sessions",
    "start": "30320",
    "end": "38160"
  },
  {
    "text": "msrpc and Windows",
    "start": "38160",
    "end": "41760"
  },
  {
    "text": "2000 slides by the way uh at the end of this which you don't have in your um",
    "start": "43760",
    "end": "48960"
  },
  {
    "start": "45000",
    "end": "113000"
  },
  {
    "text": "handouts um sorry about that the uh full presentation will be available on our Razer website and uh in a day or two um",
    "start": "48960",
    "end": "57480"
  },
  {
    "text": "as I said I work a member of the Razer team at Vine view um work on the Hecker",
    "start": "57480",
    "end": "62760"
  },
  {
    "text": "Shield vulnerability scanner um I spent quite a bit of time looking at uh NT and Windows 2000 and uh also written a few",
    "start": "62760",
    "end": "70680"
  },
  {
    "text": "utilities that people like to use to uh audit their NT machines and win2000",
    "start": "70680",
    "end": "76479"
  },
  {
    "text": "machines so our agenda for this talk will be we start with some review um",
    "start": "76520",
    "end": "82439"
  },
  {
    "text": "about what you do with nestion look at the different servers Services you can get them from the workstation and server",
    "start": "82439",
    "end": "88720"
  },
  {
    "text": "Services uh the LSA and the Sam we we'll look at what's different",
    "start": "88720",
    "end": "93960"
  },
  {
    "text": "about Windows 2000 what's new in Windows 2000 um following that we'll take a more",
    "start": "93960",
    "end": "99720"
  },
  {
    "text": "in-depth look at msrpc and then we'll look at uh how you",
    "start": "99720",
    "end": "105200"
  },
  {
    "text": "work around these issues what you do to protect yourselves from them and finally do some questions and",
    "start": "105200",
    "end": "112438"
  },
  {
    "text": "answers so starting from the beginning what's what's a null session um is it",
    "start": "112600",
    "end": "118039"
  },
  {
    "start": "113000",
    "end": "180000"
  },
  {
    "text": "it's sort of talking to a machine anonymously but not entirely it's basically you're going through the motions of doing authentication but you",
    "start": "118039",
    "end": "125560"
  },
  {
    "text": "specifically using no username and no password um it's different from the guest account in that in that regard",
    "start": "125560",
    "end": "131560"
  },
  {
    "text": "what you get when you when you do this is you get the permissions and you will grant to the anonymous account um and",
    "start": "131560",
    "end": "137920"
  },
  {
    "text": "you also get the permissions that everyone is granted and there's a note here in Windows 2000 um if you set",
    "start": "137920",
    "end": "144400"
  },
  {
    "text": "restrict Anonymous equal to two you no longer get the everyone which is is very useful we'll see later",
    "start": "144400",
    "end": "150640"
  },
  {
    "text": "um why are these n sessions actually exist in the first place um a lot of the N Services uh in N4 run with no",
    "start": "150640",
    "end": "156879"
  },
  {
    "text": "privileges on the network there's no credentials and they need to talk to other machines to find things out on the network so they need to be able to",
    "start": "156879",
    "end": "163319"
  },
  {
    "text": "connect to the machine and ask it questions and get information from it and that's why these null sessions there in the first place and finally we have",
    "start": "163319",
    "end": "169720"
  },
  {
    "text": "like the canonical example of how you establish a null session which is just net use the IPC the IP name or or",
    "start": "169720",
    "end": "175280"
  },
  {
    "text": "network name IPC dollar and no username and password",
    "start": "175280",
    "end": "181400"
  },
  {
    "start": "180000",
    "end": "245000"
  },
  {
    "text": "so uh what do you get when you use a no session uh or what can you get first thing is the browser list on N4 is",
    "start": "181400",
    "end": "189080"
  },
  {
    "text": "basically all the information about the domain everything the machines have announced about themselves um there's a utility called net VX which is pretty",
    "start": "189080",
    "end": "195720"
  },
  {
    "text": "useful for getting this stuff um there's the workstation service which is when you're connecting to a",
    "start": "195720",
    "end": "202319"
  },
  {
    "text": "machine on the network to to get a share from it the workstation service is what does that for you so you remotely you",
    "start": "202319",
    "end": "208560"
  },
  {
    "text": "can find out what trans ports the the workstation service is using like if it's using just IP if it's using net",
    "start": "208560",
    "end": "215080"
  },
  {
    "text": "bias over TCP IP um if you happen to have ipx or something like that you would see that there as well the server",
    "start": "215080",
    "end": "221319"
  },
  {
    "text": "service um you can get the same thing about transports you can also find out basically how many connections the",
    "start": "221319",
    "end": "227519"
  },
  {
    "text": "server is currently um serving to other to other uh clients you can also get the",
    "start": "227519",
    "end": "232760"
  },
  {
    "text": "list of the shares um there's an utility by this somebody named carv dog called null. PL runs on NT with a lot of pearl",
    "start": "232760",
    "end": "240400"
  },
  {
    "text": "extensions um does a lot of these a lot of these things you can use uh so more things that you can get",
    "start": "240400",
    "end": "247640"
  },
  {
    "start": "245000",
    "end": "350000"
  },
  {
    "text": "is the by talking to the Sam um the password policy which is also known as the user models for the name of the API",
    "start": "247640",
    "end": "254239"
  },
  {
    "text": "that returns it this is basically um your password policy that tells how long",
    "start": "254239",
    "end": "260000"
  },
  {
    "text": "passwords can be before you have to change them how long they have to be um how many how many uh times you can",
    "start": "260000",
    "end": "267360"
  },
  {
    "text": "change them in a certain amount of time you can get a list of a full list of the users on the Machine by doing a user",
    "start": "267360",
    "end": "273840"
  },
  {
    "text": "enumeration you can get all the groups which are known as Global groups all the members of the groups you can get um the",
    "start": "273840",
    "end": "281440"
  },
  {
    "text": "aliases or what they call internally um which is also the local groups and all their members um and you can also get user",
    "start": "281440",
    "end": "288440"
  },
  {
    "text": "info for each user which is uh basically more or less everything that you that",
    "start": "288440",
    "end": "293639"
  },
  {
    "text": "they know about the user except for the password so that includes the last time they changed the password the number of times they've logged on whether accounts",
    "start": "293639",
    "end": "300240"
  },
  {
    "text": "disabled um what workstations which workstations they're allowed to log in from um and most of this stuff here can",
    "start": "300240",
    "end": "307360"
  },
  {
    "text": "be shut down with by setting restrict Anonymous equal to one um they'll stop the password policy they'll stop the",
    "start": "307360",
    "end": "312639"
  },
  {
    "text": "server and workstation stuff we talked about just a second ago you won't be able to enumerate the users the groups or the aliases or their members um but",
    "start": "312639",
    "end": "321240"
  },
  {
    "text": "what you'll still be able to do is get all the user information if you happen to know what user you want the the information on um this hasn't been welln",
    "start": "321240",
    "end": "330960"
  },
  {
    "text": "because most of the tools that will try to do this for you like dump ACL before they try and get the user information they try and enumerate all the users",
    "start": "330960",
    "end": "337080"
  },
  {
    "text": "first and since that fails with equal to one they don't then go on to get the information but if you just try and say",
    "start": "337080",
    "end": "343520"
  },
  {
    "text": "I want the information for this particular user you still get it back with restrict equal to",
    "start": "343520",
    "end": "349720"
  },
  {
    "start": "350000",
    "end": "487000"
  },
  {
    "text": "one um the next thing is the LSA which is the local security",
    "start": "350000",
    "end": "356759"
  },
  {
    "text": "Authority this has the basically the information about the policy on the machine what domain is a member of what",
    "start": "356759",
    "end": "362680"
  },
  {
    "text": "role it has if it's a primary domain controller or a backup domain controller if it happens to be domain controller",
    "start": "362680",
    "end": "368039"
  },
  {
    "text": "you can get all the trusts informations about it um you also get Sid to name",
    "start": "368039",
    "end": "373400"
  },
  {
    "text": "mappings which is this there's a couple utilities called Sid to user and user to Sid so if you if you happen to know a",
    "start": "373400",
    "end": "379400"
  },
  {
    "text": "particular machine you want to say what the administrator account is you have it's known that the administrator always",
    "start": "379400",
    "end": "385520"
  },
  {
    "text": "has the exact same user ID or or rid as it's called so you just look it up say well they changed their administrator",
    "start": "385520",
    "end": "390720"
  },
  {
    "text": "password or the administrator name to F or whatever um that's more useful when",
    "start": "390720",
    "end": "397319"
  },
  {
    "text": "you combine it with walking the SIDS which is basically something that people decided to do after um restrict",
    "start": "397319",
    "end": "404360"
  },
  {
    "text": "Anonymous equal to one was applied you could no longer talk to the box and just say let me have all the users but what",
    "start": "404360",
    "end": "409400"
  },
  {
    "text": "you can still do is starting at a thousand which is the lowest rid that you're allowed to have um you just start",
    "start": "409400",
    "end": "415720"
  },
  {
    "text": "at 1 th you keep asking it to to give you the name back for that rid R and you just keep going and if you go long",
    "start": "415720",
    "end": "422080"
  },
  {
    "text": "enough you find every user every uh group and Alias on the machine the",
    "start": "422080",
    "end": "427160"
  },
  {
    "text": "question is really when do you stop though because you don't necessarily know it used to be that in prior to I",
    "start": "427160",
    "end": "434599"
  },
  {
    "text": "think about Service Pack five on nt4 it would actually be very helpful and tell you if you have if you asked for an",
    "start": "434599",
    "end": "440759"
  },
  {
    "text": "account that was deleted it would tell you well this account's deleted so you could just keep going until you got an error and then you knew you'd gotten everything that actually changed in",
    "start": "440759",
    "end": "447319"
  },
  {
    "text": "Service Pack 5 I think which uh now that you get the same error",
    "start": "447319",
    "end": "452400"
  },
  {
    "text": "back whether the account's been deleted or whether it's been uh just not allocated yet um and that's actually",
    "start": "452400",
    "end": "458599"
  },
  {
    "text": "something you can do if you want to try and prevent somebody from walking the rids or because really if you're wunning",
    "start": "458599",
    "end": "464240"
  },
  {
    "text": "an application to do this you've got to stop at some point usually what you do is you say I want to stop after I get a certain number of errors in a row and",
    "start": "464240",
    "end": "470599"
  },
  {
    "text": "I'll just they conclude at that point that there aren't anymore so what you can do is an administrator is create",
    "start": "470599",
    "end": "475680"
  },
  {
    "text": "about a thousand or so accounts or more whatever you want to do and then delete them all and they have a big huge block",
    "start": "475680",
    "end": "480919"
  },
  {
    "text": "of rids that aren't there",
    "start": "480919",
    "end": "484840"
  },
  {
    "text": "um so how is win2k different than this well window professional and non-domain",
    "start": "486720",
    "end": "493199"
  },
  {
    "text": "controller servers are pretty much the same as nt4 the uh add the capability",
    "start": "493199",
    "end": "499000"
  },
  {
    "text": "for doing named pipe stuff over Port 445 which is so basically you can do the",
    "start": "499000",
    "end": "505280"
  },
  {
    "text": "same exact stuff over 445 that you can with 139 so it needs to be blocked as well the other new thing in Windows 2000",
    "start": "505280",
    "end": "511599"
  },
  {
    "text": "which is the most useful thing probably is the restrict Anonymous setting equal to two um that's what that does as we said",
    "start": "511599",
    "end": "518039"
  },
  {
    "text": "before is that you no longer get the permissions that are granted to everyone all you get is what happens to be granted to Anonymous logon which is",
    "start": "518039",
    "end": "524959"
  },
  {
    "text": "usually nothing um if you went out of your way to give it something then you would have some but it's not there by default the only problem with restricted",
    "start": "524959",
    "end": "531680"
  },
  {
    "text": "n equal to two is it will cause some compatibility problem so if you want to use it um by all means give it a try but",
    "start": "531680",
    "end": "539760"
  },
  {
    "text": "excuse me anything specific situation it's pretty much when your N4 machines",
    "start": "539760",
    "end": "545800"
  },
  {
    "text": "want to talk to the talk to the uh win 2K machines that have this set if you have a win2k file server for example if",
    "start": "545800",
    "end": "552959"
  },
  {
    "text": "an N4 machine wants to try and uh enumerate the users for putting it in a little dialog box for the access control",
    "start": "552959",
    "end": "558800"
  },
  {
    "text": "list to say I want to give these permissions to this user that kind of thing will not work anymore um there's",
    "start": "558800",
    "end": "564560"
  },
  {
    "text": "also problems with Ras servers on nt4 they need to be able to talk to Wi 2K and uh and get things",
    "start": "564560",
    "end": "571120"
  },
  {
    "start": "573000",
    "end": "674000"
  },
  {
    "text": "credentials so the next thing is a domain controller an active directory and uh this is where things kind of get",
    "start": "573120",
    "end": "580600"
  },
  {
    "text": "complicated um I've done a number quite a bit of testing but I I don't claim to to have actually anywhere near all the",
    "start": "580600",
    "end": "587839"
  },
  {
    "text": "permutations covered about what's possible and what's not um there's a number of factors that I know affect things which I've listed here and I'll",
    "start": "587839",
    "end": "594200"
  },
  {
    "text": "talk about each one in turn but um one of the main points I want to make here is that if you want to know whether",
    "start": "594200",
    "end": "600000"
  },
  {
    "text": "these things are possible against your domain controllers on1 2ks you've really got to try them you can't look at your",
    "start": "600000",
    "end": "605120"
  },
  {
    "text": "domain controller configuration anymore and just say well I've got this restrict set the one or I got the you know I",
    "start": "605120",
    "end": "612240"
  },
  {
    "text": "don't have everyone in the this pre- Windows 2000 compatible access group because there's a lot of different factors that will can make things work",
    "start": "612240",
    "end": "619120"
  },
  {
    "text": "differently than you think and you really need to try it basically with with utilities so the different things",
    "start": "619120",
    "end": "624920"
  },
  {
    "text": "that I've seen that affect things are there's a pre- Windows 2000 compa access group when you promote a server to a",
    "start": "624920",
    "end": "632200"
  },
  {
    "text": "domain controller in U It'll ask you this question about do you want to have pre- Windows 2000 compatible access on",
    "start": "632200",
    "end": "638680"
  },
  {
    "text": "your machine and what if you do say yes then what'll happen is every one group will be end up in there and uh you end",
    "start": "638680",
    "end": "646800"
  },
  {
    "text": "up with more or less what you have with nt4 another thing is restrict Anonymous naturally um trust relationships that",
    "start": "646800",
    "end": "653760"
  },
  {
    "text": "you add can make a difference um and naturally ACLS on active directory objects which is",
    "start": "653760",
    "end": "659760"
  },
  {
    "text": "probably the most useful thing um you can change all of the defaults more or less on on active directory and the last",
    "start": "659760",
    "end": "666360"
  },
  {
    "text": "thing I have here is presence of multiple domain controllers um can change things a little bit make it",
    "start": "666360",
    "end": "671480"
  },
  {
    "text": "harder for for an attacker so the pre- Windows 2000 compatible access if you if you leave it",
    "start": "671480",
    "end": "678639"
  },
  {
    "start": "674000",
    "end": "852000"
  },
  {
    "text": "with everyone in there it works pretty much the same as nt4 if you take it out",
    "start": "678639",
    "end": "684120"
  },
  {
    "text": "what no longer works with an N session is that you can't do any of the Sam calls you can't get information about",
    "start": "684120",
    "end": "689760"
  },
  {
    "text": "any users you can't enumerate them the LSA however is still open so you can still walk rids um after you do that",
    "start": "689760",
    "end": "698760"
  },
  {
    "text": "though you you cannot at that point ask for information about each user it will fail at that point um and changing this",
    "start": "698760",
    "end": "704959"
  },
  {
    "text": "seems to require a reboot which is a little bit odd because normally changing access permissions on objects um",
    "start": "704959",
    "end": "712519"
  },
  {
    "text": "shouldn't should take effect the next time somebody authenticates but it doesn't seem to happen um what seems to",
    "start": "712519",
    "end": "717760"
  },
  {
    "text": "happen is that it's the the server is like caching the fact that everyone used to be in that group and it doesn't",
    "start": "717760",
    "end": "723320"
  },
  {
    "text": "change it until you reboot uh setting restricted Anonymous equal to one it works the same way as an",
    "start": "723320",
    "end": "730160"
  },
  {
    "text": "nt4 um again the LSA calls are still open so you can still enumerate all the users by walking them all um and",
    "start": "730160",
    "end": "737160"
  },
  {
    "text": "naturally that also requires rebooting setting restrict anous equal",
    "start": "737160",
    "end": "743320"
  },
  {
    "text": "to two uh shuts down pretty much everything I haven't seen a lot that you can do pretty much nothing with equal to",
    "start": "743320",
    "end": "750000"
  },
  {
    "text": "two um naturally because you no longer have the permissions that are granted to the everyone group as I said before",
    "start": "750000",
    "end": "755959"
  },
  {
    "text": "there's backward compatibility problems um and also requires a",
    "start": "755959",
    "end": "762240"
  },
  {
    "text": "reboot the next thing I have here is uh a little bit fuzzy because I I tend to do a lot of weird things on my domains",
    "start": "762240",
    "end": "767800"
  },
  {
    "text": "that I test against so what I've seen is that sometimes it appears that trust",
    "start": "767800",
    "end": "773120"
  },
  {
    "text": "relationships especially adding a trust relationship that allows an N4 domain to uh to trust you seems to not seems to",
    "start": "773120",
    "end": "779880"
  },
  {
    "text": "make restrict Anonymous setting equal to one not work particularly well if you do that it seems uh that even with restrict",
    "start": "779880",
    "end": "786680"
  },
  {
    "text": "anous equal to one you can still um do all the enumeration of the groups and",
    "start": "786680",
    "end": "793120"
  },
  {
    "text": "numbers and so forth um the next thing I have here is the multiple domain controllers and what",
    "start": "793120",
    "end": "801120"
  },
  {
    "text": "this changes or what makes this what this makes it harder is when you want to walk the rids because um what happens is",
    "start": "801120",
    "end": "810800"
  },
  {
    "text": "there's these there'll be gaps as we talked about before that make it hard to walk them when you have multiple domain controllers because of the new M",
    "start": "810800",
    "end": "817040"
  },
  {
    "text": "multimaster model each domain controller has a set of rids that it can create accounts from and so you'll end up with",
    "start": "817040",
    "end": "822680"
  },
  {
    "text": "these gaps without doing anything in your in your rid space and if you're trying to walk them all you don't really",
    "start": "822680",
    "end": "828199"
  },
  {
    "text": "know when any any idea when to stop the typically I've seen that if you try and",
    "start": "828199",
    "end": "833279"
  },
  {
    "text": "go for what at least a 100 consecutive errors and then keep going that you usually get everything but there's if",
    "start": "833279",
    "end": "839480"
  },
  {
    "text": "you have multiple domain controllers that doesn't seem to work anymore there can be really really large gaps like",
    "start": "839480",
    "end": "845120"
  },
  {
    "text": "I've heard that there can be a gap of like a million between there",
    "start": "845120",
    "end": "849959"
  },
  {
    "text": "so so there's one last wrinkle about uh domain controllers on win2000 and active directory but to understand it and we",
    "start": "851800",
    "end": "858720"
  },
  {
    "start": "852000",
    "end": "957000"
  },
  {
    "text": "need to take a little bit more look at uh Microsoft RPC or msrpc um this also known as dcpc which",
    "start": "858720",
    "end": "867120"
  },
  {
    "text": "is where these Microsoft uh got it from is basically they adopted the DC RPC model which I think was",
    "start": "867120",
    "end": "874360"
  },
  {
    "text": "originally done by Apollo this is what does the actual work of doing the calls A lot of times you'll",
    "start": "874360",
    "end": "880560"
  },
  {
    "text": "hear about the null session or or sorry the net bias enumerations and they really don't have a whole lot to do with",
    "start": "880560",
    "end": "886360"
  },
  {
    "text": "net bias it just net bias just happens to be the way everybody realized that they worked um and if we look at this",
    "start": "886360",
    "end": "892320"
  },
  {
    "text": "next next slide here this is this is what happens um if you run like netmon and you do these calls this is what",
    "start": "892320",
    "end": "898360"
  },
  {
    "text": "you'll see this is one this is s of the slides that you don't have you probably realized that",
    "start": "898360",
    "end": "903880"
  },
  {
    "text": "um on P 139 what happens you'll have the IP above that you'll have the TCP layer",
    "start": "903880",
    "end": "910320"
  },
  {
    "text": "above that you have the net bias layer the NBT above that you'll have SMB layer",
    "start": "910320",
    "end": "915360"
  },
  {
    "text": "and then finally you have the msrpc uh and then above that you have the particular RPC interface that you're",
    "start": "915360",
    "end": "921079"
  },
  {
    "text": "you're talking to and that RPC interace can be the LSA the Sam the workstation",
    "start": "921079",
    "end": "926680"
  },
  {
    "text": "there's actually uh hundreds of them I I have no idea how many Microsoft likes to create these a lot and just about all of",
    "start": "926680",
    "end": "932560"
  },
  {
    "text": "them are undocumented um the port 40 Port 445 case the net bias part basically drops",
    "start": "932560",
    "end": "939839"
  },
  {
    "text": "right out but as you can see this is why you can still all this do all of these things over 445 is because the msrpc which is what's",
    "start": "939839",
    "end": "948079"
  },
  {
    "text": "really doing the work of getting this information is still there and you can still talk to it over",
    "start": "948079",
    "end": "955399"
  },
  {
    "text": "SMB so I have this slide here that these these are all the different ways what",
    "start": "956720",
    "end": "962000"
  },
  {
    "start": "957000",
    "end": "1053000"
  },
  {
    "text": "they're called as protocol sequences they're basically the different transport methods of taking an",
    "start": "962000",
    "end": "968319"
  },
  {
    "text": "RPC call shipping it off to the server and getting a response back um the",
    "start": "968319",
    "end": "973399"
  },
  {
    "text": "primary ones and I'm by primary I means the one that the ones you should probably worry about coming from the internet because they're all based on IP",
    "start": "973399",
    "end": "979839"
  },
  {
    "text": "at the lowest level U the primary ones are the N the named pipes which is the",
    "start": "979839",
    "end": "985160"
  },
  {
    "text": "SMB those are the two previous slides we looked at um everything goes over B eventually and then to msrpc you can",
    "start": "985160",
    "end": "992199"
  },
  {
    "text": "also do RPC calls over just plain old TCP um that goes from IP to TCP and then",
    "start": "992199",
    "end": "998199"
  },
  {
    "text": "you get the msrpc the same with UDP and this just different you just change TCP to UDP and that works the same way the",
    "start": "998199",
    "end": "1005600"
  },
  {
    "text": "next one is U net bias over tcpip this is the previous two slides but with the",
    "start": "1005600",
    "end": "1011800"
  },
  {
    "text": "SMB part dropped out instead of the NB instead of the NBT um it's not used that commonly but",
    "start": "1011800",
    "end": "1018199"
  },
  {
    "text": "you probably seen it and not realized it as which I'll explain later and the last one I have here is the nccn HTTP which",
    "start": "1018199",
    "end": "1026520"
  },
  {
    "text": "is doing it over Port 80 it's not quite doing it over HTTP I'll mention that in a second on the next slide um and then",
    "start": "1026520",
    "end": "1033319"
  },
  {
    "text": "there are plenty of other ones that don't use IP but if if you're running say a multiprotocol environment on your network you can have ipx that ends up",
    "start": "1033319",
    "end": "1040959"
  },
  {
    "text": "doing RPC you can have apple talk there's there's basically a protocol sequence that supports pretty much every",
    "start": "1040959",
    "end": "1047839"
  },
  {
    "text": "networking that Microsoft supports in their operating system so this nccn HTTP which is U",
    "start": "1047839",
    "end": "1057600"
  },
  {
    "start": "1053000",
    "end": "1117000"
  },
  {
    "text": "somewh also known as Comm internet services what this is is RPC done over",
    "start": "1057600",
    "end": "1063200"
  },
  {
    "text": "Port 80 and it's proxied by IIs um the the",
    "start": "1063200",
    "end": "1068480"
  },
  {
    "text": "good points here are it's not installed by default and even when you install you",
    "start": "1068480",
    "end": "1073640"
  },
  {
    "text": "have to explicitly enable it um the purpose of this basically is to let dcom work through firewalls and it happens",
    "start": "1073640",
    "end": "1080640"
  },
  {
    "text": "also that normal RPC work as well um there are other issues with getting dcom to work through firewalls but the",
    "start": "1080640",
    "end": "1085679"
  },
  {
    "text": "getting past the filtering part of it is what this allows you to do so if you're normally listening to an a port that",
    "start": "1085679",
    "end": "1091960"
  },
  {
    "text": "your firewall is blocking you can use common internet services to connect to Port 80 which may well may well be open",
    "start": "1091960",
    "end": "1097960"
  },
  {
    "text": "for IIs and talk to that uh server anyway it's quite similar to soap in",
    "start": "1097960",
    "end": "1103320"
  },
  {
    "text": "concept the difference is that uh you don't have any XML in this as as you do",
    "start": "1103320",
    "end": "1108919"
  },
  {
    "text": "in soap and you don't need to rewrite your RPC servers um you can just use your normal RPC",
    "start": "1108919",
    "end": "1115600"
  },
  {
    "text": "servers so a good example of something that uses all those protocol sequences we just looked at um is the endpoint",
    "start": "1116280",
    "end": "1123679"
  },
  {
    "start": "1117000",
    "end": "1267000"
  },
  {
    "text": "mapper now this is pretty much analogous to the the port mapper on Unix that listens on 111 um the endpoint mapper on",
    "start": "1123679",
    "end": "1131360"
  },
  {
    "text": "NT and which is 200000 listens on the following things here uh TCP ports 135",
    "start": "1131360",
    "end": "1138760"
  },
  {
    "text": "and UDP Port 135 um this is why everybody says you know you need to block 135 to 139 to block the net bias",
    "start": "1138760",
    "end": "1145440"
  },
  {
    "text": "stuff 135 is really just plain old RPC it's not Nest bias particularly um the nvt part here is",
    "start": "1145440",
    "end": "1153320"
  },
  {
    "text": "Port listens on 135 um if you've ever run say an NBT stat the utility let you look at the net",
    "start": "1153320",
    "end": "1159760"
  },
  {
    "text": "bias name table on another machine if you've done that on your Exchange Server you've probably seen a couple of entries That You Don't See on other servers they",
    "start": "1159760",
    "end": "1166840"
  },
  {
    "text": "if you look at Microsoft's web Pages they talk about uh a list of all these suff suffixes that you can have and they",
    "start": "1166840",
    "end": "1173280"
  },
  {
    "text": "list 87 and 6A as being exchanged the 87",
    "start": "1173280",
    "end": "1178720"
  },
  {
    "text": "is actually this endpoint mapper listening on Port 135 but 8 because 87",
    "start": "1178720",
    "end": "1184400"
  },
  {
    "text": "hex is actually 135 so it it pops up there as well because exchange is listening on this NBT layer as",
    "start": "1184400",
    "end": "1191880"
  },
  {
    "text": "well um the SMB layer it listens on a pipe EP mapper which is available to",
    "start": "1191880",
    "end": "1198360"
  },
  {
    "text": "sessions as well that goes over Port 139 so if you're blocking that then it's all the same um and lastly the HTTP it",
    "start": "1198360",
    "end": "1205960"
  },
  {
    "text": "listens on Port 593 if you might have seen this on your servers and they probably tried to tell net to it or something to see what happens and you",
    "start": "1205960",
    "end": "1212000"
  },
  {
    "text": "got back this ncac _ HTTP this is the endpoint mapper listening on that protocol",
    "start": "1212000",
    "end": "1219120"
  },
  {
    "text": "sequence uh so if you want to find out what this endpoint mapper knows you use this utility called RPC dump which uh is",
    "start": "1219120",
    "end": "1225919"
  },
  {
    "text": "a much better improved version of something called EP dump which used to be in the resource kit uh RPC dump is",
    "start": "1225919",
    "end": "1231760"
  },
  {
    "text": "much more easy to understand basically and what it does is it it dumps out the",
    "start": "1231760",
    "end": "1237000"
  },
  {
    "text": "dynamically registered endpoints um and it tells you basically what the what",
    "start": "1237000",
    "end": "1244480"
  },
  {
    "text": "the each interface ID is on a particular Port what there's an annotation you can",
    "start": "1244480",
    "end": "1249880"
  },
  {
    "text": "provide as a server it'll tell you that um and also the endpoint mapper the",
    "start": "1249880",
    "end": "1256600"
  },
  {
    "text": "same process at least is also used for for decom Activation so all these these ports here that you want to block for for the endpoint mapper are also used",
    "start": "1256600",
    "end": "1263480"
  },
  {
    "text": "for the decom activation now the uh the next little",
    "start": "1263480",
    "end": "1270200"
  },
  {
    "start": "1267000",
    "end": "1376000"
  },
  {
    "text": "item is this RPC management interface this is a uh interface that is",
    "start": "1270200",
    "end": "1275400"
  },
  {
    "text": "implemented by the RPC runtime so all servers that on Microsoft products will",
    "start": "1275400",
    "end": "1280720"
  },
  {
    "text": "support this all RPC servers at least it provides basically general information about your about the RPC server things",
    "start": "1280720",
    "end": "1287559"
  },
  {
    "text": "like uh times it's been called uh who it's running as Which principle that is",
    "start": "1287559",
    "end": "1293480"
  },
  {
    "text": "because in the Kerberos Universe in order to connect to somebody you have to know their name so that you can get a ticket for them so the way you do that",
    "start": "1293480",
    "end": "1299880"
  },
  {
    "text": "with an RPC server is you connect to this interface you ask it who who are you running as it will tell you you can go get a ceros ticket and then connect",
    "start": "1299880",
    "end": "1307000"
  },
  {
    "text": "to that authenticated the uh the last thing I have here that it talks to is this RPC",
    "start": "1307000",
    "end": "1312440"
  },
  {
    "text": "management uh Inc if IDs which is short for inquire interface identif ifers and",
    "start": "1312440",
    "end": "1319520"
  },
  {
    "text": "what that does is it asks the server I want to know everything as far as RPC interfaces that you support and you get",
    "start": "1319520",
    "end": "1326000"
  },
  {
    "text": "a list of them all back um there's a tool that I have that's called if IDs which basic which does this uh it can be",
    "start": "1326000",
    "end": "1332400"
  },
  {
    "text": "used a lot of times you'll see you like running on NT or or running on win2k something listening on 1026 or something",
    "start": "1332400",
    "end": "1338240"
  },
  {
    "text": "listening on 1027 and you don't know what it is and you'd like to and you can",
    "start": "1338240",
    "end": "1343720"
  },
  {
    "text": "you can one thing you can try is talking to the endpoint mapper and asking it everything that it knows and if it's in there uh it may not be because RPC",
    "start": "1343720",
    "end": "1350840"
  },
  {
    "text": "servers don't actually have to register themselves with a with the endpoint mapper but what you can do as a user or",
    "start": "1350840",
    "end": "1357400"
  },
  {
    "text": "remotely without talking to the endpoint mapper is just connect to the server itself and send it this request say I want to know all your RPC interfaces and",
    "start": "1357400",
    "end": "1364120"
  },
  {
    "text": "if it if it actually is an RPC interface or RPC server it will tell you and then you can use the interface IDs that come",
    "start": "1364120",
    "end": "1370279"
  },
  {
    "text": "back and say oh that's exchange that's",
    "start": "1370279",
    "end": "1374720"
  },
  {
    "text": "whatever okay the next thing I have here is is a a slide that talks about uh different endpoints and the interfaces",
    "start": "1375880",
    "end": "1382320"
  },
  {
    "start": "1376000",
    "end": "1441000"
  },
  {
    "text": "that they support when you do null sessions what typically happens is say you were",
    "start": "1382320",
    "end": "1387880"
  },
  {
    "text": "talking to the LSA you'll connect to this named pipe called LSA RPC and then you'll do all the LSA interface calls",
    "start": "1387880",
    "end": "1395000"
  },
  {
    "text": "over that and if you want to talk to the the Sam you connect to a name pipe called samr and you do all your",
    "start": "1395000",
    "end": "1400240"
  },
  {
    "text": "interfaces across that talk to the Sam and also the net logon talks to the interface for the net logon interface",
    "start": "1400240",
    "end": "1407200"
  },
  {
    "text": "but this is what typically done but the actual RPC runtime allows more than this",
    "start": "1407200",
    "end": "1412600"
  },
  {
    "text": "the runtime will allow basically each one of these end points to talk to any of the interfaces so you end up",
    "start": "1412600",
    "end": "1418720"
  },
  {
    "text": "something more like this is what's possible I'm not sure if the blue shows up particularly well but each endpoint",
    "start": "1418720",
    "end": "1424840"
  },
  {
    "text": "can talk to any of the any of the interfaces and the the same thing is",
    "start": "1424840",
    "end": "1430720"
  },
  {
    "text": "pretty much true of protocol sequences that is if you're listening on multiple protocol sequences a particular server",
    "start": "1430720",
    "end": "1437520"
  },
  {
    "text": "you can talk to any of the interfaces that are supported so the question really is",
    "start": "1437520",
    "end": "1443480"
  },
  {
    "start": "1441000",
    "end": "1508000"
  },
  {
    "text": "probably that you're wondering what does this all have to do with null sessions um the answer is that the lsas",
    "start": "1443480",
    "end": "1450520"
  },
  {
    "text": "on Windows 2000 domain controllers contains some additional RPC servers which are used for uh domain active",
    "start": "1450520",
    "end": "1457880"
  },
  {
    "text": "directory replication between servers and it will listen on uh TCP plane TCP",
    "start": "1457880",
    "end": "1464760"
  },
  {
    "text": "it listens on uh plane UDP and it also listens on HTTP which is the common",
    "start": "1464760",
    "end": "1470279"
  },
  {
    "text": "interfaces so because what we just talked about before that any endpoint can talk to any of the",
    "start": "1470279",
    "end": "1475679"
  },
  {
    "text": "interfaces and this and the server is actually listening on other um",
    "start": "1475679",
    "end": "1480799"
  },
  {
    "text": "interfaces you can enumerate the users the Sams all these normal null session things that talked to the Sam and the",
    "start": "1480799",
    "end": "1486480"
  },
  {
    "text": "LSA now work over just general TCP uh and UDP not just 139 and",
    "start": "1486480",
    "end": "1494200"
  },
  {
    "text": "445 um and if if you happen to have Comon and services installed on your domain controller you can do the",
    "start": "1494200",
    "end": "1501080"
  },
  {
    "text": "normal uh give me all your users and things over Port",
    "start": "1501080",
    "end": "1506080"
  },
  {
    "start": "1508000",
    "end": "1636000"
  },
  {
    "text": "80 so how do you solve these problems basically um first thing of course is to",
    "start": "1508000",
    "end": "1514159"
  },
  {
    "text": "firewall everything off um the prefer to use default deny um if you have if you",
    "start": "1514159",
    "end": "1520240"
  },
  {
    "text": "for some reason can't the list of things you really have to block are uh the endpoint mapper which is on 135 as we",
    "start": "1520240",
    "end": "1527080"
  },
  {
    "text": "talked about and also um 593 need to block access to the uh SMB file",
    "start": "1527080",
    "end": "1534360"
  },
  {
    "text": "sharing uh which is ports 139 and 445 and also the UDP on uh 137 and",
    "start": "1534360",
    "end": "1541919"
  },
  {
    "text": "138 you need to uh to block TCP and UDP to what's known as the uh the RPC range",
    "start": "1541919",
    "end": "1548000"
  },
  {
    "text": "and uh when when an RPC server wants a dynamic endpoint there's a particular range that it gets it in usually if you",
    "start": "1548000",
    "end": "1554360"
  },
  {
    "text": "don't do anything it starts at about 1025 and we'll go up from there there's there's a way to configure these things with this these registry key here H key",
    "start": "1554360",
    "end": "1561159"
  },
  {
    "text": "local machine software Microsoft RPC that says I want my Dynamic by my Dynamic endpoints to be in this port",
    "start": "1561159",
    "end": "1567480"
  },
  {
    "text": "range and then you can say you know put everything in there so if you want to then you can block that particular stuff",
    "start": "1567480",
    "end": "1574840"
  },
  {
    "text": "to uh connections from outside um what's the default range the default range",
    "start": "1574840",
    "end": "1580200"
  },
  {
    "text": "starts at 1025 I believe maybe 1024 and basically goes up from",
    "start": "1580200",
    "end": "1586600"
  },
  {
    "text": "there um and when you're blocking this for especially for the UDP case be careful",
    "start": "1586600",
    "end": "1592480"
  },
  {
    "text": "with DNS of course because your domain controllers the active directory domain controllers are also usually DNS servers",
    "start": "1592480",
    "end": "1599000"
  },
  {
    "text": "and so if you're not very careful with this somebody on the internet may be able to send stuff that looks like DNS U",
    "start": "1599000",
    "end": "1604880"
  },
  {
    "text": "but really doing RPC uh the simplest way to get around this is to use a a split DNS servers",
    "start": "1604880",
    "end": "1611399"
  },
  {
    "text": "which means you have one DNS server that talks to the internet and only knows about your internet things and then another that has all your internal",
    "start": "1611399",
    "end": "1618559"
  },
  {
    "text": "things uh and lastly I have on here is goes right along with firewalling which is don't install common internet",
    "start": "1618559",
    "end": "1625159"
  },
  {
    "text": "services uh because basically the whole point of common internet services as far as I can tell is to bypass your",
    "start": "1625159",
    "end": "1632080"
  },
  {
    "text": "firewall um so just don't install it um configuration wise how you you",
    "start": "1632080",
    "end": "1639520"
  },
  {
    "start": "1636000",
    "end": "1726000"
  },
  {
    "text": "solve the L session problems one thing you can do on nt4 at least is unbinding net bias from",
    "start": "1639520",
    "end": "1645640"
  },
  {
    "text": "tcpip so you can no longer talk to the server over uh Port 139 another thing that works on",
    "start": "1645640",
    "end": "1652120"
  },
  {
    "text": "workstations more than servers is uh disabling the server service naturally you can't really do",
    "start": "1652120",
    "end": "1657360"
  },
  {
    "text": "this on your servers because they won't very be able to do very much but on your workstations especially your more secur",
    "start": "1657360",
    "end": "1663720"
  },
  {
    "text": "sensitive workstations like your administrator work workstations unless they're acting as file servers for some reason you can just disable a server",
    "start": "1663720",
    "end": "1670519"
  },
  {
    "text": "service entirely on them and most of these problems will go away um the one",
    "start": "1670519",
    "end": "1676120"
  },
  {
    "text": "problem with that is uh remote Administration then becomes some problem uh lastly setting restrict",
    "start": "1676120",
    "end": "1683159"
  },
  {
    "text": "Anonymous equal to one or two of course is is always good um restrict anous to",
    "start": "1683159",
    "end": "1688240"
  },
  {
    "text": "one on servers and restrict anous to two on workstations is probably the best",
    "start": "1688240",
    "end": "1694000"
  },
  {
    "text": "approach to take until you're all at Windows 2000 and then you can try and go for restricted n equal to",
    "start": "1694000",
    "end": "1700240"
  },
  {
    "text": "two the last thing uh is the pre- Windows 2000 compatible access of course remove everyone when you can this from",
    "start": "1700240",
    "end": "1707080"
  },
  {
    "text": "what I understand understand the reason that you it's there is mainly for N4 Ras servers to be able to get",
    "start": "1707080",
    "end": "1713279"
  },
  {
    "text": "information excuse me SQL servers SQL servers as well um so the sooner you upgrade those",
    "start": "1713279",
    "end": "1720679"
  },
  {
    "text": "to Windows 2000 U the sooner you can take out to every one",
    "start": "1720679",
    "end": "1725640"
  },
  {
    "text": "group U the last thing is H basically acl's active directory has very strong",
    "start": "1725720",
    "end": "1732559"
  },
  {
    "start": "1726000",
    "end": "1929000"
  },
  {
    "text": "support for ACLS on objects throughout the entire hierarchy uh the properties they have as well well you can you can",
    "start": "1732559",
    "end": "1738039"
  },
  {
    "text": "put acl's on so you can go through and say I want I want to deny Anonymous access to information about my",
    "start": "1738039",
    "end": "1744000"
  },
  {
    "text": "administrator group for instance or or something along those lines um Nona",
    "start": "1744000",
    "end": "1750279"
  },
  {
    "text": "director machines you don't have that option normally however there are still LSA and",
    "start": "1750279",
    "end": "1757320"
  },
  {
    "text": "Sam object hierarchies that are exist on each machine nt4 and uh workstations and",
    "start": "1757320",
    "end": "1763320"
  },
  {
    "text": "servers that aren't domain controllers um and you can set ACLS on those but you need special tools to do it uh there was",
    "start": "1763320",
    "end": "1770240"
  },
  {
    "text": "a tool written quite a while ago actually called Fix Paul by Phil brass of ISS and what this does is it goes in",
    "start": "1770240",
    "end": "1776880"
  },
  {
    "text": "and changes the permissions on the LSA object and removes the the ones for they're granted to everyone and changes",
    "start": "1776880",
    "end": "1782640"
  },
  {
    "text": "it to users that cuts out the entire LSA access to the uh Anonymous sessions in",
    "start": "1782640",
    "end": "1789880"
  },
  {
    "text": "all sessions the uh the problem with fix Paul and probably the reason more people haven't uh played with it is that",
    "start": "1789880",
    "end": "1795080"
  },
  {
    "text": "there's nothing to unfix Paul so if you use it and it turns out you",
    "start": "1795080",
    "end": "1800799"
  },
  {
    "text": "can't leave it the way it was then you're you're somewhat stuck um I've written a couple utilities which are",
    "start": "1800799",
    "end": "1806559"
  },
  {
    "text": "called called Sam ACL and LSA ACL which do more or less what the names sound",
    "start": "1806559",
    "end": "1812039"
  },
  {
    "text": "like they're basically wrappers around the ACL editor in Windows 2000 that know how to talk to the Sam and the LSA and",
    "start": "1812039",
    "end": "1819120"
  },
  {
    "text": "you can then manipulate these things so you can try running fixed Paul for instance and if it doesn't work you can undo it with uh with LSA",
    "start": "1819120",
    "end": "1826240"
  },
  {
    "text": "ACL um the the the plus side to doing these ACL things that there's no reboot",
    "start": "1826240",
    "end": "1831600"
  },
  {
    "text": "required for these they take effect pretty much immediately uh the downside which is somewhat serious is uh it's",
    "start": "1831600",
    "end": "1837840"
  },
  {
    "text": "pretty much an invisible change it's really hard to know for somebody coming into an environment say if you just hire",
    "start": "1837840",
    "end": "1843600"
  },
  {
    "text": "a new administrator it's very hard to know that these this changes like this have been done because they're they're completely invisible um and they're also",
    "start": "1843600",
    "end": "1850880"
  },
  {
    "text": "I should add somewhat dangerous you can pretty much ruin your server um there",
    "start": "1850880",
    "end": "1857440"
  },
  {
    "text": "was a a utility that from Microsoft which they never released officially um",
    "start": "1857440",
    "end": "1863360"
  },
  {
    "text": "it's actually available on antibug tr.com called create ALS there was this issue a while ago that domain users can",
    "start": "1863360",
    "end": "1871159"
  },
  {
    "text": "create local groups on the domain controller and somebody wrote an exploit that would just create them Forever",
    "start": "1871159",
    "end": "1877200"
  },
  {
    "text": "Until the domain controller crashed um and there was this utility that would change that permissions basically would",
    "start": "1877200",
    "end": "1883559"
  },
  {
    "text": "take them away the the problem was that if you used it and you had restri set equal to",
    "start": "1883559",
    "end": "1888639"
  },
  {
    "text": "one your your lsass process would go up to like 100% CPU utilization because",
    "start": "1888639",
    "end": "1894919"
  },
  {
    "text": "what what you can actually do with that is you can deny access to the LSA to the operating operating system itself which",
    "start": "1894919",
    "end": "1902480"
  },
  {
    "text": "as you might imagine uh is not what you want to do so if you're going to use these the Sam ACL and the LSA AC ACL to",
    "start": "1902480",
    "end": "1909880"
  },
  {
    "text": "deny access to things I would suggest just using it for um Anonymous just just",
    "start": "1909880",
    "end": "1915240"
  },
  {
    "text": "to deny Anonymous um and and nothing else as far as deny ACLS go I've been",
    "start": "1915240",
    "end": "1921000"
  },
  {
    "text": "playing with that myself for a bit and uh I haven't seen any uh undoable changes at",
    "start": "1921000",
    "end": "1927399"
  },
  {
    "text": "least um let's see so the summary I have is basically the defaults favor of the",
    "start": "1927399",
    "end": "1935080"
  },
  {
    "start": "1929000",
    "end": "1968000"
  },
  {
    "text": "attackers there's there's lots of information available um especially on Windows 2000 domain controllers you",
    "start": "1935080",
    "end": "1940200"
  },
  {
    "text": "really to know what's available you really need to assess get the utilities yourself and run them and and see what",
    "start": "1940200",
    "end": "1945840"
  },
  {
    "text": "you can get I don't rely on just checking well I have restrict equal to one or I have uh everyone out of the",
    "start": "1945840",
    "end": "1952840"
  },
  {
    "text": "that one particular group just if you want to make sure what's available you have to try it yourself and see um firewall things off naturally uh",
    "start": "1952840",
    "end": "1961480"
  },
  {
    "text": "sub restrict Anonymous to one or two if possible and en tighten your ACLS",
    "start": "1961480",
    "end": "1968039"
  },
  {
    "start": "1968000",
    "end": "2349000"
  },
  {
    "text": "and that's pretty much what I have I have uh our website is razor.",
    "start": "1968039",
    "end": "1973840"
  },
  {
    "text": "bind.com this presentation will be up there in a day or to as well as the the Sam ACL and LS ACL utilities um with my",
    "start": "1973840",
    "end": "1981399"
  },
  {
    "text": "email address there for questions and uh if anybody has questions feel",
    "start": "1981399",
    "end": "1988440"
  },
  {
    "text": "free yeah you said earlier something I use quite often is turning off serice service for",
    "start": "1988440",
    "end": "1994200"
  },
  {
    "text": "aist uh you said it may not stop everything what is it that you can",
    "start": "1994200",
    "end": "1999360"
  },
  {
    "text": "possibly think of than service the stopping the server",
    "start": "1999360",
    "end": "2005840"
  },
  {
    "text": "service yeah that that does prettyy much stop everything pretty much as far as i' as far as I've seen yeah pretty much I'm",
    "start": "2005840",
    "end": "2013039"
  },
  {
    "text": "more certain than that so I'm Le think yeah that's just that's typically the way I talk so",
    "start": "2013039",
    "end": "2019440"
  },
  {
    "text": "I I never assume that things I don't know about don't exist so as far as I",
    "start": "2019480",
    "end": "2024639"
  },
  {
    "text": "know it does right but now you said removing the net bio",
    "start": "2024639",
    "end": "2030399"
  },
  {
    "text": "service would keep that ination is that what you I mean you can still connect to the IPC resource with that remov cor are",
    "start": "2030399",
    "end": "2039200"
  },
  {
    "text": "you talking about unbinding net bios from tcpip no removing the net bio service what were you talking about when",
    "start": "2039200",
    "end": "2046799"
  },
  {
    "text": "you counter measur unb I was talking about unbinding net bias from tcpip the winds clock yes okay right not",
    "start": "2046799",
    "end": "2055839"
  },
  {
    "text": "removing that bio service no no and you can't that correct you can still connect",
    "start": "2055839",
    "end": "2061720"
  },
  {
    "text": "to the IPC resource with the net bio service removed completely I don't think I've ever",
    "start": "2061720",
    "end": "2067520"
  },
  {
    "text": "removed the net bi service completely in the back aware",
    "start": "2067520",
    "end": "2076240"
  },
  {
    "text": "already I'm sorry I I didn't quite get it are you aware tools are already to",
    "start": "2076240",
    "end": "2081720"
  },
  {
    "text": "doation over HTTP um the question if you didn't hear was am I aware of currently existing",
    "start": "2081720",
    "end": "2088320"
  },
  {
    "text": "utilities to do this enumeration over HTTP um yes I know about this basically",
    "start": "2088320",
    "end": "2094560"
  },
  {
    "text": "the one that I've written to do it um which isn't available ailable currently um we may make it available on on the",
    "start": "2094560",
    "end": "2101280"
  },
  {
    "text": "website but uh it's not available currently do you have any counter",
    "start": "2101280",
    "end": "2106560"
  },
  {
    "text": "measures to that basically don't install common internet services uh is is the",
    "start": "2106560",
    "end": "2111599"
  },
  {
    "text": "bottom line for that um as I said the whole point of that seems to be to bypass your firewall it's kind of very",
    "start": "2111599",
    "end": "2117160"
  },
  {
    "text": "interesting from a technical point of view I mean the guy who thought it up technically it's like all right cool but",
    "start": "2117160",
    "end": "2122800"
  },
  {
    "text": "uh it doesn't belong in the product as far as you know security wise I don't I don't",
    "start": "2122800",
    "end": "2129559"
  },
  {
    "text": "think y you consider RC to be essentially insecure no matter how much",
    "start": "2130280",
    "end": "2137000"
  },
  {
    "text": "you restrictive what you think you know is there I guess I'm still a little you",
    "start": "2137000",
    "end": "2144200"
  },
  {
    "text": "know 135 open you really restrict the other ports can you know",
    "start": "2144200",
    "end": "2150720"
  },
  {
    "text": "but so is the question if the only thing you",
    "start": "2150720",
    "end": "2155800"
  },
  {
    "text": "can talk to is part 13 35 how bad is it basically right and you restrict that",
    "start": "2155800",
    "end": "2161040"
  },
  {
    "text": "range of you knowthe and assign side Dynamic the dynamic end",
    "start": "2161040",
    "end": "2169400"
  },
  {
    "text": "points if if all you can talk to is for 135 and and nothing else um you won't be",
    "start": "2169400",
    "end": "2175319"
  },
  {
    "text": "able to talk to these these normal or the null session stuff but what 135 is",
    "start": "2175319",
    "end": "2181440"
  },
  {
    "text": "also used for as I mentioned is the decom activation so if if you actually talk to 13 and and you send it that",
    "start": "2181440",
    "end": "2187800"
  },
  {
    "text": "request I mentioned about tell me every interface you support they're actually a lot more than just the endpoint mapper",
    "start": "2187800",
    "end": "2193280"
  },
  {
    "text": "there's uh there's I oxide resolver or something like that uh none of these are very well documented so I wouldn't",
    "start": "2193280",
    "end": "2200280"
  },
  {
    "text": "assume that there aren't problems with these and at the high level what it is meant to allow actually is that people",
    "start": "2200280",
    "end": "2207119"
  },
  {
    "text": "you don't know about you know can connect to 135 and say I would like this dcom server to be started please um and",
    "start": "2207119",
    "end": "2214200"
  },
  {
    "text": "tell me where you've put it more or less it may be that you couldn't talk talk to it afterwards but you probably don't want people to be a talk to your machine",
    "start": "2214200",
    "end": "2220400"
  },
  {
    "text": "and play and say please start this service uh I haven't seen many dcom um",
    "start": "2220400",
    "end": "2226400"
  },
  {
    "text": "applications that are set to that allow anybody to start them by default there is one in Windows 2000 which I don't",
    "start": "2226400",
    "end": "2232240"
  },
  {
    "text": "really understand the purpose of it I think it's called RS notify um the permissions allow anybody to launch it",
    "start": "2232240",
    "end": "2237440"
  },
  {
    "text": "and it seems to be used for um remote storage",
    "start": "2237440",
    "end": "2242800"
  },
  {
    "text": "notification more than that I haven't figured out but um I wouldn't I wouldn't suggest you let people talk to 135 that",
    "start": "2242800",
    "end": "2249400"
  },
  {
    "text": "you don't trust yeah uh if you go as far as say",
    "start": "2249400",
    "end": "2256480"
  },
  {
    "text": "deleting the IPC share which I know won't work with some services like SQL",
    "start": "2256480",
    "end": "2262079"
  },
  {
    "text": "or exchange would you still be able to say query the RPC over p80 or the",
    "start": "2262079",
    "end": "2271200"
  },
  {
    "text": "NC method yes yes if you if you don't have access to 13 9 and 445 say or you",
    "start": "2271200",
    "end": "2278480"
  },
  {
    "text": "stop the server service um You probably wouldn't be allowed to",
    "start": "2278480",
    "end": "2283599"
  },
  {
    "text": "stop the server service on a a domain controller but if you if you could or or if you just AC you just firewall it off",
    "start": "2283599",
    "end": "2289079"
  },
  {
    "text": "so you can't talk to it you still could if you can talk to the RPC endpoints that are on different ports you can",
    "start": "2289079",
    "end": "2294560"
  },
  {
    "text": "still do all those things without talking to that yes well you can get R the sht without stopping the",
    "start": "2294560",
    "end": "2302079"
  },
  {
    "text": "server how do you go about that uh sh I",
    "start": "2302119",
    "end": "2308519"
  },
  {
    "text": "that's news to me but uh it's another",
    "start": "2311920",
    "end": "2317960"
  },
  {
    "text": "sure that's basically the same thing as stopping the server service in effect really because you can no longer talk to",
    "start": "2317960",
    "end": "2323720"
  },
  {
    "text": "it because the first thing everything does is establish a connection to that",
    "start": "2323720",
    "end": "2329838"
  },
  {
    "text": "so any more questions",
    "start": "2331560",
    "end": "2338520"
  },
  {
    "text": "okay thank",
    "start": "2338920",
    "end": "2341520"
  },
  {
    "text": "you",
    "start": "2348880",
    "end": "2351880"
  }
]