[
  {
    "text": "welcome to uh Lagoon K we have abusing the bleeding or abusing bleeding edge web standards for abset Glory in here",
    "start": "80",
    "end": "8000"
  },
  {
    "text": "we've got Brian zigan and Ryan Lester before we begin we've got a few brief",
    "start": "8000",
    "end": "13080"
  },
  {
    "text": "notes stop by the business Hall located in Bayside A and B during the day for",
    "start": "13080",
    "end": "18119"
  },
  {
    "text": "the welcome reception and that's from 1730 to 1900 tonight the black Haack",
    "start": "18119",
    "end": "24039"
  },
  {
    "text": "Arsenal is on the palm forier level three join us for the pony Awards in",
    "start": "24039",
    "end": "29199"
  },
  {
    "text": "manderlay Bay BCD at 1830 and thank you for putting your phone on vibrate your",
    "start": "29199",
    "end": "35399"
  },
  {
    "text": "cell phone ringtone is not as cool as mine thanks guys go ahead and start",
    "start": "35399",
    "end": "42680"
  },
  {
    "text": "cool all right uh well now that you're all settled in I hope you've all had a chance to visit our",
    "start": "42680",
    "end": "49360"
  },
  {
    "text": "website hold on wait so why did we why did you go with this for our Hands-On demo uh well I mean it was actually",
    "start": "49360",
    "end": "55800"
  },
  {
    "text": "literally the uh absolute last domain available they didn't have anything else so nice so what H let's assume that the",
    "start": "55800",
    "end": "62960"
  },
  {
    "text": "demo Gods hatte us today what actually happens if they visit isis. all right or what should happen because it could very",
    "start": "62960",
    "end": "68280"
  },
  {
    "text": "well be failing right now fair enough uh so when you go to isis. you will it's off it's off",
    "start": "68280",
    "end": "74799"
  },
  {
    "text": "wonderful something always goes wrong all right uh so this is what you should see um basic static site and uh if you",
    "start": "74799",
    "end": "84320"
  },
  {
    "text": "go here now this actually is the beginning of the Hands-On component of our session uh which we will revisit",
    "start": "84320",
    "end": "89560"
  },
  {
    "text": "later on uh if you're getting worried about uh getting on a watch list don't worry I",
    "start": "89560",
    "end": "94880"
  },
  {
    "text": "think Ryan is probably a little bit high up on the list because he was the one that actually decided to buy the domain",
    "start": "94880",
    "end": "100920"
  },
  {
    "text": "so all right um all that being said so welcome to the room I hope everybody enjoyed the keynote uh that we missed um",
    "start": "100920",
    "end": "109759"
  },
  {
    "text": "so uh as Andy said this is abusing bleeding edge web standards for abset Glory my name is Bryant this is and I'm",
    "start": "109759",
    "end": "115240"
  },
  {
    "text": "Ryan this is Ryan exactly um just a quick primer on Who We Are um Twitter",
    "start": "115240",
    "end": "120880"
  },
  {
    "text": "handle in case that's something that's relevant to people uh my background I do application security stuff usually um I",
    "start": "120880",
    "end": "127159"
  },
  {
    "text": "Mentor security startups uh for a firm called Mach 37 sometimes um I Mentor",
    "start": "127159",
    "end": "133560"
  },
  {
    "text": "others on application security there were air quotes for those in the back um less frequently uh and once upon a time",
    "start": "133560",
    "end": "141400"
  },
  {
    "text": "I paid a buck to somebody to make the person make Steve Balmer dance on stage but that was just",
    "start": "141400",
    "end": "147599"
  },
  {
    "text": "once uh and I'm Ryan I'm the CEO and co-founder of an endtoend encrypted",
    "start": "147599",
    "end": "152760"
  },
  {
    "text": "communication startup called Scythe which was actually the origin of a lot of the research that went into this talk",
    "start": "152760",
    "end": "159000"
  },
  {
    "text": "I'm also more or less the Chief Architect and primary developer of Scythe before Scythe I was a software",
    "start": "159000",
    "end": "164840"
  },
  {
    "text": "engineer at a rocket Factory called SpaceX and at one point I was sued by Napster for alleged trademark",
    "start": "164840",
    "end": "171840"
  },
  {
    "text": "infringement should I get that story from you right now no are you like prohibited from giving",
    "start": "171840",
    "end": "177319"
  },
  {
    "text": "the story there are some details that I yes I prohibited from fair enough all right um so",
    "start": "177319",
    "end": "184840"
  },
  {
    "text": "bleeding edge web standards so here's what we're going to do uh we're going to focus on three web standards that most",
    "start": "184840",
    "end": "189959"
  },
  {
    "text": "of you have probably heard about and a good number of you have probably had some experience with if you're in this room um but let's talk about the word",
    "start": "189959",
    "end": "196480"
  },
  {
    "text": "abusing first um so we're talking not just about abusing like hacking in a",
    "start": "196480",
    "end": "202879"
  },
  {
    "text": "classical sense like most people like Breakers are likely familiar with uh we're also talking about hacking",
    "start": "202879",
    "end": "209239"
  },
  {
    "text": "together like what developers Builders would be familiar with so putting together a project very quickly or finding a really novel use case for",
    "start": "209239",
    "end": "216280"
  },
  {
    "text": "technologies that are re readily available to you right um so we're going to focus on sub resource Integrity but",
    "start": "216280",
    "end": "222959"
  },
  {
    "text": "specifically we're going to focus on something called SRI fallback that's our name for it um content security policy",
    "start": "222959",
    "end": "229760"
  },
  {
    "text": "we'll touch on that and if anybody's not familiar with content security policy um it's just uh client side last layer of",
    "start": "229760",
    "end": "237680"
  },
  {
    "text": "Def last layer of Defense uh for uh code",
    "start": "237680",
    "end": "242920"
  },
  {
    "text": "injection in your browser so you can set rules on what things can and cannot execute based on what you've deployed to",
    "start": "242920",
    "end": "248680"
  },
  {
    "text": "your like for your application um and specifically we're going to talk about something that we're calling CSP metah",
    "start": "248680",
    "end": "254079"
  },
  {
    "text": "hardening uh it sounds cool we'll go into detail as we're speaking um lastly uh HTTP public key pinning uh which some",
    "start": "254079",
    "end": "261519"
  },
  {
    "text": "people may be familiar with we'll go into more detail as we speak um and the specific abuse case here and this is actually like half the talk um is going",
    "start": "261519",
    "end": "268400"
  },
  {
    "text": "to be something that we're calling HP pkp suicide so why are we talking about this um that's not what I want to do all",
    "start": "268400",
    "end": "276360"
  },
  {
    "text": "right so here's the thing new standards have been coming out left and right so the W3 the w3c ietf what have you are",
    "start": "276360",
    "end": "284440"
  },
  {
    "text": "drafting new standards on a very frequent basis on a very on a very high Cadence um the chromium team the mo",
    "start": "284440",
    "end": "291520"
  },
  {
    "text": "Mozilla um to some extent Microsoft have been implementing these standards as quickly as they could uh and here's the",
    "start": "291520",
    "end": "298520"
  },
  {
    "text": "thing when you're introducing new standards at this pace and implementing them at this pace unforeseen use cases",
    "start": "298520",
    "end": "306280"
  },
  {
    "text": "can develop uh and it's also a very ripe opportunity for people to Target them for bug bounties uh",
    "start": "306280",
    "end": "312280"
  },
  {
    "text": "so you know things can go screwy when you're going a little when you're going this fast uh so when you start building",
    "start": "312280",
    "end": "319520"
  },
  {
    "text": "web applications or modifying your apps for these standards in interesting new",
    "start": "319520",
    "end": "324600"
  },
  {
    "text": "ways it actually helps to drive the development of these and future standards going forward",
    "start": "324600",
    "end": "330360"
  },
  {
    "text": "so I guess we can dive into s right now MH right so one of those standards that",
    "start": "330360",
    "end": "335680"
  },
  {
    "text": "Bryant was just talking about is called SRI sub resource integrity and it's just a way for you to is it not working there",
    "start": "335680",
    "end": "342960"
  },
  {
    "text": "it goes okay it's just a way for you to validate the Integrity of resources hosted outside of your zone of trust",
    "start": "342960",
    "end": "348720"
  },
  {
    "text": "like a CDN uh so in this example we've got a script Source there that's loading uh jQuery from the jQuery CDN and a set",
    "start": "348720",
    "end": "356319"
  },
  {
    "text": "of possible hashes that it could hash to for integrity validation and if if it were provided by",
    "start": "356319",
    "end": "362840"
  },
  {
    "text": "the spec we would also have a fallback Source uh for when that hash check fails",
    "start": "362840",
    "end": "368319"
  },
  {
    "text": "am I being obnoxious by using the laser pointer whatever doesn't matter um all right",
    "start": "368319",
    "end": "374440"
  },
  {
    "text": "so right so the closest Spec the spec actually gets toward providing fallback SRC is giving General guidance on how it",
    "start": "374440",
    "end": "381680"
  },
  {
    "text": "might be implemented uh but they don't actually provide a direct solution to to doing that so we went ahead and built it",
    "start": "381680",
    "end": "388319"
  },
  {
    "text": "for you yeah so actually yeah go ahead right it's all yours uh so our our script is",
    "start": "388319",
    "end": "394800"
  },
  {
    "text": "called SRI fallback and it just gives you this little uh X SRI fallback attribute which you can add to any",
    "start": "394800",
    "end": "400919"
  },
  {
    "text": "script or uh Styles shade in your HTML so the goal here then is if you were to use this you would probably point this",
    "start": "400919",
    "end": "407360"
  },
  {
    "text": "at a resource like a backup resource at a location that you trust exactly and it would still validate against the",
    "start": "407360",
    "end": "412759"
  },
  {
    "text": "existing hashes that are on on the actual right so you would want that to be hosted on the same local origin as as",
    "start": "412759",
    "end": "418960"
  },
  {
    "text": "your code right as opposed to a CDN so I guess we can go through a demo fail",
    "start": "418960",
    "end": "425919"
  },
  {
    "text": "proof demo do time permitting right because we want to get to the good demos at the end um but we will uh link to the",
    "start": "425919",
    "end": "434039"
  },
  {
    "text": "source if anybody is up for pictures but we'll also have a link at the end of a talk that's going to have every link",
    "start": "434039",
    "end": "439840"
  },
  {
    "text": "that we've got uh in in this talk so all right but I think did we go did we end",
    "start": "439840",
    "end": "446160"
  },
  {
    "text": "up going through this yeah we did okay yeah so um here's a good example of just",
    "start": "446160",
    "end": "451520"
  },
  {
    "text": "a very quick finding that came that we came across why we were in the midst of creating this talk while we were putting",
    "start": "451520",
    "end": "457720"
  },
  {
    "text": "this together uh we came across a a in our mind trivial uh trivial",
    "start": "457720",
    "end": "463120"
  },
  {
    "text": "vulnerability uh that netted us a very easy two grand Google ranked it a high and and it got us some nice and easy",
    "start": "463120",
    "end": "468720"
  },
  {
    "text": "cash which kind of speaks to our point it's really easy when you start looking at new standards being put out to grab a",
    "start": "468720",
    "end": "474840"
  },
  {
    "text": "few quick bucks so we take it from here sure uh so this was actually it was a flashing bug in same origin SRI in an",
    "start": "474840",
    "end": "481840"
  },
  {
    "text": "older version of Chrome uh we've got a demo here in browser stack using that old version of Chrome uh with uh you can",
    "start": "481840",
    "end": "488599"
  },
  {
    "text": "see there is uh two buttons one that injects a a script tag with a valid hash and one that does an invalid hash we'll",
    "start": "488599",
    "end": "494759"
  },
  {
    "text": "zoom in when we get to the actual cool stuff right uh so uh the invalid hash you can see there gives you uh an error",
    "start": "494759",
    "end": "502319"
  },
  {
    "text": "as expected Integrity fail and then one more",
    "start": "502319",
    "end": "510639"
  },
  {
    "text": "is it not working there we go there go uh so doing clicking it again then works",
    "start": "510639",
    "end": "515919"
  },
  {
    "text": "and well yeah so first time fails second time works you might have cases where you're doing like infinite scrolling on",
    "start": "515919",
    "end": "521680"
  },
  {
    "text": "a website where it loads uh the same script multiple times and that could trigger this so yeah so Google called it",
    "start": "521680",
    "end": "528920"
  },
  {
    "text": "a high fixed it really quickly threw out two grand problem solved all right that",
    "start": "528920",
    "end": "534880"
  },
  {
    "text": "was easy I mean that's the thing is if you guys are Breakers you guys are considering bug bounties Target the new security standards that are being being built uh so I mean it's quick and easy",
    "start": "534880",
    "end": "542200"
  },
  {
    "text": "cash so moving on that was quick um so CSP meta hardening uh what we mean by",
    "start": "542200",
    "end": "549760"
  },
  {
    "text": "this if you're if you're familiar show hands um who's familiar with content security",
    "start": "549760",
    "end": "555200"
  },
  {
    "text": "policy that is a very great population in the room okay um so if you know CSP",
    "start": "555200",
    "end": "561959"
  },
  {
    "text": "you know that when the headers like the way you set the policies are through HTTP headers right something that most",
    "start": "561959",
    "end": "568720"
  },
  {
    "text": "people don't know is that you can also set the policy through metatags um this",
    "start": "568720",
    "end": "574320"
  },
  {
    "text": "is essentially what this is is we're combining semi-strict or we would call semi- relaxed actually uh headers CSP",
    "start": "574320",
    "end": "581160"
  },
  {
    "text": "headers with the strict headers in metatags that you actually want uh and",
    "start": "581160",
    "end": "586720"
  },
  {
    "text": "this allows for preloading of trusted complex logic and we'll give some we'll give some examples in a bit um The Meta",
    "start": "586720",
    "end": "592839"
  },
  {
    "text": "tags like the The Meta use case for CSP doesn't allow for certain verbs like frame ancestors report URI or sandbox",
    "start": "592839",
    "end": "599920"
  },
  {
    "text": "so if you happen to be using that that's kind of out of out of the question but uh I think we've got a very quick uh",
    "start": "599920",
    "end": "606519"
  },
  {
    "text": "prescripted demo a demo God proof demo again right uh so like the other one",
    "start": "606519",
    "end": "612120"
  },
  {
    "text": "it's right there if you need to if you want to see it live but uh got some screenshots here so it shows the current",
    "start": "612120",
    "end": "618040"
  },
  {
    "text": "CSP which allows for self Uh current origin or unsafe inline scripts uh three",
    "start": "618040",
    "end": "624040"
  },
  {
    "text": "buttons test inline Code test non-inline or remote code and then there's a third",
    "start": "624040",
    "end": "629079"
  },
  {
    "text": "button that'll do some CSP metah hardening so the first button works as you expect SEC second button also works",
    "start": "629079",
    "end": "636680"
  },
  {
    "text": "as you expect and then we with that uh third button that we clicked injected a",
    "start": "636680",
    "end": "642000"
  },
  {
    "text": "meta element that uh removed unsafe inline from the from the CSP literally injected The Meta element right into the",
    "start": "642000",
    "end": "648240"
  },
  {
    "text": "Dom and the second that happens the browser recognizes it and evaluates the rule mhm and after that you can see",
    "start": "648240",
    "end": "654839"
  },
  {
    "text": "clicking test inline code now that unsafe inline is no longer in the CSP gives you a CSP",
    "start": "654839",
    "end": "661519"
  },
  {
    "text": "error so here's the cool thing um this you can only Harden your your actual",
    "start": "661519",
    "end": "668680"
  },
  {
    "text": "policies you can't relax them so you can't have you can't for instance have a",
    "start": "668680",
    "end": "674240"
  },
  {
    "text": "super strict policy that might neglect something and then somebody finds xss uh through whatever you neglected and then",
    "start": "674240",
    "end": "680519"
  },
  {
    "text": "relaxes all the rules to open up a wider exploit you can't do that you can only Harden uh your content security policy",
    "start": "680519",
    "end": "686440"
  },
  {
    "text": "if you've implemented it um and theuse case here is this let's say you're a typical Silicon Valley shop you're",
    "start": "686440",
    "end": "692920"
  },
  {
    "text": "focused on like you know developer shop uh you're focused on creating an MVP a a you know minimum viable product security",
    "start": "692920",
    "end": "699800"
  },
  {
    "text": "might not have been the first thing that really come to your mind uh what you can actually do is you're looking back",
    "start": "699800",
    "end": "706040"
  },
  {
    "text": "retroactively at hardening your tool hardening hardening your product and you",
    "start": "706040",
    "end": "711160"
  },
  {
    "text": "can do all of the preloading of the static trusted content that you have all the resources that you actually trust",
    "start": "711160",
    "end": "717000"
  },
  {
    "text": "that aren't user like user modifiable right you load all of that um let's say",
    "start": "717000",
    "end": "722800"
  },
  {
    "text": "in like a single page application type setup uh and once all that's loaded then",
    "start": "722800",
    "end": "727839"
  },
  {
    "text": "you harden your CSP with the meta with the meta with the meta elements and at that point then once it's hardened you",
    "start": "727839",
    "end": "734360"
  },
  {
    "text": "can start trusting the potentially user controlled content you like you know the data that users might have saved names",
    "start": "734360",
    "end": "740839"
  },
  {
    "text": "email whatever stuff like that um and your risk of you know xss is uh",
    "start": "740839",
    "end": "746519"
  },
  {
    "text": "dramatically minimized so this is a good way to to harden much more complex applications um I know that there are a",
    "start": "746519",
    "end": "752440"
  },
  {
    "text": "few companies that have used this approach I'm not certain enough to name any of them on stage so I won't do that",
    "start": "752440",
    "end": "759320"
  },
  {
    "text": "um all right so this is I think the bulk of the talk that we've got going so",
    "start": "759320",
    "end": "765240"
  },
  {
    "text": "we're going to focus on a lot of things with uh with hpkp and I guess just to because I'm",
    "start": "765240",
    "end": "772639"
  },
  {
    "text": "expecting familiarity with hpkp is probably less so let me get a quick hands up as to how many people know what",
    "start": "772639",
    "end": "778320"
  },
  {
    "text": "hpkp is yeah so it's it's going to be a little less than CSP um hpkp HTTP public key",
    "start": "778320",
    "end": "785120"
  },
  {
    "text": "pinning uh it can break no it can brick sites if you misuse it um it used to be",
    "start": "785120",
    "end": "791680"
  },
  {
    "text": "that it could dramatically brick your sites a lot worse uh but Google and I believe Mozilla as of right now if",
    "start": "791680",
    "end": "797920"
  },
  {
    "text": "there's anybody from Mozilla in the room that can confirm if this want to Pride you can tell me um have reduced the max",
    "start": "797920",
    "end": "803839"
  },
  {
    "text": "age uh the absolute maximum max age that you could set to 60 days it used to be",
    "start": "803839",
    "end": "809199"
  },
  {
    "text": "that you could set that to a year which means if you screwed up hpkp and people people pinned the wrong shirt they'd be",
    "start": "809199",
    "end": "815600"
  },
  {
    "text": "locked out for like a year um so let me condense this for the room then since we have a large population that doesn't",
    "start": "815600",
    "end": "821800"
  },
  {
    "text": "actually that isn't actually familiar with this um hpkp lets you pin a hash of",
    "start": "821800",
    "end": "829079"
  },
  {
    "text": "the key that you're serving out for your TLS connections that way once a person visits your site for the first time it's",
    "start": "829079",
    "end": "835360"
  },
  {
    "text": "like Trust on first use they then say okay I'm familiar with this key uh this is the only key I should be trusting",
    "start": "835360",
    "end": "840399"
  },
  {
    "text": "from this server for this period of time uh that's what the max age is for the tacon includes subdomains every",
    "start": "840399",
    "end": "846600"
  },
  {
    "text": "subdomain from the that's underneath the the domain that you have the headers on uh will also be checked against that",
    "start": "846600",
    "end": "852759"
  },
  {
    "text": "full list of hashes you can have you should have at least two one being a backup one for the main domain and you can have I think as many as you want so",
    "start": "852759",
    "end": "859759"
  },
  {
    "text": "if you're going to implement this do it with reporting first do it with reporting first um because that way",
    "start": "859759",
    "end": "866000"
  },
  {
    "text": "you'll know if you messed up um if you don't it with reporting and you mess up you're going to kick yourself so there",
    "start": "866000",
    "end": "872959"
  },
  {
    "text": "that's the quick primer on hpkp um so let's dive into hpkp",
    "start": "872959",
    "end": "879199"
  },
  {
    "text": "suicide what um so here's the thing this is a deliberate self bricking you're",
    "start": "879199",
    "end": "885759"
  },
  {
    "text": "literally intentionally bricking your clients uh by coupling hpkp with rapid",
    "start": "885759",
    "end": "891199"
  },
  {
    "text": "key rotation or rapid re keing uh so we'll spend a quick 20 minutes on how we can on how we can use this but you had a",
    "start": "891199",
    "end": "897880"
  },
  {
    "text": "hat tip first right so before we continue I wanted to give a big shout out to Jan horn at cure 53 he was the",
    "start": "897880",
    "end": "904600"
  },
  {
    "text": "one who turned us on to this idea of hpkp suicide uh during an OTF funded audit of Scythe uh last summer and also",
    "start": "904600",
    "end": "913160"
  },
  {
    "text": "diger uh before letx encrypt uh was a thing they helped us implement this um",
    "start": "913160",
    "end": "918279"
  },
  {
    "text": "so yeah it was actually really generous of both of them but um so yeah a quick 20 minutes on what we can actually do",
    "start": "918279",
    "end": "924600"
  },
  {
    "text": "with hpkp suicide um so I struck this out for a reason we'll explain why a moment uh to enable in browser code",
    "start": "924600",
    "end": "931720"
  },
  {
    "text": "signing which is actually really cool um to control content changes and Harden SRI uh to enable nuanced web content",
    "start": "931720",
    "end": "940120"
  },
  {
    "text": "blocking if you're familiar with blue coat that's the context we're speaking in um you can use hpkp suicide to track",
    "start": "940120",
    "end": "947680"
  },
  {
    "text": "users and you can also use it to just be total jerks if that's your thing um so",
    "start": "947680",
    "end": "953399"
  },
  {
    "text": "yeah and this is all in ways that we really shouldn't put in print so mhm uh a quick primer on what hpkp suicide",
    "start": "953399",
    "end": "960160"
  },
  {
    "text": "actually looks like uh go ahead sure uh so here we've got um just a hpkp suicide",
    "start": "960160",
    "end": "966079"
  },
  {
    "text": "based local content pinning scheme uh so this allows you to persistently pin a web page in the the user's browser so",
    "start": "966079",
    "end": "973920"
  },
  {
    "text": "first the user just request the page like any other website uh in this case we're also including an appach or a",
    "start": "973920",
    "end": "979720"
  },
  {
    "text": "service worker um to set up a long liveed client side cache of the page and",
    "start": "979720",
    "end": "986040"
  },
  {
    "text": "um afterwards on the back end uh so the TLs handshake completes and so on and",
    "start": "986040",
    "end": "991920"
  },
  {
    "text": "then on the back end the server is deleting its own private key generating an entirely new",
    "start": "991920",
    "end": "998319"
  },
  {
    "text": "one and uh requesting a new certificate from its ca for that new key and serving",
    "start": "998319",
    "end": "1003560"
  },
  {
    "text": "hpkp headers so the next time the user hits the website the TLs handshake will",
    "start": "1003560",
    "end": "1008920"
  },
  {
    "text": "fail because it'll say oh this is the wrong key and what happens then is the browser falls back to the pinned uh",
    "start": "1008920",
    "end": "1015800"
  },
  {
    "text": "service worker and just loads that um like kind of like a a native app I mean",
    "start": "1015800",
    "end": "1021560"
  },
  {
    "text": "doesn't go out to the server at all it the browser thinks the server is offline essentially yeah so this actually",
    "start": "1021560",
    "end": "1027720"
  },
  {
    "text": "happens like this happens below the actual presentation layer in the browser so when you send a request to a site and",
    "start": "1027720",
    "end": "1034280"
  },
  {
    "text": "that site has a service worker already cast in the browser then that service",
    "start": "1034280",
    "end": "1039400"
  },
  {
    "text": "worker then handles the request but of course if the request fails there's got to be error Logic for the service worker to be able to say this didn't work",
    "start": "1039400",
    "end": "1046160"
  },
  {
    "text": "that's where you can insert custom logic that can handle that that can actually anticipate that you've bricked your",
    "start": "1046160",
    "end": "1052200"
  },
  {
    "text": "client's connections to your website so we'll give we'll give the use cases it's",
    "start": "1052200",
    "end": "1057480"
  },
  {
    "text": "actually really cool um all right the what was the first one in browser code signing yeah so why why did we strike it",
    "start": "1057480",
    "end": "1064080"
  },
  {
    "text": "out right so it should work in theory right uh I mean you just use the mechanism we just described only you put",
    "start": "1064080",
    "end": "1070280"
  },
  {
    "text": "code signing logic in that uh that front end page um so you're probably familiar",
    "start": "1070280",
    "end": "1075919"
  },
  {
    "text": "with the whole notion of JS crypto considered harmful and the web's Trust on oniv security harmful security the",
    "start": "1075919",
    "end": "1083400"
  },
  {
    "text": "web's Trust on every security model which in browser code signing would address so um in this",
    "start": "1083400",
    "end": "1091120"
  },
  {
    "text": "case sorry um sorry right so the mechanism we just describe gets you trust on first use uh so go on so right",
    "start": "1091120",
    "end": "1099400"
  },
  {
    "text": "so why in theory this sounds like it should work so uh in fact Scythe employs",
    "start": "1099400",
    "end": "1104600"
  },
  {
    "text": "a mature audited implementation of exactly this um but uh it was considered so novel that",
    "start": "1104600",
    "end": "1112400"
  },
  {
    "text": "we were advised to apply for a patent on it at the time that we implemented it",
    "start": "1112400",
    "end": "1117559"
  },
  {
    "text": "but you can come pretty close to the benefits of in browser code signing by following the pattern Brian is about to",
    "start": "1117559",
    "end": "1123000"
  },
  {
    "text": "describe yeah so let's I also mentioned the second bullet was uh combining hpkp",
    "start": "1123000",
    "end": "1129280"
  },
  {
    "text": "with SRI um and I think we probably actually will have time to potentially demo this live but we'll see if that's",
    "start": "1129280",
    "end": "1134360"
  },
  {
    "text": "embarrassing enough that it'll fail on stage um so here's the thing um if you combine hpk okay so SRI of course",
    "start": "1134360",
    "end": "1142480"
  },
  {
    "text": "being used to check the Integrity of resources that are Beyond you know sub resources things that are beyond your control that are subordinate to the web",
    "start": "1142480",
    "end": "1148960"
  },
  {
    "text": "page that you just loaded and the basic premise here is you load the service",
    "start": "1148960",
    "end": "1156480"
  },
  {
    "text": "worker you once the service worker is loaded on your first visit that service worker has all of the references to all",
    "start": "1156480",
    "end": "1165559"
  },
  {
    "text": "the other scripts and and uh and styles sheets and what have you it has the inte it has the hashes and everything that",
    "start": "1165559",
    "end": "1171400"
  },
  {
    "text": "you need pointing to those res like for those resources to actually validate correctly and then you brick the",
    "start": "1171400",
    "end": "1177559"
  },
  {
    "text": "connection through hpkp suicide through Rapid re keing so once the content is loaded and pinned in the user's browser",
    "start": "1177559",
    "end": "1183360"
  },
  {
    "text": "and then you rekey the content is then pinned in the user's browser and even if your content",
    "start": "1183360",
    "end": "1190320"
  },
  {
    "text": "server your the the main web server that the users are visiting gets compromised it doesn't matter because your users",
    "start": "1190320",
    "end": "1196240"
  },
  {
    "text": "aren't reconnecting to that every single time once their connection has been bricked they already have a copy of what",
    "start": "1196240",
    "end": "1201640"
  },
  {
    "text": "they should trust stored locally which also has the hashes for all these sub resources that are also necessary for",
    "start": "1201640",
    "end": "1207400"
  },
  {
    "text": "loading the page um in order to make this work you need to rotate your keys",
    "start": "1207400",
    "end": "1212760"
  },
  {
    "text": "very frequently compared to your development C like your release Cadence so let's say You release a new application once a week you probably",
    "start": "1212760",
    "end": "1218840"
  },
  {
    "text": "want to rotate your keys like once a day um the thing the the theme here being that the max age counts down to when",
    "start": "1218840",
    "end": "1227159"
  },
  {
    "text": "you're releasing like a new build of your of of your code and that's when",
    "start": "1227159",
    "end": "1233000"
  },
  {
    "text": "people's connection their pinned keys will expire they'll then download quote unquote the new version actually it is",
    "start": "1233000",
    "end": "1239440"
  },
  {
    "text": "still downloading download the new version of the code you're reducing how often they have to actually trust the server for new code that's loaded so",
    "start": "1239440",
    "end": "1245720"
  },
  {
    "text": "that's a good way of guaranteeing the content that actually ends up on on their browsers um this is this will",
    "start": "1245720",
    "end": "1251159"
  },
  {
    "text": "probably get you if I had to guess like 85% of the way to like true trust on first use it's not really you don't have code signing going on but I mean it's",
    "start": "1251159",
    "end": "1257400"
  },
  {
    "text": "pretty close you're restricting how often they're pulling down code so And to clarify the max age counting down",
    "start": "1257400",
    "end": "1263440"
  },
  {
    "text": "it's a dynamically calculated hpkp header so at the time you hit the server to to get the the code it's calculating",
    "start": "1263440",
    "end": "1270720"
  },
  {
    "text": "you know n seconds to Sunday 4 p.m. that's the number of seconds in the header right and again we'll try and",
    "start": "1270720",
    "end": "1277440"
  },
  {
    "text": "demo this if we can time permitting so um so the quick benefits okay you're retaining control of front-end content",
    "start": "1277440",
    "end": "1284960"
  },
  {
    "text": "uh between releases that way like I said in the event that your own like your your own content host",
    "start": "1284960",
    "end": "1291000"
  },
  {
    "text": "are compromised you it shouldn't matter to your end users um likewise you're also mitigating the risk of you know an",
    "start": "1291000",
    "end": "1297640"
  },
  {
    "text": "attacker also tampering hashes for sub resources that your code might also reference um also because you're",
    "start": "1297640",
    "end": "1304120"
  },
  {
    "text": "reducing the number of times your clients are actually hitting your server like the main like the root page um",
    "start": "1304120",
    "end": "1311039"
  },
  {
    "text": "you're also going to get some decent performance gains too uh so here's some",
    "start": "1311039",
    "end": "1316159"
  },
  {
    "text": "things to consider uh hpkp suicide plus SRI this specific pattern that we're talking about it's a design time",
    "start": "1316159",
    "end": "1322480"
  },
  {
    "text": "decision and in my brain I think it's for single page apps only uh if you know",
    "start": "1322480",
    "end": "1328360"
  },
  {
    "text": "you pre-load all the content you're not you don't have like uh Pages below roote it's single page apps only if you're",
    "start": "1328360",
    "end": "1333640"
  },
  {
    "text": "familiar with the term um and on top of that you should probably include",
    "start": "1333640",
    "end": "1339760"
  },
  {
    "text": "mitigations such as halting distribution of hpkp headers in the event that the",
    "start": "1339760",
    "end": "1345000"
  },
  {
    "text": "content on your server is compromised because if you don't include those mtig if you don't include let's say a quick hash Che server side that says this is",
    "start": "1345000",
    "end": "1351960"
  },
  {
    "text": "the content that we deployed then in the event of a compromise you're looking at",
    "start": "1351960",
    "end": "1357720"
  },
  {
    "text": "people having compromised content pinned into their browsers so I guess yeah time permitting",
    "start": "1357720",
    "end": "1363760"
  },
  {
    "text": "will we're from DC that's the reference it's not totally random yeah it's not entirely random um all right web content",
    "start": "1363760",
    "end": "1372360"
  },
  {
    "text": "gateways uh we'll say blue coat that's the one that comes to my brain um let's",
    "start": "1372360",
    "end": "1377720"
  },
  {
    "text": "say let's say that what you do uh what you can theoretically do here is lock",
    "start": "1377720",
    "end": "1383440"
  },
  {
    "text": "your users out of sites even when they're not on your network so if they hit a site for the first time and then",
    "start": "1383440",
    "end": "1389919"
  },
  {
    "text": "the web content Gateway says oh yeah you can't visit this well you've likely got you've likely got SSL man in the middle",
    "start": "1389919",
    "end": "1396559"
  },
  {
    "text": "going on so for that flagged content for those Flagg domains you set the hpkp",
    "start": "1396559",
    "end": "1402600"
  },
  {
    "text": "headers and optionally if you want to reduce the load on on your web content Gateway you can also R rotate the Keys",
    "start": "1402600",
    "end": "1408799"
  },
  {
    "text": "weekly to have that whole hpkp suicide thing going while you're still on the corporate network but the point is the second any corporate user leaves the",
    "start": "1408799",
    "end": "1415080"
  },
  {
    "text": "network the pin keys are for the web content Gateway they're not for the SE",
    "start": "1415080",
    "end": "1421919"
  },
  {
    "text": "from the site itself so by doing so you can then block access when a person",
    "start": "1421919",
    "end": "1427400"
  },
  {
    "text": "actually leaves the corporate Network now of course a Tex saavy user will know how to blow the hpkp headers um but most",
    "start": "1427400",
    "end": "1433320"
  },
  {
    "text": "probably won't and most probably won't know how to go through the effort of figuring that out so hopefully that's",
    "start": "1433320",
    "end": "1439039"
  },
  {
    "text": "all we need to do to disclose this and make this prior art we have no idea um that way hopefully everybody can go on",
    "start": "1439039",
    "end": "1445320"
  },
  {
    "text": "this without actually being able to patented um oh oh wait a second um so",
    "start": "1445320",
    "end": "1452159"
  },
  {
    "text": "what hold on okay so ver sign clearly oh right yeah so this is a bit of news",
    "start": "1452159",
    "end": "1457240"
  },
  {
    "text": "where uh blue coat apparently uh became an intermediate CA uh well that's that's",
    "start": "1457240",
    "end": "1463320"
  },
  {
    "text": "okay so I think once upon a time we've had uh",
    "start": "1463320",
    "end": "1468399"
  },
  {
    "text": "we've had web content gateways sold to nation states so now you have the potential of potentially uh and I'd love",
    "start": "1468399",
    "end": "1475960"
  },
  {
    "text": "for somebody from blue coat to actually correct us on stage we don't care um to implement this entire strategy",
    "start": "1475960",
    "end": "1482760"
  },
  {
    "text": "against their own like the the actual users within the country's boundaries",
    "start": "1482760",
    "end": "1488200"
  },
  {
    "text": "even if they leave the country they might be prohibited from accessing certain sites if they were if if web",
    "start": "1488200",
    "end": "1493440"
  },
  {
    "text": "content gateways were to implement this strategy so so imagine a great firewall that works outside of China I mean like",
    "start": "1493440",
    "end": "1500679"
  },
  {
    "text": "you know you go to China then you leave and it's still working in your in your browser user tracking all right uh so we",
    "start": "1500679",
    "end": "1509000"
  },
  {
    "text": "really shouldn't talk about this actually we have a good demo for this one this is pretty cool um but since this is black hat let's track",
    "start": "1509000",
    "end": "1515360"
  },
  {
    "text": "users um all right so some prxs uh we need lots of domains to pin we're like",
    "start": "1515360",
    "end": "1521720"
  },
  {
    "text": "we're talking 32 uh at least uh you also need browsers that allow for hpkp uh",
    "start": "1521720",
    "end": "1527960"
  },
  {
    "text": "like the actual pinning of hpkp headers in incognito mode which I believe is every browser that currently supports",
    "start": "1527960",
    "end": "1533600"
  },
  {
    "text": "hpkp we've reported this to both of them um and the the more value was put on",
    "start": "1533600",
    "end": "1538960"
  },
  {
    "text": "security over privacy personally we disagree with this we think if you're if you're using incognito mode you're",
    "start": "1538960",
    "end": "1545399"
  },
  {
    "text": "valuing privacy over the added benefit of pinning certificates uh or pinning",
    "start": "1545399",
    "end": "1551120"
  },
  {
    "text": "Keys rather uh and lastly rapid key rotation you're really relying on this",
    "start": "1551120",
    "end": "1556399"
  },
  {
    "text": "in order to make what we're what is a essentially hpkp super cookies to make this work the easiest way we got this",
    "start": "1556399",
    "end": "1562520"
  },
  {
    "text": "done was through let en Crypt um and and we love we love everything that let encrypt is doing we're not trying to be",
    "start": "1562520",
    "end": "1568399"
  },
  {
    "text": "like snarky when we're saying thanks this is the one PL like this is one place where rapid key rotation they have like a 20 a 20 Rey limit which is really",
    "start": "1568399",
    "end": "1575279"
  },
  {
    "text": "useful um this is one place where rapid reing is potentially like really effective for use cases like this so all",
    "start": "1575279",
    "end": "1582600"
  },
  {
    "text": "right so the general setup we're using for our super cookies uh most uh ideas for the implementation are B based on",
    "start": "1582600",
    "end": "1588600"
  },
  {
    "text": "report URI in this case we're basing it on hpkp suicide which unlike report URI",
    "start": "1588600",
    "end": "1594120"
  },
  {
    "text": "is a cross browser it works in Chrome and Firefox so on the server we've just got a method that spits back an hpkp",
    "start": "1594120",
    "end": "1600799"
  },
  {
    "text": "header and another method that's more or less a noop it does nothing and then on the client side um setting a new ID is",
    "start": "1600799",
    "end": "1608880"
  },
  {
    "text": "just hitting that uh that set method in a random pattern so you iterate through the subdomains and just pick ones at",
    "start": "1608880",
    "end": "1614720"
  },
  {
    "text": "random to hit and then checking the ID is also iterating through the check method on every single one of those",
    "start": "1614720",
    "end": "1620640"
  },
  {
    "text": "subdomains and then noting which ones fail reconstructing a 32bit integer from",
    "start": "1620640",
    "end": "1626520"
  },
  {
    "text": "that so we've got a a demo server hosted at cy. Wang um so our our demo here uh",
    "start": "1626520",
    "end": "1635520"
  },
  {
    "text": "not live we uh this is not implemented by Google as we noted there it's just something we we pasted the JS into there",
    "start": "1635520",
    "end": "1642320"
  },
  {
    "text": "into the console there so youve got this line here uh supercookie cy. Wang and",
    "start": "1642320",
    "end": "1647880"
  },
  {
    "text": "then it'll log the the output to the console and uh can you see okay Zooms in",
    "start": "1647880",
    "end": "1654320"
  },
  {
    "text": "so in this case uh is new user true means this was a newly generated ID um we haven't seen this user before and the",
    "start": "1654320",
    "end": "1661519"
  },
  {
    "text": "ID is 45655 66 totally random 32-bit",
    "start": "1661519",
    "end": "1667919"
  },
  {
    "text": "integer and now we're in an we're in incognito on a different website which",
    "start": "1667919",
    "end": "1673519"
  },
  {
    "text": "also didn't implement this we just pasted into their console and uh so we loaded the JS and ran the same line here",
    "start": "1673519",
    "end": "1680960"
  },
  {
    "text": "getting the cookie from cy. Wang and in this case when I tried to check the ID the TLs handshake failed on a bunch of",
    "start": "1680960",
    "end": "1687720"
  },
  {
    "text": "those subdomains um because of the the invalid pin header the suicided",
    "start": "1687720",
    "end": "1693279"
  },
  {
    "text": "headers so here based on those failures we reconstructed the same integer uh 456",
    "start": "1693279",
    "end": "1699679"
  },
  {
    "text": "5566 and we know is new user is false I don't know if the guys in the back can actually see it but yeah we've actually",
    "start": "1699679",
    "end": "1705480"
  },
  {
    "text": "like so here's the thing when we saying iterate through the subdomain like literally are iterating through them so if 0 through 31 swing right so if you",
    "start": "1705480",
    "end": "1713240"
  },
  {
    "text": "actually look the domains that failed are like that's how we're this that's how that's how we're setting the actual bits that determine the user's actual ID",
    "start": "1713240",
    "end": "1720519"
  },
  {
    "text": "uh so what are some you know quick considerations for setting this up well",
    "start": "1720519",
    "end": "1726679"
  },
  {
    "text": "this is a quick proof of concept by the way the code for this is also included but we'll have all the links as well um",
    "start": "1726679",
    "end": "1732480"
  },
  {
    "text": "so here's the thing you can have if you set this up if you set this kind of super cookie uh you can actually have",
    "start": "1732480",
    "end": "1738720"
  },
  {
    "text": "um for instance a a public benefactor of sorts come in and try and Doss your",
    "start": "1738720",
    "end": "1744120"
  },
  {
    "text": "tracking domains as a public service so you can have two easy mitigations for",
    "start": "1744120",
    "end": "1749559"
  },
  {
    "text": "this let's say that you're only setting up this hpkp super cookie for use on your own sites hypothetically let's say",
    "start": "1749559",
    "end": "1754960"
  },
  {
    "text": "you're Facebook and you've got a number of different properties and you want to track whether or not somebody who's visiting Facebook or Instagram or whatever regardless of whether or not",
    "start": "1754960",
    "end": "1761559"
  },
  {
    "text": "they're an incognito mode uh well you can whitelist the origins and that should probably cover it uh now what if",
    "start": "1761559",
    "end": "1768279"
  },
  {
    "text": "you're offering this as a service okay you're you're you're an ad Network or you're offering analytics well in that",
    "start": "1768279",
    "end": "1774559"
  },
  {
    "text": "case you you can have like a Tracker issue well it's from the tracker but the",
    "start": "1774559",
    "end": "1780279"
  },
  {
    "text": "app issues a kns to the client which then gets validated by the tracking domains before handing out the hpkp",
    "start": "1780279",
    "end": "1787240"
  },
  {
    "text": "headers without that knots you've got it doesn't hand out the headers therefore you mitigate the risk of somebody going",
    "start": "1787240",
    "end": "1793039"
  },
  {
    "text": "and dossing access to 0 through 31. cy. Wang I think that was what it",
    "start": "1793039",
    "end": "1798919"
  },
  {
    "text": "was um so those are your those are probably the two things I'd watch out for I'm sure there's more again this is",
    "start": "1798919",
    "end": "1804600"
  },
  {
    "text": "very very like high level research I'm sure there's plenty of ways this could screw up and there's plenty more things that people can actually do uh Beyond",
    "start": "1804600",
    "end": "1812480"
  },
  {
    "text": "just this um it's also worth noting that um in the actual RFC phrase pkp um this",
    "start": "1812480",
    "end": "1818360"
  },
  {
    "text": "pattern is kind of sort of described not exactly but kind of sort of described um our implementation is is I believe a bit",
    "start": "1818360",
    "end": "1825080"
  },
  {
    "text": "different um so I mentioned they use report U their ideas yes they actually use report URI in the course of",
    "start": "1825080",
    "end": "1831720"
  },
  {
    "text": "implementing their cookies whereas they also have other ways of potentially doing this but again in the standard",
    "start": "1831720",
    "end": "1837919"
  },
  {
    "text": "they just touch on they just touch on it at a high level so feel free to read through the standard uh and and see what else is worth implementing um because",
    "start": "1837919",
    "end": "1844919"
  },
  {
    "text": "again these are all things they talk about as they're putting out the web standards themselves for review so",
    "start": "1844919",
    "end": "1851000"
  },
  {
    "text": "Source if anybody cares about pictures like we can give like a quick 30 seconds I guess but we'll also have a URL at the",
    "start": "1851000",
    "end": "1857279"
  },
  {
    "text": "end that again has all the source links that we need uh so let's see what's our",
    "start": "1857279",
    "end": "1862960"
  },
  {
    "text": "our next topic I'm s some cameras open so all right so what if we want to use",
    "start": "1862960",
    "end": "1869279"
  },
  {
    "text": "hpkp suicide to be total jerks well we really shouldn't talk about this but you",
    "start": "1869279",
    "end": "1874840"
  },
  {
    "text": "know who are we kidding this is black hat so uh here's what you need before we get",
    "start": "1874840",
    "end": "1881159"
  },
  {
    "text": "into what this actually is you need a high trffic Target um a Target you know",
    "start": "1881159",
    "end": "1886399"
  },
  {
    "text": "that presumably has some amount of value you probably need a way to get access to",
    "start": "1886399",
    "end": "1892279"
  },
  {
    "text": "the Box uh and probably need a free certificate Authority because you know if you're paying for it you're probably",
    "start": "1892279",
    "end": "1897880"
  },
  {
    "text": "going to be traced um we're not trying to throw let en cryp in the bus again we love them but they're the ones",
    "start": "1897880",
    "end": "1903559"
  },
  {
    "text": "innovating here and you can use let's en Crypt to your ends so to speak",
    "start": "1903559",
    "end": "1910600"
  },
  {
    "text": "so okay first things first we're calling this Ransom pkp because that's probably",
    "start": "1910600",
    "end": "1917320"
  },
  {
    "text": "the worst thing we could think of that you can do with it you can use this to just deny access to anybody that's",
    "start": "1917320",
    "end": "1923120"
  },
  {
    "text": "actually visiting a website if you compromise a site you can use this to just deny people's access to it but you",
    "start": "1923120",
    "end": "1928880"
  },
  {
    "text": "know or like let's say you compromise somebody and you just want to Def face their site okay well why def face them",
    "start": "1928880",
    "end": "1934000"
  },
  {
    "text": "when you can monetize it so that's there you go um so you determine your Target",
    "start": "1934000",
    "end": "1939840"
  },
  {
    "text": "and you generate what we're calling the ransom key pair this is the recovery key that you have locally you NE this never",
    "start": "1939840",
    "end": "1945320"
  },
  {
    "text": "leaves your command and control um oh God did I really WR pone there um so",
    "start": "1945320",
    "end": "1950399"
  },
  {
    "text": "okay you take control of your target web servers uh and on the target web servers that's when you generate the lockout key",
    "start": "1950399",
    "end": "1956080"
  },
  {
    "text": "pair this is the key pair that you're rotating on a routine Cadence uh you send the CSR to Let's encrypt um there's",
    "start": "1956080",
    "end": "1963440"
  },
  {
    "text": "a question mark block and profit so oh the sensor kind of came up late",
    "start": "1963440",
    "end": "1970279"
  },
  {
    "text": "sorry um so what's in the box Ryan what's in the box right so it's really",
    "start": "1970279",
    "end": "1975960"
  },
  {
    "text": "what's in the box that enables this attach back so uh when you rapidly Rey you're actually committing your gains",
    "start": "1975960",
    "end": "1982159"
  },
  {
    "text": "each time so let's say you know 100,000 users I've hit CNN.com within the last I",
    "start": "1982159",
    "end": "1988519"
  },
  {
    "text": "don't know 10 minutes we're not throwing CNN under the bus intentionally are we so uh no no sorry random example we we",
    "start": "1988519",
    "end": "1993919"
  },
  {
    "text": "love CNN we're not throwing the we're not don't don't do the don't no don't do this to CNN okay I I'll say food.com",
    "start": "1993919",
    "end": "2000600"
  },
  {
    "text": "100,000 users have hit that site uh you know while your your malicious hpkp header was being served you Rey and then",
    "start": "2000600",
    "end": "2007799"
  },
  {
    "text": "suddenly those 100,000 users are you know blocked from accessing the site and the site admins can't do anything about",
    "start": "2007799",
    "end": "2014120"
  },
  {
    "text": "it let me actually put an emphasis on this when you reke you're committing your",
    "start": "2014120",
    "end": "2019639"
  },
  {
    "text": "gains that's the thing you're committing your gains what I mean by that is that means that the whatever number of people",
    "start": "2019639",
    "end": "2026240"
  },
  {
    "text": "were locked out they cannot gain access to the site even if the administrators",
    "start": "2026240",
    "end": "2032279"
  },
  {
    "text": "of the site gain access to the compromised web server and recover whatever the most recent lockout key is",
    "start": "2032279",
    "end": "2039080"
  },
  {
    "text": "that's actually used for serving the site for the TLs connections because all the old keys are blown every time you",
    "start": "2039080",
    "end": "2044399"
  },
  {
    "text": "rotate the keys the old keys are blown you've committed your gains those guys are locked out for what 60 days that's",
    "start": "2044399",
    "end": "2050118"
  },
  {
    "text": "the emphasis here that's that's that's really that's really what makes this work exactly so yeah uh you at you hit your",
    "start": "2050119",
    "end": "2058679"
  },
  {
    "text": "Cadence to your 100,000 users in this case at that point you generate your new lockout key pair locally I mean Heck if",
    "start": "2058679",
    "end": "2064118"
  },
  {
    "text": "you can automate cbot I think and do this um and you get your your new CSR sent to leton Crypt they they give you",
    "start": "2064119",
    "end": "2069560"
  },
  {
    "text": "your cert um you and that's it just reset the counter keep going um all",
    "start": "2069560",
    "end": "2076638"
  },
  {
    "text": "right so uh do you remember when you first hit our website at the beginning of the session you may have not hit the website I anticipate most people have",
    "start": "2076639",
    "end": "2083040"
  },
  {
    "text": "probably not opened their web browsers or even turned on their phones which is probably smart right uh",
    "start": "2083040",
    "end": "2089720"
  },
  {
    "text": "so this is what you might have seen uh if any of you actually visited it did you actually re yet oh that's a good",
    "start": "2089720",
    "end": "2095599"
  },
  {
    "text": "point it's probably that's actually probably not a bad idea all right um so hold on I'm just going to what you will",
    "start": "2095599",
    "end": "2101240"
  },
  {
    "text": "see after he reys the site um you can also use this as a great opportunity to own his phone if you really want to um",
    "start": "2101240",
    "end": "2107680"
  },
  {
    "text": "what you will see is the wonderful page that actually tells you that you're locked out it",
    "start": "2107680",
    "end": "2113720"
  },
  {
    "text": "tells you that the that the actual key is not in uh it's not in your search chain the actual key that's served out",
    "start": "2113720",
    "end": "2119440"
  },
  {
    "text": "so that's your indication that you have been locked out of access to that site",
    "start": "2119440",
    "end": "2125320"
  },
  {
    "text": "you can you can of course fix this on your end we'll get into that in a bit um working not working uh well if my tubes",
    "start": "2125320",
    "end": "2131599"
  },
  {
    "text": "were working it would Rey pretend it Reed we we'll handle it later whatever um this is what would happen in the",
    "start": "2131599",
    "end": "2138160"
  },
  {
    "text": "event that he Reed the site successfully and you were to visit it again you would be locked out of actually visiting the",
    "start": "2138160",
    "end": "2144000"
  },
  {
    "text": "site um this isn't really an exploit against users it's again an exploit against the site that's serving the",
    "start": "2144000",
    "end": "2149240"
  },
  {
    "text": "content out uh so some considerations meaning why this is not a high right so",
    "start": "2149240",
    "end": "2156960"
  },
  {
    "text": "let's encrypt rate limit is they've got two rate limits they've got five five shts a week um and if you tweak around",
    "start": "2156960",
    "end": "2164000"
  },
  {
    "text": "with how you make the CT request you can get it up to 20 times a week um there's actually a really good reason for this",
    "start": "2164000",
    "end": "2169599"
  },
  {
    "text": "that we found out in conversations last night and going back um Chrome and Firefox also have hpkp lockout",
    "start": "2169599",
    "end": "2176119"
  },
  {
    "text": "mitigations uh they're a little buried but you can find them uh and we'll talk about them here um and of course you",
    "start": "2176119",
    "end": "2181800"
  },
  {
    "text": "still need to pop the box so programmatic mitigations of course we we sent this to to the chromium team the",
    "start": "2181800",
    "end": "2188680"
  },
  {
    "text": "Firefox team and let's encrypt uh chromium indicated that uh it was",
    "start": "2188680",
    "end": "2193720"
  },
  {
    "text": "already Prem mitigated um like they've they reduced their uh their max age to",
    "start": "2193720",
    "end": "2200720"
  },
  {
    "text": "60 days so you cannot set a max age above 60 days which means that if a lockout attack happens if this Ransom",
    "start": "2200720",
    "end": "2206480"
  },
  {
    "text": "pkp attack actually happens you're not going to get locked out for more than 60 days as an end user some companies may",
    "start": "2206480",
    "end": "2212000"
  },
  {
    "text": "say that's fine we'll just let them you know whatever um but if you happen to be hypothetically speaking a media like you",
    "start": "2212000",
    "end": "2217119"
  },
  {
    "text": "know media conglomerate and you want to cover the elections and this happens to you in October okay um Firefox they took the",
    "start": "2217119",
    "end": "2224440"
  },
  {
    "text": "step of matching Chrome's hpkp maxh and they indicated that they're going to kind of wait and see um this hopefully",
    "start": "2224440",
    "end": "2230839"
  },
  {
    "text": "this doesn't gain traction people don't actually do this um and uh let's encrypt",
    "start": "2230839",
    "end": "2236040"
  },
  {
    "text": "indicated that it's actually out of scope for them to address this because there are standards that and users administrators what have you can",
    "start": "2236040",
    "end": "2242359"
  },
  {
    "text": "Implement to mitigate the risks here um we understand we understand the rationale um in our opinion uh it would",
    "start": "2242359",
    "end": "2249599"
  },
  {
    "text": "be it would be better if we could reduce the reing frequency or at least tie the reing frequency to some sort of prompt",
    "start": "2249599",
    "end": "2255119"
  },
  {
    "text": "like let's say you hit five you hit that initial rate limit of five um maybe send",
    "start": "2255119",
    "end": "2260839"
  },
  {
    "text": "some sort of confirmation email or something that says hey you've already hit your rate limit if you want to get 15 more just do this click this link",
    "start": "2260839",
    "end": "2267760"
  },
  {
    "text": "whatever something um in our opinion that would help but we're not the experts so we're deferring to Let's",
    "start": "2267760",
    "end": "2274119"
  },
  {
    "text": "encrypt on this one and I think they more fundamental argument that it was more of an eco system problem with like various standards and this property",
    "start": "2274119",
    "end": "2280920"
  },
  {
    "text": "emerging from those standards rather than letx encrypt problem yeah other CA could be used to do the same thing",
    "start": "2280920",
    "end": "2286960"
  },
  {
    "text": "exactly like you can use a paid CA or other C that will probably emerge after leton Crypt to handle this um so we",
    "start": "2286960",
    "end": "2294160"
  },
  {
    "text": "actually had a good conversation uh with a rep from the eff about this and yeah",
    "start": "2294160",
    "end": "2299839"
  },
  {
    "text": "so again one of the big concerns is making sure that TLS can actually be successfully rolled out and one of the big obstacles that was observed is that",
    "start": "2299839",
    "end": "2306119"
  },
  {
    "text": "when people are rolling out t s on like in cases where they haven't in the past then they hit they tend to run into",
    "start": "2306119",
    "end": "2314079"
  },
  {
    "text": "issues hitting that initial Fert rate limit when they're first setting it up so having the ability to bump up that",
    "start": "2314079",
    "end": "2319760"
  },
  {
    "text": "rate limit to 20 just by adding another domain to the initial set that you request has helped a lot of CIS admins",
    "start": "2319760",
    "end": "2325640"
  },
  {
    "text": "to get themselves off the ground uh when implementing this uh when implementing let en Crypt that's why they're keeping",
    "start": "2325640",
    "end": "2330720"
  },
  {
    "text": "it the way it is now if they reduce it later I mean that'd be cool but I like we get it so um mitigations for hosts",
    "start": "2330720",
    "end": "2338680"
  },
  {
    "text": "well how many people have heard of this of this RF of this RFC um the DNS",
    "start": "2338680",
    "end": "2344560"
  },
  {
    "text": "certification Authority authorization show hands yeah that's what I thought it's",
    "start": "2344560",
    "end": "2350119"
  },
  {
    "text": "like two we literally two hands went up um when we initially presented this to uh to to to the uh to the three vendors",
    "start": "2350119",
    "end": "2356560"
  },
  {
    "text": "that we noted uh they informed us that CIA was something similar to one of the mitigations that we had proposed uh the",
    "start": "2356560",
    "end": "2362319"
  },
  {
    "text": "basic premise here is that if you use CA you can",
    "start": "2362319",
    "end": "2368280"
  },
  {
    "text": "Blacklist let's encrypt from issuing search for your domain unless you specifically indicate in your DNS header",
    "start": "2368280",
    "end": "2375520"
  },
  {
    "text": "in your DNS records that you want let's encrypt to issue search for your domain so if you know you're always going to use a paid like you know a paid",
    "start": "2375520",
    "end": "2382440"
  },
  {
    "text": "certificate Authority then yeah you essentially say I'm only using uh veras",
    "start": "2382440",
    "end": "2388800"
  },
  {
    "text": "sign or diger or whoever for my CTS I'm never going to use leton Crypt and all of a sudden you've reduced the",
    "start": "2388800",
    "end": "2394240"
  },
  {
    "text": "possibility that somebody can use a certificate Authority other than what you've used for this kind of attack um",
    "start": "2394240",
    "end": "2401240"
  },
  {
    "text": "also if you're going to use if you're already using hpkp you're already protected why",
    "start": "2401240",
    "end": "2406839"
  },
  {
    "text": "because if somebody manages to pop the box and install their own like you know and and and automate this attack they",
    "start": "2406839",
    "end": "2413560"
  },
  {
    "text": "would need to replace the keys you've already pinned in your end users browsers which breaks their access to",
    "start": "2413560",
    "end": "2420040"
  },
  {
    "text": "your to your content using your known good Keys therefore recovery is as simple as getting rid of the infection",
    "start": "2420040",
    "end": "2426119"
  },
  {
    "text": "getting rid of the actual payload and putting your known good keys back in so the worst they could do is Dos you but",
    "start": "2426119",
    "end": "2431319"
  },
  {
    "text": "you don't they don't need ransom pkp for that and it's easy to recover from that too of course the last and easily the most difficult is just don't get popped",
    "start": "2431319",
    "end": "2438599"
  },
  {
    "text": "um so yeah uh and user mitigations very very quickly uh in Chrome you can just",
    "start": "2438599",
    "end": "2445480"
  },
  {
    "text": "Chrome uh colnet internals um hsts and MH I",
    "start": "2445480",
    "end": "2452680"
  },
  {
    "text": "guess uh yeah so there's that uh that's how you're supposed to to be able to clear pins",
    "start": "2452680",
    "end": "2457760"
  },
  {
    "text": "at one point uh not long ago there was a bug where clearing any part of your like browsing history or cash save passwords",
    "start": "2457760",
    "end": "2464240"
  },
  {
    "text": "things of that nature would clear well clear all of your pinned keys and this was a a misplaced curly brace in the",
    "start": "2464240",
    "end": "2471280"
  },
  {
    "text": "chromium source code uh they fixed that we got what $500 for reporting that to",
    "start": "2471280",
    "end": "2476319"
  },
  {
    "text": "our Point easy bounties easy bounties you look at you look at the stuff you get easy money just sitting there waiting for people to look at um so yeah",
    "start": "2476319",
    "end": "2483359"
  },
  {
    "text": "now again in Chrome it's it's as simple as just clearing your cash um I believe that's what change was I could be wrong if anybody from chromium is here shout",
    "start": "2483359",
    "end": "2490119"
  },
  {
    "text": "at me or come to the mic and Shout at us it's fine um and in Firefox about config",
    "start": "2490119",
    "end": "2495480"
  },
  {
    "text": "security seert pinning enforcement level to zero visit the site again um which takes the new header on and then",
    "start": "2495480",
    "end": "2501160"
  },
  {
    "text": "reenable set it back to one um Source oh okay um github.com random",
    "start": "2501160",
    "end": "2509240"
  },
  {
    "text": "Ransom pkp uh I think all we have all we have up here is a proof of concept um",
    "start": "2509240",
    "end": "2515680"
  },
  {
    "text": "not actual ransomware yeah not actual R it's it's a proof of concept that's it",
    "start": "2515680",
    "end": "2522000"
  },
  {
    "text": "um all right hat tips um so we we've actually got a long list but the the",
    "start": "2522000",
    "end": "2527520"
  },
  {
    "text": "biggest Kudos that we do want to give uh Jim reny came out of the Shadows uh to to uh to give us some counsel on this",
    "start": "2527520",
    "end": "2534599"
  },
  {
    "text": "talk uh his background having been at GitHub uh yeah at GitHub as their like privacy and Security Council he came out",
    "start": "2534599",
    "end": "2540040"
  },
  {
    "text": "of the Shadows to help us out because the eff represents sleds en Crypt and so it would have been a bit of a conflict",
    "start": "2540040",
    "end": "2545720"
  },
  {
    "text": "as much as the efff would have wanted to would have been a bit of a conflict for them to represent us here um of course huge thanks to the Chrome Firefox and",
    "start": "2545720",
    "end": "2551920"
  },
  {
    "text": "leton cryp teams uh we had a number of people that helped review our talk uh and yeah",
    "start": "2551920",
    "end": "2559280"
  },
  {
    "text": "so if you want all the links that has a full list of all the links we've shown",
    "start": "2559280",
    "end": "2564960"
  },
  {
    "text": "Source all that other the fun Jazz take that picture if you have any questions I don't know how many minutes we",
    "start": "2564960",
    "end": "2571200"
  },
  {
    "text": "have seven seven we got questions go for it throw us anything",
    "start": "2571200",
    "end": "2577680"
  },
  {
    "text": "that's it I mean we're done basically",
    "start": "2577680",
    "end": "2582318"
  }
]