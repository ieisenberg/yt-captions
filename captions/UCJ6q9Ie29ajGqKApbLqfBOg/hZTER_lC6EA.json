[
  {
    "text": "[Music]",
    "start": "5320",
    "end": "8389"
  },
  {
    "text": "[Music]",
    "start": "13190",
    "end": "20738"
  },
  {
    "text": "[Music]",
    "start": "30980",
    "end": "49559"
  },
  {
    "text": "afternoon everyone my name is Michael Howard it's my colleague David LeBlanc and uh this is part one of a two-part",
    "start": "51320",
    "end": "57840"
  },
  {
    "text": "session uh derived in part the contents of our book writing secure code which is",
    "start": "57840",
    "end": "63440"
  },
  {
    "text": "now in its second edition and uh this is a fairly lengthy presentation we got",
    "start": "63440",
    "end": "69240"
  },
  {
    "text": "about 80 odd slides to go through um and it's really derived a lot not just the",
    "start": "69240",
    "end": "74680"
  },
  {
    "text": "book itself is derived from the work that we have done uh with the different product groups within Microsoft uh the",
    "start": "74680",
    "end": "80320"
  },
  {
    "text": "whole point of our very existence is to work with the different product groups uh within the company to help them build",
    "start": "80320",
    "end": "86400"
  },
  {
    "text": "more secure software both from a design development uh test testing and documentation perspective and uh this is",
    "start": "86400",
    "end": "93759"
  },
  {
    "text": "really a lot of the lessons that we've learned and you know I'll be absolutely honest with you I think we've seen just about every mistake that anyone has ever",
    "start": "93759",
    "end": "101119"
  },
  {
    "text": "made uh so a lot of this is firsthand experience and uh hopefully by following",
    "start": "101119",
    "end": "106880"
  },
  {
    "text": "some of these uh these guidelines and these principles you won't make some of the mistakes that we've seen um we're",
    "start": "106880",
    "end": "111960"
  },
  {
    "text": "going to be sort of jumping between ourselves we try to break it up into some pretty even chunk so there's no um",
    "start": "111960",
    "end": "118560"
  },
  {
    "text": "sort of no randomness but uh it will jump between us so the agenda and as I",
    "start": "118560",
    "end": "123640"
  },
  {
    "text": "said it's in two parts first I going to talk about some of the process improvements that are being made at Microsoft and the reasons why we're",
    "start": "123640",
    "end": "130239"
  },
  {
    "text": "making them and I think there's some there's some interesting things that you will learn as well from the process changes",
    "start": "130239",
    "end": "135680"
  },
  {
    "text": "that we're putting in place uh right now I'll then talk about threat modeling um something we're doing as part of the",
    "start": "135680",
    "end": "141879"
  },
  {
    "text": "overall changes to the development process and then we'll move into the area of some of the common mistakes that we've seen and the mitigation techniques",
    "start": "141879",
    "end": "148480"
  },
  {
    "text": "and finally uh we'll move into security testing so the first half mainly covers",
    "start": "148480",
    "end": "153840"
  },
  {
    "text": "the process threat modeling and some of the common mistakes that we've seen and the second half we'll move into um some",
    "start": "153840",
    "end": "160280"
  },
  {
    "text": "more mistakes that we've seen and finally security testing so I want to start off with some",
    "start": "160280",
    "end": "165680"
  },
  {
    "text": "of the security process improvements that we're putting in place right now at Microsoft and in fact there is a a document with a whole plan uh for do for",
    "start": "165680",
    "end": "172720"
  },
  {
    "text": "making these changes that um is just about to be signed off by uh by Bill Gates and by Steve barmer on improve",
    "start": "172720",
    "end": "179840"
  },
  {
    "text": "improvements basically changing the process life cycle such that it's is more cordial and more capable of",
    "start": "179840",
    "end": "185920"
  },
  {
    "text": "supporting a development that's ship secure software the simple fact is you can't build secure software if the",
    "start": "185920",
    "end": "193480"
  },
  {
    "text": "software is not designed to be secure and built with the appropriate techniques and Technologies in place",
    "start": "193480",
    "end": "199000"
  },
  {
    "text": "from day one you can't sort of like you know write crap design crap test crap document crap hunt for a whole bunch of",
    "start": "199000",
    "end": "205120"
  },
  {
    "text": "bugs and then ship um doing that we we'll ship sort of marginally more secure software you have to change the",
    "start": "205120",
    "end": "211760"
  },
  {
    "text": "process so I'm going to explain some of the things that we're doing so starting from the left hand side this is actually",
    "start": "211760",
    "end": "217200"
  },
  {
    "text": "one of my favorite ones is we're actually asking more questions during new employee",
    "start": "217200",
    "end": "222920"
  },
  {
    "text": "interviews when I say more questions I mean more security questions and I don't mean how does RSA work I don't mean how",
    "start": "222920",
    "end": "228560"
  },
  {
    "text": "does ceros work I mean what's wrong with that code on the Whiteboard think of these threats what are the issues and",
    "start": "228560",
    "end": "235200"
  },
  {
    "text": "the reason why we have to do that is we see a lot of students coming out of",
    "start": "235200",
    "end": "240480"
  },
  {
    "text": "school who know nothing about building secure systems they know how RSA Works they know how ceros Works they know how",
    "start": "240480",
    "end": "245920"
  },
  {
    "text": "firewalls work but they have no idea how to build secure software uh to give a prime example um I interviewed two",
    "start": "245920",
    "end": "252079"
  },
  {
    "text": "students from a very prestigious very technical school I'm not going to mention the name um both of them were",
    "start": "252079",
    "end": "257600"
  },
  {
    "text": "software engineering students I interviewed them two weeks apart neither of them knew what a buffer over on was",
    "start": "257600",
    "end": "263800"
  },
  {
    "text": "they knew they were bad and that's about it but they didn't know what they were they just couldn't explain how they",
    "start": "263800",
    "end": "270120"
  },
  {
    "text": "become vulnerabilities which is kind of alarming when these people are both software engineering students from a a",
    "start": "270120",
    "end": "276199"
  },
  {
    "text": "technical school so the reason for doing that is to put more um you know give",
    "start": "276199",
    "end": "281240"
  },
  {
    "text": "more feedback back to the universities to get them to change some of their curricula and we are working with some of the universities as well to help them",
    "start": "281240",
    "end": "287560"
  },
  {
    "text": "build uh curricula for teaching people how to build secure systems team member training I'm going to cover education",
    "start": "287560",
    "end": "293280"
  },
  {
    "text": "very shortly but this unfortunately security is one of those areas where what you don't know uh will bite you",
    "start": "293280",
    "end": "300360"
  },
  {
    "text": "and so we think that education is absolutely critical when it comes to delivering secure systems um during the",
    "start": "300360",
    "end": "305680"
  },
  {
    "text": "design phase something we've added now to the design phase is threat analysis and I'll be explaining threat analysis in a bit more detail shortly but",
    "start": "305680",
    "end": "312320"
  },
  {
    "text": "basically if you don't understand your threats you don't you you can't ship secure software you can like throw a",
    "start": "312320",
    "end": "318280"
  },
  {
    "text": "whole bunch of security technology in there and think that you're secure but unless it mitigates specific threats you're really wasting your time and so",
    "start": "318280",
    "end": "324840"
  },
  {
    "text": "the good news about threat modeling and threat analysis is it's become almost a household term at Microsoft uh",
    "start": "324840",
    "end": "329880"
  },
  {
    "text": "everybody's doing threat analysis and we're working on refining the processes and we're working on um tools to help",
    "start": "329880",
    "end": "336080"
  },
  {
    "text": "augment the process so you'll see more work coming from us um over the coming months but we're really gung-ho on",
    "start": "336080",
    "end": "343560"
  },
  {
    "text": "threat modeling I think threat modeling is is absolutely important uh once the design phase is sort of come into",
    "start": "343560",
    "end": "350280"
  },
  {
    "text": "completion uh it's expected that the development team will spend time with our group our respective groups uh going",
    "start": "350280",
    "end": "356520"
  },
  {
    "text": "over the designs going over the threats going over some of the coding issues uh documentation issues and so on and the",
    "start": "356520",
    "end": "361960"
  },
  {
    "text": "reason why we have to do this is that our respective groups sort of our role in life",
    "start": "361960",
    "end": "368240"
  },
  {
    "text": "ultimately is to seed the different product groups with the Microsoft with expertise security expertise so they can",
    "start": "368240",
    "end": "373840"
  },
  {
    "text": "continue doing what they what they're doing um but in a more secure manner we can end up building little areas of",
    "start": "373840",
    "end": "379240"
  },
  {
    "text": "security within the product groups um so they don't have to rely on our product on our groups every day to sort of help",
    "start": "379240",
    "end": "385479"
  },
  {
    "text": "them out but for the moment we're we're handholding a lot of the product groups there are number of product groups that are self-sufficient and we we're still",
    "start": "385479",
    "end": "392240"
  },
  {
    "text": "involved with those product groups but basically we see ourselves as sort of proxy security program managers for",
    "start": "392240",
    "end": "397960"
  },
  {
    "text": "those groups um to help them deliver more secure software the good thing is you have to build this time into your",
    "start": "397960",
    "end": "403039"
  },
  {
    "text": "schedule where you spend time with our group to go over your designs um data mutation and leas",
    "start": "403039",
    "end": "409639"
  },
  {
    "text": "privilege test I'm going to explain those a little bit shortly well actually in the second half of this presentation",
    "start": "409639",
    "end": "415599"
  },
  {
    "text": "uh but we've come up with a way of working with a bunch of people in Academia on a way of building more",
    "start": "415599",
    "end": "422360"
  },
  {
    "text": "concrete and more predictable and less random security tests and I'll share some of those findings with you external",
    "start": "422360",
    "end": "429000"
  },
  {
    "text": "review we actually spend a lot of time working with external companies who are Security Experts mainly because some of",
    "start": "429000",
    "end": "435120"
  },
  {
    "text": "them have certain areas of expertise and it's worthwhile spending some money with them to review code review um designs",
    "start": "435120",
    "end": "443199"
  },
  {
    "text": "and to do penetration work it's it's worth the money and it's worth it because they they often look at things in a different way than we do it's just",
    "start": "443199",
    "end": "450039"
  },
  {
    "text": "it's just good practice to have a separate set of knowledgeable eyes looking at the",
    "start": "450039",
    "end": "455560"
  },
  {
    "text": "code the bottom line there about reviewing old defects one thing we do is when issues are found uh we document so",
    "start": "455560",
    "end": "462840"
  },
  {
    "text": "what was the root cause what was the problem because fundamentally people make mistakes and that's fine people",
    "start": "462840",
    "end": "468440"
  },
  {
    "text": "make mistakes people screw up on a daily basis and that's fine just don't keep doing the same stupid mistakes Time",
    "start": "468440",
    "end": "473919"
  },
  {
    "text": "After Time unless you stop to take time out to say why did this happen you're going to keep making the same mistakes",
    "start": "473919",
    "end": "480159"
  },
  {
    "text": "time and time again so one thing we do when a bug comes through the Microsoft security Response Center and ends up going out as a bulletin there's a back",
    "start": "480159",
    "end": "486560"
  },
  {
    "text": "end to our process say okay what was the problem was it a development problem a design problem a documentation problem",
    "start": "486560",
    "end": "492360"
  },
  {
    "text": "what was it how could we you know prevent this from happening in the future uh and the other reason for doing",
    "start": "492360",
    "end": "497919"
  },
  {
    "text": "that is this becomes like a little library for people to read and if you read these and it sort of puts you into sort of evil frame of mind and it's",
    "start": "497919",
    "end": "505280"
  },
  {
    "text": "really good be to read these before you go uh reviewing code looking for issues the other thing that we do and it",
    "start": "505280",
    "end": "511159"
  },
  {
    "text": "started out as a Skunk Works project but it's actually turned out to be very very",
    "start": "511159",
    "end": "516760"
  },
  {
    "text": "useful is once we train people we hope that they start writing more secure code and then the peers who re review the",
    "start": "516760",
    "end": "522800"
  },
  {
    "text": "code also understand security issues so they find issues before the code gets checked in uh but also our group",
    "start": "522800",
    "end": "529800"
  },
  {
    "text": "randomly reviews check-ins that go into Windows where she look at a a diff of",
    "start": "529800",
    "end": "535000"
  },
  {
    "text": "anything that went in say within the last 24 hours and we review that code looking for security vulnerabilities",
    "start": "535000",
    "end": "540959"
  },
  {
    "text": "because it's a much smaller smaller amounts of code it's much easier to look at a diff than it is to look at you know a bunch of a whole bunch of code the",
    "start": "540959",
    "end": "547519"
  },
  {
    "text": "good news is is to this day since the Windows security push we think we've reviewed about 30% of the code that's",
    "start": "547519",
    "end": "553839"
  },
  {
    "text": "gone back into windows don't get me wrong all the code has been reviewed that's gone back in I'm talking about our group doing an extra level of check",
    "start": "553839",
    "end": "560760"
  },
  {
    "text": "we have seen no security vulnerabilities going back into Windows since the security push and that to me is a sign",
    "start": "560760",
    "end": "567040"
  },
  {
    "text": "of an empirical sign of progress to the point where I actually saw it was",
    "start": "567040",
    "end": "572240"
  },
  {
    "text": "about August last year I saw a new file get checked into active directory and the file name was encrypted password.",
    "start": "572240",
    "end": "578640"
  },
  {
    "text": "CPP and I thought you know what this guy's obviously handling passwords and there's all these basically any of you",
    "start": "578640",
    "end": "584120"
  },
  {
    "text": "know about handling passwords in memory and cleaning memory and all this sort of stuff you know there's a bucket load of mistakes you can make and so I it was",
    "start": "584120",
    "end": "590839"
  },
  {
    "text": "only about 300 lines long but I spent 4 hours reviewing the code and did that on purpose looking for mistakes and I",
    "start": "590839",
    "end": "598040"
  },
  {
    "text": "looked at this code from every single possible angle of attack and this person had written this code absolutely",
    "start": "598040",
    "end": "604160"
  },
  {
    "text": "flawlessly to the point where I emailed the um the director of active directory",
    "start": "604160",
    "end": "609320"
  },
  {
    "text": "and just said just give the guy some money just you know he's done a great job just give the guy some money he even",
    "start": "609320",
    "end": "614440"
  },
  {
    "text": "thought he was a senior developer at some point he was it was just like Joe six-pack in active directory but he got",
    "start": "614440",
    "end": "619760"
  },
  {
    "text": "an extra th000 in his paycheck and you know what that guy's going to continue doing the right things",
    "start": "619760",
    "end": "625200"
  },
  {
    "text": "regardless um we do have secure coding guidelines we actually have guidelines for design test um design test and",
    "start": "625200",
    "end": "632920"
  },
  {
    "text": "coding guidelines are an absolute minimum bar absolute minimum you should",
    "start": "632920",
    "end": "638480"
  },
  {
    "text": "always be trying to strive to to exceed those guidelines they are the absolute minimum that anyone could ever attain",
    "start": "638480",
    "end": "645320"
  },
  {
    "text": "but there are Bas a list of what's acceptable acceptable and what's not we also use a lot of tools internally as",
    "start": "645320",
    "end": "650680"
  },
  {
    "text": "well um I'll be honest with you here in the area of tools we don't rely on tools for",
    "start": "650680",
    "end": "656800"
  },
  {
    "text": "shipping secure software if you got a crap developer and really great tools",
    "start": "656800",
    "end": "662240"
  },
  {
    "text": "you probably got pretty crappy code too you may find some bugs and some useful stuff in the tools but you can't rely on",
    "start": "662240",
    "end": "668639"
  },
  {
    "text": "tools for delivering secure software there's no replacement for human intellect it's really important that you",
    "start": "668639",
    "end": "674279"
  },
  {
    "text": "train the developers make sure they're damn good developers and understand what it takes to build secure software and",
    "start": "674279",
    "end": "679639"
  },
  {
    "text": "give them really great tools and so that's what we're striving to but we'll never hold tools as the bar to which you",
    "start": "679639",
    "end": "685600"
  },
  {
    "text": "know you can write whatever you want let's just hope that the tools find any bugs that you make um we do not rely on",
    "start": "685600",
    "end": "690639"
  },
  {
    "text": "that whatsoever um sort of bump bumping up to the top you may have heard about the security push that we had for",
    "start": "690639",
    "end": "696920"
  },
  {
    "text": "Windows we now had them for just about all products at Microsoft or some of them are ongoing uh the window security",
    "start": "696920",
    "end": "702320"
  },
  {
    "text": "push which Dave and I were very actively involved with uh was originally slated for four weeks ended up lasting about 10",
    "start": "702320",
    "end": "708360"
  },
  {
    "text": "weeks at about the 3- we Mark we realized how much work we had to go and so we ended up pushing it out to about 10 weeks the goal of a security push",
    "start": "708360",
    "end": "715600"
  },
  {
    "text": "which usually happens in about the beta time frame is to down tools for end number of weeks uh more more education",
    "start": "715600",
    "end": "723480"
  },
  {
    "text": "and the reason for that is because the you can almost guarantee that the threats have changed and new new",
    "start": "723480",
    "end": "729279"
  },
  {
    "text": "Concepts have been learned um since the last time we did any training regardless of how long ago the training was uh more",
    "start": "729279",
    "end": "735199"
  },
  {
    "text": "training more penetration work more code reviews more threat modeling and so on",
    "start": "735199",
    "end": "740279"
  },
  {
    "text": "uh the security audit which uh we we've just finished up the security audit there's about 20 or 30 of us um spent",
    "start": "740279",
    "end": "747240"
  },
  {
    "text": "about 4 to 6 weeks on the security audit for Windows server and the question you want to answer at the security audit",
    "start": "747240",
    "end": "753120"
  },
  {
    "text": "phase is are we ready to ship from a security standpoint and that includes re-reviewing threat models looking at",
    "start": "753120",
    "end": "759680"
  },
  {
    "text": "any incoming bugs and if a security bug is found it's like why wasn't this found what was the problem what was the root",
    "start": "759680",
    "end": "766000"
  },
  {
    "text": "cause of this problem you know why did we fail uh the other thing we do is penetration work which David was",
    "start": "766000",
    "end": "771880"
  },
  {
    "text": "especially acely involved with the other aspect was also re re-reviewing threat models going back over the threat models",
    "start": "771880",
    "end": "778320"
  },
  {
    "text": "because the threats will changed for the for Windows Server 2003 we basically",
    "start": "778320",
    "end": "783720"
  },
  {
    "text": "came to the decision that the base product was was ready to go from a",
    "start": "783720",
    "end": "789000"
  },
  {
    "text": "security standpoint there was one little fly in the ointment when we went back and re-reviewed the threat models we",
    "start": "789000",
    "end": "794880"
  },
  {
    "text": "asked the IE guys to go and consider the threats to a domain controller When an",
    "start": "794880",
    "end": "801519"
  },
  {
    "text": "Admin is browsing from that machine just look at that one scenario what are the",
    "start": "801519",
    "end": "807279"
  },
  {
    "text": "threats not the vulnerabilities not the bugs what are the potential threats because you have certain enabling",
    "start": "807279",
    "end": "812399"
  },
  {
    "text": "Technologies like ActiveX JavaScript vbscript Java and so on and basically it's like this is unacceptable uh these",
    "start": "812399",
    "end": "820320"
  },
  {
    "text": "threats are unacceptable for a domain controller and for a server and so the net result for those of you are not aware you got to realize this is",
    "start": "820320",
    "end": "826959"
  },
  {
    "text": "actually all happened in fact we're just sort of wrapping it up now um is we have",
    "start": "826959",
    "end": "832120"
  },
  {
    "text": "turned IE on server by default into an HTML 3.2 browser it does no JavaScript",
    "start": "832120",
    "end": "840199"
  },
  {
    "text": "it does no VB script it does no ActiveX controls it does no Java and it does hosts no no NET Framework applications",
    "start": "840199",
    "end": "848240"
  },
  {
    "text": "either and the reason is it's a freaking server the last thing you want is some",
    "start": "848240",
    "end": "853560"
  },
  {
    "text": "idiot browsing from a demain controller and getting whacked and taking out the domain controller domain controllers are",
    "start": "853560",
    "end": "860120"
  },
  {
    "text": "sensitive you know very important machines you don't want the machine getting whacked and so by default the",
    "start": "860120",
    "end": "865959"
  },
  {
    "text": "attack profile for IE has been dramatically reduced and you know what if you want to turn the things back on that's fine but that",
    "start": "865959",
    "end": "873000"
  },
  {
    "text": "is not the default out of the box and uh I take my hat off to the guys who pushed that through because when we first",
    "start": "873000",
    "end": "879519"
  },
  {
    "text": "turned it on we found a whole bunch of regressions there's a whole bunch of other stuff that that that failed to work and uh the decision was that any",
    "start": "879519",
    "end": "887079"
  },
  {
    "text": "issue that cropped up got fixed we're not backing down from changing the default settings of Internet Explorer",
    "start": "887079",
    "end": "892800"
  },
  {
    "text": "you got to realize we're just we're just wrapping this up now it would have been very very easy to say you know what this is just too hard let's go back and turn",
    "start": "892800",
    "end": "899920"
  },
  {
    "text": "back the normal default settings of IE and so these regression problems don't happen but instead the team decided",
    "start": "899920",
    "end": "905720"
  },
  {
    "text": "we'll fix the but we'll fix any regressions and we'll stick with the default secure settings of IE so the",
    "start": "905720",
    "end": "911040"
  },
  {
    "text": "whole point of a security audit at this point is are we there yet and last but by no means least is the whole notion of learning and refining we can only design",
    "start": "911040",
    "end": "917839"
  },
  {
    "text": "develop test and document applications based on the threats we understand today and the threats and the attack vectors",
    "start": "917839",
    "end": "924240"
  },
  {
    "text": "and the attack techniques change over time and so we know there will be bugs security issues in Windows Server 2003",
    "start": "924240",
    "end": "931079"
  },
  {
    "text": "we know that because we can't predict the future but we've done a great deal of work to reduce the attack profile of",
    "start": "931079",
    "end": "936800"
  },
  {
    "text": "the box to reduce the potential for damage uh something else we've also been",
    "start": "936800",
    "end": "942319"
  },
  {
    "text": "working on very strongly is um this thing called sdq plus C which is a way of thinking about when you're building",
    "start": "942319",
    "end": "949360"
  },
  {
    "text": "ABS you got to make sure you have some aspects of the design and development process that um cross each of these four",
    "start": "949360",
    "end": "957160"
  },
  {
    "text": "areas so we need building something you have to think about secure by Design in other words does it have good is it a",
    "start": "957160",
    "end": "962199"
  },
  {
    "text": "good sound secure architecture uh reducing vulnerabilities in code that includes reducing vulnerabilities in",
    "start": "962199",
    "end": "967800"
  },
  {
    "text": "code that's currently shipping in other words you go looking and removing them but the ultimate goal is to not put the",
    "start": "967800",
    "end": "973680"
  },
  {
    "text": "vulnerabilities back in there in the first place that you know if you go hunting for bugs it means you're looking",
    "start": "973680",
    "end": "979079"
  },
  {
    "text": "for things that are already there we should be changing the process which is the whole role of the whole point of this such that the security",
    "start": "979079",
    "end": "984319"
  },
  {
    "text": "vulnerabilities are not added to the code uh in the first place the area where I spend probably 75% of my time is",
    "start": "984319",
    "end": "990519"
  },
  {
    "text": "in the next area which is secure by Design I am a huge believer in just",
    "start": "990519",
    "end": "997199"
  },
  {
    "text": "turning stuff off unless everybody needs it and we sort of set this bar at sort of a bit of a fuzzy bar which is if 80%",
    "start": "997199",
    "end": "1004120"
  },
  {
    "text": "of the population doesn't require that feature you turn it off and you allow it to be turned back on easily but it's not",
    "start": "1004120",
    "end": "1010120"
  },
  {
    "text": "there by default and this is something we've done dramatically in Windows Server well Windows Server 2003 when it",
    "start": "1010120",
    "end": "1015519"
  },
  {
    "text": "boots basically does nothing it basically is and uh nothing I mean it",
    "start": "1015519",
    "end": "1021959"
  },
  {
    "text": "comes up and says okay I do nothing what do you want to do and you can opt for the what you want sort of the role of",
    "start": "1021959",
    "end": "1027558"
  },
  {
    "text": "that machine to be I want it to be a DNS server I want it to be an i server I is off by default and when you turn I on it",
    "start": "1027559",
    "end": "1034918"
  },
  {
    "text": "does nothing but serve up static files uh if you want to do something else like ASP asp.net internet printing protocol",
    "start": "1034919",
    "end": "1040959"
  },
  {
    "text": "index server cgis whatever you click on those options but by default they're all off and the reason is that admins don't",
    "start": "1040959",
    "end": "1049520"
  },
  {
    "text": "necessarily change their boxes very often don't get me wrong there are there's like a bell curve of users those",
    "start": "1049520",
    "end": "1056440"
  },
  {
    "text": "who are Ultra paranoid who change absolutely everything we don't need to worry about those guys they can take",
    "start": "1056440",
    "end": "1061600"
  },
  {
    "text": "care of themselves and the other end of the bell curve is the people who just just don't care and no matter how much",
    "start": "1061600",
    "end": "1067320"
  },
  {
    "text": "work we do then they're never going to care anyway then in the middle there is the vast quantity of people who want to",
    "start": "1067320",
    "end": "1073840"
  },
  {
    "text": "do the right thing but they don't know what the right thing is and so that's why we need to ship a more secur default",
    "start": "1073840",
    "end": "1078919"
  },
  {
    "text": "basically does nothing and then you elect for the functionality because we know that people don't turn stuff off in",
    "start": "1078919",
    "end": "1085000"
  },
  {
    "text": "the area of secure by in secure and deployment the one of the big ones here is is patch deployment which has always",
    "start": "1085000",
    "end": "1091600"
  },
  {
    "text": "been people don't like applying patches there always will be patches doesn't matter what the product is doesn't matter what the operating system is",
    "start": "1091600",
    "end": "1097960"
  },
  {
    "text": "ultimately what we want to do in the short term is make deploying patches easier than the long term have less",
    "start": "1097960",
    "end": "1104120"
  },
  {
    "text": "Reliance on patches and so working on having know Common patching technology which is now being put in place and uh",
    "start": "1104120",
    "end": "1111320"
  },
  {
    "text": "just making it easy to to deploy patches um and the last one is when you",
    "start": "1111320",
    "end": "1116799"
  },
  {
    "text": "designing things and building building things you have to think okay who's who are my customers you know do I need what do I need to make those people aware of",
    "start": "1116799",
    "end": "1123960"
  },
  {
    "text": "uh what do they need to about the security implications of this feature what happens here what happens there and so on and I take my hat off to the SQL",
    "start": "1123960",
    "end": "1129840"
  },
  {
    "text": "Server guys because in Service Pack 3 they spent a lot of time documenting the security implications of certain",
    "start": "1129840",
    "end": "1136240"
  },
  {
    "text": "functionality so people are aware of what the issues are so the critical thing that we've learned",
    "start": "1136240",
    "end": "1142440"
  },
  {
    "text": "over the last year is is education you got to educate people you can't expect a",
    "start": "1142440",
    "end": "1148120"
  },
  {
    "text": "whole bunch of people who know nothing about building secure systems and we assume people don't we have you have to",
    "start": "1148120",
    "end": "1154280"
  },
  {
    "text": "assume that you can't expect them to understand how to build secure software if they know nothing about it how a",
    "start": "1154280",
    "end": "1161039"
  },
  {
    "text": "bunch of people who know nothing can pretend they know about something still amazes me uh you have to make sure these",
    "start": "1161039",
    "end": "1167760"
  },
  {
    "text": "people understand what the issue are we also as I mentioned before we kind of teach some of the wrong things in school I'm not saying we teach the wrong things",
    "start": "1167760",
    "end": "1173919"
  },
  {
    "text": "we teach them how security features work and that's that is important but it doesn't help you build secure software",
    "start": "1173919",
    "end": "1180679"
  },
  {
    "text": "understanding how RSA Works does not help you build a secure system it's a little bit like going to",
    "start": "1180679",
    "end": "1187919"
  },
  {
    "text": "school and saying okay today we're going to learn about defensive driving and what you're actually taught at the end of of an internal combustion engine that",
    "start": "1187919",
    "end": "1194600"
  },
  {
    "text": "doesn't teach you to be a defensive driver sure you know how the engine works but it doesn't help you you know you",
    "start": "1194600",
    "end": "1200440"
  },
  {
    "text": "still go around a wet corner and apply the brakes and wonder why the car spins around um so we need to we need to move",
    "start": "1200440",
    "end": "1206480"
  },
  {
    "text": "more into the area of teaching people about what it takes to build secure systems and you can read the rest the other one is security features does not",
    "start": "1206480",
    "end": "1212960"
  },
  {
    "text": "equal secure features just because you have a whole bunch of security features doesn't mean you're secure not whatsoever uh because they may not",
    "start": "1212960",
    "end": "1218919"
  },
  {
    "text": "mitigate the appropriate threats which I'll cover in a moment and so just on the the notion there about um education",
    "start": "1218919",
    "end": "1224799"
  },
  {
    "text": "we now have mandatory security training in place for new employees who are",
    "start": "1224799",
    "end": "1230400"
  },
  {
    "text": "working on product groups if you're a developer a tester a program manager or a network operations person you you must",
    "start": "1230400",
    "end": "1236000"
  },
  {
    "text": "go to training within three months of joining that product group and in fact on Wednesday morning I spent four hours",
    "start": "1236000",
    "end": "1242080"
  },
  {
    "text": "um training the latest crop of Windows developers on all the latest issues and what they should be aware of and where",
    "start": "1242080",
    "end": "1247240"
  },
  {
    "text": "to go for more information and just raising awareness and making them making them understand what the issues are",
    "start": "1247240",
    "end": "1254080"
  },
  {
    "text": "because we assume they don't know so let's move very quickly to some of the design require requirements and",
    "start": "1254080",
    "end": "1259960"
  },
  {
    "text": "we we we're very strong on the design aspect now we teach a lot of people about the fundamentals of what it takes",
    "start": "1259960",
    "end": "1265640"
  },
  {
    "text": "to uh to build secure systems one of the biggest ones is reducing your attack surface a lot of applications ship with",
    "start": "1265640",
    "end": "1272679"
  },
  {
    "text": "a lot of features enabled by default and unfortunately the feature is there by default it you know it's the old adage",
    "start": "1272679",
    "end": "1278799"
  },
  {
    "text": "if you build it they will come and unfortunately in this case they are attackers if you can build it the",
    "start": "1278799",
    "end": "1284679"
  },
  {
    "text": "attackers will come and so it's important that the feature is not on by def fault because if it's not used by",
    "start": "1284679",
    "end": "1290640"
  },
  {
    "text": "everybody it shouldn't be on by default because if it is on by default and there is a vulnerability found the",
    "start": "1290640",
    "end": "1297200"
  },
  {
    "text": "urgency that is required to deploy that patch by administrators is very very high now if",
    "start": "1297200",
    "end": "1303840"
  },
  {
    "text": "the feature is off by default the urgency with which those patches need to be deployed is a little bit more slower",
    "start": "1303840",
    "end": "1309279"
  },
  {
    "text": "paced and people like that so the critical ones here are defense in depth",
    "start": "1309279",
    "end": "1314360"
  },
  {
    "text": "multiple layers of Defense there the number of clients I've spoken",
    "start": "1314360",
    "end": "1319840"
  },
  {
    "text": "to where they said well we're secure we're using a firewall firewalls are not walls they're misnamed they're fire",
    "start": "1319840",
    "end": "1325679"
  },
  {
    "text": "speed bumps they slow people down a little bit they don't necessarily stop people and anyway what's the only Port",
    "start": "1325679",
    "end": "1331679"
  },
  {
    "text": "that's open port 80 to always Ram everything through Port 80 anyway you know",
    "start": "1331679",
    "end": "1337120"
  },
  {
    "text": "HTTP should be renamed like Port 80 should be the universal firewall traversal protocol that's exactly what",
    "start": "1337120",
    "end": "1342919"
  },
  {
    "text": "it is and so because you have a firewall in place it's kind of irrelevant because you can just drive a hole straight through Port 80",
    "start": "1342919",
    "end": "1350039"
  },
  {
    "text": "so you the next person who says we're secure we're using a firewall I'm just going to scream but there's some",
    "start": "1350039",
    "end": "1356919"
  },
  {
    "text": "software that's like that so it's like well what happens if the firewall is not there well we're screwed well that's not a good enough answer there are some",
    "start": "1356919",
    "end": "1363360"
  },
  {
    "text": "stuff that requires extra levels of Defense um an analogy that I have which is a really stupid analogy is um the",
    "start": "1363360",
    "end": "1371919"
  },
  {
    "text": "thing in our house my wife and I's house house which is probably the most uh expensive and most tantalizing to a to a",
    "start": "1371919",
    "end": "1379279"
  },
  {
    "text": "thief is my wife's jewelry it's expensive she's got lots of it it's easy to transport and it's easy to sell and",
    "start": "1379279",
    "end": "1385279"
  },
  {
    "text": "so the defensive mechanisms that are in place to protect that jewelry are extensive I mean to get to my wife",
    "start": "1385279",
    "end": "1390400"
  },
  {
    "text": "here's a recipe to get to my wife's jewelry the weakest Point into the house is through the garage I'm assuming you're through the garage it's not a big",
    "start": "1390400",
    "end": "1396240"
  },
  {
    "text": "problem there's actually a dead bolted door between the house and the garage r at 30 minutes with a gas a and tools I'm",
    "start": "1396240",
    "end": "1401799"
  },
  {
    "text": "assuming you pass that then you got to get past the alarm system there's actually three parts of your alarm system I'm not going to go into all the",
    "start": "1401799",
    "end": "1407159"
  },
  {
    "text": "details but there's motion detectors for red detection and there perimeter defense as well the guy I bought the house from was a a retiring Boeing exec",
    "start": "1407159",
    "end": "1415279"
  },
  {
    "text": "who looked after their missile defense systems so he he was pretty gung-ho on security my wife bought the house",
    "start": "1415279",
    "end": "1420880"
  },
  {
    "text": "because of the views of Mount reneer and the Cascades I bought it for the alarm system but I'm assuming he got past the",
    "start": "1420880",
    "end": "1426520"
  },
  {
    "text": "alarm system I got two guard dogs two York teras now yores they won't take you",
    "start": "1426520",
    "end": "1433440"
  },
  {
    "text": "out they won't take you out but I'll know if you're in the house so I'm assuming get past the guard dog just",
    "start": "1433440",
    "end": "1438799"
  },
  {
    "text": "throw them some meat they're taken care of then you got to find the safe now you",
    "start": "1438799",
    "end": "1444159"
  },
  {
    "text": "may be thinking well hold on a minute he's hiding the safe this is security through obscurity we've always been told that security through obscurity was bad",
    "start": "1444159",
    "end": "1451200"
  },
  {
    "text": "no security through obscurity sucks if it's your only defensive mechanism if",
    "start": "1451200",
    "end": "1456520"
  },
  {
    "text": "it's part of a lay defense it's completely valid then I'm assuming you found the safe now you got to get get",
    "start": "1456520",
    "end": "1462120"
  },
  {
    "text": "into the safe which is rated at 60 minutes with a gas a and tools even then we have insurance so the the some stuff",
    "start": "1462120",
    "end": "1469240"
  },
  {
    "text": "like if you want my skis get through the garage door you got the skis you know what I need new skis anyway but to get",
    "start": "1469240",
    "end": "1474360"
  },
  {
    "text": "to the the really expensive stuff you got to get past multiple layers of defense and there are some aspects of security and software where there's some",
    "start": "1474360",
    "end": "1482080"
  },
  {
    "text": "stuff that's so sensitive you have to have multiple layers of defense and a firewall shouldn't be the only defense",
    "start": "1482080",
    "end": "1488880"
  },
  {
    "text": "necessarily then there's a notion of lease privilege um you know if you run I I don't I I'm",
    "start": "1488880",
    "end": "1496200"
  },
  {
    "text": "not logged onto my laptop right now and haven't been for years as a member of the local admin group because people",
    "start": "1496200",
    "end": "1501720"
  },
  {
    "text": "want to whack me I know they want to whack me and if I run some malicious code and I'm an admin then the code runs",
    "start": "1501720",
    "end": "1508440"
  },
  {
    "text": "as admin and what can admin do on the box anything it wants now you may be thinking well you know Michael you're a little bit paranoid no people are out to",
    "start": "1508440",
    "end": "1515480"
  },
  {
    "text": "get me I absolutely know they are in fact the director of our group is out to get me and the reason why is if you see",
    "start": "1515480",
    "end": "1523720"
  },
  {
    "text": "an email that sent to you and your peers and your boss that says fire my lame ass",
    "start": "1523720",
    "end": "1529240"
  },
  {
    "text": "it came from you kind of the problem was I walked past your office and you left the workstation unlocked and so you sent",
    "start": "1529240",
    "end": "1535799"
  },
  {
    "text": "an email to your boss and to your peers and back to yourself to say fire my lame",
    "start": "1535799",
    "end": "1541159"
  },
  {
    "text": "ass so now everyone in our group wants to get me because I've gotten a few people including our director I've got",
    "start": "1541159",
    "end": "1547080"
  },
  {
    "text": "him twice so he's really out to get me well one day the thing is George",
    "start": "1547080",
    "end": "1552480"
  },
  {
    "text": "actually a pretty savy guy and one day I received this email and it said how much",
    "start": "1552480",
    "end": "1557679"
  },
  {
    "text": "did you pay for D100 now this is a wonderful social engineering t attack because I just",
    "start": "1557679",
    "end": "1563240"
  },
  {
    "text": "bought a Nikon D100 which is the U digital SLR um 6 and a half megapixel",
    "start": "1563240",
    "end": "1568440"
  },
  {
    "text": "SLR camera and it's not cheap and the at the bottom of the uh the email had a",
    "start": "1568440",
    "end": "1573919"
  },
  {
    "text": "link to eBay so of course I clicked on it it's a wonderful social engineering trick obviously someone is selling d100s",
    "start": "1573919",
    "end": "1579559"
  },
  {
    "text": "for a lot less than I paid for it and so clicked on the link and ie popped up an",
    "start": "1579559",
    "end": "1585840"
  },
  {
    "text": "AV that's strange shut the browser down clicked on the link again IE came up avd",
    "start": "1585840",
    "end": "1592679"
  },
  {
    "text": "again that's strange I did it again it came up AV I threw it into the bugger and it turns out George was doing some",
    "start": "1592679",
    "end": "1599720"
  },
  {
    "text": "really funky stuff and was trying to write something to the system 32 directory and a bug that was fixed in IE",
    "start": "1599720",
    "end": "1605360"
  },
  {
    "text": "that day and he try to do some funky stuff onto the system 32 directory but you know what I'm not an",
    "start": "1605360",
    "end": "1611640"
  },
  {
    "text": "admin and so the whole thing failed and the net result was just I the the",
    "start": "1611640",
    "end": "1617360"
  },
  {
    "text": "exploit code just a be and so I'm not an admin and I took great Delight in",
    "start": "1617360",
    "end": "1622559"
  },
  {
    "text": "telling George that his code sucked um anyway lease privilege we we spend a lot",
    "start": "1622559",
    "end": "1628600"
  },
  {
    "text": "of time with a lot of people spend telling them what what the the main issues were with lease privilege and uh",
    "start": "1628600",
    "end": "1633720"
  },
  {
    "text": "why you need to get out of it and how to get out of it security fils I've already mentioned that I'm not going to go into any greater detail learning from past",
    "start": "1633720",
    "end": "1639799"
  },
  {
    "text": "mistakes that's in that SK that um timeline that I showed you there's time",
    "start": "1639799",
    "end": "1644960"
  },
  {
    "text": "at the end when issues are found feeding that back into the process security is a feature sounds sort of motherhood and",
    "start": "1644960",
    "end": "1650159"
  },
  {
    "text": "apple pie what I'm getting at here is if you done building time in the timeline for education for security pushes for",
    "start": "1650159",
    "end": "1656760"
  },
  {
    "text": "Security reviews and so on and so forth you're going to wonder why your schedule has slipped and so you need to build in",
    "start": "1656760",
    "end": "1662559"
  },
  {
    "text": "that time into the schedule and the last one is we're asking now people to think more about application diversity making",
    "start": "1662559",
    "end": "1668200"
  },
  {
    "text": "applications look slightly different from installation to installation and whatever that whatever that means uh for",
    "start": "1668200",
    "end": "1674120"
  },
  {
    "text": "that installation itself so that way there's a more heterogeneous environment so that things like worms may not spread",
    "start": "1674120",
    "end": "1680559"
  },
  {
    "text": "as fast and you know security issues may not affect as many machines where the cavar that you also",
    "start": "1680559",
    "end": "1687559"
  },
  {
    "text": "have to make sure the system is supportable as well so I'm going to go through really quickly through threat modeling um if I",
    "start": "1687559",
    "end": "1695200"
  },
  {
    "text": "had my hands tied behind my back and I could only do one of three things threat modeling code reviews and better test",
    "start": "1695200",
    "end": "1702480"
  },
  {
    "text": "plans I would do threat modeling every day of the week and the reason is they uncover so many",
    "start": "1702480",
    "end": "1709120"
  },
  {
    "text": "issues um the ultimate Point here is that you really can't build secure",
    "start": "1709120",
    "end": "1714679"
  },
  {
    "text": "software unless you understand your threats you could say yeah well you know using SSL using I SEC we got you know",
    "start": "1714679",
    "end": "1720799"
  },
  {
    "text": "some Ackles in there got a bit of Cerros and some de and a firewall and some RSA and you know you may win the game of",
    "start": "1720799",
    "end": "1727440"
  },
  {
    "text": "buzzword Bingo but you still ship crap because you didn't mitigate this threat",
    "start": "1727440",
    "end": "1732840"
  },
  {
    "text": "which is a real glaring threat but you slept well at night because you had SSL enabled",
    "start": "1732840",
    "end": "1738679"
  },
  {
    "text": "I mean people don't a lot of people don't realize but you know when well they do realize I don't think they want to admit it but when the data leaves",
    "start": "1738679",
    "end": "1745960"
  },
  {
    "text": "that channel an SSL Channel and it's persisted at either end it's not protected by SSL anymore and so you have",
    "start": "1745960",
    "end": "1752840"
  },
  {
    "text": "a whole bunch of threats to that persistent data if you don't understand what those threats are you haven't mitigated them using",
    "start": "1752840",
    "end": "1759600"
  },
  {
    "text": "SSL uh I can tell you a story about that but I can tell you in the break if we have time I'm not going to go through all the details but I got a great story",
    "start": "1759600",
    "end": "1766159"
  },
  {
    "text": "about a bank that used SSL thought they were secure until U it was proved",
    "start": "1766159",
    "end": "1771440"
  },
  {
    "text": "otherwise the other thing is they find if threat models if they used as a sort of debugging tool which is generally",
    "start": "1771440",
    "end": "1777559"
  },
  {
    "text": "when it's late in the process find different issues bying code review and test plans if they're used as a",
    "start": "1777559",
    "end": "1784320"
  },
  {
    "text": "technique which is What's Happening Now earlier in the process they prevent you from adding vulnerabilities and design",
    "start": "1784320",
    "end": "1790840"
  },
  {
    "text": "flaws to the system ahead of time if you think about it code reviews and test plans find issues that you you've",
    "start": "1790840",
    "end": "1798240"
  },
  {
    "text": "already added to the code threat models if they're done early enough in the process which is what they should be done during the design phase",
    "start": "1798240",
    "end": "1805120"
  },
  {
    "text": "prevent you from putting issues in the code in the first place and so you save a lot of time doing them um but they do",
    "start": "1805120",
    "end": "1812039"
  },
  {
    "text": "find different issues primarily because uh code reviews and test plans tend to find implementation flaws and threat",
    "start": "1812039",
    "end": "1818600"
  },
  {
    "text": "models tend to find much higher level design issues if these conditions exist then we may get attacked um this way",
    "start": "1818600",
    "end": "1826640"
  },
  {
    "text": "also the other things we found out about 50% of your bugs will come from the threat model depending depending on the",
    "start": "1826640",
    "end": "1831880"
  },
  {
    "text": "product but um we found about 50% will come from the threat models because they're different issues",
    "start": "1831880",
    "end": "1838679"
  },
  {
    "text": "altogether the threat modeling process I would say that a year ago",
    "start": "1838679",
    "end": "1844200"
  },
  {
    "text": "threat modeling and in fact the the version of threat modeling that we originally documented in writing secure code or I'll take I'll take the fall for",
    "start": "1844200",
    "end": "1850760"
  },
  {
    "text": "this one that I documented in writing secure code was was Rel don't wor I'll point out your problems um was random I",
    "start": "1850760",
    "end": "1858399"
  },
  {
    "text": "mean it really was random it wasn't scientific it wasn't predictable it required too much intelligence and too",
    "start": "1858399",
    "end": "1863960"
  },
  {
    "text": "much security expertise to pull off over the last year or so because we've mandated threat modeling and it's",
    "start": "1863960",
    "end": "1871279"
  },
  {
    "text": "amazing what happens when you get a whole bunch of people who are not Security Experts doing threat modeling it's amazing what issues they find it's",
    "start": "1871279",
    "end": "1877519"
  },
  {
    "text": "amazing how you can sort of learn to make the process better when normal human beings are doing the threat modeling and so now we think we have a",
    "start": "1877519",
    "end": "1884679"
  },
  {
    "text": "pretty good handle on how to do threat modeling and make it more reliable and less chaotic so the process is fairly",
    "start": "1884679",
    "end": "1891919"
  },
  {
    "text": "straightforward uh first of all you need to get a model of the application uh we uh tend to tend to use data flow",
    "start": "1891919",
    "end": "1897880"
  },
  {
    "text": "diagrams you can use whatever is appropriate it really doesn't matter ultimately what you want what what you",
    "start": "1897880",
    "end": "1903200"
  },
  {
    "text": "want to end up with is a list of uh of components in the application that are",
    "start": "1903200",
    "end": "1908399"
  },
  {
    "text": "going to get whacked because all these things are going to be targets of of attack and you you need that list and",
    "start": "1908399",
    "end": "1914080"
  },
  {
    "text": "you need to know the communications that go on between the different processes to understand what the threats are then",
    "start": "1914080",
    "end": "1919960"
  },
  {
    "text": "what you do is um from the different nodes or the different components that",
    "start": "1919960",
    "end": "1925120"
  },
  {
    "text": "come out of the data flow diagram is you ask okay so this component could be a process what kinds of threats is it",
    "start": "1925120",
    "end": "1931200"
  },
  {
    "text": "susceptible to so here's an example you got a data flow that goes between a client and a server very simple example",
    "start": "1931200",
    "end": "1937000"
  },
  {
    "text": "can I spoof that data can I tamper it tamper with it can I repudiate that transaction can I view it can I deny",
    "start": "1937000",
    "end": "1943440"
  },
  {
    "text": "service to the process can I Elevate elevate my privilege and then what you do is you come up with uh trees of",
    "start": "1943440",
    "end": "1949320"
  },
  {
    "text": "attack or threat trees said what conditions must exist for this to become an actual",
    "start": "1949320",
    "end": "1955760"
  },
  {
    "text": "reality um and in the first edition of the book we actually thought that stride was threat modeling and we were dead",
    "start": "1955760",
    "end": "1961799"
  },
  {
    "text": "wrong stride I was wrong stride is basically a way of thinking about categories of threat I'll explain why",
    "start": "1961799",
    "end": "1968880"
  },
  {
    "text": "that's an important thing very shortly finally you rank threats we have this thing called dread just because",
    "start": "1968880",
    "end": "1974480"
  },
  {
    "text": "it's appropriately alarmist and it's just a way of ranking potential risk uh",
    "start": "1974480",
    "end": "1980480"
  },
  {
    "text": "some people just did sort of pony up risk based on how hard is it to pull off",
    "start": "1980480",
    "end": "1986159"
  },
  {
    "text": "and how what sort of damage could be uh could could occur if this attack",
    "start": "1986159",
    "end": "1991720"
  },
  {
    "text": "actually is manifested and so we just use dread As A fine grain version of",
    "start": "1991720",
    "end": "1996880"
  },
  {
    "text": "that like what's the potential for D potential damage um how reproducible is this does it happen once like does every",
    "start": "1996880",
    "end": "2003720"
  },
  {
    "text": "attack succeed or is it only one one in 100,000 uh is how exploitable is it what",
    "start": "2003720",
    "end": "2008840"
  },
  {
    "text": "sort of expertise is required to pull this off is it a script Kitty attack or does it require some deep knowledge uh",
    "start": "2008840",
    "end": "2015760"
  },
  {
    "text": "affected users does this affect everyone or just a couple of people and finally discoverability we just say everyone",
    "start": "2015760",
    "end": "2021200"
  },
  {
    "text": "will always discover these things and so it's just sort of added uh as a high priority always so let me give a quick",
    "start": "2021200",
    "end": "2027799"
  },
  {
    "text": "example of what one of these threat models looks like or at least a portion of the data flow diagram then building",
    "start": "2027799",
    "end": "2033840"
  },
  {
    "text": "up the threat the threat tree to come out the attack so this is just one node in a data flow diagram it's a process",
    "start": "2033840",
    "end": "2040760"
  },
  {
    "text": "which is P's request whatever that means okay are there are there spoofing threats to this are there tampering",
    "start": "2040760",
    "end": "2046919"
  },
  {
    "text": "threats are there repudiation threats and so on and so forth then we can come up with is actually a list of conditions",
    "start": "2046919",
    "end": "2052679"
  },
  {
    "text": "or subth threats that must exist for uh this threat to actually manifest itself",
    "start": "2052679",
    "end": "2058919"
  },
  {
    "text": "and you'll notice at the bottom there there's two conditions which are ended together so those both those conditions must exist for the sub threat to exist",
    "start": "2058919",
    "end": "2067960"
  },
  {
    "text": "so when you're looking at these nodes in the threat tree you think you know is this item susceptible to spoofing can I",
    "start": "2067960",
    "end": "2073520"
  },
  {
    "text": "tamper with it etc etc the good news is if using data flow diagrams it turns out",
    "start": "2073520",
    "end": "2079158"
  },
  {
    "text": "that certain threat types apply to certain aspects of the data flow diagram and not others the reason why that's a",
    "start": "2079159",
    "end": "2085398"
  },
  {
    "text": "good thing is it reduces the amounts of work you have to do when you're building the threat model up I'm not going to go through this in detail um the the slides",
    "start": "2085399",
    "end": "2092760"
  },
  {
    "text": "themselves actually have notes at the bottom that explains it in Greater detail",
    "start": "2092760",
    "end": "2098200"
  },
  {
    "text": "the other thing that's interesting is we found that from threat modeling is that certain types of threats can lead to",
    "start": "2098200",
    "end": "2103240"
  },
  {
    "text": "other kinds of threats so as an example if you have a threat which is if I can",
    "start": "2103240",
    "end": "2108359"
  },
  {
    "text": "replace someone's credentials then I can spoof them that's the essence in stride there if the if those credentials are in",
    "start": "2108359",
    "end": "2115880"
  },
  {
    "text": "admin's credentials I can replay them elevation of privilege it turns out the",
    "start": "2115880",
    "end": "2121480"
  },
  {
    "text": "the one of the core threats that leads to that is being able to access the credentials on across the wire that's an",
    "start": "2121480",
    "end": "2126520"
  },
  {
    "text": "information disclosure threat and for for for that to be a worry you must be using for example basic",
    "start": "2126520",
    "end": "2132240"
  },
  {
    "text": "authentication and no SSL both those conditions must",
    "start": "2132240",
    "end": "2137280"
  },
  {
    "text": "exist and finally with the threat modeling well in the finally in terms of",
    "start": "2137280",
    "end": "2142320"
  },
  {
    "text": "the the tree the tree stuff you can actually use um apply tree pruning techniques whereby um an ultimate threat",
    "start": "2142320",
    "end": "2149800"
  },
  {
    "text": "can exist but you can say well you know what if one of these conditions is mitigated and there's an and Clause there then this whole side of the threat",
    "start": "2149800",
    "end": "2156839"
  },
  {
    "text": "tree just becomes mitigated because you've mitigated one condition and then by using dread you",
    "start": "2156839",
    "end": "2162599"
  },
  {
    "text": "can say well that has a bigger dread rating and so that so the one on the right hand side is where we should start",
    "start": "2162599",
    "end": "2168079"
  },
  {
    "text": "focusing most of our effort that doesn't mean you don't look at the other one you absolutely do but when it comes to priorities the one of the far rights is",
    "start": "2168079",
    "end": "2174440"
  },
  {
    "text": "the one you go looking at first you apply most of your review work most of your test work uh analysis work and so",
    "start": "2174440",
    "end": "2180040"
  },
  {
    "text": "on because that's where the the most damages the the cool thing about stride",
    "start": "2180040",
    "end": "2185560"
  },
  {
    "text": "when you're looking at threat modeling is that different threat categories actually have mitigation categories so",
    "start": "2185560",
    "end": "2192880"
  },
  {
    "text": "for example spoofing can be mitigated with good authentication as an example tampering can be mitigated with good",
    "start": "2192880",
    "end": "2199000"
  },
  {
    "text": "authorization like Access Control lists or permissions uh for ephemeral data as it flies across the wire say a message",
    "start": "2199000",
    "end": "2205079"
  },
  {
    "text": "authentication code etc etc you can read this as well as I can but the core",
    "start": "2205079",
    "end": "2210720"
  },
  {
    "text": "message here is if you have a bunch of threats and this is a spoofing threat this is a tempering threat there are",
    "start": "2210720",
    "end": "2215760"
  },
  {
    "text": "broad categories of mitigation Tech techniques you can apply and notice I say techniques not Technologies the",
    "start": "2215760",
    "end": "2222280"
  },
  {
    "text": "Technologies are determined by the techniques and the infrastructure around",
    "start": "2222280",
    "end": "2227319"
  },
  {
    "text": "you as well because other things that go into making the technology decision coding to a threat model the",
    "start": "2227319",
    "end": "2233839"
  },
  {
    "text": "critical thing here is that when you get the the overall risk of an attack or the potential damage from an attack this",
    "start": "2233839",
    "end": "2240319"
  },
  {
    "text": "helps determine where the developers will spend most of their time making sure that the code um is not vulnerable",
    "start": "2240319",
    "end": "2246920"
  },
  {
    "text": "to attack now the last one which we never expected",
    "start": "2246920",
    "end": "2252319"
  },
  {
    "text": "until a bunch of testers in Windows started thinking about",
    "start": "2252319",
    "end": "2257359"
  },
  {
    "text": "this I hate to say this but a lot of testers and I spoken to a ton of testers inside and outside of Microsoft but a",
    "start": "2257359",
    "end": "2264280"
  },
  {
    "text": "lot of testers feel like they're the poor Schmucks cleaning up after the developers when you involve testers in",
    "start": "2264280",
    "end": "2270880"
  },
  {
    "text": "the threat modeling process they feel the love to start off with but the other cool thing is that the testers now have",
    "start": "2270880",
    "end": "2279880"
  },
  {
    "text": "threat categories which have mitigation techniques and mitigation techniques have attack techniques so now not only",
    "start": "2279880",
    "end": "2287800"
  },
  {
    "text": "do they have a list of things they need to test because for every single node or every single threat in the threat model",
    "start": "2287800",
    "end": "2293960"
  },
  {
    "text": "there should be at least two test plans one to prove it does work and one to prove it doesn't work if you know what I",
    "start": "2293960",
    "end": "2299839"
  },
  {
    "text": "mean and now they have a list of the things they have to go and test and they have mitigation techniques so now they",
    "start": "2299839",
    "end": "2307079"
  },
  {
    "text": "have a attack techniques for those mitigation techniques examples so if you decide you got a spoofing threat you may",
    "start": "2307079",
    "end": "2313240"
  },
  {
    "text": "decide we're going to use strong authentication while a tester can start doing things like I'm going to try and Brute Force the credentials I'm going to",
    "start": "2313240",
    "end": "2320160"
  },
  {
    "text": "try can I replay the credentials uh can I downgrade to a less secure authentication scheme like I don't",
    "start": "2320160",
    "end": "2326240"
  },
  {
    "text": "support curos I only support ntlm and then you can download to the",
    "start": "2326240",
    "end": "2331280"
  },
  {
    "text": "the lower authentication scheme I've seen websites where they've had um say",
    "start": "2331280",
    "end": "2336800"
  },
  {
    "text": "digest auth authentication which is marginally more secure than basic but they support both and normally",
    "start": "2336800",
    "end": "2343920"
  },
  {
    "text": "the browser would probably choose digest however I've seen people write C- well I don't support digest I only support",
    "start": "2343920",
    "end": "2350640"
  },
  {
    "text": "basic and they got a much less secure protocol and what's even worse is that the credentials that go across the wire",
    "start": "2350640",
    "end": "2356520"
  },
  {
    "text": "are very easily intercepted or they can be they can be replayed unless they're protected by an SSL channel so now the",
    "start": "2356520",
    "end": "2363079"
  },
  {
    "text": "testers have got a way of thinking about how to attack the system and rather than just being random they now have very concrete ways of",
    "start": "2363079",
    "end": "2369640"
  },
  {
    "text": "attacking the system I'm not going to go into all these in any great detail they're in the uh in the",
    "start": "2369640",
    "end": "2375800"
  },
  {
    "text": "slides so some some sort of critical action items we I want to repeat again if you're not doing threat models right",
    "start": "2375800",
    "end": "2381680"
  },
  {
    "text": "now you got a bucket load of issues you don't know about and most importantly if you're designing new stuff or building",
    "start": "2381680",
    "end": "2388480"
  },
  {
    "text": "new stuff you need you really need to have a threat model in place otherwise you're just shooting in the dark you do",
    "start": "2388480",
    "end": "2394839"
  },
  {
    "text": "not know if you've mitigated the appropriate threats you do not know you may feel warm and fuzzy because you won",
    "start": "2394839",
    "end": "2400280"
  },
  {
    "text": "the game of buzzword Bingo but you may not actually be secure from Attack so threat models are to me anyway from the",
    "start": "2400280",
    "end": "2407720"
  },
  {
    "text": "the results that I've seen inside Microsoft are worth their waiting goal and basically you're not done on the",
    "start": "2407720",
    "end": "2412920"
  },
  {
    "text": "design phase until you have a threat model in place with that over to",
    "start": "2412920",
    "end": "2419040"
  },
  {
    "text": "Dave okay uh they moved us from the room that had the monitor switcher so I'm going to use the low Tech monitor",
    "start": "2419040",
    "end": "2426040"
  },
  {
    "text": "switcher here",
    "start": "2426040",
    "end": "2429319"
  },
  {
    "text": "see if I can get it to go okay that's",
    "start": "2447359",
    "end": "2452440"
  },
  {
    "text": "sorry about",
    "start": "2460680",
    "end": "2463520"
  },
  {
    "text": "this okay let's see here",
    "start": "2477880",
    "end": "2483039"
  },
  {
    "text": "all right",
    "start": "2497760",
    "end": "2501040"
  },
  {
    "text": "okay we're going to talk about some common coding mistakes I'm also going to have some examples for you hopefully",
    "start": "2533040",
    "end": "2539240"
  },
  {
    "text": "it'll make things a little more real a little more interesting um going to talk about some of my favorite types of",
    "start": "2539240",
    "end": "2545839"
  },
  {
    "text": "errors um first of all i' like to talk about least privileg IRS",
    "start": "2545839",
    "end": "2553000"
  },
  {
    "text": "so these are these are pretty common thing I mean how many of you have tried",
    "start": "2553000",
    "end": "2558599"
  },
  {
    "text": "to say do like what Michael does and run as you know user power user anybody",
    "start": "2558599",
    "end": "2565440"
  },
  {
    "text": "couple here and there and how many of you find that some stuff just doesn't",
    "start": "2565440",
    "end": "2571319"
  },
  {
    "text": "run like games whatnot that sort of thing why do I need to be an admin to",
    "start": "2571319",
    "end": "2576520"
  },
  {
    "text": "run a game doesn't make any sense to me I I don't get it um so",
    "start": "2576520",
    "end": "2584079"
  },
  {
    "text": "uh yeah those those people are not practicing least privilege and so if my",
    "start": "2584079",
    "end": "2590760"
  },
  {
    "text": "game happens to be say Network aware as more and more popular games are then we",
    "start": "2590760",
    "end": "2599040"
  },
  {
    "text": "could very easily run into a situation where you know if there's a vulnerability anybody running the game",
    "start": "2599040",
    "end": "2605599"
  },
  {
    "text": "is going to get nailed really pretty badly so one of the first things we want",
    "start": "2605599",
    "end": "2611119"
  },
  {
    "text": "to do is we want to use only the access required",
    "start": "2611119",
    "end": "2617119"
  },
  {
    "text": "to um to to actually perform the task at",
    "start": "2617119",
    "end": "2624079"
  },
  {
    "text": "hand um if you need a to read a file you want to open it for read only you don't",
    "start": "2624079",
    "end": "2629599"
  },
  {
    "text": "want to just open it for everything and this seems really obvious but it's a very very common mistake when you go",
    "start": "2629599",
    "end": "2636280"
  },
  {
    "text": "through and start diagnosing why some of these things don't work you're like oh",
    "start": "2636280",
    "end": "2641800"
  },
  {
    "text": "well it fails reading this registry key why it fail well because it tried to open it you know all access well did it",
    "start": "2641800",
    "end": "2649720"
  },
  {
    "text": "really need all access no it was just trying to read the stupid thing okay so",
    "start": "2649720",
    "end": "2655240"
  },
  {
    "text": "this is a a very very common error and it's it's one of the fundamental",
    "start": "2655240",
    "end": "2661680"
  },
  {
    "text": "principles at which I try and look at running code does this service really",
    "start": "2661680",
    "end": "2667200"
  },
  {
    "text": "need to be local system or could it be something less so that's a um really",
    "start": "2667200",
    "end": "2672599"
  },
  {
    "text": "important principle and you know just it's pretty",
    "start": "2672599",
    "end": "2678720"
  },
  {
    "text": "obvious I mean if you're running as administrator you're running as a high level user local system something like",
    "start": "2678720",
    "end": "2684839"
  },
  {
    "text": "that and something does go wrong and you've got a uh a catastrophe on your",
    "start": "2684839",
    "end": "2691280"
  },
  {
    "text": "hands okay um it's usually an access control list issue um um and it",
    "start": "2691280",
    "end": "2698800"
  },
  {
    "text": "frequently comes from writing configuration data and other types of",
    "start": "2698800",
    "end": "2704440"
  },
  {
    "text": "information into public areas instead of per user areas so a lot of times if if",
    "start": "2704440",
    "end": "2711200"
  },
  {
    "text": "people just modify writing to hkey current user instead of hqy local",
    "start": "2711200",
    "end": "2718119"
  },
  {
    "text": "machine a lot of these problems just immediately go away um yet another item",
    "start": "2718119",
    "end": "2724960"
  },
  {
    "text": "that I think is quite important is is to let the user know what goes wrong and to",
    "start": "2724960",
    "end": "2732720"
  },
  {
    "text": "fail gracefully I don't know how many times I've seen situations where people",
    "start": "2732720",
    "end": "2740079"
  },
  {
    "text": "fail to check they just assume that something's going to open and so then",
    "start": "2740079",
    "end": "2746240"
  },
  {
    "text": "the the failure mode really becomes quite spectacular all sorts of interesting things go wrong and the",
    "start": "2746240",
    "end": "2753240"
  },
  {
    "text": "problem with that is that it takes a long time for for support to figure out",
    "start": "2753240",
    "end": "2758319"
  },
  {
    "text": "why the customer is failing and then it takes a long time for the you know for",
    "start": "2758319",
    "end": "2763920"
  },
  {
    "text": "the tester to figure out you know just what in the heck is going wrong here and",
    "start": "2763920",
    "end": "2770319"
  },
  {
    "text": "then it may take a good long while for the developer to fix it as well so if you fail gracefully and print out some",
    "start": "2770319",
    "end": "2777640"
  },
  {
    "text": "sort of recognizable message cannot open such and such well it'll lead you",
    "start": "2777640",
    "end": "2783680"
  },
  {
    "text": "directly to the piece of code that's actually causing the problem and instead of wandering off three functions later",
    "start": "2783680",
    "end": "2789440"
  },
  {
    "text": "and then having some sort of failure because something that you assumed was going to happen actually did not",
    "start": "2789440",
    "end": "2798160"
  },
  {
    "text": "happen lastly let's let's always make sure that we test as",
    "start": "2798400",
    "end": "2803839"
  },
  {
    "text": "non-administrators I mean developers almost always run as administrator on their system unless they're Michael okay",
    "start": "2803839",
    "end": "2812359"
  },
  {
    "text": "and so all sorts of things work on only if you're an",
    "start": "2812359",
    "end": "2818720"
  },
  {
    "text": "administrator and then they find them out later actually had a interesting experience with uh a pretty sensitive",
    "start": "2818720",
    "end": "2826400"
  },
  {
    "text": "internal application that my group was called in to do some uh some some design",
    "start": "2826400",
    "end": "2832000"
  },
  {
    "text": "work on and so we set up a mockup of it in our lab so it was like a copy of the",
    "start": "2832000",
    "end": "2837440"
  },
  {
    "text": "whole thing in our lab and it was running away and so the first thing we wanted to do was see how how much we",
    "start": "2837440",
    "end": "2843559"
  },
  {
    "text": "could tighten down security configurations on all these boxes and so we went through and we tightened every",
    "start": "2843559",
    "end": "2848839"
  },
  {
    "text": "screw that we could find and we expected it just to you know blow up and and and",
    "start": "2848839",
    "end": "2854079"
  },
  {
    "text": "have to do a lot of work after worked marvelously everything just kept on right on working we said oh great",
    "start": "2854079",
    "end": "2859480"
  },
  {
    "text": "developers this this is great then the next thing we did is we changed all the administrator passwords on all the",
    "start": "2859480",
    "end": "2865520"
  },
  {
    "text": "different boxes and it instantly blew up and quit working and took two days to fix so what happened well they when they",
    "start": "2865520",
    "end": "2874280"
  },
  {
    "text": "were developing the app they used administrator accounts and they'd set",
    "start": "2874280",
    "end": "2879359"
  },
  {
    "text": "the same password on all the different administrator accounts so when we changed that it all just went totally sideways so if they had actually been",
    "start": "2879359",
    "end": "2886760"
  },
  {
    "text": "testing as non-administrators which is what the thing was supposed to be running as anyway then they would have",
    "start": "2886760",
    "end": "2893640"
  },
  {
    "text": "found these things and it wouldn't have cost us some couple of days of",
    "start": "2893640",
    "end": "2899920"
  },
  {
    "text": "downtime okay now this is one of my personal Pat peeves client side",
    "start": "2901319",
    "end": "2907960"
  },
  {
    "text": "isn't it does you little to no good there's some cases where you want to",
    "start": "2907960",
    "end": "2915480"
  },
  {
    "text": "check your business logic in say two different places because you don't want",
    "start": "2915480",
    "end": "2921079"
  },
  {
    "text": "to make an expensive roundt trip to the server and back just to find out that",
    "start": "2921079",
    "end": "2926200"
  },
  {
    "text": "the zip code's required for an example okay but if it's important from a",
    "start": "2926200",
    "end": "2932839"
  },
  {
    "text": "security standpoint we've always got to make sure that we're enforced ing all of our checks at the",
    "start": "2932839",
    "end": "2940880"
  },
  {
    "text": "server so we never want to assume a well- behaved client and likewise when",
    "start": "2940880",
    "end": "2946240"
  },
  {
    "text": "we're writing the client we never want to assume a well- behaved server somebody might be able to trick us and",
    "start": "2946240",
    "end": "2952960"
  },
  {
    "text": "going to the wrong server so that's something else to think about as well so",
    "start": "2952960",
    "end": "2958359"
  },
  {
    "text": "it can go both directions here um it's it's also very very important to",
    "start": "2958359",
    "end": "2967480"
  },
  {
    "text": "um not build in Access Control checks into the actual client application",
    "start": "2967480",
    "end": "2974319"
  },
  {
    "text": "itself but to instead rely on the access controls that are on the underlying operating system one example is in",
    "start": "2974319",
    "end": "2982160"
  },
  {
    "text": "earlier versions of the operating system you had to be an administer administrator to reconfigure the network",
    "start": "2982160",
    "end": "2988839"
  },
  {
    "text": "parameters okay well why is this well it doesn't particularly make any sense I",
    "start": "2988839",
    "end": "2995280"
  },
  {
    "text": "could go change the access controls on the registry keys that control the network and then somebody could come",
    "start": "2995280",
    "end": "3002319"
  },
  {
    "text": "along and directly modify the registry and change the networking parameters and",
    "start": "3002319",
    "end": "3007359"
  },
  {
    "text": "it would all actually work well that's not really a fun user interface to have",
    "start": "3007359",
    "end": "3013240"
  },
  {
    "text": "and it's not a good reason to have people running as administrator just because they've got a laptop and they",
    "start": "3013240",
    "end": "3019400"
  },
  {
    "text": "need to move from one network to another okay so what we did was we took out this",
    "start": "3019400",
    "end": "3027040"
  },
  {
    "text": "check for administrator that was actually embedded into the client and instead just check to see can we read",
    "start": "3027040",
    "end": "3033319"
  },
  {
    "text": "and write these registry keys that underly these things and then we created a network um operators group and deckled",
    "start": "3033319",
    "end": "3043359"
  },
  {
    "text": "the keys correctly and now you can put users into or out of that group and now",
    "start": "3043359",
    "end": "3049119"
  },
  {
    "text": "people can actually get to things so it's that's a smart way to do things I mean instead of because as soon as you",
    "start": "3049119",
    "end": "3057440"
  },
  {
    "text": "you go and embed something in the in the client and then it turns out that the access controls are just a little bit",
    "start": "3057440",
    "end": "3063359"
  },
  {
    "text": "different now somebody gets real smart and figures out they can go around it now they've got an exploit now whether",
    "start": "3063359",
    "end": "3069640"
  },
  {
    "text": "it's really an exploit or not maybe arguable at that time but they think they do and it it's going to be quite a",
    "start": "3069640",
    "end": "3076000"
  },
  {
    "text": "bit of trouble from there okay next is is running Services",
    "start": "3076000",
    "end": "3084520"
  },
  {
    "text": "running Services is something that's of of really great interest to me because part of my job has at Microsoft has been",
    "start": "3084520",
    "end": "3092839"
  },
  {
    "text": "operational security and so I want to go find out if our operational deployments",
    "start": "3092839",
    "end": "3099599"
  },
  {
    "text": "are actually secure so I get to go try and break into things and if I do break",
    "start": "3099599",
    "end": "3105359"
  },
  {
    "text": "into things then I have to go figure out how to fix it and services have",
    "start": "3105359",
    "end": "3110799"
  },
  {
    "text": "been a difficult area because when if I",
    "start": "3110799",
    "end": "3116319"
  },
  {
    "text": "can compromise a machine at administrator level that's running a service that's running a somebody that I",
    "start": "3116319",
    "end": "3123000"
  },
  {
    "text": "want then I may be able to subvert that process to go do something completely different for example SQL Server running",
    "start": "3123000",
    "end": "3130680"
  },
  {
    "text": "is a highly privileged domain user I can pop XP command shell and now I can do all sorts of interesting things for for",
    "start": "3130680",
    "end": "3137520"
  },
  {
    "text": "example um there's there's a lot of other ways around this okay so the best",
    "start": "3137520",
    "end": "3143400"
  },
  {
    "text": "way to do this is to mitigate the threat by thinking about how you're going to",
    "start": "3143400",
    "end": "3151799"
  },
  {
    "text": "run as a service what sort of users are you going to run as the worst possible",
    "start": "3151799",
    "end": "3157520"
  },
  {
    "text": "thing that you can do is a require that your service be highly privileged on all boxes that it runs on and B require that",
    "start": "3157520",
    "end": "3165599"
  },
  {
    "text": "it has a domain level account that's that's when you'll create the maximum trouble for your administrators and the",
    "start": "3165599",
    "end": "3172200"
  },
  {
    "text": "least trouble for anybody that might happen to come along and try and attack these people's Network",
    "start": "3172200",
    "end": "3178440"
  },
  {
    "text": "so what we'd like to do instead is use two new things one is local service and",
    "start": "3178640",
    "end": "3186079"
  },
  {
    "text": "network service the difference between these is basically a strip down version",
    "start": "3186079",
    "end": "3193160"
  },
  {
    "text": "of the um of the local system account you don't have to worry about changing its password all the time it'll reset",
    "start": "3193160",
    "end": "3200280"
  },
  {
    "text": "itself it has very very few rights on the local system and the only only difference",
    "start": "3200280",
    "end": "3207000"
  },
  {
    "text": "between the two is the network service actually has credentials off the system under the guise of the machine account",
    "start": "3207000",
    "end": "3213440"
  },
  {
    "text": "and local system really local service really can't get off the",
    "start": "3213440",
    "end": "3218559"
  },
  {
    "text": "machine okay now this ought to be really pretty straightforward you've probably seen",
    "start": "3222680",
    "end": "3228599"
  },
  {
    "text": "several demos of buffer over runs and how to create them and all sorts of",
    "start": "3228599",
    "end": "3233839"
  },
  {
    "text": "things going on in in in that area um elsewhere you're uh you know pretty",
    "start": "3233839",
    "end": "3241200"
  },
  {
    "text": "basic run-of-the-mill standard buffer overrun is um is pretty straightforward",
    "start": "3241200",
    "end": "3247720"
  },
  {
    "text": "you've got a a variable declared on the stack you overrun it and away we go is",
    "start": "3247720",
    "end": "3254799"
  },
  {
    "text": "if you you know if you get lucky it might just crash your app if you get unlucky then people are running",
    "start": "3254799",
    "end": "3260440"
  },
  {
    "text": "arbitrary code using your app and if you get really unlucky they'll um you know",
    "start": "3260440",
    "end": "3265960"
  },
  {
    "text": "take over large numbers of machines on the internet with your mistake which is",
    "start": "3265960",
    "end": "3271359"
  },
  {
    "text": "a lot of um not a lot of fun if you're the developer okay",
    "start": "3271359",
    "end": "3279240"
  },
  {
    "text": "so what does the stack look like just normally on a on on a you know stack",
    "start": "3279240",
    "end": "3286240"
  },
  {
    "text": "based buffer overflow explor we've got our buffer we've got our return address to where we came from and then we've got",
    "start": "3286240",
    "end": "3294599"
  },
  {
    "text": "the arguments okay so what we can do if the buffer is",
    "start": "3294599",
    "end": "3303040"
  },
  {
    "text": "dangerous is we can overwrite that return address to point back to the beginning",
    "start": "3303040",
    "end": "3310880"
  },
  {
    "text": "of our buffer we can also point it sometimes at the beginning of a buffer",
    "start": "3310880",
    "end": "3316200"
  },
  {
    "text": "elsewhere maybe somewhere they allow me to give them 64k of data but this place",
    "start": "3316200",
    "end": "3321640"
  },
  {
    "text": "there's the Overflow they only allow me to give me say 12 bytes or so so I can I can can leverage this to go different",
    "start": "3321640",
    "end": "3328280"
  },
  {
    "text": "directions so just because this particular buffer",
    "start": "3328280",
    "end": "3334240"
  },
  {
    "text": "overrun is only say 12 bytes you say well nobody can make a a a shell coat in",
    "start": "3334240",
    "end": "3341160"
  },
  {
    "text": "12 bytes that's not good enough unless there's no other inputs to that system",
    "start": "3341160",
    "end": "3348599"
  },
  {
    "text": "personally I try not to ever worry about is it exploitable I always assume that",
    "start": "3348599",
    "end": "3353720"
  },
  {
    "text": "it is exploitable just fix the bad code you know",
    "start": "3353720",
    "end": "3360000"
  },
  {
    "text": "I good way to just get me to go totally ballistic is to say well you know I'm not going to fix it unless it's",
    "start": "3360000",
    "end": "3366000"
  },
  {
    "text": "exploitable and then I'd like get out the baseball bat and go after them",
    "start": "3366000",
    "end": "3371160"
  },
  {
    "text": "um so we add these together now we've got",
    "start": "3371160",
    "end": "3377039"
  },
  {
    "text": "the return address copied over and then away we go so that's that's a pretty",
    "start": "3377039",
    "end": "3382680"
  },
  {
    "text": "standard um run-of-the-mill but sofware overrun now here's kind of the basics",
    "start": "3382680",
    "end": "3392599"
  },
  {
    "text": "behind a um pretty real world common mess up in in the Windows operating",
    "start": "3392599",
    "end": "3400920"
  },
  {
    "text": "systems or actually the windows n line of operating systems going up into Windows 2000 XP Etc the native character",
    "start": "3400920",
    "end": "3409039"
  },
  {
    "text": "format is Unicode because it was built to be internationalized from the start",
    "start": "3409039",
    "end": "3415160"
  },
  {
    "text": "Okay so so things are a little bit um",
    "start": "3415160",
    "end": "3421280"
  },
  {
    "text": "different in there so what we want to do is check for the",
    "start": "3421280",
    "end": "3430640"
  },
  {
    "text": "number of characters not the size of the buffer anybody see the mistake",
    "start": "3430640",
    "end": "3437559"
  },
  {
    "text": "here no okay then I'll explain a little more carefully we've got it I know it",
    "start": "3437559",
    "end": "3443760"
  },
  {
    "text": "you know it oh okay um we've got a 256 character buffer that buffer is",
    "start": "3443760",
    "end": "3453240"
  },
  {
    "text": "512 bytes long okay now size of buff is",
    "start": "3453240",
    "end": "3460160"
  },
  {
    "text": "512 strin of input could be whatever input is now in",
    "start": "3460160",
    "end": "3467160"
  },
  {
    "text": "the case where strin input is between",
    "start": "3467160",
    "end": "3472280"
  },
  {
    "text": "256 and 512 now we've got an exploitable",
    "start": "3472280",
    "end": "3478000"
  },
  {
    "text": "condition we're going to overflow that buffer and so then we use S SW print F",
    "start": "3478000",
    "end": "3484799"
  },
  {
    "text": "which is completely unsafe under anything except for very very trivial",
    "start": "3484799",
    "end": "3491400"
  },
  {
    "text": "circumstances and then away we go so the correct way to check for the character count or the count of any type of of",
    "start": "3491400",
    "end": "3500240"
  },
  {
    "text": "array of of structures or anything like that is size of the overall buffer",
    "start": "3500240",
    "end": "3506119"
  },
  {
    "text": "divided by size of the element okay now here is something you",
    "start": "3506119",
    "end": "3513359"
  },
  {
    "text": "ever heard of the dot printer overflow if I'm not mistaken I think",
    "start": "3513359",
    "end": "3518760"
  },
  {
    "text": "nimda may have used it is that right can't remember okay um the dot printer",
    "start": "3518760",
    "end": "3524599"
  },
  {
    "text": "overflow was one of the more widely attacked problems on the internet there's a lot",
    "start": "3524599",
    "end": "3531200"
  },
  {
    "text": "of exploit code out there for this particular overflow and what you're looking at here is the code that caused",
    "start": "3531200",
    "end": "3537880"
  },
  {
    "text": "it and because it's a little bit complicated think back to the code that I just showed you on the previous slide",
    "start": "3537880",
    "end": "3545960"
  },
  {
    "text": "and think about how we what's what's going on here we've got",
    "start": "3545960",
    "end": "3552400"
  },
  {
    "text": "a computer name that's actually in Unicode T cares go back and forth",
    "start": "3552400",
    "end": "3558480"
  },
  {
    "text": "depending on unicodes whether unicodes defined or not and so in this particular",
    "start": "3558480",
    "end": "3564280"
  },
  {
    "text": "case it's unicode and te cares in my opinion are actually a little bit dangerous I personally like",
    "start": "3564280",
    "end": "3570359"
  },
  {
    "text": "to work with things that are explicitly defined one way or another because I don't like to go rooting through trying",
    "start": "3570359",
    "end": "3575640"
  },
  {
    "text": "to see 12 levels up if if unicode's defined or not um and then we're going",
    "start": "3575640",
    "end": "3582880"
  },
  {
    "text": "to let's see here we're going to check and see what",
    "start": "3582880",
    "end": "3588640"
  },
  {
    "text": "the size of the buffer is instead of size of buffer divided by size of te",
    "start": "3588640",
    "end": "3593760"
  },
  {
    "text": "care which is what should have been done",
    "start": "3593760",
    "end": "3598039"
  },
  {
    "text": "and then we're going to proceed to try and stuff up to 512 bytes into a um",
    "start": "3599160",
    "end": "3611079"
  },
  {
    "text": "257 um character long buffer and so it's",
    "start": "3611079",
    "end": "3616920"
  },
  {
    "text": "twice the size of of what we're going to tell it it's twice the size that it actually is and Bam away we",
    "start": "3616920",
    "end": "3624119"
  },
  {
    "text": "go so that's that's kind of a more boring very routine standard sort of",
    "start": "3624119",
    "end": "3630599"
  },
  {
    "text": "buffer overflow um now let's get on to something that's a little bit more interesting okay some people think that",
    "start": "3630599",
    "end": "3638400"
  },
  {
    "text": "just because something is declared on the Heap it's allocated that it's not exploitable this is not true at all um a",
    "start": "3638400",
    "end": "3648119"
  },
  {
    "text": "there's a very interesting presentation by um halvar flake who's um here this",
    "start": "3648119",
    "end": "3655280"
  },
  {
    "text": "week on exactly how to exploit um heat-based buffer overruns it's kind of Technical",
    "start": "3655280",
    "end": "3662559"
  },
  {
    "text": "and it's a little bit long we've got a lot of slides so I'm not going to go into great enormous detail about that",
    "start": "3662559",
    "end": "3667599"
  },
  {
    "text": "here it's also been covered in several other presentations um here and there so I'm I'm not going to get into it but",
    "start": "3667599",
    "end": "3674440"
  },
  {
    "text": "basically the bottom line to remember is that a heap overrun can place four bytes",
    "start": "3674440",
    "end": "3679799"
  },
  {
    "text": "in any arbitrary location okay that's think about that that's very very very dangerous I can",
    "start": "3679799",
    "end": "3687760"
  },
  {
    "text": "overwrite variables I can change program execution I can cause things to hop from",
    "start": "3687760",
    "end": "3693880"
  },
  {
    "text": "one buffer to another so it's um it's actually a little bit more versatile in",
    "start": "3693880",
    "end": "3700559"
  },
  {
    "text": "terms of what you can do with it than a simple stack based overrun is so it's",
    "start": "3700559",
    "end": "3706920"
  },
  {
    "text": "it's a pretty dangerous thing um freeing the same memory twice can also get you",
    "start": "3706920",
    "end": "3712039"
  },
  {
    "text": "in trouble now index overruns these these",
    "start": "3712039",
    "end": "3717799"
  },
  {
    "text": "are a lot of fun um this is this is something that basically this occurs",
    "start": "3717799",
    "end": "3725559"
  },
  {
    "text": "when say I go to my pop server for",
    "start": "3725559",
    "end": "3730839"
  },
  {
    "text": "example and it and say how many messages do I have all right well I've got you know 10",
    "start": "3730839",
    "end": "3738440"
  },
  {
    "text": "messages okay so then I go and allocate enough room for 10 messages and then say",
    "start": "3738440",
    "end": "3744240"
  },
  {
    "text": "all right give me the first message says all right here's message 12 bam now I'm riding off into who knows",
    "start": "3744240",
    "end": "3753359"
  },
  {
    "text": "where now in some cases what this can do is it can cause me to loop around back",
    "start": "3753359",
    "end": "3759960"
  },
  {
    "text": "to the bottom of of memory so I mean just consider an array of say four by",
    "start": "3759960",
    "end": "3766440"
  },
  {
    "text": "integers if I tell you to write integer 4 billion and something it's going to",
    "start": "3766440",
    "end": "3773160"
  },
  {
    "text": "cause you to loop back around and write stuff that's actually Below in memory where",
    "start": "3773160",
    "end": "3779160"
  },
  {
    "text": "you started at so again it allows me to Tamper with memory anywhere in the",
    "start": "3779160",
    "end": "3785640"
  },
  {
    "text": "process space and so that's that's very very potent attack you can do a lot of stuff",
    "start": "3785640",
    "end": "3791799"
  },
  {
    "text": "with that okay now integer overflows are also",
    "start": "3791799",
    "end": "3800799"
  },
  {
    "text": "uh a lot of fun and it's something that is of increasing",
    "start": "3800799",
    "end": "3806279"
  },
  {
    "text": "um importance to the attackers they um you know it's it's people are starting",
    "start": "3806279",
    "end": "3812160"
  },
  {
    "text": "to get smart about you know static buffer overruns heat buffer overruns this type of thing and so people are",
    "start": "3812160",
    "end": "3819720"
  },
  {
    "text": "actually starting to figure out um exploits for uh for energer",
    "start": "3819720",
    "end": "3827279"
  },
  {
    "text": "overflows and so basically what this is is unlike a floating Point overflow an",
    "start": "3827279",
    "end": "3834880"
  },
  {
    "text": "energer overflow it doesn't matter okay say for example the range for a character is 0 to",
    "start": "3834880",
    "end": "3841640"
  },
  {
    "text": "256 if I add or 255 rather okay so if I",
    "start": "3841640",
    "end": "3846680"
  },
  {
    "text": "add one to 255 what do I get not zero I mean not",
    "start": "3846680",
    "end": "3852680"
  },
  {
    "text": "256 I get zero If I subtract one from zero I don't",
    "start": "3852680",
    "end": "3859920"
  },
  {
    "text": "get minus one really I get 255 back again so these things roll over all",
    "start": "3859920",
    "end": "3867920"
  },
  {
    "text": "right now you can also get truncation",
    "start": "3867920",
    "end": "3873240"
  },
  {
    "text": "happening where you know for example I'll cast something downward from say a",
    "start": "3873240",
    "end": "3880200"
  },
  {
    "text": "4 byte integer to a two by energer or or therefore and this this is also fraught",
    "start": "3880200",
    "end": "3885960"
  },
  {
    "text": "with Peril so look for the type these types of casts and that type of thing",
    "start": "3885960",
    "end": "3892839"
  },
  {
    "text": "and think about what you're doing with these there's a surprising large number because most developers are not well",
    "start": "3892839",
    "end": "3898680"
  },
  {
    "text": "aware of these and they're frequently exploitable let me uh pop to an",
    "start": "3898680",
    "end": "3906480"
  },
  {
    "text": "example okay",
    "start": "3920319",
    "end": "3924319"
  },
  {
    "text": "okay so let's see here",
    "start": "3925839",
    "end": "3931119"
  },
  {
    "text": "um what we've got is we've got a quick little function called allocate",
    "start": "3931520",
    "end": "3938200"
  },
  {
    "text": "elements and there's a number of really pretty common um applications that are",
    "start": "3938200",
    "end": "3946279"
  },
  {
    "text": "used on the internet that um have uh",
    "start": "3946279",
    "end": "3951559"
  },
  {
    "text": "routines very very similar to this many of them are exploitable um anybody see what the problem is in",
    "start": "3951559",
    "end": "3958200"
  },
  {
    "text": "allocate elements couple of you okay good um what",
    "start": "3958200",
    "end": "3964319"
  },
  {
    "text": "we're going to do is we're going to take two unsigned shorts one those are two bite integers one for size and one for",
    "start": "3964319",
    "end": "3971200"
  },
  {
    "text": "count we're going to multiply them together and then just to make a a good",
    "start": "3971200",
    "end": "3978160"
  },
  {
    "text": "an easier demo I'll print out how many bytes we're allocating and then we'll",
    "start": "3978160",
    "end": "3983839"
  },
  {
    "text": "try and allocate that number of bytes and return it okay",
    "start": "3983839",
    "end": "3990839"
  },
  {
    "text": "now as as we go down so then what we'll do",
    "start": "3990839",
    "end": "3997559"
  },
  {
    "text": "is once we've got that number of structures allocated then we'll go and",
    "start": "3997559",
    "end": "4002680"
  },
  {
    "text": "write something into each and every one of those and until we get to the the end",
    "start": "4002680",
    "end": "4009039"
  },
  {
    "text": "of everything then we'll free or buffer and then we'll complete okay",
    "start": "4009039",
    "end": "4016760"
  },
  {
    "text": "all right",
    "start": "4022799",
    "end": "4025760"
  },
  {
    "text": "so so let's use just pretty normal numbers okay we allocated 32 bytes",
    "start": "4035920",
    "end": "4041520"
  },
  {
    "text": "everything work it's all fine life is good and now let's try something maybe a",
    "start": "4041520",
    "end": "4048240"
  },
  {
    "text": "little more interesting okay",
    "start": "4048240",
    "end": "4053480"
  },
  {
    "text": "got 16,000 * 4 all right that's 64,000",
    "start": "4053480",
    "end": "4058599"
  },
  {
    "text": "we still got enough room just",
    "start": "4058599",
    "end": "4062720"
  },
  {
    "text": "barely and now we've allocated 14,000 bytes to hold what",
    "start": "4064079",
    "end": "4072720"
  },
  {
    "text": "we're trying to put 880,000 bytes into and we get",
    "start": "4072720",
    "end": "4081240"
  },
  {
    "text": "this we've encountered a problem and needed to close so uh down we go",
    "start": "4081240",
    "end": "4088880"
  },
  {
    "text": "bam now this exact type of problem has",
    "start": "4088880",
    "end": "4096600"
  },
  {
    "text": "been turned into actual live exploits in people's code that's out there right now",
    "start": "4096600",
    "end": "4103960"
  },
  {
    "text": "where it also comes into play play is let's say that you have some sort of document format that's going to embed",
    "start": "4103960",
    "end": "4113318"
  },
  {
    "text": "information inside itself how many elements there are what the size of these elements are",
    "start": "4113319",
    "end": "4119798"
  },
  {
    "text": "Etc and then you're just going to go marily along believing whatever the",
    "start": "4119799",
    "end": "4125199"
  },
  {
    "text": "document told you because well of course you create your own documents and and nobody's ever going to create a",
    "start": "4125199",
    "end": "4131159"
  },
  {
    "text": "malicious document now are they and um then somebody goes goes and creates a malicious document sends it to one of",
    "start": "4131159",
    "end": "4137880"
  },
  {
    "text": "your users and Bam now they've got a lot of trouble",
    "start": "4137880",
    "end": "4143480"
  },
  {
    "text": "so that's that's another area where exactly this type of problem can uh bite",
    "start": "4143480",
    "end": "4153319"
  },
  {
    "text": "you okay okay here's another one of my um",
    "start": "4156359",
    "end": "4165440"
  },
  {
    "text": "favorite pet peeves is um partially",
    "start": "4165440",
    "end": "4170880"
  },
  {
    "text": "because back when I worked for my previous employer I had the thankless",
    "start": "4170880",
    "end": "4177238"
  },
  {
    "text": "task of porting oh about 50,000 lines of pretty bad code to Windows NT and it had",
    "start": "4177239",
    "end": "4186159"
  },
  {
    "text": "zillions and zillions and zillions of signed unsign mismatches truncations",
    "start": "4186159",
    "end": "4192400"
  },
  {
    "text": "Etc and fairly often these signed unsigned mismatches caused",
    "start": "4192400",
    "end": "4199199"
  },
  {
    "text": "all sorts of interesting problems like while receive right to file well what",
    "start": "4199199",
    "end": "4206760"
  },
  {
    "text": "happens when a receive turns returns minus one now I'm going to try and write four gigabytes to file that's going to",
    "start": "4206760",
    "end": "4212640"
  },
  {
    "text": "work real well okay um and you can also run into",
    "start": "4212640",
    "end": "4218280"
  },
  {
    "text": "problems where you've got a you're going to cast things to a sign integer when it",
    "start": "4218280",
    "end": "4225080"
  },
  {
    "text": "really really shouldn't be cast to a signed integer so we're going to take the length of the string",
    "start": "4225080",
    "end": "4230719"
  },
  {
    "text": "here and pop it into Len and we've got buff Len here so if if",
    "start": "4230719",
    "end": "4241040"
  },
  {
    "text": "Len is large enough it's going to become negative so if strain is really",
    "start": "4241040",
    "end": "4248840"
  },
  {
    "text": "big then we're going to get a negative number for Len and now Lyn is less than",
    "start": "4248840",
    "end": "4256080"
  },
  {
    "text": "bufflin and Bam away we go there's a lot of variations on this so the first thing",
    "start": "4256080",
    "end": "4264560"
  },
  {
    "text": "is your compiler is trying to help you every time it complains about something",
    "start": "4264560",
    "end": "4269800"
  },
  {
    "text": "it's trying to say hey there's something wrong here pay attention Okay so don't just blindly Cast Away compiler warnings",
    "start": "4269800",
    "end": "4276040"
  },
  {
    "text": "think you know maybe that a stupid compiler smarter than I am you know if you haven't had enough",
    "start": "4276040",
    "end": "4281520"
  },
  {
    "text": "coffee that day then it might be true um and also don't think about whether or",
    "start": "4281520",
    "end": "4289320"
  },
  {
    "text": "not you're using signed or unsigned um integers because basically they're they",
    "start": "4289320",
    "end": "4295480"
  },
  {
    "text": "default to signed and most of the time we don't really need signed integers we",
    "start": "4295480",
    "end": "4301520"
  },
  {
    "text": "need unsigned integers because most of the time we're not really dealing with negative numbers so",
    "start": "4301520",
    "end": "4308239"
  },
  {
    "text": "if you're never dealing with negative number use use unsigned it's pretty simple I use size T use size T size",
    "start": "4308239",
    "end": "4316440"
  },
  {
    "text": "uncore T size uncore T is absolutely great it's it helps you just get out of",
    "start": "4316440",
    "end": "4322840"
  },
  {
    "text": "all these types of things and another thing that actually helps is use um uh",
    "start": "4322840",
    "end": "4329920"
  },
  {
    "text": "C++ extensions even if all you're writing is code use CPP because it",
    "start": "4329920",
    "end": "4335920"
  },
  {
    "text": "enforces stricter type checking and compiler will warn you about more mistakes and and that's always a good",
    "start": "4335920",
    "end": "4342920"
  },
  {
    "text": "thing I mean personally I prefer to write in C++ but even if I'm not writing",
    "start": "4342920",
    "end": "4348040"
  },
  {
    "text": "in C++ it's a good thing to put a CPP on there and there's also compiler switches",
    "start": "4348040",
    "end": "4353960"
  },
  {
    "text": "you can use that will actually force it to um check it as if it were a C++ file",
    "start": "4353960",
    "end": "4360920"
  },
  {
    "text": "so that's that's helpful as well okay now format string bugs are um",
    "start": "4360920",
    "end": "4369800"
  },
  {
    "text": "really quite a bit of fun uh I think I believe uh David lville gave a a good",
    "start": "4369800",
    "end": "4375320"
  },
  {
    "text": "demo of that in the session previous to this and",
    "start": "4375320",
    "end": "4380480"
  },
  {
    "text": "um they're really uh uh very very interesting problem it's one of the few",
    "start": "4380480",
    "end": "4386679"
  },
  {
    "text": "new things that's come along in the last few years and it's actually pretty",
    "start": "4386679",
    "end": "4394040"
  },
  {
    "text": "simple you know printf is supposed to take a format string and then some",
    "start": "4394040",
    "end": "4400280"
  },
  {
    "text": "number of arguments well some people just get lazy and decide that whatever ever the message is we're just going to",
    "start": "4400280",
    "end": "4406960"
  },
  {
    "text": "stuff in there and make that the only argument well that's a prescription for disaster and I'll I'll show you how this",
    "start": "4406960",
    "end": "4416040"
  },
  {
    "text": "works okay so we've got a",
    "start": "4429920",
    "end": "4436560"
  },
  {
    "text": "um pretty basic little main function here we're going to try and open a file",
    "start": "4436560",
    "end": "4443159"
  },
  {
    "text": "for for read access supplied by the the user and if if we can't open the file",
    "start": "4443159",
    "end": "4452520"
  },
  {
    "text": "we're going to print a message and based on on whether or not it's a really",
    "start": "4452520",
    "end": "4458600"
  },
  {
    "text": "horrible error it's a bad error will um print some some different stuff so",
    "start": "4458600",
    "end": "4465760"
  },
  {
    "text": "here's print message and if we've decided that it's a ghastly error as opposed to something we",
    "start": "4465760",
    "end": "4473880"
  },
  {
    "text": "can recover from then and in this case I've used access denied um then we'll",
    "start": "4473880",
    "end": "4482280"
  },
  {
    "text": "say oh well we can't find such and such and",
    "start": "4482280",
    "end": "4489239"
  },
  {
    "text": "then um I've printed some stuff so I can crib a little bit and make make the whole thing easier to to uh um to write",
    "start": "4489239",
    "end": "4497199"
  },
  {
    "text": "the exploit for and do the demo and then we're going to call Fr",
    "start": "4497199",
    "end": "4504400"
  },
  {
    "text": "printf and that's where the real problem is so we're just going to Bam print",
    "start": "4504400",
    "end": "4510040"
  },
  {
    "text": "whatever is in the buffer and then we'll call the error",
    "start": "4510040",
    "end": "4517320"
  },
  {
    "text": "function which is either recoverable error which says you know hey you can",
    "start": "4517320",
    "end": "4524159"
  },
  {
    "text": "fix this or you know oh no we can't fix this at all and so then we're going to just exit",
    "start": "4524159",
    "end": "4530159"
  },
  {
    "text": "straight out okay and that's kind of a bad practice as well so that's that's what our application looks like and now",
    "start": "4530159",
    "end": "4537760"
  },
  {
    "text": "let's see what we can do with",
    "start": "4537760",
    "end": "4540800"
  },
  {
    "text": "it okay so I can",
    "start": "4547199",
    "end": "4555360"
  },
  {
    "text": "all right so this is what it's going to look like it's going to tell me where the address of Foo is I'm going to try and make my execution jump into Foo Fu",
    "start": "4561440",
    "end": "4568400"
  },
  {
    "text": "isn't called from anywhere and if I can jump into Fu then I have altered the",
    "start": "4568400",
    "end": "4575440"
  },
  {
    "text": "path of execution of the code and so it says yeah something went wrong I can fix",
    "start": "4575440",
    "end": "4581480"
  },
  {
    "text": "it well now what happens if instead of trying to open",
    "start": "4581480",
    "end": "4587880"
  },
  {
    "text": "stuff I try and open percent X percent X and you see the",
    "start": "4587880",
    "end": "4594880"
  },
  {
    "text": "first time I printed out what actually got input and then error function says",
    "start": "4594880",
    "end": "4600639"
  },
  {
    "text": "cannot find O2 what's this O2 rubbish I asked for file percent x per X well this",
    "start": "4600639",
    "end": "4607239"
  },
  {
    "text": "is a clear sign of a format string vulnerability okay so now",
    "start": "4607239",
    "end": "4615880"
  },
  {
    "text": "what I've done here is things",
    "start": "4615880",
    "end": "4624040"
  },
  {
    "text": "get a little bit complicated and so I've rever resorted",
    "start": "4626960",
    "end": "4633199"
  },
  {
    "text": "to a pearl script because it makes life easier on me and so now I've got this",
    "start": "4633199",
    "end": "4638880"
  },
  {
    "text": "very very long argument with a whole bunch of x's and at the very end I've",
    "start": "4638880",
    "end": "4644120"
  },
  {
    "text": "got a percent P that's going to show me where it is that I'm actually writing to",
    "start": "4644120",
    "end": "4651000"
  },
  {
    "text": "and then I've got an ABC to show what my what my tag",
    "start": "4651000",
    "end": "4657040"
  },
  {
    "text": "is",
    "start": "4657040",
    "end": "4660040"
  },
  {
    "text": "so okay so what I've got",
    "start": "4666639",
    "end": "4673239"
  },
  {
    "text": "here is let me scroll it up a",
    "start": "4673239",
    "end": "4678520"
  },
  {
    "text": "bit okay so what I've got here is you can see at the very end of my output it",
    "start": "4678520",
    "end": "4683679"
  },
  {
    "text": "says cannot find bunch of rubbish you know 57 82",
    "start": "4683679",
    "end": "4689320"
  },
  {
    "text": "that's percent X's all right and then at the very end you see d0 43 42 41 and",
    "start": "4689320",
    "end": "4699639"
  },
  {
    "text": "what that is is AB c0 backwards and the reason it's",
    "start": "4699639",
    "end": "4704960"
  },
  {
    "text": "backwards is because we're working on a little Indian machine instead of a big Indian machine and so what this does is it",
    "start": "4704960",
    "end": "4712320"
  },
  {
    "text": "tells me that I've got my format string in the correct alignment if I had put in",
    "start": "4712320",
    "end": "4719199"
  },
  {
    "text": "one too many or too few perc X's I'd be seeing something like 43",
    "start": "4719199",
    "end": "4728159"
  },
  {
    "text": "44 then 41 42 okay so",
    "start": "4728159",
    "end": "4733360"
  },
  {
    "text": "that's kind of what's going on so",
    "start": "4733360",
    "end": "4740960"
  },
  {
    "text": "now let's try the second phase all",
    "start": "4743480",
    "end": "4749639"
  },
  {
    "text": "right so what I've done here is I've given myself one of the",
    "start": "4750120",
    "end": "4758239"
  },
  {
    "text": "things I'm going to have to do is I'm going to have to try and give it a specifier that specifies a length of of",
    "start": "4758239",
    "end": "4765840"
  },
  {
    "text": "that's that's very large so that I can actually modify the data so all I've",
    "start": "4765840",
    "end": "4771040"
  },
  {
    "text": "really done here is I've offset my string by adding in some dots and then I've tinkered with things until I've got",
    "start": "4771040",
    "end": "4778239"
  },
  {
    "text": "my desired o 43 42 41 down at the very",
    "start": "4778239",
    "end": "4783760"
  },
  {
    "text": "end again because that's that's my percent P it shows me where I'm pointing",
    "start": "4783760",
    "end": "4788960"
  },
  {
    "text": "to okay",
    "start": "4788960",
    "end": "4792960"
  },
  {
    "text": "now we've got really an entirely different problem",
    "start": "4802120",
    "end": "4808600"
  },
  {
    "text": "now we're actually going to start writing some memory you see the percent",
    "start": "4808600",
    "end": "4814760"
  },
  {
    "text": "hn down at the very end what I want to do here is I want to write two bytes",
    "start": "4814760",
    "end": "4821400"
  },
  {
    "text": "somewhere in memory whatever is pointed to by the end of this all this uh this",
    "start": "4821400",
    "end": "4830280"
  },
  {
    "text": "stuff and I've actually um uh decided to actually start writing",
    "start": "4830280",
    "end": "4839320"
  },
  {
    "text": "things and so we're now we've made a little bit more progress and it's claiming that um it's",
    "start": "4839320",
    "end": "4848520"
  },
  {
    "text": "inconvenience this and wants to send a uh error message so we'll we'll tell it now",
    "start": "4848520",
    "end": "4855480"
  },
  {
    "text": "okay now this is the one that actually hacks",
    "start": "4855480",
    "end": "4862280"
  },
  {
    "text": "things and so what I've done",
    "start": "4862280",
    "end": "4867400"
  },
  {
    "text": "here is gone back in and I've",
    "start": "4867400",
    "end": "4875679"
  },
  {
    "text": "specified let's see if I can find my",
    "start": "4875679",
    "end": "4881400"
  },
  {
    "text": "mouse I specified the number of bites until the exact",
    "start": "4881800",
    "end": "4888120"
  },
  {
    "text": "point in memory that I wanted is where I'm",
    "start": "4888120",
    "end": "4893360"
  },
  {
    "text": "writing now I'm making this look really quite simple but it took me a couple of",
    "start": "4893360",
    "end": "4899080"
  },
  {
    "text": "days of of thrashing around reading people's papers tearing my hair out and quite a bit of cursing to actually get",
    "start": "4899080",
    "end": "4905920"
  },
  {
    "text": "it done and then just to make life even more fun it worked great on my machine at home but wouldn't work on the machine",
    "start": "4905920",
    "end": "4913080"
  },
  {
    "text": "I'm doing the demo on as of the this morning so I had to fix it",
    "start": "4913080",
    "end": "4918800"
  },
  {
    "text": "um now here's something else note that I've altered the program execution flow",
    "start": "4920960",
    "end": "4928400"
  },
  {
    "text": "we've called The Foo function and it says Ah we've been hacked and we exited",
    "start": "4928400",
    "end": "4933840"
  },
  {
    "text": "gracefully we did not blow up that's because we were able to write exactly",
    "start": "4933840",
    "end": "4939960"
  },
  {
    "text": "two bytes where I exactly wanted them I didn't blow up any Stacks I didn't",
    "start": "4939960",
    "end": "4946840"
  },
  {
    "text": "overrun anything I surgically altered two bytes anywhere in",
    "start": "4946840",
    "end": "4953120"
  },
  {
    "text": "memory okay now the uh you know the fix to this is",
    "start": "4953120",
    "end": "4959880"
  },
  {
    "text": "is is really pretty simple but the message I'm trying to get across here is if you have one of these problems in",
    "start": "4959880",
    "end": "4965840"
  },
  {
    "text": "your application you have a very very serious problem because people can",
    "start": "4965840",
    "end": "4972239"
  },
  {
    "text": "surgically alter very small chunks of your memory you can",
    "start": "4972239",
    "end": "4977639"
  },
  {
    "text": "couple a couple of these together to write a couple bites here and a couple bites there and pile it together and now",
    "start": "4977639",
    "end": "4984800"
  },
  {
    "text": "we've we're We're Off to the Races I can also use this to read random bits of memory as well and so that's um a",
    "start": "4984800",
    "end": "4992520"
  },
  {
    "text": "delightful thing for from an attacker standpoint not such a good thing if if you're the uh Defender",
    "start": "4992520",
    "end": "5001040"
  },
  {
    "text": "um now here's another one and this is this is quite popular people say well",
    "start": "5006840",
    "end": "5012360"
  },
  {
    "text": "it's only an off by one error how's that going to get me hacked how are you going to put Shell Code into one",
    "start": "5012360",
    "end": "5019400"
  },
  {
    "text": "bite and the funny thing of it is is is uh when I went to write the the buff",
    "start": "5019400",
    "end": "5026280"
  },
  {
    "text": "over on chapter for the second edition of Riot secure code one of two things I wanted to add were format strings and",
    "start": "5026280",
    "end": "5031560"
  },
  {
    "text": "off by one errors and I thought the format string oh yeah that's going be easy it'll take me in afternoon and off",
    "start": "5031560",
    "end": "5036960"
  },
  {
    "text": "by one well that that's that's some really intense stuff that's probably pretty tricky and um so you know it",
    "start": "5036960",
    "end": "5045560"
  },
  {
    "text": "actually turned out to be quite the opposite it took me an afternoon to get the off by one working and it took me a",
    "start": "5045560",
    "end": "5050960"
  },
  {
    "text": "couple days to get the other one working so got an example on that one as",
    "start": "5050960",
    "end": "5060040"
  },
  {
    "text": "well so here I've got some code that",
    "start": "5061880",
    "end": "5067880"
  },
  {
    "text": "has and off by one error the problem here is that I've used stra in copy and",
    "start": "5072120",
    "end": "5081280"
  },
  {
    "text": "I've told it to write the whole buffer and there's nothing particularly wrong with this Str in copy call here and then",
    "start": "5081280",
    "end": "5089080"
  },
  {
    "text": "I've gone to terminate my buffer and instead of saying size of buff minus one",
    "start": "5089080",
    "end": "5094480"
  },
  {
    "text": "I've just said size of buff and so I've actually written right off the end of my buffer by exactly one bite and it's this",
    "start": "5094480",
    "end": "5104000"
  },
  {
    "text": "is exploitable and we're going to do the same thing here is we're going to try",
    "start": "5104000",
    "end": "5109480"
  },
  {
    "text": "and cause the code execution to run into the bar function which will print out a",
    "start": "5109480",
    "end": "5117000"
  },
  {
    "text": "I've been hacked all right so let's try it",
    "start": "5117000",
    "end": "5126320"
  },
  {
    "text": "and okay so now it's telling me that",
    "start": "5140800",
    "end": "5147080"
  },
  {
    "text": "we've we've blown up",
    "start": "5147080",
    "end": "5152639"
  },
  {
    "text": "and what not send a uh a a message all",
    "start": "5153080",
    "end": "5158719"
  },
  {
    "text": "right so let's take a let's take a closer look",
    "start": "5158719",
    "end": "5164560"
  },
  {
    "text": "at what's going on",
    "start": "5164560",
    "end": "5170360"
  },
  {
    "text": "and let me open the process here and uh the development environment",
    "start": "5179600",
    "end": "5188040"
  },
  {
    "text": "okay so that's going to be a little bit hard to see I apologize for this but um",
    "start": "5236920",
    "end": "5245330"
  },
  {
    "text": "[Music] so let's see I",
    "start": "5245330",
    "end": "5251400"
  },
  {
    "text": "wna step out of that one and so now I'm in my function where",
    "start": "5251400",
    "end": "5257679"
  },
  {
    "text": "I'm I'm causing the problem and let's uh see what happens so I'm",
    "start": "5257679",
    "end": "5265199"
  },
  {
    "text": "setting up my call to St in copy right now and",
    "start": "5265199",
    "end": "5274080"
  },
  {
    "text": "then you can see my A's and 9ines and 1 2 3 4 5 6 7 8 9 Etc show up over",
    "start": "5274440",
    "end": "5284119"
  },
  {
    "text": "here and",
    "start": "5284119",
    "end": "5290600"
  },
  {
    "text": "um so then I'm going to write it now this is something that's interesting this let me see if I can highlight it",
    "start": "5290960",
    "end": "5297320"
  },
  {
    "text": "make it visible there we go um you see the compiler has said that we're going",
    "start": "5297320",
    "end": "5302840"
  },
  {
    "text": "to put zero into the bite pointer pointed to by EBP this is where the",
    "start": "5302840",
    "end": "5308639"
  },
  {
    "text": "trouble starts is the first thing on the stack right above the declared variables",
    "start": "5308639",
    "end": "5315440"
  },
  {
    "text": "at least when some versions of the compiler are used this particular application was compiled with visual c",
    "start": "5315440",
    "end": "5323480"
  },
  {
    "text": "um 6 when you compile it with net it doesn't work anymore the slgs switch",
    "start": "5323480",
    "end": "5329480"
  },
  {
    "text": "among other things uh stops it so we're going to put zero into",
    "start": "5329480",
    "end": "5338880"
  },
  {
    "text": "EBP [Music] and then you can see that happen right",
    "start": "5339119",
    "end": "5345000"
  },
  {
    "text": "down about in the middle see that red 0012 FF and now it's zero that's going",
    "start": "5345000",
    "end": "5350920"
  },
  {
    "text": "to tell us to jump back into our stack a little bit later on so we'll just Marly",
    "start": "5350920",
    "end": "5356960"
  },
  {
    "text": "continue along and",
    "start": "5356960",
    "end": "5361840"
  },
  {
    "text": "we're going to return right back out of here and now",
    "start": "5365040",
    "end": "5371159"
  },
  {
    "text": "we're back into Main and now we're returning out of Main and now we're going to move",
    "start": "5371159",
    "end": "5379280"
  },
  {
    "text": "EBP into ESP which is our um stack",
    "start": "5379280",
    "end": "5386400"
  },
  {
    "text": "pointer pop it return and where are we",
    "start": "5386400",
    "end": "5392360"
  },
  {
    "text": "we're at 35 36 37",
    "start": "5392360",
    "end": "5399119"
  },
  {
    "text": "38 okay which was user suppli data now the one of the interesting things about",
    "start": "5399119",
    "end": "5405119"
  },
  {
    "text": "this is it has allowed me to specify an execution Point anywhere in memory it",
    "start": "5405119",
    "end": "5412880"
  },
  {
    "text": "does not have to start with zero so I can put I can put us really just about",
    "start": "5412880",
    "end": "5418719"
  },
  {
    "text": "anywhere in memory that I want to go and",
    "start": "5418719",
    "end": "5425960"
  },
  {
    "text": "so let's uh let's go over here",
    "start": "5426639",
    "end": "5435000"
  },
  {
    "text": "and and we'll uh",
    "start": "5448520",
    "end": "5455520"
  },
  {
    "text": "so now we've blown up",
    "start": "5455520",
    "end": "5460480"
  },
  {
    "text": "and and away we go all",
    "start": "5462360",
    "end": "5468800"
  },
  {
    "text": "right we go ahead and kill the app",
    "start": "5469480",
    "end": "5475480"
  },
  {
    "text": "and decide not to send an error report and",
    "start": "5475719",
    "end": "5484320"
  },
  {
    "text": "and now there we go bam act I've been hacked on a one by",
    "start": "5496960",
    "end": "5505280"
  },
  {
    "text": "error and I think it's break time is it or what's the schedule here",
    "start": "5505920",
    "end": "5514520"
  },
  {
    "text": "okay um well we'll be back um in just a bit 15 minutes in 15",
    "start": "5514920",
    "end": "5522719"
  },
  {
    "text": "minutes",
    "start": "5542840",
    "end": "5545840"
  },
  {
    "text": "e",
    "start": "5572840",
    "end": "5575840"
  },
  {
    "text": "e",
    "start": "5602760",
    "end": "5605760"
  },
  {
    "text": "e",
    "start": "5632719",
    "end": "5635719"
  },
  {
    "text": "e",
    "start": "5662719",
    "end": "5665719"
  },
  {
    "text": "e e",
    "start": "5692639",
    "end": "5696679"
  }
]