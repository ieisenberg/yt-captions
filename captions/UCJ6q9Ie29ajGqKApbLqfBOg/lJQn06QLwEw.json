[
  {
    "start": "0",
    "end": "77000"
  },
  {
    "text": "this session is abusing Microsoft Kerberos you can read sorry you guys",
    "start": "60",
    "end": "6540"
  },
  {
    "text": "don't get it skip the crawl and Benjamin Duffy you are gonna talk about it",
    "start": "6540",
    "end": "12590"
  },
  {
    "text": "all right there we go I'm skip duck wolf this is Benjamin dopey you can tell us",
    "start": "13400",
    "end": "22260"
  },
  {
    "text": "apart I don't have a French accent so should be pretty easy I know it's kind",
    "start": "22260",
    "end": "27750"
  },
  {
    "text": "of confusing so I'll go ahead so Sven German he's the author of mini cats",
    "start": "27750",
    "end": "35930"
  },
  {
    "text": "we're going to talk about Windows and Active Directory mini cats the NT hash",
    "start": "36200",
    "end": "42600"
  },
  {
    "text": "to a point Kerberos passed the hash pass keys",
    "start": "42600",
    "end": "47670"
  },
  {
    "text": "passed ticket we're going to talk about the golden ticket too as well and we're",
    "start": "47670",
    "end": "53280"
  },
  {
    "text": "gonna have three live demos hopefully and all of I also wanted to mention that",
    "start": "53280",
    "end": "59399"
  },
  {
    "text": "all of the demos that we're gonna do will work from a non domain joined computer as well",
    "start": "59399",
    "end": "66680"
  },
  {
    "text": "so remember pass the hash yeah it still works despite what the KB or Russinovich",
    "start": "66680",
    "end": "74850"
  },
  {
    "text": "might say on Twitter just a quick reminder so a user will type this",
    "start": "74850",
    "end": "81960"
  },
  {
    "start": "77000",
    "end": "77000"
  },
  {
    "text": "username and password in hashes get calculated in else ass and then as part",
    "start": "81960",
    "end": "88950"
  },
  {
    "text": "of the process those hashes will get used for authentication pass the hash is",
    "start": "88950",
    "end": "95579"
  },
  {
    "text": "simply skipping the typing in the username password part putting the hash directly into else ass and then optic",
    "start": "95579",
    "end": "105149"
  },
  {
    "text": "eight authentication will still work because the ntlm protocol uses hashes as password equivalents oh it's cool it",
    "start": "105149",
    "end": "114810"
  },
  {
    "text": "still works however there are some environments where ntlm might be disabled there's",
    "start": "114810",
    "end": "123090"
  },
  {
    "text": "also a new security feature in some of the newer versions of Windows called protected users which is a group that",
    "start": "123090",
    "end": "128489"
  },
  {
    "text": "you can put people in that changes the way that hash so presented in memory and the",
    "start": "128489",
    "end": "134470"
  },
  {
    "text": "authentication they can use and also you",
    "start": "134470",
    "end": "140409"
  },
  {
    "text": "know maybe you just don't want to leave a lot of ntlm authentication footprints in the event log as you're doing",
    "start": "140409",
    "end": "147400"
  },
  {
    "text": "whatever it is you're doing so Kerberos is all about keys and tickets in this in",
    "start": "147400",
    "end": "157090"
  },
  {
    "text": "the what we'll talk about is a user administrator wants to access CIFS on a",
    "start": "157090",
    "end": "163030"
  },
  {
    "text": "win eight one box in the chocolate dot local domain there are three sets of",
    "start": "163030",
    "end": "168430"
  },
  {
    "text": "keys that are involved and all of them are in Active Directory and all of them are derived from a password the KDC",
    "start": "168430",
    "end": "177549"
  },
  {
    "text": "long-term secret key this is the central trust key for all of Kerberos it's used",
    "start": "177549",
    "end": "185650"
  },
  {
    "text": "to sign and encrypt everything that the KDC slash TGS needs access to there's a",
    "start": "185650",
    "end": "191470"
  },
  {
    "text": "client long-term secret key this is typically a user's password or it's derived from a user's password and it's",
    "start": "191470",
    "end": "200590"
  },
  {
    "text": "used as part of the a SREC to encrypt the session key and then the target",
    "start": "200590",
    "end": "208799"
  },
  {
    "text": "slash service these are typically computer account keys that are used when you request a service ticket and is used",
    "start": "208799",
    "end": "217540"
  },
  {
    "text": "to encrypt the session keys that are provided by the TGS to both the user requesting the session key and to the",
    "start": "217540",
    "end": "223599"
  },
  {
    "text": "service that you're requesting it from so typically the way this works is a",
    "start": "223599",
    "end": "230019"
  },
  {
    "text": "user once again types in his username and password depending on your domain functional level all the flags you've",
    "start": "230019",
    "end": "236590"
  },
  {
    "text": "got set one or multiple different keys will get created in else ass the bolt",
    "start": "236590",
    "end": "244329"
  },
  {
    "text": "des D arcy for which is essentially the ntlm hash a and the newer AES 128 256",
    "start": "244329",
    "end": "253049"
  },
  {
    "text": "those were used as part of the hey s rec to encrypt a timestamp that timestamp if it checks out by the",
    "start": "253049",
    "end": "260650"
  },
  {
    "text": "KDC you'll receive as part of the a.s reply a valid TGT",
    "start": "260650",
    "end": "266650"
  },
  {
    "text": "which you then turn around and present to the TGS to request access to a",
    "start": "266650",
    "end": "273520"
  },
  {
    "text": "service and as part of that you get the service ticket back and then you send the service ticket to the service that",
    "start": "273520",
    "end": "280030"
  },
  {
    "text": "you're requesting so pre authentication as I mentioned previously previously is",
    "start": "280030",
    "end": "286419"
  },
  {
    "text": "something that Kerberos five added to prevent you from arbitrarily just",
    "start": "286419",
    "end": "292540"
  },
  {
    "text": "getting a TGT just by asking for you have to prove that you are who you say you are by encrypting a timestamp and",
    "start": "292540",
    "end": "299110"
  },
  {
    "text": "that gets validated by the KDC before they send you a TGT the TGT is encrypted",
    "start": "299110",
    "end": "310389"
  },
  {
    "text": "with a key that is shared by all of the other k DC's TGS is in the domain namely",
    "start": "310389",
    "end": "316449"
  },
  {
    "text": "the curb TGT account and as part of the",
    "start": "316449",
    "end": "322000"
  },
  {
    "text": "process a pack or a privileged a tribute certificate gets added that includes",
    "start": "322000",
    "end": "327940"
  },
  {
    "text": "authentication data and missing data is encrypted by the KDC key as part of the",
    "start": "327940",
    "end": "334599"
  },
  {
    "text": "TGT in addition for TG T's the KDC will",
    "start": "334599",
    "end": "341979"
  },
  {
    "text": "sign the ticket essentially what the exact same hash that just used to encrypt it",
    "start": "341979",
    "end": "347520"
  },
  {
    "text": "TDS tickets we used to end up using the different key to sign it as part of the",
    "start": "347520",
    "end": "352750"
  },
  {
    "text": "validation process good so the curb TGT account password slash hash only changes",
    "start": "352750",
    "end": "361500"
  },
  {
    "text": "by default during a domain functionality",
    "start": "361500",
    "end": "367139"
  },
  {
    "text": "functional level change and only if you switch from an NT five to an NT six so",
    "start": "367139",
    "end": "374110"
  },
  {
    "text": "if you were going from 2000 and 2003 domain functional level the 2008 or 2012",
    "start": "374110",
    "end": "380340"
  },
  {
    "text": "that's there would be a curb TGT role and that's because the newer NT six",
    "start": "380340",
    "end": "386349"
  },
  {
    "text": "versions have to calculate an aes key as part of it so however if you were going from 2008",
    "start": "386349",
    "end": "394630"
  },
  {
    "text": "to 2012 there's no new curb to GT that gets generated also if you do a",
    "start": "394630",
    "end": "401289"
  },
  {
    "text": "bare metal recovery using the restore media who here actually remembers what they did with that password when they",
    "start": "401289",
    "end": "408189"
  },
  {
    "text": "set up the domain ten years ago anybody okay one guy or if it's manually changed",
    "start": "408189",
    "end": "418179"
  },
  {
    "text": "as part of a compromise recovery however that is in various stages of may or may",
    "start": "418179",
    "end": "424239"
  },
  {
    "text": "not be supported by Microsoft depending on which webpage you read and the the",
    "start": "424239",
    "end": "432119"
  },
  {
    "text": "truth is that in most enterprises that password hasn't changed in years I have",
    "start": "432119",
    "end": "438039"
  },
  {
    "text": "seen just in the past year a domain that had a curb TGT account if you do a net",
    "start": "438039",
    "end": "445089"
  },
  {
    "text": "use curb TGT whack domain it was last changed in 2005 there's Boulder out",
    "start": "445089",
    "end": "453729"
  },
  {
    "text": "there so the internal format of Kerberos",
    "start": "453729",
    "end": "459279"
  },
  {
    "text": "is actually just an ASN one encoded so you can use your favorite decoder tool to read through it the ticket format is",
    "start": "459279",
    "end": "467079"
  },
  {
    "text": "documented as far as an RFC and Microsoft has a spec for the pack format as well I'm gonna briefly talk about a",
    "start": "467079",
    "end": "475809"
  },
  {
    "text": "new feature that we're introducing called overpass the hash so remember how",
    "start": "475809",
    "end": "482529"
  },
  {
    "text": "I said that a timestamp was being encrypted by the users long-term key and that's how you demonstrate you have",
    "start": "482529",
    "end": "488679"
  },
  {
    "text": "access to the password well you can actually if you have the ntlm hash from",
    "start": "488679",
    "end": "496300"
  },
  {
    "text": "a user you can then just simply encrypt a timestamp and send it to the KDC",
    "start": "496300",
    "end": "502209"
  },
  {
    "text": "and you've demonstrated the same thing as if you've typed in the password because you have the key that gets used",
    "start": "502209",
    "end": "507999"
  },
  {
    "text": "to encrypt the timestamp and so you can end up with a full working Kerberos TGT",
    "start": "507999",
    "end": "513729"
  },
  {
    "text": "for that user without actually having to know the password and it also works with",
    "start": "513729",
    "end": "518979"
  },
  {
    "text": "the AES keys okay so how do we find these keys the",
    "start": "518979",
    "end": "529339"
  },
  {
    "text": "keys are both in Active Directory and in the client health SAS memory you can",
    "start": "529339",
    "end": "535760"
  },
  {
    "text": "find the DES keys the rc4 key is once again the same as the NT hash and",
    "start": "535760",
    "end": "542170"
  },
  {
    "text": "depending on the functional level AES and 256 keys one swing two two six keys",
    "start": "542170",
    "end": "547459"
  },
  {
    "text": "will also be in memory as well one of the features that the new protected",
    "start": "547459",
    "end": "553399"
  },
  {
    "text": "users group does is it prevents the keys from being kept in alsace memory but",
    "start": "553399",
    "end": "559100"
  },
  {
    "text": "they're still available on the DC in memory the AES keys are used the strong",
    "start": "559100",
    "end": "566560"
  },
  {
    "text": "pbkdf2 there we go I always screw that up hashing algorithm this is a strong",
    "start": "566560",
    "end": "573320"
  },
  {
    "text": "complex hashing algorithm if anybody does password cracking these hashes NT",
    "start": "573320",
    "end": "580220"
  },
  {
    "text": "hashes usually you can crack in the millions or billions per second on modern hardware these hashes are tens",
    "start": "580220",
    "end": "586430"
  },
  {
    "text": "per second unfortunately these are still used as password equivalents for example",
    "start": "586430",
    "end": "593810"
  },
  {
    "text": "with the overpass the hash so you still have a problem if you can recover the key and just encrypt a timestamp and",
    "start": "593810",
    "end": "599930"
  },
  {
    "text": "away you go so it's made it harder to recover the original password but the end result is",
    "start": "599930",
    "end": "604970"
  },
  {
    "text": "often the same",
    "start": "604970",
    "end": "607660"
  },
  {
    "text": "so no we will talk about overpass wash but for these parts you need to have key",
    "start": "610300",
    "end": "615460"
  },
  {
    "text": "so technically four of this key you can use NTDs extract this is the tool on UNIX to dump antenna much I'm pretty",
    "start": "615460",
    "end": "623380"
  },
  {
    "text": "sure that's or a lot of people are already use it but this tool can also dump AES key with the good common line",
    "start": "623380",
    "end": "631420"
  },
  {
    "text": "like you see like when you calculate you can see on this slide so it should grab",
    "start": "631420",
    "end": "636580"
  },
  {
    "text": "the entities did file on the system I've of domain controller you have the key for all accounts on the domain but",
    "start": "636580",
    "end": "644050"
  },
  {
    "text": "you can also make the same online so if you go on the domain controller with",
    "start": "644050",
    "end": "649390"
  },
  {
    "text": "mini cards you can use this particular come online to inject a little code in",
    "start": "649390",
    "end": "655240"
  },
  {
    "text": "LS SS to dump enter an ash that's not very news but you can also dump all a es",
    "start": "655240",
    "end": "661480"
  },
  {
    "text": "key also dis key because they are also in memory you can be funky but you can",
    "start": "661480",
    "end": "667990"
  },
  {
    "text": "also find all these key on the client and SS memory for this part you also you",
    "start": "667990",
    "end": "673720"
  },
  {
    "text": "can also use mini cats to damn key with sexual s ID case command you can also",
    "start": "673720",
    "end": "679060"
  },
  {
    "text": "work with mini dump on with this case so you can fire can't find a es que se for",
    "start": "679060",
    "end": "684190"
  },
  {
    "text": "key which is the interior mesh - okay but when you have all this key what you",
    "start": "684190",
    "end": "690940"
  },
  {
    "text": "can do with that with mimic as you can no use secure path slash common line to",
    "start": "690940",
    "end": "696610"
  },
  {
    "text": "inject ntlm ash which is exactly the same and as SE for key in the Kerberos",
    "start": "696610",
    "end": "702550"
  },
  {
    "text": "provider so the past version cards no can know make pass rush with ntlm like",
    "start": "702550",
    "end": "709030"
  },
  {
    "text": "all version but can do overpass awash with Kerberos provider it can inject",
    "start": "709030",
    "end": "714760"
  },
  {
    "text": "antenna mash but also a es key in memory of Kerberos provider okay although that",
    "start": "714760",
    "end": "722380"
  },
  {
    "text": "is very magic for the moment so it's time for little demonstration",
    "start": "722380",
    "end": "727440"
  },
  {
    "text": "so here we are there we we have maybe we have a Windows 8.1 version with the",
    "start": "731930",
    "end": "740760"
  },
  {
    "text": "Minnesota login that's crazy I know all people can see what I project",
    "start": "740760",
    "end": "745769"
  },
  {
    "text": "in the text and with one to command",
    "start": "745769",
    "end": "753620"
  },
  {
    "text": "so poverty bug is for access the LSS memory and secure this are a key I can",
    "start": "761070",
    "end": "768180"
  },
  {
    "text": "top it maybe whoops not problem secure let's",
    "start": "768180",
    "end": "780990"
  },
  {
    "text": "are a key is for dump all key in the in the memory it's easy and you can find",
    "start": "780990",
    "end": "789350"
  },
  {
    "text": "easily maybe easily the domain",
    "start": "789350",
    "end": "795870"
  },
  {
    "text": "administrator ash okay you have all this",
    "start": "795870",
    "end": "801389"
  },
  {
    "text": "key AES key LC Fork is a lot of version once you have this key entourage this",
    "start": "801389",
    "end": "813870"
  },
  {
    "text": "key you can go to the another machine because we have an AK machine which is outside the domain which doesn't have",
    "start": "813870",
    "end": "820259"
  },
  {
    "text": "any access to the domain controller",
    "start": "820259",
    "end": "824750"
  },
  {
    "text": "great I will copy past",
    "start": "837819",
    "end": "846040"
  },
  {
    "text": "okay access denied through the domain controller because the nobody on the domain but no we don't use mimikatz to",
    "start": "852560",
    "end": "860120"
  },
  {
    "text": "access just with this key okay okay so",
    "start": "860120",
    "end": "877160"
  },
  {
    "text": "no I have pop another shell in this shell I have no Kerberos tickets this",
    "start": "877160",
    "end": "882379"
  },
  {
    "text": "time because for the moment I have made no access and no in this Jail I can",
    "start": "882379",
    "end": "889819"
  },
  {
    "text": "access the admin dollar of the domain controller and this time in memory I have Kerberos tickets because I am",
    "start": "889819",
    "end": "895490"
  },
  {
    "text": "injected the ash in the car was provider",
    "start": "895490",
    "end": "900220"
  },
  {
    "text": "just get back so if you have maybe heard",
    "start": "904209",
    "end": "911300"
  },
  {
    "text": "about it this is exactly all our auto park works because they claim to can",
    "start": "911300",
    "end": "917120"
  },
  {
    "text": "change the password of a user without knowing the order password they exactly do the same they make overpass - they",
    "start": "917120",
    "end": "924050"
  },
  {
    "text": "inject they authenticate against the KDC with ntlm hush and they ask for the",
    "start": "924050",
    "end": "929600"
  },
  {
    "text": "service Cadman sean's password ok so no we will speak about pass the ticket",
    "start": "929600",
    "end": "936170"
  },
  {
    "text": "because overpass - looks like exactly like password because in fact it's exactly the same this is case in the ref",
    "start": "936170",
    "end": "942500"
  },
  {
    "text": "is s but pass that he gets is a little bit different for políticas we do",
    "start": "942500",
    "end": "949189"
  },
  {
    "text": "exactly the same as for key but we inject GT GT in LS s in the FSS process",
    "start": "949189",
    "end": "955250"
  },
  {
    "text": "for in the keyboard provider so this time we do not ask to kiddy seat 40 GT but we asked the key DC to give us some",
    "start": "955250",
    "end": "963139"
  },
  {
    "text": "TGS that we want for access share or other withdrawals but we can also inject",
    "start": "963139",
    "end": "969589"
  },
  {
    "text": "in the first process TGS because the GS is enough to access particular service but TGS is not enough",
    "start": "969589",
    "end": "976459"
  },
  {
    "text": "to obtain multiple other RTS this is one usage okay again these times where we",
    "start": "976459",
    "end": "984740"
  },
  {
    "text": "can find this this TGT and Jesus as usual we can find it in LSS memory and SSS process is very",
    "start": "984740",
    "end": "992180"
  },
  {
    "start": "988000",
    "end": "988000"
  },
  {
    "text": "frank you can find a lot of data into and it's very very well process because Microsoft have API to extract this TGT",
    "start": "992180",
    "end": "1000370"
  },
  {
    "text": "on TGS from memory but it's limited by default for for your own tickets so you",
    "start": "1000370",
    "end": "1006310"
  },
  {
    "text": "cannot access the GTR TGS for other users but you can extract your T V T or",
    "start": "1006310",
    "end": "1011769"
  },
  {
    "text": "your TGS yeah one exception you can only extract your T V T if a one",
    "start": "1011769",
    "end": "1017079"
  },
  {
    "text": "administrator have made some registry change to access acitivity some job application needed so you can find it in",
    "start": "1017079",
    "end": "1022779"
  },
  {
    "text": "real life ok but even a normal user without any administrator rights have enough right",
    "start": "1022779",
    "end": "1027880"
  },
  {
    "text": "to dump his own TGS tickets for malware condom all TGS tickets on Sunday to outside so you as the name of the API of",
    "start": "1027880",
    "end": "1035760"
  },
  {
    "text": "Microsoft and you can use memcache command to list and pass the tickets",
    "start": "1035760",
    "end": "1041319"
  },
  {
    "text": "with official Microsoft API it's not a arch all the all is documented on Microsoft website ok that's good you can",
    "start": "1041319",
    "end": "1050230"
  },
  {
    "text": "extract your own tickets but if you are black add black hat some people ears make pain tests so you",
    "start": "1050230",
    "end": "1055870"
  },
  {
    "text": "want to access all the TGT on all the TGS it's not exactly the same week we",
    "start": "1055870",
    "end": "1062650"
  },
  {
    "text": "cannot choose a pay for that but we can use memory reading of LS SS with memory",
    "start": "1062650",
    "end": "1068110"
  },
  {
    "text": "reading we can access all data as we can wait all the memory we can access all",
    "start": "1068110",
    "end": "1073809"
  },
  {
    "text": "session key in our SS process so it's also in mini cats mini cats you can secure with security certificates /",
    "start": "1073809",
    "end": "1081159"
  },
  {
    "text": "export you can extract all the tickets that's our SS process I've in memory and you can use any of these tickets which",
    "start": "1081159",
    "end": "1087640"
  },
  {
    "text": "Kerberos passage get comment again it look like very magic so we'll make a little demonstration maybe",
    "start": "1087640",
    "end": "1094179"
  },
  {
    "text": "if I can use my mouse okay",
    "start": "1094179",
    "end": "1102360"
  },
  {
    "text": "so on Windows I will I will just close",
    "start": "1103170",
    "end": "1110770"
  },
  {
    "text": "the session because it will flush all tickets in memory and we go back to this",
    "start": "1110770",
    "end": "1128860"
  },
  {
    "text": "session okay in this session we have access we have seen that we have keys in memory but maybe we don't have tickets",
    "start": "1128860",
    "end": "1138270"
  },
  {
    "text": "we have tickets so this we will try to extract all of this ticket",
    "start": "1141570",
    "end": "1147570"
  },
  {
    "text": "okay there's a lot of tickets on this LSS process because ever the computer a",
    "start": "1156600",
    "end": "1162539"
  },
  {
    "text": "Coon's also used tickets to make a authentication so I have a lot of file",
    "start": "1162539",
    "end": "1168149"
  },
  {
    "text": "on my desktop no I must choose a good one it will be very difficult with the screen outside so I will make it up",
    "start": "1168149",
    "end": "1175880"
  },
  {
    "text": "so just for you I will use the key ability GT file of a minute photo",
    "start": "1175880",
    "end": "1183419"
  },
  {
    "text": "because it should like a very good account so I will copy past it outside",
    "start": "1183419",
    "end": "1189929"
  },
  {
    "text": "my them",
    "start": "1189929",
    "end": "1192470"
  },
  {
    "text": "and we go back to the no and we go back",
    "start": "1200030",
    "end": "1207740"
  },
  {
    "text": "here so that's good so again we are on",
    "start": "1207740",
    "end": "1212930"
  },
  {
    "text": "the ik machine and this AK machine have no access to the domain controller because this is a special machine what I",
    "start": "1212930",
    "end": "1220940"
  },
  {
    "text": "mean no no no access denied okay no problems Kerberos pass the",
    "start": "1220940",
    "end": "1231110"
  },
  {
    "text": "ticket you can even drag and drop the file name okay that's all we are domain",
    "start": "1231110",
    "end": "1241070"
  },
  {
    "text": "administrator",
    "start": "1241070",
    "end": "1243639"
  },
  {
    "text": "so in Cuba tree we like those things because it's odds okay so let's",
    "start": "1253780",
    "end": "1265010"
  },
  {
    "text": "go back to the presentation",
    "start": "1265010",
    "end": "1270160"
  },
  {
    "text": "all right so we added this nice little chart here it's got a lot of information",
    "start": "1274960",
    "end": "1279980"
  },
  {
    "text": "and though we're not going to go over everything right now we will get the slides posted online after the talk so",
    "start": "1279980",
    "end": "1288470"
  },
  {
    "text": "there is a lot of really good information in here and if you have questions on it you can feel free to hit",
    "start": "1288470",
    "end": "1293720"
  },
  {
    "text": "us up at some point the one thing I would like to point out is the one of the coolest things is we counted the",
    "start": "1293720",
    "end": "1300500"
  },
  {
    "text": "number of times you had to touch the KDC depending on which one of these attacks you're using and so with uh if you were",
    "start": "1300500",
    "end": "1308120"
  },
  {
    "text": "able to get a TGT and you use a pass the ticket you only have to touch the TGS to get a service ticket if you seal a",
    "start": "1308120",
    "end": "1315080"
  },
  {
    "text": "service ticket you can just go directly to the service and what we're about to",
    "start": "1315080",
    "end": "1320630"
  },
  {
    "text": "talk about the golden tickets you only hit they behave just like a TTT so you",
    "start": "1320630",
    "end": "1325790"
  },
  {
    "text": "only have to touch you only have to talk to the katys TGS at that point all right",
    "start": "1325790",
    "end": "1333170"
  },
  {
    "text": "yeah the golden tickets so the golden ticket is a homemade ticket that's made",
    "start": "1333170",
    "end": "1340250"
  },
  {
    "text": "with a lot of love and a key it's not",
    "start": "1340250",
    "end": "1346010"
  },
  {
    "text": "made by the KDC so you're not beholden to any GPO settings you can put pretty",
    "start": "1346010",
    "end": "1352490"
  },
  {
    "text": "much whatever you want inside and magic things happen and it's smart card",
    "start": "1352490",
    "end": "1357950"
  },
  {
    "text": "independent as well so a lot of people",
    "start": "1357950",
    "end": "1364760"
  },
  {
    "text": "have focused on the golden ticket feature in mini cats with the 10-year life 10-year lifespan that's been",
    "start": "1364760",
    "end": "1371090"
  },
  {
    "text": "hard-coded that's not really the most interesting thing about the the golden ticket stuff and you can go change the",
    "start": "1371090",
    "end": "1377420"
  },
  {
    "text": "default of source codes available you can go change it from ten years to you know whatever you want it to be the most",
    "start": "1377420",
    "end": "1383780"
  },
  {
    "text": "interesting part is that since we have the curb TGT we can now go through and modify the stuff in the pack such as",
    "start": "1383780",
    "end": "1391880"
  },
  {
    "text": "group membership the sid to use your name etc etc Kerberos is stateless so",
    "start": "1391880",
    "end": "1401840"
  },
  {
    "text": "all of the information that you need to be able to access a service has to be inside the TGT including stuff like",
    "start": "1401840",
    "end": "1409500"
  },
  {
    "text": "whether or not the account is enabled or disabled whether or not the account is inside or outside of logon hours whether",
    "start": "1409500",
    "end": "1417030"
  },
  {
    "text": "or not the passwords about to expire or the account is expired if it's a member of any authentication silos if it's a",
    "start": "1417030",
    "end": "1425790"
  },
  {
    "text": "member of the protected users this is simply another group that is listed in the PAC so if you have someone in the",
    "start": "1425790",
    "end": "1435060"
  },
  {
    "text": "protected users group that you're attempting to do something with their account you can simply not include the",
    "start": "1435060",
    "end": "1440820"
  },
  {
    "text": "protected users group and you don't have to worry about it and group membership like I mentioned also in the PAC this",
    "start": "1440820",
    "end": "1447360"
  },
  {
    "text": "essentially means that everything is client-side enforcement at this point because you're presenting your own",
    "start": "1447360",
    "end": "1454460"
  },
  {
    "text": "version of what account policy you want to enforce when you get service tickets because you're not supposed to have the",
    "start": "1454460",
    "end": "1461910"
  },
  {
    "text": "TGT the central key for all trust or the curb TGT partner so by default the MIT",
    "start": "1461910",
    "end": "1471750"
  },
  {
    "text": "Kerberos 5 does not have any mechanisms by which a the TGS can validate that an",
    "start": "1471750",
    "end": "1478830"
  },
  {
    "text": "account has not disabled or outside of logon hours or anything because that is",
    "start": "1478830",
    "end": "1486360"
  },
  {
    "text": "supposed to be handled by the TGT you're not supposed to get a TGT if you're disabled or whatever so because we're",
    "start": "1486360",
    "end": "1493590"
  },
  {
    "text": "presenting valid TZ T's Microsoft added hey this is a feature that is in the",
    "start": "1493590",
    "end": "1499380"
  },
  {
    "text": "Microsoft version of Kerberos where if the ticket is older than 20 minutes the",
    "start": "1499380",
    "end": "1506070"
  },
  {
    "text": "king of the TGS will go back and validate when issuing new service tickets whether or not the account is",
    "start": "1506070",
    "end": "1512700"
  },
  {
    "text": "still valid for whatever reason so it gives us a 20-minute window to do whatever we want and because we can roll",
    "start": "1512700",
    "end": "1520530"
  },
  {
    "text": "our own TG T's we can always refresh the age of the TG team we'll come back to",
    "start": "1520530",
    "end": "1526170"
  },
  {
    "text": "that in a minute although I think people can see where this is going additionally we focus on creating with",
    "start": "1526170",
    "end": "1533400"
  },
  {
    "start": "1529000",
    "end": "1529000"
  },
  {
    "text": "the golden ticket fake TG T's because you only need to curb TG t account to",
    "start": "1533400",
    "end": "1539660"
  },
  {
    "text": "encrypt and sign all the little bits if we could do the service tickets look",
    "start": "1539660",
    "end": "1545330"
  },
  {
    "text": "pretty much exactly the same as the Chi GTS the problem is that you have to have different keys and those keys change",
    "start": "1545330",
    "end": "1552110"
  },
  {
    "text": "periodically Serbs computer accounts automatically rotate I believe it's every 30 to 45 days whereas we've talked",
    "start": "1552110",
    "end": "1560750"
  },
  {
    "text": "about previously the curb chee-chee-chee account never really rolls in a normal environment so if you recover it you're",
    "start": "1560750",
    "end": "1568160"
  },
  {
    "text": "good for a very long time and you can use a TGT to get multiple TGS so let's",
    "start": "1568160",
    "end": "1576350"
  },
  {
    "text": "go technical so all you need for building your own golden ticket your",
    "start": "1576350",
    "end": "1582620"
  },
  {
    "text": "golden ticket is the curb a TGT case it can be and tell em arch it can be a yes",
    "start": "1582620",
    "end": "1588290"
  },
  {
    "text": "even even death if you have it okay you also need the SAT of the domain it's not",
    "start": "1588290",
    "end": "1593780"
  },
  {
    "text": "a secret maybe it's a public data on the domain you can have it with one IPS gets",
    "start": "1593780",
    "end": "1598820"
  },
  {
    "text": "ID from mark russinovich also sync like this on the domain name so with one",
    "start": "1598820",
    "end": "1603950"
  },
  {
    "text": "command you can copy past this command we know not to do it in them you can have the krbtgt key so this is the f4",
    "start": "1603950",
    "end": "1612410"
  },
  {
    "text": "key for krbtgt Caesar is key and also with all that you can create your own",
    "start": "1612410",
    "end": "1619100"
  },
  {
    "text": "golden ticket with this particular come online this is very easy you can put domain names - ID is the keys so user",
    "start": "1619100",
    "end": "1626330"
  },
  {
    "text": "name you want to be the ID of the user name so 500 is the well know rate of",
    "start": "1626330",
    "end": "1632180"
  },
  {
    "text": "dominant minutes per topic you can put what you want onion and you can put all groups that you want the user from",
    "start": "1632180",
    "end": "1638720"
  },
  {
    "text": "belong that's your choice not the KDC okay and you can push this data in the",
    "start": "1638720",
    "end": "1644270"
  },
  {
    "text": "file and you can use the file letters in one years two years it will works okay",
    "start": "1644270",
    "end": "1649430"
  },
  {
    "text": "so what what can you what what we will do with this golden ticket with these",
    "start": "1649430",
    "end": "1656450"
  },
  {
    "text": "golden tickets I want a golden ticket which is valid ten years because I love ten years I",
    "start": "1656450",
    "end": "1661520"
  },
  {
    "text": "think it's enough for pen test a lot of pain test okay",
    "start": "1661520",
    "end": "1669160"
  },
  {
    "text": "and with this Verdun ticket I want to be administrator I want to be in domain",
    "start": "1669160",
    "end": "1674180"
  },
  {
    "text": "administrator groups I want a lot of Rights because it's a garden ticket okay so in the future in the next",
    "start": "1674180",
    "end": "1680120"
  },
  {
    "text": "demonstration I will make the garden ticket from nothing for dominant mints at all but that's not all because we are",
    "start": "1680120",
    "end": "1686540"
  },
  {
    "text": "crazy people we want we want to access a remote share when when the user is",
    "start": "1686540",
    "end": "1692930"
  },
  {
    "text": "disabled so in real life nobody can access to this share but with the garden",
    "start": "1692930",
    "end": "1698180"
  },
  {
    "text": "with a golden ticket we will create a fake tickets which in fact is a ticket",
    "start": "1698180",
    "end": "1704300"
  },
  {
    "text": "from photo domain controller it's a normal account which is not disabled at this time and we will push in the group",
    "start": "1704300",
    "end": "1710210"
  },
  {
    "text": "parts of the tickets the ID of the user which is normally disabled because of",
    "start": "1710210",
    "end": "1715880"
  },
  {
    "text": "the filter on the s ID we will be able to access to the share even after 20",
    "start": "1715880",
    "end": "1721790"
  },
  {
    "text": "minutes and because we are frankly people too we will get a golden ticket",
    "start": "1721790",
    "end": "1728240"
  },
  {
    "text": "for an user which is not in the domain it doesn't take that exists and with the",
    "start": "1728240",
    "end": "1733760"
  },
  {
    "text": "ID which is not in the lumen - and it will work it will works with domain",
    "start": "1733760",
    "end": "1739160"
  },
  {
    "text": "admin all right ok ok so they don't exist so given the",
    "start": "1739160",
    "end": "1744770"
  },
  {
    "text": "user ID so the TGT will only walk for 20 minutes but I hope that all people a",
    "start": "1744770",
    "end": "1750770"
  },
  {
    "text": "component domain in 20 minutes ok I think it's enough even if it's not",
    "start": "1750770",
    "end": "1756230"
  },
  {
    "text": "enough in 20 minutes you have enough time to obtain many ggs for access image",
    "start": "1756230",
    "end": "1761270"
  },
  {
    "text": "share - except for make pass exact or thing like that on the domain controller and this TGS will be valid 10 hours so",
    "start": "1761270",
    "end": "1768320"
  },
  {
    "text": "you have time ok and even if it's not enough because you are slope and gesture maybe I don't know",
    "start": "1768320",
    "end": "1775570"
  },
  {
    "text": "ok not all sorry I will have problems after you have the Kerberos skate so",
    "start": "1775570",
    "end": "1782510"
  },
  {
    "text": "everyone after 20 minutes you can create another problem ticket for another 20 minutes it's very cool because if when you use a",
    "start": "1782510",
    "end": "1790700"
  },
  {
    "text": "bad guy a ticket what she's reviews on them is never an flogger what is the ID",
    "start": "1790700",
    "end": "1795800"
  },
  {
    "text": "on the vent lager you can search it doesn't even exist okay",
    "start": "1795800",
    "end": "1801890"
  },
  {
    "text": "all of that is crazy so I will try to make a demonstration about these three particular case so again these times we",
    "start": "1801890",
    "end": "1810620"
  },
  {
    "text": "go back to this machine but we look off to areas all data and we go back",
    "start": "1810620",
    "end": "1821799"
  },
  {
    "text": "I will delete my old fight because I'm not a cheater okay so again",
    "start": "1823840",
    "end": "1831130"
  },
  {
    "text": "access denied ah no like but like I'm a lucky guy I will copy past all my c'mon",
    "start": "1831130",
    "end": "1837430"
  },
  {
    "text": "okay okay on this is avenues for",
    "start": "1837430",
    "end": "1848980"
  },
  {
    "text": "pentester the previous commander of mimic at four golden tickets push the TK in a file but I have included the new",
    "start": "1848980",
    "end": "1855640"
  },
  {
    "text": "commands slashed path the path the ticket at the end of the command which creates that he gets directly in memory",
    "start": "1855640",
    "end": "1862480"
  },
  {
    "text": "so you can have more time to make exploits okay so at this time I have a ticket",
    "start": "1862480",
    "end": "1868150"
  },
  {
    "text": "Nina Katz okay I have it I have a TGT",
    "start": "1868150",
    "end": "1874960"
  },
  {
    "text": "for administrator I have created only with with KBT GT and tell'em hush so",
    "start": "1874960",
    "end": "1884320"
  },
  {
    "text": "it's pretty cool and because we are Windows guy sometime we will try to",
    "start": "1884320",
    "end": "1893470"
  },
  {
    "text": "access Active Directory Center for make remote administration because there is",
    "start": "1893470",
    "end": "1899170"
  },
  {
    "text": "no only share of open test slow to",
    "start": "1899170",
    "end": "1907210"
  },
  {
    "text": "during this time I can access I mean I mean to admin shell again and I can make",
    "start": "1907210",
    "end": "1912430"
  },
  {
    "text": "administration measurement because with only the kibitz egt ash which is EF about 10 years ago I'm again domain",
    "start": "1912430",
    "end": "1920590"
  },
  {
    "text": "administrator but I think it's normal so",
    "start": "1920590",
    "end": "1929020"
  },
  {
    "text": "let's do Frankie okay this time I will",
    "start": "1929020",
    "end": "1934690"
  },
  {
    "text": "create a fake user but because we are in demonstration I make Frankie data in the ticket",
    "start": "1934690",
    "end": "1941910"
  },
  {
    "text": "so even if we are domain administrator for this time we have a particular share",
    "start": "1945720",
    "end": "1952279"
  },
  {
    "text": "that we cannot access it's test access denied account",
    "start": "1952279",
    "end": "1958679"
  },
  {
    "text": "I want to access an account which is disabled on the unactive directory okay",
    "start": "1958679",
    "end": "1965028"
  },
  {
    "text": "this account is disabled maybe you see it because me I did concede but this",
    "start": "1971750",
    "end": "1976950"
  },
  {
    "text": "account is disabled there is a little little mark on it so normally I I can't",
    "start": "1976950",
    "end": "1982379"
  },
  {
    "text": "use it so we will log off again because this is Windows look at most pure",
    "start": "1982379",
    "end": "1990720"
  },
  {
    "text": "commander is not very variable sorry",
    "start": "1990720",
    "end": "1995330"
  },
  {
    "text": "so I access denied again and again but",
    "start": "2000530",
    "end": "2008150"
  },
  {
    "text": "we will create the golden ticket couldn't get for another user so this",
    "start": "2008150",
    "end": "2015470"
  },
  {
    "text": "time I use server Sharlee the dollar account this is the DC a Coon's but I",
    "start": "2015470",
    "end": "2021980"
  },
  {
    "text": "have push in this ticket the ID of the utility that I couldn't which is",
    "start": "2021980",
    "end": "2028460"
  },
  {
    "text": "disabled okay this time it since in the file but that's not a problem we have the command",
    "start": "2028460",
    "end": "2034970"
  },
  {
    "text": "to pass the ticket with file - you already know it okay",
    "start": "2034970",
    "end": "2042279"
  },
  {
    "text": "so this time I am a domain controller or Asura this is not a problems but I",
    "start": "2046270",
    "end": "2053520"
  },
  {
    "text": "can access a news or share with an icon which is disabled and teach with walks",
    "start": "2053520",
    "end": "2067810"
  },
  {
    "text": "in 20 minutes to Evan Evan if the watchdog of Microsoft checks the TGT",
    "start": "2067810",
    "end": "2074460"
  },
  {
    "text": "again widow gosh I love look enough and",
    "start": "2074460",
    "end": "2083169"
  },
  {
    "text": "this time we will create the bad guy path so because we are on demonstration",
    "start": "2083169",
    "end": "2089590"
  },
  {
    "text": "the bad guy will be named Morgan",
    "start": "2089590",
    "end": "2093600"
  },
  {
    "text": "yep but before doing it I will make a little show for you I will delete",
    "start": "2097930",
    "end": "2107890"
  },
  {
    "text": "security security but sorry I don't get",
    "start": "2107890",
    "end": "2119450"
  },
  {
    "text": "it",
    "start": "2119450",
    "end": "2121570"
  },
  {
    "text": "I have only as a security log for showing for showing you after what is what is it into okay and unlock machine",
    "start": "2124790",
    "end": "2134450"
  },
  {
    "text": "we will create another tickets so this",
    "start": "2134450",
    "end": "2139520"
  },
  {
    "text": "times I create a ticket for username in maken which doesn't exist in Sodom in demand to create on with an user ID",
    "start": "2139520",
    "end": "2147500"
  },
  {
    "text": "which is maximum of the world it doesn't exist at all on the domain but we have",
    "start": "2147500",
    "end": "2152840"
  },
  {
    "text": "group for domain administrator okay let's choose this ticket",
    "start": "2152840",
    "end": "2160030"
  },
  {
    "text": "jeez bad guy okay",
    "start": "2168040",
    "end": "2171720"
  },
  {
    "text": "okay so know who we are so we are Morgan",
    "start": "2173380",
    "end": "2182410"
  },
  {
    "text": "which is a very bad guy and it doesn't exist in the domain but this bad guy can",
    "start": "2182410",
    "end": "2190029"
  },
  {
    "text": "access and mean again on the domain and what's active do we have seen about",
    "start": "2190029",
    "end": "2196989"
  },
  {
    "text": "about it I don't think I will make on my screen because it's very little",
    "start": "2196989",
    "end": "2204298"
  },
  {
    "text": "and the KDC only sees at Morgan want access the domain controller and you",
    "start": "2211900",
    "end": "2217569"
  },
  {
    "text": "have given and yet you have deliver at TGS to Morgan which doesn't exist in",
    "start": "2217569",
    "end": "2223720"
  },
  {
    "text": "sediment I know Morgan can access all that like a dominant Minnesota for twenty minutes but if you want you can",
    "start": "2223720",
    "end": "2230980"
  },
  {
    "text": "regenerate another TGT in twenty minutes it's very funky if you want to add",
    "start": "2230980",
    "end": "2236380"
  },
  {
    "text": "JavaScript into a username you can have a little problem with same solution",
    "start": "2236380",
    "end": "2241809"
  },
  {
    "text": "become can be thinking okay so so",
    "start": "2241809",
    "end": "2249759"
  },
  {
    "text": "sorry guy it was the last demonstration but I'm pretty sure some some people are",
    "start": "2249759",
    "end": "2257920"
  },
  {
    "text": "are Christian about it thank you very",
    "start": "2257920",
    "end": "2263410"
  },
  {
    "start": "2263000",
    "end": "2263000"
  },
  {
    "text": "much for your attention",
    "start": "2263410",
    "end": "2266190"
  },
  {
    "text": "all right guys there's Mike here if you have questions for us and we'll do our",
    "start": "2274960",
    "end": "2281930"
  },
  {
    "text": "best to answer them or deflect them as necessary anybody can you hear me hello",
    "start": "2281930",
    "end": "2295180"
  },
  {
    "text": "so microphone Microsoft will say this is not a brokenness or so model but what",
    "start": "2295180",
    "end": "2300380"
  },
  {
    "text": "I'm sorry I can you hear me now yeah so Microsoft contains says this is not a",
    "start": "2300380",
    "end": "2306650"
  },
  {
    "text": "broken SSO model but basically we're saying it is do you believe they're gonna fix this or well status of this so",
    "start": "2306650",
    "end": "2314930"
  },
  {
    "text": "there's a couple of issues that could",
    "start": "2314930",
    "end": "2320120"
  },
  {
    "text": "make this a little better the ability to automatically roll the curb TGT account",
    "start": "2320120",
    "end": "2325400"
  },
  {
    "text": "not have it be valid for ten plus years or whatever I know there's people that",
    "start": "2325400",
    "end": "2332300"
  },
  {
    "text": "are trying to figure out the best way of doing that at Microsoft right now and",
    "start": "2332300",
    "end": "2337420"
  },
  {
    "text": "they're also working on coming up with a consistent message on the appropriate",
    "start": "2337420",
    "end": "2342470"
  },
  {
    "text": "steps to take to change the curb TGT as part of whatever process you want to use but the bottom line is that Kerberos it",
    "start": "2342470",
    "end": "2351230"
  },
  {
    "text": "was one of those was never really designed to do necessarily what it is",
    "start": "2351230",
    "end": "2356360"
  },
  {
    "text": "currently doing it was designed around lessening authentication traffic that's",
    "start": "2356360",
    "end": "2361940"
  },
  {
    "text": "flying across the wire twenty something years ago and not necessarily designed",
    "start": "2361940",
    "end": "2367250"
  },
  {
    "text": "for today's modern security sort of thing and one of the fundamental problems with Kerberos has always been",
    "start": "2367250",
    "end": "2374210"
  },
  {
    "text": "if you lose the KDC you're totally hosed this is just basically taking that to",
    "start": "2374210",
    "end": "2381080"
  },
  {
    "text": "its logical conclusion being able to create arbitrary users that don't exist and access services as these these users",
    "start": "2381080",
    "end": "2390140"
  },
  {
    "text": "so there's some solutions that can be implemented that are being worked on to",
    "start": "2390140",
    "end": "2396860"
  },
  {
    "text": "try to fix some of this stuff but unfortunately right now the best advice is don't lose the domain and that is",
    "start": "2396860",
    "end": "2405320"
  },
  {
    "text": "always sort of been the going advice yes sir you read all the",
    "start": "2405320",
    "end": "2412790"
  },
  {
    "text": "keys directly from LSS memory at some point but what about the protection",
    "start": "2412790",
    "end": "2417800"
  },
  {
    "text": "mechanisms that Microsoft implemented in a 8.1 and 2012 r22 to prevent that code",
    "start": "2417800",
    "end": "2425630"
  },
  {
    "text": "could just read directly from the else's memory all right oh it Benjamin answer",
    "start": "2425630",
    "end": "2430730"
  },
  {
    "text": "that one",
    "start": "2430730",
    "end": "2433090"
  },
  {
    "text": "I'm not sure I understand education because my English is not very good but I have understood you were saying you",
    "start": "2439180",
    "end": "2446440"
  },
  {
    "text": "speak about Windows 8.1 protected users yes in this particular case when you",
    "start": "2446440",
    "end": "2452650"
  },
  {
    "text": "have the TGT I guess key or s4 key for dominant minutes but not in memory your",
    "start": "2452650",
    "end": "2458890"
  },
  {
    "text": "TK is only valid for 4 hours for all user antenna words for sedum in administrator",
    "start": "2458890",
    "end": "2465750"
  },
  {
    "text": "after 4th you must be you must have you must be typed your password to obtain a",
    "start": "2465750",
    "end": "2472240"
  },
  {
    "text": "new key to obtain a new to GT but because of the arrow ASCII on this particular case but that's not all the",
    "start": "2472240",
    "end": "2479650"
  },
  {
    "text": "point because the error is key but not the TT we can install the TT even for protected users well just looking on the",
    "start": "2479650",
    "end": "2492130"
  },
  {
    "text": "offensive security website and talking about how this is embedded 1.0 it was embedded in Metasploit but actually",
    "start": "2492130",
    "end": "2499180"
  },
  {
    "text": "doesn't talking about how you have a 2.0 packages which you are demoing are you going to be putting the 2.0 package in",
    "start": "2499180",
    "end": "2505180"
  },
  {
    "text": "Metasploit making available i have fairly confident at some point that's gonna happen I think it's just one of",
    "start": "2505180",
    "end": "2512050"
  },
  {
    "text": "those things that we're not the ones that maintain that particular piece of things and so the functionality that",
    "start": "2512050",
    "end": "2520780"
  },
  {
    "text": "everyone was using is primarily based off the 1.0 but I believe very soon",
    "start": "2520780",
    "end": "2525970"
  },
  {
    "text": "they'll probably get that updated to a more recent version hi but to back to",
    "start": "2525970",
    "end": "2534190"
  },
  {
    "text": "your previous answer when you say do not use domain do you mean the local accounts are more secure or you say",
    "start": "2534190",
    "end": "2541690"
  },
  {
    "text": "there is in our protocol which is more secure than characterís no no the the",
    "start": "2541690",
    "end": "2547360"
  },
  {
    "text": "problem is that we're sort of reaching a point where Kerberos is really showing its age how many things in your daily",
    "start": "2547360",
    "end": "2556570"
  },
  {
    "text": "job are 20 years old and still functioning properly so unfortunately",
    "start": "2556570",
    "end": "2563710"
  },
  {
    "text": "you have to you have to dance with the girl you came with so you",
    "start": "2563710",
    "end": "2571859"
  },
  {
    "text": "you know it's you you're you're invested you have a domain you have thousands of",
    "start": "2572180",
    "end": "2577650"
  },
  {
    "text": "users you've been doing it this way if you decide tomorrow you'll want to do something else that's not something you",
    "start": "2577650",
    "end": "2583740"
  },
  {
    "text": "can't just stop doing it right now this is the best thing out there and the",
    "start": "2583740",
    "end": "2589650"
  },
  {
    "text": "priority should be preventing people from being able to dump the hashes in the first place while other mitigations",
    "start": "2589650",
    "end": "2596730"
  },
  {
    "text": "and techniques are being developed unfortunately today you know you're kind",
    "start": "2596730",
    "end": "2603930"
  },
  {
    "text": "of screwed if you have an FG dump from ten years ago you're potentially screwed",
    "start": "2603930",
    "end": "2609710"
  },
  {
    "text": "you know if you had a pen test from ten years ago where they dump the hashes that curb TGT account could still be",
    "start": "2609710",
    "end": "2615450"
  },
  {
    "text": "live so there's you know it's it's unfortunate that's where we are right",
    "start": "2615450",
    "end": "2621540"
  },
  {
    "text": "now but it is what it is Thanks no",
    "start": "2621540",
    "end": "2626819"
  },
  {
    "text": "problem any experiments with a protected",
    "start": "2626819",
    "end": "2632369"
  },
  {
    "text": "process light for protecting house s memory reading and if so it doesn't make any difference at all detected process",
    "start": "2632369",
    "end": "2641760"
  },
  {
    "text": "light sorry it's called protected process light it's something with",
    "start": "2641760",
    "end": "2647660"
  },
  {
    "text": "Windows 8.1 but there so here we turn down it will like protect process yet",
    "start": "2647660",
    "end": "2655079"
  },
  {
    "text": "possess we don't have time to present it but I have also created a driver in",
    "start": "2655079",
    "end": "2660180"
  },
  {
    "text": "mimic ads on this particular do I work on patch the structure of the process to",
    "start": "2660180",
    "end": "2665970"
  },
  {
    "text": "unprotect supposes I thank you for a great presentation and",
    "start": "2665970",
    "end": "2676480"
  },
  {
    "text": "for the great tool as well hey but I would like to expand on a previous question about using local",
    "start": "2676480",
    "end": "2681640"
  },
  {
    "text": "administrators or just minimizing the presence of is also in accounts on end",
    "start": "2681640",
    "end": "2688630"
  },
  {
    "text": "points or other machines so and there will be a presentation later about it about the exposure to pass the hash but",
    "start": "2688630",
    "end": "2695770"
  },
  {
    "text": "in generally if all the administrative tasks or the majority of administrative",
    "start": "2695770",
    "end": "2701530"
  },
  {
    "text": "tasks are done with local accounts or with segmented or zoned accounts will",
    "start": "2701530",
    "end": "2708160"
  },
  {
    "text": "this be an effective mitigation in European a lot of that is just going to",
    "start": "2708160",
    "end": "2714880"
  },
  {
    "text": "come down to so many auxilary things for",
    "start": "2714880",
    "end": "2720400"
  },
  {
    "text": "example do you have a backup of one of your domain controllers sitting on a hard drive somewhere that is unprotected",
    "start": "2720400",
    "end": "2727380"
  },
  {
    "text": "are the backup tapes encrypted it like I said is there a pen test report from ten",
    "start": "2727380",
    "end": "2734260"
  },
  {
    "text": "years ago that shows the that they demonstrated where they dumped the hashes where they didn't obscure the curb TGT a hash",
    "start": "2734260",
    "end": "2740950"
  },
  {
    "text": "because they didn't know what to do with it segmenting is always good there's always",
    "start": "2740950",
    "end": "2746230"
  },
  {
    "text": "best business practices to raise the bar monitoring for access monitoring the",
    "start": "2746230",
    "end": "2753580"
  },
  {
    "text": "event log central log collection all the stuff you're supposed to be doing anyway",
    "start": "2753580",
    "end": "2759240"
  },
  {
    "text": "minimizing exposure to the administrative functions with local administrators you know minimizing",
    "start": "2759240",
    "end": "2764620"
  },
  {
    "text": "number of domain admins you know you don't have to have everybody in the domain admins group or Enterprise admins",
    "start": "2764620",
    "end": "2770230"
  },
  {
    "text": "group or even a group that has something close to those level of rights all of",
    "start": "2770230",
    "end": "2777010"
  },
  {
    "text": "that stuff is a good best business practice to try to minimize the effect",
    "start": "2777010",
    "end": "2782550"
  },
  {
    "text": "but ultimately if you lose the KDC you're you're you're toast so everything should be focused on",
    "start": "2782550",
    "end": "2790690"
  },
  {
    "text": "trying not to lose the KDC said Vica said you have to think about backups you have to think about file shares you have",
    "start": "2790690",
    "end": "2797320"
  },
  {
    "text": "to think about how you manage passwords in the system there's so many vectors",
    "start": "2797320",
    "end": "2802720"
  },
  {
    "text": "that a pen tester can use or an adversary an actual adversary can use to",
    "start": "2802720",
    "end": "2808290"
  },
  {
    "text": "gain access thank you I believe you read",
    "start": "2808290",
    "end": "2815260"
  },
  {
    "text": "the keys from from memory at the client site at Mike could you speak a little a",
    "start": "2815260",
    "end": "2821680"
  },
  {
    "text": "little closer there yeah yeah you read the keys from from memory on the client",
    "start": "2821680",
    "end": "2827380"
  },
  {
    "text": "side can you clarify when these keys are present what brick preconditions there",
    "start": "2827380",
    "end": "2834040"
  },
  {
    "text": "are the keys are only present on the in",
    "start": "2834040",
    "end": "2840730"
  },
  {
    "text": "LS SS process in a in fact Microsoft store a lot of data in each provider for",
    "start": "2840730",
    "end": "2848020"
  },
  {
    "text": "their own usage by is important for Intel em hash it sister by image v10 DLL",
    "start": "2848020",
    "end": "2854140"
  },
  {
    "text": "from a pro Kerberos provider this talk AES key DES key a C for key different",
    "start": "2854140",
    "end": "2860980"
  },
  {
    "text": "passwords sometimes in clear pin code of SmartCall so there is a lot of key in",
    "start": "2860980",
    "end": "2866890"
  },
  {
    "text": "Kerberos provider so always excuse me pretty much always",
    "start": "2866890",
    "end": "2874000"
  },
  {
    "text": "on every clients is that what you're saying not always and in the case of",
    "start": "2874000",
    "end": "2887830"
  },
  {
    "text": "protected user you only find TGT TGS and sometimes pin code",
    "start": "2887830",
    "end": "2895800"
  },
  {
    "text": "have you looked at the implications of you attacks in an environment where a",
    "start": "2902610",
    "end": "2909570"
  },
  {
    "text": "domain in set up with a forest with multiple domains and you could ask for TGG that we grant you varied accesses to",
    "start": "2909570",
    "end": "2919680"
  },
  {
    "text": "other domains in that forest using the Trust's I know it's something that we've",
    "start": "2919680",
    "end": "2927330"
  },
  {
    "text": "talked about I have not actually played with it but I believe he has it depends",
    "start": "2927330",
    "end": "2933450"
  },
  {
    "text": "on the relationship but yes if you have a garden ticket on the domain and his domain is twisted in those elements the",
    "start": "2933450",
    "end": "2939180"
  },
  {
    "text": "garden ticket can be used to obtain on those of CGT no söderman on sometimes or",
    "start": "2939180",
    "end": "2944190"
  },
  {
    "text": "latias but this feature is not yet implemented in cats I guess the future",
    "start": "2944190",
    "end": "2950670"
  },
  {
    "text": "is not yet implemented in cats sorry the future is not yet implemented in many",
    "start": "2950670",
    "end": "2957300"
  },
  {
    "text": "cats oh you could put what you want inside so if you make a golden ticket to",
    "start": "2957300",
    "end": "2963320"
  },
  {
    "text": "access sweater on the on the hood",
    "start": "2963320",
    "end": "2968520"
  },
  {
    "text": "forests you can use this golden ticket normally in Windows when you access to a share in all the domain this is the",
    "start": "2968520",
    "end": "2975359"
  },
  {
    "text": "Kerberos client of Windows that we will ask that will ask also to GT on those are tickets I don't have to cut it okay",
    "start": "2975359",
    "end": "2983070"
  },
  {
    "text": "so it's just a matter of including the right domain IDs when you request your",
    "start": "2983070",
    "end": "2989400"
  },
  {
    "text": "ticket right you'll have to put the right domain you have to put the right domain Sid and all of that and then when",
    "start": "2989400",
    "end": "2994920"
  },
  {
    "text": "you create the new TGT for for that you can do it that way or if you're in like",
    "start": "2994920",
    "end": "3000710"
  },
  {
    "text": "the parent you can create a TGT for that and then Microsoft where the the",
    "start": "3000710",
    "end": "3005840"
  },
  {
    "text": "Kerberos client will automatically get additional tickets depending on the trust level okay thanks",
    "start": "3005840",
    "end": "3013840"
  },
  {
    "text": "anybody else don't be shy alright well I",
    "start": "3015350",
    "end": "3024630"
  },
  {
    "text": "guess that's a wrap so we'll be around",
    "start": "3024630",
    "end": "3028910"
  }
]