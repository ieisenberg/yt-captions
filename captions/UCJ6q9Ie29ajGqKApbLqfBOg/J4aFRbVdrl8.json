[
  {
    "text": "[Music]",
    "start": "5910",
    "end": "8919"
  },
  {
    "text": "welcome to black hat briefings held November 21st through the 22nd 2001 in Amsterdam this is videotape number eight",
    "start": "19480",
    "end": "27080"
  },
  {
    "text": "active directory and group policy",
    "start": "27080",
    "end": "31560"
  },
  {
    "text": "you for all attending uh my name is Raymond Forbes um we're going to be talking about active directory and Group",
    "start": "37440",
    "end": "43520"
  },
  {
    "text": "Policy uh to give you a little background of me I don't know how many people have been in blackout before but",
    "start": "43520",
    "end": "48559"
  },
  {
    "text": "I've spoken at Several of these usually under a rooster um currently right now",
    "start": "48559",
    "end": "53800"
  },
  {
    "text": "I'm employed at Microsoft as a security architect um originally was hired as pet",
    "start": "53800",
    "end": "60160"
  },
  {
    "text": "ER for online operations MSN passport hot mail um now I'm basically doing",
    "start": "60160",
    "end": "66840"
  },
  {
    "text": "architect work on the the infrastructure itself one of my roles being being the security representative for active",
    "start": "66840",
    "end": "73040"
  },
  {
    "text": "directory um and using Group Policy specifically for creating an IPC",
    "start": "73040",
    "end": "79680"
  },
  {
    "text": "infrastructure and we're going to go over basically how active directory works and how Group Policy interacts",
    "start": "79680",
    "end": "85320"
  },
  {
    "text": "with it um we're going to talk about the structures and the",
    "start": "85320",
    "end": "91320"
  },
  {
    "text": "components how objects interact how the roles the schema sites interruptibility with other uh operating",
    "start": "91320",
    "end": "99880"
  },
  {
    "text": "systems so the first step is what is an active directory active directory is an",
    "start": "100479",
    "end": "105880"
  },
  {
    "text": "ldap directory service plain and simple ldap as I'm sure many of are familiar could be considered X500 light um",
    "start": "105880",
    "end": "113000"
  },
  {
    "text": "somebody decided the X500 protocol was a bit too heavy so they narrowed it down and made it ldap um",
    "start": "113000",
    "end": "120479"
  },
  {
    "text": "active directory is actually Incorporated and requires um DNS it doesn't require Microsoft DNS but it",
    "start": "120479",
    "end": "126840"
  },
  {
    "text": "does require a DNS and it has to be at least a b at least a bind 495 but",
    "start": "126840",
    "end": "132720"
  },
  {
    "text": "preferably an eight you has to be able to support SRV records and the",
    "start": "132720",
    "end": "138000"
  },
  {
    "text": "such and if you want to use a full benefit of it it has to support Dynamic",
    "start": "138000",
    "end": "143720"
  },
  {
    "text": "updates um it's incorporated into Windows 2000 and at XP uh it said Cally managed basically",
    "start": "143720",
    "end": "151599"
  },
  {
    "text": "it's the central management point for anything that you if you want to centrally manage your Windows 2000",
    "start": "151599",
    "end": "156640"
  },
  {
    "text": "infrastructure this is the way it happens it's extensible meaning that in a third-party application doesn't need",
    "start": "156640",
    "end": "163280"
  },
  {
    "text": "to rewrite a directory service on top of your infrastructure you can basically",
    "start": "163280",
    "end": "169319"
  },
  {
    "text": "just extend the infrastructure the it exists through the schema and we're going to talk a little bit about that",
    "start": "169319",
    "end": "174480"
  },
  {
    "text": "and it's interoperable I know for instance interoperable with n i I'm not sure about NDS I've never really",
    "start": "174480",
    "end": "180239"
  },
  {
    "text": "actually seen that but I know it works with n so what makes up active",
    "start": "180239",
    "end": "187159"
  },
  {
    "text": "directory um the key fundamental issue of active directory is objects uh active",
    "start": "187159",
    "end": "193799"
  },
  {
    "text": "directory is I guess an extension of the objectoriented design everything that",
    "start": "193799",
    "end": "198840"
  },
  {
    "text": "you see within active directory is considered an object whether it be a user a machine a printer any kind of",
    "start": "198840",
    "end": "206720"
  },
  {
    "text": "thing you're accessing is going to be an object it's going to have attributes which you could if you're an",
    "start": "206720",
    "end": "212200"
  },
  {
    "text": "object and a programmer you could consider the methods",
    "start": "212200",
    "end": "218480"
  },
  {
    "text": "um sites it's made up of sites which are basically just collections of your of uh",
    "start": "218480",
    "end": "224480"
  },
  {
    "text": "your subnets your IP addresses it's made up of domains trees and forests the idea",
    "start": "224480",
    "end": "230120"
  },
  {
    "text": "being that a tree is a collection of domains so you create a domain say black",
    "start": "230120",
    "end": "236120"
  },
  {
    "text": "hat.com and then you create subdomains um and of say east. black hat.com or",
    "start": "236120",
    "end": "242720"
  },
  {
    "text": "west and multiple trees live inside a forest and I'll show I'll have a picture of that in a little bit and we have",
    "start": "242720",
    "end": "248560"
  },
  {
    "text": "multiple kinds of trusts um in old school nt4 days you had the one kind of",
    "start": "248560",
    "end": "254000"
  },
  {
    "text": "trust you had what was considered a oneway trust relationship and if you wanted to create a two-way trust",
    "start": "254000",
    "end": "259759"
  },
  {
    "text": "relationship between multiple domains you had to create each one by hand well when is 2000 took the kind of",
    "start": "259759",
    "end": "267479"
  },
  {
    "text": "the keros approach to trust concept steps and you have what's called a transitive trust which means it's a by",
    "start": "267479",
    "end": "275039"
  },
  {
    "text": "default a trust relationship between a domain and its child domain are",
    "start": "275039",
    "end": "280080"
  },
  {
    "text": "considered two-way transitive and I'll show what that means and a cross link which is basically a shortcut",
    "start": "280080",
    "end": "287080"
  },
  {
    "text": "trust um you have domain controllers and you have your groups I'm sure many are familiar with the the global groups and",
    "start": "287080",
    "end": "293479"
  },
  {
    "text": "local groups but there's another group which is called the the universal Group which basically means that inor Ates",
    "start": "293479",
    "end": "300440"
  },
  {
    "text": "users from many domains okay so this is a very basic",
    "start": "300440",
    "end": "308240"
  },
  {
    "text": "active directory infrastructure you have your domain and you have what's called organizational",
    "start": "308240",
    "end": "313479"
  },
  {
    "text": "units now the easiest way to think about organizational units is they are an",
    "start": "313479",
    "end": "319919"
  },
  {
    "text": "Administration concept they're nothing more than a way to group objects be it machines or be it um users",
    "start": "319919",
    "end": "329720"
  },
  {
    "text": "here we have a tree as you can see here a two-way trust is established on each side of the tree",
    "start": "331160",
    "end": "337479"
  },
  {
    "text": "we have westblack hat.com and eastlack hat.com and then what you see the dotted",
    "start": "337479",
    "end": "342880"
  },
  {
    "text": "line here this is the transitive trust which basically means since West trust",
    "start": "342880",
    "end": "348479"
  },
  {
    "text": "black hat.com and East trust black hat.com West trust East and East Trust",
    "start": "348479",
    "end": "355400"
  },
  {
    "text": "West now um like I said this is the way ceros handles trusts but but it's something you should be aware of when",
    "start": "355400",
    "end": "360840"
  },
  {
    "text": "you're setting up trust relationships that you'll notice like you'll be you know trying to log in a machine that",
    "start": "360840",
    "end": "367080"
  },
  {
    "text": "exists in East you pull down the drop- down menu of all the different domains you can log into you'll see West and",
    "start": "367080",
    "end": "372120"
  },
  {
    "text": "you'll see black hat.com",
    "start": "372120",
    "end": "375720"
  },
  {
    "text": "um here we see a forest and the point of this forest was two",
    "start": "380000",
    "end": "385520"
  },
  {
    "text": "things when you establish a trust relationship between two trees in a forest by default it is a one-way",
    "start": "385520",
    "end": "393160"
  },
  {
    "text": "non-transitive trust and the other point of this one",
    "start": "393160",
    "end": "398199"
  },
  {
    "text": "was to bring out what a Crosslink uh Crosslink trust is now the way authentication happens",
    "start": "398199",
    "end": "407120"
  },
  {
    "text": "within this domain I'm over here in in domain right and I actually try to use",
    "start": "407120",
    "end": "413080"
  },
  {
    "text": "my two my transitive trust authenticate against this one the way it works is I actually send my CR request up to Black",
    "start": "413080",
    "end": "421000"
  },
  {
    "text": "add.com which then passes the request back down and you can see there's a little bit of extra traffic a little bit",
    "start": "421000",
    "end": "427160"
  },
  {
    "text": "extra delay depending on your environment you may want to create what's called a Crosslink trust and a",
    "start": "427160",
    "end": "433319"
  },
  {
    "text": "trust is established between these two domains so the traffic isn't passed up through black hat.com it's directly",
    "start": "433319",
    "end": "439680"
  },
  {
    "text": "handed over to the",
    "start": "439680",
    "end": "442479"
  },
  {
    "text": "West okay what is a site sites are collections of IP addresses is",
    "start": "446759",
    "end": "453639"
  },
  {
    "text": "pretty straightforward there are subnets that you've established um and Ma basically the main point of a site is to",
    "start": "453639",
    "end": "461759"
  },
  {
    "text": "establish a physical description of your environment the concept of domains is",
    "start": "461759",
    "end": "468240"
  },
  {
    "text": "more of a political or more of a top or more ideological type view of it but and",
    "start": "468240",
    "end": "474639"
  },
  {
    "text": "the idea is that it should be able to span geographical areas and then you can have rights to establish policies based",
    "start": "474639",
    "end": "481800"
  },
  {
    "text": "on geographical areas for instance maybe you have a um you're you have a an",
    "start": "481800",
    "end": "488560"
  },
  {
    "text": "office in in Asia that for some reason there's a law they can't view certain websites well you can apply a policy",
    "start": "488560",
    "end": "495919"
  },
  {
    "text": "onto the Asia site itself to block something without actually having to",
    "start": "495919",
    "end": "502720"
  },
  {
    "text": "like Drop it onto their domain which would affect more than just Asia um the other thing that it's used",
    "start": "502720",
    "end": "509720"
  },
  {
    "text": "for is replication it's very important for replication it's what there well it",
    "start": "509720",
    "end": "515800"
  },
  {
    "text": "uh handles the inite replication and inside the site you create your your",
    "start": "515800",
    "end": "521120"
  },
  {
    "text": "Bridge head server so that when you have intersight communication going on it's handled there um it's also used at log",
    "start": "521120",
    "end": "529080"
  },
  {
    "text": "on to find the closest domain",
    "start": "529080",
    "end": "532279"
  },
  {
    "text": "controller one thing to know about is that the subnet it's it's the subnets are manually are basically manually",
    "start": "537399",
    "end": "544200"
  },
  {
    "text": "entered by you so they don't necessarily have to conform to whatever your",
    "start": "544200",
    "end": "549920"
  },
  {
    "text": "subnetting environment is like on your network um the tool that it uses for in",
    "start": "549920",
    "end": "557920"
  },
  {
    "text": "within the site itself to determine how the replication is going to happen it's called the knowledge consistency Checker",
    "start": "557920",
    "end": "563920"
  },
  {
    "text": "uh it's just a tiny little automatic tool goes through your environment and determines how the rep application",
    "start": "563920",
    "end": "569760"
  },
  {
    "text": "topology is going to happen it's also going to determine your Bridge head servers although this is something that",
    "start": "569760",
    "end": "575120"
  },
  {
    "text": "can be gone through and set",
    "start": "575120",
    "end": "578200"
  },
  {
    "text": "manually okay so active directory does not have a",
    "start": "581440",
    "end": "586760"
  },
  {
    "text": "concept of a primary domain controller and backup domain controllers it is a",
    "start": "586760",
    "end": "591839"
  },
  {
    "text": "multimaster environment which basically means changes can happen on any one of",
    "start": "591839",
    "end": "597160"
  },
  {
    "text": "the domain controllers nothing takes precedent so the question is how do you handle",
    "start": "597160",
    "end": "602800"
  },
  {
    "text": "conflicts how do you how do you deal with replication correctly what if changes happen on multiple boxes and a",
    "start": "602800",
    "end": "608959"
  },
  {
    "text": "lot of this is where the fsmo rules come in uh the first fsmo rule is your domain",
    "start": "608959",
    "end": "615560"
  },
  {
    "text": "naming Master basically as a as a background of this what a rule is is a",
    "start": "615560",
    "end": "621600"
  },
  {
    "text": "responsibility that a particular domain controller takes these are configurable within active directory um within your",
    "start": "621600",
    "end": "628760"
  },
  {
    "text": "with specific specifically within the the sites and services snap-in and but each one of these roles",
    "start": "628760",
    "end": "635200"
  },
  {
    "text": "has to be maintained so the domain ma naming master um the its role is to hold",
    "start": "635200",
    "end": "643320"
  },
  {
    "text": "specific information about what domains and what what domains and what sites and",
    "start": "643320",
    "end": "649399"
  },
  {
    "text": "what trees exist in the forest that's its only role so if a domain is deleted",
    "start": "649399",
    "end": "655440"
  },
  {
    "text": "if a tree is deleted or anything is deleted like that it's sent specifically to here and this is the only one that",
    "start": "655440",
    "end": "660720"
  },
  {
    "text": "holds the information the infrastructure",
    "start": "660720",
    "end": "666360"
  },
  {
    "text": "Master the infrastructure Master specifically holds information about",
    "start": "666360",
    "end": "672880"
  },
  {
    "text": "cross domain or cross tree cross Forest information in the old days of nt4 if",
    "start": "672880",
    "end": "680959"
  },
  {
    "text": "you were to say wanted to move an account from one domain to another domain you would have to effectively",
    "start": "680959",
    "end": "687760"
  },
  {
    "text": "delete the account and then rebuild the account somewhere else which was kind of",
    "start": "687760",
    "end": "693040"
  },
  {
    "text": "a headache because what that meant is any kind of permissions or anything like that you had to redo those permissions",
    "start": "693040",
    "end": "698720"
  },
  {
    "text": "again well under Windows 2000 that's not the case it actually attaches the Sid",
    "start": "698720",
    "end": "705680"
  },
  {
    "text": "moves that um that account over and actually has that Sid as a secondary Sid",
    "start": "705680",
    "end": "711720"
  },
  {
    "text": "onto that account which means any permissions that a user had when they",
    "start": "711720",
    "end": "716839"
  },
  {
    "text": "moved they still have all all that information is maintained by infrastructure Master now that's",
    "start": "716839",
    "end": "723279"
  },
  {
    "text": "something to think about because of the reason why they're moving domains is is because they've changed roles within the",
    "start": "723279",
    "end": "729480"
  },
  {
    "text": "company say they were in HR they're no longer in HR they're in you know manufacturing obviously you want to make",
    "start": "729480",
    "end": "735600"
  },
  {
    "text": "sure that they don't have access to that information that they had before PDC emulator um the this the PDC",
    "start": "735600",
    "end": "746839"
  },
  {
    "text": "emulator is one of the main roles it has is to support nt4 backup domain",
    "start": "746839",
    "end": "755040"
  },
  {
    "text": "controllers it is possible within um Windows 2000 mixed environment to have",
    "start": "755040",
    "end": "760720"
  },
  {
    "text": "domain controllers that are nt4 the problem is they don't understand the concept of mixed",
    "start": "760720",
    "end": "766199"
  },
  {
    "text": "Master the PDC emulator actually takes the the the role of the PDC and",
    "start": "766199",
    "end": "771480"
  },
  {
    "text": "announces itself in such a way now later on we'll also learn that it does a",
    "start": "771480",
    "end": "777199"
  },
  {
    "text": "couple of other important tasks so even though you don't have say you start up um the Windows 2000 active directory and",
    "start": "777199",
    "end": "783680"
  },
  {
    "text": "you do not install U nt4 and you only have Windows 2000 you will still have a",
    "start": "783680",
    "end": "789199"
  },
  {
    "text": "PDC emulator because it handles some important issues with passwords and such we'll talk about those in a",
    "start": "789199",
    "end": "795320"
  },
  {
    "text": "second um there's a relative ID master or the rid Master basically what that",
    "start": "795320",
    "end": "800639"
  },
  {
    "text": "does is it makes sure that the the rid or the Sid that is established for each",
    "start": "800639",
    "end": "806000"
  },
  {
    "text": "object that's created um a policy object a group object a user any such object is",
    "start": "806000",
    "end": "813639"
  },
  {
    "text": "unique globally throughout the infrastructure and then there's the",
    "start": "813639",
    "end": "820000"
  },
  {
    "text": "schema Master specifically what a schema Master does is it holds a schema for the entire",
    "start": "820000",
    "end": "827120"
  },
  {
    "text": "Forest um why this is important and there's only one schema for the forest",
    "start": "827120",
    "end": "832720"
  },
  {
    "text": "and why that is is important is you cannot extend a schema for one domain",
    "start": "832720",
    "end": "837880"
  },
  {
    "text": "that if you extend a schema it actually affects the entire Forest um the only way around this is to create multiple",
    "start": "837880",
    "end": "844800"
  },
  {
    "text": "forests I believe one of the main differences in XP is that that is not true they've moved away from the schema",
    "start": "844800",
    "end": "852399"
  },
  {
    "text": "being attached to the forest",
    "start": "852399",
    "end": "855880"
  },
  {
    "text": "itself and then there's the global catalog what the global catalog server",
    "start": "858440",
    "end": "863880"
  },
  {
    "text": "does is it establishes a quick small",
    "start": "863880",
    "end": "869160"
  },
  {
    "text": "readon version of the schema dat of the of the uh entire",
    "start": "869160",
    "end": "874600"
  },
  {
    "text": "schema um it has information that maybe you've said like for instance if you",
    "start": "874600",
    "end": "879680"
  },
  {
    "text": "think that phone numbers are going to be accessed a lot in your environment you can make that part of your the global",
    "start": "879680",
    "end": "885800"
  },
  {
    "text": "catalog that way people searching for those the searches will be faster um it's actually necessary for",
    "start": "885800",
    "end": "893240"
  },
  {
    "text": "logons this is this is a tricky one how many people here actually have an active directory infrastructure where you're",
    "start": "893240",
    "end": "900199"
  },
  {
    "text": "working wow very few when you do this um you want to make sure that the server",
    "start": "900199",
    "end": "905759"
  },
  {
    "text": "that's as your glob Global catalog does not go offline um basically what happens",
    "start": "905759",
    "end": "911040"
  },
  {
    "text": "if you lose your Global catalog you can't log into the network anymore and of course it doesn't give any like really cool error messages like Global",
    "start": "911040",
    "end": "918000"
  },
  {
    "text": "catalog is down it says um can't connect to the network loging on with cash",
    "start": "918000",
    "end": "923600"
  },
  {
    "text": "information which is useless and it took me about two days to figure out why the machine why nobody could log",
    "start": "923600",
    "end": "930199"
  },
  {
    "text": "on so it's very",
    "start": "930199",
    "end": "933880"
  },
  {
    "text": "important okay so what exactly is the schema um schema specifically holds what",
    "start": "936240",
    "end": "945360"
  },
  {
    "text": "type of information can actually be stored in active directory you could call it the skeleton of active",
    "start": "945360",
    "end": "950759"
  },
  {
    "text": "directory um the scheme is built on classes and what a class is is a",
    "start": "950759",
    "end": "956199"
  },
  {
    "text": "description of what an object can be for instance you might have a user class and",
    "start": "956199",
    "end": "962440"
  },
  {
    "text": "that user class when you create a user it goes to the user class pulls out the",
    "start": "962440",
    "end": "969120"
  },
  {
    "text": "information of what a user object can look like and then creates a user object attributes are what's defined are",
    "start": "969120",
    "end": "976079"
  },
  {
    "text": "actually defined for classes you have optional class you have optional and you",
    "start": "976079",
    "end": "981480"
  },
  {
    "text": "have mandatory um for a user for instance mandatory is a Sid and a name",
    "start": "981480",
    "end": "989680"
  },
  {
    "text": "um optionals everything in fact and like I said this is extensional extensible you could go and say your your user",
    "start": "989680",
    "end": "996199"
  },
  {
    "text": "class and you could make a password",
    "start": "996199",
    "end": "1000279"
  },
  {
    "text": "mandatory um the schema itself is built in a tree likee structure you have your",
    "start": "1001959",
    "end": "1008360"
  },
  {
    "text": "the the root of your schema and it and it flows down which means that the classes are",
    "start": "1008360",
    "end": "1014360"
  },
  {
    "text": "inherited um say you were to have a user class and underneath that you had create",
    "start": "1014360",
    "end": "1021680"
  },
  {
    "text": "you had created a an admin user class and a manufacturing user class all the",
    "start": "1021680",
    "end": "1028520"
  },
  {
    "text": "attributes that you defined inside of the user class will then be applied also",
    "start": "1028520",
    "end": "1034600"
  },
  {
    "text": "to the manufacturing and also the",
    "start": "1034600",
    "end": "1039400"
  },
  {
    "text": "admin so the kind of classes that make up a schema",
    "start": "1044199",
    "end": "1050760"
  },
  {
    "text": "you have abstract classes abstract classes are what the the skeleton of the active D of the schema itself they",
    "start": "1050760",
    "end": "1057880"
  },
  {
    "text": "Define the the schema they're not actually used to make objects they just provide that",
    "start": "1057880",
    "end": "1063160"
  },
  {
    "text": "structure the structural classes are what actually Define objects these are",
    "start": "1063160",
    "end": "1069039"
  },
  {
    "text": "you have like I said the user class you have might have a machine class many different kinds of classes this is how",
    "start": "1069039",
    "end": "1075400"
  },
  {
    "text": "they're made they'll you'll see a class with these attributes to defined for each",
    "start": "1075400",
    "end": "1080520"
  },
  {
    "text": "one and then you have auxiliary classes what auxiliary class is for is to",
    "start": "1080520",
    "end": "1087039"
  },
  {
    "text": "provide additional in additional attributes to any class that you want",
    "start": "1087039",
    "end": "1092919"
  },
  {
    "text": "for instance security identifier is an is a auxiliary class and what that means",
    "start": "1092919",
    "end": "1098840"
  },
  {
    "text": "is you can attach additional Security Options or attributes to any type of",
    "start": "1098840",
    "end": "1104159"
  },
  {
    "text": "object you want",
    "start": "1104159",
    "end": "1107600"
  },
  {
    "text": "schema is cached in memory um as I said before only one",
    "start": "1110400",
    "end": "1117080"
  },
  {
    "text": "schema for the entire Forest the other important information is that when you create a new class in",
    "start": "1117080",
    "end": "1124159"
  },
  {
    "text": "the schema you can't actually delete it nothing is deletable from there the best you can do is deactivate it um not",
    "start": "1124159",
    "end": "1132919"
  },
  {
    "text": "probably a problem if you make one or two classes but it can be actually affect performance because it is loaded",
    "start": "1132919",
    "end": "1139039"
  },
  {
    "text": "into memory the whole",
    "start": "1139039",
    "end": "1143039"
  },
  {
    "text": "thing um I threw this in here so that we could I could talk for a second about",
    "start": "1145799",
    "end": "1151400"
  },
  {
    "text": "what happens to your DNS servers now this hit me when I actually had and my",
    "start": "1151400",
    "end": "1158159"
  },
  {
    "text": "my home servers when I set out my home network with active directory and then I my friend who was my secondary was",
    "start": "1158159",
    "end": "1164720"
  },
  {
    "text": "running nt4 and I effectively blew up his DNS server and it was because it",
    "start": "1164720",
    "end": "1169880"
  },
  {
    "text": "started passing down all kinds of crap that it uses for how it locates things which nt4 could not handle um so that's",
    "start": "1169880",
    "end": "1178400"
  },
  {
    "text": "why you have to make sure that whatever DNS servers are your secondaries for these things have to be able to handle things like SRV records and it puts a",
    "start": "1178400",
    "end": "1184960"
  },
  {
    "text": "lot of them in there and it puts keys in there and it's it's quite interesting Koss",
    "start": "1184960",
    "end": "1191399"
  },
  {
    "text": "information okay so let's talk about replication um as I said replication is",
    "start": "1195679",
    "end": "1203520"
  },
  {
    "text": "ma is multimaster so the question is how does it keep track of that information how",
    "start": "1203520",
    "end": "1208919"
  },
  {
    "text": "does it know changes are being handled effectively um the way this works is it tracks",
    "start": "1208919",
    "end": "1215159"
  },
  {
    "text": "metadata or data of data meaning that it keeps pertinent information about the",
    "start": "1215159",
    "end": "1220280"
  },
  {
    "text": "changes that are made and uses that to determine when a change is",
    "start": "1220280",
    "end": "1225360"
  },
  {
    "text": "valid um replication is actually different when it's based on whether it's on intra site or",
    "start": "1225360",
    "end": "1232520"
  },
  {
    "text": "intersite um as you could see as I guess would be obvious the concept of a site is where it is physically located",
    "start": "1232520",
    "end": "1240360"
  },
  {
    "text": "so if you if the the reason why you have sites is you have a slow Network link between St office in and um Denmark as",
    "start": "1240360",
    "end": "1249600"
  },
  {
    "text": "opposed to your office in Seattle and you're running a 128k link between those you don't want to have the only traffic",
    "start": "1249600",
    "end": "1256720"
  },
  {
    "text": "being allowed across that being your active director replication and it can do it um so interest site is simple it's",
    "start": "1256720",
    "end": "1265200"
  },
  {
    "text": "not configurable it Just blasts right through it data just goes out doesn't matter where it's going um intersite on",
    "start": "1265200",
    "end": "1271799"
  },
  {
    "text": "the other hand uses things like bridg head servers to determine how the replication",
    "start": "1271799",
    "end": "1278120"
  },
  {
    "text": "happens choke points you schedule it you say I'd like it to happen from 10 o'clock at night to 11 o'l at night",
    "start": "1278120",
    "end": "1283799"
  },
  {
    "text": "everything's defined down to the point that you can actually use SMTP which is a much lighter protocol",
    "start": "1283799",
    "end": "1289880"
  },
  {
    "text": "than than RPC the only problem with that is not",
    "start": "1289880",
    "end": "1295480"
  },
  {
    "text": "everything um I think I mentioned it later as well but basically when you use SMTP it",
    "start": "1295480",
    "end": "1302240"
  },
  {
    "text": "doesn't do file so if you have log on scripts that you changed it will not be transferred over um",
    "start": "1302240",
    "end": "1310279"
  },
  {
    "text": "SMTP uh not all data is replicated the key one is last log on time if you're",
    "start": "1310279",
    "end": "1316840"
  },
  {
    "text": "actually making a query to find out when the last time user logged on you're actually ended up quering every one of",
    "start": "1316840",
    "end": "1323120"
  },
  {
    "text": "the domain controllers because that information does not get replicated",
    "start": "1323120",
    "end": "1328360"
  },
  {
    "text": "out um it replicates attributes not entire objects so for instance if you change",
    "start": "1329720",
    "end": "1337039"
  },
  {
    "text": "your password it doesn't change replicate your entire user object throughout the thing it replicates just",
    "start": "1337039",
    "end": "1344600"
  },
  {
    "text": "that attribute change your password",
    "start": "1344600",
    "end": "1348960"
  },
  {
    "text": "okay so what is the metadata that it keeps track of to determine how changes were",
    "start": "1354480",
    "end": "1360000"
  },
  {
    "text": "kept so the first thing that it keeps is the update sequence number this is",
    "start": "1360000",
    "end": "1365279"
  },
  {
    "text": "defined on the server on a on on the active directory it keeps track of everybody else's all the other",
    "start": "1365279",
    "end": "1371640"
  },
  {
    "text": "directories squence number it keeps a property version number this is actually the version of",
    "start": "1371640",
    "end": "1377640"
  },
  {
    "text": "the attribute and it keeps an IP address of the domain controller or wait that's just never",
    "start": "1377640",
    "end": "1384000"
  },
  {
    "text": "mind um let see what I say",
    "start": "1384000",
    "end": "1389080"
  },
  {
    "text": "here okay so the way this works um inside the day inside of the active",
    "start": "1389240",
    "end": "1395000"
  },
  {
    "text": "directory it establishes a a small database of servers and their update",
    "start": "1395000",
    "end": "1400559"
  },
  {
    "text": "sequence number and so when a server makes a change it announces out to",
    "start": "1400559",
    "end": "1406400"
  },
  {
    "text": "everybody I've got a change to make well the the server then replies back",
    "start": "1406400",
    "end": "1411720"
  },
  {
    "text": "and says I have you at update sequence number 95 could you please provide me",
    "start": "1411720",
    "end": "1418760"
  },
  {
    "text": "everything that you've got since then well the server is up to 97 so it then",
    "start": "1418760",
    "end": "1423799"
  },
  {
    "text": "handles hands back these are the two you know the the changes that I've got from this point it then takes the changes",
    "start": "1423799",
    "end": "1431480"
  },
  {
    "text": "applies the changes CH updates the update sequence number of the server and",
    "start": "1431480",
    "end": "1436760"
  },
  {
    "text": "then goes on and at that point point if it has any servers it's responsible for",
    "start": "1436760",
    "end": "1442159"
  },
  {
    "text": "it will then announce out to them I have a change that you need to take care",
    "start": "1442159",
    "end": "1447799"
  },
  {
    "text": "of so the question is what happens if you make a change on two different servers which one takes",
    "start": "1452039",
    "end": "1460080"
  },
  {
    "text": "effect so what it does is it compares the property value number this is the",
    "start": "1460279",
    "end": "1465799"
  },
  {
    "text": "the the the version of the attribute it looks at the change and it looks at the version number if they're different if",
    "start": "1465799",
    "end": "1473919"
  },
  {
    "text": "the if the change is actually lower it will throw the change away um if they're the same but the",
    "start": "1473919",
    "end": "1481200"
  },
  {
    "text": "attribute is different that's where the confusion comes in so the first thing that looks at is",
    "start": "1481200",
    "end": "1488080"
  },
  {
    "text": "which one has the highest property value number which one has the highest attribute if there there're same then",
    "start": "1488080",
    "end": "1493320"
  },
  {
    "text": "they and the user and then the the change is this is different it moves on what is the time stamp which one",
    "start": "1493320",
    "end": "1500200"
  },
  {
    "text": "happened latest the one that happened latest is going to take precedence and the other one will be thrown away but",
    "start": "1500200",
    "end": "1506600"
  },
  {
    "text": "what if they were done in the exact same time now it seems kind of ridiculous that it would be possible to make a",
    "start": "1506600",
    "end": "1513080"
  },
  {
    "text": "change at the exact same time at the exact same instance on two different servers and I would imagine it probably",
    "start": "1513080",
    "end": "1519720"
  },
  {
    "text": "would happen almost never but in case it does the next thing we'll look is at the IP address now this is kind of",
    "start": "1519720",
    "end": "1526360"
  },
  {
    "text": "conflicting because I've read Microsoft documentation that says a look at the good but it doesn't really matter it",
    "start": "1526360",
    "end": "1531640"
  },
  {
    "text": "looks at the unique number of the server whichever one is higher that's a change it takes kind of arbitrary but I guess",
    "start": "1531640",
    "end": "1538559"
  },
  {
    "text": "it gets the job",
    "start": "1538559",
    "end": "1541200"
  },
  {
    "text": "done",
    "start": "1545360",
    "end": "1548360"
  },
  {
    "text": "oops um um intersight replication so let's talk about this for a minute this",
    "start": "1557120",
    "end": "1562200"
  },
  {
    "text": "is as I said is the low bandwidth method of replication um by default it's done on a",
    "start": "1562200",
    "end": "1568799"
  },
  {
    "text": "schedule uh the schedule is configurable within active directory within sites and services uh it's quite configurable you",
    "start": "1568799",
    "end": "1575880"
  },
  {
    "text": "can Define what servers replicate to what servers and what what data gets replicated at what time as I said you",
    "start": "1575880",
    "end": "1582279"
  },
  {
    "text": "can use RPC or SMTP and and before you can't replicate things like log on scripts so if you make those Chang es",
    "start": "1582279",
    "end": "1588880"
  },
  {
    "text": "you won't be able to use SMTP it actually compresses the data by up to 15% as it goes across the",
    "start": "1588880",
    "end": "1597840"
  },
  {
    "text": "link um the difference is that you and what you can do is you can turn on",
    "start": "1597840",
    "end": "1604200"
  },
  {
    "text": "what's called intersight or intersight notification the notification process is",
    "start": "1604200",
    "end": "1609919"
  },
  {
    "text": "exactly as I described that's where the server announces I've made a change and asked for it to then Pi picked up you",
    "start": "1609919",
    "end": "1616039"
  },
  {
    "text": "can turn on intersight replication to happen exactly that way that there isn't a schedule that it waits for n",
    "start": "1616039",
    "end": "1624880"
  },
  {
    "text": "notification okay so password changes this is the one that gets a little tricky um for instance if you make a",
    "start": "1629960",
    "end": "1637480"
  },
  {
    "text": "password change one thing to remember is that replication happens every 30 5",
    "start": "1637480",
    "end": "1644520"
  },
  {
    "text": "minutes and then 30 minutes for an actual server it's not actually in instantaneous so for instance if I",
    "start": "1644520",
    "end": "1650480"
  },
  {
    "text": "change a password on One controller it could take effectively as long as 90 minutes for that change to replicate",
    "start": "1650480",
    "end": "1656640"
  },
  {
    "text": "throughout the environment how then do I make sure that I can still log on you know within that",
    "start": "1656640",
    "end": "1662600"
  },
  {
    "text": "window so the way this is done is with the the PDC emulator this is why you",
    "start": "1662600",
    "end": "1668240"
  },
  {
    "text": "still need it even though you don't have an N4 environment um the password is changed",
    "start": "1668240",
    "end": "1674519"
  },
  {
    "text": "on the DC and is actually immediately pushed up to the PDC emulator so it has the the information",
    "start": "1674519",
    "end": "1681000"
  },
  {
    "text": "immediately and um if you try to log into a domain controller and you have",
    "start": "1681000",
    "end": "1686159"
  },
  {
    "text": "give it a pad password what it does at that point is it then takes that password and hands it to the PDC",
    "start": "1686159",
    "end": "1692080"
  },
  {
    "text": "emulator it does this to make sure that that it is not was not changed",
    "start": "1692080",
    "end": "1699279"
  },
  {
    "text": "recently okay so there are other problems that are derived from replication um some attributes have had",
    "start": "1705320",
    "end": "1712640"
  },
  {
    "text": "multiple values for inst a group its value for is the attribute is users and",
    "start": "1712640",
    "end": "1718880"
  },
  {
    "text": "its value is user one user two user three so what happens when um you add a",
    "start": "1718880",
    "end": "1727519"
  },
  {
    "text": "user uh from one let's say you just add a user on One controller and somebody add else adds a user on another",
    "start": "1727519",
    "end": "1734039"
  },
  {
    "text": "controller two different users added to the same group so what's going to happen is that",
    "start": "1734039",
    "end": "1741200"
  },
  {
    "text": "uh the when the update goes out it's going to look at that property value number it's going to see the same",
    "start": "1741200",
    "end": "1746720"
  },
  {
    "text": "property value number and once again it'll look at time stamp and it'll see different changes what it will actually",
    "start": "1746720",
    "end": "1753080"
  },
  {
    "text": "do is it will drop the latest it will only keep the latest change you will lose that second attribute so you would",
    "start": "1753080",
    "end": "1760080"
  },
  {
    "text": "have to go through and read that user again um inherited permissions meaning",
    "start": "1760080",
    "end": "1768440"
  },
  {
    "text": "uh if you like in your registry or in the directories when you actually say please apply all permissions to be inh",
    "start": "1768440",
    "end": "1775039"
  },
  {
    "text": "heritable and it goes down through all the child trees those each an inheritable",
    "start": "1775039",
    "end": "1780720"
  },
  {
    "text": "permission is actually stored in each object which means that when you apply it um when you apply that inheritable",
    "start": "1780720",
    "end": "1787320"
  },
  {
    "text": "permission that that security identifier is attached to each one of the children",
    "start": "1787320",
    "end": "1792640"
  },
  {
    "text": "it's not actually just stored in the parent but active directory does not",
    "start": "1792640",
    "end": "1798080"
  },
  {
    "text": "replicate that change as a huge massive amount of directory changes it passes",
    "start": "1798080",
    "end": "1803679"
  },
  {
    "text": "the one tree across saying okay I've got inheritable permission that I'm passing across it takes just the one permission",
    "start": "1803679",
    "end": "1810399"
  },
  {
    "text": "says it's inheritable drops it on the server and at that point it does The",
    "start": "1810399",
    "end": "1816760"
  },
  {
    "text": "Inheritance um the next replication issue you delete an object except you don't tell the other Dom you can't just",
    "start": "1821960",
    "end": "1828640"
  },
  {
    "text": "delete an object because the other domain controllers don't know it's supposed to be deleted just because it's",
    "start": "1828640",
    "end": "1834120"
  },
  {
    "text": "gone does not represent something as understanding that it's supposed to be deleted so instead of deleting it you",
    "start": "1834120",
    "end": "1841279"
  },
  {
    "text": "add what's called a tombstone now people who are familiar with uh databases and other replications I'm sure familiar",
    "start": "1841279",
    "end": "1846399"
  },
  {
    "text": "with the concept of tombstones um you put the tombstone on the object and it gets becomes",
    "start": "1846399",
    "end": "1853360"
  },
  {
    "text": "deactivated uh it's hidden put in the deleted objects container and at that point it's hidden from everything",
    "start": "1853360",
    "end": "1859399"
  },
  {
    "text": "including adsi so you wouldn't be able to even script through the scripting engine to be able to reach this",
    "start": "1859399",
    "end": "1865240"
  },
  {
    "text": "thing um the tombstone is then replicated to all controllers and after every day there's",
    "start": "1865240",
    "end": "1872840"
  },
  {
    "text": "what's called garbage collection goes through once looks at each Tombstone sees if it's expired and then Yanks it",
    "start": "1872840",
    "end": "1878760"
  },
  {
    "text": "if it",
    "start": "1878760",
    "end": "1881039"
  },
  {
    "text": "has there's something called The Lost and Found container so lost and found container happens when",
    "start": "1884799",
    "end": "1892880"
  },
  {
    "text": "replication tries to happen it find and it tries to update an attribute and for some reason it can't update it a good",
    "start": "1892880",
    "end": "1900240"
  },
  {
    "text": "example of this would be if you tried to add a user to a um to an organizational",
    "start": "1900240",
    "end": "1906440"
  },
  {
    "text": "unit but from another domain you actually deleted the organizational unit you're going to have this replication",
    "start": "1906440",
    "end": "1911679"
  },
  {
    "text": "floating around that it doesn't know how to to handle so it drops into lost and found lost and found is actually a",
    "start": "1911679",
    "end": "1917279"
  },
  {
    "text": "container that you need to go in and clean",
    "start": "1917279",
    "end": "1920799"
  },
  {
    "text": "out okay so they call interest they call intrasite replication instant but in",
    "start": "1925200",
    "end": "1931159"
  },
  {
    "text": "reality it's not instant uh it happens what do they say here it happens every five minutes um",
    "start": "1931159",
    "end": "1938600"
  },
  {
    "text": "every for the inter site and of course on schedule on interest side but certain things actually need real instant um",
    "start": "1938600",
    "end": "1946519"
  },
  {
    "text": "replication that that five minute delay is unacceptable um those examples are the",
    "start": "1946519",
    "end": "1953200"
  },
  {
    "text": "ridm if a rid if you change your rid master that has to be replicated instantly otherwise objects can't be",
    "start": "1953200",
    "end": "1960399"
  },
  {
    "text": "created or if they're they're being created ineffectively um LSA secret change which",
    "start": "1960399",
    "end": "1966480"
  },
  {
    "text": "I've that doesn't really come into play and account lockouts for obvious reasons",
    "start": "1966480",
    "end": "1973519"
  },
  {
    "text": "um if you lock out an account on one domain controller you want to make sure that it's locked out on all domain controller rollers you don't want them",
    "start": "1973519",
    "end": "1978960"
  },
  {
    "text": "to be able to move move at that point but try to authenticate against another",
    "start": "1978960",
    "end": "1984200"
  },
  {
    "text": "one uh okay so urgent replication will not happen inter site unless you actually",
    "start": "1984279",
    "end": "1991639"
  },
  {
    "text": "turn on the",
    "start": "1991639",
    "end": "1994200"
  },
  {
    "text": "notification all right let's see here now one problem that we're going to have here is that these slides didn't make it",
    "start": "1999320",
    "end": "2007440"
  },
  {
    "text": "in your book books and I apologize I'm not sure exactly what happened but I have all my group policy slides here",
    "start": "2007440",
    "end": "2012799"
  },
  {
    "text": "that aren't in your books so um Group Policy Group Policy is",
    "start": "2012799",
    "end": "2020679"
  },
  {
    "text": "the centralized management system for applying policies across your your active directory infrastructure um you",
    "start": "2020679",
    "end": "2028399"
  },
  {
    "text": "can think of a a group policy is made up of Group Policy objects and an object is",
    "start": "2028399",
    "end": "2033480"
  },
  {
    "text": "nothing more than a collection of policies and we're talking about things like you know how often a password has",
    "start": "2033480",
    "end": "2039120"
  },
  {
    "text": "to be changed whether a person can log onto a box to how your log files are stored these are all",
    "start": "2039120",
    "end": "2046240"
  },
  {
    "text": "policies um it replaces system policy has anybody",
    "start": "2047839",
    "end": "2053200"
  },
  {
    "text": "here use system policy before it CES with nt4 I never use it either it didn't",
    "start": "2053200",
    "end": "2058720"
  },
  {
    "text": "seem like it worked all that well um it requires when 2K and active",
    "start": "2058720",
    "end": "2064079"
  },
  {
    "text": "directory and it actually defines two different kinds of policies a user policy and a computer",
    "start": "2064079",
    "end": "2072599"
  },
  {
    "text": "policy okay so there are sets of policies there is the local",
    "start": "2076560",
    "end": "2082960"
  },
  {
    "text": "policy and um this is what you see when you try to when you bring up the local security policies or if you bring up the",
    "start": "2082960",
    "end": "2089000"
  },
  {
    "text": "group policy snap-in and point it to your local machine what you're actually looking at is your local policies and",
    "start": "2089000",
    "end": "2095280"
  },
  {
    "text": "these are machine specific there's the default policy and what the",
    "start": "2095280",
    "end": "2100680"
  },
  {
    "text": "default policy is is when you turn on the bo when you install Windows 2000 and you turn on the box it's what's the",
    "start": "2100680",
    "end": "2106880"
  },
  {
    "text": "policy that's on the box at the time and then throughout your domain there's the group policy objects",
    "start": "2106880",
    "end": "2112680"
  },
  {
    "text": "and this is what we're going to be talking about and then there's the anti- system",
    "start": "2112680",
    "end": "2119440"
  },
  {
    "text": "policy so the different kinds of things that that uh Group Policy can do it can",
    "start": "2122800",
    "end": "2128839"
  },
  {
    "text": "lock down your desktop it can install software you can run scripts both for",
    "start": "2128839",
    "end": "2135359"
  },
  {
    "text": "the user meaning log on and log off scripts or it can actually do computers startup shutdown scripts you can use it",
    "start": "2135359",
    "end": "2142079"
  },
  {
    "text": "to configure some of your components Windows explore or Internet Explorer um media player is another one you can",
    "start": "2142079",
    "end": "2148280"
  },
  {
    "text": "configure and you can do things like redirect folders",
    "start": "2148280",
    "end": "2153560"
  },
  {
    "text": "so when you actually create a group policy object where is it actually physically",
    "start": "2159880",
    "end": "2165480"
  },
  {
    "text": "located so when you first install active directory um it asks you where you want",
    "start": "2165480",
    "end": "2171040"
  },
  {
    "text": "to put What's called the CIS fall directory this is where it stores all of its actual data information um and this is no exception",
    "start": "2171040",
    "end": "2178079"
  },
  {
    "text": "and when you create a group policy object it actually creates a folder inside the CIS fall directory on the DC",
    "start": "2178079",
    "end": "2184640"
  },
  {
    "text": "itself and it's called this the group policy template directory it's made up of the good of the of the groupy object",
    "start": "2184640",
    "end": "2192160"
  },
  {
    "text": "itself inside the temp inside that directory you have the ADM files which are the actual template files that are",
    "start": "2192160",
    "end": "2198760"
  },
  {
    "text": "used to when applied tell the the the system what policies you want applied",
    "start": "2198760",
    "end": "2204839"
  },
  {
    "text": "whatever scripts you have um the log on log off for startup or shutdown scripts all exist within that directory and your",
    "start": "2204839",
    "end": "2211920"
  },
  {
    "text": "user thing your user files um files or folders um for instance when you if any",
    "start": "2211920",
    "end": "2218079"
  },
  {
    "text": "kind of uh if any of the policies actually make registry changes it makes a file called the registry.pol",
    "start": "2218079",
    "end": "2225800"
  },
  {
    "text": "file you can use it to apply security settings um which is really to me the",
    "start": "2231240",
    "end": "2236400"
  },
  {
    "text": "most important aspect you can use it to change registry settings and security and change file system security settings",
    "start": "2236400",
    "end": "2243000"
  },
  {
    "text": "um what I actually use this for specifically is in",
    "start": "2243000",
    "end": "2248079"
  },
  {
    "text": "is changing the file system if you actually bring up the file system and you look at it the file system allows",
    "start": "2248079",
    "end": "2254240"
  },
  {
    "text": "the croot to be read by everyone everyone has full control of the croot directory which of course is a big",
    "start": "2254240",
    "end": "2261079"
  },
  {
    "text": "problem with IIs servers because if any of you have ever been affected by a transversal a directory transversal bug",
    "start": "2261079",
    "end": "2267440"
  },
  {
    "text": "which is basically the I user account having the ability to to run things like some cmd.exe",
    "start": "2267440",
    "end": "2274280"
  },
  {
    "text": "well by turning off this everyone ability to to read the C drive or have full control of it even and make it so",
    "start": "2274280",
    "end": "2281520"
  },
  {
    "text": "you know only authenticated users can do it",
    "start": "2281520",
    "end": "2287280"
  },
  {
    "text": "um you can actually prevent this now that takes some testing because at the",
    "start": "2287280",
    "end": "2292359"
  },
  {
    "text": "same time on our web server if we were to turn we were going to make only authenticated users being able to access",
    "start": "2292359",
    "end": "2297880"
  },
  {
    "text": "our uh C drive uh it would not allow as pages to run because there's a dll that",
    "start": "2297880",
    "end": "2303800"
  },
  {
    "text": "exists that actually need needs to be instantiated by I user but there's definitely things you can do",
    "start": "2303800",
    "end": "2309640"
  },
  {
    "text": "within this that to uh within the file system change to lock yourself",
    "start": "2309640",
    "end": "2315280"
  },
  {
    "text": "down so where do we apply Group Policy um one of the places we can apply it is",
    "start": "2317920",
    "end": "2324040"
  },
  {
    "text": "on a site level um this is good for things like that affect local",
    "start": "2324040",
    "end": "2330319"
  },
  {
    "text": "environments um it will actually can affect multiple domains because as you as I said domains and sites are not are",
    "start": "2330319",
    "end": "2337960"
  },
  {
    "text": "not congruous they can exist inter inter of each other um the problem is or I",
    "start": "2337960",
    "end": "2344040"
  },
  {
    "text": "wouldn't say necessarily problem but the thing to realize is if I apply a policy to a site and I applied that while I was",
    "start": "2344040",
    "end": "2350760"
  },
  {
    "text": "connected to a domain controller in say domain a that policy exists on domain a",
    "start": "2350760",
    "end": "2357359"
  },
  {
    "text": "even though it is applied to the site now if I as a user log into a machine on",
    "start": "2357359",
    "end": "2362839"
  },
  {
    "text": "domain B if I that group policy applies to me I will have to connect next to the domain controller in domain a to",
    "start": "2362839",
    "end": "2370440"
  },
  {
    "text": "actually pull that group policy object down we can apply it on domain one",
    "start": "2370440",
    "end": "2378400"
  },
  {
    "text": "important thing here to know understand is that there are certain policies that can only be applied on domains the",
    "start": "2378400",
    "end": "2385280"
  },
  {
    "text": "important ones are your account policies passwords account lockouts and ceros now",
    "start": "2385280",
    "end": "2390560"
  },
  {
    "text": "the thing that's important to realize here is it won't tell you if you try to apply it across site or organizational",
    "start": "2390560",
    "end": "2395880"
  },
  {
    "text": "unit that it won't allow it it will only ignore it so let's say you um decided",
    "start": "2395880",
    "end": "2401359"
  },
  {
    "text": "you wanted to change things on an organizational level you make some password changes on an organizational level those are going to be completely",
    "start": "2401359",
    "end": "2408599"
  },
  {
    "text": "ignored you have to apply this on the",
    "start": "2408599",
    "end": "2412880"
  },
  {
    "text": "domain so the most tricky thing about group policy that I found is how to realize",
    "start": "2415240",
    "end": "2422440"
  },
  {
    "text": "what policies are actually being applied um and the question comes up in what",
    "start": "2422440",
    "end": "2427720"
  },
  {
    "text": "order does it apply it if I have for instance I've created my password policy and I've thrown in some other policies",
    "start": "2427720",
    "end": "2434440"
  },
  {
    "text": "and I apply it to my domain or link it to my domain as the term is called but then I create another one and then I",
    "start": "2434440",
    "end": "2439800"
  },
  {
    "text": "link it to my site and the guy that runs my the organizational unit well he created a group policy object as well",
    "start": "2439800",
    "end": "2446000"
  },
  {
    "text": "and he G he linked it to his OU um what if those rules what if those policies",
    "start": "2446000",
    "end": "2452319"
  },
  {
    "text": "conflict with each other what if you make something a registry change that changes what I've already done what if",
    "start": "2452319",
    "end": "2459280"
  },
  {
    "text": "he says things like uh he changes logging policies and he actually makes",
    "start": "2459280",
    "end": "2464520"
  },
  {
    "text": "it lighter logging what takes precedence the way it works is that a",
    "start": "2464520",
    "end": "2469599"
  },
  {
    "text": "first thing it applies is the local security policy applies a local security policy",
    "start": "2469599",
    "end": "2475200"
  },
  {
    "text": "across the computer the next is the site which means that if there's anything in",
    "start": "2475200",
    "end": "2480240"
  },
  {
    "text": "the site that's different than on the local security policy it will be changed that site will take precedence over",
    "start": "2480240",
    "end": "2486400"
  },
  {
    "text": "local security policy policy the next thing will be done is domain and the same step ues if there is",
    "start": "2486400",
    "end": "2493000"
  },
  {
    "text": "any change within the domain that is does that wasn't or if there's anything different in domain from site domain",
    "start": "2493000",
    "end": "2500160"
  },
  {
    "text": "will take precedence and then there's OU oh you takes the most precedence anything",
    "start": "2500160",
    "end": "2506079"
  },
  {
    "text": "that's actually been changed no you will take precedence over the other",
    "start": "2506079",
    "end": "2511160"
  },
  {
    "text": "three so but there are way okay so at this point",
    "start": "2515800",
    "end": "2521640"
  },
  {
    "text": "when you look at a computer and it's booting up this is the exact process that makes coming in",
    "start": "2521640",
    "end": "2527920"
  },
  {
    "text": "um the computer reaches the DC to the domain controller pulls down his",
    "start": "2527920",
    "end": "2533520"
  },
  {
    "text": "GPO um this includes any of the domain controllers it has to connect to to actually pull site specific information",
    "start": "2533520",
    "end": "2539480"
  },
  {
    "text": "down as I said so you might be mult contacting multiple um Demoine controllers um the computer policies are",
    "start": "2539480",
    "end": "2546440"
  },
  {
    "text": "applied in the order that we discussed um local site domain OU and then the",
    "start": "2546440",
    "end": "2552240"
  },
  {
    "text": "computer and then the startup scripts are executed the user logs on at this point",
    "start": "2552240",
    "end": "2557720"
  },
  {
    "text": "and then the user profiles are loaded and at this point you contacts",
    "start": "2557720",
    "end": "2563520"
  },
  {
    "text": "the DCS once again and goes through that same process that I went through for the computers policies are applied based on",
    "start": "2563520",
    "end": "2569960"
  },
  {
    "text": "order discussed and then the user log on scripts happen and then when you log off obviously the user log off scripts are",
    "start": "2569960",
    "end": "2575520"
  },
  {
    "text": "then executed",
    "start": "2575520",
    "end": "2578680"
  },
  {
    "text": "now within this as um many people who've logged into a win2k machine is seene you see the the the little dialogue box that",
    "start": "2581000",
    "end": "2587760"
  },
  {
    "text": "says applying security policies now and it shows that you have to wait you have to actually wait till",
    "start": "2587760",
    "end": "2594359"
  },
  {
    "text": "everything's applied and then it will allow you to log on that's called synchronous basically means all the",
    "start": "2594359",
    "end": "2599760"
  },
  {
    "text": "policies have to be applied to the system before you're actually allowed to log on now there is something called",
    "start": "2599760",
    "end": "2605960"
  },
  {
    "text": "asynchronous and and amazingly enough Microsoft does not recommend that you use asynchronous uh the asynchronous",
    "start": "2605960",
    "end": "2613160"
  },
  {
    "text": "synchronous or processing and what that means is it will actually allow you to log on while it's processing the the",
    "start": "2613160",
    "end": "2620160"
  },
  {
    "text": "policy object now this makes it quicker obviously you're able to log on right",
    "start": "2620160",
    "end": "2625400"
  },
  {
    "text": "away but this is a problem security wise for instance if if what your group policy is doing is locking down the",
    "start": "2625400",
    "end": "2631920"
  },
  {
    "text": "desktop maybe making the Run menu unavailable it won't it will all be available while this is the say",
    "start": "2631920",
    "end": "2638359"
  },
  {
    "text": "synchronous is happening so for a short period of time for a short period of time um you",
    "start": "2638359",
    "end": "2646680"
  },
  {
    "text": "will actually be able to you'll have more access than you're supposed to be allowed to these these are all policies that are",
    "start": "2646680",
    "end": "2653880"
  },
  {
    "text": "actually set in group policy so Group Policy itself is what's used to actually configure Group",
    "start": "2653880",
    "end": "2661359"
  },
  {
    "text": "Policy so um the ' created what's called",
    "start": "2662800",
    "end": "2668160"
  },
  {
    "text": "exceptions what exceptions do is for instance if I have if I don't want my",
    "start": "2668160",
    "end": "2674119"
  },
  {
    "text": "policy to be blocked for instance I set some policies on the domain and I don't",
    "start": "2674119",
    "end": "2679440"
  },
  {
    "text": "want the uh I don't want those changes to be taken you can block and block inherit or no override which basically",
    "start": "2679440",
    "end": "2687240"
  },
  {
    "text": "means that well let's go this the other way around you can block inheritance if I set a local security",
    "start": "2687240",
    "end": "2693559"
  },
  {
    "text": "policy and I like it the way it is I well you can't really do the local security policy that's a bad example if",
    "start": "2693559",
    "end": "2698599"
  },
  {
    "text": "I set a domain I can set up to make the so that any changes that are Mak lower level can't actually change",
    "start": "2698599",
    "end": "2705880"
  },
  {
    "text": "it and that's called block inheritance the other function is if I",
    "start": "2705880",
    "end": "2711200"
  },
  {
    "text": "don't want that inheritance to be blocked I can make no override which means that the block inheritance will",
    "start": "2711200",
    "end": "2716240"
  },
  {
    "text": "keep from working",
    "start": "2716240",
    "end": "2722040"
  },
  {
    "text": "um and then also at the same time you could specify with permission and this is interesting what this",
    "start": "2722800",
    "end": "2729280"
  },
  {
    "text": "basically means is that the way the group policy works is it works just like any other opt objects it has permissions",
    "start": "2729280",
    "end": "2736319"
  },
  {
    "text": "assigned to it you go into the group policy and you go into the security aspect of it and you will see all the",
    "start": "2736319",
    "end": "2742599"
  },
  {
    "text": "different groups that has that have access to it you could actually effectively go in there and remove a",
    "start": "2742599",
    "end": "2748839"
  },
  {
    "text": "certain group's read and execute access to this and this group policy will not",
    "start": "2748839",
    "end": "2754119"
  },
  {
    "text": "be applied to that group so for instance say you have yourself a domain and you're applying a password policy to it",
    "start": "2754119",
    "end": "2760359"
  },
  {
    "text": "that says if you change your pass if you you can't change your password more than",
    "start": "2760359",
    "end": "2765680"
  },
  {
    "text": "you know like every day you have to wait a day before you're allowed to change your password again but you don't want this to be applied to actually to the",
    "start": "2765680",
    "end": "2772319"
  },
  {
    "text": "administrators there's two things you could do you could create an organizational unit for those users drop",
    "start": "2772319",
    "end": "2777839"
  },
  {
    "text": "your users in there and then apply the policy to your the normal user organizational unit or you can do it",
    "start": "2777839",
    "end": "2784200"
  },
  {
    "text": "this way and those in your administrator's group you can deny them access to that policy and that policy",
    "start": "2784200",
    "end": "2790440"
  },
  {
    "text": "won't take",
    "start": "2790440",
    "end": "2792920"
  },
  {
    "text": "effect okay refresh in the old days of uh nt4 with the system the system uh",
    "start": "2796880",
    "end": "2804359"
  },
  {
    "text": "policies when a policy was applied to a system if a change was made it would never actually be updated in the system",
    "start": "2804359",
    "end": "2811160"
  },
  {
    "text": "you had to actually log off and log back onto the machine to have that policy applied this is true with the group",
    "start": "2811160",
    "end": "2818920"
  },
  {
    "text": "policy um on a domain controller every five minutes it checks to see if a",
    "start": "2818920",
    "end": "2824880"
  },
  {
    "text": "policy change was made and whether it should apply it on normal machines it's actually every 90 minutes with a 30",
    "start": "2824880",
    "end": "2832240"
  },
  {
    "text": "minute offset the reason for that is they don't they did you basically don't want every machine waking up and",
    "start": "2832240",
    "end": "2838960"
  },
  {
    "text": "checking for a policy update at the same time so this creates a much more random environment for",
    "start": "2838960",
    "end": "2845280"
  },
  {
    "text": "that um not everything refreshes folder redirections an example of this you have problems with file lock you try to",
    "start": "2845280",
    "end": "2851559"
  },
  {
    "text": "refresh a you try to you know redirect a file in another Direction with a file lock going it won't",
    "start": "2851559",
    "end": "2858720"
  },
  {
    "text": "work okay so there are different aspects of uh Group Policy objects you're actually able to",
    "start": "2860680",
    "end": "2866200"
  },
  {
    "text": "delegate um you can delegate whether You' even allowed to edit a GP or a group policy object and you can delegate",
    "start": "2866200",
    "end": "2873280"
  },
  {
    "text": "whether um a link unlink whether you can actually apply that um group group policy object",
    "start": "2873280",
    "end": "2880760"
  },
  {
    "text": "to a domain or an organizational unit these are permissions that are there's actually a link",
    "start": "2880760",
    "end": "2886680"
  },
  {
    "text": "gopo type permission when you build an organizational unit or domain or even",
    "start": "2886680",
    "end": "2892838"
  },
  {
    "text": "site um it's possible in fact it's happens a lot where you can actually",
    "start": "2894720",
    "end": "2901160"
  },
  {
    "text": "link the same group policy object to multiple to uh multiple domains or organizational units you build the OU or",
    "start": "2901160",
    "end": "2907960"
  },
  {
    "text": "the uh Group Policy object in within one domain that object is now available to you across the board so when you start",
    "start": "2907960",
    "end": "2915280"
  },
  {
    "text": "when you go to another domain you try to link a a a policy object you can grab",
    "start": "2915280",
    "end": "2922359"
  },
  {
    "text": "that um gpos exist on the domain they don't actually replicate between",
    "start": "2922359",
    "end": "2927720"
  },
  {
    "text": "domains the this is important because what that you can actually use a GP from",
    "start": "2927720",
    "end": "2933000"
  },
  {
    "text": "another domain um you can browse a network you browse to that other domain and you choose it DPO now this can cause",
    "start": "2933000",
    "end": "2941599"
  },
  {
    "text": "traffic problems because a group policy object can be quite",
    "start": "2941599",
    "end": "2947040"
  },
  {
    "text": "large as I said there's two types of comp configurations there's computer configuration and there's us user",
    "start": "2948839",
    "end": "2955160"
  },
  {
    "text": "configuration they're pretty similar um for instance software installation",
    "start": "2955160",
    "end": "2960760"
  },
  {
    "text": "you'll look inside there and they look about the same for the both it's just about when it's applied um Windows",
    "start": "2960760",
    "end": "2966400"
  },
  {
    "text": "settings a little different inside the Windows settings inside of user you'll see the actual log on log off scripts",
    "start": "2966400",
    "end": "2973880"
  },
  {
    "text": "but inside of the computer you'll see the shutdown the shutdown in startup",
    "start": "2973880",
    "end": "2979280"
  },
  {
    "text": "scripts security settings security settings are completely different the security settings that are important to",
    "start": "2979280",
    "end": "2985680"
  },
  {
    "text": "you when you're applying security across your environment things like password how your keros policies are maintained",
    "start": "2985680",
    "end": "2992079"
  },
  {
    "text": "you're logging all happen within the computer configuration",
    "start": "2992079",
    "end": "2997319"
  },
  {
    "text": "inside user is more things like um your pki environment now you also have IPC",
    "start": "2997319",
    "end": "3003400"
  },
  {
    "text": "policies that are applied that are on both user and computer um administrative templates",
    "start": "3003400",
    "end": "3011359"
  },
  {
    "text": "this is where the the more administrative configuration happens and",
    "start": "3011359",
    "end": "3016640"
  },
  {
    "text": "it's kind of a silly name to call them templates because it's actually the changes are actually here um this is",
    "start": "3016640",
    "end": "3022040"
  },
  {
    "text": "where things like you know what would be here um your group policy changes are in",
    "start": "3022040",
    "end": "3029280"
  },
  {
    "text": "here and that's under computer",
    "start": "3029280",
    "end": "3033359"
  },
  {
    "text": "management and the last thing we'll talk about is restricted groups um restricted groups was kind of",
    "start": "3035920",
    "end": "3042440"
  },
  {
    "text": "a cool idea basically what a restricted group is is you define say we'll say the administrators group you call the",
    "start": "3042440",
    "end": "3048720"
  },
  {
    "text": "administrators group a restricted group and then in there you define what users are allowed to be in the excted group or",
    "start": "3048720",
    "end": "3055720"
  },
  {
    "text": "what users are not not allowed to be in in this restrictor Group which means that what it'll actually check the group",
    "start": "3055720",
    "end": "3061880"
  },
  {
    "text": "and compare it against the restrictor group and if they're not if it if it finds one that's not supposed to be in",
    "start": "3061880",
    "end": "3067880"
  },
  {
    "text": "there or that is not in there when it's supposed to be in there it will take that action of either removing or adding",
    "start": "3067880",
    "end": "3072920"
  },
  {
    "text": "it this is great for the administrator group because if somebody figures out how to make privileg escalations and",
    "start": "3072920",
    "end": "3078160"
  },
  {
    "text": "adds themselves the administrators group this gets run and Yanks them back out of it and the last thing is it does is",
    "start": "3078160",
    "end": "3085680"
  },
  {
    "text": "defines what groups restricted group should be part",
    "start": "3085680",
    "end": "3089680"
  },
  {
    "text": "of and I don't generally call my restricted group she's I'm not sure why that was like that and that pretty much",
    "start": "3091200",
    "end": "3098319"
  },
  {
    "text": "covers it I was going to try try to do a a demo but unfortunately my win 2K box blew up so um is there any questions",
    "start": "3098319",
    "end": "3106200"
  },
  {
    "text": "about the the active directory or the group policy that we talked",
    "start": "3106200",
    "end": "3110799"
  },
  {
    "text": "about right",
    "start": "3115359",
    "end": "3118519"
  },
  {
    "text": "yes acoss the entire Forest across the entire Forest depending on the role most of those are across the entire Forest",
    "start": "3123920",
    "end": "3130599"
  },
  {
    "text": "those are easily changed but yes there are single like your Global catalog is a s single point of failure which is why I",
    "start": "3130599",
    "end": "3137799"
  },
  {
    "text": "say it's very important to make sure you you have that",
    "start": "3137799",
    "end": "3141680"
  },
  {
    "text": "up you can't I don't think you can really use clustering with it I think that would confuse it I've never tried",
    "start": "3145119",
    "end": "3150880"
  },
  {
    "text": "it I imagine that it wouldn't it would get",
    "start": "3150880",
    "end": "3156880"
  },
  {
    "text": "confused",
    "start": "3159960",
    "end": "3162960"
  },
  {
    "text": "yes right although the global catalog can be rebuilt quite effectively but like if it goes down you can choose",
    "start": "3167920",
    "end": "3173400"
  },
  {
    "text": "another machine at your Global catalog and that will resolve that",
    "start": "3173400",
    "end": "3178440"
  },
  {
    "text": "if that's where your only Global catalog was then yeah what you'll see in fact that's inter your question um the the",
    "start": "3186720",
    "end": "3192839"
  },
  {
    "text": "recommendation is you have a global catalog on each site to prevent that from happening",
    "start": "3192839",
    "end": "3200200"
  },
  {
    "text": "using what oh um well to be honest I've always",
    "start": "3213200",
    "end": "3219400"
  },
  {
    "text": "done that so",
    "start": "3219400",
    "end": "3223599"
  },
  {
    "text": "I it does um because it kind of shares a bit too much information especially",
    "start": "3224480",
    "end": "3230119"
  },
  {
    "text": "since it has keys and things like that but I've always recommended having split DNS so it's kind of hard for me to say",
    "start": "3230119",
    "end": "3235720"
  },
  {
    "text": "this really does it",
    "start": "3235720",
    "end": "3238440"
  },
  {
    "text": "oh yes",
    "start": "3244319",
    "end": "3246880"
  },
  {
    "text": "right um depending on how you have it set up if it's set up through user then yes if it's set up through computer then",
    "start": "3256720",
    "end": "3263920"
  },
  {
    "text": "no um so",
    "start": "3263920",
    "end": "3268359"
  },
  {
    "text": "yes it can which is what the block or it's the other way around if the block inheritance is set it can keep from the",
    "start": "3286760",
    "end": "3292680"
  },
  {
    "text": "the higher level administrator from setting um uh more secure settings which",
    "start": "3292680",
    "end": "3298079"
  },
  {
    "text": "is why you have the no override to prevent that from happening right",
    "start": "3298079",
    "end": "3306119"
  },
  {
    "text": "so let's start with the DNS question how do we deal with DNS spoofing is that the",
    "start": "3324119",
    "end": "3329160"
  },
  {
    "text": "question so beyond the fact that the really the best thing is any DNS server that you use should have cash protection",
    "start": "3329160",
    "end": "3336599"
  },
  {
    "text": "on it um but I wouldn't say there's any special thing with active directory",
    "start": "3336599",
    "end": "3342760"
  },
  {
    "text": "other than it's hard a little harder to um to to spoof secure DNS with the the way the keys are set up but there's",
    "start": "3342760",
    "end": "3349280"
  },
  {
    "text": "nothing special about it to actually prevent or do anything with DNS spoofing um what was the other question",
    "start": "3349280",
    "end": "3358240"
  },
  {
    "text": "meaning I'm why how would it not apply",
    "start": "3372640",
    "end": "3377400"
  },
  {
    "text": "it oh like it it it tried to apply it and they couldn't apply it it'll fail",
    "start": "3379039",
    "end": "3384760"
  },
  {
    "text": "and um I don't even I've never actually seen that happen where a group policy",
    "start": "3384760",
    "end": "3390799"
  },
  {
    "text": "couldn't be applied I mean honestly actually can't think of a circumstance where that would",
    "start": "3390799",
    "end": "3397440"
  },
  {
    "text": "happen",
    "start": "3402079",
    "end": "3405079"
  },
  {
    "text": "right well I mean I haven't seen that I'm not sure how that it would handle",
    "start": "3409960",
    "end": "3415280"
  },
  {
    "text": "that because I've never seen that happen my guess is that it would fail that I would actually report an error saying",
    "start": "3415280",
    "end": "3420520"
  },
  {
    "text": "that I couldn't apply this policy for some unknown error I mean it will say that",
    "start": "3420520",
    "end": "3426480"
  },
  {
    "text": "yeah right I mean you're assuming that the machine went",
    "start": "3429440",
    "end": "3434640"
  },
  {
    "text": "out yep right I'm more going from the if",
    "start": "3435200",
    "end": "3442440"
  },
  {
    "text": "I've got the policy and I try to apply it and it fails to apply and I would it's going to make an error if if well",
    "start": "3442440",
    "end": "3448680"
  },
  {
    "text": "if the guy who set up the hack didn't do a very good job is going to throw an",
    "start": "3448680",
    "end": "3453240"
  },
  {
    "text": "error well um logs usually uh did it say do you know what the error was do you",
    "start": "3468960",
    "end": "3475520"
  },
  {
    "text": "know what the error was",
    "start": "3475520",
    "end": "3478119"
  },
  {
    "text": "well for instance um one reason you won't be able to log on to a a Windows 2000 box in an environment like that is",
    "start": "3488319",
    "end": "3495559"
  },
  {
    "text": "uh your time is off because curb Roos is based on time if you fall away in that",
    "start": "3495559",
    "end": "3500960"
  },
  {
    "text": "from that 5 minute time period it won't allow you to log on um but other than that other than",
    "start": "3500960",
    "end": "3507880"
  },
  {
    "text": "trying to troubleshoot something like that's really based on the logs and the logs will say specifically why people are being",
    "start": "3507880",
    "end": "3514720"
  },
  {
    "text": "rejected any other questions okay well thank you very much",
    "start": "3516160",
    "end": "3522440"
  },
  {
    "text": "um if you have anything uh further you can mail me at rooster",
    "start": "3522440",
    "end": "3527039"
  },
  {
    "text": "[Applause]",
    "start": "3529100",
    "end": "3535039"
  },
  {
    "text": "attrition.com",
    "start": "3535039",
    "end": "3538039"
  },
  {
    "text": "e",
    "start": "3565039",
    "end": "3568039"
  },
  {
    "text": "e",
    "start": "3595039",
    "end": "3598039"
  },
  {
    "text": "e",
    "start": "3624960",
    "end": "3627960"
  },
  {
    "text": "e for",
    "start": "3654920",
    "end": "3658960"
  }
]