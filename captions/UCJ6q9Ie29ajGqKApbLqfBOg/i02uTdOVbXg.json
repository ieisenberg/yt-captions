[
  {
    "text": "[Music]",
    "start": "16680",
    "end": "19750"
  },
  {
    "text": "[Music]",
    "start": "29510",
    "end": "38439"
  },
  {
    "text": "[Music]",
    "start": "40730",
    "end": "43790"
  },
  {
    "text": "the security business unit I'm going to do a product manager thing for a little while and try that um Tim why don't you",
    "start": "50280",
    "end": "56280"
  },
  {
    "text": "to introduce yourself I'm I'm Tim Boler um all around in Microsoft for 10 years",
    "start": "56280",
    "end": "62199"
  },
  {
    "text": "bounc around between internal Technology Group IP and now I'm working in the security strategies",
    "start": "62199",
    "end": "69758"
  },
  {
    "text": "team so Tim and several other guys built our entry for open hack um what is open",
    "start": "71200",
    "end": "79119"
  },
  {
    "text": "hack open Haack is a competition that ewe magazine has had for four years now we participated in open hacks one two",
    "start": "79119",
    "end": "86280"
  },
  {
    "text": "and four and U just as a kind of interesting little side note uh we've",
    "start": "86280",
    "end": "92399"
  },
  {
    "text": "won every time um it is entirely possible for you",
    "start": "92399",
    "end": "97960"
  },
  {
    "text": "to build a secure environment with Microsoft software now you know don't",
    "start": "97960",
    "end": "104399"
  },
  {
    "text": "let that come as a shock to any of you um because it it can happen I was",
    "start": "104399",
    "end": "110119"
  },
  {
    "text": "involved in another competition earlier this year that um mCP magazine ran and again we had a uh we had an environment",
    "start": "110119",
    "end": "118439"
  },
  {
    "text": "that um uh I will still say um it was secure no one",
    "start": "118439",
    "end": "123759"
  },
  {
    "text": "was able to break into it from the network the environment was compromised because we used um what I call a layer",
    "start": "123759",
    "end": "130759"
  },
  {
    "text": "zero attack against against the network we convinced the security guard that it was time for her to go somewhere else",
    "start": "130759",
    "end": "137040"
  },
  {
    "text": "for a little while and then someone compromised the servers physically uh so you know what is what",
    "start": "137040",
    "end": "142760"
  },
  {
    "text": "is the immutable law number what right physical access to a machine and and it's all over what is it number three",
    "start": "142760",
    "end": "148599"
  },
  {
    "text": "Okay so what we're going to show you today is um what we did on open hack 4",
    "start": "148599",
    "end": "155440"
  },
  {
    "text": "in order to beat the competition the competition being Oracle running on Linux which was attacked within minutes",
    "start": "155440",
    "end": "161840"
  },
  {
    "text": "of the system going live on the internet now I hope that we'll actually be able to show you a few things and we didn't",
    "start": "161840",
    "end": "167920"
  },
  {
    "text": "get the hardware up here that we were expecting what is it and um I don't know you know most of it's",
    "start": "167920",
    "end": "175159"
  },
  {
    "text": "kind of slideware right we have some demos that we might be able to run through we'll just just see what Happ",
    "start": "175159",
    "end": "180560"
  },
  {
    "text": "happens um so what are the components of something like this um this is what we",
    "start": "180560",
    "end": "187400"
  },
  {
    "text": "built our open hack 4 entry with um unlike the previous open hacks which",
    "start": "187400",
    "end": "192920"
  },
  {
    "text": "were more of a a system level Target oh and by the way open haac one was probably the most interesting of all of",
    "start": "192920",
    "end": "198640"
  },
  {
    "text": "these um it was just right after Windows 2000 came out so no one had found any of the vulnerabilities yet right in window",
    "start": "198640",
    "end": "206200"
  },
  {
    "text": "2000 or I5 so what did we do for open hack one um very important First Step",
    "start": "206200",
    "end": "211959"
  },
  {
    "text": "gave the administrator account a password we added some IPC um filters",
    "start": "211959",
    "end": "220519"
  },
  {
    "text": "that actually they weren't negotiating any security at all they were just allowing traffic into destination Port",
    "start": "220519",
    "end": "225959"
  },
  {
    "text": "80 and blocking everything else and that was it right that was all but you know",
    "start": "225959",
    "end": "234439"
  },
  {
    "text": "people are smarter now some vulnerabilities have found some exploit code is running but open hack itself is",
    "start": "234439",
    "end": "239840"
  },
  {
    "text": "matured and open Haack 4 was all about trying to break an application not break a system so using these components we",
    "start": "239840",
    "end": "247760"
  },
  {
    "text": "built up an application that whose specifications were set aside ahead of time by eweek",
    "start": "247760",
    "end": "253200"
  },
  {
    "text": "magazine I want to call your attention to the bottom bullet down",
    "start": "253200",
    "end": "258560"
  },
  {
    "text": "there there were no firewalls at all in this I think that's very important am I",
    "start": "258560",
    "end": "265919"
  },
  {
    "text": "standing up here telling you that firewalls have outlived their usefulness and you should rip them out of your network work not",
    "start": "265919",
    "end": "272880"
  },
  {
    "text": "yet but we're getting to that point of where the hosts in the applications themselves are starting to assume more",
    "start": "272880",
    "end": "279440"
  },
  {
    "text": "and more responsibility for the security I love it because that way",
    "start": "279440",
    "end": "284720"
  },
  {
    "text": "it'll get the network back to what it does the best right which is deliver bits so the application was built on um",
    "start": "284720",
    "end": "292919"
  },
  {
    "text": "ewe's own excellence awards website app so it was something they've already got running and they were looking for you",
    "start": "292919",
    "end": "299120"
  },
  {
    "text": "know some free improvements to it right so user sets up an account um whoops how",
    "start": "299120",
    "end": "306160"
  },
  {
    "text": "does that happen all right so let's start all over hi I'm",
    "start": "306160",
    "end": "313440"
  },
  {
    "text": "Steve oh oh I pulled the wire out yeah it's always a layer one issue",
    "start": "313960",
    "end": "320960"
  },
  {
    "text": "isn't it okay so in this application a user is",
    "start": "320960",
    "end": "326880"
  },
  {
    "text": "going to set up an account um okay so what's the what's the principal problem when users can",
    "start": "326880",
    "end": "332840"
  },
  {
    "text": "self-provision you don't know who anybody is right I guess that doesn't really matter here um you enter a product or service",
    "start": "332840",
    "end": "340120"
  },
  {
    "text": "for judging you submit a credit card number to pay an entry fee because see that's really all they care about right is getting that credit card number so",
    "start": "340120",
    "end": "346560"
  },
  {
    "text": "they can Zing your card for some money um and then you can read information about the award too so the the entrance",
    "start": "346560",
    "end": "353560"
  },
  {
    "text": "were required to to base their their uh submission on this application so so we",
    "start": "353560",
    "end": "359919"
  },
  {
    "text": "built it with the Net Framework using asp.net ado.net and some cryptography",
    "start": "359919",
    "end": "365400"
  },
  {
    "text": "class libraries that are part of that so the first thing we need to do",
    "start": "365400",
    "end": "371840"
  },
  {
    "text": "right is somehow find out who this person is iis6 gives you a number of",
    "start": "371840",
    "end": "377360"
  },
  {
    "text": "different ways that you can use to authenticate users integrated Windows basic digest you know you've seen all",
    "start": "377360",
    "end": "383240"
  },
  {
    "text": "this stuff before right your windows people um so e-week wanted us to roll our own so we developed a forms based",
    "start": "383240",
    "end": "390440"
  },
  {
    "text": "front end to the application so we post the username and password over",
    "start": "390440",
    "end": "396720"
  },
  {
    "text": "SSL just again kind of general purpose things you've probably seen these before",
    "start": "396720",
    "end": "401919"
  },
  {
    "text": "use an encrypted cookie to maintain this log on session unauthenticated users can",
    "start": "401919",
    "end": "407639"
  },
  {
    "text": "access the homepage right the front one and as well as a couple others but if",
    "start": "407639",
    "end": "413599"
  },
  {
    "text": "you were trying to directly get to a URL That was supposed to be secure right you",
    "start": "413599",
    "end": "418960"
  },
  {
    "text": "would get redirected back to the login page so it's pretty easy nowadays to do",
    "start": "418960",
    "end": "426680"
  },
  {
    "text": "this with asp.net we can in a web.config file create a system.web section um that",
    "start": "426680",
    "end": "435400"
  },
  {
    "text": "would apply to all pages in the application then in a subfolder underneath that we can have another",
    "start": "435400",
    "end": "441720"
  },
  {
    "text": "web.config file it inherits all of the security settings from the parent level and we can deny access to unauthorized",
    "start": "441720",
    "end": "448199"
  },
  {
    "text": "users um and and it's it's really quite easy this is a thre line system.web file",
    "start": "448199",
    "end": "455360"
  },
  {
    "text": "okay in the web do or system. web section in the web.config file that directs all access to the login",
    "start": "455360",
    "end": "464319"
  },
  {
    "text": "page then for pages that authorization or authentication is required before you",
    "start": "464319",
    "end": "469879"
  },
  {
    "text": "can read them it's a little bit more so there's kind of the framework for how you would set that up so it's not a lot",
    "start": "469879",
    "end": "476840"
  },
  {
    "text": "of work anymore to just enforce that authentication happens before you get to a particular page so we'd like to show",
    "start": "476840",
    "end": "483720"
  },
  {
    "text": "you these assuming that we get connectivity",
    "start": "483720",
    "end": "488319"
  },
  {
    "text": "here yeah no still nothing all right there you",
    "start": "490560",
    "end": "497080"
  },
  {
    "text": "go all right so I'm you right here",
    "start": "498080",
    "end": "506400"
  },
  {
    "text": "um so",
    "start": "509879",
    "end": "515080"
  },
  {
    "text": "that it's",
    "start": "517080",
    "end": "520240"
  },
  {
    "text": "slow okay now there's two levels of these files one of the files is in basically the public roof um the web",
    "start": "527000",
    "end": "535200"
  },
  {
    "text": "server itself so if you look at the web config file here",
    "start": "535200",
    "end": "540720"
  },
  {
    "text": "okay so you're seeing in here the um forms off that he just mentioned this is the",
    "start": "561240",
    "end": "568480"
  },
  {
    "text": "Authentication just showed in that one slide so this is this essentially is allowing a user to come into the website",
    "start": "568480",
    "end": "574600"
  },
  {
    "text": "and is telling them okay I don't know who you are um here's your login page please start your login process or you",
    "start": "574600",
    "end": "580880"
  },
  {
    "text": "can create an account Etc now there's a second web config that is actually put in the more",
    "start": "580880",
    "end": "587120"
  },
  {
    "text": "secure portion of the",
    "start": "587120",
    "end": "590040"
  },
  {
    "text": "website and we've of course labeled that secure to make it real obvious for ourselves I guess and web config just",
    "start": "593240",
    "end": "600440"
  },
  {
    "text": "choose send to",
    "start": "600440",
    "end": "603160"
  },
  {
    "text": "notepad all this is doing here is saying that if a user hasn't authenticated to the application they're",
    "start": "610399",
    "end": "617440"
  },
  {
    "text": "denied that's essentially it for the web. config files we use for",
    "start": "617440",
    "end": "622800"
  },
  {
    "text": "open yeah um third one there we",
    "start": "622800",
    "end": "631079"
  },
  {
    "text": "go isn't there a hot key to go straight to the power or to the presentation mode",
    "start": "631079",
    "end": "637040"
  },
  {
    "text": "I can never remember this stuff",
    "start": "637040",
    "end": "642360"
  },
  {
    "text": "so to create a new user um we uh we're not using active directory here we're",
    "start": "642360",
    "end": "648760"
  },
  {
    "text": "just using our own account store we want to capture their username",
    "start": "648760",
    "end": "654800"
  },
  {
    "text": "and whatever password that they want to associate with that and and store that",
    "start": "654800",
    "end": "659920"
  },
  {
    "text": "in our in our sort of our own application directory we'll encrypt that password with triple de store that in",
    "start": "659920",
    "end": "665760"
  },
  {
    "text": "the database if someone is then coming back to log into their existing account we'll",
    "start": "665760",
    "end": "671680"
  },
  {
    "text": "encrypt the password with de and then fire that across the network right so that now we're got not real passwords",
    "start": "671680",
    "end": "679600"
  },
  {
    "text": "going across just again basic stuff right compare it to the encrypted password stored in the database and if",
    "start": "679600",
    "end": "685160"
  },
  {
    "text": "it's in then we send a cookie to the user and we do all over",
    "start": "685160",
    "end": "691440"
  },
  {
    "text": "SSL what becomes more and more important and is is has taken a long time for",
    "start": "691440",
    "end": "697160"
  },
  {
    "text": "people to learn but they're starting to learn this now is that you can't just blindly accept what someone's going to",
    "start": "697160",
    "end": "702519"
  },
  {
    "text": "give you in an application you want to validate that make sure that that's expected for whatever you're ex asking",
    "start": "702519",
    "end": "708959"
  },
  {
    "text": "the user to supply um so by doing some input validation we can guard against a number",
    "start": "708959",
    "end": "716279"
  },
  {
    "text": "of attack classes here right buffer overruns cross-site scripting insertion of other kinds of malicious",
    "start": "716279",
    "end": "724000"
  },
  {
    "text": "code you want to plan for the worst and build in validation in multiple layers",
    "start": "724000",
    "end": "729399"
  },
  {
    "text": "you need to assume that one or more tiers here could become compromised so",
    "start": "729399",
    "end": "734560"
  },
  {
    "text": "in the application that we submitted for open Haack we're performing four checks four different checks against the input",
    "start": "734560",
    "end": "743040"
  },
  {
    "text": "uh we're looking at all of the everything that someone might enter into a field on a form and we're checking",
    "start": "743040",
    "end": "748839"
  },
  {
    "text": "that first any URLs that will have um any kind of query string in them at all we're",
    "start": "748839",
    "end": "755560"
  },
  {
    "text": "checking that um access to the database itself is",
    "start": "755560",
    "end": "761040"
  },
  {
    "text": "not done over Dynamic queries but we use only parameterized stored procedures for that and someone had already talked",
    "start": "761040",
    "end": "766600"
  },
  {
    "text": "about that in a session earlier today and then the last thing we do is HTML encode all the data sent back to",
    "start": "766600",
    "end": "772920"
  },
  {
    "text": "people so we're not sending them back scripts that run it's just static text so the first check",
    "start": "772920",
    "end": "779800"
  },
  {
    "text": "um we call two different asp.net classes to validate input Fields regular",
    "start": "779800",
    "end": "787160"
  },
  {
    "text": "expression validator and required field validator this um will allow us to limit",
    "start": "787160",
    "end": "793279"
  },
  {
    "text": "input characters to what we needed here which is a space apostrophe comma period",
    "start": "793279",
    "end": "798320"
  },
  {
    "text": "letters and numbers so other characters are blocks things that are commonly used to try to perform SQL injection attacks",
    "start": "798320",
    "end": "805240"
  },
  {
    "text": "for example the second check is uh parsing that URL string so we call another net",
    "start": "805240",
    "end": "814120"
  },
  {
    "text": "method system. text. regular expressions. regex and the goal here is",
    "start": "814120",
    "end": "820639"
  },
  {
    "text": "that for these particular URLs we are validating we want numbers only so",
    "start": "820639",
    "end": "826639"
  },
  {
    "text": "there's the the snippet of code that uh gets executed for that purpose oops the",
    "start": "826639",
    "end": "833160"
  },
  {
    "text": "third check using stored procedures for access to the database um doing this",
    "start": "833160",
    "end": "838560"
  },
  {
    "text": "limits the applications interaction right you can't just submit Dynamic queries you can only do these particular",
    "start": "838560",
    "end": "843759"
  },
  {
    "text": "kinds of things um and we strongly type the parameters too so that if someone's",
    "start": "843759",
    "end": "848800"
  },
  {
    "text": "trying to pass something to the um to the parameter to the engine that we don't want right is we're just going to",
    "start": "848800",
    "end": "855320"
  },
  {
    "text": "discard it if it's not the right type um finally the fourth check is we send",
    "start": "855320",
    "end": "862720"
  },
  {
    "text": "HTML only back to the user I think this is a really important um new thing that",
    "start": "862720",
    "end": "868839"
  },
  {
    "text": "we can do with uh asp.net um I don't know a lot about appdev but I don't know",
    "start": "868839",
    "end": "874759"
  },
  {
    "text": "if was this even possible before easily not easily not easily no now it's it's",
    "start": "874759",
    "end": "881040"
  },
  {
    "text": "it's it's very easy it's um symbol do or some label. text equals server. HTML and",
    "start": "881040",
    "end": "887519"
  },
  {
    "text": "code and username bam you're done it's just a single call uh and we don't have do we have",
    "start": "887519",
    "end": "894880"
  },
  {
    "text": "connectivity is it finally working I'm not",
    "start": "894880",
    "end": "900320"
  },
  {
    "text": "no okay so none of the rest of them are going to work and we don't have a video switcher up here Unfortunately they got",
    "start": "900320",
    "end": "906079"
  },
  {
    "text": "us in the wrong room so hey I have an idea let's try",
    "start": "906079",
    "end": "914399"
  },
  {
    "text": "something watch us blow up here right there",
    "start": "919120",
    "end": "927360"
  },
  {
    "text": "okay and let's uh am I am I above its",
    "start": "930199",
    "end": "935800"
  },
  {
    "text": "resolution do you have to hit function F5 it turn it's not even",
    "start": "935800",
    "end": "941079"
  },
  {
    "text": "on yes all right great I know you guys in the back are probably cursing the screen right",
    "start": "943759",
    "end": "950759"
  },
  {
    "text": "now especially since it cut off up here too",
    "start": "950759",
    "end": "956040"
  },
  {
    "text": "okay let's okay you go ahead with it we'll come back to that later what's that it was just on yeah all",
    "start": "961839",
    "end": "970440"
  },
  {
    "text": "right oh man my big hourglass is",
    "start": "970440",
    "end": "976040"
  },
  {
    "text": "up okay okay we're on my box is absolutely crawling and I",
    "start": "976040",
    "end": "981639"
  },
  {
    "text": "don't know why",
    "start": "981639",
    "end": "985079"
  },
  {
    "text": "all right so what I'm trying to do here is get to a stage where I can actually get into the I'm unminimize that and",
    "start": "992560",
    "end": "999199"
  },
  {
    "text": "slide it over because the left edge of it is cutting",
    "start": "999199",
    "end": "1003600"
  },
  {
    "text": "off that's a note to my management that I get a new laptop when I get home um",
    "start": "1006839",
    "end": "1013199"
  },
  {
    "text": "the um Regular expression validator and the required build field validator if I can get my laptop to actually give me a",
    "start": "1013199",
    "end": "1019600"
  },
  {
    "text": "mouse back is going to um show up in a lot of those ASP files",
    "start": "1019600",
    "end": "1025839"
  },
  {
    "text": "that are in the default directory for example the login where you're looking for uh entering your um credentials for",
    "start": "1025839",
    "end": "1031038"
  },
  {
    "text": "creating a new account and this is just locked did it freeze it",
    "start": "1031039",
    "end": "1037760"
  },
  {
    "text": "froze okay just keep talking so",
    "start": "1037760",
    "end": "1043280"
  },
  {
    "text": "um what I would show you is that there's there's on the input field you're coming",
    "start": "1043280",
    "end": "1048400"
  },
  {
    "text": "across expressions and before the actual engine within the website is parsing them and",
    "start": "1048400",
    "end": "1054919"
  },
  {
    "text": "and allowing that input to go through it's validating them before it actually takes the input so when you use uh for",
    "start": "1054919",
    "end": "1062160"
  },
  {
    "text": "example regular expression validator or required field validator those are in as",
    "start": "1062160",
    "end": "1068440"
  },
  {
    "text": "the user is entering them actually making sure that that data is accurate that is acceptable to the application so you're not getting um it mitigates that",
    "start": "1068440",
    "end": "1076520"
  },
  {
    "text": "risk of cross- site you don't have somebody that can slip something in there because it's not in allow character it won't even it um the other",
    "start": "1076520",
    "end": "1083720"
  },
  {
    "text": "one we have here is that the uh the stored procedures on the SQL databases are all locked down specifically um so",
    "start": "1083720",
    "end": "1090679"
  },
  {
    "text": "that the application at the web front end is talking to specifically specific",
    "start": "1090679",
    "end": "1096280"
  },
  {
    "text": "stored procedures on the database the database is not trusting that what it's getting from the web server is good",
    "start": "1096280",
    "end": "1101720"
  },
  {
    "text": "information so it is also providing validation to the input it's receiving",
    "start": "1101720",
    "end": "1106880"
  },
  {
    "text": "to the database um and finally when users are getting um uh output back we",
    "start": "1106880",
    "end": "1113960"
  },
  {
    "text": "we make sure that that output is run through HTML incode It's",
    "start": "1113960",
    "end": "1119400"
  },
  {
    "text": "Hammer so that all they get back is Hess Tex so crite scripting attack for example is again mitigated HTML in code",
    "start": "1119400",
    "end": "1127280"
  },
  {
    "text": "make sure it's just HTML data that's going back to the",
    "start": "1127280",
    "end": "1132280"
  },
  {
    "text": "client so the next thing you need to now concern yourself with is how do we store",
    "start": "1132400",
    "end": "1138159"
  },
  {
    "text": "this these secrets in a secure way right we've got passwords that we're storing here",
    "start": "1138159",
    "end": "1144360"
  },
  {
    "text": "um the database connection and login string right what do most people do when",
    "start": "1144360",
    "end": "1149679"
  },
  {
    "text": "IIs wants to talk to SQL SQL Server is set up for SQL authentication right and",
    "start": "1149679",
    "end": "1155400"
  },
  {
    "text": "they're passing in an saay account with no password okay um well all right so",
    "start": "1155400",
    "end": "1161320"
  },
  {
    "text": "they're going to be stronger and they're going to put a good password on the sa account but then IIs reads a text file",
    "start": "1161320",
    "end": "1167000"
  },
  {
    "text": "to see the connection string and hands it in the clear over the wire to the SQL Server right um well for protecting",
    "start": "1167000",
    "end": "1174600"
  },
  {
    "text": "these two kinds of information we're going to take a couple different approaches the web application needs to",
    "start": "1174600",
    "end": "1180559"
  },
  {
    "text": "authenticate to the database so rather than taking the normal approach of storing this ID and password in some",
    "start": "1180559",
    "end": "1187360"
  },
  {
    "text": "text file somewhere we're going to use this novel thing called Windows",
    "start": "1187360",
    "end": "1192760"
  },
  {
    "text": "authentication huh what's that well in our connect string now we only need to",
    "start": "1192760",
    "end": "1198039"
  },
  {
    "text": "have the server name and the database name we're not actually providing any password right because the IIs computer",
    "start": "1198039",
    "end": "1204200"
  },
  {
    "text": "and the SQL computer are members of the domain or we're using local accounts",
    "start": "1204200",
    "end": "1209360"
  },
  {
    "text": "that might be this have the same name so we're storing this in the code behind",
    "start": "1209360",
    "end": "1214400"
  },
  {
    "text": "file which is the core application logic right not in any user interface definition file it's still not enough",
    "start": "1214400",
    "end": "1221480"
  },
  {
    "text": "though because if an attacker got on the I computer you could read the file so",
    "start": "1221480",
    "end": "1226960"
  },
  {
    "text": "what are we doing we're encrypting this using a call to something else in asp.net or the I'm sorry in the data",
    "start": "1226960",
    "end": "1234919"
  },
  {
    "text": "protection API two calls Crypt protect data and crypt unprotect data allows us",
    "start": "1234919",
    "end": "1241039"
  },
  {
    "text": "to store Secrets without actually having to manage any of the",
    "start": "1241039",
    "end": "1245960"
  },
  {
    "text": "keys we store the string in the registry the encrypted string but then we Ackle",
    "start": "1246120",
    "end": "1251640"
  },
  {
    "text": "these particular registry keys right so that only administrators can read them in the ASP Network or process",
    "start": "1251640",
    "end": "1260600"
  },
  {
    "text": "but for storing user information that that credit card data okay DTaP is a",
    "start": "1261280",
    "end": "1267039"
  },
  {
    "text": "little less useful here remember that we said that we don't have to manage keys",
    "start": "1267039",
    "end": "1272440"
  },
  {
    "text": "well it's because they kind of managed for us the keys are based on local machine",
    "start": "1272440",
    "end": "1277880"
  },
  {
    "text": "information so imagine if we had 87 web servers in in a web server Farm",
    "start": "1277880",
    "end": "1284720"
  },
  {
    "text": "somewhere we'd have to have 87 different keys that we were going to manage with",
    "start": "1284720",
    "end": "1290440"
  },
  {
    "text": "DT API on the SQL server side and that gets cumbersome right so instead we're",
    "start": "1290440",
    "end": "1296760"
  },
  {
    "text": "going to generate an encryption key and an initialization",
    "start": "1296760",
    "end": "1303120"
  },
  {
    "text": "Vector will systematically encrypt each password and credit card number that",
    "start": "1303120",
    "end": "1308840"
  },
  {
    "text": "we're going to store in the database using this key that we got generated then we encrypt the key and",
    "start": "1308840",
    "end": "1315640"
  },
  {
    "text": "the initialization Vector with DP API Ackle that in the registry on the web",
    "start": "1315640",
    "end": "1322400"
  },
  {
    "text": "server so now we have a one key that all of the web servers in the farm can use we use kind of the same uh method we did",
    "start": "1322400",
    "end": "1329880"
  },
  {
    "text": "before for protecting the key itself so do you have the code for",
    "start": "1329880",
    "end": "1336120"
  },
  {
    "text": "storing secrets on this CD and my laptop it's over there got the machine that's running that piece working so can I",
    "start": "1336120",
    "end": "1343320"
  },
  {
    "text": "terminal server to it um yeah go to uh 10 103",
    "start": "1343320",
    "end": "1350520"
  },
  {
    "text": "yes all right so something wrong with zero. two",
    "start": "1351080",
    "end": "1357880"
  },
  {
    "text": "yeah I'm not sure what's on",
    "start": "1357880",
    "end": "1361440"
  },
  {
    "text": "there okay now the code that's actually doing the encryption this there there's",
    "start": "1373840",
    "end": "1379120"
  },
  {
    "text": "there's two two separate areas that we encrypted and stored in the registry one was the actual PSN so like it was",
    "start": "1379120",
    "end": "1385799"
  },
  {
    "text": "describing a lot of people put the classic you know database connection strings into their Java applet or",
    "start": "1385799",
    "end": "1392000"
  },
  {
    "text": "something within the website that can then be surfed and sifted and of course",
    "start": "1392000",
    "end": "1397480"
  },
  {
    "text": "yield the plain text uh password to an attacker so what we did is we used",
    "start": "1397480",
    "end": "1404840"
  },
  {
    "text": "a uh we used the uh API calls to go and build an",
    "start": "1405880",
    "end": "1412880"
  },
  {
    "text": "app tell you what I'm going to do this because I already have it pre over I wish we had that switch box this",
    "start": "1412880",
    "end": "1419480"
  },
  {
    "text": "is driving",
    "start": "1419480",
    "end": "1421960"
  },
  {
    "text": "crazy come on come on there you go yes okay so we have a tool that the uh uh",
    "start": "1432440",
    "end": "1438600"
  },
  {
    "text": "Olson and his team who actually built the web app for us from the contest rot called set password and what set",
    "start": "1438600",
    "end": "1444600"
  },
  {
    "text": "password does is it takes in a full DSN string like you would put in your web",
    "start": "1444600",
    "end": "1450120"
  },
  {
    "text": "app to access the database same string and it actually encrypts it and stores it in a key which they apply called open",
    "start": "1450120",
    "end": "1458120"
  },
  {
    "text": "hack which is under your in our case we put it under Microsoft uh uh software",
    "start": "1458120",
    "end": "1464679"
  },
  {
    "text": "under the local machine store so the session key and the SQL connection string are actually stored in encrypted",
    "start": "1464679",
    "end": "1472039"
  },
  {
    "text": "Fashion on the server itself so if you compromise a server you're getting a big pile of goo",
    "start": "1472039",
    "end": "1479039"
  },
  {
    "text": "in terms of how you would connect to the uh remote server behind in the in the private section of the network on top of",
    "start": "1479039",
    "end": "1484840"
  },
  {
    "text": "that we a the key so that only the asp.net",
    "start": "1484840",
    "end": "1492679"
  },
  {
    "text": "service and of course I use the wrong registry after um only the asp.net server uh service and administrators",
    "start": "1492679",
    "end": "1500000"
  },
  {
    "text": "could actually access and read that key so you couldn't get in from an anonymous point of view or take a user credential",
    "start": "1500000",
    "end": "1505919"
  },
  {
    "text": "it had to be one of those two services to actually interact with the key that's pretty much it for the story",
    "start": "1505919",
    "end": "1513279"
  },
  {
    "text": "secret great",
    "start": "1513279",
    "end": "1516559"
  },
  {
    "text": "you yeah question somewhere",
    "start": "1523600",
    "end": "1528278"
  },
  {
    "text": "it's okay the question was is the key is the key being used as a landman hash and",
    "start": "1533039",
    "end": "1538559"
  },
  {
    "text": "just the encrypted key on the other side being processed or are we decrypting it on the other end um actually in this",
    "start": "1538559",
    "end": "1544080"
  },
  {
    "text": "case we've disabled all the lman Hat between well is it functioning similar to that it's oh I'm sorry um",
    "start": "1544080",
    "end": "1551640"
  },
  {
    "text": "it's it's actually storing that full connection string so I wouldn't call it a lamb and hatch it's actually that",
    "start": "1551640",
    "end": "1557520"
  },
  {
    "text": "string is enced and then as the application calls that so it can make the connection to the",
    "start": "1557520",
    "end": "1563760"
  },
  {
    "text": "database um it's actually as far as the application concerned it's clear text because it has a key to the",
    "start": "1563760",
    "end": "1571600"
  },
  {
    "text": "credit only within certain channels but yeah you you would be able to you would if you compromise the web app the web",
    "start": "1577080",
    "end": "1582720"
  },
  {
    "text": "server itself the the failure mode at that point is okay the SQL Server no longer trusts it so there's that's the",
    "start": "1582720",
    "end": "1590120"
  },
  {
    "text": "defense in depth we figured that every piece of the application could be compromised at one point or",
    "start": "1590120",
    "end": "1596679"
  },
  {
    "text": "another yeah if somebody were able to for example U steal the actual code of the site it wouldn't get them anything",
    "start": "1599200",
    "end": "1605919"
  },
  {
    "text": "it would just get them you",
    "start": "1605919",
    "end": "1609158"
  },
  {
    "text": "know no those are that's authenticating using uh in this case ntlmv2 right it's anlm authentication",
    "start": "1612679",
    "end": "1619480"
  },
  {
    "text": "what we're throwing encrypted is the connection string that the app uses to connect the database right you know what",
    "start": "1619480",
    "end": "1626320"
  },
  {
    "text": "is the database name and what is the machine name and then we're encrypting the key that's used to encrypt the",
    "start": "1626320",
    "end": "1631600"
  },
  {
    "text": "connection string so like Tim said what this does is it it uh eliminates the condition under which an attacker can",
    "start": "1631600",
    "end": "1637880"
  },
  {
    "text": "just steal the code and log into the database directly because there's nothing useful in there's nothing in the code right but if you were admin on the",
    "start": "1637880",
    "end": "1645640"
  },
  {
    "text": "Box on the web server then yeah I mean you could do everything the web server could do which is decrypt the connection",
    "start": "1645640",
    "end": "1652240"
  },
  {
    "text": "string and at that point there's additional restrictions we built in in case of that right we haven't gotten",
    "start": "1652240",
    "end": "1657480"
  },
  {
    "text": "that far down yet so what did we then do on",
    "start": "1657480",
    "end": "1665519"
  },
  {
    "text": "I5 um well you know I'm not going to spend a lot of time on that first bullet point I hope",
    "start": "1665519",
    "end": "1672000"
  },
  {
    "text": "you all understand the value of that one um then just a couple other things right we moved the default website another",
    "start": "1672000",
    "end": "1678679"
  },
  {
    "text": "volume um actually I've got slides on most of these so I'm just going to kind of Zoom through them here so we took the",
    "start": "1678679",
    "end": "1685480"
  },
  {
    "text": "default website out of system Drive inet Pub and stuck it on a different volume",
    "start": "1685480",
    "end": "1690600"
  },
  {
    "text": "in a different folder name um so now you know an attacker needs to have some knowledge of the directory tree you",
    "start": "1690600",
    "end": "1696840"
  },
  {
    "text": "can't just count on using uh these double dot slash attacks anymore and trying to get to uh the root of",
    "start": "1696840",
    "end": "1704600"
  },
  {
    "text": "C next thing we did was run IIs lockdown someone had uh we had a session earlier",
    "start": "1704600",
    "end": "1710720"
  },
  {
    "text": "today where people were talking about that and uh the question was asked how many of you have seen I lockdown I ask",
    "start": "1710720",
    "end": "1716720"
  },
  {
    "text": "again how many of you have seen this all right so one of the things that you should do for those of you who didn't raise your hands is make a little note",
    "start": "1716720",
    "end": "1723360"
  },
  {
    "text": "and you're sitting in the hotel tonight hoping that no one is attacking your computer on the network um go check this",
    "start": "1723360",
    "end": "1729440"
  },
  {
    "text": "thing out it's really cool it does all of the stuff that well frankly should",
    "start": "1729440",
    "end": "1735559"
  },
  {
    "text": "have been done out of the box but nevertheless it's very easy to do them all now with just a couple clicks of a",
    "start": "1735559",
    "end": "1741880"
  },
  {
    "text": "button on this thing we will modify one of you one of",
    "start": "1741880",
    "end": "1747600"
  },
  {
    "text": "the lockdown templates for our specific purposes um and then there's the URL",
    "start": "1747600",
    "end": "1754320"
  },
  {
    "text": "where you can go find it next we installed The NET Framework on the web server and uh this is one of",
    "start": "1754320",
    "end": "1762320"
  },
  {
    "text": "those things that you can't do with just a single click right you need to get the redistributable and then you need to get",
    "start": "1762320",
    "end": "1768519"
  },
  {
    "text": "service pack two you then need to get the latest hot fix which strengthens some credentials and then finally mdac",
    "start": "1768519",
    "end": "1775360"
  },
  {
    "text": "which is a a part of the application requirements next thing we do is remove",
    "start": "1775360",
    "end": "1782279"
  },
  {
    "text": "some extension mappings um the only thing we need is aspx so we just take",
    "start": "1782279",
    "end": "1789000"
  },
  {
    "text": "all the rest of them straight out of the web server and not only that but we actually remap these unused extensions to the",
    "start": "1789000",
    "end": "1796840"
  },
  {
    "text": "401d page page which is included with IIs lockdown so if someone's trying to",
    "start": "1796840",
    "end": "1802960"
  },
  {
    "text": "call up some other extension they're going to get an error in their web browser whoops",
    "start": "1802960",
    "end": "1808640"
  },
  {
    "text": "um come on there we go next is account Privileges and",
    "start": "1808640",
    "end": "1815440"
  },
  {
    "text": "permissions you know there's a lot of debate that goes on about what service account should something run under right",
    "start": "1815440",
    "end": "1822200"
  },
  {
    "text": "you know is it a local account is it a domain user account whatever um",
    "start": "1822200",
    "end": "1829240"
  },
  {
    "text": "we use the default local aspet service account that gets created during the framework's installation this account is",
    "start": "1829240",
    "end": "1837080"
  },
  {
    "text": "placed in the local users group the account also receives the following",
    "start": "1837080",
    "end": "1842279"
  },
  {
    "text": "permissions on the temporary asp.net folder it has full access on the temp folder it has full access and read",
    "start": "1842279",
    "end": "1849559"
  },
  {
    "text": "access to the framework installation folder lockdown creates a local group",
    "start": "1849559",
    "end": "1856320"
  },
  {
    "text": "called Web application group so we add the aspet service account to this",
    "start": "1856320",
    "end": "1862039"
  },
  {
    "text": "application group the cool thing about this group is that it can't run",
    "start": "1862039",
    "end": "1867519"
  },
  {
    "text": "executables and then we upgrade this update this group's permissions so that we can run the C compiler and the",
    "start": "1867519",
    "end": "1873360"
  },
  {
    "text": "resource converter that was another thing required by the",
    "start": "1873360",
    "end": "1877679"
  },
  {
    "text": "application then another component of the lockdown tool is URL scan a couple",
    "start": "1878559",
    "end": "1883679"
  },
  {
    "text": "people have been talking about this already it's part of IIs lockdown um",
    "start": "1883679",
    "end": "1889760"
  },
  {
    "text": "this more than anything else I think this is the kind of stuff that is just a",
    "start": "1889760",
    "end": "1896559"
  },
  {
    "text": "no-brainer anymore right URL scan absorbs the URL before it even passes it",
    "start": "1896559",
    "end": "1902880"
  },
  {
    "text": "on to inet info and uh when we put URL scan on",
    "start": "1902880",
    "end": "1908519"
  },
  {
    "text": "microsoft.com web servers we noticed a performance Improvement of over",
    "start": "1908519",
    "end": "1914000"
  },
  {
    "text": "25% because URL scan is just throwing away the junk right so ined info is only seeing the",
    "start": "1914000",
    "end": "1920840"
  },
  {
    "text": "good stuff it's it's incredible what this thing can do um we modify the inii",
    "start": "1920840",
    "end": "1927600"
  },
  {
    "text": "file so that we allow only the applications extensions and then we specifically want to block long requests",
    "start": "1927600",
    "end": "1934399"
  },
  {
    "text": "um I was chatting with somebody else earlier today about about this one thing",
    "start": "1934399",
    "end": "1940159"
  },
  {
    "text": "that the um inii files do by default is something a little different than what",
    "start": "1940159",
    "end": "1945960"
  },
  {
    "text": "you traditionally do with a firewall rule set what does a firewall rule set do it blocks everything and then except right",
    "start": "1945960",
    "end": "1953559"
  },
  {
    "text": "you list the kinds of things that you want to allow URL scan kind of takes a different",
    "start": "1953559",
    "end": "1960880"
  },
  {
    "text": "approach right um by default it wants to run a deny extension section and so you",
    "start": "1960880",
    "end": "1966279"
  },
  {
    "text": "list the explicitly list all of the extensions that you want to deny meaning you're going to allow everything else",
    "start": "1966279",
    "end": "1973240"
  },
  {
    "text": "well I was thinking that maybe we need to rewrite this thing right so that we simply say we allow the following",
    "start": "1973240",
    "end": "1979159"
  },
  {
    "text": "extensions and deny everything else it turns out that URL scan processes deny extensions",
    "start": "1979159",
    "end": "1984919"
  },
  {
    "text": "first so um the gentleman I was talking with to said he had a really long URL",
    "start": "1984919",
    "end": "1990320"
  },
  {
    "text": "scan and by that I'm presuming like what maybe 16 or 17K most of it is deny",
    "start": "1990320",
    "end": "1995639"
  },
  {
    "text": "extensions and because it processes that first and really really fast you can just throw off the junk right away",
    "start": "1995639",
    "end": "2002200"
  },
  {
    "text": "before it even comes in",
    "start": "2002200",
    "end": "2006039"
  },
  {
    "text": "modify some apples on the folder in the log this is another very important thing",
    "start": "2007960",
    "end": "2014679"
  },
  {
    "text": "so you can see the modifications that we ra we made right here um how many of you",
    "start": "2014679",
    "end": "2021200"
  },
  {
    "text": "when you're working with IIs and you're hardening it remember to do the log files I'm just curious a couple of you",
    "start": "2021200",
    "end": "2028399"
  },
  {
    "text": "okay that that is something that would routinely slip my mind I can guarantee you that if I'm not sitting down with a",
    "start": "2028399",
    "end": "2033799"
  },
  {
    "text": "checklist in front of my face um so that's why we're giving you this here is your checklist",
    "start": "2033799",
    "end": "2040080"
  },
  {
    "text": "right can we show this yeah I got this one over here all",
    "start": "2040080",
    "end": "2045080"
  },
  {
    "text": "right bad cable really yeah put my back to",
    "start": "2045360",
    "end": "2051599"
  },
  {
    "text": "back bad cable um Roberto are you here what was the number one problem that we",
    "start": "2051599",
    "end": "2058240"
  },
  {
    "text": "had when we were first going to go live with the mCP thing it's a bad",
    "start": "2058240",
    "end": "2064638"
  },
  {
    "text": "cable okay now um what I've got here is I actually",
    "start": "2065440",
    "end": "2071520"
  },
  {
    "text": "brought up the internet Information Services lockdown wizard on a simulated uh o web server that we built um this is",
    "start": "2071520",
    "end": "2078760"
  },
  {
    "text": "the app that we actually submitted um so this is the is lockdown wizard um going",
    "start": "2078760",
    "end": "2084599"
  },
  {
    "text": "through it I'm of course going to agree to this because I don't read it and then I agree anyway and we configured this as",
    "start": "2084599",
    "end": "2089760"
  },
  {
    "text": "a static web server so going down through the static web server it comes in next here's URL scan it says do you",
    "start": "2089760",
    "end": "2096560"
  },
  {
    "text": "want to install this and of course yes we do I'll say next here and it's going to go through the box and actually uh",
    "start": "2096560",
    "end": "2103520"
  },
  {
    "text": "configure the extensions um disable unnecessary services and U do some",
    "start": "2103520",
    "end": "2109119"
  },
  {
    "text": "remapping for us and built into the template you see all of the things there it just said that I am going to do for you when you hit next right well that's",
    "start": "2109119",
    "end": "2115760"
  },
  {
    "text": "already defined in the static web server template you can manually run through IIs lockdown and pick all those",
    "start": "2115760",
    "end": "2121920"
  },
  {
    "text": "individual things if you want but the templates just make it easier to reproduce this accurately",
    "start": "2121920",
    "end": "2128800"
  },
  {
    "text": "oh and one other thing about um IIs lockdown it it",
    "start": "2128800",
    "end": "2133960"
  },
  {
    "text": "applies fairly quickly to a web server how many of you have tried to",
    "start": "2133960",
    "end": "2139520"
  },
  {
    "text": "undo IIs lockdown if you've tried to do it at all okay is it a pleasant",
    "start": "2139520",
    "end": "2145200"
  },
  {
    "text": "experience now it takes a long time and I don't understand why but for some reason undoing I lockdown is a slow",
    "start": "2145200",
    "end": "2153599"
  },
  {
    "text": "arduous very dis intensive process so make sure that you've got I lockdown",
    "start": "2153599",
    "end": "2160200"
  },
  {
    "text": "configured exactly the way you want to before you hit that run button",
    "start": "2160200",
    "end": "2166400"
  },
  {
    "text": "yeah modified the template let me back up",
    "start": "2168880",
    "end": "2173560"
  },
  {
    "text": "here yeah I know um are are you done no I'm just I just want",
    "start": "2174319",
    "end": "2179760"
  },
  {
    "text": "to yeah",
    "start": "2179760",
    "end": "2183760"
  },
  {
    "text": "two modifications um we needed to add the application's own extension the aspx",
    "start": "2187880",
    "end": "2194480"
  },
  {
    "text": "to the Baseline static web server file and who asked the question ah and then",
    "start": "2194480",
    "end": "2200079"
  },
  {
    "text": "the other thing is that we specifically told URL scan we want to trash really long URLs",
    "start": "2200079",
    "end": "2207520"
  },
  {
    "text": "right okay",
    "start": "2208960",
    "end": "2214200"
  },
  {
    "text": "so what you're seeing here if we get off the blue",
    "start": "2214280",
    "end": "2219520"
  },
  {
    "text": "all right what you're seeing here is just the uh the results of the application of that static web template",
    "start": "2220720",
    "end": "2226920"
  },
  {
    "text": "um you can view the report if you'd like which will provide some more detail on what it did tells you what it did",
    "start": "2226920",
    "end": "2233599"
  },
  {
    "text": "removed the script um when he's talking about actually going back and undoing something if you overlock down your",
    "start": "2233599",
    "end": "2238880"
  },
  {
    "text": "server this is a good place to start so I'm going go and say next and",
    "start": "2238880",
    "end": "2244560"
  },
  {
    "text": "finish this and hopefully the website's still alive and",
    "start": "2244560",
    "end": "2250400"
  },
  {
    "text": "working um so here's a different server that I'm using VMware for those of you who know what it is um this is what the",
    "start": "2250400",
    "end": "2257240"
  },
  {
    "text": "actual website looked like this is now post lockdown and we're going to go to the login",
    "start": "2257240",
    "end": "2264680"
  },
  {
    "text": "page anybody care to guess what the password was there all right well I overlocked",
    "start": "2268000",
    "end": "2274920"
  },
  {
    "text": "it so I'll I'll have to go back and look what I broke there um essentially that's I lockdown flying through and doing that",
    "start": "2274920",
    "end": "2282240"
  },
  {
    "text": "piece of it what was the other stuff we had the accounts and the extension remapping which I think is probably what I just broke there",
    "start": "2282240",
    "end": "2290760"
  },
  {
    "text": "um URL scan is going to put",
    "start": "2292480",
    "end": "2297400"
  },
  {
    "text": "it so we're talking about the logs here our URL scan. log which is underneath",
    "start": "2304119",
    "end": "2309440"
  },
  {
    "text": "open hack which is the root of our application directory how did that thing get 860k already this is uh actually the",
    "start": "2309440",
    "end": "2317040"
  },
  {
    "text": "backup image of what we submitted so this log actually has real files and real data in it from the actual",
    "start": "2317040",
    "end": "2323280"
  },
  {
    "text": "application uh submitted so URL scan logs are stored in right underneath the",
    "start": "2323280",
    "end": "2330240"
  },
  {
    "text": "root of the directory under logs and if we check out the actual application akles here",
    "start": "2330240",
    "end": "2337800"
  },
  {
    "text": "C I'm going crazy that way come",
    "start": "2341720",
    "end": "2348799"
  },
  {
    "text": "on so when you're talking about actually locking down permissions and access to these files it's just as simple as going",
    "start": "2349920",
    "end": "2357240"
  },
  {
    "text": "and running your NTFS permissions to actually lock them down",
    "start": "2357240",
    "end": "2363200"
  },
  {
    "text": "so we would re remove the everyone off it would just be",
    "start": "2363200",
    "end": "2369359"
  },
  {
    "text": "oh don't want to do",
    "start": "2370440",
    "end": "2374318"
  },
  {
    "text": "that demo hell day well now nobody can do anything with it but you're getting the idea basically you want to restrict",
    "start": "2378200",
    "end": "2384560"
  },
  {
    "text": "it down to minimum access the anous did yes yes I",
    "start": "2384560",
    "end": "2389839"
  },
  {
    "text": "did all right 10 years at Microsoft I can't use the gooey",
    "start": "2389839",
    "end": "2395680"
  },
  {
    "text": "so let that's pretty much yet why I had a copy up before I blew it",
    "start": "2395680",
    "end": "2404200"
  },
  {
    "text": "up there we",
    "start": "2405440",
    "end": "2408800"
  },
  {
    "text": "go so there's 87 I use that number all the time I don't know why",
    "start": "2412200",
    "end": "2417319"
  },
  {
    "text": "45 guides you can purchase download whatever to tell you how to lock down",
    "start": "2417319",
    "end": "2423680"
  },
  {
    "text": "Windows 2000 server Windows yeah Windows Server 2003 Windows 2000",
    "start": "2423680",
    "end": "2430480"
  },
  {
    "text": "whatever um you know you probably all got your favorites and that's cool what we're going to show you here today are",
    "start": "2430480",
    "end": "2436280"
  },
  {
    "text": "the few things that we did to the operating system to prep it for open tank um and it actually wasn't the whole",
    "start": "2436280",
    "end": "2444640"
  },
  {
    "text": "lot okay again update those service packs and security hot fixes first",
    "start": "2444640",
    "end": "2451720"
  },
  {
    "text": "um yeah I think it probably doesn't need saying but I'm going to say it anyway don't plug the thing in into the network",
    "start": "2451720",
    "end": "2457960"
  },
  {
    "text": "until you get service pack you know the service pack on there at least um disable unused OS services and then",
    "start": "2457960",
    "end": "2464680"
  },
  {
    "text": "there's a few registry based tightenings that we do and and I think that you know more than some of the other stuff",
    "start": "2464680",
    "end": "2470720"
  },
  {
    "text": "there's some really cool things you can do in the registry that many guides just fail to",
    "start": "2470720",
    "end": "2476640"
  },
  {
    "text": "include the Baseline template disabled all of these",
    "start": "2476640",
    "end": "2482520"
  },
  {
    "text": "services for the machines that we built for open hack",
    "start": "2482520",
    "end": "2488640"
  },
  {
    "text": "then we had to reenable a few things for some of the applications for example for",
    "start": "2489119",
    "end": "2495040"
  },
  {
    "text": "SQL Server um we went ahead and disabled the SQL Server agent but we brought lman",
    "start": "2495040",
    "end": "2500640"
  },
  {
    "text": "server down to manual uh disabled LM host on terminal server had no need for for any of that disabled landman server",
    "start": "2500640",
    "end": "2507760"
  },
  {
    "text": "on the web server um we had to reenable a few things on the VPN management",
    "start": "2507760",
    "end": "2513720"
  },
  {
    "text": "server of course we need to you know make a Remote Access VPN connection to that thing um and unfortunately",
    "start": "2513720",
    "end": "2519960"
  },
  {
    "text": "something's going to kill you when when you're trying to devise your own lockdown list is this uh this beautiful",
    "start": "2519960",
    "end": "2527480"
  },
  {
    "text": "service called remote registry things need remote registry that you don't",
    "start": "2527480",
    "end": "2532800"
  },
  {
    "text": "expect and VPN is one of them um finally then uh some registry",
    "start": "2532800",
    "end": "2540000"
  },
  {
    "text": "tweaks couple of these you've probably seen no LM hash this prevents the OS from storing LM hashes of the passwords",
    "start": "2540000",
    "end": "2548000"
  },
  {
    "text": "in Sam um so there's the uh location and",
    "start": "2548000",
    "end": "2553400"
  },
  {
    "text": "the registry for that note that this changes in XP and Server 2003 from a key",
    "start": "2553400",
    "end": "2559000"
  },
  {
    "text": "to a value uh no default exempt for IPC I'm",
    "start": "2559000",
    "end": "2564599"
  },
  {
    "text": "going to talk about that in a minute in a minute what we did with IPC",
    "start": "2564599",
    "end": "2570400"
  },
  {
    "text": "um one of the things that our IPC does is um we can use curos as the",
    "start": "2570400",
    "end": "2577960"
  },
  {
    "text": "authenticator between machines that want to establish a security Association well",
    "start": "2577960",
    "end": "2583319"
  },
  {
    "text": "if you're going to do that you need to allow that keros traffic to get between the two machines right so by default we",
    "start": "2583319",
    "end": "2590119"
  },
  {
    "text": "exempt keros from any IPC rule processing turns out that that creates a",
    "start": "2590119",
    "end": "2595640"
  },
  {
    "text": "vulnerability uh in some circumstances that you could maybe Source an attack from Port 88 into the into the",
    "start": "2595640",
    "end": "2602400"
  },
  {
    "text": "destination machine it's just going to get right past right um so we set no",
    "start": "2602400",
    "end": "2607880"
  },
  {
    "text": "default exempt to two so that means that keros and RSVP",
    "start": "2607880",
    "end": "2614559"
  },
  {
    "text": "traffic now are not Exempted from the rules but what's the side effect of that",
    "start": "2614559",
    "end": "2619800"
  },
  {
    "text": "you can't use Kerberos as the authentication mechanism between the two peers you need to use a either a",
    "start": "2619800",
    "end": "2626599"
  },
  {
    "text": "pre-shared key which is bad right or a certificate which is",
    "start": "2626599",
    "end": "2631760"
  },
  {
    "text": "good thing about pre-shared Keys is they're stored in the clear in the registry",
    "start": "2631760",
    "end": "2637280"
  },
  {
    "text": "and shared Secrets Don't remain secret for very long do",
    "start": "2637280",
    "end": "2642480"
  },
  {
    "text": "they um we disable IP Source routing in the registry so you just cannot get a",
    "start": "2643400",
    "end": "2650520"
  },
  {
    "text": "packet out of the box that has a route specified in the IP header right there's no reason today to do that you had two",
    "start": "2650520",
    "end": "2656640"
  },
  {
    "text": "15 years ago when routers sucked but now they're really good so this is always these days a sign of an",
    "start": "2656640",
    "end": "2663200"
  },
  {
    "text": "attack and then finally we turn on this one um quick pull how many of you know about Sin attack protect in the",
    "start": "2663200",
    "end": "2669559"
  },
  {
    "text": "registry okay good more than I was expecting um but essentially this limits",
    "start": "2669559",
    "end": "2676319"
  },
  {
    "text": "the amount of resources that the stack itself will use to process incoming sin",
    "start": "2676319",
    "end": "2682599"
  },
  {
    "text": "requests so that you can't sin flood the",
    "start": "2682599",
    "end": "2686640"
  },
  {
    "text": "thing okay we'll show you where these things live in the registry",
    "start": "2687760",
    "end": "2695960"
  },
  {
    "text": "all right so the four key ones he hit on were the Sy attack protect the disable IP Source routing the no default exempt",
    "start": "2698440",
    "end": "2704599"
  },
  {
    "text": "and the no LM hash um on the no LM",
    "start": "2704599",
    "end": "2710920"
  },
  {
    "text": "hash you're basically going to be looking in your hplm system current control set control",
    "start": "2710920",
    "end": "2716160"
  },
  {
    "text": "LSA and I got got ahead of myself and went down so we got the",
    "start": "2716160",
    "end": "2721880"
  },
  {
    "text": "control and down here's LSA and what you're doing is you're",
    "start": "2721880",
    "end": "2727000"
  },
  {
    "text": "you're going to create this registry key just as you would any other",
    "start": "2727000",
    "end": "2734799"
  },
  {
    "text": "ones if I can type so now this",
    "start": "2737680",
    "end": "2744640"
  },
  {
    "text": "point my my operating system is no longer going to store any user passwords in the Len hash format so when a user",
    "start": "2744640",
    "end": "2751680"
  },
  {
    "text": "goes to change his password this won't become a vulnerability for a password cracking",
    "start": "2751680",
    "end": "2757839"
  },
  {
    "text": "tool like PW dump um so that you can feed it into Loft crack you'll no longer be storing that that the LM hash version",
    "start": "2757839",
    "end": "2765599"
  },
  {
    "text": "of the password um in terms of Ip SEC um there's the no default exempt um that's",
    "start": "2765599",
    "end": "2772760"
  },
  {
    "text": "taken care of the curos we do it the same way actually going to I wanted to touch on",
    "start": "2772760",
    "end": "2777800"
  },
  {
    "text": "U uh the services piece that we actually lost over a little bit and I wanted to make sure we we got into that",
    "start": "2777800",
    "end": "2784839"
  },
  {
    "text": "um and for the IP you would enter the same Keys uh note that if you running",
    "start": "2784839",
    "end": "2790480"
  },
  {
    "text": "Windows XP versions or you're running Windows 2000 safest way to do it is to put a key and a value if you're doing",
    "start": "2790480",
    "end": "2797640"
  },
  {
    "text": "this via script which is a very common way of doing it that way regardless of the type of operating system you're running on you will be U configured so",
    "start": "2797640",
    "end": "2806079"
  },
  {
    "text": "that the IPC is running the way you want it to and you're not thinking it's running one way and it's actually",
    "start": "2806079",
    "end": "2811359"
  },
  {
    "text": "not uh I brought up here the uh the tools that we use to generate the uh",
    "start": "2811359",
    "end": "2817599"
  },
  {
    "text": "services on the box and manage the uh allowed uh services to be running",
    "start": "2817599",
    "end": "2824319"
  },
  {
    "text": "so what we're doing here is limiting the footprint of the services that are listening once we go in and actually disable some of these Services take take",
    "start": "2824319",
    "end": "2831800"
  },
  {
    "text": "a lurer for example we had no use for it so we would actually go about stopping it setting it to",
    "start": "2831800",
    "end": "2838559"
  },
  {
    "text": "disabled so I'll stop the service I'll set it to disabled",
    "start": "2839920",
    "end": "2846680"
  },
  {
    "text": "and I go about doing this for all the or all the services that I don't want running on the system issue you run into",
    "start": "2847680",
    "end": "2854200"
  },
  {
    "text": "is this doesn't scale very well so we're going to go back and use a tool that you might not have seen before which is",
    "start": "2854200",
    "end": "2860000"
  },
  {
    "text": "security configuration analysis SL window over a little bit oh too far off there you go sorry about that um",
    "start": "2860000",
    "end": "2869520"
  },
  {
    "text": "security configuration analysis will let us take a Baseline and create a new database of uh options that are set on a",
    "start": "2869520",
    "end": "2876599"
  },
  {
    "text": "spefic specific box so who here has used this before okay good number here",
    "start": "2876599",
    "end": "2883960"
  },
  {
    "text": "okay all",
    "start": "2901359",
    "end": "2905359"
  },
  {
    "text": "might just skip off of this I'm having fun with these boxes today yeah they're not acting very good are you man demo",
    "start": "2919079",
    "end": "2925480"
  },
  {
    "text": "hell day um what you would do with the tool is you would just take a snapshot of the box it would do a Baseline and",
    "start": "2925480",
    "end": "2933480"
  },
  {
    "text": "then you can take that same Baseline and apply to the the systems that are in your installation so in our case we set",
    "start": "2933480",
    "end": "2939359"
  },
  {
    "text": "up a baseline with all alerter turned off messenger turned off and various other service dis Services disabled",
    "start": "2939359",
    "end": "2944559"
  },
  {
    "text": "created a template called Baseline and then applied that to all the separate systems it provides you with a way to",
    "start": "2944559",
    "end": "2951000"
  },
  {
    "text": "roll back too if you lock down something too hard you can easily go back to a previous setting um note that that's not",
    "start": "2951000",
    "end": "2957640"
  },
  {
    "text": "an automatic thing so what you really need to do in order to take advantage of this roll back feature is create a",
    "start": "2957640",
    "end": "2964680"
  },
  {
    "text": "template of the computer now right save that and then apply your changes and if that did if you didn't like what those",
    "start": "2964680",
    "end": "2971240"
  },
  {
    "text": "changes did then you go back to the previous template um the other thing that that tool can do for you is the",
    "start": "2971240",
    "end": "2977160"
  },
  {
    "text": "analysis side and you can just pick a computer right run the template against",
    "start": "2977160",
    "end": "2982240"
  },
  {
    "text": "the computer it doesn't actually make changes but it will highlight the differences between what's in the file",
    "start": "2982240",
    "end": "2987720"
  },
  {
    "text": "and the way the computer is configured right",
    "start": "2987720",
    "end": "2991720"
  },
  {
    "text": "now um I I like polls I you know I love asking questions because I want to see",
    "start": "2993160",
    "end": "2998480"
  },
  {
    "text": "how many people are using things who here has used the IP SEC",
    "start": "2998480",
    "end": "3004799"
  },
  {
    "text": "engine in Windows 2000 as just a basic packet filter for blocking and allowing things okay um I like this a lot so much",
    "start": "3004799",
    "end": "3014920"
  },
  {
    "text": "so that I wrote an article and put it on techet about how to do that um remember",
    "start": "3014920",
    "end": "3020240"
  },
  {
    "text": "what I said at the beginning we didn't have any firewalls here so something you",
    "start": "3020240",
    "end": "3025400"
  },
  {
    "text": "can do in a situation where you might not have firewalls or where you want to have more control over what's coming",
    "start": "3025400",
    "end": "3031880"
  },
  {
    "text": "into the individual box because maybe the firewall policy is too uh",
    "start": "3031880",
    "end": "3037040"
  },
  {
    "text": "loose is you can you can use this engine as a really great packet filter to just",
    "start": "3037040",
    "end": "3042960"
  },
  {
    "text": "a lower block traffic that matches specifications you know what's the port number and where's it coming from that",
    "start": "3042960",
    "end": "3048640"
  },
  {
    "text": "kind of thing so we do that a little bit here but we take it even farther and we",
    "start": "3048640",
    "end": "3055280"
  },
  {
    "text": "actually establish security security associations between the computers here",
    "start": "3055280",
    "end": "3060720"
  },
  {
    "text": "why would you want to do something like that well um you know you've all seen and",
    "start": "3060720",
    "end": "3066799"
  },
  {
    "text": "probably even built various kinds of man-in-the middle attacks right that involve address spoofing and pretending",
    "start": "3066799",
    "end": "3072799"
  },
  {
    "text": "to be somebody that you aren't the nice thing about IP SEC and",
    "start": "3072799",
    "end": "3078799"
  },
  {
    "text": "especially if you use certificates as the authenticator because then you don't have to worry about having the machines",
    "start": "3078799",
    "end": "3084400"
  },
  {
    "text": "in the same forest or whatever you eliminate the conditions under which",
    "start": "3084400",
    "end": "3089520"
  },
  {
    "text": "those kinds of man the midle attacks can happen these two machines have got to",
    "start": "3089520",
    "end": "3094760"
  },
  {
    "text": "have a certificate in common I don't mean the same certificate they've got to have the certificates need to have been",
    "start": "3094760",
    "end": "3100839"
  },
  {
    "text": "signed by the same certificate Authority because you pick the certificate Authority in the UI not the certificate",
    "start": "3100839",
    "end": "3107119"
  },
  {
    "text": "itself the engine selects the certificate and because pki trust is all",
    "start": "3107119",
    "end": "3113319"
  },
  {
    "text": "within you know the certificate issuance process the assumption is that if machine a and",
    "start": "3113319",
    "end": "3119319"
  },
  {
    "text": "machine B both have computer Sears that have been generated by the same CA or",
    "start": "3119319",
    "end": "3125000"
  },
  {
    "text": "been signed by the same CA then hey these two machines should be able to trust each other so we set up a security",
    "start": "3125000",
    "end": "3132200"
  },
  {
    "text": "association between the two and and now every packet that leaves especially if",
    "start": "3132200",
    "end": "3137359"
  },
  {
    "text": "you just use IPC ah right every packet that comes out of that computer is",
    "start": "3137359",
    "end": "3143640"
  },
  {
    "text": "signed so if there's some other computer that says hey the only thing I'm going to accept is IPC",
    "start": "3143640",
    "end": "3151480"
  },
  {
    "text": "traffic then the only thing it's going to accept is that signed traffic",
    "start": "3151480",
    "end": "3156920"
  },
  {
    "text": "right something that we can't do with Windows 2000 is enforce domain",
    "start": "3156920",
    "end": "3163359"
  },
  {
    "text": "membership how many of you think that might be a great idea would you love it if every machine that plugged into the land on your network belonged to the",
    "start": "3163359",
    "end": "3170839"
  },
  {
    "text": "domain none of you some of you okay raise your hand really high if you think",
    "start": "3170839",
    "end": "3175920"
  },
  {
    "text": "that's a good idea idea raise your hand really high if you think it's a lousy idea okay this is interesting why do you",
    "start": "3175920",
    "end": "3182920"
  },
  {
    "text": "think it's a bad idea I'm really curious why why do you not want every machine to be a member of your corporate",
    "start": "3182920",
    "end": "3189200"
  },
  {
    "text": "domain okay so I'm talking corporate clients right not",
    "start": "3194839",
    "end": "3201240"
  },
  {
    "text": "servers different areas right in the group",
    "start": "3202000",
    "end": "3207200"
  },
  {
    "text": "okay so you segregate to 87 domains right but you want them to be a member of some",
    "start": "3207839",
    "end": "3214480"
  },
  {
    "text": "domain right right well that's why we partition with domains right maybe even forests if",
    "start": "3215200",
    "end": "3221960"
  },
  {
    "text": "you're really going to get paranoid about things but something that I think is really important is that that you",
    "start": "3221960",
    "end": "3228680"
  },
  {
    "text": "establish it as a standard that all client computers in your organization belong to some domain somewhere right",
    "start": "3228680",
    "end": "3234160"
  },
  {
    "text": "because that way you can start to enforce certain kinds of policies I'm not talking here about preventing people",
    "start": "3234160",
    "end": "3239520"
  },
  {
    "text": "from changing their backgrounds right if they want a purple background let them have a purple background it it",
    "start": "3239520",
    "end": "3245680"
  },
  {
    "text": "doesn't matter but you may not want people to change their password policy on their local machine right you might",
    "start": "3245680",
    "end": "3253359"
  },
  {
    "text": "want to enforce some kind of a strong password even on the local administrator account you can do these kinds of things",
    "start": "3253359",
    "end": "3259799"
  },
  {
    "text": "if you enforce domain membership but we can't do it right you could take a computer that doesn't belong to the",
    "start": "3259799",
    "end": "3265160"
  },
  {
    "text": "domain plug it into a land socket try to access a network resource and what happens you get a little dialog box that",
    "start": "3265160",
    "end": "3271960"
  },
  {
    "text": "asks you for your credentials right what do we do in XP we give you this thing called a keying that makes it even easier so it memorizes",
    "start": "3271960",
    "end": "3279319"
  },
  {
    "text": "them well what if you established IPC ah",
    "start": "3279319",
    "end": "3284960"
  },
  {
    "text": "everywhere in your network and you said if if all of your servers had an IPC ah policy I'm not",
    "start": "3284960",
    "end": "3292960"
  },
  {
    "text": "going to let you talk to me unless you can establish IPC ah furthermore the only way we're going to",
    "start": "3292960",
    "end": "3298880"
  },
  {
    "text": "establish IPC ah is with curro right so now you're not a domain member",
    "start": "3298880",
    "end": "3306079"
  },
  {
    "text": "that means you don't get the IP set Group Policy you try to talk to this server the server says got a set up IPC",
    "start": "3306079",
    "end": "3312960"
  },
  {
    "text": "you can't set up IPC because you're not a domain member right very very nice it",
    "start": "3312960",
    "end": "3318760"
  },
  {
    "text": "works very very well you have to join the domain in order to talk to the servers so you can you can put all the",
    "start": "3318760",
    "end": "3325880"
  },
  {
    "text": "traffic on the land you want but if every machine in your organization required IP ah and this traffic injector",
    "start": "3325880",
    "end": "3333319"
  },
  {
    "text": "wasn't doing that all that garbage is going to get ignored I I think this is",
    "start": "3333319",
    "end": "3339200"
  },
  {
    "text": "pretty cool we're starting to deploy this inside Microsoft and I'm seeing customers do it now too I think it's I",
    "start": "3339200",
    "end": "3346079"
  },
  {
    "text": "think it's really neat thing in the environment here we're",
    "start": "3346079",
    "end": "3351799"
  },
  {
    "text": "taking that even farther and not only are we using ah between certain things but we're also using ESP which is what",
    "start": "3351799",
    "end": "3357640"
  },
  {
    "text": "everybody thinks about when they hear IPC right you think about encryption you forget about this cool thing you can do",
    "start": "3357640",
    "end": "3363440"
  },
  {
    "text": "with ah before you can establish your IPC",
    "start": "3363440",
    "end": "3368960"
  },
  {
    "text": "policy though you need to you need to figure out what is the traffic what's going on what are my requirements",
    "start": "3368960",
    "end": "3375319"
  },
  {
    "text": "between all of these things so what do we have going on here we have the web server talking to SQL Server we have the",
    "start": "3375319",
    "end": "3382200"
  },
  {
    "text": "Raz server talking to the management net over l2tp but then that's carried inside IPC right so that's kind of already",
    "start": "3382200",
    "end": "3389240"
  },
  {
    "text": "happening the management server wants to talk to clients for terminal services and and file sharing right these are the",
    "start": "3389240",
    "end": "3396119"
  },
  {
    "text": "the managers um the management server wants to talk to everything in the environment over the private Network and",
    "start": "3396119",
    "end": "3402680"
  },
  {
    "text": "then all the servers need to talk to the management server for file shares and we'll explain why we are doing some file sharing in a bit it was a requirement of",
    "start": "3402680",
    "end": "3411680"
  },
  {
    "text": "contest so we use in this case digital certificates for all for authenticator",
    "start": "3412079",
    "end": "3418440"
  },
  {
    "text": "between all of the computers um because our machines don't belong to the domain here so we can't use keros for that",
    "start": "3418440",
    "end": "3425000"
  },
  {
    "text": "purpose another thing to remember once you establish or once you enroll all of",
    "start": "3425000",
    "end": "3430319"
  },
  {
    "text": "the computers for computer certificates you don't need the ca anymore so take it",
    "start": "3430319",
    "end": "3437400"
  },
  {
    "text": "away right stick it in a vault somewhere or something if you feel like you might need to regenerate certificates later",
    "start": "3437400",
    "end": "3443960"
  },
  {
    "text": "but you don't need that thing online between all computers we are signing the",
    "start": "3443960",
    "end": "3451359"
  },
  {
    "text": "traffic so you know at least IPC a everywhere and I talked about one reason",
    "start": "3451359",
    "end": "3457440"
  },
  {
    "text": "why you might want to do that abstractly we're talking about machine to machine authentication here you know who your",
    "start": "3457440",
    "end": "3462960"
  },
  {
    "text": "users are right let's start building a system where the computers themselves know each",
    "start": "3462960",
    "end": "3468160"
  },
  {
    "text": "other then it's also protects Integrity um there is some traffic that we are",
    "start": "3468160",
    "end": "3474680"
  },
  {
    "text": "encrypting right any to or from the management server we want to encrypt we",
    "start": "3474680",
    "end": "3480319"
  },
  {
    "text": "want to protect the confidentiality of that information what's",
    "start": "3480319",
    "end": "3488119"
  },
  {
    "text": "that oh okay sorry that's a typo um yeah that's that should be three",
    "start": "3488880",
    "end": "3495400"
  },
  {
    "text": "days I got ahead of myself in reading my notes hey man we this was originally not",
    "start": "3495400",
    "end": "3502200"
  },
  {
    "text": "scheduled right I found out three days ago we were going to have to do this session so it was uh kind of like a last minute thing but I'm glad we're able to",
    "start": "3502200",
    "end": "3508520"
  },
  {
    "text": "talk to you about it because I think it's pretty cool so what did we do to start building",
    "start": "3508520",
    "end": "3514359"
  },
  {
    "text": "the policies well initially we said you know we're going to take the firewall rule set right nothing in block it all",
    "start": "3514359",
    "end": "3523039"
  },
  {
    "text": "and then start to loosen stuff a little bit at a time so between the web server and the SQL Server we're using our",
    "start": "3523039",
    "end": "3530760"
  },
  {
    "text": "filter action called authenticate and sign so this is IPC ah but between the management server and",
    "start": "3530760",
    "end": "3537599"
  },
  {
    "text": "everything in both directions right we're using our policy called",
    "start": "3537599",
    "end": "3542640"
  },
  {
    "text": "authenticate sign and encrypt so here we've got ESP and",
    "start": "3542640",
    "end": "3547839"
  },
  {
    "text": "ah now I want to say something here um you can not use ESP only for",
    "start": "3547839",
    "end": "3553599"
  },
  {
    "text": "this purpose if you use ESP only you get authenticate and encrypt and a",
    "start": "3553599",
    "end": "3560599"
  },
  {
    "text": "little bit of signing but not a lot of signing ah creates its Integrity check some over",
    "start": "3560599",
    "end": "3567640"
  },
  {
    "text": "the whole packet including this the header the IP header ESP doesn't do that the Integrity",
    "start": "3567640",
    "end": "3575280"
  },
  {
    "text": "check sum for ESP starts at the next protocol and goes to the end of the packet the IP header is not",
    "start": "3575280",
    "end": "3580799"
  },
  {
    "text": "authenticated in ESP only so I you know I'm a big fan of authenticated",
    "start": "3580799",
    "end": "3587359"
  },
  {
    "text": "communication so I would actually never in production build an environment that ESP only if I'm concerned about",
    "start": "3587359",
    "end": "3594920"
  },
  {
    "text": "confidentiality I'll use ESP plus ah because I want to get that Integrity across the entire",
    "start": "3594920",
    "end": "3601960"
  },
  {
    "text": "packet but then access from the internet to the web servers this is where we use one of",
    "start": "3601960",
    "end": "3608000"
  },
  {
    "text": "these packet filters right we're going to permit traffic to destination Port 80 but just silently drop everything",
    "start": "3608000",
    "end": "3616839"
  },
  {
    "text": "else it kind of helps if you make a picture when you're going to do all of this um so that just following the",
    "start": "3617119",
    "end": "3624599"
  },
  {
    "text": "picture here uh will help you when you're writing your own policies that",
    "start": "3624599",
    "end": "3630240"
  },
  {
    "text": "you know this way you won't eliminate something that might be very",
    "start": "3630240",
    "end": "3635799"
  },
  {
    "text": "important um you want to show the UI yeah okay so when you're looking at the",
    "start": "3636079",
    "end": "3642720"
  },
  {
    "text": "IPC UI there's a couple things to keep in",
    "start": "3642720",
    "end": "3649119"
  },
  {
    "text": "mind now he mentioned that uh you could use a pre-shared key to to help negotiate between uh two systems so they",
    "start": "3649119",
    "end": "3655359"
  },
  {
    "text": "could SA I sex session problem with that is as we discussed we're assuming that we're going to lose like the web server",
    "start": "3655359",
    "end": "3661000"
  },
  {
    "text": "as part of the competition and the main goal was to get at the database so a pre-shared key was kind of out of the question once you've gained",
    "start": "3661000",
    "end": "3667079"
  },
  {
    "text": "administrative rights to the web server which actually never happened but we assumed it would um you would be able to",
    "start": "3667079",
    "end": "3672400"
  },
  {
    "text": "figure out what that pre-shared key was and then be able to negotiate IPC session all the way to the backend server so that wasn't that wasn't doable",
    "start": "3672400",
    "end": "3678760"
  },
  {
    "text": "so what we have here is um the IPC uh policy for the in this case the VPN",
    "start": "3678760",
    "end": "3686079"
  },
  {
    "text": "server um and in order to be able to use a certificate and the advantage to that",
    "start": "3686079",
    "end": "3691680"
  },
  {
    "text": "is without having a certificate generated by the CA and with the private key on your box you you can't",
    "start": "3691680",
    "end": "3698520"
  },
  {
    "text": "communicate you you don't have any means of authenticating with the remote system",
    "start": "3698520",
    "end": "3703960"
  },
  {
    "text": "so under the open uh Under The Trusted certificate store on the local machine",
    "start": "3703960",
    "end": "3709440"
  },
  {
    "text": "we added the uh public key for the open hat competition basically so that it knows it can figure out if somebody's",
    "start": "3709440",
    "end": "3714960"
  },
  {
    "text": "really been authenticate or their certificate really came from that certificate Authority um and on the",
    "start": "3714960",
    "end": "3720839"
  },
  {
    "text": "other side under the personal certificates we created a certificate for each system in this case we just",
    "start": "3720839",
    "end": "3726599"
  },
  {
    "text": "named it after the Box uh which also had the private key and this allows him to you know begin that that uh negotiation",
    "start": "3726599",
    "end": "3734160"
  },
  {
    "text": "to establish the IP SE crypted tunnels now to take advantage of that",
    "start": "3734160",
    "end": "3739480"
  },
  {
    "text": "now that it's all the certificates are imported and set up um we created a",
    "start": "3739480",
    "end": "3744839"
  },
  {
    "text": "policy on the system so in this case it's got a default response just uh as you would if you just created a generic",
    "start": "3744839",
    "end": "3751000"
  },
  {
    "text": "blank policy if we add a rule to it it's going to say we're shoot man need two",
    "start": "3751000",
    "end": "3758680"
  },
  {
    "text": "screens um you saw in the picture that we had the relationship set up between the systems you know what port what IP",
    "start": "3758680",
    "end": "3764240"
  },
  {
    "text": "address uh was then put into these rules um every system then had a set of rules that mirrored the other box it was",
    "start": "3764240",
    "end": "3770799"
  },
  {
    "text": "communicating with what you wound up with then was a uh set of",
    "start": "3770799",
    "end": "3776440"
  },
  {
    "text": "rules and I'm going to bring this up here that authenticate using a specific method in this case we're going to say",
    "start": "3776440",
    "end": "3782359"
  },
  {
    "text": "use a certificate from our certificate",
    "start": "3782359",
    "end": "3787038"
  },
  {
    "text": "Authority and I'm going to create another filter this is basically a filter that just is saying IP traffic",
    "start": "3788599",
    "end": "3794760"
  },
  {
    "text": "wise what is it what kind of traffic am I looking for so I'm going to say add a",
    "start": "3794760",
    "end": "3800759"
  },
  {
    "text": "filter um I'm going to say from a specific IP address",
    "start": "3800839",
    "end": "3806599"
  },
  {
    "text": "in our case we had a really small implementation so this system's IP address is my notes",
    "start": "3806599",
    "end": "3814640"
  },
  {
    "text": "Here darn",
    "start": "3815400",
    "end": "3818599"
  },
  {
    "text": "it this says from the private Network link on the VPN server",
    "start": "3825160",
    "end": "3832160"
  },
  {
    "text": "to the private Network or the the terminal server and if you saw the",
    "start": "3832160",
    "end": "3838480"
  },
  {
    "text": "drawing again this would make sense but unfortunately we don't have that up I want to allow I want to allow the",
    "start": "3838480",
    "end": "3846480"
  },
  {
    "text": "VPN server to be",
    "start": "3846480",
    "end": "3851279"
  },
  {
    "text": "managed on Port 3389 this basically is going to allow that management server to TS to this box",
    "start": "3852160",
    "end": "3859520"
  },
  {
    "text": "on the management server there's a a rule that actually mirrors this that",
    "start": "3859520",
    "end": "3864640"
  },
  {
    "text": "then allows it to connect to the VPN server to manage it and modify uh the settings on",
    "start": "3864640",
    "end": "3871599"
  },
  {
    "text": "it that's basically how the rule Works in terms of setting up the policies in",
    "start": "3871799",
    "end": "3878520"
  },
  {
    "text": "terms of what it's doing as part of the rule we're talking about the hashing we're talking about the encryption",
    "start": "3878520",
    "end": "3885318"
  },
  {
    "text": "um I'll create an action called encrypt and",
    "start": "3885359",
    "end": "3890440"
  },
  {
    "text": "sign I'm going to tell it to negotiate security now this is where we also set up the default and I rule so you create a",
    "start": "3893279",
    "end": "3899079"
  },
  {
    "text": "separate rule that just says just block but here we're going to say negotiate security say Do not communicate with a",
    "start": "3899079",
    "end": "3905480"
  },
  {
    "text": "computer that doesn't support IPC I'm going to do a custom setting just so you can see the options you have so data",
    "start": "3905480",
    "end": "3912599"
  },
  {
    "text": "Integrity we use sh one and for",
    "start": "3912599",
    "end": "3917880"
  },
  {
    "text": "the the encryption there's triple de there and this is the error he pointed out a moment moment ago a couple things",
    "start": "3917880",
    "end": "3925319"
  },
  {
    "text": "to remember the defaults in Windows 2000 are md5 and single de here in XP and",
    "start": "3925319",
    "end": "3931319"
  },
  {
    "text": "Server 2003 the defaults are sha1 and triple Dez so um this uh actually blew",
    "start": "3931319",
    "end": "3938440"
  },
  {
    "text": "up in my face in a demo one time and I didn't realize we had changed the",
    "start": "3938440",
    "end": "3944160"
  },
  {
    "text": "defaults so now that I've created that encrypt and sign I'm saying that's the action I want taken for any traffic that",
    "start": "3946799",
    "end": "3952000"
  },
  {
    "text": "matches that uh IP and Port pair and now I have a rule that handles that",
    "start": "3952000",
    "end": "3958200"
  },
  {
    "text": "IP filter list and we went through and did that for all the ports that were being used between the systems and then",
    "start": "3958200",
    "end": "3963240"
  },
  {
    "text": "we propagated those rules across the systems so in the case that you lost the web server the SQL Server wouldn't talk",
    "start": "3963240",
    "end": "3968440"
  },
  {
    "text": "to the web server because it didn't have a set of rules that would allow that traffic to come in so it's protected on",
    "start": "3968440",
    "end": "3973839"
  },
  {
    "text": "both sides that's yeah I took it out",
    "start": "3973839",
    "end": "3983920"
  },
  {
    "text": "one of the requirements of the contest was to have some kind of Remote",
    "start": "3988920",
    "end": "3995559"
  },
  {
    "text": "Management ability and specifically is that this",
    "start": "3995559",
    "end": "4002520"
  },
  {
    "text": "Remote Management ability needs to provide a way to update the content",
    "start": "4002520",
    "end": "4007799"
  },
  {
    "text": "during the contest so our solution for this is to",
    "start": "4007799",
    "end": "4013279"
  },
  {
    "text": "configure a system in which administrators over an l2tp ipvpn connect to a Central",
    "start": "4013279",
    "end": "4019799"
  },
  {
    "text": "terminal server and then from there they would Branch out to other machines nesting terminal server um also some",
    "start": "4019799",
    "end": "4026839"
  },
  {
    "text": "restricted file shares for uploading and downloading the content so to begin with is this Remote Access VPN um just a",
    "start": "4026839",
    "end": "4036160"
  },
  {
    "text": "review right l2tp is the tunnel it has no security you need to",
    "start": "4036160",
    "end": "4042839"
  },
  {
    "text": "put that inside something to secure it so we're sticking that that inside IPC on The Wire outside of the windows boxes",
    "start": "4042839",
    "end": "4050400"
  },
  {
    "text": "this is IPC traffic this you don't see l2tp on the wire all right it's l2tp",
    "start": "4050400",
    "end": "4056960"
  },
  {
    "text": "once it comes into the box and goes through the stack and goes through IP secc and gets reinjected back into the",
    "start": "4056960",
    "end": "4063079"
  },
  {
    "text": "stack then it's l2tp so this is kind of an interesting thing right let's say you had a firewall",
    "start": "4063079",
    "end": "4069640"
  },
  {
    "text": "in front of this that firewall would have to allow IP SEC but then let's say",
    "start": "4069640",
    "end": "4075200"
  },
  {
    "text": "in inside RZ you wanted to write packet filters the RZ packet filters are not IPC it's",
    "start": "4075200",
    "end": "4082319"
  },
  {
    "text": "l2tp again the traffic comes in his IPC goes to the IPC engine down to the IP stack gets decrypted reinjected into the",
    "start": "4082319",
    "end": "4088880"
  },
  {
    "text": "stack it's l2tp and then it comes back down into RZ finally so what does the remote",
    "start": "4088880",
    "end": "4095400"
  },
  {
    "text": "administrator need you need a computer certificate signed by an authority that",
    "start": "4095400",
    "end": "4100600"
  },
  {
    "text": "the RZ also trusts um and then you need remote access credentials okay so what's going",
    "start": "4100600",
    "end": "4107679"
  },
  {
    "text": "on here IPC is providing the machine essentially the machine to machine",
    "start": "4107679",
    "end": "4113520"
  },
  {
    "text": "authentication right but IPC is missing a crucial component of VPN is the",
    "start": "4113520",
    "end": "4119838"
  },
  {
    "text": "ability to authenticate people IPC doesn't know anything about people it's all about computers right so that's what",
    "start": "4119839",
    "end": "4125758"
  },
  {
    "text": "l2tp is doing it's authenticating the user and also providing a tunnel endpoint",
    "start": "4125759",
    "end": "4131960"
  },
  {
    "text": "address um make sure that the computer certific ific is non-exportable right that was one of the",
    "start": "4131960",
    "end": "4138758"
  },
  {
    "text": "one of the things that we wanted to do was limit the computers from which Administration could occur so when the",
    "start": "4138759",
    "end": "4146600"
  },
  {
    "text": "administration workstation gets its machine certificate can't export the private key from that um and then by",
    "start": "4146600",
    "end": "4154520"
  },
  {
    "text": "having a user account requirement right we also know who who the person is so we both know where they're coming from and who they",
    "start": "4154520",
    "end": "4160838"
  },
  {
    "text": "are um again no domain so we had to have individ ual accounts on each machine for",
    "start": "4160839",
    "end": "4167600"
  },
  {
    "text": "the users uh we'll talk about passwords a little bit later yes there is the token password slide in the presentation",
    "start": "4167600",
    "end": "4173838"
  },
  {
    "text": "today um so you can only terminal service into the open hack terminal server and then from there you can",
    "start": "4173839",
    "end": "4182040"
  },
  {
    "text": "terminal service to another machine right to the IIs box or to the SQL box or whatever now yes terminal server",
    "start": "4182040",
    "end": "4188640"
  },
  {
    "text": "traffic is already encrypted but we just didn't want to allow you know that 3389",
    "start": "4188640",
    "end": "4194040"
  },
  {
    "text": "to sit out there open for people to just Hammer against right even though I don't think they would have successfully done",
    "start": "4194040",
    "end": "4200480"
  },
  {
    "text": "anything um we're going to carry this up inside a VPN so that you have to authenticate yourself even before we",
    "start": "4200480",
    "end": "4206800"
  },
  {
    "text": "bring the terminal server session up um needed a couple file shares to",
    "start": "4206800",
    "end": "4212520"
  },
  {
    "text": "satisfy conditions of the contest the inbox share was set up to be right only",
    "start": "4212520",
    "end": "4218560"
  },
  {
    "text": "and this is where administrators would drop off new or modified content then we had an outbox share that was readon",
    "start": "4218560",
    "end": "4225679"
  },
  {
    "text": "where administrators could retrieve um you know files for analysis or",
    "start": "4225679",
    "end": "4230760"
  },
  {
    "text": "whatever so there's a picture of the physical Network um sorry you guys don't",
    "start": "4230760",
    "end": "4236280"
  },
  {
    "text": "have any of this in the book like I said we just got the slides to Black Cat people yesterday um if you if you do",
    "start": "4236280",
    "end": "4243159"
  },
  {
    "text": "want a copy of these slides I'd be more than happy to provide you with that uh",
    "start": "4243159",
    "end": "4248199"
  },
  {
    "text": "come up and give me your business card and then I'll just you know take the collection of cards and email the slides",
    "start": "4248199",
    "end": "4253880"
  },
  {
    "text": "out a couple days from now then the last component of course is the",
    "start": "4253880",
    "end": "4260000"
  },
  {
    "text": "database itself right this is uh what the attackers are really trying to go after you know we spend so much time",
    "start": "4260000",
    "end": "4266679"
  },
  {
    "text": "worrying about encrypting data in flight but when was the last time you read a magazine article about somebody",
    "start": "4266679",
    "end": "4272080"
  },
  {
    "text": "successfully stealing One Visa number in the internet you never have right what do",
    "start": "4272080",
    "end": "4278480"
  },
  {
    "text": "they do instead they're going after the SQL servers that have 100,000 Visa numbers in them right that's where the",
    "start": "4278480",
    "end": "4284640"
  },
  {
    "text": "interesting startu is but yet nobody talks about protecting data stores they worry about encrypting",
    "start": "4284640",
    "end": "4291000"
  },
  {
    "text": "their ebil I don't know why so it's all about reducing the surface area",
    "start": "4291000",
    "end": "4297400"
  },
  {
    "text": "available to an attacker to try to break in over so there a number of things we",
    "start": "4297400",
    "end": "4303520"
  },
  {
    "text": "do on SQL Server to reduce that surface area um again you know what Service Pack",
    "start": "4303520",
    "end": "4310159"
  },
  {
    "text": "2 the latest hot the security patches how many of you have ever tried to to install a SQL Server security",
    "start": "4310159",
    "end": "4317040"
  },
  {
    "text": "patch awesome it's awesome okay these things deserve their",
    "start": "4317040",
    "end": "4322920"
  },
  {
    "text": "own special hell and I am so glad to see that we are now finally wrapping",
    "start": "4322920",
    "end": "4328320"
  },
  {
    "text": "installer around these things right I mean it's just it needed to be done we're finally doing it um now you know",
    "start": "4328320",
    "end": "4335920"
  },
  {
    "text": "what now you're going to be encouraged to go do it right because it's just a click here and it's not a x copy dll and",
    "start": "4335920",
    "end": "4341880"
  },
  {
    "text": "hope you didn't typo what do we omitting a number of things we're omitting during the install",
    "start": "4341880",
    "end": "4349639"
  },
  {
    "text": "right we don't need them this is Dev stuff you don't need these things in a production environment we're disabling",
    "start": "4349639",
    "end": "4355000"
  },
  {
    "text": "the the distributed transaction coordinator there are no transactions going on here okay a most SQL Server",
    "start": "4355000",
    "end": "4361800"
  },
  {
    "text": "installations don't need this thing but people leave it on disabling the agent",
    "start": "4361800",
    "end": "4367120"
  },
  {
    "text": "and search um couple other things on the SQL Server we are modifying the local",
    "start": "4367120",
    "end": "4374520"
  },
  {
    "text": "security policy so that the only authentication request it receives",
    "start": "4374520",
    "end": "4380719"
  },
  {
    "text": "is an ntlmv2 challenge that's it nothing else um and then we configure SQL server",
    "start": "4380719",
    "end": "4387080"
  },
  {
    "text": "for Windows authentication only right uh that way you know we talked about this before we don't have to store these IDs",
    "start": "4387080",
    "end": "4393239"
  },
  {
    "text": "and passwords in some file somewhere nevertheless you do want to set a password on sa right in case the",
    "start": "4393239",
    "end": "4400760"
  },
  {
    "text": "authentication method is accidentally changed um we set the aut level to failure so that we've got some forensic",
    "start": "4400760",
    "end": "4408199"
  },
  {
    "text": "evidence if if people are trying to you know hack some login against this thing um but you know I guess maybe this is",
    "start": "4408199",
    "end": "4415440"
  },
  {
    "text": "where I would have perhaps deviated a little bit from what we ultimately built let's say somebody does guess a",
    "start": "4415440",
    "end": "4422520"
  },
  {
    "text": "password how do you know if you don't log success right so my personal",
    "start": "4422520",
    "end": "4428880"
  },
  {
    "text": "preference would have been to log success and failure um what about the SQL Server",
    "start": "4428880",
    "end": "4436520"
  },
  {
    "text": "service account right SQL Server runs by default as what local system it has too",
    "start": "4436520",
    "end": "4442520"
  },
  {
    "text": "many privileges for our purpose here so we create a local account that we run",
    "start": "4442520",
    "end": "4449199"
  },
  {
    "text": "SQL Server under give it a strong password that the user can't change and specifically disallow terminal server",
    "start": "4449199",
    "end": "4455840"
  },
  {
    "text": "access to this thing you can use a domain user account here if the SQL Server service for some",
    "start": "4455840",
    "end": "4462520"
  },
  {
    "text": "reason had to perform network activity but for for the purposes of our of our",
    "start": "4462520",
    "end": "4467679"
  },
  {
    "text": "Network we or of our um application here the SQL Server service did not require network access so we use a local account",
    "start": "4467679",
    "end": "4474080"
  },
  {
    "text": "for that um just a couple others that uh you know don't make sense to put on a slide",
    "start": "4474080",
    "end": "4480360"
  },
  {
    "text": "by themselves um you want to take off all of the protocols except name pipes",
    "start": "4480360",
    "end": "4486400"
  },
  {
    "text": "okay um I mean except TCP IP because we don't need named pipes for this case and",
    "start": "4486400",
    "end": "4491719"
  },
  {
    "text": "then this is more of a uh of a liability thing is that we go into the services",
    "start": "4491719",
    "end": "4497600"
  },
  {
    "text": "control panel and tell SQL Server to restart if it failed for some reason",
    "start": "4497600",
    "end": "4504360"
  },
  {
    "text": "question yeah",
    "start": "4505639",
    "end": "4511280"
  },
  {
    "text": "yeah it's just a generic user account",
    "start": "4511639",
    "end": "4516880"
  },
  {
    "text": "yeah if you wanted to we didn't do that but sure",
    "start": "4519360",
    "end": "4524800"
  },
  {
    "text": "that wasn't the one that actually did the sequel but we we locked it down in this case for open hack within within an",
    "start": "4527320",
    "end": "4532440"
  },
  {
    "text": "inch of its life literally um the application uh as far as the database was concerned was actually running",
    "start": "4532440",
    "end": "4538080"
  },
  {
    "text": "nearly as a guest on the operating system so I don't know whether I'd think",
    "start": "4538080",
    "end": "4544679"
  },
  {
    "text": "about the interaction with desktop being important or not oh but um the the main",
    "start": "4544679",
    "end": "4550639"
  },
  {
    "text": "thing we were after was the minimum privilege guest was about as close as we got it",
    "start": "4550639",
    "end": "4555800"
  },
  {
    "text": "um and we're not saying we support running SQL Server as guest but it was it was done by someone who who really",
    "start": "4555800",
    "end": "4561480"
  },
  {
    "text": "knew his way around",
    "start": "4561480",
    "end": "4564120"
  },
  {
    "text": "SQL to run the we possible",
    "start": "4578960",
    "end": "4585360"
  },
  {
    "text": "and then the mid zero access",
    "start": "4586320",
    "end": "4594320"
  },
  {
    "text": "toig",
    "start": "4596560",
    "end": "4599560"
  },
  {
    "text": "you're right um application permissions so",
    "start": "4607440",
    "end": "4615440"
  },
  {
    "text": "uh the first thing you should do is what delete all the sample junk that gets installed right um because just remember",
    "start": "4615440",
    "end": "4621719"
  },
  {
    "text": "sample code is never written with security in mind okay Axiom um and then when we create the",
    "start": "4621719",
    "end": "4628280"
  },
  {
    "text": "application database there's a few things to remember Grant the application account permissions on the stored",
    "start": "4628280",
    "end": "4635120"
  },
  {
    "text": "procedures right but not on the database tables",
    "start": "4635120",
    "end": "4640520"
  },
  {
    "text": "themselves this way the application can't just start executing ad hoc queries right all the application can do",
    "start": "4640960",
    "end": "4647880"
  },
  {
    "text": "is talk to those stored procedures and then you want to ensure that that application account this is the IIs",
    "start": "4647880",
    "end": "4653920"
  },
  {
    "text": "account right you want to ensure that that account has no permissions anywhere else inside SQL",
    "start": "4653920",
    "end": "4660400"
  },
  {
    "text": "Server um so we're running out of time here there's really not a whole lot of interesting things to look at this is all just UI stuff I want to hit the last",
    "start": "4660480",
    "end": "4667199"
  },
  {
    "text": "couple slides and then leave some time for questions at the end so um do I need this slide up here right",
    "start": "4667199",
    "end": "4675440"
  },
  {
    "text": "people okay I mean this is black hat right not CSI",
    "start": "4675440",
    "end": "4681199"
  },
  {
    "text": "sorry um so you know just basic stuff right you know the super paranoid don't",
    "start": "4681199",
    "end": "4688400"
  },
  {
    "text": "forget the alt plus number pad right if you really want to forget your password a month from now um and and go what's",
    "start": "4688400",
    "end": "4696400"
  },
  {
    "text": "that no script no dictionary script okay I'm not really that concerned but um and",
    "start": "4696400",
    "end": "4703840"
  },
  {
    "text": "go for length all right just go for length so here's a funny thing I had a customer I was doing a Security review",
    "start": "4703840",
    "end": "4710400"
  },
  {
    "text": "for and they were migrating from nt4 to Windows 2000 and one of their policy things was passwords must be the maximum",
    "start": "4710400",
    "end": "4717239"
  },
  {
    "text": "length supported by the operating system for nt4 what was it 14 right or 15 I",
    "start": "4717239",
    "end": "4723840"
  },
  {
    "text": "mean something you could manage right what is the maximum password length in Windows 2000",
    "start": "4723840",
    "end": "4729000"
  },
  {
    "text": "256 isn't it something like that 128 supposed to 250 okay all right so anyway",
    "start": "4729000",
    "end": "4735719"
  },
  {
    "text": "could you imagine typing a paragraph as your password my dog and I went down to the corner store on Friday afternoon fat",
    "start": "4735719",
    "end": "4741199"
  },
  {
    "text": "finger yeah of course that's not as funny as the uh the you should go search",
    "start": "4741199",
    "end": "4746400"
  },
  {
    "text": "on there's a KB article that talks about a password sync problem with services for Unix and NFS or something like that",
    "start": "4746400",
    "end": "4753280"
  },
  {
    "text": "that an error will come up that says your password must be at least",
    "start": "4753280",
    "end": "4758600"
  },
  {
    "text": "32,7 45 characters and cannot be any different or must be different than your",
    "start": "4758600",
    "end": "4763760"
  },
  {
    "text": "previous 18,000 460 passwords somebody forgot to bounce",
    "start": "4763760",
    "end": "4769000"
  },
  {
    "text": "check their UI I think so what did what did we learn from",
    "start": "4769000",
    "end": "4775520"
  },
  {
    "text": "all of this well every deployment is unique right a lot of what you've seen here today was specific for open hack",
    "start": "4775520",
    "end": "4784679"
  },
  {
    "text": "but you know there's certain principles that apply everywhere one you don't need a firewall yay um so use adapt modify",
    "start": "4784679",
    "end": "4793080"
  },
  {
    "text": "this stuff as necessary right you know there's a ton of information out there about this if you just go Google on open",
    "start": "4793080",
    "end": "4798280"
  },
  {
    "text": "hack you're going to get more than you'll ever want to know um but after all this is a PowerPoint presentation",
    "start": "4798280",
    "end": "4804719"
  },
  {
    "text": "right so I do need to State the obvious which I even have to back up and read because I still don't have it",
    "start": "4804719",
    "end": "4809800"
  },
  {
    "text": "memorized right plan for security in the original design I went on a customer uh did a",
    "start": "4809800",
    "end": "4816400"
  },
  {
    "text": "something for a customer one time where they had been working on something for two years and a week before roll out",
    "start": "4816400",
    "end": "4823760"
  },
  {
    "text": "they said oh hell we better put Security in this",
    "start": "4823760",
    "end": "4828719"
  },
  {
    "text": "thing okay I wasn't too helpful to them because every half hour I was saying oh",
    "start": "4829040",
    "end": "4834560"
  },
  {
    "text": "wait a minute but you got to change the design right and they didn't want to hear that install a way to service packs and",
    "start": "4834560",
    "end": "4841639"
  },
  {
    "text": "patches you know and so your design should include a plan for how you do that use complex non-intuitive passwords",
    "start": "4841639",
    "end": "4848880"
  },
  {
    "text": "reduce the service area by disabling unnecessary functionality adhere to this principle of lease privilege you know",
    "start": "4848880",
    "end": "4854199"
  },
  {
    "text": "how we're talking about these accounts here that can't do much of anything right anticipate failure practice",
    "start": "4854199",
    "end": "4859280"
  },
  {
    "text": "defense in depth you're saying but you don't have any defense in depth because you don't have any firewalls right are",
    "start": "4859280",
    "end": "4865440"
  },
  {
    "text": "you thinking that we don't need them we got a ton of depth",
    "start": "4865440",
    "end": "4871960"
  },
  {
    "text": "here did medieval castles have two firewalls and nothing else protecting",
    "start": "4872280",
    "end": "4878120"
  },
  {
    "text": "them how come our networks are built with two firewalls and nothing else protecting them you got outer firewall",
    "start": "4878120",
    "end": "4885320"
  },
  {
    "text": "and your inner firewall right two firewalls two Moes medieval castles didn't have two Moes they had one but",
    "start": "4885320",
    "end": "4891960"
  },
  {
    "text": "then what big heavy Doors Dark twisty passageways monstrous guys way bigger",
    "start": "4891960",
    "end": "4898800"
  },
  {
    "text": "than I am with sharp metal swords boiling oil boiling oil right I mean",
    "start": "4898800",
    "end": "4904600"
  },
  {
    "text": "there are lots of layers there you can get you don't need to rely on the network for all of",
    "start": "4904600",
    "end": "4910719"
  },
  {
    "text": "them what's that I like boiling yeah I like the boiling oil too so how do we anybody want to write a boiling oil",
    "start": "4910719",
    "end": "4916560"
  },
  {
    "text": "protocol I think that would be a really good idea um always always always run",
    "start": "4916560",
    "end": "4921679"
  },
  {
    "text": "IIs lockdown and URL scan on every web server you build from now until you",
    "start": "4921679",
    "end": "4927159"
  },
  {
    "text": "die you don't need to worry about it after you die because you don't care anymore but you do that this just",
    "start": "4927159",
    "end": "4932920"
  },
  {
    "text": "becomes a standard practice for you now validate all input data and use only",
    "start": "4932920",
    "end": "4938920"
  },
  {
    "text": "stored parameters or stored procedures that are what am I saying parameterized",
    "start": "4938920",
    "end": "4944040"
  },
  {
    "text": "right when you talk to the",
    "start": "4944040",
    "end": "4948159"
  },
  {
    "text": "database any questions",
    "start": "4950400",
    "end": "4955400"
  },
  {
    "text": "yeah okay so they're living in fantasy land because we have an e-commerce site that wants single sign",
    "start": "4959679",
    "end": "4964719"
  },
  {
    "text": "on okay right",
    "start": "4964719",
    "end": "4973159"
  },
  {
    "text": "right so the question is let's say that we have multiple instances of this thing",
    "start": "4998600",
    "end": "5004520"
  },
  {
    "text": "but we want to have one user directory that all of the instances can share kind of what you're saying",
    "start": "5004520",
    "end": "5010159"
  },
  {
    "text": "right um well you you could certainly have you could break out your",
    "start": "5010159",
    "end": "5017840"
  },
  {
    "text": "application database from your user database right here we're using one single SQL Server box with a user",
    "start": "5017840",
    "end": "5025199"
  },
  {
    "text": "database and an application database right so you could break these things out and you could have a SQL Server box",
    "start": "5025199",
    "end": "5030880"
  },
  {
    "text": "that does nothing but hold hold the hold the common user directory and use many of these same",
    "start": "5030880",
    "end": "5036600"
  },
  {
    "text": "principles um now if the different instances of this of this were separated",
    "start": "5036600",
    "end": "5041800"
  },
  {
    "text": "by firewalls you know you'll need to somehow ensure that we are communicating",
    "start": "5041800",
    "end": "5046960"
  },
  {
    "text": "between each instance in the common user store in a secure manner right so maybe",
    "start": "5046960",
    "end": "5052440"
  },
  {
    "text": "IPC um and open the firewall for IPC just between these individual hosts um",
    "start": "5052440",
    "end": "5058159"
  },
  {
    "text": "so you know I'm just kind of in imagining things here as I'm as I'm talking to you",
    "start": "5058159",
    "end": "5065080"
  },
  {
    "text": "bres",
    "start": "5090159",
    "end": "5093159"
  },
  {
    "text": "oh",
    "start": "5104920",
    "end": "5107119"
  },
  {
    "text": "yeah well you know that's that's an interesting thing that a that a number of people seem to believe that as soon",
    "start": "5112159",
    "end": "5118199"
  },
  {
    "text": "as you put a box that is a domain controller in a DMZ that you know life",
    "start": "5118199",
    "end": "5123679"
  },
  {
    "text": "as we know is going to come to a screeching halt I don't believe that's true I have customers who have deployed",
    "start": "5123679",
    "end": "5129600"
  },
  {
    "text": "active directory in a DMZ right and mostly it's a separate Forest that that",
    "start": "5129600",
    "end": "5136600"
  },
  {
    "text": "we have a one-way trust right back into the court Forest so that Corp administrators can administer the DMZ",
    "start": "5136600",
    "end": "5143239"
  },
  {
    "text": "fors without having to have an ID there and they're totally happy with it and haven't had any kind of directory",
    "start": "5143239",
    "end": "5149840"
  },
  {
    "text": "related compromise okay others I One customer who has extended his Corp Forest into",
    "start": "5149840",
    "end": "5157080"
  },
  {
    "text": "his DMZ he is effectively now operating DMZ",
    "start": "5157080",
    "end": "5162760"
  },
  {
    "text": "less because he's decided that the traditional DMZ design has is now unable",
    "start": "5162760",
    "end": "5170000"
  },
  {
    "text": "to satisfy his business needs so he's got a single flat corporate Network some",
    "start": "5170000",
    "end": "5176560"
  },
  {
    "text": "Services of which are available to people on the outside and and they love it right we've",
    "start": "5176560",
    "end": "5183159"
  },
  {
    "text": "got people who are doing it now it just depends on what Comfort level are you at and and when to do something like this",
    "start": "5183159",
    "end": "5189480"
  },
  {
    "text": "now I do want to say that passport is a possible solution to this here right but",
    "start": "5189480",
    "end": "5194880"
  },
  {
    "text": "the thing you got to remember with passport is anybody can go to passport.com and register a passport under anybody's",
    "start": "5194880",
    "end": "5201119"
  },
  {
    "text": "name so if identity is critical to you you need to",
    "start": "5201119",
    "end": "5206880"
  },
  {
    "text": "have some process by which you're verifying identity before a user can get a passport is this useful to your answer",
    "start": "5206880",
    "end": "5214480"
  },
  {
    "text": "to your question probably a year from now open",
    "start": "5214480",
    "end": "5220480"
  },
  {
    "text": "Act five we wanted to actually do it this year but we were disallowed from doing it as part of the contest so",
    "start": "5220480",
    "end": "5226119"
  },
  {
    "text": "that's why we wound up with Standalone servers but that's exactly what we were planning on doing for open hack was an active directory",
    "start": "5226119",
    "end": "5233080"
  },
  {
    "text": "solution e we e",
    "start": "5233080",
    "end": "5236520"
  },
  {
    "text": "we so is it is say we do it for open Haack 5 are we going to use regular ad",
    "start": "5242920",
    "end": "5248440"
  },
  {
    "text": "or we going to use adom I'd have to see what we were doing with it um I I would we would probably",
    "start": "5248440",
    "end": "5255560"
  },
  {
    "text": "be pushing we probably go for reg we pushing for as much technology that's up to speed we wanted to do it with net you",
    "start": "5255560",
    "end": "5261760"
  },
  {
    "text": "know 2003 again they asked that we use just product that was available on the Shelf to regular consumers so um",
    "start": "5261760",
    "end": "5269000"
  },
  {
    "text": "basically if the technology is going to be available we're going to leverage as much of us as we can to show it off",
    "start": "5269000",
    "end": "5275719"
  },
  {
    "text": "valid datc",
    "start": "5285480",
    "end": "5289480"
  },
  {
    "text": "and this is a really good question he's asking about are we doing output validation right so we're validating all",
    "start": "5304400",
    "end": "5309880"
  },
  {
    "text": "this stuff that's coming in but information that we present to the client are we validating that output um",
    "start": "5309880",
    "end": "5317000"
  },
  {
    "text": "in a minimal way well it's not validation okay it's we're doing that HTML and code so we're just sending",
    "start": "5317000",
    "end": "5322280"
  },
  {
    "text": "static text down to the client but if there were you know have you all gone to some data some website somewhere that's",
    "start": "5322280",
    "end": "5328679"
  },
  {
    "text": "been database driven you Tred to enter something and the database is crapped out and you get a database error that has all kinds of useful forensic",
    "start": "5328679",
    "end": "5335199"
  },
  {
    "text": "information in it or I should say reconnaissance information in it you know we didn't design anything like that",
    "start": "5335199",
    "end": "5341480"
  },
  {
    "text": "into open Haack but that that's an excellent point and it's probably something you want to account for right",
    "start": "5341480",
    "end": "5347880"
  },
  {
    "text": "so if you're seeing SQL errors or odbc errors coming back from the database to",
    "start": "5347880",
    "end": "5353239"
  },
  {
    "text": "the web app don't send that stuff onto the client we didn't do anything like that here the flip side of that being",
    "start": "5353239",
    "end": "5362119"
  },
  {
    "text": "that for itions that we're not allowing but that's it and in order to get obcr",
    "start": "5362360",
    "end": "5368719"
  },
  {
    "text": "back something would have to Broken with the store procedures so and to my knowledge we never had an instance of",
    "start": "5368719",
    "end": "5375199"
  },
  {
    "text": "that that occurring but again that would be another depth to guarantee that the store procedures were set up correctly",
    "start": "5375199",
    "end": "5381639"
  },
  {
    "text": "and if they weren't going back to the client uh would be without the validation would be have another layer",
    "start": "5381639",
    "end": "5387320"
  },
  {
    "text": "we could add you another question TW",
    "start": "5387320",
    "end": "5395360"
  },
  {
    "text": "what you saw here was",
    "start": "5398080",
    "end": "5400800"
  },
  {
    "text": "it yeah uh here you go um write this down I'm give to you the URL right",
    "start": "5405239",
    "end": "5411040"
  },
  {
    "text": "now um here's the paper from which I built the slides over the last day and a",
    "start": "5411040",
    "end": "5417239"
  },
  {
    "text": "half msdn.microsoft.com Library",
    "start": "5417719",
    "end": "5423400"
  },
  {
    "text": "slash oh hell it got cut off okay so go to msdn and search on the",
    "start": "5424320",
    "end": "5432600"
  },
  {
    "text": "following open hack okay it's really easy to",
    "start": "5432600",
    "end": "5440119"
  },
  {
    "text": "findt microsoft. it's the first search",
    "start": "5447080",
    "end": "5453880"
  },
  {
    "text": "maybe we could push Steve's arm into augmenting this into his about security I didn't",
    "start": "5454119",
    "end": "5460800"
  },
  {
    "text": "write it man",
    "start": "5460800",
    "end": "5466320"
  },
  {
    "text": "okay thank you is that it all right thanks very much great",
    "start": "5469880",
    "end": "5476400"
  },
  {
    "text": "talking to you and I hope to see",
    "start": "5476400",
    "end": "5482239"
  },
  {
    "text": "you",
    "start": "5482920",
    "end": "5485920"
  },
  {
    "text": "e",
    "start": "5512840",
    "end": "5515840"
  },
  {
    "text": "e",
    "start": "5542840",
    "end": "5545840"
  },
  {
    "text": "e e",
    "start": "5572840",
    "end": "5576840"
  },
  {
    "text": "e",
    "start": "5662719",
    "end": "5665719"
  },
  {
    "text": "e",
    "start": "5692639",
    "end": "5695639"
  },
  {
    "text": "e",
    "start": "5722639",
    "end": "5725639"
  },
  {
    "text": "e",
    "start": "5752639",
    "end": "5755639"
  },
  {
    "text": "e e",
    "start": "5782560",
    "end": "5786560"
  }
]