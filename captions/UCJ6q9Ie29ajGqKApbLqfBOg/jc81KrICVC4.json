[
  {
    "text": "good morning everybody Welcome to uh day",
    "start": "240",
    "end": "2240"
  },
  {
    "text": "two of black hat 2015 just got a couple",
    "start": "2240",
    "end": "5000"
  },
  {
    "text": "of quick announcements for you uh if you",
    "start": "5000",
    "end": "7040"
  },
  {
    "text": "get a chance today stop by the business",
    "start": "7040",
    "end": "8559"
  },
  {
    "text": "Hall located in Shoreline a for they've",
    "start": "8559",
    "end": "10960"
  },
  {
    "text": "got some sponsored sessions in the",
    "start": "10960",
    "end": "12440"
  },
  {
    "text": "theaters A and B uh there's also be sure",
    "start": "12440",
    "end": "15360"
  },
  {
    "text": "and check out the black Haack Arsenal in",
    "start": "15360",
    "end": "17520"
  },
  {
    "text": "Breakers",
    "start": "17520",
    "end": "18720"
  },
  {
    "text": "djk and also there's some sponsored",
    "start": "18720",
    "end": "20880"
  },
  {
    "text": "workshops in Mandalay",
    "start": "20880",
    "end": "23240"
  },
  {
    "text": "jkl uh you're currently in manderlay Bay",
    "start": "23240",
    "end": "26439"
  },
  {
    "text": "GH for the session trust kit code inject",
    "start": "26439",
    "end": "30240"
  },
  {
    "text": "on iOS 8 for the greater good with our",
    "start": "30240",
    "end": "32880"
  },
  {
    "text": "speakers Alban Decay Eric Castro and",
    "start": "32880",
    "end": "35960"
  },
  {
    "text": "Angela",
    "start": "35960",
    "end": "38320"
  },
  {
    "text": "Chow thanks hi everyone thanks for",
    "start": "38320",
    "end": "41480"
  },
  {
    "text": "coming this early um at our presentation",
    "start": "41480",
    "end": "43840"
  },
  {
    "text": "about something we're very excited to",
    "start": "43840",
    "end": "45960"
  },
  {
    "text": "release called trust kit um so my name",
    "start": "45960",
    "end": "49480"
  },
  {
    "text": "is arban and with Eric here together we",
    "start": "49480",
    "end": "52079"
  },
  {
    "text": "are working at this company called Data",
    "start": "52079",
    "end": "54079"
  },
  {
    "text": "theorem uh where we've built a tool to",
    "start": "54079",
    "end": "56640"
  },
  {
    "text": "automatically find security and privacy",
    "start": "56640",
    "end": "58800"
  },
  {
    "text": "issues in mobile applications",
    "start": "58800",
    "end": "60840"
  },
  {
    "text": "and Angela here uh is part of the",
    "start": "60840",
    "end": "63160"
  },
  {
    "text": "security team at",
    "start": "63160",
    "end": "65960"
  },
  {
    "text": "Yahoo um and so today we're releasing a",
    "start": "65960",
    "end": "69520"
  },
  {
    "text": "new library for iOS and stand apps",
    "start": "69520",
    "end": "71280"
  },
  {
    "text": "called trust kid so first we're going to",
    "start": "71280",
    "end": "73080"
  },
  {
    "text": "kind of describe what this is uh where",
    "start": "73080",
    "end": "75759"
  },
  {
    "text": "you may want to use it in your apps um",
    "start": "75759",
    "end": "77880"
  },
  {
    "text": "and then we'll kind of go into the",
    "start": "77880",
    "end": "79080"
  },
  {
    "text": "details of how it actually works why",
    "start": "79080",
    "end": "81720"
  },
  {
    "text": "it's novel why the implementation is",
    "start": "81720",
    "end": "84320"
  },
  {
    "text": "interesting uh and all the things it how",
    "start": "84320",
    "end": "86680"
  },
  {
    "text": "it works and all the things that happens",
    "start": "86680",
    "end": "88119"
  },
  {
    "text": "behind the scenes uh as you're using",
    "start": "88119",
    "end": "90920"
  },
  {
    "text": "it but first of all trust kit so our",
    "start": "90920",
    "end": "94560"
  },
  {
    "text": "goal initially which is sounds pretty",
    "start": "94560",
    "end": "96880"
  },
  {
    "text": "simple is was to create an SSL pining",
    "start": "96880",
    "end": "99040"
  },
  {
    "text": "library for",
    "start": "99040",
    "end": "100200"
  },
  {
    "text": "iOS um and as we started working on that",
    "start": "100200",
    "end": "103119"
  },
  {
    "text": "we really really wanted to make sure",
    "start": "103119",
    "end": "104920"
  },
  {
    "text": "that um that library was going to be",
    "start": "104920",
    "end": "107840"
  },
  {
    "text": "usable in real apps with lots of",
    "start": "107840",
    "end": "110439"
  },
  {
    "text": "users um strong requirements like",
    "start": "110439",
    "end": "113200"
  },
  {
    "text": "battery life and performance uh and",
    "start": "113200",
    "end": "115719"
  },
  {
    "text": "overall make sure that this is something",
    "start": "115719",
    "end": "117520"
  },
  {
    "text": "developers will be able to use and not",
    "start": "117520",
    "end": "119399"
  },
  {
    "text": "some IDE IDE or proof of concept um and",
    "start": "119399",
    "end": "123479"
  },
  {
    "text": "together uh we had the opportunity to",
    "start": "123479",
    "end": "125600"
  },
  {
    "text": "work with the Yahoo mobile security",
    "start": "125600",
    "end": "127560"
  },
  {
    "text": "teams um and Angela here is going to",
    "start": "127560",
    "end": "130399"
  },
  {
    "text": "talk about her challenges when trying to",
    "start": "130399",
    "end": "132840"
  },
  {
    "text": "deploy s is happing at",
    "start": "132840",
    "end": "134800"
  },
  {
    "text": "Yahoo thanks",
    "start": "134800",
    "end": "137000"
  },
  {
    "text": "Alvin so sell pinning let's see um it's",
    "start": "137000",
    "end": "141599"
  },
  {
    "text": "been talked about for years and um",
    "start": "141599",
    "end": "145040"
  },
  {
    "text": "pretty much everyone in the security",
    "start": "145040",
    "end": "147319"
  },
  {
    "text": "Community agrees that it's a good thing",
    "start": "147319",
    "end": "149920"
  },
  {
    "text": "to",
    "start": "149920",
    "end": "150560"
  },
  {
    "text": "do and I mean like who wants to trust",
    "start": "150560",
    "end": "153760"
  },
  {
    "text": "hundreds of Casas where some of them are",
    "start": "153760",
    "end": "155840"
  },
  {
    "text": "compromised others are government owned",
    "start": "155840",
    "end": "158319"
  },
  {
    "text": "and yet others that are",
    "start": "158319",
    "end": "160480"
  },
  {
    "text": "dubious and in the mobile app world it's",
    "start": "160480",
    "end": "163000"
  },
  {
    "text": "the perfect place to do uh pinning",
    "start": "163000",
    "end": "165440"
  },
  {
    "text": "because you own both the client side as",
    "start": "165440",
    "end": "167680"
  },
  {
    "text": "well as server side of the",
    "start": "167680",
    "end": "169680"
  },
  {
    "text": "communication so I thought well this is",
    "start": "169680",
    "end": "172360"
  },
  {
    "text": "a great project to do and when I first",
    "start": "172360",
    "end": "175720"
  },
  {
    "text": "started to do uh sell pinning for Yahoo",
    "start": "175720",
    "end": "178680"
  },
  {
    "text": "mobile apps I thought it would be an",
    "start": "178680",
    "end": "180760"
  },
  {
    "text": "easy straightforward project maybe just",
    "start": "180760",
    "end": "183920"
  },
  {
    "text": "add a few lines of code to check for the",
    "start": "183920",
    "end": "186120"
  },
  {
    "text": "right certificate and that's",
    "start": "186120",
    "end": "188440"
  },
  {
    "text": "it or so I thought until I HD into some",
    "start": "188440",
    "end": "193040"
  },
  {
    "text": "technical challenges and well as as",
    "start": "193040",
    "end": "195560"
  },
  {
    "text": "operational challenges as we shall",
    "start": "195560",
    "end": "198680"
  },
  {
    "text": "see so first of all what should we pin",
    "start": "198680",
    "end": "202519"
  },
  {
    "text": "is it the certificate or the public key",
    "start": "202519",
    "end": "204799"
  },
  {
    "text": "of the",
    "start": "204799",
    "end": "205840"
  },
  {
    "text": "certificate uh as we all know",
    "start": "205840",
    "end": "207680"
  },
  {
    "text": "certificates are often reissued with uh",
    "start": "207680",
    "end": "210480"
  },
  {
    "text": "different extensions or expiration dates",
    "start": "210480",
    "end": "213879"
  },
  {
    "text": "so they're a little bit Britt to print",
    "start": "213879",
    "end": "216280"
  },
  {
    "text": "do and public key is better because not",
    "start": "216280",
    "end": "219480"
  },
  {
    "text": "going to be changed as much but even",
    "start": "219480",
    "end": "222080"
  },
  {
    "text": "just the public key bits are not enough",
    "start": "222080",
    "end": "224720"
  },
  {
    "text": "as we also need to know the algorithm",
    "start": "224720",
    "end": "227239"
  },
  {
    "text": "that the public key is associated",
    "start": "227239",
    "end": "229439"
  },
  {
    "text": "with so together the algorithm as well",
    "start": "229439",
    "end": "233599"
  },
  {
    "text": "as the public key bits they're call spki",
    "start": "233599",
    "end": "236879"
  },
  {
    "text": "or the subject public key info and",
    "start": "236879",
    "end": "239200"
  },
  {
    "text": "that's what we should really be pinning",
    "start": "239200",
    "end": "241519"
  },
  {
    "text": "to however and unfortunately in iOS",
    "start": "241519",
    "end": "246159"
  },
  {
    "text": "there's no API to really extract the SP",
    "start": "246159",
    "end": "248280"
  },
  {
    "text": "spki from a",
    "start": "248280",
    "end": "249840"
  },
  {
    "text": "certificate so I started looking all",
    "start": "249840",
    "end": "252680"
  },
  {
    "text": "over the web for examples libraries and",
    "start": "252680",
    "end": "257400"
  },
  {
    "text": "just to see how other people are doing",
    "start": "257400",
    "end": "259239"
  },
  {
    "text": "mobile",
    "start": "259239",
    "end": "260160"
  },
  {
    "text": "pinning and I I couldn't find one that",
    "start": "260160",
    "end": "262800"
  },
  {
    "text": "used as pki at all in fact most of them",
    "start": "262800",
    "end": "266000"
  },
  {
    "text": "are just comparing the whole",
    "start": "266000",
    "end": "268000"
  },
  {
    "text": "certificate itself",
    "start": "268000",
    "end": "270840"
  },
  {
    "text": "and then um another challenge I hit on",
    "start": "270840",
    "end": "274039"
  },
  {
    "text": "is um how am I going to implement this",
    "start": "274039",
    "end": "278000"
  },
  {
    "text": "um I'm not like I don't want to go and",
    "start": "278000",
    "end": "280800"
  },
  {
    "text": "find and modify every single instance of",
    "start": "280800",
    "end": "283520"
  },
  {
    "text": "NR connection and nscr session in all of",
    "start": "283520",
    "end": "287039"
  },
  {
    "text": "the mobile apps that we have and so I",
    "start": "287039",
    "end": "290000"
  },
  {
    "text": "thought I'll be smart and use method",
    "start": "290000",
    "end": "292360"
  },
  {
    "text": "whistling so I only need to do it once",
    "start": "292360",
    "end": "295080"
  },
  {
    "text": "and other mobile apps would get it",
    "start": "295080",
    "end": "297720"
  },
  {
    "text": "transparently that is until I hit upon",
    "start": "297720",
    "end": "300080"
  },
  {
    "text": "another problem which is in UI web view",
    "start": "300080",
    "end": "304440"
  },
  {
    "text": "it's not using an Sr connection or NR",
    "start": "304440",
    "end": "309120"
  },
  {
    "text": "session and so therefore method",
    "start": "309120",
    "end": "311960"
  },
  {
    "text": "whistling would not",
    "start": "311960",
    "end": "313400"
  },
  {
    "text": "work and so we need to intercept the",
    "start": "313400",
    "end": "316560"
  },
  {
    "text": "code at a even lower",
    "start": "316560",
    "end": "318840"
  },
  {
    "text": "level and finally on the operational",
    "start": "318840",
    "end": "322039"
  },
  {
    "text": "challenge side is like how do I get Buy",
    "start": "322039",
    "end": "324759"
  },
  {
    "text": "in from the product",
    "start": "324759",
    "end": "326840"
  },
  {
    "text": "team um blocking attackers is a good",
    "start": "326840",
    "end": "329319"
  },
  {
    "text": "call and we do want to protect the",
    "start": "329319",
    "end": "331960"
  },
  {
    "text": "user's",
    "start": "331960",
    "end": "333000"
  },
  {
    "text": "data but when you go to them and say you",
    "start": "333000",
    "end": "337000"
  },
  {
    "text": "have this great idea that you're going",
    "start": "337000",
    "end": "338639"
  },
  {
    "text": "to block user connections they're",
    "start": "338639",
    "end": "341360"
  },
  {
    "text": "understandably a little nervous and say",
    "start": "341360",
    "end": "343880"
  },
  {
    "text": "which users or how many users are we",
    "start": "343880",
    "end": "346560"
  },
  {
    "text": "talking about and um I don't know or",
    "start": "346560",
    "end": "351400"
  },
  {
    "text": "what if we block the wrong",
    "start": "351400",
    "end": "353240"
  },
  {
    "text": "connections and so with that um we",
    "start": "353240",
    "end": "355800"
  },
  {
    "text": "thought of a solution which is to have a",
    "start": "355800",
    "end": "359199"
  },
  {
    "text": "report on only mode that way we can",
    "start": "359199",
    "end": "361840"
  },
  {
    "text": "gather the data first to see what we",
    "start": "361840",
    "end": "364319"
  },
  {
    "text": "would have been blocking before we",
    "start": "364319",
    "end": "366960"
  },
  {
    "text": "actually enforce the blocking and so um",
    "start": "366960",
    "end": "370680"
  },
  {
    "text": "business can decide um with the data",
    "start": "370680",
    "end": "373759"
  },
  {
    "text": "that they gather whether this is a good",
    "start": "373759",
    "end": "375360"
  },
  {
    "text": "decision or",
    "start": "375360",
    "end": "377080"
  },
  {
    "text": "not and so there's no existing iOS um",
    "start": "377080",
    "end": "381240"
  },
  {
    "text": "library that does all these three",
    "start": "381240",
    "end": "383759"
  },
  {
    "text": "requirements that I need and I thought I",
    "start": "383759",
    "end": "386960"
  },
  {
    "text": "probably would have to write my library",
    "start": "386960",
    "end": "389080"
  },
  {
    "text": "from scratch",
    "start": "389080",
    "end": "390639"
  },
  {
    "text": "until I met up with data theorem and I",
    "start": "390639",
    "end": "393240"
  },
  {
    "text": "started telling them all my challenges",
    "start": "393240",
    "end": "395280"
  },
  {
    "text": "and how I need to start this project and",
    "start": "395280",
    "end": "398120"
  },
  {
    "text": "they got interested and so they say why",
    "start": "398120",
    "end": "400680"
  },
  {
    "text": "not start a collaboration project and so",
    "start": "400680",
    "end": "403240"
  },
  {
    "text": "here we are so back to you",
    "start": "403240",
    "end": "405720"
  },
  {
    "text": "Alvin thanks Angela so yes uh we started",
    "start": "405720",
    "end": "409360"
  },
  {
    "text": "collaborating",
    "start": "409360",
    "end": "410720"
  },
  {
    "text": "and all you know we basically solved all",
    "start": "410720",
    "end": "413479"
  },
  {
    "text": "these challenges um one thing was having",
    "start": "413479",
    "end": "417840"
  },
  {
    "text": "a library that works on all your network",
    "start": "417840",
    "end": "419800"
  },
  {
    "text": "connection on all the apis um and we",
    "start": "419800",
    "end": "423080"
  },
  {
    "text": "have that because the way we did it if",
    "start": "423080",
    "end": "425120"
  },
  {
    "text": "you look at the Apple network stack um",
    "start": "425120",
    "end": "428440"
  },
  {
    "text": "there's a lot of different apis you can",
    "start": "428440",
    "end": "430400"
  },
  {
    "text": "use to do network connection low level",
    "start": "430400",
    "end": "431919"
  },
  {
    "text": "apis like BSD sockets to higher level",
    "start": "431919",
    "end": "434840"
  },
  {
    "text": "API like NS session where you can do",
    "start": "434840",
    "end": "436759"
  },
  {
    "text": "HTTP connections um what's interesting",
    "start": "436759",
    "end": "440599"
  },
  {
    "text": "about that is for anything SSL or https",
    "start": "440599",
    "end": "443280"
  },
  {
    "text": "they all use secure transport secure",
    "start": "443280",
    "end": "445120"
  },
  {
    "text": "transport which is the one on the bottom",
    "start": "445120",
    "end": "446840"
  },
  {
    "text": "right um is Apple's s stack Apple's SSL",
    "start": "446840",
    "end": "451080"
  },
  {
    "text": "implementation so all these API all the",
    "start": "451080",
    "end": "453360"
  },
  {
    "text": "apis you can use they all use secure",
    "start": "453360",
    "end": "454720"
  },
  {
    "text": "transport for SSL so what we've done is",
    "start": "454720",
    "end": "458039"
  },
  {
    "text": "we've extended um secure transport uh",
    "start": "458039",
    "end": "461000"
  },
  {
    "text": "with all Lial trust kit um and so we've",
    "start": "461000",
    "end": "464440"
  },
  {
    "text": "added that SSL pining functionality to",
    "start": "464440",
    "end": "466599"
  },
  {
    "text": "secure transport and once you do that uh",
    "start": "466599",
    "end": "469599"
  },
  {
    "text": "basically all the apis can take",
    "start": "469599",
    "end": "472199"
  },
  {
    "text": "advantage of that uh that all the",
    "start": "472199",
    "end": "474360"
  },
  {
    "text": "connections are",
    "start": "474360",
    "end": "475560"
  },
  {
    "text": "protected uh and you'll see that in the",
    "start": "475560",
    "end": "477400"
  },
  {
    "text": "demo uh but so basically it works on all",
    "start": "477400",
    "end": "479879"
  },
  {
    "text": "the Apple apis kind of transparently you",
    "start": "479879",
    "end": "482319"
  },
  {
    "text": "don't have to do anything you don't have",
    "start": "482319",
    "end": "483520"
  },
  {
    "text": "to find all the instances of NSL",
    "start": "483520",
    "end": "486280"
  },
  {
    "text": "connection um then the other thing is",
    "start": "486280",
    "end": "488759"
  },
  {
    "text": "it's very easy to deploy um you just set",
    "start": "488759",
    "end": "491840"
  },
  {
    "text": "your pinning policy in the apps manifest",
    "start": "491840",
    "end": "493919"
  },
  {
    "text": "so that's how it looks like next code uh",
    "start": "493919",
    "end": "496360"
  },
  {
    "text": "you just put the domains you want to pin",
    "start": "496360",
    "end": "498680"
  },
  {
    "text": "your spki hashes some other",
    "start": "498680",
    "end": "501800"
  },
  {
    "text": "settings um and it's all heavily based",
    "start": "501800",
    "end": "504800"
  },
  {
    "text": "on HTTP ke pining which is a",
    "start": "504800",
    "end": "506960"
  },
  {
    "text": "specification for browsers so if kind of",
    "start": "506960",
    "end": "510120"
  },
  {
    "text": "done the same thing uh but on iOS uh so",
    "start": "510120",
    "end": "512839"
  },
  {
    "text": "you have all these settings and once",
    "start": "512839",
    "end": "514399"
  },
  {
    "text": "you've put that in the Manifest you're",
    "start": "514399",
    "end": "515800"
  },
  {
    "text": "done um so that's pretty",
    "start": "515800",
    "end": "517959"
  },
  {
    "text": "easy and then so we have spk pining uh",
    "start": "517959",
    "end": "521120"
  },
  {
    "text": "as Angel has said there's no way to pass",
    "start": "521120",
    "end": "523399"
  },
  {
    "text": "a certificate on iOS and get theki so we",
    "start": "523399",
    "end": "526360"
  },
  {
    "text": "just have to ask the developer what the",
    "start": "526360",
    "end": "527880"
  },
  {
    "text": "key algorithm is uh there's no way",
    "start": "527880",
    "end": "529880"
  },
  {
    "text": "around that unless you want to write",
    "start": "529880",
    "end": "532120"
  },
  {
    "text": "your own ASN one parcel or something so",
    "start": "532120",
    "end": "535560"
  },
  {
    "text": "um that was the best solution and lastly",
    "start": "535560",
    "end": "538399"
  },
  {
    "text": "we have a report on mode so it's just",
    "start": "538399",
    "end": "541240"
  },
  {
    "text": "like also the hpkp spec if your app",
    "start": "541240",
    "end": "544240"
  },
  {
    "text": "somewhere on the device uh sees an",
    "start": "544240",
    "end": "547200"
  },
  {
    "text": "unexpected certificate chain it'll send",
    "start": "547200",
    "end": "549040"
  },
  {
    "text": "you reports uh and they look like that",
    "start": "549040",
    "end": "552640"
  },
  {
    "text": "um which will tell you kind of what's",
    "start": "552640",
    "end": "555200"
  },
  {
    "text": "going on the certificate chain that was",
    "start": "555200",
    "end": "557079"
  },
  {
    "text": "seen um and so it'll give you a global",
    "start": "557079",
    "end": "560279"
  },
  {
    "text": "picture of people seeing user seeing bad",
    "start": "560279",
    "end": "564360"
  },
  {
    "text": "certificate chains in the world um so",
    "start": "564360",
    "end": "567880"
  },
  {
    "text": "that's we've sold all these things uh",
    "start": "567880",
    "end": "569800"
  },
  {
    "text": "that sounds pretty cool but the right",
    "start": "569800",
    "end": "572160"
  },
  {
    "text": "way to really see that is with a quick",
    "start": "572160",
    "end": "573800"
  },
  {
    "text": "demo so uh we have a demo of that um so",
    "start": "573800",
    "end": "578480"
  },
  {
    "text": "it's",
    "start": "578480",
    "end": "579360"
  },
  {
    "text": "basically um on the left you have a real",
    "start": "579360",
    "end": "581680"
  },
  {
    "text": "phone uh with the brca pre-installed um",
    "start": "581680",
    "end": "585640"
  },
  {
    "text": "so thec is already trusted and on the",
    "start": "585640",
    "end": "587320"
  },
  {
    "text": "right you have B set up to proxy all the",
    "start": "587320",
    "end": "589560"
  },
  {
    "text": "phones",
    "start": "589560",
    "end": "590399"
  },
  {
    "text": "connections um so the usual kind of man",
    "start": "590399",
    "end": "593480"
  },
  {
    "text": "midle setup",
    "start": "593480",
    "end": "595839"
  },
  {
    "text": "um and with that I have an X code an IOS",
    "start": "595839",
    "end": "599880"
  },
  {
    "text": "app a very simple IOS app called um",
    "start": "599880",
    "end": "603240"
  },
  {
    "text": "called trust kit demo and I'm just going",
    "start": "603240",
    "end": "605680"
  },
  {
    "text": "to build it and install it and what it",
    "start": "605680",
    "end": "607680"
  },
  {
    "text": "does it's just a web View and you can",
    "start": "607680",
    "end": "609040"
  },
  {
    "text": "put a URL and connect to it and so right",
    "start": "609040",
    "end": "611880"
  },
  {
    "text": "now when you connect to it you can see",
    "start": "611880",
    "end": "613279"
  },
  {
    "text": "all the traffic in burp uh because there",
    "start": "613279",
    "end": "615800"
  },
  {
    "text": "the whole setup working and the Rob CA",
    "start": "615800",
    "end": "617839"
  },
  {
    "text": "is trusted in the app um so that's",
    "start": "617839",
    "end": "621600"
  },
  {
    "text": "expected um and now I'm going to deploy",
    "start": "621600",
    "end": "626279"
  },
  {
    "text": "trust K and you'll see it's pretty quick",
    "start": "626279",
    "end": "629200"
  },
  {
    "text": "um um so the first thing I'm going to do",
    "start": "629200",
    "end": "631000"
  },
  {
    "text": "is drag and drop um the trust X code",
    "start": "631000",
    "end": "634480"
  },
  {
    "text": "project in the",
    "start": "634480",
    "end": "636040"
  },
  {
    "text": "app um and then I have to tell exod that",
    "start": "636040",
    "end": "638920"
  },
  {
    "text": "I want to actually embed tret into the",
    "start": "638920",
    "end": "641680"
  },
  {
    "text": "app so you have to add a",
    "start": "641680",
    "end": "644440"
  },
  {
    "text": "framework and then the last step is just",
    "start": "644440",
    "end": "647240"
  },
  {
    "text": "uh setting up your pinning policy in the",
    "start": "647240",
    "end": "649000"
  },
  {
    "text": "apps manifest in the info. list uh I've",
    "start": "649000",
    "end": "651600"
  },
  {
    "text": "already set it up so I have it I'm just",
    "start": "651600",
    "end": "653480"
  },
  {
    "text": "going to paste it into um the Manifest",
    "start": "653480",
    "end": "656320"
  },
  {
    "text": "and it all has to go under a key called",
    "start": "656320",
    "end": "658920"
  },
  {
    "text": "tsk configuration and inside that key",
    "start": "658920",
    "end": "660880"
  },
  {
    "text": "you can configure your pinning uh and in",
    "start": "660880",
    "end": "663360"
  },
  {
    "text": "that case I have something for data",
    "start": "663360",
    "end": "665800"
  },
  {
    "text": "the.com and I'm pinning all the",
    "start": "665800",
    "end": "667880"
  },
  {
    "text": "subdomains and I've set up all the",
    "start": "667880",
    "end": "669839"
  },
  {
    "text": "hashers the public spki hashers and I",
    "start": "669839",
    "end": "673120"
  },
  {
    "text": "also have a report URI so reports are",
    "start": "673120",
    "end": "675079"
  },
  {
    "text": "sent to This Server if something goes",
    "start": "675079",
    "end": "678120"
  },
  {
    "text": "wrong so that's it I'm going to rebuild",
    "start": "678120",
    "end": "680320"
  },
  {
    "text": "the app um clear the history inop and",
    "start": "680320",
    "end": "684240"
  },
  {
    "text": "restart the app um and now I'm going to",
    "start": "684240",
    "end": "687320"
  },
  {
    "text": "try to connect to data th.com again",
    "start": "687320",
    "end": "690240"
  },
  {
    "text": "um and when I try that you get an htps",
    "start": "690240",
    "end": "692600"
  },
  {
    "text": "error uh and you can't see anything in",
    "start": "692600",
    "end": "694800"
  },
  {
    "text": "Bur and then in the logs you can see",
    "start": "694800",
    "end": "696839"
  },
  {
    "text": "that trust is check was checking the",
    "start": "696839",
    "end": "699279"
  },
  {
    "text": "certificates trying to find these spins",
    "start": "699279",
    "end": "701440"
  },
  {
    "text": "and didn't find them so it return an",
    "start": "701440",
    "end": "702839"
  },
  {
    "text": "error the only thing you can see in burp",
    "start": "702839",
    "end": "705480"
  },
  {
    "text": "is the actual report uh that was sent",
    "start": "705480",
    "end": "708360"
  },
  {
    "text": "cuz it was an HTTP so it's the report",
    "start": "708360",
    "end": "710560"
  },
  {
    "text": "sent to my server to let me know that",
    "start": "710560",
    "end": "712600"
  },
  {
    "text": "something wrong happened um and that's",
    "start": "712600",
    "end": "715600"
  },
  {
    "text": "pretty much it so that took I don't know",
    "start": "715600",
    "end": "718240"
  },
  {
    "text": "one minute and now you have SSR pinning",
    "start": "718240",
    "end": "720480"
  },
  {
    "text": "in your app for all of your SSL",
    "start": "720480",
    "end": "722399"
  },
  {
    "text": "connections",
    "start": "722399",
    "end": "724399"
  },
  {
    "text": "um and you can use it now it's we open",
    "start": "724399",
    "end": "727320"
  },
  {
    "text": "source uh this morning uh and it also",
    "start": "727320",
    "end": "730600"
  },
  {
    "text": "works in Mac apps West 10 apps uh we'll",
    "start": "730600",
    "end": "733880"
  },
  {
    "text": "talk a bit more about trk at the end um",
    "start": "733880",
    "end": "737519"
  },
  {
    "text": "but for now uh we'll kind of give more",
    "start": "737519",
    "end": "741199"
  },
  {
    "text": "details about how it actually works",
    "start": "741199",
    "end": "742480"
  },
  {
    "text": "behind the scenes and what's interesting",
    "start": "742480",
    "end": "744399"
  },
  {
    "text": "about it is that we've used techniques",
    "start": "744399",
    "end": "746639"
  },
  {
    "text": "that usually are used on Jil devices cuz",
    "start": "746639",
    "end": "749360"
  },
  {
    "text": "um we're doing things like uh C function",
    "start": "749360",
    "end": "752600"
  },
  {
    "text": "hooking in SEC transport and other",
    "start": "752600",
    "end": "754560"
  },
  {
    "text": "things uh and the other thing that's",
    "start": "754560",
    "end": "756240"
  },
  {
    "text": "interesting is it could be applied to",
    "start": "756240",
    "end": "757800"
  },
  {
    "text": "other problems",
    "start": "757800",
    "end": "759480"
  },
  {
    "text": "thanp um and to take a step back how",
    "start": "759480",
    "end": "761839"
  },
  {
    "text": "this whole idea started um was that when",
    "start": "761839",
    "end": "766160"
  },
  {
    "text": "ios8 was released one change we noticed",
    "start": "766160",
    "end": "769000"
  },
  {
    "text": "was that uh Apple started allowing",
    "start": "769000",
    "end": "771519"
  },
  {
    "text": "Dynamic libraries to be embedded in apps",
    "start": "771519",
    "end": "774560"
  },
  {
    "text": "um and Eric and I have a lot of",
    "start": "774560",
    "end": "776680"
  },
  {
    "text": "experience working on uh tools schol CDs",
    "start": "776680",
    "end": "779600"
  },
  {
    "text": "subr twixs uh which also are Dynamic",
    "start": "779600",
    "end": "782480"
  },
  {
    "text": "libraries to modify apps on the Jan",
    "start": "782480",
    "end": "785040"
  },
  {
    "text": "device so it's used to kind of customize",
    "start": "785040",
    "end": "787440"
  },
  {
    "text": "your phone if it's joken uh and it's",
    "start": "787440",
    "end": "790120"
  },
  {
    "text": "also used in security where you have a",
    "start": "790120",
    "end": "792120"
  },
  {
    "text": "lot of security tools that are based on",
    "start": "792120",
    "end": "793880"
  },
  {
    "text": "C substrate to I've worked on some of",
    "start": "793880",
    "end": "796040"
  },
  {
    "text": "these like SSL k switch uh tools to make",
    "start": "796040",
    "end": "798680"
  },
  {
    "text": "it easy to reverse engineer apps and",
    "start": "798680",
    "end": "800880"
  },
  {
    "text": "kind of try to understand how apps work",
    "start": "800880",
    "end": "803639"
  },
  {
    "text": "um so we kind of made that connection",
    "start": "803639",
    "end": "805800"
  },
  {
    "text": "where okay now Dynamics libraries are",
    "start": "805800",
    "end": "807600"
  },
  {
    "text": "allowed so would be able to use the same",
    "start": "807600",
    "end": "810360"
  },
  {
    "text": "techniques like CD tweaks um on a nonen",
    "start": "810360",
    "end": "814160"
  },
  {
    "text": "device in a normal app",
    "start": "814160",
    "end": "817399"
  },
  {
    "text": "um and now Eric is going to talk about",
    "start": "817399",
    "end": "820519"
  },
  {
    "text": "uh what it really means to have Dynamic",
    "start": "820519",
    "end": "822360"
  },
  {
    "text": "libraries in",
    "start": "822360",
    "end": "825000"
  },
  {
    "text": "I8 thanks Alin uh hi",
    "start": "825600",
    "end": "828480"
  },
  {
    "text": "everyone so before iOS 8 the only way",
    "start": "828480",
    "end": "833160"
  },
  {
    "text": "that applications interacted with",
    "start": "833160",
    "end": "834720"
  },
  {
    "text": "Dynamic libraries would be with those",
    "start": "834720",
    "end": "837040"
  },
  {
    "text": "that were pre-installing the system like",
    "start": "837040",
    "end": "839360"
  },
  {
    "text": "the Apple Frameworks like uh U kid or",
    "start": "839360",
    "end": "841560"
  },
  {
    "text": "core Foundation um some a few Unix",
    "start": "841560",
    "end": "845560"
  },
  {
    "text": "libraries like cite or Z lip uh so if we",
    "start": "845560",
    "end": "849079"
  },
  {
    "text": "wanted to create our own libraries the",
    "start": "849079",
    "end": "851120"
  },
  {
    "text": "only thing that we could do would be",
    "start": "851120",
    "end": "852600"
  },
  {
    "text": "static libraries and this was enforced",
    "start": "852600",
    "end": "854959"
  },
  {
    "text": "by the App Store review process because",
    "start": "854959",
    "end": "857320"
  },
  {
    "text": "at that time um Apple didn't really have",
    "start": "857320",
    "end": "860399"
  },
  {
    "text": "a reason to allow Dynamic libraries",
    "start": "860399",
    "end": "862440"
  },
  {
    "text": "because applications would consist of",
    "start": "862440",
    "end": "864759"
  },
  {
    "text": "only one single",
    "start": "864759",
    "end": "866160"
  },
  {
    "text": "executable and they because of the",
    "start": "866160",
    "end": "868240"
  },
  {
    "text": "sandbox there would be no way that",
    "start": "868240",
    "end": "870079"
  },
  {
    "text": "applications could interact with other",
    "start": "870079",
    "end": "872079"
  },
  {
    "text": "applications uh through shared code",
    "start": "872079",
    "end": "874959"
  },
  {
    "text": "through a dynamic Library",
    "start": "874959",
    "end": "877480"
  },
  {
    "text": "so but now now that has changed in iOS 8",
    "start": "877480",
    "end": "880519"
  },
  {
    "text": "because Apple introduced app extensions",
    "start": "880519",
    "end": "882720"
  },
  {
    "text": "which allow uh developers to create uh",
    "start": "882720",
    "end": "885839"
  },
  {
    "text": "functionality that it's outside of the",
    "start": "885839",
    "end": "887839"
  },
  {
    "text": "application",
    "start": "887839",
    "end": "889079"
  },
  {
    "text": "context so now you can create these",
    "start": "889079",
    "end": "891120"
  },
  {
    "text": "things like uh widgets for notification",
    "start": "891120",
    "end": "893320"
  },
  {
    "text": "center or custom keyboards uh Apple",
    "start": "893320",
    "end": "896120"
  },
  {
    "text": "watch extensions or photo filters uh but",
    "start": "896120",
    "end": "899079"
  },
  {
    "text": "none of these are part of the main",
    "start": "899079",
    "end": "900600"
  },
  {
    "text": "executable these are separate",
    "start": "900600",
    "end": "902199"
  },
  {
    "text": "executables so it made total sense that",
    "start": "902199",
    "end": "904440"
  },
  {
    "text": "Apple would start allowing Dynamic",
    "start": "904440",
    "end": "906120"
  },
  {
    "text": "libraries because especially now that",
    "start": "906120",
    "end": "907839"
  },
  {
    "text": "they're caring so much about the uh the",
    "start": "907839",
    "end": "910440"
  },
  {
    "text": "application size on disk uh and you can",
    "start": "910440",
    "end": "912759"
  },
  {
    "text": "see that as well with iOS 9 with",
    "start": "912759",
    "end": "914759"
  },
  {
    "text": "features like uh app thinning app",
    "start": "914759",
    "end": "917680"
  },
  {
    "text": "slicing um so yeah so Dynamic libraries",
    "start": "917680",
    "end": "921399"
  },
  {
    "text": "help reduce the application size when",
    "start": "921399",
    "end": "923040"
  },
  {
    "text": "you have several",
    "start": "923040",
    "end": "925240"
  },
  {
    "text": "executables and but we saw that it's not",
    "start": "925240",
    "end": "928199"
  },
  {
    "text": "really necessary to implement an",
    "start": "928199",
    "end": "929759"
  },
  {
    "text": "extension um if we want to use a dynamic",
    "start": "929759",
    "end": "932680"
  },
  {
    "text": "library in our in our project so that's",
    "start": "932680",
    "end": "934959"
  },
  {
    "text": "what we did with trit so you could see",
    "start": "934959",
    "end": "936680"
  },
  {
    "text": "if you if you saw in the demo it's just",
    "start": "936680",
    "end": "938560"
  },
  {
    "text": "we just drag and drop our framework to",
    "start": "938560",
    "end": "940959"
  },
  {
    "text": "our project and what's happening behind",
    "start": "940959",
    "end": "943160"
  },
  {
    "text": "the scenes is that uh so a dynamic",
    "start": "943160",
    "end": "946000"
  },
  {
    "text": "Library dependency is being created uh",
    "start": "946000",
    "end": "948160"
  },
  {
    "text": "in the Maco binary that uh we're",
    "start": "948160",
    "end": "950880"
  },
  {
    "text": "building that that's our app and it's",
    "start": "950880",
    "end": "953120"
  },
  {
    "text": "creating a load command structure so if",
    "start": "953120",
    "end": "955600"
  },
  {
    "text": "you've done some reverse engineering or",
    "start": "955600",
    "end": "957519"
  },
  {
    "text": "security research in iOS or OS 10 you're",
    "start": "957519",
    "end": "959600"
  },
  {
    "text": "probably familiar with the uh with the",
    "start": "959600",
    "end": "961120"
  },
  {
    "text": "Maco 5 format which is the one for iOS",
    "start": "961120",
    "end": "963880"
  },
  {
    "text": "and and Os 10 the Executive also have",
    "start": "963880",
    "end": "966319"
  },
  {
    "text": "this layout um and so the executables",
    "start": "966319",
    "end": "970000"
  },
  {
    "text": "are going to interact with the dynamic",
    "start": "970000",
    "end": "971600"
  },
  {
    "text": "Linker which is called dld which is",
    "start": "971600",
    "end": "973959"
  },
  {
    "text": "going to be responsible for loading our",
    "start": "973959",
    "end": "975920"
  },
  {
    "text": "libraries at",
    "start": "975920",
    "end": "978360"
  },
  {
    "text": "runtime and then because we're in a",
    "start": "978360",
    "end": "980839"
  },
  {
    "text": "sandbox environment uh xcode it's going",
    "start": "980839",
    "end": "983199"
  },
  {
    "text": "to package our Dynamic libraries within",
    "start": "983199",
    "end": "985920"
  },
  {
    "text": "the apps bundle and the way dial is",
    "start": "985920",
    "end": "989240"
  },
  {
    "text": "going to uh find them it's going to use",
    "start": "989240",
    "end": "992240"
  },
  {
    "text": "uh uh couple prefixes in the load",
    "start": "992240",
    "end": "995000"
  },
  {
    "text": "command structure one of them is for",
    "start": "995000",
    "end": "996560"
  },
  {
    "text": "example the executable path which points",
    "start": "996560",
    "end": "999079"
  },
  {
    "text": "to the full path in the in the apps uh",
    "start": "999079",
    "end": "1003040"
  },
  {
    "text": "the apps it's the app folder in the",
    "start": "1003040",
    "end": "1004959"
  },
  {
    "text": "within the device inside the sandbox and",
    "start": "1004959",
    "end": "1006880"
  },
  {
    "text": "then there's the r path uh prefix that",
    "start": "1006880",
    "end": "1009360"
  },
  {
    "text": "allows for multiple uh search path",
    "start": "1009360",
    "end": "1011839"
  },
  {
    "text": "locations for libraries but then again",
    "start": "1011839",
    "end": "1013600"
  },
  {
    "text": "because we're in a sandbox in iOS this",
    "start": "1013600",
    "end": "1015720"
  },
  {
    "text": "is limited to only one single location",
    "start": "1015720",
    "end": "1017839"
  },
  {
    "text": "which is a frame Works folder that is",
    "start": "1017839",
    "end": "1020319"
  },
  {
    "text": "created by uh xcode uh when when we",
    "start": "1020319",
    "end": "1022959"
  },
  {
    "text": "build our",
    "start": "1022959",
    "end": "1024438"
  },
  {
    "text": "app and so if we if we check our our",
    "start": "1024439",
    "end": "1027678"
  },
  {
    "text": "application in in a tool like Macco view",
    "start": "1027679",
    "end": "1029720"
  },
  {
    "text": "which allows us to to inspect the macro",
    "start": "1029720",
    "end": "1031918"
  },
  {
    "text": "structure of our binary we can see that",
    "start": "1031919",
    "end": "1034199"
  },
  {
    "text": "that we have our load command our load",
    "start": "1034199",
    "end": "1036600"
  },
  {
    "text": "diip command referencing our trust kit",
    "start": "1036600",
    "end": "1038839"
  },
  {
    "text": "uh library and so we see uh the path uh",
    "start": "1038839",
    "end": "1042558"
  },
  {
    "text": "so it's located in a in the typical do",
    "start": "1042559",
    "end": "1045280"
  },
  {
    "text": "framework folder and then if we see if",
    "start": "1045280",
    "end": "1047438"
  },
  {
    "text": "we replace the the the value of the rpth",
    "start": "1047439",
    "end": "1050760"
  },
  {
    "text": "prefix with the contents of the load",
    "start": "1050760",
    "end": "1053200"
  },
  {
    "text": "command uh the rpth we can see that",
    "start": "1053200",
    "end": "1056400"
  },
  {
    "text": "indeed there is a Frameworks folder that",
    "start": "1056400",
    "end": "1058200"
  },
  {
    "text": "it's inside the executable path again",
    "start": "1058200",
    "end": "1060520"
  },
  {
    "text": "that's Thea folder that it's in the",
    "start": "1060520",
    "end": "1063440"
  },
  {
    "text": "device uh the full path to it so cool we",
    "start": "1063440",
    "end": "1066960"
  },
  {
    "text": "now know how libraries are loaded in iOS",
    "start": "1066960",
    "end": "1069280"
  },
  {
    "text": "8 which is no different from OS 10 but",
    "start": "1069280",
    "end": "1071320"
  },
  {
    "text": "this is kind of new in iOS 8 um and then",
    "start": "1071320",
    "end": "1074960"
  },
  {
    "text": "uh we needed something uh to initialize",
    "start": "1074960",
    "end": "1078159"
  },
  {
    "text": "our our library uh so we can make use of",
    "start": "1078159",
    "end": "1081880"
  },
  {
    "text": "um something that is called the",
    "start": "1081880",
    "end": "1083760"
  },
  {
    "text": "constructors Dynamic libraries can have",
    "start": "1083760",
    "end": "1085440"
  },
  {
    "text": "Constructors which is basically a c",
    "start": "1085440",
    "end": "1087799"
  },
  {
    "text": "function uh that it's called when the",
    "start": "1087799",
    "end": "1090080"
  },
  {
    "text": "library gets loaded by dial in",
    "start": "1090080",
    "end": "1092799"
  },
  {
    "text": "memory so and and because this function",
    "start": "1092799",
    "end": "1096600"
  },
  {
    "text": "gets gets executed before the app starts",
    "start": "1096600",
    "end": "1099480"
  },
  {
    "text": "it's the perfect place to initialize our",
    "start": "1099480",
    "end": "1101520"
  },
  {
    "text": "hooks or our patches or Replacements and",
    "start": "1101520",
    "end": "1104600"
  },
  {
    "text": "if we had any settings we can use this",
    "start": "1104600",
    "end": "1106400"
  },
  {
    "text": "to uh to to initialize our settings so",
    "start": "1106400",
    "end": "1109200"
  },
  {
    "text": "if you see if you look at the fourth uh",
    "start": "1109200",
    "end": "1111200"
  },
  {
    "text": "bullet point that's what it looks like",
    "start": "1111200",
    "end": "1113159"
  },
  {
    "text": "it's again it's just a static C function",
    "start": "1113159",
    "end": "1115440"
  },
  {
    "text": "with the Constructor",
    "start": "1115440",
    "end": "1117559"
  },
  {
    "text": "attribute so to make a quick recap um we",
    "start": "1117559",
    "end": "1121240"
  },
  {
    "text": "when we added this dependency on our",
    "start": "1121240",
    "end": "1123120"
  },
  {
    "text": "project uh we were creating this load",
    "start": "1123120",
    "end": "1125520"
  },
  {
    "text": "command that will basically allow the",
    "start": "1125520",
    "end": "1128159"
  },
  {
    "text": "diip to get to get automatically loaded",
    "start": "1128159",
    "end": "1130760"
  },
  {
    "text": "when the app starts and then there's",
    "start": "1130760",
    "end": "1133280"
  },
  {
    "text": "going to be the Constructor that is",
    "start": "1133280",
    "end": "1134320"
  },
  {
    "text": "going to get called right after that and",
    "start": "1134320",
    "end": "1136919"
  },
  {
    "text": "so um basically",
    "start": "1136919",
    "end": "1139440"
  },
  {
    "text": "uh this whole thing takes care of the",
    "start": "1139440",
    "end": "1142120"
  },
  {
    "text": "injection process of our library which",
    "start": "1142120",
    "end": "1144120"
  },
  {
    "text": "is different from what we were used to",
    "start": "1144120",
    "end": "1145799"
  },
  {
    "text": "in our J broken environment um but uh so",
    "start": "1145799",
    "end": "1149880"
  },
  {
    "text": "now we can solve that with with the just",
    "start": "1149880",
    "end": "1151520"
  },
  {
    "text": "the dependency mechanism and then the",
    "start": "1151520",
    "end": "1153679"
  },
  {
    "text": "only thing that was left is okay so we",
    "start": "1153679",
    "end": "1155679"
  },
  {
    "text": "need to hook into functions into C",
    "start": "1155679",
    "end": "1157960"
  },
  {
    "text": "functions which again is different from",
    "start": "1157960",
    "end": "1160799"
  },
  {
    "text": "uh method swiftlink because uh again",
    "start": "1160799",
    "end": "1163080"
  },
  {
    "text": "we're with trusted we're trying to make",
    "start": "1163080",
    "end": "1165360"
  },
  {
    "text": "modifications in Secure transport which",
    "start": "1165360",
    "end": "1166840"
  },
  {
    "text": "is a API C API so so um so now alin's",
    "start": "1166840",
    "end": "1170799"
  },
  {
    "text": "going to tell you about a couple",
    "start": "1170799",
    "end": "1172200"
  },
  {
    "text": "Alternatives that we that we use and the",
    "start": "1172200",
    "end": "1174159"
  },
  {
    "text": "problems we had and um how we solve",
    "start": "1174159",
    "end": "1177559"
  },
  {
    "text": "it thanks Eric um yes so function",
    "start": "1177559",
    "end": "1181480"
  },
  {
    "text": "hooking on a non broken device uh again",
    "start": "1181480",
    "end": "1183679"
  },
  {
    "text": "C function hooking not me sing we tried",
    "start": "1183679",
    "end": "1186039"
  },
  {
    "text": "a few things the first obvious attempt",
    "start": "1186039",
    "end": "1188159"
  },
  {
    "text": "was to just try to package a c subr",
    "start": "1188159",
    "end": "1190200"
  },
  {
    "text": "tweak into an app um so I just used an",
    "start": "1190200",
    "end": "1193120"
  },
  {
    "text": "existing twe that I've worked on called",
    "start": "1193120",
    "end": "1194720"
  },
  {
    "text": "slq switch um and so you kind of have to",
    "start": "1194720",
    "end": "1197280"
  },
  {
    "text": "make some modifications into the app uh",
    "start": "1197280",
    "end": "1200640"
  },
  {
    "text": "embed C subrate code sign the whole",
    "start": "1200640",
    "end": "1202559"
  },
  {
    "text": "thing there's some setup but then you",
    "start": "1202559",
    "end": "1204679"
  },
  {
    "text": "can get an app with that's loading a",
    "start": "1204679",
    "end": "1206520"
  },
  {
    "text": "tweak uh but once you try to start the",
    "start": "1206520",
    "end": "1209159"
  },
  {
    "text": "app you get a crash uh you get a CQ code",
    "start": "1209159",
    "end": "1213360"
  },
  {
    "text": "signing um and if you look at the stack",
    "start": "1213360",
    "end": "1215799"
  },
  {
    "text": "trace for the crash it's at the very",
    "start": "1215799",
    "end": "1217240"
  },
  {
    "text": "beginning of the when the app tries to",
    "start": "1217240",
    "end": "1219360"
  },
  {
    "text": "get started you have a stack trace and",
    "start": "1219360",
    "end": "1221520"
  },
  {
    "text": "in the stack Trace uh you have uh",
    "start": "1221520",
    "end": "1224840"
  },
  {
    "text": "basically the first thing is the DI",
    "start": "1224840",
    "end": "1226760"
  },
  {
    "text": "Constructor the Twix Constructor",
    "start": "1226760",
    "end": "1229240"
  },
  {
    "text": "um and then it's calling Ms function",
    "start": "1229240",
    "end": "1231720"
  },
  {
    "text": "hook in CDs substrate and it crashes",
    "start": "1231720",
    "end": "1233960"
  },
  {
    "text": "when you call Ms function hook uh if you",
    "start": "1233960",
    "end": "1236640"
  },
  {
    "text": "view C substrate before uh Ms function",
    "start": "1236640",
    "end": "1239200"
  },
  {
    "text": "Hook is the function you used to replace",
    "start": "1239200",
    "end": "1240720"
  },
  {
    "text": "C functions so let's say you want to",
    "start": "1240720",
    "end": "1242120"
  },
  {
    "text": "replace maloc with your own",
    "start": "1242120",
    "end": "1244159"
  },
  {
    "text": "implementation uh you would use Ms",
    "start": "1244159",
    "end": "1245919"
  },
  {
    "text": "function hook to say okay replace my log",
    "start": "1245919",
    "end": "1247679"
  },
  {
    "text": "with this uh but so when you call it on",
    "start": "1247679",
    "end": "1250360"
  },
  {
    "text": "a know device it crashes and the reason",
    "start": "1250360",
    "end": "1252840"
  },
  {
    "text": "for that uh without going into the",
    "start": "1252840",
    "end": "1254440"
  },
  {
    "text": "details is basically um the way",
    "start": "1254440",
    "end": "1257360"
  },
  {
    "text": "substrate hooks function is by actually",
    "start": "1257360",
    "end": "1259640"
  },
  {
    "text": "modifying the very beginning of the",
    "start": "1259640",
    "end": "1261159"
  },
  {
    "text": "function in memory so it replaces",
    "start": "1261159",
    "end": "1264240"
  },
  {
    "text": "instructions so that when that function",
    "start": "1264240",
    "end": "1266039"
  },
  {
    "text": "gets called it actually jumps to your",
    "start": "1266039",
    "end": "1267400"
  },
  {
    "text": "own",
    "start": "1267400",
    "end": "1268360"
  },
  {
    "text": "implementation um so basically it's self",
    "start": "1268360",
    "end": "1270520"
  },
  {
    "text": "modifying code which is not something",
    "start": "1270520",
    "end": "1272400"
  },
  {
    "text": "you can do on on a nonen device uh",
    "start": "1272400",
    "end": "1274919"
  },
  {
    "text": "because you need memory Pages where you",
    "start": "1274919",
    "end": "1276080"
  },
  {
    "text": "can write code and then execute it um",
    "start": "1276080",
    "end": "1278679"
  },
  {
    "text": "and there's a safety mechanism that",
    "start": "1278679",
    "end": "1280039"
  },
  {
    "text": "won't let you do that uh won't let you",
    "start": "1280039",
    "end": "1282760"
  },
  {
    "text": "do that unless you're running in a",
    "start": "1282760",
    "end": "1284559"
  },
  {
    "text": "deburger so just so you know if you ever",
    "start": "1284559",
    "end": "1287039"
  },
  {
    "text": "need to run a TDS tweak on a Nonet",
    "start": "1287039",
    "end": "1289760"
  },
  {
    "text": "device you can but you need to be in",
    "start": "1289760",
    "end": "1291360"
  },
  {
    "text": "running in a debugger um but for a",
    "start": "1291360",
    "end": "1295480"
  },
  {
    "text": "normal app store app um it's not going",
    "start": "1295480",
    "end": "1299360"
  },
  {
    "text": "to run in a debugger people downloading",
    "start": "1299360",
    "end": "1300919"
  },
  {
    "text": "the app are not going to be running",
    "start": "1300919",
    "end": "1302320"
  },
  {
    "text": "running it in a debugger so there's just",
    "start": "1302320",
    "end": "1304120"
  },
  {
    "text": "no way and that first failed there's no",
    "start": "1304120",
    "end": "1306520"
  },
  {
    "text": "way to package a tweak into a normal app",
    "start": "1306520",
    "end": "1308640"
  },
  {
    "text": "store app um something else we tried",
    "start": "1308640",
    "end": "1312360"
  },
  {
    "text": "it's kind of a well-known technique uh",
    "start": "1312360",
    "end": "1314760"
  },
  {
    "text": "Del install libraries uh so it's an",
    "start": "1314760",
    "end": "1317000"
  },
  {
    "text": "environment viable just like LD preload",
    "start": "1317000",
    "end": "1318919"
  },
  {
    "text": "on Linux uh where you can load get your",
    "start": "1318919",
    "end": "1321679"
  },
  {
    "text": "library to load and say okay I want to",
    "start": "1321679",
    "end": "1324120"
  },
  {
    "text": "replace these symbols for example again",
    "start": "1324120",
    "end": "1327000"
  },
  {
    "text": "maloc with my own function uh so it's",
    "start": "1327000",
    "end": "1330440"
  },
  {
    "text": "symbol rebinding it only works with",
    "start": "1330440",
    "end": "1332120"
  },
  {
    "text": "exported function so you cannot modify a",
    "start": "1332120",
    "end": "1335159"
  },
  {
    "text": "function that's private to the app",
    "start": "1335159",
    "end": "1336600"
  },
  {
    "text": "that's inside the app but any of the",
    "start": "1336600",
    "end": "1339360"
  },
  {
    "text": "dependencies uh where there's like",
    "start": "1339360",
    "end": "1341799"
  },
  {
    "text": "symbols you can replace them with that",
    "start": "1341799",
    "end": "1344240"
  },
  {
    "text": "technique um the problem with uh an",
    "start": "1344240",
    "end": "1348159"
  },
  {
    "text": "environment environment viable sorry is",
    "start": "1348159",
    "end": "1351000"
  },
  {
    "text": "that you cannot set an environment",
    "start": "1351000",
    "end": "1352400"
  },
  {
    "text": "viable in an iOS app um you can index",
    "start": "1352400",
    "end": "1355400"
  },
  {
    "text": "code when you're testing your app but",
    "start": "1355400",
    "end": "1357480"
  },
  {
    "text": "again people downloading your app uh on",
    "start": "1357480",
    "end": "1359400"
  },
  {
    "text": "the App Store there's no way you can set",
    "start": "1359400",
    "end": "1362279"
  },
  {
    "text": "an environment viable um so basically",
    "start": "1362279",
    "end": "1365919"
  },
  {
    "text": "there's no way to use that",
    "start": "1365919",
    "end": "1368400"
  },
  {
    "text": "either um and then the last attempt um",
    "start": "1368400",
    "end": "1372799"
  },
  {
    "text": "is that it turns out there are there",
    "start": "1372799",
    "end": "1374279"
  },
  {
    "text": "have been some new libraries that were",
    "start": "1374279",
    "end": "1375760"
  },
  {
    "text": "released that also do symbol rebinding",
    "start": "1375760",
    "end": "1379159"
  },
  {
    "text": "uh just like Del libraries but at",
    "start": "1379159",
    "end": "1381520"
  },
  {
    "text": "runtime so it's Dynamic symbol reminding",
    "start": "1381520",
    "end": "1384400"
  },
  {
    "text": "there's one from comx called",
    "start": "1384400",
    "end": "1386240"
  },
  {
    "text": "substitute um and substitute does many",
    "start": "1386240",
    "end": "1389080"
  },
  {
    "text": "different things it can hook functions",
    "start": "1389080",
    "end": "1391840"
  },
  {
    "text": "just like substrate by actually patching",
    "start": "1391840",
    "end": "1393720"
  },
  {
    "text": "the function memory but it also has one",
    "start": "1393720",
    "end": "1395600"
  },
  {
    "text": "specific function to do that",
    "start": "1395600",
    "end": "1397400"
  },
  {
    "text": "interposition which is going to work on",
    "start": "1397400",
    "end": "1399120"
  },
  {
    "text": "an non work device and the other one is",
    "start": "1399120",
    "end": "1401080"
  },
  {
    "text": "from Facebook called Fish Hook uh and",
    "start": "1401080",
    "end": "1403720"
  },
  {
    "text": "it's the same thing and if you actually",
    "start": "1403720",
    "end": "1405400"
  },
  {
    "text": "try to use these on a nonan device it",
    "start": "1405400",
    "end": "1407640"
  },
  {
    "text": "actually works",
    "start": "1407640",
    "end": "1409320"
  },
  {
    "text": "um so you're able to uh modify replace",
    "start": "1409320",
    "end": "1413159"
  },
  {
    "text": "symbols and make changes to the m um and",
    "start": "1413159",
    "end": "1418159"
  },
  {
    "text": "so going back to",
    "start": "1418159",
    "end": "1419279"
  },
  {
    "text": "trusk now it's kind of the recap of how",
    "start": "1419279",
    "end": "1421720"
  },
  {
    "text": "it really works uh when you add trk to",
    "start": "1421720",
    "end": "1424279"
  },
  {
    "text": "your ex to your app inex code it puts",
    "start": "1424279",
    "end": "1426679"
  },
  {
    "text": "the dynamic Library into the apps",
    "start": "1426679",
    "end": "1428080"
  },
  {
    "text": "package and then it adds a load command",
    "start": "1428080",
    "end": "1430720"
  },
  {
    "text": "to the to your app so that when the app",
    "start": "1430720",
    "end": "1433000"
  },
  {
    "text": "starts trk is also",
    "start": "1433000",
    "end": "1435200"
  },
  {
    "text": "loaded when tret is loaded uh it has a",
    "start": "1435200",
    "end": "1438159"
  },
  {
    "text": "conru Constructor that's defined and so",
    "start": "1438159",
    "end": "1440039"
  },
  {
    "text": "that Constructor gets run uh and what it",
    "start": "1440039",
    "end": "1442440"
  },
  {
    "text": "does it gets the pining policy from the",
    "start": "1442440",
    "end": "1444279"
  },
  {
    "text": "Manifest and then it sets up some hooks",
    "start": "1444279",
    "end": "1446799"
  },
  {
    "text": "in Secure transport and specifically uh",
    "start": "1446799",
    "end": "1449480"
  },
  {
    "text": "it's extending that function called SSL",
    "start": "1449480",
    "end": "1451799"
  },
  {
    "text": "handshake which obviously takes care of",
    "start": "1451799",
    "end": "1453640"
  },
  {
    "text": "the SSL handshake uh and so it's",
    "start": "1453640",
    "end": "1455840"
  },
  {
    "text": "extended to do SSR",
    "start": "1455840",
    "end": "1457640"
  },
  {
    "text": "pinning uh and for patching that",
    "start": "1457640",
    "end": "1460600"
  },
  {
    "text": "function we we're using Facebook fish",
    "start": "1460600",
    "end": "1462400"
  },
  {
    "text": "hook um and that's why as you saw in the",
    "start": "1462400",
    "end": "1466480"
  },
  {
    "text": "demo the only thing I had to do was to",
    "start": "1466480",
    "end": "1468240"
  },
  {
    "text": "just drug and drop it uh and I didn't",
    "start": "1468240",
    "end": "1471159"
  },
  {
    "text": "actually change the app source code uh",
    "start": "1471159",
    "end": "1473799"
  },
  {
    "text": "this was just all taken care of um so",
    "start": "1473799",
    "end": "1477240"
  },
  {
    "text": "that's how it works um so you should try",
    "start": "1477240",
    "end": "1480000"
  },
  {
    "text": "it out it's open source since today uh",
    "start": "1480000",
    "end": "1482559"
  },
  {
    "text": "very open licensed works on iOS and Os",
    "start": "1482559",
    "end": "1485320"
  },
  {
    "text": "10 uh and it's already on the App Store",
    "start": "1485320",
    "end": "1488120"
  },
  {
    "text": "it's not a proof of concept uh it's not",
    "start": "1488120",
    "end": "1490720"
  },
  {
    "text": "an idea it's live on the store right now",
    "start": "1490720",
    "end": "1493840"
  },
  {
    "text": "in one of the Yahoo apps and another app",
    "start": "1493840",
    "end": "1495880"
  },
  {
    "text": "as well um and we're working with other",
    "start": "1495880",
    "end": "1498919"
  },
  {
    "text": "companies um who are interested in using",
    "start": "1498919",
    "end": "1502080"
  },
  {
    "text": "it as well uh the more people use it the",
    "start": "1502080",
    "end": "1504760"
  },
  {
    "text": "better so you should definitely try it",
    "start": "1504760",
    "end": "1506039"
  },
  {
    "text": "out and let us know what you think uh",
    "start": "1506039",
    "end": "1508399"
  },
  {
    "text": "and hopefully it'll be useful to you as",
    "start": "1508399",
    "end": "1510120"
  },
  {
    "text": "well and that's it thanks",
    "start": "1510120",
    "end": "1514200"
  },
  {
    "text": "[Applause]",
    "start": "1514200",
    "end": "1517320"
  },
  {
    "text": "everyone any",
    "start": "1517320",
    "end": "1519559"
  },
  {
    "text": "question so we have like 20 seconds I",
    "start": "1519559",
    "end": "1522440"
  },
  {
    "text": "don't know if we have time for a",
    "start": "1522440",
    "end": "1523520"
  },
  {
    "text": "question uh but come talk to us at the",
    "start": "1523520",
    "end": "1526360"
  },
  {
    "text": "end if you want to know more uh that's",
    "start": "1526360",
    "end": "1528880"
  },
  {
    "text": "fine uh and since I have 15 seconds uh",
    "start": "1528880",
    "end": "1532480"
  },
  {
    "text": "there's one last thing if you need to do",
    "start": "1532480",
    "end": "1534640"
  },
  {
    "text": "security research on an app that's using",
    "start": "1534640",
    "end": "1536360"
  },
  {
    "text": "trust kit I also released a tool uh to",
    "start": "1536360",
    "end": "1539480"
  },
  {
    "text": "disable trust kit on a Jaan device uh so",
    "start": "1539480",
    "end": "1541840"
  },
  {
    "text": "it's called SQ switch 2 um so don't",
    "start": "1541840",
    "end": "1545720"
  },
  {
    "text": "spend days trying to bypass it I've",
    "start": "1545720",
    "end": "1547640"
  },
  {
    "text": "already done it uh again it's on a Jan",
    "start": "1547640",
    "end": "1550080"
  },
  {
    "text": "device so it's not the threat model",
    "start": "1550080",
    "end": "1552240"
  },
  {
    "text": "ofing uh so that might be useful as",
    "start": "1552240",
    "end": "1555159"
  },
  {
    "text": "well all right thanks everyone",
    "start": "1555159",
    "end": "1560200"
  },
  {
    "text": "am",
    "start": "1560960",
    "end": "1563960"
  }
]