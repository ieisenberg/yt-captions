[
  {
    "text": "[Music]",
    "start": "3520",
    "end": "7840"
  },
  {
    "text": "welcome back if you're with me in my session earlier very good to see you I would actually like to introduce myself",
    "start": "12730",
    "end": "19310"
  },
  {
    "text": "since I skipped that part this morning my name is Kim Bergland and I run the developer relations team at confluent",
    "start": "19310",
    "end": "26740"
  },
  {
    "text": "confluent is a company not to be confused with confluence which is a wiki",
    "start": "26740",
    "end": "32450"
  },
  {
    "text": "product made by Atlassian confluent is a company that makes a streaming data",
    "start": "32450",
    "end": "37489"
  },
  {
    "text": "platform based on Apache Kafka and that's mostly what I talk about and",
    "start": "37489",
    "end": "43180"
  },
  {
    "text": "today we're gonna be talking about this think a sequel which is a stream processing sequel like stream processing",
    "start": "43180",
    "end": "48620"
  },
  {
    "text": "language for Kafka why oh it's always",
    "start": "48620",
    "end": "56000"
  },
  {
    "text": "good to know by show of hands who is very new to Kafka hands look at all of",
    "start": "56000",
    "end": "62210"
  },
  {
    "text": "those hands we're gonna spend some time in the introduction I'm not even gonna bother asking who is not new to Kafka",
    "start": "62210",
    "end": "68479"
  },
  {
    "text": "because you're outnumbered so yeah what we're gonna do is we're gonna talk about",
    "start": "68479",
    "end": "74240"
  },
  {
    "text": "Kafka architectural II and just from from a very big picture what what it's",
    "start": "74240",
    "end": "79400"
  },
  {
    "text": "all about and enough I want to talk about it enough to illustrate why you",
    "start": "79400",
    "end": "85190"
  },
  {
    "text": "would need a thing like this then we'll talk through the syntax of K sequel then",
    "start": "85190",
    "end": "90770"
  },
  {
    "text": "there's a demo I will live code some things I could make mistakes it will be exciting it will be like pair",
    "start": "90770",
    "end": "97370"
  },
  {
    "text": "programming except there are I don't know 250 of you but that's good those",
    "start": "97370",
    "end": "103460"
  },
  {
    "text": "are good odds you would definitely see my mistakes every I think this is the",
    "start": "103460",
    "end": "109159"
  },
  {
    "text": "simplest Kafka architecture diagram you'll ever see every system that does anything with Kafka will in some way conform to this",
    "start": "109159",
    "end": "116229"
  },
  {
    "text": "diagram in the middle you have the actual Kafka cluster those things called brokers and that is a group of machines",
    "start": "116229",
    "end": "124340"
  },
  {
    "text": "that are storing messages and receiving",
    "start": "124340",
    "end": "129640"
  },
  {
    "text": "you know new messages being produced into them and serving up messages that are being consumed that's kind of what",
    "start": "129640",
    "end": "136370"
  },
  {
    "text": "brokers do they store and they do the pubbing and they do the subbing that just kind of basic io functions",
    "start": "136370",
    "end": "143299"
  },
  {
    "text": "they also handle replication between each other and just that that bread and",
    "start": "143299",
    "end": "148549"
  },
  {
    "text": "butter how to be a distributed event log kind of stuff that's what brokers do",
    "start": "148549",
    "end": "153640"
  },
  {
    "text": "there is also famously gets left off on slides these days zookeeper in there hey",
    "start": "153640",
    "end": "161450"
  },
  {
    "text": "by the way do I these buttons no my countdown is not counting down and I'll",
    "start": "161450",
    "end": "167420"
  },
  {
    "text": "keep track at a time but we end at at 4:40 I believe let's go with 4:40 hey",
    "start": "167420",
    "end": "176450"
  },
  {
    "text": "countdown it's kind of gone now thank you okay anyway there's a zookeeper in there that always gets ignored why cuz",
    "start": "176450",
    "end": "182299"
  },
  {
    "text": "nobody likes zookeeper it's this thing that's part of Kafka and people who are",
    "start": "182299",
    "end": "187819"
  },
  {
    "text": "part of the Kafka community always hate it and are always trying to kill it and actually interestingly this is not the",
    "start": "187819",
    "end": "193010"
  },
  {
    "text": "subject of today's talk but zookeeper is now officially marked for destruction",
    "start": "193010",
    "end": "198530"
  },
  {
    "text": "there was a plan in the Kafka community that the way development is organized is",
    "start": "198530",
    "end": "204980"
  },
  {
    "text": "through these things called Kipps a Kafka Improvement proposal and kept 500 a nice even round number was accepted a",
    "start": "204980",
    "end": "211790"
  },
  {
    "text": "few months ago and that is that is the plan to remove zookeeper altogether so if you're wondering like I thought there's a zookeeper why is he not",
    "start": "211790",
    "end": "217970"
  },
  {
    "text": "showing it cuz we're ashamed of it no it's zookeepers zookeepers a wonderful piece of infrastructure that",
    "start": "217970",
    "end": "224239"
  },
  {
    "text": "has served well for more than a decade and it's it's it's being phased out anyway there's his brokers in the middle",
    "start": "224239",
    "end": "230540"
  },
  {
    "text": "that's the Kafka cluster proper everything outside that is an application and applications either produce or consume that's all you can do",
    "start": "230540",
    "end": "237530"
  },
  {
    "text": "and and you can write an application that's a producer where you have this API where you put a message in so have",
    "start": "237530",
    "end": "244190"
  },
  {
    "text": "this key value pair and I want to write it to a topic and it gets written or you can write an application that's a",
    "start": "244190",
    "end": "249530"
  },
  {
    "text": "consumer that says hey I want to subscribe to this topic let me know when a new message shows up that message being a key value pair so you put things",
    "start": "249530",
    "end": "255889"
  },
  {
    "text": "in you get things out and that is Kafka everything conforms to this diagram now",
    "start": "255889",
    "end": "262150"
  },
  {
    "text": "Kafka is also by reputation and in fact a system that is scalable and this is",
    "start": "262150",
    "end": "269090"
  },
  {
    "text": "how it gets that job done so the fundamental underlying abstraction in Kafka is a thing called a top",
    "start": "269090",
    "end": "275120"
  },
  {
    "text": "and that topic is a log right it's not a queue sometimes people refer to Kafka queues and I always ask them to stop",
    "start": "275120",
    "end": "284470"
  },
  {
    "text": "because it's a misleading word I mean there's there's kind of a there's sort of queue ordering but the idea behind a",
    "start": "284560",
    "end": "291290"
  },
  {
    "text": "queue is that it is in it is ephemeral in some way right like it's just kind of",
    "start": "291290",
    "end": "296330"
  },
  {
    "text": "there because the thing that's reading might be rebooting right now or have a",
    "start": "296330",
    "end": "301790"
  },
  {
    "text": "GC pause or just might get a little behind and you might be producing a little too fast you have kind of this buffering between things but once you",
    "start": "301790",
    "end": "308120"
  },
  {
    "text": "take something out of a queue it's gone right once you take something out of a Kafka topic it's not gone it's still",
    "start": "308120",
    "end": "313400"
  },
  {
    "text": "there the data persists and the data print will persist for as long as you want it to in a replicated form stored",
    "start": "313400",
    "end": "318500"
  },
  {
    "text": "on disks like it's a database so Kafka",
    "start": "318500",
    "end": "324260"
  },
  {
    "text": "is not a queue it is a log and it's a scalable log the way we scale is by we",
    "start": "324260",
    "end": "330650"
  },
  {
    "text": "can we take these these topics and we break them up into pieces so here I'm showing a topic that has three",
    "start": "330650",
    "end": "336350"
  },
  {
    "text": "partitions each one of those partitions could be stored on its own broker right its own completely independent computer",
    "start": "336350",
    "end": "342229"
  },
  {
    "text": "could be managing that storage and the writing and the reading so when you write into a topic in Kafka that",
    "start": "342229",
    "end": "349700"
  },
  {
    "text": "producer that's writing into the topic it has to decide where what partition to",
    "start": "349700",
    "end": "355460"
  },
  {
    "text": "write to write because specifically I mean it has to at the network layer it has to send a message to a computer or",
    "start": "355460",
    "end": "360560"
  },
  {
    "text": "somewhere and so that producer will do that it'll look at the message that it's sending that message is a key value pair",
    "start": "360560",
    "end": "366620"
  },
  {
    "text": "and it'll run the key through a hash function and based on that hash function it'll it'll assign that key to a",
    "start": "366620",
    "end": "373190"
  },
  {
    "text": "partition so the same key always gets assigned to the same partition that's that's that's sort of Kafka data",
    "start": "373190",
    "end": "380120"
  },
  {
    "text": "modeling right there now on the read side those consumers I want to talk about those because those highlight a",
    "start": "380120",
    "end": "385639"
  },
  {
    "text": "thing that makes K sequel very very necessary so I have some producer",
    "start": "385639",
    "end": "391520"
  },
  {
    "text": "process that's writing messages to a topic let's make something up I was talking about e-commerce this morning so",
    "start": "391520",
    "end": "398120"
  },
  {
    "text": "let's just go with that let's say that producer is an application that receives submitted orders from the web and",
    "start": "398120",
    "end": "404659"
  },
  {
    "text": "validates them and then writes them to this topic and so this topic is validated orders",
    "start": "404659",
    "end": "410510"
  },
  {
    "text": "now there are various services in our system that might want to consume those",
    "start": "410510",
    "end": "415710"
  },
  {
    "text": "validated orders and consumer group a and consumer Group B represent two of those services they're completely",
    "start": "415710",
    "end": "422520"
  },
  {
    "text": "independent programs they're reading at different places in the log you know they they're they're orthogonal to one",
    "start": "422520",
    "end": "428040"
  },
  {
    "text": "another you can have as many different consumers as you want reading from that log and they're scalable you notice the",
    "start": "428040",
    "end": "435690"
  },
  {
    "text": "the arrows there's two instances of each consumer and the top instance of consumer Group A is reading two",
    "start": "435690",
    "end": "441600"
  },
  {
    "text": "partitions that bottom instance is reading just one you see that and same",
    "start": "441600",
    "end": "447240"
  },
  {
    "text": "thing with consumer group B now I could add another instance of each one I could just say hey I want another container",
    "start": "447240",
    "end": "453300"
  },
  {
    "text": "running that same image of that that is consumer Group A and that that's just my",
    "start": "453300",
    "end": "458820"
  },
  {
    "text": "java application that reads from this topic and does its work and you know whatever that that program does I don't",
    "start": "458820",
    "end": "464490"
  },
  {
    "text": "know I could I can add another instance another container and kubernetes starts",
    "start": "464490",
    "end": "470820"
  },
  {
    "text": "it up on a pod everything's fine and now Kafka will say oh okay well that needs a partition and it will automatically take",
    "start": "470820",
    "end": "477330"
  },
  {
    "text": "one of the two partitions from that top instance and route it to the new one",
    "start": "477330",
    "end": "482610"
  },
  {
    "text": "so I'm able to scale out and and by the way to get this done to enable this you",
    "start": "482610",
    "end": "488790"
  },
  {
    "text": "have to do exactly nothing in the consumer API you're just writing consumer code getting messages processing messages they're coming in",
    "start": "488790",
    "end": "495570"
  },
  {
    "text": "from this topic and you're doing your thing with them and you are sort of accidentally a horizontally scalable",
    "start": "495570",
    "end": "500970"
  },
  {
    "text": "application so Kafka itself is horizontally scalable I partition topics",
    "start": "500970",
    "end": "506280"
  },
  {
    "text": "and I can assign those topics to multiple brokers and your consuming applications also become horizontally",
    "start": "506280",
    "end": "512940"
  },
  {
    "text": "scalable by virtue of the way Kafka assigns partitions to consumer",
    "start": "512940",
    "end": "518789"
  },
  {
    "text": "group instances that's very cool because we're all expected to be distributed",
    "start": "518790",
    "end": "525330"
  },
  {
    "text": "systems developers if you're with me this morning I told you but that was a very bad life choice but we sort of all",
    "start": "525330",
    "end": "532320"
  },
  {
    "text": "accidentally make it and without even realizing it you start building micro-services everybody's like well",
    "start": "532320",
    "end": "537930"
  },
  {
    "text": "those are horizontally scalable right oh yeah sure and you actually kind of get that for",
    "start": "537930",
    "end": "543810"
  },
  {
    "text": "free here what you don't get for free",
    "start": "543810",
    "end": "549180"
  },
  {
    "text": "though this is super important you have to read the brochure very carefully because you do get you do get horizontal",
    "start": "549180",
    "end": "555660"
  },
  {
    "text": "scalability in your consumer groups you don't get any help with state and so the consumer group api is saying oh yeah no",
    "start": "555660",
    "end": "562290"
  },
  {
    "text": "absolutely your horizontal scale but oh by the way you were stateless right and you're like well no I mean what two percent of what I do is stateless you",
    "start": "562290",
    "end": "568230"
  },
  {
    "text": "know it's I know that's sort of the the serverless dream is I just write these server lists stateless functions",
    "start": "568230",
    "end": "573839"
  },
  {
    "text": "everywhere but kind of nobody really does that so a stateful consumer group is difficult to scale here the when that",
    "start": "573839",
    "end": "582720"
  },
  {
    "text": "partition reassignment happens I've got stuff in memory if I'm stateful that remembers what has been happening with",
    "start": "582720",
    "end": "589529"
  },
  {
    "text": "the messages in that per se I'm averaging over the last minute I'm grouping by store number and averaging",
    "start": "589529",
    "end": "594959"
  },
  {
    "text": "sales over the last minute for my dashboard I don't know something like that well that that average that stuff I'm",
    "start": "594959",
    "end": "600240"
  },
  {
    "text": "collecting over that window well that's state that's a data structure in memory and when that partition goes from one of",
    "start": "600240",
    "end": "605550"
  },
  {
    "text": "those consumer drew businesses to the other well that state has to go with it or if one of my instances fails that state has",
    "start": "605550",
    "end": "612060"
  },
  {
    "text": "to be somewhere and the consumer group API as awesome as it is is just not that awesome it's not helpful enough to do",
    "start": "612060",
    "end": "618930"
  },
  {
    "text": "that does not give you any state management one time I was explaining this to a group of their financial",
    "start": "618930",
    "end": "624329"
  },
  {
    "text": "services people and somebody said well couldn't you just put it in an in-memory data grid I said aha these are the words of a man",
    "start": "624329",
    "end": "631829"
  },
  {
    "text": "who has an in-memory data grid if you don't then yeah you know this is a pain",
    "start": "631829",
    "end": "637319"
  },
  {
    "text": "and it's a problem and you have to solve it and it's not the kind of work you should be doing so we have to fix that that state problem is a problem just be",
    "start": "637319",
    "end": "646560"
  },
  {
    "text": "clear this is the fundamental underlying abstraction of Kafka it's the log and when the wait logs work is when I write",
    "start": "646560",
    "end": "653699"
  },
  {
    "text": "things I put them on the end I always append to the end that's where the producer produces and stuff that I've",
    "start": "653699",
    "end": "659550"
  },
  {
    "text": "written before those things are events and so they are immutable everything in that log is immutable I can expire things so I can decide that",
    "start": "659550",
    "end": "667199"
  },
  {
    "text": "there's a maximum age I'll retain data for two years and then I want I want I want events to go away after two years I",
    "start": "667199",
    "end": "673920"
  },
  {
    "text": "can do but I can never change a thing that I've already produced those are immutable",
    "start": "673920",
    "end": "679319"
  },
  {
    "text": "events and events are as we know sometimes tragically immutable and like",
    "start": "679319",
    "end": "686249"
  },
  {
    "text": "I showed on the last slide we could have multiple consumers reading from this log this is not a queue this is not a point-to-point thing it's a log I can",
    "start": "686249",
    "end": "692519"
  },
  {
    "text": "read it as many times as I want and Kafka has a tendency to want to be at",
    "start": "692519",
    "end": "698819"
  },
  {
    "text": "the center of things once you get going on this idea of a log it it has a",
    "start": "698819",
    "end": "707910"
  },
  {
    "text": "tendency to kind of want to be a central nervous system or a kind of a oddly it",
    "start": "707910",
    "end": "716430"
  },
  {
    "text": "wants to be the system of record and so things happen you receive inputs you",
    "start": "716430",
    "end": "722519"
  },
  {
    "text": "process them you want to remember them our traditional training is well we remember them by putting it into putting",
    "start": "722519",
    "end": "728129"
  },
  {
    "text": "them in a database it ends up working out a lot better simply to log the events and when you need a database view",
    "start": "728129",
    "end": "733800"
  },
  {
    "text": "of them well then you can read from that event log and and materialize a database with what's in that event log so it has",
    "start": "733800",
    "end": "740519"
  },
  {
    "text": "a tendency to want to be in the center of things when it gets there the kinds",
    "start": "740519",
    "end": "746970"
  },
  {
    "text": "of computation that you do with the increasing amount of data that finds his way into Kafka topics you just find it",
    "start": "746970",
    "end": "753360"
  },
  {
    "text": "convenient to write things to topics on it and data ends up there and you want to consume that data you spin up more",
    "start": "753360",
    "end": "758819"
  },
  {
    "text": "and more services doing more and more things you end up creating a lot of",
    "start": "758819",
    "end": "764069"
  },
  {
    "text": "boilerplate if you're just using that consumer API the the basic semantics of the consumer API again are I am",
    "start": "764069",
    "end": "771149"
  },
  {
    "text": "interested in a topic give me a key value pair when you have one and that's",
    "start": "771149",
    "end": "778709"
  },
  {
    "text": "it and then you do your work with that key value pair well what if you do have to remember things from the last minute",
    "start": "778709",
    "end": "784529"
  },
  {
    "text": "and grouped by some field and collect things and run some reducing function if to write the code to do all that so a",
    "start": "784529",
    "end": "791309"
  },
  {
    "text": "lot of framework Ebola platy code is gonna make its way into your life in",
    "start": "791309",
    "end": "796519"
  },
  {
    "text": "consumers when you're using Kafka not just as a pipe between places but as",
    "start": "796519",
    "end": "803160"
  },
  {
    "text": "this kind of central role that it tends to want to take",
    "start": "803160",
    "end": "808260"
  },
  {
    "text": "that code is a pain and that is why we need a case equal so yeah case equal is",
    "start": "808260",
    "end": "816210"
  },
  {
    "text": "a stream press stream processing language for Apache Kafka and rather",
    "start": "816210",
    "end": "822030"
  },
  {
    "text": "than be imperative like like the consumer API where you get a message and",
    "start": "822030",
    "end": "827550"
  },
  {
    "text": "you just step step step through it this is a declarative sequel like way of doing it let's walk through some syntax",
    "start": "827550",
    "end": "833840"
  },
  {
    "text": "and I want to there's like one really important concept that is hard to get in",
    "start": "833840",
    "end": "839670"
  },
  {
    "text": "your head sometimes the first time through and with this that that will",
    "start": "839670",
    "end": "846480"
  },
  {
    "text": "prepare us for the demo which is of course what we're all here for now this",
    "start": "846480",
    "end": "855720"
  },
  {
    "text": "you you can't tell that this is not ANSI SQL I mean this particular query this does happen to be valid case equal and",
    "start": "855720",
    "end": "861600"
  },
  {
    "text": "it looks just like normal sequel but what's different is click stream click",
    "start": "861600",
    "end": "867000"
  },
  {
    "text": "stream is not a table click stream is what we call a stream remember topics",
    "start": "867000",
    "end": "872190"
  },
  {
    "text": "topics are these log things where I put stuff on the end and I can read it and it stays there and I can all I can only",
    "start": "872190",
    "end": "877590"
  },
  {
    "text": "read in order right all I can do with the topic is read the next message it's it's that's how logs are you don't you",
    "start": "877590",
    "end": "884190"
  },
  {
    "text": "don't query them you just scan them and click stream is a lightweight abstraction over that topic ok it's it's",
    "start": "884190",
    "end": "894960"
  },
  {
    "text": "just a wrapper around a topic and we call it a stream so it has I'll show you later on some DDL for how we create",
    "start": "894960",
    "end": "901350"
  },
  {
    "text": "streams but it's a stream it has schema and it's just this source of events so",
    "start": "901350",
    "end": "909120"
  },
  {
    "text": "selecting from that apparently again you can see some schema here it has a field called status it has a field called bytes it is a field called user agent",
    "start": "909120",
    "end": "915990"
  },
  {
    "text": "these are all things you expect to see and clickstream data and I'm selecting those two fields and filtering so this",
    "start": "915990",
    "end": "922020"
  },
  {
    "text": "actually is a stateless operation here this is a stateless filtering of that click stream for only ie6 clicks and I",
    "start": "922020",
    "end": "928530"
  },
  {
    "text": "think that's a good idea anybody who's still using ie6 you want to keep your eye on that person",
    "start": "928530",
    "end": "934320"
  },
  {
    "text": "something is up alright you think no they're just kind of backward and now no",
    "start": "934320",
    "end": "941830"
  },
  {
    "text": "they know and you want to know why they know so this select the other weird",
    "start": "941830",
    "end": "948790"
  },
  {
    "text": "thing about case equals if I were to type this at the CLI it would begin",
    "start": "948790",
    "end": "955300"
  },
  {
    "text": "producing the filtered list of all the clicks and they're not many of them the size six people and they hide and they",
    "start": "955300",
    "end": "961090"
  },
  {
    "text": "cover their tracks well but when when they're when no one is clicking when",
    "start": "961090",
    "end": "966430"
  },
  {
    "text": "there just aren't any ie six events this query doesn't end case equal queries are",
    "start": "966430",
    "end": "972670"
  },
  {
    "text": "in general continuous queries and it's it's a little alarming the first time you type a select at the CLI and it",
    "start": "972670",
    "end": "980470"
  },
  {
    "text": "exhausts all the events and then it doesn't go back to a prompt prompt you're expecting that right when a query",
    "start": "980470",
    "end": "986080"
  },
  {
    "text": "doesn't go back to a prompt it's broken and there's an index missing or something is bad and and you know you",
    "start": "986080",
    "end": "992470"
  },
  {
    "text": "need to fix it that's not the case here streaming queries never end because there's always another event so that's",
    "start": "992470",
    "end": "999400"
  },
  {
    "text": "that's kind of concept number one about stream processing and about streaming sequel that you need to get in your head",
    "start": "999400",
    "end": "1005490"
  },
  {
    "text": "these queries run forever constantly consuming new events constantly",
    "start": "1005490",
    "end": "1010530"
  },
  {
    "text": "producing new events and we're gonna have to talk about where those new events get produced to I will have an",
    "start": "1010530",
    "end": "1017010"
  },
  {
    "text": "answer for that but not on this slide alright this is bigger and badder and",
    "start": "1017010",
    "end": "1022890"
  },
  {
    "text": "has a difficult concept in it so let's let's let's get to work on this if you",
    "start": "1022890",
    "end": "1028589"
  },
  {
    "text": "could for now forget that top line see where it says create stream VIP actions forget about that let's just look at the",
    "start": "1028589",
    "end": "1033810"
  },
  {
    "text": "select select blah blah blah from click stream left join two users ok so it's a",
    "start": "1033810",
    "end": "1041310"
  },
  {
    "text": "join there's a join condition and then we're filtering and we're filtering",
    "start": "1041310",
    "end": "1047189"
  },
  {
    "text": "based on a field from users now this a",
    "start": "1047190",
    "end": "1053760"
  },
  {
    "text": "lot of people in stream processing call this enrichment where you've got one topic and it's got things in it and some",
    "start": "1053760",
    "end": "1060060"
  },
  {
    "text": "key that you want to go look something up and enrich that message with more things and then produce that out to",
    "start": "1060060",
    "end": "1066240"
  },
  {
    "text": "somewhere else right it's a very common stream processing thing to us it's a join it's just a joint but click stream",
    "start": "1066240",
    "end": "1072870"
  },
  {
    "text": "remember was a stream what is used well intuitively if you just don't try",
    "start": "1072870",
    "end": "1081870"
  },
  {
    "text": "to think too hard about it it's it seems like it should be a table right clicks clicks our events it's a very obvious",
    "start": "1081870",
    "end": "1088860"
  },
  {
    "text": "kind of event out in the world somebody's literally doing a thing in a web browser and there's JavaScript",
    "start": "1088860",
    "end": "1094380"
  },
  {
    "text": "capturing it and posting it to some service that we've got and like that we kind of understand that mechanism users",
    "start": "1094380",
    "end": "1100710"
  },
  {
    "text": "are entities and entities aren't really events so that thing called users there",
    "start": "1100710",
    "end": "1108390"
  },
  {
    "text": "is a table that is the other basic abstraction that case equal halves there",
    "start": "1108390",
    "end": "1113700"
  },
  {
    "text": "are streams that's a lightweight abstraction on top of a topic and we have tables which is a slightly less lightweight abstraction on",
    "start": "1113700",
    "end": "1120660"
  },
  {
    "text": "top of a topic and the reason for that is this is Kafka and that's all we have",
    "start": "1120660",
    "end": "1126570"
  },
  {
    "text": "Kafka doesn't have tables Kafka has topics that's the one sort of place you",
    "start": "1126570",
    "end": "1131640"
  },
  {
    "text": "could put things in Kafka so the way tables work I want you to just think",
    "start": "1131640",
    "end": "1138450"
  },
  {
    "text": "with me about what that topic would look like even if you're very new to Kafka I told you that a message is a key value",
    "start": "1138450",
    "end": "1143760"
  },
  {
    "text": "pair and a topic is a sequence of messages and maybe it's partitioned but",
    "start": "1143760",
    "end": "1149100"
  },
  {
    "text": "just don't worry about those partitions for now just think about that one log of messages now if it's clicks you get it",
    "start": "1149100",
    "end": "1155670"
  },
  {
    "text": "that's easy if it's users what does this mean well anytime somebody mutates a user create",
    "start": "1155670",
    "end": "1162950"
  },
  {
    "text": "update even delete we can produce a new record to that topic where the key is",
    "start": "1162950",
    "end": "1170580"
  },
  {
    "text": "the ID of the entity like the user ID and the value is a serialized version of",
    "start": "1170580",
    "end": "1177059"
  },
  {
    "text": "that user object JSON could be a fro actually stop there be JSON or Avro it's",
    "start": "1177059",
    "end": "1184050"
  },
  {
    "text": "case equal so technically there's this like CSV thing and we speak not of this",
    "start": "1184050",
    "end": "1189420"
  },
  {
    "text": "so there's JSON and there's there's Avro and I'm gonna be doing JSON on the demo",
    "start": "1189420",
    "end": "1194490"
  },
  {
    "text": "because it's prettier to look at but so yeah you've got user ID you've got this",
    "start": "1194490",
    "end": "1200880"
  },
  {
    "text": "JSON serialized user Avro serialize user and that's it and when you change the user you just produce a new one and",
    "start": "1200880",
    "end": "1206780"
  },
  {
    "text": "previous versions of the user at that point kind of lose you don't",
    "start": "1206780",
    "end": "1211890"
  },
  {
    "text": "care about them now there's a way of configuring that topic so that on a storage level you explicitly don't care",
    "start": "1211890",
    "end": "1217289"
  },
  {
    "text": "about them that's called a compacted topic and so those will just go away but Kay sequel doesn't care whether",
    "start": "1217289",
    "end": "1222780"
  },
  {
    "text": "you're managing your storage that way or not it's just not a thing the way that users table exists is that K sequel",
    "start": "1222780",
    "end": "1230520"
  },
  {
    "text": "takes that topic and essentially creates an in-memory key value store where the",
    "start": "1230520",
    "end": "1235620"
  },
  {
    "text": "key is the message key and the value is the message value and that's materialized in memory that now K sequel",
    "start": "1235620",
    "end": "1242820"
  },
  {
    "text": "uses its by the way it's built on kafka streams so if you know anything about the kafka streams API a lot of what you",
    "start": "1242820",
    "end": "1249450"
  },
  {
    "text": "know about kafka streams translates over into K sequel but if you don't it's okay you don't need to what K sequel uses",
    "start": "1249450",
    "end": "1255929"
  },
  {
    "text": "internally by default is this embedded database called rocks key B rocks TB I",
    "start": "1255929",
    "end": "1262020"
  },
  {
    "text": "find actually showing up in a lot of places recently it's worth knowing about I think kind of last seems like like",
    "start": "1262020",
    "end": "1268440"
  },
  {
    "text": "late last spring software engineering Gailey had a few episodes on rocks TB",
    "start": "1268440",
    "end": "1273480"
  },
  {
    "text": "that were really helpful if you don't know that podcast it's a good podcast but it's it's a it's a little component",
    "start": "1273480",
    "end": "1279450"
  },
  {
    "text": "that that is finding its way into things more and more and is worth knowing about and it has found its way into K sequel",
    "start": "1279450",
    "end": "1284880"
  },
  {
    "text": "so that's what kasich we uses to implement that state store so it's actually standing up this rocks TB database and populating it with the",
    "start": "1284880",
    "end": "1291870"
  },
  {
    "text": "messages in the user topic what that means is when I get a new click on click stream I can efficiently go to a key",
    "start": "1291870",
    "end": "1297720"
  },
  {
    "text": "lookup of the user in my state store in my rocks DB database and so I've got it",
    "start": "1297720",
    "end": "1303419"
  },
  {
    "text": "in memory the stuff that's in the topic so k sequel turns topics into tables",
    "start": "1303419",
    "end": "1308760"
  },
  {
    "text": "other than that it's a join and then a filter and you get it and I'm not gonna explain the sequel before we leave the",
    "start": "1308760",
    "end": "1316230"
  },
  {
    "text": "slide back to the top line because that is a somewhat non-standard thing the",
    "start": "1316230",
    "end": "1322500"
  },
  {
    "text": "output of this query is going to go into a topic by default called VIP actions so",
    "start": "1322500",
    "end": "1331169"
  },
  {
    "text": "this is creating another topic or if it's not allowed to create topics in your Kafka cluster it expects you to",
    "start": "1331169",
    "end": "1336539"
  },
  {
    "text": "have created another topic called VIP actions and",
    "start": "1336539",
    "end": "1342440"
  },
  {
    "text": "it will be constantly consuming new cliques enriching them with users and",
    "start": "1343320",
    "end": "1348800"
  },
  {
    "text": "producing them to VIP actions and this will run in wherever it is case equal",
    "start": "1348800",
    "end": "1354750"
  },
  {
    "text": "queries run I haven't told you that yet but to imagine there is a place in the heavens where they run and they do that",
    "start": "1354750",
    "end": "1362340"
  },
  {
    "text": "thing and we're gonna find out where that is soon but for now they're just sort of floating like platonic sort of",
    "start": "1362340",
    "end": "1368700"
  },
  {
    "text": "thing and doing what they do so yeah there you go that is uh that is a",
    "start": "1368700",
    "end": "1374490"
  },
  {
    "text": "continuous query constantly getting those things joining them let's look at one more thing buy one more action mean",
    "start": "1374490",
    "end": "1381420"
  },
  {
    "text": "like for more but never never was too good with numbers here we are grouping",
    "start": "1381420",
    "end": "1390750"
  },
  {
    "text": "we're turning a stream into a table the stream if you look on the third line is apparently some kind of payment system",
    "start": "1390750",
    "end": "1396870"
  },
  {
    "text": "these are credit card authorization attempts and we are grouping them by",
    "start": "1396870",
    "end": "1402750"
  },
  {
    "text": "card number and looking for times when we see the same card number more than",
    "start": "1402750",
    "end": "1408480"
  },
  {
    "text": "three times within a five-second window so there are a few different kinds of",
    "start": "1408480",
    "end": "1414480"
  },
  {
    "text": "windowing in case equal and I will not take you through them in detail it just is a little much for an introduction but",
    "start": "1414480",
    "end": "1421590"
  },
  {
    "text": "this tumbling window means every five seconds I'm gonna reset that count and",
    "start": "1421590",
    "end": "1426860"
  },
  {
    "text": "so if I see four of the same credit card number in the first 50 milliseconds of",
    "start": "1426860",
    "end": "1432900"
  },
  {
    "text": "the window well I'm producing a new event and I'm populating the table with that row and",
    "start": "1432900",
    "end": "1440090"
  },
  {
    "text": "it will talk about where that row goes let's say I'm populating the table of that row if I see those those three event four events in the first 50",
    "start": "1440090",
    "end": "1447030"
  },
  {
    "text": "milliseconds if I see three events in the first 50 milliseconds and then a",
    "start": "1447030",
    "end": "1453330"
  },
  {
    "text": "full five seconds later another event well that's not fraud according to this extremely sophisticated algorithm it",
    "start": "1453330",
    "end": "1460170"
  },
  {
    "text": "just the counter got cleared but if I do see them in fifty before of them 50",
    "start": "1460170",
    "end": "1466050"
  },
  {
    "text": "milliseconds in it's in the table right away it doesn't wait till the window is up it's just it's just resetting resetting the count and the events",
    "start": "1466050",
    "end": "1475520"
  },
  {
    "text": "pardon me the the row in this table also get produced as messages to a topic called possible",
    "start": "1475520",
    "end": "1482490"
  },
  {
    "text": "fraud so that topic is out there other people can consume it other case equal queries can turn it into tables it's just",
    "start": "1482490",
    "end": "1488820"
  },
  {
    "text": "they're ready to go and that's the same thing we didn't look at that we do need",
    "start": "1488820",
    "end": "1495120"
  },
  {
    "text": "to look at this because this is super cool look at the bottom line select star from clickstream partition by user ID",
    "start": "1495120",
    "end": "1501450"
  },
  {
    "text": "now we didn't talk about partitioning in this join because I forgot but we're",
    "start": "1501450",
    "end": "1509760"
  },
  {
    "text": "back here now so it's okay the topic underlying clickstream and the topic",
    "start": "1509760",
    "end": "1515730"
  },
  {
    "text": "underlying users they have to have the same key and the same number of",
    "start": "1515730",
    "end": "1521580"
  },
  {
    "text": "partitions there are very good reasons for that that you should trust me with",
    "start": "1521580",
    "end": "1527780"
  },
  {
    "text": "and if there's time later I can explain them but they have to be we call that would have to be Co partitioned all",
    "start": "1527780",
    "end": "1533520"
  },
  {
    "text": "right and there's a there's a mistake I make in the demo maybe about 25 or 30",
    "start": "1533520",
    "end": "1538770"
  },
  {
    "text": "percent of the time where they they're not Co partitioned and and something doesn't work and then I have to go fix",
    "start": "1538770",
    "end": "1544320"
  },
  {
    "text": "it if you're lucky I'll make that mistake because then I'll have to explain more about Co partitioning but",
    "start": "1544320",
    "end": "1549390"
  },
  {
    "text": "they that's that's important and so sometimes though that's just not you you",
    "start": "1549390",
    "end": "1554730"
  },
  {
    "text": "don't have the key you want right somebody made a topic and maybe it was a person who hates life and they didn't",
    "start": "1554730",
    "end": "1562800"
  },
  {
    "text": "use a key at all right there are people like that who use Kafka they just want all things to be sad and wither and you",
    "start": "1562800",
    "end": "1572580"
  },
  {
    "text": "shouldn't be that person but sometimes that is a thing or sometimes someone has very thoughtfully selected a key and",
    "start": "1572580",
    "end": "1577650"
  },
  {
    "text": "it's just not the one you need it's not gonna serve your join it doesn't do partitioning the way you need it to",
    "start": "1577650",
    "end": "1582770"
  },
  {
    "text": "etcetera so that last line there I'm selecting everything from clickstream",
    "start": "1582770",
    "end": "1588030"
  },
  {
    "text": "but i'm repartition again i'm reaching into each click and looking at its user ID and saying that's your new key and",
    "start": "1588030",
    "end": "1596100"
  },
  {
    "text": "I'm creating a new topic called views by user ID that's that create stream views",
    "start": "1596100",
    "end": "1601290"
  },
  {
    "text": "by user ID so those messages from click stream getting rekey and dumped into that topic that now has that key also",
    "start": "1601290",
    "end": "1608310"
  },
  {
    "text": "that width there I'm saying hey this new topic should have six partitions it should be JSON and",
    "start": "1608310",
    "end": "1615000"
  },
  {
    "text": "timestamp every message in Kafka has a timestamp and I can make that actual event time I",
    "start": "1615000",
    "end": "1621190"
  },
  {
    "text": "can reach into the click itself which has some idea of when it happened maybe that's just the you know the wall clock",
    "start": "1621190",
    "end": "1627160"
  },
  {
    "text": "time on the on the machine running the browser or the device running the browser and I can reach in there and say",
    "start": "1627160",
    "end": "1633549"
  },
  {
    "text": "that is now the timestamp of the Kafka message itself so all that stuff that this is kind of case equal as utility",
    "start": "1633549",
    "end": "1640630"
  },
  {
    "text": "belt easy stuff that is easy to do with K sequel to transform one topic into",
    "start": "1640630",
    "end": "1646480"
  },
  {
    "text": "another just ways that are fairly commonplace if you're doing stuff with Kafka you're gonna have to do this kind",
    "start": "1646480",
    "end": "1651549"
  },
  {
    "text": "of thing and actually I will simulate the the terrible practice of null keys",
    "start": "1651549",
    "end": "1659169"
  },
  {
    "text": "and fixing it so we'll do a little bit of this and that partitioning count is important also so two more pieces of GDL",
    "start": "1659169",
    "end": "1670110"
  },
  {
    "text": "this is how you create a stream pretty",
    "start": "1670110",
    "end": "1675270"
  },
  {
    "text": "unsurprising you give it some metadata you point it at a topic you have to say oh this stream is wrapping a topic",
    "start": "1675270",
    "end": "1681880"
  },
  {
    "text": "called my click stream topic and it's got JSON in it and not Avro or I could",
    "start": "1681880",
    "end": "1688000"
  },
  {
    "text": "make a table which is kind of the same thing there's a topic it's got a value format it's JSON or it's Avro and I want",
    "start": "1688000",
    "end": "1694809"
  },
  {
    "text": "to tell KC equal hey the field in here that I want to be the key of my table is user ID it's just a little extra hint",
    "start": "1694809",
    "end": "1702250"
  },
  {
    "text": "you have to give it and that kind of",
    "start": "1702250",
    "end": "1708190"
  },
  {
    "text": "gets us to code which typically makes no one angry so let's do that that's my",
    "start": "1708190",
    "end": "1720460"
  },
  {
    "text": "family displays big news both of the",
    "start": "1720460",
    "end": "1728410"
  },
  {
    "text": "daughters who are now covered up that's rude so the so it's lady in the middle and",
    "start": "1728410",
    "end": "1736750"
  },
  {
    "text": "the green that's missus Bergland there's the guy on the end and that the woman between them is my daughter-in-law our",
    "start": "1736750",
    "end": "1742419"
  },
  {
    "text": "daughters are between my wife and me both of them have gotten engaged in the last three months so shout out to me spending",
    "start": "1742419",
    "end": "1749529"
  },
  {
    "text": "money this year I am here because I am",
    "start": "1749529",
    "end": "1755020"
  },
  {
    "text": "looking at the wrong window and I want to mirror and that will actually be just",
    "start": "1755020",
    "end": "1765100"
  },
  {
    "text": "got the touch bar Mac and the way you do this is different now so that's cool",
    "start": "1765100",
    "end": "1770429"
  },
  {
    "text": "so here we are",
    "start": "1787540",
    "end": "1795340"
  },
  {
    "text": "how's that font size you feel good about that in the back is that thumbs up or",
    "start": "1795340",
    "end": "1802520"
  },
  {
    "text": "make it bigger bigger okay got it thank you it looked like that's great",
    "start": "1802520",
    "end": "1811000"
  },
  {
    "text": "there we are we'll call that good so the data I have",
    "start": "1811000",
    "end": "1816380"
  },
  {
    "text": "is let's let's just look at that data I've got some entity data here and these",
    "start": "1816380",
    "end": "1823700"
  },
  {
    "text": "are movies this is a file of like nine hundred and twenty movies across several",
    "start": "1823700",
    "end": "1830960"
  },
  {
    "text": "decades right there's a whole bunch of interesting metadata in there we're not gonna use much of it really just gonna",
    "start": "1830960",
    "end": "1836300"
  },
  {
    "text": "use ID title and release year and we're gonna make a table out of that and I",
    "start": "1836300",
    "end": "1842210"
  },
  {
    "text": "have a script that is gonna generate rating data that looks like this alright",
    "start": "1842210",
    "end": "1847760"
  },
  {
    "text": "this is a static file of rating data I'm not gonna use a static file that's lame we're gonna use real-time randomized",
    "start": "1847760",
    "end": "1853220"
  },
  {
    "text": "movie ratings but they'll look like this what I want is I want to join this to",
    "start": "1853220",
    "end": "1862460"
  },
  {
    "text": "the table because like I don't know what movie ID to is that's not very helpful so I want a title I want to join this so",
    "start": "1862460",
    "end": "1869180"
  },
  {
    "text": "I get titles and I also want to group by title and calculate an average and omit",
    "start": "1869180",
    "end": "1875450"
  },
  {
    "text": "that average to the screen all right and I'll do this all from the CLI here so our view of the table will be this",
    "start": "1875450",
    "end": "1882020"
  },
  {
    "text": "streaming table update thing so just be updates scrolling past the screen it's a little strange looking but it's the best",
    "start": "1882020",
    "end": "1888410"
  },
  {
    "text": "that a CLI can do for a streaming table so let's just go from there and see what",
    "start": "1888410",
    "end": "1896750"
  },
  {
    "text": "we've got here this is my case equal view and I've got a whole bunch of extra",
    "start": "1896750",
    "end": "1902540"
  },
  {
    "text": "topics there that I almost wish I didn't have but there's a bunch of control",
    "start": "1902540",
    "end": "1907940"
  },
  {
    "text": "center stuff running here good enough let's go here though and I've got that",
    "start": "1907940",
    "end": "1913790"
  },
  {
    "text": "data so I would like to get just the first record from",
    "start": "1913790",
    "end": "1920720"
  },
  {
    "text": "that and produce that to a topic called",
    "start": "1920720",
    "end": "1930200"
  },
  {
    "text": "movies raw Kafka cat by the way nice",
    "start": "1930200",
    "end": "1938060"
  },
  {
    "text": "little command-line tool if you're a Kafka user and you don't know Kafka cat you are hereby formally welcome it's a",
    "start": "1938060",
    "end": "1946130"
  },
  {
    "text": "it's a nice it's just a little for simple producing and consuming and reading metadata and things like that it's I think a little easier to use than",
    "start": "1946130",
    "end": "1953090"
  },
  {
    "text": "the default tools if you're using a cloud service like confluent cloud of",
    "start": "1953090",
    "end": "1958220"
  },
  {
    "text": "course you'd use that that systems CLI and we see oh we have a topic called",
    "start": "1958220",
    "end": "1965000"
  },
  {
    "text": "movies wrong nice so let's create a stream called movies raw and let's give",
    "start": "1965000",
    "end": "1973490"
  },
  {
    "text": "it some metadata the ID there's an int and no you know what I'm gonna make that",
    "start": "1973490",
    "end": "1981950"
  },
  {
    "text": "of our char and title be of our char and I'm gonna have release here be an int",
    "start": "1981950",
    "end": "1987590"
  },
  {
    "text": "with Kafka topic equals movies raw and",
    "start": "1987590",
    "end": "1996790"
  },
  {
    "text": "value is gonna be you may get a taste",
    "start": "1996790",
    "end": "2003460"
  },
  {
    "text": "for my own personal experience of the MacBook Pro repeating key problem so",
    "start": "2003460",
    "end": "2011170"
  },
  {
    "text": "this will strike us this little guy will spend a week in the shop at Christmas",
    "start": "2011170",
    "end": "2016990"
  },
  {
    "text": "and it'll be fine yeah so I can now I need to set so we",
    "start": "2016990",
    "end": "2027280"
  },
  {
    "text": "want all new queries all new consumers",
    "start": "2027280",
    "end": "2033280"
  },
  {
    "text": "which are all Kafka there are k sequel queries to start at the beginning of the topic so when there's a new consumer",
    "start": "2033280",
    "end": "2040180"
  },
  {
    "text": "group that starts up it needs to know do I start reading the most recent message or the oldest message and those are both",
    "start": "2040180",
    "end": "2045640"
  },
  {
    "text": "perfectly valid options demos like this are much more exciting if we set that to the beginning it's not necessarily what",
    "start": "2045640",
    "end": "2051790"
  },
  {
    "text": "you would always do in production that's just a judgement you make on a case-by-case basis but it's just way more fun to do that here",
    "start": "2051790",
    "end": "2058629"
  },
  {
    "text": "so let's select star from movies raw and see what we see it's pretty cool there's",
    "start": "2058630",
    "end": "2067210"
  },
  {
    "text": "a movie there I wonder if I could just try a little split screen action here I think I can so we can see this a little",
    "start": "2067210",
    "end": "2073629"
  },
  {
    "text": "more directly this will be in demo scene demo by the way this if you're taking",
    "start": "2073630",
    "end": "2079300"
  },
  {
    "text": "pictures confluent Inc slash demo scene is also a github repo app console inning slash demo scene and it's got all of the",
    "start": "2079300",
    "end": "2087700"
  },
  {
    "text": "demos that confluent developer advocates build and run and so you know good luck with them right these are not curated",
    "start": "2087700",
    "end": "2094060"
  },
  {
    "text": "examples that's the examples repo that all that stuff is guaranteed to work zero of this stuff is guaranteed to work",
    "start": "2094060",
    "end": "2099280"
  },
  {
    "text": "but it's cool so you know you can always go there and play with things that's totally fine so",
    "start": "2099280",
    "end": "2104290"
  },
  {
    "text": "let's go yeah tale let's go grab something from the tale from movies JSON",
    "start": "2104290",
    "end": "2110170"
  },
  {
    "text": "Kafka cat pointed out our local installation produced to a topic called",
    "start": "2110170",
    "end": "2117210"
  },
  {
    "text": "movies raw ah there look at that so just",
    "start": "2117210",
    "end": "2123760"
  },
  {
    "text": "as soon as I do that we get a new",
    "start": "2123760",
    "end": "2129850"
  },
  {
    "text": "message groups and I could even say put",
    "start": "2129850",
    "end": "2136000"
  },
  {
    "text": "ten of them in there and now we have closure they happen right away so that case people picks it up sees those",
    "start": "2136000",
    "end": "2141070"
  },
  {
    "text": "things in the stream and we're good now the problem here is this this is the",
    "start": "2141070",
    "end": "2147790"
  },
  {
    "text": "message key and it's no because somebody is a terrible person so let's create a",
    "start": "2147790",
    "end": "2157050"
  },
  {
    "text": "stream called MOOC I actually the",
    "start": "2157050",
    "end": "2163360"
  },
  {
    "text": "struggle is sufficiently real I've bought a little travel keyboard there's no space for it on the podium here so it's not a part of life for the next 15",
    "start": "2163360",
    "end": "2170560"
  },
  {
    "text": "minutes but you actually bought a Bluetooth keyboard because this is really gonna kill me alright so a select",
    "start": "2170560",
    "end": "2177670"
  },
  {
    "text": "star from movies raw partition by movie",
    "start": "2177670",
    "end": "2185410"
  },
  {
    "text": "ID and actually I need to make sure there's a step in",
    "start": "2185410",
    "end": "2191740"
  },
  {
    "text": "here where nope you always do that",
    "start": "2191740",
    "end": "2201660"
  },
  {
    "text": "that goes there not there there we are so now we have a new stream and we have",
    "start": "2212480",
    "end": "2223470"
  },
  {
    "text": "fixed that problem we don't have those terrible null Keys anymore and I can still do this game and they go into the",
    "start": "2223470",
    "end": "2232980"
  },
  {
    "text": "first stream and are now transformed by the second stream so we're building this little pipeline but K sequel doesn't",
    "start": "2232980",
    "end": "2238710"
  },
  {
    "text": "care we still get the updates right away cool I have movies now I would like",
    "start": "2238710",
    "end": "2244800"
  },
  {
    "text": "ratings okay so I've got a script here that will produce four random movie",
    "start": "2244800",
    "end": "2253410"
  },
  {
    "text": "ratings per second roughly and these are on there's like 10 or 15 movies that I",
    "start": "2253410",
    "end": "2259110"
  },
  {
    "text": "picked out and I picked I picked the average ratings and it gives them a little normal distribution around those",
    "start": "2259110",
    "end": "2265890"
  },
  {
    "text": "ratings so there they're truly randomized ratings but they're centered on a mean that reflects outstanding",
    "start": "2265890",
    "end": "2273330"
  },
  {
    "text": "cinematic taste and we'll see what that means so there's ratings so now let's there's that topic called",
    "start": "2273330",
    "end": "2280590"
  },
  {
    "text": "ratings let's create a stream called ratings and we'll give it a movie ID",
    "start": "2280590",
    "end": "2285720"
  },
  {
    "text": "that's a varchar' and we'll give it a rating that's a double and it's got a",
    "start": "2285720",
    "end": "2291660"
  },
  {
    "text": "topic called the same thing and that is a JSON version of the stream are running",
    "start": "2291660",
    "end": "2298860"
  },
  {
    "text": "so now somebody didn't catch me you're",
    "start": "2298860",
    "end": "2307050"
  },
  {
    "text": "waiting for me to stumble on that alright so here you go you've got that",
    "start": "2307050",
    "end": "2315000"
  },
  {
    "text": "message key which is actually being produced as a long and so it renders funny here then movie ID in the actual message",
    "start": "2315000",
    "end": "2322680"
  },
  {
    "text": "payload movie ID and average rating completely useless I don't know what those rating numbers are I would like",
    "start": "2322680",
    "end": "2328470"
  },
  {
    "text": "that to be less than completely useless so let's select title and rating from",
    "start": "2328470",
    "end": "2333690"
  },
  {
    "text": "ratings inner join movies on ratings",
    "start": "2333690",
    "end": "2342050"
  },
  {
    "text": "movie ID equals movies movie ID and like ratings internet",
    "start": "2342050",
    "end": "2350120"
  },
  {
    "text": "movies movies no Oh table movies we",
    "start": "2350120",
    "end": "2363110"
  },
  {
    "text": "forgot step movie ID for our chart so yeah we re keyed the stream and now",
    "start": "2363110",
    "end": "2368900"
  },
  {
    "text": "there's this topic under there called movies reseed and I wanted undetailed K sequel I actually want that to be one of",
    "start": "2368900",
    "end": "2373910"
  },
  {
    "text": "these table things I sort of forgot that step and so the join was less than successful we need to create the table",
    "start": "2373910",
    "end": "2381050"
  },
  {
    "text": "and really I'm just I'm just telling Casey we'll go do this right now it has to use resources it's",
    "start": "2381050",
    "end": "2386870"
  },
  {
    "text": "standing up one of these rocks tbh databases internally it's not that this is so much a stream processing",
    "start": "2386870",
    "end": "2393020"
  },
  {
    "text": "computation it's more of a please consume this topic and turn it into a table now tables can",
    "start": "2393020",
    "end": "2400190"
  },
  {
    "text": "also be the outcome of a stream processing operation like the group by that we saw on the slide and I'll do one",
    "start": "2400190",
    "end": "2405410"
  },
  {
    "text": "later but this is is like registering this topic as a table release here",
    "start": "2405410",
    "end": "2414230"
  },
  {
    "text": "[Music] literally the worst keep whatever so off",
    "start": "2414230",
    "end": "2420400"
  },
  {
    "text": "topic is movies rekey someone said and",
    "start": "2420400",
    "end": "2426440"
  },
  {
    "text": "thank you for that because you reminded me what I did value format is JSON and key is movie ID topic does not exist",
    "start": "2426440",
    "end": "2437960"
  },
  {
    "text": "movies re-keyed because it likes to make things capital movies key productivity",
    "start": "2437960",
    "end": "2455420"
  },
  {
    "text": "has gone up so much look at that it worked okay let's try this query again and why is nothing happening get to",
    "start": "2455420",
    "end": "2467060"
  },
  {
    "text": "drink water you think about it I'm not worried if you are that's I encourage",
    "start": "2467060",
    "end": "2472910"
  },
  {
    "text": "you to manage your anxiety so what I did I said I had like nine hundred or so",
    "start": "2472910",
    "end": "2478790"
  },
  {
    "text": "moved in this table and I have only produced a few from the beginning in the end of the file so this query is running it's just",
    "start": "2478790",
    "end": "2485299"
  },
  {
    "text": "an inner join and none of the movies that the rating script is producing are in the movies that are actually in the",
    "start": "2485299",
    "end": "2491359"
  },
  {
    "text": "table yet so what I have to do is I have to turned that tail into a cat never",
    "start": "2491359",
    "end": "2497420"
  },
  {
    "text": "occurred to me those things are related and just dump that into movies raw which turns into movies rekey which turns into",
    "start": "2497420",
    "end": "2504019"
  },
  {
    "text": "the movies table which makes joins start happening right away soon as I hit Enter so now we see okay cool",
    "start": "2504019",
    "end": "2511880"
  },
  {
    "text": "Terminator Super Mario Brothers 13 going on 30 I don't even think that's an underrated rom-com I think that is a",
    "start": "2511880",
    "end": "2517970"
  },
  {
    "text": "properly appreciated rom-com it's a really fun movie diehard finest Christmas films ever it's kind of the",
    "start": "2517970",
    "end": "2524119"
  },
  {
    "text": "season for watching die hard again Lethal Weapon another outstanding traditional Christmas film that's funny",
    "start": "2524119",
    "end": "2534349"
  },
  {
    "text": "nobody laughed I think I you're just accepting it as a given it's not a joke like yes obviously those are Christmas movies it's not even funny it's part of",
    "start": "2534349",
    "end": "2543170"
  },
  {
    "text": "our traditions in Denmark here going back centuries yeah what we would like is we would like",
    "start": "2543170",
    "end": "2551960"
  },
  {
    "text": "these to be averaged right and I think I'm done with this guy here so let's let",
    "start": "2551960",
    "end": "2560599"
  },
  {
    "text": "me just let's do a select of Title V",
    "start": "2560599",
    "end": "2566140"
  },
  {
    "text": "release year and some of rating divided",
    "start": "2566140",
    "end": "2573289"
  },
  {
    "text": "by count of rating as average rating from ratings here joined movies on",
    "start": "2573289",
    "end": "2583660"
  },
  {
    "text": "ratings movie id equals movies movie id",
    "start": "2583660",
    "end": "2591069"
  },
  {
    "text": "group by title and release here Y release here cuz movies get remade and",
    "start": "2591069",
    "end": "2599480"
  },
  {
    "text": "some movies just have titles that overlap but never in the same year so",
    "start": "2599480",
    "end": "2605319"
  },
  {
    "text": "okay how are we doing looks like we're doing pretty good that's gonna find some averages and",
    "start": "2605319",
    "end": "2611809"
  },
  {
    "text": "there we go okay and I'll stop that query we can kind of look through things and see happy feet why did I not get the memo on",
    "start": "2611809",
    "end": "2620610"
  },
  {
    "text": "that True Grit the remake of True Grit outstanding video game movies very hard to get right",
    "start": "2620610",
    "end": "2626100"
  },
  {
    "text": "apparently diehard again actually absolutely outstanding anything else",
    "start": "2626100",
    "end": "2633000"
  },
  {
    "text": "that sticks out really good movie that's in the ratings where's Tree of Life should be in here somewhere",
    "start": "2633000",
    "end": "2638600"
  },
  {
    "text": "Highlander you know it turns out I think you have to have been 14 when it was on",
    "start": "2638600",
    "end": "2645180"
  },
  {
    "text": "on VHS when it was in Blockbuster and if not maybe you don't think of that as positively anyway there we go what we",
    "start": "2645180",
    "end": "2652830"
  },
  {
    "text": "would want to finish this with is this I would say let's create a table called",
    "start": "2652830",
    "end": "2661080"
  },
  {
    "text": "rated movies as this select now it says table created and running because that's",
    "start": "2661080",
    "end": "2667470"
  },
  {
    "text": "a stream processing program that I've I've created and let's list our topics",
    "start": "2667470",
    "end": "2673740"
  },
  {
    "text": "again we have a topic called rated movies I wonder what Kafka cat would say",
    "start": "2673740",
    "end": "2683130"
  },
  {
    "text": "about that let's ask it let's ask it to consume from that topic and it's getting",
    "start": "2683130",
    "end": "2689940"
  },
  {
    "text": "these updates and there's a weird key thing going on and and it's a little messy but I could definitely process",
    "start": "2689940",
    "end": "2695880"
  },
  {
    "text": "that data so these averages as they are updating because remember there's there's four new ratings arriving in the",
    "start": "2695880",
    "end": "2700980"
  },
  {
    "text": "source topic every second as they're changing every time you get a new one you're responsible for producing a new",
    "start": "2700980",
    "end": "2707730"
  },
  {
    "text": "output record so that is happening this is a very simple query of the kind that if your keyboard doesn't work very well",
    "start": "2707730",
    "end": "2713850"
  },
  {
    "text": "you can still type and the people who are using this in real life this is case equals been around well it was initially",
    "start": "2713850",
    "end": "2720810"
  },
  {
    "text": "released in preview about two years ago so people are using this in in actual applications or building streaming ETL",
    "start": "2720810",
    "end": "2728280"
  },
  {
    "text": "pipelines with it there's another common sort of application pattern where I've",
    "start": "2728280",
    "end": "2734010"
  },
  {
    "text": "got six topics that have got each a little piece of the action you know maybe three of them are different accounts of what a user is I",
    "start": "2734010",
    "end": "2740280"
  },
  {
    "text": "don't extrude a big company there's you know there's there's so many ways to",
    "start": "2740280",
    "end": "2745830"
  },
  {
    "text": "think of what your customers are you know there could be all these different topics with different views of what our customer is and you know some",
    "start": "2745830",
    "end": "2752010"
  },
  {
    "text": "topic that's got events that have something to do with how risky a customer might be you know there could",
    "start": "2752010",
    "end": "2757110"
  },
  {
    "text": "be like six things that she needed combined case equal is a perfectly legitimate way of doing that combination",
    "start": "2757110",
    "end": "2762570"
  },
  {
    "text": "of doing that that enriching in a little pipeline and then producing a topic",
    "start": "2762570",
    "end": "2767880"
  },
  {
    "text": "that's got the aggregate that you need here's all these events I need a little",
    "start": "2767880",
    "end": "2773370"
  },
  {
    "text": "piece of all of them but the new service I'm writing I would like it to just stateless ly consume this aggregate and",
    "start": "2773370",
    "end": "2779850"
  },
  {
    "text": "be able to do its work and put a result somewhere and with case equal you could do that joining of things and and you",
    "start": "2779850",
    "end": "2787530"
  },
  {
    "text": "know the if there's aggregations need to run or whatever if there's a user-defined function that you want to",
    "start": "2787530",
    "end": "2793380"
  },
  {
    "text": "deploy that's some machine learning model or whatever those are all options and all that that streaming computation",
    "start": "2793380",
    "end": "2799890"
  },
  {
    "text": "do that put that event in that topic and now you've got a service that can just stateless lis consume those events and",
    "start": "2799890",
    "end": "2806100"
  },
  {
    "text": "do its work and go on case equals a good way to get that pipeline set up there are other ways to do that in Kafka but",
    "start": "2806100",
    "end": "2811860"
  },
  {
    "text": "dang it if this isn't a pretty easy one and that gets us in some words of",
    "start": "2811860",
    "end": "2820200"
  },
  {
    "text": "conclusion where does this run not in the fixed eternal realm of platonic",
    "start": "2820200",
    "end": "2825930"
  },
  {
    "text": "ideas it runs on K sequel servers and there is one running on this laptop but",
    "start": "2825930",
    "end": "2831030"
  },
  {
    "text": "in production you deploy this is a process you deploy it and it runs in a JVM and just like you know I talked",
    "start": "2831030",
    "end": "2837570"
  },
  {
    "text": "about how you can cluster consumer groups well you can cluster a case equal server is a consumer group so you can",
    "start": "2837570",
    "end": "2843240"
  },
  {
    "text": "scale it out and the problem of when a partition gets reassigned and state",
    "start": "2843240",
    "end": "2848340"
  },
  {
    "text": "needs to move along with it and if a node fails where does that state go case equal manages that remember we have this",
    "start": "2848340",
    "end": "2853470"
  },
  {
    "text": "rocks key B instance in there so it's got that state stored there it also replicates that state back into the",
    "start": "2853470",
    "end": "2859890"
  },
  {
    "text": "Kafka cluster and so it's got this distributed fault tolerant state management story that now you don't have",
    "start": "2859890",
    "end": "2866220"
  },
  {
    "text": "to worry about you can just run a cluster multiple clusters of case equal servers if you want you can deploy",
    "start": "2866220",
    "end": "2871350"
  },
  {
    "text": "queries to them through the CLI you can deploy queries to them in files you can have them start up if like this cluster",
    "start": "2871350",
    "end": "2878340"
  },
  {
    "text": "should run these 73 queries all the time and they're in that file and you've got some pipelines all",
    "start": "2878340",
    "end": "2884800"
  },
  {
    "text": "set up in there well it starts up slurps that file and execute those queries and that's what it does",
    "start": "2884800",
    "end": "2890470"
  },
  {
    "text": "forever it also has a rest endpoint so if you want to give it new queries yourself from an application or read",
    "start": "2890470",
    "end": "2896200"
  },
  {
    "text": "results you can do that and that",
    "start": "2896200",
    "end": "2902850"
  },
  {
    "text": "somewhat anticlimactically is that I got a run pretty soon I'll be around for",
    "start": "2902850",
    "end": "2909100"
  },
  {
    "text": "questions I really appreciate you being here with me oh you should hear yeah here's a link althought IO /k sequel also tomorrow",
    "start": "2909100",
    "end": "2916060"
  },
  {
    "text": "there could be an announcement on the consulate blog about a new version of k",
    "start": "2916060",
    "end": "2921520"
  },
  {
    "text": "sequel that has some interesting new features I can't tell you what it's called but you could just look or you",
    "start": "2921520",
    "end": "2927490"
  },
  {
    "text": "could follow me on Twitter and I'll tweet it Kiel Berglund where you just go to compliment that io / blog and there",
    "start": "2927490",
    "end": "2933760"
  },
  {
    "text": "could even be a video of me talking about it so check it out this is a good",
    "start": "2933760",
    "end": "2939400"
  },
  {
    "text": "time to be thinking about K sequel thanks for being here [Applause]",
    "start": "2939400",
    "end": "2950309"
  }
]