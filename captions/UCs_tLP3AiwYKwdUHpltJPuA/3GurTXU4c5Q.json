[
  {
    "start": "0",
    "end": "40000"
  },
  {
    "text": "okay can everyone hear me so okay so who knows who this is do people in the",
    "start": "2520",
    "end": "8440"
  },
  {
    "text": "audience know who this is quite a few people not everyone this is not an iOS",
    "start": "8440",
    "end": "13639"
  },
  {
    "text": "developers conference this is uh this is Craig federi and Craig federi",
    "start": "13639",
    "end": "21320"
  },
  {
    "text": "is an important person at Apple these days he's he's an executive top executive at Apple he's actually uh the",
    "start": "21320",
    "end": "29080"
  },
  {
    "text": "the soft the senior vice president of software engineering basically he's in charge of all software for the mac and",
    "start": "29080",
    "end": "34600"
  },
  {
    "text": "for iOS and so I think everyone here probably",
    "start": "34600",
    "end": "42079"
  },
  {
    "start": "40000",
    "end": "140000"
  },
  {
    "text": "already knew that already or most most people but maybe what you didn't know is that Craig is actually a really good",
    "start": "42079",
    "end": "49680"
  },
  {
    "text": "engineer and he's actually been doing it for a long time and he was actually before he was at Apple he was actually",
    "start": "49680",
    "end": "55879"
  },
  {
    "text": "at next with Steve Jobs at next and he worked on a framework called the Enterprise objects framework um which is",
    "start": "55879",
    "end": "64920"
  },
  {
    "text": "it's basically an OM uh and it's really the predecessor of",
    "start": "64920",
    "end": "70200"
  },
  {
    "text": "I guess cord data which is what if you use iOS these days you know what c data is and he actually developed in 1995 he",
    "start": "70200",
    "end": "77840"
  },
  {
    "text": "developed a class that core dat people cataa developers know really well and that's the NS managed object",
    "start": "77840",
    "end": "84400"
  },
  {
    "text": "context so he actually came up with the idea for this thing and actually developed a CO as well so um that was an",
    "start": "84400",
    "end": "93920"
  },
  {
    "text": "important it's an important dis important class in C and it's it actually quite makes it quite different",
    "start": "93920",
    "end": "100200"
  },
  {
    "text": "from other OMS I guess you could say um but 20 years later now he did",
    "start": "100200",
    "end": "107640"
  },
  {
    "text": "that in 1995 20 years later we've got a different problem right we've got we got",
    "start": "107640",
    "end": "112680"
  },
  {
    "text": "a complicating situation that is now we have the cloud we've got multiple",
    "start": "112680",
    "end": "118719"
  },
  {
    "text": "devices multiple stores and we've got to figure out ways of keeping basically two",
    "start": "118719",
    "end": "124439"
  },
  {
    "text": "or more managed object contexts in sync right across a very shaky Network um",
    "start": "124439",
    "end": "131160"
  },
  {
    "text": "without basically without any uh direct communication lines and this is a difficult problem and this is uh",
    "start": "131160",
    "end": "137400"
  },
  {
    "text": "basically what I want to talk about today so what is my interest in",
    "start": "137400",
    "end": "143480"
  },
  {
    "start": "140000",
    "end": "325000"
  },
  {
    "text": "sync I develop an app called uh mental case it's an app for students basically it's a a flashcard study app",
    "start": "143480",
    "end": "150519"
  },
  {
    "text": "and I started developing this app in 2006 I think yeah and it was for the Mac",
    "start": "150519",
    "end": "156480"
  },
  {
    "text": "right so it's a Mac app 2006 uh started off as a hobby slowly",
    "start": "156480",
    "end": "162239"
  },
  {
    "text": "grew into business um and then the iPhone came along and then later the iPad and I",
    "start": "162239",
    "end": "167920"
  },
  {
    "text": "developed an IOS app in about 2008 2009 and it was clear from the start",
    "start": "167920",
    "end": "173720"
  },
  {
    "text": "that these two should sync up right it would be pretty crazy if you had the Mac App you made some study cards on the the",
    "start": "173720",
    "end": "179879"
  },
  {
    "text": "mac and it didn't sync up to your iOS device so right from the beginning I had",
    "start": "179879",
    "end": "185560"
  },
  {
    "text": "sync but it was kind of that oldfashioned type of sync that you had with iTunes and iPods where uh you know",
    "start": "185560",
    "end": "192640"
  },
  {
    "text": "iTunes would basically get anything new from the iPod and then replace the stuff on the iPod and that that was how I did",
    "start": "192640",
    "end": "199200"
  },
  {
    "text": "it not Fe USB but Fe Wi-Fi connection so it was a direct type of sync where the two the two devices were were talking",
    "start": "199200",
    "end": "206280"
  },
  {
    "text": "directly to one another and exchanging information so I've had this all along right this this syn and um after a few",
    "start": "206280",
    "end": "215519"
  },
  {
    "text": "years about two or 3 years ago I started to see more and more feedback more and",
    "start": "215519",
    "end": "220640"
  },
  {
    "text": "more reviews along these lines you know what why is there no Cloud sync in this",
    "start": "220640",
    "end": "226439"
  },
  {
    "text": "app you know why we have to why have we got this uh this Wi-Fi sync you know why do I have to connect to the same Wi-Fi",
    "start": "226439",
    "end": "233480"
  },
  {
    "text": "network that that's ridiculous in this day and age and The Perennial you know what year is this right",
    "start": "233480",
    "end": "240319"
  },
  {
    "text": "so so in other words customers uh started to demand Cloud sync People",
    "start": "240319",
    "end": "246920"
  },
  {
    "text": "expected Cloud SN and um that's been the case for the last few years and so I",
    "start": "246920",
    "end": "252840"
  },
  {
    "text": "started to think about it and at the time there was a sort of an elephant in the room in terms of sink for core data",
    "start": "252840",
    "end": "260199"
  },
  {
    "text": "and that was Apple's solution right Apple had just announced iCloud and iCloud um came with a a core",
    "start": "260199",
    "end": "269000"
  },
  {
    "text": "data sinking component basically the idea was with with very few lines of code your C dat app could sync up across",
    "start": "269000",
    "end": "276280"
  },
  {
    "text": "devices it was it sounded great right I thought I'll spend a couple of months on this I'll have a beautifully syncing",
    "start": "276280",
    "end": "281960"
  },
  {
    "text": "Cloud app and um and everything will be solved and of course I spent about 6",
    "start": "281960",
    "end": "287800"
  },
  {
    "text": "months on it and I never got to the point where I was satisfied that I could ship uh ship a ship the product and",
    "start": "287800",
    "end": "295600"
  },
  {
    "text": "during that time I actually blogged quite extensively about it uh uh there's about five or six blog posts",
    "start": "295600",
    "end": "302600"
  },
  {
    "text": "about how core data iCloud sync actually works because Apple has written very little documentation about it so there",
    "start": "302600",
    "end": "310240"
  },
  {
    "text": "if you if you are interested in C dat iCloud cord data sync uh these blog posts are still pretty useful even",
    "start": "310240",
    "end": "316520"
  },
  {
    "text": "though they're a few years old now uh they do detail go into quite a lot of detail about how it's working under the",
    "start": "316520",
    "end": "322400"
  },
  {
    "text": "covers and what you should change in your code and things like that but as I said even with all that",
    "start": "322400",
    "end": "329960"
  },
  {
    "start": "325000",
    "end": "500000"
  },
  {
    "text": "that effort uh I never got to the point where I thought this I can ship this thing to the public and so um I did eventually solve",
    "start": "329960",
    "end": "339360"
  },
  {
    "text": "the problem and I'll talk about that a bit later at least for the time being",
    "start": "339360",
    "end": "344919"
  },
  {
    "text": "um so first I want to talk though about sync in general I want to go back a little bit and say okay where are we",
    "start": "344919",
    "end": "351639"
  },
  {
    "text": "with with synchronization and a lot of people would like to think I think that we're",
    "start": "351639",
    "end": "357240"
  },
  {
    "text": "in in the what's what's known as the the ubiquitous era right where your data is everywhere on every device it all sinks",
    "start": "357240",
    "end": "363680"
  },
  {
    "text": "up beautifully and for some devices that's that's absolutely true uh some some some apps that's true things that",
    "start": "363680",
    "end": "370520"
  },
  {
    "text": "you know email for example uh works very well Twitter um anything that Google",
    "start": "370520",
    "end": "375840"
  },
  {
    "text": "makes tends to work really well in terms of synchronization but for a lot of apps",
    "start": "375840",
    "end": "380880"
  },
  {
    "text": "it's not true at all and and if you if you take a general app any app in the app store and you and you look and see",
    "start": "380880",
    "end": "387280"
  },
  {
    "text": "whether it syncs I think there's a good chance that it doesn't unless it's a web app or something and frankly I think we're in",
    "start": "387280",
    "end": "394080"
  },
  {
    "text": "the pre ubiquitous era at the moment we're just in in that bit before everything is ubiquitous and we haven't",
    "start": "394080",
    "end": "400840"
  },
  {
    "text": "quite got there yet and to stop worrying about it will require us to worry a lot about it to begin with right um this is",
    "start": "400840",
    "end": "406880"
  },
  {
    "text": "a great quote from Ken Arnold that I stole from the cultured code blog and um",
    "start": "406880",
    "end": "412240"
  },
  {
    "text": "it describes a lot of things in in engineering but I think it really describes SN at the moment right for a lot of us it's a headache it's something",
    "start": "412240",
    "end": "418639"
  },
  {
    "text": "that keeps us awake at night it has certainly made the last couple years of my life pretty",
    "start": "418639",
    "end": "424960"
  },
  {
    "text": "horrible and I'm not the only one there are some pretty big names that have been struggling with syn synchronization",
    "start": "425759",
    "end": "431680"
  },
  {
    "text": "Cloud synchronization um cultured code is quite a well-known name they make an out called things it's a to-do list uh",
    "start": "431680",
    "end": "439360"
  },
  {
    "text": "they have blogged about it and and and they um they they were at least 2 years over over schedule with their Cloud",
    "start": "439360",
    "end": "445479"
  },
  {
    "text": "sinking they promised it for years and years and it was just a difficult problem and every everything they tried",
    "start": "445479",
    "end": "450599"
  },
  {
    "text": "just didn't quite work the way they expected and eventually they did come up with a solution but it was it was a long",
    "start": "450599",
    "end": "456080"
  },
  {
    "text": "time coming Bare Bones has an app called Yojimbo um and they also have uh have",
    "start": "456080",
    "end": "464159"
  },
  {
    "text": "just released Yojimbo 4 but that was again more than a year over schedule and the reason they tried to use iCloud",
    "start": "464159",
    "end": "471159"
  },
  {
    "text": "Corda sync and they didn't get it working same same as as me and black",
    "start": "471159",
    "end": "477319"
  },
  {
    "text": "pixel a big name in iOS development the days um they still haven't shipped a version of net Ed wire with a sync",
    "start": "477319",
    "end": "484199"
  },
  {
    "text": "option uh which has been promising for a long time so and they also were trying",
    "start": "484199",
    "end": "489520"
  },
  {
    "text": "to use core data iCloud so a lot of people having trouble a lot of people",
    "start": "489520",
    "end": "495120"
  },
  {
    "text": "having trouble with this uh this problem so let's have a look just say",
    "start": "495120",
    "end": "502280"
  },
  {
    "start": "500000",
    "end": "932000"
  },
  {
    "text": "you've got an app and you and and it's a core dat app and for iOS and you want to have this thing sync up what what are",
    "start": "502280",
    "end": "508479"
  },
  {
    "text": "your options uh as of today well you can write a complete web app",
    "start": "508479",
    "end": "514760"
  },
  {
    "text": "right you can write uh basically a server a smart server let's call that",
    "start": "514760",
    "end": "520039"
  },
  {
    "text": "call it a smart server um which you know it holds all the data in the cloud and that your",
    "start": "520039",
    "end": "526480"
  },
  {
    "text": "clients talk to um the sort of Technologies you can use there you know",
    "start": "526480",
    "end": "532600"
  },
  {
    "text": "just any servic side technology PHP Java rails D Jango",
    "start": "532600",
    "end": "537680"
  },
  {
    "text": "nodejs Google app engine take a pick there's a lot of Technologies there you can",
    "start": "537680",
    "end": "542800"
  },
  {
    "text": "use now this is a perfectly legitimate solution uh plenty of companies go this",
    "start": "542800",
    "end": "548440"
  },
  {
    "text": "route there are plenty of Pros as well the a very good thing in terms of",
    "start": "548440",
    "end": "554600"
  },
  {
    "text": "sync is that it's say you've got a central truth okay so so if uh it's very",
    "start": "554600",
    "end": "559760"
  },
  {
    "text": "unlikely that your client apps will get out of sync they can always just say Okay server tell me what the latest data",
    "start": "559760",
    "end": "566240"
  },
  {
    "text": "is and it and it means that you're very unlikely to ever get really far out of sync you can always it's stabilizing so",
    "start": "566240",
    "end": "572040"
  },
  {
    "text": "that Central truth is important it's crossplatform if you're writing an Android app and you're writing an IOS",
    "start": "572040",
    "end": "577720"
  },
  {
    "text": "app and also a web web app then you can you can this is the perfect way to solve that problem",
    "start": "577720",
    "end": "583519"
  },
  {
    "text": "right and there's no lock in you can take your rails app off of Amazon and",
    "start": "583519",
    "end": "589160"
  },
  {
    "text": "put it on Rackspace if you're not happy with Amazon right so there's no there's no real lockin you're not you know forced to stay with a particular company",
    "start": "589160",
    "end": "595600"
  },
  {
    "text": "your provider there are a few cons uh uh and this is more for I guess smaller smaller",
    "start": "595600",
    "end": "602640"
  },
  {
    "text": "companies um it can be reasonably expensive depends on your app of course but you have to host everyone's data",
    "start": "602640",
    "end": "609480"
  },
  {
    "text": "right and if you got if your app happens to be an app that uses quite a bit of data um you're going to be hosting a lot",
    "start": "609480",
    "end": "615399"
  },
  {
    "text": "of data every every every single user is going to have their data in your in your account and there's also some duplicated",
    "start": "615399",
    "end": "621959"
  },
  {
    "text": "effort there's a good chance that you'll be an iOS Developer if you're an iOS Developer there's a good chance you're not that good at rails or you're not web",
    "start": "621959",
    "end": "629320"
  },
  {
    "text": "developer as well there are not that many people that can do both really well so uh you're probably going to need to",
    "start": "629320",
    "end": "635040"
  },
  {
    "text": "be in a small team at least you can't probably can't do that on your",
    "start": "635040",
    "end": "640360"
  },
  {
    "text": "own okay so so you don't want to you don't want to go that route you don't want to go the route of a complete web",
    "start": "641040",
    "end": "646120"
  },
  {
    "text": "app well there these days you've got something that's sort of in between uh this is what I call a restful store or",
    "start": "646120",
    "end": "652639"
  },
  {
    "text": "structured store the sort of services I'm talking about past.com",
    "start": "652639",
    "end": "658040"
  },
  {
    "text": "um Azure Microsoft solution for mobile",
    "start": "658040",
    "end": "663839"
  },
  {
    "text": "services uh Dropbox I've just release a new API called the the data store API and that",
    "start": "663839",
    "end": "670279"
  },
  {
    "text": "is uh basically this a restful store uh just a structured store of",
    "start": "670279",
    "end": "675320"
  },
  {
    "text": "data there are a few smaller ones Wasabi sync is a core data only uh solution",
    "start": "675320",
    "end": "682760"
  },
  {
    "text": "cerium from the people that make simple note that's a core dat also has a core data aspect and Helios is from uh",
    "start": "682760",
    "end": "691760"
  },
  {
    "text": "Heroku and that allows you to use Heroku as your mobile back end so these are all solutions uh that that sort of",
    "start": "691760",
    "end": "699320"
  },
  {
    "text": "simplify uh you know that that server component it just just basically puts a store in in the cloud and you can just",
    "start": "699320",
    "end": "705320"
  },
  {
    "text": "write things to the store so it's not a particularly intelligent uh server it's it's kind of just a simple",
    "start": "705320",
    "end": "712760"
  },
  {
    "text": "server and there are pros and cons of this right so you've still got your central truth that's that's that's",
    "start": "712760",
    "end": "717959"
  },
  {
    "text": "useful uh the server is really simple so anyone can do it you don't have to be an expert",
    "start": "717959",
    "end": "723639"
  },
  {
    "text": "web developer and it should scale as well and uh you know you haven't got",
    "start": "723639",
    "end": "728680"
  },
  {
    "text": "this duplicated effort of having to be a Ruby on Rails developer as well as an iOS Developer still kind of expensive you",
    "start": "728680",
    "end": "735639"
  },
  {
    "text": "have to store all that data you still have to store that data you've you've you've got a bit of a vendor lock in",
    "start": "735639",
    "end": "742160"
  },
  {
    "text": "here because it's very difficult to move from one to another if you if you've committed to Azure they've got a different API to to another company",
    "start": "742160",
    "end": "749480"
  },
  {
    "text": "like Dropbox so you you'd have to rewrite your code quite a bit to move between them so you're sort of stuck",
    "start": "749480",
    "end": "754839"
  },
  {
    "text": "with whoever you choose and some of them don't have core data integration right so you'd have to bridge with core data",
    "start": "754839",
    "end": "763160"
  },
  {
    "text": "um now the one I want to concentrate on is actually neither of these it's it's",
    "start": "763160",
    "end": "768360"
  },
  {
    "text": "this one here uh file syncing Services okay these we're all familiar with file",
    "start": "768360",
    "end": "775199"
  },
  {
    "text": "thinking Services I think um the type of service I'm talking about here is iCloud",
    "start": "775199",
    "end": "780560"
  },
  {
    "text": "Dropbox there's one from Omni group called omnipresence uh Google Drive Amazon",
    "start": "780560",
    "end": "786639"
  },
  {
    "text": "Cloud Drive everyone's got one of these right Microsoft cloud Sky Drive and even bit torrent do it these days right bit",
    "start": "786639",
    "end": "792639"
  },
  {
    "text": "torrent allow you to sync up a folder anything you put in the folder will go through the bit trr Network to your",
    "start": "792639",
    "end": "798880"
  },
  {
    "text": "other devices so these things are everywhere everyone's got one of these um you know it's it's it's I think we",
    "start": "798880",
    "end": "806079"
  },
  {
    "text": "all know how they work you put stuff in one folder and it ends up uh crossing",
    "start": "806079",
    "end": "811720"
  },
  {
    "text": "crossing through the server to the other folder on the other device it's very simple basically just sending data back",
    "start": "811720",
    "end": "817160"
  },
  {
    "text": "and forth and so it's it's actually the most simple sort of servey you can think",
    "start": "817160",
    "end": "823480"
  },
  {
    "text": "of so the pros these are different Pros I guess to the others Pro one pro for a",
    "start": "823839",
    "end": "829720"
  },
  {
    "text": "developer like me as just a small company is that these things are effectively for me free right the the",
    "start": "829720",
    "end": "836000"
  },
  {
    "text": "user or the devel the consumer um might end up paying Dropbox for the service or",
    "start": "836000",
    "end": "842399"
  },
  {
    "text": "or apple but I don't have to process any any fees or anything to to provide",
    "start": "842399",
    "end": "847440"
  },
  {
    "text": "syncing right so that's that for me is an bit of an advantage I don't have to host anyone's data it's hosted by Apple",
    "start": "847440",
    "end": "854160"
  },
  {
    "text": "or Dropbox or Microsoft or whoever's providing the service there's no real locking because these things just sync",
    "start": "854160",
    "end": "860600"
  },
  {
    "text": "up folders of of of files so so it's it would be pretty easy to move from from",
    "start": "860600",
    "end": "866120"
  },
  {
    "text": "Dropbox to iCloud or or whatever and there's no server side code at all this",
    "start": "866120",
    "end": "872040"
  },
  {
    "text": "the server is just shifting around around uh data now there are some cons",
    "start": "872040",
    "end": "878440"
  },
  {
    "text": "of course as well uh there is no Central truth anymore right so no there's no way you",
    "start": "878440",
    "end": "885440"
  },
  {
    "text": "can't talk to any server and say okay tell me at this point in time what the the current files are right you can't do",
    "start": "885440",
    "end": "892880"
  },
  {
    "text": "that you can look locally and say okay I've got these files but I don't know locally I don't know what's happening on",
    "start": "892880",
    "end": "898000"
  },
  {
    "text": "other devices right so it I might have a I have a incomplete picture of all the",
    "start": "898000",
    "end": "904360"
  },
  {
    "text": "data and that means there's a big risk of Divergence if you go this way uh you have to be very careful how you process",
    "start": "904360",
    "end": "910800"
  },
  {
    "text": "the data um otherwise you'll get small changes on each device and they'll diverge and that's that's bad when",
    "start": "910800",
    "end": "917000"
  },
  {
    "text": "you're syncing right and there's no wellestablished framework in terms of syncing core data",
    "start": "917000",
    "end": "923600"
  },
  {
    "text": "for doing this there are a few options I'll talk about those but I would say none of them really well established and",
    "start": "923600",
    "end": "929880"
  },
  {
    "text": "and uh solve the problem well now what I want to do is I want to say uh these file syncing Services I",
    "start": "929880",
    "end": "938160"
  },
  {
    "start": "932000",
    "end": "975000"
  },
  {
    "text": "want you to stop thinking of them as file syncing services and think of them as peer-to-peer networks and actually",
    "start": "938160",
    "end": "944519"
  },
  {
    "text": "peer-to-peer Communications devices right Communications networks and that's the",
    "start": "944519",
    "end": "949800"
  },
  {
    "text": "way we're going to think about it from here on in think about it as uh this phone wanting to send the Mac a message",
    "start": "949800",
    "end": "957800"
  },
  {
    "text": "it sends a message to the Mac in the form of a file that it puts in its folder and the Mac once to send",
    "start": "957800",
    "end": "964319"
  },
  {
    "text": "something back it sends a f it puts a file in as a message so I think of it in",
    "start": "964319",
    "end": "969519"
  },
  {
    "text": "that way is probably the best way to think of it from here on in it's a peer-to-peer",
    "start": "969519",
    "end": "974720"
  },
  {
    "text": "Network okay so we want to use these file syncing services to sync up C dat",
    "start": "974920",
    "end": "981600"
  },
  {
    "start": "975000",
    "end": "1427000"
  },
  {
    "text": "right but C dat uses a a database right it's it's basically a SQL like database",
    "start": "981600",
    "end": "987040"
  },
  {
    "text": "underneath and this is a a tricky problem actually to um sync up databases",
    "start": "987040",
    "end": "992680"
  },
  {
    "text": "Fear Files or Fe peer-to-peer Network the first thing you you're",
    "start": "992680",
    "end": "998079"
  },
  {
    "text": "probably thinking is oh I just put the database into Dropbox right problem solved right",
    "start": "998079",
    "end": "1006920"
  },
  {
    "text": "and unfortunately this is a a square peg round hole situation you can't actually",
    "start": "1006920",
    "end": "1012040"
  },
  {
    "text": "really do that and get away with it for very long you're very likely to get some sort of data corruption that you know a",
    "start": "1012040",
    "end": "1018000"
  },
  {
    "text": "database will WR over uh your database while you're using the app or you're",
    "start": "1018000",
    "end": "1023079"
  },
  {
    "text": "going to just simply lose data that there's no merging of the data that the database will come in and replace any changes you've just made so this is",
    "start": "1023079",
    "end": "1030798"
  },
  {
    "text": "really a bad way to to to approach the situation you can't just take your database and and put it into Dropbox or",
    "start": "1030799",
    "end": "1037880"
  },
  {
    "text": "into iCloud what you have to do and all the solutions that I've seen basically",
    "start": "1037880",
    "end": "1044079"
  },
  {
    "text": "handle it this way is to split your database into the transaction logs or the Deltas um that",
    "start": "1044079",
    "end": "1052360"
  },
  {
    "text": "make up that database so imagine this this cup here is a database it's made up of matches in this case and each match",
    "start": "1052360",
    "end": "1058720"
  },
  {
    "text": "represents a little operation on the database uh that builds up the the cup",
    "start": "1058720",
    "end": "1063960"
  },
  {
    "text": "so an update or an insertion or a deletion right just like on a a standard",
    "start": "1063960",
    "end": "1070480"
  },
  {
    "text": "database what we do is we take the database and we split it into these matches we split it we decompose it into",
    "start": "1070480",
    "end": "1078000"
  },
  {
    "text": "all the changes that went into building the database all the Deltas or transactions",
    "start": "1078000",
    "end": "1083120"
  },
  {
    "text": "that did that and so what are these these matches that I'm talking about just to give you",
    "start": "1083120",
    "end": "1088240"
  },
  {
    "text": "a more concrete idea of what they are um here's some some Json that represents maybe could represent S one of these",
    "start": "1088240",
    "end": "1095799"
  },
  {
    "text": "these changes in in a movie app so we're writing an app for movies The Entity here is called",
    "start": "1095799",
    "end": "1101799"
  },
  {
    "text": "movie uh it's got a global ID so we can recognize it on all the devices as the same",
    "start": "1101799",
    "end": "1107320"
  },
  {
    "text": "object it's got a type in this case it's an insertion there could also be an update or a deletion of course and then",
    "start": "1107320",
    "end": "1115039"
  },
  {
    "text": "we've got a bunch of properties the name of the movie in this case twister uh the cast would probably be a relationship to",
    "start": "1115039",
    "end": "1121559"
  },
  {
    "text": "a bunch of actors so we've got some actor IDs there right so this is the this is the idea of um of these deltas",
    "start": "1121559",
    "end": "1129640"
  },
  {
    "text": "and what we do is we send these Deltas we put them in a file or multiple files they go across to the other device and",
    "start": "1129640",
    "end": "1136640"
  },
  {
    "text": "then we rebuild our database with these Deltas right so we replay them and build up a clone of",
    "start": "1136640",
    "end": "1145240"
  },
  {
    "text": "the database on the other machine okay so this is how how you do it how you",
    "start": "1145240",
    "end": "1150559"
  },
  {
    "text": "could do it with uh with with files syncing a databases with",
    "start": "1150559",
    "end": "1155880"
  },
  {
    "text": "files now as I said there are actually a couple of solutions for this already and I've mentioned one of them already that",
    "start": "1155880",
    "end": "1161919"
  },
  {
    "text": "is Apple solution iCloud core data sync it does exactly what I just described",
    "start": "1161919",
    "end": "1167080"
  },
  {
    "text": "right it's breaking things into transactions sending them across and then rebuilding the",
    "start": "1167080",
    "end": "1174640"
  },
  {
    "text": "database but as I also mentioned there's some problems with iCloud C data and",
    "start": "1175000",
    "end": "1181640"
  },
  {
    "text": "plenty of people have been having trouble with it it was for the first two years at least uh very buggy um which is",
    "start": "1181640",
    "end": "1187840"
  },
  {
    "text": "a real problem when you're talking about data it's not it's not a glitch in the US user interface which you can sort of",
    "start": "1187840",
    "end": "1193320"
  },
  {
    "text": "work around this is people's data and and and when when they lose data people get angry right so it's it's something",
    "start": "1193320",
    "end": "1199559"
  },
  {
    "text": "you really it's it's not something you want to have bugs in something that deals with data so it was buggy and that was a that",
    "start": "1199559",
    "end": "1206840"
  },
  {
    "text": "was a big problem but there are other problems and some of them are really unavoidable uh",
    "start": "1206840",
    "end": "1213200"
  },
  {
    "text": "it's a black box right it's proprietary proprietary software it's Apple software",
    "start": "1213200",
    "end": "1218799"
  },
  {
    "text": "you can't see what they're doing they don't tell you what they're doing they don't tell you how it works how it's supposed to work what to expect they",
    "start": "1218799",
    "end": "1226120"
  },
  {
    "text": "don't tell you any of that right so you're guessing all the time as to whether the behavior is correct or how",
    "start": "1226120",
    "end": "1232400"
  },
  {
    "text": "what happens when there's a conflict it's not not documented right um what happens if validation fails not",
    "start": "1232400",
    "end": "1239520"
  },
  {
    "text": "documented does it call into your code at any point not documented right none",
    "start": "1239520",
    "end": "1245720"
  },
  {
    "text": "of this was documented I figured some of them out out on my blog you can find on my blog but it's it's not documented by",
    "start": "1245720",
    "end": "1252480"
  },
  {
    "text": "Apple they they just say it you know it works and unfortunately that's not not",
    "start": "1252480",
    "end": "1258520"
  },
  {
    "text": "usually good enough the fact that it's a black box makes it very difficult to test you",
    "start": "1258520",
    "end": "1265120"
  },
  {
    "text": "can't uh basically testing involves two devices and then waiting for things to",
    "start": "1265120",
    "end": "1271120"
  },
  {
    "text": "transfer and this makes your your debug Cycles very long right you make a change on one device you wait for a few minutes",
    "start": "1271120",
    "end": "1278320"
  },
  {
    "text": "iCloud transfers to another device and then you see what happens and and then you try to reproduce that so your your",
    "start": "1278320",
    "end": "1283919"
  },
  {
    "text": "debug cycle is minutes long if you're lucky if you throw too much data iCloud it'll actually throttle back your",
    "start": "1283919",
    "end": "1290720"
  },
  {
    "text": "transfers and you can forget it for the rest of the day you can go home you're not going to get any more sinking done",
    "start": "1290720",
    "end": "1295799"
  },
  {
    "text": "that day it's a pretty horrible experience I've never had such a horrible debug",
    "start": "1295799",
    "end": "1303279"
  },
  {
    "text": "experience now some of these things yearly release schedules so Apple if Apple do find a bug and they do fix",
    "start": "1303279",
    "end": "1310039"
  },
  {
    "text": "these bugs of course um they're stuck on a yearly release schedule most of the time they you know they've got to wait",
    "start": "1310039",
    "end": "1316559"
  },
  {
    "text": "for the next OS upgrade um they sometimes are allowed to issue a very",
    "start": "1316559",
    "end": "1323080"
  },
  {
    "text": "important fix in a in in an inter intermediate release but that's quite actually pretty hard uh I've talk to",
    "start": "1323080",
    "end": "1329000"
  },
  {
    "text": "people in apple and that's actually not easy to do you have to convince people that it's really that important to put in you know uh 7.1 or whatever um so",
    "start": "1329000",
    "end": "1339159"
  },
  {
    "text": "actually usually you're waiting for a year if there is a bug you're waiting for a year to to see that",
    "start": "1339159",
    "end": "1346000"
  },
  {
    "text": "fixed and of course there's lockin none of this is documented it's not open source uh if you decide you're not happy",
    "start": "1346000",
    "end": "1353000"
  },
  {
    "text": "with iCloud the iCloud solution you you're going to have to rewrite your code completely because you you can't use any",
    "start": "1353000",
    "end": "1359840"
  },
  {
    "text": "of it it only works with Apple's iCloud um back end basically so if you decide I",
    "start": "1359840",
    "end": "1367279"
  },
  {
    "text": "want to use dropbox uh too bad now there's one more problem with",
    "start": "1367279",
    "end": "1373520"
  },
  {
    "text": "iCloud C data and that's again something that Apple can't really control that is",
    "start": "1373520",
    "end": "1380240"
  },
  {
    "text": "when a company like Apple or Google one of these big companies they move into a space like in this case syncing up core",
    "start": "1380240",
    "end": "1387600"
  },
  {
    "text": "data databases they create a vacuum right because no one is going to compete",
    "start": "1387600",
    "end": "1393360"
  },
  {
    "text": "with that no one's going to try to compete with apple uh doing a solution",
    "start": "1393360",
    "end": "1399039"
  },
  {
    "text": "for syncing core data right so when Apple issue when Apple came with this",
    "start": "1399039",
    "end": "1404840"
  },
  {
    "text": "solution they have to get it they have to get it completely right um if they don't do that we've got a problem",
    "start": "1404840",
    "end": "1410919"
  },
  {
    "text": "because there's no one else is going to do an open source project to solve the problem or or make a competing",
    "start": "1410919",
    "end": "1416640"
  },
  {
    "text": "commercial offering or anything like that so that's actually the situation we've been in for about 2 or 3 years",
    "start": "1416640",
    "end": "1421919"
  },
  {
    "text": "that nobody has come up with anything uh",
    "start": "1421919",
    "end": "1427000"
  },
  {
    "text": "new there is one other framework I just said that we we don't have anything new",
    "start": "1427039",
    "end": "1432120"
  },
  {
    "text": "that's still true there is one other framework you can try and that is an open source framework",
    "start": "1432120",
    "end": "1438600"
  },
  {
    "text": "the reason that we've got this framework is simply that it was written before iCloud was announced okay I'm sure if if",
    "start": "1438600",
    "end": "1446200"
  },
  {
    "text": "iCloud had been announced before they started they would have stopped",
    "start": "1446200",
    "end": "1451960"
  },
  {
    "text": "immediately it's called tcds it stands for Tim isad C sync uh Tim's the guy",
    "start": "1451960",
    "end": "1458600"
  },
  {
    "text": "that wrote it it's an open source project uh MIT license um first developed by Tim",
    "start": "1458600",
    "end": "1467480"
  },
  {
    "text": "mad it's these days it's maintained by no thirst software no thirst to the the",
    "start": "1467480",
    "end": "1472720"
  },
  {
    "text": "guys that write uh this money well prod product you might have heard of um the",
    "start": "1472720",
    "end": "1477799"
  },
  {
    "text": "the the owner of the company is is Kevin hter and he's often on uh on podcasts",
    "start": "1477799",
    "end": "1483559"
  },
  {
    "text": "and things as well uh this this has support for both",
    "start": "1483559",
    "end": "1489440"
  },
  {
    "text": "iCloud and Dropbox as backends um and it is actually out there shipping it ships",
    "start": "1489440",
    "end": "1495520"
  },
  {
    "text": "in my app uh this is what I eventually use used to ship my app mental case and",
    "start": "1495520",
    "end": "1500600"
  },
  {
    "text": "also in Kevin ha's app money well so it is actually in the",
    "start": "1500600",
    "end": "1505840"
  },
  {
    "text": "wild but it's not all roses here either the Creator team EAD is no longer uh",
    "start": "1505960",
    "end": "1513000"
  },
  {
    "text": "involved he works now for Apple he's not allowed to contribute so that's a pretty",
    "start": "1513000",
    "end": "1518399"
  },
  {
    "text": "serious problem already right there um the code was as I said written before iCloud was around it's probably four or",
    "start": "1518399",
    "end": "1525159"
  },
  {
    "text": "five years old some of the objective c uh is old um some of the design",
    "start": "1525159",
    "end": "1530240"
  },
  {
    "text": "decisions you know because it was a sort of pioneering work some of the decisions",
    "start": "1530240",
    "end": "1535440"
  },
  {
    "text": "probably could have been made better now um but with hindsight the benefit of hindsight but um so yeah the design it",
    "start": "1535440",
    "end": "1542480"
  },
  {
    "text": "it has a few problems one of the problems is for example that it uploads a complete copy of your",
    "start": "1542480",
    "end": "1548120"
  },
  {
    "text": "store uh for every single device right so so if you got three devices syncing",
    "start": "1548120",
    "end": "1554520"
  },
  {
    "text": "it's uploading three complete copies of your store uh and that could be quite a bit of data depending on your",
    "start": "1554520",
    "end": "1560880"
  },
  {
    "text": "app can be quite slow uh it uses core data internally which is okay but it's",
    "start": "1560880",
    "end": "1566640"
  },
  {
    "text": "not using it very efficiently it's doing single object fetches and things like that and the worst thing is that there's",
    "start": "1566640",
    "end": "1573799"
  },
  {
    "text": "no there's no real guarantee that your stores will stay in sync the the algorithm used is not is not quite",
    "start": "1573799",
    "end": "1581000"
  },
  {
    "text": "sophisticated enough to guar make that guarantee so in VAR in in in certain circumstances it's possible that things",
    "start": "1581000",
    "end": "1586679"
  },
  {
    "text": "will get out of sync and that's not a good thing so that's where we're at the",
    "start": "1586679",
    "end": "1594039"
  },
  {
    "text": "moment we've got two solutions uh iCloud and tcds and neither of them are",
    "start": "1594039",
    "end": "1600279"
  },
  {
    "text": "particularly uh inviting I would say so whether we go from here well uh I sort",
    "start": "1600279",
    "end": "1608120"
  },
  {
    "text": "of hoped for a while that someone else would do uh a library uh like black",
    "start": "1608120",
    "end": "1614200"
  },
  {
    "text": "pixel black pixel were complaining so I thought maybe they'll do something and I've waited quite a while and uh I",
    "start": "1614200",
    "end": "1619760"
  },
  {
    "text": "decided early in the year that I that no one else was going to fix this problem um so I would have to go into the vacuum",
    "start": "1619760",
    "end": "1627360"
  },
  {
    "text": "of uh of apple apple space and uh yeah contribute something so I've got a",
    "start": "1627360",
    "end": "1634320"
  },
  {
    "text": "little bit of history with open source I I founded this open source project called plot which is a a plotting",
    "start": "1634320",
    "end": "1641799"
  },
  {
    "text": "framework for iOS and that's still going quite well I'm not that involved these days but it's uh still AC ly",
    "start": "1641799",
    "end": "1648559"
  },
  {
    "text": "developed so I want to today introduce you to a new a new open source project",
    "start": "1648559",
    "end": "1655399"
  },
  {
    "text": "um for solving this problem uh which I call",
    "start": "1655399",
    "end": "1660480"
  },
  {
    "text": "ensembles and it's short for core dat ensembles it's only for core data it's it's an MIT license uh open",
    "start": "1660480",
    "end": "1668720"
  },
  {
    "text": "source framework possibly later I'll add commercial licenses with uh with better",
    "start": "1668720",
    "end": "1674760"
  },
  {
    "text": "with you know increased functionality and source code and things like extra source code and things but for now it's",
    "start": "1674760",
    "end": "1681000"
  },
  {
    "text": "just open source and it will that will always be an open source component um the idea of course is to",
    "start": "1681000",
    "end": "1688760"
  },
  {
    "text": "sync core data SQL light stores and it should work on Mac and iOS",
    "start": "1688760",
    "end": "1695320"
  },
  {
    "text": "and the most important uh Concept in this framework is the idea of a persistent store on somol if you know",
    "start": "1695320",
    "end": "1702480"
  },
  {
    "text": "core data you've heard of a persistent store and the idea is to add one more concept to that and that is a persistent",
    "start": "1702480",
    "end": "1708720"
  },
  {
    "text": "store Ensemble which couples together persistent stores and those persistent stores could be on different devices but",
    "start": "1708720",
    "end": "1715960"
  },
  {
    "text": "they could also be on the same device there's not they can be any stores right um there's no requirement that they be",
    "start": "1715960",
    "end": "1721880"
  },
  {
    "text": "on different devices or anything like that so it's a coupling mechanism basically that's that's the component",
    "start": "1721880",
    "end": "1727880"
  },
  {
    "text": "that I'm I'm trying to write so I had a few design restra",
    "start": "1727880",
    "end": "1733559"
  },
  {
    "start": "1730000",
    "end": "1892000"
  },
  {
    "text": "constraints I set on myself effectively when I started doing this back I started start it in April it's just I've just",
    "start": "1733559",
    "end": "1739039"
  },
  {
    "text": "been doing it in my spare time so I haven't been doing it fulltime and I want to go through a few",
    "start": "1739039",
    "end": "1744080"
  },
  {
    "text": "of those design constraints first the first was that it should be non-invasive what I mean by that is you shouldn't",
    "start": "1744080",
    "end": "1750159"
  },
  {
    "text": "have to modify your model you shouldn't have to subass NS managed object context",
    "start": "1750159",
    "end": "1756080"
  },
  {
    "text": "you shouldn't have to subass NS managed object you shouldn't have to change your object your stat at all really right",
    "start": "1756080",
    "end": "1762799"
  },
  {
    "text": "your your core data stack you shouldn't have to tear it down and build it up and this is what you have to do with iCloud",
    "start": "1762799",
    "end": "1768720"
  },
  {
    "text": "uh sinking you have to make it it's quite invasive you have to change a lot of things the idea here was to make it",
    "start": "1768720",
    "end": "1774640"
  },
  {
    "text": "as noninvasive as possible so it should just latch on to your existing structure",
    "start": "1774640",
    "end": "1780960"
  },
  {
    "text": "and and just work hopefully it should be backend agnostic",
    "start": "1780960",
    "end": "1787559"
  },
  {
    "text": "it should work with any sort of file transfer mechanism file syncing",
    "start": "1787559",
    "end": "1793320"
  },
  {
    "text": "Dropbox iCloud um if you want to make your own S3 back end because maybe you're a",
    "start": "1793320",
    "end": "1800960"
  },
  {
    "text": "company and you're not allowed to make your data public just write your own S3 backend it's not a big deal it's a",
    "start": "1800960",
    "end": "1807360"
  },
  {
    "text": "couple hundred lines at most of code uh omnipresence a new one from Omni group web dab an older one but still",
    "start": "1807360",
    "end": "1815080"
  },
  {
    "text": "around right FTP any of these should work I'm not saying I'm going to support",
    "start": "1815080",
    "end": "1820200"
  },
  {
    "text": "them all out of the box um but anything that can move around files should work",
    "start": "1820200",
    "end": "1826600"
  },
  {
    "text": "in fact it should also work with just Wi-Fi syncing a direct connection with Wi-Fi where you exchange files just the",
    "start": "1826600",
    "end": "1833960"
  },
  {
    "text": "same way iTunes might do that should also be possible it's just another way of syncing up",
    "start": "1833960",
    "end": "1841240"
  },
  {
    "text": "files and in fact I've already built in support for a local file",
    "start": "1841279",
    "end": "1846600"
  },
  {
    "text": "system right now that that sounds pretty crazy right why would you sync fear the local file system why would you want to",
    "start": "1846600",
    "end": "1853519"
  },
  {
    "text": "do that well that makes it much much more more testable right your app and",
    "start": "1853519",
    "end": "1859919"
  },
  {
    "text": "the framework are much much more testable when you don't have this debug cycle that is minutes long you can debug",
    "start": "1859919",
    "end": "1866240"
  },
  {
    "text": "in real time right you can set up two copies of your app on the one machine they can sync fear the local file system",
    "start": "1866240",
    "end": "1873480"
  },
  {
    "text": "and you can be testing in real time right so this is a big this was a a real",
    "start": "1873480",
    "end": "1878639"
  },
  {
    "text": "sticking point for me all that pain uh led me to this and it is actually pretty",
    "start": "1878639",
    "end": "1886000"
  },
  {
    "text": "pretty important and I wish you could do it with iCloud for",
    "start": "1886000",
    "end": "1891480"
  },
  {
    "text": "example okay so say you want to add one of these file systems uh what do you have to do say you wanted to add an S3",
    "start": "1891480",
    "end": "1898279"
  },
  {
    "start": "1892000",
    "end": "1987000"
  },
  {
    "text": "back end custom S3 back end well it's basically just a question of of implementing a bunch of protocol a bunch",
    "start": "1898279",
    "end": "1904600"
  },
  {
    "text": "of methods these these methods look a lot like the methods of NS file manager",
    "start": "1904600",
    "end": "1909960"
  },
  {
    "text": "okay the big distinction though is that they're all asynchronous right because we've usually got networking involved so",
    "start": "1909960",
    "end": "1917279"
  },
  {
    "text": "it's quite it's quite straightforward you just implement it for whatever you want to need to do file existed path you",
    "start": "1917279",
    "end": "1923320"
  },
  {
    "text": "need to be able to answer that and you answer by calling a completion block contents of directory at path",
    "start": "1923320",
    "end": "1930960"
  },
  {
    "text": "completion create directory at path so there's a bunch of these you implement those and you're you're you're",
    "start": "1930960",
    "end": "1936399"
  },
  {
    "text": "practically done it's about 200 lines I think uh 100 to 200 lines for for you know like Dropbox or iCloud I think I",
    "start": "1936399",
    "end": "1944039"
  },
  {
    "text": "did iCloud the other day it was maybe an hour's work and it was probably only 200",
    "start": "1944039",
    "end": "1951399"
  },
  {
    "text": "lines the other thing is I said it was testable it's also tested right um I developed the whole thing",
    "start": "1953279",
    "end": "1960760"
  },
  {
    "text": "with with unit testing so I right from the while not actually from the beginning I started without it and I realized this is going to get real bad",
    "start": "1960760",
    "end": "1968279"
  },
  {
    "text": "uh unless I start unit testing and so since then I've uh I've been unit testing the whole way and that's how",
    "start": "1968279",
    "end": "1974000"
  },
  {
    "text": "I've been developing each component basically uh testing as I go so at the moment there's there's",
    "start": "1974000",
    "end": "1980960"
  },
  {
    "text": "about 3 and half thousand lines of of uh unit tests I want to mention uh how you go",
    "start": "1980960",
    "end": "1988799"
  },
  {
    "start": "1987000",
    "end": "2232000"
  },
  {
    "text": "about merging because merging is actually um pretty tricky in a in a decentralized peer-to-peer situation",
    "start": "1988799",
    "end": "1994919"
  },
  {
    "text": "like this um so let's let's treat the first",
    "start": "1994919",
    "end": "2000480"
  },
  {
    "text": "let's first treat the centralized case Okay so you've got you've got a central server somewhere right and you can lock",
    "start": "2000480",
    "end": "2006799"
  },
  {
    "text": "that server so one client talks to the server each time so you got a central truth right this is the the case most",
    "start": "2006799",
    "end": "2013279"
  },
  {
    "text": "people are dealing with so what happens then you've got say you've got a device one and a device two and they're doing",
    "start": "2013279",
    "end": "2019600"
  },
  {
    "text": "saves and each block here is all the changes in one save okay so you can see",
    "start": "2019600",
    "end": "2024919"
  },
  {
    "text": "device one's done three save operations device two has done two and um time is going up so we're",
    "start": "2024919",
    "end": "2033320"
  },
  {
    "text": "going to make a new save on each device and these are going to be concurrent they happen basically the same time",
    "start": "2033320",
    "end": "2038760"
  },
  {
    "text": "right these are two new saves con current changes and imagine now that",
    "start": "2038760",
    "end": "2044039"
  },
  {
    "text": "both of these find their way through the uh the network and they're both now on device one and device one now has to",
    "start": "2044039",
    "end": "2051000"
  },
  {
    "text": "look at these new changes and decide what to do with them what what is a conflict for example what is in Conflict",
    "start": "2051000",
    "end": "2056560"
  },
  {
    "text": "what has changed and it will it can say okay what do I need to consider I need to consider",
    "start": "2056560",
    "end": "2062118"
  },
  {
    "text": "what I've done since the last merge and what the other systems done since the last merge in other words just the new stuff I just need to look at the new",
    "start": "2062119",
    "end": "2068118"
  },
  {
    "text": "blocks and I need to see which ones are in conflict and fix them in in a in a deterministic way right this is a",
    "start": "2068119",
    "end": "2075358"
  },
  {
    "text": "standard procedure this is a the way that for example tcds works it works great as long as you got a centralized",
    "start": "2075359",
    "end": "2081398"
  },
  {
    "text": "locking server right let's take the decentralized case now things are a bit",
    "start": "2081399",
    "end": "2086839"
  },
  {
    "text": "more tricky we've got different states on different devices right so now device one is on the left",
    "start": "2086839",
    "end": "2094638"
  },
  {
    "text": "here and device one has got all of the data and device 2 is missing a block it's",
    "start": "2094639",
    "end": "2099880"
  },
  {
    "text": "missing that third block from device one right it's maybe still in transit it's on the server it's still coming over",
    "start": "2099880",
    "end": "2106119"
  },
  {
    "text": "hasn't arrived yet and they both do the same save they did before right device one does a save",
    "start": "2106119",
    "end": "2112880"
  },
  {
    "text": "device two does a save concurrently same time devices two device",
    "start": "2112880",
    "end": "2120400"
  },
  {
    "text": "2's uh block Finds Its way to device one now device one is ready to to do a merge",
    "start": "2120400",
    "end": "2125960"
  },
  {
    "text": "okay device one looks at what it's got now what is it going to have to include in this merge which blocks right it",
    "start": "2125960",
    "end": "2134119"
  },
  {
    "text": "looks like it's the same situation we had before it looks like it looks like the same situation but is it the same",
    "start": "2134119",
    "end": "2140200"
  },
  {
    "text": "situation right can it just take those new two blocks and say we're going to merge those two well no it has to",
    "start": "2140200",
    "end": "2147119"
  },
  {
    "text": "actually take those blocks those three blocks and the reason is that this second block",
    "start": "2147119",
    "end": "2154280"
  },
  {
    "text": "this block from device 2 has never been compared with the block from the third",
    "start": "2154280",
    "end": "2160280"
  },
  {
    "text": "block from device one right so you actually have to include some old data in in in the comparison so this is",
    "start": "2160280",
    "end": "2168200"
  },
  {
    "text": "to do this we use something called a vector clock uh you have to basically snapshot the whole system every time you",
    "start": "2168200",
    "end": "2173960"
  },
  {
    "text": "do a save so that later on you can you can rebuild that state and figure out okay this one was concurrent with this",
    "start": "2173960",
    "end": "2179839"
  },
  {
    "text": "one and you can figure out what has to be included in the in the merge right so it's actually a step more difficult than",
    "start": "2179839",
    "end": "2186839"
  },
  {
    "text": "standard syncing server I should say I got a lot of ideas",
    "start": "2186839",
    "end": "2194520"
  },
  {
    "text": "for this from this great blog post from uh from Milan zimov from from Clear he",
    "start": "2194520",
    "end": "2201119"
  },
  {
    "text": "they wrote this great app called clear Todo list app that's very popular and they did this great blog post about how",
    "start": "2201119",
    "end": "2207560"
  },
  {
    "text": "they do uh syncing with clear and this gave me a lot of ideas about these Vector clocks and a lot of points to to",
    "start": "2207560",
    "end": "2214160"
  },
  {
    "text": "where to learn more um because i' actually never never worked in that sort of stuff before so yeah big thanks for",
    "start": "2214160",
    "end": "2220800"
  },
  {
    "text": "for that and that's a great blog post if you're interested in uh in how to do these decentralized um concurrency",
    "start": "2220800",
    "end": "2230960"
  },
  {
    "text": "basically okay uh how do you use what you know where's some source code how do",
    "start": "2231040",
    "end": "2236359"
  },
  {
    "start": "2232000",
    "end": "2395000"
  },
  {
    "text": "you use this how difficult is it to use this framework well here's a bit of source code to show uh to show how you",
    "start": "2236359",
    "end": "2243839"
  },
  {
    "text": "set it up um basically there are two things you need to set up you'll need a file what I",
    "start": "2243839",
    "end": "2249680"
  },
  {
    "text": "call a cloud file system in this case I'm using iCloud so I just set up an iCloud uh file system object I pass the",
    "start": "2249680",
    "end": "2258040"
  },
  {
    "text": "ubiquity container identifier which is just standard iCloud uh identifier I then make an ensemble and",
    "start": "2258040",
    "end": "2265240"
  },
  {
    "text": "for that Ensemble I give this file system I also need to pass in the managed object model and the path of the",
    "start": "2265240",
    "end": "2272000"
  },
  {
    "text": "SQL light store right and there's also a global identifier there globally unique",
    "start": "2272000",
    "end": "2279000"
  },
  {
    "text": "identifier for this Ensemble I sent the",
    "start": "2279000",
    "end": "2284078"
  },
  {
    "text": "delegate now um that's all the setup you need basically now the qu now now the",
    "start": "2284560",
    "end": "2290480"
  },
  {
    "text": "The Ensemble can be in a couple of different states when when you first make it and you haven't done anything",
    "start": "2290480",
    "end": "2295520"
  },
  {
    "text": "it's in an un what I call a Del leached state right so it's not leeched to the other stores so you have to so you can",
    "start": "2295520",
    "end": "2303440"
  },
  {
    "text": "ask The Ensemble are you leeched if you're not leeched okay start the leeching process and you don't have to",
    "start": "2303440",
    "end": "2310040"
  },
  {
    "text": "do this once right the first time that you start sinking and this will set up a bunch of uh local files do some stuff on",
    "start": "2310040",
    "end": "2317880"
  },
  {
    "text": "the server if there's a server or whatever um basically the initialization",
    "start": "2317880",
    "end": "2322960"
  },
  {
    "text": "of the whole thing um and later on once you already",
    "start": "2322960",
    "end": "2328200"
  },
  {
    "text": "are leached all you have to do to do a merge is is called merge with completion right and that will do that will look at",
    "start": "2328200",
    "end": "2334040"
  },
  {
    "text": "the new stuff merge it together and update your database that's effectively the synchronization",
    "start": "2334040",
    "end": "2341280"
  },
  {
    "text": "method the only other thing you might want to consider are these two methods here these are these are delegate",
    "start": "2341520",
    "end": "2347599"
  },
  {
    "text": "methods um whenever you have a background save of a managed object context with core data you have to merge",
    "start": "2347599",
    "end": "2354800"
  },
  {
    "text": "those those results so you have to call this to make sure that your managed object context knows about those new",
    "start": "2354800",
    "end": "2361079"
  },
  {
    "text": "changes so yeah you want to you'll definitely want to do this one right and this one's optional this one you to",
    "start": "2361079",
    "end": "2366880"
  },
  {
    "text": "provide Global identifiers for objects and effectively that means that the",
    "start": "2366880",
    "end": "2372720"
  },
  {
    "text": "framework can automatically import your your Library without you doing anything",
    "start": "2372720",
    "end": "2377800"
  },
  {
    "text": "um as long as it's got its Global IDs that's it that's all the code that's",
    "start": "2377800",
    "end": "2384440"
  },
  {
    "text": "20 lines of code and you've got it syncing out right that's I about syncing",
    "start": "2384440",
    "end": "2390359"
  },
  {
    "text": "done it's that easy really so at the current status got",
    "start": "2390359",
    "end": "2397000"
  },
  {
    "start": "2395000",
    "end": "2515000"
  },
  {
    "text": "about 6,000 lines of pretty dense framework code 3 half th000 lines of unit tests um so it's about 10,000 lines",
    "start": "2397000",
    "end": "2404520"
  },
  {
    "text": "I guess all together um I only got the First full syn done about a week ago so",
    "start": "2404520",
    "end": "2410520"
  },
  {
    "text": "it's pretty new right I was really pushing to hit this deadline uh but I",
    "start": "2410520",
    "end": "2415599"
  },
  {
    "text": "had lots of components but they weren't quite uh working together but but it's it's done at least uh the first stage is",
    "start": "2415599",
    "end": "2422520"
  },
  {
    "text": "done it's sinking at least so where's the code well I actually gave a talk similar to this",
    "start": "2422520",
    "end": "2428680"
  },
  {
    "text": "about a month ago and at that and and at that time I just had to say well this is vapor Weare um you stay",
    "start": "2428680",
    "end": "2435359"
  },
  {
    "text": "tuned but today I actually do have uh it's actually an important day right um",
    "start": "2435359",
    "end": "2443240"
  },
  {
    "text": "because I actually do have the code now and so what I'd like to do is",
    "start": "2443240",
    "end": "2450079"
  },
  {
    "text": "if I have Network I would like to try to p push",
    "start": "2450079",
    "end": "2456560"
  },
  {
    "text": "this to GitHub so what does it get it's push uh yeah origin Master right",
    "start": "2456560",
    "end": "2465720"
  },
  {
    "text": "origin",
    "start": "2465720",
    "end": "2468720"
  },
  {
    "text": "Master oh you got it okay so it's",
    "start": "2474280",
    "end": "2480000"
  },
  {
    "text": "done well hitch pretty much so there it is go get it I know you",
    "start": "2485000",
    "end": "2491640"
  },
  {
    "text": "guys love QR CES now for the oldfashioned in the audience there's a URL so if you're",
    "start": "2491640",
    "end": "2498000"
  },
  {
    "text": "interested uh that should be where it is now unless I accidentally pushed it somewhere totally",
    "start": "2498000",
    "end": "2504640"
  },
  {
    "text": "different so yeah my username dreak at GitHub",
    "start": "2504839",
    "end": "2510560"
  },
  {
    "text": "ensembl um yeah so that's that's actually all I've got to talk about uh this is my",
    "start": "2512200",
    "end": "2518400"
  },
  {
    "text": "take-home message it's it's still quite early days really for decentralized database syncing it's it's a difficult",
    "start": "2518400",
    "end": "2524040"
  },
  {
    "text": "problem there are a few Solutions already out there iCloud from Apple uh and",
    "start": "2524040",
    "end": "2529680"
  },
  {
    "text": "tcds uh but neither are really uh satisfactory in my opinion um trcs is",
    "start": "2529680",
    "end": "2536119"
  },
  {
    "text": "probably the best option you've got at the moment um and I'm hoping that the CATE",
    "start": "2536119",
    "end": "2541280"
  },
  {
    "text": "ensembles will be the next step basically learning I I learned a lot of",
    "start": "2541280",
    "end": "2546559"
  },
  {
    "text": "things from tcds I learned a lot of things from Apple solution and I've tried to get the best things from both",
    "start": "2546559",
    "end": "2551640"
  },
  {
    "text": "and and fix things that I thought weren't right and hopefully that's the next step C dator on so check that out",
    "start": "2551640",
    "end": "2557839"
  },
  {
    "text": "if you're interested and some attributions that's all so thanks a",
    "start": "2557839",
    "end": "2565200"
  },
  {
    "text": "lot uh what about security issues with sinking Services government looking over your",
    "start": "2575160",
    "end": "2582000"
  },
  {
    "text": "shoulder only suitable for nonsensitive data someone from the NSA is here",
    "start": "2582000",
    "end": "2589520"
  },
  {
    "text": "right no that's a good question and as I said this whole thing is uh is backend",
    "start": "2589520",
    "end": "2594640"
  },
  {
    "text": "agnostic right so you can write as secure a server as you like in fact it",
    "start": "2594640",
    "end": "2600400"
  },
  {
    "text": "would be very easy I was just thinking about this exact point this morning it'd be very easy to make it use of decorator",
    "start": "2600400",
    "end": "2606640"
  },
  {
    "text": "design pattern if if you guys should all know that one um to take say icloud's uh",
    "start": "2606640",
    "end": "2613400"
  },
  {
    "text": "um file system and and simply wrap it in uh an encryption system that takes the",
    "start": "2613400",
    "end": "2620480"
  },
  {
    "text": "file encrypts it before putting in an iCloud that that should be literally 50 lines of code it depends on your",
    "start": "2620480",
    "end": "2626599"
  },
  {
    "text": "encryption system maybe but if he calling out to a library or something it should be very easy to do that so you",
    "start": "2626599",
    "end": "2632559"
  },
  {
    "text": "can add any encryption you like to the data it doesn't care about that as long as it comes back in to the library when it reads it back in it comes back in un",
    "start": "2632559",
    "end": "2638599"
  },
  {
    "text": "encrypted of course right you it's it's still got to be core data um yeah so uh",
    "start": "2638599",
    "end": "2646640"
  },
  {
    "text": "I don't see really any problem if you want to encrypt that's that's the whole point really uh if you want to do a custom backend you want your own server",
    "start": "2646640",
    "end": "2652720"
  },
  {
    "text": "you want your own encryption whatever it should be very easy to do with uh with this and you can't do that with iCloud",
    "start": "2652720",
    "end": "2660119"
  },
  {
    "text": "right it's just not that's another problem with iCloud you don't have that option so that was uh first",
    "start": "2660119",
    "end": "2668839"
  },
  {
    "text": "question could we switch off the very cold air",
    "start": "2668839",
    "end": "2673760"
  },
  {
    "text": "conditioning okay alternatives to C SQL light yeah",
    "start": "2674359",
    "end": "2681240"
  },
  {
    "text": "well of course yeah I've got a C data app so I wanted to write I wanted something for C data and I think there's",
    "start": "2681240",
    "end": "2687440"
  },
  {
    "text": "there is an advantage to using uh core data and that is even if you don't like everything about C data you think it's a",
    "start": "2687440",
    "end": "2693680"
  },
  {
    "text": "bit slow or whatever there's an advantage to all to people working on",
    "start": "2693680",
    "end": "2698920"
  },
  {
    "text": "the same thing right I can write a syncing framework for core data and you can use the syncing framework for C data",
    "start": "2698920",
    "end": "2705520"
  },
  {
    "text": "whereas for other Solutions if you're going to make your own stuff your own uh model layer on on SQL for example which",
    "start": "2705520",
    "end": "2712640"
  },
  {
    "text": "a lot of people do I think Mak their own version of core data then you're going to have to write the syncing yourself as",
    "start": "2712640",
    "end": "2718280"
  },
  {
    "text": "well right so there's an advantage to being together on you know having a standard in this case on iOS I think",
    "start": "2718280",
    "end": "2724559"
  },
  {
    "text": "cordate is a good reasonable stand Apple solution um so yeah of course you could",
    "start": "2724559",
    "end": "2730640"
  },
  {
    "text": "take all the the things that I've put into this framework and and apply them to a syncing framework for SQL light and",
    "start": "2730640",
    "end": "2736359"
  },
  {
    "text": "there is actually there is actually one uh there is actually a SQL light um",
    "start": "2736359",
    "end": "2741720"
  },
  {
    "text": "a company that does SQL light syncing uh anyone know the the name no that I heard",
    "start": "2741720",
    "end": "2749400"
  },
  {
    "text": "about them a few months ago and that they look like they're good but they're they're one company right so you have to trust that that company um",
    "start": "2749400",
    "end": "2757319"
  },
  {
    "text": "but yeah so the same the same techniques that I used are basically General database techniques and you could apply",
    "start": "2757319",
    "end": "2763079"
  },
  {
    "text": "the same things to a SQL light syncing framework if you wanted to do",
    "start": "2763079",
    "end": "2768680"
  },
  {
    "text": "that um what algorithms and data structures",
    "start": "2768680",
    "end": "2774079"
  },
  {
    "text": "are you using for syncing I use core data internally that that's because I know it and I figure",
    "start": "2774079",
    "end": "2781599"
  },
  {
    "text": "people that come to it will also know it right if people that want to look into the code probably no core data because they're",
    "start": "2781599",
    "end": "2787800"
  },
  {
    "text": "using core data right so internally I use core data um in terms of algorithms",
    "start": "2787800",
    "end": "2794240"
  },
  {
    "text": "I mentioned that briefly uh the main problem with the algorithms is just figuring out this problem of um",
    "start": "2794240",
    "end": "2801800"
  },
  {
    "text": "causality right things that happen concurrently uh you know what's first",
    "start": "2801800",
    "end": "2807640"
  },
  {
    "text": "when two things happen almost the same time you can take a time stamp do you trust the time stamp so I don't I don't",
    "start": "2807640",
    "end": "2813240"
  },
  {
    "text": "trust the time stamp that's the answer to that I use a vector clock to ensure that things on every device happen in",
    "start": "2813240",
    "end": "2818920"
  },
  {
    "text": "exactly the same order right that's important and I don't trust time stamps",
    "start": "2818920",
    "end": "2824040"
  },
  {
    "text": "the time stamps are used for sorting certain things but they they're not",
    "start": "2824040",
    "end": "2829160"
  },
  {
    "text": "um they're not the main sorting mechanism I use a different system for that which is taken from distributed",
    "start": "2829160",
    "end": "2836040"
  },
  {
    "text": "Systems computer science so it's called a vector clock basically but yeah it's",
    "start": "2836040",
    "end": "2841760"
  },
  {
    "text": "it's quite an interesting area of uh computer science that I've never heard of be honest but yeah figuring out",
    "start": "2841760",
    "end": "2847079"
  },
  {
    "text": "what's what came first is is is a tricky thing to do",
    "start": "2847079",
    "end": "2854400"
  },
  {
    "text": "um how does your how does your library handle changes made offline perfectly fine there's no sery here right it's",
    "start": "2855160",
    "end": "2861520"
  },
  {
    "text": "it's just it will save changes locally and then it will try to contact your",
    "start": "2861520",
    "end": "2867079"
  },
  {
    "text": "Cloud syncing service and if your Cloud syncing service is not contactable it'll just have an error and next time it'll",
    "start": "2867079",
    "end": "2873800"
  },
  {
    "text": "try again right so just case basically case locally the the changes and then",
    "start": "2873800",
    "end": "2879000"
  },
  {
    "text": "when it does get a connection it will load them up so yeah there's no problem with offline that's that's",
    "start": "2879000",
    "end": "2885960"
  },
  {
    "text": "uh that's it very important of course",
    "start": "2885960",
    "end": "2891000"
  },
  {
    "text": "right um one more I think is there how how does your library handle changes",
    "start": "2891960",
    "end": "2897319"
  },
  {
    "text": "made of same question exactly the same as a minute ago yeah so yeah that's that's it yeah",
    "start": "2897319",
    "end": "2904960"
  },
  {
    "text": "so any more question questions I always have questions um",
    "start": "2904960",
    "end": "2910520"
  },
  {
    "text": "cocoa pods yeah yeah I thought you I thought I might get that question after this this",
    "start": "2910520",
    "end": "2915760"
  },
  {
    "text": "morning's talk yeah no I'm going to definitely add that it just this is so",
    "start": "2915760",
    "end": "2920800"
  },
  {
    "text": "fresh it's uh it's on G then that's about it if you want to go through it",
    "start": "2920800",
    "end": "2926720"
  },
  {
    "text": "with me it's a we can do that yeah it shouldn't be too I assume it's not that difficult right you just write a speck",
    "start": "2926720",
    "end": "2932760"
  },
  {
    "text": "or something and yeah yeah I've used coca pods a bit as as a user but I've never actually made a a pod so and for",
    "start": "2932760",
    "end": "2940680"
  },
  {
    "text": "the encryption part we've got the next talk right yeah ex someone should be busy on the file system stuff right now",
    "start": "2940680",
    "end": "2947559"
  },
  {
    "text": "yeah we've got time for our last question I",
    "start": "2947559",
    "end": "2951920"
  },
  {
    "text": "think all we could end this here so remember to vote and uh thank you all",
    "start": "2952640",
    "end": "2958319"
  },
  {
    "text": "thank you very much",
    "start": "2958319",
    "end": "2962079"
  },
  {
    "text": "congratulations",
    "start": "2964520",
    "end": "2967520"
  }
]