[
  {
    "start": "0",
    "end": "105000"
  },
  {
    "text": "[Music]",
    "start": "2540",
    "end": "11619"
  },
  {
    "text": "[Applause] afternoon uh so yeah my name is Mark Howard thank you Leslie uh I am a",
    "start": "14790",
    "end": "21039"
  },
  {
    "text": "long-term committer on the Lucine project so I've been involved for about over 10 15 years however long it's been",
    "start": "21039",
    "end": "26840"
  },
  {
    "text": "going uh and joined lastic about a year and a half ago and I I work primarily on the aggregations framework and to use",
    "start": "26840",
    "end": "34840"
  },
  {
    "text": "that horrible expression I like to eat our own dog food so I like to use elastic search on real data and try and",
    "start": "34840",
    "end": "40760"
  },
  {
    "text": "solve some real problems uh so the subject of the talk today is to really just run through some example data sets",
    "start": "40760",
    "end": "45840"
  },
  {
    "text": "that I've played with over the years um and give you some indication of what sort of challenges they throw up and",
    "start": "45840",
    "end": "51239"
  },
  {
    "text": "what sort of things we've done to resolve them uh I've call it data wrestling technique because I don't really feel too much like a data",
    "start": "51239",
    "end": "56920"
  },
  {
    "text": "scientist there's too much sweating and swearing and grunting involved for it to be called a science so I think of it",
    "start": "56920",
    "end": "63079"
  },
  {
    "text": "more like wrestling data so let's um let's skip through some examples of how we've used this but before we get into",
    "start": "63079",
    "end": "69520"
  },
  {
    "text": "this what I wanted to do is just kind of rewind a little bit and just replay some history how many people here are familiar with elastic search use elastic",
    "start": "69520",
    "end": "76000"
  },
  {
    "text": "search so healthy number of people so I I I'll skip quickly through this but um",
    "start": "76000",
    "end": "82720"
  },
  {
    "text": "search has evolved over the years you know we used to know it as an interface like this you don't actually have to read the words here you can probably",
    "start": "82720",
    "end": "88520"
  },
  {
    "text": "recognize it you type in 2.5 keywords into a search box you hit enter and then you get 10 Blue Links that's kind of the",
    "start": "88520",
    "end": "94880"
  },
  {
    "text": "user experience um but what we had to do behind the scenes was all sorts of engineering to figure out how to do this",
    "start": "94880",
    "end": "100520"
  },
  {
    "text": "searching something as big as the internet for as many users as there are on the internet um so there's some",
    "start": "100520",
    "end": "106840"
  },
  {
    "start": "105000",
    "end": "177000"
  },
  {
    "text": "engineering challenges in the back but we're all about giving you the best what we consider to be the best uh links uh",
    "start": "106840",
    "end": "113960"
  },
  {
    "text": "first and then you page through them and it gets a bit boring so uh websites again you don't",
    "start": "113960",
    "end": "119680"
  },
  {
    "text": "have to read the text on on this slide here uh websites like Amazon introduce these kinds of interfaces where we would",
    "start": "119680",
    "end": "125719"
  },
  {
    "text": "still have the search box up there in the top left somewhere uh and we'd still get our 10 Blue Links but we had this",
    "start": "125719",
    "end": "132080"
  },
  {
    "text": "thing called faceting so we would actually summarize the million or so results that you would have to page through to to see ordinarily would",
    "start": "132080",
    "end": "139160"
  },
  {
    "text": "summarize them here on the left hand side and say well here's how many hotels have Wi-Fi here's how many hotels are in",
    "start": "139160",
    "end": "144920"
  },
  {
    "text": "this particular region here's how many fourstar hotels here's how many in a particular price range",
    "start": "144920",
    "end": "150480"
  },
  {
    "text": "so predominantly we would be seeing sort of structured data here on the left hand side um summarizing the millions of hits",
    "start": "150480",
    "end": "157480"
  },
  {
    "text": "that we had in the search engine and also giving you the ability to drill down and say I'm only interested in",
    "start": "157480",
    "end": "162680"
  },
  {
    "text": "fourstar hotels in this price range and everything else so people are very familiar with",
    "start": "162680",
    "end": "168319"
  },
  {
    "text": "this facets uh got us a long way um but then we introduced the idea of aggregations and multi-dimensional",
    "start": "168319",
    "end": "174560"
  },
  {
    "text": "summaries of our data so again uh the analytics interface of",
    "start": "174560",
    "end": "180000"
  },
  {
    "start": "177000",
    "end": "267000"
  },
  {
    "text": "today is sort of multi-dimensional in nature each of these visualizations can represent more than one",
    "start": "180000",
    "end": "185720"
  },
  {
    "text": "dimension um and we got the full drill down capabilities and in some respects",
    "start": "185720",
    "end": "191080"
  },
  {
    "text": "the search box disappeared we weren't necessarily interested in 10 Blue Links anymore we were just interested in saying all this",
    "start": "191080",
    "end": "198200"
  },
  {
    "text": "data in my business summarize it all tell me what's going on in my business so a lot of",
    "start": "198200",
    "end": "203959"
  },
  {
    "text": "people come to us for this experience not necessarily get me the 10 Blue Links",
    "start": "203959",
    "end": "209000"
  },
  {
    "text": "um but summarizing what's going on in my business because we got so fast at summarizing the sort of Amazon type",
    "start": "209000",
    "end": "215120"
  },
  {
    "text": "experience taking you know millions of hits and putting them into different buckets of fourstar five-star hotels",
    "start": "215120",
    "end": "220680"
  },
  {
    "text": "price brackets Geographic brackets we got very good at summarizing data very quickly so that's what people come to us",
    "start": "220680",
    "end": "226640"
  },
  {
    "text": "for now a lot of the users um actually don't bother with the search so much and just actually want to summarize",
    "start": "226640",
    "end": "232439"
  },
  {
    "text": "everything that's going on in their data but they still search when they click on these different sections of the visualization they're still narrowing",
    "start": "232439",
    "end": "238439"
  },
  {
    "text": "down and drilling down into to the data so we still have elements of that in there so to summarize these uh if if you",
    "start": "238439",
    "end": "245040"
  },
  {
    "text": "go to the elastic search home page certainly used to have on as a banner on the heading real time search and",
    "start": "245040",
    "end": "250879"
  },
  {
    "text": "analytics so what we mean by that is we're optimized for real time we do the uh give me the 10 Blue Links help me",
    "start": "250879",
    "end": "257280"
  },
  {
    "text": "find the best documents and we use all these strategies here some of these dating back to the 60s you know fuzzy",
    "start": "257280",
    "end": "262520"
  },
  {
    "text": "matching TF IDF relevance ranking a lot of people thought about that for a long time um all of that stuff goes into uh",
    "start": "262520",
    "end": "269800"
  },
  {
    "start": "267000",
    "end": "375000"
  },
  {
    "text": "ranking and helping you find the best documents and we've got all the tools in the Box to help you with that plus we've",
    "start": "269800",
    "end": "275720"
  },
  {
    "text": "also got the tools to help you summarize all of the data that you get back from these searches or indeed if you just want to look at all of the data we can",
    "start": "275720",
    "end": "282520"
  },
  {
    "text": "do the analytics to say what are these documents collectively tell me about my business you know is it on the up is it on the down you know we can summarize a",
    "start": "282520",
    "end": "289160"
  },
  {
    "text": "lot of data very quickly there's a little bit of a problem uh potentially with the meeting",
    "start": "289160",
    "end": "295160"
  },
  {
    "text": "of these two technologies um it's just a cautionary note for you if you're per in",
    "start": "295160",
    "end": "300320"
  },
  {
    "text": "analytics on the results of searches bear in mind we're not talking about",
    "start": "300320",
    "end": "305440"
  },
  {
    "text": "sets of data in the normal sense our fuzzy stuff over here is",
    "start": "305440",
    "end": "311280"
  },
  {
    "text": "capable of producing what I would think of as being a fuzzy set things belong to it to an extent so the first slide I put",
    "start": "311280",
    "end": "317800"
  },
  {
    "text": "up I think was somebody searching for organic meat that's organic or the word",
    "start": "317800",
    "end": "323759"
  },
  {
    "text": "meat preferably both so there's going to be a whole bunch of documents that contain both those words and there's",
    "start": "323759",
    "end": "328800"
  },
  {
    "text": "going to be documents that contain just one of those words ranked somewhere below so we're actually summarizing potentially in our analytics things that",
    "start": "328800",
    "end": "335319"
  },
  {
    "text": "aren't exactly what we were looking for especially if you throw things like stemming into the mix as well so might have lopped the ick off the end of",
    "start": "335319",
    "end": "341479"
  },
  {
    "text": "organic and end up with organs that's clearly not something that somebody who was looking for organic meat might",
    "start": "341479",
    "end": "346759"
  },
  {
    "text": "necessarily be looking for so there's a cautionary note here when you fuse these two capabilities",
    "start": "346759",
    "end": "352680"
  },
  {
    "text": "together make sure your end users are actually looking at the pie charts and the bar charts with full awareness of",
    "start": "352680",
    "end": "359039"
  },
  {
    "text": "what it is that when went into that set of documents they're looking at um I've got some examples coming up later about",
    "start": "359039",
    "end": "365160"
  },
  {
    "text": "how we can do what I would call fuzzy analytics so we're doing analytics but on fuzzy sets of data so there's some",
    "start": "365160",
    "end": "371199"
  },
  {
    "text": "examples of that coming up so that's the background that's where we uh where we've come from where we've arrived and",
    "start": "371199",
    "end": "377400"
  },
  {
    "start": "375000",
    "end": "581000"
  },
  {
    "text": "now we're going to look at how we're going to use this on various different data sets so the first data set I have uh is",
    "start": "377400",
    "end": "383880"
  },
  {
    "text": "all of the UK housing data so in the UK we're quite lucky and that there's a lot of open data now you can get all this stuff freely",
    "start": "383880",
    "end": "390120"
  },
  {
    "text": "um if you're interested in the URLs you probably can't read that but I think the slides are going online you can get hold",
    "start": "390120",
    "end": "395199"
  },
  {
    "text": "of this data if you want to uh the one thing I had to do to help tidy up this data was I had to take the post codes",
    "start": "395199",
    "end": "401599"
  },
  {
    "text": "here um and look look up uh the latitude and longitude of each of those postcodes",
    "start": "401599",
    "end": "407280"
  },
  {
    "text": "to understand where this house is so each house um looks like this it's got a",
    "start": "407280",
    "end": "412560"
  },
  {
    "text": "post code house type uh locality uh location County and uh price that's kind",
    "start": "412560",
    "end": "420639"
  },
  {
    "text": "of interesting so what I wanted to do was try and summarize the uh the housing market in the",
    "start": "420639",
    "end": "425759"
  },
  {
    "text": "UK I can do that with one query uh in elastic search using an aggregation here",
    "start": "425759",
    "end": "432240"
  },
  {
    "text": "so uh there's a sort of structured nature to uh aggregations and it uses",
    "start": "432240",
    "end": "437720"
  },
  {
    "text": "nesting in inside of the Json and in some respects some people say this stuff looks complex compared to say SQL but I",
    "start": "437720",
    "end": "444759"
  },
  {
    "text": "actually quite like the nested nature of uh the way aggregations are represented because it reflects the nested nature of",
    "start": "444759",
    "end": "451360"
  },
  {
    "text": "the structures that we're we're producing so the top level you know we're breaking all of these house uh",
    "start": "451360",
    "end": "457479"
  },
  {
    "text": "notice there's no query here by the way it's not search it's just pure analytics we're just saying take all of the housing market summarize it so we don't",
    "start": "457479",
    "end": "464479"
  },
  {
    "text": "have a search here although we could have if we wanted to and we're saying summarize uh by location and then within",
    "start": "464479",
    "end": "470400"
  },
  {
    "text": "that within each and every location uh summarize prices and various other different things so let's let's have a",
    "start": "470400",
    "end": "475759"
  },
  {
    "text": "look at what that produces um so this is a visualization",
    "start": "475759",
    "end": "480960"
  },
  {
    "text": "which is drawn entirely from the data that's produced by this query um so this is using Google Earth um and actually",
    "start": "480960",
    "end": "489159"
  },
  {
    "text": "when you sort of tilt the Earth and then spin it around and look at it you can clearly see a divide between North and",
    "start": "489159",
    "end": "494400"
  },
  {
    "text": "South in the in the UK here so we call it the UK north south divide cunningly",
    "start": "494400",
    "end": "500360"
  },
  {
    "text": "um and what I've what I've chosen to do here in the top level aggregation uh",
    "start": "500360",
    "end": "505639"
  },
  {
    "text": "we're using a geohash with a Precision of five to give us these little town here how many people are familiar with",
    "start": "505639",
    "end": "512680"
  },
  {
    "text": "geohashes two three okay so where I'm stood right now is probably described",
    "start": "512680",
    "end": "518200"
  },
  {
    "text": "using a geohash which is G cp73 qtl something and if I used 12 digits um it",
    "start": "518200",
    "end": "524959"
  },
  {
    "text": "would actually fit inside the glass this glass of water here so the technique is you um take the globe divide it up into",
    "start": "524959",
    "end": "531160"
  },
  {
    "text": "32 cells and I'm currently sat in cell G here in Amsterdam and then within that",
    "start": "531160",
    "end": "537080"
  },
  {
    "text": "cell we then further break it down by another thir 32 so we get GB and then so on and you keep going",
    "start": "537080",
    "end": "543120"
  },
  {
    "text": "down and down and down and by the time you've done 12 of these things you're into a little glass of water so it's quite a good way of uh breaking",
    "start": "543120",
    "end": "550000"
  },
  {
    "text": "geography down into different um cells so I'm using a Precision of five um I",
    "start": "550000",
    "end": "555600"
  },
  {
    "text": "could also use a a description which is based on Miles I could say you know this many miles square or whatever and it",
    "start": "555600",
    "end": "560959"
  },
  {
    "text": "will find the nearest geohash that fits that so that gives us all of these various different Towers here um and",
    "start": "560959",
    "end": "567560"
  },
  {
    "text": "that's our top level aggregation and then with in that um we've got another couple of attributes here this is the",
    "start": "567560",
    "end": "572680"
  },
  {
    "text": "multi-dimensional nature of the aggregation we've got um the goo and",
    "start": "572680",
    "end": "578000"
  },
  {
    "text": "then within that we've got color and height so let's look at what goes into that so the height of the tower is the",
    "start": "578000",
    "end": "585399"
  },
  {
    "start": "581000",
    "end": "651000"
  },
  {
    "text": "median house price uh for that uh particular location so the median house",
    "start": "585399",
    "end": "591120"
  },
  {
    "text": "price we can click on each Tower and we get the number of what's the median house price",
    "start": "591120",
    "end": "596560"
  },
  {
    "text": "um this use of the median and and percentiles um we've got a whole blog on",
    "start": "596560",
    "end": "601920"
  },
  {
    "text": "that averages can be dangerous so if the gentleman walking into the room now was Bill Gates then all of a sudden as an",
    "start": "601920",
    "end": "608720"
  },
  {
    "text": "average we would all be millionaires that wouldn't have been the case beforehand but that's that's the nature of averages and how they can skew",
    "start": "608720",
    "end": "614959"
  },
  {
    "text": "things so percentiles are great for for actually doing these kinds of summaries take the median uh if you're doing",
    "start": "614959",
    "end": "620920"
  },
  {
    "text": "logging analytics and things like that people are often interested in the 99th percentile you know what's the worst end",
    "start": "620920",
    "end": "626160"
  },
  {
    "text": "sort of experience that people are having in terms of response times on my website so that's a cracking uh uh aggregation",
    "start": "626160",
    "end": "632760"
  },
  {
    "text": "there uh percentiles to help you summarize the data um if you're interested in the mechanics of that then",
    "start": "632760",
    "end": "638760"
  },
  {
    "text": "go have a look at um there a talk by Ted Dunning at Berlin buzzwords called T Gest and it tells you how we're terribly",
    "start": "638760",
    "end": "644800"
  },
  {
    "text": "clever about being efficient and and and uh Computing this stuff at scale um next thing we've got going on",
    "start": "644800",
    "end": "653680"
  },
  {
    "start": "651000",
    "end": "836000"
  },
  {
    "text": "uh is the color of These Bars you've noted I'm using the terms aggregation here to summar within this cell what is",
    "start": "653680",
    "end": "662000"
  },
  {
    "text": "the most popular size one meaning I only want one result back what is the most",
    "start": "662000",
    "end": "667040"
  },
  {
    "text": "popular County name that is used to describe houses that are being sold there um and that actually gives us that",
    "start": "667040",
    "end": "674160"
  },
  {
    "text": "draws for us if you like the shape of the counties in the UK because we're taking the most popular one in every location and the net result of that is",
    "start": "674160",
    "end": "681079"
  },
  {
    "text": "you can actually get a map and see where uh the boundaries of all the counties are um another interesting blog post",
    "start": "681079",
    "end": "687680"
  },
  {
    "text": "here which is kind of relevant and related it's not a elastic search one but it's a different one um it's about",
    "start": "687680",
    "end": "694680"
  },
  {
    "text": "crowd sourcing boundaries of areas there's you know there's a county in the UK called middle sex which seems to keep",
    "start": "694680",
    "end": "700560"
  },
  {
    "text": "changing its boundaries some people think they live in it and some people don't so it's a bit nebulous um now if",
    "start": "700560",
    "end": "706240"
  },
  {
    "text": "you crowdsource data and you take enough data in then you using an aggregation like this you could begin to figure out",
    "start": "706240",
    "end": "713560"
  },
  {
    "text": "what the crowds tend to think of as being you know the lay of the land um so there's an interesting application here",
    "start": "713560",
    "end": "719240"
  },
  {
    "text": "I think flicker did this some time ago with the tags that were put on images they would actually create shape files",
    "start": "719240",
    "end": "725800"
  },
  {
    "text": "for those of you who are in the gis World they would reverse engineer shape files based on the tags that people were",
    "start": "725800",
    "end": "731920"
  },
  {
    "text": "attaching to photographs so crowd sourcing uh locations so they would figure out what the boundaries of",
    "start": "731920",
    "end": "737160"
  },
  {
    "text": "Chinatown were in a location based on you know the tagging information that's in the data so that's another nice little um",
    "start": "737160",
    "end": "745160"
  },
  {
    "text": "use of uh aggregations on large data sets as you can find the most popular thing",
    "start": "745160",
    "end": "751000"
  },
  {
    "text": "um so again uh I picked the most popular Town that's just useful for you know when you click on a particular bar the",
    "start": "751000",
    "end": "756560"
  },
  {
    "text": "counties are quite large so when you click on a particular area because it looks to have a very high Spike you can say ah Isa yeah that's I know that place",
    "start": "756560",
    "end": "763760"
  },
  {
    "text": "that's the place with the race course where it's really exp insanely expensive to live um this terms aggregation again the",
    "start": "763760",
    "end": "772440"
  },
  {
    "text": "terms aggregation we're using here size 10 uh so we get a nice little table in",
    "start": "772440",
    "end": "777560"
  },
  {
    "text": "here which is a breakdown of uh how what sort of houses are in this location are they terrorist houses are they detached are they semi- detached so you can get",
    "start": "777560",
    "end": "784519"
  },
  {
    "text": "all of this in one query and it all run subsecond and then you can spend the next you know two hours wandering around",
    "start": "784519",
    "end": "790959"
  },
  {
    "text": "in Google Earth you know finding the cheapest most expensive place to live so highly M multi-dimensional data",
    "start": "790959",
    "end": "797399"
  },
  {
    "text": "summarized really really quickly other interesting thing about",
    "start": "797399",
    "end": "804000"
  },
  {
    "text": "Geo um is it can be something that you can use to join data sets together so",
    "start": "804000",
    "end": "809639"
  },
  {
    "text": "you know ordinary ordinarily when you're trying to join data sets you're looking for some key you know a foreign key or a primary key or something like that well",
    "start": "809639",
    "end": "815600"
  },
  {
    "text": "Geo is some kind of universal thing that we're all constrained by you know like space and time you know we we have to",
    "start": "815600",
    "end": "821600"
  },
  {
    "text": "exist in these Dimensions you know so we've collectively decided that and uh",
    "start": "821600",
    "end": "828240"
  },
  {
    "text": "as an industry you we're going to represent go in certain ways and we know how to translate it from lat long into",
    "start": "828240",
    "end": "833399"
  },
  {
    "text": "you know other coordinate systems and so on so it's possible to take data from one data set like this one which is",
    "start": "833399",
    "end": "839320"
  },
  {
    "start": "836000",
    "end": "913000"
  },
  {
    "text": "house sales and say okay uh let me take all of the uh Towers here that went",
    "start": "839320",
    "end": "848040"
  },
  {
    "text": "above let's say 500k is the median house price so that what does that give",
    "start": "848040",
    "end": "855639"
  },
  {
    "text": "me that gives me an indication of which are the affluent areas in in the UK so",
    "start": "856120",
    "end": "862040"
  },
  {
    "text": "now I can take the results of that query and I can use it as a filter on a",
    "start": "862040",
    "end": "867800"
  },
  {
    "text": "different data set so here these are all the geohashes that represent the affluent areas and I'm going to hit the",
    "start": "867800",
    "end": "874079"
  },
  {
    "text": "crime data set now UK crime I've got all of the UK crime uh Records on my on my",
    "start": "874079",
    "end": "879560"
  },
  {
    "text": "laptop here and say what's different about the crimes that go on in the affluent areas because I'm using this",
    "start": "879560",
    "end": "886600"
  },
  {
    "text": "filter here which is affluent areas only um and what that tells me there's a",
    "start": "886600",
    "end": "892120"
  },
  {
    "text": "line here of the anormal expectation we'll get into this in a minute but that tells me that um in the affluent areas",
    "start": "892120",
    "end": "899079"
  },
  {
    "text": "theft is up uh because they're nicer houses to Rob they got more stuff in them so people will steal from them and",
    "start": "899079",
    "end": "905519"
  },
  {
    "text": "antisocial behavior is down because they're terribly nice in these sort of locations so they don't tend to be",
    "start": "905519",
    "end": "912480"
  },
  {
    "start": "913000",
    "end": "1354000"
  },
  {
    "text": "antisocial okay a different data set um lots and",
    "start": "913000",
    "end": "920120"
  },
  {
    "text": "lots of data sets have connections in them connected things banking transactions emails phone calls you name",
    "start": "920120",
    "end": "925759"
  },
  {
    "text": "even documents like Wikipedia articles have connections other Wikipedia articles it's interesting uh sometimes",
    "start": "925759",
    "end": "932800"
  },
  {
    "text": "to have a look at these from a graph perspective and I don't mean graph in the sense of a bar chart I mean graph in",
    "start": "932800",
    "end": "937959"
  },
  {
    "text": "the sense of nodes and edges it's actually a whole area of computer science um it turns out we can actually",
    "start": "937959",
    "end": "944120"
  },
  {
    "text": "get this sort of data this shape data out of elastic search and here's how you would do that um you end up querying the",
    "start": "944120",
    "end": "952279"
  },
  {
    "text": "Enron emails U again notice I'm not using any query here but crucially I could be I",
    "start": "952279",
    "end": "957519"
  },
  {
    "text": "could have sent uh an email that said only find me the emails that are talking about the dodgy company called Raptor",
    "start": "957519",
    "end": "965240"
  },
  {
    "text": "the Enron set up who was talking about Raptor because that's a dodgy vehicle I want to know who set it up when and who",
    "start": "965240",
    "end": "971920"
  },
  {
    "text": "were they talking to so that might be the query that goes above this but what we're saying is summarize for me the top",
    "start": "971920",
    "end": "979279"
  },
  {
    "text": "50 senders of emails about Raptor so that would give me uh these nodes in",
    "start": "979279",
    "end": "986279"
  },
  {
    "text": "this diagram here potentially these are the people who are most frequently uh talking about project",
    "start": "986279",
    "end": "992759"
  },
  {
    "text": "Raptor and the second half of this query is nested an aggregation and who were",
    "start": "992759",
    "end": "998920"
  },
  {
    "text": "they talking to so that completes the other half of the uh the transaction who's sending the email and we're going",
    "start": "998920",
    "end": "1006160"
  },
  {
    "text": "to summarize the recipients field here too and we want their 50 most common",
    "start": "1006160",
    "end": "1011880"
  },
  {
    "text": "correspondents from the results of this query you can get these graph structures",
    "start": "1011880",
    "end": "1017480"
  },
  {
    "text": "here and that will give you an indication of the different clicks and hubs in in a in a in a business that are",
    "start": "1017480",
    "end": "1024520"
  },
  {
    "text": "talking about these various different things um we can choose uh in this diagram here for example to draw line",
    "start": "1024520",
    "end": "1031678"
  },
  {
    "text": "thickness as the volume of emails that were exchanged we get a document count so we can use that to draw the thickness",
    "start": "1031679",
    "end": "1037438"
  },
  {
    "text": "of the line uh equally we could have used the number of uh documents to size",
    "start": "1037439",
    "end": "1042720"
  },
  {
    "text": "the circles in this diagram to say well how many emails were they sending bu you very you know prolific this guy",
    "start": "1042720",
    "end": "1049080"
  },
  {
    "text": "but we can do more than just summarize the lines that connect things if we put another Sub agregation in here if this",
    "start": "1049080",
    "end": "1055080"
  },
  {
    "text": "was banking data for example I could be summarizing the financial value of the money that was being transferred between",
    "start": "1055080",
    "end": "1061039"
  },
  {
    "text": "each pair so every line in this diagram could have Rich amounts of data in it",
    "start": "1061039",
    "end": "1067200"
  },
  {
    "text": "summarizing Financial volumes maybe summarizing temporal data you know month",
    "start": "1067200",
    "end": "1072360"
  },
  {
    "text": "by month how many emails were being sent between these two people about this subject um as's a commercial P of",
    "start": "1072360",
    "end": "1079039"
  },
  {
    "text": "software called key lines which is quite Adept at doing these kinds of visualizations and it includes uh",
    "start": "1079039",
    "end": "1084640"
  },
  {
    "text": "timelines across the bottom so it's a sort of thing where you can scrub the timeline and as you're moving across the",
    "start": "1084640",
    "end": "1090480"
  },
  {
    "text": "timeline it'll animate bits of the network to show you well some people started out back in 2000 over here and",
    "start": "1090480",
    "end": "1098000"
  },
  {
    "text": "then by 2001 you know the torque of raptor had spread across the business into these other areas so you can replay",
    "start": "1098000",
    "end": "1104919"
  },
  {
    "text": "all this information and again it all comes out of one query to elastic search so it's another way of having",
    "start": "1104919",
    "end": "1110960"
  },
  {
    "text": "multi-dimensional data come out of elastic search in one query and summarizing millions if not billions of",
    "start": "1110960",
    "end": "1119200"
  },
  {
    "text": "Records top tip uh this was something that I put in uh to elastic search as a",
    "start": "1120080",
    "end": "1125120"
  },
  {
    "text": "result of trying to do this type of analytics which is we ordinarily we just",
    "start": "1125120",
    "end": "1130360"
  },
  {
    "text": "take every single document that matches our queries we throw them through the aggregation tree as I like we like to",
    "start": "1130360",
    "end": "1136280"
  },
  {
    "text": "think of it and it expands the whole tree and then prunes it to just those things that you wanted the top 50 the top 10 or",
    "start": "1136280",
    "end": "1143320"
  },
  {
    "text": "so on this is one case where we want to collect the the data in a way that",
    "start": "1143320",
    "end": "1149600"
  },
  {
    "text": "differs from the default the default is this depth first approach we take every single document we expand it out into a",
    "start": "1149600",
    "end": "1155280"
  },
  {
    "text": "bucket and then we expand it out into the sub buckets and then the sub buckets beyond that this approach what we don't want to",
    "start": "1155280",
    "end": "1162320"
  },
  {
    "text": "do is inflate a picture of the whole of Enron what we want to do is first",
    "start": "1162320",
    "end": "1169280"
  },
  {
    "text": "pick the top 50 senders not all people in in the Enron",
    "start": "1169280",
    "end": "1174799"
  },
  {
    "text": "Network and then having established who are the most prolific senders only then push the documents out to find out who",
    "start": "1174799",
    "end": "1181520"
  },
  {
    "text": "their recipients are so it's a different way of collecting data internally the results the end results are exactly the",
    "start": "1181520",
    "end": "1187400"
  },
  {
    "text": "same but the interim working state that we need to produce the final figure is",
    "start": "1187400",
    "end": "1193559"
  },
  {
    "text": "different so you can read up about that um we we have separate blogs um that talk about collect mod and breadth first",
    "start": "1193559",
    "end": "1200159"
  },
  {
    "text": "versus depth first most of the time you don't have to worry about it and depth first works fine this is one scenario",
    "start": "1200159",
    "end": "1206000"
  },
  {
    "text": "where bre first is actually tip that you want to turn on",
    "start": "1206000",
    "end": "1210440"
  },
  {
    "text": "yes Neo forj will chase down Neo forj are very fast they're great what they do",
    "start": "1214120",
    "end": "1219280"
  },
  {
    "text": "is um the trick that graph databases do which is index less traversal so if you",
    "start": "1219280",
    "end": "1224799"
  },
  {
    "text": "want to follow a connection it's uh you don't have to look up in a b Tre index or anything",
    "start": "1224799",
    "end": "1229960"
  },
  {
    "text": "it's like I've got a pointer boom I'm there right so but what they don't do is",
    "start": "1229960",
    "end": "1235039"
  },
  {
    "text": "have aggregations so if you and I have exchanged you know a billion Financial transactions each one of those is an",
    "start": "1235039",
    "end": "1240720"
  },
  {
    "text": "edge or a document and it's going to go scaring off doing it's still going to do a dis seek or if you're lucky enough",
    "start": "1240720",
    "end": "1247000"
  },
  {
    "text": "you've got it all in Ram but that's the thing you can't Shard it you can't Shard the",
    "start": "1247000",
    "end": "1252400"
  },
  {
    "text": "graph um if you go and read the Neo CTO blog about how to Shard elastic",
    "start": "1252400",
    "end": "1259360"
  },
  {
    "text": "uh NE F or how to scale it he actually quotes me on there um talking about how",
    "start": "1259360",
    "end": "1265559"
  },
  {
    "text": "to how to how to scale Neo J and the short answer is it doesn't really",
    "start": "1265559",
    "end": "1272120"
  },
  {
    "text": "scale yeah and they talk about a thing called cash sharding but that's really putting all of the data on every single",
    "start": "1274279",
    "end": "1280159"
  },
  {
    "text": "machine and then just rooting queries to a machine in the hope that it will be warm in terms of the cach so they",
    "start": "1280159",
    "end": "1286880"
  },
  {
    "text": "haven't really",
    "start": "1286880",
    "end": "1290159"
  },
  {
    "text": "yeah so I mean I would say there's two there's two differences I think potential or two potential differences with the way elastic search approaches",
    "start": "1298960",
    "end": "1305039"
  },
  {
    "text": "this and and the way near for JJs well three if you include sharding we do sharding U one is the the aggregation",
    "start": "1305039",
    "end": "1312760"
  },
  {
    "text": "the ability to summarize huge volumes of transactions as a single edge a rich Edge if you like a super Edge it's got",
    "start": "1312760",
    "end": "1318679"
  },
  {
    "text": "kind of like month by month you know volumes whatever that that that's one thing the other thing um that shows a",
    "start": "1318679",
    "end": "1325799"
  },
  {
    "text": "lot of Promise is is the fact that we know which connections are meaningful relevance ranking and everything else we know that we shouldn't actually be going",
    "start": "1325799",
    "end": "1331840"
  },
  {
    "text": "off down certain Avenues in the graph because they're just super connected and we know the frequencies of everything",
    "start": "1331840",
    "end": "1336919"
  },
  {
    "text": "like IP addresses whatever you put into elastic search we count it we know how many times it occurs and we can use that",
    "start": "1336919",
    "end": "1343440"
  },
  {
    "text": "to actually explore the meaningful Connections in graphs rather than just the Abundant ones",
    "start": "1343440",
    "end": "1350520"
  },
  {
    "text": "that's how we describe that but um another example data set movie lens",
    "start": "1350559",
    "end": "1356480"
  },
  {
    "start": "1354000",
    "end": "1385000"
  },
  {
    "text": "data um recommendations this this could apply to anything um that is people have bought X people who bought X also you",
    "start": "1356480",
    "end": "1362919"
  },
  {
    "text": "know tend to buy y you know it's that kind of deal so this is a user and we",
    "start": "1362919",
    "end": "1368000"
  },
  {
    "text": "got a bunch of product codes here uh which are just movie IDs so this is like a typical sort of thing you would find",
    "start": "1368000",
    "end": "1373440"
  },
  {
    "text": "in a in a product recommendation type scenario um you can download the data and you can play with it here here's the",
    "start": "1373440",
    "end": "1379440"
  },
  {
    "text": "URL um but each of the documents in our system are one of these a user and his preferences now just to explain how",
    "start": "1379440",
    "end": "1386159"
  },
  {
    "start": "1385000",
    "end": "1478000"
  },
  {
    "text": "elastic search um can be used to do recommendations um along the x-axis here",
    "start": "1386159",
    "end": "1392159"
  },
  {
    "text": "I've got the percentage of all users who like to move and a a selection of movies here drawn as dots on this line so let",
    "start": "1392159",
    "end": "1397840"
  },
  {
    "text": "me explain what's going on here 177% of all people like Forest Gump this is true of this data set and",
    "start": "1397840",
    "end": "1405320"
  },
  {
    "text": "probably true of you know people in general I think one movie just to the right of it so there's 23% or something",
    "start": "1405320",
    "end": "1412679"
  },
  {
    "text": "of people like sha Shank Redemption okay so these are just popular movies Star Wars is probably luring around here too",
    "start": "1412679",
    "end": "1418760"
  },
  {
    "text": "now if I take a completely random sample of people and I'm taking 10% of people",
    "start": "1418760",
    "end": "1424279"
  },
  {
    "text": "here as an example and I plot their tastes on this axis we shouldn't be surprised right 17% of my random sample",
    "start": "1424279",
    "end": "1432600"
  },
  {
    "text": "also like Forest Gump 23% of them will like Star Wars it would be unusual",
    "start": "1432600",
    "end": "1438960"
  },
  {
    "text": "if it was anything else right if you take a random sample of people why would their tastes differ from the mainstream",
    "start": "1438960",
    "end": "1446039"
  },
  {
    "text": "that that's not unusual that so these when I do these these queries you know plot a random sample against everybody",
    "start": "1446039",
    "end": "1453520"
  },
  {
    "text": "else I always see the dots line up on this line you know number of males number of females bom always on the line",
    "start": "1453520",
    "end": "1460360"
  },
  {
    "text": "movie choices whatever if you take a random sample they're the same as everybody else so that's",
    "start": "1460360",
    "end": "1465919"
  },
  {
    "text": "dull what's interesting is when you have a non random sample so what happens to these dots when I take a non-random",
    "start": "1465919",
    "end": "1473080"
  },
  {
    "text": "sample of people and that gets interesting here's a non-random sample of people I'm looking at all the people",
    "start": "1473080",
    "end": "1478240"
  },
  {
    "start": "1478000",
    "end": "1571000"
  },
  {
    "text": "who like the movie Talladega Knights I don't know if you know the movie Wolf forel movie uh and I'm using the uh my",
    "start": "1478240",
    "end": "1486320"
  },
  {
    "text": "favorite aggregation the significant terms aggregation which is the thing that looks for the things that have changed that are what we call uncommonly",
    "start": "1486320",
    "end": "1493200"
  },
  {
    "text": "common so it doesn't tell you hey people who've watched Talladega Nights they really like this movie called Star Wars",
    "start": "1493200",
    "end": "1499760"
  },
  {
    "text": "you know you should go watch it it's like we everybody's seen Star Wars we know about that one so we're looking for",
    "start": "1499760",
    "end": "1506039"
  },
  {
    "text": "things that are different from everybody else so the the set of dots that we have",
    "start": "1506039",
    "end": "1512720"
  },
  {
    "text": "here you can see are hugging the leftand axis here and they're moved away from",
    "start": "1512720",
    "end": "1518159"
  },
  {
    "text": "this fairly faint line here which is the line of normal expectation so less than",
    "start": "1518159",
    "end": "1525360"
  },
  {
    "text": "0.5% of all people like like the movie Anchor Man actually I find that stunning",
    "start": "1525360",
    "end": "1531600"
  },
  {
    "text": "but anyway um in the set of Talladega likers 20% of them like anchormen so",
    "start": "1531600",
    "end": "1537960"
  },
  {
    "text": "we've gone from you know 0.5% that's what we would expect if we took a random sample in our Talladega liers it's leapt",
    "start": "1537960",
    "end": "1546200"
  },
  {
    "text": "up here this red arrow shows the the extent of the leap it's gone up to 20% that's a huge increase in popularity",
    "start": "1546200",
    "end": "1553159"
  },
  {
    "text": "right that's the signal that we use to find uh common tastes",
    "start": "1553159",
    "end": "1560200"
  },
  {
    "text": "so you know somebody who clicks on Talladega kns you'll give them the recommendation at the bottom hey you ought to go look at Anchorman because",
    "start": "1560200",
    "end": "1566720"
  },
  {
    "text": "we've seen this big shift in popularity tip avoid analyzing poorly",
    "start": "1566720",
    "end": "1574480"
  },
  {
    "start": "1571000",
    "end": "1651000"
  },
  {
    "text": "focused sets so if I took all of my uh recent movie watches as a as a data set",
    "start": "1574480",
    "end": "1582360"
  },
  {
    "text": "there be some things in there which are kind of perhaps rare So Talladega kns Blades of Glory and then I might have",
    "start": "1582360",
    "end": "1587480"
  },
  {
    "text": "watched Star Wars for example now if I look at the set of people who have these",
    "start": "1587480",
    "end": "1593600"
  },
  {
    "text": "movies in common any one of these movies then I'm going to pretty much match everybody because I mean has",
    "start": "1593600",
    "end": "1599720"
  },
  {
    "text": "anybody here not seen Star Wars wow okay one two",
    "start": "1599720",
    "end": "1605120"
  },
  {
    "text": "three yeah my wife hasn't either and she's trying to make keep it that way you know she's like trying to avoid it",
    "start": "1605120",
    "end": "1610880"
  },
  {
    "text": "um we would match just about everybody using this query so it doesn't make any sense to do analytics on a big set let's",
    "start": "1610880",
    "end": "1618480"
  },
  {
    "text": "see what happens actually if we do analytics on a set of a query which includes Blades of Glory",
    "start": "1618480",
    "end": "1624320"
  },
  {
    "text": "Talladega Knights and Star Wars my nice little cluster of Dots here which are all these movies have moved",
    "start": "1624320",
    "end": "1630399"
  },
  {
    "text": "away from hugging this line here and they've started to bend towards the mainstream what we're doing here is",
    "start": "1630399",
    "end": "1636600"
  },
  {
    "text": "we're diluting the signal all those Star Wars Watchers will a lot of them kind of watch chickflix and other things that",
    "start": "1636600",
    "end": "1643159"
  },
  {
    "text": "perhaps I'm I'm not so interested in so we've started to dilute the signal that was in the original data so how do we",
    "start": "1643159",
    "end": "1650200"
  },
  {
    "text": "solve that how do we get a representative sample of users well let's go back to what I",
    "start": "1650200",
    "end": "1656559"
  },
  {
    "start": "1651000",
    "end": "1735000"
  },
  {
    "text": "started with we're the search guys we know how to do relevance ranking what is that that's information",
    "start": "1656559",
    "end": "1663760"
  },
  {
    "text": "Theory this is stuff that dates back to the 60s we use inverse document frequency scarcity what does that mean",
    "start": "1663760",
    "end": "1671279"
  },
  {
    "text": "people who share my rarer choices like Talladega are ranked more highly than people who share my mainstream tastes",
    "start": "1671279",
    "end": "1676760"
  },
  {
    "text": "like Star Wars another one term frequency people have watched on a movie Choice many times",
    "start": "1676760",
    "end": "1682799"
  },
  {
    "text": "repetition of something repetition of a signal there's a person who's watched Howa 27 times he's probably interested",
    "start": "1682799",
    "end": "1689080"
  },
  {
    "text": "in the same sort of movies length normalization people who've got encyclopedic lists of movies well of",
    "start": "1689080",
    "end": "1696640"
  },
  {
    "text": "course they're going to share some of my uh interests in common because they have so many so let's use length",
    "start": "1696640",
    "end": "1702320"
  },
  {
    "text": "normalization coordination Factor that's another ranking heris which is how many of the things did I ask for for did I",
    "start": "1702320",
    "end": "1708679"
  },
  {
    "text": "find in this in this person's set of movie choices these are all the heuristics that go into search relevance",
    "start": "1708679",
    "end": "1714559"
  },
  {
    "text": "ranking ordinarily we would use them on text what are we doing here we're using",
    "start": "1714559",
    "end": "1719600"
  },
  {
    "text": "them on numbers raw numbers but some numbers have meaning in the same way that Star Wars is about the",
    "start": "1719600",
    "end": "1726559"
  },
  {
    "text": "equivalent of the text word the it's so common it's actually not worth anything",
    "start": "1726559",
    "end": "1732559"
  },
  {
    "text": "in terms of ranking so uh let's put it all together",
    "start": "1732559",
    "end": "1738360"
  },
  {
    "start": "1735000",
    "end": "1957000"
  },
  {
    "text": "um in elastic search 2.0 uh we removed an old restriction",
    "start": "1738360",
    "end": "1744799"
  },
  {
    "text": "which is we would automatically assume if you were searching for numbers that relevance ranking had no place we",
    "start": "1744799",
    "end": "1751480"
  },
  {
    "text": "wouldn't Rank and score Things based on how rare they were how rare a number was because that people don't do that but",
    "start": "1751480",
    "end": "1757760"
  },
  {
    "text": "actually we've just found the need for that so we've turned it on uh so now by",
    "start": "1757760",
    "end": "1763120"
  },
  {
    "text": "default if you search for a a field and it happens to be a numeric field we're going to Rel rank on the scarcity of",
    "start": "1763120",
    "end": "1769399"
  },
  {
    "text": "that to support use cases like this one if you don't want relevance ranking on your numbers then you should do the",
    "start": "1769399",
    "end": "1775640"
  },
  {
    "text": "thing you always supposed to have done in the first place which is to use filters and not not queries so we're",
    "start": "1775640",
    "end": "1780919"
  },
  {
    "text": "kind of being consistent in the messaging now queries are for ranking filters are for you know yes no type",
    "start": "1780919",
    "end": "1787279"
  },
  {
    "text": "decisions um another change um I only want to find the people like me not all",
    "start": "1787279",
    "end": "1793240"
  },
  {
    "text": "the people who've seen any of my movies so we have a new aggregation called the sampler aggregation which is where you",
    "start": "1793240",
    "end": "1798919"
  },
  {
    "text": "get to pick the top n matches of you know from your query and subject that to",
    "start": "1798919",
    "end": "1804600"
  },
  {
    "text": "to analysis or analytics so we're going to use the significant terms function here on just",
    "start": "1804600",
    "end": "1810640"
  },
  {
    "text": "the top matching sample of content from this query um and finally uh in earlier",
    "start": "1810640",
    "end": "1817279"
  },
  {
    "text": "versions of uh elastic search excludes were written using regex's and they perform terribly",
    "start": "1817279",
    "end": "1823320"
  },
  {
    "text": "and it's been fixed we can now have arrays of very large numbers of things and it it's much more efficient in terms",
    "start": "1823320",
    "end": "1830120"
  },
  {
    "text": "of filtering these things out so what I'm doing here is I'm saying here's all my movie choices find people like me and",
    "start": "1830120",
    "end": "1836559"
  },
  {
    "text": "tell me what they like excluding the stuff that I told you about the movies I've already",
    "start": "1836559",
    "end": "1842960"
  },
  {
    "text": "seen question",
    "start": "1842960",
    "end": "1850200"
  },
  {
    "text": "yeah diversity yes thank you that uh you ask about can my sample be Diversified",
    "start": "1851000",
    "end": "1858039"
  },
  {
    "text": "you uh you teed that up perfectly sir I couldn't have paid you paid you money for a better better question um the",
    "start": "1858039",
    "end": "1865880"
  },
  {
    "text": "there there was a change that went into lose scene which allows you to diversify on a choice of field and for the benefit",
    "start": "1865880",
    "end": "1872399"
  },
  {
    "text": "of everybody when you take a sample it's important that it's a representative sample so people do this when they do",
    "start": "1872399",
    "end": "1878720"
  },
  {
    "text": "marketing exercises they don't want to sample from a particular ethnic group or gender they want diversity um in the",
    "start": "1878720",
    "end": "1885519"
  },
  {
    "text": "sample so there's an additional setting in the sampler where you can say diversify on field X that's got to be a",
    "start": "1885519",
    "end": "1893600"
  },
  {
    "text": "single value field by the way it can't be a multivalue field but you can say for example I don't want lots of",
    "start": "1893600",
    "end": "1900639"
  },
  {
    "text": "products from the same supplier I want a maximum of three products per supplier so you pick the",
    "start": "1900639",
    "end": "1908080"
  },
  {
    "text": "supplier field set the value three and that means we don't get a sample that includes any no more than three results",
    "start": "1908080",
    "end": "1913519"
  },
  {
    "text": "from each supplier so yeah divers diversification is an important part of sample",
    "start": "1913519",
    "end": "1919840"
  },
  {
    "text": "yeah no this is coming in 2.0 this is part of the sampler aggregation",
    "start": "1920039",
    "end": "1926840"
  },
  {
    "text": "yeah um so the end product is you get these things which hug the left left axis here faster more accurate more",
    "start": "1926840",
    "end": "1934480"
  },
  {
    "text": "relevant uh suggestions that was 30 milliseconds to do that particular query there it's rare that you actually make an optimization and that actually",
    "start": "1934480",
    "end": "1940519"
  },
  {
    "text": "improves the quality of something but this is one of those good cases there a nice trade-off uh if you look at less",
    "start": "1940519",
    "end": "1945679"
  },
  {
    "text": "people um it runs quicker and you actually get better results but there are limits to",
    "start": "1945679",
    "end": "1952159"
  },
  {
    "text": "aggregations um I've got a a separate talk on this um that goes into much more detail about this um but to tear up uh",
    "start": "1952159",
    "end": "1960039"
  },
  {
    "start": "1957000",
    "end": "2158000"
  },
  {
    "text": "an example data set that I had was the Amazon uh Marketplace um they have",
    "start": "1960039",
    "end": "1965080"
  },
  {
    "text": "reviews in the marketplace that look like this so we have a reviewer and he's reviewing a seller and he's saying um",
    "start": "1965080",
    "end": "1973080"
  },
  {
    "text": "fstar seller uh and the date and everything else is that fraudulent",
    "start": "1973080",
    "end": "1978360"
  },
  {
    "text": "well we don't know we don't we can't tell you got to look at that reviewer's behavior over time from a single data",
    "start": "1978360",
    "end": "1984320"
  },
  {
    "text": "point we can't kind of make any sensible business decisions so what do people normally do",
    "start": "1984320",
    "end": "1990760"
  },
  {
    "text": "they they take in streams and fire hoses of events and it all arrives out of",
    "start": "1990760",
    "end": "1996399"
  },
  {
    "text": "sequence because you know the red dots here represent one user's activity and the blue dots are a different users",
    "start": "1996399",
    "end": "2002760"
  },
  {
    "text": "activity and they're all jumbled up with each other because they're just arriving in Time series order when a person and",
    "start": "2002760",
    "end": "2007880"
  },
  {
    "text": "visits the website when he next visits the website somebody else might have come in in between he may wait wait 5",
    "start": "2007880",
    "end": "2013360"
  },
  {
    "text": "minutes before he comes back again so trying to do any kind of reasoning about um information here on log based data",
    "start": "2013360",
    "end": "2022159"
  },
  {
    "text": "when it talking about the behaviors of users is very difficult uh because all the data is just landed in time based",
    "start": "2022159",
    "end": "2027519"
  },
  {
    "text": "order and it doesn't really help us get a complete picture of uh red user or",
    "start": "2027519",
    "end": "2032600"
  },
  {
    "text": "blue user um the hardest question I got asked was was what's the duration of a",
    "start": "2032600",
    "end": "2037880"
  },
  {
    "text": "average web session on my website oh Christ how would we figure that out I'd have to get every single",
    "start": "2037880",
    "end": "2043320"
  },
  {
    "text": "web session load it up into memory find the first time stamp the last time stamp subtract the two that would give me a",
    "start": "2043320",
    "end": "2049200"
  },
  {
    "text": "duration oh my God that's going to blow up memory on a busy website that's a lot of web sessions",
    "start": "2049200",
    "end": "2054560"
  },
  {
    "text": "so pay as you go model to computation cost don't put it all off until query",
    "start": "2054560",
    "end": "2060398"
  },
  {
    "text": "time and try and do it all using aggregations periodically every day every hour hour",
    "start": "2060399",
    "end": "2068560"
  },
  {
    "text": "every minute maybe ask for a sorted set of the latest events sorted by entity ID",
    "start": "2068560",
    "end": "2075839"
  },
  {
    "text": "so entity is typically you know like a person or a web session and then add it to a little profile that you keep either",
    "start": "2075839",
    "end": "2083440"
  },
  {
    "text": "for red user or blue user just as a regular elastic search document but in a different Index this is what we call an",
    "start": "2083440",
    "end": "2090839"
  },
  {
    "text": "entity Centric index it's not a log Centric index it's a summary of each user's Behavior over time so we take in",
    "start": "2090839",
    "end": "2099240"
  },
  {
    "text": "every minute hour day whatever the latest batch of stuff and we add it to what we already know about that user and",
    "start": "2099240",
    "end": "2106040"
  },
  {
    "text": "we can use a groovy update script so this is all standard stuff in elastic search scan scroll API being used here",
    "start": "2106040",
    "end": "2113920"
  },
  {
    "text": "uh update API with The Groovy script running here and we're attaching new events to existing profiles drawn here",
    "start": "2113920",
    "end": "2119720"
  },
  {
    "text": "as a little booklet which summarize people's behavior over time you can play with the data um I've",
    "start": "2119720",
    "end": "2125680"
  },
  {
    "text": "got it here there a bunch of scripts you can download the raw data is the stuff that we saw",
    "start": "2125680",
    "end": "2131200"
  },
  {
    "text": "earlier we have a buyer and a seller and a rating and a date and we load that into our event Centric index so this was",
    "start": "2131200",
    "end": "2137520"
  },
  {
    "text": "an event there was a review that occurred at a particular point in time I run my uh python script here and",
    "start": "2137520",
    "end": "2144079"
  },
  {
    "text": "what this does is it creates this entity Centric index over here so it organizes",
    "start": "2144079",
    "end": "2149319"
  },
  {
    "text": "the information reorganizes it around an individual and it deres a new set of attributes here which are uh actually",
    "start": "2149319",
    "end": "2155839"
  },
  {
    "text": "quite useful as it turns out so let's have a look at the anatomy of what that script that groovy script looks like so",
    "start": "2155839",
    "end": "2164599"
  },
  {
    "start": "2158000",
    "end": "2313000"
  },
  {
    "text": "we start off we're given our historical record this is the profile for user 27",
    "start": "2164599",
    "end": "2170359"
  },
  {
    "text": "or whatever it is elastic search invokes the script and gives us the stored state of user",
    "start": "2170359",
    "end": "2177079"
  },
  {
    "text": "27 um it also tells us if this is the first first time we've ever seen user 27",
    "start": "2177079",
    "end": "2182480"
  },
  {
    "text": "so we can initialize some variables if it's a create operation the meat of the uh the logic",
    "start": "2182480",
    "end": "2188240"
  },
  {
    "text": "here is a for Loop it takes the latest batch of events the latest reviews in this case um and attaches them to an",
    "start": "2188240",
    "end": "2194200"
  },
  {
    "text": "existing uh set of data and maybe it's just incrementing a counter here total number of views Plus+ this is the",
    "start": "2194200",
    "end": "2200280"
  },
  {
    "text": "interesting stuff this is where I give the guy a character if a reviewer's um made less",
    "start": "2200280",
    "end": "2205319"
  },
  {
    "text": "than five reviews I call him a newbie if he's uh been entirely positive",
    "start": "2205319",
    "end": "2212599"
  },
  {
    "text": "about a seller or sellers in general and he's only ever given review to one seller I call him a fanboy because he's",
    "start": "2212599",
    "end": "2219640"
  },
  {
    "text": "just consistently saying you're great you're great you're great uh the reverse is actually an interesting character",
    "start": "2219640",
    "end": "2224880"
  },
  {
    "text": "he's called the hater this is a guy who repeatedly buys from the same seller and",
    "start": "2224880",
    "end": "2230040"
  },
  {
    "text": "says you're terrible you're terrible why would you go back to the same seller repeatedly if he was so",
    "start": "2230040",
    "end": "2236720"
  },
  {
    "text": "terrible any ideas competitor yeah sabur now we only",
    "start": "2236720",
    "end": "2244200"
  },
  {
    "text": "see this because we're looking at his behavior over time right um I didn't find any haters in in in the Amazon data",
    "start": "2244200",
    "end": "2250160"
  },
  {
    "text": "but I did find um a lot of Fanboys oh sorry there was a build there",
    "start": "2250160",
    "end": "2255400"
  },
  {
    "text": "um yeah you stick your script um U once you've honed and refined it and you can get quite creative about what goes into",
    "start": "2255400",
    "end": "2260760"
  },
  {
    "text": "this these scripts the business logic um and then we can run a query on",
    "start": "2260760",
    "end": "2266119"
  },
  {
    "text": "our uh reviewers new shiny index that we've got a reviewer index and I can say",
    "start": "2266119",
    "end": "2272240"
  },
  {
    "text": "uh let's have a look at all the Fanboys uh and we'll use that significant terms algorithm again to say",
    "start": "2272240",
    "end": "2278720"
  },
  {
    "text": "who are they reviewing who are these people bigging up you know and saying you're great you're great so we search",
    "start": "2278720",
    "end": "2284680"
  },
  {
    "text": "for all the uh the profiles that have been tagged as Fanboy and we trying to figure out which sellers are kind of",
    "start": "2284680",
    "end": "2290079"
  },
  {
    "text": "unusually represented in that data uh and we see here there's a seller 187 he's captured 70% of the Fanboy",
    "start": "2290079",
    "end": "2298480"
  },
  {
    "text": "market and yet he's a Mino he's got like .1% of all the reviews in in or",
    "start": "2298480",
    "end": "2304359"
  },
  {
    "text": "reviewers in the system so he's got a customer base you of all the customers out there he's captured the market in",
    "start": "2304359",
    "end": "2310640"
  },
  {
    "text": "Fanboys so what are these Fanboy accounts doing well if you look at them over time look",
    "start": "2310640",
    "end": "2316720"
  },
  {
    "start": "2313000",
    "end": "2355000"
  },
  {
    "text": "at the way these things line up 10 different accounts all giving five star reviews to the same seller and they all",
    "start": "2316720",
    "end": "2323160"
  },
  {
    "text": "happen to do it within five minutes of each other weeks or months apart going on for",
    "start": "2323160",
    "end": "2329760"
  },
  {
    "text": "years now you could call that fraud uh Amazon refused to be drawn on whether that was fraud or not um but you",
    "start": "2329760",
    "end": "2337720"
  },
  {
    "text": "wouldn't find this unless you looked at behaviors over time and clearly this guy latched on to the fact that in order to",
    "start": "2337720",
    "end": "2343200"
  },
  {
    "text": "hide his activity he had to create multiple accounts and create multiple you know review records and they would",
    "start": "2343200",
    "end": "2348960"
  },
  {
    "text": "all always use different language and stuff like that but you spot the anomalies when you start to look at behaviors over",
    "start": "2348960",
    "end": "2355040"
  },
  {
    "start": "2355000",
    "end": "2377000"
  },
  {
    "text": "time uh another quick example uh UK car roadworthiness test so there's 37",
    "start": "2355040",
    "end": "2360440"
  },
  {
    "text": "million of these things they're called mots standing for Ministry of Transport their tests did this car pass or did it",
    "start": "2360440",
    "end": "2366119"
  },
  {
    "text": "fail um if your car fails a test you're not supposed to drive it anymore until it's",
    "start": "2366119",
    "end": "2372400"
  },
  {
    "text": "fixed you can drive it home you can get it fixed and then you bring it back but let's have a look at uh what we",
    "start": "2372400",
    "end": "2379240"
  },
  {
    "start": "2377000",
    "end": "2489000"
  },
  {
    "text": "could do with three separate records for the same car so this is test one when he",
    "start": "2379240",
    "end": "2384800"
  },
  {
    "text": "failed a little bit later two days later he came back and failed again and then",
    "start": "2384800",
    "end": "2390720"
  },
  {
    "text": "sometime later we got a green he passed tests one two and three so what",
    "start": "2390720",
    "end": "2395920"
  },
  {
    "text": "attributes could we derive from this information so we' got the test date on the x-axis and we got the myometer",
    "start": "2395920",
    "end": "2401280"
  },
  {
    "text": "reading on the y- axis which is doing something a little bit strange first of all uh in two days this guy managed to",
    "start": "2401280",
    "end": "2407760"
  },
  {
    "text": "drive you know 100,000 miles that's not physically possible so you can detect",
    "start": "2407760",
    "end": "2414200"
  },
  {
    "text": "that um and there's a lot of readings like that um and The Groovy script can then do something which is called",
    "start": "2414200",
    "end": "2420000"
  },
  {
    "text": "lanstein edit distance calculations so it looks at the two numbers and it figures out actually probably what",
    "start": "2420000",
    "end": "2425319"
  },
  {
    "text": "happened there was somebody missed a digit when they were reading it there's a character missing between these two two readings and that explains why the",
    "start": "2425319",
    "end": "2431720"
  },
  {
    "text": "car did 100,000 miles in two days um so that's one uh thing we can we can find",
    "start": "2431720",
    "end": "2437319"
  },
  {
    "text": "the bad data we can attach uh a date or a time",
    "start": "2437319",
    "end": "2443119"
  },
  {
    "text": "period the number of days it took somebody to get it fixed so it's the difference between the first fail and",
    "start": "2443119",
    "end": "2448480"
  },
  {
    "text": "the subsequent pass how long did it take so this during this time period it was in a failed State driving",
    "start": "2448480",
    "end": "2455560"
  },
  {
    "text": "around um some people you should expect miles to",
    "start": "2455560",
    "end": "2460880"
  },
  {
    "text": "go up not up and then down again so somebody's been rewinding the mileometer so there's again you know another",
    "start": "2460880",
    "end": "2466319"
  },
  {
    "text": "interesting thing you could dve this little difference here this is how long the distance that this car was",
    "start": "2466319",
    "end": "2473000"
  },
  {
    "text": "driving while in a failed State the difference between when it failed and when it subsequently",
    "start": "2473000",
    "end": "2478400"
  },
  {
    "text": "passed so you put all this together these are attributes that we now have new insightful properties on car objects",
    "start": "2478400",
    "end": "2486440"
  },
  {
    "text": "as opposed to just at tests what can we look at and reason about well if we plot",
    "start": "2486440",
    "end": "2491560"
  },
  {
    "start": "2489000",
    "end": "2599000"
  },
  {
    "text": "the days taken for a fix so you know between n and 3 65 days so the longer",
    "start": "2491560",
    "end": "2498000"
  },
  {
    "text": "you have between uh failing and then subsequently passing well we would",
    "start": "2498000",
    "end": "2503520"
  },
  {
    "text": "expect you to drive more the distance that you've driven would expect to be kind of linear the more days between the",
    "start": "2503520",
    "end": "2510440"
  },
  {
    "text": "two events then the longer you've been driving around some of these people have been driving around for a very long time",
    "start": "2510440",
    "end": "2515880"
  },
  {
    "text": "with cars that have failed which is kind of IL legal that bit in the middle that's just",
    "start": "2515880",
    "end": "2522920"
  },
  {
    "text": "weird 6 months exactly 180 days there's a huge spike in the",
    "start": "2522920",
    "end": "2528680"
  },
  {
    "text": "middle so what's causing that has anybody got any ideas no what's different about uh",
    "start": "2528680",
    "end": "2536839"
  },
  {
    "text": "public transport Vehicles is they have to be tested twice a year because it's deemed to make them more safe okay um so",
    "start": "2536839",
    "end": "2545599"
  },
  {
    "text": "the answer is taxis this is what uh amounts for this uh this particular bump here if we again use the significant",
    "start": "2545599",
    "end": "2551119"
  },
  {
    "text": "terms thing to tell me what's unusual about that Spike this is the set of car makes that are highly correlated with",
    "start": "2551119",
    "end": "2558160"
  },
  {
    "text": "that particular Behavior they are taxis so what taxis are doing is they're",
    "start": "2558160",
    "end": "2563640"
  },
  {
    "text": "failing their test and then they're thinking well this is my living I've got to carry on driving and I've got another",
    "start": "2563640",
    "end": "2569640"
  },
  {
    "text": "test coming in six months time I might as well just keep going so the G the government initiative that was designed",
    "start": "2569640",
    "end": "2576000"
  },
  {
    "text": "to make the cars saf perhaps has made them less safe because",
    "start": "2576000",
    "end": "2581240"
  },
  {
    "text": "the frequency at which they're being tested just means that they don't bother they just wait for the next one they skip uh a test if you like um so that's",
    "start": "2581240",
    "end": "2589520"
  },
  {
    "text": "uh an example of what you can do when you look at uh behaviors over time and",
    "start": "2589520",
    "end": "2594920"
  },
  {
    "text": "reorient your data around entities rather than just looking at log records uh so just to summarize and",
    "start": "2594920",
    "end": "2601640"
  },
  {
    "start": "2599000",
    "end": "2664000"
  },
  {
    "text": "recap um averages are misleading uh the Bill Gates example Ed percentiles uh medians",
    "start": "2601640",
    "end": "2608000"
  },
  {
    "text": "uh think about the fuzziness of the set that you're actually analyzing so you know how fuzzy is your query what you",
    "start": "2608000",
    "end": "2613480"
  },
  {
    "text": "know what sort of results are you actually trying to summarize here um significance is not the same as",
    "start": "2613480",
    "end": "2618920"
  },
  {
    "text": "popularity a recommendation engine that only ever told you hey a lot of people like Star Wars wouldn't be a good",
    "start": "2618920",
    "end": "2624960"
  },
  {
    "text": "recommendation engine you got to tune into what's significantly different about certain uh sets of people or",
    "start": "2624960",
    "end": "2631680"
  },
  {
    "text": "data uh you can't get into trouble with aggregation sometimes when you're using memory so consider the of breath first",
    "start": "2631680",
    "end": "2637800"
  },
  {
    "text": "for some of these kind of big social network type things uh and also consider reorganizing",
    "start": "2637800",
    "end": "2643920"
  },
  {
    "text": "your data away from log records into entity Centric indexes that summarize",
    "start": "2643920",
    "end": "2649079"
  },
  {
    "text": "behaviors of people they're the things that uh you Market to they're the things that can represent fraud and and and",
    "start": "2649079",
    "end": "2656559"
  },
  {
    "text": "risks to your business uh so it's often useful to reorient your data around",
    "start": "2656559",
    "end": "2662839"
  },
  {
    "text": "those that's it any questions [Applause]",
    "start": "2663400",
    "end": "2675679"
  },
  {
    "start": "2664000",
    "end": "2686000"
  },
  {
    "text": "[Music]",
    "start": "2676340",
    "end": "2685420"
  }
]