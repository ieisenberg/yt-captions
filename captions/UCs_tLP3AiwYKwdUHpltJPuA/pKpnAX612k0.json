[
  {
    "text": "um hey everybody uh yeah as I said my name is Matt I work at Uber this little uh startup in San Francisco uh maybe",
    "start": "4680",
    "end": "9960"
  },
  {
    "text": "you've heard of and um I'm really happy to be here in Australia it's my first time um in your in your great nation and in",
    "start": "9960",
    "end": "16680"
  },
  {
    "text": "case you're wondering I've already gotten uh hanging out with kangaroos out of the way I've already been trolled by drop Bears",
    "start": "16680",
    "end": "22800"
  },
  {
    "text": "um so in case you I'm pretty sure I got the full cultural experience so uh no no",
    "start": "22800",
    "end": "28140"
  },
  {
    "text": "need to cover any of those bases but um what I want to talk to you about is",
    "start": "28140",
    "end": "33360"
  },
  {
    "text": "um I'll tell you some stories of how some things have broken at Uber like while we were scaling Uber",
    "start": "33360",
    "end": "39420"
  },
  {
    "text": "um we didn't uh we didn't always do everything right and I find that a lot",
    "start": "39420",
    "end": "44460"
  },
  {
    "text": "of conferences like this um you get a lot of people telling a lot of cool stories and it's always sound so",
    "start": "44460",
    "end": "50100"
  },
  {
    "text": "amazing right I mean it's like they got their thing all figured out they don't have any problems they've managed to",
    "start": "50100",
    "end": "55199"
  },
  {
    "text": "build this amazing technology and it's like super scalable and it sounds so awesome and now it's open source and you",
    "start": "55199",
    "end": "61199"
  },
  {
    "text": "know and so often I've I've been in the audience thinking like man my stuff is like really bad right like my stuff like",
    "start": "61199",
    "end": "68460"
  },
  {
    "text": "hardly Works um like it's weird like am I just bad at my job",
    "start": "68460",
    "end": "73860"
  },
  {
    "text": "um and it turns out that like everybody's stuff is broken like everybody's stuff is broken everywhere",
    "start": "73860",
    "end": "78900"
  },
  {
    "text": "it's just like it's not that exciting to go to a conference and talk about like how broken all your stuff is but I can",
    "start": "78900",
    "end": "85560"
  },
  {
    "text": "assure you our stuff is super broken and what I want to what I want to tell you about is how broken some of it is and",
    "start": "85560",
    "end": "93540"
  },
  {
    "text": "some of the things that we learned uh while trying to sort of grapple with the Brokenness so",
    "start": "93540",
    "end": "99420"
  },
  {
    "text": "um now that we got that out of the way uh we gotta take a few more boxes here every presentation uh has to cover uh",
    "start": "99420",
    "end": "105780"
  },
  {
    "text": "you know impressive uh sizes of scalability so Uber's definitely uh",
    "start": "105780",
    "end": "111720"
  },
  {
    "text": "maybe bigger than you might have realized um especially uh in terms of number of employees right like check out",
    "start": "111720",
    "end": "118200"
  },
  {
    "text": "that um Engineers number like 1500 it's quite a lot and when I started at Uber about a",
    "start": "118200",
    "end": "125460"
  },
  {
    "text": "year and a half ago there were 200 people and so now there are 1500 people",
    "start": "125460",
    "end": "130800"
  },
  {
    "text": "so that's pretty insane and uh you know so so far in the United States we've uh",
    "start": "130800",
    "end": "136440"
  },
  {
    "text": "you know through through October we've paid out the equivalent of 4.8 billion Australian dollars to drivers so it's",
    "start": "136440",
    "end": "144780"
  },
  {
    "text": "it's kind of a thing um it's a it's a you know serious entity in the world but still like a lot of",
    "start": "144780",
    "end": "150599"
  },
  {
    "text": "people come back to like what's with the 5 000 employees and 1500 Engineers like",
    "start": "150599",
    "end": "155760"
  },
  {
    "text": "what what are you guys doing right um like why do you have all that and I used to be one of these people um who",
    "start": "155760",
    "end": "162360"
  },
  {
    "text": "would who would say that until I got sort of a little more involved in in what we're doing and I realized",
    "start": "162360",
    "end": "168060"
  },
  {
    "text": "man Uber is much more than just a simple app on your phone like it turns out when we operate in all of these different",
    "start": "168060",
    "end": "174239"
  },
  {
    "text": "cities in all these different countries all around the world um we're running the same software but these places all have different rules",
    "start": "174239",
    "end": "180599"
  },
  {
    "text": "they're all kind of these individual cities are run like like separate businesses and and so we have this large",
    "start": "180599",
    "end": "187019"
  },
  {
    "text": "and growing Global footprint that all needs to sort of run the same software and you know people keep inventing uh",
    "start": "187019",
    "end": "193440"
  },
  {
    "text": "new products and and new rules new regulations that we have to that we have to operate with and and so that's sort",
    "start": "193440",
    "end": "199440"
  },
  {
    "text": "of like one reason like one one obvious reason is like man we gotta deal with",
    "start": "199440",
    "end": "204480"
  },
  {
    "text": "all of this different stuff and you know Riders and drivers can come and go as as you know they please they're no like shifts they're they're it's a very",
    "start": "204480",
    "end": "211200"
  },
  {
    "text": "Dynamic Marketplace you know that's kind of hard to come you know hard to hard to deal with but you know the the bigger reason that we",
    "start": "211200",
    "end": "219120"
  },
  {
    "text": "need all these people is because there are no free users right there's no sort",
    "start": "219120",
    "end": "224400"
  },
  {
    "text": "of checking you Uber right there's no like you take your phone in your pocket I'm like I'm bored wonder what's going on I don't know let's open up Uber and",
    "start": "224400",
    "end": "229500"
  },
  {
    "text": "see what's going on right like no one would do that like what what instead like you the reason you get this app out",
    "start": "229500",
    "end": "235500"
  },
  {
    "text": "of your pocket is because you want to actually go somewhere and so the the",
    "start": "235500",
    "end": "240540"
  },
  {
    "text": "requirements of of sort of high availability and just the general expectations of of people when when they",
    "start": "240540",
    "end": "247980"
  },
  {
    "text": "get you know when when they run our through our platform are much much higher and much much higher than I think",
    "start": "247980",
    "end": "255060"
  },
  {
    "text": "a lot of people realize like when when you're talking about like leaving you",
    "start": "255060",
    "end": "260160"
  },
  {
    "text": "know maybe somebody's getting stranded if you're if your system doesn't work like this is this is a lot of pressure and",
    "start": "260160",
    "end": "266100"
  },
  {
    "text": "so as a result but but also at the same time um people are spending a lot of money right like every one of these",
    "start": "266100",
    "end": "271259"
  },
  {
    "text": "transactions uh when you know that a user's interacting with like we're moving a lot of money through the",
    "start": "271259",
    "end": "276840"
  },
  {
    "text": "platform and we are we are you know users are spending a lot of money we are making a lot of money drivers are making a lot of money so the the expectations",
    "start": "276840",
    "end": "284040"
  },
  {
    "text": "uh are you know or they're the the impact of every transaction uh is is very very high and so as a result we can",
    "start": "284040",
    "end": "291600"
  },
  {
    "text": "we can and sort of do um spend a lot of time making subtle",
    "start": "291600",
    "end": "297660"
  },
  {
    "text": "adjustments you know trying to optimize different flows different you know different things that seem kind of tiny",
    "start": "297660",
    "end": "303240"
  },
  {
    "text": "and inconsequential uh at the you know with these kinds of transactions at this kind of scale",
    "start": "303240",
    "end": "308699"
  },
  {
    "text": "um these these matter a lot a lot more so that may or may not have convinced you that we still need 1500 people but",
    "start": "308699",
    "end": "314460"
  },
  {
    "text": "that's the best I can do um uh there's a bunch of other fancy other projects that you can sort of infer from",
    "start": "314460",
    "end": "320699"
  },
  {
    "text": "Reading various uh press releases um but I can't talk about those right now but anyway uh the uh you know what I",
    "start": "320699",
    "end": "326880"
  },
  {
    "text": "realized you know also working at Uber though and sort of reflecting back on my career and software is that this kind of",
    "start": "326880",
    "end": "333419"
  },
  {
    "text": "like impact like wow it actually it's kind of important like the software that I'm writing like it actually matters um it's I realize this has actually been",
    "start": "333419",
    "end": "340080"
  },
  {
    "text": "true for a long time and it's increasingly true of all software like it's not just Uber and you know software",
    "start": "340080",
    "end": "346500"
  },
  {
    "text": "Engineers that have this this kind of Burden like like as Society we're we're putting more and more control of",
    "start": "346500",
    "end": "352139"
  },
  {
    "text": "people's lives behind software and we need to really up our game as an",
    "start": "352139",
    "end": "357600"
  },
  {
    "text": "industry to build more Reliable Software that works better for people because it",
    "start": "357600",
    "end": "363060"
  },
  {
    "text": "really matters it changes their lives whether we do a good job or a bad job so in light of all those things I just",
    "start": "363060",
    "end": "370500"
  },
  {
    "text": "said you can imagine if you're growing a team so quickly that it's very very hard",
    "start": "370500",
    "end": "376620"
  },
  {
    "text": "to sort of meet these requirements and you know it's a pretty chaotic place to",
    "start": "376620",
    "end": "382199"
  },
  {
    "text": "do good engineering and um that's you know we're still sort of expanding the transportation business",
    "start": "382199",
    "end": "388199"
  },
  {
    "text": "you know India and China are big growth areas but at the same time we're also like rolling out these rolling out new",
    "start": "388199",
    "end": "394440"
  },
  {
    "text": "products to do you know to the sort of like Beyond personal Transportation",
    "start": "394440",
    "end": "399960"
  },
  {
    "text": "um you know delivering delivering items delivering food right so you can imagine in spite of all this growth",
    "start": "399960",
    "end": "405960"
  },
  {
    "text": "like it's probably uh this is a real challenge right and um it happened",
    "start": "405960",
    "end": "411539"
  },
  {
    "text": "really really quickly uh it happened just sort of snuck up on on everybody that like wow this is um actually this",
    "start": "411539",
    "end": "417780"
  },
  {
    "text": "major important thing that we have to um that we that we have to get right so let me take you through a little bit of the",
    "start": "417780",
    "end": "423479"
  },
  {
    "text": "history of the sort of uh technology choices that we kind of that led us to get here and an interesting thing that I",
    "start": "423479",
    "end": "429240"
  },
  {
    "text": "found um because the company is growing so fast uh half of the company has only",
    "start": "429240",
    "end": "434460"
  },
  {
    "text": "been here for six months and so if you want to like ask around and say like hey why did we do it this way it's like",
    "start": "434460",
    "end": "441120"
  },
  {
    "text": "probably nobody knows um and in fact uh when I wanted to find out like I asked a lot of questions like",
    "start": "441120",
    "end": "447780"
  },
  {
    "text": "this like well why are we doing it this way why does this thing work that way and no no one knows I had to go like trawl",
    "start": "447780",
    "end": "454979"
  },
  {
    "text": "through all of the uh all of the git repos and ask a few Old-Timers and they have kind of like some conflicting versions of History you know they they",
    "start": "454979",
    "end": "461520"
  },
  {
    "text": "don't even all agree like why we did what we did but as near as I can figure uh this is this is the the sort of Arc",
    "start": "461520",
    "end": "467819"
  },
  {
    "text": "that uh that Uber's technology took in earliest of days um the technology did not seem like a",
    "start": "467819",
    "end": "473580"
  },
  {
    "text": "problem it didn't even seem like a thing that the company should do it just seemed like we should Outsource it all",
    "start": "473580",
    "end": "479340"
  },
  {
    "text": "like let's write some mobile apps and we'll have somebody else do the back end and it's fine because it probably was",
    "start": "479340",
    "end": "486060"
  },
  {
    "text": "fine like there were no customers and there were you know on either side of the two-sided Market it was they were",
    "start": "486060",
    "end": "491400"
  },
  {
    "text": "just trying to bootstrap it and really technology was was not the problem but eventually the business started to take off and they said okay well we're gonna",
    "start": "491400",
    "end": "497460"
  },
  {
    "text": "have to we're gonna like take this in-house we're gonna like we're gonna do this engineering ourselves and so we built a couple of services one is called",
    "start": "497460",
    "end": "504060"
  },
  {
    "text": "dispatch It Was Written in node.js another one is called API and I feel like this API pattern is pretty common",
    "start": "504060",
    "end": "509580"
  },
  {
    "text": "one like a lot of people end up with uh of everything is the API and that's",
    "start": "509580",
    "end": "515219"
  },
  {
    "text": "still sort of where we find ourselves but it's sort of interesting also like if you look at the the tech these",
    "start": "515219",
    "end": "521339"
  },
  {
    "text": "technology choices that we made um at the time and compare them to like what we would pick now and in some cases",
    "start": "521339",
    "end": "529080"
  },
  {
    "text": "uh some cases they're the same and in other cases maybe they don't uh they don't apply anymore but I feel like",
    "start": "529080",
    "end": "535860"
  },
  {
    "text": "generally like at the time they were the right choices for for you know the problem Uber was trying to solve so uh",
    "start": "535860",
    "end": "542760"
  },
  {
    "text": "apis is uh is is where the you know like sort of half of the half of the company is is written uh in in a in Python and",
    "start": "542760",
    "end": "550680"
  },
  {
    "text": "um they got this orm called SQL Alchemy and orm is another one of these",
    "start": "550680",
    "end": "555779"
  },
  {
    "text": "trade-offs that it's like probably a good idea uh in the early stages probably probably accelerated",
    "start": "555779",
    "end": "561060"
  },
  {
    "text": "development velocity but as we'll see over time uh it became just this anchor",
    "start": "561060",
    "end": "566820"
  },
  {
    "text": "that we were Shackled to that uh this is now just a really really like sort of uh",
    "start": "566820",
    "end": "573899"
  },
  {
    "text": "not a good choice well so over time um the you know the dispatch side",
    "start": "573899",
    "end": "578940"
  },
  {
    "text": "doesn't actually need to keep the state like forever so uh for performance reasons we swap out for redis just",
    "start": "578940",
    "end": "584880"
  },
  {
    "text": "to keep this sort of transient State and then we do sort of an interesting thing which is we had this thing we called on",
    "start": "584880",
    "end": "590700"
  },
  {
    "text": "which stands for object node and on is kind of like a data access layer so it's sort of how a dispatch talks to API so",
    "start": "590700",
    "end": "599339"
  },
  {
    "text": "the reason we did this is because API breaks a lot like a whole lot and",
    "start": "599339",
    "end": "605220"
  },
  {
    "text": "largely because of this orm layer so this orm layer inadvertently uh starts",
    "start": "605220",
    "end": "610500"
  },
  {
    "text": "opening lots of connections and they last long time and so transaction boundaries are hard to understand and",
    "start": "610500",
    "end": "616320"
  },
  {
    "text": "the database just sort of gets overloaded like a bunch and as a result the dispatch side needs to stay up",
    "start": "616320",
    "end": "622980"
  },
  {
    "text": "because dispatch has an interesting property which is if dispatch is up people can still use Uber as long as",
    "start": "622980",
    "end": "630120"
  },
  {
    "text": "they have an account like you can still take trips strips can progress the system keeps working but if API is down",
    "start": "630120",
    "end": "636240"
  },
  {
    "text": "like that's bad right we don't we don't want it to be down it impacts the business somewhat but it's not like a",
    "start": "636240",
    "end": "642720"
  },
  {
    "text": "crucial like you know major money losing emergency so so this on is is in place",
    "start": "642720",
    "end": "648120"
  },
  {
    "text": "and actually saves us some from uh from a bunch of problems then after a while we start realizing like man we can't Jam all of this code",
    "start": "648120",
    "end": "655200"
  },
  {
    "text": "into this API this you know this monolith has has got to go so in in 2013",
    "start": "655200",
    "end": "660959"
  },
  {
    "text": "we start adding some some different services and uh you know written in Python and um we want to use uh postgis",
    "start": "660959",
    "end": "668820"
  },
  {
    "text": "like we're doing a lot of geospatial work and uh really really neat feature in postgres",
    "start": "668820",
    "end": "674220"
  },
  {
    "text": "um that we wanted to get access to we also had some uh some in-house expertise for postgres so uh we switched the",
    "start": "674220",
    "end": "681000"
  },
  {
    "text": "switch to the main database over to over to postgres then we decided the postgres sucks and",
    "start": "681000",
    "end": "686940"
  },
  {
    "text": "we switch back to my sequel because turns out the orm problems are even",
    "start": "686940",
    "end": "692220"
  },
  {
    "text": "worse in postgres than they are in my sequel uh the uh RMS um that's this",
    "start": "692220",
    "end": "698459"
  },
  {
    "text": "topic for another time but um yeah so we decided like now maybe postgres wasn't the best thing let's",
    "start": "698459",
    "end": "704399"
  },
  {
    "text": "we're gonna switch back to my sequel and then we start uh we start coming up against some limits so every year uh the",
    "start": "704399",
    "end": "711600"
  },
  {
    "text": "you know the way Uber's business Works New Year's Eve is the most is the busiest night of the year and those",
    "start": "711600",
    "end": "717360"
  },
  {
    "text": "those uh those animations I showed you earlier from New Year's Eve and and on New Year's Eve the traffic is roughly",
    "start": "717360",
    "end": "723360"
  },
  {
    "text": "double what it would be on any other Peak day and so for much of the end of",
    "start": "723360",
    "end": "729360"
  },
  {
    "text": "every year uh engineering doesn't make any further progress on features or whatever it's all about scaling it's all",
    "start": "729360",
    "end": "736320"
  },
  {
    "text": "just like will we survive New Year's and so that's basically what they're doing",
    "start": "736320",
    "end": "742019"
  },
  {
    "text": "right now is like just looking at graphs and projecting forward making sure that",
    "start": "742019",
    "end": "747600"
  },
  {
    "text": "it's going to work through New Year's and so so we figure out that um in in early 2014 we project our graphs forward",
    "start": "747600",
    "end": "754920"
  },
  {
    "text": "and we're like uh oh it's not going to work like we've we've actually hit the limits of what we can get out of the the",
    "start": "754920",
    "end": "761940"
  },
  {
    "text": "one MySQL or the one postgres um that are running a few of these things we realize like like this one of something",
    "start": "761940",
    "end": "768060"
  },
  {
    "text": "models got to go we're gonna have to Shard these databases and so so we start building",
    "start": "768060",
    "end": "773220"
  },
  {
    "text": "um our our own sort of sharding layer like everybody's got a shouting layer like we have a sharding layer um this thing called schemeless it's",
    "start": "773220",
    "end": "779760"
  },
  {
    "text": "built on top of MySQL and it's got to finish before the end of the year uh because we're not gonna make it like",
    "start": "779760",
    "end": "785579"
  },
  {
    "text": "2014 would have been a meltdown uh New Year's Eve if we didn't do this but miraculously we did do it so um",
    "start": "785579",
    "end": "792180"
  },
  {
    "text": "obviously Uber's still here you didn't read about it in the news that it went down on New Year's so um so we get that and uh just barely",
    "start": "792180",
    "end": "797880"
  },
  {
    "text": "make it through Meanwhile we're sort of like we're reworking the the dispatch",
    "start": "797880",
    "end": "802980"
  },
  {
    "text": "system so dispatch had been largely the same for for a long time um but there was a sort of a year-long",
    "start": "802980",
    "end": "808500"
  },
  {
    "text": "rewrite effort uh with uh for the new dispatch system was still written in node.js but it's used using some other",
    "start": "808500",
    "end": "814560"
  },
  {
    "text": "open source stuff that's on our GitHub and storing the data in rioc which is",
    "start": "814560",
    "end": "819660"
  },
  {
    "text": "which is an interesting choice for for reasons I'll get into in a minute but you can imagine with this sort of",
    "start": "819660",
    "end": "826260"
  },
  {
    "text": "sort of Rapid pace of of Technology Choice switching and uh adding people to",
    "start": "826260",
    "end": "832380"
  },
  {
    "text": "the team that uh you would accumulate a lot of what you might call technical debt and I think this is a really",
    "start": "832380",
    "end": "838680"
  },
  {
    "text": "interesting concept because uh it's this word technical debt that people use a lot but we don't actually all have the",
    "start": "838680",
    "end": "844200"
  },
  {
    "text": "same uh definition for it like people say oh yeah technical debt sure that's a thing you don't like it just means like",
    "start": "844200",
    "end": "849899"
  },
  {
    "text": "a thing you don't like that's the universal definition I mean there are people that have very much very articulate uh sort of you know crisp",
    "start": "849899",
    "end": "857279"
  },
  {
    "text": "useful definitions of this but I find that among among my colleagues and friends in the industry um no one agrees",
    "start": "857279",
    "end": "863160"
  },
  {
    "text": "what this actually means um at Uber it does not mean that we intentionally uh borrowed against the",
    "start": "863160",
    "end": "870480"
  },
  {
    "text": "future because we knew that we were cutting Corners in exchange for increased velocity no we were just",
    "start": "870480",
    "end": "875820"
  },
  {
    "text": "making choices that seemed good at the time and probably were good at the time but now they're no longer good so this",
    "start": "875820",
    "end": "881760"
  },
  {
    "text": "is particularly true of you know things like the orm or various you know database decisions that when we were",
    "start": "881760",
    "end": "888300"
  },
  {
    "text": "small that was actually fine it was it was a very reasonable Choice uh to have done this it's just that we scaled so",
    "start": "888300",
    "end": "894720"
  },
  {
    "text": "quickly so you know so much so quickly uh that it now no no longer is a good choice end result of this of course is that it",
    "start": "894720",
    "end": "901980"
  },
  {
    "text": "breaks like man it just breaks a lot and and it's you know as I talked about at",
    "start": "901980",
    "end": "907620"
  },
  {
    "text": "the beginning like whenever it breaks is really really bad and so and and the way that these things",
    "start": "907620",
    "end": "914639"
  },
  {
    "text": "break too like uh it it's sad because because we made a lot of very responsible choices like we bought um",
    "start": "914639",
    "end": "921420"
  },
  {
    "text": "you know or you know we used the databases that are tried and true you",
    "start": "921420",
    "end": "926579"
  },
  {
    "text": "know proven Technologies like MySQL and postgres um not any of these fancy uh you know nosql things and um you know we we",
    "start": "926579",
    "end": "934019"
  },
  {
    "text": "bought our Hardware from a name brand vendor right like like we we did all these things that that should be more",
    "start": "934019",
    "end": "939839"
  },
  {
    "text": "reliable but a weird thing happens which is eventually we got enough of these",
    "start": "939839",
    "end": "945660"
  },
  {
    "text": "things and all of these things are on their own reliable but the as the number of these items increases the chances",
    "start": "945660",
    "end": "952260"
  },
  {
    "text": "that any one of them might be failing at any at any time goes up and so at first it may not have made sense to to",
    "start": "952260",
    "end": "959220"
  },
  {
    "text": "engineer a system uh you know spend engineering time on a system that uh resists failure if that failure only",
    "start": "959220",
    "end": "965459"
  },
  {
    "text": "happens once every couple of years like who cares like you probably won't even be using that thing in a couple years when it fails again right but as we get",
    "start": "965459",
    "end": "972779"
  },
  {
    "text": "more and more and more of these things eventually the the failure rate goes up to the point where now something's",
    "start": "972779",
    "end": "977880"
  },
  {
    "text": "failing like once a week and so that's that's awkward for our",
    "start": "977880",
    "end": "984360"
  },
  {
    "text": "architecture because we made a lot of trade-offs we made a lot of trade-offs that assumed we could just get",
    "start": "984360",
    "end": "991320"
  },
  {
    "text": "reliability by building a system out of reliable components and you know like that that's sort of",
    "start": "991320",
    "end": "999660"
  },
  {
    "text": "not where we find ourselves anymore and you know to give you a sense of you know just a really sort of shock you all uh",
    "start": "999660",
    "end": "1007100"
  },
  {
    "text": "we're not on the cloud like we're not Cloud at all these are our actual computers I think from our actual data",
    "start": "1007100",
    "end": "1012380"
  },
  {
    "text": "center um like because we can control all of those wires and we know who the network",
    "start": "1012380",
    "end": "1017600"
  },
  {
    "text": "Engineers are who like cable them together and if ever we need a we have a question about like oh some machine",
    "start": "1017600",
    "end": "1023360"
  },
  {
    "text": "can't talk some other machine like we can just like solve the problem but as",
    "start": "1023360",
    "end": "1028760"
  },
  {
    "text": "you can see that sort of rack goes off to the Horizon uh you know eventually like we just got so many of those",
    "start": "1028760",
    "end": "1034579"
  },
  {
    "text": "glowing blue LEDs that that this just wasn't a a trade-off that made sense anymore so so meanwhile like we're you",
    "start": "1034579",
    "end": "1041540"
  },
  {
    "text": "know we're making we're building all these reliable components you know like computers and databases and then you know we still have the",
    "start": "1041540",
    "end": "1048799"
  },
  {
    "text": "right software that runs on these things right and I can't believe I'm going to do this but I am going to do this I'm",
    "start": "1048799",
    "end": "1054200"
  },
  {
    "text": "going to put microservices on a slide and put it up on the screen but",
    "start": "1054200",
    "end": "1059799"
  },
  {
    "text": "we did also do micro services and so like all right all right fine it's like the microservices conference or whatever",
    "start": "1060919",
    "end": "1067340"
  },
  {
    "text": "but if you imagine the cumulative failure of of all of those computers right imagine",
    "start": "1067340",
    "end": "1074000"
  },
  {
    "text": "uh how you know how this like how this goes up now that we've added more",
    "start": "1074000",
    "end": "1079280"
  },
  {
    "text": "services right we've broken everything out and lots of tiny little pieces and boy oh boy did we break it up into tiny",
    "start": "1079280",
    "end": "1085100"
  },
  {
    "text": "little pieces so that's two years of of microservice uh progression",
    "start": "1085100",
    "end": "1091580"
  },
  {
    "text": "um now we have 700 services in production so that's a lot and you know of course",
    "start": "1091580",
    "end": "1098720"
  },
  {
    "text": "we have a dependency graph everyone has a dependency graph it's meant to shock you um aren't you shocked um I I kind of like",
    "start": "1098720",
    "end": "1105380"
  },
  {
    "text": "this uh graph because like I don't know I think it's kind of beautiful it looks like a Hubble Space Telescope or something I mean I don't know that's",
    "start": "1105380",
    "end": "1112160"
  },
  {
    "text": "kind of cool uh but you know really it's much more like beautiful in the same way like a jellyfish is beautiful like good",
    "start": "1112160",
    "end": "1119120"
  },
  {
    "text": "to look at but not good to sort of reach your hand in there and grab like just keep your distance from this kind",
    "start": "1119120",
    "end": "1124700"
  },
  {
    "text": "of beauty so um as you know as you can imagine we're not",
    "start": "1124700",
    "end": "1131780"
  },
  {
    "text": "the first people to sort of run across this problem right like Netflix quite famously uh built their Simeon Army in a",
    "start": "1131780",
    "end": "1139100"
  },
  {
    "text": "chaos monkey and and that whole suite and and this is this is really good stuff right like this is",
    "start": "1139100",
    "end": "1144980"
  },
  {
    "text": "um this is a way of exercising these these failure cases to make sure you understand how how it's going to behave",
    "start": "1144980",
    "end": "1150760"
  },
  {
    "text": "and and I really have a you know want to give a lot of credit to Netflix for talking about this stuff in public",
    "start": "1150760",
    "end": "1156799"
  },
  {
    "text": "because I feel like a lot of other companies have you know failure you know testing fault injection kind of systems",
    "start": "1156799",
    "end": "1163039"
  },
  {
    "text": "but like no one ever talks about it right so as far as I can tell the only company that ever does this is Netflix",
    "start": "1163039",
    "end": "1168919"
  },
  {
    "text": "um because then we'll talk about but anyway more people should talk about it it's good stuff there's there's kind of",
    "start": "1168919",
    "end": "1174020"
  },
  {
    "text": "a generalization of this of this idea that some of the Netflix people uh are starting to talk about now too which I",
    "start": "1174020",
    "end": "1179419"
  },
  {
    "text": "really like which is called chaos engineering and it has this really nice uh nice idea that I feel is is really",
    "start": "1179419",
    "end": "1186260"
  },
  {
    "text": "important which is that they you know want to build confidence in this systems capability to withstand turbulent",
    "start": "1186260",
    "end": "1191900"
  },
  {
    "text": "conditions in production I feel like that's actually the reality of all systems uh especially like as you know",
    "start": "1191900",
    "end": "1198620"
  },
  {
    "text": "if people are changing I'm releasing them like regardless of like when a thing actually fails right if a bunch of",
    "start": "1198620",
    "end": "1204500"
  },
  {
    "text": "people working on the same stuff like trying to release regularly and just the internet is there and random people",
    "start": "1204500",
    "end": "1211100"
  },
  {
    "text": "are doing random things to you over the Internet like this is a turbulent environment and being able to understand",
    "start": "1211100",
    "end": "1216200"
  },
  {
    "text": "how your system behaves in these turbulent conditions is is really really valuable so of course not to be outdone",
    "start": "1216200",
    "end": "1223039"
  },
  {
    "text": "uh we built our own uh system to do failure testing most of the service or many of the services that Uber start",
    "start": "1223039",
    "end": "1229039"
  },
  {
    "text": "with the letter U you know and so we have a deployment system called you deploy and so we acutely called our",
    "start": "1229039",
    "end": "1234980"
  },
  {
    "text": "failure tester you destroy um so that's fun and uh you know you destroy does the stuff you'd imagine it",
    "start": "1234980",
    "end": "1241039"
  },
  {
    "text": "would do I hope we can open sources someday because it's it's pretty cool but we can't use it the the Netflix stuff was for AWS and we have our own",
    "start": "1241039",
    "end": "1248299"
  },
  {
    "text": "bare metal deal right so but anyway we have this this thing where you can you know abuse your processes uh in all",
    "start": "1248299",
    "end": "1254360"
  },
  {
    "text": "kinds of crazy ways and it's awesome uh it's awesome like it really it does what you'd expect of it exposes these you",
    "start": "1254360",
    "end": "1260960"
  },
  {
    "text": "know these really uh sort of bad behaviors when things fail and so so we start um you know started",
    "start": "1260960",
    "end": "1267559"
  },
  {
    "text": "doing this right we start um encouraging teams to you know get their software failure tested and and make sure you can do you can you can withstand failure",
    "start": "1267559",
    "end": "1274700"
  },
  {
    "text": "testing like in you know through the development process because we want to do failure testing in production and I",
    "start": "1274700",
    "end": "1281720"
  },
  {
    "text": "found a really weird thing about this which is uh most Engineers were super on",
    "start": "1281720",
    "end": "1287660"
  },
  {
    "text": "board with failure testing in Dev but really not so on board with failure testing and prod like they're really",
    "start": "1287660",
    "end": "1294799"
  },
  {
    "text": "worried about like I don't know it's probably not going to work right like it's probably going to leak like users are going to notice and like so we",
    "start": "1294799",
    "end": "1301640"
  },
  {
    "text": "should just not do it right like let's let's who why would you want to break stuff for your users and you know of",
    "start": "1301640",
    "end": "1307520"
  },
  {
    "text": "course we can have you have these like really deep intense conversations where we're like listen as an engineering professional surely you would like to",
    "start": "1307520",
    "end": "1313940"
  },
  {
    "text": "understand the characteristics of your system under you know turbulent conditions or whatever and yeah man maybe maybe we eventually we eventually",
    "start": "1313940",
    "end": "1320059"
  },
  {
    "text": "see um you know we get to a good place where we where we realize like okay service authors sorry but at least for",
    "start": "1320059",
    "end": "1326059"
  },
  {
    "text": "new stuff that you build like we're not going to break your old stuff because we just know it's going to break right like there's no sense of failure testing a",
    "start": "1326059",
    "end": "1331460"
  },
  {
    "text": "thing that like users will notice every single time like we know there's no uh there's no handling for these things",
    "start": "1331460",
    "end": "1337220"
  },
  {
    "text": "which is unfortunately a bunch of our software is like that um but at least for new stuff right like",
    "start": "1337220",
    "end": "1342260"
  },
  {
    "text": "at least for new stuff um let's let's do failure testing and so generally speaking like people kind of get on board with this but then we move",
    "start": "1342260",
    "end": "1350059"
  },
  {
    "text": "on to to databases and you know databases run on computers and computers",
    "start": "1350059",
    "end": "1355760"
  },
  {
    "text": "fail so we should do failure testing on databases right and I say this and",
    "start": "1355760",
    "end": "1361700"
  },
  {
    "text": "people look at me like I'm crazy they're like you you can't fail your tested database are you insane like databases",
    "start": "1361700",
    "end": "1368539"
  },
  {
    "text": "are reliable they stay up this is not a realistic scenario that you're that you're trying to put us through like you",
    "start": "1368539",
    "end": "1375140"
  },
  {
    "text": "know kill the database randomly you just gently caress it through its life",
    "start": "1375140",
    "end": "1380900"
  },
  {
    "text": "and you know if you ever need to move it somewhere else like you know let's",
    "start": "1380900",
    "end": "1385960"
  },
  {
    "text": "orchestrate a you know an orderly migration and um but yeah I mean I I",
    "start": "1385960",
    "end": "1392000"
  },
  {
    "text": "think I think we really do I think the the failure modes of databases are among",
    "start": "1392000",
    "end": "1397100"
  },
  {
    "text": "the worst and so I really think we need to do um do failure testing on databases and so the problem the problem though like",
    "start": "1397100",
    "end": "1404120"
  },
  {
    "text": "like why is it like why don't people want to do uh failure testing on databases and so the big reason is because the way these",
    "start": "1404120",
    "end": "1411679"
  },
  {
    "text": "you know sort of traditional like MySQL and postgres kind of databases do uh you know they get scalability and",
    "start": "1411679",
    "end": "1417260"
  },
  {
    "text": "availability is they have replication and the replication has like a special node that you consider to send region",
    "start": "1417260",
    "end": "1422659"
  },
  {
    "text": "rights to and then other nodes Downstream of that that you can just send reads to and that means that there",
    "start": "1422659",
    "end": "1428780"
  },
  {
    "text": "is like a special node right at the beginning of it that if that node breaks then it's really bad right so you can",
    "start": "1428780",
    "end": "1436220"
  },
  {
    "text": "maybe fail your test the other ones but please don't failure test the the main one right and so that's a problem and",
    "start": "1436220",
    "end": "1442280"
  },
  {
    "text": "another problem sort of not really a technical problem but like just as important of a problem is what do we",
    "start": "1442280",
    "end": "1447440"
  },
  {
    "text": "call these things like master and slave like slave is just ah it's so gross right I mean like slavery uh is a moral",
    "start": "1447440",
    "end": "1455059"
  },
  {
    "text": "Abomination and the legacy is still like felt and you know countries around the world and man oh man like just really",
    "start": "1455059",
    "end": "1461720"
  },
  {
    "text": "kind of an offensive term so um I feel like people are really like just married to this you know term like",
    "start": "1461720",
    "end": "1467480"
  },
  {
    "text": "we should really call it master and slave like it's perfectly acceptable and oddly the people who keep wanting to do that are always white men so that's",
    "start": "1467480",
    "end": "1473900"
  },
  {
    "text": "probably probably just a coincidence um I don't know I just something I noticed but you know the thing is uh",
    "start": "1473900",
    "end": "1480080"
  },
  {
    "text": "there are so many better words you could use for this right that that more uh accurately sort of reflect what's",
    "start": "1480080",
    "end": "1485480"
  },
  {
    "text": "actually going on like you could do a leader or follower right you could do primary and secondary and you know like",
    "start": "1485480",
    "end": "1492320"
  },
  {
    "text": "these are sort of getting at a better metaphor for like what's really going on but but man you you still kind of run",
    "start": "1492320",
    "end": "1497960"
  },
  {
    "text": "into this like like this problem of the this naming thing because like in in the the what you do with a special node",
    "start": "1497960",
    "end": "1504320"
  },
  {
    "text": "because like what happens if the master dies right if the master dies what you do is you promote a slave okay promote a",
    "start": "1504320",
    "end": "1512360"
  },
  {
    "text": "slave like that metaphor does not make any sense like no one would ever promote a slave to be a master it's unheard of",
    "start": "1512360",
    "end": "1518539"
  },
  {
    "text": "far better uh metaphor would be Queen and Princess because",
    "start": "1518539",
    "end": "1523880"
  },
  {
    "text": "if the queen dies how do you get a new Queen well obviously the princess right like it's just right there",
    "start": "1523880",
    "end": "1529940"
  },
  {
    "text": "um other people have suggested to me that maybe this whole like if I don't like the metaphor that maybe like",
    "start": "1529940",
    "end": "1535220"
  },
  {
    "text": "talking about death in that same kind of metaphor is maybe a bad idea and then I should use much more neutral things like maybe instead of Queen and Princess we",
    "start": "1535220",
    "end": "1541760"
  },
  {
    "text": "should have like us and Canada Australia New Zealand like if Australia dies how do you get into",
    "start": "1541760",
    "end": "1547340"
  },
  {
    "text": "Australia you promote a New Zealand to one like I don't know anyway I think there are a lot of good",
    "start": "1547340",
    "end": "1552440"
  },
  {
    "text": "choices here but uh the point is that the problem with this is there's a special node at the top there's this one",
    "start": "1552440",
    "end": "1559220"
  },
  {
    "text": "sort of special note that if you lose it's going to be really bad and that",
    "start": "1559220",
    "end": "1564559"
  },
  {
    "text": "property is what has caused our worst outage ever and I want to tell",
    "start": "1564559",
    "end": "1569600"
  },
  {
    "text": "you about our worst outage ever not because I want to sort of point out how people made up a bunch of mistakes about",
    "start": "1569600",
    "end": "1575900"
  },
  {
    "text": "how maybe this technology is maybe not the best or has some problems like all technology has problems right Everything is Everything Is Broken in some way",
    "start": "1575900",
    "end": "1582020"
  },
  {
    "text": "right um but I think it's really uh it's a really good way to learn about how these",
    "start": "1582020",
    "end": "1587779"
  },
  {
    "text": "systems fail kind of in the same way that like Aviation disasters are interesting I mean they're super",
    "start": "1587779",
    "end": "1593240"
  },
  {
    "text": "gruesome like people died but it's so fascinating as an engineer to be like whoa the pitot tubes and the thing right",
    "start": "1593240",
    "end": "1599779"
  },
  {
    "text": "like uh so this is an aviation disaster uh no one died though so um I think you",
    "start": "1599779",
    "end": "1605120"
  },
  {
    "text": "can you can maybe uh you can enjoy it even more thoroughly so anyway",
    "start": "1605120",
    "end": "1610580"
  },
  {
    "text": "um where'd my time stamp go it doesn't matter so 4am 4 AM um uh oh no we're gonna get to that so",
    "start": "1610580",
    "end": "1616159"
  },
  {
    "text": "this is the the conclusion these are the this is the actual text from uh from the post modem so the internal post modem uh",
    "start": "1616159",
    "end": "1622820"
  },
  {
    "text": "all I did was edit out uh some of the names of the engineers and uh I think I",
    "start": "1622820",
    "end": "1628159"
  },
  {
    "text": "changed all the words slaves to not say that but anyway it was down for 12 hours that's super bad so four in the morning",
    "start": "1628159",
    "end": "1634000"
  },
  {
    "text": "so Uber has engineering uh in in Europe as well as as well as the United States and so we're um you know the the",
    "start": "1634000",
    "end": "1641059"
  },
  {
    "text": "database team is is making a change and so we land this patch because we're",
    "start": "1641059",
    "end": "1646159"
  },
  {
    "text": "going to do this China China migration and so we change the way that uh that postgres updates its right ahead logs uh",
    "start": "1646159",
    "end": "1652820"
  },
  {
    "text": "archiving S3 so then we can you know uh re-jigger our you know replication",
    "start": "1652820",
    "end": "1659179"
  },
  {
    "text": "hierarchy as necessary and you know recover from various failures and so",
    "start": "1659179",
    "end": "1664340"
  },
  {
    "text": "unfortunately uh we do it wrong and now the files are no longer being uploaded",
    "start": "1664340",
    "end": "1669500"
  },
  {
    "text": "they're just being accumulated on the disk and that has caused the chart of Doom uh",
    "start": "1669500",
    "end": "1675620"
  },
  {
    "text": "this is a graph of disk space that's free and I know it's probably hard to read at the bottom is zero that that is",
    "start": "1675620",
    "end": "1682760"
  },
  {
    "text": "no disk space and that little Notch there that is when it hits zero so uh",
    "start": "1682760",
    "end": "1688340"
  },
  {
    "text": "I'm not really a database expert maybe some of you are but you need more than zero bytes to run a database",
    "start": "1688340",
    "end": "1695840"
  },
  {
    "text": "uh but that's what we had so obviously this is bad and uh but you can see like things are cruising along pretty well",
    "start": "1695840",
    "end": "1701240"
  },
  {
    "text": "and also I'm like whoa we're just like we're losing our disk space fast so unfortunately at the time the engineer",
    "start": "1701240",
    "end": "1708860"
  },
  {
    "text": "who was on call for this system was dealing with another issue that seemed actually more important and so he got this page and it's not",
    "start": "1708860",
    "end": "1715820"
  },
  {
    "text": "like we don't have monitoring right like of course we have monitoring like we have monitors all over the place and so uh this page like 81 gigs left and he",
    "start": "1715820",
    "end": "1722779"
  },
  {
    "text": "was like man uh I I get that that's a problem but I got this other thing that's like actually like impacting",
    "start": "1722779",
    "end": "1728360"
  },
  {
    "text": "customers and plus we have a ton of these postgres machines it's probably fine I'll just have to get to it later acknowledge the alerts an hour later",
    "start": "1728360",
    "end": "1736159"
  },
  {
    "text": "we're like hey man you got like 36 gigs and he's like I know but this other",
    "start": "1736159",
    "end": "1742760"
  },
  {
    "text": "thing it's more important and so the alert was acknowledged and then an hour later",
    "start": "1742760",
    "end": "1748340"
  },
  {
    "text": "zero not good uh",
    "start": "1748340",
    "end": "1753440"
  },
  {
    "text": "API Master database becomes unavailable in the postgres master crashes so never fear because we have a ton of postgres",
    "start": "1753440",
    "end": "1760640"
  },
  {
    "text": "machines this is our replication tree and uh so the the red one is the is the one that died where it says dca1 and",
    "start": "1760640",
    "end": "1767240"
  },
  {
    "text": "peak one these are totally other data centers and inside those data centers they have a similar replication tree right so we have a ton of copies of our",
    "start": "1767240",
    "end": "1774559"
  },
  {
    "text": "data everything is going to be fine we're just gonna get out the Run book and just like sort this thing out get",
    "start": "1774559",
    "end": "1780679"
  },
  {
    "text": "this get the site working again uh it's no big deal so engineer notices that the problem is",
    "start": "1780679",
    "end": "1787340"
  },
  {
    "text": "in front of this space and he's just like man what's going on with all these Wall Files this is dumb why why are these all here like I guess",
    "start": "1787340",
    "end": "1794120"
  },
  {
    "text": "postgres forgot to delete them um which is not the right move and",
    "start": "1794120",
    "end": "1800960"
  },
  {
    "text": "so we get out the runbook and we're like okay okay we yeah we really messed up but it's no problem we're gonna we're",
    "start": "1800960",
    "end": "1807380"
  },
  {
    "text": "gonna promote uh one of these slaves um just just like I said you couldn't",
    "start": "1807380",
    "end": "1812659"
  },
  {
    "text": "ever metaphorically do um so we're gonna do it but we do it wrong because the Run book doesn't quite",
    "start": "1812659",
    "end": "1818720"
  },
  {
    "text": "emphasize the or maybe didn't even mention that you had to run this one thing and so unfortunately now we broke",
    "start": "1818720",
    "end": "1825440"
  },
  {
    "text": "a bunch of stuff because now the Badness has propagated and so now",
    "start": "1825440",
    "end": "1830539"
  },
  {
    "text": "now we're we're losing we're losing some nodes um we uh we we get eight we think we get",
    "start": "1830539",
    "end": "1836360"
  },
  {
    "text": "eight going but it turns out it's not actually going and we find that out when we try to get some other nodes to follow",
    "start": "1836360",
    "end": "1842419"
  },
  {
    "text": "it and it turns out that those break two and so this is bad right so we get our",
    "start": "1842419",
    "end": "1848179"
  },
  {
    "text": "Consultants on the phone and we're like hey please help uh the site it's like it's like super broken right",
    "start": "1848179",
    "end": "1855080"
  },
  {
    "text": "um we've got all these problems and uh you got to help us um so meanwhile uh this is like nine",
    "start": "1855080",
    "end": "1860720"
  },
  {
    "text": "o'clock and I'm around like kind of in solidarity I don't really work on a database team um I'm trying to help these guys and",
    "start": "1860720",
    "end": "1866840"
  },
  {
    "text": "uh there's nothing I can do it's nine o'clock um and so I go home and I took an Uber home and I did so because uh we have the",
    "start": "1866840",
    "end": "1875059"
  },
  {
    "text": "on and I already have an account and so while this like worst outage ever a crisis is happening",
    "start": "1875059",
    "end": "1881480"
  },
  {
    "text": "um I still I still took an Uber home so that was that was kind of cool but still uh not to take the pressure off these",
    "start": "1881480",
    "end": "1887360"
  },
  {
    "text": "guys like they're they are they are working really hard to try to get this thing going and after some more",
    "start": "1887360",
    "end": "1893179"
  },
  {
    "text": "investigation they realize that somehow in the shuffle uh somebody like broke up",
    "start": "1893179",
    "end": "1898460"
  },
  {
    "text": "one of these files like it got corrupted like somehow like it doesn't no one's actually sure how it happened and you",
    "start": "1898460",
    "end": "1905720"
  },
  {
    "text": "know helpfully postgres has this great error message um invalid magic number four zeros like",
    "start": "1905720",
    "end": "1912320"
  },
  {
    "text": "cool thanks postgres like I'll get right on that um",
    "start": "1912320",
    "end": "1919179"
  },
  {
    "text": "so so now things are starting to look Grim like remember we started out and we were like wow look at all our computers",
    "start": "1919340",
    "end": "1925520"
  },
  {
    "text": "and now we're like we better get this figured out before we just completely like corrupt our way",
    "start": "1925520",
    "end": "1931640"
  },
  {
    "text": "into Oblivion so um right but but no problem we got the Consultants are on a case and they",
    "start": "1931640",
    "end": "1938840"
  },
  {
    "text": "suggest that uh oh this is yeah this is sort of Step One not so destructive uh",
    "start": "1938840",
    "end": "1943940"
  },
  {
    "text": "turns out to be like really slow and doesn't actually work very well and so then they come up with this this plan",
    "start": "1943940",
    "end": "1949940"
  },
  {
    "text": "which is at midnight by the way so this is 12 30 am so Consultants believe they may be able to write a c program that",
    "start": "1949940",
    "end": "1956240"
  },
  {
    "text": "would allow us to promote postgres five this program would bypass the normal safety mechanisms built into postgres",
    "start": "1956240",
    "end": "1962240"
  },
  {
    "text": "at midnight and so so what do you think we did",
    "start": "1962240",
    "end": "1970399"
  },
  {
    "text": "we did it uh at 3 20 a.m the C program allows us to",
    "start": "1970399",
    "end": "1976100"
  },
  {
    "text": "issue commands to postgres01. um pretty good uh we've still you know we're still not out of the woods like",
    "start": "1976100",
    "end": "1982220"
  },
  {
    "text": "things are are still like this whole sort of you know rerouting the relationships is is it's making progress",
    "start": "1982220",
    "end": "1988880"
  },
  {
    "text": "uh but it's it still just keeps breaking in these weird like subtle ways that are hard to understand and but you know",
    "start": "1988880",
    "end": "1995419"
  },
  {
    "text": "eventually we um uh we start getting some some uh some machines kind of back up and uh we don't need to go into the",
    "start": "1995419",
    "end": "2001600"
  },
  {
    "text": "details of all this but you know bad things keep happening like we go hey this is working well like let's try to",
    "start": "2001600",
    "end": "2007600"
  },
  {
    "text": "get one of our one of our other data centers going again and like we break that one and so and now that data center",
    "start": "2007600",
    "end": "2012760"
  },
  {
    "text": "is not sorry we can't send any traffic to that data center and after a while like we work around and we're like okay",
    "start": "2012760",
    "end": "2019059"
  },
  {
    "text": "well we got we got one other data center going and all those machines are okay we have enough capacity that we can sort of",
    "start": "2019059",
    "end": "2024460"
  },
  {
    "text": "turn the site back on um but that was at 10 in the morning",
    "start": "2024460",
    "end": "2030580"
  },
  {
    "text": "and then it took another 12 hours to uh for the system to like catch up right so this was like super super bad",
    "start": "2030580",
    "end": "2037539"
  },
  {
    "text": "um and but the the good news is uh lots of things that are super bad have a lot",
    "start": "2037539",
    "end": "2042940"
  },
  {
    "text": "to teach us and so so what did we learn uh from this this horrible outage well first thing is we had monitoring",
    "start": "2042940",
    "end": "2050080"
  },
  {
    "text": "but the alert title obscured this is like super valuable piece of information that this was the postgres primary like",
    "start": "2050080",
    "end": "2058060"
  },
  {
    "text": "it just if it had just said that like hey man I know you think your thing is important but the postgres primary is",
    "start": "2058060",
    "end": "2064480"
  },
  {
    "text": "running out of space fast he would have been like duh all right I'll fix it uh so you know that's a super subtle thing",
    "start": "2064480",
    "end": "2071200"
  },
  {
    "text": "like no one had ever thought like maybe we should add that to the to the alert text and also threshold alerts uh",
    "start": "2071200",
    "end": "2078580"
  },
  {
    "text": "nowhere near is useful in this case as the derivative right the rate of change of the disk space would have caught this",
    "start": "2078580",
    "end": "2084520"
  },
  {
    "text": "problem instantly as soon as the engineer uh who rolled out that replication change uh you know like",
    "start": "2084520",
    "end": "2090580"
  },
  {
    "text": "minutes after they've done that the disk space was just plummeting right um they would have noticed like hey that's weird right after I rolled my",
    "start": "2090580",
    "end": "2096520"
  },
  {
    "text": "thing out the rate of change into space is is uh alert went off um so we you know we've since gone and",
    "start": "2096520",
    "end": "2102040"
  },
  {
    "text": "added a ton of derivative alerts which uh which work way better to detect these kinds of things",
    "start": "2102040",
    "end": "2107500"
  },
  {
    "text": "thankfully we made a lot of copies of our critical data right we had all those machines and that allowed us to just",
    "start": "2107500",
    "end": "2113200"
  },
  {
    "text": "like bumble around and just like break stuff and you know and at the end we didn't lose any data like which is pretty great",
    "start": "2113200",
    "end": "2120339"
  },
  {
    "text": "um and boy we should have just we should have been practicing this right we should have run through this run book a few times but the reason that we didn't",
    "start": "2120339",
    "end": "2127420"
  },
  {
    "text": "is because every time you do it there's some interruption in service like there's some amount of time where like",
    "start": "2127420",
    "end": "2133660"
  },
  {
    "text": "users might notice that something is slow or delayed or they might get you know errors might leak or whatever and",
    "start": "2133660",
    "end": "2138880"
  },
  {
    "text": "so we just never practiced it because we were like it's too too invasive right and but you know at a high level oh",
    "start": "2138880",
    "end": "2146440"
  },
  {
    "text": "these special nodes right like it just sucks that there's this one thing that like has all is just so important that",
    "start": "2146440",
    "end": "2152260"
  },
  {
    "text": "you can't ever take it down and also like why are we exposed to the replication internals like the the guts",
    "start": "2152260",
    "end": "2158440"
  },
  {
    "text": "of this like fancy database are just like sitting on the table and they're like hey just go do your own surgery it's fine like no no reason that we",
    "start": "2158440",
    "end": "2165940"
  },
  {
    "text": "would automate any of this you know replication you know relationships um it's just weird that you even know about",
    "start": "2165940",
    "end": "2172599"
  },
  {
    "text": "those files right like the database system should take care of those files so anyway like the special node problem",
    "start": "2172599",
    "end": "2177880"
  },
  {
    "text": "like that's the big problem and so we're not the first people to notice that special nodes are a problematic of course the Dynamo paper uh you know sort",
    "start": "2177880",
    "end": "2184660"
  },
  {
    "text": "of led the way on this and I love this phrase from the beginning of the Dynamo paper that says even the slightest",
    "start": "2184660",
    "end": "2190000"
  },
  {
    "text": "outage has significant financial consequences and impacts customer trust I feel like that was like really sort of",
    "start": "2190000",
    "end": "2197380"
  },
  {
    "text": "seeing into the future of the kind of systems that I think we're all going to be called on to build like as you know",
    "start": "2197380",
    "end": "2202599"
  },
  {
    "text": "things keep scaling right so anyway like Dynamo Dynamo exists and it's it's uh where we get Cassandra that's where we",
    "start": "2202599",
    "end": "2208720"
  },
  {
    "text": "get reock and so you might think like well without you know these special nodes um you know so in these systems you send a request to multiple nodes and",
    "start": "2208720",
    "end": "2215020"
  },
  {
    "text": "if one of them happens to not be not work um the system keeps working like you never notice right so",
    "start": "2215020",
    "end": "2220780"
  },
  {
    "text": "um we're building some new stuff on rioc like would react have saved us from this worst outage ever scenario and turns out",
    "start": "2220780",
    "end": "2228220"
  },
  {
    "text": "no um so one time the react cluster broke and",
    "start": "2228220",
    "end": "2234820"
  },
  {
    "text": "it broke in a really weird way um which is that it turns out we had a network problem and the network problem",
    "start": "2234820",
    "end": "2240220"
  },
  {
    "text": "was was subtle didn't happen very often but they were they were latency problems and uh reox cleverness this is this",
    "start": "2240220",
    "end": "2246880"
  },
  {
    "text": "Dynamo models feature is also a bug in that it obscured the fact that there",
    "start": "2246880",
    "end": "2253359"
  },
  {
    "text": "were that there were slowness that the network was being slow because two of the nodes responded really quickly and",
    "start": "2253359",
    "end": "2259660"
  },
  {
    "text": "um we uh we just we just kept right right now moving unfortunately we also had a misconfiguration which turned out",
    "start": "2259660",
    "end": "2266800"
  },
  {
    "text": "to be like a ton bomb so that uh as things as loaded when our busiest day ever on this cluster uh the these things",
    "start": "2266800",
    "end": "2273940"
  },
  {
    "text": "sort of cascaded and the delays got super bad and our clients did unfortunately exactly the wrong thing uh",
    "start": "2273940",
    "end": "2279579"
  },
  {
    "text": "when database is too slow they just pushed harder which made the database slower which made them push harder and",
    "start": "2279579",
    "end": "2285160"
  },
  {
    "text": "just after a while like the whole thing just runs out of you know half a million file descriptors or whatever and",
    "start": "2285160",
    "end": "2291540"
  },
  {
    "text": "sadly the delay Cascades all the way to the front end and all of China was down",
    "start": "2291540",
    "end": "2297400"
  },
  {
    "text": "for like 10 minutes super bad so luckily we still had the old uh the old system was there we could",
    "start": "2297400",
    "end": "2303700"
  },
  {
    "text": "flip the switch back and and like thank goodness we still had that old one there because it would have been uh really",
    "start": "2303700",
    "end": "2308920"
  },
  {
    "text": "really hard if we had to sort of somehow dig our way out of this and fix it so what did we learn from this like well we",
    "start": "2308920",
    "end": "2314859"
  },
  {
    "text": "do failure testing right we failed these nodes and and it resists you know those failures so that's pretty good but uh we",
    "start": "2314859",
    "end": "2321339"
  },
  {
    "text": "should have done delay testing like if we had been doing delay testing on the database and on the clients we would",
    "start": "2321339",
    "end": "2326560"
  },
  {
    "text": "have seen like uh oh the clients are misconfigured they're making the problem worse when the database is too slow and",
    "start": "2326560",
    "end": "2331960"
  },
  {
    "text": "just like in general this kind of back pressure is super hard like it's just hard to get these things right and",
    "start": "2331960",
    "end": "2338560"
  },
  {
    "text": "there's there's sort of no good no good General case answer for this like this is just a a thing we just have to keep",
    "start": "2338560",
    "end": "2345040"
  },
  {
    "text": "reminding ourselves like this stuff is just hard and on the metrics that come out of like uh like a Rio Cassandra",
    "start": "2345040",
    "end": "2352240"
  },
  {
    "text": "there are tons of metrics in these things but they're all like really really hard to understand because you can't just like stack Overflow your way",
    "start": "2352240",
    "end": "2358839"
  },
  {
    "text": "to success you like look at these metrics and you're like wonder what that means um turns out uh riak was telling us",
    "start": "2358839",
    "end": "2366339"
  },
  {
    "text": "um something about this this delay masking thing uh we just weren't we didn't understand what that metric meant and it wasn't on the grass there were no",
    "start": "2366339",
    "end": "2373119"
  },
  {
    "text": "alerts on it we're just like that's some weird react thing um turns out um if we had uh been looking at that we could",
    "start": "2373119",
    "end": "2378640"
  },
  {
    "text": "have you know saved ourselves from this problem so really I feel like the place that we want to get to",
    "start": "2378640",
    "end": "2385060"
  },
  {
    "text": "um with with you know the the high level point that I come to from from observing these kind of failures is that we want",
    "start": "2385060",
    "end": "2391060"
  },
  {
    "text": "to move to a world that's crash only where we don't have like graceful shutdown and special nodes and and where",
    "start": "2391060",
    "end": "2398140"
  },
  {
    "text": "where if where you're never afraid to just kill something just take it out of service you shut it down like you you",
    "start": "2398140",
    "end": "2404440"
  },
  {
    "text": "the freedom to do that um is is what helps us you know insulate our users from really you know actual",
    "start": "2404440",
    "end": "2411220"
  },
  {
    "text": "big failures but but it also allows us to move faster because we're not afraid of like accidentally tripping over some",
    "start": "2411220",
    "end": "2417820"
  },
  {
    "text": "super special node but and what I find is people can sort of get on board with",
    "start": "2417820",
    "end": "2423220"
  },
  {
    "text": "this but when it comes down to like what it will actually take to implement this there's a real it's not even really a a",
    "start": "2423220",
    "end": "2429420"
  },
  {
    "text": "technical problem it's like a cultural problem that to build systems that can be crash only it requires people to",
    "start": "2429420",
    "end": "2436599"
  },
  {
    "text": "think differently about how their system should work um one example is retries right if you",
    "start": "2436599",
    "end": "2441640"
  },
  {
    "text": "want to if you want to resist failure testing and not leak these things out um to your users like you're gonna have",
    "start": "2441640",
    "end": "2447460"
  },
  {
    "text": "to be able to retry your stuff like it means all of your requests have to be item potent and like that kind of like",
    "start": "2447460",
    "end": "2453880"
  },
  {
    "text": "hurts people's brains but like it is possible to make all of your requests and potent and that's",
    "start": "2453880",
    "end": "2458920"
  },
  {
    "text": "a thing you got to do if you want to if you want to sort of live in this world and another big sort of objection uh to",
    "start": "2458920",
    "end": "2465339"
  },
  {
    "text": "to these kind of big micro service deployments and and sort of doing failure testing a lot is is man this is",
    "start": "2465339",
    "end": "2471220"
  },
  {
    "text": "gonna surely this is gonna like slow everything down right um because you know these these systems have this really interesting property",
    "start": "2471220",
    "end": "2476800"
  },
  {
    "text": "that like if you have like a system that generally runs fast but it has kind of like a slow mode every now and then like",
    "start": "2476800",
    "end": "2482380"
  },
  {
    "text": "one percent of your requests are slow if you involve a lot of them uh it turns out that your thing your users find the",
    "start": "2482380",
    "end": "2488859"
  },
  {
    "text": "Slow case much more quickly and um there's there's the formula and oops if you look at uh that's the P99 I",
    "start": "2488859",
    "end": "2496420"
  },
  {
    "text": "showed you there but if you if you the slow case hits on the P95 like you run into the slow case much more quickly so",
    "start": "2496420",
    "end": "2502359"
  },
  {
    "text": "uh you know and with 700 you know services like you can imagine this is coming up a lot and especially if we",
    "start": "2502359",
    "end": "2508900"
  },
  {
    "text": "want to start doing failure testing on them like whatever can we do well the folks at Google have been talking about",
    "start": "2508900",
    "end": "2514480"
  },
  {
    "text": "this for a little while um they have this there's this great presentation from Jeff Dean you should check out the the basic idea is that we took from this",
    "start": "2514480",
    "end": "2521560"
  },
  {
    "text": "is the thing that they call backup requests with cross server cancellation and the way that it works is you send",
    "start": "2521560",
    "end": "2527680"
  },
  {
    "text": "you send an RPC and you can send it to um to you know B1 or B2 there you'll get the same answer",
    "start": "2527680",
    "end": "2533440"
  },
  {
    "text": "um and uh when you send your request to B1 you say by the way I also sent it to B2 and then you know some milliseconds",
    "start": "2533440",
    "end": "2538720"
  },
  {
    "text": "later maybe five you know it's some magic number later you send it to to B2 and you say by the way I said also send this to B1 and then whoever goes to work",
    "start": "2538720",
    "end": "2545500"
  },
  {
    "text": "on this first they cancel it from the other one and so that way if B1 or B2 experience some random GC pause or you",
    "start": "2545500",
    "end": "2552040"
  },
  {
    "text": "just you destroy them or whatever um the most that your users end up having to wait is five milliseconds",
    "start": "2552040",
    "end": "2558280"
  },
  {
    "text": "because the request will get run somewhere else so that's a pretty good that's pretty",
    "start": "2558280",
    "end": "2563380"
  },
  {
    "text": "interesting technique and it starts to sound a lot like the Dynamo model like the in the dyno model you send a request",
    "start": "2563380",
    "end": "2569859"
  },
  {
    "text": "to multiple nodes and if one of them doesn't get back to you it's no big deal as long as you hear back from two of them uh off you go",
    "start": "2569859",
    "end": "2576460"
  },
  {
    "text": "um that's it's an interesting sort of uh sort of symmetry there so so that's kind",
    "start": "2576460",
    "end": "2581500"
  },
  {
    "text": "of you know what we're thinking about like how we're thinking about like handling uh these sorts of problems but",
    "start": "2581500",
    "end": "2586900"
  },
  {
    "text": "like what about if a whole data center were to fail so or you know you think data center I mean if you know just",
    "start": "2586900",
    "end": "2592599"
  },
  {
    "text": "think you know availability zone or or whatever like like how how are we going to handle a big chunk of machines all",
    "start": "2592599",
    "end": "2600040"
  },
  {
    "text": "going down at once and so what we've done is started to think about our our distributed system as extending all the",
    "start": "2600040",
    "end": "2606400"
  },
  {
    "text": "way out to our mobile phones and we involve the the driver app in this",
    "start": "2606400",
    "end": "2611560"
  },
  {
    "text": "transaction and so if you imagine that uh well excuse me partner app uh in the",
    "start": "2611560",
    "end": "2617200"
  },
  {
    "text": "in the transaction so if this this partner app is making progress on a trip right it's cruising along it's every every few seconds it's setting up its",
    "start": "2617200",
    "end": "2623380"
  },
  {
    "text": "GPS trace and uh sending it to the the primary data center what we do is in the",
    "start": "2623380",
    "end": "2628480"
  },
  {
    "text": "primary data center we have some cryptographic credentials which we encrypt the state digest and we",
    "start": "2628480",
    "end": "2633760"
  },
  {
    "text": "periodically send it back down to the phone and then if we need to fail you over to a different um a different data",
    "start": "2633760",
    "end": "2640540"
  },
  {
    "text": "center um you know dc2 in this case the the partner app starts trying to make progress on that one and that doesn't",
    "start": "2640540",
    "end": "2647200"
  },
  {
    "text": "have never heard of this trip and so it of course has the same uh credentials and it says hey please send me your uh",
    "start": "2647200",
    "end": "2655060"
  },
  {
    "text": "State your state so far and so we we actually use this uh for for more than just um failing over between data",
    "start": "2655060",
    "end": "2661960"
  },
  {
    "text": "centers we use this you know even within a data center just to move traffic around um so that we don't have to have",
    "start": "2661960",
    "end": "2667540"
  },
  {
    "text": "replicas you know we don't have to replicate the state I mean these high-res GPS traces to to many different",
    "start": "2667540",
    "end": "2673839"
  },
  {
    "text": "places we sort of move them around by by storing a lot of this data like inside the partner app so that's kind of an",
    "start": "2673839",
    "end": "2680079"
  },
  {
    "text": "interesting technique but you know really at the end of the day like the biggest problem we have with all these systems and like the thing that causes",
    "start": "2680079",
    "end": "2686200"
  },
  {
    "text": "the most problems is of course the people the most the most reliable that our system ever gets is Saturday and",
    "start": "2686200",
    "end": "2692440"
  },
  {
    "text": "Sunday because there's no one changing anything on Saturday and Sunday right like if we could just have a system that",
    "start": "2692440",
    "end": "2697900"
  },
  {
    "text": "was reliable as it is on Saturday and Sunday like we wouldn't have any of these any of these crazy problems and",
    "start": "2697900",
    "end": "2703119"
  },
  {
    "text": "you know it turns out as you look around like this is sort of what causes like all big problems right like human error",
    "start": "2703119",
    "end": "2708640"
  },
  {
    "text": "causes you know so all the apocalypse or whatever um but you know that's that's the problem",
    "start": "2708640",
    "end": "2715599"
  },
  {
    "text": "is that uh as we we work with these systems that's when we break them it's far more uh you know the the impact of",
    "start": "2715599",
    "end": "2722560"
  },
  {
    "text": "these of these sort of human error style changes is usually much much larger than some accidental software bug or some",
    "start": "2722560",
    "end": "2728980"
  },
  {
    "text": "kind of weird thing that happens one in a million times it's usually when a human comes along and misconfigures something that uh that everything breaks",
    "start": "2728980",
    "end": "2736240"
  },
  {
    "text": "and that I believe is why we should think about this kind of failure testing",
    "start": "2736240",
    "end": "2741579"
  },
  {
    "text": "as and you know in Crash only design is like how we build systems in general because the people are going to come",
    "start": "2741579",
    "end": "2748720"
  },
  {
    "text": "along and accidentally Break It Anyway so so I feel like that gets us into a",
    "start": "2748720",
    "end": "2754300"
  },
  {
    "text": "better place where where our systems can just be more reliable and I think if you if you if you you know consider the the",
    "start": "2754300",
    "end": "2760900"
  },
  {
    "text": "principles of chaos thing like I think a lot of people they look at some of these these turbulent conditions and they want",
    "start": "2760900",
    "end": "2767200"
  },
  {
    "text": "to try to tame them right they want to try to eliminate the chaos and I feel like that's not actually possible I",
    "start": "2767200",
    "end": "2773740"
  },
  {
    "text": "think that where where we find ourselves is needing to live with this sort of K",
    "start": "2773740",
    "end": "2780040"
  },
  {
    "text": "this chaotic system and make a reliable system on top of it and that is uh",
    "start": "2780040",
    "end": "2785800"
  },
  {
    "text": "that's all I have thanks a lot [Applause]",
    "start": "2785800",
    "end": "2793320"
  }
]