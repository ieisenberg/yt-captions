[
  {
    "text": "[Music] [Applause]",
    "start": "6990",
    "end": "12639"
  },
  {
    "text": "so yeah you're going to get two talks for the price of one here because I'm going to talk about Bor to get us started and then explain how that fed",
    "start": "12639",
    "end": "19160"
  },
  {
    "text": "into our open source kubernetes project that we is now available on GitHub so quick question has anybody here used",
    "start": "19160",
    "end": "25880"
  },
  {
    "text": "Gmail or Google web search or Google doc or okay fine those things those things",
    "start": "25880",
    "end": "33879"
  },
  {
    "text": "run on Borg pretty much everything inside Google except Borg itself runs on top of B it's our container management",
    "start": "33879",
    "end": "40360"
  },
  {
    "text": "engine a sort of coordination thing for the Clusters so I need to say one time just to keep the lawyers happy that this",
    "start": "40360",
    "end": "46680"
  },
  {
    "text": "the system we internally call Borg to avoid trademark issues but uh no we got",
    "start": "46680",
    "end": "52359"
  },
  {
    "text": "that out of the way great um and the other thing I need to say is that I'm just the guy standing up here with the",
    "start": "52359",
    "end": "58760"
  },
  {
    "text": "slides the these people did all the work that I'm going to describe so if you have any questions you can ask any of",
    "start": "58760",
    "end": "65400"
  },
  {
    "text": "them and I'm sure they'll be delighted to answer anything that you can come up with so you probably know because you've",
    "start": "65400",
    "end": "72159"
  },
  {
    "text": "seen this on the web that there is a bunch of Google data centers scattered across the globe here's the last set of",
    "start": "72159",
    "end": "77400"
  },
  {
    "text": "pins that I found from a few months back uh you know we're adding new ones every now and again um those things are big",
    "start": "77400",
    "end": "84240"
  },
  {
    "text": "and they're getting bigger we used to build sort of football uh field size data centers but that got eh so now",
    "start": "84240",
    "end": "90079"
  },
  {
    "text": "we're building four floor football field size data centers cuz one floor isn't enough apparently uh this is a artist",
    "start": "90079",
    "end": "97360"
  },
  {
    "text": "rendition of what the one in Singapore is going to look like see the old one on the right hand side and the new shiny one on the left um for Scale tree other",
    "start": "97360",
    "end": "104960"
  },
  {
    "text": "tree car Etc these things are absolutely enormous I mean I've been in one and it",
    "start": "104960",
    "end": "110079"
  },
  {
    "text": "just keeps on going and going and going and you sort of think surely no it keeps on going and going um fortunately nobody",
    "start": "110079",
    "end": "117079"
  },
  {
    "text": "actually you know very few people have to go inside these things they're loud they're hot they're noisy and really not",
    "start": "117079",
    "end": "122200"
  },
  {
    "text": "a nice place to work there's large amounts of bare metal with sharp edges on them so you don't want software",
    "start": "122200",
    "end": "127240"
  },
  {
    "text": "Engineers anywhere near bare metal with sharp edges on it right you know it's going to be",
    "start": "127240",
    "end": "132400"
  },
  {
    "text": "bad um pretty pictures get happen before we let anybody into them or before we do any upgrades so this is a brand new",
    "start": "132400",
    "end": "138720"
  },
  {
    "text": "shiny data center it's never going to be this regular again uh back then whoops",
    "start": "138720",
    "end": "144760"
  },
  {
    "text": "we that was exciting um this thing here is is the the networking racks that we",
    "start": "144760",
    "end": "150000"
  },
  {
    "text": "actually published a paper about more recently so since we took this Photograph we've actually been able to talk about what's behind the curtain um",
    "start": "150000",
    "end": "156040"
  },
  {
    "text": "but what I'm going to do is to talk about what it's like as a an internal user for that big toy sorry a data",
    "start": "156040",
    "end": "162440"
  },
  {
    "text": "center tool that we have available um think by the way for scale we're talking",
    "start": "162440",
    "end": "168120"
  },
  {
    "text": "a couple hundred million dollars worth of Kit so it's kind of useful for us to try",
    "start": "168120",
    "end": "173200"
  },
  {
    "text": "and make sure we use it efficiently and that's really where Bard comes in so here's the user experience so I I as a",
    "start": "173200",
    "end": "179760"
  },
  {
    "text": "as a user of this stuff you don't thankfully go into this data center you sit at your desktop and you type away and you generate a sort of configuration",
    "start": "179760",
    "end": "185040"
  },
  {
    "text": "file here's a description of what I want to have runw and I cast around for a really good example that would display",
    "start": "185040",
    "end": "190760"
  },
  {
    "text": "all the subtleties and complexities of the things we do inside Google and I found hello",
    "start": "190760",
    "end": "197080"
  },
  {
    "text": "world which is a nice use case you get to do when you first join you get to do these code Labs which are follow along",
    "start": "197080",
    "end": "203159"
  },
  {
    "text": "with me while we go try to break the world in this case just run hello world somewhere so what you write is a",
    "start": "203159",
    "end": "209080"
  },
  {
    "text": "configuration file I'm going to give you a sort of a rendition of it it's about the right scale for for this particular app and you say first of all it's a job",
    "start": "209080",
    "end": "215720"
  },
  {
    "text": "well a job for us is just a collection of tasks a task is a is a container running a Linux um process group and a",
    "start": "215720",
    "end": "224239"
  },
  {
    "text": "job is just a collection of basically identical tasks so first of all you name your job and then you say I'd like to",
    "start": "224239",
    "end": "230319"
  },
  {
    "text": "run it somewhere and you get to pick a cell so I talked moment ago about clusters and we actually have a",
    "start": "230319",
    "end": "235360"
  },
  {
    "text": "terminology difference a cluster for us is a pile of networking sorry a pile of machines connected to byy a highspeed network in one building one building",
    "start": "235360",
    "end": "242920"
  },
  {
    "text": "fabric a cell is a lump of those machines carved out as a single management unit for Borg so typically",
    "start": "242920",
    "end": "249400"
  },
  {
    "text": "you'll have one big cell in each cluster clusters have two letter names therefore most Bor cells have two letter names",
    "start": "249400",
    "end": "255879"
  },
  {
    "text": "there's a few exceptions um and why would you do that well because these are units of management and control and",
    "start": "255879",
    "end": "262400"
  },
  {
    "text": "occasionally people screw up my colleague I will not name him uh one of my SRE colleagues did the um wanted to",
    "start": "262400",
    "end": "269880"
  },
  {
    "text": "drain one of these cells which means take everything all the applications that are running in it and turn them off so we can do something drastic to the",
    "start": "269880",
    "end": "275440"
  },
  {
    "text": "cell like maintain it so he typed the command on the command line to drain the cell and hit enter and then went off to",
    "start": "275440",
    "end": "280759"
  },
  {
    "text": "the website to sort of check that the right thing had happened and nothing had changed H so like any good software",
    "start": "280759",
    "end": "287520"
  },
  {
    "text": "engineer he just type the same command again and hit enter and it turned out that he had",
    "start": "287520",
    "end": "293960"
  },
  {
    "text": "drained a cell just not that cell for calibration a mediumsized cell",
    "start": "293960",
    "end": "301400"
  },
  {
    "text": "is 10,000 machines so accidents happen and you",
    "start": "301400",
    "end": "306880"
  },
  {
    "text": "would rather not have one command line take down the whole of a large site for us like Atlanta which is a",
    "start": "306880",
    "end": "312560"
  },
  {
    "text": "multi-building site with multiple cells inside it so you get to pick a cell a cell is just a place where you get to run one of these these these jobs um and",
    "start": "312560",
    "end": "320120"
  },
  {
    "text": "then you get to say things like here's my program which typically we compile ahead of time in the cloud you get to",
    "start": "320120",
    "end": "325639"
  },
  {
    "text": "say a few time command line arguments to this thing and one particular particular thing that we do for hello world is",
    "start": "325639",
    "end": "331319"
  },
  {
    "text": "going to be a web server um is we have to tell it which port to serve on because it might be that two or three of my Hello World instances will end up on",
    "start": "331319",
    "end": "338360"
  },
  {
    "text": "the same machine so they can't all serve on Port 80 so this is just a syntax to say B pick a port for me and we do this",
    "start": "338360",
    "end": "345080"
  },
  {
    "text": "because we back when this was done we only had ipv4 addresses so we had to find some way to share the port space",
    "start": "345080",
    "end": "351039"
  },
  {
    "text": "and this is the way to do it just get bored to do the work and then you could choose to specify things like how much memory how",
    "start": "351039",
    "end": "358039"
  },
  {
    "text": "much disc space how much C CPU Cycles to use in terms of cores um that you would like your application to to to have",
    "start": "358039",
    "end": "364840"
  },
  {
    "text": "access to um 100 makes sounds a little large and it turns out that's because we do statically link binaries because they",
    "start": "364840",
    "end": "371039"
  },
  {
    "text": "survive things like OS upgrades they just keep on um so hello world is something like 70 megabytes I think",
    "start": "371039",
    "end": "378639"
  },
  {
    "text": "we got a lot of stuff in there for example every pretty much every application that you run inside Google even hello world has a little web server",
    "start": "378639",
    "end": "385080"
  },
  {
    "text": "built into it for things like what is its RPC performance like what's it memory usage like give me a little graph",
    "start": "385080",
    "end": "391680"
  },
  {
    "text": "of how long it took to do various things and all of those things are available in the monitoring system and that's how the rest of the monitoring system finds out",
    "start": "391680",
    "end": "397759"
  },
  {
    "text": "what's going on and draws nice pretty little graphs that our s friends look at and then you can say sort of how many",
    "start": "397759",
    "end": "404599"
  },
  {
    "text": "copies how many replicas of this task would I like so five seems a reasonable number of hello world just to get it started hold on why am I being",
    "start": "404599",
    "end": "413960"
  },
  {
    "text": "reasonable let's try something more interesting so I did um actually from",
    "start": "413960",
    "end": "419240"
  },
  {
    "text": "home home I just got home got off the bus opened up my laptop typed in the command sort of B config and said great",
    "start": "419240",
    "end": "425199"
  },
  {
    "text": "let's fire off 10,000 copies of hello world in some random cell I think IC is in Iowa but I had to actually look it up",
    "start": "425199",
    "end": "431199"
  },
  {
    "text": "I the first time I ran this this uh thing I it told me to use you know some cell and I had no idea where it was some",
    "start": "431199",
    "end": "437800"
  },
  {
    "text": "months later I found out it was in Belgium I mean you really don't care right you care about things like where",
    "start": "437800",
    "end": "443599"
  },
  {
    "text": "it is for your end user lences you care about making sure you've got enough copies of them scattered across the planet so if one of them goes down the",
    "start": "443599",
    "end": "448960"
  },
  {
    "text": "other up but you really mean just two letter names is what you changed to cause that that",
    "start": "448960",
    "end": "454000"
  },
  {
    "text": "differentiation so this is what happened so then I went how am I going to display to anybody hello world right 10,000 copies is a bit tedious to go type type",
    "start": "454000",
    "end": "460720"
  },
  {
    "text": "on so what I found inste was just a I went to the Bor Master which is sort of central control for each cell and said",
    "start": "460720",
    "end": "465879"
  },
  {
    "text": "how many copies of my hello world are you running and here's the graph of the lapse time number of copies in the y- axis time along here and it took 2 and a",
    "start": "465879",
    "end": "472800"
  },
  {
    "text": "half minutes to go from zero to 10,000 copies of hello",
    "start": "472800",
    "end": "478319"
  },
  {
    "text": "world and my reaction was good grief that slow I've been at Google too long I've",
    "start": "478319",
    "end": "484680"
  },
  {
    "text": "been spoiled um there's a couple of reasons for that so I don't I didn't actually dig down in",
    "start": "484680",
    "end": "490639"
  },
  {
    "text": "gory detail but the rough rough gist of it as follows I run hello world at the lowest possible priority which means if",
    "start": "490639",
    "end": "496199"
  },
  {
    "text": "there was any other useful work that cell could be doing it would do that first right so I'm of the lowest thing it's going to get Rand dealing with then",
    "start": "496199",
    "end": "502479"
  },
  {
    "text": "the other is probably I only just compiled it so it hadn't had a chance to sort of propagate the the the 70 Mega",
    "start": "502479",
    "end": "507840"
  },
  {
    "text": "binary to a great many different storage servers so we're probably bandwidth",
    "start": "507840",
    "end": "513080"
  },
  {
    "text": "limited on the smallest number of storage servers that have the relevant bits of my binary once you got it into",
    "start": "513080",
    "end": "518560"
  },
  {
    "text": "memory then sort of we just a bit torr like tree distribution but if the source is still single bottleneck then it turns",
    "start": "518560",
    "end": "524080"
  },
  {
    "text": "out it's it's a bit of an issue and spread over two and a half minutes it turns out that not everything",
    "start": "524080",
    "end": "529120"
  },
  {
    "text": "is is uh is does the bit torrent distribution as quickly as possible so that's still pretty nice you know 0 to",
    "start": "529120",
    "end": "534480"
  },
  {
    "text": "10,000 with just I could change the 10,000 to 4,000 or something 10,000 was the maximum I was put permitted it",
    "start": "534480",
    "end": "539640"
  },
  {
    "text": "turned out so that's why I picked it by the way I didn't have to ask anybody for permission I just did this just for fun",
    "start": "539640",
    "end": "546360"
  },
  {
    "text": "I did remember to take it down afterwards so what happened behind the scenes so this is a picture of a B cell",
    "start": "546360",
    "end": "551880"
  },
  {
    "text": "you know one particular rendition of it across the bottom here we have machines each one of them runs an agent called",
    "start": "551880",
    "end": "557399"
  },
  {
    "text": "the borlet which is sort of keeps an eye on what's going on on that machine and the center of the picture is uh I think",
    "start": "557399",
    "end": "562720"
  },
  {
    "text": "called the bormaster which is the as you might expect it's the thing in charge of the of the cell we actually keep five",
    "start": "562720",
    "end": "568480"
  },
  {
    "text": "copies of it because you know things break in fact one of the themes of this talk is going to be you know things",
    "start": "568480",
    "end": "573880"
  },
  {
    "text": "Break um you got to get used to that we look like we stay up from the outside and we get sort of four NES four and a",
    "start": "573880",
    "end": "580240"
  },
  {
    "text": "half nines reliability from from the exterior because we assume that everything on the inside is falling",
    "start": "580240",
    "end": "585760"
  },
  {
    "text": "apart right this is the only way we get the reliability of the outside we just do not tolerate single points of failure",
    "start": "585760",
    "end": "592600"
  },
  {
    "text": "and I include things like data centers as a single point of failure in that analysis except for hello world I only",
    "start": "592600",
    "end": "598320"
  },
  {
    "text": "ran it in one place um so what happened at the beginning is",
    "start": "598320",
    "end": "604440"
  },
  {
    "text": "that I pre-compiled my binary and I sort I ran a a parallel compilation activity that ran somewhere in the cloud I don't",
    "start": "604440",
    "end": "609800"
  },
  {
    "text": "know where it ran I don't care I don't have to know it just executed um the tool that used to decide what to execute",
    "start": "609800",
    "end": "616720"
  },
  {
    "text": "uh is internally called Blaze externally it's called basil and you can get it yourself right if you haven't looked at it yet um correct fast pick any2 is",
    "start": "616720",
    "end": "625360"
  },
  {
    "text": "their slogan uh it's a spectacularly good sort of automatic dependency analysis it makes look make look sort of you know so",
    "start": "625360",
    "end": "632360"
  },
  {
    "text": "last century it just works it just get everything right anyway so that was used",
    "start": "632360",
    "end": "637920"
  },
  {
    "text": "to to compile all of these bits and pieces and then I took that configuration file I showed you and ran a command called board config up which",
    "start": "637920",
    "end": "645639"
  },
  {
    "text": "says I want to bring up a copy of that that uh that job and that we did an RPC",
    "start": "645639",
    "end": "651399"
  },
  {
    "text": "to the borm in C IC I did a few checks first to make sure I was allowed to do this and the bul master took a copy of",
    "start": "651399",
    "end": "658480"
  },
  {
    "text": "that request and wrote it to a persistant store so we happen to use paau internally which is one reason why five copies is a magic useful number",
    "start": "658480",
    "end": "665160"
  },
  {
    "text": "paau works well with that and BM wrote it but representation of John wants to run 10,000 copies of hello world down to",
    "start": "665160",
    "end": "671920"
  },
  {
    "text": "paxos and replied saying got it success I have received your request",
    "start": "671920",
    "end": "678720"
  },
  {
    "text": "I haven't done anything about it yet but I've received your request so now if my client Falls over bulg Master is going",
    "start": "678720",
    "end": "684279"
  },
  {
    "text": "to keep going if one of the copies of bulg Master Falls over one of the other four copies will pick up and keep",
    "start": "684279",
    "end": "690639"
  },
  {
    "text": "going there some little time later a separate process happens um runs aul and",
    "start": "690639",
    "end": "697040"
  },
  {
    "text": "it has an inmemory copy of that persistence State and it looks at the copy of the persistance state and says",
    "start": "697040",
    "end": "702360"
  },
  {
    "text": "huh that's funny there's a request here from John to run 10,000 copies of hello world and I can't find a single one of",
    "start": "702360",
    "end": "707560"
  },
  {
    "text": "them with a place to run H let's fix that so in batches of order of magnitude",
    "start": "707560",
    "end": "713279"
  },
  {
    "text": "200 at a time it goes and finds places sort of the right sized hole somewhere on that cell of 10,000 machines and",
    "start": "713279",
    "end": "720440"
  },
  {
    "text": "Records the fact that it wants to run one copy here one copy there two copies there and writes that out to the",
    "start": "720440",
    "end": "725760"
  },
  {
    "text": "persistent store and then goes back and see if it has anything else to do and repeats just keeps on going over a couple a couple of",
    "start": "725760",
    "end": "732279"
  },
  {
    "text": "minutes in particular it goes back and sees does anybody have any real work that I could do because you know hello world's so",
    "start": "732279",
    "end": "738279"
  },
  {
    "text": "boring some little while later yet another component inside the bog Master called the link Shard and there's sort",
    "start": "738279",
    "end": "744320"
  },
  {
    "text": "of we actually um this basically goes around and pulls all of the borets right so we got five copies of the B Master we",
    "start": "744320",
    "end": "750279"
  },
  {
    "text": "just divide the work by five so each B Master instance runs five of them runs a set of Link shards they talk talk to",
    "start": "750279",
    "end": "756880"
  },
  {
    "text": "borlet and said so what are you running now and they great borlet reports back here's what I'm doing and the link Shard",
    "start": "756880",
    "end": "762880"
  },
  {
    "text": "Compares that with a copy of the persistant State and said huh that's funny you should be running a copy of John's hello world let's fix that so it",
    "start": "762880",
    "end": "769680"
  },
  {
    "text": "sends down the command to the borlet to go grab itself a copy of hello world from the binary and start running it and",
    "start": "769680",
    "end": "776240"
  },
  {
    "text": "that's basically how you get to 10,000 copies of hello world I didn't check all 10,000 I did check a few and they were",
    "start": "776240",
    "end": "783279"
  },
  {
    "text": "there and they all said hello world okay it wasn't I told you it wasn't that exciting a demo but it was a",
    "start": "783279",
    "end": "789920"
  },
  {
    "text": "great way of telling the story um I drew that line quite thick for a",
    "start": "789920",
    "end": "798800"
  },
  {
    "text": "couple of reasons one is so it would show up nicely on the graph and the second is to Eli a little bit of",
    "start": "798800",
    "end": "804160"
  },
  {
    "text": "information about exactly what's going on 10,000 turns out to be very large and at this scale 10,000 pixels don't fit",
    "start": "804160",
    "end": "810720"
  },
  {
    "text": "nicely on the screen so what's actually happening at the top is that it never quite got to 10,000 copies the biggest",
    "start": "810720",
    "end": "817320"
  },
  {
    "text": "number I ever saw was 9,993 and I sort of watched it for 15 20 minutes or so hm that's odd so here's",
    "start": "817320",
    "end": "825160"
  },
  {
    "text": "just a a screen snapshot of of the part of the borm um UI so of the seven things",
    "start": "825160",
    "end": "832040"
  },
  {
    "text": "that are missing uh one of them is pending which means it's waiting for the scheduler to find a place for it and",
    "start": "832040",
    "end": "838399"
  },
  {
    "text": "five of them are in setup which is basically that stage of copying over the bits from uh from for the binary to run",
    "start": "838399",
    "end": "844000"
  },
  {
    "text": "and one of them has sort of disappeared Into The Ether it'll come back it just doesn't show up on this part of the of the picture",
    "start": "844000",
    "end": "850000"
  },
  {
    "text": "what what could possibly be happening here well this is a picture of what life",
    "start": "850000",
    "end": "855120"
  },
  {
    "text": "is like if you're a task running in one of these environments so the horizontal axis is basically how often bad stuff",
    "start": "855120",
    "end": "862000"
  },
  {
    "text": "will happen to you measured in number of times per ex per uh week of running time",
    "start": "862000",
    "end": "870680"
  },
  {
    "text": "the top the top bar on the left is short if you're a production job you're running at priority 200ish or",
    "start": "871279",
    "end": "877399"
  },
  {
    "text": "thereabouts which is what we use to define things like uh web search and Google Docs and Gmail and all those kind",
    "start": "877399",
    "end": "883480"
  },
  {
    "text": "of things you actually use for real life is pretty good the number of interruptions you get is quite small in",
    "start": "883480",
    "end": "889560"
  },
  {
    "text": "particular once you found a space almost nobody else is going to evict you the only people that will be able to evict",
    "start": "889560",
    "end": "895199"
  },
  {
    "text": "you are the only task be able to evict you are higher priority ones and the only ones higher priority from production are the monitoring system",
    "start": "895199",
    "end": "902639"
  },
  {
    "text": "right so monitoring system is the most important thing that we run everything else is just something you keep an eye",
    "start": "902639",
    "end": "908079"
  },
  {
    "text": "on oh by the way they have side effects like Google Docs but why does that go down well",
    "start": "908079",
    "end": "914120"
  },
  {
    "text": "because we do an OS upgrade on every machine about once a month and that turns out to be enough to",
    "start": "914120",
    "end": "919480"
  },
  {
    "text": "call that cause that rate of evictions so basically everything that's running on that machine has to be killed because",
    "start": "919480",
    "end": "924839"
  },
  {
    "text": "we're going to do a reboot so we tap them on the shoulder and saying you're about to be killed",
    "start": "924839",
    "end": "930160"
  },
  {
    "text": "and if they do something about it that's great if they don't do something about it we kill them if you're not a production task if",
    "start": "930160",
    "end": "936880"
  },
  {
    "text": "you're lower priority than than 120 like if you're a I don't know a batch job or even at the bottom of the pile if your",
    "start": "936880",
    "end": "942360"
  },
  {
    "text": "hello world then any production job that shows up that wants the resources you're using",
    "start": "942360",
    "end": "947920"
  },
  {
    "text": "wins if you don't get out of the way you will be moved out of the way how do we do that we kill",
    "start": "947920",
    "end": "954000"
  },
  {
    "text": "you there's a theme here right it's quite easy um so your life is less fun this is actually average across all of",
    "start": "954000",
    "end": "959959"
  },
  {
    "text": "the nonproduction bands and as you'll see over here you know we're talking order of magnitude eight evictions per task week well I told you 10,000 was a",
    "start": "959959",
    "end": "968000"
  },
  {
    "text": "lot 10,000 tasks running simultaneously is burning about a task week a",
    "start": "968000",
    "end": "975240"
  },
  {
    "text": "minute so we expect to see order of magnitude half a dozen to a dozen evictions per minute on my sets of Hello",
    "start": "975240",
    "end": "981959"
  },
  {
    "text": "World stuff probably a little higher because uh I'm lower priority than this average represent so all we just were",
    "start": "981959",
    "end": "988120"
  },
  {
    "text": "watching before was the natural churn of somebody else coming in wanting the resources of my hello world was squatting on and saying get out of the",
    "start": "988120",
    "end": "994600"
  },
  {
    "text": "way repeat um and it takes about 30 seconds is or so to copy over a few tens of",
    "start": "994600",
    "end": "1000880"
  },
  {
    "text": "megabytes of binary to put them onto the local disc to start up the new copy of it so that all that was happening it was just gentle churn taking place inside",
    "start": "1000880",
    "end": "1008040"
  },
  {
    "text": "the environment and this is normal I mean this is the one change that I found",
    "start": "1008040",
    "end": "1013360"
  },
  {
    "text": "when I went into Google from my previous life I used to do high reliability storage systems for living and we were",
    "start": "1013360",
    "end": "1018720"
  },
  {
    "text": "quite proud at the fact of course they were storage systems of course they would leave they wouldn't lose data and then we worried about how to make them fast and cost effective and I get to",
    "start": "1018720",
    "end": "1025038"
  },
  {
    "text": "Google and people say fast cost effective yes we can do that brute force is a powerful tool now let's talk about",
    "start": "1025039",
    "end": "1030079"
  },
  {
    "text": "when things break and all of the design discussions are about when things",
    "start": "1030079",
    "end": "1035678"
  },
  {
    "text": "break because this is happening but because we write software to cope with this happening it looks like the",
    "start": "1035679",
    "end": "1042798"
  },
  {
    "text": "aggregate set of things stays up all the time because you can't rely on any single thing being up you cannot get",
    "start": "1042799",
    "end": "1049520"
  },
  {
    "text": "attached to any instance of what you're running so the result is if you're running let's say I mean Google Calendar",
    "start": "1049520",
    "end": "1055840"
  },
  {
    "text": "what what one point was around this scale an instance of Google C touch his aut magnitude 2,000 machines you will",
    "start": "1055840",
    "end": "1062600"
  },
  {
    "text": "see even if you're production tasks you'll see about 10 of those Vanishing a day nobody gets paged this is perfectly",
    "start": "1062600",
    "end": "1070039"
  },
  {
    "text": "normal what Bor will do is it will find another place to go run you if you're lucky or if it's really tight you may",
    "start": "1070039",
    "end": "1075919"
  },
  {
    "text": "have to wait a while before you come back but the expected slos is your you'll find another place in about 10 to 15 minutes or less and the main thing I",
    "start": "1075919",
    "end": "1083080"
  },
  {
    "text": "want to get you to think about here is that do not think of this as abnormal this is reality this is how you get",
    "start": "1083080",
    "end": "1090480"
  },
  {
    "text": "things to to to scale and to stay up scale itself turns out not to be very hard it's the consequences of scale are",
    "start": "1090480",
    "end": "1097440"
  },
  {
    "text": "interesting and we are basically spending our lives living in the tail behavior when you got 10,000 of",
    "start": "1097440",
    "end": "1103039"
  },
  {
    "text": "something something weird is happening to the last five all the time and if you can get those five to behave themselves",
    "start": "1103039",
    "end": "1108400"
  },
  {
    "text": "as well then the other 9,000 whatever is going to be doing great",
    "start": "1108400",
    "end": "1113960"
  },
  {
    "text": "okay and if you haven't already met it this is a couple of hundred Pages maybe a bit more of distill wisdom on a whole",
    "start": "1113960",
    "end": "1121640"
  },
  {
    "text": "bunch of the topics around this general area from my S colleagues I wrote helped write one little chapter but they did",
    "start": "1121640",
    "end": "1127320"
  },
  {
    "text": "almost all the work um go get yourself a copy and read it and actually then apply those ideas um there's a whole bunch of",
    "start": "1127320",
    "end": "1133760"
  },
  {
    "text": "spectacularly good wisdom whether or not you have an S organization or not just how to think about what it means to",
    "start": "1133760",
    "end": "1138960"
  },
  {
    "text": "bring a system up and keep it up if it isn't up it doesn't matter how fast it",
    "start": "1138960",
    "end": "1144440"
  },
  {
    "text": "is if it isn't up it doesn't matter how cost effective it is get it up first and",
    "start": "1144440",
    "end": "1151080"
  },
  {
    "text": "then we can have the second conversation okay any questions actually by the",
    "start": "1151080",
    "end": "1158000"
  },
  {
    "text": "way I'm in jet lag Purgatory right now so keep me awake",
    "start": "1158000",
    "end": "1163440"
  },
  {
    "text": "please all right um so let's have that second conversation let's actually talk about efficiency and cost eff iess does",
    "start": "1163440",
    "end": "1169480"
  },
  {
    "text": "anybody here use uh Google compute platform GC VMS or anything else like that cool okay a few of you good one of",
    "start": "1169480",
    "end": "1176480"
  },
  {
    "text": "these might be yours uh each of these color bars represents um we did a",
    "start": "1176480",
    "end": "1182120"
  },
  {
    "text": "snapshot an experiment some external virtual machine that was running and the reason I'm showing you this is to talk about the way we do bin packing of work",
    "start": "1182120",
    "end": "1188520"
  },
  {
    "text": "onto machines right we don't just run one VM on a machine we run many VMS on a machine um externally we use VMS because",
    "start": "1188520",
    "end": "1195760"
  },
  {
    "text": "the the outside world is a very nasty place internally we don't use VMS uh we just",
    "start": "1195760",
    "end": "1201280"
  },
  {
    "text": "use containers so that's good enough for us because of the other software checks we have in place but externally we have our security folk require an next level",
    "start": "1201280",
    "end": "1207200"
  },
  {
    "text": "of of isolation from us but this is just a graph of one cell um actually a tiny",
    "start": "1207200",
    "end": "1212440"
  },
  {
    "text": "fraction of one cell it goes off far to this side over here uh each vertical line represents one physical machine and",
    "start": "1212440",
    "end": "1218000"
  },
  {
    "text": "I'm plotting here the amount of uh CPU that's in use or allocated at the top and the amount of memory that's been allocated at the bottom and the point of",
    "start": "1218000",
    "end": "1225200"
  },
  {
    "text": "this is to talk about a couple of things um the first is there are more than there's more than one VM on the machine great we do the",
    "start": "1225200",
    "end": "1231360"
  },
  {
    "text": "same internally as well the second is to say look when we're trying to place a new VM you need to find a place with",
    "start": "1231360",
    "end": "1236799"
  },
  {
    "text": "Whit space right so Whit space itself when you've got both CPU and memory free is not too bad unless you got too much",
    "start": "1236799",
    "end": "1243080"
  },
  {
    "text": "Whit space because that just meant you bought too many machines that was expensive this is what you want to avoid",
    "start": "1243080",
    "end": "1250120"
  },
  {
    "text": "free memory but no CPU or free CPU but no memory there is no way you can sell that to anybody else or use it for",
    "start": "1250120",
    "end": "1256480"
  },
  {
    "text": "anything else we might do so we we call that resource stranding and we work quite hard in our scheduling algorithms to avoid the stuff in pink so most of",
    "start": "1256480",
    "end": "1263880"
  },
  {
    "text": "the effort we take is sort of how do you do sort of dynamic on the Fly bin packing at the scale I talked about in a",
    "start": "1263880",
    "end": "1269280"
  },
  {
    "text": "few fraction of a second while still avoiding things like that which makes it kind of",
    "start": "1269280",
    "end": "1275799"
  },
  {
    "text": "interesting um I mentioned that we ran more than one thing on a machine this is a graph from late 2012 of how many tasks",
    "start": "1276440",
    "end": "1285159"
  },
  {
    "text": "we put on each machine back then the median order magnitude 12 it basically scales with core count so it's probably",
    "start": "1285159",
    "end": "1291960"
  },
  {
    "text": "roughly double since then right we just we just keep on buying new generation machines and they they have more Calles on them um the Bor Master load roughly",
    "start": "1291960",
    "end": "1298880"
  },
  {
    "text": "scales with core count as well right we we talk about sort of two the three interesting metrics for how big a cell",
    "start": "1298880",
    "end": "1304039"
  },
  {
    "text": "is how many machines there are how many calls it has and how many megawatts so we have conversations",
    "start": "1304039",
    "end": "1309360"
  },
  {
    "text": "around megawatts which is interesting the other conversations we have is is petabytes I was shared a an",
    "start": "1309360",
    "end": "1315200"
  },
  {
    "text": "office with a guy once who said I found a way to save 50 petabytes of doing something of dis space and a little while later one of us looked at the",
    "start": "1315200",
    "end": "1321240"
  },
  {
    "text": "other and said is that a lot we and we actually had to go and think and it turns out yes that that is",
    "start": "1321240",
    "end": "1326840"
  },
  {
    "text": "a lot even for us but we had to think about it for a while okay",
    "start": "1326840",
    "end": "1333159"
  },
  {
    "text": "so in the process of sort of trying to write up some and share our experiences with some of this stuff we uh you know I",
    "start": "1333159",
    "end": "1339640"
  },
  {
    "text": "I I write papers as a as a fun hobby um we we I wanted to ask a few questions",
    "start": "1339640",
    "end": "1345320"
  },
  {
    "text": "and one one of the standard things you know I told you that we we we share machines between different applications and you say well why and the answer",
    "start": "1345320",
    "end": "1351960"
  },
  {
    "text": "because it we mean we can buy fewer machines that way right machines are expensive things in in this kind of scale great I said great how much does",
    "start": "1351960",
    "end": "1358840"
  },
  {
    "text": "it save what we didn't know so then we started asking great how",
    "start": "1358840",
    "end": "1365440"
  },
  {
    "text": "would we find out well you could let's how would you find out so it turns out",
    "start": "1365440",
    "end": "1371000"
  },
  {
    "text": "if you've got a cell that's running some workload and you change the scheduling algorithm to do something different to it unless you're crazy it's still going",
    "start": "1371000",
    "end": "1377240"
  },
  {
    "text": "to fit so you can't actually evaluate scheduling algorithms very easily just by leaving things alone there are two",
    "start": "1377240",
    "end": "1384279"
  },
  {
    "text": "things you can do you can take the workload and you grow it until it no longer fits but that has all sorts of problems about how do you how do you",
    "start": "1384279",
    "end": "1390159"
  },
  {
    "text": "grow something do you add more jobs do you add more tasks do you make the task bigger do you do all of the above what",
    "start": "1390159",
    "end": "1395520"
  },
  {
    "text": "do you do about these things called constraints which say I will only run on things that are this scale Etc or you",
    "start": "1395520",
    "end": "1401520"
  },
  {
    "text": "could do the other thing which is what we did for this paper which is you can say you can take the workload and take the original cell and just squeeze it",
    "start": "1401520",
    "end": "1407279"
  },
  {
    "text": "until things no longer fit and you could do that with binary search and you know we've got",
    "start": "1407279",
    "end": "1413240"
  },
  {
    "text": "machines um so that's what we did so this is a graph of what happened by the way we wrote a five-page paper about how",
    "start": "1413240",
    "end": "1419320"
  },
  {
    "text": "do you evaluate scheding algorithms using these two techniques about and comparing them if you care I can tell you send you a pointer um so here's a",
    "start": "1419320",
    "end": "1426440"
  },
  {
    "text": "graph of original cell um which is actually running a shared workload so we're running both",
    "start": "1426440",
    "end": "1431640"
  },
  {
    "text": "production stuff and batch jobs in the same cell with this picture that's the dark blue bar and the dark blue",
    "start": "1431640",
    "end": "1438120"
  },
  {
    "text": "represents the smallest number of machines you could possibly use to run that workload right if you just take",
    "start": "1438120",
    "end": "1443640"
  },
  {
    "text": "them out at random so you get the mix of the sizes the same because they're not All Uniform you would never do that right that would be crazy you always",
    "start": "1443640",
    "end": "1449640"
  },
  {
    "text": "want some Headroom because things are always going out for repair people are changing their minds about how much they want I mean all that kind of stuff",
    "start": "1449640",
    "end": "1455080"
  },
  {
    "text": "happen so this is not you wouldn't run it this way but it's a great way of doing repeatable evaluations which is",
    "start": "1455080",
    "end": "1460200"
  },
  {
    "text": "what we were interested in and then we said well what happens if we just took away all of the batch workload and just",
    "start": "1460200",
    "end": "1465760"
  },
  {
    "text": "only ran the production user facing stuff so this sort of low latency uh web search or external access rpcs or web",
    "start": "1465760",
    "end": "1473600"
  },
  {
    "text": "servers and this is how many machines it would take the minimum number you could get away with and then if we ran those",
    "start": "1473600",
    "end": "1479799"
  },
  {
    "text": "batch jobs in a separate cell this is how many machines it would take to do that you'll notice that the blue bar on",
    "start": "1479799",
    "end": "1485960"
  },
  {
    "text": "the left is shorter than the some of the blue bars on the right and that Gap is how many extra machines you would have",
    "start": "1485960",
    "end": "1492080"
  },
  {
    "text": "to buy just to run these two things separately rather than together a policy",
    "start": "1492080",
    "end": "1497279"
  },
  {
    "text": "statement nothing better is happening we're just making a policy choice to run them in separate environments which is why we don't there",
    "start": "1497279",
    "end": "1504640"
  },
  {
    "text": "are some people who do this good for them this is why we don't so that overhead metric we we",
    "start": "1504640",
    "end": "1511880"
  },
  {
    "text": "actually talk now I'm going to take the next graph take this graph and just shift it by 90Â° so this is a graph of",
    "start": "1511880",
    "end": "1517559"
  },
  {
    "text": "essentially that same bar chart with the overhead value here um for 15 different cells so we we selected the cells as",
    "start": "1517559",
    "end": "1524600"
  },
  {
    "text": "follows this is actually the most fun sentence to write in the whole paper we took all of ourselves we sorted them by core count and we threw away all the",
    "start": "1524600",
    "end": "1531640"
  },
  {
    "text": "small ones by which I mean 5,000 machines or less and then we randomly sample what",
    "start": "1531640",
    "end": "1537399"
  },
  {
    "text": "was left to get 15 so somewhere in this 15 is a very big one somewhere in this 15 is something a medium size 10,000 and",
    "start": "1537399",
    "end": "1544320"
  },
  {
    "text": "somewhere in here is a smallish one in the around 5 to 6,000 and you can read the paper for why",
    "start": "1544320",
    "end": "1550399"
  },
  {
    "text": "there's erab bars um but the thing to observe is that all of the area up at the top left hand corner is money that",
    "start": "1550399",
    "end": "1556399"
  },
  {
    "text": "we would have to spend if we we just change the policy of running things together on the same machines that's a lot of",
    "start": "1556399",
    "end": "1563000"
  },
  {
    "text": "money we would have to grow on average uh by about",
    "start": "1563000",
    "end": "1569080"
  },
  {
    "text": "25% remember that picture with a map of data centers imagine adding a quarter as many",
    "start": "1569080",
    "end": "1575159"
  },
  {
    "text": "of those little Red Pins $200 million a pop let's not do",
    "start": "1575159",
    "end": "1581039"
  },
  {
    "text": "that so we don't other kind of things you could ask so we did there's a whole bunch of them",
    "start": "1581039",
    "end": "1586919"
  },
  {
    "text": "I going to just pick a couple here um what happens if we made ourselves smaller you know 10,000 seems large what",
    "start": "1586919",
    "end": "1592520"
  },
  {
    "text": "would happen if we made them 5,000 or 3,000 and the answer is guess what you'd have more fragmentation more",
    "start": "1592520",
    "end": "1598000"
  },
  {
    "text": "fragmentation means more machines to run the same workload so it turns out bigger cells are better the upper bound is",
    "start": "1598000",
    "end": "1603799"
  },
  {
    "text": "primarily dictated by a couple things one is the sort of power density we get inside data centers and then the other",
    "start": "1603799",
    "end": "1609440"
  },
  {
    "text": "is my friends in the SRE profession who will occasionally mistype commands um so again we're talking 20 to",
    "start": "1609440",
    "end": "1616679"
  },
  {
    "text": "50% extra just just for a policy choice of having smaller sales the networking can do it just fine here's another thing",
    "start": "1616679",
    "end": "1622640"
  },
  {
    "text": "you've looked at so we let our people I'll show you graph in a second we let our users say I want this many bytes of",
    "start": "1622640",
    "end": "1628559"
  },
  {
    "text": "memory to the bite um we let them say how many CPU calls they want to the mil",
    "start": "1628559",
    "end": "1634000"
  },
  {
    "text": "core and so on right for all the different resource types what would happen if we said how about we insist",
    "start": "1634000",
    "end": "1640039"
  },
  {
    "text": "that you do what our external people do in VMS and round it up to the nearest power of two in each of those",
    "start": "1640039",
    "end": "1646279"
  },
  {
    "text": "Dimensions guess what you'd need more machines and depending what you do about things when you round them up they get bigger than the machine is which is the",
    "start": "1646279",
    "end": "1653279"
  },
  {
    "text": "difference between the blue graph and the green graph the blue one we just threw them throw them away the green graph we C them to the machine size",
    "start": "1653279",
    "end": "1659799"
  },
  {
    "text": "you'd need on average again something somewhere in this range here right 30% more machines if you rounded things up",
    "start": "1659799",
    "end": "1665919"
  },
  {
    "text": "to powers of two H so we don't internally and this by",
    "start": "1665919",
    "end": "1671640"
  },
  {
    "text": "way is one of the motivations why we came out with this uh GC custom machine types right rather than forcing you to pick from just a limited menu of of",
    "start": "1671640",
    "end": "1678600"
  },
  {
    "text": "shapes of this much GCU means you have to have this much memory CPU memory will that you pick independently within",
    "start": "1678600",
    "end": "1684640"
  },
  {
    "text": "reasonable ratios six more calls great this much RAM to go with it you will save money by doing",
    "start": "1684640",
    "end": "1691159"
  },
  {
    "text": "so so this is actually what people do this is a uh a CDF of on the xaxis a log",
    "start": "1691159",
    "end": "1698399"
  },
  {
    "text": "axis of the amount of memory or CPU calls that people request for both production work and non-production work",
    "start": "1698399",
    "end": "1706279"
  },
  {
    "text": "um and also the dash the funny dash line thingy is the the ratio between the two and it's an S curve right so a couple",
    "start": "1706279",
    "end": "1713080"
  },
  {
    "text": "things noticed the numbers in the middle are more popular than the numbers on either end but the range is enormous",
    "start": "1713080",
    "end": "1719640"
  },
  {
    "text": "there is not a single answer there are some popular answers it's amazing how many machine sorry how",
    "start": "1719640",
    "end": "1726519"
  },
  {
    "text": "many applications need exactly one CPU call who knew after all the careful measurement that people do yeah right uh",
    "start": "1726519",
    "end": "1735080"
  },
  {
    "text": "what do you think is happening they're just saying I don't know one right and if it's not right well we fix it later okay great so nice Rand numbers of",
    "start": "1735080",
    "end": "1741840"
  },
  {
    "text": "popular two is also interesting um some of the numbers actually are",
    "start": "1741840",
    "end": "1747159"
  },
  {
    "text": "automated right how would you do this by hand you'd run something on your desktop and and try it for a while and if it doesn't need if it doesn't work you give",
    "start": "1747159",
    "end": "1753200"
  },
  {
    "text": "it a bit more well why would we have people do this we can have the system do it for you so that's actually one of the",
    "start": "1753200",
    "end": "1758480"
  },
  {
    "text": "things you can say you choose here's another interesting set of numbers these are people asking for tiny",
    "start": "1758480",
    "end": "1764279"
  },
  {
    "text": "amounts of CPU I mean minuscule uh uh a 20th of a CPU core H they're gaming the",
    "start": "1764279",
    "end": "1772919"
  },
  {
    "text": "system they're saying I'm so small you can pack me anywhere quickly easily I I",
    "start": "1772919",
    "end": "1778360"
  },
  {
    "text": "I'll fit in and when I get there I'm going to bet that no other people on that machine and not using all of the",
    "start": "1778360",
    "end": "1784519"
  },
  {
    "text": "resources I can just use the spare stuff this worked wonderfully until we",
    "start": "1784519",
    "end": "1789600"
  },
  {
    "text": "started doing best fit and put 200 of these things onto one",
    "start": "1789600",
    "end": "1794760"
  },
  {
    "text": "machine it turned out to be easier to fix our scheduling algorithm than it was to change our user Behavior oh well okay so we see all",
    "start": "1796159",
    "end": "1804120"
  },
  {
    "text": "right the point is you see a whole range of things here um but I talked this is what people ask for that's not quite",
    "start": "1804120",
    "end": "1810080"
  },
  {
    "text": "what they use so I'll show you graphs in a second about the actual numbers but but here's the basic concept right we notice that people will ask for more",
    "start": "1810080",
    "end": "1817320"
  },
  {
    "text": "than they need and there's a couple of good reasons for that for example if you're running a sort of 2 plus1 redundancy model and you know the plus",
    "start": "1817320",
    "end": "1823519"
  },
  {
    "text": "one Data Center and your load is spread evenly across all three and one of them disappears that load has to go somewhere",
    "start": "1823519",
    "end": "1829960"
  },
  {
    "text": "we don't throw it away we just spread it across the other two data centers Global load balancing is a wonderful thing you",
    "start": "1829960",
    "end": "1835880"
  },
  {
    "text": "have a few seconds to respond and your load will go up by 50% so you had better be ready for that",
    "start": "1835880",
    "end": "1842720"
  },
  {
    "text": "uh we get workload spikes um some friends in SRE tell me that when Michael Jackson died we saw what we thought was",
    "start": "1842720",
    "end": "1849039"
  },
  {
    "text": "a denial of service attack on web search uh they were panicking what's",
    "start": "1849039",
    "end": "1854840"
  },
  {
    "text": "going on turned out it was just people looking it up as I like like to point out think about what happens when he comes",
    "start": "1854840",
    "end": "1860440"
  },
  {
    "text": "back so we try to scale things to cope with with with with that level of extra",
    "start": "1860440",
    "end": "1865720"
  },
  {
    "text": "capacity and then the other thing I need to tell you is that if you ask for a certain amount of let's say memory and",
    "start": "1865720",
    "end": "1870760"
  },
  {
    "text": "you need more memory than you have requested and your production job we will guess what kill",
    "start": "1870760",
    "end": "1876880"
  },
  {
    "text": "you so it's sensible to pad things upwards a little bit now you actually have to pay for this you know as as an",
    "start": "1876880",
    "end": "1883080"
  },
  {
    "text": "internal user you you have to fund this stuff so there's some some back pressure but it's not a lot of back pressure but",
    "start": "1883080",
    "end": "1889399"
  },
  {
    "text": "here's what we observe right that people ask for they have a large capacity which is there in case of black Sundays um",
    "start": "1889399",
    "end": "1895399"
  },
  {
    "text": "more Black Swan events but their actual usage is is typically a fraction of that somewhere around half to a third um so what we do inside Borg is we",
    "start": "1895399",
    "end": "1903080"
  },
  {
    "text": "sort of keep an eye on the actual usage and say you know I'm going to bet that what you're currently doing is going to keep going for a while so we build this",
    "start": "1903080",
    "end": "1909120"
  },
  {
    "text": "little age- weighted average of the utilization which we call the reservation and then we get to take the",
    "start": "1909120",
    "end": "1914360"
  },
  {
    "text": "stuff between the reservation and what we have reserved for you cuz we will actually reserve it for you you you will pay for it if you want it it's there but",
    "start": "1914360",
    "end": "1921559"
  },
  {
    "text": "if you're not using it right now we can run batch jobs in it so that's exactly",
    "start": "1921559",
    "end": "1926600"
  },
  {
    "text": "what we do that's how we pack those batch jobs into the same machines that we're running production workloads in",
    "start": "1926600",
    "end": "1932279"
  },
  {
    "text": "right we take the stuff is not currently being used by the production things and give it to the batch jobs batch jobs",
    "start": "1932279",
    "end": "1938279"
  },
  {
    "text": "have a lousy existence already occasionally our reservation estimates go wrong we make a mistake and we'll",
    "start": "1938279",
    "end": "1944200"
  },
  {
    "text": "just make their existence a tiny bit more lousy eh it's nice to have an error budget right",
    "start": "1944200",
    "end": "1950159"
  },
  {
    "text": "so how do we migrate a VM or sorry an internal task you kill it and bring it",
    "start": "1950159",
    "end": "1955279"
  },
  {
    "text": "up somewhere else as long as you don't do this too frequently and we actually publish numbers about what too frequently means it's actually wonderful",
    "start": "1955279",
    "end": "1961279"
  },
  {
    "text": "to have that degrees of freedom to be able to do stuff behind the scenes you'll notice however that there",
    "start": "1961279",
    "end": "1966320"
  },
  {
    "text": "is a gap between the red line and the blue line at the bottom here and that's sort of basically know safety margin right sort of we we put that aside in",
    "start": "1966320",
    "end": "1973240"
  },
  {
    "text": "case the the usage does something wacky when you know we we might miss estimate there is nothing useful we can do with",
    "start": "1973240",
    "end": "1979840"
  },
  {
    "text": "that safety margin we can't run batch jobs in it it's just put aside for a policy choice of how much we want to be",
    "start": "1979840",
    "end": "1986240"
  },
  {
    "text": "safe in this reservation game so let's see how much yellow there is so here's a",
    "start": "1986240",
    "end": "1991279"
  },
  {
    "text": "graph of a week of one actual live sale from November 2013 and the thing to",
    "start": "1991279",
    "end": "1996399"
  },
  {
    "text": "notice is that there's a lot of yellow a lot of yellow usage at the",
    "start": "1996399",
    "end": "2003039"
  },
  {
    "text": "bottom so this is again CPU at the top memory at the bottom um the Dark Star is actual usage the yellow is the the",
    "start": "2003039",
    "end": "2009399"
  },
  {
    "text": "safety margin and the pale Gray Line at the top the wiggly one is the uh the actual request for that cell that people",
    "start": "2009399",
    "end": "2016240"
  },
  {
    "text": "come in and ask for and somewhere on the bottom line you can see at the memory line there's a pale horizontal green",
    "start": "2016240",
    "end": "2021440"
  },
  {
    "text": "gray bar out there which is the actual capacity so we're giving out more resources than we have we're living a",
    "start": "2021440",
    "end": "2027080"
  },
  {
    "text": "little dangerously but we're giving it to batch jobs and eh there's a theme",
    "start": "2027080",
    "end": "2032240"
  },
  {
    "text": "here so we looked at this we went great safety margin let's crank the safety margin down so we whoops so we did great",
    "start": "2032240",
    "end": "2041639"
  },
  {
    "text": "much less yellow cool success what could possibly have gone wrong well here's the",
    "start": "2041639",
    "end": "2047240"
  },
  {
    "text": "graph this is a cumulative graph of number of times we ran out of memory and the slope is a little steeper",
    "start": "2047240",
    "end": "2054760"
  },
  {
    "text": "than our SRE colleagues were happy with that was the gist of their message they were touch less",
    "start": "2054760",
    "end": "2060679"
  },
  {
    "text": "polite but that was the gist of their message so we said okay great let's have put some of that slack back because",
    "start": "2060679",
    "end": "2066480"
  },
  {
    "text": "clearly slack is bad so we ran for a week with basically sort of midway between the two roughly half the amount",
    "start": "2066480",
    "end": "2072358"
  },
  {
    "text": "of slack so about half the amount of yellow and if you look at the graph at the bottom it's actually much flatter",
    "start": "2072359",
    "end": "2078440"
  },
  {
    "text": "there's a spike at the end and nobody's giv me a good excuse as to why that's happening we claim it wasn't us and",
    "start": "2078440",
    "end": "2084358"
  },
  {
    "text": "we've got away with it um and then just to make sure that we hadn't actually broken the world or the",
    "start": "2084359",
    "end": "2089398"
  },
  {
    "text": "world hadn't changed under our feet we then went back to the original settings so the first week and the last week are actually the original settings of how",
    "start": "2089399",
    "end": "2095240"
  },
  {
    "text": "much slack so there's a bit of Vari across time um but as you can see here you know we were able in the week three",
    "start": "2095240",
    "end": "2101359"
  },
  {
    "text": "we could save a moderately large amount of of yellow so this which is actually what we did we turned on that setting",
    "start": "2101359",
    "end": "2107200"
  },
  {
    "text": "for the middle so we've saved the company a few percent of the fleet a few percent of the fleet the",
    "start": "2107200",
    "end": "2114440"
  },
  {
    "text": "entire thing by writing this paper excellent",
    "start": "2114440",
    "end": "2120640"
  },
  {
    "text": "okay so one last thing on this this topic I want to get to is",
    "start": "2120640",
    "end": "2127359"
  },
  {
    "text": "that was sort of roughly we spend our lives worrying about how do we make B packing things more efficiently how do we increase the response time how we",
    "start": "2127359",
    "end": "2133480"
  },
  {
    "text": "give people more features that they would like to be able to do exercise control and sort of get this kind of efficiency out of our system because",
    "start": "2133480",
    "end": "2139240"
  },
  {
    "text": "that makes our costs lower right if we can reuse the machines better if we can pack things so there's less stranding we",
    "start": "2139240",
    "end": "2144680"
  },
  {
    "text": "can buy fewer machines which means when we turn around and and run sort of external Cloud workers on it we can charge less for them which is why it's",
    "start": "2144680",
    "end": "2151520"
  },
  {
    "text": "an interesting game for us to be in to try and continue you know driving the MS morees low down than the pricing pricing",
    "start": "2151520",
    "end": "2157000"
  },
  {
    "text": "system internally we ex see exactly the same kind of benefits so I've talked about sort of",
    "start": "2157000",
    "end": "2162760"
  },
  {
    "text": "this universe because that's sort of know the team I was in um but let's put that in context right so imagine each of",
    "start": "2162760",
    "end": "2168839"
  },
  {
    "text": "these boxes is a uh sort of large scale distributed service so the one in the",
    "start": "2168839",
    "end": "2174040"
  },
  {
    "text": "middle the master is the Bor master that were five copies of that um here's",
    "start": "2174040",
    "end": "2179560"
  },
  {
    "text": "another picture that one of my colleagues Cody Smith Dre of what actually goes on inside the Borg ecosystem right B this is the stuff",
    "start": "2179560",
    "end": "2185400"
  },
  {
    "text": "that's around it I'm not going to go into every box don't worry um other than to notice you know the blue stuff down",
    "start": "2185400",
    "end": "2190920"
  },
  {
    "text": "here is how do you ship bits around so there's a global file syst or distributed file systems in there at",
    "start": "2190920",
    "end": "2196160"
  },
  {
    "text": "different levels the yellow stuff is security I'm told it's really good the um the red stuff is monitoring because",
    "start": "2196160",
    "end": "2203520"
  },
  {
    "text": "if you're not monitoring it you have to assume it's out of control and the brown stuff is monitoring actual resource",
    "start": "2203520",
    "end": "2209119"
  },
  {
    "text": "allocation which is the closing the loop around who's paying for what and are they getting to use it well so again another another iteration Loop and I've",
    "start": "2209119",
    "end": "2215720"
  },
  {
    "text": "just joined the part of the company that's sort of worrying about those things more now but the reason to show this graph is",
    "start": "2215720",
    "end": "2221040"
  },
  {
    "text": "that is to point out that there's a boatload of services that you as a user can rely on so you could actually see",
    "start": "2221040",
    "end": "2227839"
  },
  {
    "text": "this right you can focus on your application running in inside your uh container and then there's all of these",
    "start": "2227839",
    "end": "2234000"
  },
  {
    "text": "sort of services that are available to the outside world right I never write storage Services I just go right to one",
    "start": "2234000",
    "end": "2239800"
  },
  {
    "text": "of the standard file systems that's out there um all of all of those things are just there they're up they're running other people looking after them and this",
    "start": "2239800",
    "end": "2246680"
  },
  {
    "text": "turns out to make Google developers amazingly productive right as you'll see we keep on tunning out new things the",
    "start": "2246680",
    "end": "2251920"
  },
  {
    "text": "internal joke is we turn out new things before we finish getting rid of the old one that's okay sorry after we get rid",
    "start": "2251920",
    "end": "2257680"
  },
  {
    "text": "of the old one um but the result is that that model of doing stuff with containers is far more effective for us",
    "start": "2257680",
    "end": "2264200"
  },
  {
    "text": "than having people let's say bring up their own virtual machines and then doing antivirus patching on the os's and",
    "start": "2264200",
    "end": "2269400"
  },
  {
    "text": "making sure they got the right configuration knobs no no no no no that's crazy talk let's have people work on the bit that they where they can add",
    "start": "2269400",
    "end": "2275560"
  },
  {
    "text": "value and have the the rest of the system provide them with services that they can lean on and take advantage of and that model turned out to be a really",
    "start": "2275560",
    "end": "2282000"
  },
  {
    "text": "good one we do it with containers and then Docker comes along and says great here's a nice packaging model for a",
    "start": "2282000",
    "end": "2287480"
  },
  {
    "text": "bunch of technologies that it makes it really convenient to describe something looks quite like our configuration files",
    "start": "2287480",
    "end": "2293960"
  },
  {
    "text": "and say you can run a container either on your desktop for debugging or you can push it out somewhere else and run it",
    "start": "2293960",
    "end": "2299119"
  },
  {
    "text": "and we went excellent let's use that as the excuse to do an open- Source version",
    "start": "2299119",
    "end": "2304440"
  },
  {
    "text": "of Borg light and we called it kubernetes which is Greek for Helmsman",
    "start": "2304440",
    "end": "2311760"
  },
  {
    "text": "or Pilot of a of a ship uh it's came out a couple years ago now I guess it's",
    "start": "2311760",
    "end": "2317079"
  },
  {
    "text": "something like the top 0.01% of all GitHub projects there's over a thousand unique contributors now um and it's",
    "start": "2317079",
    "end": "2323560"
  },
  {
    "text": "quite popular it's written in go uh Apache 2.0 license you can download it",
    "start": "2323560",
    "end": "2329920"
  },
  {
    "text": "we would love to have more people both using it and contributing to it and the slogan here is kubernetes everywhere",
    "start": "2329920",
    "end": "2335720"
  },
  {
    "text": "right it will run on premises in your own Hardware it'll run on the cloud both ours and other people's and will provide",
    "start": "2335720",
    "end": "2342880"
  },
  {
    "text": "a hosted service which I'll come back to in a minute where you can run uh we'll run kubernetes for you so this going to be very quick",
    "start": "2342880",
    "end": "2350480"
  },
  {
    "text": "because it's going to be very familiar here so how does kubernetes behave well it takes a pile of machines physical or",
    "start": "2350480",
    "end": "2355520"
  },
  {
    "text": "virtual it doesn't matter and it puts an agent on every single one H yep um but",
    "start": "2355520",
    "end": "2360640"
  },
  {
    "text": "you don't have to worry about which one because we're going to deal with that just like in Bor you didn't know which machine you were going to land on in kubernetes you don't need to know which",
    "start": "2360640",
    "end": "2366079"
  },
  {
    "text": "machine going to land on here either and you take your applications in our case I'm going to take two of them and and",
    "start": "2366079",
    "end": "2371800"
  },
  {
    "text": "Lum them together into this scheduling unit we call a pod I didn't have time to talk about but that's exactly how we do",
    "start": "2371800",
    "end": "2376839"
  },
  {
    "text": "things inter internally we'll we'll put something like a complicated engine with a very simple log scraper which you",
    "start": "2376839",
    "end": "2382480"
  },
  {
    "text": "might want to keep running even if the complicated engine goes away and they want to be glued together and you'll submit this to uh a master in our case",
    "start": "2382480",
    "end": "2389760"
  },
  {
    "text": "ex the kubet is use etcd rather than paxos but the idea is exactly the same that Master uses the same kind of let me",
    "start": "2389760",
    "end": "2396560"
  },
  {
    "text": "compare the reality against what I want to be true and fix it that I talked about before that reconciliation Loop",
    "start": "2396560",
    "end": "2401800"
  },
  {
    "text": "idea which makes the thing very resilient so any part can go down and come back up again or just pack up pick",
    "start": "2401800",
    "end": "2406920"
  },
  {
    "text": "up where it left off and the master chooses where things to go it does the same kind of Bin packing but we also realized that we'd",
    "start": "2406920",
    "end": "2414079"
  },
  {
    "text": "made a few mistakes in our decades worth of building Bor and you know it was a great system to get started with but it's a little hard for us to change",
    "start": "2414079",
    "end": "2420440"
  },
  {
    "text": "internally now because we have gazillions of customers that use it and making alterations is hard but there's no reason to make the same mistakes",
    "start": "2420440",
    "end": "2426720"
  },
  {
    "text": "externally so let's put a few new things into kubernetes we didn't have and here's one of them so Bor has this",
    "start": "2426720",
    "end": "2431760"
  },
  {
    "text": "notion of a job a vector of tasks which are basically all identical what happens",
    "start": "2431760",
    "end": "2437000"
  },
  {
    "text": "if you want to Nest them you're screwed what happens if you want overlaps you're",
    "start": "2437000",
    "end": "2442079"
  },
  {
    "text": "screwed there's nothing you can do that's the only grouping mechanism we have so what people do is they invent creative job names with you know regular",
    "start": "2442079",
    "end": "2449200"
  },
  {
    "text": "expression paing of strings bad idea um so something else it",
    "start": "2449200",
    "end": "2457040"
  },
  {
    "text": "says we'll let you put a label on anything you like particular pods and a label is just a key value pair you get",
    "start": "2457040",
    "end": "2462200"
  },
  {
    "text": "to choose a key you get to choose a value there's limits to toop of using the thing as a key value store but fine",
    "start": "2462200",
    "end": "2468319"
  },
  {
    "text": "um and then you get to say great find me all the things that have this match this",
    "start": "2468319",
    "end": "2474040"
  },
  {
    "text": "selector so I think a sort a very lightweight SQL query or a sort of vend diagram find me all the things that have",
    "start": "2474040",
    "end": "2480359"
  },
  {
    "text": "roll front end great they're the yellow ones B's back end find me all the things",
    "start": "2480359",
    "end": "2486400"
  },
  {
    "text": "that are in state production so again think ven diagrams and sort of overlapping sets this is the way you",
    "start": "2486400",
    "end": "2492400"
  },
  {
    "text": "group things in kuet you don't have jobs you just have sets of of of PODS that with these properties so now you could",
    "start": "2492400",
    "end": "2498960"
  },
  {
    "text": "do things like finally all of those things and upgrade them to the Lex version or set up a monitoring system",
    "start": "2498960",
    "end": "2504359"
  },
  {
    "text": "that is looking at them because I want to know what the RPC performance is like so every time there's a grouping",
    "start": "2504359",
    "end": "2509440"
  },
  {
    "text": "operation in kubernetes it uses one of these label selectors plus the labels that you can put on so that's actually",
    "start": "2509440",
    "end": "2514640"
  },
  {
    "text": "much more flexible than b ever was with this kind of stuff fact so much so that we're retrofitting some of these ideas into the Bor",
    "start": "2514640",
    "end": "2521079"
  },
  {
    "text": "World here's the other idea so Bor you come along to the Bor Master the one Bor Master times five copies and say I want",
    "start": "2521079",
    "end": "2527960"
  },
  {
    "text": "to have 40 copies of my thing or a th000 copies of my thing or 10,000 and you have to go to you have to",
    "start": "2527960",
    "end": "2534200"
  },
  {
    "text": "talk to Bor Master to get it to decide how to do that well great but sometimes you want different behaviors so we",
    "start": "2534200",
    "end": "2540520"
  },
  {
    "text": "separated out a bunch of stuff that was part of the monolithic bog Master into separate microservices in the kubernetes",
    "start": "2540520",
    "end": "2545599"
  },
  {
    "text": "world and one of the microservices is in charge of saying how many copies do I want so you can go to this thing what",
    "start": "2545599",
    "end": "2551480"
  },
  {
    "text": "called a replica controller and you can say make me three copies of that you give it a template and it does exactly",
    "start": "2551480",
    "end": "2556599"
  },
  {
    "text": "the thing we talked about before it looks using a label to Lector to say how many copies are out there if the answer",
    "start": "2556599",
    "end": "2562160"
  },
  {
    "text": "is three it says great do nothing if the answers are not three it fixes it",
    "start": "2562160",
    "end": "2568440"
  },
  {
    "text": "repeat there's about three different flavors of of replica selector one of the one of them is for things like demons I want one of these running",
    "start": "2568440",
    "end": "2574839"
  },
  {
    "text": "everywhere which turn out to be quite a useful pattern for for things like storage systems if you change it to four decides",
    "start": "2574839",
    "end": "2581520"
  },
  {
    "text": "there only three let me add one great so that's a separate component if you don't like the one we give you or the four we give you write your own and you just",
    "start": "2581520",
    "end": "2588559"
  },
  {
    "text": "drop it in it's really easy here's something else that we didn't do in Borg we didn't provide a",
    "start": "2588559",
    "end": "2594200"
  },
  {
    "text": "front-end low balancing system for everything so you had to do this yourself so typically what people run is they they use one of our low balancing",
    "start": "2594200",
    "end": "2600119"
  },
  {
    "text": "Services internally but let's make so kubernetes says no no that's silly let's make that a first class object so you",
    "start": "2600119",
    "end": "2605559"
  },
  {
    "text": "can actually explicitly say here's one IP address or sort of one DNS name for all some number behind the scenes of",
    "start": "2605559",
    "end": "2611440"
  },
  {
    "text": "back ends you don't have to care you always go through this single point of entry and we'll worry about the low balancing and it just works very nicely",
    "start": "2611440",
    "end": "2618040"
  },
  {
    "text": "and again it uses label selectors to say here's my back ends that I'm willing to search to to serve",
    "start": "2618040",
    "end": "2623480"
  },
  {
    "text": "over okay so by now you sort of basically got the theme right there's an awful lot of stuff that was in Borg that has made its way out into kubernetes in",
    "start": "2623480",
    "end": "2630559"
  },
  {
    "text": "fact many of the my colleagues in Borg are now kubernetes developers they didn't even move they just you know",
    "start": "2630559",
    "end": "2636040"
  },
  {
    "text": "switch left a little um so you'll see containers right you'll see pods which",
    "start": "2636040",
    "end": "2641440"
  },
  {
    "text": "these are all things that that have exact analoges in the Bog world the kuet is the same thing as the borlet the sort",
    "start": "2641440",
    "end": "2646800"
  },
  {
    "text": "of reconciliation loops around persistent storage where you know what it is you want to be true but we've added a few new things labels we've",
    "start": "2646800",
    "end": "2652800"
  },
  {
    "text": "talked about Services we've touched on the idea of being able to compose and bind things together late in the system",
    "start": "2652800",
    "end": "2657920"
  },
  {
    "text": "rather than having it built in one way and then the other thing that's changed in the decade since we started Bor is we can now afford one IP address per pod so",
    "start": "2657920",
    "end": "2665520"
  },
  {
    "text": "we do it turns out that makes things so much easier because we can just use off-the-shelf stuff like DNS whereas",
    "start": "2665520",
    "end": "2671280"
  },
  {
    "text": "internally we had to write our own equivalent so how can you get it well",
    "start": "2671280",
    "end": "2676400"
  },
  {
    "text": "there's two flavors of kubernetes uh one is just here's a pile of source GitHub off you go good luck we wish you well",
    "start": "2676400",
    "end": "2682720"
  },
  {
    "text": "there some some documentation um some of which might be out of date who knows it's it's a very Google thing",
    "start": "2682720",
    "end": "2690119"
  },
  {
    "text": "but it's completely open source right we we have a huge community of people contributing to it up to we are now the",
    "start": "2690119",
    "end": "2695200"
  },
  {
    "text": "minority committers to to kubernetes by far which is great that the community has come together and decided it's a",
    "start": "2695200",
    "end": "2700839"
  },
  {
    "text": "really great thing to go and it runs in lots of different places and we have various other people helping us out with those things or so you could either run",
    "start": "2700839",
    "end": "2708880"
  },
  {
    "text": "it on premises or you could run it on uh Google container engine you could just rent VMS and and bring up a copy of",
    "start": "2708880",
    "end": "2714400"
  },
  {
    "text": "kubernetes yourself um it runs on GC it runs on Amazon it runs on you know that sort of stuff if you give it to us we'll",
    "start": "2714400",
    "end": "2721040"
  },
  {
    "text": "actually run a hosted service there's a thing called Google container engine which is where we'll run the master",
    "start": "2721040",
    "end": "2726280"
  },
  {
    "text": "we'll do that sort of stuff we'll also do backups we'll also do monitoring we'll I mean all of that stuff so you don't have to you just say create me a",
    "start": "2726280",
    "end": "2732760"
  },
  {
    "text": "kubes cluster and then you say could you run this pod and that that's it that's all you have to do and you know behind",
    "start": "2732760",
    "end": "2738160"
  },
  {
    "text": "the scenes we'll do stuff we'll crank up VMS and all those kind of things we'll tear them down again when necessary um",
    "start": "2738160",
    "end": "2743760"
  },
  {
    "text": "so again you don't have to right there's a delegation in that service model I showed you earlier with that that picture of all of those little boxes let",
    "start": "2743760",
    "end": "2749319"
  },
  {
    "text": "somebody else do stuff they know how to do you have better things to do with your day so here's where it fits into sort of",
    "start": "2749319",
    "end": "2755480"
  },
  {
    "text": "the the the architecture of of the Universe on the right hand side if you want raw bits raw physical hardware for",
    "start": "2755480",
    "end": "2761000"
  },
  {
    "text": "yourself virtual hardware for yourself good luck go for it absolutely knock yourself out there's some things work",
    "start": "2761000",
    "end": "2766480"
  },
  {
    "text": "really well in that environment uh rent a VM by the by the minute cool on the left hand side and if you don't care",
    "start": "2766480",
    "end": "2772240"
  },
  {
    "text": "about all that kind of junk you just want to run a web service um app engine I'm actually an internal app engine User",
    "start": "2772240",
    "end": "2777839"
  },
  {
    "text": "it's wonderful I don't even have to worry about this stuff it auto scales it just configures it does back I mean great but it's very opinionated if you",
    "start": "2777839",
    "end": "2784480"
  },
  {
    "text": "don't like its opinion it's a little hard to change and then kubernetes is somewhere in the middle right it will",
    "start": "2784480",
    "end": "2789720"
  },
  {
    "text": "run containers for you you can put anything you like in those containers it's entirely up to you if it fits in a",
    "start": "2789720",
    "end": "2794839"
  },
  {
    "text": "Docker container it'll run just fine in kubernetes the nice thing about this is that you can write to the same API",
    "start": "2794839",
    "end": "2802040"
  },
  {
    "text": "whether you're going to deploy on on premises Deploy on top of rented VMS or",
    "start": "2802040",
    "end": "2807440"
  },
  {
    "text": "Deploy on Google container engine and the programmers and developers amongst you don't have to",
    "start": "2807440",
    "end": "2813319"
  },
  {
    "text": "change what you do you just change the configuration about where you want it to run so this is the idea behind",
    "start": "2813319",
    "end": "2818720"
  },
  {
    "text": "kubernetes everywhere right the same API is used for everything which gives you flexibility about what you want to do",
    "start": "2818720",
    "end": "2823880"
  },
  {
    "text": "and gives us a chance to sort of bid for some of your money right we'd love to get it we think by helping everybody",
    "start": "2823880",
    "end": "2829079"
  },
  {
    "text": "we're going to you know get some fraction of that and this is business positive for us and it turns out it's working very well um gke is growing",
    "start": "2829079",
    "end": "2835480"
  },
  {
    "text": "faster than our VM business okay so last slide um three",
    "start": "2835480",
    "end": "2842400"
  },
  {
    "text": "things I want you to remember resiliency res resiliency",
    "start": "2842400",
    "end": "2847720"
  },
  {
    "text": "resiliency if you don't get that right nothing else matters so worry about",
    "start": "2847720",
    "end": "2853000"
  },
  {
    "text": "failure tolerance right up front worry about every single conversation you have worry about what will happen if that",
    "start": "2853000",
    "end": "2858599"
  },
  {
    "text": "breaks when I'm doing this thing that is touchy and think through what the consequences are it's not okay to say",
    "start": "2858599",
    "end": "2863880"
  },
  {
    "text": "we'll deal with it on the day because when the day comes it's going to be unpleasant um and that's not the time",
    "start": "2863880",
    "end": "2869640"
  },
  {
    "text": "you actually want to be thinking through some of those subtle interactions um so you b could",
    "start": "2869640",
    "end": "2876559"
  },
  {
    "text": "thinking about all the things that could go wrong and when you get to large scale you what you'll discover is that they will be begin to happen we we have",
    "start": "2876559",
    "end": "2883760"
  },
  {
    "text": "people who shoot uh terabit scale fiber optic lines and take an entire data",
    "start": "2883760",
    "end": "2889040"
  },
  {
    "text": "center offline instantaneously we have we used to have sharks that would eat submarine cables and do much the same",
    "start": "2889040",
    "end": "2895000"
  },
  {
    "text": "thing apparently they like the electromagnetic appearence fiber helps um and so on but and software bugs right",
    "start": "2895000",
    "end": "2900359"
  },
  {
    "text": "correlated software bugs a problem so you have to think about how do you how do you bound these kinds of things one once you've got stuff up we",
    "start": "2900359",
    "end": "2906960"
  },
  {
    "text": "can come back and have a conversation about how do you make it more efficient there are very few organizations that",
    "start": "2906960",
    "end": "2912440"
  },
  {
    "text": "should be worrying about efficiency before they've got a really positive business case you have to be using an",
    "start": "2912440",
    "end": "2918079"
  },
  {
    "text": "awful lot of cloud computing resources before you should be worrying about your budget that budget is Tiny compared to",
    "start": "2918079",
    "end": "2924200"
  },
  {
    "text": "the cost of your engineers so make them more productive once you get to the point where you're",
    "start": "2924200",
    "end": "2929680"
  },
  {
    "text": "big enough to have a problem where your budget on buying cloud computing is big",
    "start": "2929680",
    "end": "2934960"
  },
  {
    "text": "great that's a wonderful problem to have right um come talk to us we'll we'll cut",
    "start": "2934960",
    "end": "2940000"
  },
  {
    "text": "some special deals maybe help you so for example we",
    "start": "2940000",
    "end": "2945359"
  },
  {
    "text": "you probably know that PokÃ©mon runs on kubernetes right gke we were running around there I don't know if you heard",
    "start": "2945359",
    "end": "2951680"
  },
  {
    "text": "the story but the um they made an estimate of what they thought their initial low was going to be and then we",
    "start": "2951680",
    "end": "2956760"
  },
  {
    "text": "said come on bump it up so they multiplied it by three their actual low was like 50x their",
    "start": "2956760",
    "end": "2962920"
  },
  {
    "text": "estimate and there was a couple of hours where were scrambling to Give Them Enough virtual machines to run on but a",
    "start": "2962920",
    "end": "2968160"
  },
  {
    "text": "couple of hours out of the first few weeks it's nice to have people willing to help you out this is what the cloud computing versus for right you don't",
    "start": "2968160",
    "end": "2975160"
  },
  {
    "text": "have to worry about scale it just works behind the scenes we're scrambling like crazy but they know that's what makes my",
    "start": "2975160",
    "end": "2981200"
  },
  {
    "text": "life fun um if it was all easy it wouldn't be interesting great and now",
    "start": "2981200",
    "end": "2986520"
  },
  {
    "text": "our job behind the scenes is to do exactly that right we want to give you the flexibility that you want to be able to take advantage of so you don't have",
    "start": "2986520",
    "end": "2991599"
  },
  {
    "text": "to worry about it we want to make things as efficient as possible so we can charge as little money as we can for it so you will use more of it so Etc right",
    "start": "2991599",
    "end": "2998960"
  },
  {
    "text": "and for us that works by sharing things rather than by partitioning them by reclaiming unused resources so that we",
    "start": "2998960",
    "end": "3005280"
  },
  {
    "text": "can say look know we can't sell this as a full priced high quality High Slo thing but we can sell it as a low uh",
    "start": "3005280",
    "end": "3011559"
  },
  {
    "text": "sort of quality thing for running patch jobs or preemptible VMS in our case um",
    "start": "3011559",
    "end": "3016640"
  },
  {
    "text": "and we do other other tricks behind the scenes sort of try and make sure we do really good beam packing to make sure that we get good cost Effectiveness out",
    "start": "3016640",
    "end": "3022119"
  },
  {
    "text": "of our hardware and then the last slogan is this notion of you know C that is everywhere is is a good thing because it",
    "start": "3022119",
    "end": "3027440"
  },
  {
    "text": "makes developers productive right it's it's it's help you right we think you will find it useful whether you do it on",
    "start": "3027440",
    "end": "3033599"
  },
  {
    "text": "top of our environment or not I would encourage you to take a look um it's a great system to bring stuff up on uh",
    "start": "3033599",
    "end": "3038799"
  },
  {
    "text": "we'd love contributions but even you just want to be a user please I mean take take advantage of the things that other people around you are",
    "start": "3038799",
    "end": "3044280"
  },
  {
    "text": "doing thank you that's it be happy to take",
    "start": "3044280",
    "end": "3049200"
  },
  {
    "text": "questions um yeah let's start with the questions from the app we also don't have so much",
    "start": "3054440",
    "end": "3061280"
  },
  {
    "text": "time but um how do you see AI or deep learning affect these kinds of systems o",
    "start": "3061280",
    "end": "3068880"
  },
  {
    "text": "yes um Google is very fond on machine learning right now uh there are many",
    "start": "3068880",
    "end": "3074079"
  },
  {
    "text": "people around me with very big hammers and they're looking for nails to",
    "start": "3074079",
    "end": "3079200"
  },
  {
    "text": "strike uh so yes uh I think you'll see machine learning coming into initially",
    "start": "3079280",
    "end": "3085480"
  },
  {
    "text": "sort of starting stuff like making projections we make sort of multi-month projections of how many spare resources we're going to have in a Cell so we can",
    "start": "3085480",
    "end": "3092040"
  },
  {
    "text": "sell that to people who care about month-month availability of stuff uh you'll find a paper we published about this a couple years ago so I expect",
    "start": "3092040",
    "end": "3099040"
  },
  {
    "text": "machine learning is going to be coming into places like that is to improve the quality of those predictions um you could also see it sort of trying to say",
    "start": "3099040",
    "end": "3105520"
  },
  {
    "text": "you know making basic predictions of we've seen this in the past what's it going to do in the future right being",
    "start": "3105520",
    "end": "3110720"
  },
  {
    "text": "able to say look I've seen this job every hour for the last four weeks I'm pretty pretty good at guessing what I",
    "start": "3110720",
    "end": "3116880"
  },
  {
    "text": "think it's going to do next and if you can make good predictions like that using machine learning techniques or whatever else you can come up with it",
    "start": "3116880",
    "end": "3122880"
  },
  {
    "text": "turns out you can then do a better job of efficiency and Bin packing so those are the easy low hanging fruit and there's a bunch of other things to do",
    "start": "3122880",
    "end": "3128880"
  },
  {
    "text": "with sort of how do you set your configuration knobs and stuff like that but that people looking at these kind of things internally we have some very nice",
    "start": "3128880",
    "end": "3134960"
  },
  {
    "text": "machine learning technology um so I'm sure we'll find a way to use it okay um do you use kubernetes",
    "start": "3134960",
    "end": "3142960"
  },
  {
    "text": "internally or continue to use Fork if you do do you use an internal fork or",
    "start": "3142960",
    "end": "3148680"
  },
  {
    "text": "the one from GitHub um we most people inside Google use Borg because it gives you much I",
    "start": "3148680",
    "end": "3155880"
  },
  {
    "text": "told you it was kubernetes is Bor light right if you've become addicted to the 240 OD parameters you can specify for a",
    "start": "3155880",
    "end": "3162319"
  },
  {
    "text": "job in Bor it's very hard to let go of those things they're there because they add efficiency each one saves Gmail half",
    "start": "3162319",
    "end": "3168680"
  },
  {
    "text": "a percent of resources or something um so most people use it internally the other thing that has only recently sort",
    "start": "3168680",
    "end": "3174960"
  },
  {
    "text": "of been the case well until fairly recently our sort of access management controls",
    "start": "3174960",
    "end": "3180359"
  },
  {
    "text": "were not quite good enough for Google's standards but with the release of the IIM products that came out in the last",
    "start": "3180359",
    "end": "3185559"
  },
  {
    "text": "few months we're actually ex explicitly doing some experiments of trying to take something that's kind of important to us",
    "start": "3185559",
    "end": "3191799"
  },
  {
    "text": "evolving let's just say payroll and moving it into the cloud on our existing Cloud platform once we've got that",
    "start": "3191799",
    "end": "3197799"
  },
  {
    "text": "working and can demonstrate it to our security people satisfaction I think you will find we I know we will find there's",
    "start": "3197799",
    "end": "3203839"
  },
  {
    "text": "a bunch of people inside Google who saying can I use kubernetes can I use kubernetes and the answer is no back um until we can make sure it's absolutely",
    "start": "3203839",
    "end": "3210200"
  },
  {
    "text": "secure to the kind of level of security that we want to be able to have for our own internal stuff which is amazing",
    "start": "3210200",
    "end": "3215760"
  },
  {
    "text": "external stuff is really good but it doesn't have the flexibility I mean it's secure it just doesn't have the flexibility that you need for so essenti",
    "start": "3215760",
    "end": "3221520"
  },
  {
    "text": "Enterprise scale interactions and that's what the I am products have just produced in the last few months so yes",
    "start": "3221520",
    "end": "3226680"
  },
  {
    "text": "we're going to see more of those okay um maybe one question from the audience",
    "start": "3226680",
    "end": "3233920"
  },
  {
    "text": "I'll be R after for want okay I",
    "start": "3233920",
    "end": "3238838"
  },
  {
    "text": "just um yeah I was just wondering is Reclamation is Reclamation coming to uh",
    "start": "3247000",
    "end": "3252440"
  },
  {
    "text": "kubernetes soor I couldn't hear that beginning something coming to kubernetes Reclamation Reclamation uh it's open",
    "start": "3252440",
    "end": "3259119"
  },
  {
    "text": "source no no I mean you're talking in your talk you talked about um putting like batch jobs into this the the the",
    "start": "3259119",
    "end": "3267359"
  },
  {
    "text": "sort of spare area is that same technique going to come to kubernetes it may it may well I honestly to be honest I don't know I have not been active in",
    "start": "3267359",
    "end": "3273839"
  },
  {
    "text": "the kubernetes team for a little while uh but you know their plans are public we just the 1.4 stuff came out fairly",
    "start": "3273839",
    "end": "3279559"
  },
  {
    "text": "recently I'm sure they're talking about what goes into 1.5 a lot of it has to do with you know what people think is the most important thing right now I know",
    "start": "3279559",
    "end": "3285559"
  },
  {
    "text": "some of people are working on scale the last number I was allowed I was told I was allowed to say we've got 2,000 working we're doing 3,000 right now we",
    "start": "3285559",
    "end": "3292200"
  },
  {
    "text": "expect to have 5,000 machines uh for kubernetes support So Reclamation May",
    "start": "3292200",
    "end": "3297839"
  },
  {
    "text": "well be on the I'm sure it's on the I know it's on the list I just don't know where on the list it",
    "start": "3297839",
    "end": "3302920"
  },
  {
    "text": "is so sorry if you're interested David Oppenheimer and the kubernetes team will be the guy to ask he wrote a bunch of",
    "start": "3305920",
    "end": "3311119"
  },
  {
    "text": "the scheduling stuff that I talked about in the B world as well all right thank you very much",
    "start": "3311119",
    "end": "3316640"
  },
  {
    "text": "everybody",
    "start": "3316640",
    "end": "3319119"
  },
  {
    "text": "yep",
    "start": "3324000",
    "end": "3327000"
  }
]