[
  {
    "start": "0",
    "end": "113000"
  },
  {
    "text": "[Music]",
    "start": "3500",
    "end": "7820"
  },
  {
    "text": "great to be back in Chicago it's been uh too many years and u a great community",
    "start": "12599",
    "end": "19199"
  },
  {
    "text": "and really a pleasure to have the chance to interact and talk with you um since now feathers is abandoned and he's busy",
    "start": "19199",
    "end": "27000"
  },
  {
    "text": "you know you know doing AI I'm sort of the last man standing of the fossils will",
    "start": "27000",
    "end": "32640"
  },
  {
    "text": "talk about Legacy systems but um part of the reason I still do it uh",
    "start": "32640",
    "end": "38680"
  },
  {
    "text": "it's because I still get every few years I get asked but because for me Legacy",
    "start": "38680",
    "end": "44840"
  },
  {
    "text": "systems and those of you know a bit about my background I work with a lot of exotic Technologies I used to call them",
    "start": "44840",
    "end": "51239"
  },
  {
    "text": "weird but a customer said Dave you should call them exotic um so these are everything from",
    "start": "51239",
    "end": "57000"
  },
  {
    "text": "Vector functional programming to to a urban programming and a lot of different things and the reason I've been able to",
    "start": "57000",
    "end": "64239"
  },
  {
    "text": "do that is because often I've been able to use them in a really um you could say",
    "start": "64239",
    "end": "71360"
  },
  {
    "text": "challenging or ugly Legacy environment and I've come to call this",
    "start": "71360",
    "end": "77560"
  },
  {
    "text": "uh Innovation and Legacy and so this is just a talk about one approach to a",
    "start": "77560",
    "end": "83000"
  },
  {
    "text": "problem that's important now um I think we all know the story of",
    "start": "83000",
    "end": "90079"
  },
  {
    "text": "migration that's something you know what about the migration data M what about the data migration that's no problem",
    "start": "90079",
    "end": "97079"
  },
  {
    "text": "it's just going to be a few scripts at the end and that's how the story begins",
    "start": "97079",
    "end": "104320"
  },
  {
    "text": "so uh",
    "start": "104320",
    "end": "109960"
  },
  {
    "text": "okay me this will work so I don't think I need to go through this basically",
    "start": "112799",
    "end": "118159"
  },
  {
    "start": "113000",
    "end": "141000"
  },
  {
    "text": "these are stats from BL and Gardener and whoever else you pay to give you an opinion um that you would like um uh",
    "start": "118159",
    "end": "127360"
  },
  {
    "text": "they were done I think particularly for Oracle uh but basically U most",
    "start": "127360",
    "end": "133480"
  },
  {
    "text": "migrations uh don't end up on time or a budget and I'm sure that doesn't",
    "start": "133480",
    "end": "139760"
  },
  {
    "text": "surprise you and so what I want to talk about is",
    "start": "139760",
    "end": "144959"
  },
  {
    "start": "141000",
    "end": "338000"
  },
  {
    "text": "one uh customer I've changed the names uh to",
    "start": "144959",
    "end": "150480"
  },
  {
    "text": "protect the guilty um this a company which we'll just call Erp R Us and they do entes",
    "start": "150480",
    "end": "158480"
  },
  {
    "text": "resource planning and they're the dominant leader for people who do have",
    "start": "158480",
    "end": "164200"
  },
  {
    "text": "things like uh planes uh military vehicles uh uh big uh construction",
    "start": "164200",
    "end": "171360"
  },
  {
    "text": "equipment and all the parts inventory to support these things globally um eprs has been around for a",
    "start": "171360",
    "end": "179400"
  },
  {
    "text": "while they're you know hundreds of customers they're very successful in their",
    "start": "179400",
    "end": "184959"
  },
  {
    "text": "area and they built uh made a very shrewd decision uh at the time to use what was",
    "start": "184959",
    "end": "193360"
  },
  {
    "text": "called a network database a network database has the",
    "start": "193360",
    "end": "198879"
  },
  {
    "text": "property that you can see this you everyone in this room I assume knows what ER diagrams are but I perhaps",
    "start": "198879",
    "end": "206239"
  },
  {
    "text": "should not do that um but basically the network databases were really designed",
    "start": "206239",
    "end": "213720"
  },
  {
    "text": "to deal with this recursive uh relationship where basically something can be made of",
    "start": "213720",
    "end": "219560"
  },
  {
    "text": "something or something can have some things in it so basically and this is",
    "start": "219560",
    "end": "226000"
  },
  {
    "text": "done by um representing something called a many to many relationship something",
    "start": "226000",
    "end": "232159"
  },
  {
    "text": "that most programmers don't think exist because collections you know only work",
    "start": "232159",
    "end": "237200"
  },
  {
    "text": "one way so one of the big design problems we found with people with data is that um programmers don't you know",
    "start": "237200",
    "end": "243879"
  },
  {
    "text": "they don't like SQL and they don't want to know about data models in general but they're still important in some",
    "start": "243879",
    "end": "251120"
  },
  {
    "text": "places so these ER diagrams actually are realized fairly straightforwardly in",
    "start": "251120",
    "end": "257040"
  },
  {
    "text": "these Network databases and because of this implementation essentially of rings of",
    "start": "257040",
    "end": "262639"
  },
  {
    "text": "rings uh so it's a pointer walking navigational database much as uh for",
    "start": "262639",
    "end": "269520"
  },
  {
    "text": "those those of you that are in fashion with the Neo forj U are doing that so",
    "start": "269520",
    "end": "275400"
  },
  {
    "text": "this this talk although it's historical in context uh with L I predict that some of",
    "start": "275400",
    "end": "282520"
  },
  {
    "text": "you in the not too distant future will be trying to figure out how to get out of a very inefficient and navigationally",
    "start": "282520",
    "end": "289240"
  },
  {
    "text": "complicated uh graph database and put that into a very efficient Vector store",
    "start": "289240",
    "end": "295720"
  },
  {
    "text": "so you can actually get your knowledge out of it after you put it in your knowledge graph so",
    "start": "295720",
    "end": "300800"
  },
  {
    "text": "um and that's even a harder problem because property graphs are instance-based not type",
    "start": "300800",
    "end": "308240"
  },
  {
    "text": "based so basically their problem customers have two concerns the first one is uh navigating around a u Network",
    "start": "308240",
    "end": "316800"
  },
  {
    "text": "database is not easy programming you have to know how to do this uh there's",
    "start": "316800",
    "end": "321919"
  },
  {
    "text": "there's no query language um the second one is that all",
    "start": "321919",
    "end": "327639"
  },
  {
    "text": "these databases are running on Hardware that's obsolete with the vendor that's a",
    "start": "327639",
    "end": "333240"
  },
  {
    "text": "problem so it's your your typical uh Legacy",
    "start": "333240",
    "end": "338400"
  },
  {
    "start": "338000",
    "end": "402000"
  },
  {
    "text": "problem uh so the first problem was to try and solve the reporting problem basically",
    "start": "338400",
    "end": "345000"
  },
  {
    "text": "the way it worked is the in order to satisfy the customers erpr us takes requests and they have programmers who",
    "start": "345000",
    "end": "351560"
  },
  {
    "text": "know this data data manipulation language and then they they write the reports for the customers with the code",
    "start": "351560",
    "end": "357400"
  },
  {
    "text": "and send it back and publish it in other customers get it um they of course did the obvious",
    "start": "357400",
    "end": "363960"
  },
  {
    "text": "thing which is you know I have one trick that I'll mention if you want agile to go away just don't",
    "start": "363960",
    "end": "371280"
  },
  {
    "text": "use the word anymore so it's kind of like os2 Lotus",
    "start": "371280",
    "end": "378599"
  },
  {
    "text": "123 just just don't mention it anyway they went and did this thing",
    "start": "378599",
    "end": "384080"
  },
  {
    "text": "and of course they got marginal improvements and then they tried to develop their own SQL query engine very",
    "start": "384080",
    "end": "390680"
  },
  {
    "text": "ambitious effort really good Engineers but they're MRP Engineers they're not",
    "start": "390680",
    "end": "396000"
  },
  {
    "text": "data Engineers they're not uh data SCI not uh database",
    "start": "396000",
    "end": "402000"
  },
  {
    "start": "402000",
    "end": "465000"
  },
  {
    "text": "scientist so the solution uh and I think this is one that's pretty well known I call it SQL",
    "start": "402000",
    "end": "409400"
  },
  {
    "text": "ify it basically is if you have some ugly data",
    "start": "409400",
    "end": "414479"
  },
  {
    "text": "source the easiest thing to do is basically replicate out of you know for",
    "start": "414479",
    "end": "420400"
  },
  {
    "text": "those of you that made the mistake of using no SQL some you may been still be doing it um you know you can actually",
    "start": "420400",
    "end": "427759"
  },
  {
    "text": "make it consumable to people so they have to write parsers to adjacent by actually replicating the data",
    "start": "427759",
    "end": "433800"
  },
  {
    "text": "interesting out to a good relational data source so that's the first thing",
    "start": "433800",
    "end": "440039"
  },
  {
    "text": "very easy to do the second thing is that there are still some applications that have to go at this complicated Network",
    "start": "440039",
    "end": "446919"
  },
  {
    "text": "database and the solution there is to take there's a three or four companies in the world that make OEM SQL engines",
    "start": "446919",
    "end": "454120"
  },
  {
    "text": "so they're SQL and the client and inside you basically build the code to navigate",
    "start": "454120",
    "end": "459879"
  },
  {
    "text": "so they contracted with one of those companies and so they're able to do this so the good news is they have a",
    "start": "459879",
    "end": "466080"
  },
  {
    "start": "465000",
    "end": "502000"
  },
  {
    "text": "near-term victory and going back to vcat's talk it's very important to",
    "start": "466080",
    "end": "471840"
  },
  {
    "text": "always have a shortterm something gives people a ha especially when you're going to do something quite risky which we're",
    "start": "471840",
    "end": "478159"
  },
  {
    "text": "about to do this was not risky so the customers were very happy",
    "start": "478159",
    "end": "484599"
  },
  {
    "text": "they all went to the customer meeting everybody saw the demo they were going to be able to do their own reports with",
    "start": "484599",
    "end": "490039"
  },
  {
    "text": "whatever Crystal Reports whatever your favorite pro you know query tool was at at the time and uh able to move ahead so",
    "start": "490039",
    "end": "498560"
  },
  {
    "text": "the customers get new confidence however the real ticking Time Bomb is",
    "start": "498560",
    "end": "505720"
  },
  {
    "start": "502000",
    "end": "577000"
  },
  {
    "text": "this Legacy Network database",
    "start": "505720",
    "end": "510919"
  },
  {
    "text": "um by this point they were the only major customer on the Ln",
    "start": "511120",
    "end": "517680"
  },
  {
    "text": "DB and the vendor was limping and quietly even called up and",
    "start": "517680",
    "end": "523080"
  },
  {
    "text": "said how would you like to buy us the customers heard this and they",
    "start": "523080",
    "end": "530519"
  },
  {
    "text": "panicked this situation by the way is not uncommon you may think it's so there",
    "start": "530920",
    "end": "538240"
  },
  {
    "text": "hundreds of large customers essentially many all of them have on Prem multiple on-prem databases and",
    "start": "538240",
    "end": "545279"
  },
  {
    "text": "Geographic locations um so they're not running SAS right some place far away in the",
    "start": "545279",
    "end": "553920"
  },
  {
    "text": "cloud and the customers are saying how are we going to take our",
    "start": "553920",
    "end": "559760"
  },
  {
    "text": "data from our lndb and get it into a modern Source modern in this sense is a",
    "start": "559760",
    "end": "565839"
  },
  {
    "text": "you know relational platform that runs probably on Microsoft or or perhaps",
    "start": "565839",
    "end": "572160"
  },
  {
    "text": "IBM so that's that's the small challenge they worried about now of course the conventional",
    "start": "572160",
    "end": "579480"
  },
  {
    "start": "577000",
    "end": "652000"
  },
  {
    "text": "approach and the one that the Erp engineering team and there's no fault these are very talented people but",
    "start": "579480",
    "end": "586200"
  },
  {
    "text": "they're not database Engineers I just want to make that clear so they're application Engineers who know how to",
    "start": "586200",
    "end": "592800"
  },
  {
    "text": "really use this database so their idea was to write all the queries that need to be",
    "start": "592800",
    "end": "599040"
  },
  {
    "text": "write to and then once you've got all the data out put it in a really nice",
    "start": "599040",
    "end": "604279"
  },
  {
    "text": "format like Jason and then you know take it and write SQL queries and stuff it",
    "start": "604279",
    "end": "611040"
  },
  {
    "text": "in um this is a really hard problem um it's very hard it's even",
    "start": "611040",
    "end": "618279"
  },
  {
    "text": "harder to test and the performance really sucks this is guaranteed to be very",
    "start": "618279",
    "end": "625680"
  },
  {
    "text": "slow the other problem is the customers allowed to have",
    "start": "625680",
    "end": "630720"
  },
  {
    "text": "extensions and this all has to run at the customers D customers on Prem",
    "start": "630720",
    "end": "636200"
  },
  {
    "text": "database uh in some cases like military customers you can't even get people into",
    "start": "636200",
    "end": "642240"
  },
  {
    "text": "the room because you need security clearances to do",
    "start": "642240",
    "end": "648279"
  },
  {
    "text": "this so they make it a little harder to do",
    "start": "648320",
    "end": "653760"
  },
  {
    "start": "652000",
    "end": "735000"
  },
  {
    "text": "so need an Innovative solution the first solution is if you're going to move",
    "start": "653760",
    "end": "660399"
  },
  {
    "text": "you know you know terabytes well pedabytes of data you're not going to do",
    "start": "660399",
    "end": "666880"
  },
  {
    "text": "that using random access technology and you're not going to do it",
    "start": "666880",
    "end": "672279"
  },
  {
    "text": "without batch and binary so we need a simple solution so",
    "start": "672279",
    "end": "677480"
  },
  {
    "text": "The Simple Solution I'll be going through it is essentially use physical access you know read The Naked pages off",
    "start": "677480",
    "end": "684720"
  },
  {
    "text": "the disk you know bypassing the schema",
    "start": "684720",
    "end": "691240"
  },
  {
    "text": "use sort merge because we know that works and it's fast and it'll work no matter of scale because some people's",
    "start": "691800",
    "end": "698480"
  },
  {
    "text": "machines don't have very much memory in them and old search s merge algorithms",
    "start": "698480",
    "end": "703519"
  },
  {
    "text": "could be done on machines with 16 kbytes of memory not advocating that and the",
    "start": "703519",
    "end": "710560"
  },
  {
    "text": "inspiration we take is from something I'll call the humle Linker Linker if you",
    "start": "710560",
    "end": "715680"
  },
  {
    "text": "know about a linking loader basically you have refs and deps in your program",
    "start": "715680",
    "end": "720880"
  },
  {
    "text": "and what the Linker does is take multiple binaries and connect those together and put them and produces an",
    "start": "720880",
    "end": "729519"
  },
  {
    "text": "executable so it just resolves these name matches and so on so just a",
    "start": "729519",
    "end": "736839"
  },
  {
    "start": "735000",
    "end": "814000"
  },
  {
    "text": "brief segue uh no matter what you're using SQL",
    "start": "736839",
    "end": "744680"
  },
  {
    "text": "pick your favorite query language uh walk the",
    "start": "744680",
    "end": "750519"
  },
  {
    "text": "database Through The Logical schema is painfully slow and error",
    "start": "750519",
    "end": "756480"
  },
  {
    "text": "prone so the easy way to do this is to get physical actually understand what the",
    "start": "756480",
    "end": "763760"
  },
  {
    "text": "database Pages look like and turns out that uh a network database and the",
    "start": "763760",
    "end": "770680"
  },
  {
    "text": "latest Oracle database the D the pages are essentially the same they've got check some blocks at the top they've got",
    "start": "770680",
    "end": "777480"
  },
  {
    "text": "floating records with IDs in them there's a free space list and so",
    "start": "777480",
    "end": "782720"
  },
  {
    "text": "on so when you actually look at these things just at DIS Pages they don't look very different so we're going to take",
    "start": "782720",
    "end": "789519"
  },
  {
    "text": "advantage of that and we see we have all these Rings The",
    "start": "789519",
    "end": "795120"
  },
  {
    "text": "implementation all these ring structures are actually pointers inside the database because that's how the",
    "start": "795120",
    "end": "800199"
  },
  {
    "text": "navigation works now obviously we're going to relational databases so those pointers",
    "start": "800199",
    "end": "806000"
  },
  {
    "text": "have to go poof into something and that's going to be joined",
    "start": "806000",
    "end": "811120"
  },
  {
    "text": "table so the essence of this approach is very simple we're going to read",
    "start": "813800",
    "end": "820279"
  },
  {
    "start": "814000",
    "end": "937000"
  },
  {
    "text": "physically all the pages in The Legacy database we're going to move those pages",
    "start": "820279",
    "end": "827040"
  },
  {
    "text": "uh you know block by block sort of block move them over and re reshape them as",
    "start": "827040",
    "end": "832880"
  },
  {
    "text": "relational database Pages quite a straightforward operation",
    "start": "832880",
    "end": "838600"
  },
  {
    "text": "we're going to capture the mapping you know what what was the disc address in the old database what's the disc address",
    "start": "838600",
    "end": "845480"
  },
  {
    "text": "in the new database and what were the types of the records and they're also going to",
    "start": "845480",
    "end": "851120"
  },
  {
    "text": "capture the pointer mappings because the picture disappear but there's lots of pointers in this network",
    "start": "851120",
    "end": "857240"
  },
  {
    "text": "database so we'll we'll essentially keep track of where those pointers pointed to in the old database and we'll keep the",
    "start": "857240",
    "end": "863480"
  },
  {
    "text": "types and we'll also keep uh the record that they're going to",
    "start": "863480",
    "end": "869720"
  },
  {
    "text": "given these we can just block by block move the",
    "start": "869720",
    "end": "875399"
  },
  {
    "text": "entire you know Legacy database to the new database and the really exciting",
    "start": "875399",
    "end": "881680"
  },
  {
    "text": "thing because my machine's already saturated I can actually do this from a dump tape or dump block or parallel",
    "start": "881680",
    "end": "890399"
  },
  {
    "text": "access to the S the the actual disc controllers I can you do it on the new",
    "start": "890399",
    "end": "896279"
  },
  {
    "text": "hardware so I'm not going to break production of the existing system because if I'm going to be moving you",
    "start": "896279",
    "end": "904360"
  },
  {
    "text": "know terabytes and terabytes of data uh I don't want to be interfering",
    "start": "904360",
    "end": "910040"
  },
  {
    "text": "with the production system that's one of the key so the end then we just do a sort",
    "start": "910040",
    "end": "916959"
  },
  {
    "text": "merge essentially like this ref def match except we're doing it over a huge amount of dis space and we basically go",
    "start": "916959",
    "end": "923639"
  },
  {
    "text": "and just patch fix up all the fix physical records",
    "start": "923639",
    "end": "929120"
  },
  {
    "text": "very simple algorithm still pretty scary but",
    "start": "929120",
    "end": "936279"
  },
  {
    "text": "simple and I just move along I think everybody know that binary is better",
    "start": "936440",
    "end": "942040"
  },
  {
    "start": "937000",
    "end": "969000"
  },
  {
    "text": "than bat binary is better um if you know nothing else please do not use Json",
    "start": "942040",
    "end": "949040"
  },
  {
    "text": "unless you have a permit you want to find out how to waste a lot of machine Cycles uh you know",
    "start": "949040",
    "end": "956079"
  },
  {
    "text": "basically how to make your data so you can figure out what it is make sure it's schema less by the way that way when you",
    "start": "956079",
    "end": "961399"
  },
  {
    "text": "add some Fields you'll have to know what day you added them because you don't have a schema to see them I can't",
    "start": "961399",
    "end": "967160"
  },
  {
    "text": "believe how many people still do this the other thing is batch is better if you really want to go fast if you really",
    "start": "967160",
    "end": "973279"
  },
  {
    "start": "969000",
    "end": "1003000"
  },
  {
    "text": "want a high throughput you're not going to have a real-time system unless it's a",
    "start": "973279",
    "end": "978560"
  },
  {
    "text": "batch system you'll process like a thousand transactions at a time and people in",
    "start": "978560",
    "end": "984440"
  },
  {
    "text": "Chicago know this in the financial Community already um and you it's a couple of Aeron messaging things from",
    "start": "984440",
    "end": "991480"
  },
  {
    "text": "Martin Thompson that barely very much has B this so this really favors",
    "start": "991480",
    "end": "997160"
  },
  {
    "text": "processing the other thing is much simpler so correctness is much easier to reason",
    "start": "997160",
    "end": "1003160"
  },
  {
    "start": "1003000",
    "end": "1069000"
  },
  {
    "text": "about now one of the things that's very important here is that we serialize",
    "start": "1003160",
    "end": "1008279"
  },
  {
    "text": "things quickly and so the best serialization technique I'm aware of goes back before",
    "start": "1008279",
    "end": "1015079"
  },
  {
    "text": "protocol buffers and actually it's much like something now called Captain",
    "start": "1015079",
    "end": "1020199"
  },
  {
    "text": "Proto but basically you have a set of objects or records in memory or dis and",
    "start": "1020199",
    "end": "1026678"
  },
  {
    "text": "what you do is you grab memory a chunk of memory and you pack them into that memory and you just change all the",
    "start": "1026679",
    "end": "1033280"
  },
  {
    "text": "pointers to offset pointers once the the the things are converted to offset pointers you can transmit the data in a",
    "start": "1033280",
    "end": "1041038"
  },
  {
    "text": "block and then you can just relocate those pointers and then you can uh if",
    "start": "1041039",
    "end": "1046640"
  },
  {
    "text": "you you have to do this you have to have access to the underlying sort of GC mechanisms but basically you can lay it",
    "start": "1046640",
    "end": "1052160"
  },
  {
    "text": "out in your Java space or your c space and you can say okay I've got this physical chunk you know become",
    "start": "1052160",
    "end": "1060480"
  },
  {
    "text": "objects um which is very straightforward to do with the I mean you have to know something about the JPM or the C but",
    "start": "1060480",
    "end": "1067440"
  },
  {
    "text": "it's still pretty easy so the big thing is that some",
    "start": "1067440",
    "end": "1073320"
  },
  {
    "start": "1069000",
    "end": "1228000"
  },
  {
    "text": "people would think of this as a risky operation so we want to give the customer some some confidence um not",
    "start": "1073320",
    "end": "1080679"
  },
  {
    "text": "only want to give the customers confidence we're actually terrified that this thing might not work right we're",
    "start": "1080679",
    "end": "1087039"
  },
  {
    "text": "going to be moving you know hundreds of thousands of database Pages at every",
    "start": "1087039",
    "end": "1092760"
  },
  {
    "text": "customer site unattended so first thing is the",
    "start": "1092760",
    "end": "1099919"
  },
  {
    "text": "algorithm is specified using a very old technique called decision tables um TBL driven programming is",
    "start": "1099919",
    "end": "1107760"
  },
  {
    "text": "still one of the easiest ways of R things since basically you can have state tables decision tables and",
    "start": "1107760",
    "end": "1113120"
  },
  {
    "text": "constraint tables and uh much of life can be done with those these are very straightforward to",
    "start": "1113120",
    "end": "1120080"
  },
  {
    "text": "verify and Implement in fact the implementation can be automated the other thing is we wanted to prototype",
    "start": "1120080",
    "end": "1126039"
  },
  {
    "text": "the algorithm to see whether it worked so to prototype it we basically",
    "start": "1126039",
    "end": "1131400"
  },
  {
    "text": "wrote A U prototype code in a functional array",
    "start": "1131400",
    "end": "1137280"
  },
  {
    "text": "language so if you see some J Code up here in a second you'll know what what it was for and we were very easy very",
    "start": "1137280",
    "end": "1144799"
  },
  {
    "text": "quickly able to prototype using a large in memory implementation that the algorithms actually worked so our",
    "start": "1144799",
    "end": "1152320"
  },
  {
    "text": "confidence is getting up you know we reviewed the decision tables did implementation um and the other thing he",
    "start": "1152320",
    "end": "1158840"
  },
  {
    "text": "said well when we moving all the code because we're going to be we're going taking bit pack fields and various other",
    "start": "1158840",
    "end": "1165600"
  },
  {
    "text": "things in the ugly old database and doing something else weird with them when we put them in the newba",
    "start": "1165600",
    "end": "1171840"
  },
  {
    "text": "database um you know that migration that simple moving could be bugs so what we",
    "start": "1171840",
    "end": "1178240"
  },
  {
    "text": "did is we generated from the two schemas we generated the source code so we could actually see in the source code of the",
    "start": "1178240",
    "end": "1184919"
  },
  {
    "text": "language and we can generate the source code for you know C on one side and you",
    "start": "1184919",
    "end": "1189960"
  },
  {
    "text": "know PLS on the other side you won't know what PLS is but there is a language called PLS which is what you had to use",
    "start": "1189960",
    "end": "1196600"
  },
  {
    "text": "to talk to this database",
    "start": "1196600",
    "end": "1200440"
  },
  {
    "text": "so and having the source code means you can efficiently you know it'll run as",
    "start": "1202400",
    "end": "1207520"
  },
  {
    "text": "fast as you can run in the platform um it's straightforward to review because it's basically just move",
    "start": "1207520",
    "end": "1214120"
  },
  {
    "text": "operations um and the other thing is you can actually now do database restructuring because this is the place",
    "start": "1214120",
    "end": "1219720"
  },
  {
    "text": "where you can put in the code to split records add Fields uh do all those things that you wish you could have done",
    "start": "1219720",
    "end": "1225039"
  },
  {
    "text": "through a restructuring activity so I think",
    "start": "1225039",
    "end": "1232400"
  },
  {
    "start": "1228000",
    "end": "1793000"
  },
  {
    "text": "the let just go",
    "start": "1232400",
    "end": "1236159"
  },
  {
    "text": "back so that it turns out that um this",
    "start": "1238760",
    "end": "1243919"
  },
  {
    "text": "is one of the few times that you can actually refactor have you ever seen a database refactoring",
    "start": "1243919",
    "end": "1249320"
  },
  {
    "text": "tool because there're aren't ining that I know",
    "start": "1249320",
    "end": "1254880"
  },
  {
    "text": "of but it turns out that using the exactly the same techniques you can",
    "start": "1254880",
    "end": "1260400"
  },
  {
    "text": "basically transform that existing schema and a new schema and all of the",
    "start": "1260400",
    "end": "1266159"
  },
  {
    "text": "operations can be done by essentially just putting extensions here to move",
    "start": "1266159",
    "end": "1271360"
  },
  {
    "text": "remove add records whatever because they're all just something that can be",
    "start": "1271360",
    "end": "1276520"
  },
  {
    "text": "done on the physical store with the fix UPS so you can do the refactoring as",
    "start": "1276520",
    "end": "1282159"
  },
  {
    "text": "well um we didn't mention that at the first time because we didn't want to",
    "start": "1282159",
    "end": "1287360"
  },
  {
    "text": "offer that feature but it's really quite straightforward to to provide",
    "start": "1287360",
    "end": "1293158"
  },
  {
    "text": "it so the question comes how do we have confidence in",
    "start": "1294960",
    "end": "1302320"
  },
  {
    "text": "this because these are not the sort of things that you get to you know let's",
    "start": "1302320",
    "end": "1307360"
  },
  {
    "text": "try it oh didn't work we'll try it again right we we sent it to 10 customers and",
    "start": "1307360",
    "end": "1314120"
  },
  {
    "text": "you know the first 10 customers didn't know what they were doing so they just let it run and until it finished nobody",
    "start": "1314120",
    "end": "1320279"
  },
  {
    "text": "checked it so first thing we need to do is look",
    "start": "1320279",
    "end": "1325360"
  },
  {
    "text": "at the design so the design basically uh we have these decision tables that's",
    "start": "1325360",
    "end": "1330640"
  },
  {
    "text": "what they look like uh that's actually a fraction of the real code the tables are",
    "start": "1330640",
    "end": "1335679"
  },
  {
    "text": "quite small uh and then we had a prototype and",
    "start": "1335679",
    "end": "1341520"
  },
  {
    "text": "for those who we a vcat fan of functional program that's some J",
    "start": "1341520",
    "end": "1346960"
  },
  {
    "text": "Code uh and then we did something remember we generated all the",
    "start": "1346960",
    "end": "1353760"
  },
  {
    "text": "source code to move the blocks from the you know Legacy system to the new system",
    "start": "1353760",
    "end": "1359400"
  },
  {
    "text": "so then we reviewed that source code and um since this stuff is pretty",
    "start": "1359400",
    "end": "1364960"
  },
  {
    "text": "scary we actually reviewed it with two independent teams all these things were done by having two teams looking at this",
    "start": "1364960",
    "end": "1372559"
  },
  {
    "text": "it's a very old technique but um many you know old people have found that",
    "start": "1372559",
    "end": "1379440"
  },
  {
    "text": "you can write the same program twice with two different people fairly quickly especially if you mod modularize",
    "start": "1379440",
    "end": "1386320"
  },
  {
    "text": "it in tables uh and so on like this so that we're using a technique called ivnv",
    "start": "1386320",
    "end": "1393880"
  },
  {
    "text": "which basically is two different teams writing not all of the code but some of",
    "start": "1393880",
    "end": "1399240"
  },
  {
    "text": "the code and I'll explain what I mean there in a second so having done the review now we",
    "start": "1399240",
    "end": "1405760"
  },
  {
    "text": "have confidence we can start looking looking at the implementation so the implementation",
    "start": "1405760",
    "end": "1412279"
  },
  {
    "text": "testing first of all uh before we do anything else",
    "start": "1412279",
    "end": "1418520"
  },
  {
    "text": "um databases are out they're spinning around for a long time and believe it or",
    "start": "1418520",
    "end": "1423960"
  },
  {
    "text": "not not every page or relationship in the database is in great shape you know",
    "start": "1423960",
    "end": "1431159"
  },
  {
    "text": "there are just a lot of places where the elephant came in at night and stomped on a lot of your database pages",
    "start": "1431159",
    "end": "1439159"
  },
  {
    "text": "and that's why one of the reasons why you can't also write queries because often there's pages in the database that",
    "start": "1439159",
    "end": "1444440"
  },
  {
    "text": "you can't read because they've been stomped on for some reason and if you try and migrate data",
    "start": "1444440",
    "end": "1452080"
  },
  {
    "text": "that's been stomped on um you end up throwing exceptions all the time now",
    "start": "1452080",
    "end": "1458000"
  },
  {
    "text": "some people think that's fine but when you're moving you know hundreds of terabytes of data you really don't want",
    "start": "1458000",
    "end": "1464320"
  },
  {
    "text": "you know the thing to stop and say well let's run it over or see what this problem is so before you do anything you",
    "start": "1464320",
    "end": "1470799"
  },
  {
    "text": "write a health check and the health check uses exactly the same algorithms because essentially",
    "start": "1470799",
    "end": "1476480"
  },
  {
    "text": "all you really have to do is validate that those pointer rings are accurate and that the check sums and everything",
    "start": "1476480",
    "end": "1482640"
  },
  {
    "text": "that are on the physical data pages are correct and the other thing you can do",
    "start": "1482640",
    "end": "1490000"
  },
  {
    "text": "is you could health check routine can usually fix up the database in the sense that it can at least fix up the page so",
    "start": "1490000",
    "end": "1496120"
  },
  {
    "text": "it's not going to cost the the migration software to crash not going to throw an",
    "start": "1496120",
    "end": "1502720"
  },
  {
    "text": "exception so now you got the health check in place this is also handy because you can run the same",
    "start": "1502720",
    "end": "1508600"
  },
  {
    "text": "implementation on the new database to make sure that it also you know you didn't smash the database pages in or",
    "start": "1508600",
    "end": "1515720"
  },
  {
    "text": "put them in incorrectly because again most people don't ever see physical database",
    "start": "1515720",
    "end": "1522440"
  },
  {
    "text": "pages so you you want to be very careful about doing this I'm I'm not a this is something",
    "start": "1522440",
    "end": "1529440"
  },
  {
    "text": "everybody should go back and say you know I think we should do this but it is the only way out of this hole that I",
    "start": "1529440",
    "end": "1535360"
  },
  {
    "text": "know of if you really want to deal it then we do lots of tests first we",
    "start": "1535360",
    "end": "1541320"
  },
  {
    "text": "test that uh we produce the files correctly which is easy to do that we've",
    "start": "1541320",
    "end": "1546559"
  },
  {
    "text": "got these sort merge files produced correctly we look at the source code we check that we can actually move that we",
    "start": "1546559",
    "end": "1553799"
  },
  {
    "text": "can actually take a physical page from one page one database move it to the other one and actually go and look and",
    "start": "1553799",
    "end": "1560279"
  },
  {
    "text": "verify those bits and",
    "start": "1560279",
    "end": "1566440"
  },
  {
    "text": "then once again re review the actual",
    "start": "1566440",
    "end": "1573000"
  },
  {
    "text": "implementation now we get to the migration",
    "start": "1575960",
    "end": "1580440"
  },
  {
    "text": "validation and how do we test this",
    "start": "1581799",
    "end": "1587360"
  },
  {
    "text": "Michael had to run away I could and talk about you know hey let's write some unit",
    "start": "1589320",
    "end": "1595200"
  },
  {
    "text": "tests for this come on you have fill your boots",
    "start": "1595200",
    "end": "1601840"
  },
  {
    "text": "you will die trying to unit test something like this you have to come up with a",
    "start": "1601840",
    "end": "1609080"
  },
  {
    "text": "different idea and the different idea again involves the same principles one is we",
    "start": "1609080",
    "end": "1616120"
  },
  {
    "text": "need to check to know things are there that's an aggregate",
    "start": "1616120",
    "end": "1621440"
  },
  {
    "text": "check and the other is that we need to be able to inspect this and verify it",
    "start": "1621440",
    "end": "1629320"
  },
  {
    "text": "ourselves so we can do random inspection for that so",
    "start": "1629320",
    "end": "1636559"
  },
  {
    "text": "validation I mentioned there were two teams one of the",
    "start": "1636559",
    "end": "1641600"
  },
  {
    "text": "teams doesn't is going to they're only worried about doing the validation so they're going to write a quick and dirty",
    "start": "1641600",
    "end": "1647000"
  },
  {
    "text": "version of the migration thing because they're not going to actually move any of the records they're just going to",
    "start": "1647000",
    "end": "1652600"
  },
  {
    "text": "check some of them so they're essentially going to construct a set of invariants over these",
    "start": "1652600",
    "end": "1659320"
  },
  {
    "text": "databases which have to be true going to implement those invariants uh which means looking at the",
    "start": "1659320",
    "end": "1666320"
  },
  {
    "text": "data and also looking at the relationships that are being there they'll use the same file",
    "start": "1666320",
    "end": "1672559"
  },
  {
    "text": "structure that I talked about and they will run that completely",
    "start": "1672559",
    "end": "1678840"
  },
  {
    "text": "independently as soon as the database has been migrated they'll run the validation algorithms",
    "start": "1678840",
    "end": "1685600"
  },
  {
    "text": "on the new uh Target",
    "start": "1685600",
    "end": "1691600"
  },
  {
    "text": "database this provides Rock Solid assurance that the data has come",
    "start": "1692000",
    "end": "1700080"
  },
  {
    "text": "across from the Legacy system to the new",
    "start": "1700080",
    "end": "1705760"
  },
  {
    "text": "system and being preserved so this is",
    "start": "1705919",
    "end": "1711000"
  },
  {
    "text": "really uh it was a really a fun project I mean a little scary at",
    "start": "1711000",
    "end": "1717679"
  },
  {
    "text": "times I have to say that the the the um my grad",
    "start": "1717760",
    "end": "1723960"
  },
  {
    "text": "students uh that worked on this re recent hires didn't know how scary it",
    "start": "1723960",
    "end": "1730000"
  },
  {
    "text": "was this say I'm a big fan of Seymour cray you know hire them young they don't know it can't be done they were",
    "start": "1730000",
    "end": "1735880"
  },
  {
    "text": "terrified when they actually lose learned what the algorithms were going to be doing in the scale that they were",
    "start": "1735880",
    "end": "1741240"
  },
  {
    "text": "running but the Assurance we had through validation was invaluable because it",
    "start": "1741240",
    "end": "1746679"
  },
  {
    "text": "found all sorts of bugs during the implementation and the first few runs and so on so we gained a very very high",
    "start": "1746679",
    "end": "1752760"
  },
  {
    "text": "confidence level through doing this and I just mention it because I think it's interesting to think about you know",
    "start": "1752760",
    "end": "1758760"
  },
  {
    "text": "people have all these approaches I mean property based testing is the best practice which the agile community may",
    "start": "1758760",
    "end": "1764559"
  },
  {
    "text": "learn someday um but you know there are other ways to test systems besides",
    "start": "1764559",
    "end": "1771679"
  },
  {
    "text": "writing classical test cases and Le well this the validation is in fact an",
    "start": "1771679",
    "end": "1778880"
  },
  {
    "text": "implementation of a kind of property based testing where we're certifying these invariants so this is a very",
    "start": "1778880",
    "end": "1784760"
  },
  {
    "text": "powerful way to go so job done great ship it out to the customers",
    "start": "1784760",
    "end": "1791640"
  },
  {
    "text": "no problem oh there is one other problem um these customers have Legacy",
    "start": "1791640",
    "end": "1799919"
  },
  {
    "start": "1793000",
    "end": "1973000"
  },
  {
    "text": "code that reads and writes this database",
    "start": "1799919",
    "end": "1805840"
  },
  {
    "text": "oh okay Dave what's your magic trick for doing this well I'm going to disappoint you",
    "start": "1805840",
    "end": "1813320"
  },
  {
    "text": "because not everything is a free lunch with magic tricks some things are just",
    "start": "1813320",
    "end": "1819000"
  },
  {
    "text": "we've got to rewrite some code but we can try and apply a diff",
    "start": "1819000",
    "end": "1824399"
  },
  {
    "text": "discipline approach for doing this first thing is that when we analyze",
    "start": "1824399",
    "end": "1829519"
  },
  {
    "text": "the Legacy code we identify all the readers and writers customers can have that too so",
    "start": "1829519",
    "end": "1836480"
  },
  {
    "text": "they can verify their own code if they got so again we get essentially tables",
    "start": "1836480",
    "end": "1844440"
  },
  {
    "text": "large ones databases of reader and writer",
    "start": "1844440",
    "end": "1849880"
  },
  {
    "text": "identification now of course we wanted to write something it would automatically translate these DML",
    "start": "1849880",
    "end": "1857399"
  },
  {
    "text": "queries and the network database and turn them into relational queries and so on and that was a very interesting",
    "start": "1857399",
    "end": "1863320"
  },
  {
    "text": "research problem but there's a lot of risk that it would go",
    "start": "1863320",
    "end": "1868360"
  },
  {
    "text": "wrong and since most of the query code was already replaced by people going to SQL so they didn't need the you know the",
    "start": "1868360",
    "end": "1877039"
  },
  {
    "text": "most of the reader problems are just solved by people just migrating to SQL code and using reporting generator so",
    "start": "1877039",
    "end": "1883399"
  },
  {
    "text": "for this customer uh this wasn't a big problem",
    "start": "1883399",
    "end": "1889600"
  },
  {
    "text": "but for the complicated queries which you know had to do these recursive uh",
    "start": "1890720",
    "end": "1897159"
  },
  {
    "text": "you know transitive you joins over the transitive closure U which were done through",
    "start": "1897159",
    "end": "1902880"
  },
  {
    "text": "pointer walking uh there was no solution uh we had no magic had to rewrite",
    "start": "1902880",
    "end": "1909639"
  },
  {
    "text": "those in you know modern SQL for which there are things to do operations over",
    "start": "1909639",
    "end": "1916320"
  },
  {
    "text": "the transit of closure and in a couple of cases we had to go to",
    "start": "1916320",
    "end": "1921360"
  },
  {
    "text": "essentially embedded SQL where you know you've got you know C code which is basically talking to moving cursors and",
    "start": "1921360",
    "end": "1928480"
  },
  {
    "text": "things like that not something you want to do for many things but again we reduce the percentage of that to some",
    "start": "1928480",
    "end": "1934960"
  },
  {
    "text": "small bit and so what um that allowed is basically to",
    "start": "1934960",
    "end": "1941760"
  },
  {
    "text": "migrate a whole lot of customers with a complicated problem off",
    "start": "1941760",
    "end": "1947000"
  },
  {
    "text": "of uh scary but risky technology and risky technology uh to a uh modern world",
    "start": "1947000",
    "end": "1957120"
  },
  {
    "text": "well modern to them a relational database world right I think most things are going to end up looking like",
    "start": "1957120",
    "end": "1963080"
  },
  {
    "text": "relational databases so I think S no SQL will probably be dead within you know",
    "start": "1963080",
    "end": "1971080"
  },
  {
    "text": "2025 so the point of this talk is not that this was a",
    "start": "1972399",
    "end": "1978480"
  },
  {
    "start": "1973000",
    "end": "2259000"
  },
  {
    "text": "brilliant decision I was you know I had some brilliant students graduate recent",
    "start": "1978480",
    "end": "1983559"
  },
  {
    "text": "grads who helped um but rather it was just looking at a very scary problem and",
    "start": "1983559",
    "end": "1989760"
  },
  {
    "text": "trying to break it down with different techniques and using things from different Generations in time decision",
    "start": "1989760",
    "end": "1996399"
  },
  {
    "text": "tables come from the 1960s 7s at",
    "start": "1996399",
    "end": "2001559"
  },
  {
    "text": "best functional programming uh you know Jay was pretty Advanced thing to do at the time time",
    "start": "2001559",
    "end": "2008799"
  },
  {
    "text": "now it still is but it allowed us to do this moving the physical pages and doing",
    "start": "2008799",
    "end": "2015559"
  },
  {
    "text": "that those are tricks uh basically if you worked a lot on garbage collectors",
    "start": "2015559",
    "end": "2021639"
  },
  {
    "text": "and systems for managing uh large uh modern object stores these are",
    "start": "2021639",
    "end": "2026760"
  },
  {
    "text": "techniques that come from that area era generating the source code is",
    "start": "2026760",
    "end": "2033440"
  },
  {
    "text": "basically a way to make things to be transparent so you can read it and also get",
    "start": "2033440",
    "end": "2039399"
  },
  {
    "text": "portability and sort merge is just a way to not be Memory bound you know for",
    "start": "2039399",
    "end": "2046519"
  },
  {
    "text": "actually dealing with this and the algorithms are established so the Innovation here is",
    "start": "2046519",
    "end": "2056760"
  },
  {
    "text": "thinking coming up with a way to take a very risky problem and break it down",
    "start": "2056760",
    "end": "2062040"
  },
  {
    "text": "into small bits that you and a small team of people um",
    "start": "2062040",
    "end": "2068280"
  },
  {
    "text": "or ideally just them go off and do and you know take into account that",
    "start": "2068280",
    "end": "2075960"
  },
  {
    "text": "you couldn't take these systems down they're running live and since they're running on Legacy machines those",
    "start": "2075960",
    "end": "2081839"
  },
  {
    "text": "machines are maxed already so finding a way to say well perhaps we can run the",
    "start": "2081839",
    "end": "2088520"
  },
  {
    "text": "migration on the new hardware as opposed to keep trying to stress the old",
    "start": "2088520",
    "end": "2095200"
  },
  {
    "text": "Hardware so the other thing about this is it was a really fun",
    "start": "2095200",
    "end": "2100440"
  },
  {
    "text": "project was very satisfying wonderful engineering experience and there's tons of these",
    "start": "2100440",
    "end": "2107240"
  },
  {
    "text": "opportunities out there so when someone says you know oh you know you know I'm I",
    "start": "2107240",
    "end": "2114680"
  },
  {
    "text": "got it put on a legacy team on this old system that really sucks you know they",
    "start": "2114680",
    "end": "2121440"
  },
  {
    "text": "don't even program and C right um don't think of it NE",
    "start": "2121440",
    "end": "2127720"
  },
  {
    "text": "necessarily is a really bad job U I have to say I've learned a lot more working",
    "start": "2127720",
    "end": "2134520"
  },
  {
    "text": "on uh some of these really complicated messes U than I have working with some",
    "start": "2134520",
    "end": "2140520"
  },
  {
    "text": "of the newer sexiest Technologies and the customer",
    "start": "2140520",
    "end": "2146720"
  },
  {
    "text": "satisfaction you know if something turns you on for me it's building an application that a customer",
    "start": "2146720",
    "end": "2153119"
  },
  {
    "text": "uses you know you know there there there were customer",
    "start": "2153119",
    "end": "2158520"
  },
  {
    "text": "virtually in tears because they didn't believe the problem was solved they just they saw somehow manually they going to",
    "start": "2158520",
    "end": "2164400"
  },
  {
    "text": "have to rewrite the whole system and do it and the other sort of point is please",
    "start": "2164400",
    "end": "2170280"
  },
  {
    "text": "don't rewrite and please stop lying when you say refactor when you're",
    "start": "2170280",
    "end": "2176400"
  },
  {
    "text": "rewriting you know technical debt and",
    "start": "2176400",
    "end": "2181520"
  },
  {
    "text": "refactoring you'll hear from Kent I'm sure have a meaning and when Ward and",
    "start": "2181520",
    "end": "2186839"
  },
  {
    "text": "Kent Coast those terms but and vcat mentioned it's basically cleaning up the",
    "start": "2186839",
    "end": "2192079"
  },
  {
    "text": "little bits over days it's not fixing your mess that you've ignored for days because you're busy you know doing agile",
    "start": "2192079",
    "end": "2200160"
  },
  {
    "text": "stuff and then you basically have a mess so you have to beg for technical debt",
    "start": "2200160",
    "end": "2206440"
  },
  {
    "text": "cards stop telling your Executives we're going to solve our business by",
    "start": "2207040",
    "end": "2212319"
  },
  {
    "text": "refactoring the code when you're lying it's not equivalence preserved",
    "start": "2212319",
    "end": "2218599"
  },
  {
    "text": "there are no decent refactoring re there are no decent rewrite tools and for large code bases there are",
    "start": "2218599",
    "end": "2225760"
  },
  {
    "text": "very few decent refactoring tools or practices most of these things end up in",
    "start": "2225760",
    "end": "2232599"
  },
  {
    "text": "a mess most of them take two or three years this was done in a period of",
    "start": "2232599",
    "end": "2239240"
  },
  {
    "text": "months often you can make a difference by looking at that part of the Legacy",
    "start": "2239240",
    "end": "2244280"
  },
  {
    "text": "system which really has the value and which is the bottleneck and inserting",
    "start": "2244280",
    "end": "2250040"
  },
  {
    "text": "new technology new algorithms at a few points rather than rewriting repl",
    "start": "2250040",
    "end": "2257560"
  },
  {
    "text": "platforming any anyway thank you very much for your time [Applause]",
    "start": "2257560",
    "end": "2267059"
  }
]