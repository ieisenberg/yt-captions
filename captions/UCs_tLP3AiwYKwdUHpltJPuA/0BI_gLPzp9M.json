[
  {
    "start": "0",
    "end": "284000"
  },
  {
    "text": "uh yesterday I I wrote on Twitter that uh let's try uh being abroad without",
    "start": "2899",
    "end": "10679"
  },
  {
    "text": "just with the form uh because in Norway probably like in UK um you stop uh",
    "start": "10679",
    "end": "17720"
  },
  {
    "text": "carrying things like driver's license plastic cards like you know you can uh",
    "start": "17720",
    "end": "22800"
  },
  {
    "text": "just have a phone and have everything there and just to top up with your phone and then uh so I just didn't think about",
    "start": "22800",
    "end": "28560"
  },
  {
    "text": "it and then when I was already a longer I thought no I didn't have any any cars with me okay let's try how it works so",
    "start": "28560",
    "end": "33960"
  },
  {
    "text": "far it's been working fine and I'm not hungry uh I I had my uh my food so",
    "start": "33960",
    "end": "42320"
  },
  {
    "text": "so let's uh hope that I will manage to to my my travel uh being uh all just on",
    "start": "42320",
    "end": "51840"
  },
  {
    "text": "my phone but we're going to come about completely different things of course during this hour or maybe 45 minutes uh",
    "start": "51840",
    "end": "59039"
  },
  {
    "text": "so my name is fagiv and I'm working with uh mostly F sharp I've been working for",
    "start": "59039",
    "end": "65040"
  },
  {
    "text": "last uh like six seven years but this talk is completely platform and language agnostic so no",
    "start": "65040",
    "end": "73200"
  },
  {
    "text": "matter but but uh how many of you by the way on Microsoft platform like.net",
    "start": "73200",
    "end": "80460"
  },
  {
    "text": "oh very few uh Java moreheads",
    "start": "80460",
    "end": "87540"
  },
  {
    "text": "um anything else typescript yeah JavaScript yeah",
    "start": "87540",
    "end": "93600"
  },
  {
    "text": "okay uh how many have been using or tried uh the actor model",
    "start": "93600",
    "end": "101340"
  },
  {
    "text": "maybe half actually this talk all not entirely about the actor model so what",
    "start": "101340",
    "end": "108119"
  },
  {
    "text": "I'm going to present there are some principles that can be applied to to other systems and uh I recently",
    "start": "108119",
    "end": "113880"
  },
  {
    "text": "delivered a version of this talk at Kandinsky conference in Berlin and it was another talk which really inspired",
    "start": "113880",
    "end": "120240"
  },
  {
    "text": "me it's about uh why you don't need Saga managers workflow engines and it",
    "start": "120240",
    "end": "126899"
  },
  {
    "text": "resonated very much to what I'm going to present um so it's not only about actors it's",
    "start": "126899",
    "end": "134280"
  },
  {
    "text": "more like how to bring your system to a certain State how to guarantee that your",
    "start": "134280",
    "end": "140340"
  },
  {
    "text": "system will come to the state you wanted to with uh when you base your system on",
    "start": "140340",
    "end": "145800"
  },
  {
    "text": "basically unreliable uh messaging so a few words about our product uh I'm",
    "start": "145800",
    "end": "154260"
  },
  {
    "text": "part of the project for Norwegian Broadcasting Corporation it's uh like an original version of BBC and uh what we",
    "start": "154260",
    "end": "161220"
  },
  {
    "text": "do we take care of uh uh streaming uh platform so people can stream uh radio",
    "start": "161220",
    "end": "167459"
  },
  {
    "text": "programs TV programs podcasts on their uh devices and",
    "start": "167459",
    "end": "173580"
  },
  {
    "text": "um our small group are responsible so for so-called uh media distribution",
    "start": "173580",
    "end": "179340"
  },
  {
    "text": "engine so everything which uh the organization licenses or produces we",
    "start": "179340",
    "end": "185099"
  },
  {
    "text": "need to upload we need to make it available for streaming so there are",
    "start": "185099",
    "end": "190260"
  },
  {
    "text": "very uh hard requirements for durability",
    "start": "190260",
    "end": "195300"
  },
  {
    "text": "for availability of the system uh so we we get through a message queue currently",
    "start": "195300",
    "end": "202200"
  },
  {
    "text": "using rabbiting queue we also use Azure service bus messages and this is entrance to our",
    "start": "202200",
    "end": "210180"
  },
  {
    "text": "system and what we do next we need to this message can take commands about where media file is located what to do",
    "start": "210180",
    "end": "217560"
  },
  {
    "text": "with them and then what we do is basically upload them and then make them available",
    "start": "217560",
    "end": "223140"
  },
  {
    "text": "um so our technical stack again you don't need to know details about that",
    "start": "223140",
    "end": "228180"
  },
  {
    "text": "but just for for your information so you have an idea of what we're working with it's a doctor model using akka.net",
    "start": "228180",
    "end": "234720"
  },
  {
    "text": "cluster which is a very good Port of uh GBM platform so everything which",
    "start": "234720",
    "end": "241379"
  },
  {
    "text": "academic has originates on jbm platform so they have been clever to use same",
    "start": "241379",
    "end": "247379"
  },
  {
    "text": "terminology so if you have some questions about echo.net you can just ask them a stack Overflow without a node",
    "start": "247379",
    "end": "254760"
  },
  {
    "text": "without mentioning this arcade.net you all often get answers from people working on javaside F-sharp is the main",
    "start": "254760",
    "end": "261959"
  },
  {
    "text": "programming language uh so it's functional programming rabbitmq Azure service bus uh we use both SQL noise",
    "start": "261959",
    "end": "269120"
  },
  {
    "text": "databases for for the business layer and this stock is uh is a retrospective",
    "start": "269120",
    "end": "275880"
  },
  {
    "text": "of changes to our approach how are we dealing with uh messages which comes to",
    "start": "275880",
    "end": "283259"
  },
  {
    "text": "our system so how do we provide message handling guarantees",
    "start": "283259",
    "end": "289020"
  },
  {
    "start": "284000",
    "end": "533000"
  },
  {
    "text": "so as as you uh probably know that uh there",
    "start": "289020",
    "end": "294479"
  },
  {
    "text": "are different types of semantics for delivery guarantees there is a of course there is at most ones uh delivery uh",
    "start": "294479",
    "end": "301740"
  },
  {
    "text": "where um basically uh there is no uh guarantee",
    "start": "301740",
    "end": "307860"
  },
  {
    "text": "that uh a message will be delivered it's delivered most of the time but uh",
    "start": "307860",
    "end": "313979"
  },
  {
    "text": "typically it's uh in process messaging storage so if your system",
    "start": "313979",
    "end": "319500"
  },
  {
    "text": "crashes you will lose your message then there is at least one delivery which involves a durable message storage where",
    "start": "319500",
    "end": "327860"
  },
  {
    "text": "uh messages uh uh act upon uh processing",
    "start": "327860",
    "end": "334139"
  },
  {
    "text": "and then if message is not act then it may be retried so and but of course the downside of it that you uh first of all",
    "start": "334139",
    "end": "340919"
  },
  {
    "text": "it counts at the cost of performance and then also it comes at a cost of uh",
    "start": "340919",
    "end": "347280"
  },
  {
    "text": "potential for delivering messages more than once which may or may not have a vital consequences for example if you're",
    "start": "347280",
    "end": "353759"
  },
  {
    "text": "in banking and if it's a command to transfer a payment that can be fatal for",
    "start": "353759",
    "end": "360840"
  },
  {
    "text": "for you if your payment will be transferred multiple times and there is also exactly one's delivery where as uh",
    "start": "360840",
    "end": "368280"
  },
  {
    "text": "the uh this pattern says a message is guaranteed to be only once and uh",
    "start": "368280",
    "end": "374940"
  },
  {
    "text": "probably it's worth uh entire talk which can uh to prove that",
    "start": "374940",
    "end": "381000"
  },
  {
    "text": "um why you shouldn't be doing that so it's it's really costly to provide that and in most of business scenarios it's",
    "start": "381000",
    "end": "389039"
  },
  {
    "text": "uh it's not needed so you can handle your scenarios using first two",
    "start": "389039",
    "end": "395880"
  },
  {
    "text": "scenarios either at most one delivery or G swans delivery uh so those who worked with",
    "start": "395880",
    "end": "404639"
  },
  {
    "text": "um some actor model Frameworks what do you think the world of actors use typically at",
    "start": "404639",
    "end": "411360"
  },
  {
    "text": "most ones or at least once or maybe exactly one so who think that um the actors framework like Microsoft",
    "start": "411360",
    "end": "418440"
  },
  {
    "text": "Airlines like they use at most once delivery",
    "start": "418440",
    "end": "425840"
  },
  {
    "text": "yeah uh one hand or one and half hands I think uh at least once delivery",
    "start": "425940",
    "end": "432180"
  },
  {
    "text": "more hands exactly once delivery no hands okay",
    "start": "432180",
    "end": "438780"
  },
  {
    "text": "um actually uh them by default and uh uh in systems like AKA",
    "start": "438780",
    "end": "446880"
  },
  {
    "text": "it's not even by default this is how it is implemented it's at most once uh uh delivery so basically there is you don't",
    "start": "446880",
    "end": "454740"
  },
  {
    "text": "have a formal guarantee that you will get message more than once and there are many reasons for that uh um probably the",
    "start": "454740",
    "end": "463680"
  },
  {
    "text": "most important reason is that it's costly to have a durable message",
    "start": "463680",
    "end": "469500"
  },
  {
    "text": "delivery mechanism and akka is based for scalability and performance you can",
    "start": "469500",
    "end": "475380"
  },
  {
    "text": "basically have actor based system running in your mobile phone using",
    "start": "475380",
    "end": "481319"
  },
  {
    "text": "um akka and it will work perfectly and then uh if you need to implement",
    "start": "481319",
    "end": "487259"
  },
  {
    "text": "protocol with at least once delivery it's going to cost you so uh What uh they made a decision that you can it",
    "start": "487259",
    "end": "495300"
  },
  {
    "text": "should be up to consumer of the actor model to uh Implement uh at at least",
    "start": "495300",
    "end": "503400"
  },
  {
    "text": "once delivery when they want it in those scenarios instead of sacrifice",
    "start": "503400",
    "end": "508500"
  },
  {
    "text": "sacrificing uh performance and scalability for the sake of making at",
    "start": "508500",
    "end": "514500"
  },
  {
    "text": "least once delivery for everyone so this is in major actor systems it's at most",
    "start": "514500",
    "end": "519599"
  },
  {
    "text": "one's delivery and some systems can be configured to",
    "start": "519599",
    "end": "524700"
  },
  {
    "text": "achieve at least once delivery using uh infinity tries like Microsoft foreign but again even Orleans has at most ones",
    "start": "524700",
    "end": "531120"
  },
  {
    "text": "delivery by default so how can we run",
    "start": "531120",
    "end": "536360"
  },
  {
    "start": "533000",
    "end": "680000"
  },
  {
    "text": "a message delivered delivered because our system is safe they they can't fail yesterday I",
    "start": "536820",
    "end": "545640"
  },
  {
    "text": "read on Twitter my colleague of mine he said that uh complex system of",
    "start": "545640",
    "end": "551880"
  },
  {
    "text": "Enterprise systems they never fail the but they can disappoint so uh so how can we make our system not",
    "start": "551880",
    "end": "561120"
  },
  {
    "text": "disappointing our customers and users if we base it on unreliable at most ones",
    "start": "561120",
    "end": "568140"
  },
  {
    "text": "delivered it so uh coming back to our first diagram so this is our",
    "start": "568140",
    "end": "573620"
  },
  {
    "text": "architecture so we get messages from durable cues but then durability ends",
    "start": "573620",
    "end": "579779"
  },
  {
    "text": "and we have to deal with the rest in our system and make it reliable",
    "start": "579779",
    "end": "585660"
  },
  {
    "text": "so uh we have a message to configuration that actually we configured it in the",
    "start": "585660",
    "end": "593040"
  },
  {
    "text": "beginning uh of our project and we still uh pretty much use the same uh rabbit mq",
    "start": "593040",
    "end": "600300"
  },
  {
    "text": "configuration by the way we have main queue uh for example this is the first user is a queue for uh subtitles and",
    "start": "600300",
    "end": "607740"
  },
  {
    "text": "then um then we have a queue for retries Q for errors and queues for rejected message",
    "start": "607740",
    "end": "614100"
  },
  {
    "text": "so what happens is that uh we have a message and then uh we need to Arc it",
    "start": "614100",
    "end": "619860"
  },
  {
    "text": "acknowledge it uh when um message is handled uh and if we don't",
    "start": "619860",
    "end": "626880"
  },
  {
    "text": "um want to acknowledge it if there are some error happens we put it to retry queue and then after a certain time",
    "start": "626880",
    "end": "633959"
  },
  {
    "text": "message comes back after Fury tries and goes to error queue and so on I eventually can be rejected so what is",
    "start": "633959",
    "end": "640260"
  },
  {
    "text": "good in a systems like rabbitmq set it's a lot of this you can declare it's actually declarative so you can declare",
    "start": "640260",
    "end": "648380"
  },
  {
    "text": "attributes on the right hand side you see some attributes like time to leave dead letter exchange so you can uh uh",
    "start": "648380",
    "end": "656399"
  },
  {
    "text": "make it declarative so the oldest message route how they travel in the system so it works very good but it's",
    "start": "656399",
    "end": "664980"
  },
  {
    "text": "all sort of on the entrance of your system and in the first version of our system we make",
    "start": "664980",
    "end": "672800"
  },
  {
    "text": "these rules uh going through our uh processing logic so uh the version",
    "start": "672800",
    "end": "681779"
  },
  {
    "start": "680000",
    "end": "1064000"
  },
  {
    "text": "one if you use titles of popular songs and we can call",
    "start": "681779",
    "end": "687120"
  },
  {
    "text": "it don't pay the fairmen until he gets you to the other side so what we what we were doing is that okay we're rabbit in",
    "start": "687120",
    "end": "693180"
  },
  {
    "text": "queue so message needs to be acknowledged let's wait with acknowledgment and I think uh uh until",
    "start": "693180",
    "end": "699240"
  },
  {
    "text": "we are fully done with with everything so this is how uh it was working remember uh rabbit Q uh and then uh it",
    "start": "699240",
    "end": "708720"
  },
  {
    "text": "it can be service basket can be uh some Amazon cues and so on so message is",
    "start": "708720",
    "end": "714779"
  },
  {
    "text": "coming to the first actor if you don't use active system it can be first uh web service for example then it goes to the",
    "start": "714779",
    "end": "721320"
  },
  {
    "text": "next next next and then in the end you either acknowledge or negative acknowledge the message and if you",
    "start": "721320",
    "end": "727860"
  },
  {
    "text": "negative acknowledge message goes to retry queue uh so this is not transactional semantics I need to stress",
    "start": "727860",
    "end": "735060"
  },
  {
    "text": "it out it's uh it's at least one delivery actually that we implement we implemented using external durable cues",
    "start": "735060",
    "end": "743579"
  },
  {
    "text": "so uh What uh happened then that and every stage of",
    "start": "743579",
    "end": "749760"
  },
  {
    "text": "message processing we could snack it so we can set negative acknowledgment to that and only the",
    "start": "749760",
    "end": "757740"
  },
  {
    "text": "uh last stage of message processing could send positive acknowledge",
    "start": "757740",
    "end": "764100"
  },
  {
    "text": "uh so in Enterprise patterns is called like",
    "start": "764100",
    "end": "769620"
  },
  {
    "text": "return address pattern so message they're wrapped in some envelope message",
    "start": "769620",
    "end": "774899"
  },
  {
    "text": "envelope with information about uh this acknowledgment ID acknowledgment tag and",
    "start": "774899",
    "end": "780600"
  },
  {
    "text": "then uh it's like return address basically where it needs to be acknowledged and uh so at every stage",
    "start": "780600",
    "end": "786540"
  },
  {
    "text": "you can either a negative acknowledgment or send it further or in the final stage",
    "start": "786540",
    "end": "792600"
  },
  {
    "text": "you can pause the acknowledgment and then it goes to return other species acknowledgment so then you have this",
    "start": "792600",
    "end": "798480"
  },
  {
    "text": "message envelope with payload and this Arc ID so it worked but it has some significant",
    "start": "798480",
    "end": "806579"
  },
  {
    "text": "drawbacks uh first of all messages say there has to",
    "start": "806579",
    "end": "811980"
  },
  {
    "text": "be like a polluted with this additional formation related to the acknowledgment",
    "start": "811980",
    "end": "818459"
  },
  {
    "text": "you you have to put message in this envelopes can tell the countrymen ID but",
    "start": "818459",
    "end": "823500"
  },
  {
    "text": "that's not the worst part of it uh the worst part was probably processing logic",
    "start": "823500",
    "end": "829200"
  },
  {
    "text": "that only last actor in chain could send uh positive acknowledgment for these",
    "start": "829200",
    "end": "835200"
  },
  {
    "text": "messages but all actors uh in intermediate actors could say negative",
    "start": "835200",
    "end": "840600"
  },
  {
    "text": "acknowledgment so think about that there you have a team people working on uh design of these actors and then they",
    "start": "840600",
    "end": "847920"
  },
  {
    "text": "have to know where actor is placed uh in the chain so it actually breaks a single",
    "start": "847920",
    "end": "853440"
  },
  {
    "text": "responsibility uh principle so your actor needs to know that it's a part of",
    "start": "853440",
    "end": "859800"
  },
  {
    "text": "a long a larger workflow and okay if I'm not the last one I can I can sort of",
    "start": "859800",
    "end": "865560"
  },
  {
    "text": "stand Knack but I can't send act because if a message is acknowledged then there",
    "start": "865560",
    "end": "871380"
  },
  {
    "text": "is no way to acknowledge it twice so it was it was really hard to maintain this",
    "start": "871380",
    "end": "876660"
  },
  {
    "text": "code uh so and then also operations that were long running and what we're doing",
    "start": "876660",
    "end": "881880"
  },
  {
    "text": "is that we uploading files and uh usually there are multiple versions of",
    "start": "881880",
    "end": "889680"
  },
  {
    "text": "media files for each TV radio program so we can upload uh five or six qualities",
    "start": "889680",
    "end": "896660"
  },
  {
    "text": "uh for long movie which takes like two",
    "start": "896660",
    "end": "901680"
  },
  {
    "text": "hours the file size can be several gigabytes so uh what happened what was happening",
    "start": "901680",
    "end": "908220"
  },
  {
    "text": "is that uh if there is some inter intermediate error and then we almost",
    "start": "908220",
    "end": "913860"
  },
  {
    "text": "done uh and then the process takes many minutes then we have to start everything from",
    "start": "913860",
    "end": "920699"
  },
  {
    "text": "from scratch everything all over again so uh and uh some of the queues that were",
    "start": "920699",
    "end": "928019"
  },
  {
    "text": "configured with so-called TTL policy it's time to leave because message uh uh",
    "start": "928019",
    "end": "934500"
  },
  {
    "text": "Q needs to know when it can consider message as a debt like not processed and",
    "start": "934500",
    "end": "940500"
  },
  {
    "text": "you shouldn't really uh let Q keep messages uh for forever so uh typically you",
    "start": "940500",
    "end": "948839"
  },
  {
    "text": "assigned okay after 30 minutes um consider message uh dead in some",
    "start": "948839",
    "end": "954180"
  },
  {
    "text": "scenarios we had very long files in Norway um there is a program where it's",
    "start": "954180",
    "end": "960660"
  },
  {
    "text": "a kind of typical Norwegian maybe Scandinavian style where you put camera somewhere in the nature and then you",
    "start": "960660",
    "end": "966300"
  },
  {
    "text": "start uh recording things and then you can have a film which lasts like for 24",
    "start": "966300",
    "end": "971880"
  },
  {
    "text": "hours think about the size of this file and then you start uploading",
    "start": "971880",
    "end": "977100"
  },
  {
    "text": "um uh files for different major qualities and then uh uh this detailed",
    "start": "977100",
    "end": "982800"
  },
  {
    "text": "policy strikes before you finish with upload you have to start from all over again so basically uh it it really it",
    "start": "982800",
    "end": "990300"
  },
  {
    "text": "didn't really work uh well and also processing it could contain forks and Joints it was very hard to arrange this",
    "start": "990300",
    "end": "997639"
  },
  {
    "text": "processing of this negative and positive acknowledgments uh then also how long",
    "start": "997639",
    "end": "1003019"
  },
  {
    "text": "should a postman wait because if you think about like real world scenarios and the more I",
    "start": "1003019",
    "end": "1009259"
  },
  {
    "text": "worked with actors more I was convinced that if something is not natural from like in",
    "start": "1009259",
    "end": "1016279"
  },
  {
    "text": "the real world you should really consider it because the actor model was uh originally developed uh 50 years ago",
    "start": "1016279",
    "end": "1024199"
  },
  {
    "text": "it was the first articles came around 1973 and",
    "start": "1024199",
    "end": "1029240"
  },
  {
    "text": "um uh they uh stressed out that actually they were using the laws of uh real",
    "start": "1029240",
    "end": "1036740"
  },
  {
    "text": "world of physics when when trying to set up a vector model principles and",
    "start": "1036740",
    "end": "1043819"
  },
  {
    "text": "basically when you when you have uh the message which came with a postman uh",
    "start": "1043819",
    "end": "1049580"
  },
  {
    "text": "because magically they bring you messages uh with some kind of postmal so you tell the person okay wait until I do",
    "start": "1049580",
    "end": "1057620"
  },
  {
    "text": "everything which is that assess and only then I I will sign that I have received",
    "start": "1057620",
    "end": "1062960"
  },
  {
    "text": "this later so definitely there's something wrong with uh with this approach so uh then in first version it",
    "start": "1062960",
    "end": "1072140"
  },
  {
    "start": "1064000",
    "end": "1194000"
  },
  {
    "text": "was um um somewhat sub-optimal uh Improvement",
    "start": "1072140",
    "end": "1077660"
  },
  {
    "text": "we used durable cues as persistent bookmarks so we decided okay we can't really have uh the whole",
    "start": "1077660",
    "end": "1085400"
  },
  {
    "text": "process waiting for uh uh acknowledgment of the original message let's make",
    "start": "1085400",
    "end": "1092480"
  },
  {
    "text": "smaller um uh parts of it so we used uh durable",
    "start": "1092480",
    "end": "1099020"
  },
  {
    "text": "cues uh in between and then okay we have a part of the process do do some work",
    "start": "1099020",
    "end": "1104960"
  },
  {
    "text": "another queue part of a process another queue it it kind of helps with these",
    "start": "1104960",
    "end": "1111740"
  },
  {
    "text": "forks and joints and also it helped to make individual file processing",
    "start": "1111740",
    "end": "1117080"
  },
  {
    "text": "independent uh so we did we we no longer wanted uh to wait until all media files",
    "start": "1117080",
    "end": "1125240"
  },
  {
    "text": "for particular TV program are handled so we could like split it into processing",
    "start": "1125240",
    "end": "1130400"
  },
  {
    "text": "per file but it was still not optimal because it",
    "start": "1130400",
    "end": "1135500"
  },
  {
    "text": "still you had this you you sort of expose this uh acknowledgment logic to",
    "start": "1135500",
    "end": "1140539"
  },
  {
    "text": "your business logic so messages had to be wrapped into envelopes uh uh also you",
    "start": "1140539",
    "end": "1148580"
  },
  {
    "text": "you got your system partitioned here it was not like no longer like one actor",
    "start": "1148580",
    "end": "1155539"
  },
  {
    "text": "system basically we partitioned our system [Music] into multiple smaller actor system just",
    "start": "1155539",
    "end": "1165020"
  },
  {
    "text": "uh to convince this acknowledge in process so it also felt wrong from the system design point of view and and",
    "start": "1165020",
    "end": "1172400"
  },
  {
    "text": "again some unicever can still be long running we can still have this uh program uh extreme program which takes",
    "start": "1172400",
    "end": "1178580"
  },
  {
    "text": "24 hours to run and then one particular file can break uh all time to leave",
    "start": "1178580",
    "end": "1183980"
  },
  {
    "text": "settings so and again we we still made Postman weight maybe maybe not for the whole",
    "start": "1183980",
    "end": "1190580"
  },
  {
    "text": "process but for part of the process so it felt again wrong to continue that way then we thought okay maybe we start",
    "start": "1190580",
    "end": "1197419"
  },
  {
    "start": "1194000",
    "end": "1373000"
  },
  {
    "text": "using at least once delivery extensions because uh even though",
    "start": "1197419",
    "end": "1204140"
  },
  {
    "text": "um a modern active models they offer at most ones delivery as a default uh",
    "start": "1204140",
    "end": "1210380"
  },
  {
    "text": "policy but there are some extensions you can choose to um to implement at least once delivery",
    "start": "1210380",
    "end": "1217160"
  },
  {
    "text": "on the top of your the actor system and so it's uh it failed in the beginning uh",
    "start": "1217160",
    "end": "1224960"
  },
  {
    "text": "right because okay we're using actor model and it will be part of the actual model because uh we Implement our logic",
    "start": "1224960",
    "end": "1232520"
  },
  {
    "text": "using actors and that was a little bit of like when uh you only have a hammer as a tool",
    "start": "1232520",
    "end": "1241760"
  },
  {
    "text": "that everything around it looks like nails so we've been using adapter model and then we thought okay let's make",
    "start": "1241760",
    "end": "1247460"
  },
  {
    "text": "everything using actors and then then it it will feel right from programming point of view but actually",
    "start": "1247460",
    "end": "1254120"
  },
  {
    "text": "it's it's not because it's still uh it was really hard to implement uh messages",
    "start": "1254120",
    "end": "1259640"
  },
  {
    "text": "again they needed to uh to include delivery ID so even though we used uh",
    "start": "1259640",
    "end": "1265760"
  },
  {
    "text": "um some extensions then we we had to uh customize our business logic uh we had",
    "start": "1265760",
    "end": "1274940"
  },
  {
    "text": "to implement certain things like Behavior configuration what happens if a message",
    "start": "1274940",
    "end": "1281120"
  },
  {
    "text": "is not uh acknowledged for for a certain time What",
    "start": "1281120",
    "end": "1286520"
  },
  {
    "text": "actors should do so suddenly we we were started we were bringing all",
    "start": "1286520",
    "end": "1294140"
  },
  {
    "text": "a declarative semantic around message delivery which offered by cues like",
    "start": "1294140",
    "end": "1299679"
  },
  {
    "text": "rabbitmq like other service bus into the actor the actor model and",
    "start": "1299679",
    "end": "1306080"
  },
  {
    "text": "so uh it was a kind of poor man durable cues so uh the I think this this the",
    "start": "1306080",
    "end": "1313820"
  },
  {
    "text": "first third version it lifts probably the shortest time during our project just a few months as we realized that it",
    "start": "1313820",
    "end": "1320780"
  },
  {
    "text": "was wrong just don't do it uh actors are good with at most one delivery semantics",
    "start": "1320780",
    "end": "1327860"
  },
  {
    "text": "and just just don't make a durable cues out of actors use durable cues",
    "start": "1327860",
    "end": "1334880"
  },
  {
    "text": "so uh yeah just don't implement this one with semantics using Arc then not",
    "start": "1334880",
    "end": "1340159"
  },
  {
    "text": "designed for that so version 4 is a current and this is",
    "start": "1340159",
    "end": "1345200"
  },
  {
    "text": "actually where we got and we are still there and this is something which I recommend not only for actor systems so",
    "start": "1345200",
    "end": "1352400"
  },
  {
    "text": "it's all about fulfillment of a desired state so let's have a closer look at",
    "start": "1352400",
    "end": "1357559"
  },
  {
    "text": "that so what we started realizing that actually we should",
    "start": "1357559",
    "end": "1362740"
  },
  {
    "text": "admit the fact that we live in the world of unreliable messaging and there is a",
    "start": "1362740",
    "end": "1369980"
  },
  {
    "text": "great um article you will find only for Q that nobody needs reliable messaging which uh",
    "start": "1369980",
    "end": "1376340"
  },
  {
    "start": "1373000",
    "end": "1714000"
  },
  {
    "text": "he talks about uh messaging uh for web-based systems uh but it has same",
    "start": "1376340",
    "end": "1383240"
  },
  {
    "text": "symptoms and also it has same sort of wrong approaches where people try to use",
    "start": "1383240",
    "end": "1388299"
  },
  {
    "text": "uh uh to introduce some sort of guarantees there and uh those who worked",
    "start": "1388299",
    "end": "1394340"
  },
  {
    "text": "with WS transactions they may probably remember like well it's in my mind it's",
    "start": "1394340",
    "end": "1400280"
  },
  {
    "text": "sort of went a completely wrong path and we were trying to build kind of two-phase commit based on uh web-based",
    "start": "1400280",
    "end": "1409400"
  },
  {
    "text": "systems um so if relatability is important on the business level do it on the business",
    "start": "1409400",
    "end": "1415039"
  },
  {
    "text": "level so this is what we uh what was our conclusion to",
    "start": "1415039",
    "end": "1420740"
  },
  {
    "text": "uh also there is a there actually a series of great articles and materials from from Pat Holland",
    "start": "1420740",
    "end": "1428320"
  },
  {
    "text": "and there is a quote from him in a system that cannot count on disabled transactions the management of",
    "start": "1428320",
    "end": "1434960"
  },
  {
    "text": "uncertainty must be implemented into business logic so basically he's talking about the same thing so it's most",
    "start": "1434960",
    "end": "1441980"
  },
  {
    "text": "optimal most efficient to do in the business logic",
    "start": "1441980",
    "end": "1447100"
  },
  {
    "text": "uh also he says that work happens with a sequence of related messages over time",
    "start": "1447100",
    "end": "1453740"
  },
  {
    "text": "to perform Cooperative work what's important its next statement this is how it was done centuries ago and it's how",
    "start": "1453740",
    "end": "1460520"
  },
  {
    "text": "it's done today so uh think about how people were uh and",
    "start": "1460520",
    "end": "1467659"
  },
  {
    "text": "groups of people were achieving reliable results uh in unreliable world",
    "start": "1467659",
    "end": "1474140"
  },
  {
    "text": "so uh what you have to do you have to implement reliable collaborations of our actors uh based on unreliable messages",
    "start": "1474140",
    "end": "1482260"
  },
  {
    "text": "uh sending uh sent in in process so the",
    "start": "1482260",
    "end": "1487580"
  },
  {
    "text": "whole system dies messages are lost and it still needs to be reliable",
    "start": "1487580",
    "end": "1492620"
  },
  {
    "text": "so uh how we implemented that we receive incoming requests",
    "start": "1492620",
    "end": "1499600"
  },
  {
    "text": "and this comes from a durable queue so what uh",
    "start": "1499600",
    "end": "1505760"
  },
  {
    "text": "we do next very much",
    "start": "1505760",
    "end": "1510919"
  },
  {
    "text": "intact goes and talked into principles of domain during design and then um so I then I will use words like aggregate",
    "start": "1510919",
    "end": "1517580"
  },
  {
    "text": "root it's uh so basically operate on certain entity in our case it was the",
    "start": "1517580",
    "end": "1522620"
  },
  {
    "text": "entity was I can Siri program is an entity radio program is an entity so we evaluate the desired state of our",
    "start": "1522620",
    "end": "1529159"
  },
  {
    "text": "aggregate route um and uh it's a it's all information that uh",
    "start": "1529159",
    "end": "1536779"
  },
  {
    "text": "uh that shows where to bring the uh TV program it can for example uh we had old",
    "start": "1536779",
    "end": "1545659"
  },
  {
    "text": "versions of TV program files we received a new set of media files it's a six files uh and this is a desired State",
    "start": "1545659",
    "end": "1554179"
  },
  {
    "text": "okay put the six files in the cloud the United States should also include information about who needs to be",
    "start": "1554179",
    "end": "1560480"
  },
  {
    "text": "notified about because if you don't include it we we can sort of forget if system crashes so we use outbox pattern",
    "start": "1560480",
    "end": "1567559"
  },
  {
    "text": "for that in a couple of slides I will mention it again then we purchase the",
    "start": "1567559",
    "end": "1576140"
  },
  {
    "text": "desired state so we we've already decided State we persisted and then it's uh written in uh also called event",
    "start": "1576140",
    "end": "1583100"
  },
  {
    "text": "journal in our case uh then we acknowledge the received message so message is acknowledged before we",
    "start": "1583100",
    "end": "1589640"
  },
  {
    "text": "started processing it so Postman is free we don't uh keep Postman occupied then",
    "start": "1589640",
    "end": "1596179"
  },
  {
    "text": "we proceed with the request execution oh actually the next slide was about outbox partner so outbox pattern it",
    "start": "1596179",
    "end": "1602179"
  },
  {
    "text": "ensures that application State and it's expensive to the main events that we forward to external consumers",
    "start": "1602179",
    "end": "1608140"
  },
  {
    "text": "are uh in sync so they are consistent so uh it's quite important so you you have",
    "start": "1608140",
    "end": "1614539"
  },
  {
    "text": "your your external listeners which wait for the outcome of your work so you have",
    "start": "1614539",
    "end": "1620299"
  },
  {
    "text": "to record your uh what's expected to be sent to them so it's also part of your",
    "start": "1620299",
    "end": "1625539"
  },
  {
    "text": "uh desired State it's not just upload files but also notify consumer one",
    "start": "1625539",
    "end": "1631220"
  },
  {
    "text": "consumer two and and so on so if uh something happens to your system when",
    "start": "1631220",
    "end": "1637460"
  },
  {
    "text": "you uh did all your work but didn't uh notify your uh consumers you may uh",
    "start": "1637460",
    "end": "1644960"
  },
  {
    "text": "repeat some of your work again so uh the request execution uh basically",
    "start": "1644960",
    "end": "1650900"
  },
  {
    "text": "uh comes to evaluation of desired State Evolution the current state and then",
    "start": "1650900",
    "end": "1656480"
  },
  {
    "text": "we're done it's just a few months the work is current State minus desired state so what we need to do we need to",
    "start": "1656480",
    "end": "1662260"
  },
  {
    "text": "deal with the Delta so if we if a current state is three files already",
    "start": "1662260",
    "end": "1667539"
  },
  {
    "text": "uploaded and desired State these are five new files but three of them uh",
    "start": "1667539",
    "end": "1673400"
  },
  {
    "text": "already in the cloud so we just need to upload two more files so this design set",
    "start": "1673400",
    "end": "1680179"
  },
  {
    "text": "concept actually is not something which we invented of course it's uh and the whole term also it's it's not coming",
    "start": "1680179",
    "end": "1685820"
  },
  {
    "text": "from us so it's one of the Core Concepts of kubernetes uh also Microsoft used in Powershell uh",
    "start": "1685820",
    "end": "1692539"
  },
  {
    "text": "partial desired configuration so it's uh it's declarative way of uh",
    "start": "1692539",
    "end": "1699320"
  },
  {
    "text": "describing what where you want to bring your system so then you tell system go and it will try to",
    "start": "1699320",
    "end": "1706580"
  },
  {
    "text": "fulfill the desired state so this is what uh we're doing now on every aggregate route on every entity of our",
    "start": "1706580",
    "end": "1713360"
  },
  {
    "text": "system uh there is important assumption here is item potency because if your system is",
    "start": "1713360",
    "end": "1719480"
  },
  {
    "start": "1714000",
    "end": "1831000"
  },
  {
    "text": "not adipotent which means that you can't uh allow uh requests to be executed",
    "start": "1719480",
    "end": "1725840"
  },
  {
    "text": "twice for example a financial transaction you may uh think about other",
    "start": "1725840",
    "end": "1731840"
  },
  {
    "text": "ways for implementing it but a large major majority of uh Business",
    "start": "1731840",
    "end": "1737360"
  },
  {
    "text": "Systems actually are either important so in in the worst case you you repeat the operation and those parts which you",
    "start": "1737360",
    "end": "1743419"
  },
  {
    "text": "contribute yeah you have to sort of extract from from this business process and you have to there you may need to",
    "start": "1743419",
    "end": "1749539"
  },
  {
    "text": "have exactly one delivery for example so uh this is a",
    "start": "1749539",
    "end": "1755140"
  },
  {
    "text": "example of uh let me see here you see the state and",
    "start": "1755140",
    "end": "1761659"
  },
  {
    "text": "they have state desired and then there is description of the content of uh it",
    "start": "1761659",
    "end": "1767299"
  },
  {
    "text": "is yeah it's a TV program and this is a bit rate of uh first mp4 file second MP",
    "start": "1767299",
    "end": "1774740"
  },
  {
    "text": "file so it's quality ideas and so on so this is what needs to be done",
    "start": "1774740",
    "end": "1780200"
  },
  {
    "text": "and then uh there is a current state and this gives Akamai files account so Akama",
    "start": "1780200",
    "end": "1785779"
  },
  {
    "text": "is one of the one of our so-called Origins where we upload our files so this is what we have now out in the",
    "start": "1785779",
    "end": "1793279"
  },
  {
    "text": "cloud so we compute uh Delta and then we proceed with requests so",
    "start": "1793279",
    "end": "1800059"
  },
  {
    "text": "uh it's easy to clarify it here you have command publish media set which consists",
    "start": "1800059",
    "end": "1805760"
  },
  {
    "text": "of a couple of files then you have desired State and",
    "start": "1805760",
    "end": "1811100"
  },
  {
    "text": "you have current state and you see desired state has also notification we need to send notification message and",
    "start": "1811100",
    "end": "1817399"
  },
  {
    "text": "actually one file is already uploaded so probably there was attempts to execute this command before which failed for",
    "start": "1817399",
    "end": "1823520"
  },
  {
    "text": "some reasons partly fail partially failed so this is remaining work it's a Delta so we proceed with remaining work",
    "start": "1823520",
    "end": "1831140"
  },
  {
    "start": "1831000",
    "end": "2003000"
  },
  {
    "text": "so uh but actors are reactive so how do they ensure all work is fulfilled so if",
    "start": "1831140",
    "end": "1839659"
  },
  {
    "text": "the system crashes and uh and there's our system then uh actors are basically",
    "start": "1839659",
    "end": "1844880"
  },
  {
    "text": "dead because interactive systems uh uh system is uh waking up on messages so a",
    "start": "1844880",
    "end": "1852140"
  },
  {
    "text": "message wakes up an actor so what we have to do we had to extend",
    "start": "1852140",
    "end": "1857600"
  },
  {
    "text": "our processing workflow so it's the same workflow it's just inserted new step scared the repeating reminder so you",
    "start": "1857600",
    "end": "1865220"
  },
  {
    "text": "have an actor which receives a message uh upload five different media files but",
    "start": "1865220",
    "end": "1872899"
  },
  {
    "text": "I will be reminding few uh of uh well you need to do it until you're done",
    "start": "1872899",
    "end": "1879200"
  },
  {
    "text": "this actually uh uh reflects also real world because this",
    "start": "1879200",
    "end": "1884960"
  },
  {
    "text": "is how uh what makes us reliable in the world of unreliable messaging we can",
    "start": "1884960",
    "end": "1890480"
  },
  {
    "text": "forget things but as as long as we get reminded we can remember them we can",
    "start": "1890480",
    "end": "1898480"
  },
  {
    "text": "um execute them so uh this is why we because we have a limited memory and we uh sometimes we don't take notes but",
    "start": "1898820",
    "end": "1905179"
  },
  {
    "text": "this is what actually makes uh our people and groups of people working pretty good that uh we get uh systematic",
    "start": "1905179",
    "end": "1913820"
  },
  {
    "text": "reminds of what needs to be done and this is what um uh",
    "start": "1913820",
    "end": "1919039"
  },
  {
    "text": "uh what we implemented in our system so uh",
    "start": "1919039",
    "end": "1924460"
  },
  {
    "text": "how our aggregate route actors work now so when actor is waking up uh it replace",
    "start": "1924460",
    "end": "1932000"
  },
  {
    "text": "its actor state from the event Journal it's called state recovery so uh and",
    "start": "1932000",
    "end": "1937340"
  },
  {
    "text": "again you don't need to use active system to implement that basically if you if you have a",
    "start": "1937340",
    "end": "1942880"
  },
  {
    "text": "customer uh like electronic shop for example and a customer comes back to the shop and he wants to buy something done",
    "start": "1942880",
    "end": "1949880"
  },
  {
    "text": "okay you read it from the database it's it's data and then you get its car uh current",
    "start": "1949880",
    "end": "1957140"
  },
  {
    "text": "state the universe remaining remaining corrupt let's say there is something in his uh uh shopping cart and he wants to",
    "start": "1957140",
    "end": "1963980"
  },
  {
    "text": "he pays for it and then uh maybe he already paid for that it's like okay I see that current state as this and then",
    "start": "1963980",
    "end": "1970399"
  },
  {
    "text": "decides that he wants this book or these uh shoes be sent to him so this is",
    "start": "1970399",
    "end": "1975919"
  },
  {
    "text": "remaining work so if remaining work is nothing then we don't need to remind this this Factor about anything so you",
    "start": "1975919",
    "end": "1985100"
  },
  {
    "text": "can just fall asleep and so in the interactive systems uh the part of the",
    "start": "1985100",
    "end": "1990500"
  },
  {
    "text": "system which has nothing to do should immediately release the memory and just",
    "start": "1990500",
    "end": "1995840"
  },
  {
    "text": "fall asleep and absolutely mining remaining work then it needs to do this",
    "start": "1995840",
    "end": "2000940"
  },
  {
    "text": "remaining work so uh main lesson that we learned from",
    "start": "2000940",
    "end": "2006039"
  },
  {
    "start": "2003000",
    "end": "2033000"
  },
  {
    "text": "Modern actors behavior is that um consider using patterns established in",
    "start": "2006039",
    "end": "2011440"
  },
  {
    "text": "real world collaboration so the real world is actually quite solid and if we",
    "start": "2011440",
    "end": "2017740"
  },
  {
    "text": "try to think every time when we Face some complex design problems we try to",
    "start": "2017740",
    "end": "2023740"
  },
  {
    "text": "think okay how does it work in the real world how can we model it so it it looks",
    "start": "2023740",
    "end": "2029140"
  },
  {
    "text": "like real world because the actual world is solid also",
    "start": "2029140",
    "end": "2036580"
  },
  {
    "start": "2033000",
    "end": "2212000"
  },
  {
    "text": "um that's a sort of a new slide which I just added yesterday because I recently",
    "start": "2036580",
    "end": "2041860"
  },
  {
    "text": "as I mentioned in the beginning I went to conference about domain driven designs called Kandinsky and then",
    "start": "2041860",
    "end": "2047500"
  },
  {
    "text": "there's it was a great uh talk called event workflows and sagas by Luz Hoon",
    "start": "2047500",
    "end": "2053858"
  },
  {
    "text": "Henkin and it resonated very well with um sort of um uh talk which I was doing",
    "start": "2053859",
    "end": "2061960"
  },
  {
    "text": "at the same conferences uh so uh he questioned that we need uh tools like",
    "start": "2061960",
    "end": "2069820"
  },
  {
    "text": "workflow engines and Saga managers where you you describe somewhere else sometimes they're using some strange",
    "start": "2069820",
    "end": "2076179"
  },
  {
    "text": "language like XML what needs to be done and then you have",
    "start": "2076179",
    "end": "2081339"
  },
  {
    "text": "workflow engine so it tries to uh bring from State a and to State Z your your",
    "start": "2081339",
    "end": "2089320"
  },
  {
    "text": "system what if your uh system is in state M what does it do does it need to",
    "start": "2089320",
    "end": "2095560"
  },
  {
    "text": "roll everything back and start from uh from scratch when I was a Schoolboy we",
    "start": "2095560",
    "end": "2102280"
  },
  {
    "text": "had a math teacher and she was trying to explain us how mathematicians think and then",
    "start": "2102280",
    "end": "2109480"
  },
  {
    "text": "um I don't know if you heard the story in your school um or similar like that she said that",
    "start": "2109480",
    "end": "2116560"
  },
  {
    "text": "the normal people when they boil water we need to take a kettle at the time",
    "start": "2116560",
    "end": "2122560"
  },
  {
    "text": "there were no electrical electrical kettles there were only everyone was using gas basically so you need to fill",
    "start": "2122560",
    "end": "2130359"
  },
  {
    "text": "it with water you need to put it on the oven and then and then you wait until it boils and then if you come back home and",
    "start": "2130359",
    "end": "2137980"
  },
  {
    "text": "then you you see that the kettle already is filled with water what you do okay you just uh boil it but this isn't how",
    "start": "2137980",
    "end": "2144839"
  },
  {
    "text": "mathematicians think and maybe actually she meant programmer but at that time",
    "start": "2144839",
    "end": "2150960"
  },
  {
    "text": "there were not very many programs Among Us uh like if mathematicians",
    "start": "2150960",
    "end": "2156780"
  },
  {
    "text": "there is already water in the kettle then of course what uh he doesn't just throws uh uh away the water because then",
    "start": "2156780",
    "end": "2165940"
  },
  {
    "text": "uh it brings the system back to the stage where he has algorithms to solve it then he can fill it with water and",
    "start": "2165940",
    "end": "2171339"
  },
  {
    "text": "then and then then boil it and this is actually how most of rockflow engines and Saga managers work even though some",
    "start": "2171339",
    "end": "2177579"
  },
  {
    "text": "of them optimized they can actually catch up on certain level but they always try sort of to put your business",
    "start": "2177579",
    "end": "2185260"
  },
  {
    "text": "process into some sort of scripts so where what we found that we really need",
    "start": "2185260",
    "end": "2191440"
  },
  {
    "text": "to just follow the event-driven pattern that okay uh we uh evaluate the system",
    "start": "2191440",
    "end": "2197980"
  },
  {
    "text": "State we will a desired State we evaluate Delta we don't need workflow engines we at any given State we know",
    "start": "2197980",
    "end": "2204760"
  },
  {
    "text": "what to do next we we evaluate this uh these diffs so uh",
    "start": "2204760",
    "end": "2211240"
  },
  {
    "text": "uh so conclusion actors uh",
    "start": "2211240",
    "end": "2216660"
  },
  {
    "start": "2212000",
    "end": "2267000"
  },
  {
    "text": "use uh most ones delivery for good reason so don't think that action model is not reliable they are actually very",
    "start": "2216660",
    "end": "2222760"
  },
  {
    "text": "reliable and they're very efficient and um don't use your durable messages use",
    "start": "2222760",
    "end": "2228820"
  },
  {
    "text": "like your transaction guards like uh and this is a mistake that many development teams uh repeat they okay I have a",
    "start": "2228820",
    "end": "2236260"
  },
  {
    "text": "little message queues I will not hack it until everything is done just just reconsider it especially if you have",
    "start": "2236260",
    "end": "2242320"
  },
  {
    "text": "long running processes uh persist uh your intention record your triggered",
    "start": "2242320",
    "end": "2247960"
  },
  {
    "text": "operations um and then calculate from desired current state what needs to be done and",
    "start": "2247960",
    "end": "2254260"
  },
  {
    "text": "then you will find that your system actually is simplified and more efficient uh if it uh Works uh during uh",
    "start": "2254260",
    "end": "2263920"
  },
  {
    "text": "using this this principles so with that I don't know how with the time we",
    "start": "2263920",
    "end": "2269320"
  },
  {
    "start": "2267000",
    "end": "2278000"
  },
  {
    "text": "probably have a few minutes two minutes okay thank you very much",
    "start": "2269320",
    "end": "2274490"
  },
  {
    "text": "[Applause]",
    "start": "2274490",
    "end": "2277730"
  }
]