[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "[Music]",
    "start": "980",
    "end": "7849"
  },
  {
    "text": "thank you very much for coming out just before we get started and do my bit for the conference as a speaker it's really",
    "start": "12859",
    "end": "19580"
  },
  {
    "text": "helpful when you do rate sessions so if you haven't rated the previous session take 30 seconds now go and do it and all",
    "start": "19580",
    "end": "26180"
  },
  {
    "text": "the aside so you can do in the background a bit of background into the",
    "start": "26180",
    "end": "33649"
  },
  {
    "start": "30000",
    "end": "105000"
  },
  {
    "text": "things that I do as a developer primarily but I'm also a mentor I'm a",
    "start": "33649",
    "end": "39649"
  },
  {
    "text": "dungeon master in Dungeons & Dragons campaigns I love it every time I do it",
    "start": "39649",
    "end": "44749"
  },
  {
    "text": "it gets a laugh it's true it's great I have a whole separate talk where I wear a wizard hat that's a different thing",
    "start": "44749",
    "end": "50260"
  },
  {
    "text": "look it up it's real a mental I teach and I lead apprentices and junior",
    "start": "50260",
    "end": "55309"
  },
  {
    "text": "developers I run an organize a user group and an unconference in the UK which I'm doing on Saturday when I get",
    "start": "55309",
    "end": "61039"
  },
  {
    "text": "back from here on Thursday so that's a little chaotic I speak at user groups and conferences and most importantly for",
    "start": "61039",
    "end": "68150"
  },
  {
    "text": "this talk I break production sites with incorrectly configured content security policies so this is a talk in three",
    "start": "68150",
    "end": "76130"
  },
  {
    "text": "parts the first step is we're going to get everyone up to speed with what cross-site scripting is because it's one",
    "start": "76130",
    "end": "81560"
  },
  {
    "text": "of the large things that we can protect against with the content security policy just so we're all on the same level and",
    "start": "81560",
    "end": "87710"
  },
  {
    "text": "we all know where we're coming from then we're going to go through a content security policy what it is how it can",
    "start": "87710",
    "end": "93020"
  },
  {
    "text": "protect us and then the later part of the talks going to be a demonstration where I break a website and teach you",
    "start": "93020",
    "end": "99050"
  },
  {
    "text": "how not to do that so that your boss isn't shouting at you whilst the websites broken so let's start with the",
    "start": "99050",
    "end": "106280"
  },
  {
    "start": "105000",
    "end": "157000"
  },
  {
    "text": "scary stuff now cross-site scripting often considered by a lot of people to",
    "start": "106280",
    "end": "113510"
  },
  {
    "text": "be a bit of a joke effectively it enables an attacker to inject",
    "start": "113510",
    "end": "118550"
  },
  {
    "text": "client-side scripts into no malicious web pages it's still in the OWASP top 10",
    "start": "118550",
    "end": "123640"
  },
  {
    "text": "back in 2016 there was a 61% likelihood of a browser-based vulnerability being found in a web app and of those 86% were",
    "start": "123640",
    "end": "131599"
  },
  {
    "text": "cross-site scripting related which means they're about 52% of web app vulnerabilities back in 20",
    "start": "131599",
    "end": "137090"
  },
  {
    "text": "Dean were cross-site scripting related it very much depends on what study you look at the numbers range anywhere from",
    "start": "137090",
    "end": "142519"
  },
  {
    "text": "25% up to 50% over the past few years but the point is that even though it's",
    "start": "142519",
    "end": "148120"
  },
  {
    "text": "been a long time since these things first came up they're still there they're not going away because people",
    "start": "148120",
    "end": "154250"
  },
  {
    "text": "are not building software in the right ways so cross-site scripting you can do a number of things you can put pictures of",
    "start": "154250",
    "end": "161420"
  },
  {
    "text": "dogs in webpages because dogs are superior to cats I'm sorry if that offends you you're free to leave now you",
    "start": "161420",
    "end": "168019"
  },
  {
    "text": "can alert poop emoji on a website if you wish you can rick roll the user there's",
    "start": "168019",
    "end": "175040"
  },
  {
    "text": "a self retweeting tweet that came out and TweetDeck who was hit by that one there was a if it appeared on your",
    "start": "175040",
    "end": "181910"
  },
  {
    "text": "timeline and you mouse over it retweeted it to your Timeline and then everyone else's who saw it it did the same thing",
    "start": "181910",
    "end": "187579"
  },
  {
    "text": "and it spread quite quickly back in the day there was the Sammy worm from",
    "start": "187579",
    "end": "193099"
  },
  {
    "text": "MySpace where someone injected a piece of code onto their myspace profile back when you could put your own styles and",
    "start": "193099",
    "end": "198319"
  },
  {
    "text": "JavaScript stuff on to MySpace and when you visited his profile it would send him a friend request that was automatically accepted and then copied",
    "start": "198319",
    "end": "205130"
  },
  {
    "text": "that same piece of code to your profile so when some of you do your profile they send him a friend request in 24 hours he",
    "start": "205130",
    "end": "212180"
  },
  {
    "text": "had a million friends on MySpace he got for a patient of three years with a computer and no internet connection for",
    "start": "212180",
    "end": "218720"
  },
  {
    "text": "that one and fines of like $20,000 yeah so you can do some silly things with it",
    "start": "218720",
    "end": "225799"
  },
  {
    "start": "224000",
    "end": "367000"
  },
  {
    "text": "but it's in reality it's a lot more serious you can also make modifications to the Dom so you can replace a form",
    "start": "225799",
    "end": "231230"
  },
  {
    "text": "action to point to your own script in your own web page instead of their server you can load in additional script",
    "start": "231230",
    "end": "237079"
  },
  {
    "text": "styles and resources access html5 api's you can key log people you can fish people with it but a crypto minor in",
    "start": "237079",
    "end": "243769"
  },
  {
    "text": "like happened to a lot of government websites back earlier in the year they were linking to an external third-party",
    "start": "243769",
    "end": "249799"
  },
  {
    "text": "script there's all the ways to protect against this but that script got compromised put a key a crypto minor on",
    "start": "249799",
    "end": "256729"
  },
  {
    "text": "so anyone viewing their webpage was just mining he was manera for them that one didn't work out - financially - well I",
    "start": "256729",
    "end": "263539"
  },
  {
    "text": "guess they expected to make thousands I think they made about $27 in total you know you can do things like stealing",
    "start": "263539",
    "end": "271030"
  },
  {
    "text": "cookies and therefore stealing session cookies with the same thing as well so",
    "start": "271030",
    "end": "276610"
  },
  {
    "text": "imagine this you're sitting at home in front of your computer you log on to a",
    "start": "276610",
    "end": "282310"
  },
  {
    "text": "webpage that you visited before awesome dong comm for example and then all of a sudden you're frozen you're unable to",
    "start": "282310",
    "end": "289870"
  },
  {
    "text": "move you lock up and you're in pain somehow the computer that you're saying you're sat at is controlling your mind",
    "start": "289870",
    "end": "298410"
  },
  {
    "text": "your child sees this runs over pushes you out of the way the computer and the seizure finishes might sound like",
    "start": "298410",
    "end": "304660"
  },
  {
    "text": "science fiction but back in 2018 there was this headline a bunch of hackers got",
    "start": "304660",
    "end": "309730"
  },
  {
    "text": "some code onto an epilepsy support forum that displayed flashing images flashing",
    "start": "309730",
    "end": "317140"
  },
  {
    "text": "patterns flashing colors and people had seizures there was reports of a woman stats at frozen at her computer because",
    "start": "317140",
    "end": "324400"
  },
  {
    "text": "she couldn't move so whilst you know with the keynote earlier with these kind",
    "start": "324400",
    "end": "330640"
  },
  {
    "text": "of neural interfaces with things visual input and stimuli is a way into your brain and if they can do this then",
    "start": "330640",
    "end": "338550"
  },
  {
    "text": "yeah so it's not actually a joke people consider it a joke because it seems all these silly little things cross-site",
    "start": "338550",
    "end": "345640"
  },
  {
    "text": "scripting in the world of data breaches that we live in these days where someone logs in grabs everything they can and then logs out as quick as possible",
    "start": "345640",
    "end": "351250"
  },
  {
    "text": "cross-site scripting seems to be more focused on individual users which might not seem as impactful but if they do it",
    "start": "351250",
    "end": "357790"
  },
  {
    "text": "over time its death by a thousand cuts they'll just attack each individual person so there's a few types of",
    "start": "357790",
    "end": "364960"
  },
  {
    "text": "cross-site scripting in the world there's stored cross-site scripting which is known as persistent cross-site scripting what it does is when input is",
    "start": "364960",
    "end": "373090"
  },
  {
    "start": "367000",
    "end": "407000"
  },
  {
    "text": "stored somewhere generally in a server-side database but in modern day and age we've got things like html5",
    "start": "373090",
    "end": "379300"
  },
  {
    "text": "database you know the local storage in your browser it's a method method of storing information or who is records",
    "start": "379300",
    "end": "387310"
  },
  {
    "text": "there was legitimately a website that put the iframe embed code for risk actually Rick Astley's never going to give you up in the txt record of their",
    "start": "387310",
    "end": "393520"
  },
  {
    "text": "domain so that when you did a Whois search on it on a certain website it popped up and played the video for you",
    "start": "393520",
    "end": "399630"
  },
  {
    "text": "so it doesn't even have to be your storage mechanism is compromised there's",
    "start": "399630",
    "end": "406780"
  },
  {
    "text": "reflective cross-site scripting it's non persistent it doesn't actually get stored anywhere so when user Empress",
    "start": "406780",
    "end": "412030"
  },
  {
    "start": "407000",
    "end": "427000"
  },
  {
    "text": "provided the request is immediately returned error messages search strings things like that they can have this sort",
    "start": "412030",
    "end": "418150"
  },
  {
    "text": "of description vulnerability and so it's not stored and in some instances with",
    "start": "418150",
    "end": "423250"
  },
  {
    "text": "the next type of cross-site scripting it doesn't even touch the server so there's a new type called Dom based cross-site",
    "start": "423250",
    "end": "429190"
  },
  {
    "start": "427000",
    "end": "445000"
  },
  {
    "text": "scripting which has become much more prevalent with things like JavaScript frameworks and single page web applications the entire flow takes place",
    "start": "429190",
    "end": "435700"
  },
  {
    "text": "within the browser and if you take input do something like that write it back out to the Dom these sorts of things can",
    "start": "435700",
    "end": "442780"
  },
  {
    "text": "happen and there's a fourth type known as self cross-site scripting now some",
    "start": "442780",
    "end": "448030"
  },
  {
    "start": "445000",
    "end": "463000"
  },
  {
    "text": "people don't consider this to be a true type of cross-site scripting but ultimately it's a social engineering",
    "start": "448030",
    "end": "453040"
  },
  {
    "text": "form of cross-site scripting some people consider it to be the equivalent of saying you hacked someone's server by",
    "start": "453040",
    "end": "458050"
  },
  {
    "text": "phoning up the sysadmin and saying hey ki just run this command on the server for me thank you very much but it",
    "start": "458050",
    "end": "464380"
  },
  {
    "text": "requires the user to execute code in the browser for you and because often this is done via the console you can't",
    "start": "464380",
    "end": "470979"
  },
  {
    "text": "actually protect against a lot of things that are happening in browsers the console has an elevated level of",
    "start": "470979",
    "end": "476680"
  },
  {
    "text": "privilege and can do additional things that aren't typically available to most users and it's not considered true cross",
    "start": "476680",
    "end": "484479"
  },
  {
    "text": "site scripting by some because it requires the user to execute code but it's still an issue nonetheless if",
    "start": "484479",
    "end": "491229"
  },
  {
    "start": "490000",
    "end": "521000"
  },
  {
    "text": "you've ever viewed Facebook's console you'll see a nice big message like this stop don't do this if someone's told you",
    "start": "491229",
    "end": "496960"
  },
  {
    "text": "that by putting this code in you get to hack someone else's account view all their messages between them and their friends are talking about you don't do",
    "start": "496960",
    "end": "502630"
  },
  {
    "text": "it chances are it'll get you instead of them so that's kind of the setup that's",
    "start": "502630",
    "end": "509770"
  },
  {
    "text": "cross-site scripting in a nutshell go on for days about cross-site scripting because it's still in the OWASP top 10",
    "start": "509770",
    "end": "515979"
  },
  {
    "text": "it's still a very very prevalent vulnerability in web apps but we need a",
    "start": "515979",
    "end": "521709"
  },
  {
    "start": "521000",
    "end": "559000"
  },
  {
    "text": "way to fight back these pesky hackers that attack us we need to fight back against them there are three main",
    "start": "521709",
    "end": "528510"
  },
  {
    "text": "attributes of every hacker one",
    "start": "528510",
    "end": "533650"
  },
  {
    "text": "he has a hood - he has a hunched posture three claw-like fingers sorry those are",
    "start": "533650",
    "end": "544540"
  },
  {
    "text": "the three main attributes of a hacker if you see this happening you're in trouble also just as a note he works for Hydra which is terrible okay this is actually",
    "start": "544540",
    "end": "554529"
  },
  {
    "text": "a friend of my froggy and he's quite happy for me to use this photo a content",
    "start": "554529",
    "end": "560380"
  },
  {
    "start": "559000",
    "end": "662000"
  },
  {
    "text": "security policy is simply a response header to help reduce cross-site scripting attacks there's a very big",
    "start": "560380",
    "end": "566740"
  },
  {
    "text": "keyword in there it says reduce across site scripting attacks it doesn't fix all problems unfortunately I'm not",
    "start": "566740",
    "end": "576400"
  },
  {
    "text": "running a dungeons dragons game we're not fighting wearables therefore it's not a silver bullet that can kill them all",
    "start": "576400",
    "end": "581610"
  },
  {
    "text": "what it is is another tool in your tool belt it's an additional thing an extra",
    "start": "581610",
    "end": "587410"
  },
  {
    "text": "layer of security to help you protect your web apps it does not mean you should stop escaping the output in your",
    "start": "587410",
    "end": "593920"
  },
  {
    "text": "template rendering or wherever you're using it but it helps where things might",
    "start": "593920",
    "end": "600550"
  },
  {
    "text": "be missed you might not have realized that that's an issue ultimately the way",
    "start": "600550",
    "end": "605800"
  },
  {
    "text": "it works is we declare what resources are allowed to load in a browser by",
    "start": "605800",
    "end": "610930"
  },
  {
    "text": "default browsers are pretty stupid you tell them hey here's my website here's a",
    "start": "610930",
    "end": "616660"
  },
  {
    "text": "load of assets in the source code the browser goes away and says how you told me to load my bad site calm / super",
    "start": "616660",
    "end": "622150"
  },
  {
    "text": "hacker yes I'll go and get that for you which point in the browser loads it terrible things happen users complain",
    "start": "622150",
    "end": "630060"
  },
  {
    "text": "the way a content security policy works is you send a header back with the response and it simply just lists what",
    "start": "630060",
    "end": "637240"
  },
  {
    "text": "resources are allowed to load by the browser and if you haven't said to it that you know you can load my bad site",
    "start": "637240",
    "end": "642880"
  },
  {
    "text": "calm / super hacker yes it won't load it",
    "start": "642880",
    "end": "647610"
  },
  {
    "text": "it can help with blocking those pesky pesky crypto mining scripts that keep popping up so if you think in I didn't",
    "start": "647970",
    "end": "654640"
  },
  {
    "text": "know about that crypto my anything I'll put that onto a site and making myself some money if they do it properly that won't be an issue",
    "start": "654640",
    "end": "661709"
  },
  {
    "start": "662000",
    "end": "733000"
  },
  {
    "text": "now it's a browser-based piece of functionality so it's kind of taking",
    "start": "662529",
    "end": "668109"
  },
  {
    "text": "that realm of web app security which has often been very much on the server side you know locking down your server access",
    "start": "668109",
    "end": "673869"
  },
  {
    "text": "controls separating your web in your database servers various different things you can do to lock that down and",
    "start": "673869",
    "end": "679059"
  },
  {
    "text": "kind of extending the security boundary into the users land the users world as well so because it's a browser",
    "start": "679059",
    "end": "685619"
  },
  {
    "text": "browser-based piece of functionality browser support is kind of crucial for actually working it's kind of okay ish",
    "start": "685619",
    "end": "693129"
  },
  {
    "text": "sorry internet explorer but if you still haven't disappointed Explorer I'm sorry but ultimately modern browsers support",
    "start": "693129",
    "end": "700929"
  },
  {
    "text": "it there's multiple deprecated levels in the past but content security policy level 2 works in chrome of version 40",
    "start": "700929",
    "end": "708819"
  },
  {
    "text": "and above 31 for Firefox but with the versions these days kind of we're on version 3012 by this morning version 10",
    "start": "708819",
    "end": "716529"
  },
  {
    "text": "plus in Safari ie doesn't work but again it's not great for IE anyway an edge version 15 and above you're pretty good",
    "start": "716529",
    "end": "723849"
  },
  {
    "text": "there's older versions that are still supported version 1 which is got slightly older compatibility but for the",
    "start": "723849",
    "end": "729549"
  },
  {
    "text": "most part target the new ones where you can so with a content security policy",
    "start": "729549",
    "end": "735099"
  },
  {
    "start": "733000",
    "end": "855000"
  },
  {
    "text": "there's a number of different types of resources that we can protect in our web apps default source is basically his",
    "start": "735099",
    "end": "742059"
  },
  {
    "text": "what the fallback is here's everything if I can't find a more specific rule I'm gonna fall back to default source and",
    "start": "742059",
    "end": "747849"
  },
  {
    "text": "that's the way we're going to protect and that's what the rules were going to enforce we can stop scripts from being",
    "start": "747849",
    "end": "754509"
  },
  {
    "text": "loaded in in certain domains or white listing certain scripts styles as well",
    "start": "754509",
    "end": "760169"
  },
  {
    "text": "people often don't consider styles to be a very interesting attack vector but yeah you can change the backgrounds and",
    "start": "760169",
    "end": "766720"
  },
  {
    "text": "whatnot who saw the CSS based password key logger that was put in place for react out a little while back yes",
    "start": "766720",
    "end": "773319"
  },
  {
    "text": "through your passwords a CSS that's cool didn't think that was possible right and",
    "start": "773319",
    "end": "779579"
  },
  {
    "text": "you can do some really cool stuff with CSS but you can protect against what Styles could be put in place as well",
    "start": "779579",
    "end": "785159"
  },
  {
    "text": "images as well now that might not be a necessarily add to bad everything in terms of you know people accessing data",
    "start": "785159",
    "end": "791499"
  },
  {
    "text": "but if you're running a family for any website and someone put something vulgar or explicit on your website that's big thing for your image form actions",
    "start": "791499",
    "end": "800060"
  },
  {
    "text": "you can say where forms are allowed to submit to so they can't actually submit to another website and a cool one is",
    "start": "800060",
    "end": "806500"
  },
  {
    "text": "upgrade insecure requests who here part way through the lifecycle of a site has",
    "start": "806500",
    "end": "811610"
  },
  {
    "text": "put a TLS certificate on the site and then had problems with pages loading assets in over non secure connections",
    "start": "811610",
    "end": "817460"
  },
  {
    "text": "before well that's this option in a browser will effectively tell these tell",
    "start": "817460",
    "end": "823070"
  },
  {
    "text": "the browser when it's requesting that resource hey if it's over an unsecured connection upgrade it to a secure connection if it's available serve it",
    "start": "823070",
    "end": "830090"
  },
  {
    "text": "over that and will help reduce those problems so when people say moving to HTTPS is hard it is if you're a huge",
    "start": "830090",
    "end": "836630"
  },
  {
    "text": "scale sometimes but for the most part that's not a problem there's a lot more",
    "start": "836630",
    "end": "841850"
  },
  {
    "text": "options there's a full reference on content security policy comm because the list is huge I'm not going to go over",
    "start": "841850",
    "end": "848240"
  },
  {
    "text": "them all just a few wants to kind of show you the impact of this or things like we can have with a content security policy so",
    "start": "848240",
    "end": "855830"
  },
  {
    "start": "855000",
    "end": "875000"
  },
  {
    "text": "if we specified image source star star is a wild-card star says any URL except",
    "start": "855830",
    "end": "862730"
  },
  {
    "text": "don't allow data blob or file system schemes because those aren't things that we particularly want to allow but any",
    "start": "862730",
    "end": "869300"
  },
  {
    "text": "URL is valid for this image so I'm going to allow this image to load if it's from any URL if we say none for example on an",
    "start": "869300",
    "end": "877580"
  },
  {
    "start": "875000",
    "end": "887000"
  },
  {
    "text": "object source that says don't load resources from any resource and I don't even trust myself to load resources on",
    "start": "877580",
    "end": "883190"
  },
  {
    "text": "an object source so don't do that style source self says as long as it's",
    "start": "883190",
    "end": "890390"
  },
  {
    "start": "887000",
    "end": "903000"
  },
  {
    "text": "on the ho same host scheme and port as me I trust myself so load it that's fine if I'm serving",
    "start": "890390",
    "end": "898160"
  },
  {
    "text": "the JavaScript if I'm serving the CSS that's fine script source unsafe inline",
    "start": "898160",
    "end": "905240"
  },
  {
    "start": "903000",
    "end": "921000"
  },
  {
    "text": "it allows use of inline source elements so if you've got unclick attributes or if you've got like a script tag body",
    "start": "905240",
    "end": "910310"
  },
  {
    "text": "within your template that just got the JavaScript within it you can use on so if in line to allow that script to run",
    "start": "910310",
    "end": "915340"
  },
  {
    "text": "there is a very big problem with that in this act that it's in the name it's unsafe so don't use it it's like putting",
    "start": "915340",
    "end": "922700"
  },
  {
    "start": "921000",
    "end": "940000"
  },
  {
    "text": "a padlock on your gate and then it not really being effective that was actually a building I was working and I told them",
    "start": "922700",
    "end": "929150"
  },
  {
    "text": "about that and they said yeah but it's always been like that that's to",
    "start": "929150",
    "end": "935029"
  },
  {
    "text": "the power and backup generators in the yeah if you need to use inline scripts",
    "start": "935029",
    "end": "942320"
  },
  {
    "start": "940000",
    "end": "990000"
  },
  {
    "text": "there's a concept in cryptography known as a number used once a nonce so if you",
    "start": "942320",
    "end": "948019"
  },
  {
    "text": "need to render an inline script within your template in the header if you",
    "start": "948019",
    "end": "953149"
  },
  {
    "text": "specify a random value for that particular nonce you can then say my script has a nonce",
    "start": "953149",
    "end": "960620"
  },
  {
    "text": "attribute of that same value and as long as they match the browser can trust the template that's been rendered has been",
    "start": "960620",
    "end": "967339"
  },
  {
    "text": "served in the same way that the head has been set as well so that means you can trust that script to run and it will",
    "start": "967339",
    "end": "972920"
  },
  {
    "text": "allow it to execute within the browser if that's all script gets injected by",
    "start": "972920",
    "end": "978050"
  },
  {
    "text": "someone you know putting it into a comment system unless that comments being run and rendered by your template",
    "start": "978050",
    "end": "983779"
  },
  {
    "text": "through your template engine sorry then they're not gonna have access to the value so it should be fine a constant",
    "start": "983779",
    "end": "990740"
  },
  {
    "start": "990000",
    "end": "1048000"
  },
  {
    "text": "security policy this is a very very short one in reality they're really long but it's just broken down into a few key parts you've got the header name and",
    "start": "990740",
    "end": "997160"
  },
  {
    "text": "then you say write default source none by default I don't trust anyone not even myself for scripts ice trust myself and",
    "start": "997160",
    "end": "1006430"
  },
  {
    "text": "I trust Google because we all trust Google right I've got a nonce for any",
    "start": "1006430",
    "end": "1011649"
  },
  {
    "text": "inline ones fun fact if you've ever put Google Analytics on your website you've just consented to cross-site scripting",
    "start": "1011649",
    "end": "1017320"
  },
  {
    "text": "because they're executing scripts on your website styles I trust myself images I trust myself",
    "start": "1017320",
    "end": "1023140"
  },
  {
    "text": "I want to upgrade insecure requests because I potentially got a CMS website where the clients put in some hard-coded",
    "start": "1023140",
    "end": "1029490"
  },
  {
    "text": "content that's got old insecure URLs and forms I only trust them to be submitted",
    "start": "1029490",
    "end": "1035650"
  },
  {
    "text": "to myself as well so here's the part of",
    "start": "1035650",
    "end": "1041829"
  },
  {
    "text": "the talk where I come and stand front and center stage and I this is therapy for me this is a confessional hi I'm",
    "start": "1041829",
    "end": "1048400"
  },
  {
    "start": "1048000",
    "end": "1100000"
  },
  {
    "text": "Matt and I broke production okay good",
    "start": "1048400",
    "end": "1053559"
  },
  {
    "text": "clean conscious we can move on ultimately I had been looking at some",
    "start": "1053559",
    "end": "1059140"
  },
  {
    "text": "security stuff and I saw hey there's this thing called a constant security policy I work with",
    "start": "1059140",
    "end": "1066510"
  },
  {
    "text": "financial institutions so this would be a good thing to implement I went away I",
    "start": "1066510",
    "end": "1071590"
  },
  {
    "text": "implemented this thing because you know being the eager developer that I am I knew everything and didn't need to read",
    "start": "1071590",
    "end": "1076750"
  },
  {
    "text": "the manual I implemented it on the site all that to be working was all good deployed it about half an hour later got",
    "start": "1076750",
    "end": "1084010"
  },
  {
    "text": "a phone call from the client the site's broken oh sorry ticket from the client the site's broken that's all the turkey",
    "start": "1084010",
    "end": "1090279"
  },
  {
    "text": "contained because that's what you get from clients and I kind of looked at it and said it works fine on my machine",
    "start": "1090279",
    "end": "1096360"
  },
  {
    "text": "close the ticket don't do what I did in",
    "start": "1096360",
    "end": "1103950"
  },
  {
    "start": "1100000",
    "end": "1151000"
  },
  {
    "text": "reality the site was broken the problem was that they'd had a they had an interesting extension and they were",
    "start": "1103950",
    "end": "1111340"
  },
  {
    "text": "using LastPass at the time and there was some problems with the way LastPass was injecting its things and they were",
    "start": "1111340",
    "end": "1116710"
  },
  {
    "text": "trying to log in to the site and the last LastPass wasn't working because my content security policy was blocking the extension from injecting scripts and",
    "start": "1116710",
    "end": "1122830"
  },
  {
    "text": "styles that it needed to do things there are better support for that in browsers now so it's fine now but of course it",
    "start": "1122830",
    "end": "1129370"
  },
  {
    "text": "looked fine for me for them it was broken there was some other minor issues as well but luckily it wasn't too bad",
    "start": "1129370",
    "end": "1135330"
  },
  {
    "text": "but when the clients running up complaining and there's money involved you kind of get a little scared and your boss is shouting at you and you're out",
    "start": "1135330",
    "end": "1141039"
  },
  {
    "text": "there saying I'm sorry I'm sorry roll back the deployment wrap out the deployment there's a really cool feature",
    "start": "1141039",
    "end": "1146500"
  },
  {
    "text": "in a content security policy that I'd missed if I just read the manual it's called a report URI ultimately what",
    "start": "1146500",
    "end": "1154210"
  },
  {
    "start": "1151000",
    "end": "1172000"
  },
  {
    "text": "happens is when a violation of a policy occurs the browser sends a little post request with a little JSON payload to",
    "start": "1154210",
    "end": "1160210"
  },
  {
    "text": "the endpoint that you specify and that little payload contains some really useful debugging information it's almost",
    "start": "1160210",
    "end": "1167919"
  },
  {
    "text": "like they'd thought about this um payload looks just a little bit like",
    "start": "1167919",
    "end": "1173320"
  },
  {
    "start": "1172000",
    "end": "1224000"
  },
  {
    "text": "this it kind of gives you the URI that was blocked where the document is located the line numbers gives you a",
    "start": "1173320",
    "end": "1178660"
  },
  {
    "text": "little script sample the source file that kind of thing so it gives you some really useful debugging information for",
    "start": "1178660",
    "end": "1183910"
  },
  {
    "text": "what's actually going wrong because ultimately it's a like I said it's a browser-based feature so their browser is different to",
    "start": "1183910",
    "end": "1190419"
  },
  {
    "text": "my browser they could be doing things in different ways this was cool right okay",
    "start": "1190419",
    "end": "1195940"
  },
  {
    "text": "now I've got to rollback the feature put this logging in place for capturing these reports and I thought well now",
    "start": "1195940",
    "end": "1203080"
  },
  {
    "text": "I've got to write an endpoint to capture these reports so I can store the JSON and then you know maybe do some reporting on them later and and work out",
    "start": "1203080",
    "end": "1209919"
  },
  {
    "text": "okay well where's this coming from is there a particular browser that's the problem is there a particular script that keeps popping up that I haven't I",
    "start": "1209919",
    "end": "1216039"
  },
  {
    "text": "haven't seen this was a lot of work so I did a quick search and in reality there",
    "start": "1216039",
    "end": "1221710"
  },
  {
    "text": "was a service written by someone that I interacted with before and called report URI Daioh and it's a website that gives you an",
    "start": "1221710",
    "end": "1228370"
  },
  {
    "start": "1224000",
    "end": "1361000"
  },
  {
    "text": "endpoint to send payloads to and gives you a little dashboard of requests over time and what sort of things are going",
    "start": "1228370",
    "end": "1234070"
  },
  {
    "text": "wrong so it's really nice that it saved me the work of having to build it myself it used to be completely free it's now",
    "start": "1234070",
    "end": "1241210"
  },
  {
    "text": "free for 10,000 requests a month after that it goes up to anything like $10 a month for not a lot but it's for the",
    "start": "1241210",
    "end": "1248289"
  },
  {
    "text": "sake of not having to build your own it's a pretty good resource they've had some problems in the past where who's",
    "start": "1248289",
    "end": "1255820"
  },
  {
    "text": "heard of Envato before not many it's in the Alexa top thousand five hundred it's",
    "start": "1255820",
    "end": "1263169"
  },
  {
    "text": "a fairly popular website it sells a lot of things like WordPress themes and whatnot they deployed a content security",
    "start": "1263169",
    "end": "1268360"
  },
  {
    "text": "policy to their site that was pointing to report your ID IO for any of their reports for things that went wrong and",
    "start": "1268360",
    "end": "1273610"
  },
  {
    "text": "it was a badly configured content security policy at which point I saw tweets from Scott about how he was",
    "start": "1273610",
    "end": "1279880"
  },
  {
    "text": "seeing forty five thousand requests a second per load balancer across for load balancers in his app so suddenly a",
    "start": "1279880",
    "end": "1286390"
  },
  {
    "text": "content security policy measure had turned into a distributed denial of service attack hey just farm your",
    "start": "1286390",
    "end": "1293380"
  },
  {
    "text": "resources out to the users let them fix the problem take that side down and if",
    "start": "1293380",
    "end": "1299290"
  },
  {
    "text": "you're interested any you'd like how to handle that sort of scale thing they're doing some really cool stuff with CloudFlare now where they've got all the workers on the edge nodes so",
    "start": "1299290",
    "end": "1306220"
  },
  {
    "text": "if they get like overabundance of reports it doesn't even touch their servers CloudFlare doing some really cool stuff so I'm going to search his",
    "start": "1306220",
    "end": "1312759"
  },
  {
    "text": "stuff I've got links to him a bit later it gives you this kind of information so",
    "start": "1312759",
    "end": "1318129"
  },
  {
    "text": "I can see that on this which was a this was on a report from my website I just started implementing some discuss stuff",
    "start": "1318129",
    "end": "1324639"
  },
  {
    "text": "and actually in reality the content security policy worked out quite well because I was able to block the",
    "start": "1324639",
    "end": "1329919"
  },
  {
    "text": "advertising and tracking things that discuss puts on your website which is quite handy but it gives you the",
    "start": "1329919",
    "end": "1336519"
  },
  {
    "text": "information of what browser it was in what the directive was things like that that they're going to enable you to",
    "start": "1336519",
    "end": "1342129"
  },
  {
    "text": "actually pinpoint the problems that are happening within your system this is cool the problem with this is that the",
    "start": "1342129",
    "end": "1348549"
  },
  {
    "text": "site is still broken I'm getting information about why it's broken that helps the site is still live and broken with this in place and that's when I",
    "start": "1348549",
    "end": "1355090"
  },
  {
    "text": "kept reading the manual and I found another thing that was really helpful and that's a mode in content security policy headers called report only and",
    "start": "1355090",
    "end": "1363519"
  },
  {
    "start": "1361000",
    "end": "1390000"
  },
  {
    "text": "what this does is it says ok I'm gonna send any violation reports that occur so",
    "start": "1363519",
    "end": "1369369"
  },
  {
    "text": "if anything goes wrong I'll send you the JSON payload but I'm not gonna block it for the user the user for the use of the",
    "start": "1369369",
    "end": "1376809"
  },
  {
    "text": "site will continue as it did before and that's really helpful because it means that if you're implementing this on an",
    "start": "1376809",
    "end": "1382509"
  },
  {
    "text": "existing site you're not going to break anything but you'll get information about what would break would you enforce this in production the only difference",
    "start": "1382509",
    "end": "1390279"
  },
  {
    "text": "to it is you specify report only on the header and then you put in the policy as",
    "start": "1390279",
    "end": "1395350"
  },
  {
    "text": "you did before the report URI which you can do on both enforced and reporting policies and then you can just",
    "start": "1395350",
    "end": "1400629"
  },
  {
    "text": "carry on your business and get those reports coming back into your system this is a really nice feature because it",
    "start": "1400629",
    "end": "1406539"
  },
  {
    "text": "allows you to trial stuff before you enforce it which would have been really helpful for this developer here who broke production and but the problem is",
    "start": "1406539",
    "end": "1414639"
  },
  {
    "text": "much like a badly configured policy with someone like Envato there's going to be a lot of noise and the noise in your app",
    "start": "1414639",
    "end": "1420759"
  },
  {
    "start": "1418000",
    "end": "1458000"
  },
  {
    "text": "is going to be all of these things are broken you need to do it over time and fix it a lot of people ask how you know",
    "start": "1420759",
    "end": "1427090"
  },
  {
    "text": "you can implement a content security policy kind of overnight effectively if you're doing it on an existing website I",
    "start": "1427090",
    "end": "1433359"
  },
  {
    "text": "would always recommend against that because it's never gonna go all that well you're never gonna get it right first time I",
    "start": "1433359",
    "end": "1439340"
  },
  {
    "text": "didn't I'm not saying I'm the best developer in the world but you know it's",
    "start": "1439340",
    "end": "1444649"
  },
  {
    "text": "not gonna happen so you really need to make sure that you do this iteratively",
    "start": "1444649",
    "end": "1449779"
  },
  {
    "text": "implement a little bit at first and carry on over time tweak it tweak it until you're happy with it then you can",
    "start": "1449779",
    "end": "1455840"
  },
  {
    "text": "enforce it so now we get to the fun part the talk I am just going to switch over",
    "start": "1455840",
    "end": "1466509"
  },
  {
    "start": "1458000",
    "end": "1481000"
  },
  {
    "text": "okay right so we have we collectively",
    "start": "1471309",
    "end": "1482120"
  },
  {
    "text": "are a very very large development team that's been asked to build a very small website now this is fine I'll take one",
    "start": "1482120",
    "end": "1488960"
  },
  {
    "text": "for the team I'll build the website you will go on holiday ten points to anyone",
    "start": "1488960",
    "end": "1495470"
  },
  {
    "text": "who knows where the Ellingson mineral company is from yes",
    "start": "1495470",
    "end": "1500629"
  },
  {
    "text": "you like the second person who's ever got that in the talk yes okay and if you haven't seen the film hackers you need",
    "start": "1500629",
    "end": "1506360"
  },
  {
    "text": "to go home and watch it tonight because it's the single greatest hacking movie ever made I will debate this for hours I don't",
    "start": "1506360",
    "end": "1512720"
  },
  {
    "text": "even care the Ellingson mineral company is a very important company they're a very",
    "start": "1512720",
    "end": "1519139"
  },
  {
    "text": "important client of ours we can see this we've got some typical business buzzwords we've got gold posts we need a",
    "start": "1519139",
    "end": "1524509"
  },
  {
    "start": "1520000",
    "end": "1533000"
  },
  {
    "text": "recap by the end of the day and get buy-in open-door policy with a t-shape individual rock star ninja or thought",
    "start": "1524509",
    "end": "1529940"
  },
  {
    "text": "Shoah we can tell they're a very serious company they've got a few requirements for this website one be Ellingson",
    "start": "1529940",
    "end": "1536720"
  },
  {
    "start": "1533000",
    "end": "1544000"
  },
  {
    "text": "mineral company the home page it shows some like data banks and lots of business text and it's got their colors",
    "start": "1536720",
    "end": "1542779"
  },
  {
    "text": "in they like this the second part is they've got their pride and joy is the Gibson now the Gibson is a supercomputer",
    "start": "1542779",
    "end": "1549980"
  },
  {
    "start": "1544000",
    "end": "1572000"
  },
  {
    "text": "it's their mainframe it's it's the center of their entire business and because of this they need clients to",
    "start": "1549980",
    "end": "1555980"
  },
  {
    "text": "know that the Gibson is totally secure and they do this by a pop-up letting you",
    "start": "1555980",
    "end": "1562129"
  },
  {
    "text": "know on the website that we're secure because if you don't pop up a pop-up in front of your users they can't trust you",
    "start": "1562129",
    "end": "1568100"
  },
  {
    "text": "that you're secure so that's the second requirement of the site as we can see the Gibson its",
    "start": "1568100",
    "end": "1574659"
  },
  {
    "start": "1572000",
    "end": "1598000"
  },
  {
    "text": "holographic there's got lots of blue lines it looks pretty cool they're serious business the third requirement",
    "start": "1574659",
    "end": "1583039"
  },
  {
    "text": "of the site is they have a place to store garbage files within the system now these garbage files are simply a way",
    "start": "1583039",
    "end": "1589669"
  },
  {
    "text": "for you to enter content and save the",
    "start": "1589669",
    "end": "1597080"
  },
  {
    "text": "notes within the system and you can see now that the content of the note that we just entered is secured now as we're",
    "start": "1597080",
    "end": "1604999"
  },
  {
    "text": "doing this a hacker comes along and they",
    "start": "1604999",
    "end": "1611450"
  },
  {
    "text": "notice a couple of things on this this page I'm going to take that off just listen tight they see this message files",
    "start": "1611450",
    "end": "1618080"
  },
  {
    "start": "1616000",
    "end": "1631000"
  },
  {
    "text": "updated on the site they then see in the URL there's a message there that says",
    "start": "1618080",
    "end": "1625249"
  },
  {
    "text": "files updated so wonder if I did well that's quite cool I can manipulate the",
    "start": "1625249",
    "end": "1632960"
  },
  {
    "start": "1631000",
    "end": "1663000"
  },
  {
    "text": "content on the website okay so what if instead of that we said we're gonna",
    "start": "1632960",
    "end": "1644960"
  },
  {
    "text": "throw a script in there and what should we do I'll tell you what we put earlier didn't we let's do a poop emoji there we",
    "start": "1644960",
    "end": "1656509"
  },
  {
    "text": "go so now instead of displaying our content we can go to this website and we",
    "start": "1656509",
    "end": "1663619"
  },
  {
    "start": "1663000",
    "end": "1678000"
  },
  {
    "text": "get a look pop emoji now the hacker sees this in the like okay this there's something here I can I can maybe work",
    "start": "1663619",
    "end": "1670190"
  },
  {
    "text": "with this and they carry on navigating the site and they they go away and they go to the Gibson and they're told it's",
    "start": "1670190",
    "end": "1675559"
  },
  {
    "text": "secure and they come back to the garbage files and the problem is no longer there because that was a reflected across site",
    "start": "1675559",
    "end": "1681109"
  },
  {
    "start": "1678000",
    "end": "1705000"
  },
  {
    "text": "scripting risk but they notice that the message that we put in earlier is still on the site so then they think okay well",
    "start": "1681109",
    "end": "1687889"
  },
  {
    "text": "what happens if I put alert poop emoji in there instead and update the note",
    "start": "1687889",
    "end": "1693099"
  },
  {
    "text": "well now it appears on the web site and if I go away to the home page and I come",
    "start": "1693099",
    "end": "1699229"
  },
  {
    "text": "back I get poop emoji and if I reload the page I get poop oh gee and so on and so forth so now",
    "start": "1699229",
    "end": "1706160"
  },
  {
    "start": "1705000",
    "end": "1736000"
  },
  {
    "text": "we've got a stored cross-site scripting risk on the site at which point corporate phones up the US as a",
    "start": "1706160",
    "end": "1712490"
  },
  {
    "text": "development team you're all on holiday so I'm alone in the office I get the phone call there's poop emojis all over",
    "start": "1712490",
    "end": "1717860"
  },
  {
    "text": "the website we can't deal with this we've got where we're losing our professional image our credibility is",
    "start": "1717860",
    "end": "1724429"
  },
  {
    "text": "dropping fix this and I say I know I've heard of this thing called a Content",
    "start": "1724429",
    "end": "1730220"
  },
  {
    "text": "security policy I can fix all of your problems with a content security policy so we load our",
    "start": "1730220",
    "end": "1736850"
  },
  {
    "start": "1736000",
    "end": "1769000"
  },
  {
    "text": "Park code base I've got a piece of code here that just implements a content",
    "start": "1736850",
    "end": "1742280"
  },
  {
    "text": "security policy middleware header and a PHP developer this is written in PHP sorry if that offends you but there's a",
    "start": "1742280",
    "end": "1750200"
  },
  {
    "text": "piece of middleware here that all it does is it adds a content security policy header it does a quick replace on",
    "start": "1750200",
    "end": "1757100"
  },
  {
    "text": "some stuff and puts the header into the response and then I configure the content security policy with I'll beat",
    "start": "1757100",
    "end": "1763520"
  },
  {
    "text": "those hackers I don't trust anyone I don't trust myself but now I don't see",
    "start": "1763520",
    "end": "1770960"
  },
  {
    "start": "1769000",
    "end": "1814000"
  },
  {
    "text": "any poop emojis I deploy the site client corporate",
    "start": "1770960",
    "end": "1779700"
  },
  {
    "text": "phones up hey okay we love the fact that there's no poop emojis that's that's really cool",
    "start": "1779700",
    "end": "1785600"
  },
  {
    "text": "maybe a little bit of a problem I mean the big problem is there's no pictures",
    "start": "1785600",
    "end": "1792750"
  },
  {
    "text": "they can't see our fantastic Gibson supercomputer what what's going on so we say okay okay fine",
    "start": "1792750",
    "end": "1799280"
  },
  {
    "text": "go back to our to our policy and we put in some Styles let's get the Styles back",
    "start": "1799280",
    "end": "1809040"
  },
  {
    "text": "in get the images back in we load up the site again okay cool we've got some images back in",
    "start": "1809040",
    "end": "1815850"
  },
  {
    "start": "1814000",
    "end": "1821000"
  },
  {
    "text": "the homepage looking good garbage files I don't see any proof emojis we fix the problem there and then",
    "start": "1815850",
    "end": "1821820"
  },
  {
    "start": "1821000",
    "end": "1865000"
  },
  {
    "text": "they phone up and say Matt this is cool and there's another little issue unfortunately our clients don't trust us",
    "start": "1821820",
    "end": "1828450"
  },
  {
    "text": "anymore because there's not an obnoxious pop-up telling them that we're secure so I say okay okay I'm really really sorry",
    "start": "1828450",
    "end": "1835020"
  },
  {
    "text": "and let me go fix that and I come back in and I say okay script source unsafe",
    "start": "1835020",
    "end": "1843810"
  },
  {
    "text": "inline if I look at my Gibson file I can",
    "start": "1843810",
    "end": "1851970"
  },
  {
    "text": "see I've got a script tag in there that says this page is totally secure this is an inline script I needed to execute so",
    "start": "1851970",
    "end": "1857910"
  },
  {
    "text": "in my security policy I enable a script source of unsafe inline and now",
    "start": "1857910",
    "end": "1864120"
  },
  {
    "text": "hopefully homepage I've got the images and the Styles working clients are happy",
    "start": "1864120",
    "end": "1869330"
  },
  {
    "start": "1865000",
    "end": "1876000"
  },
  {
    "text": "Gibson hey the page is totally secure clients are really happy deploy the site",
    "start": "1869330",
    "end": "1876090"
  },
  {
    "start": "1876000",
    "end": "1886000"
  },
  {
    "text": "again and unfortunately the proof emerges back now I've put that padlock",
    "start": "1876090",
    "end": "1882150"
  },
  {
    "text": "on the gate unfortunately I've just left the gate open so the problem with this is that",
    "start": "1882150",
    "end": "1887930"
  },
  {
    "text": "because this script tag that I've put into the content of the site is being embedded in the template I'm effectively saying any script that appears in that",
    "start": "1887930",
    "end": "1894320"
  },
  {
    "text": "second site render it Ronnie I don't care which isn't particularly good so",
    "start": "1894320",
    "end": "1900560"
  },
  {
    "text": "there is a way to solve this particular problem and the way to solve this one is I'm just gonna undo back to where we",
    "start": "1900560",
    "end": "1906860"
  },
  {
    "text": "were before is with this cryptographic nonce now because I control this",
    "start": "1906860",
    "end": "1912650"
  },
  {
    "text": "template I can control how this script is rendered so I can say render this",
    "start": "1912650",
    "end": "1918860"
  },
  {
    "text": "with the nonce template an engine just puts that nonce variable in it puts the",
    "start": "1918860",
    "end": "1924800"
  },
  {
    "text": "same cryptographic number into the header as well and we should be good now",
    "start": "1924800",
    "end": "1930080"
  },
  {
    "text": "when I go back to the site and I load it home page we're looking good we've got images we've got text we've",
    "start": "1930080",
    "end": "1935390"
  },
  {
    "start": "1932000",
    "end": "1943000"
  },
  {
    "text": "got business buzzwords give some page we've got our alert and I'll pop up and",
    "start": "1935390",
    "end": "1941500"
  },
  {
    "text": "now when we go to the garbage file page we don't get any poop emojis and that's because the script that's been embedded",
    "start": "1941500",
    "end": "1947990"
  },
  {
    "start": "1943000",
    "end": "1956000"
  },
  {
    "text": "doesn't have access to that cryptographic number that we've got therefore it can't execute anything and",
    "start": "1947990",
    "end": "1953600"
  },
  {
    "text": "if we look in the console we will get I've also put in a message much like Facebook because they're the you know",
    "start": "1953600",
    "end": "1960080"
  },
  {
    "start": "1956000",
    "end": "2053000"
  },
  {
    "text": "leaders of the Internet and then there's a little message there from the content",
    "start": "1960080",
    "end": "1965150"
  },
  {
    "text": "security policy this page of settings blocked the loading of a resource at the inline script so we can't do that if I",
    "start": "1965150",
    "end": "1972410"
  },
  {
    "text": "de implemented a report uri endpoint to send to it would send us a post request with a little bit of JSON telling us",
    "start": "1972410",
    "end": "1978440"
  },
  {
    "text": "about this error well you could then see that anger like someone's put that in we need to fix that as a problem now a",
    "start": "1978440",
    "end": "1984740"
  },
  {
    "text": "couple of caveats with this I'm doing",
    "start": "1984740",
    "end": "1989960"
  },
  {
    "text": "really terrible things in a templating engine here and I've got my secure message that appears in the header and",
    "start": "1989960",
    "end": "1995810"
  },
  {
    "text": "my note content that I'm putting back out I'm rendering them as raw which means I'm not escaping them in my output",
    "start": "1995810",
    "end": "2001080"
  },
  {
    "text": "don't do that do we escape your output like I said content security policies aren't an excuse to be really sloppy",
    "start": "2001080",
    "end": "2006910"
  },
  {
    "text": "they just help fix the areas where you might not have noticed there's a potential problem similarly by default",
    "start": "2006910",
    "end": "2013360"
  },
  {
    "text": "browsers are getting better there's a piece of middleware that I've got here or the disable cross-site scripting",
    "start": "2013360",
    "end": "2019240"
  },
  {
    "text": "protection middleware because browsers actually implement some basic cross site scripting protection by default if they",
    "start": "2019240",
    "end": "2024730"
  },
  {
    "text": "detect scripts and things in the request they can block them from being sent back in the response or they can sanitize the",
    "start": "2024730",
    "end": "2030340"
  },
  {
    "text": "response for you but in order to demonstrate this I need to turn the protection off so I can show you what",
    "start": "2030340",
    "end": "2035470"
  },
  {
    "text": "it's like when it's bad so don't do that unless you have a real genuine need to for the most part you'll be okay there",
    "start": "2035470",
    "end": "2049360"
  },
  {
    "text": "we go okay so there's a few tips",
    "start": "2049360",
    "end": "2054639"
  },
  {
    "start": "2053000",
    "end": "2060000"
  },
  {
    "text": "that's the presentation I wish I'd seen before I was put in the policy in place and breaking things have a really quick",
    "start": "2054640",
    "end": "2061419"
  },
  {
    "text": "and easy way to disable the content security policy in production I'm glad that our deployment system is just a",
    "start": "2061419",
    "end": "2066820"
  },
  {
    "text": "case of hitting a button that says rollback deployment and it does it for me had it not I would have been panicking a lot more even better have a",
    "start": "2066820",
    "end": "2075070"
  },
  {
    "text": "way to switch it from enforce to report only because that way you can still get the information as to what's going wrong",
    "start": "2075070",
    "end": "2080379"
  },
  {
    "text": "but nothing is actually broken it helps you debug the problems if you need",
    "start": "2080380",
    "end": "2087510"
  },
  {
    "text": "cryptographic nuts add the CSP and application level you can do it in web",
    "start": "2087510",
    "end": "2092830"
  },
  {
    "text": "servers I've seen the config for generating it in nginx it's a nightmare but then again your application needs",
    "start": "2092830",
    "end": "2097960"
  },
  {
    "text": "access today if it's sending back those things and it's a weird thing so just put it in your application code and with",
    "start": "2097960",
    "end": "2103780"
  },
  {
    "text": "new newer architectures like middlewares and whatnot it's a lot easier than it used to be if you're working with",
    "start": "2103780",
    "end": "2110140"
  },
  {
    "start": "2108000",
    "end": "2128000"
  },
  {
    "text": "cryptographic nonces don't generate multiple nonces in the same request the",
    "start": "2110140",
    "end": "2115450"
  },
  {
    "text": "browser's can get a little bit weird with that but do generate a new one on each separate request because if you reuse the same thing over and over again",
    "start": "2115450",
    "end": "2121240"
  },
  {
    "text": "it just gets predictable and guessable you know your nonce shouldn't be random one two three if you're using a",
    "start": "2121240",
    "end": "2129370"
  },
  {
    "start": "2128000",
    "end": "2155000"
  },
  {
    "text": "templating engine I Eve used twig which is very much based on ginger from Python and add the nonce at a global level so",
    "start": "2129370",
    "end": "2135400"
  },
  {
    "text": "it's available in every template you're rendering regardless of whether or not you've distinct Lee added it to the block of parameters for that template",
    "start": "2135400",
    "end": "2141510"
  },
  {
    "text": "and write a helper in that template engine to generate script tags with the",
    "start": "2141510",
    "end": "2146890"
  },
  {
    "text": "nonce if it's available then developers don't have the excuse of I would but it's hard we're lazy there is a way",
    "start": "2146890",
    "end": "2156619"
  },
  {
    "start": "2155000",
    "end": "2175000"
  },
  {
    "text": "to enforce multiple policies on a website they really complicate things so try to avoid multiple enforcement's if",
    "start": "2156619",
    "end": "2162980"
  },
  {
    "text": "possible so for a resource to be allowed it has to be allowed by all the policies",
    "start": "2162980",
    "end": "2168530"
  },
  {
    "text": "that are declared not just one of them because if one of them says yes the other one says no it gets blocked I try",
    "start": "2168530",
    "end": "2175609"
  },
  {
    "start": "2175000",
    "end": "2202000"
  },
  {
    "text": "to avoid avoid them where possible and enforce policies but they're really helpful for an enforced policy and a",
    "start": "2175609",
    "end": "2181190"
  },
  {
    "text": "report policy because if you've got an enforced policy that you know works and you're looking to tweak it and make adjustments you can deploy the new one",
    "start": "2181190",
    "end": "2188240"
  },
  {
    "text": "in a report only mode capture the resources as to you know the debug information as to what would go wrong",
    "start": "2188240",
    "end": "2193520"
  },
  {
    "text": "but then you're not having to worry about when how the site is broken because you've got one that we know works already if you do use report only",
    "start": "2193520",
    "end": "2204230"
  },
  {
    "start": "2202000",
    "end": "2217000"
  },
  {
    "text": "you can test multiple policies at the same time because nothing breaks for the user so that works a lot a lot easier you just got to work out you know which",
    "start": "2204230",
    "end": "2211400"
  },
  {
    "text": "policy did it come from which one of these is working and which one of these isn't if I could give you another piece",
    "start": "2211400",
    "end": "2219319"
  },
  {
    "start": "2217000",
    "end": "2251000"
  },
  {
    "text": "of advice for this is this guy Scott helm he's the guy who runs report your ID io he now runs it with Troy Hunt",
    "start": "2219319",
    "end": "2225650"
  },
  {
    "text": "who's heard of Troy hunt he's a fairly well known security guy runs have I been",
    "start": "2225650",
    "end": "2232339"
  },
  {
    "text": "poned which is a massive database full of his all the breaches we know about is your email in any of them really helpful",
    "start": "2232339",
    "end": "2238609"
  },
  {
    "text": "but really scary when you get one that comes through and says oh hey you're in another one thanks Internet and he",
    "start": "2238609",
    "end": "2244190"
  },
  {
    "text": "really knows his stuff and he's super friendly he's really been helpful with this stuff in the past and there's one",
    "start": "2244190",
    "end": "2249260"
  },
  {
    "text": "person I would go to it's him secondly is a guy called mr. Goodwin works at Mozilla News mark and he first",
    "start": "2249260",
    "end": "2256190"
  },
  {
    "start": "2251000",
    "end": "2272000"
  },
  {
    "text": "introduced me to what content security policy was back in 2014 I think it was um it kind of blew my mind a little bit",
    "start": "2256190",
    "end": "2262790"
  },
  {
    "text": "like oh this is this is possible and that's pretty cool so I would always",
    "start": "2262790",
    "end": "2267980"
  },
  {
    "text": "give them a recommendation there's a",
    "start": "2267980",
    "end": "2273380"
  },
  {
    "start": "2272000",
    "end": "2317000"
  },
  {
    "text": "load of links and further reading there will be homework I'll be sending out a survey now I'm not don't worry",
    "start": "2273380",
    "end": "2278619"
  },
  {
    "text": "those links are all really good the OWASP stuff is great the content security policy stuff is great Mozilla developer Network is one of the",
    "start": "2278660",
    "end": "2285120"
  },
  {
    "text": "best resources online if you still see results from w3 schools if you're using Chrome there's an extension you can install that takes them out of the",
    "start": "2285120",
    "end": "2290730"
  },
  {
    "text": "search results or anytime you do a search for something just append it with mdn and then all the",
    "start": "2290730",
    "end": "2296790"
  },
  {
    "text": "bad stuff goes away and you get more as in a developer Network stuff instead and report your ideas great Scott Helms",
    "start": "2296790",
    "end": "2302400"
  },
  {
    "text": "website the block the demo the code I was running is on github if you do want to take a look at it",
    "start": "2302400",
    "end": "2309050"
  },
  {
    "text": "thank you very much [Applause]",
    "start": "2309050",
    "end": "2319380"
  }
]