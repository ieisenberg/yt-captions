[
  {
    "start": "0",
    "end": "57000"
  },
  {
    "text": "[Music]",
    "start": "980",
    "end": "7849"
  },
  {
    "text": "thank you thanks for joining me right after lunch and again sorry for five minutes delay I think let's see if I",
    "start": "12170",
    "end": "19050"
  },
  {
    "text": "have to make it up during the talk or solve it in any other way my name is",
    "start": "19050",
    "end": "25199"
  },
  {
    "text": "Evan here I'm a sofa architect at traffic amsterdam and i'm currently working on a project called blocks which",
    "start": "25199",
    "end": "32940"
  },
  {
    "text": "is a crypto currency trading platform and we run on google kubernetes engine",
    "start": "32940",
    "end": "38730"
  },
  {
    "text": "which is the hosted version of uber need is provided by Google so out of you in",
    "start": "38730",
    "end": "44460"
  },
  {
    "text": "the room who already uses kubernetes please ah almost the whole room so if I",
    "start": "44460",
    "end": "50039"
  },
  {
    "text": "ask about helm will it be the same amount okay so we can do the talk together let's go back around 50 years",
    "start": "50039",
    "end": "60270"
  },
  {
    "start": "57000",
    "end": "57000"
  },
  {
    "text": "ago when I started out one of my first software development projects our main",
    "start": "60270",
    "end": "65970"
  },
  {
    "text": "project the little ball was an ear file we basically run on a WebSphere and I think if I look around the room people",
    "start": "65970",
    "end": "72990"
  },
  {
    "text": "neck recognize this name maybe we get IBM tables in a few months as well after",
    "start": "72990",
    "end": "79740"
  },
  {
    "text": "WebSphere we we move to deploying war files on Tomcat and jar files of course",
    "start": "79740",
    "end": "85950"
  },
  {
    "text": "with spring boot vertex but then with",
    "start": "85950",
    "end": "91619"
  },
  {
    "text": "the containers this changed a little bit we were not delivering our Java artifacts anymore but we were delivering",
    "start": "91619",
    "end": "97140"
  },
  {
    "text": "docker images and now on the project we start in in January basically the stuff",
    "start": "97140",
    "end": "102810"
  },
  {
    "text": "we deliver the most is young so I think 80% of the files the stuff we write the",
    "start": "102810",
    "end": "107939"
  },
  {
    "text": "AMA volume of volume of file so of course this has to do because we run on",
    "start": "107939",
    "end": "113340"
  },
  {
    "text": "Cuba needs and we deploy our docker containers inside communities but",
    "start": "113340",
    "end": "118950"
  },
  {
    "text": "communities needs a lot of configuration it's just not just deploying a docker",
    "start": "118950",
    "end": "124200"
  },
  {
    "text": "image and letting it run but there's a lot of stuff that needs to be described around it in order to function properly",
    "start": "124200",
    "end": "130440"
  },
  {
    "text": "of course it does a lot of stuff for you the scheduling of images instances on",
    "start": "130440",
    "end": "138390"
  },
  {
    "text": "ports and networking making sure that the amount of replicas is correct so",
    "start": "138390",
    "end": "145980"
  },
  {
    "text": "since you already know kubernetes we can maybe do this one a little quicker and I normally do but this is basically an",
    "start": "145980",
    "end": "154290"
  },
  {
    "text": "overview of stuff to deploy on kubernetes when you deploy an application so all the dots you can",
    "start": "154290",
    "end": "160770"
  },
  {
    "text": "consider container instances or pots pots is basically the scheduling unit",
    "start": "160770",
    "end": "165900"
  },
  {
    "text": "that you have so basically one app instance is more or less related to a",
    "start": "165900",
    "end": "172290"
  },
  {
    "text": "pot and then of course you need to have service definitions to expose your pots so they are able to talk to each other",
    "start": "172290",
    "end": "178380"
  },
  {
    "text": "probably increases because you want traffic into your cluster you have to define how many replicas your deployment",
    "start": "178380",
    "end": "186420"
  },
  {
    "text": "has so the amount of instances you need to provide scheduling information but",
    "start": "186420",
    "end": "191490"
  },
  {
    "text": "also stuff like configuration so if you for instance would like to deploy",
    "start": "191490",
    "end": "197640"
  },
  {
    "text": "something like a sonar cube it's one of the first things we deployed in communities because we wanted to do code",
    "start": "197640",
    "end": "203460"
  },
  {
    "text": "quality monitoring and host kubernetes or so so to keep ourselves so of course",
    "start": "203460",
    "end": "208950"
  },
  {
    "text": "you need a sonic qube container instance but you probably need a database as well because you want to store your analysis",
    "start": "208950",
    "end": "216180"
  },
  {
    "text": "results if you have a database you need something like a persistence for you claim that's basically a for you mount",
    "start": "216180",
    "end": "223170"
  },
  {
    "text": "where the database can storage data but these things need to talk to each other so you need to surfaces I probably have",
    "start": "223170",
    "end": "230220"
  },
  {
    "text": "some kind of secret as well because you have a password to go into the database you need to access sonar running inside",
    "start": "230220",
    "end": "237540"
  },
  {
    "text": "kubernetes oh you have an ingress so for us it's something like blocks to Lincoln's like sonar and probably a",
    "start": "237540",
    "end": "244770"
  },
  {
    "text": "property file where you store the configuration so it looks something like this deployment configuration you",
    "start": "244770",
    "end": "251520"
  },
  {
    "text": "probably recognize this kind of definition a bridge also needs pod configurations and service",
    "start": "251520",
    "end": "257459"
  },
  {
    "text": "configurations so that's a lot of stuff to manage so one of the first things we",
    "start": "257459",
    "end": "262740"
  },
  {
    "text": "were looking into is how can we manage all these communities deployments in any vation way and one of the tools that",
    "start": "262740",
    "end": "269890"
  },
  {
    "text": "came up in in january was held and helm is basically a package manager for",
    "start": "269890",
    "end": "275700"
  },
  {
    "text": "communities deployments so you can compare it a little bit with something",
    "start": "275700",
    "end": "280930"
  },
  {
    "text": "like maven for Java projects or NPM for JavaScript you can package your artifact",
    "start": "280930",
    "end": "288070"
  },
  {
    "text": "artifacts in a way that is able to version but also to share it but also to",
    "start": "288070",
    "end": "293560"
  },
  {
    "text": "define stuff like dependencies so very similar to a maven or NPM or or Gradle",
    "start": "293560",
    "end": "299650"
  },
  {
    "text": "and the goal here is to be able to manage complex kubernetes deployments and the sonarqube one I showed it's a",
    "start": "299650",
    "end": "307780"
  },
  {
    "text": "pretty simple deployment but it already involves lots of moving parts so let's have a look at how this looks if you",
    "start": "307780",
    "end": "314560"
  },
  {
    "text": "want to install sonar cube in communities with helm so basically what",
    "start": "314560",
    "end": "324190"
  },
  {
    "text": "I have is I have docker for desktop running and as you might know dock for desktop has communities inside",
    "start": "324190",
    "end": "330730"
  },
  {
    "text": "optionally so first let's check if I'm",
    "start": "330730",
    "end": "335890"
  },
  {
    "text": "connected to the correct communities instance this is somewhat important",
    "start": "335890",
    "end": "342160"
  },
  {
    "text": "because it's really easy to deploy stuff to the wrong environment as you've noticed but docked for desktop sounds",
    "start": "342160",
    "end": "347650"
  },
  {
    "text": "good if I get my name space of a few you will see the default stuff you get if you run kubernetes in the docker app",
    "start": "347650",
    "end": "353790"
  },
  {
    "text": "that you public cube system and now if you want to install sonic you basically",
    "start": "353790",
    "end": "361510"
  },
  {
    "text": "what you can do is say helm install and then the name of the stuff you want to install in this case it's called stable",
    "start": "361510",
    "end": "368650"
  },
  {
    "text": "so no cube because it's a stable release the sonar cube package and I'm installing it in a separate namespace",
    "start": "368650",
    "end": "374860"
  },
  {
    "text": "called Sonic you so if you install this and basically you get an output from",
    "start": "374860",
    "end": "381250"
  },
  {
    "text": "helm saying the stuff your UF install so you you recognize the position for you claim the surface the deployment and the",
    "start": "381250",
    "end": "389500"
  },
  {
    "text": "ports and the secrets now if we have a look at what's actually being deployed",
    "start": "389500",
    "end": "396160"
  },
  {
    "text": "then we have our two ports for post grass and for sonar cube and of course it doesn't come out of",
    "start": "396160",
    "end": "405699"
  },
  {
    "text": "thin air this deployment someone has to write these deployment files and the",
    "start": "405699",
    "end": "412150"
  },
  {
    "text": "nice thing about helm is that they basically have an app store for kubernetes applications so and help",
    "start": "412150",
    "end": "418630"
  },
  {
    "text": "package is called a chart so this kit repository is called helm charts and",
    "start": "418630",
    "end": "424630"
  },
  {
    "text": "these are all the definitions of the charts which are available on the public",
    "start": "424630",
    "end": "429880"
  },
  {
    "text": "helm communities app store if you want to call it like that so there's something like a Bitcoin",
    "start": "429880",
    "end": "436510"
  },
  {
    "text": "daemon here which we tried as well for integrations with the blockchain there",
    "start": "436510",
    "end": "442300"
  },
  {
    "text": "is our sonar cube of course so if you look inside this folder there's some",
    "start": "442300",
    "end": "448810"
  },
  {
    "text": "configuration so for instance there's a definition of the chart it is writable in the back point away I wasn't able to",
    "start": "448810",
    "end": "455650"
  },
  {
    "text": "test the phone sighs yeah readable which has a name and a version and it has",
    "start": "455650",
    "end": "465250"
  },
  {
    "text": "templates which are basically template files for the definition so we have a look more detailed looking in a moment",
    "start": "465250",
    "end": "472360"
  },
  {
    "text": "in the meantime this startup so that's nice so if I now have a look at what",
    "start": "472360",
    "end": "479199"
  },
  {
    "text": "kind of services were deployed then",
    "start": "479199",
    "end": "485770"
  },
  {
    "text": "there's one for the database of course and there's also one for the Sun cube web front-end and it actually exposes",
    "start": "485770",
    "end": "492810"
  },
  {
    "text": "important 9000 which we are used to so this now should show up sooner so this",
    "start": "492810",
    "end": "499870"
  },
  {
    "text": "is basically one line to install sonic cube in your communities closer so let",
    "start": "499870",
    "end": "509050"
  },
  {
    "text": "me now reset it",
    "start": "509050",
    "end": "511948"
  },
  {
    "start": "521000",
    "end": "521000"
  },
  {
    "text": "so helm is quite of a technical tool so I think the best way to go through this process is to do it ourselves but you",
    "start": "521610",
    "end": "529500"
  },
  {
    "text": "don't have to cut your laptop's out now but the talk is set up in a way that you can probably follow along if you want to",
    "start": "529500",
    "end": "535530"
  },
  {
    "text": "replicate this stuff basically helm consists of three components the one",
    "start": "535530",
    "end": "541830"
  },
  {
    "text": "that you see the most is to see a lie it's the one I used just now in my terminal command line interface that",
    "start": "541830",
    "end": "548450"
  },
  {
    "text": "connects to something running in the kubernetes cluster which is called a tiller tiller is a demon you have to",
    "start": "548450",
    "end": "555480"
  },
  {
    "text": "install it once then it runs inside your cluster in a namespace and that one",
    "start": "555480",
    "end": "561150"
  },
  {
    "text": "interacts with communities to install your applications and the nice thing of",
    "start": "561150",
    "end": "568820"
  },
  {
    "text": "Distiller is that it also keeps state so say for instance normally we install our",
    "start": "568820",
    "end": "575160"
  },
  {
    "text": "stuff through our CI system we use github CI and that runs are built and it",
    "start": "575160",
    "end": "580710"
  },
  {
    "text": "installs stuff for us in a communities cluster and if I want to interact with it from my own machine I can just run",
    "start": "580710",
    "end": "587310"
  },
  {
    "text": "our my helm CLI against the tiller in the cluster and I get the same state so",
    "start": "587310",
    "end": "592560"
  },
  {
    "text": "you don't have to state locally on your machine the state is kept in your communities cluster this is something",
    "start": "592560",
    "end": "598470"
  },
  {
    "text": "where there's for instance the difference with terraform you can do similar stuff with terraform but that",
    "start": "598470",
    "end": "604530"
  },
  {
    "text": "keeps state locally and the third component is the chart repository and I already showed you the public one so",
    "start": "604530",
    "end": "610770"
  },
  {
    "text": "that's like comparable to a maven central or a docker hub where everyone",
    "start": "610770",
    "end": "616470"
  },
  {
    "text": "can share the chart definitions but you can also run your own repository we are actually running our own repository for",
    "start": "616470",
    "end": "622980"
  },
  {
    "text": "all the charts we make and you can also use local files so files on your file system and that's something we're going",
    "start": "622980",
    "end": "629010"
  },
  {
    "text": "to do just now let's have a look at another simple surface so basically this",
    "start": "629010",
    "end": "635640"
  },
  {
    "text": "service as a front-end consisting of PHP web servers there's a reddit master and",
    "start": "635640",
    "end": "642210"
  },
  {
    "text": "two reddit slaves and this is you might recognize this as a guestbook example which is often used for kubernetes",
    "start": "642210",
    "end": "648360"
  },
  {
    "text": "tutorials so if we have a look at how part of",
    "start": "648360",
    "end": "653810"
  },
  {
    "text": "yum all communities manifest file would look without helm it will be something",
    "start": "653810",
    "end": "659300"
  },
  {
    "text": "like this so this is the deployment configuration and software is",
    "start": "659300",
    "end": "664550"
  },
  {
    "text": "interesting for instance is a reference to the docker image you actually want to",
    "start": "664550",
    "end": "669800"
  },
  {
    "text": "deploy because the files are just the llamo files of course and you have to",
    "start": "669800",
    "end": "675140"
  },
  {
    "text": "point to a docker image that somewhere deployed inside the docker registry and",
    "start": "675140",
    "end": "681940"
  },
  {
    "text": "for me when I saw this the first time I was like ok this is nice but I don't want to have my image name and the tag",
    "start": "681940",
    "end": "688370"
  },
  {
    "text": "and the version inside this Yama file because my versions are dynamic there there are a result of our built we use",
    "start": "688370",
    "end": "694850"
  },
  {
    "text": "our git commit hash as a version number so I don't want to have it here so you want to extract this out and that's",
    "start": "694850",
    "end": "700850"
  },
  {
    "text": "actually exactly how home works basically if you have to say it in very",
    "start": "700850",
    "end": "705980"
  },
  {
    "text": "short sentence you say well helm is like just a template engine for communities manifest files so instead of having the",
    "start": "705980",
    "end": "713600"
  },
  {
    "text": "hard-coded values for instance there's a image and there's a template variable in",
    "start": "713600",
    "end": "721370"
  },
  {
    "text": "this case values dot front end dot image and there's one for the container port as well so of course you have to specify",
    "start": "721370",
    "end": "729680"
  },
  {
    "text": "the values to actually generate communities manifest file so if you have",
    "start": "729680",
    "end": "735710"
  },
  {
    "start": "734000",
    "end": "734000"
  },
  {
    "text": "a look at what's in a char package then this is a kind of a minimal version so",
    "start": "735710",
    "end": "741440"
  },
  {
    "text": "we have two templates templates is to fall I just showed so the communities manifests all within the template it's",
    "start": "741440",
    "end": "747740"
  },
  {
    "text": "version there's a chart file that is a description of the chart so metadata a",
    "start": "747740",
    "end": "753320"
  },
  {
    "text": "name version and you have your values file and the values file contains the actual values of the stuff that you want",
    "start": "753320",
    "end": "760370"
  },
  {
    "text": "to put in to the manifest files so if",
    "start": "760370",
    "end": "767300"
  },
  {
    "text": "I'm correct then my cluster is reset so I can now start from the beginning so",
    "start": "767300",
    "end": "775029"
  },
  {
    "text": "basically where I am now is a clone to git repository and that contains the",
    "start": "775029",
    "end": "783890"
  },
  {
    "text": "chart I just showed them a slide so we have two all the templates and the values and inside the templates we have gas book",
    "start": "783890",
    "end": "792040"
  },
  {
    "text": "deployments and the gas book surface let's have a look at namespaces okay the",
    "start": "792040",
    "end": "800140"
  },
  {
    "text": "first thing that we have to do is we have to install the the tiller and helm has a command helm in it and it will",
    "start": "800140",
    "end": "807580"
  },
  {
    "text": "check the cluster if the tillers there and if it's not there it installs the tiller and you already get a security",
    "start": "807580",
    "end": "813520"
  },
  {
    "text": "warning which is it's a good thing because by default the way the tiller is installed it has access to everything so",
    "start": "813520",
    "end": "820779"
  },
  {
    "text": "it can also do cross namespace interactions like cross maintains deployments or removal so it's something",
    "start": "820779",
    "end": "827860"
  },
  {
    "text": "I will touch upon later but using helm for production you have to set it up differently than in the default way but",
    "start": "827860",
    "end": "834580"
  },
  {
    "text": "this is a nice way of having a quick start so if we now have a look at the",
    "start": "834580",
    "end": "841750"
  },
  {
    "text": "cube system namespace and we ask which ports are available right at the bottom",
    "start": "841750",
    "end": "846970"
  },
  {
    "text": "you can see that the tiller is deployed there so it's just running inside cube anita's as a bot as well so I'm now",
    "start": "846970",
    "end": "858520"
  },
  {
    "text": "installing our whole guestbook application from the file on my local system so the first thing we have to",
    "start": "858520",
    "end": "865930"
  },
  {
    "text": "give is a sensible name otherwise you get a generated name with the sonar cube",
    "start": "865930",
    "end": "871270"
  },
  {
    "text": "one we didn't use release afterwards with the release name you might want to",
    "start": "871270",
    "end": "876459"
  },
  {
    "text": "give it something that's recognizable of course you specify the namespace and I say take the chart from the current",
    "start": "876459",
    "end": "882580"
  },
  {
    "text": "folder helm responds with all the stuff",
    "start": "882580",
    "end": "888339"
  },
  {
    "text": "it's going to install so we should now have a new namespace so we now have the helm cash book namespace so that's",
    "start": "888339",
    "end": "894700"
  },
  {
    "text": "correct so let's see what's running there",
    "start": "894700",
    "end": "899640"
  },
  {
    "text": "everything's ready already so everything is deployed",
    "start": "902100",
    "end": "907110"
  },
  {
    "text": "and when we look at the surfaces we have a couple of services we have a front-end",
    "start": "910720",
    "end": "916250"
  },
  {
    "text": "a Redis master and a reddish slave and this one exposes support so we can now",
    "start": "916250",
    "end": "921529"
  },
  {
    "text": "check if it's actually running the sonar should be down that's correct",
    "start": "921529",
    "end": "926959"
  },
  {
    "text": "and this one is some might recognize this one let's see if it works that's",
    "start": "926959",
    "end": "934910"
  },
  {
    "text": "always nice when the demo works okay so we now have one deployment so we can ask",
    "start": "934910",
    "end": "942920"
  },
  {
    "text": "helm because it has to state what's the history of this deployment and of course we only have one revision we just",
    "start": "942920",
    "end": "949310"
  },
  {
    "text": "installed it ten minutes past two you get the chart name and you get some kind",
    "start": "949310",
    "end": "955579"
  },
  {
    "text": "of description about that revision now something that you often want to do is install a new version of your",
    "start": "955579",
    "end": "961820"
  },
  {
    "text": "application so helm has an upgrade command and basically what we do here enter in the meantime is we provide a",
    "start": "961820",
    "end": "970310"
  },
  {
    "text": "different value for one of the things that was in our deployment description",
    "start": "970310",
    "end": "975769"
  },
  {
    "text": "so in our deployment description we had a reference to a 1.0 version of an image and what you now want to do is say okay",
    "start": "975769",
    "end": "984620"
  },
  {
    "text": "I want to keep the deployment the same except for the image because you have built a new image of your application",
    "start": "984620",
    "end": "990620"
  },
  {
    "text": "you have deployed it inside the docker registry you have checked it with one dot one and now you can can tell helm",
    "start": "990620",
    "end": "997029"
  },
  {
    "text": "with one command line parameter to override the value and say ok let's",
    "start": "997029",
    "end": "1002920"
  },
  {
    "text": "install version 1.1 and helm says well everything is is OK it was created so if",
    "start": "1002920",
    "end": "1009010"
  },
  {
    "text": "you now have a look at the history you have two revisions the first one had",
    "start": "1009010",
    "end": "1016269"
  },
  {
    "text": "status deployed it's now superseded by a second revision and that version is deployed so everything should be working",
    "start": "1016269",
    "end": "1023380"
  },
  {
    "text": "ok right now African works so let's have a look at the ports",
    "start": "1023380",
    "end": "1030808"
  },
  {
    "text": "so what we now see is that you need to try to deploy a new version of our",
    "start": "1034100",
    "end": "1040558"
  },
  {
    "text": "application but apparently the image cannot be found so the image we specified the 1.1 version is not",
    "start": "1040559",
    "end": "1046350"
  },
  {
    "text": "available I don't know what happened I want to fix this fast so what you can do is do a row",
    "start": "1046350",
    "end": "1054690"
  },
  {
    "text": "back so helm has a row back command where you say ok the name of the release",
    "start": "1054690",
    "end": "1061340"
  },
  {
    "text": "please roll back my deployment to revision 1 ok now see helm is going to",
    "start": "1061340",
    "end": "1069030"
  },
  {
    "text": "do a roll back so I have to look at the history so now you see you have to",
    "start": "1069030",
    "end": "1075450"
  },
  {
    "text": "superseded versions and this last one was a row back of this one to the first",
    "start": "1075450",
    "end": "1080970"
  },
  {
    "text": "one so if we now go back to the communities of view I hope everything will be fine all my parts are running",
    "start": "1080970",
    "end": "1088920"
  },
  {
    "text": "all my reports are ready again so order has been restored",
    "start": "1088920",
    "end": "1094010"
  },
  {
    "text": "so I showed the public charter posit Ori and I showed you can use it local files",
    "start": "1107650",
    "end": "1115360"
  },
  {
    "text": "the the thing that's actually present in the charge repository is not an exploded",
    "start": "1115360",
    "end": "1122000"
  },
  {
    "text": "version of those files but it's a at our package so helm has a command to package",
    "start": "1122000",
    "end": "1127309"
  },
  {
    "text": "up all the files and then you can upload them to a running repository you can",
    "start": "1127309",
    "end": "1132740"
  },
  {
    "text": "also run a local repository so you can do a helm surf and then it will basically spin up an HTTP server and the",
    "start": "1132740",
    "end": "1140419"
  },
  {
    "text": "repository is really simple it's a HTTP server with an with an index llamo and",
    "start": "1140419",
    "end": "1145570"
  },
  {
    "text": "the package files so there's nothing really complex so I think ours runs",
    "start": "1145570",
    "end": "1151250"
  },
  {
    "text": "somewhere inside inside the cuckoo's storage where we manage around charts",
    "start": "1151250",
    "end": "1159549"
  },
  {
    "text": "I'll show you this app store so if you",
    "start": "1159640",
    "end": "1165559"
  },
  {
    "start": "1163000",
    "end": "1163000"
  },
  {
    "text": "use the chart repository to share the charts because this is something that we",
    "start": "1165559",
    "end": "1171080"
  },
  {
    "text": "do in our team similar to for instance Nexus you create an artifact you upload",
    "start": "1171080",
    "end": "1177380"
  },
  {
    "text": "to jar files into Nexus and then other teams can use the same jar files or you can use shared libraries with helm we",
    "start": "1177380",
    "end": "1184370"
  },
  {
    "text": "can do exactly the same thing so something that we use inside our cluster",
    "start": "1184370",
    "end": "1191179"
  },
  {
    "text": "is exonic server which is basically an event store and a communication hub but",
    "start": "1191179",
    "end": "1197450"
  },
  {
    "text": "there is no helm chart available for that one and there also was not a docker image available for that one so we",
    "start": "1197450",
    "end": "1203390"
  },
  {
    "text": "create our own helm charts our own docker images and we have multiple clusters running that accent products",
    "start": "1203390",
    "end": "1210140"
  },
  {
    "text": "and we want to reuse those files so we put them in in a chart repository and",
    "start": "1210140",
    "end": "1216919"
  },
  {
    "text": "now we can just install them from the repository but of course a lot of configuration in there are sensible",
    "start": "1216919",
    "end": "1223669"
  },
  {
    "text": "defaults but it's not always what you want I think something like a database password you probably want to change",
    "start": "1223669",
    "end": "1229190"
  },
  {
    "text": "that for your own chart you what you don't want to use the one that's in the public repository or even in your private repository and it might be",
    "start": "1229190",
    "end": "1235480"
  },
  {
    "text": "ingress as persistence your claims maybe even resource claims all kinds of stuff that you want to",
    "start": "1235480",
    "end": "1243140"
  },
  {
    "text": "customize yourself but you still want to do the sharing so there's a charge values llamo file which contains the",
    "start": "1243140",
    "end": "1249830"
  },
  {
    "text": "defaults which you can also supply your own yomel with the dash F command and",
    "start": "1249830",
    "end": "1255440"
  },
  {
    "text": "then you can say okay this values file is a specific one for my production environment and you only have to put the",
    "start": "1255440",
    "end": "1263180"
  },
  {
    "text": "stuff in there that you want to override the third option I showed you can also",
    "start": "1263180",
    "end": "1268640"
  },
  {
    "text": "put it in command line so overriding specific values and for instance if I",
    "start": "1268640",
    "end": "1275570"
  },
  {
    "text": "want to run solar coupon 9000 one instead of 9000 I could do set surface",
    "start": "1275570",
    "end": "1282230"
  },
  {
    "text": "external port 9000 one and then it will override the 9000 value and I can use it",
    "start": "1282230",
    "end": "1287780"
  },
  {
    "text": "on the specific port and the last option is to use the set file and you can just",
    "start": "1287780",
    "end": "1292820"
  },
  {
    "text": "pass a whole file on the command line so that's about configuration now you know",
    "start": "1292820",
    "end": "1298910"
  },
  {
    "start": "1298000",
    "end": "1298000"
  },
  {
    "text": "that if you deploy stuff on kubernetes it's usually consists of more than one",
    "start": "1298910",
    "end": "1304610"
  },
  {
    "text": "thing so for instance for our sonic qube we want to use a database and the nice",
    "start": "1304610",
    "end": "1312950"
  },
  {
    "text": "thing about helm is similar to maven you can specify dependencies between between charts so this requirements llamo file",
    "start": "1312950",
    "end": "1321380"
  },
  {
    "text": "the top one is actually part of the sonic qube chart and it defines both the",
    "start": "1321380",
    "end": "1327830"
  },
  {
    "text": "Postgres and a MySQL dependency and a version number and the nice thing about",
    "start": "1327830",
    "end": "1333230"
  },
  {
    "text": "this is you can use conditions to specify which dependencies you want to",
    "start": "1333230",
    "end": "1338660"
  },
  {
    "text": "load so you can have a whole complex tree of dependencies and then based on",
    "start": "1338660",
    "end": "1344750"
  },
  {
    "text": "what kind of deployment you do you can say okay enable Postgres dot enabled so",
    "start": "1344750",
    "end": "1350630"
  },
  {
    "text": "you put Postgres tool enabled it's true in in the failures file or on the command line and then it will install",
    "start": "1350630",
    "end": "1357320"
  },
  {
    "text": "that one otherwise to pick the other one and those requirements llamo file",
    "start": "1357320",
    "end": "1362450"
  },
  {
    "text": "directly correlate with the chart descriptions of the dependency of the",
    "start": "1362450",
    "end": "1368750"
  },
  {
    "text": "library you're dependent on so if you go to the helm chart repository this is the one",
    "start": "1368750",
    "end": "1374030"
  },
  {
    "text": "from sonic qube if you go to Postgres then you will actually find the charge on file with this information so you can",
    "start": "1374030",
    "end": "1381230"
  },
  {
    "text": "reference from one end to the other and this is just one dependency or actually two but you can make whole trees out of",
    "start": "1381230",
    "end": "1388220"
  },
  {
    "text": "this by using this mechanism to have really really complex applications with different moving parts that can be",
    "start": "1388220",
    "end": "1394700"
  },
  {
    "text": "deployed as part of one release so how",
    "start": "1394700",
    "end": "1400370"
  },
  {
    "text": "do we use helm we basically use get lap CI and in our builds of course we built",
    "start": "1400370",
    "end": "1407419"
  },
  {
    "text": "our Java jar files spin boot jar files and then we create a docker registry we",
    "start": "1407419",
    "end": "1413750"
  },
  {
    "text": "push the image there and if the chart changes for this deployment we built a",
    "start": "1413750",
    "end": "1420409"
  },
  {
    "text": "chart and we upload it to a chart repository but that's something that that it doesn't happen a lot because",
    "start": "1420409",
    "end": "1426169"
  },
  {
    "text": "basically after a few iterations you know how your application looks and and the only thing that you change is the",
    "start": "1426169",
    "end": "1431840"
  },
  {
    "text": "values and you don't change the charge itself anymore and then we use helm from",
    "start": "1431840",
    "end": "1438380"
  },
  {
    "text": "our CAD lab ci to upgrade our app inside kubernetes and the nice thing for this",
    "start": "1438380",
    "end": "1443900"
  },
  {
    "text": "is that I think we run about let's say 15 services and they all your use the",
    "start": "1443900",
    "end": "1452419"
  },
  {
    "text": "same chart as a service definition and we only have very minor differences",
    "start": "1452419",
    "end": "1458539"
  },
  {
    "text": "between our deployments where we use the",
    "start": "1458539",
    "end": "1463549"
  },
  {
    "text": "specific values file to of right so basically this is for us a really nice way to share our communities file",
    "start": "1463549",
    "end": "1471010"
  },
  {
    "text": "manifest files but still be flexible in what's in there and this is for the stuff we built ourselves but we also",
    "start": "1471010",
    "end": "1478460"
  },
  {
    "text": "have a similar process running in a separate gate lab CI for all our infrastructure related things so for",
    "start": "1478460",
    "end": "1485059"
  },
  {
    "text": "instance I shall sonic qube is something we have running with but we also use key clock inside and a nexus and we use a",
    "start": "1485059",
    "end": "1495020"
  },
  {
    "text": "similar approach for this except that for a lot of the standard components we",
    "start": "1495020",
    "end": "1502100"
  },
  {
    "text": "don't applied load charts ourselves because we just use a chart from the chart repository so you",
    "start": "1502100",
    "end": "1511250"
  },
  {
    "text": "could do dry runs as well so similar to cube control apply you can ask helm what",
    "start": "1511250",
    "end": "1518990"
  },
  {
    "text": "happens if I deploy this version of my chart you just specify dry run and debug",
    "start": "1518990",
    "end": "1525230"
  },
  {
    "text": "and helm will actually print a state that will be your state after you",
    "start": "1525230",
    "end": "1530690"
  },
  {
    "text": "upgrade your helm commands there's something that allows you to create your",
    "start": "1530690",
    "end": "1537980"
  },
  {
    "text": "own charts by using starter so just you can create an empty chart much like",
    "start": "1537980",
    "end": "1544059"
  },
  {
    "text": "maven but with Nathan with generate archetype it also allows you to generate",
    "start": "1544059",
    "end": "1549289"
  },
  {
    "text": "some kind of template they have a similar function which is called the starter I show chart versioning there's",
    "start": "1549289",
    "end": "1557539"
  },
  {
    "text": "also an ability to sign your charts and this is a nice option if you share your",
    "start": "1557539",
    "end": "1563150"
  },
  {
    "text": "charts in a different environment if you can generate an integrity check e hash",
    "start": "1563150",
    "end": "1571450"
  },
  {
    "text": "with your chart and then on the install or on the upgrade command you can say to",
    "start": "1571450",
    "end": "1578330"
  },
  {
    "text": "helm please verify the integrity of this chart so because you're deploying stuff",
    "start": "1578330",
    "end": "1584000"
  },
  {
    "text": "inside production clusters you might want to be hundred percent sure that the thing you deploy doesn't contain",
    "start": "1584000",
    "end": "1590270"
  },
  {
    "text": "anything that shouldn't be there so this allows you to check that against a known",
    "start": "1590270",
    "end": "1596000"
  },
  {
    "text": "value I shoud conditions already for",
    "start": "1596000",
    "end": "1601039"
  },
  {
    "text": "specifying dependency you can also have a more generic approach that is called tags you can have a list of tags for",
    "start": "1601039",
    "end": "1606980"
  },
  {
    "text": "instance front-end could be a tag and then if you have front-end tack enabled",
    "start": "1606980",
    "end": "1612080"
  },
  {
    "text": "then all the dependencies with that tag will be deployed and finally one that is",
    "start": "1612080",
    "end": "1618830"
  },
  {
    "text": "interesting is because I had a discussion yesterday with someone and he said we're doing infrastructure's codes",
    "start": "1618830",
    "end": "1624650"
  },
  {
    "text": "but we don't test so they put up code without testing anything basically and",
    "start": "1624650",
    "end": "1629870"
  },
  {
    "text": "of course we have a similar situation fortunately for stuff we deployed inside",
    "start": "1629870",
    "end": "1635000"
  },
  {
    "text": "kubernetes helm provides a way to test our and what it actually does is it deploys",
    "start": "1635000",
    "end": "1643309"
  },
  {
    "text": "something inside communities as a separate pot and for instance a test",
    "start": "1643309",
    "end": "1648410"
  },
  {
    "text": "could be as simple as do a curl to some kind of URL and if you cut the 200 sales",
    "start": "1648410",
    "end": "1653720"
  },
  {
    "text": "code back then the test is okay and if you don't get it a 210 your test fails so this is a mechanism that allows you",
    "start": "1653720",
    "end": "1661280"
  },
  {
    "text": "to automate the test and then basically if a test fails you could say okay if the test fails please roll back to a",
    "start": "1661280",
    "end": "1666470"
  },
  {
    "text": "different provision or something like this or at least have an alert or monitoring because if you paid attention during the demo my upgrade failed but",
    "start": "1666470",
    "end": "1674240"
  },
  {
    "text": "helm was happy it just said deployed happy helming so there's no direct relation between a",
    "start": "1674240",
    "end": "1680750"
  },
  {
    "text": "helm deployment and the result of that deployment the deployment can still fail and helm doesn't know about this and it",
    "start": "1680750",
    "end": "1687650"
  },
  {
    "text": "doesn't notify about this so the test feature could be a way around this I",
    "start": "1687650",
    "end": "1693909"
  },
  {
    "start": "1696000",
    "end": "1696000"
  },
  {
    "text": "mentioned the tiller warning tiller runs in privileged modes basically it can do",
    "start": "1696040",
    "end": "1703580"
  },
  {
    "text": "a lot it's allowed to access a lot of all the namespaces basically you can",
    "start": "1703580",
    "end": "1709250"
  },
  {
    "text": "install and remove stuff so there's an integration with row based access",
    "start": "1709250",
    "end": "1715790"
  },
  {
    "text": "control and basically that's how we run home so we create the service account and then we specify which restrictions",
    "start": "1715790",
    "end": "1722809"
  },
  {
    "text": "there are or basically which access that service account has for instance is",
    "start": "1722809",
    "end": "1728360"
  },
  {
    "text": "really important to think about restricting namespaces if you use namespaces as logical separation in your",
    "start": "1728360",
    "end": "1733850"
  },
  {
    "text": "cluster I assume that production is usually a separate cluster but for",
    "start": "1733850",
    "end": "1739580"
  },
  {
    "text": "instance we have a tooling cluster next to the close to the namespace next to",
    "start": "1739580",
    "end": "1746030"
  },
  {
    "text": "the name space where our application runs and you might want to have different helm tillers and different",
    "start": "1746030",
    "end": "1751760"
  },
  {
    "text": "service accounts associated with them so instead of the plane helm in it you can do a helm in it with a service account",
    "start": "1751760",
    "end": "1757670"
  },
  {
    "text": "and that way you can restrict the stuff that that held us and now the next one",
    "start": "1757670",
    "end": "1765950"
  },
  {
    "start": "1765000",
    "end": "1765000"
  },
  {
    "text": "is more of a more of a question to you and when I started out in January we",
    "start": "1765950",
    "end": "1771440"
  },
  {
    "text": "basically looked at and terraform because terraform has a",
    "start": "1771440",
    "end": "1776930"
  },
  {
    "text": "kubernetes profiler plugin big downside of terraform back then was",
    "start": "1776930",
    "end": "1782300"
  },
  {
    "text": "that it was not really up to speed with the api version so every time there was",
    "start": "1782300",
    "end": "1788480"
  },
  {
    "text": "a new API version for communities released with new features then terraform was behind initially I thought",
    "start": "1788480",
    "end": "1795680"
  },
  {
    "text": "is this is nice because we use terraform to provision our clusters on cocoa cloud",
    "start": "1795680",
    "end": "1801550"
  },
  {
    "text": "so it will be nice to have one too but in the end helm was much better fit but",
    "start": "1801550",
    "end": "1807290"
  },
  {
    "text": "in the meantime I discovered a whole lot of different alternatives and and also",
    "start": "1807290",
    "end": "1814160"
  },
  {
    "text": "different alternatives about how the problem is approached so for instance helm is basically template ping engine",
    "start": "1814160",
    "end": "1821060"
  },
  {
    "text": "so it's very close to the stuff you would do with queue control there's something that's chased it called JSON",
    "start": "1821060",
    "end": "1827690"
  },
  {
    "text": "uh templates it's also templating language but it's rather different from the stuff that helm uses I found a",
    "start": "1827690",
    "end": "1835550"
  },
  {
    "text": "sonnet and capital you also have the declarative approaches which is pretty nice I think if you're more from a",
    "start": "1835550",
    "end": "1842000"
  },
  {
    "text": "developer's perspective I mentioned terraform but there's also customized so",
    "start": "1842000",
    "end": "1847910"
  },
  {
    "text": "instead of having 10 plates in your Yama file you actually declare the kind of",
    "start": "1847910",
    "end": "1853220"
  },
  {
    "text": "resources you want with with the DSL I know people say well we don't interact",
    "start": "1853220",
    "end": "1860570"
  },
  {
    "text": "with our communities on this level we use service mess approach for managing",
    "start": "1860570",
    "end": "1866330"
  },
  {
    "text": "so STL was named as a alternative and there's a whole lot of alternatives that",
    "start": "1866330",
    "end": "1872720"
  },
  {
    "text": "integrate more on a gate level so basically you're the proach you would",
    "start": "1872720",
    "end": "1878780"
  },
  {
    "text": "take there's you you can make your coat in a kit repository and then there's a tool that builds it for the specific",
    "start": "1878780",
    "end": "1885620"
  },
  {
    "text": "deployment and then it gets rolled out to communities so this is something that I think the first version of openshift",
    "start": "1885620",
    "end": "1892340"
  },
  {
    "text": "I used use this this on Cloud Foundry I think you have a similar approach so the whole part of building your own docker",
    "start": "1892340",
    "end": "1898730"
  },
  {
    "text": "image and uploading into a repository and specifying your own configuration is taking out of the equation and",
    "start": "1898730",
    "end": "1904669"
  },
  {
    "text": "we do it for you so I start anyone in the room that has something to add to this they use a different approach to",
    "start": "1904669",
    "end": "1910460"
  },
  {
    "text": "deployment or one I missed I have this good sorry",
    "start": "1910460",
    "end": "1920888"
  },
  {
    "text": "okay mm-hmm okay I haven't looked into that",
    "start": "1933309",
    "end": "1941950"
  },
  {
    "text": "one it might be interesting after a talk to have a more closer look because I",
    "start": "1941950",
    "end": "1947260"
  },
  {
    "text": "noticed that kubernetes is kind of hot of course a lot of people use it now a year ago it was a little bit less but",
    "start": "1947260",
    "end": "1953590"
  },
  {
    "text": "there's a lot of tools around kubernetes popping up and every time I do this talk it's like oh yeah I have this one or",
    "start": "1953590",
    "end": "1959440"
  },
  {
    "text": "this one so this slide will grow and grow I'll maybe we move away from how many year for us I think helm is a very",
    "start": "1959440",
    "end": "1971350"
  },
  {
    "start": "1966000",
    "end": "1966000"
  },
  {
    "text": "good fit it allows us to manage complex deployments and especially stuff around",
    "start": "1971350",
    "end": "1977740"
  },
  {
    "text": "versioning and updating the apps rollback was something that I initially",
    "start": "1977740",
    "end": "1984400"
  },
  {
    "text": "thought we would use a lot but we actually never never used rollback except in the demo I just did I had",
    "start": "1984400",
    "end": "1992980"
  },
  {
    "text": "thoughts around you do a deployment and then maybe you do some health checks and then your script can be checked whether",
    "start": "1992980",
    "end": "1998830"
  },
  {
    "text": "the deployment is correct and you might have to do a rollback but actually on the kubernetes level there's already so",
    "start": "1998830",
    "end": "2005490"
  },
  {
    "text": "much that prevents you from deploying something that doesn't work if you have your health checks properly configured",
    "start": "2005490",
    "end": "2010770"
  },
  {
    "text": "then kubernetes can just detect whether the pot is healthy and if it's not healthy it's it's never being part of",
    "start": "2010770",
    "end": "2017100"
  },
  {
    "text": "the deployment anymore and you just stick with your old version but maybe in the future there's we will have more",
    "start": "2017100",
    "end": "2023970"
  },
  {
    "text": "complex deployments that's it's harder to detect the health from just a health on endpoint but aerobic is not something",
    "start": "2023970",
    "end": "2032850"
  },
  {
    "text": "that's that's currently part of our pipeline and finally I like that there",
    "start": "2032850",
    "end": "2037860"
  },
  {
    "text": "is no easy to share our our helm configuration also for instance we had",
    "start": "2037860",
    "end": "2046560"
  },
  {
    "text": "to make a decision about how to do user management log in a registration and we finally cause I chose key cloak and then",
    "start": "2046560",
    "end": "2054780"
  },
  {
    "text": "we thought okay but then we have to manage key cloak ourselves because there's not a hosted key cloud but we just did helm install stable key cloak",
    "start": "2054780",
    "end": "2061230"
  },
  {
    "text": "and we had key clock running so for me that's a really really powerful feature of of using helm for stuff that's",
    "start": "2061230",
    "end": "2067320"
  },
  {
    "text": "readily available thanks a lot Thanks the top thank you interesting [Applause]",
    "start": "2067320",
    "end": "2075989"
  }
]