[
  {
    "text": "[Music]",
    "start": "5870",
    "end": "10049"
  },
  {
    "text": "okay so my uh talk is going to be on Docker security so before I start who here has used Docker put your hand up",
    "start": "12599",
    "end": "19439"
  },
  {
    "text": "use Docker okay that's a good indication thanks I'm glad to see that even if",
    "start": "19439",
    "end": "24519"
  },
  {
    "text": "you've not used Docker very much you should get something out of this there is some specific and sort of technical",
    "start": "24519",
    "end": "29560"
  },
  {
    "text": "stuff lat on but there's also some general stuff that should be of interest to most of you um so a little bit about me um I",
    "start": "29560",
    "end": "37160"
  },
  {
    "text": "work for a company called container Solutions where Dutch consultancy around containers and also msos things like",
    "start": "37160",
    "end": "43800"
  },
  {
    "text": "that uh and the main thing I'm doing at the minute I just finishing up a book called using Docker for",
    "start": "43800",
    "end": "51039"
  },
  {
    "text": "Riley um so this talk uh I thought have a little bit of fun with it so we're going to start out with a five round",
    "start": "51359",
    "end": "56960"
  },
  {
    "text": "security boxing match although I was thinking the way here it should have been rugby match because I think the Rugby World Cup kicks off tonight but",
    "start": "56960",
    "end": "63440"
  },
  {
    "text": "it's a five round security boxing match between containers and VMS and uh the second enough to talk is going to be",
    "start": "63440",
    "end": "69320"
  },
  {
    "text": "more specific container security tips and",
    "start": "69320",
    "end": "74200"
  },
  {
    "text": "techniques okay so containers versus VMS so what are we fighting for when",
    "start": "74479",
    "end": "81280"
  },
  {
    "text": "we're thinking about security um it's not actually suar Leonard's WBA World",
    "start": "81280",
    "end": "86400"
  },
  {
    "text": "title belt um what we're fighting for is nothing because if you get security right",
    "start": "86400",
    "end": "92920"
  },
  {
    "text": "nothing happens what doesn't happen is your site doesn't go down because somebody's",
    "start": "92920",
    "end": "98840"
  },
  {
    "text": "managed to Dos you what doesn't happen is your front page doesn't look like this because some",
    "start": "98840",
    "end": "104880"
  },
  {
    "text": "script kid's got in and restyled it for you what doesn't happen is you don't",
    "start": "104880",
    "end": "111079"
  },
  {
    "text": "start selling farmer um Viagra on the side or at least I assume T Town Council didn't mean to sell Viagra on the side",
    "start": "111079",
    "end": "120640"
  },
  {
    "text": "what really doesn't happen is you don't lose all your customer credit card details um adobi just about got away",
    "start": "120759",
    "end": "126719"
  },
  {
    "text": "with it but uh smaller companies you know could be bankrupt from",
    "start": "126719",
    "end": "132400"
  },
  {
    "text": "this uh and what really really doesn't happen is you don't lose uh sensitive",
    "start": "132400",
    "end": "138480"
  },
  {
    "text": "background information on Military and intelligence Personnel this I think this",
    "start": "138480",
    "end": "143560"
  },
  {
    "text": "is one of the worst hacks that we know about because this directly put people's lives at risk these are people that",
    "start": "143560",
    "end": "149040"
  },
  {
    "text": "could be targeted by uh foreign governments and criminal ailments so",
    "start": "149040",
    "end": "154360"
  },
  {
    "text": "that was quite horrific in my eyes um so who are the contenders in our",
    "start": "154360",
    "end": "161720"
  },
  {
    "text": "fight well you've got to say the VN the VM is basically the raining heavyweight",
    "start": "161720",
    "end": "167599"
  },
  {
    "text": "champion if you like VMS are used in Banks they're used",
    "start": "167599",
    "end": "172720"
  },
  {
    "text": "in governments um everybody uses VMS been for a while we trust them compared to this contain ERS are",
    "start": "172720",
    "end": "180640"
  },
  {
    "text": "the unknown upstar however I think they bring some new features like security features that",
    "start": "180640",
    "end": "187879"
  },
  {
    "text": "does actually make for an interesting fight when you put them head to-head okay so round",
    "start": "187879",
    "end": "195120"
  },
  {
    "text": "one isolation guarantees so here I'm just thinking about",
    "start": "195120",
    "end": "200879"
  },
  {
    "text": "um how isolated added processes inside a VM or a container can somebody break out",
    "start": "200879",
    "end": "207319"
  },
  {
    "text": "with the VM or container and access other VMS containers on the host or the host",
    "start": "207319",
    "end": "213720"
  },
  {
    "text": "itself and here the big thing is the VMS have this sort of hypervisor",
    "start": "213879",
    "end": "219120"
  },
  {
    "text": "layer and the hypervisor to some extent acts as a buffer or a filter and can cut out a lot of attacks and when you compar",
    "start": "219120",
    "end": "226040"
  },
  {
    "text": "this to Containers containers share the kernel right so the each container is",
    "start": "226040",
    "end": "233519"
  },
  {
    "text": "when the same kernel as the host so if a container manages to cause say for example a kernel panic uh that would",
    "start": "233519",
    "end": "240319"
  },
  {
    "text": "take down the kernel for the host and all the other running containers uh similarly if a container",
    "start": "240319",
    "end": "246439"
  },
  {
    "text": "manages to grab all a memory you'll St out the containers in the host so I think you've got to give round",
    "start": "246439",
    "end": "253439"
  },
  {
    "text": "one isolation to the",
    "start": "253439",
    "end": "257439"
  },
  {
    "text": "VM um so r two attack surface this is probably the most controversial of my",
    "start": "258639",
    "end": "265680"
  },
  {
    "text": "uh the RS in this fight but I'm going to argue that there a greater attack",
    "start": "265680",
    "end": "271320"
  },
  {
    "text": "surface in a VM and here I'm just comparing directly the VM to L kernel so there's a lot more going on in the VM",
    "start": "271320",
    "end": "278000"
  },
  {
    "text": "it's a very large piece of code that does a lot of things like virtualization and emulation that just don't happen",
    "start": "278000",
    "end": "284639"
  },
  {
    "text": "like by default in Linux uh and so part of that is doing things like emulating devices and you",
    "start": "284639",
    "end": "291400"
  },
  {
    "text": "know virtualization and there was the Venom vulnerability it's one of the new vulnerabilities that gets his own web",
    "start": "291400",
    "end": "297199"
  },
  {
    "text": "page which seems to be a brand new thing but um the Venom vulnerability was quite",
    "start": "297199",
    "end": "302800"
  },
  {
    "text": "interesting basically there was a a bug in some floppy disc drive ulation code",
    "start": "302800",
    "end": "307919"
  },
  {
    "text": "that nobody really used cuz who uses floppy discs anymore okay that wasn't a participation",
    "start": "307919",
    "end": "315919"
  },
  {
    "text": "point but anyway they found a bug in that and uh that actually caused a",
    "start": "315919",
    "end": "321720"
  },
  {
    "text": "breakout so the VM could attacker could break out of the VM and access the host or R the",
    "start": "321720",
    "end": "328440"
  },
  {
    "text": "VMS um there's also another side to this in that you can produce containers and this",
    "start": "328440",
    "end": "334199"
  },
  {
    "text": "is a separate issue before I was looking at the actual attack service of the kernel compared to the VM but another thing you can do with containers is",
    "start": "334199",
    "end": "340720"
  },
  {
    "text": "build very minimal containers so you can build a container that just contains like a single static binary it doesn't",
    "start": "340720",
    "end": "347000"
  },
  {
    "text": "have the whole operating system wrapped around it so by doing that you can cut out a lot of stuff that could",
    "start": "347000",
    "end": "352600"
  },
  {
    "text": "potentially be used to attack you um yeah so a minimal container may",
    "start": "352600",
    "end": "358120"
  },
  {
    "text": "only contain a static binary and You by doing that you really are cutting down the attack surface so for that reason",
    "start": "358120",
    "end": "364639"
  },
  {
    "text": "I'm going to give this round to the container round three controls so here",
    "start": "364639",
    "end": "373680"
  },
  {
    "text": "I'm really thinking about um what knobs can you twiddle and what",
    "start": "373680",
    "end": "379479"
  },
  {
    "text": "buttons can you push to restrict the Privileges and resources assigned to a container or",
    "start": "379479",
    "end": "387240"
  },
  {
    "text": "VM so if you think about limiting access to the actual Hardware resources the",
    "start": "387240",
    "end": "392400"
  },
  {
    "text": "memory CPU and the dis they're both pretty good right you can do pretty much the same thing with CP with VMS and with",
    "start": "392400",
    "end": "401000"
  },
  {
    "text": "containers but I'm going to argue that you get more controls with containers so",
    "start": "401360",
    "end": "406560"
  },
  {
    "text": "you can do things like set file systems to readon I'm pretty sure you can do it VMS as well I'm not an expert in VMS but",
    "start": "406560",
    "end": "412759"
  },
  {
    "text": "I'm sure you can however with containers is quite simple and you can also do things like poke holes in it so certain",
    "start": "412759",
    "end": "419120"
  },
  {
    "text": "files can be read right whilst the rest of the final system is read only and we'll see that",
    "start": "419120",
    "end": "424240"
  },
  {
    "text": "later and there's also kernel Linux kernel capabilities so Linux kernel",
    "start": "424240",
    "end": "430879"
  },
  {
    "text": "defines I think there's about 40 different capabilities and these are just sets of calls that you can make so",
    "start": "430879",
    "end": "436639"
  },
  {
    "text": "what you can do is you can reduce the capabilities of a given container and say this container can't create network",
    "start": "436639",
    "end": "443080"
  },
  {
    "text": "sockets or can't create set uid binaries things like that um there's also set comp coming is",
    "start": "443080",
    "end": "450759"
  },
  {
    "text": "not available yet but is Comon to Ducker containers and that will allow even more fine grained access to exactly which",
    "start": "450759",
    "end": "456840"
  },
  {
    "text": "kernel calls a container can make so I'm going to argue that the",
    "start": "456840",
    "end": "462919"
  },
  {
    "text": "container also wins this",
    "start": "462919",
    "end": "466080"
  },
  {
    "text": "round EXC me um so round four auditing so here I'm thinking if you want to like",
    "start": "468520",
    "end": "473960"
  },
  {
    "text": "a large VM system or large container system every now and again you need to like look the system and make sure the",
    "start": "473960",
    "end": "480800"
  },
  {
    "text": "images you're running are up to date they're not using old um runable versions of software for",
    "start": "480800",
    "end": "488280"
  },
  {
    "text": "example um so the first thing that you might notice is that in a typical system you're going to be running considerably",
    "start": "488520",
    "end": "494159"
  },
  {
    "text": "more containers and you would be running VMS so A system that runs in dozens of VMS may actually run equivalent system",
    "start": "494159",
    "end": "501120"
  },
  {
    "text": "may use thousands of containers so one way of thinking maybe that there's more to audit but that doesn't tell the whole",
    "start": "501120",
    "end": "508319"
  },
  {
    "text": "story uh the big thing is VMS are longer lived and you compare that to Containers",
    "start": "508319",
    "end": "515719"
  },
  {
    "text": "which are if you're doing it right are ephemeral so VMS over time diverge from",
    "start": "515719",
    "end": "521518"
  },
  {
    "text": "their base image and we have a whole branch of software called configuration management that's spring up around this",
    "start": "521519",
    "end": "528000"
  },
  {
    "text": "in an attempt to uh try and make VMS consistent over",
    "start": "528000",
    "end": "533160"
  },
  {
    "text": "time and so what this effectively means if you've R in VMS on production you're never quite sure what state they're in",
    "start": "533160",
    "end": "539519"
  },
  {
    "text": "like in two VMS that are ostensibly doing the same thing are quite likely to have different versions of libraries and so on so you need when you audit you",
    "start": "539519",
    "end": "547079"
  },
  {
    "text": "have to audit each one of them separately if you compare that to Containers if you're doing it properly what you do is you replace a container",
    "start": "547079",
    "end": "554399"
  },
  {
    "text": "you don't patch it so you take down the container and put it up with a new one that's built from an image uh that has",
    "start": "554399",
    "end": "560560"
  },
  {
    "text": "been that has the update and what this means is you can actually audit your images offline as",
    "start": "560560",
    "end": "567320"
  },
  {
    "text": "opposed to your online containers and then you can verify that your containers haven't diverged from the",
    "start": "567320",
    "end": "572600"
  },
  {
    "text": "image and there's tools like and so the point of that is um you can verify one",
    "start": "572600",
    "end": "577800"
  },
  {
    "text": "image and you may have actually audited hundreds of containers effectively and you can use tools like Docker diff to",
    "start": "577800",
    "end": "584760"
  },
  {
    "text": "one make sure that your containers haven't diverged from um the image they were",
    "start": "584760",
    "end": "591200"
  },
  {
    "text": "created from and also it's quite nice for telling if you've been hacked Cu uh",
    "start": "591200",
    "end": "597279"
  },
  {
    "text": "if you say like the the script to the attack where they change the front page if that was one in the container and you",
    "start": "597279",
    "end": "603000"
  },
  {
    "text": "run Docker diff you'd immediately see like the CSS files or HTML files that have been changed or",
    "start": "603000",
    "end": "609079"
  },
  {
    "text": "added um similarly if you run the Pharma spam thing you probably find a file that was actually contained a bunch of PHP",
    "start": "609079",
    "end": "615959"
  },
  {
    "text": "code and you you know you find it very easily using the docker diff command so I'm going to give that round",
    "start": "615959",
    "end": "622120"
  },
  {
    "text": "also to The Container but the final round round five is track",
    "start": "622120",
    "end": "627760"
  },
  {
    "text": "record and here I'm going to say VMS have quite a strong Advantage right they've got a proven",
    "start": "627760",
    "end": "633440"
  },
  {
    "text": "record they've been around for Years everybody trusts them Banks trust them governments trust them and you compare",
    "start": "633440",
    "end": "640160"
  },
  {
    "text": "this to Containers who simply don't have the same track record that okay you can argue that",
    "start": "640160",
    "end": "646120"
  },
  {
    "text": "containers have been around for a while but certainly not in the modern sense of Ducker containers and so on and it's going to take time before people come to",
    "start": "646120",
    "end": "653360"
  },
  {
    "text": "trust them with bugout security so I'm going to give that going",
    "start": "653360",
    "end": "659560"
  },
  {
    "text": "quite heavily to the VM now I'm sure some of you are good at mask and added this up but I was wondering who thinks",
    "start": "659560",
    "end": "665760"
  },
  {
    "text": "the VM should win this fight put your hand up you think the VM should win put your hand up you think the",
    "start": "665760",
    "end": "672200"
  },
  {
    "text": "container should win oh few okay cool I to be honest I wased out and called it a",
    "start": "672200",
    "end": "679720"
  },
  {
    "text": "draw which I guess most of you could do math probably figured that",
    "start": "679839",
    "end": "685600"
  },
  {
    "text": "but that's my next slide",
    "start": "687480",
    "end": "691240"
  },
  {
    "text": "but I will say Beware of the rematch cuz there's a lot of interesting work being done so one thing is there's a lot of",
    "start": "692839",
    "end": "699560"
  },
  {
    "text": "work going on to speed up VMS so you're actually going to see VMS I think being used in a more container style workflow",
    "start": "699560",
    "end": "706160"
  },
  {
    "text": "so it's um projects like clear container from Intel that's actually using VMS in a sort of container style in as",
    "start": "706160",
    "end": "713560"
  },
  {
    "text": "container style and also there's a lot of work going on to secure containers so there things like sit comp from Docker",
    "start": "713560",
    "end": "720440"
  },
  {
    "text": "but there's also a lot of work going on with Linux kernel maintainers to make sure c groups and name spaces and so on",
    "start": "720440",
    "end": "725880"
  },
  {
    "text": "are secure and do everything they should so in a few years time it will be interesting to see where we",
    "start": "725880",
    "end": "731440"
  },
  {
    "text": "are but as um Adrian said at the minute way you're probably going to go is you're going to use both containers and",
    "start": "731440",
    "end": "737360"
  },
  {
    "text": "VMS and that way you got two layers of security um so you the best way to do it",
    "start": "737360",
    "end": "745480"
  },
  {
    "text": "is to use VM to segregate groups of containers so for for example you on a",
    "start": "745480",
    "end": "750920"
  },
  {
    "text": "multi-tenant application you place each tenant or user or customer they have",
    "start": "750920",
    "end": "756120"
  },
  {
    "text": "their own VMS and which they run the containers and that's what Amazon and Google do Google's a bit of an interesting one though because you use",
    "start": "756120",
    "end": "762560"
  },
  {
    "text": "kubernetes your containers are running VMS but those VMS are in turn running Bor which is containers so you got",
    "start": "762560",
    "end": "769160"
  },
  {
    "text": "containers and VMS and containers um the other way you can segregate things is if you have uh say",
    "start": "769160",
    "end": "776560"
  },
  {
    "text": "you've got a large web app and you got a front end very put PHP or node GS you put those containers in one VM and then",
    "start": "776560",
    "end": "783560"
  },
  {
    "text": "another VM you do like the containers running say credit card processing so an attacker gets breaks into through a node",
    "start": "783560",
    "end": "790480"
  },
  {
    "text": "GS container you still got to break out of that VM and into another one to get anywhere near the credit card",
    "start": "790480",
    "end": "797240"
  },
  {
    "text": "information okay so that's it for the first part of the talk the next part are just going be General Security tips",
    "start": "798880",
    "end": "804959"
  },
  {
    "text": "regarding containers um",
    "start": "804959",
    "end": "810000"
  },
  {
    "text": "actually if there's one thing you take away from this talk I want it to be this slide so security paradigms the first",
    "start": "810000",
    "end": "816360"
  },
  {
    "text": "one is defense and depth don't rely on just one layer of security so Chris and",
    "start": "816360",
    "end": "821519"
  },
  {
    "text": "this talk earlier was um talking mentioned firewalls and it",
    "start": "821519",
    "end": "826839"
  },
  {
    "text": "used to be we RI quite heavily on our firewall to cut out a lot of attacks but nowadays it's much less useful because",
    "start": "826839",
    "end": "834040"
  },
  {
    "text": "everything comes through HTTP so there only is one port or two ports if you include",
    "start": "834040",
    "end": "842199"
  },
  {
    "text": "htps um so don't just rely on the firewall don't just rely on containers use VMS as well don't just rely on that",
    "start": "843000",
    "end": "848880"
  },
  {
    "text": "keep everything encrypted that's sensitive and what you're always thinking is if an attacker gets past this layer of security what does he have",
    "start": "848880",
    "end": "855079"
  },
  {
    "text": "access to and you always trying to put an extra hurdle in the way of getting to your",
    "start": "855079",
    "end": "860880"
  },
  {
    "text": "sensitive information uh the other Paradigm is",
    "start": "860880",
    "end": "866240"
  },
  {
    "text": "least privilege so this is just the idea that a container should only have access",
    "start": "866240",
    "end": "873199"
  },
  {
    "text": "to data and resources that are essential to its function this is like quite an old idea",
    "start": "873199",
    "end": "879120"
  },
  {
    "text": "it was used to be applied to even like functions and classes and so on U Jerry salz are I think first",
    "start": "879120",
    "end": "885959"
  },
  {
    "text": "articulated uh and doing that if if an attacker breaks in to the it goes back to the idea of breaking into the front",
    "start": "885959",
    "end": "891959"
  },
  {
    "text": "end shouldn't be able to be able to get access to credit card details things like that uh you can liken it to the",
    "start": "891959",
    "end": "897519"
  },
  {
    "text": "secure the military idea of need to know where people are only to the minimum they need to know to complete their",
    "start": "897519",
    "end": "903680"
  },
  {
    "text": "mission and that way if they're captured they can't spell Secrets um there's also a very good talk",
    "start": "903680",
    "end": "909360"
  },
  {
    "text": "in this that was given at Docker con called least privileged microservices by Nathan niol and doo Monica from",
    "start": "909360",
    "end": "916920"
  },
  {
    "text": "Docker so check that if you want to know more about least privilege okay some more specific",
    "start": "916920",
    "end": "924360"
  },
  {
    "text": "tips the one that most commonly people get wrong and if you look on like a",
    "start": "924360",
    "end": "929440"
  },
  {
    "text": "Docker Hub and you look at the images the biggest mistake people make is to do with users and so the thing to be aware",
    "start": "929440",
    "end": "935839"
  },
  {
    "text": "of is that users aren't namespaced the links kernel so you root inside a container",
    "start": "935839",
    "end": "941759"
  },
  {
    "text": "that's actually the same user as rooting the host what that means is if you break out of a container that's run as a root",
    "start": "941759",
    "end": "947519"
  },
  {
    "text": "process that whose process is running as root you'll be root on the host which is clearly a very bad thing now there is",
    "start": "947519",
    "end": "954160"
  },
  {
    "text": "work going on at the minute in Docker to automatically map the root user in a container it's like a high numbered user",
    "start": "954160",
    "end": "960240"
  },
  {
    "text": "in the host but that's not there yet and also I suspect there'll be issues regarding file permissions and so",
    "start": "960240",
    "end": "967079"
  },
  {
    "text": "on so in the meantime it's very important and to be honest anyway it's very important to set a",
    "start": "967079",
    "end": "973959"
  },
  {
    "text": "user so in your images or sorry in your Docker files if",
    "start": "973959",
    "end": "979079"
  },
  {
    "text": "you include like two lines like that what that does is it creates a user and changes to that user for all the Fallen",
    "start": "979079",
    "end": "984880"
  },
  {
    "text": "lines in the docker file and when the container starts up if you look at the official images they quite often include",
    "start": "984880",
    "end": "990560"
  },
  {
    "text": "the first line but not the second line and the reason is in their entry point script or the in in entry point script",
    "start": "990560",
    "end": "996800"
  },
  {
    "text": "they gets run when the container starts they want to do something like set file permissions which requires root privileges so what they do is they set",
    "start": "996800",
    "end": "1003160"
  },
  {
    "text": "those permissions and then they use a tool like sudu or gosu to change to the appropriate",
    "start": "1003160",
    "end": "1008680"
  },
  {
    "text": "user but if you do one thing do",
    "start": "1008680",
    "end": "1013680"
  },
  {
    "text": "that um set container file system read only this is quite a handy one it cuts out a lot of attacks and it's very",
    "start": "1014920",
    "end": "1020639"
  },
  {
    "text": "simple to do so if you just pass the dash Das we only flag when you start a container the container file system is",
    "start": "1020639",
    "end": "1027199"
  },
  {
    "text": "completely readon and you can't write any files now okay most applications aren't going to be able to work like",
    "start": "1027199",
    "end": "1033240"
  },
  {
    "text": "that but what you can do is uh create a volume for the files that I need to",
    "start": "1033240",
    "end": "1039600"
  },
  {
    "text": "write to so say your your application just needs to write to a temp file just create one volume for",
    "start": "1039600",
    "end": "1044839"
  },
  {
    "text": "that and then if a attacker breaks in they won't be able to do things like a uh you know write out the script to",
    "start": "1044839",
    "end": "1051320"
  },
  {
    "text": "serve Farm spam as we saw earlier or edit the file to change your front",
    "start": "1051320",
    "end": "1058120"
  },
  {
    "text": "page very similarly you can set volumes to be read only won't well on",
    "start": "1058919",
    "end": "1065200"
  },
  {
    "text": "that um drop capabilities so going back to the point about Linux capabilities",
    "start": "1065200",
    "end": "1071120"
  },
  {
    "text": "what you do is you pass a Das Das cap- drop argument to drop a capability so in this first line here we're dropping the",
    "start": "1071120",
    "end": "1077880"
  },
  {
    "text": "ability to set uid and G flags on",
    "start": "1077880",
    "end": "1082960"
  },
  {
    "text": "files uh you can also drop all capabilities and just add back the ones you need the issue with this of course",
    "start": "1082960",
    "end": "1089480"
  },
  {
    "text": "is that how do you know which capabilities you need and it's a bit of a black R you end up just like testing",
    "start": "1089480",
    "end": "1096360"
  },
  {
    "text": "it so it is very useful but it is a bit of extra",
    "start": "1096360",
    "end": "1101760"
  },
  {
    "text": "work CPU shares um I always wonder whether or not to talk about this cuz",
    "start": "1102080",
    "end": "1107159"
  },
  {
    "text": "CPU is actually um limited by default so by default if your CPU is pinned if you're using",
    "start": "1107159",
    "end": "1114039"
  },
  {
    "text": "another CPU and a host your containers actually share the CPU equally they're each given an equal share of the CPU but",
    "start": "1114039",
    "end": "1121400"
  },
  {
    "text": "you can change that uh you need to be aware that there's a default weighting of 1024 so in this example we start a",
    "start": "1121400",
    "end": "1129360"
  },
  {
    "text": "container the default weighting of 1024 then we spin up two other containers with a waiting of 512 each and what that",
    "start": "1129360",
    "end": "1135600"
  },
  {
    "text": "will mean is the first container can take up to half the CPU and the other",
    "start": "1135600",
    "end": "1141120"
  },
  {
    "text": "two get a quarter each but this only comes into effect when the CPU is pinned before that point anybody can use as",
    "start": "1141120",
    "end": "1147480"
  },
  {
    "text": "much as they like and there's also other things like the completely fairul that you can now",
    "start": "1147480",
    "end": "1153320"
  },
  {
    "text": "use so there is other ways to do CPU but because it is limited by default",
    "start": "1153320",
    "end": "1159000"
  },
  {
    "text": "or shared by default um I wouldn't worry too much about that one what you worry more about is memory limits because a a",
    "start": "1159000",
    "end": "1165600"
  },
  {
    "text": "container can go and grab as much memory as it likes uh so you can pass the- m flag to set put a constraint on the",
    "start": "1165600",
    "end": "1173039"
  },
  {
    "text": "amount of memory excuse me um do be aware though if you do that",
    "start": "1173039",
    "end": "1179919"
  },
  {
    "text": "that that sets the main memory but there's also you get the same amount of swap so this gives you 512 Meg of memory",
    "start": "1179919",
    "end": "1186679"
  },
  {
    "text": "plus 512 megabytes of Swap and there's a separate flag to limit the both of",
    "start": "1186679",
    "end": "1194320"
  },
  {
    "text": "them oh this is an interesting one so you can also defang set uid and GID binaries so if you look at the typical",
    "start": "1196679",
    "end": "1204679"
  },
  {
    "text": "base images like deban and buntu okay um yeah so you can so the",
    "start": "1204679",
    "end": "1211880"
  },
  {
    "text": "normal base images include quite a lot of uh binaries that have set uid and set G bits and what this does is allows them",
    "start": "1211880",
    "end": "1218159"
  },
  {
    "text": "to have elevated privileges so the classic example is Ping you don't really think of ping as being security",
    "start": "1218159",
    "end": "1223960"
  },
  {
    "text": "sensitive but it actually has elevated privileges so it can create raw network sockets",
    "start": "1223960",
    "end": "1229280"
  },
  {
    "text": "um what that means if is if an attacker finds a bug in ping and they can exploit",
    "start": "1229280",
    "end": "1234360"
  },
  {
    "text": "it they can Elevate their own privileges within the system and the funny thing is you can find these",
    "start": "1234360",
    "end": "1241440"
  },
  {
    "text": "um binaries quite easily by just simply run and find I guess most of you are probably familiar with find uh and you",
    "start": "1241440",
    "end": "1248640"
  },
  {
    "text": "get this is like the ones in the default deian image and for example who hands up if you know what chfn",
    "start": "1248640",
    "end": "1256000"
  },
  {
    "text": "is does nobody know what chfn does does see so why is that in there it's",
    "start": "1256280",
    "end": "1261480"
  },
  {
    "text": "actually stands for change finger name who remembers",
    "start": "1261480",
    "end": "1266720"
  },
  {
    "text": "finger okay that's a bit better so yeah a fo name I think it's finger name",
    "start": "1266720",
    "end": "1273760"
  },
  {
    "text": "it's the pass the P your password with your long name in it right in the password some that maybe well anyway",
    "start": "1273760",
    "end": "1280840"
  },
  {
    "text": "nobody knows what it is so why is it there um so and potentially I mean to be",
    "start": "1280840",
    "end": "1287880"
  },
  {
    "text": "honest that's probably not much of an issue cuz these are old and very well tested utilities so I'd be surprised if",
    "start": "1287880",
    "end": "1293000"
  },
  {
    "text": "you find a vulnerability in them but you could and then an attacker could be able to elevate their privileges within the",
    "start": "1293000",
    "end": "1301158"
  },
  {
    "text": "container so it's actually trivial to defang them because you can just put this into your Docker",
    "start": "1301480",
    "end": "1306760"
  },
  {
    "text": "file and if you put that in all that's going to happen is I'll go through all the files find the ones that they are",
    "start": "1306760",
    "end": "1312600"
  },
  {
    "text": "and change the permissions on them and to remove the uid vit um just to prove it if you run it",
    "start": "1312600",
    "end": "1320159"
  },
  {
    "text": "again you get that another interesting one is you can",
    "start": "1320159",
    "end": "1327080"
  },
  {
    "text": "turn off interc container communication so when you launch your Docker demon and I just updated it to 1.8 so prior it was",
    "start": "1327080",
    "end": "1334159"
  },
  {
    "text": "Docker DD but now it's dock Damon um if you pass a-- ICC a false flag you turn",
    "start": "1334159",
    "end": "1341320"
  },
  {
    "text": "off inter container communication so your containers can't talk to each other and your containers can't talk to",
    "start": "1341320",
    "end": "1347720"
  },
  {
    "text": "each other they can't attack each other so when attacker breaks in he won't be able to go and attack other",
    "start": "1347720",
    "end": "1353000"
  },
  {
    "text": "containers so arguably piece but it is a bit useless because",
    "start": "1353000",
    "end": "1358559"
  },
  {
    "text": "now your application container can't talk to the database so what you can do",
    "start": "1358559",
    "end": "1363600"
  },
  {
    "text": "is you can set the IP tables flag which I think is now set by default I'm not sure it used to be um and he said that",
    "start": "1363600",
    "end": "1371799"
  },
  {
    "text": "it allows linked containers to communicate so it all sets IP tables rules that allows to expose ports and",
    "start": "1371799",
    "end": "1378520"
  },
  {
    "text": "two link containers to communicate but nothing else can communicate by default uh normally if you don't set ICC",
    "start": "1378520",
    "end": "1385600"
  },
  {
    "text": "defaults or anything else all containers can actually ping each other and access each other's",
    "start": "1385600",
    "end": "1390679"
  },
  {
    "text": "ports as they're free completely which I surprises some people but of course you",
    "start": "1390679",
    "end": "1395960"
  },
  {
    "text": "need to know the IP address of the other containers um the final point and this",
    "start": "1395960",
    "end": "1402120"
  },
  {
    "text": "is a goes back to talk this morning if you saw cess talk is sharing secrets so you want to be able to get put things",
    "start": "1402120",
    "end": "1409080"
  },
  {
    "text": "like database passwords and uh API tokens into your",
    "start": "1409080",
    "end": "1415799"
  },
  {
    "text": "containers and this is a quite a tricky problem uh we did have the same problem with VMS but it was less exacerbated",
    "start": "1415919",
    "end": "1423640"
  },
  {
    "text": "because VMS were longer lived and you could do things manually if you had to but nowadays for containers to come",
    "start": "1423640",
    "end": "1430039"
  },
  {
    "text": "in and going the whole time it really is a pressure on to automate this process so the first way you can get a",
    "start": "1430039",
    "end": "1436480"
  },
  {
    "text": "secret into the into your container bake it into the image right just write in your Docker file and put the API token",
    "start": "1436480",
    "end": "1443120"
  },
  {
    "text": "in your Docker file hopefully most of you agree that that's a bad idea and you",
    "start": "1443120",
    "end": "1448200"
  },
  {
    "text": "should not do that under any s under any",
    "start": "1448200",
    "end": "1454000"
  },
  {
    "text": "situation uh the next way is environment variables and a lot of you probably do do this",
    "start": "1454120",
    "end": "1461080"
  },
  {
    "text": "um I'm not saying it's bad but in containers I don't think it's great either the reason a lot of people use it",
    "start": "1461080",
    "end": "1468000"
  },
  {
    "text": "is cuz it's the way suggested by 12 Factor apps and I'm not knocking 12 Factor apps but again that was back in",
    "start": "1468000",
    "end": "1473360"
  },
  {
    "text": "the VM world and we're now in container land um and the issue is just that environment variables when you you know",
    "start": "1473360",
    "end": "1480279"
  },
  {
    "text": "so the is you just put your dash API token equal to your secret and the problem is it can just be seen in too",
    "start": "1480279",
    "end": "1486279"
  },
  {
    "text": "many places so link containers get access to all the other containers that link these",
    "start": "1486279",
    "end": "1493039"
  },
  {
    "text": "environment variables so if you link two containers together that container can see all the secrets in the other container",
    "start": "1493039",
    "end": "1500320"
  },
  {
    "text": "uh which surprises some people and also inspect if you run inspect you can see all the environment variables in the",
    "start": "1500440",
    "end": "1508760"
  },
  {
    "text": "container um they can't be deleted so you might think well it's okay I'll just go in and overwrite it that won't work",
    "start": "1508960",
    "end": "1514159"
  },
  {
    "text": "you still be able to see and inspect but even worse they tend to get",
    "start": "1514159",
    "end": "1520279"
  },
  {
    "text": "included in reports right so you ask for support request and like uh your vendor",
    "start": "1520279",
    "end": "1525360"
  },
  {
    "text": "says okay can I get details your environment so you just give it to them and you know you just included all your",
    "start": "1525360",
    "end": "1532200"
  },
  {
    "text": "secrets there which clearly isn't a good thing so I'm going to say environment variables okay they work but they're a",
    "start": "1532200",
    "end": "1538520"
  },
  {
    "text": "bit too visible and I wouldn't use them five with you so the next way and I think this is",
    "start": "1538520",
    "end": "1546320"
  },
  {
    "text": "probably the way most people are doing it at the minute is just to mount files so you keep your secrets in a file and",
    "start": "1546320",
    "end": "1552799"
  },
  {
    "text": "you mount that into the image into the Container sorry one of the nice things about that is that you can just a configuration",
    "start": "1552799",
    "end": "1559200"
  },
  {
    "text": "file so like with the problem with environment variable is you also have to do some work to get that environment variable into the application quite",
    "start": "1559200",
    "end": "1565760"
  },
  {
    "text": "commonly at least with a file you can just mount it into configuration file and it'll pick it up without any special",
    "start": "1565760",
    "end": "1572799"
  },
  {
    "text": "tricks yeah so this works but it's a bit icky and my main problem with it is that files tend to get checked into Source",
    "start": "1572799",
    "end": "1579279"
  },
  {
    "text": "control and clearly that's a bad thing when you got",
    "start": "1579279",
    "end": "1584039"
  },
  {
    "text": "secret so the future I think is going to be with the a secured key value stores",
    "start": "1584720",
    "end": "1590679"
  },
  {
    "text": "so a few of you might have been in c talk this morning when he talked about Vault and yeah I think that really is",
    "start": "1590679",
    "end": "1596440"
  },
  {
    "text": "going to be one of the major ways to do things like this going forward basically the idea is your key valy store has all",
    "start": "1596440",
    "end": "1601760"
  },
  {
    "text": "your secrets in it it's um designed to store secrets so it keeps them encrypted",
    "start": "1601760",
    "end": "1606960"
  },
  {
    "text": "uh it has special features like leases and so on um yeah so you can say how long a",
    "start": "1606960",
    "end": "1614360"
  },
  {
    "text": "Secret's good for it might a break glass procedure so you can lock everything down if somebody breaks in things like",
    "start": "1614360",
    "end": "1620399"
  },
  {
    "text": "that um there's two main ones Vault that Seth talked about this morning and also",
    "start": "1620399",
    "end": "1626520"
  },
  {
    "text": "keyways kiwis is quite interesting because it was built by the guys at Square who did uh payment processing and",
    "start": "1626520",
    "end": "1635080"
  },
  {
    "text": "so on and many Engineers from there now actually work at Docker so keyway is",
    "start": "1635080",
    "end": "1640399"
  },
  {
    "text": "probably likely to be very well supported um a few of you are probably",
    "start": "1640399",
    "end": "1645919"
  },
  {
    "text": "thinking how does this actually solve the problem because you have to authenticate to the key value stored so how are you going to do that from inside",
    "start": "1645919",
    "end": "1652080"
  },
  {
    "text": "your container um two ways one is to go back",
    "start": "1652080",
    "end": "1657279"
  },
  {
    "text": "to environment variables so you pass an environment variable for to validate the key value store authenticate to the key",
    "start": "1657279",
    "end": "1663679"
  },
  {
    "text": "value store but you make it a oneoff key so it can be used once and then it's useless so at least an attacker gets it",
    "start": "1663679",
    "end": "1671159"
  },
  {
    "text": "it can't it's no good to them the other way and it's a bit more",
    "start": "1671159",
    "end": "1676360"
  },
  {
    "text": "complicated but we now have volum plugins uh and so you can actually",
    "start": "1676360",
    "end": "1682640"
  },
  {
    "text": "there's a volume plugin for both kiwis and Vault and what that does is",
    "start": "1682640",
    "end": "1687919"
  },
  {
    "text": "um it creates a file inside the container that contains a secrets that",
    "start": "1687919",
    "end": "1693200"
  },
  {
    "text": "that container has access to based on what um they have the rights to access",
    "start": "1693200",
    "end": "1698840"
  },
  {
    "text": "in keyway or vault so now you've moved all the sort of secret setup outside of",
    "start": "1698840",
    "end": "1704399"
  },
  {
    "text": "the container itself there's no tokens being passed in there it's just this file get um",
    "start": "1704399",
    "end": "1710200"
  },
  {
    "text": "populated from rolve so I think that's probably the",
    "start": "1710200",
    "end": "1715960"
  },
  {
    "text": "future okay I think that's pretty much I want to talk about um main thing I want",
    "start": "1716440",
    "end": "1722640"
  },
  {
    "text": "to drive home is that containers add security so if you're using VMS a minute and you add containers into the mix",
    "start": "1722640",
    "end": "1728240"
  },
  {
    "text": "you're only adding another layer security you're very unlikely to make things less secure it's almost",
    "start": "1728240",
    "end": "1734080"
  },
  {
    "text": "impossible maybe if you did things like uh you know add a one think is the root",
    "start": "1734080",
    "end": "1740480"
  },
  {
    "text": "user um yeah use containers with VMS if you're concerned about security and always think defense and depth and least",
    "start": "1740480",
    "end": "1748799"
  },
  {
    "text": "privilege um yeah that's about it [Applause]",
    "start": "1748799",
    "end": "1761469"
  },
  {
    "text": "Yeah you mentioned earlier the um the user instruction to flip the user away from R towards something lower privilege",
    "start": "1768880",
    "end": "1775840"
  },
  {
    "text": "Y and I've been playing with that a fair bit recently one of the problems I've found is when you do that and then you",
    "start": "1775840",
    "end": "1782080"
  },
  {
    "text": "use the copy or added to copy file in it ends up being owned by R inside the",
    "start": "1782080",
    "end": "1787320"
  },
  {
    "text": "container irrespective of the user outside the container and so what you end up doing",
    "start": "1787320",
    "end": "1793919"
  },
  {
    "text": "is having to essentially use a nasty pattern where you temporarily f root copy the file in change the ownership of",
    "start": "1793919",
    "end": "1801200"
  },
  {
    "text": "it and then flip back to the original have you seen anything like that well it won't be root use of privilege it'll",
    "start": "1801200",
    "end": "1806440"
  },
  {
    "text": "just be the the Privileges of I'll just retain the Privileges whatever file it was on the host but uh so sorry the",
    "start": "1806440",
    "end": "1812159"
  },
  {
    "text": "Privileges are the same but the ownership isn't yeah okay that's right yeah so and that's exactly why the",
    "start": "1812159",
    "end": "1818120"
  },
  {
    "text": "official images don't have that user statement right right so and you look at the official images they do what they do",
    "start": "1818120",
    "end": "1823880"
  },
  {
    "text": "is like for postgress or redis what they do is uh when the container starts up",
    "start": "1823880",
    "end": "1828919"
  },
  {
    "text": "they do like a pseudo CH on well they don't Doo just a they're already root so just ch on and then they do a pseudo to",
    "start": "1828919",
    "end": "1836360"
  },
  {
    "text": "the actual user it's not actually Pudo they use they use the tool called gosu and gosu is quite nice because um if you",
    "start": "1836360",
    "end": "1843240"
  },
  {
    "text": "use pseudo you end with two processes but go to like a just Forks that process",
    "start": "1843240",
    "end": "1848519"
  },
  {
    "text": "okay or overrides that process",
    "start": "1848519",
    "end": "1853360"
  },
  {
    "text": "yeah I've got a question it's uh something Chris On's talked about a bit",
    "start": "1853720",
    "end": "1858840"
  },
  {
    "text": "which is um putting Less in your containers you didn't really talk about that I mean there's you could put the",
    "start": "1858840",
    "end": "1864279"
  },
  {
    "text": "whole of Linux in it or you could just have scratch and a A Go Go binary or",
    "start": "1864279",
    "end": "1870000"
  },
  {
    "text": "whatever C binary yeah absolutely so I mean that comes back to the attx surface point so you can really cut down unlike",
    "start": "1870000",
    "end": "1876200"
  },
  {
    "text": "tax service within a container by just putting the bare minimum in it and also that goes on to then you think about",
    "start": "1876200",
    "end": "1881639"
  },
  {
    "text": "unial and things like that you see seeing uh people doing that",
    "start": "1881639",
    "end": "1886880"
  },
  {
    "text": "commonly or is it are people still sort of well it's hard to tell what people do",
    "start": "1886880",
    "end": "1892000"
  },
  {
    "text": "really at the minute I'm not sure I've seen people I don't think many people do it no it's it's fairly Advanced I think",
    "start": "1892000",
    "end": "1898880"
  },
  {
    "text": "still there's also an issue with um debugging right so if you put the minimum in it and something goes wrong",
    "start": "1898880",
    "end": "1904519"
  },
  {
    "text": "and you want to debug that container there's no tools like if you just got like a go binary you can't even get a",
    "start": "1904519",
    "end": "1911360"
  },
  {
    "text": "shell yeah so the question was I guess is there's multip the question is um",
    "start": "1911360",
    "end": "1917919"
  },
  {
    "text": "yeah things that see it route I another isolation mechanisms and how do they compare and yeah that's a fair point I",
    "start": "1917919",
    "end": "1924279"
  },
  {
    "text": "mean as well as Docker we already have rocket uh and there's free Bas jails and",
    "start": "1924279",
    "end": "1930080"
  },
  {
    "text": "Solaris zones and so on and um I've never sat and compared to more but Docker is going to be it's pretty",
    "start": "1930080",
    "end": "1937600"
  },
  {
    "text": "featureful and a bit more tested in a lot of them so I would say that's probably up there in terms of maybe not",
    "start": "1937600",
    "end": "1943880"
  },
  {
    "text": "security but certainly features and isolation uh CH route I'm there's always been",
    "start": "1943880",
    "end": "1951600"
  },
  {
    "text": "issue to CH route that's more of a a play thing I think is that",
    "start": "1951600",
    "end": "1958760"
  },
  {
    "text": "fair anyone else okay well thanks everyone for",
    "start": "1958760",
    "end": "1964799"
  },
  {
    "text": "coming and have have a safe trip home and uh hopefully we'll be back again",
    "start": "1964799",
    "end": "1970120"
  },
  {
    "text": "next year I think the the the big discussions were probably in October November rather than September and",
    "start": "1970120",
    "end": "1976960"
  },
  {
    "text": "probably a single track conference again but we're not quite sure what to make it about so if you have any ideas really",
    "start": "1976960",
    "end": "1982480"
  },
  {
    "text": "looking for input and uh any feedback or input on on on this conference as well",
    "start": "1982480",
    "end": "1987519"
  },
  {
    "text": "so thanks everybody [Applause]",
    "start": "1987519",
    "end": "1994390"
  }
]