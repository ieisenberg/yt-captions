[
  {
    "start": "0",
    "end": "19000"
  },
  {
    "text": "[Music] my name is Phil wer I'm a freelance engineer and I'd just like to have a",
    "start": "6990",
    "end": "13320"
  },
  {
    "text": "quick shout out to container Solutions and weave Works who have funded this talk so thank you very much to",
    "start": "13320",
    "end": "19680"
  },
  {
    "text": "them so this is a presentation called secure my socks and we're going to",
    "start": "19680",
    "end": "25599"
  },
  {
    "text": "explore m microservice security in an open source sock shop",
    "start": "25599",
    "end": "30679"
  },
  {
    "text": "so the first thing I always want to do whenever I write presentation is do a quick Google to make sure nobody else has called the presentation the same",
    "start": "30679",
    "end": "36680"
  },
  {
    "text": "sort of thing and I typed you know secure my socks into Google and and this came up something called sock locks.com",
    "start": "36680",
    "end": "43960"
  },
  {
    "text": "and I would never have thought that there was ever a need for a plastic clip to hold your socks together but",
    "start": "43960",
    "end": "50039"
  },
  {
    "text": "apparently there is um I particularly love some of the use cases at the bottom we've got a perfect for keeping similar",
    "start": "50039",
    "end": "55760"
  },
  {
    "text": "color but not exactly matching socks separate so I don't know maybe may there's a a use case for",
    "start": "55760",
    "end": "62199"
  },
  {
    "text": "everything um and of course as soon as I saw that I immediately thought of this sir if I may make so bold a major",
    "start": "62199",
    "end": "70520"
  },
  {
    "text": "crisis has arisen in your Affairs yes I know blackhe I've been pondering it all morning you have some yes socks run out",
    "start": "70520",
    "end": "79040"
  },
  {
    "text": "again why is it that no matter how many millions of pairs of socks I buy and never seem to have any Sir with your",
    "start": "79040",
    "end": "84920"
  },
  {
    "text": "forgiveness there is another even weightier problem they just disappear",
    "start": "84920",
    "end": "90079"
  },
  {
    "text": "honestly you'd think someone was coming in here stealing the damn things and then selling them",
    "start": "90079",
    "end": "95960"
  },
  {
    "text": "off that's Black Adder if you never come across before uh that was purely for my",
    "start": "97360",
    "end": "102479"
  },
  {
    "text": "own enjoyment so sorry about that um context uh start being serious if I if I",
    "start": "102479",
    "end": "109000"
  },
  {
    "start": "103000",
    "end": "133000"
  },
  {
    "text": "if I can um so we'll start off with a quick show of hands who has to deal with uh PC compliance either either now or in",
    "start": "109000",
    "end": "115640"
  },
  {
    "text": "the past or you're equal equivalent okay not as many as I think",
    "start": "115640",
    "end": "121320"
  },
  {
    "text": "expected um so for those that don't know it's a payment card industry uh compliance standards which is a set of",
    "start": "121320",
    "end": "127479"
  },
  {
    "text": "policies set out to protect users card details",
    "start": "127479",
    "end": "133160"
  },
  {
    "start": "133000",
    "end": "209000"
  },
  {
    "text": "um some tactics that developers can employ in order to become PCI Compliant",
    "start": "133160",
    "end": "139040"
  },
  {
    "text": "kind of comes down to one key question it's do you or do you not trust the developer or or the people that are",
    "start": "139040",
    "end": "145000"
  },
  {
    "text": "working within the application if we assume trust then that takes a a significant amount of responsibility off",
    "start": "145000",
    "end": "151560"
  },
  {
    "text": "the developer so it makes the developer's job much easier um this means that the developer doesn't have to",
    "start": "151560",
    "end": "157280"
  },
  {
    "text": "design and encode information um about trust within their within their",
    "start": "157280",
    "end": "163200"
  },
  {
    "text": "application but in order to become PCI Compliant then you have to audit like mad in order to prove that you are",
    "start": "163200",
    "end": "169720"
  },
  {
    "text": "compliant so this is generally what large Enterprises do um we know that that Google does this um and they have",
    "start": "169720",
    "end": "177360"
  },
  {
    "text": "large teams that are constantly going around auditing basically monitoring logs to make sure that that people don't",
    "start": "177360",
    "end": "182959"
  },
  {
    "text": "go where they're not supposed to go and if if they do go then you know that's bye-bye to their parking space in in",
    "start": "182959",
    "end": "190120"
  },
  {
    "text": "telicon Valley um but what about everyone else so we've we've got from",
    "start": "190120",
    "end": "195920"
  },
  {
    "text": "like individual developers like you and me up to Small to mediumsized companies",
    "start": "195920",
    "end": "201040"
  },
  {
    "text": "you know they don't have the time or the resource in order to do this constant audit so you know how do we achieve that",
    "start": "201040",
    "end": "209879"
  },
  {
    "start": "209000",
    "end": "291000"
  },
  {
    "text": "top tip number one we limit the surface area and heard it mentioned a few times",
    "start": "209879",
    "end": "215040"
  },
  {
    "text": "today the smaller amount uh the smaller the the size of the surface the the less we have to worry about protecting if",
    "start": "215040",
    "end": "221239"
  },
  {
    "text": "you've got lots of tiny exposed interfaces then that becomes inherently more difficult to to audit and therefore",
    "start": "221239",
    "end": "227000"
  },
  {
    "text": "secure um than one very small simple interface and one of the simplest ways",
    "start": "227000",
    "end": "232040"
  },
  {
    "text": "to do that is to offload as much of that requirement um offload it to to somebody",
    "start": "232040",
    "end": "237439"
  },
  {
    "text": "else like a payment provider so um for example I've just finished a project where we used a you know just a",
    "start": "237439",
    "end": "243079"
  },
  {
    "text": "semi-standard payment provider and we embedded their payment details iframe into our front end UI so um if we ever",
    "start": "243079",
    "end": "250920"
  },
  {
    "text": "had to uh get a PCI audit performed on us then well we wouldn't because none of",
    "start": "250920",
    "end": "258400"
  },
  {
    "text": "the credit card information ever touches either our client side code or the the",
    "start": "258400",
    "end": "263919"
  },
  {
    "text": "back end either it just goes straight to the payment provider um but ultimately you kind of",
    "start": "263919",
    "end": "270240"
  },
  {
    "text": "have to throw off the shackles of assumed trust and just trust nothing and trust nobody and then you can start",
    "start": "270240",
    "end": "276240"
  },
  {
    "text": "implementing things which are inherently secure which we're going to talk about today and we'll discuss uh a couple of",
    "start": "276240",
    "end": "281880"
  },
  {
    "text": "ways that we can start to try and limit this surface area through um Network segmentation and policy which we talking",
    "start": "281880",
    "end": "288520"
  },
  {
    "text": "about later but let's be clear about one thing PCI compliance does not mean your",
    "start": "288520",
    "end": "295240"
  },
  {
    "start": "291000",
    "end": "378000"
  },
  {
    "text": "application is secure it's merely a bureaucratic process to you know try and",
    "start": "295240",
    "end": "301199"
  },
  {
    "text": "uh and give give the users trust that that their details are safe it does not",
    "start": "301199",
    "end": "306280"
  },
  {
    "text": "cover any other form of your application's function or any other type of data as",
    "start": "306280",
    "end": "312479"
  },
  {
    "text": "well and I'm going to try and insert a few funnies to to keep everybody livened",
    "start": "312479",
    "end": "318280"
  },
  {
    "text": "at this late hour and this is the first one I got sent this a couple of days ago by my colleague and it was uh a little",
    "start": "318280",
    "end": "325080"
  },
  {
    "text": "post that somebody had put on Reddit um asking why is Docker swearing at me now before anyone says this is fake could be",
    "start": "325080",
    "end": "331880"
  },
  {
    "text": "fake but I still find it funny apparently some chap who is just trying to log into Docker Hub to push a Docker",
    "start": "331880",
    "end": "337639"
  },
  {
    "text": "image just like you would every day um he got an ER response back from the the",
    "start": "337639",
    "end": "343400"
  },
  {
    "text": "docker Hub service and it it said incorrect password blurry line I can't say that on",
    "start": "343400",
    "end": "349360"
  },
  {
    "text": "the on speaker and apparently he didn't type that in so so I don't understand what's happened there that means",
    "start": "349360",
    "end": "355479"
  },
  {
    "text": "somebody has either left this in accidentally or maybe they just been fired and they decided to to leave some",
    "start": "355479",
    "end": "362280"
  },
  {
    "text": "sort of Easter egg bomb in their code that every now and again it'll just swear at you randomly I don't know but",
    "start": "362280",
    "end": "368080"
  },
  {
    "text": "this is coming from a company which is you know the they're trying to position themselves as the microservice company",
    "start": "368080",
    "end": "374400"
  },
  {
    "text": "and it's even difficult for them to get everything perfectly which you know just",
    "start": "374400",
    "end": "380720"
  },
  {
    "start": "378000",
    "end": "423000"
  },
  {
    "text": "comes to the the obvious Point Security is hard and it's not that it's complex",
    "start": "380720",
    "end": "385759"
  },
  {
    "text": "like academically complex um since there's many things that we can do which are are very simple but it's the problem",
    "start": "385759",
    "end": "392440"
  },
  {
    "text": "is it's like it's like I was talking to someone earlier today where they said you know I'm not a security expert no no",
    "start": "392440",
    "end": "398120"
  },
  {
    "text": "nobody talking about security ever says they're an exate because it's it's inherently difficult to say that you are",
    "start": "398120",
    "end": "403800"
  },
  {
    "text": "secure or you are hack proof because you're only those things until you're not um so I don't know in in the",
    "start": "403800",
    "end": "410400"
  },
  {
    "text": "beginning I like to to to start off like um a traditional software development process where uh we start exploring all",
    "start": "410400",
    "end": "417400"
  },
  {
    "text": "the things that can go wrong a failure exploration exploration um and that can include things pertaining to containers",
    "start": "417400",
    "end": "426080"
  },
  {
    "start": "423000",
    "end": "438000"
  },
  {
    "text": "and containerized solutions um there's tens probably of individual topics that",
    "start": "426080",
    "end": "434000"
  },
  {
    "text": "could probably make a talk each and uh we're not going to talk about all of them because we don't have enough time",
    "start": "434000",
    "end": "439400"
  },
  {
    "text": "so today I'm going to concentrate on content security which is taking",
    "start": "439400",
    "end": "445160"
  },
  {
    "text": "unfortunately my talk was scheduled after Adrian's talk earlier on so so I was going to say that he's copied me but",
    "start": "445160",
    "end": "451680"
  },
  {
    "text": "now it looks like I've copied him but you know who cares um and a bit about container security and a bit about",
    "start": "451680",
    "end": "458599"
  },
  {
    "text": "Network segmentation and policy um and to do this we're going to abuse one of",
    "start": "458599",
    "end": "464639"
  },
  {
    "text": "our recent projects which is the sock shop the sock shop is a reference",
    "start": "464639",
    "end": "470560"
  },
  {
    "start": "465000",
    "end": "655000"
  },
  {
    "text": "microservices architecture and as a developer I kind of work better by",
    "start": "470560",
    "end": "476400"
  },
  {
    "text": "having examples to learn from and to to copy and paste and and a lot of the talks that we you know",
    "start": "476400",
    "end": "481919"
  },
  {
    "text": "the very very good talks um that we've seen today yesterday and and other conferences but often they don't have",
    "start": "481919",
    "end": "487599"
  },
  {
    "text": "anything to take away from so what I'm hoping for is I'm going to talk about all this then you can go home go onto",
    "start": "487599",
    "end": "492919"
  },
  {
    "text": "this repo and try it yourself so that's the idea so this is it let's take a",
    "start": "492919",
    "end": "498440"
  },
  {
    "text": "quick look let's hope this",
    "start": "498440",
    "end": "503800"
  },
  {
    "text": "works and it's somewhere here there it is",
    "start": "505560",
    "end": "511039"
  },
  {
    "text": "awesome Yep great this is it so this is our application and it is a uh an",
    "start": "511039",
    "end": "517680"
  },
  {
    "text": "implementation of an e-commerce site um which has you know all the functionality",
    "start": "517680",
    "end": "522839"
  },
  {
    "text": "of a real e-commerce site but it's all based in microservices and it's all on GitHub so you can explore it the idea is",
    "start": "522839",
    "end": "529160"
  },
  {
    "text": "that we're selling socks um and I'm going to I'm there's one particular sock that I'm a real fan of there we go nerd",
    "start": "529160",
    "end": "535399"
  },
  {
    "text": "leg that's one of my favorites for those leg lovers out there a perfect example of swivel chair trained calf",
    "start": "535399",
    "end": "542079"
  },
  {
    "text": "meticulously trained on a diet of sitting and penac coladas four and that's my favorite sock so I'm going to",
    "start": "542079",
    "end": "549079"
  },
  {
    "text": "add that to my car I'm going to log in uh you're not going to laugh when I",
    "start": "549079",
    "end": "555079"
  },
  {
    "text": "type password as password okay there we go and we're going to check that out so",
    "start": "555079",
    "end": "561680"
  },
  {
    "text": "it's got like a an endtoend kind of life cycle of something that might happen in a might might happen in a real life",
    "start": "561680",
    "end": "568320"
  },
  {
    "text": "e-commerce site and the idea is we're kind of exercising all the different stages and life cycles within the",
    "start": "568320",
    "end": "573959"
  },
  {
    "text": "microservices context um and it's all open source on",
    "start": "573959",
    "end": "579680"
  },
  {
    "text": "GitHub and I will pull up the link to that in a minute because we've got a nice shorten git doio um but I just want",
    "start": "579680",
    "end": "587320"
  },
  {
    "text": "to point something out before we go on so microservices demo site is split up",
    "start": "587320",
    "end": "594760"
  },
  {
    "text": "into several uh Services which are all done independently but the landing",
    "start": "594760",
    "end": "599839"
  },
  {
    "text": "page is this microservices Depo demo repo and then in the deploy folder we've got a range of different deploys that",
    "start": "599839",
    "end": "606279"
  },
  {
    "text": "you can deploy to I don't know if you can see that just about um I'm going to be showing uh the dock compose and the",
    "start": "606279",
    "end": "613720"
  },
  {
    "text": "kubernetes deploys today but there's also loads of other deploys for um lots of other orchestrators and well as well",
    "start": "613720",
    "end": "620000"
  },
  {
    "text": "and that's that's where this gets really cool because it means you can take the same application and test out different",
    "start": "620000",
    "end": "625959"
  },
  {
    "text": "orchestrators with basically the same thing so I think this is going to be really handy for people that that need to explore different orchestrators or",
    "start": "625959",
    "end": "633079"
  },
  {
    "text": "just need some experience with them okay let's go back to the",
    "start": "633079",
    "end": "639360"
  },
  {
    "text": "presentation okay so the link to that I'll put it up again at the end G.I sockshop is a shortened URL but the",
    "start": "644000",
    "end": "650880"
  },
  {
    "text": "the real GitHub URL is is microservices demo okay so let's crack on to the meat",
    "start": "650880",
    "end": "661120"
  },
  {
    "start": "655000",
    "end": "688000"
  },
  {
    "text": "of this presentation once I found my pedge again there we go",
    "start": "661120",
    "end": "666639"
  },
  {
    "text": "so yeah so Adrian talked about um container security earlier on he did a",
    "start": "666639",
    "end": "672160"
  },
  {
    "text": "you know great job of covering pretty much all the aspects that you need to know about container security um and I'm",
    "start": "672160",
    "end": "677760"
  },
  {
    "text": "going to try and put some of those things um in an example so you can kind of see what",
    "start": "677760",
    "end": "683079"
  },
  {
    "text": "happens um click is not working",
    "start": "683079",
    "end": "689360"
  },
  {
    "start": "688000",
    "end": "745000"
  },
  {
    "text": "so I kind of classified the container level security aspect into these four um",
    "start": "689360",
    "end": "694639"
  },
  {
    "text": "so restraint is what Adrien was talking about earlier where you're defining what",
    "start": "694639",
    "end": "699760"
  },
  {
    "text": "the the person can do within the container you have to try and restrain that down as much as possible so we're",
    "start": "699760",
    "end": "705880"
  },
  {
    "text": "we're talking about um making sure that the container runs as a user making sure that it's readon making sure that it's",
    "start": "705880",
    "end": "712920"
  },
  {
    "text": "uh not got all of the permissions um to do to do to do everything and then we've",
    "start": "712920",
    "end": "718000"
  },
  {
    "text": "got mutability we're also going to talk about that and if you make your container immutable",
    "start": "718000",
    "end": "724600"
  },
  {
    "text": "then there's less risk of them accessing your data and messing around with your data we've got Providence which is where",
    "start": "724600",
    "end": "730720"
  },
  {
    "text": "the container come from and the hardened os's modules and policies and that's a",
    "start": "730720",
    "end": "736560"
  },
  {
    "text": "whole another subject on its own so yeah a lot of people have already done quite",
    "start": "736560",
    "end": "743199"
  },
  {
    "text": "a lot of talking about this but I'm going to show you how to do this so we're going to start with one of the",
    "start": "743199",
    "end": "750440"
  },
  {
    "text": "docker files from the microservices demo repository and I've chosen one which is",
    "start": "750440",
    "end": "755800"
  },
  {
    "text": "mine so I don't set anybody else when I say it's a Docker file it's a Docker file it's my fault not anybody",
    "start": "755800",
    "end": "762120"
  },
  {
    "text": "else's fault um it's a typical Docker file that you might find anywhere it's based on Alpine node it's a node based",
    "start": "762120",
    "end": "768959"
  },
  {
    "text": "nodejs based application it's a front end um we're copying some source files",
    "start": "768959",
    "end": "774639"
  },
  {
    "text": "in doing an install and uh exposing some ports and and running it very very",
    "start": "774639",
    "end": "781560"
  },
  {
    "text": "standard we've also got a an extract from the docker comp poost file here for",
    "start": "781560",
    "end": "786600"
  },
  {
    "text": "the front end image um you can see a crazy hash there of the the image the the name of the the",
    "start": "786600",
    "end": "792680"
  },
  {
    "text": "build of that time couple poost name environment networks so yeah very standard",
    "start": "792680",
    "end": "798760"
  },
  {
    "start": "798000",
    "end": "906000"
  },
  {
    "text": "stuff so the first thing you might have noticed is I didn't set a container",
    "start": "798760",
    "end": "804079"
  },
  {
    "text": "user no user in that file so let's kind of have a quick look to see what can do",
    "start": "804079",
    "end": "809800"
  },
  {
    "text": "when you don't put a real uh user in and yeah AG demoed",
    "start": "809800",
    "end": "817519"
  },
  {
    "text": "this as well but I think my demo is even better so what I've got here is a doc compos file um which is",
    "start": "817519",
    "end": "826000"
  },
  {
    "text": "running and it's got all of the services running and I'm going to except into the",
    "start": "826079",
    "end": "833160"
  },
  {
    "text": "front end so let's just check who I am",
    "start": "833160",
    "end": "839199"
  },
  {
    "text": "oh dear rout so we can do things like this in our container we can",
    "start": "839199",
    "end": "845639"
  },
  {
    "text": "run a Bitcoin minor like we I'm talking about before or you could have a train",
    "start": "845639",
    "end": "851279"
  },
  {
    "text": "go across your screen which I personally prefer much better",
    "start": "851279",
    "end": "857040"
  },
  {
    "text": "um another so let's go back to that okay so yeah no",
    "start": "857040",
    "end": "864199"
  },
  {
    "text": "user you might have also noticed that in the docon post file that I didn't make it read",
    "start": "864199",
    "end": "869720"
  },
  {
    "text": "only um potential boo boo there so let's take some code",
    "start": "869720",
    "end": "875759"
  },
  {
    "text": "and uh oops go back step and do that in the same",
    "start": "875759",
    "end": "883839"
  },
  {
    "text": "container okay so I think that run oh right did two lines let's go back to",
    "start": "883839",
    "end": "891199"
  },
  {
    "text": "our ah same again because the container is not immutable we can write whatever",
    "start": "892560",
    "end": "898279"
  },
  {
    "text": "we want that wasn't me there was somebody else that hacked that",
    "start": "898279",
    "end": "904880"
  },
  {
    "start": "906000",
    "end": "921000"
  },
  {
    "text": "honestly and finally capabilities so um this is probably the the slightly more",
    "start": "906120",
    "end": "912959"
  },
  {
    "text": "slightly more tricky part of um securing the docker file um it's a kernel level",
    "start": "912959",
    "end": "919800"
  },
  {
    "text": "operation permissions and the difficulty is that you never quite know where to",
    "start": "919800",
    "end": "925079"
  },
  {
    "text": "apply them so sometimes they apply in the container itself sometimes they apply in the docker file and depending",
    "start": "925079",
    "end": "931120"
  },
  {
    "text": "on what you're trying to do they go in different places",
    "start": "931120",
    "end": "936680"
  },
  {
    "start": "936000",
    "end": "981000"
  },
  {
    "text": "um so let's take an example so this is another Docker file very simple one from the catalog uh service it's using busy",
    "start": "936680",
    "end": "944519"
  },
  {
    "text": "box um we're using a statically compiled go binary and we're running it in Port 0",
    "start": "944519",
    "end": "950399"
  },
  {
    "text": "so being good Engineers the first want first thing we want to do is to add a user to make it our runner's route and",
    "start": "950399",
    "end": "957199"
  },
  {
    "text": "so we do something like this ad group AD user my user but if we tried that that wouldn't",
    "start": "957199",
    "end": "963399"
  },
  {
    "text": "work and it wouldn't work because all ports under 1024 are privileged which",
    "start": "963399",
    "end": "969519"
  },
  {
    "text": "means that only root can actually bind those ports because we're running as my user my user doesn't have the permission",
    "start": "969519",
    "end": "975920"
  },
  {
    "text": "to bind to Port 80 so that service would actually fail so what do we do",
    "start": "975920",
    "end": "981519"
  },
  {
    "start": "981000",
    "end": "1053000"
  },
  {
    "text": "here well one solution is to give that container uh to give that application",
    "start": "981519",
    "end": "987720"
  },
  {
    "text": "the permission in order to combine to portate so I've switched to Alpine now just to give me the nice package manager",
    "start": "987720",
    "end": "994279"
  },
  {
    "text": "rather than busy box and um I'm still using using the the same ad group and AD user but I'm also adding a package",
    "start": "994279",
    "end": "1000560"
  },
  {
    "text": "called libcap and libcap is a a set of libraries which is um called the same",
    "start": "1000560",
    "end": "1006600"
  },
  {
    "text": "thing in most os's in Alpine it's called libcap and it uh it provides a couple of",
    "start": "1006600",
    "end": "1012440"
  },
  {
    "text": "binaries one of which is set cap set cap applies permissions to individual files",
    "start": "1012440",
    "end": "1019480"
  },
  {
    "text": "so when we run that particular file it will run with that particular privilege and in this this instance we're adding",
    "start": "1019480",
    "end": "1026199"
  },
  {
    "text": "the permission to bind a service to a particular Port so now when we run that",
    "start": "1026199",
    "end": "1032438"
  },
  {
    "text": "it'll work there's also um set sh Set uh that's a another similar file which is",
    "start": "1032439",
    "end": "1039160"
  },
  {
    "text": "like a uh permissions enabled um shell like construct so you can run you can",
    "start": "1039160",
    "end": "1045640"
  },
  {
    "text": "run uh applications with permissions as opposed to setting those permissions on the",
    "start": "1045640",
    "end": "1050799"
  },
  {
    "text": "file um okay and then we move on to the the",
    "start": "1050799",
    "end": "1057919"
  },
  {
    "start": "1053000",
    "end": "1098000"
  },
  {
    "text": "other level the the the orchestrator part of the application and we've got this cap drop and cap ad commands and",
    "start": "1057919",
    "end": "1065679"
  },
  {
    "text": "cap drop is do yeah does what it says cap drop drop the privileges in this",
    "start": "1065679",
    "end": "1071440"
  },
  {
    "text": "list and cap ad add the privileges in this list for um for the for the drop",
    "start": "1071440",
    "end": "1077640"
  },
  {
    "text": "there's a a keyword called all which makes it drop all the commands and then we add back in the only the ones that we",
    "start": "1077640",
    "end": "1084799"
  },
  {
    "text": "we we need to run our uh to run our service so we've got the uh read only",
    "start": "1084799",
    "end": "1090880"
  },
  {
    "text": "true in there as well to make sure that the the file is read only so that's um Docker compost specific syntax but we",
    "start": "1090880",
    "end": "1098440"
  },
  {
    "start": "1098000",
    "end": "1148000"
  },
  {
    "text": "can also look at kubernetes which kind of it's kind of similar but just a different syntax um we've got a",
    "start": "1098440",
    "end": "1103840"
  },
  {
    "text": "specification container this thing called a security context which lives underneath the container",
    "start": "1103840",
    "end": "1109960"
  },
  {
    "text": "um same sort of thing here capabilities drop and add and we're doing the same",
    "start": "1109960",
    "end": "1115159"
  },
  {
    "text": "all in that particular uh permission we're giving there um slightly different name for the",
    "start": "1115159",
    "end": "1123240"
  },
  {
    "text": "readon option this is probably more explicit which probably a bit nicer um and kubernetes also has this really neat",
    "start": "1123240",
    "end": "1130159"
  },
  {
    "text": "little feature here where we can ask kubernetes to verify that the container",
    "start": "1130159",
    "end": "1137080"
  },
  {
    "text": "that starts really does ru as non- root and if it doesn't if it does start or try to start a rout it it will fail so",
    "start": "1137080",
    "end": "1144559"
  },
  {
    "text": "it's nice nice little addition by kubernetes there okay so let's try that again so",
    "start": "1144559",
    "end": "1151679"
  },
  {
    "text": "I'm going to take that Docker file uh and that dock compose",
    "start": "1151679",
    "end": "1159720"
  },
  {
    "text": "file and I'm going to apply that",
    "start": "1165400",
    "end": "1171679"
  },
  {
    "text": "again so previously we was using an insecure version of the repo now I'm using a secure and uh when we exect back",
    "start": "1171679",
    "end": "1180240"
  },
  {
    "text": "into the front end and try some of these",
    "start": "1180240",
    "end": "1186919"
  },
  {
    "text": "commands they don't work so what what have we got just here",
    "start": "1186919",
    "end": "1194440"
  },
  {
    "text": "I don't know if you should just be able to see that so we've tried to install the application saying permission denied permission",
    "start": "1194440",
    "end": "1200760"
  },
  {
    "text": "denied it's purely because we're not root anymore um we're trying to write to a file and we can't because it's read",
    "start": "1200760",
    "end": "1206360"
  },
  {
    "text": "only file system we can also uh actually look at the some of the um capabilities",
    "start": "1206360",
    "end": "1212799"
  },
  {
    "text": "that are have have been inserted into the into the kernel that's running and um the the the capabilities are",
    "start": "1212799",
    "end": "1220120"
  },
  {
    "text": "represented by bits in uh in all of these settings here um when there's zeros everywhere that means there's no",
    "start": "1220120",
    "end": "1226159"
  },
  {
    "text": "capabilities when there's you know letters and numbers it means there is capabilities so no capabilities at all",
    "start": "1226159",
    "end": "1232480"
  },
  {
    "text": "and finally the who am I is reporting me as my user fantastic so we can't get hacked anymore which is",
    "start": "1232480",
    "end": "1240320"
  },
  {
    "text": "good okay so let's go back to this",
    "start": "1242080",
    "end": "1248399"
  },
  {
    "start": "1250000",
    "end": "1288000"
  },
  {
    "text": "view so just to recap set a user dead easy to do make it read only",
    "start": "1251080",
    "end": "1258000"
  },
  {
    "text": "also dead easy easy to do and you use capabilities you know have this principle of least privilege and remove",
    "start": "1258000",
    "end": "1264559"
  },
  {
    "text": "all all capabilities that you can and generally the procedure is to remove everything and it doesn't work and then",
    "start": "1264559",
    "end": "1270919"
  },
  {
    "text": "gradually start to read capabilities back to the application until your application is functional again it's",
    "start": "1270919",
    "end": "1276760"
  },
  {
    "text": "kind of a manual Step at the moment um there are a couple of tools out there that kind of help you with that but I",
    "start": "1276760",
    "end": "1282200"
  },
  {
    "text": "still found it easiest just to do that manually because I I knew the uh the uh the application",
    "start": "1282200",
    "end": "1289640"
  },
  {
    "start": "1288000",
    "end": "1301000"
  },
  {
    "text": "so let's lighten the mood a little bit did you know that over in 2003 over",
    "start": "1289640",
    "end": "1295159"
  },
  {
    "text": "11,000 people were hospitalized because of",
    "start": "1295159",
    "end": "1300080"
  },
  {
    "text": "socks 5 to 10 people die each year in the UK due to socks so maybe we do need",
    "start": "1300960",
    "end": "1307440"
  },
  {
    "start": "1301000",
    "end": "1312000"
  },
  {
    "text": "those sock locks after all because I didn't realize that socks are that dangerous um Network segmentation and",
    "start": "1307440",
    "end": "1315360"
  },
  {
    "start": "1312000",
    "end": "1321000"
  },
  {
    "text": "policy it makes me laugh you don't have to laugh that's fine I'll laugh um Network segmentation of",
    "start": "1315360",
    "end": "1321000"
  },
  {
    "start": "1321000",
    "end": "1368000"
  },
  {
    "text": "policy so this is a high level schematic of the the um the microservices demo",
    "start": "1321000",
    "end": "1327080"
  },
  {
    "text": "application the circles represent services and the some of the services are backed by databases and the the",
    "start": "1327080",
    "end": "1334039"
  },
  {
    "text": "links between them kind of roughly show the information flow how they how they",
    "start": "1334039",
    "end": "1339480"
  },
  {
    "text": "uh communicate with each other so let's imagine the case where someone was able",
    "start": "1339480",
    "end": "1345799"
  },
  {
    "text": "or to try and access a service from an external Source how would we normally",
    "start": "1345799",
    "end": "1351400"
  },
  {
    "text": "prevent it do you think",
    "start": "1351400",
    "end": "1357159"
  },
  {
    "text": "anyone I'm going to have a drink while we have think a firewall thank",
    "start": "1357159",
    "end": "1364600"
  },
  {
    "text": "you he today you're almost right you don't quite use a firewall use a trump",
    "start": "1364600",
    "end": "1370480"
  },
  {
    "start": "1368000",
    "end": "1374000"
  },
  {
    "text": "firewall which is bigger and better and more badass than most other firewalls so once you've got your Trump",
    "start": "1370480",
    "end": "1377039"
  },
  {
    "start": "1374000",
    "end": "1398000"
  },
  {
    "text": "firewall in place yes it is it is as well look there you go that was totally accidental well well",
    "start": "1377039",
    "end": "1383799"
  },
  {
    "text": "spotted um once you've got the the the fire well in place then you you you're creating this this this Zone within your",
    "start": "1383799",
    "end": "1390200"
  },
  {
    "text": "application where you assume it's a bit safer than it was on the outside and",
    "start": "1390200",
    "end": "1395679"
  },
  {
    "text": "that's fine you know we can't live without firewalls but it doesn't tend to prevent",
    "start": "1395679",
    "end": "1401600"
  },
  {
    "start": "1398000",
    "end": "1445000"
  },
  {
    "text": "any Mis Communications between the apps so either if you imagine somebody",
    "start": "1401600",
    "end": "1407640"
  },
  {
    "text": "already had access to the front end when they shouldn't have they can easily uh access some backend service because of",
    "start": "1407640",
    "end": "1415039"
  },
  {
    "text": "the shared network um I mean that I mean that definitely could happen and that's probably the worst case scenario I would",
    "start": "1415039",
    "end": "1421679"
  },
  {
    "text": "say the the more common scenario is actually just part of application design so you've drawn and and you've created",
    "start": "1421679",
    "end": "1429919"
  },
  {
    "text": "this architecture for a particular reason there's no reason why that front end can't you know totally ignore your",
    "start": "1429919",
    "end": "1435520"
  },
  {
    "text": "recommendations for the architecture and just go to the shipping service directly so there's also like an an application",
    "start": "1435520",
    "end": "1441600"
  },
  {
    "text": "Level component that's important within the same context and what we can do to fix that is apply Network segmentation",
    "start": "1441600",
    "end": "1449320"
  },
  {
    "start": "1445000",
    "end": "1524000"
  },
  {
    "text": "and the short story is that it's basically creating smaller sub networks",
    "start": "1449320",
    "end": "1455720"
  },
  {
    "text": "within your one name uh main Network so you could do this physically with different networks you know manual",
    "start": "1455720",
    "end": "1461440"
  },
  {
    "text": "physically different networks um but generally it's easier and more reliable",
    "start": "1461440",
    "end": "1466720"
  },
  {
    "text": "to use uh software to find Network and this represents some of the networks that are in use for the uh for the sock",
    "start": "1466720",
    "end": "1473640"
  },
  {
    "text": "shop so we've got an external an internal and a back office um we set those uh those networks",
    "start": "1473640",
    "end": "1481360"
  },
  {
    "text": "in uh the do compos file here under the networks tab for that particular service",
    "start": "1481360",
    "end": "1486600"
  },
  {
    "text": "and that's great so we're saying that the shipping service belongs to the back office Network so only only uh only",
    "start": "1486600",
    "end": "1494240"
  },
  {
    "text": "other services which have the back office Network can then access",
    "start": "1494240",
    "end": "1499440"
  },
  {
    "text": "it um but you know it's still kind of quite broad um what we can do is we can",
    "start": "1499440",
    "end": "1507720"
  },
  {
    "text": "try and access within the same network so you know catalog can still access the cart so the logic flow States from the",
    "start": "1507720",
    "end": "1516640"
  },
  {
    "text": "diagram that the cart should be only communicating with the front end and the catalog should only be communicating with the front end and I think the",
    "start": "1516640",
    "end": "1524480"
  },
  {
    "start": "1524000",
    "end": "1619000"
  },
  {
    "text": "easiest way to show this is to actually is actually to try it so what I have is",
    "start": "1524480",
    "end": "1530320"
  },
  {
    "text": "a cluster on AWS running the kubernetes deploy",
    "start": "1530320",
    "end": "1536000"
  },
  {
    "text": "and um hopefully we're still connected we are it's probably too small for you and",
    "start": "1536000",
    "end": "1542520"
  },
  {
    "text": "you can see all the pods the different kubernetes pods running there so what we can do is we let me just copy that",
    "start": "1542520",
    "end": "1549320"
  },
  {
    "text": "because that's quite a long one so we can find the Pod that we're interested in which is the catalog P pod and then",
    "start": "1549320",
    "end": "1556559"
  },
  {
    "text": "we can again SEC into that particular",
    "start": "1556559",
    "end": "1561799"
  },
  {
    "text": "container uh let's just make sure I got the right one so yes we're in the catalog okay so",
    "start": "1561799",
    "end": "1568679"
  },
  {
    "text": "now what we should be able to do um is tell",
    "start": "1568679",
    "end": "1576600"
  },
  {
    "text": "net any particular car I know the API uh so I can do",
    "start": "1576600",
    "end": "1582159"
  },
  {
    "text": "that uh okay okay and you can see that the",
    "start": "1582159",
    "end": "1587880"
  },
  {
    "text": "catalog has completely full access to the cart and we can you know potentially",
    "start": "1587880",
    "end": "1595279"
  },
  {
    "text": "obtain um secure information that shouldn't really be available to this",
    "start": "1595279",
    "end": "1600799"
  },
  {
    "text": "service in this case we're retrieving somebody's cart uh for the user 1 two 3",
    "start": "1600799",
    "end": "1605840"
  },
  {
    "text": "4 so yeah that's not good and the reason for that is because",
    "start": "1605840",
    "end": "1612880"
  },
  {
    "text": "we're still on the same network there's no problems with those two guys communicating so this again is much like",
    "start": "1612880",
    "end": "1618799"
  },
  {
    "text": "the firewall it's still too uh it's the scope is too wide we need something",
    "start": "1618799",
    "end": "1623880"
  },
  {
    "text": "that's much more fine grained we need something that's specific to specific services and um we need a way to",
    "start": "1623880",
    "end": "1631240"
  },
  {
    "text": "describe which Services can Des uh talk to other services and the solution is a",
    "start": "1631240",
    "end": "1638200"
  },
  {
    "start": "1636000",
    "end": "1648000"
  },
  {
    "text": "network policy and a network policy is a bit like a bouncer that doesn't let you in just because you're wearing shorts",
    "start": "1638200",
    "end": "1643360"
  },
  {
    "text": "now that does happen in the UK believe it or not if you're wearing shorts sometimes don't let you in I've been",
    "start": "1643360",
    "end": "1648640"
  },
  {
    "text": "yeah accustomed to that um and all it is basically is just a list of things that",
    "start": "1648640",
    "end": "1653880"
  },
  {
    "text": "can communicate with other things so we've got the front end is allowed to communicate with the user the order service is allowed to communicate with",
    "start": "1653880",
    "end": "1660440"
  },
  {
    "text": "shipping but there's no policy between the catalog and the car so it totally denies all traffic between those",
    "start": "1660440",
    "end": "1667960"
  },
  {
    "start": "1667000",
    "end": "1774000"
  },
  {
    "text": "two let's take a look at an example Network policy so we've got here the",
    "start": "1667960",
    "end": "1673000"
  },
  {
    "text": "network policy setup for kubernetes and um it's a little bit for Bose but it's",
    "start": "1673000",
    "end": "1679399"
  },
  {
    "text": "quite simple it's basically you're saying uh uh which container so which container label can talk to which other",
    "start": "1679399",
    "end": "1686440"
  },
  {
    "text": "container label on a specific port and then these filters and uh labels on the",
    "start": "1686440",
    "end": "1693880"
  },
  {
    "text": "side here are basically just filtering for a particular pod or a particular container and there's different filters",
    "start": "1693880",
    "end": "1699320"
  },
  {
    "text": "you can use to get groups of things if you if you so wish",
    "start": "1699320",
    "end": "1705080"
  },
  {
    "text": "so yeah okay let's try that again I'm now going to",
    "start": "1705080",
    "end": "1712200"
  },
  {
    "text": "apply uh so I've got to create the policy first okay and then I've got to apply",
    "start": "1712200",
    "end": "1721278"
  },
  {
    "text": "it okay and then we're just going to exect back in again and we're going to",
    "start": "1722039",
    "end": "1727720"
  },
  {
    "text": "do the same thing that I did last",
    "start": "1727720",
    "end": "1731120"
  },
  {
    "text": "time yeah that's right",
    "start": "1734159",
    "end": "1738559"
  },
  {
    "text": "and there you go so it doesn't do anything so what it's doing now is actually it's just constantly retrying and eventually you'll just get a retry",
    "start": "1744120",
    "end": "1750320"
  },
  {
    "text": "timeout and that's because there's no um there's no pathway between the catalog",
    "start": "1750320",
    "end": "1755559"
  },
  {
    "text": "service and the cart service defined in that Network policy so the only thing",
    "start": "1755559",
    "end": "1761000"
  },
  {
    "text": "that can access the carts is that front end",
    "start": "1761000",
    "end": "1765480"
  },
  {
    "start": "1774000",
    "end": "1842000"
  },
  {
    "text": "so top tip number three you need a software to find network to do this um",
    "start": "1774120",
    "end": "1779799"
  },
  {
    "text": "so this is using kubernetes with cni plugin with weet so weet is a a software",
    "start": "1779799",
    "end": "1788159"
  },
  {
    "text": "defined Network there are other software defined networks that also support this um the cni plugin enables these external",
    "start": "1788159",
    "end": "1796039"
  },
  {
    "text": "software toine networks to to work with kubernetes and and the pods um but yeah it this is kind of",
    "start": "1796039",
    "end": "1803279"
  },
  {
    "text": "ryant on the software defined network but it really does help because that policy is it becomes so much more focused um on The Individual Services",
    "start": "1803279",
    "end": "1811039"
  },
  {
    "text": "you can specify those in advance and if people it's there's a security aspect",
    "start": "1811039",
    "end": "1816240"
  },
  {
    "text": "that is obvious but there's also um you know the application specific thing as well where if you have this constraint",
    "start": "1816240",
    "end": "1824720"
  },
  {
    "text": "explicitly stated then there can be no accidents you know you you can't have people accidentally communicating with",
    "start": "1824720",
    "end": "1829960"
  },
  {
    "text": "services that they shouldn't be you can't have processes hacked in as it were without you know explicitly",
    "start": "1829960",
    "end": "1836039"
  },
  {
    "text": "defining that those hacks are what you want so definitely worthwhile so let's start wrapping up um",
    "start": "1836039",
    "end": "1844440"
  },
  {
    "start": "1842000",
    "end": "1892000"
  },
  {
    "text": "so we've got the container stuff at the top and the network stuff at the bottom we talked about setting up a user and we",
    "start": "1844440",
    "end": "1851200"
  },
  {
    "text": "do so so that we can't run commands as rout dead simple we make it immutable so people can't mess around with the files",
    "start": "1851200",
    "end": "1857279"
  },
  {
    "text": "if they do get inside the application we we add restraint to the application by",
    "start": "1857279",
    "end": "1863159"
  },
  {
    "text": "setting the capabilities that are allowed and not allowed and then we talked about",
    "start": "1863159",
    "end": "1868440"
  },
  {
    "text": "networks we're using a a great big Trump firewall to block everything from the outside we're using network segmentation",
    "start": "1868440",
    "end": "1876159"
  },
  {
    "text": "which is like the the middle ground between policy and firewall um separates individual groups of services into a",
    "start": "1876159",
    "end": "1882679"
  },
  {
    "text": "network and then we've got the network policy which I think is the really is the coolest bit um about the this this",
    "start": "1882679",
    "end": "1888720"
  },
  {
    "text": "whole thing um and finally is the sock shop so",
    "start": "1888720",
    "end": "1896000"
  },
  {
    "start": "1892000",
    "end": "1971000"
  },
  {
    "text": "there's the link again go and take a look you can go and try this right now if you've got your laptops open um what",
    "start": "1896000",
    "end": "1902440"
  },
  {
    "text": "you can do there is take the these Services whether they're secure or insecure and you can mess around with",
    "start": "1902440",
    "end": "1907600"
  },
  {
    "text": "them and put them on an orchestrator of your choice um what we're really looking",
    "start": "1907600",
    "end": "1913440"
  },
  {
    "text": "for is to keep that project moving and we can do that by asking for help from",
    "start": "1913440",
    "end": "1920080"
  },
  {
    "text": "people um ways in which you can help one one cool idea is sometimes when we uh uh",
    "start": "1920080",
    "end": "1925919"
  },
  {
    "text": "are trying to test some new hires then what we will do is ask them to do a PR to an open source repo um this is a a",
    "start": "1925919",
    "end": "1934200"
  },
  {
    "text": "perfect example of kind of a low risk it doesn't really matter submit a PR and if it's good it'll get accepted kind of",
    "start": "1934200",
    "end": "1940200"
  },
  {
    "text": "project because nobody's really depending on it um so I think that's one good thing you can maybe take away and",
    "start": "1940200",
    "end": "1946480"
  },
  {
    "text": "Implement in your policies is to ask people to submit to weave Works uh sorry",
    "start": "1946480",
    "end": "1951760"
  },
  {
    "text": "to um to socka he's still up there it's the old logo um and uh and check it out",
    "start": "1951760",
    "end": "1958559"
  },
  {
    "text": "and star it and contribute and and keep it moving forward because I I think there is a need for uh a general purpose",
    "start": "1958559",
    "end": "1965720"
  },
  {
    "text": "microservices application that everyone can use and learn from and um I think that's it y so thank",
    "start": "1965720",
    "end": "1974720"
  },
  {
    "start": "1971000",
    "end": "1999000"
  },
  {
    "text": "you very much contact me at details below if you want to talk or come and see me now thank",
    "start": "1974720",
    "end": "1981880"
  },
  {
    "text": "you so thank you Phil okay no problem we still have time for a few questions if",
    "start": "1984519",
    "end": "1990960"
  },
  {
    "text": "anyone in the audience yep um do you have the source code for",
    "start": "1990960",
    "end": "1997039"
  },
  {
    "text": "the example Like For The Individual Services not the deployment but the because it's not in that repo I guess",
    "start": "1997039",
    "end": "2003399"
  },
  {
    "start": "1999000",
    "end": "2084000"
  },
  {
    "text": "yeah uh yeah well it's not exactly in that repo it's in um it's in the the associated reps let me show",
    "start": "2003399",
    "end": "2011080"
  },
  {
    "text": "you so um so microservices demo is all also",
    "start": "2011080",
    "end": "2016440"
  },
  {
    "text": "an organization and in that organization is all of the code for all of the",
    "start": "2016440",
    "end": "2021919"
  },
  {
    "text": "individual services so you can check them out there and we did that this is actually this a cool discussion itself",
    "start": "2021919",
    "end": "2027200"
  },
  {
    "text": "we split them out um purely because we wanted to release them um independently of each other because we would finded",
    "start": "2027200",
    "end": "2032799"
  },
  {
    "text": "as's a bug in one of the services and we needed to releasee that and we're using G releases to kind of the cicd stuff so",
    "start": "2032799",
    "end": "2039679"
  },
  {
    "text": "we split them out into separate repositories so that we could release them um into uh into the world at",
    "start": "2039679",
    "end": "2045840"
  },
  {
    "text": "different times and uh it's a good simulation of sort of real life teams in",
    "start": "2045840",
    "end": "2051919"
  },
  {
    "text": "the wild as well we kind of made it intentionally polyglot so there's there's go Services there's Java",
    "start": "2051919",
    "end": "2057398"
  },
  {
    "text": "Services uh there's there's there's nodejs stuff as well so yeah that's why we did",
    "start": "2057399",
    "end": "2064000"
  },
  {
    "text": "it okay any more questions",
    "start": "2064040",
    "end": "2068919"
  },
  {
    "text": "no okay well thank you okay thank you very much [Applause]",
    "start": "2070639",
    "end": "2079658"
  }
]