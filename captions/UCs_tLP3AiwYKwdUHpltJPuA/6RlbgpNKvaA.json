[
  {
    "start": "0",
    "end": "69000"
  },
  {
    "text": "[Music]",
    "start": "980",
    "end": "7849"
  },
  {
    "text": "hey everybody okay today I'm talking",
    "start": "12580",
    "end": "17630"
  },
  {
    "text": "about the practicalities of distributed systems this is a complicated idea a lot",
    "start": "17630",
    "end": "24830"
  },
  {
    "text": "of folks when they come up here they're going to talk to you about specific things about distribute systems or they're going to talk to about the theoretical stuff this talk is",
    "start": "24830",
    "end": "31039"
  },
  {
    "text": "specifically and intentionally designed to be a general overview and about the practicalities of what it means from",
    "start": "31039",
    "end": "36440"
  },
  {
    "text": "when we put things into production this is also a talk I gave five years ago but",
    "start": "36440",
    "end": "41660"
  },
  {
    "text": "updated and revamped the company basho that used to have the database react had a conference many",
    "start": "41660",
    "end": "47510"
  },
  {
    "text": "years ago I gave this talk and a bunch of other people did too and then the",
    "start": "47510",
    "end": "52760"
  },
  {
    "text": "YouTube account for Bosch show got closed and there was a time in my life for which I was actually pretty excited",
    "start": "52760",
    "end": "58400"
  },
  {
    "text": "about this talk and folks have been asking for it again and so after it disappeared from the internet it seems",
    "start": "58400",
    "end": "63950"
  },
  {
    "text": "like time for me to do another version of it something updated for 2018 ok so",
    "start": "63950",
    "end": "69200"
  },
  {
    "start": "69000",
    "end": "69000"
  },
  {
    "text": "there's some things that we should talk about one of them is why you should listen to me I was at Twitter from 2009",
    "start": "69200",
    "end": "74630"
  },
  {
    "text": "2014 it was 120 people to 3600 people along the way I went from like a little",
    "start": "74630",
    "end": "79999"
  },
  {
    "text": "baby engineer to a fairly mature and senior engineering person I worked on a bunch of problems including be one of",
    "start": "79999",
    "end": "86240"
  },
  {
    "text": "the founding members of the anti-spam team I worked on for CBC on Twitter after the Snowden releases",
    "start": "86240",
    "end": "91609"
  },
  {
    "text": "I've worked on incidents like the heartbleed response and worked on distributed database work for Cassandra",
    "start": "91609",
    "end": "97759"
  },
  {
    "text": "my sequel yada yada yada and then a couple years ago I was fortunate enough to be on one of the first engineers",
    "start": "97759",
    "end": "104179"
  },
  {
    "text": "working on let's encrypt and help ditch  a few months a couple of years ago which you may be now be used you may be",
    "start": "104179",
    "end": "110659"
  },
  {
    "text": "using on your website right now to provide HTTPS and if you're not I was trying to recommend it the team is fantastic so done a couple of things",
    "start": "110659",
    "end": "118219"
  },
  {
    "text": "like a couple of things but now I'm also a small business owner I've got this little website called how's my so calm I",
    "start": "118219",
    "end": "125209"
  },
  {
    "text": "sell subscriptions to other websites for them to use my website to figure out what their users browsers are secure and",
    "start": "125209",
    "end": "131709"
  },
  {
    "text": "I had an intention when I wrote this talk five years ago to be",
    "start": "131709",
    "end": "137120"
  },
  {
    "text": "scale-invariant and now as a small business owner I am extremely aware of that what it takes to be not just a big",
    "start": "137120",
    "end": "144980"
  },
  {
    "text": "company working with thousands of machines and when we're talking about distribute systems but also the little stuff the tiny work that it takes when",
    "start": "144980",
    "end": "150680"
  },
  {
    "text": "you got just you know one or three or five or ten people okay so we're talking about building and",
    "start": "150680",
    "end": "156140"
  },
  {
    "start": "156000",
    "end": "156000"
  },
  {
    "text": "running distributed systems so when I go to a quick foundation about what makes distributed systems different when I was",
    "start": "156140",
    "end": "161629"
  },
  {
    "start": "159000",
    "end": "159000"
  },
  {
    "text": "in the baby engineer I would get asked this and I would say something along the lines of well latency and people kind of",
    "start": "161629",
    "end": "168310"
  },
  {
    "text": "hem and haw and say not kind of what's really different is failure the state",
    "start": "168310",
    "end": "173599"
  },
  {
    "text": "space of failure for distribute systems is much larger than for a single machine system this is repeated over and over",
    "start": "173599",
    "end": "180980"
  },
  {
    "text": "again I'm going to give you a quick subset of the kinds of failures that you'll see one of those like a garbage collection failure causing just a couple",
    "start": "180980",
    "end": "186650"
  },
  {
    "start": "183000",
    "end": "183000"
  },
  {
    "text": "of your machines transiently to like go offline and it looks oftentimes i've had engineers come to me and said they've",
    "start": "186650",
    "end": "193069"
  },
  {
    "text": "got some network problem because they're looking at their network input and output up from certain machines and have to ask them like hey what's actually",
    "start": "193069",
    "end": "199310"
  },
  {
    "text": "going on with your heap another thing is a client might get stuck to an overloaded process they've got some very",
    "start": "199310",
    "end": "204739"
  },
  {
    "start": "201000",
    "end": "201000"
  },
  {
    "text": "long socket connect timeout and you've got this one machine that's taking forever to actually resolve connections",
    "start": "204739",
    "end": "210200"
  },
  {
    "text": "and overtime transiently and implicitly some of your clients just kind of gather",
    "start": "210200",
    "end": "215750"
  },
  {
    "text": "and all try to connect this one machine over and over and over again and it happens and it looks weird and they",
    "start": "215750",
    "end": "220790"
  },
  {
    "text": "bunch up and you can never quite figure out what's going on and of course you have the MongoDB problem which is where",
    "start": "220790",
    "end": "226910"
  },
  {
    "text": "you do a socket right over here and it says it worked but of course on the other side it fails these are all",
    "start": "226910",
    "end": "232940"
  },
  {
    "text": "partial failures and that limp that's what makes this hard is that there's it",
    "start": "232940",
    "end": "239389"
  },
  {
    "start": "233000",
    "end": "233000"
  },
  {
    "text": "kind of works like distribute systems kind of work all the time and that's",
    "start": "239389",
    "end": "245510"
  },
  {
    "text": "what's actually cool about them and we're gonna get it into that but they also kind of are always failing a little",
    "start": "245510",
    "end": "251030"
  },
  {
    "text": "bit and so one of the things that you're going to notice is that the there are certain implicit questions that get",
    "start": "251030",
    "end": "256280"
  },
  {
    "start": "252000",
    "end": "252000"
  },
  {
    "text": "really really hard like the hardest problem you're gonna have is fixing slowness you're gonna have an engineer",
    "start": "256280",
    "end": "261889"
  },
  {
    "text": "if you're lucky or another or god help you a user is gonna come to you and tell you that it's slow and you",
    "start": "261889",
    "end": "268539"
  },
  {
    "text": "got to figure out what it means for slowness like they say oh well it just took a lot of time to post and you're",
    "start": "268539",
    "end": "274240"
  },
  {
    "text": "gonna come back and say oh that could mean this thing of this thing or this thing or this thing and the state space",
    "start": "274240",
    "end": "279819"
  },
  {
    "text": "is so large but it's impossible to figure out with our usual single machine tools so what's cool about distribute",
    "start": "279819",
    "end": "287590"
  },
  {
    "start": "286000",
    "end": "286000"
  },
  {
    "text": "systems is that these failures and a state space of failure is so broad but",
    "start": "287590",
    "end": "293020"
  },
  {
    "text": "in actuality we can create reliability we can create more robustness we can create resiliency out of having more",
    "start": "293020",
    "end": "299620"
  },
  {
    "text": "machines out of having machines talking to one another of course the obvious stuff is the",
    "start": "299620",
    "end": "305620"
  },
  {
    "text": "redundancy when we talk about like if you have more than one machine and one machine fails you can always have another machine picking up the slack",
    "start": "305620",
    "end": "311560"
  },
  {
    "text": "that's cool there's actually some other more interesting things that you can do to build partial availability in your",
    "start": "311560",
    "end": "317740"
  },
  {
    "text": "systems right now a class example of building partial veil ability into the",
    "start": "317740",
    "end": "323949"
  },
  {
    "text": "design of your system is search this start happening in I think the late 60s with ink to me and a couple other big",
    "start": "323949",
    "end": "330159"
  },
  {
    "text": "search engines and now all of them do it we got you know Google and Yahoo and Bing and Twitter of course uses this",
    "start": "330159",
    "end": "337449"
  },
  {
    "text": "stuff it's the same idea you've got let's say five machines and your index",
    "start": "337449",
    "end": "342879"
  },
  {
    "text": "is too big to fit on any one of them and so what you actually do is you have a user come in and they ask they send a",
    "start": "342879",
    "end": "348520"
  },
  {
    "text": "query to your first muxing system and then that machine actually sends the query out to those five index machines",
    "start": "348520",
    "end": "354940"
  },
  {
    "text": "and then those index machines go through and they like find the most relevant documents and then return the most",
    "start": "354940",
    "end": "360639"
  },
  {
    "text": "relevant documents after back to this muxing machine the next machine then ranks all the documents that they've",
    "start": "360639",
    "end": "365830"
  },
  {
    "text": "gotten back results in another list and just takes the top end from those machines and sends it back to the user it's a cool simple little design now",
    "start": "365830",
    "end": "374259"
  },
  {
    "text": "what's really great about it is that if one of those indexing machines goes down you can actually still return decent",
    "start": "374259",
    "end": "381099"
  },
  {
    "text": "results to the user even in that partial outage because those results might get a",
    "start": "381099",
    "end": "386620"
  },
  {
    "text": "little bit worse well it doesn't actually change the fact that you want to get something back to the user at all",
    "start": "386620",
    "end": "391839"
  },
  {
    "text": "and that's partial ability means that you can build systems and have does that stay up even in the face of filler",
    "start": "391839",
    "end": "398819"
  },
  {
    "text": "and actually give good results that you can straight-up make money off of was slightly less work also",
    "start": "398819",
    "end": "405719"
  },
  {
    "start": "405000",
    "end": "405000"
  },
  {
    "text": "so the monorail was something that I worked on at Twitter it was a monolithic Ruby on Rails web app we had started",
    "start": "405719",
    "end": "413039"
  },
  {
    "text": "adding who to follow if you're familiar with Twitter at all it's this little doodad it was originally in the top left",
    "start": "413039",
    "end": "418409"
  },
  {
    "text": "here that would tell you just other people that you might like to follow that's it there's a great little system but it was",
    "start": "418409",
    "end": "424229"
  },
  {
    "text": "also the first service that we had that was coming through the monorail that we would actually connect to from the",
    "start": "424229",
    "end": "429779"
  },
  {
    "text": "monorail that wasn't just a database or something and what happened is who to",
    "start": "429779",
    "end": "435659"
  },
  {
    "text": "follow like a lot of new systems was and",
    "start": "435659",
    "end": "441539"
  },
  {
    "text": "it had problems at performance issues and one of those and so folks would try",
    "start": "441539",
    "end": "447599"
  },
  {
    "text": "to solve that by increasing the timeout and they would say okay well every time",
    "start": "447599",
    "end": "453930"
  },
  {
    "text": "we timeout who to follow we're actually sending back a fail whale just an error message to whole cloth to the user instead of",
    "start": "453930",
    "end": "460769"
  },
  {
    "text": "rendering their home timeline and so they kept increasing the timeout because who to follow was having performance",
    "start": "460769",
    "end": "466529"
  },
  {
    "text": "issues and then we started running into the overall time out of five seconds or whatever started to be too small because",
    "start": "466529",
    "end": "472349"
  },
  {
    "text": "hooter follows like one second or two second timeout if who do follow us having a bad day and a couple of the",
    "start": "472349",
    "end": "477749"
  },
  {
    "text": "databases we're having a bad day we'd start responding like back in blank pages because we were taking too long completely and so the actual fix for",
    "start": "477749",
    "end": "488279"
  },
  {
    "text": "this was okay we can fix the Pooh to follow problems but there's actually a more generic problem that we're",
    "start": "488279",
    "end": "494339"
  },
  {
    "text": "addressing here which is who to follow isn't that important like it's not important enough to like ship an error",
    "start": "494339",
    "end": "500279"
  },
  {
    "text": "back to the user just because one little doodad on the webpage didn't work and that's partially ability we're talk",
    "start": "500279",
    "end": "506099"
  },
  {
    "text": "about distributed systems we're not just talking about like okay redundancy ok horizontal scalability we're talking",
    "start": "506099",
    "end": "512490"
  },
  {
    "text": "about sometimes optionality is the availability like you don't need to ship every feature you don't need to use",
    "start": "512490",
    "end": "519268"
  },
  {
    "text": "every index in your search sometimes you can like map uses geolocation results and there's it takes actual like",
    "start": "519269",
    "end": "526740"
  },
  {
    "text": "thinking outside of our usual understanding when we're building our apps and systems to get there okay",
    "start": "526740",
    "end": "535520"
  },
  {
    "start": "534000",
    "end": "534000"
  },
  {
    "text": "the problem with distribute systems is that because there is a much larger state space it's difficult for us as",
    "start": "535520",
    "end": "542580"
  },
  {
    "text": "engineers or QA people or whoever to actually exercise every edge case out",
    "start": "542580",
    "end": "548940"
  },
  {
    "text": "there and so we have this difference between we've known this as a problem",
    "start": "548940",
    "end": "554100"
  },
  {
    "text": "from single machine systems that we see the code on the page we believe we know what the code is going to do and then we",
    "start": "554100",
    "end": "560550"
  },
  {
    "text": "run it and it does something very different this gets much worse in distributed systems and it gets to be more difficult we start having to think",
    "start": "560550",
    "end": "567060"
  },
  {
    "text": "about an observation of the system in a different way instead of relying on user reports or looking on our own usage or",
    "start": "567060",
    "end": "573990"
  },
  {
    "text": "knowing that our integration tests are going to cover every bit of functionality we instead do things like using metrics and these are like broad",
    "start": "573990",
    "end": "582320"
  },
  {
    "text": "aggregate things so it's like how many messages are coming in how I mean you're",
    "start": "582320",
    "end": "587760"
  },
  {
    "text": "successfully going out how much latency are we using to do that work and the variety of like you know grouping of",
    "start": "587760",
    "end": "594900"
  },
  {
    "text": "active status codes and whatnot and I'm gonna take a real quick dive to the second here if you're calculating",
    "start": "594900",
    "end": "601020"
  },
  {
    "start": "599000",
    "end": "599000"
  },
  {
    "text": "latency please don't use averages there is ZERO distribute systems in the world",
    "start": "601020",
    "end": "606750"
  },
  {
    "text": "that have a useful average the graph of Layton sees do not look like a normal",
    "start": "606750",
    "end": "612930"
  },
  {
    "text": "bell curve they all have a very long tail so if you actually want to see what like one out of every ten requests loads",
    "start": "612930",
    "end": "619830"
  },
  {
    "text": "look like you've got to look at the 90th percentile you can't just rely Amin because it will tell you some great",
    "start": "619830",
    "end": "625230"
  },
  {
    "text": "number over here that looks dope and you want to brag about it but you're actually you're one out of every ten users is seeing this terrible latency",
    "start": "625230",
    "end": "631770"
  },
  {
    "text": "out here and it's that's like key this is a difficult thing and it's it comes",
    "start": "631770",
    "end": "637500"
  },
  {
    "text": "up all the time so that's cool we've got these broad metrics based systems where we expose metrics we send them out to",
    "start": "637500",
    "end": "644790"
  },
  {
    "text": "some other system and we can make dynamic charts we're gonna do time correlations to find bugs they're really",
    "start": "644790",
    "end": "649980"
  },
  {
    "text": "handy you've got system a at some counter going up system C going at some counter lower and you're like there's a difference so",
    "start": "649980",
    "end": "656920"
  },
  {
    "text": "maybe it's system B in the middle okay they're broad when there's some new",
    "start": "656920",
    "end": "662260"
  },
  {
    "start": "662000",
    "end": "662000"
  },
  {
    "text": "stuff but we started doing five years ago when nobody was really talking about it very much that's idea of tracing which is metrics",
    "start": "662260",
    "end": "669730"
  },
  {
    "text": "are great because they give you these broad aggregates that you can work on but they're very difficult they don't",
    "start": "669730",
    "end": "675220"
  },
  {
    "text": "talk about the actual system of communication between machines and tracing is the idea that we should",
    "start": "675220",
    "end": "681910"
  },
  {
    "text": "actually track one request coming into our system through all of the different systems it talks to log that out in some",
    "start": "681910",
    "end": "690220"
  },
  {
    "text": "formatted way so we can actually build a tree of communication there's tons of",
    "start": "690220",
    "end": "695500"
  },
  {
    "text": "systems that are now able to support this from the Google stuff that's called stack driver has this built in I believe",
    "start": "695500",
    "end": "702550"
  },
  {
    "text": "and then the usual cloud providers in yada yada and we're starting to push towards this what's very very cool about",
    "start": "702550",
    "end": "709810"
  },
  {
    "text": "it is that with just a couple of IDs you can start associating data like okay for",
    "start": "709810",
    "end": "716170"
  },
  {
    "text": "this error that we saw we sent back a 500 status code or whatever it was with this user ID and we talked to these",
    "start": "716170",
    "end": "722020"
  },
  {
    "text": "systems and it took this long and we can see that in one tree view and it's great and it's the kind of thing that we're",
    "start": "722020",
    "end": "727720"
  },
  {
    "text": "like is the next step for all of us to be building into our systems stuff I've used regularly and it gives you this",
    "start": "727720",
    "end": "734890"
  },
  {
    "text": "focused narrow view while metrics can provide aggregate broad views okay I",
    "start": "734890",
    "end": "740110"
  },
  {
    "start": "740000",
    "end": "740000"
  },
  {
    "text": "want to do a real quick side note on profiling profiling it's a good tool to",
    "start": "740110",
    "end": "746740"
  },
  {
    "text": "have you should have a profiler you should know how to run a profiler those are good they tell you how fast your computer can work they're",
    "start": "746740",
    "end": "754440"
  },
  {
    "text": "relatively inexpensive to run on your own machine you can test these things very well I've even run a couple in",
    "start": "754440",
    "end": "759730"
  },
  {
    "text": "production from a time or two but profiling struggles in a distributed",
    "start": "759730",
    "end": "766990"
  },
  {
    "text": "systems environment overall and it's not something that we can rely on to tell us much about distributed systems we can",
    "start": "766990",
    "end": "773320"
  },
  {
    "text": "use them we have focused questions to ask but you can't it's got two problems one profilers even today are a little",
    "start": "773320",
    "end": "780400"
  },
  {
    "text": "too expensive to actually run whenever you want and most distributed systems problems are transient they",
    "start": "780400",
    "end": "786339"
  },
  {
    "text": "happen at 3 a.m. because a certain subset of users that you've got at all on this machines at the same time they",
    "start": "786339",
    "end": "791620"
  },
  {
    "text": "happen when only some people are using this one word and they gets partitioned weird and your systems it only happens",
    "start": "791620",
    "end": "797440"
  },
  {
    "text": "these are what happens mints in awhile because of a combination of garbage collection and time-out on certain machines these are transient problems",
    "start": "797440",
    "end": "805120"
  },
  {
    "text": "and profilers expect to be run wild issue is happening and so then we have",
    "start": "805120",
    "end": "810190"
  },
  {
    "text": "to fall back to asynchronous styles of getting observation out which is metrics",
    "start": "810190",
    "end": "815589"
  },
  {
    "text": "and tracing and whatnot the second problem of profilers is in my opinion slightly more egregious and it's not",
    "start": "815589",
    "end": "821649"
  },
  {
    "text": "true of all profilers what it pretty much is the second one is that in the",
    "start": "821649",
    "end": "827800"
  },
  {
    "text": "same way that Layton sees need to be calculated with percentiles not averages",
    "start": "827800",
    "end": "833880"
  },
  {
    "text": "profilers I'll just give you a smeared out average and so what they tell you is how fast that method 1 and Method 2 but",
    "start": "833880",
    "end": "841660"
  },
  {
    "text": "the two maybe looks a little bit slower on average the method one but it won't tell you that method one when it goes",
    "start": "841660",
    "end": "848380"
  },
  {
    "text": "bad it goes really really bad and so you can't actually see that method one might actually be your performance problem you",
    "start": "848380",
    "end": "854890"
  },
  {
    "text": "just see it's smeared out into one scalar value for both methods its struggles which is why we talk about",
    "start": "854890",
    "end": "860529"
  },
  {
    "text": "metrics so much and why we talk about observation like tracing and whatever okay let's move on from that releases",
    "start": "860529",
    "end": "867640"
  },
  {
    "start": "866000",
    "end": "866000"
  },
  {
    "text": "should change a metric releases are deploys of code plus some other stuff",
    "start": "867640",
    "end": "873310"
  },
  {
    "text": "we'll get to that what ever release is a hypothesis about what's going to happen",
    "start": "873310",
    "end": "879790"
  },
  {
    "text": "in your system you have a hypothesis code you believe it will change your systems in certain ways and that should",
    "start": "879790",
    "end": "886300"
  },
  {
    "text": "be expressible at least for the kind of work that I do and that you probably do as a metric there of course quality of",
    "start": "886300",
    "end": "893829"
  },
  {
    "text": "life things that are non quantifiable features but there are certainly for most of your deploys there is a metric",
    "start": "893829",
    "end": "900160"
  },
  {
    "text": "that you could look at and see if it went up or went down and it should be able to change that of course the more",
    "start": "900160",
    "end": "905589"
  },
  {
    "text": "systems you get the easier it is to quantify ok I also want to take a brief",
    "start": "905589",
    "end": "912430"
  },
  {
    "start": "911000",
    "end": "911000"
  },
  {
    "text": "essence you know you may have mentioned notes that I haven't our Lord's much abused freeform text",
    "start": "912430",
    "end": "917740"
  },
  {
    "text": "logs in my systems it's the first thing that's going to break I know that's going to break but freeform text logs",
    "start": "917740",
    "end": "925360"
  },
  {
    "text": "lie and we have to be careful about that when we're talking about mini machines or even just more than one is that",
    "start": "925360",
    "end": "933930"
  },
  {
    "text": "common problems tend to get over Lord I remember we had some serv discovery stuff in the web server I was helping",
    "start": "933930",
    "end": "940960"
  },
  {
    "start": "935000",
    "end": "935000"
  },
  {
    "text": "build and we spent of an incident an extra ten minutes looking to figure out",
    "start": "940960",
    "end": "946930"
  },
  {
    "text": "why we were having struggling to have issues and we saw these piles of exceptions that are logs and they're all",
    "start": "946930",
    "end": "952870"
  },
  {
    "text": "from sirs discovery and we were like oh man oh okay we must have a service scurry problem we start digging around and trying to figure out how to make",
    "start": "952870",
    "end": "959170"
  },
  {
    "text": "that work when in fact that was that those errors were just about some other data center connections that we knew",
    "start": "959170",
    "end": "965320"
  },
  {
    "text": "we're never going to work and that we hadn't brought up the data center yet like it was just nonsense and that's really common in these freeform text",
    "start": "965320",
    "end": "971620"
  },
  {
    "text": "logs you just splat stuff in there we as engineers have certain expectations of",
    "start": "971620",
    "end": "977320"
  },
  {
    "text": "what is going to be useful and informative to other people or ourselves and we just get it wrong with these",
    "start": "977320",
    "end": "982330"
  },
  {
    "text": "freeform text logs and since we can't reduce that output like you can you can",
    "start": "982330",
    "end": "987940"
  },
  {
    "start": "986000",
    "end": "986000"
  },
  {
    "text": "have the most fine-grained marking up whatever and you're still gonna get what's you're still gonna get it wrong",
    "start": "987940",
    "end": "993580"
  },
  {
    "text": "about what's important because uncommon problems will then get buried it's hard to find them and then you're also gonna",
    "start": "993580",
    "end": "998800"
  },
  {
    "text": "see if you really understood the problem enough to log it you almost certainly",
    "start": "998800",
    "end": "1004650"
  },
  {
    "text": "would have fixed the bug like that's actually why most of these freeform text logs are busted and you can't it's very",
    "start": "1004650",
    "end": "1011370"
  },
  {
    "text": "difficult to use freeform text logs as time correlations to find problems in the same way that we can with tracing",
    "start": "1011370",
    "end": "1017850"
  },
  {
    "text": "and metrics because we don't have multiple sources with like actual numbers that we can do math on okay",
    "start": "1017850",
    "end": "1025520"
  },
  {
    "start": "1025000",
    "end": "1025000"
  },
  {
    "text": "let's come back up from some of the practicalities to a more generic point okay avoid coordination coordination as",
    "start": "1025520",
    "end": "1033949"
  },
  {
    "text": "human beings we feel as a relatively simple problem if we were to take a vote",
    "start": "1033949",
    "end": "1039360"
  },
  {
    "text": "in here on like what number we should put up on the screen we could reasonably do that with some rough consensus the",
    "start": "1039360",
    "end": "1045928"
  },
  {
    "text": "coordination and consensus is actually the most difficult problem in distributed systems it is perhaps thus",
    "start": "1045929",
    "end": "1051240"
  },
  {
    "text": "difficult problem in distributed systems it turns out that we've done decades of research on how to make machines agree",
    "start": "1051240",
    "end": "1058110"
  },
  {
    "text": "on simple numbers and that is still an active field of endeavor because for two",
    "start": "1058110",
    "end": "1064380"
  },
  {
    "text": "reasons one coordination turns out to be very difficult for human beings to understand there are so many failure",
    "start": "1064380",
    "end": "1071580"
  },
  {
    "text": "modes that you have to handle whenever just changing some little bit of data then it gets too complicated for us you",
    "start": "1071580",
    "end": "1078330"
  },
  {
    "text": "can go read the reason why the paxos enrapt exists paksas was originally attempt to",
    "start": "1078330",
    "end": "1084360"
  },
  {
    "text": "simplify coordination and it created this you may be familiar with Paxos it",
    "start": "1084360",
    "end": "1089490"
  },
  {
    "text": "was this parliamentary paper it was written by Lamport in the style of an actual parliament and he wrote it as if",
    "start": "1089490",
    "end": "1096540"
  },
  {
    "text": "he was at actual parliament making ballot measures and it's still too hard",
    "start": "1096540",
    "end": "1101580"
  },
  {
    "text": "for most people to understand and so that's why we have wrapped and whole bunch of other things so the first",
    "start": "1101580",
    "end": "1107460"
  },
  {
    "text": "concept is just coordination is too hard for human beings to really grapple with very well there's a reason why we",
    "start": "1107460",
    "end": "1113610"
  },
  {
    "text": "struggle with it and the second problem is it's the struggle for computers as well it's actually very",
    "start": "1113610",
    "end": "1119100"
  },
  {
    "text": "resource-intensive to do coordination to get consensus for every machine you have to bring in its very chatty you have to",
    "start": "1119100",
    "end": "1127440"
  },
  {
    "text": "go back and forth with singing machines naive forms of this get very very chatted we have to connect with every",
    "start": "1127440",
    "end": "1132450"
  },
  {
    "text": "single other machine and agree on some things and it's also of course you have",
    "start": "1132450",
    "end": "1137460"
  },
  {
    "text": "the problem that the speed of light has a limit causes a limit on the amount of",
    "start": "1137460",
    "end": "1142680"
  },
  {
    "text": "information we can transfer how quickly that information can transfer and so there's only there's always going to be",
    "start": "1142680",
    "end": "1148290"
  },
  {
    "text": "some basic latency that we take in so coordination is something that we as",
    "start": "1148290",
    "end": "1154460"
  },
  {
    "text": "engineers cordoned off we make smaller instead of trying to get every time a",
    "start": "1154460",
    "end": "1159750"
  },
  {
    "text": "message comes in we don't go to every single the machine and go hey do you own this do you know you got this man you got this instead",
    "start": "1159750",
    "end": "1167430"
  },
  {
    "text": "what we do is we look at IDs and we get those systems when they come up to agree",
    "start": "1167430",
    "end": "1172500"
  },
  {
    "text": "on what i d-- ranges but they're gonna coordinate over this is why a TC d",
    "start": "1172500",
    "end": "1177779"
  },
  {
    "text": "exists why zookeeper exists why chubby over at google exists is because they're these places in which we want to cordon",
    "start": "1177779",
    "end": "1184080"
  },
  {
    "text": "off coordination where the failure modes are difficult where the chattiness",
    "start": "1184080",
    "end": "1189779"
  },
  {
    "text": "happens and make it small and as small as possible or up being too understandable and a longer that cord",
    "start": "1189779",
    "end": "1197879"
  },
  {
    "text": "owning off of problems we have a similar thing when your fancy distributed systems in here who comes up and gives",
    "start": "1197879",
    "end": "1203940"
  },
  {
    "text": "talks or whatever but for you who's got like most of the folks here i mean i've",
    "start": "1203940",
    "end": "1210029"
  },
  {
    "text": "got a database and some web apps and a bunch of systems that talk to one another just like everybody else here",
    "start": "1210029",
    "end": "1215629"
  },
  {
    "text": "the tricks that we do for distributed systems is we rely on the enormous",
    "start": "1215629",
    "end": "1224070"
  },
  {
    "text": "amount of literature for single machine systems to carry us through while we're doing distributed systems work if i met probably can fit",
    "start": "1224070",
    "end": "1232649"
  },
  {
    "text": "into memory that means you've got sixty years of research to rely on you've got 60 years of libraries that have been",
    "start": "1232649",
    "end": "1239279"
  },
  {
    "text": "built systems and tools that have been designed for you i mean if you can fit into memory you can run awk over it and",
    "start": "1239279",
    "end": "1245909"
  },
  {
    "text": "you can do all the data analytics you want in no time at all and so if we can",
    "start": "1245909",
    "end": "1253710"
  },
  {
    "text": "but it would distribute systems we've only been doing this in production for 20 ish years little bit more and the",
    "start": "1253710",
    "end": "1261269"
  },
  {
    "text": "amount of research and tools and availability for that stuff is much less and so we find is not only do we get",
    "start": "1261269",
    "end": "1267299"
  },
  {
    "text": "faster and better results by putting things into memory together because of the way cache coherence works and the way batching exists but also because we",
    "start": "1267299",
    "end": "1274619"
  },
  {
    "text": "can just shove it off to our already existing tools and so we want to find places to to put it all in a memory on",
    "start": "1274619",
    "end": "1281429"
  },
  {
    "text": "one place and it's actually a useful and good design so we don't have it spread out across the whole cluster but instead",
    "start": "1281429",
    "end": "1287669"
  },
  {
    "text": "coordinated and consolidated okay now of course we talked about some of the",
    "start": "1287669",
    "end": "1293190"
  },
  {
    "start": "1292000",
    "end": "1292000"
  },
  {
    "text": "practicalities here well the practicalities that you have to build in as you're working on the stuff is this idea of back pressure",
    "start": "1293190",
    "end": "1298590"
  },
  {
    "text": "it comes from plumbing which I really like infrastructure I do like housing advocacy and what not",
    "start": "1298590",
    "end": "1303900"
  },
  {
    "text": "because I think instructure is super important and back pressure is an idea from plumbing where you've got these",
    "start": "1303900",
    "end": "1310710"
  },
  {
    "text": "very big pipes and there's actually a very widely variable amount of water in",
    "start": "1310710",
    "end": "1316860"
  },
  {
    "text": "them at any time because of how rain works and how reservoirs work these big pipes they've got a lot of pressure and",
    "start": "1316860",
    "end": "1323670"
  },
  {
    "text": "it changes very often but at the end of the game to fill these water bottles to",
    "start": "1323670",
    "end": "1330090"
  },
  {
    "text": "cut pull water out of their faucet those are tiny little pipes that you don't want to blow out but so what do plumbers",
    "start": "1330090",
    "end": "1336540"
  },
  {
    "text": "do in order to make sure that these giant variations in water don't destroy our homes and cause like giant floods",
    "start": "1336540",
    "end": "1343170"
  },
  {
    "text": "inside well back pressure they make these systems and designs such that when water flows to huh comes in too hot too",
    "start": "1343170",
    "end": "1351030"
  },
  {
    "text": "hard into our smaller pipes and say gets pushed out when that water pressure reaches a certain level and there's",
    "start": "1351030",
    "end": "1357810"
  },
  {
    "text": "actually like systems and designs everywhere throughout our plumbing system including inside your sink",
    "start": "1357810",
    "end": "1362880"
  },
  {
    "text": "generally if you see that little hood that's actually in your sink that's like a backfill okay it's the idea that the",
    "start": "1362880",
    "end": "1369510"
  },
  {
    "text": "same metaphors that apply to software as well there's got to be reactions for when you're taking on too much load or",
    "start": "1369510",
    "end": "1375600"
  },
  {
    "text": "your systems will fall over and they will fall over in ways that are implicit and difficult to debug they will come",
    "start": "1375600",
    "end": "1382800"
  },
  {
    "text": "out as it's slow instead of it's returning errors and it's slow is much",
    "start": "1382800",
    "end": "1388500"
  },
  {
    "text": "more difficult to solve than it's returning errors you're gonna have heap fragmentation problems are gonna have garbage question problems you're going",
    "start": "1388500",
    "end": "1395070"
  },
  {
    "text": "to have just weird timeouts and places that you didn't expect all because we didn't if you don't build in back",
    "start": "1395070",
    "end": "1401580"
  },
  {
    "text": "pressure okay so that's great Jeff you've not convinced me that there's something called back pressure it sounds useful where we talk about well one",
    "start": "1401580",
    "end": "1408450"
  },
  {
    "start": "1408000",
    "end": "1408000"
  },
  {
    "text": "naive form of it is just dropping messages on the floor if a message comes in and your system is overloaded one of",
    "start": "1408450",
    "end": "1414840"
  },
  {
    "text": "the easiest things you can do is just say okay return an okay message but actually do nothing with the message",
    "start": "1414840",
    "end": "1420180"
  },
  {
    "text": "this is not the usual one but some systems actually can go bye-bye this I",
    "start": "1420180",
    "end": "1426390"
  },
  {
    "text": "would strongly recommend adding some metrics so that you know when you're doing this in case somebody gets angry",
    "start": "1426390",
    "end": "1432930"
  },
  {
    "text": "late but another of course better one is returning overload error message responses this is a bunch of systems do",
    "start": "1432930",
    "end": "1439500"
  },
  {
    "start": "1435000",
    "end": "1435000"
  },
  {
    "text": "this naturally I built this at the Twitter web server when we over went over some humble dumble number of",
    "start": "1439500",
    "end": "1445559"
  },
  {
    "text": "requests per second I knew that these systems experimentally couldn't handle",
    "start": "1445559",
    "end": "1450960"
  },
  {
    "text": "that many systems and so instead of us just getting really slow and causing timeouts and bad behavior we'd actually reject messages and we get",
    "start": "1450960",
    "end": "1457950"
  },
  {
    "text": "an alert fired saying hey you're taking a lot of messages on these one machines go figure out what's going on or make this faster overload responses are very",
    "start": "1457950",
    "end": "1465570"
  },
  {
    "text": "very common they're very very useful because clients typically can handle",
    "start": "1465570",
    "end": "1472529"
  },
  {
    "text": "overload better than a server camp clients know if they can do a retry clients know if they want to try another",
    "start": "1472529",
    "end": "1478679"
  },
  {
    "text": "machine clients know that maybe they can tell the user they're like hey this feature isn't working right now so you",
    "start": "1478679",
    "end": "1483990"
  },
  {
    "text": "want to tell you want to get the clients to do this work not the server the server is like it's got other work to do",
    "start": "1483990",
    "end": "1489240"
  },
  {
    "text": "of course it's another little backpressure thing like timeouts and exponential back-off s-- time is an",
    "start": "1489240",
    "end": "1496500"
  },
  {
    "start": "1490000",
    "end": "1490000"
  },
  {
    "text": "important as an important resource to your cluster as memory as CPU the time",
    "start": "1496500",
    "end": "1503519"
  },
  {
    "text": "of your users is valuable you want to get towards you know 100 millisecond",
    "start": "1503519",
    "end": "1508679"
  },
  {
    "text": "render responses that is basically the limit of human perception where we're able to actually visually distinguish",
    "start": "1508679",
    "end": "1514769"
  },
  {
    "text": "things at about 100 milliseconds so the closer you get 200 milliseconds the more magical and wonderful experience feels",
    "start": "1514769",
    "end": "1520500"
  },
  {
    "text": "for your users ok coming back out of back pressure let's talk about another",
    "start": "1520500",
    "end": "1526200"
  },
  {
    "text": "practicality here deploys and releases are not the same thing and you don't",
    "start": "1526200",
    "end": "1531419"
  },
  {
    "text": "want them to be the same thing this is a classic technique that was originally",
    "start": "1531419",
    "end": "1536730"
  },
  {
    "start": "1535000",
    "end": "1535000"
  },
  {
    "text": "done I think Flickr maybe talked about it way back in the day so shut up the SmugMug I guess so feature flags are an",
    "start": "1536730",
    "end": "1545070"
  },
  {
    "text": "idea from a bee testing where they gave two different UI tests two different UI",
    "start": "1545070",
    "end": "1550169"
  },
  {
    "text": "designs to users and then had them you know figure out which one they wanted and it was a feature flag of like how much percentage they would give each",
    "start": "1550169",
    "end": "1556860"
  },
  {
    "text": "design out to the user that's how I was originally created but you can actually use this as",
    "start": "1556860",
    "end": "1563210"
  },
  {
    "text": "massively powerful distributed systems tool this is actually one of the best",
    "start": "1563210",
    "end": "1568490"
  },
  {
    "text": "things that you can do is to add feature flags and add resiliency to your system how it works is like this whenever",
    "start": "1568490",
    "end": "1576800"
  },
  {
    "text": "you're merging code in you continue that you add like a little if statement and looks something like this this is the",
    "start": "1576800",
    "end": "1583790"
  },
  {
    "start": "1581000",
    "end": "1581000"
  },
  {
    "text": "one we use that Twitter is called The Cider and for each request that comes in or whatever equivalent that you've got",
    "start": "1583790",
    "end": "1592000"
  },
  {
    "text": "you would hash and take a modulus and include like the keys name the features",
    "start": "1592000",
    "end": "1597740"
  },
  {
    "text": "name or whatever to make sure that it was well distributed or whatever and just choose a code path either true or",
    "start": "1597740",
    "end": "1604370"
  },
  {
    "text": "false and that toggle was something that you could actually change a runtime from another system and we get live updated",
    "start": "1604370",
    "end": "1610130"
  },
  {
    "text": "within a minute or so and would go down we would choose to their send users down",
    "start": "1610130",
    "end": "1615410"
  },
  {
    "text": "one PAP coop app or another code path and you can do this plain for structure stuff for instance if you've got a new",
    "start": "1615410",
    "end": "1620660"
  },
  {
    "text": "storage system that you are using for users but you don't know if it's going to be able to handle all of your right",
    "start": "1620660",
    "end": "1626030"
  },
  {
    "text": "path if you can handle all the traffic you should put up a prototype and send Darkly without using the responses you",
    "start": "1626030",
    "end": "1633050"
  },
  {
    "text": "actually just duplicate the rights to your norma storage and then at some lower percentage to this other newer",
    "start": "1633050",
    "end": "1640340"
  },
  {
    "text": "storage and you actually test that out and then he do similar stuff where if you're starting to use data from a new",
    "start": "1640340",
    "end": "1646910"
  },
  {
    "text": "system and reading from it you can start you have a decider flag that decided",
    "start": "1646910",
    "end": "1652280"
  },
  {
    "text": "flags is just makes both queries and it just compares them and actually tells",
    "start": "1652280",
    "end": "1657800"
  },
  {
    "text": "you how well you're doing we actually use it regularly for every migration system we ever did a lot of support and",
    "start": "1657800",
    "end": "1662930"
  },
  {
    "text": "play on the monorail we'd pull out a user storage or a social graph storage or whatever and we would actually look",
    "start": "1662930",
    "end": "1670040"
  },
  {
    "text": "at the old system that we are had in place and the new system we would just compare the results it's a neat trick",
    "start": "1670040",
    "end": "1676160"
  },
  {
    "text": "and you can do this just for normal code paths what's great is that it adds resiliency just for normal code paths as",
    "start": "1676160",
    "end": "1682190"
  },
  {
    "text": "well where you don't have to worry about like hey we're going to a deploy we do this a lot of let's they did this a lot",
    "start": "1682190",
    "end": "1688280"
  },
  {
    "text": "of let's encrypt where we're going to do a deploy a feature that we like but in case it goes wrong we want quick way to turn it off without a",
    "start": "1688280",
    "end": "1693960"
  },
  {
    "text": "deploy they've got a great deploy system over let's encrypt it's very fast but if you're doing multiple deploys or you've",
    "start": "1693960",
    "end": "1700350"
  },
  {
    "text": "got bunches of patches going out at once you don't have to deal with the merge conflicts and unwinding that you need to",
    "start": "1700350",
    "end": "1706140"
  },
  {
    "text": "do in order to deploy new code so much easier to turn off the feature and it also means that you can ship without the",
    "start": "1706140",
    "end": "1711690"
  },
  {
    "text": "feature turned on turn it on for a little bit see if it works at all and then turn it back off and you can do",
    "start": "1711690",
    "end": "1716790"
  },
  {
    "text": "experimental designs this way this is the kind of science that you can work on getting close on time here so I'm gonna",
    "start": "1716790",
    "end": "1722970"
  },
  {
    "text": "have to move a little bit fast but I do what - what's a one thing about this if you start doing lots of feature flags",
    "start": "1722970",
    "end": "1729980"
  },
  {
    "text": "people are gonna have you're gonna have folks you may be or gonna have some reactions to these if statements there's",
    "start": "1729980",
    "end": "1737610"
  },
  {
    "text": "gonna be a lot of every piece of code should I do one thing kind of questions shouldn't this be couldn't this be",
    "start": "1737610",
    "end": "1742830"
  },
  {
    "text": "simpler and the answer is I mean you can do some things with proxy objects another you know fancy design pattern",
    "start": "1742830",
    "end": "1749460"
  },
  {
    "text": "stuff but at the end of the day these if statements they're trading local",
    "start": "1749460",
    "end": "1756630"
  },
  {
    "text": "complexity for global resiliency and global simplicity and once we start",
    "start": "1756630",
    "end": "1762870"
  },
  {
    "text": "thinking about distribute systems in that way that we can make trade-offs between local complexity here in order to get global simplicity everywhere",
    "start": "1762870",
    "end": "1769520"
  },
  {
    "text": "we're thinking in a much stronger more resilient way okay",
    "start": "1769520",
    "end": "1776570"
  },
  {
    "start": "1776000",
    "end": "1776000"
  },
  {
    "text": "this also implies that mental versions are the norm I've talked to bottom-up implicitly about migrations about new",
    "start": "1776670",
    "end": "1783450"
  },
  {
    "text": "systems about having to move data between them and that's true for everything you're gonna have multiple",
    "start": "1783450",
    "end": "1789870"
  },
  {
    "text": "versions of systems you can have multiple versions of software you're gonna multiple versions of the same software out your mental versions of the",
    "start": "1789870",
    "end": "1796050"
  },
  {
    "text": "users data in different systems and that isn't normal and it's freaky deaky it's",
    "start": "1796050",
    "end": "1802770"
  },
  {
    "text": "very stressful the first time that you realize that there is a whole nother set of failure states that you're gonna have",
    "start": "1802770",
    "end": "1808230"
  },
  {
    "text": "to worry about but that's normal this and it's okay and you're not screwing up by doing that you obviously",
    "start": "1808230",
    "end": "1815820"
  },
  {
    "text": "don't want to let it go crazy that's nutty but you are gonna have this issue this is just the basic bare bones of",
    "start": "1815820",
    "end": "1821550"
  },
  {
    "text": "doing distribute systems also very quickly they schedulers are actually totally worth it",
    "start": "1821550",
    "end": "1827200"
  },
  {
    "start": "1824000",
    "end": "1824000"
  },
  {
    "text": "if you've got more than a few people or more than a few systems running I actually use it for my stuff just",
    "start": "1827200",
    "end": "1833920"
  },
  {
    "text": "because I never wanted to touch chef or puppet or ansible ever again so you just",
    "start": "1833920",
    "end": "1838990"
  },
  {
    "text": "like some Google container engine stuff whatever it's actually very useful because they give you a whole set of",
    "start": "1838990",
    "end": "1844960"
  },
  {
    "text": "deploy tools and a way of thinking about your systems that get you more efficiency I mean I mean like we have a",
    "start": "1844960",
    "end": "1851320"
  },
  {
    "text": "bunch of kubernetes talks at this conference so I don't wanna give you the pitch for kubernetes but there's a",
    "start": "1851320",
    "end": "1856450"
  },
  {
    "text": "reason why these things exist and why they're so nice like the ploys get easier they get standardized you start",
    "start": "1856450",
    "end": "1863830"
  },
  {
    "text": "thinking about these things as building blocks instead of as Platonic ideal machines that are running one service",
    "start": "1863830",
    "end": "1870040"
  },
  {
    "text": "only and you start getting in a you you work up a level of abstraction okay",
    "start": "1870040",
    "end": "1876130"
  },
  {
    "text": "this was actually like one of the reasons why when we got when I was on I can't talk man let me just say there was",
    "start": "1876130",
    "end": "1882850"
  },
  {
    "text": "a very large amount of anti-spam that we killed off and I directly associate that with our ability to play on bezos in our",
    "start": "1882850",
    "end": "1888280"
  },
  {
    "text": "first quarter of existence on the anti-spam team spam used to be a huge embarrassing problem for Twitter and it",
    "start": "1888280",
    "end": "1893770"
  },
  {
    "text": "very quickly became not that big of a deal because this team was very effective and had very quick turnarounds that we did not previously able to do we",
    "start": "1893770",
    "end": "1900309"
  },
  {
    "text": "could pull out new systems we could put on new designs it was great oh yeah now I'm gonna do really quick since I got a",
    "start": "1900309",
    "end": "1906429"
  },
  {
    "text": "couple of minutes left here I'm gonna do some thought leadership I'm so much is",
    "start": "1906429",
    "end": "1912340"
  },
  {
    "text": "really hard to get three different smart quotes all at once that's actually like I would recommend if you're on OS X give",
    "start": "1912340",
    "end": "1918880"
  },
  {
    "text": "that a shot you're gonna it takes a trick okay the first thing is that I",
    "start": "1918880",
    "end": "1924540"
  },
  {
    "start": "1924000",
    "end": "1924000"
  },
  {
    "text": "never ever ever ever ever want to hear another software engineer ever say that something is political and therefore bad",
    "start": "1924540",
    "end": "1932820"
  },
  {
    "text": "collaboration is politics if you wanna work in distribute systems that means that we're tending to work with more",
    "start": "1932820",
    "end": "1938260"
  },
  {
    "text": "people we're tending to work with more teams and because the web exists we're going to work with organizations outside",
    "start": "1938260",
    "end": "1943840"
  },
  {
    "text": "of ourselves we're going to use other services we're gonna use other people's code and these are people problems first",
    "start": "1943840",
    "end": "1950620"
  },
  {
    "text": "like our technical stuff the stuff that I talked about for the majority of this is a small problem",
    "start": "1950620",
    "end": "1956540"
  },
  {
    "text": "in a larger social space the kinds of stuff collaboration getting people to",
    "start": "1956540",
    "end": "1961760"
  },
  {
    "text": "migrate to your system people to think about your system to like your system these are like social issues they",
    "start": "1961760",
    "end": "1968480"
  },
  {
    "text": "require feedback loops between not just computers but humans and if we're",
    "start": "1968480",
    "end": "1973610"
  },
  {
    "text": "willing to talk about how communication works for systems and machines we should absolutely be able to talk about that we",
    "start": "1973610",
    "end": "1979250"
  },
  {
    "text": "talk about humans oshi engage just as deeply in that stuff it's real also I'm",
    "start": "1979250",
    "end": "1988010"
  },
  {
    "start": "1988000",
    "end": "1988000"
  },
  {
    "text": "gonna do okay one last I'm gonna more lies that you we don't talk a lot about",
    "start": "1988010",
    "end": "1994370"
  },
  {
    "text": "morality and ethics at conference talks unless you're doing specific stuff for it and I am going to give you some we're",
    "start": "1994370",
    "end": "2001660"
  },
  {
    "text": "gonna do it because it's important enough and because when I gave this talk in 2013 a version of this talk Tory 13 I",
    "start": "2001660",
    "end": "2007330"
  },
  {
    "text": "was also in a I was literally working in response to the Snowden releases trying to make it so that large organizations",
    "start": "2007330",
    "end": "2014050"
  },
  {
    "text": "couldn't scoop up our users data get a key and then go backwards in time and",
    "start": "2014050",
    "end": "2019440"
  },
  {
    "text": "read all of our users data because what organizations are doing you can agree",
    "start": "2019440",
    "end": "2025030"
  },
  {
    "text": "like there are certain nation states that we know explicitly are doing it which means a bunch more or doing it we",
    "start": "2025030",
    "end": "2030100"
  },
  {
    "text": "have organizations that are literally scooping up as much of the Internet traffic as they can war Internet traffic",
    "start": "2030100",
    "end": "2036700"
  },
  {
    "text": "they've got machines and various eyes PS this is not tempura batter II this has been known about for minimum five years",
    "start": "2036700",
    "end": "2042340"
  },
  {
    "text": "this is well documented multiple orders are doing this they're scooping up all",
    "start": "2042340",
    "end": "2047530"
  },
  {
    "text": "of the Internet traffic as much as they can encrypted unencrypted they don't care",
    "start": "2047530",
    "end": "2052570"
  },
  {
    "text": "they prefer the unencrypted because then they can very easily go backwards in time and see every whisper between loved",
    "start": "2052570",
    "end": "2060790"
  },
  {
    "text": "ones and friends they can use this data to query backwards and see an entire",
    "start": "2060790",
    "end": "2067450"
  },
  {
    "text": "history of the things that we whispered to people that we love and I don't like",
    "start": "2067450",
    "end": "2072820"
  },
  {
    "text": "that I don't think you like that either and so we've got to build systems that",
    "start": "2072820",
    "end": "2079889"
  },
  {
    "text": "are resilient to that there's a motor necessity for us to encrypt all of our data is it more than cecily for us to",
    "start": "2079890",
    "end": "2087520"
  },
  {
    "start": "2081000",
    "end": "2081000"
  },
  {
    "text": "encrypt our users data to build system that think about these things to build out Indian encryption to build up at the",
    "start": "2087520",
    "end": "2093440"
  },
  {
    "text": "very least HTTP is a default it's also a moral necessity for us to minimize the",
    "start": "2093440",
    "end": "2100190"
  },
  {
    "start": "2098000",
    "end": "2098000"
  },
  {
    "text": "amount of data that we're keeping there's a reason why the GD P R is",
    "start": "2100190",
    "end": "2105800"
  },
  {
    "text": "happening in Europe you may be familiar with it it's a new privacy regulation imposed by the European Union a lot of",
    "start": "2105800",
    "end": "2111260"
  },
  {
    "text": "people are stressing out about it it's kind of difficult there are certainly problems some stuff that sucks about it",
    "start": "2111260",
    "end": "2118360"
  },
  {
    "text": "one of the things that why was created the reason for its existence the reason",
    "start": "2118360",
    "end": "2123950"
  },
  {
    "text": "why the EU goes so hard on privacy is because the kinds of data that our system collects or that is the kind of",
    "start": "2123950",
    "end": "2131780"
  },
  {
    "text": "data that literal Nazis used in rivet war to to track and kill people and we",
    "start": "2131780",
    "end": "2139640"
  },
  {
    "text": "have organizations that are trying to get access to this data today and so we",
    "start": "2139640",
    "end": "2144920"
  },
  {
    "text": "are at a point now where is our duty as software engineers as implementers to",
    "start": "2144920",
    "end": "2150700"
  },
  {
    "text": "take on this new task to do IP hashing if we need the IP hashing to do to drop",
    "start": "2150700",
    "end": "2157580"
  },
  {
    "text": "IP addresses if we don't care about it to remove as much user data as we can if we're not going to use it",
    "start": "2157580",
    "end": "2163150"
  },
  {
    "text": "these are moral requirements and we cannot ignore them anymore okay that's",
    "start": "2163150",
    "end": "2170690"
  },
  {
    "text": "it and I'm gonna take questions now I was",
    "start": "2170690",
    "end": "2180200"
  },
  {
    "text": "wondering how you go about especially for encryption stuff about your social",
    "start": "2180200",
    "end": "2185990"
  },
  {
    "text": "aspect here how do you go about avoiding people scraping and using it for yeah so",
    "start": "2185990",
    "end": "2194930"
  },
  {
    "text": "there are a couple of tricks that come along I'm gonna grab some water here",
    "start": "2194930",
    "end": "2200050"
  },
  {
    "text": "there's some implicit stuff you've got avoid using auto air committing IDs in",
    "start": "2200050",
    "end": "2208100"
  },
  {
    "text": "order to for user data or whatever because it's very easy to accidentally start authorizing every user or some",
    "start": "2208100",
    "end": "2215240"
  },
  {
    "text": "subset of users if they just can guess an ID space they can guess your ID space",
    "start": "2215240",
    "end": "2220550"
  },
  {
    "text": "you're screwed so try to make that like a fairly random unique idea do some hashing or whatever if you need to slack",
    "start": "2220550",
    "end": "2229320"
  },
  {
    "text": "and folks a lot of folks do this stuff the other one is you're going to you're",
    "start": "2229320",
    "end": "2238830"
  },
  {
    "text": "gonna have to build out there's of course rate-limiting that you can build in a world in which I'm talking about",
    "start": "2238830",
    "end": "2245970"
  },
  {
    "text": "data minimization you can cordoned off the things that need to know about IP addresses you can also do this thing",
    "start": "2245970",
    "end": "2251490"
  },
  {
    "text": "called IP hashing unfortunately can't give you a design right now but I I have one that I could tell you about how to hash ip's a couple of folks have done it",
    "start": "2251490",
    "end": "2258480"
  },
  {
    "text": "actually quite a few folks have done it but nobody's written it down in a public place which is very strange so you could",
    "start": "2258480",
    "end": "2267210"
  },
  {
    "text": "do IP address hash you can do rate limiting of course folks do a lot of that per user strongly recommend like",
    "start": "2267210",
    "end": "2273540"
  },
  {
    "text": "most of your stuff you're scraping that's being scraped is I don't know the particulars of your system but I assume",
    "start": "2273540",
    "end": "2280110"
  },
  {
    "text": "most somewhere logged in so I would recommend putting rate limiting and associating with the authentication stuff usually it's easier if your",
    "start": "2280110",
    "end": "2287990"
  },
  {
    "text": "authentication system lives outside of your main app I think you start doing really interesting things when it's not",
    "start": "2287990",
    "end": "2293970"
  },
  {
    "text": "tied in directly and you actually pass like instead of your app doing all of",
    "start": "2293970",
    "end": "2299220"
  },
  {
    "text": "the authentication work and reading cookies and whatnot you actually have a layer in front of it that sends back a user ID header after doing the cookie",
    "start": "2299220",
    "end": "2305910"
  },
  {
    "text": "work and you can usually do rate-limiting much easier there that kind of system but it's hard it's it depends on the system yeah yeah hey this",
    "start": "2305910",
    "end": "2316410"
  },
  {
    "text": "thing do you use to get visibility into even driven architectures I'm so sorry",
    "start": "2316410",
    "end": "2323160"
  },
  {
    "text": "the echo is really bad up here what kind of tracing would you use to",
    "start": "2323160",
    "end": "2328730"
  },
  {
    "text": "get visibility into even driven architectures event-driven architectures",
    "start": "2328730",
    "end": "2337170"
  },
  {
    "text": "how what kind of tracing would you use to get visibility yeah so typically what most folks do is similar in the go",
    "start": "2337170",
    "end": "2343830"
  },
  {
    "text": "programming language they have this idea of a context object and you pass it around this actually really really",
    "start": "2343830",
    "end": "2349080"
  },
  {
    "text": "common Twitter we had finagle had it built into like it's crazy functional whatever stuff and it was",
    "start": "2349080",
    "end": "2355810"
  },
  {
    "text": "actually like a implicit parameter basically but you actually pass around a context object and you can pull a new",
    "start": "2355810",
    "end": "2361630"
  },
  {
    "text": "associate race ID with it and it does sound crazy because you're like wouldn't that contact an object have to go everywhere and the answer is yes any",
    "start": "2361630",
    "end": "2368020"
  },
  {
    "text": "wonder that does Network IO is where a context object with some trace data has to go and it's where those trade-offs",
    "start": "2368020",
    "end": "2374020"
  },
  {
    "text": "like I mentioned if statements you take on some vocal complexity in order to add global resiliency it sucks but it's a",
    "start": "2374020",
    "end": "2381100"
  },
  {
    "text": "thing so one of our products has a little bit of an issue with spammers",
    "start": "2381100",
    "end": "2386290"
  },
  {
    "text": "right now and they're actually working on an initiative they called the spammer hammer yeah but I was wondering what",
    "start": "2386290",
    "end": "2392560"
  },
  {
    "text": "kind of like tools or techniques did you find most effective with identifying new",
    "start": "2392560",
    "end": "2397870"
  },
  {
    "text": "systems yeah yeah okay so I can give you like some quick evolutionary history of the anti-spam that I've worked on the",
    "start": "2397870",
    "end": "2408580"
  },
  {
    "text": "very first thing one of the things that you can do not the very first thing but it's got to be number two number three",
    "start": "2408580",
    "end": "2414160"
  },
  {
    "text": "is I would strongly recommend you make a shopping for a graph and that is for you and your team to be looking at it's got",
    "start": "2414160",
    "end": "2420910"
  },
  {
    "text": "to be a chart of just how many things you prevented going out and how many users you suspended and it feels really",
    "start": "2420910",
    "end": "2426820"
  },
  {
    "text": "good you will feel it feels very nice to ruin somebody's day who's a bad person",
    "start": "2426820",
    "end": "2435300"
  },
  {
    "text": "the next thing I would have to say is you of course we're never going to solve spam",
    "start": "2435600",
    "end": "2442030"
  },
  {
    "text": "overall we actually need what you're going to be doing is you're going to be making spam on economical you don't have",
    "start": "2442030",
    "end": "2447490"
  },
  {
    "text": "to get rid of all of it you just have to make it too difficult in too expensive for them to want to do it there's",
    "start": "2447490",
    "end": "2452950"
  },
  {
    "text": "actually also true for harassment and for like abuse on your systems you have",
    "start": "2452950",
    "end": "2458950"
  },
  {
    "text": "the same year you can't always get rid of all of it but we can make it undesirable to do so okay the first",
    "start": "2458950",
    "end": "2466390"
  },
  {
    "text": "thing you do is you don't go for a melon don't go for machine learning you're not there yet what you can start with is",
    "start": "2466390",
    "end": "2472120"
  },
  {
    "text": "very simple heuristics of like how many locks is this user getting from people",
    "start": "2472120",
    "end": "2478549"
  },
  {
    "text": "that they like they follow or they act reply and you actually just have some like barebone numbers of like a user",
    "start": "2478549",
    "end": "2486019"
  },
  {
    "text": "over this time period whose beginning this many blocks and it said this many tweets can apply to somebody else and",
    "start": "2486019",
    "end": "2491960"
  },
  {
    "text": "this many blocks from those people that it replied usually just set some dumb heuristic numbers and you start there",
    "start": "2491960",
    "end": "2498319"
  },
  {
    "text": "and what will happen is if your spammers are smart but they're not yet probably if you haven't don't have any anti-spam",
    "start": "2498319",
    "end": "2503809"
  },
  {
    "text": "solutions yet if they're not smart yet they might just give up a few of them will very quickly figure out the",
    "start": "2503809",
    "end": "2512059"
  },
  {
    "text": "outlines of your heuristics of your counts and they will slide underneath it",
    "start": "2512059",
    "end": "2518710"
  },
  {
    "text": "but you can do like most of the work with that those simple systems and then",
    "start": "2518710",
    "end": "2525019"
  },
  {
    "text": "what you can do is you start because you don't going to work on ml because ml was a trickier problem but you can use that",
    "start": "2525019",
    "end": "2532579"
  },
  {
    "text": "data to start building out ml and you can also do things you need to build",
    "start": "2532579",
    "end": "2538130"
  },
  {
    "text": "feedback loops it's not about to positive and false positives so all right this is actually a failure mode of",
    "start": "2538130",
    "end": "2544700"
  },
  {
    "text": "a lot of social networks where they have ways to say somebody as spammy well they don't have a way for your folks to say",
    "start": "2544700",
    "end": "2550519"
  },
  {
    "text": "that they're not spammy that's like why Facebook has this other inbox it's why Gmail has a spam folder you need",
    "start": "2550519",
    "end": "2556970"
  },
  {
    "text": "feedback loops in both directions and from the feedback loops plus your heuristic systems plus some advice from",
    "start": "2556970",
    "end": "2563930"
  },
  {
    "text": "your trust and safety folks the people who are on the ground like handling suspension and whatnot you can start",
    "start": "2563930",
    "end": "2569989"
  },
  {
    "text": "building out a real robust automated solution also every company I know has a",
    "start": "2569989",
    "end": "2578900"
  },
  {
    "text": "system in which they can apply reg X's to messages so that agents can plug in",
    "start": "2578900",
    "end": "2584059"
  },
  {
    "text": "reg X's and just knock people out everybody builds that it's super powerful they always have an incident",
    "start": "2584059",
    "end": "2590329"
  },
  {
    "text": "where the regex was wrong it always happens but you can build in safety nets",
    "start": "2590329",
    "end": "2596539"
  },
  {
    "text": "around that stuff and that's a very common first system if you're like early days I was talking with heuristics and",
    "start": "2596539",
    "end": "2601880"
  },
  {
    "text": "reg X's and stuff is like not the worst thing in the world and it can be asynchronous it doesn't have to be in the right path you can let the message",
    "start": "2601880",
    "end": "2608180"
  },
  {
    "text": "come in and then remove it and then build up from there it's a cup we could talk afterwards sorry I have like apparently a million",
    "start": "2608180",
    "end": "2613770"
  },
  {
    "text": "opinions about this where you talk about amore there's a there's a bunch of ideas yeah anybody else yeah sorry so uh you just",
    "start": "2613770",
    "end": "2622770"
  },
  {
    "text": "said that if statements would add local complexity but they would have global",
    "start": "2622770",
    "end": "2628340"
  },
  {
    "text": "simplicity correct yeah called resiliency and then also it's often global simplicity yeah could you explain",
    "start": "2628340",
    "end": "2634020"
  },
  {
    "text": "that how would that a statement statement yeah yeah okay so what I can",
    "start": "2634020",
    "end": "2639210"
  },
  {
    "text": "more easily address the global resiliency side of this the global simplicity you're gonna have to work",
    "start": "2639210",
    "end": "2645090"
  },
  {
    "text": "we're gonna have to walk down a garden path the global resiliency comes because",
    "start": "2645090",
    "end": "2650940"
  },
  {
    "text": "you can more easily more quickly fix bugs by turning off features and you can",
    "start": "2650940",
    "end": "2657480"
  },
  {
    "text": "also deploy and bring back code without having to do the crazy merge commit solution instead and then do a deploy",
    "start": "2657480",
    "end": "2664440"
  },
  {
    "text": "and get it through whatever deploy systems you've got you can find problems easier it's also easier for you to ship",
    "start": "2664440",
    "end": "2670050"
  },
  {
    "text": "code that maybe is less good but you can experimentally see if it works and see what kind of problems it's going to have",
    "start": "2670050",
    "end": "2675780"
  },
  {
    "text": "that kind of like adds up over time to being more resilient and when I say",
    "start": "2675780",
    "end": "2680880"
  },
  {
    "text": "global simplicity I mean there are going to be views when I'm talk about simple",
    "start": "2680880",
    "end": "2687660"
  },
  {
    "text": "is standing the simplicity of not having to do those merge commits not having to do those get reverts and then fix up the",
    "start": "2687660",
    "end": "2692850"
  },
  {
    "text": "code not having to think about okay we did all this work and we what we didn't",
    "start": "2692850",
    "end": "2698910"
  },
  {
    "text": "make it back to compatible because we had all these if statements turned on because we didn't have these because we didn't think about it in that way that",
    "start": "2698910",
    "end": "2705540"
  },
  {
    "text": "you're going to start having to think about when you add these if statements you start imagining backwards",
    "start": "2705540",
    "end": "2710610"
  },
  {
    "text": "compatibility built in and when you start doing that you start having to worry about things like ok if I roll",
    "start": "2710610",
    "end": "2716190"
  },
  {
    "text": "back this patch that means after also roll back these like schema changes or these other data changes that we made to",
    "start": "2716190",
    "end": "2721860"
  },
  {
    "text": "these other systems and that is complicated and it's difficult and it requires deep introspective thought",
    "start": "2721860",
    "end": "2727680"
  },
  {
    "text": "every time you do it when it's just this dumb bug when for every little dumb bug you deploy that you have out instead of",
    "start": "2727680",
    "end": "2734370"
  },
  {
    "text": "building out these feature flags if you think about these things with backwards compatibility and feature flags",
    "start": "2734370",
    "end": "2739640"
  },
  {
    "text": "initially and up front you you have you get better responses",
    "start": "2739640",
    "end": "2744960"
  },
  {
    "text": "and you can think about these systems in it and a quick way you can also hand this off to sres or ops people or whatever you call them",
    "start": "2744960",
    "end": "2750930"
  },
  {
    "text": "where they can go oh we just deployed these number of things and we have these toggles for it or we're having a problem",
    "start": "2750930",
    "end": "2757080"
  },
  {
    "text": "with these systems and we know that if we the new system start going flaky like CUDA fall or whatever we can decider it",
    "start": "2757080",
    "end": "2763680"
  },
  {
    "text": "off and we can we can turn the feature flag off and we actually have like a it's a much simpler interface instead of having to deal with every problem up",
    "start": "2763680",
    "end": "2769830"
  },
  {
    "text": "front that's kind of what I'm getting at I guess that makes sense all right that",
    "start": "2769830",
    "end": "2775350"
  },
  {
    "text": "was amazing and give it up one more time for Jeff [Applause]",
    "start": "2775350",
    "end": "2783729"
  }
]