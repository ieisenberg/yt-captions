[
  {
    "text": "[Music] so yeah I'll talk I'm going to talk about infrastructure as code I'll give a little bit of background on myself I'll",
    "start": "6990",
    "end": "14960"
  },
  {
    "text": "wait till you finish taking that picture there you okay um a little bit of background on myself and and how I I",
    "start": "14960",
    "end": "20519"
  },
  {
    "text": "came about to write this book so I've been working in um uh it and across kind",
    "start": "20519",
    "end": "27480"
  },
  {
    "text": "of development and and uh syst systems Administration for um better part of 20",
    "start": "27480",
    "end": "33600"
  },
  {
    "text": "years now um and it was it used to be a really weird and unusual thing to to work across those right and not kind of",
    "start": "33600",
    "end": "40120"
  },
  {
    "text": "pick which one you want them to be but um fortunately it's now become a little bit more acceptable with this devops",
    "start": "40120",
    "end": "45440"
  },
  {
    "text": "thing um but uh even before that I was quite into to automating things and",
    "start": "45440",
    "end": "50680"
  },
  {
    "text": "using scripts and and and those kind of development mindset stuff towards towards infrastructure and",
    "start": "50680",
    "end": "57320"
  },
  {
    "text": "um over the years so you know devops came up in devops as this thing of being uh about kind of culture and uh you know",
    "start": "57320",
    "end": "64878"
  },
  {
    "text": "learning and and um you know measurement and all these kind of great things the kind of cams or CL clams or colums or",
    "start": "64879",
    "end": "71000"
  },
  {
    "text": "however you want to kind of put it and automation being one of the kind of cornerstones of that and interestingly automation is um it's what a lot of",
    "start": "71000",
    "end": "78200"
  },
  {
    "text": "people think of when they think of devops even though the other stuff is equally and and in many ways more important and harder to do um but I",
    "start": "78200",
    "end": "85560"
  },
  {
    "text": "always found there wasn't much out there or there's not much out there kind of in an organized way to um to pull it together and to explain to",
    "start": "85560",
    "end": "92240"
  },
  {
    "text": "people how to do it so I joined thought Works about six years ago and what I do there is I I come in with teams where",
    "start": "92240",
    "end": "99520"
  },
  {
    "text": "we're helping organizations to deliver software and and work on kind of better ways of of delivering software agile and",
    "start": "99520",
    "end": "106719"
  },
  {
    "text": "continuous delivery and these kind of things and uh my role in those teams was to work with the kind of the Ops folks",
    "start": "106719",
    "end": "113680"
  },
  {
    "text": "the infrastructure people whoever it is that we needed to help us get environments and then help us to make",
    "start": "113680",
    "end": "119159"
  },
  {
    "text": "sure that if we want do continuous delivery how do we make sure our environments are consistent from the full path to production and in working",
    "start": "119159",
    "end": "126520"
  },
  {
    "text": "with these teams I found that um people were adopting tools or adopting automation tools like chef and puppet um",
    "start": "126520",
    "end": "133200"
  },
  {
    "text": "virtualization and then in now increasingly Cloud but they weren't really using them they weren't getting the most effect out of them they were",
    "start": "133200",
    "end": "139360"
  },
  {
    "text": "kind of applying the the same ways of working that they had with physical infrastructure to using these tools and",
    "start": "139360",
    "end": "145680"
  },
  {
    "text": "it felt like they were slowing them down so I kept waiting for one of the the kind of big experts in in devops one of",
    "start": "145680",
    "end": "151959"
  },
  {
    "text": "the kind of big name folks to come out and with a book that I could give to people and um I kept waiting and waiting and finally I decided to give it too and",
    "start": "151959",
    "end": "158239"
  },
  {
    "text": "I talked to the folks at O'Reilly and um here it is so this is kind of an encapsulation of patterns and ideas and",
    "start": "158239",
    "end": "164519"
  },
  {
    "text": "stuff around how to do this beyond the tools how to actually make use of the",
    "start": "164519",
    "end": "169959"
  },
  {
    "text": "tools so I guess I put this in context for yourself think about in your own",
    "start": "169959",
    "end": "175159"
  },
  {
    "text": "organization um how long does it take to do some of these typical tasks when I talk about about doing something like",
    "start": "175159",
    "end": "180480"
  },
  {
    "text": "provisioning a new server for example think about from the point of view of somebody who needs to use that server and and somebody from an application",
    "start": "180480",
    "end": "186440"
  },
  {
    "text": "team say development team or whatnot who says we need to you know get a new server up that we can we can start",
    "start": "186440",
    "end": "192000"
  },
  {
    "text": "working on it particularly if it's more kind of production or serious not just a toy server um in your organization um",
    "start": "192000",
    "end": "199000"
  },
  {
    "text": "how many folks here would doing that be uh on the order of say an hour or",
    "start": "199000",
    "end": "204120"
  },
  {
    "text": "less Fair number of hands that's pretty good how many would it be on the order of like a day or two and some number of",
    "start": "204120",
    "end": "209519"
  },
  {
    "text": "of days less how many how many would it be like weeks before you can get get",
    "start": "209519",
    "end": "216680"
  },
  {
    "text": "something you can really use okay that's a fair number and fairly common right um",
    "start": "216680",
    "end": "222799"
  },
  {
    "text": "so find that organizations are adopting Cloud now when we talk about Cloud",
    "start": "222799",
    "end": "228040"
  },
  {
    "text": "there's okay there's public cloud like AWS and and Amazon and those kind of things and and uh sorry and Google zero",
    "start": "228040",
    "end": "234480"
  },
  {
    "text": "and so on there's also the things around it there's things like um containers and and again the automation software so",
    "start": "234480",
    "end": "240640"
  },
  {
    "text": "companies are really pushing to and starting to adopt this more and more and why is it it really is about that that",
    "start": "240640",
    "end": "246400"
  },
  {
    "text": "thing of speed of how can we get those times down um and these things helped",
    "start": "246400",
    "end": "251519"
  },
  {
    "text": "because they remove the technical barriers to making a change so when I started out when I was doing systems Administration stuff um if somebody",
    "start": "251519",
    "end": "257600"
  },
  {
    "text": "asked me for a server it would mean ordering Hardware maybe different hard bits of Hardware from different vendors",
    "start": "257600",
    "end": "263280"
  },
  {
    "text": "waiting for it to come in assembling it taking it down to the data center putting it into a rack cabling it up installing OS all those kind of things",
    "start": "263280",
    "end": "270080"
  },
  {
    "text": "uh and that took on the order of weeks right and so the process that we put around that was on the order of weeks if",
    "start": "270080",
    "end": "276160"
  },
  {
    "text": "you got it wrong if you did all that work and then you found out actually um we didn't kind of specify quite enough",
    "start": "276160",
    "end": "281400"
  },
  {
    "text": "we need more RAM or we need some faster hard drives or what have you um that had a pretty high impact right because that was going to be a few weeks more and",
    "start": "281400",
    "end": "287960"
  },
  {
    "text": "some money more um to be able to to to correct that error so you would spend a",
    "start": "287960",
    "end": "294039"
  },
  {
    "text": "lot more time up front making sure you got it right um but with cloud in these",
    "start": "294039",
    "end": "299960"
  },
  {
    "text": "kind of tools the the the time to do that is is just minutes right you can you can click a button run a script whatever and get get a new server or",
    "start": "299960",
    "end": "306120"
  },
  {
    "text": "make tweaks to the server if it wasn't quite right the first time um so yeah that's all great but the",
    "start": "306120",
    "end": "313639"
  },
  {
    "text": "problem is especially as we get into um this",
    "start": "313639",
    "end": "319160"
  },
  {
    "text": "being used on more serious things so on on on projects that I worked on for you know up until maybe a year or two ago",
    "start": "319160",
    "end": "325600"
  },
  {
    "text": "they tended to be more kind of pilot projects or they were kind of outside of the mainstream so they were somebody in",
    "start": "325600",
    "end": "330919"
  },
  {
    "text": "an organization especially the bigger companies who would be uh that have some commercial things something they wanted to get to Market quickly and try out and",
    "start": "330919",
    "end": "337280"
  },
  {
    "text": "so they would say in order to do that we need to bypass our existing it department so we're going to spin up a new project in the cloud and and and",
    "start": "337280",
    "end": "342319"
  },
  {
    "text": "kind of leave that leave that behind because the process that they they insist on is just too much it takes too long to get things",
    "start": "342319",
    "end": "347840"
  },
  {
    "text": "done but now things are kind of moving to a point where cloud is coming out of that kind of Shadow it world and",
    "start": "347840",
    "end": "353840"
  },
  {
    "text": "becoming mainstream organizations are finding that either the stuff they've built on these kind of pilot projects and test projects have become important",
    "start": "353840",
    "end": "359919"
  },
  {
    "text": "enough that they need to take them more seriously um and also the rest of the organization is saying hey we you know",
    "start": "359919",
    "end": "365400"
  },
  {
    "text": "we want to do this as well so the it organizations are kind of have moved Beyond fighting cloud and saying Cloud",
    "start": "365400",
    "end": "371520"
  },
  {
    "text": "isn't something that you can do for serious stuff it's just toys and startups it's now become something that everybody's realizing we have to figure",
    "start": "371520",
    "end": "377599"
  },
  {
    "text": "out how to use it and how to get this speed but the pitfall is around the the risks and stuff so if we've lowered the",
    "start": "377599",
    "end": "383400"
  },
  {
    "text": "technical barriers are making a change um what about uh you know we still have to think about security we still have to",
    "start": "383400",
    "end": "389680"
  },
  {
    "text": "think about stability and and resilience and all these kind of things operational qualities non-functional",
    "start": "389680",
    "end": "396919"
  },
  {
    "text": "requirements and the tools by themselves don't just if you just kind of use them in the way that we've been using them",
    "start": "397120",
    "end": "402160"
  },
  {
    "text": "they don't kind of help you with that necessarily so the kind of mindset that we've had I think is that you have to",
    "start": "402160",
    "end": "408360"
  },
  {
    "text": "choose between either doing things very quickly and and just kind of like don't worry about rules don't worry about",
    "start": "408360",
    "end": "413560"
  },
  {
    "text": "doing it right just get something up quickly and and you know damn the consequences or you have to do things",
    "start": "413560",
    "end": "418759"
  },
  {
    "text": "very slowly and and properly and carefully and that you know you're either going to do things quick or you're going to do it um uh you know if",
    "start": "418759",
    "end": "425560"
  },
  {
    "text": "you don't do it quick you're not going you either have to choose between doing it quick or doing it right basically and",
    "start": "425560",
    "end": "431039"
  },
  {
    "text": "that's a false dichotomy so how many folks are aware of the state of the devops report um Fair number Fair number",
    "start": "431039",
    "end": "439080"
  },
  {
    "text": "um so this is a report that the the folks at puppet and some other organizations got together and they do every year and they do research on",
    "start": "439080",
    "end": "445960"
  },
  {
    "text": "different organizations and how effective um they are at at it really and it's interesting the correlations",
    "start": "445960",
    "end": "451919"
  },
  {
    "text": "they found so they found that as opposed to finding that the organizations which are most effective and have the most",
    "start": "451919",
    "end": "456960"
  },
  {
    "text": "kind of resilience and the most success at at at doing releases being the ones that take their time and have have",
    "start": "456960",
    "end": "463479"
  },
  {
    "text": "longer release Cycles it's actually the most effective organizations have faster release Cycles they release more",
    "start": "463479",
    "end": "468560"
  },
  {
    "text": "frequently and they have fewer failures when they release and they spend their their staff",
    "start": "468560",
    "end": "474000"
  },
  {
    "text": "spend less time remediating errors and fixing things and they also tend to be commercially more successful",
    "start": "474000",
    "end": "479800"
  },
  {
    "text": "and while that might be counterintuitive at first it kind of makes sense that if",
    "start": "479800",
    "end": "485199"
  },
  {
    "text": "you're um the more often you do releases the better you're going to get at it and the the more you have to to um kind of",
    "start": "485199",
    "end": "493599"
  },
  {
    "text": "invest in the tooling um and the better your processes have to be to be able to make changes very quickly without",
    "start": "493599",
    "end": "500560"
  },
  {
    "text": "failure so that kind of makes sense from that perspective and I think it also makes sense from the perspective of",
    "start": "500560",
    "end": "506800"
  },
  {
    "text": "quality it's kind of like a broken windows things if you are looking at your systems and you find that uh here's",
    "start": "506800",
    "end": "513518"
  },
  {
    "text": "something that's kind of wrong with the system um and maybe it's not breaking something at the moment but it really ought to be fixed well if it's going to",
    "start": "513519",
    "end": "520279"
  },
  {
    "text": "take you weeks or months to get that fixed and lots of conversations and and documents and explaining to people justifying and all these kind of things",
    "start": "520279",
    "end": "527399"
  },
  {
    "text": "you're not going to do it right you're going to put it on the list of known issues and hope that we get to it at some point hope that somebody happens to fix it when they run across it whereas",
    "start": "527399",
    "end": "534839"
  },
  {
    "text": "if you can fix that thing um within minutes or even within just a couple ofs hours if it's a very low effort thing to",
    "start": "534839",
    "end": "541680"
  },
  {
    "text": "do to fix and improve the quality of your system you'll do it more as a as a habit and so it raises that kind of bar",
    "start": "541680",
    "end": "548800"
  },
  {
    "text": "thing across the organization to to keep technical debt down so what we're after is a way to be",
    "start": "548800",
    "end": "556440"
  },
  {
    "text": "able to make changes rapidly and frequently as well as making them responsibly and safely and reliably we",
    "start": "556440",
    "end": "562839"
  },
  {
    "text": "want that that uh the change process to be something we can do easily so obviously automation the",
    "start": "562839",
    "end": "569399"
  },
  {
    "text": "tooling helps with this stuff but but but how does it do it well first let's look at some of the pitfalls certainly the things that I fell into um when I",
    "start": "569399",
    "end": "575800"
  },
  {
    "text": "was first doing Automation and using tools like puppet and Chef so so one thing was when I first got",
    "start": "575800",
    "end": "580839"
  },
  {
    "text": "virtualization servers um it was really great in that when somebody came to me and asked for a server I didn't have",
    "start": "580839",
    "end": "586240"
  },
  {
    "text": "that oh it's going to take me a couple of weeks and I got to you know order stuff take it down to the data center now I could just click some some buttons",
    "start": "586240",
    "end": "593160"
  },
  {
    "text": "um or run a script on my VMware server and spin up a new a new server instance and that felt really good to be able to",
    "start": "593160",
    "end": "598920"
  },
  {
    "text": "help people that quickly but I ended up with hundreds of servers and they all ended up being a little bit different so",
    "start": "598920",
    "end": "605440"
  },
  {
    "text": "we might say um a couple of people ask me for some Java application servers with Java installed on it fine I I take",
    "start": "605440",
    "end": "611279"
  },
  {
    "text": "a a single starting image and create it and so they're exactly the same and then",
    "start": "611279",
    "end": "616560"
  },
  {
    "text": "um somebody comes along say oh we got the problem this problem on one of the servers and so we go and we look at it and we we we fix it by making",
    "start": "616560",
    "end": "622839"
  },
  {
    "text": "configuration change to that server now it's a little bit different from the other server and then the people on the other server say we need a newer version",
    "start": "622839",
    "end": "628920"
  },
  {
    "text": "of java um and so I said okay we should we should upgrade Java and so we talked to the other team and said well we can't",
    "start": "628920",
    "end": "634160"
  },
  {
    "text": "our application won't run on the new version yet and we don't have time to kind of update it right now so we end up installing you know updating the Java on",
    "start": "634160",
    "end": "641079"
  },
  {
    "text": "one machine and again they become different all these things build up you get a lot of differences between your machines um and so we had puppet and the",
    "start": "641079",
    "end": "649920"
  },
  {
    "text": "idea was that that would help us with this right we could write a puppet module that would uh Define how a an",
    "start": "649920",
    "end": "656120"
  },
  {
    "text": "application server all the kind of things on it um and we run a across all of our servers and everything will be the same but we found that it was",
    "start": "656120",
    "end": "664519"
  },
  {
    "text": "difficult to trust it to do that because we would write that that puppet module we would run it across our machines and",
    "start": "664519",
    "end": "670920"
  },
  {
    "text": "some would break because we had those differences and so that led us to say we're going to use it more tactically so",
    "start": "670920",
    "end": "678200"
  },
  {
    "text": "we um write the you know the puppet module to install um Java and we tweak it to be this version of java and run it",
    "start": "678200",
    "end": "684600"
  },
  {
    "text": "against those machines then we tweak it for another version of Java for those machines some other differences and it becomes more of an interactive tool and",
    "start": "684600",
    "end": "690279"
  },
  {
    "text": "not something that's kind of really managing everything across the across the whole",
    "start": "690279",
    "end": "695639"
  },
  {
    "text": "piece so infastructure is code the the way I Define that is it's about taking",
    "start": "695839",
    "end": "702079"
  },
  {
    "text": "because our infrastructure has moved from from being kind of physical at least in the way we ways we deal with it",
    "start": "702079",
    "end": "708519"
  },
  {
    "text": "to being uh it's essentially become software and data um so we can start",
    "start": "708519",
    "end": "714440"
  },
  {
    "text": "applying tools and practices and so on that we've found are really good for software engineering and apply those to",
    "start": "714440",
    "end": "720440"
  },
  {
    "text": "our infrastructure things like test driven development continuous integration continuous delivery tools",
    "start": "720440",
    "end": "725519"
  },
  {
    "text": "like um you know Version Control Systems we can start bringing those to",
    "start": "725519",
    "end": "730360"
  },
  {
    "text": "bear so some of the core principles on this is that we should be able to re rebuild any part of our infrastructure",
    "start": "732160",
    "end": "738160"
  },
  {
    "text": "any part of our systems very easily by easily I mean not only is it quick and not only is it kind of repeatable and",
    "start": "738160",
    "end": "744040"
  },
  {
    "text": "and you know we know it happens the same way every time it also shouldn't take a lot of kind of thinking you know if we've got an exist server and for some",
    "start": "744040",
    "end": "750040"
  },
  {
    "text": "reason either it goes down or we want another copy of it we shouldn't need the person who knows that stuff we should here's a script that we run and it just",
    "start": "750040",
    "end": "756760"
  },
  {
    "text": "happens and all the thinking has been encapsulated in our our scripts and our tools and that lets us treat our the",
    "start": "756760",
    "end": "763320"
  },
  {
    "text": " of our infrastructure kind of as being disposable we can kind of bring up something new and improved we can throw",
    "start": "763320",
    "end": "768920"
  },
  {
    "text": "away the old things and and uh we can be a lot more relaxed about stuff as opposed to those kind of snowflake servers the things that have been",
    "start": "768920",
    "end": "775320"
  },
  {
    "text": "carefully configured some way that nobody's quite sure how to reproduce and so we're afraid to touch it we can be a lot more confident in how we",
    "start": "775320",
    "end": "781040"
  },
  {
    "text": "deal with our infrastructure that everything is consistent so when we think about things like those Java servers that need to",
    "start": "781040",
    "end": "787360"
  },
  {
    "text": "have different versions of java we can kind of encapsulate that and say okay we've got ways to Define our Java 6 machines our Java 7 machines and yes",
    "start": "787360",
    "end": "794480"
  },
  {
    "text": "they're different but they're defined that that difference is all kind of captured and we don't have an end State",
    "start": "794480",
    "end": "800360"
  },
  {
    "text": "I think this is an important thing um there's the idea of evolutionary architecture so I think our kind of",
    "start": "800360",
    "end": "805959"
  },
  {
    "text": "habits as technical people is we like to you know we look at our current state of things we can draw it up on a whiteboard",
    "start": "805959",
    "end": "811600"
  },
  {
    "text": "and say all the things that are wrong with it and then we go to the Whiteboard and we draw the what it's going to be like you know after we we get this new",
    "start": "811600",
    "end": "817519"
  },
  {
    "text": "tools and stuff working and after we've kind of you know gotten over this project or program or whatever it is um",
    "start": "817519",
    "end": "822760"
  },
  {
    "text": "everything's going to be awesome but the fact is that end State never really happens um things change along the way",
    "start": "822760",
    "end": "828560"
  },
  {
    "text": "and if we accept that and if we kind of organize ourselves and our ways of working to assume that we're constantly",
    "start": "828560",
    "end": "834120"
  },
  {
    "text": "going to be changing this stuff in our infrastructure rather than striving towards a perfect end State uh we get more comfortable with that and we can",
    "start": "834120",
    "end": "839759"
  },
  {
    "text": "handle the the kind of changes that come at us more easily and it also reduces",
    "start": "839759",
    "end": "844839"
  },
  {
    "text": "the tensions around decisions where we have those discussions of which tool are we going to use should we use you know these people want to use Chef these ones",
    "start": "844839",
    "end": "850320"
  },
  {
    "text": "want to use puppet and we're kind of arguing all the time and and we don't move forwards because we're having these discussions well if we accept that you",
    "start": "850320",
    "end": "856120"
  },
  {
    "text": "know we can pick something and then as we go along we'll we'll learn and we'll change we'll adapt so it becomes it takes a stress out of those things and",
    "start": "856120",
    "end": "862160"
  },
  {
    "text": "helps us move forwards more easily so I'll get a bit more into some",
    "start": "862160",
    "end": "869639"
  },
  {
    "text": "kind of practices and patterns around infrastructures code this is the kind of stuff um that I talk about in the book",
    "start": "869639",
    "end": "875160"
  },
  {
    "text": "so the most basic thing is you define your infrastructure as code so you want to have files where you're saying things",
    "start": "875160",
    "end": "880680"
  },
  {
    "text": "like okay and the instance most familiar with things like puppet and Chef where it talks about what goes on to a server",
    "start": "880680",
    "end": "886880"
  },
  {
    "text": "you know where do you install Java what user accounts you need to to um to run your application server that kind of",
    "start": "886880",
    "end": "892440"
  },
  {
    "text": "thing but also at the higher level of so what about our networking rules what about firewall rules load balancer rules",
    "start": "892440",
    "end": "899040"
  },
  {
    "text": "tools what about the kind of storage and stuff like that um we want files like at",
    "start": "899040",
    "end": "904199"
  },
  {
    "text": "the level of uh things like terraform or Cloud information or these kind of tools um we can again we can capture those",
    "start": "904199",
    "end": "909759"
  },
  {
    "text": "things into files and that's great because now we can we can reuse those we can say that uh we're going to Define",
    "start": "909759",
    "end": "916199"
  },
  {
    "text": "what an application server looks like and the bits that need to be around it and then we can reuse that and that",
    "start": "916199",
    "end": "921519"
  },
  {
    "text": "starts to reduce the pressure on things like whereas previously every time somebody wanted to create an application",
    "start": "921519",
    "end": "926880"
  },
  {
    "text": "server in a larger organization you might have to have a lot of process around that a lot of discussion um drop",
    "start": "926880",
    "end": "933959"
  },
  {
    "text": "specifications and everything but you can say actually we're just going to use the same files that have been used and have been proven um to Define our",
    "start": "933959",
    "end": "940240"
  },
  {
    "text": "application server and you don't need as much of the kind of bureaucracy and process around",
    "start": "940240",
    "end": "945399"
  },
  {
    "text": "that there's also the the usefulness of making things visible of of saying that we've now got what an application server",
    "start": "945399",
    "end": "951800"
  },
  {
    "text": "looks like in a file that anybody can look at and that particularly helps in organizations where there are um kind of",
    "start": "951800",
    "end": "959079"
  },
  {
    "text": "legal regulations things you know compliance becomes an issue um and those organizations when you come and have an",
    "start": "959079",
    "end": "965319"
  },
  {
    "text": "audit having things captured in a file and having tools that you can point at to say this is actually what our infrastructure looks like this is",
    "start": "965319",
    "end": "971759"
  },
  {
    "text": "actually how an application server is built not just what says on the Wiki page which might be how it's created or",
    "start": "971759",
    "end": "977759"
  },
  {
    "text": "might not be depending on whether it's up to date or whether you know somebody who happens to install a particular machine knows a better way of doing",
    "start": "977759",
    "end": "983639"
  },
  {
    "text": "something you know we know we have we have auditable proof of that and everybody new to the team can look at at",
    "start": "983639",
    "end": "989079"
  },
  {
    "text": "it and understand it as well rather than having to kind of figure it out as they go along so once you've got that you've got",
    "start": "989079",
    "end": "995680"
  },
  {
    "text": "your stuff to find in files you can put those into Version Control and you can do continuous integration you can say that every time somebody makes a change",
    "start": "995680",
    "end": "1002279"
  },
  {
    "text": "to how this application server how our application server is configured you can automatically spin up an application",
    "start": "1002279",
    "end": "1008440"
  },
  {
    "text": "server run some tests against it to make sure it all hangs together not just to make sure that it's correct and and and",
    "start": "1008440",
    "end": "1014040"
  },
  {
    "text": "you know works the way it should work but also things like security are there ports open that shouldn't be open has somebody",
    "start": "1014040",
    "end": "1019360"
  },
  {
    "text": "um installed a package now which which creates user accounts or run services that we don't actually want running so",
    "start": "1019360",
    "end": "1024839"
  },
  {
    "text": "you can you can kind of put all kinds of stuff into the the automated testing and validation that you do on your",
    "start": "1024839",
    "end": "1031199"
  },
  {
    "text": "changes and then that lets you move on to continuous delivery and say we're going to actually use this to promote stuff across environments that each of",
    "start": "1031199",
    "end": "1037678"
  },
  {
    "text": "our environments um we're going to when we spin up an application server in our QA",
    "start": "1037679",
    "end": "1043918"
  },
  {
    "text": "environment or our production environment or whatever it may be um we're going to only we're going to use a file that's already been tested",
    "start": "1043919",
    "end": "1050559"
  },
  {
    "text": "previously and so again we have that confidence um that it's consistent and it's going to work across all the",
    "start": "1050559",
    "end": "1056000"
  },
  {
    "text": "environments and I've um done something that might seem a little um counterintuitive or a little um strange",
    "start": "1056000",
    "end": "1062559"
  },
  {
    "text": "to folks which I put the pre-production very early on in the pipeline um and this is something um",
    "start": "1062559",
    "end": "1068799"
  },
  {
    "text": "that's become a you know I found a useful pattern particularly with with kind of application development and these kind of things",
    "start": "1068799",
    "end": "1075039"
  },
  {
    "text": "where we often have folks who are responsible for production and um you",
    "start": "1075039",
    "end": "1081000"
  },
  {
    "text": "know want to make sure that an application is uh you know meets their requirements before it can go into production and the traditional place to",
    "start": "1081000",
    "end": "1088919"
  },
  {
    "text": "do that is right before production to say wait until the team's been working on stuff for a while maybe months um and",
    "start": "1088919",
    "end": "1095159"
  },
  {
    "text": "right before it's ready to go then we'll do it on a pre-production environment we'll see if we're ready to accept it into production well that's a bit late",
    "start": "1095159",
    "end": "1101039"
  },
  {
    "text": "right I mean what typically happens at that point is that um you know people",
    "start": "1101039",
    "end": "1106159"
  },
  {
    "text": "find issues they find things that they they don't like or or you know aren't quite right uh maybe some kind of",
    "start": "1106159",
    "end": "1111880"
  },
  {
    "text": "security things and then what happens is they raise those and the kind of",
    "start": "1111880",
    "end": "1117280"
  },
  {
    "text": "commercial stakeholders the people who spent loads and loads of money and all the development work that's gone into this have said uh you know that's a",
    "start": "1117280",
    "end": "1122640"
  },
  {
    "text": "shame but you know what we're going to have to go live anyways right we can't you know not release it right so um",
    "start": "1122640",
    "end": "1128400"
  },
  {
    "text": "maybe you'll get a few days to kind of do some quick hacks and workarounds and and um and then the promise of once it's",
    "start": "1128400",
    "end": "1134080"
  },
  {
    "text": "live you can go back and and we'll clean it up later right and we all know what happens to that which is",
    "start": "1134080",
    "end": "1139280"
  },
  {
    "text": "that it goes on the list of known issues and doesn't get cleaned up later that's where technical debt comes from right from those kind of rush things so um",
    "start": "1139280",
    "end": "1146559"
  },
  {
    "text": "what I like to do is to get the people who who have these concerns the security folks operations folks whoever it may be",
    "start": "1146559",
    "end": "1153000"
  },
  {
    "text": "who the the people who um can say no to a release going or want to be able to say no to a release going through get",
    "start": "1153000",
    "end": "1158960"
  },
  {
    "text": "them involved in designing the pipeline designing how um how do we Define infrastructure how does it get implied",
    "start": "1158960",
    "end": "1165200"
  },
  {
    "text": "to an environment what kind of test do we want to run and let's run that stuff early on so on every commit throughout",
    "start": "1165200",
    "end": "1170559"
  },
  {
    "text": "the day really we should be continuously validating every time somebody makes A Change Is there anything wrong with it that's going to mean we can't put it",
    "start": "1170559",
    "end": "1176320"
  },
  {
    "text": "into production let's find out then before we even waste a human's time of doing like exploratory testing on",
    "start": "1176320",
    "end": "1183200"
  },
  {
    "text": "it so an important kind of enabler of all of this is to to have small scope",
    "start": "1185200",
    "end": "1191520"
  },
  {
    "text": "changes um and this is I mean this is pretty standard stuff in terms of continuous delivery and even agile it's",
    "start": "1191520",
    "end": "1196919"
  },
  {
    "text": "just the idea if you can reduce the scope of your change um becomes easier to test comes easier",
    "start": "1196919",
    "end": "1202159"
  },
  {
    "text": "to think about it comes easier to look at it and analyze and if something wrong goes wrong it's easier to debug um so",
    "start": "1202159",
    "end": "1210600"
  },
  {
    "text": "it's that's about changing our habits and our ways of of working in order to be able to um you know again",
    "start": "1210600",
    "end": "1216720"
  },
  {
    "text": "continuously throughout the day make the changes and even if we don't push each change immediately through the production that's fine as long as we can",
    "start": "1216720",
    "end": "1221960"
  },
  {
    "text": "validate each change as thoroughly as possible and then that has to impact the",
    "start": "1221960",
    "end": "1227640"
  },
  {
    "text": "design of the system so one of the things as with continuous delivery of software as with automated testing it",
    "start": "1227640",
    "end": "1235280"
  },
  {
    "text": "tends to be very difficult to take an existing system that hasn't been designed and and grown and evolved with",
    "start": "1235280",
    "end": "1240919"
  },
  {
    "text": "this stuff in place and then retrofit um so you you tend to have to",
    "start": "1240919",
    "end": "1246280"
  },
  {
    "text": "think about the architecture of your infrastructure how your things are organized and how can you potentially refactor things and and um you know",
    "start": "1246280",
    "end": "1253520"
  },
  {
    "text": "break them down into smaller bits so I'll talk a little bit about that in a minute",
    "start": "1253520",
    "end": "1259120"
  },
  {
    "text": "um but I'll go back to that thing I remember I was saying earlier about the um that there is that fear spiral of",
    "start": "1259120",
    "end": "1265799"
  },
  {
    "text": "saying that uh you know I can't trust my automation to run across all of my machines because we've kind of done",
    "start": "1265799",
    "end": "1271360"
  },
  {
    "text": "things more tactically and more interactively with different sets of machines one on a time well the the solution to that is to",
    "start": "1271360",
    "end": "1278480"
  },
  {
    "text": "continuously reapply your configuration however it is you define an environment in your configuration you",
    "start": "1278480",
    "end": "1284480"
  },
  {
    "text": "reapply that all the time you know on so that tools like chef and puppet are meant to run on on a um schedule to have",
    "start": "1284480",
    "end": "1291039"
  },
  {
    "text": "agents running on your machines that do kind of every hour or so reapply and this kind of forces some discipline it",
    "start": "1291039",
    "end": "1297159"
  },
  {
    "text": "forces you to um make sure that everything is captured in your Automation and so therefore if you've",
    "start": "1297159",
    "end": "1303720"
  },
  {
    "text": "got a change that somebody makes it's either outside of the automation or that is going to fix this machine but happens",
    "start": "1303720",
    "end": "1309159"
  },
  {
    "text": "to break that machine you should find out quite quickly ideally your your pipelines and your automated testing should find up before it hits production",
    "start": "1309159",
    "end": "1316120"
  },
  {
    "text": "but even if it does hit production um you you know you're you're you're you then are made aware and you should kind",
    "start": "1316120",
    "end": "1321960"
  },
  {
    "text": "of correct it and and put it back into the automation as quickly as you can just to make sure that that becomes the",
    "start": "1321960",
    "end": "1327559"
  },
  {
    "text": "easiest way to manage your changes an alternative to having those tools running continuously is to to do what um",
    "start": "1327559",
    "end": "1333760"
  },
  {
    "text": "some folks call the the Phoenix pattern or mutable servers even which is to say that we'll just rebuild machines um to",
    "start": "1333760",
    "end": "1340360"
  },
  {
    "text": "make configuration changes so we don't let machines live very long um so I worked on one project where um we were",
    "start": "1340360",
    "end": "1347760"
  },
  {
    "text": "more or less doing this we were rebuilding our machines probably every few days um and but one of the",
    "start": "1347760",
    "end": "1352880"
  },
  {
    "text": "developers on the the team didn't quite he didn't you know he kind we talked about the stuff but it wasn't something he was used to and so he decided he",
    "start": "1352880",
    "end": "1359679"
  },
  {
    "text": "needed an FTP server uh actually repository for packages um on that that",
    "start": "1359679",
    "end": "1364799"
  },
  {
    "text": "he could put some packages onto and so he picked one of the development servers and and installed went and installed",
    "start": "1364799",
    "end": "1370320"
  },
  {
    "text": "stuff by hand um configured a web server and put his stuff on there and was happy for um I think about 2 days until",
    "start": "1370320",
    "end": "1377640"
  },
  {
    "text": "suddenly it was gone and he didn't he was like what happened to my what happened to my package repository and and so that was when we had this oh",
    "start": "1377640",
    "end": "1383880"
  },
  {
    "text": "actually this is what happens and that actually helped so then he got it you know he got the point of how this stuff works um and we went and put into the",
    "start": "1383880",
    "end": "1390400"
  },
  {
    "text": "automation so we we made a um you know some definitions for a server that would that would um be able to uh host his his",
    "start": "1390400",
    "end": "1397679"
  },
  {
    "text": "packages and and be kind of continuously configured um and so again this is part",
    "start": "1397679",
    "end": "1403120"
  },
  {
    "text": "of that discipline enforcing that discipline of saying everything's got to be in your automation or else it's going to disappear",
    "start": "1403120",
    "end": "1409120"
  },
  {
    "text": "so I'll go through a few pipeline patterns around infrastructure so one is this the basic pipeline is this so kind",
    "start": "1409120",
    "end": "1415080"
  },
  {
    "text": "of minimum pipeline here is saying let's have say our application code maybe some server stuff in puppet or Chef that",
    "start": "1415080",
    "end": "1421440"
  },
  {
    "text": "defines again our application server is my my favorite example an environment stack and something like terraform which",
    "start": "1421440",
    "end": "1426840"
  },
  {
    "text": "says this is uh you know the load balancer and networking security groups and so on around this",
    "start": "1426840",
    "end": "1431960"
  },
  {
    "text": "application um so those goes in those goes into a source repository and we have a first we have a build stage which",
    "start": "1431960",
    "end": "1438240"
  },
  {
    "text": "run runs and just does the kind of basic validation on those things depending on the tools we're using we might be able to have some unit tests run on those the",
    "start": "1438240",
    "end": "1445440"
  },
  {
    "text": "very least we can do kind of syntax validation and just make sure that it's uh we can do the kind of quick validation things on it if those pass we",
    "start": "1445440",
    "end": "1452360"
  },
  {
    "text": "move on to an automated test stage where an environment is automatically brought up and configured and then we have run",
    "start": "1452360",
    "end": "1459159"
  },
  {
    "text": "some tests against that we might use something like server spec to test does our application server hang together the",
    "start": "1459159",
    "end": "1464240"
  },
  {
    "text": "way we think it should and then once that's passed it becomes available to uh",
    "start": "1464240",
    "end": "1469720"
  },
  {
    "text": "human tester to to trigger it to be deployed to an environment where they can do that kind of exploratory testing and whatever they need to do to to be",
    "start": "1469720",
    "end": "1475360"
  },
  {
    "text": "reassured that it can go on um before we go to the production stage that's pretty simple Pipeline and then you can kind of",
    "start": "1475360",
    "end": "1480720"
  },
  {
    "text": "expand on that ad stages depending on what it is you're building and and what steps you need to to validate something",
    "start": "1480720",
    "end": "1487480"
  },
  {
    "text": "to go to production so then you get into things we start wanting to share Cod have",
    "start": "1487480",
    "end": "1493679"
  },
  {
    "text": "multiple teams working on things and so a very um common pattern is kind of a",
    "start": "1493679",
    "end": "1499080"
  },
  {
    "text": "library type of pattern so let's say we want to have a server let's say we're",
    "start": "1499080",
    "end": "1505240"
  },
  {
    "text": "using AWS and we're going to have an Ami that we're we're going to build um that installs our application server stuff",
    "start": "1505240",
    "end": "1511120"
  },
  {
    "text": "the basic stuff on there so that creating instances of application servers is very quick because we don't have to re you know for every time we we",
    "start": "1511120",
    "end": "1517360"
  },
  {
    "text": "make a new server we don't necessarily want to have to pull down you know all the all the things we'd like to have it prepackaged on",
    "start": "1517360",
    "end": "1523120"
  },
  {
    "text": "there um so we can use a tool like Packer which lets us Define",
    "start": "1523120",
    "end": "1529440"
  },
  {
    "text": "what we want in our Ami image and how it should be built in a file and we can put that file into a version control system",
    "start": "1529440",
    "end": "1535520"
  },
  {
    "text": "so the purple kind of box up there so when we commit that file we might do a build stage which does a very simple",
    "start": "1535520",
    "end": "1540799"
  },
  {
    "text": "validation and then creates an Ami image and it uh a new version of our",
    "start": "1540799",
    "end": "1546120"
  },
  {
    "text": "application server Ami and then we can do an automated test on that so we can",
    "start": "1546120",
    "end": "1551640"
  },
  {
    "text": "spin up an instance of that uh you know that new version of the the server if we made a configuration change to it run",
    "start": "1551640",
    "end": "1557760"
  },
  {
    "text": "test again it and only when we do that do we make it available for application teams in their pipelines um to say for",
    "start": "1557760",
    "end": "1564960"
  },
  {
    "text": "our automated test environment we're going to use the the latest application server image that's been that's been",
    "start": "1564960",
    "end": "1570679"
  },
  {
    "text": "created I learned to do this the hard way so I was on a project where uh we",
    "start": "1570679",
    "end": "1576480"
  },
  {
    "text": "were using Chef to build our hosts file or Etsy hosts file on our machines because we didn't have access to",
    "start": "1576480",
    "end": "1581880"
  },
  {
    "text": "automatically configure our um DNS we wanted to make sure that an application server could disc connect to a host name",
    "start": "1581880",
    "end": "1589080"
  },
  {
    "text": "DB and it would go to the right one for the particular environment it was in so we built that dynamically using Chef um",
    "start": "1589080",
    "end": "1594320"
  },
  {
    "text": "and then I committed a change that broke that so the host file got mangled nothing could talk to anything nothing",
    "start": "1594320",
    "end": "1599640"
  },
  {
    "text": "you couldn't talk to any of the machines couldn't log in or anything to fix it um that was pretty disastrous it didn't go through to production at least but um it",
    "start": "1599640",
    "end": "1606840"
  },
  {
    "text": "did go immediately at that time the way we had our pipeline structured we would test these things on our application",
    "start": "1606840",
    "end": "1612640"
  },
  {
    "text": "test environment uh which meant when I broke the application test environment and the QA environment you know we couldn't",
    "start": "1612640",
    "end": "1619279"
  },
  {
    "text": "people couldn't develop and push their code and and run CI and and testers couldn't test it and it made them very unhappy um my colleague called that",
    "start": "1619279",
    "end": "1625840"
  },
  {
    "text": "devoops um yeah so so that just kind of led me",
    "start": "1625840",
    "end": "1632240"
  },
  {
    "text": "to use this pattern of let's take the infrastructure stuff and run that through tests before we even inflict it on the developers so development",
    "start": "1632240",
    "end": "1637440"
  },
  {
    "text": "environments are really they are business critical right if they go down then then a lot of people are not able to",
    "start": "1637440",
    "end": "1644360"
  },
  {
    "text": "work now what if we want to share infrastructure kind of a bit more widely um so this actually this pattern um we",
    "start": "1644360",
    "end": "1653600"
  },
  {
    "text": "used I worked at autoc Scout Munich uh about two years ago and we did this and I just caught up with Christen dager who",
    "start": "1653600",
    "end": "1660559"
  },
  {
    "text": "um from autoc scout who's actually talking another talk at the right now um and he said he was going to show a um uh",
    "start": "1660559",
    "end": "1667360"
  },
  {
    "text": "a slide about my book so I said I'd mention that you know some of the stuff that I learned I learned with you guys so here it is um so this was the idea of",
    "start": "1667360",
    "end": "1674559"
  },
  {
    "text": "the global stack so we were on on AWS and we're using cloud formation and um so what we did is we wanted to",
    "start": "1674559",
    "end": "1682120"
  },
  {
    "text": "have multiple applications or multiple Services running in some overall kind of um networking structure basically we",
    "start": "1682120",
    "end": "1688240"
  },
  {
    "text": "only wanted to create this once to run multiple things into it so we had a cloud information file uh which defined",
    "start": "1688240",
    "end": "1694000"
  },
  {
    "text": "some things like vpcs and security groups and shared things like that and then we had separate each application which different teams you know different",
    "start": "1694000",
    "end": "1700120"
  },
  {
    "text": "teams were developing their services and each of those would have their file their Cloud information file which said",
    "start": "1700120",
    "end": "1705799"
  },
  {
    "text": "here's the stuff that I need just for my own service within that so that was the um elastic load balancer and autoscaling",
    "start": "1705799",
    "end": "1712240"
  },
  {
    "text": "group and you know the definition for you know what server to actually create there um and then that would plug in um",
    "start": "1712240",
    "end": "1719120"
  },
  {
    "text": "to the overall stack and so the pipelines for that the way they looked was that we had a um uh basically one",
    "start": "1719120",
    "end": "1727600"
  },
  {
    "text": "pipeline for the global stack and then each application stack had their own pipelines so the global stack would be",
    "start": "1727600",
    "end": "1733840"
  },
  {
    "text": "again this is a cloud information file we've checked it into Version Control there's some other stuffs as well some script and stuff around that and tests",
    "start": "1733840",
    "end": "1740159"
  },
  {
    "text": "we commit that diversion control and then some basic checks happen on it and then we created a test environment so it",
    "start": "1740159",
    "end": "1745919"
  },
  {
    "text": "would spin up it use that that um Cloud information template to create all that little infrastructure and it also had",
    "start": "1745919",
    "end": "1751440"
  },
  {
    "text": "like a little test service that it would create and then we run some server stack uh server spec tests just to make sure",
    "start": "1751440",
    "end": "1758159"
  },
  {
    "text": "that everything talked to each other corre to you know all the kind of connections were working correctly um and then after that we",
    "start": "1758159",
    "end": "1765480"
  },
  {
    "text": "could push it into production and for the services um and that was kept as minimal",
    "start": "1765480",
    "end": "1771600"
  },
  {
    "text": "as possible this is one of the kind of things and that's one of the things they've they've really kept to when I was talking to Christian over the the past few years they're still using this",
    "start": "1771600",
    "end": "1777919"
  },
  {
    "text": "pattern but one of the really important things was keeping that um this thing really minimal so that they you don't",
    "start": "1777919",
    "end": "1783919"
  },
  {
    "text": "have to change it very often so that the impact of changing it is is less and you're kind of less scared to change it",
    "start": "1783919",
    "end": "1789559"
  },
  {
    "text": "which is really the what we're after um so then the pipelines for the service",
    "start": "1789559",
    "end": "1796880"
  },
  {
    "text": "Stacks uh are just they'll grab for their test when they're spinning up an an environment for automated tests um",
    "start": "1796880",
    "end": "1804240"
  },
  {
    "text": "they grab the production version of the the cloud information stack from the global stack so they don't kind of take",
    "start": "1804240",
    "end": "1810240"
  },
  {
    "text": "a test version instead they know if this test passed it's going to work in production as it is now or it should",
    "start": "1810240",
    "end": "1815279"
  },
  {
    "text": "work in production as it is now not kind of in a potential future future Point um",
    "start": "1815279",
    "end": "1820679"
  },
  {
    "text": "and then that gets applied you know to each of the further environments when they deploy within that so in this one",
    "start": "1820679",
    "end": "1826480"
  },
  {
    "text": "um you know the first uh stage there this is the only application this",
    "start": "1826480",
    "end": "1832039"
  },
  {
    "text": "particular service that's testing it is the only application running in that instance of the global Stacks they just make sure regardless of anybody else I'm",
    "start": "1832039",
    "end": "1838840"
  },
  {
    "text": "okay use things like mocks and and whatnot to kind of um worry about dependencies on other services and then",
    "start": "1838840",
    "end": "1845600"
  },
  {
    "text": "they might have a stage that has um more uh kind of other services deployed with it so that they can test them together",
    "start": "1845600",
    "end": "1852000"
  },
  {
    "text": "in actuality at Autos Scout they do they're are bolder than this they don't have this stage they go pretty much straight into production and they do a",
    "start": "1852000",
    "end": "1858720"
  },
  {
    "text": "kind of a canary release pattern so they deploy their service into the production stack but keep it offline so they can",
    "start": "1858720",
    "end": "1864279"
  },
  {
    "text": "test it and then swap it out once they're they're happy with it so the last kind of section of of",
    "start": "1864279",
    "end": "1871679"
  },
  {
    "text": "what I'm going to talk about tonight is around um there some basic design patterns in particularly around how do",
    "start": "1871679",
    "end": "1878159"
  },
  {
    "text": "we avoid kind of a spaghetti monolithic infrastructure which is a problem a lot of teams are getting to these days where",
    "start": "1878159",
    "end": "1885000"
  },
  {
    "text": "people who' have been using puppet or Chef or these kind of tools for quite a while for a couple couple of years the codebase has grown and it looks like any",
    "start": "1885000",
    "end": "1890600"
  },
  {
    "text": "application code base has grown over quite a lot of time that you got a lot of technical debt and a lot of kind of um spaghetti going on so if you we look",
    "start": "1890600",
    "end": "1898159"
  },
  {
    "text": "at uh let's say a set of applications and services that are interrelated some front-end stuff and middle stuff and",
    "start": "1898159",
    "end": "1903880"
  },
  {
    "text": "maybe monitoring and all that the naive way certainly the way that I first did this when I got my hands on terraform uh",
    "start": "1903880",
    "end": "1910200"
  },
  {
    "text": "was to make a file that just defined all the stuff um seems like a good idea but",
    "start": "1910200",
    "end": "1916679"
  },
  {
    "text": "um it's the same thing as with soft right it becomes it's a monolith right and it becomes difficult to make changes",
    "start": "1916679",
    "end": "1922360"
  },
  {
    "text": "because if I make a change to to to something around here I might break something over there um and that leads",
    "start": "1922360",
    "end": "1929159"
  },
  {
    "text": "us to want to have process right so we start discussing or we need to um uh have more kind of ceremony and process",
    "start": "1929159",
    "end": "1935120"
  },
  {
    "text": "around making changes to things and discussions across the team and that just slows everything down which kind of gets us back to the the old old school",
    "start": "1935120",
    "end": "1942320"
  },
  {
    "text": "um change models that we wanted to get away from so the first thing",
    "start": "1942320",
    "end": "1949159"
  },
  {
    "text": "that you look at for this guy is is the modularity is is in terraform and cloud formation and these other tools you have",
    "start": "1949159",
    "end": "1954880"
  },
  {
    "text": "ways of saying I want to find something like let's say a load balancer um bit of my infrastructure and you can pull that",
    "start": "1954880",
    "end": "1960399"
  },
  {
    "text": "into a separate file and then you can reuse that file and that's really handy it starts helping you to organize your code a little bit more cleanly um and it",
    "start": "1960399",
    "end": "1967519"
  },
  {
    "text": "helps with sharing and reuse of code so you can have multiple people using that single load balancer definition which is",
    "start": "1967519",
    "end": "1974960"
  },
  {
    "text": "nice but actually as with code it does increase your coupling um so in some",
    "start": "1975039",
    "end": "1981000"
  },
  {
    "text": "ways it can actually make changes more difficult because again if I want to change that load balancer file um for",
    "start": "1981000",
    "end": "1987279"
  },
  {
    "text": "the needs of one application I now have to worry about am I breaking other applications and so again I have to go back to needing kind",
    "start": "1987279",
    "end": "1993320"
  },
  {
    "text": "of process or um what client recently talked about having to add a bank that talked about having for every change",
    "start": "1993320",
    "end": "1999039"
  },
  {
    "text": "have to test the bank they have to test the full bank for every small change and so modularity while it helps in some",
    "start": "1999039",
    "end": "2004559"
  },
  {
    "text": "ways it doesn't kind of get away from that problem so now we can look at well let's split up our infrastructure uh",
    "start": "2004559",
    "end": "2011080"
  },
  {
    "text": "let's split up those terraform files or Cloud information files and a kind of obvious uh way to do it is by kind of",
    "start": "2011080",
    "end": "2017519"
  },
  {
    "text": "layers so we have the front end and then the kind of application servers and the databases and this kind of aligns with",
    "start": "2017519",
    "end": "2024000"
  },
  {
    "text": "the way um a lot of applications have traditionally been architected and also the way infrastructure tends to be",
    "start": "2024000",
    "end": "2030799"
  },
  {
    "text": "architected and that we have our kind of security we have firewalls in between these layers right this is a very typical infrastructure diagram",
    "start": "2030799",
    "end": "2037880"
  },
  {
    "text": "um but there are there are flaws with with this right um so and this is where",
    "start": "2037880",
    "end": "2043159"
  },
  {
    "text": "the whole thing with kind of microservices and all this comes comes from is this idea that actually when you",
    "start": "2043159",
    "end": "2048960"
  },
  {
    "text": "start thinking about the Scopes of changes not the individual changes of saying okay I want to change a load balance or rule for the the web server I",
    "start": "2048960",
    "end": "2055878"
  },
  {
    "text": "want to change um you know uh open up some ports or or or whatever for down in",
    "start": "2055879",
    "end": "2061200"
  },
  {
    "text": "the application server layer those are probably serving some higher purpose and so you want to be able to think about",
    "start": "2061200",
    "end": "2066320"
  },
  {
    "text": "the actual value you're trying to deliver and that's going to tend to touch multiple Parts um so the the",
    "start": "2066320",
    "end": "2071839"
  },
  {
    "text": "layering thing doesn't work that great um it means that you still end up having to change uh across multiple files in",
    "start": "2071839",
    "end": "2079398"
  },
  {
    "text": "order to make a single change which brings you back to how do we coordinate this stuff and avoid breaking breaking things and also for security I think um",
    "start": "2079399",
    "end": "2087118"
  },
  {
    "text": "as a security model this is kind of the the standard what some people call best practice to kind of divide things put",
    "start": "2087119",
    "end": "2092240"
  },
  {
    "text": "firewalls between these things but that's actually you know you're still kind of leaving you tend to have very flat things in here here which are are",
    "start": "2092240",
    "end": "2098880"
  },
  {
    "text": "very insecure so if somebody does gain access to somewhere um they get access to a lot of stuff you probably don't",
    "start": "2098880",
    "end": "2104079"
  },
  {
    "text": "want them to have access to and with cloud and with the ability to Define things in code we have the the the",
    "start": "2104079",
    "end": "2110400"
  },
  {
    "text": "opportunity to kind of slice things up in in ways that make a bit more sense so we can say um along the lines with what",
    "start": "2110400",
    "end": "2116680"
  },
  {
    "text": "kind of microservices we might have an a single microservice that runs on a a little cluster um and then a little you",
    "start": "2116680",
    "end": "2123800"
  },
  {
    "text": "know database for that partition in some way um we can Define we can have a single file which defines that so you",
    "start": "2123800",
    "end": "2130440"
  },
  {
    "text": "have a team that owns that and they tend to have a file which controls the stuff that they work with and they don't have to have so much coordination with other",
    "start": "2130440",
    "end": "2138320"
  },
  {
    "text": "people so just to to sum up really I think the underlying principle",
    "start": "2139000",
    "end": "2145160"
  },
  {
    "text": "is to think about how you're going to manage change and what the typical scope of change is in your organization you",
    "start": "2145160",
    "end": "2151400"
  },
  {
    "text": "can do things like value stream mapping to analyze that and and look at Who's involved and what parts of your infrastructure involved and ideally you",
    "start": "2151400",
    "end": "2157119"
  },
  {
    "text": "can work on your infrastructure your your sorry your architecture your design of your software and your infrastructure",
    "start": "2157119",
    "end": "2163079"
  },
  {
    "text": "and your organization all together to to to optimize for this thing and I think that's the that's really the",
    "start": "2163079",
    "end": "2168760"
  },
  {
    "text": "goal so thanks thanks a lot and I'm uh uh like to hear if anybody's got",
    "start": "2168760",
    "end": "2174319"
  },
  {
    "text": "questions or particular challenges they've got around infrastructure management and",
    "start": "2174319",
    "end": "2180680"
  },
  {
    "text": "Cloud thanks do I see a question here sorry we got three questions via the app",
    "start": "2186560",
    "end": "2193920"
  },
  {
    "text": "oh okay awesome um so first one how do you manage database changes in the CD",
    "start": "2193920",
    "end": "2200720"
  },
  {
    "text": "pipeline yeah um so a couple of things to do one thing is in line with what I",
    "start": "2200720",
    "end": "2206160"
  },
  {
    "text": "was saying around overall architecture being able to design your systems or redesign refactor your systems to kind",
    "start": "2206160",
    "end": "2211680"
  },
  {
    "text": "of shrink um the scope of things so that rather than having like a a single database that's got everything if you",
    "start": "2211680",
    "end": "2217760"
  },
  {
    "text": "can kind of split that up so that you're kind of um managing you know chunks of data around the kind of um business",
    "start": "2217760",
    "end": "2225400"
  },
  {
    "text": "context um that helps to reduce the scope and make it easier to manage things in the pipeline so that's one",
    "start": "2225400",
    "end": "2230520"
  },
  {
    "text": "thing I'd recommend another is um managing changes to your database",
    "start": "2230520",
    "end": "2236160"
  },
  {
    "text": "schemas in a way that is essentially code driven so there's tools like DB deploy or Flyway or even liquid base um",
    "start": "2236160",
    "end": "2243560"
  },
  {
    "text": "which lets you put you define your your database schema in a file and then you define changes in files and put them",
    "start": "2243560",
    "end": "2249880"
  },
  {
    "text": "into Version Control and every time you make a change you have a tool that applies those to the database instance and so you can progress that through the",
    "start": "2249880",
    "end": "2255880"
  },
  {
    "text": "pipeline and that's that's very kind of compatible and aligned with continuous delivery I'd um recommend there's um a",
    "start": "2255880",
    "end": "2263599"
  },
  {
    "text": "couple of um posts on Martin Fowler's blicky that he and a colleague of mine wrote around evolutionary um database",
    "start": "2263599",
    "end": "2270240"
  },
  {
    "text": "architecture they also have a book um about that and so that's a that's a good resource for thinking about those kinds",
    "start": "2270240",
    "end": "2275920"
  },
  {
    "text": "of things and then a couple of others a big topic um and I always get asked this I",
    "start": "2275920",
    "end": "2282400"
  },
  {
    "text": "should add some slides probably um so another couple of things are um thinking",
    "start": "2282400",
    "end": "2287880"
  },
  {
    "text": "about how you can architect your database so that it's um essentially can become highly um reliable and redundant",
    "start": "2287880",
    "end": "2295160"
  },
  {
    "text": "so if you have like multiple nodes in a cluster across availability zones in the case of a cloud or or some equivalent",
    "start": "2295160",
    "end": "2300359"
  },
  {
    "text": "kind of thing and the ability to um kind of add and remove nodes quite flexibly",
    "start": "2300359",
    "end": "2305400"
  },
  {
    "text": "to a to a pool and and obviously some data bases are uh make this easier than others um but it's a really useful thing",
    "start": "2305400",
    "end": "2311960"
  },
  {
    "text": "to being able to kind of keep everything very flexible and and rebuildable um and the last one is just",
    "start": "2311960",
    "end": "2317280"
  },
  {
    "text": "a kind of pratic pragmatic thing around in pipelines in particular um being able to kind of snapshot um you know data",
    "start": "2317280",
    "end": "2325160"
  },
  {
    "text": "sets and kind of you know reload them so like in a test environment um you know",
    "start": "2325160",
    "end": "2330400"
  },
  {
    "text": "you might want to kind of every time you do a deploy you kind of refresh the database to you know unnown State before",
    "start": "2330400",
    "end": "2335640"
  },
  {
    "text": "you run tests against it um that can be quite helpful okay um which kind of tools you",
    "start": "2335640",
    "end": "2343480"
  },
  {
    "text": "suggest to do autot testing or automated testing of your infrastructure as code",
    "start": "2343480",
    "end": "2348560"
  },
  {
    "text": "created results okay what was the last part created Created results that's a",
    "start": "2348560",
    "end": "2355119"
  },
  {
    "text": "question okay um yeah I understand so things created with infrastructure is code so",
    "start": "2355119",
    "end": "2362520"
  },
  {
    "text": "um the way to approach kind of automated tests and tooling is in the kind of the test pyramid talk about this in the book",
    "start": "2362520",
    "end": "2368319"
  },
  {
    "text": "and it's very um it's it's basic for agile um you know extreme Programming type type things that talk about testing",
    "start": "2368319",
    "end": "2375119"
  },
  {
    "text": "um and it's the idea that you have testing at different levels you have the kind of unit testing that happens at the lower levels of things so um tools like",
    "start": "2375119",
    "end": "2382640"
  },
  {
    "text": "chef and puppet which have been around for longer tend to have a pretty strong ecosystem of of tooling to help you with with automated uh you know unit testing",
    "start": "2382640",
    "end": "2389720"
  },
  {
    "text": "at that level um and then you want to test at kind of the higher level when you start to bring stuff together and I quite like server spec which is um it's",
    "start": "2389720",
    "end": "2397520"
  },
  {
    "text": "essentially a set of libraries for rspec the the Ruby testing tool which let you assert things about servers like this",
    "start": "2397520",
    "end": "2404280"
  },
  {
    "text": "user count exists or this file exists and has this content or what have you um and then there there are some other",
    "start": "2404280",
    "end": "2410079"
  },
  {
    "text": "tools around that help you to kind of glue things together so things like Test Kitchen um which uh let you manage like",
    "start": "2410079",
    "end": "2418079"
  },
  {
    "text": "spinning up a virtual machine very quickly and then running test against it um and automating that process and defining that in code uh can be quite",
    "start": "2418079",
    "end": "2426319"
  },
  {
    "text": "helpful last question from the app do you think artifact stores are a good fit",
    "start": "2426319",
    "end": "2432160"
  },
  {
    "text": "for different component versions yes um so we didn't really talk",
    "start": "2432160",
    "end": "2438920"
  },
  {
    "text": "about artifacts and how they're managed across pipelines but for um artifacts can be lots of",
    "start": "2438920",
    "end": "2444960"
  },
  {
    "text": "different things they tend to be lots of different things in infrastructures you have things like RPM files or or Debian files for your system you might have",
    "start": "2444960",
    "end": "2451599"
  },
  {
    "text": "ruby gems uh you might have Java files in in like a a maven repository and then",
    "start": "2451599",
    "end": "2457119"
  },
  {
    "text": "you also have just the the the files themselves those cloud formation or terraform files are things that you kind of want to move through from one",
    "start": "2457119",
    "end": "2463359"
  },
  {
    "text": "environment to the next and you you want to kind of version those you want when they go into the the Version Control",
    "start": "2463359",
    "end": "2469000"
  },
  {
    "text": "System you want them to kind of come out and um the things that go together so",
    "start": "2469000",
    "end": "2474520"
  },
  {
    "text": "you might have multiple of those things which kind of are tend to to walk through the pipeline together it's nice to have them versioned as a unit um and",
    "start": "2474520",
    "end": "2481480"
  },
  {
    "text": "stored somewhere that you can kind of progress them and refer to and and roll back and say I want the you know version",
    "start": "2481480",
    "end": "2486560"
  },
  {
    "text": "102 of my environment that might include the terraform file and some um you know",
    "start": "2486560",
    "end": "2492920"
  },
  {
    "text": "cookbooks and and whatever else go along with that state I hope that kind of gets to the the",
    "start": "2492920",
    "end": "2500400"
  },
  {
    "text": "question",
    "start": "2500400",
    "end": "2503400"
  },
  {
    "text": "okay hi um do you have a suggestion on how to deal with secrets in um",
    "start": "2506480",
    "end": "2512400"
  },
  {
    "text": "repositories so API keys and whatnot yeah secret so I mean obviously number one is don't check the them into your",
    "start": "2512400",
    "end": "2517560"
  },
  {
    "text": "version control um and that's especially even if you have in internal private",
    "start": "2517560",
    "end": "2522640"
  },
  {
    "text": "Version Control repositories I I do you know a lot of people kind of think about oh we don't have to worry about it so much in that case but if you've ever",
    "start": "2522640",
    "end": "2529200"
  },
  {
    "text": "seen how um hackers work when they kind of the the the ease with which they can get into your private network is is just",
    "start": "2529200",
    "end": "2535720"
  },
  {
    "text": "trivial and scary and the first thing they go for um I saw um a speaker at qon",
    "start": "2535720",
    "end": "2541359"
  },
  {
    "text": "last last June in New York who was walking through how what she does when she breaks in and how easily she got",
    "start": "2541359",
    "end": "2546680"
  },
  {
    "text": "even with with an organization a big organization that used two Factor off she managed to get into that with a couple of days of social engineering",
    "start": "2546680",
    "end": "2553079"
  },
  {
    "text": "first thing she goes for is the development tools your CI server your your Version Control Systems and I used to think that was because of um uh you",
    "start": "2553079",
    "end": "2559960"
  },
  {
    "text": "know she's going to hack my code right and put in back doors no no she goes for your your passwords and your your your",
    "start": "2559960",
    "end": "2565240"
  },
  {
    "text": "databases um and those are the soft spots so you we need to kind I think get better as an industry at tightening",
    "start": "2565240",
    "end": "2571440"
  },
  {
    "text": "those up for so for for keys in particular some people there's a couple of tools I can't remember the names off",
    "start": "2571440",
    "end": "2576480"
  },
  {
    "text": "the top of my head which let you essentially cry encrypt keys if you want things that you want to store in your",
    "start": "2576480",
    "end": "2581880"
  },
  {
    "text": "version control system your Source control repository and that can be helpful I think there are um some good",
    "start": "2581880",
    "end": "2588920"
  },
  {
    "text": "Secrets Management Systems out there things like hashy Corps vault is is quite cool and what it can do um so I",
    "start": "2588920",
    "end": "2596559"
  },
  {
    "text": "definitely recommend looking into those kind of things as ways of storing Secrets I think ways of trying to",
    "start": "2596559",
    "end": "2602440"
  },
  {
    "text": "eliminate or reduce the scope of things so one of the cool things about AWS is the the kind of um uh IM am roles where",
    "start": "2602440",
    "end": "2610079"
  },
  {
    "text": "you can assign to them you know certain machines the permissions to do certain things so you can have like your your",
    "start": "2610079",
    "end": "2615440"
  },
  {
    "text": "you know a CI agent you know um with the have the permission to kind of create um",
    "start": "2615440",
    "end": "2622240"
  },
  {
    "text": "uh you know infrastructure to say run terraform for you and if you can kind of reduce down the scope and say that that actually doesn't require then uh you",
    "start": "2622240",
    "end": "2628520"
  },
  {
    "text": "know people having a password or a key or um that you can do it through the the kind of encryption where you go off to a",
    "start": "2628520",
    "end": "2634319"
  },
  {
    "text": "server and get the permission to do that stuff it's a big topic I haven't found a lot of really good kind of resources on",
    "start": "2634319",
    "end": "2639559"
  },
  {
    "text": "how to pull it all together um but I hope that helps a little bit is",
    "start": "2639559",
    "end": "2645319"
  },
  {
    "text": "that",
    "start": "2645319",
    "end": "2648319"
  },
  {
    "text": "okay hi um is there any experience um not talking about Cloud but um for",
    "start": "2653880",
    "end": "2660240"
  },
  {
    "text": "example um with our client um pre-production and production is hosted",
    "start": "2660240",
    "end": "2665720"
  },
  {
    "text": "by uh an company um we occasionally have the need to quickly recreate the current production",
    "start": "2665720",
    "end": "2671880"
  },
  {
    "text": "State mhm um we would preferred uh of course to use some cloud system but the",
    "start": "2671880",
    "end": "2678680"
  },
  {
    "text": "main problem is really getting um everything from server configuration from the production system to get the",
    "start": "2678680",
    "end": "2685559"
  },
  {
    "text": "information itself because they are really reluctant to use any kind of Version Control so we can share and we",
    "start": "2685559",
    "end": "2691800"
  },
  {
    "text": "would need so much um it starts with Apache configurations dispatcher configurations is there any experience",
    "start": "2691800",
    "end": "2697599"
  },
  {
    "text": "how to ease into this process how to get reluctant holers to work with",
    "start": "2697599",
    "end": "2703440"
  },
  {
    "text": "you um I think a lot depends on the particular situation and and um you know",
    "start": "2703440",
    "end": "2709680"
  },
  {
    "text": "what the constraints are on that organization you know what the kind of where the resistance comes from it can often help to",
    "start": "2709680",
    "end": "2715079"
  },
  {
    "text": "find um problems that they have that they would like to solve and to talk about how this can help so if they get",
    "start": "2715079",
    "end": "2720280"
  },
  {
    "text": "frustrated by you know getting um uh you know deployments you know releases that",
    "start": "2720280",
    "end": "2727520"
  },
  {
    "text": "you give them and then they have trouble configuring and getting it to work for example we can talk about how automating",
    "start": "2727520",
    "end": "2732839"
  },
  {
    "text": "and creating consistency between the environments can actually make their lives easier that's often a good way to",
    "start": "2732839",
    "end": "2739160"
  },
  {
    "text": "kind of go into it um in general when it comes to to introducing um automation",
    "start": "2739160",
    "end": "2745880"
  },
  {
    "text": "around infrastructure I think it's good to kind of start small start with a particular area um and ideally something you can",
    "start": "2745880",
    "end": "2752400"
  },
  {
    "text": "kind of build up from scratch as it were so rather than saying how do we take an existing system and then um we you know",
    "start": "2752400",
    "end": "2758520"
  },
  {
    "text": "run uh maybe you know anible or something on some part of that system that can run foul of if the system",
    "start": "2758520",
    "end": "2764960"
  },
  {
    "text": "systems underneath are in um um inconsistent already and different that tool is just going to break or it's",
    "start": "2764960",
    "end": "2770640"
  },
  {
    "text": "going to break in some situations and it's not going to have the level of trust so I think you have to start with how do you build the the server image to",
    "start": "2770640",
    "end": "2775800"
  },
  {
    "text": "start with and make sure it's consistent and if you can do that for some subset of things um that can help but it's it's",
    "start": "2775800",
    "end": "2782920"
  },
  {
    "text": "complicated I don't think there's an easy Pat answer to give without kind of getting more more deep into the",
    "start": "2782920",
    "end": "2789720"
  },
  {
    "text": "situation one final question nobody okay all right thanks",
    "start": "2790160",
    "end": "2797760"
  },
  {
    "text": "thanks again for coming out",
    "start": "2797760",
    "end": "2801440"
  }
]