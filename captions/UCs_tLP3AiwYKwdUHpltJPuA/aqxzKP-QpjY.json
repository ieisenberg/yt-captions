[
  {
    "start": "0",
    "end": "80000"
  },
  {
    "text": "so this presentation is about to some",
    "start": "9349",
    "end": "12690"
  },
  {
    "text": "stuff we learnt when we built this kind",
    "start": "12690",
    "end": "14790"
  },
  {
    "text": "of data heavy application and especially",
    "start": "14790",
    "end": "19230"
  },
  {
    "text": "to lessons that I want to try to explain",
    "start": "19230",
    "end": "22140"
  },
  {
    "text": "to you that come from like fancy",
    "start": "22140",
    "end": "25650"
  },
  {
    "text": "computer science ii terms that if you",
    "start": "25650",
    "end": "28230"
  },
  {
    "text": "studied computer science you would know",
    "start": "28230",
    "end": "29580"
  },
  {
    "text": "them and instead of applying them to",
    "start": "29580",
    "end": "33239"
  },
  {
    "text": "like small algorithms and data",
    "start": "33239",
    "end": "35160"
  },
  {
    "text": "structures we apply them to like a whole",
    "start": "35160",
    "end": "36750"
  },
  {
    "text": "system at the time so that's why this is",
    "start": "36750",
    "end": "39480"
  },
  {
    "text": "kind of interesting so what we do is a",
    "start": "39480",
    "end": "44219"
  },
  {
    "text": "game analytics a success on the tin it's",
    "start": "44219",
    "end": "46440"
  },
  {
    "text": "a kind of business intelligence service",
    "start": "46440",
    "end": "49620"
  },
  {
    "text": "for games this sdk that you put inside",
    "start": "49620",
    "end": "53039"
  },
  {
    "text": "of your game so if you have a mobile",
    "start": "53039",
    "end": "54480"
  },
  {
    "text": "game on iOS or android let's say you can",
    "start": "54480",
    "end": "57030"
  },
  {
    "text": "whenever use it does something that you",
    "start": "57030",
    "end": "59100"
  },
  {
    "text": "instead interested in measuring you can",
    "start": "59100",
    "end": "60750"
  },
  {
    "text": "send us an event we collect and analyze",
    "start": "60750",
    "end": "64350"
  },
  {
    "text": "these events and then there's a nice",
    "start": "64350",
    "end": "65580"
  },
  {
    "text": "user interface where you can look at",
    "start": "65580",
    "end": "67680"
  },
  {
    "text": "nice reports and understand your game",
    "start": "67680",
    "end": "69689"
  },
  {
    "text": "and then you can use that information to",
    "start": "69689",
    "end": "72960"
  },
  {
    "text": "improve your game let's take the whole",
    "start": "72960",
    "end": "74490"
  },
  {
    "text": "idea so similar to Google Analytics for",
    "start": "74490",
    "end": "76530"
  },
  {
    "text": "e-commerce and so on for example so this",
    "start": "76530",
    "end": "80850"
  },
  {
    "start": "80000",
    "end": "195000"
  },
  {
    "text": "is what our system looks like data flows",
    "start": "80850",
    "end": "84270"
  },
  {
    "text": "you know from top to bottom so SDK goes",
    "start": "84270",
    "end": "87810"
  },
  {
    "text": "into a collector services which we have",
    "start": "87810",
    "end": "90329"
  },
  {
    "text": "a bunch of it all goes into a log and we",
    "start": "90329",
    "end": "93000"
  },
  {
    "text": "have done different few consumers of the",
    "start": "93000",
    "end": "95130"
  },
  {
    "text": "log and this the really streaming",
    "start": "95130",
    "end": "97799"
  },
  {
    "text": "real-time analytics their stuff like",
    "start": "97799",
    "end": "100049"
  },
  {
    "text": "funnels which we do like a special case",
    "start": "100049",
    "end": "103439"
  },
  {
    "text": "computation four funnels and there's",
    "start": "103439",
    "end": "105210"
  },
  {
    "text": "also more lots more and in these",
    "start": "105210",
    "end": "109799"
  },
  {
    "text": "different systems our query directly",
    "start": "109799",
    "end": "112740"
  },
  {
    "text": "body user so there's a HTTP API that",
    "start": "112740",
    "end": "114979"
  },
  {
    "text": "customers and browsers use directly so",
    "start": "114979",
    "end": "117420"
  },
  {
    "text": "so that this is kind of the context that",
    "start": "117420",
    "end": "119939"
  },
  {
    "text": "we work within so some bragging numbers",
    "start": "119939",
    "end": "127710"
  },
  {
    "text": "just to show that the system actually",
    "start": "127710",
    "end": "129060"
  },
  {
    "text": "works so we have around three billion",
    "start": "129060",
    "end": "131730"
  },
  {
    "text": "events a day now",
    "start": "131730",
    "end": "133380"
  },
  {
    "text": "up from around three thirty million when",
    "start": "133380",
    "end": "137790"
  },
  {
    "text": "we went live a year ago so i scroll 100",
    "start": "137790",
    "end": "139740"
  },
  {
    "text": "hundred fold and daily that's 600 750",
    "start": "139740",
    "end": "143570"
  },
  {
    "text": "gigabytes of JSON uncompressed data so",
    "start": "143570",
    "end": "146340"
  },
  {
    "text": "this is what our system turns through in",
    "start": "146340",
    "end": "148560"
  },
  {
    "text": "in one day so on to like what we learned",
    "start": "148560",
    "end": "154620"
  },
  {
    "text": "so there's also we made a lot of",
    "start": "154620",
    "end": "156450"
  },
  {
    "text": "mistakes unfortunately it's not enough",
    "start": "156450",
    "end": "157860"
  },
  {
    "text": "time to talk about all of them so i'm",
    "start": "157860",
    "end": "159750"
  },
  {
    "text": "going to share like what we did right",
    "start": "159750",
    "end": "161900"
  },
  {
    "text": "and one big concept that turns out to be",
    "start": "161900",
    "end": "166080"
  },
  {
    "text": "really valuable is to use a log analog",
    "start": "166080",
    "end": "171780"
  },
  {
    "text": "conceptually is the same as the if you",
    "start": "171780",
    "end": "175590"
  },
  {
    "text": "think of like a file system log dislike",
    "start": "175590",
    "end": "177330"
  },
  {
    "text": "application log on the file system let's",
    "start": "177330",
    "end": "179490"
  },
  {
    "text": "say syslog our sister greta to always a",
    "start": "179490",
    "end": "182130"
  },
  {
    "text": "pen stuff file for example that's",
    "start": "182130",
    "end": "183810"
  },
  {
    "text": "exactly the same concept but you want to",
    "start": "183810",
    "end": "185910"
  },
  {
    "text": "apply it on a bigger scale and so does",
    "start": "185910",
    "end": "192120"
  },
  {
    "text": "this thing have like the oh so a log is",
    "start": "192120",
    "end": "195840"
  },
  {
    "start": "195000",
    "end": "255000"
  },
  {
    "text": "like messages or lines or chunks or",
    "start": "195840",
    "end": "199320"
  },
  {
    "text": "whatever you want to call them and you",
    "start": "199320",
    "end": "201840"
  },
  {
    "text": "always write by appending to the end and",
    "start": "201840",
    "end": "204180"
  },
  {
    "text": "you read somewhere in the middle of the",
    "start": "204180",
    "end": "208110"
  },
  {
    "text": "log or you know if you have a real time",
    "start": "208110",
    "end": "210630"
  },
  {
    "text": "system you want to read at the tail of",
    "start": "210630",
    "end": "212580"
  },
  {
    "text": "the log if you want to go back in time",
    "start": "212580",
    "end": "215760"
  },
  {
    "text": "and recreate some state let's say you",
    "start": "215760",
    "end": "218550"
  },
  {
    "text": "would tell your consumer to not have the",
    "start": "218550",
    "end": "220830"
  },
  {
    "text": "latest offset by the earlier offset so",
    "start": "220830",
    "end": "223770"
  },
  {
    "text": "if you have used kafka kafka is exactly",
    "start": "223770",
    "end": "226440"
  },
  {
    "text": "this thing and the nice thing is or",
    "start": "226440",
    "end": "232380"
  },
  {
    "text": "there's a few nice things is few",
    "start": "232380",
    "end": "233970"
  },
  {
    "text": "nothing's so one big upside if you have",
    "start": "233970",
    "end": "237390"
  },
  {
    "text": "a data intensive application is that you",
    "start": "237390",
    "end": "239490"
  },
  {
    "text": "can then split up the writer and the",
    "start": "239490",
    "end": "241800"
  },
  {
    "text": "reader in the system so in our case we",
    "start": "241800",
    "end": "244560"
  },
  {
    "text": "have around 50 million devices every day",
    "start": "244560",
    "end": "247550"
  },
  {
    "text": "that produce data so they talk to our",
    "start": "247550",
    "end": "251150"
  },
  {
    "text": "data collector services and then they",
    "start": "251150",
    "end": "255330"
  },
  {
    "start": "255000",
    "end": "325000"
  },
  {
    "text": "that's these guys that actually write",
    "start": "255330",
    "end": "257340"
  },
  {
    "text": "and then we have a few different systems",
    "start": "257340",
    "end": "260160"
  },
  {
    "text": "that do the actual processing and what",
    "start": "260160",
    "end": "263669"
  },
  {
    "text": "is nice about this is that",
    "start": "263669",
    "end": "265750"
  },
  {
    "text": "the writing can be always available and",
    "start": "265750",
    "end": "268600"
  },
  {
    "text": "we can actually turn off the analytics",
    "start": "268600",
    "end": "270880"
  },
  {
    "text": "processing so whenever we have like a",
    "start": "270880",
    "end": "272830"
  },
  {
    "text": "bug or we need to make some changes to",
    "start": "272830",
    "end": "276990"
  },
  {
    "text": "our setup of anything or we have a new",
    "start": "276990",
    "end": "280390"
  },
  {
    "text": "release is something we can just disable",
    "start": "280390",
    "end": "282220"
  },
  {
    "text": "the system change the code and whatever",
    "start": "282220",
    "end": "285100"
  },
  {
    "text": "and then start up back up back up again",
    "start": "285100",
    "end": "286630"
  },
  {
    "text": "and nobody actually ever lost any data",
    "start": "286630",
    "end": "288880"
  },
  {
    "text": "or is upset in any way also you can make",
    "start": "288880",
    "end": "296530"
  },
  {
    "text": "this thing kind of smart a simple and",
    "start": "296530",
    "end": "299530"
  },
  {
    "text": "smart at the same time so what we do is",
    "start": "299530",
    "end": "301780"
  },
  {
    "text": "we write all of data directly into s3 so",
    "start": "301780",
    "end": "304150"
  },
  {
    "text": "we have big chunks of data industry and",
    "start": "304150",
    "end": "306120"
  },
  {
    "text": "and we kind of emulate a bit or Kafka",
    "start": "306120",
    "end": "309340"
  },
  {
    "text": "does with partitions and topics and so",
    "start": "309340",
    "end": "311020"
  },
  {
    "text": "on and so we have some ordering",
    "start": "311020",
    "end": "312880"
  },
  {
    "text": "guarantees and we have pretty good",
    "start": "312880",
    "end": "314260"
  },
  {
    "text": "parallelism on the consumer side you can",
    "start": "314260",
    "end": "318160"
  },
  {
    "text": "ask me more about that later for you if",
    "start": "318160",
    "end": "320110"
  },
  {
    "text": "you're dying to know how it works so",
    "start": "320110",
    "end": "325560"
  },
  {
    "start": "325000",
    "end": "370000"
  },
  {
    "text": "lesson number two is around i dint",
    "start": "325560",
    "end": "331600"
  },
  {
    "text": "potency so Adam policy is that you can",
    "start": "331600",
    "end": "334240"
  },
  {
    "text": "do the same operation twice and it's not",
    "start": "334240",
    "end": "335860"
  },
  {
    "text": "going to have any adverse side effects",
    "start": "335860",
    "end": "338370"
  },
  {
    "text": "and so we apply this to our whole",
    "start": "338370",
    "end": "341500"
  },
  {
    "text": "analytics pipeline there's some parts",
    "start": "341500",
    "end": "344440"
  },
  {
    "text": "where we have yet to make it work but on",
    "start": "344440",
    "end": "346900"
  },
  {
    "text": "the whole it works and that is when",
    "start": "346900",
    "end": "351729"
  },
  {
    "text": "we're running with our business logic",
    "start": "351729",
    "end": "354220"
  },
  {
    "text": "that computes all of the metrics and so",
    "start": "354220",
    "end": "356080"
  },
  {
    "text": "on if there's a bug in your business",
    "start": "356080",
    "end": "357760"
  },
  {
    "text": "logic not so it crashes but so it makes",
    "start": "357760",
    "end": "360130"
  },
  {
    "text": "the incorrect calculations and we want",
    "start": "360130",
    "end": "364030"
  },
  {
    "text": "to be able to go back in time I kind of",
    "start": "364030",
    "end": "367000"
  },
  {
    "text": "fix it and we do it so this is how we do",
    "start": "367000",
    "end": "370180"
  },
  {
    "start": "370000",
    "end": "435000"
  },
  {
    "text": "that so we have some this is a concept",
    "start": "370180",
    "end": "375729"
  },
  {
    "text": "that we call a checkpoint and I need to",
    "start": "375729",
    "end": "380770"
  },
  {
    "text": "explain a bit more like the background",
    "start": "380770",
    "end": "382120"
  },
  {
    "text": "and so we process everything in 24 hour",
    "start": "382120",
    "end": "385930"
  },
  {
    "text": "patches and so a metric like revenue per",
    "start": "385930",
    "end": "389590"
  },
  {
    "text": "day only make sense if you have 24 hours",
    "start": "389590",
    "end": "391780"
  },
  {
    "text": "worth of data so that's the window so",
    "start": "391780",
    "end": "395140"
  },
  {
    "text": "our streaming real-time analytics system",
    "start": "395140",
    "end": "397890"
  },
  {
    "text": "what it does is really",
    "start": "397890",
    "end": "399680"
  },
  {
    "text": "keeps 24 hours of data in memory which",
    "start": "399680",
    "end": "402020"
  },
  {
    "text": "keeps one day of data in memory at any",
    "start": "402020",
    "end": "404600"
  },
  {
    "text": "point and then once the day is over you",
    "start": "404600",
    "end": "409310"
  },
  {
    "text": "know the revenue for that day and you",
    "start": "409310",
    "end": "410660"
  },
  {
    "text": "can write it into a database so this is",
    "start": "410660",
    "end": "412639"
  },
  {
    "text": "the same as if you run a rep reduced job",
    "start": "412639",
    "end": "414380"
  },
  {
    "text": "like on yesterday's data and we do the",
    "start": "414380",
    "end": "417410"
  },
  {
    "text": "same except on today's data where we",
    "start": "417410",
    "end": "419600"
  },
  {
    "text": "don't have all of data yet so it's kind",
    "start": "419600",
    "end": "421160"
  },
  {
    "text": "of like a partial we can run it on",
    "start": "421160",
    "end": "423560"
  },
  {
    "text": "partial data and it's the state sticks",
    "start": "423560",
    "end": "427639"
  },
  {
    "text": "around instead of the reducers which we",
    "start": "427639",
    "end": "429979"
  },
  {
    "text": "didn't actually use the query and to get",
    "start": "429979",
    "end": "432710"
  },
  {
    "text": "the real-time data anyway so this check",
    "start": "432710",
    "end": "436310"
  },
  {
    "text": "pointing system what it means is that we",
    "start": "436310",
    "end": "440780"
  },
  {
    "text": "have like last successful day we",
    "start": "440780",
    "end": "445310"
  },
  {
    "text": "processed that's the last checkpoint and",
    "start": "445310",
    "end": "447380"
  },
  {
    "text": "so when our system starts up we go and",
    "start": "447380",
    "end": "449270"
  },
  {
    "text": "we go and read this checkpoint and then",
    "start": "449270",
    "end": "451509"
  },
  {
    "text": "we go into a log and we find all of the",
    "start": "451509",
    "end": "455599"
  },
  {
    "text": "data that occurred after this checkpoint",
    "start": "455599",
    "end": "459370"
  },
  {
    "text": "and then we process all of that until",
    "start": "459370",
    "end": "461660"
  },
  {
    "text": "the next checkpoint which would be the",
    "start": "461660",
    "end": "464750"
  },
  {
    "text": "next day so in this example from the",
    "start": "464750",
    "end": "466699"
  },
  {
    "text": "first of October midnight to the second",
    "start": "466699",
    "end": "468919"
  },
  {
    "text": "of October midnight and we can actually",
    "start": "468919",
    "end": "474740"
  },
  {
    "text": "know when all of the data has been",
    "start": "474740",
    "end": "478070"
  },
  {
    "text": "received and since we can go we know we",
    "start": "478070",
    "end": "483260"
  },
  {
    "text": "have this collective services and we can",
    "start": "483260",
    "end": "484610"
  },
  {
    "text": "know where there are n times we can",
    "start": "484610",
    "end": "485930"
  },
  {
    "text": "actually see that now all of the",
    "start": "485930",
    "end": "488449"
  },
  {
    "text": "collector services have sent all of the",
    "start": "488449",
    "end": "491360"
  },
  {
    "text": "data for the previous day and then it's",
    "start": "491360",
    "end": "493310"
  },
  {
    "text": "safe for us to say we have received",
    "start": "493310",
    "end": "495169"
  },
  {
    "text": "everything everything is kind of good to",
    "start": "495169",
    "end": "496940"
  },
  {
    "text": "go we can write everything to database",
    "start": "496940",
    "end": "499550"
  },
  {
    "text": "and then here comes like the big idea",
    "start": "499550",
    "end": "503650"
  },
  {
    "text": "that we also overwrite anything that is",
    "start": "503650",
    "end": "507229"
  },
  {
    "text": "already inside of the database and what",
    "start": "507229",
    "end": "510710"
  },
  {
    "text": "this means is that lets say you use my",
    "start": "510710",
    "end": "513020"
  },
  {
    "text": "sequel for example to store the kind of",
    "start": "513020",
    "end": "514849"
  },
  {
    "text": "computing metrics so use to a revenue",
    "start": "514849",
    "end": "516890"
  },
  {
    "text": "per day as just a number instead of my",
    "start": "516890",
    "end": "519320"
  },
  {
    "text": "sequel we also see me set up in such a",
    "start": "519320",
    "end": "523370"
  },
  {
    "text": "way as we don't get duplicate rows so",
    "start": "523370",
    "end": "525649"
  },
  {
    "text": "let's say we mess up some at some point",
    "start": "525649",
    "end": "528980"
  },
  {
    "text": "during the day or we mess up when you're",
    "start": "528980",
    "end": "531050"
  },
  {
    "text": "right into the database we partially",
    "start": "531050",
    "end": "532220"
  },
  {
    "text": "right",
    "start": "532220",
    "end": "533390"
  },
  {
    "text": "so we write eighty percent of the",
    "start": "533390",
    "end": "534680"
  },
  {
    "text": "metrics for example then we need to go",
    "start": "534680",
    "end": "537260"
  },
  {
    "text": "back and redo that and this is the safe",
    "start": "537260",
    "end": "539690"
  },
  {
    "text": "to do we can do it many times it's over",
    "start": "539690",
    "end": "541580"
  },
  {
    "text": "right anything that is already in there",
    "start": "541580",
    "end": "544480"
  },
  {
    "text": "and then if that is successful we set",
    "start": "544480",
    "end": "547940"
  },
  {
    "text": "the checkpoint to the next window that",
    "start": "547940",
    "end": "551240"
  },
  {
    "text": "we just successfully saved crystal clear",
    "start": "551240",
    "end": "558850"
  },
  {
    "text": "so what if you want to have a system",
    "start": "559690",
    "end": "564230"
  },
  {
    "start": "560000",
    "end": "671000"
  },
  {
    "text": "like this like where can you get one so",
    "start": "564230",
    "end": "567740"
  },
  {
    "text": "we built our own system to do this and",
    "start": "567740",
    "end": "569540"
  },
  {
    "text": "it's like Erlang in-memory distributed",
    "start": "569540",
    "end": "571700"
  },
  {
    "text": "system because there was no alternative",
    "start": "571700",
    "end": "575390"
  },
  {
    "text": "when we started today there are actually",
    "start": "575390",
    "end": "578660"
  },
  {
    "text": "some alternatives like this a purchase",
    "start": "578660",
    "end": "580130"
  },
  {
    "text": "some stuff for example which does",
    "start": "580130",
    "end": "581530"
  },
  {
    "text": "exactly what you want and a lot more and",
    "start": "581530",
    "end": "585020"
  },
  {
    "text": "a lot better so you should totally go",
    "start": "585020",
    "end": "587330"
  },
  {
    "text": "and have a look at that I think today if",
    "start": "587330",
    "end": "590450"
  },
  {
    "text": "it was started put it over today",
    "start": "590450",
    "end": "591790"
  },
  {
    "text": "definitely we would have a hard look at",
    "start": "591790",
    "end": "594070"
  },
  {
    "text": "Apache some stuff before we would do",
    "start": "594070",
    "end": "596450"
  },
  {
    "text": "anything different as a purchase am sir",
    "start": "596450",
    "end": "599630"
  },
  {
    "text": "does uses a kafka runs inside of Hadoop",
    "start": "599630",
    "end": "602930"
  },
  {
    "text": "yarn it does all of this checkpointing",
    "start": "602930",
    "end": "605030"
  },
  {
    "text": "but much nicer has much more fault",
    "start": "605030",
    "end": "607790"
  },
  {
    "text": "tolerance and so on then we do and so",
    "start": "607790",
    "end": "610490"
  },
  {
    "text": "check that out okay thank you so we use",
    "start": "610490",
    "end": "624770"
  },
  {
    "text": "DynamoDB for a lot of stuff yeah all of",
    "start": "624770",
    "end": "631490"
  },
  {
    "text": "you forever yeah it's so so we just pay",
    "start": "631490",
    "end": "638000"
  },
  {
    "text": "money to Amazon so we don't worry so",
    "start": "638000",
    "end": "640640"
  },
  {
    "text": "much about that are a table now with",
    "start": "640640",
    "end": "643610"
  },
  {
    "text": "metrics contains over a billion entries",
    "start": "643610",
    "end": "645740"
  },
  {
    "text": "but i still think is we've only played a",
    "start": "645740",
    "end": "648050"
  },
  {
    "text": "couple of hundred dollars a month for",
    "start": "648050",
    "end": "649640"
  },
  {
    "text": "that table so we don't we don't really",
    "start": "649640",
    "end": "652100"
  },
  {
    "text": "care thank you",
    "start": "652100",
    "end": "657160"
  },
  {
    "text": "you",
    "start": "662370",
    "end": "664430"
  }
]