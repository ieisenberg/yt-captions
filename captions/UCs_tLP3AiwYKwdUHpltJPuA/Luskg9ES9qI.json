[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "my name is michael nygard i'm a cto of relevance and author of the book release it",
    "start": "80",
    "end": "5440"
  },
  {
    "text": "uh and i'll be talking to you this afternoon about the deployment army and why we should get rid of them",
    "start": "5440",
    "end": "11920"
  },
  {
    "text": "what i mean by a deployment army is something like this this is a picture that a friend of mine",
    "start": "11920",
    "end": "18160"
  },
  {
    "text": "from a former client sent me and what you see here is a conference room",
    "start": "18160",
    "end": "23439"
  },
  {
    "text": "with about 40 people in the conference room some of them are behind the camera somewhere in front of the camera",
    "start": "23439",
    "end": "31679"
  },
  {
    "text": "in addition to the people in the conference room there is a uh polycom phone uh open to a conference",
    "start": "31679",
    "end": "38399"
  },
  {
    "text": "bridge with about an equal number of people on the phone as there are in the room this deployment began",
    "start": "38399",
    "end": "45920"
  },
  {
    "text": "at four in the afternoon actually it began a little bit before that when they sent some of their people home to take",
    "start": "45920",
    "end": "52480"
  },
  {
    "text": "naps so they could take the late shift because this deployment will continue until four in the morning",
    "start": "52480",
    "end": "59600"
  },
  {
    "text": "some of the notable steps during this deployment uh involve smoke testing by business users at one",
    "start": "59600",
    "end": "65760"
  },
  {
    "text": "in the morning where they have scripts of instructions that they're supposed to click around",
    "start": "65760",
    "end": "71119"
  },
  {
    "text": "the the site and make sure that everything's working okay now of course you can imagine that at one in the morning not",
    "start": "71119",
    "end": "76560"
  },
  {
    "text": "everyone is at their full alertness and so some of the people executing some of the scripts report",
    "start": "76560",
    "end": "82240"
  },
  {
    "text": "random errors that aren't actually errors but are known conditions from years ago",
    "start": "82240",
    "end": "87360"
  },
  {
    "text": "some people click incorrectly and report errors that are their own errors not the",
    "start": "87360",
    "end": "92720"
  },
  {
    "text": "application errors it's a very noisy process it involves a lot of people",
    "start": "92720",
    "end": "99280"
  },
  {
    "text": "in fact they have so many people that they have steps in the plan for who to send out to get food at",
    "start": "99280",
    "end": "104479"
  },
  {
    "text": "various points in the night and they've added steps in the plan as time has gone by to make sure that",
    "start": "104479",
    "end": "109520"
  },
  {
    "text": "someone empties the trash cans from all the containers from the food that they bring in to feed all of these",
    "start": "109520",
    "end": "114960"
  },
  {
    "text": "people this is the deployment army it's a",
    "start": "114960",
    "end": "120320"
  },
  {
    "start": "120000",
    "end": "416000"
  },
  {
    "text": "remarkably persistent structure it is also an anti-pattern it",
    "start": "120320",
    "end": "126960"
  },
  {
    "text": "develops because of this belief this self-fulfilling prophecy the self-fulfilling prophecy",
    "start": "126960",
    "end": "133040"
  },
  {
    "text": "says we have risk created by these large infrequent",
    "start": "133040",
    "end": "138959"
  },
  {
    "text": "releases a certain amount of unknown code or inventory that's being deployed and this",
    "start": "138959",
    "end": "144640"
  },
  {
    "text": "risk produces threatening situations threatening to the business and threatening to individuals who get blamed if things",
    "start": "144640",
    "end": "151360"
  },
  {
    "text": "don't go well during the deployment their ingrained response to this",
    "start": "151360",
    "end": "157120"
  },
  {
    "text": "ambiguous or uncertain environment is to apply people to it and so they",
    "start": "157120",
    "end": "162560"
  },
  {
    "text": "have this belief that the deployment army is the best way to react to unknown situations",
    "start": "162560",
    "end": "168000"
  },
  {
    "text": "now it is a self-fulfilling prophecy because humans are good at reacting to unknown or novel situations",
    "start": "168000",
    "end": "173440"
  },
  {
    "text": "much better than automation or scripts in fact but because this deployment army is",
    "start": "173440",
    "end": "179920"
  },
  {
    "text": "there it's a very costly process you can imagine if we've got approximately 80 people",
    "start": "179920",
    "end": "186959"
  },
  {
    "text": "spending almost a 24-hour period doing these deployments when i walk in and say you ought to be",
    "start": "186959",
    "end": "193200"
  },
  {
    "text": "doing deployments once a week instead of once every quarter they kind of look at me like i'm insane",
    "start": "193200",
    "end": "199360"
  },
  {
    "text": "because given their context it would be insane to say you should do this every week",
    "start": "199360",
    "end": "204720"
  },
  {
    "text": "but that high cost of deployment actually reinforces this whole cycle the high cost of deployment means you do",
    "start": "204720",
    "end": "210879"
  },
  {
    "text": "less frequent releases and the less frequent the release is the larger it's going to be and therefore the riskier and more",
    "start": "210879",
    "end": "217280"
  },
  {
    "text": "threatening it's going to be creating more need for more humans",
    "start": "217280",
    "end": "222400"
  },
  {
    "text": "so you can see how this spiral works",
    "start": "222400",
    "end": "227840"
  },
  {
    "text": "eventually it produces paralysis if you go around this loop often enough you reach a point where you can't add",
    "start": "228799",
    "end": "235120"
  },
  {
    "text": "any more people you develop a playbook that's you know an excel spreadsheet printed out that",
    "start": "235120",
    "end": "240959"
  },
  {
    "text": "thick eventually you just hit the point where it's impossible to add any more to this",
    "start": "240959",
    "end": "247439"
  },
  {
    "text": "process and you feel like you can't take anything away from this process and then you're stuck",
    "start": "247439",
    "end": "255280"
  },
  {
    "text": "i'm going to talk about what we can do about it i'm not all you know pessimism and gloom and doom there are some solutions but first i",
    "start": "255280",
    "end": "262079"
  },
  {
    "text": "want to look at why this situation uh comes about in the first place why it persists",
    "start": "262079",
    "end": "267360"
  },
  {
    "text": "and why people perceive a conflict now i'm a believer in the theory of constraints and in the theory of",
    "start": "267360",
    "end": "273840"
  },
  {
    "text": "constraints there's this tool called the evaporating cloud it's a great name your problems simply",
    "start": "273840",
    "end": "279440"
  },
  {
    "text": "evaporate the idea is that you try to identify the root cause of a conflict",
    "start": "279440",
    "end": "285360"
  },
  {
    "text": "based on uh conflicting assumptions rather than real uh conflicting imperatives and so",
    "start": "285360",
    "end": "291919"
  },
  {
    "text": "the conflict we're going to look at here is achieving financial success in your company",
    "start": "291919",
    "end": "297840"
  },
  {
    "text": "along one branch of this cloud we have an idea that we want the benefits of being agile and we want",
    "start": "297840",
    "end": "303919"
  },
  {
    "text": "continuous integration all the way through to production that's what we're here to talk about that's what continuous delivery is all",
    "start": "303919",
    "end": "309199"
  },
  {
    "text": "about that's the cheerleading that we've done and we've heard about for quite some",
    "start": "309199",
    "end": "315039"
  },
  {
    "text": "time and that branch looks something like this financial success is produced by high",
    "start": "315039",
    "end": "320960"
  },
  {
    "text": "velocity and short cycles which means we need to do more deployments",
    "start": "320960",
    "end": "327039"
  },
  {
    "text": "but there's another branch of this cloud which says financial success is achieved by avoiding losses from",
    "start": "327039",
    "end": "334080"
  },
  {
    "text": "downtime bugs problems with legal compliance uh brand uh brand reputation loss and so",
    "start": "334080",
    "end": "342720"
  },
  {
    "text": "on and along that branch of the financial success path we see we need to reduce risk which",
    "start": "342720",
    "end": "348960"
  },
  {
    "text": "means we should be doing fewer deployments well when we put these two branches together we see the conflict",
    "start": "348960",
    "end": "356240"
  },
  {
    "text": "it looks like we have two things that we both need or that we need both of them to",
    "start": "356240",
    "end": "361600"
  },
  {
    "text": "produce financial success i contend that this is not actually an",
    "start": "361600",
    "end": "368080"
  },
  {
    "text": "inherent conflict we don't need both more deployments and fewer deployments we need to look at these assumptions",
    "start": "368080",
    "end": "373840"
  },
  {
    "text": "about low risk and high risk and so we're going to do",
    "start": "373840",
    "end": "378880"
  },
  {
    "text": "that when we talk about risk some people use",
    "start": "378880",
    "end": "385039"
  },
  {
    "text": "a very colloquial definition of risk risk means there's a chance that something bad is going to happen",
    "start": "385039",
    "end": "391840"
  },
  {
    "text": "risk means i feel nervous or uncomfortable risk can even just be a scare word that",
    "start": "391840",
    "end": "397440"
  },
  {
    "text": "you throw into a conversation the way that some politicians like to throw it into conversations",
    "start": "397440",
    "end": "403759"
  },
  {
    "text": "label something a risky scheme when you just don't want it to happen but have no other argument against it",
    "start": "403759",
    "end": "410800"
  },
  {
    "text": "we're going to use a more nuanced definition of risk we're going to say risk is the expected",
    "start": "410800",
    "end": "416960"
  },
  {
    "start": "416000",
    "end": "561000"
  },
  {
    "text": "losses from undesirable events and i mean expected losses in the statistical sense",
    "start": "416960",
    "end": "422160"
  },
  {
    "text": "if i do this trial enough times i can average out the times that it goes badly and i lose",
    "start": "422160",
    "end": "428000"
  },
  {
    "text": "something and the times that it does not go badly and i don't lose anything so we reach this notion of expected",
    "start": "428000",
    "end": "434479"
  },
  {
    "text": "losses and we can look at that as our risk exposure",
    "start": "434479",
    "end": "441199"
  },
  {
    "text": "risk exposure is often expressed in terms of the annual loss expectancy or al annual loss expectancy",
    "start": "441199",
    "end": "449520"
  },
  {
    "text": "is used in um actuarial markets like life insurance and health insurance it's",
    "start": "449520",
    "end": "455440"
  },
  {
    "text": "used in security management uh for uh for i.t security as well",
    "start": "455440",
    "end": "461680"
  },
  {
    "text": "and to arrive at the loss expectancy we basically run a small equation that",
    "start": "461680",
    "end": "466800"
  },
  {
    "text": "says we have a number of events at which a loss could occur we have a",
    "start": "466800",
    "end": "471840"
  },
  {
    "text": "probability of any one of those events being erroneous thus producing the loss",
    "start": "471840",
    "end": "477520"
  },
  {
    "text": "and we have a cost each time one of those events does occur so the number of events times the",
    "start": "477520",
    "end": "483280"
  },
  {
    "text": "probability times the cost that gives us our expected losses",
    "start": "483280",
    "end": "489039"
  },
  {
    "text": "this is a useful definition of risk because if we have expected losses in some kind of economic terms",
    "start": "489599",
    "end": "494800"
  },
  {
    "text": "then we can decide first of all how do we minimize it and more crucially is the loss actually",
    "start": "494800",
    "end": "502400"
  },
  {
    "text": "greater than the gains that we could achieve by doing something else humans are very bad at economic decision",
    "start": "502400",
    "end": "509440"
  },
  {
    "text": "making on an intuitive basis and we've had study after study that shows this so we will tend to be loss averse",
    "start": "509440",
    "end": "518320"
  },
  {
    "text": "if you ask someone whether they're going to bet a 50 50 chance on winning a million dollars",
    "start": "518320",
    "end": "523839"
  },
  {
    "text": "or hold on to a hundred thousand dollars they'll hold on to what they've got rather than taking the chance",
    "start": "523839",
    "end": "530320"
  },
  {
    "text": "even though mathematically they should take the chance",
    "start": "530320",
    "end": "535839"
  },
  {
    "text": "so if you simply present the loss people will try to avoid the loss every time but if you present the laws",
    "start": "536720",
    "end": "543760"
  },
  {
    "text": "and you present the gain available then you have a chance of getting a rational decision after plenty of meetings and",
    "start": "543760",
    "end": "550880"
  },
  {
    "text": "plenty of arguments and proof from other places and so on",
    "start": "550880",
    "end": "556160"
  },
  {
    "text": "let's do an example of this kind of an exposure calculation let's suppose uh i'm running a retail",
    "start": "556160",
    "end": "562640"
  },
  {
    "start": "561000",
    "end": "766000"
  },
  {
    "text": "site and i have some kind of a bug in my checkout process um i have a lot of checkouts per year",
    "start": "562640",
    "end": "570399"
  },
  {
    "text": "something like you know 10 to the 6th 10th to the 8th i can't actually read anymore 10 to the",
    "start": "570399",
    "end": "576320"
  },
  {
    "text": "8th so we have a lot of checkouts happening per year but it's not a very common bug it's",
    "start": "576320",
    "end": "582560"
  },
  {
    "text": "something that occurs just once in a while and so the the odds of it occurring are small",
    "start": "582560",
    "end": "589680"
  },
  {
    "text": "we have a large number of events and the cost of each of those events is basically whatever's",
    "start": "589680",
    "end": "595680"
  },
  {
    "text": "in the cart and we can say there's an average value of a shopping cart",
    "start": "595680",
    "end": "600720"
  },
  {
    "text": "call it perhaps 25 euro and i can multiply all these together",
    "start": "600720",
    "end": "606560"
  },
  {
    "text": "and say how much i should be willing to pay to fix this bug",
    "start": "606560",
    "end": "612000"
  },
  {
    "text": "how much am i going to lose on this particular bug per year it works out to uh about 131 euro per",
    "start": "612000",
    "end": "619920"
  },
  {
    "text": "year so how much should i be willing to pay to fix this bug",
    "start": "619920",
    "end": "625760"
  },
  {
    "text": "well if the system's going to live for one year i should be willing to pay only up to 131 euro to fix the bug",
    "start": "625760",
    "end": "632560"
  },
  {
    "text": "otherwise i'm paying more to fix the bug than i'm losing from the bug if my system has a design life of five",
    "start": "632560",
    "end": "639440"
  },
  {
    "text": "years i should be willing to pay about 650 euro to fix the bug because i'll save that much over the",
    "start": "639440",
    "end": "644560"
  },
  {
    "text": "five years of the system and if i have a 10-year life and and so on you can work out the expected losses",
    "start": "644560",
    "end": "650720"
  },
  {
    "text": "from this bug over time and then balance that against what it costs to offset it",
    "start": "650720",
    "end": "656240"
  },
  {
    "text": "so this is an example of dealing with a small and relatively frequently occurring event",
    "start": "656240",
    "end": "662240"
  },
  {
    "text": "so these checkouts happen all the time the cost of each one is relatively small there are similar methods for dealing",
    "start": "662240",
    "end": "669040"
  },
  {
    "text": "with the really large horrible scenarios so there are people who who",
    "start": "669040",
    "end": "674079"
  },
  {
    "text": "spend their time thinking about wonderful things like what would it cost if an asteroid hit the earth",
    "start": "674079",
    "end": "680800"
  },
  {
    "text": "i like to read these on the beach during the summer time",
    "start": "680800",
    "end": "686160"
  },
  {
    "text": "one book i can recommend is called quantifying and controlling catastrophic risks",
    "start": "686320",
    "end": "691680"
  },
  {
    "text": "the method is not dissimilar the hard part is getting data because we don't have a lot of asteroid impacts per year to measure and",
    "start": "691680",
    "end": "698399"
  },
  {
    "text": "measure the cost of them and we expect that when they do happen it's going to be very expensive",
    "start": "698399",
    "end": "703680"
  },
  {
    "text": "um the author of that one john garrick also did a wonderful analysis on the actuarial impact of nuclear war",
    "start": "703680",
    "end": "711279"
  },
  {
    "text": "so maybe you'll want that for your summer beach reading",
    "start": "711279",
    "end": "717839"
  },
  {
    "text": "when we talk about risk and loss we can start grouping the risk into a couple of categories",
    "start": "718720",
    "end": "726399"
  },
  {
    "text": "one of them is compliance risk so this says there's uh some regulation or some law",
    "start": "726399",
    "end": "733839"
  },
  {
    "text": "or some industry body and if i'm non-compliant with it they can levy fines against me",
    "start": "733839",
    "end": "741279"
  },
  {
    "text": "the other kind is the technical risk more like the bug in checkout where i'm producing the losses myself",
    "start": "741279",
    "end": "749120"
  },
  {
    "text": "compliance risk is sort of tough to deal with it tends to be industry specific and if",
    "start": "749200",
    "end": "754720"
  },
  {
    "text": "you're in one of these industries with a lot of regulation you're probably dealing with approval bodies third-party testing agencies and",
    "start": "754720",
    "end": "761440"
  },
  {
    "text": "the like and there's a few things you can do you can deliver into a certification",
    "start": "761440",
    "end": "767440"
  },
  {
    "start": "766000",
    "end": "801000"
  },
  {
    "text": "environment and you can deliver continuously into a certification environment and then get certified once a year or",
    "start": "767440",
    "end": "772800"
  },
  {
    "text": "whatever frequency that the certifying agency allows you can make sure that you pass on your",
    "start": "772800",
    "end": "779600"
  },
  {
    "text": "first time through the certification but that's probably about all i can say",
    "start": "779600",
    "end": "785519"
  },
  {
    "text": "on the compliance risk it's simply a friction in your process that you have to deal with",
    "start": "785519",
    "end": "791440"
  },
  {
    "text": "i can say a lot more about the technical risk because that's much more under our control and so that's where i'm going to spend",
    "start": "791440",
    "end": "796639"
  },
  {
    "text": "the rest of the the session focusing when we're managing our technical risk",
    "start": "796639",
    "end": "803680"
  },
  {
    "start": "801000",
    "end": "864000"
  },
  {
    "text": "particularly related to delivery we're going to think about our aoe equation and look at how",
    "start": "803680",
    "end": "809839"
  },
  {
    "text": "each of these variables is affected by doing continuous delivery",
    "start": "809839",
    "end": "815279"
  },
  {
    "text": "so the number of events is going to increase that's sort of a given that's what we",
    "start": "815279",
    "end": "821600"
  },
  {
    "text": "that's actually what we want to achieve we want the number of events to go up so we can work on decreasing the",
    "start": "821600",
    "end": "828639"
  },
  {
    "text": "probability of an error and decreasing the cost when an error does occur",
    "start": "828639",
    "end": "833760"
  },
  {
    "text": "and that's where we need to focus so i have a little comparison chart that",
    "start": "833760",
    "end": "839279"
  },
  {
    "text": "we'll come back to and revisit a few times",
    "start": "839279",
    "end": "843839"
  },
  {
    "text": "we want to make sure that the decrease in the probability of error and the cost of an error is large enough",
    "start": "846079",
    "end": "851920"
  },
  {
    "text": "to offset the increase in the number of events that we're going to be doing and so let's look at where the",
    "start": "851920",
    "end": "859040"
  },
  {
    "text": "probabilities of errors come from and see what we can do with it certainly defects in code are one of them",
    "start": "859040",
    "end": "866240"
  },
  {
    "start": "864000",
    "end": "1127000"
  },
  {
    "text": "but that's not the only place you can get errors because the code can all be fine and your unit test can pass",
    "start": "866240",
    "end": "871600"
  },
  {
    "text": "but then when you put everything together and you push it out into the environment maybe things don't work out there so",
    "start": "871600",
    "end": "877440"
  },
  {
    "text": "that would be an error in assembly you left your development configs in the package that you put into",
    "start": "877440",
    "end": "884399"
  },
  {
    "text": "production and so you're trying to connect to a development database that's not accessible from the production environment",
    "start": "884399",
    "end": "889839"
  },
  {
    "text": "that would be an assembly or packaging error you can also just have an error in executing the change and when i was",
    "start": "889839",
    "end": "896720"
  },
  {
    "text": "doing it operations this was the most common kind of error that occurred we had something like 50 of all",
    "start": "896720",
    "end": "903440"
  },
  {
    "text": "of our outages immediately following a change to production now our changes were like the deployment",
    "start": "903440",
    "end": "909920"
  },
  {
    "text": "army so it was all manually executed it was an administrator",
    "start": "909920",
    "end": "915360"
  },
  {
    "text": "copying commands out of a playbook and pasting them into a terminal",
    "start": "915360",
    "end": "921279"
  },
  {
    "text": "that's actually a good practice the copy and paste you know every once in a while you pick up some smart quotes from microsoft word",
    "start": "921279",
    "end": "928639"
  },
  {
    "text": "but most of the time copy and paste is relatively safe because you can't typo something you can't accidentally put in the wrong",
    "start": "928639",
    "end": "934720"
  },
  {
    "text": "host name just out of finger memory habit",
    "start": "934720",
    "end": "941839"
  },
  {
    "text": "the defects in code are one of those things that accumulates over time the longer you go between deployments",
    "start": "944720",
    "end": "951120"
  },
  {
    "text": "the longer you build up inventory the more opportunities there are for defects the",
    "start": "951120",
    "end": "956959"
  },
  {
    "text": "more untested code you've got and we can look at this with something like",
    "start": "956959",
    "end": "962160"
  },
  {
    "text": "a continuous flow diagram a continuous flow diagram comes from the lean school of process control",
    "start": "962160",
    "end": "969199"
  },
  {
    "text": "and basically it looks at things entering a process and things exiting a process but instead",
    "start": "969199",
    "end": "976079"
  },
  {
    "text": "of counting sort of the number of things in process and having the the wavy line like that you simply add up one line every time",
    "start": "976079",
    "end": "983519"
  },
  {
    "text": "something enters and you add up another line every time something leaves it looks something like this what we can",
    "start": "983519",
    "end": "989839"
  },
  {
    "text": "see here is the red line representing code that's been checked in it's been you know unit tested and",
    "start": "989839",
    "end": "996560"
  },
  {
    "text": "feature complete and it's done to your team's definition of done",
    "start": "996560",
    "end": "1002079"
  },
  {
    "text": "it increases monotonically we never subtract from it it's continuous flow so we keep going up",
    "start": "1002079",
    "end": "1007360"
  },
  {
    "text": "what we have on the black line is deployments so nothing nothing nothing and then all",
    "start": "1007360",
    "end": "1013920"
  },
  {
    "text": "at once there's a big deployment with a whack of code that goes out and then nothing nothing nothing again for a",
    "start": "1013920",
    "end": "1019199"
  },
  {
    "text": "while and then another whack of code goes out and the nice thing about a continuous",
    "start": "1019199",
    "end": "1024400"
  },
  {
    "text": "flow diagram is that you can just look at the vertical distance between the two lines",
    "start": "1024400",
    "end": "1029438"
  },
  {
    "text": "and say that is my accumulated inventory that's how much work in progress i've built up that hasn't exited yet and",
    "start": "1029439",
    "end": "1037520"
  },
  {
    "text": "i believe that accumulated inventory and code more or less linearly equals accumulated",
    "start": "1037520",
    "end": "1044160"
  },
  {
    "text": "risk in code so this is a diagram of of a batch",
    "start": "1044160",
    "end": "1049760"
  },
  {
    "text": "deployment or punctuated deployment if i take exactly the same flow of",
    "start": "1049760",
    "end": "1055760"
  },
  {
    "text": "features so the red line is going to remain the same but i just moved to a daily deployment following one day after the code is",
    "start": "1055760",
    "end": "1062640"
  },
  {
    "text": "checked in the cfd looks something like this",
    "start": "1062640",
    "end": "1067840"
  },
  {
    "text": "you if you're in the back you might not even be able to see the amount of accumulated risk between these two lines i've done",
    "start": "1068799",
    "end": "1076640"
  },
  {
    "text": "nothing else but change my deployment frequency so it more closely matches the frequency of checking things in",
    "start": "1076640",
    "end": "1081760"
  },
  {
    "text": "but i've dramatically reduced the amount of accumulated risk that's built into my pipeline at any point in time",
    "start": "1081760",
    "end": "1088960"
  },
  {
    "text": "this is the type of thing that we get with companies like etsy and flickr and soundcloud and so on",
    "start": "1089039",
    "end": "1094559"
  },
  {
    "text": "who are doing continuous delivery and getting their code out there and validated in production as rapidly as possible",
    "start": "1094559",
    "end": "1100480"
  },
  {
    "text": "because production truly is the only place you can validate all of your code",
    "start": "1100480",
    "end": "1108000"
  },
  {
    "text": "way to achieve this is with the build pipeline idea some of you have probably seen this before if you've read jess's book you've",
    "start": "1108000",
    "end": "1114400"
  },
  {
    "text": "definitely seen this before the notion of a build pipeline is you're essentially extending your continuous",
    "start": "1114400",
    "end": "1120080"
  },
  {
    "text": "integration flow which is this and you're making that reach out all the way to",
    "start": "1120080",
    "end": "1126559"
  },
  {
    "text": "your qa environment and eventually to your production environment deploying as you go and applying",
    "start": "1126559",
    "end": "1134640"
  },
  {
    "start": "1127000",
    "end": "1180000"
  },
  {
    "text": "tests for things like non-functional requirements in an automated fashion as you go through",
    "start": "1134640",
    "end": "1140080"
  },
  {
    "text": "and you tag your tree and you log and you measure it every step along the way so when it fails you can tell where it",
    "start": "1140080",
    "end": "1147120"
  },
  {
    "text": "failed and why and go back and either fix the pipeline in about half the cases or fix your code",
    "start": "1147120",
    "end": "1153200"
  },
  {
    "text": "in about half the cases now this is a fairly lengthy build",
    "start": "1153200",
    "end": "1158640"
  },
  {
    "text": "pipeline and it looks a lot like what you would do manually it's a good place to start by taking what your manual deployments would be",
    "start": "1158640",
    "end": "1165039"
  },
  {
    "text": "and just translating them into an automated build pipeline as you get better at this you may add some stages or you may remove some",
    "start": "1165039",
    "end": "1170640"
  },
  {
    "text": "stages you may change the way that you're",
    "start": "1170640",
    "end": "1174960"
  },
  {
    "text": "assembling we can look at reducing our build and assembly errors",
    "start": "1176840",
    "end": "1182400"
  },
  {
    "start": "1180000",
    "end": "1293000"
  },
  {
    "text": "by applying some some practices we certainly want fast tests so we get",
    "start": "1182400",
    "end": "1187520"
  },
  {
    "text": "feedback right away a very good practice for reducing build errors is the",
    "start": "1187520",
    "end": "1193360"
  },
  {
    "text": "building servers clean from a definition in version control so using something like chef puppet or",
    "start": "1193360",
    "end": "1199280"
  },
  {
    "text": "cf engine so that you can commit all of your server definitions to version control",
    "start": "1199280",
    "end": "1205200"
  },
  {
    "text": "and keep those in sync with the needs of your application definitely building the application from",
    "start": "1205200",
    "end": "1211679"
  },
  {
    "text": "version control instead of building from you know a polluted dev box uh good practice i hope everyone's doing",
    "start": "1211679",
    "end": "1217760"
  },
  {
    "text": "that already if not that's an easy first step to begin",
    "start": "1217760",
    "end": "1223440"
  },
  {
    "text": "i still occasionally see environments where people are promoting sources and building on each target",
    "start": "1224240",
    "end": "1229600"
  },
  {
    "text": "environment this introduces a vector for change in that the target environment can have",
    "start": "1229600",
    "end": "1234799"
  },
  {
    "text": "a different dependency set than your production environment or then the earlier environments where",
    "start": "1234799",
    "end": "1240640"
  },
  {
    "text": "things have presumably worked and so you don't really want different versions of libraries creeping in",
    "start": "1240640",
    "end": "1246320"
  },
  {
    "text": "different snapshots of jar files and that that type of thing creeping in so building binaries once and then",
    "start": "1246320",
    "end": "1253039"
  },
  {
    "text": "promoting the binaries is a good practice and certainly deploying the same way everywhere helps",
    "start": "1253039",
    "end": "1259440"
  },
  {
    "text": "i've seen a lot of situations where developers don't do a deployment on their own machine they're just executing",
    "start": "1259440",
    "end": "1265520"
  },
  {
    "text": "directly out of the directory that they're they're building in and then they use something like capistrano to deploy to a staging",
    "start": "1265520",
    "end": "1271679"
  },
  {
    "text": "machine and then they use a virtual machine snapshot and deployment to reach production",
    "start": "1271679",
    "end": "1277360"
  },
  {
    "text": "and so we're using three different mechanisms in three different environments that more or less maximizes the opportunity for assembly errors to creep",
    "start": "1277360",
    "end": "1283919"
  },
  {
    "text": "in so we don't want to do that we want to build the same way and deploy the same way everywhere",
    "start": "1283919",
    "end": "1291840"
  },
  {
    "text": "i know i already said fast tests fast tests really are pretty important here so i i believe",
    "start": "1292799",
    "end": "1300240"
  },
  {
    "start": "1293000",
    "end": "1497000"
  },
  {
    "text": "fast tests are an essential practice some shops continue to do feature work",
    "start": "1300240",
    "end": "1308159"
  },
  {
    "text": "while the build is broken i don't advocate that i like to have a clean head of master",
    "start": "1308159",
    "end": "1314080"
  },
  {
    "text": "and if it's if the head of master is not building correctly you should not be committing new feature work you should first get back to a",
    "start": "1314080",
    "end": "1321120"
  },
  {
    "text": "green build and then continue feature work you can commit feature work on branches",
    "start": "1321120",
    "end": "1326880"
  },
  {
    "text": "but first priority on master is fixing master",
    "start": "1326880",
    "end": "1332480"
  },
  {
    "text": "as you get more advanced with your builds you can look at enforcing some of your architecture guidelines or standards",
    "start": "1332480",
    "end": "1338320"
  },
  {
    "text": "in the build process itself so one thing that we're taking an increasing look at is",
    "start": "1338320",
    "end": "1343919"
  },
  {
    "text": "dependency management and the things that we're pulling in it's been fairly common for us to have",
    "start": "1343919",
    "end": "1350000"
  },
  {
    "text": "a developer pull in a jar file so he could use one function from one class but then that jar file",
    "start": "1350000",
    "end": "1357280"
  },
  {
    "text": "brings in all of its friends on the bus so we end up with a stack of 40 jars",
    "start": "1357280",
    "end": "1363280"
  },
  {
    "text": "sometimes including entire other languages just because we needed one thing for",
    "start": "1363280",
    "end": "1369280"
  },
  {
    "text": "example i'm doing work in closure and i discovered jruby in its entirety existed in one of our projects because",
    "start": "1369280",
    "end": "1375600"
  },
  {
    "text": "a transitive dependency included jruby for its own interactive shell",
    "start": "1375600",
    "end": "1383120"
  },
  {
    "text": "some organizations are very careful about what licenses they'll allow and so this is another place where you can enforce license restrictions",
    "start": "1383919",
    "end": "1393039"
  },
  {
    "text": "if you have a separate development and operations group it is really important to get operations",
    "start": "1396159",
    "end": "1402000"
  },
  {
    "text": "involved in creating the deployment scripts so that same company that i showed you the picture of at the beginning",
    "start": "1402000",
    "end": "1408559"
  },
  {
    "text": "spent something like a million and a half dollars creating automated deployment scripts",
    "start": "1408559",
    "end": "1415360"
  },
  {
    "text": "the development group handed over the automated deployment scripts the operations group said well that's",
    "start": "1415360",
    "end": "1420480"
  },
  {
    "text": "great but we don't like that tool and so we're going to take those scripts and use them as specifications and then",
    "start": "1420480",
    "end": "1426960"
  },
  {
    "text": "we're going to write our own scripts in the tool that we like so this is an enormous waste of money",
    "start": "1426960",
    "end": "1432240"
  },
  {
    "text": "and the odds of those two things the the two sets of scripts doing exactly the same thing are",
    "start": "1432240",
    "end": "1437600"
  },
  {
    "text": "pretty small this could have been avoided uh had they gotten more buy-in from ops",
    "start": "1437600",
    "end": "1443919"
  },
  {
    "text": "at the beginning of the effort and worked directly in the tool that ops was eventually going to support",
    "start": "1443919",
    "end": "1450640"
  },
  {
    "text": "and of course if you haven't gotten the the message about deploying from head of trunk deploying from head of trunk is a really",
    "start": "1452000",
    "end": "1458559"
  },
  {
    "text": "good approach i favor feature branches as short-lived branches but then reintegrate against trunk some of you",
    "start": "1458559",
    "end": "1466480"
  },
  {
    "text": "may have seen this git flow article that talks about having a development branch and merging from",
    "start": "1466480",
    "end": "1471679"
  },
  {
    "text": "master into development and deploying off of development i found that that creates",
    "start": "1471679",
    "end": "1478080"
  },
  {
    "text": "too many opportunities for error people will merge things into development because they think it's just development but if you have a",
    "start": "1478080",
    "end": "1485520"
  },
  {
    "text": "culture that says master is deployable everyone will get that",
    "start": "1485520",
    "end": "1491760"
  },
  {
    "text": "in order to do these there are a few things you're going to have to set up in your environment i definitely think you need a package",
    "start": "1492880",
    "end": "1499279"
  },
  {
    "start": "1497000",
    "end": "1587000"
  },
  {
    "text": "repository you need some place that you can put your binaries that they can be safe",
    "start": "1499279",
    "end": "1504720"
  },
  {
    "text": "they can be check some they can have version stamps they won't get tampered with",
    "start": "1504720",
    "end": "1510400"
  },
  {
    "text": "you need logging for sure you need that for good operations anyway",
    "start": "1511919",
    "end": "1517600"
  },
  {
    "text": "and you need metrics to know if a change that you make is harmful and to know as rapidly as possible if",
    "start": "1517600",
    "end": "1522720"
  },
  {
    "text": "it's harmful i'll be revisiting the subject of metrics in a little while",
    "start": "1522720",
    "end": "1529279"
  },
  {
    "text": "so that's packaging and assembly errors the next kind of uh error that increases our probability",
    "start": "1529279",
    "end": "1535600"
  },
  {
    "text": "of errors is deployment itself and so let's look a little bit at ways to make deployments",
    "start": "1535600",
    "end": "1540840"
  },
  {
    "text": "safe having 40 people working off of a playbook where there's a step that says",
    "start": "1540840",
    "end": "1546559"
  },
  {
    "text": "you know we're going to call the dba and tell the dba to shut this off and then we're going to call this other person and",
    "start": "1546559",
    "end": "1552000"
  },
  {
    "text": "tell them to do that thing that that's sort of the opposite of making deployments safe",
    "start": "1552000",
    "end": "1557200"
  },
  {
    "text": "that kind of playbook evolves because someone really wants to be like nasa mission control",
    "start": "1557200",
    "end": "1564320"
  },
  {
    "text": "actually the best kind of deployment is one where you don't need a room full of people reporting to each other all the time",
    "start": "1564559",
    "end": "1570640"
  },
  {
    "text": "the deployment actually should be kind of invisible like nobody should even be able to tell when it happens except by",
    "start": "1570640",
    "end": "1575840"
  },
  {
    "text": "looking at a graph so there's a few patterns that you've heard mentioned today and that you've",
    "start": "1575840",
    "end": "1582640"
  },
  {
    "text": "perhaps seen elsewhere one of them is this notion of canary releasing",
    "start": "1582640",
    "end": "1587840"
  },
  {
    "start": "1587000",
    "end": "1755000"
  },
  {
    "text": "so in this pattern you take a pool of your capacity and you make it the test pool",
    "start": "1587840",
    "end": "1594080"
  },
  {
    "text": "or the dirty pool you deploy your new software to there and see how it does",
    "start": "1594080",
    "end": "1599840"
  },
  {
    "text": "it's called a canary from the the old story of bringing a canary it coal miners bringing a canary down into the coal",
    "start": "1600000",
    "end": "1606559"
  },
  {
    "text": "mine because if there was a buildup of carbon monoxide gas the canary would die first before the miners so the idea here",
    "start": "1606559",
    "end": "1614799"
  },
  {
    "text": "is if something's wrong the canary pool shows it first and the users",
    "start": "1614799",
    "end": "1620240"
  },
  {
    "text": "who are hitting the canary pool experience the problem first so this is reducing",
    "start": "1620240",
    "end": "1627840"
  },
  {
    "text": "the number of people exposed to a problem but it doesn't actually eliminate the problem",
    "start": "1627840",
    "end": "1633840"
  },
  {
    "text": "you do have to assume that a certain number of errors are still going to get through here so we're talking about reducing the",
    "start": "1633840",
    "end": "1639520"
  },
  {
    "text": "probability of error but we can't make it zero",
    "start": "1639520",
    "end": "1644000"
  },
  {
    "text": "another approach is uh something that jazz has written about called blue-green",
    "start": "1645919",
    "end": "1651200"
  },
  {
    "text": "deployments this is where you have two pools of capacity",
    "start": "1651200",
    "end": "1656559"
  },
  {
    "text": "you split them up into arbitrarily named blue and green pools you deploy your new code into",
    "start": "1656559",
    "end": "1663600"
  },
  {
    "text": "one of the environments you validate it you can run some smoke tests you want some monitoring and measurement",
    "start": "1663600",
    "end": "1670000"
  },
  {
    "text": "on both pools and then at some point you switch over to using that",
    "start": "1670000",
    "end": "1675760"
  },
  {
    "text": "my favorite tool for using that is this really cool high-tech name and dependency",
    "start": "1675760",
    "end": "1682559"
  },
  {
    "text": "resolution service called dns",
    "start": "1682559",
    "end": "1686720"
  },
  {
    "text": "at this point green becomes your new staging environment and it's the target of your next deployment",
    "start": "1687760",
    "end": "1694240"
  },
  {
    "text": "if you're in a cloud this is obviously very easy to do if you're not in any kind of a",
    "start": "1694640",
    "end": "1699919"
  },
  {
    "text": "virtualized environment it's going to be a little bit tougher because you do have to have some spare capacity laying around",
    "start": "1699919",
    "end": "1706320"
  },
  {
    "text": "another style of making deployments safe is using a virtual machine",
    "start": "1708399",
    "end": "1715360"
  },
  {
    "text": "based deployment so in this case you have a server not a dev machine a dev workstation but",
    "start": "1715360",
    "end": "1721440"
  },
  {
    "text": "a server that's your dev environment and at some point you say yes this is good i bless it",
    "start": "1721440",
    "end": "1727279"
  },
  {
    "text": "and you create a virtual machine based on that image and then you use that virtual machine to deploy into your",
    "start": "1727279",
    "end": "1733440"
  },
  {
    "text": "higher environments the key advantage here is there's very little opportunity for",
    "start": "1733440",
    "end": "1738880"
  },
  {
    "text": "errors to creep in during the deployment because you're not changing the essential machine",
    "start": "1738880",
    "end": "1744159"
  },
  {
    "text": "as you move through environments",
    "start": "1744159",
    "end": "1747279"
  },
  {
    "text": "the next approach you can use for making deployments very safe and predictable is configuration management based",
    "start": "1749760",
    "end": "1755840"
  },
  {
    "start": "1755000",
    "end": "1896000"
  },
  {
    "text": "deployments so in this scenario i've split up my capacity into",
    "start": "1755840",
    "end": "1761760"
  },
  {
    "text": "the control plane which manages the infrastructure and the service plane which actually",
    "start": "1761760",
    "end": "1767360"
  },
  {
    "text": "does the work not a lot of work is going to get done yet in this picture",
    "start": "1767360",
    "end": "1772960"
  },
  {
    "text": "but at some point i have a base image in the previous",
    "start": "1772960",
    "end": "1779440"
  },
  {
    "text": "slide i was showing you a fully configured application in that virtual machine in this slide i've got just the",
    "start": "1779440",
    "end": "1785440"
  },
  {
    "text": "operating system plus a configuration management client it knows how to talk to that config",
    "start": "1785440",
    "end": "1791200"
  },
  {
    "text": "server and that's about it so that basic machine gets instantiated in the service plane",
    "start": "1791200",
    "end": "1798799"
  },
  {
    "text": "and the first thing it does is it talks to the config server and asks who am i this is how",
    "start": "1798799",
    "end": "1805279"
  },
  {
    "text": "chef and puppet work cf engine also works this way so the machine asks",
    "start": "1805279",
    "end": "1811600"
  },
  {
    "text": "who am i what's my role what are my configurations it downloads those configurations pulls",
    "start": "1811600",
    "end": "1817840"
  },
  {
    "text": "packages from your package repository or from the config server and starts installing things on itself",
    "start": "1817840",
    "end": "1823840"
  },
  {
    "text": "if all of that succeeds it begins reporting its metrics to your your metrics server",
    "start": "1823840",
    "end": "1829840"
  },
  {
    "text": "and at some point it also needs to report its versions of everything back to the config server and it's",
    "start": "1829840",
    "end": "1836559"
  },
  {
    "text": "really important to close the loop here because kind of a common failure mode is one of your machines doesn't get updated",
    "start": "1836559",
    "end": "1843440"
  },
  {
    "text": "and so it's actually running old versions of stuff this is a really weird problem to detect",
    "start": "1843440",
    "end": "1849039"
  },
  {
    "text": "in production and so it's good to build a page into each of your apps that reports the",
    "start": "1849039",
    "end": "1854080"
  },
  {
    "text": "version that it's running and then collect all of those on your config server so you can look at a simple report",
    "start": "1854080",
    "end": "1859760"
  },
  {
    "text": "and immediately identify anyone that's running an old version of the software and then you blow that machine away and",
    "start": "1859760",
    "end": "1866720"
  },
  {
    "text": "start up a new one in its place now in order to do any of these things",
    "start": "1866720",
    "end": "1873600"
  },
  {
    "text": "that i've just talked about you do have to put in place some kind of a zero downtime deployment mechanism",
    "start": "1873600",
    "end": "1881200"
  },
  {
    "text": "because at some point in time you're going to have the new version of your system and the old version of your system",
    "start": "1881200",
    "end": "1886480"
  },
  {
    "text": "alive together so it's important to to do this in a",
    "start": "1886480",
    "end": "1891840"
  },
  {
    "text": "structured way so that you can handle things like database migrations",
    "start": "1891840",
    "end": "1897760"
  },
  {
    "start": "1896000",
    "end": "2153000"
  },
  {
    "text": "and you can split up your database migrations into a sequence of safe steps so that you're doing additive operations",
    "start": "1897760",
    "end": "1903279"
  },
  {
    "text": "first you get all of your code rolled out and then you do the subtractive or restrictive operations",
    "start": "1903279",
    "end": "1909600"
  },
  {
    "text": "so first you add tables and you add columns with one small change then you push out your code with another",
    "start": "1909600",
    "end": "1914720"
  },
  {
    "text": "small change and then once you're satisfied that everything's working you push out another change that leaves",
    "start": "1914720",
    "end": "1921360"
  },
  {
    "text": "the code alone but drops tables that you don't need anymore drops columns that you don't need",
    "start": "1921360",
    "end": "1926880"
  },
  {
    "text": "anymore adds any not null constraints that you might want to apply at that point",
    "start": "1926880",
    "end": "1933519"
  },
  {
    "text": "and so you do these in phases as you do this it is very important that",
    "start": "1933519",
    "end": "1939200"
  },
  {
    "text": "you think about how the different applications and services are going to know each other's",
    "start": "1939200",
    "end": "1945200"
  },
  {
    "text": "protocols as well so maybe you just build all of your applications to always speak",
    "start": "1945200",
    "end": "1950399"
  },
  {
    "text": "every version of every protocol they've ever spoken you could do that might be kind of a",
    "start": "1950399",
    "end": "1956399"
  },
  {
    "text": "costly approach you can build protocols that are forward compatible so they ignore any unexpected",
    "start": "1956399",
    "end": "1962640"
  },
  {
    "text": "elements this is a good approach and you can do it by explicitly negotiating what",
    "start": "1962640",
    "end": "1969679"
  },
  {
    "text": "protocol versions you're going to accept think about something like http content negotiation",
    "start": "1969679",
    "end": "1975120"
  },
  {
    "text": "where you have custom media types that represent versioned formats of your",
    "start": "1975120",
    "end": "1980640"
  },
  {
    "text": "representations and then you can say i accept version one and one one and one two",
    "start": "1980640",
    "end": "1986720"
  },
  {
    "text": "and then the server says i'm happy to give you one two but i'm not going to give you one one or one i don't do that anymore",
    "start": "1986720",
    "end": "1993840"
  },
  {
    "text": "another very key issue with zero downtime deployments is a decoupled architecture i'm going to talk",
    "start": "1995840",
    "end": "2002159"
  },
  {
    "text": "about this more a little bit later so i contend if we do these things you",
    "start": "2002159",
    "end": "2008640"
  },
  {
    "text": "know pick a safe deployment mechanism pick a safe assembly mechanism create a build pipeline that gives you visibility",
    "start": "2008640",
    "end": "2016159"
  },
  {
    "text": "you can actually reduce the probability of error to something quite low",
    "start": "2016159",
    "end": "2021600"
  },
  {
    "text": "but what would what can we do about the cost of an event by an event i mean you know some kind of",
    "start": "2022960",
    "end": "2029279"
  },
  {
    "text": "a downtime or crash or bad user experience this is where it gets kind of",
    "start": "2029279",
    "end": "2034559"
  },
  {
    "text": "interesting when you talk to people who don't have a kind of quantitative risk approach",
    "start": "2034559",
    "end": "2040159"
  },
  {
    "text": "because they start to talk about all kinds of scenarios and you see this weird sort of",
    "start": "2040159",
    "end": "2047039"
  },
  {
    "text": "uh glee in their eyes as they're talking about you know getting on the front page of the newspaper and getting called in",
    "start": "2047039",
    "end": "2053919"
  },
  {
    "text": "front of your legislative body to to testify about why they leaked everyone's credit card numbers or health",
    "start": "2053919",
    "end": "2060158"
  },
  {
    "text": "information or this kind of thing and and they have this sort of you know",
    "start": "2060159",
    "end": "2065440"
  },
  {
    "text": "apocalyptic joy as they're talking about these things i had a boss uh in a past job who",
    "start": "2065440",
    "end": "2072158"
  },
  {
    "text": "referred to this as the wouldn't it be horrible if scenarios or the wibihees",
    "start": "2072159",
    "end": "2078158"
  },
  {
    "text": "people love to talk about wibbihs in the same way they love to talk about movie plot threats",
    "start": "2078159",
    "end": "2085118"
  },
  {
    "text": "of course it's not a rational approach if you're engaging in webahis then the",
    "start": "2085119",
    "end": "2091200"
  },
  {
    "text": "cost of any event is unbounded right because you can't imagine a limit to how bad things could get",
    "start": "2091200",
    "end": "2099200"
  },
  {
    "text": "and of course if the cost of an event is unbounded then the things you should do to prevent it is essentially unbounded and you're",
    "start": "2099200",
    "end": "2105599"
  },
  {
    "text": "going to end up with 80 people in the conference room and on the phone doing deployments for 24 hours",
    "start": "2105599",
    "end": "2112720"
  },
  {
    "text": "the real cost of an event is uh it is bounded it is limited it adds up from",
    "start": "2112880",
    "end": "2118800"
  },
  {
    "text": "several factors you have direct losses so revenue uh and cost incurred during the event",
    "start": "2118800",
    "end": "2126079"
  },
  {
    "text": "you have some indirect losses a loss of brand reputation is an indirect loss the cost of people's",
    "start": "2126079",
    "end": "2133520"
  },
  {
    "text": "labor while they're responding to the event instead of building the next great thing that's a loss",
    "start": "2133520",
    "end": "2139520"
  },
  {
    "text": "but we can add all these up we can measure them and we can work to minimize them",
    "start": "2139520",
    "end": "2144560"
  },
  {
    "text": "so let's look at how we do that the first and best way to minimize the",
    "start": "2144560",
    "end": "2149839"
  },
  {
    "text": "cost of an event is just to minimize the time to detect it so mtt mttd",
    "start": "2149839",
    "end": "2156800"
  },
  {
    "start": "2153000",
    "end": "2292000"
  },
  {
    "text": "is the mean time to detect the event and it's shockingly high in many cases",
    "start": "2156800",
    "end": "2164079"
  },
  {
    "text": "so i've seen systems where people are running synthetic transactions so you have some service that you've",
    "start": "2164079",
    "end": "2170000"
  },
  {
    "text": "signed up with that runs load against your site and they run a transaction once every five minutes",
    "start": "2170000",
    "end": "2177119"
  },
  {
    "text": "but that transaction they're running goes through a load balancer and it gets directed to one of n machines that you've got so the first",
    "start": "2177119",
    "end": "2185040"
  },
  {
    "text": "time they suppose you've put out one bad server out of a pool the first time that",
    "start": "2185040",
    "end": "2191359"
  },
  {
    "text": "synthetic transaction happens they might not hit the bad server and actually once they eventually do hit the",
    "start": "2191359",
    "end": "2197599"
  },
  {
    "text": "bad server they usually retry a couple of times before they say yes it's a real problem",
    "start": "2197599",
    "end": "2203119"
  },
  {
    "text": "not just a transient network issue or failure to resolve dns or something like that and",
    "start": "2203119",
    "end": "2209280"
  },
  {
    "text": "so with synthetic monitoring your mean time to detect is usually on the order of 15 minutes or more",
    "start": "2209280",
    "end": "2215680"
  },
  {
    "text": "that's kind of long in systems that i deal with if you're using something like real user",
    "start": "2215680",
    "end": "2222079"
  },
  {
    "text": "monitoring where you're watching traffic coming in from outside and you're watching the effects of that traffic you can usually see the event in",
    "start": "2222079",
    "end": "2228880"
  },
  {
    "text": "a minute or less so real user monitoring gives you better mean time to detect",
    "start": "2228880",
    "end": "2236720"
  },
  {
    "text": "we can talk about different testing methods and see what the mean time to detect a problem with the different",
    "start": "2240480",
    "end": "2246240"
  },
  {
    "text": "testing methods is so i do unit testing i think it's a big",
    "start": "2246240",
    "end": "2251599"
  },
  {
    "text": "advance in our profession but i have to say i don't get a lot of confidence in the",
    "start": "2251599",
    "end": "2257119"
  },
  {
    "text": "validity of my system just based on unit tests it tells me a certain amount but it doesn't tell me it's actually going to",
    "start": "2257119",
    "end": "2263119"
  },
  {
    "text": "work in production so i have relatively low confidence in its validity but it's very fast to detect things",
    "start": "2263119",
    "end": "2269520"
  },
  {
    "text": "so unit tests have some utility integration tests take quite a bit",
    "start": "2269520",
    "end": "2275920"
  },
  {
    "text": "longer to run right i can usually run unit tests in a matter of seconds my integration tests",
    "start": "2275920",
    "end": "2281280"
  },
  {
    "text": "take a few minutes to half an hour or something like that they do give me more confidence in the",
    "start": "2281280",
    "end": "2286640"
  },
  {
    "text": "outcome sometimes we do this user acceptance testing where we actually put the system",
    "start": "2286640",
    "end": "2292640"
  },
  {
    "start": "2292000",
    "end": "2351000"
  },
  {
    "text": "in front of some of the sponsors or stakeholders and they're supposed to be the final step in approval to make sure it",
    "start": "2292640",
    "end": "2298240"
  },
  {
    "text": "actually works that takes a very long time and i don't think it actually adds much",
    "start": "2298240",
    "end": "2304400"
  },
  {
    "text": "confidence what i normally see in user acceptance testing is a very cursory",
    "start": "2304400",
    "end": "2310320"
  },
  {
    "text": "sort of you know click click glance at a few pages yeah it's okay i don't see you know real in-depth",
    "start": "2310320",
    "end": "2317200"
  },
  {
    "text": "exhaustive testing a method that does give pretty good",
    "start": "2317200",
    "end": "2324000"
  },
  {
    "text": "results is this real user monitoring and so i definitely advocate",
    "start": "2324000",
    "end": "2330400"
  },
  {
    "text": "measuring everything your users are doing charting it and find the charts that matter for your",
    "start": "2330400",
    "end": "2336079"
  },
  {
    "text": "environment and your business mike britton is going to be doing a talk a little bit later",
    "start": "2336079",
    "end": "2342079"
  },
  {
    "text": "uh he comes from a company called etsy that has blogged about their cult of charts",
    "start": "2342079",
    "end": "2347440"
  },
  {
    "text": "and so i've borrowed with attribution uh some of their sample charts",
    "start": "2347440",
    "end": "2355280"
  },
  {
    "start": "2351000",
    "end": "2421000"
  },
  {
    "text": "so this is a chart showing technical metrics and just at a glance you can see that",
    "start": "2355280",
    "end": "2361520"
  },
  {
    "text": "something very odd happened immediately after a code deploy and the number of php warnings went way up",
    "start": "2361520",
    "end": "2368480"
  },
  {
    "text": "another code deploy went out and the warnings went way back down this is a great example of detecting a",
    "start": "2368480",
    "end": "2374560"
  },
  {
    "text": "problem and correcting it pretty rapidly so i would i would wager that the time",
    "start": "2374560",
    "end": "2379599"
  },
  {
    "text": "to detect was on the order of five to ten minutes and the time to correct was five to ten minutes",
    "start": "2379599",
    "end": "2386799"
  },
  {
    "text": "this chart will show you problems before anyone in a call center will get a call and actually way before synthetic",
    "start": "2387680",
    "end": "2394240"
  },
  {
    "text": "transaction monitoring will show you a problem",
    "start": "2394240",
    "end": "2398480"
  },
  {
    "text": "here's another chart that they've got this one shows some metrics that are perhaps more of",
    "start": "2399280",
    "end": "2404720"
  },
  {
    "text": "interest on the business side as well and again you can very clearly see something odd going on in the middle of",
    "start": "2404720",
    "end": "2410960"
  },
  {
    "text": "the night there and so this kind of visibility shows you errors faster than anything else",
    "start": "2410960",
    "end": "2418960"
  },
  {
    "text": "it's very easy to set up charting and chart everything you take your server with",
    "start": "2419359",
    "end": "2427040"
  },
  {
    "start": "2421000",
    "end": "2492000"
  },
  {
    "text": "your stack of of stuff you add some open source software like statsd you do a little bit of internal",
    "start": "2427040",
    "end": "2432800"
  },
  {
    "text": "monitoring you send it all to graphite and then you can get out your",
    "start": "2432800",
    "end": "2438560"
  },
  {
    "text": "dashboards and charts and information radiators on the wall and everyone starts looking at those things",
    "start": "2438560",
    "end": "2445280"
  },
  {
    "text": "there is one caution which is the first time you make something visible it will probably look horrible because",
    "start": "2445280",
    "end": "2452240"
  },
  {
    "text": "if you haven't looked at it before weird things will have crept in and this probably means that your",
    "start": "2452240",
    "end": "2458480"
  },
  {
    "text": "your higher-ups are going to look at it and go that looks really strange please explain that to me",
    "start": "2458480",
    "end": "2464240"
  },
  {
    "text": "so you'll get asked to explain a lot of things that goes away quickly don't let that scare you away from doing",
    "start": "2464240",
    "end": "2469920"
  },
  {
    "text": "this you can blend in external monitoring",
    "start": "2469920",
    "end": "2475920"
  },
  {
    "text": "with this and feed it into the same system and everything that i've represented here is approximately a day's worth of",
    "start": "2475920",
    "end": "2482640"
  },
  {
    "text": "work so it's really easy to get going with this stuff",
    "start": "2482640",
    "end": "2488319"
  },
  {
    "text": "the next step in minimizing the cost of an event is reducing the time to correct it or the mean time to recovery",
    "start": "2489520",
    "end": "2497760"
  },
  {
    "start": "2492000",
    "end": "2571000"
  },
  {
    "text": "if you're looking at mean time to recovery it comes from a few places first you have to figure out what's",
    "start": "2497760",
    "end": "2503040"
  },
  {
    "text": "going on sometimes that's the fastest part you look at it and you instantly know what's",
    "start": "2503040",
    "end": "2508640"
  },
  {
    "text": "happening no orders are being placed sometimes it",
    "start": "2508640",
    "end": "2513680"
  },
  {
    "text": "takes a while longer i've had time to determine the problem",
    "start": "2513680",
    "end": "2519760"
  },
  {
    "text": "measured in weeks in some cases but fortunately that was a very intermittent problem it wasn't a",
    "start": "2519760",
    "end": "2524880"
  },
  {
    "text": "a huge crisis issue certainly fixing the problem and deploying a fix are parts of the",
    "start": "2524880",
    "end": "2531680"
  },
  {
    "text": "mean time to recover as well so being able to make the change quickly",
    "start": "2531680",
    "end": "2537119"
  },
  {
    "text": "and get the change deployed quickly help you reduce the cost of the event",
    "start": "2537119",
    "end": "2542640"
  },
  {
    "text": "i think an area that we don't look at enough is how to reduce the scope of an event",
    "start": "2546319",
    "end": "2553359"
  },
  {
    "text": "now you remember when i talked about the canary pool i said that the users that you have hitting the canary pool are the ones experiencing the",
    "start": "2553359",
    "end": "2559280"
  },
  {
    "text": "the problem well that's a small fraction of your users so",
    "start": "2559280",
    "end": "2564800"
  },
  {
    "text": "you can regard that as kind of the scope of that event if something bad happens there so we can",
    "start": "2564800",
    "end": "2570640"
  },
  {
    "text": "ask how many users are going to see the error split testing like the canary pool or",
    "start": "2570640",
    "end": "2576880"
  },
  {
    "start": "2571000",
    "end": "2783000"
  },
  {
    "text": "just a b testing features is one way to reduce the scope of the error",
    "start": "2576880",
    "end": "2582720"
  },
  {
    "text": "we can also reduce the scope of the air with a dark launch where the only people being exposed to the problem are",
    "start": "2582720",
    "end": "2587760"
  },
  {
    "text": "sort of our own people and friends and family people within our our circle of trust i guess uh",
    "start": "2587760",
    "end": "2595040"
  },
  {
    "text": "feature flags are a way to reduce the scope of the error as well so you can turn it on on a limited number of machines and if something's",
    "start": "2595040",
    "end": "2601680"
  },
  {
    "text": "going wrong you can turn it off on the on the same machines very quickly",
    "start": "2601680",
    "end": "2607838"
  },
  {
    "text": "i always like to have some kind of a remote control mechanism built into my systems i don't want to have a bunch of admins",
    "start": "2610079",
    "end": "2616640"
  },
  {
    "text": "scrambling to ssh into 20 or 30 different boxes and try and make the same exact change",
    "start": "2616640",
    "end": "2621760"
  },
  {
    "text": "to 20 or 30 different boxes because they'll get it wrong in at least one of those and it just takes time",
    "start": "2621760",
    "end": "2628240"
  },
  {
    "text": "you know they the first box will get fixed fairly quickly by the time they get to the 30th box 5",
    "start": "2628240",
    "end": "2633920"
  },
  {
    "text": "or 10 or 15 minutes have gone by i like something instead where i can drop a message in a",
    "start": "2633920",
    "end": "2640240"
  },
  {
    "text": "queue and have all the apps in my infrastructure reading from the queue and doing the thing to themselves that",
    "start": "2640240",
    "end": "2645599"
  },
  {
    "text": "the message tells them to do whether it's turning a flag on and off whether it's",
    "start": "2645599",
    "end": "2650720"
  },
  {
    "text": "accepting load or shutting off and shedding load",
    "start": "2650720",
    "end": "2656960"
  },
  {
    "text": "another aspect of the scope is how far does the error go",
    "start": "2658400",
    "end": "2663599"
  },
  {
    "text": "so if i have an error is it confined to a single feature",
    "start": "2663599",
    "end": "2669200"
  },
  {
    "text": "or is it affecting all of my features simultaneously this is where we come back to the notion of the decoupled architecture",
    "start": "2669200",
    "end": "2676800"
  },
  {
    "text": "we can use bulkheads to separate different pools of servers so if i've got some kind of a",
    "start": "2676800",
    "end": "2682480"
  },
  {
    "text": "distributed bug that's causing machines to lock each other up i can have different groups that are incapable of",
    "start": "2682480",
    "end": "2689200"
  },
  {
    "text": "locking each other up and i can use circuit breakers to prevent errors from",
    "start": "2689200",
    "end": "2695040"
  },
  {
    "text": "jumping gaps in the system across vertical tiers and propagating outward into from from",
    "start": "2695040",
    "end": "2700960"
  },
  {
    "text": "service provider to service caller so a couple of examples of what this",
    "start": "2700960",
    "end": "2707119"
  },
  {
    "text": "decoupled architecture would look like this comes from an actual client project",
    "start": "2707119",
    "end": "2713599"
  },
  {
    "text": "essentially they had one big app there were multiple teams working on the",
    "start": "2713599",
    "end": "2718960"
  },
  {
    "text": "independent components each of the teams would check their code in and each of the team's code was being",
    "start": "2718960",
    "end": "2724880"
  },
  {
    "text": "built into a module but then the modules were all being glommed together in a single big jar file",
    "start": "2724880",
    "end": "2730400"
  },
  {
    "text": "actually i think it was an ear file but effectively it's a jar full of jars and then that same file was being",
    "start": "2730400",
    "end": "2736319"
  },
  {
    "text": "deployed to every app server in parallel and they would all get restarted",
    "start": "2736319",
    "end": "2743040"
  },
  {
    "text": "well this is the opposite of a decoupled architecture",
    "start": "2743040",
    "end": "2749040"
  },
  {
    "text": "we can make it a little better by doing the canary releasing and saying i've got",
    "start": "2749040",
    "end": "2754960"
  },
  {
    "text": "a little bit of my capacity that's now my canary pool and i'm still kind of assembling things",
    "start": "2754960",
    "end": "2760240"
  },
  {
    "text": "the same way but in this case at the very least i can",
    "start": "2760240",
    "end": "2765359"
  },
  {
    "text": "reduce the scope of who all is affected by this and so this is better it's still not great but this is an easy",
    "start": "2765359",
    "end": "2772400"
  },
  {
    "text": "step to make and so if you're still in that kind of monolithic you know doomed scenario take this step",
    "start": "2772400",
    "end": "2779119"
  },
  {
    "text": "and then move on to the next step which looks like this we've now taken the modules apart",
    "start": "2779119",
    "end": "2784640"
  },
  {
    "start": "2783000",
    "end": "2907000"
  },
  {
    "text": "into groups of related facilities and they're each being deployed to their own pool of servers",
    "start": "2784640",
    "end": "2791040"
  },
  {
    "text": "at this point i can have any kind of hairy threading bug in my account management i can have this",
    "start": "2791040",
    "end": "2798079"
  },
  {
    "text": "thing calling through to some back end system that exhausts its thread pool and never",
    "start": "2798079",
    "end": "2803280"
  },
  {
    "text": "answers again and the worst that happens is that i lose those account management features",
    "start": "2803280",
    "end": "2809280"
  },
  {
    "text": "but i don't also simultaneously lose all the threads that respond to all the other features",
    "start": "2809280",
    "end": "2817838"
  },
  {
    "text": "now one other advantage of doing it this way by the way as i depict over here on the right is now",
    "start": "2819280",
    "end": "2825520"
  },
  {
    "text": "that the communication is not straight from the user to each of these facilities i can also start saying individual",
    "start": "2825520",
    "end": "2832880"
  },
  {
    "text": "facilities have their own canary pool and i can validate those and then turn them on for a fraction",
    "start": "2832880",
    "end": "2839520"
  },
  {
    "text": "so i can make multiple versions of these services coexist either for a limited time or for an",
    "start": "2839520",
    "end": "2845200"
  },
  {
    "text": "extended time if i want to do protocol versioning in an easy way",
    "start": "2845200",
    "end": "2850558"
  },
  {
    "text": "now one of the interesting things is when we talk about decoupled",
    "start": "2851839",
    "end": "2857200"
  },
  {
    "text": "architectures one particular group of developers uh",
    "start": "2857200",
    "end": "2863599"
  },
  {
    "text": "gets very high marks on the decoupled architecture that we tend not to give very high marks anywhere else and that's the php",
    "start": "2863599",
    "end": "2870839"
  },
  {
    "text": "developers because their code is so ui focused and",
    "start": "2870839",
    "end": "2876880"
  },
  {
    "text": "it doesn't tend to get packaged up into these artifacts within artifacts within art artifacts with this",
    "start": "2876880",
    "end": "2882720"
  },
  {
    "text": "stack of dependencies it's relatively easy to just push out a few files with a few lines of changes",
    "start": "2882720",
    "end": "2889040"
  },
  {
    "text": "there's not an issue of restarting whole app servers with you know 25 megabyte jar files",
    "start": "2889040",
    "end": "2894400"
  },
  {
    "text": "so i think we have to cut the php developers some slack or give them some credit on",
    "start": "2894400",
    "end": "2899520"
  },
  {
    "text": "the decoupled architecture area so if we've done these things i contend",
    "start": "2899520",
    "end": "2907200"
  },
  {
    "start": "2907000",
    "end": "2968000"
  },
  {
    "text": "that we have reduced the cost of an event and we've made it quite low and i believe when we reduce",
    "start": "2907200",
    "end": "2914160"
  },
  {
    "text": "the probability of the error and we reduce the cost of the event we have a squared effect going on",
    "start": "2914160",
    "end": "2920720"
  },
  {
    "text": "so we're increasing in events linearly but we're reducing the probability and",
    "start": "2920720",
    "end": "2925839"
  },
  {
    "text": "the cost by a squared effect and so that should win which means",
    "start": "2925839",
    "end": "2932000"
  },
  {
    "text": "if we do these things then the cos the risk of doing uh continuous delivery is lower than the",
    "start": "2932000",
    "end": "2937520"
  },
  {
    "text": "risk of doing batch delivery so this is the motivation behind a lot of the practices that we've been talking",
    "start": "2937520",
    "end": "2943440"
  },
  {
    "text": "about uh earlier today that we'll talk about through the rest of today and that we've talked about in previous iterations of this track",
    "start": "2943440",
    "end": "2951760"
  },
  {
    "text": "there are some unsolved problems that i'll mention very briefly these are areas where we're looking for",
    "start": "2952319",
    "end": "2958880"
  },
  {
    "text": "contributions we're looking for people to to figure out the innovation that will solve these problems",
    "start": "2958880",
    "end": "2964880"
  },
  {
    "text": "one of the big ones is library dependencies so if you're using some kind of a build",
    "start": "2964880",
    "end": "2971359"
  },
  {
    "start": "2968000",
    "end": "3058000"
  },
  {
    "text": "tool that pulls in libraries from random places around the net like maven central",
    "start": "2971359",
    "end": "2976640"
  },
  {
    "text": "you have a risk exposure to anything happening with maven central i work in closure and it's common to use",
    "start": "2976640",
    "end": "2983359"
  },
  {
    "text": "this uh service called clo jars for closure jars clojars has",
    "start": "2983359",
    "end": "2989280"
  },
  {
    "text": "no authentication that you are actually the owner of a project you can claim any project you like and",
    "start": "2989280",
    "end": "2995359"
  },
  {
    "text": "start uploading code this to me feels pretty risky so",
    "start": "2995359",
    "end": "3001200"
  },
  {
    "text": "we don't want to just depend on all the random libraries out there we probably want to run our own",
    "start": "3001200",
    "end": "3006640"
  },
  {
    "text": "repositories with the libraries that we trust but now of course we've got to manage that repository of libraries and keep it",
    "start": "3006640",
    "end": "3013680"
  },
  {
    "text": "up to date so i regard this as an unsolved problem",
    "start": "3013680",
    "end": "3019520"
  },
  {
    "text": "service and protocol dependencies we've got some answers none of the answers are perfect so still more more to do there",
    "start": "3019520",
    "end": "3027119"
  },
  {
    "text": "and if anyone's in an organization where you're dealing with itil processes there's nothing in the definition of",
    "start": "3027119",
    "end": "3034640"
  },
  {
    "text": "itil that's incompatible with continuous delivery but the implementation of itil in many organizations",
    "start": "3034640",
    "end": "3040400"
  },
  {
    "text": "is incompatible with continuous delivery so this is also an unsolved problem if you are in such an organization i'd",
    "start": "3040400",
    "end": "3046640"
  },
  {
    "text": "love to talk to you at some point later on today",
    "start": "3046640",
    "end": "3051200"
  },
  {
    "text": "so with that i'll leave you with a few questions to think about ask yourself um how would you do things",
    "start": "3051839",
    "end": "3058640"
  },
  {
    "start": "3058000",
    "end": "3165000"
  },
  {
    "text": "differently if you could rebuild your environments this way",
    "start": "3058640",
    "end": "3063920"
  },
  {
    "text": "if you're not doing this already i've given you many different small steps you can take and some large goals to aim at",
    "start": "3065280",
    "end": "3072559"
  },
  {
    "text": "think about the smallest change that you could make that would take you one step of the way there and then think a second time because",
    "start": "3072559",
    "end": "3078240"
  },
  {
    "text": "usually when we try and think of the smallest change we actually think of something way bigger than the smallest possible change",
    "start": "3078240",
    "end": "3084960"
  },
  {
    "text": "and if there are manual things that you're doing just find one thing that you can automate and move in that direction i'm sure",
    "start": "3085359",
    "end": "3091760"
  },
  {
    "text": "there's at least one thing that you could automate that you just haven't done so far",
    "start": "3091760",
    "end": "3097839"
  },
  {
    "text": "and organizational barriers are going to be there we heard from josh about the",
    "start": "3099839",
    "end": "3106160"
  },
  {
    "text": "people changes and the culture changes so think about ways that you can begin to initiate some of those changes",
    "start": "3106160",
    "end": "3112800"
  },
  {
    "text": "and it usually doesn't start by telling someone else that they need to change that's an anti-pattern",
    "start": "3112800",
    "end": "3120640"
  },
  {
    "text": "so finally i just want to say that we should not support or allow this type",
    "start": "3120640",
    "end": "3126960"
  },
  {
    "text": "of thing to happen anymore if you have a deployment army in your company someplace",
    "start": "3126960",
    "end": "3132400"
  },
  {
    "text": "send these people home it's a waste of time it's a waste of resources it's a waste of humanity to do something",
    "start": "3132400",
    "end": "3138640"
  },
  {
    "text": "that computers could do we can do way better than this and so let's uh let's let these people get some",
    "start": "3138640",
    "end": "3144319"
  },
  {
    "text": "sleep because it looks like it's about one in the morning there thank you",
    "start": "3144319",
    "end": "3153838"
  },
  {
    "text": "you",
    "start": "3164000",
    "end": "3166079"
  }
]