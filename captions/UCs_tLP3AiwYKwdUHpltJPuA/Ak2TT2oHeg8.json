[
  {
    "text": "[Music]",
    "start": "4350",
    "end": "8870"
  },
  {
    "text": "thanks for the introduction there uh yeah I'm going to talk about uh how to",
    "start": "12900",
    "end": "19619"
  },
  {
    "text": "scale up rollouts of components to to kubernetes clusters based on based on",
    "start": "19619",
    "end": "25920"
  },
  {
    "text": "githubs um and the the mandatory slide about me I'm",
    "start": "25920",
    "end": "32460"
  },
  {
    "text": "sore and I work at the Natick where we Supply managed kubernetes offering",
    "start": "32460",
    "end": "38700"
  },
  {
    "text": "netica started out as an as a hosting company so originally we provided the",
    "start": "38700",
    "end": "44700"
  },
  {
    "text": "provided virtual machines and helped customers run applications on top of",
    "start": "44700",
    "end": "49739"
  },
  {
    "text": "virtual machines and and we oh the space of kubernetes",
    "start": "49739",
    "end": "56640"
  },
  {
    "text": "um offering offering to many kubernetes clusters both on premise of course since",
    "start": "56640",
    "end": "63660"
  },
  {
    "text": "we still have data centers but also in in public cloud and and I think at the",
    "start": "63660",
    "end": "69659"
  },
  {
    "text": "moment we're around 100 clusters and and it has been growing rather fast the last",
    "start": "69659",
    "end": "75600"
  },
  {
    "text": "year or two uh so so we have done some work and some thinking in in and how do",
    "start": "75600",
    "end": "80880"
  },
  {
    "text": "we actually scale the rollout of all these components that we manage for our customers",
    "start": "80880",
    "end": "87119"
  },
  {
    "text": "um I've been working as a developer and architect for for a lot of years but but always kind of ending up in the in the",
    "start": "87119",
    "end": "93720"
  },
  {
    "text": "gap between operations and and development and I've been working with kubernetes since it was 1.5 or something",
    "start": "93720",
    "end": "100320"
  },
  {
    "text": "like that I think so so that's also uh some years um for today I'm going to",
    "start": "100320",
    "end": "107400"
  },
  {
    "text": "to just briefly recap what gitups actually is if if some of you is not",
    "start": "107400",
    "end": "113399"
  },
  {
    "text": "familiar with githubs how many is is using githubs on a daily basis here",
    "start": "113399",
    "end": "119399"
  },
  {
    "text": "yeah so probably makes sense to just uh walk through what what gitups is is actually all about uh and then also",
    "start": "119399",
    "end": "126600"
  },
  {
    "text": "briefly touched upon uh what is that to running kubernetes besides deploying your application because there's usually",
    "start": "126600",
    "end": "133739"
  },
  {
    "text": "there's more to kubernetes and there's more uh to be managed than just the application that we actually want to",
    "start": "133739",
    "end": "140400"
  },
  {
    "text": "provide business value um and then we can move into how can then use githubs to actually scale this",
    "start": "140400",
    "end": "146879"
  },
  {
    "text": "to to multiple clusters uh and and how to manage that um so",
    "start": "146879",
    "end": "153120"
  },
  {
    "text": "what is good Ops actually well uh I was looking at the reworks definition of",
    "start": "153120",
    "end": "159660"
  },
  {
    "text": "github's weworks are the company that originally coined uh the notion of kid",
    "start": "159660",
    "end": "165540"
  },
  {
    "text": "Ops and and they currently I think they actually had previously another definition of what gitis was this is",
    "start": "165540",
    "end": "171840"
  },
  {
    "text": "what you will find that their website currently and and basically it's about",
    "start": "171840",
    "end": "177599"
  },
  {
    "text": "using git as the sort of throughs for for the desired state of of your system",
    "start": "177599",
    "end": "182700"
  },
  {
    "text": "and and they also emphasize that it's every part of your system and then you",
    "start": "182700",
    "end": "189060"
  },
  {
    "text": "deploy something that can actually um that can actually drop on this",
    "start": "189060",
    "end": "195019"
  },
  {
    "text": "desired State and and bring your environment into into sync with it so basically",
    "start": "195019",
    "end": "201060"
  },
  {
    "text": "it's about reconciliation right so many of you work with kubernet kubernetes already and and inside of",
    "start": "201060",
    "end": "207420"
  },
  {
    "text": "kubernetes we are talking about reconciliation where we actually push something into the API server",
    "start": "207420",
    "end": "212879"
  },
  {
    "text": "deployment the service and Ingress controllers inside of kubernetes tries",
    "start": "212879",
    "end": "218760"
  },
  {
    "text": "to get the environment into the state that we actually asked to have and this",
    "start": "218760",
    "end": "224099"
  },
  {
    "text": "is pretty much the same right because now we put our desire State into git and we have some kind of reconciliation Loop",
    "start": "224099",
    "end": "230220"
  },
  {
    "text": "that tries to bring our cluster into the state that we defined in in our git",
    "start": "230220",
    "end": "235379"
  },
  {
    "text": "repository so it's also about reconciliation like the same notion that we already",
    "start": "235379",
    "end": "241280"
  },
  {
    "text": "using inside of kubernetes but having our source of truths inside of git we",
    "start": "241280",
    "end": "246780"
  },
  {
    "text": "can employ the same techniques as we already use for software deployment right so we have full if we want to",
    "start": "246780",
    "end": "253860"
  },
  {
    "text": "review stuff going out into production we have an Audi lock based on the git commit lock so we couldn't enforce for",
    "start": "253860",
    "end": "261660"
  },
  {
    "text": "instance signed commits into a git repository so a lot of the techniques that are using to control ours",
    "start": "261660",
    "end": "268740"
  },
  {
    "text": "well I think I'm falling out a little bit uh we'll also apply to uh to our",
    "start": "268740",
    "end": "274620"
  },
  {
    "text": "changes to the infrastructure and to the deployments now um so why is this different from",
    "start": "274620",
    "end": "281460"
  },
  {
    "text": "traditional CI well traditionally we have a CI pipeline that is a pretty",
    "start": "281460",
    "end": "287100"
  },
  {
    "text": "imperative right where you in the pipeline you define the steps that are have to happen for you to deploy the",
    "start": "287100",
    "end": "294000"
  },
  {
    "text": "container to build the container to do the test and and uh and in this case",
    "start": "294000",
    "end": "299280"
  },
  {
    "text": "instead of being imperative we actually declare what the desired state of the system so already there there is a",
    "start": "299280",
    "end": "305400"
  },
  {
    "text": "different difference also in in traditional CI you would provide",
    "start": "305400",
    "end": "310620"
  },
  {
    "text": "credentials to a CI server right to be able to push out a new deployment from your CI system to a kubernetes cluster",
    "start": "310620",
    "end": "317400"
  },
  {
    "text": "you will have to give the CI system credentials for your cluster and often if we are talking about deploying",
    "start": "317400",
    "end": "324740"
  },
  {
    "text": "infrastructure here and not only applications these credentials have to be rather powerful to actually push out",
    "start": "324740",
    "end": "331979"
  },
  {
    "text": "stuff that are affecting all of your cluster with githubs you turn it around right so",
    "start": "331979",
    "end": "337919"
  },
  {
    "text": "instead of pushing stuff out to your cluster the the get Ops agent will cool",
    "start": "337919",
    "end": "343620"
  },
  {
    "text": "in changes from from git and also there's a decoupling here since the",
    "start": "343620",
    "end": "349440"
  },
  {
    "text": "cluster itself pulls and changes the cluster doesn't have to be up when your CI system is running right so the",
    "start": "349440",
    "end": "356039"
  },
  {
    "text": "cluster when this cluster comes up it will pull in the latest changes from git so you have asynchronicity here",
    "start": "356039",
    "end": "363240"
  },
  {
    "text": "um and as I said before if you in a traditional CI setup you would have to kind of look into the pipelines to see",
    "start": "363240",
    "end": "370380"
  },
  {
    "text": "what actually happened and who did what uh here having the git lock we have a clear audit trail of who did actually do",
    "start": "370380",
    "end": "376919"
  },
  {
    "text": "which changes to our desired State um and we have a single source of truth",
    "start": "376919",
    "end": "382500"
  },
  {
    "text": "instead of going through say one pipeline for each application we have one one place where we can look at what",
    "start": "382500",
    "end": "389460"
  },
  {
    "text": "is the complete desired state of for of our system we'll see in a moment that we might need",
    "start": "389460",
    "end": "396000"
  },
  {
    "text": "to have more than one repository lobe so there might be",
    "start": "396000",
    "end": "401060"
  },
  {
    "text": "a little bit more than one single source of truths anyway but um yeah uh so",
    "start": "401060",
    "end": "407160"
  },
  {
    "text": "that's that's kind of some of the differences between uh githubs and and the traditional CI CD",
    "start": "407160",
    "end": "414660"
  },
  {
    "text": "um but what about a kubernetes itself what are what is it that we actually going to",
    "start": "414660",
    "end": "420780"
  },
  {
    "text": "deploy out there and and why this is it interesting to maybe deploy across",
    "start": "420780",
    "end": "426960"
  },
  {
    "text": "multiple clusters um well we have our application of course and",
    "start": "426960",
    "end": "432780"
  },
  {
    "text": "and the application is where the business logic and the business value is is placed however uh vanilla kubernetes",
    "start": "432780",
    "end": "440039"
  },
  {
    "text": "cluster doesn't contain much other than than just the cluster and the capabilities of of doing rolling",
    "start": "440039",
    "end": "446520"
  },
  {
    "text": "deployments and all that stuff but you'd have to put other stuff into your cluster before it's actually ready to",
    "start": "446520",
    "end": "452280"
  },
  {
    "text": "run your application right you probably know that if you're running kubernetes",
    "start": "452280",
    "end": "457319"
  },
  {
    "text": "already we have to have an Ingress controller we might need something to pick up our",
    "start": "457319",
    "end": "463560"
  },
  {
    "text": "metrics we might want a site manager to be able to handle certificates we might want something like external secrets and",
    "start": "463560",
    "end": "470940"
  },
  {
    "text": "now we're talking git Ops so we also want some kind of github's agent in our",
    "start": "470940",
    "end": "476580"
  },
  {
    "text": "case we're using we're using flux another very popular component for doing",
    "start": "476580",
    "end": "482460"
  },
  {
    "text": "that is is Argo CD so all of this is kind of an infrastructure layer that is going",
    "start": "482460",
    "end": "489419"
  },
  {
    "text": "across the applications that we that we Deploy on in our cluster and we need to manage all these components whether you",
    "start": "489419",
    "end": "496199"
  },
  {
    "text": "manage those yourself or whether you you Outsource it to to someone else the component needs to go into kubernetes",
    "start": "496199",
    "end": "502919"
  },
  {
    "text": "because these kind of problems is not solved in the vanilla kubernetes cluster",
    "start": "502919",
    "end": "508259"
  },
  {
    "text": "so so we need to manage this and coming back to the reworks definition of of",
    "start": "508259",
    "end": "514380"
  },
  {
    "text": "githubs we probably want to manage these components as well as the application uh",
    "start": "514380",
    "end": "520200"
  },
  {
    "text": "using githubs and we want the infrastructure layer to be close to the same across our clusters",
    "start": "520200",
    "end": "528180"
  },
  {
    "text": "right so if we are running say 10 clusters test staging production and so",
    "start": "528180",
    "end": "534420"
  },
  {
    "text": "on we want the same infrastructible moments we want the same English controller to run in our staging",
    "start": "534420",
    "end": "539580"
  },
  {
    "text": "environment as we are running in our production environment so that when we are changing the application we we are",
    "start": "539580",
    "end": "545580"
  },
  {
    "text": "testing the application and we are not testing changes to to the infrastructure",
    "start": "545580",
    "end": "550620"
  },
  {
    "text": "so we want this sort of Truth for both the application and the infrastructure",
    "start": "550620",
    "end": "556680"
  },
  {
    "text": "actually in in our case the first thing that goes into the kubernetes cluster when it has been started up whether it's",
    "start": "556680",
    "end": "563580"
  },
  {
    "text": "on premise or whether it's in in some public cloud is is the GitHub GitHub",
    "start": "563580",
    "end": "569760"
  },
  {
    "text": "station and then we can start rolling out all the other stuff here so",
    "start": "569760",
    "end": "575700"
  },
  {
    "text": "moving into to concrete how this would look if we start out simple here and say",
    "start": "575700",
    "end": "581339"
  },
  {
    "text": "we want to apply the the git Ops technique to just one cluster and we want to make it clear what what is",
    "start": "581339",
    "end": "588060"
  },
  {
    "text": "application and and what is the infrastructure then we could create a git cluster right git a repository with",
    "start": "588060",
    "end": "594240"
  },
  {
    "text": "a very simple directory structure having one folder for our application and another folder for our infrastructure",
    "start": "594240",
    "end": "600120"
  },
  {
    "text": "then it's it's very clear to to the guys actually changing stuff that we have applications and we have infrastructure",
    "start": "600120",
    "end": "606420"
  },
  {
    "text": "so we create a syncing cluster we create a single repository and every time we",
    "start": "606420",
    "end": "611459"
  },
  {
    "text": "commit something to Main in our git repository it will go out into the cluster then we can apply of course as I",
    "start": "611459",
    "end": "619140"
  },
  {
    "text": "said before we can apply the the techniques that we also use for for software development so the commits on",
    "start": "619140",
    "end": "625560"
  },
  {
    "text": "Main might be a result of merging a pull request or or something else but but basically every time something is",
    "start": "625560",
    "end": "632339"
  },
  {
    "text": "committed to main one way or another it will go out into the cluster shortly after that",
    "start": "632339",
    "end": "638580"
  },
  {
    "text": "so before moving on to the more a complex example I just want to",
    "start": "638580",
    "end": "646860"
  },
  {
    "text": "introduce the demonstration environment here so I'm going to show the simple example for for a start and for for the",
    "start": "646860",
    "end": "654600"
  },
  {
    "text": "sake of demonstration here I have created a very very simple git server it's basically just a container with an",
    "start": "654600",
    "end": "661019"
  },
  {
    "text": "SSH demon running kit and then for the demonstration I'm running a kind",
    "start": "661019",
    "end": "666660"
  },
  {
    "text": "clusters kind is kubernetes in Docker and kind is actually the system that the",
    "start": "666660",
    "end": "671820"
  },
  {
    "text": "kubernetes project uses for testing out new kubernetes releases so it can run on",
    "start": "671820",
    "end": "677399"
  },
  {
    "text": "a laptop and pretty much simulate every aspect of a kubernetes cluster and then",
    "start": "677399",
    "end": "683880"
  },
  {
    "text": "for the sake of the example I have a very very simple application called pod",
    "start": "683880",
    "end": "689100"
  },
  {
    "text": "info which is kind of a demo microservice written it's part of the",
    "start": "689100",
    "end": "694680"
  },
  {
    "text": "flux it's it's a guy that has created flukes that also have this example in",
    "start": "694680",
    "end": "700440"
  },
  {
    "text": "from example deployment microservice and then for the infrastructure layer it's",
    "start": "700440",
    "end": "706500"
  },
  {
    "text": "just basically an ndnx English controller that's deployed just to say that okay we have something that is",
    "start": "706500",
    "end": "712680"
  },
  {
    "text": "infrastructure and we have something that is that is application uh so let's see how this works out in a",
    "start": "712680",
    "end": "720600"
  },
  {
    "text": "cluster basically I have some scripts that already bootstrapped uh flux into the cluster so",
    "start": "720600",
    "end": "728220"
  },
  {
    "text": "the flux controllers are running and what I will deploy to actually get the",
    "start": "728220",
    "end": "733500"
  },
  {
    "text": "github's reconciliation up and running is a custom resort called git repository where it sells flux hey I have a git",
    "start": "733500",
    "end": "740940"
  },
  {
    "text": "repository here that I want you to kind of pull in and then on top of that I put",
    "start": "740940",
    "end": "747000"
  },
  {
    "text": "a customization resource that points to the git repository as you can see here and there's a path also that says a",
    "start": "747000",
    "end": "754320"
  },
  {
    "text": "everything in this kit repository I just want to apply to my cluster so anything",
    "start": "754320",
    "end": "760079"
  },
  {
    "text": "that is coming from Main of the git repository is basically just applied into the cluster so",
    "start": "760079",
    "end": "767100"
  },
  {
    "text": "let's take a look it should be up and running already",
    "start": "767100",
    "end": "775339"
  },
  {
    "text": "so basically this is a a cluster that is not running very much besides the basic",
    "start": "778139",
    "end": "783540"
  },
  {
    "text": "kubernetes components right so so there is a namespace called flux system where the different controllers for flux is",
    "start": "783540",
    "end": "790079"
  },
  {
    "text": "running and then I have the part info application that is deployed in in default and I have the Ingress",
    "start": "790079",
    "end": "796560"
  },
  {
    "text": "controller here and if we take a look at the files uh basically",
    "start": "796560",
    "end": "802560"
  },
  {
    "text": "and I have here a simple symbol is the root of the git repository that has been",
    "start": "802560",
    "end": "808680"
  },
  {
    "text": "checked out here and how I had the applications where deployment and so on and I have the infrastructure where",
    "start": "808680",
    "end": "814560"
  },
  {
    "text": "where there's a yaml file containing basically the infra the English controller and then by using the flux",
    "start": "814560",
    "end": "822420"
  },
  {
    "text": "CLI for the bootstrap flux actually adds itself to to the mix also here so",
    "start": "822420",
    "end": "828000"
  },
  {
    "text": "basically when we have bootstrap the cluster we'll also be able to upgrade the git agent github's agent itself so",
    "start": "828000",
    "end": "835380"
  },
  {
    "text": "if I was to go in and upgrade flux to a newer version I could basically just change the the flux deployment here and",
    "start": "835380",
    "end": "842040"
  },
  {
    "text": "then roll out a new version so when once you have bootstrapped it you can manage also flux from from itself",
    "start": "842040",
    "end": "849420"
  },
  {
    "text": "and then basically the sync file here is the two custom resources that you saw",
    "start": "849420",
    "end": "854519"
  },
  {
    "text": "before right so that's a git repository and there's a customization and we can of course find these uh over",
    "start": "854519",
    "end": "862560"
  },
  {
    "text": "here also we can see that the the kit CI was checked out here uh this is the git",
    "start": "862560",
    "end": "870240"
  },
  {
    "text": "repository and then I can look at the customization and see that it actually applied uh all the yaml manifests from",
    "start": "870240",
    "end": "878519"
  },
  {
    "text": "from this committee um some of you might know customize as a",
    "start": "878519",
    "end": "884100"
  },
  {
    "text": "CLI tool that is actually capable of doing Simple patching and as a simple manipulation of of yaml manifests before",
    "start": "884100",
    "end": "891959"
  },
  {
    "text": "applying them into a kubernetes cluster and flux is kind of building on top of that so when you apply",
    "start": "891959",
    "end": "899180"
  },
  {
    "text": "manifests from your git system it is always done using customize whether you",
    "start": "899180",
    "end": "904500"
  },
  {
    "text": "actually want to manipulate them or not you can just deploy the vanilla yaml files or you can do a little bit of of",
    "start": "904500",
    "end": "911100"
  },
  {
    "text": "manipulation before you push them into a cluster so",
    "start": "911100",
    "end": "916260"
  },
  {
    "text": "I'll just tear this down um",
    "start": "916260",
    "end": "921139"
  },
  {
    "text": "yep so pretty easy and now I can control this this one cluster but",
    "start": "923820",
    "end": "931740"
  },
  {
    "text": "modify had multiple clusters and and I guess most of you will at least have a",
    "start": "931740",
    "end": "937560"
  },
  {
    "text": "development and a production cluster probably more um because you want to be able to of",
    "start": "937560",
    "end": "943260"
  },
  {
    "text": "course with kubernetes you could isolate stuff and use namespaces and and and and all that uh all that stuff that are that",
    "start": "943260",
    "end": "949800"
  },
  {
    "text": "are part of kubernetes but uh sometimes the new versions of kubernetes always",
    "start": "949800",
    "end": "955079"
  },
  {
    "text": "also comes out right so you might want to test that your applications are",
    "start": "955079",
    "end": "960660"
  },
  {
    "text": "running okay on the kubernetes 1.28 when it comes out right so you might want to",
    "start": "960660",
    "end": "966720"
  },
  {
    "text": "actually have a deal cluster that show you that you are capable of running your applications on another kubernetes",
    "start": "966720",
    "end": "972240"
  },
  {
    "text": "version than the other components the other production environments that you're running so at least two clusters",
    "start": "972240",
    "end": "978420"
  },
  {
    "text": "most will probably have at least two clusters in the setup as for us since we",
    "start": "978420",
    "end": "984420"
  },
  {
    "text": "are running clusters for for our customers we are yeah close to 100 clusters now because customers basically",
    "start": "984420",
    "end": "992100"
  },
  {
    "text": "want their own cluster right so there are no crossover effects between um between one cluster One customer and",
    "start": "992100",
    "end": "999060"
  },
  {
    "text": "another so we could we need one where some way of scaling up this very simple setup that",
    "start": "999060",
    "end": "1005480"
  },
  {
    "text": "we that we started out having here um and we could start out with with a very",
    "start": "1005480",
    "end": "1011779"
  },
  {
    "text": "simple approach and saying hey we are working with Git we could create a directory structure that actually",
    "start": "1011779",
    "end": "1018079"
  },
  {
    "text": "reflects uh which stuff should go into which cluster so say that instead of",
    "start": "1018079",
    "end": "1023959"
  },
  {
    "text": "just applying everything to to the cluster as we did in a simple example we",
    "start": "1023959",
    "end": "1029120"
  },
  {
    "text": "could create a a tree structure there in our git repository and say okay we",
    "start": "1029120",
    "end": "1035058"
  },
  {
    "text": "create a folder called clusters and for each cluster we create a subfolder so basically now I want to apply uh stuff",
    "start": "1035059",
    "end": "1043160"
  },
  {
    "text": "from the the cluster one folder to my cluster one and then for stuff for",
    "start": "1043160",
    "end": "1049400"
  },
  {
    "text": "cluster 2 in in the cluster 2 folder basically right and then customize allows us to include stuff so oh",
    "start": "1049400",
    "end": "1058700"
  },
  {
    "text": "so basically I can include the infrastructure folder for both cluster one and two so anything that goes into",
    "start": "1058700",
    "end": "1065120"
  },
  {
    "text": "infrastructure folder will be applied to to all of my clusters that would be a simple way of of handling multiple",
    "start": "1065120",
    "end": "1071720"
  },
  {
    "text": "clusters and again as before every time I then do a commit on on the main branch",
    "start": "1071720",
    "end": "1078200"
  },
  {
    "text": "it will roll out to whichever clusters are affected by by that change right",
    "start": "1078200",
    "end": "1085179"
  },
  {
    "text": "for the change to in the case that we're using flux to to actually do this for",
    "start": "1085220",
    "end": "1090980"
  },
  {
    "text": "for real it's basically the customization resource that you saw before that we can change and say hey",
    "start": "1090980",
    "end": "1097039"
  },
  {
    "text": "okay now instead of just applying from the root of our git repository I want to",
    "start": "1097039",
    "end": "1102559"
  },
  {
    "text": "apply stuff from the folder cluster seriously run or from the Thriller",
    "start": "1102559",
    "end": "1107980"
  },
  {
    "text": "cluster002 in in in the second cluster um",
    "start": "1107980",
    "end": "1113539"
  },
  {
    "text": "so let's see how that works out if it's it has started yeah so we can we can",
    "start": "1113539",
    "end": "1119840"
  },
  {
    "text": "take a look at the now I have two kind clusters running uh here instead of one",
    "start": "1119840",
    "end": "1125059"
  },
  {
    "text": "so I have the cluster series will run as you can see here and basically it's running the",
    "start": "1125059",
    "end": "1131360"
  },
  {
    "text": "same stuff as before right so the Pod info is running uh the flux is running into Ingress is running and if I take a",
    "start": "1131360",
    "end": "1138500"
  },
  {
    "text": "look at oh cluster 2 it's the same story just the cluster 2",
    "start": "1138500",
    "end": "1144919"
  },
  {
    "text": "doesn't have the same set of applications so for cluster 2 actually we haven't deployed any applications right now so part info is not running in",
    "start": "1144919",
    "end": "1152179"
  },
  {
    "text": "cluster 2 but the English controller that is part of the infrastructure is running in cluster two and of course the",
    "start": "1152179",
    "end": "1157820"
  },
  {
    "text": "flux is also running in in cluster 2 and if we take a look now at the",
    "start": "1157820",
    "end": "1163160"
  },
  {
    "text": "customization resource we can see here go into that for cluster 2 the path is",
    "start": "1163160",
    "end": "1171200"
  },
  {
    "text": "clusters cluster zero zero two and if we do the same thing here in in Faster one",
    "start": "1171200",
    "end": "1178460"
  },
  {
    "text": "we'll see that this is reconciling against another folder and then if we take a look at the",
    "start": "1178460",
    "end": "1186260"
  },
  {
    "text": "stuff that are then actually here in the folder we have this customization yaml file which is kind of configuration for",
    "start": "1186260",
    "end": "1193220"
  },
  {
    "text": "for customize so if I open this I can see that okay I have something that is specific for cluster zero zero one the",
    "start": "1193220",
    "end": "1200539"
  },
  {
    "text": "part info deployment and also the basic synchronization and then I have I",
    "start": "1200539",
    "end": "1206120"
  },
  {
    "text": "include the stuff from the infrastructure folder and the infrastructure in this case is the flux",
    "start": "1206120",
    "end": "1212179"
  },
  {
    "text": "toolkit itself and then the English controller and I of course I do the same for for cluster zero zero two so now",
    "start": "1212179",
    "end": "1219440"
  },
  {
    "text": "both clusters are sharing the same infrastructure basically so I could go in here and say okay well",
    "start": "1219440",
    "end": "1226220"
  },
  {
    "text": "um I have this super awesome new flag",
    "start": "1226220",
    "end": "1232000"
  },
  {
    "text": "if I could spell it out super awesome flag here that I wanted to add to my English controller so",
    "start": "1232760",
    "end": "1239480"
  },
  {
    "text": "basically I would just add this at in the infrastructure folder and I could go in and",
    "start": "1239480",
    "end": "1244810"
  },
  {
    "text": "[Music] and add it to to Kit of course so git",
    "start": "1244810",
    "end": "1253160"
  },
  {
    "text": "ads and push now since this this simple git",
    "start": "1253160",
    "end": "1258559"
  },
  {
    "text": "server I have spun up here is actually I'm manipulating the source files for for the git server here so sometimes it",
    "start": "1258559",
    "end": "1264799"
  },
  {
    "text": "it breaks but let's see oh let's see if we get through right now",
    "start": "1264799",
    "end": "1271539"
  },
  {
    "text": "and if we note the git check here then shortly fluke should actually update and",
    "start": "1274400",
    "end": "1280160"
  },
  {
    "text": "and from C5 to 21 here right so if you take a look uh it actually updated to",
    "start": "1280160",
    "end": "1286700"
  },
  {
    "text": "220 not one now and we can take a look at the parts in in the cluster and oops",
    "start": "1286700",
    "end": "1292580"
  },
  {
    "text": "we actually broke the English controller now because this super awesome flag apparently wasn't part of this let's",
    "start": "1292580",
    "end": "1299179"
  },
  {
    "text": "take a look at the other cluster then um oops we also broke it in the other cluster so",
    "start": "1299179",
    "end": "1307520"
  },
  {
    "text": "not very good right there's",
    "start": "1307520",
    "end": "1313640"
  },
  {
    "text": "so what just happened here",
    "start": "1313640",
    "end": "1317440"
  },
  {
    "text": "so well everything was running fine right we we reconciled against Maine and and both",
    "start": "1320320",
    "end": "1327320"
  },
  {
    "text": "clusters were picking up changes but now and I introduced a bug here and this bug",
    "start": "1327320",
    "end": "1332659"
  },
  {
    "text": "actually spread out to to both clusters uh at the same time because there's kind",
    "start": "1332659",
    "end": "1337820"
  },
  {
    "text": "of time nothing to isolate it right we are running on on the same folder so",
    "start": "1337820",
    "end": "1344179"
  },
  {
    "text": "so we probably if we are running 100 clusters or a thousand we probably need some way of mitigate this right so",
    "start": "1344179",
    "end": "1351799"
  },
  {
    "text": "that's in essence what's it about to to to scale up here and and well we are",
    "start": "1351799",
    "end": "1359179"
  },
  {
    "text": "running in git here one is that maybe you could argue that we are actually",
    "start": "1359179",
    "end": "1364940"
  },
  {
    "text": "messing up different life cycles right because you have one life cycle of your cluster you deploy new stuff to the",
    "start": "1364940",
    "end": "1372140"
  },
  {
    "text": "cluster maybe you you change stuff to your cluster and you also have kind of the infrastructure where you deploy new",
    "start": "1372140",
    "end": "1378260"
  },
  {
    "text": "stuff to your infrastructure and and that has another life cycle and right now we are keeping this kind of inside",
    "start": "1378260",
    "end": "1383419"
  },
  {
    "text": "of the same repository so it's kind of hard to distinguish what what is actually a cluster specific change and",
    "start": "1383419",
    "end": "1390260"
  },
  {
    "text": "what is an infrastructure change so one thing that we could start out doing is actually split up and now then we just",
    "start": "1390260",
    "end": "1397100"
  },
  {
    "text": "don't have a single serve to choose but we could split up uh certain that so that we have our infrastructure stuff",
    "start": "1397100",
    "end": "1403760"
  },
  {
    "text": "and configuration in another git repository and having done that we could",
    "start": "1403760",
    "end": "1408799"
  },
  {
    "text": "start applying some of the versioning techniques that we're using for other",
    "start": "1408799",
    "end": "1413960"
  },
  {
    "text": "stuff right because we are in git so we have stuff like text which we normally use for versioning of our software so",
    "start": "1413960",
    "end": "1421700"
  },
  {
    "text": "instead of just rolling out every commit to our cluster we could tag our",
    "start": "1421700",
    "end": "1427460"
  },
  {
    "text": "infrastructure components so we could say hey now I have the Ingress controller and the flux inversion",
    "start": "1427460",
    "end": "1433760"
  },
  {
    "text": "something and this combination of components we could tag with a zero zero zero for instance and and so on so every",
    "start": "1433760",
    "end": "1440539"
  },
  {
    "text": "every change something I create a new tag we would normally do with our",
    "start": "1440539",
    "end": "1445700"
  },
  {
    "text": "software and then for each cluster instead of just applying the head of our",
    "start": "1445700",
    "end": "1451280"
  },
  {
    "text": "git repository I could say okay at this point in time I want cluster 1 to run on",
    "start": "1451280",
    "end": "1456559"
  },
  {
    "text": "version 0 cluster 2 to run and resist zero and plus the three and then if I want to bump and have my super awesome",
    "start": "1456559",
    "end": "1464240"
  },
  {
    "text": "flag implemented in cluster one I could just bump the version of the infrastructure for just cluster one",
    "start": "1464240",
    "end": "1470960"
  },
  {
    "text": "right so at this point in time when I do it this commit I just change the version",
    "start": "1470960",
    "end": "1476299"
  },
  {
    "text": "that should be fetched down here so instead of just fetching from Main I fetch a specific tag",
    "start": "1476299",
    "end": "1482840"
  },
  {
    "text": "um so easy problem solved right now the",
    "start": "1482840",
    "end": "1488120"
  },
  {
    "text": "rollouts are actually fully versioned and we are mitigating the risk of uh of",
    "start": "1488120",
    "end": "1494720"
  },
  {
    "text": "rolling out something to a lot of clusters in one go well this is uh scaling linear with",
    "start": "1494720",
    "end": "1502460"
  },
  {
    "text": "number of clusters right because every time we put in a new cluster we also have a configuration",
    "start": "1502460",
    "end": "1509659"
  },
  {
    "text": "that is specific for that cluster to tell which specific tag in our infrastructure is this cluster running",
    "start": "1509659",
    "end": "1515659"
  },
  {
    "text": "on so every time we get a new cluster we also get one more tag to maintain and the mock cluster we get the more",
    "start": "1515659",
    "end": "1523220"
  },
  {
    "text": "different combinations we actually have to run right so if we have a 100 clusters and we have 100 tags on our",
    "start": "1523220",
    "end": "1529400"
  },
  {
    "text": "infrastructure we risk that all these hundred clusters are actually running on different stacks of the infrastructure",
    "start": "1529400",
    "end": "1534679"
  },
  {
    "text": "and that also gets kind of hard to to manage so what I'm gonna do we need some",
    "start": "1534679",
    "end": "1541520"
  },
  {
    "text": "more sustainable way of of scaling this we need to be able to roll out to to",
    "start": "1541520",
    "end": "1546799"
  },
  {
    "text": "multiple clusters so we need to in one way or another be able to kind of Define",
    "start": "1546799",
    "end": "1551900"
  },
  {
    "text": "some groups of clusters that we roll out to so traditionally we could apply",
    "start": "1551900",
    "end": "1558980"
  },
  {
    "text": "something like the Delta's staging approach to to the infrastructure also",
    "start": "1558980",
    "end": "1564919"
  },
  {
    "text": "right but probably both for you and and especially",
    "start": "1564919",
    "end": "1569960"
  },
  {
    "text": "in in a company like ours we just provide many clusters right so",
    "start": "1569960",
    "end": "1575120"
  },
  {
    "text": "what the customers use the cluster for isn't really of course often we know it but it isn't",
    "start": "1575120",
    "end": "1582500"
  },
  {
    "text": "really one is our concern right so if we deliver a cluster to customer it's basically a production cluster we",
    "start": "1582500",
    "end": "1588740"
  },
  {
    "text": "shouldn't mess up the production clusters of our of our customers by by",
    "start": "1588740",
    "end": "1593779"
  },
  {
    "text": "testing out stuff in those and and and you probably have it the same way you you don't want your development cluster",
    "start": "1593779",
    "end": "1600200"
  },
  {
    "text": "to be messed up because something you want to try out someone wants to try out a new English controller right",
    "start": "1600200",
    "end": "1606980"
  },
  {
    "text": "um so this way of handling uh infrastructure changes in the same way",
    "start": "1606980",
    "end": "1613460"
  },
  {
    "text": "as we do with the applications is probably or might not be be the best",
    "start": "1613460",
    "end": "1618799"
  },
  {
    "text": "approach so what else could we do well we started looking at the at how technology is",
    "start": "1618799",
    "end": "1627559"
  },
  {
    "text": "adopted in in general because we actually kind of want our customers to be able to to have a",
    "start": "1627559",
    "end": "1635179"
  },
  {
    "text": "choice here because there's also some opportunity in in actually getting the new version and the new features uh a",
    "start": "1635179",
    "end": "1642260"
  },
  {
    "text": "little bit before uh the remaining here so so you might be you might be a",
    "start": "1642260",
    "end": "1647600"
  },
  {
    "text": "customer that actually wants these new feed fonts to take the opportunity there and then can live with taking a little",
    "start": "1647600",
    "end": "1654559"
  },
  {
    "text": "bit of risk that something might break uh it cannot be also be that you have a more resilient application that is",
    "start": "1654559",
    "end": "1660980"
  },
  {
    "text": "actually capable of surviving uh some bumps on the way so we actually turned",
    "start": "1660980",
    "end": "1667340"
  },
  {
    "text": "to this Theory by a guy that is named Rogers he made this the future",
    "start": "1667340",
    "end": "1674600"
  },
  {
    "text": "that's a little bit early diffusion of innovation Theory and that's basically is concerned with how people are taking",
    "start": "1674600",
    "end": "1682580"
  },
  {
    "text": "in new technology so this is actually the distribution of of people and how",
    "start": "1682580",
    "end": "1688580"
  },
  {
    "text": "people are adopting new technology and some some some persons are risk prone",
    "start": "1688580",
    "end": "1694460"
  },
  {
    "text": "and and want the new features because they see an opportunity and want to test out new stuff some early adopters see",
    "start": "1694460",
    "end": "1701480"
  },
  {
    "text": "there's some opportunity here but we just wanted to mature just a little bit and so on so basically it's it's uh it's",
    "start": "1701480",
    "end": "1709220"
  },
  {
    "text": "a trade-off between opportunity and risk um and there is a little bit of a little",
    "start": "1709220",
    "end": "1715760"
  },
  {
    "text": "bit more detail on on how these categories of of people is is uh is",
    "start": "1715760",
    "end": "1722000"
  },
  {
    "text": "described so basically what we what we have done is that we say hey as a customer you can actually choose where",
    "start": "1722000",
    "end": "1729140"
  },
  {
    "text": "on this cycle do you want your clusters to be so you might may have some clusters where you actually do",
    "start": "1729140",
    "end": "1735140"
  },
  {
    "text": "Innovation and often for instance their clusters where you want to to have stuff",
    "start": "1735140",
    "end": "1741020"
  },
  {
    "text": "rather fast but you also are willing to take the risk of something that might",
    "start": "1741020",
    "end": "1747380"
  },
  {
    "text": "break now it's not like we do not test stuff because before it actually go into innovators right we have we have some",
    "start": "1747380",
    "end": "1754279"
  },
  {
    "text": "some platform clusters and and some test clusters that that are not the that are not running any any production workloads",
    "start": "1754279",
    "end": "1760820"
  },
  {
    "text": "but as a customer the first place that you would get new new changes and new",
    "start": "1760820",
    "end": "1766700"
  },
  {
    "text": "features would be would be in the innovators zone right and then you can",
    "start": "1766700",
    "end": "1771980"
  },
  {
    "text": "kind of move up right so you you can have a cluster that are in the early adapter Zone where you say okay we have",
    "start": "1771980",
    "end": "1778880"
  },
  {
    "text": "some production workloads here that actually can benefit from having new",
    "start": "1778880",
    "end": "1784580"
  },
  {
    "text": "features rather quickly and then so on you can see for instance the late majority you might have some critical",
    "start": "1784580",
    "end": "1790880"
  },
  {
    "text": "workloads and and you want to make sure that a new component has been running in",
    "start": "1790880",
    "end": "1796460"
  },
  {
    "text": "a number of clusters before it actually hits your clusters and then you can kind of categorize your cluster as late",
    "start": "1796460",
    "end": "1801980"
  },
  {
    "text": "majority and this goes for of course also some of the infrastructure beneath right so rolling",
    "start": "1801980",
    "end": "1808820"
  },
  {
    "text": "out new versions of kubernetes of course we would roll out the version of kubernetes to to innovators first and",
    "start": "1808820",
    "end": "1814340"
  },
  {
    "text": "then and so on um but how do we actually then implement",
    "start": "1814340",
    "end": "1819799"
  },
  {
    "text": "this using githubs well instead of working with tags here we",
    "start": "1819799",
    "end": "1826159"
  },
  {
    "text": "could turn to branches so we still we still split up the cluster specific",
    "start": "1826159",
    "end": "1832940"
  },
  {
    "text": "stuff into some git repositories that I actually the the point of the starting",
    "start": "1832940",
    "end": "1838159"
  },
  {
    "text": "point from for bootstriping a cluster but then we have the the the infrastructure repository and instead of",
    "start": "1838159",
    "end": "1845960"
  },
  {
    "text": "just having Main and tagging different releases we actually create the branches",
    "start": "1845960",
    "end": "1851059"
  },
  {
    "text": "that correspond to the resilience zones that you just saw so we have an innovators Branch where stuff startup",
    "start": "1851059",
    "end": "1858520"
  },
  {
    "text": "perhaps it startups a little bit earlier on but basically the innovators and then we have a promotion path down through",
    "start": "1858520",
    "end": "1865700"
  },
  {
    "text": "the down through the the branches here so when it has been running in all the",
    "start": "1865700",
    "end": "1870799"
  },
  {
    "text": "innovators clusters for a while we merge it down to early adopters and down to early majority so on",
    "start": "1870799",
    "end": "1877760"
  },
  {
    "text": "um then we have created some automation here so the moment that we actually have a difference between innovators and",
    "start": "1877760",
    "end": "1884779"
  },
  {
    "text": "early adopters we create the pull requests automatically we are not approving it but but it's there so when",
    "start": "1884779",
    "end": "1890840"
  },
  {
    "text": "we when we have a matured the Innovative stuff we can basically merge the pull",
    "start": "1890840",
    "end": "1896059"
  },
  {
    "text": "request and then the next pull request fires off because now there is a difference between early adopters and",
    "start": "1896059",
    "end": "1901520"
  },
  {
    "text": "early majority so there's a little bit of tooling and a little bit of automation uh beneath this",
    "start": "1901520",
    "end": "1907820"
  },
  {
    "text": "so let's take a look at the same rollout as",
    "start": "1907820",
    "end": "1913340"
  },
  {
    "text": "we did before here ah",
    "start": "1913340",
    "end": "1919840"
  },
  {
    "text": "just a moment",
    "start": "1921020",
    "end": "1923980"
  },
  {
    "text": "so basically this is the source code for the examples is on GitHub I think the",
    "start": "1928100",
    "end": "1935419"
  },
  {
    "text": "link there is at the end of the the presentation but basically there's some",
    "start": "1935419",
    "end": "1941240"
  },
  {
    "text": "scripts that starts up the stuff that you that you saw before now I just",
    "start": "1941240",
    "end": "1946640"
  },
  {
    "text": "forgot to or I was in the wrong directory so so I didn't delete the the",
    "start": "1946640",
    "end": "1953059"
  },
  {
    "text": "old one here and we'll just take a little moment",
    "start": "1953059",
    "end": "1959140"
  },
  {
    "text": "let's see so basically now we can go through",
    "start": "1965779",
    "end": "1971679"
  },
  {
    "text": "basically now we have created instead of instead of having just one repository we",
    "start": "1971679",
    "end": "1979039"
  },
  {
    "text": "have the Clusters in in one group this is the root of one git repository and this is the root of the the other git",
    "start": "1979039",
    "end": "1984919"
  },
  {
    "text": "repository and now if we take a look at what's in the cluster we still have for",
    "start": "1984919",
    "end": "1990799"
  },
  {
    "text": "cluster zero zero one it's deploys the the part info application uh and then we",
    "start": "1990799",
    "end": "1997700"
  },
  {
    "text": "got this new infrastructure resources and basically now we add one",
    "start": "1997700",
    "end": "2005200"
  },
  {
    "text": "market repository so when the the cluster is up and running in a moment we can see that there will be two git",
    "start": "2005200",
    "end": "2011919"
  },
  {
    "text": "repository resources out there and and if we examine the specific URL for the",
    "start": "2011919",
    "end": "2017980"
  },
  {
    "text": "git repository we'll see that for for this it's infrastructure instead of clusters and then basically for for the",
    "start": "2017980",
    "end": "2025000"
  },
  {
    "text": "example here as we saw in the very first example basically it just applies everything",
    "start": "2025000",
    "end": "2031899"
  },
  {
    "text": "um but the other trick is that we also pick a branch here other than main so for this infrastructure repository we",
    "start": "2031899",
    "end": "2038919"
  },
  {
    "text": "pick the branch innovators if we take a look at class of 002",
    "start": "2038919",
    "end": "2044159"
  },
  {
    "text": "it will pick the branch of the adopters um",
    "start": "2044159",
    "end": "2049358"
  },
  {
    "text": "and then let's take a look if we up and running we are up and running this is the root",
    "start": "2049359",
    "end": "2055300"
  },
  {
    "text": "of the infrastructure repository and basically that's the same contents as was in the folder before now it's just",
    "start": "2055300",
    "end": "2061358"
  },
  {
    "text": "moved into its own repository so flux itself is there and the English controller is there",
    "start": "2061359",
    "end": "2067618"
  },
  {
    "text": "and now we should be up and running not sure if all containers there are other",
    "start": "2067619",
    "end": "2073780"
  },
  {
    "text": "last containers spinning up here so with the English controllers up we have flux we have bought info just before as",
    "start": "2073780",
    "end": "2079179"
  },
  {
    "text": "before and if we look at the git repositories here we can see that now there's two git",
    "start": "2079179",
    "end": "2084638"
  },
  {
    "text": "repositories one is pointing to the Clusters and one responding to the infrastructure and as you saw before the",
    "start": "2084639",
    "end": "2091358"
  },
  {
    "text": "Clusters is still running on Main but infrastructure is running on the branch that matches the category of the cluster",
    "start": "2091359",
    "end": "2097780"
  },
  {
    "text": "or the zone of the cluster so if I were to do the same change as",
    "start": "2097780",
    "end": "2103900"
  },
  {
    "text": "before I still believe that there should be an",
    "start": "2103900",
    "end": "2109000"
  },
  {
    "text": "super awesome flag for any next control here",
    "start": "2109000",
    "end": "2114480"
  },
  {
    "text": "I could basically do the same thing right because the same it's the same",
    "start": "2117040",
    "end": "2123579"
  },
  {
    "text": "basic idea uh uh and now we are in infrastructure and I could say",
    "start": "2123579",
    "end": "2130839"
  },
  {
    "text": "Adam commits if I was changing the right file",
    "start": "2130839",
    "end": "2136599"
  },
  {
    "text": "I could um this is this is just for for the git repository basically this is the source",
    "start": "2136599",
    "end": "2142780"
  },
  {
    "text": "for creating uh for creating the git repository so there's no git here where this is actually the copy where",
    "start": "2142780",
    "end": "2150560"
  },
  {
    "text": "[Music] put it here instead",
    "start": "2150560",
    "end": "2156339"
  },
  {
    "text": "this is actually the copy that is checked out that's better and then in 30 seconds or",
    "start": "2156339",
    "end": "2164380"
  },
  {
    "text": "so it should try to to reconcile the infrastructure it was probably this",
    "start": "2164380",
    "end": "2170460"
  },
  {
    "text": "6f and we can see the committee down here yeah 6f so now",
    "start": "2170460",
    "end": "2176079"
  },
  {
    "text": "of course this still crashes but since we only have it on the innovators and",
    "start": "2176079",
    "end": "2181240"
  },
  {
    "text": "not the early adopts early adopters if we go into the cluster zero zero two now",
    "start": "2181240",
    "end": "2187900"
  },
  {
    "text": "we should see that cluster zero two two is unaffected right because because that's still running on the old version",
    "start": "2187900",
    "end": "2194079"
  },
  {
    "text": "of the English controller we haven't kind of promoted any change here so",
    "start": "2194079",
    "end": "2200619"
  },
  {
    "text": "foreign it is actually it is possible and and get UPS is very very powerful to do this",
    "start": "2200619",
    "end": "2207940"
  },
  {
    "text": "we can't actually sit in one git repository and roll out stuff to a number of clusters but we have to kind",
    "start": "2207940",
    "end": "2214780"
  },
  {
    "text": "of uh we have to to kind of observe the blast zones that we would be willing to risk and if you have a setup with the",
    "start": "2214780",
    "end": "2221800"
  },
  {
    "text": "with like a fewer clusters the approach with using git tags might be be okay but",
    "start": "2221800",
    "end": "2227500"
  },
  {
    "text": "if you need to scale up and and and you need not to have kind of this linear scale up uh then then you probably need",
    "start": "2227500",
    "end": "2234700"
  },
  {
    "text": "something else besides the git text we actually started out uh doing the git checking approach instead but but it",
    "start": "2234700",
    "end": "2242680"
  },
  {
    "text": "just becomes tedious to actually go in and and update the infrastructure check for each cluster individually it doesn't",
    "start": "2242680",
    "end": "2249880"
  },
  {
    "text": "scale uh when when you get a lot of clusters so consider what it's right in in your context and then as I said",
    "start": "2249880",
    "end": "2257859"
  },
  {
    "text": "before we have done some some automation around around the pull requests and and validating whether you are actually",
    "start": "2257859",
    "end": "2263619"
  },
  {
    "text": "changing something that you shouldn't be changing and and so on and we are also doing some some stuff around uh",
    "start": "2263619",
    "end": "2272079"
  },
  {
    "text": "visibility into this promotion path so that the customers can see which",
    "start": "2272079",
    "end": "2277599"
  },
  {
    "text": "components is actually running in my cluster right now and which are on the way so when when we know that a",
    "start": "2277599",
    "end": "2283060"
  },
  {
    "text": "component has been upgraded in the innovators clusters then if we have customers that have cluster in late",
    "start": "2283060",
    "end": "2289420"
  },
  {
    "text": "minority we know that in a few promotions they will be hit by a new",
    "start": "2289420",
    "end": "2294880"
  },
  {
    "text": "version of of the English controller for instance so so we're also building some some visualization around around this",
    "start": "2294880",
    "end": "2301660"
  },
  {
    "text": "for for our customers um yeah but uh yeah I think that's that was",
    "start": "2301660",
    "end": "2309520"
  },
  {
    "text": "pretty much uh what I chosen to to take thank you very much thank you",
    "start": "2309520",
    "end": "2316359"
  },
  {
    "text": "for a round of applause [Applause]",
    "start": "2316359",
    "end": "2324469"
  }
]