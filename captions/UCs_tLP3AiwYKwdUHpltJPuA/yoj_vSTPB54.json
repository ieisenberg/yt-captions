[
  {
    "text": "[Music]",
    "start": "970",
    "end": "7838"
  },
  {
    "text": "okay so hello everyone my name is Dennis I am a developer advocate of touch base",
    "start": "13240",
    "end": "20650"
  },
  {
    "text": "so we would like to talk a little bit I would like to talk a little bit about the basis running databases on",
    "start": "20650",
    "end": "26720"
  },
  {
    "text": "kubernetes essentially I would like to start with a small tip for you guys so",
    "start": "26720",
    "end": "34760"
  },
  {
    "text": "whenever you are reading an article line if the article is start with a question",
    "start": "34760",
    "end": "41649"
  },
  {
    "text": "the answer for this article is potentially no those are all real use",
    "start": "41649",
    "end": "50629"
  },
  {
    "text": "cases here so back in 2016 we have all those questions of people's all those",
    "start": "50629",
    "end": "56750"
  },
  {
    "text": "articles actually of people saying should I run my advice on docker or should I run my ink on is a container",
    "start": "56750",
    "end": "65268"
  },
  {
    "text": "database right for your organization and those articles here are all from very",
    "start": "65269",
    "end": "72890"
  },
  {
    "text": "reliable sources and the conclusion of those articles were that no you should",
    "start": "72890",
    "end": "79760"
  },
  {
    "text": "not run your database on docker and back then the main argument was that",
    "start": "79760",
    "end": "87670"
  },
  {
    "text": "containers are designed to be stateless and and yeah that's true containers air",
    "start": "88300",
    "end": "94670"
  },
  {
    "text": "are in fact stateless however if we fast",
    "start": "94670",
    "end": "99920"
  },
  {
    "text": "forward to 2009 19 essentially you see that all those articles about the same",
    "start": "99920",
    "end": "106790"
  },
  {
    "text": "topic are not question is anymore so they are all we even have something like",
    "start": "106790",
    "end": "112880"
  },
  {
    "text": "running database in doctor at scale which is the completely opposite of what",
    "start": "112880",
    "end": "118790"
  },
  {
    "text": "we had just a few years ago and the natural question is ok what have changed",
    "start": "118790",
    "end": "126830"
  },
  {
    "text": "them why in just 3 years we completely change our mind and well there are many things",
    "start": "126830",
    "end": "135920"
  },
  {
    "text": "that happen during this time but I would like to point",
    "start": "135920",
    "end": "141410"
  },
  {
    "text": "phew that I consider the most important ones the first one is of course now we",
    "start": "141410",
    "end": "147560"
  },
  {
    "text": "have production great images so back then when people first started running",
    "start": "147560",
    "end": "154000"
  },
  {
    "text": "docker did a business on docker on containers actually they were just",
    "start": "154000",
    "end": "161480"
  },
  {
    "text": "creating those images by themselves and the vendors haven't certified that okay",
    "start": "161480",
    "end": "167600"
  },
  {
    "text": "we guarantee that you can round it at the base on docker so that was one of",
    "start": "167600",
    "end": "173270"
  },
  {
    "text": "those things now I think Seco server was essentially one of the late the last",
    "start": "173270",
    "end": "179510"
  },
  {
    "text": "ones to release actually a certified [Music] docker image but now it's kind of a",
    "start": "179510",
    "end": "187700"
  },
  {
    "text": "common thing everybody every single vendor has their own operating machine",
    "start": "187700",
    "end": "193990"
  },
  {
    "text": "of course using docker or containers or",
    "start": "193990",
    "end": "199460"
  },
  {
    "text": "make is far easier to configure and set up then stalling this on bare metal you",
    "start": "199460",
    "end": "208040"
  },
  {
    "text": "can also separate storage from compute and from for some big data databases",
    "start": "208040",
    "end": "214340"
  },
  {
    "text": "that's a very good thing because you can scale the you actually have a huge",
    "start": "214340",
    "end": "221570"
  },
  {
    "text": "storage and you can upgrade and increase the size of your storage without the restarting the database you source you",
    "start": "221570",
    "end": "228650"
  },
  {
    "text": "have some availability there and of course now we also have communities and",
    "start": "228650",
    "end": "235790"
  },
  {
    "text": "stateful sets which is essentially them the core of this top one of the problems",
    "start": "235790",
    "end": "245540"
  },
  {
    "text": "with databases on containers is actually that well databases are highly",
    "start": "245540",
    "end": "252890"
  },
  {
    "text": "configurable and you you would ruin it",
    "start": "252890",
    "end": "258230"
  },
  {
    "text": "will essentially requires you to generate a new image for every single",
    "start": "258230",
    "end": "264100"
  },
  {
    "text": "configuration configuration change you have on on your database and it does so",
    "start": "264100",
    "end": "271010"
  },
  {
    "text": "a little bit complicated to ensure that all the databases are running the same image so there is it's not just just running",
    "start": "271010",
    "end": "281030"
  },
  {
    "text": "the debates on docker is not something that this guna there is some missing",
    "start": "281030",
    "end": "286400"
  },
  {
    "text": "parts so one of the cool things in Cabrini's is that it is highly",
    "start": "286400",
    "end": "293630"
  },
  {
    "text": "extensible and we have something called custom resources the patient so let me",
    "start": "293630",
    "end": "300620"
  },
  {
    "text": "come back here first let me increase the font size okay so in communities we have something",
    "start": "300620",
    "end": "309560"
  },
  {
    "text": "called Casa Rosada pension which is this thing here so in this case I'm defining",
    "start": "309560",
    "end": "319970"
  },
  {
    "text": "a new customers custom customer source definition here I'm giving this name and",
    "start": "319970",
    "end": "326120"
  },
  {
    "text": "this is the group and essentially I say okay my new the kind of my new research",
    "start": "326120",
    "end": "333830"
  },
  {
    "text": "is called to do what I'm saying - to - kubernetes here is I'm saying hey Co",
    "start": "333830",
    "end": "340430"
  },
  {
    "text": " there is a new type of research you should be aware of which is called",
    "start": "340430",
    "end": "346370"
  },
  {
    "text": "to do in practice what is happening here",
    "start": "346370",
    "end": "351979"
  },
  {
    "text": "is something similar to creating a table so I go to communities and saying hey",
    "start": "351979",
    "end": "359750"
  },
  {
    "text": "there is this new table here to do that might have some verbal some some",
    "start": "359750",
    "end": "365949"
  },
  {
    "text": "attributes and I have defined here that abuse but yeah essentially I'm defining",
    "start": "365949",
    "end": "371449"
  },
  {
    "text": "a type here and to do that I have to create that because the resource deficient I have to do is to run control",
    "start": "371449",
    "end": "379659"
  },
  {
    "text": "create my app a month and to do C or D",
    "start": "379659",
    "end": "386979"
  },
  {
    "text": "and now I just created the new research",
    "start": "386979",
    "end": "394460"
  },
  {
    "text": "attention and now if I want to insert data on this you want to create a new",
    "start": "394460",
    "end": "406460"
  },
  {
    "text": "resource of the to do type were comparing this to a more back-end",
    "start": "406460",
    "end": "413570"
  },
  {
    "text": "developer thing will be similar to insert a line on this table I have here",
    "start": "413570",
    "end": "420290"
  },
  {
    "text": "my definition and say mi my yellow fire and say and here say okay this new",
    "start": "420290",
    "end": "425840"
  },
  {
    "text": "resource here is the to do kind it has a",
    "start": "425840",
    "end": "430880"
  },
  {
    "text": "name that I have defined here and the specs here just attributes that",
    "start": "430880",
    "end": "435980"
  },
  {
    "text": "I added so message speaker to go to the world and what I can do to just insert",
    "start": "435980",
    "end": "443450"
  },
  {
    "text": "this data here on on committees I have to run Google through great - app to do okay and the cool thing is",
    "start": "443450",
    "end": "458360"
  },
  {
    "text": "now I can actually say control get to dues and essentially complete a company",
    "start": "458360",
    "end": "466550"
  },
  {
    "text": "to be returned to do that I have defined here and if I run code control describe",
    "start": "466550",
    "end": "473980"
  },
  {
    "text": "I will see all the things that I have",
    "start": "473980",
    "end": "480170"
  },
  {
    "text": "defined here so here's the attributes I have defined so essentially this is",
    "start": "480170",
    "end": "488140"
  },
  {
    "text": "almost like using kubernetes as a database in fact we are storing",
    "start": "488200",
    "end": "495050"
  },
  {
    "text": "everything here on on on a database called attd which is the database that kubernetes use but what is really",
    "start": "495050",
    "end": "504530"
  },
  {
    "text": "special about this thing that we just did is that I can actually store the",
    "start": "504530",
    "end": "511310"
  },
  {
    "text": "whole definition of my database uncle it is right so instead of having out the",
    "start": "511310",
    "end": "517460"
  },
  {
    "text": "whole configuration like generating a new image of my own of my database every",
    "start": "517460",
    "end": "524120"
  },
  {
    "text": "time I can store the whole configuration of my server here and and then of course",
    "start": "524120",
    "end": "532430"
  },
  {
    "text": "this doesn't change the fact that databases are stateful containers are",
    "start": "532430",
    "end": "538940"
  },
  {
    "text": "stateless but at least now I have my my the whole configuration on the database",
    "start": "538940",
    "end": "544649"
  },
  {
    "text": "inside communities and then kubernetes has something called operators so",
    "start": "544649",
    "end": "551549"
  },
  {
    "text": "operators are essentially applications that listen to events inside communities",
    "start": "551549",
    "end": "559610"
  },
  {
    "text": "and one of the cool things with operators in that it can listen to it to",
    "start": "559610",
    "end": "567410"
  },
  {
    "text": "changes in customers in in those definitions that we have created here so",
    "start": "567410",
    "end": "572759"
  },
  {
    "text": "as if I create an operator for my to-do list I could whenever is certain to the list",
    "start": "572759",
    "end": "578910"
  },
  {
    "text": "the operator could hear hear this event that okay now it's new to do we just",
    "start": "578910",
    "end": "585119"
  },
  {
    "text": "create a new to do research type and then this operator could like get all",
    "start": "585119",
    "end": "591660"
  },
  {
    "text": "the the data that we have here and then create a card on Trello or create a",
    "start": "591660",
    "end": "600389"
  },
  {
    "text": "ticket on JIRA so you can listen to the changes of those resources here and",
    "start": "600389",
    "end": "606679"
  },
  {
    "text": "essentially that's make this combination",
    "start": "606679",
    "end": "612540"
  },
  {
    "text": "of operator and coastal resource definition something really powerful",
    "start": "612540",
    "end": "618439"
  },
  {
    "text": "because I can essentially build an app",
    "start": "618439",
    "end": "623790"
  },
  {
    "text": "that understands how to do some operations deployed isn't greatest and",
    "start": "623790",
    "end": "629699"
  },
  {
    "text": "listen to those resource defintions and take some actions in our case now",
    "start": "629699",
    "end": "637019"
  },
  {
    "text": "that we whenever we add let's come back here so whenever we add a new a new",
    "start": "637019",
    "end": "644879"
  },
  {
    "text": "resource with the type Couchbase clustered sorry this go back here whenever I go back whenever I add a new",
    "start": "644879",
    "end": "652169"
  },
  {
    "text": "resource type called cut based cluster the operator could listen to this event",
    "start": "652169",
    "end": "658799"
  },
  {
    "text": "that okay there is a new based culture definition and it's pin up the",
    "start": "658799",
    "end": "664739"
  },
  {
    "text": "database with all the configurations we have defined so essentially everything",
    "start": "664739",
    "end": "670949"
  },
  {
    "text": "now in communities will be added as new most of the new features will be",
    "start": "670949",
    "end": "676209"
  },
  {
    "text": "essentially a combination of research concerns of the pensions and operators",
    "start": "676209",
    "end": "682860"
  },
  {
    "text": "and and the good thing is with this yeah",
    "start": "682860",
    "end": "688569"
  },
  {
    "text": "this is just an example of how I can listen to events so this is not the code",
    "start": "688569",
    "end": "694149"
  },
  {
    "text": "of an operator and can literally see that we have here an add event handler",
    "start": "694149",
    "end": "699189"
  },
  {
    "text": "and when a new pod is added we handle this this event here with some code",
    "start": "699189",
    "end": "706509"
  },
  {
    "text": "that's exactly what's going on inside the operator you are listen you're literally listening to event changed in",
    "start": "706509",
    "end": "713589"
  },
  {
    "text": "the Cottontail and cure it is is an event-driven platform so whenever you",
    "start": "713589",
    "end": "720519"
  },
  {
    "text": "create a new pod or a pod Italy Ted or someone changes cursor a new resource",
    "start": "720519",
    "end": "728559"
  },
  {
    "text": "actually it will trigger an event and all the operators or the applications",
    "start": "728559",
    "end": "734350"
  },
  {
    "text": "that are extending coburn gives can listen to those those events and what is",
    "start": "734350",
    "end": "741069"
  },
  {
    "text": "really powerful about this when it comes to databases is that you can actually provide a colleg gnostic database as a",
    "start": "741069",
    "end": "748990"
  },
  {
    "text": "service right because first you can essentially add a new in this case",
    "start": "748990",
    "end": "757240"
  },
  {
    "text": "Couchbase cluster definition and the operator the operator that we provides a",
    "start": "757240",
    "end": "763980"
  },
  {
    "text": "touch base has peers an operator for that so the operator that we probably we",
    "start": "763980",
    "end": "770319"
  },
  {
    "text": "provide will listen to this event and automatically provision a cache based",
    "start": "770319",
    "end": "775509"
  },
  {
    "text": "cluster for you according to the configurations that you have defined the",
    "start": "775509",
    "end": "780519"
  },
  {
    "text": "second thing is it also can do some extra stuff like if something goes wrong",
    "start": "780519",
    "end": "786910"
  },
  {
    "text": "with a cluster the operator is smart enough to see that okay something happened here and let me fix that for",
    "start": "786910",
    "end": "793779"
  },
  {
    "text": "you so let's let's actually do this on our demo den so first thing is let me",
    "start": "793779",
    "end": "802720"
  },
  {
    "text": "just premiere my console and run from control wait",
    "start": "802720",
    "end": "810010"
  },
  {
    "text": "ah Kelly's toaster",
    "start": "810010",
    "end": "815130"
  },
  {
    "text": "okay so now we just create our cache bit cluster of course it will take a while",
    "start": "815130",
    "end": "820390"
  },
  {
    "text": "so if I could control get parts - watch type oh cool",
    "start": "820390",
    "end": "833200"
  },
  {
    "text": "okay so now we are a spinny starting the first base node if we see it in the",
    "start": "833200",
    "end": "839230"
  },
  {
    "text": "patient here touch base cluster we would",
    "start": "839230",
    "end": "844810"
  },
  {
    "text": "see that okay this is the fire I just this is the sim fighter that just ran",
    "start": "844810",
    "end": "850540"
  },
  {
    "text": "here this cluster and you can see that okay in this file I already added out",
    "start": "850540",
    "end": "857740"
  },
  {
    "text": "the the customer service definition I already have the operator running here",
    "start": "857740",
    "end": "863200"
  },
  {
    "text": "I'm just to save on time but essentially what I'm doing here is I have a running",
    "start": "863200",
    "end": "870610"
  },
  {
    "text": "coach based enterprise 6.0 I have the whole configure configuration of here of",
    "start": "870610",
    "end": "875950"
  },
  {
    "text": "how much memory I want for each service I have failed over here so you can",
    "start": "875950",
    "end": "884230"
  },
  {
    "text": "server is responsible for is unresponsive for 30 seconds we will",
    "start": "884230",
    "end": "890440"
  },
  {
    "text": "consider that this we would kill the server and start a new one and here on",
    "start": "890440",
    "end": "897310"
  },
  {
    "text": "buckets and say okay please create a new couch be a bucket called cockpit sample",
    "start": "897310",
    "end": "903190"
  },
  {
    "text": "the tank is cocked based this is the memory we have three copies or two",
    "start": "903190",
    "end": "908740"
  },
  {
    "text": "replicas of this of this bucket so as usually we have three copies of each",
    "start": "908740",
    "end": "914590"
  },
  {
    "text": "document just to be sure that if a server fails we still have under",
    "start": "914590",
    "end": "920920"
  },
  {
    "text": "replicas will be promoted and you haven't lost anything at all so yeah we",
    "start": "920920",
    "end": "927550"
  },
  {
    "text": "have here see be example zero zero one zero zero two is almost ready let's do",
    "start": "927550",
    "end": "933250"
  },
  {
    "text": "something else here so I have this is also a java application and this job",
    "start": "933250",
    "end": "941290"
  },
  {
    "text": "application conveys support for spring dicta and I have a very simple",
    "start": "941290",
    "end": "948380"
  },
  {
    "text": "app here let's see if it could see that",
    "start": "948380",
    "end": "953510"
  },
  {
    "text": "did this app essentially insert data yeah yeah so this app essentially insert",
    "start": "953510",
    "end": "959870"
  },
  {
    "text": "data I have a cron job here that inserts data on Couchbase every few seconds and",
    "start": "959870",
    "end": "968149"
  },
  {
    "text": "just I want to just show you guys that everything that we do like why we",
    "start": "968149",
    "end": "974510"
  },
  {
    "text": "recovery database a period the base we are doing this why are the applications to live so we are not losing any",
    "start": "974510",
    "end": "980870"
  },
  {
    "text": "connectivity with the with their application so our your application",
    "start": "980870",
    "end": "987410"
  },
  {
    "text": "reading to Couchbase is to fully responsive so what we can do here is",
    "start": "987410",
    "end": "992480"
  },
  {
    "text": "essentially that's curious and they could control create my app spring boot",
    "start": "992480",
    "end": "999769"
  },
  {
    "text": "app so this will deploy our application",
    "start": "999769",
    "end": "1005050"
  },
  {
    "text": "as well and these applications already connected to touch base so if we run to",
    "start": "1005050",
    "end": "1010209"
  },
  {
    "text": "control get pods now I guess that yeah our application is almost there at this",
    "start": "1010209",
    "end": "1016720"
  },
  {
    "text": "point we are culture based cluster is ready so let's let's connect to our",
    "start": "1016720",
    "end": "1025589"
  },
  {
    "text": "database so I can run here I look forward to my local machine local port",
    "start": "1025589",
    "end": "1031808"
  },
  {
    "text": "and I can come here and say you look a host 8080 one and hopefully yeah years",
    "start": "1031809",
    "end": "1047199"
  },
  {
    "text": "this is a stellar coffee based web console okay",
    "start": "1047199",
    "end": "1056690"
  },
  {
    "text": "so first here we have three servers so the reason why we have this message is",
    "start": "1056690",
    "end": "1062690"
  },
  {
    "text": "is I specified that I have three replicas but I would just have three",
    "start": "1062690",
    "end": "1067729"
  },
  {
    "text": "servers and which means that I won't have two copies of the data which is okay for this example I would need like",
    "start": "1067729",
    "end": "1075769"
  },
  {
    "text": "four servers so these have three copies of it it of course but here is the three",
    "start": "1075769",
    "end": "1081739"
  },
  {
    "text": "nodes that I have here on my on my pot here the other two things are actually",
    "start": "1081739",
    "end": "1088460"
  },
  {
    "text": "the operator so their operators are everybody you don't need to worry about the operators just a yellow fire that",
    "start": "1088460",
    "end": "1094309"
  },
  {
    "text": "you download and run so we provide this the operator for you and then the mission controller is actually just a",
    "start": "1094309",
    "end": "1102519"
  },
  {
    "text": "way to validate your customer search your resource definition on kubernetes",
    "start": "1102519",
    "end": "1110629"
  },
  {
    "text": "just be sure that you're not inserting anything which is semantically invalid",
    "start": "1110629",
    "end": "1116330"
  },
  {
    "text": "so let's say if I made up some some let's go back to cultivate custard if I",
    "start": "1116330",
    "end": "1124639"
  },
  {
    "text": "create something you attributed here that is not valid when I try to insert",
    "start": "1124639",
    "end": "1129679"
  },
  {
    "text": "this on kubernetes this the the mission controller will",
    "start": "1129679",
    "end": "1135169"
  },
  {
    "text": "validate and show me a message saying hey this is not about the operation so",
    "start": "1135169",
    "end": "1140539"
  },
  {
    "text": "now that we have our our cluster here let's do just see one thing here so",
    "start": "1140539",
    "end": "1148669"
  },
  {
    "text": "statistics yeah okay so nodes right",
    "start": "1148669",
    "end": "1159190"
  },
  {
    "text": "let's is our application running here",
    "start": "1159190",
    "end": "1164470"
  },
  {
    "text": "okay potentially because I forgot to run oh yeah I have to run spring so cook go",
    "start": "1165159",
    "end": "1178279"
  },
  {
    "text": "throw throw great my app spring wood app",
    "start": "1178279",
    "end": "1187989"
  },
  {
    "text": "see secret so I forgot to actually and hear the",
    "start": "1187989",
    "end": "1196090"
  },
  {
    "text": "best word that the application used to connect to cadres and then here I can",
    "start": "1196090",
    "end": "1202480"
  },
  {
    "text": "actually come to security and user",
    "start": "1202480",
    "end": "1209830"
  },
  {
    "text": "interface what is the name that I use again so let's come back here secret so it's the",
    "start": "1209830",
    "end": "1224809"
  },
  {
    "text": "petition so Couchbase simple simple",
    "start": "1224809",
    "end": "1231380"
  },
  {
    "text": "cause it's simple it's simple it's simple don't do this at home and okay",
    "start": "1231380",
    "end": "1238669"
  },
  {
    "text": "yeah we should have you our our pod",
    "start": "1238669",
    "end": "1244520"
  },
  {
    "text": "should be light soon yeah that's it so it's runny now cool no we have our",
    "start": "1244520",
    "end": "1252260"
  },
  {
    "text": "application running and everything is ready let's first create a bucket here",
    "start": "1252260",
    "end": "1258530"
  },
  {
    "text": "so I have my bucket the bucket called test boom and we have bucket ready",
    "start": "1258530",
    "end": "1268900"
  },
  {
    "text": "however yeah the bucket just disappeared the reason why this happened is because",
    "start": "1268900",
    "end": "1275799"
  },
  {
    "text": "the operator make sure that the configuration that we had that the",
    "start": "1275799",
    "end": "1282340"
  },
  {
    "text": "configuration we have defined here is the same that you have in the database",
    "start": "1282340",
    "end": "1287929"
  },
  {
    "text": "so the operator make sure that okay what",
    "start": "1287929",
    "end": "1293030"
  },
  {
    "text": "we have here the yellow file is the single source of truth and if someone",
    "start": "1293030",
    "end": "1298700"
  },
  {
    "text": "change anything here in the database that is not configured here it will get",
    "start": "1298700",
    "end": "1304040"
  },
  {
    "text": "reverted right otherwise to you that doesn't make sense to have this kind of thing at all because you can really",
    "start": "1304040",
    "end": "1310580"
  },
  {
    "text": "trust that this is the configuration you have the database so of course you can disable this but by default this is an",
    "start": "1310580",
    "end": "1319040"
  },
  {
    "text": "able and if something if you change something here contract in the web console it gets",
    "start": "1319040",
    "end": "1326690"
  },
  {
    "text": "reverted by the operator unless you apply a new configuration so that's the",
    "start": "1326690",
    "end": "1333559"
  },
  {
    "text": "first thing let's go back to documents it's a little bit so you see that our",
    "start": "1333559",
    "end": "1341930"
  },
  {
    "text": "application is already inserting data and cockpit and if we come to buckets",
    "start": "1341930",
    "end": "1347330"
  },
  {
    "text": "and documents you can actually see that",
    "start": "1347330",
    "end": "1352720"
  },
  {
    "text": "documents book documents you can",
    "start": "1352720",
    "end": "1359660"
  },
  {
    "text": "actually see some of the documents are just like Randall Randall user okay now",
    "start": "1359660",
    "end": "1369350"
  },
  {
    "text": "let's make something super scary so let's come back here and say cout",
    "start": "1369350",
    "end": "1375559"
  },
  {
    "text": "control delete mimes app now click pod",
    "start": "1375559",
    "end": "1383980"
  },
  {
    "text": "see be example zero zero zero - okay so",
    "start": "1383980",
    "end": "1393500"
  },
  {
    "text": "what happened here is we just lost one of the nodes of our database this is the",
    "start": "1393500",
    "end": "1400580"
  },
  {
    "text": "word the DBA usually gets carried and he",
    "start": "1400580",
    "end": "1406880"
  },
  {
    "text": "essentially sees that sit down and try to understand locate how can I have recover the database in our case what we",
    "start": "1406880",
    "end": "1416030"
  },
  {
    "text": "have to do to recover from this so if we come here you see that okay cockpit notice that",
    "start": "1416030",
    "end": "1422450"
  },
  {
    "text": "okay this is the base is gone so what we have to recover from this well",
    "start": "1422450",
    "end": "1427700"
  },
  {
    "text": "essentially nothing that's the beauty of operators and communities so of course",
    "start": "1427700",
    "end": "1436630"
  },
  {
    "text": "communities view bring this pod back because we have defined that we want three here in the yellow fire we have",
    "start": "1436630",
    "end": "1444350"
  },
  {
    "text": "defined that we want three nodes and now we just have to you online so",
    "start": "1444350",
    "end": "1450920"
  },
  {
    "text": "communities by now actually if we run code control Airport",
    "start": "1450920",
    "end": "1457960"
  },
  {
    "text": "yeah we already have heared to be examples residual tree it's almost on line at some point Couchbase you",
    "start": "1458830",
    "end": "1466090"
  },
  {
    "text": "recognize here that there is yep we just this just happened here so now coach",
    "start": "1466090",
    "end": "1472720"
  },
  {
    "text": "please recognize that we have a new couch base node and the operator again",
    "start": "1472720",
    "end": "1480010"
  },
  {
    "text": "here is database our stateful right so when qu branch is brought the node back",
    "start": "1480010",
    "end": "1486870"
  },
  {
    "text": "the operator listen to the event that okay there is new cash base node and let",
    "start": "1486870",
    "end": "1493150"
  },
  {
    "text": "me and and then the operator called the API is inside Couchbase to join the CD",
    "start": "1493150",
    "end": "1500140"
  },
  {
    "text": "example 0:03 to this cluster that we have here and of course here we are",
    "start": "1500140",
    "end": "1507420"
  },
  {
    "text": "essentially talking about the worst case possible which is we are using a memory",
    "start": "1507420",
    "end": "1516640"
  },
  {
    "text": "storage so when use a node here you're losing the whole data that we had in it",
    "start": "1516640",
    "end": "1524520"
  },
  {
    "text": "and the so the operator as the operator",
    "start": "1524520",
    "end": "1530590"
  },
  {
    "text": "knows that this is we we lost the whole",
    "start": "1530590",
    "end": "1535990"
  },
  {
    "text": "dating just node in the notes you see me example 0 0 2 so the operator also calls",
    "start": "1535990",
    "end": "1543640"
  },
  {
    "text": "a method called rebounding which is this button here so it group copied data from",
    "start": "1543640",
    "end": "1552310"
  },
  {
    "text": "those two nodes here to this server here and it will evenly distribute the data",
    "start": "1552310",
    "end": "1557920"
  },
  {
    "text": "between the servers because when we add this new node here as it is essentially",
    "start": "1557920",
    "end": "1563050"
  },
  {
    "text": "without we add this node without any data and we need to distribute the load",
    "start": "1563050",
    "end": "1569680"
  },
  {
    "text": "between the those two nodes and this new one so that's exactly what rebalancing",
    "start": "1569680",
    "end": "1575080"
  },
  {
    "text": "is doing of course ribbon see here takes a while because it is optimized for",
    "start": "1575080",
    "end": "1582600"
  },
  {
    "text": "large large volume of data so it's not",
    "start": "1582600",
    "end": "1587650"
  },
  {
    "text": "something that losing a node is not something that should be happening every",
    "start": "1587650",
    "end": "1593050"
  },
  {
    "text": "hour and quite often when that happens you are probably copying a few dozens of",
    "start": "1593050",
    "end": "1602610"
  },
  {
    "text": "gigabytes so that's exactly what's happening here we optimize and we",
    "start": "1602610",
    "end": "1609580"
  },
  {
    "text": "started moving chart by shard and in",
    "start": "1609580",
    "end": "1615160"
  },
  {
    "text": "this sorry so we start moving shy by",
    "start": "1615160",
    "end": "1620830"
  },
  {
    "text": "shard from one from those nodes here to this new one that's what you you're",
    "start": "1620830",
    "end": "1625900"
  },
  {
    "text": "seeing in this graph and the top of the page so essentially we are moving each",
    "start": "1625900",
    "end": "1632170"
  },
  {
    "text": "shard and of course one of the reasons we take we are very careful where the",
    "start": "1632170",
    "end": "1639340"
  },
  {
    "text": "rebalancing is when you lose when you have like let's say three nodes in this",
    "start": "1639340",
    "end": "1646360"
  },
  {
    "text": "skate and lose one well the other two will be will be responsible for we have",
    "start": "1646360",
    "end": "1657370"
  },
  {
    "text": "to distribute did a little between those two node there are two there right so we",
    "start": "1657370",
    "end": "1664000"
  },
  {
    "text": "are very careful to not like copy the data from those two nodes this new one as fast as possible because you are",
    "start": "1664000",
    "end": "1672040"
  },
  {
    "text": "already had downgrading performance here because you had three nodes and now you don't have two that are available and we",
    "start": "1672040",
    "end": "1679000"
  },
  {
    "text": "make sure that okay when we add a new node and we start doing balanced data we have some clear limits on how fast can",
    "start": "1679000",
    "end": "1686950"
  },
  {
    "text": "we come data from those two nodes to this new one to make sure that this will",
    "start": "1686950",
    "end": "1692200"
  },
  {
    "text": "not make everything worse so that's why it takes a while and of course whenever",
    "start": "1692200",
    "end": "1702130"
  },
  {
    "text": "we finish to copy one bucket we send a",
    "start": "1702130",
    "end": "1707650"
  },
  {
    "text": "notification to the SDKs to update their the cluster Maps so it is a truly",
    "start": "1707650",
    "end": "1713860"
  },
  {
    "text": "distributed system happening here and the good thing is we are essentially with covering for our failure without",
    "start": "1713860",
    "end": "1721150"
  },
  {
    "text": "any manual interpreter so another good thing here in cockpits",
    "start": "1721150",
    "end": "1727340"
  },
  {
    "text": "is actually the operator can do a quite a lot of stuff so for instance if you",
    "start": "1727340",
    "end": "1732440"
  },
  {
    "text": "want to operate from calculate six to cut be six or five for instance I have",
    "start": "1732440",
    "end": "1738080"
  },
  {
    "text": "to do here is actually come here to the cursor to the serf definition and say I",
    "start": "1738080",
    "end": "1744169"
  },
  {
    "text": "won't Couchbase see those five now and then I can actually just come back here",
    "start": "1744169",
    "end": "1749330"
  },
  {
    "text": "and say cook control create replace",
    "start": "1749330",
    "end": "1755169"
  },
  {
    "text": "mines app and copy paste cluster I'm not gonna run this because I wanted you to",
    "start": "1755169",
    "end": "1760820"
  },
  {
    "text": "show this whole process finishing but when I run this it will essentially",
    "start": "1760820",
    "end": "1766309"
  },
  {
    "text": "automatically copy upgrade the database for me and again the operator knows how to",
    "start": "1766309",
    "end": "1772640"
  },
  {
    "text": "approve a database if something fails in the middle of it it will roll back to the previous version that you you were",
    "start": "1772640",
    "end": "1780790"
  },
  {
    "text": "so yes the operator can do this kind of thing so other things that we can also",
    "start": "1780790",
    "end": "1786770"
  },
  {
    "text": "do here is if I want to let's say I want to scale up my application I can do",
    "start": "1786770",
    "end": "1793580"
  },
  {
    "text": "something like this so instead of having three nodes I want to have tour now and in this case yes I can come back here",
    "start": "1793580",
    "end": "1801020"
  },
  {
    "text": "and say control create mines app Couchbase I mean replace in this case",
    "start": "1801020",
    "end": "1809919"
  },
  {
    "text": "replace my stack Couchbase cluster and",
    "start": "1809919",
    "end": "1816940"
  },
  {
    "text": "let's wait oh yeah that's that's that's",
    "start": "1817660",
    "end": "1826280"
  },
  {
    "text": "one of the reasons why we need the",
    "start": "1826280",
    "end": "1831820"
  },
  {
    "text": "admission controller because it just noticed that okay this is not about the cut base version so let's save here and",
    "start": "1833380",
    "end": "1841220"
  },
  {
    "text": "say okay now I have or and rokosz base",
    "start": "1841220",
    "end": "1846940"
  },
  {
    "text": "replace now we are good so now we are scaling up our database here we already",
    "start": "1846940",
    "end": "1855380"
  },
  {
    "text": "finished the the rebalancing and now at some point the CB example 0:04 particularly should",
    "start": "1855380",
    "end": "1864250"
  },
  {
    "text": "appear here and again the operator will make sure to rebound again the data to",
    "start": "1864250",
    "end": "1870340"
  },
  {
    "text": "be sure that this we just remove some of the shards in those three servers to the",
    "start": "1870340",
    "end": "1877000"
  },
  {
    "text": "new one okay so another coating copies",
    "start": "1877000",
    "end": "1882670"
  },
  {
    "text": "let's see here so throw get pots we",
    "start": "1882670",
    "end": "1888070"
  },
  {
    "text": "should see CB examples yeah here's to see mix em there's a little for yeah",
    "start": "1888070",
    "end": "1893140"
  },
  {
    "text": "it's right here on the on the server so",
    "start": "1893140",
    "end": "1898510"
  },
  {
    "text": "I don't think that is cool with cockpits here in this case is that I can",
    "start": "1898510",
    "end": "1904110"
  },
  {
    "text": "essentially I can boost that the adjust application according to you what and",
    "start": "1904110",
    "end": "1911140"
  },
  {
    "text": "mean so let's same application reads more than right so if I make sure it's",
    "start": "1911140",
    "end": "1917170"
  },
  {
    "text": "more than right what I could do is something like okay I want four nodes of data and then I know maybe ten those",
    "start": "1917170",
    "end": "1926290"
  },
  {
    "text": "running index and query and maybe I don't even need search but okay let's keep searching here or if it is the",
    "start": "1926290",
    "end": "1933940"
  },
  {
    "text": "opposite side so my application writes much more data than read so I could have like two nodes here and I know maybe ten",
    "start": "1933940",
    "end": "1942520"
  },
  {
    "text": "out here and if I do this right now the operator knows exactly how to",
    "start": "1942520",
    "end": "1948040"
  },
  {
    "text": "migrate for my current architecture to this one and yes I could define how I",
    "start": "1948040",
    "end": "1955030"
  },
  {
    "text": "want what's the configuration of a default like memories view and on stuff and here I could also adjust the the",
    "start": "1955030",
    "end": "1965290"
  },
  {
    "text": "hardware of this padieu Hardware comments of this pod according to the",
    "start": "1965290",
    "end": "1971020"
  },
  {
    "text": "the service right so data needs more I ops index needs more memory a query",
    "start": "1971020",
    "end": "1980200"
  },
  {
    "text": "needs more spew so you can adjust the hardware as well according to the service you are running cool let's go",
    "start": "1980200",
    "end": "1988570"
  },
  {
    "text": "back yeah so here same thing see here so let's go back to our slides",
    "start": "1988570",
    "end": "1996949"
  },
  {
    "text": "okay of course we need to talk a little bit about databases and servers databases on",
    "start": "1998419",
    "end": "2007519"
  },
  {
    "text": "communities so countries also offer database as a service essentially our",
    "start": "2007519",
    "end": "2015729"
  },
  {
    "text": "which is called cafes Club for instance and essentially the card based cloud is",
    "start": "2015729",
    "end": "2022690"
  },
  {
    "text": "assumed they operate or operators and communities running on the club with",
    "start": "2022690",
    "end": "2028399"
  },
  {
    "text": "some extra features and that is essentially how it's also worked with",
    "start": "2028399",
    "end": "2033739"
  },
  {
    "text": "other cloud providers or they pretty much have been using kubernetes for they",
    "start": "2033739",
    "end": "2039319"
  },
  {
    "text": "like their cloud offer and yeah the cool thing about the database of service in",
    "start": "2039319",
    "end": "2045799"
  },
  {
    "text": "general is it's usually easy so it's very easy to start you have some cloud",
    "start": "2045799",
    "end": "2053720"
  },
  {
    "text": "providers you have very long tissue and sometimes you even have a free tier so",
    "start": "2053720",
    "end": "2062658"
  },
  {
    "text": "you don't even need to pay anything for it in the visitor service but quite",
    "start": "2062659",
    "end": "2069349"
  },
  {
    "text": "often you kind of firm it likes a little",
    "start": "2069349",
    "end": "2074868"
  },
  {
    "text": "bit of flexibility essentially because",
    "start": "2074869",
    "end": "2080528"
  },
  {
    "text": "in order to bring the cost down they have a shared architecture I think a",
    "start": "2081279",
    "end": "2090259"
  },
  {
    "text": "Couchbase cloud now is is private servers with private clusters so in",
    "start": "2090259",
    "end": "2097190"
  },
  {
    "text": "nothing is shared but most of the databases have solutions they they try to share servers to bring the cost down",
    "start": "2097190",
    "end": "2106180"
  },
  {
    "text": "so the best in general is really good when you have like small applications",
    "start": "2106180",
    "end": "2111200"
  },
  {
    "text": "otherwise it gets very pricey and database and communities I I",
    "start": "2111200",
    "end": "2118660"
  },
  {
    "text": "would say that it is I would I would dare to say that it will",
    "start": "2118660",
    "end": "2124660"
  },
  {
    "text": "be the potentially will be the default choice in the future essentially because",
    "start": "2124660",
    "end": "2129970"
  },
  {
    "text": "you can have a fully managed database on your on your own data center or on your",
    "start": "2129970",
    "end": "2139690"
  },
  {
    "text": "own infrastructure with the same with the same flexibility at least you have on burn metal so in the in this case",
    "start": "2139690",
    "end": "2146680"
  },
  {
    "text": "here you can see what just a hardware according to the service you are running but yes it does we nowadays it does",
    "start": "2146680",
    "end": "2155560"
  },
  {
    "text": "require some little bit of knowledge of communities itself so if we're already",
    "start": "2155560",
    "end": "2160570"
  },
  {
    "text": "done running communities if you already know quite well that me might be already",
    "start": "2160570",
    "end": "2166060"
  },
  {
    "text": "a good choice for you yeah here since",
    "start": "2166060",
    "end": "2171180"
  },
  {
    "text": "last month we have now cockpits club which is our operator running on our on",
    "start": "2171180",
    "end": "2180160"
  },
  {
    "text": "a double eye on all the cloud providers with some extra features and as we are",
    "start": "2180160",
    "end": "2187480"
  },
  {
    "text": "talking about databases we also have to talk a little bit about storage in general so in our case here in your demo",
    "start": "2187480",
    "end": "2196420"
  },
  {
    "text": "we have been using a ephemeral storage but in most databases CAD base included",
    "start": "2196420",
    "end": "2203830"
  },
  {
    "text": "also support remote remote persistent storage and local persistent storage",
    "start": "2203830",
    "end": "2211620"
  },
  {
    "text": "local persistent storage actually is GAE from since Cuban his 1.14 so not that",
    "start": "2211620",
    "end": "2221550"
  },
  {
    "text": "it's just it was lunch essentially GA left here so it still something get that",
    "start": "2221550",
    "end": "2228070"
  },
  {
    "text": "if it is still something getting more popular now but it's important to say",
    "start": "2228070",
    "end": "2234010"
  },
  {
    "text": "that local persistent storage is not a general-purpose storage essentially",
    "start": "2234010",
    "end": "2240700"
  },
  {
    "text": "because first you are with local persistent storage",
    "start": "2240700",
    "end": "2246550"
  },
  {
    "text": "whenever the pod fails if the thought dies for some reason will local persistent storage the",
    "start": "2246550",
    "end": "2252340"
  },
  {
    "text": "scatterer in Cabrini's will try to schedule the same pod in the to run the",
    "start": "2252340",
    "end": "2257770"
  },
  {
    "text": "same note again in the same worker and it cannon you are essentially attaching",
    "start": "2257770",
    "end": "2264250"
  },
  {
    "text": "the the pod to a node which might not be the best approach in communities ideally",
    "start": "2264250",
    "end": "2272170"
  },
  {
    "text": "we should not even know where things are running but in this case because we really databases are very disk intensive",
    "start": "2272170",
    "end": "2281320"
  },
  {
    "text": "applications well that may really make sense so for poor databases it's okay to",
    "start": "2281320",
    "end": "2287700"
  },
  {
    "text": "run local persistent storage because you have nearly the same the same",
    "start": "2287700",
    "end": "2293820"
  },
  {
    "text": "performance that you get on on",
    "start": "2293820",
    "end": "2299580"
  },
  {
    "text": "traditional disks on bare metal of course",
    "start": "2299580",
    "end": "2304630"
  },
  {
    "text": "look up persistent storage because the disk is not is not a storage is it's just a direct access to the disk you",
    "start": "2304630",
    "end": "2313120"
  },
  {
    "text": "have lower availability because at some point this disk will might fail the data",
    "start": "2313120",
    "end": "2318580"
  },
  {
    "text": "is not replicated and at least to this",
    "start": "2318580",
    "end": "2323710"
  },
  {
    "text": "point it local persistent storage is to require some some node or disk",
    "start": "2323710",
    "end": "2329980"
  },
  {
    "text": "preparation but in general it's okay for",
    "start": "2329980",
    "end": "2336330"
  },
  {
    "text": "to run databases on on local personal",
    "start": "2336330",
    "end": "2341770"
  },
  {
    "text": "story because pretty much all the bases have some sort of replicas of the data",
    "start": "2341770",
    "end": "2347140"
  },
  {
    "text": "and if the disk fails you can use to have the director somewhere else so it's",
    "start": "2347140",
    "end": "2354040"
  },
  {
    "text": "not a big issue out this is just an example so host paths is kind of a heck",
    "start": "2354040",
    "end": "2363130"
  },
  {
    "text": "of how we did local persistent storage in the best and now essentially",
    "start": "2363130",
    "end": "2368680"
  },
  {
    "text": "everything she you should not use host paths anymore pretty much everything should be moved",
    "start": "2368680",
    "end": "2374110"
  },
  {
    "text": "to local persistent storage local persistent storage used",
    "start": "2374110",
    "end": "2380440"
  },
  {
    "text": "same framework that is the same the same",
    "start": "2380440",
    "end": "2386050"
  },
  {
    "text": "approach that remote pieces in storage so you still have the portability",
    "start": "2386050",
    "end": "2391450"
  },
  {
    "text": "discuss accountability stateful sets other sort of things and of course I",
    "start": "2391450",
    "end": "2398230"
  },
  {
    "text": "think we should also talk a little bit about benchmarking so when we talk about",
    "start": "2398230",
    "end": "2405609"
  },
  {
    "text": "running databases on on containers we need to think about okay what's the side",
    "start": "2405609",
    "end": "2413410"
  },
  {
    "text": "effect of low do I have any performance issues and essentially we tested that",
    "start": "2413410",
    "end": "2421000"
  },
  {
    "text": "and there is deserve a yahoo service serving benchmark that you saw on the previous slide and yeah we do",
    "start": "2421000",
    "end": "2430180"
  },
  {
    "text": "we saw some some some changes in performance that really depends on which",
    "start": "2430180",
    "end": "2435220"
  },
  {
    "text": "kind of workload you are doing so in Couchbase because we have a lot of",
    "start": "2435220",
    "end": "2441390"
  },
  {
    "text": "caching if you are using like workload a for instance so 50% reads per person writes",
    "start": "2441390",
    "end": "2448980"
  },
  {
    "text": "we saw no difference at all between container containers in bare metal while",
    "start": "2448980",
    "end": "2455770"
  },
  {
    "text": "in workload e where you have like a short range of records we saw a",
    "start": "2455770",
    "end": "2463630"
  },
  {
    "text": "performance penalty of up to 10% so next slide essentially show you here so here",
    "start": "2463630",
    "end": "2471400"
  },
  {
    "text": "is performance of less than 1% here doesn't make any difference here on",
    "start": "2471400",
    "end": "2478270"
  },
  {
    "text": "workload a in fact the container one even had some better performance but",
    "start": "2478270",
    "end": "2486280"
  },
  {
    "text": "here you see the workload a in the divorced use case we have a delta of",
    "start": "2486280",
    "end": "2493599"
  },
  {
    "text": "almost 10% so this is the the benchmark that we did so I suppose that this",
    "start": "2493599",
    "end": "2502329"
  },
  {
    "text": "should be the same for other databases as well so whenever you are running to",
    "start": "2502329",
    "end": "2509470"
  },
  {
    "text": "the based on Cabrini keys make sure to where to add some extra CPU possible or memory to you to to",
    "start": "2509470",
    "end": "2520030"
  },
  {
    "text": "address this performance or great in our case worst case if you have a lot of",
    "start": "2520030",
    "end": "2528400"
  },
  {
    "text": "servers make sure to add an extra node",
    "start": "2528400",
    "end": "2533530"
  },
  {
    "text": "just to compensate for potential performance penalties okay last thing",
    "start": "2533530",
    "end": "2539800"
  },
  {
    "text": "here is operators now is already a big beating in communities there is this",
    "start": "2539800",
    "end": "2545680"
  },
  {
    "text": "website here called the operator hub were essentially the folks from Red Hat",
    "start": "2545680",
    "end": "2555030"
  },
  {
    "text": "store kind of critic italic of all the operators out there so you guys",
    "start": "2555030",
    "end": "2561820"
  },
  {
    "text": "definitely should check it out and well there is array and of course there is",
    "start": "2561820",
    "end": "2568980"
  },
  {
    "text": "operator for other databases as well there are some some cool talks on the",
    "start": "2568980",
    "end": "2575350"
  },
  {
    "text": "previous cube comes talking about how how they have built operator for my Seco",
    "start": "2575350",
    "end": "2582580"
  },
  {
    "text": "and for post Chris so I definitely recommend you guys to check it out and well I really",
    "start": "2582580",
    "end": "2591760"
  },
  {
    "text": "appreciate if you made to the end of the video and thank you if you have any questions",
    "start": "2591760",
    "end": "2597850"
  },
  {
    "text": "feel free to ping me on Twitter I will for sure I will come back to you with",
    "start": "2597850",
    "end": "2604420"
  },
  {
    "text": "the answers and yeah I hope you like it so see you next time",
    "start": "2604420",
    "end": "2610710"
  }
]