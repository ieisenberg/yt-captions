[
  {
    "start": "0",
    "end": "146000"
  },
  {
    "text": "[Music]",
    "start": "6990",
    "end": "10108"
  },
  {
    "text": "uh good afternoon everybody uh thanks for having me uh my talk today is a walk",
    "start": "12200",
    "end": "18279"
  },
  {
    "text": "through of a production incident that occurred uh and some of the things that we learned from that production incident",
    "start": "18279",
    "end": "25720"
  },
  {
    "text": "both around like managing complex systems managing microservice based systems and distributed systems just a",
    "start": "25720",
    "end": "31800"
  },
  {
    "text": "quick show of hands uh I'm sorry probably talks have already done this how many of us identify more on the",
    "start": "31800",
    "end": "37440"
  },
  {
    "text": "developer side of the spectrum okay wow that's different than what I'm used to operation side of the",
    "start": "37440",
    "end": "42960"
  },
  {
    "text": "spectrum all right how many people are managing are in a microservices",
    "start": "42960",
    "end": "48719"
  },
  {
    "text": "environment Okay cool so I'm sorry if I trigger anyone um you know there might",
    "start": "48719",
    "end": "54960"
  },
  {
    "text": "be some weeping like Bridget said but don't worry we'll get through it together uh these are inspired by true",
    "start": "54960",
    "end": "61160"
  },
  {
    "text": "events this is not fanfiction unfortunately uh we've changed the names and the locations to protect the",
    "start": "61160",
    "end": "67000"
  },
  {
    "text": "innocent uh but uh know that this is not an academic exercise this is something that actually occurred so uh a lot of",
    "start": "67000",
    "end": "74000"
  },
  {
    "text": "things that we're going to be talking about are are going to be uh unar unartistic real in terms of uh what you",
    "start": "74000",
    "end": "81040"
  },
  {
    "text": "guys are accustomed to seeing in your environments so what are we going to talk about first I'll give you a brief introduction about myself where I come",
    "start": "81040",
    "end": "86400"
  },
  {
    "text": "from what my background is like walk through the anatomy of a system walk through an actual incident we'll go",
    "start": "86400",
    "end": "92280"
  },
  {
    "text": "through all the alerts the things that we learned about those alerts and the decisions that we made and then ultimately what we learned from our",
    "start": "92280",
    "end": "98439"
  },
  {
    "text": "postmortem process after the alert and uh after the incident and get an idea of",
    "start": "98439",
    "end": "104200"
  },
  {
    "text": "just how bad things actually were so quick introduction my name is Jeff Smith I'm the manager of production",
    "start": "104200",
    "end": "109719"
  },
  {
    "text": "operations at Centro I've been there for about six months Centro is a media ad services company uh we're also working",
    "start": "109719",
    "end": "116240"
  },
  {
    "text": "on a uh software as a service solution for uh media ad buyers so if you're in",
    "start": "116240",
    "end": "122360"
  },
  {
    "text": "that space and you want to talk you know find me after the after the uh chat you can find me on Twitter dark and nerdy",
    "start": "122360",
    "end": "128879"
  },
  {
    "text": "Jeff Smith at central.net I love talking about systems and systems thinking so if",
    "start": "128879",
    "end": "134200"
  },
  {
    "text": "that's something that you're interested in please feel free to grab me I also have a Blog that I never update at all things dark.com feel free to uh check",
    "start": "134200",
    "end": "141599"
  },
  {
    "text": "that out bunch of stuff from yester year so first I wanted to talk about the",
    "start": "141599",
    "end": "148680"
  },
  {
    "start": "146000",
    "end": "219000"
  },
  {
    "text": "anatomy of a system right and what are we talking about when we use this term system we tend to think of things like",
    "start": "148680",
    "end": "156200"
  },
  {
    "text": "the web server the database the redis Q uh all of these components and elements",
    "start": "156200",
    "end": "162040"
  },
  {
    "text": "of a system and those are all perfectly valid those are parts of the system but the things that we tend to forget about",
    "start": "162040",
    "end": "167440"
  },
  {
    "text": "and not really talk about or focus on are the inputs to the system right because we have to have data coming in",
    "start": "167440",
    "end": "173640"
  },
  {
    "text": "request coming in outputs to the system maybe that feeds another system and kicks off a bunch of work",
    "start": "173640",
    "end": "180519"
  },
  {
    "text": "the feedback luk in that system how are we providing information about the state of the system inside it and most",
    "start": "180519",
    "end": "186280"
  },
  {
    "text": "importantly and this is you know near and dear to my heart The Operators of that system because there are people",
    "start": "186280",
    "end": "191480"
  },
  {
    "text": "behind this that are actually managing these systems and they need to understand what's going on in the system",
    "start": "191480",
    "end": "197040"
  },
  {
    "text": "how they can what levers they have to sort of uh correct the system when it gets into a bad State and often times",
    "start": "197040",
    "end": "202879"
  },
  {
    "text": "when we're building these things the operator is the last piece of the puzzle that we forget about but it's super",
    "start": "202879",
    "end": "208200"
  },
  {
    "text": "crucial because when trouble strikes the operator is going to be the person that's modifying the system in order to",
    "start": "208200",
    "end": "214879"
  },
  {
    "text": "get it or correct it into a more desired state so let's go with a sort of",
    "start": "214879",
    "end": "220560"
  },
  {
    "start": "219000",
    "end": "297000"
  },
  {
    "text": "clinical definition what is a system a set of connected things or parts forming a complex whole right that's a pretty",
    "start": "220560",
    "end": "227000"
  },
  {
    "text": "straightforward example um but I think the thing that gets interesting is that uh systems are also comprised of other",
    "start": "227000",
    "end": "232319"
  },
  {
    "text": "systems right so a subsystem is a set of elements which is a system in itself and",
    "start": "232319",
    "end": "237959"
  },
  {
    "text": "a component of a larger system it's Turtles all the way down right like",
    "start": "237959",
    "end": "243120"
  },
  {
    "text": "the more you uh start to peel apart the onion the more you realize just how complex these things are so uh we'll",
    "start": "243120",
    "end": "250879"
  },
  {
    "text": "start with a highle system diagram right so when you look at this it probably doesn't look too different than what",
    "start": "250879",
    "end": "256680"
  },
  {
    "text": "you're running in your environment right we got a uh users coming in from the internet they're hitting an elastic load balancer that balances across some web",
    "start": "256680",
    "end": "263400"
  },
  {
    "text": "servers we might have elasticache in there um we're reading from a master database or writing to a Master database",
    "start": "263400",
    "end": "269400"
  },
  {
    "text": "reading from from a slave database publishing some message cues some messages on a queue we've got worker",
    "start": "269400",
    "end": "275000"
  },
  {
    "text": "nodes processing that queue pretty familiar right it's like well if we're being honest this is probably the ideal",
    "start": "275000",
    "end": "281000"
  },
  {
    "text": "system in a real system you probably got like mongodb somewhere over there some failed node js experiment that no one",
    "start": "281000",
    "end": "287039"
  },
  {
    "text": "really knows if you can actually unplug uh you know so we're going to live in this Utopia for a second and say like",
    "start": "287039",
    "end": "293479"
  },
  {
    "text": "yeah this is what a normal system would look like so systems also have failure",
    "start": "293479",
    "end": "300400"
  },
  {
    "start": "297000",
    "end": "417000"
  },
  {
    "text": "modes and a failure mode is basically uh the particular way in which a system uh degrades or ultimately fails to perform",
    "start": "300400",
    "end": "307720"
  },
  {
    "text": "as intended and the interesting about failure modes is the number of failure modes tends to grow as the system has",
    "start": "307720",
    "end": "314120"
  },
  {
    "text": "more components and becomes more complex so for example let's take our same happy system",
    "start": "314120",
    "end": "321600"
  },
  {
    "text": "right and then suddenly we say the worker nodes die that's going to create a particular",
    "start": "321600",
    "end": "327080"
  },
  {
    "text": "failure scenario that is different than if another component failed right in this particular scenario might be",
    "start": "327080",
    "end": "333000"
  },
  {
    "text": "something as simple as email processing isn't happening or it could be something",
    "start": "333000",
    "end": "338840"
  },
  {
    "text": "uh catastrophic where work isn't flowing through the system if the read database fails that's",
    "start": "338840",
    "end": "345840"
  },
  {
    "text": "a different failure scenario each subsystem that fails can produce an entirely different type of",
    "start": "345840",
    "end": "351680"
  },
  {
    "text": "failure and then if we have both of them fail well that's yet another failure mode the thing to take away from this is",
    "start": "351680",
    "end": "359680"
  },
  {
    "text": "it becomes incredibly difficult to predict how a system is going to fail as it grows and becomes more complex so you",
    "start": "359680",
    "end": "366520"
  },
  {
    "text": "might be in test and think you have all of these scenarios figured out then you get the production and you're like huh",
    "start": "366520",
    "end": "372360"
  },
  {
    "text": "we we didn't see that in testing that's weird right how has anyone encountered that no you're all Geniuses yeah that's",
    "start": "372360",
    "end": "377919"
  },
  {
    "text": "what I thought that's what I thought don't let lunch get in the way here like put your hands up you know you're part",
    "start": "377919",
    "end": "383039"
  },
  {
    "text": "of this then to make it even more",
    "start": "383039",
    "end": "388120"
  },
  {
    "text": "complicated each one of these systems is a subsystem like we talked about right so while we've got this nice little cute",
    "start": "388120",
    "end": "394400"
  },
  {
    "text": "high level node that we can show to management and say these are web servers in reality we know that underneath that",
    "start": "394400",
    "end": "399639"
  },
  {
    "text": "is another layer of complexity that we barely understand right so when you're thinking about that",
    "start": "399639",
    "end": "406440"
  },
  {
    "text": "you have to think about how you view the system and at what level of the system you're actually viewing it you need to",
    "start": "406440",
    "end": "412319"
  },
  {
    "text": "be able to zoom in and out at different levels so now we'll do a quick walk",
    "start": "412319",
    "end": "419360"
  },
  {
    "start": "417000",
    "end": "520000"
  },
  {
    "text": "through of failure how many how many have been involved in a major production incident showah",
    "start": "419360",
    "end": "425520"
  },
  {
    "text": "hands how many people have been absolutely thrilled and happy with how those incidents actually play",
    "start": "425520",
    "end": "430840"
  },
  {
    "text": "out I want to talk to you after that's awesome that's cool yeah uh typically",
    "start": "430840",
    "end": "436759"
  },
  {
    "text": "when I do it it's uh it's kind of like a system it's a bit of a show uh different variety every time right",
    "start": "436759",
    "end": "443120"
  },
  {
    "text": "something else break down so there's always a chance to learn and sort of like uh evaluate what it is that you did",
    "start": "443120",
    "end": "448440"
  },
  {
    "text": "right what it is you did wrong wrong and what it is that you're never going to do again um so uh we're going to look at",
    "start": "448440",
    "end": "455599"
  },
  {
    "text": "this particular situation so this is our troubled system again the names have been changed to protect the innocent um",
    "start": "455599",
    "end": "462879"
  },
  {
    "text": "I'll walk you through real quickly how the system operates so we've got users that are coming in and they're making an execution request right we've got a set",
    "start": "462879",
    "end": "469960"
  },
  {
    "text": "of nodes at the AWS layer uh at the top of the AWS layer that are going to take those requests",
    "start": "469960",
    "end": "477199"
  },
  {
    "text": "publish them on a message CU for processing see this is going to look like a real system because you're going to be like",
    "start": "477199",
    "end": "482400"
  },
  {
    "text": "why are you doing this then we have another set of nodes",
    "start": "482400",
    "end": "487599"
  },
  {
    "text": "that reads those messages and what you think process them right no it's going to ask another system to process those",
    "start": "487599",
    "end": "494000"
  },
  {
    "text": "messages for us in a remote data center our actual Legacy data",
    "start": "494000",
    "end": "499479"
  },
  {
    "text": "center once those requests are made in the Legacy data center they are put on yet another message bus in which the",
    "start": "499479",
    "end": "506120"
  },
  {
    "text": "actual work gets done um so it functions a little bit like government where there's a lot of handoffs and not a lot",
    "start": "506120",
    "end": "511400"
  },
  {
    "text": "of getting done but eventually it makes its way down to a worker and we actually do some magical",
    "start": "511400",
    "end": "519240"
  },
  {
    "text": "things so the first sign of alert that the first sign of trouble that we got during this incident was that execution",
    "start": "519519",
    "end": "526680"
  },
  {
    "start": "520000",
    "end": "712000"
  },
  {
    "text": "requests are taking longer than a predefined threshold so that alert was helpful on a",
    "start": "526680",
    "end": "534279"
  },
  {
    "text": "few levels and not helpful on a few others right the the first pro is that yay we know the business business impact",
    "start": "534279",
    "end": "540600"
  },
  {
    "text": "because we're we all care about the business impact right right come on guys",
    "start": "540600",
    "end": "545880"
  },
  {
    "text": "yeah business impact is fine load average doesn't mean if people aren't getting their orders",
    "start": "545880",
    "end": "552079"
  },
  {
    "text": "processed so we understand the business impact right away but the problem is we",
    "start": "552079",
    "end": "557600"
  },
  {
    "text": "don't really know where the problem is we know that the message processes are moving slowly but at what layer of the",
    "start": "557600",
    "end": "563000"
  },
  {
    "text": "system at what portion so it's great for your boss to come in it's like what's going on stuff is broke dog it's just",
    "start": "563000",
    "end": "570600"
  },
  {
    "text": "broke like all right well what's broke well messages aren't getting process",
    "start": "570600",
    "end": "576920"
  },
  {
    "text": "it's not really helpful so then the next alert we got was this Q alert telling us that the Q",
    "start": "576920",
    "end": "584560"
  },
  {
    "text": "and AWS was backed up there were a lot of messages above some other",
    "start": "584560",
    "end": "589839"
  },
  {
    "text": "predetermined generic threshold so now we're thinking to ourselves oh we can't process work fast",
    "start": "589839",
    "end": "596640"
  },
  {
    "text": "enough we need more workers part of that is because our alerts lack",
    "start": "596640",
    "end": "602000"
  },
  {
    "text": "context and we'll get into that a little bit later but you know when you've got an alert saying the message CU is high",
    "start": "602000",
    "end": "608440"
  },
  {
    "text": "is it because volume is increased is it because you're processing slower than you typically are what are the age of",
    "start": "608440",
    "end": "614519"
  },
  {
    "text": "the messages there's all these questions that you have that you know when you were in staging seemed fine and",
    "start": "614519",
    "end": "619880"
  },
  {
    "text": "perfectly reasonable oh see the queue is empty that's good Q is high that's bad that's enough information right",
    "start": "619880",
    "end": "627200"
  },
  {
    "text": "nope the next alert we got was a connection alert on the messaging",
    "start": "627200",
    "end": "633079"
  },
  {
    "text": "service in the data center so now as we're about to scale out the worker nodes this alert fires and we",
    "start": "633079",
    "end": "640800"
  },
  {
    "text": "go huh the first question is like who wrote that",
    "start": "640800",
    "end": "646200"
  },
  {
    "text": "alert right like that's that's pretty cool I didn't even know we had that thing that's that's that's that's good",
    "start": "646200",
    "end": "652000"
  },
  {
    "text": "information so we guess St down of the box and we're like all right well what's going on why is this happening so when",
    "start": "652000",
    "end": "657880"
  },
  {
    "text": "we looked at the Box we noticed that there were a lot of connections in this closed weight State",
    "start": "657880",
    "end": "665120"
  },
  {
    "text": "on the message server uh how many people remember there a TCP uh flow control there yeah see In",
    "start": "665120",
    "end": "672360"
  },
  {
    "text": "the Heat of the Moment we didn't right so we're like close weight that's when it's waiting for no no no that's not when it's waiting that's when it's",
    "start": "672360",
    "end": "678240"
  },
  {
    "text": "trying to do the other thing that so all right just go to Wikipedia let's verify this get it all out on the",
    "start": "678240",
    "end": "684399"
  },
  {
    "text": "table right so if you're like me maybe you're thinking like well maybe I could",
    "start": "684399",
    "end": "689920"
  },
  {
    "text": "use a refresher so basically uh the client has initiated the close and said",
    "start": "689920",
    "end": "695279"
  },
  {
    "text": "yeah we're done we're good and the server gets that and says all right I'm going to call clothes on my socket",
    "start": "695279",
    "end": "700639"
  },
  {
    "text": "that'll send out the fin packet the ACT packet life is good right so when we see all these Connections in a fail in a close weight State we're going hm why",
    "start": "700639",
    "end": "708120"
  },
  {
    "text": "isn't the server closing these connections seems odd so as we started looking at it we're",
    "start": "708120",
    "end": "715240"
  },
  {
    "start": "712000",
    "end": "831000"
  },
  {
    "text": "noticing the Clos weights are rising and rising and Rising memory usage is rising Rising and rising",
    "start": "715240",
    "end": "723279"
  },
  {
    "text": "and it's getting to the point where we're starting to freak out we're like H this thing is either going to go down because we do it or because these",
    "start": "723279",
    "end": "730160"
  },
  {
    "text": "connections do it so what are we going to do let let's hop for shutting it down ourselves right because I mean how bad",
    "start": "730160",
    "end": "736880"
  },
  {
    "text": "could that possibly be right let's let's just shut it down let's see what happens right let's do a",
    "start": "736880",
    "end": "742920"
  },
  {
    "text": "thing all right so we'll shut it down yeah that happened so these herds",
    "start": "742920",
    "end": "750399"
  },
  {
    "text": "of connections come in after we get the service back up right and it just murders the messaging server right so",
    "start": "750399",
    "end": "756040"
  },
  {
    "text": "we're like all right messaging server is up oh nope sorry that's it's not up I'm going to do that one more time guys I'm",
    "start": "756040",
    "end": "761160"
  },
  {
    "text": "just going to restart all right we're back nope nope we're still down like okay now",
    "start": "761160",
    "end": "767880"
  },
  {
    "text": "everything's broken what did we do so then of course what do you do in that scenario right",
    "start": "767880",
    "end": "773720"
  },
  {
    "text": "you say all right well let's shut down everything that's connecting to it right and Meanwhile your boss is like really",
    "start": "773720",
    "end": "779199"
  },
  {
    "text": "really so now we're going to shut down everything like or we wait till midnight when demand dies down I don't",
    "start": "779199",
    "end": "785920"
  },
  {
    "text": "know you pick so we shut down all of the uh consumers and producers we bring up the messaging server then we slowly ramp",
    "start": "785920",
    "end": "792959"
  },
  {
    "text": "up the consumers and producers of course your boss is like well how much more time like I I I don't I don't we're",
    "start": "792959",
    "end": "799880"
  },
  {
    "text": "five five five what yes five well just back",
    "start": "799880",
    "end": "805839"
  },
  {
    "text": "off for a second so after an undetermined uh undisclosed amount of time we've got the",
    "start": "805839",
    "end": "812720"
  },
  {
    "text": "system back up yay so then what's the first thing you think to yourself because guess what the problem is still",
    "start": "812720",
    "end": "818240"
  },
  {
    "text": "here now we're just up and we're like sweet now we've got another 30 minutes before it crashes on a tone so um what's",
    "start": "818240",
    "end": "825480"
  },
  {
    "text": "the first thing you do in that scenario you're troubleshooting anybody anybody what",
    "start": "825480",
    "end": "832040"
  },
  {
    "start": "831000",
    "end": "935000"
  },
  {
    "text": "changed right some obscene stat like 80% of changes are caused by human actual",
    "start": "832040",
    "end": "838279"
  },
  {
    "text": "like an actual change that a human did so especially if you're in operations the first thing you're like well my system hasn't changed in months so it's",
    "start": "838279",
    "end": "845560"
  },
  {
    "text": "got to be code but that's the first thing we reach for what changed and this is",
    "start": "845560",
    "end": "852440"
  },
  {
    "text": "where being able to track your changes comes in huge right and I'm not talking",
    "start": "852440",
    "end": "857880"
  },
  {
    "text": "about Change Control boards I'm not saying that you need some bureaucrat in a suit who knows nothing about",
    "start": "857880",
    "end": "864320"
  },
  {
    "text": "JavaScript approving and denying changes but what I am talking about is as you empower people to deploy their own code",
    "start": "864320",
    "end": "870759"
  },
  {
    "text": "or you know have a particular group of deploy code you need some sort of audit log to be able to track back and say who",
    "start": "870759",
    "end": "876399"
  },
  {
    "text": "did what when because at this point right now we're just screaming at each other in a room what what what changed I",
    "start": "876399",
    "end": "881880"
  },
  {
    "text": "don't know stop yelling at me we luckily did find uh a series of changes that",
    "start": "881880",
    "end": "888360"
  },
  {
    "text": "went out that day um some of them weren't really suspicious logging aggregation file rule changes logo",
    "start": "888360",
    "end": "894399"
  },
  {
    "text": "redesign change messages to keep processes wait what all right that sort of jumped out at us",
    "start": "894399",
    "end": "901000"
  },
  {
    "text": "and we're like huh interesting that that changed today so let's dive into that",
    "start": "901000",
    "end": "907639"
  },
  {
    "text": "one so the change was fairly innocuous increased the number of worker threads from 10 to 20 some other sort of unrel",
    "start": "907639",
    "end": "913759"
  },
  {
    "text": "jadence but then we look and we're like you know I don't I don't Java a lot but",
    "start": "913759",
    "end": "920079"
  },
  {
    "text": "this looks like it's going to create a TCP connection for every message processes seems bad so we call up a",
    "start": "920079",
    "end": "926759"
  },
  {
    "text": "developer and like hey Dev we're looking he's like oh God yeah that's it that's totally it okay sweet so then what do you",
    "start": "926759",
    "end": "933920"
  },
  {
    "text": "do don't be shy that's right you roll it back why because we're paranoid right",
    "start": "933920",
    "end": "939319"
  },
  {
    "start": "935000",
    "end": "1123000"
  },
  {
    "text": "rolling back what changed is always a good idea why is it always a good idea",
    "start": "939319",
    "end": "945040"
  },
  {
    "text": "because when you have a change and there's a problem with the",
    "start": "945040",
    "end": "950360"
  },
  {
    "text": "system you have to think about your confirmation bias that's always going on in the back of your head right you've",
    "start": "950360",
    "end": "956279"
  },
  {
    "text": "always got this noodle in the back of your head that's going to make it very difficult for you to let go of that idea",
    "start": "956279",
    "end": "963079"
  },
  {
    "text": "in the back of your mind you're thinking like yeah I mean I guess we could add more capacity but you know that change I",
    "start": "963079",
    "end": "968920"
  },
  {
    "text": "don't know seems really suspicious right and you end up cutting yourself off to other possible Avenues of explanation so",
    "start": "968920",
    "end": "975560"
  },
  {
    "text": "it's almost worth it just to be able to remove that from the table and you can say all right Bob shut up we rolled back",
    "start": "975560",
    "end": "980639"
  },
  {
    "text": "it's still broken what next right as opposed to constantly re litigating that piece so rolling back to change is",
    "start": "980639",
    "end": "988000"
  },
  {
    "text": "always a good idea except when it's",
    "start": "988000",
    "end": "992360"
  },
  {
    "text": "not because it's so complicated right it's so complicated you get into these microservice worlds and right you know",
    "start": "994360",
    "end": "1000600"
  },
  {
    "text": "like okay we'll put it out there right well all your changes are supposed to be backwards compatible and you're never",
    "start": "1000600",
    "end": "1005800"
  },
  {
    "text": "supposed to change your interface because that's the standard that we're all B yeah okay I get it right but uh",
    "start": "1005800",
    "end": "1012440"
  },
  {
    "text": " happens right how many people have like a breaking change to their API interface oh you're all too proud all",
    "start": "1012440",
    "end": "1018680"
  },
  {
    "text": "right well let me know where you work when you're done because uh I want to work with you guys so we have a scenario",
    "start": "1018680",
    "end": "1025600"
  },
  {
    "text": "where uh we've got a worker process expecting version 1.5 of an endpoint or",
    "start": "1025600",
    "end": "1031199"
  },
  {
    "text": "an interface and then we roll it back to version 1.0 what does that do I I don't",
    "start": "1031199",
    "end": "1039280"
  },
  {
    "text": "know right I I have no idea right seems like it should work so now what are you",
    "start": "1039280",
    "end": "1045880"
  },
  {
    "text": "doing you're wasting time trying to find devs to under to get an understanding like so if I roll this back and they're",
    "start": "1045880",
    "end": "1050919"
  },
  {
    "text": "like wait wait why are we rolling back just catch up we're rolling back what's going to happen I I don't know now if",
    "start": "1050919",
    "end": "1057400"
  },
  {
    "text": "you're lucky you're in a scenario where the code has been designed in such a way that only part of it breaks right",
    "start": "1057400",
    "end": "1062600"
  },
  {
    "text": "there's some added functionality that doesn't get processed right that's your best case scenario your worst case",
    "start": "1062600",
    "end": "1067919"
  },
  {
    "text": "scenario is Ragnarok so you know you you kind of",
    "start": "1067919",
    "end": "1073799"
  },
  {
    "text": "have to just roll with it and hope for the best the other problem that you run into though is guess what never got",
    "start": "1073799",
    "end": "1081039"
  },
  {
    "text": "tested yeah you're not rolling back to a known State you're in old new you're in",
    "start": "1081039",
    "end": "1086320"
  },
  {
    "text": "like an entirely new Uncharted Territory you're in a world that has just never been dreamed up and I don't know why right no one ever thought about it like",
    "start": "1086320",
    "end": "1092200"
  },
  {
    "text": "well what if we only roll back half of it and they're like would that really happen though we're probably good right so your",
    "start": "1092200",
    "end": "1099960"
  },
  {
    "text": "whole point of doing this was to roll back to a known good state but now you're actually rolling back to a state that has never been tested has never",
    "start": "1099960",
    "end": "1105760"
  },
  {
    "text": "been figured out and now you're just you know kind of like what are we going to",
    "start": "1105760",
    "end": "1111799"
  },
  {
    "text": "do so we rolled back we restarted the messaging server lo and behold everything",
    "start": "1112240",
    "end": "1119440"
  },
  {
    "text": "worked we're like okay sweet that was good it's fixed but is",
    "start": "1119440",
    "end": "1125480"
  },
  {
    "start": "1123000",
    "end": "1407000"
  },
  {
    "text": "it is it really because the problem is when we when we think about resolving",
    "start": "1125480",
    "end": "1131480"
  },
  {
    "text": "these production incidents you know I I blame itel right CU in your mind you're like it's Incident Management it's about",
    "start": "1131480",
    "end": "1137000"
  },
  {
    "text": "restoring Services everything else comes after that so A lot of times you're like well server's up sweet I'm done right",
    "start": "1137000",
    "end": "1143799"
  },
  {
    "text": "but we don't have a compelling story as to why this happened we don't really know like what was it that created this",
    "start": "1143799",
    "end": "1150600"
  },
  {
    "text": "particular scenario it's easy to say like oh yeah that you know the the TCP socket thing changed right and uh that's",
    "start": "1150600",
    "end": "1157320"
  },
  {
    "text": "why everything failed but we still don't have an actual explanation so being the uh morbidly",
    "start": "1157320",
    "end": "1163799"
  },
  {
    "text": "curious person I am we decided to have a pretty strong uh retro on this and there were a few things that we missed during",
    "start": "1163799",
    "end": "1169679"
  },
  {
    "text": "the outage let me know if any of these sound familiar or unless most of you are devs and you were sleeping when this",
    "start": "1169679",
    "end": "1175120"
  },
  {
    "text": "went down uh the message server ran out of memory we missed that we missed it",
    "start": "1175120",
    "end": "1181400"
  },
  {
    "text": "because we had a deluge of alerts right like so everyone knows that scenario where like oh the database is down so",
    "start": "1181400",
    "end": "1186799"
  },
  {
    "text": "now everything is alerting right uh it was one of those scenarios the message Q was important enough where we were",
    "start": "1186799",
    "end": "1192760"
  },
  {
    "text": "firing off alerts for a bunch of stuff and then you're like shut up and you silence it but then you silence the",
    "start": "1192760",
    "end": "1198159"
  },
  {
    "text": "alert that matters which is really really problematic the other thing that we",
    "start": "1198159",
    "end": "1203240"
  },
  {
    "text": "missed was that there were bad connection attempts for the uh close weight state that was happening after the roll back so we rolled back we",
    "start": "1203240",
    "end": "1210880"
  },
  {
    "text": "waited for a little bit we patted ourselves you know we did the chest bump like yeah we did it now just restart the message server and we're gone we're",
    "start": "1210880",
    "end": "1217000"
  },
  {
    "text": "going home um but we missed the fact that after we rolled back the system was still creating these closed weights so",
    "start": "1217000",
    "end": "1223600"
  },
  {
    "text": "that means like hm the roll back wasn't actually the fix and then the third thing",
    "start": "1223600",
    "end": "1229600"
  },
  {
    "text": "uh the message CU service had a series of threat errors how many of you guys",
    "start": "1229600",
    "end": "1235840"
  },
  {
    "text": "have normal errors oh come on really nobody has normal errors in their log you guys are",
    "start": "1235840",
    "end": "1242360"
  },
  {
    "text": "going to hell you know that maybe I'm just working at the wrong",
    "start": "1242360",
    "end": "1248400"
  },
  {
    "text": "places I don't know but yeah there was a series of",
    "start": "1248400",
    "end": "1253799"
  },
  {
    "text": "normal errors uh and they sort of got lost in the logs and we missed it I told you this was going to be a real talk so",
    "start": "1253799",
    "end": "1259640"
  },
  {
    "text": "I'm calling youall out sorry this thing",
    "start": "1259640",
    "end": "1265159"
  },
  {
    "text": "was when your message clicker thing comes with a repair kit it's a bad sign so I'll just make",
    "start": "1265159",
    "end": "1273320"
  },
  {
    "text": "sure my space is over here um so the message to that error thing was interesting right so so one thing that I",
    "start": "1273320",
    "end": "1279080"
  },
  {
    "text": "think uh a lot of people especially when they're new to open source miss out on is the fact that it's open source so if",
    "start": "1279080",
    "end": "1286640"
  },
  {
    "text": "there's an exception chances are there is a literal string in the code base",
    "start": "1286640",
    "end": "1291799"
  },
  {
    "text": "with that exception message it's amazing how many people like miss out on that when they're trying to troubleshoot something so sure enough we say huh",
    "start": "1291799",
    "end": "1298720"
  },
  {
    "text": "let's crep for this thing in the law oh look at that this is telling us what this thread was actually doing so what",
    "start": "1298720",
    "end": "1305080"
  },
  {
    "text": "actually end up happening was there was a thread that was responsible for something that",
    "start": "1305080",
    "end": "1311400"
  },
  {
    "text": "died and because of the out of memory conditioned the thread couldn't be restarted",
    "start": "1311400",
    "end": "1318960"
  },
  {
    "text": "so that helped us sort of narrow down on like okay that could be what what's causing this let's look and see what",
    "start": "1318960",
    "end": "1324320"
  },
  {
    "text": "this thing does probably nothing important except for that whole closing sockets thing",
    "start": "1324320",
    "end": "1330640"
  },
  {
    "text": "asynchronously so as we navigated through the code basically what happened was whenever a socket gets closed the",
    "start": "1330640",
    "end": "1338440"
  },
  {
    "text": "process that handles that doesn't actually close the socket immediately it marks it dirty and then puts it on a",
    "start": "1338440",
    "end": "1344600"
  },
  {
    "text": "queue and then there's an asynchronous process that comes through and closes those sockets later that thread dies guess what you get a",
    "start": "1344600",
    "end": "1352799"
  },
  {
    "text": "bunch of clothes weights so we're like oh this is brilliant how the hell would you design",
    "start": "1352799",
    "end": "1359320"
  },
  {
    "text": "an alert for that right like with forethought right like I mean after the building's burning down you're like man",
    "start": "1359320",
    "end": "1365720"
  },
  {
    "text": "we really should have put smoke detectors in that shower but",
    "start": "1365720",
    "end": "1371559"
  },
  {
    "text": "right but like during the incident or even before you wouldn't even think about like yeah",
    "start": "1371559",
    "end": "1378000"
  },
  {
    "text": "I don't know smoke detectors in the shower seems a little like Overkill why don't we just see how it goes",
    "start": "1378000",
    "end": "1385400"
  },
  {
    "text": "right yeah so then we started piecing together the story and we were like",
    "start": "1385400",
    "end": "1391760"
  },
  {
    "text": "oh maybe it was related to the number of connections right because we had the out of memory thing right so we noticed that",
    "start": "1391760",
    "end": "1397960"
  },
  {
    "text": "as clothes weights were going up memory usage was going up so it kind of makes sense right that like oh maybe the",
    "start": "1397960",
    "end": "1404039"
  },
  {
    "text": "number of connections is a problem so we start asking ourselves how many connections can we support",
    "start": "1404039",
    "end": "1411440"
  },
  {
    "text": "again this is like you know brilliant Insight after the fact you should probably think about this before you go",
    "start": "1411440",
    "end": "1416679"
  },
  {
    "text": "opening your server up to have tons of connections to it because this is capacity planning 101 so we're looking",
    "start": "1416679",
    "end": "1423440"
  },
  {
    "text": "and we're saying okay uh I don't see this anywhere in config management being",
    "start": "1423440",
    "end": "1429640"
  },
  {
    "text": "set looks like we're not setting it oh all right well system has to has a default right of course it does every",
    "start": "1429640",
    "end": "1436520"
  },
  {
    "text": "system has a default and it's probably a sensible default yeah yeah it was a sensible default real",
    "start": "1436520",
    "end": "1444200"
  },
  {
    "start": "1442000",
    "end": "1471000"
  },
  {
    "text": "sensible cuz I mean come on right if your server can't handle like 2.8",
    "start": "1446320",
    "end": "1451679"
  },
  {
    "text": "billion connections or whatever you're probably doing it",
    "start": "1451679",
    "end": "1455840"
  },
  {
    "text": "wrong like I literally screamed when I saw this like",
    "start": "1459000",
    "end": "1464159"
  },
  {
    "text": "no but it's my fault right because I should have been setting this",
    "start": "1464159",
    "end": "1470360"
  },
  {
    "start": "1471000",
    "end": "1612000"
  },
  {
    "text": "so what did we learn during this whole big thing we learned a few things um we",
    "start": "1471840",
    "end": "1477559"
  },
  {
    "text": "learned something about how root causes aren't always a thing right when",
    "start": "1477559",
    "end": "1484039"
  },
  {
    "text": "you're boss says well what caused this thing when you list out five things he's like",
    "start": "1484039",
    "end": "1489360"
  },
  {
    "text": "no what was the thing that caused I don't know particle acceleration I have no idea like what caused all of this",
    "start": "1489360",
    "end": "1496600"
  },
  {
    "text": "stuff to happen all at once right it's fake it's kiz I don't know so was it the message CU",
    "start": "1496600",
    "end": "1504080"
  },
  {
    "text": "changes was it the worker threads that said oh we're going to go from 10 to 20 and then screw up how we handle",
    "start": "1504080",
    "end": "1509640"
  },
  {
    "text": "TCP possible Right but that doesn't mean that some other event couldn't have",
    "start": "1509640",
    "end": "1516240"
  },
  {
    "text": "created a large number of connections that we weren't protected against right maybe some autoscaling thing on the",
    "start": "1516240",
    "end": "1521520"
  },
  {
    "text": "number of workers was it the low memory message uh the low memory on the message server",
    "start": "1521520",
    "end": "1527960"
  },
  {
    "text": "it's possible possible Right but would we been having memory pressure if it",
    "start": "1527960",
    "end": "1533880"
  },
  {
    "text": "weren't for that erroneous system beforehand probably not or at least not",
    "start": "1533880",
    "end": "1539760"
  },
  {
    "text": "so rapidly that is one thing we were monitoring and tracking so we had an idea of like what our Headroom was",
    "start": "1539760",
    "end": "1546120"
  },
  {
    "text": "like was it the lack of Max connection settings possibly it's never been a",
    "start": "1546120",
    "end": "1551880"
  },
  {
    "text": "problem before not really a good excuse when your boss is yelling at you but I think the thing that we",
    "start": "1551880",
    "end": "1558480"
  },
  {
    "text": "learned is like even when you are talking about",
    "start": "1558480",
    "end": "1563760"
  },
  {
    "text": "systems under your purview under your control you have to defend it against",
    "start": "1563760",
    "end": "1569320"
  },
  {
    "text": "Bad actors even if those Bad actors sit three cubes away from you all right you you have to defend",
    "start": "1569320",
    "end": "1576320"
  },
  {
    "text": "yourself no one would put an a shouldn't say that most people wouldn't put a public API out without some sort of rate",
    "start": "1576320",
    "end": "1582360"
  },
  {
    "text": "limiting right you have to do something similar inside you have to make sure that you're defending these systems",
    "start": "1582360",
    "end": "1588360"
  },
  {
    "text": "against all Bad actors in all bad scenarios and we really didn't learn a",
    "start": "1588360",
    "end": "1594279"
  },
  {
    "text": "fourth thing I just had a hard time modifying the template so I just just being",
    "start": "1594279",
    "end": "1601279"
  },
  {
    "text": "honest I'm really bad at uh paint photosop and and PowerPoint and I was like oh it's a great template but I",
    "start": "1601279",
    "end": "1608039"
  },
  {
    "text": "thought really hard to try to figure a fourth bullet too and it didn't didn't really click um the other thing we learned",
    "start": "1608039",
    "end": "1614200"
  },
  {
    "start": "1612000",
    "end": "1732000"
  },
  {
    "text": "metrics need context right so we were talking about systems and operating at systems at different levels right so um",
    "start": "1614200",
    "end": "1621799"
  },
  {
    "text": "sometimes people have like the one giant dashboard that list everything and",
    "start": "1621799",
    "end": "1626919"
  },
  {
    "text": "sometimes that's good but sometimes that's overwhelming right you're like all right something Jesus there's just",
    "start": "1626919",
    "end": "1632520"
  },
  {
    "text": "graphs everywhere right and when you're in a scenario where you don't really understand what the problem is you'll",
    "start": "1632520",
    "end": "1638360"
  },
  {
    "text": "latch on to anything right you like see see how that was like normal and then it went up like that and yeah this is the",
    "start": "1638360",
    "end": "1645480"
  },
  {
    "text": "problem for sure and you're like what you are you kidding like it's like Ping",
    "start": "1645480",
    "end": "1650520"
  },
  {
    "text": "latency or something right like what made you think that crashed the database server I don't know but this graph looks really suspicious so you kind of have to",
    "start": "1650520",
    "end": "1657520"
  },
  {
    "text": "you kind of have to give your your graphs context right so one of the things that we uh looked at doing was uh",
    "start": "1657520",
    "end": "1662559"
  },
  {
    "text": "having uh some very high level kpis for A system that we could very quickly look",
    "start": "1662559",
    "end": "1667600"
  },
  {
    "text": "at and rule in or out if the system was in a decent state right it wasn't the pinpoint specific but you know if you're",
    "start": "1667600",
    "end": "1674480"
  },
  {
    "text": "in an airplane right like I don't know let's say I don't know the pilot had a heart attack or something you got to",
    "start": "1674480",
    "end": "1679919"
  },
  {
    "text": "take over the where did that come from you have you uh jump into the cockpit right and you're looking at a",
    "start": "1679919",
    "end": "1685600"
  },
  {
    "text": "bunch of dials right and you know that all of them have different detail levels right but the minute you see one that's like that right going towards the red",
    "start": "1685600",
    "end": "1692720"
  },
  {
    "text": "you're like we should look into this right if we're going to land this thing similar thing doesn't mean you don't",
    "start": "1692720",
    "end": "1698799"
  },
  {
    "text": "have more detailed graphs anywhere but something for a quick uh Breeze through",
    "start": "1698799",
    "end": "1704159"
  },
  {
    "text": "um the other thing is clarifying points of data so like we had a large number of messages in the message ceue at first",
    "start": "1704159",
    "end": "1711679"
  },
  {
    "text": "how's that correlate though to order volume is the order volume just High how old are the messages what's the average",
    "start": "1711679",
    "end": "1717799"
  },
  {
    "text": "length or uh average uh age of the message anything that can let you know",
    "start": "1717799",
    "end": "1722840"
  },
  {
    "text": "like is this the byproduct of something else happening in the system or is it the actual problem and it can help you",
    "start": "1722840",
    "end": "1729000"
  },
  {
    "text": "quickly uh sort of narrow down on those things logs logs logs logs",
    "start": "1729000",
    "end": "1735120"
  },
  {
    "start": "1732000",
    "end": "1830000"
  },
  {
    "text": "logs uh centralized logging your table right does anyone not have centralized",
    "start": "1735120",
    "end": "1740480"
  },
  {
    "text": "logging in their environment see I asked the negative because you guys aren't raising your",
    "start": "1740480",
    "end": "1745840"
  },
  {
    "text": "hands anyways who has centralized logging in their environment okay",
    "start": "1745840",
    "end": "1751080"
  },
  {
    "text": "good yeah it's table Stakes right because without this in a distributed environment with multiple servers you're",
    "start": "1751080",
    "end": "1756799"
  },
  {
    "text": "losing time sshing into every server and looking and then if there's anyone watching they're looking at you like the",
    "start": "1756799",
    "end": "1762519"
  },
  {
    "text": "hell are you doing you're like oh yeah I got to get the logs right you don't want to be that you don't want to be that person",
    "start": "1762519",
    "end": "1768880"
  },
  {
    "text": "um also being able to separate the signal from the noise right so we were talking about a ton of exceptions that were happening throughout the event",
    "start": "1768880",
    "end": "1776360"
  },
  {
    "text": "right just being able to elevate certain errors out of that mess is very helpful",
    "start": "1776360",
    "end": "1782440"
  },
  {
    "text": "so one quick simple dirty thing we did was uh give me a account of Errors based",
    "start": "1782440",
    "end": "1787960"
  },
  {
    "text": "on the class that's throwing them right so then you quickly see oh there's",
    "start": "1787960",
    "end": "1793120"
  },
  {
    "text": "389 dealing with this class but then you look at it and you realize like you know I don't know it's",
    "start": "1793120",
    "end": "1798640"
  },
  {
    "text": "some normal error that you always see so you can say oh okay I can eliminate this from my train of thought this guy knows",
    "start": "1798640",
    "end": "1805320"
  },
  {
    "text": "what I'm talking about he's like yeah um so I mean your mileage is going to vary",
    "start": "1805320",
    "end": "1810480"
  },
  {
    "text": "on that but like find out ways that you can quickly Elevate the signal from the noise in the logs because once a problem",
    "start": "1810480",
    "end": "1817159"
  },
  {
    "text": "happens the logs are just spewing they're just spewing and you're you're quickly you know like that uh like that",
    "start": "1817159",
    "end": "1823120"
  },
  {
    "text": "cavalca of dashboard metrics you're just going to grab onto anything and waste a lot of time",
    "start": "1823120",
    "end": "1829720"
  },
  {
    "start": "1830000",
    "end": "1964000"
  },
  {
    "text": "it's easy to lose alerts when there's a ton of activity going on and the thing",
    "start": "1830919",
    "end": "1836600"
  },
  {
    "text": "that we we sort of look at it was like imagine you're a firefighter and you're fighting a fire it's important to know",
    "start": "1836600",
    "end": "1842720"
  },
  {
    "text": "that another fire has sprung up in the garage next door right because that changes the landscape of the problem",
    "start": "1842720",
    "end": "1848440"
  },
  {
    "text": "that you're fighting it's the same thing with alerts you may have a lot of alerts that are firing for the same problem but",
    "start": "1848440",
    "end": "1853880"
  },
  {
    "text": "a new alert might fire that is pertinent to the problem that you're solving in our case it was a low memory error if we",
    "start": "1853880",
    "end": "1860200"
  },
  {
    "text": "had seen that that might have changed our trajectory of troubleshooting but because it got lost in the logs lost in",
    "start": "1860200",
    "end": "1865519"
  },
  {
    "text": "the uh lost in the noise we completely missed it constant paging too like that was",
    "start": "1865519",
    "end": "1873360"
  },
  {
    "text": "something that just popped up because like you silence the alerts and this probably a hint for how long this went",
    "start": "1873360",
    "end": "1879360"
  },
  {
    "text": "on you silence the alert and the alert silence clears and it comes back and it Pages again or something else Pages",
    "start": "1879360",
    "end": "1885679"
  },
  {
    "text": "again so make sure that you've got ways to sort of deal with with and manage that uh some some companies are are uh",
    "start": "1885679",
    "end": "1891399"
  },
  {
    "text": "leaning towards like identifying a scribe that sort of like handles all of that stuff and is taking notes you know",
    "start": "1891399",
    "end": "1896720"
  },
  {
    "text": "maybe you just turn off all alerting for everyone except for the Scribe but I think the key thing is even though it's",
    "start": "1896720",
    "end": "1902159"
  },
  {
    "text": "like oh yeah that's pretty easy to do you'd be amazed how actually complicated it is unless you've set up a system to do that quickly beforehand right because",
    "start": "1902159",
    "end": "1909320"
  },
  {
    "text": "now you're like oh man I got to remove this group and this group I forgot that group but this group needs to so if you plan it ahead of time you can very",
    "start": "1909320",
    "end": "1916279"
  },
  {
    "text": "easily just go in and say boop we're in danger mode and only Bob is getting the alerts because Bob drew the Short Straw",
    "start": "1916279",
    "end": "1923679"
  },
  {
    "text": "uh services like big Panda help to solve this um but uh something that we learned you I thought there was like",
    "start": "1923679",
    "end": "1931000"
  },
  {
    "text": "some like devop sprinkle stuff that I was just going to be able to put on big Panda and some stuff was going to magically appear and everything was going to be fixed it turns out they",
    "start": "1931000",
    "end": "1937399"
  },
  {
    "text": "actually need you to define those alerts because they don't have insight into your systems and how things are structure who",
    "start": "1937399",
    "end": "1943679"
  },
  {
    "text": "knew so that was a fun three months and you know you don't dedicate time to it but like big pin is a is a great",
    "start": "1943679",
    "end": "1949720"
  },
  {
    "text": "solution that kind of uh solves that problem and there's others like it but know that you have to put work into it",
    "start": "1949720",
    "end": "1954799"
  },
  {
    "text": "so don't think you're going to you know I don't know set up a two- week uh trial",
    "start": "1954799",
    "end": "1960279"
  },
  {
    "text": "and just have everything figured out so what did we talk",
    "start": "1960279",
    "end": "1966559"
  },
  {
    "start": "1964000",
    "end": "2025000"
  },
  {
    "text": "about uh talked about the anatomy of system how complexity increases as the",
    "start": "1966559",
    "end": "1972519"
  },
  {
    "text": "system grows we walk through our own very personal uh poop show",
    "start": "1972519",
    "end": "1978600"
  },
  {
    "text": "that was exciting um most failures are caused by change by human change so",
    "start": "1978600",
    "end": "1985159"
  },
  {
    "text": "always think about what change and have access to what change very quickly in your environment um root cause analysis is",
    "start": "1985159",
    "end": "1992360"
  },
  {
    "text": "difficult um sometimes there are a number of things that are happening at once that",
    "start": "1992360",
    "end": "1998120"
  },
  {
    "text": "put the system into a predetermined that put it into a state that allows that airor condition to happen so sometimes",
    "start": "1998120",
    "end": "2004720"
  },
  {
    "text": "it's not just one thing sometimes it's a collection of things and you always have to keep that in mind and be cognizant of",
    "start": "2004720",
    "end": "2010840"
  },
  {
    "text": "it things we learned give your alerts context aggregated logging is table Stakes you absolutely have to have",
    "start": "2010840",
    "end": "2017840"
  },
  {
    "text": "it and uh manage your alert so you don't miss out on state changes during the",
    "start": "2017840",
    "end": "2024679"
  },
  {
    "text": "outage that's my talk uh what the hell was that oh right remember to rate your",
    "start": "2024679",
    "end": "2030399"
  },
  {
    "start": "2025000",
    "end": "2502000"
  },
  {
    "text": "session I forgot I added that late that's it thanks",
    "start": "2030399",
    "end": "2036840"
  },
  {
    "text": "all right and I think uh Jeff said that he would be willing to take a couple of questions you have a couple of questions",
    "start": "2041519",
    "end": "2047320"
  },
  {
    "text": "and no I'm not using the app so if you have a question put your hand up and ask it the oldfashioned",
    "start": "2047320",
    "end": "2053560"
  },
  {
    "text": "way I can't I see one back there I can't actually see the back so a huge bright",
    "start": "2054480",
    "end": "2060280"
  },
  {
    "text": "bulb shining at me so damn hot so you advocate for rolling back um with a",
    "start": "2060280",
    "end": "2067520"
  },
  {
    "text": "really really good continuous delivery pipeline if you've figured out what's wrong what's wrong with rolling forward",
    "start": "2067520",
    "end": "2073919"
  },
  {
    "text": "if you figured out what's wrong absolutely nothing but then you're sort of in a different Incident Management state right because now you're talking",
    "start": "2073919",
    "end": "2080480"
  },
  {
    "text": "about you're actually deploying the fix which is cake so if you can figure that out and roll forward by all means do",
    "start": "2080480",
    "end": "2086398"
  },
  {
    "text": "that fair enough but we were kind of like",
    "start": "2086399",
    "end": "2093158"
  },
  {
    "text": "ah people are like what a lot of jazz hands I actually I have a question",
    "start": "2093159",
    "end": "2098960"
  },
  {
    "text": "myself while we're waiting to see if other people want to ask some um it looks like you had a fair amount of",
    "start": "2098960",
    "end": "2104520"
  },
  {
    "text": "detail you know at your disposal to put this talk together can you talk a little bit about what the postmortem for this",
    "start": "2104520",
    "end": "2111000"
  },
  {
    "text": "kind of incident looked like sure yeah so uh the postmortem was um so for this",
    "start": "2111000",
    "end": "2118760"
  },
  {
    "text": "particular instant because of the impact it was a little more detailed than we might normally going into so um it started with the war room right and we",
    "start": "2118760",
    "end": "2125920"
  },
  {
    "text": "did it as quickly as early as possible right after the meeting it was sort of a late night so I think we started the very first thing in the morning um and",
    "start": "2125920",
    "end": "2132640"
  },
  {
    "text": "the first thing we did was walk through the timeline right like what did we know what do we know and when do we know it happened and",
    "start": "2132640",
    "end": "2139320"
  },
  {
    "text": "then we basically drew some circles around things that had question marks around it right so we had identified",
    "start": "2139320",
    "end": "2144880"
  },
  {
    "text": "like the steps that we took and the alerts that we got fairly easily but then the questions really dove into all",
    "start": "2144880",
    "end": "2150560"
  },
  {
    "text": "right but why did this happen and how can we get more information so it was really around that connection failed",
    "start": "2150560",
    "end": "2156319"
  },
  {
    "text": "process that we said all right let's blow this up so one of the things that we do is we say what are all of the",
    "start": "2156319",
    "end": "2161520"
  },
  {
    "text": "different systems that are communicating can we blow those pieces up and then validate that each of those pieces was",
    "start": "2161520",
    "end": "2168319"
  },
  {
    "text": "operating correctly or efficiently you know so we were using data dog so there was a lot of good metrics out there if",
    "start": "2168319",
    "end": "2174680"
  },
  {
    "text": "you knew to look for them even metrics that we weren't dashboarding but were being collected so there were a number of times where we said oh well we've got",
    "start": "2174680",
    "end": "2180480"
  },
  {
    "text": "this metric for the HTTP connection pool let's take a look at that so it's really about taking up uh taking the system",
    "start": "2180480",
    "end": "2186800"
  },
  {
    "text": "breaking it into it elements and then drilling into each of those elements until we came up with a story and then",
    "start": "2186800",
    "end": "2192119"
  },
  {
    "text": "once we came up with a story it was a matter of saying all right is this plausible how can we try to prove it and it's real hard sometimes to to uh",
    "start": "2192119",
    "end": "2199680"
  },
  {
    "text": "recreate situations in a production environment or in a test environment um but if you can put together a compelling",
    "start": "2199680",
    "end": "2205560"
  },
  {
    "text": "story you can probably put together a set of test criteria so that if it happens again you can prove that that",
    "start": "2205560",
    "end": "2211280"
  },
  {
    "text": "was a case or not and in this case it was simple as did this thread die does",
    "start": "2211280",
    "end": "2216400"
  },
  {
    "text": "it still exist and are we still generating closed weight States nice awesome okay another",
    "start": "2216400",
    "end": "2223119"
  },
  {
    "text": "question here uh with respect to the timeline and",
    "start": "2223119",
    "end": "2228480"
  },
  {
    "text": "the postmortem do you guys uh or do you find that you just base things off log",
    "start": "2228480",
    "end": "2234280"
  },
  {
    "text": "times or do you go to chat logs emails to try and also delineate the Delta between an event occurring and when the",
    "start": "2234280",
    "end": "2239640"
  },
  {
    "text": "team knows about it and communicates it's actually a combination of the two um you know we we uh the Scribe always",
    "start": "2239640",
    "end": "2246520"
  },
  {
    "text": "is dictating when someone reported a thing and then later we'll back fill that with the alerting so in in a couple",
    "start": "2246520",
    "end": "2253240"
  },
  {
    "text": "of scenarios uh not this particular inent but we've had scenarios where it's like customer service reported X our",
    "start": "2253240",
    "end": "2260160"
  },
  {
    "text": "first alert didn't fire till 15 minutes later what was it that customer X saw and how can we make an alert around that",
    "start": "2260160",
    "end": "2266720"
  },
  {
    "text": "and that's just you know part of the process of iterating and always getting better um but uh you definitely need to",
    "start": "2266720",
    "end": "2273240"
  },
  {
    "text": "tie those two things together uh because it's very easy to think that you're is in place but you don't realize that",
    "start": "2273240",
    "end": "2279480"
  },
  {
    "text": "someone was encountering a problem beforehand and the other thing too is to not always accept your known",
    "start": "2279480",
    "end": "2285920"
  },
  {
    "text": "understanding of when a thing happened you might want to solicit more information from people or other users in the system to say hey were you",
    "start": "2285920",
    "end": "2291520"
  },
  {
    "text": "experiencing this problem yeah I had this weird intermittent thing but I would just log out and log back in and it went away and it's like oh that could",
    "start": "2291520",
    "end": "2298119"
  },
  {
    "text": "be the seeds of this thing that's starting to manifest not in this particular case but we've definitely had",
    "start": "2298119",
    "end": "2303160"
  },
  {
    "text": "that in other cases where once we've widened the web sort of speak people like oh yeah I was having problems I was",
    "start": "2303160",
    "end": "2309560"
  },
  {
    "text": "working from home and I noticed this but I just assumed it was VPN because VPN",
    "start": "2309560",
    "end": "2314839"
  },
  {
    "text": "sucks um because you I we have one more question right here too but I'm wondering uh if you can elaborate um a",
    "start": "2316319",
    "end": "2322400"
  },
  {
    "text": "tiny bit more on you mention the Scribe role and I don't know if everybody runs their incidents like that so can you mention what what you clarify what you",
    "start": "2322400",
    "end": "2329119"
  },
  {
    "text": "meant there sure so um when an incident is occurring um and this is you know",
    "start": "2329119",
    "end": "2334839"
  },
  {
    "text": "pretty much ripped right out of the Google SRE handbook um when when an incident is occurring we try to assign particular roles uh to people right so",
    "start": "2334839",
    "end": "2342240"
  },
  {
    "text": "there's The Incident Commander who's responsible for sort of shepherding the entire incident process um there's",
    "start": "2342240",
    "end": "2347319"
  },
  {
    "text": "another role of the incident scribe and the Scribe is sort of responsible for making sure they are documenting",
    "start": "2347319",
    "end": "2353079"
  },
  {
    "text": "everything that sort of occurred uh when did an alert fire when did we um escalate to so and so when did we decide",
    "start": "2353079",
    "end": "2360079"
  },
  {
    "text": "to pull the big red switch and shut the site down the Scribe is sort of documenting all of that then you've got this uh another role for resource",
    "start": "2360079",
    "end": "2366880"
  },
  {
    "text": "wrangling so that if the Incident Commander decides that we need to bring on a Dev we don't have to you know",
    "start": "2366880",
    "end": "2373560"
  },
  {
    "text": "figure out who's going to do that the incident resource manager says hey we need a Dev and they say okay I'm going to run and grab the dev and then you've",
    "start": "2373560",
    "end": "2379440"
  },
  {
    "text": "got the people that are actually troubleshooting the issue under the direction of The Incident Commander um uh thanks for the",
    "start": "2379440",
    "end": "2386800"
  },
  {
    "text": "presentation um I would like to ask this what did you do to prevent this to",
    "start": "2386800",
    "end": "2392280"
  },
  {
    "text": "happen in future put in Max connection setting uh",
    "start": "2392280",
    "end": "2397920"
  },
  {
    "text": "low hanging fruit um yeah so we put in a Max connection setting um we already had",
    "start": "2397920",
    "end": "2404040"
  },
  {
    "text": "that connection alert and we never really did figure out where that came from um because it was sort of",
    "start": "2404040",
    "end": "2409800"
  },
  {
    "text": "interesting that you know no one on the team had remembered actually putting that in um but we leveraged that a",
    "start": "2409800",
    "end": "2415119"
  },
  {
    "text": "little bit and then uh because we were using uh aggregated logging we were using Splunk we could set an alert on uh",
    "start": "2415119",
    "end": "2421760"
  },
  {
    "text": "particular threads dying we didn't we didn't have a good way at the time although I can think of tools to do it",
    "start": "2421760",
    "end": "2427079"
  },
  {
    "text": "now we didn't have a good way at the time to uh check and see because if the",
    "start": "2427079",
    "end": "2432680"
  },
  {
    "text": "thread dies it gets restarted right it's only this o condition that uh made it",
    "start": "2432680",
    "end": "2438040"
  },
  {
    "text": "difficult for it to start so we did alert on this thread dying in particularly which was actually a rare scenario we were just lucky enough to",
    "start": "2438040",
    "end": "2444319"
  },
  {
    "text": "have it happen twice um but we do have an alert for that thread exception um so",
    "start": "2444319",
    "end": "2450520"
  },
  {
    "text": "it's more detection um with a little with a little ounce of prevention",
    "start": "2450520",
    "end": "2457119"
  },
  {
    "text": "all right um thank you so much Jeff and if you want to hear more from Jeff I forgot to mention this this morning but",
    "start": "2457480",
    "end": "2463880"
  },
  {
    "text": "all the speakers from the track today um for the most part with one exception are doing uh the podcast tomorrow so you'll",
    "start": "2463880",
    "end": "2471920"
  },
  {
    "text": "be uh chatting more about you know incident response dealing with the all of the",
    "start": "2471920",
    "end": "2479040"
  },
  {
    "text": "sadness we process our sadness together but when it's over you get the high five right and you're like yeah we did it uh",
    "start": "2479040",
    "end": "2486440"
  },
  {
    "text": "so yes so thank you so much and uh once again give it up for Jeff",
    "start": "2486440",
    "end": "2493440"
  }
]