[
  {
    "start": "0",
    "end": "49000"
  },
  {
    "text": "i'm going to talk about what netflix did and um basically yet another slice of cloud",
    "start": "240",
    "end": "7440"
  },
  {
    "text": "architecture is what it looks like when you basically build on top of amazon's public cloud and build out a",
    "start": "7440",
    "end": "13040"
  },
  {
    "text": "large-scale global service and then i'll end up looking at all of the open source pieces that we've been",
    "start": "13040",
    "end": "19119"
  },
  {
    "text": "putting out and some of the ones that we haven't actually put out yet but some of the plans we have for things we're going to be releasing in the next few months",
    "start": "19119",
    "end": "25680"
  },
  {
    "text": "so that you can then go and build your own public based cloud application or use these pieces for",
    "start": "25680",
    "end": "31439"
  },
  {
    "text": "for other subjects so i'm going to talk about what did netflix do um why it did it and",
    "start": "31439",
    "end": "37760"
  },
  {
    "text": "when it did it then look at the the globally distributed cloud availability model",
    "start": "37760",
    "end": "43120"
  },
  {
    "text": "look at the open components and then sort of talk a bit about how you assemble these things to build your own platform",
    "start": "43120",
    "end": "49280"
  },
  {
    "start": "49000",
    "end": "272000"
  },
  {
    "text": "so what netflix did we moved a whole lot of things to sas applications our corporate it basically",
    "start": "49280",
    "end": "56399"
  },
  {
    "text": "we moved some of our internal tools that we use for managing our systems like pagerduty which is the call",
    "start": "56399",
    "end": "62719"
  },
  {
    "text": "rotor and the the escalation trees for who you call when something's broken",
    "start": "62719",
    "end": "68400"
  },
  {
    "text": "uh our developers are all on call for if you push code if you if you have code running production then somebody in your group",
    "start": "68400",
    "end": "74880"
  },
  {
    "text": "or yourself will take turns being in charge of um if it breaks at 3am you get the call",
    "start": "74880",
    "end": "82240"
  },
  {
    "text": "and then app dynamics uses an application performance monitoring and we use things like the we use large high level tools like",
    "start": "82240",
    "end": "88640"
  },
  {
    "text": "elastic mapreduce which is amazon's uh hadoop we then built our own platform level",
    "start": "88640",
    "end": "95119"
  },
  {
    "text": "customized deliberately to get make our developers as productive as possible that's the number one thing we're aiming",
    "start": "95119",
    "end": "100640"
  },
  {
    "text": "for here and we started about three years ago there wasn't much choice out there and there wasn't anything that would",
    "start": "100640",
    "end": "106320"
  },
  {
    "text": "extend to the scale that we were trying to build at we knew we were going to build that and then we moved all our incremental",
    "start": "106320",
    "end": "112320"
  },
  {
    "text": "capacities infrastructure as a service we have the same small data center that we had in 2008",
    "start": "112320",
    "end": "119040"
  },
  {
    "text": "we have approximately 10 times as much capacity in the cloud as we have in that little data center",
    "start": "119040",
    "end": "125280"
  },
  {
    "text": "right so we're something like a 90 percent of our capacity is cloud-based and the data center has less",
    "start": "125280",
    "end": "131120"
  },
  {
    "text": "and less in it it basically runs our us-based dvd business and some of our corporate it all the",
    "start": "131120",
    "end": "137360"
  },
  {
    "text": "streaming application now runs in the cloud to the point that if you break our data center or turn off",
    "start": "137360",
    "end": "144080"
  },
  {
    "text": "the connection to our data center streaming still works and you know a lot of our outages over the last year have",
    "start": "144080",
    "end": "150000"
  },
  {
    "text": "been the data center broke and took down some piece of cloud functionality so we finally cut those",
    "start": "150000",
    "end": "155360"
  },
  {
    "text": "links so now we're just completely dependent on the on the cloud which we've actually found to be more of highly available",
    "start": "155360",
    "end": "161040"
  },
  {
    "text": "than our data center and i'll talk a bit about how we arrange to do that so why do we use cloud there's all these",
    "start": "161040",
    "end": "167680"
  },
  {
    "text": "things that we didn't want to do um because we we don't have time we get",
    "start": "167680",
    "end": "172879"
  },
  {
    "text": "bored too easily right so you never get stuck with the wrong configuration you you say you know i",
    "start": "172879",
    "end": "178400"
  },
  {
    "text": "need 500 machines with uh 16 gig of ram oh it doesn't really fit",
    "start": "178400",
    "end": "183440"
  },
  {
    "text": "damn well you know i'll take you know this twice the number of cpus let's take 250 machines with 32 gig of ram oh no",
    "start": "183440",
    "end": "190159"
  },
  {
    "text": "problem there we go um just redeploy we don't have to ask permission if you're pushing something",
    "start": "190159",
    "end": "196800"
  },
  {
    "text": "into test if you're allocating systems in test every developer can just",
    "start": "196800",
    "end": "202080"
  },
  {
    "text": "create as many machines as they want in test there's no permissions there's no approval process there's nothing",
    "start": "202080",
    "end": "207680"
  },
  {
    "text": "if you're going to production there's one approval from a manager to say yes i know that this thing is",
    "start": "207680",
    "end": "213360"
  },
  {
    "text": "going into production right that's the only check we have um and really all you have to do is",
    "start": "213360",
    "end": "218560"
  },
  {
    "text": "enter it's a change ticket number is really all it asks you for and you could type anything in that so if you do that too",
    "start": "218560",
    "end": "223920"
  },
  {
    "text": "often and break things we'll perhaps take a fairly dim view of you but so we treat everyone like an adult",
    "start": "223920",
    "end": "229680"
  },
  {
    "text": "and we we assume that the developers aren't know what they're doing and that turns out to give good",
    "start": "229680",
    "end": "235360"
  },
  {
    "text": "responsibility people think about it and that giving people responsibility helps everything",
    "start": "235360",
    "end": "241920"
  },
  {
    "text": "we never run out of space and power we were able to launch in europe by just deploying a thousand machines in ireland",
    "start": "241920",
    "end": "247360"
  },
  {
    "text": "and amazon with a few weeks notice what really didn't give anyone notice it just took us a few weeks to get all the code lined",
    "start": "247360",
    "end": "253200"
  },
  {
    "text": "up and get everyone to push code we didn't have to go hire anybody in ireland and plan stuff and all those",
    "start": "253200",
    "end": "258239"
  },
  {
    "text": "kinds of things and yeah we don't really have an i.t department anymore we i don't have to",
    "start": "258239",
    "end": "263840"
  },
  {
    "text": "have meetings with them to say please can i have some machines and they say it'll take months like it used to um so",
    "start": "263840",
    "end": "271199"
  },
  {
    "text": "there's a whole bunch of sort of i like what i call developer trends or or management buzzwords if you like",
    "start": "271199",
    "end": "276479"
  },
  {
    "start": "272000",
    "end": "392000"
  },
  {
    "text": "there's there's you know how many people are doing big big big data hadoop in production right now",
    "start": "276479",
    "end": "281600"
  },
  {
    "text": "a few of you okay how about amazon cloud in production a few of you uh apm application performance",
    "start": "281600",
    "end": "288720"
  },
  {
    "text": "management anyone doing that it's big news sort of you know things like app dynamics dyna",
    "start": "288720",
    "end": "293919"
  },
  {
    "text": "um dynatrace stuff like that integrated devops people doing all that you know getting their",
    "start": "293919",
    "end": "299440"
  },
  {
    "text": "dev and their ops together okay uh continuous integration delivery okay",
    "start": "299440",
    "end": "304639"
  },
  {
    "text": "that was most of the tracks people learning how to do it no sequel a few people doing no sequel um",
    "start": "304639",
    "end": "312880"
  },
  {
    "text": "what's it going there we are platform as a service fine grain service oriented architecture",
    "start": "312880",
    "end": "318960"
  },
  {
    "text": "like nobody oh i got one person doing fine grain soa the rest of you are going i have a big",
    "start": "318960",
    "end": "324560"
  },
  {
    "text": "application it's just one big thing social coding open development on github do you pull code from github your",
    "start": "324560",
    "end": "331039"
  },
  {
    "text": "your application code that you developed and put on github is that the source of your bill that you put in production",
    "start": "331039",
    "end": "337199"
  },
  {
    "text": "a few of you right so we we've been doing all this stuff you know first time we did this this is",
    "start": "337199",
    "end": "343280"
  },
  {
    "text": "the first year we did this in production so we've done all of these things uh and that's usually why i think you know why i'm up here talking to you",
    "start": "343280",
    "end": "349360"
  },
  {
    "text": "rather than the other way around because we've figured out how to do all this stuff over the last few years and um there's a whole separate",
    "start": "349360",
    "end": "356160"
  },
  {
    "text": "presentation about why netflix gets so far ahead of most of what's going on in the industry which is to do with sort of corporate",
    "start": "356160",
    "end": "362160"
  },
  {
    "text": "culture and brave management and scared engineers being dragged forwards by people that",
    "start": "362160",
    "end": "367680"
  },
  {
    "text": "with crazy ideas and management anyway so i'm going to talk a little bit about um",
    "start": "367680",
    "end": "374960"
  },
  {
    "text": "as i explained this we built everything on top of amazon so with we're doing amazon specific",
    "start": "374960",
    "end": "381840"
  },
  {
    "text": "things that depend upon the features of amazon and so some people go well you're locked",
    "start": "381840",
    "end": "387600"
  },
  {
    "text": "into amazon and there's really two views of this there's the operations focus how many people here",
    "start": "387600",
    "end": "394080"
  },
  {
    "start": "392000",
    "end": "635000"
  },
  {
    "text": "consider themselves operations people so we've got a few okay and then most of you probably developer",
    "start": "394080",
    "end": "399759"
  },
  {
    "text": "people right yeah operations are always worrying about",
    "start": "399759",
    "end": "404880"
  },
  {
    "text": "vendor lock-in data center use cases and cost savings because it's simple to measure cost and",
    "start": "404880",
    "end": "410800"
  },
  {
    "text": "you know you tend to be very cost focused um developers are more focused on getting",
    "start": "410800",
    "end": "416000"
  },
  {
    "text": "stuff done quickly and if you have one mature supplier there's less complex test and debug you",
    "start": "416000",
    "end": "421759"
  },
  {
    "text": "have to test everything twice if you've got two suppliers because you know even if the code and the interfaces are the same you know",
    "start": "421759",
    "end": "427599"
  },
  {
    "text": "it's not going to work quite right on the other supplier it means you get a faster time to market for your products",
    "start": "427599",
    "end": "433280"
  },
  {
    "text": "and your your cost savings come in developer time and i don't need as many developers to",
    "start": "433280",
    "end": "438800"
  },
  {
    "text": "get something done right now netflix sees developer time as the biggest constraint on our business",
    "start": "438800",
    "end": "445280"
  },
  {
    "text": "not operations cost now it may not be true if you're building widgets and you're trying to turn stuff out",
    "start": "445280",
    "end": "450720"
  },
  {
    "text": "cheaper widgets than somebody else but if you're in a rapidly growing sort of technology",
    "start": "450720",
    "end": "457280"
  },
  {
    "text": "innovation business it's how fast can you how many good developers can you find and how",
    "start": "457280",
    "end": "462639"
  },
  {
    "text": "much can they produce becomes how you get ahead in the market so we're focusing on making those",
    "start": "462639",
    "end": "467759"
  },
  {
    "text": "developers as productive as they possibly can and giving them the best possible platform of the most functionality which",
    "start": "467759",
    "end": "473840"
  },
  {
    "text": "is why we built on top of on top of amazon so what we have as an",
    "start": "473840",
    "end": "478879"
  },
  {
    "text": "infrastructure base is every feature of aws including all the ones that we've beaten them up to develop",
    "start": "478879",
    "end": "484639"
  },
  {
    "text": "so they you know they don't have they have missing features we keep pointing out the missing features and amazon listens and maybe six months or a year",
    "start": "484639",
    "end": "490879"
  },
  {
    "text": "later this feature pops out and we meanwhile we've built something that kind of does that so we retire the thing that we built and",
    "start": "490879",
    "end": "497039"
  },
  {
    "text": "use the amazon one the few cases of that um and they're just things like you know",
    "start": "497039",
    "end": "502400"
  },
  {
    "text": "there are amazon clones but they don't have all of the features like there's s3 but it only has five gigabyte files but",
    "start": "502400",
    "end": "508000"
  },
  {
    "text": "we want to put terabyte files in there uh and and when you write a terabyte file you can't just do a put",
    "start": "508000",
    "end": "513599"
  },
  {
    "text": "because it craps out after you know 10 gigabytes and then you have to start again from the beginning",
    "start": "513599",
    "end": "518880"
  },
  {
    "text": "so multi-part it writes basically means you paralyze your multi-thread in chunks",
    "start": "518880",
    "end": "524240"
  },
  {
    "text": "and you write all your chunks and if a chunk fails you only repeat that chunk so if you're doing you know and that's a lot more complicated than",
    "start": "524240",
    "end": "529839"
  },
  {
    "text": "the simple s3 stuff so you get all these deep features and then on top of that we added our own",
    "start": "529839",
    "end": "535519"
  },
  {
    "text": "features large-scale it's again it's mature flexible customizable",
    "start": "535519",
    "end": "540800"
  },
  {
    "text": "we have a console called asgard which replaces the amazon console i'll show you a picture of it later but",
    "start": "540800",
    "end": "545839"
  },
  {
    "text": "that's up on github we have these uh somebody asked earlier you know what's a what's a uh what's a chaos monkey i'll explain",
    "start": "545839",
    "end": "552800"
  },
  {
    "text": "that a bit later but think of like you have demons and a unique on a linux that runs stuff for the operating",
    "start": "552800",
    "end": "558480"
  },
  {
    "text": "system the monkeys are the autonomous services that we run in our cloud and we have",
    "start": "558480",
    "end": "564160"
  },
  {
    "text": "chaos monkeys and janitor monkeys and things like that that tidy stuff up and kill things",
    "start": "564160",
    "end": "570320"
  },
  {
    "text": "and then we spent a lot of time working on cassandra and zookeeper automation to make it trivial for anybody",
    "start": "570480",
    "end": "576080"
  },
  {
    "text": "to deploy a cassandra cluster so at the end of that if you're a developer",
    "start": "576080",
    "end": "582560"
  },
  {
    "text": "i've got an analogy here if you're a rock band and you're about to go on tour and",
    "start": "582560",
    "end": "588240"
  },
  {
    "text": "you're trying to decide who writes the set list is it the roadie or the musician right",
    "start": "588240",
    "end": "593920"
  },
  {
    "text": "let's say you're eddie van halen and you want to take you want you do the settings but this setlist requires an",
    "start": "593920",
    "end": "599920"
  },
  {
    "text": "awful lot of different guitars to play it whereas the roadie would like you just take one guitar",
    "start": "599920",
    "end": "605120"
  },
  {
    "text": "right right so that's the ops guy i want to keep it simple one guitar it's easy i",
    "start": "605120",
    "end": "610160"
  },
  {
    "text": "can get like three copies of them and they'd be identical and everything will just work and it'll make my life easier but eddie wants to play all of the songs",
    "start": "610160",
    "end": "617680"
  },
  {
    "text": "over his whole history and he needs all these cool looking guitars including the weirdly shaped one over there",
    "start": "617680",
    "end": "622720"
  },
  {
    "text": "so really you do need all those guitars on tour and if you're a developer you want to choose the highest functionality platform that will let you build the",
    "start": "622720",
    "end": "629200"
  },
  {
    "text": "richest product in the fastest time now the problem with that",
    "start": "629200",
    "end": "634720"
  },
  {
    "text": "we call freedom and responsibility at netflix developers are leveraging the cloud to get their freedom we have",
    "start": "634720",
    "end": "640800"
  },
  {
    "start": "635000",
    "end": "762000"
  },
  {
    "text": "no silos it's a single organization there's no separate itops organization that constrains what the developers can",
    "start": "640800",
    "end": "647279"
  },
  {
    "text": "do there's no separate product organization we're one integrated product unit that",
    "start": "647279",
    "end": "652959"
  },
  {
    "text": "includes all development and operations needed and at the bottom it just calls amazon apis directly",
    "start": "652959",
    "end": "658640"
  },
  {
    "text": "but now developers are responsible for those things that the ops guys used to look after for you so you've got compliance performance and",
    "start": "658640",
    "end": "665440"
  },
  {
    "text": "availability and all these things you just have to deal with it and and it turns out that you can train",
    "start": "665440",
    "end": "670720"
  },
  {
    "text": "developers to be responsible for compliance performance and availability and there's this nice eddie van halen",
    "start": "670720",
    "end": "676079"
  },
  {
    "text": "quote that he went to rehab and he was able to change and get better at doing these things",
    "start": "676079",
    "end": "681920"
  },
  {
    "text": "there's a version of this slide deck that has van halen references on every single slide because i i did a conference where the guy who ran",
    "start": "681920",
    "end": "688320"
  },
  {
    "text": "the conference was a heavy metal freak um so i'm going to talk briefly about",
    "start": "688320",
    "end": "693680"
  },
  {
    "text": "what is this service because most of you probably haven't seen it but it is coming soon we announced a few months ago that we're",
    "start": "693680",
    "end": "700160"
  },
  {
    "text": "launching in the nordic countries so we're now into october so you know maybe later this month maybe",
    "start": "700160",
    "end": "706640"
  },
  {
    "text": "coming soon a few more weeks you'll see the netflix streaming service now if you go to netflix.com right now",
    "start": "706640",
    "end": "713360"
  },
  {
    "text": "in denmark you get this nice screen here saying please give us your email address and we'll let you know when it's coming",
    "start": "713360",
    "end": "719440"
  },
  {
    "text": "but one of the cool little things you can't really see this down the bottom at the bottom of the page there's something that says",
    "start": "719440",
    "end": "725120"
  },
  {
    "text": "um eu west one and then there's a funny hexadecimal looking thing and then it says decay",
    "start": "725120",
    "end": "732079"
  },
  {
    "text": "so that funny hexadecimal thing if you ever used amazon is an instance id so so that basically we render in the",
    "start": "732079",
    "end": "738639"
  },
  {
    "text": "bottom of the page which um which machines had sent it to you so that is a a amazon ireland",
    "start": "738639",
    "end": "744959"
  },
  {
    "text": "usa eu west one um machine it's kind of little thing i'm sometimes",
    "start": "744959",
    "end": "750959"
  },
  {
    "text": "these things maybe don't come up i have sort of various debug stuff turned on but it's kind of fun",
    "start": "750959",
    "end": "757600"
  },
  {
    "text": "so that's that's what it looks like if you're not a member when you are a member you get something that looks more like this it gives you a whole lot of",
    "start": "757600",
    "end": "763120"
  },
  {
    "start": "762000",
    "end": "789000"
  },
  {
    "text": "movies we have facebook integration so i can see stuff that my friends watch um and uh you know all the things",
    "start": "763120",
    "end": "770959"
  },
  {
    "text": "i've been watching recently and there's a whole lot of bits and pieces there so basically that's the member website it's",
    "start": "770959",
    "end": "776079"
  },
  {
    "text": "basically giving you hundreds of movies to choose from um and trying to pick the ones that will be best for you rather than",
    "start": "776079",
    "end": "782480"
  },
  {
    "text": "just giving you the sort of alphabetical list of every movie we have now that's delivered via another service",
    "start": "782480",
    "end": "788399"
  },
  {
    "text": "we have which is a cdn now we have our own built-in netflix cdm we previously we used akamai limelight",
    "start": "788399",
    "end": "795279"
  },
  {
    "start": "789000",
    "end": "865000"
  },
  {
    "text": "at level three but we've recently augmented that with our own cdn and that's what we're primarily using as we're rolling out new",
    "start": "795279",
    "end": "801440"
  },
  {
    "text": "services so netflix is a hardware company this is the box that we have",
    "start": "801440",
    "end": "806880"
  },
  {
    "text": "it's a hundred terabytes of movies in a box we give it to you for free if you are happen to be an isp with",
    "start": "806880",
    "end": "813279"
  },
  {
    "text": "several gigabits of netflix traffic coming through and that saves you money and saves us money it runs bsd",
    "start": "813279",
    "end": "820480"
  },
  {
    "text": "and we've put we did all of the ipv6 work on this box and we put the fixes back",
    "start": "820480",
    "end": "826480"
  },
  {
    "text": "into bsd we found some bugs in the ipv6 support about half the world's ipv6 traffic runs from these",
    "start": "826480",
    "end": "833519"
  },
  {
    "text": "boxes the other half is youtube and then there's noise on the axis which is yahoo and facebook and everybody else that",
    "start": "833519",
    "end": "840000"
  },
  {
    "text": "does ipv6 but you know about 90 you know 49 of the world's ipv6 is netflix the other four another",
    "start": "840000",
    "end": "846959"
  },
  {
    "text": "49 is is youtube that was sort of world ipv6 day last",
    "start": "846959",
    "end": "852399"
  },
  {
    "text": "last summer um and we've open sourced not only the software for this box but",
    "start": "852399",
    "end": "857440"
  },
  {
    "text": "the hardware design of the box too so this is kind of going open hardware instead of open source",
    "start": "857440",
    "end": "863120"
  },
  {
    "text": "um here's an old picture from a few years ago we now have 800 different streaming devices that we can operate to",
    "start": "863120",
    "end": "868560"
  },
  {
    "start": "865000",
    "end": "887000"
  },
  {
    "text": "digital tvs and things and we've been shipping these digital tvs into europe for a while um and what happens is when you turn on",
    "start": "868560",
    "end": "875279"
  },
  {
    "text": "the service is that their software internally says oh look i do netflix now netflix icon will appear so we have",
    "start": "875279",
    "end": "881600"
  },
  {
    "text": "sleeper code in lots of uh lots of consumer electronics devices going global",
    "start": "881600",
    "end": "887760"
  },
  {
    "start": "887000",
    "end": "912000"
  },
  {
    "text": "so the major services we have we have a non-member site a member site cdns all the backend for controlling and",
    "start": "887760",
    "end": "894480"
  },
  {
    "text": "managing and routing traffic to that cdns or running on the cloud we have apis for internal external",
    "start": "894480",
    "end": "900320"
  },
  {
    "text": "devices and apis for controlling video playback drm qos and all that so all these",
    "start": "900320",
    "end": "906480"
  },
  {
    "text": "services run as fine grain soa on amazon",
    "start": "906480",
    "end": "911680"
  },
  {
    "text": "so this is you know one view of our service each little box here is a different tier it's not a machine it's a group of",
    "start": "911680",
    "end": "918320"
  },
  {
    "start": "912000",
    "end": "937000"
  },
  {
    "text": "machines so this shows the traffic between the different services this is actually just running in our test account",
    "start": "918320",
    "end": "924160"
  },
  {
    "text": "at one point because the production one is even harder to draw and it's got too much stuff on it so some of those boxes might have 500",
    "start": "924160",
    "end": "930399"
  },
  {
    "text": "servers in some might be just five or six something like that if you actually pick one service let's say our web front end",
    "start": "930399",
    "end": "937839"
  },
  {
    "start": "937000",
    "end": "982000"
  },
  {
    "text": "it looks something like this again this is out of our test account so you see it says start that this is a view from app",
    "start": "937839",
    "end": "943680"
  },
  {
    "text": "dynamics which is basically doing java byte code instrumentation and measuring the flows through all of our code",
    "start": "943680",
    "end": "949920"
  },
  {
    "text": "so you see an end user calls the the web service and it's talking to a whole bunch of other bits and pieces um there's a",
    "start": "949920",
    "end": "958879"
  },
  {
    "text": "sim service which finds movies that are similar to other movies and a bunch of other things like that there",
    "start": "959040",
    "end": "966000"
  },
  {
    "text": "now that's the the overall flow but what you really care about is a single request so another thing app dynamics",
    "start": "966000",
    "end": "972000"
  },
  {
    "text": "does is it captures single requests and it sees something slow it'll just grab it so what i can do here is i can click in",
    "start": "972000",
    "end": "977839"
  },
  {
    "text": "on any of these little boxes those little black boxes that drill in and it gives me the stack trace of the",
    "start": "977839",
    "end": "983040"
  },
  {
    "start": "982000",
    "end": "1033000"
  },
  {
    "text": "code and where and which what exactly what http or sql request or whatever it made",
    "start": "983040",
    "end": "988240"
  },
  {
    "text": "or memcached or whatever so you basically you get all the code and you can see what's going on so this is how we drill in and figure out what what's",
    "start": "988240",
    "end": "994399"
  },
  {
    "text": "going on to get some idea it's a very fine grain architecture each of these services does",
    "start": "994399",
    "end": "1000639"
  },
  {
    "text": "one thing so the similar service you give it a user id and a movie id",
    "start": "1000639",
    "end": "1005759"
  },
  {
    "text": "and it returns all the movies which are similar to that movie but filtered for that customer right",
    "start": "1005759",
    "end": "1012880"
  },
  {
    "text": "so if you know you might find a movie like scooby-doo right which adults and kids both like if i do a",
    "start": "1012880",
    "end": "1018399"
  },
  {
    "text": "scooby-doo thing it would get like adult stuff that's like that but if it was a kid that did it it would get the kids stuff right some",
    "start": "1018399",
    "end": "1024720"
  },
  {
    "text": "different things like that so we have a bunch of architectural patterns i'll talk a bit about the",
    "start": "1024720",
    "end": "1030480"
  },
  {
    "text": "availability model here so we have lots of little isolated services that do one thing",
    "start": "1030480",
    "end": "1036558"
  },
  {
    "start": "1033000",
    "end": "1119000"
  },
  {
    "text": "they're stateless and they're replicated horizontally that but to deal with that the developer",
    "start": "1036559",
    "end": "1043120"
  },
  {
    "text": "model is resilient business logic so let's say i'm the i'm the web service and i'm going to call this similar",
    "start": "1043120",
    "end": "1049039"
  },
  {
    "text": "service and say hey give me the movies that are similar to this what happens if i don't get an answer back well i have to write code",
    "start": "1049039",
    "end": "1056000"
  },
  {
    "text": "that assumes that i may never get an answer back from any other service that i call and i have to do something sensible and",
    "start": "1056000",
    "end": "1062000"
  },
  {
    "text": "in this case you just you know the movie the home page has lots of different rows one of the roses are similars row",
    "start": "1062000",
    "end": "1067520"
  },
  {
    "text": "if the similar service is down you don't get those rows you get like normal genres or you get some other",
    "start": "1067520",
    "end": "1073039"
  },
  {
    "text": "kind of rows we just we just drop out things so that it gradually falls back to a less and less personalized experience",
    "start": "1073039",
    "end": "1080000"
  },
  {
    "text": "but it's a gradual degradation you can't really see it happening unless you know exactly what it's supposed to look like",
    "start": "1080000",
    "end": "1086240"
  },
  {
    "text": "we also put everything in three balanced availability zones and i'll draw some pictures of that a bit later",
    "start": "1086240",
    "end": "1091600"
  },
  {
    "text": "and then we triple replicate all of our persistence and i'll explain more about that so i'm giving a",
    "start": "1091600",
    "end": "1096960"
  },
  {
    "text": "talk later tomorrow afternoon in the nosql track about highly available nosql with cassandra and i've got a",
    "start": "1096960",
    "end": "1103919"
  },
  {
    "text": "whole load of slides a lot more slides there about cassandra and how we use that",
    "start": "1103919",
    "end": "1109520"
  },
  {
    "text": "and then we also build our isolated regions so us and europe are separate and don't take each other down",
    "start": "1109520",
    "end": "1115440"
  },
  {
    "text": "so if we go back to that diagram that we had before we test this with the chaos monkey which",
    "start": "1115440",
    "end": "1120960"
  },
  {
    "start": "1119000",
    "end": "1159000"
  },
  {
    "text": "kills individual services so i say i kill that service everything else just keeps working we",
    "start": "1120960",
    "end": "1126559"
  },
  {
    "text": "have a latency monkey which adds latency or makes that service return errors",
    "start": "1126559",
    "end": "1131600"
  },
  {
    "text": "at some rate so i can make it return 500 series error codes or make up an error code and see what happens",
    "start": "1131600",
    "end": "1138080"
  },
  {
    "text": "and the services that called it just have to deal with that or you can insert three second delays or make it never",
    "start": "1138080",
    "end": "1144000"
  },
  {
    "text": "respond occasionally and what happens then is you get the errors and the latency ripple out from that point and",
    "start": "1144000",
    "end": "1149440"
  },
  {
    "text": "the other services have to absorb it we test that in production we test the chaos monkey killing individual",
    "start": "1149440",
    "end": "1155200"
  },
  {
    "text": "instances in production so like i said we have three balanced",
    "start": "1155200",
    "end": "1160480"
  },
  {
    "start": "1159000",
    "end": "1252000"
  },
  {
    "text": "availability zones so there's a load balancer at the top it's feeding all the traffic into zone a b and c",
    "start": "1160480",
    "end": "1166400"
  },
  {
    "text": "which are separate buildings which are around a millisecond apart right so they're separate data centers",
    "start": "1166400",
    "end": "1171679"
  },
  {
    "text": "within amazon's environment um there are us east has five zones europe has three zones",
    "start": "1171679",
    "end": "1177360"
  },
  {
    "text": "so you pick three of those and where the all the communication between zones",
    "start": "1177360",
    "end": "1183039"
  },
  {
    "text": "uh if this is set up completely correctly according to the architecture which of course it isn't quite but it's near enough",
    "start": "1183039",
    "end": "1188960"
  },
  {
    "text": "for most cases you do all the replication side to side at the cassandra and caching layers so the",
    "start": "1188960",
    "end": "1194480"
  },
  {
    "text": "persistence layers the stateful services talk sideways to make sure that that state exists in all",
    "start": "1194480",
    "end": "1199919"
  },
  {
    "text": "three zones all the stateless services just talk amongst themselves so if we lose an entire zone when",
    "start": "1199919",
    "end": "1205679"
  },
  {
    "text": "there's a power outage which has happened occasionally the the load balancers have two comp you",
    "start": "1205679",
    "end": "1210880"
  },
  {
    "text": "know two-thirds of the capacity still there and everything should still work i got two copies of the data",
    "start": "1210880",
    "end": "1216880"
  },
  {
    "text": "uh when the data comes back i can you know copy the data back get everything back in sync and keep running again",
    "start": "1216880",
    "end": "1223760"
  },
  {
    "text": "but or i can basically just turn off the traffic so i'm no longer sending traffic to that zone",
    "start": "1223760",
    "end": "1229679"
  },
  {
    "text": "and then you know it'll be clean i should then have no errors now if this works right we get a",
    "start": "1229679",
    "end": "1234880"
  },
  {
    "text": "slightly higher error rate for about two or three minutes after losing like a power outage on a",
    "start": "1234880",
    "end": "1239919"
  },
  {
    "text": "third of our capacity right when it goes wrong it takes out the whole thing but that's bugs",
    "start": "1239919",
    "end": "1245280"
  },
  {
    "text": "the way it's supposed to work is that it's supposed to keep working and it has done that a bunch of times now if we look at the persistence layer",
    "start": "1245280",
    "end": "1253360"
  },
  {
    "start": "1252000",
    "end": "1335000"
  },
  {
    "text": "um when we're doing maintenance on cassandra like updating a cassandra cluster we have a continuous",
    "start": "1253360",
    "end": "1259919"
  },
  {
    "text": "operation which is updating nodes with the newer version of cassandra or doing maintenance on them and so it",
    "start": "1259919",
    "end": "1265440"
  },
  {
    "text": "takes a cassandra note out of service now that's three copies of the data so what that means is that i'm effectively",
    "start": "1265440",
    "end": "1271840"
  },
  {
    "text": "losing one copy of the data that is in that local zone i still have two other copies",
    "start": "1271840",
    "end": "1277200"
  },
  {
    "text": "so what what happens then is while it's under maintenance um we stop replicating traffic to it and",
    "start": "1277200",
    "end": "1283440"
  },
  {
    "text": "any machine that's in that tries to talk to that particular persistent store goes and gets the data from the other zones",
    "start": "1283440",
    "end": "1289360"
  },
  {
    "text": "okay so it's that but this is happening all the time we don't need to test this because we're walking",
    "start": "1289360",
    "end": "1294880"
  },
  {
    "text": "around our because we have the new version of cassandra every two months so we got very good at upgrading it automatically we have jenkins jobs that",
    "start": "1294880",
    "end": "1301039"
  },
  {
    "text": "do nothing but upgrade cassandra so we have about 600 cassandra instances and about 60 distinct clusters and i don't know why",
    "start": "1301039",
    "end": "1308480"
  },
  {
    "text": "we have 60 clusters except that we made it trivially easy for developers to deploy clusters",
    "start": "1308480",
    "end": "1313760"
  },
  {
    "text": "and if you make something trivially easily you get a lot of it right so i yeah with a few clicks on a website",
    "start": "1313760",
    "end": "1320880"
  },
  {
    "text": "i you know not really that much of a developer nowadays i can deploy an arbitrary large cassandra cluster",
    "start": "1320880",
    "end": "1326559"
  },
  {
    "text": "just go please make one and it comes up and it appears about five minutes later",
    "start": "1326559",
    "end": "1332320"
  },
  {
    "text": "so then we have us in europe and they it's a clone right we have three things so you see my",
    "start": "1332320",
    "end": "1337760"
  },
  {
    "start": "1335000",
    "end": "1575000"
  },
  {
    "text": "little diagram i i have now have six complete copies of all my data i have six copies six batches of every",
    "start": "1337760",
    "end": "1344159"
  },
  {
    "text": "service but i have traffic from europe going into the right traffic from the us going to the left something like a 10 to 1 ratio right now",
    "start": "1344159",
    "end": "1351039"
  },
  {
    "text": "although the european site is growing you know proportionately faster than the us site so there that's",
    "start": "1351039",
    "end": "1357039"
  },
  {
    "text": "gradually that ratio is decreasing and then we have global replication between the two and this is",
    "start": "1357039",
    "end": "1364240"
  },
  {
    "text": "done across the public internet with you know ssl protected and tls basically between them",
    "start": "1364240",
    "end": "1369679"
  },
  {
    "text": "so it's encrypted on the back ends but the cassandra has a way of finding the nodes in the other cl and the other cloud and we have security",
    "start": "1369679",
    "end": "1376159"
  },
  {
    "text": "groups set up and stuff like that so basically what that means is that anything i write into europe",
    "start": "1376159",
    "end": "1382159"
  },
  {
    "text": "within a second or so will actually be in the us it's sort of you know 100 milliseconds 150",
    "start": "1382159",
    "end": "1388159"
  },
  {
    "text": "milliseconds latency so it's just whatever however many round trips it took to send the data uh",
    "start": "1388159",
    "end": "1393600"
  },
  {
    "text": "what that means is that if you sign up as a member of netflix in europe and you when that happens we write the",
    "start": "1393600",
    "end": "1400640"
  },
  {
    "text": "data in europe but it spreads to everywhere in the world so if you then visit america on vacation",
    "start": "1400640",
    "end": "1407280"
  },
  {
    "text": "or for a business trip you should just use netflix you're already a member of netflix you're a global member so it's a global",
    "start": "1407280",
    "end": "1412880"
  },
  {
    "text": "membership model it's like sort of ebay or something i mean there are members everywhere in the world and you just sign up once and you're",
    "start": "1412880",
    "end": "1419039"
  },
  {
    "text": "done um okay so if the network between the us",
    "start": "1419039",
    "end": "1425200"
  },
  {
    "text": "and europe goes down temporarily or gets slow or whatever everything just keeps working both sides",
    "start": "1425200",
    "end": "1430640"
  },
  {
    "text": "work independently this is if you think cap theorem says ap right partition and i'm available both",
    "start": "1430640",
    "end": "1436559"
  },
  {
    "text": "sides are available i can write into both sides i can continue to sign up members and later on it goes away and",
    "start": "1436559",
    "end": "1443120"
  },
  {
    "text": "cassandra's anti-entropy mechanisms kick in and everything gets back in sync again and when we lost the entire zone we",
    "start": "1443120",
    "end": "1450000"
  },
  {
    "text": "didn't have to europe didn't go down we lost the zone in the us and uh and we didn't have to deal with it",
    "start": "1450000",
    "end": "1455840"
  },
  {
    "text": "when the u.s came back it just cleaned itself back up we have some manually sequenced jobs but",
    "start": "1455840",
    "end": "1461360"
  },
  {
    "text": "it's mostly jenkins jobs at this jenkins processors that run around sequencing when we do repairs",
    "start": "1461360",
    "end": "1468320"
  },
  {
    "text": "now if we lose an entire region the other region still works so that's the way we currently work so",
    "start": "1468320",
    "end": "1473760"
  },
  {
    "text": "let's look at that in terms of failure modes and effects um i've got the failure mode probability",
    "start": "1473760",
    "end": "1479360"
  },
  {
    "text": "of it which i rate as high if it happens every week because we deploy new code very",
    "start": "1479360",
    "end": "1484840"
  },
  {
    "text": "aggressively and we just deal with it it's low",
    "start": "1484840",
    "end": "1490080"
  },
  {
    "text": "if we you know basically hardly ever see it and or have never seen it and it's medium if it happens often enough that",
    "start": "1490080",
    "end": "1496559"
  },
  {
    "text": "we want to be able to have a mitigation strategy for it so if the application fails that's the",
    "start": "1496559",
    "end": "1502880"
  },
  {
    "text": "circuit breaker pattern or dependency command as we call it um basically your software just has to",
    "start": "1502880",
    "end": "1508799"
  },
  {
    "text": "be able to deal with the fact that everyone you're calling might might be dead and it may be because they just push some code and that code's broken",
    "start": "1508799",
    "end": "1515200"
  },
  {
    "text": "and they didn't realize and they'll they'll be broken for a couple of minutes before they realize and then they'll switch it back",
    "start": "1515200",
    "end": "1521039"
  },
  {
    "text": "so that's kind of we we have very rapid rollback set up um and it's as soon as you tell so we we",
    "start": "1521039",
    "end": "1528240"
  },
  {
    "text": "the way we push codes we we let's say we have 500 api servers and we have a new build we'll we'll",
    "start": "1528240",
    "end": "1534000"
  },
  {
    "text": "create 500 new api servers with the new code well actually the first thing we'll do is we'll create a a sample of a canary",
    "start": "1534000",
    "end": "1540880"
  },
  {
    "text": "server we call it of the new code that and then if the canary survives we'll make more of them and then we'll",
    "start": "1540880",
    "end": "1549039"
  },
  {
    "text": "point all the traffic at the new ones but we leave the old ones there at least through that night's peak traffic so about eight hours 12 hours",
    "start": "1549039",
    "end": "1555360"
  },
  {
    "text": "they automatically disappear 12 hours later that's when the janitor monkey cleans them up or something like that",
    "start": "1555360",
    "end": "1561039"
  },
  {
    "text": "various mechanisms for doing that but the idea is that the old code is still sitting there and the machines are warmed up and ready they're just not",
    "start": "1561039",
    "end": "1567360"
  },
  {
    "text": "taking any traffic and if anything goes wrong with the new ones you can flip the load balancer back to it immediately",
    "start": "1567360",
    "end": "1575919"
  },
  {
    "start": "1575000",
    "end": "1725000"
  },
  {
    "text": "let me see region failure it's it's happened occasionally and it's typically there was a routing",
    "start": "1576720",
    "end": "1582559"
  },
  {
    "text": "error which took out the entire region because it black hole routed all of us east for about half an hour every",
    "start": "1582559",
    "end": "1589919"
  },
  {
    "text": "outbound packet could not leave you could send traffic to it but you never got anything back so that is a",
    "start": "1589919",
    "end": "1594960"
  },
  {
    "text": "total region outage but as soon as they fixed the routing everything came back and no machines were harmed in this it",
    "start": "1594960",
    "end": "1601440"
  },
  {
    "text": "was just no traffic that's really the only region level outage that we've seen",
    "start": "1601440",
    "end": "1606960"
  },
  {
    "text": "most of the other outages that people have called like oh the entire amazon region went down was actually a zone going down that",
    "start": "1606960",
    "end": "1614000"
  },
  {
    "text": "caused a bunch of websites that were based in that zone to go down",
    "start": "1614000",
    "end": "1619120"
  },
  {
    "text": "and the last outage we had was because we had a bug and we didn't correctly handle the case of of losing at one zone",
    "start": "1619120",
    "end": "1627679"
  },
  {
    "text": "so zone failure we say medium we we intend to be able to run out of two or three zones we have a chaos gorilla which is the",
    "start": "1627679",
    "end": "1634559"
  },
  {
    "text": "bigger version of the chaos monkey which is designed to kill an entire zone and see if everything runs and we we",
    "start": "1634559",
    "end": "1640799"
  },
  {
    "text": "last time there was a major amazon outage was just before we were about to test that case and we didn't find the bug in time so it's kind of",
    "start": "1640799",
    "end": "1647360"
  },
  {
    "text": "annoying but um yeah the chaos gorilla is an interesting interesting thing to test it's also",
    "start": "1647360",
    "end": "1654880"
  },
  {
    "text": "capable of moving our all of our infrastructure to a different zone so amazon has five zones so we're",
    "start": "1654880",
    "end": "1661440"
  },
  {
    "text": "running in three of them if one of the ones we're using breaks the chaos gorilla has a mode where it moves",
    "start": "1661440",
    "end": "1666960"
  },
  {
    "text": "if all of our infrastructure from that zone into a different zone and you have to reprogram all of the load balancers",
    "start": "1666960",
    "end": "1672480"
  },
  {
    "text": "and everything let me see data center failure happens",
    "start": "1672480",
    "end": "1677760"
  },
  {
    "text": "reasonably often we've basically been moving everything to the cloud because our data center turns out is less reliable and",
    "start": "1677760",
    "end": "1683840"
  },
  {
    "text": "the machines we have in there things like oracle goes down or corrupts data and you have to wait for it to come back and that's",
    "start": "1683840",
    "end": "1689520"
  },
  {
    "text": "kind of annoying data store failure we haven't really",
    "start": "1689520",
    "end": "1695039"
  },
  {
    "text": "lost anything out of cassandra but we do continuous backups i'll talk more about that tomorrow",
    "start": "1695039",
    "end": "1701440"
  },
  {
    "text": "we can restore from s3 it's a single rest call will cause a cassandra cluster to restore itself to",
    "start": "1701440",
    "end": "1706880"
  },
  {
    "text": "a point in time very very tidy and then if s3 fails which again is we've never seen we have a remote copy",
    "start": "1706880",
    "end": "1714320"
  },
  {
    "text": "of all that data which and we have another copy isn't even on amazon at all so we just have our backup files and we",
    "start": "1714320",
    "end": "1719679"
  },
  {
    "text": "keep them um on the other side of the country and everything so the actual deployment and the the",
    "start": "1719679",
    "end": "1727600"
  },
  {
    "start": "1725000",
    "end": "1983000"
  },
  {
    "text": "rollout we took the first thing we started processing on amazon was the the videos themselves so we're getting",
    "start": "1727600",
    "end": "1733679"
  },
  {
    "text": "all these videos in and as we got more and more videos we have to re-encode them into like the xbox format and the apple tv format",
    "start": "1733679",
    "end": "1740399"
  },
  {
    "text": "and the the the consumer tv formats and then and we they're all wanted slightly different formats so we have to",
    "start": "1740399",
    "end": "1746960"
  },
  {
    "text": "reprocess all of our videos and we make we don't do any dynamic we're not re re-encoding them on the fly",
    "start": "1746960",
    "end": "1754799"
  },
  {
    "text": "we're doing very high quality in code so we're putting a lot of effort a lot of cpu time into getting the best",
    "start": "1754799",
    "end": "1760320"
  },
  {
    "text": "possible picture at the lowest possible bandwidth right that it's worth spending longer because",
    "start": "1760320",
    "end": "1765919"
  },
  {
    "text": "we have enough customers that we know we're going to be showing that video stream lots of times if you do on",
    "start": "1765919",
    "end": "1771279"
  },
  {
    "text": "the flying coding which is sometimes used particularly for mobile because it's relatively low bandwidth and there are too many different types",
    "start": "1771279",
    "end": "1777600"
  },
  {
    "text": "of mobile devices you tend to get much lower quality in codes that way that feeds cdns goes out through the",
    "start": "1777600",
    "end": "1784960"
  },
  {
    "text": "isps and the data rate we are feeding to our customers is measured in terabits",
    "start": "1784960",
    "end": "1790960"
  },
  {
    "text": "it it's still measured in terabits at 4 a.m our low point in our graph is still",
    "start": "1790960",
    "end": "1796799"
  },
  {
    "text": "terabits right where the high point is lots of terabits and the last number we saw was 32",
    "start": "1796799",
    "end": "1803279"
  },
  {
    "text": "percent of the total u.s bandwidth to customers",
    "start": "1803279",
    "end": "1808799"
  },
  {
    "text": "like 32 percent of the internet capacity at peak evening netflix watching time is",
    "start": "1808799",
    "end": "1814960"
  },
  {
    "text": "just netflix streaming movies to people in the us i believe in",
    "start": "1814960",
    "end": "1820559"
  },
  {
    "text": "three months in the uk we were two percent of the total uk traffic that was after three months",
    "start": "1820559",
    "end": "1826640"
  },
  {
    "text": "of launch and after about about nine months in the uk we have a million customers so i'm not sure how",
    "start": "1826640",
    "end": "1832799"
  },
  {
    "text": "many so we're probably several percent now um youtube's about ten percent of u.s",
    "start": "1832799",
    "end": "1838320"
  },
  {
    "text": "bandwidth who lose about two percent or two or three percent uh and bittorrent's about",
    "start": "1838320",
    "end": "1843919"
  },
  {
    "text": "ten percent so we're several times bigger than bitter okay so we did that",
    "start": "1843919",
    "end": "1851279"
  },
  {
    "text": "once we had everything running at volume we had too many logs so that didn't fit in the data center we moved log processing to the cloud that's when we",
    "start": "1851279",
    "end": "1857279"
  },
  {
    "text": "started using hadoop and that was in 2009 then we put the apis that handle the playback and drm in",
    "start": "1857279",
    "end": "1864159"
  },
  {
    "text": "the cloud because we were getting too much of that traffic um and then in 2010 we had this big race",
    "start": "1864159",
    "end": "1870399"
  },
  {
    "text": "and we had these slide decks with pictures of aircraft trying to take off and big explosions at the end of the",
    "start": "1870399",
    "end": "1875679"
  },
  {
    "text": "runway and says okay you have to that we we didn't have a backup plan it's like no we are not going to build another",
    "start": "1875679",
    "end": "1881360"
  },
  {
    "text": "data center we know we don't have enough capacity to run the website by the end of this year right",
    "start": "1881360",
    "end": "1888960"
  },
  {
    "text": "and we are not going to build that capacity and you have to make it work in the cloud before the end of the year",
    "start": "1888960",
    "end": "1894799"
  },
  {
    "text": "right so this was the the oncoming thing and we just got up right so like just before",
    "start": "1894799",
    "end": "1900320"
  },
  {
    "text": "christmas we got the last service out of the out of the data center um that we had to",
    "start": "1900320",
    "end": "1905600"
  },
  {
    "text": "um and that really got everybody's attention and like focused on making it happen um so that that worked",
    "start": "1905600",
    "end": "1913360"
  },
  {
    "text": "pretty well in the end um it's almost all cassandra at this point the rating system still runs on my",
    "start": "1913360",
    "end": "1919120"
  },
  {
    "text": "sequel that's actually a very old application and they're in the middle of re rebuilding it to run on cassandra",
    "start": "1919120",
    "end": "1925600"
  },
  {
    "text": "that's the only customer facing app we have running on my sql and if this if it breaks we actually the",
    "start": "1925600",
    "end": "1932080"
  },
  {
    "text": "site works without it it's the thing that tells you how many stars each movie is should be for you it's a personalized star rating um and",
    "start": "1932080",
    "end": "1939519"
  },
  {
    "text": "we just the stars just we do without them we just they disappear from the ui",
    "start": "1939519",
    "end": "1944640"
  },
  {
    "text": "um then we got the api out and then finally in 2011 with that",
    "start": "1944640",
    "end": "1949919"
  },
  {
    "text": "things like customer service started con transferring to the cloud and in 2012 we've been moving billing",
    "start": "1949919",
    "end": "1955840"
  },
  {
    "text": "we're relatively get getting somewhat close to doing a pci pci dss",
    "start": "1955840",
    "end": "1961120"
  },
  {
    "text": "in the cloud that's probably going to happen start happening in the next six months to a year",
    "start": "1961120",
    "end": "1966240"
  },
  {
    "text": "um and we're already doing socks compliance which is those of you in the u.s know about socks compliance so that's already happening in the cloud",
    "start": "1966240",
    "end": "1973360"
  },
  {
    "text": "all right so i'm going to talk a bit about some of the patterns that we've been using here",
    "start": "1973360",
    "end": "1978799"
  },
  {
    "text": "and to start with um we're going to go look at the goals so we started off with this code in the",
    "start": "1978799",
    "end": "1984240"
  },
  {
    "start": "1983000",
    "end": "2148000"
  },
  {
    "text": "data center this is about three years ago and we had team of about 12 people",
    "start": "1984240",
    "end": "1990000"
  },
  {
    "text": "that we took off of all the other projects and and i was managing most of them and i managed this this process and",
    "start": "1990000",
    "end": "1995279"
  },
  {
    "text": "that's how i ended up as this cloud architect kind of thing but i was a development manager then and",
    "start": "1995279",
    "end": "2001760"
  },
  {
    "text": "this was what i wrote down three years ago um says we want to be faster there was a different vp asking for each of",
    "start": "2001760",
    "end": "2007519"
  },
  {
    "text": "these like one vp wanted it to be faster i want lower latency the guy cares about product",
    "start": "2007519",
    "end": "2013360"
  },
  {
    "text": "um then the guy who was kept worrying about getting us into the cloud",
    "start": "2013360",
    "end": "2018640"
  },
  {
    "text": "we can't use any more data center capacity we don't want to buy anymore we don't do any build out we have to do this in the cloud",
    "start": "2018640",
    "end": "2025120"
  },
  {
    "text": "and we have to have no central vertically scaled databases we needed better availability and my",
    "start": "2025120",
    "end": "2033039"
  },
  {
    "text": "manager in particular was saying we need to optimize for agility of a large developer team",
    "start": "2033039",
    "end": "2038320"
  },
  {
    "text": "and leave behind this eight-year-old tangled code base where it really was one big blob of code where everything was all integrated every two weeks and",
    "start": "2038320",
    "end": "2045279"
  },
  {
    "text": "we'd sort of try and debug it for another week and then chuck it over the wall and hope it worked",
    "start": "2045279",
    "end": "2050960"
  },
  {
    "text": "so we went to this clean layered reusable component model and i came up with this list of",
    "start": "2051119",
    "end": "2057320"
  },
  {
    "text": "anti-architecture things because one of the things i found with working with developers is if you say please build this",
    "start": "2057320",
    "end": "2063358"
  },
  {
    "text": "they will build that or something that looks like that and they'll tack on all these interesting things around the edge that they thought of",
    "start": "2063359",
    "end": "2069679"
  },
  {
    "text": "quite often things that you didn't want that's why you didn't ask for them so what you have to do and this works quite",
    "start": "2069679",
    "end": "2076240"
  },
  {
    "text": "well is as i say i don't care what you build but i wanted to occupy this space and i'm going to surround you by",
    "start": "2076240",
    "end": "2081638"
  },
  {
    "text": "anti-architecture right i have a little slide deck on this i did once so these are the things i",
    "start": "2081639",
    "end": "2088560"
  },
  {
    "text": "want you to not do and if you can remember those then and and even if you can't remember why you can",
    "start": "2088560",
    "end": "2095118"
  },
  {
    "text": "come say oh adrian said don't do something don't make my instances stateful i wonder why he said that",
    "start": "2095119",
    "end": "2100480"
  },
  {
    "text": "because i want to do a stateful one because i used to do that and then maybe they'll come and talk to you about why and after a while this gets you know",
    "start": "2100480",
    "end": "2106800"
  },
  {
    "text": "everyone gets it in their heads and it becomes sort of culturally just part of the pattern but when we're trying to establish this pattern",
    "start": "2106800",
    "end": "2113359"
  },
  {
    "text": "it was quite controversial that we were going to do stateless instances and we weren't going to do cookie-based routing",
    "start": "2113359",
    "end": "2118480"
  },
  {
    "text": "um it was sort of controversial that we weren't going that we were going to do nosql and putting session data in memcache and",
    "start": "2118480",
    "end": "2126560"
  },
  {
    "text": "things like that so it was this was something that took a while",
    "start": "2126560",
    "end": "2132560"
  },
  {
    "text": "and that works out to be quite a useful approach i want to talk about instrumented code i",
    "start": "2132560",
    "end": "2138000"
  },
  {
    "text": "mean most people write things in their code even if it's just printf everywhere or you know whatever the equivalent whatever language you're",
    "start": "2138000",
    "end": "2144079"
  },
  {
    "text": "doing you're printing out stuff but we had all this code that everyone was instrumenting but they were",
    "start": "2144079",
    "end": "2149119"
  },
  {
    "start": "2148000",
    "end": "2241000"
  },
  {
    "text": "instrumenting it their own code as they wrote it what we did for the cloud was we moved from",
    "start": "2149119",
    "end": "2155680"
  },
  {
    "text": "having the unit of integration being a jar file where everyone built their own jar file",
    "start": "2155680",
    "end": "2160960"
  },
  {
    "text": "and then the qa people tried to integrate them all so everyone built a service a rest service so you had to design your own",
    "start": "2160960",
    "end": "2167760"
  },
  {
    "text": "rest interface but everyone was using the same base serverlet and we instrumented that base serverlet",
    "start": "2167760",
    "end": "2173839"
  },
  {
    "text": "with an annotatable object and you just annotated your thing and it was the same object spitting out of this",
    "start": "2173839",
    "end": "2179599"
  },
  {
    "text": "thing through like log4j streams off into the into our back end it all turns up in hive or wherever or",
    "start": "2179599",
    "end": "2185040"
  },
  {
    "text": "wherever you want to analyze it with the same names on the same columns and you know you end up with a very stable",
    "start": "2185040",
    "end": "2191160"
  },
  {
    "text": "pre-defined way of of producing things and that means that you even if you write add no instrumentation at all to",
    "start": "2191160",
    "end": "2198000"
  },
  {
    "text": "your system it's already instrumented because all of the the libraries and the the things you're all the all of the",
    "start": "2198000",
    "end": "2204400"
  },
  {
    "text": "building blocks you're using are all pre-instrumented and that that makes it the instrumentation patterns make it much easier to build",
    "start": "2204400",
    "end": "2210800"
  },
  {
    "text": "tooling that can then use those patterns to give you nice visualizations of what's going on",
    "start": "2210800",
    "end": "2216079"
  },
  {
    "text": "and if somebody ignores the standard patterns then they get annoyed that they don't have tooling",
    "start": "2216079",
    "end": "2221200"
  },
  {
    "text": "then eventually that kind of it sticks and carrots right this is the carrot approach to getting people to follow patterns you build tooling for the",
    "start": "2221200",
    "end": "2227440"
  },
  {
    "text": "pattern and then people use the pattern because they want to use the tooling",
    "start": "2227440",
    "end": "2232720"
  },
  {
    "text": "okay so let's talk about this chaos monkey we did a tech blog post because we've open sourced this recently",
    "start": "2233200",
    "end": "2240560"
  },
  {
    "text": "computers die data center computers die you know if you're running low-cost",
    "start": "2240560",
    "end": "2245839"
  },
  {
    "start": "2241000",
    "end": "2343000"
  },
  {
    "text": "commodity stuff it dies more often but even the expensive stuff dies so",
    "start": "2245839",
    "end": "2250960"
  },
  {
    "text": "the problem is that most developers like to think of the machine they're coding to as being a perfect machine that works",
    "start": "2250960",
    "end": "2256800"
  },
  {
    "text": "because that's your normal experience and it's annoying when they die so you don't want to just keep unplugging your laptop or pulling the",
    "start": "2256800",
    "end": "2262160"
  },
  {
    "text": "battery out in the middle of coding just to see what happens right but in order to test the error handling",
    "start": "2262160",
    "end": "2268480"
  },
  {
    "text": "code that you've built you have to inject failure and what we're doing here with the chaos",
    "start": "2268480",
    "end": "2273599"
  },
  {
    "text": "monkey is in a distributed fine grain soa killing individual instances is is a way",
    "start": "2273599",
    "end": "2280480"
  },
  {
    "text": "of injecting that kind of failure mode so between 9 am and 3 pm every weekday",
    "start": "2280480",
    "end": "2286800"
  },
  {
    "text": "we randomly pick a machine in production and we kill it of you know it just randomly picks stuff",
    "start": "2286800",
    "end": "2292480"
  },
  {
    "text": "and then in test it does the same thing but at a higher rate because there are fewer machines and",
    "start": "2292480",
    "end": "2297520"
  },
  {
    "text": "you can opt out if you're in the middle of debugging something and something's in a certain state sometimes you forget which is annoying but",
    "start": "2297520",
    "end": "2303119"
  },
  {
    "text": "but you opt that one out so it doesn't get killed underneath you and we made this a default on and it was",
    "start": "2303119",
    "end": "2309040"
  },
  {
    "text": "one of the first services we set up so as people started to develop in the cloud there was always a chaos monkey",
    "start": "2309040",
    "end": "2314079"
  },
  {
    "text": "there right you can't put it in as the last thing you do before you go live because it will discover all of the bad things",
    "start": "2314079",
    "end": "2319680"
  },
  {
    "text": "that you've been sneaking in there and there's a nice little chaos monkey logo",
    "start": "2319680",
    "end": "2324960"
  },
  {
    "text": "that somebody amazon made some nice t-shirts with cow's monkeys on too i may wear that tomorrow",
    "start": "2324960",
    "end": "2332319"
  },
  {
    "text": "all right so this sort of chaos monkey idea spawned a whole lot of what we call the simeon army",
    "start": "2333040",
    "end": "2338560"
  },
  {
    "text": "of monkeys so we have many of them now and we're open sourcing more of them soon",
    "start": "2338560",
    "end": "2344640"
  },
  {
    "start": "2343000",
    "end": "2494000"
  },
  {
    "text": "okay so if we make developers responsible for failures then and wake them up at 3am when they",
    "start": "2344960",
    "end": "2351040"
  },
  {
    "text": "write broken code that breaks at 3am then they learn to write code that doesn't break",
    "start": "2351040",
    "end": "2356240"
  },
  {
    "text": "um and you know it's possible i mean if you don't learn to then you probably just leave either or",
    "start": "2356240",
    "end": "2362400"
  },
  {
    "text": "get pushed to leave but generally speaking you end up with a team of developers who can go",
    "start": "2362400",
    "end": "2368800"
  },
  {
    "text": "really fast because they're not having to deal with other people getting in their way but they're responsible for what",
    "start": "2368800",
    "end": "2374480"
  },
  {
    "text": "they're doing use incident reviews to find gaps to fix make sure there's no blame in the room",
    "start": "2374480",
    "end": "2380079"
  },
  {
    "text": "nobody gets upset in an incident review it's all about okay what do we how can we fix what continue it's either",
    "start": "2380079",
    "end": "2387440"
  },
  {
    "text": "you give somebody the wrong context or the information wasn't there there's there's always a good reason if somebody's incompetent two or three times in a row",
    "start": "2387440",
    "end": "2394240"
  },
  {
    "text": "it's better you know we'll find a way to get rid of them right but that doesn't happen that often",
    "start": "2394240",
    "end": "2400079"
  },
  {
    "text": "um so a couple of things that you figure out one is that there's a natural tendency when when you",
    "start": "2400079",
    "end": "2405280"
  },
  {
    "text": "notice things timing out is to extend your timeout it's actually better to shorten your timeout because it's much better to turn",
    "start": "2405280",
    "end": "2412480"
  },
  {
    "text": "a timeout into an error the sooner you turn something that's slow into an exception",
    "start": "2412480",
    "end": "2419040"
  },
  {
    "text": "the system just behaves better with propagating errors through it than propagating latency because what",
    "start": "2419040",
    "end": "2424079"
  },
  {
    "text": "happens when something gets too much latency in it is you start tying up all your threads and everything gums up and you start",
    "start": "2424079",
    "end": "2429920"
  },
  {
    "text": "affecting the ability for other services that would otherwise have succeeded to get into your system",
    "start": "2429920",
    "end": "2436240"
  },
  {
    "text": "so be very careful about that and the other thing is to make all your configuration options dynamic you don't want to have to push code to tweak the",
    "start": "2436240",
    "end": "2442960"
  },
  {
    "text": "timeout on a service or turn off a feature or something like that and we have we built a and we've open",
    "start": "2442960",
    "end": "2449119"
  },
  {
    "text": "sourced a hierarchical dynamic configuration system called archives and what this gives us is the ability to",
    "start": "2449119",
    "end": "2455520"
  },
  {
    "text": "apply override configuration at any level of granularity i can do a global override",
    "start": "2455520",
    "end": "2460640"
  },
  {
    "text": "to everywhere that we have this service deployed i can do it to one instance in one zone or i can do it all the",
    "start": "2460640",
    "end": "2467119"
  },
  {
    "text": "instances in zone a or i can do it to all the instances in europe so it's got a hierarchy",
    "start": "2467119",
    "end": "2472800"
  },
  {
    "text": "and a series of overrides and defaults and we do it's actually the back end we have for",
    "start": "2472800",
    "end": "2478480"
  },
  {
    "text": "that is actually a cassandra cluster which runs in all of these different zones so you change this property and it propagates through",
    "start": "2478480",
    "end": "2484800"
  },
  {
    "text": "cassandra and then every every region uses it um if you are if you've been following",
    "start": "2484800",
    "end": "2491760"
  },
  {
    "text": "michael nygard's release release it book that's a really popular book in this audience",
    "start": "2491760",
    "end": "2497200"
  },
  {
    "start": "2494000",
    "end": "2602000"
  },
  {
    "text": "there's a circuit breaker pattern in there again we did a we have a i mentioned this book to some of our",
    "start": "2497200",
    "end": "2503040"
  },
  {
    "text": "developers and they read it and went off and implemented circuit breakers and we're we're the guy was supposed to open",
    "start": "2503040",
    "end": "2509760"
  },
  {
    "text": "source this but he keeps getting busy so we're we're going to be open sourcing our implementation this you know java circuit breaker thing which basically",
    "start": "2509760",
    "end": "2516480"
  },
  {
    "text": "kicks off a thread runs a future calls the you know wraps up the dependency library in this in this",
    "start": "2516480",
    "end": "2522720"
  },
  {
    "text": "future thread and uh if it if it fails there's a fallback methods and it's got all of the",
    "start": "2522720",
    "end": "2527839"
  },
  {
    "text": "other stuff and then it's got a monitoring thing that gives you one second granularity updates of the state of each circuit",
    "start": "2527839",
    "end": "2533760"
  },
  {
    "text": "breaker so you can see in real time which circuit breakers are failing this was the api front-end team team's approach to not",
    "start": "2533760",
    "end": "2541440"
  },
  {
    "text": "getting woken up at 3am because one of their dependencies had broken and of course the errors always turn up",
    "start": "2541440",
    "end": "2546640"
  },
  {
    "text": "at the front so they built this as a defense mechanism to point the finger at no it's these guys that are broken",
    "start": "2546640",
    "end": "2553280"
  },
  {
    "text": "you can leave them sleeping nicely whereas these guys that built a bad library or a bad service get the call because the",
    "start": "2553280",
    "end": "2559200"
  },
  {
    "text": "guys who figure out who to phone have this tool that points the finger very accurately who actually is",
    "start": "2559200",
    "end": "2564800"
  },
  {
    "text": "causing the problem right now and i won't walk through this whole thing that's it's a very the guy that",
    "start": "2564800",
    "end": "2571200"
  },
  {
    "text": "did this uh ben christensen is a really cool developer and he was",
    "start": "2571200",
    "end": "2576480"
  },
  {
    "text": "there's a video i think of him he was at kukan brazil kukon sao paulo so there's probably a",
    "start": "2576480",
    "end": "2581839"
  },
  {
    "text": "video of him giving this talk if uh up online right now",
    "start": "2581839",
    "end": "2586880"
  },
  {
    "text": "so we're going to build our own platform out of all these components and um you know i got a nice van halen picture",
    "start": "2586880",
    "end": "2592319"
  },
  {
    "text": "he's got his guitar collection they're all look slightly similar but they've all got the same picture so it's a pattern right pattern-based",
    "start": "2592319",
    "end": "2598079"
  },
  {
    "text": "approach to building your own guitars the components you need so we've got to",
    "start": "2598079",
    "end": "2603200"
  },
  {
    "start": "2602000",
    "end": "2677000"
  },
  {
    "text": "build code we have a continuous build system jenkins-based that turns code into amis our unit of",
    "start": "2603200",
    "end": "2608800"
  },
  {
    "text": "provisioning is an ami we're not using puppet or chef we use yum once",
    "start": "2608800",
    "end": "2614079"
  },
  {
    "text": "and that makes our ami and then we tell amazon please make 500 of them",
    "start": "2614079",
    "end": "2619359"
  },
  {
    "text": "and everything's pre-installed there's no yum yum can't fail because i've already done it right",
    "start": "2619359",
    "end": "2625680"
  },
  {
    "text": "amazon accounts we split our accounts by test production across those things so we have the same",
    "start": "2625760",
    "end": "2631440"
  },
  {
    "text": "account running in europe europe and the us and wherever right we have a production account",
    "start": "2631440",
    "end": "2636880"
  },
  {
    "text": "that's global but then we have a test account that's global right so that's how it works you could",
    "start": "2636880",
    "end": "2642560"
  },
  {
    "text": "slice the other way but that seems to work best for us we have a gateway i'll show you what that means for getting into the cloud if",
    "start": "2642560",
    "end": "2648240"
  },
  {
    "text": "you want to log in that gives us some auditing and controls there we have a service registry",
    "start": "2648240",
    "end": "2653440"
  },
  {
    "text": "configuration property service a bunch of persistent services you could have monitoring alert forwarding backups and archives and",
    "start": "2653440",
    "end": "2660160"
  },
  {
    "text": "that's the basic platform pieces with all those pieces then you can just start deploying code and building your own service on top",
    "start": "2660160",
    "end": "2667599"
  },
  {
    "text": "so there's a talk by brian moyles and gareth bales on slideshare",
    "start": "2667599",
    "end": "2672880"
  },
  {
    "text": "which is from a jenkins conference or something this is what our build pipeline looks like",
    "start": "2672880",
    "end": "2679599"
  },
  {
    "start": "2677000",
    "end": "2736000"
  },
  {
    "text": "we've got we build from perforce we've been using perforce for many years now we've started using github because",
    "start": "2679680",
    "end": "2685680"
  },
  {
    "text": "it's out there and we have an internal git repository as well so the system basically goes and pulls the data out of github puts it in the",
    "start": "2685680",
    "end": "2692000"
  },
  {
    "text": "front into the build pipeline chunks it through so if you want to deploy new code to production",
    "start": "2692000",
    "end": "2697440"
  },
  {
    "text": "for one of our open source projects most cases it's not always crew but most cases you",
    "start": "2697440",
    "end": "2702560"
  },
  {
    "text": "put the code into you test it locally but the production version you actually put it into",
    "start": "2702560",
    "end": "2708480"
  },
  {
    "text": "the open source repository and then it flows back down through when we use it",
    "start": "2708480",
    "end": "2714560"
  },
  {
    "text": "okay so you know the standard steps within jenkins sync resolve check compile build then we publish the",
    "start": "2715599",
    "end": "2721520"
  },
  {
    "text": "components which are jar files or whatever in artifactory and then yum pulls those out and",
    "start": "2721520",
    "end": "2726720"
  },
  {
    "text": "basically has built rpms and yeah we we stick it into our are currently centos but we're also",
    "start": "2726720",
    "end": "2733440"
  },
  {
    "text": "moving to using ubuntu soon so the architecture that this runs on is that there's a master in our data",
    "start": "2733440",
    "end": "2740079"
  },
  {
    "start": "2736000",
    "end": "2790000"
  },
  {
    "text": "center because we had to start somewhere and we didn't have cloud you get a lip you got to bootstrap yourself",
    "start": "2740079",
    "end": "2746319"
  },
  {
    "text": "and that runs a bunch of slaves that are also in our data center but we kept running out of capacity and these guys said we're cloud people we",
    "start": "2746319",
    "end": "2752560"
  },
  {
    "text": "can figure this out so they use amazon vpc to create dynamic build slaves in the cloud that are an extension of our data",
    "start": "2752560",
    "end": "2760000"
  },
  {
    "text": "center-based build system right so whenever we do a complete rebuild and we need you know 1 500 jobs",
    "start": "2760000",
    "end": "2765520"
  },
  {
    "text": "up here it'll just spin up an arbitrary number of cloud-based machines and if one gets idle for half an hour it",
    "start": "2765520",
    "end": "2771280"
  },
  {
    "text": "just quits and goes away and that kills itself right so that's basically the model uh the",
    "start": "2771280",
    "end": "2776640"
  },
  {
    "text": "software for doing that we call it dynaslave and that's on our list of things we're going to open source",
    "start": "2776640",
    "end": "2781920"
  },
  {
    "text": "fairly soon later this year later later this quarter now so there's a bunch of things we're doing",
    "start": "2781920",
    "end": "2788720"
  },
  {
    "text": "we've been using ivy for our dependency mapping we sort of poke at maven a little bit uh and then",
    "start": "2788720",
    "end": "2794079"
  },
  {
    "start": "2790000",
    "end": "2819000"
  },
  {
    "text": "we've ended up sort of migrating everything to gradle which is sort of the best of both and that's that's our current approach",
    "start": "2794079",
    "end": "2801680"
  },
  {
    "text": "and we use a lot of groovy grails kind of stuff in-house anyway so we've just ended up using groovy as uh",
    "start": "2801680",
    "end": "2806880"
  },
  {
    "text": "so java shop you end up using groovy as your kind of fallback language for a bunch of things",
    "start": "2806880",
    "end": "2812160"
  },
  {
    "text": "um so this again will be part of the open sourcing i think",
    "start": "2812160",
    "end": "2818319"
  },
  {
    "text": "so the bakery basically creates these base ami so well the first step in the bakery is that about once a month we",
    "start": "2818319",
    "end": "2823839"
  },
  {
    "start": "2819000",
    "end": "2897000"
  },
  {
    "text": "create a new base ami that contains all the latest patches and stuff that we care about and built-in monitoring tools",
    "start": "2823839",
    "end": "2829520"
  },
  {
    "text": "and stuff and then everything that you then build is installed on top of that base ami",
    "start": "2829520",
    "end": "2834960"
  },
  {
    "text": "so uh like it's got tomcat apache and all that stuff so on top of that the",
    "start": "2834960",
    "end": "2840880"
  },
  {
    "text": "build process takes the base ami and just drops in yeah drops in your war file or whatever else",
    "start": "2840880",
    "end": "2846319"
  },
  {
    "text": "you wanted mounts it mounts an ebs snapshot installs and bakes it",
    "start": "2846319",
    "end": "2851680"
  },
  {
    "text": "and it bakes into tests so all of our build system produces code that goes amis that go to test",
    "start": "2851680",
    "end": "2857119"
  },
  {
    "text": "once you've figured out that that's working code and you like it there is a rebate operation that that",
    "start": "2857119",
    "end": "2863200"
  },
  {
    "text": "applies script level that modifications and changes some environment variables and takes that ami and makes a",
    "start": "2863200",
    "end": "2869839"
  },
  {
    "text": "production version of that ami and then you ought to scale that into production right so the build system",
    "start": "2869839",
    "end": "2875200"
  },
  {
    "text": "never genera never goes directly to part product always goes through test",
    "start": "2875200",
    "end": "2880800"
  },
  {
    "text": "and there's a bakery in each region because ami's are and the s3 stuff is regional",
    "start": "2880800",
    "end": "2887280"
  },
  {
    "text": "okay so the accounts we set up we're isolating concerns with each account so we've got a test account for development",
    "start": "2887280",
    "end": "2893280"
  },
  {
    "text": "and test we have a tagging operat mechanism so that an individual developer can say",
    "start": "2893280",
    "end": "2898880"
  },
  {
    "start": "2897000",
    "end": "3030000"
  },
  {
    "text": "well i want this these two or three services to be my special version that i'm working on but the rest of these 300 different services i'll",
    "start": "2898880",
    "end": "2905920"
  },
  {
    "text": "just use the generic ones right so that that gives us a way to flow your co your traffic",
    "start": "2905920",
    "end": "2911599"
  },
  {
    "text": "through a a purpose-built stack because we've got a few hundred developers sharing this environment um and then in production",
    "start": "2911599",
    "end": "2920480"
  },
  {
    "text": "it's auto-scale groups only there are no isolated instances in fact the monkeys in prague if they",
    "start": "2920480",
    "end": "2926240"
  },
  {
    "text": "see an isolated instance that is not part of an autoscale group they will terminate it that teaches you not to do that fairly",
    "start": "2926240",
    "end": "2932640"
  },
  {
    "text": "quickly they will you know they don't wait or argue they just say no they're the architecturally everything must be in an auto-scale group and if you're not",
    "start": "2932640",
    "end": "2939440"
  },
  {
    "text": "you shouldn't be here so that's implementing policy in code you're doing it together you can shout",
    "start": "2939440",
    "end": "2945440"
  },
  {
    "text": "at the monkey but he doesn't care um let me see what else have we got",
    "start": "2945440",
    "end": "2952559"
  },
  {
    "text": "we have an audit a separate account for audit so you want to if you're going to be audited for stocks",
    "start": "2952559",
    "end": "2957760"
  },
  {
    "text": "or pci you want to keep that that concern as small as possible so we've got like 10 000 machines in our",
    "start": "2957760",
    "end": "2963680"
  },
  {
    "text": "regular account this one's got maybe 100 less than 100 machines and there's a few developers that have the special ldap group and the",
    "start": "2963680",
    "end": "2970160"
  },
  {
    "text": "special privileges and they've and they can get into those machines uh and then we've had the people have been",
    "start": "2970160",
    "end": "2975280"
  },
  {
    "text": "like a positive background check that can actually get into the vault where they keep the credit cards and all that kind",
    "start": "2975280",
    "end": "2980480"
  },
  {
    "text": "of stuff so you know you've got to have more and more access controls and more auditing to get access into these",
    "start": "2980480",
    "end": "2985520"
  },
  {
    "text": "systems but you know 99 of our code and developers don't need to touch that and they don't deploy to that system so we",
    "start": "2985520",
    "end": "2991680"
  },
  {
    "text": "can leave it very open and free to for them to work what do whatever they want then we have a separate account for",
    "start": "2991680",
    "end": "2997440"
  },
  {
    "text": "disaster recovery and archives that is a read write but no delete and it uses s3 in the overwrite mode so",
    "start": "2997440",
    "end": "3004880"
  },
  {
    "text": "you can't delete something by overwriting it it just stacks the versions right and then it times everything out after a",
    "start": "3004880",
    "end": "3010559"
  },
  {
    "text": "few months and that's where we keep our archives on the other you know we put them in a different we archive into a different region",
    "start": "3010559",
    "end": "3016960"
  },
  {
    "text": "and it's a different account with different credentials so you can't sort of crack the account and then get into this",
    "start": "3016960",
    "end": "3022160"
  },
  {
    "text": "one and we encrypt the data we put there too just because we're paranoid i guess",
    "start": "3022160",
    "end": "3029520"
  },
  {
    "start": "3030000",
    "end": "3130000"
  },
  {
    "text": "reservations there's some interesting things that people are still trying to figure out with amazon but you can combine all your accounts into one bill",
    "start": "3030240",
    "end": "3036880"
  },
  {
    "text": "and you can pull capacity to get bigger volume discounts and reservations there's a couple of",
    "start": "3036880",
    "end": "3042319"
  },
  {
    "text": "cool things you can do but just by using reservations you get a 71 discount once you get",
    "start": "3042319",
    "end": "3047440"
  },
  {
    "text": "a few million dollars worth of volume there's additional discounts on top of that so if you're putting a substantial",
    "start": "3047440",
    "end": "3052800"
  },
  {
    "text": "amount of traffic into amazon it's like any enterprise vendor at this point you're into increasingly large",
    "start": "3052800",
    "end": "3058000"
  },
  {
    "text": "discounts so don't look at the list published list price and assume that that's the the price at volume you can get you can",
    "start": "3058000",
    "end": "3065200"
  },
  {
    "text": "get it down you also get priority with reservations so if i've got an unused reservation i",
    "start": "3065200",
    "end": "3070800"
  },
  {
    "text": "say please give me that machine you're guaranteed to get that machine precision to you if you're doing the on-demand thing and they happen to be",
    "start": "3070800",
    "end": "3076960"
  },
  {
    "text": "out of stock then you can say you can get back a little error sorry we don't have any of them left kind of thing but if you reserved it you",
    "start": "3076960",
    "end": "3083280"
  },
  {
    "text": "get it um and then this very cool thing which may if you don't get this and you and you",
    "start": "3083280",
    "end": "3089599"
  },
  {
    "text": "care about it talk to me later unused reservations are shared among accounts so we have unused reservations in",
    "start": "3089599",
    "end": "3096559"
  },
  {
    "text": "production because we're that's where we want our extra capacity to be we want to always guarantee them",
    "start": "3096559",
    "end": "3102079"
  },
  {
    "text": "but we have all these machines in test that it's just fluctuating capacity and when",
    "start": "3102079",
    "end": "3107680"
  },
  {
    "text": "at the end of the month the unused reservations in production are applied to the machines we have in",
    "start": "3107680",
    "end": "3112960"
  },
  {
    "text": "tests so we actually end up using you know getting a big discount on our test machines",
    "start": "3112960",
    "end": "3118319"
  },
  {
    "text": "right but i'm getting the benefit of the reservations in production it's a neat trick and anyway that's",
    "start": "3118319",
    "end": "3124720"
  },
  {
    "text": "don't worry about it if you didn't get what i was talking about um so we have a bunch of developers and",
    "start": "3124720",
    "end": "3130079"
  },
  {
    "start": "3130000",
    "end": "3264000"
  },
  {
    "text": "they want to get in uh everyone's been to kings cross in london and the anyone's into",
    "start": "3130079",
    "end": "3135440"
  },
  {
    "text": "um all the harry harry potter stuff that's actually they have this sign up on the thing because",
    "start": "3135440",
    "end": "3141760"
  },
  {
    "text": "station between uh platform nine and platform ten there is actually a a wall with platform nine and a half or",
    "start": "3141760",
    "end": "3148079"
  },
  {
    "text": "three quarters or whatever it's written on it so it seems like a good gateway thing",
    "start": "3148079",
    "end": "3153440"
  },
  {
    "text": "so we have all these different products let's say i have my web server service and i have a data access layer",
    "start": "3153440",
    "end": "3159359"
  },
  {
    "text": "service and i have a cassandra service and all of the security groups are set up for them to be able to talk to each",
    "start": "3159359",
    "end": "3164880"
  },
  {
    "text": "other and i want to ssh in and mess with one of these or watch or run vmstat or",
    "start": "3164880",
    "end": "3169920"
  },
  {
    "text": "something like that if i log into the front end i can then the ssh i can't get to a different",
    "start": "3169920",
    "end": "3177280"
  },
  {
    "text": "service i can only be in one instance i can only get to my instances through the gateway which means i can",
    "start": "3177280",
    "end": "3183520"
  },
  {
    "text": "audit log everybody that ever logs in everyone that ever copies data back and",
    "start": "3183520",
    "end": "3188960"
  },
  {
    "text": "forth so we have a history and we use this in production but for the auditable audit account this is",
    "start": "3188960",
    "end": "3194400"
  },
  {
    "text": "quite important we can track because we can control and we can see what's going on we don't stop you doing it but we we log everything so",
    "start": "3194400",
    "end": "3200960"
  },
  {
    "text": "we know who logged into which service and what they did and whether they copied anything back and forth right and",
    "start": "3200960",
    "end": "3206000"
  },
  {
    "text": "that's very useful if something weird happens and you find that the system's in a weird state you can find",
    "start": "3206000",
    "end": "3211040"
  },
  {
    "text": "who did it and ask them why they did it and you know it's not usually for like malicious reasons it's usually somebody didn't",
    "start": "3211040",
    "end": "3217280"
  },
  {
    "text": "realize that they were doing something that would break it um but the key thing here is that the",
    "start": "3217280",
    "end": "3223040"
  },
  {
    "text": "security groups on the individual machines only trust the gateway they don't trust each other and that's",
    "start": "3223040",
    "end": "3229040"
  },
  {
    "text": "we always set it up that way everyone's used to it and um it's a neat way of configuring",
    "start": "3229040",
    "end": "3234079"
  },
  {
    "text": "everything so let's add some code um how much time have i got",
    "start": "3234079",
    "end": "3240400"
  },
  {
    "text": "am i out of time yeah okay let's see i'll go a bit quicker this is",
    "start": "3242079",
    "end": "3250000"
  },
  {
    "text": "our github account which we made using some netflix things but these are the um different apps we have",
    "start": "3250000",
    "end": "3258160"
  },
  {
    "text": "uh let's go through we have well we have all the different phases so image baking asgs",
    "start": "3258160",
    "end": "3264559"
  },
  {
    "start": "3264000",
    "end": "3278000"
  },
  {
    "text": "launching registering configuration all the runtime stuff says asgard",
    "start": "3264559",
    "end": "3271440"
  },
  {
    "text": "i got a summary thing somewhere there we go so this is the open source projects we",
    "start": "3271599",
    "end": "3278240"
  },
  {
    "start": "3278000",
    "end": "3435000"
  },
  {
    "text": "have and i can't even read it on my screen here can i make this bigger um",
    "start": "3278240",
    "end": "3286240"
  },
  {
    "text": "all right so we have um prim is cassandra as a service i can",
    "start": "3286240",
    "end": "3293359"
  },
  {
    "text": "deploy a cassandra cluster trivially it automatically configures everything astronax is a client library all the",
    "start": "3293359",
    "end": "3299680"
  },
  {
    "text": "ones that are in red are currently on github um it's an improvement if anyone's been doing cassandra they may probably using",
    "start": "3299680",
    "end": "3306000"
  },
  {
    "text": "hector which is the standard java client we there were a bunch of things that weren't working well for us so we wrote",
    "start": "3306000",
    "end": "3311280"
  },
  {
    "text": "our own cast jmeter is a test suite it's a modified jmeter for for putting stress testing and then we",
    "start": "3311280",
    "end": "3318079"
  },
  {
    "text": "have zookeeper and zookeeper patterns a discovery service like a service registry",
    "start": "3318079",
    "end": "3324720"
  },
  {
    "text": "a dynamic property service that i mentioned we have auto scaling scripts which basically let you publish",
    "start": "3324720",
    "end": "3330160"
  },
  {
    "text": "business metric into amazon so you can use as an auto scaling metric",
    "start": "3330160",
    "end": "3335599"
  },
  {
    "text": "log4j streaming asgard is this massive console big groovy grails app and then we have",
    "start": "3335599",
    "end": "3342880"
  },
  {
    "text": "the chaos monkey so those are the ones that we've got out already we've had blog posts about ev",
    "start": "3342880",
    "end": "3348000"
  },
  {
    "text": "cache and circuit breaker but those are going to come out as code as well pretty soon we have an",
    "start": "3348000",
    "end": "3354079"
  },
  {
    "text": "explorers framework which is uh all of the consoles and dashboards you need to view everything there's a cassandra",
    "start": "3354079",
    "end": "3359520"
  },
  {
    "text": "explorer that lets you see all the clusters and see the schemas and rummage around and see what's going on so it's",
    "start": "3359520",
    "end": "3365119"
  },
  {
    "text": "um anyone here use juice google juice for dependency injection so that's",
    "start": "3365119",
    "end": "3371200"
  },
  {
    "text": "governator's coming out soon that's uh we've got there's a big mess of trying to figure out how you initialize",
    "start": "3371200",
    "end": "3377119"
  },
  {
    "text": "everything in the right order and we're just re-engineering everything right now to be based on governator which is a juiced version of",
    "start": "3377119",
    "end": "3383359"
  },
  {
    "text": "juice sort of um odin we've got asgard and odin we ran out of greek god so we started doing",
    "start": "3383359",
    "end": "3389599"
  },
  {
    "text": "norse guards or one of the groups decided to there's a workflow orchestration piece",
    "start": "3389599",
    "end": "3395520"
  },
  {
    "text": "entry points is a interesting service it's a log of the state of the system of",
    "start": "3395599",
    "end": "3401440"
  },
  {
    "text": "everything in the cloud with a full history so i can say exactly what state was the site was everything in",
    "start": "3401440",
    "end": "3406799"
  },
  {
    "text": "at this point in time and there's a bunch of the monkeys tend to rummage around in that it's all database",
    "start": "3406799",
    "end": "3413040"
  },
  {
    "text": "service um latency air injection a more",
    "start": "3413040",
    "end": "3418079"
  },
  {
    "text": "sophisticated middle tier load balancer uh janitor monkey goes and cleans up amazon",
    "start": "3418079",
    "end": "3423440"
  },
  {
    "text": "resources that you haven't used for a while the whole bakery and dinosaurs i've mentioned",
    "start": "3423440",
    "end": "3428960"
  },
  {
    "text": "um so that's basically we've got what we're working on next i",
    "start": "3428960",
    "end": "3436000"
  },
  {
    "start": "3435000",
    "end": "3483000"
  },
  {
    "text": "mean we've been working through this year on resiliency um more automation hardening lower",
    "start": "3436000",
    "end": "3441440"
  },
  {
    "text": "latency open sourcing everything for everybody um getting more ipv6 work through",
    "start": "3441440",
    "end": "3448000"
  },
  {
    "text": "everything and we're going to be our goal is to get as much of this out as possible by the end of november",
    "start": "3448000",
    "end": "3453760"
  },
  {
    "text": "which is where amazon has a huge conference in las vegas called aws re invent",
    "start": "3453760",
    "end": "3459839"
  },
  {
    "text": "we've got i think more than 10 netflix people presenting including our ceo who's doing a talk on",
    "start": "3459839",
    "end": "3465520"
  },
  {
    "text": "the future of cloud and we saw an internal version of that and half that he knew more about cloud",
    "start": "3465520",
    "end": "3470799"
  },
  {
    "text": "than half the engineers in the audience so it was kind of interesting so that's that's it",
    "start": "3470799",
    "end": "3476559"
  },
  {
    "text": "basically so done sorry about going over",
    "start": "3476559",
    "end": "3482000"
  },
  {
    "start": "3483000",
    "end": "3497000"
  },
  {
    "text": "time",
    "start": "3486839",
    "end": "3489839"
  },
  {
    "text": "okay",
    "start": "3495480",
    "end": "3498480"
  }
]