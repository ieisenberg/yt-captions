[
  {
    "start": "0",
    "end": "56000"
  },
  {
    "text": "[Music]",
    "start": "2550",
    "end": "12440"
  },
  {
    "text": "wow I haven't even done anything yet and I'm getting Applause this is awesome um so yeah as uh as was just said I'm going",
    "start": "12440",
    "end": "18760"
  },
  {
    "text": "to be talking today about emulating a 6502 system in JavaScript um so first of all a little",
    "start": "18760",
    "end": "25480"
  },
  {
    "text": "bit about myself uh my name is Matt godbolt I work for a fabulous Trading Company here in Chicago called drw um",
    "start": "25480",
    "end": "33440"
  },
  {
    "text": "I'm contractually obliged to say we're hiring come speak to us so if this talk is interesting to you I can't promise",
    "start": "33440",
    "end": "38600"
  },
  {
    "text": "that we use 62s anywhere in our trading stack but we do have similarly interesting things to do so come talk to",
    "start": "38600",
    "end": "44559"
  },
  {
    "text": "me afterwards or there's Katie who's waving at the back there who's uh can tell you a lot more about what we do",
    "start": "44559",
    "end": "51879"
  },
  {
    "text": "anyway so emulating a 6502 system let's just go full screen there we are um well",
    "start": "51879",
    "end": "58359"
  },
  {
    "text": "first of all this slide is far far too high-tech Let's uh let's go back you",
    "start": "58359",
    "end": "64960"
  },
  {
    "text": "remember this kind of stuff all right so first of all who has ever used a 6502",
    "start": "64960",
    "end": "70000"
  },
  {
    "text": "based computer yeah a fair number of you I guess probably you wouldn't be here if",
    "start": "70000",
    "end": "75439"
  },
  {
    "text": "uh you would uh if you hadn't um so what is a 6502 it is this it's an 8bit",
    "start": "75439",
    "end": "84920"
  },
  {
    "start": "81000",
    "end": "198000"
  },
  {
    "text": "computer first made in uh 1975 so it's just a a little bit older than me um",
    "start": "84920",
    "end": "93040"
  },
  {
    "text": "3,510 transistors drawn out and laid out by hand by just a a small team of people",
    "start": "93040",
    "end": "101640"
  },
  {
    "text": "crawling over a large piece of acetate like you would like for an op and drawing in marker pen to where all the",
    "start": "101640",
    "end": "107960"
  },
  {
    "text": "tracks would go and then lith lithographically sh shrunk down to sort of this size um which is I just think",
    "start": "107960",
    "end": "115000"
  },
  {
    "text": "unbelievable I mean in our my day job at the moment we do a little bit of uh uh like fpga development type stuff and the",
    "start": "115000",
    "end": "121159"
  },
  {
    "text": "tooling behind that is amazing but just the thing that human beings were doing this is just incredible um if it's not",
    "start": "121159",
    "end": "127640"
  },
  {
    "text": "when it's not naked oh hang on a second I have just had an auntu thing pop up on my screen there we go when it's not",
    "start": "127640",
    "end": "134000"
  },
  {
    "text": "denuded of its uh uh plastic case it looks like this it's got thousands of pins on the outside but it's actually",
    "start": "134000",
    "end": "140480"
  },
  {
    "text": "just a tiny tiny little thing in the inside of there um so these these uh",
    "start": "140480",
    "end": "145560"
  },
  {
    "text": "chips are important because in the 1980s um there the 6502 along with the Z8 um",
    "start": "145560",
    "end": "152440"
  },
  {
    "text": "was responsible really for the 1980s boom in home Computing it was an affordable chip it was powerful um and",
    "start": "152440",
    "end": "160360"
  },
  {
    "text": "um certainly for me it was uh it came at the time when uh computers were sort of",
    "start": "160360",
    "end": "166239"
  },
  {
    "text": "picking up and uh I suppose directly led to me be being here in front of you you know becoming a computer programmer and",
    "start": "166239",
    "end": "172560"
  },
  {
    "text": "I'll talk a little bit more about that in the second so um I actually contacted over Twitter the people who still have",
    "start": "172560",
    "end": "178840"
  },
  {
    "text": "the patents and the rights for the 6502 and I said have you got any idea how many of these are in existence thinking it would be you know a few hundred",
    "start": "178840",
    "end": "184680"
  },
  {
    "text": "thousand I was thinking how many how many computers with them there would be made you know maybe 100,000 maybe a half",
    "start": "184680",
    "end": "190360"
  },
  {
    "text": "half a million or something but apparently more than 10 billion of these things have been produced by just one company so there's probably much more",
    "start": "190360",
    "end": "196959"
  },
  {
    "text": "than that out there it's pretty incredible so what kind of computers was the 6502 in well here you can see we've",
    "start": "196959",
    "end": "203360"
  },
  {
    "start": "198000",
    "end": "263000"
  },
  {
    "text": "got the Apple 2 we've got the Atari 800 and the Atari um 2600 the BBC micro and",
    "start": "203360",
    "end": "211080"
  },
  {
    "text": "there also is the Commodore pet the Commodore 64 uh the Vic 20 um it was also in the",
    "start": "211080",
    "end": "217840"
  },
  {
    "text": "original Nintendo Entertainment System the Nez uh it was in the Tamagotchi virtual pet if you ever have one of",
    "start": "217840",
    "end": "224000"
  },
  {
    "text": "those really really irritating things um it was also powering the Terminator uh",
    "start": "224000",
    "end": "230760"
  },
  {
    "text": "in The Terminator films according to if you freeze frame like within the first 5 minutes if you remember like with the",
    "start": "230760",
    "end": "236760"
  },
  {
    "text": "the sort of text scrolling down the screen that just looks like random computer brid if you freeze frame that it's actually part of the Apple 2 boot",
    "start": "236760",
    "end": "242560"
  },
  {
    "text": "bootloader that's been disassembled so it's 6502 and uh apparently it's also what powers Bender from future",
    "start": "242560",
    "end": "249360"
  },
  {
    "text": "armor but uh the computer that I'm interested in talking to you about which is sort of ironic because here I am in",
    "start": "249360",
    "end": "255040"
  },
  {
    "text": "Chicago talking to a largely American audience is a sort of strange British",
    "start": "255040",
    "end": "260519"
  },
  {
    "text": "computer called the BBC micro it uh the BBC micro was made by a",
    "start": "260519",
    "end": "265639"
  },
  {
    "start": "263000",
    "end": "437000"
  },
  {
    "text": "company called acorn in 1981 and it was part of the BBC's um computer literacy program so that's the",
    "start": "265639",
    "end": "272199"
  },
  {
    "text": "BBC like the uh um Broadcasting Corporation British Broadcasting Corporation they decided that they",
    "start": "272199",
    "end": "277400"
  },
  {
    "text": "wanted to run a whole series of educational programs explaining what this new fangled Computing thing was why",
    "start": "277400",
    "end": "284479"
  },
  {
    "text": "it was important and in order to do that they thought that they should have like a a sponsored computer system to go",
    "start": "284479",
    "end": "290479"
  },
  {
    "text": "alongside the the the TV um shows so they put out to Tender this idea of like an affordable sort of hackable I guess",
    "start": "290479",
    "end": "296720"
  },
  {
    "text": "we'd say nowadays uh computer system and company called Acorn came up with the winning design and uh they uh they",
    "start": "296720",
    "end": "304479"
  },
  {
    "text": "produced this computer and as a result of that TV series it became one of the more popular systems in the UK and uh if",
    "start": "304479",
    "end": "310919"
  },
  {
    "text": "you go on YouTube you can actually go and see the the computer program with the British prog r a m m spelling um and",
    "start": "310919",
    "end": "318520"
  },
  {
    "text": "they are universally Dreadful programs now but you know it's they were there right at the beginning and and it certainly got a lot of people interested",
    "start": "318520",
    "end": "324240"
  },
  {
    "text": "in it it also meant that there were tons of these around in like schools so a lot of people in the UK for this is their",
    "start": "324240",
    "end": "330280"
  },
  {
    "text": "first idea about what a computer is this sort of creamish box with the bright red keys on the top um as a sort of Side",
    "start": "330280",
    "end": "337039"
  },
  {
    "text": "Story just quickly um the company Acorn went on to make other computers after this and uh as a testament to how",
    "start": "337039",
    "end": "343840"
  },
  {
    "text": "hackable the BBC micro was you know here we are in 1981 and as part of the design there was a sort of second processor bus",
    "start": "343840",
    "end": "351240"
  },
  {
    "text": "that you could connect other processors onto so they had like another 6502 as a sort of daughter card or you could get",
    "start": "351240",
    "end": "357440"
  },
  {
    "text": "even an 8088 or um some of the other 16-bit computer um chips that were around but",
    "start": "357440",
    "end": "364800"
  },
  {
    "text": "acon themselves decided that they were going to make their own processor for their next generation of computers they thought that actually they could do a",
    "start": "364800",
    "end": "370360"
  },
  {
    "text": "good job and sort of inspired by the 6502 Simplicity and its design they came up with a 32-bit processor that was",
    "start": "370360",
    "end": "377680"
  },
  {
    "text": "originally spiked out and was a second processor to the BBC micro um they",
    "start": "377680",
    "end": "383840"
  },
  {
    "text": "called this the acorn risk machine and many many years later when the acorn",
    "start": "383840",
    "end": "389680"
  },
  {
    "text": "company itself folded that company that they spun off to look after the IP for that chip was renamed to Advanced risk",
    "start": "389680",
    "end": "395880"
  },
  {
    "text": "machines and I'm guaranteeing that there's probably a couple of hundred of those things in this room right now powering all of our iPhones and our",
    "start": "395880",
    "end": "401440"
  },
  {
    "text": "Androids so in in many ways this computer is The Logical ancestor of the chip that's inside your uh your your",
    "start": "401440",
    "end": "408319"
  },
  {
    "text": "phone so the beep had 32k of RAM and 32k of ROM it ran at 2 MHz a whole 2 MHz and",
    "start": "408319",
    "end": "415319"
  },
  {
    "text": "the hardware attached to it the way the 6502 works it didn't have instructions that were uniquely able to talk to",
    "start": "415319",
    "end": "421520"
  },
  {
    "text": "Hardware um you just simply wrote to sort of magic memory addresses and those M magic memory addresses on the bus",
    "start": "421520",
    "end": "428039"
  },
  {
    "text": "would sort of map out to actual physical Hardware so to like read and write to the keyboard you would just write to uh",
    "start": "428039",
    "end": "433440"
  },
  {
    "text": "read and write from um particular addresses um why is it so important to me well I guess in many ways I've",
    "start": "433440",
    "end": "439560"
  },
  {
    "start": "437000",
    "end": "543000"
  },
  {
    "text": "already explained that and sort of following on from the talk we had earlier here about how getting kids into",
    "start": "439560",
    "end": "444840"
  },
  {
    "text": "programming when I was growing up the way that you got into programming is that you had your computer you saved up",
    "start": "444840",
    "end": "450400"
  },
  {
    "text": "your pocket money maybe you bought a game every now and then maybe you did some illicit trading of copied games in",
    "start": "450400",
    "end": "456440"
  },
  {
    "text": "the playground sh um but more importantly every every month you would",
    "start": "456440",
    "end": "462080"
  },
  {
    "text": "go and buy one of the magazines that you could get from the news agent and you would read all about the latest games",
    "start": "462080",
    "end": "469080"
  },
  {
    "text": "and you would read all about the latest sort of things that your were coming out for your computer and at the back would be the to of half of the magazine would",
    "start": "469080",
    "end": "475599"
  },
  {
    "text": "be printouts that you would just type in and so there would be games there would be um examples of like this one here is",
    "start": "475599",
    "end": "481919"
  },
  {
    "text": "a fractal like um rendering thing and um you would learn how to program sort of",
    "start": "481919",
    "end": "487479"
  },
  {
    "text": "by osmosis You' type in these things or you get your mom to read it out to you you tap it away you would type run it",
    "start": "487479",
    "end": "493599"
  },
  {
    "text": "would inevitably not work you'd sort of see the syntax error and you go and you look at the listing and you discover that it was a colon and not a semicolon",
    "start": "493599",
    "end": "500080"
  },
  {
    "text": "or all these kinds of things but um but sort of then you learn how to",
    "start": "500080",
    "end": "505199"
  },
  {
    "text": "primitively how to debug so um I got pretty good at typing the things and I learned a lot about this and uh this",
    "start": "505199",
    "end": "512640"
  },
  {
    "text": "particular oh sugar I've just pressed too many times there we are there it is um this particular magazine article",
    "start": "512640",
    "end": "518680"
  },
  {
    "text": "there one I wrote myself with my my good friend from school um used to get 50 Quid for sorry 50 which is what like $80",
    "start": "518680",
    "end": "526440"
  },
  {
    "text": "for submitting a program that got published in the magazine so that kept us in um in Suites and and county for",
    "start": "526440",
    "end": "532720"
  },
  {
    "text": "for quite a lot of time when we were there so I was about 15 when this came out and of course",
    "start": "532720",
    "end": "537920"
  },
  {
    "text": "um uh the other reason that these these kind of um computer systems are interesting is because of the games",
    "start": "537920",
    "end": "543800"
  },
  {
    "start": "543000",
    "end": "592000"
  },
  {
    "text": "right that's really what computers are for as we all know and so um the BBC micro was particularly legendary for",
    "start": "543800",
    "end": "549240"
  },
  {
    "text": "this this game which I don't know if anyone in this room other than the people I know who know it yeah there's",
    "start": "549240",
    "end": "554680"
  },
  {
    "text": "some people who have recogniz this game is called Elite and um it's a 3D Space",
    "start": "554680",
    "end": "560200"
  },
  {
    "text": "Trading game or action game it's it's one of those it was one of the first games I mean it's in 1984 I think um and",
    "start": "560200",
    "end": "567519"
  },
  {
    "text": "it's just an awesome game and to get it squished into 32k of ram where most of the memory is taken up with the actual",
    "start": "567519",
    "end": "572640"
  },
  {
    "text": "just picture you're looking out there is just incredible and um I've been lucky enough to get in contact with one of the people who wrote the game and we've been",
    "start": "572640",
    "end": "578839"
  },
  {
    "text": "discussing it all and it's just amazing to think that uh the reason pretty much that they they wrote this game is that",
    "start": "578839",
    "end": "584959"
  },
  {
    "text": "no one told them that you couldn't possibly do 3D rendering on a 2 mahz processor so they just tried it and",
    "start": "584959",
    "end": "590360"
  },
  {
    "text": "turned out you can and my personal favorite is this one here which is a game called Exile it's",
    "start": "590360",
    "end": "596399"
  },
  {
    "start": "592000",
    "end": "605000"
  },
  {
    "text": "um yeah a 2d physics based puzzle game it's just amazing what you could do and such a restricted amount of ram such a",
    "start": "596399",
    "end": "602200"
  },
  {
    "text": "restricted amount of computing power okay so that's why I love the be",
    "start": "602200",
    "end": "608200"
  },
  {
    "start": "605000",
    "end": "661000"
  },
  {
    "text": "that's why I love the 6502 that powers it why on Earth I can see Sue's taking a picture of this right now why JavaScript",
    "start": "608200",
    "end": "616440"
  },
  {
    "text": "well cuz it's fun it really amuses me to take something which is as low level as",
    "start": "616440",
    "end": "622800"
  },
  {
    "text": "the assembly code of a of a of a computer and emulate it in possibly the system the highest furthest removed from",
    "start": "622800",
    "end": "630920"
  },
  {
    "text": "it um but no there's a real reason to um anyone who's ever played with emulators",
    "start": "630920",
    "end": "637120"
  },
  {
    "text": "um knows that it's a sort of a long painstaking process usually to get a one working on your system you have to find",
    "start": "637120",
    "end": "642560"
  },
  {
    "text": "the ROMs you have to find the code you have to find the funny versions of lib GDK that it needs you have to run configure you have to find the right",
    "start": "642560",
    "end": "649519"
  },
  {
    "text": "compiler you run make you run it and then you get a seg and you're like oh what happened here and you know all that kind of stuff they're not very it's not a great user experience but everyone",
    "start": "649519",
    "end": "656639"
  },
  {
    "text": "understands going to a web page and seeing something so that's why JavaScript okay",
    "start": "656639",
    "end": "662880"
  },
  {
    "start": "661000",
    "end": "772000"
  },
  {
    "text": "so I'm going to explain to you how I wrote an emulator but before we do that I'm going to have to give you a little bit of a background about um what it is",
    "start": "662880",
    "end": "670480"
  },
  {
    "text": "um inside sorry where's I've just lost my my clicker I've just realized I'm pressing the keys in the keyboard here",
    "start": "670480",
    "end": "675800"
  },
  {
    "text": "and I've got a clicker somewhere oh well I'll just have to keep doing that um so",
    "start": "675800",
    "end": "680880"
  },
  {
    "text": "6502 it's an 8bit aha thank you so it's",
    "start": "680880",
    "end": "686000"
  },
  {
    "text": "an 8bit processor which means that all of the internals of it are 8 bits wide um it has three whole registers the uh",
    "start": "686000",
    "end": "693560"
  },
  {
    "text": "first register and the most important one is the accumulator that was an 8bit register again that could only be used",
    "start": "693560",
    "end": "698959"
  },
  {
    "text": "for like simple sorry was the only register you could use for arithmetic so any kind of adding subtracting comparing",
    "start": "698959",
    "end": "705880"
  },
  {
    "text": "had to happen with the accumulator there were two other registers called X and Y which are pretty much only used for",
    "start": "705880",
    "end": "711320"
  },
  {
    "text": "indexing so you could use them as Loop counters maybe and you could use them to like index into an array but other than",
    "start": "711320",
    "end": "716600"
  },
  {
    "text": "that you couldn't do any comparison or arithmetic on them uh you had a whole 256 bytes of Stack although if you were",
    "start": "716600",
    "end": "722920"
  },
  {
    "text": "anywhere near using more than about a hundred of them you were probably in trouble um the um the 6502 has an",
    "start": "722920",
    "end": "730720"
  },
  {
    "text": "interesting design so it's very restricted in terms of only having these three registers it treated the bottom",
    "start": "730720",
    "end": "736040"
  },
  {
    "text": "256 bytes of ram slightly differently from the rest of the memory in as much as there were special op codes that only",
    "start": "736040",
    "end": "742360"
  },
  {
    "text": "allowed you to access those um addresses which were smaller and shorter and obviously every bite you save in terms",
    "start": "742360",
    "end": "748920"
  },
  {
    "text": "of mem Mor is one bite more in your for your game or your your your operating system whatever to use um but also it",
    "start": "748920",
    "end": "755079"
  },
  {
    "text": "could treat pairs of values in the zero page this first um 256 bytes of memory",
    "start": "755079",
    "end": "761199"
  },
  {
    "text": "as almost like 16bit pointers so that was the way that you kind of got around the fact that the rest of the system was",
    "start": "761199",
    "end": "766480"
  },
  {
    "text": "only 8 bit you could use two values in the zero page as your 16bit pointer I'll",
    "start": "766480",
    "end": "772800"
  },
  {
    "start": "772000",
    "end": "791000"
  },
  {
    "text": "hopefully become a little bit more clear in a second so this is what the instructions look like you've got like load and store to registers transfer",
    "start": "772800",
    "end": "778760"
  },
  {
    "text": "between registers push pop compare add and subtract all that kind of stuff and comparisons and branches um conditional",
    "start": "778760",
    "end": "785320"
  },
  {
    "text": "branches so that's pretty much what um most assembly ends up looking like",
    "start": "785320",
    "end": "791839"
  },
  {
    "start": "791000",
    "end": "864000"
  },
  {
    "text": "um let's just take one of those instructions the load a so this is something which just brings a value into",
    "start": "791839",
    "end": "797160"
  },
  {
    "text": "the accumulator um there are a bunch of ways you can bring values into the accumulator the first and most obvious",
    "start": "797160",
    "end": "802480"
  },
  {
    "text": "way is to bring in an actual number I just want the number 32 into the a register and that's what this first instruction is this h hash I'm going to",
    "start": "802480",
    "end": "809600"
  },
  {
    "text": "call it Hash a lot of you will say think pound um I think the the proper name for that thing is octo Thorp which is only",
    "start": "809600",
    "end": "816120"
  },
  {
    "text": "through arguments with Americans about it not being a pound um that is uh that is sort of like over here we can see",
    "start": "816120",
    "end": "822199"
  },
  {
    "text": "these are the op codes that are actually being so I can point over here as well these are the op codes that are actually",
    "start": "822199",
    "end": "827279"
  },
  {
    "text": "being interpreted by the processor to tell it what to do so you can see that the uh op code for load immediate is A9",
    "start": "827279",
    "end": "833440"
  },
  {
    "text": "so a920 means load 20 which is 32 into the a register",
    "start": "833440",
    "end": "839639"
  },
  {
    "text": "and then the next two things are reading from memory so now A5 means load from",
    "start": "839639",
    "end": "844720"
  },
  {
    "text": "the memory Address 70 so that will read something from by 17 a zero page and",
    "start": "844720",
    "end": "851279"
  },
  {
    "text": "then load a 1 2 3 4 will load from the address 1 2 3 4 and you can see that the this guy here is A5 and he only needs",
    "start": "851279",
    "end": "858360"
  },
  {
    "text": "one extra bite this guy is AD and he needs two extra bytes so if you're using the zero page it's slightly more",
    "start": "858360",
    "end": "864680"
  },
  {
    "start": "864000",
    "end": "952000"
  },
  {
    "text": "efficient then we get into more advanced things where we start seeing those X and Y registers and so the top two here are",
    "start": "864680",
    "end": "872040"
  },
  {
    "text": "reading um from an offset from address 1 2 3 4 uh so you can think of this as",
    "start": "872040",
    "end": "878199"
  },
  {
    "text": "really reading the x or the Y element in an array stored to address 1 2 3 4 um",
    "start": "878199",
    "end": "885560"
  },
  {
    "text": "and then the real killer one is this indirect thing with all the brackets over here parentheses um what that instruction",
    "start": "885560",
    "end": "891720"
  },
  {
    "text": "means is read the value at Address 70 then read the address the value at",
    "start": "891720",
    "end": "897120"
  },
  {
    "text": "address 71 treat that as being a 16bit pointer then add y to it and read the",
    "start": "897120",
    "end": "903800"
  },
  {
    "text": "bite from that address so there's a sort of indirect mode where you can use a pointer at 70 and 71 to point to a",
    "start": "903800",
    "end": "910560"
  },
  {
    "text": "particular piece of data so like your Sprite routines would be written so that you would use you know 70 and 71 as the",
    "start": "910560",
    "end": "916920"
  },
  {
    "text": "source of the Sprite and 72 and 73 as being like the destination and you would use these things indirectly through those so that's a pretty cool concept um",
    "start": "916920",
    "end": "925040"
  },
  {
    "text": "to give you sort of some context the zat had uh I think eight registers that you",
    "start": "925040",
    "end": "930399"
  },
  {
    "text": "could pair up so you have an a a b a c and a d and you could use B and C to mean a 16bit register but the the Z8 was",
    "start": "930399",
    "end": "936759"
  },
  {
    "text": "much much slower in terms of it took many many more Cycles to do anything even if it was running slightly faster",
    "start": "936759",
    "end": "942240"
  },
  {
    "text": "so they sort of netted out and this is slightly more risky slightly more risky",
    "start": "942240",
    "end": "947920"
  },
  {
    "text": "um sorry that's risky with a small c not not risky as in scary or whatever okay",
    "start": "947920",
    "end": "953600"
  },
  {
    "start": "952000",
    "end": "968000"
  },
  {
    "text": "so you got a little bit of a sort of groundwork about what what it looks like to emulator 6502 um how do we start well",
    "start": "953600",
    "end": "960800"
  },
  {
    "text": "pretty simple really just like the processor you f the fetch the next instruction you decode it and you",
    "start": "960800",
    "end": "966759"
  },
  {
    "text": "execute it what does that look like well that pretty much is an emulator give or",
    "start": "966759",
    "end": "972360"
  },
  {
    "start": "968000",
    "end": "1034000"
  },
  {
    "text": "take a few hundred instructions that I haven't put on the slides here so we've got an A an X and A Y which are going to",
    "start": "972360",
    "end": "979160"
  },
  {
    "text": "mirror the register contents of those three registers I was talking about we've got a program counter which just happens to start out at a particular",
    "start": "979160",
    "end": "985319"
  },
  {
    "text": "address doesn't really matter for this and then we have a loop forever read The Next Bite we're assuming there's a",
    "start": "985319",
    "end": "991160"
  },
  {
    "text": "function called read me that's going to go away and read read memory whatever that means we'll talk about that in a minute um read the next by incrementing",
    "start": "991160",
    "end": "998000"
  },
  {
    "text": "the program counter and then switch it what does it mean and as we saw earlier A9 is the load a with an immediate value",
    "start": "998000",
    "end": "1005920"
  },
  {
    "text": "so the code for that is going to be a equals read M PC Plus+ let's just read the next bite and then put that into the",
    "start": "1005920",
    "end": "1012000"
  },
  {
    "text": "a register there's a whole bunch of other things I'm sort of missing out for this but you get the idea um similarly",
    "start": "1012000",
    "end": "1017480"
  },
  {
    "text": "like the the A3 here is to load an address and so the code is a little bit more complicated but so you do this you",
    "start": "1017480",
    "end": "1024720"
  },
  {
    "text": "get your manual open in your lab you go one by one through all the like 160 documented codes for the 6502 and you're",
    "start": "1024720",
    "end": "1033558"
  },
  {
    "text": "done well you're done if you like just changing random values inside an array in memory without actually seeing what",
    "start": "1033559",
    "end": "1039798"
  },
  {
    "text": "the heck that looks like so you actually do have to do a bit more work before it gets more exciting than that so we need",
    "start": "1039799",
    "end": "1045678"
  },
  {
    "text": "to talk to the outside world and of course the most interesting thing to talk about is the video part so a BBC",
    "start": "1045679",
    "end": "1051880"
  },
  {
    "text": "micro was usually plugged into a TV however if you were very fancy you did have a monitor but It ultimately",
    "start": "1051880",
    "end": "1057360"
  },
  {
    "text": "amounted to the same thing there was something which was has an electron beam scanning 50 times a second and",
    "start": "1057360",
    "end": "1063039"
  },
  {
    "text": "outputting colors to the screen um there was a dedicated chip",
    "start": "1063039",
    "end": "1068360"
  },
  {
    "text": "inside the computer which was responsible for driving that CRT beam um",
    "start": "1068360",
    "end": "1073760"
  },
  {
    "text": "and the way you talk to that like any other device was through memory mapped IO so some of the places you could store",
    "start": "1073760",
    "end": "1079280"
  },
  {
    "text": "to some of those reads and writes to memory would actually instead of going to ROM or Ram they would go to circuits",
    "start": "1079280",
    "end": "1086360"
  },
  {
    "text": "or they would go to registers on Hardware that was inside the the machine so one of those again as I say would be",
    "start": "1086360",
    "end": "1092039"
  },
  {
    "start": "1090000",
    "end": "1234000"
  },
  {
    "text": "the video chip and the video chip has a few registers itself and is a relatively complicated chip in its own right one of",
    "start": "1092039",
    "end": "1099120"
  },
  {
    "text": "those registers would be at what address is the screen stored and you so you would tell it",
    "start": "1099120",
    "end": "1105720"
  },
  {
    "text": "where the screen was stored and then every single tick of the clock or clock of the tick as I keep saying um the",
    "start": "1105720",
    "end": "1113080"
  },
  {
    "text": "video chip would also fetch a bite from memory and it would interpret it to being what colors am I going to display",
    "start": "1113080",
    "end": "1118880"
  },
  {
    "text": "here and there were a variety of ways of interpreting the bite that it had readed but what that means is that every single",
    "start": "1118880",
    "end": "1125080"
  },
  {
    "text": "tick of the clock the CPU needs to read something from memory and the video chip needs to read something from memory now",
    "start": "1125080",
    "end": "1131520"
  },
  {
    "text": "if any of you has ever looked at like how modern graphics cards work you hear about like dual ported or quad ported",
    "start": "1131520",
    "end": "1136640"
  },
  {
    "text": "Ram where you can read and write all the same time and you think well surely this must mean you had very expensive and complicated",
    "start": "1136640",
    "end": "1143120"
  },
  {
    "text": "Ram inside a 6502 based system and the answer is no no this was in the golden",
    "start": "1143120",
    "end": "1148200"
  },
  {
    "text": "time in Computing the one and only time in Computing when Ram was faster than the processor so as it happened the ram",
    "start": "1148200",
    "end": "1153559"
  },
  {
    "text": "ran at twice the speed of the processor and so it was able to be shared cooperatively with the video circuit one",
    "start": "1153559",
    "end": "1159880"
  },
  {
    "text": "cycle would given to the the CPU and then the next cycle was given to the ram chip so as I say some registers allowed",
    "start": "1159880",
    "end": "1166039"
  },
  {
    "text": "you to configure how the video processor worked and it could do something as simple as read um the bite from memory",
    "start": "1166039",
    "end": "1173200"
  },
  {
    "text": "and generate eight pixels either from like a little table the video chip had its own uh ROM and had its own set of",
    "start": "1173200",
    "end": "1179200"
  },
  {
    "text": "characters so you could have a character map to display where it would literally interpret the bite as an asy bite and write it to the screen as that picture",
    "start": "1179200",
    "end": "1185280"
  },
  {
    "text": "or you could put it into a bitmat mode where you either had a high or low resolution 24 or 16 color",
    "start": "1185280",
    "end": "1191840"
  },
  {
    "text": "mode um there are other parts of this that you need in order to actually get the system up and booting um as you",
    "start": "1191840",
    "end": "1197679"
  },
  {
    "text": "might understand like most most sort of operating systems need some way of doing some periodic work and so there are",
    "start": "1197679",
    "end": "1204880"
  },
  {
    "text": "timers on the um there's a chip that's devoted to to generating timing signals so you would basically load a value into",
    "start": "1204880",
    "end": "1210720"
  },
  {
    "text": "it again by writing to one of these magic memory addresses and then the timer would start ticking and counting down and when it hit zero it would",
    "start": "1210720",
    "end": "1216559"
  },
  {
    "text": "generate an interrupt and then the CPU sorry the CPU would be interrupted the operating system would go and check whatever it needed to check so that's",
    "start": "1216559",
    "end": "1224039"
  },
  {
    "text": "quite a sensitive issue so we needed to get the timers working as well before we got anything appearing on the screen and you know you want emulate the sound and",
    "start": "1224039",
    "end": "1229840"
  },
  {
    "text": "stuff and again it's just a question of opening the hardware manuals and sort of going through them all so let's see what",
    "start": "1229840",
    "end": "1236159"
  },
  {
    "start": "1234000",
    "end": "1432000"
  },
  {
    "text": "that looks like if I can I've just realized the small problem here is that you'll be able to see this but I won't",
    "start": "1236159",
    "end": "1243720"
  },
  {
    "text": "hooray so this is so so familiar to anyone who's been in Britain there's at",
    "start": "1243720",
    "end": "1248760"
  },
  {
    "text": "least one guy who's have seen this before um that noise of the system booting backup is extremely um sort of",
    "start": "1248760",
    "end": "1256080"
  },
  {
    "text": "uh reminiscent but given that this is a go-to conference I'm going to do what everyone did back in",
    "start": "1256080",
    "end": "1265400"
  },
  {
    "text": "1985 woo so many department stores that had computers that were left on on you",
    "start": "1269919",
    "end": "1275080"
  },
  {
    "text": "know on would end up with things like this running on them so that's pretty cool and so you know here I am you're in",
    "start": "1275080",
    "end": "1280520"
  },
  {
    "text": "the mode where it's emulating oh of course there it is um so many um sorry we're in the",
    "start": "1280520",
    "end": "1289360"
  },
  {
    "text": "character map mode here this is called mode seven and um uh uh so at the moment what I can do if I just reset it I",
    "start": "1289360",
    "end": "1295679"
  },
  {
    "text": "happen to know where the memory for the screen is stored so just to sort of prove a point if I've typed this in right 7 c00 um this is a poke this is",
    "start": "1295679",
    "end": "1304080"
  },
  {
    "text": "just like raw writing to memory I mean it's amazing what you could do and like nowadays kids will never like get the opportunity to just write to random",
    "start": "1304080",
    "end": "1310400"
  },
  {
    "text": "parts of their computer's memory but by putting like 65 the asky for a there I can put an a at the top of the screen",
    "start": "1310400",
    "end": "1316080"
  },
  {
    "text": "and so on and you know if I change um to a different mode I can start",
    "start": "1316080",
    "end": "1321880"
  },
  {
    "text": "showing you that oh God I can't see what I'm doing uh where are we going to put this one let's just do 4,000 equals 255",
    "start": "1321880",
    "end": "1329840"
  },
  {
    "text": "we can put a big flashing blob in the middle of this screen so this is a bit mapped mode it's very low resolution as you can see the suddenly the characters",
    "start": "1329840",
    "end": "1335720"
  },
  {
    "text": "have got all giant um so that's cool um so another thing that you'd obviously",
    "start": "1335720",
    "end": "1340799"
  },
  {
    "text": "want to emulate pretty much straight on is is the dis system that was attached to it you know sometimes you have to load stuff of of cassette tape if you",
    "start": "1340799",
    "end": "1347440"
  },
  {
    "text": "weren't as um fortunate enough to have the disc drive um I won't subject you to the screeching horrible five minute P",
    "start": "1347440",
    "end": "1354360"
  },
  {
    "text": "process of loading something off of tape but so here's a disc dis system um I can just quickly",
    "start": "1354360",
    "end": "1360080"
  },
  {
    "text": "show uh did I get that yay little yellow",
    "start": "1360080",
    "end": "1365400"
  },
  {
    "text": "light at the bottom is the dis light there so this is like one of the games that came if you if you splashed out on",
    "start": "1365400",
    "end": "1370480"
  },
  {
    "text": "the disc system so you know this doesn't look particularly inspiring so far and it's all in that horrible Graphics mode but you know hey my system's working",
    "start": "1370480",
    "end": "1376440"
  },
  {
    "text": "it's pretty cool so obviously what you next do is you go onto like an online site that has a whole Archive of dis",
    "start": "1376440",
    "end": "1382080"
  },
  {
    "text": "images and you're like all right I'm going to play that game that I love so much and if I can find the mouse pointer",
    "start": "1382080",
    "end": "1387559"
  },
  {
    "text": "there it is we're going to load now I should just like to stay I have permission to use",
    "start": "1387559",
    "end": "1393520"
  },
  {
    "text": "this image which is why it's actually even in checked into GitHub we're going to load up that Space",
    "start": "1393520",
    "end": "1398640"
  },
  {
    "text": "Trading game and so we have Elite and we go awesome except we don't",
    "start": "1398640",
    "end": "1406880"
  },
  {
    "text": "go awesome because we're like ah well that doesn't look quite how I remember it you can save the photograph it gets better I'll do another version of this",
    "start": "1406880",
    "end": "1412840"
  },
  {
    "text": "in a minute when you can see it with less corruption so you can probably see that just under where it this load new",
    "start": "1412840",
    "end": "1418039"
  },
  {
    "text": "Commander there it's getting a bit sort of murky and now it's sort of something sort of scrolling over it now and",
    "start": "1418039",
    "end": "1423279"
  },
  {
    "text": "horrible things are happening so something isn't quite right with our emulation so what what on Earth is going on",
    "start": "1423279",
    "end": "1428840"
  },
  {
    "text": "there uh let's try and find a way back here we are so what happened there well as I",
    "start": "1428840",
    "end": "1435720"
  },
  {
    "text": "alluded to earlier the video chip is a pretty simple device and um you could change the way that it",
    "start": "1435720",
    "end": "1442159"
  },
  {
    "text": "interprets those bites um I also sort of mentioned that there are different modes that it had it had high resolution low",
    "start": "1442159",
    "end": "1447720"
  },
  {
    "text": "resolution High color low color all of those come with attendant tradeoffs in terms of the amount of memory that it used and when you've only got 32k of RAM",
    "start": "1447720",
    "end": "1455279"
  },
  {
    "text": "and most of that's given over to the operating system every single bite counts also if you're writing a 3D",
    "start": "1455279",
    "end": "1460919"
  },
  {
    "text": "renderer you really want to be right touching as little memory as possible so if you're using a high color high",
    "start": "1460919",
    "end": "1466720"
  },
  {
    "text": "resolution mode you're having to write more bites to draw the same amount of data so the people who wrote elite were",
    "start": "1466720",
    "end": "1473600"
  },
  {
    "text": "smart they were like well what we'd like to do is have the top 2/3 or 3/4",
    "start": "1473600",
    "end": "1479159"
  },
  {
    "text": "whatever that is in high resolution but low color mode so that I get pretty much",
    "start": "1479159",
    "end": "1484679"
  },
  {
    "text": "uh good memory efficiency but then when I've got my little um little chart at the bottom here which shows you my sort",
    "start": "1484679",
    "end": "1489720"
  },
  {
    "text": "of like um status and where I am on the map and everything let's use a few more Colors Let's Splash out what the",
    "start": "1489720",
    "end": "1495480"
  },
  {
    "text": "hell so how did they achieve this it's not something that video chip can do but it is what they would do is at every",
    "start": "1495480",
    "end": "1503760"
  },
  {
    "text": "time the video chip reached the top it knew that the Electron Beam had just reached the top of the screen it would generate an interrupt and say hey I'm at",
    "start": "1503760",
    "end": "1510000"
  },
  {
    "text": "the top again what Elite would do would set up one of those timers to say hey count down and I know exactly how long",
    "start": "1510000",
    "end": "1515960"
  },
  {
    "text": "it takes for the Electron Beam to scan all the way down to here to about oh",
    "start": "1515960",
    "end": "1521360"
  },
  {
    "text": "here and then I'm going to reprogram the video Hardware to say okay we're now in multicolor mode and low resolution and",
    "start": "1521360",
    "end": "1528000"
  },
  {
    "text": "as long as I can do it quickly enough I've got all the time it takes for the Electron Beam to go off the side here",
    "start": "1528000",
    "end": "1533440"
  },
  {
    "text": "Zoom back and start up here before anyone even notices that I've done this kind of magician's trick and sort of like pull the tablecloth underneath",
    "start": "1533440",
    "end": "1540480"
  },
  {
    "text": "which is cool right so why does my emulator not work well I've glossed over",
    "start": "1540480",
    "end": "1545760"
  },
  {
    "text": "a whole bunch of details about how that Loop was done so effectively I have to decide when to draw the picture right I",
    "start": "1545760",
    "end": "1551159"
  },
  {
    "text": "was in in my sort of example code of like the while loop it was just a while forever well at some point I have to stop and like draw the screen and so",
    "start": "1551159",
    "end": "1557840"
  },
  {
    "text": "what I was in that previous example was just running for like I don't know 8,000 op codes and then I was saying okay now",
    "start": "1557840",
    "end": "1563120"
  },
  {
    "text": "let's draw the screen and I went back and Drew 8,000 op codes and draw the screen which meant that of course there was no chance for me to ever observe the",
    "start": "1563120",
    "end": "1569440"
  },
  {
    "text": "video in the right place so how do we fix it well I have to go back to my",
    "start": "1569440",
    "end": "1575279"
  },
  {
    "start": "1572000",
    "end": "1681000"
  },
  {
    "text": "giant table of op codes that I've got all my case statements and instead of assuming that they all take the same amount of time I have to say Okay well",
    "start": "1575279",
    "end": "1582480"
  },
  {
    "text": "load a immediate takes two CPU Cycles so I have to kind of run the video and the",
    "start": "1582480",
    "end": "1587840"
  },
  {
    "text": "timers for two cycles every time I see a low a immediate um so I've kind of got this",
    "start": "1587840",
    "end": "1593039"
  },
  {
    "text": "co-routine between the CPU and the rest of the hardware I mean obviously in reality they're all running together at",
    "start": "1593039",
    "end": "1598960"
  },
  {
    "text": "the same time in a real system um but we do that and now we get an uncorrupt",
    "start": "1598960",
    "end": "1604760"
  },
  {
    "text": "version uncorrupt is that a word it isn't it oh beep shh jit jit problems at",
    "start": "1604760",
    "end": "1610840"
  },
  {
    "text": "the beginning so now we as you can see we we've got a much cleaner display but",
    "start": "1610840",
    "end": "1615919"
  },
  {
    "text": "even then this wasn't perfect and I've checked it out on a real BBC this this also happens on a real be see the little",
    "start": "1615919",
    "end": "1621240"
  },
  {
    "text": "dot here that's flashing a little bit and sometimes you see a little dot down here it's not quite right there are some",
    "start": "1621240",
    "end": "1626760"
  },
  {
    "text": "other things that are going on the timing wasn't perfect so I mean how are we doing for time you'll forgive me if I",
    "start": "1626760",
    "end": "1632960"
  },
  {
    "text": "have a quick play as it's been so long but like seriously this is a 2 MHz",
    "start": "1632960",
    "end": "1639000"
  },
  {
    "text": "machine isn't that amazing it's awesome this like and know it gets faster when there's nothing on the screen so this is",
    "start": "1639000",
    "end": "1644520"
  },
  {
    "text": "the space station I've just come out of so that's what I took the screenshot from and",
    "start": "1644520",
    "end": "1649640"
  },
  {
    "text": "provoke the police to come out and chase me come on we can see some other ships as well it had Ai and everything and",
    "start": "1649640",
    "end": "1655559"
  },
  {
    "text": "it's got like you know where are we that's me look this is the prices of all the goods in this particular place",
    "start": "1655559",
    "end": "1660960"
  },
  {
    "text": "there's a it's a dictatorship apparently all this was done through like a a seeded random number generator that they like generated a whole bunch of stuff",
    "start": "1660960",
    "end": "1666880"
  },
  {
    "text": "and then apparently they had to go through and check that there were no naughty words that had come out as a result of their random algorithm for all the things they did but it's great",
    "start": "1666880",
    "end": "1673080"
  },
  {
    "text": "anyway so that's whoops I'm being attacked right that's enough of that right",
    "start": "1673080",
    "end": "1680080"
  },
  {
    "text": "so that's cool and the best thing about writing an emulator is that once you've done the",
    "start": "1680080",
    "end": "1685840"
  },
  {
    "start": "1681000",
    "end": "1806000"
  },
  {
    "text": "hard work and you've got all those things worked out you suddenly have this huge Suite of games that were are",
    "start": "1685840",
    "end": "1691320"
  },
  {
    "text": "available to you and you can wh away many many long evenings loading up old games and enjoying and um the fruits of",
    "start": "1691320",
    "end": "1697760"
  },
  {
    "text": "your labor and so one of my other favorites was this which is a blatant ripoff of the arcade game",
    "start": "1697760",
    "end": "1703480"
  },
  {
    "text": "Gallagher which uh yeah",
    "start": "1703480",
    "end": "1708640"
  },
  {
    "text": "so isn't this sweet so you spend your evenings doing this and you're like oh oh well that's",
    "start": "1708640",
    "end": "1717399"
  },
  {
    "text": "unfortunate and so what you really discovered is that what you spend your time doing is debugging other people's",
    "start": "1717399",
    "end": "1722840"
  },
  {
    "text": "software or rather your own software's problems except you don't have the source code you have no idea what it was doing in the first place so if you write",
    "start": "1722840",
    "end": "1730039"
  },
  {
    "text": "an emulator my advice to you is spend as much time as you possibly can writing a decent debugger so I in here I have an",
    "start": "1730039",
    "end": "1737480"
  },
  {
    "text": "instruction level debugger I can set break points I can set watch points I can put arbitrary bits of JavaScript to",
    "start": "1737480",
    "end": "1743000"
  },
  {
    "text": "run on certain conditions it's a godsend now I'm cheating here cuz I actually remember this game from my childhood and",
    "start": "1743000",
    "end": "1749559"
  },
  {
    "text": "um I know exactly what this crash is but um oh if I can remember the number I",
    "start": "1749559",
    "end": "1754760"
  },
  {
    "text": "will just go I don't think you can read this anyway so you might have to just take my word for this but um that gray",
    "start": "1754760",
    "end": "1760720"
  },
  {
    "text": "blob there is a question mark question mark question mark So basically the point at which we're stuck on here is uh",
    "start": "1760720",
    "end": "1767480"
  },
  {
    "text": "an instruct for which I don't know right it's an undefined instruction now of course on a",
    "start": "1767480",
    "end": "1772919"
  },
  {
    "text": "modern PC what would happen if you hit an undefined instruction you get like a seg fault it dis you know you get like a",
    "start": "1772919",
    "end": "1778080"
  },
  {
    "text": "blue screen of death or whatever depending on which mode you're in but the basically the processor knows that you've tried to do something you shouldn't do on a on a 6502 what happens",
    "start": "1778080",
    "end": "1785880"
  },
  {
    "text": "well it just plays on you think so in fact my default case in my like um big switch statement is just PC Plus+",
    "start": "1785880",
    "end": "1793080"
  },
  {
    "text": "continue hooray um that's clearly not right because why would they have done this um if we take a look if we can get",
    "start": "1793080",
    "end": "1800799"
  },
  {
    "text": "the mouse pointer back on my screen over here oops there we go if we take a look at what the op",
    "start": "1800799",
    "end": "1807760"
  },
  {
    "start": "1806000",
    "end": "1843000"
  },
  {
    "text": "codes are around that funny instruction so that instruction is um hex 87 which was not in my table we look at the ones",
    "start": "1807760",
    "end": "1814320"
  },
  {
    "text": "nearby we've got 84 apparently is store y 85 is store a 86 is store x 87 is",
    "start": "1814320",
    "end": "1821640"
  },
  {
    "text": "undefined H well there's a sort of pattern going on here it looks like for this sort of sequence of bits the CPU",
    "start": "1821640",
    "end": "1828039"
  },
  {
    "text": "was interpreting it as a store something and then depending on the bottom two bits 0000 0 1 1 0 it's the Y register",
    "start": "1828039",
    "end": "1835519"
  },
  {
    "text": "the a register or the X register okay so maybe we can get a clue as to what this",
    "start": "1835519",
    "end": "1840559"
  },
  {
    "text": "other instruction is doing because it must be doing something well thankfully people much",
    "start": "1840559",
    "end": "1847159"
  },
  {
    "start": "1843000",
    "end": "1992000"
  },
  {
    "text": "smarter than me have taken the time to do something absolutely incredible so a",
    "start": "1847159",
    "end": "1852279"
  },
  {
    "text": "big thanks to the visual 6502 people for letting me do this um this is um a",
    "start": "1852279",
    "end": "1858240"
  },
  {
    "text": "circuit diagram of the 6502 so the reason I know there are 3510 transistors is because these guys have decapped a",
    "start": "1858240",
    "end": "1865799"
  },
  {
    "text": "652 they have taken loads and loads and loads of high resolution photographs of the die they've then shaved off the top",
    "start": "1865799",
    "end": "1872919"
  },
  {
    "text": "layer and done it again and then they shaved off the next layer and done it again they've written programs to stitch those together then they've written",
    "start": "1872919",
    "end": "1879000"
  },
  {
    "text": "image recognition software which can find where all the gates are and they have reverse engineered the entire",
    "start": "1879000",
    "end": "1884159"
  },
  {
    "text": "transistor net list of the 6502 so that's an amazing achievement in itself and that's where I got like the",
    "start": "1884159",
    "end": "1889919"
  },
  {
    "text": "picture at the beginning of the naked 6502 but more so than that they've been able to write emulators and simulators",
    "start": "1889919",
    "end": "1896120"
  },
  {
    "text": "for that net list and so I can run a virtual 6502 and look at every single bit going on additionally they've taken",
    "start": "1896120",
    "end": "1902639"
  },
  {
    "text": "the time to reverse engineer further and they've worked out where the accumulator is stored where the a register is where the X register is where the all these",
    "start": "1902639",
    "end": "1908639"
  },
  {
    "text": "type of things and so in this picture here this is like a top level shot you can't quite see here this guy says",
    "start": "1908639",
    "end": "1914639"
  },
  {
    "text": "instruction decode this sort of regular looking array turns out to be a I'm going to have to",
    "start": "1914639",
    "end": "1920399"
  },
  {
    "text": "look at my notes 130x 21 ROM now it's addressed in a very strange way so I'm",
    "start": "1920399",
    "end": "1927080"
  },
  {
    "text": "not going to go into it but effectively the instruction that was read is taken",
    "start": "1927080",
    "end": "1932519"
  },
  {
    "text": "it's some bits are flipped from from the from the instruction um and some extra",
    "start": "1932519",
    "end": "1937840"
  },
  {
    "text": "timing information is added to give you like a 21 bit like lookup that's presented to the ROM and the 130 bit",
    "start": "1937840",
    "end": "1944760"
  },
  {
    "text": "output from that ROM is energizing various parts of the circuitry so there's no micro coding or anything like",
    "start": "1944760",
    "end": "1950279"
  },
  {
    "text": "that it's just like well if it matches this bit bit pattern then you need to do this on this subcycle of this",
    "start": "1950279",
    "end": "1955760"
  },
  {
    "text": "instruction and if you take the time to reverse engineer the entire table as other much smarter people than me have",
    "start": "1955760",
    "end": "1960799"
  },
  {
    "text": "done you discover that in that 87 case what's happening is both the a register",
    "start": "1960799",
    "end": "1968320"
  },
  {
    "text": "and the X register are enabled at the same time so as the store is going to write to memory the A and the X are",
    "start": "1968320",
    "end": "1976000"
  },
  {
    "text": "together presented to the bus now it turns out that the zeros win out so what really happens is a and X is written and",
    "start": "1976000",
    "end": "1984360"
  },
  {
    "text": "in fact this was well known people had experimented with 652 before they even decapitated and everything people knew about this which is exactly why it was",
    "start": "1984360",
    "end": "1990200"
  },
  {
    "text": "in that game um this is the somewhat confusing store ax instruction which actually stores a and X so you find a",
    "start": "1990200",
    "end": "1999120"
  },
  {
    "start": "1992000",
    "end": "2011000"
  },
  {
    "text": "big list of all of these funny undefined op codes and you fill in the rest of your table and so you now instead of having just 160 odd entries in your your",
    "start": "1999120",
    "end": "2005600"
  },
  {
    "text": "case statement you have all 256 they all do something useful and now you can run a load of",
    "start": "2005600",
    "end": "2011240"
  },
  {
    "start": "2011000",
    "end": "2068000"
  },
  {
    "text": "games then of course I this this is uh I",
    "start": "2011240",
    "end": "2016480"
  },
  {
    "text": "guess this is an admission I I may have alluded earlier to the uh um U",
    "start": "2016480",
    "end": "2022159"
  },
  {
    "text": "playground transfer of uh illicit U games um that I uh may may have partaken",
    "start": "2022159",
    "end": "2028679"
  },
  {
    "text": "in in my youth but um so this game here alien 8 it came on cassette and I could",
    "start": "2028679",
    "end": "2035360"
  },
  {
    "text": "never get it to run on my computer cuz I actually had a slightly different version of the uh the BBC I had a BBC",
    "start": "2035360",
    "end": "2040559"
  },
  {
    "text": "Master the upgraded version where they happened to use a different version of the 6502 they Ed a 65 C12 which",
    "start": "2040559",
    "end": "2046000"
  },
  {
    "text": "unfortunately me all the undefined op codes did different undefined things so like a whole bunch of games didn't work so I spent a lot of my youth hacking",
    "start": "2046000",
    "end": "2051800"
  },
  {
    "text": "games just to get them to work on my computer which is exactly why I knew where zaga was going wrong I knew that",
    "start": "2051800",
    "end": "2056878"
  },
  {
    "text": "that didn't work on the computer that I had um but this game Alien 8 and a bunch",
    "start": "2056879",
    "end": "2063158"
  },
  {
    "text": "of other games related all written by the same author I could never get to work and the reason for for that is they",
    "start": "2063159",
    "end": "2068760"
  },
  {
    "start": "2068000",
    "end": "2298000"
  },
  {
    "text": "had protection systems on them which most games did but these Protection Systems I was unable to break as a",
    "start": "2068760",
    "end": "2074398"
  },
  {
    "text": "15-year-old in my bedroom so let's just talk briefly about what a protection system is I mean this is DRM the birth",
    "start": "2074399",
    "end": "2081280"
  },
  {
    "text": "of DRM you could say um so the general gist of it is that you would take the",
    "start": "2081280",
    "end": "2087280"
  },
  {
    "text": "game code the authors would take the game code they would encrypt it in some way and then they would place the",
    "start": "2087280",
    "end": "2092720"
  },
  {
    "text": "decrypt routine just before they immediately ran into the game itself and they would have by this point they'd have disabled all the the interrupts or",
    "start": "2092720",
    "end": "2099160"
  },
  {
    "text": "set them up in their own way they'd have made sure the operating system is no longer involved and they would have set a bit in the ram which meant that even",
    "start": "2099160",
    "end": "2104359"
  },
  {
    "text": "if you hit the like restart button it would blank all of the ram out so basically as soon as you were that you",
    "start": "2104359",
    "end": "2109720"
  },
  {
    "text": "were locked in the the next thing that happen would be the game would play and so you had no opportunity to stop it and say can I save this off please and take",
    "start": "2109720",
    "end": "2116640"
  },
  {
    "text": "a copy so if it's encrypt or decryptable why why can't I decrypt it I mean I can",
    "start": "2116640",
    "end": "2123040"
  },
  {
    "text": "load up the code right and I can see what it's doing and I can decrypt it just like it is well it was more complicated than that obviously so the",
    "start": "2123040",
    "end": "2129440"
  },
  {
    "text": "decryption Keys would include things like magic values that were loaded from tape so if you were able to talk to the",
    "start": "2129440",
    "end": "2135520"
  },
  {
    "text": "tape controller directly you could actually listen for something which wasn't like a normal tape signal at the end of your loading and kind of go",
    "start": "2135520",
    "end": "2141280"
  },
  {
    "text": "crackle crackle crackle yep that's exactly what I was expecting and now I've got a sort of a magic part of my key that can decode the game and of",
    "start": "2141280",
    "end": "2147200"
  },
  {
    "text": "course the Assumption there is that when you're using your tape to tape Hi-Fi deck you would stop it after the noises have stopped and you wouldn't actually",
    "start": "2147200",
    "end": "2152640"
  },
  {
    "text": "pick up that bit or it wouldn't translate as well um similarly for disc games games that had disc protect C",
    "start": "2152640",
    "end": "2157839"
  },
  {
    "text": "would use like direct talking to the disc controller to like read apparently bad sectors that weren't in fact bad",
    "start": "2157839",
    "end": "2163040"
  },
  {
    "text": "that copying programs wouldn't see so that that would prevent you from copying the game rather than preventing you from disassembling it and changing it",
    "start": "2163040",
    "end": "2170520"
  },
  {
    "text": "um this is kind of fun um the decryption code would often use itself as part of the key why would you do that you say",
    "start": "2170520",
    "end": "2177680"
  },
  {
    "text": "well if it didn't include itself what would be stopping me from replacing the very last instruction of the decryption",
    "start": "2177680",
    "end": "2183800"
  },
  {
    "text": "code with a return statement like a little return instruction then it would run through happily decode the game and",
    "start": "2183800",
    "end": "2188880"
  },
  {
    "text": "then instead of running off into the game it would stop and I could save it well if the G if the encryption",
    "start": "2188880",
    "end": "2195040"
  },
  {
    "text": "decryption code uses itself like the op codes of itself as part of the key if I modify it in any way then of course I",
    "start": "2195040",
    "end": "2201400"
  },
  {
    "text": "it's going to corrupt the game and not not decode so that's pretty cool but there are ways around that you can hack around that um it gets really funky at",
    "start": "2201400",
    "end": "2209200"
  },
  {
    "text": "this point though the really good game Protection Systems would use Hardware timers and Hardware registers so while",
    "start": "2209200",
    "end": "2216640"
  },
  {
    "text": "they were running they would read from those memory mapped counters that were forever counting down that mean that if",
    "start": "2216640",
    "end": "2222599"
  },
  {
    "text": "you disturbed the amount of time it took to do the decryption in any way whatsoever the timers wouldn't stop they",
    "start": "2222599",
    "end": "2229520"
  },
  {
    "text": "keep on going on you would start getting bogus values the key would be corrupted and the game would not decode so you",
    "start": "2229520",
    "end": "2235440"
  },
  {
    "text": "couldn't even like single step in a de even if you had a debugger but you couldn't single step through it because you would disturb it and in the",
    "start": "2235440",
    "end": "2241440"
  },
  {
    "text": "registers are another thing I used to in my own game Protection Systems I would use um like the position of the hardware",
    "start": "2241440",
    "end": "2246599"
  },
  {
    "text": "cursor cuz cuz of course if you're single stepping through the code You' probably got some overlay on the screen and you're moving the cursor and no",
    "start": "2246599",
    "end": "2251640"
  },
  {
    "text": "one's expecting you to read the position of the cursor and uh um and then the really really cool",
    "start": "2251640",
    "end": "2257520"
  },
  {
    "text": "games would use the interrupt information they would set up their own interrupt handlers to happen at a particular time and then they would",
    "start": "2257520",
    "end": "2262680"
  },
  {
    "text": "mutate the key maybe it would just like add one to the key randomly every time the interrupt hand fired which which was",
    "start": "2262680",
    "end": "2268440"
  },
  {
    "text": "you know pretty perplexing so my friend Richard and I the guy who I wrote the um the magazine article with we sat down",
    "start": "2268440",
    "end": "2275280"
  },
  {
    "text": "and we thought how are we going to crack this game so alienate uses all of these things and more and so we thought let's write a",
    "start": "2275280",
    "end": "2282200"
  },
  {
    "text": "6502 emulator and then we can decode the game by running our emulator and stopping it when it gets to the end and",
    "start": "2282200",
    "end": "2288480"
  },
  {
    "text": "we spent many many evenings and afternoons after school trying to get this to work but you need such deep",
    "start": "2288480",
    "end": "2293920"
  },
  {
    "text": "intimate knowledge of what's going on and be able to do it you know it's so sensitive to timing I mean one example",
    "start": "2293920",
    "end": "2299560"
  },
  {
    "start": "2298000",
    "end": "2428000"
  },
  {
    "text": "is like um there's an instruction inside the um uh the alienate protection where",
    "start": "2299560",
    "end": "2305839"
  },
  {
    "text": "it says rotate this memory address which means read it shift it all up by one",
    "start": "2305839",
    "end": "2311079"
  },
  {
    "text": "move the carry into the bottom and write it back out again it takes seven Cycles there's no no indication which cycle it",
    "start": "2311079",
    "end": "2317800"
  },
  {
    "text": "does the reading and which cycle it does the writing and those things are very important because every single cycle the counter is ticking down and so you're",
    "start": "2317800",
    "end": "2323920"
  },
  {
    "text": "getting different values so we're starting to run out of time here but I'm just going to very quickly show you visual 6502 which is not mine this is",
    "start": "2323920",
    "end": "2330920"
  },
  {
    "text": "the guys who Decap the um um the 6502 this is their JavaScript emulator of",
    "start": "2330920",
    "end": "2337119"
  },
  {
    "text": "like a at at the transistor level and you can sort of single step through and see which parts of the chip are lit up at what cycle and even more importantly",
    "start": "2337119",
    "end": "2345200"
  },
  {
    "text": "if I can get over to here you've got a list of all the things",
    "start": "2345200",
    "end": "2351240"
  },
  {
    "text": "that are going on inside the chip at each cycle so armed with this information I could single step through and I could find out which which Cycles",
    "start": "2351240",
    "end": "2358359"
  },
  {
    "text": "it was reading and which Cycles it was writing so I could actually put in the emulation that I finally needed to do",
    "start": "2358359",
    "end": "2364280"
  },
  {
    "text": "um here it is in because you couldn't really see it in that last SL so did I say seven Cycles it's six Cycles to do a",
    "start": "2364280",
    "end": "2370480"
  },
  {
    "text": "rotate um so you can see the first three Cycles it's reading the op code and the",
    "start": "2370480",
    "end": "2375560"
  },
  {
    "text": "low and the high bite of the address that it's going to uh rotate then it actually reads that memory then it does",
    "start": "2375560",
    "end": "2381040"
  },
  {
    "text": "the rotate which takes a cycle and then the final one it stores it back but one of the more interesting things in this",
    "start": "2381040",
    "end": "2387079"
  },
  {
    "text": "is that it actually writes back in the fourth cycle as well there was no pin on that 650 6502 so none of the pins on",
    "start": "2387079",
    "end": "2395119"
  },
  {
    "text": "this chip which said whether it wanted to talk to the memory or not it just happened every clock cycle so whatever",
    "start": "2395119",
    "end": "2400800"
  },
  {
    "text": "was left on the bus on both the address side and the data side was being just broadcast out now so on that fourth",
    "start": "2400800",
    "end": "2409079"
  },
  {
    "text": "cycle it's writing back the unmodified value which again is no harm no foul right okay if you write to memory twice",
    "start": "2409079",
    "end": "2414319"
  },
  {
    "text": "what difference does it make except that Fe 48 here is one of those Hardware timers writing to it actually has a side",
    "start": "2414319",
    "end": "2420319"
  },
  {
    "text": "effect it does something to it it actually cancels an interrupt that's going and um can cause all sorts of",
    "start": "2420319",
    "end": "2425720"
  },
  {
    "text": "things to happen so you have to model that too um so very quickly how do we fix it well",
    "start": "2425720",
    "end": "2432200"
  },
  {
    "start": "2428000",
    "end": "2464000"
  },
  {
    "text": "you suddenly your code is looking a lot more complicated there's no more like run hardware for two cycles at the end I",
    "start": "2432200",
    "end": "2437520"
  },
  {
    "text": "have to account for every single cycle as it's going through within an instruction um this is very complicated",
    "start": "2437520",
    "end": "2444599"
  },
  {
    "text": "looking but it's actually code generated from from a table so I actually have a big table of all of the op codes the same thing I used to generate the",
    "start": "2444599",
    "end": "2449920"
  },
  {
    "text": "disassembler I actually now use and I have a sort of rule engine that understands the rules of what things do get written and read from by the 6502",
    "start": "2449920",
    "end": "2456880"
  },
  {
    "text": "and it can emit all of this code so I didn't actually have to write all this stuff so um it's not as painful as it seems um we",
    "start": "2456880",
    "end": "2464119"
  },
  {
    "start": "2464000",
    "end": "2513000"
  },
  {
    "text": "don't really have too much time to go over this but there's another layer of complexity on this which which is that the hardware itself ran at half the",
    "start": "2464119",
    "end": "2469680"
  },
  {
    "text": "speed of the CPU so we've got the ram running at twice the speed and the hardware running at half the speed and in order for the CPU to access the",
    "start": "2469680",
    "end": "2476760"
  },
  {
    "text": "hardware it kind of had to be slowed down and so there's this thing called cycle stretching where the clock coming",
    "start": "2476760",
    "end": "2482480"
  },
  {
    "text": "in is kind of tied up high it's like whoa there on the rains and of course depending on whether on an even or odd",
    "start": "2482480",
    "end": "2488599"
  },
  {
    "text": "cycle compared to the hardware is whether it takes three Cycles to kind of get in step or five Cycles so there's a",
    "start": "2488599",
    "end": "2495520"
  },
  {
    "text": "lot of subtlety in terms of the timing so armed with all of this and a friend of mine who back in the UK still has one",
    "start": "2495520",
    "end": "2501839"
  },
  {
    "text": "of these computers running tons of experiments for me I was able to get the whole thing decoding and I'm glad to say",
    "start": "2501839",
    "end": "2507400"
  },
  {
    "text": "finally 30 years probably too late or 25 years later I've been able to hack alien",
    "start": "2507400",
    "end": "2512680"
  },
  {
    "text": "8 all right I'm going to Turbo go through this um I just want to make a few things about um the performance",
    "start": "2512680",
    "end": "2517920"
  },
  {
    "start": "2513000",
    "end": "2616000"
  },
  {
    "text": "stuff so JavaScript is not well known for being a fast language although the jit guys are amazing um I just like to",
    "start": "2517920",
    "end": "2525280"
  },
  {
    "text": "say some things I discovered along the way uh first of all switch statements it's amazing if you have a big big",
    "start": "2525280",
    "end": "2530839"
  },
  {
    "text": "switch statement most jits inside like Chrome and Firefox give up they're like",
    "start": "2530839",
    "end": "2535960"
  },
  {
    "text": "well this is a 256 entry case statement I'm giving up on this so it just interprets it so don't do that I",
    "start": "2535960",
    "end": "2541480"
  },
  {
    "text": "actually have a binary search to find the op code for um for Chrome and I think I use a set of jump tables for for",
    "start": "2541480",
    "end": "2547440"
  },
  {
    "text": "for Firefox um don't do Dynamic dispatch it's a really cool thing to do you could have like a single thing which points at",
    "start": "2547440",
    "end": "2553880"
  },
  {
    "text": "which routine is going to be called on which cycle and you keep writing over it and stuff again the the the the gips go",
    "start": "2553880",
    "end": "2559559"
  },
  {
    "text": "whoa every time I call this function it does something different I can't inline anything and it gives up and it goes back to um um interpreting amazingly",
    "start": "2559559",
    "end": "2567240"
  },
  {
    "text": "Loop unrolling is alive and well so you remember the old technique of like um taking a snippet of code and instead of",
    "start": "2567240",
    "end": "2572880"
  },
  {
    "text": "putting it in a loop you actually just copied the code eight times or whatever that actually made a big difference in terms of the loop code the video code",
    "start": "2572880",
    "end": "2579319"
  },
  {
    "text": "where I'm going to do eight pixels at a time which is sort of slightly sad um use typed arrays for the screen that's",
    "start": "2579319",
    "end": "2585440"
  },
  {
    "text": "kind of a no-brainer uh webg was a massive win for me I mean it's hardly doing anything but by doing the",
    "start": "2585440",
    "end": "2591119"
  },
  {
    "text": "presentation part using webg it meant that I actually get some like multi primitive multi-threading where the GPU is doing the screen blip while I'm",
    "start": "2591119",
    "end": "2597680"
  },
  {
    "text": "carrying on with the next frame um and I did some complicated stuff to defer the sound so um the sound is done in a come",
    "start": "2597680",
    "end": "2604559"
  },
  {
    "text": "and talk to me afterwards but um you know again people were um were doing some cool things with sound like there was sampled speech was was was a thing",
    "start": "2604559",
    "end": "2611040"
  },
  {
    "text": "by like sitting in a very very tight Loop changing the volume of the sound very very very quickly um cool so in",
    "start": "2611040",
    "end": "2617440"
  },
  {
    "start": "2616000",
    "end": "2722000"
  },
  {
    "text": "conclusion you can get an awful lot of fun out of doing this kind of stuff um this is not my first emulator in fact my",
    "start": "2617440",
    "end": "2624040"
  },
  {
    "text": "my first emulator was a Sega Master System emulator um which I wrote in with a friend in arm assembly way back when",
    "start": "2624040",
    "end": "2631079"
  },
  {
    "text": "then then I ported to JavaScript so I've had a bit of a history of doing this kind of stuff but it's so rewarding especially when once you posting this",
    "start": "2631079",
    "end": "2637599"
  },
  {
    "text": "stuff out there people whose games these are will get back in contact with you or will at least answer your emails and I",
    "start": "2637599",
    "end": "2642960"
  },
  {
    "text": "was very lucky that the guy who wrote Elite got back to me after I I'd wrote a blog post about how I'd cracked their",
    "start": "2642960",
    "end": "2649280"
  },
  {
    "text": "like compressed text format that I was trying to like a friend of one on the mailing list wanted to have like a a",
    "start": "2649280",
    "end": "2655160"
  },
  {
    "text": "hacked name inside Elite and he'd done it in Photoshop and I'm like I can do one better than a photoshopped version of this I can give you a version of the",
    "start": "2655160",
    "end": "2661319"
  },
  {
    "text": "game that has that hack in it but it turns out I couldn't find it I was just you know I GPT through the thing looking for the asy that I was expecting to",
    "start": "2661319",
    "end": "2667440"
  },
  {
    "text": "change and it wasn't there so on a huge Odyssey of like how does this actually work and I I emailed him afterwards and",
    "start": "2667440",
    "end": "2673480"
  },
  {
    "text": "said hey I I think I reverse engineered your uh your string format and he say yep that's pretty much it and he sent me",
    "start": "2673480",
    "end": "2678720"
  },
  {
    "text": "back this which is an original scan of the sort of like fan feed computer print out that he and the other author had",
    "start": "2678720",
    "end": "2685319"
  },
  {
    "text": "written um like the original list of like um tokenized strings which you can barely see I'm so sorry but that was so",
    "start": "2685319",
    "end": "2692880"
  },
  {
    "text": "rewarding anyway I'm well over time so um I've got a list of resources there",
    "start": "2692880",
    "end": "2697960"
  },
  {
    "text": "you can go and play it on the web um it's on the source is all on GitHub uh visual 6502 is amazing they're also",
    "start": "2697960",
    "end": "2703920"
  },
  {
    "text": "doing other chips so do look at their website um big thanks to the people listed there and uh like the man said",
    "start": "2703920",
    "end": "2710720"
  },
  {
    "text": "please remember to rate this sess thank [Applause]",
    "start": "2710720",
    "end": "2721920"
  },
  {
    "text": "you",
    "start": "2721920",
    "end": "2724920"
  }
]