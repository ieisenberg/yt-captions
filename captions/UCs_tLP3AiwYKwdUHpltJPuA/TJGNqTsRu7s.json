[
  {
    "text": "[Music]",
    "start": "460",
    "end": "11160"
  },
  {
    "text": "so H so so what's this about I I I've been talking to people about continuous",
    "start": "11160",
    "end": "17480"
  },
  {
    "text": "delivery for for a long time now my book was published 10 years ago and I've been",
    "start": "17480",
    "end": "23439"
  },
  {
    "text": "helping people do it for for longer than that um and one of the frequent comments",
    "start": "23439",
    "end": "30080"
  },
  {
    "text": "I get is oh yeah that sounds really good that's that's what we want but you don't mean doing that for data do you well",
    "start": "30080",
    "end": "36480"
  },
  {
    "text": "actually yes um and that's really what my talk is about",
    "start": "36480",
    "end": "42520"
  },
  {
    "text": "today um I'm happy to take questions as we go",
    "start": "42520",
    "end": "48120"
  },
  {
    "text": "through I I might have to depending on how many there are we we we'll see how that goes and I will try and leave about",
    "start": "48120",
    "end": "55120"
  },
  {
    "text": "half an hour at the end to make sure that that we get into this in some detail um I've got probably slightly too",
    "start": "55120",
    "end": "60920"
  },
  {
    "text": "many slides but we'll we'll see how we do with that as well um so where what is continuous delivery",
    "start": "60920",
    "end": "69720"
  },
  {
    "text": "and I think that's a good starting point and I think maybe perhaps not quite what you think I think that what many people",
    "start": "69720",
    "end": "76479"
  },
  {
    "text": "think about when they hear the phrase continuous delivery these days in part because of jez and I is deployment",
    "start": "76479",
    "end": "84000"
  },
  {
    "text": "Automation and it's way more than that I think that what we're really trying to achieve is this which trying to optimize",
    "start": "84000",
    "end": "91799"
  },
  {
    "text": "um the the software development delivery process from idea to getting Working",
    "start": "91799",
    "end": "97399"
  },
  {
    "text": "Hands into the working software into the hands of our users and then Gathering",
    "start": "97399",
    "end": "102439"
  },
  {
    "text": "feedback so that we can learn quickly and um that's it that's that's that's",
    "start": "102439",
    "end": "109079"
  },
  {
    "text": "kind of really the scope of continuous delivery except what that means is that",
    "start": "109079",
    "end": "114240"
  },
  {
    "text": "if we really want to take that idea seriously that's pretty much the scope of all software development so",
    "start": "114240",
    "end": "120479"
  },
  {
    "text": "continuous delivery is a an organizing strategy approach for virtually the",
    "start": "120479",
    "end": "126479"
  },
  {
    "text": "whole of software development in my mind I think of it as an engineering discipline and",
    "start": "126479",
    "end": "133440"
  },
  {
    "text": "it's deeply grounded in these kinds of ideas we're going to try and strive to",
    "start": "133440",
    "end": "140800"
  },
  {
    "text": "achieve a repeatable reliable approach to delivering change into the hands of",
    "start": "140800",
    "end": "148760"
  },
  {
    "text": "our users and to be able to do that we need to take control of the variables we",
    "start": "148760",
    "end": "154000"
  },
  {
    "text": "want to be able to do things repeatably and reliably we can't just cross our fingers and hope that everything's going",
    "start": "154000",
    "end": "160159"
  },
  {
    "text": "to work and say things like it works on that my machine we need to do stuff to",
    "start": "160159",
    "end": "166480"
  },
  {
    "text": "minimize the variance we want to make our systems and our processes more deterministic if we do if we run this",
    "start": "166480",
    "end": "174440"
  },
  {
    "text": "the same test every time we run it we want the same results if we deploy our software into production every time we",
    "start": "174440",
    "end": "180560"
  },
  {
    "text": "do that we get the same results what this leads to is a more",
    "start": "180560",
    "end": "186840"
  },
  {
    "text": "experimental approach to software development we're going to proceed as a series of small experiments we're going",
    "start": "186840",
    "end": "194280"
  },
  {
    "text": "to measure the behaviors the the results of those experiments and as a result",
    "start": "194280",
    "end": "200599"
  },
  {
    "text": "we're in a position to make more evidencebased",
    "start": "200599",
    "end": "205920"
  },
  {
    "text": "decisions I think that if you put all of the things all of the words together on this",
    "start": "205920",
    "end": "211319"
  },
  {
    "text": "screen I hope that you will see that what I'm really talking about here is starting to apply the ideas of Science",
    "start": "211319",
    "end": "218480"
  },
  {
    "text": "and Engineering in a pretty a pretty serious profound way to uh the the the",
    "start": "218480",
    "end": "225439"
  },
  {
    "text": "act of creating and delivering software to the to the hands of our users um and",
    "start": "225439",
    "end": "231720"
  },
  {
    "text": "I think that's what we're talking about here I think that continuous delivery is probably the best candidate",
    "start": "231720",
    "end": "238400"
  },
  {
    "text": "that we have at the moment for something that we could consider to be a genuine first class engineering you know",
    "start": "238400",
    "end": "244799"
  },
  {
    "text": "definitional terms kind of idea in terms of engineering discipline for software",
    "start": "244799",
    "end": "250920"
  },
  {
    "text": "development um so one of the mechanisms that we use",
    "start": "250920",
    "end": "256799"
  },
  {
    "text": "in continuous delivery is this this is the idea of the deployment Pipeline and we're going to create a deployment",
    "start": "256799",
    "end": "263360"
  },
  {
    "text": "pipeline a mechanism that's going to evaluate our changes to our production",
    "start": "263360",
    "end": "269320"
  },
  {
    "text": "system sys and make them more repeatable and reliable we're going to put all",
    "start": "269320",
    "end": "276320"
  },
  {
    "text": "change to our production systems through the deployment pipeline so that we can",
    "start": "276320",
    "end": "282600"
  },
  {
    "text": "uh we can get to that more deterministic result and we we're not going to be you know making excuses while it worked on",
    "start": "282600",
    "end": "288800"
  },
  {
    "text": "my machine as as I said before",
    "start": "288800",
    "end": "293919"
  },
  {
    "text": "um so if we want to do that then we need to think very care definitely one of the",
    "start": "294320",
    "end": "300720"
  },
  {
    "text": "principal tools for um controlling those variables and",
    "start": "300720",
    "end": "306520"
  },
  {
    "text": "making things more reliable and repeatable is Version Control and we",
    "start": "306520",
    "end": "312840"
  },
  {
    "text": "want to Version Control the code that we create for sure but everything else too",
    "start": "312840",
    "end": "319400"
  },
  {
    "text": "we don't want the configuration of our systems the data structures that we deploy um the infrastructure that we",
    "start": "319400",
    "end": "326800"
  },
  {
    "text": "depend on any of those things to vary and so stop us being able to get a",
    "start": "326800",
    "end": "332880"
  },
  {
    "text": "deterministic result so we're going to versally control pretty much everything these this is a list of principles that",
    "start": "332880",
    "end": "339479"
  },
  {
    "text": "are in in my continuous delivery book mine and jez's continuous delivery book",
    "start": "339479",
    "end": "344520"
  },
  {
    "text": "and this is repeating some of the things that I've already said but we're aiming to try and you know create that uh that",
    "start": "344520",
    "end": "351039"
  },
  {
    "text": "more deterministic approach for releasing software and that means we're going to automate pretty much everything",
    "start": "351039",
    "end": "356720"
  },
  {
    "text": "and keep everything under Version Control we're going to optimize to have fast feedback to to to learn earlier in",
    "start": "356720",
    "end": "363919"
  },
  {
    "text": "the cycle and to focus on high quality work and build upon stuff that we know",
    "start": "363919",
    "end": "369560"
  },
  {
    "text": "know that works but there's another take on this uh and this is this is another",
    "start": "369560",
    "end": "376319"
  },
  {
    "text": "quote from uh from from jez and I which is continuous delivery is the ability to get changes of all types including new",
    "start": "376319",
    "end": "383599"
  },
  {
    "text": "features configuration changes bug fixes and experiments into production or into the hands of our users safely and",
    "start": "383599",
    "end": "389759"
  },
  {
    "text": "quickly in a sustainable way I want to pause at this point you know I we",
    "start": "389759",
    "end": "396080"
  },
  {
    "text": "advertise this talk as continuous delivery of data and I haven't really mentioned data very much yet and you",
    "start": "396080",
    "end": "401599"
  },
  {
    "text": "might be thinking what's he talking about but I want to point out that I haven't mentioned code either none of",
    "start": "401599",
    "end": "408440"
  },
  {
    "text": "the stuff that I've talked about is about data or code it's about the all of the information that we deal with as",
    "start": "408440",
    "end": "415039"
  },
  {
    "text": "software development so this all of these ideas that I've just spoken about are equally as valid for data as they",
    "start": "415039",
    "end": "422360"
  },
  {
    "text": "are for anything else if we want to be getting into the Realms of an an",
    "start": "422360",
    "end": "428199"
  },
  {
    "text": "engineering approach then we're going to be deterministic about data as well as",
    "start": "428199",
    "end": "433319"
  },
  {
    "text": "everything else so we want to version everything we're going to",
    "start": "433319",
    "end": "440360"
  },
  {
    "text": "make changing small steps so that we can kind of limit the blast radius if",
    "start": "440360",
    "end": "445680"
  },
  {
    "text": "something bad does happen simplify each change so it's easier to to reason about easier to understand we're going to test",
    "start": "445680",
    "end": "453680"
  },
  {
    "text": "everything that we can think of pretty much and we're going to use our desire",
    "start": "453680",
    "end": "459560"
  },
  {
    "text": "to achieve all of those things to design for migration to allow us we're going to",
    "start": "459560",
    "end": "465639"
  },
  {
    "text": "treat all of these things seriously and that's going to have an impact on the kinds of systems that we design and this",
    "start": "465639",
    "end": "472479"
  },
  {
    "text": "is one of the huge values of this engineering approach is that when we do those kinds of things we start to get",
    "start": "472479",
    "end": "480560"
  },
  {
    "text": "other add-on benefits if you start designing for things like testability",
    "start": "480560",
    "end": "486000"
  },
  {
    "text": "and deployability you also get as a side effects better separation of concerns",
    "start": "486000",
    "end": "491319"
  },
  {
    "text": "better modularity uh better higher cohesion all of this good stuff that that we're striving for in the design of",
    "start": "491319",
    "end": "498360"
  },
  {
    "text": "our systems so we're going to version the code contr we creates and we're going to",
    "start": "498360",
    "end": "504280"
  },
  {
    "text": "version everything else so data needs versioning too",
    "start": "504280",
    "end": "509639"
  },
  {
    "text": "doesn't really count as continuous delivery if we can't release because our",
    "start": "509639",
    "end": "515080"
  },
  {
    "text": "schema has changed and what does that mean really",
    "start": "515080",
    "end": "520200"
  },
  {
    "text": "what do we mean when we start talking about data it's kind of all data really",
    "start": "520200",
    "end": "526320"
  },
  {
    "text": "but in this context what we're thinking about is um there's a difference between",
    "start": "526320",
    "end": "532600"
  },
  {
    "text": "the data that is um deployed at release time and that that is generated through",
    "start": "532600",
    "end": "538839"
  },
  {
    "text": "the the action of the system the state the transactional state that we generate",
    "start": "538839",
    "end": "544680"
  },
  {
    "text": "during the the function of our systems and we need to think about both of those those cases the the first class is",
    "start": "544680",
    "end": "552000"
  },
  {
    "text": "probably slightly easier to understand we got ideas like um continuous",
    "start": "552000",
    "end": "557959"
  },
  {
    "text": "integration infrastructure as code you know good configuration management those sorts of ideas but the other stuff start",
    "start": "557959",
    "end": "564560"
  },
  {
    "text": "you know is is a bit more challenging and and then there are some some gray areas there's also stuff like",
    "start": "564560",
    "end": "570480"
  },
  {
    "text": "reference data and runtime configuration so I want to talk about all of those uh to some",
    "start": "570480",
    "end": "577160"
  },
  {
    "text": "degree I think there are a few different contexts that matter uh when we start",
    "start": "577720",
    "end": "583720"
  },
  {
    "text": "thinking about data uh and continuous delivery so there's there's the data in production of course but there's also",
    "start": "583720",
    "end": "590839"
  },
  {
    "text": "the data that supports automated testing and there's the data that supports manual testing and performance",
    "start": "590839",
    "end": "596160"
  },
  {
    "text": "performance testing migration testing any kind of testing that we've got and we want to think carefully about how",
    "start": "596160",
    "end": "602000"
  },
  {
    "text": "we're going to deal with all of that stuff um when we start thinking about",
    "start": "602000",
    "end": "608920"
  },
  {
    "text": "this I think that fundamentally whatever we mean when we start talking about data",
    "start": "608920",
    "end": "614000"
  },
  {
    "text": "there's there's two different aspects to that there's there are the records that we generate that transactional output of",
    "start": "614000",
    "end": "620600"
  },
  {
    "text": "our system and the structure that matters for us to be able to interpret",
    "start": "620600",
    "end": "626040"
  },
  {
    "text": "those records and I'm going to continue talking in those terms and that I'm",
    "start": "626040",
    "end": "632200"
  },
  {
    "text": "probably going to be depending because it's the most common language that we",
    "start": "632200",
    "end": "638480"
  },
  {
    "text": "can use to to share meaning I'm going to be referring to ideas in the terminology",
    "start": "638480",
    "end": "644639"
  },
  {
    "text": "of relational databases but I'd like just to point out that this is just just",
    "start": "644639",
    "end": "650000"
  },
  {
    "text": "as true if you got a graph database or a column store or whatever other kind of",
    "start": "650000",
    "end": "655120"
  },
  {
    "text": "form of data that you're dealing with I once did some of the technique that I'm going to describe today in the context",
    "start": "655120",
    "end": "663000"
  },
  {
    "text": "of the inmemory state of a rich domain model for a trading system and we we had",
    "start": "663000",
    "end": "668680"
  },
  {
    "text": "an event based system and we used the data migration techniques that I'm going to talk about on that system even though",
    "start": "668680",
    "end": "676079"
  },
  {
    "text": "the you know it wasn't a conventional database so do keep that in the back of your mind the ideas that I'm describing",
    "start": "676079",
    "end": "682959"
  },
  {
    "text": "are applicable pretty generally I think so let's start off thinking about",
    "start": "682959",
    "end": "690519"
  },
  {
    "text": "um uh the idea of being able to change the structure the schema of the data",
    "start": "690519",
    "end": "696160"
  },
  {
    "text": "that we're dealing with structure must be allowed to evolve if we are to have",
    "start": "696160",
    "end": "701480"
  },
  {
    "text": "um useful systems one of the core tenets of um",
    "start": "701480",
    "end": "708320"
  },
  {
    "text": "agile thinking and continuous delivery is very much a kind of Second Generation Um agile approach one of the",
    "start": "708320",
    "end": "716959"
  },
  {
    "text": "core tenants there though is to be able to inspect and adapt to be able to learn you don't start out knowing all of the",
    "start": "716959",
    "end": "723800"
  },
  {
    "text": "answers and that means that we we we must allow ourselves the uh the wiggle",
    "start": "723800",
    "end": "730399"
  },
  {
    "text": "room to make a mistake and get something wrong in in our first thoughts about what our design may be um so that means",
    "start": "730399",
    "end": "740120"
  },
  {
    "text": "that we must allow structure to change we must allow ourselves the freedom to try something out find out that it's not",
    "start": "740120",
    "end": "747680"
  },
  {
    "text": "quite what we wanted and change our minds there's a good quote from Fred",
    "start": "747680",
    "end": "753320"
  },
  {
    "text": "Brooks if you've not come across Fred Brooks Fred Brooks is an old school um",
    "start": "753320",
    "end": "759120"
  },
  {
    "text": "software developer and computer scientist who wrote a book called the mythical man month in 1970 and if you if",
    "start": "759120",
    "end": "768040"
  },
  {
    "text": "you pick that if you were to take my advice you'd read that anyway because that's a fantastic book and even though",
    "start": "768040",
    "end": "774079"
  },
  {
    "text": "it was written in 1970 my guarantee is that by the third page you'll be nodding and smiling ing as you recognize that",
    "start": "774079",
    "end": "780680"
  },
  {
    "text": "we're still doing it as wrong as they were then in many ways where the systems he was talking about are a bit different",
    "start": "780680",
    "end": "786440"
  },
  {
    "text": "but the rest is all the same and one of one of the things that Fred said is as",
    "start": "786440",
    "end": "791639"
  },
  {
    "text": "soon as one freezes a design it becomes obsolete so if we want our designs to be",
    "start": "791639",
    "end": "796680"
  },
  {
    "text": "living live things we've got to allow this freedom to to discover new ideas",
    "start": "796680",
    "end": "802120"
  },
  {
    "text": "and realize that our design isn't isn't optimal so we've got to allow structure to evolve and as soon as we assume that",
    "start": "802120",
    "end": "809600"
  },
  {
    "text": "we've got to migrate data because if the structure evolves we need to be able to",
    "start": "809600",
    "end": "814720"
  },
  {
    "text": "still be able to interpret the records that that structure embodies so we've got to think about migrating",
    "start": "814720",
    "end": "822560"
  },
  {
    "text": "data so how do we allow the structure to evolve so the the the easiest way the",
    "start": "822560",
    "end": "828079"
  },
  {
    "text": "way that we're going to make our life easiest if we are going to allow that evolution is to make additive changes if",
    "start": "828079",
    "end": "836720"
  },
  {
    "text": "we want to be able to step forward and step back to any version of our our data",
    "start": "836720",
    "end": "843440"
  },
  {
    "text": "in the history of our our software then we can't afford to lose information and",
    "start": "843440",
    "end": "850480"
  },
  {
    "text": "if we delete information it's gone so if we have a data migration that deletes",
    "start": "850480",
    "end": "855920"
  },
  {
    "text": "old records they're gone we can't step back from that position so if we want to",
    "start": "855920",
    "end": "861639"
  },
  {
    "text": "be able to retain this the the ability to step back making additive changes can make our life a lot easier by by which I",
    "start": "861639",
    "end": "868680"
  },
  {
    "text": "mean if you are kind of have a computer science Bend rather than just a you know",
    "start": "868680",
    "end": "875480"
  },
  {
    "text": "practical programmer Bend computer you know in computer science terms really what I'm talking about is kind of the",
    "start": "875480",
    "end": "881079"
  },
  {
    "text": "flow of events you treat your data stores as a record of the timeline and",
    "start": "881079",
    "end": "887360"
  },
  {
    "text": "then you just kind of surf the Leading Edge of the timeline and you draw the line through your data at the points",
    "start": "887360",
    "end": "892759"
  },
  {
    "text": "that makes sense to you um you know if I've got a relational database working",
    "start": "892759",
    "end": "898040"
  },
  {
    "text": "in in that kind of model instead of deleting a record I'm going to leave the",
    "start": "898040",
    "end": "903759"
  },
  {
    "text": "record where it is but Mark it as deleted and then ignore it from now on",
    "start": "903759",
    "end": "908959"
  },
  {
    "text": "so I kind of treat my data store as a stream of events and kind of that's one way in which we can make you make",
    "start": "908959",
    "end": "915000"
  },
  {
    "text": "changes which is useful and with with the modern capacities for data stores",
    "start": "915000",
    "end": "920639"
  },
  {
    "text": "you know not extravagant it's that's that's kind of fine um so if if we want to in addition",
    "start": "920639",
    "end": "929040"
  },
  {
    "text": "to that we want to version control everything so we're going to Version Control you know ddl scripts migration",
    "start": "929040",
    "end": "934079"
  },
  {
    "text": "scripts Delta scripts tests of those things everything and we're going to",
    "start": "934079",
    "end": "940279"
  },
  {
    "text": "think about database refactoring techniques what are you know what are the pattern what's the advice to to",
    "start": "940279",
    "end": "946759"
  },
  {
    "text": "carry out certain kinds of changes in in in database and there's a great book on that topic which I'll I'll mention as we",
    "start": "946759",
    "end": "952759"
  },
  {
    "text": "go through so let's get into the detail of",
    "start": "952759",
    "end": "960519"
  },
  {
    "text": "thinking about versioning schema change um schema version so my advice is",
    "start": "960519",
    "end": "967920"
  },
  {
    "text": "is that first of all is to absolutely vers in the schema have a unique ID have",
    "start": "967920",
    "end": "973720"
  },
  {
    "text": "a a a a a sequence number for your your",
    "start": "973720",
    "end": "979160"
  },
  {
    "text": "schema and a a monotonically increasing sequence number is is ideal because then",
    "start": "979160",
    "end": "985360"
  },
  {
    "text": "you can see where the gaps are if I say my database is that vers version 17 uh",
    "start": "985360",
    "end": "990720"
  },
  {
    "text": "and my release candidate requires version 20 I know that I've got to apply",
    "start": "990720",
    "end": "997279"
  },
  {
    "text": "changes um 18 19 and 20 to get it there and so having a monotonically",
    "start": "997279",
    "end": "1003759"
  },
  {
    "text": "monotonically in increasing sequence number is a good tool for that kind of thing so once we got this version number",
    "start": "1003759",
    "end": "1011959"
  },
  {
    "text": "store the schem the schema version that the app can work with with the",
    "start": "1011959",
    "end": "1017440"
  },
  {
    "text": "application so the the application knows that it works with this particular",
    "start": "1017440",
    "end": "1023040"
  },
  {
    "text": "version of the schema also store the schema along with the data so maybe you have a schema",
    "start": "1023040",
    "end": "1031280"
  },
  {
    "text": "version table in your in your database or a header entry or something but",
    "start": "1031280",
    "end": "1036640"
  },
  {
    "text": "somewhere where you can go and in in inspect a well-known place where you can go and inspect the data and know which",
    "start": "1036640",
    "end": "1044400"
  },
  {
    "text": "version that data is at and then you can decide whatever it is that you need to do next in order to be able to translate",
    "start": "1044400",
    "end": "1051160"
  },
  {
    "text": "it from one version to another so let's imagine we've got a",
    "start": "1051160",
    "end": "1059600"
  },
  {
    "text": "system of some kind and it's got a data store of some kind there's a",
    "start": "1059600",
    "end": "1065799"
  },
  {
    "text": "relationship between the two and that relationship is important because if the relationship drifts too far apart they",
    "start": "1065799",
    "end": "1073640"
  },
  {
    "text": "can't talk to one another so if we got to maintain that somehow we need to",
    "start": "1073640",
    "end": "1079799"
  },
  {
    "text": "understand that a particular version of the application works with a particular",
    "start": "1079799",
    "end": "1085480"
  },
  {
    "text": "version of the schema um we need to know that and so we need a record somewhere that tells us",
    "start": "1085480",
    "end": "1092679"
  },
  {
    "text": "that we need something that says this version of the application works with this version of the schema and this",
    "start": "1092679",
    "end": "1099400"
  },
  {
    "text": "version of the application works with this other version of the schema and we need to keep we we need to maintain that",
    "start": "1099400",
    "end": "1105960"
  },
  {
    "text": "record somewhere so that we can automate the management of of the two we can",
    "start": "1105960",
    "end": "1111840"
  },
  {
    "text": "ensure that when we deploy an application the data is in the right shape for it to be able to interact",
    "start": "1111840",
    "end": "1119960"
  },
  {
    "text": "with the easiest way to do that the by far the simplest way to do that is to",
    "start": "1122360",
    "end": "1128960"
  },
  {
    "text": "bung them all into one big repo keep them together and then you don't have any dependency management problem you",
    "start": "1128960",
    "end": "1134840"
  },
  {
    "text": "don't have to do anything smart all you do is that you you know the version you know any given version any V",
    "start": "1134840",
    "end": "1142520"
  },
  {
    "text": "any given configuration set in your version control system is going to work together the data and the application",
    "start": "1142520",
    "end": "1149200"
  },
  {
    "text": "are going to work together that's by far the simplest way of doing things uh you",
    "start": "1149200",
    "end": "1154640"
  },
  {
    "text": "can do other things but but you're just making life harder when you do",
    "start": "1154640",
    "end": "1161080"
  },
  {
    "text": "um the the cavia I suppose here is where you have shared schemas and different",
    "start": "1161080",
    "end": "1166720"
  },
  {
    "text": "applications working at different versions and then then you've got to get into dependency management territory and that is automatically going to make your",
    "start": "1166720",
    "end": "1173240"
  },
  {
    "text": "life more difficult but by if you can if you can possibly get away with it put",
    "start": "1173240",
    "end": "1178480"
  },
  {
    "text": "them all together into one big version control",
    "start": "1178480",
    "end": "1182279"
  },
  {
    "text": "system and then we're going to have a series of versions of the application",
    "start": "1184039",
    "end": "1189720"
  },
  {
    "text": "and a series of versions of the a matching series of versions of the uh",
    "start": "1189720",
    "end": "1196200"
  },
  {
    "text": "the database schema the data schema um and so we're no longer talking about",
    "start": "1196200",
    "end": "1202960"
  },
  {
    "text": "schema versioning we're starting to talk about data versioning we can also think about the records that populate that",
    "start": "1202960",
    "end": "1209360"
  },
  {
    "text": "schema and those are different we've got to think about those separately it's a different kind of problem but it's",
    "start": "1209360",
    "end": "1216640"
  },
  {
    "text": "related and it's starting to get a little bit more tracable as we start to be a little bit more disciplined in the",
    "start": "1216640",
    "end": "1222679"
  },
  {
    "text": "way in which we manage the versions for the application and the the schema and",
    "start": "1222679",
    "end": "1228480"
  },
  {
    "text": "we don't worry we're not going to skip over that we're going to talk about",
    "start": "1228480",
    "end": "1232880"
  },
  {
    "text": "that so here's my application and my my data my my my my my data store and when",
    "start": "1234120",
    "end": "1242080"
  },
  {
    "text": "we make a change we're going to change the application and we're going to change the data store together you know",
    "start": "1242080",
    "end": "1247880"
  },
  {
    "text": "whatever it takes to make something work if I'm going to make a change to the data store that requires a change to the",
    "start": "1247880",
    "end": "1253000"
  },
  {
    "text": "application I do them pretty much in the same commit well no I do them in the same commit and then I'll keep",
    "start": "1253000",
    "end": "1258919"
  },
  {
    "text": "everything working all of the time um and then what I'm going to do is",
    "start": "1258919",
    "end": "1266280"
  },
  {
    "text": "that I'm going to record the change to the data store as a a little Delta I'm",
    "start": "1266280",
    "end": "1273640"
  },
  {
    "text": "going to write a script that says in order to move from in this case",
    "start": "1273640",
    "end": "1280120"
  },
  {
    "text": "presumably version number 75 of the schema to version number 76 these are",
    "start": "1280120",
    "end": "1287080"
  },
  {
    "text": "the steps that you take and I'm going to encode that and that's what I'm going to Version",
    "start": "1287080",
    "end": "1293360"
  },
  {
    "text": "Control and then we can start thinking about tools that we can that can support",
    "start": "1293360",
    "end": "1299320"
  },
  {
    "text": "us playing some of these little scripts we're going to put all of these together in one Version Control System",
    "start": "1299320",
    "end": "1306320"
  },
  {
    "text": "to make our lives easier too so now we're going to make a series",
    "start": "1306320",
    "end": "1312760"
  },
  {
    "text": "of changes to our data and for each change we're going to create a Delta script and record that Delta script and",
    "start": "1312760",
    "end": "1320240"
  },
  {
    "text": "keep the collection of them we don't necessarily have to be releasing every",
    "start": "1320240",
    "end": "1325360"
  },
  {
    "text": "one of these changes we can release at any point which is one of the tenets of continuous delivery our goal uh in",
    "start": "1325360",
    "end": "1332760"
  },
  {
    "text": "continuous delivery is to work so that our software is always in a releasable state so every single time that we make",
    "start": "1332760",
    "end": "1340120"
  },
  {
    "text": "a commit that changes the data structure that we deal with we commit stuff that's",
    "start": "1340120",
    "end": "1345279"
  },
  {
    "text": "going to keep everything working and that in includes udes writing one of these little Delta",
    "start": "1345279",
    "end": "1350720"
  },
  {
    "text": "scripts and we versing them all together into version control system so what does",
    "start": "1350720",
    "end": "1356679"
  },
  {
    "text": "one of those delt scripts look like so we're going to have the schema",
    "start": "1356679",
    "end": "1364840"
  },
  {
    "text": "change the thing that describes the way in which the data structure changes",
    "start": "1364840",
    "end": "1370039"
  },
  {
    "text": "we're going to have something that tells us that in order to be able so if we've",
    "start": "1370039",
    "end": "1375279"
  },
  {
    "text": "got any records in in the previous vers version of the schema this is what it",
    "start": "1375279",
    "end": "1381200"
  },
  {
    "text": "takes to move those to be the right shape for the new version of the schema little migration scripts and if you",
    "start": "1381200",
    "end": "1389400"
  },
  {
    "text": "follow my advice you're also going to have a little automated test that validates that those migration scripts",
    "start": "1389400",
    "end": "1396720"
  },
  {
    "text": "do what you think they do and guess what we're going to version all those things together and put them",
    "start": "1396720",
    "end": "1402840"
  },
  {
    "text": "all into the the same Version Control System",
    "start": "1402840",
    "end": "1407840"
  },
  {
    "text": "so now we can think about deployment time so okay so let's let's think about",
    "start": "1409440",
    "end": "1416400"
  },
  {
    "text": "deploying this stuff we've got all of this stuff in Version Control and we want to be able to deploy",
    "start": "1416400",
    "end": "1422440"
  },
  {
    "text": "let's say we want to deploy to a test environment remember what I said earlier in within our data store we've got a",
    "start": "1422440",
    "end": "1429360"
  },
  {
    "text": "record of what version of the schema it is at so it's got a little table and it",
    "start": "1429360",
    "end": "1435159"
  },
  {
    "text": "says that the current version is version 79",
    "start": "1435159",
    "end": "1440200"
  },
  {
    "text": "uh and at the point at which we come to deploy the version of the software uh at",
    "start": "1440200",
    "end": "1445279"
  },
  {
    "text": "the top of the the top of the screen that requires a data store that's at version 80 so uh deployment tools go and",
    "start": "1445279",
    "end": "1453039"
  },
  {
    "text": "look in the data in the release candidate the Deployable software and say okay this release candidate needs",
    "start": "1453039",
    "end": "1459720"
  },
  {
    "text": "version 80 they go and look in the data store and say this data store is at version 79 therefore we need to play The",
    "start": "1459720",
    "end": "1467880"
  },
  {
    "text": "Script 80 uh and migrate the data and bingo",
    "start": "1467880",
    "end": "1473600"
  },
  {
    "text": "you've got the data to the new version in your test environment similarly your",
    "start": "1473600",
    "end": "1478919"
  },
  {
    "text": "production environment that might lag a little bit further behind because you're not releasing quite as frequently as you are to your test environment and you",
    "start": "1478919",
    "end": "1485880"
  },
  {
    "text": "come to deploy there and it says Okay a release candidate is needs version 80",
    "start": "1485880",
    "end": "1491559"
  },
  {
    "text": "the production database is at 76 therefore we need to play 77 78 9 and 80",
    "start": "1491559",
    "end": "1499559"
  },
  {
    "text": "to get it to the right version we play those scripts in order in",
    "start": "1499559",
    "end": "1505480"
  },
  {
    "text": "sequence and we've got our database at the right at the right level now to work",
    "start": "1505480",
    "end": "1511080"
  },
  {
    "text": "with the application this is pretty this is pretty powerful this is pretty flexible",
    "start": "1511080",
    "end": "1517559"
  },
  {
    "text": "there's there's one more refinement that you can do that's common instead of just writing one script at the point at which",
    "start": "1517559",
    "end": "1524880"
  },
  {
    "text": "we make any change to our data we could write two we could write one that moves",
    "start": "1524880",
    "end": "1530320"
  },
  {
    "text": "us from the previous version to the ne to the current one and one that moves us",
    "start": "1530320",
    "end": "1535679"
  },
  {
    "text": "from the current one back to the previous version if we haven't lost any data in any migrations then that should",
    "start": "1535679",
    "end": "1542960"
  },
  {
    "text": "work we should be able to do that and if we were able to do that what that would mean was that we can now deploy any",
    "start": "1542960",
    "end": "1551799"
  },
  {
    "text": "version of our application to any version of the infrastructure and migrate the data in any direction so we",
    "start": "1551799",
    "end": "1558600"
  },
  {
    "text": "can deploy any application at any time and keep everything working so uh in my",
    "start": "1558600",
    "end": "1565080"
  },
  {
    "text": "example we've got a version 81 we're going to roll back to version 80 and play the undo script and get the data",
    "start": "1565080",
    "end": "1572200"
  },
  {
    "text": "store back to version 80 so now we have complete flexibility to be able to",
    "start": "1572200",
    "end": "1577240"
  },
  {
    "text": "migrate in any direction this is extremely powerful there's a couple of tool sets that I",
    "start": "1577240",
    "end": "1584039"
  },
  {
    "text": "will point point you in the direction of um the there's the open source one is",
    "start": "1584039",
    "end": "1589960"
  },
  {
    "text": "called Flyway um it's it's it's written by box viws but I think that Redgate",
    "start": "1589960",
    "end": "1595679"
  },
  {
    "text": "have taken this over there so actually these are both Redgate things uh I don't have any connection to either",
    "start": "1595679",
    "end": "1601919"
  },
  {
    "text": "organization so so it's it's honest advice Flyway is pretty good I think they've had for over",
    "start": "1601919",
    "end": "1608120"
  },
  {
    "text": "40 million downloads it's a pretty successful open source project all it does is what I've just described it",
    "start": "1608120",
    "end": "1614039"
  },
  {
    "text": "manages the scripts for you it will do the versioning and all that kind of thing and and then it will pick based on",
    "start": "1614039",
    "end": "1619640"
  },
  {
    "text": "a some naming convention it will pick the the the appropriate scripts that need to be played to get a version of",
    "start": "1619640",
    "end": "1625880"
  },
  {
    "text": "the datab base into a particular State um one more thing to say about",
    "start": "1625880",
    "end": "1631640"
  },
  {
    "text": "that migration strategy is um is that the the roll back scripts um",
    "start": "1631640",
    "end": "1639559"
  },
  {
    "text": "my experience is that most people that start out with this kind of migration strategy absolutely want the roll back",
    "start": "1639559",
    "end": "1645919"
  },
  {
    "text": "scripts and then after they've been operating it for a little while they start to get a bit nervous that they",
    "start": "1645919",
    "end": "1651440"
  },
  {
    "text": "almost never if they're any good at continuous delivery they almost never roll back and so because you just roll",
    "start": "1651440",
    "end": "1657039"
  },
  {
    "text": "forward instead and so they they tend to drop the roll back scripts after a bit",
    "start": "1657039",
    "end": "1662440"
  },
  {
    "text": "because they're nervous because they they haven't run them and they don't know that they work but it's it's a good it's a good insurance and I've been",
    "start": "1662440",
    "end": "1668360"
  },
  {
    "text": "through that I've been through that exercise a few times on different projects",
    "start": "1668360",
    "end": "1673320"
  },
  {
    "text": "myself so we're now starting to get into the territory of things that we might think",
    "start": "1676399",
    "end": "1682760"
  },
  {
    "text": "of as kind of data migration patterns um and uh there's a variety of",
    "start": "1682760",
    "end": "1690480"
  },
  {
    "text": "these the the one the thing that we've just been through is a is is a data",
    "start": "1690480",
    "end": "1696080"
  },
  {
    "text": "migration pattern in its own right and it's it's what I would call a deployment time migration so this that pattern that",
    "start": "1696080",
    "end": "1704279"
  },
  {
    "text": "we've just described um this is what you do at deploy deployment time you make",
    "start": "1704279",
    "end": "1709360"
  },
  {
    "text": "the you make that happen as part of the deployment of your application always and so if there are any migrations that",
    "start": "1709360",
    "end": "1717200"
  },
  {
    "text": "are required it will apply them by default when you deploy the system uh",
    "start": "1717200",
    "end": "1722799"
  },
  {
    "text": "and that's great but there are times when that's not enough there are times",
    "start": "1722799",
    "end": "1728200"
  },
  {
    "text": "when the data sets too large or you don't want downtime with your application and all those kind of things",
    "start": "1728200",
    "end": "1734279"
  },
  {
    "text": "and that gets you into a different collection of patterns that are of interest and so I've just pulled a few",
    "start": "1734279",
    "end": "1741039"
  },
  {
    "text": "together to talk about so the first one's what I call Lazy reader so the",
    "start": "1741039",
    "end": "1747360"
  },
  {
    "text": "system can always read old versions of the data always every single",
    "start": "1747360",
    "end": "1754519"
  },
  {
    "text": "record is individually versioned so every record has a version number",
    "start": "1754519",
    "end": "1759640"
  },
  {
    "text": "associated with it and when a record is accessed the system at runtime selects",
    "start": "1759640",
    "end": "1766440"
  },
  {
    "text": "an appropriate reader to translate that version of the record into the current",
    "start": "1766440",
    "end": "1773279"
  },
  {
    "text": "usable system view of the world um the reader presents a",
    "start": "1773279",
    "end": "1779279"
  },
  {
    "text": "consistent upto-date interface to the system whatever the internal data structure this is best implemented using",
    "start": "1779279",
    "end": "1786080"
  },
  {
    "text": "a kind of strategy pattern for the readers and you use the schema version of the data as the key to identify which",
    "start": "1786080",
    "end": "1794159"
  },
  {
    "text": "which which reader to use um the best use case for this is with very very",
    "start": "1794159",
    "end": "1801679"
  },
  {
    "text": "large data sets if you've got humongous data sets this is perfect because if",
    "start": "1801679",
    "end": "1808080"
  },
  {
    "text": "youve got terabytes of or petabytes of data you can't afford to go and",
    "start": "1808080",
    "end": "1813640"
  },
  {
    "text": "translate those you can't afford to go and rewrite those I once worked on uh",
    "start": "1813640",
    "end": "1819519"
  },
  {
    "text": "building a trading system we built a financial exchange and the financial exchange",
    "start": "1819519",
    "end": "1825519"
  },
  {
    "text": "processed 1.3 times the daily volume of Twitter uh in data and most of the data",
    "start": "1825519",
    "end": "1832120"
  },
  {
    "text": "is really dull and boring but you have to keep it for seven years so we were generating it was it wasn't quite this",
    "start": "1832120",
    "end": "1839440"
  },
  {
    "text": "but it was roughly a terabyte a week of data that that we had to that we had to",
    "start": "1839440",
    "end": "1844799"
  },
  {
    "text": "Archive you can't afford to go and rewrite a terabyte a week it's just insane to even think about it so you",
    "start": "1844799",
    "end": "1852000"
  },
  {
    "text": "need a strategy like this you need to be able to dynamically so we just wrote the data and the the the beginning of the",
    "start": "1852000",
    "end": "1859080"
  },
  {
    "text": "stream of data you know was written with the old version of the schema and the",
    "start": "1859080",
    "end": "1864120"
  },
  {
    "text": "newest ver newest record was written out with a a new version of the screamer but we could read any of them we could read",
    "start": "1864120",
    "end": "1870559"
  },
  {
    "text": "any version um this is good for hot deployment because you can imagine you",
    "start": "1870559",
    "end": "1875720"
  },
  {
    "text": "know as as you if you change the version of the schemer that's that writes your application writes out something new you",
    "start": "1875720",
    "end": "1882519"
  },
  {
    "text": "deploy that and you you update all of the other readers to do the translation into your current mind model and you",
    "start": "1882519",
    "end": "1889360"
  },
  {
    "text": "know whatever you deploy is self-consistent whatever the nature of the data it's scalable it can cut with",
    "start": "1889360",
    "end": "1895519"
  },
  {
    "text": "vast amounts of data the translation cost is on every read and so it's spread out over time and therefore is effect in",
    "start": "1895519",
    "end": "1904760"
  },
  {
    "text": "effect free um the downside it adds runtime complexity if you um if this",
    "start": "1904760",
    "end": "1913039"
  },
  {
    "text": "idea scares you that's good because you've understood the problem the",
    "start": "1913039",
    "end": "1919320"
  },
  {
    "text": "we're going to have this ever growing collection of readers and every time we change our",
    "start": "1919320",
    "end": "1926960"
  },
  {
    "text": "internal representation we've got to go back and we got to change all of the readers so it's a maintenance burden",
    "start": "1926960",
    "end": "1932159"
  },
  {
    "text": "it's a significant overhead that we've got to stay on top of to keep all of the translators working and you in this",
    "start": "1932159",
    "end": "1939679"
  },
  {
    "text": "model you don't even try to ever achieve data consistency the consistency is in the application's view of the data not",
    "start": "1939679",
    "end": "1946519"
  },
  {
    "text": "in the data itself the data is never going to be",
    "start": "1946519",
    "end": "1951158"
  },
  {
    "text": "Rewritten the next in my um uh strategies is uh the idea of the lazy",
    "start": "1951799",
    "end": "1960360"
  },
  {
    "text": "migrator uh the system can read old versions and this time it writes out new",
    "start": "1960360",
    "end": "1966480"
  },
  {
    "text": "so when it comes across an old version of the data it's going to read it as the",
    "start": "1966480",
    "end": "1973039"
  },
  {
    "text": "old version and actively write it out translate it to the new version each",
    "start": "1973039",
    "end": "1979519"
  },
  {
    "text": "record again is versioned when a record is accessed we pick a suitable migrator",
    "start": "1979519",
    "end": "1985799"
  },
  {
    "text": "and that is used to read in the old version of the record and translate it write it out in its new form this is",
    "start": "1985799",
    "end": "1993159"
  },
  {
    "text": "again best implemented as a strategy pattern and using the schema version to identify the appropriate",
    "start": "1993159",
    "end": "2001080"
  },
  {
    "text": "strategy um the best use cases for this hot deployments large data sets Pro",
    "start": "2001200",
    "end": "2008679"
  },
  {
    "text": "pretty pretty extensive data sets it works at fairly large scales perhaps not",
    "start": "2008679",
    "end": "2013720"
  },
  {
    "text": "quite as large as the the previous one uh it's good for hot deployment because",
    "start": "2013720",
    "end": "2019919"
  },
  {
    "text": "um because we can you know when we deploy it's going to be able to read old versions of the data and as long as",
    "start": "2019919",
    "end": "2025600"
  },
  {
    "text": "we've got the migrators in place we're good to go uh it's scalable translation",
    "start": "2025600",
    "end": "2030799"
  },
  {
    "text": "cost is on every read again so so it's spread out over time and migrations can be chained together so you can imagine a",
    "start": "2030799",
    "end": "2038000"
  },
  {
    "text": "migrator that goes from version one to version two and then another one that goes from version two to version three",
    "start": "2038000",
    "end": "2044639"
  },
  {
    "text": "and you as long as you do them sequentially everything's going to work fine um the system is eventually",
    "start": "2044639",
    "end": "2050960"
  },
  {
    "text": "consistent with with with respect to data you can't tell when all of the translations will have happened but at",
    "start": "2050960",
    "end": "2058280"
  },
  {
    "text": "some point you assume that they will you know as long as you've you access every record in the database at some point in",
    "start": "2058280",
    "end": "2064919"
  },
  {
    "text": "the future every record in the database will be translated ated um again it adds runtime",
    "start": "2064919",
    "end": "2072240"
  },
  {
    "text": "complexity the downside the other downside is it's not clear when migration is finished when when you are",
    "start": "2072240",
    "end": "2078440"
  },
  {
    "text": "done because it's kind of a drip feed as you're as you're just reading data and it's driven on demand when people ask",
    "start": "2078440",
    "end": "2085118"
  },
  {
    "text": "for data that's when you'll translate it the maintenance overhead is similar on a",
    "start": "2085119",
    "end": "2091679"
  },
  {
    "text": "similar kind of scale to the to the lazy reader in that we've got to maintain",
    "start": "2091679",
    "end": "2096800"
  },
  {
    "text": "this collection of migrators uh the slight caveat there is that because we",
    "start": "2096800",
    "end": "2102560"
  },
  {
    "text": "can chain these together each migrator we don't we don't quite have the",
    "start": "2102560",
    "end": "2107680"
  },
  {
    "text": "maintenance burden to always bring everything up to date to to the latest version of the the applications",
    "start": "2107680",
    "end": "2113920"
  },
  {
    "text": "understanding so that's a slight benefit uh next is the downtime migrator",
    "start": "2113920",
    "end": "2122560"
  },
  {
    "text": "so again the system can read old versions and write out new but this time we're going to change the way that we",
    "start": "2122560",
    "end": "2128160"
  },
  {
    "text": "organize that each record is versioned again but now old records are actively searched for and migrated when the",
    "start": "2128160",
    "end": "2135680"
  },
  {
    "text": "system is Idle during downtime of the system we go and scavenge and see if we can find anything that's out of date and",
    "start": "2135680",
    "end": "2142200"
  },
  {
    "text": "we're going to translate that behind the scenes um this is good for hot",
    "start": "2142200",
    "end": "2147920"
  },
  {
    "text": "deployment and medium to largish data sets I'll explain what I mean by that in",
    "start": "2147920",
    "end": "2153079"
  },
  {
    "text": "a minute um the advantage of this uh hot deployment scalable because the translation cost is in",
    "start": "2153079",
    "end": "2159920"
  },
  {
    "text": "downtime um you can discard translators once all of the records have if you do a",
    "start": "2159920",
    "end": "2165800"
  },
  {
    "text": "scavenge run and you you can't find any records in an old version at that point you could throw away that translator um",
    "start": "2165800",
    "end": "2174200"
  },
  {
    "text": "the system is eventually consistent with respect to data and you can chain the migrations together again as before uh R",
    "start": "2174200",
    "end": "2181200"
  },
  {
    "text": "runtime complexity um and this may be inappropriate for vast data sets it time",
    "start": "2181200",
    "end": "2188720"
  },
  {
    "text": "is finite there's only so much time and there's only so much idle time if you if",
    "start": "2188720",
    "end": "2194280"
  },
  {
    "text": "you if you use up all of the idle time doing translations because your data set is so huge then this isn't going to work",
    "start": "2194280",
    "end": "2202119"
  },
  {
    "text": "for you so so this isn't quite as scalable as the other two but it's pretty good you can use you can do this",
    "start": "2202119",
    "end": "2208480"
  },
  {
    "text": "with some pretty large data sets and it's going to work",
    "start": "2208480",
    "end": "2214000"
  },
  {
    "text": "okay um the last one to mention is the one that we've already mentioned the deployment time migrator on deployment",
    "start": "2215280",
    "end": "2221240"
  },
  {
    "text": "the system migrates all records um the advantage of this and it's a big",
    "start": "2221240",
    "end": "2227240"
  },
  {
    "text": "Advantage the reason why I started with it is because it's simple to understand it's it's kind of obvious that at the",
    "start": "2227240",
    "end": "2233599"
  },
  {
    "text": "point at which we deploy the software that requires a new version of the data that's a good time to migrate you know",
    "start": "2233599",
    "end": "2239520"
  },
  {
    "text": "it's it's that's pretty pretty good it can be implemented either as a startup",
    "start": "2239520",
    "end": "2244880"
  },
  {
    "text": "behavior of the system itself the system is responsible for its own migration or",
    "start": "2244880",
    "end": "2250240"
  },
  {
    "text": "we can treat this as an independent process but that's managed by the deployment tool so at deplo point at",
    "start": "2250240",
    "end": "2256280"
  },
  {
    "text": "which we deploy we go and in inspect the uh release candidate the Deployable thing to to see what version it needs",
    "start": "2256280",
    "end": "2263680"
  },
  {
    "text": "and then we then we apply any migrations that are required the downside of this is it's",
    "start": "2263680",
    "end": "2270280"
  },
  {
    "text": "it's a little bit tricky to test um we've got we we we we're tempted to test",
    "start": "2270280",
    "end": "2276160"
  },
  {
    "text": "the data itself and the migrations it can be slow if you've got very large",
    "start": "2276160",
    "end": "2281520"
  },
  {
    "text": "data sets it can it can take a long time to do some of these migrations um I had",
    "start": "2281520",
    "end": "2287960"
  },
  {
    "text": "a client recently that was that was very nervous",
    "start": "2287960",
    "end": "2293040"
  },
  {
    "text": "because they were running out of time literally uh when they deployed they",
    "start": "2293040",
    "end": "2299359"
  },
  {
    "text": "they their software was was was was deployed by um field Representatives",
    "start": "2299359",
    "end": "2305040"
  },
  {
    "text": "they have a a an army of people Vans going and delivering software to in this",
    "start": "2305040",
    "end": "2311400"
  },
  {
    "text": "case hospitals and they would go and they would deploy the software but the cost of migration was so large that they",
    "start": "2311400",
    "end": "2318599"
  },
  {
    "text": "were running out of time so that they couldn't do it in a single day they couldn't it took more than a day to",
    "start": "2318599",
    "end": "2325040"
  },
  {
    "text": "migrate the data and that is becoming a problem so this is a downside of deployment time",
    "start": "2325040",
    "end": "2330880"
  },
  {
    "text": "migration it requires application downtime you can't really M it doesn't",
    "start": "2330880",
    "end": "2336960"
  },
  {
    "text": "make sense sense to be migrating data um while the apps live creating all",
    "start": "2336960",
    "end": "2344119"
  },
  {
    "text": "new old records because you're going to when are you going to translate those new old records how you going to deal",
    "start": "2344119",
    "end": "2349599"
  },
  {
    "text": "with those so it's not ideal for kind of frequent continuous delivery style",
    "start": "2349599",
    "end": "2357040"
  },
  {
    "text": "deployment let's think about testing uh these",
    "start": "2358520",
    "end": "2364599"
  },
  {
    "text": "migrations I think it's a fairly common mistake um to focus testing for data",
    "start": "2364599",
    "end": "2371680"
  },
  {
    "text": "migration on the state that the database ends up in and I think that's probably a",
    "start": "2371680",
    "end": "2378480"
  },
  {
    "text": "mistake I think that gets you into complicated territory about what that",
    "start": "2378480",
    "end": "2383640"
  },
  {
    "text": "means and narrows your focus to testing to testing only only a small set",
    "start": "2383640",
    "end": "2390640"
  },
  {
    "text": "of cases I think a better focus for testing these sorts of things is to kind",
    "start": "2390640",
    "end": "2396760"
  },
  {
    "text": "of take K data migration unit testing approach so instead Focus your testing",
    "start": "2396760",
    "end": "2402520"
  },
  {
    "text": "on validating that the migration script for your data or your migrator does what",
    "start": "2402520",
    "end": "2409240"
  },
  {
    "text": "you think it does and test that so take a kind of test driven approach to data",
    "start": "2409240",
    "end": "2416359"
  },
  {
    "text": "migration and I think that's by far the the better way of doing these and evaluating these largely using synthetic",
    "start": "2416359",
    "end": "2422599"
  },
  {
    "text": "data it means you can get more interesting cases that you validate in your test to check that it",
    "start": "2422599",
    "end": "2429400"
  },
  {
    "text": "works um migration testing is a little bit different to regular unit testing",
    "start": "2429400",
    "end": "2434599"
  },
  {
    "text": "though uh and I would recommend that you include migration testing as part of",
    "start": "2434599",
    "end": "2441200"
  },
  {
    "text": "your continuous integration uh uh stage in your deployment pipeline so that at",
    "start": "2441200",
    "end": "2448000"
  },
  {
    "text": "the point at which you commit uh you're going to run all of the migration tests alongside any other unit test so you get",
    "start": "2448000",
    "end": "2454800"
  },
  {
    "text": "fast feedback and you know that your migration scripts uh do what you think that they do um but the one of the key",
    "start": "2454800",
    "end": "2462960"
  },
  {
    "text": "differences here is that you care about the order for these things for regular",
    "start": "2462960",
    "end": "2468079"
  },
  {
    "text": "unit tests you don't care what order they they work in but for this you do so",
    "start": "2468079",
    "end": "2473160"
  },
  {
    "text": "the the the pattern is that you you check out a particular version you apply",
    "start": "2473160",
    "end": "2478800"
  },
  {
    "text": "the migration of that version uh you test the migration and then you apply",
    "start": "2478800",
    "end": "2484480"
  },
  {
    "text": "the next migration then you test that and then you apply the next migration and you test that and so on because",
    "start": "2484480",
    "end": "2490079"
  },
  {
    "text": "they're additive and you build them up in order if you're going to do that kind of [Music]",
    "start": "2490079",
    "end": "2496440"
  },
  {
    "text": "testing there's another aspect to data Beyond just migration and thinking about",
    "start": "2496440",
    "end": "2503000"
  },
  {
    "text": "data in the context of continuous delivery and that's really about managing data uh in tests uh we'd like",
    "start": "2503000",
    "end": "2513079"
  },
  {
    "text": "to be able to run our tests anywhere and the best way to to achieve that is to uh",
    "start": "2513079",
    "end": "2520160"
  },
  {
    "text": "ensure that our system is in a fairly neutral state by that I mean largely",
    "start": "2520160",
    "end": "2525920"
  },
  {
    "text": "empty of data we'd like to be able to deploy it with nothing there and then",
    "start": "2525920",
    "end": "2531319"
  },
  {
    "text": "generate the data during the course of the testing I think when we start following",
    "start": "2531319",
    "end": "2536599"
  },
  {
    "text": "this line of reasoning we we we start I think there are three obvious different",
    "start": "2536599",
    "end": "2541880"
  },
  {
    "text": "categories of data that are worth thinking about and we've kind of touched on these briefly already the first one",
    "start": "2541880",
    "end": "2547319"
  },
  {
    "text": "has been our Focus so far really transactional data the data that is generated during the operation of our of",
    "start": "2547319",
    "end": "2554280"
  },
  {
    "text": "our systems the next is kind of reference data and this is sort of the",
    "start": "2554280",
    "end": "2560760"
  },
  {
    "text": "lookup data post codes or zip codes or you know symbol tables that kind of",
    "start": "2560760",
    "end": "2566280"
  },
  {
    "text": "stuff and that has the interesting characteristic the useful characteristic that it's read only it's kind of lookup",
    "start": "2566280",
    "end": "2573720"
  },
  {
    "text": "data that we're not going to write back to we're not going to change and the last one is kind of",
    "start": "2573720",
    "end": "2579040"
  },
  {
    "text": "configuration data that is data that does something to define or parameterize",
    "start": "2579040",
    "end": "2585000"
  },
  {
    "text": "the the behavior of our system in some way and then we could think of these",
    "start": "2585000",
    "end": "2591000"
  },
  {
    "text": "three different strategies so we could choose to use production data we could",
    "start": "2591000",
    "end": "2597480"
  },
  {
    "text": "generate data in the scope of a test and use targeted synthetic data or we could",
    "start": "2597480",
    "end": "2604359"
  },
  {
    "text": "use what I call version data which is you you can imagine your deployment",
    "start": "2604359",
    "end": "2609640"
  },
  {
    "text": "tools doing something like okay I'm deploying to an acceptance test environment and therefore I need to",
    "start": "2609640",
    "end": "2616240"
  },
  {
    "text": "deploy this set of data to to for to support those tests you could imagine",
    "start": "2616240",
    "end": "2621400"
  },
  {
    "text": "doing that kind of thing that's what I mean by versioned data so let's go through each of these different three",
    "start": "2621400",
    "end": "2626880"
  },
  {
    "text": "classes of data and see which of those strategies works best so I don't want to",
    "start": "2626880",
    "end": "2632599"
  },
  {
    "text": "use production data for testing transactional behaviors I see this quite a lot in clients that have kind of a",
    "start": "2632599",
    "end": "2640640"
  },
  {
    "text": "reasonably if you'll forgive me oldfashioned take on automated testing",
    "start": "2640640",
    "end": "2645720"
  },
  {
    "text": "they'll just throw production data at their system",
    "start": "2645720",
    "end": "2651520"
  },
  {
    "text": "and okay that might be better than doing nothing but it's not much better than",
    "start": "2651520",
    "end": "2656760"
  },
  {
    "text": "doing nothing um it doesn't really get you to evaluate the interesting cases",
    "start": "2656760",
    "end": "2662280"
  },
  {
    "text": "you can't kind of try the corner cases and find out what happens if this weird thing happens and that's usually where",
    "start": "2662280",
    "end": "2669000"
  },
  {
    "text": "our software screws up so that's really the interesting cases so we don't want",
    "start": "2669000",
    "end": "2674079"
  },
  {
    "text": "to use production data it's too big it's too unwieldy and it's not targeted",
    "start": "2674079",
    "end": "2679480"
  },
  {
    "text": "enough for us to be able to do good tests so we prefer to generate these in",
    "start": "2679480",
    "end": "2684760"
  },
  {
    "text": "the scope of the tests at the time that we we write an individual test that test",
    "start": "2684760",
    "end": "2691359"
  },
  {
    "text": "as a set of data that must be in place to get the system into the state that we want it in and so so we're going to uh",
    "start": "2691359",
    "end": "2698960"
  },
  {
    "text": "we're going to do that last we don't want to use version to test data because again uh that's too",
    "start": "2698960",
    "end": "2706640"
  },
  {
    "text": "generic it means that it's likely to be shared between test cases and that's a danger because it means that we're going",
    "start": "2706640",
    "end": "2712359"
  },
  {
    "text": "to then leak information between tests and we're going to compromise out the repeatability of our test cases I want",
    "start": "2712359",
    "end": "2719559"
  },
  {
    "text": "to be able to run any test over and over again and get the same results every time and that means let's this simplest",
    "start": "2719559",
    "end": "2727599"
  },
  {
    "text": "best way of doing that is to generating the scope of a test next reference data again I don't want to use production",
    "start": "2727599",
    "end": "2734480"
  },
  {
    "text": "data reference data for a production system is usually large if we've got a lookup table of post codes or zip codes",
    "start": "2734480",
    "end": "2743160"
  },
  {
    "text": "it's probably in the millions and so I don't want to be deploying millions of records for a test mostly I'm just going",
    "start": "2743160",
    "end": "2751400"
  },
  {
    "text": "to generate it in the scope of the test I'm going to fake the reference data some way and generate it in the scope",
    "start": "2751400",
    "end": "2757000"
  },
  {
    "text": "for the test there might be some utility to using version data for this because",
    "start": "2757000",
    "end": "2762640"
  },
  {
    "text": "it's read only we can use that Advantage so instead of having lookup data with",
    "start": "2762640",
    "end": "2768440"
  },
  {
    "text": "millions of Records we could you know a zip a postcode lookup with millions of",
    "start": "2768440",
    "end": "2773720"
  },
  {
    "text": "Records we could have a we could just have 50 records in our postcode table or something like that we could do that",
    "start": "2773720",
    "end": "2780599"
  },
  {
    "text": "kind of thing so maybe use version test data but my preference would still be to generate it in the scope of the test and",
    "start": "2780599",
    "end": "2786920"
  },
  {
    "text": "and then you can Target exactly what you want configuration data is interesting",
    "start": "2786920",
    "end": "2793079"
  },
  {
    "text": "though that's kind of the opposite of transactional data for this my",
    "start": "2793079",
    "end": "2800000"
  },
  {
    "text": "preference by a long way is to have the production configuration be the default",
    "start": "2800000",
    "end": "2805760"
  },
  {
    "text": "configuration of the system if I configure my system in a",
    "start": "2805760",
    "end": "2811319"
  },
  {
    "text": "test environment and use the same configuration as I will in production",
    "start": "2811319",
    "end": "2817000"
  },
  {
    "text": "that means I can test the configuration if I've got some",
    "start": "2817000",
    "end": "2822599"
  },
  {
    "text": "dramatically fake version of the configuration in a test environment then I don't know whether my system is going",
    "start": "2822599",
    "end": "2828640"
  },
  {
    "text": "to work in production so that gives me a big Power so I I much prefer to use the",
    "start": "2828640",
    "end": "2834440"
  },
  {
    "text": "production configuration uh for any testing now there may be some unusual",
    "start": "2834440",
    "end": "2840640"
  },
  {
    "text": "kinds of tests really testing the range of configurability that I might want to",
    "start": "2840640",
    "end": "2846400"
  },
  {
    "text": "do and so I might want to generate some of these things within the scope of a",
    "start": "2846400",
    "end": "2851480"
  },
  {
    "text": "test but that's a fairly unusual Corner case and there are certainly going to be",
    "start": "2851480",
    "end": "2859680"
  },
  {
    "text": "some things that I don't want to use the production version I don't want to be writing test data into the production",
    "start": "2859680",
    "end": "2867200"
  },
  {
    "text": "database so I'd like to use a different you know point to a different data store",
    "start": "2867200",
    "end": "2872599"
  },
  {
    "text": "in my test so some version test data is a good good idea some overrides so my",
    "start": "2872599",
    "end": "2879480"
  },
  {
    "text": "preferred approach is that you have production uh configuration by default",
    "start": "2879480",
    "end": "2884839"
  },
  {
    "text": "and then you override the sensitive bits any secrets any passwords or anything",
    "start": "2884839",
    "end": "2889920"
  },
  {
    "text": "like that or any any stores that you you know use a different messaging system or",
    "start": "2889920",
    "end": "2895480"
  },
  {
    "text": "a different database to the production version that kind of thing",
    "start": "2895480",
    "end": "2902000"
  },
  {
    "text": "we I'm going to whiz through this so so what about machine learning because",
    "start": "2907040",
    "end": "2913160"
  },
  {
    "text": "that's really different right that's a different kind of thing and I don't know",
    "start": "2913160",
    "end": "2918319"
  },
  {
    "text": "how many people on the call are interested in machine learning may maybe maybe some and I I should say very",
    "start": "2918319",
    "end": "2925200"
  },
  {
    "text": "clearly I am not a machine learning expert um but I've been involved in a few interesting conversations with some",
    "start": "2925200",
    "end": "2931920"
  },
  {
    "text": "people that are um and um I think",
    "start": "2931920",
    "end": "2937160"
  },
  {
    "text": "there's some some some ideas that are worth thinking about there there's some",
    "start": "2937160",
    "end": "2943000"
  },
  {
    "text": "relatively complicated pictures in this that I'm going to whiz through quite quickly but just just try and put the",
    "start": "2943000",
    "end": "2949160"
  },
  {
    "text": "ideas in front of you uh machine learning models have a shelf life that",
    "start": "2949160",
    "end": "2954280"
  },
  {
    "text": "they they are going to go out of date and so to being able to keep them up to date and to to to um change things with",
    "start": "2954280",
    "end": "2962839"
  },
  {
    "text": "control is kind of fundamental and being able to do that",
    "start": "2962839",
    "end": "2968559"
  },
  {
    "text": "efficiently uh is important um people doing sophisticated things with me",
    "start": "2968559",
    "end": "2973960"
  },
  {
    "text": "machine learning will often take weeks months sometimes even years training algorithms and going through the",
    "start": "2973960",
    "end": "2980720"
  },
  {
    "text": "iterations to train things that sounds an awful like like an awful lot like where we were in",
    "start": "2980720",
    "end": "2988720"
  },
  {
    "text": "more regular software development a decade or so ago where we were you know waiting a very long time to find out",
    "start": "2988720",
    "end": "2995079"
  },
  {
    "text": "whether our stuff worked that's generally a bad idea so I think that in many ways continuous delivery is even",
    "start": "2995079",
    "end": "3002040"
  },
  {
    "text": "more important for these sorts of things um than it is for for for regular",
    "start": "3002040",
    "end": "3008599"
  },
  {
    "text": "systems um this is a a quote from Emily coiny who's one of the people that that",
    "start": "3008599",
    "end": "3015000"
  },
  {
    "text": "that I've been talking to about some of this stuff she she's data scientist for Thought works and continuous to live",
    "start": "3015000",
    "end": "3021280"
  },
  {
    "text": "from machine learning is about transitioning from Research into production States so it's important to",
    "start": "3021280",
    "end": "3026960"
  },
  {
    "text": "be able to do that reliably repeatably efficiently the normal kind of pattern",
    "start": "3026960",
    "end": "3035160"
  },
  {
    "text": "of what's going on with machine learning is something like this we're going to have some some desired results some",
    "start": "3035160",
    "end": "3040799"
  },
  {
    "text": "Target that we're going to that we going to try and Achieve and we're going to throw some training data at it and they",
    "start": "3040799",
    "end": "3046760"
  },
  {
    "text": "going to the we're going to train the the algorithm in order to be able to generate a model at which point we'd",
    "start": "3046760",
    "end": "3052599"
  },
  {
    "text": "like to be able to deploy that model uh into production and have it operate on live data and make predictions and and",
    "start": "3052599",
    "end": "3061079"
  },
  {
    "text": "and results in reality it's a bit more complicated than that and there's the",
    "start": "3061079",
    "end": "3066200"
  },
  {
    "text": "these kind of breakdowns of of what's going on there's kind of the data",
    "start": "3066200",
    "end": "3072079"
  },
  {
    "text": "acquisition and and and preparation uh in in terms of getting ready for",
    "start": "3072079",
    "end": "3078400"
  },
  {
    "text": "training sort of allocating um you know try to figure out what data to use to",
    "start": "3078400",
    "end": "3084160"
  },
  {
    "text": "train our models and what targets to to to to aim it at and then experimentation",
    "start": "3084160",
    "end": "3090680"
  },
  {
    "text": "as as we do the model development and the training itself and there's a feedback loop to establish from from to",
    "start": "3090680",
    "end": "3096920"
  },
  {
    "text": "to evaluate the accuracy of our training and whether that works or not and whe whether we need to think about about",
    "start": "3096920",
    "end": "3102760"
  },
  {
    "text": "fixing the data that we are using for either our Target or for our training",
    "start": "3102760",
    "end": "3107839"
  },
  {
    "text": "data and then ultimately if we get to the some desired level of accuracy with that training Loop then we're going to",
    "start": "3107839",
    "end": "3114520"
  },
  {
    "text": "go out into production and deploy this into into production and again we need to be",
    "start": "3114520",
    "end": "3119599"
  },
  {
    "text": "monitoring that and understanding whether the accuracy is being maintained in production or whether it",
    "start": "3119599",
    "end": "3127040"
  },
  {
    "text": "started um spouting fascist rants like the Google thing did and and we need to",
    "start": "3127040",
    "end": "3133400"
  },
  {
    "text": "pull it we need to understand whether that's going on um",
    "start": "3133400",
    "end": "3139640"
  },
  {
    "text": "so this model is is is kind of interesting what what could we think of",
    "start": "3139640",
    "end": "3145119"
  },
  {
    "text": "doing for these kind of things well obviously we want to vers control the",
    "start": "3145119",
    "end": "3150240"
  },
  {
    "text": "training data and the desired result and the the targets and also the models that we generate we want we want to know",
    "start": "3150240",
    "end": "3156400"
  },
  {
    "text": "which version of the model we want to manage that stuff and strangely this isn't always obvious to people that are",
    "start": "3156400",
    "end": "3163319"
  },
  {
    "text": "doing machine learning but this is obvious if we think about this in the context of more regular software",
    "start": "3163319",
    "end": "3168720"
  },
  {
    "text": "development and then we we want to manage the environments in which things things work things like ideas like",
    "start": "3168720",
    "end": "3175559"
  },
  {
    "text": "infrastructure code to make sure that those environments are repeatable and reliable uh and are going to work",
    "start": "3175559",
    "end": "3181040"
  },
  {
    "text": "effectively so we can apply that kind of thinking too um we could think about where to to",
    "start": "3181040",
    "end": "3187720"
  },
  {
    "text": "add this so we can use Version Control for model development and infrastructure",
    "start": "3187720",
    "end": "3193599"
  },
  {
    "text": "as code for the training environment and Version Control for the the data",
    "start": "3193599",
    "end": "3198960"
  },
  {
    "text": "acquisition and combination for the data prep um infrastructure is code for all",
    "start": "3198960",
    "end": "3204760"
  },
  {
    "text": "of these environments and and and so on and so we can start to see",
    "start": "3204760",
    "end": "3210559"
  },
  {
    "text": "that this problem is not very different in many aspects now the the problem is",
    "start": "3210559",
    "end": "3216240"
  },
  {
    "text": "is that the it's not that we don't want repeatability and determinism I think",
    "start": "3216240",
    "end": "3223720"
  },
  {
    "text": "from my perspective and remember as what I said at the my caveat is is that I'm not a machine learning expert but from",
    "start": "3223720",
    "end": "3230359"
  },
  {
    "text": "my perspective there is no real difference in this respect between a machine Learning System and other the",
    "start": "3230359",
    "end": "3237160"
  },
  {
    "text": "way in which we generate the the the model the the the",
    "start": "3237160",
    "end": "3242839"
  },
  {
    "text": "code that we want to execute in production that process is slight is a",
    "start": "3242839",
    "end": "3247920"
  },
  {
    "text": "little different but we still want that to be repeatable we still want that to be reliable given the same sets of",
    "start": "3247920",
    "end": "3254200"
  },
  {
    "text": "inputs we'd like to be able to get the same sets of outputs we'd like to get all of that information as quickly and as efficiently as we possibly can so we",
    "start": "3254200",
    "end": "3260880"
  },
  {
    "text": "can establish clean feedback loops so that we can learn more efficiently I think that means that we",
    "start": "3260880",
    "end": "3267960"
  },
  {
    "text": "need deployment pipelines we need to think about how to create a deployment pipeline for machine learning how do we",
    "start": "3267960",
    "end": "3275520"
  },
  {
    "text": "manage this regularize this so that it works",
    "start": "3275520",
    "end": "3281240"
  },
  {
    "text": "so what's a m a release candidate mean for machine learning well for conventional systems a release candidate",
    "start": "3281240",
    "end": "3288000"
  },
  {
    "text": "is a working Deployable system I think for machine learning a release candidate",
    "start": "3288000",
    "end": "3293599"
  },
  {
    "text": "is a working Deployable model including the monitoring Al and alerting Associated do that it's really not very",
    "start": "3293599",
    "end": "3302119"
  },
  {
    "text": "different so is there a version of a deployment pipeline that we could think",
    "start": "3302640",
    "end": "3307920"
  },
  {
    "text": "of applying for machine Learning Systems my caveat before I show you this",
    "start": "3307920",
    "end": "3315400"
  },
  {
    "text": "is that we're not there yet but some first thoughts some starting points so",
    "start": "3315400",
    "end": "3322680"
  },
  {
    "text": "we could think about version version control and artifact reposit are for managing the the the the",
    "start": "3322680",
    "end": "3330680"
  },
  {
    "text": "information that we're going to deal with that's a surprise that's not what lots of people do lots of people doing",
    "start": "3330680",
    "end": "3337280"
  },
  {
    "text": "data scientists don't even take that step so that's a good step forwards um we want to be able to have",
    "start": "3337280",
    "end": "3344920"
  },
  {
    "text": "discoverable and accessible data we'd like to be able to ver have have the the stuff at training materials and our",
    "start": "3344920",
    "end": "3351680"
  },
  {
    "text": "targets really usefully Version Control and we want to have the infrastructure",
    "start": "3351680",
    "end": "3356880"
  },
  {
    "text": "for environments and and experiments repeatable uh and uh and use",
    "start": "3356880",
    "end": "3362359"
  },
  {
    "text": "infrastructure as code techniques to be able to do that um we want to be able to encode model performance and assessment",
    "start": "3362359",
    "end": "3369119"
  },
  {
    "text": "tracking we don't want that to be ad hoc we want to think about that design it use engineering principles to be able to",
    "start": "3369119",
    "end": "3374280"
  },
  {
    "text": "collect that information and we want to have model model monitoring and observability in production so that we",
    "start": "3374280",
    "end": "3380599"
  },
  {
    "text": "can learn from these things um the best way to test model",
    "start": "3380599",
    "end": "3387720"
  },
  {
    "text": "performance is to see how it performs with real world data so in an Ideal World what machine learning",
    "start": "3387720",
    "end": "3393640"
  },
  {
    "text": "practitioners should be doing is taking smaller steps small steps doing the",
    "start": "3393640",
    "end": "3399319"
  },
  {
    "text": "training get the training understand the training then get the model out see how it works monitor it figure that out and",
    "start": "3399319",
    "end": "3405599"
  },
  {
    "text": "be able to round trip that be able to go around and do that over again and that would be a more effective way of working",
    "start": "3405599",
    "end": "3412319"
  },
  {
    "text": "we should be thinking about doing things like deploying multiple models in production and comparing the results between different models in production",
    "start": "3412319",
    "end": "3419200"
  },
  {
    "text": "with real world data and that's that's what we would call AB testing in other",
    "start": "3419200",
    "end": "3424559"
  },
  {
    "text": "scenarios and continuous delivery is kind of table Stakes for that kind of thing we need that kind of regularity",
    "start": "3424559",
    "end": "3430880"
  },
  {
    "text": "and maintenance to be able to do this um that's my talk that's uh that's the",
    "start": "3430880",
    "end": "3438520"
  },
  {
    "text": "content of my presentation I've o overrun by a few minutes but we've got uh we've got time for questions so if",
    "start": "3438520",
    "end": "3444920"
  },
  {
    "text": "there are any questions I'd be very happy to uh take them I'll point you to my links um I've got a blog site um you",
    "start": "3444920",
    "end": "3453240"
  },
  {
    "text": "can follow me on Twitter and we got have some good conversations on Twitter we've been doing some conversation starters",
    "start": "3453240",
    "end": "3459799"
  },
  {
    "text": "and having some good Chats on Twitter of L and I have a YouTube channel where I talk about continuous delivery and lots",
    "start": "3459799",
    "end": "3465640"
  },
  {
    "text": "of other stuff [Music]",
    "start": "3465640",
    "end": "3475449"
  }
]