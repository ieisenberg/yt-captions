[
  {
    "start": "0",
    "end": "226000"
  },
  {
    "text": "so I get the pleasure of just introducing myself today uh so I will tell you that um I am not Marchin",
    "start": "12160",
    "end": "19520"
  },
  {
    "text": "sakowitz sotz I don't even say his name right but Marchin just to give you a little background Marchin uh was",
    "start": "19520",
    "end": "25119"
  },
  {
    "text": "supposed to be doing a talk here uh but they've just had a brand new baby and it was it was schedule a little bit as",
    "start": "25119",
    "end": "31000"
  },
  {
    "text": "babies you know don't follow schedule right and so he is staying with his family we're really happy we're supporting that so I am stepping in to",
    "start": "31000",
    "end": "37719"
  },
  {
    "text": "do a talk here so but uh shout out we're recording this shout out to Marchin uh he has helped put this event together he",
    "start": "37719",
    "end": "44600"
  },
  {
    "text": "is local he's part of your local community he works with Ryan a and and he's fabulous so Mar and thank you very",
    "start": "44600",
    "end": "49960"
  },
  {
    "text": "much I hope I do you justice here all right that being said um tell you who I",
    "start": "49960",
    "end": "56280"
  },
  {
    "text": "am and what we're going to talk about so my name is Eric Johnson uh a developer advocate for serverless I've been with",
    "start": "56280",
    "end": "62480"
  },
  {
    "text": "AWS for six years in October uh and uh I love what I do uh and I so so my team is",
    "start": "62480",
    "end": "69360"
  },
  {
    "text": "actually part of the team uh my team and a couple of our teams are one of the ones that put on this event and we're",
    "start": "69360",
    "end": "74920"
  },
  {
    "text": "just thrilled again to be here for the first time in Poland and I love to talk about Eda I so I'm a serous guy but the",
    "start": "74920",
    "end": "83600"
  },
  {
    "text": "fun thing is is almost all servus is Eda well not all Eda is servus all servus is",
    "start": "83600",
    "end": "89400"
  },
  {
    "text": "Eda and and there's some who may debate me on that and they're wrong and that's okay so uh but today we're going to be",
    "start": "89400",
    "end": "95159"
  },
  {
    "text": "talking about how do you build nextg applications using Eda we're going to",
    "start": "95159",
    "end": "100200"
  },
  {
    "text": "talk about some patterns and how do you apply those and things like that so real quick a little bit about who I am like I said I'm I'm principal da for servus",
    "start": "100200",
    "end": "107360"
  },
  {
    "text": "I've been a developer advocate for uh you know for about well I've been a developer for about 30 years I've been a",
    "start": "107360",
    "end": "113159"
  },
  {
    "text": "soluces architect for 10 years uh there are some who argue that I'm either one of those I am a father of five uh so",
    "start": "113159",
    "end": "120680"
  },
  {
    "text": "that's crazy uh now you may be looking at me right now and going that's not a five Eric and I know that okay so",
    "start": "120680",
    "end": "128239"
  },
  {
    "text": "there's a couple of rules when I'm talking uh rules is probably a strong statement but a couple of of guidelines",
    "start": "128239",
    "end": "134920"
  },
  {
    "text": "that'll help you now did anybody see me talk yesterday okay all right so you're in to do this again you guys are crazy",
    "start": "134920",
    "end": "141480"
  },
  {
    "text": "all right but it will be a little different because I never I don't have a good enough memory to do the same but",
    "start": "141480",
    "end": "146599"
  },
  {
    "text": "when I talk there are some rules and then they're basically this uh this is any number I want it to be okay I'm",
    "start": "146599",
    "end": "152800"
  },
  {
    "text": "going to hold this up I'll say five I'll say 20 I'll say 30 it just works okay and it's been that way all my life so",
    "start": "152800",
    "end": "158519"
  },
  {
    "text": "that's five kids now I can get to four if I take my shoes off but it gets really awkward for everybody right so",
    "start": "158519",
    "end": "165080"
  },
  {
    "text": "this is any number I want it to be these are quotes not apostrophes right this",
    "start": "165080",
    "end": "170280"
  },
  {
    "text": "looks better than me doing this right and finally these are thumbs right I do this a lot this you know I'm I give",
    "start": "170280",
    "end": "176720"
  },
  {
    "text": "people thumbs up if you know me at all how you doing like hey you know and I do this because this will get you beat up",
    "start": "176720",
    "end": "183120"
  },
  {
    "text": "okay so these are thumbs right so just a couple of rules I'm talking that helps out now I was born this way I did not",
    "start": "183120",
    "end": "190879"
  },
  {
    "text": "wake up this way for the first time today if I did I wouldn't be here with you okay I like you but not that much",
    "start": "190879",
    "end": "197720"
  },
  {
    "text": "I'd be somewhere coping right so uh but I do tell a lot of one finger jokes and",
    "start": "197720",
    "end": "202840"
  },
  {
    "text": "I'm very very comfortable with that however and and I'm really serious about this if that makes you uncomfortable I'm",
    "start": "202840",
    "end": "209519"
  },
  {
    "text": "also so comfortable with that so I'm good either way and we'll have a good time so all right so let's get started",
    "start": "209519",
    "end": "215920"
  },
  {
    "text": "that's what I look like in case you can't tell um it doesn't get any better than that uh that's just that's how it",
    "start": "215920",
    "end": "222080"
  },
  {
    "text": "is so all right so let's uh let get my there it's working all right so our",
    "start": "222080",
    "end": "227640"
  },
  {
    "start": "226000",
    "end": "278000"
  },
  {
    "text": "agenda today is we're going to talk about a couple things Eda first thing we're going to talk about coupling uh you know when we talk about event driven",
    "start": "227640",
    "end": "233040"
  },
  {
    "text": "architecture we talk about distributed applications the idea is we want to decouple so we're going to talk about what is coupling and what does that look",
    "start": "233040",
    "end": "238760"
  },
  {
    "text": "like integration patterns what is an event event driven architectures and finally reducing event duplication with",
    "start": "238760",
    "end": "245959"
  },
  {
    "text": "item potency and that's that's a that one right there is a is a fun statement uh anybody know what item potency",
    "start": "245959",
    "end": "252959"
  },
  {
    "text": "is okay a lot of you okay but do you really I know that that word like I I",
    "start": "252959",
    "end": "258600"
  },
  {
    "text": "start saying that word I say item and I get that far and I don't know if I'm supposed to end with item potent item",
    "start": "258600",
    "end": "264160"
  },
  {
    "text": "potent item potency I don't know and so what I end up saying is yeah yeah today we're going to talk about item",
    "start": "264160",
    "end": "270639"
  },
  {
    "text": "so you all get that so yeah item potency it's it's an interesting uh concept so so we'll kind of jump in all right so",
    "start": "270639",
    "end": "277960"
  },
  {
    "text": "let's talk about coupling right uh when we think about coupling we think about coupling is is the is the measure of",
    "start": "277960",
    "end": "284240"
  },
  {
    "start": "278000",
    "end": "456000"
  },
  {
    "text": "independent variability between connected systems right how much are you reliant on another system if they go",
    "start": "284240",
    "end": "291440"
  },
  {
    "text": "down do you go down how tightly are you coupled right decoupling has a cost and",
    "start": "291440",
    "end": "296520"
  },
  {
    "text": "a design and runtime it's not binary right it's it's there's multiple facets of this and it's not onedimensional so",
    "start": "296520",
    "end": "302880"
  },
  {
    "text": "there's a lot to think about when we think about coupling and what does it mean now when we kind of put there",
    "start": "302880",
    "end": "310080"
  },
  {
    "text": "there's a lot more to this this is really interesting when we think about coupling we think most of us think about is like one function calling another or",
    "start": "310080",
    "end": "316560"
  },
  {
    "text": "one Lambda function calling another if you live in the serverless world um but there's a lot of different coupling",
    "start": "316560",
    "end": "322360"
  },
  {
    "text": "these are some things I hadn't actually thought about when we were thinking about all right what what should be on this list and you think about well the",
    "start": "322360",
    "end": "327479"
  },
  {
    "text": "technology itself Java versus C++ you know a lot of times when we build an application when we choose the language",
    "start": "327479",
    "end": "333319"
  },
  {
    "text": "we're going to build it in that's the language we're stuck with right unless we want to redo it later now that",
    "start": "333319",
    "end": "339639"
  },
  {
    "text": "changes when we have things like Lambda functions where you can just you know this one we're going to do this language this one we're going to do this language",
    "start": "339639",
    "end": "345600"
  },
  {
    "text": "but when we build monolithic apps we're kind of stuck with that so there's a coupling there there's a dependency going on location IP address DNS we're",
    "start": "345600",
    "end": "353520"
  },
  {
    "text": "tied to those things like uh data type or interaction style all kinds of",
    "start": "353520",
    "end": "358560"
  },
  {
    "text": "different things can be coupling right and so we want to try to remove as much of these as we can now will we remove",
    "start": "358560",
    "end": "367120"
  },
  {
    "text": "all of it probably not but here's an interesting statement we've referred to Gregor hope a couple times in This brilliant guy and he has this statement",
    "start": "367120",
    "end": "373599"
  },
  {
    "text": "he says the appropriate level of coupling depends on the level of control you have over the end points now think",
    "start": "373599",
    "end": "380479"
  },
  {
    "text": "about that statement right because when we think about decoupling or we think about being dependent on other API we've",
    "start": "380479",
    "end": "387840"
  },
  {
    "text": "all been there how many of yall are developers in the road okay so most of the room all right okay I know a couple of you and that's a lie",
    "start": "387840",
    "end": "394400"
  },
  {
    "text": "no I'm just kidding you're you're all developers right so it's really interesting when we talk about decoupling or when we talk about being",
    "start": "394400",
    "end": "400520"
  },
  {
    "text": "dependent on something else it never fails like look I manage this API so it's going to be fine or I manage this",
    "start": "400520",
    "end": "406720"
  },
  {
    "text": "service so it's going to be fine there won't be a problem I can change it but at some point when you're building an application there's a point where they",
    "start": "406720",
    "end": "413240"
  },
  {
    "text": "say hey we have this third-party location app or this third party you know whatever app that we want you to",
    "start": "413240",
    "end": "419120"
  },
  {
    "text": "use and you no longer have control and so we ride into the system we write you",
    "start": "419120",
    "end": "424319"
  },
  {
    "text": "know in this linear Factor we say okay make a call to that API I want to responds do this thing and this thing and when it doesn't respond that's when",
    "start": "424319",
    "end": "431199"
  },
  {
    "text": "we have a bad day that's when you get the call in the middle of the night and we go man did we handle that properly",
    "start": "431199",
    "end": "437520"
  },
  {
    "text": "and so we're going to talk a little bit about that uh and the idea now Life is Beautiful when you have control over",
    "start": "437520",
    "end": "443280"
  },
  {
    "text": "everything but life is not real when you have control over everything the reality of life is you're going to use other services and you don't control",
    "start": "443280",
    "end": "451319"
  },
  {
    "text": "those all right my uh I don't know if I just have to point it at here we go okay it's",
    "start": "451319",
    "end": "457000"
  },
  {
    "start": "456000",
    "end": "1354000"
  },
  {
    "text": "coming up it's not every time I push the button so I don't have control over this I'm dependent on it so I'm coupled all",
    "start": "457000",
    "end": "462120"
  },
  {
    "text": "right so integration patterns so I want to talk about some of the integration patterns that we see in the wild and",
    "start": "462120",
    "end": "467680"
  },
  {
    "text": "kind of respond to some of these and the first one we see uh is and we've all seen if we're if you're developer and",
    "start": "467680",
    "end": "473919"
  },
  {
    "text": "you haven't seen this you might want to rethink that developer label right cuz this is a very standard thing that we do",
    "start": "473919",
    "end": "479599"
  },
  {
    "text": "all the time and that is the synchronous request response model it's very simple I make a request I get a response",
    "start": "479599",
    "end": "486120"
  },
  {
    "text": "everybody's happy we love this right and it's a it's you know it's a fair way to approach things and there's some",
    "start": "486120",
    "end": "491680"
  },
  {
    "text": "advantages to this right the first is it's low latency man you just you make the request you get it back unless",
    "start": "491680",
    "end": "497360"
  },
  {
    "text": "unless your back end's doing a lot it's usually pretty low latency the second is it's simple this is what I want you to",
    "start": "497360",
    "end": "503360"
  },
  {
    "text": "do and give it back the third one and this is my favorite is it fails fast",
    "start": "503360",
    "end": "508680"
  },
  {
    "text": "right when we never want to associate good with the word fail but in reality when we say fail fast that means we get",
    "start": "508680",
    "end": "513959"
  },
  {
    "text": "an answer we know this isn't going to work right because if you're a developer like we all talked about in I am you",
    "start": "513959",
    "end": "519919"
  },
  {
    "text": "know we can debate that and we'll get into that in a little bit but it never fails that everything works locally I in",
    "start": "519919",
    "end": "525560"
  },
  {
    "text": "fact I was just talking about something like someone about this everything works in development right it doesn't fail",
    "start": "525560",
    "end": "533200"
  },
  {
    "text": "until you get to production it never does right we've all been there so when",
    "start": "533200",
    "end": "538720"
  },
  {
    "text": "we build things like this we want to fail fast we want it to fail in testing so that's where synchronous comes in",
    "start": "538720",
    "end": "545200"
  },
  {
    "text": "really handy however there are some disadvantages to this the first is when",
    "start": "545200",
    "end": "551519"
  },
  {
    "text": "this fails that fails right when you're receiver fails you're dead in the water",
    "start": "551519",
    "end": "558120"
  },
  {
    "text": "okay and and we all know that when a client sees a spinning wheel they're only going to watch it for so long till they move to the next company right so",
    "start": "558120",
    "end": "566079"
  },
  {
    "text": "that's one of the things the other thing we have is what we call receiver throttle right and so while it may be up",
    "start": "566079",
    "end": "571680"
  },
  {
    "text": "and running it may not have the power to you the syn it may not have the you may not be able to keep up with all the",
    "start": "571680",
    "end": "577680"
  },
  {
    "text": "clients coming in so you get into building you know duplicates and and and all that kind of stuff State Management",
    "start": "577680",
    "end": "583320"
  },
  {
    "text": "and all those kind of things that because I work in serverless I really don't have to deal with as much so but",
    "start": "583320",
    "end": "588360"
  },
  {
    "text": "this is this is a model we see a lot now one of the answers that we have to this that is a really good way is to look at",
    "start": "588360",
    "end": "594720"
  },
  {
    "text": "the asynchronous model and this particular example is the asynchronous point-to-point model",
    "start": "594720",
    "end": "599880"
  },
  {
    "text": "now when we think about synchronous versus asynchronous I'm not going to Define that in here uh hopefully you",
    "start": "599880",
    "end": "605240"
  },
  {
    "text": "understand that if you don't I'm glad to glad to have that conversation but one of the things we talk about when we build event- driven architecture when we",
    "start": "605240",
    "end": "611000"
  },
  {
    "text": "build servus is get to asynchronous as fast as you can right now it doesn't",
    "start": "611000",
    "end": "617279"
  },
  {
    "text": "mean we shouldn't use synchronous but synchronous should be used sparingly use it when it's absolutely necessary use",
    "start": "617279",
    "end": "622880"
  },
  {
    "text": "asynchronous uh when it's not why well I'll tell you why so there's the we look",
    "start": "622880",
    "end": "628079"
  },
  {
    "text": "at this pattern so what we've done done here is we've dropped a q in the middle of our sender and a receiver and the",
    "start": "628079",
    "end": "633600"
  },
  {
    "text": "advantage to this is number one it's going to decrease that temporal coupling right it's going to incre or I'm sorry I",
    "start": "633600",
    "end": "638800"
  },
  {
    "text": "said increase decrease the sender is no longer dependent on the receiver the",
    "start": "638800",
    "end": "644440"
  },
  {
    "text": "only thing is depending on is the Q right and the Q is built to be failure you know it's it's it's redundant it's",
    "start": "644440",
    "end": "651399"
  },
  {
    "text": "built to handle that and the q's job is just to Simply acknowledge the request",
    "start": "651399",
    "end": "656480"
  },
  {
    "text": "in this pattern the sender says hey do this the Q says hey I got your request and",
    "start": "656480",
    "end": "662800"
  },
  {
    "text": "then the sender gets to take care of that right and so the other Advantage here is the it's resilient to receiver",
    "start": "662800",
    "end": "668959"
  },
  {
    "text": "failure if the receiver is not available the client or the sender can still just keep dumping events into the queue and",
    "start": "668959",
    "end": "676440"
  },
  {
    "text": "when it when it's when the receiver comes back up then it's cleared out and the second or the third thing is the",
    "start": "676440",
    "end": "681800"
  },
  {
    "text": "receiver controls the consumption rate okay now we've all been there so so we",
    "start": "681800",
    "end": "688680"
  },
  {
    "text": "get this new job where developers would come out and go okay I'm a developer I got a job and you come in and they say okay and the company says all right we",
    "start": "688680",
    "end": "695000"
  },
  {
    "text": "have this really cool system it's a legacy system it handles two requests a",
    "start": "695000",
    "end": "700360"
  },
  {
    "text": "day okay but right now we're getting 300 billion requests per second we need you",
    "start": "700360",
    "end": "706360"
  },
  {
    "text": "to make that work right and and may that's a little exaggerated but you know what I'm talking about it's like look we're",
    "start": "706360",
    "end": "713040"
  },
  {
    "text": "running an as400 andway I probably shot over there some of you know as400 where're running",
    "start": "713040",
    "end": "719480"
  },
  {
    "text": "an old main frame and we want you to handle thousands and thousands of requests per second and you go well how",
    "start": "719480",
    "end": "725000"
  },
  {
    "text": "am I going to do that well here's your answer with this the client doesn't or the the sender doesn't control the",
    "start": "725000",
    "end": "731680"
  },
  {
    "text": "consumption the receiver does the receiver grabs stuff off the queue as it can handle it right now granted that's",
    "start": "731680",
    "end": "739279"
  },
  {
    "text": "backing up too far you may need to double up on your receivers add more but you have control over this without",
    "start": "739279",
    "end": "745279"
  },
  {
    "text": "failing right so this is uh really helpful now the other advantage of this is it adds the ability to have a dead",
    "start": "745279",
    "end": "751680"
  },
  {
    "text": "letter Q so your Q so your first Q is saying all right so and and we're going",
    "start": "751680",
    "end": "756760"
  },
  {
    "text": "TI I'll show it to you in a minute we're going to talk about sqs but in sqs it's built into it to say hey if your",
    "start": "756760",
    "end": "762079"
  },
  {
    "text": "receiver's having problems there's something like that then let's go ahead and retry so you have this retry built in and then if that continues to fail",
    "start": "762079",
    "end": "768360"
  },
  {
    "text": "then I want you to drop that data into an what we call uh D dlq I always want",
    "start": "768360",
    "end": "773639"
  },
  {
    "text": "to say dql dlq a dead letter Q meaning hey this isn't working but I don't want",
    "start": "773639",
    "end": "778920"
  },
  {
    "text": "to lose the data cu the last thing we want to do is have to call a customer go hey yeah you remember that credit card number you sent us could you send that",
    "start": "778920",
    "end": "785440"
  },
  {
    "text": "again yeah we'll get it right this time you know that that's a credibility problem right and so we've got the data",
    "start": "785440",
    "end": "791760"
  },
  {
    "text": "still now hopefully you're not collecting credit card numbers that's a whole different kind of thing you know",
    "start": "791760",
    "end": "796880"
  },
  {
    "text": "compliancy thing there but for my example you understand so so in this you're able to drop data into a dlq and",
    "start": "796880",
    "end": "803440"
  },
  {
    "text": "then you can automate against that uh and and handle that right the other Advantage is only one receiver can",
    "start": "803440",
    "end": "809720"
  },
  {
    "text": "process messages and I'll get into this a little more when we're talking about item potency but the way sqs is set up is the only one receiver process this or",
    "start": "809720",
    "end": "816680"
  },
  {
    "text": "should be right and a happy paath that's the way it's working there's a couple of disadvantages uh or challenges that you",
    "start": "816680",
    "end": "822839"
  },
  {
    "text": "want to work on or work with one is response correlation and this is that uh and and if you were in it were talking",
    "start": "822839",
    "end": "829279"
  },
  {
    "text": "Josh was talking about it earlier and talking about how do you get back with a asynchronous pattern your client's no",
    "start": "829279",
    "end": "834480"
  },
  {
    "text": "longer getting that response immediately hey I did the work and here's the answer instead you've got to have a way you need to either have your client pull for",
    "start": "834480",
    "end": "841079"
  },
  {
    "text": "the data or you need to either have uh the you know you need to to communicate with that client somehow so uh am I too",
    "start": "841079",
    "end": "848759"
  },
  {
    "text": "loud I'm look okay I want to make sure I I I have a very loud voice and they put a mic on me so I just want to make sure",
    "start": "848759",
    "end": "854279"
  },
  {
    "text": "I'm not blowing you all the way all right so uh and then then fairness of multi-end systems how do you balance",
    "start": "854279",
    "end": "859920"
  },
  {
    "text": "that out uh getting that working so oh the other one backlog recovery time I don't really see this personally as a",
    "start": "859920",
    "end": "865639"
  },
  {
    "text": "disadvantage we put it on here but in this what this means is hey you got to backlog your your receivers went down you got a backlog how do you take care",
    "start": "865639",
    "end": "871800"
  },
  {
    "text": "of it so that can take some time to do that but to me that's a lot better than going hey there's no backlog cuz we lost",
    "start": "871800",
    "end": "877079"
  },
  {
    "text": "all the data because the receivers went down right so so if I got to choose one that's the one I choose all",
    "start": "877079",
    "end": "884120"
  },
  {
    "text": "right so the service we use on this Amazon sqs there's a couple of them Amazon sqs is real standard for us uh",
    "start": "884120",
    "end": "890240"
  },
  {
    "text": "it's fully managed messing Q scales almost infinitely I love that it's actually in the document scales almost",
    "start": "890240",
    "end": "896800"
  },
  {
    "text": "infinitely you got stuff we can can handle it just you know pump data we can",
    "start": "896800",
    "end": "902120"
  },
  {
    "text": "handle it so it's it's a very very powerful system it's one of the first serverless systems that came out another one is Amazon mq if you want to run like",
    "start": "902120",
    "end": "908839"
  },
  {
    "text": "active mq or rabbit mq you can do this kind of thing all right so there's another type of of way to handle this to",
    "start": "908839",
    "end": "916199"
  },
  {
    "text": "get out of synchronous and move to asynchronous and this is called the",
    "start": "916199",
    "end": "921240"
  },
  {
    "text": "asynchronous broadcast model and you've probably seen this a little bit today as we're do a topic and",
    "start": "921240",
    "end": "928279"
  },
  {
    "text": "how this works is the sender again sends and this time we're going to send to a topic right and the topic acknowledges",
    "start": "928279",
    "end": "934160"
  },
  {
    "text": "yes I got it and then that topic then pushes a broadcast to multiple anybody",
    "start": "934160",
    "end": "939560"
  },
  {
    "text": "who's who's subscribed to that topic right and so then you can say you know all your receivers get it there's some",
    "start": "939560",
    "end": "945560"
  },
  {
    "text": "filtering you can do to say hey don't process this one for this sender that kind of thing when you subscribe to that",
    "start": "945560",
    "end": "950680"
  },
  {
    "text": "but basically it takes one message and it broadcasts to many so it's kind of a one to Min idea it's very helpful uh",
    "start": "950680",
    "end": "958240"
  },
  {
    "text": "when you're pushing that out now there's some there's uh obviously some Advantage this it decreases temporal coupling uh",
    "start": "958240",
    "end": "963759"
  },
  {
    "text": "it's resilient to receiver failure again receiver fails that the ESS the topic will handle the retry right uh",
    "start": "963759",
    "end": "971319"
  },
  {
    "text": "subscriber controls notification so you can say hey I want this or I don't want this and I can filter on that and",
    "start": "971319",
    "end": "977160"
  },
  {
    "text": "finally each subscriber is notified when that's sent in now the other cool thing is is it can",
    "start": "977160",
    "end": "984240"
  },
  {
    "text": "handle different types of things so this is this one I love love this when I",
    "start": "984240",
    "end": "989480"
  },
  {
    "text": "found this out I can send message to your phone through this that's how we're doing it out there at Ser espresso I can",
    "start": "989480",
    "end": "995000"
  },
  {
    "text": "send stuff to web hooks I can send stuff to lots of different things so I can",
    "start": "995000",
    "end": "1000040"
  },
  {
    "text": "have if if I've got a message that say Hey alert the factory is down it can send emails to some people it can send",
    "start": "1000040",
    "end": "1005759"
  },
  {
    "text": "SMS messages to others it can call Web hooks all from that one message so it's a way to broadcast and cover uh you know",
    "start": "1005759",
    "end": "1012680"
  },
  {
    "text": "for for many of them so this is a really powerful way to handle that and one the service we use for this is Amazon SNS",
    "start": "1012680",
    "end": "1019759"
  },
  {
    "text": "it's fully managed Pub sub uh and and again unlimited power it's",
    "start": "1019759",
    "end": "1025400"
  },
  {
    "text": "crazy all right so the the next uh pattern that we see in the wild is",
    "start": "1025400",
    "end": "1030678"
  },
  {
    "text": "called the asynchronous point to point now we're asynchronous so that's good um but it's a point to point we're sending",
    "start": "1030679",
    "end": "1036120"
  },
  {
    "text": "out data uh to channels right so we're sending out uh channels we're saying okay this you know uh you know here's",
    "start": "1036120",
    "end": "1042720"
  },
  {
    "text": "the service now the way this works is the client kind of needs to know what's going on right so let's talk about the",
    "start": "1042720",
    "end": "1048360"
  },
  {
    "text": "disadvantage first of all you have increased location coupling because the client needs to know where am I sending if it's a if it's a purple I need to",
    "start": "1048360",
    "end": "1054559"
  },
  {
    "text": "send a purple if it's an orange it's basing these events it's sending it now and the and the the the sender maintains",
    "start": "1054559",
    "end": "1062280"
  },
  {
    "text": "the routing logic so if you think about this this is really simple you look at this go it's no big deal Eric I know",
    "start": "1062280",
    "end": "1068160"
  },
  {
    "text": "that if it's if it's a purple I need to send a purple and if it's orange I need to send a orange and that's fine but",
    "start": "1068160",
    "end": "1073440"
  },
  {
    "text": "what happens when you start building on and I want to pause here for a minute and talk about",
    "start": "1073440",
    "end": "1079360"
  },
  {
    "text": "how we approach building a lot of times we approach building you know we do MVPs and we should build MVPs that's the way",
    "start": "1079360",
    "end": "1084640"
  },
  {
    "text": "to do it but we tend to approach building as kind of happy path without the mindset of scalability and",
    "start": "1084640",
    "end": "1091480"
  },
  {
    "text": "complexity right and and and I I encourage you later David Bo's going to talk about complexity and",
    "start": "1091480",
    "end": "1097200"
  },
  {
    "text": "Eda if hopefully you're building to have clients hopefully you're building to to",
    "start": "1097200",
    "end": "1103520"
  },
  {
    "text": "scale and you know if you're just building n we don't really want business we just want to see if we can make it work I'm like okay well then you know go",
    "start": "1103520",
    "end": "1110440"
  },
  {
    "text": "as hard as you want but if you're building for it to scale which you should be then you want to be thinking about that all the time and you want to",
    "start": "1110440",
    "end": "1117039"
  },
  {
    "text": "pick patterns that are easily changeable and to have to add code or logic to your",
    "start": "1117039",
    "end": "1122080"
  },
  {
    "text": "clients to call your client go yeah we've added another Channel we need you to have a pink Channel yeah add it to",
    "start": "1122080",
    "end": "1128559"
  },
  {
    "text": "your code and we need it done by yesterday okay you know it it that doesn't work right so instead uh you and",
    "start": "1128559",
    "end": "1136200"
  },
  {
    "text": "like we said the disadvantage this is is it gets really complex as you start adding more channels that that that",
    "start": "1136200",
    "end": "1142280"
  },
  {
    "text": "sender maintaining the routing can get really complex right uh and and just increases over and over so instead what",
    "start": "1142280",
    "end": "1148400"
  },
  {
    "text": "we encourage you to do is to look at the bus right so it's asynchronous messing router uh model using a bus how many of",
    "start": "1148400",
    "end": "1155559"
  },
  {
    "text": "you use buses now or event Bridge I'll just I'll just spoiler okay how many all",
    "start": "1155559",
    "end": "1161159"
  },
  {
    "text": "right let me ask this how many of yall are using AWS at the moment okay so most of the room if you're raising your hand",
    "start": "1161159",
    "end": "1166600"
  },
  {
    "text": "now you're using an event B bus event Bridge bus you just don't know it okay CU everybody has a default one right",
    "start": "1166600",
    "end": "1173000"
  },
  {
    "text": "that's just the way it works a lot of things is traveling around uh in the system so how this works is the",
    "start": "1173000",
    "end": "1179840"
  },
  {
    "text": "advantage is no longer is the logic at the sender it's not even at the receiver",
    "start": "1179840",
    "end": "1185679"
  },
  {
    "text": "it's at the bus right so or or at the rules okay so it's these rules that",
    "start": "1185679",
    "end": "1191559"
  },
  {
    "text": "evaluate the events coming through and if this passes then it you know it",
    "start": "1191559",
    "end": "1197000"
  },
  {
    "text": "invokes a Target let me let me explain that a little better here so first of we'll talk about eventbridge right eventbridge is the service we use it's",
    "start": "1197000",
    "end": "1203240"
  },
  {
    "text": "it's a flexible simple flexible fully managed page you go event bus service that makes it really easy and has",
    "start": "1203240",
    "end": "1209080"
  },
  {
    "text": "partner sources all kinds of things so here's how it works so you have these sources it could be partner sources AWS",
    "start": "1209080",
    "end": "1215200"
  },
  {
    "text": "sources your custom applications microservices all kinds of things right they produce events and when we when we",
    "start": "1215200",
    "end": "1222280"
  },
  {
    "text": "get further into this you're going to see more and more about when we talk about events but they produce events they push them to the fault bus or a",
    "start": "1222280",
    "end": "1229600"
  },
  {
    "text": "partner bus or uh you know all kinds of different things but the bottom line is they're putting it on some kind of bus",
    "start": "1229600",
    "end": "1236559"
  },
  {
    "text": "then and this is where the magic happens then you write these rules and you say",
    "start": "1236559",
    "end": "1241919"
  },
  {
    "text": "I'm going to write this Rule and if it matches this rule then invoke this target right so and and it can handle a",
    "start": "1241919",
    "end": "1250120"
  },
  {
    "text": "bunch of different targets so you say okay when it matches then invoke a Lambda function or ECS and and I don't",
    "start": "1250120",
    "end": "1256320"
  },
  {
    "text": "know if any of you are doing this but this if you if if you're following this this would actually allow you to invoke",
    "start": "1256320",
    "end": "1261440"
  },
  {
    "text": "an ECS instance or or task on fargate as an eeral compute much like a Lambda",
    "start": "1261440",
    "end": "1269760"
  },
  {
    "text": "right so you could actually Target an ECS it comes up on fargate it does the job and then it goes away scales back to",
    "start": "1269760",
    "end": "1276240"
  },
  {
    "text": "zero really interesting uh idea if you think about that look I need something that runs longer than 15 minutes that's",
    "start": "1276240",
    "end": "1283360"
  },
  {
    "text": "the way to go you can do that with step functions too all right so what are the rules look like so it's so let's say we",
    "start": "1283360",
    "end": "1290120"
  },
  {
    "text": "have this event right this event uh from a video system that we built last year right and we write this rule okay and",
    "start": "1290120",
    "end": "1297240"
  },
  {
    "text": "where where it match where it matters we say okay we want the source has to be in this array of and we've only got one in",
    "start": "1297240",
    "end": "1303559"
  },
  {
    "text": "the array of com. flick so yep we got a match there and the region has to be either Au or inz and this is a Au so",
    "start": "1303559",
    "end": "1311960"
  },
  {
    "text": "it's a match therefore it'll invoke the target it's that simple right and you can do some some some little more",
    "start": "1311960",
    "end": "1318640"
  },
  {
    "text": "complex than that but the idea is and you can trigger with a bus you could trigger more than one target so this is",
    "start": "1318640",
    "end": "1325120"
  },
  {
    "text": "a great way again today is all about event driven this is how you drive",
    "start": "1325120",
    "end": "1331159"
  },
  {
    "text": "targets and drive invocations from an event event bus and this is a strong way to go so you have over 30 Services",
    "start": "1331159",
    "end": "1338159"
  },
  {
    "text": "obviously is I'm all uh but there there's many services you can be targeted on that all right so we've kind",
    "start": "1338159",
    "end": "1343520"
  },
  {
    "text": "of talked about the a couple patterns we see out there and maybe how can we handle that the basic idea is we move from SN to async and there's some",
    "start": "1343520",
    "end": "1350039"
  },
  {
    "text": "different patterns for that excuse me but what is an event so let's let's",
    "start": "1350039",
    "end": "1355640"
  },
  {
    "start": "1354000",
    "end": "1623000"
  },
  {
    "text": "talk about that now we're talk about event driven architecture uh Josh stole my thunder if you were in Josh's um Talk",
    "start": "1355640",
    "end": "1362840"
  },
  {
    "text": "uh we're not best buddies anymore uh but he stole my thunder but but basically I'm going to Define event driven",
    "start": "1362840",
    "end": "1368120"
  },
  {
    "text": "architecture to you if if you weren't in there if you were then you get to hear it again but it basically is this this",
    "start": "1368120",
    "end": "1373799"
  },
  {
    "text": "is very technical so I probably have to do it twice but stay with me all right the vent an architecture is this",
    "start": "1373799",
    "end": "1379080"
  },
  {
    "text": "this something happens and we",
    "start": "1379080",
    "end": "1385000"
  },
  {
    "text": "react too technical you want me to do it again something happens and we react",
    "start": "1385000",
    "end": "1391559"
  },
  {
    "text": "yeah I'm oversimplifying that I get that but that's the idea right and so events",
    "start": "1391559",
    "end": "1396720"
  },
  {
    "text": "happen so we need to understand what an event is and how do we manage that event and and and how do we plan for these",
    "start": "1396720",
    "end": "1402440"
  },
  {
    "text": "events a lot of times we just go it's an event just run it you know but you want a plan for this you want to have you",
    "start": "1402440",
    "end": "1407919"
  },
  {
    "text": "want to have a a a a plan I've said that three times now so there you go all right so properties an event right so",
    "start": "1407919",
    "end": "1414159"
  },
  {
    "text": "events are they're Json objects right so they they carry a lot of data but you want to make sure events are are are",
    "start": "1414159",
    "end": "1419480"
  },
  {
    "text": "signals I just talked about this something happens we react events are signals that a system state has changed",
    "start": "1419480",
    "end": "1425559"
  },
  {
    "text": "this happened what do you want to do right so it's about events that occur in",
    "start": "1425559",
    "end": "1431279"
  },
  {
    "text": "the past it's not hey this is going to happen this is almost about ready to happen it's this happened right they're",
    "start": "1431279",
    "end": "1437360"
  },
  {
    "text": "immutable means they're not changing you can't change the history of what happened uh and and you decrease",
    "start": "1437360",
    "end": "1443120"
  },
  {
    "text": "coupling by restricting information to key data right so these are some ways we do that so so we look at events and we",
    "start": "1443120",
    "end": "1449039"
  },
  {
    "text": "go let's just put everything in it or we should just put a little bit in it with a pointer those kinds of things these are some things you need to think about",
    "start": "1449039",
    "end": "1456360"
  },
  {
    "text": "so we talk about this and in two things we have what we call sparse events and we have full State events why would you",
    "start": "1456360",
    "end": "1462760"
  },
  {
    "text": "use one over the other right so let's some considerations with sparse events right we have this video we really did",
    "start": "1462760",
    "end": "1468880"
  },
  {
    "text": "build this video service that reinvent last year to show that you can do video with serverless it works great all right",
    "start": "1468880",
    "end": "1474480"
  },
  {
    "text": "and so but when you send this event when you say okay look here here the data is the channel ID and the create time and",
    "start": "1474480",
    "end": "1481760"
  },
  {
    "text": "your publisher service you have multiple services are consuming this event and your publish hang on what's the name of",
    "start": "1481760",
    "end": "1487480"
  },
  {
    "text": "the channel and your video manager Services what are the channel tags and and your uh your video streaming",
    "start": "1487480",
    "end": "1493520"
  },
  {
    "text": "services what region are they in all right so they have they want data that's not available in there so you have a",
    "start": "1493520",
    "end": "1498880"
  },
  {
    "text": "couple choices you could say okay how about I cram all that data into the event or I can put a pointer where they",
    "start": "1498880",
    "end": "1505919"
  },
  {
    "text": "can do a lookup one is obviously less latent but the other can be hard to",
    "start": "1505919",
    "end": "1511520"
  },
  {
    "text": "maintain right so when you're thinking about this when you move into full State events there's some considerations there",
    "start": "1511520",
    "end": "1517640"
  },
  {
    "text": "as well right so we could add this data here's the description here's the tags the city and those kinds of things um",
    "start": "1517640",
    "end": "1524840"
  },
  {
    "text": "but the thing about it is is events should be backwards compatible so as you add and remove or as you add stuff you",
    "start": "1524840",
    "end": "1530960"
  },
  {
    "text": "kind of have to keep other stuff a great example of this is we had a system that was working uh I worked with the",
    "start": "1530960",
    "end": "1536679"
  },
  {
    "text": "customer a while back and they had order ID and Order ID was camel case lower",
    "start": "1536679",
    "end": "1541799"
  },
  {
    "text": "order I and then lower D okay so then they put that in there and then one of",
    "start": "1541799",
    "end": "1547000"
  },
  {
    "text": "the systems down the way said no no no no no order ID is snake case for us order- ID so they said okay we'll add",
    "start": "1547000",
    "end": "1555279"
  },
  {
    "text": "that as well so now every time your producer generated the event it needed",
    "start": "1555279",
    "end": "1561799"
  },
  {
    "text": "to add both of those or you had to have a hop that said okay copy this to this",
    "start": "1561799",
    "end": "1567399"
  },
  {
    "text": "right so now and what happens is your vent gets bloated now that's a really simple example but you could see where",
    "start": "1567399",
    "end": "1573960"
  },
  {
    "text": "this would get bigger and bigger as complexity is added right so remember we",
    "start": "1573960",
    "end": "1579120"
  },
  {
    "text": "want to always be thinking about what does complexity look like so and and this could really come down to a cost to",
    "start": "1579120",
    "end": "1584559"
  },
  {
    "text": "calculate values am I adding an extra hop just to duplicate order into a snake case property because I can't remove it",
    "start": "1584559",
    "end": "1591159"
  },
  {
    "text": "or it'll break these services and I have to have this version or it'll break this service right and sometimes you just",
    "start": "1591159",
    "end": "1596720"
  },
  {
    "text": "push back go change that to camel case and that'll make us all happy right so",
    "start": "1596720",
    "end": "1603559"
  },
  {
    "text": "things you need to think about when you're doing that all right so that's when we're talking about how do we do events and and uh David Bo again I refer",
    "start": "1603559",
    "end": "1610520"
  },
  {
    "text": "to him again he talks a lot about planning for events there's also you want to look at things called event storming and event planning when you're",
    "start": "1610520",
    "end": "1616240"
  },
  {
    "text": "thinking about how those are going to work all right so let's get into actual event",
    "start": "1616240",
    "end": "1623120"
  },
  {
    "start": "1623000",
    "end": "2047000"
  },
  {
    "text": "driven architecture talk about uh some of the approaches to this first thing I want to talk about is",
    "start": "1623120",
    "end": "1628880"
  },
  {
    "text": "choreograph uh choreographing events between domains we think about domains domains often not always often come down",
    "start": "1628880",
    "end": "1636640"
  },
  {
    "text": "to teams as well right well we handle the user you know interface uh we handle",
    "start": "1636640",
    "end": "1642240"
  },
  {
    "text": "reporting we handle social whatever there's different domains uh we handle",
    "start": "1642240",
    "end": "1647279"
  },
  {
    "text": "you know delivery those kinds of things so back to our video example we look at",
    "start": "1647279",
    "end": "1653880"
  },
  {
    "text": "if we're doing this the old way the non-event driven way let's say we have a",
    "start": "1653880",
    "end": "1659399"
  },
  {
    "text": "new Channel created and all these Services need to need to know about it the channel service the video streaming",
    "start": "1659399",
    "end": "1664720"
  },
  {
    "text": "the manager and the publisher so what we would do is we'd have this new channel our our our our application that part of",
    "start": "1664720",
    "end": "1670799"
  },
  {
    "text": "the application would take and say okay there's a new channel okay I got to let uh the video streaming know hey we have",
    "start": "1670799",
    "end": "1676399"
  },
  {
    "text": "a new channel I got to let video manager know hey we have a new channel and I got to let Publishers know hey we have a new",
    "start": "1676399",
    "end": "1681519"
  },
  {
    "text": "channel okay so another service comes in I got to add that to the code so I always have to go back to the client and",
    "start": "1681519",
    "end": "1687440"
  },
  {
    "text": "say hey I need you to add this and there's a lot of dependency there going on but when we move this into an",
    "start": "1687440",
    "end": "1693159"
  },
  {
    "text": "event-driven model that's kind of you know what we talked about this a good visual of it so what happens now is I",
    "start": "1693159",
    "end": "1698919"
  },
  {
    "text": "say hey I got a new channel okay I'm going to drop it and this is in the this is in the broadcast model I'm going to",
    "start": "1698919",
    "end": "1704600"
  },
  {
    "text": "drop that into a topic if you want to know about it then subscribe if you don't want to know about it don't",
    "start": "1704600",
    "end": "1710960"
  },
  {
    "text": "subscribe my job is to drop it in the topic and now I can add more and more services as I need you can look at it at",
    "start": "1710960",
    "end": "1717960"
  },
  {
    "text": "the router model and you could say uh hey I got a new Channel all right I'm going to drop an event into the event",
    "start": "1717960",
    "end": "1723799"
  },
  {
    "text": "bus and then each one of you writes a rule if you want to know then let me know right and that's that's how it",
    "start": "1723799",
    "end": "1729720"
  },
  {
    "text": "works so this idea of choreographing events means how do we pass events back and forth between domains right often",
    "start": "1729720",
    "end": "1737159"
  },
  {
    "text": "that's event brid SNS uh sqs different ways of passing those around my go-to is a vent Bridge",
    "start": "1737159",
    "end": "1743760"
  },
  {
    "text": "uh just simply because I tend to think in that rule pattern but if I have to broadcast I'm going to go SNS and then",
    "start": "1743760",
    "end": "1749360"
  },
  {
    "text": "there's obviously a difference between that and queuing if I need to cue stuff I use sqs so that's kind of the order that I think about",
    "start": "1749360",
    "end": "1755960"
  },
  {
    "text": "things the second part of this is we orchestrate the pro bu the process",
    "start": "1755960",
    "end": "1761559"
  },
  {
    "text": "within uh within domains and and I added this later so this blue was kind of",
    "start": "1761559",
    "end": "1767200"
  },
  {
    "text": "added later and produce one or more events in event driven it's this idea of",
    "start": "1767200",
    "end": "1772600"
  },
  {
    "text": "I did my job produce an event oh okay that triggered I did my job produce another event so you think about that so",
    "start": "1772600",
    "end": "1778720"
  },
  {
    "text": "let's say uh back in our service we have uh two more uh we have two more services right and we're going to we're going to",
    "start": "1778720",
    "end": "1785120"
  },
  {
    "text": "add a video processing service right and this is a real service that we built we built this for reinvent last year and",
    "start": "1785120",
    "end": "1791279"
  },
  {
    "text": "how it worked is is you would record a video and then we would process it we do gen to you know do the transcript find",
    "start": "1791279",
    "end": "1797760"
  },
  {
    "text": "out there were dirty words in it you know remove those block it we would send it we actually used Adobe to do some",
    "start": "1797760",
    "end": "1803480"
  },
  {
    "text": "cool gen image uh creation those kinds of things and so we needed to orchestrate all of this and one of the",
    "start": "1803480",
    "end": "1810080"
  },
  {
    "text": "reason and I won't show you all of it but I'll show you an example of this is we had to say we had to evaluate the",
    "start": "1810080",
    "end": "1816080"
  },
  {
    "text": "video and say how long is this video of course it was in the metadata and we had a benchmark we said if it's over 20",
    "start": "1816080",
    "end": "1822519"
  },
  {
    "text": "minutes then it makes more sense to process it in ECS on fargate than it did",
    "start": "1822519",
    "end": "1827720"
  },
  {
    "text": "a Lambda function right because Lambda function at the 15-minute timeout may may have caught up uh and and we may",
    "start": "1827720",
    "end": "1833840"
  },
  {
    "text": "need to do more so what we did is is when when the video was dropped into a bucket that bucket kicked out an event",
    "start": "1833840",
    "end": "1840360"
  },
  {
    "text": "said hey I got a new new video that event through event bridge then kicked off step functions or step functions",
    "start": "1840360",
    "end": "1846440"
  },
  {
    "text": "evaluated said okay that's a that's longer than 20 minutes I'm going to have ECS run that okay it's shorter than 20",
    "start": "1846440",
    "end": "1851799"
  },
  {
    "text": "minutes I'm going to have Lambda functions run there and they would just cruise and it could do multiple at a time you run different step functions",
    "start": "1851799",
    "end": "1857639"
  },
  {
    "text": "you bring up and and was very fast and very efficient then we were done we would write the data out to Dynamo DB",
    "start": "1857639",
    "end": "1864080"
  },
  {
    "text": "with with all the information uh do some of that and then the last thing we would do is kick out an event okay you star to",
    "start": "1864080",
    "end": "1871559"
  },
  {
    "text": "see a pattern here right I do something an event and this allows this video producer service to not care or know",
    "start": "1871559",
    "end": "1878480"
  },
  {
    "text": "about any other services but we're able to add it because it can consume and",
    "start": "1878480",
    "end": "1884080"
  },
  {
    "text": "create events right so we look at uh the the um",
    "start": "1884080",
    "end": "1889799"
  },
  {
    "text": "this this one so the the validation so this is the step function to do the plugins right and so one of the things",
    "start": "1889799",
    "end": "1894840"
  },
  {
    "text": "we need to do is things needed to happen in a very specific order so we needed to orchestrate this so again back to step",
    "start": "1894840",
    "end": "1901880"
  },
  {
    "text": "functions anybody uses step functions now all right a couple of you okay the rest of you you're getting a b right now",
    "start": "1901880",
    "end": "1909440"
  },
  {
    "text": "okay no I'm just give you a hard time but you need to check out step functions if you get a chance uh it it's super powerful uh and and just I mean gives",
    "start": "1909440",
    "end": "1916799"
  },
  {
    "text": "you a lot of options right right and it directly integrates with service right all right so we uh we have prev validate",
    "start": "1916799",
    "end": "1923039"
  },
  {
    "text": "plugins post validate plugins we could run all these uh as needed here's what it looked like in the step function we",
    "start": "1923039",
    "end": "1929600"
  },
  {
    "text": "come in we fetch the prevalidation hook we did this for each one I won't bore you with exactly what it's doing but the",
    "start": "1929600",
    "end": "1934919"
  },
  {
    "text": "the main idea is it would run the process and then kick out an event right",
    "start": "1934919",
    "end": "1940159"
  },
  {
    "text": "that we've done this now you can move on to the next one all right and that's just for the first part then it would",
    "start": "1940159",
    "end": "1945200"
  },
  {
    "text": "run to the second right and again we're doing this all through step functions uh",
    "start": "1945200",
    "end": "1950240"
  },
  {
    "text": "super powerful let you do a lot of you know just just a lot of cool things all",
    "start": "1950240",
    "end": "1955799"
  },
  {
    "text": "right so that's choreography and and orchestration and and the basic idea I",
    "start": "1955799",
    "end": "1961679"
  },
  {
    "text": "really encourage you is you know in orchestrate business process in the in the domains and then choreograph events",
    "start": "1961679",
    "end": "1968720"
  },
  {
    "text": "between domains uh as as you moving those around right this is a very strong pattern for",
    "start": "1968720",
    "end": "1974679"
  },
  {
    "text": "Eda so let me show you an example in this servess video that we built um this isn't going to be a video but kind of",
    "start": "1974679",
    "end": "1980480"
  },
  {
    "text": "get an idea this is the actual and I'm sorry uh that these these aren't bright",
    "start": "1980480",
    "end": "1985639"
  },
  {
    "text": "but this is the actual event or servus video uh architecture that we use and you could see all right here's our",
    "start": "1985639",
    "end": "1992480"
  },
  {
    "text": "different Services here's our domains the video manager the video streaming the channel service all kicking out",
    "start": "1992480",
    "end": "1998960"
  },
  {
    "text": "events into vbridge rules and then different uh things going on to take",
    "start": "1998960",
    "end": "2004399"
  },
  {
    "text": "care of that and then kicking events back in so no in here are we calling an API saying hey I did this call another",
    "start": "2004399",
    "end": "2011399"
  },
  {
    "text": "one hey I did this hey I did this we're simply passing events around and tracking that through the system okay so",
    "start": "2011399",
    "end": "2018120"
  },
  {
    "text": "that's event driven architecture right there all right so vent driven",
    "start": "2018120",
    "end": "2025760"
  },
  {
    "text": "architecture distributed applications right that's that's really when you're when you're using vent driven architecture You're Building distributed",
    "start": "2025760",
    "end": "2032440"
  },
  {
    "text": "applications the next part of distribute applications and one of the challenging Parts is we're going to come to is this",
    "start": "2032440",
    "end": "2037760"
  },
  {
    "text": "item potency right so item potency uh is all always a battle uh and when we think",
    "start": "2037760",
    "end": "2044159"
  },
  {
    "text": "about that we talk about duplicates in the system right so uh to give you kind",
    "start": "2044159",
    "end": "2050480"
  },
  {
    "start": "2047000",
    "end": "2923000"
  },
  {
    "text": "of an example of of what I'm talking about tell you a story here uh several years ago just before pandemic I was",
    "start": "2050480",
    "end": "2056638"
  },
  {
    "text": "traveling to Turkey and I was going to speak at serous days in Turkey I'd never been to Turkey before I was very excited",
    "start": "2056639",
    "end": "2063040"
  },
  {
    "text": "uh and I got to Turkey and I I it was a brand new airport called",
    "start": "2063040",
    "end": "2068320"
  },
  {
    "text": "the IST airport you may or may not have been there and I get there and I'm standing in customs there's all these",
    "start": "2068320",
    "end": "2073760"
  },
  {
    "text": "Customs Booth there's like 20 of them and we're all standing in line 20 30 people and I finally get up to the gate",
    "start": "2073760",
    "end": "2080000"
  },
  {
    "text": "or the the the teller and I hand her my my passport and she takes a passport she",
    "start": "2080000",
    "end": "2085960"
  },
  {
    "text": "scans it and then she does this now I I travel a lot this is a red",
    "start": "2085960",
    "end": "2092040"
  },
  {
    "text": "flag she kind of looks at me and then she does some typing and she makes a",
    "start": "2092040",
    "end": "2097440"
  },
  {
    "text": "phone phone call she looks at me some more she doesn't give me my passport back and so there was a big glass here",
    "start": "2097440",
    "end": "2103359"
  },
  {
    "text": "so I leaned around the glass and said is everything okay and she said get behind the glass okay so I stood behind the",
    "start": "2103359",
    "end": "2109720"
  },
  {
    "text": "glass so I stood out there for about 20 minutes and I finally looked told her I said look I'll just get back on the",
    "start": "2109720",
    "end": "2115400"
  },
  {
    "text": "plane I don't got to come so she says uh just a moment so she",
    "start": "2115400",
    "end": "2120680"
  },
  {
    "text": "makes some more calls at this point two fully armed fully body armored guards",
    "start": "2120680",
    "end": "2127240"
  },
  {
    "text": "come out with big I'm not talking a pistol or a stunner I'm talking full rifles body",
    "start": "2127240",
    "end": "2132839"
  },
  {
    "text": "armor they come out they stand on either side of me and they close the line",
    "start": "2132839",
    "end": "2138599"
  },
  {
    "text": "behind me and I'm thinking this doesn't seem normal this seems out of place",
    "start": "2138599",
    "end": "2145320"
  },
  {
    "text": "right so they say Mr Johnson will you come with us and every part of me is like no I would rather not but they said",
    "start": "2145320",
    "end": "2151400"
  },
  {
    "text": "yes I was coming with them so we went and they took me to a guest room which was a small room with no windows and",
    "start": "2151400",
    "end": "2158119"
  },
  {
    "text": "they posted up outside of it and they handed my passport and my IDs and everything else they had to a guy in there and he had a gun and he sat down",
    "start": "2158119",
    "end": "2165280"
  },
  {
    "text": "and he wouldn't tell me what was going on for an hour we sat there nobody would tell me finally I said just tell me",
    "start": "2165280",
    "end": "2170599"
  },
  {
    "text": "what's happening he said Mr Johnson it seems uh there's something or in the system",
    "start": "2170599",
    "end": "2177760"
  },
  {
    "text": "there's uh your name's in the system Eric Daniel Johnson with your ID and",
    "start": "2177760",
    "end": "2183040"
  },
  {
    "text": "stuff and it's flagging as a criminal I was like well",
    "start": "2183040",
    "end": "2188359"
  },
  {
    "text": "it's been a long you know I I don't know what to tell you I'm not even going to make a joke there I don't know what to tell you that's not me right and he said",
    "start": "2188359",
    "end": "2194880"
  },
  {
    "text": "well you know and he explained some things so I finally I said well let me ask you a question I said do you have Prince on",
    "start": "2194880",
    "end": "2201079"
  },
  {
    "text": "this guy very like of course we have Prince on this guy and I said if you got more",
    "start": "2201079",
    "end": "2206520"
  },
  {
    "text": "than two I'm not your guy and it was just dead dead silence he makes a phone call",
    "start": "2206520",
    "end": "2213240"
  },
  {
    "text": "words I don't understand and he hangs up he says Mr Johnson you can go there seems to be duplicate in the",
    "start": "2213240",
    "end": "2219960"
  },
  {
    "text": "system they had item potency problems they were not item potent item potency",
    "start": "2219960",
    "end": "2226880"
  },
  {
    "text": "or being item potent I used to think that item potent was the bad word it's actually the good word item potency is",
    "start": "2226880",
    "end": "2231960"
  },
  {
    "text": "important especially when you're building distributed systems because you have you you deal with eventual",
    "start": "2231960",
    "end": "2237119"
  },
  {
    "text": "consistency you deal with a lot of different things so let's look at what is this mean okay so item potency there",
    "start": "2237119",
    "end": "2244400"
  },
  {
    "text": "I'm going to give you several definitions the first is the mathematical one and and the idea here is operations that can be applied",
    "start": "2244400",
    "end": "2249880"
  },
  {
    "text": "multiple times without changing the results right you get the same result every time here's a different one and this is",
    "start": "2249880",
    "end": "2257319"
  },
  {
    "text": "again Gregor hope and Bobby wolf they said a message that has the same effect whether it is received once or multiple",
    "start": "2257319",
    "end": "2262440"
  },
  {
    "text": "times right but this is just you know English instead of math but I'll give you the real one all right but these are",
    "start": "2262440",
    "end": "2267920"
  },
  {
    "text": "real but let me give you the re the one that hits home that's this was my credit",
    "start": "2267920",
    "end": "2273079"
  },
  {
    "text": "card charged twice from my mom right we get this cost I'm sure if",
    "start": "2273079",
    "end": "2278200"
  },
  {
    "text": "youall have parents and this like is something's wrong am I getting hacked my credit card charged twice things like",
    "start": "2278200",
    "end": "2283280"
  },
  {
    "text": "that item potency is a big deal right and so we need to we need to be working",
    "start": "2283280",
    "end": "2289200"
  },
  {
    "text": "with that so I'm going to walk you through some there's many things you can do but more what can you do in the code",
    "start": "2289200",
    "end": "2294240"
  },
  {
    "text": "before you ever get it into the database right all right so my clicker there we",
    "start": "2294240",
    "end": "2300480"
  },
  {
    "text": "go all right so where can duplicates occur so let's talk about some different places so the first place that can occur",
    "start": "2300480",
    "end": "2306319"
  },
  {
    "text": "is in transmission right so let's say let's go back to this synchronous approach so we have turn we have a",
    "start": "2306319",
    "end": "2311720"
  },
  {
    "text": "sender they're going to send a message and the receiver acknowledges but it breaks down the acknowledgement right",
    "start": "2311720",
    "end": "2318400"
  },
  {
    "text": "and so what happens is this is where the duplicate message happen because if you've written a good client your client",
    "start": "2318400",
    "end": "2324079"
  },
  {
    "text": "says oh okay I've timed out I didn't get a response so I'm going to make call the action again but we don't know if the",
    "start": "2324079",
    "end": "2331240"
  },
  {
    "text": "first call never made it to the receiver or they didn't process it right or it",
    "start": "2331240",
    "end": "2336480"
  },
  {
    "text": "failed there you don't know where it is so this is where duplicates can and probably do happen right so how do we",
    "start": "2336480",
    "end": "2342760"
  },
  {
    "text": "get around this all right so we we we'll come to that in just a minute let's talk about some other places this is in receiver",
    "start": "2342760",
    "end": "2349440"
  },
  {
    "text": "issues now this here this is an sqsq this is how it works right so I'm going to talk you through this I said I kind",
    "start": "2349440",
    "end": "2355640"
  },
  {
    "text": "of walk through this it's really cool how we do sqs when you send a message into",
    "start": "2355640",
    "end": "2361640"
  },
  {
    "text": "sqs it actually is going to create duplicates immediately and we store it in different places to to build durable",
    "start": "2361640",
    "end": "2369520"
  },
  {
    "text": "systems right then when your receiver calls for that either it's the polar through a Lambda or you're doing it",
    "start": "2369520",
    "end": "2375240"
  },
  {
    "text": "through your code it actually it doesn't remove it from the queue it hides it okay so it hides those messages for a",
    "start": "2375240",
    "end": "2382400"
  },
  {
    "text": "certain amount of time if it doesn't get fixed then they come back in but that keeps other receivers from grabbing this",
    "start": "2382400",
    "end": "2387760"
  },
  {
    "text": "is why you can have 30 receivers processing a queue right but if the",
    "start": "2387760",
    "end": "2393079"
  },
  {
    "text": "receiver breaks down during that process then we've got a problem right then the",
    "start": "2393079",
    "end": "2399760"
  },
  {
    "text": "second one may grab it after it times out and now you have duplicates in the system right because we don't know if",
    "start": "2399760",
    "end": "2407640"
  },
  {
    "text": "that receiver failed if it got it in there you don't know right another one is service issues now",
    "start": "2407640",
    "end": "2415280"
  },
  {
    "text": "ver vogle says everything breaks all the time he's a CTO of of Amazon everything",
    "start": "2415280",
    "end": "2421640"
  },
  {
    "text": "breaks all the time mine is a lesser known quote but it's it's just as true",
    "start": "2421640",
    "end": "2427359"
  },
  {
    "text": "everything I build seems to break right so you know it's it's like yeah yeah you don't want me as your developer I'm an",
    "start": "2427359",
    "end": "2432960"
  },
  {
    "text": "architect but yeah it's this idea things break so so while we try to plan for not",
    "start": "2432960",
    "end": "2438200"
  },
  {
    "text": "breaking we need to plan for breaking right we build to not break but we plan for breaking right and so in Services if",
    "start": "2438200",
    "end": "2446880"
  },
  {
    "text": "we do again we're back to the same thing and it doubles up and then uh the receiver fails but now the service",
    "start": "2446880",
    "end": "2454000"
  },
  {
    "text": "itself fails so we don't know did theer Pro receive process it or not uh now we",
    "start": "2454000",
    "end": "2459720"
  },
  {
    "text": "have service two so again transmission issues receiver issues service issues",
    "start": "2459720",
    "end": "2465720"
  },
  {
    "text": "these are all places where these can happen uh and then obviously code we want to do code to kind of deal with",
    "start": "2465720",
    "end": "2472119"
  },
  {
    "text": "that right so let's talk about that one of the ways that we can handle this is through what we call Item potency tokens",
    "start": "2472119",
    "end": "2479079"
  },
  {
    "text": "right and an item potency token uh uniquely identifies messages right and a",
    "start": "2479079",
    "end": "2484440"
  },
  {
    "text": "well- behaved token is going to be generated by the client not the server if you're sending it to the server you",
    "start": "2484440",
    "end": "2489720"
  },
  {
    "text": "see the problem there I may not get it back and yeah that's a problem so the client's doing it yeah they they're resent by the client when we retry so we",
    "start": "2489720",
    "end": "2496760"
  },
  {
    "text": "can identify that they're unique per message because you they're an identification so you want them unique and finally they use a dedicated field",
    "start": "2496760",
    "end": "2503839"
  },
  {
    "text": "and uh we'll talk about why in just a moment but here's how they look um is anybody using AWS Lambda right",
    "start": "2503839",
    "end": "2511400"
  },
  {
    "text": "now oh okay very few of you all right okay that surprises me okay so AWS",
    "start": "2511400",
    "end": "2518040"
  },
  {
    "text": "Lambda this is there's a software called power tools or a basically an extension",
    "start": "2518040",
    "end": "2523480"
  },
  {
    "text": "you get called Power Tools very powerful we built it it's python java.net all kinds of different versions this is how",
    "start": "2523480",
    "end": "2529839"
  },
  {
    "text": "they handle item potency in the code using tokens right so what happens is in",
    "start": "2529839",
    "end": "2536839"
  },
  {
    "text": "here you're going to your client is going to call your service it's going to send an event that's going to invoke it",
    "start": "2536839",
    "end": "2542240"
  },
  {
    "text": "your Lambda function is invoked the first thing it does is it looks up and says is this item potency token existing",
    "start": "2542240",
    "end": "2549680"
  },
  {
    "text": "if it is does it have response so it'll say oh okay no it's not respon it doesn't exist so I'm going to go ahead and write it to the database to in this",
    "start": "2549680",
    "end": "2556520"
  },
  {
    "text": "we use Dynamo DB for persistence we just call a persistence layer right it's going to write into the persistence layer then it's going to run your code",
    "start": "2556520",
    "end": "2564160"
  },
  {
    "text": "and it's going to store the output of your code back to that database so it does two quick reads right and then it",
    "start": "2564160",
    "end": "2570640"
  },
  {
    "text": "returns that data to your client and everything's works okay right so but",
    "start": "2570640",
    "end": "2576440"
  },
  {
    "text": "here's what happens when it doesn't work or here's here's why we do it what if that return to the client fails well",
    "start": "2576440",
    "end": "2583760"
  },
  {
    "text": "then your client says okay I timed out I'm going to go ahead and call again and so the Lambda function then reads from",
    "start": "2583760",
    "end": "2590480"
  },
  {
    "text": "the database and says oh this exists and we're still under the TTL I'm going to",
    "start": "2590480",
    "end": "2596640"
  },
  {
    "text": "grab the response and return it but I'm not going to run the code in the",
    "start": "2596640",
    "end": "2602240"
  },
  {
    "text": "function so I'm making the same call getting the same response but I'm not creating creting duplicates does that",
    "start": "2602240",
    "end": "2608720"
  },
  {
    "text": "make sense it's very important to do that so you can build this on your own if you want but I would look at Power",
    "start": "2608720",
    "end": "2615079"
  },
  {
    "text": "Tools it's built right in they do it it's it's very cool it helps a lot but that's an example of approaching that",
    "start": "2615079",
    "end": "2621720"
  },
  {
    "text": "now we also look at building item potency into our services okay so for",
    "start": "2621720",
    "end": "2626800"
  },
  {
    "text": "example if you look at sqs fifo which is first in first out Q's the way this works we Show an example using AWS CLI",
    "start": "2626800",
    "end": "2635160"
  },
  {
    "text": "we would call it we' create a token and we actually call sqs send message and we would pass it actual token right and",
    "start": "2635160",
    "end": "2642680"
  },
  {
    "text": "it's called the message the message D duplication ID and you pass the token and you can see we get the response back",
    "start": "2642680",
    "end": "2649400"
  },
  {
    "text": "so let's do the same call again and you get the same response back it knows nope",
    "start": "2649400",
    "end": "2655160"
  },
  {
    "text": "you've already made this request so it is I the batteries did all right I've",
    "start": "2655160",
    "end": "2662760"
  },
  {
    "text": "tried it we're just going to go back there it goes it is itm potent Okay so that works this service works all right",
    "start": "2662760",
    "end": "2670319"
  },
  {
    "text": "so the next one step functions so step functions we're going to do the same thing we're going actually generate a token ID and this time we just use name",
    "start": "2670319",
    "end": "2676680"
  },
  {
    "text": "that's the ad and poent key uh for step functions we use name and you can use a lot lot of different services use",
    "start": "2676680",
    "end": "2682160"
  },
  {
    "text": "different things all right so you do the execution we get it back and you can see it's the same this is the AR that we're",
    "start": "2682160",
    "end": "2688599"
  },
  {
    "text": "looking at at the very end of the AR in the yellow uh and and you run it again and you get the same thing back so this",
    "start": "2688599",
    "end": "2695079"
  },
  {
    "text": "is item potent so both those Services work that way so let's look at event Bridge so event Bridge we're going to",
    "start": "2695079",
    "end": "2701599"
  },
  {
    "text": "take and we're going to say uh we going to send data we have entries we get back an event ID there's no there's no place",
    "start": "2701599",
    "end": "2708920"
  },
  {
    "text": "to do a dup code here and then we send it again and notice these numbers do not",
    "start": "2708920",
    "end": "2714640"
  },
  {
    "text": "match okay this is not item potent now you may be it's not like we forgot it's",
    "start": "2714640",
    "end": "2721800"
  },
  {
    "text": "like we got EV Bridge all built oh man we forgot I imp poent sorry there's a",
    "start": "2721800",
    "end": "2727720"
  },
  {
    "text": "reason it's still it's this way because you may send the same thing multiple times it's an event bus right events May",
    "start": "2727720",
    "end": "2734559"
  },
  {
    "text": "look alike you may have a bunch come in at the same time right so we know that but you go well okay Eric what do we do",
    "start": "2734559",
    "end": "2742040"
  },
  {
    "text": "right well this is where an item potency token you need to use it but there's some work on the back end right so what",
    "start": "2742040",
    "end": "2747240"
  },
  {
    "text": "you would do is you would actually generate an item potency token and you could save it and I recommend like a",
    "start": "2747240",
    "end": "2752599"
  },
  {
    "text": "metadata you could I had a conversation with somebody yesterday like why does it have to be in there it doesn't have to",
    "start": "2752599",
    "end": "2757640"
  },
  {
    "text": "be but it it helps to kind of isolate it things like that but basically you want a unique name that you can identify",
    "start": "2757640",
    "end": "2764480"
  },
  {
    "text": "later we'll call in this I have item potency key right so I'm going to add that in the metadata and then what",
    "start": "2764480",
    "end": "2769839"
  },
  {
    "text": "happens is when I send that through then my backend service whatever event is",
    "start": "2769839",
    "end": "2776119"
  },
  {
    "text": "getting triggered or service will need to check on that say Hey has this key been done so it's a little extra hop for",
    "start": "2776119",
    "end": "2783119"
  },
  {
    "text": "you when using aid but again there's a reason for that so that becomes item potent excuse me all right so last thing",
    "start": "2783119",
    "end": "2791160"
  },
  {
    "text": "we're to talk about in in when you're using item potency tokens again this unique name right so I've seen this this",
    "start": "2791160",
    "end": "2797839"
  },
  {
    "text": "this isn't a oh I I'll bet somebody does this we see this all the time right so I'm going to use this message ID right",
    "start": "2797839",
    "end": "2804359"
  },
  {
    "text": "and and my remember I talked about sometimes it's hard to correlate you need to send back a correlation ID so my sender is going to send something to my",
    "start": "2804359",
    "end": "2810319"
  },
  {
    "text": "receiver and say message ID 123 receiver's going to do the work it's say okay I'm done I'm going to respond to",
    "start": "2810319",
    "end": "2816599"
  },
  {
    "text": "you and I'm going to give you a correlation ID and then what you do is you take your message ID my correlation",
    "start": "2816599",
    "end": "2822359"
  },
  {
    "text": "ID if they equal each other that's the job that's what we're working on and it works great but what happens when again",
    "start": "2822359",
    "end": "2830160"
  },
  {
    "text": "we enter that third you know that that third uh party uh that someone you know",
    "start": "2830160",
    "end": "2836720"
  },
  {
    "text": "some we say someone says hey we want you to add this service in the call so what happens we send it and we have this",
    "start": "2836720",
    "end": "2842359"
  },
  {
    "text": "intermediary service we say our message ID 123 but they also use message ID ID but their message ID is 456 so now the",
    "start": "2842359",
    "end": "2850760"
  },
  {
    "text": "receiver gets it and message ID 456 they send it back to the correlation they say",
    "start": "2850760",
    "end": "2856200"
  },
  {
    "text": "oh that doesn't match uh and so then it doesn't work so the the point of that is",
    "start": "2856200",
    "end": "2863240"
  },
  {
    "text": "you want to make sure that you're using a correlation ID that you can identify",
    "start": "2863240",
    "end": "2868680"
  },
  {
    "text": "that that that is unique and that you can then you can make sense all right so",
    "start": "2868680",
    "end": "2874400"
  },
  {
    "text": "with that I'm going to give you a couple of resources really quick just to kind of learn a lot more that this I just dumped a lot on you about",
    "start": "2874400",
    "end": "2880680"
  },
  {
    "text": "Eda and I hope that makes sense and I hope that helps um there's a lot to build here there's a lot of power in Eda",
    "start": "2880680",
    "end": "2887720"
  },
  {
    "text": "but you want to be careful as you plan as you build and then hopefully this gives you some ideas uh you see it",
    "start": "2887720",
    "end": "2893079"
  },
  {
    "text": "several times serverless land is a site that our team maintains uh Julian and I are are still maintaining it uh it's got",
    "start": "2893079",
    "end": "2899280"
  },
  {
    "text": "a lot of data in it uh ton of stuff learning videos blogs workshops you name it and patterns",
    "start": "2899280",
    "end": "2908000"
  },
  {
    "text": "tons and tons of patterns uh in the keynote this morning David referred to those uh as patterns you can look at and",
    "start": "2908000",
    "end": "2914280"
  },
  {
    "text": "how they work Sam cdk terraform cloud formation SST um there's a lot of",
    "start": "2914280",
    "end": "2919680"
  },
  {
    "text": "different examples uh so there you go uh and finally that's it my name is Eric",
    "start": "2919680",
    "end": "2925240"
  },
  {
    "start": "2923000",
    "end": "2941000"
  },
  {
    "text": "Johnson",
    "start": "2925240",
    "end": "2928240"
  }
]