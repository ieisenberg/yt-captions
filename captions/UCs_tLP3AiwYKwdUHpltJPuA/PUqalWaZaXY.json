[
  {
    "start": "0",
    "end": "209000"
  },
  {
    "text": "thank you [Music]",
    "start": "2520",
    "end": "6640"
  },
  {
    "text": "Thank You Adele um yeah so this case study is actually dubbed Loosely coupled lotteries in",
    "start": "13019",
    "end": "19320"
  },
  {
    "text": "Cloudy casinos because over the last four and a half years or so um I have been the architect of a",
    "start": "19320",
    "end": "25380"
  },
  {
    "text": "project that we do for the nail on solo today I'll call them the Dutch lotteries here even though they don't like to be",
    "start": "25380",
    "end": "31080"
  },
  {
    "text": "translated into English where we have building integration platform",
    "start": "31080",
    "end": "36360"
  },
  {
    "text": "um so my name is your skypers you can find my Twitter handle here for those of you who are on Twitter",
    "start": "36360",
    "end": "41700"
  },
  {
    "text": "um as Adele mentioned I'm the CTO of try for Amsterdam fortunately for me that is not a full-time management job so that",
    "start": "41700",
    "end": "48300"
  },
  {
    "text": "means I'm also still a Hands-On architect I I architect systems but also help to actually build them and",
    "start": "48300",
    "end": "53760"
  },
  {
    "text": "Implement them I do trainings I have a background in spring so a lot of that is related to that and today as I mentioned",
    "start": "53760",
    "end": "61320"
  },
  {
    "text": "I'm going to talk about this integration platform that we've provided",
    "start": "61320",
    "end": "66019"
  },
  {
    "text": "is an organization that traditionally has been providing a couple of different",
    "start": "66619",
    "end": "72299"
  },
  {
    "text": "lotteries uh most well known one is the start low today if you're living in the Netherlands you're definitely familiar with that one and um they decided about",
    "start": "72299",
    "end": "79920"
  },
  {
    "text": "five years ago they wanted to change their I.T infrastructure which was very focused on having just a very small",
    "start": "79920",
    "end": "87720"
  },
  {
    "text": "amount of vendors doing all of the work for them right so it was like a single vendor doing the uh the back ends and",
    "start": "87720",
    "end": "93900"
  },
  {
    "text": "the web applications and the mobile applications and all the handling and it kept them from moving fast so they",
    "start": "93900",
    "end": "99960"
  },
  {
    "text": "wanted to have a more Diversified landscape with the sort of best of breed architecture that means you're going to",
    "start": "99960",
    "end": "105360"
  },
  {
    "text": "have an explosion of vendors and systems everywhere so they decided they wanted to have like a central point of integration for that that's exactly what",
    "start": "105360",
    "end": "111960"
  },
  {
    "text": "we provide so we encapsulate a lot of details on back-end systems right we abstract some things away and that also",
    "start": "111960",
    "end": "118799"
  },
  {
    "text": "makes it easier to actually do replacement of individual systems and hopefully we have an abstraction that's",
    "start": "118799",
    "end": "123899"
  },
  {
    "text": "good enough that clients won't actually be affected by that or at least a lot less in terms of scale this is a very",
    "start": "123899",
    "end": "131340"
  },
  {
    "text": "interesting project and it's one of the reasons I'm actually presenting this case study because this thing is huge they have like two million people in the",
    "start": "131340",
    "end": "138239"
  },
  {
    "text": "Netherlands playing with either some of their lottery games or with the sports betting which is full Toto or with the",
    "start": "138239",
    "end": "144120"
  },
  {
    "text": "new casino offering so this is software at scale very often when we do projects",
    "start": "144120",
    "end": "149819"
  },
  {
    "text": "at try Fork we do work on Mission critical systems but they don't necessarily involve scaling up to",
    "start": "149819",
    "end": "155700"
  },
  {
    "text": "something that can handle a load of 2 million users um one more slide on the project and then",
    "start": "155700",
    "end": "161459"
  },
  {
    "text": "I'll get into the the tech stuff because that's what we're here for um we the big the first thing I that we",
    "start": "161459",
    "end": "167879"
  },
  {
    "text": "had to work on for this project as I mentioned was was getting this integration platform in place for this",
    "start": "167879",
    "end": "173519"
  },
  {
    "text": "new it landscape took a bit longer than uh than planned not just on our side but mostly on on the overall vendor side and",
    "start": "173519",
    "end": "180900"
  },
  {
    "text": "getting everything there uh but early to uh 2021 we went live with the final Lottery game which is the biggest one",
    "start": "180900",
    "end": "187500"
  },
  {
    "text": "star's low today and basically concluded that project however at the same time a",
    "start": "187500",
    "end": "192900"
  },
  {
    "text": "new project had already started up because um in October last year in the Netherlands a new law finally came into",
    "start": "192900",
    "end": "199920"
  },
  {
    "text": "effect I have been working on this for years um it's called Constable of stunt which basically means uh remote games of",
    "start": "199920",
    "end": "207659"
  },
  {
    "text": "chance and this is a law that finally allows online sports betting and",
    "start": "207659",
    "end": "213360"
  },
  {
    "start": "209000",
    "end": "318000"
  },
  {
    "text": "gambling to be legalized in the Netherlands under very strict regulations and before that the law",
    "start": "213360",
    "end": "219300"
  },
  {
    "text": "didn't exist so they sort of didn't really allow it but it did happen of",
    "start": "219300",
    "end": "224459"
  },
  {
    "text": "course because they're especially abroad there are a lot of companies providing services like unibet uh also to Dutch",
    "start": "224459",
    "end": "230760"
  },
  {
    "text": "people even though they were not officially allowed to Target them um as a result uh both these strict",
    "start": "230760",
    "end": "237540"
  },
  {
    "text": "regulations we had to integrate a whole bunch of new systems it's like a bank right if you want to get open up a new",
    "start": "237540",
    "end": "243180"
  },
  {
    "text": "bank account you have to prove who you are it has to make sure that uh you're not on lists of politically exposed",
    "start": "243180",
    "end": "249420"
  },
  {
    "text": "people those type of things uh you have to do all sorts of identity proof it's similar actually when you want to sign",
    "start": "249420",
    "end": "255480"
  },
  {
    "text": "up uh for these new accounts here So currently the count of the number of",
    "start": "255480",
    "end": "260639"
  },
  {
    "text": "systems that we actually integrate is over 30 already and it's ever growing so that gives you a bit of an idea so with",
    "start": "260639",
    "end": "267240"
  },
  {
    "text": "that having said I want to cover two topics today I want to talk about how we have done a division in microservices",
    "start": "267240",
    "end": "273600"
  },
  {
    "text": "for our platform and I want to talk a little bit about observability and when it comes to microservices I have a",
    "start": "273600",
    "end": "280080"
  },
  {
    "text": "little quote here from uh from a song from Deus Belgium band all the years before while I was blind and this is",
    "start": "280080",
    "end": "286979"
  },
  {
    "text": "very often how microservices are presented oh we've been doing it all wrong and we need to move away from this",
    "start": "286979",
    "end": "292620"
  },
  {
    "text": "monolith and now we're in this micro Services world and now everything is great so so why do people say that what",
    "start": "292620",
    "end": "298139"
  },
  {
    "text": "are common reasons for actually moving to microservices well first of all very often what you will hear is that we have multiple teams and they need to",
    "start": "298139",
    "end": "304199"
  },
  {
    "text": "coordinate everything and they're rolling each other back so what we want to do is we want to move to services so",
    "start": "304199",
    "end": "310080"
  },
  {
    "text": "every team can be responsible for just a small set of services and then they can interoperate without having to",
    "start": "310080",
    "end": "316740"
  },
  {
    "text": "communicate all the time we are one team and this team has been growing and shrinking over time uh at",
    "start": "316740",
    "end": "323460"
  },
  {
    "start": "318000",
    "end": "425000"
  },
  {
    "text": "the top it was like seven or eight developers but it's always been just one team so this has never really been a reason for us",
    "start": "323460",
    "end": "329340"
  },
  {
    "text": "there was a single team managing all of our microservices another common reason is different Tech Stacks right maybe for",
    "start": "329340",
    "end": "335820"
  },
  {
    "text": "one I want to use Java for another one I want to use go I want to use some Rust maybe some things should just be serverless",
    "start": "335820",
    "end": "341940"
  },
  {
    "text": "um which is a very good reason if you have that requirement obviously to say I'm going to put them in in independent",
    "start": "341940",
    "end": "347280"
  },
  {
    "text": "services that I can just deploy and run by themselves we are a Java Spring Shop so everything",
    "start": "347280",
    "end": "354900"
  },
  {
    "text": "that we have built is actually built on top of spring Boot and it's a very straightforward stack we actually make",
    "start": "354900",
    "end": "361259"
  },
  {
    "text": "sure that we keep all services on things like similar versions right similar",
    "start": "361259",
    "end": "366360"
  },
  {
    "text": "versions of java similar versions of the Frameworks that we use so again this wasn't really a reason for us",
    "start": "366360",
    "end": "372180"
  },
  {
    "text": "um another important reason and one that I have actually used a lot in the past to",
    "start": "372180",
    "end": "377400"
  },
  {
    "text": "um uh have as a rationale for moving to microservices that Services have different life cycles right some",
    "start": "377400",
    "end": "383580"
  },
  {
    "text": "Services might be really stable so they you just keep them running and maybe a couple of times a year you do an upgrade",
    "start": "383580",
    "end": "389819"
  },
  {
    "text": "for them and other services change all the time right maybe on a daily or a weekly basis so they have everything",
    "start": "389819",
    "end": "395100"
  },
  {
    "text": "with life cycles and it makes sense to keep them separate we do have some of these but actually the regular way that",
    "start": "395100",
    "end": "401220"
  },
  {
    "text": "we perform deployments into production is we just take the whole thing and we just put everything there we just",
    "start": "401220",
    "end": "407460"
  },
  {
    "text": "replace everything regardless of whether it really changed or not so these weren't really reasons for us to",
    "start": "407460",
    "end": "415560"
  },
  {
    "text": "start doing microservices um now what I want to show you is why we did actually move to microservice and",
    "start": "415560",
    "end": "422280"
  },
  {
    "text": "why for us this has been a very good move um basically when we started this project",
    "start": "422280",
    "end": "428759"
  },
  {
    "start": "425000",
    "end": "486000"
  },
  {
    "text": "around five years ago microservices real uh all the hype right and I was discussing this with my team and I said",
    "start": "428759",
    "end": "435000"
  },
  {
    "text": "guys we could just really build this as a monolith and I could see the disappointed look in their eyes and said okay okay we'll move to microservices",
    "start": "435000",
    "end": "441780"
  },
  {
    "text": "also I like talking on about this stuff on conferences like I'm doing right now",
    "start": "441780",
    "end": "447060"
  },
  {
    "text": "right so that's a good reason and you can put this stuff on your resume we have been using spring Cloud we've been using Netflix Open Source stack we're",
    "start": "447060",
    "end": "453599"
  },
  {
    "text": "running on kubernetes super cool so that's basically uh what I wanted to",
    "start": "453599",
    "end": "458699"
  },
  {
    "text": "say about why we moved to microservices so thank you for coming to my talk uh Adele can check if there are any",
    "start": "458699",
    "end": "464099"
  },
  {
    "text": "questions in the app I'll take them and that's that's going to be it no obviously not obviously not sorry",
    "start": "464099",
    "end": "470520"
  },
  {
    "text": "um but what I want to make sure that I bring across is that whenever you choose",
    "start": "470520",
    "end": "477660"
  },
  {
    "text": "microservices you need to First think about what are the reasons for you what are the problems that you are trying to",
    "start": "477660",
    "end": "483419"
  },
  {
    "text": "solve with this architecture um before I go into that first let me show you our actual architecture what we",
    "start": "483419",
    "end": "490319"
  },
  {
    "start": "486000",
    "end": "577000"
  },
  {
    "text": "have is something like this where we say we have three types of services we have experiences as we call them those are",
    "start": "490319",
    "end": "495539"
  },
  {
    "text": "the public apis they provide apis to clients Json over HTTP which some people",
    "start": "495539",
    "end": "501539"
  },
  {
    "text": "might call rests but I won't go into that um and we have a lot of these different",
    "start": "501539",
    "end": "506639"
  },
  {
    "text": "experiences and typically they are fairly light right they are really just a dedicated API aimed towards specific",
    "start": "506639",
    "end": "514020"
  },
  {
    "text": "clients and then they talk to a process layer these process Services provide lots of business logic they do",
    "start": "514020",
    "end": "520260"
  },
  {
    "text": "orchestration they know that we need to interact with multiple backends or we need to perform multiple operations on",
    "start": "520260",
    "end": "525540"
  },
  {
    "text": "the same back end they do error handling rollbacks that sort of thing and as you can see at the bottom we have system",
    "start": "525540",
    "end": "531779"
  },
  {
    "text": "Services which basically act as dedicated adapter services to various back-ends and we have these in verticals",
    "start": "531779",
    "end": "540180"
  },
  {
    "text": "per domain so we have a logical a couple of logical domains within this whole landscape we have a player domain with",
    "start": "540180",
    "end": "546420"
  },
  {
    "text": "player accounts we have a game domain that has knowledge of all of the lotteries we have a subscription domain",
    "start": "546420",
    "end": "552120"
  },
  {
    "text": "that knows about how to interact with subscriptions but we also have things like how to send invoices to retail",
    "start": "552120",
    "end": "558360"
  },
  {
    "text": "shops that actually sell paper lottery tickets we have ways to integrate with the general ledger right these are all",
    "start": "558360",
    "end": "564360"
  },
  {
    "text": "very different application domains and we call them verticals and we end up with a system like this where you can",
    "start": "564360",
    "end": "570060"
  },
  {
    "text": "see that we can actually have multiple experiences going into the same process a process can call to multiple system",
    "start": "570060",
    "end": "575399"
  },
  {
    "text": "Services etc etc so why do we do this well there's um there's reasons for",
    "start": "575399",
    "end": "580560"
  },
  {
    "start": "577000",
    "end": "959000"
  },
  {
    "text": "doing this at development for runtime so at development time for us what this means is that you as a developer you",
    "start": "580560",
    "end": "586380"
  },
  {
    "text": "don't have to run the whole thing right um it's super annoying if you're working on a big project that this project is",
    "start": "586380",
    "end": "592980"
  },
  {
    "text": "actually a single server right then you're going to start it up you're going to have a cup of coffee you come back",
    "start": "592980",
    "end": "598140"
  },
  {
    "text": "and then you can start working right it's like working with Webster application server for some of you who have knowledge on that Brad it says open",
    "start": "598140",
    "end": "605220"
  },
  {
    "text": "for E-Business after five minutes I don't want that I want a developer to be able to just run locally what's necessary for this story that they're",
    "start": "605220",
    "end": "612660"
  },
  {
    "text": "working on basically but not only running that actually also knowing that",
    "start": "612660",
    "end": "618320"
  },
  {
    "text": "this system that we're doing it's an integration platform for the entire organization that means that it's huge",
    "start": "618320",
    "end": "624540"
  },
  {
    "text": "in terms of the domain I am one of the few people maybe the only one that still",
    "start": "624540",
    "end": "630300"
  },
  {
    "text": "oversees all of it because I've been involved with a project from start to end I don't want everyone in my team to",
    "start": "630300",
    "end": "636660"
  },
  {
    "text": "have to know everything about everything in order to be able to work on this thing it's very important for us to say",
    "start": "636660",
    "end": "641820"
  },
  {
    "text": "oh when this new project came in for all of this casino and live sports betting expansion that we needed to do that we",
    "start": "641820",
    "end": "648060"
  },
  {
    "text": "can just hire to additional developers which we did um and they can be productive within a",
    "start": "648060",
    "end": "653760"
  },
  {
    "text": "day because they just need to know about this little encapsulated domain that they're working in and they don't have",
    "start": "653760",
    "end": "659459"
  },
  {
    "text": "to know anything about lottery games if they're not working on lottery they don't have to know anything about",
    "start": "659459",
    "end": "664620"
  },
  {
    "text": "retailer invoicing or about managing terminals in retail shops right because that's not the thing that they're",
    "start": "664620",
    "end": "670140"
  },
  {
    "text": "currently working on and that's super important actually it means that we have this like a collection of systems and",
    "start": "670140",
    "end": "675779"
  },
  {
    "text": "you only need to deal with understanding the part that you're actively working on",
    "start": "675779",
    "end": "681000"
  },
  {
    "text": "um also what we found is that having these dedicated experience apis as dedicated Services provides a really",
    "start": "681000",
    "end": "687959"
  },
  {
    "text": "nice level of granularity for a number of reasons first of all security right if you're going to provide a service",
    "start": "687959",
    "end": "694440"
  },
  {
    "text": "that is tailored towards one or just a small number of dedicated clients then",
    "start": "694440",
    "end": "701399"
  },
  {
    "text": "you can make sure that from a security point of view you can just provide those clients with something like a scope that",
    "start": "701399",
    "end": "706800"
  },
  {
    "text": "actually matches that experience service if we want to we have the opportunity to",
    "start": "706800",
    "end": "711959"
  },
  {
    "text": "go more fine grains but typically we don't have to typically it's fine to say okay we're going to Grant you access to",
    "start": "711959",
    "end": "717240"
  },
  {
    "text": "one or two experienced apis and that is what you are allowed to do and you're not allowed to go any of the other",
    "start": "717240",
    "end": "722399"
  },
  {
    "text": "experience apis and these clients typically don't even know that these other apis exist it also means that",
    "start": "722399",
    "end": "727440"
  },
  {
    "text": "these apis will be fairly focused right as if you are a vendor who needs to",
    "start": "727440",
    "end": "732600"
  },
  {
    "text": "integrate with our platform you don't need to understand the world and everything and then figure out oh",
    "start": "732600",
    "end": "738779"
  },
  {
    "text": "but this is stuff that's relevant for me you know you're actually getting something that's already tailor-made focused on your needs and that also",
    "start": "738779",
    "end": "745740"
  },
  {
    "text": "means that for us as we are developing these apis over time they are expending it's much easier to keep them compatible",
    "start": "745740",
    "end": "752339"
  },
  {
    "text": "for these clients we are not building public apis that serve thousands of",
    "start": "752339",
    "end": "757800"
  },
  {
    "text": "unknown clients across the world we are dealing with a known set of vendors who is integrating with us right if we want",
    "start": "757800",
    "end": "764220"
  },
  {
    "text": "to make changes typically we will make sure that they are backwards compatible but if we do need to make things like breaking changes we know who our clients",
    "start": "764220",
    "end": "770760"
  },
  {
    "text": "are and if that's focused on to a particular service only it makes it much easier to coordinate",
    "start": "770760",
    "end": "776820"
  },
  {
    "text": "these sort of things so it has a lot of benefits there most important reason for us although",
    "start": "776820",
    "end": "781860"
  },
  {
    "text": "was not really the development benefits of doing microservice it was really the runtime benefits because this is",
    "start": "781860",
    "end": "787920"
  },
  {
    "text": "actually one of the very few systems that we're working on a try Fork where being able to do scaling individual",
    "start": "787920",
    "end": "795420"
  },
  {
    "text": "Parts actually matters at runtime this is not that often very often when we're building systems and we need to scale up",
    "start": "795420",
    "end": "801000"
  },
  {
    "text": "we just say yeah it just take the whole system deploy it five times put a load balancer in front and scaled up",
    "start": "801000",
    "end": "806940"
  },
  {
    "text": "which is fine if you are dealing with maybe a couple of thousand users right and if you are by all means just do that",
    "start": "806940",
    "end": "814920"
  },
  {
    "text": "because it really works very well in our case this is not really true if there is a state lottery draw on the 10th of",
    "start": "814920",
    "end": "820139"
  },
  {
    "text": "every month we get over a million people in the Netherlands at 10 o'clock in the evening exactly we'll all want to check",
    "start": "820139",
    "end": "827639"
  },
  {
    "text": "if they want something so exactly at 10 o'clock we see this huge ramp up and we see literally a million people logging",
    "start": "827639",
    "end": "834000"
  },
  {
    "text": "in and then checking if they won the lottery right and if the system works they will be able to see immediately",
    "start": "834000",
    "end": "840060"
  },
  {
    "text": "that they didn't that's how lotteries work um we see the same thing with with soccer matches right maybe I should say",
    "start": "840060",
    "end": "846779"
  },
  {
    "text": "full ball depending on who's actually watching this video but this will be on YouTube I'll say soccer the same thing",
    "start": "846779",
    "end": "852720"
  },
  {
    "text": "happens right people start start actively logging in and interacting with these games also by having different",
    "start": "852720",
    "end": "859560"
  },
  {
    "text": "Services we limit the blast radius if something actually crashes um of course nothing ever crashes",
    "start": "859560",
    "end": "865139"
  },
  {
    "text": "because of mistakes that we make but there might be mistakes and things that we use right we have actually had",
    "start": "865139",
    "end": "871260"
  },
  {
    "text": "some cases for example with we had a third-party library for doing syslog over tcpip",
    "start": "871260",
    "end": "877760"
  },
  {
    "text": "to propagate login event to a third-party security system this was",
    "start": "877760",
    "end": "883740"
  },
  {
    "text": "their requirement and I found a library that could actually do this called syslog for J it sounded good it was",
    "start": "883740",
    "end": "889079"
  },
  {
    "text": "actually from a big company that open sourced it so I thought okay it has seen a lot of production use already let's",
    "start": "889079",
    "end": "895560"
  },
  {
    "text": "put that in turned out it had a memory leak because it had an unbounded buffer there where before actually sending",
    "start": "895560",
    "end": "902100"
  },
  {
    "text": "something out it would just put it in a linked list right it was unbounded which is terrible it was also a linked list which was also",
    "start": "902100",
    "end": "909240"
  },
  {
    "text": "terrible uh I had to rewrite the whole thing but um if this happens and you got you run out of memory and your thing",
    "start": "909240",
    "end": "914760"
  },
  {
    "text": "gets restarted it's really nice if this is at least limited to one particular service rather than to the whole thing",
    "start": "914760",
    "end": "921720"
  },
  {
    "text": "um also um even though as I mentioned for regular deploys we deploy everything it",
    "start": "921720",
    "end": "927180"
  },
  {
    "text": "is really nice to be able to just say I want to update this one thing either in a staging system or in production",
    "start": "927180",
    "end": "932760"
  },
  {
    "text": "without affecting anything else we can do ad hoc deployment sometimes if we have like a critical bug fix that needs",
    "start": "932760",
    "end": "939540"
  },
  {
    "text": "to go out now I can just push a new Docker image I can update my kubernetes deployments and it will just re do a",
    "start": "939540",
    "end": "946139"
  },
  {
    "text": "rolling restart of this one service and I I only have to see if that is okay and I only have to monitor for changes on",
    "start": "946139",
    "end": "952500"
  },
  {
    "text": "that part I don't have to worry about the whole universe that is nail on slot Rider so it's actually kind of nice so",
    "start": "952500",
    "end": "959519"
  },
  {
    "start": "959000",
    "end": "1089000"
  },
  {
    "text": "as a result every service that we build is in fact a Java spring boot application we Deploy on AWS to",
    "start": "959519",
    "end": "967380"
  },
  {
    "text": "kubernetes nowadays we migrated from ECS to kubernetes which is a different story but we're there and when it comes to",
    "start": "967380",
    "end": "974339"
  },
  {
    "text": "communication these Services talk to each other over HTTP or using point-to-point messaging Amazon provides",
    "start": "974339",
    "end": "980399"
  },
  {
    "text": "a service called Qs that we use for async communication for retries that sort of thing so it's a combination of",
    "start": "980399",
    "end": "986459"
  },
  {
    "text": "these two things basically the way that we've set up our project is it's a mono repo it's a single git repo it has",
    "start": "986459",
    "end": "993380"
  },
  {
    "text": "nowadays I think something like 32 33 different services in there there's a bunch of shared libraries in there and",
    "start": "993380",
    "end": "999959"
  },
  {
    "text": "we built them with Gradle this may sound very heavyweight right if you have to check out something and build it it's",
    "start": "999959",
    "end": "1006980"
  },
  {
    "text": "over 30 services and it is huge it's a lot of lines of code now we have chosen Gradle for a number",
    "start": "1006980",
    "end": "1014300"
  },
  {
    "text": "of reasons actually and this is like Vim versus emex right Maven versus Gradle in",
    "start": "1014300",
    "end": "1020120"
  },
  {
    "text": "Java but obviously like Vim versus emacs the answer is easy you have to use vim and you have to use Gradle because with",
    "start": "1020120",
    "end": "1026839"
  },
  {
    "text": "Gradle um you get build caching and for us a typical build",
    "start": "1026839",
    "end": "1032120"
  },
  {
    "text": "takes less than five minutes and what this thing does is it compiles everything it runs all of the tests and",
    "start": "1032120",
    "end": "1037280"
  },
  {
    "text": "we do actually have tests so it's not like it's fast because we don't um it will then also build all of our",
    "start": "1037280",
    "end": "1042500"
  },
  {
    "text": "Docker images and it pushes out all of those Docker images to repositories within those five minutes and that is",
    "start": "1042500",
    "end": "1048620"
  },
  {
    "text": "because everything is efficient Gradle will know if something didn't change I don't actually need to rebuild it again it's just there our Docker images are",
    "start": "1048620",
    "end": "1056120"
  },
  {
    "text": "set up in such a way that we don't include files that will automatically change on every build like putting in a",
    "start": "1056120",
    "end": "1061640"
  },
  {
    "text": "timestamp there so if something doesn't change we actually end up with a new documents that is literally exactly the",
    "start": "1061640",
    "end": "1067580"
  },
  {
    "text": "same as the previous one and Docker is smart that way when you try to push that image to a repository it will just do",
    "start": "1067580",
    "end": "1072679"
  },
  {
    "text": "some some checks based on hashes and checksums and says hey you know what I already have this thing I just need to retake it so it's super efficient so",
    "start": "1072679",
    "end": "1079760"
  },
  {
    "text": "that means as a setup like this actually works very well even though you might be tempted to think that this is becoming",
    "start": "1079760",
    "end": "1085640"
  },
  {
    "text": "like very inefficient very slow to work with so in practice a lot of services",
    "start": "1085640",
    "end": "1092059"
  },
  {
    "start": "1089000",
    "end": "1133000"
  },
  {
    "text": "that we have follow the architecture that I've shown to have a nice experience they have a process they have",
    "start": "1092059",
    "end": "1097280"
  },
  {
    "text": "a system and in general what we do see is actual reuse of our process services so we do",
    "start": "1097280",
    "end": "1104000"
  },
  {
    "text": "see multiple experiences calling into the pro same process service which is how we designed these architecture so",
    "start": "1104000",
    "end": "1110660"
  },
  {
    "text": "it's nice to see that this actually works as we hoped it would um however this is not something that we",
    "start": "1110660",
    "end": "1117740"
  },
  {
    "text": "strictly enforce there are quite a number of exceptions to this rule I like",
    "start": "1117740",
    "end": "1123320"
  },
  {
    "text": "to call myself a pragmatic architect or developer which also means that I'm an old and I'm cynical and I will just do",
    "start": "1123320",
    "end": "1130280"
  },
  {
    "text": "stuff because I can but in this case we have some good reasons for doing this so for example these dedicated system",
    "start": "1130280",
    "end": "1136400"
  },
  {
    "start": "1133000",
    "end": "1393000"
  },
  {
    "text": "services that I showed we found them to be very beneficial only for certain back-ends if our back end is like really",
    "start": "1136400",
    "end": "1143059"
  },
  {
    "text": "big we in we interoperate with it on many different levels it's Central to our domain then it makes a lot of sense",
    "start": "1143059",
    "end": "1149240"
  },
  {
    "text": "to say we're going to have a dedicated system adapter it acts sort of as a DDD anti-corruption layer really",
    "start": "1149240",
    "end": "1156620"
  },
  {
    "text": "um so that's one use case for it also because we're using messaging what we found is for certain systems our only",
    "start": "1156620",
    "end": "1162919"
  },
  {
    "text": "interaction with it is by sending a message to a message queue picking up the message and then calling the third",
    "start": "1162919",
    "end": "1168260"
  },
  {
    "text": "party system we never do it runtime in the blocking fashion it turns out that it's really nice to have dedicated",
    "start": "1168260",
    "end": "1173960"
  },
  {
    "text": "system adapter for those as well because you can just take them out you can redeploy them at will it's all right",
    "start": "1173960",
    "end": "1179419"
  },
  {
    "text": "it's all asynchronous anyways um so an example of this is the uh the",
    "start": "1179419",
    "end": "1184880"
  },
  {
    "text": "marketing system that we use for sending out emails right we only interact with it through messages that we put on a queue and we have a dedicated system",
    "start": "1184880",
    "end": "1191780"
  },
  {
    "text": "service for that one also that one needs to be limited in the amount of runtime instances because we're only allowed to",
    "start": "1191780",
    "end": "1197660"
  },
  {
    "text": "send that many requests in parallel that's another good reason for encapsulating this in its own service",
    "start": "1197660",
    "end": "1202940"
  },
  {
    "text": "finally we're Tech right I mentioned Tech stag as a common example for",
    "start": "1202940",
    "end": "1208039"
  },
  {
    "text": "choosing microservices we do actually have some systems that just have like a weird requirements on a technical point",
    "start": "1208039",
    "end": "1214160"
  },
  {
    "text": "of view for interacting with them we have to integrate with an Azure event help that's called slack Kafka but then",
    "start": "1214160",
    "end": "1219919"
  },
  {
    "text": "from Microsoft and they provide the Java SDK and when I saw that I thought Ah that's nice I don't have to do it myself",
    "start": "1219919",
    "end": "1225799"
  },
  {
    "text": "it actually underneath it uses aimqp which is a messaging protocol but what I've done that they've used project",
    "start": "1225799",
    "end": "1231919"
  },
  {
    "text": "reactor which is for reactive non-blocking IO and then they've just put a blocking API on top and that's the",
    "start": "1231919",
    "end": "1239960"
  },
  {
    "text": "SDK that you get and it's like the worst of Both Worlds right you still are blocking uh but now you lose all of the",
    "start": "1239960",
    "end": "1246500"
  },
  {
    "text": "contacts when you actually call this thing and it starts logging because you have no idea what thread it actually uses and and it's buggy in the beginning",
    "start": "1246500",
    "end": "1253460"
  },
  {
    "text": "it's better now but in the beginning we've actually seen some problems with this thing it would just not rebuild connections that sort of stuff",
    "start": "1253460",
    "end": "1260120"
  },
  {
    "text": "just get it out of the house I don't want it here right you can sleep in the backyard or as we Architects like to",
    "start": "1260120",
    "end": "1266299"
  },
  {
    "text": "call it we have isolated the service um but if this is not the case right you",
    "start": "1266299",
    "end": "1271700"
  },
  {
    "text": "don't necessarily need a dedicated system service just use a process and the process can just talk to some",
    "start": "1271700",
    "end": "1276799"
  },
  {
    "text": "back-end directly and it's interesting because yesterday we had a talk here about Progressive delivery in",
    "start": "1276799",
    "end": "1283100"
  },
  {
    "text": "microservices from um from Matt Turner and um he was actually showing an",
    "start": "1283100",
    "end": "1288260"
  },
  {
    "text": "architecture where they were building as in his company they were building system adapters for literally everything",
    "start": "1288260",
    "end": "1294320"
  },
  {
    "text": "even stuff like a database they have an architecture where everything internally is just grpc and if they need to talk to",
    "start": "1294320",
    "end": "1301760"
  },
  {
    "text": "a database they just put a small adapter in front of it uh actually not typically written in go because apparently the go",
    "start": "1301760",
    "end": "1307820"
  },
  {
    "text": "odbc is like a hack so they use something real like.net or Java to",
    "start": "1307820",
    "end": "1313100"
  },
  {
    "text": "actually interact with the database and then they just put a little API in front of it so that they can send SQL over",
    "start": "1313100",
    "end": "1319340"
  },
  {
    "text": "grpc to it it made me think about something that because I would never think about doing",
    "start": "1319340",
    "end": "1324980"
  },
  {
    "text": "this but I'm not saying it's wrong what I'm saying is that apparently I'm still thinking in like an old Enterprise Java",
    "start": "1324980",
    "end": "1332240"
  },
  {
    "text": "architect I think in bigger systems whereas this stuff that that Matt presented is truly Cloud native",
    "start": "1332240",
    "end": "1338000"
  },
  {
    "text": "so it got me thinking actually last night I said maybe I'm not Cloud native maybe I'm more like a cloud expat I",
    "start": "1338000",
    "end": "1346520"
  },
  {
    "text": "wasn't really born here I just come here to work and I get to uh to actually complain",
    "start": "1346520",
    "end": "1352520"
  },
  {
    "text": "about all the things I find really complex in this In This Cloud environment compared to where I came from",
    "start": "1352520",
    "end": "1358220"
  },
  {
    "text": "um also I get to make fun of all of the little idiosyncrasies and it's weird stuff that they do In This Cloud native",
    "start": "1358220",
    "end": "1363320"
  },
  {
    "text": "world and and somehow I pay a lot less taxes than the natives do now that's actually not true but uh I would",
    "start": "1363320",
    "end": "1369620"
  },
  {
    "text": "actually like to use this opportunity here and go to 2022 to introduce this",
    "start": "1369620",
    "end": "1375140"
  },
  {
    "text": "new term Cloud expat right if you don't fill your chest not there yet in terms of cloud",
    "start": "1375140",
    "end": "1380780"
  },
  {
    "text": "native and I'm just one person but I think together we can actually do this right so go out on Twitter and introduce",
    "start": "1380780",
    "end": "1387919"
  },
  {
    "text": "the cloud expat there this is not my talk I have actually some more stuff",
    "start": "1387919",
    "end": "1393380"
  },
  {
    "start": "1393000",
    "end": "1481000"
  },
  {
    "text": "um there are some Services where it just doesn't make sense to split stuff up at all so it's just a single service that",
    "start": "1393380",
    "end": "1399080"
  },
  {
    "text": "does everything um for example we have Technical Services if someone needs to obtain a",
    "start": "1399080",
    "end": "1404600"
  },
  {
    "text": "bearer token to interact with our system they need to log in there is a system for that that just goes directly to a",
    "start": "1404600",
    "end": "1410960"
  },
  {
    "text": "identity provider we have some business services for example for integrating with the general ledger or for sending",
    "start": "1410960",
    "end": "1417320"
  },
  {
    "text": "invoices to retailers those are just completely self-encapsulated they are their own thing they don't really",
    "start": "1417320",
    "end": "1422539"
  },
  {
    "text": "benefit from any distribution in terms of process layers or or system services",
    "start": "1422539",
    "end": "1428059"
  },
  {
    "text": "like that the good news is of course if you start with a single service you can always extract stuff later right sometimes",
    "start": "1428059",
    "end": "1434360"
  },
  {
    "text": "people have mentioned or explained the term architecture as it's the stuff that turns out to be hard to change after the",
    "start": "1434360",
    "end": "1440659"
  },
  {
    "text": "fact that's your architecture but it's called software for a reason right we can change a lot of things",
    "start": "1440659",
    "end": "1445940"
  },
  {
    "text": "quite easily a related term that you may have heard is lost responsible moment right what is the last responsible",
    "start": "1445940",
    "end": "1452299"
  },
  {
    "text": "moment that I can defer a decision to before I make the decision and it turns out that for a lot of these choices your",
    "start": "1452299",
    "end": "1458419"
  },
  {
    "text": "last responsible moment is after actually already running your system in production I can do this and I can make",
    "start": "1458419",
    "end": "1465080"
  },
  {
    "text": "this change later on and nothing will be heard right I don't have to stay up at night thinking oh maybe I got this wrong",
    "start": "1465080",
    "end": "1471679"
  },
  {
    "text": "you can make these changes after the fact right so don't worry too much about these things as you are designing your",
    "start": "1471679",
    "end": "1476960"
  },
  {
    "text": "system just keep reevaluating if stuff still makes sense for you so as a result",
    "start": "1476960",
    "end": "1482480"
  },
  {
    "start": "1481000",
    "end": "1536000"
  },
  {
    "text": "we have some services that are fairly tightly coupled right an experience talking to a process they share a common",
    "start": "1482480",
    "end": "1488000"
  },
  {
    "text": "contract these are by Design these are tightly coupled Services some others are more Loosely coupled maybe they just",
    "start": "1488000",
    "end": "1493520"
  },
  {
    "text": "have a couple of messages that they use to interact and that's it and we have some servers that are just completely",
    "start": "1493520",
    "end": "1499159"
  },
  {
    "text": "independent of other services right they could just be deployed on even to a different Cloud if you want to and it",
    "start": "1499159",
    "end": "1504559"
  },
  {
    "text": "would still work so there's different levels here and we are very happy actually with the results here so we",
    "start": "1504559",
    "end": "1510140"
  },
  {
    "text": "have happily coupling in our applications here and there but it's by Design so without the point I want to",
    "start": "1510140",
    "end": "1516980"
  },
  {
    "text": "make here is that you can have happily coupling if it's with full intent and if",
    "start": "1516980",
    "end": "1522799"
  },
  {
    "text": "it's consensual um and what we've seen is that this system is still expanding right we have",
    "start": "1522799",
    "end": "1529159"
  },
  {
    "text": "been using this architecture now for almost five years and it's really serving us very well so this is something that I want to give you as",
    "start": "1529159",
    "end": "1535340"
  },
  {
    "text": "food for thought now there is another thing I want to briefly talk about let me quickly see",
    "start": "1535340",
    "end": "1540980"
  },
  {
    "start": "1536000",
    "end": "1575000"
  },
  {
    "text": "how briefly that will be uh we have time um because once you build a system like",
    "start": "1540980",
    "end": "1546799"
  },
  {
    "text": "this and you put it in production it is crucial that you're also able to observe what it actually does right so",
    "start": "1546799",
    "end": "1553760"
  },
  {
    "text": "you've probably seen this before if you have been to conference like this right the three pillars of observability we're",
    "start": "1553760",
    "end": "1559580"
  },
  {
    "text": "dealing with logging individual events saying something happened we're dealing with tracing seeing how calls actually",
    "start": "1559580",
    "end": "1566840"
  },
  {
    "text": "propagate through our system of services and we have metrics that are more like pre-aggregated statistics explaining",
    "start": "1566840",
    "end": "1572840"
  },
  {
    "text": "things on a higher level so when it comes to logging by default most people just log using a log pattern",
    "start": "1572840",
    "end": "1579380"
  },
  {
    "start": "1575000",
    "end": "1630000"
  },
  {
    "text": "to a file or something like that and that works well for local development doesn't scale at all if you want to go",
    "start": "1579380",
    "end": "1584960"
  },
  {
    "text": "to centralized logging right it's lossy you see here things like packages being",
    "start": "1584960",
    "end": "1590299"
  },
  {
    "text": "abbreviated it's also really hard to parse especially with Java and stack traces oh all of a sudden this thing is",
    "start": "1590299",
    "end": "1595820"
  },
  {
    "text": "now multi-line is that still using a log message there are tools that can deal with this right but there are sort of",
    "start": "1595820",
    "end": "1601279"
  },
  {
    "text": "fixing a problem that you don't even supposed to have because what you should be doing you should be using structured",
    "start": "1601279",
    "end": "1607100"
  },
  {
    "text": "logging that can be Json that was actually a recent discussion on Twitter from about doing binary logging I'm not",
    "start": "1607100",
    "end": "1613039"
  },
  {
    "text": "going to go into that one most people use Json for this but that means that you can just ship this off you can have",
    "start": "1613039",
    "end": "1619700"
  },
  {
    "text": "all sorts of fields obviously it will have the stuff that you would expect like the timestamp the actual log",
    "start": "1619700",
    "end": "1625039"
  },
  {
    "text": "measures in a Long Level but you can add additional Fields as well which is really important so this is one uh",
    "start": "1625039",
    "end": "1631700"
  },
  {
    "start": "1630000",
    "end": "1683000"
  },
  {
    "text": "simplified example of our actual law configuration that we have in our system where you can see we're using this thing",
    "start": "1631700",
    "end": "1636860"
  },
  {
    "text": "called a log stash encoder and this will actually ensure that you've got json-based logging and what you can also",
    "start": "1636860",
    "end": "1642080"
  },
  {
    "text": "see is that we put additional fields in here so we put the name of the service in there we want to know whenever we",
    "start": "1642080",
    "end": "1647480"
  },
  {
    "text": "send a log message off to our centralized logging system what was the service that was responsible for coming",
    "start": "1647480",
    "end": "1652640"
  },
  {
    "text": "up with this log statement um also what you can see here is that this is just a console appender so we",
    "start": "1652640",
    "end": "1658460"
  },
  {
    "text": "are writing this stuff to standard out but the way that this works with Docker is that there is just another agent that",
    "start": "1658460",
    "end": "1665179"
  },
  {
    "text": "will actually pick up that logging that is produced by your container and in our case that's going to be a data dog agent",
    "start": "1665179",
    "end": "1671659"
  },
  {
    "text": "that just forwards these logs off today the dock which is the observability solution that we happen to use right but",
    "start": "1671659",
    "end": "1677120"
  },
  {
    "text": "that's important to think about contextual information is super important when you think about logging",
    "start": "1677120",
    "end": "1682400"
  },
  {
    "text": "and another way to add contextual information that's more Dynamic than just a service name is MDC and this is",
    "start": "1682400",
    "end": "1687980"
  },
  {
    "start": "1683000",
    "end": "1737000"
  },
  {
    "text": "like a pet peeve of mine I've put this in this presentation because I still after 15 years of explaining this stuff",
    "start": "1687980",
    "end": "1695539"
  },
  {
    "text": "to people see that people don't know about this and you need to know about this MDC is a very simple concept it's",
    "start": "1695539",
    "end": "1700700"
  },
  {
    "text": "like a map key value pairs that is associated with the currently handled request typically by storing another thread",
    "start": "1700700",
    "end": "1707240"
  },
  {
    "text": "local and you can put in stuff here like what is the current user what is the current request that we're",
    "start": "1707240",
    "end": "1713960"
  },
  {
    "text": "actually handling what is the current batch job that's running right maybe if that is what you're building um so you see an example here of how",
    "start": "1713960",
    "end": "1720679"
  },
  {
    "text": "simple it is to use this stuff what we do here is we get the current request URI and we put it in a variable so",
    "start": "1720679",
    "end": "1726140"
  },
  {
    "text": "whenever we have logging we can see okay what in what context was this actually produced what URL were we handling when",
    "start": "1726140",
    "end": "1733520"
  },
  {
    "text": "we were performing this logging and it's really just three lines of code um another thing that is really",
    "start": "1733520",
    "end": "1739520"
  },
  {
    "start": "1737000",
    "end": "1866000"
  },
  {
    "text": "important for us is tracing so tracing is the idea of saying we're going to create a unique ID whenever a request",
    "start": "1739520",
    "end": "1745220"
  },
  {
    "text": "comes in and we're going to propagate that to Downstream services and we're using spring boot uh with uh support for",
    "start": "1745220",
    "end": "1752840"
  },
  {
    "text": "something called Spring cloud and part of that spring cloud is something called Spring Cloud sleuth that actually does this for us so this requires no coding",
    "start": "1752840",
    "end": "1760460"
  },
  {
    "text": "this is just a matter of adding some dependencies and then this is in place but this first is super important to be",
    "start": "1760460",
    "end": "1765980"
  },
  {
    "text": "able to correlate logging right we want to be able to see if we actually have an experience calling a process calling to",
    "start": "1765980",
    "end": "1772399"
  },
  {
    "text": "system services that all of this logging was actually done in the context of the same logical request that was being made",
    "start": "1772399",
    "end": "1778640"
  },
  {
    "text": "what we also do is these Trace IDs that get generated we put them in response headers so we send them back to our",
    "start": "1778640",
    "end": "1783799"
  },
  {
    "text": "clients so if there's a problem they can come to us and they say can you check the logging for this Trace ID this is",
    "start": "1783799",
    "end": "1789320"
  },
  {
    "text": "not only nice in production but this is especially nice on staging environments right how often do you have people",
    "start": "1789320",
    "end": "1794360"
  },
  {
    "text": "coming up to you when you have a development or staging environment saying yeah yesterday we noticed a",
    "start": "1794360",
    "end": "1799399"
  },
  {
    "text": "problem with your system it was somewhere around four o'clock can you have a look in the logs to see what happened and you start looking at the",
    "start": "1799399",
    "end": "1804799"
  },
  {
    "text": "logs around four o'clock and there's like 5 000 messages so you say well no I can't go yourself right I",
    "start": "1804799",
    "end": "1810620"
  },
  {
    "text": "cannot do this but with this what we do is we make everything unique so we send",
    "start": "1810620",
    "end": "1816140"
  },
  {
    "text": "back a unique Trace ID and a client can simply tell us hey what happened for this particular trace and with a single",
    "start": "1816140",
    "end": "1822440"
  },
  {
    "text": "click we can basically look up the correlated along our testers do this as well this is awesome for end-to-end",
    "start": "1822440",
    "end": "1828440"
  },
  {
    "text": "testing and then the problem occurs someone needs to figure out okay what was it actually that caused a problem we",
    "start": "1828440",
    "end": "1833539"
  },
  {
    "text": "can see exactly what happened I'll give you I'll give you a demo at the moment um with tracing the idea is that when",
    "start": "1833539",
    "end": "1839240"
  },
  {
    "text": "you go from one service to another it actually adds multiple spans as they're called so you have a trace made",
    "start": "1839240",
    "end": "1845419"
  },
  {
    "text": "up of multiple spins you can export these two systems that allow you to inspect them there's a whole range of solutions for this nowadays we don't",
    "start": "1845419",
    "end": "1851779"
  },
  {
    "text": "actually need this really so we don't do this we just use Trace IDs for logging at the moment but if we wanted to we",
    "start": "1851779",
    "end": "1858020"
  },
  {
    "text": "could also expose these traces to systems for further analysis for example to find common bottlenecks or something",
    "start": "1858020",
    "end": "1863059"
  },
  {
    "text": "like that but we have other ways of doing that so I want to give you like a really quick demo just to give you a feel for this",
    "start": "1863059",
    "end": "1869179"
  },
  {
    "start": "1866000",
    "end": "2070000"
  },
  {
    "text": "so I have a link here this will take uh this will take us to an acceptance environment actually that we have",
    "start": "1869179",
    "end": "1875720"
  },
  {
    "text": "uh I hope if anything happens let's see because it's",
    "start": "1875720",
    "end": "1881720"
  },
  {
    "text": "there we go so um what we go to here is the acceptance environment of our uh of our",
    "start": "1881720",
    "end": "1888140"
  },
  {
    "text": "application and what I've done is I've done a little search you can see it over here based on the barcode because we had an error related",
    "start": "1888140",
    "end": "1895460"
  },
  {
    "text": "to this barcode and I can see that actually I found an error I can see that you're right right this is my MDC",
    "start": "1895460",
    "end": "1901279"
  },
  {
    "text": "logging I can see okay apparently we're handling some some product order results request and I got an unexpected error",
    "start": "1901279",
    "end": "1907340"
  },
  {
    "text": "and the unexpected error said in this case here there was an exception",
    "start": "1907340",
    "end": "1914539"
  },
  {
    "text": "and uh if we look at that one we see that the back end said this inquiry is not allowed for the current pack right",
    "start": "1914539",
    "end": "1921260"
  },
  {
    "text": "whatever but we we know that something went wrong but we don't know exactly who requested this or whatever we do get a",
    "start": "1921260",
    "end": "1926720"
  },
  {
    "text": "lot of additional context though if I look at this I do see the trace ID here this is the thing I was talking about so what I can do is I can copy that Trace",
    "start": "1926720",
    "end": "1932779"
  },
  {
    "text": "ID here there we go I could open up a new tab and I can say okay for the acceptance",
    "start": "1932779",
    "end": "1938179"
  },
  {
    "text": "environments I want to see the trace this is just a bookmark that I have with a placeholder put in the trace ID and",
    "start": "1938179",
    "end": "1944480"
  },
  {
    "text": "this will just take me to all of the correlated logging for this particular error that I just had so you can actually see here if I zoom in a bit",
    "start": "1944480",
    "end": "1950659"
  },
  {
    "text": "again okay we from bottom to to top because that's the ordering here someone arrived at an experience from there we",
    "start": "1950659",
    "end": "1957620"
  },
  {
    "text": "called a process layer which called the system layer we can see all this stuff in place",
    "start": "1957620",
    "end": "1962960"
  },
  {
    "text": "now you can also see who made a request because in our experiences I also lock things like the client ID and if I look",
    "start": "1962960",
    "end": "1968419"
  },
  {
    "text": "over here I can actually see that in this case we had a client ID there",
    "start": "1968419",
    "end": "1975140"
  },
  {
    "text": "that's also results into an actual client name and is datadog doing this this is another nice example of log",
    "start": "1975140",
    "end": "1980600"
  },
  {
    "text": "information right our system doesn't know about these names it just knows about client IDs but I can actually ask",
    "start": "1980600",
    "end": "1986419"
  },
  {
    "text": "the logging system itself to say just have a map so you can enrich that into something that humans can read also",
    "start": "1986419",
    "end": "1993019"
  },
  {
    "text": "there is an awful lot of debug logging here way more than a typical system",
    "start": "1993019",
    "end": "1998480"
  },
  {
    "text": "would have because we actually show every request that we're making to a",
    "start": "1998480",
    "end": "2004299"
  },
  {
    "text": "downstream service and the response that's not something I would advise you to do on every request that's a huge",
    "start": "2004299",
    "end": "2009820"
  },
  {
    "text": "amount of long so why is it happening here well if we look at this sending method",
    "start": "2009820",
    "end": "2015760"
  },
  {
    "text": "then what we can see is that there is a little request header over here you can see this Gateway log request and Gateway",
    "start": "2015760",
    "end": "2021820"
  },
  {
    "text": "log response headers set to true this is another very useful trick what we have done is we've allowed clients to send an",
    "start": "2021820",
    "end": "2028480"
  },
  {
    "text": "additional request header that will trigger additional logging in our system and you can use this especially in",
    "start": "2028480",
    "end": "2034779"
  },
  {
    "text": "production scenarios if by default you're not logging something but you want to reproduce an error and you want",
    "start": "2034779",
    "end": "2039940"
  },
  {
    "text": "to have more information on what's Happening than you get with your default logging so you can just enable prerequest debug logging and if you have",
    "start": "2039940",
    "end": "2047919"
  },
  {
    "text": "something like Trace ID propagation typically your framework will just allow you to add something called baggage",
    "start": "2047919",
    "end": "2053200"
  },
  {
    "text": "headers which will automatically handle the propagation of these headers so that it just doesn't only work for the first",
    "start": "2053200",
    "end": "2058480"
  },
  {
    "text": "service that handles your request but also for all of the downstream Services right so that's some tips I wanted to",
    "start": "2058480",
    "end": "2066398"
  },
  {
    "text": "give you for working with logging um in addition to this we do metrics",
    "start": "2066399",
    "end": "2072580"
  },
  {
    "start": "2070000",
    "end": "2150000"
  },
  {
    "text": "metrics is very different because where logging is just a single event metrics are pre-aggregated so like every minute",
    "start": "2072580",
    "end": "2078358"
  },
  {
    "text": "we gather information on what was the average request time for handling an incoming ICP request or for outgoing sap",
    "start": "2078359",
    "end": "2085599"
  },
  {
    "text": "request there are jvm Level metrics there's actually a whole bunch of them and most of them are built in we don't",
    "start": "2085599",
    "end": "2091419"
  },
  {
    "text": "have a lot of custom metrics a lot of this is just built into the framework and what's nice about these things is they are enriched with tags or",
    "start": "2091419",
    "end": "2097420"
  },
  {
    "text": "Dimensions as these things are called so it's not very useful to just know how long did it take to handle all requests",
    "start": "2097420",
    "end": "2103180"
  },
  {
    "text": "on average in my system now I need to know okay but what service was this request for what URL what was the result",
    "start": "2103180",
    "end": "2109240"
  },
  {
    "text": "was it the 200 okay was it a 500 internal server error all of this stuff I need to be able to filter on that so I",
    "start": "2109240",
    "end": "2114400"
  },
  {
    "text": "can do some some actual analysis of my data and this is exactly what metrics",
    "start": "2114400",
    "end": "2119740"
  },
  {
    "text": "provides and um for me it was sort of an eye-opener when we started using this because this",
    "start": "2119740",
    "end": "2125140"
  },
  {
    "text": "is the first system I've ever used metrics on a large scale and I'm never going to build any system without metrics again right these things are so",
    "start": "2125140",
    "end": "2132460"
  },
  {
    "text": "extremely useful both for technical reasons but also for business reasons right because if you can see how often a",
    "start": "2132460",
    "end": "2138820"
  },
  {
    "text": "certain endpoint is being called successfully that also tells you like how many tickets are we actually selling right it's the same metric basically or",
    "start": "2138820",
    "end": "2145359"
  },
  {
    "text": "at least in our case it is so that's really something I can recommend you uh to uh to look into",
    "start": "2145359",
    "end": "2151420"
  },
  {
    "start": "2150000",
    "end": "2175000"
  },
  {
    "text": "um they scale much nicer than logging because they're pre-aggregated so you can easily keep like three months worth",
    "start": "2151420",
    "end": "2157060"
  },
  {
    "text": "of metrics we don't do that for logging we'll be way too expensive it's also way faster right these systems that deal",
    "start": "2157060",
    "end": "2163359"
  },
  {
    "text": "with metrics are very good at rolling them up aggregating them over a larger period of time so very quickly you can",
    "start": "2163359",
    "end": "2169359"
  },
  {
    "text": "do some ad hoc dashboarding with them they're cheaper to store and like I said it provides tremendous insights so I",
    "start": "2169359",
    "end": "2176500"
  },
  {
    "start": "2175000",
    "end": "2270000"
  },
  {
    "text": "don't think I actually have time for a demo for metrics no but if you're interested in that uh please come and",
    "start": "2176500",
    "end": "2181839"
  },
  {
    "text": "find me after the presentation I would be happy to show you some actual production metrics which I'm not very happy to actually put on video here but",
    "start": "2181839",
    "end": "2189160"
  },
  {
    "text": "show you some production metrics of the system that we're working on it's truly interesting stuff so to conclude",
    "start": "2189160",
    "end": "2195339"
  },
  {
    "text": "um reasons for actually wanting to move or to adopt a microservices architecture very greatly",
    "start": "2195339",
    "end": "2201520"
  },
  {
    "text": "and you shouldn't be looking for reasons to adopt microservices you should be",
    "start": "2201520",
    "end": "2207040"
  },
  {
    "text": "looking at the problems that you have and that you want to solve and then decide oh microservice might actually be a good way to do this right don't listen",
    "start": "2207040",
    "end": "2213700"
  },
  {
    "text": "to people like me talking at conferences and just saying yeah you should be doing this because it worked for us and they",
    "start": "2213700",
    "end": "2219579"
  },
  {
    "text": "say oh that's nice I'm going to do the same thing because your use cases and your problems are not mine fortunately",
    "start": "2219579",
    "end": "2225339"
  },
  {
    "text": "they're not mine um so understand what matters to you also make sure that you can observe your",
    "start": "2225339",
    "end": "2230500"
  },
  {
    "text": "systems it's super important that you have contextual information in your logging that you have metrics available",
    "start": "2230500",
    "end": "2235900"
  },
  {
    "text": "and also make sure that you as a developer can actually see this stuff from production I still talk to people",
    "start": "2235900",
    "end": "2242200"
  },
  {
    "text": "typically they work for banks where they say yeah if there is an issue I need to",
    "start": "2242200",
    "end": "2247540"
  },
  {
    "text": "file a request to some change management system and then some operator actually gives me the logging quit your job if",
    "start": "2247540",
    "end": "2254680"
  },
  {
    "text": "this happens they trust you to write production codes but they don't trust you to see how it actually acts in",
    "start": "2254680",
    "end": "2260619"
  },
  {
    "text": "production this there is no feedback loop this is this is killing right so quit your job and it so happens we are",
    "start": "2260619",
    "end": "2267760"
  },
  {
    "text": "hiring at trife organ system so um if you're interested in learning more",
    "start": "2267760",
    "end": "2272859"
  },
  {
    "start": "2270000",
    "end": "2302000"
  },
  {
    "text": "about some of the things we do because this this talk is just 40 minutes and I could talk about this for a day",
    "start": "2272859",
    "end": "2277960"
  },
  {
    "text": "um come and visit me after the I will be here all day at the conference at the try for boots and uh thanks for",
    "start": "2277960",
    "end": "2283780"
  },
  {
    "text": "attending [Applause]",
    "start": "2283780",
    "end": "2291829"
  }
]