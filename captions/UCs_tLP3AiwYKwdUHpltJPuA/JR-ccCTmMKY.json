[
  {
    "start": "0",
    "end": "32000"
  },
  {
    "text": "so we will try to get into what continues to plan and continuous delivery actually look like in practice",
    "start": "30",
    "end": "6170"
  },
  {
    "text": "it's hard to it's hard to give a talk about continuous delivery at Etsy",
    "start": "6170",
    "end": "11790"
  },
  {
    "text": "without really just talking about how we work in general so I think that I think that a lot of the way that we work is is",
    "start": "11790",
    "end": "18320"
  },
  {
    "text": "influenced and enabled by doing continuous delivery so I'll get right",
    "start": "18320",
    "end": "24240"
  },
  {
    "text": "out of the way usually we refer to this as continuous deployment so when you hear me say continuous deployment really",
    "start": "24240",
    "end": "29730"
  },
  {
    "text": "what we're talking about is the same thing and you may not I'm guessing that most people here probably don't know",
    "start": "29730",
    "end": "35610"
  },
  {
    "start": "32000",
    "end": "93000"
  },
  {
    "text": "what s/he is we are still not expanded very far into into Europe or Asia but",
    "start": "35610",
    "end": "41940"
  },
  {
    "text": "Etsy's a marketplace it's it's a place where creative businesses can sell online is small independent shops and",
    "start": "41940",
    "end": "51350"
  },
  {
    "text": "we're dealing with we're dealing with e-commerce this is a this is a basically a 7 year old company so we also look a",
    "start": "51350",
    "end": "58289"
  },
  {
    "text": "lot like a startup despite the size of our team we look like a lot like a start-up and we work that way and the",
    "start": "58289",
    "end": "65010"
  },
  {
    "text": "primary product is a website so just to be really clear about that we're not packaging software outside of deploying",
    "start": "65010",
    "end": "72060"
  },
  {
    "text": "an iOS app right now everything we ship really goes to web servers so that's",
    "start": "72060",
    "end": "77640"
  },
  {
    "text": "just a little bit of context around that this is what our growth looks like in terms of sales just to give you a",
    "start": "77640",
    "end": "83119"
  },
  {
    "text": "perspective on our continued uptick on this this is gross sales in the",
    "start": "83119",
    "end": "89070"
  },
  {
    "text": "marketplace so this is the money transacted between buyers and sellers we're fairly large scale too so we're",
    "start": "89070",
    "end": "96090"
  },
  {
    "start": "93000",
    "end": "127000"
  },
  {
    "text": "doing nearly a billion and a half page views a month just in August we did",
    "start": "96090",
    "end": "102150"
  },
  {
    "text": "nearly or note we did 76 million in transactions so sometimes when people",
    "start": "102150",
    "end": "108720"
  },
  {
    "text": "talk about continuous deployment and deploying quickly there's an association",
    "start": "108720",
    "end": "114240"
  },
  {
    "text": "with being a small company or or being able to take greater risks and I think",
    "start": "114240",
    "end": "120119"
  },
  {
    "text": "the story here is that is that we can take these risks and still enable a lot of growth and a lot of transactions to",
    "start": "120119",
    "end": "125909"
  },
  {
    "text": "be happening we have about 170 people committing to our code base that",
    "start": "125909",
    "end": "131610"
  },
  {
    "start": "127000",
    "end": "183000"
  },
  {
    "text": "includes our engineers designers and product managers and if you're if you're committing code you're",
    "start": "131610",
    "end": "138390"
  },
  {
    "text": "also deploying code this is the rate of deploys that we've seen over the last two years we started basically doing",
    "start": "138390",
    "end": "144599"
  },
  {
    "text": "continuous deployment at the at the very very tail end of 2009 and as you can see",
    "start": "144599",
    "end": "149909"
  },
  {
    "text": "it sort of starts ticking up there the difference between the colors here is that yellow is a full application deploy where we're pushing all the code that's",
    "start": "149909",
    "end": "156569"
  },
  {
    "text": "on in our main line the red is where we're flipping config flags and we'll",
    "start": "156569",
    "end": "161940"
  },
  {
    "text": "talk a little bit about that but you can see that these are these metrics are per day so you can see that",
    "start": "161940",
    "end": "168900"
  },
  {
    "text": "on average we're you know generally we're doing between 20 and 30 deploys a day and then our config changes or",
    "start": "168900",
    "end": "175140"
  },
  {
    "text": "somewhere you know generally 10 to 10 to 20 sometimes 30 or 40 config changes in",
    "start": "175140",
    "end": "180150"
  },
  {
    "text": "a day so that's how fast we're changing things on the site we're gonna try to talk about some of the more advanced",
    "start": "180150",
    "end": "187650"
  },
  {
    "text": "topics and I'm expecting that you come to come into here sort of knowing so in",
    "start": "187650",
    "end": "193170"
  },
  {
    "text": "the background of what continues delivery is I'm not really going to go into so much of the what but really more",
    "start": "193170",
    "end": "199380"
  },
  {
    "text": "of the how it looks at at Etsy this is the wiki part of the Wikipedia article and these are some of the terms",
    "start": "199380",
    "end": "206280"
  },
  {
    "text": "that you probably recognized repeatedly push low risk minimal manual overhead what's missing from that I think are",
    "start": "206280",
    "end": "213120"
  },
  {
    "text": "some things like this and these are some of the topics that we'll end up talking about a little bit more DevOps who knows",
    "start": "213120",
    "end": "219569"
  },
  {
    "text": "of DevOps do people know this movement great awesome working directly a mainline trunk or master whatever you",
    "start": "219569",
    "end": "226139"
  },
  {
    "text": "want to call it feature Flags people know what feature flags are great looking good and then in branching in",
    "start": "226139",
    "end": "233370"
  },
  {
    "text": "code which is obviously you've got main line you've got feature Flags and branching in code those are really really sort of the heart of what we're",
    "start": "233370",
    "end": "240120"
  },
  {
    "text": "doing I'll start with an apology though because I heard a little bit of chuckling at the end of the last talk",
    "start": "240120",
    "end": "246690"
  },
  {
    "start": "241000",
    "end": "288000"
  },
  {
    "text": "when PHP was mentioned we work in PHP so please don't run out the doors so this",
    "start": "246690",
    "end": "255599"
  },
  {
    "text": "is really the crux of the talk what continuous deployment looks like at Etsy in practice every single day this is",
    "start": "255599",
    "end": "263330"
  },
  {
    "text": "less of what it is more of how we apply it and because I'm not a consultant and I'm not",
    "start": "263330",
    "end": "268500"
  },
  {
    "text": "a very good salesperson it's going to be more of this is just what we're doing and this is what we find that works and",
    "start": "268500",
    "end": "273810"
  },
  {
    "text": "less of you guys should go out and try to do it just this way because I think it's a great idea for you it's not a",
    "start": "273810",
    "end": "280050"
  },
  {
    "text": "one-size-fits-all proposition so I'm not I'm not here to tell you that you're doing things wrong if you don't want to",
    "start": "280050",
    "end": "285630"
  },
  {
    "text": "do this but this is what's working for us this is our deploy button everybody",
    "start": "285630",
    "end": "291300"
  },
  {
    "start": "288000",
    "end": "319000"
  },
  {
    "text": "on our engineering team all of our designers all of our product managers who are committing code have access to",
    "start": "291300",
    "end": "296340"
  },
  {
    "text": "this as long as you can get through the LDAP credentials you can get to this when you press this button we deploy all",
    "start": "296340",
    "end": "304290"
  },
  {
    "text": "of our app code to our production servers that process only takes about two minutes for for the actual",
    "start": "304290",
    "end": "311070"
  },
  {
    "text": "deployment there's some build and things that live lead up to that but but pushing the code is pretty pretty fast",
    "start": "311070",
    "end": "317850"
  },
  {
    "text": "so some then and now then is the sort of before the end of 2009 when we when we",
    "start": "317850",
    "end": "324390"
  },
  {
    "start": "319000",
    "end": "471000"
  },
  {
    "text": "transfer it over to continuous deployment and now is the 2010 since",
    "start": "324390",
    "end": "330350"
  },
  {
    "text": "then is hours and hours of deploys and as Michael talked about the deployment",
    "start": "330350",
    "end": "336450"
  },
  {
    "text": "army this was usually at least five people and when I was interviewing for Etsy one of the people who was",
    "start": "336450",
    "end": "342330"
  },
  {
    "text": "interviewing me had to leave during the interview to go to go help with a deploy because it hadn't been running too long",
    "start": "342330",
    "end": "348419"
  },
  {
    "text": "and things were failing it's highly orchestrated and infrequent now it's one",
    "start": "348419",
    "end": "353880"
  },
  {
    "text": "person pushing a button the entire build and deploy takes about 15 minutes and it's a rapid rapid cycle previously this",
    "start": "353880",
    "end": "362729"
  },
  {
    "text": "is a special event that we had to plan out and organize now it's commonplace and if you ask most of the managers on",
    "start": "362729",
    "end": "368910"
  },
  {
    "text": "the team they don't even know what being deployed in a single day frankly that's a little bit of a challenge for us but",
    "start": "368910",
    "end": "374250"
  },
  {
    "text": "it's one of the things where we've pushed decision-making and in speed of delivery out to out to our smaller team",
    "start": "374250",
    "end": "380070"
  },
  {
    "text": "so every engineering team is about you know two to six people out of out of an entire group each of them is sort the",
    "start": "380070",
    "end": "386669"
  },
  {
    "text": "point is to empower all these teams to go out and build their features rapidly in the past I talked a lot about",
    "start": "386669",
    "end": "394669"
  },
  {
    "text": "managing our site in an operational sense and this is one of the things that the continuous deployment allows us to",
    "start": "394669",
    "end": "400289"
  },
  {
    "text": "do in the past if we had a problem with a deployed we'd be blocked through the remainder of that deploy and then",
    "start": "400289",
    "end": "405840"
  },
  {
    "text": "through the follow-up deployed to push a fix that's going to be hours and hours and hours and now with continuous",
    "start": "405840",
    "end": "412500"
  },
  {
    "text": "deployment we're able to make changes very quickly a poor deploy can be resolved within about 10 to 15 minutes",
    "start": "412500",
    "end": "419520"
  },
  {
    "text": "and if we just are going to be tweaking config flag those deploys actually only take about five minutes there was a lot",
    "start": "419520",
    "end": "428340"
  },
  {
    "text": "more complexity around deployments in the past we had packaging we had release branches we coupled schema changes",
    "start": "428340",
    "end": "436259"
  },
  {
    "text": "together with code deploys which is you imagine if you're trying to do that and you're transforming data at the same time you're probably going to have",
    "start": "436259",
    "end": "442680"
  },
  {
    "text": "downtime for that as you're as you're moving both those versions ahead now we work off the mainline we do very minimal",
    "start": "442680",
    "end": "449400"
  },
  {
    "text": "linking there's always some things that we have to put together in place before before we push but our builds are entire",
    "start": "449400",
    "end": "457139"
  },
  {
    "text": "our deploys are essentially our sinks and again this is this is PHP we're working with so this is one of the huge",
    "start": "457139",
    "end": "462449"
  },
  {
    "text": "advantages we get out of that which is that we can just arcing files into place and they start running we don't have to",
    "start": "462449",
    "end": "467580"
  },
  {
    "text": "worry about any other restarts or things like that so to sum that up old or the",
    "start": "467580",
    "end": "475080"
  },
  {
    "start": "471000",
    "end": "533000"
  },
  {
    "text": "past this is slow and complex and special new or what we're doing now is",
    "start": "475080",
    "end": "480479"
  },
  {
    "text": "fast and simple and it's common it's so common that when you started that scene",
    "start": "480479",
    "end": "485789"
  },
  {
    "text": "this is the first thing you do you learn how to deploy the site on your first day we assign you a project to put your you",
    "start": "485789",
    "end": "492930"
  },
  {
    "text": "know picture of yourself onto our under our company like team page and that doesn't really involve a whole lot of",
    "start": "492930",
    "end": "499139"
  },
  {
    "text": "code it doesn't it doesn't involve like really learning the deep innards it's it's a pretty simple project for",
    "start": "499139",
    "end": "505860"
  },
  {
    "text": "figuring out where to put a picture of yourself getting it into a template but then you know that comes with the",
    "start": "505860",
    "end": "512279"
  },
  {
    "text": "overhead of understanding how to get onto your virtual machine where the code lives how to run tests how to deploy the",
    "start": "512279",
    "end": "521070"
  },
  {
    "text": "site and where to find metrics to ensure that everything is running properly after the deploy is done so in the very",
    "start": "521070",
    "end": "528270"
  },
  {
    "text": "first day we're looking at making taking all the ceremony away from deployments",
    "start": "528270",
    "end": "533750"
  },
  {
    "start": "533000",
    "end": "564000"
  },
  {
    "text": "on the second day we let you complete your tax forms and insurance and benefits and things like that",
    "start": "533750",
    "end": "539660"
  },
  {
    "text": "that's the harder stuff I didn't mention anything in the first two days about",
    "start": "539660",
    "end": "544670"
  },
  {
    "text": "about learning about our framework or a code base we use an ORM coding patterns",
    "start": "544670",
    "end": "551510"
  },
  {
    "text": "or any of that stuff that's stuff you can learn over time but if you push off learning about deployment until further",
    "start": "551510",
    "end": "557150"
  },
  {
    "text": "down the road after you spend a couple of months building something then it becomes a big scary event and that's exactly what we're trying to avoid doing",
    "start": "557150",
    "end": "563660"
  },
  {
    "text": "because this is the button that's going to be in front of you and you have to deploy and that means something we're",
    "start": "563660",
    "end": "570830"
  },
  {
    "start": "564000",
    "end": "577000"
  },
  {
    "text": "really really good at doing this like I said we're pushing 20 to 30 times a day and if you're not familiar with that",
    "start": "570830",
    "end": "579140"
  },
  {
    "start": "577000",
    "end": "604000"
  },
  {
    "text": "that should sound really scary and you should have like kind of a pit in your stomach handing somebody to deploy",
    "start": "579140",
    "end": "584210"
  },
  {
    "text": "button without any safety measures is like handing somebody a gun without a safety so I want to talk a little bit",
    "start": "584210",
    "end": "590240"
  },
  {
    "text": "about how to make that safe but I'm going to tell you about that later I just want to point out that if that were",
    "start": "590240",
    "end": "596090"
  },
  {
    "text": "inherently unsafe and if we were failing deploys every single time we did it or even 10% of the time we did it then I",
    "start": "596090",
    "end": "603560"
  },
  {
    "text": "don't think I'm speculating but I don't think we would see the growth over the last two years that we see like this so",
    "start": "603560",
    "end": "611870"
  },
  {
    "start": "604000",
    "end": "696000"
  },
  {
    "text": "continuous deployment for us looks like this small frequent changes keeping it as Michael was talking about in the last",
    "start": "611870",
    "end": "617000"
  },
  {
    "text": "talk keeping the batches of changes that you're making really small constantly",
    "start": "617000",
    "end": "622730"
  },
  {
    "text": "integrating into production and I'm going to talk a lot about that and doing this repeatedly throughout the day so",
    "start": "622730",
    "end": "630710"
  },
  {
    "text": "questions you know some of the things I want to answer in this talk are some of the questions that regularly come up when we talk about you know the process",
    "start": "630710",
    "end": "637100"
  },
  {
    "text": "of deploying and and the tools that we use for deploying which I'm not going to talk about so much this time but but how",
    "start": "637100",
    "end": "643339"
  },
  {
    "text": "that impacts what we're doing so how do we build so many features so quickly the answer is we're not building features",
    "start": "643339",
    "end": "649580"
  },
  {
    "text": "that we're releasing every single day we're making small incremental changes to the site we're making additions to",
    "start": "649580",
    "end": "656120"
  },
  {
    "text": "the site and if you think about it in terms of commits that you're making to a repo it's the same thing you're making a",
    "start": "656120",
    "end": "661490"
  },
  {
    "text": "small amount of code change that works that you know is is valid and then you're",
    "start": "661490",
    "end": "667279"
  },
  {
    "text": "you're integrating it with production so software deploys don't equal product",
    "start": "667279",
    "end": "672560"
  },
  {
    "text": "launches we can launch code late we can actually launch features later and we can organize that into into a bigger",
    "start": "672560",
    "end": "678949"
  },
  {
    "text": "thing but deploys happen really frequently so these commits you know",
    "start": "678949",
    "end": "684949"
  },
  {
    "text": "typically only represent a day or maybe a couple of days of work and rarely they do they make up in themselves a complete",
    "start": "684949",
    "end": "692449"
  },
  {
    "text": "feature or a complete a complete project so we push code into you know that is",
    "start": "692449",
    "end": "700730"
  },
  {
    "start": "696000",
    "end": "809000"
  },
  {
    "text": "gated by config flags so we can push changes that are incomplete because we've got sections of our application",
    "start": "700730",
    "end": "706279"
  },
  {
    "text": "that are turned off we refer to this as dark releases and so let's look at",
    "start": "706279",
    "end": "712430"
  },
  {
    "text": "exactly what that looks like for us we do we tend to try to do the simplest",
    "start": "712430",
    "end": "717920"
  },
  {
    "text": "thing possible in a lot of cases our config flags are just built into an array in PHP and the reason for that is",
    "start": "717920",
    "end": "724819"
  },
  {
    "text": "that if PHP and Apache are working on a server then we know that we've got access to our configs if we put them",
    "start": "724819",
    "end": "731509"
  },
  {
    "text": "into a decentralized service somewhere else or distributed service then we have to ensure that that service is available",
    "start": "731509",
    "end": "736550"
  },
  {
    "text": "and we've learned the hard way that that's not always the case so if we're",
    "start": "736550",
    "end": "743269"
  },
  {
    "text": "building out a new search feature or if we're refactoring search in place then",
    "start": "743269",
    "end": "748970"
  },
  {
    "text": "we start with a config flag in the off position and then we look at the code",
    "start": "748970",
    "end": "757100"
  },
  {
    "text": "that exists and we've got you know some some kind of thing that we were doing in the past that we want to improve upon",
    "start": "757100",
    "end": "762319"
  },
  {
    "text": "and we just wrap that so we've got our config flag says if the new search is on",
    "start": "762319",
    "end": "768110"
  },
  {
    "text": "then we'll do this new thing that we want to do using solar and if it's not well we'll just use the default old",
    "start": "768110",
    "end": "773600"
  },
  {
    "text": "version our checks are actually a little bit more sophisticated than this because",
    "start": "773600",
    "end": "778790"
  },
  {
    "text": "we can we can set we can set values other than just on and off it's not binaries but we have different levels of",
    "start": "778790",
    "end": "786550"
  },
  {
    "text": "ramping up so on really means a hundred percent off means zero percent for",
    "start": "786550",
    "end": "791569"
  },
  {
    "text": "public users but we can also ramp up to any percentage of users and we can do",
    "start": "791569",
    "end": "797629"
  },
  {
    "text": "special things like only staff users or maybe a list of people like myself and John and kelan",
    "start": "797629",
    "end": "803300"
  },
  {
    "text": "are the people who can see this particular feature so we are deploying",
    "start": "803300",
    "end": "808400"
  },
  {
    "text": "code frequently and we're validating in production but we're doing this in a way that's hidden from the public so",
    "start": "808400",
    "end": "814910"
  },
  {
    "start": "809000",
    "end": "1021000"
  },
  {
    "text": "software deploys again don't mean launches and they don't mean public visibility into what you're changing",
    "start": "814910",
    "end": "820900"
  },
  {
    "text": "I've sort of already talked about this but I'll just point it out again these",
    "start": "820900",
    "end": "826280"
  },
  {
    "text": "are small changes typically we're adding portions of a new feature so new classes",
    "start": "826280",
    "end": "831860"
  },
  {
    "text": "and controllers and methods in there we might have designers who are working on graphics and style sheets and templates",
    "start": "831860",
    "end": "838160"
  },
  {
    "text": "that are getting added in and we might have people who are working on copying content changes we don't really work",
    "start": "838160",
    "end": "844310"
  },
  {
    "text": "with a CMS on the site because deploying deploying a change that's in the repo is",
    "start": "844310",
    "end": "849350"
  },
  {
    "text": "essentially our content management system and then we also have the ability to turn flags on and off and ramp up but",
    "start": "849350",
    "end": "856900"
  },
  {
    "text": "this enables us to also respond to issues on the site as well as as build",
    "start": "856900",
    "end": "862070"
  },
  {
    "text": "new features so so imagine our security team gets a report of a hole on the site",
    "start": "862070",
    "end": "867500"
  },
  {
    "text": "and we want to be able to respond quickly having the mainline ready for deployment",
    "start": "867500",
    "end": "872900"
  },
  {
    "text": "and being able to deploy quickly means that we can have somebody put in a patch in a very quick manner and deploy that",
    "start": "872900",
    "end": "880430"
  },
  {
    "text": "quickly because we have the confidence that we know how to do this and we don't have to do a lot of a lot of pre-planning or organization around",
    "start": "880430",
    "end": "886840"
  },
  {
    "text": "releasing our code or releasing the site we can also respond to unexpected loads",
    "start": "886840",
    "end": "891890"
  },
  {
    "text": "in traffic or contention on on back-end services a load shedding is a thing that we do often which means that we turn off",
    "start": "891890",
    "end": "898880"
  },
  {
    "text": "some feature because the back end is getting thrashed or something is",
    "start": "898880",
    "end": "904490"
  },
  {
    "text": "happening in production that we never anticipated before so I liken this to an",
    "start": "904490",
    "end": "911360"
  },
  {
    "text": "airline in its pilot if you were building a version a single singular",
    "start": "911360",
    "end": "917030"
  },
  {
    "text": "version of software that you that you deploy on a regular basis then you only",
    "start": "917030",
    "end": "923540"
  },
  {
    "text": "have the option to run that one way this is kind of like having a pre-programmed route from from London to New York and",
    "start": "923540",
    "end": "929840"
  },
  {
    "text": "once you're in the air you can't do anything about that you can't you can't move around",
    "start": "929840",
    "end": "935050"
  },
  {
    "text": "and such but what we look at continuous deployment enabling for us is that we",
    "start": "935050",
    "end": "941230"
  },
  {
    "text": "have as we'll talk a little bit later and and Michael talked about a little bit earlier we collect tons and tons of",
    "start": "941230",
    "end": "947050"
  },
  {
    "text": "metrics which are like these dials that are in front of us and we put those metrics in front of everybody so you can see them and then we have this really",
    "start": "947050",
    "end": "953350"
  },
  {
    "text": "rich set of config Flags so we can tweak little little things we can take",
    "start": "953350",
    "end": "959110"
  },
  {
    "text": "specific servers out of rotation we can turn up the traffic on a particular",
    "start": "959110",
    "end": "964240"
  },
  {
    "text": "feature we can turn off features that are not working in this operator becomes there's a great question of is that",
    "start": "964240",
    "end": "971380"
  },
  {
    "text": "operator somebody on our operations staff or is that an engineer and does it really matter we sort of blur those",
    "start": "971380",
    "end": "977470"
  },
  {
    "text": "lines it's not we don't hand off software for our operations team to run on the room but we're involved with that",
    "start": "977470",
    "end": "983860"
  },
  {
    "text": "and what this looks like in practice is these red boxes are pointing out",
    "start": "983860",
    "end": "990160"
  },
  {
    "text": "different parts of a tool on the site called favorites which is like your ability to bookmark specific products to",
    "start": "990160",
    "end": "996279"
  },
  {
    "text": "come back to later and with a simple config flag we can just flip that off and as you see in our interfaces we'll",
    "start": "996279",
    "end": "1003600"
  },
  {
    "text": "just hide hide those pieces of the application so if if our favorites tool",
    "start": "1003600",
    "end": "1009510"
  },
  {
    "text": "which we've seen in the past had too much too much load and was was failing",
    "start": "1009510",
    "end": "1014730"
  },
  {
    "text": "requests for some reason we can just turn it off and most users not even going to know that the next big question",
    "start": "1014730",
    "end": "1023339"
  },
  {
    "start": "1021000",
    "end": "1037000"
  },
  {
    "text": "we get is how do you continues to continuously deploy database config",
    "start": "1023339",
    "end": "1028800"
  },
  {
    "text": "schema changes and this is I know this came up a couple of times earlier today",
    "start": "1028800",
    "end": "1034250"
  },
  {
    "text": "the answer is we don't our code deploys happen about once every 15 to 20 minutes",
    "start": "1034250",
    "end": "1041579"
  },
  {
    "start": "1037000",
    "end": "1083000"
  },
  {
    "text": "during the day we do schema changes on Thursday and the reason for this is that the schema obviously those changes are",
    "start": "1041579",
    "end": "1049710"
  },
  {
    "text": "more expensive some changes can take hours some we've seen take days so we",
    "start": "1049710",
    "end": "1056429"
  },
  {
    "text": "don't have as fine-grained control over when that starts and stops so it's hard to know if you were to change a version",
    "start": "1056429",
    "end": "1062820"
  },
  {
    "text": "of code in response to the schema when that's supposed to land in production so the risk around schema",
    "start": "1062820",
    "end": "1069920"
  },
  {
    "text": "changes are higher those are places where we force more conversations about are we doing the right thing and move",
    "start": "1069920",
    "end": "1075950"
  },
  {
    "text": "somewhat out of individual teams and talk more broadly about about the risk involved so our application is actually",
    "start": "1075950",
    "end": "1085340"
  },
  {
    "start": "1083000",
    "end": "1144000"
  },
  {
    "text": "largely monolithic within it you could probably find things that look like services models around database",
    "start": "1085340",
    "end": "1091970"
  },
  {
    "text": "different parts of our database schema it typically get treated as services where our controllers are talking to",
    "start": "1091970",
    "end": "1098120"
  },
  {
    "text": "that there's much many much fewer external web services in our application and I think that that's somewhat",
    "start": "1098120",
    "end": "1104930"
  },
  {
    "text": "different than what Sam was talking about this morning but this is what we found seems to work really well we've got a",
    "start": "1104930",
    "end": "1110540"
  },
  {
    "text": "lot of people working out of shared codebase so we have very high visibility into what's changing and very high",
    "start": "1110540",
    "end": "1117920"
  },
  {
    "text": "visibility into where different parts of our application are coupled together where that does happen it also means",
    "start": "1117920",
    "end": "1125000"
  },
  {
    "text": "that when we run through tests we're testing sort of end to end and everything in between one of the things",
    "start": "1125000",
    "end": "1132920"
  },
  {
    "text": "we've punted on for a long time is trying to figure out exactly what tests are associated with a particular change",
    "start": "1132920",
    "end": "1139030"
  },
  {
    "text": "instead we've just managed to keep our tests really fast on the front end when",
    "start": "1139030",
    "end": "1146150"
  },
  {
    "start": "1144000",
    "end": "1246000"
  },
  {
    "text": "we do a deploy we're deploying all these different services together and we didn't always do this but but we have",
    "start": "1146150",
    "end": "1152390"
  },
  {
    "text": "shared libraries that the power the Etsy comm website the developer API back",
    "start": "1152390",
    "end": "1158840"
  },
  {
    "text": "office and support tools that we've got things like that and what we found in the past is if we deploy these services",
    "start": "1158840",
    "end": "1166100"
  },
  {
    "text": "separately then we end up with latent bugs in in underlying code so if we have",
    "start": "1166100",
    "end": "1171980"
  },
  {
    "text": "a library that that both etsy.com and the developer API rely on and we only deploy the API then once we're into",
    "start": "1171980",
    "end": "1178940"
  },
  {
    "text": "production we can find that the API is working perfectly but we end up with",
    "start": "1178940",
    "end": "1184430"
  },
  {
    "text": "bundled you know the sort of bundled commit that we've never deployed to etsy.com",
    "start": "1184430",
    "end": "1190780"
  },
  {
    "text": "batching along with some future commits in making that commit or in that deploy more confusing if something goes wrong",
    "start": "1191050",
    "end": "1197630"
  },
  {
    "text": "so see we've found in the past bugs that occur in lower level libraries and if we",
    "start": "1197630",
    "end": "1204330"
  },
  {
    "text": "don't expose if we don't integrate all those front ends into production at the same time we lose track of some of those",
    "start": "1204330",
    "end": "1210659"
  },
  {
    "text": "bugs and that's that's been a problem for us that's one of those practical things that we've learned over time so",
    "start": "1210659",
    "end": "1216210"
  },
  {
    "text": "we're shooting for a fewer surprises external services are not deployed with",
    "start": "1216210",
    "end": "1222419"
  },
  {
    "text": "the main application and I talked about that being somewhat separate separate schedules external services for us look",
    "start": "1222419",
    "end": "1230220"
  },
  {
    "text": "like our database our database schema our search cluster which runs in solar and Java so it's a very different animal",
    "start": "1230220",
    "end": "1236580"
  },
  {
    "text": "from from PHP and photo storage which has also got a completely different back-end infrastructure than our main",
    "start": "1236580",
    "end": "1242759"
  },
  {
    "text": "web application and we deal with this by",
    "start": "1242759",
    "end": "1248000"
  },
  {
    "start": "1246000",
    "end": "1293000"
  },
  {
    "text": "by configs config flags that allow allow us to move backward and forward on",
    "start": "1248000",
    "end": "1253620"
  },
  {
    "text": "different states of of those services so a config flag that allows us to use a",
    "start": "1253620",
    "end": "1260129"
  },
  {
    "text": "new versus an old version of a schema or a new versus an old end point of our search tier changing the flags",
    "start": "1260129",
    "end": "1267299"
  },
  {
    "text": "themselves is very very fast like I said this is less than five minutes it doesn't include you know changing",
    "start": "1267299",
    "end": "1275850"
  },
  {
    "text": "excuse me changing that config flag doesn't mean that we're merging any code and we're not not having to deal with",
    "start": "1275850",
    "end": "1281519"
  },
  {
    "text": "reverting pieces of code if something goes wrong it's literally one line changing from things like off to one",
    "start": "1281519",
    "end": "1287100"
  },
  {
    "text": "percent or off to on so we deal with",
    "start": "1287100",
    "end": "1294299"
  },
  {
    "text": "this by exposing multiple versions of a service or a schema and our application",
    "start": "1294299",
    "end": "1300539"
  },
  {
    "text": "expects multiple versions and has config flags to allow us to go backwards and forwards and so we'll talk about that in",
    "start": "1300539",
    "end": "1307590"
  },
  {
    "text": "there in respect to a changing a database schema and how that looks",
    "start": "1307590",
    "end": "1313309"
  },
  {
    "text": "generally we prefer ads over altars we don't like altering data in place",
    "start": "1313399",
    "end": "1318950"
  },
  {
    "text": "especially for lying on on some kind of data transform to happen on a column like if your if your address column for",
    "start": "1318950",
    "end": "1325649"
  },
  {
    "text": "some reason the formatting of it had to change and your application is expecting",
    "start": "1325649",
    "end": "1331230"
  },
  {
    "text": "one one side versus the this is something that I believe Sam referred to as non-breaking expansions",
    "start": "1331230",
    "end": "1337080"
  },
  {
    "text": "I've actually never heard that term before this morning but that pretty well describes what we're talking about here",
    "start": "1337080",
    "end": "1343379"
  },
  {
    "text": "we're talking about adding on new columns instead of altering the things in place alters can take a lot of time",
    "start": "1343379",
    "end": "1350220"
  },
  {
    "text": "like I talked about before transforming data especially on on a on a column in",
    "start": "1350220",
    "end": "1356249"
  },
  {
    "text": "production can make your code incompatible and trying to link that up with a code deploy is really really",
    "start": "1356249",
    "end": "1361769"
  },
  {
    "text": "difficult reverting something that you've transformed to a new version is also very difficult so so exposing two",
    "start": "1361769",
    "end": "1369090"
  },
  {
    "text": "different versions in production is really important for us so we can move back and forward so I'll talk about the",
    "start": "1369090",
    "end": "1375119"
  },
  {
    "start": "1374000",
    "end": "1407000"
  },
  {
    "text": "practical aspect of how we did this for a particular project we did earlier this year which was merging two different",
    "start": "1375119",
    "end": "1381090"
  },
  {
    "text": "tables a couple years ago we thought that having a separate user preferences table was a great denormalization we",
    "start": "1381090",
    "end": "1387840"
  },
  {
    "text": "found that we didn't use it that much and just be better to have the few values that were they were stored in that table to be merged in with our",
    "start": "1387840",
    "end": "1394799"
  },
  {
    "text": "users table this wasn't just something we were looking around to make work for ourselves it turned out that we were",
    "start": "1394799",
    "end": "1400200"
  },
  {
    "text": "also moving the datastore itself so it seemed like a good opportunity to glob those two things together the steps look",
    "start": "1400200",
    "end": "1408149"
  },
  {
    "start": "1407000",
    "end": "1435000"
  },
  {
    "text": "like this you start by writing to both versions of the schema and then once",
    "start": "1408149",
    "end": "1414509"
  },
  {
    "text": "you've started writing to both you need to figure out how to backfill all the existing data that you've had in the past and then once you have that and",
    "start": "1414509",
    "end": "1420989"
  },
  {
    "text": "you've validated and you start reading from the new version and once you're good with that you cut off the old",
    "start": "1420989",
    "end": "1426029"
  },
  {
    "text": "version don't go and go into more detail about this and obviously you start really with with adding the new version",
    "start": "1426029",
    "end": "1432299"
  },
  {
    "text": "to the schema before you do anything else that looks like this you add the schema and we add we added some new",
    "start": "1432299",
    "end": "1438299"
  },
  {
    "start": "1435000",
    "end": "1468000"
  },
  {
    "text": "columns to a user's table and we also started with three different three different config files that we had never had before the first was the existing",
    "start": "1438299",
    "end": "1446429"
  },
  {
    "text": "state of the system and we turn that to on so writing our writing our users preferences to this old table that we're",
    "start": "1446429",
    "end": "1452879"
  },
  {
    "text": "using in the past and then two others that represented the state that we're moving to where we were writing",
    "start": "1452879",
    "end": "1458309"
  },
  {
    "text": "preferences to the users table and then where we're reading preferences from the users table as opposed to reading them",
    "start": "1458309",
    "end": "1464970"
  },
  {
    "text": "from the user preferences table so in the second step we write the code for writing to two",
    "start": "1464970",
    "end": "1472020"
  },
  {
    "start": "1468000",
    "end": "1486000"
  },
  {
    "text": "places and after we've got that deploy to production then we flip the flag so our actual or actual release of this",
    "start": "1472020",
    "end": "1480030"
  },
  {
    "text": "means that we're just flipping a flag as we're not actually releasing application code these are two different deploys happening and then we go through a",
    "start": "1480030",
    "end": "1487740"
  },
  {
    "start": "1486000",
    "end": "1503000"
  },
  {
    "text": "process that happens offline where we where we write some scripts to transform data or just copy data from one place to",
    "start": "1487740",
    "end": "1493800"
  },
  {
    "text": "another to catch us up to where we were when we did that release because we're",
    "start": "1493800",
    "end": "1499290"
  },
  {
    "text": "still not reading from the from the new version we're reading from the old version and then we get when we wanted",
    "start": "1499290",
    "end": "1504660"
  },
  {
    "start": "1503000",
    "end": "1526000"
  },
  {
    "text": "to go to the new version like I said we've got this very fine-grain ability to tune up traffic onto a version of our",
    "start": "1504660",
    "end": "1511530"
  },
  {
    "text": "application so we start reading preferences from the users table only for people within the company and we can",
    "start": "1511530",
    "end": "1518790"
  },
  {
    "text": "do that for as long as we want sometimes that's a couple of hours to validate something small and sometimes it's a couple of weeks then we can go to one",
    "start": "1518790",
    "end": "1527340"
  },
  {
    "start": "1526000",
    "end": "1567000"
  },
  {
    "text": "percent and we can go to five percent and whatever else we want and as we ramp",
    "start": "1527340",
    "end": "1532440"
  },
  {
    "text": "up we look at we look at feedback we look at logs from our application",
    "start": "1532440",
    "end": "1538530"
  },
  {
    "text": "servers in the database to make sure there's nothing surprising showing up in there and we look at metrics to make sure that we're seeing what we would",
    "start": "1538530",
    "end": "1544200"
  },
  {
    "text": "expect the the right amount of uptake on a new feature and then we'll also refer",
    "start": "1544200",
    "end": "1549240"
  },
  {
    "text": "back to whether we're getting support tickets for people complaining about this particular feature and we'll look",
    "start": "1549240",
    "end": "1554370"
  },
  {
    "text": "in our user forums to see if anybody's reporting that there's a bug on the site or related to this and when we feel good",
    "start": "1554370",
    "end": "1559710"
  },
  {
    "text": "about that then we move on to the point of reading at a hundred percent on to",
    "start": "1559710",
    "end": "1565770"
  },
  {
    "text": "the on to the new version which means that we're basically ready to cut off rights to the old version and we can do",
    "start": "1565770",
    "end": "1573510"
  },
  {
    "start": "1567000",
    "end": "1590000"
  },
  {
    "text": "that we don't have to actually delete any code at that point we can just turn it off and everything's in place so you",
    "start": "1573510",
    "end": "1578940"
  },
  {
    "text": "know we try to avoid many releases that have anything to do with making changes",
    "start": "1578940",
    "end": "1585120"
  },
  {
    "text": "to logic and production with the exception of just these flags",
    "start": "1585120",
    "end": "1590090"
  },
  {
    "start": "1590000",
    "end": "1643000"
  },
  {
    "text": "this is something I learned two nights ago is in I guess more of a sort of",
    "start": "1590570",
    "end": "1596190"
  },
  {
    "text": "pattern or enterprise-e way referred to as branch by abstraction and I think it's I think it's a great set up this is",
    "start": "1596190",
    "end": "1602160"
  },
  {
    "text": "this you know completely models what we do I've added my own names in here we've got our controllers talking to a user's",
    "start": "1602160",
    "end": "1607980"
  },
  {
    "text": "model and within the model is where we put this config flag so all the people writing code that goes out to the front",
    "start": "1607980",
    "end": "1614040"
  },
  {
    "text": "end have no I don't really have to know where to get their user preferences they don't need to touch SQL or changes to to",
    "start": "1614040",
    "end": "1621990"
  },
  {
    "text": "queries things like that the users model is the only place that needs to know that these two different things exist",
    "start": "1621990",
    "end": "1627210"
  },
  {
    "text": "and that's where the changes happen there's a couple of links down here these slides will be available later but these there's some links to more more",
    "start": "1627210",
    "end": "1634740"
  },
  {
    "text": "discussion of that but like I said I didn't know that name so I've been calling this for a long time I call this the migration four-step and I guess in",
    "start": "1634740",
    "end": "1643350"
  },
  {
    "start": "1643000",
    "end": "1696000"
  },
  {
    "text": "in truth there's probably a fifth step to that which is going back and cleaning up the code and after you're done and",
    "start": "1643350",
    "end": "1649470"
  },
  {
    "text": "that always becomes a question for us because it's question of whether you'll",
    "start": "1649470",
    "end": "1654780"
  },
  {
    "text": "ever need that code again if you stop writing your data to that to that old version then you probably don't need the",
    "start": "1654780",
    "end": "1661890"
  },
  {
    "text": "code if the code is a complete mess you're probably gonna want to get rid of it and if it's a performance problem",
    "start": "1661890",
    "end": "1667170"
  },
  {
    "text": "you're certainly going to want to get rid of it but if the old system if the old version is still valid and it's",
    "start": "1667170",
    "end": "1674610"
  },
  {
    "text": "still stable then it's a good exit strategy for if something goes wrong with your new version so keeping that in",
    "start": "1674610",
    "end": "1681300"
  },
  {
    "text": "place to be able to rollback in the future maybe may be days or weeks or even months and also this is a matter of",
    "start": "1681300",
    "end": "1689160"
  },
  {
    "text": "if you have time because cleanup takes time there's a trade-off there so when",
    "start": "1689160",
    "end": "1696720"
  },
  {
    "start": "1696000",
    "end": "1802000"
  },
  {
    "text": "Michael and I started talking about this talk we we got on this question about how does continuous delivery impact",
    "start": "1696720",
    "end": "1704000"
  },
  {
    "text": "processes that are upstream of production and engineering and I thought",
    "start": "1704000",
    "end": "1709860"
  },
  {
    "text": "about this a lot this isn't this isn't really tightly involved with continuous",
    "start": "1709860",
    "end": "1715200"
  },
  {
    "text": "delivery as it is just what we've been in abled to do and how we like to work our upstream process is really really",
    "start": "1715200",
    "end": "1721650"
  },
  {
    "text": "lightweight we do we do fairly planning in terms of writing things down we have high code visibility our teams",
    "start": "1721650",
    "end": "1729700"
  },
  {
    "text": "aren't siloed they're working in the same place there's no territorialism over this is",
    "start": "1729700",
    "end": "1734800"
  },
  {
    "text": "my my code this don't touch it and there's high communication so that's",
    "start": "1734800",
    "end": "1741040"
  },
  {
    "text": "something that's really helped us without having you know sort of designed by contract situations",
    "start": "1741040",
    "end": "1748050"
  },
  {
    "text": "everyone can deploy code and deploying is commonplace this isn't this isn't a special event so keeping deployment",
    "start": "1748050",
    "end": "1754600"
  },
  {
    "text": "really cheap allows us to do things more rapidly which is what we like so there's some philosophies I want to talk about",
    "start": "1754600",
    "end": "1760390"
  },
  {
    "text": "some of the things that we really that we find really successful for us within continued a continuous deployment",
    "start": "1760390",
    "end": "1765730"
  },
  {
    "text": "environment gathering data should also be cheap so the ability to get a",
    "start": "1765730",
    "end": "1771150"
  },
  {
    "text": "prototype into production and put it in front of a limited beta group or 1% of",
    "start": "1771150",
    "end": "1776740"
  },
  {
    "text": "you users and gather data on whether it's working is incredibly helpful we're",
    "start": "1776740",
    "end": "1782500"
  },
  {
    "text": "looking with new features for interesting gate and engagement before we spend a lot of time making sure that",
    "start": "1782500",
    "end": "1788470"
  },
  {
    "text": "that is a really really solid architecture so oftentimes the first the",
    "start": "1788470",
    "end": "1794260"
  },
  {
    "text": "first iteration is much of very much an experiment and it largely doesn't matter what the architecture looks like when",
    "start": "1794260",
    "end": "1799690"
  },
  {
    "text": "you're deploying it to 1% we're almost never certain what's going to happen if we make a change to the site in terms of",
    "start": "1799690",
    "end": "1806410"
  },
  {
    "start": "1802000",
    "end": "1821000"
  },
  {
    "text": "whether it'll be a better feature or whether it be a worse worse feature in some cases this is changing the size of",
    "start": "1806410",
    "end": "1812200"
  },
  {
    "text": "the button that says add to cart' but we like to be able to test and gather data",
    "start": "1812200",
    "end": "1817270"
  },
  {
    "text": "around that and we don't like wasting time getting to that we focus on getting",
    "start": "1817270",
    "end": "1822280"
  },
  {
    "start": "1821000",
    "end": "1902000"
  },
  {
    "text": "code to production as quickly as possible and so we hire designers",
    "start": "1822280",
    "end": "1827290"
  },
  {
    "text": "graphic designers who are actually really functional in a code base they're able to our designers are able to write",
    "start": "1827290",
    "end": "1832840"
  },
  {
    "text": "in HTML and CSS they commit directly to our get repo even crazier is they use",
    "start": "1832840",
    "end": "1839650"
  },
  {
    "text": "the command line to do this and they can also stub a controller out just largely",
    "start": "1839650",
    "end": "1844840"
  },
  {
    "text": "enough that they can create the templates that we're going to use on the site so that an engine engineer can",
    "start": "1844840",
    "end": "1850750"
  },
  {
    "text": "follow through with additional logic but they can basically stub out what something is going to look like and deploy that to production so we can look",
    "start": "1850750",
    "end": "1856960"
  },
  {
    "text": "at it our selves like I said architecture largely",
    "start": "1856960",
    "end": "1861970"
  },
  {
    "text": "doesn't matter when we're talking about very small groups and we want to find out if something's going to be worthwhile when we start will design",
    "start": "1861970",
    "end": "1869080"
  },
  {
    "text": "within a small group within your team your peers will take as many shortcuts",
    "start": "1869080",
    "end": "1874750"
  },
  {
    "text": "as possible and will will reach out to an architect on the team somebody more senior basically as a sanity check to",
    "start": "1874750",
    "end": "1882279"
  },
  {
    "text": "make sure that we're not cutting ourselves off from doing the smart thing later on but we often just stick to known patterns if we if we we don't want",
    "start": "1882279",
    "end": "1890769"
  },
  {
    "text": "to invent new crap to add to the site if the stuff that we have on the site already is still holding up we only want",
    "start": "1890769",
    "end": "1896950"
  },
  {
    "text": "to invent new new things when when we know that it's not working anymore for us another thing that we feel is really",
    "start": "1896950",
    "end": "1903759"
  },
  {
    "start": "1902000",
    "end": "1950000"
  },
  {
    "text": "important because deploying is really easily easy and it doesn't take a lot of",
    "start": "1903759",
    "end": "1908909"
  },
  {
    "text": "organization to to release something is that we try to kill things off as as quickly as possible and as early as",
    "start": "1908909",
    "end": "1915519"
  },
  {
    "text": "possible we like to get rid of code that's not working and get rid of features that aren't working supporting legacy features in particular is really",
    "start": "1915519",
    "end": "1923110"
  },
  {
    "text": "boring and frustrating and it takes away time from your engineering team so it's",
    "start": "1923110",
    "end": "1928720"
  },
  {
    "text": "really great to get rid of that and it also doing that frees you up from thinking about your code being perfect",
    "start": "1928720",
    "end": "1935409"
  },
  {
    "text": "all the time if you know that somebody's gonna take joy and getting rid of it in the future after your your experiments",
    "start": "1935409",
    "end": "1940480"
  },
  {
    "text": "failed you'll focus rather you'll focus on shipping your features more quickly",
    "start": "1940480",
    "end": "1945759"
  },
  {
    "text": "rather than building cathedrals so we always like to ask is the dumb solution",
    "start": "1945759",
    "end": "1952769"
  },
  {
    "start": "1950000",
    "end": "1959000"
  },
  {
    "text": "enough for us to build a product and how long is the dumb solution going to last",
    "start": "1952769",
    "end": "1958139"
  },
  {
    "text": "because often times by time you scale 10% most of the assumptions you've started with or wrong and you start",
    "start": "1958139",
    "end": "1964330"
  },
  {
    "start": "1959000",
    "end": "2000000"
  },
  {
    "text": "reacting and we architecting is the thing that we like to to focus on after",
    "start": "1964330",
    "end": "1969519"
  },
  {
    "text": "we've seen that something is working then we put then we prove it out further and make it better this the architecture",
    "start": "1969519",
    "end": "1975730"
  },
  {
    "text": "that we had when we were 10 million pages a month is totally different than what it was when we're 100 million page",
    "start": "1975730",
    "end": "1981370"
  },
  {
    "text": "views a month and it is now completely different as we're over a billion pages a month so we try not to take ourselves",
    "start": "1981370",
    "end": "1987340"
  },
  {
    "text": "too seriously there's a corollary I think to this which is don't hastily judge the people",
    "start": "1987340",
    "end": "1994100"
  },
  {
    "text": "who built the version before you because their assumptions were completely different this is a quote as I was",
    "start": "1994100",
    "end": "2002590"
  },
  {
    "start": "2000000",
    "end": "2022000"
  },
  {
    "text": "talking to Kellan who's our CTO about this talk and getting and training some ideas I decided to just quote him",
    "start": "2002590",
    "end": "2008110"
  },
  {
    "text": "directly on this and not completely steal it because I thought it was really put well put we optimized for being we",
    "start": "2008110",
    "end": "2014139"
  },
  {
    "text": "don't optimize for being right or having the right architecture we optimized for knowing when we're wrong and when it's",
    "start": "2014139",
    "end": "2021100"
  },
  {
    "text": "time to change and so we we work really hard at becoming good at changing our architecture that migration four-step",
    "start": "2021100",
    "end": "2029710"
  },
  {
    "start": "2022000",
    "end": "2052000"
  },
  {
    "text": "that I talked about we are freaking masters at doing that work that's pretty much what my team's",
    "start": "2029710",
    "end": "2035110"
  },
  {
    "text": "do almost all the time is going back and refactoring things that aren't working or moving from an old data store to a",
    "start": "2035110",
    "end": "2040899"
  },
  {
    "text": "new data store in finding out how to make things better so we're constantly working through this process of cutting",
    "start": "2040899",
    "end": "2047620"
  },
  {
    "text": "out the old and bringing in the new with complete uptime where we do spend",
    "start": "2047620",
    "end": "2053919"
  },
  {
    "text": "time is is within the second or third iteration when we know and we've got data that suggests that this is a",
    "start": "2053919",
    "end": "2059560"
  },
  {
    "text": "worthwhile endeavor then we start bringing in more senior engineers to review how the architecture works how",
    "start": "2059560",
    "end": "2066040"
  },
  {
    "text": "people are using it and what our new expectations are from it after we've gathered data we're no longer guessing",
    "start": "2066040",
    "end": "2072339"
  },
  {
    "text": "at this point so it's worth investing time so another another section I want",
    "start": "2072339",
    "end": "2078398"
  },
  {
    "text": "to talk about I've got about 15 minutes left I think here so I want to get into a bit about integration and operations",
    "start": "2078399",
    "end": "2084398"
  },
  {
    "text": "and then I think there's a little bit more about a few final thoughts that if I can get to it'll be great if not no",
    "start": "2084399",
    "end": "2090638"
  },
  {
    "text": "big deal so this was sort of my",
    "start": "2090639",
    "end": "2097148"
  },
  {
    "start": "2095000",
    "end": "2132000"
  },
  {
    "text": "definition of how we do continuous deployment in the main piece here is that we're constantly integrating into",
    "start": "2097149",
    "end": "2102369"
  },
  {
    "text": "production the part the safety measures I talked about these should be pretty",
    "start": "2102369",
    "end": "2108520"
  },
  {
    "text": "obviously it's pretty obvious everybody here code review before you commit we",
    "start": "2108520",
    "end": "2113710"
  },
  {
    "text": "like to get peers looking at code and just making sure we're not really doing the dumb things and also because we're",
    "start": "2113710",
    "end": "2119079"
  },
  {
    "text": "changing things so rapidly in in production it's always good having somebody knowing somebody sitting next to you or somebody",
    "start": "2119079",
    "end": "2124840"
  },
  {
    "text": "you know in another group knowing what you're about to deploy because so many different people are deploying things",
    "start": "2124840",
    "end": "2130450"
  },
  {
    "text": "throughout the day automated test before you deploy this should also be obvious",
    "start": "2130450",
    "end": "2136510"
  },
  {
    "start": "2132000",
    "end": "2150000"
  },
  {
    "text": "we want to do as much validation as we can in development before we push",
    "start": "2136510",
    "end": "2141640"
  },
  {
    "text": "changes into production which begs the question why do we bother integrating with production if we're writing in",
    "start": "2141640",
    "end": "2151330"
  },
  {
    "start": "2150000",
    "end": "2167000"
  },
  {
    "text": "committing tests with our code then there's an assumption that maybe running them against every commit is enough to",
    "start": "2151330",
    "end": "2158950"
  },
  {
    "text": "ensure all of our assumptions why are we bothering with deploying the code as well it feels like maybe we're asking",
    "start": "2158950",
    "end": "2165250"
  },
  {
    "text": "for additional trouble and the answer that is that dev your dev environment is",
    "start": "2165250",
    "end": "2170470"
  },
  {
    "start": "2167000",
    "end": "2217000"
  },
  {
    "text": "not the same as production and if you think that it is you're going to constantly be surprised the way that",
    "start": "2170470",
    "end": "2175720"
  },
  {
    "text": "we're constantly surprised if your dev environment were exactly like prod then",
    "start": "2175720",
    "end": "2181570"
  },
  {
    "text": "the unit tests running in dev would be perfect at validating that your software works but when you deploy it to",
    "start": "2181570",
    "end": "2187480"
  },
  {
    "text": "production you often find that that's not true so quick question for everybody",
    "start": "2187480",
    "end": "2192510"
  },
  {
    "text": "how many of you write tests while you're writing your code or even before you're",
    "start": "2192510",
    "end": "2197890"
  },
  {
    "text": "writing your code I would expect a lot of hands on this crew how many of you wait until you've written all of your",
    "start": "2197890",
    "end": "2204339"
  },
  {
    "text": "code before you write the tests ok amazing I see no hands which means that",
    "start": "2204339",
    "end": "2210640"
  },
  {
    "text": "you guys are all model engineers and you should Pat yourselves on the backs this is fantastic we integrating with",
    "start": "2210640",
    "end": "2219670"
  },
  {
    "start": "2217000",
    "end": "2236000"
  },
  {
    "text": "production is a test in itself which is why we do this frequently in small batches this is the same thing with unit",
    "start": "2219670",
    "end": "2225940"
  },
  {
    "text": "tests with frequently and in small batches I heard this recently production",
    "start": "2225940",
    "end": "2232599"
  },
  {
    "text": "is truly the only place you can validate your code recently means 40 minutes ago",
    "start": "2232599",
    "end": "2238230"
  },
  {
    "text": "Michael said that in the last talk production in dev are not the same",
    "start": "2238230",
    "end": "2244300"
  },
  {
    "start": "2242000",
    "end": "2315000"
  },
  {
    "text": "because these are the types of things that that go wrong these are the things that we sometimes don't expect some of",
    "start": "2244300",
    "end": "2250900"
  },
  {
    "text": "the things that I'd really like on this list somewhat further down legacy data we have seven years of users",
    "start": "2250900",
    "end": "2256990"
  },
  {
    "text": "who have been in multiple versions of our software and and the data about them has changed to the point now people are",
    "start": "2256990",
    "end": "2263920"
  },
  {
    "text": "in states that didn't exist two years ago when we hired most of our engineering team so they don't even know how the data is supposed to look and we",
    "start": "2263920",
    "end": "2270790"
  },
  {
    "text": "don't have all of this data in depth because there's too much of it we also don't have production traffic running in",
    "start": "2270790",
    "end": "2277210"
  },
  {
    "text": "our dev environment so it's hard to simulate all the different scenarios that can go wrong in production yes you",
    "start": "2277210",
    "end": "2283030"
  },
  {
    "text": "can model traffic and you can do simulations but models in simulations only show what you expect or what or",
    "start": "2283030",
    "end": "2291070"
  },
  {
    "text": "what you've seen in the past you may be replayed replaying history but that's what's what's happened in the past that",
    "start": "2291070",
    "end": "2296770"
  },
  {
    "text": "changes basically the future changes every time we deploy code what what our application looks like changes every",
    "start": "2296770",
    "end": "2303190"
  },
  {
    "text": "time somebody makes a commit so it's really hard to know everything that could go wrong here's one of my",
    "start": "2303190",
    "end": "2310570"
  },
  {
    "text": "favorites and I'm so embarrassed even though that I was involved in this using a MySQL database to test an",
    "start": "2310570",
    "end": "2317890"
  },
  {
    "start": "2315000",
    "end": "2326000"
  },
  {
    "text": "application that's eventually going to be an Oracle this is probably the worst you can possibly think of priceless",
    "start": "2317890",
    "end": "2325170"
  },
  {
    "text": "verify frequently in small batches not after we've written weeks and months of code but all the time are we integrating",
    "start": "2327070",
    "end": "2334540"
  },
  {
    "text": "with production and just so you don't lose track this dev is not equal to prod",
    "start": "2334540",
    "end": "2340770"
  },
  {
    "text": "we work as a team we work really really hard to keep these two environments as close as possible do people know about",
    "start": "2340770",
    "end": "2348580"
  },
  {
    "text": "chef or puppet or configuration management okay so we play we play the",
    "start": "2348580",
    "end": "2354850"
  },
  {
    "text": "same recipes as prod in development we keep these in sync yet based on all",
    "start": "2354850",
    "end": "2361300"
  },
  {
    "text": "those things I told you before we can't keep it the same and the larger we get the more dev is not like production so",
    "start": "2361300",
    "end": "2370900"
  },
  {
    "text": "we like to also keep deployments really simple and really quick we like to focus on things that bring us value when I",
    "start": "2370900",
    "end": "2376390"
  },
  {
    "text": "started we had four different environments we had dev where people are working and then QA where people are",
    "start": "2376390",
    "end": "2381640"
  },
  {
    "text": "integrating staging which is very much like a pre-production and then production but we realized we should",
    "start": "2381640",
    "end": "2389410"
  },
  {
    "text": "probably trim some fat these where where those environments are actually sort of split in terms of services",
    "start": "2389410",
    "end": "2394990"
  },
  {
    "text": "Devon QA shared the same database so they had the same same terrible data staging also had its own database and",
    "start": "2394990",
    "end": "2402400"
  },
  {
    "text": "its own memcache servers is totally separate from production so not seeing traffic and and not seeing the same",
    "start": "2402400",
    "end": "2409180"
  },
  {
    "text": "things that you see in production that was fairly unuseful for us yet we spent",
    "start": "2409180",
    "end": "2415120"
  },
  {
    "text": "time testing and staging and uncovering things that were surprising which always ended up being an artifact of the of the",
    "start": "2415120",
    "end": "2421540"
  },
  {
    "text": "environments being wrong and and unsimilar so we've actually cut it down to something like this dev has its own",
    "start": "2421540",
    "end": "2427810"
  },
  {
    "text": "databases and services and then a pre prod which is not which we've renamed from staging so there's not confusion",
    "start": "2427810",
    "end": "2434080"
  },
  {
    "text": "pre prod talks to the same servers the services as our production servers talked to so pre prod is essentially our",
    "start": "2434080",
    "end": "2441490"
  },
  {
    "text": "sanity checking spot we dump new code onto it and make sure that it's still working that say like the schemas or the",
    "start": "2441490",
    "end": "2448810"
  },
  {
    "text": "new versions of a service that we're depending on are in production in that they're working so it's really important",
    "start": "2448810",
    "end": "2456010"
  },
  {
    "start": "2455000",
    "end": "2478000"
  },
  {
    "text": "to think about trimming fat from your deploy pipeline and making it fast",
    "start": "2456010",
    "end": "2461640"
  },
  {
    "text": "testing your integrate where you'll see value like I said QA didn't provide a lot of value for us we have a build",
    "start": "2461640",
    "end": "2468010"
  },
  {
    "text": "stage where we run all of our our integration and unit tests but we no longer have a web interface for that to",
    "start": "2468010",
    "end": "2474550"
  },
  {
    "text": "be able to manually click around it didn't provide us any value config Flags",
    "start": "2474550",
    "end": "2481650"
  },
  {
    "start": "2478000",
    "end": "2499000"
  },
  {
    "text": "protect us because again we're integrating with production but we're",
    "start": "2481650",
    "end": "2487180"
  },
  {
    "text": "not just throwing things out in front of users all the time we're Privett preventing risk by doing",
    "start": "2487180",
    "end": "2492580"
  },
  {
    "text": "this and we have this very rich mechanism for being able to turn the visibility of of a product up in",
    "start": "2492580",
    "end": "2497800"
  },
  {
    "text": "production and this I think is probably what our canary pools look like is our",
    "start": "2497800",
    "end": "2502930"
  },
  {
    "start": "2499000",
    "end": "2515000"
  },
  {
    "text": "ability to turn up a new part of our application on just a subset of our users and be able to inspect them versus",
    "start": "2502930",
    "end": "2509980"
  },
  {
    "text": "other parts of our user base I talked about validating before",
    "start": "2509980",
    "end": "2518040"
  },
  {
    "start": "2515000",
    "end": "2523000"
  },
  {
    "text": "deploying we also validate after there's no reason you can't run the same tests in production so we do that we also have",
    "start": "2518040",
    "end": "2524850"
  },
  {
    "start": "2523000",
    "end": "2529000"
  },
  {
    "text": "automated alerts that go off when these fail we use real-time metrics and",
    "start": "2524850",
    "end": "2531450"
  },
  {
    "start": "2529000",
    "end": "2692000"
  },
  {
    "text": "dashboards that look at everything from the health of our network and servers to",
    "start": "2531450",
    "end": "2536760"
  },
  {
    "text": "how our application is running how many how many people have hit a particular part of the application or triggered a",
    "start": "2536760",
    "end": "2542400"
  },
  {
    "text": "particular event and then things like business metrics like our our checkouts",
    "start": "2542400",
    "end": "2547410"
  },
  {
    "text": "happening and how much money have we made throughout the day and we put these metrics in front of everybody we",
    "start": "2547410",
    "end": "2553290"
  },
  {
    "text": "actually have a dashboard that as you're deploying code this is one of the things you put in front of you is is to be able",
    "start": "2553290",
    "end": "2558780"
  },
  {
    "text": "to look at the health of the system and I apologize that all of these are so gray and hard to read but I'll try to",
    "start": "2558780",
    "end": "2564570"
  },
  {
    "text": "tell you the lower the lower side is our web tier that's all of our Apache servers and the number of requests per",
    "start": "2564570",
    "end": "2570720"
  },
  {
    "text": "second up top or things like logins and registrations and checkouts and and then",
    "start": "2570720",
    "end": "2577470"
  },
  {
    "text": "there's some page performance and in the middle so like if our performance suffers after a deploy and it's Michael",
    "start": "2577470",
    "end": "2583320"
  },
  {
    "text": "pointed out in the last talk we use these vertical lines to signify when we've changed something in the",
    "start": "2583320",
    "end": "2588330"
  },
  {
    "text": "application or our config so generally well I'll get to that that you know the",
    "start": "2588330",
    "end": "2594270"
  },
  {
    "text": "question will be why is an engineer do I need this in front of me and the answer",
    "start": "2594270",
    "end": "2601470"
  },
  {
    "text": "is oh yeah because we don't have any release managers doing this for you you're doing it yourself you're pushing the button yourself and you're also",
    "start": "2601470",
    "end": "2607680"
  },
  {
    "text": "monitoring when code goes into production to make sure things are working so yes these deploy lines",
    "start": "2607680",
    "end": "2613770"
  },
  {
    "text": "basically signify changes and we're looking for those metrics to shift",
    "start": "2613770",
    "end": "2619260"
  },
  {
    "text": "sometimes they'll go up sometimes they'll go down sometimes they'll look like this this is one of my favorites to",
    "start": "2619260",
    "end": "2624450"
  },
  {
    "text": "watch after a deploy which is your our egress bandwidth and if our bandwidth",
    "start": "2624450",
    "end": "2630030"
  },
  {
    "text": "from our data center drops by 25% you might be thinking that might not",
    "start": "2630030",
    "end": "2635880"
  },
  {
    "text": "have been expected that looks like sort of interesting behavior we don't know whether that's something that just broke",
    "start": "2635880",
    "end": "2642090"
  },
  {
    "text": "whether people aren't getting to a certain part of our site or maybe that we've just improved something where we're shipping a lot fewer image",
    "start": "2642090",
    "end": "2647820"
  },
  {
    "text": "or images are scaled down dramatically so we have this operational feedback",
    "start": "2647820",
    "end": "2654480"
  },
  {
    "text": "cycle that every engineers involved in you write code your release code and then you you monitor what's going on in",
    "start": "2654480",
    "end": "2660450"
  },
  {
    "text": "production and whether it's whether it's working the way you expect and there's this great there's this great thing I",
    "start": "2660450",
    "end": "2667200"
  },
  {
    "text": "think from military use observe orient decide and act so we observe an orient",
    "start": "2667200",
    "end": "2673080"
  },
  {
    "text": "we're collecting metrics and we're looking at those metrics gauging whether something's working properly or not",
    "start": "2673080",
    "end": "2678150"
  },
  {
    "text": "working properly and then we're making a decision in making changes to our application on a frequent basis to",
    "start": "2678150",
    "end": "2684120"
  },
  {
    "text": "respond to that continuous deployment allows us to keep that cycle really",
    "start": "2684120",
    "end": "2689430"
  },
  {
    "text": "really close and tight and I tend to talk about this I refer to this as a",
    "start": "2689430",
    "end": "2695070"
  },
  {
    "start": "2692000",
    "end": "2719000"
  },
  {
    "text": "theoretical versus practical software engineering if you're not in my opinion",
    "start": "2695070",
    "end": "2700230"
  },
  {
    "text": "if you're not working and seeing what production looks like then you are largely making guesses at how your",
    "start": "2700230",
    "end": "2705330"
  },
  {
    "text": "software works but if you're operating your software and in being involved in looking at metrics then you are actually",
    "start": "2705330",
    "end": "2711800"
  },
  {
    "text": "practically involved in how it works and understanding the ramifications of decisions you've made such as the kinds",
    "start": "2711800",
    "end": "2723270"
  },
  {
    "start": "2722000",
    "end": "2761000"
  },
  {
    "text": "of surprises that you might find if we turn off the tools that allow you to translate on the site we found this out",
    "start": "2723270",
    "end": "2730200"
  },
  {
    "text": "at one point when we were doing some tests which was that our page performance got dramatically better when we shut off those tools it led us to",
    "start": "2730200",
    "end": "2736500"
  },
  {
    "text": "looking more closely at at how the internationalization tools work for us",
    "start": "2736500",
    "end": "2741660"
  },
  {
    "text": "and refactoring them it also puts you really close to when things go wrong",
    "start": "2741660",
    "end": "2747120"
  },
  {
    "text": "it's really nice when you when you push some code and find out that you're you were completely wrong or you deployed a",
    "start": "2747120",
    "end": "2753630"
  },
  {
    "text": "bug that that burn sticks with you and yes it's really broken so again this",
    "start": "2753630",
    "end": "2762690"
  },
  {
    "start": "2761000",
    "end": "2769000"
  },
  {
    "text": "it's this it's it's not just building the plane but flying it it's all the dials and levers close at hand we do",
    "start": "2762690",
    "end": "2769920"
  },
  {
    "start": "2769000",
    "end": "2794000"
  },
  {
    "text": "this constantly and although these dates mean probably nothing to you in the United States these are the sort of milestones that lead up to our our",
    "start": "2769920",
    "end": "2776670"
  },
  {
    "text": "Christmas shopping season and this is the point where ecommerce sites usually deploying code and that looks like this",
    "start": "2776670",
    "end": "2783359"
  },
  {
    "text": "for us these red bands are the month before Christmas and we are still at the point where we're able to react and",
    "start": "2783359",
    "end": "2791119"
  },
  {
    "text": "operate the system and I'm gonna cut it off there there's the last bit I'm gonna",
    "start": "2791119",
    "end": "2796619"
  },
  {
    "start": "2794000",
    "end": "2873000"
  },
  {
    "text": "run out of time for but that's what I have for you and thank you very much all right the question is what in what at",
    "start": "2796619",
    "end": "2803970"
  },
  {
    "text": "what point do we involve business and the answer that is is these engineering teams I was talking that about that are",
    "start": "2803970",
    "end": "2810299"
  },
  {
    "text": "very small they're typically made up of about two to two to five maybe two to six engineers and then a designer maybe",
    "start": "2810299",
    "end": "2817680"
  },
  {
    "text": "and then a product manager who is essentially representing the business so we will have in terms of planning we'll",
    "start": "2817680",
    "end": "2823829"
  },
  {
    "text": "have generally about three months bands that will plan out we'll do some core like very thick brushstrokes of what",
    "start": "2823829",
    "end": "2830940"
  },
  {
    "text": "quarterly planning looks like and then each of those teams will will be like sort of running off on their own",
    "start": "2830940",
    "end": "2836220"
  },
  {
    "text": "it's very decentralized whether they're getting what they want yes so part of the metrics collection is",
    "start": "2836220",
    "end": "2841589"
  },
  {
    "text": "also a large amount of business intelligence that we collect so within that team we're able to if we're if",
    "start": "2841589",
    "end": "2849119"
  },
  {
    "text": "we're deploying a test or deploying a new feature we get a very rich amount of data that comes back from the site that",
    "start": "2849119",
    "end": "2854730"
  },
  {
    "text": "we that informs the business of what goes next and whether things are working as we expected thank you very much",
    "start": "2854730",
    "end": "2862548"
  },
  {
    "text": "you",
    "start": "2865170",
    "end": "2867230"
  }
]