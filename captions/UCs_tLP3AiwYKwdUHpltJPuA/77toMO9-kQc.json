[
  {
    "text": "[Music]",
    "start": "990",
    "end": "7859"
  },
  {
    "text": "good morning everybody you're having a great time I'd go to you it's been amazing so far I think um so thank you",
    "start": "15490",
    "end": "22970"
  },
  {
    "text": "very much for joining our session we want to show you some cool things that you can do with nodejs and sheets",
    "start": "22970",
    "end": "29599"
  },
  {
    "text": "my name is Francisca Hinkleman I'm a senior engineer at Google in New York",
    "start": "29599",
    "end": "34880"
  },
  {
    "text": "City I'm a node.js core maintainer and I'm also an elected member of the node.js technical steering committee",
    "start": "34880",
    "end": "41090"
  },
  {
    "text": "I'm co-presenting with Anu hi everyone my name is Anu I'm also a senior engineer at Google also New York where",
    "start": "41090",
    "end": "47989"
  },
  {
    "text": "she sit next to each other which is how we spawned the idea to do this talk together I focus on the G suite API to",
    "start": "47989",
    "end": "54199"
  },
  {
    "text": "develop her experience all right so let's get started with work less and do more why are we talking to",
    "start": "54199",
    "end": "63890"
  },
  {
    "text": "you about sheets well sheets have this big advantage that really anybody can work with a",
    "start": "63890",
    "end": "70009"
  },
  {
    "text": "spreadsheet not only developers so sheets they they are this universal",
    "start": "70009",
    "end": "75710"
  },
  {
    "text": "language that pretty much everybody who you work with understand everybody can open it read the data edit the data and",
    "start": "75710",
    "end": "83689"
  },
  {
    "text": "then they can filter they can sort they can play around with the data and draw their own conclusion so that's really",
    "start": "83689",
    "end": "90320"
  },
  {
    "text": "neat because you're not restricted to just develop as being able to work with something you probably know this your",
    "start": "90320",
    "end": "97790"
  },
  {
    "text": "typical workflow when you work as a sheet as first you need to collect your data then you might have to do some",
    "start": "97790",
    "end": "103430"
  },
  {
    "text": "basic data prep maybe adjust some timestamps or do translations of user",
    "start": "103430",
    "end": "109250"
  },
  {
    "text": "input if it comes from multiple languages once you have your clean data then you can analyze the data very",
    "start": "109250",
    "end": "115250"
  },
  {
    "text": "easily in a sheet and the analysis usually goes hand-in-hand with data visualization so if you have your data",
    "start": "115250",
    "end": "122299"
  },
  {
    "text": "it's very easy to generate charts in sheets and then once you have your bar",
    "start": "122299",
    "end": "127640"
  },
  {
    "text": "graphs your pie charts your diagrams then it's easy to draw your first conclusions now of course as engineers",
    "start": "127640",
    "end": "135590"
  },
  {
    "text": "we could write code to generate a charge libraries like d3.js make it very",
    "start": "135590",
    "end": "140840"
  },
  {
    "text": "easily to to generate very rich information from data but it's a lot",
    "start": "140840",
    "end": "146180"
  },
  {
    "text": "more work so when I want to iterate quickly then sheets allows me to just",
    "start": "146180",
    "end": "151250"
  },
  {
    "text": "focus on the data and the metrics now because of all this sheets is great for",
    "start": "151250",
    "end": "158660"
  },
  {
    "text": "prototyping with data so she's a great",
    "start": "158660",
    "end": "166069"
  },
  {
    "text": "tool for the output we want to share those insights all of the stuff that you",
    "start": "166069",
    "end": "172430"
  },
  {
    "text": "can communicate it on really quickly but if we are being honest doing data input",
    "start": "172430",
    "end": "178400"
  },
  {
    "text": "can be kind of a pain sometimes so luckily we can eliminate the manual",
    "start": "178400",
    "end": "184489"
  },
  {
    "text": "parts of this task and that's what we're going to show you how to do today and we love nodejs",
    "start": "184489",
    "end": "189769"
  },
  {
    "text": "I sit next to Francie and she loves her work as a maintainer on the core",
    "start": "189769",
    "end": "195230"
  },
  {
    "text": "she loves teaching people how to use node and honestly before I started sitting next to her I primarily programmed in Java and go but then after",
    "start": "195230",
    "end": "202760"
  },
  {
    "text": "wearing how async/await makes node a lot more understandable at least for me I have been converted so",
    "start": "202760",
    "end": "211459"
  },
  {
    "text": "we're going to write an application today to work with sheets we're going to use this note client library from the",
    "start": "211459",
    "end": "217310"
  },
  {
    "text": "NPM registry this has a full-fledged API for talking to sheets that we can use",
    "start": "217310",
    "end": "224440"
  },
  {
    "text": "sheets is actually just one of the family of productivity tools that we call G suite this has you know Gmail doc",
    "start": "225130",
    "end": "232310"
  },
  {
    "text": "slides and even if you're not using G suite you probably use similar applications day to day and just before",
    "start": "232310",
    "end": "239569"
  },
  {
    "text": "I you can call these api's for free you don't need an enterprise account and if",
    "start": "239569",
    "end": "245989"
  },
  {
    "text": "you have her talks on Google Cloud you've probably heard a lot about GCP",
    "start": "245989",
    "end": "251989"
  },
  {
    "text": "which is a Google cloud platform but cloud itself is actually both GCP plus G",
    "start": "251989",
    "end": "257060"
  },
  {
    "text": "Suites who use the same accounts these api's are written the same way so using them should look and feel pretty similar",
    "start": "257060",
    "end": "265210"
  },
  {
    "text": "so don't worry if you're not a node person we have client libraries SDKs in many",
    "start": "266860",
    "end": "272949"
  },
  {
    "text": "different languages this allows you to use these services in the canonical way per language so we have everything from",
    "start": "272949",
    "end": "279129"
  },
  {
    "text": "dotnet Objective C I mentioned Java and go or earlier so anything that can fit",
    "start": "279129",
    "end": "284649"
  },
  {
    "text": "your stack and we're gonna focus on note today so let's quickly look at hello",
    "start": "284649",
    "end": "291219"
  },
  {
    "text": "world using the sheets API this could be a script running locally on my laptop or",
    "start": "291219",
    "end": "296349"
  },
  {
    "text": "a desktop somewhere what it does is it talks to the sheets service on our behalf to make modifications so we start",
    "start": "296349",
    "end": "304240"
  },
  {
    "text": "by requiring the package from the NPM registry and then we initialize the",
    "start": "304240",
    "end": "310960"
  },
  {
    "text": "sheets client and then right above we see this long string and that is the scope so the scope is the level of",
    "start": "310960",
    "end": "317469"
  },
  {
    "text": "access that we want to grant to the script we know that these files live in our drive and if you know I'm in the",
    "start": "317469",
    "end": "323139"
  },
  {
    "text": "browser I can see all my different files but we just want this script to only be able to write to my spreadsheets I get",
    "start": "323139",
    "end": "330399"
  },
  {
    "text": "really nervous when I see applications when I'm installing them start to ask for a lot of permissions like they want",
    "start": "330399",
    "end": "336789"
  },
  {
    "text": "to get to my drive folders they want to look at my email maybe get my location history my shoe size mother's maiden",
    "start": "336789",
    "end": "342909"
  },
  {
    "text": "name it is really bad practice to ask for more access than you need and we",
    "start": "342909",
    "end": "349539"
  },
  {
    "text": "really care about user trust so we'll talk about best practices for all ATAR in this talk so here we actually make",
    "start": "349539",
    "end": "357969"
  },
  {
    "text": "the hello world call we use this to actually insert the string and then we",
    "start": "357969",
    "end": "364120"
  },
  {
    "text": "specify where in the sheet we want to write to so in sheets we use a1 notation",
    "start": "364120",
    "end": "370209"
  },
  {
    "text": "which is how you specify the location so here we're gonna write in the first column in the first row and using this",
    "start": "370209",
    "end": "377110"
  },
  {
    "text": "API you are in control of what version that you're using so we're using modern syntax with node and don't worry about",
    "start": "377110",
    "end": "383979"
  },
  {
    "text": "trying to memorize any of the code that we show today it's all up on github already so this is what it looks like",
    "start": "383979",
    "end": "392769"
  },
  {
    "text": "when we actually run it and if you remember from the last slide there's a variable called spreadsheet ID that is",
    "start": "392769",
    "end": "399009"
  },
  {
    "text": "the same ID that you can find in your browser in the URL",
    "start": "399009",
    "end": "403829"
  },
  {
    "text": "so if you're going to bother to automate something you're probably doing something a little bit more complex",
    "start": "404759",
    "end": "410199"
  },
  {
    "text": "you're not writing just one cell at a time or maybe that is what you're automating but the best way to make modifications is to use a type of method",
    "start": "410199",
    "end": "417490"
  },
  {
    "text": "that we call batch update and a batch update is actually common across the G suite api's it is a good way to have",
    "start": "417490",
    "end": "427810"
  },
  {
    "text": "your code work a little bit more efficiently so why should you group your request when possible there are two main",
    "start": "427810",
    "end": "434110"
  },
  {
    "text": "reasons so the first is that every network hall has a little bit of overhead and batching those calls",
    "start": "434110",
    "end": "440080"
  },
  {
    "text": "together we'll save latency the second is that this can't actually help you reduce quota but then also we call these",
    "start": "440080",
    "end": "447699"
  },
  {
    "text": "back batches are treated atomically so if you have a lot of Rights that go in together you never know if you're you don't have",
    "start": "447699",
    "end": "454720"
  },
  {
    "text": "to wrist your spreadsheet being in an invalid State so each one of these tasks",
    "start": "454720",
    "end": "459940"
  },
  {
    "text": "could be a different type of rate so just think of batch update as a fancy",
    "start": "459940",
    "end": "465580"
  },
  {
    "text": "list or a bucket for all different types of modifications that you make a lot of the same things that you can do in the",
    "start": "465580",
    "end": "471490"
  },
  {
    "text": "UI so writing data adding charts formatting cells that sort of thing so",
    "start": "471490",
    "end": "479320"
  },
  {
    "text": "now that we have a basic toolkit for working with sheets with an API with a node language let's actually try to",
    "start": "479320",
    "end": "485289"
  },
  {
    "text": "solve a real world problem so I turn around and I see frenzy looking at the",
    "start": "485289",
    "end": "490630"
  },
  {
    "text": "insights tab on github for the nodejs node repo on github this has the node core which is at runtime if you go there",
    "start": "490630",
    "end": "498310"
  },
  {
    "text": "now you can see all the changes that are going into node 14 and she's very concerned with the health of the runtime",
    "start": "498310",
    "end": "504340"
  },
  {
    "text": "and she's very metrics oriented so the",
    "start": "504340",
    "end": "511060"
  },
  {
    "text": "insights tab is great for when you're tracking the productivity but it only gives you information about activity",
    "start": "511060",
    "end": "517719"
  },
  {
    "text": "that's happening on github so the number of issues open and close the number of PRS but we know that when we're working",
    "start": "517719",
    "end": "525070"
  },
  {
    "text": "there's a lot of different factors that affect our productivity so for example if the product team changes requirements",
    "start": "525070",
    "end": "532360"
  },
  {
    "text": "this could lead to a drop in velocity if you have a lot of technical debt I believe there",
    "start": "532360",
    "end": "537760"
  },
  {
    "text": "been a few talks on tech debt at this conference already that could be a persistent burden and we know that good",
    "start": "537760",
    "end": "544600"
  },
  {
    "text": "test coverage and continuous integration like Jenkins for the node repo how people increase their velocity what is",
    "start": "544600",
    "end": "552070"
  },
  {
    "text": "just how well fed people are dramatically affects their github metrics Francie wants to get a holistic",
    "start": "552070",
    "end": "558670"
  },
  {
    "text": "photo picture into what helps people be more productive so we're gonna get a",
    "start": "558670",
    "end": "565600"
  },
  {
    "text": "little silly today let's just focus on one of those questions that we're very curious about but that's kind of hard to",
    "start": "565600",
    "end": "572110"
  },
  {
    "text": "define so we want to know if just how well people are fed affects their github",
    "start": "572110",
    "end": "578290"
  },
  {
    "text": "productivity so this is a hard problem",
    "start": "578290",
    "end": "583560"
  },
  {
    "text": "not from a technical perspective but a real-world perspective we have the contributors with our machines we've got",
    "start": "583560",
    "end": "590290"
  },
  {
    "text": "github we've got food and we want an application to tie it all up together so",
    "start": "590290",
    "end": "596290"
  },
  {
    "text": "we're writing a prototype for automating gathering metrics so we could gather insights so this is why we're going to",
    "start": "596290",
    "end": "601570"
  },
  {
    "text": "use sheet so we can quickly iterate and prototype with it and we're gonna write some note code so let's start by",
    "start": "601570",
    "end": "608440"
  },
  {
    "text": "breaking down the problem so my",
    "start": "608440",
    "end": "616390"
  },
  {
    "text": "intuition is that we probably work better if we are well fat but we care",
    "start": "616390",
    "end": "621490"
  },
  {
    "text": "about metrics so let's look at the data and see what that says all right so the",
    "start": "621490",
    "end": "628630"
  },
  {
    "text": "node repo is a very active repo there's several hundred open issues and a few hundred PRS and we want to know how many",
    "start": "628630",
    "end": "636700"
  },
  {
    "text": "issues in PRS are open and we also want to know how many are we closing how many PRS are we merging luckily we can get",
    "start": "636700",
    "end": "644770"
  },
  {
    "text": "all this data from github and we don't have to go to the browser and read off this data every day we just used a",
    "start": "644770",
    "end": "650950"
  },
  {
    "text": "github REST API they have a lovely client doctor kid when you work with JavaScript it makes it super simple to get this",
    "start": "650950",
    "end": "658000"
  },
  {
    "text": "data it's a straightforward api's API calls so we write a little script that",
    "start": "658000",
    "end": "663460"
  },
  {
    "text": "does these four API calls to get us a number of the AHS and issues and now",
    "start": "663460",
    "end": "669400"
  },
  {
    "text": "that we have today just like how a new showed us how to write hello world to a spreadsheet we're",
    "start": "669400",
    "end": "675140"
  },
  {
    "text": "now writing the data that we got from the github API to a spreadsheet just doing a update values call or a batch",
    "start": "675140",
    "end": "682370"
  },
  {
    "text": "right obviously if you go through the trouble of getting the data you could",
    "start": "682370",
    "end": "688370"
  },
  {
    "text": "console.log it and then you could copy the output and paste it into a spreadsheet but you would have to do",
    "start": "688370",
    "end": "695990"
  },
  {
    "text": "this every time you want to update data it's manual labor it's error-prone I don't want to do that",
    "start": "695990",
    "end": "701329"
  },
  {
    "text": "I much prefer having one more API call to the Google sheets API that puts this",
    "start": "701329",
    "end": "707060"
  },
  {
    "text": "data into my spreadsheet for me so I don't have to worry that when I copy and paste it that I'm like missing a cell or",
    "start": "707060",
    "end": "713540"
  },
  {
    "text": "that I shift my data or something like that so we can fully automate pulling the data from github and pushing it into",
    "start": "713540",
    "end": "720529"
  },
  {
    "text": "our spreadsheet all right what about the food data because we're interested in",
    "start": "720529",
    "end": "726740"
  },
  {
    "text": "how does food affect what what happens on github so to find out how happy",
    "start": "726740",
    "end": "733610"
  },
  {
    "text": "people are with their food we did a little survey where we asked note contributors in our office on a daily",
    "start": "733610",
    "end": "739550"
  },
  {
    "text": "basis how happy they are with the food can tell this is very scientific and so",
    "start": "739550",
    "end": "746870"
  },
  {
    "text": "when we have this data if you've worked with Google Forms before the results are always in a spreadsheet already so we",
    "start": "746870",
    "end": "752990"
  },
  {
    "text": "have our data already in here if you work with anything else I'm just like what the github data just take the",
    "start": "752990",
    "end": "758540"
  },
  {
    "text": "results and then push them with the right call to your sheet all right so",
    "start": "758540",
    "end": "764329"
  },
  {
    "text": "now that we have both the data for github and the data for the food happiness now we're interested in",
    "start": "764329",
    "end": "770149"
  },
  {
    "text": "whether there's any correlation that we can see in this data mmm if people are hungry maybe they don't have a lot of",
    "start": "770149",
    "end": "777980"
  },
  {
    "text": "patience and they just closed issues or maybe if somebody ate too much they work",
    "start": "777980",
    "end": "783290"
  },
  {
    "text": "a little slower don't match as many peers what happens if people are so hungry that they get angry do they just",
    "start": "783290",
    "end": "790010"
  },
  {
    "text": "like open issues because they upset um all we have two data and the best way to",
    "start": "790010",
    "end": "795470"
  },
  {
    "text": "see anything quickly in the data is to visualize it right so here's our chart",
    "start": "795470",
    "end": "801529"
  },
  {
    "text": "we'll look at what this chart tells us later I just want to focus on how we generated",
    "start": "801529",
    "end": "807889"
  },
  {
    "text": "this chart because you probably know if you have a spreadsheet you can highlight your data right click and say create",
    "start": "807889",
    "end": "813349"
  },
  {
    "text": "chart but again it's manual I would have to do this every time that I update the underlying data I don't want to do this",
    "start": "813349",
    "end": "819949"
  },
  {
    "text": "instead I'm using an API call to generate this chart for me so I never even have to open the browser",
    "start": "819949",
    "end": "826159"
  },
  {
    "text": "I just run a little script pulls the data updates or generates a chart the",
    "start": "826159",
    "end": "832099"
  },
  {
    "text": "code for a chart again if you use the client libraries for the Google API is very straightforward we'll be doing an",
    "start": "832099",
    "end": "838789"
  },
  {
    "text": "ad chart request we want to add a chart to our data and then we just have to",
    "start": "838789",
    "end": "844129"
  },
  {
    "text": "give it the specification of the chart that we want so we have to we can give",
    "start": "844129",
    "end": "849379"
  },
  {
    "text": "it a title for example and then we have to put down the type of the chart we",
    "start": "849379",
    "end": "855049"
  },
  {
    "text": "want the line chart but he could do bar chart scatter charts those kind of things we also have to tell the AP the",
    "start": "855049",
    "end": "862939"
  },
  {
    "text": "API what the domain of our child is going to me so in our case that's the",
    "start": "862939",
    "end": "868999"
  },
  {
    "text": "x-axis and it's the dates what how happy were people on each day and how many",
    "start": "868999",
    "end": "875119"
  },
  {
    "text": "issues we have and then the series that's the data series that we want to plot so just the data we got from github",
    "start": "875119",
    "end": "882109"
  },
  {
    "text": "and the data that we got from the form responses and once we fully specified",
    "start": "882109",
    "end": "887869"
  },
  {
    "text": "our chart then we use the batch update request again and sent this add chart",
    "start": "887869",
    "end": "893029"
  },
  {
    "text": "request so our architecture looks like",
    "start": "893029",
    "end": "898759"
  },
  {
    "text": "this we have several data sources in our case the github API and what came in through a Google Form and then we do an",
    "start": "898759",
    "end": "907220"
  },
  {
    "text": "right API call to the spreadsheets API to put all this data into one spreadsheet we do another API request to",
    "start": "907220",
    "end": "914269"
  },
  {
    "text": "generate a chart okay so we're gathering",
    "start": "914269",
    "end": "920269"
  },
  {
    "text": "data we're getting insights this is you know a fun prototype me and Francie are",
    "start": "920269",
    "end": "925669"
  },
  {
    "text": "kind of hacking around with but right now it's only on Francie laptop and what if I'm feeling a little cranky in the",
    "start": "925669",
    "end": "932629"
  },
  {
    "text": "morning and I accidentally spilled coffee on her machine well then we lose this so",
    "start": "932629",
    "end": "937710"
  },
  {
    "text": "we really need to host this as a service so ideally like anything else we'd want",
    "start": "937710",
    "end": "944220"
  },
  {
    "text": "client and server for this application but it's really not those just those two parts if we want all those principles",
    "start": "944220",
    "end": "950310"
  },
  {
    "text": "that we care about for everything else like high availability and fault tolerance if we go straight to the cloud",
    "start": "950310",
    "end": "957140"
  },
  {
    "text": "you still have a lot of setup for putting things on VMs you know when we",
    "start": "957140",
    "end": "962280"
  },
  {
    "text": "start to have multiple servers then you need a load balancer to distribute those requests maybe we have a cache somewhere",
    "start": "962280",
    "end": "968280"
  },
  {
    "text": "in the mix to really make this a full-fledged app if this really takes off with our team it's a lot of different things to",
    "start": "968280",
    "end": "975360"
  },
  {
    "text": "set up when we just kind of want to play around with this so we're ready we want to focus on our code not setting up the",
    "start": "975360",
    "end": "981570"
  },
  {
    "text": "infrastructure so there's got to be a better way and this is how we wind up at",
    "start": "981570",
    "end": "987870"
  },
  {
    "text": "server lists so with server list you just get to upload your code to the cloud and then your cloud provider",
    "start": "987870",
    "end": "993890"
  },
  {
    "text": "figures out how to place and scale it on your behalf server list doesn't mean no servers it just means you don't have to",
    "start": "993890",
    "end": "1000200"
  },
  {
    "text": "worry about anything on those servers all we need to know is we don't need to",
    "start": "1000200",
    "end": "1006830"
  },
  {
    "text": "know those machines we just have to pay for the time that our code is actually executing and then open over there means",
    "start": "1006830",
    "end": "1013040"
  },
  {
    "text": "that you get to use the languages tools and frameworks that you're already familiar with so we've been talking",
    "start": "1013040",
    "end": "1018560"
  },
  {
    "text": "about note a lot today which means that we're going to use the Express framework but if we're using Python we'd be using",
    "start": "1018560",
    "end": "1023870"
  },
  {
    "text": "flask and so on and so forth so Google Cloud functions are narrow focus bits of",
    "start": "1023870",
    "end": "1031760"
  },
  {
    "text": "code that you upload to GCP and then GCP figures out how to arrange it for you and then you trigger them by events and",
    "start": "1031760",
    "end": "1038689"
  },
  {
    "text": "there are similar options on other cloud providers like lamda on AWS and serverless on Azure just to give you",
    "start": "1038690",
    "end": "1045650"
  },
  {
    "text": "some more context so there are two types of cloud functions and we trigger them",
    "start": "1045650",
    "end": "1051350"
  },
  {
    "text": "by two different types of events so first we have background functions so those can be triggered by different",
    "start": "1051350",
    "end": "1056930"
  },
  {
    "text": "events like maybe you upload a file to a storage bucket or maybe you're listening to messages on pub/sub today we'll be",
    "start": "1056930",
    "end": "1063710"
  },
  {
    "text": "looking at HTTP functions which are more common and you guessed it the event type",
    "start": "1063710",
    "end": "1069170"
  },
  {
    "text": "that triggers them is an HDD he requests they're good for a processing data and working with",
    "start": "1069170",
    "end": "1075560"
  },
  {
    "text": "external services so in the real world you see them used a lot for third-party integrations maybe to Twilio or stripe",
    "start": "1075560",
    "end": "1082790"
  },
  {
    "text": "maybe you're doing like credit card processing so let's look at really quickly hello world for our cloud",
    "start": "1082790",
    "end": "1088100"
  },
  {
    "text": "functions so I keep seeing the word function do I really mean just a function yes with two lines we have a",
    "start": "1088100",
    "end": "1094970"
  },
  {
    "text": "fully operational server list back-end and then those request response objects are from the Express framework and after",
    "start": "1094970",
    "end": "1102020"
  },
  {
    "text": "you deploy this you don't need any additional setup you don't need any additional configuration once it's deployed you get a fully qualified",
    "start": "1102020",
    "end": "1108380"
  },
  {
    "text": "domain you get an HTTP endpoint and then this actually dynamically generates the SSL and TLS certs for you so now that we",
    "start": "1108380",
    "end": "1119900"
  },
  {
    "text": "know cloud functions we're gonna wrap up all that code that we had in part one and then deploy it so we have a server",
    "start": "1119900",
    "end": "1125480"
  },
  {
    "text": "list back-end that will do all this processing for us this surface will read the data from our sources and then",
    "start": "1125480",
    "end": "1131780"
  },
  {
    "text": "produce the chart all while running in the data center somewhere in the cloud so we upload the code that we had in",
    "start": "1131780",
    "end": "1139580"
  },
  {
    "text": "part 1 with an exported function called github chart which is our main logic and does all that processing so once it's",
    "start": "1139580",
    "end": "1146270"
  },
  {
    "text": "done we send back a 200 just like in hello world and here we're actually gonna send back the ID as a spreadsheet",
    "start": "1146270",
    "end": "1152570"
  },
  {
    "text": "which has that chart so how do we actually deploy the cloud function you",
    "start": "1152570",
    "end": "1159410"
  },
  {
    "text": "can either use the CLI g-cloud is a CLI that you'll use at the command line to manage all your GCP tasks and with",
    "start": "1159410",
    "end": "1167300"
  },
  {
    "text": "functions all you have to do is just give it the name of that function it'll pull everything up for you so you can",
    "start": "1167300",
    "end": "1175520"
  },
  {
    "text": "actually also deploy via the browser what's great about cloud functions is that it picks up the package.json not",
    "start": "1175520",
    "end": "1182480"
  },
  {
    "text": "the modules themselves which is good if you're if you ever have like a slow data connection say you're at a conference",
    "start": "1182480",
    "end": "1188600"
  },
  {
    "text": "you're not uploading modules back and forth GCP downloads the dependencies in the cloud for you also in the cloud",
    "start": "1188600",
    "end": "1196430"
  },
  {
    "text": "console which is the browser interface you can actually edit and deploy right there so if you need to make some minor tweaks on the go this is",
    "start": "1196430",
    "end": "1203610"
  },
  {
    "text": "also an option as well so the code is in",
    "start": "1203610",
    "end": "1209760"
  },
  {
    "text": "the cloud but we still have to trigger it manually which means one of us has to remember to kick it off every day we",
    "start": "1209760",
    "end": "1217799"
  },
  {
    "text": "want to keep pulling in the data regularly to keep tracking our productivity over time so instead of",
    "start": "1217799",
    "end": "1225240"
  },
  {
    "text": "needing a human to trigger it every day we want to schedule this and then there's this is a product called cloud scheduler in my opinion it's just big",
    "start": "1225240",
    "end": "1232350"
  },
  {
    "text": "fancy cron in the cloud and you actually use the same constant acts as if you",
    "start": "1232350",
    "end": "1238289"
  },
  {
    "text": "were just doing it on the command line so we set up this cron job and we have our sis at every morning at 9:00 a.m.",
    "start": "1238289",
    "end": "1244830"
  },
  {
    "text": "and you all you have to do is specify that HTTP endpoint we got from deploying the function so now we have a back-end",
    "start": "1244830",
    "end": "1252120"
  },
  {
    "text": "set up with a data collection job and frenzies going to take you through adding a client so right now we have an",
    "start": "1252120",
    "end": "1261330"
  },
  {
    "text": "HTTP endpoint so if you memorize this endpoint you ping it sending a get request opening in a new browser and",
    "start": "1261330",
    "end": "1267840"
  },
  {
    "text": "then you get a new chart um it would be much more convenient though if we had a nice front-end client so let's see how",
    "start": "1267840",
    "end": "1275100"
  },
  {
    "text": "to add a client to this um we build a little front-end that shows the chart and when you click on share analysis it",
    "start": "1275100",
    "end": "1283080"
  },
  {
    "text": "pulls in new data updates the chart and then since this updated charts to your team members since we are sending out",
    "start": "1283080",
    "end": "1290370"
  },
  {
    "text": "the data here we're using the Gmail API and just like in the backend where we",
    "start": "1290370",
    "end": "1296669"
  },
  {
    "text": "have client libraries for nodejs google provides an sdk for for browser",
    "start": "1296669",
    "end": "1301769"
  },
  {
    "text": "JavaScript as well that makes it really easy to work with the API so here it's just Gmail add users send messages that",
    "start": "1301769",
    "end": "1309840"
  },
  {
    "text": "send you passing the user ID and then as a resource to raw email which can be plain text or HTML so our front-end or",
    "start": "1309840",
    "end": "1322860"
  },
  {
    "text": "the cron job now triggers the cloud function and then the function queries",
    "start": "1322860",
    "end": "1328889"
  },
  {
    "text": "these other data sources for new data writes that into Sheetz generates a new chart and we",
    "start": "1328889",
    "end": "1335179"
  },
  {
    "text": "email out this chart this is really straightforward right sad everything",
    "start": "1335179",
    "end": "1341629"
  },
  {
    "text": "though so the big thing we left out here is authorization and clearly you don't",
    "start": "1341629",
    "end": "1349580"
  },
  {
    "text": "want other people to send emails pretending that they're you or probably",
    "start": "1349580",
    "end": "1355940"
  },
  {
    "text": "worse you don't want other people to have access to your spreadsheets which probably have sensitive financial",
    "start": "1355940",
    "end": "1362720"
  },
  {
    "text": "planning on them rather than pull request numbers from github you don't want other people to access your",
    "start": "1362720",
    "end": "1368509"
  },
  {
    "text": "spreadsheets just because they figured out how to use two sheets API so how does authorization work in our",
    "start": "1368509",
    "end": "1374299"
  },
  {
    "text": "application in the front end here we actually have a little authorize or",
    "start": "1374299",
    "end": "1379399"
  },
  {
    "text": "login button and when people click this button and they are presented with the",
    "start": "1379399",
    "end": "1385940"
  },
  {
    "text": "Google sign-in flow so the Google sign-in flow is a secure authorization",
    "start": "1385940",
    "end": "1394039"
  },
  {
    "text": "system that allows your users to login with their gmail account a Google account that they already have and then",
    "start": "1394039",
    "end": "1401509"
  },
  {
    "text": "they can authorize your application to do specific tasks on the user's behalf",
    "start": "1401509",
    "end": "1407419"
  },
  {
    "text": "so in this case this end-user me I allow the application to send emails on my",
    "start": "1407419",
    "end": "1414139"
  },
  {
    "text": "behalf and with the Google sign-in flow all of this happens in a secure manner",
    "start": "1414139",
    "end": "1421330"
  },
  {
    "text": "under the hood this is using the OAuth 2 protocol so four hours to the",
    "start": "1421720",
    "end": "1428960"
  },
  {
    "text": "application always needs user consent before it can access user data so the",
    "start": "1428960",
    "end": "1434149"
  },
  {
    "text": "big thing here said with OAuth 2 your application does not get a user's credentials you do not get your end",
    "start": "1434149",
    "end": "1440690"
  },
  {
    "text": "users passwords instead you only you",
    "start": "1440690",
    "end": "1446090"
  },
  {
    "text": "always you're always asked for consent from the users and you don't have to worry about managing their passwords and",
    "start": "1446090",
    "end": "1453080"
  },
  {
    "text": "credentials in a safe way you're just like well I don't get those anyways I have consent so there's a lot less for",
    "start": "1453080",
    "end": "1458389"
  },
  {
    "text": "you to worry about let's look at how hours to actually looks under the hood",
    "start": "1458389",
    "end": "1464210"
  },
  {
    "text": "so it's often called we like ours it's three legs because there's three entities",
    "start": "1464210",
    "end": "1470720"
  },
  {
    "text": "it's your application service it's the Google service but then most importantly",
    "start": "1470720",
    "end": "1476150"
  },
  {
    "text": "there's the end user so when your application wants to create the Google",
    "start": "1476150",
    "end": "1481640"
  },
  {
    "text": "API for example because they want to send out an email then they requested",
    "start": "1481640",
    "end": "1487700"
  },
  {
    "text": "token from the Google server which starts this sign-in flow for the end user and if the end user logs in and",
    "start": "1487700",
    "end": "1494450"
  },
  {
    "text": "then also consents to it then your app gets back a token application can",
    "start": "1494450",
    "end": "1500059"
  },
  {
    "text": "validate a token and then with this token they can now make the app can now make API calls like sending an email on",
    "start": "1500059",
    "end": "1507080"
  },
  {
    "text": "behalf of the end user the Google SDK",
    "start": "1507080",
    "end": "1515299"
  },
  {
    "text": "again there's a lot of this work for you so you don't have to do this complicated workflow when you do initialize the",
    "start": "1515299",
    "end": "1523370"
  },
  {
    "text": "Google client you have to specify the Scopes and a new mentioned that earlier so for the front-end we set the scope to",
    "start": "1523370",
    "end": "1529789"
  },
  {
    "text": "Gmail that sent because all the app is doing is sending out the new char to",
    "start": "1529789",
    "end": "1535039"
  },
  {
    "text": "your teammates it's not reading your emails or doing anything else with it if",
    "start": "1535039",
    "end": "1540740"
  },
  {
    "text": "you set this scope in the signup flow then it will say do you allow this app",
    "start": "1540740",
    "end": "1546080"
  },
  {
    "text": "to send emails it's specifically asking for Gmail that sent when a user says",
    "start": "1546080",
    "end": "1551659"
  },
  {
    "text": "yeah that's fine okay and then your app gets a token if your app is now trying to use this token to write to the user",
    "start": "1551659",
    "end": "1558919"
  },
  {
    "text": "spreadsheets you'll get a 4-3 back from the Google service because clearly even though you have a valid token the user",
    "start": "1558919",
    "end": "1565309"
  },
  {
    "text": "didn't consent to this action they consented to this particular scope so this token obviously is only valid for",
    "start": "1565309",
    "end": "1571940"
  },
  {
    "text": "that and you can't use it for other API calls there's lots of different scopes",
    "start": "1571940",
    "end": "1578510"
  },
  {
    "text": "if you do work with the API it's just have a look what different scopes are and pick the right one there's one I",
    "start": "1578510",
    "end": "1584240"
  },
  {
    "text": "specifically want to point out it's to drive that file scope so rather than",
    "start": "1584240",
    "end": "1589580"
  },
  {
    "text": "giving an app access to writing to all your spreadsheets with this scope the application or the user only grants",
    "start": "1589580",
    "end": "1596750"
  },
  {
    "text": "access to new fires or to files that they explicitly",
    "start": "1596750",
    "end": "1601789"
  },
  {
    "text": "give access to so if you want to use an application like ours where you have one",
    "start": "1601789",
    "end": "1607009"
  },
  {
    "text": "spreadsheet with github and the food data this is a good scope because you don't risk that the application",
    "start": "1607009",
    "end": "1613179"
  },
  {
    "text": "maliciously or accidentally reads your personal spreadsheets now how does auth",
    "start": "1613179",
    "end": "1619759"
  },
  {
    "text": "work in the backend because when the cloud function is triggered and then wants to write the new data to the",
    "start": "1619759",
    "end": "1626029"
  },
  {
    "text": "spreadsheet there's no end-user involved it's maybe the cloud scheduler but it's all happening in a cloud function so how",
    "start": "1626029",
    "end": "1631759"
  },
  {
    "text": "does this work here well for the backend we're using server to server authorization and instead of a sheet",
    "start": "1631759",
    "end": "1638749"
  },
  {
    "text": "that belongs to an end-user our spreadsheet resource actually belongs to the application a little",
    "start": "1638749",
    "end": "1646220"
  },
  {
    "text": "heads up though usually when you work with resources like sheets or dogs or slides and you have a real world",
    "start": "1646220",
    "end": "1653539"
  },
  {
    "text": "application you always want to use three like hours and have these resources belong to end-users if you think about",
    "start": "1653539",
    "end": "1660259"
  },
  {
    "text": "it if you have a real application with millions of users you don't want your app to own millions of spreadsheets you",
    "start": "1660259",
    "end": "1666679"
  },
  {
    "text": "want every user or every team to own their own spreadsheet so usually best practice is three like hours when you",
    "start": "1666679",
    "end": "1672799"
  },
  {
    "text": "work with sheets and darks server-to-server ask is called two",
    "start": "1672799",
    "end": "1678409"
  },
  {
    "text": "lengths you probably guess it is only two entities involved here there's no",
    "start": "1678409",
    "end": "1683929"
  },
  {
    "text": "end user it's the server or the application server and the Google service for a server to server",
    "start": "1683929",
    "end": "1692720"
  },
  {
    "text": "authentication you can make authorized API calls with a signed Chasen web token",
    "start": "1692720",
    "end": "1699409"
  },
  {
    "text": "legit instead of access tokens and again the Google SDK makes it much easier for",
    "start": "1699409",
    "end": "1707690"
  },
  {
    "text": "you it handles all of this for you so you don't have to create and sign your own jet so in comparison three-leg",
    "start": "1707690",
    "end": "1717679"
  },
  {
    "text": "dollars is three entities and it's on behalf of the end-users it always",
    "start": "1717679",
    "end": "1723169"
  },
  {
    "text": "requires consent and it's usually your best practice when you work with gee speed on the other hand to elect hours",
    "start": "1723169",
    "end": "1730460"
  },
  {
    "text": "is for server to server authorization it's on behalf of the application and",
    "start": "1730460",
    "end": "1735680"
  },
  {
    "text": "the resources have to belong to the application thank you for comparison between the two",
    "start": "1735680",
    "end": "1743570"
  },
  {
    "text": "different types of auth auth can't get really confusing but if you are getting started with the G Suite API you can go",
    "start": "1743570",
    "end": "1750380"
  },
  {
    "text": "to the documentation and we have quick starts that actually give you a lot of boilerplate code that you can copy and",
    "start": "1750380",
    "end": "1755840"
  },
  {
    "text": "paste out so as frankly mention the client libraries actually handle a lot",
    "start": "1755840",
    "end": "1760940"
  },
  {
    "text": "of this for you so you just copy and paste that out and get started in just a few minutes so what was the whole point",
    "start": "1760940",
    "end": "1767030"
  },
  {
    "text": "in building this application we wanted to get some insights so let's see what we found out during our short experiment",
    "start": "1767030",
    "end": "1772880"
  },
  {
    "text": "in the office so we made a lot of different charts we played around with",
    "start": "1772880",
    "end": "1778430"
  },
  {
    "text": "all the different options and sheets and we wanted to show food satisfaction against github metrics from our sample",
    "start": "1778430",
    "end": "1785030"
  },
  {
    "text": "data so we can actually see a little bit of a correlation the left hand side is",
    "start": "1785030",
    "end": "1790190"
  },
  {
    "text": "the scale of the number of issues and the right hand side shows the happiness and if we remember our survey went from",
    "start": "1790190",
    "end": "1795920"
  },
  {
    "text": "1 to 5 so here are some more charts again if we pull out the single home",
    "start": "1795920",
    "end": "1801470"
  },
  {
    "text": "noise we can actually see a little bit of a correlation again mortgage charts",
    "start": "1801470",
    "end": "1806750"
  },
  {
    "text": "this one is closed issues vs. and PRS vs. food so both of the things that we were looking at and after we raise the",
    "start": "1806750",
    "end": "1813860"
  },
  {
    "text": "code we actually never have to manually open sheets again to get our insights which can make this more accessible to",
    "start": "1813860",
    "end": "1820100"
  },
  {
    "text": "other people who may be other engineers who aren't using sheets everyday or if you just need to share this with other people who are opening lots of sheets",
    "start": "1820100",
    "end": "1826970"
  },
  {
    "text": "every day now that we have this data we can easily add metrics from other sources you know maybe we want to look",
    "start": "1826970",
    "end": "1833450"
  },
  {
    "text": "at something like commute times we live in New York which is notorious for slow traffic more realistically we know that",
    "start": "1833450",
    "end": "1840950"
  },
  {
    "text": "you probably have dashboards at your company you're looking at internal sources traffic data some sort of",
    "start": "1840950",
    "end": "1848660"
  },
  {
    "text": "application monitoring we just wanted to use a Waterdown fun example to inspire",
    "start": "1848660",
    "end": "1854510"
  },
  {
    "text": "you to see how you can play around with these things so in conclusion we stick",
    "start": "1854510",
    "end": "1861920"
  },
  {
    "text": "to our hypothesis good food yields good code and you know correlation doesn't cause",
    "start": "1861920",
    "end": "1867739"
  },
  {
    "text": "causation but we have some data if we want to have this conversation with anyone else at the company so we're",
    "start": "1867739",
    "end": "1876619"
  },
  {
    "text": "gonna tack on one last thing to our system one workflow that lets you see a",
    "start": "1876619",
    "end": "1881929"
  },
  {
    "text": "lot and cheese suite is automatically generating reports with data so people",
    "start": "1881929",
    "end": "1890029"
  },
  {
    "text": "often have to make weekly monthly quarterly reports salespeople have to",
    "start": "1890029",
    "end": "1895190"
  },
  {
    "text": "make customized reports for clients maybe we want to improve our good food trend over time so we share this info",
    "start": "1895190",
    "end": "1901820"
  },
  {
    "text": "with people all across the company in a doc or maybe a slide deck presentation maybe you don't have to do this but",
    "start": "1901820",
    "end": "1908629"
  },
  {
    "text": "someone at your company probably does and you can make them really happy by automating this as well so let's look at",
    "start": "1908629",
    "end": "1915019"
  },
  {
    "text": "a sample report for our github productivity and see how we can automate this with the api's that we've already",
    "start": "1915019",
    "end": "1921440"
  },
  {
    "text": "been using so if you've ever had to",
    "start": "1921440",
    "end": "1926479"
  },
  {
    "text": "update reports yourself maybe what you do is make a copy of the last one and then start to update the data but that",
    "start": "1926479",
    "end": "1933799"
  },
  {
    "text": "is also super tedious and error-prone what if we just create a template and maybe you have templates at your company",
    "start": "1933799",
    "end": "1940329"
  },
  {
    "text": "that with placeholders for the data and other pieces of information to update",
    "start": "1940329",
    "end": "1945559"
  },
  {
    "text": "like we'll just look at the current date on the first slide we're gonna completely automate this so first we use",
    "start": "1945559",
    "end": "1952309"
  },
  {
    "text": "the drive API to create a copy of this for us every time we need to write a new one and then we'll write some code using",
    "start": "1952309",
    "end": "1958429"
  },
  {
    "text": "sheets and slides to merge the most up-to-date pieces of data so we use the",
    "start": "1958429",
    "end": "1967549"
  },
  {
    "text": "slides API to tie it all together we start by initializing the size client so",
    "start": "1967549",
    "end": "1972619"
  },
  {
    "text": "we can make modifications and the syntax should look familiar if you remember",
    "start": "1972619",
    "end": "1978950"
  },
  {
    "text": "from the template deck we have a placeholder for the report state we can make a replace text request to update it",
    "start": "1978950",
    "end": "1986149"
  },
  {
    "text": "with the new date just as a code knows it and the replaced",
    "start": "1986149",
    "end": "1995870"
  },
  {
    "text": "right is you might have guessed it a type of batch update and we can do this for other placeholders throughout the",
    "start": "1995870",
    "end": "2001870"
  },
  {
    "text": "deck and you can even swap out images so like if we had a slide summarizing the total number employee request we'd be",
    "start": "2001870",
    "end": "2007990"
  },
  {
    "text": "able to swap that in as well in the same batch update so now let's look at how to",
    "start": "2007990",
    "end": "2014440"
  },
  {
    "text": "add our charts what's great about these API is that similar to the products",
    "start": "2014440",
    "end": "2021190"
  },
  {
    "text": "themselves are actually tightly coupled so slides has a specific API call for",
    "start": "2021190",
    "end": "2026680"
  },
  {
    "text": "inserting a sheets chart by its ID its chart ID so voila by writing a script",
    "start": "2026680",
    "end": "2032710"
  },
  {
    "text": "with these code snippets we can have a way to generate reports with the most up-to-date data and without any human",
    "start": "2032710",
    "end": "2038860"
  },
  {
    "text": "intervention at all this could save you or your co-workers hours and hours of time so we're gonna start to summarize",
    "start": "2038860",
    "end": "2047950"
  },
  {
    "text": "what we built today let's look at the system that we design now so we designed",
    "start": "2047950",
    "end": "2055179"
  },
  {
    "text": "a basic reporting system with no js' API calls 2g sweet and GCP our front-end",
    "start": "2055179",
    "end": "2064350"
  },
  {
    "text": "triggers of functions that fetches the data from our external sources and automatically generates charts and we",
    "start": "2064350",
    "end": "2072340"
  },
  {
    "text": "have multiple ways to share that information either using Gmail or generating a fancy-looking report at its",
    "start": "2072340",
    "end": "2079628"
  },
  {
    "text": "core at its core we use sheets as a data collection and manipulation tool so we",
    "start": "2079629",
    "end": "2089080"
  },
  {
    "text": "had a blast just brainstorming trying to think of fun things that we could write over the summer to make this talk and we",
    "start": "2089080",
    "end": "2096040"
  },
  {
    "text": "hope that we've inspired you to take a non-technical problem and then try to solve it with the tools that you're",
    "start": "2096040",
    "end": "2102190"
  },
  {
    "text": "using everyday our experimental app of investigates if lunch effects github",
    "start": "2102190",
    "end": "2107650"
  },
  {
    "text": "productivity we know this probably isn't exactly what you're doing at your company but maybe there's some data sources you can tie together and quickly",
    "start": "2107650",
    "end": "2114880"
  },
  {
    "text": "prototype with and we really hope you have fun coding your next project hopefully an ode we'll see you on the",
    "start": "2114880",
    "end": "2122260"
  },
  {
    "text": "issue tracker and our completed code is available on github and feel free to",
    "start": "2122260",
    "end": "2127390"
  },
  {
    "text": "tweet at us and here are some links to get started",
    "start": "2127390",
    "end": "2132630"
  },
  {
    "text": "[Applause]",
    "start": "2132630",
    "end": "2138199"
  }
]