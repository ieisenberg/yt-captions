[
  {
    "start": "0",
    "end": "110000"
  },
  {
    "text": "um I'd like to introduce you to the first talk here in the technical um",
    "start": "359",
    "end": "6160"
  },
  {
    "text": "technical session on on Pinterest uh we've been running as",
    "start": "6160",
    "end": "11240"
  },
  {
    "text": "part of cuon that we also uh engaged and we've been running these architectures you always wondered about uh kinds of",
    "start": "11240",
    "end": "18119"
  },
  {
    "text": "sessions and it's always great to see these these large startups uh large",
    "start": "18119",
    "end": "23680"
  },
  {
    "text": "companies uh doing really crazy stuff um so here's a story of scaling Pinterest",
    "start": "23680",
    "end": "30000"
  },
  {
    "text": "scaling from you know a couple of computers um Marty is uh has been with",
    "start": "30000",
    "end": "36079"
  },
  {
    "text": "Pinterest from the very very beginning so um there's lots of uh really cool",
    "start": "36079",
    "end": "41760"
  },
  {
    "text": "stories from uh from scaling there it's not as technical you know all the way through I was sitting last time I",
    "start": "41760",
    "end": "47440"
  },
  {
    "text": "watched this I was like like itching to um to hear how exactly did they do that",
    "start": "47440",
    "end": "54039"
  },
  {
    "text": "sharding or these more technical details but you know on the other hand it's really nice to have this kind of",
    "start": "54039",
    "end": "60480"
  },
  {
    "text": "nice simple story and it kind of sits in opposition to this whole conference you know here at the conference we all talk",
    "start": "60480",
    "end": "66840"
  },
  {
    "text": "about all these new things all these new fancy Technologies and I really like the message in this talk that you have to",
    "start": "66840",
    "end": "72280"
  },
  {
    "text": "keep things simple to make them scale so please welcome Marty thank",
    "start": "72280",
    "end": "80240"
  },
  {
    "text": "you uh hey well uh I don't have to intro myself now but um uh so I'm from Pinterest uh been there for a while uh",
    "start": "82000",
    "end": "89479"
  },
  {
    "text": "today I'm I'm going to take you on a mystical magical tour of what it was like to build Pinter from the ground up",
    "start": "89479",
    "end": "95320"
  },
  {
    "text": "uh I'm going to go through our Evolution our technology uh and I'm going to show you some of the lessons we learned and",
    "start": "95320",
    "end": "101479"
  },
  {
    "text": "many of the many many mistakes we made uh and my hope is that you won't make the same mistakes but instead make all",
    "start": "101479",
    "end": "107280"
  },
  {
    "text": "new exciting mistakes uh so first the evolution uh we started in March 2010 uh",
    "start": "107280",
    "end": "115200"
  },
  {
    "start": "110000",
    "end": "310000"
  },
  {
    "text": "and launched to the world and sort of quietly I guess uh at the",
    "start": "115200",
    "end": "120840"
  },
  {
    "text": "time uh we were trying to figure out how to make the website so what was the website what are we building uh images",
    "start": "120840",
    "end": "126880"
  },
  {
    "text": "here followers we should have followers that seems like a good idea we'll need a feed we'll need aggregation we'll need all these things uh and what that",
    "start": "126880",
    "end": "133520"
  },
  {
    "text": "usually looks like is you got two Founders um eating Doritos and ramen and you got an engineer that they found somewhere uh that's what we had and it",
    "start": "133520",
    "end": "140200"
  },
  {
    "text": "was really great it's it's a really fun time because you're trying to figure out what you're building and you're moving fast and the engineer cobbling it all",
    "start": "140200",
    "end": "146160"
  },
  {
    "text": "together and making it look right um but the underlying bits are just barely held together but you're trying to you're optimizing for Speed of design over um",
    "start": "146160",
    "end": "153560"
  },
  {
    "text": "engineering just yet um so um here's the three uh it was Ben Silberman Paul",
    "start": "153560",
    "end": "159760"
  },
  {
    "text": "shiara and Yash nelapati and uh and then uh for the next nine",
    "start": "159760",
    "end": "165200"
  },
  {
    "text": "months uh we were in what the founder called we were in stealth mode but not because we wanted to be uh went for a little while little bit",
    "start": "165200",
    "end": "172680"
  },
  {
    "text": "of engineering little more product Dev behind the scenes uh we had swapped uh cloud services at this time if you",
    "start": "172680",
    "end": "178920"
  },
  {
    "text": "recall clouds cloud service has been around but then they were starting to kind of really get big and people were",
    "start": "178920",
    "end": "184040"
  },
  {
    "text": "really debating should we be on the cloud should we be in data centers uh and uh I think uh we we swapped over to",
    "start": "184040",
    "end": "190519"
  },
  {
    "text": "Amazon because it looked new and exciting uh I think we may even had some credits I don't know um we uh started to",
    "start": "190519",
    "end": "198000"
  },
  {
    "text": "have a little bit of differentiation in our stack so that we can uh I don't know uh you know maybe have a little more",
    "start": "198000",
    "end": "203799"
  },
  {
    "text": "redundancy and things like that so we had an engine X at the top uh and we actually had four web engines running",
    "start": "203799",
    "end": "209400"
  },
  {
    "text": "python uh we had a read a read slave for my SQL so that you can offload a little of your reads uh and a task CU so we can send",
    "start": "209400",
    "end": "216560"
  },
  {
    "text": "emails and tweeties and facebookies and mys spaces and live journals and uh all",
    "start": "216560",
    "end": "222280"
  },
  {
    "text": "that good stuff and then we had a mongod DB box um because everybody has a mongod DB box uh for counters uh and then uh",
    "start": "222280",
    "end": "229360"
  },
  {
    "text": "and then I joined around then time uh and then uh oh and here we are this is a",
    "start": "229360",
    "end": "235280"
  },
  {
    "text": "little example of what it was like this is at our International headquarters in early 2011 behind us is is the apartment",
    "start": "235280",
    "end": "240840"
  },
  {
    "text": "that we worked out of in the main area we uh worked and then there were two bedrooms and one bedroom was our",
    "start": "240840",
    "end": "246159"
  },
  {
    "text": "International boardroom where we had our grand meetings and the other room was actually a a",
    "start": "246159",
    "end": "253680"
  },
  {
    "text": "bedroom so uh then the thing happened uh thing took off and it was kind of a crazy uh ride and we never slept or",
    "start": "255120",
    "end": "262120"
  },
  {
    "text": "anything um and what happens during this kind of a ride is that everything's on fire we only had a few engineers and",
    "start": "262120",
    "end": "268440"
  },
  {
    "text": "everything gets hot we were doubling every month and a half so your databases are angry and people are coming to your",
    "start": "268440",
    "end": "273639"
  },
  {
    "text": "doorsteps saying hey if you just use my magic technology we'll solve all your problems so you're like yes yes giveme",
    "start": "273639",
    "end": "278680"
  },
  {
    "text": "giveme giv me and what happens is this and you're not meant to read this you're just meant to be terrified by it uh I'll",
    "start": "278680",
    "end": "284360"
  },
  {
    "text": "give you a quick rundown look we've got how many databases we've got MySQL Cassandra mbase mimc reddis elastic",
    "start": "284360",
    "end": "290360"
  },
  {
    "text": "search and mongodb and we have three Engineers so um you have to be an expert",
    "start": "290360",
    "end": "295880"
  },
  {
    "text": "in all of these and and we were not uh so it was one of those problems where each one comes along it solves the",
    "start": "295880",
    "end": "301639"
  },
  {
    "text": "problem for a couple weeks you're you're related this is awesome and then when it's when the honeymoon period's over",
    "start": "301639",
    "end": "307759"
  },
  {
    "text": "you start to cry a little bit um so we learned the hard way it will fail every one of these will fail",
    "start": "307759",
    "end": "313800"
  },
  {
    "text": "so keep it simple when when the time comes it's 3:00 a.m. and it fails it sure would be nice if you could find the answer uh pretty easily uh the other",
    "start": "313800",
    "end": "321199"
  },
  {
    "text": "thing we learned as we grew and we started to become the biggest users of these different Technologies is that whenever we were the biggest user",
    "start": "321199",
    "end": "326759"
  },
  {
    "text": "everything was a thousand times harder because nobody has Tri over those landmines for us and then written tools",
    "start": "326759",
    "end": "332280"
  },
  {
    "text": "as we tripped over the landmines we wrote tools to uh fix them so someone else could use them but we were the first ones on on many of these so uh",
    "start": "332280",
    "end": "339360"
  },
  {
    "text": "lots of pain so here we are uh roughly early 2012 and we had moved into palalo",
    "start": "339360",
    "end": "346000"
  },
  {
    "text": "downtown uh and uh this was huge this space was amazing there was an echo it was crazy um that didn't last too long",
    "start": "346000",
    "end": "354199"
  },
  {
    "text": "so uh the the scaling kept happen kept happening and around January 2012 we",
    "start": "354199",
    "end": "359880"
  },
  {
    "text": "finished a massive re architecture so roughly around November or October 2011 to 2012 we decided to rearchitecturing",
    "start": "359880",
    "end": "368520"
  },
  {
    "text": "what works and and what is what is what we actually W what are we actually trying to build uh and we simp we got",
    "start": "376680",
    "end": "382560"
  },
  {
    "text": "rid of most of it so now we've got my SQL uh reddis and mimc and really we could have done it on MySQL and mimc but",
    "start": "382560",
    "end": "388440"
  },
  {
    "text": "reddis was working so well we decided to keep around for a couple of really uh uh important tasks um so we got rid of all",
    "start": "388440",
    "end": "395039"
  },
  {
    "text": "the other things uh and then the ideal in any scalability project is that you could just throw boxes at the numbers",
    "start": "395039",
    "end": "401880"
  },
  {
    "text": "the financial people hate me for saying that but uh but then uh if you can hit that spot you've hit linear growth or you've hit some kind of growth where you",
    "start": "401880",
    "end": "408039"
  },
  {
    "text": "can throw money at the problem uh and that's kind of what we hit at that",
    "start": "408039",
    "end": "412960"
  },
  {
    "text": "point uh then we had the next scale ability challenge which was not technology it was people so now you've",
    "start": "413400",
    "end": "419639"
  },
  {
    "text": "got more Engineers so uh they're not all doing everything all the time suddenly you maybe you want to have one Ops guy",
    "start": "419639",
    "end": "426360"
  },
  {
    "text": "and maybe you want to have two guys building mobile devices and and one data infrastructure guy or something like that so we started to differentiate uh",
    "start": "426360",
    "end": "433360"
  },
  {
    "text": "and this is the beginning of a new uh era for our company uh and it only gets more exciting uh hair raising uh so it",
    "start": "433360",
    "end": "441479"
  },
  {
    "text": "got bigger uh now we have to use the fishey lens uh so we knocked down the middle wall and expanded that way and",
    "start": "441479",
    "end": "447639"
  },
  {
    "text": "now this spage the space was huge huge we' never you know damn",
    "start": "447639",
    "end": "453400"
  },
  {
    "text": "huge uh so we kept growing uh into 2013 kind of linear growth uh and uh uh we",
    "start": "453400",
    "end": "461400"
  },
  {
    "text": "sort of did hit our scalability uh um the the golden thing you went out of",
    "start": "461400",
    "end": "466840"
  },
  {
    "text": "scalability which is just push numbers at it at some point ssds came out and we just kept pushing the number of MySQL boxes up number of MIM Cas boxes up",
    "start": "466840",
    "end": "473360"
  },
  {
    "text": "number reddest boxes up uh and it's not quite that simple you start to hit new issues number of connections becomes a",
    "start": "473360",
    "end": "478560"
  },
  {
    "text": "hassle Network uh all these other things but in general uh we're past we were kind of past the database Mega paino and",
    "start": "478560",
    "end": "486120"
  },
  {
    "text": "on to the next Mega pain points um and we started to grow the company in terms of people pretty fast suddenly to round",
    "start": "486120",
    "end": "492280"
  },
  {
    "text": "off all the corners you need product people you need people to support them you need lawyers and finance and and HR",
    "start": "492280",
    "end": "499000"
  },
  {
    "text": "and all these things it's only your company balloons uh and the challenge now that we start to get is that when",
    "start": "499000",
    "end": "504639"
  },
  {
    "text": "you hit this 100 to 120 130 range people will actually come up to you who have been through this before and they'll",
    "start": "504639",
    "end": "509879"
  },
  {
    "text": "they'll say I'm sorry uh CU you're going through kind of a rough time um what you're what you're doing is you're now",
    "start": "509879",
    "end": "515039"
  },
  {
    "text": "having to make structure in your company if you didn't already have it some companies start with it some companies don't we sort of didn't um so now we",
    "start": "515039",
    "end": "521039"
  },
  {
    "text": "have to have uh improving communication feedback uh manager structures things like this and that always comes with",
    "start": "521039",
    "end": "527040"
  },
  {
    "text": "some hassle because this person wants to be manager this person is a good manager but doesn't want to be a manager you",
    "start": "527040",
    "end": "532120"
  },
  {
    "text": "know all these things and so any structure you come out with will have its own Hassle and you're also going through a cultural uh uh uh funnel",
    "start": "532120",
    "end": "539760"
  },
  {
    "text": "because uh you're bringing a bunch of Engineers you worry is the culture going the right direction uh we could lose the",
    "start": "539760",
    "end": "544959"
  },
  {
    "text": "culture now many companies have uh what if we bring in 20 Google Engineers all at once and they change it into Google is that okay you know these kinds of",
    "start": "544959",
    "end": "551240"
  },
  {
    "text": "questions are bubbling around in our heads um so we started to split it all up and now we actually started to have",
    "start": "551240",
    "end": "558440"
  },
  {
    "text": "individual teams uh and this came with a lot of uh struggle but but when it came out in the end it it felt really good it",
    "start": "558440",
    "end": "564959"
  },
  {
    "text": "started to move fast so you got data infrastructure because now we have a full data pipeline this thing needs to never go down because the moment the",
    "start": "564959",
    "end": "571079"
  },
  {
    "text": "data pipeline goes down you're you lose your business sense of of the whole thing uh it's like a captain who can't",
    "start": "571079",
    "end": "576320"
  },
  {
    "text": "see outside the boat uh we have a search team that was exciting uh for a long time it was half of a quarter of me uh",
    "start": "576320",
    "end": "584040"
  },
  {
    "text": "business and platform to actually support the business unit that was starting to grow um spam team because spam became a problem uh web mobile uh",
    "start": "584040",
    "end": "591519"
  },
  {
    "text": "growth uh we started having a growth team so that somebody is always looking at the problem of growth uh our one of",
    "start": "591519",
    "end": "597079"
  },
  {
    "text": "our our number one initiative uh and then ers structure and operations team and then 65 non-engineers meaning I",
    "start": "597079",
    "end": "604399"
  },
  {
    "text": "hate that term but I can't come with a better term um product managers lawyers all all the the various other components",
    "start": "604399",
    "end": "610680"
  },
  {
    "text": "that are absolutely necessary to get this thing rolling and uh then we moved to San Francisco we ran out of space in Palo",
    "start": "610680",
    "end": "617720"
  },
  {
    "text": "thanks to paler anyway um but uh got big uh this space uh would support us for",
    "start": "617720",
    "end": "624360"
  },
  {
    "text": "the rest of time um but not not quite uh so we needed a bigger space and now this",
    "start": "624360",
    "end": "629480"
  },
  {
    "text": "is an old picture and it's getting bigger um so now I think one of the biggest challenges we have at this point is we've always been in the same",
    "start": "629480",
    "end": "635120"
  },
  {
    "text": "building uh and so the context switch time or the cash load time of of talking",
    "start": "635120",
    "end": "640560"
  },
  {
    "text": "to the operations person for me used to be this that's half a second uh uh now",
    "start": "640560",
    "end": "645600"
  },
  {
    "text": "it's I've got to go down to the other side and I know it sounds like a first world problem but it impedes communication by a significant amount",
    "start": "645600",
    "end": "651440"
  },
  {
    "text": "when you're not used to it and now we've got another building and how about when we we have a building in New York and you know these are the kinds of processes we need to build in building",
    "start": "651440",
    "end": "658279"
  },
  {
    "text": "culture around a virtual environment and uh managing that virtual environment all these things have to be done very very",
    "start": "658279",
    "end": "664519"
  },
  {
    "text": "well and uh we're beginning that process now so uh",
    "start": "664519",
    "end": "671120"
  },
  {
    "start": "670000",
    "end": "1082000"
  },
  {
    "text": "Technologies uh this is a rough layout of our stack at the very very high level I wanted to keep it extremely high level",
    "start": "671120",
    "end": "676560"
  },
  {
    "text": "but it does give a good sense for how we think of things we try to keep it dirt dirt simple uh and we also try to keep",
    "start": "676560",
    "end": "682079"
  },
  {
    "text": "things a little abstracted so uh someone co uh calling Pinterest.com goes into uh",
    "start": "682079",
    "end": "688680"
  },
  {
    "text": "elb we're hosted all on Amazon so uh we use a couple of their magic blackbox tools and elb is their load balancer",
    "start": "688680",
    "end": "695079"
  },
  {
    "text": "tool and one of the reasons we use it is it's actually got magic Hardware underneath and if we need to deflect a Dos attack they can do that uh but then",
    "start": "695079",
    "end": "702560"
  },
  {
    "text": "we go into a uh software hour managed uh uh load balancer and the reason we do",
    "start": "702560",
    "end": "707639"
  },
  {
    "text": "that is that that gives us a little more control elb is two black box um but at this layer uh we can do things like shut",
    "start": "707639",
    "end": "714480"
  },
  {
    "text": "off a university where a PhD student is going a little crazy which happened a couple weeks ago",
    "start": "714480",
    "end": "720519"
  },
  {
    "text": "um then uh we have our python layer this purple uh layer here um it's the business layer it's it's currently",
    "start": "720519",
    "end": "726680"
  },
  {
    "text": "python but it's it's shifting it's uh if you come in from the web we'll direct you to a web app where we'll talk HTML",
    "start": "726680",
    "end": "731839"
  },
  {
    "text": "back to you if you come in from the iPhone uh or Android or something like that will go straight to the API the web",
    "start": "731839",
    "end": "737880"
  },
  {
    "text": "layer actually talks to the API layer now uh exclusively that Arrow now needs to go a little left uh that's nice that",
    "start": "737880",
    "end": "743920"
  },
  {
    "text": "gives a nice abstraction structures the whole tier task processing is done by a system called pinl",
    "start": "743920",
    "end": "749760"
  },
  {
    "text": "uh which is simply a MySQL box where you put in task uh a name of a task to run",
    "start": "749760",
    "end": "755000"
  },
  {
    "text": "and some uh strings and then uh a whole sea of python processes will pull them out with",
    "start": "755000",
    "end": "760560"
  },
  {
    "text": "priority uh the reason why we moved it to pin later if if you are in the S same situation you can use something called",
    "start": "760560",
    "end": "765880"
  },
  {
    "text": "pyus it uses redus and and it's a similar operation it works very very well we eventually decided we need a",
    "start": "765880",
    "end": "771480"
  },
  {
    "text": "little bit more acid style compliance and then every image on Pinterest lives an S3 every user generated pin and we",
    "start": "771480",
    "end": "778480"
  },
  {
    "text": "get your initial image and then we make a whole bunch of different versions the small the medium the square all that stuff and then we front it with a CDN",
    "start": "778480",
    "end": "784920"
  },
  {
    "text": "like aimi uh and then uh this is the part that's getting really interesting as we",
    "start": "784920",
    "end": "790480"
  },
  {
    "text": "grow we have this intermediate service layer uh the the yellowy boxes uh and uh",
    "start": "790480",
    "end": "796040"
  },
  {
    "text": "they're connected to the business tier um with a connection management system uh built around zookeeper we don't have",
    "start": "796040",
    "end": "802519"
  },
  {
    "text": "any load balancing between we used to that was a hassle uh I would not recommend it essentially what happens is",
    "start": "802519",
    "end": "807639"
  },
  {
    "text": "when a web app wakes up it says hey I need a a search Service uh and this thing will have a list of them say here",
    "start": "807639",
    "end": "814160"
  },
  {
    "text": "connect and they direct connect if one of these dies on either end uh there'll be a little scramble and we'll make new",
    "start": "814160",
    "end": "819639"
  },
  {
    "text": "connections uh if a new one comes up we'll rebalance there too uh it takes away a middle tier of hassle uh having",
    "start": "819639",
    "end": "826000"
  },
  {
    "text": "an intermediate load balancer is its own little nightmare because you got to say well do I need 10 of those and you have",
    "start": "826000",
    "end": "831560"
  },
  {
    "text": "to do shuffling and then sometimes they just don't work mess um got rid of it and happy ever since uh and then the",
    "start": "831560",
    "end": "838560"
  },
  {
    "text": "service is sort of where we're growing there's a whole sea of different ways people do this um Facebook is a classic",
    "start": "838560",
    "end": "844880"
  },
  {
    "text": "example uh I don't know exactly what it looks like today right now but as of a couple years ago they were one giant",
    "start": "844880",
    "end": "850079"
  },
  {
    "text": "codebase with a few services so they'd have big deploys it would be a big thing and they had a culture around that it",
    "start": "850079",
    "end": "855639"
  },
  {
    "text": "worked uh it worked well for them uh Amazon's the opposite I think uh one request to Amazon's about 300 service",
    "start": "855639",
    "end": "861639"
  },
  {
    "text": "calls uh I think we're kind of going somewhere in the middle uh I like to uh",
    "start": "861639",
    "end": "868120"
  },
  {
    "text": "uh put it at at kind of a boundary of a team uh that's one way to look at it or or roughly a product so like the search",
    "start": "868120",
    "end": "874399"
  },
  {
    "text": "service is this uh one nice property you get out of this uh structure is the search service is this massive engine",
    "start": "874399",
    "end": "881199"
  },
  {
    "text": "behind it you do a whole bunch of nightly uh Gathering of data you have all these Smart Systems I don't care as",
    "start": "881199",
    "end": "887560"
  },
  {
    "text": "long as I can search for Star Wars and crochet and get little nit Yodas uh that's all I want to see so uh search",
    "start": "887560",
    "end": "893600"
  },
  {
    "text": "Service uh provides us that uh the feed service is a service where you um put",
    "start": "893600",
    "end": "899040"
  },
  {
    "text": "pins in and it goes out to everybody it should uh you know it handles it it abstracts it away from me uh one of the great examples uh of of safety is the",
    "start": "899040",
    "end": "905839"
  },
  {
    "text": "MySQL service I this is one of the first ones we did and I kind of think of it like the code on the Apollo 13 uh uh or",
    "start": "905839",
    "end": "913399"
  },
  {
    "text": "or like uh on uh on satellites where it's really dangerous code to touch one",
    "start": "913399",
    "end": "918839"
  },
  {
    "text": "team will lock it down write all the things around it because what will happen if you mess that up and this did happen is someone will make a mistake",
    "start": "918839",
    "end": "925279"
  },
  {
    "text": "and it'll be innocuous at first and then eventually something bad will happen and your cord data which uh for us lives in",
    "start": "925279",
    "end": "930480"
  },
  {
    "text": "MySQL will start to get corrupted so we had a situation and I'll show you in a minute um all of our things are sharded",
    "start": "930480",
    "end": "935920"
  },
  {
    "text": "and what was happening was somebody would pull data out of one Shard edit it and put it back to the wrong Shard uh so",
    "start": "935920",
    "end": "941440"
  },
  {
    "text": "now just data started going all bad so what you want to do is you that one's a good one to have as a service because",
    "start": "941440",
    "end": "946800"
  },
  {
    "text": "you can lock it down only these people can touch it they're super careful if you want to make any changes you've got to go through NASA and everybody else",
    "start": "946800",
    "end": "952680"
  },
  {
    "text": "and you know um and then we have things like the spam servers my team is now working on that and one of the nice",
    "start": "952680",
    "end": "958199"
  },
  {
    "text": "properties of that is get really fast speeds uh of deploy we used to be part of the massive you know kitchen sync",
    "start": "958199",
    "end": "963880"
  },
  {
    "text": "code base which is to me everything we haven't pulled out as a service um and when we pulled out our deploy times went from twice a day maybe maybe not to once",
    "start": "963880",
    "end": "971560"
  },
  {
    "text": "every 30 seconds with tests and everything so it speeds us up too all of our data uh uh is in these four uh",
    "start": "971560",
    "end": "979720"
  },
  {
    "text": "systems hbas is a a relative newcomer we've been using it for about a year and a half now I think but we're largely in",
    "start": "979720",
    "end": "985440"
  },
  {
    "text": "MySQL um sharted uh which I can go to more if you guys are interested afterward uh and mimc and reddis and",
    "start": "985440",
    "end": "991279"
  },
  {
    "text": "then hbas is something we're using for new systems and I'll explain why um and then uh also a first class citizen uh",
    "start": "991279",
    "end": "998920"
  },
  {
    "text": "although I threw it threw it on the side is our data pipeline uh this is one of the scariest things we build it's one of the most important uh essentially this",
    "start": "998920",
    "end": "1005399"
  },
  {
    "text": "is how we can see outside the windows how we fly uh so everything that happens on the site gets funneled into Kafka",
    "start": "1005399",
    "end": "1012160"
  },
  {
    "text": "which is uh it's like a giant fire hose uh everything goes in and you can drink from the fire hose uh it's from LinkedIn",
    "start": "1012160",
    "end": "1018560"
  },
  {
    "text": "really good it's in the same vein as Flume and scry but this one scaled very well for us uh and then you drink from",
    "start": "1018560",
    "end": "1025000"
  },
  {
    "text": "it we have a system called seor which uh which watches the logs chops them and then puts them in S3 where now you've",
    "start": "1025000",
    "end": "1031199"
  },
  {
    "text": "got your magic 11 NES of magic durability uh this system is a bit scary because if it goes down anywhere along",
    "start": "1031199",
    "end": "1037480"
  },
  {
    "text": "there that data just evaporates and it's very hard to get back uh so you you have to uh have a really good strong team",
    "start": "1037480",
    "end": "1044918"
  },
  {
    "text": "around that system um one also nice thing about kfka is you can watch everything on the site so we send it down for spam processing or any kind of",
    "start": "1044919",
    "end": "1052120"
  },
  {
    "text": "stream processing so that if if a whole big attack happens we can react to it within milliseconds um once it's an S3 uh you",
    "start": "1052120",
    "end": "1059440"
  },
  {
    "text": "can do anything you want with it uh because everybody talks to S3 these days uh send it over to uh EMR um that's",
    "start": "1059440",
    "end": "1066520"
  },
  {
    "text": "Amazon's map ruce or send it over to cball that's someone else's uh map ruce uh Amazon also has red shift which is a",
    "start": "1066520",
    "end": "1072400"
  },
  {
    "text": "flavor of uh map reduce that's a little more structured you can't do as much but it's much much faster um so once you're",
    "start": "1072400",
    "end": "1078400"
  },
  {
    "text": "an S3 your home free so uh if you're interested in the",
    "start": "1078400",
    "end": "1083840"
  },
  {
    "start": "1082000",
    "end": "1415000"
  },
  {
    "text": "charting I do have a talk on on what we did for our sharting um you can go check it out if you want to we could talk",
    "start": "1083840",
    "end": "1088919"
  },
  {
    "text": "about it afterward uh I go into how we landed on this charting we did uh how everybody else does their different",
    "start": "1088919",
    "end": "1094919"
  },
  {
    "text": "flavors and why we chose this one uh we learned from many mistakes and then made the next",
    "start": "1094919",
    "end": "1101440"
  },
  {
    "text": "step uh so uh uh around September 201 or so when when everything was on fire and",
    "start": "1101440",
    "end": "1107280"
  },
  {
    "text": "we wanted to re architect we kind of had this problem of how do we choose what to choose and this this is how we sort of",
    "start": "1107280",
    "end": "1112559"
  },
  {
    "text": "drove the technology we'd use and then finally how we drove um the sharting Technique we we decided on uh we kind of",
    "start": "1112559",
    "end": "1118159"
  },
  {
    "text": "had this gut that anything complex was evil so uh we didn't want to do that uh and everybody I've run into this problem",
    "start": "1118159",
    "end": "1123799"
  },
  {
    "text": "all the time uh today is I wonder why are you using these nosql Technologies why are you using all these different",
    "start": "1123799",
    "end": "1129120"
  },
  {
    "text": "really amazing new technologies and and this one person summed it up nicely for me and then I had to beat him up afterward he said well I'm building the",
    "start": "1129120",
    "end": "1135080"
  },
  {
    "text": "latest and greatest I need to use the latest and greatest and yeah no um if you need a flux capacitor to make your",
    "start": "1135080",
    "end": "1141039"
  },
  {
    "text": "time machine go and that's brand new hot  use that fine uh but if you're building yet another really cool social",
    "start": "1141039",
    "end": "1146600"
  },
  {
    "text": "network or some other flavor of that you need a database well they've existed for how long I don't know 60 years uh and my",
    "start": "1146600",
    "end": "1153120"
  },
  {
    "text": "SQL has been around for a long time so use that it will do what you need mostly um so we we made a list of questions to",
    "start": "1153120",
    "end": "1159919"
  },
  {
    "text": "ask ourselves so first does it meet your needs well uh if it doesn't go back in time and you need a time machine it's going to be a problem but most of the",
    "start": "1159919",
    "end": "1165600"
  },
  {
    "text": "time uh um uh you need to at least make make sure that basic thing will will hit",
    "start": "1165600",
    "end": "1170720"
  },
  {
    "text": "so one example is my SQL can do a lot of things but one thing it doesn't do well is say like if you want to look up by geography not good for that so you may",
    "start": "1170720",
    "end": "1177320"
  },
  {
    "text": "need a different solution um how mature is the product this is the biggest question I I think that most people get",
    "start": "1177320",
    "end": "1183320"
  },
  {
    "text": "wrong especially when they're building their little tiny startup so I had to Define it what is maturity well to me maturity is the blood and sweat that's",
    "start": "1183320",
    "end": "1188960"
  },
  {
    "text": "gone into something divided by the complexity so blood and sweat's like again uh my SQL is a good example uh",
    "start": "1188960",
    "end": "1195039"
  },
  {
    "text": "Facebook has poured in a lot of resources into it uh they've beaten that thing down they've seen every kind of problem that",
    "start": "1195039",
    "end": "1200440"
  },
  {
    "text": "can happen and uh an example of why my sequel an example of the maturity is um",
    "start": "1200440",
    "end": "1205600"
  },
  {
    "text": "you can go and find any answer to it there's a bunch of things that fall out of this if you have a problem with my SQL the answer is out there uh and the",
    "start": "1205600",
    "end": "1211240"
  },
  {
    "text": "complexity is the other side of it so uh mimc an example is a hash table with a socket you can't get any simpler than",
    "start": "1211240",
    "end": "1217960"
  },
  {
    "text": "that and that sucker was mature roughly on the week it was released uh and it's been beaten down for several more years",
    "start": "1217960",
    "end": "1223200"
  },
  {
    "text": "I think it's about 10 years old now so that that thing just works um kind of on the flip side if you take a technology",
    "start": "1223200",
    "end": "1229080"
  },
  {
    "text": "like uh uh it's it's really growing fast they've got a lot of blood and sweat going into it but it's a bit",
    "start": "1229080",
    "end": "1234679"
  },
  {
    "text": "more complex and the blood and sweat compared to something like my SQL much much smaller so you've inverted this and now you're saying let's go to market and",
    "start": "1234679",
    "end": "1241039"
  },
  {
    "text": "that's that's a problem I think we run into a lot so uh out of maturity comes many",
    "start": "1241039",
    "end": "1246200"
  },
  {
    "text": "properties uh and these are the next couple bullets for one is it commonly used typically when something's mature",
    "start": "1246200",
    "end": "1251400"
  },
  {
    "text": "people have used it there's people out there so uh for example hbas which we now use uh we couldn't hire for there's",
    "start": "1251400",
    "end": "1257280"
  },
  {
    "text": "nobody out there uh and if there are people out there uh like we now have two homegrown hbas experts we we we manacle",
    "start": "1257280",
    "end": "1264559"
  },
  {
    "text": "them to their desk and don't let them go uh versus MySQL if you're in downtown San Francisco and you faint and someone",
    "start": "1264559",
    "end": "1270679"
  },
  {
    "text": "says hey we need a MySQL expert uh there's one out there uh guaranteed uh so so that's a really big",
    "start": "1270679",
    "end": "1277240"
  },
  {
    "text": "concern Can you hire for it um is a community active and I'll tell you the example that I I remember with this was",
    "start": "1277240",
    "end": "1282440"
  },
  {
    "text": "it was 2: a.m. and I had a MySQL problem I went on to Google and I said uh you know replication key failure and there",
    "start": "1282440",
    "end": "1289200"
  },
  {
    "text": "was a million articles and you go on Stock Exchange and it says here's how you solve it and then they call you a noob so I'm like oh wow okay mature uh",
    "start": "1289200",
    "end": "1297120"
  },
  {
    "text": "versus something like mbase uh there are zero answers out there I finally found some little chat room somewhere and the",
    "start": "1297120",
    "end": "1303240"
  },
  {
    "text": "guy was asleep he was logged in but he was asleep so that was great uh how",
    "start": "1303240",
    "end": "1308919"
  },
  {
    "text": "robust is it to failure well um my sequel I'm going to keep saying my people this sucker I've never lost any",
    "start": "1308919",
    "end": "1314960"
  },
  {
    "text": "data on it and in the grimmest days I remember the hard drive had crashed and there was some other with the machine I could barely log in but I got in and I",
    "start": "1314960",
    "end": "1321640"
  },
  {
    "text": "found some random tools some guy had written because he had had this problem and I slowly sucked out the memory and",
    "start": "1321640",
    "end": "1326679"
  },
  {
    "text": "got it on into another box and I lived another day um unlike some of the other Technologies uh uh as they grow uh don't",
    "start": "1326679",
    "end": "1335039"
  },
  {
    "text": "want to pick on too many of them but uh uh you run into a problem hard drives have a little problem there's a little bit of corruption and we had the CTO",
    "start": "1335039",
    "end": "1341240"
  },
  {
    "text": "come to us for their particular technology and say sorry data gone um fortunately we never trusted anything",
    "start": "1341240",
    "end": "1347559"
  },
  {
    "text": "besides uh my SQ for our golden copy of our data so in all the events when we had catastrophic data loss on these other Technologies uh we were able to",
    "start": "1347559",
    "end": "1354919"
  },
  {
    "text": "rederive it um next one is how robust I'm sorry does it have good debugging tools and this always comes with",
    "start": "1354919",
    "end": "1360760"
  },
  {
    "text": "maturity because someone trips across the thing they want to profile it they want to make it better so you get things like uh like online backups uh profiling",
    "start": "1360760",
    "end": "1368000"
  },
  {
    "text": "all those things and and uh uh mbase as an example had I couldn't find any of that stuff uh and my sqls loaded",
    "start": "1368000",
    "end": "1373880"
  },
  {
    "text": "anything you want it's there um then you have to get into questions about how well does it scale well my SQL doesn't",
    "start": "1373880",
    "end": "1378919"
  },
  {
    "text": "scale past a box so that's the promise that no SQL gives you is uh you just add a box that's awesome I I wish it would",
    "start": "1378919",
    "end": "1385279"
  },
  {
    "text": "work uh and it does work it's getting better but uh but it's got its own set of issues uh so my SQL we had to layer",
    "start": "1385279",
    "end": "1390960"
  },
  {
    "text": "on some some scalability uh to get it to go more than one box um and then finally",
    "start": "1390960",
    "end": "1396440"
  },
  {
    "text": "it's a cost justifi we didn't really play this game but many people have this question about do I go and buy the big",
    "start": "1396440",
    "end": "1401480"
  },
  {
    "text": "IBM db2s or the Oracles of the world um in our case we didn't really have an option we were a small startup with no",
    "start": "1401480",
    "end": "1407720"
  },
  {
    "text": "funding so SQL it was and I think even if I had the money I think I'd still consider my SQL but that is a question",
    "start": "1407720",
    "end": "1412840"
  },
  {
    "text": "you have to consider with anything you build uh so why Amazon I've been asked this so many times I thought I'd just do",
    "start": "1412840",
    "end": "1418919"
  },
  {
    "start": "1415000",
    "end": "1449000"
  },
  {
    "text": "a slide on it uh and actually this goes back a little bit to the days when everybody was wondering if we should do uh data centers so uh it's getting a",
    "start": "1418919",
    "end": "1425679"
  },
  {
    "text": "little dated but I think it's still relevant um if you haven't used it uh it's a variety of different servers and",
    "start": "1425679",
    "end": "1431200"
  },
  {
    "text": "you can run Linux or Windows uh you have the option of managing it yourself but they also have a lot of little tools so",
    "start": "1431200",
    "end": "1436760"
  },
  {
    "text": "if you want to not deal with your database you can use RDS or Dynamo and and RDS is like a Oracle or MySQL clone",
    "start": "1436760",
    "end": "1443279"
  },
  {
    "text": "and Dynamo is like a uh like a big table kind of Clone or a Cassandra is thing um",
    "start": "1443279",
    "end": "1450080"
  },
  {
    "start": "1449000",
    "end": "1492000"
  },
  {
    "text": "you can use their load balancing which we use their DNS we also use that they have map reduce if you wanted on day one",
    "start": "1450080",
    "end": "1455120"
  },
  {
    "text": "we used it for a long time but it had scalability issues we we had to get around uh they have basic security uh",
    "start": "1455120",
    "end": "1460799"
  },
  {
    "text": "firewalls and everything built around it uh I'd say the reliability is good I've been in data centers I've been in AWS",
    "start": "1460799",
    "end": "1465919"
  },
  {
    "text": "and everybody likes to rag on AWS but to me it's been very very good um we've had our big problems but uh We've we've",
    "start": "1465919",
    "end": "1471679"
  },
  {
    "text": "recovered from them um the community is good and they're not cheap but uh the promise of a new box in seconds changes",
    "start": "1471679",
    "end": "1477679"
  },
  {
    "text": "your whole world uh especially from the old days when when people would ask about data center um now if I need a",
    "start": "1477679",
    "end": "1483760"
  },
  {
    "text": "mcash box I could get it now I can get it at 2 am. no question in the old world I'd have to plan several months ahead",
    "start": "1483760",
    "end": "1489640"
  },
  {
    "text": "and and hope I get it right uh we use uh Route 53 for DNS if",
    "start": "1489640",
    "end": "1496039"
  },
  {
    "start": "1492000",
    "end": "1509000"
  },
  {
    "text": "anybody's curious um elb for that top level uh load balancing works very very well uh manage dc2 we use for most",
    "start": "1496039",
    "end": "1503640"
  },
  {
    "text": "everything uh else and then we use S3 for our images and our",
    "start": "1503640",
    "end": "1508200"
  },
  {
    "start": "1509000",
    "end": "1579000"
  },
  {
    "text": "logs uh python uh we're primarily a python house but we're shifting slowly uh I love python I'd do it again uh if I",
    "start": "1509399",
    "end": "1516840"
  },
  {
    "text": "had to it's extremely mature I don't know of any bugs we ran across um the community was really really good uh it",
    "start": "1516840",
    "end": "1523120"
  },
  {
    "text": "seemed like our Dev was a lot faster I I come from the PHP world and I felt like it was a little bit more structured uh",
    "start": "1523120",
    "end": "1528600"
  },
  {
    "text": "and not too structured to the point where I have to make a factory factory factory just to get a an object out seems like I can move fast uh uh the",
    "start": "1528600",
    "end": "1535919"
  },
  {
    "text": "libraries are very very good I think one of the most effective rapid prototyping tools we can build uh that's available",
    "start": "1535919",
    "end": "1542120"
  },
  {
    "text": "the only problem with python is that it's uh it's an interpreted language um and the garbage collector I I couldn't",
    "start": "1542120",
    "end": "1547559"
  },
  {
    "text": "find any info on Google about so like is it generational what is it um so I went and finally read the source code and the",
    "start": "1547559",
    "end": "1553919"
  },
  {
    "text": "source code for the garbage collector is this long and if anybody's written a garbage collector you know that's that's too short so uh it was too short uh and",
    "start": "1553919",
    "end": "1562000"
  },
  {
    "text": "and so to me that meant it was probably stopped the world terribly and it was um so that's a problem with python so you",
    "start": "1562000",
    "end": "1567799"
  },
  {
    "text": "eventually have to deal with that issue but I we're just now dealing with it at the scale we're at so I'd say if you're building something new go with what",
    "start": "1567799",
    "end": "1574440"
  },
  {
    "text": "works and what's fast especially for your developers so if they're Ruby people do Ruby whatever works um we're now moving to Java and go",
    "start": "1574440",
    "end": "1581840"
  },
  {
    "start": "1579000",
    "end": "1636000"
  },
  {
    "text": "for a couple core services and maybe for bigger systems uh and that's primarily for the speed reasons uh we use Python for everything",
    "start": "1581840",
    "end": "1589840"
  },
  {
    "text": "most of our services and now Java and go we're starting to use anywhere where that that little that we we really need",
    "start": "1589840",
    "end": "1595640"
  },
  {
    "text": "to be fast and the variance needs to be low so we're really tightening up our SLA so that's like at our varnish layer for load balancing our search indexers",
    "start": "1595640",
    "end": "1603520"
  },
  {
    "text": "are all written in that uh they've got a lot of work to do and they they uh a lot of CPU computation many of our systems",
    "start": "1603520",
    "end": "1609600"
  },
  {
    "text": "by the way just kind of turn around and do a lot of routing so CPU computation doesn't play in so you can get away with",
    "start": "1609600",
    "end": "1615039"
  },
  {
    "text": "python just fine uh and then our high high frequency systems like the MySQL services and our mimc routers and all of",
    "start": "1615039",
    "end": "1620559"
  },
  {
    "text": "that stuff is now moving to Java and if you haven't used go it's kind of cool I kind of like it it's uh got kind of the",
    "start": "1620559",
    "end": "1626799"
  },
  {
    "text": "nice mix of python and Ruby but it's uh compiled and it's got a growing uh",
    "start": "1626799",
    "end": "1631840"
  },
  {
    "text": "garbage collector and the community is growing very very fast uh okay so my SQL MIM cach this is",
    "start": "1631840",
    "end": "1639279"
  },
  {
    "start": "1636000",
    "end": "1710000"
  },
  {
    "text": "kind of the the punchline of the thing um these suckers just worked for us they survived everything we put against it um",
    "start": "1639279",
    "end": "1646159"
  },
  {
    "text": "every other system in our stack has died in a catastrophic way and I can go into that if you like uh a little bit after",
    "start": "1646159",
    "end": "1652039"
  },
  {
    "text": "um it's extremely mature both of them are uh they're well-known and well-liked everybody loves them everybody uses them",
    "start": "1652039",
    "end": "1657320"
  },
  {
    "text": "uh if you haven't used it if you're not just a user of it you may have developed it you know the these kinds of stories",
    "start": "1657320",
    "end": "1662679"
  },
  {
    "text": "um uh the response time to request rate um decreased for or increased linearly for us meaning that um it wasn't just",
    "start": "1662679",
    "end": "1670039"
  },
  {
    "text": "one day where the thing got super slow as we grew it sort of went down to where it was intolerable so uh that was really",
    "start": "1670039",
    "end": "1677159"
  },
  {
    "text": "nice property uh other technology we found uh between 600 p.m. and 10 p.m. we grew up a little bit and we went past",
    "start": "1677159",
    "end": "1683799"
  },
  {
    "text": "some magic cliff and that was it and we went from 10 milliseconds to 4 seconds and had to get more RAM essentially uh",
    "start": "1683799",
    "end": "1689760"
  },
  {
    "text": "that's very hard to plan around and makes me uh sweat so uh I I love this property uh very good support so there's",
    "start": "1689760",
    "end": "1695640"
  },
  {
    "text": "extra backup for online backups works very well inot toop you can tell what's going on inside MySQL Matt kit will tell",
    "start": "1695640",
    "end": "1701320"
  },
  {
    "text": "you about MySQL and mimc and the uh the community is very active Facebook uses my SQL and puts back to it uh at a very",
    "start": "1701320",
    "end": "1708360"
  },
  {
    "text": "rapid clip uh we use it for our primary storage of of our main core data all our",
    "start": "1708360",
    "end": "1714679"
  },
  {
    "start": "1710000",
    "end": "1738000"
  },
  {
    "text": "users boards pins comments domains things like that and now monetization and other major uh data we separate our",
    "start": "1714679",
    "end": "1722080"
  },
  {
    "text": "things into mappings and core objects and I'll explain more about that uh I explained more about that in the",
    "start": "1722080",
    "end": "1727159"
  },
  {
    "text": "sharting talk there's a lot of advantages between behind splitting those two out uh and then we use it for",
    "start": "1727159",
    "end": "1732360"
  },
  {
    "text": "things like legal compliance data where we need assd compliance because otherwise the lawyers yell at me and um and then I get scared",
    "start": "1732360",
    "end": "1739320"
  },
  {
    "start": "1738000",
    "end": "1859000"
  },
  {
    "text": "uh reddis this is the one that kind of surprised us a little bit this is new uh not as nearly as much uh blood and sweat",
    "start": "1739320",
    "end": "1745399"
  },
  {
    "text": "but the com the complexity is pretty small uh if you ever look at the source code it's kind of weird it's kind of",
    "start": "1745399",
    "end": "1750880"
  },
  {
    "text": "cool but it works it's it's very simple and works very very well um the community is very good people are loving",
    "start": "1750880",
    "end": "1756320"
  },
  {
    "text": "it people are putting a lot back into it a lot of people are adopting it Twitter has it we have it I think Facebook was",
    "start": "1756320",
    "end": "1761399"
  },
  {
    "text": "TW uh messing around with it a little bit so big big people are using it right now uh and hurting it in new ways uh the",
    "start": "1761399",
    "end": "1768240"
  },
  {
    "text": "cool part about it is uh if you haven't used it it's a key value storage stores down to the hard drive and it comes with",
    "start": "1768240",
    "end": "1773760"
  },
  {
    "text": "a bunch of different little Technologies uh data structures so if you need a set if you need a list if you need a sorted",
    "start": "1773760",
    "end": "1779279"
  },
  {
    "text": "set or a a hash table or any of that kind of stuff they they support it uh and even cooler on the cloud is the",
    "start": "1779279",
    "end": "1785360"
  },
  {
    "text": "different kinds of persistent modes they have your your durability modes so you can have stor it down to the hard drive",
    "start": "1785360",
    "end": "1791799"
  },
  {
    "text": "now like my SQL does you can never store it down kind of like MIM cash so if if the Box goes down it evaporates like a",
    "start": "1791799",
    "end": "1798279"
  },
  {
    "text": "classic cache or you can have snapshot and this is a this means store your brains down every 2 or 3 hours or",
    "start": "1798279",
    "end": "1804960"
  },
  {
    "text": "whatever you set and that's kind of cool especially on the cloud when if your neighbor starts partying at 3:00 a.m. uh",
    "start": "1804960",
    "end": "1811200"
  },
  {
    "text": "and your latency of your hard drive starts to go up uh if you can do snapshot mode there's a pretty good chance you won't store down on that that",
    "start": "1811200",
    "end": "1817279"
  },
  {
    "text": "time frame versus my SQL will grind to a halt uh so uh we did that for our main",
    "start": "1817279",
    "end": "1823240"
  },
  {
    "text": "um feeds uh we have a push model so every time if I follow all of you and you anybody puts up a new PIN it will",
    "start": "1823240",
    "end": "1830360"
  },
  {
    "text": "come into my stack um so uh snapshotting was a perfect model for that because if",
    "start": "1830360",
    "end": "1836120"
  },
  {
    "text": "I if we have a hundred of these boxes and mine dies I may go back for a couple hours and back in time uh but then it'll",
    "start": "1836120",
    "end": "1841840"
  },
  {
    "text": "replenish and and it really simplifies the whole model and gives it's a trade-off of that weird uh behavior for",
    "start": "1841840",
    "end": "1847720"
  },
  {
    "text": "much better uptime um and it's also open source so it means you can fix things I've fixed",
    "start": "1847720",
    "end": "1853919"
  },
  {
    "text": "many things in redus uh over the years uh uh they um just we hit the new",
    "start": "1853919",
    "end": "1859799"
  },
  {
    "start": "1859000",
    "end": "1946000"
  },
  {
    "text": "problems uh we use it for our whole follower graph is stored in reddis and this is our golden copy of our follower",
    "start": "1859799",
    "end": "1864840"
  },
  {
    "text": "data so we put a lot of trust on this and we've been doing it for about three years now um so that means all of the little relationships and and Pinterest",
    "start": "1864840",
    "end": "1870799"
  },
  {
    "text": "follower model is kind of complex it's uh you can follow boards or users then you can follow users but not that board",
    "start": "1870799",
    "end": "1876159"
  },
  {
    "text": "you these kinds of complexities we store it all in reddis um we store our public",
    "start": "1876159",
    "end": "1881279"
  },
  {
    "text": "feeds in there and the reason we store our public feeds in there is um and not something like my SQL is my SQL is still living in the 90s it's one of its",
    "start": "1881279",
    "end": "1887120"
  },
  {
    "text": "weaknesses it it's living with the Macarena and everything else uh it's a tree structure so that means uh every",
    "start": "1887120",
    "end": "1893360"
  },
  {
    "text": "time you want to insert something you put something on the top you have to walk a tree well everything we build these days seems to be some flavor of",
    "start": "1893360",
    "end": "1899399"
  },
  {
    "text": "social network which is a five Q so put on the top read the top 20 that's what it what Twitter is it's so simple um but",
    "start": "1899399",
    "end": "1906279"
  },
  {
    "text": "my SQL is this tree structure and so it is slow and I've talked to them about it but it turns out uh Oracle uh my SQL is",
    "start": "1906279",
    "end": "1913120"
  },
  {
    "text": "built around this tree structure from the core up so it's a little hard to change but if they can get that fixed I think could be a great solution",
    "start": "1913120",
    "end": "1919240"
  },
  {
    "text": "otherwise what happens every time you insert it's slow it doesn't work very well for Mass inserts uh but reddis did",
    "start": "1919240",
    "end": "1924480"
  },
  {
    "text": "reddis actually has a true notion of an ordered list uh with an O of one insert",
    "start": "1924480",
    "end": "1929519"
  },
  {
    "text": "and it all sits in Ram so it's blazing fast uh and we use it for various caching mechanisms too it's it's very",
    "start": "1929519",
    "end": "1935559"
  },
  {
    "text": "nice for caching like if you want to store uh someone's board to the list of their pins you can make it a list of pin",
    "start": "1935559",
    "end": "1941000"
  },
  {
    "text": "IDs and you can say give me the the the second set of 50 or",
    "start": "1941000",
    "end": "1946440"
  },
  {
    "start": "1946000",
    "end": "2065000"
  },
  {
    "text": "something uh so y h base uh why after I ragged on this kind of technology did we bring it in um it's it's uh it's got a",
    "start": "1946600",
    "end": "1954840"
  },
  {
    "text": "growing population of core dedicated users and it worked fairly well uh and it's got some nice properties that we",
    "start": "1954840",
    "end": "1960799"
  },
  {
    "text": "couldn't replicate with my SQL or reddis um one big problem with redis is that it all has to fit in Ram so if we have a",
    "start": "1960799",
    "end": "1967600"
  },
  {
    "text": "really good active rate um say like uh uh it's 50% 60% better or whatever",
    "start": "1967600",
    "end": "1974399"
  },
  {
    "text": "that's still a large chunk that are not using the site and we're wasting Ram for or if we show people 500 of their feed",
    "start": "1974399",
    "end": "1980200"
  },
  {
    "text": "and we want to let it go to 10,000 can't do it uh because it only sits in Ram and it cost us a bundle um so hbas uh has",
    "start": "1980200",
    "end": "1988279"
  },
  {
    "text": "that nice notion of an actual fast insert it's an O of one a PIN to the end",
    "start": "1988279",
    "end": "1993480"
  },
  {
    "text": "massive fast writing uh system so it now supports our home feeds it's really fast",
    "start": "1993480",
    "end": "1999720"
  },
  {
    "text": "um it's difficult to hire for we had to grow our own hbas experts uh it does have nice strong",
    "start": "1999720",
    "end": "2006039"
  },
  {
    "text": "Hadoop integration so if you want to do map reduce you can link in immediately and uh the performance has",
    "start": "2006039",
    "end": "2011240"
  },
  {
    "text": "been really good big people use it like Facebook um so they've tripped over many of the problems we've had uh I'm",
    "start": "2011240",
    "end": "2016600"
  },
  {
    "text": "starting to wonder if everybody's continuing to use it I've started to hear stories that maybe they're going away from it there's questions about its",
    "start": "2016600",
    "end": "2022240"
  },
  {
    "text": "scalability uh you know the promise is that it has massive magic scalability uh and it's efficient um but I'm wondering",
    "start": "2022240",
    "end": "2029000"
  },
  {
    "text": "I'm starting to wonder if that is actually happening and and I'm wondering I want to look at look at it over the next two years and see if that promise",
    "start": "2029000",
    "end": "2034720"
  },
  {
    "text": "plays out uh the the core ideas with MySQL if we want to have a shed MySQL we",
    "start": "2034720",
    "end": "2040000"
  },
  {
    "text": "have say in number of boxes times two or maybe times three because we want backups uh that's in times three that's",
    "start": "2040000",
    "end": "2046880"
  },
  {
    "text": "pretty expensive um but for this one if you have a cyclical ring and you do all this magic sharing you can actually get it down to in theory in plus two for",
    "start": "2046880",
    "end": "2054040"
  },
  {
    "text": "backup or plus three for backup uh that sounds really cool especially as you get really big uh I but I'm wondering if the",
    "start": "2054040",
    "end": "2059599"
  },
  {
    "text": "actual promise is playing out so I'll let you know more as I find",
    "start": "2059599",
    "end": "2064760"
  },
  {
    "start": "2065000",
    "end": "2086000"
  },
  {
    "text": "out uh so we use it for user feeds Rich pin details works really well uh we put",
    "start": "2065800",
    "end": "2070960"
  },
  {
    "text": "spam features in it this thing is really operationally nice you can just make a new uh table and it flows out everywhere",
    "start": "2070960",
    "end": "2076440"
  },
  {
    "text": "so that's kind of cool so you know if the promise plays out of scalability then this is a really great system to invest in um and then we also have a",
    "start": "2076440",
    "end": "2084040"
  },
  {
    "text": "mapping of user relationships to pins so what happened to some of these Technologies and mind you this is now",
    "start": "2084040",
    "end": "2090599"
  },
  {
    "start": "2086000",
    "end": "2232000"
  },
  {
    "text": "three years old uh so many of these have matured way past what I want to use is this is more of an illustration of what",
    "start": "2090599",
    "end": "2095720"
  },
  {
    "text": "happens when you use a product that's not quite as mature as you like uh and all these Technologies failed on us",
    "start": "2095720",
    "end": "2101400"
  },
  {
    "text": "massively in one way or another um and I know that many of them have gone way past their initial spot so I'll kind of",
    "start": "2101400",
    "end": "2107480"
  },
  {
    "text": "go through some of these and answer uh what happened with them but I I won't pick on any individual one um so did",
    "start": "2107480",
    "end": "2113240"
  },
  {
    "text": "they meet your needs uh for all of these we needed either counters or search so yeah uh how mature is the product well",
    "start": "2113240",
    "end": "2120400"
  },
  {
    "text": "this was the problem uh we didn't answer this question all we had were these people coming to us saying hey use this",
    "start": "2120400",
    "end": "2125599"
  },
  {
    "text": "technology we'll scale the moon for you all your are solved signed up uh then is",
    "start": "2125599",
    "end": "2131079"
  },
  {
    "text": "it commonly used we didn't really answer that question many of them are not U mbas is a classic one uh that I think",
    "start": "2131079",
    "end": "2137599"
  },
  {
    "text": "came from Zinga and I think is now being kind of dropped under the rug now it's not commonly used and it was very hard",
    "start": "2137599",
    "end": "2143800"
  },
  {
    "text": "to find any answers certainly nobody who knew how to use it um so what I ended up with certain certain Technologies was my",
    "start": "2143800",
    "end": "2149480"
  },
  {
    "text": "cheat sheet of how to use it and I eventually published them for other people with mbas my classic favorite one was it had an error message that said",
    "start": "2149480",
    "end": "2155440"
  },
  {
    "text": "something like 07 EFA AB is opaque I don't know what that means So",
    "start": "2155440",
    "end": "2162240"
  },
  {
    "text": "eventually we had a cheat sheet of that well that means this and so this is what you get out of it um kind of kind of",
    "start": "2162240",
    "end": "2168920"
  },
  {
    "text": "dangerous at 3: a.m. uh is the community active on many of these they were not so there were zero answers for any of these",
    "start": "2168920",
    "end": "2175480"
  },
  {
    "text": "on one of them uh around 2: a.m. the thing just broke you know and there's no way to fix it uh you I added a new box",
    "start": "2175480",
    "end": "2182160"
  },
  {
    "text": "started the magic replication starts going and around 20% uh stopped okay what do you nudge there's",
    "start": "2182160",
    "end": "2188440"
  },
  {
    "text": "nothing to nudge nobody's giving you any extra tools to nudge the thing has a bug what do you do so what I did is between",
    "start": "2188440",
    "end": "2194000"
  },
  {
    "text": "2 am and 6: am. when the sun came up I got it back onto my SQL MIM cache and then problem solved uh how well does it",
    "start": "2194000",
    "end": "2200640"
  },
  {
    "text": "scale well these are that's the whole promise these are really cool uh if they would work um does it have good",
    "start": "2200640",
    "end": "2205839"
  },
  {
    "text": "debugging tools they didn't U many of these did not and there were major problems around that so you couldn't even find out what was going wrong so",
    "start": "2205839",
    "end": "2212200"
  },
  {
    "text": "you've got a problem you don't even know what the problem is and you're trying to solve it uh and they're all free so there wasn't really a problem here",
    "start": "2212200",
    "end": "2218240"
  },
  {
    "text": "uh they all had weird different many of these have different support contracts and some of them are very strange that's another thing to look at if you need",
    "start": "2218240",
    "end": "2224560"
  },
  {
    "text": "support some of these had such strange support contracts we couldn't even buy them uh it was either too expensive or",
    "start": "2224560",
    "end": "2230520"
  },
  {
    "text": "too mind-numbingly complex so if I had a second chance to rebuild all of Pinterest uh I I love",
    "start": "2230520",
    "end": "2237800"
  },
  {
    "start": "2232000",
    "end": "2331000"
  },
  {
    "text": "going through this every once in a while the first thing I would have done is put logging on day one we did it in terrible ways we had a MySQL box where we logged",
    "start": "2237800",
    "end": "2244960"
  },
  {
    "text": "MySQL is a bad place to log it's a tree who needs trees with logging um so what",
    "start": "2244960",
    "end": "2251079"
  },
  {
    "text": "I would do uh is i' put it into Kafka and make a little thing to put it into S3 problem solv then you get map reduce",
    "start": "2251079",
    "end": "2256920"
  },
  {
    "text": "on day one learn how to use map reduce there's SQL 101 it's it's easy it just takes a takes an hour um I'd also use",
    "start": "2256920",
    "end": "2265359"
  },
  {
    "text": "statsd statsd has been really good we're running into a couple of scalability issues with it just now but it's worked with us for the whole time it's from",
    "start": "2265359",
    "end": "2271480"
  },
  {
    "text": "Etsy essentially you say send a counter that way it's a UDP packet so you don't have to worry about that other system",
    "start": "2271480",
    "end": "2276599"
  },
  {
    "text": "breaking and you can send counters bumps and counters or you can decrement if you want and you can send uh timers so you",
    "start": "2276599",
    "end": "2283560"
  },
  {
    "text": "can say this process took this many milliseconds uh that's really simple to set up and really nice to have uh and",
    "start": "2283560",
    "end": "2290720"
  },
  {
    "text": "then uh uh I'd also log everything it will save you on someday where you screw up MySQL uh if you're storing all your",
    "start": "2290720",
    "end": "2297480"
  },
  {
    "text": "stuff on MySQL you corrupt your data accidentally go to your logs the data is in there from yesterday uh and you could",
    "start": "2297480",
    "end": "2303079"
  },
  {
    "text": "recover it uh you also get basic analytics about how your site's doing and recovering recovering from data",
    "start": "2303079",
    "end": "2308480"
  },
  {
    "text": "corruption the other one I would bring up is uh nagios or some kind of alerting on day one mun or well is it mun Monet",
    "start": "2308480",
    "end": "2314839"
  },
  {
    "text": "Monet or nagios one of these on day one because even though it's designed to wake you up when there's a problem it will get you sleep uh in the early days",
    "start": "2314839",
    "end": "2321319"
  },
  {
    "text": "one of our Founders would wake up every hour in the Middle of the Night Roll Over check Pinterest good it's up go down go back to sleep um so when I",
    "start": "2321319",
    "end": "2327880"
  },
  {
    "text": "brought it up on the first day he was like Marty I can sleep again I started losing sleep now because",
    "start": "2327880",
    "end": "2333520"
  },
  {
    "start": "2331000",
    "end": "2539000"
  },
  {
    "text": "it started waking me up uh other things I would have done we we started around",
    "start": "2333520",
    "end": "2338960"
  },
  {
    "text": "we started in September on that graph when everything was already hot so when you want decide to make uh to shift to",
    "start": "2338960",
    "end": "2345280"
  },
  {
    "text": "the sharting approach you've got the problem that you already have a site you have to maintain you're trying to build",
    "start": "2345280",
    "end": "2350599"
  },
  {
    "text": "this new thing and you're trying to transfer data off so you're trying to take a little extra load from that thing and put it over here uh so that was a",
    "start": "2350599",
    "end": "2356720"
  },
  {
    "text": "nightmare um I wish we had done it earlier it's a little hard to know when but uh but my one little hint to you is",
    "start": "2356720",
    "end": "2362400"
  },
  {
    "text": "um typically what happens with any database especially if you're using MySQL is the first thing you do is say you have a pins in a follower table you",
    "start": "2362400",
    "end": "2368920"
  },
  {
    "text": "take the follower table put it on that box oh you have double capacity now great well that's only going to last for so long so the typical thing you do next",
    "start": "2368920",
    "end": "2375400"
  },
  {
    "text": "is you start making read slaves and you make more read slaves and you make more readed slaves the moment you make your first readed slave that's the hint you",
    "start": "2375400",
    "end": "2381440"
  },
  {
    "text": "should be looking at charting right away in fact the time bomb has already started um the problem with read slaves",
    "start": "2381440",
    "end": "2386640"
  },
  {
    "text": "there's many of them one of the biggest most irritating things is that they make these weird subtle bugs uh you put new",
    "start": "2386640",
    "end": "2392839"
  },
  {
    "text": "thing in my SQL you clear the cache and somebody else reads before you actually um you know replicate the data down to",
    "start": "2392839",
    "end": "2398520"
  },
  {
    "text": "your weed slav problems pain in the butt um the moment you start thinking you need to do that that's when you should",
    "start": "2398520",
    "end": "2404040"
  },
  {
    "text": "be looking at a starting solution um email me we'll we'll party um we also kind of fell into that",
    "start": "2404040",
    "end": "2411520"
  },
  {
    "text": "no SQL trap uh because of the problems we were in everything was on fire uh I",
    "start": "2411520",
    "end": "2416720"
  },
  {
    "text": "would I would watch that closely uh I think you may want to consider uh uh",
    "start": "2416720",
    "end": "2422119"
  },
  {
    "text": "many of the things I've been hearing from companies it's actually the flip you would think that no Sig would be good in the early days because it solves your operational hassle for you uh turns",
    "start": "2422119",
    "end": "2428720"
  },
  {
    "text": "out many companies uh the time when you can actually support a no SQL they get kind of excited hey we can have a few",
    "start": "2428720",
    "end": "2434680"
  },
  {
    "text": "Engineers who can actually support hbas um and we can use the that technology for its uh its good properties um in the",
    "start": "2434680",
    "end": "2442040"
  },
  {
    "text": "early days when you have two and three Engineers I say stick with what's simple stick with what will work stick with what will be fixable at 3:00 a.m. when",
    "start": "2442040",
    "end": "2448200"
  },
  {
    "text": "the thing's broken uh we also used uh a lot of weird Technologies for background task",
    "start": "2448200",
    "end": "2453440"
  },
  {
    "text": "processing there's uh rabbit mq classic clusterable technology where you put something on one end and it comes out",
    "start": "2453440",
    "end": "2459440"
  },
  {
    "text": "the other way too complex didn't scale with us we eventually went to pyz which is just a collection of boxes that feed",
    "start": "2459440",
    "end": "2465880"
  },
  {
    "text": "from redus and we learned that redis works very very well so redus is a giant feed put stuff on the top you say I want",
    "start": "2465880",
    "end": "2471359"
  },
  {
    "text": "to run this task see a python processes takes one runs it couldn't be simpler that simplified everything we had the",
    "start": "2471359",
    "end": "2477240"
  },
  {
    "text": "other thing I would recommend is in the early days we also just had one funnel of all tasks that's dumb you should",
    "start": "2477240",
    "end": "2483200"
  },
  {
    "text": "split it out into the important task and the unimportant task maybe even prioritize so one example is if we want",
    "start": "2483200",
    "end": "2489240"
  },
  {
    "text": "to create a new PIN uh and we will have a couple tasks for making new images we need to do that now uh but if we need to",
    "start": "2489240",
    "end": "2495119"
  },
  {
    "text": "send out tweets that can wait uh in fact that could even wait an hour uh you know if the other things are broken you want to make sure the high uh things work now",
    "start": "2495119",
    "end": "2503880"
  },
  {
    "text": "um I wish we had hired a technical operations person earlier the moment that guy came in and started doing the",
    "start": "2503880",
    "end": "2509040"
  },
  {
    "text": "chef and puppet steps where you puppetize everything so you can bring up a box by pushing a few buttons that made everything a lot easier we used to have",
    "start": "2509040",
    "end": "2515000"
  },
  {
    "text": "these what I called Apollo 13 checklists because what could go wrong uh and you'd go down the steps to bring up a MySQL",
    "start": "2515000",
    "end": "2521119"
  },
  {
    "text": "box and hopefully you got them all uh but it would also take a while so puppet made it so that all of our boxes could",
    "start": "2521119",
    "end": "2527040"
  },
  {
    "text": "come up pretty fast if we needed to change one property across all of them they would magically go across all of them so it gave us scalability I wish we",
    "start": "2527040",
    "end": "2533240"
  },
  {
    "text": "had done it earlier uh un unit testing might have been also a really good choice earlier rather than just kind of",
    "start": "2533240",
    "end": "2538400"
  },
  {
    "text": "hoping for the best uh and finally uh AB testing is something I wish we had brought in",
    "start": "2538400",
    "end": "2543599"
  },
  {
    "start": "2539000",
    "end": "2586000"
  },
  {
    "text": "earlier uh it's very easy to add on what we now call a decider you can build one in a day a symbol version basically what",
    "start": "2543599",
    "end": "2550640"
  },
  {
    "text": "it allows you to do is say um you you have a whole list of different kinds of properties experiments uh or or whatever",
    "start": "2550640",
    "end": "2557520"
  },
  {
    "text": "you want and you have a little uh drag uh little slider so you could say this brand new thing I'm bringing in I want",
    "start": "2557520",
    "end": "2563119"
  },
  {
    "text": "it to bring it up to 5% okay it works now 10% okay it works now 100% or if something if a non-critical system is",
    "start": "2563119",
    "end": "2569359"
  },
  {
    "text": "broken you have kill switches so you can turn it off instantly so you can build the system you can make a little simple wrap around it I may even have it open",
    "start": "2569359",
    "end": "2575760"
  },
  {
    "text": "source I'm not sure and then the idea is that it's in my SQL it goes up to mimc and you say should I show this or not",
    "start": "2575760",
    "end": "2581359"
  },
  {
    "text": "and it gives you a little gives you a little routing uh inside your code really convenient uh last thing looking forward",
    "start": "2581359",
    "end": "2588240"
  },
  {
    "start": "2586000",
    "end": "2622000"
  },
  {
    "text": "we're now growing to Beyond 400 people uh we're now hitting things like how do we live virtually how do we uh how do we",
    "start": "2588240",
    "end": "2595480"
  },
  {
    "text": "build out the next big thing how do we get faster essentially how do we build more Legos so that the uh we can build product twice as fast and twice as good",
    "start": "2595480",
    "end": "2603200"
  },
  {
    "text": "um that's kind of our our current challenge so if we can get that funnel going really fast if we can have 400",
    "start": "2603200",
    "end": "2608559"
  },
  {
    "text": "experiments going at once instead of say 100 that gives us a lot more opportunity to see the next 5% and if we can keep",
    "start": "2608559",
    "end": "2614200"
  },
  {
    "text": "layering on those 5% we'll go to the Moon um and then in continuing to improve our collaboration is very",
    "start": "2614200",
    "end": "2619599"
  },
  {
    "text": "important because as we get bigger collaboration gets harder uh and my final little thing to you is just uh have fun with this thing uh culture is a",
    "start": "2619599",
    "end": "2626599"
  },
  {
    "start": "2622000",
    "end": "2752000"
  },
  {
    "text": "big issue uh in many companies there's many that have failed uh due to uh toxic culture they built and I felt found that",
    "start": "2626599",
    "end": "2632960"
  },
  {
    "text": "uh in the beginning if you make the culture fun people like to come there they like to spend their daylight hours with you and they like to have fun",
    "start": "2632960",
    "end": "2638040"
  },
  {
    "text": "building things with you um so if you're building a new startup kind of focus on that if you can make sure that your",
    "start": "2638040",
    "end": "2643640"
  },
  {
    "text": "people are having fun because this damn things struggle hard enough um so so no",
    "start": "2643640",
    "end": "2649200"
  },
  {
    "text": "seriously have fun take that heart are there any questions",
    "start": "2649200",
    "end": "2655558"
  },
  {
    "text": "uh zookeeper um yeah yes oh thank you um so the question",
    "start": "2667960",
    "end": "2674160"
  },
  {
    "text": "is uh there's a different Technologies my SQL simpler in complexity and there's Cassandra is much more complex what",
    "start": "2674160",
    "end": "2680480"
  },
  {
    "text": "about something like zookeeper so zookeeper is built on a paxos is thing I don't think it's actually true paxos for",
    "start": "2680480",
    "end": "2687040"
  },
  {
    "text": "getting to consensus um and uh I actually I I wonder if it was the right choice uh it seems to be working well",
    "start": "2687040",
    "end": "2693200"
  },
  {
    "text": "but it's gone through a lot of hassle uh we use it primarily for configuration management so which boxes live where and",
    "start": "2693200",
    "end": "2699280"
  },
  {
    "text": "Pub sub and this kind of thing I wonder if redus might have been a better choice uh you know close enough eventual consistency this thing will tell you the",
    "start": "2699280",
    "end": "2705640"
  },
  {
    "text": "moment everything is is um the same but you lose you get split brain problems you get all these other problems so if",
    "start": "2705640",
    "end": "2711559"
  },
  {
    "text": "you're going through the exact same thing for configuration management I think that'd be a very good question to ask uh I know we've had our hassles with",
    "start": "2711559",
    "end": "2716800"
  },
  {
    "text": "zookeeper but at the moment it seems to be working um uh I wonder if something like redus or just storing in an S3",
    "start": "2716800",
    "end": "2723079"
  },
  {
    "text": "might be fine uh you can do some kind of a pub subby kind of thing there or some kind of simple",
    "start": "2723079",
    "end": "2729319"
  },
  {
    "text": "polling more questions cool um so if anybody's interested I can uh go out here and talk",
    "start": "2730160",
    "end": "2736040"
  },
  {
    "text": "about charting if you want to get more into the nitty-gritty or any other questions you have thank you",
    "start": "2736040",
    "end": "2741440"
  },
  {
    "text": "[Applause]",
    "start": "2741440",
    "end": "2749440"
  }
]