[
  {
    "start": "0",
    "end": "83000"
  },
  {
    "text": "[Music]",
    "start": "990",
    "end": "7859"
  },
  {
    "text": "thanks everyone for joining my name is Andy Cirillo I come to you from",
    "start": "12559",
    "end": "17940"
  },
  {
    "text": "convergent media we're a adtech Mar tech data company and today I",
    "start": "17940",
    "end": "26279"
  },
  {
    "text": "wanted to talk about a subject that at least before today I felt was not",
    "start": "26279",
    "end": "31710"
  },
  {
    "text": "getting talked about enough what but was becoming more and more important turns",
    "start": "31710",
    "end": "39270"
  },
  {
    "text": "out when I showed up today that there is at least two maybe three other talks on a similar subject so I think that's very",
    "start": "39270",
    "end": "46020"
  },
  {
    "text": "encouraging in fact there's even a company has been built around some of",
    "start": "46020",
    "end": "51449"
  },
  {
    "text": "the things I'm going to talk about or helping companies do some of the things that I talked about so it's very",
    "start": "51449",
    "end": "56520"
  },
  {
    "text": "exciting and you know I'm very excited to see that you know I think some of this is is is really taking hold",
    "start": "56520",
    "end": "63210"
  },
  {
    "text": "so data-driven engineering or how I learned to stop worrying and love",
    "start": "63210",
    "end": "68330"
  },
  {
    "text": "testing in production so what am I talking about",
    "start": "68330",
    "end": "73640"
  },
  {
    "text": "and what is my thing okay alright just",
    "start": "73640",
    "end": "80700"
  },
  {
    "text": "do it like that alright what is a data-driven engineering so it is the",
    "start": "80700",
    "end": "88740"
  },
  {
    "start": "83000",
    "end": "108000"
  },
  {
    "text": "engineers using data produced by production systems in a disciplined and methodical manner to guide the",
    "start": "88740",
    "end": "95340"
  },
  {
    "text": "development of new software that means using things like scientific method",
    "start": "95340",
    "end": "100400"
  },
  {
    "text": "formal experimentation and statistical analysis clarify some things that I'm",
    "start": "100400",
    "end": "111149"
  },
  {
    "start": "108000",
    "end": "193000"
  },
  {
    "text": "not quite talking about so I'm not talking about data science although that's a very important related field",
    "start": "111149",
    "end": "116640"
  },
  {
    "text": "I'm not talking about data engineering I am NOT a data engineer myself but I consume the output of data engineers",
    "start": "116640",
    "end": "124350"
  },
  {
    "text": "and very heavily reliant on it and when I was putting this talk together",
    "start": "124350",
    "end": "129869"
  },
  {
    "text": "actually I debated with myself for quite some time about whether this thing",
    "start": "129869",
    "end": "135390"
  },
  {
    "text": "called data-driven product management that is a thing I was debating whether",
    "start": "135390",
    "end": "143250"
  },
  {
    "text": "what I was about talking about was an extension and enhancement of data-driven product management or a different thing",
    "start": "143250",
    "end": "150140"
  },
  {
    "text": "I ultimately decided to call it a separate thing but this is also very",
    "start": "150140",
    "end": "155540"
  },
  {
    "text": "closely related and interesting field if if you find today's talk interesting you",
    "start": "155540",
    "end": "162810"
  },
  {
    "text": "might want to look into that as well data-driven product management is is is kind of the I'm going to grossly",
    "start": "162810",
    "end": "170010"
  },
  {
    "text": "oversimplify it here but it kind of the idea of rolling out you know two different versions of your website and a",
    "start": "170010",
    "end": "176670"
  },
  {
    "text": "B testing or testing control testing them to get a more formal way of getting",
    "start": "176670",
    "end": "181769"
  },
  {
    "text": "a user feedback so what I am here to talk about is software engineers using",
    "start": "181769",
    "end": "187530"
  },
  {
    "text": "data to do their own jobs better and",
    "start": "187530",
    "end": "192950"
  },
  {
    "start": "193000",
    "end": "524000"
  },
  {
    "text": "I'll get into what that means a bit in a minute and some reason this is we're",
    "start": "193130",
    "end": "200790"
  },
  {
    "text": "enduring all wrong what happened there",
    "start": "200790",
    "end": "206209"
  },
  {
    "text": "there we go",
    "start": "206209",
    "end": "209480"
  },
  {
    "text": "all right so why now the main reason is that we're starting to see a lot more",
    "start": "211549",
    "end": "217650"
  },
  {
    "text": "systems that look like like this or systems in scenarios so I'm willing to",
    "start": "217650",
    "end": "224040"
  },
  {
    "text": "bet that at least some of you are working on systems that have hundreds of",
    "start": "224040",
    "end": "229079"
  },
  {
    "text": "thousands of users ICS show of hands how",
    "start": "229079",
    "end": "234870"
  },
  {
    "text": "many people have hundreds of thousands of users how many feel that I have millions of users okay so a decade ago",
    "start": "234870",
    "end": "242639"
  },
  {
    "text": "two decades ago I mean that was that was extremely rare now it's becoming very common that developers are working on",
    "start": "242639",
    "end": "249000"
  },
  {
    "text": "these systems that are you know have you know millions of people using them what",
    "start": "249000",
    "end": "255269"
  },
  {
    "text": "goes along with that is that these are built on very large scale server farms",
    "start": "255269",
    "end": "261239"
  },
  {
    "text": "distributed systems and you get you know complexities associated with that and benefits thing I'm calling out they'll",
    "start": "261239",
    "end": "269310"
  },
  {
    "text": "become important later on is that you're running your code on lots and lots of identical systems so you have lots and",
    "start": "269310",
    "end": "275610"
  },
  {
    "text": "lots of servers that are running you know more or less the same code the other thing is we have the tools the",
    "start": "275610",
    "end": "282240"
  },
  {
    "text": "infrastructure and you know the motivation to collect to store to query",
    "start": "282240",
    "end": "288900"
  },
  {
    "text": "to analyze massive amounts of log data event oriented log data that's coming",
    "start": "288900",
    "end": "295710"
  },
  {
    "text": "out of these systems and everyone is interested in this data so in other",
    "start": "295710",
    "end": "302280"
  },
  {
    "text": "words we are building these systems around data we are providing data to our",
    "start": "302280",
    "end": "309590"
  },
  {
    "text": "stakeholders as part of the product that we're building and it is things that",
    "start": "309590",
    "end": "318509"
  },
  {
    "text": "used to be fairly specialized you know when I started out a data warehouse was something that you know insurance",
    "start": "318509",
    "end": "324539"
  },
  {
    "text": "companies had for example or you know maybe maybe a credit card company but",
    "start": "324539",
    "end": "331080"
  },
  {
    "text": "now pretty much everyone has a data warehouse or either they have one or they're in the process of building one",
    "start": "331080",
    "end": "336810"
  },
  {
    "text": "so it's become very common if you're running in a cloud provider for example",
    "start": "336810",
    "end": "342570"
  },
  {
    "text": "you you practically get this this stuff for free so to get a little more into",
    "start": "342570",
    "end": "349650"
  },
  {
    "text": "specifics of the kinds of systems that I'm talking about we're building systems",
    "start": "349650",
    "end": "355979"
  },
  {
    "text": "that have structured log formats so data warehouses need structured logs using",
    "start": "355979",
    "end": "362159"
  },
  {
    "text": "formats it could be comma separated values could we use for conversing we use Apache Avro",
    "start": "362159",
    "end": "368129"
  },
  {
    "text": "which is a just a nice convenience it's a schema oriented log format I do want",
    "start": "368129",
    "end": "375629"
  },
  {
    "text": "to clarify I'm not talking about debug logs so we're not talking about log4j",
    "start": "375629",
    "end": "381419"
  },
  {
    "text": "we're not talking about us the left 4j yeah you know that sort of thing we're talking about typically you are logging",
    "start": "381419",
    "end": "389879"
  },
  {
    "text": "the requests that come in and some information about the response that you",
    "start": "389879",
    "end": "395639"
  },
  {
    "text": "send another way of putting that is its events event oriented some details about",
    "start": "395639",
    "end": "404699"
  },
  {
    "text": "the infrastructure that I'm talking about you might be using Kafka you might be using flume on the data warehouse",
    "start": "404699",
    "end": "411150"
  },
  {
    "text": "side you might be using a relational database you may be using a Hadoop you",
    "start": "411150",
    "end": "417659"
  },
  {
    "text": "might be using a formal data warehouse now the the last ingredient that will",
    "start": "417659",
    "end": "424529"
  },
  {
    "text": "you know become important later on is this notion of a partial production",
    "start": "424529",
    "end": "431039"
  },
  {
    "text": "deployment so when I when I said that you know it's interesting that we're running our code on the lots and lots of",
    "start": "431039",
    "end": "438120"
  },
  {
    "text": "identical servers one of the things that this opens us up to is that that",
    "start": "438120",
    "end": "444300"
  },
  {
    "text": "production deployment is not an atomic thing it's something that you know it's",
    "start": "444300",
    "end": "451139"
  },
  {
    "text": "done if you do it one server at a time could take you know several minutes up to several hours to complete so I mean",
    "start": "451139",
    "end": "460349"
  },
  {
    "text": "the systems that we work on take you know three hours if you're lucky to get through the entire server farm to deploy",
    "start": "460349",
    "end": "468180"
  },
  {
    "text": "so obviously in order to do that we need to quite a lot of infrastructure you",
    "start": "468180",
    "end": "473490"
  },
  {
    "text": "know we need continuous integration we need continuous deployment we need deployment code we need systems to",
    "start": "473490",
    "end": "480630"
  },
  {
    "text": "manage and monitor the deployments and we also have a notion of a partial",
    "start": "480630",
    "end": "487560"
  },
  {
    "text": "deployment so I'm gonna structure this",
    "start": "487560",
    "end": "494190"
  },
  {
    "text": "talk into two main parts and the the first one is going to be some pragmatic",
    "start": "494190",
    "end": "500760"
  },
  {
    "text": "things that I think everyone should should think about doing right now if",
    "start": "500760",
    "end": "506190"
  },
  {
    "text": "you're not doing it fairly low hanging fruit you know to put it that way and",
    "start": "506190",
    "end": "513210"
  },
  {
    "text": "then the second part of me to get into more advanced and you know kind of uh maybe sci-fi issue scenarios but some",
    "start": "513210",
    "end": "520140"
  },
  {
    "text": "things that we do actually practice at conversion time that I think it's very exciting so part one testing in",
    "start": "520140",
    "end": "528300"
  },
  {
    "start": "524000",
    "end": "548000"
  },
  {
    "text": "production from the the title of the talk who here thinks that this is a",
    "start": "528300",
    "end": "535190"
  },
  {
    "text": "scary thing all right good if again we",
    "start": "535190",
    "end": "540779"
  },
  {
    "text": "have some brave volunteers some of you might think I'm completely nuts to even",
    "start": "540779",
    "end": "546060"
  },
  {
    "text": "be suggesting this but to explain why I think this is an important concept let's",
    "start": "546060",
    "end": "553890"
  },
  {
    "start": "548000",
    "end": "734000"
  },
  {
    "text": "say let's am i walking through a scenario this is a test scenario that I grabbed off of Wikipedia was literally",
    "start": "553890",
    "end": "561030"
  },
  {
    "text": "the very first thing that I found cuz I'm I'm terrible at coming up with with fake scenarios but I'm good at stealing",
    "start": "561030",
    "end": "568200"
  },
  {
    "text": "it so Wikipedia I'm one of their pages had this this as an example of a test",
    "start": "568200",
    "end": "573270"
  },
  {
    "text": "scenario nothing here is really specific to gherkin but I'm using the gherkin",
    "start": "573270",
    "end": "578460"
  },
  {
    "text": "syntax because I think it makes you know some of what I'm gonna talk about very obvious so scenario is refunded items",
    "start": "578460",
    "end": "584910"
  },
  {
    "text": "should be returned to stock given that a customer previously bought a black",
    "start": "584910",
    "end": "590430"
  },
  {
    "text": "sweater from me and I have three black sweaters in stock when they return the black sweater for Reta refund to then I",
    "start": "590430",
    "end": "596970"
  },
  {
    "text": "should have four black sweaters in stock it's a pretty typical unit test it's a",
    "start": "596970",
    "end": "604230"
  },
  {
    "text": "you know very respectable you know I write Lots unit tests like this you know works perfectly well",
    "start": "604230",
    "end": "610920"
  },
  {
    "text": "it is however limited as are you know",
    "start": "610920",
    "end": "616140"
  },
  {
    "text": "pretty much all tests because it doesn't really describe what the business owner",
    "start": "616140",
    "end": "622370"
  },
  {
    "text": "meant so it's describing a test that you",
    "start": "622370",
    "end": "627899"
  },
  {
    "text": "can run but the requirement is really not that only black sweaters have this",
    "start": "627899",
    "end": "635579"
  },
  {
    "text": "behavior right and they certainly didn't mean that this rule only applies between",
    "start": "635579",
    "end": "640860"
  },
  {
    "text": "three items and four items so in the",
    "start": "640860",
    "end": "647970"
  },
  {
    "text": "second half I've written something a little closer to what I think the users or stakeholders meant if we're going to",
    "start": "647970",
    "end": "654450"
  },
  {
    "text": "talk about requirements instead of tests something Oh closer to for all customers",
    "start": "654450",
    "end": "660540"
  },
  {
    "text": "four items and times given that the customer bought the item at time T N and",
    "start": "660540",
    "end": "668910"
  },
  {
    "text": "I have X of those items in stock at TM when they returned for a refund at time T M then I should have X plus one of",
    "start": "668910",
    "end": "676980"
  },
  {
    "text": "those items in stock that's what they meant if anyone is familiar with first",
    "start": "676980",
    "end": "685410"
  },
  {
    "text": "order logic you might recognize that there's a distinction here between",
    "start": "685410",
    "end": "691160"
  },
  {
    "text": "existentially quantifying and universally quantifying so that the",
    "start": "691160",
    "end": "696240"
  },
  {
    "text": "first one would most likely be interpreted as existentially quantified but what was really of interest was the",
    "start": "696240",
    "end": "703640"
  },
  {
    "text": "universal quantification right so",
    "start": "703640",
    "end": "709610"
  },
  {
    "text": "there's really no need to get depressed by this you know as I said this is a this is a great unit test nothing wrong",
    "start": "709610",
    "end": "715709"
  },
  {
    "text": "with it perfectly good because the second one is not something that you can typically execute right it's impossible",
    "start": "715709",
    "end": "727500"
  },
  {
    "text": "because it doesn't specify enough it's it's descriptive but it's not it's not executable so you know one way that I I",
    "start": "727500",
    "end": "738380"
  },
  {
    "start": "734000",
    "end": "881000"
  },
  {
    "text": "like to look at this is I like to think of tests in terms of doing two functions",
    "start": "738380",
    "end": "744260"
  },
  {
    "text": "one part of the tests is I'm gonna call the driver code and the other part of",
    "start": "744260",
    "end": "750440"
  },
  {
    "text": "the test is or the other function of the test is the assertion code so the driver",
    "start": "750440",
    "end": "755930"
  },
  {
    "text": "code is what creates the scenario and sort of exercises the system runs the code that you know needs to be run",
    "start": "755930",
    "end": "763490"
  },
  {
    "text": "then the assertion code just tests to see whether you know the appropriate",
    "start": "763490",
    "end": "768620"
  },
  {
    "text": "rule will supply and the reason why I think that's an important distinction to make is because in practice the",
    "start": "768620",
    "end": "775070"
  },
  {
    "text": "assertions or a notion of complete assertions like if you can imagine writing assertions that cover all the",
    "start": "775070",
    "end": "782150"
  },
  {
    "text": "rules and expectations of the system perfectly and that's actually relatively achievable it's it's not impossible to",
    "start": "782150",
    "end": "789020"
  },
  {
    "text": "imagine accurately capturing all the the requirements if you allow yourself to",
    "start": "789020",
    "end": "795860"
  },
  {
    "text": "use you know Universal quantification the driver part of it however is not so",
    "start": "795860",
    "end": "802250"
  },
  {
    "text": "easy and in fact is in most interesting case is going to be mathematically impossible because there are for all",
    "start": "802250",
    "end": "809780"
  },
  {
    "text": "practical purposes an infinite number of possible inputs and writing a test that",
    "start": "809780",
    "end": "817070"
  },
  {
    "text": "covers every single one of them is is not you know it's not something you can",
    "start": "817070",
    "end": "822950"
  },
  {
    "text": "actually do you can think of this is somewhat analogous to the famous halting",
    "start": "822950",
    "end": "828620"
  },
  {
    "text": "problem right so a halting problem is you know if you think about its stream",
    "start": "828620",
    "end": "835010"
  },
  {
    "text": "lis easy to define all right it's does",
    "start": "835010",
    "end": "840620"
  },
  {
    "text": "this program terminate or if I was going",
    "start": "840620",
    "end": "845900"
  },
  {
    "text": "to write this as an assertion you know this program must terminate but as we",
    "start": "845900",
    "end": "851330"
  },
  {
    "text": "all know that's impossible you know in general to proof it's very similar case",
    "start": "851330",
    "end": "859250"
  },
  {
    "text": "here so you can write your assertions pretty tersely and get pretty accurate",
    "start": "859250",
    "end": "867070"
  },
  {
    "text": "results with that we're testing is difficult is in coming up with the",
    "start": "867070",
    "end": "873170"
  },
  {
    "text": "scenarios to sort of exercise that the the X essential parts of it so what we're",
    "start": "873170",
    "end": "881809"
  },
  {
    "start": "881000",
    "end": "1167000"
  },
  {
    "text": "gonna do in testing and production is we're gonna take advantage of that we're",
    "start": "881809",
    "end": "887359"
  },
  {
    "text": "gonna take advantage of that notion that the assertions are relatively easy driving is relatively hard and we're",
    "start": "887359",
    "end": "893929"
  },
  {
    "text": "going to split the test into the driver code in the assertion code and since this is a system that is generating",
    "start": "893929",
    "end": "902269"
  },
  {
    "text": "event logs or event logging is a very fundamental part of this we're gonna try",
    "start": "902269",
    "end": "909799"
  },
  {
    "text": "to write those assertions against the log output instead of writing them in ways that use you know the internal",
    "start": "909799",
    "end": "916639"
  },
  {
    "text": "state of the system or use you know other other factors we're a discipline",
    "start": "916639",
    "end": "921859"
  },
  {
    "text": "ourselves and we're going to redditors write as many assertions as we can that can be written this way against the log",
    "start": "921859",
    "end": "927799"
  },
  {
    "text": "output and then once you've done that you find that you can you know keep the",
    "start": "927799",
    "end": "935359"
  },
  {
    "text": "same driver code that you've got and in writing your unit tests and run that in QA but then run the assertions now is a",
    "start": "935359",
    "end": "942619"
  },
  {
    "text": "query against the the QA systems log output and if you do it this way you",
    "start": "942619",
    "end": "951829"
  },
  {
    "text": "find that you can actually run the same tests in production that you do in your QA system you know because it's doing",
    "start": "951829",
    "end": "958129"
  },
  {
    "text": "the same thing it's just reading a log output these tests don't necessarily need to know anything about what",
    "start": "958129",
    "end": "963919"
  },
  {
    "text": "scenario was used to set it up all that they need to know is that you know for",
    "start": "963919",
    "end": "971059"
  },
  {
    "text": "every returned purchase the store count needs to be decremented there's an you",
    "start": "971059",
    "end": "978349"
  },
  {
    "text": "know an analogue to this requirement which is that after every purchase the store count should should increment I",
    "start": "978349",
    "end": "984459"
  },
  {
    "text": "think it's kind of hard to think about those separately but let's apply that to",
    "start": "984459",
    "end": "989959"
  },
  {
    "text": "this this example and see how we would do that so we're going to need to add a couple things to the log we're going to",
    "start": "989959",
    "end": "996649"
  },
  {
    "text": "add SKU so if SKU wasn't to you know in there already we're gonna need to add it looks like it was there already and",
    "start": "996649",
    "end": "1003489"
  },
  {
    "text": "we're gonna need to add the store count so the store count is the current value of",
    "start": "1003489",
    "end": "1009390"
  },
  {
    "text": "at particular items count in the",
    "start": "1009390",
    "end": "1015120"
  },
  {
    "text": "internal system but if you're you know",
    "start": "1015120",
    "end": "1020880"
  },
  {
    "text": "if you're used to this kind of system that's it's highly likely that your billing department isn't running off of",
    "start": "1020880",
    "end": "1027510"
  },
  {
    "text": "your your internal representation of store they're probably aggregating the",
    "start": "1027510",
    "end": "1033089"
  },
  {
    "text": "logs and maintaining their records that way so it's it's a good chance that this information is already in your logs all",
    "start": "1033089",
    "end": "1042209"
  },
  {
    "text": "right so then with every purchase and with every return we are going to log the current value of the store we're",
    "start": "1042209",
    "end": "1050400"
  },
  {
    "text": "going to do as I said and we're gonna split the tests into drivers and assertions queries take the place of the",
    "start": "1050400",
    "end": "1056180"
  },
  {
    "text": "assertions that would otherwise be in otherwise automated tests and you run",
    "start": "1056180",
    "end": "1062700"
  },
  {
    "text": "this against your QA database your production database or production logs or data warehouse and you get a pretty",
    "start": "1062700",
    "end": "1070980"
  },
  {
    "text": "good answer in fact you get a much better answer than you did with that you",
    "start": "1070980",
    "end": "1076350"
  },
  {
    "text": "know more procedural unit tests that that you would have written otherwise and you get coverage for all you know",
    "start": "1076350",
    "end": "1087120"
  },
  {
    "text": "different combinations of events it doesn't matter whether it does not only looking at three to four it's not only",
    "start": "1087120",
    "end": "1092280"
  },
  {
    "text": "looking at you know particular time stamps or whatever and you'll get you'll get output like this you know so I'll",
    "start": "1092280",
    "end": "1099030"
  },
  {
    "text": "just run through a little bit of the code that I've written here I'm running",
    "start": "1099030",
    "end": "1104790"
  },
  {
    "text": "this against the log output I'm doing a case if it's a purchase I do negative",
    "start": "1104790",
    "end": "1110100"
  },
  {
    "text": "one meaning that it should decrement the count if it's a return I do one that",
    "start": "1110100",
    "end": "1115500"
  },
  {
    "text": "should Ekrem at the increment account all the other things should have no effect on the on the count I'm gonna",
    "start": "1115500",
    "end": "1121530"
  },
  {
    "text": "take a look at logs from the start of the day I'm still gonna filter it",
    "start": "1121530",
    "end": "1127500"
  },
  {
    "text": "against only black sweaters for now we'll get to that in a little bit and and order it by timestamp and you know",
    "start": "1127500",
    "end": "1134850"
  },
  {
    "text": "it doesn't really matter whether you're gonna do this entirely in sequel or you're gonna do this you know in in separate code Java code or Witter",
    "start": "1134850",
    "end": "1142300"
  },
  {
    "text": "or Python or whatever but you can see it's pretty easy now all I need to do is look at all of this and compare the expected effect to you",
    "start": "1142300",
    "end": "1151300"
  },
  {
    "text": "know the next value so if I use if I have 100 and I'm decrementing the next value should be 99 no easy peasy",
    "start": "1151300",
    "end": "1160890"
  },
  {
    "text": "when you run this in production it works exactly the same as when you're in QA",
    "start": "1161490",
    "end": "1166900"
  },
  {
    "text": "alright so at this point I want to you know address this statement because I'm",
    "start": "1166900",
    "end": "1172330"
  },
  {
    "start": "1167000",
    "end": "1194000"
  },
  {
    "text": "sure somebody's thinking it call it the elephant in the room or whatever and",
    "start": "1172330",
    "end": "1177790"
  },
  {
    "text": "I've heard versions of this so I don't test my code in production because I have unit tests my unit tests tell me",
    "start": "1177790",
    "end": "1183670"
  },
  {
    "text": "whether it works or not there's no need to run the test in production and if you're testing in production that's",
    "start": "1183670",
    "end": "1189310"
  },
  {
    "text": "that's a bad thing I said know a thing anyway right I want to address that why should",
    "start": "1189310",
    "end": "1198130"
  },
  {
    "start": "1194000",
    "end": "1492000"
  },
  {
    "text": "you test in production top six reasons I started with five but then I thought it one more that's why it six you don't",
    "start": "1198130",
    "end": "1206320"
  },
  {
    "text": "know all the scenarios so we've already established you can't test all the scenarios but I think the",
    "start": "1206320",
    "end": "1212890"
  },
  {
    "text": "situation is actually a bit worse than that and I'm gonna suggest you don't even know all of the important scenarios",
    "start": "1212890",
    "end": "1220620"
  },
  {
    "text": "we're actually terrible at this we're very good at you know thinking happy thoughts we're way too optimistic you",
    "start": "1220620",
    "end": "1227590"
  },
  {
    "text": "know we like to daydream about how our you know company's IPO is going to make us instant millionaires we're much worse",
    "start": "1227590",
    "end": "1234220"
  },
  {
    "text": "about thinking about all the things that are gonna go wrong so it requires a",
    "start": "1234220",
    "end": "1240340"
  },
  {
    "text": "certain kind of imagination and it requires a lot of imagination to guess the things that are gonna go wrong we do",
    "start": "1240340",
    "end": "1248110"
  },
  {
    "text": "put assertions in our code we do put you know tests in our code but you know we we tended not to break those tests",
    "start": "1248110",
    "end": "1255130"
  },
  {
    "text": "because if we thought to write a test for it we were also thinking about that",
    "start": "1255130",
    "end": "1260290"
  },
  {
    "text": "when we wrote the code what we really need to captures the things that we didn't think of right so second reason",
    "start": "1260290",
    "end": "1268930"
  },
  {
    "text": "you you know basically we just said your imagination sucks you spend too much time thinking happy",
    "start": "1268930",
    "end": "1274750"
  },
  {
    "text": "thoughts something I hear you know every once in a while is well product manager",
    "start": "1274750",
    "end": "1280240"
  },
  {
    "text": "didn't tell me I needed to cover that case while your product managers and imagination is not really gonna be any",
    "start": "1280240",
    "end": "1285640"
  },
  {
    "text": "better than yours in fact it's probably worse don't blame it on the product manager for threes and things can change",
    "start": "1285640",
    "end": "1295110"
  },
  {
    "text": "so scenarios that didn't come up before have a tendency to suddenly happen",
    "start": "1295110",
    "end": "1301179"
  },
  {
    "text": "unannounced and it's good to be able to run your tests against production data",
    "start": "1301179",
    "end": "1309720"
  },
  {
    "text": "even you know days or weeks or months after you may have deployed the code you",
    "start": "1309720",
    "end": "1316299"
  },
  {
    "text": "know cuz uh things can you know go wrong even if you haven't changed the code number five you still don't know all the",
    "start": "1316299",
    "end": "1323049"
  },
  {
    "text": "scenarios I want to reiterate that number six production is just different",
    "start": "1323049",
    "end": "1328980"
  },
  {
    "text": "so production is always different from your QA environment you know we try to",
    "start": "1328980",
    "end": "1334750"
  },
  {
    "text": "make our QA environment as production like as possible but that's always an as",
    "start": "1334750",
    "end": "1341530"
  },
  {
    "text": "possible qualifier right alright getting",
    "start": "1341530",
    "end": "1346960"
  },
  {
    "text": "back to where we work so I wrote up this test ran it in QA now I'm going to run",
    "start": "1346960",
    "end": "1352660"
  },
  {
    "text": "it in production but the first thing I noticed is that this test actually fails",
    "start": "1352660",
    "end": "1358840"
  },
  {
    "text": "when I run in production why does it fail well this is a distributed system",
    "start": "1358840",
    "end": "1364740"
  },
  {
    "text": "and you know because you've got you know hundreds maybe thousands of servers and",
    "start": "1364740",
    "end": "1371200"
  },
  {
    "text": "good chance you've got servers running on two coasts maybe multiple continents this notion of a global store count is",
    "start": "1371200",
    "end": "1378250"
  },
  {
    "text": "really not well-defined there really is no point in time global store account",
    "start": "1378250",
    "end": "1384360"
  },
  {
    "text": "because your system is probably using some definition of eventual consistency",
    "start": "1384360",
    "end": "1391290"
  },
  {
    "text": "so because of that you're gonna get little weird anomalies like I've highlighted here where the thing doesn't",
    "start": "1391290",
    "end": "1398650"
  },
  {
    "text": "decrement or it increments twice but later on it catches up that's what",
    "start": "1398650",
    "end": "1405520"
  },
  {
    "text": "venture will consist is when we build the system we already decided we were going to make that",
    "start": "1405520",
    "end": "1411100"
  },
  {
    "text": "trade-off so it's not a big deal it just means that we need to relax or requirements you know a little bit",
    "start": "1411100",
    "end": "1417010"
  },
  {
    "text": "because it you know it turns out the requirement is not that every server in your system has the exact same value of",
    "start": "1417010",
    "end": "1423310"
  },
  {
    "text": "store account at every single point in time so we need to relax it a bit but you know this is the first kind of call",
    "start": "1423310",
    "end": "1430360"
  },
  {
    "text": "out here we've actually discovered something by running this test test in",
    "start": "1430360",
    "end": "1436090"
  },
  {
    "text": "production that's important for us to test so eventually eventual consistency always has to have a bound right so the",
    "start": "1436090",
    "end": "1443620"
  },
  {
    "text": "product manager says they may say it's okay that you know things are you know out of synch for a few seconds or maybe",
    "start": "1443620",
    "end": "1449710"
  },
  {
    "text": "even a minute but they didn't mean that eventual consistency meant you know at",
    "start": "1449710",
    "end": "1454750"
  },
  {
    "text": "the end of the month it would be reconciled right so we can take advantage of that take advantage of that",
    "start": "1454750",
    "end": "1461110"
  },
  {
    "text": "knowledge and actually add some tests that will cover our you know consistency",
    "start": "1461110",
    "end": "1466600"
  },
  {
    "text": "bounds and you know the reason why this can only be done in production is I'm",
    "start": "1466600",
    "end": "1471610"
  },
  {
    "text": "guessing that your QA system always has want your little five node cluster it's",
    "start": "1471610",
    "end": "1478300"
  },
  {
    "text": "always gonna have really great consistency so you really don't find these kinds of problems until you you",
    "start": "1478300",
    "end": "1484690"
  },
  {
    "text": "you scale up to you know enough nodes that consistency starts to you know",
    "start": "1484690",
    "end": "1490290"
  },
  {
    "text": "become an issue so what I'm going to do with that query to cover this is instead",
    "start": "1490290",
    "end": "1496360"
  },
  {
    "text": "of going every single line line by line and saying you know every increment",
    "start": "1496360",
    "end": "1501820"
  },
  {
    "text": "needs the next event needs to you know be one higher every decrement of needs",
    "start": "1501820",
    "end": "1506980"
  },
  {
    "text": "be one lower I'm just gonna say I'm gonna sum all of them up and they need to reconcile over some window of time",
    "start": "1506980",
    "end": "1513700"
  },
  {
    "text": "and you could pick whatever window is appropriate for your you know consensus",
    "start": "1513700",
    "end": "1518830"
  },
  {
    "text": "consistency expectations and I've written some sequel that you know does",
    "start": "1518830",
    "end": "1523900"
  },
  {
    "text": "essentially that you can you know code review what I've written I think it works and then I said I was going to",
    "start": "1523900",
    "end": "1532870"
  },
  {
    "text": "dress the black sweater issue so we we can actually make this just a slightly more complicated and and just do a group",
    "start": "1532870",
    "end": "1540039"
  },
  {
    "text": "sku here and do the exact same thing for for all items",
    "start": "1540039",
    "end": "1545549"
  },
  {
    "text": "so we've now done something with just a few lines of sequel code that would be",
    "start": "1545549",
    "end": "1552940"
  },
  {
    "text": "extremely difficult to reproduce in a standard structured kind of test format",
    "start": "1552940",
    "end": "1560369"
  },
  {
    "text": "so you know to answer the question of why should we test in production well",
    "start": "1560369",
    "end": "1566919"
  },
  {
    "text": "you can test a heck of a lot more in production than you can and in a QA system with with unit tests so you",
    "start": "1566919",
    "end": "1574179"
  },
  {
    "text": "should do it all right all right so some concluding thoughts in part 1 write your",
    "start": "1574179",
    "end": "1581169"
  },
  {
    "start": "1577000",
    "end": "1741000"
  },
  {
    "text": "test assertions against log output log output is an important part of your system and it's you know you need to be",
    "start": "1581169",
    "end": "1587440"
  },
  {
    "text": "testing it anyway and since you're already testing your log output take advantage of that and use it to write better test for all of",
    "start": "1587440",
    "end": "1594789"
  },
  {
    "text": "your functionality production covers many many more test scenarios than you could possibly cover in QA so you know",
    "start": "1594789",
    "end": "1602229"
  },
  {
    "text": "conversant I don't know if you've if any of you have stopped by our booth downstairs you know it says something",
    "start": "1602229",
    "end": "1608889"
  },
  {
    "text": "about we're running like three to four million requests per second at peak you",
    "start": "1608889",
    "end": "1616389"
  },
  {
    "text": "know where we're doing terabytes and terabytes of data per day all of this is",
    "start": "1616389",
    "end": "1621999"
  },
  {
    "text": "getting sucked into our you know Hadoop clusters and and data warehouses you cannot reproduce that level of test",
    "start": "1621999",
    "end": "1632440"
  },
  {
    "text": "scenarios you know yourself production is a great place to mine",
    "start": "1632440",
    "end": "1638460"
  },
  {
    "text": "obscure edge cases sometimes I tell people you know they may come to a bit",
    "start": "1638460",
    "end": "1646269"
  },
  {
    "text": "of sloppy code and and you know will point it out and they'll say oh you know that's that's a one one in a million",
    "start": "1646269",
    "end": "1651369"
  },
  {
    "text": "chance that that's gonna be a problem well you know if you're doing 4 million per second then one in a million is",
    "start": "1651369",
    "end": "1657460"
  },
  {
    "text": "happening four times a second you know you really want that happening four times a second right so it's it's a",
    "start": "1657460",
    "end": "1666099"
  },
  {
    "text": "great place to get edge cases non-functional requirements open-ended",
    "start": "1666099",
    "end": "1674259"
  },
  {
    "text": "requirements non-functional requirements like performance open-ended like this",
    "start": "1674259",
    "end": "1679419"
  },
  {
    "text": "needs to work better than you know ten percent or",
    "start": "1679419",
    "end": "1685330"
  },
  {
    "text": "whatever return rates you know can't go above 10 percent or I'm sorry that's a",
    "start": "1685330",
    "end": "1691029"
  },
  {
    "text": "non-functional open-ended would be lower return rates are better better than",
    "start": "1691029",
    "end": "1697389"
  },
  {
    "text": "higher return rates well how do you write a test against that you know in a",
    "start": "1697389",
    "end": "1702460"
  },
  {
    "text": "QA environment it's hard and production though it's something that you can write tests that you know maybe starts to",
    "start": "1702460",
    "end": "1707919"
  },
  {
    "text": "overlap a little bit with monitoring and then the last part important when external behaviors and dependencies",
    "start": "1707919",
    "end": "1713820"
  },
  {
    "text": "external behaviors are not things that you can test in QA so we integrate with",
    "start": "1713820",
    "end": "1718990"
  },
  {
    "text": "a couple dozen different ad exchanges and while there is a protocol you know",
    "start": "1718990",
    "end": "1725049"
  },
  {
    "text": "and a common agreed-upon protocol between us you know everyone someone else someone strays a little bit from",
    "start": "1725049",
    "end": "1730870"
  },
  {
    "text": "the protocol and you know that can cause I can cause problems you can't test that",
    "start": "1730870",
    "end": "1736090"
  },
  {
    "text": "in QA you've got to have tests for that to look for it in in your production systems alright part two from continuous",
    "start": "1736090",
    "end": "1745059"
  },
  {
    "start": "1741000",
    "end": "1828000"
  },
  {
    "text": "integration to continuous experimentation so this is this is where really starts to get interesting let me",
    "start": "1745059",
    "end": "1754269"
  },
  {
    "text": "start this with another hypothetical scenario derived from our wax whatever",
    "start": "1754269",
    "end": "1759549"
  },
  {
    "text": "example let's say that we run of your code for a while",
    "start": "1759549",
    "end": "1764919"
  },
  {
    "text": "and at some point around April 15th",
    "start": "1764919",
    "end": "1770639"
  },
  {
    "text": "there was a behavior change right and the account manager for black sweaters",
    "start": "1770639",
    "end": "1777039"
  },
  {
    "text": "is completely freaking out because their return rates jumped spiked almost",
    "start": "1777039",
    "end": "1784809"
  },
  {
    "text": "doubled on April 15th",
    "start": "1784809",
    "end": "1789330"
  },
  {
    "text": "so high return rates and retail very bad thing you know they're all narrow margin",
    "start": "1790050",
    "end": "1795420"
  },
  {
    "text": "and they're counting on things not being returned too often if they get returned to off and it kills their their margins",
    "start": "1795420",
    "end": "1801380"
  },
  {
    "text": "so that that's why they watch it so closely so you go back through your code",
    "start": "1801380",
    "end": "1807360"
  },
  {
    "text": "release schedule you see new software was released on April 15th but nothing particularly interesting all the tests",
    "start": "1807360",
    "end": "1813870"
  },
  {
    "text": "passed right all so curiously no one has complained about return rates for any",
    "start": "1813870",
    "end": "1819870"
  },
  {
    "text": "other products other than black sweaters so what's going on I mean did you introduce a bug just four black sweaters",
    "start": "1819870",
    "end": "1828500"
  },
  {
    "start": "1828000",
    "end": "2008000"
  },
  {
    "text": "well one of the first things you're going to look at is you're gonna look at it overall return rates because you know as I said this is important you're",
    "start": "1828500",
    "end": "1834360"
  },
  {
    "text": "probably monitoring it very closely so you know you're always looking closely at the return rates and you see no",
    "start": "1834360",
    "end": "1841830"
  },
  {
    "text": "notable no noticeable change whatsoever on April 15th I left the dates off but in April 15th is right in the middle of",
    "start": "1841830",
    "end": "1848160"
  },
  {
    "text": "the graph right well the next thing you're gonna do is you're gonna break",
    "start": "1848160",
    "end": "1854460"
  },
  {
    "text": "this out by item so we've already demonstrated we've seen you know return rates jumped four black sweaters but why",
    "start": "1854460",
    "end": "1861929"
  },
  {
    "text": "is it just black sweaters so I'm gonna take a look at that and I see a pattern that looks kind of like this so if you",
    "start": "1861929",
    "end": "1870900"
  },
  {
    "text": "if you look at that closely you can see you know on average everything's about the same but it looks like there's been",
    "start": "1870900",
    "end": "1875940"
  },
  {
    "text": "some Criss crossing you know if i zoom in on some of that you could see we're",
    "start": "1875940",
    "end": "1881190"
  },
  {
    "text": "you know roughly about half of the return rates actually have jumped black",
    "start": "1881190",
    "end": "1886380"
  },
  {
    "text": "sweaters just happens to have been the worst of them but it did jump for several others just not quite enough to",
    "start": "1886380",
    "end": "1893040"
  },
  {
    "text": "you know alarm the the account managers but another interesting thing is that",
    "start": "1893040",
    "end": "1900570"
  },
  {
    "text": "half of them have reduced return rates what's going on there and you know a few",
    "start": "1900570",
    "end": "1908790"
  },
  {
    "text": "of them actually have no change whatsoever all right so now you're gonna go back into the code you're gonna dig a",
    "start": "1908790",
    "end": "1914580"
  },
  {
    "text": "little deeper into what change happened on April 15th and you're gonna see something like this all right so someone",
    "start": "1914580",
    "end": "1919860"
  },
  {
    "text": "who's doing a refactoring very light refactor they noticed that the product images",
    "start": "1919860",
    "end": "1927030"
  },
  {
    "text": "that were used to build these product carousels everyone know the product carousel is just you know when you go to",
    "start": "1927030",
    "end": "1933620"
  },
  {
    "text": "you know product page on some retail site and it shows you a picture of the of the product and then there's like a",
    "start": "1933620",
    "end": "1939330"
  },
  {
    "text": "next and back button and you can see other pictures of the product you know it starts with the first one and then",
    "start": "1939330",
    "end": "1944850"
  },
  {
    "text": "you can go through the carousel and see you know other other variants of it so there's multiple product images for each",
    "start": "1944850",
    "end": "1951540"
  },
  {
    "text": "product and we can see that before the 15th the code was was not put picking",
    "start": "1951540",
    "end": "1957180"
  },
  {
    "text": "them up in any particular order it's just picking them up dumping them on the page so which one was first was based on database order we don't usually like to",
    "start": "1957180",
    "end": "1964920"
  },
  {
    "text": "do that we consider that you know usually a bad practice you know I like",
    "start": "1964920",
    "end": "1970170"
  },
  {
    "text": "systems to be a bit more predictable and deterministic so you know usually when",
    "start": "1970170",
    "end": "1975300"
  },
  {
    "text": "you're loading things you want to order by by some clause so someone went in and fixed that and did that now that seems",
    "start": "1975300",
    "end": "1983610"
  },
  {
    "text": "somewhat innocuous but you know I mean the change that we're looking for is higher return rates",
    "start": "1983610",
    "end": "1989760"
  },
  {
    "text": "it doesn't seem why immediately obvious why that might do it but now as I think about it I can actually construct a",
    "start": "1989760",
    "end": "1996060"
  },
  {
    "text": "hypothesis so you know is it possible that this change in return rates could",
    "start": "1996060",
    "end": "2001910"
  },
  {
    "text": "be causing higher or changing order could be causing higher return rates for some products you know so just a you",
    "start": "2001910",
    "end": "2009380"
  },
  {
    "text": "know kind of give you some background what I'm thinking I'm kind of imagining something like this so you know before the 15th we're seeing you know that",
    "start": "2009380",
    "end": "2014720"
  },
  {
    "text": "image on the on your left is the default",
    "start": "2014720",
    "end": "2020380"
  },
  {
    "text": "after the 15th you know it's the other one around you know maybe it's the other way around alright so it started with",
    "start": "2020380",
    "end": "2026210"
  },
  {
    "text": "the one on the right and then went to the one on the left and you know so I'm",
    "start": "2026210",
    "end": "2033710"
  },
  {
    "text": "looking at this picture and I'm thinking you know vast majority of American males are probably gonna look at that sweater and they can know right off the bat",
    "start": "2033710",
    "end": "2039620"
  },
  {
    "text": "that's not gonna fit me I don't care what side is size it is I mean there's there's a very particular physique there that you know that that fits you know",
    "start": "2039620",
    "end": "2048830"
  },
  {
    "text": "and it's possible that you know maybe because that was the first picture on",
    "start": "2048830",
    "end": "2054440"
  },
  {
    "text": "there that you know people who knew that that was I'm gonna fit didn't order it whereas if they saw the second one a lot of people",
    "start": "2054440",
    "end": "2059990"
  },
  {
    "text": "maybe ordered it thinking it would fit and didn't find out that it didn't fit until they got it and then they returned it right now I don't know yeah you know",
    "start": "2059990",
    "end": "2066169"
  },
  {
    "text": "you can you can judge for yourself whether that's a plausible hypothesis but you know I think it's worth worth",
    "start": "2066169",
    "end": "2074658"
  },
  {
    "start": "2073000",
    "end": "2114000"
  },
  {
    "text": "testing so how are we going to test this hypothesis for you well scientific",
    "start": "2074659",
    "end": "2079730"
  },
  {
    "text": "process goes like this you formulate a question define your hypothesis use the hypothesis to make predictions so if",
    "start": "2079730",
    "end": "2087950"
  },
  {
    "text": "this were to be the case what are some other things that I might see other than what you know I've already observed",
    "start": "2087950",
    "end": "2094060"
  },
  {
    "text": "you're going to test those predictions empirically and then you're going to",
    "start": "2094060",
    "end": "2099920"
  },
  {
    "text": "refine the hypothesis and repeat so science is a very iterative process when",
    "start": "2099920",
    "end": "2105950"
  },
  {
    "text": "you've done that enough and you feel like you've gotten a good enough answer",
    "start": "2105950",
    "end": "2111380"
  },
  {
    "text": "then you draw your conclusions so there's actually two ways to do science",
    "start": "2111380",
    "end": "2117160"
  },
  {
    "start": "2114000",
    "end": "2164000"
  },
  {
    "text": "just for completeness I'm gonna talk about the first first as an observational study it's an",
    "start": "2117160",
    "end": "2123080"
  },
  {
    "text": "observational study would work something like this so I suggest if the change in",
    "start": "2123080",
    "end": "2129859"
  },
  {
    "text": "the order of the Carousel images is what caused the change in return rate than it would stand to reason that if there are",
    "start": "2129859",
    "end": "2136700"
  },
  {
    "text": "any out there where the order didn't change that we would not have seen the change in return rates so there could be",
    "start": "2136700",
    "end": "2143660"
  },
  {
    "text": "some where the database order just happens to coincide with sorting by update date then you can also look try",
    "start": "2143660",
    "end": "2151340"
  },
  {
    "text": "to find some products that only have one image and you can go back and you can you now look at the data and see did",
    "start": "2151340",
    "end": "2157609"
  },
  {
    "text": "their return rate you know change if that return rate did not change then you've got some some good evidence all",
    "start": "2157609",
    "end": "2164270"
  },
  {
    "start": "2164000",
    "end": "2494000"
  },
  {
    "text": "right okay right the the gold standard for science is not the observational study but the controlled experiment",
    "start": "2164270",
    "end": "2170320"
  },
  {
    "text": "controlled experiment means that you're splitting your your stuff into a test group in a control group and the control",
    "start": "2170320",
    "end": "2177800"
  },
  {
    "text": "group gets the change or I'm sorry the test group gets to change the control",
    "start": "2177800",
    "end": "2183830"
  },
  {
    "text": "group does not so now we can actually construct code that tests",
    "start": "2183830",
    "end": "2189430"
  },
  {
    "text": "this hypothesis in a controlled experiment fashion I've thrown three",
    "start": "2189430",
    "end": "2194950"
  },
  {
    "text": "possibilities up there the first thing I would probably think of is well let's just revert it back to the way that it",
    "start": "2194950",
    "end": "2201220"
  },
  {
    "text": "worked before but you know keep in mind that perhaps the products out there this",
    "start": "2201220",
    "end": "2207340"
  },
  {
    "text": "was a beneficial change so I don't know so I'm going to do this permanently actually want to find out what the problem is other than using database",
    "start": "2207340",
    "end": "2215710"
  },
  {
    "text": "order you can sort by a different key you can use a completely random order now what's important is that to make",
    "start": "2215710",
    "end": "2223930"
  },
  {
    "text": "this actually work we need to deploy this to some users but not others and",
    "start": "2223930",
    "end": "2230340"
  },
  {
    "text": "note that I said users not requests because there's a relationship between the purchase which happens when they see",
    "start": "2230340",
    "end": "2237130"
  },
  {
    "text": "the product carousel and the return which may happen you know days later so",
    "start": "2237130",
    "end": "2242800"
  },
  {
    "text": "it's got to be by by by user not by request so we need to find a way to to",
    "start": "2242800",
    "end": "2249280"
  },
  {
    "text": "split this defining your test control groups so this gets back to what I said",
    "start": "2249280",
    "end": "2256360"
  },
  {
    "text": "in the you know what I showed in the very beginning with the the structure of the event log we've put a few things in",
    "start": "2256360",
    "end": "2264850"
  },
  {
    "text": "here that are gonna help us do this so I've included server ID for example",
    "start": "2264850",
    "end": "2272100"
  },
  {
    "text": "easiest way to do this is to use a canary if you're familiar with the notion of a canary if you're deploying",
    "start": "2272400",
    "end": "2279430"
  },
  {
    "text": "it to large systems very common practice to put one server out called the canary get some KPIs off that server compare",
    "start": "2279430",
    "end": "2286840"
  },
  {
    "text": "that to what you're used to and only proceed with the rest of the deployment of those KPIs you know check out",
    "start": "2286840",
    "end": "2293160"
  },
  {
    "text": "checking out you know it means that you know if there's any differences they",
    "start": "2293160",
    "end": "2298570"
  },
  {
    "text": "should be differences that you were expecting you know it should not be surprising differences so that's where",
    "start": "2298570",
    "end": "2305860"
  },
  {
    "text": "it's a it's very useful to have lots and lots of you know servers running the same code some other things that are",
    "start": "2305860",
    "end": "2313240"
  },
  {
    "text": "helpful transaction IDs transaction a user ID transaction ID session ID is kind of a triad transaction ID in this",
    "start": "2313240",
    "end": "2320650"
  },
  {
    "text": "case is very useful to tie the purchases back to or returns back to",
    "start": "2320650",
    "end": "2326190"
  },
  {
    "text": "the original purchase and in our systems you know there's there's usually one one",
    "start": "2326190",
    "end": "2333930"
  },
  {
    "text": "main event the initial event and then there can be you know several consequent",
    "start": "2333930",
    "end": "2339360"
  },
  {
    "text": "events that happen transaction ID helps us tie all of those things together so",
    "start": "2339360",
    "end": "2347990"
  },
  {
    "text": "because this is user based canary process works well only if your requests",
    "start": "2347990",
    "end": "2354780"
  },
  {
    "text": "are essentially partitioned we're sharded by user so you know if every user is you know in general always",
    "start": "2354780",
    "end": "2360780"
  },
  {
    "text": "coming back to the same server then you can use the fact that that's the server that has the control code on it to do",
    "start": "2360780",
    "end": "2367590"
  },
  {
    "text": "your experiment if you can't get away with that you can always you know put",
    "start": "2367590",
    "end": "2372960"
  },
  {
    "text": "branch logic in your code now of course you have to you know deploy it everywhere but then you can split for",
    "start": "2372960",
    "end": "2379530"
  },
  {
    "text": "example by taking a mod of the user ID you know assuming it's numeric or hash it and mod it and split your test in",
    "start": "2379530",
    "end": "2387240"
  },
  {
    "text": "control groups that way if all else fails you can use that diagnostic bug that I mentioned all right so before I",
    "start": "2387240",
    "end": "2398130"
  },
  {
    "text": "move on so testing control is always about test group control group what",
    "start": "2398130",
    "end": "2403230"
  },
  {
    "text": "about a in another form of experimentation called I'm gonna call before and after testing because this is",
    "start": "2403230",
    "end": "2410040"
  },
  {
    "text": "actually the first thing that we all try right make a change what's it doing",
    "start": "2410040",
    "end": "2415770"
  },
  {
    "text": "after I made the change does it look different I'm gonna see just before and",
    "start": "2415770",
    "end": "2421140"
  },
  {
    "text": "after testing is not actually a very good approach anyone want venture a guess why no all right so other",
    "start": "2421140",
    "end": "2432240"
  },
  {
    "text": "variables sure yeah so before and after can get very messy very messy you know",
    "start": "2432240",
    "end": "2438090"
  },
  {
    "text": "most systems have some sort of like daily you know peak and trough right your daily traffic goes up and down and",
    "start": "2438090",
    "end": "2446100"
  },
  {
    "text": "that kind of goes across all your metrics including you know return rates you know probably gonna have a little",
    "start": "2446100",
    "end": "2451500"
  },
  {
    "text": "bit of a daily you know wobble to them if you do your before while traffic is subsiding or if you do your",
    "start": "2451500",
    "end": "2459990"
  },
  {
    "text": "your deployment as traffic is subsiding you know what is your aft are going to look like compared to your before you",
    "start": "2459990",
    "end": "2466470"
  },
  {
    "text": "know it's gonna be lower but it's gonna be lower whether you made the change or",
    "start": "2466470",
    "end": "2472320"
  },
  {
    "text": "not because traffic is you know subsiding you know conversely if you do it as traffic is going up you know you",
    "start": "2472320",
    "end": "2479280"
  },
  {
    "text": "kind of lose that visibility so it's a heavily biased it's not necessarily bad you know and and for simple things you",
    "start": "2479280",
    "end": "2486180"
  },
  {
    "text": "know we we do that but it's not nearly as effective as a as a true testing",
    "start": "2486180",
    "end": "2493650"
  },
  {
    "text": "control all right so I'm gonna wrap up that scenario and",
    "start": "2493650",
    "end": "2500040"
  },
  {
    "start": "2494000",
    "end": "2547000"
  },
  {
    "text": "we're gonna talk a bit more specifically about what I mean by continuous experimentation so let's review what our",
    "start": "2500040",
    "end": "2507360"
  },
  {
    "text": "software development lifecycle looks like so this is kind of a generic you know agile process is kind of how you",
    "start": "2507360",
    "end": "2513570"
  },
  {
    "text": "know we all do things now you start with the initiation of a new product and then",
    "start": "2513570",
    "end": "2519960"
  },
  {
    "text": "you go into this you know continuous cycle of gathering requirements design implement test I'm trying to be agnostic",
    "start": "2519960",
    "end": "2527370"
  },
  {
    "text": "as to whether we do TDD or not right so you're doing design implement and test in some order you deploy to production",
    "start": "2527370",
    "end": "2534110"
  },
  {
    "text": "gather user feedback and then you just repeat that process until you know you",
    "start": "2534110",
    "end": "2539340"
  },
  {
    "text": "either run out of money or get bought by Oracle or something right scientific",
    "start": "2539340",
    "end": "2547860"
  },
  {
    "text": "process is also an iterative process and it actually looks very similar and formulate a question to find your",
    "start": "2547860",
    "end": "2553680"
  },
  {
    "text": "hypothesis make some predictions run a controlled experiment refine the",
    "start": "2553680",
    "end": "2559410"
  },
  {
    "text": "hypothesis iteratively and then when you're satisfied that you have a you",
    "start": "2559410",
    "end": "2564720"
  },
  {
    "text": "know a science worthy results you draw your conclusions and publish a paper",
    "start": "2564720",
    "end": "2570440"
  },
  {
    "start": "2570000",
    "end": "2662000"
  },
  {
    "text": "what are the differences so the biggest difference comes down to this they have",
    "start": "2570440",
    "end": "2576840"
  },
  {
    "text": "different goals so the goal of your the software engineering process is to you solve a problem specifically to solve a",
    "start": "2576840",
    "end": "2585480"
  },
  {
    "text": "problem with code produce code that solves the problem the goal of the scientific process",
    "start": "2585480",
    "end": "2591480"
  },
  {
    "text": "actually has is not about solving a problem it's just about answering a question and you'll notice that that's",
    "start": "2591480",
    "end": "2597539"
  },
  {
    "text": "actually what we did in our hypothetical scenario we were not actually trying to fix the return rate problem we just put",
    "start": "2597539",
    "end": "2606990"
  },
  {
    "text": "code out that helped us understand why it happened so reverting the order back",
    "start": "2606990",
    "end": "2614670"
  },
  {
    "text": "to what it was before or actually isn't any better it you know it makes it it's actually worse for about half the",
    "start": "2614670",
    "end": "2620130"
  },
  {
    "text": "products it just gets it back to what people were used to",
    "start": "2620130",
    "end": "2625170"
  },
  {
    "text": "so status quo is very powerful and in technical systems you know and actually",
    "start": "2625170",
    "end": "2632579"
  },
  {
    "text": "for a good reason it says this is totally defensible you know people are you know building budgets against",
    "start": "2632579",
    "end": "2637710"
  },
  {
    "text": "certain return rates so if you perturb the pattern rate you know even if you do even if you improve it for some and make",
    "start": "2637710",
    "end": "2644160"
  },
  {
    "text": "it worse for others you mess with people's budgets but yeah so the goal",
    "start": "2644160",
    "end": "2649559"
  },
  {
    "text": "was different and the outcome was different you know no matter how that experiment played out it didn't give us",
    "start": "2649559",
    "end": "2656910"
  },
  {
    "text": "a solution to the problem it just basically told us that yeah that line of code is what caused it but we can jam",
    "start": "2656910",
    "end": "2664049"
  },
  {
    "start": "2662000",
    "end": "2727000"
  },
  {
    "text": "these things to to get these two things together and come up with the process it",
    "start": "2664049",
    "end": "2669180"
  },
  {
    "text": "looks a little bit like this with you know both the software development process and the scientific process",
    "start": "2669180",
    "end": "2675359"
  },
  {
    "text": "happening in parallel and if we do that we can kind of see the links between the",
    "start": "2675359",
    "end": "2681119"
  },
  {
    "text": "two so the deployment to production is the thing that causes us to draw new",
    "start": "2681119",
    "end": "2687089"
  },
  {
    "text": "hypotheses new issues come up and new questions need to be answered and that",
    "start": "2687089",
    "end": "2692460"
  },
  {
    "text": "kicks off the scientific process you know which iterates several times but the output of the scientific process is",
    "start": "2692460",
    "end": "2700260"
  },
  {
    "text": "not a solution but input into the requirements for the software process so",
    "start": "2700260",
    "end": "2708960"
  },
  {
    "text": "once we determine that order is what's causing our return rate change the next",
    "start": "2708960",
    "end": "2716160"
  },
  {
    "text": "step is to run this through the product process to find out all right well what is the correct thing to do now it's not",
    "start": "2716160",
    "end": "2722760"
  },
  {
    "text": "here's the solution it's what are we gonna do next about it alright so just to wrap up I'm gonna say",
    "start": "2722760",
    "end": "2732570"
  },
  {
    "start": "2727000",
    "end": "2829000"
  },
  {
    "text": "a few things that are sort of important to using what I'm calling a continuous",
    "start": "2732570",
    "end": "2737970"
  },
  {
    "text": "experiment experimentation that you know we we employ all of these at conversant",
    "start": "2737970",
    "end": "2744630"
  },
  {
    "text": "and you know there are all things that you can you can kind of take away so you can't really do this unless you already",
    "start": "2744630",
    "end": "2751020"
  },
  {
    "text": "have an extremely robust continuous integration continuous deployment process in place that means technical",
    "start": "2751020",
    "end": "2757080"
  },
  {
    "text": "infrastructure but also as a process if you are doing continuous deployment the",
    "start": "2757080",
    "end": "2763260"
  },
  {
    "text": "extra thing that you need to do on top of continuous deployment is have the ability to deploy multiple versions just",
    "start": "2763260",
    "end": "2769710"
  },
  {
    "text": "as easily as a single version and you need to be able to be running these concurrently very helpful to do feature",
    "start": "2769710",
    "end": "2776370"
  },
  {
    "text": "branching I stopped short of saying it's a requirement that you do feature branching but it's kind of hard to do if",
    "start": "2776370",
    "end": "2783060"
  },
  {
    "text": "you're not you know doing that feature branching though and the thing that that",
    "start": "2783060",
    "end": "2788100"
  },
  {
    "text": "we use a conversion that you don't see in most continuous build systems is this",
    "start": "2788100",
    "end": "2793140"
  },
  {
    "text": "notion of the automatic rollback this is very helpful you know I at any average Tuesday at",
    "start": "2793140",
    "end": "2802980"
  },
  {
    "text": "converse and we probably have about five experiments going on at a time so that",
    "start": "2802980",
    "end": "2809580"
  },
  {
    "text": "those things don't run unbounded that we have a process in place that automatically reverts them all to the",
    "start": "2809580",
    "end": "2816300"
  },
  {
    "text": "production version at the end of the day end of the business day unless you go into a configuration and give it you",
    "start": "2816300",
    "end": "2822990"
  },
  {
    "text": "know special permissions to be a long-running experiment if you need to do that so those are some things that",
    "start": "2822990",
    "end": "2828300"
  },
  {
    "text": "are helpful second thing that you need to do is around culture first thing got",
    "start": "2828300",
    "end": "2835860"
  },
  {
    "start": "2829000",
    "end": "2987000"
  },
  {
    "text": "to be comfortable with throwing away code that that scientific experiment",
    "start": "2835860",
    "end": "2840960"
  },
  {
    "text": "code is not meant to be permanent you're answering questions you're not providing solutions a lot of developers a lot of",
    "start": "2840960",
    "end": "2848910"
  },
  {
    "text": "bad developers hate to throw things away and you know that's something is you",
    "start": "2848910",
    "end": "2854550"
  },
  {
    "text": "just gotta you got to get out of people's heads you got to get you know write it throw it away write it",
    "start": "2854550",
    "end": "2859800"
  },
  {
    "text": "again throw it away write it again it's not going to take it nearly as much time to write it the second the third time as",
    "start": "2859800",
    "end": "2866280"
  },
  {
    "text": "it took you you know the first time top to bottom culture of experimentation",
    "start": "2866280",
    "end": "2872130"
  },
  {
    "text": "that means it's not just engineers but your product managers your stakeholders and in some cases even your partner's",
    "start": "2872130",
    "end": "2877140"
  },
  {
    "text": "clients need to be on board with this you know so people understand what the expectations are and then the one last",
    "start": "2877140",
    "end": "2884910"
  },
  {
    "text": "point which is almost as important as any of them that I want to throw out there which is needing to know what's",
    "start": "2884910",
    "end": "2890940"
  },
  {
    "text": "off-limits so testing production is dangerous what we do a conversion is",
    "start": "2890940",
    "end": "2896880"
  },
  {
    "text": "extremely dangerous you know because of our exposure we're one of a handful of",
    "start": "2896880",
    "end": "2902910"
  },
  {
    "text": "small handful of companies that can literally break the internet if we put",
    "start": "2902910",
    "end": "2908579"
  },
  {
    "text": "out bad code in fact a couple years ago one of our competitors did just that put out bad code and you know broke like two",
    "start": "2908579",
    "end": "2915869"
  },
  {
    "text": "thirds of websites out there so we have",
    "start": "2915869",
    "end": "2921300"
  },
  {
    "text": "to be very careful but you know something else that's very dangerous",
    "start": "2921300",
    "end": "2926569"
  },
  {
    "text": "open-heart surgery it's dangerous right brain surgery is dangerous you know but",
    "start": "2926569",
    "end": "2932819"
  },
  {
    "text": "how did we get to all of that well we did it with careful scientific you know experimentation and a code of ethics",
    "start": "2932819",
    "end": "2939690"
  },
  {
    "text": "right so in your own environment you need to know what those things that you",
    "start": "2939690",
    "end": "2945960"
  },
  {
    "text": "just can't touch are similar to a scientists you know we would probably",
    "start": "2945960",
    "end": "2951329"
  },
  {
    "text": "have a cure for cancer right now if you know scientists weren't so you know sensitive about sacrificing human lives",
    "start": "2951329",
    "end": "2957210"
  },
  {
    "text": "for science right a good chance that you've got a similar thing in your own",
    "start": "2957210",
    "end": "2962520"
  },
  {
    "text": "environment you just need to know what that is and develop that code of ethics so that people know you don't you don't mess with that and then building a",
    "start": "2962520",
    "end": "2970890"
  },
  {
    "text": "culture of scientific experimentation I think you know would be a great advancement for everyone that's what I",
    "start": "2970890",
    "end": "2978000"
  },
  {
    "text": "got thank you you",
    "start": "2978000",
    "end": "2981970"
  }
]