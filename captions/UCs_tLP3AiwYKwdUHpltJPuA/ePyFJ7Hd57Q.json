[
  {
    "start": "0",
    "end": "140000"
  },
  {
    "text": "thank you so uh so glad you could join my talk it was",
    "start": "12960",
    "end": "18240"
  },
  {
    "text": "just working just now but okay okay",
    "start": "18240",
    "end": "23359"
  },
  {
    "text": "my talk is about lowering the cost of entry or the barriers of entry to kubernetes",
    "start": "23359",
    "end": "29119"
  },
  {
    "text": "because we uh we all like and we all love communities but sometimes it may not be",
    "start": "29119",
    "end": "35280"
  },
  {
    "text": "feasible to to do so um it may be organizational concerns",
    "start": "35280",
    "end": "40960"
  },
  {
    "text": "maybe business concerns maybe financial concerns and this talk is a story about how we",
    "start": "40960",
    "end": "47520"
  },
  {
    "text": "initially built a um a product or a service using docker",
    "start": "47520",
    "end": "52960"
  },
  {
    "text": "compose and then in the end we still got kubernetes because i kind of found a way",
    "start": "52960",
    "end": "58079"
  },
  {
    "text": "to put it in there anyway so this is my talk um",
    "start": "58079",
    "end": "63920"
  },
  {
    "text": "a little bit about who i am uh i'm the herger i have a background in computer science",
    "start": "63920",
    "end": "70720"
  },
  {
    "text": "i got my first paid job as a programmer at age 13. not a reputable company you'd never",
    "start": "70720",
    "end": "77040"
  },
  {
    "text": "heard of it but that's my first job that's me",
    "start": "77040",
    "end": "82479"
  },
  {
    "text": "i work at triforce as a software pilot and a cloud specialist i think the term is",
    "start": "82479",
    "end": "89119"
  },
  {
    "text": "so my background is in i've been working with manufacturing companies i've been working with",
    "start": "89119",
    "end": "94799"
  },
  {
    "text": "automotive companies financial companies and health tech companies and this last project is in the public sector so",
    "start": "94799",
    "end": "100880"
  },
  {
    "text": "that's my that's my background a little bit about me in my spare time i like to go sailing as you can probably",
    "start": "100880",
    "end": "106079"
  },
  {
    "text": "tell from this uh very very nice picture the next picture is not as good a resolution but",
    "start": "106079",
    "end": "111200"
  },
  {
    "text": "it's kind of fun i do tall ships racing like old wooden ships and it's not one of the big ones it's that",
    "start": "111200",
    "end": "116719"
  },
  {
    "text": "one in the uh so and it's quite pixelated so it's like those 10 pixels that's my ship um",
    "start": "116719",
    "end": "124960"
  },
  {
    "text": "and then besides that i also uh whoops i play in a band",
    "start": "124960",
    "end": "130080"
  },
  {
    "text": "and actually we have some shows coming up friday and saturday in jutland so if you're on those parts of in the world",
    "start": "130080",
    "end": "136800"
  },
  {
    "text": "please check us out um so and a bit of an agenda for today",
    "start": "136800",
    "end": "143360"
  },
  {
    "start": "140000",
    "end": "181000"
  },
  {
    "text": "first we'll take a look at our compose and give you a broad intro to the to the project um",
    "start": "143360",
    "end": "149120"
  },
  {
    "text": "so dark compose and and echo done yes good uh then we'll take a look at some of the",
    "start": "149120",
    "end": "156560"
  },
  {
    "text": "issues or unfortunate aspects of the of the docker compose solution",
    "start": "156560",
    "end": "162879"
  },
  {
    "text": "we'll take a look at like is there anything we can do that's better that we now actually also afford",
    "start": "162879",
    "end": "168560"
  },
  {
    "text": "and then step four install k3s and here we'll do a light demo and then we'll finish off with like",
    "start": "168560",
    "end": "175040"
  },
  {
    "text": "some closing words um not really a fan of this clicker anyway",
    "start": "175040",
    "end": "180720"
  },
  {
    "text": "um maybe if i do this so dara compose that's the first thing",
    "start": "180720",
    "end": "187280"
  },
  {
    "start": "181000",
    "end": "674000"
  },
  {
    "text": "uh so the the project uh to give you an intro was supposed to be",
    "start": "187280",
    "end": "192879"
  },
  {
    "text": "in a small team so we had like uh two front-end developers like one and a half fte we had two back-end developers one",
    "start": "192879",
    "end": "200000"
  },
  {
    "text": "and a half fte and i was doing half back-end and also doing architecting and",
    "start": "200000",
    "end": "205200"
  },
  {
    "text": "you know talking to the customer gathering requirements all those things um",
    "start": "205200",
    "end": "212000"
  },
  {
    "text": "click we had a limited budget it was supposed to be a proof of concept so we we didn't have a lot of a lot of money",
    "start": "212000",
    "end": "220000"
  },
  {
    "text": "we had an extremely short deadline there was a requirement from the customer that we",
    "start": "220000",
    "end": "225680"
  },
  {
    "text": "wanted to go really really fast and it was a proof of concept like can this be done is this going to solve our",
    "start": "225680",
    "end": "232799"
  },
  {
    "text": "business concerns for us and let's evaluate after we've done the",
    "start": "232799",
    "end": "237920"
  },
  {
    "text": "first few things in production and then see should we shut it down or should we just keep going",
    "start": "237920",
    "end": "243840"
  },
  {
    "text": "it was also supposed to be on premises in denmark due to regulatory issues so i",
    "start": "243840",
    "end": "249280"
  },
  {
    "text": "couldn't just pick any cloud and run it there damn it um and within the team we had",
    "start": "249280",
    "end": "256720"
  },
  {
    "text": "limited kubernetes experience i had a lot because i was coming off another project where you had all the tools with",
    "start": "256720",
    "end": "263199"
  },
  {
    "text": "all the bells and whistles so that was you know uh given it is aws get ups uh terraform",
    "start": "263199",
    "end": "270240"
  },
  {
    "text": "whatever what have you signed docker images all of those things so i know what was available from the toolbox but",
    "start": "270240",
    "end": "276160"
  },
  {
    "text": "i also know that i was the only one who actually knew how to use the toolbox um so well you got to do what you got to",
    "start": "276160",
    "end": "284479"
  },
  {
    "text": "do so with that yes short short deadline limited budget",
    "start": "284479",
    "end": "291600"
  },
  {
    "text": "not a lot of knowledge on kubernetes so like any good engineer i did",
    "start": "291600",
    "end": "297280"
  },
  {
    "text": "what we all do i said we'll make it work we'll do it no problem at all",
    "start": "297280",
    "end": "303600"
  },
  {
    "text": "so we had some some goals because this was when kovit was just starting",
    "start": "303600",
    "end": "308720"
  },
  {
    "text": "out and i was thinking okay what we're building is a video solution video chat solution for a",
    "start": "308720",
    "end": "315600"
  },
  {
    "text": "public entity in denmark and covet is just taking off so there is a possibility that maybe we'll get more",
    "start": "315600",
    "end": "322080"
  },
  {
    "text": "users in a short amount of time so i had the goal that we wanted this to be scalable but we also had a constraint that was",
    "start": "322080",
    "end": "328479"
  },
  {
    "text": "the budget so we only had so much money to spend on hosting i also wanted",
    "start": "328479",
    "end": "335199"
  },
  {
    "text": "some simplicity and that was really related to the developer experience to the other team the other guys on the",
    "start": "335199",
    "end": "340400"
  },
  {
    "text": "team that i didn't want to have a huge setup for them to uh get accustomed to",
    "start": "340400",
    "end": "345600"
  },
  {
    "text": "before they could be efficient and they all knew basically docker so um",
    "start": "345600",
    "end": "351039"
  },
  {
    "text": "i had this goal of simplicity uh again limited experience with kubernetes and then",
    "start": "351039",
    "end": "356400"
  },
  {
    "text": "the time constraint i'll put that as time to market we wanted to go really really fast here really fast",
    "start": "356400",
    "end": "362479"
  },
  {
    "text": "but it had to be on premises so yeah ordering a vm yeah all of those things uh and some of",
    "start": "362479",
    "end": "369199"
  },
  {
    "text": "you with a project management background will recognize this as like the project",
    "start": "369199",
    "end": "375039"
  },
  {
    "text": "manager uh triangle like we had a scope that was so and so we had a cast that was so and so we had a time that was",
    "start": "375039",
    "end": "381199"
  },
  {
    "text": "really really constrained and that we have to find some quality in there so as i said",
    "start": "381199",
    "end": "387919"
  },
  {
    "text": "kubernetes doesn't always make sense unfortunately because i love it and that could be due to the cost like",
    "start": "387919",
    "end": "395680"
  },
  {
    "text": "if you're running kubernetes in a virtual environment in the cloud like to do highly available you need at least three",
    "start": "395680",
    "end": "402639"
  },
  {
    "text": "worker nodes and you need at least three control nodes so that's six vms just to",
    "start": "402639",
    "end": "408800"
  },
  {
    "text": "get it running right i can't afford six vms who can um so that may be an effector",
    "start": "408800",
    "end": "415199"
  },
  {
    "text": "also the size of the project like uh does it really make sense for us to run kubernetes on a project that's",
    "start": "415199",
    "end": "422479"
  },
  {
    "text": "supposed to be shut down after the proof of concept well maybe not",
    "start": "422479",
    "end": "428240"
  },
  {
    "text": "there's also the organizational complexity that i alluded to with yeah the the skill level in the team",
    "start": "428240",
    "end": "435520"
  },
  {
    "text": "like we want to have the t-shaped people but uh if i'm the only one with the deep knowledge of",
    "start": "435520",
    "end": "441440"
  },
  {
    "text": "kubernetes that may be a problem also who's going to to maintain this afterwards",
    "start": "441440",
    "end": "448080"
  },
  {
    "text": "and it may be in other organizations not in mind but in other organizations it may be difficult getting buy-in from",
    "start": "448080",
    "end": "454880"
  },
  {
    "text": "from the stakeholders like we can't just run kubernetes it's we need you know processes and",
    "start": "454880",
    "end": "461120"
  },
  {
    "text": "contracts and whatever um so in the end we went for a dollar compose setup and",
    "start": "461120",
    "end": "467280"
  },
  {
    "text": "the architecture diagram that i came up with was this so on the left hand side",
    "start": "467280",
    "end": "472879"
  },
  {
    "text": "we had a load balancer that is not my concern inside we run a virtual machine",
    "start": "472879",
    "end": "478960"
  },
  {
    "text": "and inside that we have docker and docker runs reverse proxy we have some shared",
    "start": "478960",
    "end": "484800"
  },
  {
    "text": "shared cache in redis we have a few services we have a message queue and then the important thing here is",
    "start": "484800",
    "end": "491199"
  },
  {
    "text": "that that log collection or storage of locks is outside of docker so we need a way to",
    "start": "491199",
    "end": "497680"
  },
  {
    "text": "get those to helio and we used fluently for that to scrape the docker logs and then we used",
    "start": "497680",
    "end": "504800"
  },
  {
    "text": "prometheus inside of docker compose along with metric beat to ship those",
    "start": "504800",
    "end": "510000"
  },
  {
    "text": "metrics over to humor so we can actually have dashboards and hand some observability and postgres was also handled outside of",
    "start": "510000",
    "end": "516959"
  },
  {
    "text": "it so this was the setup that we that we went for that was like the from the",
    "start": "516959",
    "end": "523200"
  },
  {
    "text": "application perspective so we split staging and production on two",
    "start": "523200",
    "end": "528959"
  },
  {
    "text": "vms one was twice the size of the other uh two quarters and four gigabyte of ram",
    "start": "528959",
    "end": "535839"
  },
  {
    "text": "so very very small uh the only way to do that was to to limit the number of",
    "start": "535839",
    "end": "541360"
  },
  {
    "text": "places that it would say java on this one um so i think i had two services in",
    "start": "541360",
    "end": "546399"
  },
  {
    "text": "java and they spent like all the memory combined of all the other services so",
    "start": "546399",
    "end": "551440"
  },
  {
    "text": "minimize the java um we kept the desired state in in git so a docker compose file",
    "start": "551440",
    "end": "558480"
  },
  {
    "text": "uh instrumented with the different environment variables that were kept in git",
    "start": "558480",
    "end": "564880"
  },
  {
    "text": "secrets were kept on an encrypted partition and mounted into the containers the running containers as as volumes",
    "start": "565440",
    "end": "573440"
  },
  {
    "text": "and the deployment just ssh to a jump post and then onto the server and do document post op desk d",
    "start": "573440",
    "end": "580880"
  },
  {
    "text": "that's uh that's the deployment so this is fairly simple",
    "start": "580880",
    "end": "586320"
  },
  {
    "text": "and it was good user experience for the developers they had the same docker compose set up on their machine they just ran docker compose up",
    "start": "586320",
    "end": "593040"
  },
  {
    "text": "and we had a somewhat good parity with with station and production on their local machines",
    "start": "593040",
    "end": "601040"
  },
  {
    "text": "and like this is docker compose i hope you all know it you define a service then you define um",
    "start": "601040",
    "end": "607519"
  },
  {
    "text": "the name of the service what ports does it expose what volumes does it need to have and that's where we put in the secrets",
    "start": "607519",
    "end": "614800"
  },
  {
    "text": "and then does it link to a front-end service or a back-end service in this case it links to redis and then we define some volumes outside",
    "start": "614800",
    "end": "621680"
  },
  {
    "text": "um so that's good so this is like rounding off the act one",
    "start": "621680",
    "end": "627920"
  },
  {
    "text": "so we went into production successfully in like six weeks with this",
    "start": "627920",
    "end": "633839"
  },
  {
    "text": "and we uh we ran this this experiment or proof-of-concept successfully for nine",
    "start": "633920",
    "end": "639440"
  },
  {
    "text": "months without any incident uh and this was like the production server had two cores and",
    "start": "639440",
    "end": "646320"
  },
  {
    "text": "four gigs of ram and we could successfully run the proof of concept so",
    "start": "646320",
    "end": "652160"
  },
  {
    "text": "that's a success great we delivered on the we delivered on the",
    "start": "652160",
    "end": "658839"
  },
  {
    "text": "deadline um yeah we delivered on the deadline and we",
    "start": "658839",
    "end": "664160"
  },
  {
    "text": "managed to get everything up and running we stayed within the budget everything is cool",
    "start": "664160",
    "end": "670000"
  },
  {
    "text": "good so act two trouble in paradise",
    "start": "670000",
    "end": "675279"
  },
  {
    "start": "674000",
    "end": "897000"
  },
  {
    "text": "because as the pandemic was kicking off we had more covet like in the general",
    "start": "675279",
    "end": "680640"
  },
  {
    "text": "population which meant that we would have more uses of our platform and",
    "start": "680640",
    "end": "686399"
  },
  {
    "text": "we would need better observability of what the platform is actually doing um was my takeaway and and",
    "start": "686399",
    "end": "693760"
  },
  {
    "text": "i don't know if you've tried to do this but uh configuring these kind of off-the-shelf tools in docker compose i",
    "start": "693760",
    "end": "700160"
  },
  {
    "text": "think it's not as nice as for instance using helm so i think that was a pain and i have an example of like",
    "start": "700160",
    "end": "707839"
  },
  {
    "text": "i'm configuring a service that's going to do log shipping but that's not really what i'm passionate about does not",
    "start": "707839",
    "end": "713920"
  },
  {
    "text": "really solve anything for me other than doing luck checking and now i need to to to know that configuration language",
    "start": "713920",
    "end": "719680"
  },
  {
    "text": "so i think configuration of the two off the shelf tools was a pain for me deployment took a lot of manual work",
    "start": "719680",
    "end": "726639"
  },
  {
    "text": "um we couldn't do rolling upgrades really because that's not really something that you can do easily with",
    "start": "726639",
    "end": "732160"
  },
  {
    "text": "docker compose so that that meant that i had to stay up late and do deployments because we",
    "start": "732160",
    "end": "737920"
  },
  {
    "text": "couldn't do it during business hours and crucially the secrets are also managed",
    "start": "737920",
    "end": "743279"
  },
  {
    "text": "manually and separately from the services which was a pain like i'm ready to deploy my new version of my",
    "start": "743279",
    "end": "749519"
  },
  {
    "text": "service blah blah blah and then oh i forgot i needed to do uh i need to",
    "start": "749519",
    "end": "754560"
  },
  {
    "text": "push a new secret or something like that so that was a bit annoying",
    "start": "754560",
    "end": "760240"
  },
  {
    "text": "uh this is uh for those of you who don't know this is a fluency configuration language uh",
    "start": "760240",
    "end": "767200"
  },
  {
    "text": "it's just a lot of garbage like like the five things that i cared about were the fire is that's that environment variable",
    "start": "767200",
    "end": "772959"
  },
  {
    "text": "then the other thing i didn't really care about and i was like supposed to to",
    "start": "772959",
    "end": "778399"
  },
  {
    "text": "to set this up and get it running uh and it was supposed to go inside this docker compose uh file",
    "start": "778399",
    "end": "784959"
  },
  {
    "text": "which was like tangently related to my application services like it was i think it was becoming a mess",
    "start": "784959",
    "end": "792000"
  },
  {
    "text": "and there are it's not to say that you can't do this in docker people have done it uh stefan prodin uh",
    "start": "792000",
    "end": "799040"
  },
  {
    "text": "great great grind from weave works i believe one of my the primary authors of flux as",
    "start": "799040",
    "end": "805360"
  },
  {
    "text": "well he has this project doc prom doc prom where he sets up docker prometheus grafana alert manager",
    "start": "805360",
    "end": "813519"
  },
  {
    "text": "those kind of things in docker so it can definitely be done but it's not like i wouldn't say it's a",
    "start": "813519",
    "end": "818639"
  },
  {
    "text": "good experience that's one problem and the next thing is if you uh",
    "start": "818639",
    "end": "824720"
  },
  {
    "text": "this is alluding to the manual the steps for deployment so i needed to assess it into a machine then jump to that next",
    "start": "824720",
    "end": "831360"
  },
  {
    "text": "machine and do docker compose up and then hope everything works um and and i really like the the google sre",
    "start": "831360",
    "end": "837600"
  },
  {
    "text": "book the site related reliability engineering book so and it says if a human operator needs",
    "start": "837600",
    "end": "843600"
  },
  {
    "text": "to touch your system during normal operations you have a bug the definition of normal changes",
    "start": "843600",
    "end": "849199"
  },
  {
    "text": "as your system grows so at the beginning it was okay for us to",
    "start": "849199",
    "end": "854480"
  },
  {
    "text": "do some manual steps but over time all those manual steps just became toil or",
    "start": "854480",
    "end": "861279"
  },
  {
    "text": "the manual steps they just took away my life energy so we need to to reduce that toil to",
    "start": "861279",
    "end": "867600"
  },
  {
    "text": "keep me and the customer happy um so the things that i wanted to solve here",
    "start": "867600",
    "end": "873440"
  },
  {
    "text": "was i wanted to have a simpler way of deploying uh i didn't want to have that ssh ssh docker compose up or remember to",
    "start": "873440",
    "end": "881199"
  },
  {
    "text": "do the secrets um i wanted to have better configuration of these these common tools like i've",
    "start": "881199",
    "end": "886399"
  },
  {
    "text": "seen with helm um and i wanted better sequence management and i wanted the secret to be in the same place as my",
    "start": "886399",
    "end": "894079"
  },
  {
    "text": "as my application configuration so like okay that's the goal",
    "start": "894079",
    "end": "899760"
  },
  {
    "start": "897000",
    "end": "1405000"
  },
  {
    "text": "is there anything we can do can we afford it uh crucially so initially we looked at uh going for",
    "start": "899760",
    "end": "906480"
  },
  {
    "text": "full-blown kubernetes setup so we evaluated rancher and it had the same problems as i mentioned with the cloud",
    "start": "906480",
    "end": "912160"
  },
  {
    "text": "you know the three worker nodes and you need the three control nodes and it's like i'm i'm six doubling my",
    "start": "912160",
    "end": "919600"
  },
  {
    "text": "hosting cost i can't really go back to the business say you need to pay six times as more 6",
    "start": "919600",
    "end": "925440"
  },
  {
    "text": "times as much money now because i don't like to do manual stuff that's",
    "start": "925440",
    "end": "931519"
  },
  {
    "text": "that doesn't work so that was we took a serious look at it but we",
    "start": "931519",
    "end": "937120"
  },
  {
    "text": "decided against it in the end instead we looked at something called k3s and k3s is a project",
    "start": "937120",
    "end": "944079"
  },
  {
    "text": "by rancher i think it was called ranger labs now it's just called ranch i guess it is it is a certified kubernetes",
    "start": "944079",
    "end": "950959"
  },
  {
    "text": "distribution it's now a cncf sandbox sandbox project and it has some",
    "start": "950959",
    "end": "957759"
  },
  {
    "text": "design choices that makes it easier to deploy and run and manage than full-blown kubernetes so it has an",
    "start": "957759",
    "end": "964160"
  },
  {
    "text": "embedded sqlite database instead of lcd it has a single binary that can run on a",
    "start": "964160",
    "end": "969360"
  },
  {
    "text": "single vm and it is so small that you actually run it on a raspberry pi if you want to so like the memory footprint is like 40",
    "start": "969360",
    "end": "975279"
  },
  {
    "text": "megabytes for a kubernetes distribution 40 megabytes that's that's really good in my",
    "start": "975279",
    "end": "982800"
  },
  {
    "text": "in my book it's really really simple to set up uh i will show you in a live demo in a minute and it generates these uh",
    "start": "983120",
    "end": "990079"
  },
  {
    "text": "systemd scripts or init rc script so it can actually survive a reboot and those kind of things that you",
    "start": "990079",
    "end": "995920"
  },
  {
    "text": "want and it runs a default container d as a container runtime engine underneath you",
    "start": "995920",
    "end": "1002399"
  },
  {
    "text": "can also do docker compose docker sorry but by default it runs container d which",
    "start": "1002399",
    "end": "1007920"
  },
  {
    "text": "is again smaller and simpler than than full blown docker and it doesn't have a",
    "start": "1007920",
    "end": "1013279"
  },
  {
    "text": "doesn't have a daemon which is kind of nice then it comes with with the suffix",
    "start": "1013279",
    "end": "1019440"
  },
  {
    "text": "software called traffic as the as the ingress controller so getting traffic into the cluster is handled by traffic",
    "start": "1019440",
    "end": "1027280"
  },
  {
    "text": "this is the architecture diagram of a k3s cluster so the one thing i want you to notice here that",
    "start": "1027280",
    "end": "1034079"
  },
  {
    "text": "this the dotted line is a process that defines a process and that process runs both the cubelet and the cube proxy and",
    "start": "1034079",
    "end": "1041360"
  },
  {
    "text": "flannel flannel is the networking stack and also runs the tunnel proxy so it can talk to other",
    "start": "1041360",
    "end": "1047918"
  },
  {
    "text": "servers or agents as they're called and then the cubelet much as in the full",
    "start": "1047919",
    "end": "1053679"
  },
  {
    "text": "scale kubernetes it talks to uh the container runtime and schedules uh the workloads on the worker nodes so that's",
    "start": "1053679",
    "end": "1060000"
  },
  {
    "text": "like and all this in within the dotted line fits in in 40 megs of ram which is kind of nice",
    "start": "1060000",
    "end": "1066799"
  },
  {
    "text": "and super simple to set up yeah and we're not fooling ourselves",
    "start": "1066799",
    "end": "1073120"
  },
  {
    "text": "here we know that just replacing docker compose with k3s",
    "start": "1073120",
    "end": "1078640"
  },
  {
    "text": "is not going to give us highly available software we still just have the one vm we don't have any",
    "start": "1078640",
    "end": "1084240"
  },
  {
    "text": "replicated vms like that uh we can't do zero down time to",
    "start": "1084240",
    "end": "1090000"
  },
  {
    "text": "cluster upgrades we need to take the cluster offline and then take it online when you're doing upgrades like that's something you can do in full blown",
    "start": "1090000",
    "end": "1095919"
  },
  {
    "text": "kubernetes you can update the worker node one at a time we can't do that here because we just have the one with vm um",
    "start": "1095919",
    "end": "1103120"
  },
  {
    "text": "and then we for the same reason we can't do cluster auto trading so we can't increase the number of workloads worker nodes as",
    "start": "1103120",
    "end": "1110559"
  },
  {
    "text": "traffic increases that's something we can't do but other than that i think this is",
    "start": "1110559",
    "end": "1115919"
  },
  {
    "text": "looking promising i think i can work with this yeah",
    "start": "1115919",
    "end": "1121840"
  },
  {
    "text": "so the next thing so this is like the infrastructure layer we are going to go for k3s and we're going to to um",
    "start": "1121840",
    "end": "1128640"
  },
  {
    "text": "to use that as our now execution platform the next thing we wanted to solve was",
    "start": "1128640",
    "end": "1133679"
  },
  {
    "text": "the problem of these manual steps that we needed to take during deployment and",
    "start": "1133679",
    "end": "1138880"
  },
  {
    "text": "i had something on my radar which was called flux and the flux is",
    "start": "1138880",
    "end": "1144640"
  },
  {
    "text": "also a cncf incubation project it is originally by weaveworks and i",
    "start": "1144640",
    "end": "1149679"
  },
  {
    "text": "think they do most of the development still um it has built-in support for",
    "start": "1149679",
    "end": "1155120"
  },
  {
    "text": "two really really nice features helm and customize um helm is like i said it's like a",
    "start": "1155120",
    "end": "1162640"
  },
  {
    "text": "package manager for cloud-native deployment and customize let you do templating and configuration of those",
    "start": "1162640",
    "end": "1169760"
  },
  {
    "text": "things it has really good monitoring and alerting options so you can hook it into",
    "start": "1169760",
    "end": "1176000"
  },
  {
    "text": "your slack and it will post things when things go good or go bad",
    "start": "1176000",
    "end": "1181280"
  },
  {
    "text": "and i highly recommend to take a look at these two repos the customize helm example and the",
    "start": "1181280",
    "end": "1187200"
  },
  {
    "text": "multi-tenancy example so it actually out of the box supports multi-tenancy so",
    "start": "1187200",
    "end": "1192720"
  },
  {
    "text": "for my project that was not a concern but for bigger projects you may need it and it can it can definitely handle those as well",
    "start": "1192720",
    "end": "1200400"
  },
  {
    "text": "so the way flux works is that you put in some you put in some sources can i kind of do",
    "start": "1200400",
    "end": "1207360"
  },
  {
    "text": "stuff like that i can do this you put in sources and those are kubernetes cids as they're called",
    "start": "1207360",
    "end": "1215600"
  },
  {
    "text": "those can be sources and customization they are getting put into the kubernetes api",
    "start": "1215600",
    "end": "1221360"
  },
  {
    "text": "server so that's like the the database we store it in the kubernetes api server and then we run two things we run a",
    "start": "1221360",
    "end": "1227760"
  },
  {
    "text": "source controller which will actually fetch the configuration from github or gitlab or",
    "start": "1227760",
    "end": "1235840"
  },
  {
    "text": "chat museum which stores home charts so that will like periodically ping those services and say are there any new",
    "start": "1236080",
    "end": "1242480"
  },
  {
    "text": "changes that i need to be aware of here and then that will then instruct either the customized controller or the helm",
    "start": "1242480",
    "end": "1248720"
  },
  {
    "text": "controller to start the new deployment so it pulls every minute every 10 minutes whatever",
    "start": "1248720",
    "end": "1254799"
  },
  {
    "text": "you configure to then it automatically deploys those services so it's a it's a pull based method of deploying and there",
    "start": "1254799",
    "end": "1261200"
  },
  {
    "text": "are some namespaces or those kind of things for for the individual tenants",
    "start": "1261200",
    "end": "1267280"
  },
  {
    "text": "um and there's no guy in the drawing i'm not in",
    "start": "1267280",
    "end": "1272480"
  },
  {
    "text": "that drawing i like that um yes",
    "start": "1272480",
    "end": "1278000"
  },
  {
    "text": "this is like yeah let's skip that one okay um",
    "start": "1278000",
    "end": "1284000"
  },
  {
    "text": "last one we wanted to to take a look at was handling secrets in a better way and and",
    "start": "1284000",
    "end": "1290880"
  },
  {
    "text": "we went with something called sealed secret which is uh built by bitnami and seal secrets works",
    "start": "1290880",
    "end": "1298159"
  },
  {
    "text": "like this inside the cluster there's an agent running that has a public private key",
    "start": "1298159",
    "end": "1303600"
  },
  {
    "text": "and it it only has the private key and you can then export the public key that's safe to store everywhere then you",
    "start": "1303600",
    "end": "1309600"
  },
  {
    "text": "can use the public key to encrypt your secrets and then you can just store them in git because you don't have the",
    "start": "1309600",
    "end": "1316159"
  },
  {
    "text": "private key the privacy is in the cluster the public key instinct get uh and once you then uh",
    "start": "1316159",
    "end": "1322640"
  },
  {
    "text": "deploy a sealed secret inside kubernetes uh there's a this agent that will then",
    "start": "1322640",
    "end": "1327840"
  },
  {
    "text": "automatically unencrypt them and and make them readable by by the applications so that's really",
    "start": "1327840",
    "end": "1334080"
  },
  {
    "text": "really nice it works like this you encrypt the secret uh then you get a",
    "start": "1334080",
    "end": "1339520"
  },
  {
    "text": "sales secret of that and that is safe to publish everywhere so that could put you put in a public repo if you want that and then when you",
    "start": "1339520",
    "end": "1346799"
  },
  {
    "text": "deploy it uh you have a a controller inside the cluster that will then actually decrypt it and you get the",
    "start": "1346799",
    "end": "1353520"
  },
  {
    "text": "the file out in the end or the data out so this was what we this is what we were",
    "start": "1353520",
    "end": "1359520"
  },
  {
    "text": "looking into um so instead of me making changes via ssh on the actual",
    "start": "1359520",
    "end": "1366320"
  },
  {
    "text": "host machine i'm now down in the bottom here i'm just making changes in git and it will flux will automatically pull",
    "start": "1366320",
    "end": "1374240"
  },
  {
    "text": "a git authenticated with a token and then do the deployment as it was",
    "start": "1374240",
    "end": "1379840"
  },
  {
    "text": "um plug will make the changes to the app namespaces or to grafana prometheus whatever we have",
    "start": "1379840",
    "end": "1386159"
  },
  {
    "text": "so this is what we were looking into crucially we could actually fit this inside the same server so without any",
    "start": "1386159",
    "end": "1392640"
  },
  {
    "text": "resource increase or any cost increase we could run the same server the same setup",
    "start": "1392640",
    "end": "1399039"
  },
  {
    "text": "uh but better for me and better for everybody so that's really really nice um",
    "start": "1399039",
    "end": "1405360"
  },
  {
    "start": "1405000",
    "end": "2470000"
  },
  {
    "text": "yeah now let's do a demo why not",
    "start": "1405360",
    "end": "1411200"
  },
  {
    "text": "okay so this is my readme so i have three goals",
    "start": "1411440",
    "end": "1416640"
  },
  {
    "text": "i want to simplify the deployment i want better configuration of off-the-shelf tools and i want sql",
    "start": "1416640",
    "end": "1422080"
  },
  {
    "text": "management so first thing we need to do is create a virtual machine let's pick something with two cores and four kicks of ram",
    "start": "1422080",
    "end": "1428559"
  },
  {
    "text": "we need a few things here i need to install some tools so i don't lose my mind",
    "start": "1428559",
    "end": "1433679"
  },
  {
    "text": "set up some aliases those kind of things so that's all just prerequisites for us to",
    "start": "1433679",
    "end": "1440320"
  },
  {
    "text": "get to a point where we can then install k3s and over here i",
    "start": "1440320",
    "end": "1445760"
  },
  {
    "text": "hopefully have internet that's the curse of the light demo right let's see it",
    "start": "1445760",
    "end": "1453278"
  },
  {
    "text": "go to some website do the captcha yes",
    "start": "1454000",
    "end": "1461279"
  },
  {
    "text": "connect good i think we're back um so this is i just picked google cloud",
    "start": "1461279",
    "end": "1468080"
  },
  {
    "text": "because that's the one i know um the best anyway",
    "start": "1468080",
    "end": "1474080"
  },
  {
    "text": "so as it's just booting up here the the thing we're going to do is take a completely blank vm install kubernetes",
    "start": "1481039",
    "end": "1487840"
  },
  {
    "text": "on it and then install flux inside that cluster deploy sealed secrets and see that it",
    "start": "1487840",
    "end": "1494480"
  },
  {
    "text": "works so this is my cluster not my cluster this is my machine and if we",
    "start": "1494480",
    "end": "1501200"
  },
  {
    "text": "look at the ps like it's doing normal kubernetes",
    "start": "1501200",
    "end": "1506400"
  },
  {
    "text": "stuff not kubernetes normal linux stuff but there's no",
    "start": "1506400",
    "end": "1511760"
  },
  {
    "text": "anything running there's no docker does systemd that's that's about it so now i am going",
    "start": "1511760",
    "end": "1517520"
  },
  {
    "text": "to install k3s and all of the security guys you can now close your eyes",
    "start": "1517520",
    "end": "1523919"
  },
  {
    "text": "um so so i'm doing what you're never supposed to do you uh i'm i'm",
    "start": "1523919",
    "end": "1530559"
  },
  {
    "text": "downloading a file off the internet i'm just executing it straight away",
    "start": "1530559",
    "end": "1535840"
  },
  {
    "text": "i have looked inside the file so i know that it's good but but other than that let's see it so",
    "start": "1535840",
    "end": "1540960"
  },
  {
    "text": "now i'm installing kubernetes uh so we started at 16 36",
    "start": "1540960",
    "end": "1548880"
  },
  {
    "text": "41 let's see how long it takes before it's it's up and running um",
    "start": "1548880",
    "end": "1556000"
  },
  {
    "text": "and this is just um you know it's it's setting up these systemd scripts and in",
    "start": "1556000",
    "end": "1561440"
  },
  {
    "text": "it rc scripts it is installing a a few tools and then it's just i think it's also installing",
    "start": "1561440",
    "end": "1568720"
  },
  {
    "text": "container d so now it's running so that took like less than 30 seconds um and i just need to figure out where",
    "start": "1568720",
    "end": "1576080"
  },
  {
    "text": "is the config file so i can actually access it i can do something like that",
    "start": "1576080",
    "end": "1581520"
  },
  {
    "text": "so i have no parts in the default namespace that's all right i have uh something running it's still booting the",
    "start": "1581520",
    "end": "1587520"
  },
  {
    "text": "containers but like the runtime is there so now i'm actually ready to deploy something inside kubernetes",
    "start": "1587520",
    "end": "1593120"
  },
  {
    "text": "um and if we do watching here so now everything is",
    "start": "1593120",
    "end": "1599279"
  },
  {
    "text": "almost running and we should have uh have a cluster here yeah so",
    "start": "1599279",
    "end": "1605520"
  },
  {
    "text": "this is doing stuff yeah uh let's do another way uh k9s is just a different way of",
    "start": "1606000",
    "end": "1611919"
  },
  {
    "text": "looking at the kubernetes resources and this is a more graphical way of doing it so once all of those become blue we are",
    "start": "1611919",
    "end": "1617600"
  },
  {
    "text": "good to go i think sorry",
    "start": "1617600",
    "end": "1624000"
  },
  {
    "text": "so that was kubernetes we now have kubernetes great",
    "start": "1624000",
    "end": "1629039"
  },
  {
    "text": "uh i didn't have to write to internality to get permission i didn't have to write to my manager to get permission like it",
    "start": "1629039",
    "end": "1635200"
  },
  {
    "text": "just downloaded a file of the internet and then you have kubernetes like how simple can it be um [Music]",
    "start": "1635200",
    "end": "1642399"
  },
  {
    "text": "good good good good good good and you also see that there's traffic here so we can get traffic",
    "start": "1642399",
    "end": "1648159"
  },
  {
    "text": "actual http traffic into the cluster good let's not do that anymore uh let's",
    "start": "1648159",
    "end": "1654559"
  },
  {
    "text": "do another thing yes good so what i want to do now is i want to",
    "start": "1654559",
    "end": "1660559"
  },
  {
    "text": "um i want to install flux and flux consists of these four components that are running inside a cluster",
    "start": "1660559",
    "end": "1666640"
  },
  {
    "text": "and it has a really really nice bootstrapping script that will uh talk to github i have put in my",
    "start": "1666640",
    "end": "1673120"
  },
  {
    "text": "credentials it will talk to github create a new repo and commit those files to to the repo so let's do that",
    "start": "1673120",
    "end": "1680159"
  },
  {
    "text": "let's bootstrap flux why not and you will hopefully see that",
    "start": "1680159",
    "end": "1686000"
  },
  {
    "text": "it works so it's connecting to github it created a read performance here",
    "start": "1686000",
    "end": "1692159"
  },
  {
    "text": "uh and now it's doing some generation it generated some manifest and now it's pushing those and now it",
    "start": "1692159",
    "end": "1698240"
  },
  {
    "text": "starts syncing and now you see the blue that appeared up here those are the helm uh the flux",
    "start": "1698240",
    "end": "1704720"
  },
  {
    "text": "control plane so we have the source controller that is responsible for polling",
    "start": "1704720",
    "end": "1710640"
  },
  {
    "text": "github we have a customized helm control that is responsible for deploying stuff",
    "start": "1710640",
    "end": "1716000"
  },
  {
    "text": "and we have a notification controller that can then push notifications to slack or alert manager or wherever you",
    "start": "1716000",
    "end": "1721440"
  },
  {
    "text": "want to push them we're done so we started at 36 now it's 39",
    "start": "1721440",
    "end": "1728480"
  },
  {
    "text": "uh past the hour so that was uh three minutes to get kubernetes running and now we have an an automated pull-based",
    "start": "1728480",
    "end": "1735039"
  },
  {
    "text": "uh deployment situation so that's really nice let's take a quick look at what is",
    "start": "1735039",
    "end": "1742080"
  },
  {
    "text": "inside of our git repo go to demo",
    "start": "1742080",
    "end": "1747919"
  },
  {
    "text": "and it just has this one nested directory it has something called",
    "start": "1747919",
    "end": "1753279"
  },
  {
    "text": "flux system and it has my cluster inside this folder",
    "start": "1753279",
    "end": "1758480"
  },
  {
    "text": "and it has all of the flux components so that is what the bootstrap script is doing it is",
    "start": "1758480",
    "end": "1763919"
  },
  {
    "text": "deploying all these resources into kubernetes um maybe i should zoom a bit here",
    "start": "1763919",
    "end": "1769279"
  },
  {
    "text": "uh so that's that's just boilerplate that's not important for us uh what is important for us is uh this thing here",
    "start": "1769279",
    "end": "1776320"
  },
  {
    "text": "so this is the custom resource definition that flux uses to actually point out to github",
    "start": "1776320",
    "end": "1781919"
  },
  {
    "text": "saying go over here and and fetch things and we call this one flux system and it is on github.com",
    "start": "1781919",
    "end": "1789360"
  },
  {
    "text": "and under my user account and",
    "start": "1789360",
    "end": "1794399"
  },
  {
    "text": "so this is this is where we see the the difference between the source definition and then the actual deployment",
    "start": "1794399",
    "end": "1800880"
  },
  {
    "text": "definition so this is saying you can fetch stuff here nice thank you",
    "start": "1800880",
    "end": "1806480"
  },
  {
    "text": "uh and this is telling it please go and deploy those things that you can find in this directory",
    "start": "1806480",
    "end": "1812720"
  },
  {
    "text": "from uh from this git repository which is which we call flux system",
    "start": "1812720",
    "end": "1818159"
  },
  {
    "text": "uh and that is all we need to actually start deploying inside of instead of kundalinis",
    "start": "1818159",
    "end": "1824799"
  },
  {
    "text": "so cool so if we go back to the first thing we have we have actually simplified the",
    "start": "1824799",
    "end": "1830720"
  },
  {
    "text": "deployment already um so the next thing would be to have let's see it actually deploy something",
    "start": "1830720",
    "end": "1836559"
  },
  {
    "text": "let's see it deploy a in an off-the-shelf tool and uh i have one uh here which is",
    "start": "1836559",
    "end": "1843520"
  },
  {
    "text": "coincidentally sealed secrets uh and i have this big thing that the main thing is that we're going to curl uh something",
    "start": "1843520",
    "end": "1851120"
  },
  {
    "text": "from their github which is their deployment yaml then we're putting it into a file right",
    "start": "1851120",
    "end": "1857039"
  },
  {
    "text": "here uh we're creating a file and then we're ready to commit and push",
    "start": "1857039",
    "end": "1862880"
  },
  {
    "text": "so let's do that we'll let's do it here yes",
    "start": "1862880",
    "end": "1869120"
  },
  {
    "text": "so let's just pause one minute here and see the deployment that we just downloaded",
    "start": "1869120",
    "end": "1874240"
  },
  {
    "text": "that's just kubernetes yaml that's saying let's deploy a what is this this is a",
    "start": "1874240",
    "end": "1881600"
  },
  {
    "text": "uh it's a roll and then we have something else let's see we have something called a deployment in here somewhere",
    "start": "1881600",
    "end": "1890679"
  },
  {
    "text": "ah so down here we have something that is",
    "start": "1892960",
    "end": "1898640"
  },
  {
    "text": "actually the the running executable that's the deployment and it's called sealed sequence controller and it lives",
    "start": "1898640",
    "end": "1903760"
  },
  {
    "text": "in the cube system namespace and that is basically it",
    "start": "1903760",
    "end": "1908880"
  },
  {
    "text": "i think we are almost ready to deploy um",
    "start": "1908880",
    "end": "1914960"
  },
  {
    "text": "so let's add this infrastructure this is not a git repo what the hell",
    "start": "1914960",
    "end": "1920799"
  },
  {
    "text": "i need to clone some stuff uh let me just do that um so this is now the",
    "start": "1920799",
    "end": "1926640"
  },
  {
    "text": "operator that will be me which will will then work with the",
    "start": "1926640",
    "end": "1932080"
  },
  {
    "text": "directory um so let's do that this is in my home directory let's just",
    "start": "1932080",
    "end": "1938159"
  },
  {
    "text": "um okay let's remove it",
    "start": "1938159",
    "end": "1943200"
  },
  {
    "text": "and then do good clone i have my password in here it's",
    "start": "1943200",
    "end": "1949440"
  },
  {
    "text": "not unauthenticated in the go to demo we'll just do that",
    "start": "1949440",
    "end": "1955679"
  },
  {
    "text": "curl command again so yes",
    "start": "1955679",
    "end": "1962320"
  },
  {
    "text": "so now we have the clusters my cluster that's what we saw in github before and then we have the",
    "start": "1962320",
    "end": "1967840"
  },
  {
    "text": "infrastructure which uh i've decided to call it infrastructure here this is seal secret it's like a",
    "start": "1967840",
    "end": "1973360"
  },
  {
    "text": "shared component in the infrastructure so that's it",
    "start": "1973360",
    "end": "1979120"
  },
  {
    "text": "and then we need to tell um we need to tell flux to deploy stuff",
    "start": "1979120",
    "end": "1984480"
  },
  {
    "text": "in that new directory and we do that by creating a customization sorry um",
    "start": "1984480",
    "end": "1990640"
  },
  {
    "text": "i cannot double click please remember creating a customization with the same",
    "start": "1990640",
    "end": "1996399"
  },
  {
    "text": "source so it's in the same directory it's in this it's the same repo",
    "start": "1996399",
    "end": "2001440"
  },
  {
    "text": "we'll synchronize every five minutes and we'll put that file in here in the my cluster file",
    "start": "2001440",
    "end": "2006960"
  },
  {
    "text": "so let's do that yes",
    "start": "2006960",
    "end": "2012240"
  },
  {
    "text": "so now in clusters my cluster i now also have something called infrastructure customization which just say deploy",
    "start": "2012240",
    "end": "2018720"
  },
  {
    "text": "stuff inside the infrastructure directory and we will need to",
    "start": "2018720",
    "end": "2025679"
  },
  {
    "text": "do some more stuff in clusters my clusters i have a",
    "start": "2025679",
    "end": "2033518"
  },
  {
    "text": "flux system i have that what is influx system",
    "start": "2033600",
    "end": "2038398"
  },
  {
    "text": "okay let's just see how it goes so i have",
    "start": "2039120",
    "end": "2046080"
  },
  {
    "text": "get add clusters get infrastructure",
    "start": "2046080",
    "end": "2051280"
  },
  {
    "text": "so we have three new files um deploy sealed",
    "start": "2052240",
    "end": "2060200"
  },
  {
    "text": "let's deploy cl secrets i'm just using a few um um",
    "start": "2061280",
    "end": "2067760"
  },
  {
    "text": "a few uh aliases so that was just git commit and get push",
    "start": "2068000",
    "end": "2073040"
  },
  {
    "text": "um so now we should hopefully see flux picking something up",
    "start": "2073040",
    "end": "2079599"
  },
  {
    "text": "close to me yeah so now you actually see that flux is now deploying cl secrets controller",
    "start": "2082800",
    "end": "2089440"
  },
  {
    "text": "uh so that that was uh now 45 so that's six minutes for us to to to deploy",
    "start": "2089440",
    "end": "2095118"
  },
  {
    "text": "sealed secrets get kubernetes first of all uh deploy flux bootstrap flux install seal secrets",
    "start": "2095119",
    "end": "2102560"
  },
  {
    "text": "the last thing is that we want to actually sorry encrypt a sealed secret",
    "start": "2102560",
    "end": "2108720"
  },
  {
    "text": "so let me get the public key that we mentioned before out of the cluster and i have the",
    "start": "2108720",
    "end": "2114720"
  },
  {
    "text": "cubeseal command here which will just fetch the certificate and put it in a pem file so",
    "start": "2114720",
    "end": "2122480"
  },
  {
    "text": "my cluster that's just a simple certificate set the public key and now i can actually",
    "start": "2122480",
    "end": "2128320"
  },
  {
    "text": "encrypt secrets with that with that secret so let's",
    "start": "2128320",
    "end": "2135599"
  },
  {
    "text": "let's create a secret so i'm creating a secret that is a literal secret such as a plain text it has a value and that is",
    "start": "2135680",
    "end": "2142079"
  },
  {
    "text": "hello secret go to audience i'm calling it my secret i'm doing a dry run because",
    "start": "2142079",
    "end": "2147599"
  },
  {
    "text": "i don't want it to actually get executed inside the cluster right now i'm just outputting it to a secret",
    "start": "2147599",
    "end": "2153440"
  },
  {
    "text": "here and those of you who know this is not secret in any way this is",
    "start": "2153440",
    "end": "2159839"
  },
  {
    "text": "uh this is not secret in any way it's just base64 encoded and encoding that's encoding is not",
    "start": "2159839",
    "end": "2165760"
  },
  {
    "text": "encryption i hope you all know that so if i just do base64 decode i get my",
    "start": "2165760",
    "end": "2171359"
  },
  {
    "text": "secret back but what we can do is we can use the cube seal cli to then actually use the",
    "start": "2171359",
    "end": "2178800"
  },
  {
    "text": "certificate that we just downloaded use the secret that we output with the dry run and put it into an encrypted",
    "start": "2178800",
    "end": "2184960"
  },
  {
    "text": "secret and we can't decode that one that's the point um so",
    "start": "2184960",
    "end": "2190160"
  },
  {
    "text": "we now have an encrypted secret and it's a different kind of",
    "start": "2190160",
    "end": "2196240"
  },
  {
    "text": "of object it's a seal circuit it lives inside of the default namespace and has",
    "start": "2196240",
    "end": "2201280"
  },
  {
    "text": "a value that's that's basically it um yeah so let's just try that trick",
    "start": "2201280",
    "end": "2206800"
  },
  {
    "text": "again to decode it i'm just gonna get garbage out encrypted file didn't i call it that",
    "start": "2206800",
    "end": "2213760"
  },
  {
    "text": "encrypted secret uh inconsistency will be the death of me um yes so that was encrypted and it",
    "start": "2213760",
    "end": "2221280"
  },
  {
    "text": "messes up my uh my terminal um let's do it again",
    "start": "2221280",
    "end": "2227280"
  },
  {
    "text": "that's encrypted um so we now have a way to actually store our",
    "start": "2227280",
    "end": "2233680"
  },
  {
    "text": "secrets securely inside of git and we can push that into good that would be",
    "start": "2233680",
    "end": "2238880"
  },
  {
    "text": "that would be cool so let's uh add the secret to git let's do that let's make a",
    "start": "2238880",
    "end": "2246240"
  },
  {
    "text": "let's make a directory called apps and let's make it secret reader",
    "start": "2246240",
    "end": "2254480"
  },
  {
    "text": "so let's move the encrypted secret into apps secret reader and",
    "start": "2254480",
    "end": "2260480"
  },
  {
    "text": "let's make a deployment that will actually read that one so let's do this",
    "start": "2260480",
    "end": "2266480"
  },
  {
    "text": "so in apps secret reader let's it deployment",
    "start": "2266480",
    "end": "2271838"
  },
  {
    "text": "i can't also complete things that don't exist who would have thought so it is just",
    "start": "2273200",
    "end": "2278320"
  },
  {
    "text": "deploying the very very simple uh image here called alpine and the only thing he's going to do is run bin sh",
    "start": "2278320",
    "end": "2285040"
  },
  {
    "text": "and echo the secret and then it's going to sleep indefinitely so that should uh decrypt the secret",
    "start": "2285040",
    "end": "2292480"
  },
  {
    "text": "okay right crit yes thank you app secret reader",
    "start": "2294800",
    "end": "2300560"
  },
  {
    "text": "we just need to do one thing so customize customize and we need to create",
    "start": "2300560",
    "end": "2307920"
  },
  {
    "text": "dash auto detect",
    "start": "2307920",
    "end": "2311480"
  },
  {
    "text": "auto detect yes so now we have three files we have deployment we have the encrypted secret",
    "start": "2313359",
    "end": "2319119"
  },
  {
    "text": "itself and then we have the customization and the customization is just like listing the the resource that you want to deploy from this directory",
    "start": "2319119",
    "end": "2326800"
  },
  {
    "text": "so let's say get that apps secret reader",
    "start": "2326800",
    "end": "2332000"
  },
  {
    "text": "so we have the two new files and we can also commit the public key i'm not going to do that right now",
    "start": "2332000",
    "end": "2338640"
  },
  {
    "text": "and then we need to make a new customization and it's going to do almost this not quite",
    "start": "2338640",
    "end": "2346400"
  },
  {
    "text": "it is going to go into apps customization and it is",
    "start": "2346480",
    "end": "2351520"
  },
  {
    "text": "going to deploy can i do stuff like that i cannot",
    "start": "2351520",
    "end": "2357520"
  },
  {
    "text": "let's just do it live it is going to deploy things from the apps and it is",
    "start": "2359839",
    "end": "2365119"
  },
  {
    "text": "going to be called apps and it is going to be called apps here as well",
    "start": "2365119",
    "end": "2371280"
  },
  {
    "text": "so this is just again telling flux please deploy whatever files are in this directory",
    "start": "2371280",
    "end": "2377200"
  },
  {
    "text": "and put it in a file here um so cat my clusters uh apps",
    "start": "2377200",
    "end": "2383440"
  },
  {
    "text": "customization so pointing to the same flux system repo",
    "start": "2383440",
    "end": "2389040"
  },
  {
    "text": "so let's add clusters",
    "start": "2389040",
    "end": "2394040"
  },
  {
    "text": "let's do this so i'm now at a point where i normally",
    "start": "2397680",
    "end": "2403839"
  },
  {
    "text": "would do a pull request and get some feedback from my co-workers but yolo",
    "start": "2403839",
    "end": "2411800"
  },
  {
    "text": "and flux will pick this up very shortly we can also force it to do it but like it's flux",
    "start": "2416480",
    "end": "2424000"
  },
  {
    "text": "uh what the is it called nut uh what the hell is it called uh",
    "start": "2424000",
    "end": "2431599"
  },
  {
    "text": "it is called resume or reconcile",
    "start": "2431760",
    "end": "2436359"
  },
  {
    "text": "let's get customizations with",
    "start": "2438079",
    "end": "2444400"
  },
  {
    "text": "so it hasn't synced anything yet ah now it's doing it so it's now so i could",
    "start": "2445839",
    "end": "2451359"
  },
  {
    "text": "wait for it i could also do more stuff it is now running and let's just take a",
    "start": "2451359",
    "end": "2456880"
  },
  {
    "text": "look at the logs we have decrypted this secret here so",
    "start": "2456880",
    "end": "2462160"
  },
  {
    "text": "that's it and that took 11 minutes um let's go back to the",
    "start": "2462160",
    "end": "2467599"
  },
  {
    "text": "slides um so we had a few problems that we wanted to solve we wanted to simplify",
    "start": "2467599",
    "end": "2473119"
  },
  {
    "start": "2470000",
    "end": "2493000"
  },
  {
    "text": "the deployment i think we've done that so jack we want a better configuration of common",
    "start": "2473119",
    "end": "2478560"
  },
  {
    "text": "tools i just showed you plain yaml but we can also do helm deployments with flux and we can do customizations of",
    "start": "2478560",
    "end": "2485119"
  },
  {
    "text": "those helm charts and we have also managed to to fix this issue with with secret management so",
    "start": "2485119",
    "end": "2491599"
  },
  {
    "text": "that's a success so where do we go from here of course we can do more clusters we can do staging",
    "start": "2491599",
    "end": "2498240"
  },
  {
    "start": "2493000",
    "end": "2579000"
  },
  {
    "text": "and dev and we did that in the project so that's easy",
    "start": "2498240",
    "end": "2503200"
  },
  {
    "text": "if we want to if we are getting close to the limit of the resources in the vm we can of course just you know pause the vm",
    "start": "2503760",
    "end": "2510240"
  },
  {
    "text": "in a cloud environment add more resources and then resume it and then we have horizontally a virtually scaled vm",
    "start": "2510240",
    "end": "2516160"
  },
  {
    "text": "that's awesome we can also do multi-node k3s so we can actually join worker nodes to it so that",
    "start": "2516160",
    "end": "2522319"
  },
  {
    "text": "becomes more highly available on the worker and the",
    "start": "2522319",
    "end": "2527359"
  },
  {
    "text": "yeah the workload level but not under control level we can also do that",
    "start": "2527359",
    "end": "2532880"
  },
  {
    "text": "and we can of course move to to manage communities because everything's in good so it's super easy to move",
    "start": "2532880",
    "end": "2539520"
  },
  {
    "text": "we also have another a lot of more tools that we're actually using in the project so we have single sign-on for our",
    "start": "2539520",
    "end": "2545040"
  },
  {
    "text": "monitoring tools using off-the-shelf easily configurable tools we can use",
    "start": "2545040",
    "end": "2550400"
  },
  {
    "text": "we can do automatic docker upgrades based on tags so that's automatically deploying to",
    "start": "2550400",
    "end": "2555599"
  },
  {
    "text": "stating every time we build a new docker image we can do better developer experience losing even assume",
    "start": "2555599",
    "end": "2562240"
  },
  {
    "text": "achieving live reloading using something called tilt we can do alerting with alert manager get them in slack we can do validation",
    "start": "2562240",
    "end": "2569119"
  },
  {
    "text": "based on the pull request and of course we can use web hooks to to show the deployment status inside git or inside",
    "start": "2569119",
    "end": "2575040"
  },
  {
    "text": "our request so that was my talk",
    "start": "2575040",
    "end": "2582160"
  },
  {
    "start": "2579000",
    "end": "2593000"
  },
  {
    "text": "thank you",
    "start": "2582160",
    "end": "2585400"
  }
]