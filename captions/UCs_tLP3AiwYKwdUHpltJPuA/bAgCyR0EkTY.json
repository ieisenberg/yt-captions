[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "okay so I'm going to go through this this is this is going to be sort of a technical talk I think that the title gives it away um I I sent like a",
    "start": "12719",
    "end": "19600"
  },
  {
    "text": "description over to the go-to folks and that seems to have ended up in the program as the title the title was like four lines long but at least you know",
    "start": "19600",
    "end": "25359"
  },
  {
    "text": "exactly what you're going to get so yeah I'm going to go through this it's going to be you in a fairly low level in the uh you're just looking at some practical",
    "start": "25359",
    "end": "32398"
  },
  {
    "text": "tips and the the tooling that's available on this stuff uh there is a demo it wasn't working about 20 minutes",
    "start": "32399",
    "end": "37840"
  },
  {
    "text": "ago it was working yesterday I'm a professional but it wasn't working about 20 minutes ago uh I think the software got updated but we'll try it and if not",
    "start": "37840",
    "end": "44280"
  },
  {
    "text": "I'll explain what you know what you're meant to see and what's meant to happen um please do ask questions as we go",
    "start": "44280",
    "end": "50559"
  },
  {
    "text": "along because it's it's only a fairly small group and I'm not necessarily got 50 minutes worth of of content so let's",
    "start": "50559",
    "end": "56680"
  },
  {
    "text": "uh let's open the discussion up so we'll start off with a box um this",
    "start": "56680",
    "end": "62879"
  },
  {
    "start": "60000",
    "end": "853000"
  },
  {
    "text": "so let's say this is a container image right this is a a container image that that you've built or that you found on",
    "start": "62879",
    "end": "68280"
  },
  {
    "text": "the internet and you want to run it so what you know what could possibly go wrong what's what's not to trust about",
    "start": "68280",
    "end": "73920"
  },
  {
    "text": "this opaque blog of software well for a start you know there's the computer that it's running",
    "start": "73920",
    "end": "79920"
  },
  {
    "text": "on um the the zero trust buzzword gets banded around an awful lot I'm going to",
    "start": "79920",
    "end": "85600"
  },
  {
    "text": "try not to say it today uh but obviously you know there could be threats on the network you know this thing needs to be",
    "start": "85600",
    "end": "91520"
  },
  {
    "text": "protected from its its neighbors on the network its neighbors in terms of other VMS that are on the same host other",
    "start": "91520",
    "end": "97360"
  },
  {
    "text": "containers that the same cluster even if they don't directly attack it they can be noisy and whatever else this is this",
    "start": "97360",
    "end": "103200"
  },
  {
    "text": "is you know sort of well studied um it's still a huge open area but I'm I'm not going to go into it that's kind of not",
    "start": "103200",
    "end": "108560"
  },
  {
    "text": "the point uh of this talk because you'd be talking about TPMS and bioses and secure Boot and you know workload",
    "start": "108560",
    "end": "114560"
  },
  {
    "text": "attestation all that kind of stuff but within our container there you",
    "start": "114560",
    "end": "120159"
  },
  {
    "text": "know are going to be several things so shown here in blue is probably our app right so let's say we're we're building",
    "start": "120159",
    "end": "126159"
  },
  {
    "text": "this container or we've or we've downloaded it you know maybe this is WordPress uh so the blue blob is the the lovely PHP of Wordpress so that's going",
    "start": "126159",
    "end": "133720"
  },
  {
    "text": "to obviously be in our container but it's also going to contain other things you know we these so these orange uh",
    "start": "133720",
    "end": "139360"
  },
  {
    "text": "packages or the other packages you might find in a container just like you might find on a um you know like a a manually",
    "start": "139360",
    "end": "145440"
  },
  {
    "text": "installed Linux host so we might have a C library we might have Li SS",
    "start": "145440",
    "end": "150599"
  },
  {
    "text": "we might have some certs more on which later and of course we might have a Java runtime or we might have a PHP runtime",
    "start": "150599",
    "end": "156720"
  },
  {
    "text": "or or something like that so uh zero trust okay maybe I'll say it once zero",
    "start": "156720",
    "end": "162000"
  },
  {
    "text": "trust says to trust nothing but that's obviously not quite true right a zero trust network isn't about trusting",
    "start": "162000",
    "end": "168599"
  },
  {
    "text": "nothing it's about sort of assuming nothing it's about not trusting things just based on where they are in the",
    "start": "168599",
    "end": "174040"
  },
  {
    "text": "network it's it's about actually asking for an identity for a JWT or a certificate or something",
    "start": "174040",
    "end": "180720"
  },
  {
    "text": "uh and we're going to look at the sort of compute side of things today and it's it's kind of the same thing we have to trust some stuff ideally we want to",
    "start": "180720",
    "end": "187920"
  },
  {
    "text": "trust everything in this container because that's what we're going to run right but the first step to that is",
    "start": "187920",
    "end": "193400"
  },
  {
    "text": "to know what's in it and then we can start looking at at where that comes from and how it's built and what we",
    "start": "193400",
    "end": "198879"
  },
  {
    "text": "should trust and what we shouldn't trust so the first step is to understand what's in this container so the the application I these",
    "start": "198879",
    "end": "206319"
  },
  {
    "text": "things are all the same really I've colored them different colors but they're all just you know Blobs of of code in the container but uh you know",
    "start": "206319",
    "end": "212799"
  },
  {
    "text": "our application or the application this WordPress that we've downloaded is actually probably going to be a modern",
    "start": "212799",
    "end": "218239"
  },
  {
    "text": "complicated piece of software it's going to have a bunch of dependencies so if this is written in PHP you know I",
    "start": "218239",
    "end": "224480"
  },
  {
    "text": "actually I really don't know enough about PHP these are all the like pair packages or something if this is written in go these are all the go dependencies",
    "start": "224480",
    "end": "231360"
  },
  {
    "text": "right um that are going to make up this app because nobody writes anything from scratch these",
    "start": "231360",
    "end": "236920"
  },
  {
    "text": "days and these orange things these other packages you know you might just see lib",
    "start": "236920",
    "end": "242280"
  },
  {
    "text": "SSL in there but that thing's probably you know going to have dependencies in lib ssl's case not too many um but it",
    "start": "242280",
    "end": "248319"
  },
  {
    "text": "still used the sort of cryp crypto Primitives but if your container room has just got um a shell in it that's",
    "start": "248319",
    "end": "254319"
  },
  {
    "text": "built from a whole load of packages like readline and whatever so everything in this you know in this container even if",
    "start": "254319",
    "end": "259759"
  },
  {
    "text": "we say oh well this is the engine X container it's not just engine X it's also got a Lipsy and some other stuff",
    "start": "259759",
    "end": "265720"
  },
  {
    "text": "and maybe a shell and a whole load more stuff which will come on to you know even that's not enough to reason about",
    "start": "265720",
    "end": "271320"
  },
  {
    "text": "we have to look at all the dependency trees of all of these things and you know even if if this so",
    "start": "271320",
    "end": "279160"
  },
  {
    "text": "the orange things is saying OS package this package has other packages and dependencies you know I I apt",
    "start": "279160",
    "end": "285080"
  },
  {
    "text": "install say I actually install engine X locally right it's going to pull in a bunch of dependent packages we've always",
    "start": "285080",
    "end": "290320"
  },
  {
    "text": "seen this you know you type app to install one thing it's like do you want to install these 50 other things those 50 other things are pieces of software",
    "start": "290320",
    "end": "296919"
  },
  {
    "text": "which themselves are going to have dependencies in there they language see libraries that are linked into them go dependencies Java dependencies whatever",
    "start": "296919",
    "end": "303560"
  },
  {
    "text": "so there's a lot of stuff is the point right and it's not trivial to work out what are those things are especially",
    "start": "303560",
    "end": "310320"
  },
  {
    "text": "because depending on the language that these things are written in you know dependencies are uh grabbed in different",
    "start": "310320",
    "end": "315880"
  },
  {
    "text": "ways and they're they're built into the final package in different ways and of course if it's a compiled language it might actually not be obvious you know",
    "start": "315880",
    "end": "322440"
  },
  {
    "text": "when you've just got the end result it might not be easy to just open the lid and work out what's in there with with python it is because you just see all",
    "start": "322440",
    "end": "328639"
  },
  {
    "text": "the code right uh with like a c binary it's not necessarily that",
    "start": "328639",
    "end": "334360"
  },
  {
    "text": "simple so why do we care about this well this is a lot I said this is a lot of software and we need to understand",
    "start": "334360",
    "end": "339800"
  },
  {
    "text": "what's running in order to be able to to work out if we can trust it there's there's lots of attacks against this",
    "start": "339800",
    "end": "345600"
  },
  {
    "text": "actually I mean supply chain attacks have been a huge thing they've come I think to fruition like people are",
    "start": "345600",
    "end": "351600"
  },
  {
    "text": "talking about them a lot recently it goes all the way back to RSA U way before obviously but like RSA was a big",
    "start": "351600",
    "end": "358400"
  },
  {
    "text": "Stu net was a big news word thing I would say um but you much more recently",
    "start": "358400",
    "end": "364000"
  },
  {
    "text": "people have been talking about this a lot so I won't go through all of them you can you can find lots of resources on the internet but you know the red one",
    "start": "364000",
    "end": "369720"
  },
  {
    "text": "is a bad package uh and the obvious things are things like you know typo squatting right so I'm doing some node",
    "start": "369720",
    "end": "375639"
  },
  {
    "text": "obviously I want low Dash because I'm not going to write all of that stuff by hand you know but I accidentally mistype",
    "start": "375639",
    "end": "380759"
  },
  {
    "text": "Yan add mod Dash people will squat malicious packages on similar names that",
    "start": "380759",
    "end": "387759"
  },
  {
    "text": "you might typo so I type uh you know yarn add mod Dash and I don't get an error because there is a",
    "start": "387759",
    "end": "393240"
  },
  {
    "text": "package called mod Das but it's it's a malicious one because somebody's typos scotting dependency confusion was",
    "start": "393240",
    "end": "398919"
  },
  {
    "text": "another cool one that came up recently um cool in the you know you got to hand it to them kind of sense obviously not",
    "start": "398919",
    "end": "404240"
  },
  {
    "text": "not great for us uh which is where a lot of these package managers will search",
    "start": "404240",
    "end": "409599"
  },
  {
    "text": "the global public package repository before your internal one so if you're trying to add a dependency on one of",
    "start": "409599",
    "end": "414840"
  },
  {
    "text": "your internal packages that's in your you know artifactory or whatever your local repo",
    "start": "414840",
    "end": "420360"
  },
  {
    "text": "it'll actually go search the public one first and you know if you're installing trying to install Acme Corp Das utils",
    "start": "420360",
    "end": "427560"
  },
  {
    "text": "you might not expect that to exist on the internet so normally it would fall back to your local package repo except people squat those as well they can they",
    "start": "427560",
    "end": "434120"
  },
  {
    "text": "can brute force or or guess the names so uh so that yeah that's called",
    "start": "434120",
    "end": "439479"
  },
  {
    "text": "dependency confusion that's been another good one recently and as I say there's more this isn't really a sort of security talk I won't go into all of",
    "start": "439479",
    "end": "445639"
  },
  {
    "text": "them so what can we do about this all right we people talk a lot about sort of signing container images maybe that's",
    "start": "445639",
    "end": "451960"
  },
  {
    "text": "why you're here maybe you want to learn how to you know sort of sign your container images but what does that mean",
    "start": "451960",
    "end": "458520"
  },
  {
    "text": "like signing this putting a tick on it doesn't make the software good right what am I certifying like I'm certifying",
    "start": "458520",
    "end": "465039"
  },
  {
    "text": "that the big the big tall of stuff that we're going to end up running is the same as the one that pass passes across",
    "start": "465039",
    "end": "470680"
  },
  {
    "text": "my desk so I can do all of these checks you know at runtime I can have my",
    "start": "470680",
    "end": "475800"
  },
  {
    "text": "kubernetes emission controllers and whatever that will sure check the signature verify that what I'm running is exactly the same as what I signed but",
    "start": "475800",
    "end": "482479"
  },
  {
    "text": "if I'm just signing what came across my desk then that's not really telling me it's telling me it's not being tampered",
    "start": "482479",
    "end": "488000"
  },
  {
    "text": "afterwards but it's not telling me that what I built was good and my argument to you is that what I built probably isn't all that good because it's super",
    "start": "488000",
    "end": "495720"
  },
  {
    "text": "complicated the other thing I can do and the other thing that's a big topic recently is I can this is meant to be an es bomb I can make an s bomb a software",
    "start": "499960",
    "end": "507400"
  },
  {
    "text": "bill of materials so I can actually lit what's in all of this stuff now that's",
    "start": "507400",
    "end": "512919"
  },
  {
    "text": "that is super useful and that's something that we'll that we'll look at um that helps me reason about what I've",
    "start": "512919",
    "end": "519518"
  },
  {
    "text": "built uh I might want to go read that es bomb and sort of you know reason about whether all those things are necessary and it helps me reason about what I'm",
    "start": "519519",
    "end": "525800"
  },
  {
    "text": "running so if I build you know this this thing with all of these packages in and",
    "start": "525800",
    "end": "531959"
  },
  {
    "text": "I make that manifest of what's in it then I can check that when the thing runs it might be a month later it might",
    "start": "531959",
    "end": "537880"
  },
  {
    "text": "be six months later you know there might have been cves discovered in some of these things since and I can then you",
    "start": "537880",
    "end": "542920"
  },
  {
    "text": "know Tech I know exactly what's in here especially if it's a compiled language as I say I can't necessarily do that at",
    "start": "542920",
    "end": "547959"
  },
  {
    "text": "runtime um but at the build stage that I know everything that's coming in I can see what's in here I can make a list of",
    "start": "547959",
    "end": "553720"
  },
  {
    "text": "it I can sign that and then later when we come to run this thing we use the signature to make sure that the the list",
    "start": "553720",
    "end": "559880"
  },
  {
    "text": "hasn't been tampered and then we can look through the list and check that there's you know there's uh we haven't",
    "start": "559880",
    "end": "564959"
  },
  {
    "text": "sort of blocked block listed any of those packages it helps but again it's not you",
    "start": "564959",
    "end": "571320"
  },
  {
    "text": "know everything uh again don't I mean so the signature will let us later attest",
    "start": "571320",
    "end": "576839"
  },
  {
    "text": "that the the uh es bomb hasn't been tampered with but again don't just sign es bombs that come across your desk",
    "start": "576839",
    "end": "582279"
  },
  {
    "text": "right as the sort of Staff engineer or security guy or whatever um because that that doesn't tell us anything you've got",
    "start": "582279",
    "end": "587519"
  },
  {
    "text": "to check it you know your CI should be making this thing and you you need to do a lot of work to make sure your CI",
    "start": "587519",
    "end": "592760"
  },
  {
    "text": "pipeline is secure and repeatable and whatever so that we can actually trust the sbon when we when we come to sign it",
    "start": "592760",
    "end": "598560"
  },
  {
    "text": "but this this is this is obviously a great first step in in trying to address a lot of these",
    "start": "598560",
    "end": "605079"
  },
  {
    "text": "problems one of the reasons that it's hard to sort of reason about what's going on in these containers is because",
    "start": "606120",
    "end": "611360"
  },
  {
    "text": "of the way we normally build them so the way we normally build them is that the we build up these layers if you ever",
    "start": "611360",
    "end": "616560"
  },
  {
    "text": "said you know Docker run something and you'll see fetching fetching fetching you get this list of of several things that'll download these are all the",
    "start": "616560",
    "end": "622640"
  },
  {
    "text": "different layers it's essentially talles stacked on top of tballs and that's because of the way",
    "start": "622640",
    "end": "628600"
  },
  {
    "text": "that most containers are made they're made with a Docker file right and the docker file each line in that Docker file is another command that does",
    "start": "628600",
    "end": "635720"
  },
  {
    "text": "something that makes another layer so each each line of the docky that says you know add this actually makes another",
    "start": "635720",
    "end": "641639"
  },
  {
    "text": "layer it makes a tble with just that thing in and then the tall's are extracted on top of each other I mean basically it's basically that",
    "start": "641639",
    "end": "648040"
  },
  {
    "text": "simple and a Docker file is so you end up because the docker file is this sort of multi-line thing you end up with",
    "start": "648040",
    "end": "653639"
  },
  {
    "text": "these multiple layers and the docker file is also imperative right any each any of those layers could be a run",
    "start": "653639",
    "end": "659040"
  },
  {
    "text": "command where you can run arbitary bash script or even if it doesn't look like it even if it runs you know yum install",
    "start": "659040",
    "end": "665519"
  },
  {
    "text": "or RPM install or those packages those package formats allow for hook scripts pre-install post-install hook scripts so",
    "start": "665519",
    "end": "672200"
  },
  {
    "text": "again there can be arbitrary pieces of script in there and they you know they could contain a m a mistake they could",
    "start": "672200",
    "end": "679000"
  },
  {
    "text": "do something you know unwittingly dangerous or they could have malicious code put in the my actor right this is",
    "start": "679000",
    "end": "685320"
  },
  {
    "text": "obviously we've seen this a load of times this is a very common attack is you somebody manages to get commit",
    "start": "685320",
    "end": "691200"
  },
  {
    "text": "privileges to you know an open source package and they'll put malicious code in there they'll put a back door in",
    "start": "691200",
    "end": "697240"
  },
  {
    "text": "they'll put a shell in they'll put often they just put a crypto Miner in right they'll just fish somebody's email and",
    "start": "697240",
    "end": "703160"
  },
  {
    "text": "they'll get access to I think it happened to react or something didn't it like a massive project everybody was downloading and some script Kitty just",
    "start": "703160",
    "end": "709680"
  },
  {
    "text": "put a crypto Miner in there right and the next day everybody downloaded the latest version of of react and like every server across the world just like",
    "start": "709680",
    "end": "715959"
  },
  {
    "text": "mine this kid Monero for like five minutes until somebody realized but it was a lot of parallel compute I think you made quite a lot of money um but",
    "start": "715959",
    "end": "723279"
  },
  {
    "text": "obviously there's much more subtle malicious things you can you can do with a lot of these packages uh and these pre",
    "start": "723279",
    "end": "729279"
  },
  {
    "text": "and post install hooks are are definitely a vector so anyway all I'm saying is you know all of these things",
    "start": "729279",
    "end": "734360"
  },
  {
    "text": "arbit scripting languages they could do anything and and they're T incomplete so it is the halting problem we cannot know",
    "start": "734360",
    "end": "740240"
  },
  {
    "text": "we can't statically analyze it we can't know whether these things are going to do malicious things or not uh they are",
    "start": "740240",
    "end": "746519"
  },
  {
    "text": "all genuine attack vectors so it's it's best to just to just not run them the other thing I'm kind of showing here is",
    "start": "746519",
    "end": "752720"
  },
  {
    "text": "that we can overwrite things so I've got a base image here you know but maybe my company wants us to use red hat",
    "start": "752720",
    "end": "758800"
  },
  {
    "text": "Enterprise uh you know because it's it's secure and it's stable and it's it's very mature and it's you know heavily",
    "start": "758800",
    "end": "764680"
  },
  {
    "text": "curated by red hat but of course that means that everything in it like a long way out of date so I install some other",
    "start": "764680",
    "end": "771040"
  },
  {
    "text": "package in that first layer and this package wants some postquantum crypto Cipher because of course it does so that",
    "start": "771040",
    "end": "778120"
  },
  {
    "text": "thing pulls in as a dependency a much my base image say has lib SSL in it but",
    "start": "778120",
    "end": "783440"
  },
  {
    "text": "this fancy package pills in a much newer version of lib SSL as a dependency that's got a bunch of these newer",
    "start": "783440",
    "end": "788839"
  },
  {
    "text": "ciphers in so I've now kind of without realizing it I've installed a newer version of Li SSL over the top nobody",
    "start": "788839",
    "end": "795279"
  },
  {
    "text": "has a quantum computer yet uh but what new version of Liv ssls probably do have is a bunch of oday because they're brand",
    "start": "795279",
    "end": "801519"
  },
  {
    "text": "new right whereas the the old red hat version although it's old is is probably going to be pretty secure so we this can",
    "start": "801519",
    "end": "808000"
  },
  {
    "text": "happen without us even realizing it and that's another artifact of the fact that these things are built up in",
    "start": "808000",
    "end": "814480"
  },
  {
    "text": "layers so I think it's better to think about these things horizontally rather than vertically right what packages do",
    "start": "814480",
    "end": "821720"
  },
  {
    "text": "we want in this container image at the end and can we build it in a declarative way can I declare what the end artifact",
    "start": "821720",
    "end": "828399"
  },
  {
    "text": "should look like rather than talking about the steps that I want to take to get",
    "start": "828399",
    "end": "833680"
  },
  {
    "text": "there and even better than that and hold this thought we can use a package format that doesn't actually allow these",
    "start": "833680",
    "end": "839839"
  },
  {
    "text": "arbitrary hook scripts right so that if I can declare a set of packages in this thing I know exactly what it's going to",
    "start": "839839",
    "end": "845279"
  },
  {
    "text": "look like because none of them can go and do T incomplete things that I can never that I can never reason",
    "start": "845279",
    "end": "852600"
  },
  {
    "text": "about so uh quick poll how how do you all build your container images like if",
    "start": "852600",
    "end": "858000"
  },
  {
    "start": "853000",
    "end": "1233000"
  },
  {
    "text": "you've got a piece of software in your company you're trying to build it into an image to run in you know kubernetes",
    "start": "858000",
    "end": "863880"
  },
  {
    "text": "or um ECS or anything like that how do we build them everybody use Docker files",
    "start": "863880",
    "end": "870279"
  },
  {
    "text": "cool right that's that's like most people right so Docker files are the common one um you've got the newer the",
    "start": "870279",
    "end": "876399"
  },
  {
    "text": "newer build engines you know build kit and build X these are you know implementation details they can do really neat stuff",
    "start": "876399",
    "end": "883519"
  },
  {
    "text": "like the automatic qmu emulation super cool um and they they run in parallel they they have pretty you know colorful",
    "start": "883519",
    "end": "889800"
  },
  {
    "text": "terminal output they they do good things but they're an implementation detail okay so Docker file is is pretty common",
    "start": "889800",
    "end": "895120"
  },
  {
    "text": "does anybody use KO jib any of these things Daniel okay a couple of people um",
    "start": "895120",
    "end": "900959"
  },
  {
    "text": "so these are language specific container image Builders um KO is for go jib is",
    "start": "900959",
    "end": "907480"
  },
  {
    "text": "for Java uh so they will take a piece of source code and they'll go straight from source code to container image in one",
    "start": "907480",
    "end": "914000"
  },
  {
    "text": "step you don't have to like compile it and then have a Docker file that pulls the artifact in and and stuff but they",
    "start": "914000",
    "end": "919120"
  },
  {
    "text": "so they're they're neat but they're language specific um we've then got canico I don't think anybody's going to",
    "start": "919120",
    "end": "925320"
  },
  {
    "text": "use any of these other things so canico is this was just a list of it late I could think of everything I've had to work with um canaco is like a Docker in",
    "start": "925320",
    "end": "932759"
  },
  {
    "text": "Docker Builder so it's useful for building stuff inside a kubernetes cluster without having to do like a do a Docker demon Mount um so there's a bit",
    "start": "932759",
    "end": "939920"
  },
  {
    "text": "of security there a little bit of runtime security it's what open shift uses basically um build packs with this",
    "start": "939920",
    "end": "946000"
  },
  {
    "text": "kind of old idea nobody I don't think anybody really uses them they would trying to replicate the Hoku experience",
    "start": "946000",
    "end": "951480"
  },
  {
    "text": "obiously anybody who use Heroku knows how nice that was how nice it was to to build software um build packs tried to",
    "start": "951480",
    "end": "957160"
  },
  {
    "text": "do the same thing and get you a container image um they kind of came onto the tech radar and then they and then they I got excited and they fell",
    "start": "957160",
    "end": "963360"
  },
  {
    "text": "off again um basil can build container images anybody who's done any like Advanced C++ or Java or something just",
    "start": "963360",
    "end": "970360"
  },
  {
    "text": "had to wrestle with basil um even the sort of EX googlers I talk to don't like it it is great when it works and it does",
    "start": "970360",
    "end": "976680"
  },
  {
    "text": "have a bunch of really nice properties but it's such a pain and it's so hard to",
    "start": "976680",
    "end": "981800"
  },
  {
    "text": "support and the last one is the tool I'm going to talk about today from startup called uh chain guard which is appco",
    "start": "981800",
    "end": "990519"
  },
  {
    "text": "okay so say we're using say we're using a Docker file like one are some of the problems I mean what so firstly what is your base image right I'm probably going",
    "start": "991079",
    "end": "997720"
  },
  {
    "text": "to say from node or you know worse from PHP from WordPress these are meant to be build",
    "start": "997720",
    "end": "1005120"
  },
  {
    "text": "Time images I mean spoiler though I'm going to talk about multi-stage builds which I guess if you're in this talk you you probably do know about but just yeah",
    "start": "1005120",
    "end": "1011839"
  },
  {
    "text": "stop to think that these are you know build Time images they contain a whole bunch of software they contain compilers and run times and debugging tools and",
    "start": "1011839",
    "end": "1018480"
  },
  {
    "text": "all of that stuff um uh Dev versions of libraries with all the headers in they're meant to build your software",
    "start": "1018480",
    "end": "1025959"
  },
  {
    "text": "package your software they're not meant to be runtime images so they're physically big they take a long time to download they take a lot of time to",
    "start": "1025959",
    "end": "1032918"
  },
  {
    "text": "cache and they're full of software and that software you know we' talked about what we probably don't know what it is",
    "start": "1032919",
    "end": "1038280"
  },
  {
    "text": "but you know the more software even if you do know what it is the more software you've got the more likely you are have a bunch of cves in",
    "start": "1038280",
    "end": "1045319"
  },
  {
    "text": "it so we move on to multi-stage builds you know special Iz runtime base images",
    "start": "1045319",
    "end": "1050360"
  },
  {
    "text": "so we can do that you know multiart Docker build so you know from goang you know load all the dependencies compiled",
    "start": "1050360",
    "end": "1056600"
  },
  {
    "text": "and then from scratch copy the thing in but which base image do we use there's",
    "start": "1056600",
    "end": "1062760"
  },
  {
    "text": "there is scratch um scratch is completely empty that causes its own problems with actually you getting your",
    "start": "1062760",
    "end": "1069200"
  },
  {
    "text": "software to to run and have the the stuff that it needs so we're more likely to use",
    "start": "1069200",
    "end": "1074760"
  },
  {
    "text": "distrus but actually even distrus is a little bit complicated there's more than one flavor of dist list if you go and",
    "start": "1074760",
    "end": "1080120"
  },
  {
    "text": "list the the registry you get weirdly enough in in this order um it says base",
    "start": "1080120",
    "end": "1086159"
  },
  {
    "text": "static uh yeah CC so you can guess these are like okay and then there's one for C++ and one for Python 3 and",
    "start": "1086159",
    "end": "1091679"
  },
  {
    "text": "whatever if you dig into it like I think they've done that thing where the thing called default it's not actually the",
    "start": "1091679",
    "end": "1097000"
  },
  {
    "text": "default so static is for uh statically compiled languages like say go except go doesn't",
    "start": "1097000",
    "end": "1104760"
  },
  {
    "text": "normally statically link and you can't actually normally get away with static um Bas might sound like it's the bass",
    "start": "1104760",
    "end": "1111679"
  },
  {
    "text": "but it's actually static plus some stuff so bass actually has more than static and includes I've got it written down I",
    "start": "1111679",
    "end": "1117799"
  },
  {
    "text": "think it includes um it's not written down on this slide",
    "start": "1117799",
    "end": "1124440"
  },
  {
    "text": "we'll come back to it but Bas includes more stuff uh than static and is actually what you often need for even",
    "start": "1124440",
    "end": "1130159"
  },
  {
    "text": "something like a go program which you think is like a self-contained static thing oh no sorry yes bass includes like",
    "start": "1130159",
    "end": "1136240"
  },
  {
    "text": "GBC lib SSL open SSL that there's quite a lot of stuff in",
    "start": "1136240",
    "end": "1142200"
  },
  {
    "text": "base uh there's the CC image for C++ this adds like uh lib GCC this is",
    "start": "1142200",
    "end": "1147840"
  },
  {
    "text": "actually what you need for for rust right so this is just and what I'm saying is this is it's just not obvious",
    "start": "1147840",
    "end": "1152880"
  },
  {
    "text": "which one to choose which one has if you're trying to reduce your size reduce your attack surface which one of these things it's going to have the least",
    "start": "1152880",
    "end": "1158240"
  },
  {
    "text": "stuff in it um static is 2 and a half Meg right despite being sort of",
    "start": "1158240",
    "end": "1165120"
  },
  {
    "text": "allegedly empty uh the Java 17 ones 232 Meg as of yesterday uh and the node js21",
    "start": "1165120",
    "end": "1172799"
  },
  {
    "text": "contains over 5,300 files so again like do you know which",
    "start": "1172799",
    "end": "1179360"
  },
  {
    "text": "one of these to pick do you know what's in it do you trust it because these",
    "start": "1179360",
    "end": "1184440"
  },
  {
    "text": "although they're meant to be minimal they're still fairly broad brush Strokes at like oh well the CC one's the one you",
    "start": "1184440",
    "end": "1190080"
  },
  {
    "text": "need for C++ code and rust code and the static one you know is the one you need for go if you can compile it in the",
    "start": "1190080",
    "end": "1195480"
  },
  {
    "text": "right way but it's actually you know got it's not got enough in it so you probably want bass which isn't really",
    "start": "1195480",
    "end": "1200600"
  },
  {
    "text": "the Bas and it's got more stuff in it than you think so still difficult to do and these",
    "start": "1200600",
    "end": "1206640"
  },
  {
    "text": "things do not come we've talked about you know making es bombs for our for our container images these things do not come with s bombs so there's a lot of",
    "start": "1206640",
    "end": "1212919"
  },
  {
    "text": "stuff in them I found out by like downloading the tles and extra abstracting them there's no easy way to know that",
    "start": "1212919",
    "end": "1219880"
  },
  {
    "text": "you know I had to do that manually and there's no way to start doing sort of runtime cluster runtime",
    "start": "1219880",
    "end": "1227039"
  },
  {
    "text": "enforcement uh this is just me complaining about dist a bit more I think I've probably said all of that",
    "start": "1227039",
    "end": "1232600"
  },
  {
    "text": "stuff so enter the first tool we're going to look at which is appco apko",
    "start": "1232600",
    "end": "1238280"
  },
  {
    "start": "1233000",
    "end": "1939000"
  },
  {
    "text": "which is sort of a custom distrist but it's a builder for custom",
    "start": "1238280",
    "end": "1243880"
  },
  {
    "text": "distrist so first of all APK as in the package Manager APK is actually decent",
    "start": "1243880",
    "end": "1249960"
  },
  {
    "text": "right APK I will I will tell you is actually good you probably hate it but",
    "start": "1249960",
    "end": "1255000"
  },
  {
    "text": "it's probably good it does things like ites it has no hook book scripts so you can't AP APK package cannot run that",
    "start": "1255000",
    "end": "1262559"
  },
  {
    "text": "arbitary bash and do things that you don't understand it does ahead of time constraint satisfaction so if you try to",
    "start": "1262559",
    "end": "1268320"
  },
  {
    "text": "add uh install an APK package or packages into a system it will go and",
    "start": "1268320",
    "end": "1273760"
  },
  {
    "text": "have a look and make sure it's not going to overwrite any of those files because there's no arbitrary about with",
    "start": "1273760",
    "end": "1278799"
  },
  {
    "text": "these sure in complete scripts it can go and do that so it does constrain satisfaction and nothing's going to clash um it cannot move the system into",
    "start": "1278799",
    "end": "1286600"
  },
  {
    "text": "a broken State because of that everything can be a transaction because you know what's going to happen you know how many times have you done a you know",
    "start": "1286600",
    "end": "1292279"
  },
  {
    "text": "appt dis upgrade and it's just blown up because some post inst stall script had",
    "start": "1292279",
    "end": "1297520"
  },
  {
    "text": "an error because it made the wrong assumptions so APK as a package Badger I will tell you is is actually good Alpine",
    "start": "1297520",
    "end": "1304440"
  },
  {
    "text": "is a drro Alpine is the primary user of APK packages and probably where you've come across it uh so Alpine has their",
    "start": "1304440",
    "end": "1311080"
  },
  {
    "text": "own repo of packages so this is just a Nuance that that you might not have sort about right including their their very",
    "start": "1311080",
    "end": "1317200"
  },
  {
    "text": "base layout um so like so RPM is a package manager if I say RPM you might",
    "start": "1317200",
    "end": "1322559"
  },
  {
    "text": "think red hat that Souza uses RPMs as well so red hat and Suza are dros they have their own repos of packages so they",
    "start": "1322559",
    "end": "1329240"
  },
  {
    "text": "build different software in different ways but they just build them into RPMs and use RPM so Alpine is a distro that",
    "start": "1329240",
    "end": "1336200"
  },
  {
    "text": "has its own set of packages but they happen to be APK packages um if you think you hate APK",
    "start": "1336200",
    "end": "1343640"
  },
  {
    "text": "you probably actually hate Alpine you've probably just had a bad days with alpine and if you think you hate Alpine is actually because you probably hate",
    "start": "1343640",
    "end": "1349799"
  },
  {
    "text": "busy box so APK I thought I hated APK for the longest time because I just remember it was always always turned up",
    "start": "1349799",
    "end": "1355159"
  },
  {
    "text": "on the B on the bad days it's probably because you hate busy box or or Alpine but APK as a package manager as a",
    "start": "1355159",
    "end": "1361559"
  },
  {
    "text": "package format has a bunch of these good properties so apko builds these custom",
    "start": "1361559",
    "end": "1366919"
  },
  {
    "text": "distro list containers from apks so rather than taking dist list because as I said there's a few flavors and they've",
    "start": "1366919",
    "end": "1372520"
  },
  {
    "text": "all probably got a little bit more in than you think we can go specify EX",
    "start": "1372520",
    "end": "1377960"
  },
  {
    "text": "exactly which packages we want in our in our base image so we've got a got a repo of packages that are very small very",
    "start": "1377960",
    "end": "1385000"
  },
  {
    "text": "thinly sliced and we can bring individual little things into our base images and we build them with um out of",
    "start": "1385000",
    "end": "1391360"
  },
  {
    "text": "these apks which of course makes it deterministic and declarative because of all the properties of APK that I've",
    "start": "1391360",
    "end": "1396720"
  },
  {
    "text": "talked about so what's Wolfie as I said a package manager is not a drro Wolfie is",
    "start": "1396720",
    "end": "1403799"
  },
  {
    "text": "a set of Alpine apks so if we want to build you know these custom Dr these very small base images you know we could",
    "start": "1403799",
    "end": "1410120"
  },
  {
    "text": "build them from Red Hats RPMs we could build them from Alpine's apks but Wolfie is another drro another set of apks and",
    "start": "1410120",
    "end": "1417360"
  },
  {
    "text": "the Wolfie packages are all built by by chain guard um because they're all built",
    "start": "1417360",
    "end": "1422640"
  },
  {
    "text": "by chainu guard they all have S bombs and they all have signatures so we know if we come back to you know this picture",
    "start": "1422640",
    "end": "1429520"
  },
  {
    "text": "if each of these is a uh a package in that you know I've got the base layout in my container Eng and I've got lib SSL",
    "start": "1429520",
    "end": "1436799"
  },
  {
    "text": "and I've got lib C there's an spom on each of those to say exactly what it was built from and when and it's all signed",
    "start": "1436799",
    "end": "1442159"
  },
  {
    "text": "and it's all attested so now I do not even with these things that end up as a binary blog right lib C it's just an elf",
    "start": "1442159",
    "end": "1447640"
  },
  {
    "text": "full of machine code and know exactly what's in it so the you have to start right here with the building blocks to",
    "start": "1447640",
    "end": "1453720"
  },
  {
    "text": "really actually be able to to do this stuff uh Wolfie I call it you know it's",
    "start": "1453720",
    "end": "1460240"
  },
  {
    "text": "a set of packages you can call it a drro it's not an OS right so it's made for container images you know think of an OS",
    "start": "1460240",
    "end": "1467559"
  },
  {
    "text": "like a red hat you've got packages for you know any software you might think to",
    "start": "1467559",
    "end": "1472760"
  },
  {
    "text": "install um including kernels and bootloaders and system D Wolfie does not",
    "start": "1472760",
    "end": "1479000"
  },
  {
    "text": "have package Wolfie has packages for lots of things but not the basics not kernels and not boot loaders because",
    "start": "1479000",
    "end": "1484240"
  },
  {
    "text": "it's never meant to be installed in a machine right it's not an OS it's a set of packages for a um uh for container",
    "start": "1484240",
    "end": "1490000"
  },
  {
    "text": "images so you can't go install this on like a on a box and Boot It just in De side some of these things",
    "start": "1490000",
    "end": "1496440"
  },
  {
    "text": "in these base images are are kind of fast changing so you might think of a base image as uh you know something that",
    "start": "1496440",
    "end": "1502520"
  },
  {
    "text": "doesn't change very often and and this is something I see quite a lot is you know folks will have this nice ICD",
    "start": "1502520",
    "end": "1508159"
  },
  {
    "text": "system and they'll go and build an image for one of their services one of their microservices that you know doesn't get",
    "start": "1508159",
    "end": "1514520"
  },
  {
    "text": "a lot of love um you know maybe the team's moved on and it's this thing it just works it just does its thing but",
    "start": "1514520",
    "end": "1519600"
  },
  {
    "text": "you that container image can still be in Ed six 12 months later because if the app hasn't changed often nothing in the",
    "start": "1519600",
    "end": "1526360"
  },
  {
    "text": "CI pipeline is going to a rebuild of the thing but you've got base images that are now 12 months old",
    "start": "1526360",
    "end": "1532760"
  },
  {
    "text": "and there's a lot of things in that base image that that base image probably changes every day there's a lot there's",
    "start": "1532760",
    "end": "1537840"
  },
  {
    "text": "reasons for that it's not actually pay maybe your lib C it's City things like well CA search that we'll come on to but",
    "start": "1537840",
    "end": "1543840"
  },
  {
    "text": "time zone data right uh time zones polit for political reasons there was that country that Mo jumped across the date",
    "start": "1543840",
    "end": "1550279"
  },
  {
    "text": "line recently for political reasons right um time zone data Chang is actually surprisingly often uh CA search",
    "start": "1550279",
    "end": "1557960"
  },
  {
    "text": "change all that often and these are things we don't want to get uh stale and you might want to override your distributions opinions so like the",
    "start": "1557960",
    "end": "1564440"
  },
  {
    "text": "broader these packages are the more stuff we end up with that we don't necessarily need or want so you know time in your time zone data package",
    "start": "1564440",
    "end": "1570720"
  },
  {
    "text": "you're going to have the time zone information for for troll right there is a time zone called troll troll time uh",
    "start": "1570720",
    "end": "1577840"
  },
  {
    "text": "it's the time zone of troll station in in Antarctica uh which is owned by Norway and I think in the summer it uses",
    "start": "1577840",
    "end": "1584360"
  },
  {
    "text": "Norwegian time because it's part of Norway but in the winter they actually changed the UTC because flying in and",
    "start": "1584360",
    "end": "1591480"
  },
  {
    "text": "out of of Antarctica was really difficult and dangerous in the winter so they really want to make triply sure that everybody's talking about the same",
    "start": "1591480",
    "end": "1598039"
  },
  {
    "text": "it was something it was something to do with like ATC insisting that for safety everybody was like you were in the same time zone as you were handed off between",
    "start": "1598039",
    "end": "1604320"
  },
  {
    "text": "their traffic zones or like something like that anyway troll time is it exists and it's weird and okay it takes up a",
    "start": "1604320",
    "end": "1610120"
  },
  {
    "text": "few bites right the encoding format for these things is is pretty good but do you need it in your base image I'm not",
    "start": "1610120",
    "end": "1615840"
  },
  {
    "text": "saying you should go home and like remove this terrible security flaw of the you know troll time definition from your base image but just think about",
    "start": "1615840",
    "end": "1622880"
  },
  {
    "text": "what's in these things uh caer are the the obvious example",
    "start": "1622880",
    "end": "1627919"
  },
  {
    "text": "um I think I've got another slide that that talks about those um maybe I don't",
    "start": "1627919",
    "end": "1633000"
  },
  {
    "text": "maybe I'll talk about them now um so the ca so what are the ca CS you know so I'm",
    "start": "1633000",
    "end": "1639480"
  },
  {
    "text": "talking about the web the web the web Roots right the set of uh root certificates that your browser trusts",
    "start": "1639480",
    "end": "1644960"
  },
  {
    "text": "when it browses the internet uh and that your own trusts so your your OS also has a set of",
    "start": "1644960",
    "end": "1651440"
  },
  {
    "text": "root certificates that things like the package manager will trust when they go to when your OS fetches things from the",
    "start": "1651440",
    "end": "1657279"
  },
  {
    "text": "internet like you know updates those are the and those are the set of uh root",
    "start": "1657279",
    "end": "1663000"
  },
  {
    "text": "search that are just available on disk for like any other software to use so these are the ones that curl will pick up your browser will come with its own",
    "start": "1663000",
    "end": "1668919"
  },
  {
    "text": "set for various reasons but things like curl and WG will just pick up the ca that are on the dis there is no sort of",
    "start": "1668919",
    "end": "1675840"
  },
  {
    "text": "canonical set of them there is no like Authority there's no one Authority that",
    "start": "1675840",
    "end": "1681320"
  },
  {
    "text": "that tries to keep a set and it's it's kind of easy to get to I could I could",
    "start": "1681320",
    "end": "1687799"
  },
  {
    "text": "go make a I could go self sign aert now right and say well this is a root sir if I could persuade an OS to include it in",
    "start": "1687799",
    "end": "1693720"
  },
  {
    "text": "their package then everybody's machine would start trusting anything I signed with that route now I couldn't go and do",
    "start": "1693720",
    "end": "1699200"
  },
  {
    "text": "it they wouldn't listen to me but every now and again there's always one that's just been proved to be sort of owned by",
    "start": "1699200",
    "end": "1705840"
  },
  {
    "text": "by an AP right by a nation State actor or by a crime group or something so these there's more caer you think oh",
    "start": "1705840",
    "end": "1713679"
  },
  {
    "text": "what have I got I've got the caert from VAR sign and from RSA and from that other one oh does cloud Flare have their",
    "start": "1713679",
    "end": "1719200"
  },
  {
    "text": "own CA but you actually there's like you've got like 130 or something and they do come and go and they are a threat so there's something and they get",
    "start": "1719200",
    "end": "1725760"
  },
  {
    "text": "Block listed all the time so they are something that you want to keep up to date because you want them to to go as",
    "start": "1725760",
    "end": "1731039"
  },
  {
    "text": "fast as they come um so there's another couple of tools that I'll touch on later that can that can help us with that",
    "start": "1731039",
    "end": "1738159"
  },
  {
    "text": "oh well there we go I'm touching on them now um so kind of as as an aside uh the jet stack folks if anybody's use SE",
    "start": "1738159",
    "end": "1744120"
  },
  {
    "text": "manager those folks made this thing called trust manager that basically mounts this is a very long slide isn't",
    "start": "1744120",
    "end": "1749559"
  },
  {
    "text": "it these should be speaking on that basically mounts Sears at runtime because there's not everything you can trust not everything can be fixed uh by",
    "start": "1749559",
    "end": "1757919"
  },
  {
    "text": "building your own base images and keeping them up to date you know how slimly we're we're going to have a package for every single CA s you know",
    "start": "1757919",
    "end": "1764519"
  },
  {
    "text": "how thinly can we really slice that so TR manager says don't include caer in",
    "start": "1764519",
    "end": "1771200"
  },
  {
    "text": "your base image just uh Mount them at runtime and then the trust manager demon",
    "start": "1771200",
    "end": "1777240"
  },
  {
    "text": "is the it takes a CID that literally says right these are the Cs that I trust these are the ones I want in all of my images um so you can give it a fairly",
    "start": "1777240",
    "end": "1784440"
  },
  {
    "text": "standard list of the web runs like web ones like very signed in RSA and if you've got a corporate caert you can",
    "start": "1784440",
    "end": "1791000"
  },
  {
    "text": "include it in that as well and it'll get mounted in for anybody who's ever had to deal with a corporation with a firewall with its own caert you have to copy it",
    "start": "1791000",
    "end": "1798360"
  },
  {
    "text": "into every you can't use base images off the internet right because you have to rebuild everything you have to take everything and copy your CT in and then",
    "start": "1798360",
    "end": "1805640"
  },
  {
    "text": "they end up out of date so trust manager just completely ignore uh side that problem by just mounting the things in",
    "start": "1805640",
    "end": "1812399"
  },
  {
    "text": "and then you can declare with CDs which ones you want and they've got this little helper tool called paranoia which",
    "start": "1812399",
    "end": "1817440"
  },
  {
    "text": "actually SE searches all the places that CA search live um in images and we'll just we'll just deny the image if if",
    "start": "1817440",
    "end": "1823880"
  },
  {
    "text": "there are any in there so you assert that there are no CA in your in your image um or at least you go find where",
    "start": "1823880",
    "end": "1830000"
  },
  {
    "text": "they are and then you just Mount over the top of them with with trust manager so the wolfy packages are not as",
    "start": "1830000",
    "end": "1836440"
  },
  {
    "text": "small as a package for each individual caer because that would be kind of unmanageable but there is a separate package for the caer right it's not part",
    "start": "1836440",
    "end": "1843240"
  },
  {
    "text": "of some Bas so you can build yourself with Wolfie and apko you can build yourself a Basse image that maybe has a",
    "start": "1843240",
    "end": "1850480"
  },
  {
    "text": "lib C but doesn't have CA SS right so we've got that kind of fine grain control so we can then come along and",
    "start": "1850480",
    "end": "1856440"
  },
  {
    "text": "use tools like this okay so I'm going to I've got this apko thing I've got this wonderful wolfy repo",
    "start": "1856440",
    "end": "1863360"
  },
  {
    "text": "of um you know small images so I can be quite deliberate about what I want uh",
    "start": "1863360",
    "end": "1869559"
  },
  {
    "text": "small packages sorry so I can be quite deliberate about what I want they're all signed they've all got s bombs the last",
    "start": "1869559",
    "end": "1874600"
  },
  {
    "text": "piece of the puzzle is my own software right so normally I would have the bass image and then I would like you know uh",
    "start": "1874600",
    "end": "1880279"
  },
  {
    "text": "copy Dash Das from in my Docker file I copy into it but we're trying to be declarative now so what I need is also",
    "start": "1880279",
    "end": "1886200"
  },
  {
    "text": "an APK for my own software right if we if I'm making declarative images with apks this is how my own software gets in",
    "start": "1886200",
    "end": "1893440"
  },
  {
    "text": "uh is that I make an APK for it and it just becomes one of the packages um so enter the second tool which is called",
    "start": "1893440",
    "end": "1899799"
  },
  {
    "text": "malange mange mange is more fun sounds like a food um so malange is going to",
    "start": "1899799",
    "end": "1905279"
  },
  {
    "text": "make an APK for you know for my app and when it does it like it it's going to",
    "start": "1905279",
    "end": "1911919"
  },
  {
    "text": "add an eson for all the dependencies you know it understands the language I'm building and this is what KO and jib and",
    "start": "1911919",
    "end": "1917760"
  },
  {
    "text": "things can do for specific languages mange tries to be language agnostic um",
    "start": "1917760",
    "end": "1923600"
  },
  {
    "text": "and it can add an s bomb and then it can uh it'll it'll add a signature as well it'll it'll insist actually that you",
    "start": "1923600",
    "end": "1929240"
  },
  {
    "text": "sign the APK that you're building and then we can take that APK along with all the other system ones that I've talked",
    "start": "1929240",
    "end": "1935240"
  },
  {
    "text": "about and we can we can make our declarative container image I think that's probably enough talking I think I",
    "start": "1935240",
    "end": "1941200"
  },
  {
    "start": "1939000",
    "end": "2907000"
  },
  {
    "text": "will try to demo it like I said it didn't work but I can show you the Amo files at least",
    "start": "1941200",
    "end": "1948960"
  },
  {
    "text": "so the magic of t-m",
    "start": "1948960",
    "end": "1952799"
  },
  {
    "text": "marks can everybody read that or is that still a little small hands up if you can't read",
    "start": "1954440",
    "end": "1959720"
  },
  {
    "text": "it yeah okay good cool so I've got did I not have this",
    "start": "1959720",
    "end": "1965120"
  },
  {
    "text": "somewhere else no um I've got a little uh utility here called HTTP log it's",
    "start": "1965120",
    "end": "1970159"
  },
  {
    "text": "just some code I had ly around I kind of needed it like it's a demon it listens on whatever port and you make an hdtp",
    "start": "1970159",
    "end": "1976039"
  },
  {
    "text": "connection to it and it logs it it sounds really stupid but how often have you tried to have you got like a I had a",
    "start": "1976039",
    "end": "1981240"
  },
  {
    "text": "low balancer that was trying to health check me and I just I just didn't know what it was sending I didn't know which",
    "start": "1981240",
    "end": "1986799"
  },
  {
    "text": "host it was asking for I didn't know what like which Sni server name it wanted or which um Cipher Suites it was",
    "start": "1986799",
    "end": "1994639"
  },
  {
    "text": "trying to accept or anything and all I knew was this old app that I had was just rejecting it I just need to get in the middle um so you I like R an enginex",
    "start": "1994639",
    "end": "2002919"
  },
  {
    "text": "and then try to fiddle with but engine X is huge and then you try to like change engine X log format to include all of",
    "start": "2002919",
    "end": "2009480"
  },
  {
    "text": "this information so I just wrote this thing anyway it's like a few lines of go and it just dumps like incoming connection it just like dumps all the",
    "start": "2009480",
    "end": "2014519"
  },
  {
    "text": "parameters and drops it anyway it's some code I had lying around it's it's written and go it's fairly simple it's not got that many",
    "start": "2014519",
    "end": "2021840"
  },
  {
    "text": "dependencies so I and it was built with a Docker file I think was still",
    "start": "2021840",
    "end": "2026919"
  },
  {
    "text": "here yeah right classic Docker file from goang preload the cash build it you know",
    "start": "2026919",
    "end": "2033399"
  },
  {
    "text": "copy copy The Source in build it take uh whatever dist we think we need um you",
    "start": "2033399",
    "end": "2039840"
  },
  {
    "text": "copy it in right very standard best practices stuff pass an interview with that um I was asked to do that in",
    "start": "2039840",
    "end": "2046919"
  },
  {
    "text": "interview once uh but I have the new tooling as well so the first thing we're",
    "start": "2046919",
    "end": "2053240"
  },
  {
    "text": "going to do is we're going to make a signing key so the first thing we're going to do is build our software into an APK uh and",
    "start": "2053240",
    "end": "2060520"
  },
  {
    "text": "mange insist that we sign in so the first thing we're going to do um so I think the demo going to work and",
    "start": "2060520",
    "end": "2068079"
  },
  {
    "text": "the way the demo is going to work is I I can't mange on my system is of the latest version it's broken most of this",
    "start": "2068079",
    "end": "2075158"
  },
  {
    "text": "is running mange from a container image that uh chengar publish because whatever version that is latest you should never",
    "start": "2075159",
    "end": "2081839"
  },
  {
    "text": "use latest whatever version that is seems to work so almost all of this is just like mounting volumes in the right place so it can do its thing so this",
    "start": "2081839",
    "end": "2088000"
  },
  {
    "text": "says mange key gen except I'm running it from a Docker image uh so that generates",
    "start": "2088000",
    "end": "2095480"
  },
  {
    "text": "key pair of the right format that I can sign my own software with I you could probably just use op SSL for this but",
    "start": "2095480",
    "end": "2101079"
  },
  {
    "text": "you know they have a nice wrapper okay so I now have uh a public private key pair that",
    "start": "2101079",
    "end": "2107839"
  },
  {
    "text": "I'm going to assign my own software with okay so now I'm going to use mangee to compile my software into an APK",
    "start": "2107839",
    "end": "2117520"
  },
  {
    "text": "again this is like more exciting when it doesn't take three minutes to write out what we're going to do okay build so",
    "start": "2118400",
    "end": "2124960"
  },
  {
    "text": "malange build um I'm not going to cross compile because it's quite slow um so",
    "start": "2124960",
    "end": "2130320"
  },
  {
    "text": "build for for this arm architecture uh signing with the private half of that key so actually signing sign the",
    "start": "2130320",
    "end": "2136440"
  },
  {
    "text": "software we build I'm going to pointing at mange do",
    "start": "2136440",
    "end": "2141240"
  },
  {
    "text": "yaml and maybe should have shown you the hourl first so what it's doing is it's building it in a sealed like basil it's",
    "start": "2141960",
    "end": "2148720"
  },
  {
    "text": "it's building my software in a sealed a medic environment so the first thing it's doing is actually down so this is",
    "start": "2148720",
    "end": "2154000"
  },
  {
    "text": "your build time image right this is the first half of your doc file so I've told it which packages I need installed in",
    "start": "2154000",
    "end": "2160760"
  },
  {
    "text": "order to build my thing so again it's using APK and it's it's making ephemeral",
    "start": "2160760",
    "end": "2166440"
  },
  {
    "text": "a temporary container image that contains GCC bash yeah bins and go right",
    "start": "2166440",
    "end": "2172160"
  },
  {
    "text": "so it's installing all of this into a into a temporary image it's then going to actually go is huge but when it's",
    "start": "2172160",
    "end": "2178000"
  },
  {
    "text": "when it's installed go it's going to go build my software there we go lib crypto how many",
    "start": "2178000",
    "end": "2184319"
  },
  {
    "text": "problems have there been with that right so it's now building my ghost so this is now downloading all so think about dependencies even at build time I've got",
    "start": "2184319",
    "end": "2190560"
  },
  {
    "text": "a bunch of system packages like binutils I have those go Lang packages go dependencies that we built um it's",
    "start": "2190560",
    "end": "2198640"
  },
  {
    "text": "complaining a little bit because I insisted on a statically linked output um but here we go we're done uh we've",
    "start": "2198640",
    "end": "2204880"
  },
  {
    "text": "got an A so we've got an APK in a tall somewhere it's been signed with the",
    "start": "2204880",
    "end": "2210720"
  },
  {
    "text": "priate half of my key uh and somewhere up there it says that it made a it made an esom as well",
    "start": "2210720",
    "end": "2218680"
  },
  {
    "text": "so let me actually show you so what I said is this is what my",
    "start": "2218800",
    "end": "2224400"
  },
  {
    "text": "software is called this is what version it's on this is what it does um when you build it your build",
    "start": "2224400",
    "end": "2230599"
  },
  {
    "text": "environment is the the packages for the build environment are going to come from",
    "start": "2230599",
    "end": "2236079"
  },
  {
    "text": "because again I'm not us using the goang Builder image I'm making one so the build environment is uh from the Wolfie",
    "start": "2236079",
    "end": "2242440"
  },
  {
    "text": "repo I'm going to need the base layout I'm going to need the kind of build tools like GCC and and Bin uh binutils",
    "start": "2242440",
    "end": "2249119"
  },
  {
    "text": "I'm and I'm going to need the go tool chain and by the way when you download those packages you should check their",
    "start": "2249119",
    "end": "2254359"
  },
  {
    "text": "signatures and make sure we're not building with compromised software right that's going to do a malicious injection and then this is how you build",
    "start": "2254359",
    "end": "2260960"
  },
  {
    "text": "the software and it's real simple I just you just give it shell so this can be any language you want you can do anything you want here but um the",
    "start": "2260960",
    "end": "2267520"
  },
  {
    "text": "important thing is it gives you this variable so you just um whatever you",
    "start": "2267520",
    "end": "2273000"
  },
  {
    "text": "whatever you output you output into this targets. default targets. T directory so I'm just telling go to like output into",
    "start": "2273000",
    "end": "2279680"
  },
  {
    "text": "there so you can do whatever AR stuff you want you just end up I I probably should have just built it locally and copied it to make it easier but we just",
    "start": "2279680",
    "end": "2286680"
  },
  {
    "text": "copy into uh targets. Desta and then that gets in whatever this you know",
    "start": "2286680",
    "end": "2293160"
  },
  {
    "text": "hermetic environment is and then that just sucks up the uh whatever you know the tool sucks up whatever is in there",
    "start": "2293160",
    "end": "2300000"
  },
  {
    "text": "and puts it into an",
    "start": "2300000",
    "end": "2302880"
  },
  {
    "text": "APK okay so next I'm actually going to show you so we've now got it's down here a",
    "start": "2305520",
    "end": "2313599"
  },
  {
    "text": "package an APK for my",
    "start": "2313599",
    "end": "2318800"
  },
  {
    "text": "software so we're now going to build a container image declaratively from a bunch of",
    "start": "2319920",
    "end": "2325839"
  },
  {
    "text": "apks using apko so again here's how to trust Wolfie",
    "start": "2325839",
    "end": "2331280"
  },
  {
    "text": "packages here's how to get the packages that we're going to need to build this thing so there's we're going to look in",
    "start": "2331280",
    "end": "2336760"
  },
  {
    "text": "the Wolfie repo so we're going to look in the Wolfie OS repo uh and this is the key ring for it this is how you trust it",
    "start": "2336760",
    "end": "2342839"
  },
  {
    "text": "we're also going to look on the disk because this so this is going to contain n minus one packages and then this work",
    "start": "2342839",
    "end": "2348920"
  },
  {
    "text": "packages is going to contain my package for HTTP log right so it's it's that",
    "start": "2348920",
    "end": "2354040"
  },
  {
    "text": "simple those are the repositories and then the packages I want are again so this is for the runtime container so",
    "start": "2354040",
    "end": "2359079"
  },
  {
    "text": "this is our kind of custom distrist so what I want is the base the base layout the really simple stuff like a temp",
    "start": "2359079",
    "end": "2364839"
  },
  {
    "text": "directory and a password file the caert bundle I could remove this and",
    "start": "2364839",
    "end": "2370560"
  },
  {
    "text": "use trust manager instead but I'm I'm keeping it simple I want I want the caer that Wolfie provides right and you'd",
    "start": "2370560",
    "end": "2376880"
  },
  {
    "text": "have to if you really care about your security you'd have to go talk to them about what setup you know what their criteria are for including these these",
    "start": "2376880",
    "end": "2383040"
  },
  {
    "text": "CTS and then my own package HTTP log which I know is going to come from you know work packages and I've got the",
    "start": "2383040",
    "end": "2388560"
  },
  {
    "text": "signing key for the Wolfie stuff and I will add I'm",
    "start": "2388560",
    "end": "2394200"
  },
  {
    "text": "going to add as a command line argument I add the the signing key because remember we signed our APK when we made",
    "start": "2394200",
    "end": "2399359"
  },
  {
    "text": "it I'm going to add the signing key for that as like an append and then by the way this",
    "start": "2399359",
    "end": "2404440"
  },
  {
    "text": "container image you know I want to I'm going to make a non-root",
    "start": "2404440",
    "end": "2410000"
  },
  {
    "text": "user and and this is the entry point so we can a fairly standard do of our",
    "start": "2410000",
    "end": "2415880"
  },
  {
    "text": "stuff so Gump but essentially APK",
    "start": "2419400",
    "end": "2427200"
  },
  {
    "text": "build uh a pen to the key ring the the public part of the signing key so we saw",
    "start": "2427200",
    "end": "2432280"
  },
  {
    "text": "that there was in the yaml said had to verify all the packages out of the the Wolfie repo I'm adding this public key",
    "start": "2432280",
    "end": "2438280"
  },
  {
    "text": "to to verify my package even though it's locally on disk you still you should keep those sort of C the signature Integrity all the way through I'm only",
    "start": "2438280",
    "end": "2445000"
  },
  {
    "text": "going to build it for arm because I can't be bothered waiting uh and then there's the ammo that you just saw and this is the tag that we're going to put",
    "start": "2445000",
    "end": "2451920"
  },
  {
    "text": "on it this is the um the tag we're going to put on the on the image",
    "start": "2451920",
    "end": "2458319"
  },
  {
    "text": "uh and it's pretty much that quick so I've now got this doesn't load",
    "start": "2461200",
    "end": "2466720"
  },
  {
    "text": "it this isn't so this the docker toing is really nice uh and the docker with you say Docker build it actually builds",
    "start": "2466720",
    "end": "2473480"
  },
  {
    "text": "and then also loads into your local Docker demon so you can run it straight away this has literally just built the",
    "start": "2473480",
    "end": "2480200"
  },
  {
    "text": "image and it's giving me a tball on dis um so the next thing I'm going to do is yeah Docker load right just suck it",
    "start": "2480200",
    "end": "2487200"
  },
  {
    "text": "into the local registry so I can actually run it oh but that doesn't work told you it was",
    "start": "2487200",
    "end": "2495040"
  },
  {
    "text": "broken oh okay so I'm just in the wrong directory Docker",
    "start": "2496040",
    "end": "2501560"
  },
  {
    "text": "load this is what happens if you try to fix things three minutes before you come on stage it's up there there we go okay so",
    "start": "2501560",
    "end": "2508920"
  },
  {
    "text": "it's got this public I do if you've not been into the depths of Docker it's uh like this might be a bit confusing but",
    "start": "2508920",
    "end": "2514000"
  },
  {
    "text": "it's got this public tag on it but it's actually not in that place yet it's it's local but anyway my Docker demon if I",
    "start": "2514000",
    "end": "2519800"
  },
  {
    "text": "tell it to run this it's not going to go fetch anything it's just going to it's just going to run it and I can actually",
    "start": "2519800",
    "end": "2525640"
  },
  {
    "text": "do that right so we didn't fetch anything",
    "start": "2525640",
    "end": "2531119"
  },
  {
    "text": "and then this thing's saying uh hey I'm",
    "start": "2531119",
    "end": "2535480"
  },
  {
    "text": "listening and I've actually got a slightly longer command so I'm just going to I'm just",
    "start": "2537040",
    "end": "2542839"
  },
  {
    "text": "going to run it but I'm going to forward the port and I'm going to give this thing a few a few arguments so this actually puts it",
    "start": "2542839",
    "end": "2548480"
  },
  {
    "text": "into like a proxy mode so what it's really what it returns is not like it normally just says Hi I logged your thing um it's now actually going to just",
    "start": "2548480",
    "end": "2556119"
  },
  {
    "text": "proxy to to Google but it's going to log everything in the middle because that lets",
    "start": "2556119",
    "end": "2562119"
  },
  {
    "text": "us okay so Google this is a Google response like you can see Google uh it's just said for I haven't put the right",
    "start": "2562359",
    "end": "2567960"
  },
  {
    "text": "path on it so it's like go away but um my logging thing there we go we've",
    "start": "2567960",
    "end": "2573559"
  },
  {
    "text": "accepted like the incoming TCP connection I asked for Local Host 880",
    "start": "2573559",
    "end": "2578599"
  },
  {
    "text": "with http1 this was my user agent and then I've proxied to that and I've I've returned it okay so the so the thing the",
    "start": "2578599",
    "end": "2585000"
  },
  {
    "text": "software Works um if we get time and if it works I'll show what we do if we",
    "start": "2585000",
    "end": "2590400"
  },
  {
    "text": "don't have CA certainty in the base image that's the reason I put it in proxy mode is this thing is going to accept my connection it's going to try",
    "start": "2590400",
    "end": "2596480"
  },
  {
    "text": "to call out to https google.com and then it's going to it's going to refuse that",
    "start": "2596480",
    "end": "2601599"
  },
  {
    "text": "connection like this thing will refuse to connect because it can't trust google.com because it has none of the trust Roots um so that's the kind of",
    "start": "2601599",
    "end": "2608599"
  },
  {
    "text": "spoiler that's why the demo is a little bit convoluted but anyway we built an image we ran it locally it",
    "start": "2608599",
    "end": "2614200"
  },
  {
    "text": "works the a couple of the next steps so I just want to show what so this image is obviously built it obviously works it",
    "start": "2614200",
    "end": "2620480"
  },
  {
    "text": "was hopefully very quick to build it's got all those properties I've talked about I won't go over them again I'm actually just going to push it up to a a",
    "start": "2620480",
    "end": "2627160"
  },
  {
    "text": "real repo on the internet because some of the I'm just going to show uh a",
    "start": "2627160",
    "end": "2632319"
  },
  {
    "text": "couple of the the things we can do with this now and a couple of these tools require it to to be they can't read my local dock te they need to be on it need",
    "start": "2632319",
    "end": "2639079"
  },
  {
    "text": "it on the the the internet um right so anybody who's looked at any of this",
    "start": "2639079",
    "end": "2644440"
  },
  {
    "text": "stuff before having a certificate and having",
    "start": "2644440",
    "end": "2649839"
  },
  {
    "text": "an sbom is great but you've got to actually package them with your container image somehow container images",
    "start": "2649839",
    "end": "2657559"
  },
  {
    "text": "are there are multiple standards because of course there are some of the newer ones have fields that will take a",
    "start": "2657559",
    "end": "2664920"
  },
  {
    "text": "signature and will take it s bomb right so in some of the newer container image formats like",
    "start": "2664920",
    "end": "2670520"
  },
  {
    "text": "oci2 uh an s bomb is a first class thing it's a piece of metadata like the name and you know and the like the entry",
    "start": "2670520",
    "end": "2676359"
  },
  {
    "text": "point uh in some of the older ones or some some of the older Registries that don't support this you you can't do that",
    "start": "2676359",
    "end": "2684040"
  },
  {
    "text": "you don't want this s bomb like in the actual image in the tel you want it as metadata you want it separate but you",
    "start": "2684040",
    "end": "2689359"
  },
  {
    "text": "want it like with the thing so if the image format itself the image is like metadata format doesn't support it the",
    "start": "2689359",
    "end": "2696079"
  },
  {
    "text": "hack is that the sbom is uploaded like alongside so it what it does is it makes",
    "start": "2696079",
    "end": "2702480"
  },
  {
    "text": "a separate tag remember you know I tagged this thing with like version 0.7.1 or whatever it was it's also just",
    "start": "2702480",
    "end": "2708520"
  },
  {
    "text": "going to give it a big old and it's going to write another tag another literally another image in the registry",
    "start": "2708520",
    "end": "2714480"
  },
  {
    "text": "alongside and the tag is this big old sh 256 sbom uh and this is a this is a hack",
    "start": "2714480",
    "end": "2720480"
  },
  {
    "text": "but a lot of the tools know how to know how to go find these things like alongside so this is the sh of the image",
    "start": "2720480",
    "end": "2726240"
  },
  {
    "text": "so if I say download uh 0. 7.11 it'll download the thing it'll sh it and be",
    "start": "2726240",
    "end": "2732040"
  },
  {
    "text": "like oh I wonder if there's a you know fu. esom um so yeah this is what's going",
    "start": "2732040",
    "end": "2737640"
  },
  {
    "text": "on here this so this stuff is quite new you know the toing is evolving container register is evolving um image formats",
    "start": "2737640",
    "end": "2743559"
  },
  {
    "text": "are revolving but it's up there and I can now just really simply show you",
    "start": "2743559",
    "end": "2749079"
  },
  {
    "text": "Docker esom new command so this the docker client weirdly doesn't read from",
    "start": "2749079",
    "end": "2754200"
  },
  {
    "text": "the local registry insists on reading from from the um from the internet which is why I had to push",
    "start": "2754200",
    "end": "2759640"
  },
  {
    "text": "it okay add it running out of time we're running out of time I think I'm nearly done cool how much time have I run out",
    "start": "2759640",
    "end": "2765720"
  },
  {
    "text": "of oh I'm done aren't I Okay cool so it yeah it downloaded it because of course",
    "start": "2765720",
    "end": "2770760"
  },
  {
    "text": "it did um you know it hard and whatever and here is the list of stuff and this",
    "start": "2770760",
    "end": "2776040"
  },
  {
    "text": "is verified and this is untampered uh this is attested because it's signed so what's in this image well",
    "start": "2776040",
    "end": "2782800"
  },
  {
    "text": "there's OS packages so there Wolfie Basel you know temp directory and whatever there's the OS package for the",
    "start": "2782800",
    "end": "2790000"
  },
  {
    "text": "caert so this is in this case this is what I wanted this is what parano I would warn you about because you",
    "start": "2790000",
    "end": "2795440"
  },
  {
    "text": "probably want to mount there at run time so they're not going to add a date um there's a GB",
    "start": "2795440",
    "end": "2801599"
  },
  {
    "text": "C there shouldn't be because I deliberately statically linked my goang",
    "start": "2801599",
    "end": "2806920"
  },
  {
    "text": "so that I didn't have to have a GDC because I wanted to remove this attack surface I'll have a look at this demo later uh there's a there's a GBC but",
    "start": "2806920",
    "end": "2813480"
  },
  {
    "text": "that's an APK package right that's an OS package and then there's one more OS package there's one more APK which is my",
    "start": "2813480",
    "end": "2819160"
  },
  {
    "text": "software which by the way contains it's a binary blob like I open it with him I just get a screen of non-printing",
    "start": "2819160",
    "end": "2825480"
  },
  {
    "text": "characters but because we've got es Bombs all the way down I can tell you there's a bunch of go modules in there so I can tell you there's you know a TTY",
    "start": "2825480",
    "end": "2832559"
  },
  {
    "text": "detector how we get the colored output there's a jot paer there's a logger you know doesn't have a lot of dependencies but it's but it's got those uh e it even",
    "start": "2832559",
    "end": "2840319"
  },
  {
    "text": "shows me the dependencies on the oh they're not quite standard library on the sort of extended standard Library",
    "start": "2840319",
    "end": "2846760"
  },
  {
    "text": "you think of this as like spring or something so so yeah uh I've run out",
    "start": "2846760",
    "end": "2853160"
  },
  {
    "text": "okay the rest of the demo was was me saying okay I'm happy with this because I've got signed Wolfie apks in it I've",
    "start": "2853160",
    "end": "2860200"
  },
  {
    "text": "got my own signed software I'm H I can say I'm happy the s bomb signed the whole thing you know say that I know the",
    "start": "2860200",
    "end": "2865640"
  },
  {
    "text": "CI system that built it you know hadn't tripped any antivirus alarms recently this is the correct s bomb that I was",
    "start": "2865640",
    "end": "2871559"
  },
  {
    "text": "expecting and I actually would go fix this first right and then the next next Pi of the demo is signing it uh we can",
    "start": "2871559",
    "end": "2878400"
  },
  {
    "text": "attach a signature to it and we publish it to a a global to a blockchain essentially to a global transparency log",
    "start": "2878400",
    "end": "2884839"
  },
  {
    "text": "so that can never be refuted right this the sh of this image uh and its public",
    "start": "2884839",
    "end": "2889920"
  },
  {
    "text": "signature will always forever be associated in a global way that anybody can read and attest there's this thing called recall which is like a global uh",
    "start": "2889920",
    "end": "2897079"
  },
  {
    "text": "certificate transparency log so that those can't be refuted because you got to solve the zero Turtle right and recor",
    "start": "2897079",
    "end": "2903119"
  },
  {
    "text": "is like a trusted third party for that particular Earth Turtle this guy's getting really agitated we're",
    "start": "2903119",
    "end": "2908970"
  },
  {
    "start": "2907000",
    "end": "2923000"
  },
  {
    "text": "[Applause]",
    "start": "2908970",
    "end": "2915230"
  },
  {
    "text": "done",
    "start": "2921880",
    "end": "2924880"
  }
]