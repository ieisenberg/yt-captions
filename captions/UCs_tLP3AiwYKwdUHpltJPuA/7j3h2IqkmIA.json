[
  {
    "start": "0",
    "end": "40000"
  },
  {
    "text": "[Music]",
    "start": "960",
    "end": "8889"
  },
  {
    "text": "thank you okay actually though who's had a chocolate covered pineapple now I'm curious no one okay you have had okay so",
    "start": "13599",
    "end": "20960"
  },
  {
    "text": "I'm not just thinking that it's a common thing okay we're not talking about chocolate cover pineapples today we're talking about catching commits to secure",
    "start": "20960",
    "end": "27920"
  },
  {
    "text": "infrastructure's code this is probably better known as policy as code we'll go over all of the other terms you're going",
    "start": "27920",
    "end": "33800"
  },
  {
    "text": "to hear for this particular kind of analysis as well but the reason why this",
    "start": "33800",
    "end": "39120"
  },
  {
    "text": "all started was that I was a um I was a developer right both for infrastructure",
    "start": "39120",
    "end": "44960"
  },
  {
    "start": "40000",
    "end": "86000"
  },
  {
    "text": "as well as for software and it was great because whenever I would work with security teams in the software space",
    "start": "44960",
    "end": "50760"
  },
  {
    "text": "they'd tell me go see oosp I'm like what is this magical resource it turns out there's a great resource out there check",
    "start": "50760",
    "end": "56800"
  },
  {
    "text": "it out it's called oasp and they have a whole bunch of of uh practices as well as guidance and materials on how to",
    "start": "56800",
    "end": "64040"
  },
  {
    "text": "build a secure application as well as secure infrastructure and many other things and I came across this checklist",
    "start": "64040",
    "end": "70240"
  },
  {
    "text": "for oos secure coding practices because at the time I was primarily focused on infrastructure and I wasn't really that",
    "start": "70240",
    "end": "77280"
  },
  {
    "text": "familiar with how to work in software and how to do it securely so they had this great checklist I was really",
    "start": "77280",
    "end": "82759"
  },
  {
    "text": "excited I went through this checklist and then I started to think well what about infrastructure's code why don't I",
    "start": "82759",
    "end": "89119"
  },
  {
    "start": "86000",
    "end": "152000"
  },
  {
    "text": "have this amazing checklist for infrastructures code and it turns out that a lot of the things that you do in",
    "start": "89119",
    "end": "94840"
  },
  {
    "text": "software development for security also map really well to infrastructures code because after all infrastructures code",
    "start": "94840",
    "end": "101320"
  },
  {
    "text": "is the practice of developing infrastructure automation like you would software so it naturally maps and on",
    "start": "101320",
    "end": "108880"
  },
  {
    "text": "this journey I realized it all can be boiled down to patterns and practices you've probably heard a lot about",
    "start": "108880",
    "end": "115159"
  },
  {
    "text": "patterns and practices today but really what we're looking for are perhaps some some um helpful Frameworks for the way",
    "start": "115159",
    "end": "121799"
  },
  {
    "text": "we think about how to secure something and over time I decided I'd take all",
    "start": "121799",
    "end": "127159"
  },
  {
    "text": "this information and put it somewhere so that's where the book is uh but if you ever have any questions about Hashi Corp",
    "start": "127159",
    "end": "132560"
  },
  {
    "text": "tools we have open source ones like terraform Vault uh and more you can always talk to me uh today we're going",
    "start": "132560",
    "end": "138640"
  },
  {
    "text": "to talk a little bit about terraform but the primary focus will be on General practices for securing infrastructures",
    "start": "138640",
    "end": "144560"
  },
  {
    "text": "code so whether you are using terraform or you've got Legacy infrastructure with custom automation around it these rules",
    "start": "144560",
    "end": "150840"
  },
  {
    "text": "still apply and yes we're not going to call these rules but at the end of the day security is a lot about rules uh so",
    "start": "150840",
    "end": "158160"
  },
  {
    "start": "152000",
    "end": "375000"
  },
  {
    "text": "the qu big question we're going to answer is how do you write secure infrastructure as code well it turns out",
    "start": "158160",
    "end": "166040"
  },
  {
    "text": "this is a complicated way to think about security right security testing can be",
    "start": "166040",
    "end": "171360"
  },
  {
    "text": "boiled down into two separate Concepts static analysis and dynamic analysis whenever I would talk to my security",
    "start": "171360",
    "end": "177760"
  },
  {
    "text": "teams they would tell me oh we do static analysis and dynamic analysis when I talk to let's say some of the Security",
    "start": "177760",
    "end": "184159"
  },
  {
    "text": "Professionals who are maybe on the uh you know sort of the executive side they'd say shift left security testing",
    "start": "184159",
    "end": "191239"
  },
  {
    "text": "as part of static analysis I still didn't really was I was like shift left and it turns out this was borrowed from",
    "start": "191239",
    "end": "196440"
  },
  {
    "text": "testing right shift left testing the idea is that you test or you write as many unit tests as you can in order to",
    "start": "196440",
    "end": "203080"
  },
  {
    "text": "offset the burden of integration testing later you also have something called policy is code now which is a",
    "start": "203080",
    "end": "209760"
  },
  {
    "text": "effectively static analysis and shiftleft security testing you also have unit or contract testing for security so",
    "start": "209760",
    "end": "216560"
  },
  {
    "text": "all of these terms are fairly similar to each other they all fall under static analysis the idea that you can run tests",
    "start": "216560",
    "end": "223959"
  },
  {
    "text": "to check your infrastructure's code before it gets to production the other half of this is",
    "start": "223959",
    "end": "230120"
  },
  {
    "text": "dynamic analysis Dynamic analysis is vulnerability scanning continuous validation and security monitoring the",
    "start": "230120",
    "end": "235920"
  },
  {
    "text": "idea behind Dynamic analysis is that your live environment will have changed going in and out you need to understand",
    "start": "235920",
    "end": "241680"
  },
  {
    "text": "what's happening to that live environment so you do Dynamic analysis so today we are going to be talking",
    "start": "241680",
    "end": "247760"
  },
  {
    "text": "about both someone asked me why do you talk about both Rosemary you're talking about",
    "start": "247760",
    "end": "253360"
  },
  {
    "text": "infrastructure as code shouldn't we just be talking about unit testing or static",
    "start": "253360",
    "end": "259280"
  },
  {
    "text": "analysis and it's actually a lot more complicated infrastructure is a little bit different than software and that",
    "start": "259280",
    "end": "265600"
  },
  {
    "text": "infrastructure has a different kind of feedback loop when something is happening when you make changes to",
    "start": "265600",
    "end": "270840"
  },
  {
    "text": "infrastructure as code it's not just in infrastructure as code it's actually in a live infrastructure environment how",
    "start": "270840",
    "end": "277160"
  },
  {
    "text": "many of you have done what is called a break glass situ incident or break glass scenario where you've gone into your",
    "start": "277160",
    "end": "283880"
  },
  {
    "text": "alive environment and made changes a number of us probably have um and so",
    "start": "283880",
    "end": "289160"
  },
  {
    "text": "this is evident in this example right a region has an outage and now I have to go in and fix this outage very quickly",
    "start": "289160",
    "end": "295600"
  },
  {
    "text": "which means I log in my infrastructure environment and allow traffic from the database to my Dr site and I do this",
    "start": "295600",
    "end": "302440"
  },
  {
    "text": "quickly I don't do it through code necessarily now ideally we do through we do make these rules or we add these",
    "start": "302440",
    "end": "309280"
  },
  {
    "text": "rules from a network standpoint in code ideally we do but when we're trying to fix something fast we don't think about",
    "start": "309280",
    "end": "315560"
  },
  {
    "text": "that So eventually we'll have to reconcile this information into infrastructure's code and so we go",
    "start": "315560",
    "end": "320960"
  },
  {
    "text": "through the cycle we fix something really quickly and we do it manually and then we go back and add it to automation",
    "start": "320960",
    "end": "327160"
  },
  {
    "text": "so in this example if a region has an outage the first thing we're going to do is get everything back up and running",
    "start": "327160",
    "end": "332280"
  },
  {
    "text": "again so we're going to make that manual fix really quickly and then we'll bring that information back to our code so",
    "start": "332280",
    "end": "338840"
  },
  {
    "text": "this constant cycle of fix and Reconciliation is something we do that is not necessarily unique to",
    "start": "338840",
    "end": "344400"
  },
  {
    "text": "infrastructure but I think more common in infrastructure situations this is why static and",
    "start": "344400",
    "end": "349960"
  },
  {
    "text": "dynamic analysis have to coexist especially for infrastructure Dynamic analysis exists for you to fix quickly",
    "start": "349960",
    "end": "356479"
  },
  {
    "text": "and maintain security requirements that way whatever fix you put into production in the live environment is something you",
    "start": "356479",
    "end": "362840"
  },
  {
    "text": "know to be secure you also need static analysis not for you but for someone",
    "start": "362840",
    "end": "368639"
  },
  {
    "text": "else to know what security requirements exist static analysis is about knowledge",
    "start": "368639",
    "end": "373960"
  },
  {
    "text": "right it's the idea of capturing security knowledge as tests whether it be shifted left in the case of writing",
    "start": "373960",
    "end": "380039"
  },
  {
    "start": "375000",
    "end": "400000"
  },
  {
    "text": "the code or further down the line when something's in production so the idea behind both of these scenarios is you",
    "start": "380039",
    "end": "386479"
  },
  {
    "text": "need to capture security knowledge as test so one thing might be for you to know",
    "start": "386479",
    "end": "391720"
  },
  {
    "text": "whether or not what you're doing in production is secure but also for someone else in the future not to make the same",
    "start": "391720",
    "end": "397880"
  },
  {
    "text": "mistakes so an example of this and I'm going to do this live so everybody take",
    "start": "397880",
    "end": "403639"
  },
  {
    "start": "400000",
    "end": "709000"
  },
  {
    "text": "a deep breath okay um if you're not familiar with terraform I'm going to quickly run through a little bit of what",
    "start": "403639",
    "end": "409240"
  },
  {
    "text": "this looks like but most infrastructurist code has a domain specific language or programming language around it we're going to look",
    "start": "409240",
    "end": "415639"
  },
  {
    "text": "at a domain specific language but imagine that I want to pass in a variable like client cider block the",
    "start": "415639",
    "end": "422039"
  },
  {
    "text": "client cider block allows my laptop to connect to my production infrastructure isn't that dangerous uh and the idea",
    "start": "422039",
    "end": "429360"
  },
  {
    "text": "here is that maybe I don't know any better my laptop is just going to connect directly to production and I'll",
    "start": "429360",
    "end": "434599"
  },
  {
    "text": "just let anybody's laptop connect to production so naturally what I'll do is I will add a rule that allows everybody",
    "start": "434599",
    "end": "442680"
  },
  {
    "text": "to connect to it so I'm going to do 000000 if you're not familiar with networking this basically means allow",
    "start": "442680",
    "end": "449440"
  },
  {
    "text": "everyone to connect to my production infrastructure if I run this in",
    "start": "449440",
    "end": "454759"
  },
  {
    "text": "terraform or in my infrastructure as code tool what I will get is a dry run and this dry run should tells me I'm",
    "start": "454759",
    "end": "460840"
  },
  {
    "text": "going to make a change to open up my network to everybody great that's awesome we made that change we feel like",
    "start": "460840",
    "end": "467400"
  },
  {
    "text": "we're able to access our infrastructure and do what we need to do functionally but that also leaves it open for someone",
    "start": "467400",
    "end": "472440"
  },
  {
    "text": "else to do something right what we're doing now is trying to catch this commit we don't want someone",
    "start": "472440",
    "end": "478639"
  },
  {
    "text": "opening up 00 we want someone to be more restrictive they we want someone to be specific as to who can connect to my",
    "start": "478639",
    "end": "485759"
  },
  {
    "text": "production infrastructure there are other ways that you can think about doing this including access control but from a network standpoint it's a good",
    "start": "485759",
    "end": "492479"
  },
  {
    "text": "way to not only offer network security as well as Access Control right you need",
    "start": "492479",
    "end": "497560"
  },
  {
    "text": "a little bit of both so what happens is that when I run a plan the plan will tell me okay I'm going to create a0000",
    "start": "497560",
    "end": "504960"
  },
  {
    "text": "and add this rule to a Security Group which is fine but I don't really like this how do",
    "start": "504960",
    "end": "511720"
  },
  {
    "text": "I catch it before it goes to production well the way you do it is that in most",
    "start": "511720",
    "end": "516919"
  },
  {
    "text": "infrastructures code tools what you can do is do something called a dry run so I'm going to create the dry",
    "start": "516919",
    "end": "524599"
  },
  {
    "text": "run the dry run I'm not going to print out everything because it has secrets in it so I'm not going to show you my",
    "start": "524640",
    "end": "530440"
  },
  {
    "text": "secrets uh but when I do a terraform State Pool what this does is retrieve information about my state in my",
    "start": "530440",
    "end": "536360"
  },
  {
    "text": "infrastructures code tool and print it out for me in Json format I'm printing out the let's say um not so sensitive",
    "start": "536360",
    "end": "542680"
  },
  {
    "text": "information about my availability zones that are available to me uh but the idea is that you get this whole Json that",
    "start": "542680",
    "end": "548880"
  },
  {
    "text": "comes out with all of the resources their attributes and everything else what can you do with Json well it turns",
    "start": "548880",
    "end": "555440"
  },
  {
    "text": "out you can test it it's just like parsing any Json metadata that you might get from an API the only difference is",
    "start": "555440",
    "end": "562519"
  },
  {
    "text": "the schema right so what we do in policy as code is well parse the schema so if",
    "start": "562519",
    "end": "569279"
  },
  {
    "text": "notice this plan with uh everything everything uh allowed to for you to see what happens with this dry run is now",
    "start": "569279",
    "end": "575680"
  },
  {
    "text": "you can see this client CER block is 00 0 and what I can do is write a test that",
    "start": "575680",
    "end": "580959"
  },
  {
    "text": "says can I check for this 0000 0 and I did write the test I'll run the test",
    "start": "580959",
    "end": "586800"
  },
  {
    "text": "just to show you that I did um now if I do a failing uh let's say this",
    "start": "586800",
    "end": "591920"
  },
  {
    "text": "failing uh fixture this test fixture which has failing values in it you'll notice that my test will let me know",
    "start": "591920",
    "end": "598399"
  },
  {
    "text": "that I shouldn't be defining 0000 in a client CER block I should use a specific IP address range the test",
    "start": "598399",
    "end": "606560"
  },
  {
    "text": "itself is something that you can write in different ways in this case I'm using",
    "start": "606560",
    "end": "611959"
  },
  {
    "text": "what is called Opa open policy agent which is in the Rego uh expression so",
    "start": "611959",
    "end": "617040"
  },
  {
    "text": "Rego rules are what you use to write rules for open policy agent when you run",
    "start": "617040",
    "end": "622120"
  },
  {
    "text": "open policy agent it examines all of these rules and parses the information you can also do this with any",
    "start": "622120",
    "end": "627880"
  },
  {
    "text": "programming language test testing framework right I've done this with P test I've done this with go LS testing",
    "start": "627880",
    "end": "633200"
  },
  {
    "text": "framework so a lot of them will offer this the thing is it's a test at the end of the day you can write it and you can",
    "start": "633200",
    "end": "639120"
  },
  {
    "text": "parse the Json the real value is uh in this approach is to extract the Json",
    "start": "639120",
    "end": "644880"
  },
  {
    "text": "information from your infrastructure's code State and then parse information out of it so that's a more simplistic",
    "start": "644880",
    "end": "650920"
  },
  {
    "text": "way of describing a the your first policy so this is the hello world of",
    "start": "650920",
    "end": "656000"
  },
  {
    "text": "policy is code or hello world of security testing for infrastructures code so similar similar approach here",
    "start": "656000",
    "end": "661959"
  },
  {
    "text": "the big difference in this uh scenario that I'm showing that is not live this one is showing that you can add it to a",
    "start": "661959",
    "end": "668639"
  },
  {
    "text": "pipeline so just like a unit test you add it to any CI framework that you have and you catch this commit before it goes",
    "start": "668639",
    "end": "674839"
  },
  {
    "text": "to production so in this case this scenario is running a dry run and then I'm going to run this test this test",
    "start": "674839",
    "end": "681320"
  },
  {
    "text": "will tell me whether or not the policy passes and after some time of waiting",
    "start": "681320",
    "end": "686639"
  },
  {
    "text": "for this to pass this is why we did not run this live you'll notice that the test has failed so the test after has",
    "start": "686639",
    "end": "692880"
  },
  {
    "text": "failed lets me know that I need to go back and correct this commit so this is",
    "start": "692880",
    "end": "698079"
  },
  {
    "text": "one way that you're going to get this commit before it reaches production it is simplified but this is one basic way",
    "start": "698079",
    "end": "704160"
  },
  {
    "text": "that you would do it all right so let's go forward okay",
    "start": "704160",
    "end": "709880"
  },
  {
    "start": "709000",
    "end": "1361000"
  },
  {
    "text": "the big question that I get isn't actually catching the commits I think by now we've understood that we should do",
    "start": "709880",
    "end": "715519"
  },
  {
    "text": "static analysis or we should do some unit testing for security purposes but the big question is what commits are you",
    "start": "715519",
    "end": "721399"
  },
  {
    "text": "supposed to be catching there are a lot of them there are a lot of types that you can think about and I'm going to borrow from the oos checklist and map",
    "start": "721399",
    "end": "728120"
  },
  {
    "text": "them to infrastructures code they all range from something that you do with more static analysis to those that you",
    "start": "728120",
    "end": "733760"
  },
  {
    "text": "do with more Dynamic analysis so input validation we'll talk about in more detail is going to be focused on static",
    "start": "733760",
    "end": "739279"
  },
  {
    "text": "analysis data protection somewhere in the middle it means it needs a little bit of static analysis and a little bit",
    "start": "739279",
    "end": "744839"
  },
  {
    "text": "of dynamic analysis and system configuration heavily relies on dynamic analysis you can do some things uh like",
    "start": "744839",
    "end": "751320"
  },
  {
    "text": "a unit test of sorts but most of the time you're going to want to monitor the live environment all right so let's talk",
    "start": "751320",
    "end": "757279"
  },
  {
    "text": "about input input validation input validation verifies expected types expect values proper character sets or",
    "start": "757279",
    "end": "763519"
  },
  {
    "text": "potentially insecure values um static analysis is often the way to go for input validation uh one way you can",
    "start": "763519",
    "end": "770320"
  },
  {
    "text": "think about this is whether or not someone's going to print out a password and plain text that has happened more",
    "start": "770320",
    "end": "775560"
  },
  {
    "text": "often than not it is often an accident but that does happen in the input validation scenario someone",
    "start": "775560",
    "end": "781160"
  },
  {
    "text": "just types it in and doesn't Mark it as a sensitive value right um another scenario of this is that someone may put",
    "start": "781160",
    "end": "787040"
  },
  {
    "text": "in a command that exploits something right so that command goes in it potentially exploits something and you",
    "start": "787040",
    "end": "792800"
  },
  {
    "text": "don't want that command to be run in your infrastructur Cod for some reason or another um so static analysis could",
    "start": "792800",
    "end": "798839"
  },
  {
    "text": "catch those inputs that potentially would have a problem so some examples of this that I see passwords should have at",
    "start": "798839",
    "end": "805120"
  },
  {
    "text": "least certain character sets this is actually incredibly difficult to uh test",
    "start": "805120",
    "end": "810160"
  },
  {
    "text": "in your infrastructures code because you don't know that the passwords often need a requirement until you apply it right",
    "start": "810160",
    "end": "817079"
  },
  {
    "text": "so a good example of this is if you have a database and you have to pass in a password to that database the",
    "start": "817079",
    "end": "822399"
  },
  {
    "text": "requirements aren't known to you until after you've run let's say terraform and the API comes back and says no no no",
    "start": "822399",
    "end": "828800"
  },
  {
    "text": "your password has incorrect requirements so this is the one way that you can move input validation earlier and get earlier",
    "start": "828800",
    "end": "835839"
  },
  {
    "text": "feedback on whether or not this password is correct um you you might have data residency requirements in which case the region must be in certain areas you can",
    "start": "835839",
    "end": "843160"
  },
  {
    "text": "use input validation for that certificate keys and names Etc one thing to divide though input validation there",
    "start": "843160",
    "end": "851040"
  },
  {
    "text": "are uh ways that you could do it with variable validation some infrastructures code tools will allow you to do inline V",
    "start": "851040",
    "end": "857199"
  },
  {
    "text": "variable validation um other times you're going to have to use a unit test that you write yourself so if you've got",
    "start": "857199",
    "end": "863519"
  },
  {
    "text": "uh something that's local to your team a specific cloud provider or specific infrastructure modules cons using",
    "start": "863519",
    "end": "869160"
  },
  {
    "text": "variable validation which is whatever is out of the box from your infrastructures code tool if you are looking for",
    "start": "869160",
    "end": "875399"
  },
  {
    "text": "something that is across multiple Cloud providers it's something specific to your organization it's a let's say a",
    "start": "875399",
    "end": "880519"
  },
  {
    "text": "legacy system or something that you want information or you want to double check those inputs you might consider writing",
    "start": "880519",
    "end": "886240"
  },
  {
    "text": "a unit test for that so a good example in terraform space is using this inline",
    "start": "886240",
    "end": "891600"
  },
  {
    "text": "validation condition that checks for whether or not something's in the United States so this is something that is a",
    "start": "891600",
    "end": "896880"
  },
  {
    "text": "little bit easier to add in it is tied however to your infrastructure's code tool it's hinged upon whether or not",
    "start": "896880",
    "end": "902199"
  },
  {
    "text": "that infrastructure can be deployed by that infrastructure's code tool but if this is the kind of um commitment you",
    "start": "902199",
    "end": "909040"
  },
  {
    "text": "want to make to infrastructures code often times it's much easier to do inline variable",
    "start": "909040",
    "end": "914440"
  },
  {
    "text": "validation a more complicated variable validation scenario uh especially in the case of terraform is something called a",
    "start": "914440",
    "end": "921040"
  },
  {
    "text": "precondition so this is one way that you can do uh verification of uh valid of",
    "start": "921040",
    "end": "927480"
  },
  {
    "text": "specific variable in puts against other variables so a good example of this might be I want to make sure that my",
    "start": "927480",
    "end": "934720"
  },
  {
    "text": "username is of length three because my manage service wants a username of at least three characters the problem as I",
    "start": "934720",
    "end": "941880"
  },
  {
    "text": "mentioned before is that my manage service doesn't tell me that I need three characters in my username until",
    "start": "941880",
    "end": "947319"
  },
  {
    "text": "after I run apply so this way I get fast feedback for the next person who has to implement this right the next person who",
    "start": "947319",
    "end": "953800"
  },
  {
    "text": "does this is like oh yeah I know what this is saying I need to create a username of three characters",
    "start": "953800",
    "end": "959199"
  },
  {
    "text": "and they don't waste time waiting until it applies to production for them to get that error message back so from a",
    "start": "959199",
    "end": "964800"
  },
  {
    "text": "security standpoint this is one the way that you can ensure certain requirements are being met for input validation you",
    "start": "964800",
    "end": "971440"
  },
  {
    "text": "also can do a unit test with Opa open policy agent this is a little bit more I would say useful when you have uh",
    "start": "971440",
    "end": "978399"
  },
  {
    "text": "certain attributes or certain practices that you want to check in your infrastructures code so the reason why I",
    "start": "978399",
    "end": "984839"
  },
  {
    "text": "have to test maybe the inputs themselves using open policy a is that there's no way for me to understand a best practice",
    "start": "984839",
    "end": "992240"
  },
  {
    "text": "right in this case my best practice is to use an environment variable to get the AWS secret key it's not to pass it",
    "start": "992240",
    "end": "999680"
  },
  {
    "text": "in line to my Tor form right I want to make sure from a security standpoint that I don't set it as a variable that",
    "start": "999680",
    "end": "1005480"
  },
  {
    "text": "anybody who's writing terraform doesn't set it as a variable I want them to use an environment variable so I'll use an a",
    "start": "1005480",
    "end": "1011199"
  },
  {
    "text": "unit test which is external to that infrastructure's code tool to identify whether or not the input is a variable",
    "start": "1011199",
    "end": "1017560"
  },
  {
    "text": "or an environment variable and is Heering adhering to best practices that I've set from a security standpoint all",
    "start": "1017560",
    "end": "1023920"
  },
  {
    "text": "right so that's input validation what about data protection data protection is a little bit complicated um and I think",
    "start": "1023920",
    "end": "1030959"
  },
  {
    "text": "it's a a pretty broad Topic in infrastructures code because you have access controls to State access controls",
    "start": "1030959",
    "end": "1037199"
  },
  {
    "text": "to the infrastructure API there's a lot of ways in which you might need to implement data protection from a",
    "start": "1037199",
    "end": "1042480"
  },
  {
    "text": "resource level as well as from access to the cloud provider so data protection",
    "start": "1042480",
    "end": "1048520"
  },
  {
    "text": "the first thing you have to think about is implementing access controls to State and State could mean data State could",
    "start": "1048520",
    "end": "1054960"
  },
  {
    "text": "also mean the infrastructure State itself uh it is easy now to retrieve",
    "start": "1054960",
    "end": "1060080"
  },
  {
    "text": "information about let's say an IP address and then extrapolate more information about your infrastructure that way and infiltrate your",
    "start": "1060080",
    "end": "1066039"
  },
  {
    "text": "infrastructure so having access controls to data as well as infrastructure state is important that's something that you",
    "start": "1066039",
    "end": "1072640"
  },
  {
    "text": "can actually in include as part of static analysis right making sure that you're limiting access to certain apis",
    "start": "1072640",
    "end": "1079280"
  },
  {
    "text": "or certain resources data resources encrypting in transit and at rest is something you can also analyze with",
    "start": "1079280",
    "end": "1085360"
  },
  {
    "text": "static analysis these days uh attributes that are being passed to infrastructure resources allow you to encrypt and Set",
    "start": "1085360",
    "end": "1091919"
  },
  {
    "text": "uh certain uh attributes for in transit and ATR so make sure you do that but",
    "start": "1091919",
    "end": "1097240"
  },
  {
    "text": "data protection also requires some Dynamic analysis two of these include sanitizing sensitive values in logs or",
    "start": "1097240",
    "end": "1103520"
  },
  {
    "text": "outputs uh I can definitely tell you that just because you say something is sensitive or you uh treat something as",
    "start": "1103520",
    "end": "1109799"
  },
  {
    "text": "secret doesn't always mean you keep it secret um if you're running it in a CI framework it is kind of easy to",
    "start": "1109799",
    "end": "1116360"
  },
  {
    "text": "accidentally printed out so standardizing those sensitive values in logs and outputs is really difficult um",
    "start": "1116360",
    "end": "1122280"
  },
  {
    "text": "and it's often only really achieved through Dynamic analysis and ensuring least privilege access to Cloud providers or any service providers that",
    "start": "1122280",
    "end": "1129840"
  },
  {
    "text": "you're trying to interface with is incredibly difficult but it's made easier now a lot of these apis that are",
    "start": "1129840",
    "end": "1136039"
  },
  {
    "text": "offered as part of a managed service or cloud provider has analysis of whether or not you're using more permissions or",
    "start": "1136039",
    "end": "1141919"
  },
  {
    "text": "fewer permissions and it will give you information about whether or not you should lock that down further so use",
    "start": "1141919",
    "end": "1146960"
  },
  {
    "text": "Dynamic analysis to make that assessment I'll not run through all of these examples but some of the more important",
    "start": "1146960",
    "end": "1152960"
  },
  {
    "text": "ones is let's say like a password should not be printed in output um it's easy to accidentally do that in infrastructure",
    "start": "1152960",
    "end": "1158440"
  },
  {
    "text": "as code in particular by accident uh virtual machine resources should have an attached um identity and access",
    "start": "1158440",
    "end": "1164760"
  },
  {
    "text": "management role that's just a better practice that you want to enforce um and maybe you want to enforce",
    "start": "1164760",
    "end": "1170320"
  },
  {
    "text": "infrastructure state to be limited to owners of somewhere right um a good example of this is that there was a",
    "start": "1170320",
    "end": "1176120"
  },
  {
    "text": "recent article about how someone infiltrated infrastructure by uh accessing S3 infrastructure state in in",
    "start": "1176120",
    "end": "1182640"
  },
  {
    "text": "S3 bucket and the S3 bucket was not sufficiently locked down so the result",
    "start": "1182640",
    "end": "1187840"
  },
  {
    "text": "is that when you take care of your infrastructure state from your infrastructure as code tool make sure you are limiting its access and only",
    "start": "1187840",
    "end": "1194200"
  },
  {
    "text": "restricting it to certain owners or certain people who know what to do with it all right so data protection um these",
    "start": "1194200",
    "end": "1200320"
  },
  {
    "text": "are just the two ways you can think about it from a static analysis Dynamic analysis standpoint I won't go through it too far because I think the examples",
    "start": "1200320",
    "end": "1207000"
  },
  {
    "text": "speak a little bit better to this but let's imagine the static analysis scenario for a database that needs to be",
    "start": "1207000",
    "end": "1213760"
  },
  {
    "text": "encrypted uh static analysis of attributes is often something that you can do in line or unit test it you can",
    "start": "1213760",
    "end": "1220080"
  },
  {
    "text": "unit test it outside of it it's going to be in the Json schema that comes out of state regardless so static analysis of",
    "start": "1220080",
    "end": "1226799"
  },
  {
    "text": "attributes in this case I'm using open policy agent and what I'll do is just check that any changes that I'm be that",
    "start": "1226799",
    "end": "1232520"
  },
  {
    "text": "are being made has this attribute of storage encrypted um and this will let me know hey it should have encrypted",
    "start": "1232520",
    "end": "1238880"
  },
  {
    "text": "storage if it's not set a little bit of a more complicated one again is static analysis of specific",
    "start": "1238880",
    "end": "1245440"
  },
  {
    "text": "practices so what you can do with a unit test is you can identify if someone is",
    "start": "1245440",
    "end": "1250720"
  },
  {
    "text": "going to pass in a password that they've marked it sensitive um this is a common thing where maybe someone is putting in",
    "start": "1250720",
    "end": "1257000"
  },
  {
    "text": "an input Val input variable and they didn't mark it as a sensitive value because they just didn't know so what",
    "start": "1257000",
    "end": "1262919"
  },
  {
    "text": "this test is doing is it's just checking for whether or not the input variable has password in it um which you know for",
    "start": "1262919",
    "end": "1269640"
  },
  {
    "text": "the most part like when are you going to name an input variable password and not pass in a secret password not sure uh",
    "start": "1269640",
    "end": "1277159"
  },
  {
    "text": "but in that scenario what this is going to do is check every instance that you have something of password and make sure",
    "start": "1277159",
    "end": "1283760"
  },
  {
    "text": "that you've marked it as sens the output as sensitive you're redacting it right so this is ures across the board anybody",
    "start": "1283760",
    "end": "1290000"
  },
  {
    "text": "who's doing this is going to redact their password and they know what to do the other thing that you can think",
    "start": "1290000",
    "end": "1295840"
  },
  {
    "text": "about is continuous enforcement and this is more along the lines of dynamic analysis um there are ways in which you",
    "start": "1295840",
    "end": "1302159"
  },
  {
    "text": "can identify certain attributes in re infrastructure resources and continuously monitor whether or not they",
    "start": "1302159",
    "end": "1309760"
  },
  {
    "text": "adhere to certain requirements so for example I'm doing something uh called a post condition but in other scenarios",
    "start": "1309760",
    "end": "1315799"
  },
  {
    "text": "you might just scan your infrastructure every you know every day or something and say I want to make sure that this",
    "start": "1315799",
    "end": "1321480"
  },
  {
    "text": "particular attribute is set to storage encrypted and it's encrypted so there",
    "start": "1321480",
    "end": "1326679"
  },
  {
    "text": "are many many different ways to do it uh and I think a common question that I get and I'll address it here is when should",
    "start": "1326679",
    "end": "1332480"
  },
  {
    "text": "I do this in static analysis and when should I do this in Dynamic analysis well generally speaking if you're",
    "start": "1332480",
    "end": "1338640"
  },
  {
    "text": "enforcing these requirements early in your development process do it in static",
    "start": "1338640",
    "end": "1343840"
  },
  {
    "text": "analysis but if you know you maybe have some Legacy resources or resources that you otherwise enforce um with this with",
    "start": "1343840",
    "end": "1351000"
  },
  {
    "text": "like a let's say a unit test or something else maybe consider doing this continuous enforcement model where",
    "start": "1351000",
    "end": "1356520"
  },
  {
    "text": "you're going to pull for that certain attribute every day all right so finally system",
    "start": "1356520",
    "end": "1362200"
  },
  {
    "start": "1361000",
    "end": "1638000"
  },
  {
    "text": "configuration last type of test we're going to talk about system configuration is probably the bulk of infrastructure",
    "start": "1362200",
    "end": "1367919"
  },
  {
    "text": "right after all it's a system and you configure it um so an infrastructure is code most of this is going to be static",
    "start": "1367919",
    "end": "1373559"
  },
  {
    "text": "analysis like versions images uh leas privilege network access network is hard",
    "start": "1373559",
    "end": "1378799"
  },
  {
    "text": "I understand um but the the leas privilege network access piece is even harder right how do you know who should",
    "start": "1378799",
    "end": "1385000"
  },
  {
    "text": "have access and who shouldn't have access from a network standpoint um and also separating development and production is something we try to do but",
    "start": "1385000",
    "end": "1391600"
  },
  {
    "text": "oftentimes we don't uh we don't necessarily know if we truly do separate development and production um but there",
    "start": "1391600",
    "end": "1397120"
  },
  {
    "text": "is an are a couple exceptions to this uh vulnerabilities need Dynamic analysis",
    "start": "1397120",
    "end": "1402279"
  },
  {
    "text": "it's very hard to do vulnerability scanning with static analysis people have asked people have wanted this it",
    "start": "1402279",
    "end": "1408279"
  },
  {
    "text": "doesn't quite exist um you have to do it on a live environment partly because there are going to be new things that",
    "start": "1408279",
    "end": "1414080"
  },
  {
    "text": "come up new vulnerabilities that are being discovered you need to know them in your in your live environment your",
    "start": "1414080",
    "end": "1419880"
  },
  {
    "text": "your code might be able to help you uh but you'll want to know how much of your infrastructure footprint is uh going to",
    "start": "1419880",
    "end": "1425880"
  },
  {
    "text": "be vulnerable to a new vulnerability so Dynamic analysis is something you might as well invest in for that uh assessing",
    "start": "1425880",
    "end": "1431440"
  },
  {
    "text": "drift so infrastructure drift is the difference between what's in your infrastructure's code or what is",
    "start": "1431440",
    "end": "1436520"
  },
  {
    "text": "expected uh and what what is actual right what is live drift is actually pretty common in most environments right",
    "start": "1436520",
    "end": "1442960"
  },
  {
    "text": "you're never going to have perfect onetoone between your your infrastructure code and your live environment so Drift actually is",
    "start": "1442960",
    "end": "1450080"
  },
  {
    "text": "important from a security standpoint because there may be something you don't know about in your live environment so",
    "start": "1450080",
    "end": "1455159"
  },
  {
    "text": "you think you're you've configured it properly in infrastructure's code but over time you don't realize that there's",
    "start": "1455159",
    "end": "1461320"
  },
  {
    "text": "maybe a version that's out of date or something um that's in the live environment so that drift way will let",
    "start": "1461320",
    "end": "1466880"
  },
  {
    "text": "you know finally removing idle and unused resources from a security standpoint um this is probably more from",
    "start": "1466880",
    "end": "1473320"
  },
  {
    "text": "a cost standpoint but also from a security standpoint you'll want to remove idle or unused resources um",
    "start": "1473320",
    "end": "1478520"
  },
  {
    "text": "someone can find them and use them so you might as well just remove them not only from a cost standpoint but also",
    "start": "1478520",
    "end": "1484120"
  },
  {
    "text": "from a security standpoint and that's something you're only going to get through Dynamic analysis um usage is",
    "start": "1484120",
    "end": "1489200"
  },
  {
    "text": "very difficult to assess and identify in infrastructure's code it's something you have to understand in your live",
    "start": "1489200",
    "end": "1495159"
  },
  {
    "text": "environment so here are a couple examples but I think there's some better examples in line um if you're wondering",
    "start": "1495159",
    "end": "1501880"
  },
  {
    "text": "whether or not you should use static analysis or dynamic analysis for system configurations I highly recommend you",
    "start": "1501880",
    "end": "1507559"
  },
  {
    "text": "take a look uh at separating the two so for example static analysis is better for enforcement of secure practices so",
    "start": "1507559",
    "end": "1515200"
  },
  {
    "text": "if you want to make sure that someone is adhering to certain system configuration requirements use static analysis um it's",
    "start": "1515200",
    "end": "1522399"
  },
  {
    "text": "also surprisingly good for complex Logic for validation I'll show a little bit about that in more detail and it's good",
    "start": "1522399",
    "end": "1528159"
  },
  {
    "text": "for testing valid dependencies uh testing valid dependencies is a tricky one because sometimes you have disperate",
    "start": "1528159",
    "end": "1534120"
  },
  {
    "text": "systems managing uh certain pieces of information security information about your environment so a good example of",
    "start": "1534120",
    "end": "1540200"
  },
  {
    "text": "this might be I know my secure container image should be",
    "start": "1540200",
    "end": "1545559"
  },
  {
    "text": "2.0 uh however uh this information exists in an artifact repository with",
    "start": "1545559",
    "end": "1551000"
  },
  {
    "text": "some tagging right it's not going to be something I'm going to directly Port into my infrastructure's code so what I",
    "start": "1551000",
    "end": "1557039"
  },
  {
    "text": "can do in instead is I can dynamically retrieve that information and say give me all secure images does my",
    "start": "1557039",
    "end": "1563559"
  },
  {
    "text": "infrastructure as code adhere to one of these secure image versions right um so",
    "start": "1563559",
    "end": "1568840"
  },
  {
    "text": "testing valid dependency is incredibly useful from a static analysis standpoint Dynamic analysis is a lot better for",
    "start": "1568840",
    "end": "1574840"
  },
  {
    "text": "Network auditing so if you're trying to understand what's happening within your network what's happening within your",
    "start": "1574840",
    "end": "1580200"
  },
  {
    "text": "infrastructure um Network auditing is a much better approach from a dynamic analysis standpoint that's live traffic",
    "start": "1580200",
    "end": "1586880"
  },
  {
    "text": "continuous valid is a newer one I think uh as you grow your infrastructure and it scales it becomes a lot harder to",
    "start": "1586880",
    "end": "1593440"
  },
  {
    "text": "identify what infrastructure is adhering to infrastructures code and maybe some",
    "start": "1593440",
    "end": "1599120"
  },
  {
    "text": "infrastructure that's not written in infrastructure's code right so those boundaries are really difficult to",
    "start": "1599120",
    "end": "1604320"
  },
  {
    "text": "maintain over time um so Dynamic analysis ensures that any validation of infrastructure that's not in code uh is",
    "start": "1604320",
    "end": "1611880"
  },
  {
    "text": "going to continue with the same rules as the ones that have been written with uh infrastructures code drifted protection",
    "start": "1611880",
    "end": "1617880"
  },
  {
    "text": "is also a big question right now as well okay so I think this is probably the one",
    "start": "1617880",
    "end": "1623440"
  },
  {
    "text": "uh the the most complex static and Hest example you're ever going to come across and I have to show it on screen because",
    "start": "1623440",
    "end": "1629520"
  },
  {
    "text": "it was so big that I can't show it all on one slide so we're going to go through that",
    "start": "1629520",
    "end": "1635159"
  },
  {
    "text": "a little bit okay so uh this is an example of a",
    "start": "1635159",
    "end": "1641880"
  },
  {
    "start": "1638000",
    "end": "2061000"
  },
  {
    "text": "kubernetes cluster and if you're not familiar with kubernetes that's that's perfectly fine but for the sake of this",
    "start": "1641880",
    "end": "1647840"
  },
  {
    "text": "example really what we're looking for is uh we're trying to figure out whether or",
    "start": "1647840",
    "end": "1653760"
  },
  {
    "text": "not our kubernetes or managed kubernetes cluster is on a public network or a",
    "start": "1653760",
    "end": "1658840"
  },
  {
    "text": "private Network the reason why this is important is that if a kubernetes cluster is on a public network it means",
    "start": "1658840",
    "end": "1664960"
  },
  {
    "text": "someone else could potentially access it that's not in my organization U so from a bre practice standpoint most of the",
    "start": "1664960",
    "end": "1671000"
  },
  {
    "text": "time you want to think about putting your infrastructure resources on a private network with certain exceptions",
    "start": "1671000",
    "end": "1676399"
  },
  {
    "text": "uh if you have Advanced Access Control Systems in front of everything then we don't have to talk about private",
    "start": "1676399",
    "end": "1681960"
  },
  {
    "text": "networking but most of the time um we are going to want to put certain infrastructure resources on private",
    "start": "1681960",
    "end": "1688399"
  },
  {
    "text": "networks and then ensure that certain only certain people within our company can get to it so I guess if anybody's",
    "start": "1688399",
    "end": "1694960"
  },
  {
    "text": "tried to do this in uh in AWS if you put a kubernetes cluster out there how do",
    "start": "1694960",
    "end": "1700080"
  },
  {
    "text": "you know that it's on a public or private Network well I'll show you the",
    "start": "1700080",
    "end": "1705120"
  },
  {
    "text": "actual uh configuration here as you can see there",
    "start": "1705120",
    "end": "1711519"
  },
  {
    "text": "is no indication that it is a private Network un only because I've passed in an attribute that says private private",
    "start": "1711519",
    "end": "1718600"
  },
  {
    "text": "subnets right um really all it's asking for is subnet identifiers so the",
    "start": "1718600",
    "end": "1723960"
  },
  {
    "text": "question is how do you know that these subnets are private or public so we have to go back and we have to understand",
    "start": "1723960",
    "end": "1729360"
  },
  {
    "text": "whether or not they are you can use some unit testing here or static analysis here to understand and identify whether",
    "start": "1729360",
    "end": "1736679"
  },
  {
    "text": "or not these sub subnets are public or private so the way you do this is that the first thing you do is retrieve",
    "start": "1736679",
    "end": "1741720"
  },
  {
    "text": "information about the subnet identifiers that the cluster is running on um you'll also want to retrieve information about",
    "start": "1741720",
    "end": "1748320"
  },
  {
    "text": "the network associated with certain private subnets right so here what I'm doing is I'm taking the set and I'm just",
    "start": "1748320",
    "end": "1754919"
  },
  {
    "text": "going to do some collections manipulations on it to retrieve whether or not these subnets are private or",
    "start": "1754919",
    "end": "1760279"
  },
  {
    "text": "public so in this case the one important line here is that the map public IP on",
    "start": "1760279",
    "end": "1766200"
  },
  {
    "text": "launch is set to false right this tells me that it is a private",
    "start": "1766200",
    "end": "1771919"
  },
  {
    "text": "subnet after I get this information I'm going to do some fancy collection work uh where I subtract the set of cluster",
    "start": "1771919",
    "end": "1778919"
  },
  {
    "text": "subnet IDs uh or the private subnets from the cluster subnet IDs so what this is saying is that I'm going to get any",
    "start": "1778919",
    "end": "1786279"
  },
  {
    "text": "subnet IDs in that is attached to my eks cluster or my kubernetes cluster and get",
    "start": "1786279",
    "end": "1791960"
  },
  {
    "text": "the difference with a private subnet and this gives me the public subnets associated with my kubernets cluster the",
    "start": "1791960",
    "end": "1798480"
  },
  {
    "text": "reason why it's important is that now I know that this cluster has attachments to public subnets and I don't want that",
    "start": "1798480",
    "end": "1805000"
  },
  {
    "text": "right so I'm going to print out a useful error message that says eks cluster should be in private subnets and these",
    "start": "1805000",
    "end": "1810919"
  },
  {
    "text": "subnet IDs are public subnets right so this is a little bit more complicated example but what we're really doing is",
    "start": "1810919",
    "end": "1816799"
  },
  {
    "text": "we're taking a lot of dependencies chaining them together within this test ex extracting more information and that",
    "start": "1816799",
    "end": "1823799"
  },
  {
    "text": "way we can get the final conclusion of whether or not this kubernetes cluster",
    "start": "1823799",
    "end": "1829120"
  },
  {
    "text": "adheres to certain policies that we have specifically that the cluster should be in private subnets so while this seems a",
    "start": "1829120",
    "end": "1835799"
  },
  {
    "text": "little bit more complicated what it's really doing is taking all these pieces of information putting it together I do",
    "start": "1835799",
    "end": "1841760"
  },
  {
    "text": "this because I do this in this way because it's all in the same state but the reality is maybe your network is in",
    "start": "1841760",
    "end": "1848039"
  },
  {
    "text": "a different configuration file so you might have to do a little bit more work toet retrieve that information from a",
    "start": "1848039",
    "end": "1854519"
  },
  {
    "text": "separate uh infrastructure configuration but but the idea is the same whether you're doing this for versions or um",
    "start": "1854519",
    "end": "1861120"
  },
  {
    "text": "images uh subnets or any other attributes you're looking for that require external dependencies you can",
    "start": "1861120",
    "end": "1867080"
  },
  {
    "text": "use the same approach okay so if you're work looking",
    "start": "1867080",
    "end": "1873440"
  },
  {
    "text": "at your system right now though there's a lot of uh attributes that change over time so a good example of this is that",
    "start": "1873440",
    "end": "1879760"
  },
  {
    "text": "maybe I'm using a manage service and the manage service um is just kind of running out there I'm going to manually",
    "start": "1879760",
    "end": "1886720"
  },
  {
    "text": "update it myself I just sort of let it run and then you know I don't think about it that much right you deployed it",
    "start": "1886720",
    "end": "1892600"
  },
  {
    "text": "so why think about it no one knows about dayn operations or day two operations uh but day two operations are upon us um",
    "start": "1892600",
    "end": "1899760"
  },
  {
    "text": "and suddenly we realize well something about that managed service is out of date so in this case I have a managed",
    "start": "1899760",
    "end": "1905240"
  },
  {
    "text": "console cluster it's okay you don't have to know what console is but I have a managed console cluster and it's out of date right because I'm manually updating",
    "start": "1905240",
    "end": "1912320"
  },
  {
    "text": "it so what I have to do now is go and update it the only reason why I know",
    "start": "1912320",
    "end": "1917600"
  },
  {
    "text": "this is because I do continuous validation and dynamic analysis on that",
    "start": "1917600",
    "end": "1922799"
  },
  {
    "text": "cluster right I have a rule set up that says if it is out of date I want you to",
    "start": "1922799",
    "end": "1928519"
  },
  {
    "text": "let me know and if we take a look at this rule which we'll take a look at",
    "start": "1928519",
    "end": "1933639"
  },
  {
    "text": "this one if we take a look at this rule we'll notice that it is basically similar to",
    "start": "1933639",
    "end": "1940880"
  },
  {
    "text": "everything else that we've already looked at right oh stop no ah you know this is okay we're going",
    "start": "1940880",
    "end": "1948360"
  },
  {
    "text": "to go backwards a little bit um this one is a done in a post",
    "start": "1948360",
    "end": "1954279"
  },
  {
    "text": "condition the post condition is checking whether or not the version that I've",
    "start": "1954279",
    "end": "1959960"
  },
  {
    "text": "defined in infrastructure as code matches the one that is being defined",
    "start": "1959960",
    "end": "1965639"
  },
  {
    "text": "that is being defined to me as the recommended one right so it's identifying the disparity between what",
    "start": "1965639",
    "end": "1971240"
  },
  {
    "text": "is currently the infrastructure State as well as what is the best practice from a security standpoint so in this case I'm",
    "start": "1971240",
    "end": "1978080"
  },
  {
    "text": "reaching out to an API to get the recommended version and then I'm comparing it to my current version and",
    "start": "1978080",
    "end": "1984159"
  },
  {
    "text": "if they don't match I'm going to throw an error message that says the versions are not updated you need to be updating",
    "start": "1984159",
    "end": "1990399"
  },
  {
    "text": "to this recommended version from a security standpoint so as you go on and you",
    "start": "1990399",
    "end": "1995440"
  },
  {
    "text": "continue doing this the idea is that over time you're going to continuously validate whether or not the version that",
    "start": "1995440",
    "end": "2003120"
  },
  {
    "text": "you have running in production is what the recommended or secure version is and you'll get a sense of what is out of",
    "start": "2003120",
    "end": "2008519"
  },
  {
    "text": "date so at this point someone's going to go in manually make the updates I'm not going to show this process because it's",
    "start": "2008519",
    "end": "2014360"
  },
  {
    "text": "tedious uh but I'll just keep updating and updating till eventually eventually we get to the recommended version and by",
    "start": "2014360",
    "end": "2022080"
  },
  {
    "text": "the time we get to the recommended version my Dynamic analysis will say great I've run again I've run myself",
    "start": "2022080",
    "end": "2027960"
  },
  {
    "text": "again and you pass so that means now everything is up to date so as you go through this process that I outlined in",
    "start": "2027960",
    "end": "2034760"
  },
  {
    "text": "the beginning what you're doing is you're going back and you're reconciling all of the production",
    "start": "2034760",
    "end": "2040440"
  },
  {
    "text": "configuration the secure production configuration back into infrastructures code in this case so having some kind of",
    "start": "2040440",
    "end": "2046080"
  },
  {
    "text": "continuous validation mechanism is really powerful that's part of the reason why you need Dynamic analysis especially in the case of system",
    "start": "2046080",
    "end": "2052240"
  },
  {
    "text": "configuration you need to be able to com you need to compare what is in your infrastructure's code as well as what",
    "start": "2052240",
    "end": "2058320"
  },
  {
    "text": "it's in the live State okay there's more I actually have a lot more to this",
    "start": "2058320",
    "end": "2065240"
  },
  {
    "start": "2061000",
    "end": "2470000"
  },
  {
    "text": "um and the big question I get is well okay Rosemary I've written all these tests I followed all these rules I wrote",
    "start": "2065240",
    "end": "2070720"
  },
  {
    "text": "stuff for input validation I wrote stuff for data protection and system configuration but I need to share it it",
    "start": "2070720",
    "end": "2076158"
  },
  {
    "text": "doesn't work I just like it's it's great it's for me but I need other people to use it too right because we all want to",
    "start": "2076159",
    "end": "2082560"
  },
  {
    "text": "be writing secure infrastructures code at the end of the day so how do you share tests well the first just thinking",
    "start": "2082560",
    "end": "2088000"
  },
  {
    "text": "about storing tests in a central location this could be a repository somewhere if you're using open policy",
    "start": "2088000",
    "end": "2093240"
  },
  {
    "text": "agent this might be bundles that you can reference but storing it in one place allows everybody to access it you'll",
    "start": "2093240",
    "end": "2098880"
  },
  {
    "text": "also want to be tagging naming or numbering tests for relevance most of the benchmarks that you'll see out there",
    "start": "2098880",
    "end": "2105079"
  },
  {
    "text": "do this do a great job of tagging naming and numbering tests so that you can identify ones that you want to make",
    "start": "2105079",
    "end": "2110960"
  },
  {
    "text": "exceptions to so I recommend you standardize on a numbering system for your tests and you can also uh tag them",
    "start": "2110960",
    "end": "2117359"
  },
  {
    "text": "for relevance as well because not everybody needs to run a python a set of let's say um a set of tests for your",
    "start": "2117359",
    "end": "2124240"
  },
  {
    "text": "database if they don't have a database right um so you'll want to identify what the",
    "start": "2124240",
    "end": "2129480"
  },
  {
    "text": "test is for their relevance and whether or not someone should run them and you also want to document secure configurations in the test themselves um",
    "start": "2129480",
    "end": "2137320"
  },
  {
    "text": "I think tests as documentation is something that's becoming more and more important as we scale our systems we",
    "start": "2137320",
    "end": "2142560"
  },
  {
    "text": "want to be able to communicate to someone else that this is the expectation we have in our system or in our application and it's a lot easier to",
    "start": "2142560",
    "end": "2149560"
  },
  {
    "text": "do that in tests than sometimes keeping the documentation up to date it's not to say you should omit documentation but",
    "start": "2149560",
    "end": "2155400"
  },
  {
    "text": "for security requirements and to scale them across a larger system you'll start",
    "start": "2155400",
    "end": "2160520"
  },
  {
    "text": "needing to move them to tests it's no longer sufficient to just put them somewhere and expect someone to follow them on a",
    "start": "2160520",
    "end": "2166599"
  },
  {
    "text": "checklist okay the next question I get is how do you catch commits right I showed a very simplistic example where",
    "start": "2166599",
    "end": "2173079"
  },
  {
    "text": "you can just run it and you check if it passes or fails on your local machine but what about an ACI",
    "start": "2173079",
    "end": "2178920"
  },
  {
    "text": "framework what if you want to run all these security scans but you don't want it to block production right you want",
    "start": "2178920",
    "end": "2185480"
  },
  {
    "text": "people to still develop you want people to still be um doing SEC the right kind of development work that still secure",
    "start": "2185480",
    "end": "2191480"
  },
  {
    "text": "but you don't want them to stop working right just because something isn't secure well I think there's two schools",
    "start": "2191480",
    "end": "2197200"
  },
  {
    "text": "of thought to this you can say I'm going to do some static analysis in staging if the static analysis passes",
    "start": "2197200",
    "end": "2204440"
  },
  {
    "text": "then I don't promote to produ it does not pass then I don't promote it to production right so if it fails in staging don't promote it to production",
    "start": "2204440",
    "end": "2211520"
  },
  {
    "text": "great um this is I think the one way that uh the more common way that people put it together they say say all right",
    "start": "2211520",
    "end": "2217040"
  },
  {
    "text": "in a staging environment I'll just quickly check that things are working uh if they're secure and if they aren't as",
    "start": "2217040",
    "end": "2222119"
  },
  {
    "text": "a first pass then I just won't push it to production great um they'll also do",
    "start": "2222119",
    "end": "2227640"
  },
  {
    "text": "some static analysis in production oftentimes in the case of terraform they're going to do the static analysis",
    "start": "2227640",
    "end": "2232800"
  },
  {
    "text": "before everything is applied so they'll do it on the dry run and then they'll check if it's secure if it's not secure",
    "start": "2232800",
    "end": "2238800"
  },
  {
    "text": "they won't apply those changes to production uh and so that's another way to do it as well uh this works you know",
    "start": "2238800",
    "end": "2245319"
  },
  {
    "text": "you could add it if you have stage and production you could do this step if you just have production some people only",
    "start": "2245319",
    "end": "2250359"
  },
  {
    "text": "have production um they don't have staging so in these kinds of environments you can choose which way",
    "start": "2250359",
    "end": "2255520"
  },
  {
    "text": "you want to but regardless you want to put the static analysis stage uh running in parallel against functional tests the",
    "start": "2255520",
    "end": "2262640"
  },
  {
    "text": "reason why is that often times people uh Will May mix the two up uh and also from",
    "start": "2262640",
    "end": "2267839"
  },
  {
    "text": "a stage standpoint I also find that if you say okay I'm going to stick a security test in the middle of everything uh people get very annoyed so",
    "start": "2267839",
    "end": "2275319"
  },
  {
    "text": "you want to run them in parallel if possible or on a different branch Dynamic analysis is something",
    "start": "2275319",
    "end": "2280640"
  },
  {
    "text": "you'll do primarily for your production environment I argue that you do want to do it for your staging environment it's",
    "start": "2280640",
    "end": "2286160"
  },
  {
    "text": "particularly useful if your staging environment is close to your production uh environment in configuration if it's",
    "start": "2286160",
    "end": "2292599"
  },
  {
    "text": "not that close to your production environment though you might find just a bunch of false positives um in Dynamic",
    "start": "2292599",
    "end": "2299160"
  },
  {
    "text": "analysis right uh for your staging environment so just keep that in mind if you know that your staging environment",
    "start": "2299160",
    "end": "2304640"
  },
  {
    "text": "is just going to be more lenient than production Dynamic analysis may not be worth it right it only really helps if",
    "start": "2304640",
    "end": "2311040"
  },
  {
    "text": "your staging environment is a little bit closer to your production environment and when I talk about staging it doesn't",
    "start": "2311040",
    "end": "2316280"
  },
  {
    "text": "always mean development staging you could have an infrastructure staging environment as well that's a choice that your company or your organization is",
    "start": "2316280",
    "end": "2322400"
  },
  {
    "text": "going to make so in the case of your staging environment that's close to production",
    "start": "2322400",
    "end": "2327760"
  },
  {
    "text": "environment you'll use Dynamic analysis and uh basically stop the promotion to production if something fails right so",
    "start": "2327760",
    "end": "2334640"
  },
  {
    "text": "Dynamic analysis is useful if you say okay someone pushed a version of an image it's been running for a period of",
    "start": "2334640",
    "end": "2340079"
  },
  {
    "text": "time and now it's vulnerable uh you know this will let me know that staging is broken and I need to go fix it but again",
    "start": "2340079",
    "end": "2345920"
  },
  {
    "text": "you know most of the time we're not having exact um matches between staging and production so it may not be worth it",
    "start": "2345920",
    "end": "2351319"
  },
  {
    "text": "for you finally do you write them all yourself no do not write all these tests",
    "start": "2351319",
    "end": "2356880"
  },
  {
    "text": "yourself we went through this whole process I convinced you there are different types of tests and now I'm telling you oh no don't write them all",
    "start": "2356880",
    "end": "2362520"
  },
  {
    "text": "yourself um and the reason why is that now there are a lot of pre-written test Suites industry benchmarks open source",
    "start": "2362520",
    "end": "2368040"
  },
  {
    "text": "as well as vendored and you want to invest in these because there are many many many practices that you cannot",
    "start": "2368040",
    "end": "2374560"
  },
  {
    "text": "capture by yourself uh at the end of the day if you're trying to write uh test Suites to an industry Benchmark they're",
    "start": "2374560",
    "end": "2380800"
  },
  {
    "text": "incredibly difficult and they're a lot of tests to write so it's a lot easier to use someone else's pre-written ones",
    "start": "2380800",
    "end": "2387359"
  },
  {
    "text": "um you'll want to use these test Suites again what against infrastructure modules as well as production configuration you don't have to",
    "start": "2387359",
    "end": "2393520"
  },
  {
    "text": "necessarily do them against development while it's a nice to have I think a lot of the times again",
    "start": "2393520",
    "end": "2398640"
  },
  {
    "text": "development or staging doesn't really match production so the result is that you end up causing more frustration as a",
    "start": "2398640",
    "end": "2405319"
  },
  {
    "text": "result so at the very minimum put them to infrastructure modules or things that infrastructure components that you",
    "start": "2405319",
    "end": "2410440"
  },
  {
    "text": "distribute to other people um run those tests that way and then production configuration and then if you cannot",
    "start": "2410440",
    "end": "2416720"
  },
  {
    "text": "find a test Suite or any kind of test that suits you then write the custom policy um just make sure you divide by",
    "start": "2416720",
    "end": "2423200"
  },
  {
    "text": "enforcement level business unit resource and type I didn't really go deeply into enforcement level there's actually a whole science behind it but you can",
    "start": "2423200",
    "end": "2429680"
  },
  {
    "text": "choose mandatory or advisory for the most part um mandatory means that it must be this rule must be passing uh",
    "start": "2429680",
    "end": "2437079"
  },
  {
    "text": "advisory means that you might be able to override it right or it's something that's a good practice we kind of would",
    "start": "2437079",
    "end": "2442359"
  },
  {
    "text": "like you to do but you don't have to do it dividing by business unit resource and type um is more intuitive if say you",
    "start": "2442359",
    "end": "2448599"
  },
  {
    "text": "have different policies or different things for different types of infrastructure good example of this is maybe you have infrastructure dedicated",
    "start": "2448599",
    "end": "2455200"
  },
  {
    "text": "to payments in which case it has to be what is US PCI Compliant right uh or resources that are in a legacy",
    "start": "2455200",
    "end": "2461079"
  },
  {
    "text": "environment that fall under a different set of tests than what you would expect from like a cloud provider for",
    "start": "2461079",
    "end": "2467880"
  },
  {
    "text": "example uh we're going to skip through this because it shows basically I did not have to write my own tests for a lot",
    "start": "2467880",
    "end": "2474119"
  },
  {
    "start": "2470000",
    "end": "2496000"
  },
  {
    "text": "of my infrastructure um this is a rather large environment with over 400 resources that I keep running uh and for",
    "start": "2474119",
    "end": "2480520"
  },
  {
    "text": "the most part I just have uh some continuous validation as well as some other um checks on it uh these are are",
    "start": "2480520",
    "end": "2487000"
  },
  {
    "text": "two tools like sneak and Prisma Cloud that you can use for example that has all these benchmarks so I just run them",
    "start": "2487000",
    "end": "2492400"
  },
  {
    "text": "and I double check that everything is good now what's important this is the short list prefer secure defaults over",
    "start": "2492400",
    "end": "2499440"
  },
  {
    "start": "2496000",
    "end": "2625000"
  },
  {
    "text": "tests I just told you to write some tests but you also want to take what you learned in tests and just put them as",
    "start": "2499440",
    "end": "2504640"
  },
  {
    "text": "defaults in infrastructure modules if you're Distributing infrastructure components across your organization make",
    "start": "2504640",
    "end": "2510160"
  },
  {
    "text": "sure you prefer secure defaults right don't let someone configure an unencrypted database for example or",
    "start": "2510160",
    "end": "2516040"
  },
  {
    "text": "don't let someone just put in a security group rule for 0000 be opinionated um it",
    "start": "2516040",
    "end": "2521319"
  },
  {
    "text": "might cause initial frustration but it's less frustration further down the development cycle so you can do it",
    "start": "2521319",
    "end": "2527000"
  },
  {
    "text": "earlier and that way someone is able to say okay I'm going to make sure this is secure by default and you don't necessarily have to have tests for those",
    "start": "2527000",
    "end": "2533520"
  },
  {
    "text": "things you can also choose the severity threshold I mentioned about uh identifying mandatory versus advisory",
    "start": "2533520",
    "end": "2539520"
  },
  {
    "text": "you'll also want to think about uh using advisory as a last resort because I can I'm guilty of this uh you can just click",
    "start": "2539520",
    "end": "2545839"
  },
  {
    "text": "through advisory and ignore it so don't don't use advisory unless you absolutely",
    "start": "2545839",
    "end": "2550880"
  },
  {
    "text": "have to most of the time people treat it as noise and they'll just click through it and ignore it anyway um so also",
    "start": "2550880",
    "end": "2556559"
  },
  {
    "text": "you'll want to think about trying to enforce development environments it makes it a little bit easier to continue to propagate these best practices or",
    "start": "2556559",
    "end": "2563240"
  },
  {
    "text": "secure practices into production environments as well and the final thing is evaluate and make",
    "start": "2563240",
    "end": "2569880"
  },
  {
    "text": "exceptions not every vulnerability needs to be patched and not every system",
    "start": "2569880",
    "end": "2575520"
  },
  {
    "text": "configuration has to be perfectly secure right sometimes you find that you'll have a",
    "start": "2575520",
    "end": "2580599"
  },
  {
    "text": "sufficient compensating control for example you might have a vulnerability uh in a container image but it only",
    "start": "2580599",
    "end": "2586800"
  },
  {
    "text": "really applies if someone can exploit your network if your network is private you may you know you've made efforts to",
    "start": "2586800",
    "end": "2593160"
  },
  {
    "text": "lock it down from a system configuration standpoint you might not need to patch that container image right so evaluate",
    "start": "2593160",
    "end": "2599520"
  },
  {
    "text": "and make acceptions to some of those situations not everything has to be perfectly secure what you'll find is",
    "start": "2599520",
    "end": "2605079"
  },
  {
    "text": "something that has to be secure enough uh and you have to identify what are compensating controls when you make",
    "start": "2605079",
    "end": "2610359"
  },
  {
    "text": "those exceptions you'll uh that's when you're going to use the tagging or numbering system it's a lot easier to say okay I'm going to put an exception",
    "start": "2610359",
    "end": "2616800"
  },
  {
    "text": "for this tag or number test uh and so it doesn't just fail something before it goes to production you ensure that that",
    "start": "2616800",
    "end": "2622760"
  },
  {
    "text": "exception is in place finally well we went through this whole journey um and",
    "start": "2622760",
    "end": "2629640"
  },
  {
    "start": "2625000",
    "end": "2684000"
  },
  {
    "text": "when you ask me how do you write secure infrastructures code now uh you'll now know that you capture practices into",
    "start": "2629640",
    "end": "2635000"
  },
  {
    "text": "test you share the test uh you can catch commits using a CI framework or pipeline only write what you must use someone",
    "start": "2635000",
    "end": "2641240"
  },
  {
    "text": "else's benchmarks or prewritten rules if you can and choose what is truly important for you from a security",
    "start": "2641240",
    "end": "2646400"
  },
  {
    "text": "standpoint to enforce again you can't have perfect security what you're going to do is secure enough over time um and",
    "start": "2646400",
    "end": "2653359"
  },
  {
    "text": "you're going to do this iterative process right you're going to have this process of breaking glass in your infrastructure environment or trying to",
    "start": "2653359",
    "end": "2660240"
  },
  {
    "text": "reconcile some drift so you're going to use Dynamic analysis to identify it and anytime you make those changes or",
    "start": "2660240",
    "end": "2666359"
  },
  {
    "text": "dynamic analysis finds a problem you'll correct it and then reconcile it back to infrastructures code and capture it in",
    "start": "2666359",
    "end": "2671640"
  },
  {
    "text": "static analysis so this iterative process continues over time and that is",
    "start": "2671640",
    "end": "2676760"
  },
  {
    "text": "where you get more secure infrastructures code over time and not perfectly secure",
    "start": "2676760",
    "end": "2682400"
  },
  {
    "text": "infrastructure thank you if you have any questions you can always reach out to me uh directly I have this demo app if",
    "start": "2682400",
    "end": "2688720"
  },
  {
    "start": "2684000",
    "end": "2722000"
  },
  {
    "text": "you're interest or this demo infrastructure if you're interested as well as all the policies um on this GitHub repository I also have a couple",
    "start": "2688720",
    "end": "2694960"
  },
  {
    "text": "resources for some of the things that I showed today specifically terraform policies as well as open policy agent",
    "start": "2694960",
    "end": "2700760"
  },
  {
    "text": "with that I'd like to open the floor for questions thank you",
    "start": "2700760",
    "end": "2706190"
  },
  {
    "text": "[Applause]",
    "start": "2706190",
    "end": "2710170"
  },
  {
    "text": "Ros",
    "start": "2720240",
    "end": "2723240"
  }
]