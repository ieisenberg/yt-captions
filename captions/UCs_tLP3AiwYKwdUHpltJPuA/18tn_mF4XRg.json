[
  {
    "start": "0",
    "end": "35000"
  },
  {
    "text": "(light piano music)",
    "start": "40",
    "end": "4790"
  },
  {
    "text": "(applause)",
    "start": "11060",
    "end": "15259"
  },
  {
    "text": "Thanks for the warm welcome, and thank you to you\nguys for coming today. I know there is quite a few\ndecent talks on at the moment",
    "start": "16329",
    "end": "22750"
  },
  {
    "text": "and Android security can\nbe a little bit niche.",
    "start": "22750",
    "end": "27321"
  },
  {
    "text": "I have tried to use that jungle analogy",
    "start": "28491",
    "end": "33943"
  },
  {
    "text": "to talk about the \"Android ecosystem\": some of the threats and risks.",
    "start": "33943",
    "end": "41620"
  },
  {
    "start": "35000",
    "end": "93000"
  },
  {
    "text": "(that is  the idea behind the talk). I have split it into two halves,",
    "start": "41620",
    "end": "46741"
  },
  {
    "text": "to allow for the fact that this is a conference for all developers, and technical people.",
    "start": "46741",
    "end": "53667"
  },
  {
    "text": "The first half is for everyone.",
    "start": "53667",
    "end": "57305"
  },
  {
    "text": "Hopefully we can\ntalk about the ecosystem and dispel a few myths.",
    "start": "59035",
    "end": "65045"
  },
  {
    "text": "The second half,\nwe are going to get into full-on survival tips to strengthen",
    "start": "65046",
    "end": "73090"
  },
  {
    "text": "the security of your apps. (You may notice some references to a certain jungle movie\nthroughout the presentation.",
    "start": "73091",
    "end": "81442"
  },
  {
    "text": "there is prizes at the end if\nyou can guess which one it is). Before I get started, let\nme just introduce myself",
    "start": "83132",
    "end": "91494"
  },
  {
    "text": "in a bit more detail. I am a lead Android developer\nat a small apps company",
    "start": "91494",
    "end": "98631"
  },
  {
    "start": "93000",
    "end": "462000"
  },
  {
    "text": "based in Bath (UK). I work remotely from Bristol",
    "start": "98631",
    "end": "104254"
  },
  {
    "text": "(which, after chatting to\na few people yesterday, no one really knew where that was, and so it is about 100\nmiles west of London,",
    "start": "104254",
    "end": "111772"
  },
  {
    "text": "and it is the home of Banksy. And those two things people\nseem to get whereabouts it is.)",
    "start": "111772",
    "end": "118624"
  },
  {
    "text": "At Intohand I create apps for industries",
    "start": "120365",
    "end": "126725"
  },
  {
    "text": "(weather apps, retail,\nvideo on demand and stuff). And my favorite bit, or\nthe bit I get excited about",
    "start": "126725",
    "end": "132089"
  },
  {
    "text": "and enthusiastic about\nis the security part: making them harder to hack. That interest led me to co-author",
    "start": "132089",
    "end": "140276"
  },
  {
    "text": "the Android Security Cookbook. I wrote about a third of that book",
    "start": "140276",
    "end": "145334"
  },
  {
    "text": "(defensive and protection chapters). Some of the stuff we cover\na bit in the second half.",
    "start": "145334",
    "end": "152327"
  },
  {
    "text": "(brief in the slides, obviously, but there is more code samples in the book).",
    "start": "153677",
    "end": "158976"
  },
  {
    "text": "The last thing is that I co-founded SWmobile, which is a mobile\ndevelopers meetup group",
    "start": "159942",
    "end": "167832"
  },
  {
    "text": "based in the southwest of England (about 600 members, and we do regular tech\ntalks and hackathons).",
    "start": "167832",
    "end": "175937"
  },
  {
    "text": "(I am a remote worker, but I enjoy face\ntime with fellow developers,",
    "start": "175938",
    "end": "181459"
  },
  {
    "text": "and sharing war stories and stuff, so please do come and\nsay \"Hi\" after the talk).",
    "start": "181459",
    "end": "186381"
  },
  {
    "text": " want to set the scene with Android. Earlier last week, Sundar announced",
    "start": "187839",
    "end": "197590"
  },
  {
    "text": "that we now have 1.4 billion active users of Android",
    "start": "197590",
    "end": "205086"
  },
  {
    "text": "(30-day active devices with\nGoogle services installed,",
    "start": "205087",
    "end": "210979"
  },
  {
    "text": "that does not even include all those Chinese tablets). (Huge number).",
    "start": "210979",
    "end": "216627"
  },
  {
    "text": "By far the largest mobile platform.",
    "start": "216627",
    "end": "220606"
  },
  {
    "text": "(This funky\ngraphic is trying to illustrate is that it is a diverse platform.)",
    "start": "221806",
    "end": "227471"
  },
  {
    "text": "There is over a million lines of code in the Android Open Source Project.",
    "start": "231153",
    "end": "235684"
  },
  {
    "text": "Thousands of different devices (which this graphic is trying to illustrate from the opensignals.com",
    "start": "236384",
    "end": "243737"
  },
  {
    "text": "annual fragmentation report). Hundreds of OEMs.",
    "start": "243738",
    "end": "249263"
  },
  {
    "text": "In theory, there is eyes on the code. This should build trust,",
    "start": "250008",
    "end": "256242"
  },
  {
    "text": "but there is not a single point of failure;",
    "start": "258053",
    "end": "264707"
  },
  {
    "text": "we are not relying on a\nsingle company or entity that holds all the keys.",
    "start": "264707",
    "end": "269335"
  },
  {
    "text": "And the point of these\ncouple slides was just to say: there is no absolute \"way it is\" on Android.",
    "start": "270142",
    "end": "276722"
  },
  {
    "text": "You should be skeptical of any security vendor or company",
    "start": "276722",
    "end": "282578"
  },
  {
    "text": "that says they have got a handle on it. Unlike iOS, where we have",
    "start": "282578",
    "end": "290406"
  },
  {
    "text": "updating devices in this diverse environment via over-the-air updates,",
    "start": "291916",
    "end": "298866"
  },
  {
    "text": "when we have got different OEMs and different carrier modifications, over-the-air updates just do not work.",
    "start": "298866",
    "end": "304640"
  },
  {
    "text": "How does Google help with\nsecurity in those instances?",
    "start": "304640",
    "end": "309401"
  },
  {
    "text": "They put in security services. I just picked out a couple\nthat I thought were relevant.",
    "start": "310957",
    "end": "318801"
  },
  {
    "text": "The first one being\n(the one probably most of you have heard of): Google Play store.",
    "start": "319931",
    "end": "326264"
  },
  {
    "text": "There is been a human involved in the approval process\nsince the beginning of 2015.",
    "start": "327904",
    "end": "334506"
  },
  {
    "text": "When you\nsign up for accounts, there is background checks",
    "start": "334506",
    "end": "339910"
  },
  {
    "text": "that you do not know about. But Google leveraged their other apps",
    "start": "339910",
    "end": "347435"
  },
  {
    "text": "(e.g. Gmail), and all their data\npoints to help with that background validation check.",
    "start": "347441",
    "end": "353245"
  },
  {
    "text": "They have also started the developer security notifications. When they are scanning the apps",
    "start": "354464",
    "end": "359774"
  },
  {
    "text": "and running their test to see if it is not malware, if they detect things",
    "start": "359774",
    "end": "365298"
  },
  {
    "text": "the developer have accidentally included their private keys in the app,  if they are\nusing a vulnerable version",
    "start": "365299",
    "end": "371720"
  },
  {
    "text": "of open SSL that they have included, and they have also, there is some issues around particular versions\nof PhoneGap, Cordova.",
    "start": "371720",
    "end": "379237"
  },
  {
    "text": "Qhat they started doing\nwas notifying developers, saying \"You know\nyou have got your private keys in your app, you should update that.\"",
    "start": "379947",
    "end": "386802"
  },
  {
    "text": "They reckon there is about 60,000 apps have been updated on looks\nback at those notifications",
    "start": "388451",
    "end": "394637"
  },
  {
    "text": "(good system). Small drop in the ocean\ncompared to the number of apps, but it is a step in the right direction.",
    "start": "394637",
    "end": "401045"
  },
  {
    "text": "The other thing that\nis behind the scene on Google Play store is the\nAndroid Bouncer service,",
    "start": "401364",
    "end": "407091"
  },
  {
    "text": "which was announced,\nor publicly announced, several years ago, and\nthat goes and runs",
    "start": "407091",
    "end": "413930"
  },
  {
    "text": "all the apps in\nemulate environments. It checks for malware\nsignatures and dodgy stuff,",
    "start": "414920",
    "end": "420399"
  },
  {
    "text": "and then removes them from the app store, suspends them, and, if warranted,",
    "start": "420399",
    "end": "426802"
  },
  {
    "text": "can remotely wipe them from the devices.",
    "start": "426802",
    "end": "430361"
  },
  {
    "text": "The other is the Android device manager,",
    "start": "433830",
    "end": "440919"
  },
  {
    "text": "a free service (anyone with an Android device can install:",
    "start": "440920",
    "end": "447014"
  },
  {
    "text": "help you find, lock, and, if necessary, wipe your device).",
    "start": "447544",
    "end": "452836"
  },
  {
    "text": "(If you have got an Android device and have not that installed, I would certainly\nrecommend putting that on).",
    "start": "453375",
    "end": "457870"
  },
  {
    "text": "Something that Google\nhas announced recently is the safety net system:",
    "start": "459307",
    "end": "464639"
  },
  {
    "start": "462000",
    "end": "620000"
  },
  {
    "text": "an intrusion detection system. Any device with Google\nservices can gather",
    "start": "464640",
    "end": "470970"
  },
  {
    "text": "different data\npoints and uploads that to the Google Services, and\nthey do data analysis.",
    "start": "470971",
    "end": "477653"
  },
  {
    "text": " They try and look\nfor potential malware.",
    "start": "477653",
    "end": "483078"
  },
  {
    "text": " In the second part of the presentation, I will talk about\npublic API for the safety net",
    "start": "483078",
    "end": "489413"
  },
  {
    "text": "(you can leverage in your apps, to leverage\nsome of that knowledge, which is pretty good).",
    "start": "489413",
    "end": "495978"
  },
  {
    "text": "Lastly, mention Android at Work, which\nis a way of segregating your personal and business\ndata and applications",
    "start": "497158",
    "end": "506319"
  },
  {
    "text": "on the same device. Definitely geared towards a BYOD approach,",
    "start": "506320",
    "end": "514013"
  },
  {
    "text": "but it gives system administrators API access for provisioning,",
    "start": "514013",
    "end": "519961"
  },
  {
    "text": "managing profiles. You can remove your access",
    "start": "519962",
    "end": "529157"
  },
  {
    "text": "and just wipe the business data and apps not your personal photos and stuff",
    "start": "529167",
    "end": "535657"
  },
  {
    "text": "(I think that is cool). The next slide talks\nabout the different layers",
    "start": "535657",
    "end": "543053"
  },
  {
    "text": "(I have  stolen this\nfrom Adrian Ludwig's talk",
    "start": "543054",
    "end": "547519"
  },
  {
    "text": "from Black Hat, because I\nthought it was quite good at showing the different layers). If you go from left to right",
    "start": "548499",
    "end": "555920"
  },
  {
    "text": "that is the more cloud-based services, to the layers within",
    "start": "555920",
    "end": "561201"
  },
  {
    "text": "the device. I just wanted to draw attention to",
    "start": "561202",
    "end": "565732"
  },
  {
    "text": "the verified apps section. It came into Android in 4.2,",
    "start": "567013",
    "end": "573738"
  },
  {
    "text": "a way for Google to monitor apps and detect potential malware\nwhen users were installing",
    "start": "573738",
    "end": "582373"
  },
  {
    "text": "applications not from\nthe Google Play store. Anyone with an Android device that has installed that, will\nsee the \"Verify apps\" consent;",
    "start": "583203",
    "end": "591089"
  },
  {
    "text": "then, when it is potential malware,",
    "start": "591089",
    "end": "598730"
  },
  {
    "text": "you will get a warning, In fact, if it is so dangerous",
    "start": "598730",
    "end": "604524"
  },
  {
    "text": "you could be blocked from installation. (pretty cool check, the way",
    "start": "604525",
    "end": "609732"
  },
  {
    "text": "that Google are trying\nto increase your security even though you are not\nusing the Google Play store).",
    "start": "609732",
    "end": "617141"
  },
  {
    "text": "The other thing that is\nworth bearing in mind, is Android's",
    "start": "618010",
    "end": "621936"
  },
  {
    "start": "620000",
    "end": "771000"
  },
  {
    "text": "upgrading its newer. The newer versions have more security\nfeatures and a stronger,",
    "start": "624450",
    "end": "631642"
  },
  {
    "text": "I thought I would mention that if you are looking for a",
    "start": "631642",
    "end": "637107"
  },
  {
    "text": "a BYOD policy,",
    "start": "637107",
    "end": "639781"
  },
  {
    "text": "newer versions of Android would be a good policy.",
    "start": "643221",
    "end": "648975"
  },
  {
    "text": "For certain apps, if you need certain security requirements,",
    "start": "649665",
    "end": "655425"
  },
  {
    "text": "targeting five and above would be a good call.",
    "start": "655425",
    "end": "659087"
  },
  {
    "text": "That is the ecosystem. I want to talk about\nsome of the threats now.",
    "start": "661481",
    "end": "669432"
  },
  {
    "text": "Malware's and Android security ialways gets,",
    "start": "669868",
    "end": "677813"
  },
  {
    "text": "the tech media love to get hold of. I am sure you have all seen\nthose clickbait headlines that are about how\nAndroid's been ripped open.",
    "start": "677814",
    "end": "686206"
  },
  {
    "text": " As you learn more about it,",
    "start": "686206",
    "end": "693277"
  },
  {
    "text": "you can see, it is a lot of hype. But there has been more",
    "start": "693277",
    "end": "698547"
  },
  {
    "text": "publicly disclosed malware on Android than on iOS. They tend to be around, largely,",
    "start": "698547",
    "end": "705729"
  },
  {
    "text": "around premium SMS driven.",
    "start": "705729",
    "end": "709556"
  },
  {
    "text": "Although, in Android 4.2, we\ngot this new warning; if you text a short code you get",
    "start": "711033",
    "end": "717399"
  },
  {
    "text": "a user confirmation screen that comes up. That has mitigated some malware.",
    "start": "717399",
    "end": "723756"
  },
  {
    "text": "Apart from that, it tends to be information stealers, and, recently",
    "start": "724809",
    "end": "731980"
  },
  {
    "text": "ransomware. The last thing I\nwanted to say on malware:",
    "start": "731980",
    "end": "738563"
  },
  {
    "text": "regions where you are in the world plays a huge role.",
    "start": "738563",
    "end": "746216"
  },
  {
    "text": "Russia, China, and Persia, the average instance of malware",
    "start": "746216",
    "end": "752886"
  },
  {
    "text": "is higher than Europe and America.",
    "start": "752887",
    "end": "757868"
  },
  {
    "text": "Something that, as far as Google announced,\nthey are looking into (omething to bear in mind",
    "start": "758412",
    "end": "765157"
  },
  {
    "text": "when you hear these stories about malware). One of the other threats that we have",
    "start": "765158",
    "end": "772329"
  },
  {
    "start": "771000",
    "end": "1053000"
  },
  {
    "text": "is app hijacking (also known as \"trojanizing\" apps).",
    "start": "772330",
    "end": "778445"
  },
  {
    "text": " You take a genuine app,",
    "start": "778445",
    "end": "784621"
  },
  {
    "text": "decompile it and put malicious. Obviously,",
    "start": "784621",
    "end": "790697"
  },
  {
    "text": "it could potentially damage\nyour brand (if that is your app), and affect your users.",
    "start": "790697",
    "end": "795742"
  },
  {
    "text": "You would dupe users into installing that, from phishing emails, etc.",
    "start": "796489",
    "end": "802375"
  },
  {
    "text": "The concerns around this is because reversing Android\napps is pretty easy.",
    "start": "802760",
    "end": "807821"
  },
  {
    "text": "(there is a talk this afternoon\nwhich covers some of this, I am not going to go into\ntoo much detail now).",
    "start": "808711",
    "end": "815557"
  },
  {
    "text": "On Android we do not have,\na certificate authority when we are signing apps",
    "start": "817277",
    "end": "824199"
  },
  {
    "text": "(each app has to be signed for it to be installed on a device,",
    "start": "824199",
    "end": "831306"
  },
  {
    "text": "but there is no\ncentral authority around that, so there will all\nself-signed certificates).",
    "start": "831899",
    "end": "836149"
  },
  {
    "text": "The other concern is\nthat sideloading apps (installing apps",
    "start": "837505",
    "end": "842949"
  },
  {
    "text": "that are not from the approved Play store), is very simple (it is just an option that you turn off on the device).",
    "start": "842950",
    "end": "848793"
  },
  {
    "text": "Three things that make app hijacking more of an issue",
    "start": "848793",
    "end": "854571"
  },
  {
    "text": "that n iOS (more difficult to sideload apps).",
    "start": "854572",
    "end": "860203"
  },
  {
    "text": "We will talk in part two some\nof the defenses you can put into your app to guard\nagainst app hijacking.",
    "start": "862046",
    "end": "868694"
  },
  {
    "text": "There has been a couple of big stories. (I could probably\ndo a presentation just on all the security\nincidents in the last 18 months",
    "start": "871881",
    "end": "879358"
  },
  {
    "text": "in and around the Internet and Android). (Although, Heartbleed, that\nI am talking about here,",
    "start": "879359",
    "end": "886444"
  },
  {
    "text": "has only really affected\none version of Android). (It was still affected.)",
    "start": "886445",
    "end": "894604"
  },
  {
    "text": "Anyone that bundled that version, it was to do with an\nopen SSL vulnerability.",
    "start": "894604",
    "end": "899383"
  },
  {
    "text": "Part of the developer checks that the Play store does\nnow (the app scanning)",
    "start": "900553",
    "end": "906746"
  },
  {
    "text": "is related to this threat.",
    "start": "906747",
    "end": "910403"
  },
  {
    "text": "Recently (as you probably guessed), if you come up with an Android exploit,",
    "start": "912488",
    "end": "918313"
  },
  {
    "text": "you have to come up with a cool name and a cool logo.\n(everyone's doing a great job of that, which is great to see).",
    "start": "918313",
    "end": "924503"
  },
  {
    "text": "Stagefright was another one that affected almost all Android devices out in the marketplace.",
    "start": "925776",
    "end": "931816"
  },
  {
    "text": "It was a widespread exploit, potentially, and it could denial-of-service\nattack that device",
    "start": "933198",
    "end": "939830"
  },
  {
    "text": "(there has not\nbeen any threats or attacks yet).",
    "start": "939830",
    "end": "946525"
  },
  {
    "text": "(I thought I would mention this,\nA, because it is recent). ",
    "start": "947414",
    "end": "951904"
  },
  {
    "text": "b) some really positive things happened). Nexus devices now\nhave a monthly security update",
    "start": "952674",
    "end": "958893"
  },
  {
    "text": "and security bulletin (security issues have been\npatched).",
    "start": "958893",
    "end": "965075"
  },
  {
    "text": "Samsung and LG also have committed to frequent security patch program.",
    "start": "965326",
    "end": "972612"
  },
  {
    "text": "In the light of these, this great research,",
    "start": "972911",
    "end": "979148"
  },
  {
    "text": "(and this funky name that got all the media's\nattention), forced some of the OEMs",
    "start": "979148",
    "end": "985243"
  },
  {
    "text": "to increase their security updates. (great thing).",
    "start": "985243",
    "end": "989253"
  },
  {
    "text": "(That is a couple of the threats). Let's talk about some of the\nrisks to our applications",
    "start": "991258",
    "end": "997558"
  },
  {
    "text": "(when we are creating them). (No presentation can be complete without a Top 10).",
    "start": "997558",
    "end": "1004545"
  },
  {
    "text": "I will mention the the Top 10 risks",
    "start": "1006205",
    "end": "1011649"
  },
  {
    "text": "that there are to our apps. This was compiled\nby the OWASP project",
    "start": "1011649",
    "end": "1017113"
  },
  {
    "text": "(some of you maybe familiar with the Open Web Applications Security\nProject from the web world).",
    "start": "1017114",
    "end": "1023716"
  },
  {
    "text": "It is a not-for-profit organization focused on improving security in software.",
    "start": "1024486",
    "end": "1030507"
  },
  {
    "text": "And a couple of years ago, they produced the Top 10 mobile risks (they are due\nto update that very soon)",
    "start": "1030868",
    "end": "1038554"
  },
  {
    "text": " When we are talking about",
    "start": "1038555",
    "end": "1044178"
  },
  {
    "text": "survival tips we will try and related back",
    "start": "1044178",
    "end": "1049884"
  },
  {
    "text": "to some of these. (I have just put them here\nfor your reference.",
    "start": "1049884",
    "end": "1055391"
  },
  {
    "start": "1053000",
    "end": "1135000"
  },
  {
    "text": "it is too much to take in to, on a slide).",
    "start": "1055391",
    "end": "1058885"
  },
  {
    "text": "If you go to the OWASP site (the Mobile Security Project site),",
    "start": "1060445",
    "end": "1066475"
  },
  {
    "text": "each of these is broken\ndown in attack vectors and sample code",
    "start": "1066475",
    "end": "1072333"
  },
  {
    "text": "of how to  mitigate them (definitely worth checking that out). (one of the things",
    "start": "1072333",
    "end": "1078917"
  },
  {
    "text": "you should look at when you are doing your development and testing).",
    "start": "1078917",
    "end": "1083502"
  },
  {
    "text": "If you can tick\noff these 10 risks, then you are on a good path to\nmaking your app more secure.",
    "start": "1084292",
    "end": "1092942"
  },
  {
    "text": "(part two) ",
    "start": "1093830",
    "end": "1100094"
  },
  {
    "text": "(quick show of hands: who's an Android\ndeveloper in the audience?",
    "start": "1100900",
    "end": "1105437"
  },
  {
    "text": "Brilliant, that is awesome, that is way more than I was expecting. Cool - you are\ngoing to love this stuff).",
    "start": "1106244",
    "end": "1113389"
  },
  {
    "text": "(Even if you are not\nan Android developer, a lot of this still applies to iOS when I talk\nabout",
    "start": "1113545",
    "end": "1120330"
  },
  {
    "text": "mobile thick client effectively).",
    "start": "1120330",
    "end": "1123845"
  },
  {
    "text": "Let's look at how we can (survive in this jungle)\nimprove our app security.",
    "start": "1127245",
    "end": "1134456"
  },
  {
    "start": "1135000",
    "end": "1274000"
  },
  {
    "text": "(I was going to focus on\nthese four areas;",
    "start": "1135081",
    "end": "1139129"
  },
  {
    "text": "each area has several things). BWe want to harden\nthe network communication",
    "start": "1141725",
    "end": "1149614"
  },
  {
    "text": "between the app and our service. We want to protect any\ndata that we have stored.",
    "start": "1149614",
    "end": "1155824"
  },
  {
    "text": "We are going to: use encryption for that; look at ways to\nvalidate",
    "start": "1155824",
    "end": "1162265"
  },
  {
    "text": "(where the app is running),\nthe device and app's integrity. ",
    "start": "1162265",
    "end": "1167167"
  },
  {
    "text": "Then, look at how we can increase the binary security.",
    "start": "1168238",
    "end": "1173262"
  },
  {
    "text": "(these apply to iOS as well).",
    "start": "1174292",
    "end": "1178464"
  },
  {
    "text": "I thought I would start with strengthening network communications, because\nevery app that I have written",
    "start": "1181951",
    "end": "1188232"
  },
  {
    "text": "has some online component. (It almost goes without saying, but)",
    "start": "1188232",
    "end": "1195543"
  },
  {
    "text": "Using SSL and TLS for all\nyour network communications should be a default.",
    "start": "1195543",
    "end": "1202518"
  },
  {
    "text": "In iOS 9, they have made that as a mandatory",
    "start": "1202960",
    "end": "1209603"
  },
  {
    "text": "(you have to opt out). (I hope the\nnext version of Android comes with something similar).",
    "start": "1209603",
    "end": "1216029"
  },
  {
    "text": "The second point:\nuse the platform SSL/TLS validation, and not to disable it.",
    "start": "1218313",
    "end": "1225450"
  },
  {
    "text": "(that sounds like a stupid thing to say; but if you Google",
    "start": "1225836",
    "end": "1231335"
  },
  {
    "text": "or go to Stack Overflow\nhow to enable using self-signed SSL certificates,",
    "start": "1231335",
    "end": "1237851"
  },
  {
    "text": "you will see the most-voted answer on Stack Overflow with tons of rep",
    "start": "1237852",
    "end": "1243052"
  },
  {
    "text": "tells you how to disable\nthe SSL validation, totally rendering the point\nof having SSL useless).",
    "start": "1243634",
    "end": "1249755"
  },
  {
    "text": "There is different ways of doing it. You can use a form of pinning\n(which I will talk about next),",
    "start": "1251152",
    "end": "1257270"
  },
  {
    "text": "or buy genuine certificates for your development service",
    "start": "1258320",
    "end": "1263525"
  },
  {
    "text": "(that is what I have done in the past; it saves you having to\nput all this dodgy code into your code base",
    "start": "1263892",
    "end": "1269782"
  },
  {
    "text": "that basically turns off the validation). The other thing you could do",
    "start": "1269782",
    "end": "1277258"
  },
  {
    "start": "1274000",
    "end": "1353000"
  },
  {
    "text": "is to only use the stronger cipher suites, and the stronger TLS versions.",
    "start": "1277258",
    "end": "1283353"
  },
  {
    "text": "(This is particularly important or useful.) If you control the service,\nthen you can control",
    "start": "1283353",
    "end": "1289922"
  },
  {
    "text": "the type of connection, the strength of the encryption between your apps and the server.",
    "start": "1291970",
    "end": "1297461"
  },
  {
    "text": "SSL defaults to lower versions, to support older browsers.",
    "start": "1297912",
    "end": "1304590"
  },
  {
    "text": "But you do not have to do\nthat in your app. You can enforce that, and if anyone is using OKHttp,",
    "start": "1305620",
    "end": "1312852"
  },
  {
    "text": "2.1, saw cool security updates and features.",
    "start": "1312852",
    "end": "1318461"
  },
  {
    "text": "If you are using 2.1,\nthere is a good article on how you can enforce the connection spec",
    "start": "1318461",
    "end": "1324394"
  },
  {
    "text": "(to be stronger and to drop the lower specs).",
    "start": "1324395",
    "end": "1330922"
  },
  {
    "text": "If you are using straight out of the SDK, HttpsURLConnection,",
    "start": "1330998",
    "end": "1339070"
  },
  {
    "text": "you could still do it with. (If anyone wants\nany code samples of that, just give me a shout).",
    "start": "1339164",
    "end": "1344087"
  },
  {
    "text": "It is one line on OKHttp.",
    "start": "1345423",
    "end": "1348476"
  },
  {
    "text": "The other thing you could look at doing with your connections\nis: SSL pinning.",
    "start": "1350562",
    "end": "1356033"
  },
  {
    "start": "1353000",
    "end": "1452000"
  },
  {
    "text": "(If I could just get a show of hands, who's heard of SSL pinning before? Brilliant, so most people).",
    "start": "1357023",
    "end": "1362616"
  },
  {
    "text": "(For those that have not heard of it,) It is just a way\nof reducing",
    "start": "1362854",
    "end": "1368461"
  },
  {
    "text": " the amount of certificate authorities",
    "start": "1368461",
    "end": "1375228"
  },
  {
    "text": "that you trust. You are effectively\npinning your SSL certificate",
    "start": "1375228",
    "end": "1382742"
  },
  {
    "text": "to make sure it is that one. There are two\ndifferent types of pinning.",
    "start": "1382742",
    "end": "1389252"
  },
  {
    "text": "1) pin the whole certificate, or 2) pin the public\nkey of that certificate.",
    "start": "1389450",
    "end": "1394982"
  },
  {
    "text": "I always recommend doing\npublic key pinning.",
    "start": "1397616",
    "end": "1401742"
  },
  {
    "text": "It is a slight\nextra step in getting the pin...",
    "start": "1402733",
    "end": "1407733"
  },
  {
    "text": "but you do not have to change your app or force an app update",
    "start": "1410477",
    "end": "1415643"
  },
  {
    "text": "every time you renew your certificate. (I have put a\nlink to the book, there,",
    "start": "1415643",
    "end": "1421001"
  },
  {
    "text": "there is a code sample of how to do that). (There is some open source code online",
    "start": "1421001",
    "end": "1427551"
  },
  {
    "text": "by Moxie Marlinspike, but it has not got a\ngreat commercial license).",
    "start": "1427551",
    "end": "1431687"
  },
  {
    "text": "(Check the stuff out in the book.) In essence,",
    "start": "1432937",
    "end": "1438392"
  },
  {
    "text": "when you make a connection,\nyou do some validation to make sure it is the SSL\ncertificate it should be.",
    "start": "1438392",
    "end": "1444231"
  },
  {
    "text": "(that is the basics of pinning).",
    "start": "1445443",
    "end": "1448592"
  },
  {
    "text": "The other thing you should\nprobably look at is networking (the",
    "start": "1450461",
    "end": "1456138"
  },
  {
    "start": "1452000",
    "end": "1608000"
  },
  {
    "text": "part of the Google Play services, they have introduced this dynamic security provider).",
    "start": "1456138",
    "end": "1462372"
  },
  {
    "text": "This is another one of those things that, because we cannot\nguarantee over-the-air updates, we cannot guarantee that users",
    "start": "1462896",
    "end": "1468929"
  },
  {
    "text": "are going to upgrade their phones, Google have put in place,",
    "start": "1468929",
    "end": "1475106"
  },
  {
    "text": "and the update cycle\nof Google Play services is about six to eight weeks.",
    "start": "1475107",
    "end": "1480625"
  },
  {
    "text": "In that time period, there is a chance to get, if there is a vulnerability that comes out,",
    "start": "1481145",
    "end": "1486523"
  },
  {
    "text": "or an exploit, there is\na chance that that fix gets bundled within the Play services.",
    "start": "1486524",
    "end": "1491812"
  },
  {
    "text": "(I have put a link to\nthe training article there. It has all you need to\nknow about how to call that",
    "start": "1492537",
    "end": "1498064"
  },
  {
    "text": "and when to call it; the code sample is that simple.)",
    "start": "1498064",
    "end": "1504511"
  },
  {
    "text": "You can use that: provider will fix any\nissues in the system that has with any of the OpenSSL libraries.",
    "start": "1505155",
    "end": "1514731"
  },
  {
    "text": "Because it is an update of the cryptology provider,\nyou can use that",
    "start": "1515495",
    "end": "1521490"
  },
  {
    "text": "for standard self-encryption as well. You can use that instead\nof Bouncy Castle.",
    "start": "1521490",
    "end": "1527794"
  },
  {
    "text": "(that is it for networking stuff.) Next: data.",
    "start": "1532421",
    "end": "1538181"
  },
  {
    "text": "When I say storing data, I mean encrypting your data.",
    "start": "1538941",
    "end": "1544284"
  },
  {
    "text": "Something that\nfrustrated me as an apps developer, when I had pen test reports\non the apps that I have created,",
    "start": "1546295",
    "end": "1552774"
  },
  {
    "text": "or spoke to security people, analysts, they always said, \"do not store data.\"",
    "start": "1552774",
    "end": "1560322"
  },
  {
    "text": "I want to make my app as performative as possible, I want to make it work offline,",
    "start": "1560538",
    "end": "1569819"
  },
  {
    "text": "or in dodgy mobile connections. (The \"do not store data\"",
    "start": "1569819",
    "end": "1575996"
  },
  {
    "text": "used to bug me.) If you are storing it,",
    "start": "1575996",
    "end": "1583193"
  },
  {
    "text": "it needs to be encrypted. And, obviously, this depends on the type of data and",
    "start": "1583193",
    "end": "1590859"
  },
  {
    "text": "application you have (medical records,\nnuclear launch codes, probably should not be cached;",
    "start": "1590859",
    "end": "1596511"
  },
  {
    "text": "other data should be).",
    "start": "1597291",
    "end": "1600000"
  },
  {
    "text": "(Here is some code, just to show how easy it is.)",
    "start": "1604271",
    "end": "1608934"
  },
  {
    "start": "1608000",
    "end": "1718000"
  },
  {
    "text": "This is a best practice approach, when you are doing encryption: use password-based encryption.",
    "start": "1610984",
    "end": "1617726"
  },
  {
    "text": "(not to store the key anywhere).",
    "start": "1618321",
    "end": "1624543"
  },
  {
    "text": "The main thing about encryption is where to store the keys. It is rarely the\nalgorithm that is broken,",
    "start": "1624822",
    "end": "1632258"
  },
  {
    "text": "it is the fact that someone\nfind where the keys are. This shows how to use",
    "start": "1632258",
    "end": "1637602"
  },
  {
    "text": "password-based encryption: using the user inputs, and then using that",
    "start": "1637602",
    "end": "1644910"
  },
  {
    "text": "to derive an encryption key. In this case, derive a symmetric encryption key",
    "start": "1644910",
    "end": "1650895"
  },
  {
    "text": "(the key that we use\nfor encryption and decryption).",
    "start": "1650895",
    "end": "1654044"
  },
  {
    "text": "(I put this in for reference. there is a better example\nin the book.)",
    "start": "1655948",
    "end": "1659896"
  },
  {
    "text": "You do not persist the key anywhere, you do not lock the key anywhere,",
    "start": "1661148",
    "end": "1666960"
  },
  {
    "text": "and then you build in an app timeout (depending on your app,",
    "start": "1666960",
    "end": "1674070"
  },
  {
    "text": "maybe when the app goes\ninto the background, maybe when the user logs out,",
    "start": "1674070",
    "end": "1679108"
  },
  {
    "text": "but you would wipe that key from memory). (that is how it stays safe).",
    "start": "1679108",
    "end": "1684945"
  },
  {
    "text": " In this code sample we are\nusing about 10,000 iterations,",
    "start": "1685935",
    "end": "1694121"
  },
  {
    "text": "(nice and strong,\nbut just take a long time, maybe four seconds",
    "start": "1694121",
    "end": "1701289"
  },
  {
    "text": "on a Nexus 5). You can tune that,\ndepending on",
    "start": "1701289",
    "end": "1708679"
  },
  {
    "text": " how secure you want it to be. A couple of libraries",
    "start": "1708679",
    "end": "1716004"
  },
  {
    "text": "can make your encryption\ntasks a lot easier",
    "start": "1716004",
    "end": "1720643"
  },
  {
    "start": "1718000",
    "end": "1991000"
  },
  {
    "text": "(commercially viable). (Otherwise, there is no point in\nmentioning them, to be frank.)",
    "start": "1722048",
    "end": "1729399"
  },
  {
    "text": "(The slides that\nare uploaded have links and stuff to all these.) Conceal is from Facebook:",
    "start": "1730815",
    "end": "1737798"
  },
  {
    "text": "awesome for files. They use it for encrypting photos",
    "start": "1738407",
    "end": "1745794"
  },
  {
    "text": "that they have cached on your SD card. Easy to use,",
    "start": "1745794",
    "end": "1752616"
  },
  {
    "text": "it defaults to all the\nstronger algorithms. It uses AES-GCM (the preferred",
    "start": "1752616",
    "end": "1759601"
  },
  {
    "text": "AES algorithm). (I definitely recommend trying that.)",
    "start": "1759601",
    "end": "1765882"
  },
  {
    "text": "(It defaults to the strong stuff, because the stuff,\nwhether it is a hangup",
    "start": "1766683",
    "end": "1771684"
  },
  {
    "text": "from the Java days, you\nknow, from Android's past, being Java-based,",
    "start": "1771684",
    "end": "1778105"
  },
  {
    "text": "but the default, when you are\ndealing with encryption, it does not default to the strong,",
    "start": "1778105",
    "end": "1783404"
  },
  {
    "text": "the strongest algorithm.) (Quite a shame going in,",
    "start": "1783404",
    "end": "1789158"
  },
  {
    "text": "because you\njust want to start using it and it be as strong as possible, but that is what is nice about Conceal.)",
    "start": "1789158",
    "end": "1795970"
  },
  {
    "text": "QLCipher, if any of you have an SQLLite database in your app,",
    "start": "1796545",
    "end": "1802119"
  },
  {
    "text": "which you use for data storage, you can very easily swap in SQLCipher.",
    "start": "1802119",
    "end": "1807625"
  },
  {
    "text": "The API's all exactly the same, apart from when you open a database and when you create a database,",
    "start": "1809065",
    "end": "1816403"
  },
  {
    "text": "you have to pass in a password, and it uses that password-based encryption (that I talked about a\ncouple of slides ago),",
    "start": "1816403",
    "end": "1823454"
  },
  {
    "text": "to generate, create a key and\nencrypt your database files. The key about these libraries",
    "start": "1823454",
    "end": "1830808"
  },
  {
    "text": "is they are very easy to use, easy to swap in and out. (that is what gets\nbig ticks in my books.)",
    "start": "1830808",
    "end": "1837681"
  },
  {
    "text": "SQLCipher uses\n256-bit AES in CBC mode (it is pretty decent.)",
    "start": "1841121",
    "end": "1848449"
  },
  {
    "text": "However CQLCipher adds between four and seven MB",
    "start": "1849336",
    "end": "1854944"
  },
  {
    "text": "to your APK size (for\nsome people, that is too much).",
    "start": "1854944",
    "end": "1858992"
  },
  {
    "text": "The good news\nis that Google just upped the APK size limit in\nthe Play store to 100 MB;",
    "start": "1860653",
    "end": "1868293"
  },
  {
    "text": "hopefully that gives less, less excuses not to use it.",
    "start": "1868293",
    "end": "1873905"
  },
  {
    "text": "Lastly:\nSecure-Preferences, one of my open-source libraries.",
    "start": "1874185",
    "end": "1880056"
  },
  {
    "text": "You can also look at Hawk\n(much better-named and much more popular implementation).",
    "start": "1880896",
    "end": "1888094"
  },
  {
    "text": " (skip references for\nthose who aren't familiar). It is a key value store\nwhich is backed by an XML file:",
    "start": "1888094",
    "end": "1897075"
  },
  {
    "text": "easy way of securing or obfuscating those files",
    "start": "1897516",
    "end": "1902753"
  },
  {
    "text": "(people on rooted devices cannot mess with your things).",
    "start": "1902754",
    "end": "1907795"
  },
  {
    "text": "With Secure-Preferences,\nyou can use it with password, and it does that\npassword-based encryption.",
    "start": "1908316",
    "end": "1914168"
  },
  {
    "text": "(nice and secure.) If you do not use a password,\nit will generate one, and store it in there",
    "start": "1914168",
    "end": "1921356"
  },
  {
    "text": "(if you rip the file out, you\ncannot tell which one is the key). But",
    "start": "1921357",
    "end": "1927598"
  },
  {
    "text": "it is still obfuscated, because you could find it with enough effort.",
    "start": "1927598",
    "end": "1933124"
  },
  {
    "text": "Just small steps to make your apps harder to hack.",
    "start": "1933611",
    "end": "1937842"
  },
  {
    "text": "Above all: avoid hardcoding\nyour encryption key.",
    "start": "1940334",
    "end": "1947289"
  },
  {
    "text": " Reverse engineering\nand finding a constant, a string constant for your encryption key",
    "start": "1949297",
    "end": "1955290"
  },
  {
    "text": "is trivially easy. But",
    "start": "1955290",
    "end": "1962472"
  },
  {
    "text": "not all apps can use the\npassword-based encryption, an app passcode (or something like that).",
    "start": "1962472",
    "end": "1967906"
  },
  {
    "text": "If you have to, generate a key dynamically per installation,\ndo not hardcode it.",
    "start": "1967906",
    "end": "1974529"
  },
  {
    "text": "(it is the equivalent\nof locking your front door but leaving your keys in there. The door is locked, but\nyou have got no security at all,",
    "start": "1974529",
    "end": "1981740"
  },
  {
    "text": "so hopefully you guys remember those two).",
    "start": "1981740",
    "end": "1986319"
  },
  {
    "text": "Let's go on to verifying\nthe integrity of the app.",
    "start": "1988772",
    "end": "1993606"
  },
  {
    "start": "1991000",
    "end": "2080000"
  },
  {
    "text": "There is a couple things you can do. You can check",
    "start": "1995247",
    "end": "2000455"
  },
  {
    "text": "whether these are tamper detection techniques.",
    "start": "2000455",
    "end": "2006455"
  },
  {
    "text": "Has your app been hijacked?, Is it running in a different state? You can talk to the PackageManager,",
    "start": "2007443",
    "end": "2015041"
  },
  {
    "text": "and see if you are in a debuggable state, (should not be happening once you are in production).",
    "start": "2015041",
    "end": "2021647"
  },
  {
    "text": "You can calculate an apk checksum to see if it has been modified.",
    "start": "2022254",
    "end": "2028592"
  },
  {
    "text": "Or you can sign a certificate verification.",
    "start": "2030623",
    "end": "2036401"
  },
  {
    "text": "This is my favorite\none, because each of our app has to be signed",
    "start": "2036457",
    "end": "2042896"
  },
  {
    "text": "with a developer's key (when we publish it or we distribute it).",
    "start": "2042896",
    "end": "2047331"
  },
  {
    "text": "That key remains the\nsame through the lifetime of the app. One\nof the cornerstones of Android's security is that,",
    "start": "2048109",
    "end": "2055276"
  },
  {
    "text": "the signatures have to\nmatch. I can't take Facebook's app, decompile it -",
    "start": "2055277",
    "end": "2060409"
  },
  {
    "text": "would break the signature, resign it, and then distribute it,\nand you install",
    "start": "2060410",
    "end": "2066322"
  },
  {
    "text": "Scott's version of Facebook.\nIt does not work that way. The signatures would not match, it would not let you upgrade.",
    "start": "2066322",
    "end": "2072773"
  },
  {
    "text": "Your signature stays the same throughout the lifetime of your app. You know that in build-time,",
    "start": "2073940",
    "end": "2078905"
  },
  {
    "start": "2080000",
    "end": "2142000"
  },
  {
    "text": "you can check in this runtime. (And this is\nquickly how you do it.)",
    "start": "2080137",
    "end": "2085791"
  },
  {
    "text": "You would use keytool (Java), to list out your keystore's",
    "start": "2087371",
    "end": "2094583"
  },
  {
    "text": "signature. Then you just embed it in the app.",
    "start": "2095925",
    "end": "2101131"
  },
  {
    "text": "At runtime, you would ask the PackageManager for your signature.",
    "start": "2102284",
    "end": "2109461"
  },
  {
    "text": "Hash the signature (to assure one, to match what you have embedded), and then compare the strings.",
    "start": "2109984",
    "end": "2116443"
  },
  {
    "text": "(And that is a quick and easy way of detecting whether your app has been,",
    "start": "2116803",
    "end": "2122357"
  },
  {
    "text": "has been decompiled and then changed.) However, if\nsomeone can decompile code,",
    "start": "2122357",
    "end": "2130005"
  },
  {
    "text": "they can take this check out. (we will cover in\na couple of slides' time how we can obfuscate our code,",
    "start": "2130005",
    "end": "2137299"
  },
  {
    "text": "make this harder to do.)",
    "start": "2137300",
    "end": "2139525"
  },
  {
    "start": "2142000",
    "end": "2346000"
  },
  {
    "text": " You can say that for\nanything we put in the app, the SSL pinning, the encryption,",
    "start": "2142837",
    "end": "2150078"
  },
  {
    "text": "someone can decompile, take\nbits out and look at it. But it is using all these methods",
    "start": "2150078",
    "end": "2156640"
  },
  {
    "text": "in conjunction with each other\nto hardens the app. If we want to verify the device integrity,",
    "start": "2156641",
    "end": "2163799"
  },
  {
    "text": "there is various different\nthings you can check. In the bill properties, just\nto see if it is an emulator,",
    "start": "2163799",
    "end": "2171275"
  },
  {
    "text": " there is a couple of good\nanswers on Stack Overflow.",
    "start": "2171553",
    "end": "2176618"
  },
  {
    "text": "Tim Strazzere has a really\ngood library on GitHub,",
    "start": "2177059",
    "end": "2181595"
  },
  {
    "text": "which goes through a lot of stuff (inspired by the different malware that he encountered as\na security researcher).",
    "start": "2182148",
    "end": "2190042"
  },
  {
    "text": "A cool library if you should be running in an emulator",
    "start": "2190042",
    "end": "2195060"
  },
  {
    "text": "if you are in production.\nIt could give an indication that",
    "start": "2195060",
    "end": "2200649"
  },
  {
    "text": "you are being tampered. Or dynamically debugged.",
    "start": "2200649",
    "end": "2208130"
  },
  {
    "text": "The other thing that you can do is the SafetyNet test.",
    "start": "2209415",
    "end": "2214184"
  },
  {
    "text": "(This is what I mentioned\nnear the beginning.) It is part\nof Google Play services.",
    "start": "2214442",
    "end": "2221935"
  },
  {
    "text": "(I think it was 7.5 that it\ncame, that it was released.) There is a test you can run",
    "start": "2221935",
    "end": "2231001"
  },
  {
    "text": "(the documentation is a bit\nvague about what it does). ",
    "start": "2231401",
    "end": "2237435"
  },
  {
    "text": "It says whether it is CTS compatible, and the CTS tests of",
    "start": "2237435",
    "end": "2244567"
  },
  {
    "text": "each version of Android\nthat is built from the open source tree.",
    "start": "2244567",
    "end": "2251423"
  },
  {
    "text": "If it passes all them,\nthen it is verified as an okay device.",
    "start": "2251424",
    "end": "2258165"
  },
  {
    "text": "The SafetyNet will come back\nfalse if the device is rooted,",
    "start": "2260083",
    "end": "2265799"
  },
  {
    "text": "if it is been compromised in other ways. It is has the vulnerability,",
    "start": "2265799",
    "end": "2271875"
  },
  {
    "text": "you can check the state of the device.",
    "start": "2271875",
    "end": "2277100"
  },
  {
    "text": "The API was quite unwieldy, so I wrote a helper library\nto wrap that.",
    "start": "2277542",
    "end": "2282870"
  },
  {
    "text": "(That does the on device validation.) (there is a sample in\nthe Play store as well,",
    "start": "2283922",
    "end": "2290103"
  },
  {
    "text": "you can just run on your own device.) It gives an indication that that app installation",
    "start": "2290103",
    "end": "2296681"
  },
  {
    "text": "could be running on a compromise device, and you can act accordingly on the server depending on that information.",
    "start": "2296681",
    "end": "2303078"
  },
  {
    "text": "The sample library does not\nhave a server side component (the Android\nsecurity team let me know",
    "start": "2303507",
    "end": "2309886"
  },
  {
    "text": "that that is what it should have): you do the validation\ntest on the device,",
    "start": "2309886",
    "end": "2315421"
  },
  {
    "text": "(which is good, but it is better\nto do the validation test on the server, because\nthat cannot be compromised).",
    "start": "2315421",
    "end": "2322056"
  },
  {
    "text": " If the device is owned,",
    "start": "2322056",
    "end": "2327663"
  },
  {
    "text": "you want to do those\nchecks on the server. (it is enough\nto get you going with that).",
    "start": "2327663",
    "end": "2333739"
  },
  {
    "text": "I am working on a server side branch of that to show how that could be used.",
    "start": "2333739",
    "end": "2340328"
  },
  {
    "text": "(Worth checking out.)  I commonly get asked about detecting root;",
    "start": "2340626",
    "end": "2347899"
  },
  {
    "start": "2346000",
    "end": "2453000"
  },
  {
    "text": "the thing that you might want to do in your app.",
    "start": "2347899",
    "end": "2352437"
  },
  {
    "text": "I should\nprobably start with a disclaimer that there is no\n100% way of checking for root.",
    "start": "2353325",
    "end": "2360855"
  },
  {
    "text": "(Root being root on a\ndevice is the equivalent to being God; there is\nno way you could ever",
    "start": "2361525",
    "end": "2366835"
  },
  {
    "text": "100% say that you have detected it or not.)",
    "start": "2366835",
    "end": "2370021"
  },
  {
    "text": "But  you can look for root apps, potentially dangerous apps.",
    "start": "2372521",
    "end": "2377239"
  },
  {
    "text": "You can check certain system properties, which could have been changed on a rooted device.",
    "start": "2377539",
    "end": "2383033"
  },
  {
    "text": "The most common way is to\nlook for the SU binary, which may or may not be\npresent, or may be hidden.",
    "start": "2384427",
    "end": "2390894"
  },
  {
    "text": "Same with the BusyBox binary. You can also check\nif certain system paths",
    "start": "2392045",
    "end": "2397429"
  },
  {
    "text": "are writeable, or rewritable (when they should not be).",
    "start": "2397429",
    "end": "2403733"
  },
  {
    "text": " We pulled those checks and put it into a library called Rootbeer",
    "start": "2404804",
    "end": "2413132"
  },
  {
    "text": "(logo at the top). That does a native check as well.",
    "start": "2413132",
    "end": "2419038"
  },
  {
    "text": "And we managed to defeat some of the root cloaks that we found. If you install several root cloakers,",
    "start": "2419658",
    "end": "2428056"
  },
  {
    "text": "they manage to defeat it eventually. It is a good reference. If anyone has any\nother root checks",
    "start": "2429429",
    "end": "2436031"
  },
  {
    "text": "they want to add,\nthat would be awesome. Quick and easy way of doing it.",
    "start": "2436031",
    "end": "2442254"
  },
  {
    "text": "With a lot of these, this hardening these security features.",
    "start": "2442594",
    "end": "2448341"
  },
  {
    "text": "We need to look at ways\nwe can protect the binary,",
    "start": "2449841",
    "end": "2454354"
  },
  {
    "start": "2453000",
    "end": "2493000"
  },
  {
    "text": "to make it more difficult for attackers to take checks out.",
    "start": "2454884",
    "end": "2463791"
  },
  {
    "text": "We can obfuscate the code ",
    "start": "2463791",
    "end": "2469982"
  },
  {
    "text": "(a way of turning your nice, maintainable code into what\nwe see in the background here,",
    "start": "2469982",
    "end": "2476816"
  },
  {
    "text": "gobbledygook). It is harder to reverse, but\nit is what people refer to",
    "start": "2476816",
    "end": "2483959"
  },
  {
    "text": "as security via obscurity. Your code is not encrypted, it is just harder to read.",
    "start": "2483959",
    "end": "2490406"
  },
  {
    "text": "And then hopefully most of\nyou have heard of ProGuard. it is the Java obfuscator,",
    "start": "2491203",
    "end": "2497715"
  },
  {
    "start": "2493000",
    "end": "2600000"
  },
  {
    "text": "part of the Android SDK, free.",
    "start": "2497715",
    "end": "2501092"
  },
  {
    "text": "Very easy to turn on effectively. A lot of the Android\nexceptions that you have to have",
    "start": "2503993",
    "end": "2511958"
  },
  {
    "text": " already have it installed (if you have the SDK installed).",
    "start": "2511958",
    "end": "2516676"
  },
  {
    "text": "One of the things you have to remember when you start using obfuscated code",
    "start": "2517138",
    "end": "2524590"
  },
  {
    "text": "is that if you get crashes. (I know that sometimes happens in apps.)",
    "start": "2524590",
    "end": "2529428"
  },
  {
    "text": "(I cannot say I have ever written\nan app that crashes, myself.) (inaudible)",
    "start": "2530618",
    "end": "2536213"
  },
  {
    "text": "Trying to\nwork out what is going on with a stack trace that is been obfuscated is near impossible.",
    "start": "2537997",
    "end": "2543407"
  },
  {
    "text": "And that is why, in ProGuard, they have a tool called ReTrace, which takes the output from ProGuard,",
    "start": "2544172",
    "end": "2549869"
  },
  {
    "text": "which is like your mappings file, and you can use that with your stack trace,\nand turn it back into",
    "start": "2549869",
    "end": "2557094"
  },
  {
    "text": "a sensible stack trace with line numbers and proper names for\nyour classes and methods.",
    "start": "2557094",
    "end": "2563743"
  },
  {
    "text": "(The awesome thing is that,) Services like Crashlytics, HockeyApp,",
    "start": "2564409",
    "end": "2571007"
  },
  {
    "text": "and Crittercism (but I cannot remember if they do now), support automatic\nde-obfuscation of crashes.",
    "start": "2572427",
    "end": "2579306"
  },
  {
    "text": "I am a massive fan of Crashlytics, (I have used that the most I will just talk about that.)",
    "start": "2579910",
    "end": "2584969"
  },
  {
    "text": "They have a Gradle task that runs when you do a\nbuild; it will upload",
    "start": "2584969",
    "end": "2592141"
  },
  {
    "text": "that mappings file automatically. (it is really handy.)",
    "start": "2592141",
    "end": "2596963"
  },
  {
    "text": "But if you want to go pro-ProGuard, you want to look at DexGuard.",
    "start": "2599109",
    "end": "2605547"
  },
  {
    "start": "2600000",
    "end": "2810000"
  },
  {
    "text": "This is the pro/paid version.  Of course, there are\nother obfuscators",
    "start": "2606047",
    "end": "2612843"
  },
  {
    "text": "which you could look at. Metaphoric, and Arxan (very popular, and expensive)",
    "start": "2612843",
    "end": "2620286"
  },
  {
    "text": "do a better job than ProGuard at protection.",
    "start": "2621154",
    "end": "2629003"
  },
  {
    "text": "(I am most familiar with DexGuard, I will just, I will talk about that.)",
    "start": "2629605",
    "end": "2633898"
  },
  {
    "text": "ProGuard is a Java obfuscator; DexGuard, has been\nbuilt for Android,",
    "start": "2634797",
    "end": "2641862"
  },
  {
    "text": "and it is more around protection. There is security utils",
    "start": "2642425",
    "end": "2648746"
  },
  {
    "text": "built into the Enterprise\nversion (some of the stuff we talked\nabout in this presentation,) just using the utility code.\nThat is automatically",
    "start": "2648747",
    "end": "2656821"
  },
  {
    "text": "hardened as part of the process. Just helper utilities, effectively.",
    "start": "2656821",
    "end": "2663317"
  },
  {
    "text": "My two favorite features: sting encryption,",
    "start": "2663900",
    "end": "2671829"
  },
  {
    "text": "perfect for any API keys or secrets that you have in your app",
    "start": "2672453",
    "end": "2677980"
  },
  {
    "text": " (when you reverse engineer,\nit is easy to find). ",
    "start": "2677980",
    "end": "2683838"
  },
  {
    "text": " (Using string encryption\nis a way of doing that.) In your DexGuard configuration file,",
    "start": "2683839",
    "end": "2692424"
  },
  {
    "text": "you just those\nstrings, whether they be the actual variable name,",
    "start": "2692424",
    "end": "2698162"
  },
  {
    "text": "or the code (you have different options).",
    "start": "2698162",
    "end": "2703202"
  },
  {
    "text": "Whenever that appears in the code, that is all encrypted.",
    "start": "2703202",
    "end": "2707145"
  },
  {
    "text": "Obviously, the key is in\nthe APK files somewhere; otherwise you would not\nbe able to run the app,",
    "start": "2708625",
    "end": "2714991"
  },
  {
    "text": "but it is just a quick and easy way of hiding your keys.",
    "start": "2715634",
    "end": "2720050"
  },
  {
    "text": "The other one is API hiding",
    "start": "2721710",
    "end": "2724844"
  },
  {
    "text": "(part of the DexGuard process), it changes anything that is been hidden into a Java reflection-based call.",
    "start": "2727174",
    "end": "2734082"
  },
  {
    "text": "When you reverse engineer it, it is more difficult to figure out the flow of the app.",
    "start": "2735182",
    "end": "2742208"
  },
  {
    "text": "You can use those in conjunction with each other (that is why I like them.) You can\nhide your tamper check,",
    "start": "2743098",
    "end": "2749765"
  },
  {
    "text": "or hide your SSL pinning verification, and then, using string\nencrypt, reference your",
    "start": "2749766",
    "end": "2757088"
  },
  {
    "text": "method name, your class names, that you have used a reflection-based\ncall on, effectively, that you have hidden, and\nthat is also encrypted.",
    "start": "2759600",
    "end": "2767686"
  },
  {
    "text": "That  makes it\ndouble-strength check. Anyone that is looking for that is looking at some code\nthat does not make any sense",
    "start": "2767686",
    "end": "2773882"
  },
  {
    "text": "but also it is looking up something that they then have to de-crypt first.",
    "start": "2773883",
    "end": "2778070"
  },
  {
    "text": "(I think it is pretty cool.) (that is it for the survival tips.)",
    "start": "2779714",
    "end": "2787052"
  },
  {
    "text": " Testing, and trying to\nsee the other side of the coin,",
    "start": "2787052",
    "end": "2793332"
  },
  {
    "text": "what the attacker sees. there is many tools",
    "start": "2793998",
    "end": "2799015"
  },
  {
    "text": "and great articles about\nhow to reverse engineer: Apktool, dex-to-jar, Androguard.",
    "start": "2799015",
    "end": "2806193"
  },
  {
    "text": " ",
    "start": "2806777",
    "end": "2810440"
  },
  {
    "start": "2810000",
    "end": "3342000"
  },
  {
    "text": "The Quick Android Review Kit, (which I just can't help but think \"Quark,\") (and that is just how I say\nit, and that is the face I see",
    "start": "2811916",
    "end": "2818764"
  },
  {
    "text": "every time I see that library,) is fairly new, it was open-sourced a couple months ago by LinkedIn.",
    "start": "2818764",
    "end": "2825675"
  },
  {
    "text": "It is a Python script that you run against your\napp or your source code.",
    "start": "2827418",
    "end": "2832172"
  },
  {
    "text": "It will give you a HTML\nreport about the weaknesses or any exploits that\ncould potentially be done.",
    "start": "2834252",
    "end": "2839507"
  },
  {
    "text": "Like an exploit APK, ",
    "start": "2839507",
    "end": "2844627"
  },
  {
    "text": "you can try and exploit different things. (definitely one for your testers",
    "start": "2844627",
    "end": "2850947"
  },
  {
    "text": "and for you to do once\nyou have put some of those survival tips in place.)",
    "start": "2850947",
    "end": "2855483"
  },
  {
    "text": "It is new library, they are\nlooking for more exposure (I thought I would mention them.) The other one is",
    "start": "2857407",
    "end": "2863665"
  },
  {
    "text": "Drozer, from Mercury Labs. It is been around for a while. very feature-rich.",
    "start": "2863665",
    "end": "2872323"
  },
  {
    "text": "(the guy I wrote the book with, he wrote some really good stuff on how to",
    "start": "2872323",
    "end": "2880216"
  },
  {
    "text": "exploit and test apps to see\nwhether they are vulnerable using Drozer, so definitely\nworth checking out.)",
    "start": "2880216",
    "end": "2886527"
  },
  {
    "text": "Links, because ",
    "start": "2888431",
    "end": "2894465"
  },
  {
    "text": "there is tons of other\nstuff you can look at. (there is just some links\nthere which would be useful.)",
    "start": "2894465",
    "end": "2899774"
  },
  {
    "text": "As a wrap-up, hopefully the analogy of the jungle",
    "start": "2901515",
    "end": "2907244"
  },
  {
    "text": "was not too contrived. The ecosystem is diverse,\nthere is predators",
    "start": "2907244",
    "end": "2914435"
  },
  {
    "text": "and threats out there. And, hopefully, I armed you\nwith a few survival tips,",
    "start": "2914436",
    "end": "2921994"
  },
  {
    "text": "beef up your apps' security.",
    "start": "2921994",
    "end": "2926994"
  },
  {
    "text": "Thank you very much to GOTO Copenhagen for inviting me here. My company needs a hand for\nsupporting me doing this,",
    "start": "2928678",
    "end": "2935626"
  },
  {
    "text": "and 20th Century Fox,\nobviously, for not suing me for blatantly ripping off loads of their,",
    "start": "2935626",
    "end": "2941813"
  },
  {
    "text": "screenshots from their films. Thanks to for listening. Cheers. (applause)",
    "start": "2942351",
    "end": "2949913"
  },
  {
    "text": "- Thank you very much, Scott. there is just a couple of questions, here. I guess you would better field them yourself.",
    "start": "2956892",
    "end": "2962539"
  },
  {
    "text": "- Okay. \"you are saying not persist\nthe key on the device, how do you deal with password change?\"",
    "start": "2962540",
    "end": "2969131"
  },
  {
    "text": "You can do that. If\nyou want to see an example of how to do this, check out\nmy Secure-Preferences library",
    "start": "2969796",
    "end": "2975912"
  },
  {
    "text": "because I handle that in\nthat, and that would in a very dumb way decrypt the library/code",
    "start": "2975912",
    "end": "2984140"
  },
  {
    "text": " with the existing password, and then encrypting it again\nwith the other password.",
    "start": "2984140",
    "end": "2992660"
  },
  {
    "text": "You can't cope with, because that is password change, it\ndoes not help you cope",
    "start": "2993973",
    "end": "2999559"
  },
  {
    "text": "with if someone's forgot their password. In that case, you cannot decrypt the data.",
    "start": "2999560",
    "end": "3006027"
  },
  {
    "text": "That is why I see it more as, it is really good for caching the data.",
    "start": "3007058",
    "end": "3011911"
  },
  {
    "text": "But there is no way of finding that password, that is the point. That is why it is the\nsecure way of doing it.",
    "start": "3013661",
    "end": "3020411"
  },
  {
    "text": "There is another question: JavaScript bindings in\nWebView safe to use?",
    "start": "3023253",
    "end": "3030252"
  },
  {
    "text": "That is a good question,\nI do not know if I have a a definitive answer on that. I would say no, I would\nerr on the side of caution.",
    "start": "3031397",
    "end": "3038211"
  },
  {
    "text": "I have always been scared\nwith what you can do with that. It got better in API 17,\nwith the annotation",
    "start": "3038569",
    "end": "3047346"
  },
  {
    "text": "that you have to explicitly\nannotate the methods that you can call from\nJavaScript into Java.",
    "start": "3048336",
    "end": "3053028"
  },
  {
    "text": "But I have not used that binding much.",
    "start": "3054889",
    "end": "3060152"
  },
  {
    "text": "And there is a question about... about: Bootstrapping\nbaseband firmware",
    "start": "3063174",
    "end": "3069635"
  },
  {
    "text": "as a vulnerability, real or hoax? I do not know the answer to that question.",
    "start": "3069635",
    "end": "3076040"
  },
  {
    "text": "Does anyone have any live questions, before we sign off?",
    "start": "3076969",
    "end": "3081201"
  },
  {
    "text": "- [Voiceover] Can you\ncompare the Keystore to password key, type of that?",
    "start": "3083558",
    "end": "3089960"
  },
  {
    "text": "Have you ever used one? - Yes. One of the things I did not have time to mention,",
    "start": "3089960",
    "end": "3095023"
  },
  {
    "text": "since Android 3.1,\nthere is the Android Keystore,\nsimilar",
    "start": "3095023",
    "end": "3101471"
  },
  {
    "text": "to iOS Keychain, in the fact that it is, it is a place where you can store",
    "start": "3101471",
    "end": "3108511"
  },
  {
    "text": "a certificate. Unfortunately it is not like the Keychain on iOS, because you can just store\narbitrary secrets in it.",
    "start": "3111121",
    "end": "3117215"
  },
  {
    "text": "On Android, you have to store\na public-private key, and then use that to encrypt other things.",
    "start": "3118706",
    "end": "3124156"
  },
  {
    "text": "That came in Android 4.3, and there is\na couple of issues with it,",
    "start": "3125288",
    "end": "3130471"
  },
  {
    "text": "not being consistent in the way it behaves;",
    "start": "3131161",
    "end": "3136912"
  },
  {
    "text": "if the user changes their PIN\non some versions of Android, it just wipes the Keystore,\nand at other times",
    "start": "3136912",
    "end": "3143703"
  },
  {
    "text": "it still says it is there, but it actually has wiped\nit.",
    "start": "3143704",
    "end": "3149872"
  },
  {
    "text": "One of my friends wrote an article called \"The Forgetful Keystore\". He has done a metrics",
    "start": "3149872",
    "end": "3158852"
  },
  {
    "text": "on what versions and what\ndifferent things happen, because he started using it. In terms of which is more secure,",
    "start": "3159555",
    "end": "3165826"
  },
  {
    "text": "they are based on the same principle. They are using\nsomething that the user puts in, that we do not store on the\ndevice, to then encrypt,",
    "start": "3166613",
    "end": "3174211"
  },
  {
    "text": "to generate a key that we\nuse to do the encryption.",
    "start": "3174211",
    "end": "3178649"
  },
  {
    "text": "I woulds ay they are roughly the same, I just prefer doing a\npassword-based encryption that internally, with my app,",
    "start": "3179429",
    "end": "3184755"
  },
  {
    "text": "because I have control over that. And also, forcing the user to put in",
    "start": "3184755",
    "end": "3192824"
  },
  {
    "text": "a passcode or a password in for my app, when it is a secure app,\nand there is a point to it,",
    "start": "3192824",
    "end": "3198565"
  },
  {
    "text": "is a easy sell, but forcing that user to have\na device PIN, passcode,",
    "start": "3198565",
    "end": "3205325"
  },
  {
    "text": "when they do not have one,\nthat is the big issue. That is a bigger sell,\nif you are a bank,",
    "start": "3205325",
    "end": "3210416"
  },
  {
    "text": "I think forcing the user to\nhave a PIN code on their device is, you could probably get away with it,",
    "start": "3210416",
    "end": "3216714"
  },
  {
    "text": "but other apps I think\nyou would really struggle with. Maybe Enterprise apps, you would probably get away with it as well,",
    "start": "3216714",
    "end": "3222140"
  },
  {
    "text": "but that is quite a big ask for the user. Just to be clear, to\nuse the Android Keystore,",
    "start": "3222140",
    "end": "3227368"
  },
  {
    "text": "the user has to have a PIN\ncode or a passcode enabled, and that is the key thing. You have to force\nthat for the whole device",
    "start": "3227368",
    "end": "3234411"
  },
  {
    "text": "rather than just your app;\nthat is why I tend to prefer, doing it in-app,",
    "start": "3234411",
    "end": "3240985"
  },
  {
    "text": "but it is just as good a solution as well. Also, if you are using,\nif you are in a lucky position",
    "start": "3240986",
    "end": "3247939"
  },
  {
    "text": "of being able to target API 17 and above, which, I do not know if anyone else",
    "start": "3247939",
    "end": "3253042"
  },
  {
    "text": "is in that great\nsituation, I know I am not. Really good question.",
    "start": "3253042",
    "end": "3257539"
  },
  {
    "text": "- Okay, one more question. - [Voiceover] I just looked\nat the conceal website, part of this Facebook library,",
    "start": "3258929",
    "end": "3264988"
  },
  {
    "text": "and they claim that it is super fast.  Do you work with it, or do",
    "start": "3264988",
    "end": "3270249"
  },
  {
    "text": "what they do which\nmakes it so much faster, or what's going -- - I have used it,",
    "start": "3270249",
    "end": "3276101"
  },
  {
    "text": "and it is pretty quick,\nand it uses a couple of the open SSL algorithms,",
    "start": "3276101",
    "end": "3283951"
  },
  {
    "text": "which are quick. It is doing native code,",
    "start": "3283951",
    "end": "3289243"
  },
  {
    "text": "rather than what SQLCipher does is bundle the whole open SSL library,",
    "start": "3289243",
    "end": "3294706"
  },
  {
    "text": "it just bundles those algorithms and the stuff that you need, that is why it is quicker.",
    "start": "3294706",
    "end": "3301726"
  },
  {
    "text": "It is not as big a a payload, effectively.",
    "start": "3302614",
    "end": "3307334"
  },
  {
    "text": "Actually, worth mentioning, I mentioned it in the talk, but it is one of those Facebook libraries that does not have the\nweird license about...",
    "start": "3308147",
    "end": "3315522"
  },
  {
    "text": "I forget what it is. It is commercially viable.",
    "start": "3317527",
    "end": "3322959"
  },
  {
    "text": "Cool. Brilliant, thanks\nfor those great questions, and cheers again for coming. (applause)",
    "start": "3324496",
    "end": "3331686"
  }
]