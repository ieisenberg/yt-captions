[
  {
    "text": "[SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "6972"
  },
  {
    "start": "6972",
    "end": "12970"
  },
  {
    "text": "PROFESSOR: And I just-- since I think it's\nbeen over a week,",
    "start": "12970",
    "end": "18619"
  },
  {
    "text": "let me just kind of\nremind you the toy problem that I put up about a week ago.",
    "start": "18620",
    "end": "24080"
  },
  {
    "text": "And the problem was where I\nwas going to input x and y. Maybe you all remember this.",
    "start": "24080",
    "end": "29680"
  },
  {
    "text": "And I had a kind of a\nprogram, if you will. I kind of think of this as\nsort of steps in some software",
    "start": "29680",
    "end": "36550"
  },
  {
    "text": "if you like, where I take\na was sine x, and b is--",
    "start": "36550",
    "end": "44050"
  },
  {
    "text": "nothing special here,\njust illustrating a number of things. c is b plus x.",
    "start": "44050",
    "end": "49719"
  },
  {
    "text": "And I was going to return\nz as the answer, OK?",
    "start": "49720",
    "end": "55120"
  },
  {
    "text": "And maybe you all remember\nthat there was this graph that I drew that kind of\nillustrates a little bit",
    "start": "55120",
    "end": "61720"
  },
  {
    "text": "of what's going on. I put the inputs-- in fact, I put all the\nvariables in circles.",
    "start": "61720",
    "end": "69520"
  },
  {
    "text": "And so there a. There was b. And I'm going to end up with z.",
    "start": "69520",
    "end": "74630"
  },
  {
    "text": "And I just put the\nlocal derivatives.",
    "start": "74630",
    "end": "79789"
  },
  {
    "text": "And, Steven, I want to ask\nyou if you would like or hate this notation, a notation that\nI think I've seen some people",
    "start": "79790",
    "end": "86430"
  },
  {
    "text": "use. But, again, nobody's consistent\nin this field right now. I kind of like the idea that--",
    "start": "86430",
    "end": "95750"
  },
  {
    "text": "here, let's-- and I don't\nwant to get into placeholder notation. But if I were to talk about--",
    "start": "95750",
    "end": "104130"
  },
  {
    "text": "if I were to talk about-- I want to make a\ndistinction between dz dx,",
    "start": "104130",
    "end": "110310"
  },
  {
    "text": "and partial z and partial x. ",
    "start": "110310",
    "end": "118680"
  },
  {
    "text": "And to be clear, this\none, I want to equal 1.",
    "start": "118680",
    "end": "123900"
  },
  {
    "text": "And I want to think of it\nas a one-step derivative. I look at this\nformula alone, and I",
    "start": "123900",
    "end": "130440"
  },
  {
    "text": "don't want to think of b as\nbeing dependent on x, which, in fact, it is.",
    "start": "130440",
    "end": "135900"
  },
  {
    "text": "But I'm pretending b\nis not dependent on x. And I'm just looking at\nwhat I would call the step 3",
    "start": "135900",
    "end": "142380"
  },
  {
    "text": "derivative or the\none-step derivative as opposed to the actual\nderivative, the one that",
    "start": "142380",
    "end": "152260"
  },
  {
    "text": "puts it all together. And we wrote it down last time. What did I say it was? ",
    "start": "152260",
    "end": "158980"
  },
  {
    "text": "z, if you put it all together,\nwas sine x over y plus x.",
    "start": "158980",
    "end": "164849"
  },
  {
    "text": "And so this thing, the\nthing that we actually want to calculate, is\ncosine x over y plus 1.",
    "start": "164850",
    "end": "170879"
  },
  {
    "text": "So my question for\nSteven was, what do you think of this notation? Do you like it? OK.",
    "start": "170880",
    "end": "176370"
  },
  {
    "text": "Anybody want to object\nto the notation? So I like the idea of\npartial being a partial--",
    "start": "176370",
    "end": "183390"
  },
  {
    "text": "it's not the whole set of steps. It's just like one step. It's partial truth,\nand then the derivative",
    "start": "183390",
    "end": "189630"
  },
  {
    "text": "being the whole truth. And so what I'm putting--\nwhat I'm going to put here are all the partials.",
    "start": "189630",
    "end": "195990"
  },
  {
    "text": "So I'm going to\nput down the cosine x, which is the derivative\nof a with respect to x.",
    "start": "195990",
    "end": "201570"
  },
  {
    "text": "And the 1 over y goes here. And there's a 1 that goes here.",
    "start": "201570",
    "end": "207750"
  },
  {
    "text": "But there's also a\n1 coming from here. And let's see.",
    "start": "207750",
    "end": "214080"
  },
  {
    "text": "What else did we have? And we had a minus a\nover y squared over here.",
    "start": "214080",
    "end": "221380"
  },
  {
    "text": "And maybe it's also\nuseful sometimes to write down what these\nthings are equal to. I'll just stick this\nbelow the circle.",
    "start": "221380",
    "end": "227480"
  },
  {
    "text": "I don't know if the\nprinting is too small. But I'll just do it\nanyway-- cosine y, and b plus x was here.",
    "start": "227480",
    "end": "236078"
  },
  {
    "text": "All right, so this\nis where we were I think when I left\noff last time, just",
    "start": "236078",
    "end": "241519"
  },
  {
    "text": "to show an example\nof how a program is a sequence of\ntransformations of variables.",
    "start": "241520",
    "end": "247970"
  },
  {
    "text": "And for a program to work,\nfor a program to work,",
    "start": "247970",
    "end": "255390"
  },
  {
    "text": "any time you're at a\nnode, all of the inputs have to be available\nand known to you. So you may never stop to\nthink about this property",
    "start": "255390",
    "end": "262950"
  },
  {
    "text": "of a computer program. But it's sort of obvious,\nright, that I can't execute b unless I know a and y.",
    "start": "262950",
    "end": "269009"
  },
  {
    "text": "I can't execute z\nunless I know b and x. And so the very nature\nof a computer program",
    "start": "269010",
    "end": "276450"
  },
  {
    "text": "is that this thing is\ngoing to be a DAG-- that's the word. Maybe most of you\nknow that word.",
    "start": "276450",
    "end": "281740"
  },
  {
    "text": "It's a Directed Acyclic Graph,\nwhich, in simple English, means that wherever I am, all\nthe inputs are moving left",
    "start": "281740",
    "end": "289330"
  },
  {
    "text": "to right. They're moving from the\nbeginning to the end. That could actually\nbe relaxed, and you",
    "start": "289330",
    "end": "294725"
  },
  {
    "text": "could have an implicit\nmethod or something. And most of what\nI'm talking about will still work under\nsuch situations.",
    "start": "294725",
    "end": "299979"
  },
  {
    "text": "But I think, for simplicity,\nlet's stick to DAGs and things going left to right, OK?",
    "start": "299980",
    "end": "305020"
  },
  {
    "text": "Yep? AUDIENCE: Why does\na depend on y? ",
    "start": "305020",
    "end": "311260"
  },
  {
    "text": "PROFESSOR: Let's see. Oh, of course, it doesn't. Thank you.",
    "start": "311260",
    "end": "316585"
  },
  {
    "start": "316585",
    "end": "322600"
  },
  {
    "text": "If you want the honest reason\nas to why a depends on y is I left my glasses home today. ",
    "start": "322600",
    "end": "330139"
  },
  {
    "text": "Thank you. Better? Good. Good catch. All righty.",
    "start": "330140",
    "end": "336530"
  },
  {
    "text": "That's why a depends on y. All righty. Good. So that's where we were.",
    "start": "336530",
    "end": "342560"
  },
  {
    "text": "And let's see. How far did we get in all this? So I think we got\nas far as saying",
    "start": "342560",
    "end": "349009"
  },
  {
    "text": "the bit of the general situation\nfor the forward derivatives.",
    "start": "349010",
    "end": "354260"
  },
  {
    "text": "Let's see. Yeah, how far did we get? ",
    "start": "354260",
    "end": "365004"
  },
  {
    "text": "So the goal, as you remember,\nis for every input--",
    "start": "365004",
    "end": "370770"
  },
  {
    "text": "so the inputs are over here. And for every output,\nso in this example, we have two inputs\nand one output.",
    "start": "370770",
    "end": "376305"
  },
  {
    "text": " Somehow calculating\nthe derivative",
    "start": "376305",
    "end": "381920"
  },
  {
    "text": "can be thought of as basically\nmultiplying the path weights. If these were matrices, you have\nto do it in the right order.",
    "start": "381920",
    "end": "388229"
  },
  {
    "text": "If it's scalars, you get to\nignore that a little bit. But we want to multiply\nthe path weights",
    "start": "388230",
    "end": "393530"
  },
  {
    "text": "and add that up\nover all the paths. So whether it's forward or\nbackwards or any other way,",
    "start": "393530",
    "end": "400280"
  },
  {
    "text": "our goal is to look at all\nthe paths between x and z and then multiply the weights.",
    "start": "400280",
    "end": "407022"
  },
  {
    "text": "Here there's just one weight. And then add it up\nover all the paths. And so it's really the sum\nover paths from input i",
    "start": "407022",
    "end": "421910"
  },
  {
    "text": "to output j of the product\nover the path of the weights.",
    "start": "421910",
    "end": "431700"
  },
  {
    "text": "So I'll just kind\nof say it like that. I hope it's clear what is meant. That's really what's\ngoing on, right?",
    "start": "431700",
    "end": "437480"
  },
  {
    "text": "And some people would tell\nyou it's just the chain rule, and they'd be right. I'm not a big fan of just\nthe chain rule because--",
    "start": "437480",
    "end": "447050"
  },
  {
    "text": "not that there's\nanything wrong about it. But I feel like you don't really\nsee what's going on if you just say just the chain rule.",
    "start": "447050",
    "end": "453690"
  },
  {
    "text": "But if you look at it on the\ngraph, the computational graph, I think it's much easier\nto see what's going on.",
    "start": "453690",
    "end": "459145"
  },
  {
    "text": " And it really doesn't matter--",
    "start": "459145",
    "end": "466660"
  },
  {
    "text": "if you really have the\ngraph in front of you-- that's sort of the\nhuman thing to do-- it really doesn't\nmatter if you multiply",
    "start": "466660",
    "end": "475340"
  },
  {
    "text": "this times this times this or if\nyou did it in the other order. It just doesn't matter.",
    "start": "475340",
    "end": "480979"
  },
  {
    "text": "The product of the weights\ncan happen in any order, and you can use associativity to\nyour benefit any way you like.",
    "start": "480980",
    "end": "488180"
  },
  {
    "text": "And just so it's\ncompletely clear, I drew this symbolically.",
    "start": "488180",
    "end": "494210"
  },
  {
    "text": "But on any computer,\nwhen you're doing automatic differentiation,\neverything here is going to be,",
    "start": "494210",
    "end": "499340"
  },
  {
    "text": "most of the time, a number-- I would say 99.9% of the time. All of the variable,\neverything that you would see",
    "start": "499340",
    "end": "505220"
  },
  {
    "text": "would be a numerical value. So I just don't want\nany confusion that--",
    "start": "505220",
    "end": "510568"
  },
  {
    "text": "I did it symbolically because\nif I put a whole lot of numbers here, I don't think I'd\nmake the point as well.",
    "start": "510568",
    "end": "515750"
  },
  {
    "text": "But on a computer, when you\ndo automatic differentiation, it's all numerical.",
    "start": "515750",
    "end": "521360"
  },
  {
    "text": "It's not finite differences. The way you get to\nthe edge weights are never finite differences.",
    "start": "521360",
    "end": "526880"
  },
  {
    "text": "But it is all numbers,\nusually floating point numbers of double precision\nor something,",
    "start": "526880",
    "end": "533329"
  },
  {
    "text": "or maybe not, but\nfloating point numbers. OK.",
    "start": "533330",
    "end": "538670"
  },
  {
    "text": "So then we talked about how\nthis thing really works.",
    "start": "538670",
    "end": "545490"
  },
  {
    "text": "And which of these do\nI want to tell you? So-- doo-doo-doo.",
    "start": "545490",
    "end": "552660"
  },
  {
    "text": "STEVEN JOHNSON: You\ndid forward last time. PROFESSOR: Yeah, I\ndid forward last time. And maybe I could\nsome up forward.",
    "start": "552660",
    "end": "559060"
  },
  {
    "text": "I didn't say it last time. ",
    "start": "559060",
    "end": "566070"
  },
  {
    "text": "But maybe it's worth saying\nthat when you do forward,",
    "start": "566070",
    "end": "578800"
  },
  {
    "text": "you might have a node\ncoming at your next step. So you're in the middle of-- you're in the middle\nof doing forward mode.",
    "start": "578800",
    "end": "587910"
  },
  {
    "text": "And I'll draw a little\npicture like this. Here I only had a case where a\npoint depended on two inputs.",
    "start": "587910",
    "end": "594480"
  },
  {
    "text": "But I'll just draw a picture\nkind of more generally. I'll write it,\nlike, five inputs. But this could also be\ndot dot dot of some sort.",
    "start": "594480",
    "end": "603000"
  },
  {
    "text": "And I don't know what\nthese variable names are. Maybe I'll just\ncall them something.",
    "start": "603000",
    "end": "608730"
  },
  {
    "text": "I don't want to call\nthem x's or y's or z's. Maybe I'll call them a's. Let's do that. So I'm at a step, and\nI've got a bunch of a's.",
    "start": "608730",
    "end": "615795"
  },
  {
    "text": " And I've got a b over\nhere where b depends on a.",
    "start": "615795",
    "end": "622529"
  },
  {
    "text": "And I'm really\njust using the fact",
    "start": "622530",
    "end": "629258"
  },
  {
    "text": "that here I'm going to put all\nthese derivatives over here. I'm going to put db da1.",
    "start": "629258",
    "end": "634710"
  },
  {
    "text": "This is what I'm going\nto put on the labels-- db da2. This is just the one-step\nderivatives over here--",
    "start": "634710",
    "end": "642315"
  },
  {
    "text": " db da4, and this\nis 5, and so forth.",
    "start": "642315",
    "end": "651060"
  },
  {
    "text": "I'm just going to put these. And I've got the fact--",
    "start": "651060",
    "end": "656120"
  },
  {
    "text": "let's say I'm starting\nat a particular x. Let's just call it x1. And I've worked my way over.",
    "start": "656120",
    "end": "662360"
  },
  {
    "text": "And so at this point\nin time, I know a1, and I know da1 dx with\na-- not the partial.",
    "start": "662360",
    "end": "670400"
  },
  {
    "text": "But I know all of these\nvalues here, you see. I know da1 up to da5 dx.",
    "start": "670400",
    "end": "675890"
  },
  {
    "text": "So what I know is the\npaths that take me",
    "start": "675890",
    "end": "681170"
  },
  {
    "text": "from this input to here. That's the information\nI have right now.",
    "start": "681170",
    "end": "686540"
  },
  {
    "text": "And what I'd like\nto do is figure out how to move forward\non the graph.",
    "start": "686540",
    "end": "692570"
  },
  {
    "text": "And so I'm just going to\nsay this symbolically now. I want to be able to calculate--",
    "start": "692570",
    "end": "698870"
  },
  {
    "text": "my computer program\nwill give me b. But the question is, how do I\nget db dx from the information",
    "start": "698870",
    "end": "704750"
  },
  {
    "text": "I have right now? And exactly what's happening\nis I'm going to sum--",
    "start": "704750",
    "end": "710760"
  },
  {
    "text": "I'm going to be summing-- let's see, what is it?--\ndb dai times dai dx from i",
    "start": "710760",
    "end": "720330"
  },
  {
    "text": "equals 1 to whatever, right? And that is the\nmultivariate chain rule.",
    "start": "720330",
    "end": "727446"
  },
  {
    "text": "This is really what's happening,\nthat this is equal to this. And that's kind of\nwhy it all works,",
    "start": "727446",
    "end": "734670"
  },
  {
    "text": "that you can proceed forward and\nkeep working your way forward to get the derivative\nall the way to the end.",
    "start": "734670",
    "end": "741320"
  },
  {
    "text": "When you do reverse\nmode, we're going to have arrows\ngoing the other way.",
    "start": "741320",
    "end": "747560"
  },
  {
    "text": "And so we'll see\nhow it all happens. But the arrows are going\nto be-- here, it's,",
    "start": "747560",
    "end": "755240"
  },
  {
    "text": "what do we depend on? But what it's going\nto turn out to be the other way is, what\nare we influenced by,",
    "start": "755240",
    "end": "761570"
  },
  {
    "text": "or what do we influence later? But we'll see reverse mode. But this is all forward so far. ",
    "start": "761570",
    "end": "770930"
  },
  {
    "text": "And an interesting fact\nabout forward mode is--",
    "start": "770930",
    "end": "776890"
  },
  {
    "text": "a detail about\nforward mode is you don't need to create the\ngraph as a data structure.",
    "start": "776890",
    "end": "783300"
  },
  {
    "text": "Yes, there's a question? AUDIENCE: Just compute\nthe partials [INAUDIBLE]?? PROFESSOR: Oh, well,\nthat's-- so, OK,",
    "start": "783300",
    "end": "789620"
  },
  {
    "text": "maybe we should talk about that. Yeah, let's talk about\ncomputing these partials. So the first answer\nI'm going to give you",
    "start": "789620",
    "end": "797270"
  },
  {
    "text": "is the most simple basic answer,\nthe \"no cheating\" answer.",
    "start": "797270",
    "end": "802345"
  },
  {
    "text": "And then, in the\nreal world, I'll tell you what the\ncheating answer is. So you could write every\ncomputer program in the world.",
    "start": "802345",
    "end": "811470"
  },
  {
    "text": "So here, let's put\nthis over here. I'm going to need this\nfor reverse mode as well. So every computer\nprogram in the world",
    "start": "811470",
    "end": "822430"
  },
  {
    "text": "basically it can come down to\nplus, minus, times, and divide.",
    "start": "822430",
    "end": "828100"
  },
  {
    "text": "I could probably even\nremove some of these. But every computer\nprogram in the world",
    "start": "828100",
    "end": "833139"
  },
  {
    "text": "can be brought down to plus,\nminus, times, and divide. When you do a sine function\nor an exponential function,",
    "start": "833140",
    "end": "840190"
  },
  {
    "text": "there's some power series or\nmaybe a ratio of power series, and it's not the one\nyou learned in calculus.",
    "start": "840190",
    "end": "846006"
  },
  {
    "text": "So it's not Taylor series. I don't care what your\ncalculus teacher told you. It's never done by that way. ",
    "start": "846007",
    "end": "853000"
  },
  {
    "text": "But nonetheless, there's some\nsort of power series or ratio, a power series, usually,\nsomewhere in there.",
    "start": "853000",
    "end": "859209"
  },
  {
    "text": "And in the end, everything\nyou ever do on a computer can come down to this. There's also conditionals\nand other things.",
    "start": "859210",
    "end": "867006"
  },
  {
    "text": "But as far as all the\narithmetic operations, it can be reduced to plus,\nminus, times, and divide. So in fact, all you need\nare the partials for these.",
    "start": "867007",
    "end": "876639"
  },
  {
    "text": "So, for example,\nall you really need, theoretically, is\nthe ability to do--",
    "start": "876640",
    "end": "885220"
  },
  {
    "text": "right? So if b is a1 plus a2, the only\ntwo partials you need are this.",
    "start": "885220",
    "end": "891399"
  },
  {
    "text": "In fact, let's put\na plus or minus, and I'll cover two of\nthese cases right there. And what else is there?",
    "start": "891400",
    "end": "897460"
  },
  {
    "text": "There's times. So if b is equal to a1 a2,\nthen all I need is this.",
    "start": "897460",
    "end": "904330"
  },
  {
    "text": "So I just need to\nknow that, right? And this is, by the way, what\nI did in that little notebook",
    "start": "904330",
    "end": "909970"
  },
  {
    "text": "where I kind of did the magic\nof forward mode differentiation. And then, finally,\nthere's the division one.",
    "start": "909970",
    "end": "917560"
  },
  {
    "text": "And the partials are-- I mean, this is maybe a\nslightly different point",
    "start": "917560",
    "end": "922630"
  },
  {
    "text": "of view of the quotient\nrule and the product rule. But if you actually step\nback and look at it,",
    "start": "922630",
    "end": "930040"
  },
  {
    "text": "this is exactly the sum and\ndifference rule, the product rule, and I'm about to write\nthe quotient rule down.",
    "start": "930040",
    "end": "937410"
  },
  {
    "text": "Let's see. So the partial with\nrespect to a1 is 1 over a2. And the partial with respect to\na2 is minus a1 over a2 squared.",
    "start": "937410",
    "end": "946220"
  },
  {
    "text": "And I hope you can see that the\ninformation that you see here is exactly the same information\nas the product rule.",
    "start": "946220",
    "end": "954470"
  },
  {
    "text": "It's a2 da1 plus a1 da2. It's 1 over a2.",
    "start": "954470",
    "end": "961940"
  },
  {
    "text": "This is the denominator times\nthe derivative of the numerator or whatever. I guess you might want\nto write this as a2",
    "start": "961940",
    "end": "968879"
  },
  {
    "text": "over a2 squared just to see\nthat it's the same thing. But it's the denominator times\nthe derivative of the numerator",
    "start": "968880",
    "end": "974250"
  },
  {
    "text": "minus the numerator times\nderivative of-- you see, so it's all the\ninformation you've known in the old days of calculus. I'm just writing it in a\nslightly different way.",
    "start": "974250",
    "end": "981640"
  },
  {
    "text": "If you have these rules, and\nyour computer program only has those things, that's\nall you need, right?",
    "start": "981640",
    "end": "988709"
  },
  {
    "text": "If that's what your program\nbreaks up to atomically, you can actually do forward\nmode differentiation completely.",
    "start": "988710",
    "end": "993839"
  },
  {
    "text": "Now, of course, that's\nnot how it really works in the real world. But I want everybody to\nsee that in theory, this",
    "start": "993840",
    "end": "1001020"
  },
  {
    "text": "is all you need. So in practice, we know\nlots of derivatives.",
    "start": "1001020",
    "end": "1006280"
  },
  {
    "text": "We know the derivative\nof sine is cosine. We know the derivative\nof log x is 1 over x.",
    "start": "1006280",
    "end": "1011550"
  },
  {
    "text": "So we throw them in so you\ndon't have to waste your time.",
    "start": "1011550",
    "end": "1016620"
  },
  {
    "text": "And Julia-- I think\nSteven mentioned in the Piazza or somewhere\nabout chainrules.jl.",
    "start": "1016620",
    "end": "1022920"
  },
  {
    "text": "So lots and lots of\nderivatives that are known get stuck in so that you can\ndo this at a higher level.",
    "start": "1022920",
    "end": "1030809"
  },
  {
    "text": "So instead of letting the\ncomputer derive the derivative of sine x with all those\npluses and minuses,",
    "start": "1030810",
    "end": "1036429"
  },
  {
    "text": "it could just know the\nderivative of sine is cosine. STEVEN JOHNSON: And as you\nalso find in your problem set--",
    "start": "1036430",
    "end": "1042971"
  },
  {
    "text": "PROFESSOR: Something\nwas missing, right? STEVEN JOHNSON: And sometimes\nit fails because it calls out--",
    "start": "1042972",
    "end": "1047990"
  },
  {
    "text": "so if forwarddiff relies\non this dual number type, it works as long as you\nhave Julia code that works with any number type.",
    "start": "1047990",
    "end": "1054450"
  },
  {
    "text": "If you call out to a\nFORTRAN library that only works for double precision\nfloating point numbers, then it can't\ndifferentiate that.",
    "start": "1054450",
    "end": "1061399"
  },
  {
    "text": "So then someone has to\nwrite a special rule. And if they didn't, then\nit fails and probably complains that you if you\ntry to use forwarddiff",
    "start": "1061400",
    "end": "1068245"
  },
  {
    "text": "on [? the matrix ?]\n[INAUDIBLE] focusing. PROFESSOR: So that's the\nproblem with calling--",
    "start": "1068245",
    "end": "1074276"
  },
  {
    "text": "if only we can get everybody\nto consistently write all their code in Julia, you\nwould never have that problem.",
    "start": "1074276",
    "end": "1079435"
  },
  {
    "text": "AUDIENCE: I mean, one\nsolution is if you're Google, and you just hire a\nsmall army of engineers to just re-implement all\nthe math libraries you ever",
    "start": "1079435",
    "end": "1085587"
  },
  {
    "text": "need in Jax, which is\nbasically [INAUDIBLE] implement NumPy, [INAUDIBLE],,\nSciPy, and so forth.",
    "start": "1085587",
    "end": "1091230"
  },
  {
    "text": "And then, as long as you stay in\nthat closed universe of things that people have written\nderivative rules for, you're fine.",
    "start": "1091230",
    "end": "1096289"
  },
  {
    "text": "PROFESSOR: So I'll\ntell a little story. Before I really\ngrew to understand-- automatic differentiation\nhas only gotten exciting",
    "start": "1096290",
    "end": "1102620"
  },
  {
    "text": "in the last couple of years. And as I was just starting\nto poke my head into it, I differentiated the\neigenvalue problem.",
    "start": "1102620",
    "end": "1111470"
  },
  {
    "text": "Besides the FORTRAN\nlibraries, the LAPACK that-- it's probably C now anyway. But besides the LAPACK\nlibrary, there's",
    "start": "1111470",
    "end": "1119073"
  },
  {
    "text": "another implementation of the\nsymmetric eigenvalue problem in genericlinearalgebra.jl. It's written in all Julia.",
    "start": "1119073",
    "end": "1125630"
  },
  {
    "text": "And it actually works beyond-- it works for quaternions\nand weird number systems and finite fields and\nnot just plain old",
    "start": "1125630",
    "end": "1132510"
  },
  {
    "text": "floating point numbers. And so you can\ndifferentiate through it",
    "start": "1132510",
    "end": "1137820"
  },
  {
    "text": "because it's all Julia, and\nit got the right answer. And I was talking\nto a friend of mine.",
    "start": "1137820",
    "end": "1143142"
  },
  {
    "text": "What was he what\nwas the package he was excited about with its\nautomatic differentiation?",
    "start": "1143142",
    "end": "1148320"
  },
  {
    "text": "Oh, it's a statistics thing. Oh, what was it? Oh, I'm just\nblanking on the name.",
    "start": "1148320",
    "end": "1155610"
  },
  {
    "text": "But it's a very well-known one. Anyway, it doesn't matter. I was talking to a friend\nof mine, and I said,",
    "start": "1155610",
    "end": "1160970"
  },
  {
    "text": "can you differentiate the\nsymmetric eigenvalue problem? And he said to me,\noh, well, we can,",
    "start": "1160970",
    "end": "1166220"
  },
  {
    "text": "but we have to teach the system. And I thought that was crazy. Having to teach the system--",
    "start": "1166220",
    "end": "1171320"
  },
  {
    "text": "we really can't right now. But if we threw in a\nnew rule, then we can. But I now realize that\neverybody does that, right?",
    "start": "1171320",
    "end": "1179490"
  },
  {
    "text": "It's actually\nreasonable from a kind of a complexity point of view.",
    "start": "1179490",
    "end": "1185040"
  },
  {
    "text": "So you don't have to\nactually drill down from every operation. But I was impressed\nthat Julia was able to just get the\nanswer of the derivative",
    "start": "1185040",
    "end": "1191990"
  },
  {
    "text": "of the symmetric\neigenvalue problem without being\ntaught how to do it. It actually just did it\nusing just these rules.",
    "start": "1191990",
    "end": "1199650"
  },
  {
    "text": "And I thought that was kind\nof cool when I first saw that. OK, so this is really\nall that you need.",
    "start": "1199650",
    "end": "1206090"
  },
  {
    "text": "But as I say, in\npractice, in practice, we've added lots of things.",
    "start": "1206090",
    "end": "1212630"
  },
  {
    "text": " For example, if b is\nequal to the sine of a,",
    "start": "1212630",
    "end": "1220970"
  },
  {
    "text": "then this edge with\ncosine a is just--",
    "start": "1220970",
    "end": "1226210"
  },
  {
    "text": "it comes on the edges. OK, so-- what are\nyou doing there?",
    "start": "1226210",
    "end": "1234169"
  },
  {
    "text": "It's-- AUDIENCE: Just--\nwe're all right. It's too small to\nhave the [INAUDIBLE].. PROFESSOR: Oh, yeah,\nthat's probably true. OK, maybe the last\nthing I'll say",
    "start": "1234170",
    "end": "1241080"
  },
  {
    "text": "before I take a break, and-- the break may be slightly\nlonger because I'm going to put a sweater\non this little guy.",
    "start": "1241080",
    "end": "1246870"
  },
  {
    "text": "And that'll take me a\ncouple of more minutes. But he's really cute\nin that sweater. So you'll all like that. So the other thing\nI wanted to say",
    "start": "1246870",
    "end": "1253620"
  },
  {
    "text": "is when you do forward mode,\nyou might ask yourself, where is this graph\non the computer?",
    "start": "1253620",
    "end": "1260602"
  },
  {
    "text": "I mean, you know, of\ncourse, on the blackboard, you can visually\nlook at this graph, and you can see the paths. So where is this\ngraph on the computer?",
    "start": "1260602",
    "end": "1267690"
  },
  {
    "text": "Well, in some sense,\nwhen you do forward mode, one way to say it is you\ndon't need the graph at all.",
    "start": "1267690",
    "end": "1274210"
  },
  {
    "text": "Maybe a better way to\nsay it is the graph is kind of being built up as\nsoftware executes, in effect.",
    "start": "1274210",
    "end": "1281230"
  },
  {
    "text": "As you execute, as\nyou execute sine x, there's nothing stopping you\nfrom creating that cosine x",
    "start": "1281230",
    "end": "1290110"
  },
  {
    "text": "and then getting that second\npart of the dual number as you go.",
    "start": "1290110",
    "end": "1295180"
  },
  {
    "text": "And so you see as you execute,\nwe can start out with x1. You get to over here.",
    "start": "1295180",
    "end": "1301240"
  },
  {
    "text": "We've got a, which is\nsine x and then cosine x. And you just can\nkeep moving along.",
    "start": "1301240",
    "end": "1307700"
  },
  {
    "text": "So in some sense, I\nthink this is worth thinking about because-- I don't know if it's\ncompletely obvious or not.",
    "start": "1307700",
    "end": "1314559"
  },
  {
    "text": "But as the computer\nexecutes, as it actually calculates this from\nthis, it can also",
    "start": "1314560",
    "end": "1323620"
  },
  {
    "text": "keep that path, the product\nof the weights going forward, just by multiplying--\nat this moment in time,",
    "start": "1323620",
    "end": "1329900"
  },
  {
    "text": "you can get this. And just as you need\nit, you can multiply it by what you have here. And so that's why overloading\nworks when you do forward mode.",
    "start": "1329900",
    "end": "1338200"
  },
  {
    "text": "You take your original\ncomputer program. You let those dual\nnumbers propagate forward. And you are literally,\nas you get there,",
    "start": "1338200",
    "end": "1345460"
  },
  {
    "text": "you're getting the\nright value for-- so you got this-- you\nhave all the values",
    "start": "1345460",
    "end": "1351820"
  },
  {
    "text": "for the sum over the paths--\nof the product of the paths to this point.",
    "start": "1351820",
    "end": "1357070"
  },
  {
    "text": "And so you don't need to go\ncrazy to actually build this as some weird data structure.",
    "start": "1357070",
    "end": "1362440"
  },
  {
    "text": "You just go forward,\nand it's there. However, no such luck\nwith reverse mode.",
    "start": "1362440",
    "end": "1367960"
  },
  {
    "text": "So after the break, after\nI put on his little sweater and come back, what\nI'm going to do is discuss reverse mode\nin some real detail.",
    "start": "1367960",
    "end": "1374950"
  },
  {
    "text": "And I find it very\ninteresting to see in what sense reverse mode\nis the symmetric version",
    "start": "1374950",
    "end": "1382960"
  },
  {
    "text": "of forward mode. It's just looking\nat it in the mirror. And what is it about computer\nsoftware which kind of",
    "start": "1382960",
    "end": "1388420"
  },
  {
    "text": "makes it asymmetric? From a pure math point of view,\nreverse mode and forward mode",
    "start": "1388420",
    "end": "1393850"
  },
  {
    "text": "are just mirror\nimages of each other. But because of the realities\nof how computers execute,",
    "start": "1393850",
    "end": "1399520"
  },
  {
    "text": "then they are no longer\nexactly mirror images. And reverse mode seems\na little bit harder",
    "start": "1399520",
    "end": "1405370"
  },
  {
    "text": "to actually implement. It's not hard, but it\nfeels a little bit-- it just feels a little bit\nless intuitive because--",
    "start": "1405370",
    "end": "1414830"
  },
  {
    "text": "it's ultimately because computer\nprograms execute forward. What else are they going to do? If you could only run\ncomputer programs backwards,",
    "start": "1414830",
    "end": "1422300"
  },
  {
    "text": "then you wouldn't have to-- it doesn't mean anything but. But I just want to\nmake that point.",
    "start": "1422300",
    "end": "1427620"
  },
  {
    "text": "All right. So we take a break. It might be slightly\nmore than five minutes. But I'm going to take\nthis young man outside. ",
    "start": "1427620",
    "end": "1437280"
  },
  {
    "text": "So I think the next\nthing to emphasize as I go from forward to reverse\nis to really focus on, perhaps,",
    "start": "1437280",
    "end": "1445580"
  },
  {
    "text": "this basic picture where we\ntalk about this variable I'm",
    "start": "1445580",
    "end": "1451279"
  },
  {
    "text": "calling b. And it's all of the\nthings that I depend on.",
    "start": "1451280",
    "end": "1457880"
  },
  {
    "text": "And maybe I should actually\nthink a little bit. I'm going to get\nconfused in a second. Did I actually put this in\nthe order I wanted or not?",
    "start": "1457880",
    "end": "1465480"
  },
  {
    "text": "So let's see. If these were matrices,\nI want them to--",
    "start": "1465480",
    "end": "1472129"
  },
  {
    "text": "I would want them\nto be multiplied. Oh, god, I'm going to\nget completely confused. You know what? We're not doing matrices.",
    "start": "1472130",
    "end": "1477582"
  },
  {
    "text": "I'll think about it\noffline and let you-- unless you know the\nanswer off the top, but I wanted it this\nway or this way. But we're doing scalars today.",
    "start": "1477582",
    "end": "1484290"
  },
  {
    "text": "So I won't have to think. All right, but\nthe key point is-- AUDIENCE: Yeah, you [INAUDIBLE]. PROFESSOR: Oh, I got lucky.",
    "start": "1484290",
    "end": "1490340"
  },
  {
    "text": "OK. All right. So here it's every\nnode that b depends on.",
    "start": "1490340",
    "end": "1500330"
  },
  {
    "text": " So when you're going\nbackwards, what you need",
    "start": "1500330",
    "end": "1511740"
  },
  {
    "text": "is everybody that you influence. So to draw that as a\npicture, I have a node a.",
    "start": "1511740",
    "end": "1520215"
  },
  {
    "text": "And it's going to influence\na whole bunch of nodes. Let's call these b1, b2.",
    "start": "1520215",
    "end": "1526510"
  },
  {
    "text": "I'll just stick with my-- I'll stick with my running 5.",
    "start": "1526510",
    "end": "1532880"
  },
  {
    "text": "But, no, there's nothing\nspecial about 5 here. So in your graph, the graph\nis still going left to right.",
    "start": "1532880",
    "end": "1544490"
  },
  {
    "text": "But you have a node, and\nsomewhere along the line, you can say all of the\nnodes that a influences--",
    "start": "1544490",
    "end": "1551760"
  },
  {
    "text": "for example, influences\nin one step, right? So x is influencing\nin one step here,",
    "start": "1551760",
    "end": "1558750"
  },
  {
    "text": "and x is influencing\nz in one step. And so if that node\nover there was x,",
    "start": "1558750",
    "end": "1565570"
  },
  {
    "text": "I would have two output arrows. This is every node--",
    "start": "1565570",
    "end": "1572320"
  },
  {
    "text": "so every node, I'll\nsay, influenced by a or, maybe more simply,\nevery node that depends on a.",
    "start": "1572320",
    "end": "1587070"
  },
  {
    "start": "1587070",
    "end": "1592139"
  },
  {
    "text": "So that's what one\nhas to look at there.",
    "start": "1592140",
    "end": "1597460"
  },
  {
    "text": "And what we're\ngoing to do is we're going to have a final output\nvariable z, where everything",
    "start": "1597460",
    "end": "1606070"
  },
  {
    "text": "is going to start. And it wouldn't surprise\nyou all that we're going to start--\nwe're still going",
    "start": "1606070",
    "end": "1611860"
  },
  {
    "text": "to have something that\nlooks like an ordered pair of numbers. But we're going to\nwork our way this way.",
    "start": "1611860",
    "end": "1619060"
  },
  {
    "text": "So we're going to do all the\nmultiplications from right to left. And at the end, over here,\nwe're going to have--",
    "start": "1619060",
    "end": "1629180"
  },
  {
    "text": "let's say I had one x over here. When we're finally\nfinished, we're going to compute x and dz dx.",
    "start": "1629180",
    "end": "1639460"
  },
  {
    "text": "So that's our goal is\nto start at this end",
    "start": "1639460",
    "end": "1644799"
  },
  {
    "text": "and compute the\nderivative-- in other words, compute the exact same thing.",
    "start": "1644800",
    "end": "1651430"
  },
  {
    "text": "But just to remind\nyou, what we did here was we started with\nx, comma, 1 this way.",
    "start": "1651430",
    "end": "1659230"
  },
  {
    "text": "And at the very end, we ended up\nwith z and dz dx over here, OK?",
    "start": "1659230",
    "end": "1665890"
  },
  {
    "text": "So that's your first kind of\npeek at how reverse mode will actually work.",
    "start": "1665890",
    "end": "1670990"
  },
  {
    "start": "1670990",
    "end": "1676368"
  },
  {
    "text": "And the way it's\ngoing to work is here we're going to presume\nthat we have the--",
    "start": "1676368",
    "end": "1683870"
  },
  {
    "text": "we're going to have\nthe b's and the-- we're going to have\nthe full derivatives--",
    "start": "1683870",
    "end": "1691040"
  },
  {
    "text": "so dz db2. So in the middle\nof the algorithm,",
    "start": "1691040",
    "end": "1696320"
  },
  {
    "text": "we're assuming that we\nhave all of these things. ",
    "start": "1696320",
    "end": "1704075"
  },
  {
    "text": "Sorry, these are\nnot the partials. We have the derivatives all the\nway from z to where we are now.",
    "start": "1704075",
    "end": "1712850"
  },
  {
    "text": "And our goal is to figure\nout what to put here. And so I hope you could see\nthat if you can always go--",
    "start": "1712850",
    "end": "1721549"
  },
  {
    "text": "if you just know\nwhat to put here, then you can actually\ngo from right to left.",
    "start": "1721550",
    "end": "1728169"
  },
  {
    "text": "And so our goal is\nto figure out dz da.",
    "start": "1728170",
    "end": "1734530"
  },
  {
    "text": "So if we can only have a good\nformula for dz da in terms of all of these pieces,\nwe would have no trouble",
    "start": "1734530",
    "end": "1741340"
  },
  {
    "text": "being able to do this. And, of course, the way\nthis is going to work is--",
    "start": "1741340",
    "end": "1748230"
  },
  {
    "text": "what we're going to do is\nwe're going to sum up now-- let's see.",
    "start": "1748230",
    "end": "1753720"
  },
  {
    "text": "How is this going to go? Is it going to be\ndz dbi, dbi da--",
    "start": "1753720",
    "end": "1764390"
  },
  {
    "text": "from i equals 1\nto 5 or something. AUDIENCE: Do you need a\ntranspose [INAUDIBLE]?? PROFESSOR: No, I'm\nnot in scalars.",
    "start": "1764390",
    "end": "1769720"
  },
  {
    "text": "But, yes, I mean,\nultimately, there'll be some sort of transposer. Or I have to write it in the\nright direction as an alt--",
    "start": "1769720",
    "end": "1776650"
  },
  {
    "text": "AUDIENCE: That's from the\noutputs on the left, right? [INAUDIBLE] PROFESSOR: Yeah. But I'm going to skip that for\nnow, just to not complicate it.",
    "start": "1776650",
    "end": "1786890"
  },
  {
    "text": "But Steven is just right.  And you see that this\nis also a chain rule.",
    "start": "1786890",
    "end": "1798120"
  },
  {
    "text": " But also, I want\nyou to really see that from a graph point of\nview, all that's happening",
    "start": "1798120",
    "end": "1806460"
  },
  {
    "text": "is we're making sure\nthat what we put here is the path all the\nway to the right",
    "start": "1806460",
    "end": "1812279"
  },
  {
    "text": "multiplied by\nwhat's on this edge. And then just add them all up. So you could see\nit the calculus way",
    "start": "1812280",
    "end": "1820740"
  },
  {
    "text": "as these are two versions of\nthe multivariate chain rule. I don't prefer that\nview, by the way.",
    "start": "1820740",
    "end": "1827010"
  },
  {
    "text": "But some people do. And it's not wrong. Or you could see\nit as we're just",
    "start": "1827010",
    "end": "1832200"
  },
  {
    "text": "multiplying the sums\nof all these weights, and you notice, huh,\nby the time I get here, I'm actually calculating\nthe same thing.",
    "start": "1832200",
    "end": "1838770"
  },
  {
    "text": "I'm just getting the\nsum over all the paths of all the weights. And, again, you\nget to look at it both ways, whatever you like.",
    "start": "1838770",
    "end": "1844830"
  },
  {
    "text": "But both are absolutely correct. And so you have no problem.",
    "start": "1844830",
    "end": "1852060"
  },
  {
    "text": "So you just keep moving\nyour way through the graph, and you form these sums. So any questions about that?",
    "start": "1852060",
    "end": "1860559"
  },
  {
    "text": "So the next thing I want to\ntalk about is a bit of a detail as to, how do you actually, in\npractice, compute these sums?",
    "start": "1860560",
    "end": "1871784"
  },
  {
    "text": " You see a sum like this,\nand perhaps your temptation",
    "start": "1871785",
    "end": "1879710"
  },
  {
    "text": "is to form this\nentire sum at once. But you don't have to.",
    "start": "1879710",
    "end": "1885650"
  },
  {
    "text": "You can traverse these\narrows one at a time. So, for example,\nyou start out with--",
    "start": "1885650",
    "end": "1894679"
  },
  {
    "text": "so in practice-- let\nme put this over here. In practice, at\nsome point, you'll",
    "start": "1894680",
    "end": "1900559"
  },
  {
    "text": "initialize everything with a, 0. And you traverse this arrow,\nand maybe you'll get a, comma,",
    "start": "1900560",
    "end": "1909740"
  },
  {
    "text": "oh I don't know,\ndb3 da times dz db3.",
    "start": "1909740",
    "end": "1916640"
  },
  {
    "text": "You'll get one of your sum ends,\nand there's four more to go.",
    "start": "1916640",
    "end": "1922610"
  },
  {
    "text": "And then, at some later\ntime, maybe what you'll do is fold in-- there's no rule that\nsays you have to form",
    "start": "1922610",
    "end": "1928310"
  },
  {
    "text": "this entire sum at once, right? So maybe you'll add\nthe first one later--",
    "start": "1928310",
    "end": "1933860"
  },
  {
    "text": "so db1 da dz db1.",
    "start": "1933860",
    "end": "1939257"
  },
  {
    "text": "And this is close to what's\nhappening in practice, that you traverse\nan arrow, and then",
    "start": "1939257",
    "end": "1945390"
  },
  {
    "text": "you just add the answer\nto whatever is here. Once you're finally done,\nyou'll compute this entire sum.",
    "start": "1945390",
    "end": "1951299"
  },
  {
    "text": "But you don't have\nto do it at once. And so I think the secret to\nevery good algorithm I've ever",
    "start": "1951300",
    "end": "1956880"
  },
  {
    "text": "seen is to recognize\nthat you don't have to implement something\nthe way the formula looks.",
    "start": "1956880",
    "end": "1961940"
  },
  {
    "text": "You see a sum, you can\ndo it in any order. You can do it at any time. So what actually happens in\npractice is one way or another,",
    "start": "1961940",
    "end": "1972510"
  },
  {
    "text": "if you're going to do reverse\nmode, you have to have-- the first step is you\nhave to go forward to--",
    "start": "1972510",
    "end": "1978850"
  },
  {
    "text": "you're going to go forward to\nactually compute all the nodes. Even if you did\nthis one backwards,",
    "start": "1978850",
    "end": "1985103"
  },
  {
    "text": "you're going to have to\nhave this forward step where you compute a, b, and z. And during those forward\nsteps, you actually",
    "start": "1985103",
    "end": "1992460"
  },
  {
    "text": "build up this graph. There's no way around it. You build up the graph, and you\nput the values on the edges.",
    "start": "1992460",
    "end": "1999730"
  },
  {
    "text": "And so unlike forward\nmode, which is-- so let me say this in a better way.",
    "start": "1999730",
    "end": "2007170"
  },
  {
    "text": "So in terms of implementation,\nfor forward mode--",
    "start": "2007170",
    "end": "2016350"
  },
  {
    "text": " so you don't build the graph.",
    "start": "2016350",
    "end": "2023545"
  },
  {
    "text": " It's kind of implicit.",
    "start": "2023545",
    "end": "2028710"
  },
  {
    "text": "In reverse mode, there's\nan explicit graph that has to be built up. So in reverse mode,\nyou need to calculate",
    "start": "2028710",
    "end": "2036779"
  },
  {
    "text": "one or another-- you actually\nhave to build the graph. So you need some sort\nof data structure",
    "start": "2036780",
    "end": "2042030"
  },
  {
    "text": "to be able to build\nup this graph. Oh, I just remembered, I\nhave a nice demo of all this.",
    "start": "2042030",
    "end": "2048149"
  },
  {
    "text": "I wonder if I'll\nfind it fast enough. I forgot I had a good demo. You've never seen it because\nit was since last year.",
    "start": "2048150",
    "end": "2054929"
  },
  {
    "text": "I'll try to find it. But we have an explicit graph. And so what happens is you'll\nhave a forward pass where",
    "start": "2054929",
    "end": "2068658"
  },
  {
    "text": "you actually compute the\nprimals, or the variables, and you build the graph. ",
    "start": "2068659",
    "end": "2076369"
  },
  {
    "text": "And then, once you\nhave the graph, you can do a reverse\npass, where you",
    "start": "2076370",
    "end": "2084030"
  },
  {
    "text": "start evaluating the\nderivatives, where you evaluate the path products.",
    "start": "2084030",
    "end": "2089594"
  },
  {
    "text": " And, again, this could all be\ndone with just-- this, too,",
    "start": "2089594",
    "end": "2096989"
  },
  {
    "text": "could also just be done with\nplus, minus, times, and divide. Or you could actually\nadd pieces to it.",
    "start": "2096989",
    "end": "2103360"
  },
  {
    "text": "So in a way, this\nis like a transpose. But I'll kind of show\nyou how it would work. So with plus, minus, times, and\ndivide-- where can I put that?",
    "start": "2103360",
    "end": "2111810"
  },
  {
    "text": "Maybe I have enough room here. And so-- let's see. I just want to\nget this straight.",
    "start": "2111810",
    "end": "2118180"
  },
  {
    "text": "Let's see, doo-doo-doo.  So, yeah, so how\nshould I do this?",
    "start": "2118180",
    "end": "2130050"
  },
  {
    "text": "So if I had, at this point-- let's say I had b, comma--\nwhat's a good notation?",
    "start": "2130050",
    "end": "2136590"
  },
  {
    "text": "It doesn't matter. I'm going to call this p.  So the gradient of\nplus is just 1 1.",
    "start": "2136590",
    "end": "2149470"
  },
  {
    "text": "The gradient-- or plus\nminus is plus or minus 1. The gradient of product\nis, like, a2, a1.",
    "start": "2149470",
    "end": "2158769"
  },
  {
    "text": "And the divide is\nwhat's over here. So in a way, what's going\non is I need the transpose.",
    "start": "2158770",
    "end": "2167395"
  },
  {
    "text": "This becomes 1 plus minus 1. This becomes a2, a1, if I\ntake the gradient transpose.",
    "start": "2167395",
    "end": "2174940"
  },
  {
    "text": "And so basically, what\nhappens is if I have a plus,",
    "start": "2174940",
    "end": "2180359"
  },
  {
    "text": "this just becomes a, p. Well, the way to\nwrite it is a and--",
    "start": "2180360",
    "end": "2189540"
  },
  {
    "text": " I'm getting caught up in\na little bit of notation.",
    "start": "2189540",
    "end": "2196230"
  },
  {
    "text": "Let me say it in words. Suppose you're moving along,\nand a plus operation happens.",
    "start": "2196230",
    "end": "2202960"
  },
  {
    "text": "So maybe I already have\nsome partial results. So here I have pb at the\nmoment, and I have a,",
    "start": "2202960",
    "end": "2209620"
  },
  {
    "text": "and I have a pa1\nand an a2 and a pa2.",
    "start": "2209620",
    "end": "2216890"
  },
  {
    "text": "And here I am on the graph. This a1 comes from other\nthings, not this edge.",
    "start": "2216890",
    "end": "2222170"
  },
  {
    "text": "I want to process this edge now. These two edges have\nnot been processed, and I'm going to process it.",
    "start": "2222170",
    "end": "2228120"
  },
  {
    "text": "So what's the operation? The operation is going\nto be pa1 plus equals pb.",
    "start": "2228120",
    "end": "2237860"
  },
  {
    "text": "And then the other operation\nwill be pb2 plus equals pb.",
    "start": "2237860",
    "end": "2242930"
  },
  {
    "text": "And that's how you\ndo an add backwards. You just move this along.",
    "start": "2242930",
    "end": "2249390"
  },
  {
    "text": "If you were doing\na multiply, which might be a little bit\nmore informative-- let's do the multiply. So here we have a,\npa, a1, pa1, a2, pa2,",
    "start": "2249390",
    "end": "2260250"
  },
  {
    "text": "we're going to\nmultiply these two. And let's call this b and pb.",
    "start": "2260250",
    "end": "2268030"
  },
  {
    "text": "So what do you put\non these edges? The edges are just\nthe same derivatives. Nothing changes there.",
    "start": "2268030",
    "end": "2273220"
  },
  {
    "text": "We're multiplying a1 and a2. So this is going\nto be a2 and a1. And now what's the\nimplementation?",
    "start": "2273220",
    "end": "2279130"
  },
  {
    "text": "The implementation is just\npa1 plus equals a2 times pb",
    "start": "2279130",
    "end": "2288049"
  },
  {
    "text": "and pa2 plus equals a1 times pb.",
    "start": "2288050",
    "end": "2294140"
  },
  {
    "text": "So that's basically\nhow you would do it. And division would be the same. You want to see division?",
    "start": "2294140",
    "end": "2299510"
  },
  {
    "text": "It's not much different. You would just use these things. And so I would multiply--",
    "start": "2299510",
    "end": "2305450"
  },
  {
    "text": "I would add the product\nwith a2 over a1. Well, I would just\ncall this 1 over a2.",
    "start": "2305450",
    "end": "2313550"
  },
  {
    "text": "But-- do I have time to\nfind the demo or not? I should have thought of this. I've got a really cool demo,\nbut it might take me a minute",
    "start": "2313550",
    "end": "2320817"
  },
  {
    "text": "to find it. It's really good, though. Let me see if I can\nfind it quickly.",
    "start": "2320817",
    "end": "2326040"
  },
  {
    "text": "If I could find it quickly-- while I'm looking, does\nanybody have any questions about reverse mode?",
    "start": "2326040",
    "end": "2331065"
  },
  {
    "text": " It really is-- let me see if\nI know where this thing is.",
    "start": "2331065",
    "end": "2338540"
  },
  {
    "text": "STEVEN JOHNSON: The one\nthing to remind you of is the reason for this. So the forward mode basically--",
    "start": "2338540",
    "end": "2345540"
  },
  {
    "text": "suppose you have some function. So there's some cost\nof that function. Forward mode, the\ncost of that is proportional to the\ncost of the function",
    "start": "2345540",
    "end": "2352880"
  },
  {
    "text": "times the number of inputs. Reverse mode is proportional\nto the cost of the function",
    "start": "2352880",
    "end": "2358870"
  },
  {
    "text": "times the number of outputs. So if you have lots and lots\nof inputs and few outputs,",
    "start": "2358870",
    "end": "2364090"
  },
  {
    "text": "you want to use reverse mode. If you have lots and lots\nof outputs and a few inputs,",
    "start": "2364090",
    "end": "2370299"
  },
  {
    "text": "you want to use forward mode. If you have lots of both,\nthen it sucks to be you.",
    "start": "2370300",
    "end": "2376870"
  },
  {
    "text": "It's going to be expensive\neither way, right? And basically, what\nhappens is if you",
    "start": "2376870",
    "end": "2382930"
  },
  {
    "text": "have lots of inputs\nand a few outputs, then forward mode ends up\nrecomputing a lot of terms",
    "start": "2382930",
    "end": "2390200"
  },
  {
    "text": "as it explores all the paths,\nwhereas in reverse mode, you share computations as long\nas you can until things fan",
    "start": "2390200",
    "end": "2398420"
  },
  {
    "text": "out. That's the intuitive thing. The other perspective--\nthe explicit perspective",
    "start": "2398420",
    "end": "2404200"
  },
  {
    "text": "is if you write it as a\nproduct of Jacobian matrices, then basically you\nwant to arrange it so if you only have\none output, then you",
    "start": "2404200",
    "end": "2411530"
  },
  {
    "text": "have a row vector on the left. And you just want to do vector-- row vector matrix\nproducts are cheap.",
    "start": "2411530",
    "end": "2416720"
  },
  {
    "text": "Matrix-matrix products\nare expensive. We did that perspective before. But that perspective\nis a little harder",
    "start": "2416720",
    "end": "2422090"
  },
  {
    "text": "to write down once you start\ngetting general graphs. But it's the same\nbasic idea, that you",
    "start": "2422090",
    "end": "2427460"
  },
  {
    "text": "want to arrange it so that\nyou're multiplying matrices times vector-- Jacobians times vectors\nand not Jacobians",
    "start": "2427460",
    "end": "2432770"
  },
  {
    "text": "times other matrix Jacobians.",
    "start": "2432770",
    "end": "2438380"
  },
  {
    "text": "PROFESSOR: I think I found it. And there's also something else\nI can show you related to--",
    "start": "2438380",
    "end": "2445415"
  },
  {
    "text": " well, maybe not.",
    "start": "2445415",
    "end": "2451890"
  },
  {
    "text": "So regarding the\nJacobians, I think it's instructive and\nmaybe not obvious.",
    "start": "2451890",
    "end": "2458360"
  },
  {
    "text": "How do you turn this picture\ninto that Jacobian point",
    "start": "2458360",
    "end": "2463400"
  },
  {
    "text": "of view? Or even if these are all\nvector-valued or matrix-valued functions, it gets a little bit\nconfusing because what you have",
    "start": "2463400",
    "end": "2472370"
  },
  {
    "text": "to do is actually-- you have to put all\nthe variables together to be able to write down.",
    "start": "2472370",
    "end": "2478010"
  },
  {
    "text": "So you get a very\nsparse Jacobian. I mean, maybe this could have\nbeen a homework exercise.",
    "start": "2478010",
    "end": "2483350"
  },
  {
    "text": "Maybe we should remember\nthis for next year. But turn this, or\nsomething like this, into a matrix\nmultiply of Jacobians.",
    "start": "2483350",
    "end": "2491000"
  },
  {
    "text": "And see what that looks like. I think it's not so obvious\nthe first time you see that. In fact, I remember being\na little bit confused",
    "start": "2491000",
    "end": "2497480"
  },
  {
    "text": "because I was trying to\ncompare this viewpoint with the Jacobian viewpoint. And in the end, the\nmathematics is the same.",
    "start": "2497480",
    "end": "2503690"
  },
  {
    "text": "But it's not really\nobvious at first. ",
    "start": "2503690",
    "end": "2509369"
  },
  {
    "text": "But regarding the\nnumber of outputs",
    "start": "2509370",
    "end": "2514680"
  },
  {
    "text": "versus the number\nof inputs, I think it is sort of interesting. Let me just draw one\nquick example that I think is very illustrative with\nthe graph point of view.",
    "start": "2514680",
    "end": "2522250"
  },
  {
    "text": "So suppose I could do\nthis just by pathway.",
    "start": "2522250",
    "end": "2528270"
  },
  {
    "text": "Maybe this is enough right here. Maybe this is enough. So let me just put the--",
    "start": "2528270",
    "end": "2533833"
  },
  {
    "text": "I don't even need to\nput the nodes down. Let me just put-- I'm just going to call\nthese things a, b, c, and d.",
    "start": "2533833",
    "end": "2542880"
  },
  {
    "text": "And your goal in life,\nyour only goal in life-- this could be done all-- no calculus need to be\nmentioned, purely graph theory",
    "start": "2542880",
    "end": "2549540"
  },
  {
    "text": "question. Your goal is to calculate-- these are your sources.",
    "start": "2549540",
    "end": "2554553"
  },
  {
    "text": "I won't even say\n\"inputs\" anymore. I'll just say \"sources.\" This is a source,\nand this is a sinc.",
    "start": "2554553",
    "end": "2560130"
  },
  {
    "text": "And I just want all of\nthe products of the graph rates from source to sinc. And in other words, the\nanswer I want you to give me",
    "start": "2560130",
    "end": "2567540"
  },
  {
    "text": "is acd and bcd. Your only goal in life\nis to give me that.",
    "start": "2567540",
    "end": "2574640"
  },
  {
    "text": "So the obvious first\nway, the naive way, is, all right, I'll\nstart at this source,",
    "start": "2574640",
    "end": "2580180"
  },
  {
    "text": "and I'll compute a, and\nthen I'll multiply it by c, And then I'll multiply it by d.",
    "start": "2580180",
    "end": "2586090"
  },
  {
    "text": "Or I could start over here\nright, and I'll start with b, and I'll multiply by c,\nand I'll multiply by d.",
    "start": "2586090",
    "end": "2593319"
  },
  {
    "text": "And if you count, I\ndid four multiplies. But if you want to do\nit the reverse way--",
    "start": "2593320",
    "end": "2599320"
  },
  {
    "text": "if you want to do it the\nreverse way, I could do d, and I could multiply by c.",
    "start": "2599320",
    "end": "2605050"
  },
  {
    "text": "And I could take this result,\nand I can go in two ways on it. Now, I can multiply this by a--",
    "start": "2605050",
    "end": "2611080"
  },
  {
    "text": "so a times this, a times this\nresult. Or I could go b-- I could reuse.",
    "start": "2611080",
    "end": "2616630"
  },
  {
    "text": "And now, all of a\nsudden, what do I have? I have three products\ninstead of four.",
    "start": "2616630",
    "end": "2624170"
  },
  {
    "text": "So this is not a bad way to see\nwhy reverse mode could possibly",
    "start": "2624170",
    "end": "2629990"
  },
  {
    "text": "be better than forward mode\nwithout thinking about matrices and whatnot. ",
    "start": "2629990",
    "end": "2636237"
  },
  {
    "text": "This is a little bit\nlike-- for those of you who know about\ndynamic programming, where people talk about reuse\nof precomputed quantities,",
    "start": "2636237",
    "end": "2642820"
  },
  {
    "text": "this is what's going on here. When you start moving\nfrom right to left, if you have a lot of sources\nand maybe only one sinc,",
    "start": "2642820",
    "end": "2648940"
  },
  {
    "text": "which is typical in\nmachine learning, there's a lot of quantities\nthat you can reuse. So it's kind of nuts to go a\ntimes c times d and b times",
    "start": "2648940",
    "end": "2659580"
  },
  {
    "text": "c times d when you can just\nstore the result of c times d and then just do the\ntwo separate multiplies.",
    "start": "2659580",
    "end": "2664859"
  },
  {
    "text": "And, maybe, I think\nthis gives you-- to me, this gives the best view\nas to why reverse mode could",
    "start": "2664860",
    "end": "2673530"
  },
  {
    "text": "be very, very valuable\ncompared-- without derivatives, without matrices, just\nthis simple example,",
    "start": "2673530",
    "end": "2679050"
  },
  {
    "text": "I think, kind of does\nthe trick very nicely. It's saying the same thing\nthat Steven was saying.",
    "start": "2679050",
    "end": "2684940"
  },
  {
    "text": "All right. I found this thing. Now let's just see if it works. Yeah, if you wouldn't mind. ",
    "start": "2684940",
    "end": "2693050"
  },
  {
    "text": "I haven't looked\nat this in a while. But it was kind of\ncool when it worked. So sorry I haven't checked. I should have checked before.",
    "start": "2693050",
    "end": "2698840"
  },
  {
    "start": "2698840",
    "end": "2703950"
  },
  {
    "text": "But here, let's see. ",
    "start": "2703950",
    "end": "2712530"
  },
  {
    "text": "Do we have the two? Did this thing come out? ",
    "start": "2712530",
    "end": "2718859"
  },
  {
    "text": "OK. So this is really cute. So let's see. I think the computation\nthat's being seen here,",
    "start": "2718860",
    "end": "2726547"
  },
  {
    "text": "I think-- is this up right here? 2x-- yeah, 2x is going to get-- 2 and x are going to get\nmultiplied, the black numbers,",
    "start": "2726547",
    "end": "2733260"
  },
  {
    "text": "and then times y. And then we're going\nto have a plus. And here we have the\nminus of x and 1 squared.",
    "start": "2733260",
    "end": "2740640"
  },
  {
    "text": " So the actual computation\nthat you see here",
    "start": "2740640",
    "end": "2745850"
  },
  {
    "text": "is exactly what's in\nthese parentheses. And now let's see what.",
    "start": "2745850",
    "end": "2751955"
  },
  {
    "text": "Are we going to do are we doing\nforward mode or backwards mode? Let's take a quick look. So let me just see\nhow this works.",
    "start": "2751955",
    "end": "2760320"
  },
  {
    "text": "Sorry, I should have looked at\nthis, but I forgot I had it. Oh. So I think in red,\nwe're just going",
    "start": "2760320",
    "end": "2767400"
  },
  {
    "text": "to assume the variables\nare x equals 3-- so first we're just going\nto do the expression,",
    "start": "2767400",
    "end": "2773040"
  },
  {
    "text": "without any derivatives. So we're going to take x\nto be 3 for whatever reason and y to be 5.",
    "start": "2773040",
    "end": "2779045"
  },
  {
    "text": "And then we have\nthese constants. So 2 is 2, and 1 is 1. So we're just going to take\nx to be 3 and y to be 5.",
    "start": "2779045",
    "end": "2784440"
  },
  {
    "text": "Oh, if x equals\n3 and y equals 5, then, OK, the derivatives are--",
    "start": "2784440",
    "end": "2791430"
  },
  {
    "text": "the derivatives are 14 and 6. So that's where we want to go. All right, so let's\ntake the forward pass.",
    "start": "2791430",
    "end": "2796470"
  },
  {
    "text": "So 2 times 3 is 6. 6 times 5 is 30. Let's see.",
    "start": "2796470",
    "end": "2801510"
  },
  {
    "text": "I think we're going to do this\nminus next, I would imagine. So 3 minus 1 is 2. There it is. 2 squared is 4.",
    "start": "2801510",
    "end": "2806940"
  },
  {
    "text": "And let's add 30 plus 4 is 4. OK, so now what's\ngoing to happen next?",
    "start": "2806940",
    "end": "2812795"
  },
  {
    "text": "Hopefully, we're\ngoing to start-- OK, we're going to\nstart the reverse pass. So the answer to this\ncomputation is 34.",
    "start": "2812795",
    "end": "2820660"
  },
  {
    "text": "That's the z that I've been\ntalking about, all right? And now I want you to\njust see the reverse pass.",
    "start": "2820660",
    "end": "2826090"
  },
  {
    "text": "And so we always start out as 1. I think that's what's\nbehind over here.",
    "start": "2826090",
    "end": "2832990"
  },
  {
    "text": "The funny thing is you can get\ngood at doing this by hand. I mean, it's kind of\nactually not a bad-- I'm not sure I'm\ncompletely there yet,",
    "start": "2832990",
    "end": "2839140"
  },
  {
    "text": "but I have done this\nin classes where I would take a\nlittle computation and do reverse mode. But it's also easy to\nget a little confused.",
    "start": "2839140",
    "end": "2845210"
  },
  {
    "text": "So it's very dangerous. OK, so let's see. So we have a plus, OK?",
    "start": "2845210",
    "end": "2850420"
  },
  {
    "text": "So when you have a plus, then-- these derivatives are\nall starting out at 0.",
    "start": "2850420",
    "end": "2858310"
  },
  {
    "text": "So what's going to happen-- what's going to\nhappen for this plus? What's going to be the\nsecond number here and here?",
    "start": "2858310",
    "end": "2866623"
  },
  {
    "text": "I haven't done it yet. But if you're following\nhow reverse mode works, what will be the\nderivative here?",
    "start": "2866623",
    "end": "2875640"
  },
  {
    "text": "So what should be the\nnumbers in green as soon as I press the button here and here?",
    "start": "2875640",
    "end": "2881089"
  },
  {
    "text": "Do you see what that is? STEVEN JOHNSON: I heard\nsomebody whisper 1. PROFESSOR: Yeah,\nboth of them are 1.",
    "start": "2881090",
    "end": "2887440"
  },
  {
    "text": "And one way to say it-- if\nyou don't remember what's going on here, you can remember\nthat the partial derivative",
    "start": "2887440",
    "end": "2897460"
  },
  {
    "text": "of the sum with respect to\nthis number is always 1 here. There's like a little 1-- just to copy the way it\nwas on the blackboard,",
    "start": "2897460",
    "end": "2904690"
  },
  {
    "text": "there's a 1 sitting\non this edge, and there's a 1\nsitting on the edge. It's the partial derivative\nof the sum with respect",
    "start": "2904690",
    "end": "2910180"
  },
  {
    "text": "to each of the two inputs. So this should just be\n1 each, and there it is.",
    "start": "2910180",
    "end": "2915610"
  },
  {
    "text": "OK, now let's go\na little fancier. Let's do this product.",
    "start": "2915610",
    "end": "2920859"
  },
  {
    "text": "If you remember how\nthe product works, what should I imagine\nis sitting on this edge?",
    "start": "2920860",
    "end": "2926430"
  },
  {
    "text": "What number here\nis on this edge? And what's on this edge? So the product\nrule for calculus--",
    "start": "2926430",
    "end": "2931858"
  },
  {
    "text": "it's the same old product rule. You just have to get used to\nit in this new circumstance.",
    "start": "2931858",
    "end": "2937450"
  },
  {
    "text": "So what goes here? The 5, and here is the 6, right?",
    "start": "2937450",
    "end": "2942920"
  },
  {
    "text": "So what we're going\nto do is we're going to go 5 times\nthe 1, add it to the 0, and we're going to get the 5.",
    "start": "2942920",
    "end": "2948935"
  },
  {
    "text": "And now here we're going\nto go 6 times the 1, and add it to the 0, and\nwe're going to get a 6.",
    "start": "2948935",
    "end": "2954440"
  },
  {
    "text": "And we have another multiply. So there's the 3 and the 2. So if I've got this right, we\nshould get the 15 and the 10.",
    "start": "2954440",
    "end": "2964310"
  },
  {
    "text": "Yeah, the 15 and 10 should\nshow up, and it does. And notice the 10, by\nthe way, showed up here",
    "start": "2964310",
    "end": "2969380"
  },
  {
    "text": "because it's the same variable. And so there's really-- in\nstorage, there's just one x.",
    "start": "2969380",
    "end": "2975380"
  },
  {
    "text": "So now what do we-- we\nneed to do the square. So the square-- we've\ngot the 1 here, right?",
    "start": "2975380",
    "end": "2982079"
  },
  {
    "text": "And the derivative of\nsquare is 2x, right? And so we would actually\nhave a 4 over here.",
    "start": "2982080",
    "end": "2987900"
  },
  {
    "text": "And so we have to\ntake 1 times the 4 and get a 4 if I did this right. Yep.",
    "start": "2987900",
    "end": "2993140"
  },
  {
    "text": "And now we have a minus. So we have a 1 and a minus 1.",
    "start": "2993140",
    "end": "2999300"
  },
  {
    "text": "The 4 times the 1 adds\nto the 10 and gives a 14. Yep. Oh, I like that, 10 plus 4.",
    "start": "2999300",
    "end": "3005030"
  },
  {
    "text": "And then this is 0 minus 4. And there we go. And then we actually have--",
    "start": "3005030",
    "end": "3011730"
  },
  {
    "text": "the derivative with respect\nto x of this quantity z,",
    "start": "3011730",
    "end": "3019410"
  },
  {
    "text": "apparently, is 14 and 6. So we've got the 14 over\nhere because we just",
    "start": "3019410",
    "end": "3024840"
  },
  {
    "text": "did it with respect to the x. Oh, the y is there, too, the 6. Yeah, the y is there, too.",
    "start": "3024840",
    "end": "3030540"
  },
  {
    "text": "OK, so this is-- I mean, if you guys want\nthis, I could give you-- we can link this.",
    "start": "3030540",
    "end": "3036390"
  },
  {
    "text": "But I sort of go through here-- we're out of time now, but\nwe actually talk about--",
    "start": "3036390",
    "end": "3043200"
  },
  {
    "text": "you can see the whole code\nfrom beginning to end. So it doesn't-- I don't know. Reverse mode seems more\nmysterious, I think,",
    "start": "3043200",
    "end": "3048570"
  },
  {
    "text": "than forward mode. But we actually have the\nwhole thing self-contained in one notebook here\nwhere you could actually",
    "start": "3048570",
    "end": "3054630"
  },
  {
    "text": "see the building up of the\ntree and actually how it works. And so we will-- in fact, you could actually\nsee this tree coming up",
    "start": "3054630",
    "end": "3061530"
  },
  {
    "text": "in a data structure. Yeah, so I'll link to this\nso you can see how it works.",
    "start": "3061530",
    "end": "3069190"
  },
  {
    "text": "But I think we're going\nto wrap it up now. Steven's going to make a list\nof things we haven't shown. ",
    "start": "3069190",
    "end": "3078109"
  },
  {
    "text": "Do you want me to-- do you want to start talking,\nand I could do that, Steven?",
    "start": "3078110",
    "end": "3083760"
  },
  {
    "text": "I'll get the lights on. STEVEN JOHNSON:\nSo, yeah, so it'd",
    "start": "3083760",
    "end": "3089600"
  },
  {
    "text": "be great if we had another\ncouple of weeks in this course. It's actually amazing\nhow much there",
    "start": "3089600",
    "end": "3095160"
  },
  {
    "text": "is to say just about\ntaking derivatives, even though you\ncome in thinking you",
    "start": "3095160",
    "end": "3100560"
  },
  {
    "text": "know how to take derivatives,\nand there's so much left. PROFESSOR: The problem is linear\nalgebra was evolved lately",
    "start": "3100560",
    "end": "3107130"
  },
  {
    "text": "in math departments. People thought it was all easy. STEVEN JOHNSON: Yeah. PROFESSOR: And so they\nactually never pursued it,",
    "start": "3107130",
    "end": "3113132"
  },
  {
    "text": "and they missed the boat. I really believe that. STEVEN JOHNSON: So, for example,\none very practical thing",
    "start": "3113132",
    "end": "3119130"
  },
  {
    "text": "that I was hoping to cover,\nbut we didn't get to, is how to do these\ncustom AD rules.",
    "start": "3119130",
    "end": "3126150"
  },
  {
    "text": "So suppose you have a box. This is your program,\nor maybe just",
    "start": "3126150",
    "end": "3131400"
  },
  {
    "text": "a subroutine in your program. Or let me just say a\nfunction that takes in an x1,",
    "start": "3131400",
    "end": "3139529"
  },
  {
    "text": "and then say this is\na vector, and an x2, or let's say x and y--",
    "start": "3139530",
    "end": "3147920"
  },
  {
    "text": "x and y-- and outputs,\nsay, an f and a g.",
    "start": "3147920",
    "end": "3155780"
  },
  {
    "text": "And then suppose that AD fails.  PROFESSOR: As it did in the\nfirst version of the homework.",
    "start": "3155780",
    "end": "3162920"
  },
  {
    "text": "STEVEN JOHNSON: As it\ndid in the first version. You called out to\nsome [INAUDIBLE] or something that doesn't\nknow how to differentiate. And there are,\nunfortunately, lots of things",
    "start": "3162920",
    "end": "3169703"
  },
  {
    "text": "that these systems don't\nknow how to differentiate. Or maybe it differentiates,\nbut it differentiates it very,",
    "start": "3169703",
    "end": "3174839"
  },
  {
    "text": "very badly. So that happens in\na very inefficient-- that can happen if this\nfunction is computing something approximately.",
    "start": "3174840",
    "end": "3180860"
  },
  {
    "text": "And it spends a lot of effort\ntrying to exactly differentiate the error in the approximations\ninstead of realizing,",
    "start": "3180860",
    "end": "3186660"
  },
  {
    "text": "oh, we're really\ndoing an integral, and we're doing it accurate\nto 13 decimal places.",
    "start": "3186660",
    "end": "3191750"
  },
  {
    "text": "I don't need to get the\nderivative of the last three digits.",
    "start": "3191750",
    "end": "3198350"
  },
  {
    "text": "And so what you do is\nif you're doing forward mode, what you have to\ndo is supply a thing",
    "start": "3198350",
    "end": "3209940"
  },
  {
    "text": "that computes, basically,\na Jacobian vector product,",
    "start": "3209940",
    "end": "3221220"
  },
  {
    "text": "a product, a JVP. It's also called an\nfrule in chain rules.",
    "start": "3221220",
    "end": "3231420"
  },
  {
    "text": "It's also called a pushforward,\nI think this thing-- PROFESSOR: Yeah,\ndifferential geometry, yeah. STEVEN JOHNSON: So some\nthings use this terminology.",
    "start": "3231420",
    "end": "3238900"
  },
  {
    "text": "It comes from\ndifferential geometry, and it's called a pushforward. And so basically,\nyou're supplying--",
    "start": "3238900",
    "end": "3245220"
  },
  {
    "text": "you just write a\nprogram that computes f, partial f, partial x times dx.",
    "start": "3245220",
    "end": "3252870"
  },
  {
    "text": "And it computes a partial f,\npartial y dy, given dx dy.",
    "start": "3252870",
    "end": "3263710"
  },
  {
    "text": "So you implement this\nyourself by-- you know what your\nfunction is computing, and you work out manually\nwith the derivative is.",
    "start": "3263710",
    "end": "3270630"
  },
  {
    "text": "And if you're doing it\nin reverse mode, which",
    "start": "3270630",
    "end": "3278299"
  },
  {
    "text": "is more common if\nyou're doing any kind of optimization\nmachine learning, you have to go in\nthe other direction.",
    "start": "3278300",
    "end": "3284450"
  },
  {
    "text": "You have to provide a vector-- and I should say a row\nVector Jacobian Product,",
    "start": "3284450",
    "end": "3297059"
  },
  {
    "text": "which is also called a VJP\nor an rrule in reverse rule,",
    "start": "3297060",
    "end": "3305430"
  },
  {
    "text": "or a pullback in that funny\ndifferential geometry notation.",
    "start": "3305430",
    "end": "3310960"
  },
  {
    "text": "And so basically,\nequivalently, you're effectively providing\na function that computes partial f, partial\nx, that Jacobian transposed,",
    "start": "3310960",
    "end": "3322500"
  },
  {
    "text": "times a vector u and partial--",
    "start": "3322500",
    "end": "3329000"
  },
  {
    "text": "sorry, that should\nhave been partial-- yeah, well same thing for--",
    "start": "3329000",
    "end": "3334170"
  },
  {
    "text": "and partial f,\npartial y, transposed, times u for an arbitrary\nu, and similarly for g.",
    "start": "3334170",
    "end": "3346140"
  },
  {
    "text": "PROFESSOR: And maybe just\nto say that what Steven's writing right now are exactly\nthe rules in those boxes,",
    "start": "3346140",
    "end": "3351600"
  },
  {
    "text": "except he's being\ncareful about the fact that this is the\nmultivariate version-- STEVEN JOHNSON: Yeah. PROFESSOR: --when\nI was like, oh,",
    "start": "3351600",
    "end": "3356770"
  },
  {
    "text": "I'm just going to\ndo the scalars. STEVEN JOHNSON: And\nso, in principle, this is straightforward. In practice, you need to think\na little bit about the rules",
    "start": "3356770",
    "end": "3365020"
  },
  {
    "text": "for what this even means. So, for example,\nthese systems are designed-- written in such a\nway as to be quite general.",
    "start": "3365020",
    "end": "3373220"
  },
  {
    "text": "And so because of that, the\ninterfaces for supplying these can sometimes be a\nlittle bit confusing",
    "start": "3373220",
    "end": "3378520"
  },
  {
    "text": "when you're not used to it. Another thing that I would have\nliked to have time to cover",
    "start": "3378520",
    "end": "3387680"
  },
  {
    "text": "is talk about complex numbers. ",
    "start": "3387680",
    "end": "3397710"
  },
  {
    "text": "So, for example,\nsuppose you have f of z where z is x plus\niy is a complex number.",
    "start": "3397710",
    "end": "3408770"
  },
  {
    "text": "Suppose you have that equals z\nsquared, the magnitude squared.",
    "start": "3408770",
    "end": "3416110"
  },
  {
    "text": "So this is the same thing as\nz times its complex conjugate. So if you take complex analysis,\nthey'll say, OK, this function,",
    "start": "3416110",
    "end": "3425170"
  },
  {
    "text": "you can't differentiate\nat the end. It doesn't have a\nderivative with respect to z in the usual sense.",
    "start": "3425170",
    "end": "3432650"
  },
  {
    "text": "But, of course, if you\nchange z by a little bit,",
    "start": "3432650",
    "end": "3438109"
  },
  {
    "text": "the output does change\nby a little bit. And if you look, for\nexample, in terms of x and y, the real\nand imaginary parts,",
    "start": "3438110",
    "end": "3445220"
  },
  {
    "text": "this is a perfectly\ndifferentiable function of x and y.",
    "start": "3445220",
    "end": "3450240"
  },
  {
    "text": "And so suppose you're-- there are lots and\nlots of problems",
    "start": "3450240",
    "end": "3455460"
  },
  {
    "text": "that are very\nnaturally expressed in terms of complex\nnumbers, especially in physics for example,\nphysical quantities.",
    "start": "3455460",
    "end": "3460830"
  },
  {
    "text": "You want to be\ncomplex, and you want to optimize some\nfunction of them, some real valued function.",
    "start": "3460830",
    "end": "3467820"
  },
  {
    "text": "And so, of course, if\nyou split everything into its real and\nimaginary parts, it becomes differentiable\nin the usual way.",
    "start": "3467820",
    "end": "3473579"
  },
  {
    "text": "And then you can\ntake derivatives. But this is a very\nawkward way of--",
    "start": "3473580",
    "end": "3482945"
  },
  {
    "text": "if things are\nnaturally expressed in terms of complex numbers. PROFESSOR: At first it\ndoesn't seem awkward right, but you only realize\nlater that it's awkward.",
    "start": "3482945",
    "end": "3488515"
  },
  {
    "text": "STEVEN JOHNSON: Yeah. PROFESSOR: I mean, it seems\nkind of natural at first. STEVEN JOHNSON: It\nseems natural at first, but then it just turns\ninto-- because then,",
    "start": "3488515",
    "end": "3494220"
  },
  {
    "text": "basically, your code does not\nlook like your math anymore. It doesn't look like\nyour physical equations.",
    "start": "3494220",
    "end": "3500010"
  },
  {
    "text": "PROFESSOR: Right. Complex code, like z\ncubed, is much like-- other than all those-- STEVEN JOHNSON: It's like If you\nread Maxwell's original paper",
    "start": "3500010",
    "end": "3506940"
  },
  {
    "text": "on Maxwell's equations in 1865,\nhe didn't have vector notation. He just used a different\nletter of the alphabet",
    "start": "3506940",
    "end": "3512640"
  },
  {
    "text": "for every component\nof every field. And you have, like, 20 variable\nequations and 20 variables. So this is a version of that.",
    "start": "3512640",
    "end": "3519779"
  },
  {
    "text": "So now you really only have\none quantity that's complex, but now you have to\nhave two variables.",
    "start": "3519780",
    "end": "3527465"
  },
  {
    "text": "So if you just ask, what is df-- what is f of z plus dz\nminus f of z in terms of z--",
    "start": "3527465",
    "end": "3539520"
  },
  {
    "text": "this turns out to\nhave a perfectly-- it's basically z times z\nbar plus z times d z bar.",
    "start": "3539520",
    "end": "3553120"
  },
  {
    "text": "And so in general,\nit turns out what",
    "start": "3553120",
    "end": "3559810"
  },
  {
    "text": "you can do is you can\nwrite df as df dz times dz",
    "start": "3559810",
    "end": "3571000"
  },
  {
    "text": "plus df d z bar times d z bar.",
    "start": "3571000",
    "end": "3578500"
  },
  {
    "text": "And you treat these-- the notation is a\nlittle confusing because it looks\nlike you're treating z and z bar as independent\nvariables when of course",
    "start": "3578500",
    "end": "3585550"
  },
  {
    "text": "they're not. You should really think\nof this as a function of-- this is really a function\nof two variables.",
    "start": "3585550",
    "end": "3591890"
  },
  {
    "text": "This is like f of\na, b equals a times b where you just let a\nequals z and b equals z bar.",
    "start": "3591890",
    "end": "3601720"
  },
  {
    "text": "So you can think of it as a\nfunction of two variables, and at the end, you plug\nin the complex conjugates.",
    "start": "3601720",
    "end": "3607680"
  },
  {
    "text": "And it's nice to-- so everything ends up\nbeing perfectly sensible. It's equivalent in some\nsense to differentiate",
    "start": "3607680",
    "end": "3613974"
  },
  {
    "text": "in [? respect of ?] the\nreal and imaginary parts. PROFESSOR: The\nway I look at it-- I don't know if\nthis helps or hurts. But in the complex plane, dx is\neastward and dy is northward.",
    "start": "3613975",
    "end": "3623530"
  },
  {
    "text": "And here you have dz and\nd z bar are these two symmetric directions. But it's still-- you\nneed two dimensions",
    "start": "3623530",
    "end": "3629830"
  },
  {
    "text": "to describe what's going on. So that's one way to look at it. STEVEN JOHNSON: So then you can\ngo through and work out, what",
    "start": "3629830",
    "end": "3636370"
  },
  {
    "text": "does this mean for gradients? What does this mean\nfor Newton methods?",
    "start": "3636370",
    "end": "3642849"
  },
  {
    "text": "All of those kinds of things. And so the name for this is-- PROFESSOR: Does anyone\nin machine learning",
    "start": "3642850",
    "end": "3648610"
  },
  {
    "text": "ever use complex numbers? STEVEN JOHNSON: I\ndon't know if it's very common in machine learning.",
    "start": "3648610",
    "end": "3654255"
  },
  {
    "text": "Maybe if you're doing FFTs\nor something like that-- PROFESSOR: Oh, maybe. STEVEN JOHNSON: --then\nit would be natural. But this is also called\nthe Wirtinger calculus--",
    "start": "3654255",
    "end": "3664300"
  },
  {
    "text": "Wirting-- do you actually\nknow what the C and the R stand for in CR calculus? PROFESSOR: Not a clue.",
    "start": "3664300",
    "end": "3669597"
  },
  {
    "text": " STEVEN JOHNSON: So\nif you ever need to optimize a function\nof complex variables,",
    "start": "3669597",
    "end": "3677230"
  },
  {
    "text": "it turns out there's a\nperfectly sensible way to do it that still\nworks when you have",
    "start": "3677230",
    "end": "3683085"
  },
  {
    "text": "complex conjugates\nand real parts and imaginary parts that you\ncan't differentiate normally.",
    "start": "3683085",
    "end": "3688720"
  },
  {
    "text": "So just look this up. PROFESSOR: That's\nwhat I'm doing. STEVEN JOHNSON: You\ndo not have to drop into separate real and\nimaginary parts, which",
    "start": "3688720",
    "end": "3694855"
  },
  {
    "text": "is always an option. But it can be a very\nawkward and unnatural option if that's not the language\nthat your problem is naturally",
    "start": "3694855",
    "end": "3703270"
  },
  {
    "text": "expressed in. So there's more things. I know the first time we taught\nthis course last January,",
    "start": "3703270",
    "end": "3712150"
  },
  {
    "text": "Alan had ambitions of getting\ninto exterior calculus and some differential geometry.",
    "start": "3712150",
    "end": "3717715"
  },
  {
    "text": "PROFESSOR: It's not so bad. STEVEN JOHNSON: It's not so bad. PROFESSOR: I could have done\nit in one half of one lecture.",
    "start": "3717715",
    "end": "3722980"
  },
  {
    "text": "But I didn't. STEVEN JOHNSON: Yeah,\nit's one of those things-- when we first started\nplanning this, I was like,",
    "start": "3722980",
    "end": "3728300"
  },
  {
    "text": "do we really have\nenough material to fill 16 hours of lectures? And then you realize,\noh, every little thing--",
    "start": "3728300",
    "end": "3735670"
  },
  {
    "text": "there's all these topics\nand sensitivity analysis, and they're all more\ncomplicated than-- PROFESSOR: So I don't think it's\nany of these things, Calculus",
    "start": "3735670",
    "end": "3742243"
  },
  {
    "text": "of Real Values, Calculus\nReadiness, which is an education\nterm for students who are ready for\ncalculus, Cost Reduced--",
    "start": "3742243",
    "end": "3747310"
  },
  {
    "text": "STEVEN JOHNSON:\nYeah, I've even seen it written as blackboard bold. So I think this is the clue.",
    "start": "3747310",
    "end": "3754570"
  },
  {
    "text": "CR, I've seen it\nwritten this way. So it's like the complex\nnumbers and the real numbers. I think it might be just a\nreference to those two sets",
    "start": "3754570",
    "end": "3765500"
  },
  {
    "text": "somehow. But you want to map\ncomplex derivatives into real derivatives\nor vice versa.",
    "start": "3765500",
    "end": "3774490"
  },
  {
    "text": "So, yeah, anyway, so this is-- there's a whole set of\nrules you can derive beyond this for CR calculus.",
    "start": "3774490",
    "end": "3783150"
  },
  {
    "text": "If the function is real, for\nexample, if the output is real, then these two terms have\nto be complex conjugates.",
    "start": "3783150",
    "end": "3789120"
  },
  {
    "text": "And so this is twice\nthe real part of that. If it's analytic,\nthen this time it's 0.",
    "start": "3789120",
    "end": "3795839"
  },
  {
    "text": "So if it has an ordinary\nderivative in the 18.04 sense,",
    "start": "3795840",
    "end": "3801990"
  },
  {
    "text": "in the complex analysis\nsense, then one of the terms drops out.",
    "start": "3801990",
    "end": "3807325"
  },
  {
    "text": "PROFESSOR: You don't think\nit's a chain rule of calculus? No, maybe not. STEVEN JOHNSON: Oh, yeah. PROFESSOR: Somebody\nthrew that out there.",
    "start": "3807325",
    "end": "3812708"
  },
  {
    "text": "But I don't think that's right. STEVEN JOHNSON: But\nanyway, if you google it, you can find notes\non these things. Alan, is there anything\nelse you wanted to come--",
    "start": "3812708",
    "end": "3818950"
  },
  {
    "text": "what else did we leave out? PROFESSOR: Oh, there's\nbazillions of things. But I think that's a pretty\ngood list right there. We can call it a day\nwith that, I think.",
    "start": "3818950",
    "end": "3826060"
  },
  {
    "text": "STEVEN JOHNSON: Yeah, yeah. There's so many more things. I mean, Alan did a little bit\non derivatives of eigenvalues",
    "start": "3826060",
    "end": "3833448"
  },
  {
    "text": "and so forth. But there's whole\npapers on how do you differentiate different\nmatrix factorizations and-- PROFESSOR: I wrote chapters\nabout this 20 years ago,",
    "start": "3833448",
    "end": "3840550"
  },
  {
    "text": "but I never did anything\nwith those chapters. And now, yeah, now\neverybody's discovering it. STEVEN JOHNSON: And there's\n[INAUDIBLE] open research",
    "start": "3840550",
    "end": "3846298"
  },
  {
    "text": "problems in how to\nefficiently take care of some of these things,\nespecially if some of the terms are sparse, and how do\nyou track that information",
    "start": "3846298",
    "end": "3855220"
  },
  {
    "text": "through the process to take\nfull advantage of the structure of the matrix. PROFESSOR: But hopefully,\nyou now all realize",
    "start": "3855220",
    "end": "3861585"
  },
  {
    "text": "that calculus is way more\ninteresting than your freshman teacher had you believe. STEVEN JOHNSON: Just\ntaking derivatives.",
    "start": "3861585",
    "end": "3867507"
  },
  {
    "text": "You think, oh, they\ntell you that, oh, taking derivatives is trivial. You learn these five rules, and\nthen you can handle everything.",
    "start": "3867507",
    "end": "3874560"
  },
  {
    "text": "PROFESSOR: And I think\nit's safe to say that most members of our department, they\ndon't think about these things.",
    "start": "3874560",
    "end": "3880280"
  },
  {
    "text": "They probably have never\ncome across these things, by and large, I think. In other words, it's not\nsomething that's-- it's coming",
    "start": "3880280",
    "end": "3886670"
  },
  {
    "text": "up more in computer science\nthan mathematics, I believe. I think that's the truth.",
    "start": "3886670",
    "end": "3891920"
  },
  {
    "text": "So if you mention\nmatrix calculus to many people in math, they--\nit may not mean too much, I suppose. I'm not sure.",
    "start": "3891920",
    "end": "3897832"
  },
  {
    "text": "STEVEN JOHNSON: I\nmean, computer science, computational science-- PROFESSOR: It's coming\nup a lot more these days. STEVEN JOHNSON: That's where\nyou end up differentiating--",
    "start": "3897832",
    "end": "3905666"
  },
  {
    "text": "I mean, you say, I know the\nrules for the derivatives, and now let me differentiate\nthe drag on an airplane wing",
    "start": "3905666",
    "end": "3911180"
  },
  {
    "text": "that I solved by\nNavier-Stokes equation. PROFESSOR: Well, give me that\nmachine learning gradient to move along.",
    "start": "3911180",
    "end": "3916640"
  },
  {
    "text": "STEVEN JOHNSON: And then\nyou realize it's not so easy to take derivatives. PROFESSOR: Right. All right. I think that's it.",
    "start": "3916640",
    "end": "3922280"
  },
  {
    "text": "STEVEN JOHNSON: OK. All right. PROFESSOR: So thanks, everybody. ",
    "start": "3922280",
    "end": "3929000"
  }
]