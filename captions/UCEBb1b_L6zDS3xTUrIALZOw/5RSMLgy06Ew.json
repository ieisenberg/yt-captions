[
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6520"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6520",
    "end": "13500"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13500",
    "end": "23529"
  },
  {
    "text": "PROFESSOR: OK, on Tuesday\nwe talked about sex, so today we're going\nto talk about marriage.",
    "start": "23530",
    "end": "32520"
  },
  {
    "text": "Now, in terms of\ngraph theory, marriage is expressed as a\nmatching problem,",
    "start": "32520",
    "end": "38970"
  },
  {
    "text": "and today we're going to talk\nabout a matching algorithm that",
    "start": "38970",
    "end": "44070"
  },
  {
    "text": "is used in all sorts\nof applications. It's used by online\ndating agencies to match compatible\npeople together.",
    "start": "44070",
    "end": "51720"
  },
  {
    "text": "It's used for\nassignment problems, for example, matching interns\nto hospitals on match day.",
    "start": "51720",
    "end": "58900"
  },
  {
    "text": "It's used for resource\nallocation problems, for example, load balancing\ntraffic on the internet.",
    "start": "58900",
    "end": "65018"
  },
  {
    "text": "And we'll talk about\nthe applications at the end of class. In its simplest form\nof a matching problem,",
    "start": "65019",
    "end": "71960"
  },
  {
    "text": "you have a graph where the\nedges represent compatibility. Two nodes can be paired\ntogether, or married,",
    "start": "71960",
    "end": "79290"
  },
  {
    "text": "and the goal is to\ncreate the maximum number of compatible pairs.",
    "start": "79290",
    "end": "84470"
  },
  {
    "text": "So let's define a\nmatching, given a graph, G,",
    "start": "84470",
    "end": "96090"
  },
  {
    "text": "with nodes, V, and\nedges, E. In matching,",
    "start": "96090",
    "end": "105829"
  },
  {
    "text": "you can think of it as\na collection of edges, or a subgraph of G where\nevery node has degree 1.",
    "start": "105830",
    "end": "118220"
  },
  {
    "text": "So everybody can be\nmarried just to one person. ",
    "start": "118220",
    "end": "133959"
  },
  {
    "text": "So let's draw an example,\nmaybe not put that edge in.",
    "start": "133960",
    "end": "156575"
  },
  {
    "text": " And let's label these nodes x1,\nx2, x3, x4, x5, x6, x7, and x8.",
    "start": "156575",
    "end": "174170"
  },
  {
    "text": "Now x1, x6 and x2, x5 is a\nmatching, so x1, x6 and x2,",
    "start": "174170",
    "end": "186630"
  },
  {
    "text": "x5 is a matching with two edges,\nso we say it has size two.",
    "start": "186630",
    "end": "193560"
  },
  {
    "start": "193560",
    "end": "199930"
  },
  {
    "text": "All right, so I can pair these\nguys up and pair these guys up.",
    "start": "199930",
    "end": "204989"
  },
  {
    "text": "Is there any bigger\nmatching in this graph? ",
    "start": "204990",
    "end": "211420"
  },
  {
    "text": "So I found one with\ntwo marriages, here and here, two edges. Yeah?",
    "start": "211420",
    "end": "216844"
  },
  {
    "text": "AUDIENCE: x1, x7. PROFESSOR: x1, x7. AUDIENCE: x2, x6. PROFESSOR: x2, x6.",
    "start": "216844",
    "end": "222990"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]. PROFESSOR: Good. All right, that's a\nmatching of size three. So I got three couples together.",
    "start": "222990",
    "end": "229840"
  },
  {
    "text": "Good. Can I make a bigger matching,\none with size four--",
    "start": "229840",
    "end": "238168"
  },
  {
    "text": "four marriages here?  No.",
    "start": "238168",
    "end": "244130"
  },
  {
    "text": "Why not? Can anybody give me a\nreason why it can't be done? ",
    "start": "244130",
    "end": "252480"
  },
  {
    "text": "Yeah? AUDIENCE: x8 and x7 would have\nto be matched with someone.",
    "start": "252480",
    "end": "260810"
  },
  {
    "text": "PROFESSOR: Yeah, so if-- Yeah? AUDIENCE: They could\nonly be paired with x1, but x1 can't be\npaired with both.",
    "start": "260810",
    "end": "265824"
  },
  {
    "text": "PROFESSOR: Good. If I were to have a\nmatching with four edges, well, there's only\neight nodes, so I'd",
    "start": "265824",
    "end": "272250"
  },
  {
    "text": "have to have all eight nodes\ninvolved in the matching. And that means x7 and x8 would\nhave to be in the matching,",
    "start": "272250",
    "end": "278919"
  },
  {
    "text": "but they could only\nbe paired with x1, and so it's not\npossible to do that.",
    "start": "278920",
    "end": "285054"
  },
  {
    "text": "All right, so there\nis no matching of size four in this graph. Three is the best I can do.",
    "start": "285054",
    "end": "290310"
  },
  {
    "text": "Now, when you get every\nnode in a matching, then it's called a\nperfect matching.",
    "start": "290310",
    "end": "296460"
  },
  {
    "text": "And so in this case, it doesn't\nexist, but sometimes it does. ",
    "start": "296460",
    "end": "305010"
  },
  {
    "text": "So a matching is\nperfect if it has",
    "start": "305010",
    "end": "315460"
  },
  {
    "text": "size half the number of nodes.",
    "start": "315460",
    "end": "321780"
  },
  {
    "text": "In other words, if the\nnumber of edges is v over 2, then every node is\nin the matching. ",
    "start": "321780",
    "end": "329389"
  },
  {
    "text": "All right, so that one doesn't\nhave a perfect matching. What about this graph? ",
    "start": "329389",
    "end": "336270"
  },
  {
    "text": "So I got b1, b2, b3,\nb4, g1, g2, g3, g4,",
    "start": "336270",
    "end": "347740"
  },
  {
    "text": "and I'll put in the\ncompatibility edges here. ",
    "start": "347740",
    "end": "364510"
  },
  {
    "text": "OK, Does that graph\nhave a perfect matching?",
    "start": "364510",
    "end": "371040"
  },
  {
    "text": "Can you pair up\nevery boy with a girl here so that everybody is\ncompatible with their mate,",
    "start": "371040",
    "end": "377610"
  },
  {
    "text": "and you have just one spouse? Can you do that? ",
    "start": "377610",
    "end": "384716"
  },
  {
    "text": "AUDIENCE: Yes. PROFESSOR: Yeah? All right, who do\nI start pairing up? AUDIENCE: 1, 1. AUDIENCE: 1, 1.",
    "start": "384717",
    "end": "392130"
  },
  {
    "text": "AUDIENCE: b2, g3. PROFESSOR: b2, g3.  AUDIENCE: b3, g2.",
    "start": "392130",
    "end": "397470"
  },
  {
    "text": "PROFESSOR: b3, g2 AUDIENCE: b4, g4. PROFESSOR: There we go. All right, so there is a\nperfect matching in this graph.",
    "start": "397470",
    "end": "404100"
  },
  {
    "text": "Very good. Now, in some cases,\nsome pairings",
    "start": "404100",
    "end": "410790"
  },
  {
    "text": "are more desirable than\nothers, and this can be represented with a weight. And so you might have\na weighted graph where",
    "start": "410790",
    "end": "417180"
  },
  {
    "text": "every edge has a weight on it. For example, we might\nweight b1, g2 with 5,",
    "start": "417180",
    "end": "427509"
  },
  {
    "text": "and b1, g1 gets a 10. And usually when you\nsee weighted graphs",
    "start": "427510",
    "end": "433290"
  },
  {
    "text": "in the matching\ncontext, a lower weight means it's more desirable, so\nthat b1 and g2 would get along",
    "start": "433290",
    "end": "441000"
  },
  {
    "text": "better than b1 and g1. And then the goal is to find a\nmatching with minimum weight.",
    "start": "441000",
    "end": "447740"
  },
  {
    "text": " Now, the weight of a\nmatching, call it M,",
    "start": "447740",
    "end": "464740"
  },
  {
    "text": "is the sum of the weights\non the edges of M. Now,",
    "start": "464740",
    "end": "481400"
  },
  {
    "text": "usually when you're looking\nat weighted matchings, you require yourself to\nhave a perfect matching so",
    "start": "481400",
    "end": "488130"
  },
  {
    "text": "that everybody gets paired up. And often in that case, you'll\nsee all the edges present,",
    "start": "488130",
    "end": "493830"
  },
  {
    "text": "some of them with very big\nweights, maybe even infinity if they just can't\nbe put together.",
    "start": "493830",
    "end": "498860"
  },
  {
    "text": "Because otherwise you just say,\ndon't match anybody together, and you have weight zero. So for when you look at\nminimum weight matchings,",
    "start": "498860",
    "end": "505620"
  },
  {
    "text": "you're looking for the perfect\nmatching with minimum weight. ",
    "start": "505620",
    "end": "512450"
  },
  {
    "text": "So we say a min-weight\nmatching for a graph, G,",
    "start": "512450",
    "end": "527180"
  },
  {
    "text": "is a perfect matching for\nG with the minimum weight,",
    "start": "527180",
    "end": "539410"
  },
  {
    "text": "overall perfect matchings. ",
    "start": "539410",
    "end": "548560"
  },
  {
    "text": "Let's try an example. ",
    "start": "548560",
    "end": "554140"
  },
  {
    "text": "Say I've got this graph,\nand call this node Brad,",
    "start": "554140",
    "end": "561780"
  },
  {
    "text": "here's Billy Bob, here's\nJennifer, and then Angelina.",
    "start": "561780",
    "end": "568626"
  },
  {
    "text": " And the weights are as\nfollows-- I put a 10 here,",
    "start": "568626",
    "end": "574870"
  },
  {
    "text": "a 10 down here, a 5\nhere, because Brad really likes Angelina and vice versa,\nand a 16 between Jennifer",
    "start": "574870",
    "end": "582790"
  },
  {
    "text": "and Billy Bob. What is the weight of the min\nweight matching in that graph?",
    "start": "582790",
    "end": "590980"
  },
  {
    "text": "20. And who gets paired\nwith who there? ",
    "start": "590980",
    "end": "597680"
  },
  {
    "text": "Who does Brad get\nhooked up with? AUDIENCE: Jan. PROFESSOR: Jan, and that\nleaves Billy Bob with Angelina,",
    "start": "597680",
    "end": "608480"
  },
  {
    "text": "and the weight is 20. So even though Brad really likes\nAngelina, if I go that route,",
    "start": "608480",
    "end": "615700"
  },
  {
    "text": "my weight is 21,\nwhich is not as good. So the min-weight matching\nwould be this one.",
    "start": "615700",
    "end": "621240"
  },
  {
    "text": " OK. Now, it turns out that\nfinding the maximum matching--",
    "start": "621240",
    "end": "628890"
  },
  {
    "text": "the maximum number of edges\nyou can put together-- or finding the minimum\nweight perfect matching,",
    "start": "628890",
    "end": "635580"
  },
  {
    "text": "those are both solvable,\ntractable problems. You don't get a million\ndollar prize for solving that.",
    "start": "635580",
    "end": "641910"
  },
  {
    "text": "The algorithm is run in\nquadratic to cubic time, so not terrible, but\nthey're not NP-complete,",
    "start": "641910",
    "end": "649330"
  },
  {
    "text": "so people know how to do it. Now, they are\npretty complicated, so we're not going to\ncover them in 6042.",
    "start": "649330",
    "end": "655310"
  },
  {
    "text": "What we're going to do is look\nat a slightly different version of the problem that\nactually turns out",
    "start": "655310",
    "end": "660414"
  },
  {
    "text": "to be more useful in\npractice, because there's a very nice algorithm for it. Now, in the version of\nthe problem that we're",
    "start": "660414",
    "end": "666980"
  },
  {
    "text": "going to look at, everybody\nhas preferences-- a preference list.",
    "start": "666980",
    "end": "672560"
  },
  {
    "text": "It's not weighted, but\nit's a priority order of who they want to get\nmated to, or matched up with.",
    "start": "672560",
    "end": "679540"
  },
  {
    "text": "So it would look\nnot quite like that, but it would look like this. ",
    "start": "679540",
    "end": "688630"
  },
  {
    "text": "So Brad, Billy Bob, Jennifer,\nand Angelina-- same players,",
    "start": "688630",
    "end": "700480"
  },
  {
    "text": "but what we do is we know that\nBrad really likes Angelina, and Angelina really likes Brad,\nso they are first choices,",
    "start": "700480",
    "end": "708440"
  },
  {
    "text": "at least was. Number two for Brad is Jennifer,\nbut Jennifer really likes Brad",
    "start": "708440",
    "end": "714990"
  },
  {
    "text": "first, and Billy Bob second. Billy Bob likes Angelina\nfirst, then Jennifer.",
    "start": "714990",
    "end": "722200"
  },
  {
    "text": "Angelina thinks Billy\nBob is number two. So it's not\nnecessarily symmetric.",
    "start": "722200",
    "end": "728740"
  },
  {
    "text": "Jennifer has Brad\nas the first choice. Brad has Angelina\nas the first choice. All right?",
    "start": "728740",
    "end": "733850"
  },
  {
    "text": "So it's an asymmetric situation. Now, what would happen if we set\nup our marriages so that Brad",
    "start": "733850",
    "end": "741959"
  },
  {
    "text": "is married to Jen, and Billy\nBob is married to Angelina? ",
    "start": "741960",
    "end": "748279"
  },
  {
    "text": "What might happen if we\nmade those as our pairings, and we put them on a desert\nisland, all four of them?",
    "start": "748280",
    "end": "753420"
  },
  {
    "text": "What's likely to happen there? AUDIENCE: Brad and Angelina are\ngoing to cheat on each other.",
    "start": "753420",
    "end": "759010"
  },
  {
    "text": "PROFESSOR: Yeah, we're\ngoing to have a problem. Because Brad and Angelina have\nthe hots for each other here,",
    "start": "759010",
    "end": "764680"
  },
  {
    "text": "and they like each other\nbetter than their spouse. So before you know\nit, they're going to be doing their 6042 homework\ntogether late at night.",
    "start": "764680",
    "end": "773868"
  },
  {
    "text": "All right? Now, when this happens, we have\nwhat's called a rogue couple. ",
    "start": "773869",
    "end": "785380"
  },
  {
    "text": "Given a matching, x and\ny, a boy and a girl,",
    "start": "785380",
    "end": "794880"
  },
  {
    "text": "say, form a rogue couple\nif they prefer each other",
    "start": "794880",
    "end": "819640"
  },
  {
    "text": "over their mates\nin M. All right.",
    "start": "819640",
    "end": "833470"
  },
  {
    "text": "So here, if we married\nBrad to Jennifer, and Billy Bob to Angelina,\nBrad and Angelina",
    "start": "833470",
    "end": "838860"
  },
  {
    "text": "form a rogue\ncouple, because they like each other better than\nwho they were hooked up with. And that's sort of a bad thing.",
    "start": "838860",
    "end": "845050"
  },
  {
    "text": "It creates instability\nif you were to make the matchings that way.",
    "start": "845050",
    "end": "850529"
  },
  {
    "text": "In fact, we say that\na matching is stable",
    "start": "850530",
    "end": "865240"
  },
  {
    "text": "if there aren't\nany rogue couples. ",
    "start": "865240",
    "end": "878890"
  },
  {
    "text": "And now, one thing to make\nclear is that your preferences can't change over time.",
    "start": "878890",
    "end": "885329"
  },
  {
    "text": "So it's not a situation where\nyou get bored with your spouse, and you change\nyour mind, and then you go off and create\na rogue couple.",
    "start": "885330",
    "end": "891730"
  },
  {
    "text": "You're fixed in your\npreferences over all time, no playing the field, none\nof that stuff here, OK?",
    "start": "891730",
    "end": "897150"
  },
  {
    "text": "So it's fixed once and for\nall, and your goal, of course, is to create or find a perfect\nmatching that's stable.",
    "start": "897150",
    "end": "906720"
  },
  {
    "text": "That's the goal.  So get everybody married\nup and make it stable.",
    "start": "906720",
    "end": "914070"
  },
  {
    "start": "914070",
    "end": "926820"
  },
  {
    "text": "All right, is it\ndoable in that example? If I put those four\npeople on a desert island,",
    "start": "926820",
    "end": "931890"
  },
  {
    "text": "could I make a stable matching?",
    "start": "931890",
    "end": "937250"
  },
  {
    "text": "Yeah, who would I match Brad to? AUDIENCE: Angelina. PROFESSOR: All right. Good, and then Billy\nBob gets Jennifer.",
    "start": "937250",
    "end": "943649"
  },
  {
    "text": "Now, I'm not saying that\nyou make everybody happy, because Billy Bob and Jennifer\nare probably not happy there.",
    "start": "943650",
    "end": "951820"
  },
  {
    "text": "They each got their\nnumber two choice. But it's stable, because\nBrad and Angelina",
    "start": "951820",
    "end": "957150"
  },
  {
    "text": "aren't going anywhere. They are going to stay\ntogether because they like each other best, and so\nthere's no chance that Jennifer",
    "start": "957150",
    "end": "963232"
  },
  {
    "text": "is going to-- that Angelina\nis going to sneak off, sorry, with Billy Bob, or\nthat Brad's going",
    "start": "963232",
    "end": "970990"
  },
  {
    "text": "to sneak off with Jennifer. All right? So it's stable. Not everybody's happy, but\nit's a stable set of marriages.",
    "start": "970990",
    "end": "979509"
  },
  {
    "text": "OK. Any questions about what\nwe're trying to do here now? Yeah?",
    "start": "979510",
    "end": "985212"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] the edges?",
    "start": "985212",
    "end": "990292"
  },
  {
    "text": "PROFESSOR: That's\na great question. You'll see it\nreferred to both ways. Technically, it's a subgraph,\nso it has nodes and edges,",
    "start": "990292",
    "end": "997495"
  },
  {
    "text": "but you'll see me, and you'll\nsee everybody say, oh, it's a bunch of edges that\ndon't share any nodes, and you'll see them\nrefer to it as the edges.",
    "start": "997495",
    "end": "1004040"
  },
  {
    "text": "But really, underlying that,\nit's a subgraph, technically. Any other questions\nabout what we're",
    "start": "1004040",
    "end": "1011590"
  },
  {
    "text": "trying to do here to find\nstable, perfect matching? ",
    "start": "1011590",
    "end": "1017842"
  },
  {
    "text": "All right. Well, in this example, there\nwas a stable, perfect matching.",
    "start": "1017842",
    "end": "1022900"
  },
  {
    "text": "But what about in general? If I have a lot more\npeople, and they have arbitrary preferences,\nhow many people",
    "start": "1022900",
    "end": "1028910"
  },
  {
    "text": "think you can always find\na stable perfect matching?",
    "start": "1028910",
    "end": "1034099"
  },
  {
    "text": "There's one optimistic person. How many people think there's\nsome cases where you're just not going to be able to do it?",
    "start": "1034099",
    "end": "1040789"
  },
  {
    "text": "Wow. OK, it's a pessimistic view. Well, in some sense\nyou're both right.",
    "start": "1040790",
    "end": "1047099"
  },
  {
    "text": "If you allow boys to prefer\nboys and girls to prefer girls,",
    "start": "1047099",
    "end": "1053820"
  },
  {
    "text": "then it is not possible, and\nI'll give you an example. You can find examples where\nthere's always a rogue couple,",
    "start": "1053820",
    "end": "1059559"
  },
  {
    "text": "but if you require boys to only\nget matched to girls and vice versa, then it is possible to\nalways find stable marriages,",
    "start": "1059560",
    "end": "1068920"
  },
  {
    "text": "stable matchings. And we're going to talk\nabout an algorithm for that. But before I show\nyou the algorithm,",
    "start": "1068920",
    "end": "1074870"
  },
  {
    "text": "let me show you the bad case\nwhen boys can prefer boys, or what's sort of\na unisex scenario.",
    "start": "1074870",
    "end": "1083460"
  },
  {
    "text": "So here's a bad example\nwith four people, and the idea is to\ncreate a love triangle.",
    "start": "1083460",
    "end": "1090900"
  },
  {
    "text": "So we have Alex, who prefers\nBobby Joe, Bobby Joe prefers",
    "start": "1090900",
    "end": "1100020"
  },
  {
    "text": "Robin, and Robin prefers Alex.",
    "start": "1100020",
    "end": "1105620"
  },
  {
    "text": "And their second choices\ngo in the opposite order there, all right? So Alex wants to\nbe with Bobby Joe.",
    "start": "1105620",
    "end": "1111100"
  },
  {
    "text": "Bobby Joe wants be with Robin. Robin wants to be with Alex. And then there's Mergatoid-- [LAUGHTER] ",
    "start": "1111100",
    "end": "1118260"
  },
  {
    "text": "--and nobody likes Mergatoid. So that's choice three\nfor all of them here.",
    "start": "1118260",
    "end": "1125780"
  },
  {
    "text": "And Mergatoid's\nchoices, preferences don't really matter\nin this case. [LAUGHTER]",
    "start": "1125780",
    "end": "1131170"
  },
  {
    "text": " I hope nobody is named\nMergatoid in the class.",
    "start": "1131170",
    "end": "1137220"
  },
  {
    "text": "I would get complaints here. All right, so I want\nto claim and prove",
    "start": "1137220",
    "end": "1142520"
  },
  {
    "text": "a theorem that says there\nis no stable matching for this group of preferences.",
    "start": "1142520",
    "end": "1148960"
  },
  {
    "text": "So we'll state that\nas the theorem. There does not exist a stable\nmatching for this graph.",
    "start": "1148960",
    "end": "1158060"
  },
  {
    "text": " The proof is by contradiction--\nassume there is one.",
    "start": "1158060",
    "end": "1166430"
  },
  {
    "start": "1166430",
    "end": "1176260"
  },
  {
    "text": "All right, so assume there\nexists a stable matching. We're going to find\na rogue couple in it.",
    "start": "1176260",
    "end": "1181920"
  },
  {
    "text": " So call the stable\nmatching M. Well,",
    "start": "1181920",
    "end": "1194789"
  },
  {
    "text": "if there's a stable\nmatching, Mergatoid's got to get married to somebody. ",
    "start": "1194790",
    "end": "1210620"
  },
  {
    "text": "Mergatoid will be\nmatched with someone. ",
    "start": "1210620",
    "end": "1219630"
  },
  {
    "text": "All right. Now, here I'm going\nto do something that you can do in\nyour proofs, but you've got to be careful\nwhen you do it.",
    "start": "1219630",
    "end": "1224915"
  },
  {
    "text": "I'm going to say, without\nloss of generality, assume Mergatoid is\nmatched to Alex, all right?",
    "start": "1224915",
    "end": "1234250"
  },
  {
    "text": "And I can do that. So this is the\nabbreviation, without loss of generality by symmetry. ",
    "start": "1234250",
    "end": "1243080"
  },
  {
    "text": "And really, I should explain\nwhat I mean here in the proof. Well, that love\ntriangle is symmetric.",
    "start": "1243080",
    "end": "1249506"
  },
  {
    "text": "Each one has a preference\nfor the next person around the triangle. In terms of graph isomorphism,\nwith the weights on that,",
    "start": "1249506",
    "end": "1256610"
  },
  {
    "text": "every node looks the same. So I can use symmetry. So we're going to say,\nwithout loss of generality,",
    "start": "1256610",
    "end": "1263570"
  },
  {
    "text": "we're going to assume\nMergatoid is matched to Alex.",
    "start": "1263570",
    "end": "1272014"
  },
  {
    "text": " And I'm implying the argument\nis going to be the same.",
    "start": "1272015",
    "end": "1279140"
  },
  {
    "text": "What I say next is\nthe same no matter who Mergatoid is matched\nto, because it's symmetric.",
    "start": "1279140",
    "end": "1285665"
  },
  {
    "text": "All right. If Mergatoid is\nmatched to Alex, do you see a rogue couple up there? ",
    "start": "1285665",
    "end": "1296410"
  },
  {
    "text": "So you have Robin\nmatched to Bobby Joe. Mergatoid is matched to Alex.",
    "start": "1296410",
    "end": "1301476"
  },
  {
    "text": "AUDIENCE: Alex to Bobby Joe? PROFESSOR: Alex\nand Bobby Joe, no.",
    "start": "1301476",
    "end": "1306756"
  },
  {
    "text": "AUDIENCE: Between\nAlex and Robin. PROFESSOR: Alex and Robin, yeah. Alex and Bobby Joe aren't rogue,\nbecause Bobby Joe likes Robin.",
    "start": "1306756",
    "end": "1316560"
  },
  {
    "text": "He likes the person he\nor she is married to. All right, so they're not\ngoing to go off with Alex,",
    "start": "1316560",
    "end": "1322570"
  },
  {
    "text": "but Alex and Robin\nare a rogue couple, because Robin likes Alex\nthe best, and Alex for sure",
    "start": "1322570",
    "end": "1328059"
  },
  {
    "text": "likes Robin better\nthan Mergatoid. All right? So they both prefer each\nother to their mates,",
    "start": "1328060",
    "end": "1334730"
  },
  {
    "text": "and so they form a rogue couple.  All right, so Alex and\nRobin form a rogue couple,",
    "start": "1334730",
    "end": "1351080"
  },
  {
    "text": "and that means that\nM was not stable. ",
    "start": "1351080",
    "end": "1357540"
  },
  {
    "text": "The matching was not stable. And that's a contradiction,\nbecause we assumed it was.",
    "start": "1357540",
    "end": "1363510"
  },
  {
    "text": " So we have a contradiction,\nand the proof is done.",
    "start": "1363510",
    "end": "1369535"
  },
  {
    "text": " Any questions about that?",
    "start": "1369535",
    "end": "1375210"
  },
  {
    "text": "And I'm sort of implying\nhere that you could match, you could have had Mergatoid\nmatched to Bobby Joe,",
    "start": "1375210",
    "end": "1381840"
  },
  {
    "text": "and then Bobby Joe and Alex\nwould have been a rogue couple, or Mergatoid matched to Robin,\nand then Robin and Bobby Joe",
    "start": "1381840",
    "end": "1389490"
  },
  {
    "text": "would be a rogue couple by the\nwithout loss of generality. So it's OK to use that,\nbut you want to be careful",
    "start": "1389490",
    "end": "1395940"
  },
  {
    "text": "that you're doing it OK. Questions? ",
    "start": "1395940",
    "end": "1402241"
  },
  {
    "text": "Yeah? AUDIENCE: So the without\nloss of generality only works if it's, like,\nperfectly symmetric?",
    "start": "1402241",
    "end": "1407320"
  },
  {
    "text": "PROFESSOR: Yeah. Basically, the argument\nyou're going to make is just going to be the same\nargument done in all three",
    "start": "1407320",
    "end": "1412710"
  },
  {
    "text": "cases, and to save yourself\nsome effort, you're saying, don't do the three cases,\ndo one, the other two look",
    "start": "1412710",
    "end": "1418010"
  },
  {
    "text": "the same. So technically, you could add\ncase one, case two, case three, and they would've\nlooked symmetric.",
    "start": "1418010",
    "end": "1424240"
  },
  {
    "text": "OK? All right. Now, this is not very\nsurprising, as you all voted.",
    "start": "1424240",
    "end": "1430300"
  },
  {
    "text": "Almost all of you said it's\nhard to find stable matchings. You might not be\nable to do it always. And in fact, you can't\nin the unisex world.",
    "start": "1430300",
    "end": "1437880"
  },
  {
    "text": "The surprising thing is, you can\nalways find a stable matching in the world where boys\ncould only be paired",
    "start": "1437880",
    "end": "1445410"
  },
  {
    "text": "with girls and vice versa. Now, this statement, this\nresult is pretty famous.",
    "start": "1445410",
    "end": "1452750"
  },
  {
    "text": "The problem itself is known as\nthe stable marriage problem.",
    "start": "1452750",
    "end": "1459300"
  },
  {
    "text": "So let me just define\nit here, and then we'll talk about an algorithm\nto find the matching.",
    "start": "1459300",
    "end": "1467360"
  },
  {
    "start": "1467360",
    "end": "1484030"
  },
  {
    "text": "So we have N boys and N girls. ",
    "start": "1484030",
    "end": "1491110"
  },
  {
    "text": "And it's important we have\nthe same number of each. Now, actually, tomorrow,\nin recitation, you're going to look at the\nscenario where there's more",
    "start": "1491110",
    "end": "1499540"
  },
  {
    "text": "girls than boys, or vice versa. And you'll be using\na similar algorithm, but it'll be a\ndifferent context,",
    "start": "1499540",
    "end": "1505750"
  },
  {
    "text": "and that's the\ncontext that comes up in matching interns to\nhospitals, and stuff like that.",
    "start": "1505750",
    "end": "1511077"
  },
  {
    "text": "But for our version it's an\nequal number of boys and girls. ",
    "start": "1511077",
    "end": "1517690"
  },
  {
    "text": "Each boy has his own\nranked preference",
    "start": "1517690",
    "end": "1528960"
  },
  {
    "text": "list of all the girls.",
    "start": "1528960",
    "end": "1535190"
  },
  {
    "text": "So every boy sort of\nhas his dance card of the girls that\nhe likes in order.",
    "start": "1535190",
    "end": "1540781"
  },
  {
    "text": "All right? The orders can be different\nfor different boys. And each girl has\nthe same thing.",
    "start": "1540781",
    "end": "1546820"
  },
  {
    "text": "She has her own list, ranked\n1 to n of all the boys.",
    "start": "1546820",
    "end": "1552509"
  },
  {
    "text": " The lists are complete,\nand there's no ties,",
    "start": "1552510",
    "end": "1558390"
  },
  {
    "text": "so all the ties have\nto be broken here. And the goal is to\nfind a perfect matching",
    "start": "1558390",
    "end": "1563884"
  },
  {
    "text": "without rogue couples. ",
    "start": "1563884",
    "end": "1585840"
  },
  {
    "text": "OK, so let's try an example. Before we do the algorithm,\nlet me just do a bigger example",
    "start": "1585840",
    "end": "1592730"
  },
  {
    "text": "with five boys and\nfive girls, and we'll get some feel for, this is\nnot completely obvious how",
    "start": "1592730",
    "end": "1599870"
  },
  {
    "text": "to find it. ",
    "start": "1599870",
    "end": "1622910"
  },
  {
    "text": "OK, so let's put\nthe boys over here.",
    "start": "1622910",
    "end": "1628360"
  },
  {
    "text": "And here's boy 1, and\nhis preference list is going to be-- the girls\nwill be C, B, E, A, D, and boy",
    "start": "1628360",
    "end": "1643140"
  },
  {
    "text": "2 is going to have\nthe preference list",
    "start": "1643140",
    "end": "1648460"
  },
  {
    "text": "A, B, E, C, D, and boy 3 is\ngoing to have D, C, B, A, E.",
    "start": "1648460",
    "end": "1667720"
  },
  {
    "text": "Boy 4 is going to be A,\nC, D, B, E, and boy 5,",
    "start": "1667720",
    "end": "1677345"
  },
  {
    "text": "I have to write his across\nlike this, A, B, D, E, C.",
    "start": "1677345",
    "end": "1684100"
  },
  {
    "text": "And the girls also have their\nlists, so let's put those up. ",
    "start": "1684100",
    "end": "1694870"
  },
  {
    "text": "So girl A likes the boys\nin order 3, 5, 2, 1, 4.",
    "start": "1694870",
    "end": "1705480"
  },
  {
    "text": "Girl B likes them in\norder 5, 2, 1, 4, 3.",
    "start": "1705480",
    "end": "1712590"
  },
  {
    "start": "1712590",
    "end": "1717880"
  },
  {
    "text": "Girl C has the\norder 4, 3, 5, 1, 2.",
    "start": "1717880",
    "end": "1725000"
  },
  {
    "text": "Girl D, 1, 2, 3, 4, 5,\nand then the last girl, E,",
    "start": "1725000",
    "end": "1735200"
  },
  {
    "text": "has 2, 3, 4, 1, 5. All right, so say that's\nour matching problem,",
    "start": "1735200",
    "end": "1743220"
  },
  {
    "text": "and those are the\npreference lists. Any ideas for how we might\ntry to make an algorithm",
    "start": "1743220",
    "end": "1748960"
  },
  {
    "text": "to do this? Any thoughts about\nwhat you'd do? What are some approaches\nwe could take? Yeah? AUDIENCE: Use the\nmating algorithm.",
    "start": "1748960",
    "end": "1755110"
  },
  {
    "text": "PROFESSOR: Use the\ngreedy algorithm? AUDIENCE: The mating algorithm. PROFESSOR: Oh, the\nmating algorithm. Well, yeah, the mating algorithm\nis going to do very well,",
    "start": "1755110",
    "end": "1761020"
  },
  {
    "text": "but I haven't told\nyou what that is, and it's a little complicated. So I sort of want to explore\nthe things you might know",
    "start": "1761020",
    "end": "1766880"
  },
  {
    "text": "from what we've done so far. What approaches have we seen\nso far for solving problems?",
    "start": "1766880",
    "end": "1774830"
  },
  {
    "text": "Yeah? AUDIENCE: The greedy algorithm? PROFESSOR: The greedy\nalgorithm-- yep. And let's try that.",
    "start": "1774830",
    "end": "1781500"
  },
  {
    "text": "So let's choose the\nfirst boy, and we'll just go down and give each boy\nthe best choice available",
    "start": "1781500",
    "end": "1788855"
  },
  {
    "text": "and see what happens.  First thing to try usually\nis the greedy algorithm,",
    "start": "1788855",
    "end": "1794540"
  },
  {
    "text": "and about half the time\nit'll work in life, and half the time it won't. ",
    "start": "1794540",
    "end": "1802620"
  },
  {
    "text": "So let's try greedy.  So boy 1 is going to get his\nfirst choice, girl C. Who",
    "start": "1802620",
    "end": "1814240"
  },
  {
    "text": "does boy 2 get?  A. Who does boy 3 get?",
    "start": "1814240",
    "end": "1822990"
  },
  {
    "text": "D. Huh, this is going well. Who does boy 4 get? ",
    "start": "1822990",
    "end": "1829460"
  },
  {
    "text": "Boy 4, oh yeah, boy 4 has got\nto go all the way down to B, because A, C, and D\ngot taken, so boy 4",
    "start": "1829460",
    "end": "1835860"
  },
  {
    "text": "gets B. And boy 5-- who's left? E, fourth choice again.",
    "start": "1835860",
    "end": "1843789"
  },
  {
    "text": "All right, well, maybe\nthat's a stable matching.",
    "start": "1843790",
    "end": "1849320"
  },
  {
    "text": "All right, well let's see. To see if it's stable,\nwe've got to see are there any rogue couples.",
    "start": "1849320",
    "end": "1855400"
  },
  {
    "text": "Well, is there any rogue\ncouple involving boy 1? No, boy 1 got his first choice.",
    "start": "1855400",
    "end": "1862070"
  },
  {
    "text": "You're not going anywhere. Boy 2? No-- first choice,\nsame with boy 3.",
    "start": "1862070",
    "end": "1868080"
  },
  {
    "text": "These boys are quite happy. They're not doing anything. Boy 4 may not be\nso happy though,",
    "start": "1868080",
    "end": "1874550"
  },
  {
    "text": "because boy 4 got paired\nwith B, so there's possible rogue couples.",
    "start": "1874550",
    "end": "1879950"
  },
  {
    "text": "Let's see, is 4,\nA a rogue couple? ",
    "start": "1879950",
    "end": "1885650"
  },
  {
    "text": "No. A hates boy 4, all right? No chance she's\nrunning off with boy 4.",
    "start": "1885650",
    "end": "1892566"
  },
  {
    "text": "AUDIENCE: 4, C? PROFESSOR: 4, C? All right, let's see that. Where's C-- whoa, yeah.",
    "start": "1892566",
    "end": "1899570"
  },
  {
    "text": "C has the hots for\nboy 4, so she likes him better than\nwhoever her mate was,",
    "start": "1899570",
    "end": "1905990"
  },
  {
    "text": "and boy 4 likes C better\nthan who he got matched with, boy B. That is now\na rogue couple,",
    "start": "1905990",
    "end": "1911840"
  },
  {
    "text": "so the greedy\nalgorithm did not work. That's too bad. Well, it would be short\nlecture, I guess, if it worked.",
    "start": "1911840",
    "end": "1917400"
  },
  {
    "text": "[LAUGHTER]  Well, what would you do next,\nsort of, if you were-- I mean,",
    "start": "1917400",
    "end": "1926850"
  },
  {
    "text": "you could try to match 4 with\nC, and then try to patch things up, and you could\nstart doing that,",
    "start": "1926850",
    "end": "1934070"
  },
  {
    "text": "but you might create\nother rogue couples. In fact, I don't know\nan approach-- yeah? AUDIENCE: You could\nlet it evolve and see",
    "start": "1934070",
    "end": "1940026"
  },
  {
    "text": "if it gets it more stable. PROFESSOR: Say it again. AUDIENCE: You could\nlet it evolve, let all the rogue\ncouples evolve and see",
    "start": "1940026",
    "end": "1945268"
  },
  {
    "text": "if it ends up any more stable. PROFESSOR: Yes, you could\nstart swapping around to get rid of rogue couples.",
    "start": "1945268",
    "end": "1951360"
  },
  {
    "text": "In doing that, you might\ncreate other rogue couples. In fact, I don't know\nof an algorithm that",
    "start": "1951360",
    "end": "1956380"
  },
  {
    "text": "works like this, that\nworks, that's known to work, where you start\npatching things up, because as you're\npatching things up,",
    "start": "1956380",
    "end": "1962110"
  },
  {
    "text": "you might make other things\nmuch worse by doing that. So I don't know of\nan approach that way.",
    "start": "1962110",
    "end": "1967660"
  },
  {
    "text": " What's another approach? Yeah? AUDIENCE: [INAUDIBLE]\npertaining to what order",
    "start": "1967660",
    "end": "1977490"
  },
  {
    "text": "they have each other. PROFESSOR: And then do? AUDIENCE: And then do the\nhighest ordered [INAUDIBLE] PROFESSOR: Min-weight\nmatching kind of thing?",
    "start": "1977490",
    "end": "1984419"
  },
  {
    "text": "AUDIENCE: Maybe. PROFESSOR: Maybe? I don't of an approach\nlike that that works. Also, min-weight\nmatching, that algorithm",
    "start": "1984420",
    "end": "1991190"
  },
  {
    "text": "is going to be more\ncomplicated than the one I'm going to show you, in the end. It takes more time to run.",
    "start": "1991190",
    "end": "1996344"
  },
  {
    "text": "And I don't even\nknow if it works. Like, I don't know if you\ncan take these numbers and make weights on the edges\nget a min-weight matching.",
    "start": "1996344",
    "end": "2002115"
  },
  {
    "text": "AUDIENCE: Could you do like\na merge sort [INAUDIBLE] PROFESSOR: Oh, a merge sort,\nso you take the minimum weight",
    "start": "2002115",
    "end": "2007660"
  },
  {
    "text": "edge, put that in, and\nrecurse on that kind of thing. I don't know. It's possible.",
    "start": "2007660",
    "end": "2013856"
  },
  {
    "text": "In fact, you know what,\na recursive approach is a good idea. I don't know of a nice\nrecursive algorithm for this.",
    "start": "2013857",
    "end": "2020210"
  },
  {
    "text": "It's true that if you\nfound a boy and a girl who liked each other\nbest, you could then",
    "start": "2020210",
    "end": "2025429"
  },
  {
    "text": "match them safely and recurse,\nbecause you know they're not going to be in a rogue\ncouple, because they like each other best.",
    "start": "2025430",
    "end": "2030990"
  },
  {
    "text": "Then you could recurse. But that might not exist here. You might not have\na boy and girl",
    "start": "2030990",
    "end": "2036210"
  },
  {
    "text": "that like each other best, in\nwhich case it's hard to know. I don't know now if you pick the\nminimum weight in some sense,",
    "start": "2036210",
    "end": "2042350"
  },
  {
    "text": "like add the preference list or\nsomething to make a min-weight and recurse on\nthat, if that works. I don't know of an\napproach like that.",
    "start": "2042350",
    "end": "2049669"
  },
  {
    "text": "But those are the kinds\nof things you try. And as far as I know,\nall the simple things fail for this problem.",
    "start": "2049670",
    "end": "2055199"
  },
  {
    "text": "But there is something that's\na little more involved, but does work, and that's\nthe mating algorithm.",
    "start": "2055199",
    "end": "2062980"
  },
  {
    "text": "And does everybody\nhave the handout? There, it's back up there. I got some copies down here if\nyou need it, but pull that out.",
    "start": "2062980",
    "end": "2070237"
  },
  {
    "text": "So we're going to\nread this and talk about what the\nalgorithm is, and then prove that it performs well.",
    "start": "2070237",
    "end": "2077540"
  },
  {
    "text": "So the initial condition is\nyou have each of the N boys has an ordered list of the\nN girls and vice versa,",
    "start": "2077540",
    "end": "2087109"
  },
  {
    "text": "and the ritual, we're going to\nview this is a mating ritual, and really, the\nprogram is doing it.",
    "start": "2087110",
    "end": "2092136"
  },
  {
    "text": "The code is doing it. But think of it as real life. It takes place\nover several days.",
    "start": "2092136",
    "end": "2098130"
  },
  {
    "text": "Now, the day is broken up into\nthree parts-- the morning, the afternoon, and the evening. In the morning, each girl\ncomes out to her balcony",
    "start": "2098130",
    "end": "2105850"
  },
  {
    "text": "and stands on the balcony. Each boy goes to the balcony\nof his favorite girl who",
    "start": "2105850",
    "end": "2114190"
  },
  {
    "text": "is still on his list that\nhasn't been crossed off. Now, initially, every\ngirl is on his list. So he goes to his favorite\ngirl, goes under her balcony,",
    "start": "2114190",
    "end": "2121830"
  },
  {
    "text": "and serenades her. Now, if, over the\ncourse of the algorithm, the boy has nobody left on\nhis list, he's out of luck.",
    "start": "2121830",
    "end": "2130470"
  },
  {
    "text": "He just stays home\nand does homework. All right? There's no serenade\nanymore for him. Now, in the afternoon,\nthe girls who",
    "start": "2130470",
    "end": "2138320"
  },
  {
    "text": "have at least one suitor--\na boy down there serenading her-- looks at all the\nsuitors, picks her favorite,",
    "start": "2138320",
    "end": "2146130"
  },
  {
    "text": "and to the favorite she\nsays, maybe I'll marry you. Come back tomorrow.",
    "start": "2146130",
    "end": "2151809"
  },
  {
    "text": "Girls don't want to make it\ntoo easy here for the boys. Now, to all the other boys who\nare lower priority she says,",
    "start": "2151810",
    "end": "2157770"
  },
  {
    "text": "I will never marry you. Go away. So she writes them off for good.",
    "start": "2157770",
    "end": "2164390"
  },
  {
    "text": "Now, that night, any boy who\nheard a no-- like the girl said no, I'll never marry you--\ncrosses that girl off his list.",
    "start": "2164390",
    "end": "2172640"
  },
  {
    "text": "Because, you know, it's\nthe only practical thing to do at that point. Now, if the boy heard\nthe maybe I'll marry you,",
    "start": "2172640",
    "end": "2179729"
  },
  {
    "text": "well, he's going to\ngo back tomorrow, because that's still\nhis favorite girl that's not crossed off.",
    "start": "2179729",
    "end": "2184740"
  },
  {
    "text": "So he goes back and\nserenades her again the next day in the hopes that\neventually, she'll say yes.",
    "start": "2184740",
    "end": "2190650"
  },
  {
    "text": "Now, we keep doing\nthis every day, OK? And if we ever encounter a\nday where every girl has,",
    "start": "2190650",
    "end": "2198640"
  },
  {
    "text": "at most, one suitor, the\nalgorithm stops, and then",
    "start": "2198640",
    "end": "2203650"
  },
  {
    "text": "every girl who has a suitor\nsays, yes, I will marry you. Now, if a girl\ndoesn't have a suitor,",
    "start": "2203650",
    "end": "2209470"
  },
  {
    "text": "there's no one to marry her. We're going to prove\nthat doesn't happen, OK? But determination\ncondition is, you no longer",
    "start": "2209470",
    "end": "2215880"
  },
  {
    "text": "have a situation with two or\nmore boys under one balcony. OK?",
    "start": "2215880",
    "end": "2222120"
  },
  {
    "text": "All right, so let's run that\nalgorithm on this example,",
    "start": "2222120",
    "end": "2231097"
  },
  {
    "text": "just so we make sure\nwe understand it, because I'm going to try\nto prove theorems about it. So here are the serenades\nthat are going on,",
    "start": "2231097",
    "end": "2240390"
  },
  {
    "text": "and here's the\ngirls, and the days.",
    "start": "2240390",
    "end": "2246140"
  },
  {
    "text": "It's going to work over\nfour days in this case. ",
    "start": "2246140",
    "end": "2255280"
  },
  {
    "text": "And then we're also going to\nkeep track of the boy's lists--",
    "start": "2255280",
    "end": "2260450"
  },
  {
    "text": "who's gotten crossed off. ",
    "start": "2260450",
    "end": "2272180"
  },
  {
    "text": "All right, so these will be\nthe cross outs down here. Actually, maybe I'll\nfit it up here if I can. ",
    "start": "2272180",
    "end": "2282390"
  },
  {
    "text": "Girls, let's see, A, B-- no, I'm\ngoing to have to space it out. ",
    "start": "2282390",
    "end": "2295900"
  },
  {
    "text": "And the boys have\ntheir lists here, and we have boys 1, 2, 3, 4, 5.",
    "start": "2295900",
    "end": "2302049"
  },
  {
    "text": "And here I'm going to\nrecord the cross outs. ",
    "start": "2302050",
    "end": "2308980"
  },
  {
    "text": "All right, so let's\nlook at day one. ",
    "start": "2308980",
    "end": "2314300"
  },
  {
    "text": "Who is under girl A's\nbalcony on day one?",
    "start": "2314300",
    "end": "2319878"
  },
  {
    "text": "AUDIENCE: 2, 4, and 5? PROFESSOR: 2, 4, and 5--\neach like girl A the best, so she's got a lot of activity.",
    "start": "2319878",
    "end": "2325800"
  },
  {
    "text": "These three boys show up. Anybody under girl B's balcony?",
    "start": "2325800",
    "end": "2331470"
  },
  {
    "text": "No, nope, no, nothing there. C, does C have anybody?",
    "start": "2331470",
    "end": "2338369"
  },
  {
    "text": "Boy 1, yeah. D? 3, and E, I don't think\nthere's any action, right?",
    "start": "2338370",
    "end": "2346850"
  },
  {
    "text": "Nope. All right, so that's\nthe status on day one.",
    "start": "2346850",
    "end": "2352220"
  },
  {
    "text": "So the action is all up here. All right, so what\ndoes girl A do?",
    "start": "2352220",
    "end": "2359670"
  },
  {
    "text": "Who does she tell\nto hang around? AUDIENCE: Number 5. PROFESSOR: Number 5, yes. She's got 5, 4, and 2,\nand she likes 5 the best.",
    "start": "2359670",
    "end": "2367210"
  },
  {
    "text": "She tells 5 to come back,\nand she says to these guys, we're not going to marry him. That means that boys 2 and 4\ncross girl A off their list.",
    "start": "2367210",
    "end": "2378710"
  },
  {
    "text": "So they say A is no\nlonger possible for them. All right, now we go to\nday two, and 5 goes back",
    "start": "2378710",
    "end": "2388610"
  },
  {
    "text": "to girl A, and, of course,\nboys 1 and 3 stay there. Where does boy 2 go on day two?",
    "start": "2388610",
    "end": "2396030"
  },
  {
    "text": "B. All right, so boy 2\nshows up here on day two,",
    "start": "2396030",
    "end": "2401462"
  },
  {
    "text": "and, let's see, boy\n5 is already there, and then we've got to get boy 4.",
    "start": "2401462",
    "end": "2406545"
  },
  {
    "text": "Where does he go now? C. All right, boy\n4 shows up here.",
    "start": "2406545",
    "end": "2414160"
  },
  {
    "text": "All right, so now the\naction is with girl C. And what does she do?",
    "start": "2414160",
    "end": "2420233"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] PROFESSOR: Yeah, she keeps\n4, and she boots poor 1.",
    "start": "2420233",
    "end": "2426319"
  },
  {
    "text": "You know, led him\nalong for a day, and then he gets the boot\nbecause boy 4 showed up, right?",
    "start": "2426320",
    "end": "2431520"
  },
  {
    "text": "Because girl C likes 4\nbetter than 1, so bad luck for 1 there.",
    "start": "2431520",
    "end": "2438450"
  },
  {
    "text": "So now one goes home that\nnight and crosses off girl C.",
    "start": "2438450",
    "end": "2446369"
  },
  {
    "text": "OK. All right, and where\ndoes 1 go on day three?",
    "start": "2446370",
    "end": "2452340"
  },
  {
    "text": "All right, so he goes to-- he\ncrossed off C-- he goes to B. All right, so this is left over.",
    "start": "2452340",
    "end": "2458500"
  },
  {
    "text": "We have 5, 2, 4, 3-- boy\n1 now goes to B, right?",
    "start": "2458500",
    "end": "2467820"
  },
  {
    "text": "OK. And then what does girl B do?",
    "start": "2467820",
    "end": "2473090"
  },
  {
    "text": "Who does she keep around? Keeps 2, boots poor 1.",
    "start": "2473090",
    "end": "2480580"
  },
  {
    "text": "All right, so 1 says, all right,\nI'm crossing B off my list, got the message.",
    "start": "2480580",
    "end": "2486369"
  },
  {
    "text": "And now where does\nboy 1 go on day four? AUDIENCE: Girl E? PROFESSOR: E-- third choice.",
    "start": "2486370",
    "end": "2491440"
  },
  {
    "text": "OK. So 1 shows up down here, and\nthese guys keep returning.",
    "start": "2491440",
    "end": "2498200"
  },
  {
    "text": "Wow, so on day four\nthere's no more fighting. Every girl has at most one.",
    "start": "2498200",
    "end": "2504700"
  },
  {
    "text": "The termination\ncondition is invoked, and these are the\nmarriages that take place. The girls say yes.",
    "start": "2504700",
    "end": "2510550"
  },
  {
    "text": " All right, now is everybody-- [LAUGHTER]",
    "start": "2510550",
    "end": "2516720"
  },
  {
    "text": "--does everybody understand\nthe algorithm we used? Any questions on the algorithm? ",
    "start": "2516720",
    "end": "2524026"
  },
  {
    "text": "Yeah? AUDIENCE: [INAUDIBLE] the\nfirst case [INAUDIBLE] or is that just in\ncase the [INAUDIBLE]",
    "start": "2524026",
    "end": "2531080"
  },
  {
    "text": "PROFESSOR: That's in case\nthe algorithm doesn't work. Because we haven't\nproved it works yet, and I gotta have\na possibility for,",
    "start": "2531080",
    "end": "2538830"
  },
  {
    "text": "a boy crosses every\ngirl off his list, he gets rejected everywhere. That is a possibility,\nso I've got to say what would happen\nin that possibility.",
    "start": "2538830",
    "end": "2546150"
  },
  {
    "text": "Now, we will prove\nin a few minutes that condition never arises, OK?",
    "start": "2546150",
    "end": "2552430"
  },
  {
    "text": "But I'm giving you\nwhat might happen, in which so it never\ndoes, so no boy ends up having to stay home\nand do homework here.",
    "start": "2552430",
    "end": "2559610"
  },
  {
    "text": "All right, so that's\nthe algorithm. Now let's see if we can see\nif there's any rogue couples.",
    "start": "2559610",
    "end": "2566770"
  },
  {
    "text": "All right, so, for example,\nlet's look at boy 1.",
    "start": "2566770",
    "end": "2572920"
  },
  {
    "text": "Boy 1 got paired to his\nthird choice, E, so 1, C might be a rogue couple.",
    "start": "2572920",
    "end": "2581260"
  },
  {
    "text": "Is that possible? No, because C got 4 here,\nwhich is her first choice.",
    "start": "2581260",
    "end": "2588590"
  },
  {
    "text": "She's not going with boy 1. That's not working. What about 1, B?",
    "start": "2588590",
    "end": "2594190"
  },
  {
    "text": "Could that be rogue? No, B got 2, and B likes 2\nbetter than 1, so 1, C and 1,",
    "start": "2594190",
    "end": "2603744"
  },
  {
    "text": "B are not rogue. And 1 got E, so there's no\nother possibility for boy 1, so boy 1 is not\nin a rogue couple.",
    "start": "2603745",
    "end": "2610840"
  },
  {
    "text": "What about boy 2? 2 got B, and that's\n2's second choice.",
    "start": "2610840",
    "end": "2619410"
  },
  {
    "text": "What about 2, A?  Let's see, A got 5, and\nA likes 5 better than 2,",
    "start": "2619410",
    "end": "2632180"
  },
  {
    "text": "so that's not rogue. Boy 2 is not rogue. All right, boy 3-- boy 3\ngot his first choice, right?",
    "start": "2632180",
    "end": "2644839"
  },
  {
    "text": "3 got D, so 3 is\nnot going anywhere. Boy 4 got-- who did boy 4 get--\ngot C. 4 got his second choice.",
    "start": "2644840",
    "end": "2659034"
  },
  {
    "text": "What about 4, A?  A hates 4.",
    "start": "2659034",
    "end": "2665040"
  },
  {
    "text": "A is not gonna get caught dead\nwith 4, so that's not rogue. So 4 is OK. 4 is not in a rogue couple.",
    "start": "2665040",
    "end": "2670890"
  },
  {
    "text": "And finally, boy 5--\nboy 5 is paired with A,",
    "start": "2670890",
    "end": "2677295"
  },
  {
    "text": "and that is boy\n5's first choice, so he's not wandering off here.",
    "start": "2677295",
    "end": "2682760"
  },
  {
    "text": "All right? So in fact, we've\njust argued that this is a stable set of marriages,\na stable matching in this case.",
    "start": "2682760",
    "end": "2692720"
  },
  {
    "text": "Any questions now about\nwhat we're trying to do? OK, because we're going\nto try to show now",
    "start": "2692720",
    "end": "2698100"
  },
  {
    "text": "it always produces\na stable matching. And to do that, we need\nto do a few things.",
    "start": "2698100",
    "end": "2706020"
  },
  {
    "start": "2706020",
    "end": "2716355"
  },
  {
    "text": "All right, so what\nare the things we need to show to\nprove everything is going to be good here?",
    "start": "2716355",
    "end": "2723357"
  },
  {
    "text": "What are some facts we to prove? Yeah? AUDIENCE: Don't we need to show\nthat the algorithm, it does",
    "start": "2723357",
    "end": "2728414"
  },
  {
    "text": "come to an end? PROFESSOR: Yes. [LAUGHTER]  The algorithm\nterminates, so we need",
    "start": "2728415",
    "end": "2733650"
  },
  {
    "text": "to show that the marriage\nalgorithm, TMA, terminates.",
    "start": "2733650",
    "end": "2739079"
  },
  {
    "text": "Otherwise, the boys\nare serenading forever, and that's not too good.",
    "start": "2739080",
    "end": "2744360"
  },
  {
    "text": "All right, what else\ndo we want to show? Yeah? AUDIENCE: If it does terminate,\nthen one is left empty.",
    "start": "2744360",
    "end": "2749909"
  },
  {
    "text": "PROFESSOR: Then? AUDIENCE: Everyone gets someone. PROFESSOR: Everyone\ngets married. ",
    "start": "2749909",
    "end": "2756790"
  },
  {
    "text": "Yep. Stability is easy if\nnobody gets married. ",
    "start": "2756790",
    "end": "2765820"
  },
  {
    "text": "All right, what else do\nwe want to show here? Yeah? AUDIENCE: There are\nno rogue couples. PROFESSOR: No rogue couples. ",
    "start": "2765820",
    "end": "2779000"
  },
  {
    "text": "All right, what else\nmight we like to show? These are the three main ones. There's a couple of other\nthings you might like.",
    "start": "2779000",
    "end": "2785230"
  },
  {
    "text": "Yeah? AUDIENCE: It runs quickly. PROFESSOR: It runs quickly. Well, you can only\nserenade for so long.",
    "start": "2785230",
    "end": "2790325"
  },
  {
    "text": " In fact, it does run\nquickly, and that's",
    "start": "2790325",
    "end": "2796840"
  },
  {
    "text": "why it's useful in practice. Anything else you might want\nto show about this algorithm?",
    "start": "2796840",
    "end": "2801992"
  },
  {
    "text": "AUDIENCE: How many\npeople you crossed out? PROFESSOR: How many people\nyou crossed out-- yeah, you could, and that'll tie\ninto how long it takes.",
    "start": "2801992",
    "end": "2809369"
  },
  {
    "text": "Yeah. Anything else? Yeah? AUDIENCE: The average\nlikeness between the couples.",
    "start": "2809370",
    "end": "2818230"
  },
  {
    "text": "PROFESSOR: The\naverage likeness, oh. So yeah, we haven't\nhad a notion here of how happy people\nare at the end,",
    "start": "2818230",
    "end": "2825610"
  },
  {
    "text": "because we don't have a\nweighting on the edges, but you might want\nto think about that. That's actually a good point. Yeah?",
    "start": "2825610",
    "end": "2831567"
  },
  {
    "text": "AUDIENCE: If they\n[INAUDIBLE] if it matters who serenades\n[INAUDIBLE] girls or boys to get her.",
    "start": "2831567",
    "end": "2837411"
  },
  {
    "text": "PROFESSOR: That's a great point. Is this algorithm good for\ngirls, or good for boys?",
    "start": "2837411",
    "end": "2843360"
  },
  {
    "text": "Yeah, that's a good\npoint-- fairness. All right, so we'll take\na look at fairness also.",
    "start": "2843360",
    "end": "2849910"
  },
  {
    "text": "Is it better to be a serenader,\nor be on the balcony making your choices?",
    "start": "2849910",
    "end": "2855060"
  },
  {
    "text": "OK, so this is what\nwe've got to do.  So let's start by\nshowing TMA terminates,",
    "start": "2855060",
    "end": "2862415"
  },
  {
    "text": "and that it terminates\npretty quickly. ",
    "start": "2862415",
    "end": "2873460"
  },
  {
    "text": "Now, in fact, I'm going to\nprove a fairly crude bound on the time, but it\nactually does fairly well.",
    "start": "2873460",
    "end": "2881560"
  },
  {
    "text": "So our first theorem\nis going to be that TMA terminates in, at\nmost, N squared plus 1 days.",
    "start": "2881560",
    "end": "2895069"
  },
  {
    "text": " N is the number\nof boys and girls.",
    "start": "2895070",
    "end": "2900583"
  },
  {
    "text": "The proof is going to\nbe by contradiction.  This is probably\nthe only day where",
    "start": "2900583",
    "end": "2906710"
  },
  {
    "text": "we'll do a bunch of proofs and\nnone of them use induction.  They're pretty much\nall by contradiction.",
    "start": "2906710",
    "end": "2914750"
  },
  {
    "text": "Suppose TMA does not terminate\nin N squared plus 1 days,",
    "start": "2914750",
    "end": "2930649"
  },
  {
    "text": "because we're going to show\nthat leads to a contradiction. ",
    "start": "2930649",
    "end": "2941050"
  },
  {
    "text": "We need to show that\nsome kind of progress is made each day to\nshow that it terminates.",
    "start": "2941050",
    "end": "2946420"
  },
  {
    "text": "Yeah? AUDIENCE: [INAUDIBLE] the\nnumber of causes that have [INAUDIBLE], so if it\nhas not terminated,",
    "start": "2946420",
    "end": "2952682"
  },
  {
    "text": "then at least one girl is seeing\na group of at least one guy-- PROFESSOR: Yes. AUDIENCE: --so the number\nof crosses cannot be defined",
    "start": "2952682",
    "end": "2958822"
  },
  {
    "text": "[INAUDIBLE] PROFESSOR: Very good. OK, let's state that\nas a claim, and you've given the proof of the\nclaim, which is great.",
    "start": "2958822",
    "end": "2966890"
  },
  {
    "text": "If we don't terminate,\non a day, that",
    "start": "2966890",
    "end": "2978160"
  },
  {
    "text": "must be because a girl had two\nboys there, or more, therefore she rejected some, at least one.",
    "start": "2978160",
    "end": "2985230"
  },
  {
    "text": "And that night, the rejected\nboy crosses a girl off his list. ",
    "start": "2985230",
    "end": "2992440"
  },
  {
    "text": "So if we don't terminate,\nthen at least one boy crosses at least one\ngirl off his list.",
    "start": "2992440",
    "end": "2998730"
  },
  {
    "start": "2998730",
    "end": "3006000"
  },
  {
    "text": "And so we're going to measure\nprogress by the cross outs. ",
    "start": "3006000",
    "end": "3015220"
  },
  {
    "text": "So every day we don't\nterminate, a boy crossed a girl off his list,\nso if we didn't terminate",
    "start": "3015220",
    "end": "3020670"
  },
  {
    "text": "at N squared plus\n1 days, we must have crossed off N squared plus\n1 girls across all the lists.",
    "start": "3020670",
    "end": "3030390"
  },
  {
    "text": "Well, is that possible? To have done N squared\nplus 1 cross outs?",
    "start": "3030390",
    "end": "3035670"
  },
  {
    "text": " What do you think?",
    "start": "3035670",
    "end": "3041599"
  },
  {
    "text": "How many names are on each list? AUDIENCE: N. PROFESSOR: N, and how\nmany lists are there?",
    "start": "3041600",
    "end": "3047765"
  },
  {
    "text": "AUDIENCE: N. PROFESSOR: N, so there's N\nlists with N names implies",
    "start": "3047766",
    "end": "3056120"
  },
  {
    "text": "there's, at most, N\nsquared cross outs ever. But we just said we had N\nsquared plus 1 cross outs.",
    "start": "3056120",
    "end": "3063530"
  },
  {
    "text": " But we have also N\nsquared plus 1 cross outs,",
    "start": "3063530",
    "end": "3071566"
  },
  {
    "text": "and that's a contradiction.  All right?",
    "start": "3071566",
    "end": "3077210"
  },
  {
    "text": "So we're done. It has to terminate within\nN squared plus 1 days.",
    "start": "3077210",
    "end": "3083282"
  },
  {
    "text": "Any questions?  This is a very common proof\ntechnique in computer science.",
    "start": "3083282",
    "end": "3090630"
  },
  {
    "text": "You're analyzing some\nsystem, and every step or every day or\nevery time period,",
    "start": "3090630",
    "end": "3096100"
  },
  {
    "text": "you want to argue\nprogress got made, and then after you've\nmade enough progress you have to be done, and therefore,\nthe algorithm is completed.",
    "start": "3096100",
    "end": "3106130"
  },
  {
    "text": "All right, so we know\nthat TMA terminates. Now, we've still got\nto get everyone married and have them all be\nhappy, or at least stable.",
    "start": "3106130",
    "end": "3113690"
  },
  {
    "text": " Now, to do this, we're\ngoing to use an invariant.",
    "start": "3113690",
    "end": "3119140"
  },
  {
    "text": "Yeah? AUDIENCE: If a girl\nhas some guy in front of [INAUDIBLE] on\nsomething, then she",
    "start": "3119140",
    "end": "3125874"
  },
  {
    "text": "will always have [INAUDIBLE] PROFESSOR: That is true. Something even stronger is true.",
    "start": "3125874",
    "end": "3134059"
  },
  {
    "text": "AUDIENCE: All the [INAUDIBLE] PROFESSOR: Have a-- PROFESSOR: If she has a\npreference for someone who",
    "start": "3134060",
    "end": "3139916"
  },
  {
    "text": "[INAUDIBLE] only better guys. PROFESSOR: Yeah, that's\na great invariant.",
    "start": "3139916",
    "end": "3146859"
  },
  {
    "text": "As the girl is sitting\nthere on her balcony, things only get better,\nbecause she always",
    "start": "3146860",
    "end": "3152730"
  },
  {
    "text": "keeps the best one\naround that's there. And when new ones\ncome in, they've got to be better than the\nlast one for her to keep them.",
    "start": "3152730",
    "end": "3161110"
  },
  {
    "text": "So as she rejects boys, she\nonly does that because she's got better ones there, and\nwhoever she says maybe to",
    "start": "3161110",
    "end": "3167330"
  },
  {
    "text": "always comes back. So an invariant\nof this algorithm is that when a girl has\na suitor, going forward,",
    "start": "3167330",
    "end": "3176400"
  },
  {
    "text": "she only has suitors she\nlikes at least as well. And if she ever rejects\na boy, then she's",
    "start": "3176400",
    "end": "3182310"
  },
  {
    "text": "got somebody better\nthere forever. All right, so let's state that\nas an invariant and prove that.",
    "start": "3182310",
    "end": "3189421"
  },
  {
    "start": "3189421",
    "end": "3206609"
  },
  {
    "text": "OK, so we're going to let\nP be our invariant here. P is the statement that if a\ngirl, G, ever rejected a boy,",
    "start": "3206610",
    "end": "3223690"
  },
  {
    "text": "B, then the girl,\nG, has a suitor,",
    "start": "3223690",
    "end": "3233213"
  },
  {
    "text": "or if the algorithm\nis terminated, a husband who she\nprefers to B. All right,",
    "start": "3233214",
    "end": "3248695"
  },
  {
    "text": "that's going to\nbe our invariant, and now we've got to\nprove it's an invariant. So we'll do that with a\nlemma called lemma one.",
    "start": "3248696",
    "end": "3255220"
  },
  {
    "text": " P is an invariant for TMA.",
    "start": "3255220",
    "end": "3263900"
  },
  {
    "start": "3263900",
    "end": "3268990"
  },
  {
    "text": "All right, let's prove that. Now, what's the\nfirst thing you've got to prove when you're proving\nsomething as an invariant?",
    "start": "3268990",
    "end": "3277680"
  },
  {
    "text": "There's two things you've got\nto do to establish a variant. What's the first one? AUDIENCE: Base case?",
    "start": "3277680",
    "end": "3282733"
  },
  {
    "text": "PROFESSOR: Base case. Show it holds true\nat the beginning. Proof is going to\nbe by induction,",
    "start": "3282733",
    "end": "3289380"
  },
  {
    "text": "and so we've got to show that\nP holds true at the beginning. But what are we going\nto induct on here? What's the parameter\nwe're inducting on?",
    "start": "3289380",
    "end": "3295950"
  },
  {
    "text": "AUDIENCE: Time? PROFESSOR: Time,\nthe number of days.  Good.",
    "start": "3295950",
    "end": "3303040"
  },
  {
    "text": "The base case is day\nzero, the beginning. ",
    "start": "3303040",
    "end": "3313630"
  },
  {
    "text": "All right. Well, is that statement\ntrue on day zero?",
    "start": "3313630",
    "end": "3319115"
  },
  {
    "text": " Yeah, it's true for\nsort of a weird reason.",
    "start": "3319115",
    "end": "3324760"
  },
  {
    "text": "Nobody's been\nrejected yet, so it's what's called vacuously true.",
    "start": "3324760",
    "end": "3329900"
  },
  {
    "text": "Because no girl, G, has\nrejected any boy, so it's true.",
    "start": "3329900",
    "end": "3334940"
  },
  {
    "text": " So no one is rejected yet.",
    "start": "3334940",
    "end": "3340000"
  },
  {
    "start": "3340000",
    "end": "3345360"
  },
  {
    "text": "So it's vacuously true. ",
    "start": "3345360",
    "end": "3352293"
  },
  {
    "text": "All right, next we have\nthe induction step. ",
    "start": "3352293",
    "end": "3362860"
  },
  {
    "text": "So we'll assume P holds\nat the end of day d,",
    "start": "3362860",
    "end": "3376660"
  },
  {
    "text": "and we need to argue\nthat it holds now at the end of day d plus 1.",
    "start": "3376660",
    "end": "3382850"
  },
  {
    "text": "So say it's true up\nto now, up to day d. Why Is it true at the\nend of the next day?",
    "start": "3382850",
    "end": "3388130"
  },
  {
    "text": "Well, there's two cases\nto look at here, depending",
    "start": "3388130",
    "end": "3393319"
  },
  {
    "text": "on when G rejected B. So if\nshe rejects B on this day, day",
    "start": "3393320",
    "end": "3406410"
  },
  {
    "text": "d plus 1, well, why would\nshe reject B on day d plus 1?",
    "start": "3406410",
    "end": "3414817"
  },
  {
    "text": "There's only one scenario. Yeah? AUDIENCE: There's a better boy. PROFESSOR: There's a better boy.",
    "start": "3414817",
    "end": "3419849"
  },
  {
    "text": "And so she says maybe to him,\nand he becomes her suitor. So, in fact, P is true.",
    "start": "3419850",
    "end": "3428009"
  },
  {
    "text": "So then there was\nsomeone better,",
    "start": "3428010",
    "end": "3440670"
  },
  {
    "text": "and that implies P is\ntrue on day d plus 1.",
    "start": "3440670",
    "end": "3447950"
  },
  {
    "text": "Case two is very similar. It's a very simple proof.",
    "start": "3447950",
    "end": "3453160"
  },
  {
    "text": "G rejected B before\nday d, before d plus 1.",
    "start": "3453160",
    "end": "3461319"
  },
  {
    "text": " Well, now we use the fact that\nP was true at the end of day",
    "start": "3461320",
    "end": "3470130"
  },
  {
    "text": "d, which means P now implies\nthat G had at least as good",
    "start": "3470130",
    "end": "3477625"
  },
  {
    "text": "a suitor.  Actually, it's better,\nbecause it was rejected.",
    "start": "3477625",
    "end": "3483335"
  },
  {
    "text": " A better suitor on day d,\nthat's what the hypothesis says,",
    "start": "3483335",
    "end": "3498339"
  },
  {
    "text": "the invariant says. And now we just have to look\nat what happens on d plus 1. ",
    "start": "3498340",
    "end": "3505359"
  },
  {
    "text": "Well, either she has the\nsame suitor on d plus 1, or somebody better came along.",
    "start": "3505360",
    "end": "3511784"
  },
  {
    "text": "And so we're going to be done. ",
    "start": "3511784",
    "end": "3525150"
  },
  {
    "text": "She has the same or better\nsuitor on day d plus 1,",
    "start": "3525150",
    "end": "3535849"
  },
  {
    "text": "and that implies P is true\non d plus 1, and we're done.",
    "start": "3535850",
    "end": "3543330"
  },
  {
    "text": " All right, so I went\nthrough this proof. It was sort of\nobvious, but this is",
    "start": "3543330",
    "end": "3549620"
  },
  {
    "text": "the careful way\nyou'd write it down to show that the\ninvariant holds.",
    "start": "3549620",
    "end": "3554630"
  },
  {
    "text": "Any questions about\nthe invariant dilemma? ",
    "start": "3554630",
    "end": "3560930"
  },
  {
    "text": "All right, so things only\nget better for the girls. If she ever rejected somebody,\nshe's got somebody better.",
    "start": "3560930",
    "end": "3566260"
  },
  {
    "text": "So now we can prove\nthe main result, that everyone is married.",
    "start": "3566260",
    "end": "3572359"
  },
  {
    "start": "3572360",
    "end": "3582380"
  },
  {
    "text": "And again the proof will\nbe by contradiction. ",
    "start": "3582380",
    "end": "3592720"
  },
  {
    "text": "So we assume not\neveryone was married. ",
    "start": "3592720",
    "end": "3600361"
  },
  {
    "text": "Assume, for the purpose\nof contradiction, that some boy, B, we'll\ncall him, is not married.",
    "start": "3600362",
    "end": "3611650"
  },
  {
    "text": "Because if everyone is not\nmarried then some boy is not. If not everyone is married\nthen some boy is not married.",
    "start": "3611650",
    "end": "3616850"
  },
  {
    "text": " So when it terminates,\nB is not married.",
    "start": "3616850",
    "end": "3621950"
  },
  {
    "text": " Well, what do you know\nabout B if he was not",
    "start": "3621950",
    "end": "3627720"
  },
  {
    "text": "married at the end? ",
    "start": "3627720",
    "end": "3633680"
  },
  {
    "text": "PROFESSOR: He was\nrejected by everyone. PROFESSOR: He was\nrejected by everyone, because if at the end,\nhe's still under a balcony,",
    "start": "3633680",
    "end": "3640800"
  },
  {
    "text": "if he still had somebody\non his list, he'd be there. And he'd be getting married,\nbecause it's the end.",
    "start": "3640800",
    "end": "3648839"
  },
  {
    "text": "So this means that\nif B is not married, he's rejected by everybody. Yeah? AUDIENCE: [INAUDIBLE] list?",
    "start": "3648840",
    "end": "3655504"
  },
  {
    "text": "PROFESSOR: Oh, he's\non everybody's list. AUDIENCE: Yeah. PROFESSOR: Everybody\nhas everybody",
    "start": "3655504",
    "end": "3660950"
  },
  {
    "text": "of the opposite\nsex on their list, but he had to cross\neverybody off. That's true.",
    "start": "3660950",
    "end": "3666730"
  },
  {
    "text": "Yeah? AUDIENCE: That would mean\nthat everyone had somebody better on the same day that\n[INAUDIBLE] telling him she didn't want to be with him.",
    "start": "3666730",
    "end": "3673052"
  },
  {
    "text": "PROFESSOR: That's true. That means that B\ncrossed every girl off. B is rejected by\nevery girl, which",
    "start": "3673052",
    "end": "3679640"
  },
  {
    "text": "means every girl\nhas somebody better than B, which is not\npossible, because that would",
    "start": "3679640",
    "end": "3685020"
  },
  {
    "text": "mean every girl was married. And therefore, the equal number\nof boys and girls, that means B",
    "start": "3685020",
    "end": "3691830"
  },
  {
    "text": "would have been married. Good. All right, let's\nwrite that down.",
    "start": "3691830",
    "end": "3697089"
  },
  {
    "text": "This means that B was\nrejected by every girl. ",
    "start": "3697090",
    "end": "3707980"
  },
  {
    "text": "OK, that means that\nevery girl, by lemma 1,",
    "start": "3707980",
    "end": "3713320"
  },
  {
    "text": "has a better suitor, and\nthat's where we use lemma 1.",
    "start": "3713320",
    "end": "3722065"
  },
  {
    "start": "3722065",
    "end": "3727400"
  },
  {
    "text": "And that means that\nevery girl is married,",
    "start": "3727400",
    "end": "3736640"
  },
  {
    "text": "and that means that every\nboy is married, including B,",
    "start": "3736640",
    "end": "3743496"
  },
  {
    "text": "and that's a\ncontradiction, because we said B wasn't married. ",
    "start": "3743497",
    "end": "3748983"
  },
  {
    "text": "OK?  Everybody buy that proof?",
    "start": "3748983",
    "end": "3754643"
  },
  {
    "text": "Any questions about that?  Yeah, proof by contradiction\nis a pretty powerful technique.",
    "start": "3754643",
    "end": "3761716"
  },
  {
    "text": "Once you assume something\nis not going to be true, it gives you a lot of power\nto find a contradiction.",
    "start": "3761717",
    "end": "3767570"
  },
  {
    "text": " All right, so now we know\nthat the algorithm ends,",
    "start": "3767570",
    "end": "3773306"
  },
  {
    "text": "and everybody gets married. All's we got to do is show\nthat there's no rogue couples,",
    "start": "3773306",
    "end": "3780180"
  },
  {
    "text": "so let's do that. ",
    "start": "3780180",
    "end": "3788830"
  },
  {
    "text": "TMA produces a stable matching.",
    "start": "3788830",
    "end": "3794845"
  },
  {
    "start": "3794845",
    "end": "3802210"
  },
  {
    "text": "Now, how do you suppose\nwe're going to prove this? What's going to be the\napproach to prove this?",
    "start": "3802210",
    "end": "3807381"
  },
  {
    "text": "Yeah? AUDIENCE: Assume that\nthere's a rogue couple. PROFESSOR: Assume that\nthere's a rogue couple, that namely this is not true,\nso there must be rogue couple.",
    "start": "3807382",
    "end": "3815280"
  },
  {
    "text": "So let Bob and Gail be any\npair that are not married.",
    "start": "3815280",
    "end": "3830710"
  },
  {
    "start": "3830710",
    "end": "3838480"
  },
  {
    "text": "I need to prove the Bob\nand Gail are not rogue, and then we'll be fine. Because if it says everybody\nwho is not married is not rogue,",
    "start": "3838480",
    "end": "3845260"
  },
  {
    "text": "then we know we have\na stable matching. Now, there's a\ncouple of cases here.",
    "start": "3845260",
    "end": "3850860"
  },
  {
    "text": "Bob and Gail weren't\nmarried, so there's two ways that could have happened. ",
    "start": "3850860",
    "end": "3857960"
  },
  {
    "text": "What's one of them?  What's one reason\nthey might not be married, something that happened\nthat made that impossible?",
    "start": "3857960",
    "end": "3865580"
  },
  {
    "text": "Yeah? AUDIENCE: Gail rejected Bob. PROFESSOR: Good. Case one-- Gail rejected Bob.",
    "start": "3865580",
    "end": "3870680"
  },
  {
    "start": "3870680",
    "end": "3881329"
  },
  {
    "text": "Well, what do we know in that\ncase, if Gail rejected Bob? AUDIENCE: Gail had\nbetter suitors.",
    "start": "3881330",
    "end": "3887070"
  },
  {
    "text": "PROFESSOR: Gail has another\nsuitor that she likes better. And, in fact, what do we\nknow about who Gail married?",
    "start": "3887070",
    "end": "3896673"
  },
  {
    "text": "AUDIENCE: Better than Bob. PROFESSOR: Better\nthan Bob-- things only get better for the girls.",
    "start": "3896674",
    "end": "3901780"
  },
  {
    "text": "That's the lemma one. All right, so this means that\nGail marries someone that she",
    "start": "3901780",
    "end": "3915259"
  },
  {
    "text": "thinks is better than Bob.  And that's by lemma one.",
    "start": "3915260",
    "end": "3921369"
  },
  {
    "start": "3921370",
    "end": "3926460"
  },
  {
    "text": "Well, can Gail and Bob\nbe a rogue couple here? No, because Gail likes her\nspouse better than Bob,",
    "start": "3926460",
    "end": "3934970"
  },
  {
    "text": "so she's not going to be\nin a rogue affair with Bob. ",
    "start": "3934970",
    "end": "3940410"
  },
  {
    "text": "So that means that Gail\nand Bob are not rogue.",
    "start": "3940410",
    "end": "3949950"
  },
  {
    "start": "3949950",
    "end": "3957380"
  },
  {
    "text": "All right, case two is\nGail did not reject Bob.",
    "start": "3957380",
    "end": "3964890"
  },
  {
    "text": "She never did.  That's the other case,\nshe didn't reject Bob.",
    "start": "3964890",
    "end": "3973500"
  },
  {
    "text": "Could Bob have ever\nserenaded Gail in this case? No, because if he did and\nhe was never rejected,",
    "start": "3973500",
    "end": "3981220"
  },
  {
    "text": "they would have\nended up married. All right? So that means the Bob\nnever serenaded Gail.",
    "start": "3981220",
    "end": "3994495"
  },
  {
    "start": "3994495",
    "end": "4001390"
  },
  {
    "text": "What does that mean about\nhow Bob feels about Gail? Yeah? AUDIENCE: Bob must have\nnever serenaded for Gail.",
    "start": "4001390",
    "end": "4008670"
  },
  {
    "text": "PROFESSOR: Yeah, Bob\nnever got far enough down on his list to serenade Gail.",
    "start": "4008670",
    "end": "4014780"
  },
  {
    "text": "He got married before\nhe got down there.",
    "start": "4014780",
    "end": "4019830"
  },
  {
    "text": "All right, so that\nmeans that Gail is lower",
    "start": "4019830",
    "end": "4026850"
  },
  {
    "text": "on Bob's list than Bob's wife.",
    "start": "4026850",
    "end": "4031930"
  },
  {
    "start": "4031930",
    "end": "4036990"
  },
  {
    "text": "And that means that\nthey're not rogue, because Bob likes his\nwife better than Gail.",
    "start": "4036990",
    "end": "4042859"
  },
  {
    "start": "4042860",
    "end": "4053380"
  },
  {
    "text": "All right, so in each case, the\ncases clearly cover everything. Gail rejected Bob,\nor she didn't.",
    "start": "4053380",
    "end": "4058569"
  },
  {
    "text": "Either way, Gail and\nBob are not rogue. So that means there's\nno rogue couples,",
    "start": "4058570",
    "end": "4069800"
  },
  {
    "text": "and that implies M is\nstable, TMA is stable. ",
    "start": "4069800",
    "end": "4076336"
  },
  {
    "text": "OK? All right, so TMA\nterminates, everyone",
    "start": "4076336",
    "end": "4081700"
  },
  {
    "text": "gets married, no rogue\ncouples, nice outlook. So we're done.",
    "start": "4081700",
    "end": "4087120"
  },
  {
    "text": "We actually proved it works. One issue left to\nthink about here. Any questions on that before we\nlaunch off into the last issue?",
    "start": "4087120",
    "end": "4096047"
  },
  {
    "text": "AUDIENCE: Is it unique?  PROFESSOR: Is it unique?",
    "start": "4096048",
    "end": "4101649"
  },
  {
    "text": "TMA gives you a unique answer\nbecause it's an algorithm.",
    "start": "4101649",
    "end": "4107429"
  },
  {
    "text": "It's deterministic. But there may be other\nstable matchings.",
    "start": "4107430",
    "end": "4113649"
  },
  {
    "text": "OK, so there's not just one\nstable matching, necessarily. You could make examples with\nmultiple stable matchings.",
    "start": "4113649",
    "end": "4120170"
  },
  {
    "text": "That's a great question. Any other questions? ",
    "start": "4120170",
    "end": "4126410"
  },
  {
    "text": "All right. Oh, yeah? AUDIENCE: Is there\ngenerally any other way to assess optimality besides\nthe fact that it's stable, or--",
    "start": "4126410",
    "end": "4133608"
  },
  {
    "text": "PROFESSOR: Yeah, you can\nmake up lots of them. You could put\nweights on the edges and get a min-weight matching.",
    "start": "4133608",
    "end": "4139750"
  },
  {
    "text": "You could try to get\nthe perfect matching",
    "start": "4139750",
    "end": "4144799"
  },
  {
    "text": "with the least unfavorable\nmarriage kind of thing. There's a lot of\ncriteria you can make.",
    "start": "4144800",
    "end": "4150649"
  },
  {
    "text": "This one turns out to be useful\nin practice in a variety ways that we'll talk\nabout, and also have",
    "start": "4150649",
    "end": "4156609"
  },
  {
    "text": "a nice, fast, simple\nalgorithm that can actually run in a distributed\nenvironment, which is really nice.",
    "start": "4156609",
    "end": "4162830"
  },
  {
    "text": "So it is probably the\nmost practical approach to matching out there.",
    "start": "4162830",
    "end": "4168278"
  },
  {
    "text": "Any other questions?  OK, the last\nissue-- I don't know",
    "start": "4168279",
    "end": "4173746"
  },
  {
    "text": "if we still have the issues\nup there-- is fairness. So who thinks the TMA is\nfavorable to the boys?",
    "start": "4173746",
    "end": "4183394"
  },
  {
    "text": " Just a couple. Who thinks it's\nfavorable to the girls?",
    "start": "4183394",
    "end": "4189989"
  },
  {
    "text": "More, that's the\ncommon response. Who thinks you can't even\ndefine it one way or the other? It's unclear and\nhopeless to decide.",
    "start": "4189990",
    "end": "4197449"
  },
  {
    "text": "OK, well, it seems like\nmaybe the girls, because they get the best of their suitors.",
    "start": "4197450",
    "end": "4204170"
  },
  {
    "text": "They sit back, and\nthey just take the best as they come along. On the other hand,\nthe boys do try",
    "start": "4204170",
    "end": "4209700"
  },
  {
    "text": "to go out and get\ntheir first choice. The girls have to wait. And Mr. Right may\nnever come along.",
    "start": "4209700",
    "end": "4215402"
  },
  {
    "text": "The boys are out there. I'm going to my first choice,\nand they get denied, OK, they just move right on\nto the next choice.",
    "start": "4215402",
    "end": "4222670"
  },
  {
    "text": "So this is actually\none of these questions of study in sociology. In the animal species, which is\nbetter, proposers or acceptors?",
    "start": "4222670",
    "end": "4231550"
  },
  {
    "text": "What's the more powerful result? Who has the better\npower in courtship? It turns out that we can\nanswer this question in a very",
    "start": "4231550",
    "end": "4240000"
  },
  {
    "text": "clear way, and prove it here. And the answer is the boys\nhave all the power here.",
    "start": "4240000",
    "end": "4246570"
  },
  {
    "text": "This is very favorable to\nthe boys, and we'll see why. Now, to prove that, we\nneed some definitions.",
    "start": "4246570",
    "end": "4253260"
  },
  {
    "start": "4253260",
    "end": "4274190"
  },
  {
    "text": "OK, so I've got to define\na couple things here to be able to prove this. The first is, for any\ncollection of preference lists,",
    "start": "4274190",
    "end": "4282540"
  },
  {
    "text": "we're going to let S be the\nset of all stable matchings.",
    "start": "4282540",
    "end": "4289280"
  },
  {
    "start": "4289280",
    "end": "4296500"
  },
  {
    "text": "Now, we know that S\nis not empty, right? How do we know that\nS is not empty here?",
    "start": "4296500",
    "end": "4303013"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] stable. PROFESSOR: Yeah, because TMA\nproduces a stable matching, so we know that S is not empty.",
    "start": "4303014",
    "end": "4309350"
  },
  {
    "text": "There's at least one. And, in fact, there\ncould be many.",
    "start": "4309350",
    "end": "4314889"
  },
  {
    "text": "Now, for each person, P, we\ndefine the realm of possibility",
    "start": "4314890",
    "end": "4339310"
  },
  {
    "text": "for P to be the set of\nmates that you might",
    "start": "4339310",
    "end": "4347530"
  },
  {
    "text": "have in a stable matching. So it's a set queue\nof people for which there exists a matching\nthat's stable such that you're",
    "start": "4347530",
    "end": "4357660"
  },
  {
    "text": "mated to that person. So I've written this\nin some-- that's sort of complicated\nmathematics, but somebody",
    "start": "4357660",
    "end": "4365490"
  },
  {
    "text": "is in your realm of possibility\nif there is a stable matching where you married them.",
    "start": "4365490",
    "end": "4370540"
  },
  {
    "text": "If it exists, there's\na stable matching where you could marry them. And this is vaguely like\nyou see sometimes, you're",
    "start": "4370540",
    "end": "4377539"
  },
  {
    "text": "going out with somebody and your\nparents say, oh, they're not in your league, or something. This is a mathematical\nformulation",
    "start": "4377539",
    "end": "4384060"
  },
  {
    "text": "for that, that there is some way\nin the world to marry everybody up, so it's all\nstable, and you could",
    "start": "4384060",
    "end": "4390610"
  },
  {
    "text": "be married to that person. OK? Let's do an example\nwith four people.",
    "start": "4390610",
    "end": "4398594"
  },
  {
    "start": "4398595",
    "end": "4411090"
  },
  {
    "text": "All right, so for example, say\nwe have Brad, Jen, and Angelina",
    "start": "4411090",
    "end": "4419920"
  },
  {
    "text": "again. And of course Brad likes\nAngelina and vice versa.",
    "start": "4419920",
    "end": "4425800"
  },
  {
    "text": "Gen likes Brad, and then\nthere's Billy Bob here. ",
    "start": "4425800",
    "end": "4432719"
  },
  {
    "text": "All right. Now, Brad is not\nrealistic for Jen.",
    "start": "4432720",
    "end": "4438330"
  },
  {
    "text": "Brad Is not in Jen's\nrealm of possibility, because in any perfect matching\nwhere Brad marries Jen,",
    "start": "4438330",
    "end": "4447120"
  },
  {
    "text": "you're going to\nhave a rogue couple. Brad's going to go for Angelina.",
    "start": "4447120",
    "end": "4452820"
  },
  {
    "text": "So Brad is not within\nJen's realm of possibility. And similarly, vice\nversa-- Jen is not",
    "start": "4452820",
    "end": "4459350"
  },
  {
    "text": "in Brad's realm of possibility,\nbecause there's no stable matching where they're\nmarried, in this scenario,",
    "start": "4459350",
    "end": "4464720"
  },
  {
    "text": "for this problem. All right? Now that we have\nthat notion, we can",
    "start": "4464720",
    "end": "4470900"
  },
  {
    "text": "define who your optimal mate is,\nand who your pessimal mate is, the worst case.",
    "start": "4470900",
    "end": "4476804"
  },
  {
    "start": "4476804",
    "end": "4491950"
  },
  {
    "text": "All right, so we define\na person's optimal mate",
    "start": "4491950",
    "end": "4506800"
  },
  {
    "text": "is his or her favorite in\nthe realm of possibility.",
    "start": "4506800",
    "end": "4512290"
  },
  {
    "start": "4512290",
    "end": "4522890"
  },
  {
    "text": "So your optimal mate is\nnot your favorite overall, it's just your favorite\namong those who are possible,",
    "start": "4522890",
    "end": "4529730"
  },
  {
    "text": "that there is a stable\nmatching that you could be matched to that person. And similarly, you have\na person's pessimal mate",
    "start": "4529730",
    "end": "4543860"
  },
  {
    "text": "is your least favorite from\nthe realm of possibility.",
    "start": "4543860",
    "end": "4551449"
  },
  {
    "text": "OK? Because you have\nall the people you might be married to\nin stable matchings.",
    "start": "4551450",
    "end": "4556789"
  },
  {
    "text": "Your favorite is the\noptimal, your least favorite is the pessimal. Any questions about that?",
    "start": "4556789",
    "end": "4562090"
  },
  {
    "text": "Does that make sense? And you don't count\nthe ones you can't be married to, because if you\nwere, it would be unstable.",
    "start": "4562090",
    "end": "4568310"
  },
  {
    "text": " OK, now we can state the\nblockbuster theorems here.",
    "start": "4568310",
    "end": "4576800"
  },
  {
    "text": "Theorem four says\nTMA marries every boy",
    "start": "4576800",
    "end": "4588369"
  },
  {
    "text": "with his optimal mate. ",
    "start": "4588370",
    "end": "4596630"
  },
  {
    "text": "Theorem five,\nprobably can guess, TMA marries every girl\nwith her pessimal mate.",
    "start": "4596630",
    "end": "4608230"
  },
  {
    "start": "4608230",
    "end": "4613900"
  },
  {
    "text": "All right, so it is\noptimal for every boy. They get the best possible they\ncould have in stable marriages,",
    "start": "4613900",
    "end": "4619960"
  },
  {
    "text": "and every girl gets the\nworst possible mate. Now, you wouldn't necessarily\nthink that when you first",
    "start": "4619960",
    "end": "4626110"
  },
  {
    "text": "look at that algorithm, where\nthe boys are working down their list, and the girls are\njust getting better and better.",
    "start": "4626110",
    "end": "4632070"
  },
  {
    "text": "But that's the case. Now, let's see, I'm not going\nto have time to prove them both, but I will prove theorem five.",
    "start": "4632070",
    "end": "4639715"
  },
  {
    "text": "And I'm going to\nassume theorem four is true to prove theorem five. Maybe we'll do theorem four\ntomorrow in recitation.",
    "start": "4639715",
    "end": "4646659"
  },
  {
    "text": "I don't know. So let's do theorem five so\nyou can see how this works. ",
    "start": "4646660",
    "end": "4653300"
  },
  {
    "text": "The proof is by\ncontradiction, so we'll",
    "start": "4653300",
    "end": "4667667"
  },
  {
    "text": "assume theorem four\nis true, and we'll prove the proof of theorem\nfive by contradiction.",
    "start": "4667667",
    "end": "4675010"
  },
  {
    "start": "4675010",
    "end": "4683039"
  },
  {
    "text": "So assume there was a stable\nmatching where a girl got",
    "start": "4683040",
    "end": "4689040"
  },
  {
    "text": "worse off than in TMA. All right?",
    "start": "4689040",
    "end": "4694060"
  },
  {
    "text": "Assume three and\nfive is not true, then there's some girl\nin some stable matching.",
    "start": "4694060",
    "end": "4699679"
  },
  {
    "text": "So suppose, for the\npurpose of contradiction, that there exists\na stable matching,",
    "start": "4699680",
    "end": "4710230"
  },
  {
    "text": "we'll call it M,\nwhere some girl,",
    "start": "4710230",
    "end": "4720760"
  },
  {
    "text": "and she fares worse than in TMA. ",
    "start": "4720760",
    "end": "4728202"
  },
  {
    "text": "I want to show that\nresults in a contradiction.  And the proof is pretty\nsimple, just a simple picture.",
    "start": "4728202",
    "end": "4735982"
  },
  {
    "text": " So G did worse in M than in TMA.",
    "start": "4735982",
    "end": "4744295"
  },
  {
    "start": "4744295",
    "end": "4754480"
  },
  {
    "text": "All right, so let's let B\nprime be the mate of G in M.",
    "start": "4754480",
    "end": "4764475"
  },
  {
    "text": "So girl G did worse in M than\nin TMA, so here's her mate in M,",
    "start": "4764475",
    "end": "4770550"
  },
  {
    "text": "and let B be her mate in TMA. ",
    "start": "4770550",
    "end": "4778080"
  },
  {
    "text": "Who does she like\nbetter, B or B prime? B, because we're saying that\nshe did worse in M than she did",
    "start": "4778080",
    "end": "4785599"
  },
  {
    "text": "in TMA, so she likes B better. ",
    "start": "4785600",
    "end": "4791540"
  },
  {
    "text": "And let G prime be the mate\nof B in M. Now, who does",
    "start": "4791540",
    "end": "4800580"
  },
  {
    "text": "B like better, G or G prime? [INTERPOSING VOICES] ",
    "start": "4800580",
    "end": "4807500"
  },
  {
    "text": "PROFESSOR: Not G prime. B got married to G prime in M,\nbut what does theorem four say?",
    "start": "4807500",
    "end": "4815739"
  },
  {
    "text": "Yeah, G. Theorem four\nsays that across all the stable matchings, B gets\nhis favorite mate in TMA.",
    "start": "4815740",
    "end": "4824780"
  },
  {
    "text": "So G prime is in the realm\nof possibility, and so is G, and we know from\ntheorem four B likes G",
    "start": "4824780",
    "end": "4830890"
  },
  {
    "text": "best, better than G prime,\nbecause of theorem four. So what happened here?",
    "start": "4830890",
    "end": "4838260"
  },
  {
    "text": "There's a rogue couple in M. B\nand G are a rogue couple in M.",
    "start": "4838260",
    "end": "4849619"
  },
  {
    "text": "And that means that\nM is not stable, and that is a contradiction. ",
    "start": "4849620",
    "end": "4857550"
  },
  {
    "text": "All right? And so theorem five\nis true, because we",
    "start": "4857550",
    "end": "4864010"
  },
  {
    "text": "assumed we had a stable\nmatching M where there's a girl who did worse off.",
    "start": "4864010",
    "end": "4870810"
  },
  {
    "text": "So it really pays off to be\naggressive party in courtship. Everybody lives\nhappily ever after,",
    "start": "4870810",
    "end": "4876220"
  },
  {
    "text": "especially the boys in TMA. Now, TMA arises in\nlots of applications.",
    "start": "4876220",
    "end": "4882059"
  },
  {
    "text": "The most famous is\nthe matching program that's used to match MDs\nto residency programs.",
    "start": "4882060",
    "end": "4888480"
  },
  {
    "text": "So how many pre-meds are here? There's one, at least. So you're going to go to\nmedical school some day,",
    "start": "4888480",
    "end": "4895575"
  },
  {
    "text": "and at the end of\nmedical school, there's a big day\ncalled match day, where you get assigned to a\nhospital for your internship,",
    "start": "4895576",
    "end": "4902489"
  },
  {
    "text": "and the way that works\nis using this algorithm. And who do you suppose is\nthe boy in this algorithm?",
    "start": "4902490",
    "end": "4908389"
  },
  {
    "text": "AUDIENCE: The hospital. PROFESSOR: The hospital. And they want it so that\nwhen they make the matchings,",
    "start": "4908390",
    "end": "4913560"
  },
  {
    "text": "that there's not some pair of an\nintern or doctor in a hospital where they'd like each other\nbetter than what they got.",
    "start": "4913560",
    "end": "4920810"
  },
  {
    "text": "This is used in online dating\nfor the obvious reasons, and we actually use this\nalgorithm lot at Akamai",
    "start": "4920810",
    "end": "4926670"
  },
  {
    "text": "to load balance\ntraffic on the web. And here you have the\nboys are web servers,",
    "start": "4926670",
    "end": "4933420"
  },
  {
    "text": "and the girls are\nrequests for service. And the goals are to\nbalance performance,",
    "start": "4933420",
    "end": "4940960"
  },
  {
    "text": "getting a server that's\nnearby you that's fast. And on the other side,\nour cost, and by who",
    "start": "4940960",
    "end": "4947190"
  },
  {
    "text": "we make a boy and a girl, we can\ntrade off cost for performance in a very nice, distributed way.",
    "start": "4947190",
    "end": "4953210"
  },
  {
    "text": "All right, so\nthat's it for today. ",
    "start": "4953210",
    "end": "4960152"
  }
]