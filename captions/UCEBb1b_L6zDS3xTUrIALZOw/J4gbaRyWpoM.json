[
  {
    "text": "[SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "5477"
  },
  {
    "start": "5478",
    "end": "14940"
  },
  {
    "text": "PROFESSOR: Recovering the\nshapes of objects using image brightness measurements.",
    "start": "14940",
    "end": "21440"
  },
  {
    "text": "And we talked at some length\nabout photometric stereo, which was a method that\ngets us the result.",
    "start": "21440",
    "end": "31490"
  },
  {
    "text": "But it's kind of\nunnatural in that it requires multiple exposures. And we're about to\ntransition into shape",
    "start": "31490",
    "end": "39769"
  },
  {
    "text": "from shading, which is\na method for doing this with a single image. And we've already talked\nabout a few different types",
    "start": "39770",
    "end": "48530"
  },
  {
    "text": "of surface materials and\ntheir reflecting properties. In particular, we talked\nabout the Lambertian surfaces,",
    "start": "48530",
    "end": "56210"
  },
  {
    "text": "and we started to\ntalk a little bit about Hapke, which is a\nmodel for the reflection",
    "start": "56210",
    "end": "63770"
  },
  {
    "text": "from rocky planets. And I want to introduce\na third one, which",
    "start": "63770",
    "end": "71149"
  },
  {
    "text": "has to do with microscopy. So that's a scanning\nelectron microscope. But first, for\ncomparison, here's",
    "start": "71150",
    "end": "78950"
  },
  {
    "text": "some pictures of transmission\nelectron microscopes. As you probably\nknow, they allow you",
    "start": "78950",
    "end": "84920"
  },
  {
    "text": "to achieve a huge\nmagnification, much larger",
    "start": "84920",
    "end": "90740"
  },
  {
    "text": "than with visible light,\nbecause you're limited by the wavelength of light.",
    "start": "90740",
    "end": "96080"
  },
  {
    "text": "And the wavelength of\nelectrons at kilovolt energies is very much shorter,\npotentially allowing you",
    "start": "96080",
    "end": "104810"
  },
  {
    "text": "to image large molecules. And they haven't yet\nachieved their limit.",
    "start": "104810",
    "end": "111320"
  },
  {
    "text": "They theoretically would be able\nto resolve individual molecules and atoms, and in\nsome cases, they do.",
    "start": "111320",
    "end": "117620"
  },
  {
    "text": "Anyway, if you do a search,\nelectron transmission, electron microscope, you\nclick on Images, you",
    "start": "117620",
    "end": "123649"
  },
  {
    "text": "get all of these pictures of\nthese types of microscopes. And then eventually,\nyou get some pictures",
    "start": "123650",
    "end": "131390"
  },
  {
    "text": "of things that might have\nbeen imaged with an electron microscope, like this\nthing on the right.",
    "start": "131390",
    "end": "139520"
  },
  {
    "text": "And this is a cell with a\nnucleus and some vacuoles",
    "start": "139520",
    "end": "144800"
  },
  {
    "text": "and so on. And it's an extremely\nuseful technique",
    "start": "144800",
    "end": "150260"
  },
  {
    "text": "for seeing fine detail,\nbut it has its limitations",
    "start": "150260",
    "end": "156650"
  },
  {
    "text": "in terms of interpretation. So you look at-- well, what we will\ndo in the moment",
    "start": "156650",
    "end": "165020"
  },
  {
    "text": "is look at the comparison with\nother kinds of microscopy. So let's see.",
    "start": "165020",
    "end": "170090"
  },
  {
    "text": "I was going to\nclick on this thing. So I guess you can\nmake sense of it,",
    "start": "170090",
    "end": "177030"
  },
  {
    "text": "but it's a very thin\nslice of something, and you'd need to know the\ndetails of what that is.",
    "start": "177030",
    "end": "186330"
  },
  {
    "text": "Now if in comparison, we do a\nsearch on the scanning electron microscopes and click\non Images, we get this.",
    "start": "186330",
    "end": "195030"
  },
  {
    "text": "And you have to\nscroll down before you get a picture of a microscope. Why is that?",
    "start": "195030",
    "end": "200560"
  },
  {
    "text": "Well, because scanning\nelectron microscopes make these great pictures\nthat people love.",
    "start": "200560",
    "end": "206610"
  },
  {
    "text": "The transmission electron\nmicroscope make great pictures that scientists involved\nin the research love,",
    "start": "206610",
    "end": "213180"
  },
  {
    "text": "but they're not\neasily interpretable whereas these scanning\nelectron microscope pictures,",
    "start": "213180",
    "end": "219510"
  },
  {
    "text": "they're very popular. They're just fabulous. I mean, look at that.",
    "start": "219510",
    "end": "226770"
  },
  {
    "text": "I mean, you can\nimmediately see the head of this jumping spider, and\nit's six of its eight eyes",
    "start": "226770",
    "end": "235140"
  },
  {
    "text": "and so on. And why is that? ",
    "start": "235140",
    "end": "244000"
  },
  {
    "text": "Beautiful pictures that we\nfind very easy to interpret, know exactly what that is.",
    "start": "244000",
    "end": "249010"
  },
  {
    "text": "And this is a surface\nof who knows what. But you can immediately\ntell the shape and where",
    "start": "249010",
    "end": "254740"
  },
  {
    "text": "the crevices are and so on. So the point is that these\nscanning electron microscopes",
    "start": "254740",
    "end": "262720"
  },
  {
    "text": "produce images that we\nfind easy to interpret. So I don't know.",
    "start": "262720",
    "end": "268419"
  },
  {
    "text": "Can you think of a reason why\nwe don't find the transmission electron microscope images\nso easy to interpret,",
    "start": "268420",
    "end": "275169"
  },
  {
    "text": "but these we can given\nwhere we are in the course?",
    "start": "275170",
    "end": "282225"
  },
  {
    "text": " Well, if you look\nat these pictures,",
    "start": "282225",
    "end": "287830"
  },
  {
    "text": "you see that there's a\nvariation in brightness. So that's pretty obvious.",
    "start": "287830",
    "end": "292889"
  },
  {
    "text": "But it's a variation\nthat's sort of special. As you approach\nthe edges, things",
    "start": "292890",
    "end": "299300"
  },
  {
    "text": "get brighter whereas if you're\nlooking at the frontal surface,",
    "start": "299300",
    "end": "305400"
  },
  {
    "text": "they're darker. So there's a variation\nin brightness",
    "start": "305400",
    "end": "310460"
  },
  {
    "text": "depending on\nsurface orientation. Ta-da, that's what\nwe're talking about. So the reason we find these\nimages so appealing and easy",
    "start": "310460",
    "end": "318590"
  },
  {
    "text": "to interpret is because\nthey have shading. They Have a dependence\nof brightness",
    "start": "318590",
    "end": "325760"
  },
  {
    "text": "on surface orientation. And so this is obviously\nthe head of some moth.",
    "start": "325760",
    "end": "332449"
  },
  {
    "text": "You can see the compound eyes. You can see the schnozzle\nthere all rolled up. So it's so easy to\nsee what's going on.",
    "start": "332450",
    "end": "342690"
  },
  {
    "text": "There's an alien landing on--  and so the only thing\nthat's a little bit odd",
    "start": "342690",
    "end": "351250"
  },
  {
    "text": "is if you look at these\nshapes, so this is obviously some ovoid football-like shape,\nit's darkest in the middle,",
    "start": "351250",
    "end": "361750"
  },
  {
    "text": "and it gets bright\ntowards the edges. So that's sort of\nanti-Lambertian.",
    "start": "361750",
    "end": "367720"
  },
  {
    "text": "With Lambertian, we get the\nbrightest surface reflection where the surface is\nperpendicular to the incident",
    "start": "367720",
    "end": "374950"
  },
  {
    "text": "light. And so we expect that as you\napproach the occluding contour,",
    "start": "374950",
    "end": "380470"
  },
  {
    "text": "it gets darker. So if we look at the isophotes\non, say, the image of a sphere,",
    "start": "380470",
    "end": "386050"
  },
  {
    "text": "it'll be concentric curves\nthat sort of drop off towards the edge. And these go the other way.",
    "start": "386050",
    "end": "393380"
  },
  {
    "text": "And so that's kind\nof interesting because if we grew up in a world\nwhere most things were sort",
    "start": "393380",
    "end": "400180"
  },
  {
    "text": "of Lambertian,\nwe'd get very good at interpreting shape of things\nthat have that type of surface.",
    "start": "400180",
    "end": "406840"
  },
  {
    "text": "And yet we're able to interpret\nthe shape of this very well.",
    "start": "406840",
    "end": "412449"
  },
  {
    "text": "And at one point, I had a UROP\ntake a bunch of these pictures",
    "start": "412450",
    "end": "417610"
  },
  {
    "text": "and reverse the contrast\nbecause they should be much easier to interpret. Why didn't anyone think of that?",
    "start": "417610",
    "end": "423340"
  },
  {
    "text": "And well, it was not a very\nsuccessful UROP assignment because with the\nreverse contrast,",
    "start": "423340",
    "end": "429250"
  },
  {
    "text": "the pictures didn't\nlook any better. In fact, they were marginally\nharder to interpret,",
    "start": "429250",
    "end": "434320"
  },
  {
    "text": "and we had some\nexplanations for that. So it shows a couple of things.",
    "start": "434320",
    "end": "439590"
  },
  {
    "text": "First of all, this modality\nof microscopic imaging is very nice from\nour point of view",
    "start": "439590",
    "end": "448480"
  },
  {
    "text": "because we can\nunderstand these images. We don't need some\ncomplicated calculation.",
    "start": "448480",
    "end": "453820"
  },
  {
    "text": "And the other one is that the\nhuman visual system apparently can do this as\nwell, and it's not",
    "start": "453820",
    "end": "459820"
  },
  {
    "text": "hardwired to have any particular\nidea about what the surface",
    "start": "459820",
    "end": "464920"
  },
  {
    "text": "material is. It can adapt and deal-- I mean, we can see that this\nis not a Lambertian surface.",
    "start": "464920",
    "end": "471940"
  },
  {
    "text": "At the same time, we can\nhave a pretty good idea of what the shape is. I mean, maybe not\nmetrically accurate,",
    "start": "471940",
    "end": "478240"
  },
  {
    "text": "but that's another story. OK, so that's what we're\ngoing to talk about next.",
    "start": "478240",
    "end": "485960"
  },
  {
    "text": "So let me get rid of that. ",
    "start": "485960",
    "end": "491940"
  },
  {
    "text": "How do we do this? How do we implement this? ",
    "start": "491940",
    "end": "498740"
  },
  {
    "text": "Yes, I want to shut down. ",
    "start": "498740",
    "end": "505800"
  },
  {
    "text": "So first, a little note on\nhow these scanning electron microscopes works. ",
    "start": "505800",
    "end": "512679"
  },
  {
    "text": "You're all probably too young\nto remember cathode ray tubes, but people used to create images\nby deflecting electron beams",
    "start": "512679",
    "end": "522789"
  },
  {
    "text": "and having them impinge on\nphosphorus, which would then glow. And those devices had\na source of electrons.",
    "start": "522789",
    "end": "530590"
  },
  {
    "text": "Basically, you're sort\nof boiling electrons off some surface. So that's a little heated coil.",
    "start": "530590",
    "end": "537730"
  },
  {
    "text": "So that's the\nsource of electrons. ",
    "start": "537730",
    "end": "542839"
  },
  {
    "text": "And they just sort of\nbubble off the surface. And then you accelerate them\nby having some electrode, which",
    "start": "542840",
    "end": "558830"
  },
  {
    "text": "we'll call the anode. And, well, a lot of the\nelectrons end up there.",
    "start": "558830",
    "end": "564090"
  },
  {
    "text": "But other electrons are\naccelerated through. And then we have lenses.",
    "start": "564090",
    "end": "569100"
  },
  {
    "text": "And these typically\nare magnetic. And they can also be\nelectrostatic lenses.",
    "start": "569100",
    "end": "577240"
  },
  {
    "text": "And the idea is that\nwe're going to focus this beam onto some object.",
    "start": "577240",
    "end": "582370"
  },
  {
    "text": "So make some space for\nsome object down here.",
    "start": "582370",
    "end": "587420"
  },
  {
    "text": "So with suitable cleverness\nand enough money,",
    "start": "587420",
    "end": "592600"
  },
  {
    "text": "you can focus that beam\ndown to a very small point.",
    "start": "592600",
    "end": "597639"
  },
  {
    "text": "And then what do you do? Well, the electrons hit that\nobject, and some of them",
    "start": "597640",
    "end": "604660"
  },
  {
    "text": "bounce off. So we have backscatter,\nbackscatter the electrons.",
    "start": "604660",
    "end": "612220"
  },
  {
    "text": "But most of them penetrate. And in the process,\nthey lose energy",
    "start": "612220",
    "end": "617290"
  },
  {
    "text": "and create secondary electrons. ",
    "start": "617290",
    "end": "624090"
  },
  {
    "text": "So you can sort of think of\nthem as bumping into molecules and losing some\nenergy and creating--",
    "start": "624090",
    "end": "633170"
  },
  {
    "text": "bumping electrons\noff ionizing things. And some of those\nsecondary electrons",
    "start": "633170",
    "end": "639260"
  },
  {
    "text": "come out of the\nobject, and they're gathered by some kind of\nelectrode, which is also--",
    "start": "639260",
    "end": "644420"
  },
  {
    "start": "644420",
    "end": "651800"
  },
  {
    "text": "there are other effects. For example, there will be some\nfluorescence at X-ray energies.",
    "start": "651800",
    "end": "658529"
  },
  {
    "text": "So some people measure\nthe X-rays coming off. And there may also be\nvisible light and so on.",
    "start": "658530",
    "end": "665080"
  },
  {
    "text": "But we're going to focus\non the secondary electrons because that's what's\nused in imaging",
    "start": "665080",
    "end": "670830"
  },
  {
    "text": "and creating those\nimages that I showed you. So why does the\nsecondary electron",
    "start": "670830",
    "end": "677820"
  },
  {
    "text": "current, which we measure\nhere, vary with the surface?",
    "start": "677820",
    "end": "683700"
  },
  {
    "text": "Well, first of all,\nthe way I've drawn it, it's not a whole lot\nof use because we just",
    "start": "683700",
    "end": "689250"
  },
  {
    "text": "get one measurement. So what we really want\nto do is scan this.",
    "start": "689250",
    "end": "694350"
  },
  {
    "text": "So some of these\nelectrodes-- well, typically, it's\ndone magnetically. As you know, electron in a\nmagnetic field will turn.",
    "start": "694350",
    "end": "702630"
  },
  {
    "text": "And so using two\northogonal magnetic fields that you can control\nfrom the computer,",
    "start": "702630",
    "end": "707940"
  },
  {
    "text": "you can direct that\nbeam anywhere you want, and you can scan the object\nin a raster-like fashion,",
    "start": "707940",
    "end": "714780"
  },
  {
    "text": "for example. So this always reminds me of\nMr. Farnborough, who has--",
    "start": "714780",
    "end": "730730"
  },
  {
    "text": "his claim to fame is that he\nhas a dirt road named after him a few miles from where I live.",
    "start": "730730",
    "end": "735980"
  },
  {
    "text": "He's the guy who\ninvented television. Nobody's giving him\nany credit for it,",
    "start": "735980",
    "end": "741930"
  },
  {
    "text": "and that's because he was a\nvery clever person but not",
    "start": "741930",
    "end": "747230"
  },
  {
    "text": "a good businessman,\nand he got shafted by the people who\nran RCA, et cetera.",
    "start": "747230",
    "end": "753290"
  },
  {
    "text": "Anyway, probably\nnever heard of him. But when he was\nasked by a reporter, you know, how did you\ncome up with this idea--",
    "start": "753290",
    "end": "759590"
  },
  {
    "text": "I mean, to us now, it\nall seems pretty obvious. But at the time,\nwhat was available?",
    "start": "759590",
    "end": "764870"
  },
  {
    "text": "Well, there was telegraph,\nthe beginnings of telephone,",
    "start": "764870",
    "end": "771170"
  },
  {
    "text": "and the big question was audio\nis a one dimensional signal.",
    "start": "771170",
    "end": "776630"
  },
  {
    "text": "So we understand how to measure\nthat, how to transmit it,",
    "start": "776630",
    "end": "781760"
  },
  {
    "text": "how to reproduce it. But this image is 2D. How do you do that? And there were all kinds of\ncrazy, harebrained schemes.",
    "start": "781760",
    "end": "790610"
  },
  {
    "text": "And supposedly, his\ninspiration were the furrows",
    "start": "790610",
    "end": "796220"
  },
  {
    "text": "in his father's\nfarm because I guess he had to walk behind the\noxen and hold the plow.",
    "start": "796220",
    "end": "804950"
  },
  {
    "text": "And he decided that, well, just\nas I can plow this whole area",
    "start": "804950",
    "end": "810020"
  },
  {
    "text": "by turning it into a 1D problem,\nI can do the same with images.",
    "start": "810020",
    "end": "815990"
  },
  {
    "text": "To be honest, I think that's\nan explanatio he came up with when a reporter asked\nbecause a lot of times, people",
    "start": "815990",
    "end": "823550"
  },
  {
    "text": "need some way of\nunderstanding how on Earth you ever got to the solution. And then you have to\ndream up some reason.",
    "start": "823550",
    "end": "830540"
  },
  {
    "text": "So anyway, that's what he did. And that's applied here. So we scan in a raster fashion.",
    "start": "830540",
    "end": "836150"
  },
  {
    "text": "And then what do we do? We use the current measured\nhere to modulate a light beam in display, either another\nCRT or read it into a computer",
    "start": "836150",
    "end": "846590"
  },
  {
    "text": "and display it on an LCD. And then you can control\nthe magnification.",
    "start": "846590",
    "end": "852830"
  },
  {
    "text": "How do you do that? Well, you just control\nthe deflection. So if you deflect\nthe beam a lot,",
    "start": "852830",
    "end": "860030"
  },
  {
    "text": "you don't get much\nmagnification. And as you reduce\nthe deflection, you get more and\nmore magnification.",
    "start": "860030",
    "end": "866060"
  },
  {
    "text": "And so you can get\nthousands, tens of thousands",
    "start": "866060",
    "end": "871940"
  },
  {
    "text": "compared to optical\nmicroscopy, which maxes out below 1,000 pretty much\ndespite all sorts of incredibly",
    "start": "871940",
    "end": "879050"
  },
  {
    "text": "clever tricks. OK, why do we create\nshaded images?",
    "start": "879050",
    "end": "885080"
  },
  {
    "text": "So we have to look at\nhow the surface interacts with the beam.",
    "start": "885080",
    "end": "890720"
  },
  {
    "text": "So here's the beam coming in,\nelectrons at several electron",
    "start": "890720",
    "end": "896379"
  },
  {
    "text": "volts. And they hit this material,\nand they start interacting. They bump into things, and they\ncreate secondary electrons.",
    "start": "896380",
    "end": "904030"
  },
  {
    "text": "And they lose energy as they go. So the first few rather\nhigh energy, and then they get lower energy, and those\nguys bump into things.",
    "start": "904030",
    "end": "912070"
  },
  {
    "text": "And most of those electrons\njust disappear in this object,",
    "start": "912070",
    "end": "917380"
  },
  {
    "text": "but some of them that are\nnear the surface escape and are measured by our\nsecondary electron collector.",
    "start": "917380",
    "end": "926470"
  },
  {
    "text": "And so basically,\nwhat we're displaying is what fraction of\nthe incoming beam",
    "start": "926470",
    "end": "931600"
  },
  {
    "text": "actually makes it\nback out again. By the way, one\nof the limitations",
    "start": "931600",
    "end": "937540"
  },
  {
    "text": "is this thing\nbetter be conductive because you're pumping\nall these electrons. It's not a huge current,\nmicro amp or less.",
    "start": "937540",
    "end": "944769"
  },
  {
    "text": "But still, this\ninsect is in there, and you're putting a\nmicro amp of current,",
    "start": "944770",
    "end": "951040"
  },
  {
    "text": "and pretty soon,\nit'll charge up to be some significant fraction of\na Coulomb, and it'll explode.",
    "start": "951040",
    "end": "957250"
  },
  {
    "text": "So in order to do this,\nyou typically gold plate these objects so that\nthey're conductive.",
    "start": "957250",
    "end": "964770"
  },
  {
    "text": "Why gold? Well, because it doesn't outgas. This whole thing has\nto be done in vacuum. OK, so that's what we have\nin the vertical situation.",
    "start": "964770",
    "end": "972270"
  },
  {
    "text": "Now imagine that we have\na highly inclined beam,",
    "start": "972270",
    "end": "977910"
  },
  {
    "text": "surface element. Well, now many more\nof the electrons",
    "start": "977910",
    "end": "984420"
  },
  {
    "text": "are going to escape because\nthey're generated closer to the surface.",
    "start": "984420",
    "end": "990390"
  },
  {
    "text": "So that means the currently\nwe measure will be higher when we're dealing with a\nsurface that's inclined.",
    "start": "990390",
    "end": "997100"
  },
  {
    "text": "And so that's it. That's the mechanism for\nturning surface orientation",
    "start": "997100",
    "end": "1003040"
  },
  {
    "text": "into brightness. And our job is to invert that. ",
    "start": "1003040",
    "end": "1010130"
  },
  {
    "text": "So one way we can\nunderstand this is to plot the\nreflectance map, which",
    "start": "1010130",
    "end": "1019329"
  },
  {
    "text": "we've already done for\nLambertian surfaces and Hapke surfaces.",
    "start": "1019330",
    "end": "1024413"
  },
  {
    "text": " Brightness versus\norientation-- so in this case,",
    "start": "1024414",
    "end": "1032280"
  },
  {
    "text": "coming straight down means that\nwe get a relatively dark image because a lot of the\nsecondary electrons",
    "start": "1032280",
    "end": "1039000"
  },
  {
    "text": "are just never going to\nmake it out of the surface. Then as we go to higher\nsurface inclination,",
    "start": "1039000",
    "end": "1047339"
  },
  {
    "text": "it gets brighter because more of\nthe secondary electrons escape. And in typical arrangements,\nthe thing is axially symmetric.",
    "start": "1047339",
    "end": "1056730"
  },
  {
    "text": "So whether these\nelectrons come out in this direction\nor that direction, if they get out of the surface,\nthey're going to be counted.",
    "start": "1056730",
    "end": "1063880"
  },
  {
    "text": "And so that means that this\nis going to be symmetric. And so if we plot\nthe isophotes, we're",
    "start": "1063880",
    "end": "1070560"
  },
  {
    "text": "going to get\nsomething like that.  Put numbers on it.",
    "start": "1070560",
    "end": "1078190"
  },
  {
    "text": "Where it gets bigger,\nthe further out we get,",
    "start": "1078190",
    "end": "1083870"
  },
  {
    "text": "the more inclined the surfaces. And yes, you can modify this.",
    "start": "1083870",
    "end": "1090980"
  },
  {
    "text": "You can remove some\nof the collectors or wire this collector to\na different sensor and so",
    "start": "1090980",
    "end": "1096860"
  },
  {
    "text": "on and make this asymmetrical. But the standard way\nof using it is just",
    "start": "1096860",
    "end": "1101900"
  },
  {
    "text": "to measure the total\nsecondary electron current. And that gives us that\ntype of reflectance map.",
    "start": "1101900",
    "end": "1110130"
  },
  {
    "text": "OK, so now if I\nmeasure the brightness at a particular\npoint in the image,",
    "start": "1110130",
    "end": "1115850"
  },
  {
    "text": "I get the slope of the surface. So I can directly\ntranslate that. If it's 0.7, then the slope\nis whatever that distance",
    "start": "1115850",
    "end": "1124380"
  },
  {
    "text": "from the origin is. But I don't get the gradient.",
    "start": "1124380",
    "end": "1130935"
  },
  {
    "start": "1130935",
    "end": "1136220"
  },
  {
    "text": "Right, what I'd like to know is\nwhat's the surface orientation. And as usual, we got\ntwo unknowns, p and q.",
    "start": "1136220",
    "end": "1142040"
  },
  {
    "text": "We only have one constraint. We measure the brightness. And so yes, we've reduced\nthe number of possibilities,",
    "start": "1142040",
    "end": "1147890"
  },
  {
    "text": "but we still have\na one dimensional, infinite set of possibilities.",
    "start": "1147890",
    "end": "1154490"
  },
  {
    "text": "So the slope typically\nis thought of as a scalar",
    "start": "1154490",
    "end": "1161740"
  },
  {
    "text": "whereas this is a vector. So it's a little bit like\nspeed versus velocity.",
    "start": "1161740",
    "end": "1170529"
  },
  {
    "text": "I mean, not everyone agrees\non those definitions. But to me, speed is a scalar\nquantity going 50 miles an hour",
    "start": "1170530",
    "end": "1178370"
  },
  {
    "text": "whereas velocity is\na directed vector. So OK.",
    "start": "1178370",
    "end": "1183640"
  },
  {
    "text": "So what to do? Well, it's just another\nexample of this shape",
    "start": "1183640",
    "end": "1190240"
  },
  {
    "text": "from shading problem. We're going to have\nsome distribution of some pattern of brightness.",
    "start": "1190240",
    "end": "1195340"
  },
  {
    "text": "And our job is to estimate\nwhat the surface shape is, and we have a reflectance\nmap to help us with that",
    "start": "1195340",
    "end": "1204940"
  },
  {
    "text": "because it allows us to look up\nfor any particular brightness we measure what the slope is,\nunfortunately not the gradient.",
    "start": "1204940",
    "end": "1212080"
  },
  {
    "text": "If it was the gradient, then\nwe would be in better shape.",
    "start": "1212080",
    "end": "1217600"
  },
  {
    "text": "And we're going to do this\nfor various special cases",
    "start": "1217600",
    "end": "1222820"
  },
  {
    "text": "and then for the general\ncase, where we can use any reflectance map we like.",
    "start": "1222820",
    "end": "1228559"
  },
  {
    "text": "And that's important because\nwe don't want this to only work for say, Lambertian, surfaces or\nthe lunar surface or whatever.",
    "start": "1228560",
    "end": "1237380"
  },
  {
    "text": "So OK. So when you get\na chance, look up",
    "start": "1237380",
    "end": "1245799"
  },
  {
    "text": "scanning electron\nmicroscope images and just Marvel at the wonderful\nworld that exists there",
    "start": "1245800",
    "end": "1253660"
  },
  {
    "text": "and how we're able to\nunderstand it so well. And, you know,\npuzzles like why is it",
    "start": "1253660",
    "end": "1262870"
  },
  {
    "text": "that if you reverse\nthe contrast, it's not easier to\ninterpret the image, which is what you'd expect.",
    "start": "1262870",
    "end": "1268600"
  },
  {
    "text": "You'd expect that\na surface that's brightest where it's facing you\nwould be easier to understand",
    "start": "1268600",
    "end": "1274240"
  },
  {
    "text": "that than one that's darkest. OK, so in preparation\nfor this, I",
    "start": "1274240",
    "end": "1283710"
  },
  {
    "text": "want to talk a little bit about\nhow to go from a needle diagram",
    "start": "1283710",
    "end": "1291289"
  },
  {
    "text": "to shape.  Now where are we\ngoing with this is",
    "start": "1291290",
    "end": "1298480"
  },
  {
    "text": "we're going directly to\na method that takes us from a single image to a shape.",
    "start": "1298480",
    "end": "1305380"
  },
  {
    "text": "But meantime, we\nhave some tools, and I want to\nexploit those tools.",
    "start": "1305380",
    "end": "1311330"
  },
  {
    "text": "So for example, what's\na needle diagram? Well, it's just surface\norientation at every pixel.",
    "start": "1311330",
    "end": "1326120"
  },
  {
    "text": "And what are the needles? Well, you can think of\neach facet of the surface as having a normal\nthat's sticking out.",
    "start": "1326120",
    "end": "1332630"
  },
  {
    "text": "And you're looking\ndown at that normal. That's the needle. And the view of it,\nyou may remember",
    "start": "1332630",
    "end": "1340700"
  },
  {
    "text": "from the very first\nclass, if you're looking straight down\nperpendicular to the surface,",
    "start": "1340700",
    "end": "1347909"
  },
  {
    "text": "then that needle\nis just a point. And if it's not, then it'll\nbe pointing in a direction.",
    "start": "1347910",
    "end": "1354030"
  },
  {
    "text": "that tells you what the\nsurface gradient direction is. And the length of it will tell\nyou how steep the surface is.",
    "start": "1354030",
    "end": "1360020"
  },
  {
    "text": "So where do we get these? Well, we're not going\nto get them from there. So there's more work to be done.",
    "start": "1360020",
    "end": "1366510"
  },
  {
    "text": "But for example, we get this\nfrom photometric stereo. So in photometric\nstereo, we're not",
    "start": "1366510",
    "end": "1373370"
  },
  {
    "text": "computing z as a\nfunction of x and y. ",
    "start": "1373370",
    "end": "1379430"
  },
  {
    "text": "What we're getting instead is p\nand q as a function of x and y,",
    "start": "1379430",
    "end": "1389220"
  },
  {
    "text": "of course remembering that\np is dzdx and q is dzdy.",
    "start": "1389220",
    "end": "1396280"
  },
  {
    "text": "Well, it's our estimate\nbased on our image brightness",
    "start": "1396280",
    "end": "1402600"
  },
  {
    "text": "measurements.  OK, so that seems actually\nlike a very simple problem.",
    "start": "1402600",
    "end": "1412500"
  },
  {
    "text": "Why? Well, in the discrete\ncase, we have a number of unknowns equal\nto the number of pixels.",
    "start": "1412500",
    "end": "1419750"
  },
  {
    "text": "We're trying to recover z\nat every pixel, let's say. So there are\nmillions of unknowns.",
    "start": "1419750",
    "end": "1426620"
  },
  {
    "text": "But at every pixel, we also\nhave two pieces of information--",
    "start": "1426620",
    "end": "1433370"
  },
  {
    "text": "p and q. So if we have a\nmillion pixel image, we have 2 million\npieces of information.",
    "start": "1433370",
    "end": "1441170"
  },
  {
    "text": "So it's overdetermined. We actually have more\ninformation than we need.",
    "start": "1441170",
    "end": "1446509"
  },
  {
    "text": "And as we saw,\nthat's always handy because that means\nthat we would be",
    "start": "1446510",
    "end": "1452600"
  },
  {
    "text": "able to reduce noise and get a\nbetter result than if it wasn't overdetermined.",
    "start": "1452600",
    "end": "1458060"
  },
  {
    "text": "So in fact, we have\ntwice as many constraints as there are known. OK, so what can we do?",
    "start": "1458060",
    "end": "1464279"
  },
  {
    "text": "Well, one thing we can do\nis suppose we start here",
    "start": "1464280",
    "end": "1469580"
  },
  {
    "text": "and just integrate out p,\nwhich is dz dx along this axis.",
    "start": "1469580",
    "end": "1478370"
  },
  {
    "text": "And what we'll get is\nthe change in height. So z of x is z of, let's say, 0.",
    "start": "1478370",
    "end": "1484360"
  },
  {
    "text": "Suppose we start at the\norigin plus from 0 to x.",
    "start": "1484360",
    "end": "1492309"
  },
  {
    "text": " Right, because dz dx\nis the derivative.",
    "start": "1492310",
    "end": "1497929"
  },
  {
    "text": "You integrate the\nderivative here. You know all that. So OK, so I can get the height\nanywhere along the x-axis.",
    "start": "1497930",
    "end": "1505669"
  },
  {
    "text": "And similarly, I\ncan get the height anywhere along the\ny-axis by integrating",
    "start": "1505670",
    "end": "1514000"
  },
  {
    "text": "the other thing I know. So then from there,\nI can combine them,",
    "start": "1514000",
    "end": "1520960"
  },
  {
    "text": "and I can go partway\nup on the y-axis and across on the x-axis. So I can get partway\non the x-- so I",
    "start": "1520960",
    "end": "1526680"
  },
  {
    "text": "can fill in the whole area\nin various ways like this. And actually, I\ncould take a curve.",
    "start": "1526680",
    "end": "1533750"
  },
  {
    "text": "So let's take that curve. And so along that curve,\nwhat we're looking at is a combination.",
    "start": "1533750",
    "end": "1542640"
  },
  {
    "start": "1542640",
    "end": "1551170"
  },
  {
    "text": "Right, so what is this? Well, that's just the dot\nproduct of the gradient pq dot",
    "start": "1551170",
    "end": "1557340"
  },
  {
    "text": "dx dy. So that just tells me\nthe change in height.",
    "start": "1557340",
    "end": "1563110"
  },
  {
    "text": "So this is actually\ndelta z, If you like. That's a change in\nheight if I take",
    "start": "1563110",
    "end": "1569770"
  },
  {
    "text": "a small step in the x-direction\nand then a small step in the y-direction.",
    "start": "1569770",
    "end": "1575080"
  },
  {
    "text": "Pretty obvious. And so I can do that\nfor all these points. I just pick contours\nand integrate up.",
    "start": "1575080",
    "end": "1583610"
  },
  {
    "text": "Well, that's OK, but\nwhat if somebody else",
    "start": "1583610",
    "end": "1589280"
  },
  {
    "text": "comes along and says, oh,\nI don't like the contour you chose? I'm going to go this way.",
    "start": "1589280",
    "end": "1594380"
  },
  {
    "text": " And what you'd hope, of course,\nis they get the same answer.",
    "start": "1594380",
    "end": "1601460"
  },
  {
    "text": "But there's no guarantee of\nthat because these p and q's are determined experimentally.",
    "start": "1601460",
    "end": "1607430"
  },
  {
    "text": "They're subject to\nmeasurement noise. So they're not perfect. They're not actually\nthe derivatives",
    "start": "1607430",
    "end": "1613430"
  },
  {
    "text": "of z with respect to x and the\nderivative of z with respect to y. They're our estimates\nwhich include some noise.",
    "start": "1613430",
    "end": "1620660"
  },
  {
    "text": "So OK, well, what we'd hope is\nthat they come out the same.",
    "start": "1620660",
    "end": "1627660"
  },
  {
    "text": "And what that means is that\nactually, what we're hoping is that if you go\naround the loop,",
    "start": "1627660",
    "end": "1635740"
  },
  {
    "text": "if we go this way, da da da, up\nthere, and then we come back,",
    "start": "1635740",
    "end": "1641540"
  },
  {
    "text": "what should this equal?  STUDENT: Zero.",
    "start": "1641540",
    "end": "1646602"
  },
  {
    "text": "PROFESSOR: So that\nshould be zero. Yes, thank you. And every jogger knows\nthat that's not true.",
    "start": "1646603",
    "end": "1652040"
  },
  {
    "text": "If you jog in a loop, you seem\nto be going uphill all the way.",
    "start": "1652040",
    "end": "1657530"
  },
  {
    "text": "OK, I guess we don't\nhave many joggers here. So-- oh, it's like-- well, OK.",
    "start": "1657530",
    "end": "1663440"
  },
  {
    "text": "So that should be true. So there's no\nguarantee that when",
    "start": "1663440",
    "end": "1670550"
  },
  {
    "text": "we measure p and\nq experimentally, we estimate them, that\nthis is going to be true.",
    "start": "1670550",
    "end": "1676470"
  },
  {
    "text": "So what do we do with that? Well, one thing\nwe can think about is turning this into some\nsort of condition on p and q.",
    "start": "1676470",
    "end": "1686760"
  },
  {
    "text": "That is, p and q have to\nsatisfy some constraint for this to be true. And this has to be true for\nany loop, not just that one.",
    "start": "1686760",
    "end": "1694920"
  },
  {
    "text": "And I can decompose a large\nloop like that into small loops. So suppose it's\ntrue for that loop.",
    "start": "1694920",
    "end": "1706760"
  },
  {
    "text": "Well, then I can\nput another loop next to it and another loop.",
    "start": "1706760",
    "end": "1714669"
  },
  {
    "start": "1714670",
    "end": "1724060"
  },
  {
    "text": "And now rather than go\naround these four loops, I can eliminate the inner parts,\nand they cancel each other.",
    "start": "1724060",
    "end": "1732220"
  },
  {
    "text": "See, if I am going\nfrom here to there and then I'm going\nfrom there to here, I'm back at the same place. So this is a crude\nway of proving",
    "start": "1732220",
    "end": "1745150"
  },
  {
    "text": "that if it's true for a small\nloop, for any small loop,",
    "start": "1745150",
    "end": "1750970"
  },
  {
    "text": "I can decompose any large\nloop into lots of small loops. And then it's going to be true\nfor the large loop as well.",
    "start": "1750970",
    "end": "1758090"
  },
  {
    "text": "So OK, so let's see what-- ",
    "start": "1758090",
    "end": "1769050"
  },
  {
    "text": "so let's have a small\ngroup of size delta",
    "start": "1769050",
    "end": "1782730"
  },
  {
    "text": "x in this direction and\ndelta y in that direction. And let's suppose that\nthis is the point xy.",
    "start": "1782730",
    "end": "1789980"
  },
  {
    "text": "And let's see how\nthe height changes as we go around this loop.",
    "start": "1789980",
    "end": "1795860"
  },
  {
    "text": "Start down here, say. Well, then we need to\nknow what the slope is",
    "start": "1795860",
    "end": "1801380"
  },
  {
    "text": "in the x-direction. So that's p. And let's take the slope at the\ncenter of this stretch, which",
    "start": "1801380",
    "end": "1809570"
  },
  {
    "text": "is going to be p of x and\ny minus delta y over 2.",
    "start": "1809570",
    "end": "1816039"
  },
  {
    "text": "And that's the slope, and we're\ngoing delta x with that slope.",
    "start": "1816040",
    "end": "1821150"
  },
  {
    "text": "So we make this\nloop small enough so that we can use this\nlinear approximation,",
    "start": "1821150",
    "end": "1826720"
  },
  {
    "text": "that the slope is pretty much\nconstant over that stretch. Then we go up.",
    "start": "1826720",
    "end": "1832809"
  },
  {
    "text": "OK, so that's going to\nbe-- we need the slope in the y-direction, which is q. And we'll take the slope\nand estimate it based",
    "start": "1832810",
    "end": "1839470"
  },
  {
    "text": "on the center of this line. So that's at x plus delta\nx over 2 and delta y.",
    "start": "1839470",
    "end": "1848560"
  },
  {
    "text": "Sorry. And and then we\ngo across the top, minus p xy plus delta y over 2.",
    "start": "1848560",
    "end": "1858700"
  },
  {
    "text": "Oh, this is times delta y.  And then we go down.",
    "start": "1858700",
    "end": "1864490"
  },
  {
    "text": "So this is minus q. ",
    "start": "1864490",
    "end": "1872166"
  },
  {
    "text": "And that should be 0. We should be back\nat ground zero. ",
    "start": "1872166",
    "end": "1879700"
  },
  {
    "text": "So what we get here is if\nwe do the Taylor series",
    "start": "1879700",
    "end": "1886149"
  },
  {
    "text": "expansion of that, we get-- ",
    "start": "1886150",
    "end": "1898500"
  },
  {
    "text": "and down here, we get p of\nx comma y plus higher order",
    "start": "1898500",
    "end": "1906970"
  },
  {
    "text": "terms. And then we expand this. We get q of x comma y\nplus delta x over 2qx--",
    "start": "1906970",
    "end": "1914485"
  },
  {
    "start": "1914485",
    "end": "1924900"
  },
  {
    "text": "let's see-- plus. ",
    "start": "1924900",
    "end": "1932980"
  },
  {
    "text": "OK, and of course,\nthese terms cancel.",
    "start": "1932980",
    "end": "1938230"
  },
  {
    "text": "So we end up with py delta x\ndelta y minus qx delta x delta",
    "start": "1938230",
    "end": "1948950"
  },
  {
    "text": "y is 0. Or in other words,\nthese two are the same and cancel out the the\nsides of this little box.",
    "start": "1948950",
    "end": "1960460"
  },
  {
    "text": "And so we get pi is qx.  So if this is true\nof very small areas,",
    "start": "1960460",
    "end": "1973300"
  },
  {
    "text": "then that condition\nhas to be true. And that makes sense\nbecause p was supposed",
    "start": "1973300",
    "end": "1982570"
  },
  {
    "text": "to be our measurement\nof dz dx and q",
    "start": "1982570",
    "end": "1988674"
  },
  {
    "text": "was supposed to be our\nmeasurement of dz dy.",
    "start": "1988675",
    "end": "1994360"
  },
  {
    "text": "And so that's z sub x\ny, and that's z sub y x.",
    "start": "1994360",
    "end": "2001150"
  },
  {
    "text": " Now it's slightly confusing\nbecause that's obviously true",
    "start": "2001150",
    "end": "2008549"
  },
  {
    "text": "of the original surface as\nlong as it's smooth enough that the next partial\nderivatives don't",
    "start": "2008550",
    "end": "2015060"
  },
  {
    "text": "depend on the order. OK, so if p and q really were\nthe derivatives of the surface",
    "start": "2015060",
    "end": "2022230"
  },
  {
    "text": "z of xy, then this\nwould be true. But we're measuring them\nfrom experimental data.",
    "start": "2022230",
    "end": "2029080"
  },
  {
    "text": "So this typically won't be true,\nand if we take this integral, we will get different\nresults depending",
    "start": "2029080",
    "end": "2036300"
  },
  {
    "text": "on different directions. And so this is like\noverdetermined linear",
    "start": "2036300",
    "end": "2044340"
  },
  {
    "text": "equations. There is no solution. All we can do is find some\nleast squares approximation.",
    "start": "2044340",
    "end": "2052090"
  },
  {
    "text": "So same here-- there is no\nsurface z of x,y that will give",
    "start": "2052090",
    "end": "2058290"
  },
  {
    "text": "us exactly the p and q that\nwe measured from photometric",
    "start": "2058290",
    "end": "2063629"
  },
  {
    "text": "stereo or some\nother visual method. OK, now actually,\nwe can get there",
    "start": "2063630",
    "end": "2073760"
  },
  {
    "text": "a more elegant way, which\nis handy because we'll use this again later. So like many important theorems,\nthis one has many names.",
    "start": "2073760",
    "end": "2084260"
  },
  {
    "text": "I guess it's\nattributed to Gauss, and it's a special case of\nmore general theorems used",
    "start": "2084260",
    "end": "2091040"
  },
  {
    "text": "in fluid dynamics. But what it does is it\nrelates contour integral to an area integral where--",
    "start": "2091040",
    "end": "2114760"
  },
  {
    "text": "let's draw some sort of shape. So l is this contour\nand D is that area.",
    "start": "2114760",
    "end": "2124410"
  },
  {
    "text": "So why do we care? Well, in machine\nvision, often we have computations that\ntake us over all pixels.",
    "start": "2124410",
    "end": "2133559"
  },
  {
    "text": "And there are a lot of pixels. Any time you can\nreduce that computation",
    "start": "2133560",
    "end": "2138740"
  },
  {
    "text": "to a computation about the\nboundary of a region alone, you've got a huge win.",
    "start": "2138740",
    "end": "2144290"
  },
  {
    "text": "You're down from\nmillions of calculations to thousands of calculations. So there are several\nplaces in machine vision",
    "start": "2144290",
    "end": "2151250"
  },
  {
    "text": "where we use a trick like\nthis to turn an integral",
    "start": "2151250",
    "end": "2158350"
  },
  {
    "text": "over an area into an\nintegral over just a curve with a huge benefit.",
    "start": "2158350",
    "end": "2164950"
  },
  {
    "text": "Of course, it's a very\nspecialized thing. There are only that many things\nthat have the special property,",
    "start": "2164950",
    "end": "2171100"
  },
  {
    "text": "namely things that can\nbe written in this form. But you know,\nsuppose, for example,",
    "start": "2171100",
    "end": "2176280"
  },
  {
    "text": "you want to compute\nthe area of a blob. Well, you can count the pixels. You can just go\nrow by row by row,",
    "start": "2176280",
    "end": "2182160"
  },
  {
    "text": "see, OK, this pixel's in\nthe blob, that one's not, and so on. Or you can just\ntrace the outline.",
    "start": "2182160",
    "end": "2188550"
  },
  {
    "text": "Turns out you can\ncompute the area just by tracing the outline. In fact, there used to be a\nwonderful instrument which",
    "start": "2188550",
    "end": "2195830"
  },
  {
    "text": "is fiendishly difficult\nto understand. But it allowed people to compute\nintegrals in an analog fashion.",
    "start": "2195830",
    "end": "2206270"
  },
  {
    "text": "You should look it up. It's an instrument that often\nwas made out of precious metals because it was only for\nspecial people like surveyors.",
    "start": "2206270",
    "end": "2215780"
  },
  {
    "text": "And you would basically\nhold one part of it and trace the outline\nand compute the area.",
    "start": "2215780",
    "end": "2226270"
  },
  {
    "text": "Once you complete the loop,\nyou've computed the area. You can read it\noff the instrument. And that's an\nexample where we're",
    "start": "2226270",
    "end": "2234080"
  },
  {
    "text": "turning an area integral, the\nintegral of 1 over that area,",
    "start": "2234080",
    "end": "2239450"
  },
  {
    "text": "into a contour integral. As you go around\nthe edge, there's a little wheel that slips on\nthe paper in just the right way",
    "start": "2239450",
    "end": "2247470"
  },
  {
    "text": "and so on. So this isn't just something\nuseful in digital domain.",
    "start": "2247470",
    "end": "2252530"
  },
  {
    "text": "It's been used in the\nanalog world as well. So area is an\nexample of something",
    "start": "2252530",
    "end": "2258080"
  },
  {
    "text": "where this is a useful formula\nbecause we can compute area by doing something\non the boundary",
    "start": "2258080",
    "end": "2263240"
  },
  {
    "text": "instead of doing\nsomething in the interior. But it turns out that there\nare lots of other things",
    "start": "2263240",
    "end": "2268340"
  },
  {
    "text": "we want to do. For example, in\nvision, often we want to know where something is. And in the simple case, it's\na blob, and where is it?",
    "start": "2268340",
    "end": "2276560"
  },
  {
    "text": "Well, the centroid\nis a very good way of talking about the position\nof a blob in an image.",
    "start": "2276560",
    "end": "2282320"
  },
  {
    "text": "And so how do you\ncompute the centroid? Well, again, you can go pixel\nby pixel and cumulate x times",
    "start": "2282320",
    "end": "2289280"
  },
  {
    "text": "something, throw\nit in accumulator, and when you're\ndone, you divide, and you get the centroid.",
    "start": "2289280",
    "end": "2295730"
  },
  {
    "text": "Or you can go around the\nboundary, which is much faster. And continuing along\nthat line of reasoning,",
    "start": "2295730",
    "end": "2304820"
  },
  {
    "text": "there are things\ncalled moments of which the centroid\ncomputation is the first",
    "start": "2304820",
    "end": "2309950"
  },
  {
    "text": "and the area computation\nis the zeroth. But generally, you\ncan compute moments",
    "start": "2309950",
    "end": "2315410"
  },
  {
    "text": "by just going\naround the boundary. And moments are useful\nin describing shapes.",
    "start": "2315410",
    "end": "2320690"
  },
  {
    "text": "So so far, we talked about\narea and position, centroid. But you might also want to be\nable to say something like,",
    "start": "2320690",
    "end": "2328279"
  },
  {
    "text": "oh, it's elongated. And so these moments\nare useful for that,",
    "start": "2328280",
    "end": "2334490"
  },
  {
    "text": "and they can all be\ncomputed in this clever way. So let's apply Green's theorem.",
    "start": "2334490",
    "end": "2342109"
  },
  {
    "text": "There's a 3D version of that,\nturning 3D integral, volume",
    "start": "2342110",
    "end": "2347570"
  },
  {
    "text": "integrals, into\nsurface area integrals. But since our images are 2D,\nwe typically don't need that.",
    "start": "2347570",
    "end": "2354230"
  },
  {
    "text": "OK, so we apply\nthis to our problem.  So we're trying to match\nsomething in this formula",
    "start": "2354230",
    "end": "2363030"
  },
  {
    "text": "with what we were\ndoing, and I guess we had pdx plus qdy up here.",
    "start": "2363030",
    "end": "2368290"
  },
  {
    "text": "So let's try that. Let's try using Green's theorem.",
    "start": "2368290",
    "end": "2380809"
  },
  {
    "text": "So m is q dq dx minus l is p.",
    "start": "2380810",
    "end": "2387575"
  },
  {
    "text": " And we're saying that\nthat is zero, right?",
    "start": "2387575",
    "end": "2396273"
  },
  {
    "text": "We're going around the loop.  OK, and this has to be true for\nall, not just particular loop,",
    "start": "2396273",
    "end": "2408470"
  },
  {
    "text": "but any loop-- small loop,\nlarge loop, whatever. And that can only be true\nif the qdx equals dpdy",
    "start": "2408470",
    "end": "2421070"
  },
  {
    "text": "because suppose that\nquantity, that interbrand, was non-zero at some point.",
    "start": "2421070",
    "end": "2428130"
  },
  {
    "text": "All I need to do is\nconstruct the loop that includes that point,\nand I'd have a contradiction.",
    "start": "2428130",
    "end": "2434900"
  },
  {
    "text": "So that again confirms\nthe conclusion we arrived at painfully here\nby making a small square",
    "start": "2434900",
    "end": "2443150"
  },
  {
    "text": "and then using Taylor series. This is a slightly\nmore elegant way of getting to the same thing.",
    "start": "2443150",
    "end": "2449540"
  },
  {
    "text": "OK, so what to do? p and q do not satisfy\nthat constraint.",
    "start": "2449540",
    "end": "2456690"
  },
  {
    "text": "So we could try to introduce\nthat as a constraint. You could say, OK,\nfind the z of x and y",
    "start": "2456690",
    "end": "2462020"
  },
  {
    "text": "that has these p's and q's\nas derivatives approximately and also satisfy\nthat constraint.",
    "start": "2462020",
    "end": "2468925"
  },
  {
    "text": "Well, we haven't\ntalked about how to solve constraint\noptimization problems. That's a little\nharder than the least",
    "start": "2468925",
    "end": "2475400"
  },
  {
    "text": "squares we've done so far. So let's try a different tack.",
    "start": "2475400",
    "end": "2484660"
  },
  {
    "text": "So let's basically do just\nbrute force least squares. ",
    "start": "2484660",
    "end": "2493680"
  },
  {
    "text": "So we try and look for a\nsurface z such that that",
    "start": "2493680",
    "end": "2504730"
  },
  {
    "text": "is the smallest possible. ",
    "start": "2504730",
    "end": "2512450"
  },
  {
    "text": "Right, so ideally, if there\nwas no measurement error and we had the correct\nsurface, then there",
    "start": "2512450",
    "end": "2519200"
  },
  {
    "text": "was a z such that\nits x derivative matched the p we computed\nfrom the image and its y",
    "start": "2519200",
    "end": "2525080"
  },
  {
    "text": "derivative matched the-- sorry, the p that we got\nfrom the image and this one",
    "start": "2525080",
    "end": "2530840"
  },
  {
    "text": "matched the q that we\ngot from the image. But because of\nmeasurement noise, we expect that will\nnot be possible.",
    "start": "2530840",
    "end": "2538770"
  },
  {
    "text": "So let's at least try and\nmake it as small as possible. OK, so that's the least\nsquares problem in a nutshell.",
    "start": "2538770",
    "end": "2548130"
  },
  {
    "text": "And well, we solve it as usual.",
    "start": "2548130",
    "end": "2556029"
  },
  {
    "text": "We just differentiate\nwith respect to z. ",
    "start": "2556030",
    "end": "2561490"
  },
  {
    "text": "Yes, can we do that? What is z?",
    "start": "2561490",
    "end": "2567190"
  },
  {
    "text": "Is z a parameter? Right, so now unfortunately,\nwe can't do that.",
    "start": "2567190",
    "end": "2574160"
  },
  {
    "text": "If we had a finite\nnumber of knobs, we could turn--\nparameters, variables. Then we could just differentiate\nwith respect to each of them",
    "start": "2574160",
    "end": "2581630"
  },
  {
    "text": "and set the result equal\nto 0 and we're done. That's what we've been doing. Unfortunately, z\nhere is a function.",
    "start": "2581630",
    "end": "2588950"
  },
  {
    "text": " And so there's no\nsort of sense of a way",
    "start": "2588950",
    "end": "2595720"
  },
  {
    "text": "of talking about the derivative\nwith respect to a function. So it has not a finite\nnumber of degrees of freedom.",
    "start": "2595720",
    "end": "2602589"
  },
  {
    "text": "It has an infinite number\nof degrees of freedom. And there's a subject\nin mathematics",
    "start": "2602590",
    "end": "2608890"
  },
  {
    "text": "that deals with that-- calculus of variations. ",
    "start": "2608890",
    "end": "2616540"
  },
  {
    "text": "And it's called that\nbecause basically, you say something like suppose\nthat z is the solution.",
    "start": "2616540",
    "end": "2622150"
  },
  {
    "text": "Then if I make any\nsmall variation on z, that integral should go up.",
    "start": "2622150",
    "end": "2627380"
  },
  {
    "text": "And based on that\nvery sensible idea, you can come up\nwith some equations",
    "start": "2627380",
    "end": "2633670"
  },
  {
    "text": "for solving that problem. But we're going to\nremain in the trenches",
    "start": "2633670",
    "end": "2640300"
  },
  {
    "text": "and work with discrete\nversion for a moment because--",
    "start": "2640300",
    "end": "2645980"
  },
  {
    "text": "and this particular\nproblem is pretty simple. The reason to work\nthrough it in detail",
    "start": "2645980",
    "end": "2651200"
  },
  {
    "text": "is because it hides\na lot of the pitfalls that you might run\ninto when you solve",
    "start": "2651200",
    "end": "2657080"
  },
  {
    "text": "a more complicated problem. OK, in a discrete case, we don't\nhave a function of x and y.",
    "start": "2657080",
    "end": "2666750"
  },
  {
    "text": "What we have is a bunch of\ndiscrete values on a grid, so",
    "start": "2666750",
    "end": "2672330"
  },
  {
    "text": "a finite number of unknowns-- maybe huge, maybe a million.",
    "start": "2672330",
    "end": "2678020"
  },
  {
    "text": "But we can use calculus,\nordinary calculus. Just differentiate with\nrespect to each of them.",
    "start": "2678020",
    "end": "2683030"
  },
  {
    "text": "Set the result equal to 0. So true, we're going to\nget a lot of equations, but our methods apply.",
    "start": "2683030",
    "end": "2688980"
  },
  {
    "text": "We don't need to\ninvent something new. So this is what\nwe're looking for, and what we're given is\nagain a set of gradients",
    "start": "2688980",
    "end": "2699740"
  },
  {
    "text": "on a grid with\nmeasurement noise in them. And we're trying to\nfind a value of z",
    "start": "2699740",
    "end": "2709530"
  },
  {
    "text": "at every grid point that\nwill make the error as",
    "start": "2709530",
    "end": "2714930"
  },
  {
    "text": "small as possible\nwhere the error is the discrete equivalent\nof this thing. So let's look at that.",
    "start": "2714930",
    "end": "2720210"
  },
  {
    "start": "2720210",
    "end": "2725260"
  },
  {
    "text": "So i and j are row\nand column numbers. ",
    "start": "2725260",
    "end": "2735970"
  },
  {
    "text": "So slight annoyance here\nfor computer scientists",
    "start": "2735970",
    "end": "2741880"
  },
  {
    "text": "and mathematicians,\nwhich is that you would like the first\ndiscrete index to correspond",
    "start": "2741880",
    "end": "2747490"
  },
  {
    "text": "to x and the second discrete\nindex to correspond to y. And as a student, I had a\nreal hard time with that.",
    "start": "2747490",
    "end": "2755110"
  },
  {
    "text": "But of course, in\nmathematics, we count rows down\nand columns across,",
    "start": "2755110",
    "end": "2762910"
  },
  {
    "text": "and we write them ij in the\nother order and also with I reverse.",
    "start": "2762910",
    "end": "2768580"
  },
  {
    "text": "OK, so this is-- what is this? We're trying to estimate the\nderivative in the x direction.",
    "start": "2768580",
    "end": "2773660"
  },
  {
    "text": "And that's why we were varying\ny rather than i, right? And so this is our\nestimate of the derivative",
    "start": "2773660",
    "end": "2780820"
  },
  {
    "text": "in the x direction. And that should be small. It should match what we\nobserved from the image.",
    "start": "2780820",
    "end": "2790599"
  },
  {
    "text": "And we also need to\nadd in the other term.",
    "start": "2790600",
    "end": "2801350"
  },
  {
    "text": "We also want to match the\nderivative in the y direction. And now typically, there\naren't the set of values of z",
    "start": "2801350",
    "end": "2808910"
  },
  {
    "text": "that will make both\nof those terms zero. So we kind of compromise. We just want to make them\nas small as possible.",
    "start": "2808910",
    "end": "2815490"
  },
  {
    "text": "So we're going to minimize this. And what can we minimize? Well we have the set of zij's.",
    "start": "2815490",
    "end": "2821436"
  },
  {
    "start": "2821436",
    "end": "2827950"
  },
  {
    "text": "OK, so we then\ndifferentiate and set",
    "start": "2827950",
    "end": "2842450"
  },
  {
    "text": "the result equal to 0 for\nall possible values of ij. So if the image has\na million pixels,",
    "start": "2842450",
    "end": "2848600"
  },
  {
    "text": "there be a million\nequations coming from that. Fortunately, because we\npicked least squares,",
    "start": "2848600",
    "end": "2854990"
  },
  {
    "text": "the equations are all\ngoing to be linear. So as much as the\ndisadvantages to using",
    "start": "2854990",
    "end": "2861829"
  },
  {
    "text": "least squares, such as not\nbeing robust against outliers, we can solve these equations\nbecause they're just",
    "start": "2861830",
    "end": "2868730"
  },
  {
    "text": "going to be linear equations. OK, so here, pay attention. Big problem-- if you\ndifferentiate with respect",
    "start": "2868730",
    "end": "2876350"
  },
  {
    "text": "to zij, you get\nthe wrong answer. Why is that? Well, ij up here, these\nare dummy variables.",
    "start": "2876350",
    "end": "2884580"
  },
  {
    "text": " If I replace ij with alpha\nand beta, it's the same sum.",
    "start": "2884580",
    "end": "2893140"
  },
  {
    "text": "But then if you differentiate\nwith respect to zij,",
    "start": "2893140",
    "end": "2898210"
  },
  {
    "text": "so another way of thinking\nabout it in programming language terms-- you know, you've\ngot an identifier collision.",
    "start": "2898210",
    "end": "2903910"
  },
  {
    "text": "You're using i and j to\nmean one thing in here, and now you're trying to\nmake it mean something else.",
    "start": "2903910",
    "end": "2911260"
  },
  {
    "text": "So here we have a sum of all\npossible ij's, and now you're going to differentiate. So long story short, pick\nsome other identifier names.",
    "start": "2911260",
    "end": "2921280"
  },
  {
    "text": " And you might think, OK,\nthat's kind of obvious.",
    "start": "2921280",
    "end": "2927140"
  },
  {
    "text": "Yes, but there have been papers\npublished that got this wrong. So it's possible.",
    "start": "2927140",
    "end": "2934530"
  },
  {
    "text": "It can happen. OK, so, well, this\nsounds kind of messy because we have a sum\nover a million terms,",
    "start": "2934530",
    "end": "2942257"
  },
  {
    "text": "and now we're going\nto differentiate. But the good thing is that,\nyes, we have a lot of equations, but they are all very sparse\nbecause if you think about,",
    "start": "2942258",
    "end": "2951089"
  },
  {
    "text": "OK anything here having to\ndo with row 1,000, when you",
    "start": "2951090",
    "end": "2957270"
  },
  {
    "text": "differentiate with\nrespect to z in row 990,",
    "start": "2957270",
    "end": "2962820"
  },
  {
    "text": "it's not going to\nhave any effect. So all of those derivatives\nare 0 except a small number,",
    "start": "2962820",
    "end": "2969329"
  },
  {
    "text": "the small number\nwhere kl matches up with an index in here, ij, or kl\nmatches ij plus 1 or kl matches",
    "start": "2969330",
    "end": "2980380"
  },
  {
    "text": "plus 11j. That's it, three terms. So we're going to have a lot\nof equations each of which has three terms in this case.",
    "start": "2980380",
    "end": "2988560"
  },
  {
    "text": "OK, so let's try that. So let's first try where\nwe match kl is i comma j.",
    "start": "2988560",
    "end": "2999440"
  },
  {
    "text": "So there's a square. So differentiate that, we get 2\ntimes that times the derivative",
    "start": "2999440",
    "end": "3016850"
  },
  {
    "text": "of the thing inside with\nrespect to zkl, which is going to be minus 1 over epsilon.",
    "start": "3016850",
    "end": "3024650"
  },
  {
    "text": "Right, so it's a square. We get twice that term. And then we have to\ndifferentiate what's inside with respect to zkl.",
    "start": "3024650",
    "end": "3030770"
  },
  {
    "text": "And we said that it\nmatches this term. So it's going to be\nminus 1 over epsilon.",
    "start": "3030770",
    "end": "3036320"
  },
  {
    "text": "And sorry if I'm going over\nthis in a very pedestrian way, but you'll need to do this in\na more complicated example,",
    "start": "3036320",
    "end": "3043670"
  },
  {
    "text": "and it's easy to\nnot do it right. So OK, so that's that one.",
    "start": "3043670",
    "end": "3050160"
  },
  {
    "text": "But there's also this match. So we have to add to\nthis 2 times this term.",
    "start": "3050160",
    "end": "3055595"
  },
  {
    "start": "3055595",
    "end": "3063560"
  },
  {
    "text": "So we get twice\nthis term and then differentiate this with respect\nto zkl, which is matching that.",
    "start": "3063560",
    "end": "3069599"
  },
  {
    "text": "So that gives me minus\n1 over epsilon again. OK, so that's--\nthere are two terms.",
    "start": "3069600",
    "end": "3076930"
  },
  {
    "text": "Then we also have to consider\nwhere kl is ij plus 1.",
    "start": "3076930",
    "end": "3084400"
  },
  {
    "text": "In other words, k is i. l is j plus 1, or\nconversely, j is l minus 1.",
    "start": "3084400",
    "end": "3091330"
  },
  {
    "text": "Right, so we differentiated\nwith respect to that. We get 2 times this OK, OK.",
    "start": "3091330",
    "end": "3103000"
  },
  {
    "start": "3103000",
    "end": "3110750"
  },
  {
    "text": "So we get twice\nthat term, and we have to differentiate what's\ninside with respect to zkl,",
    "start": "3110750",
    "end": "3116420"
  },
  {
    "text": "which matches that one. So it's going to be\nplus 1 over epsilon. And we're almost done.",
    "start": "3116420",
    "end": "3122400"
  },
  {
    "text": "Just one more term. This one here, now we have\nk comma l is i plus 1j.",
    "start": "3122400",
    "end": "3131970"
  },
  {
    "text": "Or in other words, k matches i\nplus 1, meaning i is k minus 1.",
    "start": "3131970",
    "end": "3137070"
  },
  {
    "text": "And l is just j. So we get that one. That's going to be zkl minus z.",
    "start": "3137070",
    "end": "3144900"
  },
  {
    "text": "OK, i is k minus 1, l\nover epsilon minus--",
    "start": "3144900",
    "end": "3150960"
  },
  {
    "start": "3150960",
    "end": "3157910"
  },
  {
    "text": "and plus 1 over epsilon. And all of that's\nsupposed to be 0, right?",
    "start": "3157910",
    "end": "3164340"
  },
  {
    "text": "That's the least squares method. And this is going to be true\nfor all points in the image.",
    "start": "3164340",
    "end": "3170640"
  },
  {
    "text": " So fortunately, this simplifies.",
    "start": "3170640",
    "end": "3178020"
  },
  {
    "text": "So first of all, of course,\nI can ignore the two because if twice something\nis 0, then something is 0.",
    "start": "3178020",
    "end": "3183930"
  },
  {
    "text": "So forget the 2. I could also cancel\nout one of the epsilon, but I'll keep them\njust for reasons",
    "start": "3183930",
    "end": "3191592"
  },
  {
    "text": "that will become apparent.  OK, so now I'm going\nto gather up the terms.",
    "start": "3191592",
    "end": "3197690"
  },
  {
    "text": "Let me first gather\nup all the terms in p. Well, there are\nonly two of them. So that's pretty\nstraightforward.",
    "start": "3197690",
    "end": "3203280"
  },
  {
    "text": "So I get pkl minus pkl\nminus 1 divided by epsilon--",
    "start": "3203280",
    "end": "3211190"
  },
  {
    "text": "so those two terms. And let me gather up\nall the terms in q.",
    "start": "3211190",
    "end": "3218069"
  },
  {
    "text": "So I get qkl minus qk\nminus 1l over epsilon.",
    "start": "3218070",
    "end": "3229110"
  },
  {
    "text": "And then let me gather\nup all the terms in z. Well, there are a\nbunch more of those.",
    "start": "3229110",
    "end": "3235740"
  },
  {
    "text": "And they are 1 over\nepsilon squared. So let me write that out front. So we're going to have\nminus zkl plus 1 minus zk",
    "start": "3235740",
    "end": "3246270"
  },
  {
    "text": "plus 1l minus zkl minus\n1 minus zk minus 1l.",
    "start": "3246270",
    "end": "3253320"
  },
  {
    "text": "And then zkl occurs four times. ",
    "start": "3253320",
    "end": "3265049"
  },
  {
    "text": "Well, let me just keep\nthe epsilon squared. ",
    "start": "3265050",
    "end": "3271690"
  },
  {
    "text": "And all of that's\nsupposed to be 0. ",
    "start": "3271690",
    "end": "3276890"
  },
  {
    "text": "So what are those terms? Well, this looks awfully like\nthe x derivative of p, right?",
    "start": "3276890",
    "end": "3284539"
  },
  {
    "text": "Because we take the value of p\nat positions, separate it in x, and we divide by epsilon.",
    "start": "3284540",
    "end": "3291440"
  },
  {
    "text": "So we can think of\nthis as p sub x. And this looks awfully\nlike y derivative of q.",
    "start": "3291440",
    "end": "3299590"
  },
  {
    "text": " And then I claim that this\nthing here corresponds",
    "start": "3299590",
    "end": "3308270"
  },
  {
    "text": "to the Laplacian of z. ",
    "start": "3308270",
    "end": "3313390"
  },
  {
    "text": "Let me see why. OK, so I can draw a little\ndiagram here and gather up",
    "start": "3313390",
    "end": "3319990"
  },
  {
    "text": "all these terms. So I get 1 over epsilon\nsquared, and I have four for kl",
    "start": "3319990",
    "end": "3326800"
  },
  {
    "text": "and then minus 1 for\nall of the neighbors. And now z sub xx OK, so those\nthings I'm drawing down there",
    "start": "3326800",
    "end": "3353210"
  },
  {
    "text": "are variously called\ncomputational molecules or stencils or\nsomething like that,",
    "start": "3353210",
    "end": "3359289"
  },
  {
    "text": "and they're a graphic way\nof showing how to compute",
    "start": "3359290",
    "end": "3364630"
  },
  {
    "text": "an estimated derivative.  Now I didn't bother\nfor these, but I could.",
    "start": "3364630",
    "end": "3372790"
  },
  {
    "text": "So I could, for example--  that's the computational\nmolecule for the x derivative.",
    "start": "3372790",
    "end": "3380750"
  },
  {
    "text": "And then here's the\ncomputational molecule for the y derivative.",
    "start": "3380750",
    "end": "3386180"
  },
  {
    "text": "It's so obvious, we don't\neven bother with that. But when we get to\nhigher derivatives, it's handy to draw\nthese diagrams.",
    "start": "3386180",
    "end": "3393030"
  },
  {
    "text": "So if we could convolve\nthis with itself-- remember 603--\nthen you get that.",
    "start": "3393030",
    "end": "3400860"
  },
  {
    "text": "And if you convolve\nthis with itself, you get this second derivative.",
    "start": "3400860",
    "end": "3406170"
  },
  {
    "text": "So just how do you convolve? You flip and shift.",
    "start": "3406170",
    "end": "3411420"
  },
  {
    "text": "Anyway, you could also get\nthis from Taylor series or any number of other methods\nfor estimating derivatives.",
    "start": "3411420",
    "end": "3420540"
  },
  {
    "text": "OK, so then if we combine\nthese two, if we add these two,",
    "start": "3420540",
    "end": "3425650"
  },
  {
    "text": "we get that diagram-- well, except for the sign. So this is actually\nminus the Laplacian",
    "start": "3425650",
    "end": "3432690"
  },
  {
    "text": "but it occurs on the same\nside of the equal sign. So when we move it\nto the other side,",
    "start": "3432690",
    "end": "3437910"
  },
  {
    "text": "it becomes plus the Laplacian. ",
    "start": "3437910",
    "end": "3442920"
  },
  {
    "text": "So the Laplacian is\nactually heavily used in machine vision,\nparticularly pre-processing.",
    "start": "3442920",
    "end": "3449910"
  },
  {
    "text": "So we should become\nfamiliar with it. ",
    "start": "3449910",
    "end": "3455580"
  },
  {
    "text": "By the way, another way\nof writing it is that. And engineers have\na different point",
    "start": "3455580",
    "end": "3462059"
  },
  {
    "text": "of view on that\nas mathematicians. I gather mathematicians\nprefer the first way",
    "start": "3462060",
    "end": "3467309"
  },
  {
    "text": "of writing the Laplacian,\nand fluid dynamics people like the other one.",
    "start": "3467310",
    "end": "3473700"
  },
  {
    "text": "But whatever. It's a Laplacian. So the Laplacian is an\ninteresting operator from many points of view.",
    "start": "3473700",
    "end": "3480240"
  },
  {
    "text": "It's a derivative operator. We've already seen the\nbrightness gradient plays an important role.",
    "start": "3480240",
    "end": "3485760"
  },
  {
    "text": "First derivatives-- for\nsome operations on images,",
    "start": "3485760",
    "end": "3491580"
  },
  {
    "text": "we would like things to\nbe rotationally invariant. In other words, if you are\nperforming some image operation",
    "start": "3491580",
    "end": "3498270"
  },
  {
    "text": "enhancing edge\ndetection, you don't want to depend on your choice\nof xy-coordinate system",
    "start": "3498270",
    "end": "3504690"
  },
  {
    "text": "so that when you\nturn the coordinates, you would expect things to\nwork out pretty much the same.",
    "start": "3504690",
    "end": "3509943"
  },
  {
    "text": "Of course, they'll have\ndifferent coordinates, but they'll be in the\ncorresponding place. So one of the big questions is,\nare there derivative operators,",
    "start": "3509943",
    "end": "3519820"
  },
  {
    "text": "which are very useful\nin edge detection, that are rotationally\nsymmetric so that when you rotate the coordinate\nsystem, they do the same thing?",
    "start": "3519820",
    "end": "3528579"
  },
  {
    "text": "Well, the Laplacian is the\nlowest order linear derivative",
    "start": "3528580",
    "end": "3536880"
  },
  {
    "text": "combination that does that. It doesn't look\nlike it, does it, because we're adding second\npartial derivative with respect",
    "start": "3536880",
    "end": "3544530"
  },
  {
    "text": "to x and the second partial\nderivative with respect to y. But if you go through\nthe pain and agony",
    "start": "3544530",
    "end": "3552390"
  },
  {
    "text": "of changing coordinate\nsystems and computing the first derivative\nand then computing the second derivatives\nand you add them up,",
    "start": "3552390",
    "end": "3558420"
  },
  {
    "text": "and magically, in the\nnew coordinate system, you get exactly the same. So suppose we have a\ncoordinate system like this,",
    "start": "3558420",
    "end": "3565590"
  },
  {
    "text": "and then we go to a\nrotated coordinate system. It turns out that zx prime-- ",
    "start": "3565590",
    "end": "3578840"
  },
  {
    "text": "that in that rotated\ncoordinate system, the Laplacian is the same. I'll spare you the details.",
    "start": "3578840",
    "end": "3583940"
  },
  {
    "text": "It's pretty boring. But this makes the\nLaplacian a lot",
    "start": "3583940",
    "end": "3589100"
  },
  {
    "text": "of interest in all sorts of\nimage processing operations because it is\nrotationally symmetric.",
    "start": "3589100",
    "end": "3595369"
  },
  {
    "text": "Of course, on a\ndiscreet grid, we are going to be\nsomewhat biased anyway. Like, does this look\nrotationally asymmetric?",
    "start": "3595370",
    "end": "3601640"
  },
  {
    "text": "Well, not terribly. So there are actually\nbetter approximations if you're on a square grid,\nand we'll talk about them.",
    "start": "3601640",
    "end": "3609330"
  },
  {
    "text": "And if you're not on a square\ngrid, you can do even better. For example, if you're\non a hexagonal grid,",
    "start": "3609330",
    "end": "3615380"
  },
  {
    "text": "you can get a better\napproximation. Anyway, back to this-- so what we've done\nover here is we've",
    "start": "3615380",
    "end": "3623390"
  },
  {
    "text": "bypassed the calculus of\nvariation for the moment, and we somewhat painfully\nwent into the discrete world",
    "start": "3623390",
    "end": "3631490"
  },
  {
    "text": "of discrete pixels. And we found an\nequation that has to be true at every\npixel in order for this",
    "start": "3631490",
    "end": "3640280"
  },
  {
    "text": "to be a least squares solution. That is, this is a solution\nthat minimizes that error.",
    "start": "3640280",
    "end": "3646829"
  },
  {
    "text": "It's the best fit. It's as good as we can get. And then sort of looking\nat this formula here,",
    "start": "3646830",
    "end": "3653810"
  },
  {
    "text": "we decided oh, maybe\nthat's the discrete version of that continuous equation.",
    "start": "3653810",
    "end": "3659840"
  },
  {
    "text": "And that's exactly\nright because if we use the calculus of\nvariation, we go directly",
    "start": "3659840",
    "end": "3665600"
  },
  {
    "text": "to that in one step. So why didn't we do that? Well, because there's\nthis huge learning curve.",
    "start": "3665600",
    "end": "3671760"
  },
  {
    "text": "So it's one step after\nyou do a lot of stuff, and I didn't want to\ndo that right now.",
    "start": "3671760",
    "end": "3676980"
  },
  {
    "text": "So anyway, what do we\ndo with these equations? How do we solve them? Of course, we can--\nthey're linear equations.",
    "start": "3676980",
    "end": "3683560"
  },
  {
    "text": "So we can use Gaussian\nelimination or some perhaps slightly more sophisticated\nalgorithm, all of which",
    "start": "3683560",
    "end": "3691590"
  },
  {
    "text": "take a long time for\nlots of equations. ",
    "start": "3691590",
    "end": "3697690"
  },
  {
    "text": "Right, typically, they\ngo something like n cubed or, if you're a\ncomplexity theory person,",
    "start": "3697690",
    "end": "3704230"
  },
  {
    "text": "n to the 2.76 or whatever with a\nvery large multiplier in front.",
    "start": "3704230",
    "end": "3711220"
  },
  {
    "text": "But whatever. Once n is a million or 10\nmillion, that's a large number, and it's not likely\nyou're actually",
    "start": "3711220",
    "end": "3718360"
  },
  {
    "text": "going to be doing that. So what to do instead-- well, the great thing is that we\nhave a sparse set of equations.",
    "start": "3718360",
    "end": "3728150"
  },
  {
    "text": "So we got a million\nequations, but each of them only has a handful\nof terms in it.",
    "start": "3728150",
    "end": "3733420"
  },
  {
    "text": "So they only involve-- each equation only\ninvolves five values of z.",
    "start": "3733420",
    "end": "3742510"
  },
  {
    "text": "So we got-- you think\nof writing them out. There's a million rows of\nthese, but each row only",
    "start": "3742510",
    "end": "3748450"
  },
  {
    "text": "has five non-zero elements. Well, it turns out we can then\nsolve this iteratively pretty",
    "start": "3748450",
    "end": "3753755"
  },
  {
    "text": "simply. ",
    "start": "3753755",
    "end": "3759740"
  },
  {
    "text": "And of course, it's easy to\npropose an iterative solution. It's hard to show\nthat it converges.",
    "start": "3759740",
    "end": "3767039"
  },
  {
    "text": "So we leave out that\npart, and we'll just",
    "start": "3767040",
    "end": "3772460"
  },
  {
    "text": "appeal to the textbooks that\nsay that it does converge. So what can we do here?",
    "start": "3772460",
    "end": "3777839"
  },
  {
    "text": "Well, we can pull out\none of these terms and pretend that we know--",
    "start": "3777840",
    "end": "3784130"
  },
  {
    "text": "we have an initial guess. So we know what these\nvalues are at the moment.",
    "start": "3784130",
    "end": "3789690"
  },
  {
    "text": "And we're going to compute\na new value for this one. So let's see if I got\nit written down or not.",
    "start": "3789690",
    "end": "3796850"
  },
  {
    "start": "3796850",
    "end": "3802130"
  },
  {
    "text": "So I'm going to use\nsubscript in parenthesis as a way of indicating\nthe iteration step.",
    "start": "3802130",
    "end": "3807190"
  },
  {
    "text": "So this is step n plus 1. ",
    "start": "3807190",
    "end": "3814480"
  },
  {
    "text": "And that's step n. ",
    "start": "3814480",
    "end": "3849580"
  },
  {
    "text": "OK, I almost wrote\nsuperscript parenthesis n here",
    "start": "3849580",
    "end": "3855490"
  },
  {
    "text": "for the n step. But no, these are\nfrom the image. They're fixed. Once we've processed the\nimages, that's given.",
    "start": "3855490",
    "end": "3863680"
  },
  {
    "text": "The only thing that\nmight change is this lot. And what is that? Well, that's local average.",
    "start": "3863680",
    "end": "3869500"
  },
  {
    "text": " And in our case, with that\ncomputational molecule, that,",
    "start": "3869500",
    "end": "3879430"
  },
  {
    "text": "looks like that. So the iterative\nstep is very simple.",
    "start": "3879430",
    "end": "3886460"
  },
  {
    "text": "We go to a particular pixel,\nand we get a new value by taking the average\nof the neighbors",
    "start": "3886460",
    "end": "3893470"
  },
  {
    "text": "from the previous step. And then we add\nin this correction here, which is based on\nthe image information.",
    "start": "3893470",
    "end": "3902720"
  },
  {
    "text": "And what does this do? Well, it brings us closer\nto satisfying the Laplacian",
    "start": "3902720",
    "end": "3907789"
  },
  {
    "text": "condition because this\nis the estimate of p sub x and this is the\nestimate of q sub y.",
    "start": "3907790",
    "end": "3915500"
  },
  {
    "text": "and the difference\nbetween this and that is our estimate of a Laplacian. So as we go along, we adjust\nthat pixel value using",
    "start": "3915500",
    "end": "3926030"
  },
  {
    "text": "that very simple equation. So here's where the\nsparseness comes in. This wouldn't be very useful if\nwe had a million terms in this.",
    "start": "3926030",
    "end": "3934130"
  },
  {
    "text": "But we've only got four\nneighbors to consider.",
    "start": "3934130",
    "end": "3940400"
  },
  {
    "text": "And you can show\nthat this converges. We won't do that. And it's going to be very much\nfaster than trying to solve it",
    "start": "3940400",
    "end": "3949970"
  },
  {
    "text": "with Gaussian elimination,\nparticularly since you don't need infinite precision. You can stop after a\ncertain point and relax.",
    "start": "3949970",
    "end": "3960770"
  },
  {
    "text": "So a couple of things to\npoint out-- first of all, this is closely related to solving\nthe heat equation, this type",
    "start": "3960770",
    "end": "3969970"
  },
  {
    "text": "of iteration, because\nthe heat equation is the second order PDE just\nlike the equation we have.",
    "start": "3969970",
    "end": "3977110"
  },
  {
    "text": "It's also the\ndiffusion equation. ",
    "start": "3977110",
    "end": "3983040"
  },
  {
    "text": "And so there are\nloads of techniques available from other\nfields that tell us",
    "start": "3983040",
    "end": "3989869"
  },
  {
    "text": "how to do this efficiently,\nhow to do it in parallel, and whatever.",
    "start": "3989870",
    "end": "3995240"
  },
  {
    "text": "So again, the idea is you\nstep through the pixels. And at each pixel, you compute\nthe average of the neighbors",
    "start": "3995240",
    "end": "4002230"
  },
  {
    "text": "and then add in a\ncorrection to them. And that's the new value. And you just keep on doing that.",
    "start": "4002230",
    "end": "4007270"
  },
  {
    "text": "Now for a start, you don't\nhave to do this sequentially as Farnborough did\nthe rows of his field.",
    "start": "4007270",
    "end": "4016930"
  },
  {
    "text": "You can do this in\nany order you want. And in fact, there are\nadvantages in terms of convergence if you do that.",
    "start": "4016930",
    "end": "4023590"
  },
  {
    "text": "Also, you can parallelize this.",
    "start": "4023590",
    "end": "4029650"
  },
  {
    "text": "You can do as many\nof these as you like in parallel as long as they\ndon't touch each other, right?",
    "start": "4029650",
    "end": "4036640"
  },
  {
    "text": "So if you are making a change to\na pixel based on some neighbor,",
    "start": "4036640",
    "end": "4041740"
  },
  {
    "text": "you do not want the\ncomputation that changes the neighbor\nat the same timestep. But that's huge\nbecause we can divide",
    "start": "4041740",
    "end": "4052000"
  },
  {
    "text": "the image into, I don't know,\nnine sub-images, little 3 by 3 blocks.",
    "start": "4052000",
    "end": "4057174"
  },
  {
    "text": " And while we're\noperating on this one.",
    "start": "4057175",
    "end": "4062480"
  },
  {
    "text": "We're not allowed to\ntouch these others. But that's fine. That means we can have huge\nparallelism, a million pixels",
    "start": "4062480",
    "end": "4071170"
  },
  {
    "text": "divided by 9. Well, we probably don't\nhave 110,000 processes.",
    "start": "4071170",
    "end": "4076720"
  },
  {
    "text": "So we can do something\nslightly more intelligent. Anyway, methods for numerically\nsolving these equations are",
    "start": "4076720",
    "end": "4084700"
  },
  {
    "text": "well--known, and it's a very\nstable problem in the sense that if there's noise\nin your measurements,",
    "start": "4084700",
    "end": "4092530"
  },
  {
    "text": "it'll still converge. It'll still work, and\neverything will be cool.",
    "start": "4092530",
    "end": "4097810"
  },
  {
    "text": "OK, so-- OK, we\nhave a bit of time.",
    "start": "4097810",
    "end": "4104460"
  },
  {
    "text": "So what have we done? Well, what we've done right\nnow is learned some techniques",
    "start": "4104460",
    "end": "4110028"
  },
  {
    "text": "because in a way,\nthis isn't directly useful except for the case\nof photometric stereo.",
    "start": "4110029",
    "end": "4116180"
  },
  {
    "text": "And we now want to move on\nfrom photometric stereo. But the kind of tools like this\ndiscretization and avoiding",
    "start": "4116180",
    "end": "4125270"
  },
  {
    "text": "the conflict of identifiers\nand then looking at the terms and seeing, oh, this\nis an approximation",
    "start": "4125270",
    "end": "4132890"
  },
  {
    "text": "of the derivative-- those will reoccur. So it was good that we did this.",
    "start": "4132890",
    "end": "4138259"
  },
  {
    "text": "But beyond that, this shows you\nif you have photometric stereo",
    "start": "4138260",
    "end": "4143689"
  },
  {
    "text": "data, you can reconstruct the\nsurface in a least squares way and get a reasonable\nsolution that",
    "start": "4143689",
    "end": "4151160"
  },
  {
    "text": "matches the experimental data. OK, now we're going to go\nback to the somewhat more",
    "start": "4151160",
    "end": "4160189"
  },
  {
    "text": "challenging problem of\nsingle image reconstructions.",
    "start": "4160189",
    "end": "4169818"
  },
  {
    "text": "And we solved one\ncase already, which is if the surface had these\nvery special properties.",
    "start": "4169819",
    "end": "4178130"
  },
  {
    "text": "Right, so let's just go\nover that a little bit.",
    "start": "4178130",
    "end": "4185489"
  },
  {
    "text": "So this was where we had--",
    "start": "4185490",
    "end": "4192633"
  },
  {
    "text": " brightness was a function\nof that, which was incident.",
    "start": "4192634",
    "end": "4202610"
  },
  {
    "text": " And in this case,\nthe reflectance map",
    "start": "4202610",
    "end": "4208570"
  },
  {
    "text": "was very simple. ",
    "start": "4208570",
    "end": "4219219"
  },
  {
    "text": "We had these parallel lines. They won't be equally spaced\nbecause of the square root, but they're parallel lines.",
    "start": "4219220",
    "end": "4225980"
  },
  {
    "text": "And each of them has the 1 plus\npsp plus qsq equals a constant.",
    "start": "4225980",
    "end": "4235140"
  },
  {
    "text": "So the isophotes in\nthe reflectance map are these parallel\nstraight lines.",
    "start": "4235140",
    "end": "4242590"
  },
  {
    "text": "And that's actually\nwhat allowed us to solve the problem\nbecause then we said, well, suppose I rotate to a\nsomewhat more useful coordinate",
    "start": "4242590",
    "end": "4255290"
  },
  {
    "text": "system.  In that coordinate\nsystem, I can just",
    "start": "4255290",
    "end": "4262010"
  },
  {
    "text": "determine the slope in\nthat special direction. So if I read off\nbrightness value like this,",
    "start": "4262010",
    "end": "4271190"
  },
  {
    "text": "in the original\ncoordinate system, it's a linear relationship\nbetween p and q. But in the new\ncoordinate system,",
    "start": "4271190",
    "end": "4277340"
  },
  {
    "text": "it's conveniently giving me\nan exact value of p-prime. ",
    "start": "4277340",
    "end": "4284060"
  },
  {
    "text": "And it tells me nothing\nabout the q prime. So I've sorted of maximized the\ninformation in one direction",
    "start": "4284060",
    "end": "4290840"
  },
  {
    "text": "and made it worse in\nanother direction. And I'm just going\nto write this down.",
    "start": "4290840",
    "end": "4297870"
  },
  {
    "text": "I'm not going to\ndo this carefully, but it turns out\nthat we will need to deal with these coordinated\ntransformations at some point.",
    "start": "4297870",
    "end": "4305869"
  },
  {
    "text": "So-- oops. So-- oh, and what is this angle?",
    "start": "4305870",
    "end": "4315719"
  },
  {
    "text": "Let's call it theta s.  Since that ray,\nthat access p prime,",
    "start": "4315720",
    "end": "4324710"
  },
  {
    "text": "is perpendicular to\nall of these lines-- right, I'm going to have\nthat p comma q dot ps qs.",
    "start": "4324710",
    "end": "4336520"
  },
  {
    "text": "It's going to allow me\nto determine that angle is given by this triangle.",
    "start": "4336520",
    "end": "4343760"
  },
  {
    "text": "qs-- so I can--",
    "start": "4343760",
    "end": "4350800"
  },
  {
    "text": "well, might as\nwell write it down. So whatever the light\nsource position is,",
    "start": "4350800",
    "end": "4356540"
  },
  {
    "text": "I can figure out\nwhat that angle is. So actually, the light source\nis somewhere along this line.",
    "start": "4356540",
    "end": "4363880"
  },
  {
    "text": "Let's say it's up here. ",
    "start": "4363880",
    "end": "4369160"
  },
  {
    "text": "OK, now what I want to do is\nrotate the image ahead of time",
    "start": "4369160",
    "end": "4377280"
  },
  {
    "text": "so to make this\nunnecessary later.",
    "start": "4377280",
    "end": "4383079"
  },
  {
    "text": "So what's the relationship? Well, I'm sure you know this.",
    "start": "4383080",
    "end": "4388695"
  },
  {
    "start": "4388695",
    "end": "4399599"
  },
  {
    "text": "And we can call it theta s\nor just theta for simplicity. OK, but what we need is a\nrelationship between p and q",
    "start": "4399600",
    "end": "4408135"
  },
  {
    "text": "and p prime and q prime So we need dz dx prime is dz\ndx dx dx prime plus dz dy dy dx",
    "start": "4408135",
    "end": "4421150"
  },
  {
    "text": "prime.  And of course, this is p\nprime that I want to go for.",
    "start": "4421150",
    "end": "4428780"
  },
  {
    "text": "This is p. This is q. And so I'm left with that.",
    "start": "4428780",
    "end": "4434690"
  },
  {
    "text": "Well, annoyingly, that's\ngoing the wrong way. So I actually need the\ninverse transform of this.",
    "start": "4434690",
    "end": "4441570"
  },
  {
    "text": "So what's the inverse of\nrotating through theta? Rotating through\nminus theta, right?",
    "start": "4441570",
    "end": "4448190"
  },
  {
    "text": "So x is x prime cos theta\nminus y prime sine theta, and y",
    "start": "4448190",
    "end": "4454400"
  },
  {
    "text": "is x prime sine theta plus. ",
    "start": "4454400",
    "end": "4462020"
  },
  {
    "text": "OK, so then this is dx.\ndx prime is cosine theta.",
    "start": "4462020",
    "end": "4468290"
  },
  {
    "text": "And this is dy dx prime. So that's sine theta.",
    "start": "4468290",
    "end": "4474659"
  },
  {
    "text": "So actually, I got p prime is p\ncosine theta plus q sine theta.",
    "start": "4474660",
    "end": "4482370"
  },
  {
    "text": "And similarly, I'm going to\nget q prime is minus p sine. So this is nice.",
    "start": "4482370",
    "end": "4491880"
  },
  {
    "text": "And you might say, well, I\ncould have guessed that, right, because it has the same form.",
    "start": "4491880",
    "end": "4497820"
  },
  {
    "text": "Well, think again\nbecause when you get to the second derivative,\nthis doesn't work. You can't just guess the answer.",
    "start": "4497820",
    "end": "4504000"
  },
  {
    "text": "And that may be relevant because\nwe will be talking about-- we're talking about\nthe Laplacian.",
    "start": "4504000",
    "end": "4509370"
  },
  {
    "text": "So right there,\nif you were trying to prove that theorem I said\nabout rotational symmetry,",
    "start": "4509370",
    "end": "4514620"
  },
  {
    "text": "you'd need to get\nsecond derivatives, and then this wouldn't work. Anyway, so I'm going to do that.",
    "start": "4514620",
    "end": "4520969"
  },
  {
    "text": "I'm going to rotate\nthese coordinate systems, and then I'm going to end\nup with something like--",
    "start": "4520970",
    "end": "4526935"
  },
  {
    "start": "4526935",
    "end": "4550400"
  },
  {
    "text": "which relates the image\nmeasurements to the slope. And the details of the\nequation isn't so important.",
    "start": "4550400",
    "end": "4558239"
  },
  {
    "text": "What's important is that I\ncan be at a particular point in the image. I read off the brightness,\nand I compute this quantity.",
    "start": "4558240",
    "end": "4565758"
  },
  {
    "text": "The other things are all known. I know where the\nlight source is. And I've got the slope,\nwhich is amazing.",
    "start": "4565758",
    "end": "4570875"
  },
  {
    "text": " I have the slope of the surface\nin a particular direction,",
    "start": "4570875",
    "end": "4578869"
  },
  {
    "text": "and that's enough.",
    "start": "4578870",
    "end": "4584090"
  },
  {
    "text": "We can now reconstruct\nthe surface.",
    "start": "4584090",
    "end": "4590060"
  },
  {
    "text": "But this did require that we\nrotate the coordinate system, that we have a\nparticular direction.",
    "start": "4590060",
    "end": "4596970"
  },
  {
    "text": "And that's going to be\ntrue in the general case. So this is only\nfor Hapke, where we",
    "start": "4596970",
    "end": "4602060"
  },
  {
    "text": "have nice, straight\nline isophotes in the reflections map. But we'll generalize that.",
    "start": "4602060",
    "end": "4608570"
  },
  {
    "text": "And OK, so what do\nwe do with that? Well, we went over\nthis a little bit last time because we can just\nintegrate out z of x is--",
    "start": "4608570",
    "end": "4620285"
  },
  {
    "start": "4620285",
    "end": "4630460"
  },
  {
    "text": "right, so we have the slope. We just integrate it out. In terms of discrete\nimplementation, we're here.",
    "start": "4630460",
    "end": "4638490"
  },
  {
    "text": "We go a small distance delta\nx-- like, I don't know, a pixel. We know the slope.",
    "start": "4638490",
    "end": "4643660"
  },
  {
    "text": "So we know how\nmuch z is changing. Right, so we have\na new value of z",
    "start": "4643660",
    "end": "4649740"
  },
  {
    "text": "And then we look at the\nimage and say, what's the brightness here? And using that formula, we\nfind a new value for p prime,",
    "start": "4649740",
    "end": "4658050"
  },
  {
    "text": "and we continue. We take another\nlittle step delta x, and we get there and so on.",
    "start": "4658050",
    "end": "4665830"
  },
  {
    "text": "And so we can build up a\nshape in the discrete world. And we can go the other\ndirection as well.",
    "start": "4665830",
    "end": "4671820"
  },
  {
    "text": "We can go minus delta x and\nbuild up a profile this way.",
    "start": "4671820",
    "end": "4678290"
  },
  {
    "text": "So that's kind of amazing\nthat you can do that. Well, that's a single profile.",
    "start": "4678290",
    "end": "4684320"
  },
  {
    "text": "But now in the image,\nwe have the y direction to deal with as well.",
    "start": "4684320",
    "end": "4690140"
  },
  {
    "text": "But we can do this\nfor any y, right?",
    "start": "4690140",
    "end": "4703250"
  },
  {
    "text": "But in each case, we're\nconfined to running along a row. There's no interaction\nbetween the rows.",
    "start": "4703250",
    "end": "4708619"
  },
  {
    "text": "We just treat it as a 1D\nproblem along each row. We read off the\nbrightness at each pixel.",
    "start": "4708620",
    "end": "4715020"
  },
  {
    "text": "We convert it to the\nslope using that formula and then use that slope\nto see where we go.",
    "start": "4715020",
    "end": "4723090"
  },
  {
    "text": "So there are couple\nof things about this that are interesting. So one is that if I\nadd a constant to z,",
    "start": "4723090",
    "end": "4731600"
  },
  {
    "text": "does anything change? ",
    "start": "4731600",
    "end": "4736980"
  },
  {
    "text": "So in fact, let's go\nback to this one up here, this overdetermined\nproblem which",
    "start": "4736980",
    "end": "4743570"
  },
  {
    "text": "has now sort of disappeared.  If you add a constant to z,\ndoes the Laplacian of z change?",
    "start": "4743570",
    "end": "4754440"
  },
  {
    "text": "No, right? So that's interesting\nbecause that means that, OK, you can recover z.",
    "start": "4754440",
    "end": "4760200"
  },
  {
    "text": "But actually, the absolute\nheight of z you don't know. And that's reasonable because\nif brightness depends on surface",
    "start": "4760200",
    "end": "4766530"
  },
  {
    "text": "orientation, then moving\nthe surface up and down shouldn't have any effect. And in particular, in the case\nof orthographic projection,",
    "start": "4766530",
    "end": "4774150"
  },
  {
    "text": "it doesn't change in any way. It's not even magnifying\nor minifying or something.",
    "start": "4774150",
    "end": "4780159"
  },
  {
    "text": "And so similarly here,\nthe shading information tells us nothing directly\nabout depth, only about",
    "start": "4780160",
    "end": "4786600"
  },
  {
    "text": "relative depth. You know, what's the\nslope of the surface? And so here, to actually\nget a reconstruction,",
    "start": "4786600",
    "end": "4793770"
  },
  {
    "text": "I need an initial value for z.",
    "start": "4793770",
    "end": "4802130"
  },
  {
    "text": "And, well, that's a problem. Now if it was just--",
    "start": "4802130",
    "end": "4809090"
  },
  {
    "text": "like in the case of\nthe Laplacian solution, if it's just an overall\nchange in height,",
    "start": "4809090",
    "end": "4814969"
  },
  {
    "text": "that would be easy to deal with. That's just one unknown. But here, we potentially have\na different initial value",
    "start": "4814970",
    "end": "4821390"
  },
  {
    "text": "for every row that\nwe're integrating along. So you can imagine that we're\ncomputing these solutions,",
    "start": "4821390",
    "end": "4828560"
  },
  {
    "text": "and we have an initial\nvalue, say, here.",
    "start": "4828560",
    "end": "4836320"
  },
  {
    "text": "And we integrate it out. But we can pick\nthose independently, or somebody could go\nthere and measure it.",
    "start": "4836320",
    "end": "4842980"
  },
  {
    "text": "But that defeats the purpose. We're trying to find the\nsurface shape of the moon before anyone goes there.",
    "start": "4842980",
    "end": "4849130"
  },
  {
    "text": "And so having someone go there\nand survey it kind of defeats the purpose, although it\ndoes mean that you only",
    "start": "4849130",
    "end": "4855700"
  },
  {
    "text": "have to survey one curve,\nand then everything else sprouts off from that.",
    "start": "4855700",
    "end": "4861790"
  },
  {
    "text": "And we already talked\nabout various heuristics to try and build something\neven though we don't know that.",
    "start": "4861790",
    "end": "4870640"
  },
  {
    "text": "So we don't need to have\nthese initial points",
    "start": "4870640",
    "end": "4876120"
  },
  {
    "text": "along the y-axis, though. We could have initial\npoints along any curve.",
    "start": "4876120",
    "end": "4883710"
  },
  {
    "text": "So that means what we actually\nneed is an initial curve. Doesn't really matter what the\ncurve is as long as it's not",
    "start": "4883710",
    "end": "4892800"
  },
  {
    "text": "parallel to the x-prime . Axis OK, and then now,\nwe can map this back",
    "start": "4892800",
    "end": "4899820"
  },
  {
    "text": "into our original\nunrotated world.",
    "start": "4899820",
    "end": "4906530"
  },
  {
    "text": "And these profiles now\nwill run at an angle.",
    "start": "4906530",
    "end": "4913670"
  },
  {
    "text": "And we have some\nsort of curve here. Now let me introduce\ncoordinates.",
    "start": "4913670",
    "end": "4920030"
  },
  {
    "text": " Let's call the initial curve\nis some function of eta.",
    "start": "4920030",
    "end": "4926420"
  },
  {
    "text": "So initial curve is x of\neta, y of eta, z of eta.",
    "start": "4926420",
    "end": "4933880"
  },
  {
    "text": "Right, so we'll\nassume that's given. And then we go away from that\nusing some other parameter,",
    "start": "4933880",
    "end": "4944900"
  },
  {
    "text": "[INAUDIBLE]. And that's our x\nprime in this case, but we want to generalize that.",
    "start": "4944900",
    "end": "4951230"
  },
  {
    "text": "So this is going to be very\nsimilar to the general method.",
    "start": "4951230",
    "end": "4958560"
  },
  {
    "text": "And so we take a step delta\nx along this curve, which",
    "start": "4958560",
    "end": "4965350"
  },
  {
    "text": "would be a step in x prime. And because of the rotation--",
    "start": "4965350",
    "end": "4973490"
  },
  {
    "start": "4973490",
    "end": "5006230"
  },
  {
    "text": "so this is the scheme\nwe're following. So we're we\nexploring the surface",
    "start": "5006230",
    "end": "5011500"
  },
  {
    "text": "by moving along these curves,\nand from step to step,",
    "start": "5011500",
    "end": "5016540"
  },
  {
    "text": "this is what we do. We have delta x and\ndelta y change in a way",
    "start": "5016540",
    "end": "5022900"
  },
  {
    "text": "that's at an angle, theta\ns, in this original xy coordinate system.",
    "start": "5022900",
    "end": "5028630"
  },
  {
    "text": "I've gone back to that system\nbecause in general, we won't be able to use this trick. It's only for Hapke\nsurfaces that it works.",
    "start": "5028630",
    "end": "5035869"
  },
  {
    "text": "And so you can see the\nnumerical calculation is very straightforward. We pick up the image brightness.",
    "start": "5035870",
    "end": "5041650"
  },
  {
    "text": "We plug it into\nthis formula, and we get a step in the z direction. And so we just continue doing\nthat and explore that curve.",
    "start": "5041650",
    "end": "5051280"
  },
  {
    "text": "And then we do the same\nfor the next curve, and they can be\ncomputed independently. So you can do them in\nparallel if you want.",
    "start": "5051280",
    "end": "5057040"
  },
  {
    "text": " Just one little note-- ",
    "start": "5057040",
    "end": "5064110"
  },
  {
    "text": "you can change the speed that\nyou explore the solution in",
    "start": "5064110",
    "end": "5070190"
  },
  {
    "text": "because if this tells me to\ntake a step delta x, delta y, delta z, maybe I'll\ntake 2 delta x, 2 delta",
    "start": "5070190",
    "end": "5079400"
  },
  {
    "text": "y, 2 delta z or a half. And how would I decide?",
    "start": "5079400",
    "end": "5084410"
  },
  {
    "text": "Well, suppose that you\nonly move 1/100 of a pixel. That's probably a bad\nchoice for increment.",
    "start": "5084410",
    "end": "5090770"
  },
  {
    "text": "Or suppose you move 10 pixels. That's a bad choice\nfor increment. You want to reduce it. And the convenient thing is we\ncan easily change the speed.",
    "start": "5090770",
    "end": "5097970"
  },
  {
    "text": "We just multiply all three\nof them by the same constant. And so if you want\nsimple equations,",
    "start": "5097970",
    "end": "5105770"
  },
  {
    "text": "we can just multiply\nby that constant, and you get a somewhat\nsimpler looking expression.",
    "start": "5105770",
    "end": "5111650"
  },
  {
    "text": " Right, so we're moving in the\nx direction proportional to qs.",
    "start": "5111650",
    "end": "5117935"
  },
  {
    "text": "We're moving in the y\ndirection proportional to ps. And those are fixed. We're just driving along. And then in the z direction\nwe have this simple formula.",
    "start": "5117935",
    "end": "5126490"
  },
  {
    "text": "And so what we'll\ndo next time is generalize this to\narbitrary reflectance map,",
    "start": "5126490",
    "end": "5133050"
  },
  {
    "text": "not just Hapke-type surfaces. And please do have a\nlook online for pictures",
    "start": "5133050",
    "end": "5139800"
  },
  {
    "text": "of images taken by scanning\nelectron microscope.",
    "start": "5139800",
    "end": "5146670"
  },
  {
    "text": "They're really neat,\nand they provide nice examples of shading and our\nability to interpret shading.",
    "start": "5146670",
    "end": "5154410"
  },
  {
    "text": "So-- ",
    "start": "5154410",
    "end": "5161309"
  }
]