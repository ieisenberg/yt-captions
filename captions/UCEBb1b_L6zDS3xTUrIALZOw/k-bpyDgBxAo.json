[
  {
    "start": "0",
    "end": "17452"
  },
  {
    "text": "SAMAN AMARASINGHE:\nSo welcome to 6.035. This last sheet, I gave\nat the end of the class.",
    "start": "17452",
    "end": "24270"
  },
  {
    "text": "The last part I'm going\nto do in the class is look at what\ncompile optimizers do. So just to do that, I thought\nit would be fun for you guys",
    "start": "24270",
    "end": "33120"
  },
  {
    "text": "to actually see, if you have a\nfew minutes, just look at this. And if I have time, I'll\ngive you two or three minutes",
    "start": "33120",
    "end": "40140"
  },
  {
    "text": "before I get into that\nsection so you can actually see whether you can beat me\nin optimizing the program.",
    "start": "40140",
    "end": "45590"
  },
  {
    "text": "So you'll see what I thought,\nif you can do something better than me. OK, so hopefully everybody\nhad a good summer",
    "start": "45590",
    "end": "53010"
  },
  {
    "text": "and are ready to get going. And so what we are\ngoing to do today is spend some time on\ncourse administration stuff",
    "start": "53010",
    "end": "63390"
  },
  {
    "text": "because this is a\nlarge project course that a lot of things starting\nfrom today, basically, get going.",
    "start": "63390",
    "end": "68700"
  },
  {
    "text": "And so everybody has to be\nright on top of what's going on. And then another\nhalf of the course",
    "start": "68700",
    "end": "74670"
  },
  {
    "text": "I will just introduce what\nthis class is all about, why you should be\nhere, and why it's",
    "start": "74670",
    "end": "80790"
  },
  {
    "text": "interesting to\nlearn this material, and just go a little bit into\nthe flow of how we compile this",
    "start": "80790",
    "end": "87520"
  },
  {
    "text": "build.  So for administration-- so\nlet me just jump into this.",
    "start": "87520",
    "end": "96799"
  },
  {
    "text": "So I am Saman. And I sit in this building up\nthere, in the seventh floor.",
    "start": "96800",
    "end": "103990"
  },
  {
    "text": "My main interest\nis in compilers. And I am very\ninterested in a lot of low-level\ncompiler and compute",
    "start": "103990",
    "end": "111040"
  },
  {
    "text": "architecture, where it meets. And a lot of times,\ntraditionally, compilers means try to run things faster.",
    "start": "111040",
    "end": "118369"
  },
  {
    "text": "But there are a lot of\ninteresting things on how compiler-type\ntechnology can help in security and many other\ndomains, it's applying.",
    "start": "118370",
    "end": "125860"
  },
  {
    "text": "So I'm interested in\na lot of those areas. So this is a passion for me.",
    "start": "125860",
    "end": "130899"
  },
  {
    "text": "So it's my bread and\nbutter, you guys, that I'm going to talk\nto you guys about. And I'm going to go through\nthis class with Martin.",
    "start": "130900",
    "end": "138850"
  },
  {
    "text": "And tell us a little\nbit what you work on? MARTIN RINARD: Sure. So I tend to work on--",
    "start": "138850",
    "end": "145570"
  },
  {
    "text": "so Saman tends to be very\nclose to the hardware versus-- on part of the compiler\nthat maps the program down to the hardware for efficiency.",
    "start": "145570",
    "end": "151763"
  },
  {
    "text": "I tend to work at a higher\nlevel in the stack, where I'm more interested in\nanalyzing what the program does,",
    "start": "151763",
    "end": "157359"
  },
  {
    "text": "and towards program\noptimization, and also towards understanding\nwhether the program is correct",
    "start": "157360",
    "end": "163090"
  },
  {
    "text": "or not. More recently, I've become\ninterested in understanding ways",
    "start": "163090",
    "end": "168130"
  },
  {
    "text": "of leaving the\nbug in the program and letting you continue to\nexecute to see if it gives you an acceptable result,\nrather than focusing",
    "start": "168130",
    "end": "174519"
  },
  {
    "text": "on how to correct the program so\nyou can get on the right tract. So I think Saman\nand I have split",
    "start": "174520",
    "end": "180069"
  },
  {
    "text": "the area of\ntraditional compilation because he focuses more\non the low end, where you have the computation\ndown to hardware.",
    "start": "180070",
    "end": "185990"
  },
  {
    "text": "I focus more on the high\nend, find information like that out of that.",
    "start": "185990",
    "end": "191870"
  },
  {
    "text": "SAMAN AMARASINGHE:\nOK, so there are-- Mary is sitting in the back.",
    "start": "191870",
    "end": "199010"
  },
  {
    "text": "And she's the most important\nperson for you to know about. She has all the\nadministrative stuff.",
    "start": "199010",
    "end": "206270"
  },
  {
    "text": "Her office will have previous\ncourse notes and stuff like that.",
    "start": "206270",
    "end": "212270"
  },
  {
    "text": "And Punia is going\nto be your TA. And so if you have a lot\nof problems-- any problem",
    "start": "212270",
    "end": "219800"
  },
  {
    "text": "with the project or stuff like\nthat, he's the person to run to. ",
    "start": "219800",
    "end": "225170"
  },
  {
    "text": "So we don't have a\ntextbook in this class. So we don't recommend\nanybody going and spending",
    "start": "225170",
    "end": "231462"
  },
  {
    "text": "money buying these textbooks. But if you are really\ninterested in compilers and if you really think this is\nan interesting area, if you want",
    "start": "231462",
    "end": "237227"
  },
  {
    "text": "to get more information, there\nare these three textbooks, the Tiger Book, the Whale\nBook and the Dragon Book.",
    "start": "237227",
    "end": "242870"
  },
  {
    "text": "Can you guys see this? OK. It's hard for me to\neven see from here.",
    "start": "242870",
    "end": "248680"
  },
  {
    "text": "So just take it out from\nthe library if you need. And I think the reading\nroom might have it",
    "start": "248680",
    "end": "255570"
  },
  {
    "text": "upstairs in the eighth floor. But unless you are\nreally thinking that you want to do\nthis for your career,",
    "start": "255570",
    "end": "263729"
  },
  {
    "text": "I don't recommend\nbuying these books. So this course is all\nabout a big project.",
    "start": "263730",
    "end": "270670"
  },
  {
    "text": "So at the end of the\nday, all of you guys will build a\nsubstantial compiler. And that's a huge project,\na lot of cool stuff going on",
    "start": "270670",
    "end": "277860"
  },
  {
    "text": "around the project. So because of that,\nthe class basically is structured\naround the project.",
    "start": "277860",
    "end": "283120"
  },
  {
    "text": "So the project\nhas five segments. So there's a lexical\nand syntax analysis part",
    "start": "283120",
    "end": "288780"
  },
  {
    "text": "that we are going to basically\nget started on tomorrow. There's a semantic analysis.",
    "start": "288780",
    "end": "294030"
  },
  {
    "text": "So we just basically-- I will go and describe\nwhat these things are in a little while.",
    "start": "294030",
    "end": "299470"
  },
  {
    "text": "And then we generate\ncodes in the midterm that we actually\nhave into a compiler. So write a program, get\nit working on a machine.",
    "start": "299470",
    "end": "306850"
  },
  {
    "text": "So it's cool. In the middle of the\nterm, we get that. And then we start doing some\ninteresting optimizations,",
    "start": "306850",
    "end": "312310"
  },
  {
    "text": "start a segment that do\ndata flow optimizations and do instruction optimization.",
    "start": "312310",
    "end": "317970"
  },
  {
    "text": "So after that, you\nactually have a program not only running,\nactually running faster. So the way we do it\nis we start a segment.",
    "start": "317970",
    "end": "327910"
  },
  {
    "text": "So for example, the first\nsegment starts tomorrow. There will be a\nproject description. And Punia will have a\nsession explaining to you",
    "start": "327910",
    "end": "334492"
  },
  {
    "text": "what the project is about,\nall those things you need to know about the project. Then we have two or four\nlectures immediately,",
    "start": "334492",
    "end": "341819"
  },
  {
    "text": "describing the theory\naround that area, and all the\ninteresting high level",
    "start": "341820",
    "end": "347580"
  },
  {
    "text": "stuff that you need to know to\ndo this part of the project. And then you have project time.",
    "start": "347580",
    "end": "353220"
  },
  {
    "text": "You just go-- and sometimes\nit could be a week, two weeks. If you actually look\nat this handout,",
    "start": "353220",
    "end": "359520"
  },
  {
    "text": "the color-coded handout,\nthere are colors",
    "start": "359520",
    "end": "365370"
  },
  {
    "text": "for each project segment. So as you see, tomorrow,\nthe first project starts.",
    "start": "365370",
    "end": "371070"
  },
  {
    "text": "And after four lectures,\nthen you have a few days. And for the other projects, you\nhave a lot more days actually",
    "start": "371070",
    "end": "376560"
  },
  {
    "text": "to work on the project. And then we have this\ninteresting thing called project check point.",
    "start": "376560",
    "end": "382750"
  },
  {
    "text": "It's nothing but an insurance\npolicy for you guys. So what project checkpoint-- I do it in the middle\nof the large projects.",
    "start": "382750",
    "end": "389310"
  },
  {
    "text": "You just create a\ntable of all the things you have been working on. And just submit it.",
    "start": "389310",
    "end": "394720"
  },
  {
    "text": "And we are going to\nkeep those files. We're never going to look\nat it until at the end of the submission.",
    "start": "394720",
    "end": "400680"
  },
  {
    "text": "At the end of the day when\nyou submit the project, if everything works\nand no problem, you pass all the tests and stuff\nlike that, that doesn't matter.",
    "start": "400680",
    "end": "408000"
  },
  {
    "text": "You get a good grade. You're happy. And everybody's happy. But assume that\nat end of the day, your project really didn't work.",
    "start": "408000",
    "end": "414030"
  },
  {
    "text": "It's not passing the test. There are bugs in it. And you have a lot\nof issues in there. At that point, the table becomes\nvery important-- the checkpoint.",
    "start": "414030",
    "end": "420990"
  },
  {
    "text": "Because traditionally,\na lot of MIT students start doing this project about\n24 hours before it's due.",
    "start": "420990",
    "end": "428729"
  },
  {
    "text": "And the interesting thing about\na project like this is you cannot really get it done. You really need to put\nin a few weeks of work.",
    "start": "428730",
    "end": "435557"
  },
  {
    "text": "The reason you are given two\nweeks is you need the two weeks. So what the table\nsays is that it's a checkpoint to\nsee how much work",
    "start": "435558",
    "end": "441780"
  },
  {
    "text": "you have done at that point. So if the program\ndoesn't work, we will look at the\ncheckpoint code.",
    "start": "441780",
    "end": "447720"
  },
  {
    "text": "And if you realize\nyou have actually done a substantial amount\nof work at that point and you just have been\nworking continuously",
    "start": "447720",
    "end": "453927"
  },
  {
    "text": "and still, you didn't\nmanage to get it done, we'll be very\nlenient in grading. We'll say, OK look,\nyou work hard. And every time, these things\nare very complex things.",
    "start": "453927",
    "end": "461100"
  },
  {
    "text": "And things go wrong. That's OK. But on the other hand,\nif you look at the table and it's basically\nnothing but an empty file,",
    "start": "461100",
    "end": "467940"
  },
  {
    "text": "then that means you\nstarted the day before. And it didn't work. There's no excuse for that.",
    "start": "467940",
    "end": "473790"
  },
  {
    "text": "And we will be very\nharsh in grading. So in that sense, it's\na pure insurance policy.",
    "start": "473790",
    "end": "479250"
  },
  {
    "text": "So the key thing is, get\ndone before at least-- think about it as two deadlines. So instead of saying\nthe project is due,",
    "start": "479250",
    "end": "484906"
  },
  {
    "text": "at least there\nare two deadlines. So if your normal thing\nis to work for three days before the deadline, with\nthis, you'd have six days.",
    "start": "484907",
    "end": "492130"
  },
  {
    "text": "So you'll see. And final project is due. And then we move to\nthe next section.",
    "start": "492130",
    "end": "497950"
  },
  {
    "text": "So that's the way this\nis going to work-- the class is going to work. So the project are\ndone in groups.",
    "start": "497950",
    "end": "506770"
  },
  {
    "text": "Here's a project\nthat I don't think-- if any of you, how good a\nprogrammer you are to say,",
    "start": "506770",
    "end": "511817"
  },
  {
    "text": "I'm going to do it myself. It's not doable. Because there's so much work to\nbe done in this type of project. So what that means\nis we are going to--",
    "start": "511817",
    "end": "520219"
  },
  {
    "text": "today and until, I think, we\nalready have a piece of paper to submit possible groups.",
    "start": "520220",
    "end": "529242"
  },
  {
    "text": "If you know you're\nalready a group, if you already have three\nor four people together, just fill it out. Otherwise, Punia is going\nto collect these things",
    "start": "529242",
    "end": "535350"
  },
  {
    "text": "and try to form groups and get\nit done as soon as possible. And hopefully by the weekend,\nwe will actually have groups.",
    "start": "535350",
    "end": "542100"
  },
  {
    "text": "We do not want\nanybody more than-- we'd like to have\ngroups of three. Groups of two\ndoesn't really work.",
    "start": "542100",
    "end": "548279"
  },
  {
    "text": "So actually, three and\nfour's, basically, we don't want bigger groups either. So sometimes people\nsay, I have two people.",
    "start": "548280",
    "end": "554310"
  },
  {
    "text": "I want to do a two-person group. And then what\nhappens is somebody drops out in the middle. And then things get really ugly.",
    "start": "554310",
    "end": "561089"
  },
  {
    "text": "And so what that\nmeans is grading is-- a large part of the grade\nis given for the project.",
    "start": "561090",
    "end": "567100"
  },
  {
    "text": "So it's basically\nthe entire group will be in the same\nclassroom together. So here's one thing I used to\ntell students in this class.",
    "start": "567100",
    "end": "575519"
  },
  {
    "text": "For a lot of people taking\nthis class over the years, many people do\nreally well, got A's.",
    "start": "575520",
    "end": "582300"
  },
  {
    "text": "The few people who\nreally didn't do--  for example, I have a\nfew people who actually",
    "start": "582300",
    "end": "588420"
  },
  {
    "text": "didn't passed this class. They didn't pass this course not\nbecause they were bad coders.",
    "start": "588420",
    "end": "593910"
  },
  {
    "text": "That's because\nthey never managed to get a group project going. I can remember there\nwas one group where",
    "start": "593910",
    "end": "599040"
  },
  {
    "text": "two guys had a disagreement\non how IR should be decided. And they started submitting\ndifferent IRs and CVs",
    "start": "599040",
    "end": "606990"
  },
  {
    "text": "in competition. And at some point, they\nstarted creating a script that automatically kept submitting. So they spent two days just\nbasically submitting two IRs",
    "start": "606990",
    "end": "614940"
  },
  {
    "text": "and creating a very\nlarge, serious log, but never making any progress.",
    "start": "614940",
    "end": "620360"
  },
  {
    "text": "That entire group\nbasically failed the course because they never\nmanaged to get anything working because they\nwere all arguing",
    "start": "620360",
    "end": "626100"
  },
  {
    "text": "and then never getting there. The key thing is if you have\na good group going together,",
    "start": "626100",
    "end": "631590"
  },
  {
    "text": "divide the task. You won't have\nthat much problem. But I think the key thing is\nthat nobody failed this course",
    "start": "631590",
    "end": "637410"
  },
  {
    "text": "because it was too hard or they\ncouldn't get everything done. The two or three groups\nthat didn't pass,",
    "start": "637410",
    "end": "643920"
  },
  {
    "text": "that happened because they\ndidn't have group dynamics. So one thing you will probably\nlearn out of this group this class is, OK, how,\nin a group, work together?",
    "start": "643920",
    "end": "651170"
  },
  {
    "text": "I mean, this is what you\nguys are going to do. If you leave, I mean,\nyou're not going to be sitting somewhere and\njust doing things by yourself. You'll be working in groups.",
    "start": "651170",
    "end": "656538"
  },
  {
    "text": "How do you get a\ngroup project going? How do you get tasks\ndivided and get something",
    "start": "656538",
    "end": "662940"
  },
  {
    "text": "done in a very tight schedule? That's a very\ninteresting learning that you'll get\nout of this course. And the people who manage\nthat will do really",
    "start": "662940",
    "end": "670590"
  },
  {
    "text": "well in this class. Don't get stressed out because\nthe class can get things done.",
    "start": "670590",
    "end": "676930"
  },
  {
    "text": "So to help the\nproject, you're going to-- each group is going to have\na weekly meeting with the TA.",
    "start": "676930",
    "end": "683129"
  },
  {
    "text": "Punia will arrange when the\nweekly meeting is going to be. It's a time to\nbasically ask questions because one thing\nwe do in this class",
    "start": "683130",
    "end": "690330"
  },
  {
    "text": "is we give you a huge amount of\nfreedom to design the compiler. This is actually, in some\nsense, a great thing,",
    "start": "690330",
    "end": "697020"
  },
  {
    "text": "in some sense, a scary thing. It's scary because a lot of\ntimes, early decisions you",
    "start": "697020",
    "end": "702690"
  },
  {
    "text": "do in the compiler can\nhave drastic consequences later because you\ndon't know what's coming out in optimizations.",
    "start": "702690",
    "end": "708327"
  },
  {
    "text": "You think this is the\nright thing to do now. But when you go to optimize,\nyou realize, wait a minute. That decision was\nreally bad because it",
    "start": "708327",
    "end": "715470"
  },
  {
    "text": "means that the optimization\ndoesn't work that way. You rewrite large chunks. And stuff like that happens. So that's why having\nsomeone like Punia",
    "start": "715470",
    "end": "723020"
  },
  {
    "text": "to talk and say what your design\ndecisions are is very important. He can point out and say,\nlook, if you do this, if you",
    "start": "723020",
    "end": "730020"
  },
  {
    "text": "don't create basic blocks now. What's going to\nhappen is if you start doing data file\noptimizations, in a month,",
    "start": "730020",
    "end": "736080"
  },
  {
    "text": "you will run into problems. So things like that\nis very important. So even though you think\nyou have a good design, just go talk to him because for\nthe current project, it'll work.",
    "start": "736080",
    "end": "743340"
  },
  {
    "text": "But there might be\nconsequences happening later. And there's no room to\nsay, OK, I'm going to redo. Because everything just\nbuilds on your previous part.",
    "start": "743340",
    "end": "751360"
  },
  {
    "text": "So if things doesn't work now or\nthings doesn't work that well, it's very hard to keep\nbuilding on top of that.",
    "start": "751360",
    "end": "757410"
  },
  {
    "text": "So make sure that you really\nuse him as a resource, really brainstorm what you're doing. And the other thing that's going\nto happen in those meetings he",
    "start": "757410",
    "end": "764753"
  },
  {
    "text": "gets a chance to\nfigure out who's contributing to the project. So when you have a\nthree-person project, sometimes if one person\nis taking 80% of the load,",
    "start": "764753",
    "end": "772050"
  },
  {
    "text": "that's not fair. And he can get a really good\nview of what everybody is doing. And that will reflect\non your grade.",
    "start": "772050",
    "end": "778200"
  },
  {
    "text": "So if you just don't\nshow up to his meeting, he's going to assume\nthat you're not actually participating in the project.",
    "start": "778200",
    "end": "783899"
  },
  {
    "text": "So show up in his meetings. Have these discussions. So before you\nimplement, at least",
    "start": "783900",
    "end": "788940"
  },
  {
    "text": "talk to him about\nwhat you're doing. And get some feedback. And that's very important\nbecause a lot of times, what",
    "start": "788940",
    "end": "793990"
  },
  {
    "text": "happens for people, especially\nwhen they went to optimizations, they find some early decisions\nare really hurting them",
    "start": "793990",
    "end": "800448"
  },
  {
    "text": "because they figured out,\nthis is an easy way to do it. It did something. It worked then. But then when you go\nto do the next thing,",
    "start": "800448",
    "end": "807210"
  },
  {
    "text": "they realize, wait a minute. Now I have created this\nentire huge structure around this one concept\nthat doesn't really match.",
    "start": "807210",
    "end": "813269"
  },
  {
    "text": " So as you expect, it's a\nclass that's a huge project.",
    "start": "813270",
    "end": "820630"
  },
  {
    "text": "So most of the grade is\nbased on the project. We are doing this interesting\nthing called paper discussion",
    "start": "820630",
    "end": "827060"
  },
  {
    "text": "that I will get to\nin a few seconds. And then we are going\nto have three quizzes. And that constitutes your grade.",
    "start": "827060",
    "end": "834820"
  },
  {
    "text": "And the project is also-- the biggest part is the\ncode generation part. And then you have two\noptimization parts coming on.",
    "start": "834820",
    "end": "842900"
  },
  {
    "text": "So this is how we are going\nto divide the grade, so. And then we are going to\nhave three in-class quizzes.",
    "start": "842900",
    "end": "849580"
  },
  {
    "text": "So 50-minutes long,\nopen book, open notes. Only thing I would say\nis come on time, so.",
    "start": "849580",
    "end": "857560"
  },
  {
    "text": "The paper discussions--\nso what's this all about? So you guys come to this class,\nsit there, sit in the back",
    "start": "857560",
    "end": "863800"
  },
  {
    "text": "and listen to me,\nand go, I never get a chance to talk to people. This is a chance for me\nto interact with everybody",
    "start": "863800",
    "end": "870339"
  },
  {
    "text": "individually. So what we decided was\nthree times in the semester,",
    "start": "870340",
    "end": "876170"
  },
  {
    "text": "we will give a paper\nout, a research paper. And you guys read\nthe paper and try",
    "start": "876170",
    "end": "881740"
  },
  {
    "text": "to understand what\nthe paper is doing. And start thinking\nlike a researcher. So if I am reading a\npaper, what would I do?",
    "start": "881740",
    "end": "888160"
  },
  {
    "text": "I mean, I'm not just\nreading most of the time to gain information. I am thinking about a\npaper as a researcher.",
    "start": "888160",
    "end": "893440"
  },
  {
    "text": "Is this paper-- what did we do\nfor research, how important it is, how does it fit in in there?",
    "start": "893440",
    "end": "899500"
  },
  {
    "text": "Do you really believe\nwhat they are saying, that you find problems with it. And there are a lot of\ninteresting research-type issues",
    "start": "899500",
    "end": "905640"
  },
  {
    "text": "in this. So you guys think about that. Write a very small summary. And come and spend\n15 to 20 minutes.",
    "start": "905640",
    "end": "913380"
  },
  {
    "text": "We haven't figured out\nhow much, depending on the size of the class\nand stuff like that-- one-on-one with either\nme, Martin, or Punia--",
    "start": "913380",
    "end": "919930"
  },
  {
    "text": "three times basically. So you'll get one with each. And then we'll have a\nsmall discussion, OK?",
    "start": "919930",
    "end": "925900"
  },
  {
    "text": "And what I'm looking is if\nyou find something really cool about it, an\ninteresting angle,",
    "start": "925900",
    "end": "932695"
  },
  {
    "text": "that it's not just to\ncomment in the summary. OK, here's what\nhappened in the paper. I don't want a summary. I can do that. But I want to figure out, can\nyou guys go beyond the summary",
    "start": "932695",
    "end": "940750"
  },
  {
    "text": "and then come up with\nsomething interesting? So I think this is\nan interesting time. I don't want to make it--",
    "start": "940750",
    "end": "947450"
  },
  {
    "text": "so the reason we actually\nassign a grade is, I want people to take it seriously. But I don't want people to\nstress out because of that.",
    "start": "947450",
    "end": "954370"
  },
  {
    "text": "So these are kind\nof experimentally-- I want to do it and\nsee what happens. So I want it to be a fun,\ninteresting, creative thing",
    "start": "954370",
    "end": "963790"
  },
  {
    "text": "to do, than high-stress\nthing, or something you don't care because I\nwant everyone to participate.",
    "start": "963790",
    "end": "969818"
  },
  {
    "text": "So let's see. So what we'll do is we'll give\nyou three interesting papers. You will see. You can read. And get a feel for going\nfrom a very structured",
    "start": "969818",
    "end": "977530"
  },
  {
    "text": "class-type thing-- if you start\ndoing research, what do you do? How do you understand what\nother people are doing?",
    "start": "977530",
    "end": "984839"
  },
  {
    "text": "OK, good. So that basically describes\nthe course administration.",
    "start": "984840",
    "end": "993720"
  },
  {
    "text": "Any questions? ",
    "start": "993720",
    "end": "1000335"
  },
  {
    "text": "Quiet.  OK, so the other thing\nis since the class is not",
    "start": "1000335",
    "end": "1008590"
  },
  {
    "text": "that big, if people\nhave questions, just don't hesitate to ask. Hey, you can be on TV\nif you ask questions.",
    "start": "1008590",
    "end": "1016580"
  },
  {
    "text": "But if you don't want it to\nbe on TV, that's OK, too. Still keep asking\nquestions because it's fun. Otherwise, it's\nreally boring for me",
    "start": "1016580",
    "end": "1023020"
  },
  {
    "text": "to come and just say what I say\nand have a bunch of blank faces on the other end.",
    "start": "1023020",
    "end": "1028089"
  },
  {
    "text": "It doesn't help. So OK, let's go a little bit\ninto the course material.",
    "start": "1028089",
    "end": "1037240"
  },
  {
    "text": "What are compilers? Why should any of\nyou learn about it? And then we'll go a\nlittle bit deep into how",
    "start": "1037240",
    "end": "1044020"
  },
  {
    "text": "do you build a compiler\nand what's in a compiler. So what do you have to do?",
    "start": "1044020",
    "end": "1051540"
  },
  {
    "text": "Basically, the main\nthing about that is I have to instruct\ncomputers to do things.",
    "start": "1051540",
    "end": "1056700"
  },
  {
    "text": "Computers are\nbasically everywhere. But someone will tell them\nto carry out its instruction. So the last 20 minutes\nI spent telling you",
    "start": "1056700",
    "end": "1064140"
  },
  {
    "text": "guys to carry out the\ninstructions for the course. So I knew how to instruct you. I just come here and speak\nand say, you do this.",
    "start": "1064140",
    "end": "1069720"
  },
  {
    "text": "You do the project. This is what you had to do. But how do I do it\nto the computer? And also, it's not just--",
    "start": "1069720",
    "end": "1076530"
  },
  {
    "text": "telling that is not enough. How do I get the computer\nto do it efficiently? I know when I ask you\nguys to go do a project,",
    "start": "1076530",
    "end": "1082659"
  },
  {
    "text": "you know how to exactly\nget it efficiently done, do it very fast, whatever. And I think MIT students\nhave that down really nicely.",
    "start": "1082660",
    "end": "1090420"
  },
  {
    "text": "But computers don't come\nwith that intelligence then. And it's part of-- what I have to do\nis actually get",
    "start": "1090420",
    "end": "1095910"
  },
  {
    "text": "the computer to do what I want\nit to do in an efficient manner. So the way to do that, if you\nwant the most powerful way to do",
    "start": "1095910",
    "end": "1106170"
  },
  {
    "text": "that, is using a language. Use a language to\ndescribe what to do.",
    "start": "1106170",
    "end": "1111179"
  },
  {
    "text": "It's very powerful because\nthen, using a language, you can describe many things. It's not tied to a context.",
    "start": "1111180",
    "end": "1117135"
  },
  {
    "text": "It's not some kind of a\nset of pull down menus that you can select a few things\nand press a button and go do.",
    "start": "1117135",
    "end": "1123519"
  },
  {
    "text": "It's not tied to one thing. You can actually express\na lot of general things using a language.",
    "start": "1123520",
    "end": "1129179"
  },
  {
    "text": "And you can describe the\nsame thing in many ways. It doesn't have a very\ntight structure that really",
    "start": "1129180",
    "end": "1136800"
  },
  {
    "text": "gets you a very specific path. Most of the languages\nout there, when",
    "start": "1136800",
    "end": "1142020"
  },
  {
    "text": "I talk about programming\nlanguages or even natural languages, it's\nvery, very flexible. It gives you a lot of\nopportunity, creativity,",
    "start": "1142020",
    "end": "1148020"
  },
  {
    "text": "and expressiveness,\nif you're doing that. Oops, what happened?",
    "start": "1148020",
    "end": "1154500"
  },
  {
    "text": "Just a second. So how about using\na natural language?",
    "start": "1154500",
    "end": "1160430"
  },
  {
    "text": "So I am spending-- and\nI spend the first part of the time telling\nyou guys what to do",
    "start": "1160430",
    "end": "1166460"
  },
  {
    "text": "in this class using English. So why can't we use English\nto describe what to do?",
    "start": "1166460",
    "end": "1171840"
  },
  {
    "text": "Well, at least in\nscience fiction, people had tried to\nuse natural language",
    "start": "1171840",
    "end": "1177560"
  },
  {
    "text": "to tell computers what to do. And I guess you know what\nhappened at that point. It really didn't work out,\nat least in that part.",
    "start": "1177560",
    "end": "1186290"
  },
  {
    "text": "So I think the key thing is\nwe're not really there yet. We cannot actually talk to a\ncomputer and say what to do,",
    "start": "1186290",
    "end": "1193700"
  },
  {
    "text": "beyond science\nfiction these days. And there are some\nreasons for that. I think one of the main\nreasons is natural languages",
    "start": "1193700",
    "end": "1202279"
  },
  {
    "text": "are very ambiguous. I spent the first 20\nminutes telling you what this course is about.",
    "start": "1202280",
    "end": "1208500"
  },
  {
    "text": "And I have very\nlittle description. But since I used\nEnglish, I think there would be few people who\nfind a literal interpretation",
    "start": "1208500",
    "end": "1216488"
  },
  {
    "text": "that's completely\ndifferent from what I thought I told you guys do. And you always\nsay, wait a minute.",
    "start": "1216488",
    "end": "1222170"
  },
  {
    "text": "Did you say the exam\nhappens this day? I thought it was happening\nthe day after, whatever. And people get confused.",
    "start": "1222170",
    "end": "1228620"
  },
  {
    "text": "And we as humans are\nvery adept to dealing with those kind of\nconfusions and then trying to extract\nmeaning out of things.",
    "start": "1228620",
    "end": "1235280"
  },
  {
    "text": "But computers are not good. We are not there like computers. They had to be [INAUDIBLE]. So that's what programming\nlanguages come from.",
    "start": "1235280",
    "end": "1242035"
  },
  {
    "text": "In a way, what we\nare doing is we are trying to do a very\nexplicit and precise way of describing what we\nwant out of the computers.",
    "start": "1242035",
    "end": "1249740"
  },
  {
    "text": "So programming language\nis basically high level-- have to have a bunch of\ninteresting properties.",
    "start": "1249740",
    "end": "1256770"
  },
  {
    "text": "First of all, it\nhas to be precise. So when you describe\nsomething, there shouldn't be any ambiguity how\nto base what you're describing.",
    "start": "1256770",
    "end": "1263960"
  },
  {
    "text": "So that's a very\nimportant thing. It's also nice to be concise. So you don't want to write pages\nand pages to get something.",
    "start": "1263960",
    "end": "1271263"
  },
  {
    "text": "You need a concise\nway to describe that. It needs to be very\nexpressive because if you only can do a few things and\neverything you want to do,",
    "start": "1271263",
    "end": "1278210"
  },
  {
    "text": "if you can describe, it's\nnot a great language. So the language\nshould be expressive. You should be able to build\non and do a lot of cool things",
    "start": "1278210",
    "end": "1284539"
  },
  {
    "text": "in there. And also, the other\nthing that I think is really important, is you\nneed to have a lot of high level abstractions because what\nwe are doing in compilers",
    "start": "1284540",
    "end": "1292280"
  },
  {
    "text": "is basically\nbuilding abstractions starting from transistors\nsitting on a processor.",
    "start": "1292280",
    "end": "1298430"
  },
  {
    "text": "And the processor provides you\nwith very simple instruction set, to basically-- you don't\nwant to go and muck with that,",
    "start": "1298430",
    "end": "1304700"
  },
  {
    "text": "try to write you a large\ndatabase or web server. At that level, we are trying\nto build enough abstraction",
    "start": "1304700",
    "end": "1311120"
  },
  {
    "text": "that you can start thinking\nat a very high level and get this whole\nthing done at the level that you want to solve, not the\nlevel that machines can handle.",
    "start": "1311120",
    "end": "1318500"
  },
  {
    "text": "So to give an\ninteresting example, so if you have a bunch of foot\nsoldiers sitting out there,",
    "start": "1318500",
    "end": "1325070"
  },
  {
    "text": "and assume those are the\ntransistors in the inside there. So there'll be somebody\ninstructing these people",
    "start": "1325070",
    "end": "1330410"
  },
  {
    "text": "to exactly do what things,\nlike a sergeant just giving instructions. But if you think\nabout that, that's",
    "start": "1330410",
    "end": "1336020"
  },
  {
    "text": "almost like a simple language. It's telling exactly some very,\nvery low-level thing to do.",
    "start": "1336020",
    "end": "1341300"
  },
  {
    "text": "But if you want to run\nsomething large, like a war, by doing everything from\ntop, it doesn't work.",
    "start": "1341300",
    "end": "1348112"
  },
  {
    "text": "So you need to have\nan abstraction layer. So there'll be someone like\na general who will basically come up with the--",
    "start": "1348112",
    "end": "1353540"
  },
  {
    "text": "probably the compiler, will take\nsome very high-level information and basically try to map it\nto the next level, trying",
    "start": "1353540",
    "end": "1359900"
  },
  {
    "text": "to figure out, OK, now how\ndo I move the next level, and abstraction in there?",
    "start": "1359900",
    "end": "1365360"
  },
  {
    "text": "Then on top of that,\nthere's someone like you sitting\nin there, basically trying to figure out\nwhat's the big picture and what do you\nwant to get solved.",
    "start": "1365360",
    "end": "1371408"
  },
  {
    "text": "And then you instruct the\nnext group to go and do that. So that's basically\nthe abstraction layer.",
    "start": "1371408",
    "end": "1376560"
  },
  {
    "text": "And what we are trying to\ndo is basically build things so that each layer can\nhandle and move it down.",
    "start": "1376560",
    "end": "1383030"
  },
  {
    "text": "So how do I instruct a computer? So the thing is, in\none end, you have",
    "start": "1383030",
    "end": "1389419"
  },
  {
    "text": "this very high-level\ndescription you are doing-- high-level\nlanguages that describes",
    "start": "1389420",
    "end": "1394520"
  },
  {
    "text": "your problem in a very\nalgorithmic way, something like algorithms class use.",
    "start": "1394520",
    "end": "1402110"
  },
  {
    "text": "It's not that different\nfrom the avenue described in high-level language. But on the other hand,\nyou have a machine.",
    "start": "1402110",
    "end": "1409100"
  },
  {
    "text": "You're just used to dealing\nwith very simple instructions. Add something, more value\nfrom one register to another,",
    "start": "1409100",
    "end": "1414760"
  },
  {
    "text": "move something to memory-- very low-level, very specific,\nvery simple primitives. So the key thing is we\nneed to bridge this gap.",
    "start": "1414760",
    "end": "1421909"
  },
  {
    "text": "We need the compiler\nbasically to take this very high-level\ndescription-- and trying to figure out how to get the\nbasic resources to carry out",
    "start": "1421910",
    "end": "1428840"
  },
  {
    "text": "what you want to do. And do it right. ",
    "start": "1428840",
    "end": "1436197"
  },
  {
    "text": "So this is basically what\nwe are doing to do that. So we have a high-level program\nwritten in the programming",
    "start": "1436197",
    "end": "1441630"
  },
  {
    "text": "language. And then at the end of the\nday, when you are done, we are outputting some\nlow-level assembly instructions.",
    "start": "1441630",
    "end": "1447900"
  },
  {
    "text": "OK, that's what you had to do. You had to do that. So how do you do that? So first of all, this\nprogramming language",
    "start": "1447900",
    "end": "1453030"
  },
  {
    "text": "is written in the text\nsomewhere in the language. You have to read and\nunderstand the program.",
    "start": "1453030",
    "end": "1459530"
  },
  {
    "text": "So OK, what's that say? I mean, you need to get\nthat information in there, figure out what that\ninformation means.",
    "start": "1459530",
    "end": "1465600"
  },
  {
    "text": "And then precisely\ndetermine what actions that need to carry\nout to execute that program.",
    "start": "1465600",
    "end": "1475230"
  },
  {
    "text": "And there are a lot of choices. I mean, the thing about that\nis when you look at a program,",
    "start": "1475230",
    "end": "1480600"
  },
  {
    "text": "it doesn't tell you where to put\nvalues, what registers to use, what memory to use, what\ninstrument, nothing.",
    "start": "1480600",
    "end": "1486690"
  },
  {
    "text": "It just gives a very high-level\ndescription in there. And then there are a\nlot of these choices-- and figure out what's the best\nchoice to do these things.",
    "start": "1486690",
    "end": "1493320"
  },
  {
    "text": "And then basically generate\ncorrect, precise code to basically carry\nout it in your CPU.",
    "start": "1493320",
    "end": "1503520"
  },
  {
    "text": "So here's the first thing. So you have-- we write a program\nlike that, a few lines of code.",
    "start": "1503520",
    "end": "1509290"
  },
  {
    "text": "And what comes out\nat the end of the day is a piece of assembly code. That's a lot more\nlow-level, divided",
    "start": "1509290",
    "end": "1516323"
  },
  {
    "text": "into much more small pieces. So this is basically,\nwe start high-level. And you end up here at\nthe end of the course--",
    "start": "1516323",
    "end": "1522770"
  },
  {
    "text": "so a kilometer off the\nmiddle level of the code. So the other thing\nis, when you do that, you have many different\nways of doing things.",
    "start": "1522770",
    "end": "1530290"
  },
  {
    "text": "So for example, you can\nhave high-level thing if you are variable.",
    "start": "1530290",
    "end": "1535825"
  },
  {
    "text": "You can put the\nvariable in a register. You can put it in memory. You might be able to\nnot put it in anything",
    "start": "1535825",
    "end": "1543150"
  },
  {
    "text": "and carry out directly-- eliminate that use\nof the variable. There are a lot of\nways of doing things.",
    "start": "1543150",
    "end": "1549750"
  },
  {
    "text": "And it's just up to us to\nfigure out what way to do that. And there are consequences. And depending on what\nwe are optimizing",
    "start": "1549750",
    "end": "1557850"
  },
  {
    "text": "or what we are\ntrying to maximize, we make different decisions.",
    "start": "1557850",
    "end": "1563020"
  },
  {
    "text": "So this is basically the\nsecond part of the code. So after we generate this, we\nfigure out, OK, our main focus",
    "start": "1563020",
    "end": "1568380"
  },
  {
    "text": "is going to be to\nrun things faster. But how do you\nactually-- what choices do you need to make\nto run things faster?",
    "start": "1568380",
    "end": "1573900"
  },
  {
    "text": "And you can do even more things. So we make a lot of\nthese kind of decisions",
    "start": "1573900",
    "end": "1580350"
  },
  {
    "text": "and compile\nhigh-level decisions, trying to kind of do what\nyou want to do in principle. But I have a lot of\nfreedom to do that.",
    "start": "1580350",
    "end": "1587529"
  },
  {
    "text": "So I think what you find is, if\nyou just do the simplest thing,",
    "start": "1587530",
    "end": "1597100"
  },
  {
    "text": "the programs will\nrun pretty slowly. And so what that's\ngoing to do is,",
    "start": "1597100",
    "end": "1602665"
  },
  {
    "text": "you can build a compiler that\ncarries out the instructions. But if it becomes\ntoo inefficient,",
    "start": "1602665",
    "end": "1609550"
  },
  {
    "text": "nobody's going to\nuse those languages. So what happens was-- I mean, things like\nhigh-level languages took time to mature and people\nto use because at the beginning,",
    "start": "1609550",
    "end": "1618097"
  },
  {
    "text": "they have interesting problems. You have very\ninteresting problem, you want to get\nthose things done. And if you express in\nhigh-level language,",
    "start": "1618098",
    "end": "1625510"
  },
  {
    "text": "and then you can't\nget it done on time if it doesn't feature on\nthe memory of the machine, you have a lot of problems.",
    "start": "1625510",
    "end": "1631150"
  },
  {
    "text": "I mean, it's useless that\nhaving a high-level language, even though you can\nnicely write it in that. So you are going to go try\nto do this in a lower level.",
    "start": "1631150",
    "end": "1637522"
  },
  {
    "text": "So the thing about compiler\nis what it has to do is, it has to basically--",
    "start": "1637522",
    "end": "1643782"
  },
  {
    "text": "having this inefficient\nabstraction is useless. So what it has to do is\nprovide this abstraction, but get it working,\nlike you actually",
    "start": "1643782",
    "end": "1651070"
  },
  {
    "text": "did it in assembly level. So the nice thing is write\nit in high-level abstraction. And all the results you\nget because of the compiler",
    "start": "1651070",
    "end": "1657942"
  },
  {
    "text": "looks like you actually managed\nto do it in assembly level. And it gives you that freedom. So that gives you nice freedom.",
    "start": "1657942",
    "end": "1663278"
  },
  {
    "text": "I mean, this is very important. For example, when\nJava started coming, there were a lot of people who\nstarted doing real-time type",
    "start": "1663278",
    "end": "1670059"
  },
  {
    "text": "applications. There are companies who tried\nto do graphics editors in Java and gave up because\nthings were too slow.",
    "start": "1670060",
    "end": "1676780"
  },
  {
    "text": "And it took some time for the\nlanguage to get to a point that you can actually go\ndo a more real-time thing.",
    "start": "1676780",
    "end": "1683350"
  },
  {
    "text": "The compiler [INAUDIBLE]. And still, there are\nsome stuff that people-- very low-level code that\npeople will not write in Java.",
    "start": "1683350",
    "end": "1690622"
  },
  {
    "text": "There's some code\npeople don't even write in C because they can't\nget the efficiency in there. Well, hopefully the\nthing is the compilers",
    "start": "1690622",
    "end": "1696850"
  },
  {
    "text": "can be better and better. So this mapping that\nyou can actually see-- see, I can do this\nkind of language.",
    "start": "1696850",
    "end": "1701952"
  },
  {
    "text": "And I don't have I don't have\nto care about the inefficiency because there won't be\nthat much inefficiency.",
    "start": "1701952",
    "end": "1708520"
  },
  {
    "text": "So how am I doing in time? OK, I think I'm\ndoing good in time. So what I'm going to\ndo is start all of us",
    "start": "1708520",
    "end": "1715720"
  },
  {
    "text": "into part to think\nlike a compiler. So here's an example program.",
    "start": "1715720",
    "end": "1721420"
  },
  {
    "text": "I wrote it some night. It doesn't mean anything. But it has a lot\nof inefficiencies.",
    "start": "1721420",
    "end": "1728560"
  },
  {
    "text": "A lot of code we write has\nthese kind of inefficiencies. Now I want to go and figure\nout how well I can actually",
    "start": "1728560",
    "end": "1734950"
  },
  {
    "text": "map that. So I actually gave you a\npiece of paper in there. I'm not going to collect that. Why don't I give you about,\nwe'll say, about four minutes,",
    "start": "1734950",
    "end": "1744190"
  },
  {
    "text": "to see whether you\ncan look at that and see how you can eliminate\nand do it very efficiently.",
    "start": "1744190",
    "end": "1749775"
  },
  {
    "text": "You can talk to your\nneighbors and stuff like that. This is not a test. But at the end of the\nday, I will basically",
    "start": "1749775",
    "end": "1756039"
  },
  {
    "text": "walk you through\na bunch of steps that normally, the\ncompiler carries. And then we can see how\nwell you can make that.",
    "start": "1756040",
    "end": "1763179"
  },
  {
    "start": "1763180",
    "end": "1781940"
  },
  {
    "text": "Is it wireless? AUDIENCE: Oh yeah, I'm\njust working on some kind of [INAUDIBLE].",
    "start": "1781940",
    "end": "1787870"
  },
  {
    "text": "SAMAN AMARASINGHE: Is\nthe normal size of-- ",
    "start": "1787870",
    "end": "1946400"
  },
  {
    "text": "SAMAN AMARASINGHE: OK,\nso just [INAUDIBLE] test.",
    "start": "1946400",
    "end": "1951500"
  },
  {
    "text": "So let's see, can\nwe go try to see what the compiler will do here. So here is if you do just an\noptimized code generation.",
    "start": "1951500",
    "end": "1960478"
  },
  {
    "text": "So you don't do anything. We just go and say, I\njust want to run this without changing anything. And here's what will happen.",
    "start": "1960478",
    "end": "1966090"
  },
  {
    "text": "So just try to understand this. But it's just out there.",
    "start": "1966090",
    "end": "1971580"
  },
  {
    "text": "I'm going to put these\nslides on the network so you'll know what's going on. So let's go and optimize.",
    "start": "1971580",
    "end": "1977720"
  },
  {
    "text": "So what's the first thing? First thing is what we\ncall constant propagation.",
    "start": "1977720",
    "end": "1982800"
  },
  {
    "text": "So the constant\npropagation says there are a lot of times\nthings are constant. If you know a variable is a\nconstant within a range, that",
    "start": "1982800",
    "end": "1991700"
  },
  {
    "text": "means every time I go\nand execute that range, it has the same value. I don't have to\nactually calculate.",
    "start": "1991700",
    "end": "1997130"
  },
  {
    "text": "I can basically propagate\nthat value down directly. So what are the constants here?",
    "start": "1997130",
    "end": "2002690"
  },
  {
    "text": "So the first thing is, is\nthis a constant, x equals 0? Can I propagate that?",
    "start": "2002690",
    "end": "2009510"
  },
  {
    "text": "Not really, because\nwhat happens is-- whoops. ",
    "start": "2009510",
    "end": "2015667"
  },
  {
    "text": "What happened? Did I go down? ",
    "start": "2015667",
    "end": "2028120"
  },
  {
    "text": "Sorry, looking good. ",
    "start": "2028120",
    "end": "2036950"
  },
  {
    "text": "OK, so here we go. So because of the x is\ngetting modified in here, so x is not a constant.",
    "start": "2036950",
    "end": "2042400"
  },
  {
    "text": "Every iteration, you get\na different one for x. So I can't propagate x in here. But on the other hand,\nif I go look at y,",
    "start": "2042400",
    "end": "2049840"
  },
  {
    "text": "y is basically assigned to 0. And it never changes\nwithin this loop. So I can easily go\nand say, OK, I'm",
    "start": "2049840",
    "end": "2056290"
  },
  {
    "text": "going to replace that y by 0. I actually don't have\nto do that calculation.",
    "start": "2056290",
    "end": "2061760"
  },
  {
    "text": "I can get a lot of\ninteresting savings in there. Next thing I can do is\nalgebraic simplification.",
    "start": "2061760",
    "end": "2068230"
  },
  {
    "text": "A lot of times, humans--\nit's nice to write these nice, descriptive\nexpressions. But there are lot of\nsimplifications you can do that.",
    "start": "2068230",
    "end": "2075638"
  },
  {
    "text": "What can we do here? So for example, now after\nconstant propagation, we actually multiply b by 0.",
    "start": "2075639",
    "end": "2081070"
  },
  {
    "text": "Why waste time? You know it's 0. And you can just do 0. And the next thing\nwe can do is--",
    "start": "2081070",
    "end": "2086590"
  },
  {
    "text": "now we are adding 0 to x. Why just do that? We can just go and eliminate\nthat and just make it x.",
    "start": "2086590",
    "end": "2094690"
  },
  {
    "text": "So another interesting\nprinciple in compilers is we do things in very\nsmall granularities.",
    "start": "2094690",
    "end": "2100710"
  },
  {
    "text": "We are not trying to do this-- I as humans, we look at many\nthings and just in one go,",
    "start": "2100710",
    "end": "2105820"
  },
  {
    "text": "do a very large\nchange to things. In a compiler, it's\nvery hard to do that. What we do is we do\njust micro-changes.",
    "start": "2105820",
    "end": "2112480"
  },
  {
    "text": "In here, also what you see is,\nI didn't try to do, saying, OK, I am multiplying\nby 0 and then adding.",
    "start": "2112480",
    "end": "2119950"
  },
  {
    "text": "And therefore, I can\neliminate everything. I just go with these baby step. I said, wait, wait. I'll do a very simple\nstep, which is first,",
    "start": "2119950",
    "end": "2126910"
  },
  {
    "text": "multiplication by 0. I eliminate that. And I'll put 0 in there. It might not be used.",
    "start": "2126910",
    "end": "2132047"
  },
  {
    "text": "But the next time around,\nI'll get those in. So I'd rather do things,\nvery simple things,",
    "start": "2132047",
    "end": "2137319"
  },
  {
    "text": "many times because compilers\nare run by a computer. The nice thing about computers\nis they can do many things.",
    "start": "2137320",
    "end": "2144460"
  },
  {
    "text": "So you want to do simple\nthings many, many times, then complex things few times. So a lot of times when you're\ndeveloping compiler algorithms,",
    "start": "2144460",
    "end": "2151750"
  },
  {
    "text": "we try to figure out some\nvery simple things you can do. That alone might not\nbe that important.",
    "start": "2151750",
    "end": "2158290"
  },
  {
    "text": "But doing that with others and\ndoing it many times actually can make the\nprogram much better. So OK, now we're in here.",
    "start": "2158290",
    "end": "2164950"
  },
  {
    "text": "You are assigning x to x. That sounds like a boring,\nstupid thing to do. If you are human, you\nwill never get there.",
    "start": "2164950",
    "end": "2171122"
  },
  {
    "text": "But as a compiler, this\nis an intermediate step. And then we do copy propagation,\nwhich basically says,",
    "start": "2171122",
    "end": "2176710"
  },
  {
    "text": "if you are assigning the same\nthing, why do you do that? I mean, you can use that\nthe variable in there. And so I can just basically\neliminate that in there.",
    "start": "2176710",
    "end": "2183700"
  },
  {
    "text": "And what else can we do? Another interesting thing\nwe will do in compilers is common type\nexpression elimination.",
    "start": "2183700",
    "end": "2189820"
  },
  {
    "text": "That means I am calculating\nthe same thing twice. If I'm counting the same\nthing twice, why do that?",
    "start": "2189820",
    "end": "2195700"
  },
  {
    "text": "I'll calculate it\nonce and use it twice. So here, I realize that I'm\ndoing i plus 1, i plus 1 twice.",
    "start": "2195700",
    "end": "2201340"
  },
  {
    "text": "So instead of doing that,\nI can just basically create a temporary variable.",
    "start": "2201340",
    "end": "2206410"
  },
  {
    "text": "And calculate that\nand replace that. So note that, even though I'm\nsaying that this is always",
    "start": "2206410",
    "end": "2213500"
  },
  {
    "text": "obvious win-win situations,\nsomething happened here. I actually had extra storage.",
    "start": "2213500",
    "end": "2219090"
  },
  {
    "text": "So now instead of doing\njust i plus 1, i plus 1, I actually had this intermediate\nt-value that I'm calculating.",
    "start": "2219090",
    "end": "2224150"
  },
  {
    "text": "I'm putting in there. And I'm storing it. So compilers get very complex\nbecause at some point,",
    "start": "2224150",
    "end": "2230490"
  },
  {
    "text": "you might want to get speed. But you're running out of space. You don't have enough registers. And then things like that--",
    "start": "2230490",
    "end": "2236450"
  },
  {
    "text": "the complexity comes about by\ndoing things that are not always",
    "start": "2236450",
    "end": "2243050"
  },
  {
    "text": "the right thing to do. So this one, I'm\nassuming that, OK, I'm just making it run faster.",
    "start": "2243050",
    "end": "2251220"
  },
  {
    "text": "So I just had a variable\nand got rid of the two additions and a\nmultiply, just not",
    "start": "2251220",
    "end": "2257060"
  },
  {
    "text": "one addition and one multiply. So what else can we do? Dead code elimination.",
    "start": "2257060",
    "end": "2262070"
  },
  {
    "text": "So a lot of times,\nhumans by mistake, when you're writing the\nprogram, do some calculations",
    "start": "2262070",
    "end": "2269240"
  },
  {
    "text": "that never get used. Most probably, after some\nof these transformations, we have eliminated the use\nof various things in there.",
    "start": "2269240",
    "end": "2276840"
  },
  {
    "text": "So for example, in\nhere, this y equals 0. We are never using y. Because we eliminated,\nwe suddenly",
    "start": "2276840",
    "end": "2282890"
  },
  {
    "text": "realized constant propagation\ncan eliminate the use of y. And suddenly, we\nhave this expression sitting out there\nand calculating",
    "start": "2282890",
    "end": "2287960"
  },
  {
    "text": "a value we are never using. So why? I can just get rid of that\none and eliminate both storage",
    "start": "2287960",
    "end": "2294320"
  },
  {
    "text": "and the computation. It's getting nicer and nicer. What else can we do?",
    "start": "2294320",
    "end": "2300330"
  },
  {
    "text": "So another thing is\nloop invariant removal. So what that means\nis in a loop, you are spending-- going round and\nround many, many, many times.",
    "start": "2300330",
    "end": "2309050"
  },
  {
    "text": "And if you are doing\nsomething, same computation, again and again and\nagain and again,",
    "start": "2309050",
    "end": "2314369"
  },
  {
    "text": "you can do it once\noutside the loop. Use the value inside the loop. So here, we have expression.",
    "start": "2314370",
    "end": "2321230"
  },
  {
    "text": "In here, that never changes. It's the same value every\ntime you go through the loop. So why don't I just calculate\nit once out there and use it?",
    "start": "2321230",
    "end": "2329150"
  },
  {
    "text": "And things get simple. So inside the loop, you're doing\nmultiplication and division--",
    "start": "2329150",
    "end": "2336500"
  },
  {
    "text": "two multiplication and division. I just end up doing one\nmultiplication there for that sub-expression.",
    "start": "2336500",
    "end": "2342630"
  },
  {
    "text": "So OK, so now we are\ngetting smaller and smaller. What's next? So here is an interesting one.",
    "start": "2342630",
    "end": "2349070"
  },
  {
    "text": "For most processors, addition\nis cheaper than multiplication because a lot of processors\nhave more [INAUDIBLE]",
    "start": "2349070",
    "end": "2356120"
  },
  {
    "text": "and those are cheaper because\nyou can actually pipeline them and do it much faster.",
    "start": "2356120",
    "end": "2361220"
  },
  {
    "text": "Multiplication\ntakes a lot longer. So there are a lot\nof transformations",
    "start": "2361220",
    "end": "2366350"
  },
  {
    "text": "trying to convert one\ntype of operations to a cheaper operation. So that's called\nstrength reduction.",
    "start": "2366350",
    "end": "2372150"
  },
  {
    "text": "So the strength\nreduction transformation here is I took\nthis multiplication and realized that i\nis a loop invariant.",
    "start": "2372150",
    "end": "2377850"
  },
  {
    "text": "So every iteration, the first\niteration, i multiplied by 0 is-- u multiplied by 0.",
    "start": "2377850",
    "end": "2384140"
  },
  {
    "text": "Then u, 2u, 3u, 4u. I just keep doing that. And what that means\nis I am basically",
    "start": "2384140",
    "end": "2390500"
  },
  {
    "text": "adding u to this\ncomputation every time I go. That basically\nbecomes adding one u.",
    "start": "2390500",
    "end": "2398160"
  },
  {
    "text": "So why don't I change that\nto basically addition? This is also an interesting\none because here's what I'm doing is I can add a\nlittle bit more storage to keep",
    "start": "2398160",
    "end": "2406069"
  },
  {
    "text": "that value. And then I can just stay in\nthe multiplication tradition. So now what I do is I\nadd a variable there,",
    "start": "2406070",
    "end": "2414680"
  },
  {
    "text": "v. I basically keep\nthat value in there. And then I can\nreplace that with v.",
    "start": "2414680",
    "end": "2419900"
  },
  {
    "text": "So I got rid of multiplication,\nintroduced addition. So sometimes, it might\nnot be that important,",
    "start": "2419900",
    "end": "2428038"
  },
  {
    "text": "depending on the machine. But some machines, this is a\nvery important thing to do. So what else can we do?",
    "start": "2428038",
    "end": "2436670"
  },
  {
    "text": "So another interesting\nthing, strength reduction, is that other times,\nshift operations are a lot cheaper\nthan multiplication.",
    "start": "2436670",
    "end": "2443039"
  },
  {
    "text": "The shift is just\npushing some bits around. So if you are multiplying by a\npower of 2, you can do a shift",
    "start": "2443040",
    "end": "2450160"
  },
  {
    "text": "and get into the multiplication. That's another kind of\nstrength reduction you can do.",
    "start": "2450160",
    "end": "2455210"
  },
  {
    "text": "So other big thing in especially\nrisk-type microprocessors",
    "start": "2455210",
    "end": "2461330"
  },
  {
    "text": "is using registers is very\nefficient because most of the time, you can take\na value out of register,",
    "start": "2461330",
    "end": "2468050"
  },
  {
    "text": "do operation, and store\nit in the register. So this happens much faster. Using memory is expensive.",
    "start": "2468050",
    "end": "2474770"
  },
  {
    "text": "And a lot of times,\nat the beginning when you start a program,\nyou put everything in memory because there's no\nrestrictions in memory.",
    "start": "2474770",
    "end": "2481220"
  },
  {
    "text": "Memories are unlimited, as\nfar as you are concerned. So it's very easy\nto put everything",
    "start": "2481220",
    "end": "2486920"
  },
  {
    "text": "in memory, either\nin the stack, if you are a local variable, or heap. If it is global variable, just\nkeep everything in memory.",
    "start": "2486920",
    "end": "2493790"
  },
  {
    "text": "But the consequence is every\ntime you want to do operation, you have to get it\nout of the memory, do something, put it back.",
    "start": "2493790",
    "end": "2499680"
  },
  {
    "text": "And that's a lot more expensive. So one big thing in compilers\nis saying, wait a minute.",
    "start": "2499680",
    "end": "2505550"
  },
  {
    "text": "I have registers. I don't have to always\nwork with memory. I can keep things in registers. Instead of getting\ninto a register,",
    "start": "2505550",
    "end": "2511310"
  },
  {
    "text": "operate, and put it back, why\ncan't I keep a value in register for a long time? So in here, what\nwe can do is you",
    "start": "2511310",
    "end": "2517880"
  },
  {
    "text": "can visualize-- we have this. And the thing about that is\nthe reason we don't do it just",
    "start": "2517880",
    "end": "2523578"
  },
  {
    "text": "at the beginning is there\nare very limited number of registers. You can't just go and say, OK,\nI put every variable in register",
    "start": "2523578",
    "end": "2528785"
  },
  {
    "text": "because there are hundreds\nof variables in programs, but limited registers. And so here, what you\nrealize is, wait a minute.",
    "start": "2528785",
    "end": "2534620"
  },
  {
    "text": "I don't have that many\nvariables in this program. I can keep everything\nin a register. So by doing that, I can actually\nget rid of a lot of these memory",
    "start": "2534620",
    "end": "2541970"
  },
  {
    "text": "operations. So I can't show\nthis in C program because it doesn't\nchange anything.",
    "start": "2541970",
    "end": "2547520"
  },
  {
    "text": "So at the end of the day, if\nI do all this optimization, I end up with a\nprogram like this.",
    "start": "2547520",
    "end": "2552780"
  },
  {
    "text": "Did anyone do better than me? ",
    "start": "2552780",
    "end": "2558343"
  },
  {
    "text": "Did anyone find\nanything better than me? OK. AUDIENCE: Just out\nof curiosity, can we get rid of the t equals i\nplus 1 and set aside an extra--",
    "start": "2558343",
    "end": "2566680"
  },
  {
    "text": "SAMAN AMARASINGHE:\nYeah, exactly, exactly. So that's a very good point\nbecause I am actually doing t",
    "start": "2566680",
    "end": "2573240"
  },
  {
    "text": "equals i +1. And I just keep i. Why do I do that? I can basically just pull it\ninto this computation there.",
    "start": "2573240",
    "end": "2582700"
  },
  {
    "text": "That's good. Good point, very good point. Because how can you\nactually do this? This is interesting.",
    "start": "2582700",
    "end": "2588330"
  },
  {
    "text": "What's a good way to\neliminate both t and i? What are my choices? ",
    "start": "2588330",
    "end": "2595710"
  },
  {
    "text": "AUDIENCE: Why don't you use\nn to calculate [INAUDIBLE] you used [INAUDIBLE]?",
    "start": "2595710",
    "end": "2602818"
  },
  {
    "text": "SAMAN AMARASINGHE: OK, so\none way to do that is-- OK, one way to get rid\nof t is basically use",
    "start": "2602818",
    "end": "2609000"
  },
  {
    "text": "the loop index based on t. So instead of going i equals 0\nto n, I can go, t equals 1, 2,",
    "start": "2609000",
    "end": "2617579"
  },
  {
    "text": "n plus 1. So at that point,\nI don't know it because I'm not using i at all. So that point, I can\ncompletely get rid of i.",
    "start": "2617580",
    "end": "2625200"
  },
  {
    "text": "So that's the\noptimization i needs. AUDIENCE: [INAUDIBLE]",
    "start": "2625200",
    "end": "2630950"
  },
  {
    "text": " --changed d [INAUDIBLE] d plus\n1, and then set t equal to 0",
    "start": "2630950",
    "end": "2641390"
  },
  {
    "text": "and so on. SAMAN AMARASINGHE: Oh, OK. AUDIENCE: So it's\njust [INAUDIBLE] SAMAN AMARASINGHE:\nYeah, that's still--",
    "start": "2641390",
    "end": "2647210"
  },
  {
    "text": "[INTERPOSING VOICES] Yeah. But if you do that, still\nyou have to do the addition. I mean, either you do\nt plus i or t plus 1.",
    "start": "2647210",
    "end": "2654319"
  },
  {
    "text": "AUDIENCE: Right. SAMAN AMARASINGHE: I mean, I\ndon't think I reduced operation at that point. AUDIENCE: [INAUDIBLE]\nyou wouldn't need i--",
    "start": "2654320",
    "end": "2660810"
  },
  {
    "text": "SAMAN AMARASINGHE: Yeah. AUDIENCE: [INAUDIBLE] you just-- I'm asking you to do-- SAMAN AMARASINGHE: So\nwhat he's talking about",
    "start": "2660810",
    "end": "2666680"
  },
  {
    "text": "actually has very\ninteresting implications because a lot of times, if\nwe even go deeper into this, programs are--",
    "start": "2666680",
    "end": "2673190"
  },
  {
    "text": "so normal microprocess-- I'm\njust going a little bit deeper. The normal microprocess\ndoesn't mean",
    "start": "2673190",
    "end": "2678320"
  },
  {
    "text": "you finish executing instruction\nbefore you start the next one. Things actually\nget overlapped, OK?",
    "start": "2678320",
    "end": "2683990"
  },
  {
    "text": "And so what I'm doing here is\nI can't calculate the t until I have the next i available.",
    "start": "2683990",
    "end": "2689780"
  },
  {
    "text": "So I have [INAUDIBLE] multiple. I'll put it in, like,\nsuperscalar-type machine if I can do multiple\noperations in parallel.",
    "start": "2689780",
    "end": "2695270"
  },
  {
    "text": "I have to wait\nuntil I get i done. What you say is I\ncan do both parallel because my t doesn't depend\non i because I can't get t",
    "start": "2695270",
    "end": "2702850"
  },
  {
    "text": "independently. So I can actually get them\nin there if we do that. But I think here, you\ncan even do better. You can just completely\nget rid of i.",
    "start": "2702850",
    "end": "2708572"
  },
  {
    "text": "And then introduce that. AUDIENCE: Is any\ncompiler smart enough to recognize if it's\nsummation and just",
    "start": "2708572",
    "end": "2714650"
  },
  {
    "text": "replace it with the\nstatic form of summation? ",
    "start": "2714650",
    "end": "2721868"
  },
  {
    "text": "SAMAN AMARASINGHE:\nSome things people do, a lot of times, they\nare not robust because what",
    "start": "2721868",
    "end": "2728359"
  },
  {
    "text": "that means is-- so here's a dirty little\nsecret in compiler world. So a lot of times,\ncompilers, they",
    "start": "2728360",
    "end": "2734480"
  },
  {
    "text": "work in getting these\nbenchmarks run faster. So they said, aha, that\nbenchmark has that pattern.",
    "start": "2734480",
    "end": "2740367"
  },
  {
    "text": "And I'm going to\nlook at that pattern. In fact, there was a\ncompiler that-- there was a benchmark that was written\nby a person named Jack Dongarra.",
    "start": "2740367",
    "end": "2747320"
  },
  {
    "text": "So there's optimization\nthat normally can't be done because it's unsafe.",
    "start": "2747320",
    "end": "2752617"
  },
  {
    "text": "But that program, they could do. So what the company did\nwas check for the word Jack Dongarry-- Jack Dongarry's person,\ngo do that to that loop",
    "start": "2752617",
    "end": "2758930"
  },
  {
    "text": "because you knew that\nthat benchmark will work. So people have done\nthings like that.",
    "start": "2758930",
    "end": "2764720"
  },
  {
    "text": "And there are things that-- other common patterns,\ncommon idioms to look for. But the thing is,\nas, for example,",
    "start": "2764720",
    "end": "2771320"
  },
  {
    "text": "look at something like A50. They're a great way to run\neffectively, very fast. But the problem is if you try\nto write a fast transformation",
    "start": "2771320",
    "end": "2779390"
  },
  {
    "text": "loop in C, 10 people will\ntry to do it differently. So how do you figure\nout, how do you match--",
    "start": "2779390",
    "end": "2786140"
  },
  {
    "text": "pattern match to\nget that expression? It's harder. So it's much easier\nto do some kind",
    "start": "2786140",
    "end": "2791300"
  },
  {
    "text": "of general\nmathematical reduction or something like that. So instead of trying to say,\nlook carefully for a 50,",
    "start": "2791300",
    "end": "2797680"
  },
  {
    "text": "you actually come up with some\nkind of a mathematical framework to look at that type\nof thing that, even if you change a\nlittle bit, still",
    "start": "2797680",
    "end": "2803960"
  },
  {
    "text": "you can do some optimization. So people try that, but mostly\nfor specific getting benchmarks",
    "start": "2803960",
    "end": "2810720"
  },
  {
    "text": "faster.  So here's the optimized code.",
    "start": "2810720",
    "end": "2815942"
  },
  {
    "text": "The interesting\nthing is now-- if I compare an un-optimized\nto optimized code. So I got before this loop.",
    "start": "2815942",
    "end": "2822200"
  },
  {
    "text": "And I end up\nproducing this loop. And when I really\ncalculate the number of loop iterations,\nthis one, there",
    "start": "2822200",
    "end": "2828710"
  },
  {
    "text": "are seven instructions\nyou always have to run. And every loop iteration, you\nhave to run 21 instructions.",
    "start": "2828710",
    "end": "2834350"
  },
  {
    "text": "If we optimize, I run 99\ninstructions at the beginning because I do that. I only had to do seven\ninstructions in the loop.",
    "start": "2834350",
    "end": "2840660"
  },
  {
    "text": "And at some point of time,\nI actually wrote this code and did this and\nexecuted it on a machine. And this ran 43 seconds.",
    "start": "2840660",
    "end": "2847460"
  },
  {
    "text": "And that run 17 seconds. So this is the kind of things\nwe can do in a compiler.",
    "start": "2847460",
    "end": "2853700"
  },
  {
    "text": "So I think I have\nlittle, little time. Let me see where I am.",
    "start": "2853700",
    "end": "2858910"
  },
  {
    "text": " Because the other thing\nis a lot of times,",
    "start": "2858910",
    "end": "2864263"
  },
  {
    "text": "what we are going to\nfocus in this class is performance and speed. We are doing optimization\nto get faster-- code to run faster.",
    "start": "2864263",
    "end": "2870280"
  },
  {
    "text": "There are a lot of\nother things you can do with this information. For example, if you\nare using a cell phone,",
    "start": "2870280",
    "end": "2876513"
  },
  {
    "text": "it's not performance\nthat matters. It's basically battery life. If a cell phone-- the reason you\nbuy one cell phone versus other",
    "start": "2876513",
    "end": "2882310"
  },
  {
    "text": "was so you can have\nmore battery life. So at that point,\nthe compilation worries about\noptimizing battery life.",
    "start": "2882310",
    "end": "2888910"
  },
  {
    "text": "Things like code\nsize is important. And for example,\nthe kind of stuff Martin and I are\nlooking at these days",
    "start": "2888910",
    "end": "2894730"
  },
  {
    "text": "is using the\nanalysis information to do things like\nsecurity of a program.",
    "start": "2894730",
    "end": "2899840"
  },
  {
    "text": "So can you say something about\nthis program, if we run it, it will not leak information, or\nit cannot be broken into, or it",
    "start": "2899840",
    "end": "2908619"
  },
  {
    "text": "can be executed reliably. So there are a lot\nof other things because there's a treasure trove\nof information in that program",
    "start": "2908620",
    "end": "2915220"
  },
  {
    "text": "you write. Just executing\nthat is one thing. But can you mine that\nand then do other things? There are a lot of\ninteresting things you can do.",
    "start": "2915220",
    "end": "2923890"
  },
  {
    "text": "OK, so let me stop there. I was going to give a\nlittle bit of introduction of how each part of the\ncompiler sits there.",
    "start": "2923890",
    "end": "2930819"
  },
  {
    "text": "But next lecture,\nMartin is going to probably get started\nwith just giving you",
    "start": "2930820",
    "end": "2936010"
  },
  {
    "text": "a little bit of-- for the-- OK, good. So hopefully we are going to\nhave a fun semester building",
    "start": "2936010",
    "end": "2943835"
  },
  {
    "text": "a compiler.  MARTIN RINARD: I'd like\nto remind everyone that--",
    "start": "2943835",
    "end": "2949890"
  }
]