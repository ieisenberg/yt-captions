[
  {
    "start": "0",
    "end": "56000"
  },
  {
    "start": "0",
    "end": "60"
  },
  {
    "text": "The following content is\nprovided under a Creative",
    "start": "60",
    "end": "2500"
  },
  {
    "text": "Commons license.",
    "start": "2500",
    "end": "4010"
  },
  {
    "text": "Your support will help\nMIT OpenCourseWare",
    "start": "4010",
    "end": "6350"
  },
  {
    "text": "continue to offer high quality\neducational resources for free.",
    "start": "6350",
    "end": "10719"
  },
  {
    "text": "To make a donation or\nview additional materials",
    "start": "10720",
    "end": "13330"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare",
    "start": "13330",
    "end": "17209"
  },
  {
    "text": "at ocw.mit.edu.",
    "start": "17209",
    "end": "17834"
  },
  {
    "start": "17834",
    "end": "26550"
  },
  {
    "text": "PROFESSOR: Greg was\nnot here yesterday.",
    "start": "26550",
    "end": "28269"
  },
  {
    "text": "He was away.",
    "start": "28270",
    "end": "29220"
  },
  {
    "text": "And so this is work he's\nlargely done on his own again.",
    "start": "29220",
    "end": "32470"
  },
  {
    "text": "He's done a molecular\ndynamics simulator.",
    "start": "32470",
    "end": "34339"
  },
  {
    "text": "So he's going to tell us\na little bit about that,",
    "start": "34339",
    "end": "36380"
  },
  {
    "text": "and then after that we'll\ndo course evaluations,",
    "start": "36380",
    "end": "39770"
  },
  {
    "text": "hand out some awards, have\nsome cake, and then after that",
    "start": "39770",
    "end": "42530"
  },
  {
    "text": "some pizza, and then\nplay same PlayStation 3s.",
    "start": "42530",
    "end": "45885"
  },
  {
    "text": "All yours.",
    "start": "45885",
    "end": "48829"
  },
  {
    "text": "GREG PINTILIE: OK, so\nI'll talk about the make",
    "start": "48830",
    "end": "50790"
  },
  {
    "text": "general molecular\ndynamics algorithm",
    "start": "50790",
    "end": "53080"
  },
  {
    "text": "and then parallelization\napproaches.",
    "start": "53080",
    "end": "56930"
  },
  {
    "start": "56000",
    "end": "266000"
  },
  {
    "text": "So molecular dynamics is based\non a potential energy function,",
    "start": "56930",
    "end": "59980"
  },
  {
    "text": "which includes two terms, bonded\nterms and non-bonded terms.",
    "start": "59980",
    "end": "64518"
  },
  {
    "text": "And bonded terms are split\nup into three sub terms.",
    "start": "64519",
    "end": "68454"
  },
  {
    "start": "68455",
    "end": "72040"
  },
  {
    "text": "So don't confuse\nbonded with-- actually,",
    "start": "72040",
    "end": "74867"
  },
  {
    "text": "don't think that\nthese are non-bonded.",
    "start": "74867",
    "end": "76450"
  },
  {
    "text": "These are actually all\nsort of grouped as bonded.",
    "start": "76450",
    "end": "78649"
  },
  {
    "text": "I know it's a little\nbit confusing,",
    "start": "78650",
    "end": "80108"
  },
  {
    "text": "but right now I'm dealing just\nwith the sort of bonded terms.",
    "start": "80108",
    "end": "82970"
  },
  {
    "text": "And what that means\nis that it deals",
    "start": "82970",
    "end": "84930"
  },
  {
    "text": "with atoms that are connected\ntogether covalently.",
    "start": "84930",
    "end": "87410"
  },
  {
    "text": "So for example, the bonds\nterm reflects some energy",
    "start": "87410",
    "end": "92610"
  },
  {
    "text": "due to a displacement\nbetween two atoms, which",
    "start": "92610",
    "end": "97190"
  },
  {
    "text": "are certain distance apart.",
    "start": "97190",
    "end": "98570"
  },
  {
    "text": "There is an equilibrium distance\nthat they like to stay at,",
    "start": "98570",
    "end": "101930"
  },
  {
    "text": "and if they vary\nfrom that distance",
    "start": "101930",
    "end": "105280"
  },
  {
    "text": "the potential increases as\na squared of that separation",
    "start": "105280",
    "end": "109760"
  },
  {
    "text": "distance.",
    "start": "109760",
    "end": "111770"
  },
  {
    "text": "The angles term\nrepresents, basically,",
    "start": "111770",
    "end": "117890"
  },
  {
    "text": "the deviation from\nan equilibrium",
    "start": "117890",
    "end": "119610"
  },
  {
    "text": "angle between three atoms.",
    "start": "119610",
    "end": "121350"
  },
  {
    "text": "So if you imagine these\nthree nodes as three atoms,",
    "start": "121350",
    "end": "124360"
  },
  {
    "text": "if this angle varies away\nfrom a certain equilibrium",
    "start": "124360",
    "end": "127560"
  },
  {
    "text": "theta or angle, then\nthe potential energy",
    "start": "127560",
    "end": "131260"
  },
  {
    "text": "is also a quadratic\nterm, which tends",
    "start": "131260",
    "end": "136120"
  },
  {
    "text": "to bring the three atoms to have\na certain equilibrium angle.",
    "start": "136120",
    "end": "142010"
  },
  {
    "text": "And then, finally, the\ndihedral and improper term",
    "start": "142010",
    "end": "145349"
  },
  {
    "text": "is probably one of the\nmore complicated ones.",
    "start": "145350",
    "end": "147260"
  },
  {
    "text": "The improper term basically\ndeals with four atoms.",
    "start": "147260",
    "end": "151989"
  },
  {
    "text": "So if you imagine this is\none, two, three, and four.",
    "start": "151990",
    "end": "156080"
  },
  {
    "text": "These three atoms, if you\nput two planes through them,",
    "start": "156080",
    "end": "159090"
  },
  {
    "text": "the angle that those two\nplanes make to each other",
    "start": "159090",
    "end": "163230"
  },
  {
    "text": "is given a certain\nequilibrium angle again.",
    "start": "163230",
    "end": "166360"
  },
  {
    "text": "And this should also\nbe a quadratic term,",
    "start": "166360",
    "end": "170930"
  },
  {
    "text": "but the energy also\nvaries quadratically",
    "start": "170930",
    "end": "172650"
  },
  {
    "text": "as that angle is deviated from.",
    "start": "172650",
    "end": "175760"
  },
  {
    "text": "An actual dihedral\nis the rotation",
    "start": "175760",
    "end": "179670"
  },
  {
    "text": "along a bond between\nthe two central atoms.",
    "start": "179670",
    "end": "183330"
  },
  {
    "text": "And this energy term has\nactually a cosine form.",
    "start": "183330",
    "end": "187540"
  },
  {
    "start": "187540",
    "end": "191680"
  },
  {
    "text": "So as you rotate it along\nthis bond, say for example,",
    "start": "191680",
    "end": "196040"
  },
  {
    "text": "the energy will\nvery sinusoidally.",
    "start": "196040",
    "end": "199989"
  },
  {
    "text": "And there will be a\nrestoring potential that",
    "start": "199990",
    "end": "202000"
  },
  {
    "text": "will tend to make\nit either a line,",
    "start": "202000",
    "end": "204830"
  },
  {
    "text": "or sometimes it will\nmake the atom stagger.",
    "start": "204830",
    "end": "208320"
  },
  {
    "text": "So all of these parameters are\nvery sort of molecule and atom",
    "start": "208320",
    "end": "212090"
  },
  {
    "text": "dependent.",
    "start": "212090",
    "end": "212750"
  },
  {
    "text": "And all of these\nparameters are available,",
    "start": "212750",
    "end": "215350"
  },
  {
    "text": "or have been built over many\nyears by different methods",
    "start": "215350",
    "end": "220450"
  },
  {
    "text": "like ab initio calculations\nor experimental calculations.",
    "start": "220450",
    "end": "223870"
  },
  {
    "text": "But basically, if you plug those\nparameters in, for example,",
    "start": "223870",
    "end": "226379"
  },
  {
    "text": "here k represents the\nspring constant, right?",
    "start": "226380",
    "end": "231120"
  },
  {
    "text": "Because they're basically\njust like spring constraints",
    "start": "231120",
    "end": "233370"
  },
  {
    "text": "more or less.",
    "start": "233370",
    "end": "234045"
  },
  {
    "text": "Or in this case,\nit will tell you",
    "start": "234045",
    "end": "235420"
  },
  {
    "text": "how far up the potential,\nlike what this value will",
    "start": "235420",
    "end": "237920"
  },
  {
    "text": "be at the maximum, and will,\nfor example, in this case,",
    "start": "237920",
    "end": "242569"
  },
  {
    "text": "will specify how\nmany fluctuations you",
    "start": "242570",
    "end": "246310"
  },
  {
    "text": "have in the energy function.",
    "start": "246310",
    "end": "248400"
  },
  {
    "text": "And the other\nparameters are usually",
    "start": "248400",
    "end": "250340"
  },
  {
    "text": "the theta, the equilibrium\ntheta, or the equilibrium,",
    "start": "250340",
    "end": "254116"
  },
  {
    "text": "or the equilibrium bond length.",
    "start": "254116",
    "end": "257169"
  },
  {
    "text": "So this is kind of\nwhat you can expect",
    "start": "257170",
    "end": "259278"
  },
  {
    "text": "for it to look like as\nmolecules will tend to move.",
    "start": "259279",
    "end": "267120"
  },
  {
    "start": "266000",
    "end": "328000"
  },
  {
    "text": "The non bonded terms\ninclude van-der-Waals terms",
    "start": "267120",
    "end": "270240"
  },
  {
    "text": "and electrostatic terms.",
    "start": "270240",
    "end": "271810"
  },
  {
    "text": "So van-der-Waals forces\noccur between any two atoms,",
    "start": "271810",
    "end": "275450"
  },
  {
    "text": "and if they're far enough apart,\nthey will attract to each other",
    "start": "275450",
    "end": "281780"
  },
  {
    "text": "according to this formula.",
    "start": "281780",
    "end": "283220"
  },
  {
    "text": "And if they're too\nclose together,",
    "start": "283220",
    "end": "285040"
  },
  {
    "text": "so at equilibrium\ndistance between them",
    "start": "285040",
    "end": "287610"
  },
  {
    "text": "the energy is a minimum,\nbut as they get any closer",
    "start": "287610",
    "end": "291780"
  },
  {
    "text": "there will be a very strong\ngroup repulsive force, which",
    "start": "291780",
    "end": "294670"
  },
  {
    "text": "is the r to the 12th term.",
    "start": "294670",
    "end": "296600"
  },
  {
    "text": "And as they get\nfurther apart, there",
    "start": "296600",
    "end": "298590"
  },
  {
    "text": "is an attraction force, which\nvaries as r to the sixth.",
    "start": "298590",
    "end": "303440"
  },
  {
    "start": "303440",
    "end": "306870"
  },
  {
    "text": "And then the electrostatic\nforce is just",
    "start": "306870",
    "end": "310449"
  },
  {
    "text": "a simple Coulombic form.",
    "start": "310450",
    "end": "312630"
  },
  {
    "text": "So you basically take\ntwo atoms that are,",
    "start": "312630",
    "end": "315120"
  },
  {
    "text": "say oppositely charged,\nwill attract each other.",
    "start": "315120",
    "end": "318050"
  },
  {
    "text": "If they're positively charged\nthey will repel each other.",
    "start": "318050",
    "end": "320479"
  },
  {
    "text": "And it's just a matter of\nmultiplying the charges,",
    "start": "320480",
    "end": "324320"
  },
  {
    "text": "and then dividing by\nr to get the energy.",
    "start": "324320",
    "end": "326310"
  },
  {
    "start": "326310",
    "end": "329160"
  },
  {
    "text": "OK, so to do molecular\ndynamics, basically,",
    "start": "329160",
    "end": "331520"
  },
  {
    "text": "you have to take derivatives\nof all those formulas.",
    "start": "331520",
    "end": "334849"
  },
  {
    "text": "I just showed you.",
    "start": "334850",
    "end": "335970"
  },
  {
    "text": "And I didn't do that all myself.",
    "start": "335970",
    "end": "337719"
  },
  {
    "text": "It was pretty hard.",
    "start": "337719",
    "end": "338509"
  },
  {
    "text": "I just got some code from\nsome current existing",
    "start": "338510",
    "end": "342940"
  },
  {
    "text": "molecular dynamic simulators.",
    "start": "342940",
    "end": "344420"
  },
  {
    "text": "But basically, you\ntake the derivative.",
    "start": "344420",
    "end": "346230"
  },
  {
    "text": "And that basically equates\nto the force, right?",
    "start": "346230",
    "end": "348390"
  },
  {
    "text": "The typical Newton\nNewtonian model.",
    "start": "348390",
    "end": "351150"
  },
  {
    "text": "And that gives you the\nforce in every atom,",
    "start": "351150",
    "end": "353979"
  },
  {
    "text": "and then using that force\nand integration scheme,",
    "start": "353980",
    "end": "358590"
  },
  {
    "text": "the leapfrog Verlet\nintegration scheme just",
    "start": "358590",
    "end": "360970"
  },
  {
    "text": "gives you the velocity at\nthe next half time step.",
    "start": "360970",
    "end": "365420"
  },
  {
    "text": "And then using that velocity\nat the half time step,",
    "start": "365420",
    "end": "368860"
  },
  {
    "text": "the positions of\neach atom is updated",
    "start": "368860",
    "end": "373830"
  },
  {
    "text": "based on the positions at\nthe previous time step,",
    "start": "373830",
    "end": "376909"
  },
  {
    "text": "and then some value.",
    "start": "376910",
    "end": "378570"
  },
  {
    "text": "So I will show you\na little bit of what",
    "start": "378570",
    "end": "380570"
  },
  {
    "text": "it looks like on a\nsimple molecule first.",
    "start": "380570",
    "end": "383675"
  },
  {
    "start": "383675",
    "end": "387770"
  },
  {
    "text": "So here's a sort\nof simple molecule,",
    "start": "387770",
    "end": "389400"
  },
  {
    "text": "and it has just an\ninitial configuration",
    "start": "389400",
    "end": "391550"
  },
  {
    "text": "that is just sort of random.",
    "start": "391550",
    "end": "395539"
  },
  {
    "start": "395540",
    "end": "398990"
  },
  {
    "text": "And so one technique\nthat is done",
    "start": "398990",
    "end": "403069"
  },
  {
    "text": "is first the geometry\nis minimized,",
    "start": "403070",
    "end": "405190"
  },
  {
    "text": "which means that you\njust take small steps",
    "start": "405190",
    "end": "407140"
  },
  {
    "text": "in the direction of the gradient\nuntil you reach the energy",
    "start": "407140",
    "end": "409800"
  },
  {
    "text": "minimum.",
    "start": "409800",
    "end": "410740"
  },
  {
    "text": "And if I do that,\nI sort of reach",
    "start": "410740",
    "end": "412680"
  },
  {
    "text": "sort of the minimum\nconfiguration",
    "start": "412680",
    "end": "414335"
  },
  {
    "text": "that this molecule\nlikes to be in.",
    "start": "414335",
    "end": "417139"
  },
  {
    "text": "And then, if I add some thermal\nnoise, which means that I just",
    "start": "417140",
    "end": "420460"
  },
  {
    "text": "set the initial\nvelocities of the atoms",
    "start": "420460",
    "end": "422650"
  },
  {
    "text": "to some random value\nbased on the temperature,",
    "start": "422650",
    "end": "426370"
  },
  {
    "text": "then the molecule starts\nsort of jiggling around.",
    "start": "426370",
    "end": "430680"
  },
  {
    "text": "And the nice thing about the\nVerlet integration scheme",
    "start": "430680",
    "end": "433180"
  },
  {
    "text": "is that it's\nactually just right,",
    "start": "433180",
    "end": "434830"
  },
  {
    "text": "like the energy is\nconserved in the system,",
    "start": "434830",
    "end": "436650"
  },
  {
    "text": "although it fluctuates\na little bit.",
    "start": "436650",
    "end": "438199"
  },
  {
    "text": "So a lot of integration\nschemes the energy",
    "start": "438200",
    "end": "439949"
  },
  {
    "text": "tends to be either\ndecrease or increase,",
    "start": "439949",
    "end": "443220"
  },
  {
    "text": "so the system explodes.",
    "start": "443220",
    "end": "444569"
  },
  {
    "text": "But this integration\nscheme is very stable.",
    "start": "444569",
    "end": "446360"
  },
  {
    "start": "446360",
    "end": "449879"
  },
  {
    "start": "448000",
    "end": "529000"
  },
  {
    "text": "One thing that you saw there\nis, so I just talked briefly",
    "start": "449880",
    "end": "453500"
  },
  {
    "text": "about kinetic energy.",
    "start": "453500",
    "end": "454390"
  },
  {
    "text": "This is kind of how the\ninitial velocities are",
    "start": "454390",
    "end": "456440"
  },
  {
    "text": "set based on the Boltzmann\nconstant and the temperature.",
    "start": "456440",
    "end": "460100"
  },
  {
    "text": "And the other thing that\nmolecular dynamics usually do",
    "start": "460100",
    "end": "463520"
  },
  {
    "text": "is called Langevin dynamics.",
    "start": "463520",
    "end": "465009"
  },
  {
    "text": "And in this case, some\nrandom velocity vector",
    "start": "465010",
    "end": "468640"
  },
  {
    "text": "is added to the normal velocity,\nwhich just sort of simulates",
    "start": "468640",
    "end": "473490"
  },
  {
    "text": "collisions with other\nmolecules in the environment.",
    "start": "473490",
    "end": "475789"
  },
  {
    "text": "So this makes the simulation\nlook a bit more realistic.",
    "start": "475789",
    "end": "478080"
  },
  {
    "text": "So instead of the molecule\njust sitting there in space,",
    "start": "478080",
    "end": "480819"
  },
  {
    "text": "this random sort of\nfactor adds some movement.",
    "start": "480820",
    "end": "486350"
  },
  {
    "text": "And there's also a\ndamping constant,",
    "start": "486350",
    "end": "488720"
  },
  {
    "text": "which sort of opposes the\nvelocity by some constant.",
    "start": "488720",
    "end": "493250"
  },
  {
    "text": "So if you didn't add any\nmore sort of randomness",
    "start": "493250",
    "end": "496550"
  },
  {
    "text": "into the system, the system\nwould just eventually go",
    "start": "496550",
    "end": "500699"
  },
  {
    "text": "to be completely still.",
    "start": "500700",
    "end": "502442"
  },
  {
    "text": "So there would be\nno more movement,",
    "start": "502442",
    "end": "503900"
  },
  {
    "text": "because this is kind of like\na damping sort of factor.",
    "start": "503900",
    "end": "507600"
  },
  {
    "text": "And there are some properties\nof this random vector that sort",
    "start": "507600",
    "end": "511900"
  },
  {
    "text": "of make some physical sense.",
    "start": "511900",
    "end": "514419"
  },
  {
    "text": "For example, it's independent\nof previously picked",
    "start": "514419",
    "end": "516950"
  },
  {
    "text": "random vectors, and it also\ndepends on the temperature.",
    "start": "516950",
    "end": "519650"
  },
  {
    "text": "So that if you keep\nadding this random factor",
    "start": "519650",
    "end": "522299"
  },
  {
    "text": "to the simulation,\nthe temperature",
    "start": "522299",
    "end": "524322"
  },
  {
    "text": "will always stay constant.",
    "start": "524322",
    "end": "525405"
  },
  {
    "start": "525405",
    "end": "530590"
  },
  {
    "start": "529000",
    "end": "590000"
  },
  {
    "text": "Another thing to consider\nis that these molecules,",
    "start": "530590",
    "end": "532990"
  },
  {
    "text": "if you try to think\nof them as they",
    "start": "532990",
    "end": "534620"
  },
  {
    "text": "are in a sort of typical\nbiological system,",
    "start": "534620",
    "end": "536860"
  },
  {
    "text": "is that they'll be\nsolvated in water.",
    "start": "536860",
    "end": "540029"
  },
  {
    "text": "So in that case\nthe Coulombic term",
    "start": "540030",
    "end": "543040"
  },
  {
    "text": "is not actually that simple.",
    "start": "543040",
    "end": "545259"
  },
  {
    "text": "You have to include some\nsort of dielectric constant.",
    "start": "545260",
    "end": "548270"
  },
  {
    "text": "So for example, one\nthat is typically used",
    "start": "548270",
    "end": "550990"
  },
  {
    "text": "and is pretty simple is that the\nconstant is just the distance.",
    "start": "550990",
    "end": "554500"
  },
  {
    "text": "So that makes the electrostatic\nenergy dependent on one over r",
    "start": "554500",
    "end": "558690"
  },
  {
    "text": "squared rather than 1 over r.",
    "start": "558690",
    "end": "560440"
  },
  {
    "text": "So that means that the\nelectrostatic forces drop off",
    "start": "560440",
    "end": "563410"
  },
  {
    "text": "a lot faster as the atoms get\nfurther and further apart.",
    "start": "563410",
    "end": "567240"
  },
  {
    "text": "So for example, so two molecules\nthat are oppositely charged,",
    "start": "567240",
    "end": "573430"
  },
  {
    "text": "if you just put them in\nvacuum, they will eventually",
    "start": "573430",
    "end": "576029"
  },
  {
    "text": "come close together.",
    "start": "576030",
    "end": "577090"
  },
  {
    "text": "But if you add this term,\nthe electrostatic attraction",
    "start": "577090",
    "end": "582320"
  },
  {
    "text": "will be much weaker.",
    "start": "582320",
    "end": "583160"
  },
  {
    "text": "So it will simulate them\nbeing solvated in water.",
    "start": "583160",
    "end": "585730"
  },
  {
    "text": "And they will come\ntogether eventually",
    "start": "585730",
    "end": "587760"
  },
  {
    "text": "but probably a lot slower.",
    "start": "587760",
    "end": "589180"
  },
  {
    "start": "589180",
    "end": "592200"
  },
  {
    "start": "590000",
    "end": "647000"
  },
  {
    "text": "Another thing that\nis typically--",
    "start": "592200",
    "end": "594040"
  },
  {
    "text": "so I'll talk a little bit\nabout the non-bonded forces",
    "start": "594040",
    "end": "596320"
  },
  {
    "text": "right now, which are, again,\nthe electrostatic forces",
    "start": "596320",
    "end": "599110"
  },
  {
    "text": "and the van-der-Waal's forces.",
    "start": "599110",
    "end": "601000"
  },
  {
    "text": "So generally, what\nhas to be done",
    "start": "601000",
    "end": "603310"
  },
  {
    "text": "is, if you consider\nany single atom",
    "start": "603310",
    "end": "606110"
  },
  {
    "text": "like say this one\nover here, well,",
    "start": "606110",
    "end": "609399"
  },
  {
    "text": "so first of all the\nbonded forces basically",
    "start": "609400",
    "end": "611340"
  },
  {
    "text": "include just the atoms that are\nconnected to it, and that's it.",
    "start": "611340",
    "end": "613990"
  },
  {
    "text": "So it's usually the fastest\nstep in the computation.",
    "start": "613990",
    "end": "617529"
  },
  {
    "text": "But for non-bonded forces,\nyou have to consider basically",
    "start": "617530",
    "end": "620780"
  },
  {
    "text": "every other atom in the system.",
    "start": "620780",
    "end": "624410"
  },
  {
    "text": "And I didn't include\nall of the atoms here,",
    "start": "624410",
    "end": "626511"
  },
  {
    "text": "but basically just\nto give an idea,",
    "start": "626512",
    "end": "627970"
  },
  {
    "text": "they could be atoms that\nare really far apart.",
    "start": "627970",
    "end": "631360"
  },
  {
    "text": "So generally,\nwhat's done is there",
    "start": "631360",
    "end": "632880"
  },
  {
    "text": "is some cut off radius,\noutside of which",
    "start": "632880",
    "end": "635490"
  },
  {
    "text": "those forces aren't considered.",
    "start": "635490",
    "end": "636839"
  },
  {
    "text": "And because the forces\ndrop off really fast,",
    "start": "636840",
    "end": "638750"
  },
  {
    "text": "sometimes that's considered\nto be good enough",
    "start": "638750",
    "end": "640760"
  },
  {
    "text": "for a lot of simulations.",
    "start": "640760",
    "end": "642340"
  },
  {
    "text": "So that's a consideration\nto take into account",
    "start": "642340",
    "end": "645035"
  },
  {
    "text": "when doing these simulations.",
    "start": "645035",
    "end": "648100"
  },
  {
    "start": "647000",
    "end": "870000"
  },
  {
    "text": "OK, so here's the basic\nmolecular dynamics algorithm.",
    "start": "648100",
    "end": "652190"
  },
  {
    "text": "So you specify how many\nsteps you want to run it to.",
    "start": "652190",
    "end": "654580"
  },
  {
    "text": "And each time step\nis one femtosecond.",
    "start": "654580",
    "end": "660085"
  },
  {
    "start": "660085",
    "end": "663280"
  },
  {
    "text": "So very small.",
    "start": "663280",
    "end": "664010"
  },
  {
    "start": "664010",
    "end": "666920"
  },
  {
    "text": "So usually what happens is\nyou can find the atom pairs.",
    "start": "666920",
    "end": "670720"
  },
  {
    "text": "So that means all the\nnon-bonded interactions,",
    "start": "670720",
    "end": "672990"
  },
  {
    "text": "you have to make a list,\nbasically an n squared list.",
    "start": "672990",
    "end": "675560"
  },
  {
    "text": "If you have n atoms,\nyou can expect",
    "start": "675560",
    "end": "677080"
  },
  {
    "text": "to have about n\nsquared atom pairs.",
    "start": "677080",
    "end": "679680"
  },
  {
    "text": "But if you consider a cut\noff, then what's usually done",
    "start": "679680",
    "end": "682149"
  },
  {
    "text": "is only atom pairs\nwithin that cut off",
    "start": "682150",
    "end": "687110"
  },
  {
    "text": "are considered and\nincluded into that list.",
    "start": "687110",
    "end": "690350"
  },
  {
    "text": "And that computation\nis pretty expensive,",
    "start": "690350",
    "end": "692139"
  },
  {
    "text": "d it's sometimes only done only\nevery, say every ten steps.",
    "start": "692140",
    "end": "696790"
  },
  {
    "text": "And atoms don't\nreally move that much.",
    "start": "696790",
    "end": "699060"
  },
  {
    "text": "So it's usually pretty accurate.",
    "start": "699060",
    "end": "700990"
  },
  {
    "text": "And if you use a cut off of, say\n15 angstroms, and then, well,",
    "start": "700990",
    "end": "704639"
  },
  {
    "text": "the forces have dropped to\nalmost zero by 12 angstroms,",
    "start": "704639",
    "end": "706930"
  },
  {
    "text": "then that's pretty accurate.",
    "start": "706930",
    "end": "708190"
  },
  {
    "text": "So this is usually\nan optimization.",
    "start": "708190",
    "end": "712180"
  },
  {
    "text": "It optimizes the\nsimulation a little bit.",
    "start": "712180",
    "end": "715210"
  },
  {
    "text": "The next step is to\ncompute the bonded forces.",
    "start": "715210",
    "end": "717250"
  },
  {
    "text": "So that includes the\nbonds, angles, dihedrals",
    "start": "717250",
    "end": "719140"
  },
  {
    "text": "and improper angles.",
    "start": "719140",
    "end": "720160"
  },
  {
    "start": "720160",
    "end": "723120"
  },
  {
    "text": "And then compute the\nnon-bonded forces,",
    "start": "723120",
    "end": "724800"
  },
  {
    "text": "so that iterates over\nall the atom pairs.",
    "start": "724800",
    "end": "727310"
  },
  {
    "text": "And then the integration is\ndone to obtain the new atom",
    "start": "727310",
    "end": "729990"
  },
  {
    "text": "positions.",
    "start": "729990",
    "end": "731399"
  },
  {
    "text": "So here's, running\non the PlayStation,",
    "start": "731400",
    "end": "733500"
  },
  {
    "text": "this is kind of roughly how\nthis is just running on the PPU",
    "start": "733500",
    "end": "738040"
  },
  {
    "text": "alone.",
    "start": "738040",
    "end": "739000"
  },
  {
    "text": "So finding the atom pairs,\nif I don't use a cut off,",
    "start": "739000",
    "end": "743350"
  },
  {
    "text": "I can just compute the\natom pairs list once,",
    "start": "743350",
    "end": "745404"
  },
  {
    "text": "and then never do it again.",
    "start": "745405",
    "end": "746530"
  },
  {
    "text": "So that's why I put here 0.",
    "start": "746530",
    "end": "749130"
  },
  {
    "text": "But otherwise, generally\ntakes a lot of time",
    "start": "749130",
    "end": "752070"
  },
  {
    "text": "to compute the atom\npairs, because it",
    "start": "752070",
    "end": "753790"
  },
  {
    "text": "involves getting the distances\nbetween every two atoms.",
    "start": "753790",
    "end": "758649"
  },
  {
    "text": "And this is a pretty big\nsystem, maybe about 1,000 atoms.",
    "start": "758650",
    "end": "766350"
  },
  {
    "text": "So that's why.",
    "start": "766350",
    "end": "767670"
  },
  {
    "text": "So these times are not really\nrepresentative of smaller",
    "start": "767670",
    "end": "770649"
  },
  {
    "text": "systems.",
    "start": "770650",
    "end": "771772"
  },
  {
    "text": "AUDIENCE: What is\nBF [INAUDIBLE]?",
    "start": "771772",
    "end": "773500"
  },
  {
    "text": "GREG PINTILIE:\nBF, so that's done",
    "start": "773500",
    "end": "774990"
  },
  {
    "text": "using the brute force approach.",
    "start": "774990",
    "end": "776320"
  },
  {
    "text": "So that means that you\ncheck every two atoms.",
    "start": "776320",
    "end": "778700"
  },
  {
    "text": "And this is using a KD tree,\nso that breaks space up.",
    "start": "778700",
    "end": "782990"
  },
  {
    "start": "782990",
    "end": "786120"
  },
  {
    "text": "So then checking the\nneighboring atoms is n log n.",
    "start": "786120",
    "end": "792621"
  },
  {
    "text": "Or it's actually\na constant factor",
    "start": "792621",
    "end": "794113"
  },
  {
    "text": "after you've built the tree.",
    "start": "794114",
    "end": "795280"
  },
  {
    "text": "Building the tree is n log n.",
    "start": "795280",
    "end": "796690"
  },
  {
    "text": "So using that kind\nof an algorithm,",
    "start": "796690",
    "end": "798520"
  },
  {
    "text": "you get much better improvement.",
    "start": "798520",
    "end": "800740"
  },
  {
    "text": "So this is a scaling of\nincreasing the system size",
    "start": "800740",
    "end": "805680"
  },
  {
    "text": "by two in the number of atoms.",
    "start": "805680",
    "end": "807649"
  },
  {
    "text": "So say going from\n1,000 to 2,000 atoms.",
    "start": "807650",
    "end": "810010"
  },
  {
    "text": "The time too, using a\nbrute force approach,",
    "start": "810010",
    "end": "814670"
  },
  {
    "text": "increases exponentially.",
    "start": "814670",
    "end": "815839"
  },
  {
    "text": "Whereas, using a KD tree, it\nactually just about doubles.",
    "start": "815840",
    "end": "819780"
  },
  {
    "text": "So that kind of shows that using\na better algorithm sometimes",
    "start": "819780",
    "end": "824334"
  },
  {
    "text": "for these things is\nprobably much better",
    "start": "824334",
    "end": "826000"
  },
  {
    "text": "than trying to parallelize it.",
    "start": "826000",
    "end": "829590"
  },
  {
    "text": "Doing the bonded forces,\nsay about 50 milliseconds,",
    "start": "829590",
    "end": "834807"
  },
  {
    "text": "and with cut off it's the same\ntime, because it doesn't really",
    "start": "834807",
    "end": "837390"
  },
  {
    "text": "affect the step.",
    "start": "837390",
    "end": "838700"
  },
  {
    "text": "But then computing\nthe non-bonded forces",
    "start": "838700",
    "end": "841480"
  },
  {
    "text": "is actually the\nbiggest chunk of time.",
    "start": "841480",
    "end": "843639"
  },
  {
    "text": "So that takes about 1.4\nseconds for the system.",
    "start": "843640",
    "end": "847870"
  },
  {
    "text": "And then this is\nconsidering a million pairs.",
    "start": "847870",
    "end": "852760"
  },
  {
    "text": "With a cut off there is\nless pairs to consider,",
    "start": "852760",
    "end": "855090"
  },
  {
    "text": "but the time is still the\ndominant time basically.",
    "start": "855090",
    "end": "858622"
  },
  {
    "text": "So generally, for molecular\ndynamic simulations",
    "start": "858622",
    "end": "860580"
  },
  {
    "text": "this is the dominant\ntime factor.",
    "start": "860580",
    "end": "862620"
  },
  {
    "text": "And that's what people\nreally focus on,",
    "start": "862620",
    "end": "864260"
  },
  {
    "text": "trying to speed things up.",
    "start": "864260",
    "end": "865990"
  },
  {
    "text": "And then the integration\nis really fast,",
    "start": "865990",
    "end": "868459"
  },
  {
    "text": "because it just loops\nover the atoms once.",
    "start": "868460",
    "end": "871480"
  },
  {
    "start": "870000",
    "end": "962000"
  },
  {
    "text": "So there is basically three\ndifferent parallelization",
    "start": "871480",
    "end": "874370"
  },
  {
    "text": "approaches that I've come\nacross in the literature.",
    "start": "874370",
    "end": "877440"
  },
  {
    "text": "And one of them is referred\nto as force decomposition.",
    "start": "877440",
    "end": "880950"
  },
  {
    "text": "So if you think of a\nforce operation being,",
    "start": "880950",
    "end": "884420"
  },
  {
    "text": "say a non-bonded force operation\nwhere you consider two atoms,",
    "start": "884420",
    "end": "887850"
  },
  {
    "text": "and you compute the force\nthe two, van-der-Waals",
    "start": "887850",
    "end": "891079"
  },
  {
    "text": "and electrostatic forces,\none easy way to split this up",
    "start": "891080",
    "end": "896330"
  },
  {
    "text": "amongst, say six processors,\nis to just give each processor,",
    "start": "896330",
    "end": "901340"
  },
  {
    "text": "say n divided by 6 of\nthese force operations.",
    "start": "901340",
    "end": "905045"
  },
  {
    "start": "905045",
    "end": "908440"
  },
  {
    "text": "So you have to send each\nprocessor both atom positions,",
    "start": "908440",
    "end": "912170"
  },
  {
    "text": "and then some other properties\nof the atoms, such as the mass",
    "start": "912170",
    "end": "915120"
  },
  {
    "text": "and-- actually not the mass,\nbut the charges and the minimum",
    "start": "915120",
    "end": "919205"
  },
  {
    "text": "radius.",
    "start": "919205",
    "end": "919705"
  },
  {
    "start": "919705",
    "end": "922250"
  },
  {
    "text": "And basically, once that\ncomputation is done,",
    "start": "922250",
    "end": "924950"
  },
  {
    "text": "the processor just has to\neither store or return the force",
    "start": "924950",
    "end": "928090"
  },
  {
    "text": "on both atom.",
    "start": "928090",
    "end": "929530"
  },
  {
    "text": "And it has to come back to\nsort of like the main processor",
    "start": "929530",
    "end": "932514"
  },
  {
    "text": "where all the\nforces are added up,",
    "start": "932514",
    "end": "933930"
  },
  {
    "text": "and then the\nintegration is done.",
    "start": "933930",
    "end": "935304"
  },
  {
    "start": "935304",
    "end": "939920"
  },
  {
    "text": "So what I just described is\nsort of the approach I took.",
    "start": "939920",
    "end": "943240"
  },
  {
    "text": "And it's sort of\nan easy approach",
    "start": "943240",
    "end": "945690"
  },
  {
    "text": "to sort of think of\nif you couldn't store,",
    "start": "945690",
    "end": "949270"
  },
  {
    "text": "say every atom on\nevery processor.",
    "start": "949270",
    "end": "951350"
  },
  {
    "text": "Because you just have\nto send each processor",
    "start": "951350",
    "end": "953620"
  },
  {
    "text": "a certain number of these\nforce computation units.",
    "start": "953620",
    "end": "956160"
  },
  {
    "text": "And the processor does then\nand then returns the forces.",
    "start": "956160",
    "end": "958629"
  },
  {
    "text": "And then you can just add up\nall the forces on every atom",
    "start": "958630",
    "end": "961480"
  },
  {
    "text": "and do that.",
    "start": "961480",
    "end": "963110"
  },
  {
    "text": "So basically here is the\nalgorithm how it works roughly.",
    "start": "963110",
    "end": "966209"
  },
  {
    "text": "And so basically,\nfirst set up the SPUs,",
    "start": "966210",
    "end": "970187"
  },
  {
    "text": "send the control box\nwith, say the addresses",
    "start": "970187",
    "end": "972020"
  },
  {
    "text": "where a these force\noperations will be stored.",
    "start": "972020",
    "end": "975650"
  },
  {
    "text": "The bonded forces are\ncomputed on the PPU,",
    "start": "975650",
    "end": "980090"
  },
  {
    "text": "just for simplicity for now.",
    "start": "980090",
    "end": "983835"
  },
  {
    "text": "And then the computation\nfor the non-bonded forces,",
    "start": "983835",
    "end": "985960"
  },
  {
    "text": "basically, all the non-bonded\nforces operations remaining",
    "start": "985960",
    "end": "990890"
  },
  {
    "text": "are considered.",
    "start": "990890",
    "end": "991987"
  },
  {
    "text": "And then they're\nsplit up into blocks.",
    "start": "991987",
    "end": "993570"
  },
  {
    "text": "So each SPU sent\na block with, say",
    "start": "993570",
    "end": "995980"
  },
  {
    "text": "a number of force operations.",
    "start": "995980",
    "end": "997690"
  },
  {
    "text": "And in this case it was 200.",
    "start": "997690",
    "end": "1000480"
  },
  {
    "text": "So the control block\nis sent to the SPU,",
    "start": "1000480",
    "end": "1003320"
  },
  {
    "text": "the SPU is told to\nstart processing.",
    "start": "1003320",
    "end": "1006220"
  },
  {
    "text": "And then the PPU waits\nfor each SPU to finish.",
    "start": "1006220",
    "end": "1009370"
  },
  {
    "text": "And then once the\nSPU is finished,",
    "start": "1009370",
    "end": "1012320"
  },
  {
    "text": "the forces are added to the\ntwo atoms that are involved",
    "start": "1012320",
    "end": "1015417"
  },
  {
    "text": "in that force computation.",
    "start": "1015417",
    "end": "1016500"
  },
  {
    "start": "1016500",
    "end": "1019100"
  },
  {
    "text": "And then this loop is done\nonce all the SPUs are finished.",
    "start": "1019100",
    "end": "1022250"
  },
  {
    "text": "And then it goes,\nin this repeats",
    "start": "1022250",
    "end": "1023740"
  },
  {
    "text": "until there is non-bonded\noperations remaining.",
    "start": "1023740",
    "end": "1026699"
  },
  {
    "text": "So for example here,\njust to illustrate this,",
    "start": "1026700",
    "end": "1029595"
  },
  {
    "text": "let's say these are all\nthe non-bonded operations I",
    "start": "1029596",
    "end": "1031720"
  },
  {
    "text": "have to do.",
    "start": "1031720",
    "end": "1032799"
  },
  {
    "text": "And I'm going to use two SPUs.",
    "start": "1032800",
    "end": "1035310"
  },
  {
    "text": "And each SPU can only store,\nsay three force operations.",
    "start": "1035310",
    "end": "1038288"
  },
  {
    "start": "1038289",
    "end": "1040889"
  },
  {
    "text": "So each SPU is sent by a block.",
    "start": "1040890",
    "end": "1042730"
  },
  {
    "text": "I mean that, say\nthese three operations",
    "start": "1042730",
    "end": "1044520"
  },
  {
    "text": "are sent to each SPU.",
    "start": "1044520",
    "end": "1045435"
  },
  {
    "text": "The SPU does them.",
    "start": "1045435",
    "end": "1048560"
  },
  {
    "text": "The next block is sent to the\nnext SPU at the same time,",
    "start": "1048560",
    "end": "1051720"
  },
  {
    "text": "and then that SPU also does it.",
    "start": "1051720",
    "end": "1053510"
  },
  {
    "text": "And this is iteration\n0 for example.",
    "start": "1053510",
    "end": "1056040"
  },
  {
    "text": "And this is done until all\nof the force computations",
    "start": "1056040",
    "end": "1058860"
  },
  {
    "text": "are done.",
    "start": "1058860",
    "end": "1060500"
  },
  {
    "text": "So here's a timing.",
    "start": "1060500",
    "end": "1061590"
  },
  {
    "text": "So you might imagine\nthat, as I said,",
    "start": "1061590",
    "end": "1064679"
  },
  {
    "text": "there is there is a\nlot of communication",
    "start": "1064680",
    "end": "1069540"
  },
  {
    "text": "overhead over here.",
    "start": "1069540",
    "end": "1072410"
  },
  {
    "text": "So here's how this performs.",
    "start": "1072410",
    "end": "1075360"
  },
  {
    "text": "So on the PPU, the MD\nsimulation per time step,",
    "start": "1075360",
    "end": "1081080"
  },
  {
    "text": "runs in 310 milliseconds.",
    "start": "1081080",
    "end": "1084320"
  },
  {
    "text": "On one SPU, the time was\nup to 630 milliseconds.",
    "start": "1084320",
    "end": "1089580"
  },
  {
    "text": "So there is a lot of\ncommunication overhead here.",
    "start": "1089580",
    "end": "1092350"
  },
  {
    "text": "On two SPUs it goes\nback down to 390.",
    "start": "1092350",
    "end": "1095400"
  },
  {
    "text": "And as the number of\nSPUs is increased,",
    "start": "1095400",
    "end": "1098560"
  },
  {
    "text": "it gets lower and lower.",
    "start": "1098560",
    "end": "1099620"
  },
  {
    "text": "But it's not that much\nbetter than really running it",
    "start": "1099620",
    "end": "1103309"
  },
  {
    "text": "sequentially.",
    "start": "1103310",
    "end": "1104400"
  },
  {
    "text": "And the reason is that the way\nI implemented is pretty rough.",
    "start": "1104400",
    "end": "1108120"
  },
  {
    "text": "One of the limitations, I mean\none very obvious optimization",
    "start": "1108120",
    "end": "1112130"
  },
  {
    "text": "that should be done\nis that SPU basically",
    "start": "1112130",
    "end": "1116190"
  },
  {
    "text": "waits for this whole\nblock to arrive,",
    "start": "1116190",
    "end": "1118350"
  },
  {
    "text": "and then starts computation.",
    "start": "1118350",
    "end": "1119624"
  },
  {
    "text": "But really what I\nshould have done",
    "start": "1119624",
    "end": "1121040"
  },
  {
    "text": "is once one force\ncomputation arrives,",
    "start": "1121040",
    "end": "1127090"
  },
  {
    "text": "you can already do\nthat computation.",
    "start": "1127090",
    "end": "1130080"
  },
  {
    "text": "Instead of waiting for all\nof them to be transferred",
    "start": "1130080",
    "end": "1132320"
  },
  {
    "text": "and then starting\nto do the operation.",
    "start": "1132320",
    "end": "1133903"
  },
  {
    "text": "So that I think that\ncould've been a lot better.",
    "start": "1133903",
    "end": "1136539"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]",
    "start": "1136540",
    "end": "1137534"
  },
  {
    "text": "GREG PINTILIE: No.",
    "start": "1137534",
    "end": "1138031"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]",
    "start": "1138031",
    "end": "1138906"
  },
  {
    "start": "1138906",
    "end": "1143030"
  },
  {
    "text": "GREG PINTILIE: No.",
    "start": "1143030",
    "end": "1143780"
  },
  {
    "start": "1143780",
    "end": "1146790"
  },
  {
    "text": "So right, so this is sort\nof the simplest approach,",
    "start": "1146790",
    "end": "1151830"
  },
  {
    "start": "1148000",
    "end": "1374000"
  },
  {
    "text": "I mean sort of a simple\napproach to implement",
    "start": "1151830",
    "end": "1154669"
  },
  {
    "text": "on this architecture.",
    "start": "1154670",
    "end": "1155620"
  },
  {
    "text": "And it sort of scales\nwell as the system grows.",
    "start": "1155620",
    "end": "1158120"
  },
  {
    "text": "So if you can't store\nevery item, for example,",
    "start": "1158120",
    "end": "1160250"
  },
  {
    "text": "in every SPU, this\ndoesn't really care.",
    "start": "1160250",
    "end": "1165660"
  },
  {
    "text": "The system can grow\nas large as you want.",
    "start": "1165660",
    "end": "1168177"
  },
  {
    "text": "There's some other\napproaches that are",
    "start": "1168177",
    "end": "1169760"
  },
  {
    "text": "done sort of in the literature.",
    "start": "1169760",
    "end": "1171270"
  },
  {
    "text": "I didn't implement\nthese, but another one",
    "start": "1171270",
    "end": "1174070"
  },
  {
    "text": "is called atomic decomposition.",
    "start": "1174070",
    "end": "1175409"
  },
  {
    "text": "So here, if you have,\nsay a number of atoms,",
    "start": "1175410",
    "end": "1177570"
  },
  {
    "text": "you send each one of\nthese atoms to one SPU.",
    "start": "1177570",
    "end": "1181139"
  },
  {
    "text": "And then that SPU is solely\nresponsible for computing",
    "start": "1181140",
    "end": "1185370"
  },
  {
    "text": "the forces on it,\nand also integrating",
    "start": "1185370",
    "end": "1189250"
  },
  {
    "text": "to get the new positions.",
    "start": "1189250",
    "end": "1190550"
  },
  {
    "text": "And then all you\nhave to communicate",
    "start": "1190550",
    "end": "1192060"
  },
  {
    "text": "is the atomic positions.",
    "start": "1192060",
    "end": "1193471"
  },
  {
    "text": "But this is a little\nbit more complicated,",
    "start": "1193471",
    "end": "1195220"
  },
  {
    "text": "because then every\nSPU has to know",
    "start": "1195220",
    "end": "1200500"
  },
  {
    "text": "about all of the\nforce computations",
    "start": "1200500",
    "end": "1202670"
  },
  {
    "text": "that you want to do.",
    "start": "1202670",
    "end": "1204190"
  },
  {
    "text": "So for example, in this\ncase it's just a non-bonded,",
    "start": "1204190",
    "end": "1206610"
  },
  {
    "text": "but the SPU also\nhas to know about--",
    "start": "1206610",
    "end": "1210151"
  },
  {
    "text": "AUDIENCE: So that would\nbe like the same example",
    "start": "1210151",
    "end": "1212151"
  },
  {
    "text": "that we did in [INAUDIBLE].",
    "start": "1212151",
    "end": "1214520"
  },
  {
    "text": "GREG PINTILIE:\nYeah, it would be.",
    "start": "1214520",
    "end": "1218552"
  },
  {
    "text": "Yeah, the only problem\nwith that approach",
    "start": "1218552",
    "end": "1220260"
  },
  {
    "text": "is that if the system was\nmuch larger than the SPU could",
    "start": "1220260",
    "end": "1223220"
  },
  {
    "text": "store, and you couldn't store\nevery single atom on the SPU,",
    "start": "1223220",
    "end": "1228450"
  },
  {
    "text": "then an operation might refer\nto atoms that are not there.",
    "start": "1228450",
    "end": "1234245"
  },
  {
    "start": "1234245",
    "end": "1237170"
  },
  {
    "text": "So yeah, it would\nbe similar to that.",
    "start": "1237170",
    "end": "1239010"
  },
  {
    "text": "But it would get more\ncomplicated in this case",
    "start": "1239010",
    "end": "1240950"
  },
  {
    "text": "as a system grew,\nbecause you'd have",
    "start": "1240950",
    "end": "1242450"
  },
  {
    "text": "to keep track of where\neach atom is and then",
    "start": "1242450",
    "end": "1244649"
  },
  {
    "text": "implement communication.",
    "start": "1244650",
    "end": "1245870"
  },
  {
    "text": "If you don't have\na certain atom,",
    "start": "1245870",
    "end": "1248120"
  },
  {
    "text": "to get to that atom\nposition and use it",
    "start": "1248120",
    "end": "1249840"
  },
  {
    "text": "in the force computation.",
    "start": "1249840",
    "end": "1252020"
  },
  {
    "text": "So yeah, this approach, OK,\nI'll talk a little bit more",
    "start": "1252020",
    "end": "1256230"
  },
  {
    "text": "about this.",
    "start": "1256230",
    "end": "1256735"
  },
  {
    "text": "This is a--",
    "start": "1256735",
    "end": "1257931"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] I mean\nnot SPU, but [INAUDIBLE].",
    "start": "1257931",
    "end": "1263710"
  },
  {
    "text": "GREG PINTILIE:\nThat's true, yeah.",
    "start": "1263710",
    "end": "1265257"
  },
  {
    "text": "So you only sort of give\na certain number of atoms",
    "start": "1265257",
    "end": "1267340"
  },
  {
    "text": "to every SPU, and then, yeah.",
    "start": "1267340",
    "end": "1269860"
  },
  {
    "text": "That's true.",
    "start": "1269860",
    "end": "1270360"
  },
  {
    "text": "And then you would have to sort\nof store every single force",
    "start": "1270360",
    "end": "1272940"
  },
  {
    "text": "that that atom is\nincluded in on the SPU.",
    "start": "1272940",
    "end": "1277242"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]",
    "start": "1277243",
    "end": "1278118"
  },
  {
    "start": "1278118",
    "end": "1281790"
  },
  {
    "text": "GREG PINTILIE: Yeah, like when\nthis will become a problem is,",
    "start": "1281790",
    "end": "1286390"
  },
  {
    "text": "say the system was much larger\nthan you had local store.",
    "start": "1286390",
    "end": "1289530"
  },
  {
    "text": "Then say you had like\n1/10 of the system on SPUs",
    "start": "1289530",
    "end": "1294130"
  },
  {
    "text": "and then 9/10 of the\nsystem on the PPU.",
    "start": "1294130",
    "end": "1295900"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]",
    "start": "1295900",
    "end": "1298404"
  },
  {
    "text": "GREG PINTILIE: Yeah, it\nwould be hard to think",
    "start": "1298404",
    "end": "1300320"
  },
  {
    "text": "of it scaling properly.",
    "start": "1300320",
    "end": "1301278"
  },
  {
    "start": "1301278",
    "end": "1304950"
  },
  {
    "text": "So a special case of\nthis atomic decomposition",
    "start": "1304950",
    "end": "1307639"
  },
  {
    "text": "is actually spatial\ndecomposition.",
    "start": "1307640",
    "end": "1309370"
  },
  {
    "text": "OK, I'm almost done.",
    "start": "1309370",
    "end": "1311184"
  },
  {
    "text": "So a special case of\nspatial decomposition.",
    "start": "1311184",
    "end": "1312975"
  },
  {
    "start": "1312975",
    "end": "1315710"
  },
  {
    "text": "So what makes this\napproach sort of not good,",
    "start": "1315710",
    "end": "1318510"
  },
  {
    "text": "and it sort of involves\na lot of communication,",
    "start": "1318510",
    "end": "1321510"
  },
  {
    "text": "is just this fact that some\nof these force computations,",
    "start": "1321510",
    "end": "1324920"
  },
  {
    "text": "or force operations that\nyou have could include atoms",
    "start": "1324920",
    "end": "1327130"
  },
  {
    "text": "on different units.",
    "start": "1327130",
    "end": "1328320"
  },
  {
    "text": "So if you don't split up\nthese atoms sort of smartly,",
    "start": "1328320",
    "end": "1331130"
  },
  {
    "text": "then you could end up\nhaving to communicate a lot",
    "start": "1331130",
    "end": "1333900"
  },
  {
    "text": "while computing these forces.",
    "start": "1333900",
    "end": "1335330"
  },
  {
    "text": "So spatial decomposition\ntries to address this.",
    "start": "1335330",
    "end": "1337409"
  },
  {
    "text": "And basically, you store atoms\nthat are close to each other.",
    "start": "1337410",
    "end": "1341590"
  },
  {
    "text": "So say I had the system, and\nI wanted to split this up",
    "start": "1341590",
    "end": "1345830"
  },
  {
    "text": "on six SPUs, then right,\nI would give each SPU,",
    "start": "1345830",
    "end": "1350315"
  },
  {
    "text": "say a certain area of space.",
    "start": "1350315",
    "end": "1351834"
  },
  {
    "text": "But you could see right away\nwhat the problem with this is",
    "start": "1351834",
    "end": "1354250"
  },
  {
    "text": "is that it's not load balanced.",
    "start": "1354250",
    "end": "1356010"
  },
  {
    "text": "So some SPUs could not\nhave too much work to do.",
    "start": "1356010",
    "end": "1359749"
  },
  {
    "text": "And there's still some\ncommunication, because you",
    "start": "1359749",
    "end": "1361790"
  },
  {
    "text": "have to communicate\nbetween neighboring SPUs,",
    "start": "1361790",
    "end": "1365060"
  },
  {
    "text": "say some certain cases.",
    "start": "1365060",
    "end": "1366770"
  },
  {
    "text": "But the communication\nis still probably",
    "start": "1366770",
    "end": "1368620"
  },
  {
    "text": "a lot better than in\nthe previous case,",
    "start": "1368620",
    "end": "1371000"
  },
  {
    "text": "just for atomic decomposition.",
    "start": "1371000",
    "end": "1372250"
  },
  {
    "start": "1372250",
    "end": "1375230"
  },
  {
    "start": "1374000",
    "end": "1609000"
  },
  {
    "text": "So here's the state of the\nart on parallelization MD.",
    "start": "1375230",
    "end": "1378910"
  },
  {
    "text": "And it's implemented\nin this program called",
    "start": "1378910",
    "end": "1381260"
  },
  {
    "text": "NAMD, which stands for Not\nAnother Molecular Dynamics",
    "start": "1381260",
    "end": "1385340"
  },
  {
    "text": "simulator.",
    "start": "1385340",
    "end": "1386600"
  },
  {
    "text": "So initially, NAMD 1.0 used\nsolely a spatial decomposition.",
    "start": "1386600",
    "end": "1392630"
  },
  {
    "text": "And they try to address\nthis load balancing",
    "start": "1392630",
    "end": "1394472"
  },
  {
    "text": "by actually creating many\nmore patches than you",
    "start": "1394472",
    "end": "1396430"
  },
  {
    "text": "have processors.",
    "start": "1396430",
    "end": "1398870"
  },
  {
    "text": "And then you just sort of\nsplit these patches up,",
    "start": "1398870",
    "end": "1402260"
  },
  {
    "text": "load balance them amongst\nthe different processors.",
    "start": "1402260",
    "end": "1404650"
  },
  {
    "text": "That didn't really work.",
    "start": "1404650",
    "end": "1405650"
  },
  {
    "text": "So NAMD 1 didn't\nparallelize very well.",
    "start": "1405650",
    "end": "1408100"
  },
  {
    "text": "So what they added\nlater was they",
    "start": "1408100",
    "end": "1410580"
  },
  {
    "text": "added this idea\nof patch objects,",
    "start": "1410580",
    "end": "1413130"
  },
  {
    "text": "and also compute objects.",
    "start": "1413130",
    "end": "1414610"
  },
  {
    "text": "So basically a patch\nobject puts a number",
    "start": "1414610",
    "end": "1418710"
  },
  {
    "text": "of patches on a\nprocessor, but then you",
    "start": "1418710",
    "end": "1420346"
  },
  {
    "text": "can also create compute\npatches, which include",
    "start": "1420346",
    "end": "1423549"
  },
  {
    "text": "all of these force operations.",
    "start": "1423550",
    "end": "1425450"
  },
  {
    "text": "And these force operations\nare also equally distributed",
    "start": "1425450",
    "end": "1427760"
  },
  {
    "text": "amongst processors.",
    "start": "1427760",
    "end": "1428680"
  },
  {
    "text": "And then there's a\nlot communication",
    "start": "1428680",
    "end": "1430180"
  },
  {
    "text": "between these two.",
    "start": "1430180",
    "end": "1431030"
  },
  {
    "text": "And it started off with sort\nmessage oriented communication.",
    "start": "1431030",
    "end": "1436410"
  },
  {
    "text": "Then it moved to a dependency\noriented communication",
    "start": "1436410",
    "end": "1439330"
  },
  {
    "text": "so that each compute\nobject would sort",
    "start": "1439330",
    "end": "1441809"
  },
  {
    "text": "of signal which atoms it needs.",
    "start": "1441810",
    "end": "1445760"
  },
  {
    "text": "And it also sort\nof optimized things",
    "start": "1445760",
    "end": "1449306"
  },
  {
    "text": "by doing communication and force\ncomputation at the same time.",
    "start": "1449306",
    "end": "1452770"
  },
  {
    "text": "So it did that really well.",
    "start": "1452770",
    "end": "1454160"
  },
  {
    "text": "And actually it had really\ngood parallel performance.",
    "start": "1454160",
    "end": "1457170"
  },
  {
    "text": "So on this graph it shows\nthe number of processors",
    "start": "1457170",
    "end": "1461450"
  },
  {
    "text": "times the time per time step.",
    "start": "1461450",
    "end": "1463559"
  },
  {
    "text": "And as the number of\nprocessors is increased,",
    "start": "1463560",
    "end": "1468800"
  },
  {
    "text": "I mean optimal\nparallel performance",
    "start": "1468800",
    "end": "1470290"
  },
  {
    "text": "would be a straight horizontal\nline, which is pretty",
    "start": "1470290",
    "end": "1473040"
  },
  {
    "text": "close to what they achieve.",
    "start": "1473040",
    "end": "1474520"
  },
  {
    "text": "And they also did it on\nmany thousands of processors",
    "start": "1474520",
    "end": "1476830"
  },
  {
    "text": "on Blue Gene.",
    "start": "1476830",
    "end": "1477519"
  },
  {
    "text": "But as you might expect,\nthe more processors",
    "start": "1477520",
    "end": "1480080"
  },
  {
    "text": "you add, the step time actually\nstill sort of levels off",
    "start": "1480080",
    "end": "1484600"
  },
  {
    "text": "at a certain time.",
    "start": "1484600",
    "end": "1486289"
  },
  {
    "text": "So I guess I'll skip the sort\nof live demo I was going to do,",
    "start": "1486290",
    "end": "1490864"
  },
  {
    "text": "but I'll just show\none more thing.",
    "start": "1490864",
    "end": "1492280"
  },
  {
    "start": "1492280",
    "end": "1495930"
  },
  {
    "text": "So here is sort of the kind of\nsystems that I was looking at.",
    "start": "1495930",
    "end": "1500494"
  },
  {
    "text": "This is actually\na simulation that",
    "start": "1500494",
    "end": "1501910"
  },
  {
    "text": "was done on one of the\nPPUs and then recorded",
    "start": "1501910",
    "end": "1505560"
  },
  {
    "text": "in positions file.",
    "start": "1505560",
    "end": "1507060"
  },
  {
    "text": "And there is five\ndifferent molecules here.",
    "start": "1507060",
    "end": "1513610"
  },
  {
    "text": "So generally, what happens\nis first they're just",
    "start": "1513610",
    "end": "1515640"
  },
  {
    "text": "placed randomly.",
    "start": "1515640",
    "end": "1516460"
  },
  {
    "text": "Then they're an overlap\njust very coarsely,",
    "start": "1516460",
    "end": "1518700"
  },
  {
    "text": "to make sure that\nhuge forces are not",
    "start": "1518700",
    "end": "1522360"
  },
  {
    "text": "entered into the system.",
    "start": "1522360",
    "end": "1523507"
  },
  {
    "text": "And I'll just color\neach one differently.",
    "start": "1523507",
    "end": "1525215"
  },
  {
    "start": "1525215",
    "end": "1527799"
  },
  {
    "text": "So here's what happens\nduring the simulation.",
    "start": "1527800",
    "end": "1530960"
  },
  {
    "text": "And here, in this simulation,\nactually, the positions",
    "start": "1530960",
    "end": "1538309"
  },
  {
    "text": "were recorded every\n20 time steps.",
    "start": "1538310",
    "end": "1540460"
  },
  {
    "text": "So that's why it sort of\nseems to go a lot faster.",
    "start": "1540460",
    "end": "1544070"
  },
  {
    "text": "If I did it on a\nsingle molecule,",
    "start": "1544070",
    "end": "1546646"
  },
  {
    "text": "I actually done that first.",
    "start": "1546646",
    "end": "1548385"
  },
  {
    "text": "So here what a single\nmolecule of this looks like.",
    "start": "1548385",
    "end": "1550630"
  },
  {
    "text": "And this is a protein with eight\nresidues, which is pretty big.",
    "start": "1550630",
    "end": "1554130"
  },
  {
    "text": "And this is running in real\ntime on my computer right now.",
    "start": "1554130",
    "end": "1556680"
  },
  {
    "text": "So like on a small system like\nthis, it runs reasonably fast.",
    "start": "1556680",
    "end": "1563020"
  },
  {
    "text": "But as you add more and\nmore of these things,",
    "start": "1563020",
    "end": "1566630"
  },
  {
    "text": "the computations do\nget pretty expensive.",
    "start": "1566630",
    "end": "1568700"
  },
  {
    "text": "So parallelization really helps.",
    "start": "1568700",
    "end": "1572929"
  },
  {
    "text": "Well, not in what I\nimplemented, but generally.",
    "start": "1572930",
    "end": "1576634"
  },
  {
    "text": "Generally, as you saw, NAMD\ncan do a pretty good job",
    "start": "1576634",
    "end": "1579990"
  },
  {
    "text": "at doing it.",
    "start": "1579990",
    "end": "1582104"
  },
  {
    "text": "Oh OK, I didn't minimize\nthe system well enough.",
    "start": "1582104",
    "end": "1585400"
  },
  {
    "text": "But yeah, that's about it.",
    "start": "1585400",
    "end": "1587524"
  },
  {
    "text": "AUDIENCE: Great. [INAUDIBLE]",
    "start": "1587524",
    "end": "1588690"
  },
  {
    "start": "1588690",
    "end": "1595549"
  },
  {
    "text": "AUDIENCE: So\nbasically, on the SPUs,",
    "start": "1595550",
    "end": "1597510"
  },
  {
    "text": "you managed to get them\nsynchronized properly, data in",
    "start": "1597510",
    "end": "1600940"
  },
  {
    "text": "and data out?",
    "start": "1600940",
    "end": "1602372"
  },
  {
    "text": "GREG PINTILIE: Yeah, exactly.",
    "start": "1602372",
    "end": "1603580"
  },
  {
    "text": "So that's kind of to\nthe extent that I went.",
    "start": "1603580",
    "end": "1605537"
  },
  {
    "text": "And that still took a long time.",
    "start": "1605537",
    "end": "1606870"
  },
  {
    "text": "So [INAUDIBLE].",
    "start": "1606870",
    "end": "1608670"
  },
  {
    "start": "1608670",
    "end": "1609630"
  }
]