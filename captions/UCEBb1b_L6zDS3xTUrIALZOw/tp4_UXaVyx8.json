[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": " The following\ncontent is provided under a Creative\nCommons license. Your support will help MIT\nOpenCourseWare continue",
    "start": "0",
    "end": "6860"
  },
  {
    "text": "to offer high quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6860",
    "end": "13330"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13330",
    "end": "27322"
  },
  {
    "text": "PROFESSOR: Today's\nour last lecture on dynamic programming,\nthe grand finale. And we have a bunch of fun\nexamples today on piano,",
    "start": "27322",
    "end": "35550"
  },
  {
    "text": "guitar, Tetris and\nSuper Mario Brothers. What could be better?",
    "start": "35550",
    "end": "42090"
  },
  {
    "text": "We are, again, going to\nfollow this five-step plan to dynamic programming, define\nsub-problems, guess something",
    "start": "42090",
    "end": "48260"
  },
  {
    "text": "in order to solve a sub-problem,\nwrite a recurrence that uses that guessing to relate\ndifferent sub-problems,",
    "start": "48260",
    "end": "53920"
  },
  {
    "text": "then build your dynamic\nprogramming either by just implementing as\na recursive algorithm and memorizing or\nbuilding it bottom up.",
    "start": "53920",
    "end": "61940"
  },
  {
    "text": "For the first, you need to check\nwith the recurrence is acyclic. For the second, you need an\nactual topological order.",
    "start": "61940",
    "end": "68020"
  },
  {
    "text": "These are, of course,\nequivalent constraints. Personally, I like to write\ndown on topological order",
    "start": "68020",
    "end": "73219"
  },
  {
    "text": "because that proves to\nme that it is acyclic, if I think about it. But either way is fine.",
    "start": "73220",
    "end": "79955"
  },
  {
    "text": "Then we get that the\ntotal running time is number of sub-problems\ntimes time per sub-problems, and then we need to solve\nour original problem.",
    "start": "79955",
    "end": "86250"
  },
  {
    "text": "Usually it's just one\nof the sub-problems, but sometimes we have to\nlook at a few of them. So that's what\nwe're going to do.",
    "start": "86250",
    "end": "92430"
  },
  {
    "text": "And we have one\nnew concept today that all these examples\nwill illustrate,",
    "start": "92430",
    "end": "98200"
  },
  {
    "text": "which is a kind of\nsecond kind of guessing. We've talked about\nguessing in part two",
    "start": "98200",
    "end": "104270"
  },
  {
    "text": "here in which we saw\nthe obvious thing. In the recurrence, we\nusually take the min of a bunch of options or the\nmax of a bunch of options.",
    "start": "104270",
    "end": "111830"
  },
  {
    "text": "And those options correspond\nto a guessed feature. We don't know whether\nthe go left or go right, so we try them both.",
    "start": "111830",
    "end": "117493"
  },
  {
    "text": "That's guessing. But there's another\nway to guess. So two kinds of guessing.",
    "start": "117493",
    "end": "131640"
  },
  {
    "start": "120000",
    "end": "325000"
  },
  {
    "start": "131640",
    "end": "137590"
  },
  {
    "text": "So you can do it in step two. Let's see what I have\nto say about these.",
    "start": "137590",
    "end": "143084"
  },
  {
    "text": " In step two and three,\nyou are guessing usually",
    "start": "143085",
    "end": "156270"
  },
  {
    "text": "which sub-problems\nto use in order to solve your\nbigger sub-problem.",
    "start": "156270",
    "end": "164140"
  },
  {
    "start": "164140",
    "end": "170470"
  },
  {
    "text": "So that's what we've seen\nmany, many times by now. Every DP that we've covered\nexcept for Fibonacci numbers",
    "start": "170470",
    "end": "175940"
  },
  {
    "text": "has used this kind of guessing. And it's sort of the most\ncommon, I guess you might say.",
    "start": "175940",
    "end": "180980"
  },
  {
    "text": "But there's a higher\nlevel of guessing that you can use, which\nwe've sort of seen in the knapsack dynamic\nprogramming, dynamic program,",
    "start": "180980",
    "end": "189200"
  },
  {
    "text": "which is when you define your\nsub-problems, you can add more. ",
    "start": "189200",
    "end": "201140"
  },
  {
    "text": "Add more sub-problems to\nguess or you can think of it",
    "start": "201140",
    "end": "206350"
  },
  {
    "text": "as remembering more\nfeatures of the solution. ",
    "start": "206350",
    "end": "218820"
  },
  {
    "text": "And we just leave it at that.  Essentially what this does--\nso remember with knapsack,",
    "start": "218820",
    "end": "229400"
  },
  {
    "text": "we had a sequence of items. They had values and sizes.",
    "start": "229400",
    "end": "234459"
  },
  {
    "text": "And we had some target\nknapsack, some capacity. We wanted to pack those\nitems into that knapsack. And the obvious sub-problems\nwere suffixes of the items.",
    "start": "234460",
    "end": "242370"
  },
  {
    "text": "Because we always know\nsuffixes, prefixes, substrings, those are the obvious\nthings to try. But suffixes wasn't\nquite enough.",
    "start": "242370",
    "end": "247970"
  },
  {
    "text": "Because if we\nlooked at a suffix, we didn't know of\nthe prefix that we've skipped over how\nmany of those items",
    "start": "247970",
    "end": "254250"
  },
  {
    "text": "were in-- and in particular,\nhow much of the capacity we'd used up. And so we needed to\nadd more sub-problems",
    "start": "254251",
    "end": "259430"
  },
  {
    "text": "to remember how much capacity\nhad we used up in the prefix. We did that by multiplying\nevery sub-problem",
    "start": "259430",
    "end": "265610"
  },
  {
    "text": "by s different choices, which is\nhow many units of the knapsack",
    "start": "265610",
    "end": "272189"
  },
  {
    "text": "still remain. So in some sense,\nwe're remembering more about the prefix.",
    "start": "272190",
    "end": "277460"
  },
  {
    "text": "You can also think of it as--\nin the more forward direction, we have the suffix problem.",
    "start": "277460",
    "end": "282479"
  },
  {
    "text": "I'm going to solve\nit s different times, or s plus 1 different times. I'm going to solve it. What if I had a big knapsack?",
    "start": "282480",
    "end": "287815"
  },
  {
    "text": "What if I had a\nsmaller knapsack? What if I had a\nzero-size knapsack? All of those different\nversions of the problem.",
    "start": "287816",
    "end": "293130"
  },
  {
    "text": "In some sense, you were\nsolving more sub-problems. You're, in some, sense\nfinding more solutions",
    "start": "293130",
    "end": "299330"
  },
  {
    "text": "to that sub-problem. You're looking at a suffix. And I want to know all these\ndifferent solutions that",
    "start": "299330",
    "end": "304750"
  },
  {
    "text": "use different amounts\nof the knapsack. So in that sense, you're just\nadding more sub-problems.",
    "start": "304750",
    "end": "309909"
  },
  {
    "text": "But from a guessing\nperspective, you're remembering more about the past. We're going to see a bunch of\nexamples of this type today.",
    "start": "309910",
    "end": "316220"
  },
  {
    "text": "We'll always use\nthis type, but we'll see more of this where the\nobvious sub-problems don't work",
    "start": "316220",
    "end": "323230"
  },
  {
    "text": "and we need to add more. So the first example is\npiano and guitar fingering.",
    "start": "323230",
    "end": "333080"
  },
  {
    "start": "325000",
    "end": "600000"
  },
  {
    "text": " This is a practical problem for\nany musicians in the audience.",
    "start": "333080",
    "end": "342940"
  },
  {
    "text": "How many people here play\npiano, or have played piano? OK, about a quarter. How many people\nhave played guitar?",
    "start": "342940",
    "end": "349740"
  },
  {
    "text": "A few, all right. I brought my guitar. I've been learning\nthis semester. I'm not very good yet,\nbut we'll fool around",
    "start": "349740",
    "end": "356320"
  },
  {
    "text": "with it a little bit. So the general idea is you're\ngiven some musical piece",
    "start": "356320",
    "end": "363553"
  },
  {
    "text": "that you want to play. And on a piano, there's\na bunch of keys. You have all these\nkeyboards, so you",
    "start": "363553",
    "end": "369479"
  },
  {
    "text": "know what a piano looks\nlike, more or less. It's just like a\nkeyboard, but only row. It's crazy. ",
    "start": "369480",
    "end": "376910"
  },
  {
    "text": "Each key that you\npress makes a note, and every key has\na different note. So it's very simple from\na computer scientist's",
    "start": "376910",
    "end": "383900"
  },
  {
    "text": "perspective. You want to play a\nnote, you push the key. But you could push it with\nany one of these fingers.",
    "start": "383900",
    "end": "389630"
  },
  {
    "text": "Humans have 10 fingers. Most humans. I guess a few have more. But you want to know,\nwhich finger should I",
    "start": "389630",
    "end": "397800"
  },
  {
    "text": "use to play each note? It may not seem like a big deal. And if you're only playing\none note, it's not a big deal.",
    "start": "397800",
    "end": "403139"
  },
  {
    "text": "But if you're going to play\na long sequence of notes, some transitions are\neasier than others.",
    "start": "403140",
    "end": "408760"
  },
  {
    "text": "So let's say we're given\na sequence of n notes",
    "start": "408760",
    "end": "415620"
  },
  {
    "text": "we want to play. And we want to find a\nfingering for each note.",
    "start": "415620",
    "end": "427060"
  },
  {
    "start": "427060",
    "end": "432100"
  },
  {
    "text": "So fingering, so let's\nsay there are-- I'm going to label the fingers\non your hand, 1 up to f.",
    "start": "432100",
    "end": "441540"
  },
  {
    "text": "For humans, f is\n5 or 10, depending on if you're doing one\nhand or two hand stuff.",
    "start": "441540",
    "end": "447480"
  },
  {
    "text": "I think to keep it simple, let's\nthink about piano, right hand",
    "start": "447480",
    "end": "453040"
  },
  {
    "text": "only, and just you're playing\none note at the time, OK? We're going to make it\nmore complicated later.",
    "start": "453040",
    "end": "458320"
  },
  {
    "text": "But let's just think of a\nnote as being a single note. ",
    "start": "458320",
    "end": "464816"
  },
  {
    "text": "OK, or you can think of\nguitar, single note, left hand is playing things.",
    "start": "464816",
    "end": "470590"
  },
  {
    "text": "You want to assign one of\nthese fingers to each node. And then you have a\ndifficulty measure, d.",
    "start": "470590",
    "end": "484870"
  },
  {
    "text": "And this you need to\nthink about for awhile musically, or anatomically,\nhow to define.",
    "start": "484870",
    "end": "492620"
  },
  {
    "text": "If we have some note p\nand we're on finger f and we want to transition\nto note q using figure g,",
    "start": "492620",
    "end": "500980"
  },
  {
    "text": "how hard is that? So this is-- the p and\nq are notes to play.",
    "start": "500980",
    "end": "508280"
  },
  {
    "text": "I guess p stands for pitch. And f and g are fingers.",
    "start": "508280",
    "end": "514400"
  },
  {
    "text": "So this is how hard is it\nto transition from f on p to g on q.",
    "start": "514400",
    "end": "520469"
  },
  {
    "text": " There's a huge\nliterature on for piano.",
    "start": "520470",
    "end": "527960"
  },
  {
    "text": "There are a lot of\nrules like, well, if p is much smaller than\nq, unless they're stretched,",
    "start": "527960",
    "end": "535420"
  },
  {
    "text": "then that becomes hard. And if you want to\nstretch, you probably",
    "start": "535420",
    "end": "540520"
  },
  {
    "text": "need to use fingers that are\nfar away from each other. If your playing legato-- so you\nhave to smoothly go from one",
    "start": "540520",
    "end": "547459"
  },
  {
    "text": "note the other-- you can't use\nthe same finger on both keys. So if f equals g and\nyou're playing legato,",
    "start": "547460",
    "end": "553950"
  },
  {
    "text": "then p better be the\nsame as q sort of thing. ",
    "start": "553950",
    "end": "560166"
  },
  {
    "text": "There's a weak finger rule. You tend to avoid fingers\nfour and five, these two.",
    "start": "560166",
    "end": "565730"
  },
  {
    "text": "Apparently going from-- I'm\nnot much of a pianist-- so going from between\nthree and four,",
    "start": "565730",
    "end": "571547"
  },
  {
    "text": "which I can barely hold them\nup, it's kind of difficult, is \"annoying.\" That's what I wrote down.",
    "start": "571547",
    "end": "576880"
  },
  {
    "text": "So between three and four\ntransitions you try and avoid. And so you can encode\ninto this function.",
    "start": "576880",
    "end": "582209"
  },
  {
    "text": "It's a giant table. You can just put\nin whatever values you want that you're\nmost comfortable with. And music theorists\nwork a lot on trying",
    "start": "582210",
    "end": "588940"
  },
  {
    "text": "to define these function so. So you can do that. And for guitar, maybe I\nshould do a little example.",
    "start": "588940",
    "end": "598736"
  },
  {
    "text": "Get this out. I can't play much,\nso bear with me.",
    "start": "598736",
    "end": "604605"
  },
  {
    "start": "600000",
    "end": "695000"
  },
  {
    "text": " Bet you didn't think\nthis would happen in 006.",
    "start": "604605",
    "end": "609900"
  },
  {
    "text": "[LAUGHTER] So let's see.",
    "start": "609900",
    "end": "615100"
  },
  {
    "text": "So let's say you're trying\nto play your favorite song. [STRUMS \"SUPER MARIO BROTHERS\"\n THEME]",
    "start": "615100",
    "end": "620484"
  },
  {
    "text": "[LAUGHTER] OK. So when I'm playing that, I have\nto think about the fingering.",
    "start": "620484",
    "end": "626529"
  },
  {
    "text": "Which finger is going to\ngo where to play each note? OK, so the first notes\nare actually open,",
    "start": "626530",
    "end": "631920"
  },
  {
    "text": "so it's really easy. And then I go up to holding the\nfirst fret on the fifth string.",
    "start": "631920",
    "end": "640730"
  },
  {
    "text": "OK, and I'm using my index\nfinger because everyone loves to use their index finger. And in particular because\nthe very next note",
    "start": "640730",
    "end": "648010"
  },
  {
    "text": "I'm going to play-- well,\nactually it's down here. Then the next note is\ngoing to be this one.",
    "start": "648010",
    "end": "653639"
  },
  {
    "text": "So I'm holding on the third\nfret of the bottom string. And then I've got to\ntransition over here.",
    "start": "653640",
    "end": "659769"
  },
  {
    "text": "And actually, usually I do\nit with my middle finger. I don't know quite why I\nfind that easier, but I do.",
    "start": "659770",
    "end": "665553"
  },
  {
    "text": "OK, and so I've actually\nplayed that opening a zillion times with lots of\ndifferent things.",
    "start": "665553",
    "end": "671230"
  },
  {
    "text": "This is the one I found to\nbe the most comfortable. And there's this issue, right? If your pinky is here, where\ncan I reach with this finger?",
    "start": "671230",
    "end": "677150"
  },
  {
    "text": "Where can I reach\nwith this finger? It gets difficult. And in particular,\nit's very hard for me to reach down here\nwhen my pink is there.",
    "start": "677150",
    "end": "685440"
  },
  {
    "text": "And so you can encode\nthat in this d function however you want. You get the idea.",
    "start": "685440",
    "end": "693037"
  },
  {
    "text": "[APPLAUSE] Thanks. I'll skip to our lessons.\n[? We're ?] [? worth ?]",
    "start": "693038",
    "end": "699540"
  },
  {
    "start": "695000",
    "end": "975000"
  },
  {
    "text": "[? it. ?] So let's solve this\nwith dynamic programming, OK?",
    "start": "699540",
    "end": "706350"
  },
  {
    "text": "That's the cool thing. So we can do it. And we follow our\nfive step procedure.",
    "start": "706350",
    "end": "714450"
  },
  {
    "text": "So the first thing is\nto define sub-problems. What are the sub-problems\nfor a set-up like this?",
    "start": "714450",
    "end": "719530"
  },
  {
    "start": "719530",
    "end": "724710"
  },
  {
    "text": "What are the three\nobvious candidates? ",
    "start": "724710",
    "end": "740990"
  },
  {
    "text": "Do you remember last lecture? ",
    "start": "740990",
    "end": "747367"
  },
  {
    "text": "How many people know the answer? Just checking. ",
    "start": "747367",
    "end": "752544"
  },
  {
    "text": "One person. Go for it. AUDIENCE: Prefixes,\nsuffixes, and substrings. PROFESSOR: Right.",
    "start": "752544",
    "end": "757970"
  },
  {
    "text": "Prefixes, suffixes,\nand substrings. We have a sequence of notes. We're not going to worry\nabout the sequence of fingers. I don't think that's\ntoo big a deal.",
    "start": "757970",
    "end": "764529"
  },
  {
    "text": "That's what we're finding. What we're given is\na sequence of notes, so we should try suffixes,\nprefixes, or substrings.",
    "start": "764530",
    "end": "770530"
  },
  {
    "text": "I'll just tell you,\nsuffixes are fine. Kind of.",
    "start": "770530",
    "end": "775690"
  },
  {
    "text": "So a sub-problem\nwill be suffixes,",
    "start": "775690",
    "end": "781500"
  },
  {
    "text": "so how to play notes\nfrom i onwards.",
    "start": "781500",
    "end": "790440"
  },
  {
    "text": "Intuitively, we\nwant to figure out, how should we play\nthe first note? And then we go on to the\nsecond note and so on.",
    "start": "790440",
    "end": "795740"
  },
  {
    "text": "So we're applying\nthem one by one from left to right\nfrom the prefix side. And so we'll always\nbe left with a suffix.",
    "start": "795740",
    "end": "802040"
  },
  {
    "text": " OK, then we need\nto guess something.",
    "start": "802040",
    "end": "808340"
  },
  {
    "text": "What's the obvious\nthing to guess, given I need to\nplay notes i onward? ",
    "start": "808340",
    "end": "816315"
  },
  {
    "text": "Think little harder. This one you shouldn't\nhave to think. That's what I tell you.",
    "start": "816315",
    "end": "823079"
  },
  {
    "text": "Try suffixes, try\nprefixes, try substrings. ",
    "start": "823080",
    "end": "835121"
  },
  {
    "text": "Yeah? AUDIENCE: Maybe which\nfinger to just put around i? PROFESSOR: Yeah, which we're\ngoing to use for note i.",
    "start": "835121",
    "end": "840330"
  },
  {
    "text": "Our whole point is\nto assign fingering. The first note here is i. So let's think about i,\nwhat could you do for i?",
    "start": "840330",
    "end": "846089"
  },
  {
    "text": "We'll try all the possibilities. Which finger to use for note i?",
    "start": "846090",
    "end": "854660"
  },
  {
    "text": " OK, now the really hard part--\nbecause it's impossible--",
    "start": "854660",
    "end": "862680"
  },
  {
    "text": "is to write a recurrence. This is wrong, by the way, but\nit's the first thing to try.",
    "start": "862680",
    "end": "868936"
  },
  {
    "text": "So this is what\nI want to ask you to do because it's not possible. But intuitively, what\nwe might try to do",
    "start": "868936",
    "end": "874060"
  },
  {
    "text": "is we're trying\nto solve DP for i. And we want to find--\nthis is difficulty,",
    "start": "874060",
    "end": "880110"
  },
  {
    "text": "so you want to\nminimize difficulty. So we'll take a min\nover all of our guesses",
    "start": "880110",
    "end": "885550"
  },
  {
    "text": "of what it would take to\nsolve the rest of the notes,",
    "start": "885550",
    "end": "890730"
  },
  {
    "text": "to play the rest of the\nnotes, plus somehow the cost of playing the first note.",
    "start": "890730",
    "end": "896639"
  },
  {
    "text": "So what's the cost of\nplaying the first note? And then is going to be\na for loop over fingers.",
    "start": "896640",
    "end": "901770"
  },
  {
    "text": " OK, that's going to be the min.",
    "start": "901770",
    "end": "906940"
  },
  {
    "text": "We want to try all possible\nfingers for note i. Then we have to play\nall the remaining notes.",
    "start": "906940",
    "end": "913700"
  },
  {
    "text": "And then there's\nthis transition cost where you're going from\nnote i to i plus 1. So it's going to\nbe something like d",
    "start": "913700",
    "end": "919470"
  },
  {
    "text": "of if-- we know that we use\nfinger f to play i-- then we have to go to note i plus 1.",
    "start": "919470",
    "end": "925720"
  },
  {
    "text": "But then the problem is we have\nno idea what to write here, because we don't know\nwhat finger we're going to guess\nfor note i plus 1.",
    "start": "925720",
    "end": "934200"
  },
  {
    "text": "So this cannot be known. OK, but it's the\nfirst thing you should",
    "start": "934200",
    "end": "941470"
  },
  {
    "text": "try, because often this works. For simple DPs, that's\nenough for sub-problems.",
    "start": "941470",
    "end": "947320"
  },
  {
    "text": "But we need to know\nmore information about what we're\ngoing to do next. And this seems very\nworrisome, maybe",
    "start": "947320",
    "end": "954120"
  },
  {
    "text": "now we have to guess two things. Do we have to guess\nmore than two things? Turns out two things is enough.",
    "start": "954120",
    "end": "959210"
  },
  {
    "text": "But we cannot use\nthis type of guessing. We need to use-- we need\nto add more sub-problems.",
    "start": "959210",
    "end": "965000"
  },
  {
    "text": "More sub-problem, more power. So any guesses what we\ncould do for sub-problem?",
    "start": "965000",
    "end": "972850"
  },
  {
    "text": " A couple of right answers here. ",
    "start": "972850",
    "end": "983485"
  },
  {
    "start": "975000",
    "end": "1090000"
  },
  {
    "text": "Yeah? AUDIENCE: Maybe like all\nthe suffixes [INAUDIBLE]",
    "start": "983485",
    "end": "988820"
  },
  {
    "text": "like the i, for all written i's,\nlike all the possible fingers for i? PROFESSOR: All the\npossible fingers",
    "start": "988820",
    "end": "995010"
  },
  {
    "text": "for i in the sub-problem. Yeah, good. How to play-- it's still\nabout the suffixes.",
    "start": "995010",
    "end": "1003781"
  },
  {
    "text": "We're still going to use that. ",
    "start": "1003781",
    "end": "1012709"
  },
  {
    "text": "But we're going to\nsuppose we already know what finger to use\nfor the first note, note i.",
    "start": "1012709",
    "end": "1022230"
  },
  {
    "text": "OK, this is a little weird,\nbecause we were guessing that before. Now we're just\nsupposing someone tells",
    "start": "1022230",
    "end": "1027589"
  },
  {
    "text": "us, use finger f for that note. This will work.",
    "start": "1027589",
    "end": "1032869"
  },
  {
    "text": "That's the one I had in mind. But the question becomes,\nwhat should we guess? ",
    "start": "1032869",
    "end": "1041329"
  },
  {
    "text": "Anyone else? You clearly get\n[? a pillow. ?] I don't know how many\nyou have by now. Have another one.",
    "start": "1041329",
    "end": "1048170"
  },
  {
    "text": "That's tough. This is not easy to figure out. ",
    "start": "1048170",
    "end": "1053377"
  },
  {
    "text": "Now, given that that's\nour sub-problem, what is the next thing to guess? ",
    "start": "1053377",
    "end": "1066844"
  },
  {
    "text": "Do you have an idea? AUDIENCE: I got an\nidea to define it. Like either the next or\nprevious finger for the-- PROFESSOR: The next\nor previous finger.",
    "start": "1066844",
    "end": "1073070"
  },
  {
    "text": "Well, I'm looking at suffixes. So I only care\nabout the next one. Yeah. ",
    "start": "1073070",
    "end": "1079504"
  },
  {
    "text": "I see what you mean\nby next or previous. But what we mean\nis note i plus 1, that's the next thing\nwe don't know about.",
    "start": "1079504",
    "end": "1085259"
  },
  {
    "text": "So we're going to\nguess finger-- we'll call it g-- for note i plus 1.",
    "start": "1085260",
    "end": "1092600"
  },
  {
    "start": "1090000",
    "end": "1280000"
  },
  {
    "text": " And now magically,\nthis recurrence",
    "start": "1092600",
    "end": "1099750"
  },
  {
    "text": "becomes easy to write. So it's almost the same thing. ",
    "start": "1099750",
    "end": "1108090"
  },
  {
    "text": "I wish I could just copy and\npaste this over, but I can't. It's not a digital blackboard.",
    "start": "1108090",
    "end": "1115580"
  },
  {
    "text": "Are there digital blackboards? That would be cool. Someone should make that.",
    "start": "1115580",
    "end": "1121140"
  },
  {
    "text": "I don't know why switched from\nopen parens to square brackets, but I did. Then we have-- I think it's just\nthe obvious thing, if i plus 1",
    "start": "1121140",
    "end": "1131601"
  },
  {
    "text": "g. Ahh, this is a\nslightly wrong, though. It's a copy paste error.",
    "start": "1131601",
    "end": "1137050"
  },
  {
    "text": "This should really\nbe DP of i comma f, because now sub-problem\nconsists of two things-- which",
    "start": "1137050",
    "end": "1143020"
  },
  {
    "text": "suffix am I in, and what's\nmy finger for note I? And so when I call DP, I also\nhave to provide two arguments.",
    "start": "1143020",
    "end": "1151290"
  },
  {
    "text": "It's going to be DP\nof i plus 1 comma g. And then I'm looping over g.",
    "start": "1151290",
    "end": "1157630"
  },
  {
    "text": "I'm trying all\npossibilities for g. ",
    "start": "1157630",
    "end": "1164920"
  },
  {
    "text": "That's the recurrence. So if I want starting\nwith finger f on note i,",
    "start": "1164920",
    "end": "1170870"
  },
  {
    "text": "how do I solve\nthe suffix from i? Well, I guess what\nfinger am I going",
    "start": "1170870",
    "end": "1176110"
  },
  {
    "text": "to use for the very next note. Then I have to pay this\ntransition cost for f on i",
    "start": "1176110",
    "end": "1182650"
  },
  {
    "text": "to g on i plus 1. ",
    "start": "1182650",
    "end": "1188746"
  },
  {
    "text": "Yeah, OK. So slightly, I'm cheating\nthe notation here. This probably should be\nthe note, what is note i,",
    "start": "1188746",
    "end": "1198730"
  },
  {
    "text": "and this thing should be\nwhat is note i plus 1. ",
    "start": "1198730",
    "end": "1204320"
  },
  {
    "text": "If you think of this d\nfunction just being given notes, pitches that\nyou need to play, instead of indices\ninto the array.",
    "start": "1204320",
    "end": "1211235"
  },
  {
    "text": "It doesn't really matter, but\nthat's how I defined it before. OK, so I have to pay\nthis transition cost.",
    "start": "1211235",
    "end": "1216540"
  },
  {
    "text": "What does it take to make that\ntransition from i to i plus 1? And then what does it take to\ndo the rest of the notes, given",
    "start": "1216540",
    "end": "1224480"
  },
  {
    "text": "that now my finger is-- or now\nfinger g is playing the note i plus 1?",
    "start": "1224480",
    "end": "1230309"
  },
  {
    "text": "So we transition from\nf to g, and that's now kept track of in\nthe sub-problem. This is the magic of\ndefining more sub-problem.",
    "start": "1230310",
    "end": "1237640"
  },
  {
    "text": "We needed to know where\nour finger used to be. And now we're telling it,\noh, your finger right now is finger f.",
    "start": "1237640",
    "end": "1244120"
  },
  {
    "text": "Finger f is the one that's\ncurrently playing the note. And then afterwards, g is\nthe finger that's currently playing the note, and we\ncan keep track of that.",
    "start": "1244120",
    "end": "1250960"
  },
  {
    "text": "You could also define\nthis to say, oh, f was the finger that was\nused for the previous note, note i minus 1.",
    "start": "1250960",
    "end": "1256940"
  },
  {
    "text": "But it's just a shifting\nof the indices here. You can do i minus 1 to i\ninstead of i to i plus 1.",
    "start": "1256940",
    "end": "1264730"
  },
  {
    "text": "But this is, I think,\nslightly cleaner.  OK, and then we\nhave a DP, right?",
    "start": "1264730",
    "end": "1271310"
  },
  {
    "text": "We've just memoized\nthat recurrence. We get a recursive DP, or\nyou could build it bottom up.",
    "start": "1271310",
    "end": "1276324"
  },
  {
    "text": "If you were building\nit bottom up, you'd want to know\na topological order. ",
    "start": "1276324",
    "end": "1282650"
  },
  {
    "start": "1280000",
    "end": "1405000"
  },
  {
    "text": "And this requires a\nlittle bit of care because there's two parameters. And so it's going\nto be a for loop",
    "start": "1282650",
    "end": "1288290"
  },
  {
    "text": "over those two\nparameters in some order. And I believe the\nright order is for i",
    "start": "1288290",
    "end": "1293980"
  },
  {
    "text": "has to go from right to left\nbecause this is suffixes. So I would write reversed range\nn python if there are n notes.",
    "start": "1293980",
    "end": "1306260"
  },
  {
    "text": "And then within that loop, I\nwould do a for loop over f. ",
    "start": "1306260",
    "end": "1312557"
  },
  {
    "text": "If you reverse the order\nof these for loops, it would not be in the right\norder, I'm pretty sure. But this one will work.",
    "start": "1312557",
    "end": "1318740"
  },
  {
    "text": "You can check it. And then to solve our\noriginal problem, here",
    "start": "1318740",
    "end": "1327130"
  },
  {
    "text": "we require a little\nmore work because none",
    "start": "1327130",
    "end": "1333480"
  },
  {
    "text": "of these sub-problems\nare what we want to solve because we don't\nknow what the first finger is.",
    "start": "1333480",
    "end": "1339899"
  },
  {
    "text": "We know what the first note is. That's note 0. But what finger goes there? I don't know.",
    "start": "1339899",
    "end": "1344980"
  },
  {
    "text": "And DP of 0 requires\nus to give it a finger.",
    "start": "1344980",
    "end": "1350780"
  },
  {
    "text": "Give it the finger, ha. Give it the finger for\nwhatever is the first note.",
    "start": "1350780",
    "end": "1356990"
  },
  {
    "text": "So this is pretty easy though. We just take a min\nover those choices. ",
    "start": "1356990",
    "end": "1363390"
  },
  {
    "text": "Which finger should we give it? ",
    "start": "1363390",
    "end": "1373100"
  },
  {
    "text": "That should do it. So we don't know what\nfinger to start with. Just try them all, take the min.",
    "start": "1373100",
    "end": "1378139"
  },
  {
    "text": "This is just like the\nguessing that we did here, just a slightly simpler version. There's no transition cost\nbecause there's no transition.",
    "start": "1378140",
    "end": "1385245"
  },
  {
    "text": "We weren't anywhere before. Just what finger\ndo you start with? I don't care what\nfinger I start with. It's how I transition from one\nnote to the next that's hard.",
    "start": "1385245",
    "end": "1393730"
  },
  {
    "text": "OK, done. That's the DP. Now, if this is not\nobvious or not clear,",
    "start": "1393730",
    "end": "1401330"
  },
  {
    "text": "I think it's easier to think\nabout it in the DAG form.",
    "start": "1401330",
    "end": "1406470"
  },
  {
    "start": "1405000",
    "end": "1795000"
  },
  {
    "text": "So let's draw all\nthe sub problems. We have here a two dimensional\nmatrix of sub-problems.",
    "start": "1406470",
    "end": "1412110"
  },
  {
    "text": "We have the different\nsuffixes on the one hand. So this is it, it stats\na 9, goes to n minus 1.",
    "start": "1412110",
    "end": "1421230"
  },
  {
    "text": "And then in the\nother dimension, we have what finger\nto use from 1 to f.",
    "start": "1421230",
    "end": "1429020"
  },
  {
    "text": "And so in each of these\npositions, there a note. There's a sub-problem. ",
    "start": "1429020",
    "end": "1439526"
  },
  {
    "text": "Race. ",
    "start": "1439526",
    "end": "1444840"
  },
  {
    "text": "I wanted to get five rows\nbecause there are five fingers. And then our\ntransitions basically",
    "start": "1444840",
    "end": "1449940"
  },
  {
    "text": "look-- if we're at\nfinger one on this note, we can go to finger\none on the next note.",
    "start": "1449940",
    "end": "1456040"
  },
  {
    "text": "Or we can go, if\nwe're not legato, or we can go to finger\ntwo on the next note, or finger three or finger\nfour or finger five.",
    "start": "1456040",
    "end": "1462870"
  },
  {
    "text": "And then if we're\nstarting with finger two, we could go to any one of these. So you get a complete\nbipartite graph,",
    "start": "1462870",
    "end": "1470269"
  },
  {
    "text": "which you usually\ndraw like this. That is how graph theorists\ndraw complete bipartite graphs.",
    "start": "1470270",
    "end": "1478398"
  },
  {
    "text": "OK, but I tried to draw a\nlittle more explicitly here. It's just any\npossible transition. And for each of\nthese, the point is",
    "start": "1478398",
    "end": "1483870"
  },
  {
    "text": "you can compute the\nD cost, because you know what figure you were at. You know what finger\nyou are going to",
    "start": "1483870",
    "end": "1489674"
  },
  {
    "text": "and what note\nyou're starting from and what note you're going to. Those are the four\narguments you need for D.",
    "start": "1489674",
    "end": "1495580"
  },
  {
    "text": "So you put those\nweights on, and then you solve shortest\npaths on this DAG. And that is exactly what\nthis DP is doing, OK?",
    "start": "1495580",
    "end": "1506350"
  },
  {
    "text": "Except there's no\nsingle source here, which is kind of annoying. And so you need to take\nthis min over what's",
    "start": "1506350",
    "end": "1512690"
  },
  {
    "text": "the shortest path from\nhere, what's the shortest path from here, from here,\nfrom here, from here. Of course, you\ndon't actually need",
    "start": "1512691",
    "end": "1518170"
  },
  {
    "text": "to do that by running single\nsource shortest paths f times.",
    "start": "1518170",
    "end": "1523830"
  },
  {
    "text": "If you're a clever\nshortest paths person, you would add an extra\nsource note, connect",
    "start": "1523830",
    "end": "1529190"
  },
  {
    "text": "that with 0 weight to\nall of these sources.",
    "start": "1529190",
    "end": "1535460"
  },
  {
    "text": "So put 0s on there. And then do single\nshortest paths from here.",
    "start": "1535460",
    "end": "1540650"
  },
  {
    "text": "And you will find the best way. You don't really care\nwhere you started, so this is trying\nall the options.",
    "start": "1540650",
    "end": "1545660"
  },
  {
    "text": "That's exactly what\nwe're doing here. But here I'm doing it with\nthe shortest paths trick, here I'm doing it with guessing\nand taking a min like DP style.",
    "start": "1545660",
    "end": "1556030"
  },
  {
    "text": "OK, so that's how to do\npiano figuring and guitar",
    "start": "1556030",
    "end": "1561560"
  },
  {
    "text": "fingering for single\nhand, one note at time. Questions? And this even worse\nfor aliens if you",
    "start": "1561560",
    "end": "1567340"
  },
  {
    "text": "have arbitrarily many\nfingers on your hand. I guess we should figure\nout what's the running time.",
    "start": "1567340",
    "end": "1573130"
  },
  {
    "text": "So we have sub-problems. We see how many\nsub-problems there are here. There's n times f sub-problems.",
    "start": "1573130",
    "end": "1582000"
  },
  {
    "text": "How much time, or how\nmany choices are there for our guess? Well there's f different\nchoices for what finger we use.",
    "start": "1582000",
    "end": "1591800"
  },
  {
    "text": "And when we do this min,\nwe spend theta F time. ",
    "start": "1591800",
    "end": "1600710"
  },
  {
    "text": "Because there's a\nfor loop over F, we're doing constant\nwork assuming D lookups take constant time.",
    "start": "1600710",
    "end": "1605760"
  },
  {
    "text": "This is theta F time. So we multiply those\ntwo things together, and we get the total time, the\nnumber of sub-problems which",
    "start": "1605760",
    "end": "1613570"
  },
  {
    "text": "is n times F, and\nwe multiply them by theta F for each sub-problem.",
    "start": "1613570",
    "end": "1618840"
  },
  {
    "text": "So this is nF squared. And given F is usually pretty\nsmall, it's almost linear time.",
    "start": "1618840",
    "end": "1629100"
  },
  {
    "text": "So that's a pretty\ngood algorithm. ",
    "start": "1629100",
    "end": "1638460"
  },
  {
    "text": "But in reality, you tend\nto play multiple notes at the same time. ",
    "start": "1638460",
    "end": "1646035"
  },
  {
    "text": "In music, typically\nyou're playing a chord. With piano, you're\nplaying several notes",
    "start": "1646035",
    "end": "1653550"
  },
  {
    "text": "with one hand, maybe several\nnotes with another hand. Two handed piano, it's crazy. You could do four handed piano,\nmake it a little more exciting.",
    "start": "1653550",
    "end": "1661000"
  },
  {
    "text": "With the guitar, play-- I\ndon't know very many chords, but I know at least one.",
    "start": "1661000",
    "end": "1667289"
  },
  {
    "text": "You play, I don't know. This looks like something. That's a G chord.",
    "start": "1667290",
    "end": "1673702"
  },
  {
    "text": "Do I know any others? And that's an E chord.",
    "start": "1673702",
    "end": "1679498"
  },
  {
    "text": "All right, you get the idea. I mean, for each\nof these chords,",
    "start": "1679499",
    "end": "1684960"
  },
  {
    "text": "different people use\ndifferent fingers, even for a single cord. So it's sort of a\npersonal taste how you're going to define\nyour difficulty measure.",
    "start": "1684960",
    "end": "1691490"
  },
  {
    "text": "But I could play an E like\nthis, or I could-- I don't know, play it like this.",
    "start": "1691490",
    "end": "1697040"
  },
  {
    "text": "Or I could play like this. And there's lots of crazy\nways to put your finger here",
    "start": "1697040",
    "end": "1704100"
  },
  {
    "text": "and your finger here\nand your finger here. And for each of them, you\ncould define some difficulty. And then, of course,\nis a transition",
    "start": "1704100",
    "end": "1709979"
  },
  {
    "text": "from one chord to another. And because there's different\nways to play different chords, that wasn't a very good\nexample because they all",
    "start": "1709979",
    "end": "1715290"
  },
  {
    "text": "look pretty bad. Well, this one for example,\nthis is the G again.",
    "start": "1715290",
    "end": "1721320"
  },
  {
    "text": "I could use my-- one, two,\nthree, four-- fourth finger here, or I could\nuse my fifth finger.",
    "start": "1721320",
    "end": "1728645"
  },
  {
    "text": "My instructor says we should\nuse our pinky because people tend not to use their pinky. But it makes a\ndifference what I'm",
    "start": "1728645",
    "end": "1733834"
  },
  {
    "text": "going to transition to next. Maybe my pinky really\nneeds to go over here next and I should free\nit up for later, or maybe it's better if this\none's freed because then I",
    "start": "1733834",
    "end": "1741059"
  },
  {
    "text": "can move it somewhere else. So that's what we'd\nlike to capture in a generalized form\nor this dynamic program,",
    "start": "1741060",
    "end": "1747010"
  },
  {
    "text": "and we can do it. So I'll try to do\nit quickly so we",
    "start": "1747010",
    "end": "1752360"
  },
  {
    "text": "can get on to the\nother examples. All right, other fun stuff. Actually, there's\nanother fun thing",
    "start": "1752360",
    "end": "1757600"
  },
  {
    "text": "with guitar, which\nis that there's more than one way\nto play each note.",
    "start": "1757600",
    "end": "1762740"
  },
  {
    "text": "There are six strings here. And you could play like this\nnote for the Super Mario",
    "start": "1762740",
    "end": "1769529"
  },
  {
    "text": "Brothers. I could also play that\ndoing the fifth thing here.",
    "start": "1769530",
    "end": "1774720"
  },
  {
    "text": "It's slightly out of tune, but\nthose sound almost the same.",
    "start": "1774720",
    "end": "1779970"
  },
  {
    "text": "Or I could play on the 10th\nfret on the third string. That's the same as bottom one.",
    "start": "1779970",
    "end": "1786299"
  },
  {
    "text": "So a lot of options, so you\nalso like to capture that. This is actually not too hard.",
    "start": "1786300",
    "end": "1792260"
  },
  {
    "text": "You just need to generalize\nthe notion of finger",
    "start": "1792260",
    "end": "1802000"
  },
  {
    "start": "1795000",
    "end": "1845000"
  },
  {
    "text": "to what finger you're using\nand what string you're using.",
    "start": "1802000",
    "end": "1807570"
  },
  {
    "text": "So there are f different choices\nfor what finger you're using. If you use a generalized\nguitar, there's s choices for what\nstring you're playing.",
    "start": "1807570",
    "end": "1814145"
  },
  {
    "text": "There's a lot of different\nguitars with various numbers of strings, so we can\njust generalize that. And now it's not only, which\nfinger am I going to use,",
    "start": "1814145",
    "end": "1820700"
  },
  {
    "text": "but what sting\nwill I play it on? And then you can still\ndefine a difficulty measure",
    "start": "1820700",
    "end": "1826390"
  },
  {
    "text": "like this for this\nset up, depending both on the finger\nand the string. And then the running\ntime grows slightly.",
    "start": "1826390",
    "end": "1834890"
  },
  {
    "text": "It's now n times F\nsquared S squared, because now I have to take\nthe product of F and S. OK,",
    "start": "1834890",
    "end": "1841759"
  },
  {
    "text": "so that's first thing. But then if I wanted\nto do multiple notes,",
    "start": "1841760",
    "end": "1850990"
  },
  {
    "start": "1845000",
    "end": "2125000"
  },
  {
    "text": "well, you can imagine it's\na similar type of deal. It's going to get harder though.",
    "start": "1850990",
    "end": "1856992"
  },
  {
    "text": "First thing we need to\ngeneralize is the input. Before the input was\na sequence of notes.",
    "start": "1856992",
    "end": "1862190"
  },
  {
    "text": "Now it's going to be a\nsequence of multi-notes. So notes of i is now\ngoing to be, let's say,",
    "start": "1862190",
    "end": "1871110"
  },
  {
    "text": "a list of notes that all\nneed to be played at once.",
    "start": "1871110",
    "end": "1876400"
  },
  {
    "text": "And conveniently, it's probably\ngoing to be, at most, F notes, because you really can only\nplay one note with each finger",
    "start": "1876400",
    "end": "1883260"
  },
  {
    "text": "pretty much. I guess you could try to\nplay two notes at once on a piano with\na finger, but eh.",
    "start": "1883260",
    "end": "1888476"
  },
  {
    "text": "It sounds difficult. For a guitar, it's\nat most s notes.",
    "start": "1888477",
    "end": "1893980"
  },
  {
    "text": "You can only play one note\nper string, more or less. So that's our input.",
    "start": "1893980",
    "end": "1902659"
  },
  {
    "text": "And now we need to adjust\nthe dynamic program. ",
    "start": "1902660",
    "end": "1909910"
  },
  {
    "text": "And I think I'll tell\nyou how to do this. ",
    "start": "1909910",
    "end": "1944410"
  },
  {
    "text": "Basically, now you need to know\nwhere all your fingers are. So you go from one\npose to another pose,",
    "start": "1944410",
    "end": "1951140"
  },
  {
    "text": "from one chord to another. Different ways to finger that. Which fingers are\nand which strings and which frets on the\nguitar, which fingers",
    "start": "1951140",
    "end": "1959040"
  },
  {
    "text": "are on which keys\non the keyboard. But you just need\nto know all that. And all your fingers\nmight be doing something,",
    "start": "1959040",
    "end": "1966540"
  },
  {
    "text": "and you've got to know for\neach finger what note is it on, or is it not being used at all. So how many different ways to\ndo such a mapping are there?",
    "start": "1966540",
    "end": "1974370"
  },
  {
    "text": "I mean, this is just a function. So it's the number of\ntargets of the function. So how many of these are there.",
    "start": "1974370",
    "end": "1983110"
  },
  {
    "text": "Gosh, well, I guess we said\nthere are, at most, f notes. So f plus 1 is the maximum\nnumber of possible things",
    "start": "1983110",
    "end": "1992530"
  },
  {
    "text": "each finger can do. And we raise that to the power\nof the number of fingers. That's the possible mappings\nof what all of my fingers",
    "start": "1992530",
    "end": "1999470"
  },
  {
    "text": "could be doing. It's exponential\nin f, not so great. But if f is 5, it's all right.",
    "start": "1999470",
    "end": "2005140"
  },
  {
    "text": "And then-- well, then you\njust generalize the rest. I don't think I'll\nwrite it down in detail.",
    "start": "2005140",
    "end": "2010890"
  },
  {
    "text": "But our sub-problems\nnow are going to be-- let me\nswitch boards here.",
    "start": "2010890",
    "end": "2017000"
  },
  {
    "text": " How do we play these\nmulti-notes from i onwards,",
    "start": "2017000",
    "end": "2026130"
  },
  {
    "text": "given that we're going to\nuse that pose-- or I called it the state of all my fingers--\nfor the first notes of i",
    "start": "2026130",
    "end": "2034540"
  },
  {
    "text": "is now a whole bunch of notes. So given I'm now going\nto play those notes with this particular\nfinger assignment,",
    "start": "2034540",
    "end": "2041910"
  },
  {
    "text": "how do I play the rest? And then what we'll guess is\nthe entire finger assignment",
    "start": "2041910",
    "end": "2047560"
  },
  {
    "text": "for the next set of\nnotes, i plus 1-- the next chord, if you will. And that guessing involves\nnow F plus 1 to the F time.",
    "start": "2047560",
    "end": "2057071"
  },
  {
    "text": "And then we just write the\nrecurrence in the same way. So we're basically generalizing\nhere we call the finger,",
    "start": "2057071",
    "end": "2062480"
  },
  {
    "text": "now it's an entire\npose for your hand. Instead of F, you might write\nH for hand or something.",
    "start": "2062480",
    "end": "2068949"
  },
  {
    "text": "And so the running\ntime in this situation is going to go up to something\nlike n times F of plus",
    "start": "2068949",
    "end": "2076629"
  },
  {
    "text": "1 to the F. Did I miss anything?",
    "start": "2076630",
    "end": "2082381"
  },
  {
    "text": "Probably have to square that.  2F.",
    "start": "2082382",
    "end": "2087766"
  },
  {
    "text": "Before it was F\nsquared, now it's just F plus 1 to the F squared. So if F is small,\nthis is all right.",
    "start": "2087766",
    "end": "2092860"
  },
  {
    "text": "Otherwise, not so great. This is the best algorithm\nI know for chord fingering.",
    "start": "2092860",
    "end": "2098180"
  },
  {
    "text": "Questions? Just trying to\nmake it practical, solve the real life problem.",
    "start": "2098180",
    "end": "2103530"
  },
  {
    "text": "I would love, I\nthink-- I don't know if this has been\nimplemented, but someone should implement this\nin some-- I don't know,",
    "start": "2103530",
    "end": "2112220"
  },
  {
    "text": "score program,\nmusical score program. I would love as\nlearning guitar, it'd",
    "start": "2112220",
    "end": "2117864"
  },
  {
    "text": "be great for someone to just\ntell me how to finger things. Then I can\nretroactively figure out why using the dynamic program.",
    "start": "2117864",
    "end": "2123812"
  },
  {
    "text": "All right, let's\nmove on to Tetris. ",
    "start": "2123812",
    "end": "2133662"
  },
  {
    "start": "2125000",
    "end": "2588000"
  },
  {
    "text": "All these problems are going\nto have the same flavor. You can solve them\nwith basically the same dynamic program. It's all about figuring out\nwhat should the sub-problems be.",
    "start": "2133662",
    "end": "2141900"
  },
  {
    "text": "So let me-- does anyone\nhere not know Tetris? OK, good. No one's willing to admit it.",
    "start": "2141900",
    "end": "2147595"
  },
  {
    "text": "So you've got these\nblocks falling. But I'm going to make several\nartificial constraints.",
    "start": "2147595",
    "end": "2153640"
  },
  {
    "text": "First of all, I tell\nyou the entire sequence of pieces that\nare going to come. This is more like\na Tetris puzzle.",
    "start": "2153640",
    "end": "2159220"
  },
  {
    "text": " OK, we're given sequence\nof n pieces that will fall.",
    "start": "2159220",
    "end": "2168510"
  },
  {
    "text": "For each of them, we must\ndrop the piece from the top. ",
    "start": "2168510",
    "end": "2175660"
  },
  {
    "text": "OK, and if you're a\nfancy Tetris player, you can let a piece fall and\nthen rotate it at very end",
    "start": "2175660",
    "end": "2181500"
  },
  {
    "text": "to do some clever, clever thing. I disallow that. You always have to\npush the drop button. So the piece starts here, it\ngoes instantly to the ground.",
    "start": "2181500",
    "end": "2189329"
  },
  {
    "text": "This will be necessary. I don't know how to\nsolve the problem without this constraint. OK, and then the\nother weird thing--",
    "start": "2189330",
    "end": "2197410"
  },
  {
    "text": "this is very weird for Tetris--\nfull rows normally clear, but now they don't clear.",
    "start": "2197410",
    "end": "2204880"
  },
  {
    "text": "This is like hardcore Tetris. You're guaranteed\nto die eventually. The question is, can you\nsurvive these n pieces?",
    "start": "2204880",
    "end": "2213286"
  },
  {
    "text": "That's the question. Can you survive?  Oh, I've got one\nother constraint.",
    "start": "2213287",
    "end": "2219309"
  },
  {
    "text": "This is actually\nkind of natural. The width of the board is\nsmall, relatively small,",
    "start": "2219310",
    "end": "2227200"
  },
  {
    "text": "because we're going to\nbe exponential in w. In real life it's 12, I think? AUDIENCE: Ten.",
    "start": "2227200",
    "end": "2232720"
  },
  {
    "text": "PROFESSOR: Ten, sorry. It's been a while since\nI wrote my Tetris paper. So all right, these are all\nkind of weird constraints.",
    "start": "2232720",
    "end": "2240070"
  },
  {
    "text": "If you don't make all of\nthese constraints-- oh, also the board is\ninitially empty.",
    "start": "2240070",
    "end": "2245109"
  },
  {
    "text": "That's like level one of Tetris. ",
    "start": "2245110",
    "end": "2254170"
  },
  {
    "text": "If all of these things\nare not the case, which is regular Tetris, if you\njust have the first thing",
    "start": "2254170",
    "end": "2259314"
  },
  {
    "text": "then this problem is\ncalled NP-complete. We'll be defining\nthat next class. So it's computationally\nintractable.",
    "start": "2259314",
    "end": "2265562"
  },
  {
    "text": "But if you make all\nof these assumptions, the problem becomes\neasy, and you can do it by\ndynamic programming.",
    "start": "2265562",
    "end": "2273260"
  },
  {
    "text": "So how do we do it? We define sub-problems\njust like before.",
    "start": "2273260",
    "end": "2280490"
  },
  {
    "text": "The obvious thing\nto try is suffixes. ",
    "start": "2280490",
    "end": "2287230"
  },
  {
    "text": "How do we play a suffix\nof pieces i onwards?",
    "start": "2287230",
    "end": "2293900"
  },
  {
    "text": "How to play those guys. And just like fingering, this is\nnot enough information, right?",
    "start": "2293900",
    "end": "2303600"
  },
  {
    "text": "Because if we're going to play\nfrom pieces i onward, what we need to now is what the\nboard currently looks like. I said here the board\nis initially empty.",
    "start": "2303600",
    "end": "2310312"
  },
  {
    "text": "That's not going to\nbe the case after you place the very first piece. So in general, after we've\nplaced the first i pieces,",
    "start": "2310312",
    "end": "2315880"
  },
  {
    "text": "we need to know what\nthe board looks like. And here's where I'm going to\nuse all of these assumptions.",
    "start": "2315880",
    "end": "2321430"
  },
  {
    "text": "If you always drop things from\nthe top and rows don't clear, then all you really care about\nis how high each column is.",
    "start": "2321430",
    "end": "2331454"
  },
  {
    "text": "This is what you might call\nthe skyline of the board. ",
    "start": "2331455",
    "end": "2338140"
  },
  {
    "text": "OK, now in reality,\nthere might be holes here because you drop\nthings in silly ways.",
    "start": "2338140",
    "end": "2343885"
  },
  {
    "text": "Maybe you drop a\npiece like this. And then I claim, because\nI'm dropping things",
    "start": "2343885",
    "end": "2349090"
  },
  {
    "text": "from infinity from\nthe sky, I really don't care about that\nthere's a whole here.",
    "start": "2349090",
    "end": "2354130"
  },
  {
    "text": "I can just fill that in and\nsay, OK, that's my new skyline. Because if you can't do\nthese last minute twists",
    "start": "2354130",
    "end": "2359299"
  },
  {
    "text": "and if lines never clear,\nthat's going to be gone. That material is wasted.",
    "start": "2359300",
    "end": "2365380"
  },
  {
    "text": "OK, so all I need to remember\nis how high is each column.",
    "start": "2365380",
    "end": "2370630"
  },
  {
    "text": "So I should say given\nthe board skyline.",
    "start": "2370630",
    "end": "2378881"
  },
  {
    "text": "Now, how many choices\nare there for that? It's quite similar to this\nfunction, the fingering.",
    "start": "2378882",
    "end": "2385220"
  },
  {
    "text": "Let's see. There's the height of the\nboard, different choices. It's going to be h.",
    "start": "2385220",
    "end": "2390892"
  },
  {
    "text": "For each column it could be\nanywhere between 0 and h, so I guess h plus 1 if\nyou want to get technical.",
    "start": "2390892",
    "end": "2396090"
  },
  {
    "text": "And then we raise\nit to the power w, because there's w different\ncolumns and each of them is independent choice.",
    "start": "2396090",
    "end": "2403697"
  },
  {
    "text": "So this is going to n times\nthat different sub-problems. ",
    "start": "2403697",
    "end": "2410870"
  },
  {
    "text": "And here's what I\nneed the is small because this is\nexponential in w. So it's reasonable in\nh, but exponential in w.",
    "start": "2410870",
    "end": "2418780"
  },
  {
    "text": "OK, then what do I guess? Any suggestions what to guess? ",
    "start": "2418780",
    "end": "2438380"
  },
  {
    "text": "AUDIENCE: So where the new\npiece falls, as in [INAUDIBLE]? PROFESSOR: Yeah.",
    "start": "2438380",
    "end": "2443850"
  },
  {
    "text": "What should I do with piece i? There's not that many choices. I can rotate it zero,\none, two, or three times.",
    "start": "2443850",
    "end": "2451640"
  },
  {
    "text": "I can choose\nsomeplace to drop it, but those are my only choices. So it's just how\nto play piece i.",
    "start": "2451640",
    "end": "2461060"
  },
  {
    "text": "And given that guess,\nyou can figure out how the skyline updates,\nlike I did here. If I drop that piece like\nthat, then I fill in this part",
    "start": "2461060",
    "end": "2468730"
  },
  {
    "text": "and recompute my new skyline.  So it's going to\nbe something like 4",
    "start": "2468730",
    "end": "2474120"
  },
  {
    "text": "times w different choices,\nroughly-- 4 for the rotation,",
    "start": "2474120",
    "end": "2479705"
  },
  {
    "text": "w for the x-coordinate.  And so the running\ntime is just going",
    "start": "2479705",
    "end": "2484839"
  },
  {
    "text": "to be the product of these. ",
    "start": "2484840",
    "end": "2502220"
  },
  {
    "text": "n times w times h\nplus 1 to the w.",
    "start": "2502220",
    "end": "2509030"
  },
  {
    "text": "Open problem, if I drop any\none of these assumptions, can you get a dynamic\nprogram that's reasonable?",
    "start": "2509030",
    "end": "2516400"
  },
  {
    "text": "Could you do it if w is large? I don't know. Could you do if rows do clear?",
    "start": "2516400",
    "end": "2522220"
  },
  {
    "text": "That's the least\nnatural constraint here. I don't know. ",
    "start": "2522220",
    "end": "2527850"
  },
  {
    "text": "Puzzle for you to think about. I'd love to know the answer. ",
    "start": "2527850",
    "end": "2536780"
  },
  {
    "text": "You can obviously do the\nrest of the steps, right? You can write down\nthe recurrence. It's the same thing. You take the min\nover all guesses.",
    "start": "2536780",
    "end": "2543849"
  },
  {
    "text": "What are we minimizing? Hmm. I guess here the\nquestion is survival.",
    "start": "2543850",
    "end": "2549700"
  },
  {
    "text": "Can you survive? So this is one of the first\nexamples where the answer is a Boolean value, true or false.",
    "start": "2549700",
    "end": "2557470"
  },
  {
    "text": "But if you think of true\nor false as 0 and 1, then it's still a\nmaximization problem.",
    "start": "2557470",
    "end": "2563086"
  },
  {
    "text": "You want to maximize. You want 1 if possible. Otherwise, you'll get\n0 when you maximize. So you can write the\nrecurrence using max.",
    "start": "2563086",
    "end": "2570319"
  },
  {
    "text": "And in the base case, you have\ntruth values, true or false. And you'll see, did I survive?",
    "start": "2570320",
    "end": "2575529"
  },
  {
    "text": "Did I die? That sort of thing. I want to go on to\nSuper Mario Brothers,",
    "start": "2575530",
    "end": "2580707"
  },
  {
    "text": "because everyone loves\nSuper Mario Brothers. ",
    "start": "2580707",
    "end": "2590091"
  },
  {
    "start": "2588000",
    "end": "2959000"
  },
  {
    "text": "has? Anyone not played NES\nSuper Mario Brothers 1? Aww, you got to play it, man.",
    "start": "2590091",
    "end": "2597315"
  },
  {
    "text": "You're the only one. You can play it on an emulator. Maybe not legally, but you\ncan play it on an emulator",
    "start": "2597315",
    "end": "2603700"
  },
  {
    "text": "and just see how it is. So what I'm going\nto talk about next,",
    "start": "2603700",
    "end": "2609520"
  },
  {
    "text": "in theory, works for many\ndifferent platform games, side-scrolling platform games. But Super Mario Brothers\n1 has some nice features.",
    "start": "2609520",
    "end": "2619140"
  },
  {
    "text": "In particular, a nice feature\nis that whenever anything moves off of the screen, it\ndisappears from the world.",
    "start": "2619140",
    "end": "2626460"
  },
  {
    "text": "So the monster moves\noff, it's gone.  You can think of there's\na static level there.",
    "start": "2626460",
    "end": "2633559"
  },
  {
    "text": "When the level comes into\nscreen, when a monster comes on screen, then\nit starts acting. But as soon as you move the\nscreen-- you can't actually",
    "start": "2633560",
    "end": "2640680"
  },
  {
    "text": "move backwards in Super\nMario 1, but as soon as you move forwards and\nthat character is offscreen, it's gone.",
    "start": "2640680",
    "end": "2646630"
  },
  {
    "text": "So in a sense, that\npart of the level reset to its initial state. Now, as long as your screen is\nnot too big-- and thankfully,",
    "start": "2646630",
    "end": "2652960"
  },
  {
    "text": "on NES screens\nwere not very big. It's 320p, or whatever.",
    "start": "2652960",
    "end": "2658030"
  },
  {
    "text": "This will work. If you are given\nthe entire level--",
    "start": "2658030",
    "end": "2667430"
  },
  {
    "text": "so let's say there's n\nbits of information there-- and you have a small screen,\nw by h screen, w and h",
    "start": "2667430",
    "end": "2678000"
  },
  {
    "text": "are not too big. Then I claim we can\nsolve Super Mario Brothers by dynamic programming.",
    "start": "2678000",
    "end": "2683440"
  },
  {
    "text": "So let's say we want\nto maximize our score. Want to run through the level\nand maximize your score, or you want to minimize\nthe amount of time you use.",
    "start": "2683440",
    "end": "2690160"
  },
  {
    "text": "You're doing level runs. Pick your favorite measure,\nall of those can be solved. And the way to do it, this\nsort of general approach",
    "start": "2690160",
    "end": "2696640"
  },
  {
    "text": "to all these DPs is\nwe need to write down what do I need to know\nabout the game state. I'll call that a configuration.",
    "start": "2696640",
    "end": "2702616"
  },
  {
    "text": " What can we care about\nfor Super Mario Brothers?",
    "start": "2702616",
    "end": "2707780"
  },
  {
    "text": "Well, I guess\neverything on screen.",
    "start": "2707780",
    "end": "2713190"
  },
  {
    "text": " This is a bit tricky, but\nthere's stuff on screen.",
    "start": "2713190",
    "end": "2720629"
  },
  {
    "text": "There are monsters and objects. For the monsters, I need to\nknow their current position. For the objects, I\nneed to know-- like,",
    "start": "2720629",
    "end": "2726292"
  },
  {
    "text": "is there a question mark box? Did I hit it already? Did I already get the coin or\ndid I already get the mushroom?",
    "start": "2726292",
    "end": "2731880"
  },
  {
    "text": "So for each of those\nthings, there's some amount of information\nyou need to store. How much information?",
    "start": "2731880",
    "end": "2738980"
  },
  {
    "text": "I think something like constant\nto the w times h should do.",
    "start": "2738980",
    "end": "2745000"
  },
  {
    "text": "That's saying for every\npixel on the screen or for every square\non the screen, however you-- whatever you\ndefine the resolution here",
    "start": "2745000",
    "end": "2750790"
  },
  {
    "text": "to be. Let's say for every little\nunit square in Mario land, is it a brick?",
    "start": "2750790",
    "end": "2756750"
  },
  {
    "text": "Is it a hard brick, or has\nit been a destroyed brick? Is a monster there right now?",
    "start": "2756750",
    "end": "2763490"
  },
  {
    "text": "Is Mario there right now? All these kinds of information. OK, so there's a cost number\nof choices for each pixel.",
    "start": "2763490",
    "end": "2770580"
  },
  {
    "text": "You can write them all down. You might also want\nMario's velocity.",
    "start": "2770580",
    "end": "2776880"
  },
  {
    "text": "I had to play it\nagain just to check that there is indeed velocity. Turning around is slower\nthan going forward.",
    "start": "2776880",
    "end": "2783260"
  },
  {
    "text": "You do accelerate a little bit. So you've got to remember that. There's probably only\na constant number of choices for what\nyour velocity is.",
    "start": "2783260",
    "end": "2790840"
  },
  {
    "text": "What else? Ah, I want to\nremember the score.",
    "start": "2790840",
    "end": "2796710"
  },
  {
    "text": "You want to maximize score. And let's say you also--\nhow much time is left. There's a time counter. If it hits zero, you die.",
    "start": "2796710",
    "end": "2803510"
  },
  {
    "text": "Now, these are kind of annoying,\nbecause they're integers. They could be kind of large. So I'm going to say the\nscore could be capital S big,",
    "start": "2803510",
    "end": "2811010"
  },
  {
    "text": "and time could be capital T big. So this'll be a\npseudopolynomial algorithm.",
    "start": "2811010",
    "end": "2816720"
  },
  {
    "text": "The number of\nconfigurations in total here is the product\nof these things. It's exponential in w and h.",
    "start": "2816720",
    "end": "2823980"
  },
  {
    "text": "And then multiply by\nS and T. So that's",
    "start": "2823980",
    "end": "2829420"
  },
  {
    "text": "the number of configurations. And that's also going\nto be our sub-problem. I guess we should\nalso write down",
    "start": "2829420",
    "end": "2835910"
  },
  {
    "text": "where is the screen\nrelative to the level.",
    "start": "2835910",
    "end": "2841309"
  },
  {
    "text": "OK, how far to the\nright have you gone? That's another w. ",
    "start": "2841310",
    "end": "2848710"
  },
  {
    "text": "That's not a big deal. OK, given this information,\nyou know everything you need to know about\nplaying from here on.",
    "start": "2848710",
    "end": "2855580"
  },
  {
    "text": "And the time counter's\nalways going to keep ticking. So you can draw a graph\nof all configurations,",
    "start": "2855580",
    "end": "2861190"
  },
  {
    "text": "just enumerate all\nof these things. It's this many of them. And then draw, for\nevery configuration,",
    "start": "2861190",
    "end": "2867240"
  },
  {
    "text": "what are the possible\nthings I can do? I could push this button. I can push the A button, I\ncan release the A button. I can push the B button, I\ncan release the B button.",
    "start": "2867240",
    "end": "2874246"
  },
  {
    "text": "I can push the up arrow. Those are all the\nthings you could do. It's a constant\nnumber of choices. So each vertex will have\nconstant out degree.",
    "start": "2874246",
    "end": "2881500"
  },
  {
    "text": "If you did this, what\nconfiguration would I reach? Just draw that whole graph. Do shortest paths.",
    "start": "2881500",
    "end": "2887840"
  },
  {
    "text": "Or dynamic programming,\nthese are your sub-problems. There are no suffixes here. These are your sub-problem.",
    "start": "2887840",
    "end": "2894760"
  },
  {
    "text": "And then you take\na max, if you're trying to maximize score or max\nif you're trying to maximize",
    "start": "2894760",
    "end": "2900910"
  },
  {
    "text": "time, minimize the time you use. This is time remaining. And you can relate\neach sub-problem",
    "start": "2900910",
    "end": "2907229"
  },
  {
    "text": "to a constant number\nof other sub-problems. So your running\ntime will be this, because you only pay constant\ntime per sub-problem.",
    "start": "2907229",
    "end": "2913270"
  },
  {
    "text": "And now you can solve Super\nMario Brothers optimally, as long as your screen is\nnot too big and as long as your scores and times\ndon't get too big either,",
    "start": "2913270",
    "end": "2920040"
  },
  {
    "text": "because we're only\npseudopolynomial with respect to S and T. Questions?",
    "start": "2920040",
    "end": "2926700"
  },
  {
    "text": "All right. That's-- yeah? AUDIENCE: So are we\ngoing to be trying to memoize all of these\npossible configurations?",
    "start": "2926700",
    "end": "2936059"
  },
  {
    "text": "PROFESSOR: If you do\nthe recursive version, you will end up memoizing all\nof these configuration values. Well, anyone that's reachable\nfrom the initial state.",
    "start": "2936059",
    "end": "2944009"
  },
  {
    "text": "Some configurations\nmight not be reachable, but the ones that\nare reachable you're going to start doing them.",
    "start": "2944009",
    "end": "2949380"
  },
  {
    "text": "When you finish doing them,\nyou will memoize the result. ",
    "start": "2949380",
    "end": "2959080"
  }
]