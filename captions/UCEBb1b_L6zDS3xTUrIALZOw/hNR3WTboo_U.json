[
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "7060"
  },
  {
    "text": "continue to offer high-quality\neducational resources for free. To make a donation or to\nview additional materials",
    "start": "7060",
    "end": "13690"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13690",
    "end": "22437"
  },
  {
    "text": "TADGE DRYJA: Last class, I\ntalked about payment channels and lightning network. So today we'll talk a bit\nmore about payment channels.",
    "start": "22437",
    "end": "30301"
  },
  {
    "text": "We'll recap a little\nbit, and we'll talk about some optimizations,\none of which is key addition,",
    "start": "30302",
    "end": "36210"
  },
  {
    "text": "the other is hash trees. And then we'll talk\nabout cross-chain swaps or cross-chain atomic swaps.",
    "start": "36210",
    "end": "43940"
  },
  {
    "text": "OK, so last time, the sort\nof main idea of these payment",
    "start": "43940",
    "end": "49059"
  },
  {
    "text": "channels is you've got\nthis commitment transaction and each party holds a sort\nof different transaction",
    "start": "49060",
    "end": "55330"
  },
  {
    "text": "that has the same amounts but\nslightly different scripts.",
    "start": "55330",
    "end": "61920"
  },
  {
    "text": "So it's spending from a\nshared funding transaction.",
    "start": "61920",
    "end": "67049"
  },
  {
    "text": "And it's sending out to-- the one that's held by\nAlice on her hard drive",
    "start": "67050",
    "end": "72430"
  },
  {
    "text": "sends to Bob in the clear. Bob just gets his eight coins\nwith no ifs, ands, or buts.",
    "start": "72430",
    "end": "78510"
  },
  {
    "text": "However, when Alice\nbroadcasts this, she needs to wait 100 blocks.",
    "start": "78510",
    "end": "83580"
  },
  {
    "text": "She needs to wait a day. And if she reveals\nthis key to Bob,",
    "start": "83580",
    "end": "89549"
  },
  {
    "text": "now Bob can use Bob's key\nin this revocable key, and Bob can get these\ncoins immediately.",
    "start": "89550",
    "end": "96390"
  },
  {
    "text": "And the opposite is for Bob. So when Bob has his transaction,\nit's got Alice's signature.",
    "start": "96390",
    "end": "103575"
  },
  {
    "text": "He doesn't store his\nown, because he can just compute it quickly. The two coins that go to\nAlice go to her in the clear.",
    "start": "103575",
    "end": "111240"
  },
  {
    "text": "However, the eight coins\nthat Bob gets for himself, he has to wait 100 blocks.",
    "start": "111240",
    "end": "116310"
  },
  {
    "text": "And during the 100\nblocks, Alice can",
    "start": "116310",
    "end": "121820"
  },
  {
    "text": "sign if she has\nBob's revocation key. OK, so that's the basic\nidea of these outputs.",
    "start": "121820",
    "end": "130340"
  },
  {
    "text": "And then you construct these. So when I say, Alice, one\nbitcoin, Bob, nine bitcoin,",
    "start": "130340",
    "end": "136220"
  },
  {
    "text": "it's of the format in these. The person who holds\nthat transaction",
    "start": "136220",
    "end": "141980"
  },
  {
    "text": "has a transaction where the\nother party gets the coins immediately, and their own\ncoins have this lockup period,",
    "start": "141980",
    "end": "148909"
  },
  {
    "text": "and can be grabbed by the other\nparty if they revoke them. So initially, the state is Alice\nhas one bitcoin, Bob has nine.",
    "start": "148910",
    "end": "157912"
  },
  {
    "text": "There's two different\nstate 1 transactions, one held by Alice, one held by Bob. They build a new\ntransaction together",
    "start": "157912",
    "end": "165799"
  },
  {
    "text": "where Alice has five coins\nand Bob has five coins, and then they revoke the old\none by sharing these secrets.",
    "start": "165800",
    "end": "174750"
  },
  {
    "text": "So now, since they both\nhave handed each other these revocation private keys, both of\nthese parties cannot broadcast",
    "start": "174750",
    "end": "183609"
  },
  {
    "text": "this. If they do, the other\nparty takes all the money. And then you can build\nthese indefinitely.",
    "start": "183610",
    "end": "191420"
  },
  {
    "text": "OK, so any questions about that? That was covered last time, but\nit kind of can be complicated.",
    "start": "191420",
    "end": "199400"
  },
  {
    "text": "Questions? Good?  OK, so some optimizations\nwe'd want to make--",
    "start": "199400",
    "end": "208780"
  },
  {
    "text": "yes, so basically, either party\nbroadcasts and has to wait. Alice gives Bob the\nAliceR private key, Bob gives Alice the\nBobR private key.",
    "start": "208780",
    "end": "215540"
  },
  {
    "text": "If they broadcast,\nthe counterpart takes all the funds. So what are some\noptimizations here? The basic idea of the\nscript is, OK, you",
    "start": "215540",
    "end": "223790"
  },
  {
    "text": "can have a signature\nfrom KeyA, and you have to wait a day, or\ntwo, or five, or whatever.",
    "start": "223790",
    "end": "229010"
  },
  {
    "text": "Or you can have a signature from\nKeyB and a signature from KeyC. ",
    "start": "229010",
    "end": "235690"
  },
  {
    "text": "So what are some\noptimizations here? The revealing part-- any\nway to make that smaller,",
    "start": "235690",
    "end": "241120"
  },
  {
    "text": "more efficient? So one idea is a pre-image\ninstead of a signature.",
    "start": "241120",
    "end": "249300"
  },
  {
    "text": "You're just revealing\nsomething, you're not actually committing to any data. So when Bob reveals his\nsecret, he could just be,",
    "start": "249300",
    "end": "256470"
  },
  {
    "text": "here's a pre-image. And instead of like 70\nbytes for a signature, you get down to like 20 bytes\nfor a hash and a pre-image.",
    "start": "256470",
    "end": "263895"
  },
  {
    "text": " So how would it work? You'd just say, OK,\nAlice signs if Alice",
    "start": "263895",
    "end": "272570"
  },
  {
    "text": "knows BobR's pre-image. BobR doesn't have to actually\nsign, she can just know it.",
    "start": "272570",
    "end": "281199"
  },
  {
    "text": "That would work. So actually that was\nthe initial idea.",
    "start": "281200",
    "end": "286349"
  },
  {
    "text": "I think that's what's\nwritten in the paper. But you can do even smaller. So an even smaller way\nto do it is combine keys.",
    "start": "286350",
    "end": "295660"
  },
  {
    "text": "So in the elliptic\ncurve that we're using in all these groups,\nall these signature schemes,",
    "start": "295660",
    "end": "301770"
  },
  {
    "text": "if you add two keys together,\nyou can get a third key. And it's using the\naddition operation",
    "start": "301770",
    "end": "307260"
  },
  {
    "text": "that's defined on this group. So in the case where\nyou have KeyB and KeyC,",
    "start": "307260",
    "end": "313560"
  },
  {
    "text": "and you add them together\nto get, say, KeyR, what's the private key for KeyR? Anyone?",
    "start": "313560",
    "end": "318750"
  },
  {
    "text": " You've got KeyB-- private key--",
    "start": "318750",
    "end": "326159"
  },
  {
    "text": "KeyC, which has a private key,\nyou add the two public keys up together-- ",
    "start": "326160",
    "end": "333546"
  },
  {
    "text": "yeah, it's the sum\nof the private keys. So public KeyB is just private\nKeyB times the generator",
    "start": "333546",
    "end": "340230"
  },
  {
    "text": "point, G. But-- and then C\ntimes G equals R times G.",
    "start": "340230",
    "end": "346520"
  },
  {
    "text": "And then you can just move\nthe parentheses around. So B plus C, the private\nkeys added together",
    "start": "346520",
    "end": "354440"
  },
  {
    "text": "times the generator\npoint is still the same. So this is a really\nnice property.",
    "start": "354440",
    "end": "359533"
  },
  {
    "text": "Actually, it's sort\nof the main property that we use for all\nsignatures and all this stuff.",
    "start": "359533",
    "end": "365250"
  },
  {
    "text": "What that means is you can say,\nhere, I take your public key,",
    "start": "365250",
    "end": "371790"
  },
  {
    "text": "I'm going to come up\nwith my own private key, compute the public key for that,\nadd them together, and say,",
    "start": "371790",
    "end": "376900"
  },
  {
    "text": "hey, we've got this\nnew shared public key. And neither of us\ncan sign with it",
    "start": "376900",
    "end": "383640"
  },
  {
    "text": "yet because we don't know\neach other's private keys. But if either of us\nreveals the private key, then the other party\ncan sign with it.",
    "start": "383640",
    "end": "390240"
  },
  {
    "text": "So if this is Bob's and\nthis is Alice's, they can both compute little r times\nG by doing this operation.",
    "start": "390240",
    "end": "398599"
  },
  {
    "text": "They both share public keys and\ncompute the shared public key. But they cannot sign, because\nneither of them knows little r.",
    "start": "398600",
    "end": "405460"
  },
  {
    "text": " And then let's say Alice says,\nOK, Bob, here's this little c,",
    "start": "405460",
    "end": "413293"
  },
  {
    "text": "gives it to Bob. Bob says, OK, now\nI know a little r. But Alice doesn't.",
    "start": "413293",
    "end": "419240"
  },
  {
    "text": "So this is a really\nnice way to do it, because it saves a lot of space.",
    "start": "419240",
    "end": "425250"
  },
  {
    "text": "So instead, the script\nis now just KeyD-- oh, I should have put R, oops.",
    "start": "425250",
    "end": "430930"
  },
  {
    "text": "KeyD or KeyA and time. So instead of having\nthis key and time passes,",
    "start": "430930",
    "end": "438200"
  },
  {
    "text": "or these other two\nkeys both sign, you just have a single key\nthat can sign immediately,",
    "start": "438200",
    "end": "443420"
  },
  {
    "text": "or another key that can\nsign after a period of time. So the actual\nscript used is this.",
    "start": "443420",
    "end": "452360"
  },
  {
    "text": "You say OP_IF, the\nKeyR, OP_ELSE, delay,",
    "start": "452360",
    "end": "457849"
  },
  {
    "text": "OP_CHECKSEQUENCEVERIFY, OP_DROP,\nthen the KeyA, then the ENDIF, then the OP_CHECKSIG. So I'll walk through\nthis because it's",
    "start": "457850",
    "end": "464030"
  },
  {
    "text": "a little confusing. The OP_IF takes an\nitem off the stack, and it's either true or false.",
    "start": "464030",
    "end": "470395"
  },
  {
    "text": "So the first thing\nyou have to do is you have to indicate\nwhich of these two paths you're going to use.",
    "start": "470395",
    "end": "476210"
  },
  {
    "text": "Either you're going to\nput KeyR on the stack, or you're going to put\nthis delay number, which",
    "start": "476210",
    "end": "482660"
  },
  {
    "text": "is, say, 100 blocks, put\nan OP_CHECKSEQUENCEVERIFY to verify that it has been\n100 blocks since you created",
    "start": "482660",
    "end": "489030"
  },
  {
    "text": "the transaction you're spending. And then you have\nto drop the delay. This was to ensure\ncompatibility,",
    "start": "489030",
    "end": "494870"
  },
  {
    "text": "since it's a soft fork. So old nodes would see this. Old nodes would see this,\nthey would see a no-op,",
    "start": "494870",
    "end": "501500"
  },
  {
    "text": "and then they would see the drop\nto get rid of this whole thing. So the old nodes\nwouldn't see it at all.",
    "start": "501500",
    "end": "508400"
  },
  {
    "text": "Then you have a KeyA\nput on the stack, and then you end\nthe IF statement, and then you check signatures.",
    "start": "508400",
    "end": "513500"
  },
  {
    "text": "So really the IF\nstatement is just determining which key gets\npushed onto the stack.",
    "start": "513500",
    "end": "521340"
  },
  {
    "text": "And then after the\nIF statement, there is a CHECKSIG to check the\nsignature from that key.",
    "start": "521340",
    "end": "526690"
  },
  {
    "text": "So for example, if you're\nusing the revocation key, the key that has been\ncombined and revealed to you,",
    "start": "526690",
    "end": "533640"
  },
  {
    "text": "you just put a 1 on the stack,\nand then a signature from R. And then the OP_IF\nresults to true,",
    "start": "533640",
    "end": "539760"
  },
  {
    "text": "so it executes this by just\npushing the key onto the stack. Then it executes OP_ELSE,\nskips to OP_ENDIF,",
    "start": "539760",
    "end": "547230"
  },
  {
    "text": "and then does OP_CHECKSIG. So basically you say 1, execute\nOP_IF, KeyR, skip to CHECKSIG.",
    "start": "547230",
    "end": "554550"
  },
  {
    "text": "So it's just, you need\nto sign with this key. Or you say 0, and\nsignature from A.",
    "start": "554550",
    "end": "560610"
  },
  {
    "text": "And then so the OP_IF takes\na 0, it skips to OP_ELSE",
    "start": "560610",
    "end": "565890"
  },
  {
    "text": "because it's not true, it\npushes delay onto the stack,",
    "start": "565890",
    "end": "573870"
  },
  {
    "text": "performs CHECKSEQUENCEVERIFY to\nmake sure that enough time has passed, drops the delay\nnumber off the stack,",
    "start": "573870",
    "end": "580160"
  },
  {
    "text": "which is a little\nugly-- it would be nicer if OP_CHECKSEQUENCEVERIFY did\nthat itself, but it doesn't--",
    "start": "580160",
    "end": "586529"
  },
  {
    "text": "then pushes KeyA onto the\nstack, ends the IF statement,",
    "start": "586530",
    "end": "592380"
  },
  {
    "text": "and checks the signature. So it's a little\nmore complicated than in C, where you just can\nsay, KeyD or KeyA and time.",
    "start": "592380",
    "end": "601770"
  },
  {
    "text": "But this is stack-based. And it's not too hard when\nyou get these things to work.",
    "start": "601770",
    "end": "608370"
  },
  {
    "text": "So any questions\nabout this setup? Yes.",
    "start": "608370",
    "end": "613420"
  },
  {
    "text": "AUDIENCE: So what's\nOP_DROP again? TADGE DRYJA: OP_DROP takes\nthe topmost item on the stack and deletes it, and all the\nlower items come back up.",
    "start": "613420",
    "end": "623400"
  },
  {
    "text": "Yeah, it's just so that,\ncompatibility-wise-- there would be ways to--",
    "start": "623400",
    "end": "628470"
  },
  {
    "text": " since OP_CHECKSEQUENCEVERIFY\nbasically, this used to be a no-op\nwhere it did nothing.",
    "start": "628470",
    "end": "635280"
  },
  {
    "text": "And then the soft fork was,\nOK, we're redefining no-op 3, I believe, to\nOP_CHECKSEQUENCEVERIFY, where",
    "start": "635280",
    "end": "641790"
  },
  {
    "text": "it looks at, basically,\nthe age of your inputs, and how many confirmations\nyour inputs have had,",
    "start": "641790",
    "end": "649649"
  },
  {
    "text": "or really the specific input\nyou're spending in this case. Old nodes would just\nsee it as a no-op,",
    "start": "649650",
    "end": "655680"
  },
  {
    "text": "and so you could put\nsomething like delay, OP_CHECKSEQUENCEVERIFY,\nand then an OP code",
    "start": "655680",
    "end": "661500"
  },
  {
    "text": "around here that says, make\nsure the top item on the stack is greater than 5.",
    "start": "661500",
    "end": "667200"
  },
  {
    "text": "And if this consumed\nthe delay value by taking it off the\nstack, the old nodes",
    "start": "667200",
    "end": "672630"
  },
  {
    "text": "might say, oh, this isn't valid. Even though this is a no-op,\nthe subsequent OP code",
    "start": "672630",
    "end": "679800"
  },
  {
    "text": "causes this to fail. Whereas in the new\nversion, it would be like, no, this is good because\nthis consumes that value.",
    "start": "679800",
    "end": "686580"
  },
  {
    "text": "And that would actually make it\na hard fork, because then there would be transactions\nwhere the old nodes thought",
    "start": "686580",
    "end": "692040"
  },
  {
    "text": "it was not good and the new\nnodes thought, yes, this is OK. So to ensure that\nthis only restricts",
    "start": "692040",
    "end": "700650"
  },
  {
    "text": "the validity of scripts,\nit doesn't pop that off. So you have to manually drop it.",
    "start": "700650",
    "end": "707040"
  },
  {
    "text": "And DROP is there from before. So to an old node, it would\nsay delay, no OP_DROP.",
    "start": "707040",
    "end": "712247"
  },
  {
    "text": "And it's like, OK, you put\nsomething in the stack, you do nothing, and then you\ntake it off the stack-- fine.",
    "start": "712247",
    "end": "718230"
  },
  {
    "text": "So that's just a\ncompatibility thing. If you were going to\nmake it from scratch, you'd probably do\nit differently.",
    "start": "718230",
    "end": "724670"
  },
  {
    "text": "Other questions about this? OK, cool. ",
    "start": "724670",
    "end": "733240"
  },
  {
    "text": "So then you reveal keys. You keep revealing things each\ntime you make a new state.",
    "start": "733240",
    "end": "741040"
  },
  {
    "text": "And you can do these\nseveral times a second. You can do it 10 times a\nsecond, something like that.",
    "start": "741040",
    "end": "746640"
  },
  {
    "text": "So you can have\nmillions, billions of different old transactions. The problem is, you\ndo have to remember",
    "start": "746640",
    "end": "751930"
  },
  {
    "text": "all of these old private keys\nthat your counterparty has given to you. Because if you forget one, they\nmight broadcast a transaction",
    "start": "751930",
    "end": "761008"
  },
  {
    "text": "where you really need to know\nthat private key in order to grab the money immediately. So for example, you forget--",
    "start": "761008",
    "end": "770020"
  },
  {
    "text": "this was revoked, but you forgot\nabout it, and you're Alice, and then Bob broadcasts this.",
    "start": "770020",
    "end": "775712"
  },
  {
    "text": "You really need to\nknow that private key so you can grab Bob's five\ncoins with your combined key.",
    "start": "775713",
    "end": "783040"
  },
  {
    "text": "So you need to keep track of\nall of these little things. So it's 32 bytes each.",
    "start": "783040",
    "end": "788220"
  },
  {
    "text": "It's not great for scalability. So there's actually a\ncouple of different ways you could do this. How can you remember a\nchain of 32-byte secrets?",
    "start": "788220",
    "end": "798830"
  },
  {
    "text": "A merkle tree itself would\nhave a root here, and then a bunch of little hashes that\ngo up to the tree's root.",
    "start": "798830",
    "end": "810050"
  },
  {
    "text": "So if these were secrets-- you can't go back down, right? So if you're like, OK, I got\nsecret 0, secret 1, secret 2,",
    "start": "810050",
    "end": "817540"
  },
  {
    "text": "secret 3, well, I've got the\nparents of these two things, but I can't actually\nremember them any better.",
    "start": "817540",
    "end": "823180"
  },
  {
    "text": "So a real simple way-- say, OK, I've got-- and you can construct\nit however you want.",
    "start": "823180",
    "end": "829240"
  },
  {
    "text": "Obviously if your counterparty\nis not cooperating and these secret numbers\nare just completely random,",
    "start": "829240",
    "end": "834519"
  },
  {
    "text": "there's nothing you can do. If he just says, hey,\nI'm going to give you secret 0, secret 1,\nsecret 2, there's",
    "start": "834520",
    "end": "839740"
  },
  {
    "text": "no special properties\nabout these things. I can't do anything. The simplest way-- what's\na real simple way to say,",
    "start": "839740",
    "end": "846790"
  },
  {
    "text": "OK, I'm going to reveal\nsecrets sequentially, and then you can\nstore fewer of them? ",
    "start": "846790",
    "end": "859830"
  },
  {
    "text": "It's sort of like a\nblockchain, right? [CHUCKLING] So you could just say, OK,\nwell, I create secret 3.",
    "start": "859830",
    "end": "870750"
  },
  {
    "text": "Secret 2 is the\nhash of secret 3. Secret 1 is the\nhash of secret 2.",
    "start": "870750",
    "end": "879860"
  },
  {
    "text": "And so now I reveal 1. You don't know what\n2 is, and so on.",
    "start": "879860",
    "end": "885050"
  },
  {
    "text": "So 0 equals hash of 1. So you could just\nhave a linear chain,",
    "start": "885050",
    "end": "891140"
  },
  {
    "text": "like this, so 0, 1, 2, 3. If you remember 3, you can\ncompute 2, and 1, and 0.",
    "start": "891140",
    "end": "897830"
  },
  {
    "text": "If you remember 2, you can\ncompute 1 and 0, but not 3. So you can do that.",
    "start": "897830",
    "end": "902955"
  },
  {
    "text": "That would actually\nprobably work fine. But we always want to\nmake unnecessary complex optimizations to things.",
    "start": "902955",
    "end": "909860"
  },
  {
    "text": "So the problem with this is if\nyou've got a billion of them, and you need to go\nback to the first one,",
    "start": "909860",
    "end": "916550"
  },
  {
    "text": "you need to compute a\nbillion hash operations. That's kind of slow. So what we do--\nor the basic idea,",
    "start": "916550",
    "end": "924770"
  },
  {
    "text": "there's multiple\nimplementations, slight variations-- you have a hash tree. So you reveal secrets\none at a time,",
    "start": "924770",
    "end": "930680"
  },
  {
    "text": "you store only log(n)\nsecrets, and you re-compute any secret you want\nwith something around log(n)",
    "start": "930680",
    "end": "937209"
  },
  {
    "text": "operations. I called it Elkrem. I think there's an\nactual paper that basically is this, called GGM.",
    "start": "937210",
    "end": "943810"
  },
  {
    "text": "And that's, I think,\nwritten by people at MIT. But I called it Elkrem because\nit's basically a merkle",
    "start": "943810",
    "end": "950110"
  },
  {
    "text": "tree backwards, because\nthe arrows point the other direction. So in this case, you\nstart with a route-- you",
    "start": "950110",
    "end": "957980"
  },
  {
    "text": "start with something up here. And you say, OK, if I\nwanted to send to the left,",
    "start": "957980",
    "end": "965220"
  },
  {
    "text": "I append a 0 to the\nhash value of this root, and I hash to get that one.",
    "start": "965220",
    "end": "971550"
  },
  {
    "text": "And if I want to go right,\nI append a 1 at the end, hash that, and then\nI go down here.",
    "start": "971550",
    "end": "976980"
  },
  {
    "text": "So what that lets you do is-- there is a sender\nand a receiver. The sender just computes\na route, and stores that.",
    "start": "976980",
    "end": "984810"
  },
  {
    "text": "They make a random\nroute up, store it, and then they also\nkeep track of, OK how many secrets\nhave I given?",
    "start": "984810",
    "end": "991019"
  },
  {
    "text": "The receiver just receives\nthe first one, number 0-- can't do anything.",
    "start": "991020",
    "end": "997220"
  },
  {
    "text": "They receive 1. OK, still can't do anything. They receive 2.",
    "start": "997220",
    "end": "1002470"
  },
  {
    "text": "Now they can say, OK, well\nI can throw away 0 and 1, because if I want to compute\n0 and 1, I can just store 2.",
    "start": "1002470",
    "end": "1008140"
  },
  {
    "text": "And if I want them\nto send to the left, append to zero, and hash if\nI want to send to the right--",
    "start": "1008140",
    "end": "1013340"
  },
  {
    "text": "So I don't store\nthese, but I know they're still computable\nfor me if I ever",
    "start": "1013340",
    "end": "1018660"
  },
  {
    "text": "want to grab them back. I receive 3, can't do anything. I receive 4, can't do anything.",
    "start": "1018660",
    "end": "1026010"
  },
  {
    "text": "I receive 5, now I can do\nthe same thing with 3 and 4, remove those from the disk,\nand only store 2 and 5.",
    "start": "1026010",
    "end": "1035130"
  },
  {
    "text": "So if I get a request for\n3, I can easily compute it. And then I receive 6, and I\ncan delete those two as well.",
    "start": "1035130",
    "end": "1041159"
  },
  {
    "text": "So as I go up the\ntree, sometimes I only have to store one\nthing, sometimes I have to store three\nthings, because that's",
    "start": "1041160",
    "end": "1049272"
  },
  {
    "text": "the height of the tree. Well, it's basically you\nhave to store at most one",
    "start": "1049272",
    "end": "1054540"
  },
  {
    "text": "on every level, and\nthen sometimes two if there are two leaves. So basically log(n) storage,\nand computing hashes",
    "start": "1054540",
    "end": "1062909"
  },
  {
    "text": "is pretty quick, too. So that's a fun way\nto only have to store a very small amount of data.",
    "start": "1062910",
    "end": "1070170"
  },
  {
    "text": "Any questions about this? OK, so we're going quick. ",
    "start": "1070170",
    "end": "1076326"
  },
  {
    "text": "[INAUDIBLE] quick. OK, so we'll talk about\ncross-chain swaps for most of the bulk of this day.",
    "start": "1076326",
    "end": "1083080"
  },
  {
    "text": "So there are altcoins. I mostly work on Bitcoin. I think a lot of the\nresearch is on Bitcoin.",
    "start": "1083080",
    "end": "1089350"
  },
  {
    "text": "But there's a lot of\ndifferent coins, too. People saw the idea of Bitcoin\nand said, hey, let's copy it.",
    "start": "1089350",
    "end": "1096297"
  },
  {
    "text": "So initially, most of\nthem were just copies.  There was a site\ncalled coingen.io.",
    "start": "1096297",
    "end": "1102590"
  },
  {
    "text": "So like 2012,\nthere started to be a lot of all coins, like\nLitecoin, and Dogecoin,",
    "start": "1102590",
    "end": "1110000"
  },
  {
    "text": "and things like that. And most of them were\nreal small changes, where they took the Bitcoin\nsource code on GitHub,",
    "start": "1110000",
    "end": "1117318"
  },
  {
    "text": "and they changed a couple\nnumbers here and there, and they said, OK,\nwell, it's a new coin. And then BlueMatt made a site\ncalled coingen.io, where you",
    "start": "1117318",
    "end": "1125480"
  },
  {
    "text": "could do it all very easily. For people who weren't\nprogramming-savvy, they could just make their\nown altcoin by menus.",
    "start": "1125480",
    "end": "1132530"
  },
  {
    "text": "There's a website, you say, I\nwant it to be called Tadgecoin, I want there to be 25\ncoins every three minutes,",
    "start": "1132530",
    "end": "1139220"
  },
  {
    "text": "and I want-- you know, just a\nbunch of things. You could upload\na little picture, and it would make a program\nfor you based on those things.",
    "start": "1139220",
    "end": "1149470"
  },
  {
    "text": "And then I think\nhe sold the site. I think it was the first\nblockchain technology company, as far as I'm concerned.",
    "start": "1149470",
    "end": "1155559"
  },
  {
    "text": "OK, so then recent ones\nare very different. People trade altcoins\nfor bitcoins,",
    "start": "1155560",
    "end": "1161450"
  },
  {
    "text": "and trade altcoins for altcoins,\nand they use exchanges. I don't know if-- have people here used\nexchanges to trade altcoins?",
    "start": "1161450",
    "end": "1170160"
  },
  {
    "text": "Some. I actually have. I hadn't until last year. But there was these\nsort of hard forks",
    "start": "1170160",
    "end": "1178320"
  },
  {
    "text": "from Bitcoin, like Bitcoin\nCash, and Bitcoin Gold, and Bitcoin whatever. And so I actually\nopened an account,",
    "start": "1178320",
    "end": "1183510"
  },
  {
    "text": "and sold them, and\ngot more Bitcoins. [CHUCKLING] How do you trade? Well, you use an exchange.",
    "start": "1183510",
    "end": "1188730"
  },
  {
    "text": "And so the current\nexchange model, pretty much without fail,\nis give us all your coins,",
    "start": "1188730",
    "end": "1194730"
  },
  {
    "text": "post orders on our site\nto swap with other users, and then ask for\nyour coins back.",
    "start": "1194730",
    "end": "1200600"
  },
  {
    "text": "So the \"give us all your\ncoins\" part, it works fine. They give you an address,\nyou send your coins",
    "start": "1200600",
    "end": "1207500"
  },
  {
    "text": "to their address, and\nit'll appear on their site, generally. But you definitely\ncan send your coins.",
    "start": "1207500",
    "end": "1214100"
  },
  {
    "text": "The \"ask for your coins back\" is\nwhere the model tends to fail. There's many, many cases where\nthey don't give them back.",
    "start": "1214100",
    "end": "1224450"
  },
  {
    "text": "And there's a lot\nof reasons for this. So Mt. Gox was one of the most\nprominent early ones,",
    "start": "1224450",
    "end": "1232070"
  },
  {
    "text": "but it certainly\nwasn't the first. Probably one of the first\nwas called MyBitcoins.com.",
    "start": "1232070",
    "end": "1238540"
  },
  {
    "text": "And then it was sort of-- I don't know if it\nwas intentional, but the joke, after, was like,\nwell, it's his bitcoins now.",
    "start": "1238540",
    "end": "1245184"
  },
  {
    "text": "[CHUCKLING]  It was more of a web wallet\nthat had private keys",
    "start": "1245184",
    "end": "1250909"
  },
  {
    "text": "than an actual exchange. But a lot of these exchanges-- they're really easy to set up.",
    "start": "1250910",
    "end": "1256910"
  },
  {
    "text": "You just write some\nsoftware, and people start sending you coins. And then either there's\ninternal problems",
    "start": "1256910",
    "end": "1264110"
  },
  {
    "text": "where you've got\nsome rogue employee, or the rogue employee\nis the only employee, and someone just realizes, hey,\nthis computer in front of me",
    "start": "1264110",
    "end": "1272240"
  },
  {
    "text": "has $20 million\nworth of stuff on it. I think I'll just unplug\nit and keep all the money.",
    "start": "1272240",
    "end": "1280370"
  },
  {
    "text": "Also hackers, right? They're probably\nthe best targets for trying to intrude\nand hack into a system",
    "start": "1280370",
    "end": "1286850"
  },
  {
    "text": "that you can find. Because there's a whole ton\nof money on this computer. It's not like data or, oh, I\nget someone's Facebook pictures",
    "start": "1286850",
    "end": "1294680"
  },
  {
    "text": "or I get someone's\ncredit card numbers. Yeah, that's nice, but\nbitcoins are sort of money,",
    "start": "1294680",
    "end": "1301019"
  },
  {
    "text": "and you just steal them. OK, so other problems\nwith the exchange model is that people tend\nto trust it a lot,",
    "start": "1301020",
    "end": "1306650"
  },
  {
    "text": "and they think, well, this is-- they assume that\nit's like a bank,",
    "start": "1306650",
    "end": "1311660"
  },
  {
    "text": "and banks are very trustworthy,\nbecause in recent memory there haven't really been\nbank failures, at least in this country.",
    "start": "1311660",
    "end": "1317127"
  },
  {
    "text": "So they sort of carry that trust\nforward, and bad things happen. So the idea is,\nwouldn't it be cool",
    "start": "1317127",
    "end": "1323090"
  },
  {
    "text": "if we could have\ncross-chain swaps, where we have some kind of way where,\nI've got a bunch of coinA,",
    "start": "1323090",
    "end": "1329600"
  },
  {
    "text": "you've got a bunch of\ncoinB, and we can swap between them without giving\ncustody to some third party",
    "start": "1329600",
    "end": "1336110"
  },
  {
    "text": "or even giving\ncustody to each other. So you can do this using Hash\nTime Locked Contracts, just",
    "start": "1336110",
    "end": "1342620"
  },
  {
    "text": "like in the Lighting Network. So you get this coin if and\nonly if I get this other coin.",
    "start": "1342620",
    "end": "1347960"
  },
  {
    "text": "You want them to be atomic. Even if it's very quick, you\ndon't want any period of time",
    "start": "1347960",
    "end": "1353180"
  },
  {
    "text": "in which one party has all the\nassets or more of the assets.",
    "start": "1353180",
    "end": "1358590"
  },
  {
    "text": "So the interesting\nthing about this is the Lightning Network\nsort of does this already.",
    "start": "1358590",
    "end": "1363870"
  },
  {
    "text": "The Lightning Network is a\nway to make atomic payments between different channels.",
    "start": "1363870",
    "end": "1369532"
  },
  {
    "text": "And then if you look at\nthese channels and say, well, do the channels have\nto be on the same coin,",
    "start": "1369532",
    "end": "1375260"
  },
  {
    "text": "do they have to be in\nthe same blockchain? And basically, no,\nnot much difference has to happen for them to\nbe different blockchains.",
    "start": "1375260",
    "end": "1384100"
  },
  {
    "text": "OK, so this is the HTLC\nslide from last time. It's similar in that you have\nthese two outputs, the same as",
    "start": "1384100",
    "end": "1391980"
  },
  {
    "text": "in a regular lightning payment\nchannel that's at rest. So for example, Bob holds this,\nwhere if he broadcasts this,",
    "start": "1391980",
    "end": "1399450"
  },
  {
    "text": "Alice gets two coins\nright off the bat, Bob needs to wait 100 blocks, or\nAlice can know Bob's revocation",
    "start": "1399450",
    "end": "1409170"
  },
  {
    "text": "key, and she can get seven coins\nor he gets the seven coins. And then you've got this HTLC,\nHash Time Locked Contract,",
    "start": "1409170",
    "end": "1415289"
  },
  {
    "text": "where Alice needs to a\npre-image [INAUDIBLE]..",
    "start": "1415290",
    "end": "1421130"
  },
  {
    "text": "Well, yeah, Alice needs to\nknow R, this receipt, or Bob",
    "start": "1421130",
    "end": "1426750"
  },
  {
    "text": "has to wait. But the difference in waiting\nis this is a relative time lock,",
    "start": "1426750",
    "end": "1433500"
  },
  {
    "text": "so that Bob has to wait 100\nblocks after he broadcasts",
    "start": "1433500",
    "end": "1438630"
  },
  {
    "text": "this transaction. Whereas in this case, Bob has\nto wait until height 500,000,",
    "start": "1438630",
    "end": "1445470"
  },
  {
    "text": "regardless of when he\nbroadcasts this transaction. So it may be that he can\nbroadcast this transaction",
    "start": "1445470",
    "end": "1450540"
  },
  {
    "text": "and immediately spend\nby signing here, because that time has passed.",
    "start": "1450540",
    "end": "1455580"
  },
  {
    "text": "So it's seems like\na small distinction, but it's actually pretty\nimportant for this to be just absolute time.",
    "start": "1455580",
    "end": "1463130"
  },
  {
    "text": "So that's how an HTLC works. This output's\nAlice's, no question.",
    "start": "1463130",
    "end": "1468810"
  },
  {
    "text": "This output should be Bob's. And by should, I\nmean something's",
    "start": "1468810",
    "end": "1473850"
  },
  {
    "text": "gone pretty seriously wrong\nif Alice takes this money.",
    "start": "1473850",
    "end": "1478919"
  },
  {
    "text": "This only is due to fraud. And fraud is not like in\na legal, defined sense. But we sort of can\nthink of, basically,",
    "start": "1478920",
    "end": "1485370"
  },
  {
    "text": "this is always going to be\nAlice's, this is approximately always going to be Bob's. This one, we're really not sure.",
    "start": "1485370",
    "end": "1491730"
  },
  {
    "text": "This can fail, and it's\nnot due to any malice. This can-- it should be Alice's.",
    "start": "1491730",
    "end": "1498840"
  },
  {
    "text": "You're trying to pay Alice here. But it may well be the case\nthat Bob takes it back. And that's not due\nto fraud, that's",
    "start": "1498840",
    "end": "1505410"
  },
  {
    "text": "just due to computers crashing,\nor networks not working right, or something like that.",
    "start": "1505410",
    "end": "1510540"
  },
  {
    "text": "This can sort of\ninnocently be broadcast and go back to Bob,\nwhereas this can't, really.",
    "start": "1510540",
    "end": "1517560"
  },
  {
    "text": "Any questions about\nthe HTLC basic idea? So Alice needs to\nknow this secret,",
    "start": "1517560",
    "end": "1525150"
  },
  {
    "text": "or Bob has to wait\nuntil a certain time. OK, so the cross-chain\nswaps is basically",
    "start": "1525150",
    "end": "1532530"
  },
  {
    "text": "the same as a routing\npayment in Lightning. Before, we said, OK, Alice\nhas a channel with Bob,",
    "start": "1532530",
    "end": "1537810"
  },
  {
    "text": "Bob has a channel\nwith Carol, and now Alice wants to pay Carol\nwithout opening a new channel.",
    "start": "1537810",
    "end": "1544710"
  },
  {
    "text": "In the case of\nlightning, where it's all on the same\nblockchain, Alice could open a payment\nchannel to Carol",
    "start": "1544710",
    "end": "1550290"
  },
  {
    "text": "and spend directly that way. In the case where these two\nare different blockchains,",
    "start": "1550290",
    "end": "1555480"
  },
  {
    "text": "you can't actually do that. You can't say,\noh, I'm going to-- there's no defined\nchannel that will",
    "start": "1555480",
    "end": "1560850"
  },
  {
    "text": "link two different blockchains. The other aspect\nis, although this can work with three\nparties, in the case",
    "start": "1560850",
    "end": "1567290"
  },
  {
    "text": "of swaps, you're\ngenerally not saying, hey, Bob, I will pay you five\nDogecoins if you pay Carol 100",
    "start": "1567290",
    "end": "1576120"
  },
  {
    "text": "Vertcoins. You're usually saying, if\nyou pay me 100 Vertcoins. So usually it's\nAlice sending to Bob,",
    "start": "1576120",
    "end": "1584269"
  },
  {
    "text": "who's sending back to Alice. It still works if this is\nthe third party, Carol.",
    "start": "1584270",
    "end": "1589299"
  },
  {
    "text": "But it sort of doesn't make as\nmuch sense, because generally you're saying, hey, I'll give\nyou this if you give me that. ",
    "start": "1589300",
    "end": "1596020"
  },
  {
    "text": "So in this case, we have\ntwo different blockchains. We've actually reduced\nthe number of parties, where it's just Alice and Bob.",
    "start": "1596020",
    "end": "1602303"
  },
  {
    "text": "But we've got two\ndifferent blockchains. We've got Dogecoin,\nwhich I think is yellow, and then Vertcoin is greenish.",
    "start": "1602303",
    "end": "1608554"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] TADGE DRYJA: Oh, because\nthey don't have SegWit. Well, say Dogecoin\nupgrades pretty soon.",
    "start": "1608555",
    "end": "1615597"
  },
  {
    "text": "[CHUCKLING] So you could, but you'd\nhave to write a lot of code to deal with that.",
    "start": "1615597",
    "end": "1620620"
  },
  {
    "text": "And to us, it's way\neasier to just merge and-- AUDIENCE: They don't have\nCHECKSEQUENCEVERIFY on?",
    "start": "1620620",
    "end": "1626750"
  },
  {
    "text": "There's probably ways\naround it, but yeah-- TADGE DRYJA: Just upgrade-- who's in charge of Doge?",
    "start": "1626750",
    "end": "1631910"
  },
  {
    "text": "I don't know. Tell them to upgrade. So a lot of these\naltcoins, there's",
    "start": "1631910",
    "end": "1638080"
  },
  {
    "text": "sort of archaeological\naspects to them, where you can see\nwhere they branched off of the main Bitcoin codebase.",
    "start": "1638080",
    "end": "1643899"
  },
  {
    "text": "Because a lot of times\nthey don't get updated because no one's\nreally working on them. Despite no one really working\non them or looking at them,",
    "start": "1643900",
    "end": "1650500"
  },
  {
    "text": "they can still be worth\na billion dollars, as I think Doge was\na few months ago. ",
    "start": "1650500",
    "end": "1656725"
  },
  {
    "text": "So sometimes they catch\nup, and they're like, oh, let's take all the code\nfrom Bitcoin that they've developed from the last\nfew years and apply it.",
    "start": "1656725",
    "end": "1663340"
  },
  {
    "text": "Sometimes the opposite\nhappens, where an altcoin will make something cool, and people\nin Bitcoin will merge it in,",
    "start": "1663340",
    "end": "1668710"
  },
  {
    "text": "but it's generally the\nopposite direction. OK, so you've got these two\nchannels that have been set up.",
    "start": "1668710",
    "end": "1677279"
  },
  {
    "text": "And Alice wants to sell her\nDogecoin and buy Vertcoin.",
    "start": "1677280",
    "end": "1683040"
  },
  {
    "text": "So you have the same HTLC\nconstruction, where Alice--",
    "start": "1683040",
    "end": "1688797"
  },
  {
    "text": "what's interesting in\nthis case is that it's the same person on both sides. So there's actually some\noptimizations you can use.",
    "start": "1688797",
    "end": "1693815"
  },
  {
    "text": "But forget those for a second. Alice computes a\nrandom number, R, hashes it to make\nH. She sends it",
    "start": "1693815",
    "end": "1701168"
  },
  {
    "text": "to herself, which doesn't really\nmake any sense in this case. So you can skip that step.",
    "start": "1701168",
    "end": "1706429"
  },
  {
    "text": "Alice already knows H\nand already knows R, so-- but Alice doesn't have to\nbe Alice, it could be Carol.",
    "start": "1706430",
    "end": "1715010"
  },
  {
    "text": "So there's optimizations\nthat you can do when they're the same person. OK, so she constructs\nan HTLC to Bob.",
    "start": "1715010",
    "end": "1721690"
  },
  {
    "text": "She says, OK, if Bob knows\nR, he gets this money. Otherwise, Alice gets\nit after 5 o'clock.",
    "start": "1721690",
    "end": "1729290"
  },
  {
    "text": "Bob says, OK, I don't know R,\nso I can't get these Dogecoins.",
    "start": "1729290",
    "end": "1734900"
  },
  {
    "text": "Bob then forwards it to Alice,\nsaying, OK, if Alice knows R,",
    "start": "1734900",
    "end": "1741440"
  },
  {
    "text": "she gets the coins, if Bob\nwaits till after 4 o'clock, he gets the coins.",
    "start": "1741440",
    "end": "1749100"
  },
  {
    "text": "So it's sort of like why\nmake this construction? It actually still makes sense,\nbecause even though Bob knows",
    "start": "1749100",
    "end": "1757100"
  },
  {
    "text": "that Alice knows R, Alice\nwill have to reveal R in order",
    "start": "1757100",
    "end": "1762650"
  },
  {
    "text": "to take the coins, right?",
    "start": "1762650",
    "end": "1767985"
  },
  {
    "text": "So it's saying, OK,\nyou need to know R, and you need to not just know R,\nbut you have to show everyone. Because the actual\nscript says, OK, you",
    "start": "1767985",
    "end": "1774740"
  },
  {
    "text": "need to know the pre-image\nof this 20-byte hash. And when you actually\nspend, you have",
    "start": "1774740",
    "end": "1781129"
  },
  {
    "text": "to put that pre-image\nin the blockchain. You have to put it in your\ninput for your transaction,",
    "start": "1781130",
    "end": "1786200"
  },
  {
    "text": "and then Bob can see it. So the idea is, if Alice closes\nthis channel in Vertcoin, takes the coins by using\nR, Bob will know R,",
    "start": "1786200",
    "end": "1794360"
  },
  {
    "text": "and Bob will know it's\nthe same R that he can use to take the coins\non the Dogecoin network.",
    "start": "1794360",
    "end": "1801200"
  },
  {
    "text": "So you add these two HTLCs. You then clear them out. So instead of revealing\nR on the blockchain,",
    "start": "1801200",
    "end": "1810169"
  },
  {
    "text": "Alice can just reveal\nR directly to Bob, say, I'm clearing out\nthis HTLC because here's",
    "start": "1810170",
    "end": "1816600"
  },
  {
    "text": "R. You know that I can do this,\nso just give me the coins. You also know R, so you\ncan take the coins yourself",
    "start": "1816600",
    "end": "1823799"
  },
  {
    "text": "if I don't cooperate\non that end. But hopefully she does. So then you can get\nrid of the HTLC. Now it's back down\nthe two outputs.",
    "start": "1823800",
    "end": "1830000"
  },
  {
    "text": " And then Bob says, OK,\nI've lost the Vertcoin",
    "start": "1830000",
    "end": "1838210"
  },
  {
    "text": "and I haven't really\ngotten the Dogecoin yet, but I know I can close the\nchannel and take it if need be.",
    "start": "1838210",
    "end": "1844160"
  },
  {
    "text": "And then Bob goes\nto Alice, and she already knows R, but look, you\nknow that I know R, let's clear",
    "start": "1844160",
    "end": "1849270"
  },
  {
    "text": "this. And then Alice can just\nsend the coins that way. ",
    "start": "1849270",
    "end": "1855990"
  },
  {
    "text": "OK, so any questions\nabout this setup? Yes. AUDIENCE: Because\nthere's latency,",
    "start": "1855990",
    "end": "1861179"
  },
  {
    "text": "can Alice mess with Bob,\nbasically, take the Vertcoin before Bob has a\nchance to get the Doge,",
    "start": "1861180",
    "end": "1868120"
  },
  {
    "text": "and basically screw Bob? TADGE DRYJA: Yeah, well, that's\nwhy you have different times",
    "start": "1868120",
    "end": "1873340"
  },
  {
    "text": "here. So yes, that is possible, that\nyou could get to this step,",
    "start": "1873340",
    "end": "1880309"
  },
  {
    "text": "and then Alice goes offline\nand shuts the channels down, closes the channels. But the idea is that Bob\ncan grab these coins back",
    "start": "1880310",
    "end": "1888950"
  },
  {
    "text": "after 4 PM, whereas Alice\nhas to wait until 5 PM to grab these coins back.",
    "start": "1888950",
    "end": "1894050"
  },
  {
    "text": " So if Alice closes and tries to\nwait till right before 4:00 PM",
    "start": "1894050",
    "end": "1903640"
  },
  {
    "text": "and then immediately grab\nthese coins, Bob's actually OK. Because Bob says, OK, well,\nyou grabbed the Vertcoins,",
    "start": "1903640",
    "end": "1910950"
  },
  {
    "text": "but I actually have another\nhour until I have to-- I have an hour to reveal\nR where you're not",
    "start": "1910950",
    "end": "1917379"
  },
  {
    "text": "able to get these coins back. So having this incrementing\ntime can help against that.",
    "start": "1917380",
    "end": "1922420"
  },
  {
    "text": " An hour is probably not enough.",
    "start": "1922420",
    "end": "1928809"
  },
  {
    "text": "The trade-off to\nhaving these times is, if you have it\nvery far in the future,",
    "start": "1928810",
    "end": "1933910"
  },
  {
    "text": "with very large gaps, those\nHTLCs can get stuck there. And if Alice just\nsays, look, I'm",
    "start": "1933910",
    "end": "1940930"
  },
  {
    "text": "leaving this third output\nin the transaction, that can be annoying.",
    "start": "1940930",
    "end": "1946150"
  },
  {
    "text": "Or if it gets stuck on chain,\nit might take a long time to get it back. So you want long\nenough times that you",
    "start": "1946150",
    "end": "1952870"
  },
  {
    "text": "don't worry about\nthese timing attacks, where someone\nimmediately broadcasts, and now you only have an\nhour, and maybe the blockchain",
    "start": "1952870",
    "end": "1959425"
  },
  {
    "text": "is congested. Versus the annoyance\nof, oh, it closed,",
    "start": "1959425",
    "end": "1965450"
  },
  {
    "text": "and now I have to\nwait until 5:00 PM. So those are the\ntrade-offs there. Any other questions?",
    "start": "1965450",
    "end": "1971578"
  },
  {
    "start": "1971578",
    "end": "1979050"
  },
  {
    "text": "OK, so cross-chain swaps-- H can be revealed-- sorry, R--",
    "start": "1979050",
    "end": "1986770"
  },
  {
    "text": "well, H just goes\ninto either chain, R is then revealed\non either chain, so that both parties need\nto watch both blockchains.",
    "start": "1986770",
    "end": "1996520"
  },
  {
    "text": "This sort of makes sense,\nin that the channels are on two different\nblockchains, and both parties",
    "start": "1996520",
    "end": "2001799"
  },
  {
    "text": "have a channel on each. So the receiver doesn't\nneed to be the initiator.",
    "start": "2001800",
    "end": "2007270"
  },
  {
    "text": "So it doesn't have to\nbe Alice on both sides, but in most cases I think\nit probably will be. ",
    "start": "2007270",
    "end": "2013800"
  },
  {
    "text": "Alice has a Vertcoin\nchannel, Alice also has a Dogecoin\nchannel, as does Bob. So they need to be\noperating on both networks.",
    "start": "2013800",
    "end": "2020940"
  },
  {
    "text": "There are possibilities where\nif you had, say, this was Carol, and she sent to Dave\nusing Litecoin--",
    "start": "2020940",
    "end": "2030840"
  },
  {
    "text": "so if you have Alice, Bob,\nCarol, Dave, Doge, Vertcoin, Litecoin--",
    "start": "2030840",
    "end": "2036930"
  },
  {
    "text": "Alice would not have to know\nabout anything but Dogecoin. So you actually only have\nto worry about the networks",
    "start": "2036930",
    "end": "2045510"
  },
  {
    "text": "that you have channels in,\neven though there are secrets that could appear in other--",
    "start": "2045510",
    "end": "2051638"
  },
  {
    "text": "well, no, sorry,\nthat's not true. So if this is Carol, Alice\ndoes have to look at Vertcoin,",
    "start": "2051639",
    "end": "2058710"
  },
  {
    "text": "because the Vertcoin\nnetwork could show things. So you have to look at\none additional chain.",
    "start": "2058710",
    "end": "2066359"
  },
  {
    "text": "So that's one of the issues\nwith cross-chain swaps, where you may be routing\nthrough a network",
    "start": "2066360",
    "end": "2074480"
  },
  {
    "text": "that you're not aware\nof, essentially. I don't think that's\nlikely in practice.",
    "start": "2074480",
    "end": "2079580"
  },
  {
    "text": "So like it could\nbe, I'll send you five Dogecoins if you\nsend her 20 Litecoins,",
    "start": "2079580",
    "end": "2085850"
  },
  {
    "text": "and then you send back\nDogecoins to this other place, but it's possible. Yes. AUDIENCE: I just\nwant to make sure",
    "start": "2085850",
    "end": "2092096"
  },
  {
    "text": "that I'm understanding this. So when they're both Alice,\nessentially that scenario",
    "start": "2092096",
    "end": "2097430"
  },
  {
    "text": "is Alice is exchanging\nDogecoin for Vertcoin. TADGE DRYJA: Yes. AUDIENCE: And then\nif on the right",
    "start": "2097430",
    "end": "2103910"
  },
  {
    "text": "is Carol, that's saying Alice is\ngoing to pay Carol in Dogecoin,",
    "start": "2103910",
    "end": "2110930"
  },
  {
    "text": "even though she's\nreceiving Vertcoin. TADGE DRYJA: Right. Carol receives Vertcoin,\nAlice loses Dogecoin.",
    "start": "2110930",
    "end": "2118369"
  },
  {
    "text": "So it's an exchange [INAUDIBLE]. AUDIENCE: So it's like you're\npaying [INAUDIBLE] never see",
    "start": "2118370",
    "end": "2125235"
  },
  {
    "text": "[INAUDIBLE] TADGE DRYJA: Yeah. So like you go to\nsome other country-- you go to England, you\npay with your credit card,",
    "start": "2125235",
    "end": "2131570"
  },
  {
    "text": "you lose dollars\nbut they get pounds. And there's somehow-- there's\nan exchange rate in the middle.",
    "start": "2131570",
    "end": "2138130"
  },
  {
    "text": "And so from Bob's perspective,\nit works the same either way. He's getting more Dogecoins\nand losing Vertcoins.",
    "start": "2138130",
    "end": "2143339"
  },
  {
    "text": "AUDIENCE: So Bob needs\nto have a lot of-- well, in this case, he only\nreally needs Vertcoins.",
    "start": "2143340",
    "end": "2149630"
  },
  {
    "text": "TADGE DRYJA: Right. So it's possible that you set\nup this by initially funding it.",
    "start": "2149630",
    "end": "2155030"
  },
  {
    "text": "So Alice says, I have\na ton of Dogecoin. Alice creates this channel,\nand she has like 100 dogecoins,",
    "start": "2155030",
    "end": "2160040"
  },
  {
    "text": "and Bob has zero. And same with Vertcoin-- Bob could have a lot\nof them, and say, OK, I have 20 vertcoins\nand Alice has zero,",
    "start": "2160040",
    "end": "2167620"
  },
  {
    "text": "and then we can make those\npayments in that direction. You can pay them--",
    "start": "2167620",
    "end": "2172990"
  },
  {
    "text": "so actually, in all the\nsoftware now, I think, there's only\nsingle-funded channels.",
    "start": "2172990",
    "end": "2180020"
  },
  {
    "text": "Because having both parties\nfunded at the same time is kind of-- software-wise, a little harder,\nand it's also, interface-wise,",
    "start": "2180020",
    "end": "2187250"
  },
  {
    "text": "going to be complicated. Because how do you know when\nto match someone's funding?",
    "start": "2187250",
    "end": "2194720"
  },
  {
    "text": "So usually what\nyou do is you say, I'm Alice, hey Bob,\nwhat's your public key? Give me a new public key.",
    "start": "2194720",
    "end": "2200450"
  },
  {
    "text": "OK, I'm going to\nconstruct this channel. Here, sign this. And then Bob's like, OK. And Bob has no money at stake\nwhen this process happens.",
    "start": "2200450",
    "end": "2208700"
  },
  {
    "text": "And then Bob also creates a\nchannel with Alice, saying, OK, I'm going to put a bunch\nof Vertcoin in this channel. And they usually start with\nall the money on one side",
    "start": "2208700",
    "end": "2216172"
  },
  {
    "text": "so they can then trade.  Other questions?",
    "start": "2216172",
    "end": "2222170"
  },
  {
    "text": "So they have to look at\nthese different channels on different blockchains in\norder to make sure this works.",
    "start": "2222170",
    "end": "2229710"
  },
  {
    "text": "There's still a lot of\nopen questions here. How do you actually trade? This is really good\nfor trade execution,",
    "start": "2229710",
    "end": "2235860"
  },
  {
    "text": "but what about discovery? So the current exchanges,\nthey're not just \"put all your money in here\nand then ask for it back,\"",
    "start": "2235860",
    "end": "2243930"
  },
  {
    "text": "there's that middle step where\nyou find all the other parties. ",
    "start": "2243930",
    "end": "2249400"
  },
  {
    "text": "So post the orders on the\nblockchain, and maybe?",
    "start": "2249400",
    "end": "2254640"
  },
  {
    "text": "There's problems-- I mean,\nit's not too crazy of an idea, but there's some\nproblems with it. If you just say, hey, I\nwant to sell dogecoins",
    "start": "2254640",
    "end": "2261657"
  },
  {
    "text": "and I want to buy\nvertcoins, and you sort of put that in an OP_RETURN\non the blockchain, well, it's non-binding.",
    "start": "2261657",
    "end": "2267329"
  },
  {
    "text": "You don't have to\nactually do anything. There can be frontrunning,\nwhere the orders can go in the wrong\nsequence or in time.",
    "start": "2267330",
    "end": "2276359"
  },
  {
    "text": "And it's not scalable, because\nif everyone's posting orders",
    "start": "2276360",
    "end": "2281640"
  },
  {
    "text": "on the blockchain, that\ncan take up a lot of space, probably more so than\nactual transactions. I don't know what--",
    "start": "2281640",
    "end": "2287940"
  },
  {
    "text": "I mean, I'm sure-- maybe. Total number of orders\nplaced on a order",
    "start": "2287940",
    "end": "2293069"
  },
  {
    "text": "book versus total number\nof actual order executions, usually there's a\nlot more orders that",
    "start": "2293070",
    "end": "2299160"
  },
  {
    "text": "then end up getting canceled. Because in most exchanges\nthat I've seen-- and I believe this is the\ncase in regular New York Stock",
    "start": "2299160",
    "end": "2306287"
  },
  {
    "text": "Exchange kind of\nthings, you can say, hey, I want to sell\nthis at this price, and then a few minutes later you\nsay, yeah, I changed my mind.",
    "start": "2306288",
    "end": "2312692"
  },
  {
    "text": "I don't to sell it at\nthat price anymore. The price has moved, and\nI've changed my mind. And a lot of times--",
    "start": "2312692",
    "end": "2318050"
  },
  {
    "text": "yeah. AUDIENCE: The New\nYork Stock Exchange runs about 100 messages\nfor every executed trade.",
    "start": "2318050",
    "end": "2323580"
  },
  {
    "text": "TADGE DRYJA: OK, so about 1% of\nthe actual trades get executed. Yeah, that sounds\nprobably about the same",
    "start": "2323580",
    "end": "2330720"
  },
  {
    "text": "as in a lot of\nBitcoin exchanges. Usually in the\nBitcoin exchanges, they don't charge you to post\nan order and then take it back.",
    "start": "2330720",
    "end": "2340530"
  },
  {
    "text": "That's free. Whereas the trade\nactually executing, usually they have\nsome kind of fee.",
    "start": "2340530",
    "end": "2345600"
  },
  {
    "text": "So posting the orders\nthemselves on the blockchain seems like a cool\nidea, but you've",
    "start": "2345600",
    "end": "2351443"
  },
  {
    "text": "got, now, this\nscalability problem of all these transactions. Now it's probably\n100 times worse.",
    "start": "2351443",
    "end": "2356720"
  },
  {
    "text": "And frontrunning\ncould also be tricky. Because the blockchain does\nprovide sequence and timing,",
    "start": "2356720",
    "end": "2363150"
  },
  {
    "text": "but it's up to the miners. So if you have a\n10-minute window, during that 10-minute\nwindow, the miners",
    "start": "2363150",
    "end": "2369089"
  },
  {
    "text": "can basically shuffle things\naround however they want. And so if the miner\nis also trading,",
    "start": "2369090",
    "end": "2374100"
  },
  {
    "text": "they can see, oh, I see\nall these different orders, I will match these orders, and\nlet those happen afterwards.",
    "start": "2374100",
    "end": "2381270"
  },
  {
    "text": "So this is an issue. So there's a bunch of different\nmodels people are looking at. And to be clear here, this is\nnot something that really--",
    "start": "2381270",
    "end": "2390413"
  },
  {
    "text": "I don't want to say it doesn't\nexist yet, it sort of does. There are these decentralized\nexchanges popping up, mostly",
    "start": "2390413",
    "end": "2397210"
  },
  {
    "text": "on the Ethereum\nnetwork right now. Because then it's not\nactually cross-chain. You can have cross-asset,\nbecause there's",
    "start": "2397210",
    "end": "2403900"
  },
  {
    "text": "all these ERC-20 tokens. But the cross-chain swaps\nthemselves are a bit more",
    "start": "2403900",
    "end": "2409240"
  },
  {
    "text": "complicated to program. So I don't know of any\nlive, not-Mainnet operation",
    "start": "2409240",
    "end": "2416210"
  },
  {
    "text": "like this. So one model would be you\nhave a central order book and a central counterparty.",
    "start": "2416210",
    "end": "2421500"
  },
  {
    "text": "So the exchange says, OK,\nwe're still the exchange, we still have a website,\nwe still have order--",
    "start": "2421500",
    "end": "2428060"
  },
  {
    "text": "buys, and sells,\nand stuff like that. And not only that,\nbut the exchange",
    "start": "2428060",
    "end": "2433109"
  },
  {
    "text": "is one side of every trade. So they say, OK, open\na channel with us, put all your vertcoins in,\nput all your dogecoins in.",
    "start": "2433110",
    "end": "2440038"
  },
  {
    "text": "And then we'll open a\ndifferent channel with you, and we'll put litecoins in it. And you trade with us.",
    "start": "2440038",
    "end": "2446390"
  },
  {
    "text": "But then what they can\ndo is they can say, well, we're not\nactually going to trade unless there's someone\nelse performing",
    "start": "2446390",
    "end": "2452760"
  },
  {
    "text": "a similar, opposite trade. And then they can\nkeep the spread. So they say, OK, we're\nselling Vertcoin at this rate",
    "start": "2452760",
    "end": "2459720"
  },
  {
    "text": "and buying it at this other,\nslightly different rate. So that seems the most feasible.",
    "start": "2459720",
    "end": "2466680"
  },
  {
    "text": "I would venture that that's\ngoing to happen first, because it's not too crazy.",
    "start": "2466680",
    "end": "2473340"
  },
  {
    "text": "But it has similar\ncentralization to the current model. But there is less\ncounterparty risk.",
    "start": "2473340",
    "end": "2478500"
  },
  {
    "text": "So if you are worried\nabout an exchange shutting down and running off with all\nyour Dogecoin, this can help.",
    "start": "2478500",
    "end": "2485070"
  },
  {
    "text": "Say, OK, well, I have a\nchannel with my Dogecoin in it and a channel with\nmy Vertcoin in it, and I can sell some\nDogecoin, get some Vertcoin",
    "start": "2485070",
    "end": "2491130"
  },
  {
    "text": "from the exchange, and I\nstill have a nice order book. It doesn't solve any kind\nof frontrunning problem.",
    "start": "2491130",
    "end": "2497660"
  },
  {
    "text": "The exchange can still\norder things how they want. And the exchange\ncan still shut down. But it's much more\ndifficult for the exchange",
    "start": "2497660",
    "end": "2505320"
  },
  {
    "text": "to somehow steal your coins,\nwhich is a problem now.",
    "start": "2505320",
    "end": "2510640"
  },
  {
    "text": "Another model-- you say, well,\nwe have a central order book, so the exchange still\nexists and aggregates",
    "start": "2510640",
    "end": "2518700"
  },
  {
    "text": "all the orders of everyone\nwho wants to buy and sell. But there's multiple\ncounterparties",
    "start": "2518700",
    "end": "2523910"
  },
  {
    "text": "that you interact with directly. So the exchange says,\nOK, I'm E, and I will tell Alice about Bob.",
    "start": "2523910",
    "end": "2531080"
  },
  {
    "text": "Alice says, hey, I\nwant to sell Dogecoin and buy Vertcoin at this rate.",
    "start": "2531080",
    "end": "2537310"
  },
  {
    "text": "And then the exchange tells\nAlice and Bob, OK, you guys matched. Bob, you want to sell Vertcoin,\nAlice, you want to buy it.",
    "start": "2537310",
    "end": "2544430"
  },
  {
    "text": "Here, connect to each other\nand perform this trade. This is cooler, but\nthere's questions,",
    "start": "2544430",
    "end": "2551990"
  },
  {
    "text": "in that if you're connecting\nto many counterparties, it's costly. You have to open a new\nchannel, and that is on chain.",
    "start": "2551990",
    "end": "2559220"
  },
  {
    "text": "Also, how do you\nenforce trade execution? If it's a trade on a current\nexchange, and you say,",
    "start": "2559220",
    "end": "2566790"
  },
  {
    "text": "OK, I want to buy bitcoins,\nAnd you click, OK, it just happened. They are aren't\neven your bitcoins.",
    "start": "2566790",
    "end": "2572000"
  },
  {
    "text": "You don't really\nhave control of them. So when you say you\nwant to do something, they actually execute it.",
    "start": "2572000",
    "end": "2577340"
  },
  {
    "text": "In this case, if they don't\nhave a channel with you, they just are observing\nthe trade occur.",
    "start": "2577340",
    "end": "2583849"
  },
  {
    "text": "So they're saying, OK,\nAlice and Bob, do this. It might not even be\npossible to enforce.",
    "start": "2583850",
    "end": "2591652"
  },
  {
    "text": "You'd have to have\nsome kind of penalties if Bob says hey, Alice,\nsaid she was going to sell, but then didn't, or Bob\ncomplains, things like that.",
    "start": "2591652",
    "end": "2599860"
  },
  {
    "text": " So there's a lot of ideas here.",
    "start": "2599860",
    "end": "2605480"
  },
  {
    "text": "Another is, OK, if\nyou're building channels, each channel that you built\nhas these unchained costs",
    "start": "2605480",
    "end": "2611660"
  },
  {
    "text": "and takes quite a bit of time. So maybe you could have\na multi-hop network",
    "start": "2611660",
    "end": "2616700"
  },
  {
    "text": "from different coins. So instead of just\nAlice, Bob, Alice, you've got Dave and Carol.",
    "start": "2616700",
    "end": "2623180"
  },
  {
    "text": "And as long as I'm connected\nto someone in this network, I can route payments to them\nand they can route payments",
    "start": "2623180",
    "end": "2630710"
  },
  {
    "text": "to me via different channels. So I'm connected to this\nmulticoin network kind of mesh.",
    "start": "2630710",
    "end": "2636377"
  },
  {
    "text": "That would be really cool.  It's not implemented.",
    "start": "2636377",
    "end": "2642260"
  },
  {
    "text": "It's not even really\nresearched that well yet. So these are sort of ideas. But that would be really cool.",
    "start": "2642260",
    "end": "2648320"
  },
  {
    "text": "Then you wouldn't need\nas much liquidity. So one of the issues with the\ncentral counterparty model",
    "start": "2648320",
    "end": "2653762"
  },
  {
    "text": "is the exchange still needs\nto have a bunch of money. They still need to have a bunch\nof dogecoins and vertcoins in order to be a\ncounterparty to every trade.",
    "start": "2653762",
    "end": "2661670"
  },
  {
    "text": "And then the question is, well,\nwhere did those come from? And if you say, oh, well, it\ncomes from customers, well,",
    "start": "2661670",
    "end": "2669140"
  },
  {
    "text": "now that's back into\nthe custodial model, where they still have coins\nthat aren't really theirs.",
    "start": "2669140",
    "end": "2677120"
  },
  {
    "text": "You could say, well, they-- and what I'm guessing\nis going to happen is they're going to say,\nwell, we charge a spread,",
    "start": "2677120",
    "end": "2684260"
  },
  {
    "text": "and we'll accept investors. And so if you want to\ninvest in this exchange,",
    "start": "2684260",
    "end": "2690470"
  },
  {
    "text": "give us a bunch of Dogecoin,\ngive us a bunch of Vertcoin. We will then use it to trade\nwith different parties,",
    "start": "2690470",
    "end": "2698223"
  },
  {
    "text": "and then we'll keep\nsome kind of spread, and then, hey, you got a return\non your invested Dogecoin.",
    "start": "2698223",
    "end": "2703640"
  },
  {
    "text": "You get more\nDogecoin at the end, and then you can withdraw it. I think this is still better\nthan the current model, where",
    "start": "2703640",
    "end": "2710180"
  },
  {
    "text": "you leave a whole bunch\nof coins on the exchange, and you get nothing. Now you can choose--",
    "start": "2710180",
    "end": "2715670"
  },
  {
    "text": "OK, do I want to\ngive them my coins and take that counterparty\nrisk, but I get some return",
    "start": "2715670",
    "end": "2720770"
  },
  {
    "text": "in exchange for that\nrisk, or do I just want to trade without\ncounterparty risk. So, another problem\nwith that model.",
    "start": "2720770",
    "end": "2728390"
  },
  {
    "text": "But that's probably\nwhat will happen. This doesn't have that\nissue, in that there",
    "start": "2728390",
    "end": "2733940"
  },
  {
    "text": "is no central counterparty who\nneeds to have a bunch of coins. I'm trading directly with\nthe people who own the coins",
    "start": "2733940",
    "end": "2739002"
  },
  {
    "text": "and want to sell. Yeah. AUDIENCE: My question\nis, even if you have this central role and\nmultiple counterparties,",
    "start": "2739002",
    "end": "2744799"
  },
  {
    "text": "wouldn't there still\nbe these trader nodes that are going to go out\nthere and essentially",
    "start": "2744800",
    "end": "2752672"
  },
  {
    "text": "be kind of the same thing? They're going to be\nwell-funded, they're going take fees by doing all\nthese different transactions,",
    "start": "2752672",
    "end": "2758990"
  },
  {
    "text": "and they're going to\nget bigger and bigger. TADGE DRYJA: Yes, I guess\nthe only distinction is--",
    "start": "2758990",
    "end": "2764100"
  },
  {
    "text": "so yes, AUDIENCE: It just\nallows it to happen-- TADGE DRYJA: Over the not\neven long term-- medium term--",
    "start": "2764100",
    "end": "2769670"
  },
  {
    "text": "these, as a user interface,\nthey'll look the same. Because whether\nit's the exchange",
    "start": "2769670",
    "end": "2775160"
  },
  {
    "text": "itself saying, OK,\nI'm aggregating, everyone deposit, I've\ngot a ton of capital, I'm going to be a counterparty\nto these trades and a market",
    "start": "2775160",
    "end": "2782058"
  },
  {
    "text": "maker, versus, oh, there's\nno defined market maker, but the people\nwith a lot of money",
    "start": "2782058",
    "end": "2787970"
  },
  {
    "text": "or who are really trying to do\nthis end up in that position. I guess the only difference\nis, in this case,",
    "start": "2787970",
    "end": "2794750"
  },
  {
    "text": "the counterparty is also\nrunning the order book. And in this case,\nthey may be different.",
    "start": "2794750",
    "end": "2800430"
  },
  {
    "text": "There's an order book\nserver, and then there's this big counterparty who\nhas a ton of money who's doing all the trades.",
    "start": "2800430",
    "end": "2806869"
  },
  {
    "text": "So does that make\nmuch of a difference. I don't know. Yes. AUDIENCE: In the\nhistory of markets,",
    "start": "2806870",
    "end": "2812715"
  },
  {
    "text": "the second example is the\none that you see more. AUDIENCE: Right, yeah, right? New York Stock Exchange, London\nStock Exchange, and so on.",
    "start": "2812715",
    "end": "2819920"
  },
  {
    "text": "The first model has\nthe centralized party collecting huge economic rents\nbecause they're centralized,",
    "start": "2819920",
    "end": "2827544"
  },
  {
    "text": "which is kind of interesting,\nwhere Bitcoin was supposed to be decentralized.",
    "start": "2827544",
    "end": "2833305"
  },
  {
    "text": "TADGE DRYJA: Yeah,\nso this probably ends up with a small\nnumber of pretty big nodes,",
    "start": "2833305",
    "end": "2839290"
  },
  {
    "text": "mostly because of\nthe efficiency. If you're connecting to 100\ndifferent counterparties, and then you never actually\ntrade with any of them,",
    "start": "2839290",
    "end": "2846280"
  },
  {
    "text": "it's very costly to\nbuild those channels, and which probably has\nanalogies to, in real life,",
    "start": "2846280",
    "end": "2851440"
  },
  {
    "text": "it's costly to maintain\nthese relationships with all these different\ncompanies and stuff. It's much more efficient\nif we just all meet",
    "start": "2851440",
    "end": "2858039"
  },
  {
    "text": "under this buttonwood tree. It's a different issue in that,\nenforcing trade execution,",
    "start": "2858040",
    "end": "2864680"
  },
  {
    "text": "you might not have legal-- you might not know who any\nof these people are legally.",
    "start": "2864680",
    "end": "2869789"
  },
  {
    "text": "So you have some\nkind of penalties or some kind of proofs that the\ntrade occurred the correct way,",
    "start": "2869790",
    "end": "2875069"
  },
  {
    "text": "things like that. Yes. AUDIENCE: How about\nthe enforcing-- [INAUDIBLE] what we'd call\nit, but the way the trades are",
    "start": "2875070",
    "end": "2883530"
  },
  {
    "text": "set up, do you need\nto enforce them, or before you enter into\nthem, do you already",
    "start": "2883530",
    "end": "2888750"
  },
  {
    "text": "know what [INAUDIBLE] TADGE DRYJA: So the\nexample is, before you--",
    "start": "2888750",
    "end": "2896010"
  },
  {
    "text": "OK, so the example is,\nAlice goes to a server. So you have an exchange,\nbut this exchange",
    "start": "2896010",
    "end": "2903660"
  },
  {
    "text": "is only the order book. So there's little buy\nand sell kind of things. And then Alice says,\nOK, I want to buy VTC.",
    "start": "2903660",
    "end": "2914950"
  },
  {
    "text": "And then-- this is Alice-- Bob says, OK, I want\nto buy Dogecoin.",
    "start": "2914950",
    "end": "2920720"
  },
  {
    "text": " Then the exchange says,\noh, you guys crossed.",
    "start": "2920720",
    "end": "2926080"
  },
  {
    "text": "You want to buy\nVertcoin at a rate that he's willing to sell at,\nor slightly higher, or whatever,",
    "start": "2926080",
    "end": "2932140"
  },
  {
    "text": "so trade. So the exchange tells both\npeople, hey, you matched,",
    "start": "2932140",
    "end": "2937520"
  },
  {
    "text": "now you have to trade. And then as soon as A sees, oh,\nyou matched, you have to trade,",
    "start": "2937520",
    "end": "2943210"
  },
  {
    "text": "Alice disappears, and\nsays, oh, I didn't mean to.",
    "start": "2943210",
    "end": "2948420"
  },
  {
    "text": "So the exchange only\ncan provide information. They can't actually\nforce Alice and Bob",
    "start": "2948420",
    "end": "2954470"
  },
  {
    "text": "to do the trade is the problem. AUDIENCE: Right. I guess you can broadcast--",
    "start": "2954470",
    "end": "2960492"
  },
  {
    "text": "in broadcasting your\npotential trade, there's information for somebody\nto come in at those-- so",
    "start": "2960492",
    "end": "2965793"
  },
  {
    "text": "if it's at a specific\nprice, and you're actually publishing what you would need\nto actually execute the trade.",
    "start": "2965793",
    "end": "2974280"
  },
  {
    "text": "TADGE DRYJA: Ah, so that-- yeah, at least in Bitcoin,\nI don't know how to do that.",
    "start": "2974280",
    "end": "2980140"
  },
  {
    "text": "Because you need to know who\nyour counterparty is in order to either use these channels,\nor even if it were on chain,",
    "start": "2980140",
    "end": "2987700"
  },
  {
    "text": "you have to share these secret-- it's interactive with\nyour counterparty. So at least in Bitcoin, I\ndon't know a way to say,",
    "start": "2987700",
    "end": "2995490"
  },
  {
    "text": "Alice is posting her buy\nVertcoin order in a way that anyone can\nthen go and fill it",
    "start": "2995490",
    "end": "3001980"
  },
  {
    "text": "without additional\ninteractivity from Alice. I think there's ways\nto do that in Ethereum,",
    "start": "3001980",
    "end": "3009390"
  },
  {
    "text": "for Ethereum tokens, and\nthere are people who've written software like that. But in the Bitcoin model,\nthere might be a way to do it.",
    "start": "3009390",
    "end": "3017180"
  },
  {
    "text": "We haven't figured it out. So it's sort of-- you put in your orders,\nthey return and say, OK,",
    "start": "3017180",
    "end": "3024440"
  },
  {
    "text": "trade, and now-- AUDIENCE: You have to\ncreate the [INAUDIBLE].. TADGE DRYJA: Yeah, now they\nhave to continue to interact.",
    "start": "3024440",
    "end": "3030075"
  },
  {
    "text": "So it's pretty straightforward\nfor Bob or Alice-- Alice could just unplug her\ncomputer right at that point.",
    "start": "3030075",
    "end": "3035569"
  },
  {
    "text": "And that introduces timing\nsort of issues where Alice just",
    "start": "3035570",
    "end": "3040580"
  },
  {
    "text": "puts in all these fake trades. Maybe they're kind of out there. But sometimes the market\nmoves during the time",
    "start": "3040580",
    "end": "3047270"
  },
  {
    "text": "between I put my trade in\nand the execution comes back.",
    "start": "3047270",
    "end": "3052650"
  },
  {
    "text": "And so I unplug most of them. I ignore most of them, but\nthe ones that are beneficial, I actually go through with.",
    "start": "3052650",
    "end": "3058620"
  },
  {
    "text": "AUDIENCE: Which isn't too far\nfrom the way the markets work. TADGE DRYJA: Well, yeah. [CHUCKLING]",
    "start": "3058620",
    "end": "3063640"
  },
  {
    "text": " AUDIENCE: The\ndifference is, you're saying these are not live\nhot bids and hot offers,",
    "start": "3063640",
    "end": "3070130"
  },
  {
    "text": "meaning executable. They had another step\nif they were executable.",
    "start": "3070130",
    "end": "3076730"
  },
  {
    "text": "So this is a new\nform of spoofing. This spoofing goes on\nin the US swaps market",
    "start": "3076730",
    "end": "3082819"
  },
  {
    "text": "all the time, because\n[INAUDIBLE] bids and offers. But in the market where\nthere's executable bids",
    "start": "3082820",
    "end": "3089039"
  },
  {
    "text": "and offers, that's the\ndistinction-- this is not hot. [INAUDIBLE]",
    "start": "3089040",
    "end": "3095400"
  },
  {
    "text": "TADGE DRYJA: Right. I guess so \"hot\" in\nthis case would be-- ",
    "start": "3095400",
    "end": "3101690"
  },
  {
    "text": "if Alice's offer contains all\nthe information needed by Bob to execute the\ntrade, then it would",
    "start": "3101690",
    "end": "3107242"
  },
  {
    "text": "be sort of hot in that\nsense, in that Bob doesn't have to interact with\nAlice anymore to execute.",
    "start": "3107242",
    "end": "3113060"
  },
  {
    "text": "With these construction--\nwith the cross-chain swaps, using these channels, you still\nhave to talk to each other.",
    "start": "3113060",
    "end": "3121200"
  },
  {
    "text": "Bob generates-- no, Alice\ngenerates the R value, shares the hash with Bob. They're talking to each other.",
    "start": "3121200",
    "end": "3126859"
  },
  {
    "text": "So we don't know-- if someone figures out a cool\nway to do it, then great, that will solve this issue.",
    "start": "3126860",
    "end": "3133690"
  },
  {
    "text": "Yes. AUDIENCE: Is 0x and Radar\nRelay, are they hot [INAUDIBLE]",
    "start": "3133690",
    "end": "3139360"
  },
  {
    "text": "TADGE DRYJA: I believe 0x\nis, from what I've read. I don't know about how\n[STAMMERING] whatever that is--",
    "start": "3139360",
    "end": "3146390"
  },
  {
    "text": "Radar Relay works. But 0x, yeah,\nbasically, your order",
    "start": "3146390",
    "end": "3152210"
  },
  {
    "text": "is executable by any party\nwithout further input from you.",
    "start": "3152210",
    "end": "3157480"
  },
  {
    "text": "But it also has scaling issues. So that's a good segue way\nto the next part, which is having some kind of\ndistributed order book, where",
    "start": "3157480",
    "end": "3164740"
  },
  {
    "text": "there is no central\norder book, there is no central counterparty,\nthe whole thing is a big mesh network\nkind of thing.",
    "start": "3164740",
    "end": "3171910"
  },
  {
    "text": "That would be really cool. That seems the furthest out, in\nterms of, how do you do this.",
    "start": "3171910",
    "end": "3177555"
  },
  {
    "text": "I mean, people\nare working on it, but it seems hard to\nmake practical in that how do you ensure\nfairness, right?",
    "start": "3177555",
    "end": "3183850"
  },
  {
    "text": "Who's ordering these things? And you could say,\nwell, the blockchain is ordering these things. But that ends up being\nthat the miners order it.",
    "start": "3183850",
    "end": "3191410"
  },
  {
    "text": "So if Alice is buy\nVertcoin, she's like, OK, I'm buying Vertcoin\nat a price of 5.",
    "start": "3191410",
    "end": "3198170"
  },
  {
    "text": "And then he says,\nOK, I'll buy Doge at a price of whatever--\nbasically, you cross,",
    "start": "3198170",
    "end": "3203810"
  },
  {
    "text": "and you have an order where\nthere's some kind of overlap. The miner can say, OK, well,\nI'll instead ignore this order,",
    "start": "3203810",
    "end": "3211310"
  },
  {
    "text": "execute my own, and then\nexecute with this guy and take the spread.",
    "start": "3211310",
    "end": "3217640"
  },
  {
    "text": "Because the miner really gets\nto sequence things however they want. The blockchain does\nprovide ordering,",
    "start": "3217640",
    "end": "3223880"
  },
  {
    "text": "but at the block level. Within a block, it's\ntotally up to the miner. So the miners could\nswap things around.",
    "start": "3223880",
    "end": "3230799"
  },
  {
    "text": "But yeah, how do you ensure\nfairness in terms of timing? How do you enforce\ntrade execution? And probably the biggest\nfor a distributed order book",
    "start": "3230800",
    "end": "3238339"
  },
  {
    "text": "is just the scalability\nof the orders. You probably don't want to put\nall the orders on a blockchain,",
    "start": "3238340",
    "end": "3245180"
  },
  {
    "text": "because it just ends\nup being a ton of data. So you have to have some\nkind of broadcast network",
    "start": "3245180",
    "end": "3252770"
  },
  {
    "text": "where you've got these\norders, they probably should have some way to\nexpire, but expiry is also",
    "start": "3252770",
    "end": "3259280"
  },
  {
    "text": "an issue in that, how\ndo you ensure that--",
    "start": "3259280",
    "end": "3264830"
  },
  {
    "text": "hey, I'm canceling\nthis order, how do you ensure that the\ncancellation actually propagates if someone\ncan say, OK, I've",
    "start": "3264830",
    "end": "3271480"
  },
  {
    "text": "got pretty good\ncontrol of the network, and I can just block\nthese order cancellations,",
    "start": "3271480",
    "end": "3276580"
  },
  {
    "text": "and wait, and then execute. So this is sort of-- there's papers, there's ideas,\nbut it's kind of out there.",
    "start": "3276580",
    "end": "3285080"
  },
  {
    "text": " OK, so that's basically--\nyeah, that was it.",
    "start": "3285080",
    "end": "3291480"
  },
  {
    "text": "That's a little earlier. But yeah, this was basically\nthe stuff for today.",
    "start": "3291480",
    "end": "3296820"
  },
  {
    "text": "The idea works, right,\nthe cross-chain swaps. But there's still a lot\nof issues, in terms of, OK, how do you actually\nget these to work?",
    "start": "3296820",
    "end": "3303750"
  },
  {
    "text": "How do you build a\nscalable trading platform? And there aren't really any yet. There are some things on\nEthereum that work OK.",
    "start": "3303750",
    "end": "3312420"
  },
  {
    "text": "The fees end up\nbeing kind of high. And that's also\nEthereum, where it's not between different blockchains.",
    "start": "3312420",
    "end": "3318332"
  },
  {
    "text": "It's all running on\nthe Ethereum network, and the Ethereum network\nallows you to specify, well, this is actually something\nelse, this isn't ether.",
    "start": "3318332",
    "end": "3325860"
  },
  {
    "text": "You can do that\nin Bitcoin, but-- so there are\nprotocols in Bitcoin, like Omni, and\nMastercoin, and things,",
    "start": "3325860",
    "end": "3333510"
  },
  {
    "text": "where you can sort of\ncreate different assets by using OP_RETURN. And basically all of those\nhave moved to Ethereum now,",
    "start": "3333510",
    "end": "3340650"
  },
  {
    "text": "because Ethereum is a much\nnicer design for those things. And most of the Bitcoin\ndevelopers are sort of like,",
    "start": "3340650",
    "end": "3346320"
  },
  {
    "text": "great, now all these non-Bitcoin\ntransaction data have left,",
    "start": "3346320",
    "end": "3352300"
  },
  {
    "text": "and Bitcoin is just focused\non moving bitcoin around. Yeah, so the basic\nidea works, there's still a lot of unsolved\nquestions-- further research",
    "start": "3352300",
    "end": "3359550"
  },
  {
    "text": "required, which is great to\nhear when you're a researcher. [CHUCKLING] And there's people\nworking on this here.",
    "start": "3359550",
    "end": "3365640"
  },
  {
    "text": "I'm working with an MEng\nstudent on cross-chain swaps this semester. There's other people\nworking on all sorts",
    "start": "3365640",
    "end": "3371128"
  },
  {
    "text": "of decentralized\nexchange things. Neha is also very\ninterested in it. So if you want to work\nwith Neha, that's a chance.",
    "start": "3371128",
    "end": "3379500"
  },
  {
    "text": "And yeah, I think\nit'll be big, right? Because if you look\nat these exchanges, there's a lot of profit.",
    "start": "3379500",
    "end": "3385980"
  },
  {
    "text": "So I don't know, a year or two\nago, you look at like Poloniex, they were making like\n$1 million a day.",
    "start": "3385980",
    "end": "3392490"
  },
  {
    "text": "There's so much volume. And they have very\nfew employees. So and they're like--",
    "start": "3392490",
    "end": "3399869"
  },
  {
    "text": "I think the market is getting\nsort of more established now, in terms of its going\nto be larger players",
    "start": "3399870",
    "end": "3405270"
  },
  {
    "text": "and stuff like that. But it was pretty much like\nWild Wild West a few years ago, where you're just like, I'm\ngoing to open an exchange,",
    "start": "3405270",
    "end": "3411390"
  },
  {
    "text": "and I don't even\nneed a bank account. The big exchanges that have\nbank accounts I feel like",
    "start": "3411390",
    "end": "3418200"
  },
  {
    "text": "are less profitable. So Coinbase makes\na lot of revenue, but they have a lot of fees--",
    "start": "3418200",
    "end": "3424170"
  },
  {
    "text": "a lot of costs. They have a ton of employees,\nthey have a ton of lawyers, they have to worry about banks.",
    "start": "3424170",
    "end": "3430015"
  },
  {
    "text": "Whereas if you're\nlike Poloniex-- well, Poloniex is now-- it lasted for like a year or\ntwo where they could do that.",
    "start": "3430015",
    "end": "3437510"
  },
  {
    "text": "But if you're just some\nrandom altcoin exchange, you don't need a bank account. You just say, look,\nI'm an exchange where",
    "start": "3437510",
    "end": "3443160"
  },
  {
    "text": "you can trade Dogecoin and\nVertcoin, and that's it. There's no dollars involved. So those kind of\nplaces, they can open up",
    "start": "3443160",
    "end": "3450300"
  },
  {
    "text": "on any server,\nanywhere in the world. They don't even need\nto be companies, they can just be\nsomeone's server.",
    "start": "3450300",
    "end": "3457109"
  },
  {
    "text": " And the fact that\nthey have custody",
    "start": "3457110",
    "end": "3462330"
  },
  {
    "text": "means they keep\ngetting shut down or just running off with money. Crypsy-- Crypsy was\nthat guy, right?",
    "start": "3462330",
    "end": "3470145"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]\nexchange wallet as like his own\npersonal bank account.",
    "start": "3470145",
    "end": "3475160"
  },
  {
    "text": "Yeah, spent all\nthe money one day. TADGE DRYJA: Right, so-- and then he said--",
    "start": "3475160",
    "end": "3481650"
  },
  {
    "text": "I remember there was a blog\npost where he just sort of said he did that. And it was just like-- AUDIENCE: He was\ntrying to justify it.",
    "start": "3481650",
    "end": "3486902"
  },
  {
    "text": "Like yeah, we're making fees\nand stuff, so it was OK, we though we could\n[INAUDIBLE] It's",
    "start": "3486902",
    "end": "3494235"
  },
  {
    "text": "like where the two graphs\njust diverge, unfortunately, and it went to zero.",
    "start": "3494235",
    "end": "3500057"
  },
  {
    "text": "TADGE DRYJA: But it was\njust an amazing blog post, where it's like,\nwait, you're just admitting to a whole\nbunch of crimes here,",
    "start": "3500057",
    "end": "3505170"
  },
  {
    "text": "you probably shouldn't\nhave written this. And then he fled to China,\nbut I think they got him.",
    "start": "3505170",
    "end": "3510300"
  },
  {
    "text": "He's in jail now or something. So there's a lot of you\nknow pretty bad actors",
    "start": "3510300",
    "end": "3518010"
  },
  {
    "text": "in the exchange space. It's not well-run generally.",
    "start": "3518010",
    "end": "3523020"
  },
  {
    "text": "But there's enormous amounts\nof profit, which, to me, seems like an inefficiency, right? Wait, why are these people\nmaking $1 million a day",
    "start": "3523020",
    "end": "3529800"
  },
  {
    "text": "for something that is sort\nof just running automatically on this computer? That seems like\nripe for disruption.",
    "start": "3529800",
    "end": "3537539"
  },
  {
    "text": "And so there's a lot of\npeople interested in, OK, how do we decentralize\nthe exchanges, make them less trust-involved,\nless risk-involved,",
    "start": "3537540",
    "end": "3546540"
  },
  {
    "text": "and probably make less money\nthan Paloniex, or OK coin, or whatever. But that's sort of better,\nbecause an exchange where",
    "start": "3546540",
    "end": "3555570"
  },
  {
    "text": "there's less profitability\nmeans more people are going to want to trade on it\nbecause there's lower fees. So there's a lot of\nresearch into this.",
    "start": "3555570",
    "end": "3563619"
  },
  {
    "text": "I think it's pretty cool. So next class, on\nWednesday, I'll",
    "start": "3563620",
    "end": "3568710"
  },
  {
    "text": "talk about discrete\nlog contracts, which share some of these issues,\nin that it's a different way",
    "start": "3568710",
    "end": "3575970"
  },
  {
    "text": "to execute a trade,\nbut it doesn't really define how you find people\nto execute that trade.",
    "start": "3575970",
    "end": "3581940"
  },
  {
    "text": "I personally am more interested\nin the discrete log contract stuff, probably because\nI came up with it,",
    "start": "3581940",
    "end": "3587710"
  },
  {
    "text": "but also because I'm not\nthat excited about altcoins in general.",
    "start": "3587710",
    "end": "3593724"
  },
  {
    "text": "I don't know, people\nlike altcoins, but I don't really\nfeel that, oh, we need to have all these different\naltcoins that sort of act",
    "start": "3593725",
    "end": "3600579"
  },
  {
    "text": "like money-- I don't know--\nwhich is mostly what cross-chain swaps let you do.",
    "start": "3600580",
    "end": "3606407"
  },
  {
    "text": "So the discrete log\ncontracts, though, has the same issues with\nhow do you find each other.",
    "start": "3606407",
    "end": "3612130"
  },
  {
    "text": "And it's mostly a\nscalability thing, right? You can do this sort of OTC,\nwhere you talk in a chat room,",
    "start": "3612130",
    "end": "3618130"
  },
  {
    "text": "and you sort of know each\nother, and you trade that way. And that's the level\nit is right now. But how to scale it up\nis another question.",
    "start": "3618130",
    "end": "3625590"
  },
  {
    "start": "3625590",
    "end": "3637103"
  }
]