[
  {
    "text": "[SQUEAKING]",
    "start": "0",
    "end": "1992"
  },
  {
    "text": "[RUSTLING]",
    "start": "1992",
    "end": "3984"
  },
  {
    "text": "[CLICKING]",
    "start": "3984",
    "end": "5477"
  },
  {
    "start": "5478",
    "end": "9520"
  },
  {
    "text": "HELENA VAILLICROSA:\nIn this section,",
    "start": "9520",
    "end": "11020"
  },
  {
    "text": "I'm going to dive into stack and\nbricks, which are, I would say,",
    "start": "11020",
    "end": "16980"
  },
  {
    "text": "books of maps.",
    "start": "16980",
    "end": "18330"
  },
  {
    "text": "So just for you to have a\ngood understanding of how",
    "start": "18330",
    "end": "21780"
  },
  {
    "text": "stack and bricks work, it's like\nif you would have each of them",
    "start": "21780",
    "end": "25500"
  },
  {
    "text": "map being a piece\nof paper and you",
    "start": "25500",
    "end": "27180"
  },
  {
    "text": "would like to put them\ntogether in a book form,",
    "start": "27180",
    "end": "30750"
  },
  {
    "text": "then you would use\nstack and brick.",
    "start": "30750",
    "end": "32640"
  },
  {
    "text": "And how is this helpful?",
    "start": "32640",
    "end": "35100"
  },
  {
    "text": "This is helpful because\nthese standardized processes",
    "start": "35100",
    "end": "37890"
  },
  {
    "text": "that we want to\nproceed on the maps.",
    "start": "37890",
    "end": "41470"
  },
  {
    "text": "So let's say we want to\nchop them in the same shape,",
    "start": "41470",
    "end": "43890"
  },
  {
    "text": "or we want to transform\nthem in the same resolution,",
    "start": "43890",
    "end": "46860"
  },
  {
    "text": "or we want to calculate\nsome results of these maps.",
    "start": "46860",
    "end": "51120"
  },
  {
    "text": "We can do it using\nstack and bricks.",
    "start": "51120",
    "end": "52920"
  },
  {
    "text": "And we can also store stack\nand bricks in stack and brick",
    "start": "52920",
    "end": "56670"
  },
  {
    "text": "form in our computer.",
    "start": "56670",
    "end": "58690"
  },
  {
    "text": "So first of all, when we want\nto create stacks and bricks,",
    "start": "58690",
    "end": "62309"
  },
  {
    "text": "there's a very handy way to\ncharge these files all at once,",
    "start": "62310",
    "end": "66820"
  },
  {
    "text": "so we don't have to type\nthe route every time.",
    "start": "66820",
    "end": "69790"
  },
  {
    "text": "In this case, I'm going to use,\nas example, the WorldClim data",
    "start": "69790",
    "end": "73480"
  },
  {
    "text": "that we downloaded.",
    "start": "73480",
    "end": "75160"
  },
  {
    "text": "If you've paid attention\ninside the folder,",
    "start": "75160",
    "end": "78010"
  },
  {
    "text": "it comes with 12\ndifferent maps that",
    "start": "78010",
    "end": "81100"
  },
  {
    "text": "are representing the average\ntemperature of each month.",
    "start": "81100",
    "end": "85240"
  },
  {
    "text": "And now, we are going to\ncombine them into one brick,",
    "start": "85240",
    "end": "89200"
  },
  {
    "text": "so we can calculate the mean\nor the standard deviation",
    "start": "89200",
    "end": "91899"
  },
  {
    "text": "of all of them.",
    "start": "91900",
    "end": "93020"
  },
  {
    "text": "So first of all, we need to\nwrite the directory route",
    "start": "93020",
    "end": "96430"
  },
  {
    "text": "where we have all the maps.",
    "start": "96430",
    "end": "99280"
  },
  {
    "text": "Also, you could add\nin your code a chunk",
    "start": "99280",
    "end": "103570"
  },
  {
    "text": "of code saying pattern.tif,\nhas in case, you",
    "start": "103570",
    "end": "107280"
  },
  {
    "text": "would have some other\nfiles in that folder",
    "start": "107280",
    "end": "110260"
  },
  {
    "text": "and you only wanted\nto upload the TIF.",
    "start": "110260",
    "end": "113200"
  },
  {
    "text": "But in this case,\neverything is TIF.",
    "start": "113200",
    "end": "114799"
  },
  {
    "text": "So I don't need to do that.",
    "start": "114800",
    "end": "119110"
  },
  {
    "text": "You charge the map\nfiles, which is only",
    "start": "119110",
    "end": "121870"
  },
  {
    "text": "the name of the\nobject that's inside.",
    "start": "121870",
    "end": "126160"
  },
  {
    "text": "And then we want to\ntransform all these routes",
    "start": "126160",
    "end": "128350"
  },
  {
    "text": "into different rasters.",
    "start": "128350",
    "end": "130440"
  },
  {
    "text": "And to do so, we are going\nto use the lapply function",
    "start": "130440",
    "end": "133260"
  },
  {
    "text": "here using these map files\nand transforming them",
    "start": "133260",
    "end": "136110"
  },
  {
    "text": "all into raster.",
    "start": "136110",
    "end": "137610"
  },
  {
    "text": "So doing this, we'll get\na list of these 12 maps.",
    "start": "137610",
    "end": "144220"
  },
  {
    "text": "And we want to just to\nconsult one of them.",
    "start": "144220",
    "end": "147730"
  },
  {
    "text": "I'm just going to see what\nwe have in the number 6,",
    "start": "147730",
    "end": "150340"
  },
  {
    "text": "for example.",
    "start": "150340",
    "end": "151019"
  },
  {
    "text": "And here, we have a map.",
    "start": "151020",
    "end": "152020"
  },
  {
    "text": "This is all the information\nabout this map--",
    "start": "152020",
    "end": "154360"
  },
  {
    "text": "so the dimensions, resolution,\nextent, and so forth.",
    "start": "154360",
    "end": "157790"
  },
  {
    "text": "And just to see how it\nlooks like, it's just a map.",
    "start": "157790",
    "end": "162430"
  },
  {
    "text": "And we want to include all these\nmaps into a stack or a brick.",
    "start": "162430",
    "end": "166390"
  },
  {
    "text": "They are mostly the same\nfor working purposes.",
    "start": "166390",
    "end": "169300"
  },
  {
    "text": "But the organization of the\ndata is slightly different.",
    "start": "169300",
    "end": "173480"
  },
  {
    "text": "So sometimes, for\nsome processes,",
    "start": "173480",
    "end": "175120"
  },
  {
    "text": "you will need to\nuse stack or brick.",
    "start": "175120",
    "end": "176620"
  },
  {
    "text": "But the concept behind\nit is mostly the same.",
    "start": "176620",
    "end": "180440"
  },
  {
    "text": "So it works either\nway, just using",
    "start": "180440",
    "end": "183400"
  },
  {
    "text": "the function stack or brick.",
    "start": "183400",
    "end": "185230"
  },
  {
    "text": "And they have to be in the\nsame extension and resolution.",
    "start": "185230",
    "end": "188739"
  },
  {
    "text": "Otherwise, R wouldn't let\nyou to put them together.",
    "start": "188740",
    "end": "191380"
  },
  {
    "start": "191380",
    "end": "194680"
  },
  {
    "text": "So here we have it.",
    "start": "194680",
    "end": "195765"
  },
  {
    "start": "195765",
    "end": "198270"
  },
  {
    "text": "You see we've created a raster\nbrick or raster stack, depending",
    "start": "198270",
    "end": "202800"
  },
  {
    "text": "on the function that we used.",
    "start": "202800",
    "end": "205920"
  },
  {
    "text": "And now, I'm going\nto use the function",
    "start": "205920",
    "end": "207990"
  },
  {
    "text": "calc, which is a calculator.",
    "start": "207990",
    "end": "210240"
  },
  {
    "text": "And I'm going to calculate\nsomething on the maps",
    "start": "210240",
    "end": "212910"
  },
  {
    "text": "that we just uploaded.",
    "start": "212910",
    "end": "214140"
  },
  {
    "text": "In this case, I'm calculating\nthe standard deviation.",
    "start": "214140",
    "end": "216990"
  },
  {
    "text": "But I could change this\nfor the mean, for example.",
    "start": "216990",
    "end": "220870"
  },
  {
    "text": "So I'm going to calculate\ninside this stack right",
    "start": "220870",
    "end": "224549"
  },
  {
    "text": "here the standard\ndeviation of all the maps.",
    "start": "224550",
    "end": "227220"
  },
  {
    "text": "There is also extra code\nthat you can see here.",
    "start": "227220",
    "end": "230790"
  },
  {
    "text": "And this code is\nused to calculate",
    "start": "230790",
    "end": "232799"
  },
  {
    "text": "the time that we are investing\nin processing this information.",
    "start": "232800",
    "end": "237600"
  },
  {
    "text": "Just to make it fair, we\nhave to run it all at once.",
    "start": "237600",
    "end": "243180"
  },
  {
    "text": "It's going to run it.",
    "start": "243180",
    "end": "244079"
  },
  {
    "text": "And this is going to\nextract the system",
    "start": "244080",
    "end": "246450"
  },
  {
    "text": "time that was stored\nin our computer",
    "start": "246450",
    "end": "248250"
  },
  {
    "text": "at the beginning of the process.",
    "start": "248250",
    "end": "249880"
  },
  {
    "text": "And it's going to record it\nagain at the end of the process.",
    "start": "249880",
    "end": "252960"
  },
  {
    "text": "And then it's going to make the\ncalculation of how much time",
    "start": "252960",
    "end": "256170"
  },
  {
    "text": "difference there is in\nbetween the initiation",
    "start": "256170",
    "end": "261100"
  },
  {
    "text": "and the finalization\nof the process.",
    "start": "261100",
    "end": "263120"
  },
  {
    "text": "So in this case,\nwe've calculated",
    "start": "263120",
    "end": "264852"
  },
  {
    "text": "the standard deviation.",
    "start": "264852",
    "end": "265810"
  },
  {
    "text": "That took us 14 seconds.",
    "start": "265810",
    "end": "267730"
  },
  {
    "text": "And let's see how it looks like.",
    "start": "267730",
    "end": "271830"
  },
  {
    "text": "So this is the\nstandard deviation",
    "start": "271830",
    "end": "273259"
  },
  {
    "text": "of the average temperatures\nat global scale.",
    "start": "273260",
    "end": "277010"
  },
  {
    "text": "And that's also something we\ncan store in our computer.",
    "start": "277010",
    "end": "281940"
  },
  {
    "text": "We can write raster, as\nit was only one raster.",
    "start": "281940",
    "end": "286490"
  },
  {
    "text": "So for stacks and bricks,\nit works the same.",
    "start": "286490",
    "end": "289590"
  },
  {
    "text": "So instead of\nhaving one map here,",
    "start": "289590",
    "end": "292340"
  },
  {
    "text": "we just could have put\nthe raster brick or stack.",
    "start": "292340",
    "end": "300389"
  },
  {
    "text": "In this case, I'm\njust going to store",
    "start": "300390",
    "end": "302000"
  },
  {
    "text": "the outcome of this\ncalculation that we've made",
    "start": "302000",
    "end": "305030"
  },
  {
    "text": "and just put the route that you\nwant the things to be stored on.",
    "start": "305030",
    "end": "309540"
  },
  {
    "text": "And if you run this\ncode, you're going",
    "start": "309540",
    "end": "314000"
  },
  {
    "text": "to create this map\nin your computer.",
    "start": "314000",
    "end": "316730"
  },
  {
    "text": "And also, another way to\nstore the map without using",
    "start": "316730",
    "end": "323540"
  },
  {
    "text": "this function is to--",
    "start": "323540",
    "end": "325820"
  },
  {
    "text": "so while you are\ncalculating something",
    "start": "325820",
    "end": "327770"
  },
  {
    "text": "where you are running a\nprocess in a raster function,",
    "start": "327770",
    "end": "331379"
  },
  {
    "text": "then if you specify\na file name, R",
    "start": "331380",
    "end": "335420"
  },
  {
    "text": "is going to understand that\nwhile this is being processed,",
    "start": "335420",
    "end": "338240"
  },
  {
    "text": "it's going to be at\nthe same time stored.",
    "start": "338240",
    "end": "340470"
  },
  {
    "text": "So only with a line\nof code, you would",
    "start": "340470",
    "end": "342650"
  },
  {
    "text": "have the creation of\nthat map plus the saving",
    "start": "342650",
    "end": "346880"
  },
  {
    "text": "process in your computer.",
    "start": "346880",
    "end": "349520"
  },
  {
    "text": "Also, in case you would like\nto store stack or brick,",
    "start": "349520",
    "end": "354830"
  },
  {
    "text": "you would have to change\nfrom TIF extension to GRD.",
    "start": "354830",
    "end": "361520"
  },
  {
    "text": "When you create\nthis extension, you",
    "start": "361520",
    "end": "364099"
  },
  {
    "text": "would have two different files.",
    "start": "364100",
    "end": "366800"
  },
  {
    "text": "And these two\ndifferent files are--",
    "start": "366800",
    "end": "370039"
  },
  {
    "text": "well, it's necessary that both\nwould be in the same folder.",
    "start": "370040",
    "end": "373640"
  },
  {
    "text": "Otherwise, when you\nwould read them,",
    "start": "373640",
    "end": "376400"
  },
  {
    "text": "R would understand\nthem as corrupted.",
    "start": "376400",
    "end": "379580"
  },
  {
    "text": "So make sure that\nyou're not separating",
    "start": "379580",
    "end": "382220"
  },
  {
    "text": "these two files in\norder to be able to read",
    "start": "382220",
    "end": "385100"
  },
  {
    "text": "the code appropriately.",
    "start": "385100",
    "end": "387320"
  },
  {
    "start": "387320",
    "end": "392470"
  },
  {
    "text": "Also, moving on to\nthe next function,",
    "start": "392470",
    "end": "396460"
  },
  {
    "text": "we're going to move\nto the crop function.",
    "start": "396460",
    "end": "398660"
  },
  {
    "text": "This can be used\nto crop one map.",
    "start": "398660",
    "end": "402700"
  },
  {
    "text": "Or it can be used to\ncrop a brick or a stack.",
    "start": "402700",
    "end": "406810"
  },
  {
    "text": "And chopping them in small\npieces, in this case,",
    "start": "406810",
    "end": "411020"
  },
  {
    "text": "I'm going to use as a\nbase this temperature map.",
    "start": "411020",
    "end": "414370"
  },
  {
    "text": "And I'm just going to chop\nthe latitude and longitude",
    "start": "414370",
    "end": "417970"
  },
  {
    "text": "based on the Eastern USA Coast.",
    "start": "417970",
    "end": "423440"
  },
  {
    "text": "So if I do this, our\ntemperature is not found.",
    "start": "423440",
    "end": "426470"
  },
  {
    "text": "I should go and charge it again.",
    "start": "426470",
    "end": "431160"
  },
  {
    "text": "Here we have it.",
    "start": "431160",
    "end": "432330"
  },
  {
    "start": "432330",
    "end": "435599"
  },
  {
    "text": "Now, I should be\nable to crop it.",
    "start": "435600",
    "end": "438390"
  },
  {
    "start": "438390",
    "end": "441507"
  },
  {
    "text": "I want to see how it looks like.",
    "start": "441507",
    "end": "442840"
  },
  {
    "start": "442840",
    "end": "449560"
  },
  {
    "text": "And this is the\nresult of a cropping.",
    "start": "449560",
    "end": "452500"
  },
  {
    "text": "This is a very\nhandy tool in order",
    "start": "452500",
    "end": "454720"
  },
  {
    "text": "to make experiments\nwith your code.",
    "start": "454720",
    "end": "456740"
  },
  {
    "text": "So as you have seen before,\nsometimes doing some processes",
    "start": "456740",
    "end": "460750"
  },
  {
    "text": "when we are working in maps,\nit can take a long time.",
    "start": "460750",
    "end": "464240"
  },
  {
    "text": "So if you want to just check\nthat your code is working",
    "start": "464240",
    "end": "466870"
  },
  {
    "text": "and that all the processes\nthat has been done",
    "start": "466870",
    "end": "470080"
  },
  {
    "text": "are what you want it\nto be, you can just",
    "start": "470080",
    "end": "472750"
  },
  {
    "text": "cut your map in a\nsmall piece, and then",
    "start": "472750",
    "end": "475270"
  },
  {
    "text": "run everything in\nthat small piece,",
    "start": "475270",
    "end": "477550"
  },
  {
    "text": "just to be a sample\nof your final code.",
    "start": "477550",
    "end": "481039"
  },
  {
    "text": "And then when you've\nmade sure that everything",
    "start": "481040",
    "end": "483010"
  },
  {
    "text": "is running properly, you can run\nthe process with the whole map.",
    "start": "483010",
    "end": "487780"
  },
  {
    "text": "So that might save\nyou some time.",
    "start": "487780",
    "end": "492600"
  },
  {
    "text": "There is also another\nfunction that I particularly",
    "start": "492600",
    "end": "495220"
  },
  {
    "text": "think is very useful,\nwhich is the mask function.",
    "start": "495220",
    "end": "501760"
  },
  {
    "text": "Here, I'm going to\nuse one of the maps",
    "start": "501760",
    "end": "503350"
  },
  {
    "text": "that we've used previously\nup in the code, which was",
    "start": "503350",
    "end": "506920"
  },
  {
    "text": "this nitrogen deposition map.",
    "start": "506920",
    "end": "509860"
  },
  {
    "text": "Just to remind\nyou what was that,",
    "start": "509860",
    "end": "513549"
  },
  {
    "text": "I'm just going to\ncharge it and plot it.",
    "start": "513549",
    "end": "516620"
  },
  {
    "text": "So this is the nitrogen\ndeposition that",
    "start": "516620",
    "end": "518559"
  },
  {
    "text": "has happened in 1901, I think.",
    "start": "518559",
    "end": "523960"
  },
  {
    "text": "But we see that the\nmap here, it covers",
    "start": "523960",
    "end": "526600"
  },
  {
    "text": "the whole surface of the\nEarth, including water bodies.",
    "start": "526600",
    "end": "530350"
  },
  {
    "text": "What happens if I want to\nhave the information only",
    "start": "530350",
    "end": "534819"
  },
  {
    "text": "on the ground, only on\nthe Earth's surface?",
    "start": "534820",
    "end": "538520"
  },
  {
    "text": "So what I'm going to do is I'm\ngoing to mask this map right",
    "start": "538520",
    "end": "541720"
  },
  {
    "text": "here with the maps\nthat we previously",
    "start": "541720",
    "end": "544360"
  },
  {
    "text": "used that included only--",
    "start": "544360",
    "end": "547570"
  },
  {
    "text": "that I excluded water\nbodies, let's say.",
    "start": "547570",
    "end": "550570"
  },
  {
    "text": "So I'm going to use again\nthis temperature map.",
    "start": "550570",
    "end": "553160"
  },
  {
    "text": "I'm just going to plot it.",
    "start": "553160",
    "end": "555649"
  },
  {
    "text": "I'm going to use it as a base.",
    "start": "555650",
    "end": "557910"
  },
  {
    "text": "So to do so there,\nis this function",
    "start": "557910",
    "end": "560990"
  },
  {
    "text": "right here that's called mask.",
    "start": "560990",
    "end": "562880"
  },
  {
    "text": "And I'm going to mask\nthis nitrogen deposition",
    "start": "562880",
    "end": "565370"
  },
  {
    "text": "based on this shape right here.",
    "start": "565370",
    "end": "568370"
  },
  {
    "text": "I'm going to run it, it's\ngoing to give me an error.",
    "start": "568370",
    "end": "570620"
  },
  {
    "text": "Here you have it.",
    "start": "570620",
    "end": "572420"
  },
  {
    "text": "This error is saying that\nwe have different extent.",
    "start": "572420",
    "end": "575690"
  },
  {
    "text": "What is that?",
    "start": "575690",
    "end": "577010"
  },
  {
    "text": "Let's just check the two maps.",
    "start": "577010",
    "end": "580580"
  },
  {
    "text": "This map and this\nother map, it's",
    "start": "580580",
    "end": "583100"
  },
  {
    "text": "complaining about the extent.",
    "start": "583100",
    "end": "585110"
  },
  {
    "text": "So this extent here is this one.",
    "start": "585110",
    "end": "589790"
  },
  {
    "text": "And this extent here\nis slightly different.",
    "start": "589790",
    "end": "593089"
  },
  {
    "text": "And that's why we\nhave this problem.",
    "start": "593090",
    "end": "595710"
  },
  {
    "text": "How to solve it?",
    "start": "595710",
    "end": "596760"
  },
  {
    "text": "Well, we'll need to fix\nthis extent problem.",
    "start": "596760",
    "end": "600720"
  },
  {
    "text": "We're going to use this\nresample function here",
    "start": "600720",
    "end": "603740"
  },
  {
    "text": "that's going to\ntransform both maps",
    "start": "603740",
    "end": "606140"
  },
  {
    "text": "in the same extension,\nprojection, and resolution",
    "start": "606140",
    "end": "609200"
  },
  {
    "text": "all at once.",
    "start": "609200",
    "end": "610560"
  },
  {
    "text": "So by using this, I'm going to\nmake the nitrogen deposition",
    "start": "610560",
    "end": "614529"
  },
  {
    "text": "map to have the same\nfeatures as the other map.",
    "start": "614530",
    "end": "621980"
  },
  {
    "text": "So in this case, I'm going\nto use the second map that we",
    "start": "621980",
    "end": "625600"
  },
  {
    "text": "produced to see if it works.",
    "start": "625600",
    "end": "627680"
  },
  {
    "text": "And now, the error is solved.",
    "start": "627680",
    "end": "629980"
  },
  {
    "text": "And we can see the result\non how the map has changed",
    "start": "629980",
    "end": "633970"
  },
  {
    "text": "and how all the water\nbodies has been masked.",
    "start": "633970",
    "end": "638189"
  },
  {
    "start": "638190",
    "end": "643000"
  }
]