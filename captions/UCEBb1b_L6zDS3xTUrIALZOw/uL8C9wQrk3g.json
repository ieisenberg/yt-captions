[
  {
    "text": " [SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "9030"
  },
  {
    "text": "DAVID PERREAULT: OK, so\nwhy don't we get started? So we've been talking\nabout single phase DC-to-AC",
    "start": "9030",
    "end": "16260"
  },
  {
    "text": "converters, and I actually\nhaven't said which direction power is flowing. So the circuits that\nwe're talking about",
    "start": "16260",
    "end": "21630"
  },
  {
    "text": "can generally flow power\nin both directions. And so a general single-phase,\nfull-bridge voltage source",
    "start": "21630",
    "end": "29220"
  },
  {
    "text": "inverter looks\nsomething like this, And you would usually put\na DC bus capacitor here",
    "start": "29220",
    "end": "36989"
  },
  {
    "text": "to help with high-frequency\nripple currents. And you have four\nswitches like this.",
    "start": "36990",
    "end": "51290"
  },
  {
    "text": "And then you will\nput your output here and maybe there's\ngoing to be some load network that goes right here.",
    "start": "51290",
    "end": "57320"
  },
  {
    "text": "And in addition to that-- and\nwe'll talk to this-- maybe sometimes you would have\nsome kind of current sensor",
    "start": "57320",
    "end": "63950"
  },
  {
    "text": "right here in\norder to sense what the output current is if you\nwanted to use that information.",
    "start": "63950",
    "end": "69170"
  },
  {
    "text": "I just thought I'd show\nyou this as an example. This is a 33-kilowatt\nsingle-phase inverter made out",
    "start": "69170",
    "end": "76759"
  },
  {
    "text": "of-- using silicon carbide FETs. ",
    "start": "76760",
    "end": "81860"
  },
  {
    "text": "You can see the very tight\nloop bus capacitors in here.",
    "start": "81860",
    "end": "87110"
  },
  {
    "text": "These are ceramic capacitors. These are film bus capacitors. And by the way, this inverter\nwas built by Dave Otten at MIT.",
    "start": "87110",
    "end": "94480"
  },
  {
    "text": " What you have here\nis a full bridge--",
    "start": "94480",
    "end": "100170"
  },
  {
    "text": "each using a bunch of\nparallel devices for each switch because there's\na high-power design.",
    "start": "100170",
    "end": "105180"
  },
  {
    "text": "And basically, you have\none set of switches, and on the other\nside of the board, another set of switches that\nform one half bridge, and then",
    "start": "105180",
    "end": "113415"
  },
  {
    "text": "the other pair on the\nother side of the board forms a second half bridge. Air flows down the board\nthis way to cool it.",
    "start": "113415",
    "end": "122160"
  },
  {
    "text": "You can see things\nlike gate driver chips along here that are distributed\nto run the parallel gate drives.",
    "start": "122160",
    "end": "128520"
  },
  {
    "text": "There's also, on this side of\nthe board, a current sensor. That's the current\nsensor we'll talk about.",
    "start": "128520",
    "end": "133600"
  },
  {
    "text": "So basically, this is\nprecisely the structure we've been talking about. And as I said, this is about a\n33-kilowatt block that runs off",
    "start": "133600",
    "end": "140940"
  },
  {
    "text": "of a 720-volt bus for a\nmotor drive application. So you can pass that around.",
    "start": "140940",
    "end": "146470"
  },
  {
    "text": "Just take a look at it. Try not to drop it, however. I'll be in trouble\nif you guys drop it.",
    "start": "146470",
    "end": "154290"
  },
  {
    "text": "So that's the\nhardware structure. So far, we've been talking\nabout different ways",
    "start": "154290",
    "end": "160290"
  },
  {
    "text": "we can start to approximate a\nsine wave better and better. And as I said, in a\nlot of applications,",
    "start": "160290",
    "end": "167405"
  },
  {
    "text": "a sine wave is\nwhat you're trying to synthesize because, for\nexample, in that application, the motor is expecting--",
    "start": "167405",
    "end": "174510"
  },
  {
    "text": "has sine wave back-EMF, and\nyou want sine wave currents going into the motor. So you're trying to\nsynthesize something",
    "start": "174510",
    "end": "180930"
  },
  {
    "text": "that approaches a sine wave\nsuch that this voltage, Vx, has",
    "start": "180930",
    "end": "187200"
  },
  {
    "text": "a sine wave voltage component\nplus a bunch of high frequency switching content.",
    "start": "187200",
    "end": "192460"
  },
  {
    "text": "And we said there's different\nways we could try to make that.",
    "start": "192460",
    "end": "198960"
  },
  {
    "text": "work better in terms of\ngetting close to a sine wave by switching. One technique we talked about\nwas harmonic elimination.",
    "start": "198960",
    "end": "207286"
  },
  {
    "start": "207286",
    "end": "213239"
  },
  {
    "text": "And the idea is this. Suppose I would make my voltage,\nVx, here have a bunch of pulses.",
    "start": "213240",
    "end": "222710"
  },
  {
    "text": "So if I imagine that the\nlow-frequency content was going to try to look\nlike some sine wave",
    "start": "222710",
    "end": "227890"
  },
  {
    "text": "and I'm switching\nbetween plus VDC, 0, and minus VDC, then\nmaybe what I would do",
    "start": "227890",
    "end": "234550"
  },
  {
    "text": "is I would have certain\nnumber of pulses, and I would control the angle\nof those pulses very carefully.",
    "start": "234550",
    "end": "241480"
  },
  {
    "text": "And if I do that and I want\nto make my waveforms half-wave symmetric so that I\nget no even harmonics--",
    "start": "241480",
    "end": "251680"
  },
  {
    "text": "so we would come along\nhere, and we would do this. And this would be\nmy pulsing waveform.",
    "start": "251680",
    "end": "258880"
  },
  {
    "text": " And what we would do is\nwe would pick these angles",
    "start": "258880",
    "end": "265130"
  },
  {
    "text": "very specifically in order\nto kill off harmonic content",
    "start": "265130",
    "end": "270320"
  },
  {
    "text": "because we said we can\nfigure out the harmonic content by multiplying the\nPWM waveform by the sine--",
    "start": "270320",
    "end": "277750"
  },
  {
    "text": "if it's an odd waveform\nat the correct frequency, integrating them when I get 0. That harmonic is not there.",
    "start": "277750",
    "end": "284389"
  },
  {
    "text": "And what that\ntechnique tends to do-- if I looked at the magnitude\nof Vx versus frequency,",
    "start": "284390",
    "end": "294110"
  },
  {
    "text": "I will have some fundamental. And I want that because that's\nwhat I'm trying to approximate.",
    "start": "294110",
    "end": "301710"
  },
  {
    "text": "And then I'll have\nsome harmonic content that depends on the angles,\nand I can get rid of the evens",
    "start": "301710",
    "end": "307159"
  },
  {
    "text": "easily. But I might suppress one\nor more odd harmonics.",
    "start": "307160",
    "end": "314160"
  },
  {
    "text": "And each pulse and a half\ncycle I can usually suppress, one harmonic. What I do get,\nhowever, when I do",
    "start": "314160",
    "end": "320340"
  },
  {
    "text": "a lot of switching up and down\nis when I go out in frequency, I will get an increase\nin the content,",
    "start": "320340",
    "end": "326580"
  },
  {
    "text": "because there's a lot of\nup and down switching, a lot of high-frequency content\nin this V sub x waveform.",
    "start": "326580",
    "end": "333580"
  },
  {
    "text": "But if I'm running\nthat through a filter-- if this.",
    "start": "333580",
    "end": "339580"
  },
  {
    "text": "load is, say, a low-pass filter\nand it's doing this versus",
    "start": "339580",
    "end": "344990"
  },
  {
    "text": "frequency-- so this is the magnitude\nof H of j. omega,",
    "start": "344990",
    "end": "353539"
  },
  {
    "text": "It's very easy to filter off\nthe high frequency stuff. It's hard to filter off\nthe lower frequency stuff.",
    "start": "353540",
    "end": "358590"
  },
  {
    "text": "So we basically trade\nlow-frequency content for high-frequency content,\nand it makes a good trade.",
    "start": "358590",
    "end": "364580"
  },
  {
    "text": "So that's harmonic elimination,\nand you can do that just with this structure.",
    "start": "364580",
    "end": "371790"
  },
  {
    "text": "The other trick we saw last\nclass is harmonic cancellation. ",
    "start": "371790",
    "end": "384770"
  },
  {
    "text": "And the idea is-- suppose I could take\nmultiple waveforms and add them up and phase\nshift them a little bit.",
    "start": "384770",
    "end": "393450"
  },
  {
    "text": "I'll phase shift the\nfundamental by a little bit, but some harmonic of\ninterest by 180 degrees",
    "start": "393450",
    "end": "399069"
  },
  {
    "text": "so when I add them up,\nI kill off harmonics, And we saw one example of\nthis was something like this.",
    "start": "399070",
    "end": "406990"
  },
  {
    "text": "If I took two waveforms that\nhave plus 0 minus and I phase",
    "start": "406990",
    "end": "412560"
  },
  {
    "text": "shift them, I can\nget something that looks like this, for example. So it might go up to one\nlevel, another level,",
    "start": "412560",
    "end": "422410"
  },
  {
    "text": "something like\nthis, and so forth.",
    "start": "422410",
    "end": "430260"
  },
  {
    "text": "And this one-- you can\nsee, wow, that really does start to look like some kind\nof sine wave very closely.",
    "start": "430260",
    "end": "438660"
  },
  {
    "text": " So harmonic\ncancellation-- actually,",
    "start": "438660",
    "end": "444680"
  },
  {
    "text": "I can view the six-step wave--\nor the stepped waveform that we said-- if I have no third harmonic,\nthe waveform looked like this.",
    "start": "444680",
    "end": "454160"
  },
  {
    "text": "The Vx waveform\nlooked like this. This is actually\ntwo square waves",
    "start": "454160",
    "end": "459500"
  },
  {
    "text": "phase shifted just such that\nwhen I take their difference, I kill off the third harmonic.",
    "start": "459500",
    "end": "465780"
  },
  {
    "text": "So we're already\ndoing that with this. But if I want to do it on\na more sophisticated level, I need more\nsophisticated hardware",
    "start": "465780",
    "end": "471830"
  },
  {
    "text": "that can let me synthesize\nthis more accurate waveform. If I can do that, the beauty\nof harmonic cancellation",
    "start": "471830",
    "end": "479370"
  },
  {
    "text": "is that harmonic\ncancellation not only kills the low frequency\nharmonics that I want to cancel, but it tends to cancel\nmultiples of that.",
    "start": "479370",
    "end": "486509"
  },
  {
    "text": "So we can get-- if I do a\nlot of harmonic cancellation, I can get a waveform that looks\nvery much like a sine wave,",
    "start": "486510",
    "end": "493360"
  },
  {
    "text": "whereas this\nilluminated waveform-- it's kind of ugly, and I'm just\ntaking advantage of the fact",
    "start": "493360",
    "end": "499610"
  },
  {
    "text": "that I can filter the\nhigh-frequency junk out. And there's nothing that says\nwe can't combine those two.",
    "start": "499610",
    "end": "506610"
  },
  {
    "text": "In fact, people do. So the challenge with\nharmonic cancellation is now I need a means to\nsynthesize-- maybe this is VDC.",
    "start": "506610",
    "end": "515159"
  },
  {
    "text": "Maybe this is VDC over\n2 and 0 and minus VDC",
    "start": "515159",
    "end": "520799"
  },
  {
    "text": "over 2 and minus VDC. I've got to be able to\nsynthesize more effective levels to make that work.",
    "start": "520799",
    "end": "527800"
  },
  {
    "text": "Any questions about that? ",
    "start": "527800",
    "end": "534090"
  },
  {
    "text": "So last class I showed you a\ntransformer-coupled converter that could synthesize\nthese waveforms.",
    "start": "534090",
    "end": "541790"
  },
  {
    "text": "And perhaps the theme\nof today's class is-- there's a lot of ways\nyou can do things,",
    "start": "541790",
    "end": "548000"
  },
  {
    "text": "and people do do things because\nthey have different advantages and different circumstances. So let me show you\nsome additional ways",
    "start": "548000",
    "end": "554510"
  },
  {
    "text": "one might synthesize\na circuit that can make these kind\nof fancier waveforms.",
    "start": "554510",
    "end": "559526"
  },
  {
    "start": "559526",
    "end": "565060"
  },
  {
    "text": "Let's just consider-- we might\ncall this, here, a bridge leg",
    "start": "565060",
    "end": "573029"
  },
  {
    "text": "or a half-bridge leg. And this thing--\nin this context,",
    "start": "573030",
    "end": "578100"
  },
  {
    "text": "this circuit can synthesize\na V01 that's either VDC or 0.",
    "start": "578100",
    "end": "588569"
  },
  {
    "text": "So this bridge leg can\nbasically synthesize two levels. And because this leg can\nsynthesize two levels,",
    "start": "588570",
    "end": "595830"
  },
  {
    "text": "this is sometimes called\na two level inverter. A circuit that could synthesize\nfor one leg, 0, 1/2, and full,",
    "start": "595830",
    "end": "605120"
  },
  {
    "text": "might be called a\nthree-level converter. Kind of confusing terminology,\nbut that's the way they do it.",
    "start": "605120",
    "end": "611420"
  },
  {
    "text": "How could I do that? I showed you one\ncircuit last time. Let's talk about a bridge\nleg that might do this.",
    "start": "611420",
    "end": "617730"
  },
  {
    "text": "And here's one way to do it. This is called a neutral-point\nclamped inverter or an NPC",
    "start": "617730",
    "end": "637460"
  },
  {
    "text": "inverter. This general technique\nwas proposed in about 1980",
    "start": "637460",
    "end": "643220"
  },
  {
    "text": "by a guy named Nabae in Japan. And here's what it looks like. Suppose I took my bus and I\nsplit it into two by just,",
    "start": "643220",
    "end": "656800"
  },
  {
    "text": "basically, putting a big tap\npoint on my capacitor here. So here's C big.",
    "start": "656800",
    "end": "661839"
  },
  {
    "text": "Here's C big. Let me assume that this\nis about DC over 2,",
    "start": "661840",
    "end": "667690"
  },
  {
    "text": "or I will make sure it\nstays near VDC over 2. Then maybe what I\ncould do is do this.",
    "start": "667690",
    "end": "674629"
  },
  {
    "text": "I will have S1, S2, S3, and S4.",
    "start": "674630",
    "end": "687880"
  },
  {
    "text": "I'm going to have a\nstack of switches. And then I'm going to have\nanother one that-- here, I'm going to call it S6.",
    "start": "687880",
    "end": "693102"
  },
  {
    "text": " And this is S5.",
    "start": "693103",
    "end": "701389"
  },
  {
    "text": "So I'm going to have\nsix switches here. I can also, in some\ncases, just replace",
    "start": "701390",
    "end": "708730"
  },
  {
    "text": "these two switches with diodes. And in fact, in the\noriginal version, that's what most people did.",
    "start": "708730",
    "end": "713970"
  },
  {
    "text": "So this one might be called an\nactive neutral-point clamped inverter because it uses\ncontrollable switches here.",
    "start": "713970",
    "end": "720770"
  },
  {
    "text": "You could replace with diodes. But here's the idea. Let me think about\nthis output voltage.",
    "start": "720770",
    "end": "726360"
  },
  {
    "text": "I'll call this V01.  If I turn the following\nswitches on, S1, S2, and S5--",
    "start": "726361",
    "end": "736520"
  },
  {
    "text": " oops, S5-- I'm going to turn\nthe top two switches on here--",
    "start": "736520",
    "end": "744690"
  },
  {
    "text": "V out 1 is just going to be VDC.  Suppose I turn on\nS2, S3, S5, S6.",
    "start": "744690",
    "end": "755232"
  },
  {
    "start": "755232",
    "end": "760410"
  },
  {
    "text": "If these four devices\nare on, this node is then, through multiple paths,\npinned to the center here.",
    "start": "760410",
    "end": "768420"
  },
  {
    "text": "So then this should be-- V out should be\napproximately VDC over 2.",
    "start": "768420",
    "end": "775860"
  },
  {
    "text": "It's going to be this\ncenter-point voltage.  If I then turn on S3, S4,\nS6 I'm going to get 0 out.",
    "start": "775860",
    "end": "794680"
  },
  {
    "text": "So by picking different\nswitch configurations.",
    "start": "794680",
    "end": "800800"
  },
  {
    "text": "I can make this\noutput voltage either be plus VDC, plus\nVDC over 2, or 0.",
    "start": "800800",
    "end": "808810"
  },
  {
    "text": "And if I took two\nof these things or I took another\nset of switches and tied it to the\nsame center point,",
    "start": "808810",
    "end": "815950"
  },
  {
    "text": "then I could generate\nthis waveform here. Or I could generate this\nwaveform plus PWM between levels",
    "start": "815950",
    "end": "825090"
  },
  {
    "text": "and combine harmonic\nelimination and cancellation. So this is a bridge leg for a\nso-called three-level inverter.",
    "start": "825090",
    "end": "834149"
  },
  {
    "text": "Any questions about that?  Yeah. AUDIENCE: How do turn on S5?",
    "start": "834150",
    "end": "840210"
  },
  {
    "text": "DAVID PERREAULT: Ah,\nexcellent question. So you don't have to.",
    "start": "840210",
    "end": "845790"
  },
  {
    "text": "But here's the neat thing\nabout this inverter. In fact, this is one of the\nkey reasons why Nabae came up",
    "start": "845790",
    "end": "851040"
  },
  {
    "text": "with what he was doing\noriginally is the following. What is the off-state\nvoltage of S1?",
    "start": "851040",
    "end": "858450"
  },
  {
    "text": "Well, if I have this thing\ntied to the middle point,",
    "start": "858450",
    "end": "865230"
  },
  {
    "text": "S1 only sees VDC over 2. What about S3 and S4?",
    "start": "865230",
    "end": "871279"
  },
  {
    "text": "If S1 and S2 are\non and S5 is on, that means S3 sees VDC over\n2 and S4 sees VDC over 2.",
    "start": "871280",
    "end": "880430"
  },
  {
    "text": "So by turning on the extra\nswitches, S5 and S6, what",
    "start": "880430",
    "end": "885680"
  },
  {
    "text": "I'm really doing-- in\naddition to providing a path to the middle, I'm ensuring\nthat every single switch only",
    "start": "885680",
    "end": "893360"
  },
  {
    "text": "is rated for half the\nswitching voltage. And that's a big deal because--",
    "start": "893360",
    "end": "899190"
  },
  {
    "text": "like, Nabae liked to work\non things like traction, where the voltages\nare really high. And it turns out a lot\nof times the voltage",
    "start": "899190",
    "end": "904769"
  },
  {
    "text": "you want to use-- you\ncan't buy switches with high enough rating, You\nwould like to make it bigger, but nobody makes the\nsemiconductor switch you want.",
    "start": "904770",
    "end": "913260"
  },
  {
    "text": "So if you can\nbuild your inverter with lower rated\nswitches, you've got a very powerful advantage.",
    "start": "913260",
    "end": "919420"
  },
  {
    "text": "It also turns out that if you\ndouble the blocking voltage of a transistor, typically,\nthe performance is a lot worse.",
    "start": "919420",
    "end": "928260"
  },
  {
    "text": "They're a lot less than\nhalf as good, Like, the resistance way\nmore than doubles. Usually, it goes as a\nquadratic, almost, or more.",
    "start": "928260",
    "end": "935459"
  },
  {
    "text": "So you're actually, in fact\nbetter having two 600-volt switches than one\n1,200-volts switch,",
    "start": "935460",
    "end": "941910"
  },
  {
    "text": "at least from an on-state\nresistance and capacitance point of view. So it's a more\ncomplicated circuit,",
    "start": "941910",
    "end": "947850"
  },
  {
    "text": "but it reduces the\nstress on the components. And that's one of the\nreasons why I was doing it.",
    "start": "947850",
    "end": "952890"
  },
  {
    "text": "And a reason why you\nwould put diodes in here-- the original flavor\nof this device-- basically, just replace\nthis with diodes.",
    "start": "952890",
    "end": "959920"
  },
  {
    "text": "The diodes would turn on-- depending upon whether\ncurrent was going this way, S5 would turn on. If the current was going\nthis way, S6 would turn on.",
    "start": "959920",
    "end": "967360"
  },
  {
    "text": "So you could use\ndiodes here as well. It doesn't do as perfect a\njob of protecting at least one",
    "start": "967360",
    "end": "973407"
  },
  {
    "text": "of the switches if you\ndo that, but it still tends to work just fine. great question.",
    "start": "973407",
    "end": "978410"
  },
  {
    "text": " I should make a couple of notes.",
    "start": "978410",
    "end": "983560"
  },
  {
    "text": "This structure really only\nworks for DC to AC conversion. Why? Because what I have\nto do ultimately is--",
    "start": "983560",
    "end": "991430"
  },
  {
    "text": "what is the allowable average\ncurrent into this node if I want to keep\nthe voltage stable?",
    "start": "991430",
    "end": "999092"
  },
  {
    "text": "AUDIENCE: 0? DAVID PERREAULT:\nIt's got to be 0. Right. Why? Because I can't put a DC\ncurrent into a capacitor",
    "start": "999092",
    "end": "1005600"
  },
  {
    "text": "and have its\nvoltage stay stable. So what that means is if I\nhave a motor drive that's going to draw 100, 500\nhertz out here or something,",
    "start": "1005600",
    "end": "1016759"
  },
  {
    "text": "I may have 500 hertz\ncurrents coming in here, but no DC current. So I may have to control the\nswitches a little bit just",
    "start": "1016760",
    "end": "1023990"
  },
  {
    "text": "to make sure that this\nnode stays balanced. And I can't deliver DC\ncurrent out of this thing.",
    "start": "1023990",
    "end": "1029775"
  },
  {
    "text": "I can only deliver\nAC current out of it because otherwise, this\ncapacitor-- this node wouldn't say it half the bus voltage.",
    "start": "1029775",
    "end": "1035520"
  },
  {
    "text": "But since I usually have big bus\ncapacitors here anyways and I",
    "start": "1035520",
    "end": "1040640"
  },
  {
    "text": "usually use this when I\ndo want AC currents only, that works just fine.",
    "start": "1040640",
    "end": "1045819"
  },
  {
    "text": "Any questions about that?  So that's one of a\nvariety of ways to do it.",
    "start": "1045819",
    "end": "1052260"
  },
  {
    "text": "Let me show you\none more, keeping with the theme for today.",
    "start": "1052260",
    "end": "1057560"
  },
  {
    "text": "And by the way, these are hardly\nthe only ways you can do this. I'm just showing you\ntwo very popular ones.",
    "start": "1057560",
    "end": "1063710"
  },
  {
    "text": "This is known as a flying\ncapacitor multilevel inverter.",
    "start": "1063710",
    "end": "1073284"
  },
  {
    "text": " And here's the idea.",
    "start": "1073285",
    "end": "1078470"
  },
  {
    "text": "Suppose I'll take my DC\nbus voltage here, VDC.",
    "start": "1078470",
    "end": "1083750"
  },
  {
    "text": "Now I'm going to go out\nand get four switches. I'll call this S1--",
    "start": "1083750",
    "end": "1089610"
  },
  {
    "text": "actually, I'll call this S1, S2. ",
    "start": "1089610",
    "end": "1096260"
  },
  {
    "text": "I'll call this S2\nprime and S1 prime.",
    "start": "1096260",
    "end": "1101790"
  },
  {
    "text": "And what I'm going\nto do is I'm going to put a big capacitor\nhere, And I'm going to make VC approximately\nequal to VDC over 2.",
    "start": "1101790",
    "end": "1114539"
  },
  {
    "text": "I'm going to control this\ncircuit so this capacitor voltage stays at approximately\nhalf the bus voltage.",
    "start": "1114540",
    "end": "1121080"
  },
  {
    "text": "What do I get when I do that. Which switch is on? Let's see.",
    "start": "1121080",
    "end": "1127690"
  },
  {
    "text": "S1 and S2. If these two switches are\non, the output voltage",
    "start": "1127690",
    "end": "1135760"
  },
  {
    "text": "would go to VDC.  If I have S1 and\nS2 prime on, I get",
    "start": "1135760",
    "end": "1149020"
  },
  {
    "text": "VDC minus VC, which\nis approximately equal to VDC over 2.",
    "start": "1149020",
    "end": "1156820"
  },
  {
    "text": "If I have.  S1 prime and S2 on, that\nwill connect here to here",
    "start": "1156820",
    "end": "1167980"
  },
  {
    "text": "to the output. Then I would get VC, which\nis also approximately equal to VDC over 2.",
    "start": "1167980",
    "end": "1174790"
  },
  {
    "text": "And lastly, if I have\nS1 prime and S2 prime, I'll connect the bottom\ntwo and V out 1 will be 0.",
    "start": "1174790",
    "end": "1183220"
  },
  {
    "text": "So here, I can synthesize\nplus VDC, approximately VDC",
    "start": "1183220",
    "end": "1189220"
  },
  {
    "text": "over 2 and 0. Again, this one bridge leg can\nsynthesize the positive half",
    "start": "1189220",
    "end": "1196570"
  },
  {
    "text": "of this thing. I can make another three-level\ninverter with this.",
    "start": "1196570",
    "end": "1201649"
  },
  {
    "text": "Any questions about that? Now, I have two ways\nI can synthesize,",
    "start": "1201650",
    "end": "1207500"
  },
  {
    "text": "roughly speaking, VDC over 2. Suppose I had a\npositive load current. If I did it the first way, I\nwould have current flowing out",
    "start": "1207500",
    "end": "1218030"
  },
  {
    "text": "of here into the load, and it\nwould charge this capacitor. If I did it the\nsecond way, it would",
    "start": "1218030",
    "end": "1224840"
  },
  {
    "text": "flow up from the bottom out\nthrough the capacitor and out and discharge the capacitor. So these two mid-voltage\nstates have opposite effects",
    "start": "1224840",
    "end": "1235010"
  },
  {
    "text": "in whether they charge or\ndischarge this capacitor for a given load current. So by choosing which of these\nI use at any given time,",
    "start": "1235010",
    "end": "1244059"
  },
  {
    "text": "I can maintain that capacitor\nvoltage near half VDC. ",
    "start": "1244060",
    "end": "1253640"
  },
  {
    "text": "Again, notice that if this\nis kept near VDC over 2, each of these switches again\nonly sees VDC over 2 blocking.",
    "start": "1253640",
    "end": "1262280"
  },
  {
    "text": "Now, in practice, I can't\nquite derate them that much, but I have to derate them\nless than if I didn't",
    "start": "1262280",
    "end": "1268670"
  },
  {
    "text": "have this kind of divide down. So this FCML, as it's\nknown-- this was, by the way,",
    "start": "1268670",
    "end": "1278630"
  },
  {
    "text": "originally proposed in about\nthe early '90s by a guy named Maynard. So this is sometimes\ncalled a Maynard inverter--",
    "start": "1278630",
    "end": "1284789"
  },
  {
    "text": " is really powerful.",
    "start": "1284790",
    "end": "1291960"
  },
  {
    "text": "It gets really widely used. And the other neat thing about\nthis thing is that you can",
    "start": "1291960",
    "end": "1298529"
  },
  {
    "text": "actually-- whereas in the\nother version I showed you, you cannot source DC current,\nbecause you'll eventually charge",
    "start": "1298530",
    "end": "1306360"
  },
  {
    "text": "or discharge those\nbus caps, here, by flipping back and forth\nbetween these two states,",
    "start": "1306360",
    "end": "1312720"
  },
  {
    "text": "I could source DC current out\nwithout charging or discharging",
    "start": "1312720",
    "end": "1317970"
  },
  {
    "text": "this cap. So this one's a little\ntrickier to run, and it has this capacitor\nthat flies up and down",
    "start": "1317970",
    "end": "1324800"
  },
  {
    "text": "with the different states. But I can supply\nDC power with it. So people actually build\nDC-to-DC converters this way,",
    "start": "1324800",
    "end": "1330740"
  },
  {
    "text": "too. They build three-level\nDC-to-DC converters. ",
    "start": "1330740",
    "end": "1337360"
  },
  {
    "text": "And I could show\nyou the T-type-- there's a bunch of\ninverters that give you multi-level\ncapabilities like this,",
    "start": "1337360",
    "end": "1343780"
  },
  {
    "text": "and people tend to\nuse all of them. And which one do you use? It depends what you're\ntrying to optimize.",
    "start": "1343780",
    "end": "1350559"
  },
  {
    "text": "People choose different\nthings for different goals.  I should also tell you\nthat just because I",
    "start": "1350560",
    "end": "1360899"
  },
  {
    "text": "said we could do three levels,\nyou can expand your imagination",
    "start": "1360900",
    "end": "1366480"
  },
  {
    "text": "however many levels you like. And in fact, the neutral\npoint clamped-in converter--",
    "start": "1366480",
    "end": "1371787"
  },
  {
    "text": "I'm sorry, the neutral\npoint clamp converter is sometimes of a bigger\nfamily of converters called diode-clamped\nor active-clamped,",
    "start": "1371787",
    "end": "1380520"
  },
  {
    "text": "multi-level inverters. This one also expands. So for example-- I'll\njust show you an example.",
    "start": "1380520",
    "end": "1387160"
  },
  {
    "text": "Suppose I-- instead\nof having one device, I had two devices here in\nthe top and two devices",
    "start": "1387160",
    "end": "1393750"
  },
  {
    "text": "in the bottom position,\nmy next thing would-- I'd have three\ndevices in the top and three devices\nin the bottom thing.",
    "start": "1393750",
    "end": "1399370"
  },
  {
    "text": "So I could do this. I could have one, two,\nthree, four, five, six.",
    "start": "1399370",
    "end": "1411492"
  },
  {
    "text": " Here's VDC. ",
    "start": "1411493",
    "end": "1419250"
  },
  {
    "text": "And I will have V out. ",
    "start": "1419250",
    "end": "1424500"
  },
  {
    "text": "And what I'll do is I will\nhave one flying capacitor here so that these two switches\nare never on at the same time.",
    "start": "1424500",
    "end": "1432000"
  },
  {
    "text": "And I'll have another\nflying capacitor here. So I've got to be careful about\nwhether these two switches are",
    "start": "1432000",
    "end": "1441438"
  },
  {
    "text": "on at the same time, or\ncertainly, these four switches. And what I will do is I\nwill control this one. So that this is approximately\nVDC over 3 and this is",
    "start": "1441438",
    "end": "1452010"
  },
  {
    "text": "approximately 2VDC over 3. Same game.",
    "start": "1452010",
    "end": "1457030"
  },
  {
    "text": "I can pick switch states to\nregulate both of those capacitor voltages. Now, each switch only needs to\nsee a third of the bus voltage.",
    "start": "1457030",
    "end": "1465600"
  },
  {
    "text": "Now, I can't derate it down\nthat far in the real world because I have all\nkinds of start-up and transient and other effects.",
    "start": "1465600",
    "end": "1471669"
  },
  {
    "text": "But nonetheless,\nwhat that means is I have, first of all, lower\nvoltage-rated switches overall and more levels\nI can synthesize.",
    "start": "1471670",
    "end": "1479590"
  },
  {
    "text": "So I can synthesize,\nroughly speaking. VDC-- 2/3 VDC, 1/3 VDC, and 0.",
    "start": "1479590",
    "end": "1487270"
  },
  {
    "text": "So it's a four-level inverter. And you want to expand that out. People have built\n10-level inverters.",
    "start": "1487270",
    "end": "1493620"
  },
  {
    "text": "Why would I want to build\na 10-level inverter? Because if I'm building an\ninverter with this bridge leg,",
    "start": "1493620",
    "end": "1499260"
  },
  {
    "text": "my output waveform, V01--  V01 might be able to\nlook something like this.",
    "start": "1499260",
    "end": "1506380"
  },
  {
    "text": " I can build this very beautiful\nsine wave kind of thing,",
    "start": "1506380",
    "end": "1513990"
  },
  {
    "text": "Very little harmonic content. Needs very little filtering. So the filter I\nneed is very tiny.",
    "start": "1513990",
    "end": "1520290"
  },
  {
    "text": "And by the way, if I'm building\na grid interface inverter, I've got to build\nthat filter inductor, so I can suddenly make that\nfilter inductor really small.",
    "start": "1520290",
    "end": "1529110"
  },
  {
    "text": "So there are motivations to\ngo to high numbers of levels. What's the downside? Complexity.",
    "start": "1529110",
    "end": "1535800"
  },
  {
    "text": "There's all kinds of complexity\nyou got to throw at it. But you're trading\ncomplexity for performance.",
    "start": "1535800",
    "end": "1544600"
  },
  {
    "text": "And like I said, there's\nversions of this flying capacitor multi-level inverter. There's higher-order versions\nof the neutral point clamped",
    "start": "1544600",
    "end": "1552390"
  },
  {
    "text": "converter. And people just\ndecide what they're going to do based on what\nthey're trying to achieve.",
    "start": "1552390",
    "end": "1558250"
  },
  {
    "text": "Questions about any of that? Yeah, Jack. AUDIENCE: [INAUDIBLE] the\nhigh-side FETs [INAUDIBLE]?",
    "start": "1558250",
    "end": "1565950"
  },
  {
    "text": "DAVID PERREAULT: Ah,\nexcellent question. So I will cover details\nof how you do bootstrap",
    "start": "1565950",
    "end": "1573299"
  },
  {
    "text": "drivers and that kind of thing. The higher the voltages,\nthe trickier it gets. But the crudest thing you could\nimagine is you need two pieces.",
    "start": "1573300",
    "end": "1581830"
  },
  {
    "text": "A, you need a little power\nsupply that flies up and down. Sometimes that's built with\nan isolated power supply.",
    "start": "1581830",
    "end": "1587950"
  },
  {
    "text": "And in fact, on the\nboard I'm passing around, there's a little\nblack rectangular--",
    "start": "1587950",
    "end": "1593100"
  },
  {
    "text": "a couple of little\nblack rectangular cubes. Those are the flying\npower supplies. Other times, you can build it\nwith a capacitor and a diode",
    "start": "1593100",
    "end": "1599610"
  },
  {
    "text": "and bootstrap it. The higher the bus voltage, the\nmore difficult that becomes.",
    "start": "1599610",
    "end": "1605880"
  },
  {
    "text": "The other thing you need, in\naddition to a power supply to power the gate drive\ncharging is a signal isolator.",
    "start": "1605880",
    "end": "1613320"
  },
  {
    "text": "You've got to send the\nsignal up and down. And up to a few 1,000\nvolts, that's not too hard. You can out and buy\ndigital isolators.",
    "start": "1613320",
    "end": "1620130"
  },
  {
    "text": "Or at lower voltages,\na few 100 volts, you can buy ones that aren't\neven galvanically isolated",
    "start": "1620130",
    "end": "1625920"
  },
  {
    "text": "and do the level\nshifting for you. When you get to higher\nand higher voltages, it becomes harder and\nharder and harder,",
    "start": "1625920",
    "end": "1631100"
  },
  {
    "text": "and then you're using\nthese optical connections and everything else to do that. But there's a lot\nof practical issues",
    "start": "1631100",
    "end": "1636425"
  },
  {
    "text": "with what you would\nchoose to do there. And that might be\nanother thing that would influence how many\nlevels you want to use.",
    "start": "1636425",
    "end": "1643780"
  },
  {
    "text": "At the same time, switches\ntend to be more important-- more expensive than isolating\nsignals If you're at high power.",
    "start": "1643780",
    "end": "1652620"
  },
  {
    "text": "If you're at low\npower, you wouldn't want to do that too much\nbecause then the switches aren't",
    "start": "1652620",
    "end": "1659320"
  },
  {
    "text": "expensive, but\nthe isolators are. And that's why there's\na plethora of techniques that people use. I will say, by the way, that\nthis kind of technique-- very",
    "start": "1659320",
    "end": "1666940"
  },
  {
    "text": "popular in integrated\nsilicon converters like CMOS kind of converters,\nbecause all of this stuff",
    "start": "1666940",
    "end": "1673810"
  },
  {
    "text": "can be integrated on a\nCMOS die, and then you're using native devices\nwith low voltage to synthesize a higher voltage.",
    "start": "1673810",
    "end": "1680960"
  },
  {
    "text": "Great question. Any other questions? Yeah. AUDIENCE: So when you were\nregulating the voltage,",
    "start": "1680960",
    "end": "1687790"
  },
  {
    "text": "are we doing that by fixing\nthe respective duty ratio? Or how are we getting that?",
    "start": "1687790",
    "end": "1693309"
  },
  {
    "text": "DAVID PERREAULT:\nYeah, so what you might do in this example\nis you might say, OK, my controller\nis telling me I",
    "start": "1693310",
    "end": "1699310"
  },
  {
    "text": "need to synthesize\nthe middle level, And if I know which\ndirection the current is.",
    "start": "1699310",
    "end": "1706600"
  },
  {
    "text": "I would say, is this\ncapacitor voltage a little low or a little high? And I'd pick my next\nstate as to whether I want",
    "start": "1706600",
    "end": "1713440"
  },
  {
    "text": "this to decrease or increase. So I basically use the\ndegrees of freedom.",
    "start": "1713440",
    "end": "1719000"
  },
  {
    "text": "I have to choose which way to\nswitch to control that voltage. In this case, you can build a\nlittle state machine that says--",
    "start": "1719000",
    "end": "1726340"
  },
  {
    "text": "given that there's two voltage\nthat I need to regulate, which one's big,\nwhich one's small, and you can make a\nlittle state machine",
    "start": "1726340",
    "end": "1732670"
  },
  {
    "text": "that will control both of them.  Any other questions?",
    "start": "1732670",
    "end": "1740730"
  },
  {
    "text": "So if I can build\nmultilevel inverters, I can do higher-order versions\nof harmonic cancellation.",
    "start": "1740730",
    "end": "1748720"
  },
  {
    "text": "I can do harmonic\nelimination at the same time. Make really, really-- waveforms\nthat'll have very nice purity.",
    "start": "1748720",
    "end": "1756580"
  },
  {
    "text": "I don't need to filter\nmuch, and I get what I want. So that's pretty cool.",
    "start": "1756580",
    "end": "1763289"
  },
  {
    "text": "I'd like to talk about\none other aspect. And that is--",
    "start": "1763290",
    "end": "1769680"
  },
  {
    "text": "I've focused on the situation\nwhere, boy, we want to-- to get what we want-- we don't\nwant to switch too often.",
    "start": "1769680",
    "end": "1777570"
  },
  {
    "text": "And that is especially\ntrue at high power levels because at high power\nlevels with high voltages, the switching costs you\na lot, and you really",
    "start": "1777570",
    "end": "1783990"
  },
  {
    "text": "focus on how to minimize that. But in some cases, I have really\ngood MOSFETs at low voltage.",
    "start": "1783990",
    "end": "1793108"
  },
  {
    "text": "I can switch a lot,\nI don't have to say, oh, I can only switch\n10 times per AC cycle. I'm trying to\nsynthesize 60 hertz.",
    "start": "1793108",
    "end": "1799000"
  },
  {
    "text": "I can switch 100 times, more. I think that inverter up\nthere in the application",
    "start": "1799000",
    "end": "1804870"
  },
  {
    "text": "that we're doing-- I forget how many switchings\nper half cycle we do. But it's-- I want to say I\nwant to say it's something",
    "start": "1804870",
    "end": "1813519"
  },
  {
    "text": "on the order of 50 or something. Actually, it's-- no,\nit's more than that.",
    "start": "1813520",
    "end": "1820090"
  },
  {
    "text": "So it's pretty high. So you can switch\na lot If you're",
    "start": "1820090",
    "end": "1825490"
  },
  {
    "text": "at low power or lower voltage. Actually, that's not even\nparticularly low voltage. Like I said, it's\na 720-volt bus.",
    "start": "1825490",
    "end": "1831049"
  },
  {
    "text": "And that one switches at\n80khz to synthesize a couple of kilohertz output signal with\nsome caveats that I'll explain",
    "start": "1831050",
    "end": "1842660"
  },
  {
    "text": "shortly here. But suppose I can switch a lot. How would I do that? Well, one of the\nthings I told you was--",
    "start": "1842660",
    "end": "1849289"
  },
  {
    "text": "if you're trying to do this\nharmonic elimination, man, you got to time those angles\nreally carefully, Otherwise,",
    "start": "1849290",
    "end": "1856910"
  },
  {
    "text": "it doesn't work out too well. And even the same is true\nof harmonic cancellation",
    "start": "1856910",
    "end": "1862220"
  },
  {
    "text": "because you're phase\nshifting stuff, So you've got to get\nyour angles right in order to do very precise\nharmonic elimination.",
    "start": "1862220",
    "end": "1867390"
  },
  {
    "text": "But if you take the handcuffs\noff on how fast you can go, you can switch a lot of times.",
    "start": "1867390",
    "end": "1873342"
  },
  {
    "text": "How do you want to decide how do\nyou want to switch to synthesize a sinusoid, for example? But I'll ask even\na broader question.",
    "start": "1873342",
    "end": "1880860"
  },
  {
    "text": "What if it isn't a sinusoid\nI want to synthesize? And in some cases I don't\neven know, ahead of time,",
    "start": "1880860",
    "end": "1886047"
  },
  {
    "text": "what I want to synthesize. So, for example, if I want to\nbuild a switch mode audio power amplifier--",
    "start": "1886047",
    "end": "1892280"
  },
  {
    "text": "I want to play music\nout this thing-- I may not know\nahead of time what the waveform I\nwant to synthesize",
    "start": "1892280",
    "end": "1898250"
  },
  {
    "text": "is because it's\ndifferent every day. It depends what button the\nperson pushes on their iPod",
    "start": "1898250",
    "end": "1906420"
  },
  {
    "text": "or what you select on Spotify. So I need some way to\ntake an arbitrary waveform",
    "start": "1906420",
    "end": "1911700"
  },
  {
    "text": "and synthesize an arbitrary\nAC output signal very quickly. And there's, again, different\nways you can do that.",
    "start": "1911700",
    "end": "1920700"
  },
  {
    "text": "But I will show you\none that's very common, and this is sometimes\ncalled sine triangle PWM.",
    "start": "1920700",
    "end": "1927590"
  },
  {
    "start": "1927590",
    "end": "1939041"
  },
  {
    "text": "PWM is, again, pulse\nwidth modulation. So we're going to modulate the\nwidths of individual pulses",
    "start": "1939041",
    "end": "1946540"
  },
  {
    "text": "in order to control the output. Sine triangle PWM or sine\ntriangle intercept PWM",
    "start": "1946540",
    "end": "1954920"
  },
  {
    "text": "speaks to the way I would\ndo it if I was trying to synthesize a sine wave. But you don't have to\nsynthesize a sine wave.",
    "start": "1954920",
    "end": "1961770"
  },
  {
    "text": "We can synthesize\nwhatever we want. And here's the idea. Suppose I take some triangular\ncarrier waveform here.",
    "start": "1961770",
    "end": "1974360"
  },
  {
    "text": "And I'm going to make-- I'm going to draw this\nas triangles, like this, with some period, T, like this.",
    "start": "1974360",
    "end": "1982820"
  },
  {
    "text": " And T is going to set my\nswitching period and so forth.",
    "start": "1982820",
    "end": "1994309"
  },
  {
    "text": "So 2T, et cetera. And then suppose I have\nsome reference waveform-- Vref-- that's doing this.",
    "start": "1994310",
    "end": "2000195"
  },
  {
    "text": " So here's Vref.",
    "start": "2000195",
    "end": "2006230"
  },
  {
    "text": "What I'm going to\ndo is I'm going to have a comparator that\nis going to, say, take,",
    "start": "2006230",
    "end": "2013050"
  },
  {
    "text": "at the positive input, Vref,\nand, at the negative input, the triangle wave, and output\nis going to come q of T.",
    "start": "2013050",
    "end": "2024010"
  },
  {
    "text": "If I was doing this\non a half bridge, what would I be thinking?",
    "start": "2024010",
    "end": "2029200"
  },
  {
    "text": "I would say this gets q of\nT and this gets q prime of T is equal to 1 minus q of\nT, So whenever he's on,",
    "start": "2029200",
    "end": "2037620"
  },
  {
    "text": "he's off, and vice versa. So what is the idea here?",
    "start": "2037620",
    "end": "2042690"
  },
  {
    "text": "The idea here is the following. If I run through\nthis comparator, what",
    "start": "2042690",
    "end": "2048388"
  },
  {
    "text": "I'm going to get for my\nq of T is the following. Whenever the reference\nexceeds the triangle wave,",
    "start": "2048389",
    "end": "2057679"
  },
  {
    "text": "I'm going to be on. So here, my switch\nis going to be on.",
    "start": "2057679",
    "end": "2063290"
  },
  {
    "text": "Here's q of T. Is\ngoing to be on here.",
    "start": "2063290",
    "end": "2068340"
  },
  {
    "text": "And maybe a tiny time here, When I come to the next cycle\nand my reference is bigger.",
    "start": "2068340",
    "end": "2075124"
  },
  {
    "text": " I synthesize a wider pulse. ",
    "start": "2075124",
    "end": "2082610"
  },
  {
    "text": "Here, the reference\nis bigger, and I've got an even wider pulse.",
    "start": "2082610",
    "end": "2088980"
  },
  {
    "text": "My height shouldn't\nbe growing here. The heights are all the same. Here, it's even wider\npulse and so forth.",
    "start": "2088980",
    "end": "2096533"
  },
  {
    "text": " So what happens is\nthe fraction of time--",
    "start": "2096534",
    "end": "2102724"
  },
  {
    "text": " so each of these is spaced--",
    "start": "2102725",
    "end": "2108330"
  },
  {
    "text": "T, 2T, 3T, 4T, et cetera. So the spacing of the\nswitching is constant,",
    "start": "2108330",
    "end": "2117840"
  },
  {
    "text": "I have a constant\nswitching frequency. The pulse width that I'm\ngoing to get in any capital",
    "start": "2117840",
    "end": "2124920"
  },
  {
    "text": "T seconds is going to\nbe proportional to the--",
    "start": "2124920",
    "end": "2131160"
  },
  {
    "text": "if I call this triangle height,\nH, d of T, in any cycle, is going to be equal to the\nmagnitude of Vref over H. Why?",
    "start": "2131160",
    "end": "2144270"
  },
  {
    "text": "Because for a triangle\nwave, if this was flat, it's just-- the percentage--\nif I go from 1 down",
    "start": "2144270",
    "end": "2150200"
  },
  {
    "text": "to 0, just linearly. So the duty cycle\nin any given time, and hence the average value, V01\naverage over a switching period,",
    "start": "2150200",
    "end": "2164750"
  },
  {
    "text": "is going to be\nprecisely d, which is precisely the ratio of Vref\nto the top of the triangle.",
    "start": "2164750",
    "end": "2173030"
  },
  {
    "text": "Any questions about that?  Now, if you recall, this\nis the exact same trick",
    "start": "2173030",
    "end": "2180200"
  },
  {
    "text": "we talked about doing\nwith DC-to-DC converters. We just had a sawtooth,\nand we compared it to the level of a signal.",
    "start": "2180200",
    "end": "2186290"
  },
  {
    "text": "Here, I used a triangle wave,\nlike a balanced triangle wave. You could do this\nwith a triangle wave.",
    "start": "2186290",
    "end": "2193020"
  },
  {
    "text": "You could do this\nwith a sawtooth, with a capital\nperiod T. You could do it with a reverse\nsawtooth, like this.",
    "start": "2193020",
    "end": "2200940"
  },
  {
    "text": "All of those things work. But what happens is all\nof them will give you the same average on time--",
    "start": "2200940",
    "end": "2209930"
  },
  {
    "text": "or average high time,\nor the same average V01 over a switching cycle.",
    "start": "2209930",
    "end": "2215690"
  },
  {
    "text": "But what differs-- boy,\nthat's a bad drawing.",
    "start": "2215690",
    "end": "2221530"
  },
  {
    "text": "What differs among these is-- what differs among these\nis the harmonic content.",
    "start": "2221530",
    "end": "2228800"
  },
  {
    "text": "So the high-frequency\nswitching content-- how much is there and\nwhat does it look like--",
    "start": "2228800",
    "end": "2234410"
  },
  {
    "text": "depends upon whether I use\nthis waveform or this waveform. At DC, the local average\nvalue doesn't vary.",
    "start": "2234410",
    "end": "2240380"
  },
  {
    "text": "And it turns out that the\nbalanced triangle wave tends to give you less harmonics\nthan anything else,",
    "start": "2240380",
    "end": "2245540"
  },
  {
    "text": "or it gives you\nless high frequency content or better-shaped\nhigh frequency content. So mostly, for inverters, people\nuse a balanced triangle wave",
    "start": "2245540",
    "end": "2254839"
  },
  {
    "text": "like this. Mostly for DC-to-DC\nconverters, where they don't care\nabout the switching ripple, the detailed harmonic\ncontent of the switching ripple,",
    "start": "2254840",
    "end": "2262049"
  },
  {
    "text": "they often use a sawtooth\nbecause it's a little bit easier to generate. But either of them are\nlegit, and either of them",
    "start": "2262050",
    "end": "2267700"
  },
  {
    "text": "do the same thing. Questions? ",
    "start": "2267700",
    "end": "2273420"
  },
  {
    "text": "And I will say that,\nby the way, if I want to synthesize\na sine wave voltage,",
    "start": "2273420",
    "end": "2281440"
  },
  {
    "text": "this will let me do that.  One way I could do this--",
    "start": "2281440",
    "end": "2289820"
  },
  {
    "text": "I'm showing this\nfor one half bridge, but we don't have a half bridge,\nWe tend to have a full bridge--",
    "start": "2289820",
    "end": "2297170"
  },
  {
    "text": "two half bridges that\nare working together. And now, there are a lot of\nways I can do my control,",
    "start": "2297170",
    "end": "2305490"
  },
  {
    "text": "One thing I might do is\nsay, look, this scheme-- if I have a triangle between\n0 and some positive number,",
    "start": "2305490",
    "end": "2313470"
  },
  {
    "text": "call it 0 and 1, I can take,\nthen, a reference voltage and make my reference\nvoltage between 0 and VDC.",
    "start": "2313470",
    "end": "2320230"
  },
  {
    "text": "I can synthesize an\naverage voltage between 0 and VDC with a half bridge. ",
    "start": "2320230",
    "end": "2326900"
  },
  {
    "text": "Well, maybe what I'll do is\nI'll just do that right here with this half bridge.",
    "start": "2326900",
    "end": "2333350"
  },
  {
    "text": "So based on the\ntriangle comparison, I can synthesize this voltage to\nbe anywhere between 0 and VDC.",
    "start": "2333350",
    "end": "2341990"
  },
  {
    "text": "If I want my output\nto be positive, maybe I just turn\non this switch. And I can synthesize\nanything between 0 to 0",
    "start": "2341990",
    "end": "2348940"
  },
  {
    "text": "and VDC on this side. So Vx is between 0 and VDC. Or if I want my\nVx to be negative,",
    "start": "2348940",
    "end": "2355830"
  },
  {
    "text": "I'll turn on this switch. I'll make this signal\nq of T, and I'll switch",
    "start": "2355830",
    "end": "2361230"
  },
  {
    "text": "this guy just the opposite. And I can synthesize my\nload voltage going negative, from the top.",
    "start": "2361230",
    "end": "2368480"
  },
  {
    "text": "So in that case, I would\nhave one half bridge that's doing pulse-width modulation\nand another half bridge that's",
    "start": "2368480",
    "end": "2377329"
  },
  {
    "text": "doing what we call\nunfolding, deciding am I going to get a positive\noutput or a negative output? ",
    "start": "2377330",
    "end": "2384369"
  },
  {
    "text": "When would I like to do that? I would like to do that when I\nhave one set of switches that's really good at high-frequency\nswitching and another set",
    "start": "2384370",
    "end": "2390610"
  },
  {
    "text": "of switches that's got\nreally low conduction loss, but they don't switch very\noften because they only switch",
    "start": "2390610",
    "end": "2396340"
  },
  {
    "text": "when the voltage reverses. Any questions about\nthat kind of scheme? ",
    "start": "2396340",
    "end": "2404190"
  },
  {
    "text": "Now, that seems good if I have\ntwo different kinds of switches. But on the other\nhand, a lot of time, if I'm just going to have four\nswitches, like in that board",
    "start": "2404190",
    "end": "2410340"
  },
  {
    "text": "I passed around, all the\nfour switches are the same, That's maybe not a\ngreat way to do it. I'd like to balance my switching\nacross all the switches,",
    "start": "2410340",
    "end": "2418020"
  },
  {
    "text": "So maybe-- another way I\ncould do it is shown here. ",
    "start": "2418020",
    "end": "2429080"
  },
  {
    "text": "So this is the scheme I\njust described to you. So we will make the--",
    "start": "2429080",
    "end": "2438620"
  },
  {
    "text": "we will put through the\nreference waveform that's-- if I'm synthesizing a sine wave,\nI will make one side modulate",
    "start": "2438620",
    "end": "2448849"
  },
  {
    "text": "like this, and then I'll flip\nthe switches on the other side to unfold it and get\nthe signal I want.",
    "start": "2448850",
    "end": "2457030"
  },
  {
    "text": "Or I could say, OK, when my\noutput voltage is positive, I'll modulate this side of the\nbridge and hold this switch on.",
    "start": "2457030",
    "end": "2467500"
  },
  {
    "text": "When my output\nvoltage is negative, I'll hold this switch\non and modulate this side of the bridge.",
    "start": "2467500",
    "end": "2472509"
  },
  {
    "text": "And I can do it with\nthis same signal. That way, the\nwaveforms are balanced",
    "start": "2472510",
    "end": "2478020"
  },
  {
    "text": "across the half bridges. One half bridge switches\nwhen it's positive. And the other one\nhas one switch on.",
    "start": "2478020",
    "end": "2483890"
  },
  {
    "text": "and the other switch\nswitches when it's positive, and the other half\nbridge has one switch on.",
    "start": "2483890",
    "end": "2489269"
  },
  {
    "text": "Does that make\nsense to everybody? Which one do I use? It depends on my design.",
    "start": "2489270",
    "end": "2495450"
  },
  {
    "text": "Now I'll show you the\ntechnique that actually gets used in the system that\nthat board's going into, and that looks more like this.",
    "start": "2495450",
    "end": "2503420"
  },
  {
    "text": "And this is kind of cool\nbecause this basically",
    "start": "2503420",
    "end": "2509599"
  },
  {
    "text": "relates back to what\nwe were talking about, about interleaving and\nharmonic cancellation.",
    "start": "2509600",
    "end": "2514910"
  },
  {
    "text": "Only now I'm not thinking\nabout harmonic cancellation of the fundamental waveform, but\nrather the switching contents.",
    "start": "2514910",
    "end": "2521420"
  },
  {
    "text": "Here's the trick. Suppose I have two comparators.",
    "start": "2521420",
    "end": "2527410"
  },
  {
    "text": "And I'll have one\ntriangle wave, and let me make the triangle wave bipolar. It goes from minus 1 to plus 1.",
    "start": "2527410",
    "end": "2532727"
  },
  {
    "text": "And then I'm going\nto have a reference signal that goes like this.",
    "start": "2532727",
    "end": "2538640"
  },
  {
    "text": "And so what am I going to do? The top bridge I'm going to\nswitch when the reference",
    "start": "2538640",
    "end": "2544640"
  },
  {
    "text": "signal is bigger than\nthe triangle wave, just like I told you. But now the triangle\nwave goes to minus 1,",
    "start": "2544640",
    "end": "2551650"
  },
  {
    "text": "and the reference signal\nwill go to minus 1. I've just shifted\nthem both down. The other bridge, I\ndo the same thing,",
    "start": "2551650",
    "end": "2559990"
  },
  {
    "text": "except that I put negative\n1 on the reference signal. So basically, the other guy\nswitches 180 degrees out",
    "start": "2559990",
    "end": "2568430"
  },
  {
    "text": "of phase of the\nswitching frequency. And I get an output\nswitching waveform that's",
    "start": "2568430",
    "end": "2574160"
  },
  {
    "text": "also pulse-width modulated. But if each of these\nclocks, or if this clock",
    "start": "2574160",
    "end": "2579349"
  },
  {
    "text": "was at 100 kilohertz, the\noutput ripple basically would be near 200 kilohertz.",
    "start": "2579350",
    "end": "2585710"
  },
  {
    "text": "So the left side of the--\nthe left, half bridge is switching at 100 kilohertz. The right half bridge is\nswitching at 100 kilohertz.",
    "start": "2585710",
    "end": "2592387"
  },
  {
    "text": "But the ripple that\nI get at the output, because the fundamentals\nare canceling of the ripple frequency,\nis, like, 200 kilohertz,",
    "start": "2592387",
    "end": "2598250"
  },
  {
    "text": "or it's around 200\nkilohertz because there's some very slight\nvariation in the frequency",
    "start": "2598250",
    "end": "2605960"
  },
  {
    "text": "content of the output\nbecause of the reference. But if I was putting\nout a DC signal,",
    "start": "2605960",
    "end": "2611589"
  },
  {
    "text": "it would be 200 kilohertz. Any questions about that? And in fact, that's what\nwe do in that design.",
    "start": "2611590",
    "end": "2618213"
  },
  {
    "text": "AUDIENCE: Where is the\nreference signal coming from? Is this whole idea just\nto amplify the reference?",
    "start": "2618213",
    "end": "2623662"
  },
  {
    "text": "DAVID PERREAULT: That's\nan excellent question. Where is the reference\nsignal coming from. The reference signal\nis coming from whatever",
    "start": "2623663",
    "end": "2629170"
  },
  {
    "text": "you want for your output. So in our case, we might say,\nfor some operating condition,",
    "start": "2629170",
    "end": "2635170"
  },
  {
    "text": "I want this many volts\nAC sinusoid at my output at certain frequency,\nand feed that in--",
    "start": "2635170",
    "end": "2642670"
  },
  {
    "text": "feed that through a DAC and\nput that into a sine triangle, or do the digital\nequivalent of that. Or if I wanted to build\nan audio amplifier,",
    "start": "2642670",
    "end": "2653260"
  },
  {
    "text": "I might have some\nD-to-A converter that's spitting out my audio signal. And this is the audio signal\nthat I want to amplify.",
    "start": "2653260",
    "end": "2661420"
  },
  {
    "text": "And the voltage\nacross the output is going to be the amplified\nversion of this reference signal.",
    "start": "2661420",
    "end": "2666869"
  },
  {
    "text": "So if that's Mozart. Mozart comes out the other end\nat high power into your-- maybe",
    "start": "2666870",
    "end": "2672720"
  },
  {
    "text": "this is a model for\nyour speaker coil. That make sense? In fact, I should say\nmost audio amps today--",
    "start": "2672720",
    "end": "2679640"
  },
  {
    "text": "if you go by a car audio\namp or something like that-- they tend to use\nswitching amplifiers. They don't use\nlinear amps anymore",
    "start": "2679640",
    "end": "2686059"
  },
  {
    "text": "because they're just way,\nway more power efficient. Same reason why you'd go to\na DC-to-DC converter instead",
    "start": "2686060",
    "end": "2692570"
  },
  {
    "text": "of a linear regulator. People do audio amps with\nswitching these days.",
    "start": "2692570",
    "end": "2697760"
  },
  {
    "text": "Excellent question. Other questions? Yeah, Jack. AUDIENCE: What is the input\nfrequency limit for that signal?",
    "start": "2697760",
    "end": "2703797"
  },
  {
    "text": "DAVID PERREAULT: Ah,\nThat's a good question. So there's a couple\nthings that drive that.",
    "start": "2703797",
    "end": "2710569"
  },
  {
    "text": "One of them is that\nthe output frequency--",
    "start": "2710570",
    "end": "2717370"
  },
  {
    "text": "if I actually looked at the\nspectrum of the output, Vx-- it kind of contains mixing\nbetween the reference signal",
    "start": "2717370",
    "end": "2725910"
  },
  {
    "text": "and the PWM carrier signal. So generally, you\nneed the reference",
    "start": "2725910",
    "end": "2732702"
  },
  {
    "text": "you want to\nsynthesize-- typically, you want it to be much\nlower frequency content than the carrier.",
    "start": "2732702",
    "end": "2738630"
  },
  {
    "text": "And how high a carrier-- that\ndepends on how much distortion you want to allow in your-- say, your output\nvoltage or current.",
    "start": "2738630",
    "end": "2745580"
  },
  {
    "text": " The other kind of thing\nyou have to think about is, what does that look\nlike compared to this load?",
    "start": "2745580",
    "end": "2753520"
  },
  {
    "text": "So if this load was inductive\nresistive, the R over L constant-- you'd have\nto have your switching",
    "start": "2753520",
    "end": "2759750"
  },
  {
    "text": "frequency high enough\nthat the switching stuff's going to get filtered.",
    "start": "2759750",
    "end": "2764890"
  },
  {
    "text": "And you want the\nsignal you want to get through that to be cut\noff enough that it really",
    "start": "2764890",
    "end": "2771713"
  },
  {
    "text": "generates the current. Or if there's-- if you're\ninterested in the amount getting across the resistor, you'd have\nto have an upper bound on that--",
    "start": "2771713",
    "end": "2778960"
  },
  {
    "text": "from that, too. Yeah. AUDIENCE: So would\nthis technique",
    "start": "2778960",
    "end": "2784100"
  },
  {
    "text": "be used for a solar inverter? [INAUDIBLE]? DAVID PERREAULT: Sure. That's a very good question.",
    "start": "2784100",
    "end": "2789750"
  },
  {
    "text": "If what I was trying to do\nis do something grid-forming, meaning I want my inverter\nto create the grid.",
    "start": "2789750",
    "end": "2797040"
  },
  {
    "text": "I want an AC output voltage. Yes, I would synthesize a\nsine wave that would be--",
    "start": "2797040",
    "end": "2803420"
  },
  {
    "text": "if I wanted to keep it\nsimple, a single phase-- 120 volts. It's 170 peak. And I'd chop it at whatever\nfrequency, and I'd filter it,",
    "start": "2803420",
    "end": "2811520"
  },
  {
    "text": "and then I'd get, across my\nload, the voltage I wanted, hopefully. If, however, I'm not a\ngrid-forming inverter,",
    "start": "2811520",
    "end": "2820490"
  },
  {
    "text": "I just want to stick\ncurrent into the AC grid, then I don't control voltage. What I control? Current.",
    "start": "2820490",
    "end": "2826040"
  },
  {
    "text": "I would like to be a current\nsource into the grid, preferably looking\nlike a sine wave.",
    "start": "2826040",
    "end": "2831490"
  },
  {
    "text": "Excellent question. How do I do that? One thing I might want\nto do is say, OK, I",
    "start": "2831490",
    "end": "2837700"
  },
  {
    "text": "know that I want to put-- from my solar current--\nfrom my solar panel. I have to generate so\nmuch power into the grid.",
    "start": "2837700",
    "end": "2844220"
  },
  {
    "text": "That means I want\na 1-amp sine wave. So I'll have some I reference\nthat might be a 1-amp sine wave",
    "start": "2844220",
    "end": "2852640"
  },
  {
    "text": "going into the grid. What I'll do is I will\ncompare that to my inverter.",
    "start": "2852640",
    "end": "2863110"
  },
  {
    "text": "So I will come back\nto my inverter. I will measure this current,\nI'll call that I inverter.",
    "start": "2863110",
    "end": "2869835"
  },
  {
    "text": " Here's I inverter.",
    "start": "2869835",
    "end": "2874845"
  },
  {
    "text": " And then that'll be-- this is\nthe error current, I error.",
    "start": "2874845",
    "end": "2883070"
  },
  {
    "text": "I'll put that in through\nsome big gain compensator. ",
    "start": "2883070",
    "end": "2888630"
  },
  {
    "text": "Basically, I'll\namplify the error, and then I will use\nthat to create Vref.",
    "start": "2888630",
    "end": "2894960"
  },
  {
    "text": "So the bigger the error,\nmy current is too low, I get a bigger reference--\ndrives the current up,",
    "start": "2894960",
    "end": "2901080"
  },
  {
    "text": "and you close the loop that way. AUDIENCE: Where\ndid you get Iref? DAVID PERREAULT: Iref\nis coming from saying,",
    "start": "2901080",
    "end": "2907540"
  },
  {
    "text": "how much current do I want\nto stick into the grid? And that's a question\nof power, and that comes from maximum power\npoint tracking on your--",
    "start": "2907540",
    "end": "2913869"
  },
  {
    "text": "on your design. And I should say,\nby the way, there's a lot of applications\nwhere we control current.",
    "start": "2913870",
    "end": "2919480"
  },
  {
    "text": "Injecting into the grid\nfrom solar panels is one. Another thing is\nif I have a motor,",
    "start": "2919480",
    "end": "2925029"
  },
  {
    "text": "torque is proportional\nto current, So in a lot of motor\ndrive applications, I don't just control voltage.",
    "start": "2925030",
    "end": "2931119"
  },
  {
    "text": "I say, how much sinusoidal\ncurrent do I want to feed it? And so I've got to--",
    "start": "2931120",
    "end": "2936339"
  },
  {
    "text": "ultimately, I'm\ntrying my command-- the thing that's I'm controlling\nto control torque, for example, is going to be current.",
    "start": "2936340",
    "end": "2943390"
  },
  {
    "text": "Now, this is one\nway to do things. And the beautiful\nthing about this is everything's more or less\nfixed switching frequency,",
    "start": "2943390",
    "end": "2950300"
  },
  {
    "text": "I know exactly how many times\nI'm going to switch per cycle. And I can take that\nto the bank because I",
    "start": "2950300",
    "end": "2955770"
  },
  {
    "text": "know maybe my switching loss\nand my loss of my inverter. Are there other\nways you can do it?",
    "start": "2955770",
    "end": "2961450"
  },
  {
    "text": "Sure. Here's another one. And I should say-- all\nthese things I say,",
    "start": "2961450",
    "end": "2966857"
  },
  {
    "text": "oh, you could do this,\nor you could do this. People do all of them. It just depends on\nyour application. Here's another idea.",
    "start": "2966857",
    "end": "2972900"
  },
  {
    "text": "Maybe I would do this. Maybe I would have some\ncurrent reference, Iref. ",
    "start": "2972900",
    "end": "2980090"
  },
  {
    "text": "And I would have I would\ncreate Iref plus delta I,",
    "start": "2980090",
    "end": "2989030"
  },
  {
    "text": "and maybe Iref minus\ndelta I A hysteresis band.",
    "start": "2989030",
    "end": "2997140"
  },
  {
    "text": "I'll say, OK, if I'm here\nturn on the top switch so that I have higher\nvoltage applied.",
    "start": "2997140",
    "end": "3004270"
  },
  {
    "text": "And the IL-- this\nis the I inverter--",
    "start": "3004270",
    "end": "3010480"
  },
  {
    "text": "will go up until I hit this\ntop threshold where it's Iref-- it's delta I too big.",
    "start": "3010480",
    "end": "3016780"
  },
  {
    "text": "And then I'll turn\non the bottom switch, and the current will fall. And I'll just chop it like that.",
    "start": "3016780",
    "end": "3024400"
  },
  {
    "text": "And if I zoomed out,\nwhat I would get is some waveform that does this.",
    "start": "3024400",
    "end": "3031700"
  },
  {
    "text": "And maybe I could\nsynthesize a sine wave, or I could synthesize my music\nwaveform, whatever I wanted.",
    "start": "3031700",
    "end": "3037070"
  },
  {
    "text": "So this is known as\nhysteretic current control. ",
    "start": "3037070",
    "end": "3050570"
  },
  {
    "text": "Its advantage is I guarantee\nthat once I get into this, I'm always going to be within\n2 delta I of my reference.",
    "start": "3050570",
    "end": "3058920"
  },
  {
    "text": "So I kind of control the\ncurrent very directly. The downside is what rate\ndoes this thing switch at?",
    "start": "3058920",
    "end": "3065070"
  },
  {
    "text": "Well, that's a bunch of\nanalysis, but it varies. It depends upon the load and\neverything else, and the band.",
    "start": "3065070",
    "end": "3072160"
  },
  {
    "text": "So you don't get to really say\nexactly what frequency you're going to run it. You can analyze it, but it's\na variable frequency thing.",
    "start": "3072160",
    "end": "3078005"
  },
  {
    "text": "Sometimes I really don't\nlike that because it affects my EMI and my filter\ndesign and everything else.",
    "start": "3078005",
    "end": "3083539"
  },
  {
    "text": "So depending upon whether you\nwant to do this or that just depends on the application.",
    "start": "3083540",
    "end": "3089450"
  },
  {
    "text": "People do both. We are pretty much out of time.",
    "start": "3089450",
    "end": "3094760"
  },
  {
    "text": "The last thing we'll\nshow you-- and I'll just show you really quick. We talked about doing PWM.",
    "start": "3094760",
    "end": "3101109"
  },
  {
    "text": "And I'll just show you--",
    "start": "3101110",
    "end": "3106121"
  },
  {
    "text": "let's see. I got to go back. ",
    "start": "3106121",
    "end": "3111830"
  },
  {
    "text": "Here you go. This is precisely the digital\nequivalent of sine triangle PWM.",
    "start": "3111830",
    "end": "3117960"
  },
  {
    "text": "And what you can see\nhere is that there's",
    "start": "3117960",
    "end": "3123619"
  },
  {
    "text": "a ton of switching going\non in the blue waveform, That's the inverter output. But in the red waveform, which\nshows the spectral content,",
    "start": "3123620",
    "end": "3131510"
  },
  {
    "text": "at low frequencies, you\nhave very much the sine wave you're synthesizing. The rest of the junk\nis kind of spit out",
    "start": "3131510",
    "end": "3137359"
  },
  {
    "text": "to very high frequencies\nthat are easy to filter, and I'm not even showing them. That's how high they are.",
    "start": "3137360",
    "end": "3142830"
  },
  {
    "text": "So if you really can pump up\nthe volume in your switching frequency, you can make\nvery pure waveforms.",
    "start": "3142830",
    "end": "3148279"
  },
  {
    "text": "Even though that's\nextremely distorted, all the distortion and\nstuff you don't like",
    "start": "3148280",
    "end": "3153829"
  },
  {
    "text": "is such high frequency you can\nfilter it off and get rid of it. And we are over time. I apologize.",
    "start": "3153830",
    "end": "3159990"
  },
  {
    "text": "We will take up a\nslightly different theme on this topic next class.",
    "start": "3159990",
    "end": "3165470"
  },
  {
    "start": "3165470",
    "end": "3170000"
  }
]