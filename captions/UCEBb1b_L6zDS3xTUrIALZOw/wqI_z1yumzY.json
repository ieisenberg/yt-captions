[
  {
    "start": "0",
    "end": "128000"
  },
  {
    "text": " [CLICK] [SQUEAK] [PAGES RUSTLING] [MOUSE DOUBLE-CLICKS]",
    "start": "0",
    "end": "14858"
  },
  {
    "text": "PROFESSOR: So today we'll be\ncontinuing along the theme of risk stratification. I'll spend the first half\nto 2/3 of today's lecture",
    "start": "14858",
    "end": "22430"
  },
  {
    "text": "continuing where we\nleft off last week before the discussion. I'll talk about how does\none derive the labels",
    "start": "22430",
    "end": "29286"
  },
  {
    "text": "that one uses within a\nsupervised machine learning approach. I'll continue talking\nabout how one evaluates",
    "start": "29287",
    "end": "34610"
  },
  {
    "text": "risk stratification models. And then I'll talk about\nsome of the subtleties that arise when you\nwant to use machine",
    "start": "34610",
    "end": "39769"
  },
  {
    "text": "learning for health\ncare, specifically for risk stratification. And I think that's\ngoing to be one of the most interesting\nparts of today's lecture.",
    "start": "39770",
    "end": "46070"
  },
  {
    "text": "In the last third\nof today's lecture, I'll be talking about\nhow one can rethink the supervised machine\nlearning problem,",
    "start": "46070",
    "end": "52820"
  },
  {
    "text": "not to be a\nclassification problem, but be something closer\nto a regression problem. And one now thinks about not\nwill someone, for example,",
    "start": "52820",
    "end": "60900"
  },
  {
    "text": "develop diabetes within one\nto three years from now, but when precisely will\nthey develop diabetes--",
    "start": "60900",
    "end": "66340"
  },
  {
    "text": "so the time to event. Then one has to start to\nreally think very carefully about the censoring issues\nthat I alluded to last week.",
    "start": "66340",
    "end": "74660"
  },
  {
    "text": "And so I'll formalize\nthose notions in the language of\nsurvival modeling. And I'll talk about how one\ncan do maximum likelihood",
    "start": "74660",
    "end": "80510"
  },
  {
    "text": "estimation in that setting, and\nhow one should do evaluation in that setting. ",
    "start": "80510",
    "end": "86780"
  },
  {
    "text": "So in our lecture\nlast week, I gave you this example of risk\nstratification for type 2",
    "start": "86780",
    "end": "91820"
  },
  {
    "text": "diabetes. The goal, just to remind\nyou, was as follows. 25% of people in\nthe United States",
    "start": "91820",
    "end": "98000"
  },
  {
    "text": "have undiagnosed\ntype 2 diabetes. If we could take\nhealth insurance claims",
    "start": "98000",
    "end": "103850"
  },
  {
    "text": "data that's available\nfor everyone who has health\ninsurance, and use that to predict who, in the\nnear-term-- next one to three",
    "start": "103850",
    "end": "112040"
  },
  {
    "text": "years-- is likely to be newly\ndiagnosed with type 2 diabetes, then we could use it to\nrisk-stratify patient",
    "start": "112040",
    "end": "118910"
  },
  {
    "text": "population. We could use that, then, to\nfigure out who is most at risk, do interventions\nfor those patients, to try to get them diagnosed\nand get them started",
    "start": "118910",
    "end": "126260"
  },
  {
    "text": "on treatment if relevant. But what I didn't\ntalk much about was where did those\nlabels come from.",
    "start": "126260",
    "end": "133380"
  },
  {
    "start": "128000",
    "end": "386000"
  },
  {
    "text": "How do we know that someone had\na diabetes onset in that window that I show up there on the top?",
    "start": "133380",
    "end": "139609"
  },
  {
    "text": " So what are the answers? I mean, all of you should have\nread the paper by Razavian.",
    "start": "139610",
    "end": "146489"
  },
  {
    "text": "And then also you should\nhopefully have some ideas. Thoughts?",
    "start": "146490",
    "end": "151630"
  },
  {
    "text": "A hint-- it was in\nsupplementary material. ",
    "start": "151630",
    "end": "157630"
  },
  {
    "text": "How did we define a\npositive case in that paper? ",
    "start": "157630",
    "end": "168120"
  },
  {
    "text": "Yep. AUDIENCE: Drugs they were on. PROFESSOR: Drugs they were on. OK, yeah, so for example,\nmetformin, glucose--",
    "start": "168120",
    "end": "175860"
  },
  {
    "text": "sorry, insulin. AUDIENCE: I think they did\ninclude metformin actually. PROFESSOR: Metformin\nis a tricky case.",
    "start": "175860",
    "end": "182549"
  },
  {
    "text": "Because metformin is often used\nfor alternative indications. But there are many\nmedications, such as insulin,",
    "start": "182550",
    "end": "190570"
  },
  {
    "text": "which are used pretty\nexclusively for treating diabetes. And so you can look\nto see, does a patient",
    "start": "190570",
    "end": "196920"
  },
  {
    "text": "have a record of taking one\nof these diabetic medications in that window that we're\nusing to define the outcome?",
    "start": "196920",
    "end": "205590"
  },
  {
    "text": "If you see a record\nof a medication, you might conjecture, this\npatient probably has diabetes.",
    "start": "205590",
    "end": "211680"
  },
  {
    "text": "But what about it they don't\nhave any medication listed in that time window? What could you conclude then?",
    "start": "211680",
    "end": "217470"
  },
  {
    "text": "Any ideas? Yeah. AUDIENCE: If you look\nat the HBA1C value,",
    "start": "217470",
    "end": "222660"
  },
  {
    "text": "and you know the normal range,\nand if you see the [INAUDIBLE] above like 7.5 or 7.",
    "start": "222660",
    "end": "229950"
  },
  {
    "text": "PROFESSOR: So you're giving\nme an alternative approach, not looking at medications,\nbut looking at laboratory test results.",
    "start": "229950",
    "end": "235040"
  },
  {
    "text": "Look at their HBA1C\nresults, which measures approximately an\naverage of three-month glucose",
    "start": "235040",
    "end": "242070"
  },
  {
    "text": "values. And if that's out of range,\nthen they're diabetic. And that's, in\nfact, usually used",
    "start": "242070",
    "end": "247530"
  },
  {
    "text": "as a definition of diabetes. But that didn't answer\nmy original question. Why is just looking at diabetic\nmedications not enough?",
    "start": "247530",
    "end": "255090"
  },
  {
    "text": " AUDIENCE: Some of the\ndiabetic medications",
    "start": "255090",
    "end": "260282"
  },
  {
    "text": "can be used to treat\nother conditions. PROFESSOR: Sometimes\nthere's ambiguity in diabetic medications.",
    "start": "260282",
    "end": "265475"
  },
  {
    "text": "But we've sort of\ndealt with that already by trying to\nchoose an unambiguous set. What are other reasons?",
    "start": "265475",
    "end": "271396"
  },
  {
    "text": "AUDIENCE: You're starting\nwith the medicine at the onset of diabetes [INAUDIBLE].",
    "start": "271397",
    "end": "276887"
  },
  {
    "text": "PROFESSOR: Oh, that's a\nreally interesting point-- not the one I was thinking\nabout, but I like it-- which is that a patient might\nhave been diagnosed with type 2",
    "start": "276887",
    "end": "284010"
  },
  {
    "text": "diabetes, but they,\nfor whatever reason, in that communication\nbetween provider and patient,",
    "start": "284010",
    "end": "289260"
  },
  {
    "text": "they decided we're not going\nto start treatment yet. So they might not yet be\non treatment for diabetes,",
    "start": "289260",
    "end": "295800"
  },
  {
    "text": "yet the whole health\ncare system might be very well aware that\nthe patient is diabetic, in which case doing these\ninterventions for that patient",
    "start": "295800",
    "end": "302370"
  },
  {
    "text": "might be irrelevant. Yep, another reason? AUDIENCE: So a lot of\npeople are just not diagnosed for diabetes.",
    "start": "302370",
    "end": "307530"
  },
  {
    "text": "So they have it. So one label means that\nthey have diabetes, and the other label is a\ncombination of people who",
    "start": "307530",
    "end": "312665"
  },
  {
    "text": "have and don't have diabetes. PROFESSOR: So the\npoint was, often you just might not be\ndiagnosed for diabetes.",
    "start": "312665",
    "end": "318448"
  },
  {
    "text": "That, unfortunately,\nis not something that we're going to\nable to solve here. It is an issue, but we\nhave no solution for it.",
    "start": "318448",
    "end": "325292"
  },
  {
    "text": "No, rather there's a different\npoint that I want to get at, which is that this\ndata has biases in it. So even if a patient is\non a diabetes medication,",
    "start": "325292",
    "end": "335160"
  },
  {
    "text": "for whatever reason--\nmaybe they are paying cash for those medications. If they're paying cash\nfor those medications,",
    "start": "335160",
    "end": "341910"
  },
  {
    "text": "then there's not going to be any\nrecord for the patient taking those medications in the\nhealth insurance claims.",
    "start": "341910",
    "end": "347729"
  },
  {
    "text": "Because the health insurer\ndidn't have to pay for it. But the reason that you gave is\nalso a very interesting reason.",
    "start": "347730",
    "end": "353520"
  },
  {
    "text": "And both of them are valid. So for all of these reasons,\njust looking at the medications alone is going to\nbe insufficient.",
    "start": "353520",
    "end": "359280"
  },
  {
    "text": "And as was just\nsuggested a moment ago, looking at other indicators,\nlike, for example, does the patient have an\nabnormal blood glucose value",
    "start": "359280",
    "end": "366900"
  },
  {
    "text": "or HBA1C value would\nalso provide information. So it's non-trivial, right?",
    "start": "366900",
    "end": "373077"
  },
  {
    "text": "And part of what you're going\nto be doing in your next problem set, problem set 2, is going\nto be thinking through how",
    "start": "373077",
    "end": "378120"
  },
  {
    "text": "does one actually do this cohort\nconstruction, not just what is your inclusion/exclusion\ncriteria, but also how do you\nreally derive those labels",
    "start": "378120",
    "end": "385080"
  },
  {
    "text": "from that data set. Now the traditional answer\nto this has two steps to it.",
    "start": "385080",
    "end": "391350"
  },
  {
    "start": "386000",
    "end": "539000"
  },
  {
    "text": "Step 1 is to actually\nmanually label some patients. So you take a few\nhundred patients,",
    "start": "391350",
    "end": "398530"
  },
  {
    "text": "and you go through their data. You actually look at\ntheir data, and decide, is this patient diabetic\nor are they not diabetic?",
    "start": "398530",
    "end": "405650"
  },
  {
    "text": "And the reason why you have to\ndo that is because often what you might think of is obvious-- like, oh, if they're on diabetes\nmedication, they're diabetic--",
    "start": "405650",
    "end": "412830"
  },
  {
    "text": "has flaws to it. And until you really dig\ndown and look at the data, you might not recognize that\nthat criteria has a flaw in it.",
    "start": "412830",
    "end": "419200"
  },
  {
    "text": "So that chart review is\nreally an essential part of this process. Then the second\nstep is, how do you",
    "start": "419200",
    "end": "424730"
  },
  {
    "text": "generalize to get that\nlabel now for everyone in your population. And again, there, there are\nusually two different types",
    "start": "424730",
    "end": "431910"
  },
  {
    "text": "of approaches. The first approach is to\ncome up with some simple rule to try to then\nextrapolate to everyone.",
    "start": "431910",
    "end": "438970"
  },
  {
    "text": "For example, if they have,\nA, diabetes medication, or an abnormal lab\ntest result, that",
    "start": "438970",
    "end": "445139"
  },
  {
    "text": "would be an example of a rule. And then you could then\napply that to everyone. But even those rules can\nbe really tricky to derive.",
    "start": "445140",
    "end": "453470"
  },
  {
    "text": "And I'll show you some examples\nof that in just a moment. And as we know,\nmachine learning is",
    "start": "453470",
    "end": "461699"
  },
  {
    "text": "sometimes good as an alternative\nfor coming up with a rule. So there's often now\na second approach",
    "start": "461700",
    "end": "467320"
  },
  {
    "text": "to this being more\nand more commonly used in the literature, which is to\nactually use machine learning itself to derive the labels.",
    "start": "467320",
    "end": "474783"
  },
  {
    "text": "And this is a bit subtle,\nbecause it's machine learning for machine learning. So I want to break that\ndown for one second.",
    "start": "474783",
    "end": "481095"
  },
  {
    "text": "When you're trying to\nderive the labels, what you want to know\nis not, at time T,",
    "start": "481095",
    "end": "486390"
  },
  {
    "text": "what's going to happen at\ntime T plus W and onwards-- that's the original\nmachine learning task that we set out to solve--",
    "start": "486390",
    "end": "492750"
  },
  {
    "text": "but rather, given\neverything you know about the patient,\nincluding the future data,",
    "start": "492750",
    "end": "498060"
  },
  {
    "text": "is this patient newly diagnosed\nwith diabetes in that window that I show in black there,\nbetween T plus W and onward.",
    "start": "498060",
    "end": "504699"
  },
  {
    "text": "OK? So for example, this\nmachine learning problem, this new machine\nlearning problem,",
    "start": "504700",
    "end": "510360"
  },
  {
    "text": "could take, as input, lab\ntest results, and medications, and a whole bunch of other data. And you then use the few\nexamples you labeled in step 1",
    "start": "510360",
    "end": "520229"
  },
  {
    "text": "to try to predict, is\nthis patient currently diabetic or not. You then use that\nmodel to extrapolate",
    "start": "520230",
    "end": "525930"
  },
  {
    "text": "to the whole population. And now you have\nyour outcome label. It might be a little\nbit imperfect, but hopefully it's much\nbetter than what you",
    "start": "525930",
    "end": "532383"
  },
  {
    "text": "could have gotten with a rule. And then, now\nusing those outcome labels, you solve your original\nmachine learning problem.",
    "start": "532383",
    "end": "539877"
  },
  {
    "start": "539000",
    "end": "727000"
  },
  {
    "text": "Is that clear? Any questions? AUDIENCE: I have one. PROFESSOR: Yep. AUDIENCE: How do you\nevaluate yourself then,",
    "start": "539877",
    "end": "546399"
  },
  {
    "text": "if you have these\nlabels that were produced with machine learning,\nwhich are probabilistic? PROFESSOR: So that's where this\nfirst step is really important.",
    "start": "546400",
    "end": "552880"
  },
  {
    "text": "You've got to get\nground truth somehow. And of course once you\nget that ground truth,",
    "start": "552880",
    "end": "559210"
  },
  {
    "text": "you create a train-and-validate\nset of that ground truth. You run your machine learning\nalgorithm with the trained one.",
    "start": "559210",
    "end": "564339"
  },
  {
    "text": "You'd look at its\nperformance metrics on that validate set for the\nlabel prediction problem. And that's how you\nget confidence in it.",
    "start": "564340",
    "end": "571043"
  },
  {
    "text": "But let's try to break\nthis down a little bit. So first of all, what does this\nchart review step look like?",
    "start": "571043",
    "end": "576402"
  },
  {
    "text": "Well, if it's an\nelectronic health record system, what you often do is you\nwill pull up Epic, or Cerner, or whatever the\ncommercial EHR system is.",
    "start": "576402",
    "end": "583727"
  },
  {
    "text": "And you will actually start\nlooking at the patient data. You'll read notes written\nby previous doctors about this patient.",
    "start": "583727",
    "end": "588850"
  },
  {
    "text": "And you'll look at\ntheir blood test results across time, medications\nthat they're on. And from that you\ncan usually tell",
    "start": "588850",
    "end": "593920"
  },
  {
    "text": "pretty coherent story what's\ngoing on with your patient. Of course even better-- or\nthe best way to get data is to do a prospective study.",
    "start": "593920",
    "end": "600209"
  },
  {
    "text": "So you actually have a\nresearch assistant standing in the room when a patient\nwalks into a provider.",
    "start": "600210",
    "end": "606010"
  },
  {
    "text": "And they talk to the\npatient, and they take down really very clear notes\nwhat this patient has,",
    "start": "606010",
    "end": "612910"
  },
  {
    "text": "what they don't have. But that's usually too\nexpensive to do prospectively. So usually what we do is\ndo this retrospectively.",
    "start": "612910",
    "end": "618925"
  },
  {
    "text": "Now, if you're working with\nhealth insurance claims data, you usually don't have the\nluxury of looking at notes. And so what, in my group, we\ntype typically do is we build,",
    "start": "618925",
    "end": "627430"
  },
  {
    "text": "actually, a visualization tool. And by the way, I'm a\nmachine learning person. I don't know anything\nabout visualization.",
    "start": "627430",
    "end": "634060"
  },
  {
    "text": "Neither do I claim\nto be good at it. But you can't do the machine\nlearning work unless you really",
    "start": "634060",
    "end": "639430"
  },
  {
    "text": "understand your data. So we had to build this tool\nin order to look at the data, in order to try to do that\nfirst step of understanding,",
    "start": "639430",
    "end": "646240"
  },
  {
    "text": "did we even characterize\ndiabetes correctly. So I'm not going\ngo deep into it. By the way, you\ncan download this.",
    "start": "646240",
    "end": "651250"
  },
  {
    "text": "It's an open source tool. But ballpark what I'm showing\nyou here is one patient's data.",
    "start": "651250",
    "end": "656910"
  },
  {
    "text": "I'm showing on\nthis x-axis, time, going from April to December. And on the y-axis, I'm showing\nevents as they occurred.",
    "start": "656910",
    "end": "665180"
  },
  {
    "text": "So in orange are\ndiagnosis codes that were recorded for the patient. In green are procedure codes.",
    "start": "665180",
    "end": "670960"
  },
  {
    "text": "In blue are laboratory tests. And if you see, on a\ngiven line, multiple dots",
    "start": "670960",
    "end": "676060"
  },
  {
    "text": "along that same line, it\nmeans that same lab test was performed multiple times.",
    "start": "676060",
    "end": "681138"
  },
  {
    "text": "And you could click on it to\nsee what the results were. And in this way, you could start\nto tell a coherent story what's going on with your patient.",
    "start": "681138",
    "end": "686905"
  },
  {
    "text": "All right, so tools\nlike this is what you're going to\nneed to able to do that first step from something\nlike health insurance claims",
    "start": "686905",
    "end": "692410"
  },
  {
    "text": "data. Now, traditionally,\nthat first step,",
    "start": "692410",
    "end": "697910"
  },
  {
    "text": "which then leads you to\nlabel some data, and then, from there, you go and\ncome up with these rules,",
    "start": "697910",
    "end": "704470"
  },
  {
    "text": "or do a machine learning\nalgorithm to get the label, usually that's a\npaper in itself. Of course, not of interest to\nthe computer science community,",
    "start": "704470",
    "end": "711391"
  },
  {
    "text": "but of extreme interest to\nthe health care community. So usually there's a first\npaper, academic paper,",
    "start": "711392",
    "end": "716829"
  },
  {
    "text": "which evaluates this process\nfor deriving the label, and then there are much later\npapers which talk about what",
    "start": "716830",
    "end": "723070"
  },
  {
    "text": "you could do with that label,\nsuch as the machine learning problem we originally\nset out to solve. So let's look at an example\nof one of those rules.",
    "start": "723070",
    "end": "730540"
  },
  {
    "start": "727000",
    "end": "1099000"
  },
  {
    "text": "Here is a rule, to derive\nfrom health insurance claims",
    "start": "730540",
    "end": "735759"
  },
  {
    "text": "data whether a patient\nhas type 2 diabetes. Now, this isn't quite the same\none that we used in that paper,",
    "start": "735760",
    "end": "745910"
  },
  {
    "text": "but it gets the idea across. First you look to see, did\nthe patient have a diagnosis code for type 1 diabetes.",
    "start": "745910",
    "end": "752245"
  },
  {
    "text": " If the answer is\nno, you continue.",
    "start": "752245",
    "end": "757990"
  },
  {
    "text": "If the answer is yes,\nyou've sort of ruled out. Because you say, OK, this\npatient's abnormal blood test",
    "start": "757990",
    "end": "763290"
  },
  {
    "text": "results are because they\nhave type 1 diabetes, not type 2 diabetes. Type 1 diabetes\nusually is what you",
    "start": "763290",
    "end": "770110"
  },
  {
    "text": "can think of as\njuvenile diabetes, is diagnosed much earlier. And there's a different\nmechanism behind it.",
    "start": "770110",
    "end": "775448"
  },
  {
    "text": "Then you look at other things-- OK, is there a\ndiagnosis code for type 2 diabetes somewhere\nin the patient's data?",
    "start": "775448",
    "end": "780920"
  },
  {
    "text": "If so, you go to the\nright, and you look to see, is there a medication,\nan Rx, for type 1 diabetes in the data.",
    "start": "780920",
    "end": "787480"
  },
  {
    "text": "If the answer is no, you\ncontinue down this way. If the answer is\nyes, you go this way.",
    "start": "787480",
    "end": "793029"
  },
  {
    "text": "A yes of a type 1\ndiabetes medication doesn't alone rule\nout the patient. Because maybe the\nsame medications",
    "start": "793030",
    "end": "799030"
  },
  {
    "text": "are used for type\n1 as for type 2. So there's some other\nthings you need to do there. Right, you can see that this\nstarts to really quickly become",
    "start": "799030",
    "end": "805360"
  },
  {
    "text": "complicated. And these manual-based\napproaches end up having pretty\nbad positive--",
    "start": "805360",
    "end": "813362"
  },
  {
    "text": "so they're designed\nusually to have pretty high positive predictive value. But they end up having\npretty bad recall,",
    "start": "813362",
    "end": "818490"
  },
  {
    "text": "in that they don't end up\nfinding all of the patients. And that's really why the\nmachine-learning-based approaches end up\nbeing very important",
    "start": "818490",
    "end": "824380"
  },
  {
    "text": "for this type of problem. Now, this is just one example\nof what I call a phenotype.",
    "start": "824380",
    "end": "830030"
  },
  {
    "text": "I call this a phenotype. That's just what the\nliterature calls it. It's a phenotype\nfor type 2 diabetes.",
    "start": "830030",
    "end": "835900"
  },
  {
    "text": "And the word, phenotype,\nin this context is exactly the same\nthing as the label. Yep. AUDIENCE: What is abnormal mean?",
    "start": "835900",
    "end": "842280"
  },
  {
    "text": "PROFESSOR: For example, if the\nHA1C result is 6.5 or higher,",
    "start": "842280",
    "end": "848340"
  },
  {
    "text": "you might say the\npatient has diabetes. AUDIENCE: OK, so this is a\nlab result, not a medical--",
    "start": "848340",
    "end": "853839"
  },
  {
    "text": "PROFESSOR: Correct,\nyeah, thanks. Other questions. AUDIENCE: What's the\nphenotype, which part exactly is the phenotype,\nlike, the whole thing? PROFESSOR: The\nwhole thing, yeah.",
    "start": "853840",
    "end": "859440"
  },
  {
    "text": "So the construction,\nwhere you say-- you follow this\ndecision tree, and you get to a conclusion, which\nis case, which means,",
    "start": "859440",
    "end": "866459"
  },
  {
    "text": "yes they're type 2 diabetic. And if ever you don't reach this\npoint, then the answer is no, they're not type 2 diabetic.",
    "start": "866460",
    "end": "873060"
  },
  {
    "text": "That's what I mean\nby-- so that labeling is what we're calling the\nphenotype of type 2 diabetes. Now later in the\nsemester, people",
    "start": "873060",
    "end": "879644"
  },
  {
    "text": "will use the word, phenotype,\nto mean something else. It's an overloaded term.",
    "start": "879645",
    "end": "884770"
  },
  {
    "text": "But this is what it's called\nin this context as well. Now here's an example\nof a website--",
    "start": "884770",
    "end": "890850"
  },
  {
    "text": "it's from the PheKB project-- where you will\nfind tens to close",
    "start": "890850",
    "end": "896670"
  },
  {
    "text": "to 100 of these\nphenotypes that have been arduously created\nfor a whole range",
    "start": "896670",
    "end": "902310"
  },
  {
    "text": "of different conditions. OK, so if you go\nto this website, and you click on any\none of these conditions,",
    "start": "902310",
    "end": "907530"
  },
  {
    "text": "like appendicitis,\nautism, cataracts, you'll see a different diagram\nof this sort I just showed you.",
    "start": "907530",
    "end": "913800"
  },
  {
    "text": "So this is a real thing. This is something that the\nmedical community really needs to do in order to try\nto derive the label that we",
    "start": "913800",
    "end": "920220"
  },
  {
    "text": "can then use in our\nmachine learning task. AUDIENCE: I'm just curious,\nis the lab value ground truth?",
    "start": "920220",
    "end": "927910"
  },
  {
    "text": "Like if somebody has\ndiabetes, then they must have [INAUDIBLE]. It means they have been\ndiagnosed, and they must have--",
    "start": "927910",
    "end": "935288"
  },
  {
    "text": "PROFESSOR: Well,\nso, for example, you might have an\nabnormal glucose value for a variety of reasons.",
    "start": "935288",
    "end": "940600"
  },
  {
    "text": "One reason is because\nyou might have what's called gestational\ndiabetes, which is diabetes that's\ninduced due to pregnancy.",
    "start": "940600",
    "end": "948360"
  },
  {
    "text": "But those patients\ntypically-- well, although it's a\npredictive factor, they don't always have\nlong-term type 2 diabetes.",
    "start": "948360",
    "end": "954190"
  },
  {
    "text": "So even the\nlaboratory test alone doesn't tell the whole story. AUDIENCE: You could be\ndiagnosed without having",
    "start": "954190",
    "end": "961386"
  },
  {
    "text": "abnormal diabetic? PROFESSOR: That's\nmuch less common here.",
    "start": "961386",
    "end": "966509"
  },
  {
    "text": "The story will\nchange in the future, because there will be a\nwhole range of new diagnosis techniques that might use\nnew modalities, like gene",
    "start": "966510",
    "end": "975750"
  },
  {
    "text": "expression, for example. But typically, today, the\nanswer is yes to that.",
    "start": "975750",
    "end": "981019"
  },
  {
    "text": "Yep. AUDIENCE: So if these\nare made by doctors, does that mean, for\nevery single disease, there's one\ndefinitive phenotype? PROFESSOR: These\nare usually made",
    "start": "981020",
    "end": "986780"
  },
  {
    "text": "by health outcomes\nresearchers, which usually have clinicians on their team.",
    "start": "986780",
    "end": "993839"
  },
  {
    "text": "But the type of people who\noften work on these often come from the field of\nepidemiology, for example.",
    "start": "993840",
    "end": "1000650"
  },
  {
    "text": "And so what was\nyour question again? AUDIENCE: Is there\njust one phenotype for every single disease? PROFESSOR: Is\nthere one phenotype",
    "start": "1000650",
    "end": "1006185"
  },
  {
    "text": "for every different disease? In the ideal world, you'd\nhave at least one phenotype for every single disease\nthat could possibly exist.",
    "start": "1006185",
    "end": "1012550"
  },
  {
    "text": "Now, of course, you\nmight be interested in different aspects. Like you might be\ninterested in not knowing just does the\npatient have autism,",
    "start": "1012550",
    "end": "1017920"
  },
  {
    "text": "but where they are on\ntheir autism spectrum. You might not be\ninterested in knowing just, do they have it\nnow, but you also",
    "start": "1017920",
    "end": "1023813"
  },
  {
    "text": "might want to know\nwhen did they get it. So there's a lot of subtleties\nthat could go into this.",
    "start": "1023813",
    "end": "1029140"
  },
  {
    "text": "But building these\nup is really slow. And validating them to\nmake sure that they're going to work\nacross multiple data",
    "start": "1029140",
    "end": "1035250"
  },
  {
    "text": "sets is really challenging, and\nusually is a negative result. And so it's been a\nvery slow process",
    "start": "1035250",
    "end": "1040869"
  },
  {
    "text": "to do this manually,\nwhich has led me and many others to start\nthinking about the machine learning approaches for\nhow to do it automatically.",
    "start": "1040869",
    "end": "1048429"
  },
  {
    "text": "AUDIENCE: Just as a\nfollow-up, is there any case where there's,\nlike, five autism phenotypes, for example, or\nmultiple competing ones?",
    "start": "1048430",
    "end": "1055135"
  },
  {
    "text": "PROFESSOR: Yes. So there are often many\ndifferent such rule-based systems that give you\nconflicting results.",
    "start": "1055135",
    "end": "1061760"
  },
  {
    "text": "Yes, that happens all the time. AUDIENCE: Can these\nrule-based systems provide an estimate of when\ntheir condition was onset?",
    "start": "1061760",
    "end": "1068932"
  },
  {
    "text": "PROFESSOR: Right,\nso that's getting at one of the subtleties I just\nmentioned-- can these tell you when the onset happened?",
    "start": "1068932",
    "end": "1075420"
  },
  {
    "text": "They're not typically\ndesigned to do that, but one can come up\nwith one to do it. And so one way to\ntry to do that is",
    "start": "1075420",
    "end": "1081260"
  },
  {
    "text": "you change those rules to have\na time period associate to it.",
    "start": "1081260",
    "end": "1086340"
  },
  {
    "text": "And then you can imagine\napplying those rules in a sliding window\nto the patient data to see, when is the first\ntime that it triggers.",
    "start": "1086340",
    "end": "1093294"
  },
  {
    "text": "And that would be\none way to try to get a sense of when onset was. But there's a lot of\nsubtleties to that, too.",
    "start": "1093295",
    "end": "1099290"
  },
  {
    "start": "1099000",
    "end": "1221000"
  },
  {
    "text": "So I'm going to move on now. I just want to give it some\nsense of what that deriving",
    "start": "1099290",
    "end": "1104400"
  },
  {
    "text": "the labels ends up looking like. Let's now turn to evaluation.",
    "start": "1104400",
    "end": "1111090"
  },
  {
    "text": "So a very commonly used\napproach in this field is to compute what's known as\nthe Receiver-Operator Curve,",
    "start": "1111090",
    "end": "1117910"
  },
  {
    "text": "or ROC curve. And what this looks\nat is the following. First of all, this\nis well-defined",
    "start": "1117910",
    "end": "1123300"
  },
  {
    "text": "for a binary\nclassification problem. For a binary\nclassification problem",
    "start": "1123300",
    "end": "1128670"
  },
  {
    "text": "when you're using a\nmodel that outputs, let's say, a probability\nor some continuous value,",
    "start": "1128670",
    "end": "1134310"
  },
  {
    "text": "then you could use that\ncontinuous valid prediction. If you wanted to\nmake a prediction, you usually threshold it, right?",
    "start": "1134310",
    "end": "1139450"
  },
  {
    "text": "So you say, if it's greater than\n0.5, it's a prediction of 1. If it's less than 0.5,\nprediction of zero.",
    "start": "1139450",
    "end": "1144509"
  },
  {
    "text": "But here we might be interested\nin not just what minimizes, let's say, 0-1 loss,\nbut you might also",
    "start": "1144510",
    "end": "1149970"
  },
  {
    "text": "be interested in\ntrading off, let's say, false positives for\nfalse negatives.",
    "start": "1149970",
    "end": "1155130"
  },
  {
    "text": "And so you might choose\ndifferent thresholds. And you might want\nto quantify how do those trade-offs look\nfor different choices",
    "start": "1155130",
    "end": "1161730"
  },
  {
    "text": "of those thresholds of this\ncontinuous value prediction. And that's what the ROC\ncurve will show you. So as you move along the\nthreshold, you can compute,",
    "start": "1161730",
    "end": "1169260"
  },
  {
    "text": "for every single threshold,\nwhat is the true positive rate, and what is the\nfalse positive rate. And that gives you a number.",
    "start": "1169260",
    "end": "1175050"
  },
  {
    "text": "And you try all\npossible thresholds, that gives you a curve. And then you can compare curves\nfrom different machine learning",
    "start": "1175050",
    "end": "1182190"
  },
  {
    "text": "algorithms. For example, here,\nI'm showing you, in the green line, the\npredictive model obtained",
    "start": "1182190",
    "end": "1188610"
  },
  {
    "text": "by using what we're calling the\ntraditional risk factors, so something like eight\nor 10 different risk",
    "start": "1188610",
    "end": "1194940"
  },
  {
    "text": "factors for type 2 diabetes\nthat are very commonly used in the literature. Versus in blue, it's\nshowing you what",
    "start": "1194940",
    "end": "1200850"
  },
  {
    "text": "you'd get if you just used\na naive L1-regularized logistic regression model\nwith no domain knowledge,",
    "start": "1200850",
    "end": "1207430"
  },
  {
    "text": "just sort of throw in\nthe bag of features. And you want to be up there. You want to be in\nthat top left corner.",
    "start": "1207430",
    "end": "1215530"
  },
  {
    "text": "That's the goal here. So you would like\nthat blue curve to be up there, and then\nall the way to the right.",
    "start": "1215530",
    "end": "1222360"
  },
  {
    "start": "1221000",
    "end": "1303000"
  },
  {
    "text": "Now, one way to try to\nquantify in a single number",
    "start": "1222360",
    "end": "1227940"
  },
  {
    "text": "how useful any one\nROC curve is is by looking at what's called\nthe area under the ROC curve.",
    "start": "1227940",
    "end": "1234960"
  },
  {
    "text": "And mathematically, this is\nexactly what you'd expect. This area is the area\nunder the ROC curve.",
    "start": "1234960",
    "end": "1242340"
  },
  {
    "text": "So you could just\nintegrate the curve, and you get that number out. Now, remember, I\ntold you you want",
    "start": "1242340",
    "end": "1247800"
  },
  {
    "text": "to be in the upper\nleft quadrant. And so the goal\nwas to get an area under the ROC curve of a 1.",
    "start": "1247800",
    "end": "1256110"
  },
  {
    "text": "Now, what would a random\nprediction give you? Any idea?",
    "start": "1256110",
    "end": "1261429"
  },
  {
    "text": "So if you're to just\nflip a coin and guess-- what do you think?",
    "start": "1261430",
    "end": "1267060"
  },
  {
    "text": "AUDIENCE: 0.5. PROFESSOR: 0.5? AUDIENCE: [INAUDIBLE]",
    "start": "1267060",
    "end": "1272340"
  },
  {
    "text": "PROFESSOR: Well, so I was a\nlittle bit misleading when I said you just flip a coin. You got to flip a coin with\nsort of different noise rates.",
    "start": "1272340",
    "end": "1281903"
  },
  {
    "text": "And each one of\nthose will get you sort of a different\nplace along this curve. And if you look at\nthe curve that you",
    "start": "1281903",
    "end": "1288120"
  },
  {
    "text": "get from these\nrandom guesses, it's going to be the straight\nline from 0 to 1. And as you said, that will\nthen have an AUC of 0.5.",
    "start": "1288120",
    "end": "1297040"
  },
  {
    "text": "So 0.5 is going to\nbe random guessing. 1 is perfect. And your algorithm is going\nto be somewhere in between. ",
    "start": "1297040",
    "end": "1304860"
  },
  {
    "start": "1303000",
    "end": "1642000"
  },
  {
    "text": "Now, of relevance to the\nrest of today's lecture is going to be an\nalternative definition--",
    "start": "1304860",
    "end": "1310890"
  },
  {
    "text": "alternative way of computing\nthe area under the ROC curve. So one way to compute it\nis literally as I said.",
    "start": "1310890",
    "end": "1317340"
  },
  {
    "text": "You create that curve,\nand you integrate to get the area under it. But one can show\nmathematically--",
    "start": "1317340",
    "end": "1323700"
  },
  {
    "text": "I'm not going to give\nyou the derivation here, but you can look\nit up on Wikipedia. One can show mathematically\nthat an equivalent",
    "start": "1323700",
    "end": "1329550"
  },
  {
    "text": "way of computing the\narea under the ROC curve is to compute the probability\nthat an algorithm will",
    "start": "1329550",
    "end": "1335610"
  },
  {
    "text": "rank a positive-labeled\npatient over a negative-labeled patient. So mathematically\nwhat I'm talking about",
    "start": "1335610",
    "end": "1342300"
  },
  {
    "text": "is the following thing. You're going to sum over\npairs of patients where--",
    "start": "1342300",
    "end": "1349530"
  },
  {
    "text": "I'm going to call x1 is a\npatient with label y1 equals 1.",
    "start": "1349530",
    "end": "1358470"
  },
  {
    "text": "And x2 is a patient\nwith label y--",
    "start": "1358470",
    "end": "1364049"
  },
  {
    "text": "actually, I'll call it-- yeah, with label x2 equals 1. So these are two\ndifferent patients.",
    "start": "1364050",
    "end": "1370305"
  },
  {
    "text": " I think I'm going to rewrite\nit like this-- xi and xj,",
    "start": "1370305",
    "end": "1377320"
  },
  {
    "text": "just for generality's sake. So we're going to sum this\nup over all choices of i",
    "start": "1377320",
    "end": "1384520"
  },
  {
    "text": "and j such that yi and\nyj have different labels.",
    "start": "1384520",
    "end": "1390580"
  },
  {
    "text": "So that should say yj equals 0. And then you're\ngoing to look at-- what you want to happen,\nlike suppose that you're",
    "start": "1390580",
    "end": "1397000"
  },
  {
    "text": "using a linear model here. So your prediction is given\nto you by, let's say, w.xj.",
    "start": "1397000",
    "end": "1402742"
  },
  {
    "start": "1402742",
    "end": "1410019"
  },
  {
    "text": "What you want is that this\nshould be smaller than w.xi. ",
    "start": "1410020",
    "end": "1417850"
  },
  {
    "text": "So the j data point,\nremember, was the one that got the 0-th and\nthe i-th data point",
    "start": "1417850",
    "end": "1424990"
  },
  {
    "text": "is the one that got the 1 label. So we want the score of the\ndata point that should've been 1",
    "start": "1424990",
    "end": "1432460"
  },
  {
    "text": "to be higher than the score\nof the data point which should've gotten the label 0. And you just count up-- this\nis an indicator function.",
    "start": "1432460",
    "end": "1439540"
  },
  {
    "text": "You just count up how many of\nthose were correctly ordered. And then you're just going to\nnormalize by the total number",
    "start": "1439540",
    "end": "1445899"
  },
  {
    "text": "of comparisons that you do. And it turns out that that\nis exactly equal to the area under the ROC curve.",
    "start": "1445900",
    "end": "1451383"
  },
  {
    "text": "And it really makes clear\nthat this is a notion that really cares about ranking. Are you getting the ranking\nof patients correct?",
    "start": "1451383",
    "end": "1460630"
  },
  {
    "text": "Are you ranking\nthe ones who should have been given 1 higher\nthan the ones that",
    "start": "1460630",
    "end": "1465850"
  },
  {
    "text": "should have gotten the label 0. And importantly,\nthis whole measure",
    "start": "1465850",
    "end": "1471520"
  },
  {
    "text": "is actually invariant\nto the label imbalance. So you might have a very\nimbalanced data set.",
    "start": "1471520",
    "end": "1478300"
  },
  {
    "text": "But if you were to\nre-sample with now making it a balanced data set, your\nAUC of your predictive model",
    "start": "1478300",
    "end": "1484720"
  },
  {
    "text": "wouldn't change. And that's a nice\nproperty to have when it comes to evaluating\nsettings where you might have",
    "start": "1484720",
    "end": "1492760"
  },
  {
    "text": "artificially created\na balanced data set for computational concerns. Even though the true setting\nis imbalanced, there at least",
    "start": "1492760",
    "end": "1500007"
  },
  {
    "text": "you know that the\nnumbers are going to be the same in both settings. On the other hand, it also\nhas lots of disadvantages.",
    "start": "1500007",
    "end": "1505120"
  },
  {
    "text": "Because often you don't\ncare about the performance of the whole entire curve. Often you care about particular\nparts along the curve.",
    "start": "1505120",
    "end": "1512780"
  },
  {
    "text": "So for example, in\nlast week's lecture, I argued that really\nwhat we often care about",
    "start": "1512780",
    "end": "1519358"
  },
  {
    "text": "is just the positive\npredictive value for a particular threshold. And we want that to be as high\nas possible for as few people",
    "start": "1519358",
    "end": "1525430"
  },
  {
    "text": "as possible. Like, find the 100\nmost risky people, and look at what\nfraction of them actually developed\ntype 2 diabetes.",
    "start": "1525430",
    "end": "1531782"
  },
  {
    "text": "And that setting, what\nyou're really looking at is this part of the curve. And so it turns out\nthere are generalizations",
    "start": "1531782",
    "end": "1538960"
  },
  {
    "text": "of area under the curve that\nfocus on parts of the curve. And that goes by the\nname of partial AUC.",
    "start": "1538960",
    "end": "1544930"
  },
  {
    "text": "For example, if you just\nintegrated from 0 to, let's say, 0.1 of\nthe curve, then",
    "start": "1544930",
    "end": "1550678"
  },
  {
    "text": "you could still get a number to\ncompare two different curves, but it's focusing on the area\nof that curve that's actually relevant for your\npredictive purposes,",
    "start": "1550678",
    "end": "1557070"
  },
  {
    "text": "for your task at hand. So that's all I want to\nsay about receiver-operator",
    "start": "1557070",
    "end": "1564340"
  },
  {
    "text": "characteristic curves. Any questions? Yep. AUDIENCE: Could you talk more\nabout what the drawbacks were",
    "start": "1564340",
    "end": "1571950"
  },
  {
    "text": "of using this. Does the class imbalance--\nis the class imbalance, then, always a positive effect?",
    "start": "1571950",
    "end": "1577290"
  },
  {
    "text": "PROFESSOR: So the thing is, when\nyou want to use this approach,",
    "start": "1577290",
    "end": "1583542"
  },
  {
    "text": "depending on how you're\nusing the [INAUDIBLE],, you might not be\nable to tolerate a 0.8 false positive rate.",
    "start": "1583542",
    "end": "1590152"
  },
  {
    "text": "So in some sense, what's going\non in this part of the curve might be completely\nirrelevant for your task.",
    "start": "1590152",
    "end": "1596960"
  },
  {
    "text": "And so one of the algorithms--\nso one of these curves-- might look like it's\ndoing really, really well over here, and\npretty poorly over here.",
    "start": "1596960",
    "end": "1603860"
  },
  {
    "text": "But if you're looking at the\nfull area under the ROC curve, you won't notice that.",
    "start": "1603860",
    "end": "1609480"
  },
  {
    "text": "And so that's one\nof the big problems. Yeah. AUDIENCE: And when would you\nuse this versus precision",
    "start": "1609480",
    "end": "1615725"
  },
  {
    "text": "recall or-- PROFESSOR: Yeah, so a\nlot of the community is interested in\nprecision recall curves. And precision recall\ncurves, as opposed",
    "start": "1615725",
    "end": "1622463"
  },
  {
    "text": "to receiver-operator\ncurves, have the property that they are not invariant\nto class imbalance, which",
    "start": "1622463",
    "end": "1628558"
  },
  {
    "text": "in many settings is of\ninterest, because it will allow you to capture\nthese types of quantities. I'm not going to go into\ndepth about your reasons",
    "start": "1628558",
    "end": "1634590"
  },
  {
    "text": "for one or the other. But that's something that\nyou could read up about, and I encourage you to\npost to Piazza about, and we have\ndiscussion on Piazza.",
    "start": "1634590",
    "end": "1640785"
  },
  {
    "text": " So the last evaluation quantity\nthat I want to talk about",
    "start": "1640785",
    "end": "1650080"
  },
  {
    "start": "1642000",
    "end": "2101000"
  },
  {
    "text": "is known as calibration. And calibration, as\nI've defined it here, has to do with binary\nclassification problems.",
    "start": "1650080",
    "end": "1656155"
  },
  {
    "text": " Now, before you dig\ninto this figure, which",
    "start": "1656155",
    "end": "1661257"
  },
  {
    "text": "I'll explain in a\nmoment, let me just give you the gist of what\nI mean by calibration.",
    "start": "1661258",
    "end": "1667140"
  },
  {
    "text": "Suppose that your model\noutputs a probability. So you do logistic regression. You get a probability out.",
    "start": "1667140",
    "end": "1673830"
  },
  {
    "text": "And your model says,\nfor these 10 patients,",
    "start": "1673830",
    "end": "1679409"
  },
  {
    "text": "that their likelihood of dying\nin the next 48 hours is 0.7.",
    "start": "1679410",
    "end": "1688890"
  },
  {
    "text": "Suppose that's what\nyour model output. If you were on the receiving\nend of that result,",
    "start": "1688890",
    "end": "1694360"
  },
  {
    "text": "so you heard that,\n0.7, what should you expect about those 10 people?",
    "start": "1694360",
    "end": "1700938"
  },
  {
    "text": "What fraction of\nthem should actually die in the next 48 hours? Everyone could scream out loud.",
    "start": "1700938",
    "end": "1707300"
  },
  {
    "text": "[INTERPOSING VOICES] PROFESSOR: So seven of them. Seven of the 10 you would expect\nto die in the next 48 hours",
    "start": "1707300",
    "end": "1715860"
  },
  {
    "text": "if the probability for all of\nthem that was output was 0.7. All right, that's what\nI mean by calibration.",
    "start": "1715860",
    "end": "1721343"
  },
  {
    "text": "So if, on the other\nhand, what you found was that only\none of them died, then it would be a very weird\nnumber that you're outputting.",
    "start": "1721343",
    "end": "1729730"
  },
  {
    "text": "And so the reason why this\nnotion of calibration, which I'll define formally\nin a second, is so important, is when you're out\nputting a probability,",
    "start": "1729730",
    "end": "1736940"
  },
  {
    "text": "and when you don't really\nknow how that probability is going to be used. If you knew-- if you had\nsome task loss in mind.",
    "start": "1736940",
    "end": "1744180"
  },
  {
    "text": "And you knew that\nall that mattered was the actual prediction, 1\nor 0, then that would be fine.",
    "start": "1744180",
    "end": "1750990"
  },
  {
    "text": "But often predictions\nin machine learning are used in a much\nmore subtle way. Like for example,\noften your doctor",
    "start": "1750990",
    "end": "1758010"
  },
  {
    "text": "might have more information\nthan your computer has. And so often they might\nwant to take the result",
    "start": "1758010",
    "end": "1764160"
  },
  {
    "text": "that your computer\npredicts, and weigh that against other evidence. Or in some settings,\nit's not just",
    "start": "1764160",
    "end": "1770728"
  },
  {
    "text": "weighting about other evidence. Maybe it's also about\nmaking a decision. And that decision\nmight take exertion--",
    "start": "1770728",
    "end": "1776420"
  },
  {
    "text": "a utility, for example,\na patient preference for suffering versus getting\na treatment that could",
    "start": "1776420",
    "end": "1787890"
  },
  {
    "text": "have big, adverse consequences. And that's something\nthat Pete is going to talk about much more\nlater in the semester, I think,",
    "start": "1787890",
    "end": "1796809"
  },
  {
    "text": "how to formalize that notion. But at this point, I just want\nto sort of get out the point that the probabilities\nthemselves could be important.",
    "start": "1796810",
    "end": "1803610"
  },
  {
    "text": "And having the\nprobabilities be meaningful is something that\none can now quantify. So how do we quantify it?",
    "start": "1803610",
    "end": "1808940"
  },
  {
    "text": "Well, one way to\ntry to quantify it",
    "start": "1808940",
    "end": "1814470"
  },
  {
    "text": "is to create the\nfollowing prompt. Actually, we'll\ncall it a histogram.",
    "start": "1814470",
    "end": "1822970"
  },
  {
    "text": "So on the x-axis is the\npredicted probability. ",
    "start": "1822970",
    "end": "1834649"
  },
  {
    "text": "So that's what I meant by p-hat. On the y-axis is the\ntrue probability.",
    "start": "1834650",
    "end": "1840920"
  },
  {
    "text": "It's what I mean when I say\nthe fraction of individuals with that predicted\nprobability that actually",
    "start": "1840920",
    "end": "1846140"
  },
  {
    "text": "got the positive outcome. That's going to be the y-axis. So I'll call that\nthe true probability.",
    "start": "1846140",
    "end": "1852911"
  },
  {
    "text": " And what we would like\nto see is that this",
    "start": "1852911",
    "end": "1861110"
  },
  {
    "text": "is a line, a straight line,\nmeaning these two should always",
    "start": "1861110",
    "end": "1866210"
  },
  {
    "text": "be equal. And in the example\nI gave, remember I said that there\nwere a bunch of people",
    "start": "1866210",
    "end": "1872029"
  },
  {
    "text": "with 0.7 probability\npredicted, but for whom",
    "start": "1872030",
    "end": "1877190"
  },
  {
    "text": "only one out of them actually\ngot the positive end. So that would have been\nsomething like over here.",
    "start": "1877190",
    "end": "1883670"
  },
  {
    "text": " Whereas you would have\nexpected it to be over there.",
    "start": "1883670",
    "end": "1889460"
  },
  {
    "text": "So you might ask, how\ndo I create such a plot from finite data?",
    "start": "1889460",
    "end": "1894799"
  },
  {
    "text": "Well, a common way to do\nso is to bin your data. So you'll create intervals.",
    "start": "1894800",
    "end": "1900440"
  },
  {
    "text": "So this bin is the\nbin from 0 to 0.1.",
    "start": "1900440",
    "end": "1906289"
  },
  {
    "text": "This bin is the bin from\n0.1 to 0.2, and so on.",
    "start": "1906290",
    "end": "1912620"
  },
  {
    "text": "And then you'll look to see,\nOK, how many people for whom the predicted probability\nwas between 0 and 0.1",
    "start": "1912620",
    "end": "1920510"
  },
  {
    "text": "actually died? And you'll get a number out. And now here's where\nI can go to this plot. That's exactly what\nI'm showing you here.",
    "start": "1920510",
    "end": "1927198"
  },
  {
    "text": "So for now, ignore the\nbar charts and the bottom, and just look at the line. So let's focus on\njust the green line.",
    "start": "1927198",
    "end": "1934073"
  },
  {
    "text": "Here I'm showing you\nseveral different models. For now, just focus\non the green line. So the green line, by the way,\nnotice it looks pretty good.",
    "start": "1934073",
    "end": "1942169"
  },
  {
    "text": "It's almost a straight line. So how did I compute it? Well, first of all,\nnotice the number of ticks",
    "start": "1942170",
    "end": "1947510"
  },
  {
    "text": "are 1, 2, 3, 4,\n5, 6, 7, 8, 9, 10. OK, so there are 10\npoints along this line.",
    "start": "1947510",
    "end": "1953810"
  },
  {
    "text": "And each of those corresponds\nto one of these bins. So the first point\nis the 0 to 0.1 bin.",
    "start": "1953810",
    "end": "1959809"
  },
  {
    "text": "The second point is the\n0.1 to 0.2 bin, and so on. So that's how it computed this.",
    "start": "1959810",
    "end": "1965372"
  },
  {
    "text": "The next thing you\nnotice is that I have confidence intervals. And the reason I compute\nthese confidence intervals",
    "start": "1965372",
    "end": "1972500"
  },
  {
    "text": "is because sometimes\nyou just might not have that much data\nin one of these bins. So for example, suppose\nyour algorithm almost never",
    "start": "1972500",
    "end": "1979880"
  },
  {
    "text": "said that someone has a\npredictive probability of 0.99. Then until you\nget a ton of data,",
    "start": "1979880",
    "end": "1986452"
  },
  {
    "text": "you're not going to know what\nfraction of those individuals actually went on to\ndevelop the event.",
    "start": "1986452",
    "end": "1992120"
  },
  {
    "text": "And you should be looking\nat sort of the confidence interval of this line,\nwhich should take that",
    "start": "1992120",
    "end": "1997940"
  },
  {
    "text": "into consideration. And a different way to try to\nunderstand that notion, now looking at the\nnumbers, is what I'm showing you in the bar\ncharts in the bottom.",
    "start": "1997940",
    "end": "2004663"
  },
  {
    "text": "On the bar charts,\nI'm showing you the number of individuals or\nthe fraction of individuals",
    "start": "2004663",
    "end": "2010510"
  },
  {
    "text": "who actually got that\npredicted probability. So now let's start\ncomparing the lines.",
    "start": "2010510",
    "end": "2016210"
  },
  {
    "text": "So the blue line shown\nhere is a machine",
    "start": "2016210",
    "end": "2022600"
  },
  {
    "text": "learning algorithm which\nis predicting infection in the emergency rooms. It's a slightly different\nproblem than the diabetes one",
    "start": "2022600",
    "end": "2029512"
  },
  {
    "text": "we looked at earlier. And it's using a bag of words\nmodel from clinical text.",
    "start": "2029512",
    "end": "2034960"
  },
  {
    "text": "The red line is using\njust chief complaint.",
    "start": "2034960",
    "end": "2041020"
  },
  {
    "text": "So it's using one piece\nof structured data that you get at one\npoint of time in the ER. So it's using very\nlittle information.",
    "start": "2041020",
    "end": "2050960"
  },
  {
    "text": "And you can see that both models\nare somewhat well calibrated.",
    "start": "2050960",
    "end": "2057199"
  },
  {
    "text": "But the intervals--\nthe confidence intervals of both the\nred and the purple lines",
    "start": "2057199",
    "end": "2062679"
  },
  {
    "text": "gets really big towards the end. And if you look at\nthese bar charts, it explains why,\nbecause the models",
    "start": "2062679",
    "end": "2069760"
  },
  {
    "text": "that use less information end\nup being much more risk-averse.",
    "start": "2069760",
    "end": "2075190"
  },
  {
    "text": "So they will never predict\na very high probability. They will always sort of\nstay in this lower regime.",
    "start": "2075190",
    "end": "2080502"
  },
  {
    "text": "And that's why we have very\nbig confidence intervals there. ",
    "start": "2080502",
    "end": "2086339"
  },
  {
    "text": "OK, so that's all I want\nto say about evaluation. And I won't take any\nquestions on this right",
    "start": "2086340",
    "end": "2092020"
  },
  {
    "text": "now, because I\nreally want to get on to the rest of the lecture. But again, if you have any\nquestions, post to Piazza,",
    "start": "2092020",
    "end": "2097852"
  },
  {
    "text": "and I'm happy to discuss\nthem with you offline. ",
    "start": "2097852",
    "end": "2103210"
  },
  {
    "start": "2101000",
    "end": "2564000"
  },
  {
    "text": "So, in summary, we've\ntalked about how to reduce risk stratification\nto binary classification.",
    "start": "2103210",
    "end": "2111610"
  },
  {
    "text": "I've told you how to\nderive the labels. I've given you one example\nof machine learning algorithm you can use, and I talked to\nyou about how to evaluate it.",
    "start": "2111610",
    "end": "2119440"
  },
  {
    "text": "What could possibly go wrong?  So let's look at some examples.",
    "start": "2119440",
    "end": "2126335"
  },
  {
    "text": "And these are a small number of\nexamples of what could possibly go wrong. There are many more.",
    "start": "2126335",
    "end": "2131680"
  },
  {
    "text": "So here's some data. I'm showing you--\nfor the same problem we looked at before,\ndiabetes onset, I'm",
    "start": "2131680",
    "end": "2138260"
  },
  {
    "text": "showing you the prevalence of\ntype 2 diabetes as recorded by,",
    "start": "2138260",
    "end": "2144050"
  },
  {
    "text": "let's say, diagnosis\ncodes across time. All right, so over here is 1980.",
    "start": "2144050",
    "end": "2149450"
  },
  {
    "text": "Over here is 2012. Look at that. It is not a flat line.",
    "start": "2149450",
    "end": "2156088"
  },
  {
    "text": "Now, what does that mean? Does that mean that the\npopulation is eating much more",
    "start": "2156088",
    "end": "2161720"
  },
  {
    "text": "unhealthy from 1980 to\n2012, and so more people",
    "start": "2161720",
    "end": "2166810"
  },
  {
    "text": "are becoming diabetic? That would be one\nplausible answer. Another plausible explanation\nis that something has changed.",
    "start": "2166810",
    "end": "2177660"
  },
  {
    "text": "So in fact I'm showing you\nwith these blue lines, well, in fact, there was a change\nin the diagnostic criteria",
    "start": "2177660",
    "end": "2185240"
  },
  {
    "text": "for diabetes. And so now the patient\npopulation actually didn't change much\nbetween, let's say,",
    "start": "2185240",
    "end": "2191390"
  },
  {
    "text": "this time point at\nthat time point. But what really led\nit to this big uptick,",
    "start": "2191390",
    "end": "2197390"
  },
  {
    "text": "according to one theory, is\nbecause the diagnostic criteria changed. So who we're calling\ndiabetic has changed.",
    "start": "2197390",
    "end": "2203240"
  },
  {
    "text": "Because diseases are,\nat the end of the day, a human-made concept, you know,\nwhat do we call some disease.",
    "start": "2203240",
    "end": "2211760"
  },
  {
    "text": "And so the data is\nchanging, as you see here. Let me show you another example.",
    "start": "2211760",
    "end": "2217080"
  },
  {
    "text": "Oh, by the way, so the\nconsequence of that is that automatically-derived labels-- for example, if you use\none of those phenotyping",
    "start": "2217080",
    "end": "2224125"
  },
  {
    "text": "algorithms I showed you\nearlier, the rules--  what the label is\nderived for over here",
    "start": "2224125",
    "end": "2231680"
  },
  {
    "text": "might be very different\nfrom the label that's derived from over\nhere, particularly if it's using data such\nas diagnosis codes that",
    "start": "2231680",
    "end": "2238880"
  },
  {
    "text": "have changed in\nmeaning over the years. So that's one consequence. There'll be other consequences\nI'll tell you about later.",
    "start": "2238880",
    "end": "2244762"
  },
  {
    "text": "Here's another example. And by the way, this notion\nis called non-stationarity, that the data is\nchanging across time.",
    "start": "2244762",
    "end": "2250080"
  },
  {
    "text": "It's not stationary. Here's another example. On the x-axis again\nI'm showing you time.",
    "start": "2250080",
    "end": "2258490"
  },
  {
    "text": "Here each column is a\nmonth, from 2005 to 2014.",
    "start": "2258490",
    "end": "2264800"
  },
  {
    "text": "And on the y-axis, for every\nsort of row of this table,",
    "start": "2264800",
    "end": "2269930"
  },
  {
    "text": "I'm showing you a\nlaboratory test.  And here we're not looking at\nthe results of the lab test,",
    "start": "2269930",
    "end": "2276440"
  },
  {
    "text": "we're only looking\nat what fraction of-- at how many lab\ntests of that type",
    "start": "2276440",
    "end": "2282110"
  },
  {
    "text": "were performed at\nthis point in time. And now you might expect\nthat, broadly speaking,",
    "start": "2282110",
    "end": "2290510"
  },
  {
    "text": "the number of glucose tests,\nthe number of white blood cell count tests, the number of\nneutrophil tests and so on",
    "start": "2290510",
    "end": "2301039"
  },
  {
    "text": "might be pretty constant\nacross time, on average, because you're averaging\nover lots of people.",
    "start": "2301040",
    "end": "2306200"
  },
  {
    "text": "But indeed what you see\nhere is that, in fact, there is a huge amount\nof non-stationarity.",
    "start": "2306200",
    "end": "2311210"
  },
  {
    "text": "Which tests are\nordered dramatically changes across time.",
    "start": "2311210",
    "end": "2316230"
  },
  {
    "text": "So for example you see\nthis one line over here, where it's all blue, meaning\nno one is ordering the test,",
    "start": "2316230",
    "end": "2323240"
  },
  {
    "text": "until this point in time,\nwhen people start using it. What could that be? Any ideas?",
    "start": "2323240",
    "end": "2329970"
  },
  {
    "text": "Yeah. AUDIENCE: [INAUDIBLE] PROFESSOR: So the test was used\nless, or really, in this case,",
    "start": "2329970",
    "end": "2336650"
  },
  {
    "text": "not used at all. And then suddenly it was used. Why might that happen? In the back. AUDIENCE: A new test.",
    "start": "2336650",
    "end": "2341690"
  },
  {
    "text": "PROFESSOR: A new test, right,\nbecause technology changes. Suddenly we come up with a\nnew diagnostic test, a new lab",
    "start": "2341690",
    "end": "2347660"
  },
  {
    "text": "test. And we can start using it,\nwhere it didn't exist before. So obviously there was\nno data on it before.",
    "start": "2347660",
    "end": "2353010"
  },
  {
    "text": "What's another reason why it\nmight have suddenly showed up? Yep. AUDIENCE: It could be like\nannual check-ups become",
    "start": "2353010",
    "end": "2361406"
  },
  {
    "text": "mandatory, or that it's part of\nthe test admission at hospital.",
    "start": "2361406",
    "end": "2366510"
  },
  {
    "text": "Like, it's an additional test. PROFESSOR: I'll stick\nwith your first example. Maybe that test\nbecomes mandatory.",
    "start": "2366510",
    "end": "2373420"
  },
  {
    "text": "OK, so maybe there's\na clinical guideline that is created at this\npoint in time, right there.",
    "start": "2373420",
    "end": "2381490"
  },
  {
    "text": "And health insurers\ndecide we're going to reimburse for this test\nat this point in time.",
    "start": "2381490",
    "end": "2387647"
  },
  {
    "text": "And the test might've\nbeen really expensive. So no one would have\ndone it beforehand. And now that the health\ninsurance companies",
    "start": "2387647",
    "end": "2392829"
  },
  {
    "text": "are going to pay for it,\nnow people start doing it. So it might have\nexisted beforehand. But if no one would pay for\nit, no one would use it.",
    "start": "2392830",
    "end": "2399790"
  },
  {
    "text": "What's another reason why you\nmight see something like this, or maybe even a gap like this? Notice, here in\nthe middle, there's",
    "start": "2399790",
    "end": "2405220"
  },
  {
    "text": "this huge gap in the middle. What might have explained that? ",
    "start": "2405220",
    "end": "2416195"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] PROFESSOR: Hold on. Yep, over here. AUDIENCE: Maybe your\npatient population",
    "start": "2416195",
    "end": "2421490"
  },
  {
    "text": "is mostly of a certain age,\nand coverage for something changes once your age\ncrosses a threshold.",
    "start": "2421490",
    "end": "2428870"
  },
  {
    "text": "PROFESSOR: Yeah, so\none explanation-- I think it's not plausible\nin this data set, but it is plausible\nfor some data sets--",
    "start": "2428870",
    "end": "2434410"
  },
  {
    "text": "is that maybe your\npatients at time 0",
    "start": "2434410",
    "end": "2440380"
  },
  {
    "text": "were all of exactly\nthe same age. So maybe there's some\namount of alignment. And suddenly, at this\npoint in time, let's say,",
    "start": "2440380",
    "end": "2449740"
  },
  {
    "text": "women only get, let's say,\ntheir annual mammography once they turn a certain age. And so that might be one reason\nwhy you would see nothing",
    "start": "2449740",
    "end": "2457420"
  },
  {
    "text": "until one point in time. And maybe that would\nchange across time as well. Maybe they'll stop getting it\nat some point after menopause.",
    "start": "2457420",
    "end": "2463838"
  },
  {
    "text": "That's not true, but let's say.  So that's one explanation. In this case, it\ndoesn't make sense,",
    "start": "2463838",
    "end": "2470110"
  },
  {
    "text": "because the patient\npopulation is very mixed. So you could think about it as\nbeing roughly at steady state. So they're not-- you'll have\npatients of all ages here.",
    "start": "2470110",
    "end": "2478060"
  },
  {
    "text": "What's another reason? Someone raised their\nhand over here. Yep. AUDIENCE: Yeah, I was\njust going to say,",
    "start": "2478060",
    "end": "2483600"
  },
  {
    "text": "maybe the EMR shut\ndown for awhile, and so they were only\ndoing stuff on paper, and they only were able\nto record 4 things.",
    "start": "2483600",
    "end": "2489710"
  },
  {
    "text": "PROFESSOR: Ding\nding ding ding ding. Yes, that's right. So maybe the EMR shut down.",
    "start": "2489710",
    "end": "2496740"
  },
  {
    "text": "Or in this case,\nwe had data issues. So this data was\nacquired somehow.",
    "start": "2496740",
    "end": "2503830"
  },
  {
    "text": "For example, maybe\nit was required through a contract\nwith something like Webquest or LabCorp.",
    "start": "2503830",
    "end": "2510460"
  },
  {
    "text": "And maybe, during that\nfour-month interval, there was contract negotiation.",
    "start": "2510460",
    "end": "2516202"
  },
  {
    "text": "And so suddenly we\ncouldn't get the Data for that time period. Or maybe our databases\ncrashed, and we suddenly",
    "start": "2516202",
    "end": "2521470"
  },
  {
    "text": "lost all the data\nfor that time period. This happens, and this\nhappens all the time, and not just the\nhealth care industry,",
    "start": "2521470",
    "end": "2527150"
  },
  {
    "text": "but other industries as well. And as a result of those\nsystemic-type changes,",
    "start": "2527150",
    "end": "2532210"
  },
  {
    "text": "your data is also going to be\nnon-stationary across time. So now we've seen three or\nfour different explanations",
    "start": "2532210",
    "end": "2538420"
  },
  {
    "text": "for why this happens. And the reality is really\na mixture of all of these.",
    "start": "2538420",
    "end": "2543720"
  },
  {
    "text": "And just as in the previous-- so in the previous example,\nnotice how what really changed here is that\nthe derived labels might",
    "start": "2543720",
    "end": "2549010"
  },
  {
    "text": "change meaning across time. Now the significance\nof the features",
    "start": "2549010",
    "end": "2554930"
  },
  {
    "text": "used in the machine\nlearning models would really change across time. And that's one of the\nconsequences of this, particular if you're driving\nfeatures from lab test values.",
    "start": "2554930",
    "end": "2564090"
  },
  {
    "start": "2564000",
    "end": "2646000"
  },
  {
    "text": "Here's one last example. Again, on the x-axis\nhere, I have time.",
    "start": "2564090",
    "end": "2570430"
  },
  {
    "text": "On the y-axis here, I'm\nshowing the number of times that you observed some\ndiagnosis code of some kind.",
    "start": "2570430",
    "end": "2578780"
  },
  {
    "text": "This cyan line is ICD-9 codes. And this red line\nare ICD-10 codes.",
    "start": "2578780",
    "end": "2585090"
  },
  {
    "text": "You might remember that Pete\nmentioned in an earlier lecture that there was a big shift from\nICD-9 coding to ICD-10 coding",
    "start": "2585090",
    "end": "2591340"
  },
  {
    "text": "at some point. When was that time? It was precisely this time. And so if you think about the\nfeature vector that you would",
    "start": "2591340",
    "end": "2597670"
  },
  {
    "text": "derive for your machine\nlearning problem, you would have one feature\nfor all ICD-9 codes, and one--",
    "start": "2597670",
    "end": "2603740"
  },
  {
    "text": "a whole set of features\nfor all ICD-10 codes. And those ICD-9-based\nfeatures are going to be-- they're going\nto be used quite a bit",
    "start": "2603740",
    "end": "2610119"
  },
  {
    "text": "in this time period. And then suddenly they're\ngoing to be completely sparse in this time period. And ICD-10 features\nstart to become used.",
    "start": "2610120",
    "end": "2617740"
  },
  {
    "text": "And you could imagine that\nif you did machine learning using just ICD-9\ndata, and then you",
    "start": "2617740",
    "end": "2624340"
  },
  {
    "text": "tried to apply your model\nat this point in time, it's going to do horribly,\nbecause it's expecting features",
    "start": "2624340",
    "end": "2629590"
  },
  {
    "text": "that it no longer has access to. And this happens all the time. And in fact, what\nI'm describing here",
    "start": "2629590",
    "end": "2634900"
  },
  {
    "text": "is actually a major problem for\nthe whole health care industry. For the next five\nyears, everyone is going to grapple\nwith this problem,",
    "start": "2634900",
    "end": "2640990"
  },
  {
    "text": "because they want to use their\nhistorical data for machine learning, but their\nhistorical data is very different from\ntheir recent data.",
    "start": "2640990",
    "end": "2648270"
  },
  {
    "start": "2646000",
    "end": "2831000"
  },
  {
    "text": "So now, in the face of all of\nthis non-stationarity that I",
    "start": "2648270",
    "end": "2653390"
  },
  {
    "text": "just described, did we do\nanything wrong in the diabetes risk stratification problem\nthat I told you about earlier?",
    "start": "2653390",
    "end": "2662030"
  },
  {
    "text": "Thoughts.  That was my paper, by the way. Did I make an error?",
    "start": "2662030",
    "end": "2669000"
  },
  {
    "text": "Thoughts. ",
    "start": "2669000",
    "end": "2676990"
  },
  {
    "text": "Don't be afraid. I'm often wrong. ",
    "start": "2676990",
    "end": "2685960"
  },
  {
    "text": "I'm just asking\nspecifically about the way I evaluated the models. ",
    "start": "2685960",
    "end": "2691200"
  },
  {
    "text": "Yep. AUDIENCE: This wasn't\nan error, but one thing, like if I was a doctor\nI would like to see",
    "start": "2691200",
    "end": "2696920"
  },
  {
    "text": "is the sensitivity to-- like, the inclusion\ncriteria if I remove the HBA1C for instance.",
    "start": "2696920",
    "end": "2704710"
  },
  {
    "text": "Like most people, they have\ncompared to having either Rx or [INAUDIBLE] then\nkind of evaluating the--",
    "start": "2704710",
    "end": "2711970"
  },
  {
    "text": "PROFESSOR: So understanding\nthe robustness to changing the data a\nbit is something that would be of a lot of interest.",
    "start": "2711970",
    "end": "2717350"
  },
  {
    "text": "I agree. But that's not\nimmediately suggested by the non-stationarity results. Not something that's suggested\nby non-stationarity results.",
    "start": "2717350",
    "end": "2725330"
  },
  {
    "text": "Our TA in the front\nrow has an idea. Yeah, let's hear it. AUDIENCE: The train\nand test distributions were drawn from the\nsame-- or the train",
    "start": "2725330",
    "end": "2731250"
  },
  {
    "text": "and tests were drawn from\nthe same distribution. PROFESSOR: So in the way that\nwe did our evaluation there, we said, OK, we're going to set\nit up such that on January 1,",
    "start": "2731250",
    "end": "2742760"
  },
  {
    "text": "2009, we're predicting\nwhat's going to happen in the following three years. And we segmented our\npatient population",
    "start": "2742760",
    "end": "2750140"
  },
  {
    "text": "into train, validate, and\ntest, but at all times, using that same setup, January\n1 2009, as the prediction time.",
    "start": "2750140",
    "end": "2760040"
  },
  {
    "text": "Now, we learned this\nmodel, and it's now 2018. We want to apply\nthis model today.",
    "start": "2760040",
    "end": "2767000"
  },
  {
    "text": "And I computed an area\nunder the ROC curve. I computed positive\npredictive values using that retrospective data.",
    "start": "2767000",
    "end": "2773690"
  },
  {
    "text": "And I handed those\noff to my partners. And they might hope that those\nnumbers are reflective of what",
    "start": "2773690",
    "end": "2780529"
  },
  {
    "text": "their models would do today. But because of these issues\nI just told you about--",
    "start": "2780530",
    "end": "2786089"
  },
  {
    "text": "for example, that\nthe number of people who have type 2 diabetes,\nand even the definition of it has changed.",
    "start": "2786090",
    "end": "2791480"
  },
  {
    "text": "Because of the fact that\nthe laboratory-- ignore this part over here. That's just a fluke. But the fact, because\nof the laboratory",
    "start": "2791480",
    "end": "2796940"
  },
  {
    "text": "tests that were\navailable during training might be different from the\nones that are available now, and because of the fact that\nwe have only ICD-10 data now,",
    "start": "2796940",
    "end": "2805849"
  },
  {
    "text": "and not ICD-9, for\nall of those reasons, our predictive\nperformance is going to be really horrible\nnow, Particularly",
    "start": "2805850",
    "end": "2812869"
  },
  {
    "text": "because of this last issue\nof not having ICD-9s. Our predictive model is\ngoing to work horribly now if it was trained on\ndata from 2008 or 2009.",
    "start": "2812870",
    "end": "2822170"
  },
  {
    "text": "And so we would have\nnever ever even recognized that if we used the validation\nset up that we had done there.",
    "start": "2822170",
    "end": "2827840"
  },
  {
    "text": "So I wrote that paper when\nI was young and naive. [AUDIENCE CHUCKLING]",
    "start": "2827840",
    "end": "2833480"
  },
  {
    "start": "2831000",
    "end": "3221000"
  },
  {
    "text": "I'm a little bit\nmore gray-haired now. And so in our more recent\nwork-- for example,",
    "start": "2833480",
    "end": "2838640"
  },
  {
    "text": "this is a paper which\nwe're working on right now, done by a master's student\nof mine, Helen Zhou,",
    "start": "2838640",
    "end": "2844670"
  },
  {
    "text": "and is looking at predicting\nantibiotic resistance, now we're a little bit smarter\nabout over evaluation setup.",
    "start": "2844670",
    "end": "2849950"
  },
  {
    "text": "And we decided to set it up\na little bit differently. So what I'm showing\nyou now is the way that we chose,\ntrained, validated",
    "start": "2849950",
    "end": "2855650"
  },
  {
    "text": "and test for our population. So we segmented our data.",
    "start": "2855650",
    "end": "2861240"
  },
  {
    "text": "So the x-axis here is time,\nand the y-axis here are people.",
    "start": "2861240",
    "end": "2867230"
  },
  {
    "text": "So you can think of each person\nas being a different row. And you can imagine that we\nrandomly sorted the rows. ",
    "start": "2867230",
    "end": "2874490"
  },
  {
    "text": "What we did is we segmented our\ndata into these four quadrants. The first two quadrants, we\nused for train and validate.",
    "start": "2874490",
    "end": "2883980"
  },
  {
    "text": "Notice, by the way, that\nwe have different people",
    "start": "2883980",
    "end": "2889910"
  },
  {
    "text": "in the training set as we\ndo in the validate set. That's important for\nanother quantity which I'll talk about in a minute.",
    "start": "2889910",
    "end": "2896010"
  },
  {
    "text": "So we used this data\nfor train and validate. And that's, again,\nvery similar to the way we did it in the diabetes paper.",
    "start": "2896010",
    "end": "2902030"
  },
  {
    "text": "But now, for testing,\nwe use this future data. So we used data\nfrom 2014 to 2016.",
    "start": "2902030",
    "end": "2909286"
  },
  {
    "text": "And one can imagine two\ndifferent quadrants. You might be\ninterested in knowing, for the same patients for\nwhom you made predictions",
    "start": "2909287",
    "end": "2915260"
  },
  {
    "text": "on during training, how\nwould your predictions do for those same people at\ntest time in the future data.",
    "start": "2915260",
    "end": "2924743"
  },
  {
    "text": "And that's assuming that\nwhat we're predicting is something that's much\nmore myopic in nature. In this case it was\npredicting, are they",
    "start": "2924743",
    "end": "2930829"
  },
  {
    "text": "going to be resistant\nto some antibiotic? But you can also look at it\nfor a completely different set of patients, for\npatients who are not",
    "start": "2930830",
    "end": "2937190"
  },
  {
    "text": "used during training at all. And suppose that this 2\nbucket isn't used at all,",
    "start": "2937190",
    "end": "2942680"
  },
  {
    "text": "for those patients,\nhow do we do, again, using the future data for that. And the advantage\nof this setup is that it can really help you\nassess non-stationarity.",
    "start": "2942680",
    "end": "2950900"
  },
  {
    "text": "So if your model\nreally took advantage of features that were\navailable in 2007, 2008, 2009,",
    "start": "2950900",
    "end": "2957860"
  },
  {
    "text": "but weren't available\nin 2014, you would see a big drop\nin your performance. Looking at the\ndrop in performance from your validate set\nin this time period,",
    "start": "2957860",
    "end": "2964550"
  },
  {
    "text": "to your test set from\nthat time period, that drop in performance\nwill be uniquely attributed",
    "start": "2964550",
    "end": "2969650"
  },
  {
    "text": "to the non-stationarity. So it's a good way\nto diagnose it. Yep. AUDIENCE: Just\nsome clarification",
    "start": "2969650",
    "end": "2975065"
  },
  {
    "text": "on non-stationarity-- is it the\nfact that certain data is just lost altogether,\nor is it the fact that it's just\nencoded differently,",
    "start": "2975065",
    "end": "2981240"
  },
  {
    "text": "and so then it's difficult\nto get that mapping correct? PROFESSOR: Both. Both of these happen. So I have a big\nresearch program now",
    "start": "2981240",
    "end": "2987980"
  },
  {
    "text": "which is asking not just how-- so this is how you can\nevaluate and recognize there's a problem. But of course there's a really\ninteresting research question,",
    "start": "2987980",
    "end": "2995052"
  },
  {
    "text": "which is, how can you make\nuse of the non-stationarity. Right, so for example,\nyou had ICD-9/ICD-10 data.",
    "start": "2995052",
    "end": "3001869"
  },
  {
    "text": "You don't want to just\nthrow away the ICD-9 data. Is there a way to use it? So the naive answer, which is\nwhat the community is largely",
    "start": "3001870",
    "end": "3009510"
  },
  {
    "text": "using today, is come\nup with a mapping. Come up with a manual\nmapping from ICD-9 to ICD-10",
    "start": "3009510",
    "end": "3015700"
  },
  {
    "text": "so that you can sort of\nmanually transform your data into this new format\nsuch that the models you",
    "start": "3015700",
    "end": "3020820"
  },
  {
    "text": "learn from this older time\nis useful in the future time. That's the boring\nand simple answer.",
    "start": "3020820",
    "end": "3027520"
  },
  {
    "text": "But I think we could\ndo much better. For example, we can learn new\nrepresentations of the data. We can learn that\nmapping directly",
    "start": "3027520",
    "end": "3033780"
  },
  {
    "text": "in order to optimize\nfor your sort of most recent performance. And there's a whole bunch more\nthat we can talk about later.",
    "start": "3033780",
    "end": "3040582"
  },
  {
    "text": "Yep. AUDIENCE: [INAUDIBLE]\nnon-stationary change, this will [INAUDIBLE]\ndoes not ensure robustness",
    "start": "3040582",
    "end": "3049970"
  },
  {
    "text": "to the future. PROFESSOR: Correct. So this allows you to detect\nthat a non-stationarity has happened.",
    "start": "3049970",
    "end": "3055800"
  },
  {
    "text": "And it allows you to say\nthat your model is going to generalize to 2014-2016. But of course, that doesn't\nmean that your model's going",
    "start": "3055800",
    "end": "3062535"
  },
  {
    "text": "to generalize to 2016-2018. And so how do you do that? How do you have\nconfidence in that?",
    "start": "3062535",
    "end": "3068310"
  },
  {
    "text": "Well, that's a really\ninteresting research question. We don't have good\nanswers to that today. From a practical perspective,\nthe best I can offer you today",
    "start": "3068310",
    "end": "3079020"
  },
  {
    "text": "is, build in these checks\nand balances all the time. So continuously sort\nof evaluate how you're",
    "start": "3079020",
    "end": "3085380"
  },
  {
    "text": "doing on the most recent data. And if you see big\nchanges, throw a red flag. Build more checks and balances\ninto your deployment process.",
    "start": "3085380",
    "end": "3093510"
  },
  {
    "text": "If you see a bunch of\npatients who are getting predicted probabilities\nof 1, and in the past,",
    "start": "3093510",
    "end": "3098610"
  },
  {
    "text": "you'd never predicted\nprobability 1, that might tell you something. Then much later in the semester,\nwe'll talk about robust machine",
    "start": "3098610",
    "end": "3104670"
  },
  {
    "text": "learning approaches,\nfor example, approaches that have\nbeen designed to be robust against adversaries. And those type of\napproaches as well",
    "start": "3104670",
    "end": "3110930"
  },
  {
    "text": "will allow you to be much more\nrobust to particular types of data set shift, of\nwhich non-stationarity is one example.",
    "start": "3110930",
    "end": "3116400"
  },
  {
    "text": "But it's a big,\nopen research field. Yep. AUDIENCE: So just to make sure I\nhave the understanding correct,",
    "start": "3116400",
    "end": "3121609"
  },
  {
    "text": "theoretically, if you\ncould map everything from the old data set to the new\ndata set, like the encodings,",
    "start": "3121610",
    "end": "3127500"
  },
  {
    "text": "would it still be\nOK, like the results you get on the future data set? PROFESSOR: If you could\ndo a perfect mapping,",
    "start": "3127500",
    "end": "3134040"
  },
  {
    "text": "and it's one to one, and the\ndistributions of those things also didn't change, then yeah. Really what you need to assess\nis, is there data set shift?",
    "start": "3134040",
    "end": "3141660"
  },
  {
    "text": "Is your training\ndistribution, after mapping, the same as your\ntesting distribution? If the answer is\nyes, you're all good.",
    "start": "3141660",
    "end": "3147730"
  },
  {
    "text": "If you're not,\nyou're in trouble. Yep. AUDIENCE: What seems to be the\ntest set of traits set here? Or what [INAUDIBLE]?",
    "start": "3147730",
    "end": "3155010"
  },
  {
    "text": "PROFESSOR: So 1 is using\ndata only from 2007-2013, 3 is using data\nonly from 2014-2016.",
    "start": "3155010",
    "end": "3160950"
  },
  {
    "text": "AUDIENCE: But in the case,\nlike, the output we care about happened in, like,\n2007-2013, then",
    "start": "3160950",
    "end": "3167016"
  },
  {
    "text": "that observation would be\nnot-- it wouldn't be useful. PROFESSOR: Yeah, so for\nthe diabetes problem, there's also just\ninclusion/exclusion criteria",
    "start": "3167016",
    "end": "3174090"
  },
  {
    "text": "that you have to deal with. For what I'm showing you here,\nI'm talking about a setting where you might be making\nmultiple predictions",
    "start": "3174090",
    "end": "3180840"
  },
  {
    "text": "for patients across time. So it's a much more\nmyopic prediction task. But one could come\nup with an analogy",
    "start": "3180840",
    "end": "3185880"
  },
  {
    "text": "to this for the\ndiabetes setting. Like, for example, just hold out\nhalf of the patients at random.",
    "start": "3185880",
    "end": "3195000"
  },
  {
    "text": "And then for your training\nset, use data up to 2009,",
    "start": "3195000",
    "end": "3201290"
  },
  {
    "text": "and evaluate on data\nonly up to 2013. And for your test set, pretend\nas if it was January 1, 2013,",
    "start": "3201290",
    "end": "3210610"
  },
  {
    "text": "and look at\nperformance up to 2017. And so that would be--",
    "start": "3210610",
    "end": "3216599"
  },
  {
    "text": "you're changing your prediction\ntime to use more recent data. ",
    "start": "3216600",
    "end": "3223330"
  },
  {
    "start": "3221000",
    "end": "3311000"
  },
  {
    "text": "So the next subtlety is-- it's a name that I put on to it.",
    "start": "3223330",
    "end": "3229060"
  },
  {
    "text": "This isn't a standard name. This is what I'm calling\nintervention-tainted outcomes. ",
    "start": "3229060",
    "end": "3236130"
  },
  {
    "text": "And so the example here came\nfrom your reading for today.",
    "start": "3236130",
    "end": "3241210"
  },
  {
    "text": "The reading was this paper\non intelligible models for health care predicting\npneumonia risk in hospital 30-day admissions from KDD 2015.",
    "start": "3241210",
    "end": "3248350"
  },
  {
    "text": "So in that paper,\nthey give an example-- it's a very old example-- of trying to use\na predictive model",
    "start": "3248350",
    "end": "3253840"
  },
  {
    "text": "to understand a patient's\nrisk of mortality when they come\ninto the hospital.",
    "start": "3253840",
    "end": "3261099"
  },
  {
    "text": "And what they learned-- and\nthey used a rule-based learning algorithm-- and\nwhat they discovered was a rule that said if\nthe patient has asthma,",
    "start": "3261100",
    "end": "3269740"
  },
  {
    "text": "then they have\nlow risk of dying. So these are all patients\nwho have pneumonia.",
    "start": "3269740",
    "end": "3275320"
  },
  {
    "text": "So a patient who comes in\nwith pneumonia and asthma has a lower risk of\ndying than a patient who comes in with pneumonia and does\nnot have a history of asthma.",
    "start": "3275320",
    "end": "3285400"
  },
  {
    "text": "OK, that's what this rule says. And this paper argued\nthat there's something",
    "start": "3285400",
    "end": "3291550"
  },
  {
    "text": "wrong with that learned model. Any of you remember\nwhat that was? Someone who hasn't\ntalked today, please.",
    "start": "3291550",
    "end": "3298390"
  },
  {
    "text": "Yeah, in the back. AUDIENCE: It was that\nthose with asthma had more aggressive treatment. So that means that they had\na higher chance of survival.",
    "start": "3298390",
    "end": "3304930"
  },
  {
    "text": "PROFESSOR: Patients with asthma\nhad more aggressive treatment. In particular, they\nmight have been admitted to the\nintensive care unit",
    "start": "3304930",
    "end": "3310600"
  },
  {
    "text": "for more careful vigilance. And as a result, they\nhad better outcomes. Yes, that's exactly right.",
    "start": "3310600",
    "end": "3317080"
  },
  {
    "start": "3311000",
    "end": "3599000"
  },
  {
    "text": "So the real story behind this\nis that risk stratification, as we talked about\nthe last couple weeks,",
    "start": "3317080",
    "end": "3323140"
  },
  {
    "text": "it's used to drive\ninterventions. And those interventions, if\nthey happened in the past data,",
    "start": "3323140",
    "end": "3328359"
  },
  {
    "text": "would change the outcomes. So in this case,\nyou might imagine",
    "start": "3328360",
    "end": "3333550"
  },
  {
    "text": "using the learned\npredictive model to say, a new patient comes in,\nthis new patient has asthma, and so we're going to\nsay they're low risk.",
    "start": "3333550",
    "end": "3340010"
  },
  {
    "text": "And if we took a naive action\nbased on that prediction, we might say, OK,\nlet's send them home. They're at low risk of dying.",
    "start": "3340010",
    "end": "3346742"
  },
  {
    "text": "But if we did that, we\ncould be killing people. Because the reason\nwhy they were low risk is because they had those\ninterventions in the past.",
    "start": "3346742",
    "end": "3353950"
  },
  {
    "text": " So here's what's going\non in that picture.",
    "start": "3353950",
    "end": "3359799"
  },
  {
    "text": "You have your\ndata, X. And you're trying to make a prediction at\nsome point in time, let's say, emergency department triage.",
    "start": "3359800",
    "end": "3366070"
  },
  {
    "text": "You want to predict\nsome outcome Y, let's say, whether the patient\ndies at some defined point in the future.",
    "start": "3366070",
    "end": "3372710"
  },
  {
    "text": "Now, the challenge is that, as\nstated in the machine learning tasks that you saw there,\nall you had access to",
    "start": "3372710",
    "end": "3379940"
  },
  {
    "text": "was X and Y, the covariance of\nthe features and the outcome.",
    "start": "3379940",
    "end": "3385420"
  },
  {
    "text": "And so you're\npredicting Y from X, but you're marginalizing\nover everything",
    "start": "3385420",
    "end": "3390670"
  },
  {
    "text": "that happens in between, in\nthis case, the treatment. So the good outcomes,\npeople surviving,",
    "start": "3390670",
    "end": "3396777"
  },
  {
    "text": "might have been due to\nwhat's going on in between. But what's going on\nin between is not even observed in the\ndata necessarily.",
    "start": "3396777",
    "end": "3403780"
  },
  {
    "text": "So how do we address\nthis problem? Well, the first thing I\nwant you to think about is, can we even recognize\nthat this is a problem?",
    "start": "3403780",
    "end": "3411030"
  },
  {
    "text": "And that's where\nthat article really suggests that using an\nunintelligible model, a model that you can introspect and\ntry to understand a little bit,",
    "start": "3411030",
    "end": "3418509"
  },
  {
    "text": "is actually really important\nfor even recognizing that weird things are happening.",
    "start": "3418510",
    "end": "3424400"
  },
  {
    "text": "And this is a\ntopic which we will talk about in a lecture towards\nthe end of the semester in much more-- Jack will talk about\nalgorithms for interpreting",
    "start": "3424400",
    "end": "3431200"
  },
  {
    "text": "machine learning models. So that's important. You've got to recognize\nwhat's going on. But what do you do about it?",
    "start": "3431200",
    "end": "3437780"
  },
  {
    "text": "So here are some hacks. Hack number 1--\nmodify the model.",
    "start": "3437780",
    "end": "3443390"
  },
  {
    "text": "This is the solution that is\nproposed in the paper you read. They said, OK, if it's a\nsimple rule-based prediction",
    "start": "3443390",
    "end": "3449740"
  },
  {
    "text": "that the learning\nalgorithm outputs to you, you could see the rule\nthat doesn't make sense,",
    "start": "3449740",
    "end": "3455180"
  },
  {
    "text": "you could use your\nclinical insight to recognize it\ndoesn't make sense. You might even be able to\nexplain why it happened. And then you just\nremove that rule.",
    "start": "3455180",
    "end": "3461780"
  },
  {
    "text": "So you manually modify the model\nto push it towards something",
    "start": "3461780",
    "end": "3467570"
  },
  {
    "text": "that's more sensible. All right, so that's\nwhat was suggested. And I think it's nonsense. I don't think that's ever\ngoing to work in today's world.",
    "start": "3467570",
    "end": "3476060"
  },
  {
    "text": "In today's world of\nhigh-dimensional models, there's always going to be\nsurrogates which are somehow",
    "start": "3476060",
    "end": "3481915"
  },
  {
    "text": "picked up by a\nlearning algorithm that you will not\neven recognize. And it will be really hard\nto modify it in the way",
    "start": "3481915",
    "end": "3487910"
  },
  {
    "text": "that you want. Maybe it's impossible using the\nsimple approach, by the way. Another interesting\nresearch question--",
    "start": "3487910",
    "end": "3492920"
  },
  {
    "text": "how do you actually\nmake this work in a high-dimensional setting? But for now, let's say we\ndon't know how to do it",
    "start": "3492920",
    "end": "3498260"
  },
  {
    "text": "in a high-dimensional setting. So what are your other choices? Hack number 2 is to redefine\nthe outcome altogether,",
    "start": "3498260",
    "end": "3504080"
  },
  {
    "text": "to change what\nyou're predicting. So for example, if you\ngo back to this picture,",
    "start": "3504080",
    "end": "3509569"
  },
  {
    "text": "and instead of\ntrying to predict Y, death, if you could try to find\nsome surrogate for the thing you care about, which\nis pre-treatment,",
    "start": "3509570",
    "end": "3517410"
  },
  {
    "text": "and you predict\nthat thing instead, then you'll be back in business.",
    "start": "3517410",
    "end": "3523069"
  },
  {
    "text": "And so, for example, in one\nof the optional readings for-- or actually I think in the\nsecond required reading",
    "start": "3523070",
    "end": "3529310"
  },
  {
    "text": "for today's class,\nit was a paper about risk revocation\nfor sepsis, which is often caused by infection.",
    "start": "3529310",
    "end": "3536850"
  },
  {
    "text": "And what they show\nin that article is that there are laboratory\ntest results, such as lactate, and there are others,\nwhich can give you",
    "start": "3536850",
    "end": "3543980"
  },
  {
    "text": "a hint that this patient\nmight be on a path to clinical deterioration. And that test might precede\nthe interventions to try",
    "start": "3543980",
    "end": "3552589"
  },
  {
    "text": "to take care of that condition. And so if you instead\nchange your outcome",
    "start": "3552590",
    "end": "3557720"
  },
  {
    "text": "to be predicting that\nsurrogate, then you're getting around this problem\nthat I just pointed out.",
    "start": "3557720",
    "end": "3566470"
  },
  {
    "text": "Now, a third hack is from\none of the optional readings from today's lecture,\nthis paper by Suchi",
    "start": "3566470",
    "end": "3573170"
  },
  {
    "text": "Saria and her students, from\nScience Translational Medicine 2015. It's a really\nwell-written paper. I highly recommend reading it.",
    "start": "3573170",
    "end": "3578960"
  },
  {
    "text": "In that paper, they suggest\nformalizing the problem as one of censoring,\nwhich is what",
    "start": "3578960",
    "end": "3583990"
  },
  {
    "text": "we'll be talking about for\nthe very last third of today's lecture. In particular, what\nthey say is suppose",
    "start": "3583990",
    "end": "3590830"
  },
  {
    "text": "you see that a patient is\ntreated for the condition. Let's say they're\ntreated for sepsis.",
    "start": "3590830",
    "end": "3596619"
  },
  {
    "text": "Then if the patient is\ntreated for that condition, then we don't know what would\nhave happened to them had they not been treated.",
    "start": "3596620",
    "end": "3602569"
  },
  {
    "text": "So we don't observe the outcome,\ndeath given no treatment.",
    "start": "3602570",
    "end": "3607990"
  },
  {
    "text": "And so we're going to treat\nit as an unknown outcome. And for patients who were\nnot treated, but ended up",
    "start": "3607990",
    "end": "3614500"
  },
  {
    "text": "dying due to sepsis, then\nthey're not censored. And what I'll show you in\nthe later part of the class",
    "start": "3614500",
    "end": "3619670"
  },
  {
    "text": "is how to learn\nfrom censored data. So this is another\nformalization which tries to address this\nproblem that we pointed out.",
    "start": "3619670",
    "end": "3627170"
  },
  {
    "text": "Now, I call these hacks\nbecause, really, I think what we should be\ndoing is formalizing it using",
    "start": "3627170",
    "end": "3632320"
  },
  {
    "text": "the language of causality. Once you do this\nintrospection and you realize that there is\ntreatment, in fact,",
    "start": "3632320",
    "end": "3639290"
  },
  {
    "text": "you should be rethinking\nabout the problem as one of now having three\nquantities of interest. There's the patient, everything\nyou know about them at triage.",
    "start": "3639290",
    "end": "3646360"
  },
  {
    "text": "That's the X-variable\nI showed you before. There's the outcome,\nlet's say, Y. And then there's\nthat everything that",
    "start": "3646360",
    "end": "3652023"
  },
  {
    "text": "happened in between, in\nparticular the interventions that happened in between. We'll call that\nT, for treatment.",
    "start": "3652023",
    "end": "3658120"
  },
  {
    "text": "And the question\nthat one would like to ask in order to figure\nout how to optimally care",
    "start": "3658120",
    "end": "3664030"
  },
  {
    "text": "for the patient is one of,\nwill admission to the ICU, which is the intervention\nthat we're considering here,",
    "start": "3664030",
    "end": "3670690"
  },
  {
    "text": "will that lower the likelihood\nof death for the patient? And now when I say lower,\nI don't mean correlation,",
    "start": "3670690",
    "end": "3678610"
  },
  {
    "text": "I mean causation. Will it actually lower the\npatient's risk of dying?",
    "start": "3678610",
    "end": "3683619"
  },
  {
    "text": "I think we need to hit\nthese questions on the head with actually thinking\nabout causality to try",
    "start": "3683620",
    "end": "3688990"
  },
  {
    "text": "to formalize this properly. And if you do that,\nthis will be a solution which will generalize to the\nhigh-dimensional settings",
    "start": "3688990",
    "end": "3695110"
  },
  {
    "text": "that we care about\nin machine learning. And this will be a topic that\nwe'll talk really in-depth",
    "start": "3695110",
    "end": "3700869"
  },
  {
    "text": "after spring break. But I wanted to give you this\nas one motivation for why it's so important-- there\nare many other reasons--",
    "start": "3700870",
    "end": "3706530"
  },
  {
    "text": "to really think about it\nfrom a causal perspective. OK, so subtlety number 3--",
    "start": "3706530",
    "end": "3715570"
  },
  {
    "text": "there's been a ton of hype in\nthe media about deep learning and health care. A lot of it is very\nwell warranted.",
    "start": "3715570",
    "end": "3721570"
  },
  {
    "text": "For example, the\nadvances we're seeing in areas ranging from\nradiology and pathology",
    "start": "3721570",
    "end": "3727390"
  },
  {
    "text": "to interpretation of\nEKGs are all really",
    "start": "3727390",
    "end": "3732970"
  },
  {
    "text": "being transformed by\ndeep learning algorithms. But the problems\nI've been telling you about for the last\ncouple of weeks,",
    "start": "3732970",
    "end": "3740110"
  },
  {
    "text": "of doing risk stratification on\nelectronic health record data, such as taxed notes,\nsuch as lab test",
    "start": "3740110",
    "end": "3746920"
  },
  {
    "text": "results and vital signs,\ndiagnosis codes, that's",
    "start": "3746920",
    "end": "3752230"
  },
  {
    "text": "a different story. And in fact, if you look\nclosely at all of the papers, all the papers that\nhave been published",
    "start": "3752230",
    "end": "3757360"
  },
  {
    "text": "in the last few years\nthat have been trying to apply the gauntlet of\ndeep learning algorithms at those problems, in fact,\nthe gains are very small.",
    "start": "3757360",
    "end": "3766923"
  },
  {
    "text": "And so what I'm showing you\nhere is just one example of such a paper. This is a paper that received\na lot of media attention.",
    "start": "3766923",
    "end": "3772510"
  },
  {
    "text": "It's a Google paper\ncalled \"Scalable and Accurate Deep Learning with\nElectronic Health Records.\" And if you go across\nthe United States,",
    "start": "3772510",
    "end": "3779230"
  },
  {
    "text": "if you go\ninternationally, you talk to chief medical\ninformation officers, they're all going to be\ntelling you about this paper. They've all read it,\nthey've all heard about it,",
    "start": "3779230",
    "end": "3786120"
  },
  {
    "text": "and they all want to use it. But what is this actually doing? What's going on\nbehind the scenes? Well, this paper\nuses the same sorts",
    "start": "3786120",
    "end": "3794230"
  },
  {
    "text": "of data we've been\ntalking about. It takes vitals, notes,\norders, medications,",
    "start": "3794230",
    "end": "3799530"
  },
  {
    "text": "thinks about it as a\ntimeline, summarizes it, then uses a recurrent neural network. It also uses attentional\narchitectures.",
    "start": "3799530",
    "end": "3805870"
  },
  {
    "text": "And there's some pretty\nsmart people on this paper-- you know, Greg\nCorrado, Jeff Dean, are all co-authors\nof this paper.",
    "start": "3805870",
    "end": "3813137"
  },
  {
    "text": "They know what they're doing. All right, so they use\nthese algorithms to predict a number of downstream\nproblems-- readmission risk,",
    "start": "3813137",
    "end": "3819808"
  },
  {
    "text": "for example, 30-day\nreadmission, like you read about in your\nreadings for this week. And they see they get\npretty good predictions.",
    "start": "3819808",
    "end": "3829150"
  },
  {
    "text": "But if you go to the\nsupplementary material, which is a bit hard to find, but\nhere's the link for all of you,",
    "start": "3829150",
    "end": "3835930"
  },
  {
    "text": "and I'll post it to my slides. And if you look at\nthe very last figure in that supplementary\nmaterial, you'll",
    "start": "3835930",
    "end": "3842740"
  },
  {
    "text": "see something interesting. So here are those\nthree different tasks that they studied--\ninpatient mortality",
    "start": "3842740",
    "end": "3848115"
  },
  {
    "text": "prediction, 30-day readmission,\nlength-of-stay prediction. The first line each\nof these buckets",
    "start": "3848115",
    "end": "3853240"
  },
  {
    "text": "is what your deep\nlearning algorithm does. Over here, they have\ntwo different hospitals. I think it might\nhave been University",
    "start": "3853240",
    "end": "3859772"
  },
  {
    "text": "of Chicago and Stanford. And they're showing the area\nunder the ROC curve, which",
    "start": "3859772",
    "end": "3864855"
  },
  {
    "text": "we've talked about,\nperformance for each of these tasks for\ntheir best models.",
    "start": "3864855",
    "end": "3869997"
  },
  {
    "text": "And in the parentheses, they\ngive confidence intervals-- let's say something like 95%\nconfidence intervals-- for area under the ROC curve.",
    "start": "3869997",
    "end": "3876640"
  },
  {
    "text": "Now, the second\nline that you see is called full-feature\nenhanced baseline.",
    "start": "3876640",
    "end": "3882900"
  },
  {
    "text": "It's using the\nsame data, but it's using something very close\nto the feature represetnation",
    "start": "3882900",
    "end": "3888190"
  },
  {
    "text": "that you saw in the\npaper by Narges Razavian, so that paper on\ndiabetes prediction that I told you about and\nwe've been criticizing.",
    "start": "3888190",
    "end": "3894430"
  },
  {
    "text": "So it's using that\nL1-regularized logistic regression with a\nsmart set of features.",
    "start": "3894430",
    "end": "3900400"
  },
  {
    "text": "And what you see across\nall three settings is that the results are not\nphysically significantly",
    "start": "3900400",
    "end": "3907089"
  },
  {
    "text": "different. So let's look at the first\none, hospital A, deep learning,",
    "start": "3907090",
    "end": "3912700"
  },
  {
    "text": "0.95 AUC. This L1-regularized\nlogistic regression, 0.93.",
    "start": "3912700",
    "end": "3918400"
  },
  {
    "text": "30-day readmission,\n0.77, 0.75, 0.86, 0.85. And the confidence intervals\nare all overlapping.",
    "start": "3918400",
    "end": "3926730"
  },
  {
    "text": "So what's going on? So I think what you're\nseeing here, first of all,",
    "start": "3926730",
    "end": "3933030"
  },
  {
    "text": "is a recognition by the machine\nlearning community that-- in this case, a late recognition\nthat simpler approaches",
    "start": "3933030",
    "end": "3940109"
  },
  {
    "text": "tend to work well with\nthis type of data. I don't think this was the\nfirst thing that they tried. They tried probably the deep\nlearning algorithms first.",
    "start": "3940110",
    "end": "3946032"
  },
  {
    "text": " Second, we're all\ngrasping at this,",
    "start": "3946032",
    "end": "3951150"
  },
  {
    "text": "and we all want to come up\nwith these better algorithms, but so far we're\nnot doing that well.",
    "start": "3951150",
    "end": "3957329"
  },
  {
    "text": "And I'll tell you more\nabout that in just a second. But before I finish\nwith the slide, I want to give you a punch line\nI think is really important.",
    "start": "3957330",
    "end": "3964247"
  },
  {
    "text": "You might come home\nfrom this and say, you know what, it's\nnot that much better, but it's a little bit better-- 0.95 to 0.93.",
    "start": "3964247",
    "end": "3969900"
  },
  {
    "text": "Suppose it was tight\nconfidence intervals, there might be a few\npatients whose lives you could save with that.",
    "start": "3969900",
    "end": "3975200"
  },
  {
    "text": "But because all the issues I've\ntold you about up until now, of non-stationary, for\nexample, those gains disappear.",
    "start": "3975200",
    "end": "3982440"
  },
  {
    "text": "In many cases, they even\nreverse when you actually go to deploy these models\nbecause of that data set shift",
    "start": "3982440",
    "end": "3988850"
  },
  {
    "text": "for non-stationarity. It so happens that\nthe simpler models tend to generalize better\nwhen your data changes on you.",
    "start": "3988850",
    "end": "3995589"
  },
  {
    "text": "And this is nicely\nexplored in this paper from Kenneth Jung and Nigam\nShah in Journal of Biomedical",
    "start": "3995590",
    "end": "4001730"
  },
  {
    "text": "Informatics, 2015. So this is something that\nI want you to think about. Now let's try to answer why.",
    "start": "4001730",
    "end": "4008540"
  },
  {
    "text": "Well, the areas where\nwe've been seeing recurrent neural networks\ndoing really well-- in, for example,\nspeech recognition,",
    "start": "4008540",
    "end": "4014960"
  },
  {
    "text": "natural language processing,\nare areas where, often-- for example, you're\npredicting what",
    "start": "4014960",
    "end": "4021200"
  },
  {
    "text": "is the next word in\na sequence of words, the previous few words\nare pretty predictive. Like, what is the next\n[PAUSES] that I'm going to say?",
    "start": "4021200",
    "end": "4028250"
  },
  {
    "text": "What is it? AUDIENCE: Word. PROFESSOR: Word,\nright, and you knew that, right, because it was\npretty obvious to predict that.",
    "start": "4028250",
    "end": "4035224"
  },
  {
    "text": "And so the models that\nare good at predicting for that type of\ndata, it doesn't mean that they should\nbe good for predicting for a different type\nof sequential data.",
    "start": "4035225",
    "end": "4040940"
  },
  {
    "text": "Sequential data\nwhich, by the way, lives in many\ndifferent time scales. Patients who are hospitalized,\nyou get tons of data for them",
    "start": "4040940",
    "end": "4046580"
  },
  {
    "text": "at a time, and then\nyou might go months without any data on them. Data with lots of missing data. Data with multivariate\nobservations",
    "start": "4046580",
    "end": "4053200"
  },
  {
    "text": "at each point in time,\nnot just a single word at that point in time. All right, so it's\na different setting. And we shouldn't expect that\nthe same architectures that",
    "start": "4053200",
    "end": "4060567"
  },
  {
    "text": "have been developed\nfor other problems will generalize immediately\nto these problems. Now, I do conjecture\nthat there are",
    "start": "4060567",
    "end": "4066710"
  },
  {
    "text": "lots of nonlinear\nattractions where deep neural networks\ncould be very",
    "start": "4066710",
    "end": "4071960"
  },
  {
    "text": "powerful at predicting for. But I think they're subtle. And I don't think that we\nhave enough data currently",
    "start": "4071960",
    "end": "4078380"
  },
  {
    "text": "to deal with the fact\nthat the data is messy and that the non-linear\ninteractions are subtle.",
    "start": "4078380",
    "end": "4085940"
  },
  {
    "text": "We just can't find\nthem right now. But this shouldn't mean that\nwe're not going to find them a few years from now. I think this deservedly is\na very interesting research",
    "start": "4085940",
    "end": "4093589"
  },
  {
    "text": "direction to work on. And a final reason\nto point out is that the features that are\ngoing into these types of models",
    "start": "4093590",
    "end": "4099290"
  },
  {
    "text": "are actually really\ncleverly-chosen features. A laboratory test result,\nlike looking at your A1C--",
    "start": "4099290",
    "end": "4106609"
  },
  {
    "text": "what is A1C? So it's something that\nhad been developed over decades and decades of\nresearch, where you recognize",
    "start": "4106609",
    "end": "4114049"
  },
  {
    "text": "that looking at a\nparticular protein is actually informative as\nsomething about a patient's health. So the features that we're\nusing that go into these models",
    "start": "4114050",
    "end": "4121189"
  },
  {
    "text": "were designed-- first, they were designed\nfor humans to look at. And second, they were\ndesigned to really help you",
    "start": "4121189",
    "end": "4126740"
  },
  {
    "text": "with decision-making, or\nlargely independent features from other information that\nyou have about a patient. And all of those\nare reasons, really,",
    "start": "4126740",
    "end": "4133082"
  },
  {
    "text": "I think why we're\nobserving these subtleties. OK, so for the last\n10 minutes of class--",
    "start": "4133082",
    "end": "4138350"
  },
  {
    "text": "I'm going to have\nto hold questions, because I want to get\nthrough all the material. But please post them to Piazza. For the last 10\nminutes of class,",
    "start": "4138350",
    "end": "4144750"
  },
  {
    "text": "I want to change\ngears a little bit, and talk about\nsurvival modeling.",
    "start": "4144750",
    "end": "4150350"
  },
  {
    "text": "So often we want want to\ntalk about predicting time to some event.",
    "start": "4150350",
    "end": "4156600"
  },
  {
    "text": "So this red dot here-- sorry, this black line here\nis what I mean by an event.",
    "start": "4156600",
    "end": "4163739"
  },
  {
    "text": "That event might be, for\nexample, a patient dying. It might mean a married\ncouple getting divorced.",
    "start": "4163740",
    "end": "4169969"
  },
  {
    "text": "It might mean the day that\nwhat you graduate from MIT.",
    "start": "4169970",
    "end": "4175649"
  },
  {
    "text": "And the red dot here\ndenotes censored events. So for whatever\nreason, we don't have",
    "start": "4175649",
    "end": "4182960"
  },
  {
    "text": "data on this patient, patient\nS3, after time step 4. They were censored. So we do know that\nthe event didn't",
    "start": "4182960",
    "end": "4191270"
  },
  {
    "text": "occur prior to time step 4. But we don't know\nif and when it's going to occur\nafter time step 4,",
    "start": "4191270",
    "end": "4197510"
  },
  {
    "text": "because we have\nmissing data there. OK, so this is what I mean\nby right-censored data.",
    "start": "4197510",
    "end": "4204170"
  },
  {
    "text": "So you might ask, why not\njust use classification-- like binary classification--\nin this setting?",
    "start": "4204170",
    "end": "4210605"
  },
  {
    "text": "And that's exactly\nwhat we did earlier. We thought about formalizing\nthe diabetes risk stratification",
    "start": "4210605",
    "end": "4216470"
  },
  {
    "text": "problem as looking to see\nwhat happens years 1 to 3 after the time of prediction.",
    "start": "4216470",
    "end": "4222690"
  },
  {
    "text": "That was with a gap of one year. And there a couple\nof reasons why that's perhaps not what\nyou really wanted to do.",
    "start": "4222690",
    "end": "4230720"
  },
  {
    "text": "First, you have less data\nto use during training. Because you've suddenly\nexcluded patients for whom--",
    "start": "4230720",
    "end": "4240920"
  },
  {
    "text": "or to differently--\nif you have patients",
    "start": "4240920",
    "end": "4248300"
  },
  {
    "text": "for whom they were censored\nduring that time window, you're throwing them out. So you have fewer\ndata points there.",
    "start": "4248300",
    "end": "4254349"
  },
  {
    "text": "That was part of our\ninclusion/exclusion criteria. Also, when you go to\ndeploy these models,",
    "start": "4254350",
    "end": "4261740"
  },
  {
    "text": "your model might say,\nyes, this patient is going to develop type 2\ndiabetes between one and three years from now.",
    "start": "4261740",
    "end": "4267990"
  },
  {
    "text": "But in fact what happened is\nthey develop type 2 diabetes 3.1 years from now.",
    "start": "4267990",
    "end": "4273240"
  },
  {
    "text": "So your model would\ncount this as a negative. Or it would be a false positive.",
    "start": "4273240",
    "end": "4279390"
  },
  {
    "text": "The prediction would\nbe a false positive. But in reality, your model\nwasn't actually that bad. We did pretty well.",
    "start": "4279390",
    "end": "4284449"
  },
  {
    "text": "We didn't quite get\nthe right range, but they did get\ndiagnosed diabetes right outside that time window.",
    "start": "4284450",
    "end": "4290170"
  },
  {
    "text": "And so your measures\nof performance are going to be pessimistic. You might be doing\nbetter than you thought.",
    "start": "4290170",
    "end": "4296618"
  },
  {
    "text": "Now, you can try to\naddress these two challenges in many ways. You can imagine a multi-task\nlearning framework where you try to predict\nwhat's going to happen one",
    "start": "4296618",
    "end": "4303357"
  },
  {
    "text": "to two years from\nnow, what's going to happen two to three years\nfrom now, three to four, and so on. Each of those are different\nbinary classification models.",
    "start": "4303357",
    "end": "4309680"
  },
  {
    "text": "You might try to tie\ntogether the parameters of those models via a\nmulti-task learning formulation.",
    "start": "4309680",
    "end": "4314860"
  },
  {
    "text": "And that will get you closer\nto what you care about. But what I'll tell you about\nin the last five minutes is a much more elegant approach\nto trying to deal with that.",
    "start": "4314860",
    "end": "4322910"
  },
  {
    "text": "And it's akin to regression. So that leads to\nmy second point-- why not just treat this\nas a regression problem?",
    "start": "4322910",
    "end": "4328970"
  },
  {
    "text": "Predict time to event. You have some continuous\nvalued outcome, the time until\ndiagnosis diabetes.",
    "start": "4328970",
    "end": "4335960"
  },
  {
    "text": "Just try to minimize\nmean squared-- minimize your\nsquared error trying to predict that\ncontinuous value.",
    "start": "4335960",
    "end": "4343610"
  },
  {
    "text": "Well, the first\nchallenge to think about is, remember where that\nmean squared error loss function came from.",
    "start": "4343610",
    "end": "4348962"
  },
  {
    "text": "It came from thinking\nabout your data as coming from a\nGaussian distribution.",
    "start": "4348962",
    "end": "4355929"
  },
  {
    "text": "And if you do maximum likelihood\nestimation of this Gaussian distribution, it\nturns out to look like minimizing a squared loss.",
    "start": "4355930",
    "end": "4364099"
  },
  {
    "text": "So it's making a lot of\nassumptions about the outcome. For one, it's making\nthe assumption that outcome could be\nnegative or positive.",
    "start": "4364100",
    "end": "4369282"
  },
  {
    "text": "A Gaussian distribution\ndoesn't have to be positive. But here we know that T\nis always non-negative.",
    "start": "4369282",
    "end": "4374540"
  },
  {
    "text": "In addition, there\nmight be long tails. We might not know exactly\nwhen the patient's going to develop\ndiabetes, but we know it's not going to be now.",
    "start": "4374540",
    "end": "4380440"
  },
  {
    "text": "It's going to be at some\npoint in the far future. And that may also look\nvery non-Gaussian. So typical regression approaches\naren't quite what you want.",
    "start": "4380440",
    "end": "4387290"
  },
  {
    "text": "But there's another\nreally important problem, which is that if you naively\nremove those censored points-- like, what do you do for the\nindividuals where you never",
    "start": "4387290",
    "end": "4394553"
  },
  {
    "text": "observe the time-- where the never get diabetes,\nbecause they were censored? Well, if you just remove those\nfrom your learning algorithm,",
    "start": "4394553",
    "end": "4400880"
  },
  {
    "text": "then you're biasing\nyour results. So for example, if you\nthink about the average age",
    "start": "4400880",
    "end": "4407390"
  },
  {
    "text": "of diabetes onset, if you only\nlook at people who actually were observed to\nget diabetes, it's going to be much closer to now.",
    "start": "4407390",
    "end": "4414293"
  },
  {
    "text": "Because obviously the\npeople who were censored are people who got it much\nlater from the censoring time.",
    "start": "4414293",
    "end": "4419920"
  },
  {
    "text": "So that's another\nserious problem. So the way they we're\ntrying to formalize this mathematically is as follows.",
    "start": "4419920",
    "end": "4425340"
  },
  {
    "text": "Now we should think about\nhaving data which has, again, features x, outcome--",
    "start": "4425340",
    "end": "4431270"
  },
  {
    "text": "what we usually call Y for\nthe outcome in regression, but here I'll call\nit capital T, because of the time to the event.",
    "start": "4431270",
    "end": "4436850"
  },
  {
    "text": "And now we have an\nadditional variable-- so it's no longer a\ntwo-point, now it's a triple--",
    "start": "4436850",
    "end": "4442220"
  },
  {
    "text": "b. And b is going to be a binary\nvariable, which is saying, was this individual\ncensored-- was the time, t,",
    "start": "4442220",
    "end": "4448260"
  },
  {
    "text": "denoting a censoring\nevent, or was it denoting the actual event happening? So it's distinguishing\nbetween the red and the black.",
    "start": "4448260",
    "end": "4455929"
  },
  {
    "text": "So black is b equals 0. Red is b equals 1.",
    "start": "4455930",
    "end": "4461940"
  },
  {
    "text": "OK, so now we can talk\nabout learning a density,",
    "start": "4461940",
    "end": "4466949"
  },
  {
    "text": "P of t, which I'll\nalso call f of t, which is the probability\nof death at time t.",
    "start": "4466950",
    "end": "4474020"
  },
  {
    "text": "And associated with\nany density, of course, is the cumulative\ndensity function, which is the integral from 0\nto any point of the density.",
    "start": "4474020",
    "end": "4483260"
  },
  {
    "text": "Here we'll actually look\nat 1 minus the CDF, what's called the survival function. So it's looking at probability\nof T, actual time of the event,",
    "start": "4483260",
    "end": "4491720"
  },
  {
    "text": "being larger than some\nquantity, little t. And that's, of course,\njust the integral of the density from\nlittle t to infinity.",
    "start": "4491720",
    "end": "4499266"
  },
  {
    "text": "All right, so this is\nthe survival function. It's of a lot of interest. You want to know,\nis the patient going to be diagnosed with diabetes\ntwo or more years from now.",
    "start": "4499266",
    "end": "4507262"
  },
  {
    "text": "So pictorially, what\nyou're interested in is something like this. You want to estimate these\nconditional distributions. So I call it\nconditional because you",
    "start": "4507262",
    "end": "4514250"
  },
  {
    "text": "want to condition on the\ncovariant to individual x. So what I'm showing\nyou, this black line,",
    "start": "4514250",
    "end": "4520580"
  },
  {
    "text": "is your density, little f of t. And this white area\nhere, the integral",
    "start": "4520580",
    "end": "4527949"
  },
  {
    "text": "from little t to infinity,\nmeaning all this white area, is capital S of t.",
    "start": "4527950",
    "end": "4533380"
  },
  {
    "text": "It's the probability of\nsurviving longer than time little t.",
    "start": "4533380",
    "end": "4539430"
  },
  {
    "text": "OK, so the first thing\nyou might do is say, we get these data,\nthese tuples, and we",
    "start": "4539430",
    "end": "4546520"
  },
  {
    "text": "want to try to estimate\nthat function, little f, the probability of\ndeath at some time.",
    "start": "4546520",
    "end": "4552250"
  },
  {
    "text": "Or, equivalently, you\nmight want to estimate the survival time, capital S\nof t, which is the CDF version.",
    "start": "4552250",
    "end": "4558219"
  },
  {
    "text": "And these two are related to\nanother just by some calculus. So a method called the\nKaplan-Meier estimator",
    "start": "4558220",
    "end": "4566040"
  },
  {
    "text": "is a non-parametric method\nfor estimating that survival probability, capital S of t.",
    "start": "4566040",
    "end": "4573070"
  },
  {
    "text": "So this is the probability\nthat an individual lives more than some time period. So first I'll explain\nto you this plot, then",
    "start": "4573070",
    "end": "4580420"
  },
  {
    "text": "I'll tell you how to compute it. So the x-axis of\nthis plot is time. The y-axis is this survival\nproperty, capital S of t.",
    "start": "4580420",
    "end": "4588130"
  },
  {
    "text": "It's the probability\nthat an individual lives more than this amount of time. I think this x-axis is in days,\nso 500, 1,000, 1,500, 2,000.",
    "start": "4588130",
    "end": "4596933"
  },
  {
    "text": "This figure, by the way, was\ncreated by one of my students who's studying a multiple\nmyeloma data set.",
    "start": "4596933",
    "end": "4602800"
  },
  {
    "text": "So you could then ask, well,\nunder what covariants do you",
    "start": "4602800",
    "end": "4607929"
  },
  {
    "text": "want to compute this survival? So here, this method\nI'll tell you about, is very good for when you\ndon't have any features.",
    "start": "4607930",
    "end": "4616125"
  },
  {
    "text": "So all you want\nto do is estimate that density by itself. And of course you\ncould apply a method",
    "start": "4616125",
    "end": "4621969"
  },
  {
    "text": "for multiple populations. So what I'm showing\nyou here is applying it for two different populations. Suppose there's just a\nsingle binary feature.",
    "start": "4621970",
    "end": "4628040"
  },
  {
    "text": "And we're going to apply\nit to the x equals 0 and to x equals 1. That gets you two\ndifferent curves out.",
    "start": "4628040",
    "end": "4633670"
  },
  {
    "text": "But here the estimator is going\nto work independently for each of the two populations.",
    "start": "4633670",
    "end": "4639140"
  },
  {
    "text": "So what you see here\non this red line is for the x equals\n0 population. We see that, at time 0, everyone\nis alive, as you would expect.",
    "start": "4639140",
    "end": "4648820"
  },
  {
    "text": "And at time 1,000,\nroughly 60% individuals",
    "start": "4648820",
    "end": "4655000"
  },
  {
    "text": "are still alive for time 1,000. And that sort of stays constant. Now you see that, for\nthe other subgroup,",
    "start": "4655000",
    "end": "4661495"
  },
  {
    "text": "the x equals 1 subgroup, again,\ntime step 0, as you would expect, everyone is alive.",
    "start": "4661495",
    "end": "4667809"
  },
  {
    "text": "But they survive much longer. At time step 1,000, over\n75% of them are still alive.",
    "start": "4667810",
    "end": "4673343"
  },
  {
    "text": "And of course of interest here\nis also confidence balance. I'm not going to tell\nyou how can you do that, but it's in some of\nthe optional readings.",
    "start": "4673343",
    "end": "4678820"
  },
  {
    "text": "And by the way, there are\nmore optional readings given on the bottom of these slides. And so you see that there is\na statistically significant",
    "start": "4678820",
    "end": "4686170"
  },
  {
    "text": "difference between x\nequals 1 and x equals 0. These people seem\nto be surviving longer than these people.",
    "start": "4686170",
    "end": "4691490"
  },
  {
    "text": "And you get that\nimmediately from this curve. So how do we compute that? Well, we take those\nobserved times,",
    "start": "4691490",
    "end": "4697630"
  },
  {
    "text": "those capital Ts, and here\nI'm going to call them just y.",
    "start": "4697630",
    "end": "4704409"
  },
  {
    "text": "I'm going to sort them. So these are sorted times. And I don't care whether they\nwere censored or not censored.",
    "start": "4704410",
    "end": "4712679"
  },
  {
    "text": "So y is just all of the times\nfor all of the patients, whether they are\ncensored or not.",
    "start": "4712680",
    "end": "4718489"
  },
  {
    "text": "dK I want you think about as 1. It's the number of events\nthat occurred at that time. So if everyone had a unique\ntime of censoring or death,",
    "start": "4718490",
    "end": "4725740"
  },
  {
    "text": "then dK is always 1. K is indexing one\nof these things. n of K is the number\nof individuals",
    "start": "4725740",
    "end": "4732430"
  },
  {
    "text": "alive and uncensored\nby the K-th time point. Then what this estimator\nsays is that S of t--",
    "start": "4732430",
    "end": "4741160"
  },
  {
    "text": "so the estimator at\nany point in time-- is given to you by\nthe product over K",
    "start": "4741160",
    "end": "4747190"
  },
  {
    "text": "such that y of K is\nless than or equal to t. So it's going over the\nobserved times up to little t,",
    "start": "4747190",
    "end": "4754570"
  },
  {
    "text": "of 1 minus the ratio of 1 over-- so I'm thinking about dK as 1-- 1 over the number of people\nwho are alive and uncensored",
    "start": "4754570",
    "end": "4762070"
  },
  {
    "text": "by that time. And that has a very\nintuitive definition. And one can prove that\nthis estimator gives you",
    "start": "4762070",
    "end": "4769300"
  },
  {
    "text": "a consistent estimator\nof the number of people who are alive--",
    "start": "4769300",
    "end": "4774620"
  },
  {
    "text": "sorry, the number of survival\nprobability at any one point in time for censored data.",
    "start": "4774620",
    "end": "4781547"
  },
  {
    "text": "And that's critical. This works for censored data. So I'm past time today.",
    "start": "4781547",
    "end": "4787340"
  },
  {
    "text": "So I'll finish the last few\nslides on Tuesday's lecture. So that's all for today.",
    "start": "4787340",
    "end": "4792520"
  },
  {
    "text": "Thanks. ",
    "start": "4792520",
    "end": "4807000"
  }
]