[
  {
    "text": "[SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "6487"
  },
  {
    "start": "6487",
    "end": "12490"
  },
  {
    "text": "BERTHOLD HORN: Be a new homework\nproblem out after this class, and we'll try and cover\nas much as possible that",
    "start": "12490",
    "end": "21340"
  },
  {
    "text": "is relevant to that. The last two questions,\nyou will have",
    "start": "21340",
    "end": "26380"
  },
  {
    "text": "to wait for next week's class. However, there's extra time.",
    "start": "26380",
    "end": "32349"
  },
  {
    "text": "So it's not due in a week. It's due slightly later. So we should be able to get\neverything in place by Tuesday.",
    "start": "32350",
    "end": "43470"
  },
  {
    "text": "OK, so the last patent\nwe were talking about was one that allowed us\nto efficiently compute",
    "start": "43470",
    "end": "54360"
  },
  {
    "text": "filtering outputs in images\nthat have been filtered. And in particular,\nthe interest was",
    "start": "54360",
    "end": "61650"
  },
  {
    "text": "in suppressing higher\nfrequency content so that we can sample them\nwithout getting aliasing",
    "start": "61650",
    "end": "68250"
  },
  {
    "text": "artifacts. But also, we could use them\nfor edge detection and any sort",
    "start": "68250",
    "end": "74939"
  },
  {
    "text": "of process that's convolutional\nand get a speed-up",
    "start": "74940",
    "end": "80130"
  },
  {
    "text": "by exploiting the sparse\nnature of a higher derivative of a spline.",
    "start": "80130",
    "end": "86159"
  },
  {
    "text": "So rather than\nfocus on the patent, let's sort of look at some\nof the relevant material",
    "start": "86160",
    "end": "92700"
  },
  {
    "text": "and discuss it without specific\nreference to the patent.",
    "start": "92700",
    "end": "98380"
  },
  {
    "text": "So a major component of\nthis, of course, is Nyquist. So just not to beat a dead horse\nto death, as the saying goes,",
    "start": "98380",
    "end": "114159"
  },
  {
    "text": "when we sample a waveform,\nit's kind of surprising",
    "start": "114160",
    "end": "120570"
  },
  {
    "text": "that we expect to capture\nsomething about the waveform,",
    "start": "120570",
    "end": "125790"
  },
  {
    "text": "because the waveform\nhas infinite support. And we are just getting\nthese discrete samples.",
    "start": "125790",
    "end": "133860"
  },
  {
    "text": "So it's surprising that\nwe can expect to capture that waveform that way.",
    "start": "133860",
    "end": "139800"
  },
  {
    "text": "And the only reason\nthat it can work is if there's something\nvery restricted",
    "start": "139800",
    "end": "144810"
  },
  {
    "text": "about the types of waveforms\nwe're dealing with. And that's band limiting.",
    "start": "144810",
    "end": "150550"
  },
  {
    "text": "So if their frequency\ncontent is limited, then there's this\nwonderful theorem",
    "start": "150550",
    "end": "156570"
  },
  {
    "text": "that basically says\nthat if we sample at a high enough\nfrequency, then we actually",
    "start": "156570",
    "end": "165540"
  },
  {
    "text": "capture everything there is. We can completely\nreconstruct it, and it's a constructive proof.",
    "start": "165540",
    "end": "170760"
  },
  {
    "text": "It's not something that's\nsimply a mathematical proof.",
    "start": "170760",
    "end": "177599"
  },
  {
    "text": "But there's actually a\nmethod for reconstructing it and its convolution\nwith the sinc function.",
    "start": "177600",
    "end": "185410"
  },
  {
    "text": "So it's a very satisfying\nkind of theory. ",
    "start": "185410",
    "end": "192150"
  },
  {
    "text": "And Nyquist and his\npredecessors showed that the criterion is\nthat we sample fast enough",
    "start": "192150",
    "end": "200760"
  },
  {
    "text": "so that the highest frequency\ncomponent of the signal",
    "start": "200760",
    "end": "206189"
  },
  {
    "text": "should have a frequency\nthat is less than fs over 2. And we can sort of\nsee why that is.",
    "start": "206190",
    "end": "217530"
  },
  {
    "text": "Now, suppose we sample\nhere and here and here.",
    "start": "217530",
    "end": "222885"
  },
  {
    "text": " We seem to get the\nimportant part.",
    "start": "222885",
    "end": "229700"
  },
  {
    "text": "We get alternating\nups and downs. And also, it's clear\nthat if we sample, say",
    "start": "229700",
    "end": "235670"
  },
  {
    "text": "at the full frequency, if\nwe have a gap from here",
    "start": "235670",
    "end": "242810"
  },
  {
    "text": "to there between samples,\nthat's not going to work, because all those\nsamples are the same. ",
    "start": "242810",
    "end": "250489"
  },
  {
    "text": "So just if you forget\nwhat the formula is, you just look at this\ndiagram and say, well,",
    "start": "250490",
    "end": "256588"
  },
  {
    "text": "if I ultimately sample waves-- troughs and peaks, then\nI captured the waveform.",
    "start": "256589",
    "end": "264080"
  },
  {
    "text": "It's a little bit\ndangerous argument, because if I take that\nsame waveform and I",
    "start": "264080",
    "end": "273319"
  },
  {
    "text": "sample at the same\nfrequency, I get",
    "start": "273320",
    "end": "281960"
  },
  {
    "text": "this, which isn't satisfactory.",
    "start": "281960",
    "end": "286965"
  },
  {
    "text": "And of course, I\ncan get anything in between if I just shift\nthe phase of the sampling. And that's why it's less than,\nnot less than or equal to.",
    "start": "286965",
    "end": "300420"
  },
  {
    "text": "So it has to be\nstrictly less than.",
    "start": "300420",
    "end": "306140"
  },
  {
    "text": "OK, then if we don't\nsatisfy that requirement, we have aliasing.",
    "start": "306140",
    "end": "312000"
  },
  {
    "text": "So why is it called aliasing? And those of you who are\nthoroughly familiar with this can go to sleep for a moment.",
    "start": "312000",
    "end": "319640"
  },
  {
    "text": "We'll just look at this here.",
    "start": "319640",
    "end": "324670"
  },
  {
    "text": "So here's a waveform. And let's, again,\nsuppose that we're sampling, but now not\nexactly on the peaks",
    "start": "324670",
    "end": "335360"
  },
  {
    "text": "but a little bit offset. So we have-- in the\nspace of the main,",
    "start": "335360",
    "end": "346080"
  },
  {
    "text": "we have a waveform\nwith frequency f0. And suppose that we're sampling\nat some interval, 1 over delta.",
    "start": "346080",
    "end": "355220"
  },
  {
    "text": "And so the samples we're going\nto get are cosine 2 pi f0 k 1",
    "start": "355220",
    "end": "363210"
  },
  {
    "text": "over delta.  Right. So these are our\nsamples, let's say.",
    "start": "363210",
    "end": "368877"
  },
  {
    "start": "368877",
    "end": "377160"
  },
  {
    "text": "And so that's-- we\ncan just substitute. ",
    "start": "377160",
    "end": "385110"
  },
  {
    "text": "Substitute that. And now, if we add 2\npi to the argument,",
    "start": "385110",
    "end": "392460"
  },
  {
    "text": "nothing changes, right? In fact, if I add any\ninteger multiple of 2 pi",
    "start": "392460",
    "end": "398940"
  },
  {
    "text": "to the argument, I\nget the same results. So for example, I could--",
    "start": "398940",
    "end": "404710"
  },
  {
    "text": "do I want to add or subtract? It's going to be\neasier if I subtract.",
    "start": "404710",
    "end": "409740"
  },
  {
    "text": "OK, those are still going to\nbe the same samples, right,",
    "start": "409740",
    "end": "415599"
  },
  {
    "text": "because I've just changed the\nphase by some multiple of 2 pi. OK, so that means\nI can write this.",
    "start": "415600",
    "end": "422725"
  },
  {
    "start": "422725",
    "end": "438370"
  },
  {
    "text": "And so what that means\nis that I started off with a wave of frequency f0.",
    "start": "438370",
    "end": "445180"
  },
  {
    "text": "And now, I'm saying that it's\nthe same as a wave of frequency f0 minus fs, or in\nfact, the same as--",
    "start": "445180",
    "end": "453025"
  },
  {
    "text": " cosine is an even function. So if I wanted to, I\ncould say fs minus f0.",
    "start": "453025",
    "end": "460600"
  },
  {
    "start": "460600",
    "end": "465900"
  },
  {
    "text": "And so let's suppose\nthis is zero frequency. And here is my f0.",
    "start": "465900",
    "end": "473460"
  },
  {
    "text": "And here is fs. Then I'm saying that something\nat this frequency fs minus f0",
    "start": "473460",
    "end": "483240"
  },
  {
    "text": "cannot be distinguished from\nsomething at f0 and also,",
    "start": "483240",
    "end": "488690"
  },
  {
    "text": "by the way, fs plus f0 but\nnot so worried about that.",
    "start": "488690",
    "end": "494730"
  },
  {
    "text": "So now, imagine\nthat f0 is higher.",
    "start": "494730",
    "end": "500020"
  },
  {
    "text": "So I suppose it's there. Well, then this one comes\ndown, close it, and so on. So clearly, I need to\ncut things off there.",
    "start": "500020",
    "end": "510760"
  },
  {
    "text": "As long as I don't have any\nfrequency content above that,",
    "start": "510760",
    "end": "516820"
  },
  {
    "text": "I'm not going to\nhave any confusion. And it's called aliasing,\nbecause those other",
    "start": "516820",
    "end": "523770"
  },
  {
    "text": "frequencies-- and there's\nan infinite number of them-- look the same in the sample.",
    "start": "523770",
    "end": "531320"
  },
  {
    "text": "Notice, by the way, that that\nmeans that you can't fix this after sampling.",
    "start": "531320",
    "end": "536510"
  },
  {
    "text": "It has to be done\nbefore sampling. And so there are various\nkluges to try and do",
    "start": "536510",
    "end": "544010"
  },
  {
    "text": "that, which suppress\nhigher frequency content. But you've already\ncommitted the sin. It's too late.",
    "start": "544010",
    "end": "551000"
  },
  {
    "text": "You're no longer\nable to distinguish frequencies that\ncame from up here",
    "start": "551000",
    "end": "556220"
  },
  {
    "text": "from frequencies down there. So and this is something that I\nguess we should all well know.",
    "start": "556220",
    "end": "566329"
  },
  {
    "text": "OK, then we're going to\napproximately low-pass filter,",
    "start": "566330",
    "end": "571930"
  },
  {
    "text": "because truly low-pass\nfiltering is very hard. Before sampling,\nwe need to filter.",
    "start": "571930",
    "end": "578110"
  },
  {
    "text": "And that's important when we're\ntalking about multiple scales,",
    "start": "578110",
    "end": "585140"
  },
  {
    "text": "because we can't just, like,\ntake every fourth pixel and assume that we're going\nto get something sensible.",
    "start": "585140",
    "end": "592040"
  },
  {
    "text": "That'd be a little bit like\ndesigning an Earth mapping satellite, which is really good.",
    "start": "592040",
    "end": "599460"
  },
  {
    "text": "It's got incredibly good optics\nso that each pixel corresponds to a point on the ground.",
    "start": "599460",
    "end": "606589"
  },
  {
    "text": "That wouldn't be a\nvery useful picture, because this pixel is hitting\nthat gray stone there.",
    "start": "606590",
    "end": "612649"
  },
  {
    "text": "And this pixel is\nhitting the table. And it'd be incoherent.",
    "start": "612650",
    "end": "617690"
  },
  {
    "text": "And it would be a very\ndramatic example of aliasing. So this is a case,\nwhere actually, you",
    "start": "617690",
    "end": "624170"
  },
  {
    "text": "want things to get blurred-- blurred just enough.",
    "start": "624170",
    "end": "629570"
  },
  {
    "text": "OK, so we'll talk about\ndifferent ways of blurring pre-sampling filtering.",
    "start": "629570",
    "end": "635660"
  },
  {
    "text": "And so I want to start off\nby talking about something called the integral image.",
    "start": "635660",
    "end": "641165"
  },
  {
    "text": " So one idea is,\nwhat if we convolve",
    "start": "641165",
    "end": "649690"
  },
  {
    "text": "by what I'll call a boxcar,\nwhich is a filter like that?",
    "start": "649690",
    "end": "656770"
  },
  {
    "text": "Basically, that's\naveraging, right? We're taking a block average. ",
    "start": "656770",
    "end": "664140"
  },
  {
    "text": "And to compute the average,\nwe want to compute the sum. So what's an efficient\nway of computing the sum?",
    "start": "664140",
    "end": "672210"
  },
  {
    "text": "Well, of course, the\nobvious implementation is we just go in, and for\nevery pixel in the output,",
    "start": "672210",
    "end": "678570"
  },
  {
    "text": "we find out which pixels\nin the input it corresponds to, get those\nvalues, add them up,",
    "start": "678570",
    "end": "686100"
  },
  {
    "text": "and maybe divide by the\ntotal number of pixels.",
    "start": "686100",
    "end": "691560"
  },
  {
    "text": "But that's obviously\nexpensive, because then the number of computations is\nroughly the number of pixels",
    "start": "691560",
    "end": "699269"
  },
  {
    "text": "times the width of that filter. Well, there's a very easy way of\ndramatically speeding this up,",
    "start": "699270",
    "end": "705730"
  },
  {
    "text": "which is using an\nintegral image. And we will first do it in 1D. So let's suppose that we\nhave a g for grade level.",
    "start": "705730",
    "end": "718380"
  },
  {
    "text": "We have a sequence, g of i. And we're going to transform\nit into a sequence, big G of i,",
    "start": "718380",
    "end": "725310"
  },
  {
    "text": "where a big G of i is-- ",
    "start": "725310",
    "end": "730950"
  },
  {
    "text": "so we just left to\nright, add up the grade levels, which seems like\na weird thing to do.",
    "start": "730950",
    "end": "738510"
  },
  {
    "text": "But now, it means that\nif we want the sum from k equals i to k equals j of the\noriginal one, we can just get--",
    "start": "738510",
    "end": "749730"
  },
  {
    "text": " right, we just-- one subtraction\nand independent of the length",
    "start": "749730",
    "end": "758640"
  },
  {
    "text": "of the block average. In the naive implementation,\nthe amount of work goes with the width\nof the block average.",
    "start": "758640",
    "end": "766350"
  },
  {
    "text": "Well, now, that's\nnot the case anymore. It's just a single operation.",
    "start": "766350",
    "end": "771610"
  },
  {
    "text": "So if we're going\nto do this a lot, then it's very\nefficient to precompute this so-called integral image.",
    "start": "771610",
    "end": "779620"
  },
  {
    "text": "And this is actually\nused quite a bit. Of course, with images,\nwe're dealing with 2D.",
    "start": "779620",
    "end": "785860"
  },
  {
    "text": "But you can imagine that we\ncan perform the same operation in 2D, where, now, the\nvalue in the output",
    "start": "785860",
    "end": "795910"
  },
  {
    "text": "here is the sum of all the\npixels in this rectangle.",
    "start": "795910",
    "end": "804430"
  },
  {
    "text": "By the way, of\ncourse, with pixels, maybe we only need 8 bits\nto represent the gray level.",
    "start": "804430",
    "end": "809680"
  },
  {
    "text": "Once we start adding them\nup, we need many more bits. So there's some issues\nabout dynamic range.",
    "start": "809680",
    "end": "815560"
  },
  {
    "text": "Do you use floating point? You use 32-bit\nintegers-- whatever?",
    "start": "815560",
    "end": "820640"
  },
  {
    "text": "But obviously, we\nneed to estimate what is the maximum we're\ngoing to get when we add up",
    "start": "820640",
    "end": "827650"
  },
  {
    "text": "all the pixels and suppose\nthat each of the pixel is at its maximum value,\net cetera, et cetera.",
    "start": "827650",
    "end": "834050"
  },
  {
    "text": "So that's all pretty obvious. OK, now, in the 2D\ncase, what I want to do",
    "start": "834050",
    "end": "840990"
  },
  {
    "text": "is typically compute a total\nover a block like this.",
    "start": "840990",
    "end": "849350"
  },
  {
    "text": "So it's a 2D block averaging. And that could be for purposes\nof approximate low-pass",
    "start": "849350",
    "end": "856889"
  },
  {
    "text": "filtering. Or it could be\nfor other reasons. So by the way, just because I'm\ncalling it an integral image,",
    "start": "856890",
    "end": "863370"
  },
  {
    "text": "doesn't mean it has to\nbe derived from an image. We could, for example,\nhave integral gradient.",
    "start": "863370",
    "end": "869910"
  },
  {
    "text": "So we compute the\ngradient everywhere, which is now a two-vector. And we perform the\nsame operations.",
    "start": "869910",
    "end": "875740"
  },
  {
    "text": "Then we get a matrix\nof two vectors. And now, we can do\nthings with that. And in fact, in some high-speed\nrecognition processing,",
    "start": "875740",
    "end": "886080"
  },
  {
    "text": "this is the first step,\nwhere you estimate histograms",
    "start": "886080",
    "end": "891300"
  },
  {
    "text": "of gradients, and\nthen you compute using block averages of this type.",
    "start": "891300",
    "end": "898440"
  },
  {
    "text": "And it's exactly this process,\njust made more complicated, because we're not\ndealing with scalars.",
    "start": "898440",
    "end": "905970"
  },
  {
    "text": "And this maps nicely onto GPUs. So it's used for quite a\nbit of recognition and such.",
    "start": "905970",
    "end": "915750"
  },
  {
    "text": "So let's see. Suppose I want the total\nover this rectangle.",
    "start": "915750",
    "end": "922779"
  },
  {
    "text": "How can I compute it\nfrom the integral image?",
    "start": "922780",
    "end": "928530"
  },
  {
    "text": "It's not completely\nobvious, because if I just take the value at that corner--",
    "start": "928530",
    "end": "935430"
  },
  {
    "text": "suppose I take this value. Well, that's the\ntotal of all of these. So that's not what I want.",
    "start": "935430",
    "end": "942240"
  },
  {
    "text": "If I take the value\nat this corner, that's the total\nof all of those. So maybe I should subtract that.",
    "start": "942240",
    "end": "949610"
  },
  {
    "text": "Then I might take the\ntotal at this corner. And that's the sum of those. Well, maybe I shouldn't\nsubtract the blue one--",
    "start": "949610",
    "end": "957980"
  },
  {
    "text": "get one more color. But I need to get rid\nof that bottom part.",
    "start": "957980",
    "end": "963890"
  },
  {
    "text": "So maybe I can\nsubtract this one. Now, if I subtract the green\nand the orange from the red,",
    "start": "963890",
    "end": "972730"
  },
  {
    "text": "I subtracted this one\ntwice, the blue one. And so I need to add\nit back in again.",
    "start": "972730",
    "end": "979490"
  },
  {
    "text": "So basically, we get the\ntotal over this rectangle by adding this and that and\nsubtracting this and that.",
    "start": "979490",
    "end": "990339"
  },
  {
    "text": "So and you can extend this\nto higher dimensions also, although I haven't\nseen much use for that.",
    "start": "990340",
    "end": "997580"
  },
  {
    "text": "So that means that with-- no, four memory accesses and\nthree arithmetic operations,",
    "start": "997580",
    "end": "1004350"
  },
  {
    "text": "you can get the\ntotal for that block and independent of\nthe size of the block. So it's no more expensive\nto average of a 4",
    "start": "1004350",
    "end": "1012510"
  },
  {
    "text": "by 4 than over a 8\nby 8 or vice versa. OK, so and that really\nis the 0-th level example",
    "start": "1012510",
    "end": "1022960"
  },
  {
    "text": "of what's in that patent. And we'll see why. OK, now, how good is this?",
    "start": "1022960",
    "end": "1030459"
  },
  {
    "text": "So suppose that we\nblock average like this. And then we sample. And we're trying\nto satisfy Nyquist.",
    "start": "1030460",
    "end": "1037180"
  },
  {
    "text": "Are we really suppressing\nall those higher frequencies? Well, let's look at that. So little bit of\nFourier analysis--",
    "start": "1037180",
    "end": "1052780"
  },
  {
    "text": "when I was a student, I was\ntaught Fourier transforms in six different courses.",
    "start": "1052780",
    "end": "1059110"
  },
  {
    "text": "And each of them used\na different notation-- you know, frequency in cycles\nper second versus radians",
    "start": "1059110",
    "end": "1066759"
  },
  {
    "text": "per second. Divide by 2 pi. Don't divide by 2 pi. And it was very confusing.",
    "start": "1066760",
    "end": "1073060"
  },
  {
    "text": "So I won't hold you to getting\nthe constant multipliers right at least.",
    "start": "1073060",
    "end": "1078680"
  },
  {
    "text": "And then I, later in my life,\nstarted doing some mathematics. And the mathematicians\nhad yet another way,",
    "start": "1078680",
    "end": "1085240"
  },
  {
    "text": "which is very sensible. I don't know why\nengineers didn't",
    "start": "1085240",
    "end": "1090549"
  },
  {
    "text": "adopt it, which is the unitary\nversion of where you divide by the square root of 2 pi.",
    "start": "1090550",
    "end": "1096040"
  },
  {
    "text": "And then the forward\nand the inverse are exactly symmetrical\nwith only the sign change. But anyway, OK, so\nwhat have we got?",
    "start": "1096040",
    "end": "1105800"
  },
  {
    "text": "So we have a block of,\nlet's say, with delta that we're averaging over.",
    "start": "1105800",
    "end": "1111170"
  },
  {
    "text": "And we can make the\nheight of this thing 1 over delta just so that\nwhen we get the result,",
    "start": "1111170",
    "end": "1119919"
  },
  {
    "text": "it's the same magnitude\nas the original value. And so we're really\ndoing a moving average.",
    "start": "1119920",
    "end": "1126170"
  },
  {
    "text": "And so what have we got? ",
    "start": "1126170",
    "end": "1135970"
  },
  {
    "text": "So that's going to be\nfrom minus delta over 2 to plus delta over\n2 of 1 over delta.",
    "start": "1135970",
    "end": "1142150"
  },
  {
    "text": " So we're going to\nget 1 over delta.",
    "start": "1142150",
    "end": "1151105"
  },
  {
    "start": "1151105",
    "end": "1160470"
  },
  {
    "text": "I imagine you've\nseen this before. And so we get-- ",
    "start": "1160470",
    "end": "1184409"
  },
  {
    "text": "we get a sinc function. And sadly, I can't write it\nas a sinc, because again,",
    "start": "1184410",
    "end": "1194010"
  },
  {
    "text": "the mathematicians\nand the engineers can't agree on the definition. One has a pi in it, and\nthe other one doesn't.",
    "start": "1194010",
    "end": "1200549"
  },
  {
    "text": "And it's just going\nto confuse it. So I'll just leave it like that. So what does that mean? Well, that means that it is\nattenuating higher frequencies,",
    "start": "1200550",
    "end": "1209340"
  },
  {
    "text": "because while sinc just\nkeeps on wobbling away as we go off in omega, we\nhave the division by 1 over--",
    "start": "1209340",
    "end": "1216330"
  },
  {
    "text": "by omega. So it's decreasing\ninversely with frequency.",
    "start": "1216330",
    "end": "1222360"
  },
  {
    "text": "That's the good part. But it doesn't become 0,\nexcept at special places.",
    "start": "1222360",
    "end": "1227880"
  },
  {
    "text": "And so it's not a terribly\ngood approximation of a low-pass filter.",
    "start": "1227880",
    "end": "1235230"
  },
  {
    "text": "But what's even worse is that\nit doesn't get to the first 0",
    "start": "1235230",
    "end": "1240600"
  },
  {
    "text": "fast enough. So let's see what we got. So the first 0 is, of course,\nwhere the argument of sine",
    "start": "1240600",
    "end": "1249759"
  },
  {
    "text": "is pi over 2. So we got-- and so that's at\nomega 0 equals pi over delta--",
    "start": "1249760",
    "end": "1259920"
  },
  {
    "text": " 2 pi over delta--",
    "start": "1259920",
    "end": "1267180"
  },
  {
    "text": "really-- which is twice the\nfrequency we got for Nyquist.",
    "start": "1267180",
    "end": "1277140"
  },
  {
    "text": "So if we plot it-- so here's what we want. Here's our ideal\nlow-pass filter.",
    "start": "1277140",
    "end": "1285690"
  },
  {
    "text": "And here's what we get. ",
    "start": "1285690",
    "end": "1297710"
  },
  {
    "text": "So this is Nyquist. And this is what we're getting. So the good part is we are\nattenuating higher frequencies.",
    "start": "1297710",
    "end": "1305830"
  },
  {
    "text": "The bad part is we're\nnot aggressive about it. And another bad part\nis that we're actually",
    "start": "1305830",
    "end": "1312940"
  },
  {
    "text": "attenuating some of\nthe frequencies we want a little bit. So and why is this?",
    "start": "1312940",
    "end": "1321400"
  },
  {
    "text": "Well, this is particularly\nrelevant to us in terms of cameras, because\nthis is what the camera does.",
    "start": "1321400",
    "end": "1327779"
  },
  {
    "text": "So this is our pixel. And here's another pixel.",
    "start": "1327780",
    "end": "1333600"
  },
  {
    "text": "And so they are performing\na filtering operation, because they're averaging\nthe light coming",
    "start": "1333600",
    "end": "1342630"
  },
  {
    "text": "over that whole area. And so that's\ngood, because we're",
    "start": "1342630",
    "end": "1349680"
  },
  {
    "text": "performing some low-pass--\napproximate low-pass filtering before sampling. It's not ideal, because is\nthat sinc function, that",
    "start": "1349680",
    "end": "1361679"
  },
  {
    "text": "approximation to that blob? No, and it's first [INAUDIBLE].",
    "start": "1361680",
    "end": "1367200"
  },
  {
    "text": "Then that's why we need\nadditional filtering so that we",
    "start": "1367200",
    "end": "1372840"
  },
  {
    "text": "don't have the aliasing. ",
    "start": "1372840",
    "end": "1379500"
  },
  {
    "text": "OK, and so one thing we can\ndo is find better filtering",
    "start": "1379500",
    "end": "1387520"
  },
  {
    "text": "functions. Of course, they're likely to be\ncomputationally more expensive.",
    "start": "1387520",
    "end": "1394120"
  },
  {
    "text": "And so let's start off with\nrepeated block averaging.",
    "start": "1394120",
    "end": "1402780"
  },
  {
    "text": " OK, since block averaging\nis so cheap to compute,",
    "start": "1402780",
    "end": "1409320"
  },
  {
    "text": "we can perhaps perform\nit twice in the hope of getting something better. And so what we're going\nto do is take our function",
    "start": "1409320",
    "end": "1417870"
  },
  {
    "text": "and convolve it with the filter. So this is the image.",
    "start": "1417870",
    "end": "1424350"
  },
  {
    "text": " This is our filter, which is a\nb for block averaging filter.",
    "start": "1424350",
    "end": "1432080"
  },
  {
    "text": "And now, let's take that\nand convolve it again. ",
    "start": "1432080",
    "end": "1439230"
  },
  {
    "text": "Now, we mentioned last time\nthat this is associative.",
    "start": "1439230",
    "end": "1446000"
  },
  {
    "text": "And so we can write it this way.  So instead of thinking of it\nas convolution with boxcar,",
    "start": "1446000",
    "end": "1455350"
  },
  {
    "text": "we can think of it\nas the convolution of the image with this thing,\nwhich is the boxcar convolved",
    "start": "1455350",
    "end": "1461890"
  },
  {
    "text": "with a boxcar. So and that's this\ntriangular waveform,",
    "start": "1461890",
    "end": "1477400"
  },
  {
    "text": "which is kind of smoother. So that's what you--\nyou would think that would be beneficial,\nthat we don't have",
    "start": "1477400",
    "end": "1485650"
  },
  {
    "text": "as much high-frequency content. So every time there's\na discontinuity, that means that there's\nhigh-frequency content.",
    "start": "1485650",
    "end": "1493360"
  },
  {
    "text": "If it's a step function,\nthen it's 1 over f.",
    "start": "1493360",
    "end": "1499270"
  },
  {
    "text": "If it's only a discontinuity in\nthe derivative, in the slope, then it's 1 over f squared.",
    "start": "1499270",
    "end": "1505760"
  },
  {
    "text": "So this one here, we\nexpect to drop off as 1 over f squared, because\nthese drop-- these suppress 1",
    "start": "1505760",
    "end": "1512049"
  },
  {
    "text": "over f each of them. So OK, well, in the\ntransform domain, of course,",
    "start": "1512050",
    "end": "1517630"
  },
  {
    "text": "it's going to be F\ntimes B times B, which is the same as FB squared.",
    "start": "1517630",
    "end": "1524480"
  },
  {
    "text": "So this is sinc squared. So this function, this\nfiltering is somewhat better,",
    "start": "1524480",
    "end": "1534300"
  },
  {
    "text": "because now, we're taking\nthis thing squared. So when it gets close to\n0, we'll be doing this.",
    "start": "1534300",
    "end": "1543646"
  },
  {
    "text": "Oh, oops. No, square cannot be negative. So it's dropping off at\nthe square of the rate.",
    "start": "1543646",
    "end": "1551450"
  },
  {
    "text": "So instead of 1 over f,\nit's dropping off as 1 over f squared.",
    "start": "1551450",
    "end": "1556680"
  },
  {
    "text": "And so it's better. But it's not wonderful.",
    "start": "1556680",
    "end": "1562030"
  },
  {
    "text": "And one of the things we\ncan do is do it again. We can do a sequence\nof block averaging.",
    "start": "1562030",
    "end": "1568110"
  },
  {
    "text": "And since we have a fairly\nefficient way of doing one, it's not crazy to do several.",
    "start": "1568110",
    "end": "1574620"
  },
  {
    "text": "And of course, we'll\njust get higher powers of the sinc function, which\nwill mean that we're suppressing",
    "start": "1574620",
    "end": "1579900"
  },
  {
    "text": "higher frequencies better. We're messing up some of\nthe passband frequencies",
    "start": "1579900",
    "end": "1585450"
  },
  {
    "text": "in the process. So we probably don't want\nto go too far with that.",
    "start": "1585450",
    "end": "1592150"
  },
  {
    "text": "So I mentioned that the\ntransform of a unit step is--",
    "start": "1592150",
    "end": "1605010"
  },
  {
    "start": "1605010",
    "end": "1610700"
  },
  {
    "text": "well, which we can easily\nprove but plugging it into the formula for\nthe Fourier transform.",
    "start": "1610700",
    "end": "1618290"
  },
  {
    "text": "And so what does that say? Well, that says that any\ntime you have a step, you're going to have\nsomething that drops off as 1",
    "start": "1618290",
    "end": "1624790"
  },
  {
    "text": "over frequency. And in images, of course, we're\ndealing with two dimensions. So this happens in both x and y.",
    "start": "1624790",
    "end": "1632200"
  },
  {
    "text": "So if we have\nsteps in the image, then they will produce some\nhigh-frequency content that",
    "start": "1632200",
    "end": "1638710"
  },
  {
    "text": "doesn't drop off terribly fast. So there was a talk\nhere many years",
    "start": "1638710",
    "end": "1646000"
  },
  {
    "text": "ago by a famous\nmathematician from Harvard,",
    "start": "1646000",
    "end": "1651370"
  },
  {
    "text": "who said that he'd\ntaken a lot of images. And he'd taken the\nFourier transform.",
    "start": "1651370",
    "end": "1659200"
  },
  {
    "text": "And he showed that natural\nimages have a power spectrum",
    "start": "1659200",
    "end": "1664659"
  },
  {
    "text": "that falls off as 1 over f. ",
    "start": "1664660",
    "end": "1671140"
  },
  {
    "text": "So what was the problem with it? Well, he was very happy\nto do this on many images,",
    "start": "1671140",
    "end": "1677080"
  },
  {
    "text": "because he was using the\nfast Fourier transform-- makes it pretty efficient.",
    "start": "1677080",
    "end": "1682480"
  },
  {
    "text": "Well, the fast Fourier\ntransform, of course, is just an implementation of\nthe discrete Fourier transform.",
    "start": "1682480",
    "end": "1688630"
  },
  {
    "text": "And the discrete\nFourier transform assumes that your\ndata is periodic. So if you have--",
    "start": "1688630",
    "end": "1695320"
  },
  {
    "text": "in the one-dimensional\ncase, it says that if this is\nyour waveform you're",
    "start": "1695320",
    "end": "1700390"
  },
  {
    "text": "transforming, what you're really\nlooking at is this, right?",
    "start": "1700390",
    "end": "1709790"
  },
  {
    "text": "So what does this mean? Well, it means that\nunless you're careful,",
    "start": "1709790",
    "end": "1716600"
  },
  {
    "text": "you're introducing a\nstep edge discontinuity as it wraps around.",
    "start": "1716600",
    "end": "1721820"
  },
  {
    "text": "And that will produce\na frequency content that drops off as 1 over f.",
    "start": "1721820",
    "end": "1729139"
  },
  {
    "text": "So the grand result was not\na feature of natural images",
    "start": "1729140",
    "end": "1737180"
  },
  {
    "text": "but a feature of the\ndiscrete Fourier transform. So look out for that. So how do you--",
    "start": "1737180",
    "end": "1743360"
  },
  {
    "text": "this is a real problem. You see this again\nand again in papers. How do you deal with that? Well, what you can do\nis make things match up",
    "start": "1743360",
    "end": "1752030"
  },
  {
    "text": "so that various ways--\none is called apodizing,",
    "start": "1752030",
    "end": "1759300"
  },
  {
    "text": "which is you multiply by a\nwaveform that looks like this. And that means that\nat the ends, you've",
    "start": "1759300",
    "end": "1767550"
  },
  {
    "text": "pulled the image down to 0. And so of course, it matches. And this is fairly common there.",
    "start": "1767550",
    "end": "1776136"
  },
  {
    "text": "People have their\nnames on these things. ",
    "start": "1776136",
    "end": "1782269"
  },
  {
    "text": "But basically, the simplest\none is just a inverted cosine waveform.",
    "start": "1782270",
    "end": "1788140"
  },
  {
    "text": "And I won't write\ndown the formula. It's pretty obvious. You just do 1 minus cosine\nof some suitable multiple",
    "start": "1788140",
    "end": "1796735"
  },
  {
    "text": "of frequency and divide by 2. And you get this filter. And that has, actually,\nvery nice properties.",
    "start": "1796735",
    "end": "1802240"
  },
  {
    "text": "So that's one\napproach to dealing with a DFT applied to images.",
    "start": "1802240",
    "end": "1810039"
  },
  {
    "text": "Another approach\nis to say, well, I don't really know\nwhat's outside the frame.",
    "start": "1810040",
    "end": "1817630"
  },
  {
    "text": "This is as much of\nthe image as I got. And now, I'm being asked to\nguess what's outside there.",
    "start": "1817630",
    "end": "1823810"
  },
  {
    "text": "Well, it could be like this. It could repeat periodically. But maybe it's a\nmirror image, right?",
    "start": "1823810",
    "end": "1836230"
  },
  {
    "text": "Not very good-- maybe\nlike that-- so and that's",
    "start": "1836230",
    "end": "1846500"
  },
  {
    "text": "better, because now, there's no\ndiscontinuity in the brightness",
    "start": "1846500",
    "end": "1852020"
  },
  {
    "text": "itself. So you don't get\nthe 1 over j omega. There is potentially\na discontinuity",
    "start": "1852020",
    "end": "1858440"
  },
  {
    "text": "in the derivative, right? So that means we need to\nlook at 1 over f squared.",
    "start": "1858440",
    "end": "1870909"
  },
  {
    "text": "Where's that come from? Well, if we integrate\nthe unit step function, we get the unit\nramp, we can call it.",
    "start": "1870910",
    "end": "1877720"
  },
  {
    "text": "And its transform is,\nof course, the square",
    "start": "1877720",
    "end": "1882855"
  },
  {
    "text": "of this, because\nbasically, we've convolved the step function\nwith itself to get that. And so this is better--",
    "start": "1882855",
    "end": "1890170"
  },
  {
    "text": "a lot better, because now,\nit's dropping off as 1 over f squared. You still haven't\nsolved the problem,",
    "start": "1890170",
    "end": "1895990"
  },
  {
    "text": "which is because we're\nassuming that it's periodic. And so how can we avoid that?",
    "start": "1895990",
    "end": "1901760"
  },
  {
    "text": "Well, we can take an\ninfinitely wide picture. Then we don't have this problem. But that's, of course,\nnot really an option.",
    "start": "1901760",
    "end": "1910930"
  },
  {
    "text": "OK, so we're going to look\nat some other examples of approximate low-pass\nfiltering in 1D and then in 2D,",
    "start": "1910930",
    "end": "1920472"
  },
  {
    "text": "and I just want to remind\nyou of some basic properties",
    "start": "1920472",
    "end": "1925870"
  },
  {
    "text": "that we need. One of them is the filtering\nproperty, the sifting property of the unit impulse.",
    "start": "1925870",
    "end": "1932335"
  },
  {
    "start": "1932335",
    "end": "1951010"
  },
  {
    "text": "Right. So the unit impulse is\nkind of a weird thing, because it's not\na function, right,",
    "start": "1951010",
    "end": "1958320"
  },
  {
    "text": "because we can say, OK,\ndelta of x is 0 for x not 0.",
    "start": "1958320",
    "end": "1964019"
  },
  {
    "text": "OK, I mean, the function is\nsomething, where, for every x, you can say what the value is.",
    "start": "1964020",
    "end": "1969690"
  },
  {
    "text": "And for the unit impulse,\nwe can do that for anything except [INAUDIBLE]",
    "start": "1969690",
    "end": "1974910"
  },
  {
    "text": "And then what happens\nat x equals 0? Well, it's infinite. So you can see there's\na problem there.",
    "start": "1974910",
    "end": "1981750"
  },
  {
    "text": "And the correct way\nof dealing with that is in terms of distributions. So there are these\ngeneralizations.",
    "start": "1981750",
    "end": "1988080"
  },
  {
    "text": " And we need them.",
    "start": "1988080",
    "end": "1994090"
  },
  {
    "text": "We use the impulse all the time. So we need it for that. But we also need them for\nderivatives of the impulse,",
    "start": "1994090",
    "end": "2000009"
  },
  {
    "text": "which are even weirder. And so someone once noted\nthat aside from the Gaussian,",
    "start": "2000010",
    "end": "2009730"
  },
  {
    "text": "there's just about nothing\nthat has a Fourier transform, in the sense of as a function\nthat you can write down.",
    "start": "2009730",
    "end": "2018940"
  },
  {
    "text": "Almost everything interesting\nincludes some kind of problem,",
    "start": "2018940",
    "end": "2024700"
  },
  {
    "text": "some kind of singularity. And so we might as\nwell get used to that.",
    "start": "2024700",
    "end": "2029710"
  },
  {
    "text": "So how do we deal with the\npeculiar nature of the unit impulse? Well, this is the way.",
    "start": "2029710",
    "end": "2036190"
  },
  {
    "text": "This is how it's defined. This is its property. And it makes sense,\nbecause supposedly, this",
    "start": "2036190",
    "end": "2043840"
  },
  {
    "text": "is 0 everywhere except\nwhere its argument is 0. And so the only place that\nmatters is x equals x0.",
    "start": "2043840",
    "end": "2051158"
  },
  {
    "text": "So the only value of f\nthat matters is f of x0. And then the only thing\nthat's left is the scaling.",
    "start": "2051159",
    "end": "2058810"
  },
  {
    "text": "Well, the idea is that\nwe've made the unit",
    "start": "2058810",
    "end": "2063919"
  },
  {
    "text": "impulse so that its area is 1. And one way I find\nvery helpful to think",
    "start": "2063920",
    "end": "2070489"
  },
  {
    "text": "about these functions-- I mean, the impulse\nis an obvious thing we all know about. But it gets messier.",
    "start": "2070489",
    "end": "2075589"
  },
  {
    "text": "And so it's good to have a\nway of thinking about them. So here's one way of\nthinking about it. ",
    "start": "2075590",
    "end": "2085099"
  },
  {
    "text": "Here's a boxcar\nwith a unit area. And now, if I make epsilon\nsmaller, it becomes narrower.",
    "start": "2085100",
    "end": "2093919"
  },
  {
    "text": "And it becomes higher. And you can kind of\nthink of the unit impulse",
    "start": "2093920",
    "end": "2102090"
  },
  {
    "text": "as the limit of this. But it's not mathematically\ncorrect to say that.",
    "start": "2102090",
    "end": "2110700"
  },
  {
    "text": "But if you want to know what the\neffect is of, say, convolution with the unit impulse, you\ncan take the convolution",
    "start": "2110700",
    "end": "2118079"
  },
  {
    "text": "with this thing, which\nyou can calculate. It's a perfectly valid thing. And then you take the limit\nas epsilon turns to 0.",
    "start": "2118080",
    "end": "2125880"
  },
  {
    "text": "So one thing to keep\nin mind, though, is that's not the only\nway of defining it,",
    "start": "2125880",
    "end": "2133200"
  },
  {
    "text": "I could have equally well have\ntaken a Gaussian, 1 over--",
    "start": "2133200",
    "end": "2138790"
  },
  {
    "text": " I probably have the scale factor\nwrong, something like that.",
    "start": "2138790",
    "end": "2147420"
  },
  {
    "text": "And again, it becomes\nnarrower and higher as epsilon gets smaller.",
    "start": "2147420",
    "end": "2153530"
  },
  {
    "text": "And it defines the same\nthing in the limit.",
    "start": "2153530",
    "end": "2158960"
  },
  {
    "text": "So don't take this\npicture too literally. It's helpful. But it's not the only answer.",
    "start": "2158960",
    "end": "2167119"
  },
  {
    "text": "And it may be the\neasiest one to compute. But OK, so what do\nwe do with this?",
    "start": "2167120",
    "end": "2174930"
  },
  {
    "text": "Well, we can play some games\nwith combinations of impulses.",
    "start": "2174930",
    "end": "2182430"
  },
  {
    "text": "So for example, OK, oh, yeah.",
    "start": "2182430",
    "end": "2200550"
  },
  {
    "text": "I need that.  And so what are these?",
    "start": "2200550",
    "end": "2205920"
  },
  {
    "text": "Well, these are just\nshifted impulses. And so one of them is\nat minus epsilon over 2.",
    "start": "2205920",
    "end": "2213810"
  },
  {
    "start": "2213810",
    "end": "2220030"
  },
  {
    "text": "And the other one is\nat plus epsilon over 2. And their magnitude is 1 over\nepsilon, where the magnitude is",
    "start": "2220030",
    "end": "2229119"
  },
  {
    "text": "the area under the impulse. It's what we get\nwhen we integrate it.",
    "start": "2229120",
    "end": "2234500"
  },
  {
    "text": "So that's the unit\nimpulse, and then we have impulses of\ndifferent areas here.",
    "start": "2234500",
    "end": "2239869"
  },
  {
    "text": "So that's what that\ncorresponds to. And of course, that's just\nf of x plus epsilon over 2",
    "start": "2239870",
    "end": "2246430"
  },
  {
    "text": "minus f of x by epsilon.",
    "start": "2246430",
    "end": "2253869"
  },
  {
    "text": "And in the limit,\nthat's the derivative.",
    "start": "2253870",
    "end": "2261870"
  },
  {
    "text": "So we can-- what's the point?",
    "start": "2261870",
    "end": "2267650"
  },
  {
    "text": "Well, the point is we've\nconnected convolution with derivatives, right.",
    "start": "2267650",
    "end": "2274370"
  },
  {
    "text": "And so we can take\nthe derivative by convolving with this.",
    "start": "2274370",
    "end": "2280730"
  },
  {
    "text": " And that shouldn't\nbe surprising, because this formula matches\nthat, except this is flipped,",
    "start": "2280730",
    "end": "2289950"
  },
  {
    "text": "right? You'd expect the right-hand one\nto be positive and the left one negative, because we're taking\nthe positive of plus epsilon",
    "start": "2289950",
    "end": "2297670"
  },
  {
    "text": "over 2 subtracting the 1\nwith minus epsilon over 2. Why is that?",
    "start": "2297670",
    "end": "2303200"
  },
  {
    "text": "Well, because in\nconvolution, we flip.",
    "start": "2303200",
    "end": "2308589"
  },
  {
    "text": "We flip before we shift and\nmultiply and add, right? ",
    "start": "2308590",
    "end": "2317250"
  },
  {
    "text": "But the important point\nthere is that there's a close connection between\nlinear shift invariant",
    "start": "2317250",
    "end": "2324930"
  },
  {
    "text": "operators and\nderivative operators. And we can treat derivatives\nbasically as convolutions.",
    "start": "2324930",
    "end": "2336570"
  },
  {
    "text": "And just to refresh our memory--",
    "start": "2336570",
    "end": "2342265"
  },
  {
    "start": "2342265",
    "end": "2354470"
  },
  {
    "text": "right? So one of the two gets flipped. So this one is going left to\nright just as f of x does.",
    "start": "2354470",
    "end": "2363400"
  },
  {
    "text": "And this one goes in\nthe reverse direction, with respect to\nthis dummy variable.",
    "start": "2363400",
    "end": "2370760"
  },
  {
    "text": "Notice, again, that we have\nto be careful with the x. We'd like to write the\nintegral blah, blah, blah, dx.",
    "start": "2370760",
    "end": "2378370"
  },
  {
    "text": "But we can't do that, because\nthe x's parameter here. So we need a dummy variable.",
    "start": "2378370",
    "end": "2384320"
  },
  {
    "text": "So introduce some Greek letter. And of course, because\nit's commutative,",
    "start": "2384320",
    "end": "2391690"
  },
  {
    "text": "this should also work\nthe other way around. ",
    "start": "2391690",
    "end": "2398000"
  },
  {
    "text": "But in any case, one of\nthe two has to be flipped. And that's how it's\ndifferent from correlation. So correlation is exactly the\nsame thing as convolution,",
    "start": "2398000",
    "end": "2405290"
  },
  {
    "text": "except that you\ndon't flip things. And that's why, up there,\nit looks a little odd,",
    "start": "2405290",
    "end": "2411030"
  },
  {
    "text": "because we kind of expect\nthe positive impulse to be on the right.",
    "start": "2411030",
    "end": "2416700"
  },
  {
    "text": "OK, back to something\nwe mentioned yesterday, which is one way of dealing\nwith the fact that the pixel",
    "start": "2416700",
    "end": "2425730"
  },
  {
    "text": "averaging is not a very good\napproximation to a low-pass",
    "start": "2425730",
    "end": "2431220"
  },
  {
    "text": "filter-- so in the camera, we're getting\nsome advantage from the fact that we're not\nmaking point samples.",
    "start": "2431220",
    "end": "2438090"
  },
  {
    "text": "We're taking an average\nover the area of the pixel. That helps. But as we saw, it cuts off at--",
    "start": "2438090",
    "end": "2446059"
  },
  {
    "text": "somewhere we saw that\nit cuts off its 0. First 0 is twice\nthe frequency where",
    "start": "2446060",
    "end": "2453830"
  },
  {
    "text": "Nyquist says we should be. So we should really be adding\nsome additional low-pass",
    "start": "2453830",
    "end": "2459080"
  },
  {
    "text": "filtering. And no, you can't\ndo it digitally after you've taken the\nimage, because at that point,",
    "start": "2459080",
    "end": "2464880"
  },
  {
    "text": "you've confounded\nthese frequencies. All of these a.k.a.'s\nhave collapsed into one.",
    "start": "2464880",
    "end": "2471260"
  },
  {
    "text": "And you don't know how much\ncame from one contribution and how much came from\nanother contribution-- has to be done in the analog\ndomain before we sample.",
    "start": "2471260",
    "end": "2481230"
  },
  {
    "text": "OK, so it's kind of\ndifficult to do this,",
    "start": "2481230",
    "end": "2488530"
  },
  {
    "text": "because we got 10\nmillion pixels. And you're trying to do\nsome analog operation that",
    "start": "2488530",
    "end": "2496456"
  },
  {
    "text": "cuts out some of the\nhigh-frequency content. And I mentioned that\none way of doing it was using these\nbirefringent materials.",
    "start": "2496456",
    "end": "2505000"
  },
  {
    "text": "And you only need\na very thin layer. So the crystal I brought\nin would deflect rays",
    "start": "2505000",
    "end": "2511990"
  },
  {
    "text": "by a substantial\namount, like quarter of an inch or something. And I picked the large ones\njust so you could actually",
    "start": "2511990",
    "end": "2518680"
  },
  {
    "text": "see that effect. But here, we're\ntalking about pixels that are maybe 5 microns wide.",
    "start": "2518680",
    "end": "2524290"
  },
  {
    "text": "And so when we do any\naveraging and deflection, we're talking about\nsomething that deflects by--",
    "start": "2524290",
    "end": "2531040"
  },
  {
    "text": "I don't know-- 5 microns,\n2 microns, in that range. So the filter, actually,\nof the special material",
    "start": "2531040",
    "end": "2538450"
  },
  {
    "text": "can be very thin. You just as to make sure\nyou cut it in the right way in the crystallographic\norientation.",
    "start": "2538450",
    "end": "2545589"
  },
  {
    "text": "But that's their problem. Our problem is\nunderstanding what it does.",
    "start": "2545590",
    "end": "2551430"
  },
  {
    "text": "So it's a little bit like our\nformula for the derivative, except there's no minus, right?",
    "start": "2551430",
    "end": "2561250"
  },
  {
    "text": "So what is this? Well, what we're saying\nis that we're going",
    "start": "2561250",
    "end": "2571810"
  },
  {
    "text": "to have two shifted images. And if we just had a\nsingle delta function,",
    "start": "2571810",
    "end": "2579640"
  },
  {
    "text": "then that would be the identity\noperation, except for a shift. And so now, we've got\ntwo superimposed images",
    "start": "2579640",
    "end": "2587650"
  },
  {
    "text": "that are just slightly\nshifted the tiny amount. And we can model\nthat as convolution",
    "start": "2587650",
    "end": "2593710"
  },
  {
    "text": "with two impulses, one of which\nshifts the image for symmetry",
    "start": "2593710",
    "end": "2599230"
  },
  {
    "text": "so that the answer comes\nout as a real number. We like to make it symmetric. And so it's going to shift\nit to the right a little bit.",
    "start": "2599230",
    "end": "2606704"
  },
  {
    "text": "And the other one shifted\nto the left a little bit. And that's what\nthis special filter does so that when you look\nat the actual pixel array,",
    "start": "2606705",
    "end": "2617920"
  },
  {
    "text": "it's no longer the\noriginal in-focus image. You've now got two\nslightly shifted versions.",
    "start": "2617920",
    "end": "2624310"
  },
  {
    "text": "And so how good does that work? Well, we take the\nFourier transform, right?",
    "start": "2624310",
    "end": "2631060"
  },
  {
    "text": "So we take-- and so\nthat's going to be 1/2--",
    "start": "2631060",
    "end": "2643680"
  },
  {
    "start": "2643680",
    "end": "2653680"
  },
  {
    "text": "epsilon. ",
    "start": "2653680",
    "end": "2661200"
  },
  {
    "text": "And that's cosine of-- ",
    "start": "2661200",
    "end": "2670610"
  },
  {
    "text": "so that doesn't drop\noff with frequency. Well, it does near the origin.",
    "start": "2670610",
    "end": "2677130"
  },
  {
    "text": "So let's see what it looks like. ",
    "start": "2677130",
    "end": "2684880"
  },
  {
    "text": "With sinc, it dropped off\nwith 1 over frequency. This just keeps on going. But it does drop off here.",
    "start": "2684880",
    "end": "2691780"
  },
  {
    "text": "And what's the first 0? It's pi over epsilon.",
    "start": "2691780",
    "end": "2697040"
  },
  {
    "text": "So if we want to-- how do we pick epsilon? Well, we have a lot of degrees.",
    "start": "2697040",
    "end": "2702430"
  },
  {
    "text": "Basically, we can decide how\nthick to make this plate. We're not restricted\nto making epsilon",
    "start": "2702430",
    "end": "2707770"
  },
  {
    "text": "equal to the pixel spacing or\nequal to 1/2 the pixel spacing. And Canon and Nikon\nhave their own idea",
    "start": "2707770",
    "end": "2715090"
  },
  {
    "text": "of what is the ideal value. Anyway, what this does is\nnow it cuts high frequencies.",
    "start": "2715090",
    "end": "2724240"
  },
  {
    "text": "Unfortunately, there's this. Then there's some other\nfrequencies that are not cut.",
    "start": "2724240",
    "end": "2733660"
  },
  {
    "text": "What's the story with that? Well, the idea is\nthat this is working with the other low-pass filter,\nthe block averaging filter",
    "start": "2733660",
    "end": "2740500"
  },
  {
    "text": "so that, yes, unfortunately,\nthis extremely simple-minded",
    "start": "2740500",
    "end": "2745870"
  },
  {
    "text": "thing that just makes two copies\nof the image has this property.",
    "start": "2745870",
    "end": "2750910"
  },
  {
    "text": "But that's OK, because\nwhen we get out here, the other filter's at a 0\nso that the two together",
    "start": "2750910",
    "end": "2758380"
  },
  {
    "text": "do a better job. I mean, I wouldn't\nsay it's perfect. You can still get\nmore effects when",
    "start": "2758380",
    "end": "2764260"
  },
  {
    "text": "you have some\nhigh-frequency content in the image, but much less than\nyou would without this filter.",
    "start": "2764260",
    "end": "2772819"
  },
  {
    "text": "By the way, of course,\nyou need two of them, because you got x and y. So you actually have\ntwo of these plates,",
    "start": "2772820",
    "end": "2780720"
  },
  {
    "text": "one rotated 90 degrees\nwith respect to the other. And now, you're\nseeing four images superimposed on each other.",
    "start": "2780720",
    "end": "2787320"
  },
  {
    "text": "And but you can treat this\ntotally separately in x and y.",
    "start": "2787320",
    "end": "2793770"
  },
  {
    "text": "So this analysis doesn't\nhave to be redone. It's just the same thing\nhappens in the y-direction.",
    "start": "2793770",
    "end": "2799510"
  },
  {
    "text": "And so we end up with\nan anti-aliasing filter",
    "start": "2799510",
    "end": "2805020"
  },
  {
    "text": "that some people take out,\nbecause they don't like the way it suppresses high frequencies.",
    "start": "2805020",
    "end": "2811800"
  },
  {
    "text": "OK, so trying to tie\nthis back to the patent--",
    "start": "2811800",
    "end": "2820790"
  },
  {
    "text": "so is this all bring back 603\nor wherever you learned Fourier",
    "start": "2820790",
    "end": "2825800"
  },
  {
    "text": "transforms and linear systems? ",
    "start": "2825800",
    "end": "2830859"
  },
  {
    "text": "OK, so what was the\nidea of the patent? So the idea of the\npatent was a little bit",
    "start": "2830860",
    "end": "2836380"
  },
  {
    "text": "like the integral image. Is there some clever way of\ncutting down the computation,",
    "start": "2836380",
    "end": "2843190"
  },
  {
    "text": "because to get good\nlow-pass filtering, we tend to need large support?",
    "start": "2843190",
    "end": "2848559"
  },
  {
    "text": "And if you implement\nthings the obvious way, the amount of computation\ngrows linearly with the size of the support,\nor in the case of images,",
    "start": "2848560",
    "end": "2857680"
  },
  {
    "text": "quadratically, with\nthe size of support. So it's good to have\na small support.",
    "start": "2857680",
    "end": "2864820"
  },
  {
    "text": "And that doesn't mean narrow. It just means that you have\nonly a few non-zero values. And so let's-- so s is\ngoing to be our integral.",
    "start": "2864820",
    "end": "2877470"
  },
  {
    "text": "And it's called s, because\nin the discrete version, we're going to have a sum.",
    "start": "2877470",
    "end": "2882710"
  },
  {
    "text": "So what is it? Well, it's basically\na step function-- looks like this.",
    "start": "2882710",
    "end": "2889190"
  },
  {
    "text": "So we're interested in\nconvolution with that. And that gives us so\nlet's see what that does.",
    "start": "2889190",
    "end": "2897595"
  },
  {
    "start": "2897595",
    "end": "2908130"
  },
  {
    "text": "Right? So we just used the\nformula for convolution. We plug in this function.",
    "start": "2908130",
    "end": "2913280"
  },
  {
    "text": "Or as we said last when we\nwere there, we can flip them.",
    "start": "2913280",
    "end": "2919970"
  },
  {
    "text": "We can interchange them, because\nconvolution is commutative. ",
    "start": "2919970",
    "end": "2926830"
  },
  {
    "text": "And why do we do that? Because now, we can change\nthe limits of integration. ",
    "start": "2926830",
    "end": "2933480"
  },
  {
    "text": "Oh, the-- sorry.",
    "start": "2933480",
    "end": "2940980"
  },
  {
    "text": " So this is going to restrict\nus to psi greater than 0.",
    "start": "2940980",
    "end": "2949740"
  },
  {
    "text": "So the limits have changed. So we just end up\nwith the integral.",
    "start": "2949740",
    "end": "2955030"
  },
  {
    "text": "So well, there's a\nflip in sign, which corresponds to the convolution\nchanging the order.",
    "start": "2955030",
    "end": "2962910"
  },
  {
    "text": "So OK, apparently\nthat was one too much.",
    "start": "2962910",
    "end": "2971119"
  },
  {
    "text": "All right, anyway,\nthe important thing is that we already said how\nwe can represent derivative",
    "start": "2971120",
    "end": "2979640"
  },
  {
    "text": "in terms of convolutions. Well here's the way we\ncan represent integration.",
    "start": "2979640",
    "end": "2984869"
  },
  {
    "text": "And by the way,\nFourier transform of the unit impulse is-- I forget whether it's 1 over j\nomega or 1 over minus j omega.",
    "start": "2984870",
    "end": "2995000"
  },
  {
    "text": "OK, so we have that operator. And then we have the derivative\noperator, which we went through",
    "start": "2995000",
    "end": "3003609"
  },
  {
    "text": "somewhere earlier. And it has a Fourier\ntransform that's j omega. And not too surprisingly, those\nare inverses of one another,",
    "start": "3003610",
    "end": "3012640"
  },
  {
    "text": "because if I were to convolve\nthe two of them, what I'm doing",
    "start": "3012640",
    "end": "3021490"
  },
  {
    "text": "is making an operator that\nfirst integrates and then differentiates. And of course,\nthat's the identity.",
    "start": "3021490",
    "end": "3028849"
  },
  {
    "text": "And in the Fourier\ntransform domain, convolution\ncorresponds to product. So in the transform\ndomain, we get",
    "start": "3028850",
    "end": "3034910"
  },
  {
    "text": "the product of this and\nthat, which, of course, is 1.",
    "start": "3034910",
    "end": "3040369"
  },
  {
    "text": "So that's consistent. OK, so the key thing, really,\nis that these operators",
    "start": "3040370",
    "end": "3049070"
  },
  {
    "text": "can be treated as convolutions. And I can go to the\nsecond derivative. ",
    "start": "3049070",
    "end": "3057926"
  },
  {
    "text": "I can look at the\nsecond derivative, and I can do it in a\nnumber of different ways. One is it's the first derivative\nconvolved with itself.",
    "start": "3057926",
    "end": "3067069"
  },
  {
    "text": "So I can take those two\nimpulses and convolve them with another set\nof two impulses.",
    "start": "3067070",
    "end": "3073990"
  },
  {
    "text": "And I get something\nthat has three impulses, the standard pattern,\n1 minus 2, 1--",
    "start": "3073990",
    "end": "3079990"
  },
  {
    "text": " something like that.",
    "start": "3079990",
    "end": "3085810"
  },
  {
    "text": "So this would be D squared. And I can obviously take higher\norder derivatives that way.",
    "start": "3085810",
    "end": "3093849"
  },
  {
    "text": "And in terms of transform\ndomain, I just-- convolution becomes\nmultiplication.",
    "start": "3093850",
    "end": "3099850"
  },
  {
    "text": "So if I do two of\nthese, I'm just going to multiply\nthis by itself. And I get minus omega squared.",
    "start": "3099850",
    "end": "3105119"
  },
  {
    "text": "So the second derivative\ncorresponds to minus omega",
    "start": "3105120",
    "end": "3112190"
  },
  {
    "text": "squared. OK, so now, we're\ngoing to apply this to our problem of filtering.",
    "start": "3112190",
    "end": "3117529"
  },
  {
    "start": "3117530",
    "end": "3124570"
  },
  {
    "text": "OK, so suppose that we\nhave a filter that we call F. We're trying to\ntake it apart and put it",
    "start": "3124570",
    "end": "3134569"
  },
  {
    "text": "back together in a way\nthat reduces computation. Now, we said that the\nderivative of the integral",
    "start": "3134570",
    "end": "3141410"
  },
  {
    "text": "is the identity. So we can certainly\nwrite things this way.",
    "start": "3141410",
    "end": "3147440"
  },
  {
    "text": "And then we can make use\nof various properties like commutativity.",
    "start": "3147440",
    "end": "3152670"
  },
  {
    "text": "So let's start there. And then we can\nuse associativity",
    "start": "3152670",
    "end": "3160839"
  },
  {
    "text": "to write it this way. So what this says is that to\nconvolve with the filter F,",
    "start": "3160840",
    "end": "3165910"
  },
  {
    "text": "to apply the filter\nF, what we can do is instead apply this filter.",
    "start": "3165910",
    "end": "3171400"
  },
  {
    "text": "Let's call it F prime. And we don't get\nthe answer we want. But we can get\nthe answer we want",
    "start": "3171400",
    "end": "3177640"
  },
  {
    "text": "by integration or some agent\nfrom left to right, right? And so why would\nthis be interesting?",
    "start": "3177640",
    "end": "3183750"
  },
  {
    "text": "Well, this would be great\nif this one was sparse. ",
    "start": "3183750",
    "end": "3190400"
  },
  {
    "text": "I mean, that doesn't\nalways happen. But this is where we can apply\nthis method in the case, where",
    "start": "3190400",
    "end": "3197600"
  },
  {
    "text": "our function F is sparse. And not F is sparse,\nbut its derivative.",
    "start": "3197600",
    "end": "3205230"
  },
  {
    "text": "And when does that happen? Well, it happens when it's\na constant most of the time.",
    "start": "3205230",
    "end": "3212810"
  },
  {
    "text": "So we're thinking\nparticularly of splines. So we're thinking\nof filters that",
    "start": "3212810",
    "end": "3218780"
  },
  {
    "text": "have some convenient waveform. But we're splitting\nit up into sections.",
    "start": "3218780",
    "end": "3229800"
  },
  {
    "text": "For example, here's an\napproximation to a Gaussian, say. And in each of these,\nit's a polynomial.",
    "start": "3229800",
    "end": "3239550"
  },
  {
    "text": "And so some higher order\nderivative will be 0. So if it's an n-th\norder polynomial,",
    "start": "3239550",
    "end": "3246270"
  },
  {
    "text": "I have to repeat this process\nn times, n plus 1 times, because the n plus first\nderivative of an n-th order",
    "start": "3246270",
    "end": "3252840"
  },
  {
    "text": "polynomial is 0. And then what happens is that\nI get 0 here, 0 here, 0 here.",
    "start": "3252840",
    "end": "3260100"
  },
  {
    "text": "So oops. That's bad. Everything is 0. But you have something here\nat the transitions, right?",
    "start": "3260100",
    "end": "3267690"
  },
  {
    "text": "So that's what I mean by sparse. So now, in the case of this\nspline of three sections,",
    "start": "3267690",
    "end": "3277240"
  },
  {
    "text": "we have only four areas,\nwhere it's non-zero. And so the computation will\nbe much more efficient.",
    "start": "3277240",
    "end": "3286089"
  },
  {
    "text": "We don't get the answer we want. But we can get the answer\nwe want by taking the result and summing it, integrating it.",
    "start": "3286090",
    "end": "3293510"
  },
  {
    "text": "And of course, if we've taken\nn plus 1 derivatives forward,",
    "start": "3293510",
    "end": "3298760"
  },
  {
    "text": "we need to do n\nplus 1 summation. But the summation is trivial. It's just, you have\nan accumulator.",
    "start": "3298760",
    "end": "3304400"
  },
  {
    "text": "You run left to right. You start with 0. You just keep on adding\nin the gray levels.",
    "start": "3304400",
    "end": "3309950"
  },
  {
    "text": "And now, you might need to\nworry about dynamic range. How many bits do you\nneed to represent that?",
    "start": "3309950",
    "end": "3317990"
  },
  {
    "text": "But we won't worry about that.  OK, well, let's do a\nreally simple example.",
    "start": "3317990",
    "end": "3328980"
  },
  {
    "text": "So and again, typically,\nto do a good job,",
    "start": "3328980",
    "end": "3338220"
  },
  {
    "text": "you might need fairly\nhigher order derivatives. So suppose, for\nexample, you were",
    "start": "3338220",
    "end": "3343860"
  },
  {
    "text": "trying to approximate\nthe sinc function. That would be very\nimportant to us, because we know\nthat's the ideal one.",
    "start": "3343860",
    "end": "3350190"
  },
  {
    "text": "If we could ever get\nthe sinc function, we'd have a perfect\nlow-pass filter.",
    "start": "3350190",
    "end": "3355440"
  },
  {
    "text": "But so let's approximate it. And what's wrong with the sinc\nfunction the way it stands? Well, the main problem\nis it goes on forever.",
    "start": "3355440",
    "end": "3362080"
  },
  {
    "text": "And so we need to\nsomehow truncate it. And we need to represent it. ",
    "start": "3362080",
    "end": "3380990"
  },
  {
    "text": "And how close an\napproximation do we want?",
    "start": "3380990",
    "end": "3386230"
  },
  {
    "text": "That's not very symmetrical. So let's-- OK, so here's how--",
    "start": "3386230",
    "end": "3406464"
  },
  {
    "text": "it looks a little bit like the\nsinc functions, not, of course, going on forever.",
    "start": "3406465",
    "end": "3411549"
  },
  {
    "text": "But we can approximate\nit this way. And we probably want\na cubic approximation.",
    "start": "3411550",
    "end": "3418460"
  },
  {
    "text": "So in each of these\nfour areas, the curve is described by a cubic.",
    "start": "3418460",
    "end": "3425569"
  },
  {
    "text": "And there are different cubics\nfor the different areas. And that's the whole\nidea of a spline.",
    "start": "3425570",
    "end": "3431420"
  },
  {
    "text": "And now, if we-- it's cubic. So if we take the\nfourth derivative, it'll be 0 everywhere\nexcept at the junctions.",
    "start": "3431420",
    "end": "3437990"
  },
  {
    "text": "So that means that if we do\nthis, use this for filtering, we can do relatively little\nwork, because instead",
    "start": "3437990",
    "end": "3446240"
  },
  {
    "text": "of having-- say the pixel\nspacing is like that. Instead of having all of\nthose non-zero values,",
    "start": "3446240",
    "end": "3452820"
  },
  {
    "text": "we only have non-zero\nvalues at those four places.",
    "start": "3452820",
    "end": "3458020"
  },
  {
    "text": "And this, by the\nway, is used heavily in all kinds of image\nmanipulation software,",
    "start": "3458020",
    "end": "3464410"
  },
  {
    "text": "like Photoshop would\ninterpolate images using this function, except in 2D.",
    "start": "3464410",
    "end": "3471930"
  },
  {
    "text": "So it's called-- in 2D,\nit's called by bicubic, because we're doing cubic\nin x and cubic in y.",
    "start": "3471930",
    "end": "3479657"
  },
  {
    "text": "But they didn't\nconsider a true 2D case, because it's more work.",
    "start": "3479657",
    "end": "3485240"
  },
  {
    "text": "So OK, so say, for example,\nyou take your picture. And you discover, oh, I had\nthe camera rotated 2 degrees.",
    "start": "3485240",
    "end": "3493810"
  },
  {
    "text": "And then you say, OK, Photoshop\nor whatever your favorite image manipulation software is,\nrotate it by minus 2 degrees.",
    "start": "3493810",
    "end": "3501130"
  },
  {
    "text": "Well, of course, now, the\npixels of the rotated image won't line up with the\npixels in the new image.",
    "start": "3501130",
    "end": "3506410"
  },
  {
    "text": "And so you have to interpolate. You have to figure out\nwhat values to use. And you could just\nuse nearest neighbor.",
    "start": "3506410",
    "end": "3513970"
  },
  {
    "text": "Well, nearest neighbor\nis pretty bad. You can see the pixelation. And in particular, if\nyou repeat it-- say you",
    "start": "3513970",
    "end": "3520210"
  },
  {
    "text": "then say, oh, actually,\nit was 2 and 1/2 degrees. Let me turn it another\n1/2 degree, which is probably a bad idea.",
    "start": "3520210",
    "end": "3526030"
  },
  {
    "text": "You want to go\nback and turn 2.5. But suppose you do\nit sequentially, then at each step, it's going to\ndeteriorate a little bit.",
    "start": "3526030",
    "end": "3533320"
  },
  {
    "text": "And if you use nearest neighbor,\nit'll deteriorate a lot. So the next best thing\nis linear interpolation,",
    "start": "3533320",
    "end": "3541070"
  },
  {
    "text": "which is cheap to compute. But it's not as\ngood as we'll see",
    "start": "3541070",
    "end": "3546099"
  },
  {
    "text": "in the moment as this method. And then you might say, well,\nwhy not go even further?",
    "start": "3546100",
    "end": "3551540"
  },
  {
    "text": "Why not approximate the\nsinc function by something that looks like this-- have one more wiggle in it?",
    "start": "3551540",
    "end": "3559359"
  },
  {
    "text": "And you can do that. But as far as I\nknow, this has never",
    "start": "3559360",
    "end": "3564580"
  },
  {
    "text": "caught on because of\nthe computational cost. So if you think about\ndoing this in 2D--",
    "start": "3564580",
    "end": "3572800"
  },
  {
    "text": "so we need to look\nat four places in 1D. In 2D, there's a grid of 4 by 4.",
    "start": "3572800",
    "end": "3578470"
  },
  {
    "text": "So we need to look at\n16 neighboring pixels to do a good job. Well, with this one, we\nneed 1, 2, 3, 4, 5, 6, 7.",
    "start": "3578470",
    "end": "3587205"
  },
  {
    "text": "Is that right? Anyway, more-- and by the time\nyou square it, a lot more.",
    "start": "3587205",
    "end": "3593580"
  },
  {
    "text": "So and there's\nnot a huge payoff. You don't get images\nthat suddenly look dramatically better bicubic.",
    "start": "3593580",
    "end": "3602190"
  },
  {
    "text": "And bicubic was invented by IBM. And it was used in early\nsatellite image processing.",
    "start": "3602190",
    "end": "3609720"
  },
  {
    "text": " OK, so suppose that we go back\nto the simple block averaging",
    "start": "3609720",
    "end": "3621190"
  },
  {
    "text": "just so we can do the\nnumbers more easily. No, I don't want\nto do this one--",
    "start": "3621190",
    "end": "3626440"
  },
  {
    "text": "do another one. So again, 1D case-- ",
    "start": "3626440",
    "end": "3639140"
  },
  {
    "text": "and now, suppose we want\na block average of four. ",
    "start": "3639140",
    "end": "3648710"
  },
  {
    "text": "Well, let's start with-- there's one issue. We have to make some\nassumption about what's",
    "start": "3648710",
    "end": "3655609"
  },
  {
    "text": "outside the range\nthat's given to us. So let's assume it's 0. And at some point when\nwe're here, we'll get 0.",
    "start": "3655610",
    "end": "3662690"
  },
  {
    "text": "And then we shift 1 over. And we take that block\naverage and get 2. And we shift 1 over.",
    "start": "3662690",
    "end": "3668450"
  },
  {
    "text": "We get 3 and 6. And then we get--",
    "start": "3668450",
    "end": "3673790"
  },
  {
    "text": "better write it down from\nhere before I make a mistake-- 11, 18. No, that's the sum. Sorry.",
    "start": "3673790",
    "end": "3679600"
  },
  {
    "text": "That's the wrong thing-- 11, 16, 16, 13, 10, 6, 7.",
    "start": "3679600",
    "end": "3689930"
  },
  {
    "text": "So that's the naive\nimplementation of convolution. I just shift this block\nalong and add up whatever's",
    "start": "3689930",
    "end": "3698180"
  },
  {
    "text": "underneath the block. So then let me do it the\nother way, which in this case,",
    "start": "3698180",
    "end": "3705020"
  },
  {
    "text": "doesn't save us a lot, because\nit's a very short example. So the other way is\nto add left to right--",
    "start": "3705020",
    "end": "3710390"
  },
  {
    "text": "2, 3, 6, 11. And then 7 is 18 and 19, 19,\n21, 24, 26, dot, dot, dot.",
    "start": "3710390",
    "end": "3723470"
  },
  {
    "text": "And now, I subtract. So I'm going to take this value\nand subtract the value four",
    "start": "3723470",
    "end": "3731010"
  },
  {
    "text": "back. So I get 2. Subtract this value. I get 3. Subtract this one, I get 6, 11.",
    "start": "3731010",
    "end": "3739369"
  },
  {
    "text": "And then by 18, I\nget 18 minus 2 is 16.",
    "start": "3739370",
    "end": "3745890"
  },
  {
    "text": "And 19 minus 3 is also 16. And 19 minus 6 is 13.",
    "start": "3745890",
    "end": "3752319"
  },
  {
    "text": "And you can see how that works. And in this example,\nit didn't buy as much.",
    "start": "3752320",
    "end": "3759240"
  },
  {
    "text": "But if we're block averaging\nover a large segment, that could be a huge saving.",
    "start": "3759240",
    "end": "3764955"
  },
  {
    "text": " And if we do it in 2D\non images, even more so.",
    "start": "3764955",
    "end": "3772490"
  },
  {
    "text": "OK. ",
    "start": "3772490",
    "end": "3778671"
  },
  {
    "text": "AUDIENCE: How do\nwe get [INAUDIBLE]?? BERTHOLD HORN:\nBecause there's a--",
    "start": "3778671",
    "end": "3784980"
  },
  {
    "text": "we've got-- where were we? AUDIENCE: [INAUDIBLE] BERTHOLD HORN: 18. Oh, up here?",
    "start": "3784980",
    "end": "3790135"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] BERTHOLD HORN: We're\nadding 0 at some point. These may not be\nlined up exactly--",
    "start": "3790135",
    "end": "3796940"
  },
  {
    "text": "oh, did I screw up? OK, 2, 3, 6, and-- ",
    "start": "3796940",
    "end": "3803280"
  },
  {
    "text": "so this one is 16. This sum is 16. And then the next\nsum is also 16.",
    "start": "3803280",
    "end": "3810650"
  },
  {
    "text": "You see the-- we lose\na 1 on the left then, but we add 1 on the right. So God for a minute\nthere, I thought",
    "start": "3810650",
    "end": "3819820"
  },
  {
    "text": "the whole method was flawed. And we'd have to give up\nand fire the person who",
    "start": "3819820",
    "end": "3826500"
  },
  {
    "text": "wrote that patent. But no, fortunately, it works. So OK, I don't think\nI'll do another example.",
    "start": "3826500",
    "end": "3833819"
  },
  {
    "text": "That's too boring. So linear interpolation-- so I\nbrought up cubic interpolation",
    "start": "3833820",
    "end": "3841960"
  },
  {
    "text": "and sang its praises. So I should say something\nabout linear interpolation.",
    "start": "3841960",
    "end": "3848410"
  },
  {
    "text": "And we don't think of\nlinear interpolation as having anything to\ndo with convolution.",
    "start": "3848410",
    "end": "3855180"
  },
  {
    "text": "But of course, we can\nthink of it that way. So again, suppose we have\nsamples on the street grid.",
    "start": "3855180",
    "end": "3869440"
  },
  {
    "start": "3869440",
    "end": "3887470"
  },
  {
    "text": "And then we create a function\nthat connects those points.",
    "start": "3887470",
    "end": "3892510"
  },
  {
    "text": "And the simplest way is\njust to draw straight lines. And that's linear interpolation.",
    "start": "3892510",
    "end": "3899230"
  },
  {
    "text": "Over there, we draw qubits. OK, so that's the formula that\ngives us that straight line.",
    "start": "3899230",
    "end": "3921640"
  },
  {
    "text": "So first of all, notice\nthat it's linear in x. So it's a straight line. And at the important\npoints, namely 0 and 1,",
    "start": "3921640",
    "end": "3931790"
  },
  {
    "text": "it gives us the right value. So at 0, we get--",
    "start": "3931790",
    "end": "3936860"
  },
  {
    "text": "at x equals 0, we get f of 0. That's what we want.",
    "start": "3936860",
    "end": "3942529"
  },
  {
    "text": "At x equals 1, we get f of 1. So that is that line.",
    "start": "3942530",
    "end": "3949150"
  },
  {
    "text": "OK. ",
    "start": "3949150",
    "end": "3958539"
  },
  {
    "text": "Now, that corresponds to\nconvolution with that function. And I'll leave you\nto figure that out.",
    "start": "3958540",
    "end": "3967710"
  },
  {
    "text": "It should be clear\nafter what we've done. And that, in turn--",
    "start": "3967710",
    "end": "3974069"
  },
  {
    "text": "this triangle, in turn,\nis the convolution of those two boxcars.",
    "start": "3974070",
    "end": "3980600"
  },
  {
    "text": "That's also easy to see,\nbecause we take one of them. We flip it. That does nothing. And then we slide it\nunderneath the other one.",
    "start": "3980600",
    "end": "3987880"
  },
  {
    "text": "And initially, there's\nvery little overlap. The overlap increases linearly\nuntil we're right on top of it.",
    "start": "3987880",
    "end": "3995170"
  },
  {
    "text": "And then it linearly\ndecreases until we drop off the right-hand end.",
    "start": "3995170",
    "end": "4001020"
  },
  {
    "text": "So convolution of the two\nboxcars is that thing.",
    "start": "4001020",
    "end": "4006560"
  },
  {
    "text": "So by the way, you can\nsee that, in some sense, right, just by\nlooking at this, it's",
    "start": "4006560",
    "end": "4012360"
  },
  {
    "text": "an inferior interpolation\nmethod to the one that's using that approximation\nto the sinc function.",
    "start": "4012360",
    "end": "4018190"
  },
  {
    "text": "And it has a number\nof nasty properties. One of them is that the\nquality is different close",
    "start": "4018190",
    "end": "4024510"
  },
  {
    "text": "to the sample points than, say,\nin the middle between them. Why is that?",
    "start": "4024510",
    "end": "4029859"
  },
  {
    "text": "Well, suppose there's\nnoise in the image. Then if I'm here right on\ntop of the sample point,",
    "start": "4029860",
    "end": "4035610"
  },
  {
    "text": "I just inherit the noise\nof that image measurement. Let's say it's sigma. So there's some sort\nof variability sigma.",
    "start": "4035610",
    "end": "4044190"
  },
  {
    "text": "Now, if I'm halfway\nin between them, I'm taking the average\nof these two values.",
    "start": "4044190",
    "end": "4049750"
  },
  {
    "text": "And so there's noise in this. There's noise in that. But the variance\nof the noise adds.",
    "start": "4049750",
    "end": "4058080"
  },
  {
    "text": "So what I find is that\nI'm getting sigma squared plus sigma squared\nfor my variance, which",
    "start": "4058080",
    "end": "4063630"
  },
  {
    "text": "is 2 sigma squared. So the standard deviation-- so this is the variance.",
    "start": "4063630",
    "end": "4069760"
  },
  {
    "text": "So the standard deviation of the\nsquare root of 2 times sigma-- so the noise in the\ninterpolated result",
    "start": "4069760",
    "end": "4076740"
  },
  {
    "text": "is different when I'm different\nplaces in this transition. Now, that's also true of\nthe cubic interpolation.",
    "start": "4076740",
    "end": "4084630"
  },
  {
    "text": "But it's much smaller effect. In the case of\nlinear interpolation,",
    "start": "4084630",
    "end": "4091980"
  },
  {
    "text": "you're averaging two\nindependent noise values when you're in the middle. So you have reduction in noise.",
    "start": "4091980",
    "end": "4098670"
  },
  {
    "text": "But when you're sitting right\non top of the original samples, you're getting the full effect\nof the image measurement noise.",
    "start": "4098670",
    "end": "4105270"
  },
  {
    "text": "So it's an effect\nthat's kind of annoying.",
    "start": "4105270",
    "end": "4110720"
  },
  {
    "text": "OK, so in terms of\ntransform, we know that this transform is sinc. And this transform is sinc\nin the frequency domain.",
    "start": "4110720",
    "end": "4118338"
  },
  {
    "text": " And so we get sinc squared.",
    "start": "4118339",
    "end": "4124750"
  },
  {
    "text": "So and we've talked\nabout sinc squared. So this is not a terribly\ngood low-pass filter.",
    "start": "4124750",
    "end": "4133210"
  },
  {
    "text": "It's better than a single stage. It's better than-- oh, so I\nmentioned that the crudest",
    "start": "4133210",
    "end": "4140229"
  },
  {
    "text": "method is nearest neighbor. So an interesting question\nis, what convolution does",
    "start": "4140229",
    "end": "4145850"
  },
  {
    "text": "nearest neighbor correspond to? So let's think about that. So we've got the cubic one.",
    "start": "4145850",
    "end": "4152149"
  },
  {
    "text": "And we've got the\nlinear interpolation. And what about nearest neighbor?",
    "start": "4152149",
    "end": "4161290"
  },
  {
    "text": "Well, with nearest neighbor,\nwhat my picture would look like is-- ",
    "start": "4161290",
    "end": "4175009"
  },
  {
    "text": "let's see. Suppose the next\nvalue is up here. So with nearest neighbor,\nI'm going to get these steps.",
    "start": "4175010",
    "end": "4182740"
  },
  {
    "text": "So it's a piecewise constant. Over here, we have something\nthat's piecewise linear.",
    "start": "4182740",
    "end": "4189180"
  },
  {
    "text": "And in the case of the\ncubic interpolation, we have something\nthat's piecewise cubic. And you may ask why there\nis no piecewise quadratic.",
    "start": "4189180",
    "end": "4196110"
  },
  {
    "text": "But that's a long story. So we don't do that. So that's the\nresult we get from--",
    "start": "4196110",
    "end": "4201970"
  },
  {
    "text": "and you can see that this is\nobviously inferior to even linear interpolation. And then so nearest\nneighbor corresponds",
    "start": "4201970",
    "end": "4219450"
  },
  {
    "text": "to convolution with the boxcar. If you think about\nit, that makes sense. You think of each of the\nsamples as an impulse.",
    "start": "4219450",
    "end": "4225690"
  },
  {
    "text": "And now, we're convolving\nthose with a boxcar. And that will create a\nbox like this and a box",
    "start": "4225690",
    "end": "4235349"
  },
  {
    "text": "like that and a box like this. So each of these\nimpulses creates a box.",
    "start": "4235350",
    "end": "4241290"
  },
  {
    "text": "And you put them together. You have the linear interp-- the nearest neighbor\ninterpolated result.",
    "start": "4241290",
    "end": "4246640"
  },
  {
    "text": "And so in some sense,\nthe linear interpolation is doing that twice.",
    "start": "4246640",
    "end": "4254909"
  },
  {
    "text": "It's twice as good,\nin some sense. It's the quadratic in\nthe transform domain.",
    "start": "4254910",
    "end": "4260670"
  },
  {
    "text": " OK, so as long as we live in\nimage coordinates, x and y,",
    "start": "4260670",
    "end": "4272520"
  },
  {
    "text": "we can treat them independently\nas we have, for example, with interpolation. We said, well, we'll use a cubic\nspline in x and a cubic spline",
    "start": "4272520",
    "end": "4281400"
  },
  {
    "text": "in y and so on. But we keep on saying\nthat really, things should",
    "start": "4281400",
    "end": "4287220"
  },
  {
    "text": "be-- rotation is symmetric. There's no preferred\ndirection in natural images.",
    "start": "4287220",
    "end": "4293460"
  },
  {
    "text": "And that's not entirely true,\nbecause we often line things up with a horizon. And then we have\nman-made structures,",
    "start": "4293460",
    "end": "4300210"
  },
  {
    "text": "which are rectangular often. But in some sense,\nthey shouldn't really be some special bias.",
    "start": "4300210",
    "end": "4307920"
  },
  {
    "text": "Why did we pick a square\npixel or a rectangular pixel coordinate system?",
    "start": "4307920",
    "end": "4313929"
  },
  {
    "text": "And so what if, instead, we're\nthinking about a rotation",
    "start": "4313930",
    "end": "4319110"
  },
  {
    "text": "asymmetric situation? And one of the\nquestions that comes up",
    "start": "4319110",
    "end": "4324600"
  },
  {
    "text": "is, what's the equivalent\nof low-pass filter? So we can easily imagine a\nlow-pass filter like this.",
    "start": "4324600",
    "end": "4332175"
  },
  {
    "start": "4332175",
    "end": "4339420"
  },
  {
    "text": "So u and v are the\nfrequency components corresponding to x and y.",
    "start": "4339420",
    "end": "4345010"
  },
  {
    "text": "And here, we've got\na low-pass filter in the x-direction\nand a low-pass filter in the y-direction.",
    "start": "4345010",
    "end": "4351430"
  },
  {
    "text": "And that's a legitimate\nway of thinking about limiting the\nfrequency range,",
    "start": "4351430",
    "end": "4357020"
  },
  {
    "text": "but it's not\nrotationally symmetric. So more interesting\nquestion is--",
    "start": "4357020",
    "end": "4363370"
  },
  {
    "start": "4363370",
    "end": "4371336"
  },
  {
    "text": "do I want to go-- yeah. What if we have\na low-pass filter that's rotationally symmetric?",
    "start": "4371336",
    "end": "4376780"
  },
  {
    "text": "What is the real two\ndimensional equivalent to what we've been\ntalking about in 1D?",
    "start": "4376780",
    "end": "4383800"
  },
  {
    "text": "And so this function-- I'll call it a pillbox. ",
    "start": "4383800",
    "end": "4390840"
  },
  {
    "text": "I guess nobody knows what\npillboxes are anymore, although old people\nthese days often",
    "start": "4390840",
    "end": "4396150"
  },
  {
    "text": "have some sort of pillbox. So they remember whether\nthey've taken their medications.",
    "start": "4396150",
    "end": "4401820"
  },
  {
    "text": "But those boxes are rectangular. That's not what I'm talking-- I'm talking about a round thing.",
    "start": "4401820",
    "end": "4407790"
  },
  {
    "text": "Viewed from this-- perspective\nview would be like this. ",
    "start": "4407790",
    "end": "4413870"
  },
  {
    "text": "So its value here is 1. And its value out\nhere is 0, right?",
    "start": "4413870",
    "end": "4420590"
  },
  {
    "text": "It's passing all\nthose low frequencies. And it's not passing\nany high frequencies.",
    "start": "4420590",
    "end": "4426690"
  },
  {
    "text": "And you can find its transform. But I'll just write it down,\nbecause it's somewhat tedious.",
    "start": "4426690",
    "end": "4439699"
  },
  {
    "text": " So actually, inverse\ntransform, right,",
    "start": "4439700",
    "end": "4445300"
  },
  {
    "text": "because we're going\nfrom frequency domain to the other domain, except\nthe transform's pretty much",
    "start": "4445300",
    "end": "4451300"
  },
  {
    "text": "symmetrical. And we have a rotationally\nsymmetric object. So in that case, it\ndoesn't matter at all.",
    "start": "4451300",
    "end": "4458110"
  },
  {
    "text": "OK, so what's rho? Well, that's in a\npolar coordinate system in the spatial domain.",
    "start": "4458110",
    "end": "4464590"
  },
  {
    "text": "And you'd imagine that the\ninverse transform of this should be rotationally\nasymmetric, as well. And it is.",
    "start": "4464590",
    "end": "4470635"
  },
  {
    "text": " And if you go along\nany radius, it",
    "start": "4470635",
    "end": "4477160"
  },
  {
    "text": "will vary as this ratio, where\nJ1 is the first order Bessel function.",
    "start": "4477160",
    "end": "4482260"
  },
  {
    "text": " And this is a famous\nfunction in optics.",
    "start": "4482260",
    "end": "4494090"
  },
  {
    "text": "For example, when\nAiry first talked about the resolution\nof a microscope, he found out that its point\nspread function, its response",
    "start": "4494090",
    "end": "4502010"
  },
  {
    "text": "to an impulse, is that. And then his famous\nequation for resolution",
    "start": "4502010",
    "end": "4509180"
  },
  {
    "text": "is based on the first\n0 of this function. So this is the\nequivalent, in some sense,",
    "start": "4509180",
    "end": "4514460"
  },
  {
    "text": "of the sinc function. And if we plot it-- now, if\nI plot it on the blackboard,",
    "start": "4514460",
    "end": "4520500"
  },
  {
    "text": "it'll look exactly\nlike the sinc function, because it has a central peak. And it goes to 0 and then\ncomes out the other side",
    "start": "4520500",
    "end": "4527730"
  },
  {
    "text": "and dies away. And you'd have to actually\nlook at the values",
    "start": "4527730",
    "end": "4533580"
  },
  {
    "text": "to see that it's different.",
    "start": "4533580",
    "end": "4539170"
  },
  {
    "text": "So there are two ways to,\nin which it's different. The one is that the\nfirst 0 is 3.8371,",
    "start": "4539170",
    "end": "4546930"
  },
  {
    "text": "dot, dot, dot rather than at pi.",
    "start": "4546930",
    "end": "4552280"
  },
  {
    "text": "And the zeros are not\nmultiples of that first one,",
    "start": "4552280",
    "end": "4559130"
  },
  {
    "text": "although they tend to be\ncloser and closer to periodic.",
    "start": "4559130",
    "end": "4565310"
  },
  {
    "text": "And the other thing\nis that it drops off-- so in the sinc function,\nit drops off as 1 over f,",
    "start": "4565310",
    "end": "4571270"
  },
  {
    "text": "right, because we got the\nsign at the top that's always between plus 1 and minus 1. And we're dividing\nby the frequency.",
    "start": "4571270",
    "end": "4577610"
  },
  {
    "text": "So the sinc function drops\noff as 1 over distance. This drops off as 1 over\nsomething to the 3/2, right?",
    "start": "4577610",
    "end": "4587050"
  },
  {
    "text": "I don't have it. Well, so it drops off\nactually a little bit faster",
    "start": "4587050",
    "end": "4593060"
  },
  {
    "text": "than the sinc would have.  So that's the ideal low-pass\nfilter for an image.",
    "start": "4593060",
    "end": "4601139"
  },
  {
    "text": "And that's in 2D. And we've only shown\nthe cross-section of it. But its rotation is symmetric\nwith this cross-section.",
    "start": "4601140",
    "end": "4608159"
  },
  {
    "text": "And so when you look through\na microscope, for example,",
    "start": "4608160",
    "end": "4613870"
  },
  {
    "text": "at a single point\nof light and you were to plot the electric\nfield in the image plane,",
    "start": "4613870",
    "end": "4621400"
  },
  {
    "text": "it would look like that. Now, negative values,\nbrightness-- well, the thing",
    "start": "4621400",
    "end": "4628940"
  },
  {
    "text": "is we don't sense\nthe electric field. We sense power. We sense the square of it.",
    "start": "4628940",
    "end": "4633989"
  },
  {
    "text": "So in terms of image\nbrightness, we actually",
    "start": "4633990",
    "end": "4639350"
  },
  {
    "text": "have the square of this. We get that and so on.",
    "start": "4639350",
    "end": "4646710"
  },
  {
    "text": "And Airy's resolution criteria\nis based on this first 0. And it says, if you've got\ntwo objects that are this",
    "start": "4646710",
    "end": "4653580"
  },
  {
    "text": "far apart, you can tell that\nthey are two objects sort of,",
    "start": "4653580",
    "end": "4658770"
  },
  {
    "text": "because the second object-- its blob would be\nsomething like that.",
    "start": "4658770",
    "end": "4666090"
  },
  {
    "text": "And it's kind of\nobviously arbitrary. But it's a useful\nnumber to have in mind.",
    "start": "4666090",
    "end": "4671520"
  },
  {
    "text": "OK, so that's sort of neat. And it leads to\nsomething else, which",
    "start": "4671520",
    "end": "4678289"
  },
  {
    "text": "is the Fourier transform\nis symmetrical, pretty much, forward and back.",
    "start": "4678290",
    "end": "4685470"
  },
  {
    "text": "So here, we've taken the-- let's see. We've taken the inverse\nFourier transform of something",
    "start": "4685470",
    "end": "4690619"
  },
  {
    "text": "in the frequency domain. And we've got this\nBessel function thing.",
    "start": "4690620",
    "end": "4697219"
  },
  {
    "text": "Now, when we're\ntalking about defocus, we were talking about\npillboxes basically.",
    "start": "4697220",
    "end": "4704219"
  },
  {
    "text": "So let's do that. And now, that's in\nthe spatial domain. We said that if your\nimage is out of focus,",
    "start": "4704220",
    "end": "4710450"
  },
  {
    "text": "you're convolving with a pillbox\nin the spatial domain, right?",
    "start": "4710450",
    "end": "4720600"
  },
  {
    "text": "Remember, we had the lens. And the lens brought\nlight to a focus.",
    "start": "4720600",
    "end": "4726099"
  },
  {
    "text": "And unfortunately, our image\nplane was in the wrong place. So we cut that cone of light.",
    "start": "4726100",
    "end": "4731370"
  },
  {
    "text": "And we then get a\npattern like this. And the radius depends on how\nbadly we are out of focus.",
    "start": "4731370",
    "end": "4740430"
  },
  {
    "text": "Let's call it R. Now, this time, the value\ninside here is not 1.",
    "start": "4740430",
    "end": "4750090"
  },
  {
    "text": "It's 1 over pi R squared. Why? Well, I want the\nintegral to be 1,",
    "start": "4750090",
    "end": "4756360"
  },
  {
    "text": "because basically,\nall the energy that used to come\nto this point is now spread out over this area.",
    "start": "4756360",
    "end": "4762100"
  },
  {
    "text": "And if I go more\nout of focus, it's spread out over a larger area. So I should really\nnormalize to that area.",
    "start": "4762100",
    "end": "4769590"
  },
  {
    "text": "Now, because of the symmetry\nof the Fourier transform, we can pretty much\njust write down",
    "start": "4769590",
    "end": "4774660"
  },
  {
    "text": "the answer, because if the\npillbox in the frequency domain",
    "start": "4774660",
    "end": "4779730"
  },
  {
    "text": "turns into that Bessel functions\nthing in the spatial domain, then a pillbox in\nthe spatial domain should turn into\nthat Bessel functions",
    "start": "4779730",
    "end": "4786520"
  },
  {
    "text": "thing in the frequency domain. ",
    "start": "4786520",
    "end": "4797500"
  },
  {
    "text": "So that's very important. This is what defocusing does. ",
    "start": "4797500",
    "end": "4807829"
  },
  {
    "text": "OK, and you can see\nthat we have a decrease",
    "start": "4807830",
    "end": "4814010"
  },
  {
    "text": "of high-frequency content. But also, we actually kill some\nfrequencies completely, right,",
    "start": "4814010",
    "end": "4819079"
  },
  {
    "text": "because of these zeros. So if I were to plot the\nenergy in the frequency domain,",
    "start": "4819080",
    "end": "4826699"
  },
  {
    "text": "I would expect to see an\narea, where it's actually 0,",
    "start": "4826700",
    "end": "4833360"
  },
  {
    "text": "and another area, where\nit's actually 0 and so on. And this works.",
    "start": "4833360",
    "end": "4840070"
  },
  {
    "text": "So we had a Euro student take\na DSLR and take pictures of--",
    "start": "4840070",
    "end": "4847460"
  },
  {
    "text": "I don't know if-- the memorial to the fallen\nin the center of building 10.",
    "start": "4847460",
    "end": "4853660"
  },
  {
    "text": "And then he\ncommanded-- now, this is a Canon that allows\nyou to control the lens.",
    "start": "4853660",
    "end": "4859990"
  },
  {
    "text": "So he commanded the\nlens to take a step, took another picture, commanded\nthe lens to take a step,",
    "start": "4859990",
    "end": "4866520"
  },
  {
    "text": "took another picture. And so he got a whole\nstack of pictures that are in different\ndegrees of defocus.",
    "start": "4866520",
    "end": "4875520"
  },
  {
    "text": "And one of them is\npretty much in focus. Now, unfortunately,\nCanon doesn't tell you",
    "start": "4875520",
    "end": "4882150"
  },
  {
    "text": "how big the step is. So part of his exercise\nwas, can you figure out",
    "start": "4882150",
    "end": "4888030"
  },
  {
    "text": "what the step size is? Well, you can if\nyou can figure out how big these pillboxes are.",
    "start": "4888030",
    "end": "4893190"
  },
  {
    "text": "And how did he do that? Well, he looked at\nthe frequency domain.",
    "start": "4893190",
    "end": "4898380"
  },
  {
    "text": "And in the frequency\ndomain, once you know where this ring of\nzeros is, you're done.",
    "start": "4898380",
    "end": "4905650"
  },
  {
    "text": "You can calculate the radius. You can calculate\nR. And so he was able to determine how R changed\nas he incremented the lens",
    "start": "4905650",
    "end": "4915150"
  },
  {
    "text": "position. And then knowing the\naperture of the lens, he could calculate\nthe step size.",
    "start": "4915150",
    "end": "4920460"
  },
  {
    "text": "And OK, well, it's\nnot quite that simple,",
    "start": "4920460",
    "end": "4928210"
  },
  {
    "text": "because there's noise. So it's not like\nyou can actually expect this to be exactly 0.",
    "start": "4928210",
    "end": "4933760"
  },
  {
    "text": "But if you just plot\nthis as a picture, you look at it as a picture,\nthere's a dark, dark ring.",
    "start": "4933760",
    "end": "4939982"
  },
  {
    "text": "And then there's\nanother dark ring. And then you can eyeball it. There's another effect, which\nis that in an ideal lens,",
    "start": "4939982",
    "end": "4948940"
  },
  {
    "text": "this is exactly what\nwe would expect to get. But in practice,\nas we mentioned,",
    "start": "4948940",
    "end": "4953980"
  },
  {
    "text": "lenses always have\nsome compromise between different problems--",
    "start": "4953980",
    "end": "4960340"
  },
  {
    "text": "chromatic aberrations,\nspherical aberration, astigmatism, and so on. So the actual point spread\nfunction isn't a pillbox",
    "start": "4960340",
    "end": "4970950"
  },
  {
    "text": "like I've drawn it over there. It's a little different. And that was part\nof the exercise.",
    "start": "4970950",
    "end": "4977050"
  },
  {
    "text": "Find out how that changes. And interestingly enough,\nit's different below focus",
    "start": "4977050",
    "end": "4982510"
  },
  {
    "text": "than above correct focus. So in our ideal\nmodel, of course, you would expect exactly\nthe same defocus effect",
    "start": "4982510",
    "end": "4990370"
  },
  {
    "text": "if your epsilon\nbelow perfect focus than when your epsilon\nabove perfect focus. And in practice, that's\nnot quite the case.",
    "start": "4990370",
    "end": "4997990"
  },
  {
    "text": "If you look at the cross-section\nof the pillbox instead of-- this is the ideal pillbox\ncross-section, of course.",
    "start": "4997990",
    "end": "5004739"
  },
  {
    "text": "And if you look at it\non one side of defocus, it's more concentrated near\nthe edges and not so much.",
    "start": "5004740",
    "end": "5013290"
  },
  {
    "text": "I mean, for a start, it's\nnot a perfect step edge. And then on the other\nside of defocus,",
    "start": "5013290",
    "end": "5018870"
  },
  {
    "text": "it looked more like that. So you could imagine that\nthat led to some difficulty",
    "start": "5018870",
    "end": "5025950"
  },
  {
    "text": "in actually\nimplementing this idea. But it's a first approximation.",
    "start": "5025950",
    "end": "5034120"
  },
  {
    "text": "So here's an interesting idea. Suppose that you get a picture. And you want to know\nwhether it's the original",
    "start": "5034120",
    "end": "5043120"
  },
  {
    "text": "or whether someone printed\nit out and then took a photograph of that.",
    "start": "5043120",
    "end": "5049700"
  },
  {
    "text": "And we'll get back to\nthat in another way. I mean, one of the\nthings that happens is that we get\nperspective projection.",
    "start": "5049700",
    "end": "5056390"
  },
  {
    "text": "So we print it out. Now, we take the camera. We get perspective\nprojection again-- is the effect of two perspective\nprojections in sequence.",
    "start": "5056390",
    "end": "5064400"
  },
  {
    "text": "It's the same as a single\nperspective projection. And it turns out it isn't.",
    "start": "5064400",
    "end": "5070010"
  },
  {
    "text": "So you can tell, as\nwe'll see, that there's",
    "start": "5070010",
    "end": "5075260"
  },
  {
    "text": "been some cheating going\non, that someone modified the picture and took\nanother picture of it. But here's another way.",
    "start": "5075260",
    "end": "5080900"
  },
  {
    "text": "Suppose that it's\nslightly out of focus. And then you take a\nslightly out of focus picture of that slightly\nout of focus picture.",
    "start": "5080900",
    "end": "5088070"
  },
  {
    "text": "Is that equivalent to\ntaking a picture that is more out of focus, like the\nsum of the two out of focus",
    "start": "5088070",
    "end": "5094550"
  },
  {
    "text": "values? And so what are we doing? We're convolving with the\npoint spread function,",
    "start": "5094550",
    "end": "5101850"
  },
  {
    "text": "which is this pillbox once. Take the result. And\nthen we convolve again",
    "start": "5101850",
    "end": "5108469"
  },
  {
    "text": "with the pillbox. And that's equivalent\nto multiplying by that",
    "start": "5108470",
    "end": "5116830"
  },
  {
    "text": "and then multiplying\nby that, right,",
    "start": "5116830",
    "end": "5124370"
  },
  {
    "text": "because convolution\nin the spatial domain corresponds to multiplication\nin the frequency domain. And this is not--",
    "start": "5124370",
    "end": "5131030"
  },
  {
    "text": "this product is not\nequivalent to J over something for any value of\nR. Or if you just",
    "start": "5131030",
    "end": "5137780"
  },
  {
    "text": "look at the frequency\ndomain, if you pass it through both of\nthese operations,",
    "start": "5137780",
    "end": "5142970"
  },
  {
    "text": "you will lose all of\nthese frequencies. But you will also lose\nall of the frequencies",
    "start": "5142970",
    "end": "5148160"
  },
  {
    "text": "of the other operation,\nwhich could be here. So it might not be trivial\nto use this method.",
    "start": "5148160",
    "end": "5156050"
  },
  {
    "text": "But conceptually,\nat least, there is a difference between\na defocused picture",
    "start": "5156050",
    "end": "5161900"
  },
  {
    "text": "of a defocused picture and\nany single defocus step.",
    "start": "5161900",
    "end": "5167360"
  },
  {
    "text": "And you should be able to\ntell that something fishy is going on. So oh, OK.",
    "start": "5167360",
    "end": "5175410"
  },
  {
    "text": "So just a note-- so I didn't say a\nlot about the patent, because I thought it'd be\nmore important to understand",
    "start": "5175410",
    "end": "5181880"
  },
  {
    "text": "the linear systems\ntheory behind it. And when we're done with that\nwhat we're going to do next",
    "start": "5181880",
    "end": "5189020"
  },
  {
    "text": "is photogrammetry. Photogrammetry is about using\nimages to take measurements.",
    "start": "5189020",
    "end": "5195230"
  },
  {
    "text": "And it was an early\napplication of photography. You send someone up in\nthe hot air balloon.",
    "start": "5195230",
    "end": "5202160"
  },
  {
    "text": "And he takes a picture. And maybe he takes a picture\nfrom a different position. And then you can create a map.",
    "start": "5202160",
    "end": "5209600"
  },
  {
    "text": "You can actually get\nthree-dimensional information. So we'll be talking about\nusing images to create,",
    "start": "5209600",
    "end": "5217940"
  },
  {
    "text": "particularly, 3D information. So it's kind of going up. We've been working most\nof this time at what some",
    "start": "5217940",
    "end": "5225500"
  },
  {
    "text": "might consider very low level. We're dealing with pixels, gray\nlevels, radiance, irradiance,",
    "start": "5225500",
    "end": "5232430"
  },
  {
    "text": "and so on. So now, we're going up. So we will assume that\nwe know how to get",
    "start": "5232430",
    "end": "5238460"
  },
  {
    "text": "certain features, like edges. And then we're going to try and\nmatch them up between images",
    "start": "5238460",
    "end": "5246110"
  },
  {
    "text": "in order to get\ninformation about where the camera was and\ninformation about the objects.",
    "start": "5246110",
    "end": "5253460"
  },
  {
    "text": "So OK. ",
    "start": "5253460",
    "end": "5260000"
  }
]