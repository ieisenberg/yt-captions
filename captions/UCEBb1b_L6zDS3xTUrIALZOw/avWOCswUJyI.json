[
  {
    "start": "0",
    "end": "22000"
  },
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "7070"
  },
  {
    "text": "continue to offer high-quality\neducational resources for free. To make a donation or to\nview additional materials",
    "start": "7070",
    "end": "13730"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw@mit.edu. ",
    "start": "13730",
    "end": "21860"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: I'll\nstart today with an animation. I think most of\nyou have seen this.",
    "start": "21860",
    "end": "28670"
  },
  {
    "start": "22000",
    "end": "250000"
  },
  {
    "text": "Raise your hand if you haven't. So some of you have not. OK.",
    "start": "28670",
    "end": "34140"
  },
  {
    "text": "So I'm going to just play it. This is London. And you're going to\nsee different colors.",
    "start": "34140",
    "end": "41649"
  },
  {
    "start": "41650",
    "end": "47880"
  },
  {
    "text": "There's a legend right here\non this corner, lower left. And blue stands\nfor some cardholder",
    "start": "47880",
    "end": "58789"
  },
  {
    "text": "in the London system that\nhas not yet been [AUDIO OUT]",
    "start": "58790",
    "end": "65990"
  },
  {
    "text": "or it's after the last\ntime that person was seen. So it's a proxy for\nhome, essentially.",
    "start": "65990",
    "end": "75270"
  },
  {
    "text": "Bright green is going to\nbe a proxy for travel. Not a proxy, it's going to mean\nthat this card is currently",
    "start": "75270",
    "end": "83700"
  },
  {
    "text": "in the TFL system in a bus\nride or in a train somewhere.",
    "start": "83700",
    "end": "89399"
  },
  {
    "text": "And then red will show anything\nbetween trips that day.",
    "start": "89400",
    "end": "99570"
  },
  {
    "text": "So that's a proxy for work. Or it could be a\nproxy for shopping, or restaurants, or\nanything between travel.",
    "start": "99570",
    "end": "108870"
  },
  {
    "text": "So after the last\ntrip is completed, and before the last trip ends. So I'm just going to play this.",
    "start": "108870",
    "end": "115500"
  },
  {
    "text": "And hopefully this will\nmotivate the discussion, the rest of the lecture. So you can see the\ntime at the bottom.",
    "start": "115500",
    "end": "124030"
  },
  {
    "text": "Sorry. So you see the morning rush, and\nthen people starting to work,",
    "start": "124030",
    "end": "131310"
  },
  {
    "text": "so it turns red. That means most people\nare between trips.",
    "start": "131310",
    "end": "137442"
  },
  {
    "text": "You see a lot of\nbuzz in the middle of the city, middle of the day. And then as we approach\nthe afternoon peak,",
    "start": "137442",
    "end": "143400"
  },
  {
    "text": "you start seeing\nmore green activity, starting from the\ncenter, going out.",
    "start": "143400",
    "end": "148750"
  },
  {
    "text": " And then some blue as\npeople reach their homes",
    "start": "148750",
    "end": "154580"
  },
  {
    "text": "and won't travel again that day. Still a lot of activity in\nsome centers, especially",
    "start": "154580",
    "end": "162470"
  },
  {
    "text": "in the center of London,\na lot of travel still. And then past midnight,\nyou sort of see Soho,",
    "start": "162470",
    "end": "168590"
  },
  {
    "text": "so you know where to\nhang out in London. OK? OK.",
    "start": "168590",
    "end": "174200"
  },
  {
    "text": "So before we continue, any\nquestions about that video?",
    "start": "174200",
    "end": "181440"
  },
  {
    "text": "AUDIENCE: Yeah, it seemed\nto me that some of the dots were actually not\nmoving along the lines.",
    "start": "181440",
    "end": "187954"
  },
  {
    "text": "Is that deliberate? GABRIEL SANCHEZ-MARTINEZ:\nSo yeah. In this video-- AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ:\n--there are multiple ways-- AUDIENCE: --magnitude?",
    "start": "187954",
    "end": "193400"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: Yeah. So there are multiple ways of\ngenerating this visualization. And the one that my\ncolleague used to make this--",
    "start": "193400",
    "end": "201930"
  },
  {
    "text": "and by the way,\nthis video was made by my colleague, Jay Gordon. You'll see in the last slide,\nthe references to his papers",
    "start": "201930",
    "end": "208750"
  },
  {
    "text": "and to the website with\na link to the video. So yeah, for each stage--",
    "start": "208750",
    "end": "216560"
  },
  {
    "text": "and we'll talk about\nwhat the stage is. For each of these\ntrips, for now, you",
    "start": "216560",
    "end": "221710"
  },
  {
    "text": "could do it a straight line or\nyou could really interpolate geographically along the line. And in some aspects,\nthe straight line one",
    "start": "221710",
    "end": "230820"
  },
  {
    "text": "is showing isochromes almost. So it's easier to understand,\nvisually, the OD pairs",
    "start": "230820",
    "end": "239170"
  },
  {
    "text": "when you do it that way. But both have value. And you could look\nat it both ways.",
    "start": "239170",
    "end": "244780"
  },
  {
    "text": "Any other questions about\nthis animation visualization? ",
    "start": "244780",
    "end": "252590"
  },
  {
    "start": "250000",
    "end": "500000"
  },
  {
    "text": "OK. AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ: Yeah. Let's talk about\nhow we made that.",
    "start": "252590",
    "end": "258829"
  },
  {
    "text": "And so what goes into\ncreating this visualization, and what data was used for it.",
    "start": "258829",
    "end": "265570"
  },
  {
    "text": "So today's lecture is on\norigin destination and transfer inference.",
    "start": "265570",
    "end": "271220"
  },
  {
    "text": "We abbreviate that ODX, O for\norigin, D for destination, X being more graphical, two\nlines crossing in the middle.",
    "start": "271220",
    "end": "279949"
  },
  {
    "text": "So your opportunity to\ntransfer or interchange. And if we use the British\nterm for transfers,",
    "start": "279950",
    "end": "286550"
  },
  {
    "text": "that would be interchange. So what's common in\nall of these methods",
    "start": "286550",
    "end": "292344"
  },
  {
    "text": "is that we're going to\nbe basing these methods on automatically-collected data. So we're going to\nbe using AFC, AVL,",
    "start": "292344",
    "end": "298400"
  },
  {
    "text": "APC, instead of manual surveys. There are ways of estimating\norigin destination matrices",
    "start": "298400",
    "end": "303710"
  },
  {
    "text": "in the traditional way,\nwith manual surveys. You go out, and you distribute\ncolored cards and collect them,",
    "start": "303710",
    "end": "310910"
  },
  {
    "text": "and you can do this. So a little bit about that\nwhen we talk about surveys",
    "start": "310910",
    "end": "317360"
  },
  {
    "text": "and survey planning. ",
    "start": "317360",
    "end": "322509"
  },
  {
    "text": "Some of these methods can be\nused to infer destinations in open systems. So open systems are\nlike the bus and rail,",
    "start": "322509",
    "end": "329240"
  },
  {
    "text": "here in Boston, where you tap\nin, but you don't tap out.",
    "start": "329240",
    "end": "334759"
  },
  {
    "text": "If you look at the rail system\nin London or in Washington DC, that's a closed system,\nwhere you tap in and tap out.",
    "start": "334760",
    "end": "342830"
  },
  {
    "text": "And therefore, the\nOD pair for each trip is given in that\npart of the system.",
    "start": "342830",
    "end": "348050"
  },
  {
    "text": "It also infers transfers. So we'll talk about\nwhy this is important.",
    "start": "348050",
    "end": "353630"
  },
  {
    "text": "One of the caveats\nof these methods is that they only look at the\ncurrent public transportation demand.",
    "start": "353630",
    "end": "359250"
  },
  {
    "text": "So if you want a model of all of\nthe demand that could be there,",
    "start": "359250",
    "end": "364550"
  },
  {
    "text": "the latent demand included,\nthis does not look at that. So just be aware.",
    "start": "364550",
    "end": "370449"
  },
  {
    "text": "And also, specifically, one\nof the models we will look at,",
    "start": "370450",
    "end": "375860"
  },
  {
    "text": "it can't infer destinations\nfor every transaction. Some of that makes sense. If you see a card\nonly one time a day,",
    "start": "375860",
    "end": "382480"
  },
  {
    "text": "then you don't necessarily\nhave information to infer destination\nor transfers.",
    "start": "382480",
    "end": "388520"
  },
  {
    "text": "That also happens with\ncash transactions, which cannot be tracked\nusing a smart card.",
    "start": "388520",
    "end": "395000"
  },
  {
    "text": "There's fare evasion. So some people might\njump into a bus and not interact\nwith the fare system,",
    "start": "395000",
    "end": "400220"
  },
  {
    "text": "so we can't capture\nthat directly. And then there's\ntrips on other modes. So part of the logic applying\nto destinations and transfers",
    "start": "400220",
    "end": "409400"
  },
  {
    "text": "will, essentially, assume that\nthe people are mostly traveling",
    "start": "409400",
    "end": "414576"
  },
  {
    "text": "with public transportation. And they're not going to\ntake Uber or a long bike ride in between. So we will look at\nthat more in detail.",
    "start": "414576",
    "end": "422210"
  },
  {
    "text": "Most of these methods have\nbeen validated with surveys, with good results. And they need to be scaled\nup because they don't",
    "start": "422210",
    "end": "429560"
  },
  {
    "text": "make inferences for every card. If you want the full demand,\nyou need to scale it up to the full demand. We'll talk about scaling.",
    "start": "429560",
    "end": "436160"
  },
  {
    "text": "Questions? AUDIENCE: [INAUDIBLE] but\nwith London, fare evasion, that's not a big problem, right?",
    "start": "436160",
    "end": "444666"
  },
  {
    "text": "Or is-- GABRIEL SANCHEZ-MARTINEZ:\nI don't know. I don't know. AUDIENCE: All right. GABRIEL\nSANCHEZ-MARTINEZ: I don't",
    "start": "444666",
    "end": "449839"
  },
  {
    "text": "have information about that.  So it could be fare\nevasion, or it could be--",
    "start": "449839",
    "end": "455880"
  },
  {
    "text": "you might have a pass\nand hop onto the bus, and technically, it\nwouldn't be fare evasion. But it is non-interaction,\nso that would still",
    "start": "455880",
    "end": "464069"
  },
  {
    "text": "be counted here as fare evasion. AUDIENCE: The more open\na system, the more people will manage to evade.",
    "start": "464070",
    "end": "470400"
  },
  {
    "text": "So I saw a number, then,\nthe Boston commuter rail, they estimate 14%. GABRIEL SANCHEZ-MARTINEZ: Yeah. AUDIENCE: Yeah, that\nnumber's a lie, but yes.",
    "start": "470400",
    "end": "476310"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nBut that's-- AUDIENCE: --a lot or-- AUDIENCE: Yeah, 70% of people\npay with a pass, so it's-- GABRIEL SANCHEZ-MARTINEZ: Right.",
    "start": "476310",
    "end": "481843"
  },
  {
    "text": "So there, they are using\nfare evasion more overtly. It is high, though, because\nthe train attendants",
    "start": "481843",
    "end": "487770"
  },
  {
    "text": "don't manage to collect\ntickets from everyone. And there are ways to\ngame the system, where",
    "start": "487770",
    "end": "492859"
  },
  {
    "text": "you can activate a ticket\nonly if the fare inspector is approaching you. So that's a flaw in the system.",
    "start": "492859",
    "end": "498419"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ: Yeah. So more generally, when we talk\nabout data collection systems--",
    "start": "498420",
    "end": "506669"
  },
  {
    "start": "500000",
    "end": "595000"
  },
  {
    "text": "we've seen the key\nones, AVL, AFC, APC. I think we're all familiar\nwith how these look.",
    "start": "506670",
    "end": "511890"
  },
  {
    "text": "Does anybody have questions on\nany of these systems right now? You were looking at some\ndata in your homework.",
    "start": "511890",
    "end": "517262"
  },
  {
    "text": "Do you have a question? AUDIENCE: No. GABRIEL SANCHEZ-MARTINEZ: OK. So they can be used\nfor many things.",
    "start": "517262",
    "end": "522780"
  },
  {
    "text": "And so if you look\nat supply and demand, they both produce\nautomatically-collected data.",
    "start": "522780",
    "end": "529350"
  },
  {
    "text": "So on the demand side, we\nhave the fare transactions of the AFC system.",
    "start": "529350",
    "end": "534360"
  },
  {
    "text": "On the supply side,\nyou have the vehicle tracking with AVL system. You have APC as well.",
    "start": "534360",
    "end": "540060"
  },
  {
    "text": "So they can be sent to some\nserver or data warehouse",
    "start": "540060",
    "end": "545370"
  },
  {
    "text": "and used for many things. It could be used for\noffline functions. So performance\nmeasurement is one example",
    "start": "545370",
    "end": "551339"
  },
  {
    "text": "of that, where you want\nto measure reliability, running times, et cetera. It could be used for service\nand operations planning.",
    "start": "551340",
    "end": "558510"
  },
  {
    "text": "And then it can also\nbe used in real-time. So you could use some\nof this information to generate customer\ninformation, which feeds back",
    "start": "558510",
    "end": "564960"
  },
  {
    "text": "to demand. You could send alerts\nsaying the trains are being delayed right now. Expect a longer wait.",
    "start": "564960",
    "end": "571170"
  },
  {
    "text": "And that could, in\nfact, influence demand. It could make some people\nnot take a particular trip",
    "start": "571170",
    "end": "578580"
  },
  {
    "text": "or wait if they get\nit on their phone. And then on the supply\nside, the information",
    "start": "578580",
    "end": "584610"
  },
  {
    "text": "can be used to control service. So you might actually\naffect supply by changing the departure times.",
    "start": "584610",
    "end": "591089"
  },
  {
    "text": "And that would affect\nthe data that is being generated from the supply side. So there's a feedback loop. In this lecture, we\nwill focus on only one",
    "start": "591090",
    "end": "600060"
  },
  {
    "start": "595000",
    "end": "861000"
  },
  {
    "text": "aspect of this\nframework, and that is origin destination matrices. Origin destination\nmatrices [AUDIO OUT]",
    "start": "600060",
    "end": "605820"
  },
  {
    "text": "one of the key inputs\nto service planning. They are the key demand\ninput to service planning.",
    "start": "605820",
    "end": "611520"
  },
  {
    "text": "You need them to figure out\nwhere people want to go. And it's just the\ndata that expresses",
    "start": "611520",
    "end": "617970"
  },
  {
    "text": "where people want to go. And you should try\nto design your system to match that demand.",
    "start": "617970",
    "end": "624180"
  },
  {
    "text": "So it used to be that we\nhad to use manual surveys.",
    "start": "624180",
    "end": "629250"
  },
  {
    "text": "They were expensive. They didn't cover all the\ntimes or places very well.",
    "start": "629250",
    "end": "635630"
  },
  {
    "text": "And now, with all\nthese automated data collection systems, we can infer\nsome of the origin destination matrices from the data.",
    "start": "635630",
    "end": "642060"
  },
  {
    "text": "And that's what we\nwant to understand. How does it happen? What can we do? How can we do it?",
    "start": "642060",
    "end": "647250"
  },
  {
    "text": "So OD matrix estimation can\nhappen at different levels.",
    "start": "647250",
    "end": "652410"
  },
  {
    "text": "One way of looking at it\nis to think about route level versus network level. So route level, we're\ntalking about one bus line.",
    "start": "652410",
    "end": "659600"
  },
  {
    "text": "And we want to look up the\ntrips made in the one bus line and understand where\npeople get on and off.",
    "start": "659600",
    "end": "665960"
  },
  {
    "text": "That's route level. So if you have two routes\nhere, route one, route two, we might notice or\nestimate that a person",
    "start": "665960",
    "end": "672920"
  },
  {
    "text": "boards here and alights here. Some of the people\ndoing that OD pair",
    "start": "672920",
    "end": "679400"
  },
  {
    "text": "may, in fact,\ncontinue on route two. They might transfer\nto route two. So what's the drawback?",
    "start": "679400",
    "end": "685940"
  },
  {
    "text": "Or why would it be\nimportant to know the transfer to route two and\nthe destination on route two?",
    "start": "685940",
    "end": "692209"
  },
  {
    "start": "692210",
    "end": "698135"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ:\nOr is it irrelevant? Is it just cool? Or-- AUDIENCE: Maybe the\ndestination of the route two",
    "start": "698135",
    "end": "704840"
  },
  {
    "text": "is the real destination\nof the person's trips",
    "start": "704840",
    "end": "710260"
  },
  {
    "text": "because if he goes\nto work, for example, the work will be at the\nend of the route two.",
    "start": "710260",
    "end": "715917"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: Right. So the real destination, the\nplace where the person actually wants to go, might be on the\ndestination route two, and not",
    "start": "715917",
    "end": "722138"
  },
  {
    "text": "on the destination at route one. So this might be-- the only reason why the\nperson is alighting there",
    "start": "722138",
    "end": "733120"
  },
  {
    "text": "is because that's\nthe only way-- that's sort of a function of the\nnetwork of the supply you provide. So if there were a direct\nroute from the first origin",
    "start": "733120",
    "end": "741210"
  },
  {
    "text": "to the last destination,\nperhaps they would prefer that. And for service\nplanning, you want to know what people want to do.",
    "start": "741210",
    "end": "747700"
  },
  {
    "text": "That's what demand is. So we want network level. So we go from unlinked\ntrips to linked trips.",
    "start": "747700",
    "end": "755620"
  },
  {
    "text": "That's part of\nwhat we want to do. At the network level, we\nare looking at all the buses and the rail system.",
    "start": "755620",
    "end": "762220"
  },
  {
    "text": "So again, that's\nwhat we want to do. We'll look at both kinds\nof OD matrix estimation",
    "start": "762220",
    "end": "768050"
  },
  {
    "text": "in this lecture. Let's start with one\nof the simpler cases. Consider a bus having\nAPC and only APC.",
    "start": "768050",
    "end": "776830"
  },
  {
    "text": "So APC data looks like this. You have timestamps,\nyou have a bus ID, you have a route ID, a\ntrip ID, some information",
    "start": "776830",
    "end": "783820"
  },
  {
    "text": "about direction,\nperhaps, and then counts at each stop of\nhow many people get on",
    "start": "783820",
    "end": "788950"
  },
  {
    "text": "and how many people get off,\nboardings and alightings. And, of course, a stop\nID, or a stop name,",
    "start": "788950",
    "end": "794320"
  },
  {
    "text": "or something like that. So you can aggregate that across\ntrips or do it at a trip level,",
    "start": "794320",
    "end": "801250"
  },
  {
    "text": "and count how many people\nget on at each stop, and how many people\nget off at each stop. These are called control totals\nin the context of scaling.",
    "start": "801250",
    "end": "809680"
  },
  {
    "text": "So you might be aggregating\nacross days, for example, for a 30-minute\nperiod, and count",
    "start": "809680",
    "end": "816790"
  },
  {
    "text": "how many people are\ngetting on at each stop and getting off at each stop. And then what we\nwant to estimate,",
    "start": "816790",
    "end": "825040"
  },
  {
    "text": "knowing how many people get\non and off at each stop, is the origin\ndestination matrix. That is the cells\ninside of this matrix",
    "start": "825040",
    "end": "832540"
  },
  {
    "text": "saying how many people get on at\nstop one and off at stop three. We're showing here, 10.",
    "start": "832540",
    "end": "838779"
  },
  {
    "text": "Now you may notice that\nthe matrix here, it doesn't necessarily match the totals.",
    "start": "838780",
    "end": "846459"
  },
  {
    "text": "So here we have 35 and\n237, and the target is 40. So we have to scale\nit up a little bit.",
    "start": "846460",
    "end": "853780"
  },
  {
    "text": "Here, we have 30 people\ngetting off at stop two, and we only have 25. So that number is wrong.",
    "start": "853780",
    "end": "858820"
  },
  {
    "text": "We need to scale up. So what we're going\nto look at now is a procedure called iterative\nproportional fitting that",
    "start": "858820",
    "end": "865480"
  },
  {
    "start": "861000",
    "end": "1268000"
  },
  {
    "text": "estimates, given some control\ntotals, what the origin destination matrix is.",
    "start": "865480",
    "end": "872050"
  },
  {
    "text": "This is known as biproportional\nfitting or matrix scaling as well. And we start with some initial\nmatrix or some seed matrix",
    "start": "872050",
    "end": "881980"
  },
  {
    "text": "here in the center. The value of that seed\nmatrix is important. It affects the solution.",
    "start": "881980",
    "end": "887529"
  },
  {
    "text": "So having an\naccurate seed matrix improves the accuracy\nof the final estimate. If you don't have\nan idea, then you",
    "start": "887530",
    "end": "894790"
  },
  {
    "text": "could certainly initialize\nthat seed matrix with all ones, and it will produce an output.",
    "start": "894790",
    "end": "900850"
  },
  {
    "text": "But it may not be the best\noutput or the most accurate result. So it has been shown that\nif all the values provided",
    "start": "900850",
    "end": "910890"
  },
  {
    "text": "in the matrix are\nstrictly positive-- and here I am excluding what\nwe call structural zeros, so",
    "start": "910890",
    "end": "918750"
  },
  {
    "text": "all the cells in which people\ncould actually be traveling.",
    "start": "918750",
    "end": "923880"
  },
  {
    "text": "Here we are showing a route\nwith four stops, A, B, C, D.",
    "start": "923880",
    "end": "944460"
  },
  {
    "text": "And we have a matrix\nshowing how many people go from A to B, from A to C, from A\nto D, from B to C, from B to C,",
    "start": "944460",
    "end": "950790"
  },
  {
    "text": "and from C to D. Those are the only\npossible OD pairs. Nobody is going to go from A to\nA because that's the same stop,",
    "start": "950790",
    "end": "958230"
  },
  {
    "text": "so that's not a valid trip. And we're only looking\nat one direction, so anything below\nthat diagonal would",
    "start": "958230",
    "end": "963540"
  },
  {
    "text": "be in the opposite direction. And we're not including\nit in this example. ",
    "start": "963540",
    "end": "970620"
  },
  {
    "text": "So what we want to do is start\noff with adding up each row, adding up each column, so\nwe have total alightings",
    "start": "970620",
    "end": "976987"
  },
  {
    "text": "and total boardings. I want them to match boardings,\nand match target alightings, or the control totals.",
    "start": "976987",
    "end": "982770"
  },
  {
    "text": "Questions? AUDIENCE: What are the\ncontrol totals again? ",
    "start": "982770",
    "end": "988125"
  },
  {
    "text": "GABRIEL\nSANCHEZ-MARTINEZ: They're counts of boardings and counts\nof alightings at each stop. And they can, in this\nexample, come from APC.",
    "start": "988125",
    "end": "995670"
  },
  {
    "text": "AUDIENCE: That's\nwhat come from APC. GABRIEL SANCHEZ-MARTINEZ:\nSo what we do, the algorithm",
    "start": "995670",
    "end": "1001930"
  },
  {
    "text": "for iterative\nproportional fitting, it calculates a scaling\nfactor for each row.",
    "start": "1001930",
    "end": "1007240"
  },
  {
    "text": "We start with rows. And we say, well we need\nto scale up everything",
    "start": "1007240",
    "end": "1013420"
  },
  {
    "text": "on the first row by 40 over\n3, so that that number adds up to 40.",
    "start": "1013420",
    "end": "1019660"
  },
  {
    "text": "And you calculate the\nscaling factor for each row and apply it to the\ncells in the matrix.",
    "start": "1019660",
    "end": "1026270"
  },
  {
    "text": "And of course, the sum\nof cells column-wise",
    "start": "1026270",
    "end": "1031920"
  },
  {
    "text": "is not going to add up\nto the target alightings. So the second step is to\napply the same procedure",
    "start": "1031920",
    "end": "1037709"
  },
  {
    "text": "on the columns. And now we realize,\nwell, we need to apply a scaling\nfactor of 30 over 13.3",
    "start": "1037710",
    "end": "1044730"
  },
  {
    "text": "to get B to add up to 30. And you do the same\nfor each column.",
    "start": "1044730",
    "end": "1050440"
  },
  {
    "text": "And now the columns\nsum up perfectly, but the rows don't anymore.",
    "start": "1050440",
    "end": "1056120"
  },
  {
    "text": "So now we go back and\nrepeat the process. And we go to the\nrows and the columns. ",
    "start": "1056120",
    "end": "1063850"
  },
  {
    "text": "I've put it in all the\nslides so you can actually repeat this in your spreadsheet\nprogram, if you want.",
    "start": "1063850",
    "end": "1071200"
  },
  {
    "text": "It has been shown that if\nall the non-structural values",
    "start": "1071200",
    "end": "1077399"
  },
  {
    "text": "of the cells in that\nmatrix are not zero, and then they are positive,\nthen it will converge.",
    "start": "1077400",
    "end": "1084000"
  },
  {
    "text": "And it will converge to the\nmaximum likelihood estimate, of the best possible\nestimate, given your seed",
    "start": "1084000",
    "end": "1090390"
  },
  {
    "text": "and given your control totals. So you can apply\nthis if you ever",
    "start": "1090390",
    "end": "1096450"
  },
  {
    "text": "have a situation where\nyou have control totals, but not the origin\ndestination matrix. And that's one example\nof-- that would",
    "start": "1096450",
    "end": "1102270"
  },
  {
    "text": "be having APC and nothing else. Any questions on this method?",
    "start": "1102270",
    "end": "1108110"
  },
  {
    "text": "We're to see it again in\na different application later in this lecture. AUDIENCE: Is it guaranteed to\nconverge to the correct value?",
    "start": "1108110",
    "end": "1115360"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nWell, what is correct? It may not be the\ntruth, if that's",
    "start": "1115360",
    "end": "1121899"
  },
  {
    "text": "what you mean by correct. So it's the best\nestimate of the truth, given the information provided.",
    "start": "1121900",
    "end": "1128126"
  },
  {
    "text": "AUDIENCE: How might it\nconverge to something that isn't correct? GABRIEL SANCHEZ-MARTINEZ: Your\nseed matrix might be wrong.",
    "start": "1128126",
    "end": "1134460"
  },
  {
    "text": "Or there might be aggregation\nerrors, for example. So if you start with all\nones, that's clearly not true.",
    "start": "1134460",
    "end": "1140820"
  },
  {
    "text": "And this is the best\npossible estimate, given your starting assumption\nthat all of the pairs are equally likely, and then\nadjusting from there, right?",
    "start": "1140820",
    "end": "1150090"
  },
  {
    "text": "And then I mentioned\nstructural zeros. So if you have a\nnon-structural zero,",
    "start": "1150090",
    "end": "1157080"
  },
  {
    "text": "say that with\nonboard survey, you collected OD demand only\nfor a couple of trips",
    "start": "1157080",
    "end": "1165090"
  },
  {
    "text": "and used that to\nseed the matrix. And let's say that first\nsome of these OD pairs, you didn't observe a single\nperson taking that trip.",
    "start": "1165090",
    "end": "1172815"
  },
  {
    "text": "So you say, well, in\nthe seed, I have a zero, but that's a non-structural\nzero because--",
    "start": "1172815",
    "end": "1179399"
  },
  {
    "text": "it is a structural zero, rather. So this value, some people\nmight be taking the OD pair.",
    "start": "1179400",
    "end": "1185540"
  },
  {
    "text": "And if you seed it\na zero, then you can't scale it up above zero. So in this case, you would\nnot converge necessarily.",
    "start": "1185540",
    "end": "1194970"
  },
  {
    "text": "And you certainly\nwould not converge to the maximum\nlikelihood estimate. OK?",
    "start": "1194970",
    "end": "1201347"
  },
  {
    "text": "AUDIENCE: I was going to ask how\nyou get a better seed matrix, but you-- GABRIEL SANCHEZ-MARTINEZ:\nSo with any kind-- we'll talk about\nother methods for ODX,",
    "start": "1201347",
    "end": "1210440"
  },
  {
    "text": "so for estimating origin\ndestination matrices. Manual surveys is one example.",
    "start": "1210440",
    "end": "1215929"
  },
  {
    "text": "Any knowledge that you have\nabout what OD pairs are busiest should help.",
    "start": "1215930",
    "end": "1221400"
  },
  {
    "text": "So you could do on-off counts\nwith the traditional way if the only thing\nyou have is this.",
    "start": "1221400",
    "end": "1228940"
  },
  {
    "text": "And we've talked about\nsurveys extensively. AUDIENCE: So just\nto [INAUDIBLE],, APC is the target\nboarding [INAUDIBLE]..",
    "start": "1228940",
    "end": "1235659"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: Yeah. So over some number of trips-- and this is a toy\nexample, clearly. Over some number of\ntrips, you counted",
    "start": "1235660",
    "end": "1242960"
  },
  {
    "text": "40 people boarding\nat A, and 30 people alighting at B, and so forth.",
    "start": "1242960",
    "end": "1248690"
  },
  {
    "text": "So you want the\ncells to match that. OK? So you could do this\nin Excel, or you",
    "start": "1248690",
    "end": "1254730"
  },
  {
    "text": "could write your own\nlittle function to do this. It amplifies errors\nin the seed matrix.",
    "start": "1254730",
    "end": "1261680"
  },
  {
    "text": "You're scaling\nup, so if you have errors in your seed matrix,\nthey will be scaled up too. Just be aware of that.",
    "start": "1261680",
    "end": "1267549"
  },
  {
    "text": "So what about if\nwe don't have APC? What if we only\nhave a AFC and AVL?",
    "start": "1267550",
    "end": "1273700"
  },
  {
    "start": "1268000",
    "end": "1414000"
  },
  {
    "text": "So now we don't\nhave control tools. AFC might give you boardings,\nbut not alightings.",
    "start": "1273700",
    "end": "1279039"
  },
  {
    "text": "So what are the ways of\nscaling up with that? You have different systems,\nand it depends on the system.",
    "start": "1279040",
    "end": "1285480"
  },
  {
    "text": "So if you look at TFL in London,\nwe said AFC there is closed, so the origin station pairs\nare given by the rail system",
    "start": "1285480",
    "end": "1292540"
  },
  {
    "text": "because people have\nto tap in and tap out. On bus, however,\npeople only tap in. So there, you would have to\napply this inference method.",
    "start": "1292540",
    "end": "1299350"
  },
  {
    "text": "Here in the MBTA, both\nbus and rail are open. You tap in. You don't tap out. So we have to infer\ndestinations in rail and in bus.",
    "start": "1299350",
    "end": "1307840"
  },
  {
    "text": "And then in some more\nadvanced systems, a lot of information, including\ntransfer information, is given.",
    "start": "1307840",
    "end": "1312860"
  },
  {
    "text": "Seoul is one example of that. AUDIENCE: How is that different? They-- AUDIENCE: They tap\nin [INAUDIBLE].. GABRIEL SANCHEZ-MARTINEZ:\nThey tap in between--",
    "start": "1312860",
    "end": "1318978"
  },
  {
    "text": "yeah. So that there's an\ninterchange tap.",
    "start": "1318978",
    "end": "1325142"
  },
  {
    "text": "AUDIENCE: They actually\nhave to tap out to leave-- GABRIEL SANCHEZ-MARTINEZ:\nAnd by the way, in some parts of London's\nnetwork, that is true.",
    "start": "1325142",
    "end": "1330940"
  },
  {
    "text": "You tap to prove that\nyou were transferring.",
    "start": "1330940",
    "end": "1336370"
  },
  {
    "text": "There might be a fare\nadvantage to doing that. So control totals.",
    "start": "1336370",
    "end": "1342840"
  },
  {
    "text": "So here in Boston, with the MBTA\nbuses, some portion of buses",
    "start": "1342840",
    "end": "1347970"
  },
  {
    "text": "have APC, but not all of them. So you could use the\nfirst method applied to only a fraction of\nvehicles and then scale up",
    "start": "1347970",
    "end": "1354870"
  },
  {
    "text": "to all vehicles. That's one possibility. Or you need something else.",
    "start": "1354870",
    "end": "1361890"
  },
  {
    "text": "In London, they don't have\nAPC, at least not widespread.",
    "start": "1361890",
    "end": "1366990"
  },
  {
    "text": "And they do have the\nticketing machine. So in theory,\ndrivers are supposed to push a button if somebody\nboards, and they don't tap.",
    "start": "1366990",
    "end": "1376050"
  },
  {
    "text": "Do they actually do it? Not clear to what\nextent the drivers",
    "start": "1376050",
    "end": "1381120"
  },
  {
    "text": "comply with that instruction. And then gates and rail gates.",
    "start": "1381120",
    "end": "1387800"
  },
  {
    "text": "So tapping in or out of\nthe subway system there, there's a counter. So it counts people\npassing through.",
    "start": "1387800",
    "end": "1393740"
  },
  {
    "text": "So if somebody goes in through\na gate and out some other place,",
    "start": "1393740",
    "end": "1400490"
  },
  {
    "text": "and we don't know\nexactly what they did, the total number of people\nat each node in the system",
    "start": "1400490",
    "end": "1408529"
  },
  {
    "text": "can be counted. And we can use that\ninformation to scale up. So we'll talk about that later.",
    "start": "1408530",
    "end": "1414170"
  },
  {
    "start": "1414000",
    "end": "1635000"
  },
  {
    "text": "So it depends on the context. Let's start with origin\ninference, the first letter in ODX is origin inference.",
    "start": "1414170",
    "end": "1421110"
  },
  {
    "text": "So we're looking at a bus,\nwhich has one stop and then",
    "start": "1421110",
    "end": "1426260"
  },
  {
    "text": "another stop. And if we match the AFC\ntransaction times to the AVL",
    "start": "1426260",
    "end": "1432410"
  },
  {
    "text": "stop visit times, we can put\nthem on the same timeline and realize, well,\nthere was a tap",
    "start": "1432410",
    "end": "1440060"
  },
  {
    "text": "right after that AVL system said\nthat the bus left that stop. It's very close,\nhowever, to that stop.",
    "start": "1440060",
    "end": "1446690"
  },
  {
    "text": "So let's assume that the tap-- maybe the bus pulled\nout and started moving, and the person was\nfinding the card.",
    "start": "1446690",
    "end": "1453410"
  },
  {
    "text": "But you still tap-- it\nif it's close enough, let's assign it to that stop.",
    "start": "1453410",
    "end": "1458864"
  },
  {
    "text": "AUDIENCE: Just a\nsecond, are there systems where the AFC is\nconnected to the AVL directly?",
    "start": "1458864",
    "end": "1465227"
  },
  {
    "text": "[INTERPOSING VOICES] GABRIEL SANCHEZ-MARTINEZ:\nAre there systems where the AFC\nconnected to the AVL? Yes. In London, they do that now. [INTERPOSING VOICES]",
    "start": "1465227",
    "end": "1470890"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nThey didn't when we started with this, but they do it now. AUDIENCE: Because I\nknow from the process that you and Neema\nwrote for Chicago, where",
    "start": "1470890",
    "end": "1477070"
  },
  {
    "text": "you had to connect the AFC to\nthe AVL, it was a headache.",
    "start": "1477070",
    "end": "1482600"
  },
  {
    "text": "But it seems to me like\nit shouldn't be that way. GABRIEL SANCHEZ-MARTINEZ:\nWell, remember these systems--",
    "start": "1482600",
    "end": "1488295"
  },
  {
    "text": "AUDIENCE: It should have\nan AV feeder into AFC. GABRIEL SANCHEZ-MARTINEZ: So\nit's starting to move that way, but none of these systems\nwere put in to capture data.",
    "start": "1488295",
    "end": "1496900"
  },
  {
    "text": "None of them. APC is the only one, actually. So APC was put in to\ncollect data and not",
    "start": "1496900",
    "end": "1502450"
  },
  {
    "text": "have to do all these surveys\nbecause that's expensive. But AFC was put in to\ncollect fares, and avoid",
    "start": "1502450",
    "end": "1511210"
  },
  {
    "text": "theft of fare revenue, and\nsimplify the duties of drivers,",
    "start": "1511210",
    "end": "1517510"
  },
  {
    "text": "improve safety. So there are many\nadvantages to it. Smart cards have the\nadvantage of having passes",
    "start": "1517510",
    "end": "1523940"
  },
  {
    "text": "and all these things, so many\nadvantages to an AFC system. AVL was for safety.",
    "start": "1523940",
    "end": "1530410"
  },
  {
    "text": "If there was an\nemergency on the bus, the driver could hit a\nbutton, and the police and the ambulances\ncould be dispatched",
    "start": "1530410",
    "end": "1536440"
  },
  {
    "text": "to the location of the bus. That's why it was started.",
    "start": "1536440",
    "end": "1541780"
  },
  {
    "text": "Later on, it started being\nused for management as well. Data collection of how many\nmiles of service you provided,",
    "start": "1541780",
    "end": "1549559"
  },
  {
    "text": "which is a requirement\nfor the NDT reporting. So aggregate level reporting. But none of these systems\nwere put in thinking,",
    "start": "1549560",
    "end": "1557830"
  },
  {
    "text": "oh, we're going to\nestimate origin destination matrices with them. So that's something that\nhas come after the fact.",
    "start": "1557830",
    "end": "1563600"
  },
  {
    "text": "Now that people are\nthinking about that, yes. We start seeing, can we\nhook up these two systems,",
    "start": "1563600",
    "end": "1569350"
  },
  {
    "text": "which might be from\ndifferent vendors, and make them talk\nto each other?",
    "start": "1569350",
    "end": "1574779"
  },
  {
    "text": "So London does that now. So if you see some tap that\nis very far away, in time,",
    "start": "1574780",
    "end": "1582290"
  },
  {
    "text": "from any stop, you might not\nbe able to infer the origin. If it's close or between the\nreported arrival and departure,",
    "start": "1582290",
    "end": "1592039"
  },
  {
    "text": "we match that transaction\nto that origin. Simple, right? So in London, we did that.",
    "start": "1592040",
    "end": "1599410"
  },
  {
    "text": "This is Jay Gordon's\nthesis, which is referenced in the last slide.",
    "start": "1599410",
    "end": "1604910"
  },
  {
    "text": "Looking at 10 weekdays. Oyster is the AFC\nsystem in London. And so 96% of boarding\nlocations were",
    "start": "1604910",
    "end": "1612150"
  },
  {
    "text": "inferred within plus\nor minus five minutes. And that was one of the\nthresholds they looked at. 28% were exactly between the\nreported arrival and departure.",
    "start": "1612150",
    "end": "1620840"
  },
  {
    "text": "So some tolerance\nbefore the arrival and after the departure\nfrom each stop",
    "start": "1620840",
    "end": "1627260"
  },
  {
    "text": "was needed to infer a\nlarge portion of these. All right?",
    "start": "1627260",
    "end": "1633320"
  },
  {
    "text": "Simple.  Destinations, that's\nthe next step. So we have origins.",
    "start": "1633320",
    "end": "1639570"
  },
  {
    "start": "1635000",
    "end": "1921000"
  },
  {
    "text": "It's a rail system, you tap in. It just tells you\nI'm gate number blah,",
    "start": "1639570",
    "end": "1644910"
  },
  {
    "text": "and that is at some station. If it's a bus, you can join\nAVL with AFC, and you get it.",
    "start": "1644910",
    "end": "1650010"
  },
  {
    "text": "Now let's look at destinations. So there are different methods\nfor inferring destinations.",
    "start": "1650010",
    "end": "1655892"
  },
  {
    "text": "[AUDIO OUT] AFC and AVL. And one of the simplest methods,\nor the family of methods, is the closest stop assumption.",
    "start": "1655892",
    "end": "1665269"
  },
  {
    "text": "So what are the key assumptions? We start by saying that the\ndestination of each trip",
    "start": "1665270",
    "end": "1672610"
  },
  {
    "text": "segment is close to the origin\nof the following trip segment. So in other words, that is\ntrue, physically, right?",
    "start": "1672610",
    "end": "1679330"
  },
  {
    "text": "You have to move\nsomehow through space. So we, further, now assume\nthat that movement is happening",
    "start": "1679330",
    "end": "1685870"
  },
  {
    "text": "mostly through the public\ntransportation network, and that no trips on other\nmodes are being made. ",
    "start": "1685870",
    "end": "1693010"
  },
  {
    "text": "So if you go from home\nto work in the morning, and you have to then--",
    "start": "1693010",
    "end": "1701030"
  },
  {
    "text": "say that you work, and then\nat the end of the workday, you go back home. We see that your next\norigin is the stop",
    "start": "1701030",
    "end": "1708190"
  },
  {
    "text": "across the street from where\nyou got off, hopefully. So we'll look at which stop was\nclosest on the trip you boarded",
    "start": "1708190",
    "end": "1716080"
  },
  {
    "text": "to the next origin. And we'll infer that\nis the destination. If it's a rail system--",
    "start": "1716080",
    "end": "1721996"
  },
  {
    "text": "that's what we\nshow here in blue. So we have an origin\non this bus line. We want to infer which\nof the downstream stops",
    "start": "1721996",
    "end": "1727840"
  },
  {
    "text": "is a destination. And then we look\nat the next trip, and the next trip\nstarted at T, the target.",
    "start": "1727840",
    "end": "1733120"
  },
  {
    "text": "And we want to get as close\nas possible to the target. So we'll say that\nthe destination is D, if the distance between\nthe D and T is small enough.",
    "start": "1733120",
    "end": "1742660"
  },
  {
    "text": "Because if it's\nthree kilometers, we might say we have no clue. This person may have moved\nwith a different mode.",
    "start": "1742660",
    "end": "1748784"
  },
  {
    "text": "And therefore, this\nassumption of closest stop may not apply in that case. So in those few\ncases, we won't make",
    "start": "1748784",
    "end": "1755440"
  },
  {
    "text": "an inference of destination. If it's rail, so two\nrail lines, and you may be able to change between\nlines behind the gate,",
    "start": "1755440",
    "end": "1764770"
  },
  {
    "text": "then closest stop\nis the same station",
    "start": "1764770",
    "end": "1770920"
  },
  {
    "text": "that you next enter\nbecause that's the closest.",
    "start": "1770920",
    "end": "1776680"
  },
  {
    "text": "So if it's a bus-- so you may\nhave boarded the Red Line here",
    "start": "1776680",
    "end": "1782080"
  },
  {
    "text": "and somehow gotten\nto the Blue Line. We don't know that\nyet, but we observe",
    "start": "1782080",
    "end": "1787900"
  },
  {
    "text": "that the next tap\nis at a bus, then we find which station\non the rail network is closest to that bus stop.",
    "start": "1787900",
    "end": "1794230"
  },
  {
    "text": "And that's the inference. That's destination. So this is the simplest method\nfor destination inference.",
    "start": "1794230",
    "end": "1802350"
  },
  {
    "text": "Any questions with\nthe closest stop rule and that inference method? ",
    "start": "1802350",
    "end": "1809780"
  },
  {
    "text": "Here's an example of one\ncard with four trips. It's a time-space\ndiagram of sorts.",
    "start": "1809780",
    "end": "1817039"
  },
  {
    "text": "So we start the day\nhere in the morning, and we maybe observe a\nboarding at this line.",
    "start": "1817040",
    "end": "1824230"
  },
  {
    "text": "This person, in reality,\ntransferred to the second trip. So we don't know that\nat first, but we do see",
    "start": "1824230",
    "end": "1832090"
  },
  {
    "text": "the origin and the second trip. So we find which of these stops\nwas closest to that origin",
    "start": "1832090",
    "end": "1838090"
  },
  {
    "text": "and, we say that's destination. And likewise, from the\ntrip leading to work,",
    "start": "1838090",
    "end": "1844960"
  },
  {
    "text": "and from the trip returning\nfrom work-- work, school, whatever it is-- we find the closest one, and\nwe say that's destination.",
    "start": "1844960",
    "end": "1852340"
  },
  {
    "text": "And we just keep doing that. What happens at\nthe end of the day? There's no next one, right?",
    "start": "1852340",
    "end": "1860260"
  },
  {
    "text": "So what do we do? AUDIENCE: If a\nperson gets on a bus that does go to where they\nstarted, if the last bus--",
    "start": "1860260",
    "end": "1870540"
  },
  {
    "text": "let's talk about\nbus for a second. If it leads back to\nwhere they started, then we can assume that they-- GABRIEL SANCHEZ-MARTINEZ: Right.",
    "start": "1870540",
    "end": "1875620"
  },
  {
    "text": "So that's the key assumption. They key assumption\nis that the person returns to the first\nplace seen that day.",
    "start": "1875620",
    "end": "1881830"
  },
  {
    "text": "Another option is to\nlook at the AFC system and see what is the next\nplace of origin the next day,",
    "start": "1881830",
    "end": "1888429"
  },
  {
    "text": "if you have that information. Both things are possible. OK? AUDIENCE: But if they get\non the last bus of the day,",
    "start": "1888430",
    "end": "1894799"
  },
  {
    "text": "does not [INAUDIBLE]. GABRIEL SANCHEZ-MARTINEZ:\nWell then you can't make an inference. So if they get on--\nthe question was,",
    "start": "1894800",
    "end": "1900410"
  },
  {
    "text": "what happens if they\nget on, say, a bus. And none of the downstream\nstops of the origin",
    "start": "1900410",
    "end": "1906520"
  },
  {
    "text": "get close to the first\norigin of that day or the first origin\nof the next day,",
    "start": "1906520",
    "end": "1913660"
  },
  {
    "text": "then we can't make an inference. So we leave that destination\nuninferred for now.",
    "start": "1913660",
    "end": "1921680"
  },
  {
    "text": "All right? So there are some tests. We talked about distance. Time is another one.",
    "start": "1921680",
    "end": "1928540"
  },
  {
    "text": "So there's different\nways of looking at this. In London, when Jay\nGordon did this,",
    "start": "1928540",
    "end": "1934630"
  },
  {
    "start": "1930000",
    "end": "2010000"
  },
  {
    "text": "he got an entrance\nrate of about 75%. Here's a distribution\nof speed between station",
    "start": "1934630",
    "end": "1942519"
  },
  {
    "text": "exit and inferred bus alighting\nor subsequent station entry. So very slow speeds here.",
    "start": "1942520",
    "end": "1950290"
  },
  {
    "text": "This goes up way\nhigher than 800. What does that show? ",
    "start": "1950290",
    "end": "1957640"
  },
  {
    "text": "This is meters per hour, so\nif you move zero or, say, one meter per hour,\nwhat does that imply?",
    "start": "1957640",
    "end": "1965445"
  },
  {
    "text": "AUDIENCE: Someone\nwas taking a bus? GABRIEL SANCHEZ-MARTINEZ:\nWho are those people? ",
    "start": "1965445",
    "end": "1972866"
  },
  {
    "text": "Emily? AUDIENCE: People who get off\nat, say, a tube stop and then",
    "start": "1972866",
    "end": "1984680"
  },
  {
    "text": "go to work-- GABRIEL SANCHEZ-MARTINEZ:\nGo to work for eight hours. AUDIENCE: --for eight hours. And then-- [INTERPOSING VOICES] GABRIEL SANCHEZ-MARTINEZ:\nAnd then next boarding is right across the\nstreet, 8 hours later.",
    "start": "1984680",
    "end": "1991340"
  },
  {
    "text": "So those are people\nwho are between trips. And then to the right,\nhere, we have something sort",
    "start": "1991340",
    "end": "1998000"
  },
  {
    "text": "of bell-shaped, with some\ndistribution, quite wide.",
    "start": "1998000",
    "end": "2003100"
  },
  {
    "text": "These are in the range\nof walking speeds. So it checks with what we\nknow, and what we infer.",
    "start": "2003100",
    "end": "2013650"
  },
  {
    "start": "2010000",
    "end": "2046000"
  },
  {
    "text": "Here is a distribution\nof distance between subsequent\ntap and closest stop on the current route.",
    "start": "2013650",
    "end": "2019360"
  },
  {
    "text": "So how far away that\nyou walk to the target from your destination,\nin other words.",
    "start": "2019360",
    "end": "2025179"
  },
  {
    "text": "And there's a cutoff. If this were too far, we would\nnot want to make an inference.",
    "start": "2025180",
    "end": "2032830"
  },
  {
    "text": "But you can see that most people\nhave quite short distances. So that's good.",
    "start": "2032830",
    "end": "2039050"
  },
  {
    "text": "That means that our inference\nis more likely to be true.",
    "start": "2039050",
    "end": "2044830"
  },
  {
    "text": "OK? And you have some details here. So in the case of London,\nthere was a comparison",
    "start": "2044830",
    "end": "2050870"
  },
  {
    "text": "of the origins and destinations\nproduced by this algorithm, with the bus OD survey,\nwhich is a manual survey.",
    "start": "2050870",
    "end": "2058219"
  },
  {
    "text": "And it compared favorably. One thing with BODS, of\ncourse, it had the biases",
    "start": "2058219",
    "end": "2064760"
  },
  {
    "text": "that a manual survey has. So it seems that BODS\nunderestimated ridership",
    "start": "2064760",
    "end": "2069881"
  },
  {
    "text": "during the peak periods, where\nit was maybe harder to count. ",
    "start": "2069881",
    "end": "2076069"
  },
  {
    "text": "Sometimes the BODS\nreturn rates were low. We saw some of the reasons\nfor biases in manual surveys.",
    "start": "2076070",
    "end": "2082669"
  },
  {
    "text": "If it's a very full\nbus, people are less likely to return a survey. Or if you are a person who is\ngetting off at the next stop,",
    "start": "2082670",
    "end": "2090500"
  },
  {
    "text": "you are less likely\nto answer the survey. So BODS was, of course,\nsubject to those biases.",
    "start": "2090500",
    "end": "2096830"
  },
  {
    "text": "And essentially, the people\nwho were doing this validation were happy with the\ninference method.",
    "start": "2096830",
    "end": "2102900"
  },
  {
    "text": " Now what happens in\nrail in Boston, say?",
    "start": "2102900",
    "end": "2110950"
  },
  {
    "text": "It's an open system. So you can apply the\nnearest node method.",
    "start": "2110950",
    "end": "2116559"
  },
  {
    "text": " But you have a complication\nin Boston, the Green Line.",
    "start": "2116560",
    "end": "2123750"
  },
  {
    "text": "So the Green Line is-- if you take it in the\nbranches, you board, and then you tap into the vehicle.",
    "start": "2123750",
    "end": "2129550"
  },
  {
    "text": "So it looks like a bus\nfrom the fare standpoint. And then you could end up\nanywhere on the rail network.",
    "start": "2129550",
    "end": "2137430"
  },
  {
    "text": "So it's a little harder\nto make an inference of where you get off in that\ncase, especially going back.",
    "start": "2137430",
    "end": "2145971"
  },
  {
    "text": "Going back to the\nbranch, it's not clear.",
    "start": "2145971",
    "end": "2151020"
  },
  {
    "text": "Besides that, there\nare some other reasons to try more sophisticated\ndestination entrance methods.",
    "start": "2151020",
    "end": "2158550"
  },
  {
    "text": "We know that it may not always\nbe the case that the nearest station in the rail system is\nactually the alighting station.",
    "start": "2158550",
    "end": "2167420"
  },
  {
    "text": "There are some cases where\nyou wouldn't take an extra 15 minutes to get a\nlittle bit closer.",
    "start": "2167420",
    "end": "2172630"
  },
  {
    "text": "And you are willing\nto walk and make a compromise between those two. So the minimum cost path\nmethod is an improvement",
    "start": "2172630",
    "end": "2182000"
  },
  {
    "text": "over the closest stop method. What we do there is\nwe look at-- here's the origin tap location,\nthe entry to the system.",
    "start": "2182000",
    "end": "2190490"
  },
  {
    "text": "And we, essentially,\nexplore using a minimum cost",
    "start": "2190490",
    "end": "2196010"
  },
  {
    "text": "formulation, a dynamic\nprogramming approach. All the feasible\npaths that the person",
    "start": "2196010",
    "end": "2201680"
  },
  {
    "text": "could take to their next\ntap location, the target. And that includes walking links\nfrom any possible exit station.",
    "start": "2201680",
    "end": "2210619"
  },
  {
    "text": "So we then use a\ngeneralized cost equation",
    "start": "2210620",
    "end": "2215990"
  },
  {
    "text": "to assign a cost to\neach of these paths, with relative disutility\nweights on each component.",
    "start": "2215990",
    "end": "2223050"
  },
  {
    "text": "So waiting is more\nthan vehicle time. Walking is more\nthan waiting time.",
    "start": "2223050",
    "end": "2229010"
  },
  {
    "text": "We've seen these\nequations before. And now we have a\nlist of paths, and we",
    "start": "2229010",
    "end": "2234650"
  },
  {
    "text": "assume that the person\ntook the one that minimized their disutility. Their combined,\ngeneralized disutility--",
    "start": "2234650",
    "end": "2241310"
  },
  {
    "text": "avoiding walking,\nin-vehicle time transfers, all those things. So in this case,\nperhaps the person",
    "start": "2241310",
    "end": "2249020"
  },
  {
    "text": "prefers to get off\nof the Red Line and walk to the next location.",
    "start": "2249020",
    "end": "2255860"
  },
  {
    "text": "You could think of\nthis as the Red Line from Kendall to Park Street.",
    "start": "2255860",
    "end": "2261620"
  },
  {
    "text": "And then the next entry\nis at, say, a bus stop close to Boylston Street.",
    "start": "2261620",
    "end": "2266869"
  },
  {
    "text": "You could transfer to the Green\nLine and take it one stop, or you might decide\nit's a nice walk.",
    "start": "2266870",
    "end": "2272650"
  },
  {
    "text": "I'm going to walk. I'm not going to wait\nfor the Green Line. And then some possible\npaths take you",
    "start": "2272650",
    "end": "2279970"
  },
  {
    "text": "way far from your next\nlocation, so they are pruned. They're not included.",
    "start": "2279970",
    "end": "2286810"
  },
  {
    "start": "2286000",
    "end": "2348000"
  },
  {
    "text": "So what happens if we\ncompare the two methods? What's your intuition?",
    "start": "2286810",
    "end": "2295530"
  },
  {
    "text": "Or what do you think\nhappens if we compare the results of nearest node with\nthis more sophisticated method?",
    "start": "2295530",
    "end": "2302600"
  },
  {
    "text": " What percentage of\ndestinations do you",
    "start": "2302600",
    "end": "2310427"
  },
  {
    "text": "think will be inferred\nat a different place?  Is it close to 5?",
    "start": "2310427",
    "end": "2316710"
  },
  {
    "text": "Close to 50? Close to 25? ",
    "start": "2316710",
    "end": "2322280"
  },
  {
    "text": "10%? AUDIENCE: 5%. GABRIEL SANCHEZ-MARTINEZ: 5%? AUDIENCE: What percent of the\ndestinations will be inferred",
    "start": "2322280",
    "end": "2329210"
  },
  {
    "text": "or will not be inferred? GABRIEL SANCHEZ-MARTINEZ:\nWill be inferred differently. AUDIENCE: Oh, will be\ninferred differently. ",
    "start": "2329210",
    "end": "2336785"
  },
  {
    "text": "5%. GABRIEL SANCHEZ-MARTINEZ: Five? OK. So that's actually close.",
    "start": "2336785",
    "end": "2341860"
  },
  {
    "text": "I actually don't think I wrote\nthe results, which is good. So let's look at two examples.",
    "start": "2341860",
    "end": "2348445"
  },
  {
    "start": "2348000",
    "end": "2576000"
  },
  {
    "text": "It is close to 5%, in fact. Some of the differences\nin the Boston network",
    "start": "2348445",
    "end": "2353960"
  },
  {
    "text": "are clear improvements\nin the accuracy. I'll give you one\nexample of that. Some people go\nfrom Forest Hills,",
    "start": "2353960",
    "end": "2361309"
  },
  {
    "text": "and then their next\ntap is at Copley. So the walk between Back Bay\nand Copley is five minutes,",
    "start": "2361310",
    "end": "2369450"
  },
  {
    "text": "and it's a nice walk. If you use nearest\nnode, you have to remain on the rail line.",
    "start": "2369450",
    "end": "2374849"
  },
  {
    "text": "And you have to transfer either\nat Downtown Crossing to the Red and then at Park\nStreet to the Green",
    "start": "2374850",
    "end": "2380190"
  },
  {
    "text": "or go to Haymarket and\ntransfer it to the Orange Line. That's a 20-minute,\n25-minute ordeal.",
    "start": "2380190",
    "end": "2387100"
  },
  {
    "text": "AUDIENCE: For a walk from\nDowntown across to Park Street, that's-- AUDIENCE: Sure, but then you\nare not following the method.",
    "start": "2387100",
    "end": "2393725"
  },
  {
    "text": "AUDIENCE: Oh, you don't\n[INAUDIBLE] transfer? GABRIEL SANCHEZ-MARTINEZ: Yeah. So this is a case where the\nminimum cost approach says,",
    "start": "2393725",
    "end": "2402976"
  },
  {
    "text": "yeah, you get off the\nBack Bay, and you walk. So yes, it's an improvement. There are some other cases--",
    "start": "2402976",
    "end": "2408480"
  },
  {
    "text": "AUDIENCE: What was the\nperson destination? GABRIEL SANCHEZ-MARTINEZ: Well,\nwe don't know destination. We're inferring destination. [INTERPOSING VOICES] GABRIEL SANCHEZ-MARTINEZ:\nAnd what we know",
    "start": "2408480",
    "end": "2414270"
  },
  {
    "text": "is that they get on at\nCopley the next time. AUDIENCE: Yeah, but was\nthat their afternoon trip? Or was that their--",
    "start": "2414270",
    "end": "2420360"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nIt's a morning trip. They go from Forest Hills. AUDIENCE: So both Forest Hills\nand Copley were morning taps? GABRIEL SANCHEZ-MARTINEZ:\nOh, I don't know.",
    "start": "2420360",
    "end": "2427130"
  },
  {
    "text": "Copley might have been\nthe afternoon tap. AUDIENCE: It doesn't\nreally matter if it was in the afternoon.",
    "start": "2427130",
    "end": "2432734"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]. But then why would\na person get on-- AUDIENCE: The question\nis where do they",
    "start": "2432734",
    "end": "2438440"
  },
  {
    "text": "get off the Orange Line. GABRIEL SANCHEZ-MARTINEZ: Right. We're trying to infer the\ndestination when they board the Orange Line in the morning.",
    "start": "2438440",
    "end": "2444810"
  },
  {
    "text": "AUDIENCE: But the\ntime gap also matters. Forest Hills-- GABRIEL SANCHEZ-MARTINEZ: We\nare making an assumption that",
    "start": "2444810",
    "end": "2451466"
  },
  {
    "text": "people [AUDIO OUT]\ntoo far from their-- AUDIENCE: But I--",
    "start": "2451466",
    "end": "2457250"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\n--destination in a non-public\ntransportation mode. AUDIENCE: Sure. GABRIEL SANCHEZ-MARTINEZ:\nThat's one",
    "start": "2457250",
    "end": "2463400"
  },
  {
    "text": "of the assumptions\nin this method and in the previous\nmethod as well. AUDIENCE: But I'm still\ntroubled by the time gap.",
    "start": "2463400",
    "end": "2468660"
  },
  {
    "text": "Was Copley and afternoon tap? Or was it-- GABRIEL SANCHEZ-MARTINEZ:\nIt could have been. There are many\npeople who do this.",
    "start": "2468660",
    "end": "2474030"
  },
  {
    "text": "AUDIENCE: It makes\na difference-- GABRIEL SANCHEZ-MARTINEZ:\nSo there are many people who do this. So there are some\npeople who do it",
    "start": "2474030",
    "end": "2479080"
  },
  {
    "text": "close in time and some people\nwho do it in the evening, after they leave work. So I'm giving you an example\nof one origin target pair.",
    "start": "2479080",
    "end": "2487780"
  },
  {
    "text": "And I would say it's\na marked improvement.",
    "start": "2487780",
    "end": "2493231"
  },
  {
    "text": "It's certainly not the case\nthat the person goes all the way to Haymarket and turns around.",
    "start": "2493231",
    "end": "2499000"
  },
  {
    "text": "OK. The other example is less clear.",
    "start": "2499000",
    "end": "2504109"
  },
  {
    "text": "So somebody-- an OD pair\nstarting at Maverick,",
    "start": "2504110",
    "end": "2509380"
  },
  {
    "text": "and then the next tap\nis at Downtown Crossing. So obviously, the\nclosest node assumption",
    "start": "2509380",
    "end": "2518030"
  },
  {
    "text": "is that you transfer\nat State Street and take the Orange\nLine one stop.",
    "start": "2518030",
    "end": "2523250"
  },
  {
    "text": "That's actually not too bad. The algorithm-- and first,\nfor a lot of these people, that you get off\nat State Street,",
    "start": "2523250",
    "end": "2529520"
  },
  {
    "text": "and you walk about four\nminutes, and if you look at Google\ndirections, Google",
    "start": "2529520",
    "end": "2534730"
  },
  {
    "text": "will say that's\nwhat you should do.  The transfer to the\nOrange Line would take",
    "start": "2534730",
    "end": "2542070"
  },
  {
    "text": "six minutes, instead of four. So it's very close. And it depends on\nthe weather that day. And it depends on\npeople's preference.",
    "start": "2542070",
    "end": "2549350"
  },
  {
    "text": "It might depend on\nreal-time information about whether the\ntrain is right here, and I can run, or\narriving in one minute,",
    "start": "2549350",
    "end": "2557160"
  },
  {
    "text": "or if it's 10 minutes away. So this is more\nsubtle, more nuanced. And I wouldn't say that\nwas an improvement.",
    "start": "2557160",
    "end": "2563950"
  },
  {
    "text": "So part of the 5% is\nclear improvement, and another part of it is,\nwell, it might be an improvement",
    "start": "2563950",
    "end": "2572310"
  },
  {
    "text": "or not. It depends on\npeople's preferences. So if we look at the\ndistribution of the results",
    "start": "2572310",
    "end": "2583170"
  },
  {
    "text": "from destination in this\ncase, 70% of destinations were inferred.",
    "start": "2583170",
    "end": "2589700"
  },
  {
    "text": "And then we have different\nreasons why we can't infer it. So for 16%, there was\nno target location.",
    "start": "2589700",
    "end": "2596150"
  },
  {
    "text": "That means there was no other\ntap that day, essentially.",
    "start": "2596150",
    "end": "2603010"
  },
  {
    "text": "So there was no target. For 8% of them, there\nwas another target,",
    "start": "2603010",
    "end": "2609870"
  },
  {
    "text": "but it was very far. So somehow, the person went to\nanother bus stop in the system,",
    "start": "2609870",
    "end": "2616869"
  },
  {
    "text": "and it was far away\nfrom any rail station. So we're not so\ncomfortable, in that case,",
    "start": "2616870",
    "end": "2623430"
  },
  {
    "text": "saying that the destination\nis close to the next tap. So we will not make an\ninference for those people.",
    "start": "2623430",
    "end": "2631820"
  },
  {
    "text": "Some paths were non-feasible. So that means that\nthe algorithm did not",
    "start": "2631820",
    "end": "2639830"
  },
  {
    "text": "find any path that made\nit to the target on time to make the next.",
    "start": "2639830",
    "end": "2646760"
  },
  {
    "text": "So that could be about data. It could be a number of things. There are some assumptions\nabout how quickly people",
    "start": "2646760",
    "end": "2652820"
  },
  {
    "text": "can access trains and hop. So many things can go into that. ",
    "start": "2652820",
    "end": "2659390"
  },
  {
    "text": "Yeah, and so forth. And then unknown origin, so\nerrors in the data, et cetera.",
    "start": "2659390",
    "end": "2665831"
  },
  {
    "text": "OK?  And the inference probabilities,\nthe total ones are shown here.",
    "start": "2665831",
    "end": "2674790"
  },
  {
    "start": "2669000",
    "end": "2780000"
  },
  {
    "text": "So the blue line is overall\ndestination entrance rates, so I said close to 70%.",
    "start": "2674790",
    "end": "2680529"
  },
  {
    "text": "That's what you see\non the blue line. It dips a little bit on\nweekends because there are fewer taps and\nmaybe more walking",
    "start": "2680529",
    "end": "2686930"
  },
  {
    "text": "between taps or between trips. For rail, it's a little\nhigher than the general.",
    "start": "2686930",
    "end": "2694070"
  },
  {
    "text": "For bus, shown in yellow,\nit's a little lower. And if you take\naway the part that didn't have a second tap or a\ntap after that the transaction,",
    "start": "2694070",
    "end": "2705260"
  },
  {
    "text": "then it goes up to closer\nto 90%, not quite 90%.",
    "start": "2705260",
    "end": "2710345"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ: Yeah? AUDIENCE: Does this include\nonly people who tapped? Or does this also include\npeople who paid cash?",
    "start": "2710345",
    "end": "2716550"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: So\nthese numbers in this slide are everyone.",
    "start": "2716550",
    "end": "2722010"
  },
  {
    "text": "If the person is cash, then they\nare not counted on the red line because they wouldn't have\nan inferable destination.",
    "start": "2722010",
    "end": "2729450"
  },
  {
    "text": "But certainly, the bus line\ndoes include cash transactions.",
    "start": "2729450",
    "end": "2735567"
  },
  {
    "text": "[INTERPOSING VOICES] GABRIEL SANCHEZ-MARTINEZ:\nAnd that's one of the reasons\nwhy it's lower. AUDIENCE: [INAUDIBLE] target\nlocation on the last slide includes cash transactions?",
    "start": "2735567",
    "end": "2741355"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: So\nthis was only for the rail. Sorry, this is for\nthe whole system,",
    "start": "2741355",
    "end": "2747140"
  },
  {
    "text": "but the two examples that I\ngave here, I was looking at--",
    "start": "2747140",
    "end": "2752720"
  },
  {
    "text": "I quoted 5%\ndifference, and that's a case study where I compared\nrail transactions, not",
    "start": "2752720",
    "end": "2758990"
  },
  {
    "text": "bus transactions. So that's the one\nthing to have in mind.",
    "start": "2758990",
    "end": "2764470"
  },
  {
    "text": "But yeah, this is overall\ndestination inference in the MBTA, and this as well. Different ways of looking at it.",
    "start": "2764470",
    "end": "2769540"
  },
  {
    "text": "AUDIENCE: So if you\npaid cash, you'd be in the no target range. GABRIEL SANCHEZ-MARTINEZ: Yes. And you could infer an\norigin for that person,",
    "start": "2769540",
    "end": "2775030"
  },
  {
    "text": "but not a destination, so you\nleave that trip uninferred destination for now. OK.",
    "start": "2775030",
    "end": "2781700"
  },
  {
    "start": "2780000",
    "end": "2834000"
  },
  {
    "text": "We've covered O and D. Let's\nmove to X, transfer inference. We talked about why transfer\ninference is so important.",
    "start": "2781700",
    "end": "2789060"
  },
  {
    "text": "We also call this\ninterchange inference. Interchange is a term preferred\nin London by the British.",
    "start": "2789060",
    "end": "2794710"
  },
  {
    "text": "In the US, we say transfer. So we have seen\nthis diagram before.",
    "start": "2794710",
    "end": "2801193"
  },
  {
    "text": "But now there are\nthese blue boxes surrounding both, say, the\nmorning pair and the afternoon",
    "start": "2801194",
    "end": "2807980"
  },
  {
    "text": "pair. So the inference\nwe want to make now is whether this first\ntrip was connected",
    "start": "2807980",
    "end": "2815660"
  },
  {
    "text": "to the second with a transfer. Or whether, in fact, the\nperson was doing something else",
    "start": "2815660",
    "end": "2820760"
  },
  {
    "text": "in between those two trips, and\nthis was the actual intended destination of that passenger.",
    "start": "2820760",
    "end": "2827339"
  },
  {
    "text": "And that's an important\nquestion for the reasons we talked about earlier. ",
    "start": "2827340",
    "end": "2836170"
  },
  {
    "start": "2834000",
    "end": "2876000"
  },
  {
    "text": "These are some definitions\nfor your reference. A journey, in this\nsubject, is everything",
    "start": "2836170",
    "end": "2844860"
  },
  {
    "text": "that is accomplished\nfrom the real origin to the real destination\nof the person,",
    "start": "2844860",
    "end": "2851170"
  },
  {
    "text": "including transfers and,\npossibly, multiple fare payments. A fare stage, not\nincluded in the slide,",
    "start": "2851170",
    "end": "2858090"
  },
  {
    "text": "is everything that you do\nin a single fare payment. So it could involve\nbehind-the-gate transfers,",
    "start": "2858090",
    "end": "2864720"
  },
  {
    "text": "or it could be one bus ride. Transfers are transfers\nbetween stages.",
    "start": "2864720",
    "end": "2873630"
  },
  {
    "text": "So they link segments\nof a journey. How do we do this linking?",
    "start": "2873630",
    "end": "2880390"
  },
  {
    "start": "2876000",
    "end": "3083000"
  },
  {
    "text": "This is also from Jay\nGordon's thesis, which is referenced in the back.",
    "start": "2880390",
    "end": "2885820"
  },
  {
    "text": "We look at a series of\nthree kinds of conditions-- temporal conditions,\nlogical conditions,",
    "start": "2885820",
    "end": "2890860"
  },
  {
    "text": "and spatial conditions. Temporal conditions,\nsay, how much time",
    "start": "2890860",
    "end": "2896019"
  },
  {
    "text": "happened between the\ninferred destination and the next origin,\nthe inferred origin.",
    "start": "2896020",
    "end": "2901280"
  },
  {
    "text": "If that was a very long time,\nand the distance was short, then the person might have\nbeen doing something else.",
    "start": "2901280",
    "end": "2907370"
  },
  {
    "text": "So we can't necessarily assume\nthat this was a transfer.",
    "start": "2907370",
    "end": "2913780"
  },
  {
    "text": "We also look at bus wait time. So what if the\ndistance was short? A long time happened [AUDIO OUT]\nof next bus or every 20",
    "start": "2913780",
    "end": "2922390"
  },
  {
    "text": "minutes, and the person\nhad to wait that long? Well, that is also considered.",
    "start": "2922390",
    "end": "2927970"
  },
  {
    "text": "So if we look and see\nthat that next bus passed",
    "start": "2927970",
    "end": "2933340"
  },
  {
    "text": "after a reasonable time allowed\nto get to the next stop. Or how many buses passed?",
    "start": "2933340",
    "end": "2939280"
  },
  {
    "text": "Maybe you want to\nallow one, just in case that bus is very full and\ncan't take that person. So these are the considerations\nin temporal conditions.",
    "start": "2939280",
    "end": "2947980"
  },
  {
    "text": "Spatial conditions, you want\nto look at maximum interchange distance, assuming that\na person can actually",
    "start": "2947980",
    "end": "2953440"
  },
  {
    "text": "do a transfer that is two\nkilometers long, for example.",
    "start": "2953440",
    "end": "2958720"
  },
  {
    "text": "You probably would be\ndoing something else, if that's the case. And we look at circuity, so\ncircuity at the journey level",
    "start": "2958720",
    "end": "2964870"
  },
  {
    "text": "and between stages. A circuitous journey\nis one that ends very close to where you started.",
    "start": "2964870",
    "end": "2972280"
  },
  {
    "text": "So if you infer\ntransfers, and you end up back where you\nstarted, then somewhere",
    "start": "2972280",
    "end": "2979240"
  },
  {
    "text": "in that chain of stages,\nthere must have not been a real transfer. There must have been a\nnon-transportation activity.",
    "start": "2979240",
    "end": "2986859"
  },
  {
    "text": "So therefore, you can't really\ninfer that all of that chain is linked with transfers.",
    "start": "2986860",
    "end": "2992170"
  },
  {
    "text": "And then circuity\nbetween stages. So if you, for example,\nboard the same bus line",
    "start": "2992170",
    "end": "2999490"
  },
  {
    "text": "going backwards, even\nif the time was short, and the distance was short,\nyou may have seen your friend",
    "start": "2999490",
    "end": "3006632"
  },
  {
    "text": "and given your friend something,\nand then hopped on the bus again. So it might have been\na quick transfer. And therefore, we want to\nlook at circuity to infer",
    "start": "3006632",
    "end": "3014430"
  },
  {
    "text": "if that was a transfer or not. Logical conditions, I actually\ngave an example of that right",
    "start": "3014430",
    "end": "3020530"
  },
  {
    "text": "now. So if you're entering the\nsame station you get off at, or you take the\nsame bus line, then",
    "start": "3020530",
    "end": "3028660"
  },
  {
    "text": "that shouldn't be a\ntransfer because you could have stayed on the same bus. One example of\nthat breaking would",
    "start": "3028660",
    "end": "3035559"
  },
  {
    "text": "be a bus being taken out of\nservice or something like this. So you could consider not to\nmake that logical condition",
    "start": "3035560",
    "end": "3043390"
  },
  {
    "text": "more accurate.",
    "start": "3043390",
    "end": "3049321"
  },
  {
    "text": "In many cases when that\nhappens, though, people are not asked to tap again. So take that with\na grain of salt.",
    "start": "3049322",
    "end": "3059250"
  },
  {
    "text": "Questions about these\nassumptions and the tests that we impose? So essentially, if all\nof these tests pass,",
    "start": "3059250",
    "end": "3065339"
  },
  {
    "text": "we say, yes, this is a transfer. If one of them doesn't pass,\nwe say, we're not sure.",
    "start": "3065340",
    "end": "3070650"
  },
  {
    "text": "It could have been or maybe not. And therefore, this will be\na conservative assumption",
    "start": "3070650",
    "end": "3076780"
  },
  {
    "text": "about whether these two stages\nare linked as one journey.",
    "start": "3076780",
    "end": "3083580"
  },
  {
    "start": "3083000",
    "end": "3240000"
  },
  {
    "text": "Here is in London, the results. So about 2/3 were one stage,\nabout 1/4 were two stages,",
    "start": "3083580",
    "end": "3091859"
  },
  {
    "text": "and then about 10% were\nmore than two stages. And here's a\ndistribution of duration",
    "start": "3091860",
    "end": "3097950"
  },
  {
    "text": "of journey from first\norigin to last destination, instead of the\nunlinked trip time.",
    "start": "3097950",
    "end": "3105309"
  },
  {
    "text": "This includes transfer\ntime in between. So very powerful for\nservice planning.",
    "start": "3105310",
    "end": "3113770"
  },
  {
    "text": "There was a comparison with\nthe London travel diary survey, little tedious.",
    "start": "3113770",
    "end": "3119230"
  },
  {
    "text": "And it lined up quite well, but\nthere were some differences. So if we look at people\nreporting that they only",
    "start": "3119230",
    "end": "3125320"
  },
  {
    "text": "took one journey on the day\nthey were queried about, it lined up very well.",
    "start": "3125320",
    "end": "3130870"
  },
  {
    "text": "If you then look\nat two or more, it turns out that a lot of people\nin LTDS say that they took two,",
    "start": "3130870",
    "end": "3138820"
  },
  {
    "text": "but they may have taken more. And they're just\nsimplifying the reporting. That's one\npossibility of errors.",
    "start": "3138820",
    "end": "3146619"
  },
  {
    "text": "And it is a known\nbias in surveys that people to try to help you\nout by saying what I usually",
    "start": "3146620",
    "end": "3153130"
  },
  {
    "text": "do, instead of what I did\nyesterday, or things like that. So percent of cardholders,\nshown on the second graph,",
    "start": "3153130",
    "end": "3161170"
  },
  {
    "text": "and the number of stages per\njourney, similar pattern. ",
    "start": "3161170",
    "end": "3166730"
  },
  {
    "text": "So in LTDS, you tend\nto have fewer people.",
    "start": "3166730",
    "end": "3174780"
  },
  {
    "text": "Well, yeah, here we have more\npeople inferred with one stage,",
    "start": "3174780",
    "end": "3181030"
  },
  {
    "text": "so no transfer. But if you look at two or\nmore, a similar pattern emerges where people might be\nreporting two and, in fact,",
    "start": "3181030",
    "end": "3193400"
  },
  {
    "text": "it might have been more or less. So in this case, the bias\nis towards more direct trips",
    "start": "3193400",
    "end": "3201020"
  },
  {
    "text": "on the inferred side, versus\nthe questionnaire side. OK?",
    "start": "3201020",
    "end": "3206090"
  },
  {
    "text": "So it didn't validate perfectly. But there were some\nknown issues with LTDS. ",
    "start": "3206090",
    "end": "3213740"
  },
  {
    "text": "London has since decided\nthat ODX is more accurate.",
    "start": "3213740",
    "end": "3220119"
  },
  {
    "text": "Now they continue\nLTDS because LTDS is useful for other\nthings, like asking",
    "start": "3220120",
    "end": "3225480"
  },
  {
    "text": "about social demographics,\nand trip purpose, and things like that. That doesn't obviate\nthe need for LTDS,",
    "start": "3225480",
    "end": "3235580"
  },
  {
    "text": "but it might reduce the need\nto have as many LTDS surveys.",
    "start": "3235580",
    "end": "3242300"
  },
  {
    "start": "3240000",
    "end": "3431000"
  },
  {
    "text": "Scaling. So we've done ODX,\nand we've inferred a percentage of destinations--\nor we've inferred destinations",
    "start": "3242300",
    "end": "3249500"
  },
  {
    "text": "for a percentage of\ntransactions, not all of them. And we've linked up\nthe ones that we could.",
    "start": "3249500",
    "end": "3254880"
  },
  {
    "text": "Now, we want the full\nmatrix, because for planning, we want to know how many people\nwant to go from here to there.",
    "start": "3254880",
    "end": "3262570"
  },
  {
    "text": "So there are different\nmethods for scaling. We have different situations.",
    "start": "3262570",
    "end": "3270510"
  },
  {
    "text": "So AFC, AVL, and ODX,\ntogether, given an OD matrix, but it's only for a\nsample of passenger trips.",
    "start": "3270510",
    "end": "3278970"
  },
  {
    "text": "If you have APC, that gives\nyou the full boarding count [AUDIO OUT]. So if you have that for all\nyour bus fleet, then great.",
    "start": "3278970",
    "end": "3285000"
  },
  {
    "text": "You can use IPF. And you could apply your\nODX matrix as the seed",
    "start": "3285000",
    "end": "3293240"
  },
  {
    "text": "to make it more accurate. That's great. In some cases, you only have\nAPC on a fraction of vehicles",
    "start": "3293240",
    "end": "3301090"
  },
  {
    "text": "or on no vehicles. And therefore, that's\na little tougher. So IPF can be applied\nin this context,",
    "start": "3301090",
    "end": "3310940"
  },
  {
    "text": "not just on the whole\nmatrix, but also on the part of the matrix\nthat is not inferred.",
    "start": "3310940",
    "end": "3318099"
  },
  {
    "text": "So you can, essentially,\nsubtract from your control totals the portion of the\ndemand that was inferred,",
    "start": "3318100",
    "end": "3325660"
  },
  {
    "text": "and apply IPF only\non the remainder. And that will scale\nup only that part.",
    "start": "3325660",
    "end": "3331590"
  },
  {
    "text": "OK? That's better if you don't\nwant to distort your seed too",
    "start": "3331590",
    "end": "3339670"
  },
  {
    "text": "much, essentially. If you're not very\ncomfortable assuming that all the people\nthat are not inferred",
    "start": "3339670",
    "end": "3347049"
  },
  {
    "text": "have the same demand OD\nstructure as the people that you do have\nan inference for, then separating\nthose out and using",
    "start": "3347050",
    "end": "3353410"
  },
  {
    "text": "IPF on the uninferred\nportion will give you a more accurate result\nbecause you're not",
    "start": "3353410",
    "end": "3358660"
  },
  {
    "text": "amplifying whatever you\nobserved and was able to infer.",
    "start": "3358660",
    "end": "3363849"
  },
  {
    "text": "So one example of\nthat is transfers.",
    "start": "3363850",
    "end": "3368910"
  },
  {
    "text": "And we'll give an example of\nthat in the next few slides, actually, right here. So consider scaling when you\nhave transfer information",
    "start": "3368910",
    "end": "3379110"
  },
  {
    "text": "from ODX, and you don't\nhave APC on every bus. You have it on some\nbuses, but not every bus.",
    "start": "3379110",
    "end": "3385050"
  },
  {
    "text": "So the real complete OD\nmatrix is what you want. And we could split it. I'm using algebraic\nnotation here.",
    "start": "3385050",
    "end": "3392370"
  },
  {
    "text": "The real matrix, R, can be\nsplit into the inferred portion and the missing portion, M.",
    "start": "3392370",
    "end": "3399599"
  },
  {
    "text": "And the missing portion-- there's two reasons\nfor missing data. One of them is, I\nsaw the boarding, but I couldn't\ninfer destination.",
    "start": "3399600",
    "end": "3406839"
  },
  {
    "text": "So that's U, the\nuninferred portion. And then there's the N,\nthe non-interaction part. Those are the people\nthat board without",
    "start": "3406840",
    "end": "3412920"
  },
  {
    "text": "interacting with the fare box. ",
    "start": "3412920",
    "end": "3418045"
  },
  {
    "text": "We want all of R. We know I, or\nat least we made an inference for I. And then we want to\nestimate U and estimate N.",
    "start": "3418045",
    "end": "3425790"
  },
  {
    "text": "And then we can add those two\nestimates together to the I, and we'll have the estimate\nof R. And that's what we want.",
    "start": "3425790",
    "end": "3432230"
  },
  {
    "start": "3431000",
    "end": "3599000"
  },
  {
    "text": "That's what scaling\naccomplishes. Now there's one critical\nobservation to make here.",
    "start": "3432230",
    "end": "3438980"
  },
  {
    "text": " If you take a trip\non a bus line,",
    "start": "3438980",
    "end": "3445560"
  },
  {
    "text": "and then you transferred\nsomewhere else, there will be a tap close\nto your destination,",
    "start": "3445560",
    "end": "3452910"
  },
  {
    "text": "shortly after your destination. So the likelihood that\nyou were able to make",
    "start": "3452910",
    "end": "3458790"
  },
  {
    "text": "a destination inference is very\nhigh Do you agree with that? ",
    "start": "3458790",
    "end": "3465490"
  },
  {
    "text": "Yes or no? AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ:\nIf you have some bus line,",
    "start": "3465490",
    "end": "3471850"
  },
  {
    "text": "and let's say that at stop\nB, there is a rail station.",
    "start": "3471850",
    "end": "3477120"
  },
  {
    "text": "And you are taking the\nbus line from D, C, to B. If you are actually going\nto transfer to this transfer",
    "start": "3477120",
    "end": "3487680"
  },
  {
    "text": "station, then you will\nhave a tap onto x, shortly",
    "start": "3487680",
    "end": "3494579"
  },
  {
    "text": "after you get off at B. Right? OK. So given that I inferred\nyour origin being D,",
    "start": "3494580",
    "end": "3503680"
  },
  {
    "text": "the probability that I actually\ninfer that your distinction was B is very high because\nI have the information",
    "start": "3503680",
    "end": "3509230"
  },
  {
    "text": "to make that inference. It's close in time\nand in distance. It will pass the checks.",
    "start": "3509230",
    "end": "3514660"
  },
  {
    "text": "So if we make the assumption\nthat in every case where we have a transfer,\nwe've successfully",
    "start": "3514660",
    "end": "3520750"
  },
  {
    "text": "inferred the destination, then\nwe have to then say, well, then none of the people\nwho are uninferred",
    "start": "3520750",
    "end": "3528280"
  },
  {
    "text": "had a transfer afterwards. Right? ",
    "start": "3528280",
    "end": "3533430"
  },
  {
    "text": "Right? OK. And what happens with-- what if this is a very\npopular rail station,",
    "start": "3533430",
    "end": "3539200"
  },
  {
    "text": "and a lot of people take it? Then the uninferred\nportion of the demand",
    "start": "3539200",
    "end": "3546540"
  },
  {
    "text": "are people who don't\ntransfer there. And if you applied the\nODX matrix of the people",
    "start": "3546540",
    "end": "3553589"
  },
  {
    "text": "that you had a\ndestination inference for, you would be weighing B as\nthe destination too much.",
    "start": "3553590",
    "end": "3560819"
  },
  {
    "text": "Those people are not very\nlikely transferring to-- some people might be getting\noff at B, but fewer of them",
    "start": "3560820",
    "end": "3566430"
  },
  {
    "text": "because you're looking\nat the people who don't end up transferring. So it could be people that\ngo somewhere else around B,",
    "start": "3566430",
    "end": "3573089"
  },
  {
    "text": "but the percentage\nwill be lower. So what we want to do is produce\ndestination probability matrix",
    "start": "3573090",
    "end": "3579690"
  },
  {
    "text": "from the portion of I that\nwe inferred that was not followed by a transfer.",
    "start": "3579690",
    "end": "3585850"
  },
  {
    "text": "So we prepare a\ndifferent matrix, excluding the people that\ntransferred after this trip.",
    "start": "3585850",
    "end": "3591970"
  },
  {
    "text": "And then we use that to\nscale up the remaining origins in probability.",
    "start": "3591970",
    "end": "3597680"
  },
  {
    "text": "So that's what we have here,\nexpressed mathematically. U is the vector of\nboarding locations",
    "start": "3597680",
    "end": "3603572"
  },
  {
    "text": "with uninferred destinations. And we multiply it\ntimes L bar, where L bar is a matrix of destination\nprobabilities of trips",
    "start": "3603572",
    "end": "3610690"
  },
  {
    "text": "not followed by transfers. So that comes from\nODX, But we remove",
    "start": "3610690",
    "end": "3616070"
  },
  {
    "text": "trips followed by transfers. All right? And then we have to take care\nof the non-interaction trips",
    "start": "3616070",
    "end": "3625340"
  },
  {
    "text": "or not observed trips. Some of them are trips\nwith uninferred origins.",
    "start": "3625340",
    "end": "3631490"
  },
  {
    "text": "So it could be that we know that\nthis person was at this trip because the origin\ninference failed,",
    "start": "3631490",
    "end": "3637420"
  },
  {
    "text": "or it could be that the person-- there's some information\nthat, in general, some portion of\npassengers don't interact.",
    "start": "3637420",
    "end": "3644540"
  },
  {
    "text": "So you want to scale everything\nup by 5%, say, as an example. That could come from\nsurveys or from APC,",
    "start": "3644540",
    "end": "3650830"
  },
  {
    "text": "if you have APC on a\nportion of the fleet. So essentially, n, here,\nis the scaling factor.",
    "start": "3650830",
    "end": "3657950"
  },
  {
    "text": "It could be bump what you have\nso far, which is I plus U, by some amount, some percentage.",
    "start": "3657950",
    "end": "3664869"
  },
  {
    "text": "That's the simple\nway of doing it. n could be a vector. So you could have\ndifferent scaling factors",
    "start": "3664870",
    "end": "3669880"
  },
  {
    "text": "for each boarding stop. It could be a 5%\noverall, or it could be there's a lot of\nnon-interaction at this stop,",
    "start": "3669880",
    "end": "3676750"
  },
  {
    "text": "but not this stuff stop. It could be correlated to loads. So many things could happen. You can scale up this way.",
    "start": "3676750",
    "end": "3682720"
  },
  {
    "text": "And now we have\neverything together. So this is just\ncombining the terms.",
    "start": "3682720",
    "end": "3687880"
  },
  {
    "text": "This is the scaling\nfactor for not observed, so if n is a flat\n5%, this is 1.05.",
    "start": "3687880",
    "end": "3695559"
  },
  {
    "text": "And then I is what\nyou had from ODX. And uL is the application of\nthe destinations improbability",
    "start": "3695560",
    "end": "3704660"
  },
  {
    "text": "to the people that had origins,\nbut not inferred destinations. OK?",
    "start": "3704660",
    "end": "3709839"
  },
  {
    "text": "Questions about this\nmethod, the scaling method? This for one trip, or for\nbus trips together, say.",
    "start": "3709840",
    "end": "3717690"
  },
  {
    "text": "It's not journey-level scaling. So let's move on to\njourney-level scaling.",
    "start": "3717690",
    "end": "3723620"
  },
  {
    "text": "So now we're getting a\nlittle more complicated. So we have journeys, which\ninclude full itineraries",
    "start": "3723620",
    "end": "3730760"
  },
  {
    "text": "of people boarding\nat one location, or entering a station in one\nlocation, doing several trips,",
    "start": "3730760",
    "end": "3736640"
  },
  {
    "text": "including transfers, possibly. And each of those is\nconsidered an itinerary. An itinerary could be one stage,\nor could be multiple stages",
    "start": "3736640",
    "end": "3743960"
  },
  {
    "text": "linked together with transfers. So again, we have\ninferred itineraries",
    "start": "3743960",
    "end": "3751910"
  },
  {
    "text": "for a portion of the demand. But we want to scale up the\ndemand, knowing control totals,",
    "start": "3751910",
    "end": "3757280"
  },
  {
    "text": "but at the itinerary level,\nbecause we have information about itineraries. So why not do it that way?",
    "start": "3757280",
    "end": "3763340"
  },
  {
    "text": "It could be more accurate. So it's challenging because\nthere are many possibilities.",
    "start": "3763340",
    "end": "3769340"
  },
  {
    "text": "And some places that\npeople go through don't have good control totals.",
    "start": "3769340",
    "end": "3775260"
  },
  {
    "text": "But essentially, we can\nfollow an approach that is, in essence,\nIPF but applied not",
    "start": "3775260",
    "end": "3782100"
  },
  {
    "text": "to boardings and alightings,\nbut to the scaling",
    "start": "3782100",
    "end": "3787620"
  },
  {
    "text": "factors themselves. So this is a toy example. Here's a rail line where\nthere's tap in and tap out.",
    "start": "3787620",
    "end": "3793440"
  },
  {
    "text": "Here's a bus line where\nthere's only tap in. So there are many\npossible itineraries that a person could have here.",
    "start": "3793440",
    "end": "3799860"
  },
  {
    "text": "Going from A to\nB, transfer to D, alight at E, that's\none itinerary. Go from A to C, through B,\nthat's another itinerary.",
    "start": "3799860",
    "end": "3807100"
  },
  {
    "text": "And at each of the nodes\nhere, A, B, C, D, E, there might be some counts. So on D and E, we only have on\ncounts because people are not",
    "start": "3807100",
    "end": "3815520"
  },
  {
    "text": "tapping off. On A, B, and C, we have on and\noff, or entry and exit, counts.",
    "start": "3815520",
    "end": "3821490"
  },
  {
    "text": "That means that there\nare these count nodes, A in, B out, as two\nexamples, where",
    "start": "3821490",
    "end": "3828630"
  },
  {
    "text": "we count how many people\ngo through that place. And we know from--",
    "start": "3828630",
    "end": "3839300"
  },
  {
    "text": "we have, for a portion of the\npeople, this ODX sample here, some number of itineraries that\ngo through A. So this is A in.",
    "start": "3839300",
    "end": "3848840"
  },
  {
    "text": "So we have some people going-- a portion of those\npeople are inferred",
    "start": "3848840",
    "end": "3854540"
  },
  {
    "text": "to have gone from A to\nB, a portion to ABC, a portion on the itinerary ABDE.",
    "start": "3854540",
    "end": "3861560"
  },
  {
    "text": "And then there's some portion\nof it, shown here as delta A in, who are included\nin the counts,",
    "start": "3861560",
    "end": "3868040"
  },
  {
    "text": "but we don't have an\ninference of their itinerary.",
    "start": "3868040",
    "end": "3873440"
  },
  {
    "text": "OK? So what we want to do is\nscale up the mixture of ODX here to make up the\ntotal entry count.",
    "start": "3873440",
    "end": "3882360"
  },
  {
    "text": "But there's a catch. These itineraries are\naffecting counts elsewhere",
    "start": "3882360",
    "end": "3887760"
  },
  {
    "text": "on the network. So we also have B\nout, as one example. And we know that\nthe people on TAB",
    "start": "3887760",
    "end": "3894360"
  },
  {
    "text": "also show up on the count on\nB, not the people going ABC, though. Those are not included\nin the count of B",
    "start": "3894360",
    "end": "3900660"
  },
  {
    "text": "out because they\ndon't exit at B. And there are some new\nitineraries showing up at B out",
    "start": "3900660",
    "end": "3907950"
  },
  {
    "text": "that are not in A in. So we want to somehow match\nthe counts at all the places",
    "start": "3907950",
    "end": "3914880"
  },
  {
    "text": "that are affected, or\nthat are showing up, or associated with\neach itinerary,",
    "start": "3914880",
    "end": "3922200"
  },
  {
    "text": "and scale the demand so\nthat the control totals are satisfied at all locations.",
    "start": "3922200",
    "end": "3927590"
  },
  {
    "text": "So the method is similar to IPF. We prepare a binary location\nitinerary incidence matrix",
    "start": "3927590",
    "end": "3933460"
  },
  {
    "text": "with zeros and ones,\nassociating each itinerary with the count nodes.",
    "start": "3933460",
    "end": "3939790"
  },
  {
    "text": "So A in, well, AB is one\nitinerary that is shown there. So is ABC, ABDE, not CB, not\nCBDE, not DE, as an example.",
    "start": "3939790",
    "end": "3950150"
  },
  {
    "text": "So we have this big\nmatrix of zeros and ones. And we have two equations.",
    "start": "3950150",
    "end": "3957339"
  },
  {
    "text": " Ti is the total scaled\nup itinerary demand",
    "start": "3957340",
    "end": "3966820"
  },
  {
    "text": "on itinerary i. And we know that\nthat total is going to be 1 plus the scaling\nfactor, or the scaling factor",
    "start": "3966820",
    "end": "3975490"
  },
  {
    "text": "is 1 plus alpha, really. Alpha is the portion\nover 1 that we want to scale by times the\nobserved or inferred flow",
    "start": "3975490",
    "end": "3983560"
  },
  {
    "text": "on that itinerary i, which is t. Then we also have this other\nrelationship that the remaining",
    "start": "3983560",
    "end": "3991690"
  },
  {
    "text": "portion of the count on a node,\nwhich is the count on node n,",
    "start": "3991690",
    "end": "3997270"
  },
  {
    "text": "the control total on\nnode n, minus the portion that was seen through\nthat place is the amount--",
    "start": "3997270",
    "end": "4006060"
  },
  {
    "text": "it adds up to the sum\nof all itineraries going through that place times\ntheir scaling factors.",
    "start": "4006060",
    "end": "4012295"
  },
  {
    "text": "So now we need to figure out\nwhat the scaling factors are for each itinerary, satisfying\nboth of these equations.",
    "start": "4012295",
    "end": "4018490"
  },
  {
    "text": "We have two\nequations on vectors, we have it on control nodes, and\nwe also have it on itineraries.",
    "start": "4018490",
    "end": "4025950"
  },
  {
    "text": "So we're back to\nthe same situation. We can do IPF on\nitineraries and count nodes.",
    "start": "4025950",
    "end": "4033329"
  },
  {
    "text": "And that's what we do. If we have better data, we could\ninitialized with a good seed matrix, otherwise you\ncould initialized to 1.",
    "start": "4033330",
    "end": "4041200"
  },
  {
    "text": "We then update the estimated\ncount nodes, which is delta.",
    "start": "4041200",
    "end": "4049740"
  },
  {
    "text": "Again, delta here\nis the difference between the count of\nflow through that node",
    "start": "4049740",
    "end": "4056339"
  },
  {
    "text": "and the observed flow. So it's the part that\nyou have to scale up to. And you do that for all nodes.",
    "start": "4056340",
    "end": "4062609"
  },
  {
    "text": "And then you-- oh, let's\nlook at what happens here. So when you apply this equation,\nyou calculate a delta hat",
    "start": "4062610",
    "end": "4070620"
  },
  {
    "text": "right here. That is much higher,\nit looks like. Yeah, it's much higher than\nthe actual measured delta.",
    "start": "4070620",
    "end": "4078919"
  },
  {
    "text": "So you know that\nthat initial scaling is producing demand flow that\nis too high through those nodes.",
    "start": "4078919",
    "end": "4085859"
  },
  {
    "text": "And that's because\nwe said that alpha was 1 for all of those nodes. But it isn't, so those alphas\nneed to be adjusted now.",
    "start": "4085860",
    "end": "4093210"
  },
  {
    "text": "So we moved to alphas. And we update alphas by\nlooking at, essentially,",
    "start": "4093210",
    "end": "4098490"
  },
  {
    "text": "the average scaling\nfactor required across these control deltas\nthat apply to each itinerary.",
    "start": "4098490",
    "end": "4107399"
  },
  {
    "text": "Not all of them apply\nto each itinerary. So for itinerary\nAB, you would take the average required\nadjustment factor",
    "start": "4107399",
    "end": "4115500"
  },
  {
    "text": "across all the deltas\nthat apply to AB, which are only the first two. You wouldn't include\nthe last three",
    "start": "4115500",
    "end": "4122310"
  },
  {
    "text": "because they don't touch AB. So you calculate the average,\nand you adjust the alphas.",
    "start": "4122310",
    "end": "4130119"
  },
  {
    "text": "But now you're not getting\nthe demand that you expected,",
    "start": "4130120",
    "end": "4136060"
  },
  {
    "text": "so you have to go back, and\nyou cycle through again. And you go back and\nforth, back and forth.",
    "start": "4136060",
    "end": "4141220"
  },
  {
    "text": "You apply these two\nequations until you converge. And convergence in this case\nmeans that the delta hats",
    "start": "4141220",
    "end": "4147609"
  },
  {
    "text": "will match the deltas\nthat you measured, and that the alpha\nvalues are not changing",
    "start": "4147609",
    "end": "4152979"
  },
  {
    "text": "much between iterations. OK? So we haven't seen the\nproof that this converges.",
    "start": "4152979",
    "end": "4162660"
  },
  {
    "text": "It relies on an average here. So it's an introduction or\na new aspect of the method.",
    "start": "4162660",
    "end": "4169560"
  },
  {
    "text": "But in every test that\nwe've run, it does converge.",
    "start": "4169560",
    "end": "4174670"
  },
  {
    "text": "On a toy example,\nwhere we didn't know what the actual\njourneys were, because we produced\nthe real data,",
    "start": "4174670",
    "end": "4181089"
  },
  {
    "text": "and then we hit it,\nand scaled it up, we started with different\nrequired scaling factors",
    "start": "4181090",
    "end": "4190750"
  },
  {
    "text": "by itinerary. So in the blue line case,\nthis blue line right here,",
    "start": "4190750",
    "end": "4199480"
  },
  {
    "text": "the scaling factors\nrequired across itineraries were very similar to each other. They all needed to be scaled\nup by the same amount.",
    "start": "4199480",
    "end": "4206750"
  },
  {
    "text": "And what we show here is\nthat the solution converged very quickly, and that\nthe accuracy was high,",
    "start": "4206750",
    "end": "4213280"
  },
  {
    "text": "because the root mean\nsquared error was low. OK? But then as we start\nmoving to differences",
    "start": "4213280",
    "end": "4219940"
  },
  {
    "text": "in scaling factors\nrequired, the algorithm did converge and\nproduced different alphas",
    "start": "4219940",
    "end": "4224969"
  },
  {
    "text": "for each itinerary. But it took longer to\nconverge, and the root mean square of\nthe final solution",
    "start": "4224970",
    "end": "4232540"
  },
  {
    "text": "was higher, which makes sense. All these methods, the\nIPF founding methods amplify errors.",
    "start": "4232540",
    "end": "4239425"
  },
  {
    "text": "They amplify whatever you\ngive it at the beginning. So if you start with\nsomething all 1's and in fact,",
    "start": "4239425",
    "end": "4245949"
  },
  {
    "text": "they are quite different from\n1's or some of them are 1, and others are not, then\nyou're going to have a bigger",
    "start": "4245950",
    "end": "4252160"
  },
  {
    "text": "error in the final solution. So this was applied\nto London once again.",
    "start": "4252160",
    "end": "4261400"
  },
  {
    "text": "In practice, there is\nanother complication. People who are\ncounted at each node,",
    "start": "4261400",
    "end": "4270450"
  },
  {
    "text": "they don't all finish\ntheir journeys, or they don't all start their\njourneys in the time band",
    "start": "4270450",
    "end": "4278880"
  },
  {
    "text": "that you are including\nthe counts in. So if you do a trip\nthat takes a whole hour,",
    "start": "4278880",
    "end": "4286620"
  },
  {
    "text": "you might be seeing\ntapping in here, and then you might end up\ntapping out at the next hour.",
    "start": "4286620",
    "end": "4292590"
  },
  {
    "text": "So you need control totals,\nin this case, by the hour. We were looking at hour scaling,\nscaling of demand every hour.",
    "start": "4292590",
    "end": "4299949"
  },
  {
    "text": "But you need to adjust\nthe control totals to get",
    "start": "4299950",
    "end": "4305550"
  },
  {
    "text": "what percentage of people\nwho are tapping out at this location\nactually started",
    "start": "4305550",
    "end": "4311639"
  },
  {
    "text": "their journey in that hour. How many of them actually\nstarted on the hour before? So there was an\noffset correction,",
    "start": "4311640",
    "end": "4318179"
  },
  {
    "text": "and this is what is\nbeing shown here. Here you have raw entries and\nraw exits in dashed lines.",
    "start": "4318180",
    "end": "4324000"
  },
  {
    "text": "And the correction essentially\nshifted those entries backwards in time a little\nbit, so that the control totals",
    "start": "4324000",
    "end": "4329930"
  },
  {
    "text": "matched. And then you can run the journey\nscaling as we just showed. ",
    "start": "4329930",
    "end": "4337050"
  },
  {
    "text": "And the results, we don't have\nground truth data in this case. You could run a survey.",
    "start": "4337050",
    "end": "4342630"
  },
  {
    "text": "I guess LTDS, in some\nways, is ground truth, but it's a low sample. The overall scaling\nrequired was about 50%.",
    "start": "4342630",
    "end": "4349469"
  },
  {
    "text": "You can see the 3/2 line here. One way of validating it\nwas to run it only on rail.",
    "start": "4349470",
    "end": "4358110"
  },
  {
    "text": "Because rail has OND, we can\nrun IPF on the rail matrix,",
    "start": "4358110",
    "end": "4363540"
  },
  {
    "text": "because you have the control\ntotals for all the gates in and out.",
    "start": "4363540",
    "end": "4368750"
  },
  {
    "text": "So there's no\ncomplication of the bus. You can run IPF on that. And it aligned very well with\nthe more sophisticated solution",
    "start": "4368750",
    "end": "4377310"
  },
  {
    "text": "of running this by proportional\nfitting on the itinerary",
    "start": "4377310",
    "end": "4382710"
  },
  {
    "text": "scaling factors, instead\nof the simpler IPF method. Presumably, the errors\nthat you see here",
    "start": "4382710",
    "end": "4389670"
  },
  {
    "text": "that are slightly\noff the diagonal are improvements in accuracy. Because instead of starting\nfrom, say, all 1's you",
    "start": "4389670",
    "end": "4397829"
  },
  {
    "text": "are using good information\nabout a seed matrix from ODX.",
    "start": "4397830",
    "end": "4403080"
  },
  {
    "text": "So the accuracy should\nhave been improving. We don't have, again, the ground\ntruth to assert that measure,",
    "start": "4403080",
    "end": "4412419"
  },
  {
    "text": "how close are we\nabout to reality. ",
    "start": "4412419",
    "end": "4417830"
  },
  {
    "text": "And one application\nof this, here's a chart showing all the origins.",
    "start": "4417830",
    "end": "4428610"
  },
  {
    "text": "So it's like a\nheat map of London. And a darker color of\nred shading each cell",
    "start": "4428610",
    "end": "4436880"
  },
  {
    "text": "shows a higher\nproportion of people originating at that location and\ngoing to Oxford Circus, which",
    "start": "4436880",
    "end": "4441889"
  },
  {
    "text": "is right here in the middle. So for a planner,\nlooking at this and knowing if I\nwant to know where",
    "start": "4441890",
    "end": "4448430"
  },
  {
    "text": "people are coming from to\nOxford circle, here's a map. And you can do is by time band,\nso only for the AM peak or--",
    "start": "4448430",
    "end": "4457619"
  },
  {
    "text": "there's many applications of\nthis origin destination data. I'm just showing you one here.",
    "start": "4457620",
    "end": "4464140"
  },
  {
    "text": "And here are some references,\nso Jay Gordon's thesis,",
    "start": "4464140",
    "end": "4469600"
  },
  {
    "text": "a paper he wrote. The Southwick reference is\nfor the scaling of buses",
    "start": "4469600",
    "end": "4476619"
  },
  {
    "text": "without the transfer demand. So if you want to\nread more about that,",
    "start": "4476620",
    "end": "4481930"
  },
  {
    "text": "that's the write up. And then I wrote a\npaper on the inference",
    "start": "4481930",
    "end": "4487989"
  },
  {
    "text": "of destinations using\ndynamic programming, instead of closest node. That's also published.",
    "start": "4487990",
    "end": "4493310"
  },
  {
    "text": "You can get that. And then finally,\nJay's website has the this visualizations for\nLondon, and Boston, and yeah.",
    "start": "4493310",
    "end": "4502000"
  },
  {
    "text": "So you can have fun\nlooking at that. ",
    "start": "4502000",
    "end": "4507380"
  },
  {
    "text": "All right. Do we have any\nquestions about this? ",
    "start": "4507380",
    "end": "4513120"
  },
  {
    "text": "We can watch the\nanimations again. And maybe now we really know--",
    "start": "4513120",
    "end": "4518960"
  },
  {
    "text": "now we really appreciate\nwhat went into it. AUDIENCE: So I know\nthere's a number",
    "start": "4518960",
    "end": "4524969"
  },
  {
    "text": "of old systems [AUDIO OUT]\na lot of newer systems are just doing proof of payment.",
    "start": "4524970",
    "end": "4531840"
  },
  {
    "text": "So in that case,\nthey only can use-- GABRIEL SANCHEZ-MARTINEZ:\nSo some new systems are proof of payment as well.",
    "start": "4531840",
    "end": "4537719"
  },
  {
    "text": "AUDIENCE: Right. And in that case, they\ncan only use APC to-- GABRIEL SANCHEZ-MARTINEZ:\nSo right. You can have APC.",
    "start": "4537720",
    "end": "4543360"
  },
  {
    "text": "APC has some issues, especially\nwhen the vehicle is crowded. Some people block APC sensors.",
    "start": "4543360",
    "end": "4548430"
  },
  {
    "text": "So you could have-- if it's proof of\npayment, manual surveys",
    "start": "4548430",
    "end": "4554550"
  },
  {
    "text": "is the other alternative. Yeah. ",
    "start": "4554550",
    "end": "4561190"
  },
  {
    "text": "And proof of payment is\nsomething we can debate. It has benefits and [AUDIO OUT].",
    "start": "4561190",
    "end": "4566469"
  },
  {
    "text": "So on the data\ncollections side, that's a clear disadvantage\nof proof of payment.",
    "start": "4566470",
    "end": "4571890"
  },
  {
    "text": "Yeah. AUDIENCE: So for the scaling--",
    "start": "4571890",
    "end": "4577600"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nWhich scaling method? AUDIENCE: The slide 41 GABRIEL\nSANCHEZ-MARTINEZ: 41, OK.",
    "start": "4577600",
    "end": "4583860"
  },
  {
    "text": "AUDIENCE: You've got an\nitinerary and an itinerary, so how many itineraries\ndo you have?",
    "start": "4583860",
    "end": "4589000"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nOh many, many, many, many. AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ:\nAny possible combination of--",
    "start": "4589000",
    "end": "4595630"
  },
  {
    "text": "I don't know if\nI have that here. AUDIENCE: This is only\none example of one trip. GABRIEL SANCHEZ-MARTINEZ:\nYeah, so--",
    "start": "4595630",
    "end": "4602100"
  },
  {
    "text": "AUDIENCE: So you have-- GABRIEL SANCHEZ-MARTINEZ:\nSo we know that there are\ntrillions of solutions that satisfy the control total.",
    "start": "4602100",
    "end": "4607659"
  },
  {
    "text": "I forget how many\nunique itineraries there are, but many, many, many.",
    "start": "4607660",
    "end": "4612730"
  },
  {
    "text": "It's a large number in a city\nlike London, particularly.",
    "start": "4612730",
    "end": "4618650"
  },
  {
    "text": "AUDIENCE: So for\nthis method, you-- GABRIEL\nSANCHEZ-MARTINEZ: So this is a computationally\nintense activity. Yeah.",
    "start": "4618650",
    "end": "4625730"
  },
  {
    "text": "AUDIENCE: You need\nthe APC information. GABRIEL SANCHEZ-MARTINEZ:\nOn bus, you",
    "start": "4625730",
    "end": "4630760"
  },
  {
    "text": "would want to have that. That would be one control total\nthat you could use for bus. This method is flexible,\nthough, because it",
    "start": "4630760",
    "end": "4637630"
  },
  {
    "text": "doesn't require that you have\ncontrol totals everywhere. You just use whatever\ncontrol total you trust.",
    "start": "4637630",
    "end": "4643967"
  },
  {
    "text": "So say, if you didn't\nhave APC on buses, then you would only use\nthe control total on rail.",
    "start": "4643967",
    "end": "4650000"
  },
  {
    "text": "If you have APC\non some buses, you could use the control\ntotals on those buses to improve the\nscaling information.",
    "start": "4650000",
    "end": "4656890"
  },
  {
    "text": "But it doesn't require that\nall the places have counts.",
    "start": "4656890",
    "end": "4662446"
  },
  {
    "text": "Does that make sense? Because you have, essentially,\na list of count nodes.",
    "start": "4662446",
    "end": "4668329"
  },
  {
    "text": "And that list is not necessarily\na complete list of places that people go through.",
    "start": "4668330",
    "end": "4673650"
  },
  {
    "text": "And then you have all the list\nof itineraries that you see,",
    "start": "4673650",
    "end": "4678739"
  },
  {
    "text": "and you want to associate those. ",
    "start": "4678740",
    "end": "4686330"
  },
  {
    "text": "Again, no proof of\nconvergence here. But [AUDIO OUT]. And on the toy\nexamples we run, we",
    "start": "4686330",
    "end": "4694280"
  },
  {
    "text": "observe these properties of\nconvergence rate and error",
    "start": "4694280",
    "end": "4700010"
  },
  {
    "text": "at the end, which is consistent\nwith normal or more traditional",
    "start": "4700010",
    "end": "4706079"
  },
  {
    "text": "applications of IPF. So we can hypothesize that\nit behaves very similarly.",
    "start": "4706080",
    "end": "4712596"
  },
  {
    "text": " Question in the back. AUDIENCE: [INAUDIBLE] generate a\nlist of reasonable itineraries.",
    "start": "4712596",
    "end": "4719639"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nIt's not a list of reasonable\nitineraries. It's a list of\ninferred itineraries. So it's an area\nthat was inferred",
    "start": "4719640",
    "end": "4727000"
  },
  {
    "text": "because I saw you\ntapping in here, out there, then transferring,\ntaking this bus, and maybe you took three\nother buses after that.",
    "start": "4727000",
    "end": "4733870"
  },
  {
    "text": "Maybe one person did that. AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ:\nThat's one itinerary that's included here. AUDIENCE: So do we just\nignore the possibility",
    "start": "4733870",
    "end": "4740269"
  },
  {
    "text": "that the people with\nuninferred destinations have-- GABRIEL SANCHEZ-MARTINEZ:\nSomething different? Yes.",
    "start": "4740270",
    "end": "4746139"
  },
  {
    "text": "You could generate\nevery combination, but that's maybe intractable. So what we're doing\nis only considering",
    "start": "4746140",
    "end": "4753130"
  },
  {
    "text": "itineraries that were observed,\nand only scaling those up. ",
    "start": "4753130",
    "end": "4759700"
  },
  {
    "text": "But that's a good point. There might be some\npeople that were counted,",
    "start": "4759700",
    "end": "4764780"
  },
  {
    "text": "but didn't have an inference,\nand their itinerary might be completely different. And this method\ndoesn't handle that.",
    "start": "4764780",
    "end": "4771730"
  },
  {
    "start": "4771730",
    "end": "4776926"
  },
  {
    "text": "AUDIENCE: How different is\n[AUDIO OUT] the scaling matrix,",
    "start": "4776926",
    "end": "4782369"
  },
  {
    "text": "compared with the traditional\nmatrix that you can calculate with the sample [INAUDIBLE]\nto infer the alighting?",
    "start": "4782370",
    "end": "4790010"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nYou mean the traditional IPF? AUDIENCE: Yes. Are you [INAUDIBLE]?",
    "start": "4790010",
    "end": "4795110"
  },
  {
    "text": "Is it very different? Or is-- GABRIEL SANCHEZ-MARTINEZ: No. Well, it depends on the\naccuracy of your IPF procedure",
    "start": "4795110",
    "end": "4802530"
  },
  {
    "text": "and the accuracy of\nyour control totals. Yeah, if your seed\nmatrix is very good,",
    "start": "4802530",
    "end": "4810030"
  },
  {
    "text": "then IPF should\n[AUDIO OUT] well. [AUDIO OUT] any applications\nof IPF, we just seed it to one",
    "start": "4810030",
    "end": "4818900"
  },
  {
    "text": "and run it. And you have the issue\nof the transfer, which",
    "start": "4818900",
    "end": "4823910"
  },
  {
    "text": "would plague that, and it\nwould amplify the error because presumably,\nyour seed matrix--",
    "start": "4823910",
    "end": "4830540"
  },
  {
    "text": "a lot of people might be\ngetting off here to transfer, and you may not be\nconsidering that. If you use IPF to scale\nup the inferred portion,",
    "start": "4830540",
    "end": "4837110"
  },
  {
    "text": "for example, that would happen. So I think through\nour validation,",
    "start": "4837110",
    "end": "4844760"
  },
  {
    "text": "we have seen that\nthere's more reason to trust the inference\nalgorithms scaled",
    "start": "4844760",
    "end": "4853070"
  },
  {
    "text": "up than to just take control\ntotals and scale those up. From an information\ntheory perspective,",
    "start": "4853070",
    "end": "4859690"
  },
  {
    "text": "we're adding information,\nso you should-- even if we can't provide\nevidence that absolutely, it",
    "start": "4859690",
    "end": "4865550"
  },
  {
    "text": "is the case, from\ninformation theory, we see we're consuming\nmore information to generate this estimate,\nthen that the estimate",
    "start": "4865550",
    "end": "4872300"
  },
  {
    "text": "should be more accurate. But it depends on whether your\ninferences were correct or not.",
    "start": "4872300",
    "end": "4879440"
  },
  {
    "text": "That depends on the assumptions\nyou made about people. So many assumptions\ngo into this,",
    "start": "4879440",
    "end": "4884980"
  },
  {
    "text": "and it's hard to say exactly. ",
    "start": "4884980",
    "end": "4892570"
  },
  {
    "text": "All right. So do you want to\nlook at Boston? Or--",
    "start": "4892570",
    "end": "4897716"
  },
  {
    "start": "4897716",
    "end": "4903869"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nLet's see.  Turn it off.",
    "start": "4903870",
    "end": "4911840"
  },
  {
    "text": "All right, so here's Boston. ",
    "start": "4911840",
    "end": "4926900"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ:\nIt's a much smaller city. And this is an earlier\nvideo where we still had some issues with ODX.",
    "start": "4926900",
    "end": "4933660"
  },
  {
    "text": "And so some of them,\nyou could perhaps detect by looking\nat the animation.",
    "start": "4933660",
    "end": "4939202"
  },
  {
    "text": "So that's another\napplication of this animation is to find issues\nwith the algorithm.",
    "start": "4939202",
    "end": "4945830"
  },
  {
    "text": "In this case, people\nare being routed through the actual paths. So that's another difference\nbetween the video of London,",
    "start": "4945830",
    "end": "4952610"
  },
  {
    "text": "where people were\nbursting in linearly. AUDIENCE: Right. GABRIEL SANCHEZ-MARTINEZ:\nHere, it looks less bursty,",
    "start": "4952610",
    "end": "4958568"
  },
  {
    "text": "and part of that is that the\nnodes are moving through paths. AUDIENCE: You see these thick\ndots along the red line.",
    "start": "4958568",
    "end": "4965480"
  },
  {
    "text": "GABRIEL SANCHEZ-MARTINEZ: Yeah. AUDIENCE: [INAUDIBLE] GABRIEL SANCHEZ-MARTINEZ: Yeah. ",
    "start": "4965480",
    "end": "4970580"
  },
  {
    "text": "Some of the issues are\nvery slowly-moving dots.",
    "start": "4970580",
    "end": "4976630"
  },
  {
    "text": "So you see some green\ndots that barely move. So those are errors that\nhave been fixed already,",
    "start": "4976630",
    "end": "4984490"
  },
  {
    "text": "and we should run\nthis program again to generate a new animation\nwithout those errors.",
    "start": "4984490",
    "end": "4991180"
  },
  {
    "text": "But yeah, you see\nthe same pattern. This is now late at night. So you can see where people\nare still at work, or perhaps",
    "start": "4991180",
    "end": "5000300"
  },
  {
    "text": "at restaurants, or bars. And Boston system\njust shuts down.",
    "start": "5000300",
    "end": "5008380"
  },
  {
    "text": "So it's not as alive at night\nbecause we're only looking at people who would take the T.",
    "start": "5008380",
    "end": "5017429"
  },
  {
    "text": "All right? Thank you. And if you have\nquestions, I'll take them.",
    "start": "5017430",
    "end": "5022480"
  },
  {
    "text": "Otherwise, I'll\nsee you next class. ",
    "start": "5022480",
    "end": "5041840"
  }
]