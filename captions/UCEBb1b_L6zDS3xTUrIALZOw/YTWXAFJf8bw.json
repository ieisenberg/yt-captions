[
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6050"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or to\nview additional materials",
    "start": "6050",
    "end": "12700"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "12700",
    "end": "26590"
  },
  {
    "text": "PROFESSOR: All right,\nlet's get started. So welcome to another exciting\nlecture about security",
    "start": "26590",
    "end": "33336"
  },
  {
    "text": "and why the world\nis so terrible. So today we're going to\ntalk about private browsing modes, something\nthat a lot of you",
    "start": "33336",
    "end": "38860"
  },
  {
    "text": "probably have a lot of\npersonal experience with. At a high level, what\nis the goal of privacy?",
    "start": "38860",
    "end": "43996"
  },
  {
    "text": "When security researchers\ntalk about privacy, what are they talking about? Well at a high level,\nthey're talking about the following goal.",
    "start": "43996",
    "end": "50060"
  },
  {
    "text": "So any particular user should be\nindistinguishable from a bunch",
    "start": "50060",
    "end": "55260"
  },
  {
    "text": "of other users. In particular, the\nactivity of a given user should be non-incriminating\nwhen viewed in light of activity",
    "start": "55260",
    "end": "62480"
  },
  {
    "text": "from a bunch of other\ndifferent users. And so, as I\nmentioned, today we're going to talk about privacy\nin the specific context",
    "start": "62480",
    "end": "69480"
  },
  {
    "text": "of private web browsing. And so there's actually\nno formal definition for what private\nweb browsing means.",
    "start": "69480",
    "end": "76960"
  },
  {
    "text": "There's a couple different\nreasons for that. So one reason is\nthat web applications are very, very complicated.",
    "start": "76960",
    "end": "82170"
  },
  {
    "text": "And they're adding new\nfeatures all the time like audio and video\ncapabilities and things like this. As a result, there's\nthis moving target",
    "start": "82170",
    "end": "89020"
  },
  {
    "text": "in terms of what\nbrowsers can do. And as a result,\nwhat information they might be able to leak\nabout a particular user.",
    "start": "89020",
    "end": "95469"
  },
  {
    "text": "And so what ends up happening\nis that in practice, like with many things\ninvolving browsers, there's this living standard.",
    "start": "95470",
    "end": "101990"
  },
  {
    "text": "So different\nbrowser vendors will implement different features,\nparticularly with respect to private browsing. Other vendors will look and\nsee what vendor X is doing.",
    "start": "101990",
    "end": "109150"
  },
  {
    "text": "They will update\ntheir own browser. So it's like a moving target.",
    "start": "109150",
    "end": "114260"
  },
  {
    "text": "And as users grow to rely on\nprivate browsing more and more, they end up a lot of times\nactually finding bugs",
    "start": "114260",
    "end": "120910"
  },
  {
    "text": "in private browsing mode,\nas I'll discuss a couple minutes later in the lecture. And so private browsing\nat a high level",
    "start": "120910",
    "end": "127510"
  },
  {
    "text": "you can think of as\nan aspirational goal. But we as society\nare continually refining what it means\nto do private browsing",
    "start": "127510",
    "end": "134070"
  },
  {
    "text": "and getting better\nin some aspects-- worse in some aspects-- as\nwe'll see a little bit later.",
    "start": "134070",
    "end": "139090"
  },
  {
    "text": "So what exactly do we\nmean by private browsing? It's tough. But the paper tries to formalize\nit in two specific ways.",
    "start": "139090",
    "end": "147030"
  },
  {
    "text": "So first of all, the paper\ntalks about a local attacker on private web browsing.",
    "start": "147030",
    "end": "153015"
  },
  {
    "text": "This is someone who\nis going to possess your machine after you've\nfinished a private browsing session. And it wants to figure\nout what sites you looked",
    "start": "153015",
    "end": "159066"
  },
  {
    "text": "at in private browsing mode. And the paper also talks\nabout web attackers.",
    "start": "159066",
    "end": "164520"
  },
  {
    "text": "The web attacker is someone\nwho controls the websites that you visit. And this web attacker might\nwant to try to figure out",
    "start": "164520",
    "end": "171750"
  },
  {
    "text": "that you are some particular\nperson John or Jane as opposed to some amorphous user\nthat the website can't",
    "start": "171750",
    "end": "178460"
  },
  {
    "text": "tell who they are. And so we'll look at each one\nof these attacks in detail.",
    "start": "178460",
    "end": "183840"
  },
  {
    "text": "But for now, suffice it to say\nthat if the attacker can launch both of these attacks--\nboth a local and a web",
    "start": "183840",
    "end": "190487"
  },
  {
    "text": "attack-- that actually really\nstrengthens their ability to try to dearm us. So, for example,\na local attacker",
    "start": "190488",
    "end": "196230"
  },
  {
    "text": "who, for example, maybe\nknows your IP address can actually talk to the\nwebsite and say, hey,",
    "start": "196230",
    "end": "201390"
  },
  {
    "text": "have you seen this particular\nIP address in your logs. If so, aha! You're looking at the user whose\nmachine I control right now.",
    "start": "201390",
    "end": "208744"
  },
  {
    "text": "So it's actually pretty useful\nfrom a security perspective to consider these\nlocal and web attacks. So they are separate\nthings and then to see",
    "start": "208744",
    "end": "215090"
  },
  {
    "text": "how they can possibly compose. So let's look at this\nfirst type of attacker,",
    "start": "215090",
    "end": "222100"
  },
  {
    "text": "which is the local attacker. ",
    "start": "222100",
    "end": "229880"
  },
  {
    "text": "So as I mentioned, we\nassume that this attacker",
    "start": "229880",
    "end": "234890"
  },
  {
    "text": "is going to control the\nuser's machine post-session.",
    "start": "234890",
    "end": "242700"
  },
  {
    "text": "And so by post-session, I\nmean that the private browsing",
    "start": "242700",
    "end": "247784"
  },
  {
    "text": "activity has already finished--\nthe user has perhaps gone off and done something else.",
    "start": "247784",
    "end": "252809"
  },
  {
    "text": "It's not at the computer. And then the attacker\ntakes control of that issue and wants to figure\nout what's going on.",
    "start": "252809",
    "end": "257890"
  },
  {
    "text": "And so the security goal is\nthat well we don't the attacker be able to figure out\nany of the websites",
    "start": "257890",
    "end": "263080"
  },
  {
    "text": "that the user visited during\nthis private browsing activity. Now, the reason why the\npost is actually important",
    "start": "263080",
    "end": "269885"
  },
  {
    "text": "there is because if we assume\nthat the attacker can control the machine before the\nusers private browsing, then basically it's game over,\nright, because the attacker can",
    "start": "269885",
    "end": "277370"
  },
  {
    "text": "install a keystroke logger-- the\nattacker can subvert the binary that [INAUDIBLE] the browser.",
    "start": "277370",
    "end": "284120"
  },
  {
    "text": "The attacker can subert the OS. So we don't really care about\nthis pre-session attacker.",
    "start": "284120",
    "end": "290460"
  },
  {
    "text": "And also note that we're not\ntrying to provide privacy for the user after the attacker\nhas controlled the machine.",
    "start": "290460",
    "end": "297189"
  },
  {
    "text": "And that's for the same reason. Once the attacker\ngets to the machine, he or she can do the same thing\nthat is mentioned-- key logger.",
    "start": "297189",
    "end": "302535"
  },
  {
    "text": "So, basically, once the\nuser leaves the machine, we don't assume any\nforward notions of privacy.",
    "start": "302535",
    "end": "308840"
  },
  {
    "text": "Does that make sense? It's pretty straightforward. And so you can imagine that\nanother goal that you might",
    "start": "308840",
    "end": "314699"
  },
  {
    "text": "want to try to\nsatisfy here is you might want to try to\nhide from the attacker",
    "start": "314700",
    "end": "320150"
  },
  {
    "text": "that the user was employing\nprivate browsing mode at all. Now the paper actually\nsaid that's very difficult.",
    "start": "320150",
    "end": "326290"
  },
  {
    "text": "This property is often\ncalled plausible deniability. So your boss comes up to you\nafter you use private browsing,",
    "start": "326290",
    "end": "331389"
  },
  {
    "text": "and says were you looking\nat mylittlepony.com? No, no, I certainly wasn't. And I certainly wasn't\nusing private browsing mode",
    "start": "331389",
    "end": "337110"
  },
  {
    "text": "to hide the fact that I was\nlooking at mylittlepony.com. So as I said, the\npaper said it's difficult to provide\nthis property",
    "start": "337110",
    "end": "342389"
  },
  {
    "text": "of plausible deniability. I'll give you some\nconcrete reasons why this might be the\ncase a little bit later on in the lecture.",
    "start": "342390",
    "end": "348570"
  },
  {
    "text": "But that basically is an\noverview of the local attacker. So one question we might\nwant to think about",
    "start": "348570",
    "end": "355142"
  },
  {
    "text": "is what kinds of persistent\nclient-side state",
    "start": "355142",
    "end": "365760"
  },
  {
    "text": "can be leaked by a\nprivate browsing session?",
    "start": "365760",
    "end": "371041"
  },
  {
    "text": " And by persistent,\nI just mean stuff",
    "start": "371041",
    "end": "378796"
  },
  {
    "text": "that will end up getting\nstored on the local hard disk, the local SSD or whatever.",
    "start": "378796",
    "end": "384716"
  },
  {
    "text": "So what kinds of state might\nbe leaked if we weren't careful when someone is doing this\ntype of private browsing? So one thing you\nmight be worried about",
    "start": "384716",
    "end": "391010"
  },
  {
    "text": "is JavaScript accessible states.",
    "start": "391010",
    "end": "398150"
  },
  {
    "text": "So examplees of this includes\nthings like cookies and DOM",
    "start": "398150",
    "end": "405391"
  },
  {
    "text": "storage.  Another thing you might\nbe worried about--",
    "start": "405391",
    "end": "412220"
  },
  {
    "text": "and this is what most people\nthink about when they think about what they want to\nsay in private browsing-- is maybe the browser cache.",
    "start": "412220",
    "end": "419514"
  },
  {
    "text": "So you don't want someone\nto look in the inner cache and figure out here\nare some images or HTML files from websites\nyou prefer people",
    "start": "419514",
    "end": "425908"
  },
  {
    "text": "didn't know that you visited.  Another important thing is\nyour history of visited sites.",
    "start": "425908",
    "end": "436376"
  },
  {
    "text": " So many of your\nrelationships have",
    "start": "436377",
    "end": "441486"
  },
  {
    "text": "been broken when the other goes\nto the browser-- start typing something into to the address\nbar and all of a sudden it auto-completes to\nsomething very embarrassing.",
    "start": "441486",
    "end": "448280"
  },
  {
    "text": "So this is one\nthing definitely you don't want to leak outside\nthe private browsing session.",
    "start": "448281",
    "end": "453610"
  },
  {
    "text": "You can also think about\nconfiguration states with the browsing.",
    "start": "453610",
    "end": "459830"
  },
  {
    "text": "And so here you could\nthink about things like client certificates.",
    "start": "459830",
    "end": "467330"
  },
  {
    "text": "You could also think about\nstuff like bookmarks. ",
    "start": "467330",
    "end": "475170"
  },
  {
    "text": "Maybe if you logged into a\nparticular site and the browser offers to store your\npasswords in another type",
    "start": "475170",
    "end": "480177"
  },
  {
    "text": "of configuration state that\nyou might not want leaking from private browsing mode.",
    "start": "480178",
    "end": "485210"
  },
  {
    "text": "Downloaded files--\nas we'll discuss, this one's a little\nbit interesting",
    "start": "485210",
    "end": "492520"
  },
  {
    "text": "because downloading a file\nactually requires explicit user action to download that file. Maybe we do actually\nwant this stuff",
    "start": "492520",
    "end": "498876"
  },
  {
    "text": "to leak outside of\nprivate browsing mode. Maybe if you download something\nin private browsing mode, it should actually be accessible\nwhen you open the browser",
    "start": "498876",
    "end": "505247"
  },
  {
    "text": "or use the machine\nafter that session. So we'll talk about this\na little bit in a second.",
    "start": "505247",
    "end": "510659"
  },
  {
    "text": "And then, finally, during\nprivate browsing mode, you might install new\nplug-ins or browser sessions.",
    "start": "510660",
    "end": "519261"
  },
  {
    "text": " That's another type\nof state that you",
    "start": "519261",
    "end": "525030"
  },
  {
    "text": "might imagine you don't\nwant to leak outside of private browsing mode.",
    "start": "525030",
    "end": "530160"
  },
  {
    "text": "So, basically, current\nbrowsing modes typically try to prevent one, two, and\nthree from leaking outside",
    "start": "530160",
    "end": "538750"
  },
  {
    "text": "of private browser sessions. Right? So there shouldn't be\nany cookies or DOM stores to get out of there. Anything you put in a cache\nduring a private browsing",
    "start": "538750",
    "end": "545940"
  },
  {
    "text": "session should be deleted. And you shouldn't have\nany history of the URLs that you're using.",
    "start": "545940",
    "end": "551160"
  },
  {
    "text": "Typically, four, five, and\nsix private browsing modes allow to leak\noutside of a session.",
    "start": "551160",
    "end": "556890"
  },
  {
    "text": "And there's some good\nand some bad reasons why this might be the case. And as we'll\ndiscuss later, we'll",
    "start": "556890",
    "end": "562400"
  },
  {
    "text": "see if you allow anything to\nleak from the private browsing session, that actually\nradically increases the threat",
    "start": "562400",
    "end": "568130"
  },
  {
    "text": "surface of private leaks. So it becomes much more\ndifficult to reason about what the\nsecurity properties are",
    "start": "568130",
    "end": "573240"
  },
  {
    "text": "for private browsing mode. Does that all make sense? Anyone have any questions?",
    "start": "573240",
    "end": "578370"
  },
  {
    "text": "It's pretty straightforward. So the next thing we're going\nto talk about very briefly",
    "start": "578370",
    "end": "585320"
  },
  {
    "text": "is network activity during\nprivate browsing mode.",
    "start": "585320",
    "end": "590704"
  },
  {
    "text": "And what's\ninteresting about this is that even if we\ncover all this stuff--",
    "start": "590704",
    "end": "596911"
  },
  {
    "text": "we don't allow private\nbrowsing to leak anything from there-- the mere fact that\nyou're issuing network packet",
    "start": "596911",
    "end": "602060"
  },
  {
    "text": "connections leave evidence\nof what you were doing. So imagine when you\nwant to go to foo.com, the website, your\nmachine actually",
    "start": "602060",
    "end": "608540"
  },
  {
    "text": "has to issue a DNS resolution\nrequest for foo.com. So even if you don't\nleave any of this type",
    "start": "608540",
    "end": "614050"
  },
  {
    "text": "of persistent state\nup there, there may be records in\nyour local DNS cache that you, in fact, tried to\nresolve the hostname foo.com.",
    "start": "614050",
    "end": "621681"
  },
  {
    "text": "That's very interesting. So you can imagine\nthat browsers could try to flush the\nDNS cache somehow",
    "start": "621681",
    "end": "627660"
  },
  {
    "text": "after the private\nsession was over. Now, in practice,\nthat's actually tricky to do because\non many systems, you require administrator\nprivileges to do that.",
    "start": "627660",
    "end": "634480"
  },
  {
    "text": "So it's not clear if you want\nthe browser running as root because browsers, as\nwe've seen, are somewhat",
    "start": "634480",
    "end": "640115"
  },
  {
    "text": "untrustworthy individuals. And also too-- a\nlot of DNS flush commands-- they don't\nactually act per user.",
    "start": "640115",
    "end": "646290"
  },
  {
    "text": "They flush the\nentire cache, which is typically not what you would\nwant if you're implementing private browsing mode. You'd want to use a\ntype of surgical thing",
    "start": "646290",
    "end": "653000"
  },
  {
    "text": "where I only want to get rid\nof foo.com and things that were visited during this\nprivate browsing sessions, but not delete other things.",
    "start": "653000",
    "end": "659470"
  },
  {
    "text": "So in practice, that's kind\nof a tricky thing to handle. And another tricky\nthing to handle, which the paper mentions--\nare these things",
    "start": "659470",
    "end": "668310"
  },
  {
    "text": "that I'll call RAM artifacts. ",
    "start": "668310",
    "end": "673330"
  },
  {
    "text": "So the basic idea here is that\nduring private browsing mode, that private browser has to be\nkeeping some stuff in memory.",
    "start": "673330",
    "end": "682320"
  },
  {
    "text": "And so even if the\nprivate browsing mode doesn't issue any direct\nI/Os to disk-- user rights.",
    "start": "682320",
    "end": "689630"
  },
  {
    "text": "The RAM that belongs to\nthat private browsing tab can still be reflected into\nthe page file, for example.",
    "start": "689630",
    "end": "695720"
  },
  {
    "text": "It can still be reflected\ninto the hibernation file, for example, the laptop. And so if that\nstate gets reflected",
    "start": "695720",
    "end": "702500"
  },
  {
    "text": "into persistent storage, then\nwhat may end up happening is that after your private\nbrowsing session is over,",
    "start": "702500",
    "end": "707740"
  },
  {
    "text": "the attacker can look in\nyour page file, for example, and find, for example,\nJavaScript code that was reflected to\ndisk or find HTML",
    "start": "707740",
    "end": "714480"
  },
  {
    "text": "that was reflected to disk. So we're going to have a\nlittle demonstration of how",
    "start": "714480",
    "end": "719650"
  },
  {
    "text": "this might work. So if you see up\nhere on the screen, I basically loaded up\nprivate browsing tabs.",
    "start": "719650",
    "end": "729750"
  },
  {
    "text": "And so what I'm\ngoing to do is I'm going to go to some website.",
    "start": "729750",
    "end": "735810"
  },
  {
    "text": "So this is for the PDOS\ngroup here at CSAIL.",
    "start": "735810",
    "end": "741360"
  },
  {
    "text": "I've loaded up that page. And then what I'm\ngoing to do is use this fun command called gcore.",
    "start": "741360",
    "end": "748540"
  },
  {
    "text": "So, basically, I'm\ngoing to take a memory snapshot of this running page.",
    "start": "748540",
    "end": "754200"
  },
  {
    "text": "And so I will do\nthe following magic. ",
    "start": "754200",
    "end": "768779"
  },
  {
    "text": "So basically there's\ngoing to be some work that my terminal is doing to\ngenerate that memory snapshot.",
    "start": "768780",
    "end": "778345"
  },
  {
    "text": " So this takes a little\nbit of time sometimes.",
    "start": "778345",
    "end": "784980"
  },
  {
    "start": "784980",
    "end": "790399"
  },
  {
    "text": "Now, what's happening here.",
    "start": "790400",
    "end": "796220"
  },
  {
    "text": "So now we've basically\ngenerated the core file for that private browsing image. So what we're going\nto do now is we're",
    "start": "796220",
    "end": "802570"
  },
  {
    "text": "going to look\ninside of that image and see if we can find\nany mentions of PDOS.",
    "start": "802570",
    "end": "810790"
  },
  {
    "text": " And so what's\ninteresting is we see a ton of instances of the\nstring PDOS in that memory image",
    "start": "810790",
    "end": "819410"
  },
  {
    "text": "for the private browsing mode. And so what is interesting\nis we actually see various prefixes for things.",
    "start": "819410",
    "end": "825610"
  },
  {
    "text": "If we look further\nup, we can see things like there's full URLs\nhere and things like this.",
    "start": "825610",
    "end": "832630"
  },
  {
    "text": "You also find HTML\ncode in there. So the point here is\nthat if we found all this",
    "start": "832630",
    "end": "838580"
  },
  {
    "text": "in the memory of that page, then\nif this-- if any of those pages got put to disk in the\npage file, then he attacker",
    "start": "838580",
    "end": "845786"
  },
  {
    "text": "could basically\njust run strings. So they could do what I\njust did over the page file and try to find out what\nsites that you visited",
    "start": "845786",
    "end": "851560"
  },
  {
    "text": "in private browsing mode. So does that make sense? Basically, the problem here\nis that private browsing modes",
    "start": "851560",
    "end": "857540"
  },
  {
    "text": "don't try to obfuscate RAM\nbasically or encrypt it in any way. And that seems like a pretty\nfundamental thing because",
    "start": "857540",
    "end": "863300"
  },
  {
    "text": "at a certain point,\nthe processor has to execute on\nclear text data. And so this is actually\na pretty big challenge.",
    "start": "863300",
    "end": "871813"
  },
  {
    "text": "So does anyone\nhave any questions? Yeah? AUDIENCE: So one thing is\nI don't expect my browser",
    "start": "871814",
    "end": "877472"
  },
  {
    "text": "to do that. One thing is that these\nbrowsers-- the guarantee that they give you\nthrough private browsing--",
    "start": "877472",
    "end": "882895"
  },
  {
    "text": "the example they give is if\nyou're shopping for something, your layman friend\ncan't go on the computer and see the things.",
    "start": "882895",
    "end": "889179"
  },
  {
    "text": "So can you talk a little bit\nabout what guarantees they give and if they had\nto change anything as a consequence of this paper?",
    "start": "889179",
    "end": "894360"
  },
  {
    "text": "PROFESSOR: Yeah, it's\nvery interesting. One thing you can look\nat is when you open up a private browsing\ntab, typically",
    "start": "894360",
    "end": "900335"
  },
  {
    "text": "there will be a little\nblurb that says, hey, welcome to incognito mode. Here's where we'll\nhelp you against. We won't help you if someone\nis standing behind you",
    "start": "900335",
    "end": "907199"
  },
  {
    "text": "with a rubber hose\nabout to beat you. And so the browser\nvendors themselves area little bit cagey about\nwhat guarantees they provide.",
    "start": "907200",
    "end": "914737"
  },
  {
    "text": "And in fact, after the Snowden\nincident, a lot of the browsers actually changed\nthat splash page because they wanted to\nactually make it clear",
    "start": "914737",
    "end": "920532"
  },
  {
    "text": "that we're not actually\nprotecting from strong ways with the NSA or\nsomething like that. So long story short,\nwhat guarantees",
    "start": "920533",
    "end": "926505"
  },
  {
    "text": "are they providing you? In practice, they're\nproviding that weak thing that you mention there. It's like a lay\nperson who wanted",
    "start": "926505",
    "end": "933266"
  },
  {
    "text": "to see what you were\ndoing afterwards couldn't figure out\nwhat you were doing. And we're assuming\nthe lay person",
    "start": "933266",
    "end": "938365"
  },
  {
    "text": "can't run strings on the page\nfile or things like that. Now, the problem-- there's\nactually two problems though.",
    "start": "938365",
    "end": "943560"
  },
  {
    "text": "One problem is that first\nof all, because browsers are so complicated,\nthey often don't even",
    "start": "943560",
    "end": "949720"
  },
  {
    "text": "protect against the layperson. I can give you a\npersonal example. So a lot of times when you\nsee those ridiculous ads",
    "start": "949720",
    "end": "956920"
  },
  {
    "text": "from \"Huffington Post,\"\nlike, oh, my gosh. It's like puppies trying to\nhelp small puppies go down stairs and things like that.",
    "start": "956920",
    "end": "962310"
  },
  {
    "text": "Right? Because I'm weak, I will\nsometimes hook on those things. But because I don't know\nwant people to know that,",
    "start": "962310",
    "end": "968093"
  },
  {
    "text": "I'll sometimes do that\nin private browsing mode. So what will happen sometimes\nis that sometimes I'll see those URLs will\nleak into my URL history",
    "start": "968093",
    "end": "976610"
  },
  {
    "text": "like my regular, public\nmode browser, which is precisely what this\nstuff is designed not to do.",
    "start": "976610",
    "end": "982220"
  },
  {
    "text": "So one problem is that\nsometimes these browsers don't provide protection\nagainst the layperson attackers.",
    "start": "982220",
    "end": "987720"
  },
  {
    "text": "The second thing is I think\nthat there are actually a lot of people who would\nlike for private browsing mode to provide something\nstronger, particularly",
    "start": "987720",
    "end": "994652"
  },
  {
    "text": "with the whole Snowden thing. I think there is a lot\nof people increasingly who would like private\nbrowsing mode to protect, for example, against these\nRAM artifact attacks,",
    "start": "994652",
    "end": "1001510"
  },
  {
    "text": "even though they may not be\nable to technically articulate that goal. And so actually one\nof the things I've",
    "start": "1001510",
    "end": "1007200"
  },
  {
    "text": "done while I was\nhere, I got to do some research in a stronger\nprivate browsing mode protection. So we can chat about\nthat after all.",
    "start": "1007200",
    "end": "1012350"
  },
  {
    "text": "One of the things we\nlearn about all professors is that we will talk about\nour research endlessly. So if you want to talk about\nthat for three hours just",
    "start": "1012350",
    "end": "1019013"
  },
  {
    "text": "send me a calendar request. And we can do that. So, anyway, this is\nbasically a demonstration.",
    "start": "1019013",
    "end": "1026099"
  },
  {
    "text": "Oh, you had a question? AUDIENCE: Yeah, about the RAM. So I'm not familiar with\nhow it works exactly.",
    "start": "1026099",
    "end": "1032375"
  },
  {
    "text": "How come a browser can't\nat the end of a session, just ask the OS to flush those\nparts around that he was using?",
    "start": "1032375",
    "end": "1039384"
  },
  {
    "text": "PROFESSOR: So we're\nactually going to get to that topic\nin a couple of minutes. But you are correct. At a high level,\nwhat you can imagine",
    "start": "1039384",
    "end": "1046920"
  },
  {
    "text": "is that maybe the OS when it,\nfor example, killed a process, would actually go through\nall those numbered pages",
    "start": "1046920",
    "end": "1052510"
  },
  {
    "text": "and write zeros to\nall those pages. Or you could also imagine\nthat maybe the browser tried to pin all the pages in\nmemory to prevent anything",
    "start": "1052510",
    "end": "1060140"
  },
  {
    "text": "from getting flushed out at all. So there are some\nsolutions that can do that. So hold onto that\nquestion for one second.",
    "start": "1060140",
    "end": "1068040"
  },
  {
    "text": "This is basically an\nexample of how data from RAM can leak onto disk\nthrough paging activity.",
    "start": "1068040",
    "end": "1073060"
  },
  {
    "text": "But note that data lifetime\nis a bigger problem than just",
    "start": "1073060",
    "end": "1078460"
  },
  {
    "text": "in the context of\nprivate browsing. You can imagine that any\nprograms that deals with, let's say, cryptographic\nkeys or user passwords",
    "start": "1078460",
    "end": "1085740"
  },
  {
    "text": "will have this problem. Anytime you type in your\npassword to a a program, the memory page which holds\nthat password can always get",
    "start": "1085740",
    "end": "1092330"
  },
  {
    "text": "reflected to disk. So let me show you\nanother example of this.",
    "start": "1092330",
    "end": "1097559"
  },
  {
    "text": "So let's say that we looked at\nthe following program, which",
    "start": "1097560",
    "end": "1104140"
  },
  {
    "text": "is pretty simple. It's called memclear. So you see here at\nthe bottom and main, we're just going to read in\nsome secret text file here.",
    "start": "1104140",
    "end": "1113409"
  },
  {
    "text": "And then we're just\ngoing to sleep forever. So what is that Read Secret do? Basically, it reasons from file.",
    "start": "1113410",
    "end": "1122470"
  },
  {
    "text": "It's going to print out\nthe contents of that file.",
    "start": "1122470",
    "end": "1128789"
  },
  {
    "text": "And then it's actually\ngoing to clear out the buffer that was used to\nstore that secret information.",
    "start": "1128790",
    "end": "1134040"
  },
  {
    "text": "So getting back to your issue. So one can imagine the\nbrowser, for example, would try to just memset to\nzero all the secrets that it",
    "start": "1134040",
    "end": "1141180"
  },
  {
    "text": "encountered when it's\njust in private browser. So if we look at the secret\nfiles, it's not very fun.",
    "start": "1141180",
    "end": "1152809"
  },
  {
    "text": "It just says, my\nsecrets of in a file. And then if we run this\nprogram, in the background--",
    "start": "1152810",
    "end": "1161230"
  },
  {
    "text": "so what did it do? So like I said, it\njust printed it out. It read that file in, printed\nout the secret value--",
    "start": "1161230",
    "end": "1166970"
  },
  {
    "text": "cleared the memory\nbuffer that it used to print that stuff out. Now it's just sleeping\nin the background.",
    "start": "1166970",
    "end": "1172870"
  },
  {
    "text": "So once again, if we use\nthis fun gcore command,",
    "start": "1172870",
    "end": "1179190"
  },
  {
    "text": "we can take a memory dump\nof the memclear program that's running in\nmemory right now.",
    "start": "1179190",
    "end": "1186730"
  },
  {
    "text": "OK, and then if we\ndo-- let's see which ones we're going to look at.",
    "start": "1186730",
    "end": "1194440"
  },
  {
    "text": "So then if we look at--\nthis guy is the one we want.",
    "start": "1194440",
    "end": "1200389"
  },
  {
    "text": "And then we do a\ngrep for a secret.",
    "start": "1200390",
    "end": "1205540"
  },
  {
    "text": "So once again, we\nsee that if look in the RAM image of\nthat running program,",
    "start": "1205540",
    "end": "1211700"
  },
  {
    "text": "we found instances of\nboth the file name that was read in and also some\nprefixes of the string",
    "start": "1211700",
    "end": "1217240"
  },
  {
    "text": "contents of that\nfile, even though we wiped the buffer in\nthe C program itself.",
    "start": "1217240",
    "end": "1224190"
  },
  {
    "text": "So you might say\nwhy did this happen? This seems very, very strange. And the reason is that if\nyou think about the way",
    "start": "1224190",
    "end": "1230860"
  },
  {
    "text": "that I/O works, it's\nlike a layer type thing. So by the time that the\ncontents of that file",
    "start": "1230860",
    "end": "1237830"
  },
  {
    "text": "get to the program, it's\nalready gone through, let's say, the kernel memory. It's already gone through maybe\nlike the C Standard Library",
    "start": "1237830",
    "end": "1245740"
  },
  {
    "text": "to do I/O because\nthat library does buffering and stuff like that. And so what ends up\nhappening is that even if you memset the\napplication visible buffer,",
    "start": "1245740",
    "end": "1254870"
  },
  {
    "text": "there are still instances\nof secret data lying in many different places\nthroughout the system.",
    "start": "1254870",
    "end": "1260590"
  },
  {
    "text": "And this is looking\nat the user mode portion of this application. So there's probably still\ndata sitting around in maybe",
    "start": "1260590",
    "end": "1266529"
  },
  {
    "text": "like the kernel I/O buffers\nor things like that. So getting back\nto your question, if you want to do what they\ncall security allocation,",
    "start": "1266530",
    "end": "1273800"
  },
  {
    "text": "you can't just rely on\nmechanisms at the application level because there may be other\nplaces where that data lives.",
    "start": "1273800",
    "end": "1280730"
  },
  {
    "text": "So what are some\nexamples of other places where this data might live?",
    "start": "1280730",
    "end": "1286110"
  },
  {
    "text": "So, for example, it might\nlive in a process memory.",
    "start": "1286110",
    "end": "1293540"
  },
  {
    "text": "So these are things like\nthe heap and the stack.",
    "start": "1293540",
    "end": "1301470"
  },
  {
    "text": "So when we did that memset\ninside of memclear.c, we were basically\ntrying to address this.",
    "start": "1301470",
    "end": "1307519"
  },
  {
    "text": "But what we found\nout is that that is necessary, but insufficient\nto actually clear all instances",
    "start": "1307520",
    "end": "1314260"
  },
  {
    "text": "of that secret from memory. So where else my RAM\nartifacts live or secret data",
    "start": "1314260",
    "end": "1322830"
  },
  {
    "text": "persists-- so all\nkinds of files-- backups-- SQL write databases.",
    "start": "1322830",
    "end": "1331590"
  },
  {
    "text": " If at any point, an application\ntakes something in RAM",
    "start": "1331590",
    "end": "1338291"
  },
  {
    "text": "and writes it to one of these\nthings, then once again, the attacker may be able to\nrecover that after the attacker",
    "start": "1338291",
    "end": "1343640"
  },
  {
    "text": "controls the disk . As I mentioned, a kernel\nmemory is another common place",
    "start": "1343640",
    "end": "1353080"
  },
  {
    "text": "where RAM secrets may\nlive because, once again, applications typically\ndo layered I/O in which",
    "start": "1353080",
    "end": "1359650"
  },
  {
    "text": "each piece of data goes through\nmultiple parts of the stack. Think of like network\ntransmission, for example.",
    "start": "1359650",
    "end": "1365559"
  },
  {
    "text": "First, the data has to come\nto some network buffer that's probably inside the kernel. Then once again, it probably\ngoes through some buffers",
    "start": "1365560",
    "end": "1372400"
  },
  {
    "text": "inside the C Standard Library. And then finally it will\ngo to the user mode-- the part of the application\nthat the developer wrote",
    "start": "1372400",
    "end": "1379500"
  },
  {
    "text": "him or herself. So that can actually\nbe a big problem. You can also think too of\nfreed memory pages as being",
    "start": "1379500",
    "end": "1387500"
  },
  {
    "text": "a place where data can leak. So imagine that your\napplication allocates",
    "start": "1387500",
    "end": "1394610"
  },
  {
    "text": "a bunch of memory using\nwhatever [INAUDIBLE] or whatnot. And then that process dies.",
    "start": "1394610",
    "end": "1400730"
  },
  {
    "text": "And the kernel sends\nout another process but hasn't actually zeroed\nout all the physical RAM page.",
    "start": "1400730",
    "end": "1406980"
  },
  {
    "text": "So what could happen is that\nwhen that new process spins up, it could just do a walk through\nall this physical RAM pages",
    "start": "1406980",
    "end": "1412370"
  },
  {
    "text": "and use a bunch of\nmemory and just do the same thing-- do the\nstrange thing-- see if there's anything interesting there.",
    "start": "1412370",
    "end": "1418090"
  },
  {
    "text": "And then they might be able\nto get secrets that way. So there's a lot\nof ways information is leaked from the kernel.",
    "start": "1418090",
    "end": "1424139"
  },
  {
    "text": "You could also think about\nI/O buffers and things like a keyboard from\nthings like the mouse.",
    "start": "1424140",
    "end": "1430230"
  },
  {
    "text": "There's just a bunch\nof different factors that data can leak\nthrough the kernel.",
    "start": "1430230",
    "end": "1435430"
  },
  {
    "text": " How might an attacker try to\nget some of this information?",
    "start": "1435430",
    "end": "1443366"
  },
  {
    "text": "Well, in some\ncases, it's just as simple as reading the files--\nso just read the page file.",
    "start": "1443366",
    "end": "1449520"
  },
  {
    "text": "Read the hibernation file\nand just see what's in there. Some file formats actually\nembed different versions",
    "start": "1449520",
    "end": "1456059"
  },
  {
    "text": "within themselves. For example, the way that\nMicrosoft Word used to work is that a single Word file\nwould actually contain versions",
    "start": "1456060",
    "end": "1462179"
  },
  {
    "text": "for old pieces of data. So if you could get\naccess to that Word file, you could just sit there\nthrough either format",
    "start": "1462180",
    "end": "1467826"
  },
  {
    "text": "and so step through\nall the old versions. And so as we have been\ndiscussing in the last couple",
    "start": "1467826",
    "end": "1473580"
  },
  {
    "text": "minutes, security allocation\nis also a problem. It cannot supported\na full stack.",
    "start": "1473580",
    "end": "1480430"
  },
  {
    "text": "So for example, an older\nLinux kernel-- when you would create a\ndirectory, end directory,",
    "start": "1480430",
    "end": "1485830"
  },
  {
    "text": "you could leak up to four\nkilobytes of kernel memory. Only Zeus knows what's\ninside that memory.",
    "start": "1485830",
    "end": "1491160"
  },
  {
    "text": "And that's because Linux\nwasn't actually zeroing out kernel memory that had been\nallocated, deallocated,",
    "start": "1491160",
    "end": "1498480"
  },
  {
    "text": "and then allocated\nto something else. So as I mentioned before too--\nif the kernel doesn't zero out",
    "start": "1498480",
    "end": "1506780"
  },
  {
    "text": "pages that are given\nto user mode processes, you can also have\nuser mode secret leaks through those types\nof menu pages as well.",
    "start": "1506780",
    "end": "1514020"
  },
  {
    "text": "Another thing is that-- SSDs--\nmany of them implement logging.",
    "start": "1514020",
    "end": "1521990"
  },
  {
    "text": " And so in other words, when\nyou send a write to an SSD,",
    "start": "1521990",
    "end": "1532250"
  },
  {
    "text": "oftentimes you are not\ndirectly overwriting data, you're actually\nwriting to a log.",
    "start": "1532250",
    "end": "1537480"
  },
  {
    "text": "And when a piece of\ndata becomes invalid, it lays away your claim.",
    "start": "1537480",
    "end": "1542760"
  },
  {
    "text": "So what that means is that if\nyou as the user get unlucky. And you've written a bunch of\ndata that hasn't been reclaimed",
    "start": "1542760",
    "end": "1549205"
  },
  {
    "text": "by the SSD, then\nmaybe the attacker can look at that\nhardware and say, oh, OK,",
    "start": "1549205",
    "end": "1554753"
  },
  {
    "text": "I understand the log format. And even though\ntechnically speaking, this data may be\ninvalid, I can still recover because I understand\nhow the Flash translation layer",
    "start": "1554754",
    "end": "1561832"
  },
  {
    "text": "works or something like that. And at a high\nlevel, you can also have this problem with stolen\nor discarded hardware as well.",
    "start": "1561832",
    "end": "1570020"
  },
  {
    "text": "If you don't use encryption,\nthen a lot of times, you can just take\nsome disk that you found in a dumpster\nsomewhere-- you",
    "start": "1570020",
    "end": "1575900"
  },
  {
    "text": "understand what the\nphysical layout is and recover data like that. So anyway, there's\na lot of problems",
    "start": "1575900",
    "end": "1581570"
  },
  {
    "text": "with these RAM artifacts getting\nstuck in persistent storage somehow and then being available\nfor an attacker later on.",
    "start": "1581570",
    "end": "1590490"
  },
  {
    "text": "So how can we fix these\ndata lifetime problems?",
    "start": "1590490",
    "end": "1598670"
  },
  {
    "text": " So we've already\ndiscussed one solution,",
    "start": "1598670",
    "end": "1607700"
  },
  {
    "text": "which is to basically\nzero out memory",
    "start": "1607700",
    "end": "1613429"
  },
  {
    "text": "when you're done with it.  So whenever you deallocate\nsomething, you just go through.",
    "start": "1613429",
    "end": "1620620"
  },
  {
    "text": "You write a bunch of\nzeros or some random thing and then essentially\nhide the old data from someone else who\nmight come along later.",
    "start": "1620620",
    "end": "1626470"
  },
  {
    "text": "So does anyone see potential\nany potential problem with that? ",
    "start": "1626470",
    "end": "1633500"
  },
  {
    "text": "One problem you might imagine\nis that as with all things in security, people always\ncomplain about performance.",
    "start": "1633500",
    "end": "1640130"
  },
  {
    "text": "And so when you say that\nyou zero out memory, maybe this isn't a problem\nif your program is I/O bound.",
    "start": "1640130",
    "end": "1646409"
  },
  {
    "text": "So you're waiting on some\nslow, mechanical part of the hard disk or whatnot. But imagine if your\nprogram is CPU bound.",
    "start": "1646410",
    "end": "1652862"
  },
  {
    "text": "And maybe it's very\nmemory intensive too. So it's always allocating\nand deallocating data. So maybe zeroing out memory\nmight be performance cost",
    "start": "1652862",
    "end": "1660400"
  },
  {
    "text": "that you don't want to pay. Typically this isn't\na problem in practice. But as we all know,\npeople love performance.",
    "start": "1660400",
    "end": "1665990"
  },
  {
    "text": "This is sometimes an\nobjection that you'll have with this approach. Another thing you\ncan imagine doing",
    "start": "1665990",
    "end": "1671903"
  },
  {
    "text": "is that instead of\nzeroing out memory, you always encrypt data as\nit goes to stable storage.",
    "start": "1671903",
    "end": "1683130"
  },
  {
    "start": "1683130",
    "end": "1688550"
  },
  {
    "text": "So in a system like\nthis, basically, before the application ever\nwrites anything to disk,",
    "start": "1688550",
    "end": "1694880"
  },
  {
    "text": "it's actually going to encrypt\nit before it actually hits that SSD or that hard disk. Similarly, when the data comes\nback in from stable storage,",
    "start": "1694880",
    "end": "1702857"
  },
  {
    "text": "you're going to\ndecrypt it dynamically before you put it into RAM. And so what's interesting\nabout this approach is",
    "start": "1702857",
    "end": "1709410"
  },
  {
    "text": "that if the key that you use\nto decrypt and encrypt data-- if you throw it away, then\nonce you throw it away,",
    "start": "1709410",
    "end": "1716920"
  },
  {
    "text": "you've effectively\nmade that data on disk unrecoverable by the\nattacker, assuming that you",
    "start": "1716920",
    "end": "1722944"
  },
  {
    "text": "believe in cryptography. So this is very, very\nnice because it gives us",
    "start": "1722944",
    "end": "1729160"
  },
  {
    "text": "this nice property\nthat we don't have to remember per se all\nplaces where you've written this encrypted data.",
    "start": "1729160",
    "end": "1734810"
  },
  {
    "text": "We can just say\nwhy drop the keys? And I'll just treat\nall that encrypted data as it's something that\nI can allocate again.",
    "start": "1734810",
    "end": "1741230"
  },
  {
    "text": "So, for example, if\nyou look at Open BSD,",
    "start": "1741230",
    "end": "1748049"
  },
  {
    "text": "they have this option where\nyou can do swap encryption.",
    "start": "1748050",
    "end": "1754610"
  },
  {
    "text": "So you can basically\nassociate keys with various sections\nof the page file.",
    "start": "1754610",
    "end": "1762120"
  },
  {
    "text": "So it does this very\nthing I mentioned. So every time you\ngroup the machine, it'll generate a\nbunch of new keys.",
    "start": "1762120",
    "end": "1767720"
  },
  {
    "text": "And then when your machine goes\ndown because you shut it down or you reboot it or\nwhatever, it will basically forget all the keys that it\nused to encrypt that swap space.",
    "start": "1767720",
    "end": "1775100"
  },
  {
    "text": "And then it can basically\nsay now all that swap is available to be used again. And so because those\nkeys are forgotten,",
    "start": "1775100",
    "end": "1780910"
  },
  {
    "text": "one can assume that\nthe attacker can't look at the stuff that is in there. AUDIENCE: What is\nthe [INAUDIBLE]?",
    "start": "1780910",
    "end": "1787127"
  },
  {
    "text": "PROFESSOR: Ah, yeah,\nthat's a good question. I'm actually not sure what\nsources of entropy it uses.",
    "start": "1787127",
    "end": "1792960"
  },
  {
    "text": "Open BSD is pretty\nparanoid about security. So I imagine it\ndoes things like it",
    "start": "1792960",
    "end": "1798557"
  },
  {
    "text": "looks at let's say the\nentropy pool gathered from user keyboard\ninput, for example, and other things like that. Yeah, I'm not actually sure\nhow it drives those keys.",
    "start": "1798557",
    "end": "1805608"
  },
  {
    "text": "But you're exactly right that\nif these sources of entropy that it uses are predictable,\nthen that basically shrinks the entropy\nspace of the key itself,",
    "start": "1805608",
    "end": "1812029"
  },
  {
    "text": "which then makes the\nkey more vulnerable. AUDIENCE: So with the memory\nit's capturing [INAUDIBLE].",
    "start": "1812029",
    "end": "1818189"
  },
  {
    "text": " PROFESSOR: Yeah, so basically,\nwhat this model assumes",
    "start": "1818189",
    "end": "1825509"
  },
  {
    "text": "if all we are doing is looking\nat the swap encryption, It assumes that the\nRAM pages for the keys,",
    "start": "1825510",
    "end": "1832230"
  },
  {
    "text": "for example, are\nnever swapped out. And that's actually\npretty easy to do if you're the OS of if you\njust pin that page to memory.",
    "start": "1832230",
    "end": "1838179"
  },
  {
    "text": "And this also doesn't\nhelp you with someone whose got pins with the\nmemory bus or someone who can walk the kernel memory\npage or stuff like that.",
    "start": "1838180",
    "end": "1844590"
  },
  {
    "text": "So you're right.  AUDIENCE: In terms\nof browsing, it helps of attackers that\ncome after the fact",
    "start": "1844590",
    "end": "1851641"
  },
  {
    "text": "because if you have\nto throw away the key, then after the fact,\nthere is no key to memory. PROFESSOR: Yeah,\nthat's exactly right.",
    "start": "1851641",
    "end": "1857083"
  },
  {
    "text": "So what's nice about this\nis that it essentially doesn't require modifications\nto applications. Like you said, you can just\nput any old thing atop this",
    "start": "1857083",
    "end": "1864810"
  },
  {
    "text": "and get this property for free.  AUDIENCE: Going back a bit--\nif you look at the data",
    "start": "1864810",
    "end": "1871790"
  },
  {
    "text": "before [INAUDIBLE] to RAM. How does that avoid the\nRAM artifacts [INAUDIBLE]?",
    "start": "1871790",
    "end": "1878355"
  },
  {
    "text": " PROFESSOR: OK, so if I\nunderstand your question",
    "start": "1878355",
    "end": "1883513"
  },
  {
    "text": "correctly, I think you're\nworried about the fact that, sure, data is\nencrypted when it's on disk,",
    "start": "1883513",
    "end": "1889081"
  },
  {
    "text": "but then it actually can\nsit in clear text forms somehow in the\nactual memory itself.",
    "start": "1889081",
    "end": "1894710"
  },
  {
    "text": "So this gets back to the\ndiscussion that we had here. So ensuring that data\nhit the disk encrypted",
    "start": "1894710",
    "end": "1902150"
  },
  {
    "text": "doesn't actually protect\nagainst an attacker who can look at RAM in real time. So basically what\nwe're saying is",
    "start": "1902150",
    "end": "1907940"
  },
  {
    "text": "that if you're only worried\nabout this post-session attacker who can't, for\nexample, look at your RAM views in real time, this works fine.",
    "start": "1907940",
    "end": "1914354"
  },
  {
    "text": "But you're exactly right\nthat this does not provide, for lack of a better\nterm, encrypted RAM. And there actually are\nsome research systems that",
    "start": "1914354",
    "end": "1920510"
  },
  {
    "text": "try to do something like that. It gets a little bit tricky\nbecause at some point when you look at your\nhardware, your processor,",
    "start": "1920510",
    "end": "1926340"
  },
  {
    "text": "it has to actually do\nsomething on real data like if you want to do an ad and\nyou have to pass a clear text",
    "start": "1926340",
    "end": "1933470"
  },
  {
    "text": "operands perhaps. There are also some\ninteresting research systems which actually try to do\ncomputation on encrypted data.",
    "start": "1933470",
    "end": "1940530"
  },
  {
    "text": "This is mind blowing\nlike \"The Matrix.\" But suffice it to say that\nprotections that people have",
    "start": "1940530",
    "end": "1946220"
  },
  {
    "text": "for in RAM data are typically\nmuch weaker than what they have for data that\nlives on stable storage.",
    "start": "1946220",
    "end": "1952476"
  },
  {
    "text": "You got a question? AUDIENCE: Yeah, but\ndoes that [INAUDIBLE] because even though the attacker\nhas post-session access,",
    "start": "1952477",
    "end": "1958710"
  },
  {
    "text": "that's just post-private\nmode access. So there could\nthis could still be a public mode session going on.",
    "start": "1958710",
    "end": "1965330"
  },
  {
    "text": "And the attacker would have\naccess to the machine, right? PROFESSOR: So you're worried\nabout if a concurrent-- AUDIENCE: So if you\nhave a public mode tab",
    "start": "1965330",
    "end": "1970656"
  },
  {
    "text": "and you have a private mode tab. You close the private tab\nand the public mode tab stays on-- the attacker\ncould still dump the memory.",
    "start": "1970656",
    "end": "1978761"
  },
  {
    "text": "And the RAM artifacts\nwould be problematic. Is that right? PROFESSOR: Yeah,\ninteresting-- so we",
    "start": "1978761",
    "end": "1984250"
  },
  {
    "text": "will talk at the end of\nlecture about an attack which is somewhat similar. So most of the threat\nmodels of private browsing",
    "start": "1984250",
    "end": "1991242"
  },
  {
    "text": "due not assume a\ncurrent attacker at all. In other words, they\nassume that when you're doing private\nbrowsing, there is no other person\nwho have a public mode",
    "start": "1991242",
    "end": "1998480"
  },
  {
    "text": "tab open or anything like that. But you are in fact correct that\nthe way that private browsing",
    "start": "1998480",
    "end": "2004880"
  },
  {
    "text": "modes are often\nimplemented-- let's say you open up a\nprivate browsing tab, you close that tab.",
    "start": "2004880",
    "end": "2009974"
  },
  {
    "text": "You immediately run to\ngo get a cup of coffee. So one attack I will describe\nis that Firefox, for example, still keeps statistics about,\nlet's say, memory allocation.",
    "start": "2009974",
    "end": "2017830"
  },
  {
    "text": "So if the memory\nfor your private tab is actually laid\nwith the garbage collected and I can basically\ngo to about.memory or whatever",
    "start": "2017830",
    "end": "2023830"
  },
  {
    "text": "and actually see URLs\nand stuff in your tab. But yeah, but the long story\nshort, most of these attacker",
    "start": "2023830",
    "end": "2029210"
  },
  {
    "text": "models do not assume\na concurrent attacker at the same time that\nyou're privately browsing.",
    "start": "2029210",
    "end": "2035070"
  },
  {
    "text": "Make sense? ",
    "start": "2035070",
    "end": "2040690"
  },
  {
    "text": "So this is one that you\ndo-- do swap encryption like I mentioned. This is nice because this gives\nyou some pretty cool security",
    "start": "2040690",
    "end": "2046862"
  },
  {
    "text": "properties without\nhaving to change the browser at all or\nany of applications running on top of this. And in practice, the CPU cost\nof doing this kind of thing",
    "start": "2046862",
    "end": "2055289"
  },
  {
    "text": "is much, much lower\nthan the actual cost of doing I/O in\ngeneral, particularly if you have a disk\nbecause with disk you're",
    "start": "2055290",
    "end": "2061669"
  },
  {
    "text": "particularly paying C cost. That's a mechanical cost. This is all processing cost--\npure computational stuff.",
    "start": "2061670",
    "end": "2067359"
  },
  {
    "text": "So typically this not that\nbig of a performance hit. ",
    "start": "2067360",
    "end": "2076158"
  },
  {
    "text": "Oh, god there's physics here. ",
    "start": "2076159",
    "end": "2081319"
  },
  {
    "text": "This is always an adventure. So the next attacker that\nwe're going to look at",
    "start": "2081319",
    "end": "2092320"
  },
  {
    "text": "is this web attacker\nthat I mentioned",
    "start": "2092320",
    "end": "2097940"
  },
  {
    "text": "at the beginning of lecture. So the assumption here\nare that the attacker",
    "start": "2097940",
    "end": "2108940"
  },
  {
    "text": "who controls the website\nthat the user is going",
    "start": "2108940",
    "end": "2117376"
  },
  {
    "text": "to visit in private\nbrowsing mode-- how the attacker does\nnot control the user's",
    "start": "2117376",
    "end": "2127686"
  },
  {
    "text": "local machine.  And so the security\ngoals that we",
    "start": "2127686",
    "end": "2134820"
  },
  {
    "text": "want to have against the\nweb attackers are two fold. ",
    "start": "2134820",
    "end": "2141680"
  },
  {
    "text": "So first, we don't\nwant the attacker",
    "start": "2141680",
    "end": "2146960"
  },
  {
    "text": "to be able to\nidentify the users.",
    "start": "2146960",
    "end": "2152560"
  },
  {
    "text": " And by identify\nwith, we just mean we don't want the attacker\nto be able to distinguish",
    "start": "2152560",
    "end": "2159820"
  },
  {
    "text": "the user from any\nother user that happens to be visiting the site. And you also might\nimagine that perhaps we",
    "start": "2159820",
    "end": "2168140"
  },
  {
    "text": "don't want the attacker to\ntell whether or not we're",
    "start": "2168140",
    "end": "2175339"
  },
  {
    "text": "using private browsing mode. So the attacker can't\ntell the user employees",
    "start": "2175340",
    "end": "2184430"
  },
  {
    "text": "private browsing.  And so as the paper\ndiscusses, defending",
    "start": "2184430",
    "end": "2193329"
  },
  {
    "text": "against the web attacker\nis actually pretty tricky. So what does it\nmean, for example,",
    "start": "2193330",
    "end": "2199000"
  },
  {
    "text": "to identify different users. Like I said, at a high\nlevel, as you could imagine,",
    "start": "2199000",
    "end": "2204060"
  },
  {
    "text": "the user looks no different\nthan any other users that visits this site. So you can imagine\na web attacker",
    "start": "2204060",
    "end": "2210460"
  },
  {
    "text": "might want to do one\nof two specific things. It might want to say, OK,\nI see multiple people who",
    "start": "2210460",
    "end": "2216400"
  },
  {
    "text": "were visiting my site in\nprivate browsing mode. You were visitor five,\nseven, and eight.",
    "start": "2216400",
    "end": "2222890"
  },
  {
    "text": "So in other words,\nidentifying a particular user within the context of multiple\nprivate browsing sessions. The second the attacker\nmight want to do",
    "start": "2222890",
    "end": "2229920"
  },
  {
    "text": "is actually try to link a user\nacross public and private mode browsing sessions.",
    "start": "2229920",
    "end": "2235119"
  },
  {
    "text": "So I go to Amazon.com once\nin public browsing mode. I then go to it again in\nprivate browsing mode.",
    "start": "2235120",
    "end": "2240350"
  },
  {
    "text": "Can the attacker\nactually figure out that I'm actually\nthe same person through those two visits. Yes? AUDIENCE: This is all a\nmodule of the IP address.",
    "start": "2240350",
    "end": "2247900"
  },
  {
    "text": "PROFESSOR: Ah, yes,\nthat's exactly right. That is excellent foreshadowing. So right now I'm assuming that\neither user employs Tor or uses",
    "start": "2247900",
    "end": "2258315"
  },
  {
    "text": "something like this. So yeah, we're punting\non this whole issue of IP admittedly for now. That's right.",
    "start": "2258315",
    "end": "2264640"
  },
  {
    "text": "So yeah, this segues very well. So what's an easy way\nto identify the user, as you suggested,\nthe IP address.",
    "start": "2264640",
    "end": "2270780"
  },
  {
    "text": "So it's a pretty high\nlikelihood if you see two visits that are\nsort of close in time relatively speaking\nwith the same IP",
    "start": "2270780",
    "end": "2277590"
  },
  {
    "text": "with high likelihood that's\nprobably the same user. And this in fact\nthe motivation-- one of the motivations\nfor stuff like Tor.",
    "start": "2277590",
    "end": "2285109"
  },
  {
    "text": "And so we're actually willing\nto discuss Tor next lecture. So in case you\nhaven't heard of Tor,",
    "start": "2285110",
    "end": "2290320"
  },
  {
    "text": "it's basically a tool which\ntries to obscure things like your IP address. And you could actually\nimagine layering Tor--",
    "start": "2290320",
    "end": "2298560"
  },
  {
    "text": "having Tor be the foundation. And then you put private\nbrowsing modes atop that.",
    "start": "2298560",
    "end": "2304630"
  },
  {
    "text": "And that might give you some\nstronger properties then you would if you used private\nbrowsing modes at all.",
    "start": "2304630",
    "end": "2311680"
  },
  {
    "text": "But, anyway, so the thing\nto mention about Tor though is that Tor does provide\nsome sense of IP anonymity.",
    "start": "2311680",
    "end": "2317940"
  },
  {
    "text": "But it doesn't actually address\nthings like the data secrecy lifetime issues or\nthings like that. So Tor-- perhaps you can think\nof it as maybe necessary,",
    "start": "2317940",
    "end": "2326410"
  },
  {
    "text": "but insufficient for\na full implementation of private browsing mode. And so what's interesting\ntoo is that even if a user",
    "start": "2326410",
    "end": "2333450"
  },
  {
    "text": "employees Tor, there are still\nways that a web server can identify the user by looking\nat the unique characteristics",
    "start": "2333450",
    "end": "2342020"
  },
  {
    "text": "of that user's browser. So this is our final\ndemo for today.",
    "start": "2342020",
    "end": "2349080"
  },
  {
    "text": "So let's see here. So going to get rid of this guy.",
    "start": "2349080",
    "end": "2355980"
  },
  {
    "text": "And then let's see. I am going to go to this\nsite called Panopticlick.",
    "start": "2355980",
    "end": "2362631"
  },
  {
    "text": "Some of so you heard of this. It's run the EFF. The basic idea is it is going\nto try to identify you the user",
    "start": "2362632",
    "end": "2369640"
  },
  {
    "text": "by looking at various\ncharacteristics of your web browser. So I'll show you\nexactly what I mean.",
    "start": "2369640",
    "end": "2377410"
  },
  {
    "text": "So I want to go--\nthe URL is very long. This is very stressful\nfor me to type in. So please don't just if\nit doesn't go through.",
    "start": "2377410",
    "end": "2383911"
  },
  {
    "text": "Let's see. Panopticlick-- did it work?",
    "start": "2383911",
    "end": "2389220"
  },
  {
    "text": "Yes, OK. So I am going to\ngo to this website. And it's run by\nthe folks at EFF.",
    "start": "2389220",
    "end": "2397600"
  },
  {
    "text": "And I say, OK, test me. So what this is doing\nis it's basically running a bunch of\nJavaScript code, maybe",
    "start": "2397600",
    "end": "2403825"
  },
  {
    "text": "an applet-- maybe some Java. And it's trying to\nfingerprint my browser. And it's trying to figure out\nhow much unique information",
    "start": "2403825",
    "end": "2412115"
  },
  {
    "text": "does it have. And so-- let me\nincrease the font here.",
    "start": "2412115",
    "end": "2418810"
  },
  {
    "text": "So, for example, one\nthing it looks at is it looks at you\nsee here what are all the details of the browser\nplugins that I'm running.",
    "start": "2418810",
    "end": "2427060"
  },
  {
    "text": "So basically it'll run\ncode in it's web page that looks and sees do\nI have Flash installed? What version of Flash?",
    "start": "2427060",
    "end": "2432370"
  },
  {
    "text": "Do I have Java installed? What version of Java? So you can see that these\nare all-- they can't even",
    "start": "2432370",
    "end": "2439190"
  },
  {
    "text": "fit on the tree at one time. These are like all the various\nplugins and ridiculous formats",
    "start": "2439190",
    "end": "2444820"
  },
  {
    "text": "that my browser supports. Now, the high level-- this\nshould be troubling to you if you're a security person.",
    "start": "2444820",
    "end": "2449940"
  },
  {
    "text": "Am I actually actively\nusing all of these things at a given time? This gives me nightmares.",
    "start": "2449940",
    "end": "2455805"
  },
  {
    "text": "So what ends up\nhappening is that web servers-- this web attacker--\nthey can hunt code like this. And they can figure out what\nare all the plugins that you're",
    "start": "2455805",
    "end": "2462888"
  },
  {
    "text": "looking at. Now if you look at these\ntwo columns to the left, what are they? So you see up here.",
    "start": "2462888",
    "end": "2469550"
  },
  {
    "text": "It says bits of\nidentifying information. And then one in x\nbrowsers has this value.",
    "start": "2469550",
    "end": "2475760"
  },
  {
    "text": "So, for example, if\nwe look at a plugin, it's saying there is\nbasically-- it's probably",
    "start": "2475760",
    "end": "2481979"
  },
  {
    "text": "this is the number\nthat's more interesting. It's no longer right. It's saying that 1 in\napproximately 280,000 browsers",
    "start": "2481979",
    "end": "2490140"
  },
  {
    "text": "has this exact set of plugins. So that's actually a pretty\nspecific way to fingerprint me.",
    "start": "2490140",
    "end": "2497960"
  },
  {
    "text": "It's saying very,\nvery few people who have this exact set of\nplugins and configurations.",
    "start": "2497960",
    "end": "2503674"
  },
  {
    "text": "So as it turns\nout, they're right. I am quite unique. But this a problem from\nthe security perspective.",
    "start": "2503674",
    "end": "2510104"
  },
  {
    "text": "So look at this. The screen size and the\ncolor depths for my machine--",
    "start": "2510104",
    "end": "2515120"
  },
  {
    "text": "1 in-- what is this? 1.5 million.",
    "start": "2515120",
    "end": "2520570"
  },
  {
    "text": "That's actually pretty shocking. So there's only one person in\na sample of 1.5 million people",
    "start": "2520570",
    "end": "2527049"
  },
  {
    "text": "who have this\nparticular screen image. So these things-- they are\nadditive in some sense.",
    "start": "2527050",
    "end": "2534109"
  },
  {
    "text": "So the more fingerprints\nyou have, the more easy it is for the attacker to\nfigure out exactly who you are.",
    "start": "2534110",
    "end": "2541180"
  },
  {
    "text": "And so note this was done\npurely from the server side. I just went to this web page. And I just did this.",
    "start": "2541180",
    "end": "2547490"
  },
  {
    "text": "And this is what it got to. One second-- I want to\nshow one more thing. This was done in\nprivate browsing mode.",
    "start": "2547490",
    "end": "2553614"
  },
  {
    "text": "And let's see here. ",
    "start": "2553614",
    "end": "2558927"
  },
  {
    "text": "I will open up a regular\nversion of Firefox.",
    "start": "2558927",
    "end": "2563948"
  },
  {
    "text": " Then I run this up again.",
    "start": "2563948",
    "end": "2571850"
  },
  {
    "text": "So note that now I'm in\na public mode browser. Before I was in private mode.",
    "start": "2571850",
    "end": "2577050"
  },
  {
    "text": "Now I am public mode. So what you'll see is that when\nwe look at the browser plugins,",
    "start": "2577050",
    "end": "2582250"
  },
  {
    "text": "the extent to which I\ncan be fingerprinted is essentially the same. So it's going to be a few\nplugins that may or may not",
    "start": "2582250",
    "end": "2588448"
  },
  {
    "text": "load depending on\nthe vagaries of how privacy mode is implemented. But still, look at that.",
    "start": "2588448",
    "end": "2593512"
  },
  {
    "text": "I'm still very easy\nto fingerprint. And in fact, if you\nlook back at this guy again-- that screen\nsize and color depth.",
    "start": "2593512",
    "end": "2600100"
  },
  {
    "text": "I didn't change that\nactually between the two-- between public and\nprivate browsing mode. So that ability to fingerprint\nthere is basically the same.",
    "start": "2600100",
    "end": "2606730"
  },
  {
    "text": "This is one reason why it's so\ndifficult to protect yourself against this web attack because\nbrowsers themselves reveal",
    "start": "2606730",
    "end": "2613109"
  },
  {
    "text": "so much information about you\njust from their configuration. AUDIENCE: I am curious the\nscreen size and color depth thing.",
    "start": "2613110",
    "end": "2619133"
  },
  {
    "text": "How does it do that? How is that unique? How many screen sizes and\ncolor depths are there?",
    "start": "2619133",
    "end": "2624887"
  },
  {
    "text": "PROFESSOR: Well, I\nthink it's actually hiding some of the\nmagic that it's using to figure out what that is. So at a high level, how do\na lot of these tests work?",
    "start": "2624887",
    "end": "2631638"
  },
  {
    "text": "So there's some parts of\nyour browser environment that are testable purely\nby JavaScript code.",
    "start": "2631638",
    "end": "2637300"
  },
  {
    "text": "So you can imagine that\nyou can essentially have JavaScript\ncode, which looks over the properties of\nthe window object, which",
    "start": "2637300",
    "end": "2643198"
  },
  {
    "text": "is like a global\nJavaScript manuscript and sees how do you\ndefine this weird widget? How do you define\nthis weird widget?",
    "start": "2643198",
    "end": "2649240"
  },
  {
    "text": "And if so, that my count\nyour plug-ins, lets say. Pages like this also typically\ntake advantage of the fact",
    "start": "2649240",
    "end": "2654650"
  },
  {
    "text": "that Java applets\nand Flash objects can look at all kinds of\nmore interesting stuff",
    "start": "2654650",
    "end": "2660480"
  },
  {
    "text": "like the fonts that are\navailable on your machine and things like that. So as to the particular screen\nsize and color depth thing--",
    "start": "2660480",
    "end": "2667180"
  },
  {
    "text": "I think-- don't\nquote me on that. But I think what\nends up happening is it will try to run an applet,\nlet's say, that will actually",
    "start": "2667180",
    "end": "2672796"
  },
  {
    "text": "try to query your graphics card\nor whatever are the graphics interfaces in Java and poke\nfor different aspects of it.",
    "start": "2672796",
    "end": "2678334"
  },
  {
    "text": "So I think it's actually\nmore than just screen size and depth. They condense it\nfor size as that.",
    "start": "2678334",
    "end": "2683620"
  },
  {
    "text": "So at a high level, that's\nhow all these tricks work. So you see a bunch\nof information-- you can snarf up\nthrough JavaScript.",
    "start": "2683620",
    "end": "2688830"
  },
  {
    "text": "Then you run a bunch\nof plugins, which can typically access more stuff\nand see what they can snarf up. And then you see\nwhat's going on.",
    "start": "2688830",
    "end": "2696910"
  },
  {
    "text": "Does it all make sense? Yeah, this is basically why\nit's very difficult to protect against a web attacker.",
    "start": "2696910",
    "end": "2702520"
  },
  {
    "text": "And in particular, getting\nback to the discussion we had about Tor, right, even if\nI had gone through Tor-- so",
    "start": "2702520",
    "end": "2707940"
  },
  {
    "text": "you'll note the IP address--\nyou don't see it up here. And so you can\nimagine that yeah,",
    "start": "2707940",
    "end": "2713867"
  },
  {
    "text": "maybe this thing would actually\nlook at your IP address. But the thing is\nlike even if I didn't know what IP you were\ncoming from at all,",
    "start": "2713867",
    "end": "2719200"
  },
  {
    "text": "I can do all these things. It's pretty maddening. It's pretty insane. So there are some\nproducts out there",
    "start": "2719200",
    "end": "2725682"
  },
  {
    "text": "that tried to do\nthings like imagine that you had a proxy\nout in the cloud",
    "start": "2725682",
    "end": "2731089"
  },
  {
    "text": "that all your web\ntraffic went through. And then imagine\nthat proxy tried to present a canonical\nversion of a browser runtime.",
    "start": "2731090",
    "end": "2740250"
  },
  {
    "text": "And imagine that it would\nalways try to emulate, let's say, Firefox v 10.7.",
    "start": "2740250",
    "end": "2746400"
  },
  {
    "text": "Then it would try to\nsend back the data that it rendered\nas Firefox v 10.7.",
    "start": "2746400",
    "end": "2751930"
  },
  {
    "text": "So some people would\ntry to attack this. It's sort of tricky. AUDIENCE: [INAUDIBLE]. ",
    "start": "2751930",
    "end": "2758896"
  },
  {
    "text": "PROFESSOR: I am not-- AUDIENCE: Is that\nTor distributions? Is that paired with\nvirtual machines? [INAUDIBLE] ",
    "start": "2758896",
    "end": "2765527"
  },
  {
    "text": "PROFESSOR: I see--\nso the basic idea-- is it a similar idea to what\nwe were just talking about? AUDIENCE: Yes, [INAUDIBLE].",
    "start": "2765527",
    "end": "2770744"
  },
  {
    "text": "PROFESSOR: Yeah, so I\nnever heard of that one. I have heard of some of\nthese other projects. I'm imagining there's actually\nsome trickiness in getting",
    "start": "2770744",
    "end": "2778480"
  },
  {
    "text": "systems like this to be\nefficient a lot of times because particularly imagine\nif you have something that's interactive.",
    "start": "2778480",
    "end": "2783655"
  },
  {
    "text": "It's like you want to play a\ngame or something like that. It's a little bit\nawkward to send my mouse",
    "start": "2783655",
    "end": "2788790"
  },
  {
    "text": "click to some proxy. That proxy is then somehow\ngoing to [INAUDIBLE].",
    "start": "2788790",
    "end": "2794858"
  },
  {
    "text": "AUDIENCE: Let me clarify the\nfirst station virtual machine actually runs\n[INAUDIBLE] Firefox.",
    "start": "2794858",
    "end": "2801215"
  },
  {
    "text": "In the proxy it's\nknown as a Tor. PROFESSOR: Ah, it's\njust a Tor proxy.",
    "start": "2801215",
    "end": "2806512"
  },
  {
    "text": "So if it's a Tor proxy,\nsure, that's one thing. Then the only overhead\nthere you have to pay is the regular Tor\noverhead of going",
    "start": "2806512",
    "end": "2813062"
  },
  {
    "text": "through all the onion route. Yeah, so I was talking\nthere are systems-- let's ignore the IP\nanonymity for a second",
    "start": "2813062",
    "end": "2819880"
  },
  {
    "text": "because they\nbasically try to say you have your own very\nfingerprintable browser on your own machine.",
    "start": "2819880",
    "end": "2825571"
  },
  {
    "text": "You don't want to expose\nthat to the web server. So essentially you\ngo through a proxy, which you think\nof it all the time",
    "start": "2825571",
    "end": "2830686"
  },
  {
    "text": "like a headless Firefox let's\nsay of some canonical version. The web server thinks it is\ninteracting with this thing.",
    "start": "2830686",
    "end": "2836760"
  },
  {
    "text": "So if I go load this site, I\nam perceived by the web server as Firefox 10.7 or whatever. If you go there, you are also\nperceived as Firefox 10.7.",
    "start": "2836760",
    "end": "2843910"
  },
  {
    "text": "Then behind the scenes its'\nspitting out HTML and stuff like that it collected\nfrom the proxy.",
    "start": "2843910",
    "end": "2849000"
  },
  {
    "text": "So those two things\nare orthogonal. AUDIENCE: But it seems like you\ndon't need a proxy for this.",
    "start": "2849000",
    "end": "2855619"
  },
  {
    "text": "You could have browser\nsupport for this, right? Meaning the Tor\nbrowser does this already by trying to appear\nas the most generic version",
    "start": "2855620",
    "end": "2862150"
  },
  {
    "text": "of Firefox. PROFESSOR: Yeah,\nso this is true. Although, I think a problem\nwith a lot of those things that even if you try to lock\nyourself into one version,",
    "start": "2862150",
    "end": "2869311"
  },
  {
    "text": "there's still a lot of things\nthat can fingerprint it. So I think with the Tor\ndistribution, what they often do is they say, we control\nwhat's in the Tor distribution.",
    "start": "2869311",
    "end": "2876950"
  },
  {
    "text": "So if we all go down to the Tor\ndistribution, then forshizzle, we're both going to get Firefox\nwith the same Java version--",
    "start": "2876950",
    "end": "2884000"
  },
  {
    "text": "the same so on and so forth. AUDIENCE: Well, it's\nmore than that though. They return screen sizes that\nare the most common screen",
    "start": "2884000",
    "end": "2889823"
  },
  {
    "text": "sizes whenever you\nclear the screen. PROFESSOR: That's all true. Yeah, so one thing that's\ninteresting to look at though-- the Tor team that\nalso put out-- the people who",
    "start": "2889823",
    "end": "2896639"
  },
  {
    "text": "do the bundle-- they'll often\nput out reports about what data still gets leaked. So stuff does still\nget leaked out.",
    "start": "2896639",
    "end": "2901946"
  },
  {
    "text": "But you're right. If you could-- the high level\nof that goal is very reasonable. It's saying that\nif we all agreed",
    "start": "2901946",
    "end": "2907589"
  },
  {
    "text": "to download the\nsame distribution and to then not trick it out by\nadding plugins or stuff like, then you're exactly right.",
    "start": "2907590",
    "end": "2913253"
  },
  {
    "text": "That'd work great. Any other questions? ",
    "start": "2913253",
    "end": "2920410"
  },
  {
    "text": "Yeah, so that is\nit for demo time. ",
    "start": "2920410",
    "end": "2931845"
  },
  {
    "text": "And there's more physics.  This must have been a\nriveting previous class.",
    "start": "2931845",
    "end": "2939560"
  },
  {
    "text": "So we will ignore\nthat for the moment. Let's see here. ",
    "start": "2939560",
    "end": "2947240"
  },
  {
    "text": "So where were we?  So what is the high-level\ngoal of privacy?",
    "start": "2947240",
    "end": "2954525"
  },
  {
    "text": "And you can think\nof it as what's your anonymity set\nif you're a user? So in other words,\nhow many-- what's",
    "start": "2954525",
    "end": "2960490"
  },
  {
    "text": "the size of people--\nthe number of people that you could be\nconfused for-- you could be mistaken\nfor by an attacker.",
    "start": "2960490",
    "end": "2966857"
  },
  {
    "text": "And so what the browser\nfingerprinting stuff shows is that oftentimes a web\nattacker can narrow you",
    "start": "2966857",
    "end": "2972619"
  },
  {
    "text": "down to a very, very\ntight demographic without controlling anything on\nyour local machine whatsoever.",
    "start": "2972620",
    "end": "2978510"
  },
  {
    "text": "So that's actually little\nbit frightening to know. ",
    "start": "2978510",
    "end": "2984020"
  },
  {
    "text": "So you might want\nto think about how can a web attacker determine if\nyou're using private browsing",
    "start": "2984020",
    "end": "2990480"
  },
  {
    "text": "mode? Maybe that's [INAUDIBLE]\nfor some reason. So in the paper they\nactually describe an attack",
    "start": "2990480",
    "end": "2996260"
  },
  {
    "text": "that uses link colors. So remember, in\nprivate browsing mode, the browsers isn't\nsupposed to keep",
    "start": "2996260",
    "end": "3001730"
  },
  {
    "text": "track of the history of\nthe sites that you visit. And so in the paper, the\nauthors describe an attack",
    "start": "3001730",
    "end": "3007630"
  },
  {
    "text": "in which essentially the\nattacker-controlled page creates an iframe to some URL\nthat the attacker controls",
    "start": "3007630",
    "end": "3014509"
  },
  {
    "text": "and loads that inside\nthe attacker page. And then it basically\nlooks at the link colors. It creates a link\nto that page-- that",
    "start": "3014510",
    "end": "3021065"
  },
  {
    "text": "iframe it just\ncreated-- and then sees that the link color for that\nlink is the visited color.",
    "start": "3021065",
    "end": "3026809"
  },
  {
    "text": "So see it as purple versus blue. And the idea that if you do this\ntest in private browsing mode,",
    "start": "3026810",
    "end": "3033599"
  },
  {
    "text": "then presumably the\nlink colors should stay like the unvisited\ncolor because the browser is supposed to be forgetting\nabout all this kinds of stuff.",
    "start": "3033600",
    "end": "3040542"
  },
  {
    "text": "So that's the attack they\ndescribe in the paper. What's interesting is\nthat this attack actually doesn't work anymore.",
    "start": "3040542",
    "end": "3046329"
  },
  {
    "text": "So we actually discussed this\na couple of lectures back. So this attack that\nthe paper describes",
    "start": "3046330",
    "end": "3051430"
  },
  {
    "text": "is the browser history\nsniffing attack. So as we discussed a\ncouple of lectures ago, JavaScript code now does not\nexpose correct link colors",
    "start": "3051430",
    "end": "3059769"
  },
  {
    "text": "basically to JavaScript . And it's precisely to prevent\nthese types of attacks.",
    "start": "3059770",
    "end": "3066289"
  },
  {
    "text": "So that particular part\nof the paper is outdated. AUDIENCE: What does it point\nto that browsers now also show",
    "start": "3066290",
    "end": "3071789"
  },
  {
    "text": "links as purple in\nprivate browsing mode and turn blue again\nwhen you exit. PROFESSOR: Yeah, it's\na bit weird, yeah.",
    "start": "3071790",
    "end": "3078110"
  },
  {
    "text": "They implemented that\nattack-- the defense-- I think before a lot\nof the private browsers like a popware.",
    "start": "3078110",
    "end": "3083220"
  },
  {
    "text": "So now they do this\nadditional thing too. The long story short, the attack\nthey describe in the paper doesn't work because of some\nof these browsers sniffing",
    "start": "3083220",
    "end": "3090145"
  },
  {
    "text": "defenses. But you can still\nimagine that there may be ways for the web attacker\nto figure out if you are",
    "start": "3090145",
    "end": "3096054"
  },
  {
    "text": "using private browsing mode. So for example, when you\ndo private browsing mode, any cookies that you\ngot from public mode",
    "start": "3096054",
    "end": "3102640"
  },
  {
    "text": "should not be sent\nduring private mode. So in other words, if I go\nto Amazon.com in public mode,",
    "start": "3102640",
    "end": "3108102"
  },
  {
    "text": "I generate some cookies. Then I go to Amazon.com\nin private browsing mode. When I contact Amazon.com\nin private mode,",
    "start": "3108102",
    "end": "3114270"
  },
  {
    "text": "those public mode cookies\nshould not be sent. That can actually act as\nthe sign to the web attacker",
    "start": "3114270",
    "end": "3122420"
  },
  {
    "text": "that you actually are\nusing private mode. AUDIENCE: This is also now\nyou're using the canvass in both of these events, right?",
    "start": "3122420",
    "end": "3128612"
  },
  {
    "text": "So you need to know\nthe IP address. PROFESSOR: Yeah, that's right. AUDIENCE: So that\nlink that you were",
    "start": "3128612",
    "end": "3134609"
  },
  {
    "text": "targeting with the link color\nwould be on a per IP basis. And you would have to\nrely that the user first visited it as a public\nmode, and you protect it.",
    "start": "3134610",
    "end": "3141494"
  },
  {
    "text": "PROFESSOR: Ah, so the\nlink-- so the link attack you can actually do in\nthe context of a single page.",
    "start": "3141494",
    "end": "3146799"
  },
  {
    "text": "So imagine that I,\nthe web attacker, construct single page. I, the attacker, have JavaScript\nthat creates an iframe",
    "start": "3146800",
    "end": "3153110"
  },
  {
    "text": "to foo.com like this. So that iframe will load\nthe contents of that page.",
    "start": "3153110",
    "end": "3158570"
  },
  {
    "text": "And then I, the attacker,\nin the parent frame can then create a\nlink element and then try to look at the color.",
    "start": "3158570",
    "end": "3164190"
  },
  {
    "text": "This worked four years ago. So in that case, it doesn't rely\non the user having explicitly",
    "start": "3164190",
    "end": "3169880"
  },
  {
    "text": "visited that iframe page at\nall because I, the attacker, can create that in the\ncontext of the page.",
    "start": "3169880",
    "end": "3176007"
  },
  {
    "text": "I have gotten [INAUDIBLE]. Any other questions?",
    "start": "3176008",
    "end": "3181310"
  },
  {
    "text": "So yeah, so you can maybe\nthink about how cookies can reveal public and\nprivate browsing modes and things like that.",
    "start": "3181310",
    "end": "3188660"
  },
  {
    "text": "So one thing we\nmight think about is how we can provide\na stronger privacy",
    "start": "3188660",
    "end": "3201210"
  },
  {
    "text": "guarantee for private browsers? ",
    "start": "3201210",
    "end": "3209554"
  },
  {
    "text": "And for the sake\nof this discussion,",
    "start": "3209554",
    "end": "3215050"
  },
  {
    "text": "let's just ignore\nIP addresses for now",
    "start": "3215050",
    "end": "3221630"
  },
  {
    "text": "because as we'll\ndiscuss next lecture, we can used Tor to\nmaybe help with some",
    "start": "3221630",
    "end": "3227670"
  },
  {
    "text": "of the privacy of IP addresses. So one thing you\ncan imagine doing is you can imagine\nusing VMs in some way",
    "start": "3227670",
    "end": "3235712"
  },
  {
    "text": "to help provide stronger private\nbrowsing guaranteed-- so VM",
    "start": "3235712",
    "end": "3246200"
  },
  {
    "text": "level privacy. And so the basic\nidea is that you",
    "start": "3246200",
    "end": "3251290"
  },
  {
    "text": "want to run each private\nsession inside of a separate VM.",
    "start": "3251290",
    "end": "3261825"
  },
  {
    "text": " And then when the user\nis done with that--",
    "start": "3261825",
    "end": "3269070"
  },
  {
    "text": "so is finished with the\nprivate browsing session, you basically delete VM\nafter that session is done.",
    "start": "3269070",
    "end": "3278580"
  },
  {
    "start": "3278580",
    "end": "3283820"
  },
  {
    "text": "So what's the advantage of this? Well, what's nice about\nthis is presumably",
    "start": "3283820",
    "end": "3291230"
  },
  {
    "text": "you can get some\nstronger guarantees about what privacy properties\nyou can provide to the user",
    "start": "3291230",
    "end": "3298910"
  },
  {
    "text": "because, presumably,\nthe VM has a pretty clean interface to the I/O\npath of the underlying post-OS.",
    "start": "3298910",
    "end": "3306606"
  },
  {
    "text": "So you can imagine\nthat maybe you combine this VMs into let's\nsay some type of a secure swap",
    "start": "3306606",
    "end": "3313000"
  },
  {
    "text": "solution like Open BSD has--\ngive us another encrypted disk type thing. So you can imagine, OK, we have\na very clean separation of VM",
    "start": "3313000",
    "end": "3321840"
  },
  {
    "text": "up here and all the I/Os\nthat are generated down here. And so that gives you\nstronger guarantees",
    "start": "3321840",
    "end": "3327420"
  },
  {
    "text": "than what you can get from the\nbrowser, which wasn't designed from the ground up to think\nvery carefully about all the I/O",
    "start": "3327420",
    "end": "3333390"
  },
  {
    "text": "paths and what secrets might\nleak when it was in storage. ",
    "start": "3333390",
    "end": "3338619"
  },
  {
    "text": "So yes, this\nprovides what's nice about this-- strong guarantees.",
    "start": "3338620",
    "end": "3345050"
  },
  {
    "text": " And, also, what's nice\nis it doesn't require",
    "start": "3345050",
    "end": "3352559"
  },
  {
    "text": "any changes to your\napplications-- that is to say to the browser.",
    "start": "3352560",
    "end": "3358474"
  },
  {
    "text": "You take your browser,\nput it inside one of these VMs-- then everything\ngets better all magically.",
    "start": "3358474",
    "end": "3363760"
  },
  {
    "text": "It's not location change. So what's bad about this--\nI'll use an unhappy face",
    "start": "3363760",
    "end": "3371315"
  },
  {
    "text": "to demonstrate that. So what's bad is first\nof all, it's heavyweight.",
    "start": "3371315",
    "end": "3377110"
  },
  {
    "text": "And by heavyweight,\nI mean that time you want to spin up one of these\nprivate browsing sessions,",
    "start": "3377110",
    "end": "3382860"
  },
  {
    "text": "you have to spin up a whole VM. And that can actually\nbe pretty painful. So perhaps users are\ngoing to get upset",
    "start": "3382860",
    "end": "3388886"
  },
  {
    "text": "because it's going to\ntake them long time now to launch these private\nbrowsing sessions. And the other problems to is\nthis solution actually has",
    "start": "3388886",
    "end": "3396730"
  },
  {
    "text": "bad usability. And the reason I say that\nis because now it's actually",
    "start": "3396730",
    "end": "3403080"
  },
  {
    "text": "difficult for users to\ndo things like take files that they've saved in\nprivate browsing mode",
    "start": "3403080",
    "end": "3409176"
  },
  {
    "text": "and then take them to the\nrest of their computer-- any bookmarks that they generate\nduring private browsing mode",
    "start": "3409176",
    "end": "3414731"
  },
  {
    "text": "that who they actually\ndo want to persist will be difficult to\nget those at the end. It can be done.",
    "start": "3414731",
    "end": "3420110"
  },
  {
    "text": "But there's a lot\nof friction here. So that's the bummer. ",
    "start": "3420110",
    "end": "3425920"
  },
  {
    "text": "So another thing that\nyou might imagine doing",
    "start": "3425920",
    "end": "3431720"
  },
  {
    "text": "is something that looks\nlike approach number one.",
    "start": "3431720",
    "end": "3436740"
  },
  {
    "text": "But we actually implement it\ninside of the OS themselves",
    "start": "3436740",
    "end": "3443813"
  },
  {
    "text": "instead of in a virtual machine. So the basic idea\nhere is that you can imagine that each\nprocess could potentially",
    "start": "3443813",
    "end": "3455500"
  },
  {
    "text": "run in a privacy domain. ",
    "start": "3455500",
    "end": "3464620"
  },
  {
    "text": "So basically, the privacy\ndomain access the collection",
    "start": "3464620",
    "end": "3471340"
  },
  {
    "text": "of OS global resources\nthat process uses. And so the OS tracks\nall that kind of stuff.",
    "start": "3471340",
    "end": "3476680"
  },
  {
    "text": "And then once the process\ndies, essentially the OS goes through and looks\nat all the things",
    "start": "3476680",
    "end": "3481950"
  },
  {
    "text": "that are in that\nprivacy domain set. And then purely deallocate\nall those resources.",
    "start": "3481950",
    "end": "3489050"
  },
  {
    "text": "And so the advantage\nof this over the VM is that it is lighter weight\nbecause if you think about it,",
    "start": "3489050",
    "end": "3500329"
  },
  {
    "text": "the VM is essentially agnostic\nto all the OS state and all the application state that is\nactually being used to run.",
    "start": "3500330",
    "end": "3506579"
  },
  {
    "text": "So the result-- it probably\ndoes more work than the OS would have to do because\nthe OS presumably",
    "start": "3506580",
    "end": "3511880"
  },
  {
    "text": "knows all the points at which\nthe private browser would be touching I/O, and talk to the\nnetwork, and stuff like that.",
    "start": "3511880",
    "end": "3518360"
  },
  {
    "text": "So maybe it even knows\nthings like you can actually clear the DNS cache\nselectively, for example.",
    "start": "3518360",
    "end": "3523980"
  },
  {
    "text": "So you can imagine\nthat it's much easier to spin these things up--\nthese privacy domains--",
    "start": "3523980",
    "end": "3529095"
  },
  {
    "text": "then to tear them down. However, the sad thing,\nat least with respect to the virtual machine\nsolution, is that it's harder",
    "start": "3529095",
    "end": "3538579"
  },
  {
    "text": "to get this right.  So I just described\nthe VM approach",
    "start": "3538580",
    "end": "3547292"
  },
  {
    "text": "as being headway\nbecause it's essentially agnostic to everything that's\nrunning inside the container.",
    "start": "3547292",
    "end": "3552650"
  },
  {
    "text": "But what's nice about\nthat is that allows the VM approach to only focus\non a few low-level interfaces.",
    "start": "3552650",
    "end": "3558585"
  },
  {
    "text": "And it can focus\non those things. For example, the interface\nthe VM uses to write to disk,",
    "start": "3558585",
    "end": "3563600"
  },
  {
    "text": "then you can have high\nconfidence that it's actually managed to contain everything.",
    "start": "3563600",
    "end": "3569070"
  },
  {
    "text": "Whereas with the\nOS-- if you think the OS is going to interpose\non individual files with system interfaces-- perhaps individual\nnetwork interfaces and stuff",
    "start": "3569070",
    "end": "3575790"
  },
  {
    "text": "like that-- it's much\nmore complicated to find all of those points at which\ndata can leak if you're going",
    "start": "3575790",
    "end": "3582667"
  },
  {
    "text": "to do that at the OS level. So does that all make sense? ",
    "start": "3582667",
    "end": "3597972"
  },
  {
    "text": "Why is this physics everywhere?  Ah, god, I'm being tested.",
    "start": "3597972",
    "end": "3603207"
  },
  {
    "start": "3603207",
    "end": "3609468"
  },
  {
    "text": "Those are basically\nsome approaches we can use to provide\npotentially stronger privacy guarantees than what's\nimplemented in private browsers",
    "start": "3609468",
    "end": "3616202"
  },
  {
    "text": "right now. So one question you might\nhave is can we still",
    "start": "3616202",
    "end": "3626610"
  },
  {
    "text": "be an anonymized user\nif the browser-- sorry,",
    "start": "3626610",
    "end": "3633250"
  },
  {
    "text": "if the user is employing one of\nthese more powerful solutions--",
    "start": "3633250",
    "end": "3638950"
  },
  {
    "text": "if the user is\nsurfing through VM or surfing one of these\nprivacy domains in the OS-- can",
    "start": "3638950",
    "end": "3645330"
  },
  {
    "text": "we still figure\nout who they are? And the answer is, yes. So maybe the VM is\nunique for some reason.",
    "start": "3645330",
    "end": "3653020"
  },
  {
    "text": " And so similar to how we were\nable to fingerprint browsers",
    "start": "3653020",
    "end": "3662844"
  },
  {
    "text": "using that Panopticlick\nwebsite, maybe there's something unique about the way\nthat the VM would be set up that allows to fingerprint it.",
    "start": "3662844",
    "end": "3669530"
  },
  {
    "text": "And it may in fact be the case\nthat maybe the virtual machine",
    "start": "3669530",
    "end": "3674800"
  },
  {
    "text": "monitor or the OS itself\nis unique in some ways.",
    "start": "3674800",
    "end": "3680640"
  },
  {
    "text": "That would allow a web attacker\nto figure out who the user was. And so one cute example of\nthis is TCP fingerprinting.",
    "start": "3680640",
    "end": "3688440"
  },
  {
    "text": " So what's the big\nidea behind this.",
    "start": "3688440",
    "end": "3694200"
  },
  {
    "text": "So as it turns out,\nthe specification for the TCP protocol\nactually allows some of the parameters\nfor the protocol",
    "start": "3694200",
    "end": "3700420"
  },
  {
    "text": "to be set by the\nimplementation of the protocol. So, for example, TCP allows\nimplementers to choose things",
    "start": "3700420",
    "end": "3707725"
  },
  {
    "text": "like initial packet\nsize-- the things that are sent out the first part\nof the TCP connection-- it allows implementers to choose\nthings like that initial time",
    "start": "3707725",
    "end": "3715000"
  },
  {
    "text": "to live in those packets. And so you can imagine,\nand in fact, you don't have to imagine that\nthis is actually the truth.",
    "start": "3715000",
    "end": "3721995"
  },
  {
    "text": "You can get off-the shelf\ntools like InMap, for example, that they actually can tell\nwhat operating system you're",
    "start": "3721995",
    "end": "3727150"
  },
  {
    "text": "running with high probability\njust by sending you packets. They'll send these very\ncarefully crafted packets.",
    "start": "3727150",
    "end": "3733040"
  },
  {
    "text": "And they will look and\nsee things like here's what the TTL was or here's\nwhat the packet size distribution was-- here's what\nthe TTP sequence number was.",
    "start": "3733040",
    "end": "3740090"
  },
  {
    "text": "And they basically have a\ndatabase to fingerprint. And they say, OK, if the\nreturn packet has this, this, and this characteristic,\nthen the table",
    "start": "3740090",
    "end": "3747280"
  },
  {
    "text": "says that you're probably\nrunning for some reason Solaris. You're running Mac. You're running\nWindows or whatever.",
    "start": "3747280",
    "end": "3754120"
  },
  {
    "text": "So even if we use one of\nthese stronger approaches for private browsing\nwith a VM or an OS, you still may be able to run\none of those TCP fingerprinting",
    "start": "3754120",
    "end": "3761570"
  },
  {
    "text": "attacks and learn a lot\nabout a particular user. And one thing that's\nalso interesting to note",
    "start": "3761570",
    "end": "3770302"
  },
  {
    "text": "is that even if we use one of\nthese more powerful techniques",
    "start": "3770302",
    "end": "3776042"
  },
  {
    "text": "to try to protect the\nuser, the user is still shared across both the public\nand the private browsing",
    "start": "3776042",
    "end": "3784500"
  },
  {
    "text": "session. Still uses-- visibly\nusing the machine. So why is it interesting? Well, it's interesting\nbecause you yourself",
    "start": "3784500",
    "end": "3793020"
  },
  {
    "text": "by way that you use computers,\nmay leak information about yourself. So, for example,\nas it turns out,",
    "start": "3793020",
    "end": "3802780"
  },
  {
    "text": "users have unique\nkeystroke timing. ",
    "start": "3802780",
    "end": "3809049"
  },
  {
    "text": "So if I look at-- if I give\neveryone in this class the same thing to type in --\nthe quick, brown fox--",
    "start": "3809050",
    "end": "3815240"
  },
  {
    "text": "whatever that nonsense\nis-- and I actually look at the inter-key press timing,\nwe'll all have these unique",
    "start": "3815240",
    "end": "3822319"
  },
  {
    "text": "distributions that can\npotentially be used to fingerprint us. Another thing that's\ninteresting is that users",
    "start": "3822320",
    "end": "3830960"
  },
  {
    "text": "have unique writing styles.  So there's this\nbranch of security",
    "start": "3830960",
    "end": "3840500"
  },
  {
    "text": "that is called stylography. ",
    "start": "3840500",
    "end": "3846059"
  },
  {
    "text": "And the basic idea here is to\nfigure out if I am an attacker,",
    "start": "3846060",
    "end": "3852270"
  },
  {
    "text": "can I figure out\nwho you are just by looking at writing\nsamples from you? So imagine that\nfor whatever reason",
    "start": "3852270",
    "end": "3858730"
  },
  {
    "text": "you're hanging out on 4chan--\ndon't hang out on 4chan-- and I want to figure out if\nyou've actually, in fact, been hanging out on 4chan.",
    "start": "3858730",
    "end": "3864780"
  },
  {
    "text": "So perhaps what\nI can do is I can look at a bunch of\ndifferent posts from 4chan.",
    "start": "3864780",
    "end": "3870970"
  },
  {
    "text": "Maybe I can cluster those\nposts into sets of posts that I think look\nstylistically the same.",
    "start": "3870970",
    "end": "3877998"
  },
  {
    "text": "And then what I can do\nis I can find things that you've written publicly\nwhere you're actually attributed as the author.",
    "start": "3877999",
    "end": "3883652"
  },
  {
    "text": "I'll look at you homework\nassignments or papers that you've written\nor things like that. And I'll see do you match\nany of these clusters",
    "start": "3883652",
    "end": "3889630"
  },
  {
    "text": "from these 4chan comments. And if so, them maybe I can say\nmaybe send you a stern note. Talk to the parents that\ntheir kid has gone off",
    "start": "3889630",
    "end": "3895120"
  },
  {
    "text": "the beaten path. Get off of 4chan. So the reason is I would like\nto look at this thing called",
    "start": "3895121",
    "end": "3900460"
  },
  {
    "text": "stylography. It's actually quite interesting. Does anyone have any\nquestions about that?",
    "start": "3900460",
    "end": "3906371"
  },
  {
    "text": "Excellent.  So we discuss how we\nmight be able to use",
    "start": "3906371",
    "end": "3915040"
  },
  {
    "text": "VM or modified operating systems\nto provide private browsing support.",
    "start": "3915040",
    "end": "3920130"
  },
  {
    "text": "And so you might wonder, OK,\nwell, then why don't browsers require users to do\none of these things--",
    "start": "3920130",
    "end": "3925895"
  },
  {
    "text": "to have one of these tricked\nout VMs or tricked out OSes? So why do browsers\ntake it upon themselves to implement all this stuff?",
    "start": "3925895",
    "end": "3931560"
  },
  {
    "text": "And so the main reason\nis deployability. So in fact, browser\nvendors typically do not want to ask their\nusers to do anything special",
    "start": "3931560",
    "end": "3939290"
  },
  {
    "text": "to use the browser besides\ninstall the browser binary itself. This is similar\nto the motivation",
    "start": "3939290",
    "end": "3944582"
  },
  {
    "text": "of the native client. So if Google wants to\nadd these cool future to end users' computers. But it doesn't\nwant to force users",
    "start": "3944582",
    "end": "3950640"
  },
  {
    "text": "to install some special\nversion of Windows or Linux or whatever. So Google basically says, we'll\ntake care of this ourselves.",
    "start": "3950640",
    "end": "3958610"
  },
  {
    "text": "Then another reason\nis actually usability. So a lot of these\nVM and OS-level",
    "start": "3958610",
    "end": "3964920"
  },
  {
    "text": "solutions in private\nbrowsing-- as we've discussed, they make it more\ndifficult for users to persist state from\nprivate browsing sessions",
    "start": "3964920",
    "end": "3972160"
  },
  {
    "text": "that they do actually want to\npersist like downloading files like bookmarks they create\nand things like that.",
    "start": "3972160",
    "end": "3979480"
  },
  {
    "text": "So basically the browser\nvendors say, well, if we implement private\nbrowsing modes ourselves, we can actually allow\nusers to do those things.",
    "start": "3979480",
    "end": "3985730"
  },
  {
    "text": "We can allow users to\ntake downloaded files from private browsing\nmode and take them to the rest of the machine. So that seems nice at first.",
    "start": "3985730",
    "end": "3992710"
  },
  {
    "text": "But note that, of course,\nthat allowing users to export some type\nof private state",
    "start": "3992710",
    "end": "3997740"
  },
  {
    "text": "actually opens up a lot of\nsecurity vulnerabilities. It makes it very difficult to\nanalyze security properties",
    "start": "3997740",
    "end": "4003420"
  },
  {
    "text": "that result in private browsing\nmodes actually provide.",
    "start": "4003420",
    "end": "4009770"
  },
  {
    "text": "And so in the paper,\nthey try to characterize the different types of browser\nstates that can be modified",
    "start": "4009770",
    "end": "4017900"
  },
  {
    "text": "and how current private\nbrowsing modes actually handle the modifications at stake.",
    "start": "4017900",
    "end": "4023079"
  },
  {
    "text": "So the paper describes\nthis taxonomy of browser state changes.",
    "start": "4023080",
    "end": "4032122"
  },
  {
    "text": "And so there are four\nthings in the taxonomy. So one type of state\nchange is initiated",
    "start": "4032122",
    "end": "4042110"
  },
  {
    "text": "by the website itself. And there's no user interaction. ",
    "start": "4042110",
    "end": "4049750"
  },
  {
    "text": "And so examples of this\ntype of state change think about stuff like\nwhen a cookie gets",
    "start": "4049750",
    "end": "4057579"
  },
  {
    "text": "set-- when something\ngets added to the address",
    "start": "4057580",
    "end": "4063482"
  },
  {
    "text": "history of the browser--\nmaybe within a browser",
    "start": "4063482",
    "end": "4069250"
  },
  {
    "text": "cache or something. And so from this type\nof state, basically,",
    "start": "4069250",
    "end": "4076210"
  },
  {
    "text": "private browsing\nmode says this state is a private browsing\nmode session.",
    "start": "4076210",
    "end": "4081240"
  },
  {
    "text": "But it basically is\ngoing to be destroyed when that private browsing\nsession concludes. And so the intuition behind\nthis is that because there",
    "start": "4081240",
    "end": "4090419"
  },
  {
    "text": "is no user interaction\nin creating this state, then perhaps the right\nthing for the browser to do",
    "start": "4090419",
    "end": "4096240"
  },
  {
    "text": "is assume that the user\nwouldn't want that to persist. So another type of\nbrowser state change",
    "start": "4096241",
    "end": "4105093"
  },
  {
    "text": "is initiated by the website\nthat the user is visiting.",
    "start": "4105094",
    "end": "4112568"
  },
  {
    "text": "But there is some type of\nuser interaction involved in the state change.",
    "start": "4112569",
    "end": "4120189"
  },
  {
    "text": "So an example of this might\nbe the user installs client",
    "start": "4120189",
    "end": "4125234"
  },
  {
    "text": "certificate or maybe\nthere's a safe password.",
    "start": "4125234",
    "end": "4133359"
  },
  {
    "text": "So the user tries to\nlogin to something. And the browser says\nvery helpfully would you",
    "start": "4133359",
    "end": "4140130"
  },
  {
    "text": "like to save this password? And then if the users\nsays, yes, then these types of things, say\npasswords, can actually",
    "start": "4140130",
    "end": "4145615"
  },
  {
    "text": "be used outside of the\nprivate browsing mode. And so it's a little\nbit unclear in principle",
    "start": "4145616",
    "end": "4152460"
  },
  {
    "text": "what the policy\nfor this should be. So what ends up\nhappening in practice is that browsers\ntypically allow statements",
    "start": "4152460",
    "end": "4160259"
  },
  {
    "text": "in this category that set\nin private browsing modes to persist outside of\nthat private browsing mode",
    "start": "4160260",
    "end": "4166200"
  },
  {
    "text": "under the intuition that the\nuser did have to say yes or no. If the user said, yes,\nthen maybe the user",
    "start": "4166200",
    "end": "4171744"
  },
  {
    "text": "is smart enough to\nunderstand that they save some password\nfor some unsavory site",
    "start": "4171744",
    "end": "4178066"
  },
  {
    "text": "and someone comes\non later and figures that out, that's the users\nfault-- not the browsers fault. So it's a little unclear\nwhat the best policy is here.",
    "start": "4178066",
    "end": "4185330"
  },
  {
    "text": "But in practice, this\ntype of state change is allowed to persist outside\nof private browsing mode. ",
    "start": "4185330",
    "end": "4192359"
  },
  {
    "text": "So there's another type\nof state change, which is purely initiated by the user.",
    "start": "4192360",
    "end": "4199790"
  },
  {
    "text": "And so here you can think about\nthings like setting a bookmark",
    "start": "4199790",
    "end": "4205590"
  },
  {
    "text": "or maybe downloading files. ",
    "start": "4205590",
    "end": "4211800"
  },
  {
    "text": "And so the story\nfor this state is similar to the story\nfor the state up here. So basically because\nthe user was explicitly",
    "start": "4211800",
    "end": "4218440"
  },
  {
    "text": "involved in the\ncreation of that state. Private browsing modes\ntypically say, OK, it's OK to persist these\ntypes of changes",
    "start": "4218440",
    "end": "4225174"
  },
  {
    "text": "to the outside world outside\nof private browsing mode. Then there's some\nsets of state which",
    "start": "4225174",
    "end": "4231450"
  },
  {
    "text": "are actually unrelated to any\nparticular session at all.",
    "start": "4231450",
    "end": "4240720"
  },
  {
    "text": "So this is stuff, for example,\nlike an update to the browser",
    "start": "4240720",
    "end": "4246100"
  },
  {
    "text": "itself-- the actual binary\nthat constitutes the browser.",
    "start": "4246100",
    "end": "4253890"
  },
  {
    "text": "And so the way the browser\nvendors think about this state is this state is\nessentially assumed to be part of the single,\nglobal state that's",
    "start": "4253890",
    "end": "4261651"
  },
  {
    "text": "available to both public\nand private browsing modes. And so eventually,\nif you look at it, there's actually quite a lot\nof states that will actually",
    "start": "4261651",
    "end": "4269210"
  },
  {
    "text": "potentially leak outside\nof private browsing mode, particularly if there's\nuser volition involved.",
    "start": "4269210",
    "end": "4274539"
  },
  {
    "text": "So it's interesting\nto think about is this the right trade-off\nbetween security and privacy?",
    "start": "4274539",
    "end": "4282150"
  },
  {
    "text": "So what's interesting is\nthat-- so the paper actually says that it's difficult to\nsort of prevent a local attacker",
    "start": "4282150",
    "end": "4292045"
  },
  {
    "text": "from detecting whether\nor not you've been using private browsing mode. And the paper was\na little bit vague",
    "start": "4292045",
    "end": "4297200"
  },
  {
    "text": "about why this\nmight be the case. So one reason why\nthis might be the case is because some of this\nstate that actually leaks",
    "start": "4297200",
    "end": "4303457"
  },
  {
    "text": "from private browsing mode\nto public browsing mode, essentially it can\nactually contain hints the state was generated\nin private browsing mode.",
    "start": "4303457",
    "end": "4310960"
  },
  {
    "text": "So for example, on\nFirefox and Chrome, when you generate a bookmark\nin private browsing mode,",
    "start": "4310960",
    "end": "4318524"
  },
  {
    "text": "that bookmark has a bunch\nof metadata with it. So for example, the\ntime that it was visited and things like that.",
    "start": "4318524",
    "end": "4323780"
  },
  {
    "text": "So in many cases,\nthat metadata will be set to zero or\nsome null value if that bookmark was generated\ninside of a private browsing",
    "start": "4323780",
    "end": "4331140"
  },
  {
    "text": "mode. So then later on if someone\ncontrols your machine, and they look at your\nbookmark information--",
    "start": "4331140",
    "end": "4336650"
  },
  {
    "text": "if they see this metadata set\nto this zero and null value, they can say, aha, that\nbookmark was probably generated",
    "start": "4336650",
    "end": "4342590"
  },
  {
    "text": "in private browsing mode. So one thing to think\nabout is typically",
    "start": "4342590",
    "end": "4348775"
  },
  {
    "text": "we talk about browser security. We talk about, OK,\nwhat can people do with JavaScript or HTML or CSS.",
    "start": "4348775",
    "end": "4354356"
  },
  {
    "text": "One thing you might\nwant to think about is, well, what can people do\nwith plug-ins or extensions? So in the context\nof private browsing,",
    "start": "4354356",
    "end": "4360350"
  },
  {
    "text": "plug-ins and\nextensions are quite interesting because they're\nnot constrained in most cases",
    "start": "4360350",
    "end": "4366260"
  },
  {
    "text": "by the same origin policy. They can constrain\nstuff like JavaScript. And what's interesting is that\nthese extensions and plug-ins",
    "start": "4366260",
    "end": "4372340"
  },
  {
    "text": "typically run with\nvery high authority. Loosely speaking, you can think\nof them as like kernel modules.",
    "start": "4372340",
    "end": "4377500"
  },
  {
    "text": "They implement new\nfeatures directly inside the browsers themselves. And so that's a\nlittle bit problematic",
    "start": "4377500",
    "end": "4383280"
  },
  {
    "text": "because these plug-ins\nand extensions are often developed by someone who is\nnot the actual browser vendor.",
    "start": "4383280",
    "end": "4389030"
  },
  {
    "text": "So what that means\nis that someone is trying to do something\nnice and provide you with this nice value add in this\nbrowser plug in or extension.",
    "start": "4389030",
    "end": "4395580"
  },
  {
    "text": "But that implementor\nmight not fully understand the context,\nthe security context, in which that extension runs.",
    "start": "4395580",
    "end": "4402140"
  },
  {
    "text": "So that extension may not\nimplement private browsing mode semantics. Or it may try to implement\nit to do it in a bad way.",
    "start": "4402140",
    "end": "4409710"
  },
  {
    "text": "And so as I'll describe in\na couple of minutes, that's actually bad from the\nsecurity perspective",
    "start": "4409710",
    "end": "4415110"
  },
  {
    "text": "because that means if we add\nsome of these new plug-ins or extensions, you\nnow can't strongly reason about what the\nresulting [INAUDIBLE] are.",
    "start": "4415110",
    "end": "4422990"
  },
  {
    "text": "Now, one thing that's nice\nis that plug-ins are actually probably going the\nway of dinosaurs. So as you probably know, HTML5\nadds all these new features",
    "start": "4422990",
    "end": "4430386"
  },
  {
    "text": "like the audio tag\nand the videos tag, and stuff like that. And so a lot of these new\nfeatures were designed to allow",
    "start": "4430387",
    "end": "4436440"
  },
  {
    "text": "people to get away\nfrom plug-ins-- to get away from Java--\nto get away from Flash .",
    "start": "4436440",
    "end": "4441744"
  },
  {
    "text": "So when people in the\npast wanted do things like have rich 2D\nor 3D graphics, they'd have to do something\nlike Java or Flash.",
    "start": "4441745",
    "end": "4448660"
  },
  {
    "text": "Now they can use\nthings like Web GL. They can used things\nlike the canvass tag. So probably plug-ins\nare going away.",
    "start": "4448660",
    "end": "4454980"
  },
  {
    "text": "In fact, the IE\nteam for example, has said that in a\ncouple years they don't think anybody's going to\nbe using plug-ins whatsoever.",
    "start": "4454980",
    "end": "4460410"
  },
  {
    "text": "It's all going to\nbe HTML5 type stuff. In fact, if you go to YouTube--\nI don't know if you've noticed. But a lot of times if\nyou go to the video,",
    "start": "4460410",
    "end": "4466650"
  },
  {
    "text": "the video is actually using--\nit's called an HTML5 player. They've gone away from their\nstandard plugin-based one.",
    "start": "4466650",
    "end": "4474290"
  },
  {
    "text": "So that's very interesting. You can already see\nsites trying to move towards this new plug-in world. However, extensions\nare probably here",
    "start": "4474290",
    "end": "4480590"
  },
  {
    "text": "to stay for at least\nthe foreseeable future. So it's still important\nto get those right. So, yeah, the last thing\nthat I wanted to discuss",
    "start": "4480590",
    "end": "4487450"
  },
  {
    "text": "is a paper was written in\n2010-- that's four years ago. So you might think\nto yourself what's",
    "start": "4487450",
    "end": "4492929"
  },
  {
    "text": "changed about private browsing? And so at a high level,\nprivate browsing mode is still tricky to get right.",
    "start": "4492930",
    "end": "4499580"
  },
  {
    "text": "And the reason why it's\ntricky to get right-- a couple of reasons. So first of all, because\nthe browser [INAUDIBLE]",
    "start": "4499580",
    "end": "4505430"
  },
  {
    "text": "is still growing because of\nthings like this HTML5 stuff.",
    "start": "4505430",
    "end": "4510560"
  },
  {
    "text": "The interface, which needs\nto be secure with respect to private browsing\nmode, that frontier is always getting bigger.",
    "start": "4510560",
    "end": "4517159"
  },
  {
    "text": "And also a lot of\ntimes developers-- they are more focused on to\nadding cool, new features.",
    "start": "4517160",
    "end": "4522950"
  },
  {
    "text": "And then the\nprivacy implications get taken up later on. And so in practice, it is\nstill tricky to produce",
    "start": "4522950",
    "end": "4529377"
  },
  {
    "text": "a private browsing mode which\ncatches all potential data leaks. So one example, there\nwas a Firefox bug fix",
    "start": "4529377",
    "end": "4537600"
  },
  {
    "text": "from January, 2014. And the basic idea is\nthere is this extension--",
    "start": "4537600",
    "end": "4544060"
  },
  {
    "text": "it's called pdf.js\nis basically a way to look at PDF files using\npure HTML5 interfaces.",
    "start": "4544060",
    "end": "4555020"
  },
  {
    "text": "And so as it turns\nout, this extension was allowing public mode cookies\nto leak when it was being",
    "start": "4555020",
    "end": "4563010"
  },
  {
    "text": "used in private browsing mode. The idea is that let's\nsay that you visit",
    "start": "4563010",
    "end": "4568440"
  },
  {
    "text": "some websites in public mode. You want to download some PDF. Maybe you get some\ncookie that comes back.",
    "start": "4568440",
    "end": "4573470"
  },
  {
    "text": "You come back in\nprivate browsing mode. You want to view another\nPDF from that site. And then pdf.js is actually\nsending those public mode",
    "start": "4573470",
    "end": "4580215"
  },
  {
    "text": "cookies along with any private\nmode things that were set. And so in the lecture\nnotes, I actually",
    "start": "4580215",
    "end": "4586110"
  },
  {
    "text": "have a link to the\nbugzilla discussion about the particular bug. So the fix was\nactually quite simple",
    "start": "4586110",
    "end": "4592600"
  },
  {
    "text": "once they realized\nthis was the problem. Basically they just\nhave to add a check that says morally speaking, am\nI in private browsing mode?",
    "start": "4592600",
    "end": "4598680"
  },
  {
    "text": "If so, do some things--\nand one of those things is not from the cookies. So the fix here is\nactually quite simple.",
    "start": "4598680",
    "end": "4605630"
  },
  {
    "text": "But the challenge was\nthat once again, people added this cool, new extension.",
    "start": "4605630",
    "end": "4611500"
  },
  {
    "text": "But it hadn't really\ncrossed their mind to do this full, invasive audit.",
    "start": "4611500",
    "end": "4617590"
  },
  {
    "text": "And say where are all\nthe places at which private browsing with\nsemantics might be impacted",
    "start": "4617590",
    "end": "4623720"
  },
  {
    "text": "by this particular plug-in. There's another\ninteresting one too this is actually\nthe discussion we",
    "start": "4623720",
    "end": "4629405"
  },
  {
    "text": "had about 30 minutes ago\nabout what happens if you have private tabs and public tabs\nwhere you open at the same time or very close to each other.",
    "start": "4629405",
    "end": "4635570"
  },
  {
    "text": "There is actually\na bug in Firefox. I think that's from--\nlet's see here-- yeah, 2011, which\nis still unfilled.",
    "start": "4635570",
    "end": "4642750"
  },
  {
    "text": "And the basic idea\nis that if you go to a task in private\nbrowsing mode-- OK, you go do some stuff.",
    "start": "4642750",
    "end": "4648655"
  },
  {
    "text": "You then close that tab. You then open a new\npublic mode tab.",
    "start": "4648655",
    "end": "4654170"
  },
  {
    "text": "And you go to about:memory.",
    "start": "4654170",
    "end": "4660906"
  },
  {
    "text": "So as you probably know, a\nbrowser is defined as fake URLs and telling information\nabout how the browser works. So you go to the private\ntab, close it up,",
    "start": "4660906",
    "end": "4667706"
  },
  {
    "text": "then go to about:memory. This is going to\ntell you information about all the objects that\nFirefox has allocated.",
    "start": "4667706",
    "end": "4673830"
  },
  {
    "text": "So what would happen is that\nwindow objects are typically deallocated-- they are\n[INAUDIBLE] in Firefox.",
    "start": "4673830",
    "end": "4681362"
  },
  {
    "text": "So what ends up happening is\nthat when you open up that new public mode tab, go to\nabout:memory you can actually",
    "start": "4681362",
    "end": "4686880"
  },
  {
    "text": "find information still about\nthat private mode window such as things like a\nURL, for example,",
    "start": "4686880",
    "end": "4693087"
  },
  {
    "text": "that will tell you how much\nmemory to allocate and all that kind of stuff. And it's all in the plain text. And so that's an example\nof how these very subtle",
    "start": "4693087",
    "end": "4700761"
  },
  {
    "text": "interfaces and browsers\nthat can actually leak a lot of information. And so it's very interesting.",
    "start": "4700762",
    "end": "4706395"
  },
  {
    "text": "If you look at the\nbugzilla discussion, it's actually pretty interesting\nto see how these problems get resolved in real life.",
    "start": "4706395",
    "end": "4712160"
  },
  {
    "text": "And I put a link it\nso there is a message that this book was deprioritized\nwhen it became clear",
    "start": "4712160",
    "end": "4719025"
  },
  {
    "text": "that the potential solution\nwas more involved than originally anticipated.",
    "start": "4719025",
    "end": "4724552"
  },
  {
    "text": "So that's a pretty\nlong discussion about how do we fix this. And it involved changing the\nway that garbage collection is done.",
    "start": "4724552",
    "end": "4729610"
  },
  {
    "text": "And it's very tricky because\nif you invoke it too often then it gets performance.",
    "start": "4729610",
    "end": "4735100"
  },
  {
    "text": "So there's this long\ndiscussion about this. So they said, \"It\nwas deprioritized when it was clear the\nsolution was more involved",
    "start": "4735100",
    "end": "4740809"
  },
  {
    "text": "than anticipated.\" And then in response,\na developer said, \"That is very sad to hear.",
    "start": "4740809",
    "end": "4746250"
  },
  {
    "text": "This could pretty much\ndefeat the purpose of things like session\nstore for getting about closed private windows.\"",
    "start": "4746250",
    "end": "4752130"
  },
  {
    "text": "So the developers\nabout this stuff. Like in the case of\nthe session store, this is storage\nfeature for HTML5--",
    "start": "4752130",
    "end": "4759780"
  },
  {
    "text": "they had gone to\na lot of trouble to make it delete\nthings that belong",
    "start": "4759780",
    "end": "4765780"
  },
  {
    "text": "to these closed private windows. But, basically, what\nthis bug did-- it still-- it basically still\nleft information",
    "start": "4765780",
    "end": "4772060"
  },
  {
    "text": "about that stuff sitting\naround in memory somewhere. So long story short,\nit's still very difficult",
    "start": "4772060",
    "end": "4777841"
  },
  {
    "text": "to get private browsing right. And in fact, there are actually\noff-the-shelf forensics tools that you can download\nthat will actually",
    "start": "4777841",
    "end": "4783431"
  },
  {
    "text": "look for evidence of both public\nand private browsing modes. So if you're an\nattacker, you don't have",
    "start": "4783431",
    "end": "4789625"
  },
  {
    "text": "to roll your own custom tool. There's this one\nthey call Magnet. I think it's an internet\nevidence finder. You just go get this thing.",
    "start": "4789625",
    "end": "4795740"
  },
  {
    "text": "It'll do things like\nlook through your page file for RAM artifacts. And it will give\nyou a very nice GUI. It'll say here are\nthe images I found.",
    "start": "4795740",
    "end": "4802570"
  },
  {
    "text": "Here are the URLs. So in practice, these\nprivate browsing modes still do leak some information.",
    "start": "4802570",
    "end": "4808740"
  },
  {
    "text": "All right, so next section,\nwe'll talk about Tor. ",
    "start": "4808740",
    "end": "4812660"
  }
]