[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "[SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "7229"
  },
  {
    "text": " BERTHOLD HORN: We'll\nstart off by talking",
    "start": "7230",
    "end": "13740"
  },
  {
    "text": "a little bit about a review of\nthings we've done last time, perspective projection, and a\nlittle bit about things that",
    "start": "13740",
    "end": "23759"
  },
  {
    "text": "are relevant to the homework\nproblem, particularly the last two questions.",
    "start": "23760",
    "end": "28949"
  },
  {
    "text": "And we'll go from perspective\nprojection to motion.",
    "start": "28950",
    "end": "35050"
  },
  {
    "start": "30000",
    "end": "79000"
  },
  {
    "text": "So in perspective projection\nwe have a relationship between points in\nthe environment and points in the image.",
    "start": "35050",
    "end": "41590"
  },
  {
    "text": "And we found that we had\nthe simple relationship",
    "start": "41590",
    "end": "49980"
  },
  {
    "text": "between the 3D world\nand the 2D world, as long as we pick a\nsuitable coordinate system",
    "start": "49980",
    "end": "56940"
  },
  {
    "text": "with the origin at the\ncenter of projection, and the z-axis along the\noptical axis, and so on.",
    "start": "56940",
    "end": "64620"
  },
  {
    "text": "But then we're going to\ngo from that to motion by differentiating\nthat equation.",
    "start": "64620",
    "end": "70590"
  },
  {
    "text": "And then we'll talk about\nmotion of brightness patterns",
    "start": "70590",
    "end": "76020"
  },
  {
    "text": "in the image itself. So we had that, and then we\nhad a vector version, which",
    "start": "76020",
    "end": "101580"
  },
  {
    "start": "79000",
    "end": "151000"
  },
  {
    "text": "is only slightly more compact. So it's not, in this\ncase, a great help.",
    "start": "101580",
    "end": "107399"
  },
  {
    "text": "But we'll use both of them. We'll switch back\nand forth and use whatever is suitable\nfor the problem",
    "start": "107400",
    "end": "113340"
  },
  {
    "text": "that we're dealing with. So let's start with motion.",
    "start": "113340",
    "end": "118810"
  },
  {
    "text": "So that's a static setup. And we can easily relate\npoints in the environment",
    "start": "118810",
    "end": "125640"
  },
  {
    "text": "to points in the image. Now, what if there's motion? What if that point in\nthe environment moves?",
    "start": "125640",
    "end": "131250"
  },
  {
    "text": "Obviously, there will be\nsome motion in the image. And if we can find out what\nthat relationship is, then",
    "start": "131250",
    "end": "136770"
  },
  {
    "text": "maybe in some circumstances,\nwe can invert that so that we can measure the\nmotion of brightness patterns",
    "start": "136770",
    "end": "143910"
  },
  {
    "text": "in the image, as you do\nin the homework problem, and somehow use that\nto figure out what's",
    "start": "143910",
    "end": "149790"
  },
  {
    "text": "happening out in the world. So we just differentiate. We take our perspective\nequation and we differentiate.",
    "start": "149790",
    "end": "161280"
  },
  {
    "text": "So we get--  Now, on the right-hand\nside, we have a ratio.",
    "start": "161280",
    "end": "170245"
  },
  {
    "text": " And so there are two\nparts to the derivative.",
    "start": "170245",
    "end": "177670"
  },
  {
    "text": "And we just apply the rule for\ndifferentiation of a ratio.",
    "start": "177670",
    "end": "191390"
  },
  {
    "text": "And what I'm going to do a\nlot is reduce the intimidation",
    "start": "191390",
    "end": "196930"
  },
  {
    "text": "level of the equation by\nsubstituting more easily digested symbols.",
    "start": "196930",
    "end": "202730"
  },
  {
    "text": "So in this case, we've\ngot all these derivatives. Well, what are they? They're really velocities.",
    "start": "202730",
    "end": "208130"
  },
  {
    "text": "So there's going\nto be a velocity in the image in the x\ndirection, which I'll call u.",
    "start": "208130",
    "end": "213670"
  },
  {
    "text": "And there's a velocity in the\nreal world in the x direction,",
    "start": "213670",
    "end": "219349"
  },
  {
    "text": "which I'll call\nbig U. And then we have a velocity in the real\nworld in the z direction, which",
    "start": "219350",
    "end": "227800"
  },
  {
    "text": "I'll call W. So that looks a\nlittle bit less scary.",
    "start": "227800",
    "end": "233170"
  },
  {
    "text": "And of course, I can do the\nsame in the y direction, so apply the same\nidea over here.",
    "start": "233170",
    "end": "239319"
  },
  {
    "start": "239320",
    "end": "245450"
  },
  {
    "text": "So that's the forward direction. That is, if you tell me what\nthe motion vector is in 3D,",
    "start": "245450",
    "end": "251640"
  },
  {
    "text": "here's the formula\nto tell me what the motion vector is in 2D. And of course, we might\nwant to invert that,",
    "start": "251640",
    "end": "258109"
  },
  {
    "text": "but for the moment,\nlet's go with that. Now, we can rewrite\nthis in various forms.",
    "start": "258110",
    "end": "263270"
  },
  {
    "start": "260000",
    "end": "662000"
  },
  {
    "text": "And since we'll use this\na lot, let's do that. So one thing we can do is\nwe can split up these terms",
    "start": "263270",
    "end": "271250"
  },
  {
    "text": "into 1 over z, X over Z.",
    "start": "271250",
    "end": "276800"
  },
  {
    "text": "And why is that useful? Well, because we know that\nX over Z is little x over f.",
    "start": "276800",
    "end": "283550"
  },
  {
    "text": "So we can rewrite this\nusing image coordinates.",
    "start": "283550",
    "end": "288560"
  },
  {
    "text": "And we end up with-- ",
    "start": "288560",
    "end": "308289"
  },
  {
    "text": "And one thing this\nallows us to do is to ask the question, where\nin the image is there no motion?",
    "start": "308290",
    "end": "315530"
  },
  {
    "text": "So if we're looking at the\nmovement of brightness patterns",
    "start": "315530",
    "end": "321670"
  },
  {
    "text": "in the image, there may be some\nplaces where there isn't any. And those are of particular\ninterest, first of all",
    "start": "321670",
    "end": "327820"
  },
  {
    "text": "because we can find them using\nimage processing techniques, and then because they tell us\nsomething about the environment",
    "start": "327820",
    "end": "333970"
  },
  {
    "text": "or the motion. ",
    "start": "333970",
    "end": "353130"
  },
  {
    "text": "So you can see, if we\nset this equal to 0,",
    "start": "353130",
    "end": "359070"
  },
  {
    "text": "we find that's true at a\npoint x0 such that x0 over f is big U over big W. And\nsimilarly for this one",
    "start": "359070",
    "end": "368160"
  },
  {
    "text": "equal to 0. And so the point x0, y0\nis that sought-after point",
    "start": "368160",
    "end": "374610"
  },
  {
    "text": "where there is no image motion. And we call it the\n\"focus of expansion.\" And in the case of\nsimple situation,",
    "start": "374610",
    "end": "381240"
  },
  {
    "text": "like I'm approaching the\nwall, the focus of expansion is the point towards\nwhich I'm heading.",
    "start": "381240",
    "end": "387120"
  },
  {
    "text": "And so we can\nexpress it directly in terms of the\n3D motion vector.",
    "start": "387120",
    "end": "393610"
  },
  {
    "text": "And you'll notice\nthat this is actually just a projection of\nthe 3D motion vector",
    "start": "393610",
    "end": "399900"
  },
  {
    "text": "into the image plane. ",
    "start": "399900",
    "end": "406700"
  },
  {
    "text": "So I take that same\ndiagram over there, and now, instead of mapping\nthe vector to the point P,",
    "start": "406700",
    "end": "415090"
  },
  {
    "text": "I'm mapping the velocity. And if I do that, then\nthat defines this point x0,",
    "start": "415090",
    "end": "422620"
  },
  {
    "text": "y0 in the image where\nthere is no motion. And that's called the\nfocus of expansion. ",
    "start": "422620",
    "end": "430660"
  },
  {
    "text": "That's a useful\nthing, because if you can find the focus of\nexpansion, all you need to do",
    "start": "430660",
    "end": "437169"
  },
  {
    "text": "is connect that point,\nx0, y0 to the origin, and you have a vector that tells\nyou the direction of motion--",
    "start": "437170",
    "end": "444590"
  },
  {
    "text": "so a nice example of\ninverting that process.",
    "start": "444590",
    "end": "452320"
  },
  {
    "text": "Now, once we have the\nfocus of expansion, we can rewrite those\nequations yet one more time.",
    "start": "452320",
    "end": "457719"
  },
  {
    "start": "457720",
    "end": "476120"
  },
  {
    "text": "And so there are a\ncouple of things there that are of interest. One of them is that the f's\ncancel, so we can do that.",
    "start": "476120",
    "end": "486520"
  },
  {
    "start": "486520",
    "end": "493639"
  },
  {
    "text": "And then we actually\ncan get an idea of what the image is\ngoing to look like.",
    "start": "493640",
    "end": "499850"
  },
  {
    "text": "So let's suppose this\nis the image plane. Now we're looking\nat it straight on.",
    "start": "499850",
    "end": "506169"
  },
  {
    "text": "And suppose that this is\nour focus of expansion.",
    "start": "506170",
    "end": "512340"
  },
  {
    "text": "And we're moving\nwith respect to-- the environment is\nmoving with respect to us",
    "start": "512340",
    "end": "517590"
  },
  {
    "text": "or we're moving with\nrespect to the environment. Einstein said that\nit's all relative.",
    "start": "517590",
    "end": "522929"
  },
  {
    "text": "It doesn't matter. The only thing we can\ndetermine is the difference between the two motions.",
    "start": "522929",
    "end": "529560"
  },
  {
    "text": "Then, there will be\nno image motion here. And what about other places?",
    "start": "529560",
    "end": "534810"
  },
  {
    "text": "Well, this tells you exactly\nwhat the pattern will be like. So if we go to the\nright such that x0 minus",
    "start": "534810",
    "end": "544320"
  },
  {
    "text": "x is positive, while we keep\nthis one 0, what happens",
    "start": "544320",
    "end": "550790"
  },
  {
    "text": "is U will become larger. The further we go\naway, the larger. So we'll have a\nlittle vector here",
    "start": "550790",
    "end": "557660"
  },
  {
    "text": "that tells us the image\nmotion at that point, and another vector over here,\nwhich is perhaps larger.",
    "start": "557660",
    "end": "565769"
  },
  {
    "text": "And then we can go to where this\nis negative, so the other side.",
    "start": "565770",
    "end": "571100"
  },
  {
    "text": "Draw a vector here. ",
    "start": "571100",
    "end": "576520"
  },
  {
    "text": "So I'm starting to draw a little\nvector diagram of the motion",
    "start": "576520",
    "end": "582670"
  },
  {
    "text": "field, if you like, how things\nare expanding from that point. And I can do the same\nin the y direction.",
    "start": "582670",
    "end": "589459"
  },
  {
    "text": "So suppose I keep x0\nequals x, but I change y0, so I'm going along this line.",
    "start": "589460",
    "end": "595900"
  },
  {
    "text": "I'm going to get vectors\nthat point this way. ",
    "start": "595900",
    "end": "601480"
  },
  {
    "text": "And let me be adventurous\nand go off at right angles where x0 minus x is\nthe same as y0 minus y.",
    "start": "601480",
    "end": "609519"
  },
  {
    "text": "Well, that means that U and\nV are going to be the same. That means I'm going\nto get a vector",
    "start": "609520",
    "end": "614769"
  },
  {
    "text": "at 45 degrees, and opposite\ndirection, like that.",
    "start": "614770",
    "end": "619960"
  },
  {
    "text": "And I think you\ncan see that we're going to fill in this whole\ndiagram, this little vector",
    "start": "619960",
    "end": "628000"
  },
  {
    "text": "diagram, with arrows that\nare pointing outwards from the focus of expansion. That that's what\nthis equation says--",
    "start": "628000",
    "end": "634510"
  },
  {
    "text": "that all these\nvectors are radiating outward, and that's why it's\ncalled the focus of expansion. So I'm moving towards that wall.",
    "start": "634510",
    "end": "641500"
  },
  {
    "text": "And this is the place I'm\nactually going to hit. I may be going at an angle,\nbut my whole image is looming.",
    "start": "641500",
    "end": "650200"
  },
  {
    "text": "It's zooming outwards,\nwhich is a useful clue,",
    "start": "650200",
    "end": "656020"
  },
  {
    "text": "a useful cue for measuring\ndistance and velocity.",
    "start": "656020",
    "end": "661570"
  },
  {
    "text": " As you saw in the\nhomework problem,",
    "start": "661570",
    "end": "668590"
  },
  {
    "start": "662000",
    "end": "840000"
  },
  {
    "text": "there's the scale\nfactor ambiguity that because of\nperspective projection,",
    "start": "668590",
    "end": "674850"
  },
  {
    "text": "we can't actually tell\nabsolute distances. And we have a similar\nphenomenon here.",
    "start": "674850",
    "end": "681340"
  },
  {
    "text": "But what we can\ntell is this ratio. And so this whole field depends\ncritically on that ratio.",
    "start": "681340",
    "end": "690250"
  },
  {
    "text": "So what is that? W over Z. And if I\nmake that larger,",
    "start": "690250",
    "end": "698080"
  },
  {
    "text": "then the victors will be larger. That means I'm getting\ncloser to the surface.",
    "start": "698080",
    "end": "703600"
  },
  {
    "text": "I'm about to hit it. Conversely, if I make it\nsmaller, that will be smaller.",
    "start": "703600",
    "end": "710270"
  },
  {
    "text": "If I make it negative,\nwhat happens? Well, all of these\nvectors are reversed. So it's a focus of compression.",
    "start": "710270",
    "end": "718550"
  },
  {
    "text": "There's no such term, but\nwe could call it that. It's just the inverse of\nthe focus of expansion.",
    "start": "718550",
    "end": "724850"
  },
  {
    "text": "And that's what happens if I'm\nmoving away from the surface. So I'm taking off from\nthe lunar surface,",
    "start": "724850",
    "end": "730370"
  },
  {
    "text": "and the image is\ncompressing as I leave. ",
    "start": "730370",
    "end": "738500"
  },
  {
    "text": "So what is this? Well, let's turn it on its head. What is Z over W?",
    "start": "738500",
    "end": "745839"
  },
  {
    "text": "And W, of course, is\nthe rate of change of Z.",
    "start": "745840",
    "end": "751260"
  },
  {
    "text": "So we've got Z over dZ dT.  What are the units of that?",
    "start": "751260",
    "end": "757210"
  },
  {
    "text": "So Z is in, say, meters. And dZ dT is in\nmeters per second.",
    "start": "757210",
    "end": "762259"
  },
  {
    "text": "So the units of that ratio are-- STUDENT: Seconds. BERTHOLD HORN: Seconds.",
    "start": "762260",
    "end": "767780"
  },
  {
    "text": "And so can you think of\nwhat that quantity is? STUDENT: [INAUDIBLE].",
    "start": "767780",
    "end": "773030"
  },
  {
    "text": "BERTHOLD HORN: Sorry? STUDENT: Time to impact. BERTHOLD HORN: Time\nto impact, great, so that's going to\ntell me how long it's",
    "start": "773030",
    "end": "780380"
  },
  {
    "text": "going to take before I\ncrash into this surface. And so that's a\nquantity that we're",
    "start": "780380",
    "end": "787220"
  },
  {
    "text": "going to spend some\ntime thinking about, both because it's\nimportant if you're",
    "start": "787220",
    "end": "792949"
  },
  {
    "text": "say landing a NASA\ncraft on Europa",
    "start": "792950",
    "end": "800180"
  },
  {
    "text": "or if you're a fly\nlanding on the ceiling. And also, it turns\nout to be relatively",
    "start": "800180",
    "end": "806810"
  },
  {
    "text": "easy to compute compared\nto some of other things that we'll be looking at.",
    "start": "806810",
    "end": "811940"
  },
  {
    "text": "By the way, the landing\non Europa is a JPL RFP.",
    "start": "811940",
    "end": "818270"
  },
  {
    "text": "They wanted to have\nindustry give them ideas of how they're\ngoing to do that,",
    "start": "818270",
    "end": "824510"
  },
  {
    "text": "and how much it's going to cost. And we told them that this\nis the right way to do it. And we never heard\nfrom them again.",
    "start": "824510",
    "end": "831089"
  },
  {
    "text": "So I don't know. So if that craft crashes\non Europa, don't blame me.",
    "start": "831090",
    "end": "838550"
  },
  {
    "text": "I. Told them what to do. So this is beginning\nto look kind",
    "start": "838550",
    "end": "845560"
  },
  {
    "start": "840000",
    "end": "1240000"
  },
  {
    "text": "of promising because\nwe can actually see our way to inverting\nthis imaging process",
    "start": "845560",
    "end": "852370"
  },
  {
    "text": "and getting some useful\ninformation, just from the way the brightness pattern\nin the image changes.",
    "start": "852370",
    "end": "858940"
  },
  {
    "text": "But I need to torture\nyou a little bit more, and do this in vector form.",
    "start": "858940",
    "end": "864670"
  },
  {
    "text": "And we'll see later\nwhy this is useful. Right now, it's not\nsaving us a whole lot",
    "start": "864670",
    "end": "871029"
  },
  {
    "text": "in terms of writing, going\nfrom the component form to the vector form, but we'll\nsee that it does eventually.",
    "start": "871030",
    "end": "880810"
  },
  {
    "text": "So instead of differentiating\nthe component versions, we're going to now\ndifferentiate the vector form.",
    "start": "880810",
    "end": "888130"
  },
  {
    "text": "And of course,\nit's very similar. ",
    "start": "888130",
    "end": "895930"
  },
  {
    "text": "So what's the time\nderivative of a vector? Well, it's just the\nvector where you've differentiated each\nof the components",
    "start": "895930",
    "end": "902550"
  },
  {
    "text": "with respect to time. That's nothing very fancy. ",
    "start": "902550",
    "end": "913420"
  },
  {
    "text": "So we have that term again that\ncorresponds to this first part here, but because it's a ratio,\nand because R can be changing,",
    "start": "913420",
    "end": "921730"
  },
  {
    "text": "big R can be changing, we need\nto take account of the fact that it's a ratio. And we get-- and so to\nmake it look slightly less",
    "start": "921730",
    "end": "942120"
  },
  {
    "text": "intimidating, we'll switch from\nLeibniz to Newtonian notation. ",
    "start": "942120",
    "end": "952390"
  },
  {
    "text": "Again, the underline always\nmeans that it's a vector. ",
    "start": "952390",
    "end": "962020"
  },
  {
    "text": "And I'm splitting this up a bit. ",
    "start": "962020",
    "end": "969990"
  },
  {
    "text": "So the dot here denotes\ndifferentiation with respect to time.",
    "start": "969990",
    "end": "975100"
  },
  {
    "text": "And so we have two terms, one\nof which is obvious scaling--",
    "start": "975100",
    "end": "980519"
  },
  {
    "text": "that there's a\ncertain motion in 3D, and it's going to be\nmagnified or demagnified",
    "start": "980520",
    "end": "988050"
  },
  {
    "text": "by the ratio of\nthese two distances. So there's a big\nmotion out here.",
    "start": "988050",
    "end": "993750"
  },
  {
    "text": "It's a smaller motion in\nthere by the ratio of those. But then there's\nthis other term that",
    "start": "993750",
    "end": "999150"
  },
  {
    "text": "corresponds to motion\nin depth that we have to take into account. ",
    "start": "999150",
    "end": "1014120"
  },
  {
    "text": "And I rewrote it this\nway because again, we can make use of the fact\nthat we have this perspective",
    "start": "1014120",
    "end": "1021800"
  },
  {
    "text": "projection equation. And so we can introduce\nthe image coordinates. ",
    "start": "1021800",
    "end": "1032270"
  },
  {
    "text": "So focus of expansion, again,\nwould be where r dot is 0. And so that corresponds\nto z oh, let me put",
    "start": "1032270",
    "end": "1053300"
  },
  {
    "text": "the 1 over f on the other side. That's easier. ",
    "start": "1053300",
    "end": "1068799"
  },
  {
    "text": "And so we basically\nget the same equation.",
    "start": "1068800",
    "end": "1074260"
  },
  {
    "text": "I mean, if we just write out\nthe components of that equation, we get what we had before.",
    "start": "1074260",
    "end": "1081220"
  },
  {
    "text": "Then just wanted to do\none more little trick, which is in the appendix\nof the book, we have",
    "start": "1081220",
    "end": "1090100"
  },
  {
    "text": "some useful results about\nall sorts of simple math",
    "start": "1090100",
    "end": "1095500"
  },
  {
    "text": "that's needed, one of which\nhas to do with vector equations",
    "start": "1095500",
    "end": "1100840"
  },
  {
    "text": "and with manipulating cross\nproducts of cross products,",
    "start": "1100840",
    "end": "1106299"
  },
  {
    "text": "that kind of thing,\nwhich I typically don't remember how to do. So I'll go to the\nappendix of the book.",
    "start": "1106300",
    "end": "1111820"
  },
  {
    "text": "And the appendix\nis on the materials on the Stellar website.",
    "start": "1111820",
    "end": "1118870"
  },
  {
    "text": "So let me first transform\nthis one more time. So we've got-- that's\njust rewriting this.",
    "start": "1118870",
    "end": "1143480"
  },
  {
    "text": "And now, we use a result. And the reason we do\nthis is because it",
    "start": "1143480",
    "end": "1151430"
  },
  {
    "text": "allows us to make some general\nstatements about the flow. ",
    "start": "1151430",
    "end": "1159510"
  },
  {
    "text": "So cross product\nof cross products can be expressed as a\ndifference of dot products.",
    "start": "1159510",
    "end": "1165000"
  },
  {
    "text": "Now, you can match\nup these two lines,",
    "start": "1165000",
    "end": "1170640"
  },
  {
    "text": "and you can see where we're\ngoing with this, which is-- ",
    "start": "1170640",
    "end": "1190539"
  },
  {
    "text": "So finally there, we\nhave the image motion",
    "start": "1190540",
    "end": "1195550"
  },
  {
    "text": "expressed in terms\nof world motion using this somewhat\nodd-looking expression.",
    "start": "1195550",
    "end": "1203750"
  },
  {
    "text": "So why is this of interest? Well, the first\nthing you can say is that the result is\nperpendicular to z.",
    "start": "1203750",
    "end": "1210470"
  },
  {
    "text": "Because if you take the\ncross product of two vectors, the result is perpendicular\nto both of the vectors.",
    "start": "1210470",
    "end": "1216970"
  },
  {
    "text": "So r dot z equals 0.",
    "start": "1216970",
    "end": "1224620"
  },
  {
    "start": "1224620",
    "end": "1233920"
  },
  {
    "text": "So is that surprising-- that the\nimage motion is perpendicular to the z-axis? ",
    "start": "1233920",
    "end": "1242560"
  },
  {
    "text": "So image motions in that plane--",
    "start": "1242560",
    "end": "1247590"
  },
  {
    "text": "z-axis is there. No, of course it's obvious. I mean, it couldn't\nbe any other way.",
    "start": "1247590",
    "end": "1252990"
  },
  {
    "text": "This is a good way\nto check the result. If we got anything else,\nthere'd be a problem. So in the image,\nwe only have 2D.",
    "start": "1252990",
    "end": "1260790"
  },
  {
    "text": "We have x, y. And we have as\nvelocities u and v.",
    "start": "1260790",
    "end": "1266640"
  },
  {
    "text": "We don't have a velocity\nin the z direction. That would be popping\nout of the image. So that's interesting.",
    "start": "1266640",
    "end": "1272850"
  },
  {
    "text": "And then something\nelse we can look at is, what if the image motion\nis radially outward or inward--",
    "start": "1272850",
    "end": "1285800"
  },
  {
    "text": "that is, the motion is\nalong the radius vector to the point in the scene?",
    "start": "1285800",
    "end": "1293090"
  },
  {
    "text": "What do you expect will\nhappen to the image motion in that case? ",
    "start": "1293090",
    "end": "1301710"
  },
  {
    "text": "So you have the baseball\ncoming straight for you-- its image is doing what? STUDENT: [INAUDIBLE].",
    "start": "1301710",
    "end": "1307940"
  },
  {
    "text": "BERTHOLD HORN: It's expanding,\nbut it's not moving. So this is the\ncase where we would",
    "start": "1307940",
    "end": "1313370"
  },
  {
    "text": "expect image motion to be 0.",
    "start": "1313370",
    "end": "1318530"
  },
  {
    "text": "And now we check this formula. R dot and R are parallel. When we take their\ncross product,",
    "start": "1318530",
    "end": "1325159"
  },
  {
    "text": "the cross product's length\nis proportional to the sine of the angle between\nthe two vectors.",
    "start": "1325160",
    "end": "1330380"
  },
  {
    "text": "Where they're the same\nvector, then that angle is 0, and so the sine is 0. And so this formula, while\nit took a little bit of work",
    "start": "1330380",
    "end": "1340280"
  },
  {
    "text": "to get there, it's helpful for\nanswering certain questions. And we can right away\ncheck things like this.",
    "start": "1340280",
    "end": "1348080"
  },
  {
    "text": "If the thing is\ncoming straight at you or you're moving\ndirectly towards it,",
    "start": "1348080",
    "end": "1353490"
  },
  {
    "text": "there'll be no image motion. Well, that's our\nfocus of expansion. So if I'm moving\ntowards the wall,",
    "start": "1353490",
    "end": "1359299"
  },
  {
    "text": "that is the point where\nthe motion vector lines up with the direction\nto that point.",
    "start": "1359300",
    "end": "1366870"
  },
  {
    "text": "And so I get no image motion. ",
    "start": "1366870",
    "end": "1372230"
  },
  {
    "text": "While we're here, we can\nlook at some flow fields. ",
    "start": "1372230",
    "end": "1380520"
  },
  {
    "text": "So we already saw a\nflow field up there for a general motion\ntowards some point.",
    "start": "1380520",
    "end": "1388679"
  },
  {
    "text": "And we could look at just\na couple of other cases. So let's suppose that U,\nV and W could be anything,",
    "start": "1388680",
    "end": "1399690"
  },
  {
    "text": "but let's make it-- ",
    "start": "1399690",
    "end": "1406360"
  },
  {
    "text": "so we're assuming now that\ntwo of those components are 0, so there's only motion in\nthe world in the x direction.",
    "start": "1406360",
    "end": "1414409"
  },
  {
    "text": "And then what do we\nexpect in the image? Well, from our formulas, we\nsee that the only component",
    "start": "1414410",
    "end": "1424750"
  },
  {
    "text": "of the image motion is little u. ",
    "start": "1424750",
    "end": "1435270"
  },
  {
    "text": "So if the world is\nmoving in x, or I'm",
    "start": "1435270",
    "end": "1440290"
  },
  {
    "text": "moving in x relative\nto the world, then the vector field of\nhow brightness patterns move",
    "start": "1440290",
    "end": "1447790"
  },
  {
    "text": "in the image looks like this.  One thing to note,\nthough, is that the length",
    "start": "1447790",
    "end": "1454539"
  },
  {
    "text": "of those vectors\nis not the same-- that the length depends\non z, or if you like,",
    "start": "1454540",
    "end": "1468570"
  },
  {
    "text": "the inverse of z, and so on. So if you look at all\nof these formulas, we got R dot Z, which is big\nZ. And look at those formulas",
    "start": "1468570",
    "end": "1477100"
  },
  {
    "text": "up there. You've got 1 over Z. So yes, this is a very\nsimple vector field,",
    "start": "1477100",
    "end": "1484800"
  },
  {
    "text": "but the vectors\naren't all the same. So that kind of is unpleasant.",
    "start": "1484800",
    "end": "1491160"
  },
  {
    "text": "At the same time, when\nsomething is unpleasant, you can sometimes take\nadvantage of that.",
    "start": "1491160",
    "end": "1497950"
  },
  {
    "text": "So in this case, if we have\nvector field like this, one thing we could try\nand do is recover depth,",
    "start": "1497950",
    "end": "1505500"
  },
  {
    "text": "because these things are\nall inversely proportional to depth. And so again, an\nillustration of how",
    "start": "1505500",
    "end": "1512250"
  },
  {
    "text": "once we understand the\nforward process, we can turn that around to try and\nsolve the inverse problem.",
    "start": "1512250",
    "end": "1520679"
  },
  {
    "text": " U is 0, and let's try this one.",
    "start": "1520680",
    "end": "1527520"
  },
  {
    "text": " Well, that's just turning\neverything 90 degrees.",
    "start": "1527520",
    "end": "1534280"
  },
  {
    "text": "So that's not very interesting-- the same idea. ",
    "start": "1534280",
    "end": "1540920"
  },
  {
    "text": "Now, I guess to exploit this\nidea of recovering depth from these fields, we\nwould need to know Z.",
    "start": "1540920",
    "end": "1549860"
  },
  {
    "text": "We need to know the velocity. So there's two things affecting\nwhat these pictures look like.",
    "start": "1549860",
    "end": "1556700"
  },
  {
    "text": "One is the object, the\nshape, the distance, and the other one is the motion. And if we know either\none of the two,",
    "start": "1556700",
    "end": "1563900"
  },
  {
    "text": "then we can calculate\nthe other one. Of course, in practice, often\nwe don't know either one, and we'd like to recover both.",
    "start": "1563900",
    "end": "1571310"
  },
  {
    "text": "And then often, we end up\nwith an ill-posed problem. How about U is 0, V is\n0, W is not equal to 0?",
    "start": "1571310",
    "end": "1580475"
  },
  {
    "text": " Well, we already drew that\ndiagram up there, kind of.",
    "start": "1580475",
    "end": "1586190"
  },
  {
    "text": " If we look at the\nequations, we're",
    "start": "1586190",
    "end": "1592310"
  },
  {
    "text": "just going to get F OE is--",
    "start": "1592310",
    "end": "1597595"
  },
  {
    "start": "1597595",
    "end": "1603860"
  },
  {
    "text": "so that's the simplest\ncase of that picture, where the focus of expansion\nis right in the center",
    "start": "1603860",
    "end": "1610539"
  },
  {
    "text": "of the image.  Well, this is starting to hint\nat some of the things we're",
    "start": "1610540",
    "end": "1619510"
  },
  {
    "text": "going to pursue. We develop the equations for\nsome transformation like this,",
    "start": "1619510",
    "end": "1625450"
  },
  {
    "text": "between something in the world\nand something in the image, and then we try to invert it. And the forward one\nis always simple.",
    "start": "1625450",
    "end": "1632840"
  },
  {
    "text": "There's the equation up there. It's just plug in or whatever. The inverse isn't\nbecause often, there",
    "start": "1632840",
    "end": "1638980"
  },
  {
    "text": "may be more than one solution,\nor there may be no solution, or there may be an infinite\nnumber of solutions,",
    "start": "1638980",
    "end": "1645070"
  },
  {
    "text": "or it's ill-posed, in\nthe sense that if you make some small\nmeasurement error,",
    "start": "1645070",
    "end": "1651640"
  },
  {
    "text": "the answer is going to be\nperturbed by a large amount. So we'll have to be\ncareful about that.",
    "start": "1651640",
    "end": "1657620"
  },
  {
    "text": "But talking of motion\nof image brightness patterns, let's talk about that.",
    "start": "1657620",
    "end": "1664570"
  },
  {
    "start": "1658000",
    "end": "1815000"
  },
  {
    "text": " That's in the homework problem.",
    "start": "1664570",
    "end": "1671660"
  },
  {
    "text": "So let's talk a\nlittle bit about that.",
    "start": "1671660",
    "end": "1677090"
  },
  {
    "text": "So we'll ignore for the moment\nwhere these images come from. What is an image? Well, an image is a 2D\npattern of brightness values.",
    "start": "1677090",
    "end": "1686299"
  },
  {
    "text": "So it's E as a function\nof x and y, If you like. And we already said\nsomething about that",
    "start": "1686300",
    "end": "1694340"
  },
  {
    "text": "in terms of brightness\nbeing power per unit area. We'll make that\nmore clear later on.",
    "start": "1694340",
    "end": "1703870"
  },
  {
    "text": "So his question was,\nwhat about color? And yes, we will be\ntalking about color at some point, which\nis kind of, in a way,",
    "start": "1703870",
    "end": "1712630"
  },
  {
    "text": "is this repeated three times. And a couple of reasons not\nto bring it in at this point.",
    "start": "1712630",
    "end": "1719875"
  },
  {
    "text": "One is, we'll do it more\nsimply just using gray levels.",
    "start": "1719875",
    "end": "1725320"
  },
  {
    "text": "And then color is\npeculiarly human-centric,",
    "start": "1725320",
    "end": "1730600"
  },
  {
    "text": "in that the only reason that we\nuse three numbers to represent color is because our\nparticular color sensing system",
    "start": "1730600",
    "end": "1737110"
  },
  {
    "text": "has three senses. But we'll talk about\nall of that later on.",
    "start": "1737110",
    "end": "1742310"
  },
  {
    "text": "For now, assume that we\nhave taken RGB and turned it",
    "start": "1742310",
    "end": "1750670"
  },
  {
    "text": "into brightness, which is,\ndepending on who you read,",
    "start": "1750670",
    "end": "1757390"
  },
  {
    "text": "some combination of the\nthree components, mostly G.",
    "start": "1757390",
    "end": "1762550"
  },
  {
    "text": "Because human vision\nis most sensitive to G, and judges absolute brightness\nbased on some combination of R,",
    "start": "1762550",
    "end": "1772210"
  },
  {
    "text": "G, and B. Now, there are a\ncouple of things",
    "start": "1772210",
    "end": "1777400"
  },
  {
    "text": "I'm going to do repeatedly. So I want to kind of\npreemptively talk about them. One of them is I'm\ngoing to be switching",
    "start": "1777400",
    "end": "1784120"
  },
  {
    "text": "back and forth between\ncontinuous and discrete. So these days, with\neverything being digital,",
    "start": "1784120",
    "end": "1789760"
  },
  {
    "text": "of course the images\nwe get are discrete. They're quantized.",
    "start": "1789760",
    "end": "1795460"
  },
  {
    "text": "They're quantized in\nspace, and typically on a rectangular grid, which\nis kind of not the best grid",
    "start": "1795460",
    "end": "1802300"
  },
  {
    "text": "to use, but that's what we use. And then in\nbrightness, so we also",
    "start": "1802300",
    "end": "1807340"
  },
  {
    "text": "don't get continuous\nvalues for brightness. We get them quantized, often\nto as few as eight bits.",
    "start": "1807340",
    "end": "1814870"
  },
  {
    "text": "But it turns out that\na lot of what we do is easier to understand\nin the continuous domain.",
    "start": "1814870",
    "end": "1821320"
  },
  {
    "start": "1815000",
    "end": "2206000"
  },
  {
    "text": "So I've talked to\nyou about E of x, y. That's my brightness pattern.",
    "start": "1821320",
    "end": "1827800"
  },
  {
    "text": "For any x and y, it'll\ntell me what the brightness is, the power per unit area. But in practice,\nit's going to be",
    "start": "1827800",
    "end": "1834460"
  },
  {
    "text": "more like I have an array\nof numbers with two indices, and dealing with E sub whatever.",
    "start": "1834460",
    "end": "1844059"
  },
  {
    "text": "Correspondingly, in\nthe continuous domain, we'll often be taking integrals.",
    "start": "1844060",
    "end": "1850030"
  },
  {
    "text": "For example, where\nthere's some measurement, that's local at a pixel,\nbut we want to extend it",
    "start": "1850030",
    "end": "1855880"
  },
  {
    "text": "over the whole image. And we take either a single\nintegral or double integral. Well, of course in the discrete\nworld, we'll be taking sums.",
    "start": "1855880",
    "end": "1866170"
  },
  {
    "text": "But those are very\nstraightforward transformations. But they are very useful,\nbecause on the one hand,",
    "start": "1866170",
    "end": "1872360"
  },
  {
    "text": "we want to implement\nthis as actual code, and on the other hand,\nwe'd like to make it easier",
    "start": "1872360",
    "end": "1878530"
  },
  {
    "text": "to develop the math. And it's almost\ninevitable that it's",
    "start": "1878530",
    "end": "1883750"
  },
  {
    "text": "easier in the continuous world. Then we get to derivatives. So of course in the\ncontinuous world,",
    "start": "1883750",
    "end": "1895970"
  },
  {
    "text": "I can look at the x and y\nderivative of brightness. And the combination\nof these two is",
    "start": "1895970",
    "end": "1901340"
  },
  {
    "text": "called the\n\"brightness gradient,\" which is going to be very\nimportant in many of the things we do.",
    "start": "1901340",
    "end": "1906980"
  },
  {
    "text": "And in practice, I'm\ngoing to approximate those by making some sort\nof a first difference.",
    "start": "1906980",
    "end": "1916789"
  },
  {
    "text": " And we'll see that that's\none way of doing it.",
    "start": "1916790",
    "end": "1922820"
  },
  {
    "text": "It's not a particularly\ngood way of approximating the first derivative, but\nwe'll talk about others.",
    "start": "1922820",
    "end": "1928400"
  },
  {
    "text": "And just in terms\nof writing, this is easier to write than that.",
    "start": "1928400",
    "end": "1935159"
  },
  {
    "text": "So I know that's\nnot a big argument, but we'll find that\nsome of these things",
    "start": "1935160",
    "end": "1941000"
  },
  {
    "text": "have a closed form solution\nin the continuous domain that you can easily obtain. And it's harder to do the\nsame in the discrete domain.",
    "start": "1941000",
    "end": "1948110"
  },
  {
    "text": "So I'll be switching\nback and forth. With that in mind, let's\nlook at our 1D image.",
    "start": "1948110",
    "end": "1956705"
  },
  {
    "start": "1956705",
    "end": "1965880"
  },
  {
    "text": "So of course, images\nare typically 2D. There are 1D sensors, and\nthey have some benefits.",
    "start": "1965880",
    "end": "1976030"
  },
  {
    "text": "One of them is that you\ncan build a 1D sensor with a much larger number\nof pixels in one direction",
    "start": "1976030",
    "end": "1984090"
  },
  {
    "text": "than you can a 2D sensor,\nalthough these days, 2D sensor",
    "start": "1984090",
    "end": "1989159"
  },
  {
    "text": "could be 2K by 4K,\nsome huge number.",
    "start": "1989160",
    "end": "1994170"
  },
  {
    "text": "But linear sensors\nhave been around with many thousands of pixels. And the disadvantage of a linear\nsensor is to get a real image,",
    "start": "1994170",
    "end": "2002840"
  },
  {
    "text": "you need to scan it. And this is done quite\na lot in industry, where things are moving\nalong on a conveyor belt.",
    "start": "2002840",
    "end": "2010020"
  },
  {
    "text": "And you can use a relatively\ncheap, very high resolution,",
    "start": "2010020",
    "end": "2015050"
  },
  {
    "text": "linear array sensor. And the conveyor belt motion\nprovides the other dimension",
    "start": "2015050",
    "end": "2021470"
  },
  {
    "text": "of the image. It's also used in\nsatellite imaging, where very high-quality\n1D sensors are used,",
    "start": "2021470",
    "end": "2031190"
  },
  {
    "text": "and then the motion\nof the satellite provides the scanning\nto produce an image.",
    "start": "2031190",
    "end": "2036330"
  },
  {
    "text": "Anyway, suppose we have a 1D\nimage, and suppose things move. ",
    "start": "2036330",
    "end": "2049489"
  },
  {
    "text": "So this is at time t. And this is at time\nt plus delta t.",
    "start": "2049489",
    "end": "2057469"
  },
  {
    "text": "And think of your optical mouse. You're holding it\ndown on the table. It has a short focal\nlength lens that's",
    "start": "2057469",
    "end": "2064460"
  },
  {
    "text": "imaging the surface\nof the table. And if there's\nsome texture to it, as there is on the\nwood over here,",
    "start": "2064460",
    "end": "2070669"
  },
  {
    "text": "then that texture is\nmapped onto the image. And if you move the mouse,\nthen the image of that surface",
    "start": "2070670",
    "end": "2076969"
  },
  {
    "text": "will move. And your job is to accurately\nestimate how fast it's moving.",
    "start": "2076969",
    "end": "2082919"
  },
  {
    "text": "And so here's the picture\nbefore, two time steps.",
    "start": "2082920",
    "end": "2087980"
  },
  {
    "text": "And so we're trying\nto figure out, how do I determine what happens?",
    "start": "2087980",
    "end": "2094260"
  },
  {
    "text": "So let's suppose we\nhave a velocity of u.",
    "start": "2094260",
    "end": "2101450"
  },
  {
    "text": "And so we've moved\nby that amount.",
    "start": "2101450",
    "end": "2107490"
  },
  {
    "text": "So let me indicate\nthat over here. So that's delta x.",
    "start": "2107490",
    "end": "2113330"
  },
  {
    "text": "Now, we're making\nsome assumptions here that we'll get\nback to in a second. One of them is that the\nbrightness doesn't change.",
    "start": "2113330",
    "end": "2121019"
  },
  {
    "text": "And so if your optical\nmouse is looking at the surface of the\ntable, then presumably",
    "start": "2121020",
    "end": "2128390"
  },
  {
    "text": "between one frame and the\nnext, the illumination isn't changing. It's using an LED with\na constant current,",
    "start": "2128390",
    "end": "2134540"
  },
  {
    "text": "and it's taking 2,000\nframes a second, so it's unlikely to change.",
    "start": "2134540",
    "end": "2139700"
  },
  {
    "text": "The geometry is\nchanging a little bit because you've\nmoved, and now you're looking at the surface from\na slightly different angle.",
    "start": "2139700",
    "end": "2145640"
  },
  {
    "text": "But for most\nsurfaces, the change in brightness due to\nthat is very small.",
    "start": "2145640",
    "end": "2151250"
  },
  {
    "text": "So right here, the way\nI've drawn these curves, I've assumed\nconstant brightness.",
    "start": "2151250",
    "end": "2157140"
  },
  {
    "text": "So let's get it\nright out front-- constant brightness assumption.",
    "start": "2157140",
    "end": "2162470"
  },
  {
    "text": " And we'll see that\nthere are circumstances",
    "start": "2162470",
    "end": "2168600"
  },
  {
    "text": "where that doesn't apply. But there are lots of cases\nwhere that is the case. For example, as I'm\nwalking around the room,",
    "start": "2168600",
    "end": "2175140"
  },
  {
    "text": "your shirt still\nlooks maroonish red, and it doesn't really change.",
    "start": "2175140",
    "end": "2180370"
  },
  {
    "text": "And so we are used\nto most of the world being somewhat\nconstant in color,",
    "start": "2180370",
    "end": "2188250"
  },
  {
    "text": "constant in brightness,\nas well, even though we know that\nthere are circumstances where that's not the case.",
    "start": "2188250",
    "end": "2193803"
  },
  {
    "text": "For example, if I look at\nthe reflection of the lights up there in my cell\nphone, they, of course,",
    "start": "2193803",
    "end": "2200190"
  },
  {
    "text": "move relative to the cell\nphone as I move around. And we'll talk some\nmore about that.",
    "start": "2200190",
    "end": "2207750"
  },
  {
    "text": "So let's enlarge a\nlittle piece of that. ",
    "start": "2207750",
    "end": "2218540"
  },
  {
    "text": "So we're blowing up this area. And why am I doing that?",
    "start": "2218540",
    "end": "2224090"
  },
  {
    "text": "Well, I'd like to use\na linear approximation. So I'm assuming that this-- second assumption-- I'm assuming\nfor the moment this curve",
    "start": "2224090",
    "end": "2231650"
  },
  {
    "text": "is relatively smooth,\nsuch that if I look at a small\nenough part of it, I can approximate it as a line.",
    "start": "2231650",
    "end": "2239600"
  },
  {
    "text": "And then there's a\nchange in brightness, and there's some slope here.",
    "start": "2239600",
    "end": "2245730"
  },
  {
    "text": "And the slope relates the motion\nto the change in brightness.",
    "start": "2245730",
    "end": "2252080"
  },
  {
    "text": "You can see where this is going. I'd like to use the\nchange in brightness to determine the motion,\nbecause how else are we",
    "start": "2252080",
    "end": "2262220"
  },
  {
    "text": "going to measure the\nmotion in the image? The pixels stay\nin the same place.",
    "start": "2262220",
    "end": "2269180"
  },
  {
    "text": "All we've got is the brightness\nat a pixel is changing. And somehow, we have to\ninvert that relationship.",
    "start": "2269180",
    "end": "2277580"
  },
  {
    "text": "So in terms of E of x and\nt, what is this slope?",
    "start": "2277580",
    "end": "2282890"
  },
  {
    "start": "2282890",
    "end": "2288309"
  },
  {
    "text": "So this is in the x\ndirection, and that's the rate of change of E with x.",
    "start": "2288310",
    "end": "2296510"
  },
  {
    "text": "And so it's dE dx slope.",
    "start": "2296510",
    "end": "2301580"
  },
  {
    "start": "2301580",
    "end": "2306870"
  },
  {
    "text": "And I'm going to write it that\nway, as a partial derivative. And might as well use the\ncorrect notation right away.",
    "start": "2306870",
    "end": "2315180"
  },
  {
    "text": "We're going to need partial\nderivatives because we have both x and y and t. And so we need to be clear about\nwhich type of differentiation",
    "start": "2315180",
    "end": "2324359"
  },
  {
    "text": "we're talking about.  So then that's the slope.",
    "start": "2324360",
    "end": "2331570"
  },
  {
    "text": "So that means that delta E must\nbe the slope times delta x.",
    "start": "2331570",
    "end": "2338970"
  },
  {
    "text": "And so that's going to be-- and I'm going to\nwrite this as E sub x. ",
    "start": "2338970",
    "end": "2354010"
  },
  {
    "text": "So again, in order\nto simplify notation, I will often use subscripts\nto denote partial derivatives.",
    "start": "2354010",
    "end": "2362920"
  },
  {
    "text": "And E sub x and E sub\ny-- we use so much that it would be a pain\nto have to write them out",
    "start": "2362920",
    "end": "2369430"
  },
  {
    "text": "in full every time. As we indicated, those\nare the components of the brightness\ngradient, which",
    "start": "2369430",
    "end": "2375520"
  },
  {
    "text": "is used for all sorts of things,\nincluding edge detection. ",
    "start": "2375520",
    "end": "2381250"
  },
  {
    "text": "So now, let me divide\nthrough by delta t. ",
    "start": "2381250",
    "end": "2392059"
  },
  {
    "text": "And this, I guess\nin the limit, as I take smaller and\nsmaller time steps,",
    "start": "2392060",
    "end": "2399650"
  },
  {
    "text": "is going to be that\npartial derivative. ",
    "start": "2399650",
    "end": "2406540"
  },
  {
    "text": "And if you like, I can\nrewrite one more time. ",
    "start": "2406540",
    "end": "2418980"
  },
  {
    "text": "So you can see here\nwhy using the switch",
    "start": "2418980",
    "end": "2425070"
  },
  {
    "text": "to the continuous\ndomain is helpful. Because I can take the\nlimits here as the delta t",
    "start": "2425070",
    "end": "2433320"
  },
  {
    "text": "approaches 0, and get\nthe partial derivative. Of course in practice, I'm\ngetting frames at a fixed rate,",
    "start": "2433320",
    "end": "2440885"
  },
  {
    "text": "and they have a\ncertain interval. I can't make that\ninterval infinitely small.",
    "start": "2440885",
    "end": "2445900"
  },
  {
    "text": "So I end up with a much\nmessier expression. But the two are\nobviously related.",
    "start": "2445900",
    "end": "2453290"
  },
  {
    "start": "2452000",
    "end": "2633000"
  },
  {
    "text": "So that's a result for\n1D image, and that allows us to recover the motion.",
    "start": "2453290",
    "end": "2458990"
  },
  {
    "start": "2458990",
    "end": "2469950"
  },
  {
    "text": "So one thing I\nprobably glossed over is that as we go from\nt to t plus delta t,",
    "start": "2469950",
    "end": "2477950"
  },
  {
    "text": "the brightness decreases. So this delta E over\nhere is actually in-- for a positive slope, the\ndelta E will be negative.",
    "start": "2477950",
    "end": "2485279"
  },
  {
    "text": "So that may have gotten\nlost in here somewhere. So remarkably,\nfrom a single pixel",
    "start": "2485280",
    "end": "2495630"
  },
  {
    "text": "I can get the velocity\nin this 1D case. Now importantly, that's\nnot true in the 2D case.",
    "start": "2495630",
    "end": "2503790"
  },
  {
    "text": "And after all, that's the\ncase we want to solve. So we're going to have to\nwork a little bit harder.",
    "start": "2503790",
    "end": "2510065"
  },
  {
    "text": "And now a couple\nof things you'll see-- first of all, the\nfaster things are moving,",
    "start": "2510065",
    "end": "2515220"
  },
  {
    "text": "the larger E t will be. Well, that's no surprise. If the brightness\nis changing slowly,",
    "start": "2515220",
    "end": "2523500"
  },
  {
    "text": "then you speed things\nup, then the brightness will change more rapidly. It's like taking\nyour YouTube video",
    "start": "2523500",
    "end": "2529620"
  },
  {
    "text": "and changing the playback rate. When you change\nthe playback rate, you change all the velocities\nby the same factor.",
    "start": "2529620",
    "end": "2538619"
  },
  {
    "text": "Then you will have more\nrapid changes of brightness-- intuitively obvious.",
    "start": "2538620",
    "end": "2544090"
  },
  {
    "text": "Another thing you'll\nnotice is that there's a problem if E x is 0.",
    "start": "2544090",
    "end": "2551910"
  },
  {
    "text": "We can't do this if E x is 0. So if we're, for example, at--",
    "start": "2551910",
    "end": "2558839"
  },
  {
    "text": "suppose we are here. Well, then if the thing\nmoves, the brightness",
    "start": "2558840",
    "end": "2564660"
  },
  {
    "text": "doesn't change or\nchanges only a tiny bit. And so from that, you can't\nreally tell how far it moved.",
    "start": "2564660",
    "end": "2570870"
  },
  {
    "text": "You pretty much have the same\nresult if it moved that much or whatever. And just in terms\nof implementation,",
    "start": "2570870",
    "end": "2578850"
  },
  {
    "text": "you're dividing by 0, so\nthat's not going to be good. And it's not just 0.",
    "start": "2578850",
    "end": "2584250"
  },
  {
    "text": "It's when it's very small. Why is that? Well, because when\nit's very small, it probably means that you\ndon't know it accurately,",
    "start": "2584250",
    "end": "2592230"
  },
  {
    "text": "as a result of the fact that\nyou obtain it by subtracting two pixel values. So let's just\nagain go over this.",
    "start": "2592230",
    "end": "2600300"
  },
  {
    "text": "We're approximating\nthis by saying it's 1 over delta x\nE of x plus delta x.",
    "start": "2600300",
    "end": "2607215"
  },
  {
    "start": "2607215",
    "end": "2612900"
  },
  {
    "text": "Well, that's fancy notation,\nbut basically, there are two pixels, we\ntake this value,",
    "start": "2612900",
    "end": "2618760"
  },
  {
    "text": "and we subtract that value. So we read out the gray level\nthere, read out the gray value",
    "start": "2618760",
    "end": "2623809"
  },
  {
    "text": "there, subtract them. And that's how we estimate\nour brightness derivatives.",
    "start": "2623810",
    "end": "2634089"
  },
  {
    "start": "2633000",
    "end": "2939000"
  },
  {
    "text": "And similarly-- so\nwhat do we do with E t? Well, E t is derived\nthe same way,",
    "start": "2634090",
    "end": "2639140"
  },
  {
    "text": "except that we have two frames. And we pick the same pixel\nout of the two frames,",
    "start": "2639140",
    "end": "2649810"
  },
  {
    "text": "and we subtract\ntheir gray values. So it's just in a\ndifferent direction",
    "start": "2649810",
    "end": "2654820"
  },
  {
    "text": "that we're approximating\nthe derivative. And why is that important? Well, if there is a small\nbrightness gradient,",
    "start": "2654820",
    "end": "2666119"
  },
  {
    "text": "E x is small, then those two\nvalues will be very similar. And since they are\nnot known precisely,",
    "start": "2666120",
    "end": "2674030"
  },
  {
    "text": "they have measurement\nerror in them, we are now subtracting\ntwo quantities that are similar in size, so\nwe get a smaller quantity.",
    "start": "2674030",
    "end": "2682160"
  },
  {
    "text": "And it's mostly\nnoise at some point. So that tells us that this\nis something to avoid.",
    "start": "2682160",
    "end": "2691100"
  },
  {
    "text": "We don't want to be--\nand it makes sense. I mean, if the image is\nuniform and brightness, x is 0,",
    "start": "2691100",
    "end": "2698510"
  },
  {
    "text": "you can move it and you\ncan't tell that it moved. I mean, you'd have to\nhave some reference",
    "start": "2698510",
    "end": "2703610"
  },
  {
    "text": "point like some texture on\nit to tell that it moved. And if you had texture\non it, E x wouldn't be 0.",
    "start": "2703610",
    "end": "2710000"
  },
  {
    "text": "So I know I'm belaboring\nthis over and over again, but it's very\nimportant, because it",
    "start": "2710000",
    "end": "2716630"
  },
  {
    "text": "means that this\ntype of measurement is A, very noisy, and\nB, not trustworthy",
    "start": "2716630",
    "end": "2722660"
  },
  {
    "text": "unless certain image\nconditions are satisfied. ",
    "start": "2722660",
    "end": "2728310"
  },
  {
    "text": "And then the next\nthing you can do is say, well, we can estimate\nvelocity from a single pixel.",
    "start": "2728310",
    "end": "2734280"
  },
  {
    "text": "But we've got lots of pixels. And that's part of what we're\ngoing to be using heavily,",
    "start": "2734280",
    "end": "2739610"
  },
  {
    "text": "that the single pixel\nresult is not great, but we've got a\nmillion or 10 million.",
    "start": "2739610",
    "end": "2746670"
  },
  {
    "text": "And so we can do things\nlike least squares",
    "start": "2746670",
    "end": "2751819"
  },
  {
    "text": "to improve the\nresult dramatically. So it may be that the\nresult from a single pixel",
    "start": "2751820",
    "end": "2758000"
  },
  {
    "text": "is really flaky, but\nthat's OK because we divide the error by 1,000 if we think\nabout the statistics of having",
    "start": "2758000",
    "end": "2767930"
  },
  {
    "text": "a million of these pixels. So I keep on saying they're\nnoisy, and at the same time",
    "start": "2767930",
    "end": "2774200"
  },
  {
    "text": "I'm saying we can do this. And the reason we can do it is\nbecause we've got lots of them.",
    "start": "2774200",
    "end": "2779450"
  },
  {
    "text": "So we talked about\nhow to approximate how to switch back and forth\nbetween the continuous world",
    "start": "2779450",
    "end": "2784460"
  },
  {
    "text": "and the discrete world. And now, I don't want to\ngive away the solution",
    "start": "2784460",
    "end": "2792250"
  },
  {
    "text": "to the homework problem.  But the next step,\nI guess, would",
    "start": "2792250",
    "end": "2797420"
  },
  {
    "text": "be to get a bunch of\nthese and combine them. So we might do\nsomething like this.",
    "start": "2797420",
    "end": "2803510"
  },
  {
    "text": "If we have n pixels, then we\nmight try something like this. ",
    "start": "2803510",
    "end": "2814610"
  },
  {
    "text": "So now, instead of\njust using two pixels, we use those two pixels\nto do the calculation,",
    "start": "2814610",
    "end": "2820569"
  },
  {
    "text": "then we use these two pixels\nto do the calculation, then we use those two pixels to\ndo the calculation, and so on.",
    "start": "2820570",
    "end": "2826180"
  },
  {
    "text": "And so we add them up. So we have a lot of\nnoisy measurements, and we take the average. And magically, things improve.",
    "start": "2826180",
    "end": "2833930"
  },
  {
    "text": "And so just without going into\nhairy statistics or assumptions about probability\ndistributions, roughly",
    "start": "2833930",
    "end": "2841060"
  },
  {
    "text": "speaking, when you\naverage n values, you reduce the\nstandard deviation",
    "start": "2841060",
    "end": "2846670"
  },
  {
    "text": "by the square root of n.  And when you have\nthese political surveys",
    "start": "2846670",
    "end": "2853570"
  },
  {
    "text": "and they say they have a 5%\nmargin of error, what they mean is that they talked\nto 400 people.",
    "start": "2853570",
    "end": "2861789"
  },
  {
    "text": "Because the square\nroot of 400 is 20. 1/20 is 0.05-- so\nsame principle.",
    "start": "2861790",
    "end": "2869210"
  },
  {
    "text": "So it doesn't improve linearly\nwith n, unfortunately. That would be even better. But it does improve with\nthe square root of n.",
    "start": "2869210",
    "end": "2876250"
  },
  {
    "text": "So if we have a\nmillion pixel image, it improves by a\nfactor of 1,000, which is pretty significant.",
    "start": "2876250",
    "end": "2883900"
  },
  {
    "text": "Now, if we just did\nthis in the simple way, we'd still run into trouble. First of all, if E x is really\n0, you'd be dividing by 0.",
    "start": "2883900",
    "end": "2892420"
  },
  {
    "text": "So you can't do that. I guess you could\nleave those pixels out. And then if E x is\nsmall, you still",
    "start": "2892420",
    "end": "2898330"
  },
  {
    "text": "have an answer which\nis relatively bad. So there are places\nwhere the slope is large,",
    "start": "2898330",
    "end": "2904840"
  },
  {
    "text": "where you get good information. And now, you're\npolluting it by adding in as an equal information from\nplaces where the slope is low.",
    "start": "2904840",
    "end": "2913579"
  },
  {
    "text": "And that's why in\nthe homework problem, we talk about weighting. So don't just take an average\nand treat each of them equally.",
    "start": "2913580",
    "end": "2920790"
  },
  {
    "text": "But multiply by\nsome weight factor.",
    "start": "2920790",
    "end": "2926260"
  },
  {
    "text": "And then, of course, what\nhappens to the 1 over n?",
    "start": "2926260",
    "end": "2931330"
  },
  {
    "text": "Well, you have to\ncompensate for the fact that you've now switched\nto using weights.",
    "start": "2931330",
    "end": "2936895"
  },
  {
    "text": " As we mentioned,\nimages are really 2D.",
    "start": "2936895",
    "end": "2944859"
  },
  {
    "start": "2939000",
    "end": "3040000"
  },
  {
    "text": "So let's extend this analysis\nto 2D, and see what happens. ",
    "start": "2944860",
    "end": "2952160"
  },
  {
    "text": "Now, some of this may seem\ntedious and repetitive to some of you, but we're\nall on different wavelengths.",
    "start": "2952160",
    "end": "2959010"
  },
  {
    "text": "So I'm going to\nget the next result in several different ways.",
    "start": "2959010",
    "end": "2964290"
  },
  {
    "text": "And different approaches may\nappeal to different people. So let me do it this way.",
    "start": "2964290",
    "end": "2976590"
  },
  {
    "text": "So let's start by talking\nabout the image volume. ",
    "start": "2976590",
    "end": "3002079"
  },
  {
    "text": "So think about video, and we're\nstitching together the frames.",
    "start": "3002080",
    "end": "3009400"
  },
  {
    "text": "So each of these\ncross-sections is a frame. And we end up with this\nthree-dimensional thing",
    "start": "3009400",
    "end": "3018160"
  },
  {
    "text": "which is brightness as a\nfunction of x, y, and t.",
    "start": "3018160",
    "end": "3025210"
  },
  {
    "text": "And typically in practice,\nwe slice it across this way.",
    "start": "3025210",
    "end": "3031000"
  },
  {
    "text": "But we could slice the\nvolume any way you like. And in some cases, there\nare advantages to slicing it",
    "start": "3031000",
    "end": "3037690"
  },
  {
    "text": "in different ways. So that's part 1. And sometimes it's useful to\nvisualize things this way.",
    "start": "3037690",
    "end": "3048460"
  },
  {
    "start": "3040000",
    "end": "3294000"
  },
  {
    "text": "Then, we're going to be\nusing partial derivatives. So what are they? Well, it's just the derivatives\nin the axis direction here.",
    "start": "3048460",
    "end": "3057349"
  },
  {
    "text": "So we'll be dealing with\ndE dx, dE dy, and dE dt.",
    "start": "3057350",
    "end": "3065200"
  },
  {
    "text": "And just as we've\nbeen discussing, we approximate them by taking\ndifferences-- first differences",
    "start": "3065200",
    "end": "3071920"
  },
  {
    "text": "of neighboring pixels in\neither the x, the y, or the t direction from frame to frame.",
    "start": "3071920",
    "end": "3078220"
  },
  {
    "text": "So that's all that is. So some people find partial\nderivatives a little bit more",
    "start": "3078220",
    "end": "3087220"
  },
  {
    "text": "scary than ordinary\nderivatives, but that's all it is-- we're just taking\nthe derivatives in all three",
    "start": "3087220",
    "end": "3093700"
  },
  {
    "text": "directions. Whereas we could be doing\nsomething more complicated. So let's think about that.",
    "start": "3093700",
    "end": "3099400"
  },
  {
    "text": "So suppose that this\nvideo is from me moving through an environment,\nand there's",
    "start": "3099400",
    "end": "3106210"
  },
  {
    "text": "some object in the\nenvironment that I'm tracking. And at time t0, it's\nthere in the image.",
    "start": "3106210",
    "end": "3114880"
  },
  {
    "text": "And then in the next frame,\nit's over here, and so on. So it follows some path in\nthis three-dimensional volume.",
    "start": "3114880",
    "end": "3125490"
  },
  {
    "text": "And I could do this\nfor other points, and develop this\nwhole set of curves.",
    "start": "3125490",
    "end": "3134210"
  },
  {
    "text": "But let's just focus on one. Now, one of the things\nI might want to do is see how this changes.",
    "start": "3134210",
    "end": "3141869"
  },
  {
    "text": "So when I'm looking at\ndifferent frames of an image, often what I want to do is not\ntake the derivative at a pixel",
    "start": "3141870",
    "end": "3150079"
  },
  {
    "text": "and see how changes to\nthe next time frame, but I want to follow an\nobject and see how it changes.",
    "start": "3150080",
    "end": "3156440"
  },
  {
    "text": "And in many cases, I'm going\nto make the constant brightness assumption, that it's not\nchanging in brightness.",
    "start": "3156440",
    "end": "3162980"
  },
  {
    "text": "And so I would like to\nexpress some constraint on the derivative\nalong this curve.",
    "start": "3162980",
    "end": "3168210"
  },
  {
    "text": "And so I could have a curve. How do I define that? Well, one way is to give x\nand y as a function of t.",
    "start": "3168210",
    "end": "3177260"
  },
  {
    "text": "So this green curve-- for each time t, I\ncan give an x and a y.",
    "start": "3177260",
    "end": "3182599"
  },
  {
    "text": "That's how I define that curve. And then, what I'd like to\ndo is look at, for example,",
    "start": "3182600",
    "end": "3197120"
  },
  {
    "text": "the total derivative\nalong that curve,",
    "start": "3197120",
    "end": "3202660"
  },
  {
    "text": "keeping in mind that along that\ncurve, not only is t changing, but x and y are changing\nin some defined way.",
    "start": "3202660",
    "end": "3210880"
  },
  {
    "text": "So this is the total derivative. And in what we're\ngoing to be doing,",
    "start": "3210880",
    "end": "3217790"
  },
  {
    "text": "we'll set that to\n0 because we're assuming that this point\nmaintains its brightness.",
    "start": "3217790",
    "end": "3224560"
  },
  {
    "text": "And then I can use the\nchain rule to split this up. So I'm going to get dx\ndt times dE dx plus--",
    "start": "3224560",
    "end": "3234805"
  },
  {
    "start": "3234805",
    "end": "3243140"
  },
  {
    "text": "so I can take this\ntotal derivative and express it in terms\nof partial derivatives.",
    "start": "3243140",
    "end": "3250700"
  },
  {
    "text": "And again, that looks\nkind of intimidating, but I can easily rewrite this.",
    "start": "3250700",
    "end": "3256099"
  },
  {
    "start": "3256100",
    "end": "3263040"
  },
  {
    "text": "So that's equivalent to\nwhat we had for 1D motion. So this is showing\na relationship",
    "start": "3263040",
    "end": "3270600"
  },
  {
    "text": "between the brightness\ngradient and the image motion. And if I know the image\nmotion, and I know the image,",
    "start": "3270600",
    "end": "3279660"
  },
  {
    "text": "I can predict how\nit's going to change. And it's very simple. I just use this formula.",
    "start": "3279660",
    "end": "3285220"
  },
  {
    "text": "And what we're more interested\nin doing is we've got images, image sequences, and we\nwant to find u and v.",
    "start": "3285220",
    "end": "3294523"
  },
  {
    "start": "3294000",
    "end": "3335000"
  },
  {
    "text": "So that's where we're going. Now over here, we\ncould just solve for u, because we had a single\nequation and a single unknown.",
    "start": "3294523",
    "end": "3304148"
  },
  {
    "text": "And that's another thing\nwe're going to do a lot, is equation counting-- how many degrees of freedom?",
    "start": "3304148",
    "end": "3310839"
  },
  {
    "text": "How many numbers are\nthere that we don't know? And how many\nconstraints do we have?",
    "start": "3310840",
    "end": "3317380"
  },
  {
    "text": "Over here, we have one\nconstraint, that equation.",
    "start": "3317380",
    "end": "3323589"
  },
  {
    "text": "We have one unknown, u-- perfect match. So we know that we\nare likely to get",
    "start": "3323590",
    "end": "3330339"
  },
  {
    "text": "a finite number of solutions. And because it's linear,\nwe get one solution.",
    "start": "3330340",
    "end": "3335875"
  },
  {
    "text": "But when you look\nat this, you'll see there's one\nequation, one constraint,",
    "start": "3335875",
    "end": "3341840"
  },
  {
    "text": "but we've got two unknowns. We've got u and v.\nSo if we're trying",
    "start": "3341840",
    "end": "3348080"
  },
  {
    "text": "to recover the optical\nflow, which is that vector field that we're\ndiscussing, it's",
    "start": "3348080",
    "end": "3354980"
  },
  {
    "text": "like we don't have\nenough information here to do that, which\nis dramatically",
    "start": "3354980",
    "end": "3360320"
  },
  {
    "text": "different from\nthe 1D case, where we had the match between\nthe number of equations and the number of unknowns.",
    "start": "3360320",
    "end": "3366140"
  },
  {
    "text": " So what do we know?",
    "start": "3366140",
    "end": "3371330"
  },
  {
    "start": "3367000",
    "end": "3522000"
  },
  {
    "text": "So are we lost at sea? Is it hopeless? So let's look at just what\nthat constraint provides us.",
    "start": "3371330",
    "end": "3386600"
  },
  {
    "text": "So again, the overall\nobjective here is we have a time-varying\nimage, or in the discrete case,",
    "start": "3386600",
    "end": "3394340"
  },
  {
    "text": "a sequence of image frames. And we're trying to\nrecover the motion.",
    "start": "3394340",
    "end": "3400400"
  },
  {
    "text": "And we find that assuming\nthat things don't change",
    "start": "3400400",
    "end": "3405559"
  },
  {
    "text": "in brightness, the images don't\nchange as they move, we end up with that constraint equation.",
    "start": "3405560",
    "end": "3411170"
  },
  {
    "text": "And what does it tell us? Well, one way to\nthink about it is",
    "start": "3411170",
    "end": "3416750"
  },
  {
    "text": "to plot it in velocity space.  So we're used to plotting\nimages with x and y",
    "start": "3416750",
    "end": "3425060"
  },
  {
    "text": "as coordinate axes, but\nactually for some purposes,",
    "start": "3425060",
    "end": "3430880"
  },
  {
    "text": "it's useful to have a different\nkind of representation. And this is one. And what it means is\nthat any point in here",
    "start": "3430880",
    "end": "3438740"
  },
  {
    "text": "is a particular\nvelocity, that velocity. And for example,\nthis is 0 velocity.",
    "start": "3438740",
    "end": "3446570"
  },
  {
    "text": "It's not going anywhere. Velocity space was used\nat one time in physics",
    "start": "3446570",
    "end": "3454700"
  },
  {
    "text": "much more than it is now. And it's actually kind of neat. For example, if you look\nat planetary orbits,",
    "start": "3454700",
    "end": "3463130"
  },
  {
    "text": "they're ellipses with\nthe Sun at one focus. And ellipses are complicated.",
    "start": "3463130",
    "end": "3471090"
  },
  {
    "text": "If you plotted them\nin velocity space, they're circles, which was\nexploited in the early days",
    "start": "3471090",
    "end": "3477569"
  },
  {
    "text": "before people could just feed\nequations into a computer and have them solved,\nwhere they had to reason",
    "start": "3477570",
    "end": "3482880"
  },
  {
    "text": "about things geometrically. Anyway, velocity space is neat. And here we have a\nconstraint in velocity space.",
    "start": "3482880",
    "end": "3490810"
  },
  {
    "text": "So this is saying that\nbefore we opened our eyes and looked at the image,\nwe didn't know anything.",
    "start": "3490810",
    "end": "3496920"
  },
  {
    "text": "The velocity could be\nanywhere in this plane. But now we have one\nconstraint on it. So what does that tell us?",
    "start": "3496920",
    "end": "3503470"
  },
  {
    "text": "That must somehow limit\nthe solution space.",
    "start": "3503470",
    "end": "3508740"
  },
  {
    "text": "And yes, it's a linear\nequation in u and v,",
    "start": "3508740",
    "end": "3514170"
  },
  {
    "text": "and so a linear equation in the\n2D world corresponds to what? ",
    "start": "3514170",
    "end": "3522300"
  },
  {
    "start": "3522000",
    "end": "3599000"
  },
  {
    "text": "STUDENT: [INAUDIBLE] BERTHOLD HORN: Line, yes-- y equals mx plus C, for example. So it's going to be a line.",
    "start": "3522300",
    "end": "3529283"
  },
  {
    "text": "And that's great,\nbecause it means that we haven't\nsolved the problem, but we've come a long way.",
    "start": "3529283",
    "end": "3534670"
  },
  {
    "text": "So before, it could be anywhere. Now, it's going\nto be on the line. What we really like is to\npin it down to a point.",
    "start": "3534670",
    "end": "3541770"
  },
  {
    "text": "So we've come partway. And so what line is it? Well, we can rewrite\nthat equation like that.",
    "start": "3541770",
    "end": "3556020"
  },
  {
    "text": "And rewrite it a bit more\nby normalizing this vector.",
    "start": "3556020",
    "end": "3563680"
  },
  {
    "text": "So I'm turning this\nvector into a unit vector. ",
    "start": "3563680",
    "end": "3580970"
  },
  {
    "text": "So first of all,\nagain, a reminder that this is the\nbrightness gradient.",
    "start": "3580970",
    "end": "3586250"
  },
  {
    "text": "And the brightness gradient is\nvery important for all sorts of things.",
    "start": "3586250",
    "end": "3591320"
  },
  {
    "text": "If it's 0, nothing\nmuch is happening because the brightness\nis constant. And more likely, it has a high\nvalue at a transition between--",
    "start": "3591320",
    "end": "3601140"
  },
  {
    "text": "if I'm looking at a\ntransition between the wall and the blackboard, there's\na big change in brightness.",
    "start": "3601140",
    "end": "3608270"
  },
  {
    "text": "And therefore, the\nderivatives will be large. And therefore, the brightness\ngradient will be large.",
    "start": "3608270",
    "end": "3613550"
  },
  {
    "text": "And not only that,\nbut the brightness gradient as a vector will\nbe pointing perpendicular",
    "start": "3613550",
    "end": "3618680"
  },
  {
    "text": "to the transition. Because E x is very\nlarge here, E y is 0.",
    "start": "3618680",
    "end": "3623990"
  },
  {
    "text": "So this brightness\ngradient is very important. And this is a unit\nvector, as you can easily",
    "start": "3623990",
    "end": "3630650"
  },
  {
    "text": "tell by taking the sum of\nsquares of the two components. And why am I doing this?",
    "start": "3630650",
    "end": "3636030"
  },
  {
    "text": "Well, because I'm interested\nin the component of u and v in this direction, the direction\nspecified by the unit vector.",
    "start": "3636030",
    "end": "3643460"
  },
  {
    "text": "And it's this constant. And so what this is\nsaying is that u and v",
    "start": "3643460",
    "end": "3649790"
  },
  {
    "text": "are perpendicular to some line. ",
    "start": "3649790",
    "end": "3658130"
  },
  {
    "text": "And this is what it looks like. ",
    "start": "3658130",
    "end": "3666268"
  },
  {
    "text": "You can check that. I mean, basically, you\nneed to find this point,",
    "start": "3666268",
    "end": "3671500"
  },
  {
    "text": "and then calculate the\ndistance from the origin. And it's going to be that. So not too interested right\nnow in the details of that,",
    "start": "3671500",
    "end": "3680080"
  },
  {
    "text": "other than that we've\nshown that it's a line, and that the line depends\non the brightness gradient.",
    "start": "3680080",
    "end": "3688480"
  },
  {
    "text": "So it tells us a lot\nof things already. One of them is that when you\nmake this localized measurement",
    "start": "3688480",
    "end": "3696460"
  },
  {
    "text": "and you are under\nconstraint, you don't have enough equations,\nyou do know something.",
    "start": "3696460",
    "end": "3702790"
  },
  {
    "text": "For example, in this\ndiagram, I don't know what u and v is, but\nsuppose that I give you",
    "start": "3702790",
    "end": "3709415"
  },
  {
    "text": "a different coordinate system. ",
    "start": "3709415",
    "end": "3721250"
  },
  {
    "text": "Locally, you're going\nto see linear patterns. You won't see that. If I keep on\nmagnifying this, it's",
    "start": "3721250",
    "end": "3727940"
  },
  {
    "text": "going to be more and more\nlike a linear relationship. And so the argument is that if\nyou look through an aperture,",
    "start": "3727940",
    "end": "3735560"
  },
  {
    "text": "you cannot determine the motion,\nyou can determine the motion in the direction of the\nbrightness gradient.",
    "start": "3735560",
    "end": "3741560"
  },
  {
    "text": "So that's what we did over here. ",
    "start": "3741560",
    "end": "3750980"
  },
  {
    "text": "So in the 1D case,\nwe were done here.",
    "start": "3750980",
    "end": "3756200"
  },
  {
    "text": "In the 2D case, we're not done\nbecause we have a mismatch of constraints and unknowns.",
    "start": "3756200",
    "end": "3762785"
  },
  {
    "start": "3762785",
    "end": "3770829"
  },
  {
    "text": "And so we need more constraints. So we need to know\nsomething else.",
    "start": "3770830",
    "end": "3776080"
  },
  {
    "text": "And sometimes, there's\nprior knowledge of the environment\nthat helps you.",
    "start": "3776080",
    "end": "3781349"
  },
  {
    "text": "Sometimes, you can look\nagain at another time and get extra information.",
    "start": "3781350",
    "end": "3787740"
  },
  {
    "text": "Now, let's suppose that we\nhave the optical mouse problem, where the whole image\nis moving as one.",
    "start": "3787740",
    "end": "3793890"
  },
  {
    "text": "You're over a flat surface\nat a constant distance from the lens. And to a very high\ndegree of approximation,",
    "start": "3793890",
    "end": "3802920"
  },
  {
    "text": "the image is just moving as one. So we don't just have one pixel. We can do the same\nthing at two pixels.",
    "start": "3802920",
    "end": "3809595"
  },
  {
    "start": "3809595",
    "end": "3817920"
  },
  {
    "text": "That's at pixel 1. ",
    "start": "3817920",
    "end": "3825680"
  },
  {
    "text": "And that's at pixel 2. And our job is to recover\nu and v. Well, it's",
    "start": "3825680",
    "end": "3833450"
  },
  {
    "text": "two linear equations. ",
    "start": "3833450",
    "end": "3852130"
  },
  {
    "text": "We can write them that\nway, and then solve. Now, because we've got\ntwo constraints now,",
    "start": "3852130",
    "end": "3860410"
  },
  {
    "text": "we have enough constraint to\nsolve for the two unknowns. And it's just a linear\nequation, so it's very simple.",
    "start": "3860410",
    "end": "3868810"
  },
  {
    "text": "We can actually write the\nanswer out explicitly. ",
    "start": "3868810",
    "end": "3895930"
  },
  {
    "text": "So it's very mechanical. I mean, we just invert\nthis 2 by 2 matrix,",
    "start": "3895930",
    "end": "3903960"
  },
  {
    "text": "and multiply the result by\nthat vector, and we're done.",
    "start": "3903960",
    "end": "3910119"
  },
  {
    "text": "And what is this? Well, this is the\ndeterminant of that matrix.",
    "start": "3910120",
    "end": "3915180"
  },
  {
    "start": "3915180",
    "end": "3920490"
  },
  {
    "text": "So for 2 by 2 and 3 by 3, we\ncan explicitly write it down. Otherwise, we'll just\nuse Gaussian elimination",
    "start": "3920490",
    "end": "3927299"
  },
  {
    "text": "to solve the set of\nlinear equations. So in a way, we're done.",
    "start": "3927300",
    "end": "3934410"
  },
  {
    "text": "We need two pixels. We can solve this,\nand now it's noisy, so we can improve the result\nby taking more than two pixels.",
    "start": "3934410",
    "end": "3942450"
  },
  {
    "text": "But before we do\nthat, it's always important to check\nthe edge conditions.",
    "start": "3942450",
    "end": "3949020"
  },
  {
    "text": "This can fail.  And it fails when\nthe determinant is 0.",
    "start": "3949020",
    "end": "3956370"
  },
  {
    "text": "So when does that happen? ",
    "start": "3956370",
    "end": "3970119"
  },
  {
    "text": "Well, can that happen? Well, sure. Let's rewrite it one more time.",
    "start": "3970120",
    "end": "3975660"
  },
  {
    "start": "3975660",
    "end": "3983799"
  },
  {
    "text": "So we have this\nnice linear method, that if we make these\nmeasurements at two pixels, we can solve for the motion.",
    "start": "3983800",
    "end": "3990640"
  },
  {
    "text": "But it won't work\nif this is the case. So what is that?",
    "start": "3990640",
    "end": "3995800"
  },
  {
    "text": "Well, this tells you something\nabout the brightness gradient. This is the direction of the\nbrightness gradient, well,",
    "start": "3995800",
    "end": "4002400"
  },
  {
    "text": "the tangent of it. So what this is saying\nis that you have",
    "start": "4002400",
    "end": "4007890"
  },
  {
    "text": "a problem if they're related.",
    "start": "4007890",
    "end": "4015000"
  },
  {
    "text": "So this is where they\ndon't have to be the same.",
    "start": "4015000",
    "end": "4021370"
  },
  {
    "text": "I mean, obviously, if the\nbrightness gradients are the same, you subtract those\ntwo quantities, you get 0,",
    "start": "4021370",
    "end": "4027840"
  },
  {
    "text": "and things blow up. But they don't have\nto be the same. They just need to be\nproportional to each other.",
    "start": "4027840",
    "end": "4035010"
  },
  {
    "text": "We're just saying that the\nratio of E y to E x is the same. And that makes sense,\nagain, because that",
    "start": "4035010",
    "end": "4043140"
  },
  {
    "text": "means that the\nbrightness gradient is the same in the two places. That means that the constraint\nwe get out of the equation",
    "start": "4043140",
    "end": "4049890"
  },
  {
    "text": "is in the same direction. It's not providing\nnew information. Or go back to this diagram--",
    "start": "4049890",
    "end": "4057600"
  },
  {
    "text": "we now have two parallel lines. Well, if there's no\nmeasurement noise,",
    "start": "4057600",
    "end": "4062670"
  },
  {
    "text": "they'll be on top of each other. And then you intersect\nthem, and what you get? Well, the same line, so\nthat's not very interesting.",
    "start": "4062670",
    "end": "4070290"
  },
  {
    "text": "Or if you have noise, it'll\nbe even worse because they won't even intersect. So this tells you\na number of things.",
    "start": "4070290",
    "end": "4077680"
  },
  {
    "text": "One of them is this\nisn't going to work if the brightness gradient\nis the same everywhere. And that makes perfect sense.",
    "start": "4077680",
    "end": "4083868"
  },
  {
    "text": "That's the aperture problem. It also tells you\nthat maybe you need",
    "start": "4083868",
    "end": "4089559"
  },
  {
    "text": "to somehow weight contributions\nfrom different image regions",
    "start": "4089560",
    "end": "4096750"
  },
  {
    "text": "based on this. Maybe you don't want\nto have contributions",
    "start": "4096750",
    "end": "4103350"
  },
  {
    "text": "from a lot of image regions with\nthe same brightness gradient because they're not really\nproviding good constraint.",
    "start": "4103350",
    "end": "4109920"
  },
  {
    "text": "They all doing the same thing. So that tells you\nthat rather than take this result for two\npixels, and then apply it",
    "start": "4109920",
    "end": "4117270"
  },
  {
    "text": "to other pairs of pixels,\nand just take the average, you'll want to weight\nit in some way.",
    "start": "4117270",
    "end": "4122799"
  },
  {
    "start": "4122800",
    "end": "4129520"
  },
  {
    "text": "And that's kind of kludgy. I mean, that's trying to fix\na problem in the simple way.",
    "start": "4129520",
    "end": "4141250"
  },
  {
    "text": "But we can do we can\ndo this much better. So we have this equation that's\nsupposedly true everywhere",
    "start": "4141250",
    "end": "4152500"
  },
  {
    "text": "in the image.  This is our magic equation,\nwhich relates image motion",
    "start": "4152500",
    "end": "4160580"
  },
  {
    "text": "to brightness gradients. And that's supposed to be 0.",
    "start": "4160580",
    "end": "4165939"
  },
  {
    "text": "Now, if there's measurement\nnoise, it won't be 0. Hopefully, it will be small.",
    "start": "4165939",
    "end": "4172549"
  },
  {
    "text": "If you plug in the wrong values\nof u and v, it won't be 0. So maybe one way of\nsolving this problem",
    "start": "4172550",
    "end": "4179200"
  },
  {
    "text": "is to search for u and\nv that makes that 0.",
    "start": "4179200",
    "end": "4185560"
  },
  {
    "text": "Or if you can't make it 0,\nmake it as small as possible. And so that motivates\nthis approach.",
    "start": "4185560",
    "end": "4191979"
  },
  {
    "start": "4191979",
    "end": "4204980"
  },
  {
    "text": "So what's going on here? Well, the integrand is\njust this expression. And if everything was perfect\nand you have the correct values",
    "start": "4204980",
    "end": "4212810"
  },
  {
    "text": "of u and v, the\nintegrand would be 0, and you integrate it over\nthe whole image, you get 0.",
    "start": "4212810",
    "end": "4218062"
  },
  {
    "text": "And that's the smallest you\ncan get because it's quadratic. You can't get less\nthan 0, so that's it.",
    "start": "4218062",
    "end": "4224830"
  },
  {
    "text": "If you plug in the\nwrong values of u and v, well, it will not be 0.",
    "start": "4224830",
    "end": "4230619"
  },
  {
    "text": "And so you can base a strategy\nfor finding u and v on that.",
    "start": "4230620",
    "end": "4235840"
  },
  {
    "text": " Now, there are cases where\nthis is going to fail.",
    "start": "4235840",
    "end": "4243080"
  },
  {
    "text": "One is if, I don't know, you're\nwithout a light in a coal mine.",
    "start": "4243080",
    "end": "4250400"
  },
  {
    "text": "If E is 0, all hope\nis lost, obviously.",
    "start": "4250400",
    "end": "4255560"
  },
  {
    "text": "If E x and E y\nare 0, all hope is lost because that means you're\nlooking at a wall that's",
    "start": "4255560",
    "end": "4263090"
  },
  {
    "text": "constant brightness. And you won't be\nable to see it moving",
    "start": "4263090",
    "end": "4268640"
  },
  {
    "text": "because there's nothing on\nit to catch your attention and to track. If there was some texture\non it, then E x and E y",
    "start": "4268640",
    "end": "4276290"
  },
  {
    "text": "would not be 0 in some places. And so this is a\nsort of approach",
    "start": "4276290",
    "end": "4284530"
  },
  {
    "text": "we're going to use a lot. So we have this\nconstraint, which would apply in an ideal case\nwhere we know the answer u",
    "start": "4284530",
    "end": "4292780"
  },
  {
    "text": "and v. And we're going to\ntake contributions of that.",
    "start": "4292780",
    "end": "4298552"
  },
  {
    "text": "And now, we can't just add\nthem, because some of them might be positive and\nsome might be negative. So it doesn't make sense to\nminimize the integral of them.",
    "start": "4298552",
    "end": "4307530"
  },
  {
    "text": "We turn them into\nsomething that's always positive by\nsquaring it, and so we're going to find these\nanswers by minimizing that.",
    "start": "4307530",
    "end": "4314950"
  },
  {
    "text": "Now in this case, this is\npretty straightforward. We now take that, and this\nis a calculus problem.",
    "start": "4314950",
    "end": "4322195"
  },
  {
    "text": " So this is a\nfunction of u and v,",
    "start": "4322195",
    "end": "4330050"
  },
  {
    "text": "and we're going to set the\nderivatives with respect to u and v equal to 0.",
    "start": "4330050",
    "end": "4336469"
  },
  {
    "text": "And in this case,\nwe're lucky enough that the equations are linear. And we can solve it. And actually, the answer\nis very similar to this.",
    "start": "4336470",
    "end": "4348500"
  },
  {
    "text": "We're going to end up with two\nequations and two unknowns, one equation from the derivative\nwith respect to u of 0 and one",
    "start": "4348500",
    "end": "4356780"
  },
  {
    "text": "with the derivative of v as 0. ",
    "start": "4356780",
    "end": "4364520"
  },
  {
    "text": "And so two equations,\ntwo unknowns--",
    "start": "4364520",
    "end": "4370280"
  },
  {
    "text": "cool, but that can fail\nbecause they might not actually be different equations.",
    "start": "4370280",
    "end": "4376130"
  },
  {
    "text": "They might be\nlinearly dependent. So we'd want to\nworry about that.",
    "start": "4376130",
    "end": "4381270"
  },
  {
    "text": "And in this case,\nthe failure mode is-- ",
    "start": "4381270",
    "end": "4394230"
  },
  {
    "text": "that turns out to be the\ndeterminant of that 2 by 2 matrix. So that corresponds to\nthis thing over here.",
    "start": "4394230",
    "end": "4401350"
  },
  {
    "text": "And in this case,\nthat's when things fail. So when can that happen?",
    "start": "4401350",
    "end": "4409150"
  },
  {
    "text": "Well, certainly if E is 0 or\nE is a constant because then E",
    "start": "4409150",
    "end": "4417885"
  },
  {
    "text": "x and E y are 0. Or maybe if just E\nx is 0 everywhere",
    "start": "4417885",
    "end": "4425909"
  },
  {
    "text": "because then this integral\nis 0 and that integral is 0. So let's see-- so if E x is 0\nand E y is not 0, what is that?",
    "start": "4425910",
    "end": "4437550"
  },
  {
    "text": "Well, that means that I have\none of those pictures that only varies in one direction.",
    "start": "4437550",
    "end": "4443489"
  },
  {
    "text": "E x is 0, meaning it's constant\nin the horizontal direction. E y is nonzero.",
    "start": "4443490",
    "end": "4449520"
  },
  {
    "text": "It's varying in brightness\nin the vertical direction. And if I were to draw isophotes,\nthey'd look like this.",
    "start": "4449520",
    "end": "4455460"
  },
  {
    "text": " So here E x is 0. E y is not 0.",
    "start": "4455460",
    "end": "4462030"
  },
  {
    "text": "And we know that\nthere's a problem. If I move in this direction,\nthe image doesn't change,",
    "start": "4462030",
    "end": "4468300"
  },
  {
    "text": "so can't solve. So E x equals 0 is a problem.",
    "start": "4468300",
    "end": "4475690"
  },
  {
    "text": "Similarly, E y equals\n0 is a problem, just turned 90 degrees.",
    "start": "4475690",
    "end": "4481515"
  },
  {
    "text": " So those are kind of obvious.",
    "start": "4481515",
    "end": "4486630"
  },
  {
    "text": "I mean, we know those\naren't going to work. Is there anything else? Well, how about E x equals E y?",
    "start": "4486630",
    "end": "4498360"
  },
  {
    "text": "Well, if that's the case,\nthen these two integrals are the same, and actually,\nthat integral is the same, also.",
    "start": "4498360",
    "end": "4505080"
  },
  {
    "text": "So we're going to get integral\ne x squared all squared",
    "start": "4505080",
    "end": "4510960"
  },
  {
    "text": "minus this thing all squared-- 0. So that's bad. So what is that?",
    "start": "4510960",
    "end": "4516780"
  },
  {
    "text": "Well, that's where isophotes\nare running at 45 degrees",
    "start": "4516780",
    "end": "4522840"
  },
  {
    "text": "because the brightness gradient\nhas the same x component as y component.",
    "start": "4522840",
    "end": "4528389"
  },
  {
    "text": "The brightness gradient is\nperpendicular to the isophote. And so E x E y means\nit's a 45-degree angle",
    "start": "4528390",
    "end": "4538410"
  },
  {
    "text": "for the gradient. So the isophote is\n45 degrees down, so that's the picture for that.",
    "start": "4538410",
    "end": "4543780"
  },
  {
    "text": "And of course, that is really\nthe same thing as that, just rotated.",
    "start": "4543780",
    "end": "4549119"
  },
  {
    "text": "And one of the things\nwe're going to do is say that, well,\nsomething shouldn't",
    "start": "4549120",
    "end": "4556020"
  },
  {
    "text": "depend on our choice of x and\ny and the image coordinate system. I mean, the answer\nwould be different,",
    "start": "4556020",
    "end": "4561610"
  },
  {
    "text": "but in the new\ncoordinate system, it should mean the same thing. So in this case, I shouldn't\nget some result that's",
    "start": "4561610",
    "end": "4569100"
  },
  {
    "text": "particular to the x- or y-axis. It should just give me the\nsame result if I rotate.",
    "start": "4569100",
    "end": "4575440"
  },
  {
    "text": "So that's a 45-degree rotation. ",
    "start": "4575440",
    "end": "4583180"
  },
  {
    "text": "I can get any rotation by\ndoing something like that.",
    "start": "4583180",
    "end": "4589090"
  },
  {
    "text": "Because then E y over\nE x is some constant, and that's the tangent of the\nangle of rotation or something",
    "start": "4589090",
    "end": "4594969"
  },
  {
    "text": "like that. Plug that in here,\nand of course, you'll see that you get k\nsquared times the integral",
    "start": "4594970",
    "end": "4602770"
  },
  {
    "text": "over here. And the k squared\nappears over there. They cancel each other out. So this is actually\nthe most general case.",
    "start": "4602770",
    "end": "4609820"
  },
  {
    "text": "All of these others are just\nspecial cases of that one so that summarizes all\nof the cases we found.",
    "start": "4609820",
    "end": "4619480"
  },
  {
    "text": "They're all with isophotes at\nsome angle, parallel lines.",
    "start": "4619480",
    "end": "4625750"
  },
  {
    "text": "And then the important\nquestion is, is that it?",
    "start": "4625750",
    "end": "4631130"
  },
  {
    "text": "It turns out yes, that's it. And it's not easy to prove.",
    "start": "4631130",
    "end": "4636580"
  },
  {
    "text": "You need to at least use\nthe triangle inequality or something profound like that. So it's actually\nnot that hard, but I",
    "start": "4636580",
    "end": "4644320"
  },
  {
    "text": "think it's not really\nuseful to go there.",
    "start": "4644320",
    "end": "4651355"
  },
  {
    "text": "So when can we do it? Well, as soon as there's\ncurvature in the isophotes.",
    "start": "4651355",
    "end": "4656680"
  },
  {
    "text": "Because if the isophote\nlooks like this, if I move it tangent\nto the isophote,",
    "start": "4656680",
    "end": "4666159"
  },
  {
    "text": "there are still changes. So the only problem is\nwhere the isophotes are all straight lines,\nparallel straight lines.",
    "start": "4666160",
    "end": "4673060"
  },
  {
    "text": "And in another way\nof thinking about it, if you have areas in\nthe image where there's",
    "start": "4673060",
    "end": "4679090"
  },
  {
    "text": "a \"corner,\" something where the\nisophote makes a sharp turn--",
    "start": "4679090",
    "end": "4686139"
  },
  {
    "text": "so here are the\nbrightness gradients. If there's some small\narea where the directions",
    "start": "4686140",
    "end": "4692500"
  },
  {
    "text": "of the brightness gradients\nchange a lot, that's good. Because what we're\nworried about is",
    "start": "4692500",
    "end": "4698488"
  },
  {
    "text": "that the brightness gradients\nare all parallel to each other. That's the bad situation. And so for many purposes,\nlike image alignment",
    "start": "4698488",
    "end": "4706840"
  },
  {
    "text": "and recognition, we look for\nplaces that are \"interesting.\"",
    "start": "4706840",
    "end": "4713080"
  },
  {
    "text": "And one interesting way is to\nlook at the isophote curvature",
    "start": "4713080",
    "end": "4718540"
  },
  {
    "text": "or equivalently,\nthe rapid turning of the brightness gradients.",
    "start": "4718540",
    "end": "4724330"
  },
  {
    "text": "Because in other areas of the\nimage, there's less constraint. If I have a part\nof the image that",
    "start": "4724330",
    "end": "4729489"
  },
  {
    "text": "looks like this, on\nits own, it doesn't provide enough constraint.",
    "start": "4729490",
    "end": "4734590"
  },
  {
    "text": "Now, if next to it is another\narea of the image where things look like this,\nif I have both of these,",
    "start": "4734590",
    "end": "4741770"
  },
  {
    "text": "then that's fine. But if everything has the\nsame gradient direction,",
    "start": "4741770",
    "end": "4746889"
  },
  {
    "text": "that's not satisfactory. ",
    "start": "4746890",
    "end": "4755350"
  },
  {
    "text": "So homework problem\ntheoretically due on Thursday.",
    "start": "4755350",
    "end": "4764620"
  },
  {
    "text": "And I know we haven't\ndone a whole lot on this.",
    "start": "4764620",
    "end": "4769880"
  },
  {
    "text": "So if you have problems\nwith it, send me email, and I may say something that\ndoesn't give away the answer",
    "start": "4769880",
    "end": "4776050"
  },
  {
    "text": "but helps you. And we'll go from there. What are we're going to do\nnext is talk a little bit",
    "start": "4776050",
    "end": "4783670"
  },
  {
    "text": "about this concept\nof noise gain. So the idea is that all\nthis time in the back,",
    "start": "4783670",
    "end": "4791170"
  },
  {
    "text": "we've been thinking\nabout we only have pixels with eight\nbits, and they're noisy, and our calculations\nare going to be flaky",
    "start": "4791170",
    "end": "4798219"
  },
  {
    "text": "unless this determinant\nis large, and so on. So there's a lot of attention\nto not just a formula",
    "start": "4798220",
    "end": "4804550"
  },
  {
    "text": "for computing the\nanswer, but making sure that the answer is\nactually meaningful, as opposed to you've\ntaken two noisy numbers",
    "start": "4804550",
    "end": "4812020"
  },
  {
    "text": "and divided them by each\nother, and the result is not very predictable.",
    "start": "4812020",
    "end": "4817490"
  },
  {
    "text": "So in noise gain, there's\na very precise way of talking about\nit, which is saying",
    "start": "4817490",
    "end": "4822610"
  },
  {
    "text": "if I make this much of a\nchange in the image, what is the change in the result?",
    "start": "4822610",
    "end": "4828350"
  },
  {
    "text": "So in this case, I'm trying\nto get the velocity of motion.",
    "start": "4828350",
    "end": "4833620"
  },
  {
    "text": "How much is the\nvelocity of motion going to change if I change the\nbrightness gradient somewhere,",
    "start": "4833620",
    "end": "4839650"
  },
  {
    "text": "I have the wrong measurement\nthat's slightly off? And of course, we want\nthat to be not sensitive.",
    "start": "4839650",
    "end": "4845500"
  },
  {
    "text": "We don't want it to be\nvery sensitive to noise. And so we'll make\nthat clear in terms",
    "start": "4845500",
    "end": "4854770"
  },
  {
    "text": "of a one-dimensional\ntransformation where we know the\nforward function, and we're trying to\ninvert it, and we",
    "start": "4854770",
    "end": "4861070"
  },
  {
    "text": "want to know when that inversion\nis sensible and when it's not. ",
    "start": "4861070",
    "end": "4868330"
  },
  {
    "text": "Oh, questions? ",
    "start": "4868330",
    "end": "4873405"
  }
]