[
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6820"
  },
  {
    "text": "continue to offer high-quality\neducational resources for free. To make a donation, or to\nview additional materials",
    "start": "6820",
    "end": "13480"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13480",
    "end": "21997"
  },
  {
    "text": "PROFESSOR: OK. So yeah, problem set 2. There's a lot of work done. Congratulations,\nall the workers.",
    "start": "21997",
    "end": "27520"
  },
  {
    "text": "16 trillion hashes performed. How can we prove that?",
    "start": "27520",
    "end": "32599"
  },
  {
    "text": "So this is a personal\ngripe that I hear a lot.",
    "start": "32600",
    "end": "37730"
  },
  {
    "text": "That people say that proof\nof work doesn't scale. And that really bugs\nme because sometimes I",
    "start": "37730",
    "end": "44570"
  },
  {
    "text": "think I sort of know what\nthey're talking about, and they mean like, bitcoin\ndoesn't scale, or like, these block chains have\npoor scalability properties,",
    "start": "44570",
    "end": "51620"
  },
  {
    "text": "which sure, sure. They definitely do. But proof of work,\nit scales perfectly,",
    "start": "51620",
    "end": "57109"
  },
  {
    "text": "in a theoretical sense. There's nothing that\ncan scale better. You can prove an arbitrary\namount of work in 0 of 1.",
    "start": "57110",
    "end": "64410"
  },
  {
    "text": "Right? So in this case, well, how\nbig were these headers? They were less than\n100 bytes, right?",
    "start": "64410",
    "end": "69890"
  },
  {
    "text": "100 characters. And with that space,\nyou can prove actually the entire work that happened\nover the entire problem set.",
    "start": "69890",
    "end": "78240"
  },
  {
    "text": "So yeah. block chains, whole bunch\nof scalability problems. There's complex systems,\nall sorts of scaling issues.",
    "start": "78240",
    "end": "83900"
  },
  {
    "text": "But proven work itself, in this\npure form, scales really great. OK. So question.",
    "start": "83900",
    "end": "89900"
  },
  {
    "text": "Not super intuitive,\nbut how do you prove all the work ever done\nthroughout the entire problem set in one line?",
    "start": "89900",
    "end": "95409"
  },
  {
    "text": " Does anyone have any\nintuition about this",
    "start": "95410",
    "end": "103970"
  },
  {
    "text": "how do you prove all the work\nfrom all 1,800 blocks with just one piece of data?",
    "start": "103970",
    "end": "111510"
  },
  {
    "text": "AUDIENCE: Well you know that\nfor each block, 2 to 33, work had to go into it.",
    "start": "111510",
    "end": "116930"
  },
  {
    "text": "So you just need\nto know the number of blocks produced times the--",
    "start": "116930",
    "end": "123080"
  },
  {
    "text": "PROFESSOR: OK. Yeah, so the thing is how do\nI prove the number of blocks",
    "start": "123080",
    "end": "128270"
  },
  {
    "text": "without showing\nall of them, right? So OK, it's a weird\ntrick question.",
    "start": "128270",
    "end": "134800"
  },
  {
    "text": "Andrew-- I think-- I remember Andrew Miller, who's\nnow a professor at somewhere, Cornell?",
    "start": "134800",
    "end": "141180"
  },
  {
    "text": "Who was not, during the time,\nwrote about this initially in the bitcoin forums.",
    "start": "141180",
    "end": "146250"
  },
  {
    "text": "What you do is you just\nshow the luckiest block, and I have not yet\ndefined luckiest block. But in this case, it\nwas mined by turtle.",
    "start": "146250",
    "end": "157140"
  },
  {
    "text": "This is the block, the previous\nblock reference was of 0065a2 turtle 1654244 and the hash of\nthat block is 000c49a414 blah,",
    "start": "157140",
    "end": "168900"
  },
  {
    "text": "blah, blah. So anything interesting or novel\nabout this particular block that you can see?",
    "start": "168900",
    "end": "175209"
  },
  {
    "text": "It's not-- AUDIENCE: [INAUDIBLE] PROFESSOR: What? AUDIENCE: It's better than... PROFESSOR: It's better. There's more work.",
    "start": "175210",
    "end": "180930"
  },
  {
    "text": "So we didn't count the things\nas having more or less work just by a sum number of zeros. We just looked at the threshold,\ndid it have enough 0 bits",
    "start": "180930",
    "end": "188010"
  },
  {
    "text": "and accepted or rejected. But in this case,\nthese 4 bytes, right?",
    "start": "188010",
    "end": "193490"
  },
  {
    "text": "You needed 4 bytes\nand then 1 extra bit. You needed 33 bits. So these 4 are always worth 0.",
    "start": "193490",
    "end": "198840"
  },
  {
    "text": "But then in c and red,\nthere's another extra byte that's all 0s. And another extra half\na byte that's all 0s.",
    "start": "198840",
    "end": "204150"
  },
  {
    "text": "And then a c means\nfor that nibble, that the highest\nbit was 1, right?",
    "start": "204150",
    "end": "210900"
  },
  {
    "text": "So you've got this red stuff. There's a byte and a half\nextra-- or almost a byte and a half extra.",
    "start": "210900",
    "end": "217240"
  },
  {
    "text": "So, yeah. So what you can do for\na compact proof work. So if you look at this again,\nthere's 4 green bytes, byte",
    "start": "217240",
    "end": "226430"
  },
  {
    "text": "and a half is red, right? So that's 5 and 1/2\nbytes, so 44 bits.",
    "start": "226430",
    "end": "231689"
  },
  {
    "text": "And 2 to the 44 is\n17 trillion, right, if you do out 17 something,\nwhich is what we expect,",
    "start": "231690",
    "end": "239160"
  },
  {
    "text": "that's our proof, right? We did 16 trillion hashes\nfor our calculation,",
    "start": "239160",
    "end": "245360"
  },
  {
    "text": "and it shows up here. And another way to look\nat it is we needed 33 bits for a valid block.",
    "start": "245360",
    "end": "251280"
  },
  {
    "text": "We have 44 bits here. That's 11 bits extra. That's 11 bits of being lucky.",
    "start": "251280",
    "end": "259440"
  },
  {
    "text": "And so that's 11 bits\nto the 11, that's 2,048, which is pretty\nclose to the 1,862",
    "start": "259440",
    "end": "266813"
  },
  {
    "text": "that we actually\nperformed, right? So in this case,\nwe're a little lucky. We might have only\nhad 2 of the 10 and then we could\nonly prove that we'd",
    "start": "266813",
    "end": "273083"
  },
  {
    "text": "done like 8 trillion work\ninstead of 16 trillion work. So there's probabilities\nhere, but this",
    "start": "273083",
    "end": "281735"
  },
  {
    "text": "is an interesting property\nthat actually does work. You can prove all the work,\nto some approximation usually",
    "start": "281735",
    "end": "287419"
  },
  {
    "text": "within a factor of 2,\nthat the system has ever done just with 1 block header.",
    "start": "287420",
    "end": "293000"
  },
  {
    "text": "So, yeah. This is fun because\nanother way to look at it is that you've\ngot this metagame,",
    "start": "293000",
    "end": "299780"
  },
  {
    "text": "where for every block found,\ntake the, I'm doing a hash",
    "start": "299780",
    "end": "305930"
  },
  {
    "text": "and I need to find a\nhash with a lot of 0s to prove that I've done work. And you go a level deeper and\nsay, OK, I'm finding a block.",
    "start": "305930",
    "end": "313700"
  },
  {
    "text": "And I want to prove that I\nfound an even better block than everyone else, right? The entry for admission\nhere is find a valid block.",
    "start": "313700",
    "end": "321056"
  },
  {
    "text": "And then from those\nblocks, since it's a uniform distribution\nwith 1s and 0s, you're going to have this\ntail-end of like, happened",
    "start": "321057",
    "end": "328460"
  },
  {
    "text": "to have lots of 0s that you\ndidn't need in the beginning. And that can prove all\nthe work ever done.",
    "start": "328460",
    "end": "334280"
  },
  {
    "text": "There's a really interesting\npaper called, HyperLogLog, that uses this for\nnon-bitcoin applications",
    "start": "334280",
    "end": "340190"
  },
  {
    "text": "that uses it for set counting. Where, like on a website,\nyou want to see how many unique visitors you've\ngotten or something.",
    "start": "340190",
    "end": "346700"
  },
  {
    "text": "And you can store\nthat in 0 of 1 space because you could\nkeep track of OK,",
    "start": "346700",
    "end": "351710"
  },
  {
    "text": "let me keep track of every IP\naddress that's ever visited or something like\nthat, or cookie. But instead, you hash them.",
    "start": "351710",
    "end": "357500"
  },
  {
    "text": "See if the hash starts\nwith a bunch of 0s or any arbitrary character,\nand then just store the lowest.",
    "start": "357500",
    "end": "363889"
  },
  {
    "text": "And then, every time someone\nvisits, hash it, compare. If it's lower, replace. If not, ignore.",
    "start": "363890",
    "end": "369560"
  },
  {
    "text": "And then you have a\nvery compact indication of how many visitors\nhave visited.",
    "start": "369560",
    "end": "375630"
  },
  {
    "text": "Anyway, that's like a super\nhigh-level view of it. But if you're interested in this\nstuff, HyperLogLog is a paper.",
    "start": "375630",
    "end": "381320"
  },
  {
    "text": "It builds off of\nsome other things. It has nothing to\ndo with bitcoin, other than this property, where\nyou've got this random function",
    "start": "381320",
    "end": "388220"
  },
  {
    "text": "and you see how\nmany 0s are in it. But I think these are cool,\nand so to me, this is a fun--",
    "start": "388220",
    "end": "395010"
  },
  {
    "text": "this is not used\nin bitcoin, right? In bitcoin, you actually\ndownload all the headers, but people have written papers\nabout how you could use it.",
    "start": "395010",
    "end": "402110"
  },
  {
    "text": "If long term the headers\nare big, you could prove.",
    "start": "402110",
    "end": "407389"
  },
  {
    "text": "Have some checkpoint,\nwhere look, I proved all the previous work\nand now I build from there.",
    "start": "407390",
    "end": "412650"
  },
  {
    "text": "Any questions about this idea? Yes? AUDIENCE: It's not\nreally a proof. It's just a\nprobability weighted.",
    "start": "412650",
    "end": "418315"
  },
  {
    "text": " PROFESSOR: Yes, but the proof\nof work itself is the same.",
    "start": "418315",
    "end": "424080"
  },
  {
    "text": "Not of real proof because\nyou might have gotten lucky. So finding a block, it's\nlike, well that's not a proof.",
    "start": "424080",
    "end": "431820"
  },
  {
    "text": "There could be luck involved,\nthere could be probability, but it's the exact same\nluck and probability",
    "start": "431820",
    "end": "436920"
  },
  {
    "text": "that the underlying\nproof of work uses. So there's no further reduction\nin security or certainty",
    "start": "436920",
    "end": "444173"
  },
  {
    "text": "because of this. Not really. And so I remember talking\nabout this with someone",
    "start": "444173",
    "end": "449490"
  },
  {
    "text": "a few years ago and saying, yeah\nproof of work is a misnomer. It's not really a proof, right? Maybe it's an argument of work\nor some probabilistic argument",
    "start": "449490",
    "end": "456960"
  },
  {
    "text": "of work. How could you make it\nmore certain as a proof?",
    "start": "456960",
    "end": "463469"
  },
  {
    "text": "There's a bunch of ways. One way would be to have\nmultiple nonces, where instead of just finding one\nnonce that satisfies it,",
    "start": "463470",
    "end": "470970"
  },
  {
    "text": "you have to find several\nreplaceable nonces and then iterate through them. That would be a much\nmore certain proof.",
    "start": "470970",
    "end": "477410"
  },
  {
    "text": "It would remove the idea of\nprobability, to some extent. It would also completely\nbreak the system",
    "start": "477410",
    "end": "483330"
  },
  {
    "text": "in a way that's like\nfairly unintuitive, and so I always was\nsort of joking like, I should make an altcoin, where\nyou've got multiple nonces,",
    "start": "483330",
    "end": "490628"
  },
  {
    "text": "and you could be like, yes, for\nmore security and then people would buy it, but it\ncompletely breaks.",
    "start": "490628",
    "end": "496230"
  },
  {
    "text": "The completely broken incentives\nand system, maybe I'll get to--",
    "start": "496230",
    "end": "502672"
  },
  {
    "text": "I'll let you guys think\nabout it til Wednesday, and then draw it out and be\nlike, why wouldn't this work?",
    "start": "502672",
    "end": "508110"
  },
  {
    "text": "It's fun. It breaks in subtle\nbut bad ways. This is talking about\nproof of work optimization.",
    "start": "508110",
    "end": "515010"
  },
  {
    "text": "So if you look at\nthis slide anyway, you've got these\nheaders or blocks",
    "start": "515010",
    "end": "521198"
  },
  {
    "text": "or whatever we're mining. So you've got kezike17,\ntomriddle, Thalita, all these people mining.",
    "start": "521198",
    "end": "528133"
  },
  {
    "text": "It's interesting to\nsee what people use. Some people use\nlooks like base64, some people just use\na decimal number,",
    "start": "528133",
    "end": "535290"
  },
  {
    "text": "all sorts of different things. Who knows. There was also a lot\nof invalid blocks",
    "start": "535290",
    "end": "541386"
  },
  {
    "text": "with valid work\nsubmitted, where there was four or five different\nthings in my spaces. So there's been count,\nbut actually a lot",
    "start": "541387",
    "end": "547470"
  },
  {
    "text": "more work was done,\nand that's not even counting the human work of\ndoing all these assignments.",
    "start": "547470",
    "end": "552610"
  },
  {
    "text": "So sending this over the\nwire, or storing it on disk, some inefficiencies\nmay jump out at you.",
    "start": "552610",
    "end": "559020"
  },
  {
    "text": "What do you think you could\ndo to make this more efficient or compress it or? Yeah?",
    "start": "559020",
    "end": "564855"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] PROFESSOR: OK. That's an easy one. Oh, this doesn't\nwork when I gave you",
    "start": "564855",
    "end": "569870"
  },
  {
    "text": "the slides because you can\njust look at the next slide. Whoops, OK. Never mind. ",
    "start": "569870",
    "end": "575980"
  },
  {
    "text": "Yeah, so the first 8\ncharacters are always going to be 0s by definition. If it's not, it's\nan invalid block",
    "start": "575980",
    "end": "582050"
  },
  {
    "text": "so don't even bother sending it. So the first characters are 0,\ndon't send them over the wire. Just have that implied and just\nstart at the ninth character.",
    "start": "582050",
    "end": "591590"
  },
  {
    "text": "That saves, well, really you'd\nhave the serializing binary, so it only saves 4 bytes. In our case, it\nwould say 8 bytes.",
    "start": "591590",
    "end": "598400"
  },
  {
    "text": "That's cool. And then, also the\nentire previous hash. When you're sending a list of\n5 here, like here, in order",
    "start": "598400",
    "end": "605480"
  },
  {
    "text": "for it to be valid,\nthis has to be the hash of the line above it. So just don't send the\nwhole thing, right?",
    "start": "605480",
    "end": "612260"
  },
  {
    "text": "Just send name nonce. The hash is also computable\nfrom anyone receiving it.",
    "start": "612260",
    "end": "618709"
  },
  {
    "text": "That takes almost\nall of this space and we could compress\nthis entire blockchain to just the first\nline, and that's",
    "start": "618710",
    "end": "626810"
  },
  {
    "text": "the only full line we need. After that, it's just\nnamed nonce named nonce, and we get rid of 70-something\npercent of this base.",
    "start": "626810",
    "end": "633860"
  },
  {
    "text": "That's pretty cool, right? Yeah this kind of\nheader optimization",
    "start": "633860",
    "end": "639110"
  },
  {
    "text": "is also very much\npossible in bitcoin, and it's not implemented. It's not done.",
    "start": "639110",
    "end": "644340"
  },
  {
    "text": "If you want to, you could\nprogram it, change bitcoin,",
    "start": "644340",
    "end": "649940"
  },
  {
    "text": "make a pull request. I think-- I mean,\nwe've discussed it, and people are like, yeah that'd\nbe cool but, no one's done it.",
    "start": "649940",
    "end": "656903"
  },
  {
    "text": "So if you want to leave\nyour mark and be like, I'm a bitcoin core\ncontributor, and I optimized",
    "start": "656903",
    "end": "662000"
  },
  {
    "text": "the proof of work propagation\nsystem or something sounds cool, you can do this. It's not too hard.",
    "start": "662000",
    "end": "668563"
  },
  {
    "text": "You got to learn\nhow bitcoin works and all the different\nmessages and stuff, so it's a little annoying. But I think the main reason\npeople haven't done is",
    "start": "668563",
    "end": "675213"
  },
  {
    "text": "because it's-- this is not the\nslow part, right. This is not the critical\npath, not a bottleneck",
    "start": "675213",
    "end": "680218"
  },
  {
    "text": "in the actual system. Generally, the proof of work\nverification is pretty quick. The headers are a total\nof 40 something megabytes",
    "start": "680218",
    "end": "686450"
  },
  {
    "text": "now, 50 megabytes maybe. So you could you could\ndefinitely reduce that by a significant\nextent, but no one's",
    "start": "686450",
    "end": "693020"
  },
  {
    "text": "bothered because there's\nso many other scaling issues that are more pressing. But it's kind of cool, I think.",
    "start": "693020",
    "end": "700150"
  },
  {
    "text": "So, yeah. That'd be a fun thing to do. If you did that would that\nbe a soft or hard fork?",
    "start": "700150",
    "end": "708090"
  },
  {
    "text": "If you said, OK, I'm going to\nnow send header messages that are truncated. I'm going to leave off the\n4 bytes that are always 0s.",
    "start": "708090",
    "end": "716900"
  },
  {
    "text": "Bitcoin is also the first-- the difficulty requirement\nhere is basically the same as it is in bitcoin.",
    "start": "716900",
    "end": "722690"
  },
  {
    "text": "I'm going to have the\nimplied previous block hash, things like that.",
    "start": "722690",
    "end": "727880"
  },
  {
    "text": "Would that be a fork? Actually, it wouldn't, right? It's a non-fork.",
    "start": "727880",
    "end": "733420"
  },
  {
    "text": "There are lots of\nchanges you can make. So I know Neha talked\nabout soft forks and hard forks changes you can\nmake in the system that affect",
    "start": "733420",
    "end": "740495"
  },
  {
    "text": "consensus, but there's\na lot of changes you can make that optimize\nit that don't really",
    "start": "740495",
    "end": "745540"
  },
  {
    "text": "affect other people. So in this case, it would\njust be a wire protocol change",
    "start": "745540",
    "end": "750850"
  },
  {
    "text": "and you could easily maintain\nbackwards compatibility right? So in this case, you say, the\nheader optimization is not",
    "start": "750850",
    "end": "756850"
  },
  {
    "text": "a fork, right. What you do is you'd\nhave a new message type like, truncated\nheader or something,",
    "start": "756850",
    "end": "763087"
  },
  {
    "text": "and then, when you\nconnect to nodes you say, hey, you know about this\nnew message type I'm using? And if they don't know\nwhat you're talking about",
    "start": "763087",
    "end": "768820"
  },
  {
    "text": "or they usually they\nsay what version they are when they connect. You're like, oh\nyou're an old version, you don't know about this. I'll just keep saying\nthe old header type.",
    "start": "768820",
    "end": "775720"
  },
  {
    "text": "And even if I store the new\ntruncated headers on disk, I can recreate the\nold one pretty quickly",
    "start": "775720",
    "end": "780800"
  },
  {
    "text": "by performing the hashtag and\nthen on sending it to you. So I can be backwards compatible\nand forwards compatible.",
    "start": "780800",
    "end": "788380"
  },
  {
    "text": "No soft forks needed. The old nodes, they don't\neven see that this happens. They might see that\nthere's oh, there's",
    "start": "788380",
    "end": "794115"
  },
  {
    "text": "a new version or a new\nmessage I'm not aware of. They ignore it. Everything seems fine. So these are the easiest--",
    "start": "794115",
    "end": "800140"
  },
  {
    "text": "they're not forced-- the\neasiest changes in the system get through because there's\nno real coordination needed",
    "start": "800140",
    "end": "805990"
  },
  {
    "text": "and it's backwards and forwards\ncompatible, so that's cool. So some example non-forks.",
    "start": "805990",
    "end": "812230"
  },
  {
    "text": "A lot of them are internal only. You can't even see from outside. So for example,\ncompressing blocks",
    "start": "812230",
    "end": "818590"
  },
  {
    "text": "or compressing your database. That's fairly\nstraightforward, right?",
    "start": "818590",
    "end": "824140"
  },
  {
    "text": "Intuitively it seems\nlike, well, these are all random numbers and hashes. You can't really compress\nthose because they're random.",
    "start": "824140",
    "end": "831460"
  },
  {
    "text": "In practice, you actually can. People reuse public keys\na lot, and so you just",
    "start": "831460",
    "end": "836920"
  },
  {
    "text": "see the same pub\nkey over and over. So you do some pretty\nsimple encoding and you can make those smaller.",
    "start": "836920",
    "end": "842890"
  },
  {
    "text": "Also, the amounts is 8 bytes. So if you're sending someone\none bitcoin, that's 100 million.",
    "start": "842890",
    "end": "849690"
  },
  {
    "text": "And people like to\nuse round numbers, and so those get\ncompressed pretty well. And generally,\nthey're much smaller.",
    "start": "849690",
    "end": "855430"
  },
  {
    "text": "So the top bytes are usually 0s. So you can compress\nit a decent amount. But no one has to know that\nyou're compressing, right?",
    "start": "855430",
    "end": "860950"
  },
  {
    "text": "That's all transparent. When someone\nconnects to you, they have no idea if you're\ncompressing or not on disk.",
    "start": "860950",
    "end": "866560"
  },
  {
    "text": "Something like faster\nsignature verification, where there's been\nenormous amounts of work in optimizing\nthe code for that.",
    "start": "866560",
    "end": "872440"
  },
  {
    "text": "Making assembly,\nstuff like that. Nobody knows you're doing\nit, they're just like, oh, he's asking for blocks\nquicker than this other person.",
    "start": "872440",
    "end": "880589"
  },
  {
    "text": "Maybe his network's faster,\nmaybe his CPU faster. So these are changes\nthat are purely internal. Nobody needs to know.",
    "start": "880590",
    "end": "886600"
  },
  {
    "text": "That's cool. Other non-forks are\npeer-to-peer non-forks. So the truncated headers,\nmaybe, where you can say,",
    "start": "886600",
    "end": "894339"
  },
  {
    "text": "hey, I'm going to send you\nless data over the network. You identify at\nconnect time and you default to the old behavior.",
    "start": "894340",
    "end": "900070"
  },
  {
    "text": "People don't know what\nyou're talking about. So there's one called\ncompact blocks.",
    "start": "900070",
    "end": "906390"
  },
  {
    "text": "I didn't describe it,\nbut you can probably guess what the idea\nof compact blocks is. Anyone want to venture\na guess what those do?",
    "start": "906390",
    "end": "912560"
  },
  {
    "text": " Block.",
    "start": "912560",
    "end": "918890"
  },
  {
    "text": "So it's not a header that's\ncome back, but the whole block. How would you compact a block?",
    "start": "918890",
    "end": "925279"
  },
  {
    "text": "AUDIENCE: Get rid of all the\nfields that aren't necessary. Like version...",
    "start": "925280",
    "end": "931620"
  },
  {
    "text": "PROFESSOR: Yeah,\nactually, that would work. But that's not what they do. There's a really\nbig 2x redundancy.",
    "start": "931620",
    "end": "940440"
  },
  {
    "text": "And so the basic idea is\ntransactions are propagated, and then a block's propagated. Where's the redundancy there?",
    "start": "940440",
    "end": "946498"
  },
  {
    "text": " AUDIENCE: [INAUDIBLE] PROFESSOR: Yes, the\ntransactions the block.",
    "start": "946498",
    "end": "952630"
  },
  {
    "text": "You've Probably already\nseen them, right? You see the transactions,\nand the block comes out. Most of it, in general,\n90-something percent,",
    "start": "952630",
    "end": "959620"
  },
  {
    "text": "it's like, yeah we're\ngoing to see all this. So compact blocks is a way to\nsay, hey, here is the block.",
    "start": "959620",
    "end": "966879"
  },
  {
    "text": "Here are all the\ntransactions in it, but I don't show the\nwhole transaction. I just show the TXID the hashes.",
    "start": "966880",
    "end": "971890"
  },
  {
    "text": "And then you can say, OK. 90% of those I've already\nseen so we're good. Here's these 50\ntransactions I have not",
    "start": "971890",
    "end": "978580"
  },
  {
    "text": "seen, please give them to me. So it's interactive\nhere's the blocks with just the\ntransaction identifiers.",
    "start": "978580",
    "end": "984700"
  },
  {
    "text": "OK, what do you need? OK, I need these 10. OK, here's the 10, and now I\ncan reconstruct the whole block.",
    "start": "984700",
    "end": "990440"
  },
  {
    "text": "So the block goes from being\na megabyte over the wire to something like 10 kilobytes?",
    "start": "990440",
    "end": "997160"
  },
  {
    "text": "But it is a little slower in\nthat it's like a multi round thing, right. It's like, here's\nthe compact block,",
    "start": "997160",
    "end": "1002740"
  },
  {
    "text": "OK, I need these extra things,\nOK, here's the extra things. So a little bit more complexity. If you're really\noptimizing for latency,",
    "start": "1002740",
    "end": "1009377"
  },
  {
    "text": "then you don't want to use this. But in general, it's\na pretty big gain in terms of bandwidth, which\ncan be taxing on full nodes.",
    "start": "1009377",
    "end": "1018060"
  },
  {
    "text": "I run a-- there's a full node\non the first floor in one little rack and it uploads\nthree terabytes a month or so.",
    "start": "1018060",
    "end": "1027449"
  },
  {
    "text": "Depends on how much\npeople are using bitcoin. In December, everyone starts\ndownloading it and installing it, and there's a\nlot of bandwidth",
    "start": "1027450",
    "end": "1034199"
  },
  {
    "text": "needed to sync people up. Another non-fork was\nthe Bloom filters, which note full nodes\ncan then say, hey,",
    "start": "1034200",
    "end": "1040919"
  },
  {
    "text": "I will perform Bloom filter\ncalculations for you. And light nodes can\nconnect in, like I",
    "start": "1040920",
    "end": "1045930"
  },
  {
    "text": "said two weeks ago with SPV. Light nodes can submit\na Bloom filter say, hey,",
    "start": "1045930",
    "end": "1051000"
  },
  {
    "text": "when I download a block from\nyou, first, filter the block. Match all the transactions\nagainst this Bloom filter",
    "start": "1051000",
    "end": "1057240"
  },
  {
    "text": "and only send me\nthings that match. That's not a fork, but it's\na fairly involved change",
    "start": "1057240",
    "end": "1064170"
  },
  {
    "text": "in the peer-to-peer code. OK, any questions about\nthese peer-to-peer non-forks?",
    "start": "1064170",
    "end": "1071130"
  },
  {
    "text": "Cool. There's another aspect called\nstandardness, where you haven't",
    "start": "1071130",
    "end": "1078937"
  },
  {
    "text": "soft forked something\nout, you haven't declared something\ninvalid, but you can declare it non-standard.",
    "start": "1078937",
    "end": "1084179"
  },
  {
    "text": "And what that means,\nis when you're node sees a transaction\ncoming over unconfirmed,",
    "start": "1084180",
    "end": "1089700"
  },
  {
    "text": "the transaction being\npropagated through the network. And it's got this\nproperty, and you say, oh, that's non-standard.",
    "start": "1089700",
    "end": "1095250"
  },
  {
    "text": "I'm going to drop it,\nI'm going to ignore it. I won't propagate\nit onto my peers. I won't ban, I don't--",
    "start": "1095250",
    "end": "1100799"
  },
  {
    "text": "it depends. I don't know. Do I ban the person\nsubmitting it to me? I think you don't,\nbut I ignore it.",
    "start": "1100800",
    "end": "1107510"
  },
  {
    "text": "I don't propagate it,\nso it doesn't really get around the network. When most of the\npeers on the network have these rules\nof non-standardness",
    "start": "1107510",
    "end": "1113822"
  },
  {
    "text": "it's going to be very difficult\nto get your transaction out there. However, if you see this\nnon-standard transaction",
    "start": "1113822",
    "end": "1121260"
  },
  {
    "text": "in a block, you\naccept the block. You say, OK, well that was this\nweird thing that I didn't like,",
    "start": "1121260",
    "end": "1126360"
  },
  {
    "text": "but since it's in a block\nand someone did a lot of work on it, I will accept it. It's a little weird, right?",
    "start": "1126360",
    "end": "1132390"
  },
  {
    "text": "Why have this? It's something that's not\nquite a soft fork, right? It's showing that we're\ndiscouraging this,",
    "start": "1132390",
    "end": "1138150"
  },
  {
    "text": "we think it's non-standard. The miners software,\nby default, will also consider this non-standard\nand not mine it.",
    "start": "1138150",
    "end": "1144390"
  },
  {
    "text": "But if someone else is\nmining it, we're OK with it. And so what you\ncan do, is you can",
    "start": "1144390",
    "end": "1150150"
  },
  {
    "text": "stage future soft\nforks this way, right. So for example, in SegWit,\noh, I didn't talk about SegWit",
    "start": "1150150",
    "end": "1158280"
  },
  {
    "text": "at all. I'm going to have to do\nthat next class, next week. OK, so SegWit was the biggest\nsoft fork ever in bitcoin,",
    "start": "1158280",
    "end": "1167160"
  },
  {
    "text": "and it occurred last year. It changed the output\nscripts to say-- ",
    "start": "1167160",
    "end": "1181760"
  },
  {
    "text": "so before, you said, OP_DUP,\nOP_HASH160, the hash, OP_CHECKS, OP_EQUAL, whatever.",
    "start": "1181760",
    "end": "1188660"
  },
  {
    "text": "Here, it just says 0. Just pushes a 0 byte, and then\npubkey hash, and that's it.",
    "start": "1188660",
    "end": "1196160"
  },
  {
    "text": "And if you actually\ninterpret that in the stack, no signature is needed, right? You push a 0 to the bottom the\nstack, you push a pubkey hash",
    "start": "1196160",
    "end": "1202820"
  },
  {
    "text": "on top of that, and then\nyour execution halts, and you're like, well,\nthere's a non-zero piece",
    "start": "1202820",
    "end": "1208250"
  },
  {
    "text": "of data on the top. I interpret non-zero data\nas true, same way he does,",
    "start": "1208250",
    "end": "1213980"
  },
  {
    "text": "so it's true. You don't need a\nsignature at all. So that's the weird\nSegWit soft fork where they said, no, what\nused to be considered true",
    "start": "1213980",
    "end": "1222470"
  },
  {
    "text": "without a signature, we\nnow template and we say, this means check\npubkey hash, right?",
    "start": "1222470",
    "end": "1230510"
  },
  {
    "text": "This means the same as OP_DUP,\nOP_HASH160, hash, OP_EQUALS, OP_CHECKS, OP_CHECKSIG, right.",
    "start": "1230510",
    "end": "1236360"
  },
  {
    "text": "So what you actually\ndo, is you need to provide the pubkey\nthat this hashes into, and then check a signature.",
    "start": "1236360",
    "end": "1242330"
  },
  {
    "text": "It also defined\n1, 2, 3, up to 16, and left this undefined,\nand said, look,",
    "start": "1242330",
    "end": "1250940"
  },
  {
    "text": "these are now non-standard. Before, if you-- I think they\nwere already non-standard, but the idea is that if you\njust push a 1 on the stack,",
    "start": "1250940",
    "end": "1258680"
  },
  {
    "text": "and then push some data, well,\nI guess no signatures needed. But now they're non-standard\nbecause it means",
    "start": "1258680",
    "end": "1264170"
  },
  {
    "text": "we're going to use these next. The next soft work will define\nwhat one, some piece of data",
    "start": "1264170",
    "end": "1270380"
  },
  {
    "text": "means. Maybe it's a new\nsignature scheme, maybe it's a new program\nwhere you put some data here,",
    "start": "1270380",
    "end": "1276223"
  },
  {
    "text": "but it's non-standard. So if you try to make\na transaction that's using 2 and then a data\npush, all the nodes",
    "start": "1276223",
    "end": "1282620"
  },
  {
    "text": "will be like, yeah,\nI'm not ready for that. I haven't I haven't seen that. And if you see, I\nthink in your air logs,",
    "start": "1282620",
    "end": "1289279"
  },
  {
    "text": "if you see a block with a\nbunch of these kinds of things, it'll give you a warning. It's like, warning. People are using stuff that your\nsoftware doesn't know about.",
    "start": "1289280",
    "end": "1296600"
  },
  {
    "text": "You might need to upgrade. There's a bunch of warnings\nlike that where like, warning some percentage\nof the last few blocks",
    "start": "1296600",
    "end": "1304070"
  },
  {
    "text": "had these things, so people\nare doing stuff that you're not considering invalid, right? You're not going to refuse the\nblock, but you're also like,",
    "start": "1304070",
    "end": "1312230"
  },
  {
    "text": "this is something\nI don't understand and I've specifically\ncoded it as nonstandard.",
    "start": "1312230",
    "end": "1317250"
  },
  {
    "text": "OK so any questions\nabout non-standardness? Neha talked about soft\nforks and hard forks,",
    "start": "1317250",
    "end": "1324770"
  },
  {
    "text": "and I will go through\na bit more detail about how these end up\nworking and how these",
    "start": "1324770",
    "end": "1331710"
  },
  {
    "text": "interact with miners and notes. Did people have questions\nabout soft forks and hard forks",
    "start": "1331710",
    "end": "1338200"
  },
  {
    "text": "before we start? Sort of got the\ngeneral idea, right? Soft forks add new rules, hard\nforks remove rules, in general.",
    "start": "1338200",
    "end": "1347040"
  },
  {
    "text": " And this is minors. ",
    "start": "1347040",
    "end": "1354120"
  },
  {
    "text": "So the miners have\na unique role here. It's not just the\nsame as a full node.",
    "start": "1354120",
    "end": "1360450"
  },
  {
    "text": "A miner decides what to put into\na block that they're mining.",
    "start": "1360450",
    "end": "1365760"
  },
  {
    "text": "And so they do have\na bit more influence in this fork decisions. OK, so a soft forks would\nbe, for example, saying,",
    "start": "1365760",
    "end": "1372430"
  },
  {
    "text": "OK, all output amounts\nmust be odd, right. You can't send an even number\nof coins to anyone anymore.",
    "start": "1372430",
    "end": "1379720"
  },
  {
    "text": "That would be a\nweird, silly fork. Wouldn't really impact\nthe usability system, but it'd be dumb,\nbut you could do it.",
    "start": "1379720",
    "end": "1385540"
  },
  {
    "text": "And you could say,\nOK, well, if I see a block, if I see a\ntransaction, which outputs, if any of the outputs have\nan even number of Satoshis,",
    "start": "1385540",
    "end": "1392740"
  },
  {
    "text": "invalid. You've got to do odd. Potentially leading to the loss\nof 1 Satoshi per transaction--",
    "start": "1392740",
    "end": "1400700"
  },
  {
    "text": "with the fees, 1\nSatoshi per block may end up being\nlost due to this.",
    "start": "1400700",
    "end": "1406530"
  },
  {
    "text": "So here I'm saying, an A for\nadopter and I for ignorer.",
    "start": "1406530",
    "end": "1411630"
  },
  {
    "text": "Now people may ignore the fork\nbecause they disagree with it. They don't want to\ndo this fork, or they",
    "start": "1411630",
    "end": "1416880"
  },
  {
    "text": "may do it because they\nmay just not even know that this software exists. It's a giant\ndecentralized system,",
    "start": "1416880",
    "end": "1423360"
  },
  {
    "text": "and it's hard to know\nhow to communicate with everyone, right?",
    "start": "1423360",
    "end": "1428580"
  },
  {
    "text": "There is bitcoin.org. There's also bitcoin.com,\nwhere the guy",
    "start": "1428580",
    "end": "1434640"
  },
  {
    "text": "doesn't like the\nbitcoin developers, and says they're bad. Anyone can just\nregister these things.",
    "start": "1434640",
    "end": "1441065"
  },
  {
    "text": "There's a bitcoin\nTwitter account that was purchased recently\nby someone who wanted to argue about these things.",
    "start": "1441065",
    "end": "1446460"
  },
  {
    "text": "So there's no one really\nin charge of this. And then there's also\ndifferent implementations. There is the real\nbitcoin, which is",
    "start": "1446460",
    "end": "1452910"
  },
  {
    "text": "run by this bunch\nof crazy people who say they control\nbitcoin, and that everyone has to pay them taxes\nin bitcoins, yeah.",
    "start": "1452910",
    "end": "1460580"
  },
  {
    "text": "But they're all\nrunning bitcoin-- they all are in consensus\nand doing these transactions. So ignoring could be\nany number of things.",
    "start": "1460580",
    "end": "1467980"
  },
  {
    "text": "If you have a soft\nfork, where you say, OK, we're now adding this\nrule, but none of the miners",
    "start": "1467980",
    "end": "1475200"
  },
  {
    "text": "are enforcing it. None of the miners even\nknow about it, potentially. Here, it just stops, right?",
    "start": "1475200",
    "end": "1482220"
  },
  {
    "text": "You say, no, I require that\nall output amounts are odd. And then every block\nhas these even amounts.",
    "start": "1482220",
    "end": "1488292"
  },
  {
    "text": "And you're just\nlike, OK, no that's not a valid block,\nthat's not a valid block, you will never see a\nvalid block again, right?",
    "start": "1488292",
    "end": "1493890"
  },
  {
    "text": "None of the miners are enforcing\nthis rule, but you are. Everyone's ignoring it, and they\nsay, everyone's ignoring it.",
    "start": "1493890",
    "end": "1500850"
  },
  {
    "text": "Everything seems fine. You just self-imposed\nthis new rule, making you incompatible with\nthe rest of the network,",
    "start": "1500850",
    "end": "1507270"
  },
  {
    "text": "and from your perspective,\neverything stops and no more",
    "start": "1507270",
    "end": "1512310"
  },
  {
    "text": "blocks occur and\nthe system is over. Or potentially, if you're\nsoft fork is some weird rule",
    "start": "1512310",
    "end": "1519840"
  },
  {
    "text": "that nobody knows about\nand nobody breaks anyway, we say, OK, the sum of\nthe outputs of all--",
    "start": "1519840",
    "end": "1526795"
  },
  {
    "text": "the sum of the outputs\nin a transaction must not be a Carmichael number. OK, you could have that rule.",
    "start": "1526795",
    "end": "1533340"
  },
  {
    "text": "Probably no one's break-- wait. There's a lot of small-- something like that, right? Where no one's\nbreaking it anyway.",
    "start": "1533340",
    "end": "1541170"
  },
  {
    "text": "Then, from your\nperspective, everything's cool because everyone's\nalready obeying your rule even though they\ndon't know about it, it's silly.",
    "start": "1541170",
    "end": "1548040"
  },
  {
    "text": "Another possibility is let's say\na minority, somewhere 1 to 50% of the miners adopt\nthis rule and say, yeah,",
    "start": "1548040",
    "end": "1554967"
  },
  {
    "text": "we're going to enforce\nthis new rule, right? All output amounts need to be\nodd, so the idea is you say,",
    "start": "1554967",
    "end": "1560940"
  },
  {
    "text": "yes, only odd numbers. And a bunch of the majority,\nactually, of people don't care about odd or even.",
    "start": "1560940",
    "end": "1567420"
  },
  {
    "text": "So the majority, they still\ngo off on their own chain, but you split off\ninto your own faction, you say, no we're the odd bunch.",
    "start": "1567420",
    "end": "1575010"
  },
  {
    "text": "And both of those\nchains are viable. Blocks come out here\nmaybe quite slowly,",
    "start": "1575010",
    "end": "1581240"
  },
  {
    "text": "if it's only a few percent. Blocks still come out here. The fact, so you've\ngot these odd thing,",
    "start": "1581240",
    "end": "1589100"
  },
  {
    "text": "and then you've got regular. And the regular is going\nto be longer, right? The regular is going\nto be potentially",
    "start": "1589100",
    "end": "1595310"
  },
  {
    "text": "a lot longer, but\nfrom the people here, they're like, we don't\ncare if it's longer. It's wrong. They use even numbers,\nthat's just plain, old wrong.",
    "start": "1595310",
    "end": "1603950"
  },
  {
    "text": "And these people are like,\nyeah we can sometimes see it, but actually we lose\ntrack of it very quickly. After here, we start seeing\nblock advertisements like this,",
    "start": "1603950",
    "end": "1612200"
  },
  {
    "text": "and we're like,\nwe're over here now. We're way past that. Why are you talking about this\nstuff from like weeks ago?",
    "start": "1612200",
    "end": "1618590"
  },
  {
    "text": "So they just disconnect. It's pretty ugly,\nbut that can happen. Now, if you have the\nmajority of the hash power,",
    "start": "1618590",
    "end": "1626840"
  },
  {
    "text": "this ends up being longer, the\nodd blocks end up being longer,",
    "start": "1626840",
    "end": "1633830"
  },
  {
    "text": "and everyone gets\ndragged along, right? No split, and now\nwe have a new rule",
    "start": "1633830",
    "end": "1643530"
  },
  {
    "text": "even though they didn't know\nabout the rule potentially. So they're like, what the\nheck, half my transactions",
    "start": "1643530",
    "end": "1648750"
  },
  {
    "text": "don't work. Some of them do,\nSome of them don't, I don't know what's going on. I just randomly adjust my\nfees until it seems to work,",
    "start": "1648750",
    "end": "1655770"
  },
  {
    "text": "and then my\ntransactions go through. They should probably find\nout from someone, oh, yeah, there's a new rule. Only odd numbers,\nand then they--",
    "start": "1655770",
    "end": "1661980"
  },
  {
    "text": "that rule is imposed on\nthem from the miners, essentially, in the\nrest of the network.",
    "start": "1661980",
    "end": "1667950"
  },
  {
    "text": "And essentially,\nthe same thing here. When you get to 100%, there's\nnone of these orphans,",
    "start": "1667950",
    "end": "1673020"
  },
  {
    "text": "but it worked-- oh, sorry--\nthese orphans would actually be like this because everyone\nagrees that this is valid,",
    "start": "1673020",
    "end": "1680790"
  },
  {
    "text": "and then some of the people\naren't aware of the rule and keep mining\noff of these what they consider valid blocks.",
    "start": "1680790",
    "end": "1686680"
  },
  {
    "text": "So it's a little\ndifferent topology. OK, so that makes sense, right? Any questions about soft\nfork, mining power rules?",
    "start": "1686680",
    "end": "1694639"
  },
  {
    "text": "One other aspect, is if you\nsplit here, and then later on you get a majority and you\npull ahead, you will reorg out",
    "start": "1694640",
    "end": "1704420"
  },
  {
    "text": "the ignoring side, so we split\noff with 10% of the hash power.",
    "start": "1704420",
    "end": "1710690"
  },
  {
    "text": "We've got our much\nshorter chain, where we only have odd numbers. At some point, we convinced\nthe rest of the miners,",
    "start": "1710690",
    "end": "1716900"
  },
  {
    "text": "that, no, this is the way to go. The even numbers are really\nscrewing up the system. And we get the majority\nof the hash power,",
    "start": "1716900",
    "end": "1723650"
  },
  {
    "text": "and then we overtake the\neven and odd mix chain. The people who have not\nyet updated their software,",
    "start": "1723650",
    "end": "1731029"
  },
  {
    "text": "and are ignoring\nthe fork, they will reorg out because from\ntheir perspective, OK, I was on a longer chain\nnow there's this other longer",
    "start": "1731030",
    "end": "1737580"
  },
  {
    "text": "chain. They both look valid, and\nwhen I see two valid chains, my way to decide is\nwho has the most work?",
    "start": "1737580",
    "end": "1743300"
  },
  {
    "text": "And so this one pulled ahead,\nin terms of work, so I switched. So it's a weird-- this\nhas never really happened,",
    "start": "1743300",
    "end": "1750243"
  },
  {
    "text": "that I'm aware of,\nthey were threatening to do it last summer\n[INAUDIBLE] I don't know.",
    "start": "1750243",
    "end": "1759850"
  },
  {
    "text": "So yeah there is\nall sorts of stuff on the internet, and Reddit,\nand Twitter about doing this with a minority of hash power.",
    "start": "1759850",
    "end": "1766780"
  },
  {
    "text": "They didn't though, or they did. They say they did, but everyone\nelse says they didn't though.",
    "start": "1766780",
    "end": "1771880"
  },
  {
    "text": "A lot of arguing. OK. So that's another\nweird aspect of it. OK, hard forks.",
    "start": "1771880",
    "end": "1779510"
  },
  {
    "text": "No minor support. What happens to\nthose adopting it? Nothing, right?",
    "start": "1779510",
    "end": "1787200"
  },
  {
    "text": "Everything just keeps working. If you say, OK, we're now going\nto allow every transaction output.",
    "start": "1787200",
    "end": "1792799"
  },
  {
    "text": "Every transaction can have 1\nextra Satoshi gets created. It's just 1, it's no big deal.",
    "start": "1792800",
    "end": "1798890"
  },
  {
    "text": "It's quite limited, but we\nwant to compensate people for using bitcoin, so\nwhen you have your inputs,",
    "start": "1798890",
    "end": "1804360"
  },
  {
    "text": "you have your outputs,\nyou can add 1 Satoshi. You get a free Satoshi\nper transaction.",
    "start": "1804360",
    "end": "1809570"
  },
  {
    "text": "The previous\nsoftware, absolutely does not allow that, right? If you're just\ngenerating money out of nowhere in these\ntransactions, not OK.",
    "start": "1809570",
    "end": "1817850"
  },
  {
    "text": "But these guys, they'll see that\nthe transactions they do that with are not confirming,\nbut otherwise, they're",
    "start": "1817850",
    "end": "1823550"
  },
  {
    "text": "OK if you don't add a Satoshi. And so the system works. Nothing happens,\nnothing happens.",
    "start": "1823550",
    "end": "1829740"
  },
  {
    "text": "They just see everything. With a minority of the hash\npower, something like 10%, 20%,",
    "start": "1829740",
    "end": "1837130"
  },
  {
    "text": "you get all these orphans,\nget all these dead ends, where you see a\nblock, OK, and it's",
    "start": "1837130",
    "end": "1844309"
  },
  {
    "text": "got this 1 Satoshi\nper transaction bonus. Great, but it keeps\ngetting orphaned out because you still consider--",
    "start": "1844310",
    "end": "1853210"
  },
  {
    "text": "all right, so you see OK,\nhere's this longest chain without the bonus. And then you say, oh, here's\na block with the bonus, cool.",
    "start": "1853210",
    "end": "1860659"
  },
  {
    "text": "Maybe someone builds 2, great. But this keeps getting\nlonger and you keep trying,",
    "start": "1860660",
    "end": "1866210"
  },
  {
    "text": "but you keep getting overpowered\nbecause you see both of them as valid. You're not requiring\nthat there's",
    "start": "1866210",
    "end": "1871760"
  },
  {
    "text": "this 1 Satoshi bonus\nper transaction, you're just allowing it. And so you say,\noh, this is cool. Cool, oh, no.",
    "start": "1871760",
    "end": "1877005"
  },
  {
    "text": "Got reorged out,\ngot reorged out. So you see all these little\nstarts, they get reorged out. And you basically stay\nwith the same chain.",
    "start": "1877005",
    "end": "1882920"
  },
  {
    "text": "You don't split. These people also see a bunch\nof invalid blocks, right?",
    "start": "1882920",
    "end": "1889433"
  },
  {
    "text": "You'll see it on\nthe network, hey, someone keeps sending these\ninvalid blocks much more frequently than usually.",
    "start": "1889433",
    "end": "1894530"
  },
  {
    "text": "I don't know why\nthey're doing that, but they've got invalid\ntransactions, I ignore them. Here, majority of\nhash power is split,",
    "start": "1894530",
    "end": "1907290"
  },
  {
    "text": "so once the majority and these\nare the bonus, the plus ones,",
    "start": "1907290",
    "end": "1913530"
  },
  {
    "text": "they pull out ahead. These guys don't actually care\nthat they have a majority. After the first block,\nthey don't see the rest",
    "start": "1913530",
    "end": "1920539"
  },
  {
    "text": "because they ban. So if someone submits to you\nan invalid block, you ban them. You ban their IP address\nfor 24 hours or something.",
    "start": "1920540",
    "end": "1927000"
  },
  {
    "text": "You're like, I don't know what\nyou're doing, you're crazy. Disconnect. So you won't really see\nthis pretty quickly.",
    "start": "1927000",
    "end": "1933450"
  },
  {
    "text": "These guys don't have the bonus. They're still on their\nsame old blockchain. It may be much slower because\na lot of the harsh power",
    "start": "1933450",
    "end": "1940140"
  },
  {
    "text": "now moved to this other\nchain, and these guys say, oh, it worked, cool. We've got our new\nbonus coin chain.",
    "start": "1940140",
    "end": "1948150"
  },
  {
    "text": "Now we're stimulating the\neconomy, everything like that. Job creation. OK, so and then\nthese guys slowers.",
    "start": "1948150",
    "end": "1955020"
  },
  {
    "text": "Slows down. And then if you have\n100%, well stops. For the non-adopters,\nno more blocks come out.",
    "start": "1955020",
    "end": "1962720"
  },
  {
    "text": "This is the end. Everyone's gone to the\njob creation train. And there's not really\na split anymore,",
    "start": "1962720",
    "end": "1970820"
  },
  {
    "text": "it's just the new rule.  OK. So any questions there?",
    "start": "1970820",
    "end": "1977360"
  },
  {
    "text": "This grid so far? Then another way you\ncan do it is combine this to say OK we're going to\ndo a soft fork and a hard fork",
    "start": "1977360",
    "end": "1985100"
  },
  {
    "text": "at the same time, and\nactually, many times that people say hard fork,\nthey actually mean this.",
    "start": "1985100",
    "end": "1990320"
  },
  {
    "text": "So the nomenclature\nis pretty ambiguous. I like keeping these terms\nvery distinct and pure,",
    "start": "1990320",
    "end": "1998970"
  },
  {
    "text": "so like a soft fork is purely\nincreasing the number of rules, where it must be odd, and a hard\nfork is just reducing rules.",
    "start": "1998970",
    "end": "2006200"
  },
  {
    "text": "And yes, we will allow but\nnot require a transaction to have this property.",
    "start": "2006200",
    "end": "2011290"
  },
  {
    "text": "And then to combine them would\nbe something like saying, we allow this new thing\nthat was not allowed before",
    "start": "2011290",
    "end": "2017650"
  },
  {
    "text": "and we require it to be true. So for example,\nevery transaction must introduce 1\nnew Satoshi bonus.",
    "start": "2017650",
    "end": "2026200"
  },
  {
    "text": "That would be both\nhard and soft work because now if\nyou're doing this,",
    "start": "2026200",
    "end": "2031630"
  },
  {
    "text": "you no longer consider\nthe old rules appropriate. And there's a complete mutual\ndisagreement on the rules.",
    "start": "2031630",
    "end": "2039070"
  },
  {
    "text": "Some people have called this\nfull fork, who called it that? I forget.",
    "start": "2039070",
    "end": "2044660"
  },
  {
    "text": "Greg called it a\nbilateral hard fork. We don't have good\nterms for these things.",
    "start": "2044660",
    "end": "2050539"
  },
  {
    "text": "A lot of people refer to forks\nthat have both as hard forks,",
    "start": "2050540",
    "end": "2055760"
  },
  {
    "text": "so it's somewhat ambiguous. I think it helps to keep\nthese different terms,",
    "start": "2055760",
    "end": "2061369"
  },
  {
    "text": "but it's a different setup. It's the union of these two\nthings in some way in that,",
    "start": "2061370",
    "end": "2068540"
  },
  {
    "text": "we allow this new thing\nthat was prohibited before, and not only that,\nbut we require it.",
    "start": "2068540",
    "end": "2073969"
  },
  {
    "text": "So if 0% enforce the new\nhard fork, well the adopters, it just stops, right?",
    "start": "2073969",
    "end": "2079560"
  },
  {
    "text": "There requiring this new thing,\nit's not showing up, it ends. These guys nothing\nhappens, right?",
    "start": "2079560",
    "end": "2086270"
  },
  {
    "text": "When there's a minority,\nit will split off. It'll split off with the new\nrule set and the new bonus",
    "start": "2086270",
    "end": "2094419"
  },
  {
    "text": "coins or whatever. And the ignorers, they\nsee that it's slower",
    "start": "2094420",
    "end": "2099640"
  },
  {
    "text": "because some people have\nleft some mining powers left. When you have a majority,\nyou also split off.",
    "start": "2099640",
    "end": "2106450"
  },
  {
    "text": "And ignorers, again, it's slow. They're not going to\nadopt because they",
    "start": "2106450",
    "end": "2112930"
  },
  {
    "text": "see the new fork is invalid. In this case, as\nwell, these guys",
    "start": "2112930",
    "end": "2118690"
  },
  {
    "text": "won't adopt here because\nthey see it as invalid. And then for the full thing-- for the 100%, the\nadopters, new rule,",
    "start": "2118690",
    "end": "2127690"
  },
  {
    "text": "and these guys system halts. OK so any questions about\nfull fork or bilateral fork,",
    "start": "2127690",
    "end": "2135360"
  },
  {
    "text": "or whatever you want to call it. Hey, it works. OK, cool.",
    "start": "2135360",
    "end": "2142380"
  },
  {
    "start": "2142380",
    "end": "2148289"
  },
  {
    "text": "Yes. Bilateral, hard, full, we don't\nknow the good names for these.",
    "start": "2148290",
    "end": "2154470"
  },
  {
    "text": "But yeah. It's essentially a soft fork and\na hard fork coupled together.",
    "start": "2154470",
    "end": "2159650"
  },
  {
    "text": "And this is much simpler\nor easier to produce, and if you just start\nchanging the code,",
    "start": "2159650",
    "end": "2166490"
  },
  {
    "text": "you're probably going to\ncreate one of these, right? You have to be very careful. If I want just a\nhard fork, I'm very",
    "start": "2166490",
    "end": "2172880"
  },
  {
    "text": "careful that everything that\nused to be valid is still valid and I'm just rescinding one\nrule or one set of rules.",
    "start": "2172880",
    "end": "2181100"
  },
  {
    "text": "It's very easy to\ninadvertently create this when you're trying to\nmake consensus changes. ",
    "start": "2181100",
    "end": "2187760"
  },
  {
    "text": "Yeah, there have been-- did Neha talk about\nthe 2013 fork?",
    "start": "2187760",
    "end": "2194390"
  },
  {
    "text": "I don't think so. OK, so a little anecdote. I remember I was in the airport.",
    "start": "2194390",
    "end": "2200160"
  },
  {
    "text": "I got to Nagoya\nairport and opened my laptop and bitcoin went\ndown to like $20 from $30,",
    "start": "2200160",
    "end": "2205970"
  },
  {
    "text": "and it was all over the\ninternet like, oh, no. And there was a inadvertent\nhard fork due to the Berkeley DB",
    "start": "2205970",
    "end": "2214730"
  },
  {
    "text": "to level DB transition\nin the software. AUDIENCE: [INAUDIBLE] PROFESSOR: No, no, no.",
    "start": "2214730",
    "end": "2220340"
  },
  {
    "text": "It was 0.7 was\nusing Berkeley-- it used to be everything was using\nBerkeley DB for the UTXO set",
    "start": "2220340",
    "end": "2226670"
  },
  {
    "text": "in the blocks. And then they\nswitched to level DB, and then, it was OK\nfor a month or two,",
    "start": "2226670",
    "end": "2233990"
  },
  {
    "text": "and then someone wanted\nlike a block that had a bunch of inputs or something. I don't remember\nexactly the reason.",
    "start": "2233990",
    "end": "2240450"
  },
  {
    "text": "And the new software was\nlike, yeah, that's cool, and the old software\nsaid it wasn't OK. The thing is it wasn't\nclear why, right?",
    "start": "2240450",
    "end": "2247910"
  },
  {
    "text": "There was no defined like,\nthis should be invalid, like, this looks valid. But the Berkeley DB\nlayer gave an error.",
    "start": "2247910",
    "end": "2254900"
  },
  {
    "text": "And so it's like,\nwell, the database says it's bad, so\nit's not a good block. So that was a weird\nunintentional consensus change.",
    "start": "2254900",
    "end": "2264230"
  },
  {
    "text": "What happened was-- so it\nseemed like it was a hard fork. The thing is it was like\na compiler time option",
    "start": "2264230",
    "end": "2269480"
  },
  {
    "text": "dependent hard fork,\nif you compiled it with a different Berkeley\nDB cache setting,",
    "start": "2269480",
    "end": "2274849"
  },
  {
    "text": "then it would work. It was sort of ambiguous and\npeople rolled back though.",
    "start": "2274850",
    "end": "2281747"
  },
  {
    "text": "They were on IRC and they were\ntalking to the different miners and are like, what's going on? There's two different\nforks being built.",
    "start": "2281747",
    "end": "2287510"
  },
  {
    "text": "And they told the people\nwho were, to some extent, in the right, the new version,\nwhich seemed more correct,",
    "start": "2287510",
    "end": "2295339"
  },
  {
    "text": "to stop mining. And they did, and then the old\nversion with the Berkeley DB caught up, and then they\nrestricted their block size.",
    "start": "2295340",
    "end": "2302770"
  },
  {
    "text": "It was something to do with like\nhaving too many file locks open or something like that. So that was essentially\na hard fork.",
    "start": "2302770",
    "end": "2311270"
  },
  {
    "text": "They stopped it, and\nthen went back so there wasn't a hard fork, but then\nmonths later they're like, OK, we're going\nto all transition",
    "start": "2311270",
    "end": "2317672"
  },
  {
    "text": "to level DB because we're not\neven sure what the rules are. Yeah? AUDIENCE: [INAUDIBLE]\nthe number of blocks",
    "start": "2317672",
    "end": "2325690"
  },
  {
    "text": "update they produce block was\nway too many, so level DB was like, OK, [INAUDIBLE]",
    "start": "2325690",
    "end": "2333720"
  },
  {
    "text": "PROFESSOR: Yeah. And the thing is,\nthey definitely did-- at the time, people were running\naround screaming like, why--",
    "start": "2333720",
    "end": "2340820"
  },
  {
    "text": "after the fact, they're\nlike, that's why. But at the time, people\nwere talking really quick and like, what's going on?",
    "start": "2340820",
    "end": "2346610"
  },
  {
    "text": "Bitcoin has failed,\nsell all your bitcoins, the system doesn't work\nbecause no one really knew what was going on or why\nsome versions weren't working.",
    "start": "2346610",
    "end": "2357020"
  },
  {
    "text": "So yeah, that was\nan unintended fork. It was a little scary,\nand then the price",
    "start": "2357020",
    "end": "2362480"
  },
  {
    "text": "went back up after\nthat, It was like, hey, we can work through this guys.",
    "start": "2362480",
    "end": "2367970"
  },
  {
    "text": "So that was a hardcore, right? The old software would\nnot allow these blocks",
    "start": "2367970",
    "end": "2374240"
  },
  {
    "text": "that opened a bunch\nof file locks, and the new software did. And so that was probably\nthe one real hard fork",
    "start": "2374240",
    "end": "2381530"
  },
  {
    "text": "that bitcoin has been through. There were a few maybe\nin 2009 that like are fairly ambiguous because\nthere were no there",
    "start": "2381530",
    "end": "2388280"
  },
  {
    "text": "was no actual split. I think there's also a\nhard fork that's happened,",
    "start": "2388280",
    "end": "2394530"
  },
  {
    "text": "but it didn't, it's\na little weird. It has to do with the\ntimestamp in the block header",
    "start": "2394530",
    "end": "2399780"
  },
  {
    "text": "and how it like expires\nin 2106, once you run out of bits from Unix time.",
    "start": "2399780",
    "end": "2406800"
  },
  {
    "text": "1970 plus 2 to the 32 seconds\nis like 2,106 in January, or something.",
    "start": "2406800",
    "end": "2413349"
  },
  {
    "text": "And so they actually\ndid a hard fork, but the thing is the hard\nfork wouldn't diverge until 100 years from now.",
    "start": "2413350",
    "end": "2418960"
  },
  {
    "text": "So it's like whatever, everyone\nwill have updated by then. If someone's still running\nsoftware from 2015 in 2106,",
    "start": "2418960",
    "end": "2427890"
  },
  {
    "text": "they will diverge, but\nthat seems unlikely. So there's a lot of\nweird stuff like that.",
    "start": "2427890",
    "end": "2434550"
  },
  {
    "text": " OK. Firm variance.",
    "start": "2434550",
    "end": "2439590"
  },
  {
    "text": "Some people call it firm fork,\npeople call it evil fork, I'm [INAUDIBLE] call it\nevil and firm, I don't know.",
    "start": "2439590",
    "end": "2448020"
  },
  {
    "text": "This is a fun one that\nhas not been attempted, and I remember talking to\npeople and they're like,",
    "start": "2448020",
    "end": "2454590"
  },
  {
    "text": "don't talk about this. The miners don't know they\ncan do this, so just shh.",
    "start": "2454590",
    "end": "2459790"
  },
  {
    "text": "I'm like, come on, they don't\nknow they could do this? That's kind of like-- OK. So how would you do this?",
    "start": "2459790",
    "end": "2465480"
  },
  {
    "text": "Make a soft fork. It's a hard fork, right? It completely changes\nthe rules, however,",
    "start": "2465480",
    "end": "2471119"
  },
  {
    "text": "it looks like a soft fork\nto non-adopting notes. ",
    "start": "2471120",
    "end": "2477520"
  },
  {
    "text": "It's kind of crazy. Well, the proof of\nwork for the new chain is a empty but valid\nblock on the old chain.",
    "start": "2477520",
    "end": "2486035"
  },
  {
    "text": "So instead of your\nproof of work being, hey, have a header\nthat hashes to this, say, have a header\nthat hashes this.",
    "start": "2486035",
    "end": "2491860"
  },
  {
    "text": "Also a block that is valid\nbut completely empty. We'll take that as\nour header, right?",
    "start": "2491860",
    "end": "2497965"
  },
  {
    "text": "Our header now gets bigger. Instead of 80 bytes, it's going\nto be 200 something bytes, but that's doable.",
    "start": "2497965",
    "end": "2502990"
  },
  {
    "text": "Now our header chain is\na chain of empty blocks. And our actual blocks\npoint to that, right.",
    "start": "2502990",
    "end": "2510460"
  },
  {
    "text": "We can put our Merkle\nroot in the output address or something. We can put our Merkle root\nsomewhere in this empty block",
    "start": "2510460",
    "end": "2517079"
  },
  {
    "text": "transaction-- the one\ntransaction in the block. The old nodes will see it\nand say, yep, that's a block.",
    "start": "2517080",
    "end": "2524070"
  },
  {
    "text": "Someone's mining, here's\nwhere the money went. But there's no\ntransactions in it. My transactions never confirm.",
    "start": "2524070",
    "end": "2530322"
  },
  {
    "text": "You don't actually have to\nconnect to the old network to do this, it's\ntotally deterministic. You just say, OK,\nmy new proof of work",
    "start": "2530322",
    "end": "2537090"
  },
  {
    "text": "is a valid but empty\nblock on the old one, and I commit somewhere\nin this to my new block.",
    "start": "2537090",
    "end": "2543830"
  },
  {
    "text": "That's evil because what happens\nis, here's the chart for this.",
    "start": "2543830",
    "end": "2550480"
  },
  {
    "text": "It's basically a firm fork\nplus this little evil thing. The adopting, if you have no\nhash firewall system holds,",
    "start": "2550480",
    "end": "2556520"
  },
  {
    "text": "then nothing changes here. If you have 1 to\n50%, the adopting split off with the new\nrule, so in this case,",
    "start": "2556520",
    "end": "2562780"
  },
  {
    "text": "it's like a hard fork. However, the main\ndifference from a hard fork, if you have majority\nhash power, the ignoring",
    "start": "2562780",
    "end": "2570610"
  },
  {
    "text": "the system essentially halts. It doesn't halt in that the\nblocks keep coming out, right. You'll still see your software\nwon't give you any warnings.",
    "start": "2570610",
    "end": "2577588"
  },
  {
    "text": "It'll just be like,\nyep, block height keeps progressing as\nnormal, as expected. We keep selling all\nthese blocks, however,",
    "start": "2577588",
    "end": "2583990"
  },
  {
    "text": "no transactions occur. And you can never\nreceive or send money, but according to your software,\neverything's working fine.",
    "start": "2583990",
    "end": "2591619"
  },
  {
    "text": "So this is the firm, evil,\nsneaky, whatever part, where if you're able to\nget 51% of the mining",
    "start": "2591620",
    "end": "2599470"
  },
  {
    "text": "and you implement this\nnew fork, you're basically forcing everyone to update\nbecause if you don't update",
    "start": "2599470",
    "end": "2607870"
  },
  {
    "text": "your software, if you're\nignoring this fork, you can't do anything. You've got to adopt a new rule.",
    "start": "2607870",
    "end": "2614292"
  },
  {
    "text": "So this is scary. And I can see why\nsome people are like, don't tell miners\nthey can do this. Also I remember last year\nwith SegWit2x stuff, I think,",
    "start": "2614292",
    "end": "2623012"
  },
  {
    "text": "they were arguing about this. And it really seemed\nthat they were not aware of this possibility,\nwhich was like, huh,",
    "start": "2623012",
    "end": "2630595"
  },
  {
    "text": "they don't know about this. Cool, I guess that helps keep\nthings safer because they were arguing about how they were\ngoing to rent like hundreds",
    "start": "2630595",
    "end": "2638950"
  },
  {
    "text": "of millions of dollars of hash\npower to mine empty blocks on the old chain. It's like, you know you can\ndo that for free if you just",
    "start": "2638950",
    "end": "2646270"
  },
  {
    "text": "change your software to\nmake your new proof of work and empty block on\nthe old proof work, but I don't think they\nwere aware of that,",
    "start": "2646270",
    "end": "2652240"
  },
  {
    "text": "so we're like, OK let them go. Anyway, and so the thing is it\nyou can see how it would really",
    "start": "2652240",
    "end": "2658810"
  },
  {
    "text": "quickly turn into that, right? If You've got 75%,\nwell why would anyone",
    "start": "2658810",
    "end": "2664210"
  },
  {
    "text": "try to mine on this? You could keep making blocks\nthat did contain transactions,",
    "start": "2664210",
    "end": "2670870"
  },
  {
    "text": "but they would get orphaned out. And everyone would, you\nmight occasionally see, hey,",
    "start": "2670870",
    "end": "2676210"
  },
  {
    "text": "a block came out with\ntransactions in it, I just got reorged out, and\nnothing would ever come of it.",
    "start": "2676210",
    "end": "2682523"
  },
  {
    "text": "So you can see how the\nminers can never really get paid on the minority\nfork and minority chain,",
    "start": "2682523",
    "end": "2687855"
  },
  {
    "text": "so they're all going to start\nswitching to the new thing, if they want to get paid. So that's a little ugly.",
    "start": "2687855",
    "end": "2693500"
  },
  {
    "text": "This has not happened yet. Hopefully, this doesn't\nhappen, but on the other hand, despite it being called\nevil, I know Luke Jr,",
    "start": "2693500",
    "end": "2701619"
  },
  {
    "text": "he's kind of crazy,\nbut he's cool. He was saying this is how we\nshould do a hard fork, right?",
    "start": "2701620",
    "end": "2707180"
  },
  {
    "text": "We should also give\npeople the option to say, look, there's\ngoing to be a fork. We give you the option to adopt\na different system or doing",
    "start": "2707180",
    "end": "2715580"
  },
  {
    "text": "this so that no one's\ninadvertently left behind. So we say, hey, a year from\nnow, this is going to happen.",
    "start": "2715580",
    "end": "2721799"
  },
  {
    "text": "You can either say we\nactively refuse this new rule and we've got our own chain now.",
    "start": "2721800",
    "end": "2727940"
  },
  {
    "text": "We make a soft fork\nbefore that point, or we adopt this new\nrule, update our software, and now I've got this\nnew proof of work.",
    "start": "2727940",
    "end": "2735390"
  },
  {
    "text": "The thing is, the\nnew proof of work, you don't need new chips, right? You just need to do a little\nbit different software.",
    "start": "2735390",
    "end": "2742210"
  },
  {
    "text": "OK any questions\nabout evil forks? Kind of fun. Yeah?",
    "start": "2742210",
    "end": "2747450"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]\nan empty block? PROFESSOR: Well, OK every block\nhas to have one transaction, so you'd have the\ncoinbase transaction,",
    "start": "2747450",
    "end": "2754840"
  },
  {
    "text": "but any user created\ntransactions would not be.",
    "start": "2754840",
    "end": "2760250"
  },
  {
    "text": "And, yeah, in the case where\nthere's only one transaction the Merkle root just\nbecomes the TXID of that single transaction,\nand you can put arbitrary data",
    "start": "2760250",
    "end": "2768790"
  },
  {
    "text": "in that single transaction. The input field-- yeah\nwe said-- the input field",
    "start": "2768790",
    "end": "2774010"
  },
  {
    "text": "for that coinbase transaction\nthat generates new coins can be any arbitrary data you want. So you could put a Merkle root\nfrom your real block in there,",
    "start": "2774010",
    "end": "2782962"
  },
  {
    "text": "and then write your new software\nand say, OK, the new proof of work is the header\nwith the nonce,",
    "start": "2782962",
    "end": "2789099"
  },
  {
    "text": "also it's got to have a\ncoinbase transaction, and then a real Merkle root in\nthe coinbase transaction,",
    "start": "2789100",
    "end": "2795160"
  },
  {
    "text": "and then build out\nyour treat from there. So it's a little ugly. It's a little more complex,\nit would totally work though.",
    "start": "2795160",
    "end": "2802222"
  },
  {
    "text": "And all the old\nsoftware would just be like, huh, no transactions. And all the new software knows\nthat that's not a real coinbase",
    "start": "2802222",
    "end": "2807583"
  },
  {
    "text": "transaction. It's just a part of\nthe extended header.",
    "start": "2807583",
    "end": "2813280"
  },
  {
    "text": "OK. Cool. Don't try-- well, I mean, try\nthis at home, if you want.",
    "start": "2813280",
    "end": "2818970"
  },
  {
    "text": "I don't know. Yeah, seems coercive,\nthus evil, people call it.",
    "start": "2818970",
    "end": "2825780"
  },
  {
    "text": "OK, yeah, fork coordination. How do you go a\nlevel up from this.",
    "start": "2825780",
    "end": "2833020"
  },
  {
    "text": "How do we know to\ndo all these things? Reddit, IRC, Twitter, there's--",
    "start": "2833020",
    "end": "2839140"
  },
  {
    "text": "these systems exist on the\nreal world and people talk. Like the meeting I\nwas at last week.",
    "start": "2839140",
    "end": "2845270"
  },
  {
    "text": "We actually didn't\ntalk about forks much, we sort of did, but the\ndevelopers get together,",
    "start": "2845270",
    "end": "2851320"
  },
  {
    "text": "companies using bitcoin,\nall sorts of stuff. Yeah, no, on\nWednesday, people were",
    "start": "2851320",
    "end": "2856630"
  },
  {
    "text": "arguing about MAST\nversus Schnorr which is more important,\nwhich we should try to soft fork in first.",
    "start": "2856630",
    "end": "2861970"
  },
  {
    "text": "Not much gets done. So it used to be called BIP9. That's still there.",
    "start": "2861970",
    "end": "2867570"
  },
  {
    "text": "Bitcoin Improvement Protocol 9. It was the idea in the header\nfield in the version field,",
    "start": "2867570",
    "end": "2874330"
  },
  {
    "text": "you can set these flag\nbits for which soft forks you are adopting,\nright so you indicate",
    "start": "2874330",
    "end": "2880060"
  },
  {
    "text": "before adopting a fork which\none you're ready to adopt. And then you don't actually\nimplement the adoption",
    "start": "2880060",
    "end": "2886150"
  },
  {
    "text": "until you see some threshold\nto say, OK, once 95% of people are signaling that we\nhave this new operation,",
    "start": "2886150",
    "end": "2894040"
  },
  {
    "text": "we'll all enforce it. Because quite likely\nthe software people don't want this.",
    "start": "2894040",
    "end": "2900160"
  },
  {
    "text": "A lot of times you say,\nlook, I want this new rule. I want this new\nsignature system or I want this new even, odd thing.",
    "start": "2900160",
    "end": "2906490"
  },
  {
    "text": "It would be really better if\neveryone only used on numbers. However, I'm not\nwilling to split off because of this, right.",
    "start": "2906490",
    "end": "2912940"
  },
  {
    "text": "I want everyone on board, or\nat least the majority on board. So we have a new split. We get the new one,\nthis is what I want.",
    "start": "2912940",
    "end": "2919720"
  },
  {
    "text": "I like the rule but\nI'm not willing to put a stake in the ground say,\nlook, I'm making my own network",
    "start": "2919720",
    "end": "2924960"
  },
  {
    "text": "if you don't like it. So in order to do\nthat, we say we want to get a majority\nof mining power",
    "start": "2924960",
    "end": "2929980"
  },
  {
    "text": "to adopt it before\nwe start doing it. And so that way we can\nsignal in the header",
    "start": "2929980",
    "end": "2935829"
  },
  {
    "text": "that, hey, I'm aware\nof this new rule, and I will enforce it\nif everyone else says",
    "start": "2935830",
    "end": "2941440"
  },
  {
    "text": "they're going to enforce\nit so a staging process. So that was called\nBIT9, and the idea",
    "start": "2941440",
    "end": "2946900"
  },
  {
    "text": "is once 95% are signaling\nit, then you activate it. This didn't actually\nwork in practice.",
    "start": "2946900",
    "end": "2954160"
  },
  {
    "text": "I think it worked once with\nthe OP_CHECKS sequence verify, and then last year,\npeople were just",
    "start": "2954160",
    "end": "2959573"
  },
  {
    "text": "arguing in the miners\nare like, no we're not going to activate\nany new soft forks, or then, they started making\nall these deals-- it was a mess.",
    "start": "2959573",
    "end": "2967180"
  },
  {
    "text": "Governance, yeah.  OK, so, yeah, the future of soft\nforks is definitely unclear.",
    "start": "2967180",
    "end": "2974750"
  },
  {
    "text": "This is very much in flux. How is this going to\nwork in the future? How are people going to\nagree on these things, right?",
    "start": "2974750",
    "end": "2981890"
  },
  {
    "text": "It seems, a lot of the times,\nfrom the developer perspective, it seems like, why not? Like, hey, we made this\ncool new signature system.",
    "start": "2981890",
    "end": "2988280"
  },
  {
    "text": "It's faster, it's more secure,\nit saves space, let's use it. And then people say, no\nand you're like, well, why?",
    "start": "2988280",
    "end": "2996590"
  },
  {
    "text": "Things like that. But on the other hand,\nif it's like, no. We only have odd outputs. It's like, why? Who cares. Let's use, even and odd numbers.",
    "start": "2996590",
    "end": "3003790"
  },
  {
    "text": "OK so another aspect\nwith the forks. Transaction replay. So this is tricky.",
    "start": "3003790",
    "end": "3010460"
  },
  {
    "text": "So a split happens. Let's say in the case\nof a minority soft fork, or a majority, but not\nunanimous hard fork,",
    "start": "3010460",
    "end": "3018970"
  },
  {
    "text": "or a full fork,\nsomething like that. There's a split, right?",
    "start": "3018970",
    "end": "3024609"
  },
  {
    "text": "There's two chains that\nare now being extended. You make a transaction\non the old chain what happens on the new chain?",
    "start": "3024610",
    "end": "3030672"
  },
  {
    "text": " Yes? AUDIENCE: [INAUDIBLE]",
    "start": "3030673",
    "end": "3036290"
  },
  {
    "text": "PROFESSOR: Yeah. [INAUDIBLE] it and it\nhappens on both, right? In many cases,\nthese transactions",
    "start": "3036290",
    "end": "3043120"
  },
  {
    "text": "are valid on either. And so they can be\nrebroadcast or relayed between the two networks. And if it can be relayed between\nthe two networks, it will.",
    "start": "3043120",
    "end": "3050530"
  },
  {
    "text": "Someone's going to set\nup a little script that grabs all the transactions\non one chain, broadcast them",
    "start": "3050530",
    "end": "3056530"
  },
  {
    "text": "on the other, even if you\ndon't want them to someone will do that, right? And if it's valid on both,\nit gets confirmed on both.",
    "start": "3056530",
    "end": "3064630"
  },
  {
    "text": "And so you say,\nOK, it now splits. There's now two\ndifferent histories. ",
    "start": "3064630",
    "end": "3070869"
  },
  {
    "text": "At the time of the split, now\nI've got coins on both, right? I don't usually think of\nit when it's a short term",
    "start": "3070870",
    "end": "3076810"
  },
  {
    "text": "split as I now have two\ntypes of coins, but I do. If these extend indefinitely\nand they're never going to reconverge, well, I've\nstill got the UTXOs on both.",
    "start": "3076810",
    "end": "3085750"
  },
  {
    "text": "I can make a transaction here,\nand maybe it gets relayed here and now they move on both sides.",
    "start": "3085750",
    "end": "3091460"
  },
  {
    "text": "Or maybe it doesn't. So you can you can potentially--\nand eventually the UTXO sets will diverge, right.",
    "start": "3091460",
    "end": "3097330"
  },
  {
    "text": "How do you diverge these things? Well, if you mix it with\ncoins that have been mined, so you know that the\nmine, the new coinbase,",
    "start": "3097330",
    "end": "3105640"
  },
  {
    "text": "the new coins here, are\ndefinitely different, right? Those are going to\nhave different TXIDs. Coins that got mined here will\nnot exist on this one, and vise",
    "start": "3105640",
    "end": "3112840"
  },
  {
    "text": "versa. So eventually,\nmore and more coins start getting mixed in with each\nother and they will diverge.",
    "start": "3112840",
    "end": "3119350"
  },
  {
    "text": "That takes a while though. Another thing you\ncan try to doing is a spamming double spends. I'm going to send this--",
    "start": "3119350",
    "end": "3124490"
  },
  {
    "text": "I'll make a transaction,\nAlice pays Bob, I also make a transaction,\nAlice pays Carol. I just send one to one\nplace, one to the other,",
    "start": "3124490",
    "end": "3132430"
  },
  {
    "text": "hope they get in. Eventually, they'll start\ndiverging just by chance.",
    "start": "3132430",
    "end": "3138369"
  },
  {
    "text": "You can also try\nexploiting locktime deltas. So in many cases, the\nheights will be different,",
    "start": "3138370",
    "end": "3144710"
  },
  {
    "text": "and you can say, OK, I'm here. I'm going to make a\ntransaction that's only valid after block 5.",
    "start": "3144710",
    "end": "3150390"
  },
  {
    "text": "And if someone replays\nit here, they're going to have to wait 2\nblocks before it's valid.",
    "start": "3150390",
    "end": "3155432"
  },
  {
    "text": "And then this gets\nconfirmed here, and then I make a different\ntransaction spending the coins here without a time lock.",
    "start": "3155433",
    "end": "3160570"
  },
  {
    "text": "And so I can try to exploit\nthe fact that there's timing differences\nbetween the two chains",
    "start": "3160570",
    "end": "3166060"
  },
  {
    "text": "to make a transaction\nA occur on the top one, and transaction B occur\non the bottom one, and split my coins off that way.",
    "start": "3166060",
    "end": "3173980"
  },
  {
    "text": "So those are potential\nways to split your coins, despite these\ntransaction replays.",
    "start": "3173980",
    "end": "3179440"
  },
  {
    "text": "And then you can now\nsay, OK, I have two separate wallets, two separate\nkeys on the different chains.",
    "start": "3179440",
    "end": "3185260"
  },
  {
    "text": "However, yes, this is expensive. This is ugly. It's possible, but it's ugly\nbecause you're basically going to spam the network\nand in many cases,",
    "start": "3185260",
    "end": "3193760"
  },
  {
    "text": "you're not actually\ntrying to send money, you're just moving your own\nmoney around internally.",
    "start": "3193760",
    "end": "3199505"
  },
  {
    "text": "So if everyone does\nthat in the system, it can overload the system,\nhave tons of transactions, also if you're doing\nthis, it might not work.",
    "start": "3199505",
    "end": "3206188"
  },
  {
    "text": "And you're like,\nOK, I just confirmed a transaction for no point\nwhatsoever, got to keep trying. It's pretty ugly.",
    "start": "3206188",
    "end": "3212829"
  },
  {
    "text": "Also, people don't know,\nso why is this a problem?",
    "start": "3212830",
    "end": "3219160"
  },
  {
    "text": "Well, in many cases, you want\nto sell one and not the other. In addition to these\nsoftware rules,",
    "start": "3219160",
    "end": "3225839"
  },
  {
    "text": "such as bonus coins\nfor each transaction or only odd numbers\nallowed, there are often",
    "start": "3225840",
    "end": "3231180"
  },
  {
    "text": "philosophical and cultural rules\nthat get associated with it, and people hate each other\nand yell at each other",
    "start": "3231180",
    "end": "3237690"
  },
  {
    "text": "and insult each other on\nthe internet all the time. This is-- I don't think\nthis is unique to bitcoin",
    "start": "3237690",
    "end": "3244170"
  },
  {
    "text": "or cryptocurrencies,\nI think it's just, you got money involved, you\ngot trolls on the internet,",
    "start": "3244170",
    "end": "3249339"
  },
  {
    "text": "it's a rich mixture of the\nbest parts of humanity.",
    "start": "3249340",
    "end": "3254400"
  },
  {
    "text": "So a lot of times people want\nto sell one or the other. So they say, I think\nthe odd coin is stupid.",
    "start": "3254400",
    "end": "3260760"
  },
  {
    "text": "I'm going to sell it, and\nsomeone wants to buy it and I'll get these new coins.",
    "start": "3260760",
    "end": "3266400"
  },
  {
    "text": "That's difficult if transaction\nreplays are occurring. Another problem\nis that many users",
    "start": "3266400",
    "end": "3271740"
  },
  {
    "text": "could be unaware of the forks. I know a lot of people-- there have been a bunch of\nfull forks in bitcoin recently,",
    "start": "3271740",
    "end": "3278580"
  },
  {
    "text": "where different rules\nhave to been adopted. In many cases, entirely\ndifferent proofs of works, things like that.",
    "start": "3278580",
    "end": "3285569"
  },
  {
    "text": "I'm not aware of all of them. I know of some of them. Most people I know don't\nknow of all of them",
    "start": "3285570",
    "end": "3291360"
  },
  {
    "text": "or even any of them. So users might unknowingly\nsend both or not be aware of these things.",
    "start": "3291360",
    "end": "3297090"
  },
  {
    "text": "That's an issue. There's also all sorts\nof crazy legal issues. Talking to exchanges, where\nlike, OK, this fork happens.",
    "start": "3297090",
    "end": "3304319"
  },
  {
    "text": "Do we owe our customers both? Do we only owe\nthem the one that--",
    "start": "3304320",
    "end": "3311680"
  },
  {
    "text": "and which does the\nexchange have to let people decide to adopt\nor ignore new rules set?",
    "start": "3311680",
    "end": "3318280"
  },
  {
    "text": "There's all sorts of\nweird legal issues that are still being settled.",
    "start": "3318280",
    "end": "3326790"
  },
  {
    "text": "And for one example, you can\ndo a replay attack on exchange and this is not a theoretical\nexample, this has happened.",
    "start": "3326790",
    "end": "3336010"
  },
  {
    "text": "So let's say the\nnetwork splits, right? You get bonus coin\nand regular old coin.",
    "start": "3336010",
    "end": "3342490"
  },
  {
    "text": "And the bonus coin has\na majority hash rate, and there's no kind\nof replay protection.",
    "start": "3342490",
    "end": "3348640"
  },
  {
    "text": "All the transactions\nthat are valid in one are valid in the other. OK, so the network splits\ninto coinA and coinB.",
    "start": "3348640",
    "end": "3354790"
  },
  {
    "text": "And the exchange is\nonly running coinB. They say, look, this\nhas the most hash power and that's what\ndefines the system.",
    "start": "3354790",
    "end": "3363010"
  },
  {
    "text": "They adopt a new rule, fine. There's this new rule that\nyou can generate a coin out of nothing.",
    "start": "3363010",
    "end": "3368299"
  },
  {
    "text": "So the user says\nto the exchange, OK, I'm going to deposit coinB. The exchange says,\nyes, I acknowledge",
    "start": "3368300",
    "end": "3374860"
  },
  {
    "text": "your deposit of coinB. That's the network I'm running\non, I see your transaction, it's in a block. Cool, you've got a balance.",
    "start": "3374860",
    "end": "3381790"
  },
  {
    "text": "And the user says,\nchanged my mind. I'm withdrawing coinB\nand the exchange--",
    "start": "3381790",
    "end": "3387079"
  },
  {
    "text": "so what happens next? The exchange says, sure. Here's coinB. Oh, and coinA, right?",
    "start": "3387080",
    "end": "3393789"
  },
  {
    "text": "The exchange doesn't implement\nany replay protection. They don't know. They don't acknowledge the\nexistence of this other chain.",
    "start": "3393790",
    "end": "3400089"
  },
  {
    "text": "They don't know they\nhave coinA, and they should because they\nactively split but whatever.",
    "start": "3400090",
    "end": "3406580"
  },
  {
    "text": "And then the users like,\ncool I got both, right. I relayed this transaction\nbetween the two networks.",
    "start": "3406580",
    "end": "3412600"
  },
  {
    "text": "I was now able to\ndeposit only coinB and withdraw both\ncoinA and coinB.",
    "start": "3412600",
    "end": "3417940"
  },
  {
    "text": "And now I redeposit-- I split again, I redeposit\ncoinB, and I keep doing that.",
    "start": "3417940",
    "end": "3425760"
  },
  {
    "text": "And so I can drain the\nexchange of all of their coinA with the same\namount of coinB just",
    "start": "3425760",
    "end": "3431730"
  },
  {
    "text": "looping through depositing\nand withdrawing. So, yeah, this happens.",
    "start": "3431730",
    "end": "3437752"
  },
  {
    "text": "Does anyone-- I\nmean, I'm not going to say which exchange was\nsusceptible to this attack.",
    "start": "3437752",
    "end": "3443570"
  },
  {
    "text": "Does anyone know? It shares a name with the\nfirst transaction in the block.",
    "start": "3443570",
    "end": "3448910"
  },
  {
    "text": "Anyway, so yeah, that was\nalmost two years ago, a year",
    "start": "3448910",
    "end": "3454299"
  },
  {
    "text": "and a half ago\nwith the ethereum, ethereum classic hard fork.",
    "start": "3454300",
    "end": "3459550"
  },
  {
    "text": "That happened. So that was-- it happened. I'm not saying, yeah,\nit's not obvious, right?",
    "start": "3459550",
    "end": "3466390"
  },
  {
    "text": "These are some attacks\nthat are like huh. In retrospect, it wasn't\nthat hard to find out.",
    "start": "3466390",
    "end": "3472330"
  },
  {
    "text": "I'm sure the people at the\nexchange were like huh, shoot. Yeah, we probably\nshould've seen that coming, and we lost a couple\nof million bucks.",
    "start": "3472330",
    "end": "3478450"
  },
  {
    "text": "Shoot. It's also weird because all\nof their users like generally",
    "start": "3478450",
    "end": "3484060"
  },
  {
    "text": "are identified, and\nthey have their password or where they live, and\nso you could probably tell like, hey, come\non dude, give it back.",
    "start": "3484060",
    "end": "3494000"
  },
  {
    "text": "But maybe they didn't\nbecause they like, well, tech-- because they might\nhave a program in a way where they could deny it.",
    "start": "3494000",
    "end": "3499150"
  },
  {
    "text": "And say, look, I just deposited\nand withdrew a couple times. That's what I always\ndo, I don't know. ",
    "start": "3499150",
    "end": "3506081"
  },
  {
    "text": "But yeah, there were\ndefinitely warnings. There were there were a\nlot of people saying, hey, this is dangerous.",
    "start": "3506082",
    "end": "3511600"
  },
  {
    "text": "You need to really\nimplement replay protection. If there is a fork without\nreplay protection implemented,",
    "start": "3511600",
    "end": "3518980"
  },
  {
    "text": "the exchanges\nreally need to honor and try to split both before\noffering both for a deposit",
    "start": "3518980",
    "end": "3524110"
  },
  {
    "text": "and withdrawal,\nthings like that. And so there's been a\nlot, last year as well,",
    "start": "3524110",
    "end": "3529630"
  },
  {
    "text": "there's a lot of argument\nbecause in bitcoin, one group of people\nwanted to SegWit2x,",
    "start": "3529630",
    "end": "3537010"
  },
  {
    "text": "was what it was called. And they wanted to\nimplement a hard fork and not implement\nreplay protection.",
    "start": "3537010",
    "end": "3544537"
  },
  {
    "text": "And so that was a big argument\nwhere people were saying, look, if you're going to make a\nhard fork, make it a full fork.",
    "start": "3544537",
    "end": "3550550"
  },
  {
    "text": "Make it implement so that\nyou're going to go off, but also implement replay protection. Make it so that transactions\nthat you guys signed",
    "start": "3550550",
    "end": "3558410"
  },
  {
    "text": "are slightly different\nthan the old way. And it's not too hard to do. What you can do is when\nyou're making a signature,",
    "start": "3558410",
    "end": "3565640"
  },
  {
    "text": "flip some bits. Well, OK. You can't flip bits\nin the signature itself because those\ncan be flipped back,",
    "start": "3565640",
    "end": "3571013"
  },
  {
    "text": "but what you can do is\nyou can like flip a bit or two in the hash\nthat you're signing,",
    "start": "3571013",
    "end": "3576140"
  },
  {
    "text": "and then the old software won't\nbe aware of that flip and say, look, this doesn't look\nlike a valid signature because it's trying to compare\nit against a different message.",
    "start": "3576140",
    "end": "3583700"
  },
  {
    "text": "Or you can like a pen,\nsomething at the end of the message you're\nsigning, things like that. So that on the new network,\nthe signatures look different.",
    "start": "3583700",
    "end": "3592819"
  },
  {
    "text": "And that helps in\nterms of safety because then the old\nsoftware that's ignoring",
    "start": "3592820",
    "end": "3597920"
  },
  {
    "text": "will not inadvertently\nsend transactions. And also for the\nnew network, they",
    "start": "3597920",
    "end": "3603050"
  },
  {
    "text": "will not inadvertently\nsend transactions on the old network. So that's-- and there's a lot of\nideas of opt in versus opt out",
    "start": "3603050",
    "end": "3612740"
  },
  {
    "text": "replay protection, where you can\nlike allow the option to sign differently, but not require it.",
    "start": "3612740",
    "end": "3617900"
  },
  {
    "text": "All sorts of weird\nways you can do it. But yeah, this is a fairly\nrecent mostly last summer,",
    "start": "3617900",
    "end": "3624800"
  },
  {
    "text": "last fall, people were trying\nto do different things. And so in practice-- I think this is the end of it. Let me go two more minutes.",
    "start": "3624800",
    "end": "3632680"
  },
  {
    "text": "But yeah, consensus\nchange is hard. In practice, there's been\nsome full forks recently.",
    "start": "3632680",
    "end": "3638650"
  },
  {
    "text": "The last soft fork was\nSegregated Witness SegWit happened sometime in\nSeptember last year.",
    "start": "3638650",
    "end": "3646840"
  },
  {
    "text": "It was it was a mess, and\nthere was also some full forks. Bitcoin Cash, and then\nlater Bitcoin Gold,",
    "start": "3646840",
    "end": "3652548"
  },
  {
    "text": "which is a lot smaller,\nand they completely changed the proof of work. And now they're a bunch\nthat are like pushing",
    "start": "3652548",
    "end": "3657780"
  },
  {
    "text": "the definition of full\nfork, where they're basically like also called\nairdrops, where it's sort of a completely different\ncoin that just happens to have",
    "start": "3657780",
    "end": "3665770"
  },
  {
    "text": "the UTXO side of the old coin. And so it's like, why even\nbother with the history. We're just like\nlook, it's a new coin",
    "start": "3665770",
    "end": "3671680"
  },
  {
    "text": "that you inherit all\nthese other coins. Yeah, so there's\na bunch of those.",
    "start": "3671680",
    "end": "3679750"
  },
  {
    "text": "It's a mess, it's fun being-- I could not have given\nthis lecture a year ago.",
    "start": "3679750",
    "end": "3685565"
  },
  {
    "text": "A lot of these things\nhad not happened. A lot of these terms\nwere not well defined. A few years ago, the\nidea of soft, hard forks",
    "start": "3685565",
    "end": "3692760"
  },
  {
    "text": "were not even defined. It's pretty clear that Satoshi\nlater, after releasing bitcoin",
    "start": "3692760",
    "end": "3698560"
  },
  {
    "text": "started to understand\nthis system. But in the beginning, there\nwas not a clear understanding.",
    "start": "3698560",
    "end": "3704140"
  },
  {
    "text": "Probably the biggest,\ncontentious software in 2009 was that Satoshi added a 1\nmegabyte block size limit.",
    "start": "3704140",
    "end": "3713020"
  },
  {
    "text": "And to reverse a soft fork,\nis a hard fork, and so this",
    "start": "3713020",
    "end": "3718180"
  },
  {
    "text": "blocks out his hard fork. And then there is a very\nclever way with SegWit to make it a software, but\nalso increase the block",
    "start": "3718180",
    "end": "3725950"
  },
  {
    "text": "size in a weird way that the\nold software wouldn't recognize. I might have to explain a\nlittle SegWit to you next week.",
    "start": "3725950",
    "end": "3734380"
  },
  {
    "text": "OK, so yeah. It's a feature and a bug, right? Consensus changes in these\nsystems can be very difficult.",
    "start": "3734380",
    "end": "3742090"
  },
  {
    "text": "On the one hand, you want\nyour coins to stay put. You don't want your\nmoney to change. You want to be able to\njust have a bunch of money,",
    "start": "3742090",
    "end": "3748390"
  },
  {
    "text": "and a year later, you still\nhave a bunch of money, and that's what you want to do.",
    "start": "3748390",
    "end": "3753470"
  },
  {
    "text": "On the other hand,\nnew features are cool. And these are not-- you don't want these to be\nossified legacy systems,",
    "start": "3753470",
    "end": "3761020"
  },
  {
    "text": "you want this to be like\nnew, cool technology and you go make all\nthese new cool things.",
    "start": "3761020",
    "end": "3766210"
  },
  {
    "text": "And make it faster,\nand better, stronger. And the role of miners is also a\nbig point of contention, right?",
    "start": "3766210",
    "end": "3771610"
  },
  {
    "text": "They seem to have outsize\ninfluence in some ways, right? Up here is the mining power\nand how that affects things.",
    "start": "3771610",
    "end": "3780310"
  },
  {
    "text": "And why should these miners\nhave outsize influence? Shouldn't the users\nthemselves be able to vote?",
    "start": "3780310",
    "end": "3785333"
  },
  {
    "text": "But they can't, right? If the users could\nvote, maybe you wouldn't need mining at\nall to verify block chain.",
    "start": "3785333",
    "end": "3791560"
  },
  {
    "text": "So there will continue\nto be a lot of debate on this stuff going\ninto the future.",
    "start": "3791560",
    "end": "3796690"
  },
  {
    "text": "I hope this helped explain\nthe general thinking as of early 2018, but\nit'll probably change.",
    "start": "3796690",
    "end": "3804170"
  },
  {
    "text": "Cool. Any other questions\nabout this whole thing? If you have a light--\nlike I don't know,",
    "start": "3804170",
    "end": "3810500"
  },
  {
    "text": "James helps develop\nVertcoin, right? Are hard forks and soft\nforks difficult in Vertcoin?",
    "start": "3810500",
    "end": "3816690"
  },
  {
    "text": "No, you're like, hey,\nwe're doing a hard fork. AUDIENCE: [INAUDIBLE]\nthe [? exchanges ?]",
    "start": "3816690",
    "end": "3823500"
  },
  {
    "text": "PROFESSOR: Yeah. So in smaller communities,\nsmaller coins, where there's not as many people\ninvolved and people are all",
    "start": "3823500",
    "end": "3829010"
  },
  {
    "text": "on the same page, these changes\ncan be made fairly regularly, not a huge deal.",
    "start": "3829010",
    "end": "3834619"
  },
  {
    "text": "Bitcoin is very messy. Bitcoin everyone\nhates each other, they're always\ntrolling each other on the internet and\nhacking each other,",
    "start": "3834620",
    "end": "3840080"
  },
  {
    "text": "death threats, all\nsorts of stuff. So yeah, future forking\nmethods-- there's probably new, cool ways you can\nadd to the bottom of that chart",
    "start": "3840080",
    "end": "3847150"
  },
  {
    "text": "some new idea that\nmaybe works better. So stay tuned.",
    "start": "3847150",
    "end": "3852989"
  },
  {
    "start": "3852989",
    "end": "3853489"
  }
]