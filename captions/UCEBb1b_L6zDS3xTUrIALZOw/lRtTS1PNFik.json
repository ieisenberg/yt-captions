[
  {
    "text": "[SQUEAKING]\n[RUSTLING] [CLICKING]",
    "start": "0",
    "end": "9160"
  },
  {
    "text": "DAVID PERREAULT: We started\ntalking about modeling of control systems. And really, what\nwe want to do is",
    "start": "9160",
    "end": "17680"
  },
  {
    "text": "have some model for the\ndynamics of a DC/DC converter. And the example converter\nthat we've been using",
    "start": "17680",
    "end": "29080"
  },
  {
    "text": "is a boost converter. So here's our example\nboost converter. I might have some input\nvoltage that I'll call u.",
    "start": "29080",
    "end": "37900"
  },
  {
    "text": "I have some switch that I'm\nmodulating with q of t, diode,",
    "start": "37900",
    "end": "44620"
  },
  {
    "text": "and then some output voltage. I'll call the output voltage V.",
    "start": "44620",
    "end": "50500"
  },
  {
    "text": "And in this case, maybe I'll\nsay, this is one state variable.",
    "start": "50500",
    "end": "56060"
  },
  {
    "text": "V is one state variable, which\nis the capacitor voltage. And the other state\nvariable in the system",
    "start": "56060",
    "end": "61600"
  },
  {
    "text": "is the inductor current. And state variables\nare those variables that carry information\nabout their history.",
    "start": "61600",
    "end": "67930"
  },
  {
    "text": "You can't instantly\nchange a capacitor voltage without an infinite current. You can't instantly\nchange an inductor current",
    "start": "67930",
    "end": "73790"
  },
  {
    "text": "without an infinite voltage. So if you know what the\ninductor current or capacitor",
    "start": "73790",
    "end": "78829"
  },
  {
    "text": "voltage are at\none time, you know what it's going to do because\nthat's what carries history",
    "start": "78830",
    "end": "85520"
  },
  {
    "text": "around with it in any system. So it's the energy\nstorage elements. And we said we figured out,\nfor this boost converter,",
    "start": "85520",
    "end": "94590"
  },
  {
    "text": "if I define q of t is\nthe modulating function, it switches between\n0 and 1 for q of t.",
    "start": "94590",
    "end": "106490"
  },
  {
    "text": "And then if I have q prime of\nt is equal to 1 minus q of t,",
    "start": "106490",
    "end": "114530"
  },
  {
    "text": "if I'm modulating this at a\nconstant duty ratio, q of t goes on and off,\nand I let this thing",
    "start": "114530",
    "end": "121490"
  },
  {
    "text": "settle into periodic steady\nstate, what we get is NPSS.",
    "start": "121490",
    "end": "127430"
  },
  {
    "text": "We get V, the output voltage,\nthe DC output voltage",
    "start": "127430",
    "end": "134750"
  },
  {
    "text": "is going to be the DC input\nvoltage divided by 1 minus D. And I'm using capital letters\nhere to indicate these",
    "start": "134750",
    "end": "140900"
  },
  {
    "text": "are all periodic\nsteady state values. But we said, if I were, for\nexample, to suddenly change",
    "start": "140900",
    "end": "148250"
  },
  {
    "text": "the load resistance, then even\nif I was operating at fixed duty",
    "start": "148250",
    "end": "154110"
  },
  {
    "text": "ratio, eventually I would have\nto go through some transient because, to supply a lower\nresistance, I need more current,",
    "start": "154110",
    "end": "161129"
  },
  {
    "text": "more power. I can have more\ncurrent from the input. Something has to change. It has to go through\nsome transient.",
    "start": "161130",
    "end": "167310"
  },
  {
    "text": "What we have here on the scope-- or what we have here is\nactually a boost converter",
    "start": "167310",
    "end": "172800"
  },
  {
    "text": "run at fixed duty ratio. And what I'm going to\ndo is I'm going to set this thing to single sequence.",
    "start": "172800",
    "end": "179440"
  },
  {
    "text": "And what I have is--\non the yellow channel, I have the inductor current,\njust directly coupled.",
    "start": "179440",
    "end": "184900"
  },
  {
    "text": "And on the purple channel, what\nI have is the output voltage, but AC coupled.",
    "start": "184900",
    "end": "190465"
  },
  {
    "text": "So I'm just going to look at\nthe deviations of the ripple in the AC voltage. And all I'm going to do\nis press this button.",
    "start": "190465",
    "end": "196710"
  },
  {
    "text": "And that's going to add a\nload onto the converter. So it's going to make\nthe load current higher",
    "start": "196710",
    "end": "203250"
  },
  {
    "text": "or the load resistance smaller. And here we go.",
    "start": "203250",
    "end": "208374"
  },
  {
    "text": "Oh, It didn't capture. Let's see. I don't know why that is.",
    "start": "208374",
    "end": "214558"
  },
  {
    "text": "Oh, it would help if I actually\ncoupled the output voltage. ",
    "start": "214558",
    "end": "220740"
  },
  {
    "text": "It seems to have-- oh,\nset this, set the minimum. I don't know why. All right, let me\ntry that again.",
    "start": "220740",
    "end": "226410"
  },
  {
    "text": "There we go. So what we can see here is that\nthe current goes from some value",
    "start": "226410",
    "end": "234209"
  },
  {
    "text": "and settles out to\nsome higher value. The voltage goes through\nsome oscillation,",
    "start": "234210",
    "end": "239910"
  },
  {
    "text": "and then settles out\nto some later voltage. And the truth of the matter\nis we're not actually",
    "start": "239910",
    "end": "245129"
  },
  {
    "text": "seeing the full transient here. Let me do this, try\nthis one more time.",
    "start": "245130",
    "end": "256275"
  },
  {
    "start": "256275",
    "end": "264620"
  },
  {
    "text": "Ah, there we see it\na little bit better, except that actually\nwhat I triggered on was the step down in current.",
    "start": "264620",
    "end": "272096"
  },
  {
    "text": "In any event, what\nwe see is some kind of second order response. Superimposed on top of\nit is a ton of switching.",
    "start": "272096",
    "end": "280099"
  },
  {
    "text": "This is going through\nthousands and thousands of switching cycles. And what we would like\nto do is some model",
    "start": "280100",
    "end": "287450"
  },
  {
    "text": "that captures this low\nfrequency variation, but isn't worrying about\nthe instantaneous switching of what's going on\nin steady state.",
    "start": "287450",
    "end": "295710"
  },
  {
    "text": "So I'm going to hide\nthis, put this up. So last time, we said, well, how\ncan we capture the low frequency",
    "start": "295710",
    "end": "307580"
  },
  {
    "text": "content in i, l, and\nv without worrying about the high\nfrequency content? ",
    "start": "307580",
    "end": "324020"
  },
  {
    "text": "We defined an operator\nthat we called the local average operator. ",
    "start": "324020",
    "end": "333530"
  },
  {
    "text": "And this is x-bar of t is equal\nto 1 over t, the integral from t",
    "start": "333530",
    "end": "340010"
  },
  {
    "text": "to minus capital T up\nto t of x of tau d tau.",
    "start": "340010",
    "end": "345290"
  },
  {
    "text": "So basically, if I\napply this local average to any waveform, a voltage, or a\ncurrent or something like that,",
    "start": "345290",
    "end": "351680"
  },
  {
    "text": "I'm going to look back over one\ncapital period T, one switching cycle, and take the average\nover that switching cycle,",
    "start": "351680",
    "end": "358690"
  },
  {
    "text": "so that if I have a\nbunch of up and down within a switching cycle,\nthat gets filtered out. But if over time that voltage\nor current moves up and down,",
    "start": "358690",
    "end": "368000"
  },
  {
    "text": "it captures the slow\nfrequency up and down while suppressing the switching\nripple and its harmonics.",
    "start": "368000",
    "end": "374780"
  },
  {
    "text": "And we said this operator\nhas a bunch of properties that are interesting.",
    "start": "374780",
    "end": "379930"
  },
  {
    "text": "One is it's linear. Two is it's time-invariant.",
    "start": "379930",
    "end": "387600"
  },
  {
    "text": "That means this thing\nis an LTI operator. That means we can write a\ntransfer function for it.",
    "start": "387600",
    "end": "394320"
  },
  {
    "text": "It's just a linear filter. And we looked at that\ntransfer function last time. And it, indeed, passes\nlow frequency components",
    "start": "394320",
    "end": "400770"
  },
  {
    "text": "and suppresses the\nswitching frequency. A third property\nthat we discussed",
    "start": "400770",
    "end": "406620"
  },
  {
    "text": "is the so-called\ndifferentiation property,",
    "start": "406620",
    "end": "413370"
  },
  {
    "text": "which says that if I took\ndx some signal dx of t dt",
    "start": "413370",
    "end": "418830"
  },
  {
    "text": "and then took its local\naverage, that ends up being equal to d/dt of x-bar of t.",
    "start": "418830",
    "end": "427990"
  },
  {
    "text": "So taking the local\naverage of a derivative is the same thing as the\nderivative of the local average.",
    "start": "427990",
    "end": "435190"
  },
  {
    "text": "The last property is we\nsaid we can approximate x of t y of t local\naverage of the product",
    "start": "435190",
    "end": "445840"
  },
  {
    "text": "as being approximately equal\nto x-bar of t times y-bar of t",
    "start": "445840",
    "end": "452830"
  },
  {
    "text": "if one of x and y have,\nfirst of all, small ripple,",
    "start": "452830",
    "end": "463740"
  },
  {
    "text": "meaning it's not changing\nfull scale within a cycle, and, two, slow\nvariation, meaning it",
    "start": "463740",
    "end": "476940"
  },
  {
    "text": "only changes gradually\nfrom cycle to cycle. And actually, you can relax this\nformer case in some instances.",
    "start": "476940",
    "end": "487470"
  },
  {
    "text": "But we saw that it\ndoesn't always work. But if one of x and y was,\nsay, an inductor current",
    "start": "487470",
    "end": "493710"
  },
  {
    "text": "or a capacitor\nvoltage, where we do expect there to be small\nripple on top of a big DC,",
    "start": "493710",
    "end": "498990"
  },
  {
    "text": "we can do that. ",
    "start": "498990",
    "end": "506760"
  },
  {
    "text": "Last time, we used this And\nwe applied this to a circuit. So we said, we could take\nthe boost converter circuit,",
    "start": "506760",
    "end": "513450"
  },
  {
    "text": "and play some games, and\ncome up with a new circuit in which all of the circuit\nvariables were averaged.",
    "start": "513450",
    "end": "520270"
  },
  {
    "text": "And so it gets rid\nof all the switching, but it carries the low frequency\nbehavior of the circuit.",
    "start": "520270",
    "end": "525870"
  },
  {
    "text": "And that's one way to do things. And people do it, the so-called\ndirect circuit averaging, all the time.",
    "start": "525870",
    "end": "531170"
  },
  {
    "text": "What I'd like to do\ntoday is to show you another way we can use this\nlocal average operator.",
    "start": "531170",
    "end": "536880"
  },
  {
    "text": "And it's essentially\nthe same idea. It's just implemented\nin a different way.",
    "start": "536880",
    "end": "543680"
  },
  {
    "text": "Some people like one method\nof thinking about it. Some people like the other\nmethod of thinking about it. Frankly, when I'm\ndoing a new converter,",
    "start": "543680",
    "end": "550320"
  },
  {
    "text": "I usually do the method I'm\ngoing to show you today, but I like them equally. It's just the question of\nwhat's more convenient to do.",
    "start": "550320",
    "end": "557320"
  },
  {
    "text": "And the technique\nI'm going to show you today is called state\nspace averaging. And here's the idea.",
    "start": "557320",
    "end": "563170"
  },
  {
    "text": "Suppose I wanted to know the-- ",
    "start": "563170",
    "end": "569640"
  },
  {
    "text": "suppose I wanted to know\nthe dynamics of this circuit about how it behaved.",
    "start": "569640",
    "end": "574800"
  },
  {
    "text": "Well, I could say, write a\nset of differential equations for that circuit that would\ndescribe its behavior in time.",
    "start": "574800",
    "end": "581890"
  },
  {
    "text": "And keep in mind that\nthis circuit really has two subcircuits.",
    "start": "581890",
    "end": "587290"
  },
  {
    "text": "When q of t is equal\nto 1, the switch is on.",
    "start": "587290",
    "end": "592339"
  },
  {
    "text": "So I could think about\nthis circuit as being this. ",
    "start": "592340",
    "end": "610620"
  },
  {
    "text": "So the switch is on. This is a linear circuit\nthat models that behavior.",
    "start": "610620",
    "end": "617920"
  },
  {
    "text": "If q of t is equal\nto 0, I can then",
    "start": "617920",
    "end": "623230"
  },
  {
    "text": "say the circuit really\nlooks like this. ",
    "start": "623230",
    "end": "640761"
  },
  {
    "text": "So I could then write a\ndifferential equation, a linear differential\nequation, because these",
    "start": "640761",
    "end": "649050"
  },
  {
    "text": "are all linear elements plus an\ninput, when it's in this state.",
    "start": "649050",
    "end": "655600"
  },
  {
    "text": "And I could write a different\ndifferential equation when it's in this state. And if I just use the right\nset of differential equations",
    "start": "655600",
    "end": "662640"
  },
  {
    "text": "in each substate, I\ncan get the behavior. So let me just write this down.",
    "start": "662640",
    "end": "667890"
  },
  {
    "text": "And I'm going to show that\nwe can use this switching function, q of t, where q of\nt varies between 1 and 0--",
    "start": "667890",
    "end": "675704"
  },
  {
    "text": " I'm sorry, this is 1.",
    "start": "675705",
    "end": "681214"
  },
  {
    "text": " We can use this\nswitching function to build up a\ndifferential equation that",
    "start": "681215",
    "end": "687930"
  },
  {
    "text": "captures our system. So here's what I would\nargue we could do. We can say, what does\nthe diL/dt look like?",
    "start": "687930",
    "end": "697780"
  },
  {
    "text": "diL/dt would simply be the\nvoltage across the inductor.",
    "start": "697780",
    "end": "703300"
  },
  {
    "text": "In this state, It would just\nbe equal to 1 over L times u.",
    "start": "703300",
    "end": "710950"
  },
  {
    "text": "And that's true when\nq of t is equal to 1. So I can multiply it by q of t.",
    "start": "710950",
    "end": "716110"
  },
  {
    "text": "When q of t is equal to 0 and\n1 minus q of t is equal to 1, diL/dt is equal to u\nminus v. So I could say,",
    "start": "716110",
    "end": "724810"
  },
  {
    "text": "this is plus u minus-- this is plus 1 over L u\nminus v times 1 minus q of t.",
    "start": "724810",
    "end": "733470"
  },
  {
    "text": " So basically, when q\nof t is equal to 1,",
    "start": "733470",
    "end": "741339"
  },
  {
    "text": "this term, diL/dt,\nis 1 over L u. So it matches the top circuit.",
    "start": "741340",
    "end": "747970"
  },
  {
    "text": "And this term is gone\nbecause 1 minus q of t is 0. And this term just disappears.",
    "start": "747970",
    "end": "753850"
  },
  {
    "text": "When q of t is equal to\n0, this term disappears. And this factor becomes 1.",
    "start": "753850",
    "end": "759870"
  },
  {
    "text": "And I just have 1\nover L u minus v. So whether I'm in this switch\nstate or this switch state,",
    "start": "759870",
    "end": "765779"
  },
  {
    "text": "this differential equation\ncaptures the dynamics of that inductor current.",
    "start": "765780",
    "end": "772040"
  },
  {
    "text": "Does that make\nsense to everybody? I can do the same\nthing for the voltage. I can get dv/dt is equal\nto 1 over C times--",
    "start": "772040",
    "end": "783800"
  },
  {
    "text": "this would be minus v\nover r times that, minus 1 over RC times q of t plus\n1 over C i sub L minus v",
    "start": "783800",
    "end": "799189"
  },
  {
    "text": "over R 1 minus q of t. ",
    "start": "799190",
    "end": "806810"
  },
  {
    "text": "So in fact, if I\ncame up and I told you the starting state of\nvoltage and current, inductor",
    "start": "806810",
    "end": "812790"
  },
  {
    "text": "voltage, capacitor voltage,\nand inductor current, and I told you the\nq of t over time, I could basically\nnumerically integrate",
    "start": "812790",
    "end": "820529"
  },
  {
    "text": "this pair of\ndifferential equations and predict the\ntrajectory, including all of the switching\nand everything else.",
    "start": "820530",
    "end": "827430"
  },
  {
    "text": "Does that make\nsense to everybody? Any questions about that? ",
    "start": "827430",
    "end": "834470"
  },
  {
    "text": "So this is actually\na simulation model of this converter in\ncontinuous conduction mode,",
    "start": "834470",
    "end": "843950"
  },
  {
    "text": "including dynamics. This is a pair of differential\nequations, switched differential",
    "start": "843950",
    "end": "849680"
  },
  {
    "text": "equations that capture it. Well, I could take\nmy averaging operator",
    "start": "849680",
    "end": "854839"
  },
  {
    "text": "and apply it to the\ndifferential equations as well. I could apply it to each side.",
    "start": "854840",
    "end": "861650"
  },
  {
    "text": "All I would be doing is\nwalking up and saying, OK, let me local\naverage each side.",
    "start": "861650",
    "end": "868110"
  },
  {
    "text": "So I'll put a local average\non the left side of this. And then the local average\nof these sums of terms",
    "start": "868110",
    "end": "873410"
  },
  {
    "text": "is just the sum of\nthe local averages. So I can do this. And I can do this.",
    "start": "873410",
    "end": "878460"
  },
  {
    "text": "And by the way, the\nscaling constants can come out of\nthe local averages. So that's OK.",
    "start": "878460",
    "end": "884840"
  },
  {
    "text": "And I can do this. And I can do this. And then I can do this,\nlocal average of all this.",
    "start": "884840",
    "end": "892480"
  },
  {
    "text": "So all I did was I walked up\nand I applied that operator to each side of the equation.",
    "start": "892480",
    "end": "898950"
  },
  {
    "text": "Well, now, I can rewrite this. And I can apply some of the\nproperties of the local average.",
    "start": "898950",
    "end": "910680"
  },
  {
    "text": "First of all, the local\naverage of the derivative is just the derivative\nof the local averages. So I can write this as di\nL-bar/dt Then this would be 1",
    "start": "910680",
    "end": "922670"
  },
  {
    "text": "over L times the\nlocal average of u.",
    "start": "922670",
    "end": "928850"
  },
  {
    "text": "And let me rearrange\nthis, actually. I have u times q plus\nu times 1 minus q.",
    "start": "928850",
    "end": "934339"
  },
  {
    "text": "So this would just be\n1 over L times u-bar. ",
    "start": "934340",
    "end": "939890"
  },
  {
    "text": "Then I have minus\n1 over L or plus--",
    "start": "939890",
    "end": "945260"
  },
  {
    "text": "minus 1 over L the local\naverage of v times 1 minus q.",
    "start": "945260",
    "end": "953155"
  },
  {
    "text": " Does that make sense, everybody?",
    "start": "953155",
    "end": "960320"
  },
  {
    "text": "So all I did was rearrange this. I put up the q and\n1 minus q terms so that the u term doesn't\nhave q in it anymore.",
    "start": "960320",
    "end": "968000"
  },
  {
    "text": "And then it's just minus\n1 over Lv times 1 minus q. And I took the local\naverage of that. I could then do the same thing\nwith the bottom equation.",
    "start": "968000",
    "end": "975660"
  },
  {
    "text": "I can get dv-bar/dt, because\nI'm using the differentiation property, is equal to--",
    "start": "975660",
    "end": "981230"
  },
  {
    "text": "the v over RC term\nagain goes up. So this is minus 1\nover RC times v-bar",
    "start": "981230",
    "end": "988700"
  },
  {
    "text": "plus 1 over c times the local\naverage of iL times 1 minus q.",
    "start": "988700",
    "end": "998120"
  },
  {
    "text": " Everybody down with that?",
    "start": "998120",
    "end": "1004270"
  },
  {
    "text": "Now, let me define\nq-prime is 1 minus q.",
    "start": "1004270",
    "end": "1011680"
  },
  {
    "text": "Let me define d is equal to\nthe local average of q of t.",
    "start": "1011680",
    "end": "1021500"
  },
  {
    "text": "If I'm modulating along in\na cycle, in any given cycle, the local average of q of t is\nthe duty ratio in that cycle,",
    "start": "1021500",
    "end": "1030530"
  },
  {
    "text": "neglecting small shifts in time. But this is everything slowly\nvarying with respect to a cycle.",
    "start": "1030530",
    "end": "1036500"
  },
  {
    "text": "That would mean\nthat d-prime, which",
    "start": "1036500",
    "end": "1041810"
  },
  {
    "text": "is the complement\nof the duty ratio, is equal to 1 minus\nq local average.",
    "start": "1041810",
    "end": "1051090"
  },
  {
    "text": "Or it's equal to\nq-prime local average. So if I apply that, and\nthen what I'm going to do",
    "start": "1051090",
    "end": "1059040"
  },
  {
    "text": "is I'm going to say, OK, I\ncan make this approximately",
    "start": "1059040",
    "end": "1065130"
  },
  {
    "text": "equal to 1 over Lu-bar.",
    "start": "1065130",
    "end": "1073410"
  },
  {
    "text": "Then I can make this\napproximately equal. If I know that xy-bar\nis approximately",
    "start": "1073410",
    "end": "1079710"
  },
  {
    "text": "equal to x-bar\ny-bar if one of them has slow ripple and\nsmall variation-- well, iL does and v does because\nthis is a capacitor voltage",
    "start": "1079710",
    "end": "1088559"
  },
  {
    "text": "and inductor current. So this would be minus\n1 over L v-bar d-prime.",
    "start": "1088560",
    "end": "1098130"
  },
  {
    "text": "And this is\napproximately minus 1 over RC v-bar plus 1\nover c iL-bar d-prime.",
    "start": "1098130",
    "end": "1114210"
  },
  {
    "text": "So this becomes a set of\npartial differential equations. Maybe I should\njust rewrite this.",
    "start": "1114210",
    "end": "1119440"
  },
  {
    "text": "This is the diL-bar/dt. And this is equal to dv-bar/dt.",
    "start": "1119440",
    "end": "1126270"
  },
  {
    "text": "Now, I have a set of state\nspace averaged equations.",
    "start": "1126270",
    "end": "1134130"
  },
  {
    "text": "And notice that there's\nno switching left in here. There's no q of t\nbopping up and down and turning switches on and off.",
    "start": "1134130",
    "end": "1140320"
  },
  {
    "text": "This is just in\nterms of whatever my duty ratio is going to be\ntells me how this evolves.",
    "start": "1140320",
    "end": "1146630"
  },
  {
    "text": "So if I knew how the\ncommanded duty ratio varied, I would know how the local\naverages of i and l, iL,",
    "start": "1146630",
    "end": "1154180"
  },
  {
    "text": "and v would vary. Any questions about that? ",
    "start": "1154180",
    "end": "1162000"
  },
  {
    "text": "So how would I use this thing? I could come up and say, all\nright, I had my converter here.",
    "start": "1162000",
    "end": "1170639"
  },
  {
    "text": "What I really wanted\nto do is say, OK, I have some reference\nvoltage, v-ref. ",
    "start": "1170640",
    "end": "1178850"
  },
  {
    "text": "And I compared that to-- in this case, I'm going to say\nit's a local average version",
    "start": "1178850",
    "end": "1185960"
  },
  {
    "text": "of the output voltage, v-bar. And I'm going to generate\nsome v-error bar.",
    "start": "1185960",
    "end": "1193039"
  },
  {
    "text": "OK I'm going to run that\ninto some compensator. ",
    "start": "1193040",
    "end": "1200360"
  },
  {
    "text": "That could be gc of s. Think of this as, for example,\na lead lag controller, or a PID",
    "start": "1200360",
    "end": "1207289"
  },
  {
    "text": "controller, or something\nlike that, something that has high gain so that it's\ngoing to amplify the error.",
    "start": "1207290",
    "end": "1215640"
  },
  {
    "text": "And out of this comes some\nsignal that I'm going to call d, the duty ratio I want.",
    "start": "1215640",
    "end": "1221310"
  },
  {
    "text": "Now, that might be some voltage\nrepresenting the duty ratio or current representing\nthe duty ratio on an actual implementation.",
    "start": "1221310",
    "end": "1227160"
  },
  {
    "text": "But from a theoretical\nperspective, the output of this compensator\nis just the duty ratio I want. I need to stick\nthis into the plant.",
    "start": "1227160",
    "end": "1234355"
  },
  {
    "text": " That's what a control\nperson would call it.",
    "start": "1234355",
    "end": "1239750"
  },
  {
    "text": "We'd call it the converter.  And of course, it has\nanother input, which is,",
    "start": "1239750",
    "end": "1247780"
  },
  {
    "text": "in this case, u, or u-bar. And out of this thing,\nout of this model would come iL-bar and v-bar.",
    "start": "1247780",
    "end": "1254860"
  },
  {
    "text": " And so what I needed was a\ndynamic model for this thing.",
    "start": "1254860",
    "end": "1261950"
  },
  {
    "text": "Well, guess what? Here is a differential\nequation model",
    "start": "1261950",
    "end": "1268150"
  },
  {
    "text": "for the behavior\nof the converter. And I could just stick\nthis inside of here.",
    "start": "1268150",
    "end": "1274250"
  },
  {
    "text": "And this is saying, if I put\nin d, what happens to iL and v? And this model is my dynamics.",
    "start": "1274250",
    "end": "1279693"
  },
  {
    "text": " Any questions about that?",
    "start": "1279693",
    "end": "1286179"
  },
  {
    "text": "No switching involved.  Now, I should have noted, last\ntime, we drew a circuit model.",
    "start": "1286180",
    "end": "1298240"
  },
  {
    "text": "We didn't put a pair state\nspace equation in here. We actually had a circuit model. What was that circuit\nmodel from last time?",
    "start": "1298240",
    "end": "1304902"
  },
  {
    "text": "It really looked like this. It had u-bar iL-bar.",
    "start": "1304902",
    "end": "1312700"
  },
  {
    "text": " It had a voltage\nsource here, which",
    "start": "1312700",
    "end": "1320050"
  },
  {
    "text": "was d-prime v-bar and a\ndependent current source,",
    "start": "1320050",
    "end": "1325990"
  },
  {
    "text": "which was d-prime iL-bar. And then it had v-bar here.",
    "start": "1325990",
    "end": "1337420"
  },
  {
    "text": "If you write the\ndifferential equation for this circuit,\nthis nonlinear circuit that we got by\ncircuit averaging,",
    "start": "1337420",
    "end": "1344590"
  },
  {
    "text": "it will give you exactly this\nset of differential equations.",
    "start": "1344590",
    "end": "1349750"
  },
  {
    "text": "diL/dt is u. L diL/dt is u-bar\nminus d-prime v-bar.",
    "start": "1349750",
    "end": "1355720"
  },
  {
    "text": "That's exactly this equation.  So I can describe it\nwith circuit averaging.",
    "start": "1355720",
    "end": "1364265"
  },
  {
    "text": "I can describe it with\nstate space averaging. This just gives me\nthe equation for it so I can go back and forth\nbetween the two as I want.",
    "start": "1364265",
    "end": "1371860"
  },
  {
    "text": "They both work. There are other\ncircuit models that represent the same differential\nequations, of course. You can do things\ndifferent ways.",
    "start": "1371860",
    "end": "1378340"
  },
  {
    "text": "But the underlying dynamics\nwill always be the same, if you apply averaging.",
    "start": "1378340",
    "end": "1383344"
  },
  {
    "text": "Any questions about that? ",
    "start": "1383344",
    "end": "1389630"
  },
  {
    "text": "Now, what is the headache\nof this approach? Or it's not a headache. It's nothing to do\nwith the approach.",
    "start": "1389630",
    "end": "1395640"
  },
  {
    "text": "I shouldn't say-- this\nis a fundamental-- this is a fundamental\nproperty of the system,",
    "start": "1395640",
    "end": "1404840"
  },
  {
    "text": "is that this is a nonlinear\ncircuit and this is a nonlinear differential equations.",
    "start": "1404840",
    "end": "1410260"
  },
  {
    "text": "Why? Because I have a product\nbetween my state variable, my output voltage, and my\ncontrol input, the duty ratio.",
    "start": "1410260",
    "end": "1418320"
  },
  {
    "text": "And likewise, I have a--\nor 1 minus the duty ratio. And here, I have a product\nbetween my other state variable",
    "start": "1418320",
    "end": "1423980"
  },
  {
    "text": "and 1 minus the duty ratio. And that makes this\nsystem nonlinear. ",
    "start": "1423980",
    "end": "1433130"
  },
  {
    "text": "Why do I care? Why is that a pain in the butt? Well, what would I like to do? If I go back to standard\ncontrol theory, what I'd really",
    "start": "1433130",
    "end": "1439389"
  },
  {
    "text": "like is perhaps some kind of\ntransfer function that says, if I change the duty ratio,\nwhat does the output voltage do?",
    "start": "1439390",
    "end": "1445789"
  },
  {
    "text": "Because if I'm going\nto write everything in terms of a transfer function,\nI can apply linear control",
    "start": "1445790",
    "end": "1452320"
  },
  {
    "text": "theory and life is good. How do I usually get\nthe transfer function?",
    "start": "1452320",
    "end": "1457519"
  },
  {
    "text": "I take the Laplace transform\nof this stuff, which converts this\ndifferential equation",
    "start": "1457520",
    "end": "1463090"
  },
  {
    "text": "into an algebraic equation. diL/dt becomes just S iL, where\nS is just the Laplace variable.",
    "start": "1463090",
    "end": "1469540"
  },
  {
    "text": "But this is kind of a pain\nin the ass in this equation. Why? ",
    "start": "1469540",
    "end": "1476070"
  },
  {
    "text": "Taking the Laplace of a product. ",
    "start": "1476070",
    "end": "1481810"
  },
  {
    "text": "Anybody recall what you\nhave to do when you take the product with a Laplace?",
    "start": "1481810",
    "end": "1487280"
  },
  {
    "text": "You end up with a convolution. And that's not very pretty. So I can't just write a\ntransfer function for this.",
    "start": "1487280",
    "end": "1495649"
  },
  {
    "text": "I can't boil this thing down\ninto a transfer function because this Laplace of\nthe product is a problem.",
    "start": "1495650",
    "end": "1503659"
  },
  {
    "text": "So the question\nis, what can I do? And the answer\nis, it's nonlinear",
    "start": "1503660",
    "end": "1511190"
  },
  {
    "text": "and it has nonlinear dynamics,\nmeaning it truly is not linear. That's the way it is.",
    "start": "1511190",
    "end": "1517280"
  },
  {
    "text": "But we could find out what\nit does for small variations. In fact, in my original\nexample, I just showed you",
    "start": "1517280",
    "end": "1525320"
  },
  {
    "text": "the output voltage. And I did this little\nbump, but it was around 0. That's because I\nwas AC coupling it.",
    "start": "1525320",
    "end": "1531090"
  },
  {
    "text": "I was showing you the\ndeviation in the output voltage from its steady state value.",
    "start": "1531090",
    "end": "1537000"
  },
  {
    "text": "And what I can go\ndo is I can say, OK, if I believe my converter\nis going to be operating",
    "start": "1537000",
    "end": "1542850"
  },
  {
    "text": "in periodic steady\nstate somewhere, and then I put in a small\nperturbation away from that",
    "start": "1542850",
    "end": "1547920"
  },
  {
    "text": "steady state-- in other words,\nmaybe I step my reference voltage just a tiny bit--",
    "start": "1547920",
    "end": "1554260"
  },
  {
    "text": "it should respond. And the dynamics are nonlinear. But for small variations,\nthey're pretty close to linear.",
    "start": "1554260",
    "end": "1564080"
  },
  {
    "text": "So what I might do is\nI might go and say, all right, suppose that all\nof my variables in my system,",
    "start": "1564080",
    "end": "1575020"
  },
  {
    "text": "x of t, was equal\nto some DC value,",
    "start": "1575020",
    "end": "1584820"
  },
  {
    "text": "sometimes called the\nbias or the steady state, plus some AC variation,\nsmall variation.",
    "start": "1584820",
    "end": "1593786"
  },
  {
    "text": " And then I could express, well,\nthe small variations are simply",
    "start": "1593786",
    "end": "1603030"
  },
  {
    "text": "the total variable minus-- it's the deviation of the total\nvariable from the steady state",
    "start": "1603030",
    "end": "1609269"
  },
  {
    "text": "operating point. And what I can go\ndo is I can express",
    "start": "1609270",
    "end": "1615240"
  },
  {
    "text": "all my variables that way. I can say, OK, u is equal to\nsome DC value plus any variation",
    "start": "1615240",
    "end": "1622680"
  },
  {
    "text": "I put on the input voltage. v is equal to some DC voltage\nplus some small variation, where",
    "start": "1622680",
    "end": "1630270"
  },
  {
    "text": "this is the\ndeviation away from-- this is the AC-coupled\nversion, essentially.",
    "start": "1630270",
    "end": "1637650"
  },
  {
    "text": "iL is equal to some\nDC iL plus some iL tilde, some small\nvariation, et cetera.",
    "start": "1637650",
    "end": "1645030"
  },
  {
    "text": "And what can we\nsay mathematically? Suppose I had some nonlinear\ndifferential equation, dx/dt,",
    "start": "1645030",
    "end": "1657390"
  },
  {
    "text": "where x is some variable or\nsome vector of variables-- and this is a vector\nof equations--",
    "start": "1657390",
    "end": "1663480"
  },
  {
    "text": "is equal to some function of\nthe state variables, the inputs,",
    "start": "1663480",
    "end": "1672000"
  },
  {
    "text": "and could be a\nfunction of time, too. So this is some arbitrarily\nnonlinear differential equation.",
    "start": "1672000",
    "end": "1679948"
  },
  {
    "text": "It could be a vector\ndifferential equation, like this has two\nstate variables. So x could be a vector of\nstate variables, in general.",
    "start": "1679948",
    "end": "1686539"
  },
  {
    "text": "And I could have a\nvector of inputs, r. And suppose I had this and I\nhad some steady state operating",
    "start": "1686540",
    "end": "1693310"
  },
  {
    "text": "point. I have f of x and capital\nR and t is equal to 0.",
    "start": "1693310",
    "end": "1702560"
  },
  {
    "text": "This is an operating point. This is a nonlinear\ndiffy q, or system",
    "start": "1702560",
    "end": "1713960"
  },
  {
    "text": "of differential equations.  Why is this an operating point?",
    "start": "1713960",
    "end": "1720559"
  },
  {
    "text": "Because what I'm saying\nis, if I put f of capital x and capital r\nin here, I get 0,",
    "start": "1720560",
    "end": "1727400"
  },
  {
    "text": "which means dx/dt is 0, which\nmeans it's not going anywhere. It sits there. So this equation is precisely\ndefining some operating point",
    "start": "1727400",
    "end": "1736820"
  },
  {
    "text": "where it's just going to sit,\nsome periodic steady state value where it's going to sit. ",
    "start": "1736820",
    "end": "1744375"
  },
  {
    "text": "And what we can do is we\ncan linearize this guy. What do I mean by that?",
    "start": "1744375",
    "end": "1750750"
  },
  {
    "text": "Let me just do the simplest\n1D version of this idea. Suppose I have one dimension,\nx, and I have f of x.",
    "start": "1750750",
    "end": "1763740"
  },
  {
    "text": "And this has some\nfunction, some nonlinear--",
    "start": "1763740",
    "end": "1769910"
  },
  {
    "text": "this is not a straight line-- function. Well, this is f of x.",
    "start": "1769910",
    "end": "1780080"
  },
  {
    "text": "Notice that there's some place\nwhere f of x goes through 0. And I could call that x.",
    "start": "1780080",
    "end": "1785515"
  },
  {
    "text": " And so the variation,\ndx/dt, is exactly",
    "start": "1785515",
    "end": "1794630"
  },
  {
    "text": "defined by this\nfunction near here. But maybe near this operating\npoint, I could come and say,",
    "start": "1794630",
    "end": "1799850"
  },
  {
    "text": "you know what? Let me just approximate\nhim with a tangent line. ",
    "start": "1799850",
    "end": "1807330"
  },
  {
    "text": "And I will approximate f of\nx right near this operating point with a straight line.",
    "start": "1807330",
    "end": "1814480"
  },
  {
    "text": "And then I can look at,\nif I have some variable x,",
    "start": "1814480",
    "end": "1822100"
  },
  {
    "text": "the distance here\nto some other point.",
    "start": "1822100",
    "end": "1828820"
  },
  {
    "text": "This distance I\nmight call x-tilde. The deviation between x\nand its operating point",
    "start": "1828820",
    "end": "1836050"
  },
  {
    "text": "is just the variation. So I can worry about this\ndifferential equation, variations about this point.",
    "start": "1836050",
    "end": "1843400"
  },
  {
    "text": "And how am I going\nto approximate that? I could approximate\nthat as dx/dt,",
    "start": "1843400",
    "end": "1851740"
  },
  {
    "text": "which I could write as capital\nd capital X/dt plus dx-tilde/dt",
    "start": "1851740",
    "end": "1858670"
  },
  {
    "text": "dt. So x is capital-- this is x.",
    "start": "1858670",
    "end": "1864350"
  },
  {
    "text": "This is capital X plus x-tilde. This is just 0 because this is\nthe derivative of a constant.",
    "start": "1864350",
    "end": "1878769"
  },
  {
    "text": "It's going to be equal to-- well, dx/dt was f of x R and t. I'm just going to substitute x\nplus x-tilde et cetera in here.",
    "start": "1878770",
    "end": "1887179"
  },
  {
    "text": "What I'm going to get is f of\nx R and t plus df/dx evaluated",
    "start": "1887180",
    "end": "1898840"
  },
  {
    "text": "at x and R for-- ",
    "start": "1898840",
    "end": "1907990"
  },
  {
    "text": "evaluated times x minus\ncapital X, which is actually",
    "start": "1907990",
    "end": "1914470"
  },
  {
    "text": "just times x-tilde,\nplus df/dR evaluated",
    "start": "1914470",
    "end": "1923289"
  },
  {
    "text": "at x and R times R-tilde.",
    "start": "1923290",
    "end": "1930100"
  },
  {
    "text": "So all I'm doing is\ninstead of using f of x, I'm doing a Fourier-- I'm doing a Taylor\nexpansion of this thing",
    "start": "1930100",
    "end": "1938260"
  },
  {
    "text": "and looking at just the\nderivatives at that point. ",
    "start": "1938260",
    "end": "1945440"
  },
  {
    "text": "What's f of x R and t? This is just 0 because I just\ntold you this thing was 0.",
    "start": "1945440",
    "end": "1952010"
  },
  {
    "text": "And so I just get df/dx and\ndf/dR times x-tilde and R-tilde.",
    "start": "1952010",
    "end": "1960770"
  },
  {
    "text": "Does that make\nsense to everybody? And all I'm really doing\nis I'm linearizing-- I'm approximating\nthis nonlinear curve.",
    "start": "1960770",
    "end": "1968160"
  },
  {
    "text": "If I have my deviations\nare small enough, I can't really\ntell the difference between the curvy f of x\nand the straight line orange",
    "start": "1968160",
    "end": "1974240"
  },
  {
    "text": "approximation. That make sense to everybody? To do this, I do require that\nf is differentiable near here.",
    "start": "1974240",
    "end": "1983510"
  },
  {
    "text": "But our systems are,\nso life is good. Any questions about\nthat idea generally?",
    "start": "1983510",
    "end": "1990500"
  },
  {
    "text": " So that's messy to think about.",
    "start": "1990500",
    "end": "1996280"
  },
  {
    "text": "But actually, it's quite\nsimple in the real world. In the real world,\nwhat am I going to do?",
    "start": "1996280",
    "end": "2002420"
  },
  {
    "text": "In the real world,\nall I'm going to do is I'm going to come\nup to this equation and substitute in these\nexpansions and factor it.",
    "start": "2002420",
    "end": "2012350"
  },
  {
    "text": "Life is easy. So let me do that. So what I have is\nI have diL-bar/dt.",
    "start": "2012350",
    "end": "2019220"
  },
  {
    "text": "And I said, iL--\noh, I should have said these are the local\naverages because I'm working with a local averages.",
    "start": "2019220",
    "end": "2025490"
  },
  {
    "text": "diL-bar/dt is equal to-- ",
    "start": "2025490",
    "end": "2033080"
  },
  {
    "text": "is equal to d/dt of\niL plus diL-tilde/dt.",
    "start": "2033080",
    "end": "2039409"
  },
  {
    "text": " And we said this was 0\nbecause iL is a constant.",
    "start": "2039410",
    "end": "2047090"
  },
  {
    "text": "And that's going to\nbe equal to what? That's going to be equal to--\nall I've got to do is substitute the stuff in there--",
    "start": "2047090",
    "end": "2052543"
  },
  {
    "text": "1 over L u plus u-tilde minus\n1 over L capital V plus v-tilde",
    "start": "2052543",
    "end": "2068540"
  },
  {
    "text": "times-- it's 1 minus d-- I'm sorry, it's d-prime,\nwhich is 1 minus d.",
    "start": "2068540",
    "end": "2074899"
  },
  {
    "text": "That's 1 minus d minus d-tilde.",
    "start": "2074900",
    "end": "2080089"
  },
  {
    "text": "And that's the top equation. And I get dv-bar/dt, which is\nequal to d/dt of capital V,",
    "start": "2080090",
    "end": "2092489"
  },
  {
    "text": "which we said was\n0, plus dV-tilde/dt, which is equal to minus 1 over\nRC v plus v-tilde plus 1 over c",
    "start": "2092489",
    "end": "2112380"
  },
  {
    "text": "times iL plus iL-tilde times\n1 minus d minus d-tilde.",
    "start": "2112380",
    "end": "2122430"
  },
  {
    "text": " I apologize for all the algebra.",
    "start": "2122430",
    "end": "2128730"
  },
  {
    "text": "But guess what? You can't do this without it. So that's life. All right, so what\ncan I do here?",
    "start": "2128730",
    "end": "2134369"
  },
  {
    "text": "Let me just refactor this. And here's how I'm\ngoing to factor it. I'm going to put all of the\nterms that are just operating",
    "start": "2134370",
    "end": "2143010"
  },
  {
    "text": "point capital letters together. Then I'm going to\nhave mixed ones. And then I'm going to\nhave all terms that",
    "start": "2143010",
    "end": "2148048"
  },
  {
    "text": "are products of tildes. So let me just\nrewrite this for you. So what I get is diL-tilde/dt is\nequal to 1 over L u minus 1 over",
    "start": "2148048",
    "end": "2163369"
  },
  {
    "text": "L times d-prime v, so 1 over\nL times u minus d-prime v.",
    "start": "2163370",
    "end": "2174560"
  },
  {
    "text": "Then I'm going to\nget mixed terms. I'm going to get\nplus 1 over L u-tilde",
    "start": "2174560",
    "end": "2181609"
  },
  {
    "text": "minus 1 over L v d-tilde.",
    "start": "2181610",
    "end": "2187460"
  },
  {
    "text": "Oops, it's going to be\nplus 1 over L v d-tilde",
    "start": "2187460",
    "end": "2193490"
  },
  {
    "text": "minus 1 over L d-prime, which\nis 1 minus capital D, v-tilde.",
    "start": "2193490",
    "end": "2201260"
  },
  {
    "text": "And then I'm going to get\nplus 1 over L v-tilde d-tilde.",
    "start": "2201260",
    "end": "2208250"
  },
  {
    "text": "Last equation, and then\nlife will get easier. I won't have to\nwrite any equations. It's dv-tilde/dt is going to be\nequal to minus 1 over RC minus--",
    "start": "2208250",
    "end": "2223880"
  },
  {
    "text": "I'm sorry, it's going to be-- it's going to be 1\nover C times minus v",
    "start": "2223880",
    "end": "2231470"
  },
  {
    "text": "over R plus iL times 1 minus d--",
    "start": "2231470",
    "end": "2239550"
  },
  {
    "text": " that's the all-caps-- term\nminus 1 over RC v-tilde plus 1",
    "start": "2239550",
    "end": "2253840"
  },
  {
    "text": "over C d-prime over C iL-tilde\nplus or minus iL over C d-tilde,",
    "start": "2253840",
    "end": "2268540"
  },
  {
    "text": "and then minus 1 over\nC iL-tilde d-tilde.",
    "start": "2268540",
    "end": "2276100"
  },
  {
    "text": "I apologize for all that math. But let me get to why\nI'm telling you this.",
    "start": "2276100",
    "end": "2282180"
  },
  {
    "text": "Let's look at this factor. And I wrote u here.",
    "start": "2282180",
    "end": "2287530"
  },
  {
    "text": "I should have been\nvery careful to write capital U. These are all DC\nperiodic steady state values.",
    "start": "2287530",
    "end": "2295590"
  },
  {
    "text": "This is the DC input voltage. This is the DC output voltage\nat an operating point.",
    "start": "2295590",
    "end": "2300780"
  },
  {
    "text": "Or should I say, in periodic\nsteady state local averages? What is 1 minus d times v?",
    "start": "2300780",
    "end": "2309100"
  },
  {
    "text": "Well, if I came back over\nto my boost converter here,",
    "start": "2309100",
    "end": "2314740"
  },
  {
    "text": "1 minus d times v is just u. So this whole thing is 0.",
    "start": "2314740",
    "end": "2323859"
  },
  {
    "text": "Likewise, this is the\noutput current, capital V over R, capital IL times--",
    "start": "2323860",
    "end": "2331630"
  },
  {
    "text": "this should have been\nd-prime is simply the current going into the\noutput from the inductor.",
    "start": "2331630",
    "end": "2340700"
  },
  {
    "text": "This is also 0, if\nyou worked it out. So basically, all capital\nterms in this thing,",
    "start": "2340700",
    "end": "2346193"
  },
  {
    "text": "if you're dealing with the\nperiodic steady state operating points of a converter, are\ngoing to drop out and go away.",
    "start": "2346193",
    "end": "2352240"
  },
  {
    "text": "If they don't, you\ndid your math wrong.  What about these guys over here?",
    "start": "2352240",
    "end": "2359760"
  },
  {
    "text": "This is the small\nvariation in the output voltage times the small\nvariation in the duty ratio. I'm going to argue that\nthis is a small thing",
    "start": "2359760",
    "end": "2367619"
  },
  {
    "text": "and this is a small thing. This is small squared. I'm going to pretend\nhe's approximately 0.",
    "start": "2367620",
    "end": "2372819"
  },
  {
    "text": "Likewise, this is\nsmall times small. I'm going to say\nhe's approximately 0.",
    "start": "2372820",
    "end": "2377920"
  },
  {
    "text": "Basically, these\nterms are precisely the curvature away in\nthis nonlinear function",
    "start": "2377920",
    "end": "2385350"
  },
  {
    "text": "from the straight line. And I'm saying, if\nI get close enough, I can ignore that curvature.",
    "start": "2385350",
    "end": "2390520"
  },
  {
    "text": "If I make my variations away\nfrom that point small enough, I can't tell the difference,\nwhich leaves me with an equation",
    "start": "2390520",
    "end": "2399940"
  },
  {
    "text": "in terms of diL-tilde/dt,\nwhich is in terms of two--",
    "start": "2399940",
    "end": "2405940"
  },
  {
    "text": "basically, it's\nin terms of this. I'm going to have constants. This is 1 over L. This is\n1 over L times capital V.",
    "start": "2405940",
    "end": "2414670"
  },
  {
    "text": "So capital V is my periodic\nsteady state value. That's just a constant, as far\nas the variations are concerned.",
    "start": "2414670",
    "end": "2420430"
  },
  {
    "text": "This is minus 1 over L.\nThis is another constant. d-prime is my steady\nstate duty ratio.",
    "start": "2420430",
    "end": "2428590"
  },
  {
    "text": "And d-tilde is my\nvariation away from that. Or d-prime is 1 minus my\nsteady state duty ratio.",
    "start": "2428590",
    "end": "2436420"
  },
  {
    "text": "And I can do the same thing\nwith these other terms. These, as far as this equation\nis concerned, are all constants.",
    "start": "2436420",
    "end": "2443970"
  },
  {
    "text": "Does that make\nsense to everybody? So I would argue then that\nthis beast, this beastie--",
    "start": "2443970",
    "end": "2453595"
  },
  {
    "start": "2453595",
    "end": "2459020"
  },
  {
    "text": "if I take away all the stuff-- I throw away all\nthe stuff, all I",
    "start": "2459020",
    "end": "2464090"
  },
  {
    "text": "have is small signal variables\ntimes constants added up. So this is also a system\nof differential equations.",
    "start": "2464090",
    "end": "2473420"
  },
  {
    "text": "But as far as a given\nperiodic steady state operating condition, it's a\nlinear constant coefficient",
    "start": "2473420",
    "end": "2479809"
  },
  {
    "text": "differential equations. This is the friendly kind\nof differential equations,",
    "start": "2479810",
    "end": "2485600"
  },
  {
    "text": "the ones we love. Well, why do I like that? Because I could take\nthat set of differential",
    "start": "2485600",
    "end": "2491540"
  },
  {
    "text": "equations and come back here. And instead of\nworrying about v-error,",
    "start": "2491540",
    "end": "2497270"
  },
  {
    "text": "I could worry about\nv-error variation. I could worry\nabout the variation",
    "start": "2497270",
    "end": "2504140"
  },
  {
    "text": "in duty cycle, the variation\nin my inductor current away",
    "start": "2504140",
    "end": "2509391"
  },
  {
    "text": "from-- this variations away\nfrom the steady state operating point, the variation\nin voltage away from my steady state\noperating point.",
    "start": "2509392",
    "end": "2515930"
  },
  {
    "text": "And this would be\nfeeding back v-tilde. And suddenly, I stick these\ndifferential equations in here.",
    "start": "2515930",
    "end": "2523190"
  },
  {
    "text": "And these are linear. And suddenly, my\nlife became easy because now I can apply all my\nlinear control theory to it.",
    "start": "2523190",
    "end": "2530950"
  },
  {
    "text": " Questions about that? ",
    "start": "2530950",
    "end": "2543010"
  },
  {
    "text": "So how might I do\nthis in practice? A lot of things I can do.",
    "start": "2543010",
    "end": "2548869"
  },
  {
    "text": "And I should say,\nby the way, there's nothing that prevents me from\ndoing the original nonlinear",
    "start": "2548870",
    "end": "2553930"
  },
  {
    "text": "stuff and doing a nonlinear-- having a nonlinear plan and\nconsidering Lyapunov controllers",
    "start": "2553930",
    "end": "2559660"
  },
  {
    "text": "or anything I want to consider. It's just complicated and\nperhaps unnecessarily so.",
    "start": "2559660",
    "end": "2566660"
  },
  {
    "text": "By doing this linearization\ntrick around an operating point, I get a set of linear constant\ncoefficient differential",
    "start": "2566660",
    "end": "2575170"
  },
  {
    "text": "equations that then\ngive me nice behavior. The only constraint, the\nonly fly in this ointment",
    "start": "2575170",
    "end": "2582759"
  },
  {
    "text": "is the differential equations,\nthe coefficients in it depend on the operating point.",
    "start": "2582760",
    "end": "2588319"
  },
  {
    "text": "So I've got to say, geez, I'm\noperating at d-prime is 0.5. My steady state is at 50%.",
    "start": "2588320",
    "end": "2594890"
  },
  {
    "text": "It's for this boost\nconversion ratio. And then I'll get the dynamics\nfor that boost conversion ratio,",
    "start": "2594890",
    "end": "2600869"
  },
  {
    "text": "for small deviations\naway from that. But if I suddenly change\nduty ratio to 75% and d-prime",
    "start": "2600870",
    "end": "2606510"
  },
  {
    "text": "became 0.25, the\nequations are different and the dynamics are different,",
    "start": "2606510",
    "end": "2612510"
  },
  {
    "text": "So the fact that\nthis is nonlinear, it means, at different operating\npoints, the dynamics vary. Well, you're stuck with that.",
    "start": "2612510",
    "end": "2619090"
  },
  {
    "text": "It's a nonlinear system. That's what it does. But if I'm interested in--",
    "start": "2619090",
    "end": "2625349"
  },
  {
    "text": "jeez, I kicked it\na little bit, I changed my duty ratio a\nlittle, or I stepped my load, when I get close to that\nsecond operating point,",
    "start": "2625350",
    "end": "2633660"
  },
  {
    "text": "I can predict what the\ndynamics are very exactly.  And by the way, even\nthough this is nonlinear,",
    "start": "2633660",
    "end": "2641850"
  },
  {
    "text": "it turns out that\nit's pretty good. The dynamics are\nquite nicely captured.",
    "start": "2641850",
    "end": "2649810"
  },
  {
    "text": "So how might I deal with this? Well, I could do this. What would I do? I could turn this whole thing\ninto to a transfer function,",
    "start": "2649810",
    "end": "2660750"
  },
  {
    "text": "for example. Like over here, what\nI would really like is some transfer function,\nperhaps H of s, where H of s",
    "start": "2660750",
    "end": "2672450"
  },
  {
    "text": "goes from d-tilde to\nv-tilde, for example.",
    "start": "2672450",
    "end": "2678900"
  },
  {
    "text": "It's a transfer function\nfrom variations in duty ratio to variations in output\nvoltage if I kept my input",
    "start": "2678900",
    "end": "2686490"
  },
  {
    "text": "voltage constant, for example. Well, how would I do that? I'd just take the Laplace\ntransform of this stuff,",
    "start": "2686490",
    "end": "2694050"
  },
  {
    "text": "all my i sub L-tildes would\nbecome S i sub L-tildes. This would become S v-tilde.",
    "start": "2694050",
    "end": "2699470"
  },
  {
    "text": "And then I could look at this\nthing, and I could go in here, and I could multiply\nthis by S. I could then",
    "start": "2699470",
    "end": "2705900"
  },
  {
    "text": "substitute my S iL-tilde in\nhere and iL-tiles would go away. And I'd get everything that\nrelates d-tilde and v-tilde.",
    "start": "2705900",
    "end": "2714630"
  },
  {
    "text": "I'll just write down\nthat solution for you because I'm running out of time. But if you do that,\nhere's what you get.",
    "start": "2714630",
    "end": "2721605"
  },
  {
    "text": "First of all, any\nquestions about the process I just mentioned?",
    "start": "2721605",
    "end": "2726869"
  },
  {
    "text": "So what I would get is\nsomething like this. ",
    "start": "2726870",
    "end": "2733290"
  },
  {
    "text": "I would get H of s is equal\nto v-tilde over d-tilde, which",
    "start": "2733290",
    "end": "2742190"
  },
  {
    "text": "is equal to minus s times iL\nover C plus v d-prime over LC",
    "start": "2742190",
    "end": "2759069"
  },
  {
    "text": "divided by s squared plus 1\nover RC s plus d-prime squared",
    "start": "2759070",
    "end": "2766630"
  },
  {
    "text": "over LC. So this is a second\norder differential--",
    "start": "2766630",
    "end": "2774510"
  },
  {
    "text": "this is a second order\ntransfer function. It has two poles, S\nsquared in the denominator.",
    "start": "2774510",
    "end": "2780240"
  },
  {
    "text": "So this characteristic\nequation is second order. Well, we expect that.",
    "start": "2780240",
    "end": "2786363"
  },
  {
    "text": "It's got to be second order. Why? Because what are my\nenergy storage elements in my converter?",
    "start": "2786363",
    "end": "2791390"
  },
  {
    "text": "My energy storage\nelements in my converter are one inductor\nand one capacitor. So it is second order.",
    "start": "2791390",
    "end": "2796760"
  },
  {
    "text": "Great, I expect that. These have two left\nhalf plane zeros.",
    "start": "2796760",
    "end": "2801825"
  },
  {
    "text": "I can tell because\nall the coefficients are positive on the\ncharacteristic equation. It has one right\nhalf plane zero.",
    "start": "2801825",
    "end": "2809039"
  },
  {
    "text": "We'll come back to\ntalking about that. So that's great. I get a behavior I'm expecting.",
    "start": "2809040",
    "end": "2818750"
  },
  {
    "text": "Notice that the pole\nlocations move around depending upon duty ratio.",
    "start": "2818750",
    "end": "2824100"
  },
  {
    "text": "So if I'm sitting here and I'm\ncoming from 5 to 10 volts DC,",
    "start": "2824100",
    "end": "2830226"
  },
  {
    "text": "d-prime would be 0.5. And I would get one\nset of pole locations. If I was coming\nfrom 5 to 20 volts,",
    "start": "2830226",
    "end": "2838150"
  },
  {
    "text": "I'd have a different\nvalue of d-prime. And I'd get a different\nset of pole locations. So the poles do move around\nat different operating points.",
    "start": "2838150",
    "end": "2847130"
  },
  {
    "text": "But that's life. I can deal with that. How accurate is this? Well, I plugged in--",
    "start": "2847130",
    "end": "2853070"
  },
  {
    "text": "I won't bother writing\nit on the board. I plugged in values\nfor an example.",
    "start": "2853070",
    "end": "2858940"
  },
  {
    "text": "And it's precisely the\nexample I showed you. It's precisely the\nexample I showed you--",
    "start": "2858940",
    "end": "2866085"
  },
  {
    "start": "2866085",
    "end": "2871839"
  },
  {
    "text": "precisely the example I showed\nyou last class, in fact, this transient. ",
    "start": "2871840",
    "end": "2881980"
  },
  {
    "text": "This is we get a step, we step--\nin this case, we step the load.",
    "start": "2881980",
    "end": "2887420"
  },
  {
    "text": "So I calculate\neverything for the new, the final value of what the\ninductor current would be.",
    "start": "2887420",
    "end": "2894310"
  },
  {
    "text": "And I just plug\ninto that equation. And what do you get\nfor that equation? You get a 0 at 35 kiloradians\nper second and poles at minus",
    "start": "2894310",
    "end": "2903450"
  },
  {
    "text": "4,000 plus or minus J 16,\n279 radians per second. That gives an oscillation\nperiod that ought",
    "start": "2903450",
    "end": "2910140"
  },
  {
    "text": "to be about 0.4 milliseconds. Well, if you look at\nthis, that's pretty good.",
    "start": "2910140",
    "end": "2917100"
  },
  {
    "text": "That's about what\nwe got, 1.6 to 2. So even though this is\na pretty large step--",
    "start": "2917100",
    "end": "2923340"
  },
  {
    "text": "it's a factor of 2 in load-- I can predict the\ntransient response,",
    "start": "2923340",
    "end": "2929150"
  },
  {
    "text": "the average transient response,\nwith this nice little linearized model. That means, if I put this\nthing in a feedback controller,",
    "start": "2929150",
    "end": "2935990"
  },
  {
    "text": "I ought to be able to\nbuild a compensator that will control the\nclosed loop dynamics",
    "start": "2935990",
    "end": "2941000"
  },
  {
    "text": "and give me the response I want. So that is state space\naveraging in its application,",
    "start": "2941000",
    "end": "2949470"
  },
  {
    "text": "and then linearization. So I'm going to\naverage my circuit. And I get a nonlinear\naverage model.",
    "start": "2949470",
    "end": "2955330"
  },
  {
    "text": "Then I'm going to linearize\nthe differential equations. And that gives me a nice linear\nconstant coefficient model",
    "start": "2955330",
    "end": "2960770"
  },
  {
    "text": "that I can model with\na transfer function, at least for a given\noperating point. Any questions before we wrap up?",
    "start": "2960770",
    "end": "2966500"
  },
  {
    "text": "Yeah? STUDENT: When you\nsaid [INAUDIBLE], were you showing us\nsome simulation or-- DAVID PERREAULT:\nOh, what's this?",
    "start": "2966500",
    "end": "2974200"
  },
  {
    "text": "Where did I get that number? STUDENT: Yeah. DAVID PERREAULT:\nWhat I did was--",
    "start": "2974200",
    "end": "2980059"
  },
  {
    "text": "well, it's not on the graph. What I did was I\nplugged into this. And I got the values of S.\nAnd the imaginary component",
    "start": "2980060",
    "end": "2992050"
  },
  {
    "text": "of the pole locations is the\ndamped natural frequency.",
    "start": "2992050",
    "end": "2997520"
  },
  {
    "text": "And that should correspond\nto the oscillation period of a transient response.",
    "start": "2997520",
    "end": "3004410"
  },
  {
    "text": "So if I took an RLC circuit\nand I put a step on it, I would see a transient with\nthe pole locations indicated.",
    "start": "3004410",
    "end": "3011927"
  },
  {
    "text": "And all I did was said,\nwhat's the pole locations? And how does that\nmatch that transient? Yeah?",
    "start": "3011927",
    "end": "3017192"
  },
  {
    "text": "STUDENT: When did you\nchoose to linearize throughout the starting or\nending operating points? DAVID PERREAULT:\nWell, OK, so I've",
    "start": "3017192",
    "end": "3023627"
  },
  {
    "text": "got to linearize around\nthe ending operating point because I'm asking how does\nit vary about where I'm going. And it's going to settle\ndown to that place.",
    "start": "3023627",
    "end": "3032100"
  },
  {
    "text": "Asking what the dynamics are\nabout where I'm leaving from doesn't tell me very\nmuch because I'm not going to be there.",
    "start": "3032100",
    "end": "3037180"
  },
  {
    "text": "I'm going away from there. ",
    "start": "3037180",
    "end": "3042220"
  },
  {
    "text": "Any last questions? So we'll take up control\nof power converters again next class.",
    "start": "3042220",
    "end": "3049599"
  },
  {
    "start": "3049600",
    "end": "3052000"
  }
]