[
  {
    "text": "[SQUEAKING] [RUSTLING] [CLICKING]",
    "start": "0",
    "end": "6396"
  },
  {
    "text": " DAVID PERREAULT: OK, why\ndon't we get started?",
    "start": "6396",
    "end": "11990"
  },
  {
    "text": "So what I wanted to do\nin the next few lectures is talk about filtering.",
    "start": "11990",
    "end": "18050"
  },
  {
    "text": "And this is ripple filtering\nor EMI, Electromagnetic Interference filtering.",
    "start": "18050",
    "end": "24020"
  },
  {
    "text": "And why am I going to spend so\nmuch time talking about filters? And the reason is because\nin most power supplies,",
    "start": "24020",
    "end": "32090"
  },
  {
    "text": "and in fact in a lot of power\nelectronics circuits generally, the filters take up a large\nfraction of the overall volume",
    "start": "32090",
    "end": "38829"
  },
  {
    "text": "and cost. So if you look at a typical\noffline power supply, 25% of the volume might\nbe devoted to just filters",
    "start": "38830",
    "end": "47519"
  },
  {
    "text": "because we're switching,\nwe're transferring energy. And the ripple we generate,\nwe really need to suppress.",
    "start": "47520",
    "end": "52920"
  },
  {
    "text": "And we want to suppress it maybe\nto meet some application desire,",
    "start": "52920",
    "end": "59137"
  },
  {
    "text": "but we might want\nto suppress it also because we're not\nallowed to sell something that you plug into the wall\nthat has too much ripple.",
    "start": "59138",
    "end": "66296"
  },
  {
    "text": "So if we think about\nit, there's kind of two kinds or two\nflavors of specifications",
    "start": "66296",
    "end": "73620"
  },
  {
    "text": "we often have to meet. One of them is in\nthe time domain. ",
    "start": "73620",
    "end": "80700"
  },
  {
    "text": "If I'm developing\na power supply, somebody might\ntell me, oh, look, I'm only going to\nallow you to have",
    "start": "80700",
    "end": "86460"
  },
  {
    "text": "20 millivolts, either peak\nor RMS, of output ripple because we want such and such\na level of noise in our output.",
    "start": "86460",
    "end": "94690"
  },
  {
    "text": "And that's one kind\nof specification you might need to meet.",
    "start": "94690",
    "end": "99869"
  },
  {
    "text": "More typically, however,\nand almost universally, if it's something like you're\ntalking about an input filter,",
    "start": "99870",
    "end": "107010"
  },
  {
    "text": "you're going to plug\nit into the wall, is in the frequency domain.",
    "start": "107010",
    "end": "112160"
  },
  {
    "start": "112160",
    "end": "119700"
  },
  {
    "text": "That is, how much energy can\nyou inject in a given frequency",
    "start": "119700",
    "end": "126110"
  },
  {
    "text": "bandwidth? So a typical thing was you might\ndetect this with a 9-kilohertz resolution bandwidth for\nwhere you're picking up energy",
    "start": "126110",
    "end": "132820"
  },
  {
    "text": "and look in the span, say,\nbetween for conducted emissions, look in the span between, like,\n150 kilohertz and 30 megahertz",
    "start": "132820",
    "end": "140310"
  },
  {
    "text": "is most commercial\nstandards for conducted EMI. Above 30 megahertz, you\ntypically use antennas and stuff",
    "start": "140310",
    "end": "148230"
  },
  {
    "text": "to pick it up. And we're not going to talk\nabout radiated electromagnetic interference. But in fact, if you don't\npass conducted interference,",
    "start": "148230",
    "end": "156180"
  },
  {
    "text": "you won't pass radiated\neither because basically when you conduct energy into your\ninput leads, your output leads,",
    "start": "156180",
    "end": "161670"
  },
  {
    "text": "that's an antenna, and\nit broadcasts off noise. So it's important\nto meet these things",
    "start": "161670",
    "end": "167382"
  },
  {
    "text": "if you're going to sell\ncommercial products that plug into a wall or into a vehicle.",
    "start": "167382",
    "end": "172410"
  },
  {
    "text": "Into the wall, you've\ngot to deal with the FCC. If you're going to plug\nit into the vehicle, you've got to deal with\nthe vehicle manufacturer.",
    "start": "172410",
    "end": "178319"
  },
  {
    "text": "And you're going to have to pass\nthese specifications in order to sell something.",
    "start": "178320",
    "end": "183450"
  },
  {
    "text": "And it's quite important. Let me just give you an example. Once upon a time,\nI consulted for--",
    "start": "183450",
    "end": "191280"
  },
  {
    "text": "I'd call it a garage\nstartup, but really, they were in the guy's basement,\nso it was a basement startup.",
    "start": "191280",
    "end": "197549"
  },
  {
    "text": "And what they were developing--\nthis was early days. They were developing a\nsolar inverter to sell. And so they were\ndeveloping the power stage",
    "start": "197550",
    "end": "206099"
  },
  {
    "text": "to convert energy into the grid\nand getting the efficiency up and doing all these things.",
    "start": "206100",
    "end": "211450"
  },
  {
    "text": "But they hadn't gotten around\nto designing the EMI filter yet.",
    "start": "211450",
    "end": "216690"
  },
  {
    "text": "So the guy's neighbor\ncame up to him and said, are you having trouble? Around every day\naround 3 o'clock,",
    "start": "216690",
    "end": "223689"
  },
  {
    "text": "I can't watch television\nbecause, I don't know, everything just\nfuzzes out on me. And what the guy in the startup\ndidn't tell him was 3 o'clock",
    "start": "223690",
    "end": "230730"
  },
  {
    "text": "was when he started\ntesting every day. He was dumping too much\nripple into the grid and the next house over suddenly\ncouldn't watch television.",
    "start": "230730",
    "end": "237760"
  },
  {
    "text": "So these are real problems. It's not just you\ngot to pass a spec.",
    "start": "237760",
    "end": "243540"
  },
  {
    "text": "It's you will\ninterfere with things. If you think about it in a car,\nif you're plugging something into the USB outlet or into the\ncigarette lighter or something,",
    "start": "243540",
    "end": "254566"
  },
  {
    "text": "any ripple you conduct\nis running around on the wires in the car. And it's right next to a radio.",
    "start": "254566",
    "end": "260570"
  },
  {
    "text": "So your radio is a\nvery sensitive detector of very, very small\nquantities of noise.",
    "start": "260570",
    "end": "266470"
  },
  {
    "text": "And you will mess with\nthat if you do not have very, very good filtering. So what we're going to find is\nthat you've got to do filtering,",
    "start": "266470",
    "end": "273930"
  },
  {
    "text": "but it's not just, oh, I need\nto make my ripple a little bit small. You've got to make it really\nsmall in radio frequency bands",
    "start": "273930",
    "end": "280270"
  },
  {
    "text": "in order to not\ninterfere with things. So we're going to talk\nabout conducted emissions.",
    "start": "280270",
    "end": "287300"
  },
  {
    "text": "And what I'm going\nto mostly focus-- most of what I'm going to\nsay about input filters--",
    "start": "287300",
    "end": "292780"
  },
  {
    "text": "like, if I'm plugging my\npower converter in the wall, it's between the power stage and\nmy power converter in the wall.",
    "start": "292780",
    "end": "298700"
  },
  {
    "text": "So that's the input side filter. Most of it applies to\noutput side filters too.",
    "start": "298700",
    "end": "304600"
  },
  {
    "text": "But we'll focus\non input filters. So let's just think, to get\na sense of the challenges",
    "start": "304600",
    "end": "313250"
  },
  {
    "text": "or issues, I want to\nstart by talking about, how do you measure these\nthings and what drives that?",
    "start": "313250",
    "end": "318860"
  },
  {
    "text": "So let's just think about a\nvery simple buck converter. So suppose I go off and\nbuild a buck converter.",
    "start": "318860",
    "end": "326150"
  },
  {
    "text": "So here's my buck converter. And I'm not going to worry\nabout the output filter.",
    "start": "326150",
    "end": "331919"
  },
  {
    "text": "Let's just assume he's\nconnected to a resistor. But here, I have\nthe input filter.",
    "start": "331920",
    "end": "337550"
  },
  {
    "text": "And maybe I can consider the\ncapacitor for the buck converter the first part of\nthe input filter. And here I have I'm going\nto draw some current ix.",
    "start": "337550",
    "end": "346129"
  },
  {
    "text": "I'm going to put some\ninput filter here. But for the moment, let's\njust assume my capacitor",
    "start": "346130",
    "end": "351680"
  },
  {
    "text": "is the input filter I've got. So this thing right here\nis right now my filter.",
    "start": "351680",
    "end": "357526"
  },
  {
    "text": "And now I'm going to connect\nthis up to some source. ",
    "start": "357526",
    "end": "363410"
  },
  {
    "text": "And maybe this source is\nthe battery in my car as vs. And then there's some\nsource impedance, zs.",
    "start": "363410",
    "end": "370160"
  },
  {
    "text": "And that may be-- at DC,\nthat might be very small. But at AC, maybe it's not.",
    "start": "370160",
    "end": "375659"
  },
  {
    "text": "So there's some source\nimpedance that I'm driving in. ",
    "start": "375660",
    "end": "382250"
  },
  {
    "text": "And here's the challenge.  What would be a model for this\nas far as conducting noise",
    "start": "382250",
    "end": "392930"
  },
  {
    "text": "into the input? And maybe I would\nconsider my noise to be whatever ripple here is--",
    "start": "392930",
    "end": "398750"
  },
  {
    "text": "I'll call this iy. So if I'm driving ripple\ncurrent back into this input,",
    "start": "398750",
    "end": "405770"
  },
  {
    "text": "then I'm generating\nnoise in the input. And maybe that's what's\ninterfering with my radio.",
    "start": "405770",
    "end": "410870"
  },
  {
    "text": "So how would I model this? Maybe the easiest\nthing for me to do is say let me pretend this is\na constant current inductor.",
    "start": "410870",
    "end": "420568"
  },
  {
    "text": "I'm not going to worry\nabout the inductor ripple. And a simplified model for this\nwould be something like this.",
    "start": "420568",
    "end": "426060"
  },
  {
    "text": "I'd have some current ix,\nwhich is some square wave.",
    "start": "426060",
    "end": "434800"
  },
  {
    "text": "And then maybe I would\nonly care about ix tilde,",
    "start": "434800",
    "end": "439979"
  },
  {
    "text": "the AC component of that. So maybe I'll just\nworry about the AC component of this current.",
    "start": "439980",
    "end": "447120"
  },
  {
    "text": "It's coming into\nthe filter capacitor and into the source impedance. ",
    "start": "447120",
    "end": "454050"
  },
  {
    "text": "And maybe I will worry about iy.",
    "start": "454050",
    "end": "460259"
  },
  {
    "text": "Or maybe I will worry\nabout the voltage here, vx. ",
    "start": "460260",
    "end": "466699"
  },
  {
    "text": "I could specify either thing\nto worry about the filter.",
    "start": "466700",
    "end": "472246"
  },
  {
    "text": "Well, let's just think about the\neffect of the source impedance on my measurements.",
    "start": "472246",
    "end": "478164"
  },
  {
    "text": "If zs goes to 0, if I had\na really good source, then",
    "start": "478165",
    "end": "488010"
  },
  {
    "text": "what would happen? If zs goes to 0, iy goes to ix.",
    "start": "488010",
    "end": "495160"
  },
  {
    "text": "If there's no source impedance,\nthis capacitor does nothing, and all the ripple goes\nback into my input. ",
    "start": "495160",
    "end": "503262"
  },
  {
    "text": "Of course, if zs goes to 0,\nthen v sub x tilde goes to 0.",
    "start": "503262",
    "end": "509495"
  },
  {
    "text": " So if I had no source\nimpedance, I'd get--",
    "start": "509495",
    "end": "514890"
  },
  {
    "text": "all of my input would\nsee the ripple current from the converter, but I\nwouldn't have any voltage ripple",
    "start": "514890",
    "end": "520289"
  },
  {
    "text": "at the input of my converter. On the other hand, if z\nsub s at ripple frequencies",
    "start": "520289",
    "end": "526320"
  },
  {
    "text": "went to infinity, what\nwould happen in that case? Well, then I'd have a\nreally high impedance here.",
    "start": "526320",
    "end": "532390"
  },
  {
    "text": "The ripple current that\nI'd measure would go to 0 because this is just a\nvery high source impedance,",
    "start": "532390",
    "end": "537690"
  },
  {
    "text": "and I wouldn't-- all the current\nwould go through the capacitor. And v sub x would go to--",
    "start": "537690",
    "end": "544620"
  },
  {
    "text": "it would go to i sub x\ndivided by j omega c. ",
    "start": "544620",
    "end": "551720"
  },
  {
    "text": "So my point is this. Depending upon\nwhat I care about, whether I'm measuring\nvoltage here or current here,",
    "start": "551720",
    "end": "561180"
  },
  {
    "text": "the source impedance affects\nboth of those measurements.",
    "start": "561180",
    "end": "566630"
  },
  {
    "text": "And that's a problem because\nhere's the way EMI works.",
    "start": "566630",
    "end": "572000"
  },
  {
    "text": "So if I want to go-- if I want to go\nsell a power supply, a commercial power supply that\nI'm going to plug into the wall,",
    "start": "572000",
    "end": "578960"
  },
  {
    "text": "I have to go test it and\nmake it meet standards. And then I don't do anything.",
    "start": "578960",
    "end": "584250"
  },
  {
    "text": "I just take that result and\nI put it in a desk drawer. And as long as nobody\ncomplains, great.",
    "start": "584250",
    "end": "591230"
  },
  {
    "text": "But if somebody\ncomes back and says, you're emitting too\nmuch EMI, then I've got to produce this\ntest result, and we've",
    "start": "591230",
    "end": "597980"
  },
  {
    "text": "got to come to some agreement. Or they've got to be-- they've\ngot to be able to ascertain,",
    "start": "597980",
    "end": "603440"
  },
  {
    "text": "did my power supply\npass the test or not? And what I'm telling\nyou here is that if you",
    "start": "603440",
    "end": "610550"
  },
  {
    "text": "try to just plug a power supply\ninto a source, the result you get depends\nvery, very heavily",
    "start": "610550",
    "end": "617480"
  },
  {
    "text": "on this source impedance. So if I'm designing a\npower converter for a car,",
    "start": "617480",
    "end": "623329"
  },
  {
    "text": "that source impedance depends\nupon what model car, what week it is, what else they\nhave plugged into the bus.",
    "start": "623330",
    "end": "629500"
  },
  {
    "text": "It depends on all kinds of\nstuff that I don't control. So if I'm going to sell a power\nsupply to plug into the BMW",
    "start": "629500",
    "end": "636000"
  },
  {
    "text": "or into some other\nbrand car, they have no way of coming\nto an agreement with me",
    "start": "636000",
    "end": "642990"
  },
  {
    "text": "as to whether my\npower supply passes because on a different model or\nwith different stuff plugged in,",
    "start": "642990",
    "end": "649560"
  },
  {
    "text": "you might get a completely\ndifferent result. Does that make\nsense to everybody?",
    "start": "649560",
    "end": "655910"
  },
  {
    "text": "So what do you do about this? And this is what underpins\nEMI test procedures.",
    "start": "655910",
    "end": "662490"
  },
  {
    "text": "And I will say that\nfor any procedure you want to test, like SAE\nhas a set of specifications",
    "start": "662490",
    "end": "669500"
  },
  {
    "text": "that they recommend\nto test procedures. If you want to qualify for\nsomething into the wall,",
    "start": "669500",
    "end": "675090"
  },
  {
    "text": "FCC Title 17 has a whole set\nof procedures that you follow.",
    "start": "675090",
    "end": "680210"
  },
  {
    "text": "And these procedures\nare designed to deal with this\nissue, that you've",
    "start": "680210",
    "end": "685220"
  },
  {
    "text": "got to frame a test that\nif I test it this week and I test it next week and\nI test it the week after that",
    "start": "685220",
    "end": "692030"
  },
  {
    "text": "in some other place,\nI'm going to get more or less the same result. So\nit's not that it necessarily",
    "start": "692030",
    "end": "698270"
  },
  {
    "text": "reflects the real\nenvironment, but it reflects a standardized\nenvironment that I can rely on.",
    "start": "698270",
    "end": "706910"
  },
  {
    "text": "So here's how they do it. What we would really\ndo is the following.",
    "start": "706910",
    "end": "712602"
  },
  {
    "text": "Or actually, I'm\ngoing to give you a slightly simplified version\nof what you would really do. ",
    "start": "712603",
    "end": "720560"
  },
  {
    "text": "Suppose here's my load. And I'm talking\nabout an input filter because I'm going to plug\nthis thing into the wall.",
    "start": "720560",
    "end": "726290"
  },
  {
    "text": "So here's my converter. And it's generating\nsome ripple current ix.",
    "start": "726290",
    "end": "734480"
  },
  {
    "text": "And here's whatever\nmy filter is. And here I'm just going to\ndraw my filter as a capacitor.",
    "start": "734480",
    "end": "742790"
  },
  {
    "text": "What I'm going to\ndo is I'm not going to plug this into my\npower source, which could be my vehicle battery.",
    "start": "742790",
    "end": "748700"
  },
  {
    "text": "But instead, I'm going\nto go get another box and connect this up to a\nbox that looks like this.",
    "start": "748700",
    "end": "756050"
  },
  {
    "text": "It has a series inductance, L\nLISN, and a shunt capacitance,",
    "start": "756050",
    "end": "761970"
  },
  {
    "text": "C LISN. Sometimes it has another\ncapacitor here to ground. And then this is going\nto have some output.",
    "start": "761970",
    "end": "769885"
  },
  {
    "text": " And then I'm going to connect\nthis into the power source.",
    "start": "769885",
    "end": "778780"
  },
  {
    "text": "So here we go. Here's zs. And here is vs. So this is\nwhatever my usual source is.",
    "start": "778780",
    "end": "787938"
  },
  {
    "text": "If this is my vehicle\nbattery, that's what I'm going to plug it into. And this element\nhere comes in a box.",
    "start": "787938",
    "end": "795550"
  },
  {
    "text": "It's a standardized element. And then I'm going to go plug\nthis output of this thing into a spectrum analyzer.",
    "start": "795550",
    "end": "803766"
  },
  {
    "start": "803766",
    "end": "809790"
  },
  {
    "text": "And this is going to be-- the input of the spectrum\nanalyzer has a 50-ohm input.",
    "start": "809790",
    "end": "815820"
  },
  {
    "text": "So basically, my spectrum\nanalyzer looks like a 50-ohm input. And the idea of this box\nis called a Line Impedance",
    "start": "815820",
    "end": "825270"
  },
  {
    "text": "Stabilization Network, or LISN--",
    "start": "825270",
    "end": "843480"
  },
  {
    "text": "Line Impedance\nStabilization Network. And its job is to present\na consistent measurement",
    "start": "843480",
    "end": "851780"
  },
  {
    "text": "point for EMI. So what does this thing do? It's its own kind of\nfilter, but the idea",
    "start": "851780",
    "end": "857450"
  },
  {
    "text": "is all the DC current I want\nto provide to my converter from my source will just\npass through this inductor.",
    "start": "857450",
    "end": "866210"
  },
  {
    "text": "This will have some\ncutoff frequency, and L LISN and C LISN\nin this capacitor,",
    "start": "866210",
    "end": "872600"
  },
  {
    "text": "depending upon the\nLISN, will be specified. And below some frequency,\nall the current",
    "start": "872600",
    "end": "879829"
  },
  {
    "text": "is just going to\ncome from the input, and it will draw\npower just as normal. When I get to really, really\nhigh frequencies, tens",
    "start": "879830",
    "end": "887330"
  },
  {
    "text": "of megahertz or\nwhatever, the idea is that this path will\nlook like an open circuit.",
    "start": "887330",
    "end": "893390"
  },
  {
    "text": "C LISN will look\nlike a short circuit. And I will be-- when I look back into\nhere, if I look back",
    "start": "893390",
    "end": "899870"
  },
  {
    "text": "this way, at radio frequencies,\nwhat I'm going to see is 50 ohms. And so whatever noise I\nconduct from my switching",
    "start": "899870",
    "end": "909560"
  },
  {
    "text": "is going to be looking\nback into 50 ohms. And if we plug this\ntest setup into here,",
    "start": "909560",
    "end": "915440"
  },
  {
    "text": "where the zs is one thing, and\nsomebody else plugs into it and zs is another\nthing, you're still going to get pretty close\nto the same results.",
    "start": "915440",
    "end": "923420"
  },
  {
    "text": "So this box, this LISN,\nis only for testing. It's not something that\ngoes with your converter. It's just part of the test\nstand to make measurements.",
    "start": "923420",
    "end": "931170"
  },
  {
    "text": "And I give you\nexamples of values. What are the values\nof those things? It depends. Are you building\nsomething for a car where",
    "start": "931170",
    "end": "936980"
  },
  {
    "text": "they have one set of standards? Are you building it for FCC,\nwhere you plug into a wall, they have another\nset of standards?",
    "start": "936980",
    "end": "943230"
  },
  {
    "text": "But all that is\ndocumented, and you test according to that standard.",
    "start": "943230",
    "end": "948740"
  },
  {
    "text": "Any questions about this so far? AUDIENCE: So that\ncapacitor over there,",
    "start": "948740",
    "end": "955560"
  },
  {
    "text": "on the left side of the\nlist of [INAUDIBLE]. ",
    "start": "955560",
    "end": "963563"
  },
  {
    "text": "DAVID PERREAULT: It\ndepends on the LISN. So it depends on the standard. Some will just have an\ninductor and a capacitor.",
    "start": "963563",
    "end": "970410"
  },
  {
    "text": "Others will have another\ncapacitor on the other side. That's a function of-- what\nthe LISN looks like exactly",
    "start": "970410",
    "end": "975480"
  },
  {
    "text": "inside depends on the standard.  Other questions?",
    "start": "975480",
    "end": "981000"
  },
  {
    "text": " So presenting a\nnon-LISN impedance",
    "start": "981000",
    "end": "986380"
  },
  {
    "text": "lets me make repeatable\nmeasurements on my converter. And if I measure it this\nweek, I get the same result",
    "start": "986380",
    "end": "994240"
  },
  {
    "text": "as next week. Usually the way\nyou would do this-- I should say, by the\nway, there's a lot of--",
    "start": "994240",
    "end": "1000300"
  },
  {
    "text": "if you look up to get very,\nvery repeatable measurements, they have all\nkinds of standards. Your converter has to be\none meter or some specified",
    "start": "1000300",
    "end": "1009600"
  },
  {
    "text": "height over a ground plane. It's like they make all the\nconditions exactly identical,",
    "start": "1009600",
    "end": "1015222"
  },
  {
    "text": "which aren't\nreal-world conditions, but they're just designed\nto make the test repeatable. And you follow that.",
    "start": "1015222",
    "end": "1020983"
  },
  {
    "text": "So very often, if you're trying\nto qualify a power supply, you'll ultimately go to a test\nhouse that that's what they do.",
    "start": "1020983",
    "end": "1028619"
  },
  {
    "text": "What you do in the lab is you\ncan set up an approximation to that usually. I mean, you can set\nup a real test stand",
    "start": "1028619",
    "end": "1034380"
  },
  {
    "text": "if you're a company that's\nmaking lots of parts. But at home, you\ncan go buy a LISN and do an approximation to that.",
    "start": "1034380",
    "end": "1040397"
  },
  {
    "text": "And it'll be pretty good. It's good enough for\ndesigning a power supply if you put a bunch\nof margin in your answers.",
    "start": "1040398",
    "end": "1045769"
  },
  {
    "text": "And the way this thing-- the way the specifications are\nread is, for conducting EMI,",
    "start": "1045770",
    "end": "1050870"
  },
  {
    "text": "you'll look at this\nresponse, spectrum analyzer configured a certain way with\ncertain kinds quasi peak or peak",
    "start": "1050870",
    "end": "1058210"
  },
  {
    "text": "detectors. There's a whole bunch\nof rules around it. And you're generally\nmeasuring the energy",
    "start": "1058210",
    "end": "1064150"
  },
  {
    "text": "in different frequency\nbands and seeing, do they go above\nan allowed limit?",
    "start": "1064150",
    "end": "1070320"
  },
  {
    "text": "And those allowed\nlimits are really small. So if I thought I had--",
    "start": "1070320",
    "end": "1075559"
  },
  {
    "text": " this was tens of amps,\nhere I might be required",
    "start": "1075560",
    "end": "1083900"
  },
  {
    "text": "to get tens of microamps. So it's really small\ncurrents that you've got to attenuate down to.",
    "start": "1083900",
    "end": "1092279"
  },
  {
    "text": "So when I show you, oh,\nwe've got a capacitor here,",
    "start": "1092280",
    "end": "1099140"
  },
  {
    "text": "the model for this would\nthen be basically a capacitor in parallel with\n50 ohms, and I'm trying to measure that\nvoltage ripple on the 50 ohms,",
    "start": "1099140",
    "end": "1106570"
  },
  {
    "text": "you're going to need more than\na capacitor to make this work. So very often, you're going\nto need a multi-stage filter.",
    "start": "1106570",
    "end": "1113730"
  },
  {
    "text": "I will say, one other\nthing, by the way, I've drawn this as if you\nhave a LISN that you stick",
    "start": "1113730",
    "end": "1120770"
  },
  {
    "text": "in between your power\nsource and your converter, and you do, but typically,\nmost specifications",
    "start": "1120770",
    "end": "1126799"
  },
  {
    "text": "require that you put a LISN on\nthis lead and a separate LISN on this lead.",
    "start": "1126800",
    "end": "1132710"
  },
  {
    "text": "So there's actually two LISNs\ninvolved in a DC system test.",
    "start": "1132710",
    "end": "1138510"
  },
  {
    "text": "We'll come back to why\nyou would do that later. But the basic concept\nis not changed.",
    "start": "1138510",
    "end": "1145080"
  },
  {
    "text": "It's the same idea. Now, let's just think\nof what we would need.",
    "start": "1145080",
    "end": "1153180"
  },
  {
    "text": "I said, OK, a\ncapacitor is not really going to cut it for\nthis measurement.",
    "start": "1153180",
    "end": "1160100"
  },
  {
    "text": "So let me think\nabout my converter as some current ix or ix tilde.",
    "start": "1160100",
    "end": "1170539"
  },
  {
    "text": "This is the ripple\nfrom my converter.  If a converter-- if a capacitor\nis not going to be enough,",
    "start": "1170540",
    "end": "1182300"
  },
  {
    "text": "what would be my\nbasic building block? My basic building block might\nlook something like this.",
    "start": "1182300",
    "end": "1189350"
  },
  {
    "text": "It might be some\nfilter capacitor Cf. And the first\nstage could be just my input capacitor, my\nconverter, which I would always",
    "start": "1189350",
    "end": "1196430"
  },
  {
    "text": "have and some inductor Lf. Now, this is not\nthe LISN inductor.",
    "start": "1196430",
    "end": "1202710"
  },
  {
    "text": "This is my filter inductor. So this is my filter. And then eventually I look\nback into the LISN impedance.",
    "start": "1202710",
    "end": "1211460"
  },
  {
    "text": "And this would be z\nLISN looking here. And at ripple frequencies,\nmaybe that looks like 50 ohms.",
    "start": "1211460",
    "end": "1219076"
  },
  {
    "text": " So a basic building\nblock is an Lc filter.",
    "start": "1219076",
    "end": "1228200"
  },
  {
    "text": "What is the transfer function--\nif I said this was ix tilde and this was iy tilde, what\ndoes the transfer function",
    "start": "1228200",
    "end": "1236630"
  },
  {
    "text": "of this thing look like? The magnitude of iy tilde\nover ix tilde versus omega.",
    "start": "1236630",
    "end": "1246750"
  },
  {
    "text": "And this is going\nto be a log scale, and this is going\nto be a log scale.",
    "start": "1246750",
    "end": "1252050"
  },
  {
    "text": "At DC, all the\ncurrent goes back. So at DC, I'm going to get\nthis at really low frequencies.",
    "start": "1252050",
    "end": "1261680"
  },
  {
    "text": "Then I'm going to have\nsome region that's 1 over the square root of\nLfCf, which is going to be",
    "start": "1261680",
    "end": "1269480"
  },
  {
    "text": "the cutoff of this filter. And at really high frequencies,\nthis is going to fall off as 1",
    "start": "1269480",
    "end": "1278690"
  },
  {
    "text": "over omega squared, or\nminus 40 db per decade.",
    "start": "1278690",
    "end": "1286409"
  },
  {
    "text": "So the idea here is I can go\nget a bunch of attenuation. I'm going to put this\ncutoff of this filter",
    "start": "1286410",
    "end": "1291530"
  },
  {
    "text": "well below my 150 kilohertz\nthat I care about attenuating",
    "start": "1291530",
    "end": "1296630"
  },
  {
    "text": "and live off of this\nattenuation out here. Now, why is that going\nas 1 over omega squared?",
    "start": "1296630",
    "end": "1304380"
  },
  {
    "text": "Just as a reminder, the\nimpedance of the capacitor, the magnitude of zc,\ngoes as 1 over omega C.",
    "start": "1304380",
    "end": "1314910"
  },
  {
    "text": "So this is getting to be a\nsmaller impedance as frequency goes up. And z sub L is going as\nomega L. So basically,",
    "start": "1314910",
    "end": "1324630"
  },
  {
    "text": "you get an omega squared\nfactor because he's getting-- it's a current divider,\nand he's getting smaller",
    "start": "1324630",
    "end": "1330150"
  },
  {
    "text": "inversely proportional to\nomega, and he's getting bigger proportional to omega. So you get a kind of an\nomega squared attenuation.",
    "start": "1330150",
    "end": "1336840"
  },
  {
    "text": "So the way you might\nwant to think about this is your filter's working\nbecause of the mismatch",
    "start": "1336840",
    "end": "1343170"
  },
  {
    "text": "between the shunt path\nand the series path. And if I don't like this, I\ncan build higher-order filters",
    "start": "1343170",
    "end": "1350010"
  },
  {
    "text": "and so forth. And we'll talk about that. I haven't said what happens\nin the vicinity of cutoff.",
    "start": "1350010",
    "end": "1356850"
  },
  {
    "text": "That's an important thing. And we're going to have\nto think about that. But let's for the\nmoment not worry about--",
    "start": "1356850",
    "end": "1367620"
  },
  {
    "text": "not worry about\nwhat's going on here. We'll come back to that point. So any questions up to now?",
    "start": "1367620",
    "end": "1374315"
  },
  {
    "start": "1374315",
    "end": "1381299"
  },
  {
    "text": "So I want to build this filter. And as I said, I need\na lot of attenuation.",
    "start": "1381300",
    "end": "1388796"
  },
  {
    "text": " If I'm going from 100\namps to 100 microamps,",
    "start": "1388796",
    "end": "1394230"
  },
  {
    "text": "that's six orders\nof attenuation. So I'm going to probably need a\npretty low cutoff filter here.",
    "start": "1394230",
    "end": "1405350"
  },
  {
    "text": "I'm going to need a\nbunch of attenuation. And one of the\nthings that people",
    "start": "1405350",
    "end": "1410510"
  },
  {
    "text": "find about designing EMI\nfilters, your average power electronics guy hates it.",
    "start": "1410510",
    "end": "1416780"
  },
  {
    "text": "Why do they hate it? They hate it because\nyou can very get-- you can very often get very kind\nof seemingly anomalous results.",
    "start": "1416780",
    "end": "1425809"
  },
  {
    "text": "Like, you're doing stuff, and\nyou're just getting noise, and you don't want this noise.",
    "start": "1425810",
    "end": "1431400"
  },
  {
    "text": "And it becomes a problem. It's hard to get the good result\nthat a simple picture like this",
    "start": "1431400",
    "end": "1440940"
  },
  {
    "text": "would suggest that you can get. So let me tell\nyou-- just give you",
    "start": "1440940",
    "end": "1446309"
  },
  {
    "text": "a heads up about\nsome of the things you got to pay attention\nto when you're doing this.",
    "start": "1446310",
    "end": "1451330"
  },
  {
    "text": "And the first of these things\nis component parasitics.",
    "start": "1451330",
    "end": "1457740"
  },
  {
    "text": "So if I were to look at this\nfilter, and I'd say, jeez,",
    "start": "1457740",
    "end": "1463020"
  },
  {
    "text": "what does this look like? Well, I said my capacitor-- ",
    "start": "1463020",
    "end": "1469980"
  },
  {
    "text": "if I looked at my\ncapacitor, and I said, what is the\nmagnitude of z sub C?",
    "start": "1469980",
    "end": "1476130"
  },
  {
    "text": "I said that the magnitude of\nz sub C should fall off as 1",
    "start": "1476130",
    "end": "1481800"
  },
  {
    "text": "over omega C, right? So this is the\nmagnitude of z sub C.",
    "start": "1481800",
    "end": "1487260"
  },
  {
    "text": "And if I had an ideal capacitor,\nit would do that forever.",
    "start": "1487260",
    "end": "1493140"
  },
  {
    "text": "But what about a real capacitor? Well, a real capacitor,\neven though I think of it",
    "start": "1493140",
    "end": "1505790"
  },
  {
    "text": "as an energy storage\nelement, the plates do have some resistance.",
    "start": "1505790",
    "end": "1511669"
  },
  {
    "text": "There's actually some\nresistance of the wiring going into that thing. So as a practical\nmatter, a real capacitor",
    "start": "1511670",
    "end": "1521000"
  },
  {
    "text": "is going to have some\nESR, series resistance.",
    "start": "1521000",
    "end": "1526700"
  },
  {
    "text": "So what's that going to do? Well, there's going to be some\nfrequency above which this ESR",
    "start": "1526700",
    "end": "1535350"
  },
  {
    "text": "has a bigger impedance than the\ncapacitor, the ideal portion of the capacitor.",
    "start": "1535350",
    "end": "1541010"
  },
  {
    "text": "So what I would expect\nis beyond some frequency, there's going to be some place\nwhere our R ESR is dominant.",
    "start": "1541010",
    "end": "1552990"
  },
  {
    "text": "So instead of falling off\nforever as 1 over omega, it flattens out eventually. And then if I keep\ngoing up in frequency,",
    "start": "1552990",
    "end": "1562580"
  },
  {
    "text": "I'm going to get\nto some point where I have some equivalent\nseries inductance, L ESL.",
    "start": "1562580",
    "end": "1572180"
  },
  {
    "text": "Why does that exist? Because there is space\nbetween the capacitors, and if I have\ncurrent through it, there's some magnetic\nfield in there.",
    "start": "1572180",
    "end": "1579020"
  },
  {
    "text": "And there's just a\nlittle bit of inductance. It doesn't have to be\nvery much, but we're talking about going to\nvery high frequencies.",
    "start": "1579020",
    "end": "1586370"
  },
  {
    "text": "So at some point,\nthis ESL will even get to have a high-- because\nthis is growing with omega,",
    "start": "1586370",
    "end": "1593570"
  },
  {
    "text": "it's going to go up.  So my overall contour of my\nimpedance doesn't fall forever,",
    "start": "1593570",
    "end": "1602059"
  },
  {
    "text": "but rather, it sort of\ndoes this kind of falls, flattens out, and goes up. And maybe this--",
    "start": "1602060",
    "end": "1608810"
  },
  {
    "text": "I've shown you a\nhigh ESR capacitor. Depending upon whether the\nESR is greater than or less",
    "start": "1608810",
    "end": "1614330"
  },
  {
    "text": "than the square root\nof L over C ESL-- L ESL over C, this will be very\nsharply tuned or very broad.",
    "start": "1614330",
    "end": "1623060"
  },
  {
    "text": "But either way, you're going\nto get this kind of behavior. Why am I harping on this?",
    "start": "1623060",
    "end": "1629630"
  },
  {
    "text": "Because if I thought of\nthis as my real element, now I plug this thing in\nplace of my capacitor.",
    "start": "1629630",
    "end": "1638929"
  },
  {
    "text": "What would I expect\nmy attenuation to look like in that case? Well, I said it was\nbased on the mismatch",
    "start": "1638930",
    "end": "1645955"
  },
  {
    "text": "between this\nimpedance going down and this impedance going up. So eventually, instead of\nturning into an LC filter,",
    "start": "1645955",
    "end": "1654019"
  },
  {
    "text": "it turns into an LR filter. So instead of falling off\nas 1 over omega squared,",
    "start": "1654020",
    "end": "1659480"
  },
  {
    "text": "it's going to fall\noff as 1 over omega. And when I get to\nreally high frequencies,",
    "start": "1659480",
    "end": "1666260"
  },
  {
    "text": "ESL is going to dominate, and\nthen I'm just going to have a-- I'm just going to have a current\ndivider between L ESL and L",
    "start": "1666260",
    "end": "1673280"
  },
  {
    "text": "filter. And in fact, what that's going\nto mean is my attenuation",
    "start": "1673280",
    "end": "1678290"
  },
  {
    "text": "is just going to flatten out. So if I design my\nfilter thinking,",
    "start": "1678290",
    "end": "1683450"
  },
  {
    "text": "oh, jeez, that's how I get\nmy six orders of magnitude,",
    "start": "1683450",
    "end": "1688610"
  },
  {
    "text": "and I come back and I'm\nreally dealing with something where at that frequency,\nthis capacitor doesn't",
    "start": "1688610",
    "end": "1694190"
  },
  {
    "text": "look like a capacitor, it\nlooks like a little inductor, my EMI might be way higher than\nI thought it was going to be.",
    "start": "1694190",
    "end": "1702565"
  },
  {
    "text": "My filtering is\njust going to get clobbered by the parasitic\ninductance of my capacitor.",
    "start": "1702565",
    "end": "1711049"
  },
  {
    "text": "Now, I will say that, by\nthe way, you know this-- and by the way, where does\nthis kind of phenomena happen?",
    "start": "1711050",
    "end": "1716790"
  },
  {
    "text": "Well, it depends on the\nsize of your capacitor, the physical size\nof your capacitor. It depends on whether\nit's a good capacitor",
    "start": "1716790",
    "end": "1723442"
  },
  {
    "text": "or not, et cetera. But very often, like 10\nmegahertz kind of frequencies is where these things are\nhappening, as an example,",
    "start": "1723442",
    "end": "1730160"
  },
  {
    "text": "or even 1 megahertz-- depends\non the size of the component. And that's right in the band\nthat you're caring about and trying to attenuate.",
    "start": "1730160",
    "end": "1737150"
  },
  {
    "text": "So these bad parasitics\nof the components-- and usually the capacitor is the\nfirst thing to give out on you",
    "start": "1737150",
    "end": "1744530"
  },
  {
    "text": "if you design the\ninductors right-- will cause you to get a lot\nless attenuation out of this LC",
    "start": "1744530",
    "end": "1749960"
  },
  {
    "text": "filter than you thought. Any questions about that? ",
    "start": "1749960",
    "end": "1757450"
  },
  {
    "text": "So that's kind of a problem. ",
    "start": "1757450",
    "end": "1766309"
  },
  {
    "text": "What would I do about it? What I might do about it is\nnot just have one capacitor",
    "start": "1766310",
    "end": "1775640"
  },
  {
    "text": "but have a bunch of\ncapacitors, some of which might be good at-- they're\nnot a very high C value,",
    "start": "1775640",
    "end": "1783170"
  },
  {
    "text": "but they don't have\nas much inductance. And so they look better\nat high frequencies",
    "start": "1783170",
    "end": "1788450"
  },
  {
    "text": "than bigger capacitors that\nhave better performance at low frequencies but not\nas good as high frequencies.",
    "start": "1788450",
    "end": "1793530"
  },
  {
    "text": "So I can certainly do\nit by being careful about how I pick this component\nor picking multiple components",
    "start": "1793530",
    "end": "1799550"
  },
  {
    "text": "to cover different\nfrequency ranges. And if I have multiple\ncomponents, by the way, I can get resonances\nbetween them.",
    "start": "1799550",
    "end": "1804929"
  },
  {
    "text": "But that's another story. What else can I do? I might say, well, OK,\nif I'm limited by ESL,",
    "start": "1804930",
    "end": "1815920"
  },
  {
    "text": "I will use a bigger Lf, but\nyou're still only getting a divider that's a\nproportion between these two,",
    "start": "1815920",
    "end": "1822130"
  },
  {
    "text": "the ratio of those two. If I want really more\nattenuation, what I can do",
    "start": "1822130",
    "end": "1828340"
  },
  {
    "text": "is do a higher-stage filter. So here's ix tilde.",
    "start": "1828340",
    "end": "1837340"
  },
  {
    "text": "Maybe I build a first stage-- I'll call this Cf1 and Lf1.",
    "start": "1837340",
    "end": "1846670"
  },
  {
    "text": "And I'm leaving out\ndamping and other things I'm going to talk\nabout in the future. And then maybe I have\nCf2 and Lf2 and so forth.",
    "start": "1846670",
    "end": "1859790"
  },
  {
    "text": "And then maybe I have my-- I'm looking back into\nR LISN back here.",
    "start": "1859790",
    "end": "1866020"
  },
  {
    "text": "So maybe I can get 40 db\nper decade out of this and 40 db per\ndecade out of this.",
    "start": "1866020",
    "end": "1871100"
  },
  {
    "text": "And maybe I do better. And it may be better to do\nthat even in a lot of cases because even putting\naside the parasitics,",
    "start": "1871100",
    "end": "1878659"
  },
  {
    "text": "I can move the cutoff\nfrequency down 1 over the square root of LC. By using bigger and\nbigger components,",
    "start": "1878660",
    "end": "1885050"
  },
  {
    "text": "I can move that\ncutoff filter down. Here, maybe I use\nsmaller components,",
    "start": "1885050",
    "end": "1890750"
  },
  {
    "text": "but instead of getting a\n40 db per decade roll-off,",
    "start": "1890750",
    "end": "1897470"
  },
  {
    "text": "I could theoretically\nget 80 out of this. So even if the net\ncutoff's higher, that fast attenuation\nwill help me.",
    "start": "1897470",
    "end": "1903140"
  },
  {
    "text": "So it's often better to go for\nsmaller multi-stage filters than one big fat single\nfilter stage trying",
    "start": "1903140",
    "end": "1913660"
  },
  {
    "text": "to get the attenuation I want. And by the way, when you do\nthis, for reasons I'm not really",
    "start": "1913660",
    "end": "1920020"
  },
  {
    "text": "going to go into\nthe details of this because we don't have time-- when you design\nthese kind of things, it might be your\ninclination to say, oh,",
    "start": "1920020",
    "end": "1928659"
  },
  {
    "text": "let me use the same LfCf\ncutoff here and here and put two filters\nwith the same cutoff.",
    "start": "1928660",
    "end": "1934070"
  },
  {
    "text": "It turns out to be better\nto stagger these things. So usually, you'd make\nthis one a low cutoff and then this one\na higher cutoff",
    "start": "1934070",
    "end": "1941012"
  },
  {
    "text": "to deal with the higher\nfrequency and so forth. It turns out to be a better\nkind of design strategy for these kind of filters.",
    "start": "1941012",
    "end": "1946970"
  },
  {
    "text": "So you can cascade\nfilter sections until you get the\nattenuation you need.",
    "start": "1946970",
    "end": "1952250"
  },
  {
    "text": "And if you look in a\ntypical offline power supply that you'd plug into\nthe wall, they usually",
    "start": "1952250",
    "end": "1957260"
  },
  {
    "text": "have a couple filter\nstages like this. Any questions about that?",
    "start": "1957260",
    "end": "1962710"
  },
  {
    "text": " I should warn you too--",
    "start": "1962710",
    "end": "1968090"
  },
  {
    "text": "I said, oh, people hate these--  they hate dealing with the EMI\nbecause you go to measure stuff",
    "start": "1968090",
    "end": "1976720"
  },
  {
    "text": "and then what you measure\ndoesn't seem to make sense. And it all does make sense,\nbut very small phenomena",
    "start": "1976720",
    "end": "1986100"
  },
  {
    "text": "can mess you up. So think about this. This filter and\nit's cutoff regime, putting aside these parasitics\nI was talking about,",
    "start": "1986100",
    "end": "1995250"
  },
  {
    "text": "could give you 80 db per decade. You can get really like,\nwham, lots of attenuation.",
    "start": "1995250",
    "end": "2001049"
  },
  {
    "text": "And that's good because you\nneed a lot of attenuation. But what's the downside? Well, one thing is the\ncomponent parasitics themselves.",
    "start": "2001050",
    "end": "2008060"
  },
  {
    "text": "And I focused on the capacitor. The inductors do have-- if you put a\ncapacitance, inductors",
    "start": "2008060",
    "end": "2015110"
  },
  {
    "text": "do have a parasitic\nparallel capacitance. You also have to\nworry about that one. But putting aside that\nparasitic, you also",
    "start": "2015110",
    "end": "2022010"
  },
  {
    "text": "have layout parasitics,\nmeaning if I do a crummy job",
    "start": "2022010",
    "end": "2027110"
  },
  {
    "text": "and I don't stick the components\ninto the board all the way or I put two components\nnext to each other,",
    "start": "2027110",
    "end": "2034970"
  },
  {
    "text": "they can have\ncapacitance between them. So I can accidentally\ninsert inductance,",
    "start": "2034970",
    "end": "2040942"
  },
  {
    "text": "or I can accidentally\ninsert capacitance. And one of the things\nthat can happen is imagine this is my\npower supply input leads,",
    "start": "2040942",
    "end": "2049570"
  },
  {
    "text": "and over here is where\nit's going to go off to-- I'm showing the\nLISN here, but this",
    "start": "2049570",
    "end": "2054850"
  },
  {
    "text": "is where it goes off to\nthe power supply input. What if I put those\nleads near each other?",
    "start": "2054850",
    "end": "2060669"
  },
  {
    "text": "Well, then maybe what\nI would end up with is some small\nparasitic capacitance",
    "start": "2060670",
    "end": "2066730"
  },
  {
    "text": "from this node past my\nfilter to this node.",
    "start": "2066730",
    "end": "2073780"
  },
  {
    "text": "And so what happens? This filter is doing\nsome great job, massively killing the noise.",
    "start": "2073780",
    "end": "2079730"
  },
  {
    "text": "But this, because this node has\nsome switching ripple at it, it's being injected\nthrough this.",
    "start": "2079730",
    "end": "2085989"
  },
  {
    "text": "Maybe it's a picofarad\nof capacitance. It doesn't even\nhave to be very much if you have a high attenuation\nfilter getting over to here",
    "start": "2085989",
    "end": "2092860"
  },
  {
    "text": "and completely\nbypassing your filter. So you're getting\nbad results, you're measuring stuff over here, and\nyou make this filter better",
    "start": "2092860",
    "end": "2099730"
  },
  {
    "text": "and nothing happens. You make this filter\nbetter and nothing happens. Why? Because it's not going\nthrough your filter. It's going around your filter.",
    "start": "2099730",
    "end": "2106390"
  },
  {
    "text": "And that's the kind of thing\nthat drives people nuts. So you have to think very\ncarefully about your layout.",
    "start": "2106390",
    "end": "2113290"
  },
  {
    "text": "People really try to have a\nquiet side and a noisy side",
    "start": "2113290",
    "end": "2118790"
  },
  {
    "text": "so that they stay\nphysically far apart so you don't get capacitive bridging.",
    "start": "2118790",
    "end": "2123799"
  },
  {
    "text": "You can also have\nmagnetic bridging. If I have this-- if this loop with a\nlot of switching ripple",
    "start": "2123800",
    "end": "2129529"
  },
  {
    "text": "has mutual inductance\nto this loop, even if there's\nno capacitance, I can get magnetically coupled\nright across through my layout",
    "start": "2129530",
    "end": "2138730"
  },
  {
    "text": "and completely ruin\nmy filter performance. We had some-- there's a\npower supply I worked on",
    "start": "2138730",
    "end": "2148500"
  },
  {
    "text": "with a friend for\ncommercial application. And we designed it, and\nit didn't quite make the--",
    "start": "2148500",
    "end": "2160150"
  },
  {
    "text": "couldn't pass the spec. We weren't passing the spec. We went and we\nmoved on the board",
    "start": "2160150",
    "end": "2165820"
  },
  {
    "text": "a trace about 3\nor 4 millimeters.",
    "start": "2165820",
    "end": "2170830"
  },
  {
    "text": "Suddenly we were\npassing it fine. It was exactly that phenomenon. There was a noisy port that\nwas too close to the input.",
    "start": "2170830",
    "end": "2178150"
  },
  {
    "text": "And we were capacitively\ncoupling the energy into the input. And all we had to do\nwas move the trace. And that trace, that\nparasitic isn't showing up",
    "start": "2178150",
    "end": "2184869"
  },
  {
    "text": "in your schematic. It's not showing up\nanywhere, but it's there in the real world. And you have to go find it.",
    "start": "2184870",
    "end": "2190109"
  },
  {
    "text": "We moved that one\nplane, and we were fine. So you've got to-- you've got\nto spend a lot of time thinking",
    "start": "2190110",
    "end": "2196490"
  },
  {
    "text": "about this. What they do in\ncommercial EMI filters is they often will have\na filter stage like this",
    "start": "2196490",
    "end": "2202580"
  },
  {
    "text": "and put this inside\na shielded box and then have some feedthroughs\ngoing to the next filter stage and so forth, and they can build\ncommercial EMI filters that way.",
    "start": "2202580",
    "end": "2210110"
  },
  {
    "text": "And that's great. The sad news about being a\npower electronics designer is usually they won't\nlet you do that.",
    "start": "2210110",
    "end": "2215990"
  },
  {
    "text": "Nobody's going to let you\nhave shielded boxes and so forth in your converter. So you've just got to be very\nclever about how you lay things",
    "start": "2215990",
    "end": "2223430"
  },
  {
    "text": "out and keep things from\ncoupling magnetically and keep things from coupling\ncapacitively. And that's often an iterative\nprocess to get it to the point",
    "start": "2223430",
    "end": "2231170"
  },
  {
    "text": "where you've realized\nwhat's going to happen with all the parasitics. So that's a way\nto, first of all,",
    "start": "2231170",
    "end": "2238400"
  },
  {
    "text": "warn you what's to\ncome if you go do this and to not get frustrated. Just look for where\nnonidealities, either layout",
    "start": "2238400",
    "end": "2247870"
  },
  {
    "text": "parasitics or\ncomponent parasitics, are going to come bite\nyou, and then fix those.",
    "start": "2247870",
    "end": "2258922"
  },
  {
    "text": "You've also got to worry\nabout the measurements being right too.",
    "start": "2258922",
    "end": "2264210"
  },
  {
    "text": "On one project I did\nwith a colleague, we took our prototype\nto a test house,",
    "start": "2264210",
    "end": "2270510"
  },
  {
    "text": "one of these commercial\nfacilities, tested it, qualified the power supply. Yes, you can plug this\nthing into the wall.",
    "start": "2270510",
    "end": "2276550"
  },
  {
    "text": "Went on our merry way. Company calls us up. And this was a power supply\nthat went into a water purity",
    "start": "2276550",
    "end": "2283589"
  },
  {
    "text": "meter that then went on to\nother semiconductor equipment. And get a call from the\npeople we designed the power",
    "start": "2283590",
    "end": "2290190"
  },
  {
    "text": "supply for. Yeah, our customers\ncame back to us and said that their equipment\nwas failing EMI tests,",
    "start": "2290190",
    "end": "2301520"
  },
  {
    "text": "and they tracked their\nfailure of the EMI test back to this one\nbox that we make.",
    "start": "2301520",
    "end": "2307950"
  },
  {
    "text": "And of course, we had designed\nthe EMI filter for it. What's going on? We've got to fix this problem\nbecause their customer's unhappy",
    "start": "2307950",
    "end": "2314180"
  },
  {
    "text": "because they're not passing FCC. But of course, we're\npuzzled because we think we've passed the test.",
    "start": "2314180",
    "end": "2319880"
  },
  {
    "text": "Come to track\nback, what happened is we took it to a\ncommercial test facility, and they had been doing\nwork on their test setup.",
    "start": "2319880",
    "end": "2326090"
  },
  {
    "text": "And their test setup had\ngotten messed up and wasn't grounded properly. So basically, the results they\nwere showing from their test",
    "start": "2326090",
    "end": "2334280"
  },
  {
    "text": "setup said it was\npassing, and it wasn't. We took it to a\ndifferent facility. It was failing. And that's when we went back and\nchanged the design, improved it,",
    "start": "2334280",
    "end": "2340670"
  },
  {
    "text": "and suddenly it\npassed everything. So there's a lot of\nlayout challenges. And there's a lot of\nmeasurement challenges.",
    "start": "2340670",
    "end": "2347390"
  },
  {
    "text": "And you just got to be\nwilling to dig through them. And eventually,\nyou'll get something. But when you're dealing\nwith power supplies,",
    "start": "2347390",
    "end": "2354740"
  },
  {
    "text": "you don't try to\ndesign something that's going to pass by a few\ndb the specifications,",
    "start": "2354740",
    "end": "2360630"
  },
  {
    "text": "like by a small margin. You want to give\nyourself-- you want to you want to really pass it.",
    "start": "2360630",
    "end": "2366310"
  },
  {
    "text": "Because the reason\nis, even with all that craziness to try to\nkeep everything identical,",
    "start": "2366310",
    "end": "2372750"
  },
  {
    "text": "you're going to have variations\nin your design in one test setup or another or component\nvariations in the manufacturing",
    "start": "2372750",
    "end": "2380400"
  },
  {
    "text": "that aren't quite the same. So you need to give\nyourself a bunch of margin around the specifications.",
    "start": "2380400",
    "end": "2386590"
  },
  {
    "text": "And if we had had more\nmargin in the first design, they probably wouldn't\nhave even come back, even though the\ntest results were--",
    "start": "2386590",
    "end": "2392670"
  },
  {
    "text": "it wasn't our fault that\nthe test system was wrong. Actually, we got nicely paid\nto debug the EMI facility's",
    "start": "2392670",
    "end": "2398310"
  },
  {
    "text": "problems for them, but\nthat was another story. So just to illustrate these\nphenomena-- and so what",
    "start": "2398310",
    "end": "2410154"
  },
  {
    "text": "are we going to talk about? We're going to talk about a\nbit more about filter design and a bunch of other\nphenomena that come up.",
    "start": "2410155",
    "end": "2416200"
  },
  {
    "text": "But I just wanted to\nillustrate this whole question about, first of all,\ncomponent parasitics, which",
    "start": "2416200",
    "end": "2424500"
  },
  {
    "text": "are very real even if\nyou do your best layout. But also, if you do a bad\njob, if you accidentally",
    "start": "2424500",
    "end": "2432750"
  },
  {
    "text": "put a capacitance here\nor you accidentally-- because you don't place\nthis capacitor very well,",
    "start": "2432750",
    "end": "2439200"
  },
  {
    "text": "you have extra lead\nlength going to it and you insert some inductance,\nyou'll make everything worse. So you want to be really careful\nabout your circuit layout.",
    "start": "2439200",
    "end": "2446290"
  },
  {
    "text": "And we have a demo of this. And what this is, essentially,\nis a set of four filters here.",
    "start": "2446290",
    "end": "2452859"
  },
  {
    "text": "These are just LC filters. And I'm going to let\nRafa demonstrate. And what we have is\na network analyzer.",
    "start": "2452860",
    "end": "2459580"
  },
  {
    "text": "What a network analyzer does\nis it drives at one port, like our signal ix,\nand then it measures",
    "start": "2459580",
    "end": "2467070"
  },
  {
    "text": "into another port, which would\nbe like our signal at the LISN. And let's see the behavior\nof the same filter--",
    "start": "2467070",
    "end": "2476320"
  },
  {
    "text": "it has the same\nphysical component, just placed slightly differently-- on\nthe performance of the filter. And with that, I'll hand it over\nto Rafa and let her explain.",
    "start": "2476320",
    "end": "2485372"
  },
  {
    "text": "GUEST SPEAKER: Do I have\nto use the microphone? DAVID PERREAULT: I think so. GUEST SPEAKER: OK.",
    "start": "2485372",
    "end": "2490410"
  },
  {
    "text": "All right, so, like\nDave mentioned, we have four different filters\nwith four different layout",
    "start": "2490410",
    "end": "2496770"
  },
  {
    "text": "strategies. In some of them, we\nare being careful about both the parasitic\ninductance and capacitance.",
    "start": "2496770",
    "end": "2502840"
  },
  {
    "text": "In some of them, only one. DAVID PERREAULT: So\nyeah, I'll let Rafa--",
    "start": "2502840",
    "end": "2508440"
  },
  {
    "text": "I'll let Rafa do the testing\nwhile I do the explaining. So we have four filters.",
    "start": "2508440",
    "end": "2515190"
  },
  {
    "text": "The one she's going\nto start with, it's an LC filter\njust like this.",
    "start": "2515190",
    "end": "2520270"
  },
  {
    "text": "And all that happened is\nwe were sloppy about, both, how we inserted the capacitor. So there's a little\nextra inductance in here.",
    "start": "2520270",
    "end": "2529539"
  },
  {
    "text": "And the inductor, we\nplace traces nearby. So there's a bit of extra\ncapacitance across it.",
    "start": "2529540",
    "end": "2536500"
  },
  {
    "text": "So that's the first\ntrace we're going to see. And let's see what this does. ",
    "start": "2536500",
    "end": "2544400"
  },
  {
    "text": "GUEST SPEAKER: So this is\nthe filter where we don't-- where we are not careful\nabout the capacitance",
    "start": "2544400",
    "end": "2549830"
  },
  {
    "text": "and the inductance. DAVID PERREAULT:\nSo this is bad-- this is parasitic capacitance\nand parasitic inductance.",
    "start": "2549830",
    "end": "2556200"
  },
  {
    "text": "And so this is the\nattenuation of the filter. And we can see that the\nfilter attenuates down-- and by the way, we're going\nfrom 1 kilohertz to 20 megahertz",
    "start": "2556200",
    "end": "2563050"
  },
  {
    "text": "here. You can see even before\nwe get very far out, the filter ceases to attenuating\nand then it gets bad.",
    "start": "2563050",
    "end": "2570530"
  },
  {
    "text": "And these were the\ngood filter components, but we're just\ngetting bad results. The next one we're\ngoing to try--",
    "start": "2570530",
    "end": "2578090"
  },
  {
    "text": "what we did was\nwe said, OK, we're going to have OK layout\nof the capacitor, so",
    "start": "2578090",
    "end": "2587750"
  },
  {
    "text": "no parasitic\ninductance or as little as we can get from\nthe component itself, but we didn't fix the bad\nlayout across the inductor.",
    "start": "2587750",
    "end": "2597270"
  },
  {
    "text": "And so here we go. And what you can\nsee is, yeah, this",
    "start": "2597270",
    "end": "2603509"
  },
  {
    "text": "is a little bit better\nbecause of what we got, but it's still terrible.",
    "start": "2603510",
    "end": "2608630"
  },
  {
    "text": " The next one, we\nhave a bad layout",
    "start": "2608630",
    "end": "2615450"
  },
  {
    "text": "with parasitic inductance in\nseries with the capacitor, but we fixed the problem\nwith the inductor.",
    "start": "2615450",
    "end": "2621450"
  },
  {
    "text": "So we're fixing one at a time. ",
    "start": "2621450",
    "end": "2626460"
  },
  {
    "text": "And I should say, by the way,\nthat this test, notice we don't have a ground plane set up. We don't have all\nthis other stuff.",
    "start": "2626460",
    "end": "2632278"
  },
  {
    "text": "So this test sub\nwouldn't qualify for getting repeatable results\nin all kinds of systems. But here we go.",
    "start": "2632278",
    "end": "2638230"
  },
  {
    "text": "We have again-- I didn't fix both\nproblems, and hence",
    "start": "2638230",
    "end": "2643380"
  },
  {
    "text": "I still have bad performance. So this is the frustrating\nthing about these things, that, yeah, you fix one\nthing but not the other,",
    "start": "2643380",
    "end": "2651120"
  },
  {
    "text": "and you get the same\nkind of bad result. Now, let's do the final case.",
    "start": "2651120",
    "end": "2657660"
  },
  {
    "text": "And this final case is we've\ntaken the same components, but we've tried to do a good\njob of laying out the filter.",
    "start": "2657660",
    "end": "2663810"
  },
  {
    "text": "So this is our attempt to-- we're still going to have\ncomponent parasitics,",
    "start": "2663810",
    "end": "2669750"
  },
  {
    "text": "the internal resistance and\ninductance of the components.",
    "start": "2669750",
    "end": "2675490"
  },
  {
    "text": "But we're going to try to do a\nslightly better job about how we configure them on the board.",
    "start": "2675490",
    "end": "2680730"
  },
  {
    "text": "So here we go. What do we get now? ",
    "start": "2680730",
    "end": "2685960"
  },
  {
    "text": "Well, OK, there we go. Boom. Now, you say, well,\nis that very good?",
    "start": "2685960",
    "end": "2693039"
  },
  {
    "text": "Did we change it very much? But notice that\nthis log magnitude",
    "start": "2693040",
    "end": "2699640"
  },
  {
    "text": "scale is 20 db per division. That means the noise of the blue\ntrace is about a factor of 100",
    "start": "2699640",
    "end": "2709480"
  },
  {
    "text": "below the noise at\nthe white trace. So that's a really\nbig difference.",
    "start": "2709480",
    "end": "2715160"
  },
  {
    "text": "And for the others, it's\nmaybe a factor of 50 or something like that. So it's a substantial\namount below.",
    "start": "2715160",
    "end": "2723000"
  },
  {
    "text": "And this is just one example\nof just one filter stage, whether you've done a\ngood job or a bad job",
    "start": "2723000",
    "end": "2728530"
  },
  {
    "text": "with the parasitic elements. So when you go out\nto do this stuff-- this is the whole thing I want\nyou to take away from this--",
    "start": "2728530",
    "end": "2735430"
  },
  {
    "text": "really think about\nall the second order effects, the parasitics\nof the components,",
    "start": "2735430",
    "end": "2740500"
  },
  {
    "text": "and how you use them. And we try really\nhard to do things like keep the noisy input--",
    "start": "2740500",
    "end": "2747950"
  },
  {
    "text": "or the noisy converter\naway from the quiet input we're going to\nplug into the wall. Some days you just\ndon't get away from it",
    "start": "2747950",
    "end": "2754570"
  },
  {
    "text": "because they tell\nyou, no, you can't change where our connector is.",
    "start": "2754570",
    "end": "2759890"
  },
  {
    "text": "And just because the connector\nis right next to the noisy power supply, go figure it out.",
    "start": "2759890",
    "end": "2765460"
  },
  {
    "text": "And you have to live with it. But if you can, try to keep\nyour noisy stuff far away from your quiet stuff.",
    "start": "2765460",
    "end": "2771579"
  },
  {
    "text": "Try to reduce the parasitics by\nbeing very careful about how you",
    "start": "2771580",
    "end": "2776770"
  },
  {
    "text": "lay out your components--\nlow inductance insertion, low capacitance\nacross the components,",
    "start": "2776770",
    "end": "2781809"
  },
  {
    "text": "and that will go a long\nway towards getting around weird, anomalous\nbehavior and getting to be as good as you can.",
    "start": "2781810",
    "end": "2788142"
  },
  {
    "text": "And then even when\nyou do that and you're getting some worse\nperformance, getting worse around 20 megahertz, fine.",
    "start": "2788142",
    "end": "2794180"
  },
  {
    "text": "Now we'll cascade\nanother filter stage to handle the\nhigher frequencies. So that's about it for today.",
    "start": "2794180",
    "end": "2801210"
  },
  {
    "text": "Are there any questions\nbefore we wrap up this first introduction\nto EMI measurements? ",
    "start": "2801210",
    "end": "2808600"
  },
  {
    "text": "OK, we will see you next week. ",
    "start": "2808600",
    "end": "2816000"
  }
]