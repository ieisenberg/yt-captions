[
  {
    "start": "0",
    "end": "20000"
  },
  {
    "text": "The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6330"
  },
  {
    "text": "continue to offer high-quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6330",
    "end": "13320"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu.",
    "start": "13320",
    "end": "18370"
  },
  {
    "text": " RUSS TEDRAKE: OK. Welcome back. ",
    "start": "18370",
    "end": "26010"
  },
  {
    "start": "20000",
    "end": "470000"
  },
  {
    "text": "Since we ended abruptly,\nI want to start with a recap of last time. And then we've got a lot\nof new ground to cover.",
    "start": "26010",
    "end": "34020"
  },
  {
    "text": "So remember last\ntime, we considered",
    "start": "34020",
    "end": "43350"
  },
  {
    "text": "the system q double dot equals\nu, which is of a general form,",
    "start": "43350",
    "end": "50550"
  },
  {
    "text": "just a linear feedback system,\nwhich is state space form looks like this, where it\nhappens that a and b are",
    "start": "50550",
    "end": "60060"
  },
  {
    "text": "particularly simple.  And we looked at designing--",
    "start": "60060",
    "end": "66520"
  },
  {
    "text": "let's not say\ndesigning controller-- we looked at reshaping\nthe phase space a couple of different ways.",
    "start": "66520",
    "end": "72850"
  },
  {
    "text": "The first way, which is the\nsort of 6.302 way, maybe, would be designing sort\nof by pole placement,",
    "start": "72850",
    "end": "81659"
  },
  {
    "text": "by designing feedback gains\npossibly by hand, possibly by a root locus analysis.",
    "start": "81660",
    "end": "88960"
  },
  {
    "text": "So we looked at manually\ndesigning some linear feedback",
    "start": "88960",
    "end": "104700"
  },
  {
    "text": "law, u equals negative Kx. And we did things like plotting\nthe phase portrait, which",
    "start": "104700",
    "end": "120040"
  },
  {
    "text": "gave us for q, q dot\na phase portrait that",
    "start": "120040",
    "end": "136810"
  },
  {
    "text": "looked like this, where this has\nan eigenvalue of negative 3.75",
    "start": "136810",
    "end": "153090"
  },
  {
    "text": "approximately, and this one had\nan eigenvalue of negative 0.25.",
    "start": "153090",
    "end": "159330"
  },
  {
    "text": "This was all for K equals 1, 4. ",
    "start": "159330",
    "end": "166440"
  },
  {
    "text": "OK. And we ended up seeing that\njust from that quick analysis",
    "start": "166440",
    "end": "173129"
  },
  {
    "text": "we could see phase portraits\nwhich looked like this. They come across the\norigin, and then they'd",
    "start": "173130",
    "end": "178680"
  },
  {
    "text": "hook in towards the goal. ",
    "start": "178680",
    "end": "184349"
  },
  {
    "text": "And similarly here. This one's so much faster\nthat it would go like this. ",
    "start": "184350",
    "end": "192340"
  },
  {
    "text": "Then we looked at\nan optimal control way of solving the same thing.",
    "start": "192340",
    "end": "198930"
  },
  {
    "text": "We looked at doing a minimum\ntime optimal control approach,",
    "start": "198930",
    "end": "218220"
  },
  {
    "text": "not specifically so that\nwe could get there faster, even though \"minimum time\"\nis in the name, because here",
    "start": "218220",
    "end": "225135"
  },
  {
    "text": "remember, we could get\nthere arbitrarily fast by just cranking K as high\nas we wanted, but actually",
    "start": "225135",
    "end": "230189"
  },
  {
    "text": "for trying to do something\na little bit smarter, which is get there in minimum time\nwhen I have an extra constraint",
    "start": "230190",
    "end": "237630"
  },
  {
    "text": "that u was bounded, in the\ncase we looked at yesterday was bounded by negative 1, 1.",
    "start": "237630",
    "end": "244680"
  },
  {
    "text": "And in that case when\nu was bounded, now the minimum time problem\nbecomes nontrivial.",
    "start": "244680",
    "end": "250270"
  },
  {
    "text": "It's not just crank\nthe gains to infinity. And we had to use some\nbetter thinking about it.",
    "start": "250270",
    "end": "259079"
  },
  {
    "text": "And the result was a phase\nportrait which actually, I",
    "start": "259079",
    "end": "268980"
  },
  {
    "text": "don't know if you\nleft realizing, it didn't look that\ndifferent in some ways.",
    "start": "268980",
    "end": "276880"
  },
  {
    "text": "Remember, we had these\nswitching surfaces defined here.",
    "start": "276880",
    "end": "282840"
  },
  {
    "text": " And above this, we'd execute one\npolicy, one bang-bang solution.",
    "start": "282840",
    "end": "296820"
  },
  {
    "text": "And then below it we'd\nexecute another one. And the resulting system\ntrajectories-- remember,",
    "start": "296820",
    "end": "303900"
  },
  {
    "text": "this one hooked down across the\norigin and went into the goal like that.",
    "start": "303900",
    "end": "309600"
  },
  {
    "text": "This one really did exactly\nthe same thing, right? They would start over here.",
    "start": "309600",
    "end": "315599"
  },
  {
    "text": "They'd hook down here with-- this time they'd explicitly\nhit that switching surface",
    "start": "315600",
    "end": "321935"
  },
  {
    "text": "and then ride that\ninto the goal.  So it's a little bit of a\nsharper result, possibly,",
    "start": "321935",
    "end": "331230"
  },
  {
    "text": "than the other one. And that final surface was a\ncurve instead of this line.",
    "start": "331230",
    "end": "338520"
  },
  {
    "text": "And for that, we got to\nhave good performance with bounded torques.",
    "start": "338520",
    "end": "345150"
  },
  {
    "text": " Now, we also did the\nfirst of two ways",
    "start": "345150",
    "end": "356639"
  },
  {
    "text": "that we're going to use\nto sort of analytically investigate optimality. ",
    "start": "356640",
    "end": "367005"
  },
  {
    "text": "AUDIENCE: Can I interrupt you? RUSS TEDRAKE: Anytime, yeah. AUDIENCE: Was there a good\nreason we just-- basically said",
    "start": "367005",
    "end": "373980"
  },
  {
    "text": "we want to do linear\nfeedback there? Could we have done\nlike x1 times x2?",
    "start": "373980",
    "end": "380730"
  },
  {
    "text": "RUSS TEDRAKE: Good, yeah. Because-- well, there's\na lot of good reasons. So it's because then the closed\nloop dynamics are linear,",
    "start": "380730",
    "end": "388569"
  },
  {
    "text": "and we can analyze them\nin every way, including making these plots in\nways that I couldn't have",
    "start": "388570",
    "end": "394500"
  },
  {
    "text": "done if this was nonlinear. ",
    "start": "394500",
    "end": "399523"
  },
  {
    "text": "Another answer would be that\nthis is what 90% of the world would have done, if\nthat's satisfying at all.",
    "start": "399523",
    "end": "405210"
  },
  {
    "text": "I think that's the\ndominant way of sort of thinking about these things.",
    "start": "405210",
    "end": "411540"
  },
  {
    "text": "x1 times x2 is comparably\nmuch harder to reason about, actually. AUDIENCE: I totally get that.",
    "start": "411540",
    "end": "417371"
  },
  {
    "text": "But is there like a system\nthat the optimal control that lies in the space that\nyou have to take into",
    "start": "417371",
    "end": "424095"
  },
  {
    "text": "account these different\napproximations. RUSS TEDRAKE: Good. So this is an example of\na nonlinear controller.",
    "start": "424095",
    "end": "432500"
  },
  {
    "text": "It happens that the\nactual control action is either 1 or negative 1.",
    "start": "432500",
    "end": "437810"
  },
  {
    "text": "But the decision plane\nis very nonlinear. So that's absolutely a\nnonlinear controller.",
    "start": "437810",
    "end": "445620"
  },
  {
    "text": "It came out of linear-- out of optimal control\non a linear system. But the result is a\nnonlinear controller.",
    "start": "445620",
    "end": "452040"
  },
  {
    "text": "OK.  Now, certain classes of\nnonlinear controllers",
    "start": "452040",
    "end": "457048"
  },
  {
    "text": "are going to pop out and\nbe easier to think about than the broad class. But we're going to see lots of\ninstances as quickly as we can.",
    "start": "457048",
    "end": "464909"
  },
  {
    "start": "464910",
    "end": "470020"
  },
  {
    "text": "OK. So we did-- we actually got that\ncurve by thinking just about--",
    "start": "470020",
    "end": "475740"
  },
  {
    "text": "just using our intuition to\nreason about bang-bang control. At the end, I\nstarted to show you",
    "start": "475740",
    "end": "481530"
  },
  {
    "text": "that the same thing comes out of\nwhat I call solution technique 1 here.",
    "start": "481530",
    "end": "489360"
  },
  {
    "text": " I wouldn't call it that\noutside of the room.",
    "start": "489360",
    "end": "496590"
  },
  {
    "text": "That's just me being\nclear here, which was based on Pontryagin's\nminimum principle.",
    "start": "496590",
    "end": "503388"
  },
  {
    "start": "503388",
    "end": "517320"
  },
  {
    "text": "Which in this case, is\nnothing more than just-- let's write it\ndown, exactly what",
    "start": "517320",
    "end": "523049"
  },
  {
    "text": "we mean by this cost function.  We have some-- let me be\na little bit more loose.",
    "start": "523049",
    "end": "530370"
  },
  {
    "text": "We have J, some cost\nfunction we want to optimize, which is a finite\ntime integral of 1 dt.",
    "start": "530370",
    "end": "540780"
  },
  {
    "text": "That sounds ridiculous, but\nwe're just optimizing time.",
    "start": "540780",
    "end": "546180"
  },
  {
    "text": "But we want to optimize that\nsubject to the constraints that x dot equals f of\nx u, which in this case",
    "start": "546180",
    "end": "557520"
  },
  {
    "text": "is our linear system;\nand the constraint that u",
    "start": "557520",
    "end": "568580"
  },
  {
    "text": "was negative 1 in that regime;\nand the constraint that at time",
    "start": "568580",
    "end": "578240"
  },
  {
    "text": "t, x t had better\nbe at the origin. ",
    "start": "578240",
    "end": "584150"
  },
  {
    "text": "Given those\nconstraints, we can say let's minimize T. We're going\nto minimize that J, sorry.",
    "start": "584150",
    "end": "594275"
  },
  {
    "text": "I already got the\nt in there, so. Minimize with respect to\nthe trajectory in x, u,",
    "start": "594275",
    "end": "604490"
  },
  {
    "text": "that cost function. I use this overbar to\ndenote the entire time",
    "start": "604490",
    "end": "611060"
  },
  {
    "text": "history of a variable like x\nt1 to t final, or something",
    "start": "611060",
    "end": "618680"
  },
  {
    "text": "like this-- time t0 to t final. ",
    "start": "618680",
    "end": "624700"
  },
  {
    "text": "OK. That's how we set\nup the problem. It's just optimizing\nsome function but subject to a\nhandful of constraints.",
    "start": "624700",
    "end": "633040"
  },
  {
    "text": "Pontryagin's minimum\nprinciple is nothing more than putting Lagrange\nmultipliers to work",
    "start": "633040",
    "end": "639340"
  },
  {
    "text": "to turn that\nconstrained optimization into unconstrained optimization.",
    "start": "639340",
    "end": "646180"
  },
  {
    "text": "And for this problem, we can\nbuild our augmented system",
    "start": "646180",
    "end": "658270"
  },
  {
    "text": "I'll call J prime here,\nwhich just is the same thing",
    "start": "658270",
    "end": "663540"
  },
  {
    "text": "but taking in the constraints. So first of all, we've got a\nconstraint on x T equaling 0.",
    "start": "663540",
    "end": "668670"
  },
  {
    "text": "So I can put that in as\na Lagrange multiplier, let's say lambda times something\nthat better equal 0, which",
    "start": "668670",
    "end": "674370"
  },
  {
    "text": "in this case was\njust x t And then plus 0 to t1 plus the\nconstraint on the dynamics,",
    "start": "674370",
    "end": "686760"
  },
  {
    "text": "which I'll call it a different\nLagrange multiplier p, times f of x, u minus x\ndot, this whole thing dt.",
    "start": "686760",
    "end": "697517"
  },
  {
    "text": " Yes?",
    "start": "697517",
    "end": "702760"
  },
  {
    "text": "AUDIENCE: How do you\nimpose the constraint that u is [INAUDIBLE]? RUSS TEDRAKE: Awesome. Good question. So it turns out what\nwe're going to look at--",
    "start": "702760",
    "end": "711019"
  },
  {
    "text": "we want to verify that\nthis thing is optimal. So you might want to put that\nconstraint right in here.",
    "start": "711020",
    "end": "716620"
  },
  {
    "text": "But it actually\nis more natural-- here, let me finish\nmy statement here.",
    "start": "716620",
    "end": "722570"
  },
  {
    "text": "The way we're going to verify\noptimality of this policy is by verifying that we're at\na local minimum in J prime.",
    "start": "722570",
    "end": "732380"
  },
  {
    "text": "I want to say that if I\nchange x, If I change u, if I change p in any admissible\nway, then J is going to change.",
    "start": "732380",
    "end": "744757"
  },
  {
    "text": "Small changes in here is\nnot going to change this. I'm at a local\nminima in J prime. ",
    "start": "744757",
    "end": "751195"
  },
  {
    "text": "That's the minimum\nprinciple idea, right? I just want my-- if I'm\nat a minimum of function,",
    "start": "751195",
    "end": "756440"
  },
  {
    "text": "the gradient is 0. In the Lagrange\nmultiplier, the minimum of this augmented function,\nthe gradient had to be 0.",
    "start": "756440",
    "end": "763430"
  },
  {
    "text": "So if I change any of\nthese, I want that to be-- that change to be 0.",
    "start": "763430",
    "end": "770420"
  },
  {
    "text": "So it turns out that\nthe more natural way to look at this\nbound in u is by not",
    "start": "770420",
    "end": "779352"
  },
  {
    "text": "changing-- not allowing u to\nchange outside of that regime. ",
    "start": "779352",
    "end": "787610"
  },
  {
    "text": "This is actually\nfairly procedural. So you end up\ndoing this calculus of variations on J prime.",
    "start": "787610",
    "end": "795529"
  },
  {
    "text": "But I actually-- I made\na call earlier today. I think it's going to-- if I do\nit right now in the beginning",
    "start": "795530",
    "end": "800540"
  },
  {
    "text": "in class, I'm going\nto lose you to-- I mean, I'm going to\nbore you and lose you. But it's in the\nnotes, and it's clean.",
    "start": "800540",
    "end": "808160"
  },
  {
    "text": "So I'm going to\nleave that hanging and let you look\nat it in the notes without typos that I might\nput up on the board, OK?",
    "start": "808160",
    "end": "816770"
  },
  {
    "text": "Because I want to move on\nto the dynamic programming view of the world, sort of\nthe other possible solution",
    "start": "816770",
    "end": "823250"
  },
  {
    "text": "technique. ",
    "start": "823250",
    "end": "830069"
  },
  {
    "text": "OK. So today, we're going to do--",
    "start": "830070",
    "end": "836330"
  },
  {
    "text": "you can think of it as just\nsolution technique 2 here. ",
    "start": "836330",
    "end": "844550"
  },
  {
    "text": "And it's based on\ndynamic programming. ",
    "start": "844550",
    "end": "860597"
  },
  {
    "text": "Now, the computer\nscientists in the audience say, I know dynamic programming. It's how I find the shortest\npath between point A and point",
    "start": "860597",
    "end": "867200"
  },
  {
    "text": "B without reusing memory,\nand things like that. And you're exactly right. That's exactly what it is.",
    "start": "867200",
    "end": "873225"
  },
  {
    "text": "It happens that the\ndynamic programming has a slightly bigger\nfootprint in the world.",
    "start": "873225",
    "end": "880579"
  },
  {
    "text": "There's a continuous form\nof dynamic programming. OK. So a graph search is\na very discrete form",
    "start": "880580",
    "end": "886490"
  },
  {
    "text": "of dynamic programming. So I'm going to\nstart with sort of-- I'm actually going to work from\nthe graph search sort of view",
    "start": "886490",
    "end": "892152"
  },
  {
    "text": "of the world, but to make\nthe continuous form that works for these continuous\ndynamical systems.",
    "start": "892152",
    "end": "898490"
  },
  {
    "text": "And we're going to use this to\ninvestigate a different cost",
    "start": "898490",
    "end": "903529"
  },
  {
    "text": "function, which is just this--",
    "start": "903530",
    "end": "930620"
  },
  {
    "text": "still subject to the\ndynamics, which in this case",
    "start": "930620",
    "end": "942860"
  },
  {
    "text": "was the linear dynamics. ",
    "start": "942860",
    "end": "951420"
  },
  {
    "text": "OK. ",
    "start": "951420",
    "end": "956899"
  },
  {
    "text": "So before we worry\nabout solving it, let's take a minute to decide\nif it's a reasonable cost",
    "start": "956900",
    "end": "962149"
  },
  {
    "text": "function.  It's different in\na couple of ways.",
    "start": "962150",
    "end": "970380"
  },
  {
    "start": "966000",
    "end": "1146000"
  },
  {
    "text": "First of all, there's\nno hard limit on u. But I do penalize for\nu being away from 0.",
    "start": "970380",
    "end": "977450"
  },
  {
    "text": " So it's sort of a softer\npenalty on u, not a hard limit.",
    "start": "977450",
    "end": "985760"
  },
  {
    "text": "And then these terms\nare penalizing it from being-- the system from\nbeing away from the origin.",
    "start": "985760",
    "end": "990890"
  },
  {
    "text": " And instead of going\nfor some finite time",
    "start": "990890",
    "end": "996139"
  },
  {
    "text": "and minimizing time, I'm going\nto go for an infinite horizon.",
    "start": "996140",
    "end": "1002180"
  },
  {
    "text": "So the only way to drive this\nthing, the only way, actually,",
    "start": "1002180",
    "end": "1007270"
  },
  {
    "text": "for J to be a finite cost\nover this infinite integral,",
    "start": "1007270",
    "end": "1013510"
  },
  {
    "text": "is if q and q dot get to\n0, and you do u of 0 at 0.",
    "start": "1013510",
    "end": "1019862"
  },
  {
    "text": "Otherwise, this thing's\ngoing to blow up. It's going to be an\ninfinite integral. So the solution\nhad better result",
    "start": "1019862",
    "end": "1025569"
  },
  {
    "text": "in us getting to the\norigin, it turns out. But I'm not trying to\nexplicitly minimize the time.",
    "start": "1025569",
    "end": "1031480"
  },
  {
    "text": "I'm just penalizing\nit for being away, and I'm penalizing\nit for taking action.",
    "start": "1031480",
    "end": "1036910"
  },
  {
    "text": "Now, what's the name of\nthis type of control?",
    "start": "1036910",
    "end": "1043900"
  },
  {
    "text": "Who knows is? I think-- yeah, LQR, right? So this is a Linear\nQuadratic Regulator.",
    "start": "1043900",
    "end": "1049872"
  },
  {
    "start": "1049872",
    "end": "1060970"
  },
  {
    "text": "OK. It's a staple of-- it's sort of the best, most used\nresult from optimal control.",
    "start": "1060970",
    "end": "1069039"
  },
  {
    "text": "Everybody opens up\nMatlab and calls lqr. But you're going\nto understand it.",
    "start": "1069040",
    "end": "1074290"
  },
  {
    "start": "1074290",
    "end": "1079380"
  },
  {
    "text": "Good. But to do LQR, to understand\nhow that derivation works,",
    "start": "1079380",
    "end": "1085310"
  },
  {
    "text": "we've got to do-- we're going to\ngo through dynamic programming. ",
    "start": "1085310",
    "end": "1091386"
  },
  {
    "text": "AUDIENCE: Couldn't we use\nthe same cost function there as well? RUSS TEDRAKE: Awesome. OK.",
    "start": "1091386",
    "end": "1096920"
  },
  {
    "text": "So why don't I put that cost\nfunction down and just do Pontryagin's minimum principal?",
    "start": "1096920",
    "end": "1102220"
  },
  {
    "text": "There's only one sort\nof subtle reason, which is that that's an\ninfinite horizon cost.",
    "start": "1102220",
    "end": "1107929"
  },
  {
    "text": " So I was going to\nsay this at the end, but let's have this\ndiscussion now.",
    "start": "1107930",
    "end": "1114890"
  },
  {
    "text": "So this is an infinite horizon. Pontryagin's is used to\nverify the optimality",
    "start": "1114890",
    "end": "1122360"
  },
  {
    "text": "of some finite integral. ",
    "start": "1122360",
    "end": "1128000"
  },
  {
    "text": "So let's compare-- well,\nI know you know value--",
    "start": "1128000",
    "end": "1133520"
  },
  {
    "text": "the dynamic programming. So maybe let me say what\ndynamic programming is, and then I'll contrast them. Yeah. ",
    "start": "1133520",
    "end": "1147070"
  },
  {
    "text": "But the people sort of-- I just want to\nunderstand what happened. We got two different\ncost functions,",
    "start": "1147070",
    "end": "1154000"
  },
  {
    "text": "two different solution\ntechniques for now. And we're going to\naddress in a few minutes why I did different\nsolution techniques",
    "start": "1154000",
    "end": "1160330"
  },
  {
    "text": "for the different\ncost functions. But I hope they both seem\nlike sort of reasonable cost functions if I want to get\nmy system to the origin.",
    "start": "1160330",
    "end": "1168220"
  },
  {
    "text": "Different-- we're going to\nlook at what the result is, the different results. And actually, something\nI want to leave you with",
    "start": "1168220",
    "end": "1173430"
  },
  {
    "text": "is that you can, in fact, do\nlots of different combinations of these things. You could do quadratic costs and\ntry to have some minimum time.",
    "start": "1173430",
    "end": "1182761"
  },
  {
    "text": "There's lots and lots of ways to\nformulate these cost functions. These are two sort\nof examples, but you",
    "start": "1182761",
    "end": "1191950"
  },
  {
    "text": "can do minimum time LQR,\nyou can do all these things. OK. But with the way\nwe're going to drive",
    "start": "1191950",
    "end": "1197620"
  },
  {
    "text": "the LQR controller\nis by thinking about dynamic programming. And to do that, let me start\nwith the discrete world,",
    "start": "1197620",
    "end": "1204370"
  },
  {
    "text": "where people-- where\nit makes sense.  So let's imagine I have\na discrete time system.",
    "start": "1204370",
    "end": "1210730"
  },
  {
    "start": "1210730",
    "end": "1223120"
  },
  {
    "text": "So x of n plus 1\nis f of x n u n.",
    "start": "1223120",
    "end": "1230420"
  },
  {
    "start": "1230420",
    "end": "1237626"
  },
  {
    "text": "And I have some cost function.  Now remember, in the\nPontryagin minimum principle,",
    "start": "1237626",
    "end": "1244718"
  },
  {
    "text": "which shows that there's\na sort of a general form that a lot of these\ncost functions take in the discrete form,\nit's h of x at capital",
    "start": "1244718",
    "end": "1256269"
  },
  {
    "text": "N plus a sum instead\nof an integral of n",
    "start": "1256270",
    "end": "1263660"
  },
  {
    "text": "equals 0 to N minus\n1 g of x n u n.",
    "start": "1263660",
    "end": "1272220"
  },
  {
    "start": "1272220",
    "end": "1281270"
  },
  {
    "text": "OK.  Now, again, I said this sort of\nadditive form of cost functions",
    "start": "1281270",
    "end": "1293759"
  },
  {
    "text": "is pretty common. And you're going to see right\nnow one of the reasons why. The great thing about\nhaving these costs that",
    "start": "1293760",
    "end": "1300150"
  },
  {
    "text": "accumulate additively\nover the trajectory is that I can make a recursive\nform of this equation.",
    "start": "1300150",
    "end": "1309600"
  },
  {
    "text": "So in particular, if I-- so I should call\nthis, really, what I've been calling J, that's\nreally the J of being at x 0",
    "start": "1309600",
    "end": "1321390"
  },
  {
    "text": "at time 0. ",
    "start": "1321390",
    "end": "1326850"
  },
  {
    "text": "And I can compute J of\nbeing at x 0 at time 0",
    "start": "1326850",
    "end": "1332490"
  },
  {
    "text": "and incurring the rest\nof the cost recursively by looking at what it would\nbe like to be at some state",
    "start": "1332490",
    "end": "1340620"
  },
  {
    "text": "x at time N-- ",
    "start": "1340620",
    "end": "1346340"
  },
  {
    "text": "and that in this case\nis just h of x of n--",
    "start": "1346340",
    "end": "1352267"
  },
  {
    "text": "and then thinking about\nwhat it would be like at-- to be at some J of x N minus 1--",
    "start": "1352267",
    "end": "1358070"
  },
  {
    "text": " and that's going to be g of\nx n minus 1 u of n minus 1",
    "start": "1358070",
    "end": "1371210"
  },
  {
    "text": "plus h of x n. ",
    "start": "1371210",
    "end": "1383899"
  },
  {
    "text": "Let me be even more careful. And I'm going to\nsay, let's evaluate the cost of running\na particular policy,",
    "start": "1383900",
    "end": "1397022"
  },
  {
    "text": "u n is just some pi of J of x n. AUDIENCE: Sorry, why\nis the first x a 0,",
    "start": "1397022",
    "end": "1404415"
  },
  {
    "text": "and then the rest of\nthe x's [INAUDIBLE]?? ",
    "start": "1404416",
    "end": "1410512"
  },
  {
    "text": "RUSS TEDRAKE: OK. So why did I put x 0 here? That was intentional. I'm trying to make x 0 the\nvariable that fits in here.",
    "start": "1410512",
    "end": "1418512"
  },
  {
    "text": "Here x is the variable\nthat fits in here. But you're right, I could\nbe a little bit more-- I should be more careful.",
    "start": "1418512",
    "end": "1424110"
  },
  {
    "text": "So now J, a function of\nthis variable x at time N should really just be h of x.",
    "start": "1424110",
    "end": "1430390"
  },
  {
    "text": "Yeah, good. So then this is-- I could say it this way.",
    "start": "1430390",
    "end": "1436580"
  },
  {
    "text": "The other way I could say\nit is J x minus 1 equals x. Maybe that's the best\nway to rectify it.",
    "start": "1436580",
    "end": "1443320"
  },
  {
    "start": "1443320",
    "end": "1451960"
  },
  {
    "text": "OK. And when I'm evaluating the\ncost of a particular policy,",
    "start": "1451960",
    "end": "1460410"
  },
  {
    "text": "I'm going to use the\nnotation J pi here,",
    "start": "1460410",
    "end": "1467220"
  },
  {
    "text": "say this is the cost I\nshould expect to receive given I'm in some state x.",
    "start": "1467220",
    "end": "1473370"
  },
  {
    "text": "To make it even more\nsatisfying, let's just be the same everywhere. This is x 0, and here\nI'll say x 0 equals my x.",
    "start": "1473370",
    "end": "1483675"
  },
  {
    "text": " If I'm in some state x at\ntime 0 executing policy pi,",
    "start": "1483675",
    "end": "1491340"
  },
  {
    "text": "I'm going to incur this cost. If I'm at some state x at\ntime N incurring this--",
    "start": "1491340",
    "end": "1499770"
  },
  {
    "text": "taking this policy,\nI'm going to get this. Here I'm going to get this.",
    "start": "1499770",
    "end": "1506039"
  },
  {
    "text": "And even when I'm\nexecuting policy pi, I can even furthermore\nsay that x n",
    "start": "1506040",
    "end": "1513780"
  },
  {
    "text": "is f of x n minus 1\npi of x n minus 1.",
    "start": "1513780",
    "end": "1521850"
  },
  {
    "text": " It's probably impossible\nto read in that corner.",
    "start": "1521850",
    "end": "1526980"
  },
  {
    "start": "1526980",
    "end": "1535570"
  },
  {
    "text": "OK. ",
    "start": "1535570",
    "end": "1544044"
  },
  {
    "text": "So you can see where\nI'm going with it. ",
    "start": "1544045",
    "end": "1550740"
  },
  {
    "text": "It's pretty easy to see\nthat J pi of x at some N",
    "start": "1550740",
    "end": "1560640"
  },
  {
    "text": "is just the one-step\ncost g of x n u",
    "start": "1560640",
    "end": "1567330"
  },
  {
    "text": "n plus the cost I expect to see\ngiven that x n plus 1 at time",
    "start": "1567330",
    "end": "1584980"
  },
  {
    "text": "equals 1. ",
    "start": "1584980",
    "end": "1601730"
  },
  {
    "text": "OK. ",
    "start": "1601730",
    "end": "1608630"
  },
  {
    "text": "So the reason we like these\nintegral costs or the sum",
    "start": "1608630",
    "end": "1614570"
  },
  {
    "text": "of costs in the\ndiscrete time case is because I can do these\nrecursive computations.",
    "start": "1614570",
    "end": "1623780"
  },
  {
    "text": "And the same thing\ntrue if I look at-- if I define what\nthe optimal cost is.",
    "start": "1623780",
    "end": "1629420"
  },
  {
    "text": "So let's now define J\nstar to be the cost I",
    "start": "1629420",
    "end": "1635720"
  },
  {
    "text": "incur if I follow the optimal\npolicy, which is pi star.",
    "start": "1635720",
    "end": "1654429"
  },
  {
    "start": "1654430",
    "end": "1660330"
  },
  {
    "text": "Well, it turns out\nthe same thing works. ",
    "start": "1660330",
    "end": "1676440"
  },
  {
    "text": "But now, there's\nan extra term here. ",
    "start": "1676440",
    "end": "1711870"
  },
  {
    "text": "OK. ",
    "start": "1711870",
    "end": "1723150"
  },
  {
    "start": "1721000",
    "end": "1903000"
  },
  {
    "text": "So it's easy to see that\nthe cost of following",
    "start": "1723150",
    "end": "1728250"
  },
  {
    "text": "a particular policy\nis recursive. It's more surprising\nthat the cost",
    "start": "1728250",
    "end": "1735780"
  },
  {
    "text": "to go of the optimal\npolicy is equally recursive with a simple\nform like this, min over u.",
    "start": "1735780",
    "end": "1742080"
  },
  {
    "text": " And this actually follows\nfrom something called",
    "start": "1742080",
    "end": "1747480"
  },
  {
    "text": "the principle of optimality.  Anybody see the principle\nof optimality before?",
    "start": "1747480",
    "end": "1754500"
  },
  {
    "text": "OK. It says that if I want to be\noptimal over some trajectory,",
    "start": "1754500",
    "end": "1762580"
  },
  {
    "text": "I'd better be optimal over-- from the end of that trajectory. So if I want to be\noptimal for the last--",
    "start": "1762580",
    "end": "1772588"
  },
  {
    "text": "it's from n minus\n2 to the end, then I'd better be optimal\nfrom n minus 1 to the end.",
    "start": "1772588",
    "end": "1778929"
  },
  {
    "text": "So it turns out if I act\noptimally in one step by doing this min over\nu, and then follow",
    "start": "1778930",
    "end": "1785500"
  },
  {
    "text": "the policy of acting optimally\nfor the rest of time, then",
    "start": "1785500",
    "end": "1790840"
  },
  {
    "text": "that's optimal for the\nentire function, OK? ",
    "start": "1790840",
    "end": "1817290"
  },
  {
    "text": "OK.  OK, good.",
    "start": "1817290",
    "end": "1824520"
  },
  {
    "text": "So we've got a recursive form\nof this cost-to-go function that we exploited with\nthe additive thing,",
    "start": "1824520",
    "end": "1832920"
  },
  {
    "text": "the additive form. And now, the optimal\npolicy comes straight out.",
    "start": "1832920",
    "end": "1841169"
  },
  {
    "start": "1841170",
    "end": "1852540"
  },
  {
    "text": "The best thing to do, if\nyou're in state x and a time n.",
    "start": "1852540",
    "end": "1863360"
  },
  {
    "text": "is just the arg min over\nu of g x, u plus J star",
    "start": "1863360",
    "end": "1878510"
  },
  {
    "text": "x, n plus 1 n plus 1 with that\nsame x, n plus 1 defined by--",
    "start": "1878510",
    "end": "1890270"
  },
  {
    "start": "1890270",
    "end": "1904090"
  },
  {
    "start": "1903000",
    "end": "1990000"
  },
  {
    "text": "So in discrete time,\noptimal control is trivial. If you have an additive cost\nfunction, all you have to do is figure out what your\ncost is at the end,",
    "start": "1904090",
    "end": "1912430"
  },
  {
    "text": "and then go back one step,\ndo the thing that acts-- that in one step\nminimizes the cost",
    "start": "1912430",
    "end": "1919060"
  },
  {
    "text": "and gets me to the lowest\npossible cost in the future. And if I just do that\nrecursively backwards,",
    "start": "1919060",
    "end": "1924130"
  },
  {
    "text": "I come up with\nthe optimal policy that gets me from any x\nin n steps to the end.",
    "start": "1924130",
    "end": "1929860"
  },
  {
    "start": "1929860",
    "end": "1938590"
  },
  {
    "text": "Does that make sense? Ask questions. ",
    "start": "1938590",
    "end": "1951100"
  },
  {
    "text": "Do people buy that? Is that obvious, or does\nthat need more explanation? ",
    "start": "1951100",
    "end": "1966600"
  },
  {
    "text": "OK. Ask questions if you have them. All right. So we're going to use the\ndiscrete time form again",
    "start": "1966600",
    "end": "1978720"
  },
  {
    "text": "when we get to the algorithms. But I'm trying to use\nit today to leapfrog into the continuous time\nconditions for optimality.",
    "start": "1978720",
    "end": "1987030"
  },
  {
    "text": " So what happens if we now do\nthe same sort of discrete time",
    "start": "1987030",
    "end": "1993179"
  },
  {
    "start": "1990000",
    "end": "2358000"
  },
  {
    "text": "thinking, but do it in the limit\nwhere the time between steps goes to 0?",
    "start": "1993180",
    "end": "1998970"
  },
  {
    "text": " So let me try to do the\nlimiting argument to get us back",
    "start": "1998970",
    "end": "2004760"
  },
  {
    "text": "to continuous time. ",
    "start": "2004760",
    "end": "2027512"
  },
  {
    "text": "OK. Now we've got our cost function,\nagain, is h of x at capital T",
    "start": "2027512",
    "end": "2036860"
  },
  {
    "text": "plus the integral from\n0 to T of g x, u dt.",
    "start": "2036860",
    "end": "2044575"
  },
  {
    "start": "2044575",
    "end": "2052199"
  },
  {
    "text": "The analogous statement\nfrom this recursion in the discrete time\nis that J x at t",
    "start": "2052199",
    "end": "2063510"
  },
  {
    "text": "is going to be a\nlimiting argument as dt",
    "start": "2063510",
    "end": "2068520"
  },
  {
    "text": "goes to 0 of the min over\nu of g x, u dt plus J",
    "start": "2068520",
    "end": "2085679"
  },
  {
    "text": "x of t plus dt t plus dt.",
    "start": "2085679",
    "end": "2091589"
  },
  {
    "start": "2091590",
    "end": "2103240"
  },
  {
    "text": "OK. This is now-- that's\njust a limiting argument as dt goes to 0 of the\nsame recursive statement.",
    "start": "2103240",
    "end": "2114970"
  },
  {
    "text": "I'm going to approximate\nJ x of t plus dt as--",
    "start": "2114970",
    "end": "2127270"
  },
  {
    "text": "this is J star let me\nnot forget my stars-- as J star at x t plus\npartial J star partial x",
    "start": "2127270",
    "end": "2141850"
  },
  {
    "text": "x dot dt plus partial\nJ star partial t dt.",
    "start": "2141850",
    "end": "2150462"
  },
  {
    "start": "2150462",
    "end": "2156240"
  },
  {
    "text": "It's a Taylor\nexpansion of that term. ",
    "start": "2156240",
    "end": "2178240"
  },
  {
    "text": "OK. If I insert that back in,\nthen I have J star x of t",
    "start": "2178240",
    "end": "2186100"
  },
  {
    "text": "equals the limit as dt\ngoes to 0 min over u g",
    "start": "2186100",
    "end": "2196375"
  },
  {
    "text": "x, u dt plus partial\nJ star partial x--",
    "start": "2196375",
    "end": "2206350"
  },
  {
    "text": "x dot is just f of\nx, u, remember-- dt plus partial J partial t dt.",
    "start": "2206350",
    "end": "2219785"
  },
  {
    "text": "And I left off that J x\nthere, because that actually doesn't depend on u. So I'm going to put that\noutside here, plus J x and t.",
    "start": "2219785",
    "end": "2229730"
  },
  {
    "start": "2229730",
    "end": "2242770"
  },
  {
    "text": "Those guys cancel.  And now I've got\na dt everywhere.",
    "start": "2242770",
    "end": "2249970"
  },
  {
    "text": "So I can actually take that\nout, and my limiting argument goes away.",
    "start": "2249970",
    "end": "2255849"
  },
  {
    "text": "And what I'm left\nwith, 0 equals min over u g of x, u plus\npartial J partial x star",
    "start": "2255850",
    "end": "2268540"
  },
  {
    "text": "plus partial J partial t. ",
    "start": "2268540",
    "end": "2275080"
  },
  {
    "text": "This is a very famous\nequation, will be used a lot. ",
    "start": "2275080",
    "end": "2293255"
  },
  {
    "text": "It's called the\nHamilton-Jacobi-Bellman equation. AUDIENCE: Russ. RUSS TEDRAKE: Yes? Did I miss-- AUDIENCE: x dot in\nthe middle term there.",
    "start": "2293255",
    "end": "2300250"
  },
  {
    "text": "RUSS TEDRAKE: Here? AUDIENCE: Last equation. That x dot [INAUDIBLE]. RUSS TEDRAKE: Oh, thanks.",
    "start": "2300250",
    "end": "2305850"
  },
  {
    "text": "Good. This is f of x, u. Good. Thank you. ",
    "start": "2305850",
    "end": "2322750"
  },
  {
    "text": "Good, thank you. That is the\nHamilton-Jacobi-Bellman equation, often\nknown as the HJB.",
    "start": "2322750",
    "end": "2328839"
  },
  {
    "text": " So Hamilton and Jacobi\nare really old guys.",
    "start": "2328840",
    "end": "2337162"
  },
  {
    "text": "Bellman's a newer guy. He was in the '60s or something. A lot of people say\nHamilton-Bellman-Jacobi.",
    "start": "2337163",
    "end": "2342700"
  },
  {
    "text": "That doesn't seem\nquite right to me. That's some guy in the\n'60s sticking his name in between Hamilton and Jacobi.",
    "start": "2342700",
    "end": "2348100"
  },
  {
    "text": "So I try to-- I will probably say HBJ a\ncouple of times in the class,",
    "start": "2348100",
    "end": "2353109"
  },
  {
    "text": "but whenever I'm thinking\nabout it I say HJB, OK? ",
    "start": "2353110",
    "end": "2358640"
  },
  {
    "start": "2358000",
    "end": "2441000"
  },
  {
    "text": "OK. So we did a little bit\nof work in discrete time. But the absolute output\nof that thinking,",
    "start": "2358640",
    "end": "2364299"
  },
  {
    "text": "the thing you need\nto remember, is this Hamilton-Jacobi-Bellman\nequation, OK?",
    "start": "2364300",
    "end": "2373330"
  },
  {
    "text": "These turn out to be the\nconditions of optimality for continuous time.",
    "start": "2373330",
    "end": "2378350"
  },
  {
    "text": " Let's think about what it means. ",
    "start": "2378350",
    "end": "2388570"
  },
  {
    "text": "So do you have yet a picture\nof this sort of what J is.",
    "start": "2388570",
    "end": "2394540"
  },
  {
    "text": "J is a cost-to-go. It's a function over\nthe entire landscape. It tells me if I'm in\nsome state, how much cost",
    "start": "2394540",
    "end": "2401109"
  },
  {
    "text": "am I going to incur\nwith my cost function as it runs off into time. In the finite horizon\ncase, it's just an integral",
    "start": "2401110",
    "end": "2408490"
  },
  {
    "text": "to the end of time. In the infinite\nhorizon case, I've started this initial condition,\nand I run my cost function",
    "start": "2408490",
    "end": "2414417"
  },
  {
    "text": "forever. So j is a cost landscape,\na cost-to-go landscape.",
    "start": "2414417",
    "end": "2422330"
  },
  {
    "text": "This statement here\nsays that, if I move a little bit in that\nlandscape in x, scale",
    "start": "2422330",
    "end": "2433030"
  },
  {
    "text": "by this x dot, then the\nthing I should incur is that is my\ninstantaneous cost.",
    "start": "2433030",
    "end": "2438190"
  },
  {
    "text": "OK.  The way my cost\nlandscape-- the difference",
    "start": "2438190",
    "end": "2444337"
  },
  {
    "start": "2441000",
    "end": "2533000"
  },
  {
    "text": "of being in initial\ncondition 1 versus being in initial condition 2,\nif they're neighboring,",
    "start": "2444337",
    "end": "2449740"
  },
  {
    "text": "goes like the cost function. And there's the cost function--\nthe cost-to-go function lives",
    "start": "2449740",
    "end": "2457000"
  },
  {
    "text": "in x, and it lives in time. OK. ",
    "start": "2457000",
    "end": "2464800"
  },
  {
    "text": "It's one of the most important\nequations we'll have-- Hamilton-Bellman-Jacobi\nequation.",
    "start": "2464800",
    "end": "2471470"
  },
  {
    "text": "AUDIENCE: So we can take out the\npartial case that [INAUDIBLE]??",
    "start": "2471470",
    "end": "2476976"
  },
  {
    "text": " Because that one Is independent\nof u, the last term.",
    "start": "2476976",
    "end": "2482270"
  },
  {
    "text": " So if we take that\nout, basically,",
    "start": "2482270",
    "end": "2490770"
  },
  {
    "text": "the difference between the value\nto [INAUDIBLE] with respect to time, in this time and going\nto the next time that sort",
    "start": "2490770",
    "end": "2498090"
  },
  {
    "text": "of seems like a\nTD error squared-- RUSS TEDRAKE: Oh, yeah. Yeah. Good.",
    "start": "2498090",
    "end": "2503670"
  },
  {
    "text": "There's absolutely-- this is\nexactly the source of the TD error and the Bell-- yeah. It's exactly the\nBellman equation.",
    "start": "2503670",
    "end": "2509470"
  },
  {
    "text": "So yeah. So you're right. Partial J partial t could have\nbeen outside the min over u.",
    "start": "2509470",
    "end": "2515355"
  },
  {
    "text": "It doesn't actually have u. But we're going to see\nall those connections",
    "start": "2515355",
    "end": "2521490"
  },
  {
    "text": "as we get into the algorithms. But for-- this now is a tool\nfor proving analytically",
    "start": "2521490",
    "end": "2527640"
  },
  {
    "text": "and driving analytically\nsome optimal controllers. ",
    "start": "2527640",
    "end": "2534000"
  },
  {
    "start": "2533000",
    "end": "2769000"
  },
  {
    "text": "We need one more--  we need to say something\nstronger about how useful",
    "start": "2534000",
    "end": "2540750"
  },
  {
    "text": "that tool is. ",
    "start": "2540750",
    "end": "2554289"
  },
  {
    "text": "So there's the\nsufficiency theorem",
    "start": "2554290",
    "end": "2565470"
  },
  {
    "text": "is what gives this\nguy teeth, OK? So I told you that the\nPontryagin's minimum principle",
    "start": "2565470",
    "end": "2571360"
  },
  {
    "text": "was a necessary\ncondition for optimality. It wasn't necessarily\nsufficient. If you show that the system\nsatisfies the Pontryagin's",
    "start": "2571360",
    "end": "2580630"
  },
  {
    "text": "minimum principle,\nthen you're close, but you actually also have to\nsay it uniquely solves that,",
    "start": "2580630",
    "end": "2587800"
  },
  {
    "text": "it's the only solution to\nthat, solves the Pontryagin's minimum principle. So there's extra work needed.",
    "start": "2587800",
    "end": "2593637"
  },
  {
    "text": "The theorem we're putting\nup here is this saying-- is going to say that if\nthis equation is satisfied, then that's sufficient\nto guarantee",
    "start": "2593637",
    "end": "2599860"
  },
  {
    "text": "that the policy is optimal.",
    "start": "2599860",
    "end": "2605690"
  },
  {
    "text": "OK. So given a policy pi x of t,\nand a cost-to go function,",
    "start": "2605690",
    "end": "2630990"
  },
  {
    "text": "J pi x of t, if pi is\nthe argument of this,",
    "start": "2630990",
    "end": "2647369"
  },
  {
    "text": "if pi is the policy which\nminimizes that for all x",
    "start": "2647370",
    "end": "2677535"
  },
  {
    "text": "and all t, and that condition\nis met, then we can--",
    "start": "2677535",
    "end": "2732760"
  },
  {
    "text": "that's sufficient to\ngive that J pi x of t",
    "start": "2732760",
    "end": "2741160"
  },
  {
    "text": "equals J pi of x of t and\npi x of t pi star x of t.",
    "start": "2741160",
    "end": "2753190"
  },
  {
    "start": "2753190",
    "end": "2761950"
  },
  {
    "text": "OK. ",
    "start": "2761950",
    "end": "2770227"
  },
  {
    "start": "2769000",
    "end": "2957000"
  },
  {
    "text": "The proof of that I'm\nnot even going to try. It's sort of tedious.",
    "start": "2770227",
    "end": "2775450"
  },
  {
    "text": "It's in Bertsekas, if you like-- Bertsekas' book. But we're going\nto use this a lot.",
    "start": "2775450",
    "end": "2782260"
  },
  {
    "text": " So if I can find some\ncombination of J, pi, and pi",
    "start": "2782260",
    "end": "2791170"
  },
  {
    "text": "that match that condition, then\nI've found an optimal policy. ",
    "start": "2791170",
    "end": "2800790"
  },
  {
    "text": "OK. ",
    "start": "2800790",
    "end": "2806000"
  },
  {
    "text": "Let's use this to solve\nthe problem we want-- ",
    "start": "2806000",
    "end": "2829900"
  },
  {
    "text": "the linear quadratic\nregulator in its general form. ",
    "start": "2829900",
    "end": "2846580"
  },
  {
    "text": "So they've got a system\nx equals Ax plus Bu. ",
    "start": "2846580",
    "end": "2869339"
  },
  {
    "text": "And let's say I have a\ncost function J of x 0",
    "start": "2869340",
    "end": "2877440"
  },
  {
    "text": "is h of x, t-- the same thing I've been\nwriting all day here--",
    "start": "2877440",
    "end": "2883570"
  },
  {
    "text": "g of x, u dt, where x 0\nequals x, where h in general",
    "start": "2883570",
    "end": "2897270"
  },
  {
    "text": "takes the form x\ntranspose Qfx, and g",
    "start": "2897270",
    "end": "2903060"
  },
  {
    "text": "takes the form x transpose\nQx plus u transpose Ru.",
    "start": "2903060",
    "end": "2909360"
  },
  {
    "start": "2909360",
    "end": "2914690"
  },
  {
    "text": "To make things-- to be careful,\nwe're going to assume that-- ",
    "start": "2914690",
    "end": "2922070"
  },
  {
    "text": "we're going to enforce-- we're\nchoosing the cost function. We're going to enforce that this\nis positive definite, making",
    "start": "2922070",
    "end": "2928310"
  },
  {
    "text": "sure we don't get any\nnegative cost here. And similarly-- actually, it\nonly has to be semi-definite.",
    "start": "2928310",
    "end": "2939770"
  },
  {
    "text": "Q transpose equals\nQ greater than or equal to 0 and R\ntranspose equals R.",
    "start": "2939770",
    "end": "2947930"
  },
  {
    "text": "That one does have\nto be positive. Definite",
    "start": "2947930",
    "end": "2957690"
  },
  {
    "text": "OK. Here's a pretty general\nlinear dynamical system,",
    "start": "2957690",
    "end": "2964530"
  },
  {
    "text": "quadratic regulator cost. To satisfy the\nHBJ, we simply have",
    "start": "2964530",
    "end": "2971970"
  },
  {
    "text": "to have that this condition-- ",
    "start": "2971970",
    "end": "3000040"
  },
  {
    "text": "so 0 equals min over u x\ntranspose Qx plus u transpose",
    "start": "3000040",
    "end": "3010570"
  },
  {
    "text": "Ru plus partial J partial\nx star times Ax plus Bu",
    "start": "3010570",
    "end": "3024340"
  },
  {
    "text": "plus partial J star partial\nt, that had better equal 0.",
    "start": "3024340",
    "end": "3031480"
  },
  {
    "text": "So I need to find that\ncost-to-go function which makes this thing 0.",
    "start": "3031480",
    "end": "3037350"
  },
  {
    "start": "3037350",
    "end": "3044394"
  },
  {
    "text": "It turns out the\nsolution to these things,",
    "start": "3044394",
    "end": "3049460"
  },
  {
    "text": "we can just guess a form for J.\nLet's guess that J star x of t",
    "start": "3049460",
    "end": "3057260"
  },
  {
    "text": "is also quadratic,\nagain with a positive--",
    "start": "3057260",
    "end": "3069280"
  },
  {
    "text": "it's going to have\nto be positive. ",
    "start": "3069280",
    "end": "3082026"
  },
  {
    "text": "It could be-- in that\ncase, partial J partial",
    "start": "3082026",
    "end": "3092089"
  },
  {
    "text": "x is 2x transpose S of t.",
    "start": "3092090",
    "end": "3099860"
  },
  {
    "text": " Partial J partial t is\nx transpose s dot t x.",
    "start": "3099860",
    "end": "3111265"
  },
  {
    "start": "3111265",
    "end": "3116539"
  },
  {
    "text": "OK.  Let's pop this guy in. ",
    "start": "3116540",
    "end": "3153053"
  },
  {
    "text": "I want to just\ncrank through here. So does it make sense at\nall, that the J of x, t",
    "start": "3153053",
    "end": "3160080"
  },
  {
    "text": "would be a quadratic\nform like that? Why is that a reasonable guess? ",
    "start": "3160080",
    "end": "3168710"
  },
  {
    "text": "Yeah. AUDIENCE: Because the\nfinal time [INAUDIBLE] match the [INAUDIBLE]. RUSS TEDRAKE: OK.",
    "start": "3168710",
    "end": "3174320"
  },
  {
    "text": "So in the final time,\nthat's a reasonable guess, because it started like this. ",
    "start": "3174320",
    "end": "3183680"
  },
  {
    "text": "Yeah. And it turns out-- I mean, we're actually going\nto see it by verification.",
    "start": "3183680",
    "end": "3188850"
  },
  {
    "text": "But for the linear system,\nwhen I pump the cost backwards in time, this\nquadratic cost, it's",
    "start": "3188850",
    "end": "3194940"
  },
  {
    "text": "going to have to stay quadratic. ",
    "start": "3194940",
    "end": "3203210"
  },
  {
    "text": "OK. So I've got 0 equals min over u\nx transpose Qx plus u transpose",
    "start": "3203210",
    "end": "3211849"
  },
  {
    "text": "Ru plus 2x transpose S of t--",
    "start": "3211850",
    "end": "3217700"
  },
  {
    "text": "bless you-- times Ax plus\nBu plus x transpose S t x.",
    "start": "3217700",
    "end": "3231564"
  },
  {
    "text": " I need that whole\nthing to work out to be 0 for the minimizing u.",
    "start": "3231564",
    "end": "3242100"
  },
  {
    "text": "So let's figure out what\nthe minimizing u is now. Is it OK if I just\nsort of shorthand?",
    "start": "3242100",
    "end": "3248450"
  },
  {
    "text": "I'll say the gradient\nof that whole thing in square brackets with respect\nto u here is going to be,",
    "start": "3248450",
    "end": "3256760"
  },
  {
    "text": "what, 2Ru-- or u transpose R, I guess? ",
    "start": "3256760",
    "end": "3266330"
  },
  {
    "text": "We're going to try to be\ncareful that this whole thing is a scalar. We're always talking\nabout scalar costs.",
    "start": "3266330",
    "end": "3272815"
  },
  {
    "text": "So I've got vectors and\nmatrices going around, but the whole thing has to\ncollapse to be a scalar.",
    "start": "3272815",
    "end": "3278869"
  },
  {
    "text": "The gradient of a scalar\nwith respect to a vector,",
    "start": "3278870",
    "end": "3284870"
  },
  {
    "text": "I want it to always be a vector. The gradient of a vector\nwith respect to a vector",
    "start": "3284870",
    "end": "3290870"
  },
  {
    "text": "is going to be a matrix. So try to be careful\nabout making-- that gradient better be a\nvector plus what's left here?",
    "start": "3290870",
    "end": "3303020"
  },
  {
    "text": "2x transpose S that\nguy there, right? ",
    "start": "3303020",
    "end": "3313880"
  },
  {
    "text": "But I have to take\nthe transpose of that. So it's 2B transpose S of t.",
    "start": "3313880",
    "end": "3323480"
  },
  {
    "text": "The S t transpose is not x-- I screwed up, sorry.",
    "start": "3323480",
    "end": "3329150"
  },
  {
    "text": "It's still x transpose. I'm trying to-- x transpose S\nt B. That thing has to equal 0.",
    "start": "3329150",
    "end": "3338570"
  },
  {
    "text": " And that's where I\nget my transpose back.",
    "start": "3338570",
    "end": "3344540"
  },
  {
    "text": "So u star, the u that makes this\ngradient 0, is going to be--",
    "start": "3344540",
    "end": "3350760"
  },
  {
    "text": "those 2's cancel. It's going to be negative\nR inverse B transpose",
    "start": "3350760",
    "end": "3359750"
  },
  {
    "text": "S transpose x. ",
    "start": "3359750",
    "end": "3371070"
  },
  {
    "text": "Which is important to\nrealize that was actually--",
    "start": "3371070",
    "end": "3378170"
  },
  {
    "text": "it's equivalent to writing\nnegative 1/2 R inverse B transpose partial J\npartial x transpose.",
    "start": "3378170",
    "end": "3388630"
  },
  {
    "start": "3388630",
    "end": "3402049"
  },
  {
    "text": "OK. So what does this mean? ",
    "start": "3402050",
    "end": "3407760"
  },
  {
    "text": "So I've got some\nquadratic approximation",
    "start": "3407760",
    "end": "3412880"
  },
  {
    "text": "of my value function. It's 0 at the origin\nalways and forever. If I'm at the origin, I'm\ngoing to stay at the origin,",
    "start": "3412880",
    "end": "3420170"
  },
  {
    "text": "my cost-to-go is 0. The exact shape of the quadratic\nbowl changes over time.",
    "start": "3420170",
    "end": "3426170"
  },
  {
    "text": "The best thing to\ndo is to go down to negative of the\npartial J partial x",
    "start": "3426170",
    "end": "3433549"
  },
  {
    "text": "is trying to go down\nthe cost-to-go function. I want to go down the cost-to-go\nfunction as fast as I can.",
    "start": "3433550",
    "end": "3439250"
  },
  {
    "text": " But I'm going to wait--",
    "start": "3439250",
    "end": "3444560"
  },
  {
    "text": "I'm going to change,\npossibly, the exact direction. Rather than going straight down\nthe cost-to-go function in x,",
    "start": "3444560",
    "end": "3451040"
  },
  {
    "text": "I might orient\nmyself a little bit depending on the\nweightings I put on-- the cost I put on\nthe different u's. So I'm",
    "start": "3451040",
    "end": "3457700"
  },
  {
    "text": "going to rotate that\nvector a little bit. This is what I can do, and this\nis the weighting I've done.",
    "start": "3457700",
    "end": "3465770"
  },
  {
    "text": "So the best thing to do is to go\ndown your cost-to-go function, get to the point where\nmy cost-to-go is going to be as small as\npossible, filtered",
    "start": "3465770",
    "end": "3474290"
  },
  {
    "text": "by the direction\nI can actually go and twisted by the way\nI penalize actions.",
    "start": "3474290",
    "end": "3480650"
  },
  {
    "text": "OK.  And it's sort of\namazing, I think,",
    "start": "3480650",
    "end": "3486130"
  },
  {
    "text": "that the whole thing works out\nto be just some linear feedback",
    "start": "3486130",
    "end": "3493180"
  },
  {
    "text": "law negative Kx-- yet another reason\n[INAUDIBLE] to use that form.",
    "start": "3493180",
    "end": "3500230"
  },
  {
    "start": "3500230",
    "end": "3508900"
  },
  {
    "text": "OK. Sorry, I should be\na little careful. This is-- it depends on time.",
    "start": "3508900",
    "end": "3514210"
  },
  {
    "text": "So it's K of t x. ",
    "start": "3514210",
    "end": "3519732"
  },
  {
    "text": "Why should it depend on time? ",
    "start": "3519732",
    "end": "3528240"
  },
  {
    "text": "This is a-- what's that? AUDIENCE: We switch. RUSS TEDRAKE: Because\nwe switch what? AUDIENCE: The actuation.",
    "start": "3528240",
    "end": "3533712"
  },
  {
    "text": "RUSS TEDRAKE: There's no hard\nswitch in the actuation here. This is saying, I'm\ngoing to smoothly go down",
    "start": "3533712",
    "end": "3538869"
  },
  {
    "text": "a value function. This one isn't the\nbang-bang controller. This turns out to\nbe a smooth descent",
    "start": "3538870",
    "end": "3546190"
  },
  {
    "text": "of some cost-to-go function.  Yeah? AUDIENCE: The S t equals\npartial [INAUDIBLE]..",
    "start": "3546190",
    "end": "3555897"
  },
  {
    "text": "RUSS TEDRAKE: I mean, S of t\nis time [INAUDIBLE] itself. AUDIENCE: Yeah,\nso it [INAUDIBLE].. RUSS TEDRAKE: So\nintuitively, why should I",
    "start": "3555897",
    "end": "3562040"
  },
  {
    "text": "take a different linear\ncontrol action if I'm at a time 1 versus time 2?",
    "start": "3562040",
    "end": "3568079"
  },
  {
    "text": "AUDIENCE: Because\nyou're time dependent. So if you're very close\nto the final time, you want to [INAUDIBLE]\nlots of control,",
    "start": "3568080",
    "end": "3574355"
  },
  {
    "text": "because you don't have\nthat much time [INAUDIBLE].. RUSS TEDRAKE: Awesome, yeah. This is a quirk of having a\nfinite horizon cost function.",
    "start": "3574355",
    "end": "3583020"
  },
  {
    "text": "In the infinite horizon\ncase, it turns out you're going to just get\na u equals negative Kx,",
    "start": "3583020",
    "end": "3588525"
  },
  {
    "text": "where K is a variant of time. But in the time-- finite horizon problem,\nthere's this quirk,",
    "start": "3588525",
    "end": "3596010"
  },
  {
    "text": "which is the time\nends at some point, and I have to deal with it. If the bank closes at 5:00,\nif I'm here and it's 4:50,",
    "start": "3596010",
    "end": "3606000"
  },
  {
    "text": "and the bank closes at\n5:00, I'm going to-- I'd better get over there\nfaster than if it was 4:30 and the bank closes at 5:00.",
    "start": "3606000",
    "end": "3611700"
  },
  {
    "text": " In my mind, actually, there's\na lot of problems that are--",
    "start": "3611700",
    "end": "3617609"
  },
  {
    "text": "bank closing is a\nweird one, but there are a lot of problems that\nare naturally formulated as finite horizon problems.",
    "start": "3617610",
    "end": "3624900"
  },
  {
    "text": "Things-- maybe a pick-and-place. The minimum time problem was a\nfinite horizon, pick-and-place. There are a lot of problems\nwhich are naturally",
    "start": "3624900",
    "end": "3631350"
  },
  {
    "text": "formulated as infinite horizon. I just want to walk as\nwell as I possibly can",
    "start": "3631350",
    "end": "3636900"
  },
  {
    "text": "for a very long time. I don't need to get to some\nplace at a certain time. OK.",
    "start": "3636900",
    "end": "3643170"
  },
  {
    "text": "But in many ways, the\nfinite horizon time ones are the weird ones,\nbecause you always have to worry about the\nend of time approaching.",
    "start": "3643170",
    "end": "3649990"
  },
  {
    "text": " OK. AUDIENCE: How do we get S t?",
    "start": "3649990",
    "end": "3656357"
  },
  {
    "text": "RUSS TEDRAKE: How do we get S t? OK.  Well, it's the thing that\nmakes this equation 0.",
    "start": "3656357",
    "end": "3663930"
  },
  {
    "text": " So what is that thing?",
    "start": "3663930",
    "end": "3670010"
  },
  {
    "start": "3670010",
    "end": "3682150"
  },
  {
    "text": "I figured out what\nthe minimizing u is. ",
    "start": "3682150",
    "end": "3687180"
  },
  {
    "text": "I can insert that back in. So I get now 0 equals\nQ plus x transpose--",
    "start": "3687180",
    "end": "3699930"
  },
  {
    "text": "I'm going to insert u in-- K-- or I'll do the\nwhole thing, actually--",
    "start": "3699930",
    "end": "3706200"
  },
  {
    "text": "S of t B R inverse\ntimes R times R inverse.",
    "start": "3706200",
    "end": "3716050"
  },
  {
    "text": "So I'm going to go ahead\nand cancel those out. B transpose S of t x.",
    "start": "3716050",
    "end": "3723846"
  },
  {
    "text": " And the negative signs,\nbecause there's two u's there.",
    "start": "3723846",
    "end": "3729779"
  },
  {
    "text": "The negative sign didn't get me. And then plus 2x\ntranspose S of t Ax plus--",
    "start": "3729780",
    "end": "3742410"
  },
  {
    "text": "so minus B R inverse B transpose\nS of t x plus x transpose S dot",
    "start": "3742410",
    "end": "3762430"
  },
  {
    "text": "of x. ",
    "start": "3762430",
    "end": "3770420"
  },
  {
    "text": "It turns out that\nthis term here should be the same as that term\nthere, modulo of factor 2.",
    "start": "3770420",
    "end": "3778220"
  },
  {
    "text": "If you look, it's S, B, R\ninverse, B transpose, S.",
    "start": "3778220",
    "end": "3784000"
  },
  {
    "text": "So this one actually, I can\njust turn that into a minus.",
    "start": "3784000",
    "end": "3792850"
  },
  {
    "text": "OK.  And it turns out that everything\nhas this x transpose matrix x",
    "start": "3792850",
    "end": "3802010"
  },
  {
    "text": "form.  So I can actually-- in order for this thing\nto be true for all x,",
    "start": "3802010",
    "end": "3810349"
  },
  {
    "text": "it must be that the matrix\ninside had better be 0.",
    "start": "3810350",
    "end": "3815450"
  },
  {
    "text": "So it turns out to be 0\nequals Q minus S t B R",
    "start": "3815450",
    "end": "3825900"
  },
  {
    "text": "inverse B transpose S t\nplus 2 S t A plus S dot t",
    "start": "3825900",
    "end": "3840950"
  },
  {
    "text": "had better be equal to 0. OK.",
    "start": "3840950",
    "end": "3846440"
  },
  {
    "text": "Now, I made some\nassumptions to get here. Know what assumptions I made?",
    "start": "3846440",
    "end": "3852200"
  },
  {
    "text": "The big one is that I guessed\nthat form of the value function. And one of the things\nI guessed about it",
    "start": "3852200",
    "end": "3857869"
  },
  {
    "text": "was that it was symmetric. So let's see if we're\nlooking symmetric. So Q, we already\nsaid, was symmetric.",
    "start": "3857870",
    "end": "3865400"
  },
  {
    "text": "That's all good. That guy's nice and symmetric. That's all good.",
    "start": "3865400",
    "end": "3871820"
  },
  {
    "text": "So this is the one we\nhave to worry about. Is that guy symmetric? ",
    "start": "3871820",
    "end": "3882040"
  },
  {
    "text": "It's actually not\nsymmetric like that. But I can equivalently write it\nas S t A plus A transpose S t,",
    "start": "3882040",
    "end": "3894430"
  },
  {
    "text": "since S is symmetric.  And that guy is symmetric.",
    "start": "3894430",
    "end": "3900911"
  },
  {
    "start": "3900911",
    "end": "3914132"
  },
  {
    "text": "I said a very strange thing. I just said that\nthe matrices are-- this one is not symmetric,\nI can write the same thing",
    "start": "3914133",
    "end": "3919410"
  },
  {
    "text": "as-- it's this. So what I mean to say is that\nthese are equivalent for all x.",
    "start": "3919410",
    "end": "3936540"
  },
  {
    "start": "3936540",
    "end": "3947750"
  },
  {
    "text": "Because this has\ngot to equal this.",
    "start": "3947750",
    "end": "3953390"
  },
  {
    "start": "3953390",
    "end": "3962309"
  },
  {
    "text": "OK. So, good.",
    "start": "3962310",
    "end": "3973970"
  },
  {
    "text": "OK. So this equation,\nwhich I'm going to write one more\ntime since it's",
    "start": "3973970",
    "end": "3979100"
  },
  {
    "text": "an equation that has\na name associated with someone famous-- deserves a box\naround it, I guess.",
    "start": "3979100",
    "end": "3985220"
  },
  {
    "text": "So this is the Riccati equation. I'm going to move the\nS over to this side.",
    "start": "3985220",
    "end": "3993816"
  },
  {
    "text": "It's a Riccati equation. ",
    "start": "3993816",
    "end": "4018020"
  },
  {
    "text": "And I also have\nthat final condition that you rightly pointed\nout, where S of capital T had better equal Qf.",
    "start": "4018020",
    "end": "4023930"
  },
  {
    "start": "4023930",
    "end": "4032390"
  },
  {
    "text": "So direct application of\nthe Hamilton-Bellman-Jacobi",
    "start": "4032390",
    "end": "4037880"
  },
  {
    "text": "equation, I was able to derive\nthis Riccati equation, which",
    "start": "4037880",
    "end": "4047329"
  },
  {
    "text": "gives me a solution\nfor the value function. Because it gives me a\nfinal condition on an S",
    "start": "4047330",
    "end": "4054590"
  },
  {
    "text": "and then the governing\nequation which integrates the equation\nbackwards from capital T to 0.",
    "start": "4054590",
    "end": "4060050"
  },
  {
    "start": "4060050",
    "end": "4065990"
  },
  {
    "text": "And once I have S,\nremember, we said that the u was just negative R\ninverse B transpose S of t x.",
    "start": "4065990",
    "end": "4078180"
  },
  {
    "text": "So I've got everything. Once I have S, I\nhave everything. ",
    "start": "4078180",
    "end": "4089700"
  },
  {
    "text": "OK. So this is one of the\nabsolute fundamental results in optimal control.",
    "start": "4089700",
    "end": "4095224"
  },
  {
    "text": " It turns out that if you want\nto know the infinite horizon",
    "start": "4095225",
    "end": "4106278"
  },
  {
    "text": "solution to the-- if you look at the solution\nas time goes to infinity--",
    "start": "4106279",
    "end": "4112100"
  },
  {
    "text": "remember, I wrote my cost\nfunction initially was-- the problem we're trying to\nsolve is an infinite integral.",
    "start": "4112100",
    "end": "4121040"
  },
  {
    "text": "It turns out that\nthe infinite solution is the steady-state\nsolution of this equation.",
    "start": "4121040",
    "end": "4127910"
  },
  {
    "text": "So if you integrate this\nequation back enough, it's stable. It finds a steady\nstate where S dot is 0.",
    "start": "4127910",
    "end": "4136818"
  },
  {
    "text": "And that solution\nwhen S dot equals 0, The S which solves this,\nthat whole thing minus Q,",
    "start": "4136819",
    "end": "4158310"
  },
  {
    "text": "is the infinite\nhorizon solution. ",
    "start": "4158310",
    "end": "4171770"
  },
  {
    "text": "OK. If you open up Matlab, and\nyou type lqr A, B, Q, R,",
    "start": "4171770",
    "end": "4187339"
  },
  {
    "text": "then it's going to\noutput two things. It outputs K, and it outputs S.\nSolving this thing is actually",
    "start": "4187340",
    "end": "4197060"
  },
  {
    "text": "not trivial. So how do you solve that for S?",
    "start": "4197060",
    "end": "4203060"
  },
  {
    "text": "The hard one is it's got\nthis S in both places.",
    "start": "4203060",
    "end": "4209120"
  },
  {
    "text": "But this is the\nLyapunov equation again. It's so famous, it\ncomes up so pervasively,",
    "start": "4209120",
    "end": "4215870"
  },
  {
    "text": "that people have really\ngood tools for solving it, numerical tools for solving it. So Matlab's got some\nnice routine in there",
    "start": "4215870",
    "end": "4222050"
  },
  {
    "text": "to solve, to find S. And when I call lqr\nwith the dynamics",
    "start": "4222050",
    "end": "4230659"
  },
  {
    "text": "and the Q, R gives me exactly\nthe infinite horizon S",
    "start": "4230660",
    "end": "4236960"
  },
  {
    "text": "and infinite horizon\nnon-time-variant K. If you need to do a finite\nhorizon quadratic regulator,",
    "start": "4236960",
    "end": "4243895"
  },
  {
    "text": "then you actually need to\nintegrate these equations yourself. OK.",
    "start": "4243895",
    "end": "4249590"
  },
  {
    "text": "I hate going that long with just\nequations and not intuition. So let me connect it\nback to the brick now.",
    "start": "4249590",
    "end": "4256175"
  },
  {
    "text": "That was the point of doing\neverything in the brick world here. ",
    "start": "4256175",
    "end": "4263630"
  },
  {
    "text": "OK. So we've got Q\ndouble dot equals u.",
    "start": "4263630",
    "end": "4270140"
  },
  {
    "text": "We've got now\ninfinite horizon J x",
    "start": "4270140",
    "end": "4276980"
  },
  {
    "text": "is infinite horizon g x,\nu dt, where I said g x,",
    "start": "4276980",
    "end": "4285590"
  },
  {
    "text": "u was 1/2 Q squared plus 1/2 Q\ndot squared plus 1/2 u squared.",
    "start": "4285590",
    "end": "4293014"
  },
  {
    "text": " So now that's exactly in\nthe LQR form 0, 1, 0, 0.",
    "start": "4293015",
    "end": "4304235"
  },
  {
    "text": " B is 0, 1.",
    "start": "4304235",
    "end": "4310670"
  },
  {
    "text": "Q is the identity matrix.",
    "start": "4310670",
    "end": "4316850"
  },
  {
    "text": "And R is 1. ",
    "start": "4316850",
    "end": "4322550"
  },
  {
    "text": "It turns out I\ncan actually solve that one algebraically for S.\nIf you pump all the symbols in--",
    "start": "4322550",
    "end": "4328640"
  },
  {
    "text": "I won't do it because\nthere's a lot of symbols-- but in a few lines of algebra,\nyou can figure out what S has",
    "start": "4328640",
    "end": "4335270"
  },
  {
    "text": "to be, just because so many\nterms drop out with those 0's that actually there's--",
    "start": "4335270",
    "end": "4341400"
  },
  {
    "text": " There's the three equations\nand three unknowns.",
    "start": "4341400",
    "end": "4348080"
  },
  {
    "text": "And it turns out that S has\nto be square root of 2, 1, 1,",
    "start": "4348080",
    "end": "4358070"
  },
  {
    "text": "square root of 2.  OK.",
    "start": "4358070",
    "end": "4363110"
  },
  {
    "start": "4363110",
    "end": "4383540"
  },
  {
    "text": "The u, remember, was negative\nR inverse B transpose",
    "start": "4383540",
    "end": "4394040"
  },
  {
    "text": "B transpose S x, which,\nif I punch those in,",
    "start": "4394040",
    "end": "4402620"
  },
  {
    "text": "gives me 1 square\nroot of 2 times",
    "start": "4402620",
    "end": "4408440"
  },
  {
    "text": "x, which gives me closed loop\ndynamics of x dot equals Ax",
    "start": "4408440",
    "end": "4432370"
  },
  {
    "text": "minus BKx is equal\nto 0, 1, negative 1,",
    "start": "4432370",
    "end": "4442150"
  },
  {
    "text": "square root of 2 times x. ",
    "start": "4442150",
    "end": "4452150"
  },
  {
    "text": "OK. Now I'm going to\nplot two things here. ",
    "start": "4452150",
    "end": "4460030"
  },
  {
    "text": "First thing I'm going\nto plot is J of x.",
    "start": "4460030",
    "end": "4470789"
  },
  {
    "text": "J of x is square root of\n2, 1, 1, square root of 2. ",
    "start": "4470790",
    "end": "4478150"
  },
  {
    "text": "A little thinking\nabout that, you'll see that it comes out to\nbe an ellipsoid that is--",
    "start": "4478150",
    "end": "4490489"
  },
  {
    "text": "[INAUDIBLE]---- sort\nof shaped like this.",
    "start": "4490490",
    "end": "4498400"
  },
  {
    "text": " I draw contours\nof that function,",
    "start": "4498400",
    "end": "4503670"
  },
  {
    "text": "of that x transpose S x. ",
    "start": "4503670",
    "end": "4514304"
  },
  {
    "text": "And the cost-to-go is 0 here. And it's a bowl that comes up\nin this sort of elliptic bowl.",
    "start": "4514305",
    "end": "4525950"
  },
  {
    "start": "4525950",
    "end": "4536110"
  },
  {
    "text": "All right. So what is the optimal\npolicy going to look like, given that that's my bowl? ",
    "start": "4536110",
    "end": "4545550"
  },
  {
    "text": "We said the best thing to do\nis go down the steepest descent of the bowl. ",
    "start": "4545550",
    "end": "4552070"
  },
  {
    "text": "I want to go down-- wherever I am, I want to\ngo down as fast as I can. ",
    "start": "4552070",
    "end": "4559730"
  },
  {
    "text": "But I can't do it exactly. That was actually sort of a-- that's OK. I mean, I can't do it exactly,\nbecause all I'm allowed to do",
    "start": "4559730",
    "end": "4567110"
  },
  {
    "text": "is change-- I have one component that I'm\nnot allowed to change, right? I have that my Q is going to\ngo forward independent of u",
    "start": "4567110",
    "end": "4579470"
  },
  {
    "text": "directly. So B transpose S x is going\nto be give me a projection",
    "start": "4579470",
    "end": "4585170"
  },
  {
    "text": "of that gradient onto this-- the thing I can\nactually control, which way I can point\nmy phase portrait",
    "start": "4585170",
    "end": "4592400"
  },
  {
    "text": "in that given my control.  And then R is going\nto scale it again.",
    "start": "4592400",
    "end": "4599480"
  },
  {
    "text": "And the resulting\nclosed loop dynamics, let's see if we can\nfigure that out.",
    "start": "4599480",
    "end": "4605580"
  },
  {
    "text": " So if I take the eigenvectors\nand eigenvalues that, well,",
    "start": "4605580",
    "end": "4612500"
  },
  {
    "text": "it turns out I'm not\ngoing to make the plot. My eigenvalues were square\nroot of 2 plus or minus i 1",
    "start": "4612500",
    "end": "4623270"
  },
  {
    "text": "over square root of 2 with v\nbeing 1 over square root of 2.",
    "start": "4623270",
    "end": "4632280"
  },
  {
    "start": "4632280",
    "end": "4644980"
  },
  {
    "text": "So the best thing I can\npossibly do is to go down that-- if I didn't care about--",
    "start": "4644980",
    "end": "4650920"
  },
  {
    "text": "if I didn't worry\nabout penalizing R, I didn't worry about\nmy control actuation, would be to go straight\ndown that bowl.",
    "start": "4650920",
    "end": "4656680"
  },
  {
    "text": "But because I'm\nscaling things by-- I'm filtering things by wearing\nwhat I can actually control, and I'm penalizing things\nby R, the actual response",
    "start": "4656680",
    "end": "4663610"
  },
  {
    "text": "is a complex response\nwhich goes down-- goes down this bowl\nand oscillates its way",
    "start": "4663610",
    "end": "4670000"
  },
  {
    "text": "into the origin. ",
    "start": "4670000",
    "end": "4692610"
  },
  {
    "text": "OK, good. It was a little painful. But that is a set\nof tools that we're",
    "start": "4692610",
    "end": "4701190"
  },
  {
    "text": "going to lean on when we're\nmaking all our algorithms. You've now seen a pretty\nrepresentative sampling",
    "start": "4701190",
    "end": "4708120"
  },
  {
    "text": "of what people can\ndo analytically with optimal control. When you have a linear\ndynamical system,",
    "start": "4708120",
    "end": "4716040"
  },
  {
    "text": "and there's a handful of cost\nfunctions which you can-- either by Pontryagin\nor dynamic programming,",
    "start": "4716040",
    "end": "4723480"
  },
  {
    "text": "the Hamilton-Bellman-Jacobi\nsufficiency theorem, those are really the two big\ntools that are out there.",
    "start": "4723480",
    "end": "4730770"
  },
  {
    "text": "In cases, especially\nfor linear systems, you can analytically come up\nwith optimal control policies",
    "start": "4730770",
    "end": "4736680"
  },
  {
    "text": "and value functions. Why did we distinguish the two?",
    "start": "4736680",
    "end": "4741870"
  },
  {
    "text": "Why did I use one in\none place and the other in the other place?",
    "start": "4741870",
    "end": "4747720"
  },
  {
    "text": "Well, it turns out the\nHamilton-Bellman-Jacobi sufficiency theorem has\nin it these partial J",
    "start": "4747720",
    "end": "4758130"
  },
  {
    "text": "partial x, partial J partial t. So it's only valid, actually, if\npartial J partial x is smooth.",
    "start": "4758130",
    "end": "4767040"
  },
  {
    "text": " The policy we got\nfrom minimum time",
    "start": "4767040",
    "end": "4776719"
  },
  {
    "text": "has this hard nonlinearity\nin the middle of it. It turns out that\nthe value function",
    "start": "4776720",
    "end": "4782630"
  },
  {
    "text": "that you have in the\nminimum time problem also has a hard\nnonlinearity in it.",
    "start": "4782630",
    "end": "4789140"
  },
  {
    "text": "If I'm here versus\nhere, it's smooth, but the gradients\nare not smooth.",
    "start": "4789140",
    "end": "4794690"
  },
  {
    "text": "The gradient is discontinuous. So on this cusp, partial\nJ partial x is undefined.",
    "start": "4794690",
    "end": "4802580"
  },
  {
    "text": "So that's the only\nreason why I didn't lean on the sufficiency\ntheorem completely.",
    "start": "4802580",
    "end": "4808640"
  },
  {
    "text": "How did Pontryagin\nget around that? The sufficiency theorem\nis talking about--",
    "start": "4808640",
    "end": "4815480"
  },
  {
    "text": " it's looking at over--",
    "start": "4815480",
    "end": "4820730"
  },
  {
    "text": "roughly over the\nentire state space. It's looking at variations\nin the cost-to-go function",
    "start": "4820730",
    "end": "4827900"
  },
  {
    "text": "as I move in x and in time. Pontryagin, if you remember, was\nalong a particular trajectory.",
    "start": "4827900",
    "end": "4835309"
  },
  {
    "text": "It was verifying that\na particular trajectory was locally optimal.",
    "start": "4835310",
    "end": "4840380"
  },
  {
    "text": "And it turns out in\nproblems like this in these bang-bang problems,\nalong a particular trajectory,",
    "start": "4840380",
    "end": "4848660"
  },
  {
    "text": "my cost-to-go is smooth.",
    "start": "4848660",
    "end": "4853830"
  },
  {
    "text": "The cost-to-go in the\nminimum time problem was just time, right?",
    "start": "4853830",
    "end": "4859560"
  },
  {
    "text": "So the time I get-- the time it takes for\nme to go to here to here",
    "start": "4859560",
    "end": "4864630"
  },
  {
    "text": "is just smoothly decreasing\nas I get closer like time. Along any trajectory,\nwith these additive costs,",
    "start": "4864630",
    "end": "4873690"
  },
  {
    "text": "the value function is\ngoing to be smooth. But along a\nnon-system trajectory,",
    "start": "4873690",
    "end": "4879300"
  },
  {
    "text": "some line like this, partial-- if I just look at J, how J\nvaries over x, it's not smooth.",
    "start": "4879300",
    "end": "4886139"
  },
  {
    "text": "So Pontryagin is a\nweaker statement. It's a statement about local\nstability along a trajectory.",
    "start": "4886140",
    "end": "4891600"
  },
  {
    "text": "But it's valid in\nslightly larger domains, because it doesn't\nrely on value functions",
    "start": "4891600",
    "end": "4896850"
  },
  {
    "text": "being smoothly differentiable. ",
    "start": "4896850",
    "end": "4904420"
  },
  {
    "text": "Now, for the first-order--",
    "start": "4904420",
    "end": "4910660"
  },
  {
    "text": "sorry, for the double\nintegrator, the brick on ice, we could have just\nchosen our K's by hand",
    "start": "4910660",
    "end": "4915940"
  },
  {
    "text": "and pushed them\nhigher or smaller. We could do locus. We could figure out a\npretty reasonable set",
    "start": "4915940",
    "end": "4921070"
  },
  {
    "text": "of K's, of feedback gains, to\nmake it stabilize to the goal.",
    "start": "4921070",
    "end": "4926159"
  },
  {
    "text": "LQR gives us a different set\nof knobs that we could tune. Now we could more\nexplicitly say what",
    "start": "4926160",
    "end": "4932860"
  },
  {
    "text": "our concern is for getting\nto the goal by the Q matrix, versus what our concern is\nabout using a lot of cost",
    "start": "4932860",
    "end": "4938470"
  },
  {
    "text": "in the R matrix.  So maybe that's not\nvery compelling.",
    "start": "4938470",
    "end": "4944050"
  },
  {
    "text": "Maybe we just did a\nlot of work to just have a slightly\ndifferent set of knobs to turn when I'm designing\nmy feedback controller.",
    "start": "4944050",
    "end": "4949810"
  },
  {
    "text": "But what you're\ngoing to see is that, for much more complicated\nsystems that are still linear--",
    "start": "4949810",
    "end": "4955000"
  },
  {
    "text": "or linearizations about\nvery complicated systems, LQR is going to give\nyou an explicit way",
    "start": "4955000",
    "end": "4960490"
  },
  {
    "text": "to design these linear feedback\ncontrollers in a way that's optimal.",
    "start": "4960490",
    "end": "4967060"
  },
  {
    "text": "So we're actually doing\na variation of LQR now to make an airplane land\non a perch, for instance.",
    "start": "4967060",
    "end": "4974958"
  },
  {
    "text": "We can-- we're going\nto use it to stabilize the double-inverted pendulum,\nthe Acrobot, around the top.",
    "start": "4974958",
    "end": "4980840"
  },
  {
    "text": "So it's going to be a\ngenerally more useful tool. Down at the brick,\ndouble integrator level,",
    "start": "4980840",
    "end": "4986860"
  },
  {
    "text": "you can think it's almost\njust a different set of ways to do your locus. ",
    "start": "4986860",
    "end": "4992570"
  },
  {
    "text": "OK. You have now, through\ntwo sort of dry lectures relative to the\nrest of the class,",
    "start": "4992570",
    "end": "4998290"
  },
  {
    "text": "learned two ways to do\nanalytical optimal control.",
    "start": "4998290",
    "end": "5005567"
  },
  {
    "text": "One is by means of\nPontryagin's minimum principle, one is by means of\ndynamic programming, which is through the HJB\nsufficiency theorem.",
    "start": "5005567",
    "end": "5014880"
  },
  {
    "text": "And you've seen\nsome representatives of what people can do with those\nanalytical optimal control. And it got us far enough to\nmake a brick go to the origin.",
    "start": "5014880",
    "end": "5025619"
  },
  {
    "text": "Right. And it'll do a few\nmore things, but. OK, so that's about as far\nas we get with analytics.",
    "start": "5025620",
    "end": "5032670"
  },
  {
    "text": "We're going to use this in\nplaces to start algorithms up. But if we want to, for instance,\nsolve the minimum time problem",
    "start": "5032670",
    "end": "5042840"
  },
  {
    "text": "or the quadratic\nregulator problem, for the nonlinear\ndynamics of the pendulum,",
    "start": "5042840",
    "end": "5049610"
  },
  {
    "text": "if I take my x dot\nequals Ax plus Bu away and give it the mgL sine\ntheta, then most of these tools",
    "start": "5049610",
    "end": "5058970"
  },
  {
    "text": "break down.  Next Tuesday happens to be\na holiday, virtual Monday.",
    "start": "5058970",
    "end": "5065780"
  },
  {
    "text": "So we won't do it\non next Tuesday. But next Thursday, I'm\ngoing to show you algorithms that are based on these.",
    "start": "5065780",
    "end": "5071840"
  },
  {
    "text": "This is the important foundation\nthat are going to solve algorithmically the same optimal\ncontrol problems that we're--",
    "start": "5071840",
    "end": "5080570"
  },
  {
    "text": "more optimal control problems\nthat we can solve analytically.",
    "start": "5080570",
    "end": "5086179"
  },
  {
    "text": "And then the-- we'll\ngo on from there to more and more\ncomplicated systems.",
    "start": "5086180",
    "end": "5091990"
  },
  {
    "start": "5091990",
    "end": "5093000"
  }
]