[
  {
    "start": "0",
    "end": "57000"
  },
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6820"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or to\nview additional materials",
    "start": "6820",
    "end": "13480"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13480",
    "end": "22100"
  },
  {
    "text": "ALIN TOMESCU: My name is Alin. I work in Stata, in\nthe Stata Center. I'm a PhD student\nthere in my fifth year.",
    "start": "22100",
    "end": "27760"
  },
  {
    "text": "And today we're going\nto be talking about one of our research\nproject called Catena. And Catena is a really\nnice way of using bitcoin",
    "start": "27760",
    "end": "35020"
  },
  {
    "text": "to build append-only logs. Bitcoin itself is\nan append-only log. And a lot of people have been\nusing it to put data in it.",
    "start": "35020",
    "end": "43270"
  },
  {
    "text": "And I'll describe a\nreally efficient way of doing that and\nits applications. And if there is time, we'll talk\nabout a tax and maybe colored",
    "start": "43270",
    "end": "49930"
  },
  {
    "text": "coins and some other stuff. We'll talk about the\nwhat, the how and the why. And that's the overview\nof the presentation.",
    "start": "49930",
    "end": "57040"
  },
  {
    "text": "So let's talk about this\nproblem called the equivocation problem. So what is this?",
    "start": "57040",
    "end": "62379"
  },
  {
    "text": "In general, non-equivocation\nmeans saying the same thing to everybody. So for example, if you\nhave a malicious service",
    "start": "62380",
    "end": "69159"
  },
  {
    "text": "and you have Alice\nand Bob, the service should say the same\nthing to Alice and Bob.",
    "start": "69160",
    "end": "74170"
  },
  {
    "text": "So it would make a\nbunch of statements. Let's say s1, s2, s3 over\ntime and Alice and Bob",
    "start": "74170",
    "end": "79180"
  },
  {
    "text": "would see all of\nthese statements. So this is very similar to\nwhat bitcoin provides, right? In bitcoin you see block\none, block two, block three.",
    "start": "79180",
    "end": "86049"
  },
  {
    "text": "And everybody agrees on these\nblocks in sequence, right? Does that make sense? So this is non-equivocation\nand in some sense",
    "start": "86050",
    "end": "92290"
  },
  {
    "text": "this is what bitcoin\nalready offers. And in general with\nnon-equivocation,",
    "start": "92290",
    "end": "97363"
  },
  {
    "text": "what you might get is\nsome of these statements might actually be\nfalse or incorrect. Non-equivocation\ndoesn't guarantee you",
    "start": "97363",
    "end": "103240"
  },
  {
    "text": "that this statement is\na correct statement. But it just guarantees\nyou that everybody sees the same statements. And then they can detect\nincorrect statements.",
    "start": "103240",
    "end": "109900"
  },
  {
    "text": "In bitcoin you get\na little bit more. You actually know that\nif this is a block, it's a valid block, assuming\nthere are enough blocks on top",
    "start": "109900",
    "end": "115930"
  },
  {
    "text": "of it, right? So equivocation means saying\nthe same thing to everybody. So for example, this malicious\nservice at time four,",
    "start": "115930",
    "end": "123609"
  },
  {
    "text": "he might show Bob a different\nstatement than Alice. So Bob sees s4 and\nAlice sees s4 prime.",
    "start": "123610",
    "end": "129550"
  },
  {
    "text": "This is what happens\nin bitcoin sometimes. And that's how you can\ndouble spend in bitcoin by putting the transaction here\nsending money to the merchant,",
    "start": "129550",
    "end": "136660"
  },
  {
    "text": "and then putting\nanother transaction here sending money back to you. Right, are you guys\nfamiliar with this?",
    "start": "136660",
    "end": "141960"
  },
  {
    "text": "Yeah, OK. All right, so why\ndoes this matter? Let me give you a silly example. Suppose we have Jimmy and we\nhave Jimmy's mom and Jimmy's",
    "start": "141960",
    "end": "149860"
  },
  {
    "text": "dad, right? And Jimmy wants to\ngo outside and play. But he knows that mom and dad\nusually don't let him play.",
    "start": "149860",
    "end": "156070"
  },
  {
    "text": "So what he does is he\ntells dad, hey dad, mom said I can go outside.",
    "start": "156070",
    "end": "161209"
  },
  {
    "text": "Right, and then he\ntells mom, hey mom. Dad said I can go outside. And let's say mom and dad\nare in different rooms",
    "start": "161210",
    "end": "167470"
  },
  {
    "text": "and they're watching soap\noperas and they're not talking to one another. So they can actually\nconfirm that.",
    "start": "167470",
    "end": "172530"
  },
  {
    "text": "You know, mom can confirm\nthat dad really said that. And dad can really confirm\nthat mom said that. But they both trust Jimmy.",
    "start": "172530",
    "end": "178642"
  },
  {
    "text": "So you see how equivocation\ncan be really problematic because now mom and\ndad will say sure, go outside as long as the\nother person said that, right?",
    "start": "178642",
    "end": "185860"
  },
  {
    "text": "But let me give you a\nmore practical example. So let's look at something\ncalled a public-key directory.",
    "start": "185860",
    "end": "191579"
  },
  {
    "text": "A public-key directory allows\nyou to map user's public keys-- a user name to a public key. Right, so here I have\nthe public key for Alice",
    "start": "191580",
    "end": "198283"
  },
  {
    "text": "and here I have the\npublic key for Bob. And they look up each other's\nkeys in this directory. And then they can set\nup a secure channel.",
    "start": "198283",
    "end": "204490"
  },
  {
    "text": "How many of you guys use\nWhatsapp, for example? So the Whatsapp server has\na public-key directory.",
    "start": "204490",
    "end": "210340"
  },
  {
    "text": "And when I want to\nsend you a message, I look up your phone\nnumber in that directory and I get your\npublic key, right?",
    "start": "210340",
    "end": "216099"
  },
  {
    "text": "If that directory equivocates,\nthe following thing can happen. What the directory can do is\nit can create a new directory",
    "start": "216100",
    "end": "221590"
  },
  {
    "text": "at time two where he puts\na fake public key for Bob and he shows this\nto Alice, right?",
    "start": "221590",
    "end": "227650"
  },
  {
    "text": "And at time two also, he creates\nanother directory for Bob where he puts a fake public\nkey for Alice, right?",
    "start": "227650",
    "end": "235000"
  },
  {
    "text": "So now the problem\nhere is that when Alice checks in this directory,\nshe looks at her own public key",
    "start": "235000",
    "end": "240640"
  },
  {
    "text": "to make sure she's\nnot impersonated. And Alice looks in this\nversion and sees, OK. That is my public key. I'm good.",
    "start": "240640",
    "end": "245770"
  },
  {
    "text": "She looks in this version, OK. This is my public key. I'm good. So now I'm ready to\nuse this directory. And I'll look up Bob and\nI'll get his public key.",
    "start": "245770",
    "end": "252580"
  },
  {
    "text": "But Alice will actually\nget the wrong public key. Does everybody see that? And similarly Bob\nwill do the same.",
    "start": "252580",
    "end": "259420"
  },
  {
    "text": "So Bob will look in his fork\nof the directory, right? And he looks up his key\nhere and his key here.",
    "start": "259420",
    "end": "265492"
  },
  {
    "text": "And he thinks he's OK. He's not impersonated. But in fact, Alice has\nimpersonated there. OK?",
    "start": "265493",
    "end": "271540"
  },
  {
    "text": "And now as a result, they\nwill obtain fake keys for each other. And this man in the\nmiddle, attacker",
    "start": "271540",
    "end": "277960"
  },
  {
    "text": "who knows the\ncorresponding secret keys for these public\nkeys can basically read all of their\ncommunications.",
    "start": "277960",
    "end": "285890"
  },
  {
    "text": "Any questions about this? This is just one example\nof how equivocation can be really disastrous.",
    "start": "285890",
    "end": "291680"
  },
  {
    "text": "So in a public-key directory,\nif you can equivocate, you can show fake\npublic keys for people and impersonate them.",
    "start": "291680",
    "end": "298263"
  },
  {
    "text": "So in other words,\nit's really important that Alice and Bob both\nsee the same directory. Because if Bob saw\nthis directory,",
    "start": "298263",
    "end": "304520"
  },
  {
    "text": "the same one Alice saw, then Bob\nwould notice that this is not the public key he had.",
    "start": "304520",
    "end": "309635"
  },
  {
    "text": "He would notice his\nfirst public key and then that there's a second one there. And then he would know\nhe's impersonated.",
    "start": "309635",
    "end": "314688"
  },
  {
    "text": "And he could let's say,\ntalk to the New York Times, and say, look. This directory is\nimpersonating me.",
    "start": "314688",
    "end": "320040"
  },
  {
    "text": " So in conclusion, equivocation\ncan be pretty bad.",
    "start": "320040",
    "end": "325639"
  },
  {
    "text": "So this idea that you\nsay different things to different people can\nbe pretty disastrous. And what Catena does\nis it prevents that.",
    "start": "325640",
    "end": "331949"
  },
  {
    "start": "329000",
    "end": "354000"
  },
  {
    "text": "So in general, if you have\nthis malicious service that is backed by Catena, if it\nwants to say different things",
    "start": "331950",
    "end": "338535"
  },
  {
    "text": "to different people.\nit cannot do that. It has to show the same\nthing to everybody. And the way we achieve that is\nby building on top of bitcoin.",
    "start": "338535",
    "end": "345890"
  },
  {
    "text": "And that's what we're going\nto be talking about today. So any questions about\nsort of the general setting",
    "start": "345890",
    "end": "351319"
  },
  {
    "text": "of the problem and\nour goals here? So let's move on then. So why does this matter?",
    "start": "351320",
    "end": "356925"
  },
  {
    "start": "354000",
    "end": "442000"
  },
  {
    "text": "So this matters for a\nbunch of other reasons, not just public-key directories\nand secure messaging. It matters because when you want\nto do secure software update,",
    "start": "356925",
    "end": "364890"
  },
  {
    "text": "equivocation is a problem. And I'll talk about that later. So for example, at\nsome point bitcoin was concerned about\nmalicious bitcoin binaries",
    "start": "364890",
    "end": "372240"
  },
  {
    "text": "being published on\nthe web and people like you and me\ndownloading those binaries and getting our coins stolen.",
    "start": "372240",
    "end": "377810"
  },
  {
    "text": "Right, and it turns out that\nthat's an equivocation problem. Somebody is equivocating, right? It's equivocating about\nthe bitcoin binary.",
    "start": "377810",
    "end": "384610"
  },
  {
    "text": "It's showing us a\nfake version and maybe other people the real version. Secure messaging,\nlike I said before,",
    "start": "384610",
    "end": "390300"
  },
  {
    "text": "has applications here and. Not just secure messaging\nbut also the web.",
    "start": "390300",
    "end": "395340"
  },
  {
    "text": "Like when you go\non Facebook.com, you're looking up\nFacebook's public key. And if somebody lies to\nyou about that public key,",
    "start": "395340",
    "end": "400700"
  },
  {
    "text": "you could be going to\na malicious service and you could be giving\nthem your Facebook password.",
    "start": "400700",
    "end": "406389"
  },
  {
    "text": "Does that make sense? And also it has\napplications in the sense that if you have a way of\nbuilding a append-only log,",
    "start": "406390",
    "end": "413830"
  },
  {
    "text": "you really have a way of\nbuilding a blockchain right for whatever purpose you want. And we'll talk\nabout that as well.",
    "start": "413830",
    "end": "420830"
  },
  {
    "text": "So the 10,000 feet\nview of the system is we built this bitcoin\nbased append-only log.",
    "start": "420830",
    "end": "427060"
  },
  {
    "text": "And the way to think about\nis that bitcoin is already an append-only log. It's just that it's kind\nof inefficient to look",
    "start": "427060",
    "end": "432790"
  },
  {
    "text": "in that log. If you want to pick certain\nthings from the Bitcoin blockchain, like you put your\ncertain bits and pieces of data",
    "start": "432790",
    "end": "438009"
  },
  {
    "text": "there, you have to\nkind of download the whole thing to make sure\nyou're not missing anything. And I'll tell you why soon.",
    "start": "438010",
    "end": "443020"
  },
  {
    "start": "442000",
    "end": "505000"
  },
  {
    "text": "So instead of\nputting stuff naively in the Bitcoin\nblockchain, we put it in a more principled way.",
    "start": "443020",
    "end": "448720"
  },
  {
    "text": "And in a sense we get\na log and another log. We get our log and\nthe bitcoin log.",
    "start": "448720",
    "end": "454660"
  },
  {
    "text": "And this generalizes to\nother cryptocurrencies. Like you could do\nthis in light coin, for example, or\neven in ethereum.",
    "start": "454660",
    "end": "460215"
  },
  {
    "text": "Though I don't\nthink you guys yet talked about how the\nethereum blockchain works. And the cool thing about this\nCatena log that we're building",
    "start": "460215",
    "end": "468310"
  },
  {
    "text": "is that the Catena log is as\nhard to fork as the bitcoin blockchain. If you want to fork our log,\nyou have to fork bitcoin.",
    "start": "468310",
    "end": "474880"
  },
  {
    "text": "However, unlike the\nBitcoin blockchain, Catena is super\nefficient to verify. So in particular, remember,\nI described the log",
    "start": "474880",
    "end": "482770"
  },
  {
    "text": "in terms of the\nstatements in it. So if you have 10\nstatements, each statement",
    "start": "482770",
    "end": "487840"
  },
  {
    "text": "will be 600 bytes to audit. So you don't have to\ndownload the whole Bitcoin blockchain to make sure you're\nnot missing a statement.",
    "start": "487840",
    "end": "494820"
  },
  {
    "text": "And you also have to download\n80 bytes per bitcoin block. And we have a Java\nimplementation of this.",
    "start": "494820",
    "end": "500020"
  },
  {
    "text": "And if you guys are curious,\nyou can go to my GitHub page, and take a look at the code.",
    "start": "500020",
    "end": "505630"
  },
  {
    "start": "505000",
    "end": "862000"
  },
  {
    "text": "All right, so before we\nstart, I know you guys already know a lot about how\nthe Bitcoin blockchain, but it's important that I\nreintroduce some terminology",
    "start": "505630",
    "end": "511720"
  },
  {
    "text": "just so we're on the same page. So this is the\nbitcoin blockchain. We have a bunch of\nblocks connected by hash chain pointers.",
    "start": "511720",
    "end": "517690"
  },
  {
    "text": "And we have Merkle\ntrees of transactions. And you know, these arrows\nindicate hash pointers.",
    "start": "517690",
    "end": "523610"
  },
  {
    "text": "It means that block n stores a\nhash of block n minus 1 in it, right? So in that sense.",
    "start": "523610",
    "end": "529690"
  },
  {
    "text": "Block n has a hash pointer\nto block n minus 1. ",
    "start": "529690",
    "end": "535320"
  },
  {
    "text": "All right, and like I said,\neach tree has a Merkle tree. Each block has a Merkle tree. And everybody\nagrees on this chain",
    "start": "535320",
    "end": "540960"
  },
  {
    "text": "of blocks via proof of work\nconsensus, which all of you already know. And importantly, in the Merkle\ntrees, we have transactions.",
    "start": "540960",
    "end": "548670"
  },
  {
    "text": "And transactions\ncan do two things. Right, a transaction can\nmint coins, create new coins. So here I have transaction a.",
    "start": "548670",
    "end": "554589"
  },
  {
    "text": "It created four coins by\nstoring them in an output. Are you familiar with outputs? So you guys already discussed\ntransaction outputs and inputs.",
    "start": "554590",
    "end": "561462"
  },
  {
    "text": "So that's what we're going\nover here again real quick. So an output specifies\nthe number of coins",
    "start": "561462",
    "end": "567450"
  },
  {
    "text": "and the public key of\nthe owner of those coins, as you already know. And the second purpose\nof transactions",
    "start": "567450",
    "end": "573630"
  },
  {
    "text": "is that they can transfer\ncoins, right, and pay fees in the process. So here if you have\na transaction b,",
    "start": "573630",
    "end": "579150"
  },
  {
    "text": "this transaction b\nmight say, hey, here's a signature from the\nowner of these coins here.",
    "start": "579150",
    "end": "585750"
  },
  {
    "text": "Here's a signature\nand transaction b. And here's the new\nowner with public key b of three of those four coins.",
    "start": "585750",
    "end": "592200"
  },
  {
    "text": "And one of those coins\nI'll just give it to the miners as\na transaction fee.",
    "start": "592200",
    "end": "597775"
  },
  {
    "text": "Does this make sense? How many of you are with me? All right, any questions\nabout how transaction inputs",
    "start": "597775",
    "end": "603770"
  },
  {
    "text": "and outputs work? So if you remember\nin the input here, you have a hash pointer\nto the output here.",
    "start": "603770",
    "end": "609520"
  },
  {
    "text": "All right. So and the high\nlevel idea here is that the output\nis just the number",
    "start": "609520",
    "end": "615680"
  },
  {
    "text": "of coins in a public key. And the input is a hash\npointer to an output plus a digital signature from\nthat output's public key, OK?",
    "start": "615680",
    "end": "624410"
  },
  {
    "text": "And yeah, so what\nhappens here is that transaction b is spending\ntransaction a's first output.",
    "start": "624410",
    "end": "630920"
  },
  {
    "text": "Right, that's the terminology\nthat we're going to use. And I think you\nguys have already used terminology like this.",
    "start": "630920",
    "end": "637790"
  },
  {
    "text": "And in addition, what we're\ngoing to talk about today is the fact that in these\nbitcoin transactions you can actually embed data.",
    "start": "637790",
    "end": "643670"
  },
  {
    "text": "And I think you touched briefly\non this concept of op return transaction outputs.",
    "start": "643670",
    "end": "650060"
  },
  {
    "text": "Right, so this is an output that\nsends coins to a public key. But here I can have an output\nthat sends coins to nobody.",
    "start": "650060",
    "end": "657800"
  },
  {
    "text": "It just specifies some data. And in fact, I'll use that\ndata to specify the statements that I was talking\nabout earlier.",
    "start": "657800",
    "end": "664870"
  },
  {
    "text": "So that the high\nlevel point here is that you can embed data\nin bitcoin transactions using",
    "start": "664870",
    "end": "670339"
  },
  {
    "text": "these operations. And there's a bunch of other\nways to do it, actually. Like initially\nwhat people did is",
    "start": "670340",
    "end": "675500"
  },
  {
    "text": "they put the data\nas the public key. They just set the\npublic key to the data. And in that sense, they\nkind of wasted bitcoins.",
    "start": "675500",
    "end": "682570"
  },
  {
    "text": "Right, they said hey,\nsend these three bitcoins to this public key, which\nis just some random data.",
    "start": "682570",
    "end": "687890"
  },
  {
    "text": "But nobody would know the\ncorresponding secret key of that public key. So therefore those\ncoins would be burned.",
    "start": "687890",
    "end": "693860"
  },
  {
    "text": "Did you did you cover\nthis in class already? Maybe, maybe a little bit. So but that's kind\nof inefficient",
    "start": "693860",
    "end": "699602"
  },
  {
    "text": "because if you\nremember, the miners have to build this UTXO set. And they have to\nkeep this output that",
    "start": "699602",
    "end": "705770"
  },
  {
    "text": "has this bad public\nkey in their memory forever because nobody's\ngoing to be able to spend it. So we don't want to do that.",
    "start": "705770",
    "end": "711839"
  },
  {
    "text": "We want to build a nice system,\na system that treats bitcoin nicely, the bitcoin miners.",
    "start": "711840",
    "end": "717060"
  },
  {
    "text": "So that's why we use\nthese return outputs. All right, so the\nhigh level here is that Alice gives\nBob three bitcoins.",
    "start": "717060",
    "end": "723290"
  },
  {
    "text": "And the miners collect\na bitcoin as a fee. And of course, you can\nkeep doing this, right? Like Bob can give Carol these\ntwo bitcoins later by creating",
    "start": "723290",
    "end": "730940"
  },
  {
    "text": "another transaction with an\ninput referring to that output and with an output specifying\nCarol's public key.",
    "start": "730940",
    "end": "737830"
  },
  {
    "text": "All right, and the high level\nidea of bitcoin is that you don't-- you cannot\ndouble spend coins. And what that means is that\na transaction output can only",
    "start": "737830",
    "end": "745640"
  },
  {
    "text": "be referred to by a\nsingle transaction input. So this thing right here in\nbitcoin where I have two inputs",
    "start": "745640",
    "end": "750950"
  },
  {
    "text": "spending an output\ncannot happen, right? How many of you are\nfamiliar with this already?",
    "start": "750950",
    "end": "756870"
  },
  {
    "text": "OK, good. So actually this is\nthe essential trick that Catena leverages. And we'll talk about it soon.",
    "start": "756870",
    "end": "762010"
  },
  {
    "text": "And yeah, the\nmoral of the story, the reason I told you all\nof this is because you know, basically if you have proof of\nwork consensus in the bitcoin",
    "start": "762010",
    "end": "768990"
  },
  {
    "text": "sense, you cannot\ndo double spends. So this thing right\nhere, that I said before, just cannot occur in the Bitcoin\nblockchain unless you break",
    "start": "768990",
    "end": "776157"
  },
  {
    "text": "the assumptions, right, unless\nyou have more mining power than you should. In that case, you either\nhave to tx2 or tx2",
    "start": "776157",
    "end": "783269"
  },
  {
    "text": "prime, but not both, right? And what Catena\nreally realizes is",
    "start": "783270",
    "end": "788880"
  },
  {
    "text": "that if I put statements\nin these transactions now, what that means is that I can\nonly have a second statement.",
    "start": "788880",
    "end": "794370"
  },
  {
    "text": "I cannot have two\nsecond statements. I cannot equivocate about the\nsecond statements if I just restrict my way of issuing\nstatements in this way.",
    "start": "794370",
    "end": "802737"
  },
  {
    "text": "I put the first statement\nin the transaction and the second\nstatement I put it in a transaction that\nspends the first one.",
    "start": "802737",
    "end": "808830"
  },
  {
    "text": "So does everybody agree that\nif I do things in this way and I want to equivocate\nabout the second statement, I would have to double spend?",
    "start": "808830",
    "end": "816520"
  },
  {
    "text": "So that's the key insight\nbehind our system. Any questions about this so far?",
    "start": "816520",
    "end": "822220"
  },
  {
    "text": " You know it's really hard to\ntalk if you guys talk back,",
    "start": "822220",
    "end": "828480"
  },
  {
    "text": "it's way easier. Yeah? AUDIENCE: A question. And maybe, I think I'm\ngetting this right.",
    "start": "828480",
    "end": "835078"
  },
  {
    "text": "If you're setting up\nthe first transaction, then you're adding data on? You're burning bitcoins\nevery time you're doing it,",
    "start": "835078",
    "end": "841130"
  },
  {
    "text": "so at some point,\nyou're going to run out. ALIN TOMESCU: That's\nan excellent question. So let's-- we'll go over that. But the idea is\nthat in this output,",
    "start": "841130",
    "end": "847949"
  },
  {
    "text": "I won't burn any bitcoins. I'll actually specify\nmy own public key here. And I'll just send the\nbitcoins back to myself.",
    "start": "847950",
    "end": "854820"
  },
  {
    "text": "And in the process I'll pay a\nfee to issue this transaction. Does that make sense?",
    "start": "854820",
    "end": "859860"
  },
  {
    "text": "Yeah? And we'll talk about it later. OK, so real quickly,\nwhat did previous work",
    "start": "859860",
    "end": "865280"
  },
  {
    "start": "862000",
    "end": "1110000"
  },
  {
    "text": "do regarding this? So how many of you are\nfamiliar with blockstack? 1, 2, only two people?",
    "start": "865280",
    "end": "871900"
  },
  {
    "text": "OK how many of you are\nfamiliar with Keybase? OK, so blockstack and Keybase\nactually post statements",
    "start": "871900",
    "end": "877950"
  },
  {
    "text": "in the Bitcoin blockchain. And they're both\npublic directories. They map user names\nto public keys.",
    "start": "877950",
    "end": "883380"
  },
  {
    "text": "And for example, Keybase,\nwhat Keybase does is they take this\nMerkle route hash, and they put it in\nthe transaction.",
    "start": "883380",
    "end": "889380"
  },
  {
    "text": "And then six hours later,\nthey take the new route hash, and they put it in another\ntransaction, and so on. Every six hours, they\npost the transaction.",
    "start": "889380",
    "end": "896280"
  },
  {
    "text": "But unfortunately, they don't\nactually do what Catena does. So they don't have their new\ntransaction spend the old one.",
    "start": "896280",
    "end": "903360"
  },
  {
    "text": "And as a result,\nif you're trying to make sure you see all of\nthe statements for Keybase,",
    "start": "903360",
    "end": "909210"
  },
  {
    "text": "you don't have a lot\nof recourse other than just downloading each\nblock and looking in the block",
    "start": "909210",
    "end": "914910"
  },
  {
    "text": "for all of the\nrelevant transactions. Another thing you could\ndo is you could sort of trust the bitcoin miners--",
    "start": "914910",
    "end": "921750"
  },
  {
    "text": "the bitcoin full nodes to\nfilter the blocks for you. So you could contact a\nbunch of bitcoin full nodes",
    "start": "921750",
    "end": "928877"
  },
  {
    "text": "and say, look. I'm only interested\nin transactions that have a certain IP\nreturn prefix in the data.",
    "start": "928877",
    "end": "934478"
  },
  {
    "text": "And they could do that for you. But unfortunately,\nbitcoin full nodes could also lie to\nyou very easily. And there is no cost\nfor them to lie to you.",
    "start": "934478",
    "end": "941040"
  },
  {
    "text": "Everybody can be a\nbitcoin full node. So then it becomes a very\nbandwidth intensive process because you have to\nask a lot of full nodes",
    "start": "941040",
    "end": "948839"
  },
  {
    "text": "to deal with the fact that\nsomeone might lie to you. But you either need to\ndownload full blocks to find let's say, a missing\nstatement like this one",
    "start": "948840",
    "end": "955930"
  },
  {
    "text": "that a bitcoin full node\nmight hide from you, or you can trust the majority\nof bitcoin full nodes to not hide statements, which\nis not very good, right?",
    "start": "955930",
    "end": "963302"
  },
  {
    "text": "So I don't want to\ntrust these full nodes because all of you guys\ncould run a full node right now in the bitcoin network. It doesn't cost you anything.",
    "start": "963302",
    "end": "968838"
  },
  {
    "text": "And if I talk to your malicious\nfull node, I could be screwed. So our work just says, look.",
    "start": "968838",
    "end": "975750"
  },
  {
    "text": "Instead of issuing\ntransactions in sort of an uncorrelated fashion,\njust do the following thing.",
    "start": "975750",
    "end": "983430"
  },
  {
    "text": "Every transaction you issue\nshould spend the previous one. So as a result, if someone\nwants to equivocate about the third\nstatement, they have",
    "start": "983430",
    "end": "989520"
  },
  {
    "text": "to double spend\nlike I said before. Right? Yeah? AUDIENCE: So what's\nthe connection back",
    "start": "989520",
    "end": "995975"
  },
  {
    "text": "to Keybase and blockstack again? ALIN TOMESCU: Yeah, so\nKeybase and blockstack",
    "start": "995975",
    "end": "1001890"
  },
  {
    "text": "are public directories. And what they do is they want\nto prevent themselves from--",
    "start": "1001890",
    "end": "1007800"
  },
  {
    "text": "is there a whiteboard\nI can draw here? Yeah so, let's say, you know,\nif you remember the picture",
    "start": "1007800",
    "end": "1014990"
  },
  {
    "text": "from the beginning, I can\nhave a public directory that evolves over time, right? So this is v1 of the\ndirectory, and it",
    "start": "1014990",
    "end": "1021199"
  },
  {
    "text": "might have the right public\nkeys for Alice and Bob. But at v2, the\ndirectory might do this. It might do v2.",
    "start": "1021200",
    "end": "1027890"
  },
  {
    "text": "It might have Alice, Bob, but\nthen put a fake key for Alice. And at V2 prime, it might\ndo Alice, Bob as before,",
    "start": "1027890",
    "end": "1034369"
  },
  {
    "text": "and put a fake key for Bob. So in other words it keeps\nthe directory append-only. But it just adds fake public\nkeys for the right people",
    "start": "1034369",
    "end": "1042470"
  },
  {
    "text": "in the right version. So here this one\nis shown to Bob. And here this one\nis shown to Alice.",
    "start": "1042470",
    "end": "1048860"
  },
  {
    "text": "So now Alice will use\nthis fake key for Bob. So she'll encrypt a message\nwith b prime for Bob.",
    "start": "1048860",
    "end": "1056330"
  },
  {
    "text": "And now the attacker can\neasily decrypt this message because he has the secret key.",
    "start": "1056330",
    "end": "1062780"
  },
  {
    "text": "So what the attacker can\ndo then is re-encrypt it with the right\npublic key for Bob",
    "start": "1062780",
    "end": "1068570"
  },
  {
    "text": "and now he can read\nAlice's messages. And the whole idea is\nthat the attacker-- you know, this b prime is the\npublic key, is pk b prime,",
    "start": "1068570",
    "end": "1077690"
  },
  {
    "text": "let's say. But the attacker\nhas this sk b prime. He knows sk b prime because\nthe attacker put this in there.",
    "start": "1077690",
    "end": "1084110"
  },
  {
    "text": "The attacker being really,\nblockstack or Keybase. And of course, they're\nnot attackers in the sense that they want to be good guys.",
    "start": "1084110",
    "end": "1089730"
  },
  {
    "text": "But they're going to be\ncompromised eventually. So they want to\nprevent themselves from doing things like these.",
    "start": "1089730",
    "end": "1094750"
  },
  {
    "text": "Is that sort of\nanswer your question? Yeah. All right, so yeah, a\nreally simple summary.",
    "start": "1094750",
    "end": "1102130"
  },
  {
    "text": "If I had two slides to summarize\nour work, this would be it. Right, they would be these two. Look, don't do things this way.",
    "start": "1102130",
    "end": "1107730"
  },
  {
    "text": "Do them this way. All right, so let's see,\nlet's look a little bit at the design. So remember we have\nthese authorities that",
    "start": "1107730",
    "end": "1116390"
  },
  {
    "start": "1110000",
    "end": "1414000"
  },
  {
    "text": "could equivocate about\nstatements they issued like blockstack and Keybase. So what we propose is\nlook, these authorities",
    "start": "1116390",
    "end": "1122600"
  },
  {
    "text": "can run a lock server,\na Catena lock server. And they start with some\nfunds locked in some output.",
    "start": "1122600",
    "end": "1129943"
  },
  {
    "text": "And what they can\ndo first is they can issue this\ngenesis transaction to start a new lock.",
    "start": "1129943",
    "end": "1135289"
  },
  {
    "text": "So for example, Keybase would\nissue this genesis transaction starting the log of their\npublic directory Merkle routes.",
    "start": "1135290",
    "end": "1142309"
  },
  {
    "text": "And this genesis\ntransaction can be thought of as the\npublic key of the log. Once you have this\ngenesis transaction,",
    "start": "1142310",
    "end": "1148250"
  },
  {
    "text": "you know it's transaction ID. You can verify any\nfuture statements, and you can implicitly prevent\nequivocation about statements.",
    "start": "1148250",
    "end": "1157610"
  },
  {
    "text": "And what the lock\nserver is going to do is it's going to\ntake these coins and send them back to the\nserver to answer your question.",
    "start": "1157610",
    "end": "1164450"
  },
  {
    "text": "So if there was a public\nkey, if these coins are owned by some\npublic key, they're just sent back to\nsame public key here",
    "start": "1164450",
    "end": "1169500"
  },
  {
    "text": "and paying some\nfees in the process. Right, so we're not\nburning coins in the sense that we're just\npaying fees that are",
    "start": "1169500",
    "end": "1175730"
  },
  {
    "text": "miners, which we have to do.  OK, so now what you\ncan do is if you",
    "start": "1175730",
    "end": "1182120"
  },
  {
    "text": "want to issue the\nfirst statements, you create a transaction. You send the coins from this\noutput to this other output.",
    "start": "1182120",
    "end": "1188480"
  },
  {
    "text": "You pay some fees\nin the process. You put your statement\nin an op return output.",
    "start": "1188480",
    "end": "1193850"
  },
  {
    "text": "And as a result, if this lock\nserver wants to equivocate, it has to again,\ndouble spend here,",
    "start": "1193850",
    "end": "1199140"
  },
  {
    "text": "which it cannot do unless\nit has enough mining power. So Keybase and\nblockstack, if they",
    "start": "1199140",
    "end": "1204230"
  },
  {
    "text": "were to use a system\nlike this, they could prevent themselves\nfrom equivocating. And this can keep going, right?",
    "start": "1204230",
    "end": "1209809"
  },
  {
    "text": "So you issue\nanother transaction. Spend the previous output. Put the new statement. Yes? AUDIENCE: This doesn't\nseem like a new problem.",
    "start": "1209810",
    "end": "1216148"
  },
  {
    "text": "How have authorities prevented\nequivocation in the past? ALIN TOMESCU: This doesn't\nseem like a new problem.",
    "start": "1216148",
    "end": "1222920"
  },
  {
    "text": "How did authorities do it? The problem is not new. The problem is eternal. So you are correct there.",
    "start": "1222920",
    "end": "1228260"
  },
  {
    "text": "How did they do it in the past? They just used a Byzantine\nconsensus algorithm. So in some sense this is what\nwe're doing here as well.",
    "start": "1228260",
    "end": "1234870"
  },
  {
    "text": "We're just piggybacking\non top of Bitcoin's Byzantine consensus algorithm. AUDIENCE: So you're rolling down\nto a newer Byzantine consensus",
    "start": "1234870",
    "end": "1242960"
  },
  {
    "text": "algorithm basically. ALIN TOMESCU: Sure, I'm not\nsure what rolling down means. But yeah, we're piggybacking\non top of bitcoin.",
    "start": "1242960",
    "end": "1249197"
  },
  {
    "text": "The idea is that look,\na byzantine consensus is actually quite\ncomplex to get right. We already have a publicly\nverifiable business consensus",
    "start": "1249197",
    "end": "1256920"
  },
  {
    "text": "algorithm. It's bitcoin. Why can't we use it to verify,\nlet's say, a log of statements",
    "start": "1256920",
    "end": "1262280"
  },
  {
    "text": "super efficiently? So up until our work, people\ndidn't seem to do this.",
    "start": "1262280",
    "end": "1267380"
  },
  {
    "text": "So Keybase didn't do this. Blockstack didn't do this. They kind of forced it to\ndownload the entire bitcoin block chain to verify let's\nsay, three statements.",
    "start": "1267380",
    "end": "1274575"
  },
  {
    "text": "So in our case, you only have\nto download a few kilobytes of data to verify\nthese three statements, assuming you have the\nbitcoin block headers, right,",
    "start": "1274575",
    "end": "1281120"
  },
  {
    "text": "which we think is\na step forward. And it's sort of\nlike the right way to use these systems\nshould be you",
    "start": "1281120",
    "end": "1288260"
  },
  {
    "text": "know, the efficient way,\nnot the inefficient way. Because bandwidth\nis expensive, right? Computation is cheap. Bandwidth is expensive.",
    "start": "1288260",
    "end": "1294220"
  },
  {
    "text": " All right, so anyway the idea is\nthat if the lock server becomes",
    "start": "1294220",
    "end": "1300679"
  },
  {
    "text": "malicious, if Keybase or\nblockstack gets hacked, they cannot equivocate\nabout the third statement.",
    "start": "1300680",
    "end": "1306050"
  },
  {
    "text": "They can only issue one\nunique third statement. And the advantages\nare, you know, it's hard to fork this lock.",
    "start": "1306050",
    "end": "1312100"
  },
  {
    "text": "It's hard to equivocate\nabout third statement. But it's efficient to verify. And I'll walk you through\nhow clients verify soon.",
    "start": "1312100",
    "end": "1317493"
  },
  {
    "text": " The disadvantages\nare that if I want",
    "start": "1317493",
    "end": "1323020"
  },
  {
    "text": "to know that this is the\nsecond statement in the log, I have to wait for\nsix more blocks to be built on top of this\nstatement's block, right?",
    "start": "1323020",
    "end": "1330832"
  },
  {
    "text": "Just like in bitcoin, you\nhave to wait for six blocks to make sure a transaction\nis confirmed, right? Why do you do that?",
    "start": "1330832",
    "end": "1336180"
  },
  {
    "text": "The reason you do that\nis because there could be another transaction\nhere, double spending because sometimes there are\naccidental forks in bitcoin",
    "start": "1336180",
    "end": "1343280"
  },
  {
    "text": "and things like that. What are some\nother disadvantages that you guys can point out?",
    "start": "1343280",
    "end": "1349057"
  },
  {
    "text": " Yeah? AUDIENCE: It's going\nto be expensive.",
    "start": "1349057",
    "end": "1355040"
  },
  {
    "text": "ALIN TOMESCU: It's going\nto be expensive to issue these trends. So Alin-- Alin and I\nshare the same name.",
    "start": "1355040",
    "end": "1360240"
  },
  {
    "text": "So Alin is pointing\nout that you know, every time I issue\nthese statements, I have to pay a fee, right? And if you remember, the\nfees were quite ridiculous",
    "start": "1360240",
    "end": "1366860"
  },
  {
    "text": "in bitcoin. So that's a problem, right? So let's see, is\nthat the next thing? The next thing was\nyou have to issue--",
    "start": "1366860",
    "end": "1373399"
  },
  {
    "text": "you can only issue a statement\nevery 10 minutes, right? So if you want to issue\nstatements really fast. you can't do that.",
    "start": "1373400",
    "end": "1379250"
  },
  {
    "text": "All right, like Alin said you\nhave to pay bitcoin transaction fees.",
    "start": "1379250",
    "end": "1384900"
  },
  {
    "text": "And the other problem is\nthat you don't get freshness in the sense that it's kind\nof easy for this lock server",
    "start": "1384900",
    "end": "1391500"
  },
  {
    "text": "to hide from you the\nlatest statement. You know, unless you have\na lot of these log servers and you ask many of them, hey,\nwhat's the latest statement?",
    "start": "1391500",
    "end": "1398100"
  },
  {
    "text": "And they show you back\nthe latest statement. If there is just one log\nserver and it's compromised, it could always\npretend no, no, no.",
    "start": "1398100",
    "end": "1404538"
  },
  {
    "text": "This is the latest statement. And if you don't trust it,\nthe best recourse you have is to download the full block\nand look for the statement",
    "start": "1404538",
    "end": "1410250"
  },
  {
    "text": "yourself. So you don't get freshness. Those are some disadvantages. Now let's look at how\nclients audit this log?",
    "start": "1410250",
    "end": "1418020"
  },
  {
    "start": "1414000",
    "end": "1797000"
  },
  {
    "text": "So I was claiming that\nit's very efficient to get these statements\nand make sure that no equivocation happened.",
    "start": "1418020",
    "end": "1424086"
  },
  {
    "text": "So let's say, you\nhave a Catena client and you're running on your\nphone with this client. And your goal is to get\nthat list of statements.",
    "start": "1424087",
    "end": "1430590"
  },
  {
    "text": "And there's the Catena log\nserver over there in the back. And there's the\nbitcoin peer to peer network which at the moment\nhas about 11,000 nodes.",
    "start": "1430590",
    "end": "1438105"
  },
  {
    "text": "And remember, I said\nthe first thing you need is the genesis transaction.",
    "start": "1438105",
    "end": "1443790"
  },
  {
    "text": "Does everybody\nsort of understand that if you get the wrong\nGenesis transaction, you're completely\nscrewed, right?",
    "start": "1443790",
    "end": "1449800"
  },
  {
    "text": "Because it's very\neasy to equivocate if you have the wrong\nGenesis transaction, right? I mean, you know there's the\nright GTX here where you have,",
    "start": "1449800",
    "end": "1458720"
  },
  {
    "text": "let's say, a s1. And then you have s2 in their\nown transactions, right? But if there's another GTX prime\nhere and you're using that one,",
    "start": "1458720",
    "end": "1466810"
  },
  {
    "text": "you're going to get s1 prime,\ns2 prime, different statements. So if Alice uses GTX\nbut Bob uses GTX prime,",
    "start": "1466810",
    "end": "1475610"
  },
  {
    "text": "Alice and Bob are\nback to square one. So in some sense, you might ask,\nOK, so then what's the point?",
    "start": "1475610",
    "end": "1480820"
  },
  {
    "text": "What have you solved here? I still need to get\nthis GTX, right? So what we claim is that this is\na step forward because you only",
    "start": "1480820",
    "end": "1486820"
  },
  {
    "text": "have to do this once. Once you've got\nthis GTX, you can be sure you're never\nequivocated to, right?",
    "start": "1486820",
    "end": "1492010"
  },
  {
    "text": "Whereas in the\npast, you would have to for each\nindividual statement, you'd have to do\nadditional checks",
    "start": "1492010",
    "end": "1497559"
  },
  {
    "text": "to make sure you're\nnot being equivocated to, like you would have to\nask in a full node, let's say. Right, so as long as you have\nthe right GTX, you're good.",
    "start": "1497560",
    "end": "1505035"
  },
  {
    "text": "And how do you\nget the right GTX? Well, usually you ship it with\nthe software on your phone. And there's some\nproblems there as well,",
    "start": "1505035",
    "end": "1511070"
  },
  {
    "text": "like there is no problem\nsolved in computer science in some sense. But you know, we're trying\nto make progress here.",
    "start": "1511070",
    "end": "1518470"
  },
  {
    "text": "OK, so let's say you have\nthe right GTX because it got shipped with your software. Now the next thing you want to\ndo is get the block headers.",
    "start": "1518470",
    "end": "1524860"
  },
  {
    "text": "So you have header\ni, but there are some new headers being posted. Let's say the bitcoin peer to\npeer network sends them to you.",
    "start": "1524860",
    "end": "1530980"
  },
  {
    "text": "You have these headers. You verify the proof\nof work, right? So this only costs you 80\nbytes per header, right? Does everyone see that\nthis is very cheap?",
    "start": "1530980",
    "end": "1538330"
  },
  {
    "text": "So far, so far I have the GTX,\nwhich is let's say 235 bytes. And now I'm downloading\nsome headers.",
    "start": "1538330",
    "end": "1544650"
  },
  {
    "text": "And now I'm ready to ask\nthe log server what's the first statement\nin the log, right? And what the log\nserver will do is",
    "start": "1544650",
    "end": "1550120"
  },
  {
    "text": "he's going to reply\nwith the transaction with the statement, which is\n600 bytes and the Merkle proof.",
    "start": "1550120",
    "end": "1555370"
  },
  {
    "text": "So all of this is\n600 bytes, actually. Right, and now what the\nCatena client will do",
    "start": "1555370",
    "end": "1561280"
  },
  {
    "text": "is he'll check the\nMerkle proof against one of the headers so to see in\nwhich headers does it fit.",
    "start": "1561280",
    "end": "1566740"
  },
  {
    "text": "And then he'll also\ncheck that the input here has a valid signature from the\npublic key in the output here.",
    "start": "1566740",
    "end": "1572950"
  },
  {
    "text": " All right, I want at least\none question about this.",
    "start": "1572950",
    "end": "1578870"
  },
  {
    "text": "Yeah? AUDIENCE: Sorry I came in\nlate, but is the Catena client over there similar to the SPV?",
    "start": "1578870",
    "end": "1583940"
  },
  {
    "text": "ALIN TOMESCU: Yeah,\nso that exactly. It's an SPV client. Yeah, so the idea is\nthat we want SPV clients.",
    "start": "1583940",
    "end": "1589049"
  },
  {
    "text": "We don't want these\nmobile phone clients to download 150\ngigabytes of data.",
    "start": "1589050",
    "end": "1594500"
  },
  {
    "text": "We want them to download let's\nsay 40 megabytes worth of block headers, which they can discard\nvery quickly as they verify.",
    "start": "1594500",
    "end": "1601045"
  },
  {
    "text": "And then we want\nthem to download 600 bytes per\nstatement, but still be sure that they saw all of\nthe statements in sequence,",
    "start": "1601045",
    "end": "1607370"
  },
  {
    "text": "and that there was\nno equivocation.  Yeah? ",
    "start": "1607370",
    "end": "1613988"
  },
  {
    "text": "AUDIENCE: So in our\nprevious classes, we discussed, if you can have\na full node and an SPV node,",
    "start": "1613988",
    "end": "1619890"
  },
  {
    "text": "do these sort of vulnerabilities\nexist with the [INAUDIBLE] client? ALIN TOMESCU: So\nwhich vulnerabilities",
    "start": "1619890",
    "end": "1625583"
  },
  {
    "text": "that you did talk about? AUDIENCE: I forget. ALIN TOMESCU: Did\nyou talk about-- AUDIENCE: There was just a\nbox that was like less secure.",
    "start": "1625583",
    "end": "1631020"
  },
  {
    "text": "And then there was another box\nthat was something else bad. There was one about [INAUDIBLE].",
    "start": "1631020",
    "end": "1638210"
  },
  {
    "text": "The clients would\nlie to you about-- If you say, here's\nsome transactions",
    "start": "1638210",
    "end": "1644680"
  },
  {
    "text": "or here are some\nunspent outputs, then they could just tell\nyou something different. ALIN TOMESCU: Yes.",
    "start": "1644680",
    "end": "1650030"
  },
  {
    "text": "Yeah? Sorry. AUDIENCE: Well,\nthey can't tell you that transactions\nexist or don't exist. They can just not tell you--",
    "start": "1650030",
    "end": "1655693"
  },
  {
    "text": "ALIN TOMESCU: Yeah, they\ncan hide transactions from you, which gets back\nto the freshness issue that we could discussed.",
    "start": "1655693",
    "end": "1661120"
  },
  {
    "text": "They could also--\nthis block header could be an header\nfor an invalid block.",
    "start": "1661120",
    "end": "1666610"
  },
  {
    "text": "But remember, that before\nyou accept this tx1, you wait for enough\nproof of work,",
    "start": "1666610",
    "end": "1671860"
  },
  {
    "text": "you wait for more block\nheaders on top of this guy to sort of get some\nassurance that no, this was a valid block because a\nbunch of other miners built",
    "start": "1671860",
    "end": "1679270"
  },
  {
    "text": "on top of it. Right?  So as long as you're willing\nto trust that the miners do",
    "start": "1679270",
    "end": "1685370"
  },
  {
    "text": "the right thing, which\nthey have an incentive to do the right thing,\nyou should be good. But like you said,\nwhat's your name?",
    "start": "1685370",
    "end": "1692350"
  },
  {
    "text": "AUDIENCE: Anne. ALIN TOMESCU: Anne? Like Anne said, there are\nactually bigger problems with SPV clients. And if there is time,\nwe can talk about it.",
    "start": "1692350",
    "end": "1698840"
  },
  {
    "text": "But it's actually easier to\ntrick SPV clients to fork them. And there's something called a\ngeneralized vector 76 attack.",
    "start": "1698840",
    "end": "1706100"
  },
  {
    "text": "Have any of your guys\nheard about this? So it's like a pre-mining\nattack but it's a bit easier to pull off.",
    "start": "1706100",
    "end": "1712490"
  },
  {
    "text": "Actually, it's a lot easier\nto pull off on an SPV node than on a full node. And if there's time at the\nend, we can talk about it.",
    "start": "1712490",
    "end": "1717748"
  },
  {
    "text": "If there isn't, you\ncan read our paper, which is online on my website. And you can read about\nthese pre-mining attacks",
    "start": "1717748",
    "end": "1724160"
  },
  {
    "text": "that work easier for SPV nodes. But anyway, this can\nkeep going, right? You get block headers,\n80 bytes each.",
    "start": "1724160",
    "end": "1730710"
  },
  {
    "text": "You ask the log\nserver, hey what's the next statement in the log? You get a Merkle proof\nin a transaction.",
    "start": "1730710",
    "end": "1736140"
  },
  {
    "text": "And then you verify\nthe Merkle proof. You put this transaction\nin one of these blocks and you verify that it\nspends the previous one.",
    "start": "1736140",
    "end": "1743210"
  },
  {
    "text": "Right, and as a\nresult, you implicitly by doing this verification,\nby checking that hey, this is a transaction\nand a valid block.",
    "start": "1743210",
    "end": "1749400"
  },
  {
    "text": "This block has enough\nstuff built on top of it and this transaction\nspends this guy here, you implicitly\nprevent equivocation.",
    "start": "1749400",
    "end": "1756042"
  },
  {
    "text": "Right, then you don't have\nto download anything else. Right, you only have to\ndownload these Merkle proofs",
    "start": "1756042",
    "end": "1761210"
  },
  {
    "text": "and transactions in\nthese block headers. Whereas in previous work, you\ncould be missing these s1's,",
    "start": "1761210",
    "end": "1766240"
  },
  {
    "text": "these s2's, they\ncould be hidden away in some other branch\nof the Merkle tree. And you'd have to do\npeer to peer bloom",
    "start": "1766240",
    "end": "1772380"
  },
  {
    "text": "filtering on the full nodes. And those full nodes\ncould lie to you. ",
    "start": "1772380",
    "end": "1779023"
  },
  {
    "text": "Yeah, so the bandwidth\nis actually very small. So suppose we have\n500k block headers-- I think bitcoin has a\nbit more right now--",
    "start": "1779023",
    "end": "1785320"
  },
  {
    "text": "which are 80 bytes\neach and we have 10,000 statements in this\nlog, which are 600 bytes each. Then we only need now\nwith 46 megabytes, right?",
    "start": "1785320",
    "end": "1793057"
  },
  {
    "text": "What's the what's the\nother way of doing it? You have to download\nhundreds of gigabytes.",
    "start": "1793057",
    "end": "1799410"
  },
  {
    "start": "1797000",
    "end": "2242000"
  },
  {
    "text": "All right, so let's talk about\nscalability a little bit. So suppose the system\ngets deployed widely.",
    "start": "1799410",
    "end": "1804750"
  },
  {
    "text": "Let's say Whatsapp starts to\nuse the system to witness--",
    "start": "1804750",
    "end": "1809900"
  },
  {
    "text": "to publish their public\ndirectory in bitcoin, right? And everybody, a lot of\nyou here have Whatsapp.",
    "start": "1809900",
    "end": "1815100"
  },
  {
    "text": "And this is you guys. Let's say there are 200,000\npeople using Whatsapp. I think there's\nmore like a billion.",
    "start": "1815100",
    "end": "1820710"
  },
  {
    "text": "So what are they going to do? Remember that part of\nthe verification protocol is asking for\nthese block headers",
    "start": "1820710",
    "end": "1826169"
  },
  {
    "text": "from the peer to\npeer network, right? And in fact, if\nyou're SPV clients, you usually open up around\neight connections to the peer",
    "start": "1826170",
    "end": "1832770"
  },
  {
    "text": "to peer network. And if you're a full node in the\nbitcoin peer to peer network, you usually have around\n117 incoming connections.",
    "start": "1832770",
    "end": "1841910"
  },
  {
    "text": "That that's how\nmuch you support. You support 117 incoming\nconnections as a full node. So that means in total,\nyou support about a million",
    "start": "1841910",
    "end": "1848520"
  },
  {
    "text": "incoming connections. So you know, this guy\nsupports a million. But we need about 1.6\nmillion connections",
    "start": "1848520",
    "end": "1855840"
  },
  {
    "text": "from these 200,000\nclients, right? So it's a bit of\na problem if you deploy Catena and it\nbecomes wildly popular.",
    "start": "1855840",
    "end": "1864019"
  },
  {
    "text": "Being a bit optimistic\nhere, but you know, let's say that happened, right? So how can we fix this?",
    "start": "1864020",
    "end": "1869799"
  },
  {
    "text": "How can we avoid this problem\nbecause in this case, what we would basically\nbe doing is we would be accidentally\nDDOSing bitcoin.",
    "start": "1869800",
    "end": "1876030"
  },
  {
    "text": "And we don't want to do that. Does everybody see that there's\na problem here, first of all? ",
    "start": "1876030",
    "end": "1883309"
  },
  {
    "text": "OK, so the idea is very simple. We just introduced something\ncalled a header relay network. And what that means is\nlook, you don't really",
    "start": "1883310",
    "end": "1889880"
  },
  {
    "text": "have to ask for these block\nheaders from the Bitcoin peer to peer network. You could just outsource\nthese block headers anywhere",
    "start": "1889880",
    "end": "1896210"
  },
  {
    "text": "because they're\npublicly verifiable. Right, the block headers\nhave proof of work on them. So you can use volunteer\nnodes that sort of push block",
    "start": "1896210",
    "end": "1906530"
  },
  {
    "text": "headers to whoever\nasks for them. You could use blockchain\nexplorers like blockchain.info,",
    "start": "1906530",
    "end": "1911570"
  },
  {
    "text": "right? You could use Facebook. You could just post block\nheaders on Facebook. Right, like in a Facebook feed.",
    "start": "1911570",
    "end": "1917987"
  },
  {
    "text": "You could use Twitter for that. You could use GitHub gists. You know, so you could-- there's a lot of ways\nto implement this.",
    "start": "1917988",
    "end": "1924559"
  },
  {
    "text": "The simplest way is\nhave servers and have them send these headers\nto whoever asks for them.",
    "start": "1924560",
    "end": "1931070"
  },
  {
    "text": "So it's easy to\nscale in that sense because if you now\nask these header relay network for the\nblock headers, you",
    "start": "1931070",
    "end": "1937577"
  },
  {
    "text": "know, it's much easier to scale\nthis than to scale the bitcoin peer to peer network, which\nhas to do a bit more than just",
    "start": "1937577",
    "end": "1943190"
  },
  {
    "text": "block headers. They have to verify blocks. They have to verify signatures.",
    "start": "1943190",
    "end": "1948330"
  },
  {
    "text": "Yeah? AUDIENCE: Did you\nconsider having the clients being peer to peer? ALIN TOMESCU: ,\nYes so another way. And I think we'll talk\nabout that in the paper--",
    "start": "1948330",
    "end": "1956509"
  },
  {
    "text": "is you can implement the header\nrelay network as a peer to peer network on top of the clients.",
    "start": "1956510",
    "end": "1961620"
  },
  {
    "text": "Yeah, so that's\nanother way to do it. There's some subtleties there\nthat you have to get right.",
    "start": "1961620",
    "end": "1968350"
  },
  {
    "text": "But you can do it, I think. Yeah? AUDIENCE: Would you you expect\nthat if a company like Whatsapp decided adopt Catena, they\nwould run their own servers",
    "start": "1968350",
    "end": "1975669"
  },
  {
    "text": "to make sure that there\nwas the capacity for it? ALIN TOMESCU: For the\nheader relay network? AUDIENCE: Yes.",
    "start": "1975670",
    "end": "1980830"
  },
  {
    "text": "ALIN TOMESCU: I mean, I\nwould be just be speculating, wishful thinking. They could.",
    "start": "1980830",
    "end": "1987730"
  },
  {
    "text": "There is some problem with this\nheader relay network as well. And we talk about\nit in the paper because this had a really\nnetwork could withhold",
    "start": "1987730",
    "end": "1993960"
  },
  {
    "text": "block headers from you. So you do have to distribute it. Like usually you don't\nwant to just trust Whatsapp who's also doing\nthe statements, who's",
    "start": "1993960",
    "end": "2001049"
  },
  {
    "text": "also pushing the statements\nin the blockchain. You don't want to trust\nthem to also give you the block headers.",
    "start": "2001050",
    "end": "2006210"
  },
  {
    "text": "You actually want to fetch\nthem from a different source that Whatsapp\ndoesn't collude with. Yeah, Anne, you had a question?",
    "start": "2006210",
    "end": "2012722"
  },
  {
    "text": "AUDIENCE: Are there other\nheader relay networks that are deployed already? ALIN TOMESCU: Yeah, there\nwas actually one on ethereum.",
    "start": "2012722",
    "end": "2018940"
  },
  {
    "text": "There's a smart\ncontract in ethereum, I think, that if you submit\nbitcoin block headers to it, you get something back.",
    "start": "2018940",
    "end": "2024900"
  },
  {
    "text": "And then you can just\nquery bitcoin block headers from the ethereum blockchain. Is anyone familiar with this?",
    "start": "2024900",
    "end": "2030690"
  },
  {
    "text": "So I guess I didn't\ninclude it here. But another way to do it is\nto just publish the header is in an ethereum\nsmart contract.",
    "start": "2030690",
    "end": "2036230"
  },
  {
    "text": "Yeah. So there's crazy ways\nyou could do this too. Yeah? AUDIENCE: Will that\none go out of gas?",
    "start": "2036230",
    "end": "2042910"
  },
  {
    "text": "I don't know, my understanding\nof ethereum is pretty decent, but would that smart contract\neventually run out of gas",
    "start": "2042910",
    "end": "2048580"
  },
  {
    "text": "and not publish anymore? ALIN TOMESCU: So to fetch from\nit, you don't need to pay gas.",
    "start": "2048580",
    "end": "2054590"
  },
  {
    "text": "But I suspect to push\nin it, I actually don't know who\nfunds that contract.",
    "start": "2054590",
    "end": "2060449"
  },
  {
    "text": "So I guess you fund that\nwhen you push maybe. Maybe not because then you\nalso want something back.",
    "start": "2060449",
    "end": "2065489"
  },
  {
    "text": "Why would you push? I'm not sure. But we can look at it after.",
    "start": "2065489",
    "end": "2070790"
  },
  {
    "text": "Yeah. It's a good question. So anyway, even if this header\nrelay network is compromised,",
    "start": "2070790",
    "end": "2077550"
  },
  {
    "text": "if you implement it\nin the right way, you've distributed on a\nsufficient number of parties,",
    "start": "2077550",
    "end": "2082770"
  },
  {
    "text": "you can still get all of the\nproperties that you need to, meaning freshness for\nthe block headers. That's really the only\nproperty that you need to.",
    "start": "2082770",
    "end": "2089540"
  },
  {
    "text": "The header relay\nnetwork should always reply with the\nlatest block headers. So let's look at costs since\nAlin was mentioning the costs.",
    "start": "2089540",
    "end": "2097609"
  },
  {
    "text": "So to open a statement, you have\nto issue a transaction, right? And the size of our transactions\nare around 235 bytes.",
    "start": "2097610",
    "end": "2106230"
  },
  {
    "text": "So and the fee as of December\n13 was $16.24 for transactions",
    "start": "2106230",
    "end": "2111840"
  },
  {
    "text": "if you guys remember\nthose great bitcoin times. I think it went up to\n$40 at some point too.",
    "start": "2111840",
    "end": "2117690"
  },
  {
    "text": "So it was it was really hard\nfor me to talk to people about this research back then. But guess what,\nthe fees are today?",
    "start": "2117690",
    "end": "2123278"
  },
  {
    "text": " So today, this\nmorning I checked. And there were $0.78, right?",
    "start": "2123278",
    "end": "2130650"
  },
  {
    "text": "When we wrote the paper,\nthey were like $0.12. So you know, here I\nam standing in front",
    "start": "2130650",
    "end": "2136619"
  },
  {
    "text": "of you pitching our work. In two minutes they could be\nback to $100, but who knows?",
    "start": "2136620",
    "end": "2141840"
  },
  {
    "text": "Yes, you had a question. AUDIENCE: Maybe I'm wrong,\nbut in a transaction, you can have some outputs. Can you have several\nstatements in there?",
    "start": "2141840",
    "end": "2149273"
  },
  {
    "text": "ALIN TOMESCU: So\nthat's a good question. So can you batch statements? And then the answer is yes. You can definitely\nbatch statements.",
    "start": "2149273",
    "end": "2155760"
  },
  {
    "text": "What we've said so far\nis in a transaction-- in a Catena transaction,\nyou have this output.",
    "start": "2155760",
    "end": "2162390"
  },
  {
    "text": "And you have this\nop return output where you put the\nstatement, right? And you know, it spends\na previous transaction.",
    "start": "2162390",
    "end": "2170580"
  },
  {
    "text": "But as a matter of fact, what\nyou can do and some of you",
    "start": "2170580",
    "end": "2176670"
  },
  {
    "text": "may already notice this. There is no reason to put\njust one statement in here.",
    "start": "2176670",
    "end": "2182490"
  },
  {
    "text": "There is some reason--\nso the only reason is that it only fits 80 bytes. So you could put easily, let's\nsay, two or three statements",
    "start": "2182490",
    "end": "2189869"
  },
  {
    "text": "in there if you hashed them\nwith the right hash function. But a better way to do\nit is why didn't you put here a Merkle root hash?",
    "start": "2189870",
    "end": "2196620"
  },
  {
    "text": "And then you can have\nas many statements as you want in the leafs\nof that Merkle tree, right?",
    "start": "2196620",
    "end": "2203630"
  },
  {
    "text": "In fact, here you could\nhave I don't know, billions of statements.",
    "start": "2203630",
    "end": "2209599"
  },
  {
    "text": "So keep in mind,\nyou will only be able to issue billions of\nstatements every 10 minutes.",
    "start": "2209600",
    "end": "2215380"
  },
  {
    "text": "But you can definitely\nhave billions of statements in a\nsingle transaction if you just batch them. So now, remember the blockchain\nwill only store the root hash.",
    "start": "2215380",
    "end": "2223750"
  },
  {
    "text": "This Merkle tree will be stored\nby the log server perhaps or by a different party.",
    "start": "2223750",
    "end": "2228880"
  },
  {
    "text": "They don't have to\nbe the same party. Does that make sense? Does that answer your question?",
    "start": "2228880",
    "end": "2234369"
  },
  {
    "text": "Yeah.  Right, that was my next point.",
    "start": "2234370",
    "end": "2240099"
  },
  {
    "text": "Statements can be batched\nwith Merkle trees. OK, so let's talk about\nthe why since so far we've been talking abstractly\nabout these statements.",
    "start": "2240100",
    "end": "2247150"
  },
  {
    "start": "2242000",
    "end": "2550000"
  },
  {
    "text": "But what could these\nstatements actually be. So let's look at a\nsecure software update. So how do you do\nsecure software update?",
    "start": "2247150",
    "end": "2254140"
  },
  {
    "text": "An example attack on a\nsoftware update scheme is that somebody compromises\nthe bitcoin.org domain.",
    "start": "2254140",
    "end": "2261330"
  },
  {
    "text": "And they change the bitcoin\nbinary to a malicious binary. And they wait for people to\ninstall that malicious binary.",
    "start": "2261330",
    "end": "2267417"
  },
  {
    "text": "And then they steal their coins. They steal their data. They could execute\narbitrary code. And an example of this was\nsort of this binary safety",
    "start": "2267417",
    "end": "2274230"
  },
  {
    "text": "warning on the bitcoin website. At some point, they\nwere very concerned that a state actor is going\nto mess with the DNS servers",
    "start": "2274230",
    "end": "2281130"
  },
  {
    "text": "and redirect clients\nto a different server and make them download\na bad bitcoin binary.",
    "start": "2281130",
    "end": "2287290"
  },
  {
    "text": "So does the attack make sense? Does everybody see\nwhy this is possible? You do need to sort of accept\nthat the DNS service that we",
    "start": "2287290",
    "end": "2295589"
  },
  {
    "text": "currently have on the internet\nis fundamentally flawed. It's not built for security.",
    "start": "2295590",
    "end": "2301630"
  },
  {
    "text": "So the typical defense the\ntypical defense for this is that the Bitcoin developers--\nthey sign the bitcoin",
    "start": "2301630",
    "end": "2306960"
  },
  {
    "text": "binaries with some secret key. And they protect\nthat secret key. And then there's a\npublic key associated",
    "start": "2306960",
    "end": "2314455"
  },
  {
    "text": "with the secret key that's\nposted on the bitcoin website, right? And maybe some of you'll\nnotice that sometimes it's",
    "start": "2314455",
    "end": "2319795"
  },
  {
    "text": "also very easy to change the\npublic key on the website, you know, if you\ncan just redirect the victim to another website.",
    "start": "2319795",
    "end": "2325290"
  },
  {
    "text": "And another problem is that not\neveryone checks the signature. Even if let's say you have the\npublic key on your computer,",
    "start": "2325290",
    "end": "2330448"
  },
  {
    "text": "you know what the\nright public key is, only if you're\nlike an expert user and you know how to use GPG,\nyou will check that signature,",
    "start": "2330448",
    "end": "2337380"
  },
  {
    "text": "right? And the other problem\nthat's probably I think a much, much\nbigger problem is that for the bitcoin\ndevs themselves,",
    "start": "2337380",
    "end": "2343770"
  },
  {
    "text": "it's very hard to detect if\nsomeone stole their secret key. Like if I'm a state actor\nand I break your computer",
    "start": "2343770",
    "end": "2349500"
  },
  {
    "text": "and I steal your secret key, I\nwill sign this bitcoin binary. And I'll give it to\nlet's say, one guy. I'll give it to you.",
    "start": "2349500",
    "end": "2355282"
  },
  {
    "text": "You know, and I'll just\ntarget you individually because I'm really-- I know you have\na lot of bitcoin. Right, and then the bitcoin devs\nwill never find out about it",
    "start": "2355282",
    "end": "2363047"
  },
  {
    "text": "unless you know you kind\nof realize what happened. Then you take your\nbitcoin binary and you go with it\nto the bitcoin devs.",
    "start": "2363047",
    "end": "2368310"
  },
  {
    "text": "And they check the signature\non it and they say, oh wow. This is a valid signature\nand we never signed it. So somebody must have\nstolen our secret key.",
    "start": "2368310",
    "end": "2376440"
  },
  {
    "text": "So this is really a bad-- kind of the core\nof the problem is that it's hard for\nwhoever publishes software",
    "start": "2376440",
    "end": "2383322"
  },
  {
    "text": "to detect that\ntheir secret key has been stolen-- to detect\nmalicious signatures on their binaries. Does that make sense?",
    "start": "2383322",
    "end": "2389530"
  },
  {
    "text": "So the solution, of course,\nis you know, publish the signatures of bitcoin\nbinaries in a Catena log",
    "start": "2389530",
    "end": "2395460"
  },
  {
    "text": "So now if there's a malicious\nbinary being published by a state actor, people\nwon't accept that binary",
    "start": "2395460",
    "end": "2400770"
  },
  {
    "text": "unless it's in the\nCatena log, which means people in the bitcoin\ndevs will see the same binary.",
    "start": "2400770",
    "end": "2407050"
  },
  {
    "text": "Right, so let me let me show\nyou what I mean with a picture. So we have this Catena\nlog for Bitcoin binaries.",
    "start": "2407050",
    "end": "2413610"
  },
  {
    "text": "And let's say, the\nfirst transaction has a hash of the bitcoin\n0.001 tar file, right,",
    "start": "2413610",
    "end": "2421260"
  },
  {
    "text": "the bitcoin binaries. And this hash here\nis implicitly signed",
    "start": "2421260",
    "end": "2427230"
  },
  {
    "text": "by the signature in\nthis input because it signs the whole transaction.",
    "start": "2427230",
    "end": "2432510"
  },
  {
    "text": "So now if I put this\nhash in a Catena log, I get a signature\non it for free.",
    "start": "2432510",
    "end": "2438240"
  },
  {
    "text": "And now, if let's say, a state\nactor compromises the log server, gets the\nsecret key, he can",
    "start": "2438240",
    "end": "2444720"
  },
  {
    "text": "publish this second malicious\nbinary in the log, right? But what that malicious\nstate actor will want to do,",
    "start": "2444720",
    "end": "2451090"
  },
  {
    "text": "he will want to hide this\nfrom the Bitcoin devs and show it to all of you guys. All right, so he'll\nwant to equivocate.",
    "start": "2451090",
    "end": "2457197"
  },
  {
    "text": "So as a result, he will want to\ncreate a different transaction with the right\nbitcoin binary there,",
    "start": "2457197",
    "end": "2462420"
  },
  {
    "text": "show this to the bitcoin devs\nwhile showing this to you guys. All right, so the bitcoin\ndevs would think they're good.",
    "start": "2462420",
    "end": "2468240"
  },
  {
    "text": "This is the binary they wanted\nto publish while you guys would be using this malicious binary\npublished by the state actor.",
    "start": "2468240",
    "end": "2477535"
  },
  {
    "text": "Of course this cannot happen\nbecause in Catena you cannot equivocate. Right?",
    "start": "2477535",
    "end": "2484190"
  },
  {
    "text": "Does everybody see this? Right, any questions about this? There has to be a\nquestion on this.",
    "start": "2484190",
    "end": "2490290"
  },
  {
    "start": "2490290",
    "end": "2497122"
  },
  {
    "text": "No? So this mechanism is called\nsoftware transparency.",
    "start": "2497122",
    "end": "2502240"
  },
  {
    "text": "It's this idea that rather\nthan just downloading software like a crazy person from the\ninternet and installing it,",
    "start": "2502240",
    "end": "2510040"
  },
  {
    "text": "we should just be\npublishing these binaries in a log that everybody can see,\nincluding the software vendors that created those binaries.",
    "start": "2510040",
    "end": "2516770"
  },
  {
    "text": "So in this way, if somebody\ncompromises a software vendor, that vendor can\nnotice that in the log there's a new version\nfor their software",
    "start": "2516770",
    "end": "2523197"
  },
  {
    "text": "that they didn't publish. So you know, this isn't to say\nthat it'll prevent attacks. You know, what a state\nactor can do anyway",
    "start": "2523197",
    "end": "2530890"
  },
  {
    "text": "is they can just do this. They can post this\nH2 prime in here, show it to you guys\nincluding the bitcoin devs",
    "start": "2530890",
    "end": "2536770"
  },
  {
    "text": "and still screw everyone over. But at least these attacks\nthen go undetected anymore.",
    "start": "2536770",
    "end": "2541890"
  },
  {
    "text": "All right, so it's a step\nforward in that sense.",
    "start": "2541890",
    "end": "2547325"
  },
  {
    "text": "Yes, so the idea\nis that you have to double spend to equivocate. And the other\nexample that really--",
    "start": "2547325",
    "end": "2554760"
  },
  {
    "start": "2550000",
    "end": "3059000"
  },
  {
    "text": "the reason I wanted\nto start this research had to do with public\nkey distribution. So let's say we have\nAlice and we have Bob.",
    "start": "2554760",
    "end": "2560550"
  },
  {
    "text": "And they both have\ntheir public keys. And I'm using this\nletter b to denote Bob and his public\nkey and the letter",
    "start": "2560550",
    "end": "2566190"
  },
  {
    "text": "a to denote Alice\nand her public key. And they have their\ncorresponding secret keys, right? And Alice and Bob, they want\nto chat securely, right?",
    "start": "2566190",
    "end": "2573318"
  },
  {
    "text": "So they want to set\nup a secure channel.",
    "start": "2573318",
    "end": "2578580"
  },
  {
    "text": "And there's this directory\nwhich stores their public keys. So this guy stores\nAlice, pk Alice. This guy stores Bob, pk Bob.",
    "start": "2578580",
    "end": "2585300"
  },
  {
    "text": "All right, and the directory\ngets updated over time, maybe Karl, Ellen\nand Dan registered.",
    "start": "2585300",
    "end": "2593670"
  },
  {
    "text": "And if you have\nnon-equivocation, if the attacker wants to\nimpersonate Alice and Bob,",
    "start": "2593670",
    "end": "2599940"
  },
  {
    "text": "he kind of has to put\ntheir public keys, the fake public keys\nin the same directory, which means that when\nAlice and Bob monitor--",
    "start": "2599940",
    "end": "2607800"
  },
  {
    "text": "they check their\nown public keys, they both notice they've\nbeen impersonated, right?",
    "start": "2607800",
    "end": "2614030"
  },
  {
    "text": "So again, the idea is\nthat you can detect. Now how can this\nattacker still trick",
    "start": "2614030",
    "end": "2621030"
  },
  {
    "text": "Alice to send an\nencrypted message to Bob with Bob's fake public key? Is there a way even if\nyou have non-equivocation?",
    "start": "2621030",
    "end": "2628057"
  },
  {
    "text": " So what's the attack? Even I have\nnon-equivocation and I",
    "start": "2628057",
    "end": "2633775"
  },
  {
    "text": "claim that the\nattacker can still get Alice to send a fake,\nan encrypted message to Bob",
    "start": "2633775",
    "end": "2639710"
  },
  {
    "text": "that the attacker can decrypt. What should the attacker do? So pretend that we are\nhere without the ability",
    "start": "2639710",
    "end": "2647750"
  },
  {
    "text": "to equivocate.  So the attacker\ncannot equivocate.",
    "start": "2647750",
    "end": "2652869"
  },
  {
    "text": "But I claimed that\nthe attacker can still trick Alice into\nsending a message to Bob that the attacker can read.",
    "start": "2652870",
    "end": "2659790"
  },
  {
    "text": "So now it's time to see if\nyou guys paid attention. ",
    "start": "2659790",
    "end": "2668010"
  },
  {
    "text": "Somebody? Alin? Oh, you? AUDIENCE: Does the attacker\nhave to have the secret key?",
    "start": "2668010",
    "end": "2674430"
  },
  {
    "text": "ALIN TOMESCU: No, no. He does not. Yeah. He does not have to\nhave the secret key. ",
    "start": "2674430",
    "end": "2681840"
  },
  {
    "text": "The attacker just\ncreates fake public keys. Here's a hint. ",
    "start": "2681840",
    "end": "2688290"
  },
  {
    "text": "AUDIENCE: If you only\nchanged one person to choose, they don't know that it's a\nfake key so they could send it",
    "start": "2688290",
    "end": "2693965"
  },
  {
    "text": "to a fake key for a bit? ALIN TOMESCU: Yeah, so\nwhose person should they attack or change the key for?",
    "start": "2693965",
    "end": "2699250"
  },
  {
    "text": "AUDIENCE: Like if they\nchange Bob's, Alice will still think\nBob's is correct so she'll send it to the\nfake Bob until Bob checks it.",
    "start": "2699250",
    "end": "2704873"
  },
  {
    "text": "ALIN TOMESCU: Exactly. So that's exactly right. So what's your name? AUDIENCE: Lucas. ALIN TOMESCU: Lucas.",
    "start": "2704873",
    "end": "2709983"
  },
  {
    "text": "So what Lucas is saying is\nlook, even without equivocation,",
    "start": "2709983",
    "end": "2715809"
  },
  {
    "text": "I had this directory at T1. I had another one at T2. But at T3 and both of these had\nkeys for Alice and Bob, right?",
    "start": "2715810",
    "end": "2725589"
  },
  {
    "text": "But at T3, Lucas is saying look,\njust put the fake key for Bob here.",
    "start": "2725590",
    "end": "2730690"
  },
  {
    "text": "And that's it. Don't put a fake key for\nAlice there, just for Bob. And now when Alice looks up\nthis public key for Bob here,",
    "start": "2730690",
    "end": "2741335"
  },
  {
    "text": "she sends a query to\nthe directory hey, what's Bob's public key? She gets back b prime,\nwhich is equal to Bob pk",
    "start": "2741335",
    "end": "2750280"
  },
  {
    "text": "Bob prime, right? Alice can't tell if that's\nreally Bob's fake public key.",
    "start": "2750280",
    "end": "2757168"
  },
  {
    "text": "That's the reason she's\nusing the directory in the first place. She wants sort of a trustworthy\nplace to get it from.",
    "start": "2757168",
    "end": "2762920"
  },
  {
    "text": "Bob can tell if Bob looks. But by the time Bob looks,\nit might be too late. Alice might have already\nencrypted a message, right?",
    "start": "2762920",
    "end": "2768880"
  },
  {
    "text": "So again, what's the point\nof doing all of this? It's not like you're\npreventing attacks, right?",
    "start": "2768880",
    "end": "2774102"
  },
  {
    "text": "And the point of\ndoing all of this is that you get transparency. Bob can detect, whereas\nright now Bob has no hope.",
    "start": "2774103",
    "end": "2779810"
  },
  {
    "text": "In fact, so you said, a\nlot of you use Whatsapp. So you know in\nWhatsapp, if you really want to be sure, so I\nhave a conversation here",
    "start": "2779810",
    "end": "2786710"
  },
  {
    "text": "with Alin Dragos. So, Alin, do you what to\nto bring your phone here? Do you have Whatsapp?",
    "start": "2786710",
    "end": "2792950"
  },
  {
    "text": "So if you really want\nto be sure that you're talking to the real Alin\nand not some other guy, you have to go on\nthis encryption tab.",
    "start": "2792950",
    "end": "2799280"
  },
  {
    "text": "Can you tape this? So my phone is black and white. It's going through\na depression phase.",
    "start": "2799280",
    "end": "2805760"
  },
  {
    "text": "I apologize. So you have to go here and\nthere's a code here, right? And Alin, can you\ndo the same thing?",
    "start": "2805760",
    "end": "2811640"
  },
  {
    "text": "You know what I'm talking about?  I really hope I don't get some\nweird text message right now",
    "start": "2811640",
    "end": "2819490"
  },
  {
    "text": "with the camera on the phone. OK, so now with Alin's\nphone, is that the same code?",
    "start": "2819490",
    "end": "2825095"
  },
  {
    "text": "Can somebody tell me? I can't see it. AUDIENCE: It's hard to see. ALIN TOMESCU: OK, so\nwe have 27836 and yeah.",
    "start": "2825095",
    "end": "2832333"
  },
  {
    "text": "So it's the same code. Can you see it on the camera? So now because we have\nthe same code here. With this code\nhere, it really is",
    "start": "2832333",
    "end": "2838290"
  },
  {
    "text": "a hash of my public key\nand Alin's public key. And if we've got the same hash\nof both of our public keys, then we know we're\ntalking to one another.",
    "start": "2838290",
    "end": "2844840"
  },
  {
    "text": "But we won't really know that's\nthe case until we actually meet in person and do\nthis exchange, right? So what this system\ndoes instead is",
    "start": "2844840",
    "end": "2851880"
  },
  {
    "text": "it allows Alin to check\nhis own public key and it allows me to\ncheck my own public key. This way if we check\nour own public key,",
    "start": "2851880",
    "end": "2858078"
  },
  {
    "text": "we'll always know when we're\nimpersonated even though I might send an encrypted\nmessage to the wrong Alin,",
    "start": "2858078",
    "end": "2863130"
  },
  {
    "text": "Alin will eventually find out. It's a bit confusing because\nwe're both called Alin. ",
    "start": "2863130",
    "end": "2870505"
  },
  {
    "text": "So does that sort\nof makes sense? Yeah? AUDIENCE: So what do\nyou do when you realize that your key is the wrong key?",
    "start": "2870505",
    "end": "2875943"
  },
  {
    "text": "ALIN TOMESCU: Good question. So that's really the\ncrucial question. What the hell can you do? Right, so this directory\nimpersonated you.",
    "start": "2875943",
    "end": "2881490"
  },
  {
    "text": "In fact, you can't even-- here's the problem. If you're Bob here and you\nsee this fake public key.",
    "start": "2881490",
    "end": "2887713"
  },
  {
    "text": "And you go to the New\nYork Times and you say hey, New York Times,\nthis Whatsapp directory started impersonating me.",
    "start": "2887713",
    "end": "2893820"
  },
  {
    "text": "And the New York Times\ncan go to the directory and say, hey directory, why\ndid you impersonate Bob? And the directory can say,\nno, I did not impersonate Bob.",
    "start": "2893820",
    "end": "2900462"
  },
  {
    "text": "Bob really just ask\nfor a new public key. And this was the public\nkey that Bob gave me. And it's just a he said, they\nsaid, kind of a thing, right?",
    "start": "2900462",
    "end": "2908133"
  },
  {
    "text": "So it's really a sort\nof an open research area to figure out what's the right\nway to whistle blow here. So for example, one project\nthat we're trying to work on",
    "start": "2908133",
    "end": "2915570"
  },
  {
    "text": "is there a way to track\nthe directory somehow so that when he does\nstuff like this,",
    "start": "2915570",
    "end": "2920640"
  },
  {
    "text": "you get a publicly verifiable\ncryptographic proof that he really misbehaved, right?",
    "start": "2920640",
    "end": "2925910"
  },
  {
    "text": "No, there's no\ncryptographic proof. The fact that that\npublic key is there could have come from\nthe malicious directory or could have come\nfrom an honest Bob who",
    "start": "2925910",
    "end": "2932430"
  },
  {
    "text": "just changed his public key. So yeah. So again, a step forward\nbut we're not there.",
    "start": "2932430",
    "end": "2937440"
  },
  {
    "text": "You know, it's just that there's\nmuch more work to do here. And I think you\nalso had a question.",
    "start": "2937440",
    "end": "2942752"
  },
  {
    "text": "AUDIENCE: Can't Alice just\nask Bob if this is you? ALIN TOMESCU: So that's a\nchicken and an egg, right?",
    "start": "2942752",
    "end": "2948930"
  },
  {
    "text": "So we have Alice. We have Bob. And we have the attacker. Alice asks Bob, is\nthis your public key?",
    "start": "2948930",
    "end": "2957509"
  },
  {
    "text": "You know, let's say, b prime. Let me make this more readable.",
    "start": "2957510",
    "end": "2962580"
  },
  {
    "text": "So attacker, right? So Alice asks, hey Bob. Is this b prime your public key?",
    "start": "2962580",
    "end": "2968490"
  },
  {
    "text": "The attacker changes it. Hey Bob, is b your public key? The attacker-- Bob says yes.",
    "start": "2968490",
    "end": "2975460"
  },
  {
    "text": "Attacker forwards\nyes to Alice, right? Remember, Bob and Alice\ndon't have a secure channel. That's the problem we're trying\nto solve with this directory,",
    "start": "2975460",
    "end": "2982900"
  },
  {
    "text": "right? So the attacker can always\nman in the middle people. Well, people like Alice and Bob.",
    "start": "2982900",
    "end": "2989030"
  },
  {
    "text": "If the attacker can man\nin the middle everything, then there's really no hope. And we're living in a very sad,\nsad world if that's the case.",
    "start": "2989030",
    "end": "2996330"
  },
  {
    "text": "Yeah, it actually might\nbe the case but we'll see. Anyway, so yeah, so I claim here\nthat this is a step forward.",
    "start": "2996330",
    "end": "3004470"
  },
  {
    "text": "But there's still\nmuch work to do. All right, so we\nget transparency. Bob can detect. He'll know. He won't be able to\nconvince anybody.",
    "start": "3004470",
    "end": "3010700"
  },
  {
    "text": "But if a lot of Bobs\nget compromised, you're still like in a\nplace where everybody knows that something's off and\nwill all stop using Whatsapp,",
    "start": "3010700",
    "end": "3018110"
  },
  {
    "text": "for example. Right? By the way, Whatsapp\nis a great tool. You should continue using it. I'm just saying it's\ndifficult to use right",
    "start": "3018110",
    "end": "3025050"
  },
  {
    "text": "like if somebody really\nwants to target it, they can play a lot of\ntricks to still trick you.",
    "start": "3025050",
    "end": "3031460"
  },
  {
    "text": "So yeah, so all right, we\nalready talked about this. And yeah, again if the director\ncan equivocate, then you know,",
    "start": "3031460",
    "end": "3037970"
  },
  {
    "text": "all bets are off because now\nBob will look in this directory, he'll think he's\nnot impersonated. Alice will look\nin this directory.",
    "start": "3037970",
    "end": "3044180"
  },
  {
    "text": "She'll think she's not\nimpersonated, right? So the reason we\nstarted this research is because I really want to--",
    "start": "3044180",
    "end": "3049700"
  },
  {
    "text": "my thesis is on building\nthese directories that are efficiently auditable and\nhave a hard time impersonating",
    "start": "3049700",
    "end": "3055370"
  },
  {
    "text": "people. So that's why we decided\nto look at how could you do this with Bitcoin. Yeah, so of course there's\none project called KeyChat",
    "start": "3055370",
    "end": "3062599"
  },
  {
    "start": "3059000",
    "end": "3073000"
  },
  {
    "text": "that we're working on with\nsome high school students. And we're using the key\nbased public key directory. And we're witnessing\nit in a Catena log",
    "start": "3062600",
    "end": "3069050"
  },
  {
    "text": "so that stuff like\nthat doesn't happen. OK, so now let's talk\nabout the blockchains.",
    "start": "3069050",
    "end": "3076700"
  },
  {
    "start": "3073000",
    "end": "3099000"
  },
  {
    "text": "In general, people\nnowadays like to say I need a blockchain for x, right? I need a blockchain for\nsupply chain management.",
    "start": "3076700",
    "end": "3082940"
  },
  {
    "text": "I mean a blockchain\nfor cats, for whatever. I've heard a lot\nof crazy stories. IOT, self-driving\ncars, blah, blah, blah.",
    "start": "3082940",
    "end": "3090430"
  },
  {
    "text": "And I think the right way\nto think about blockchain is to never ever say\nthat word unless you",
    "start": "3090430",
    "end": "3097310"
  },
  {
    "text": "use quotes, first of all. And second of all, to\nunderstand what Byzantine state machine replication is.",
    "start": "3097310",
    "end": "3103185"
  },
  {
    "start": "3099000",
    "end": "3599000"
  },
  {
    "text": "Right, and if you understand\nwhat Byzantine state machine replication is or a\nByzantine consensus, you understand blockchain.",
    "start": "3103185",
    "end": "3108770"
  },
  {
    "text": "And you understand all the hype. And then you can make some\nprogress in solving problems. In the sense that\nwhat is blockchain?",
    "start": "3108770",
    "end": "3114350"
  },
  {
    "text": "So what we're\ndoing here is we're doing a Byzantine\nconsensus algorithm. We're agreeing on a\nlog of operations.",
    "start": "3114350",
    "end": "3119520"
  },
  {
    "text": "Right, by the way, that's\nwhat Catena does too by piggybacking on bitcoin. It agrees on a lot on\na log of operations.",
    "start": "3119520",
    "end": "3127080"
  },
  {
    "text": "Right, but the other thing that\nSMR or Byzantine consensus does is that it also\nallows you to agree",
    "start": "3127080",
    "end": "3133339"
  },
  {
    "text": "on the execution of\nthe ops in that log. So in Catena, you don't\nagree on the execution,",
    "start": "3133340",
    "end": "3138530"
  },
  {
    "text": "you just agree on\nthe statements. But there is no execution of\nthose statements in the sense that you can't build\nanother bitcoin",
    "start": "3138530",
    "end": "3145550"
  },
  {
    "text": "on top of bitcoin in Catena\nbecause you can't prevent double spends of\ntransactions that",
    "start": "3145550",
    "end": "3153560"
  },
  {
    "text": "are Catena statements, right? Like the Catena statements,\nyou have to look in each one and tell if it's correct. So to detect a double spend in\na Catena backed cryptocurrency,",
    "start": "3153560",
    "end": "3161360"
  },
  {
    "text": "you would have to download\nall of the transactions and because you cannot execute\nit like the bitcoin miners do",
    "start": "3161360",
    "end": "3166850"
  },
  {
    "text": "and build this UTXO set. I'm not sure this is\nmaking a lot of sense. But let's put it another way.",
    "start": "3166850",
    "end": "3174060"
  },
  {
    "text": "In bitcoin, you have\nblock one and then you have block two, right? ",
    "start": "3174060",
    "end": "3181307"
  },
  {
    "text": "And there's a hash pointer and\nthere's a bunch of transactions here, right? And remember that what prevents\nme from double spending",
    "start": "3181307",
    "end": "3188570"
  },
  {
    "text": "something here-- I can have two\ntransactions in this block that double spend\nthe same one here.",
    "start": "3188570",
    "end": "3193670"
  },
  {
    "text": "What prevents me from doing\nthat is exactly this execution stage, right? Because in the execution stage,\nwhen I try to I execute this",
    "start": "3193670",
    "end": "3201109"
  },
  {
    "text": "first transaction and I\nmark this output as spent, when I execute the\nsecond transaction, I cannot spend that\noutput anymore, right?",
    "start": "3201110",
    "end": "3207660"
  },
  {
    "text": "In Catena, you can't do anything\nlike that with the statements. You just agree on\nthe statements. In Catena, you would\nput this transaction",
    "start": "3207660",
    "end": "3213170"
  },
  {
    "text": "in the log, this one and then\nthat one and someone would have to detect that the second\none is a bad one by actually downloading it.",
    "start": "3213170",
    "end": "3218700"
  },
  {
    "text": "That's kind of what\nI'm trying to say here. So in general,\nthe way should you should be thinking\nabout blockchain",
    "start": "3218700",
    "end": "3223808"
  },
  {
    "text": "is through the lens of\nByzantine consensus. And that'll get you\nahead of the curve in this overly\nhyped space, right,",
    "start": "3223808",
    "end": "3230100"
  },
  {
    "text": "because it's really just this. You're agreeing on\na log of operations. And then you're agreeing on the\nexecution of those operations according to some rules.",
    "start": "3230100",
    "end": "3236030"
  },
  {
    "text": "The rules in bitcoin\nare transaction cannot-- there cannot be two inputs\nspending the same output more",
    "start": "3236030",
    "end": "3242880"
  },
  {
    "text": "or less. There's other things too. What that gives you\nis it allows you to agree on a final state\nwhich in bitcoin are",
    "start": "3242880",
    "end": "3249510"
  },
  {
    "text": "the valid transactions. That's the final state right. In ethereum, for\nexample, the final state are the valid transactions,\nand the account",
    "start": "3249510",
    "end": "3256520"
  },
  {
    "text": "balances of everything,\nand the smart contract state for everything. And I guess you'll\nlearn about that later.",
    "start": "3256520",
    "end": "3263040"
  },
  {
    "text": "So you can build\narbitrarily complex things with Byzantine consensus\nor with blockchains.",
    "start": "3263040",
    "end": "3269020"
  },
  {
    "text": "And the high level bit, if you\nwant to look at it another way, is that you have a program p,\nright, which could be anything,",
    "start": "3269020",
    "end": "3275390"
  },
  {
    "text": "could be a cryptocurrency. And then, instead of\nrunning this program p on a single server s,\nwhat do you do is you",
    "start": "3275390",
    "end": "3281540"
  },
  {
    "text": "distribute it on a bunch of\nservers, s1, s2, s3, s4, right?",
    "start": "3281540",
    "end": "3287380"
  },
  {
    "text": "And now as a result, to\nmess with this program p, it's not enough to\ncompromise one server, you have to compromise\na bunch of them.",
    "start": "3287380",
    "end": "3293860"
  },
  {
    "text": "right? OK so, and some\nof you might also be familiar with this term\npermissioned blockchain.",
    "start": "3293860",
    "end": "3300230"
  },
  {
    "text": "So when you distribute this\nprogram o amongst n servers where n is equal let's\nsay, three f plus 1 and f",
    "start": "3300230",
    "end": "3307760"
  },
  {
    "text": "is equal to 1 in\nthis particular case. In a permission blockchain,\nthis n is fixed, right?",
    "start": "3307760",
    "end": "3313220"
  },
  {
    "text": "Once you've set n to\n4, it has to stay 4. These servers have\nto know one another. They need to know each\nother's public keys.",
    "start": "3313220",
    "end": "3319640"
  },
  {
    "text": "And only one of the servers,\nf is equal to 1, can fail. If more than one server\nfails, then all bets are off.",
    "start": "3319640",
    "end": "3326510"
  },
  {
    "text": "Your program can start\ndoing arbitrary things. In particular, if your\nprogram is bitcoin, it can start double spending.",
    "start": "3326510",
    "end": "3333170"
  },
  {
    "text": "I'm moving a little bit fast,\nso I'll take some questions up until this point before I go on.",
    "start": "3333170",
    "end": "3339326"
  },
  {
    "text": "Yes? AUDIENCE: In a\npermissioned blockchain, do they use proof of work? ALIN TOMESCU: No,\nyou don't have to.",
    "start": "3339326",
    "end": "3344770"
  },
  {
    "text": "And that's kind of\nwhat the hype is about. This stuff, there is like--",
    "start": "3344770",
    "end": "3349799"
  },
  {
    "text": "the first interesting\npaper on this was 1976 or something like that.",
    "start": "3349800",
    "end": "3355200"
  },
  {
    "text": "So this is 40-30,\n40-year-old research. We've known how to do\npermissioned consensus-- we",
    "start": "3355200",
    "end": "3360510"
  },
  {
    "text": "used to call it Byzantine\nconsensus for 30 or 40 years, right? So there's nothing new there.",
    "start": "3360510",
    "end": "3366030"
  },
  {
    "text": "It's just that it's very useful\nnowadays to say blockchain then to say consensus\nbecause then you get 10 more million from your\nventure capitalist folks.",
    "start": "3366030",
    "end": "3374243"
  },
  {
    "text": "AUDIENCE: But if you don't\nhave to do proof of work, do they ever do proof of work?",
    "start": "3374243",
    "end": "3379440"
  },
  {
    "text": "ALIN TOMESCU: It would\nbe such a bad idea technically to do prefer\nworking a permissioned consensus algorithm.",
    "start": "3379440",
    "end": "3384590"
  },
  {
    "text": "It just-- completely\nunnecessary, plus probably",
    "start": "3384590",
    "end": "3390510"
  },
  {
    "text": "insecure too. Yeah, so now the reason\nyou do proof of work",
    "start": "3390510",
    "end": "3396089"
  },
  {
    "text": "is because in a\npermissionless blockchain, this n is not fixed. n could go, let's say, n was 4.",
    "start": "3396090",
    "end": "3403080"
  },
  {
    "text": "It could go to 8. Then it could go to 3. Then it could go to 12.",
    "start": "3403080",
    "end": "3410750"
  },
  {
    "text": "In other words, people\nare joining and leaving as they please. And the reason you\nneed proof of work",
    "start": "3410750",
    "end": "3416580"
  },
  {
    "text": "in bitcoin, one way\nyou can look at it is that you're really turning\na permissioned consensus",
    "start": "3416580",
    "end": "3423090"
  },
  {
    "text": "algorithm into a\npermissionless one. And a consensus\nalgorithm is just voting.",
    "start": "3423090",
    "end": "3428100"
  },
  {
    "text": "These n folks are just voting. And you need 2f plus 1 votes\nto sort of move on, right?",
    "start": "3428100",
    "end": "3436170"
  },
  {
    "text": "And if this n changes over time,\nlike if the n becomes bigger, it's very easy to take over\na majority of the voters.",
    "start": "3436170",
    "end": "3443670"
  },
  {
    "text": "If I can just add fake voters\nto a permissioned consensus algorithm, I can just take\nover the consensus algorithm.",
    "start": "3443670",
    "end": "3449920"
  },
  {
    "text": "In other words, I can take\nover more than f nodes. Right, so the trick\nthere is you have",
    "start": "3449920",
    "end": "3455460"
  },
  {
    "text": "to prevent that from happening. And the only way to\nprevent that is to say, look if you're going to join\nand then make my n bigger,",
    "start": "3455460",
    "end": "3462450"
  },
  {
    "text": "you better do some work. So that it's not\neasy for you to join because if you're a bad guy\nand you want to join, you know,",
    "start": "3462450",
    "end": "3468540"
  },
  {
    "text": "you can do that\nvery easily unless I require you to do some work.",
    "start": "3468540",
    "end": "3473727"
  },
  {
    "text": "So that's kind of\nthe trick in turning a permissioned\nconsensus algorithm into a permissionless one. And in fact, the way these\npermissioned animals work",
    "start": "3473727",
    "end": "3481040"
  },
  {
    "text": "is completely\ndifferent than bitcoin. They are much more complex. Bitcoin is incredibly simple\nas a consensus algorithm.",
    "start": "3481040",
    "end": "3487490"
  },
  {
    "text": "If you ever read a\nconsensus algorithm paper, you know, it's a bit insane. Also to implement,\nit's a bit insane.",
    "start": "3487490",
    "end": "3492770"
  },
  {
    "text": "Bitcoin is very simple\nto implement compared to these other things,\nI mean, bitcoin is, of course, a complex\nbeast as well.",
    "start": "3492770",
    "end": "3497850"
  },
  {
    "text": "But you should look at let's\nsay, practical Byzantine fault tolerant paper, PBFT, and\ntry and implement that.",
    "start": "3497850",
    "end": "3505880"
  },
  {
    "text": " So anyway, why am I\ntelling you all of this? The reason I'm telling\nyou all of this",
    "start": "3505880",
    "end": "3511593"
  },
  {
    "text": "is because if you want to\ndo a permissioned blockchain for whatever reason,\none way to do that is to use your favorite\nByzantine consensus algorithm.",
    "start": "3511593",
    "end": "3518360"
  },
  {
    "text": "So that would be-- let's say pbft. This was 1999 from MIT.",
    "start": "3518360",
    "end": "3526473"
  },
  {
    "text": "So you could use that. You could have a lot\nof fun implementing it. Another thing you could do is\nyou could take your program p",
    "start": "3526473",
    "end": "3532970"
  },
  {
    "text": "and just give it to an\nethereum smart contract. And you know, that the\nethereum smart contract, if the ethereum security\nassumption holds,",
    "start": "3532970",
    "end": "3540935"
  },
  {
    "text": "it will do the right thing. It will execute your\nprogram p correctly, right? But the other thing that\nyou could do actually,",
    "start": "3540935",
    "end": "3546860"
  },
  {
    "text": "is you could use Catena\nto agree on these logs, on the log of operations\nfor your program.",
    "start": "3546860",
    "end": "3553280"
  },
  {
    "text": "And then you could use another\n2f plus 1 servers or replicas to do the execution\nstuff so that you",
    "start": "3553280",
    "end": "3559880"
  },
  {
    "text": "can agree on the final state. And this gives you a very simple\nByzantine consensus algorithm.",
    "start": "3559880",
    "end": "3565120"
  },
  {
    "text": "So remember Catena doesn't\ngive you execution. It allows you to agree\non the log of ops. To get the execution, you'd\nbasically take a majority vote.",
    "start": "3565120",
    "end": "3572690"
  },
  {
    "text": "If you see you have 2f\nplus 1 replica servers",
    "start": "3572690",
    "end": "3577790"
  },
  {
    "text": "and if you see f plus 1\nvotes on a final state, you know that's the right\nstate because only f of them",
    "start": "3577790",
    "end": "3586070"
  },
  {
    "text": "are malicious. ",
    "start": "3586070",
    "end": "3591320"
  },
  {
    "text": "So in fact, if you use Catena\nwith 2f plus 1 replicas, I claim that you can get sort of\na permissioned blockchain that",
    "start": "3591320",
    "end": "3596630"
  },
  {
    "text": "sort of leverages the bitcoin\nblockchain to do the agreement on the log of ops. So in that sense, it's sort\nof a mix of a permissioned",
    "start": "3596630",
    "end": "3603050"
  },
  {
    "text": "and permissionless. We haven't studied\nthis like we don't know what properties it would have. So that's future work.",
    "start": "3603050",
    "end": "3610440"
  },
  {
    "text": "And if you don't need the\nexecution, for example, if all you're doing\nis you're agreeing",
    "start": "3610440",
    "end": "3616520"
  },
  {
    "text": "on a public key directory--\nlike here, there's no execution. This directory just is\nsupposed to stay append-only,",
    "start": "3616520",
    "end": "3621920"
  },
  {
    "text": "we have some\nresearch that allows you to prove that\nevery transition is an append-only directory.",
    "start": "3621920",
    "end": "3628832"
  },
  {
    "text": "And if you only\nneed execution, you can just use Catena\ndirectly as I already told you guys for the\nsoftware transparency",
    "start": "3628832",
    "end": "3635029"
  },
  {
    "text": "application for the public\nkey directory application. And if you want to do a\npermissionless blockchain then,",
    "start": "3635030",
    "end": "3643020"
  },
  {
    "text": "of course, you would\nhave to roll your own. But you have to proceed\nwith caution there, right?",
    "start": "3643020",
    "end": "3648770"
  },
  {
    "text": "It's not an easy thing to do. OK, so let's conclude now. What we did here is that we\nenabled these applications",
    "start": "3648770",
    "end": "3655400"
  },
  {
    "text": "to efficiently leverage\nbitcoin's consensus, right? So clients can download\ntransactions selectively",
    "start": "3655400",
    "end": "3662240"
  },
  {
    "text": "rather than full blockchain\nand prevent equivocation. Right, and you only need\nto get 46 megabytes instead",
    "start": "3662240",
    "end": "3667940"
  },
  {
    "text": "of gigabytes from the\nBitcoin blockchain. So why does this matter?",
    "start": "3667940",
    "end": "3673223"
  },
  {
    "text": "These are just I think\nthe three killer apps-- secure software update,\npublic key directories-- by the way, the\npublic directories",
    "start": "3673223",
    "end": "3678967"
  },
  {
    "text": "also are applicable to https. So when you go on\nFacebook, you have to get Facebook's public key.",
    "start": "3678967",
    "end": "3684325"
  },
  {
    "text": "The certificate authorities\nthat sign the public keys are often compromised. So they're often fake\nsearch for Google,",
    "start": "3684325",
    "end": "3690200"
  },
  {
    "text": "for big companies like that. And you might use it. But if you have a\npublic key directory,",
    "start": "3690200",
    "end": "3695462"
  },
  {
    "text": "Facebook and Google\ncan immediately notice those fake sorts. It's a step forward.",
    "start": "3695462",
    "end": "3701220"
  },
  {
    "text": "And for more, of course,\nyou can read our paper. It appeared in a IEEE\nsecurity and privacy 2017.",
    "start": "3701220",
    "end": "3708980"
  },
  {
    "text": "And I'll post the\nslide on GitHub too. So there are links there. Yeah so, again this is the high\nlevel overview of everything",
    "start": "3708980",
    "end": "3716030"
  },
  {
    "text": "that's previous\nwork and our work. The difference is very small.",
    "start": "3716030",
    "end": "3721940"
  },
  {
    "text": "And now we can also\ntalk about other stuff. In fact, I have\nmore stuff to talk. But before we do, I'd like to\nhave a discussion with you guys",
    "start": "3721940",
    "end": "3729920"
  },
  {
    "text": "if you have questions. So? AUDIENCE: So could you implement\nCatena in the actual bitcoin",
    "start": "3729920",
    "end": "3737049"
  },
  {
    "text": "node? Would that be something\nthat they would want? It seems like it would\nbe a good feature to add?",
    "start": "3737050",
    "end": "3746480"
  },
  {
    "text": "Or is it strictly separate? ALIN TOMESCU: Yeah, I\ndon't think you need to. That's the whole point, right?",
    "start": "3746480",
    "end": "3751800"
  },
  {
    "text": "The whole point\nof the research is how do we use bitcoin without\ngetting the miners to accept a new version of bitcoin,\nwithout changing bitcoin",
    "start": "3751800",
    "end": "3758600"
  },
  {
    "text": "in any way? So no, I don't think--\nthere's nothing to do really,",
    "start": "3758600",
    "end": "3763610"
  },
  {
    "text": "we're just-- we're taking bitcoin\nas it is and we're piggybacking on top of it.",
    "start": "3763610",
    "end": "3768740"
  },
  {
    "text": "We couldn't change it. I mean, there's a lot of things\nyou can do in some sense. But then you get a\nvery different system. Very different, we can talk\nabout it more if you want.",
    "start": "3768740",
    "end": "3776430"
  },
  {
    "text": "Yeah? AUDIENCE: You were talking about\nhow you can use this system to verify software\nbinaries and how",
    "start": "3776430",
    "end": "3783060"
  },
  {
    "text": "you want this to run in\nSPV modes on phones So how do you install\nsoftware on the phones say,",
    "start": "3783060",
    "end": "3788707"
  },
  {
    "text": "through apple and the app store. Is there a way to sign the\nbinary that you actually get from the app store?",
    "start": "3788707",
    "end": "3794420"
  },
  {
    "text": "ALIN TOMESCU: I think your\nquestion is really about how do appstore binaries--",
    "start": "3794420",
    "end": "3800188"
  },
  {
    "text": "how do you Verify\nApp store binaries? It's a chicken and an\negg in some sense right, is that what you're saying? Yeah, you're right.",
    "start": "3800188",
    "end": "3807640"
  },
  {
    "text": "Eventually, I mean\nin the best case, wishful thinking would\nbe to say that look, the app store does this\nalready for all of the binaries",
    "start": "3807640",
    "end": "3815470"
  },
  {
    "text": "that they publish, allowing the\ndevelopers to make sure nobody",
    "start": "3815470",
    "end": "3822119"
  },
  {
    "text": "is posting malicious binaries\non the app store for them. ",
    "start": "3822120",
    "end": "3828119"
  },
  {
    "text": "Yes? AUDIENCE: Who do you\nenvision running it? ALIN TOMESCU: So I'd really\nlike to see Keybase run Catena,",
    "start": "3828120",
    "end": "3834230"
  },
  {
    "text": "it seems like a\nmissed opportunity that they don't do this. I'm sure they have better stuff\nto do but it's just really",
    "start": "3834230",
    "end": "3842750"
  },
  {
    "text": "easily allow Keybase-- let's say Keybase has\na mobile phone app, it would allow that mobile phone\napp to verify the directory",
    "start": "3842750",
    "end": "3849109"
  },
  {
    "text": "and get much, much,\nmuch more security. You know, no equivocation as\nlong as nobody forks bitcoin.",
    "start": "3849110",
    "end": "3855080"
  },
  {
    "text": "Since Keybase is already\npublishing these digests but they cannot be audited\nefficiently on a mobile phone. I mean they can but\nnot securely you know,",
    "start": "3855080",
    "end": "3861980"
  },
  {
    "text": "because full nodes can lie. ",
    "start": "3861980",
    "end": "3873090"
  },
  {
    "text": "So there's a big problem with\neverything I said so far. And nobody caught it. So one problem is\nthat what do you",
    "start": "3873090",
    "end": "3880710"
  },
  {
    "text": "do when you run out of funds? Remember I said the log server\nstarts with two bitcoins.",
    "start": "3880710",
    "end": "3886580"
  },
  {
    "text": "Let's say it issues\nthousands of transactions, starts paying those $40 fees\nand it runs out of funds.",
    "start": "3886580",
    "end": "3892885"
  },
  {
    "text": "What do you do? Then Yeah? AUDIENCE: You can maybe\nreload the new transactions",
    "start": "3892885",
    "end": "3899274"
  },
  {
    "text": "with this transaction\n[INAUDIBLE].. ALIN TOMESCU: What's your name?",
    "start": "3899274",
    "end": "3904480"
  },
  {
    "text": "AUDIENCE: Raul. ALIN TOMESCU: Raul. So Raul is saying\nyou can reload. And that's exactly right. We just have to change the\ntransaction format slightly.",
    "start": "3904480",
    "end": "3913680"
  },
  {
    "text": "We talk about this\nin the paper as well. But just to demonstrate\nreal quickly.",
    "start": "3913680",
    "end": "3919190"
  },
  {
    "text": "Suppose, let's take a ridiculous\nexample which hopefully will never happen in bitcoin.",
    "start": "3919190",
    "end": "3925220"
  },
  {
    "text": "But suppose that the\nBitcoin fee is 1 bitcoin. ",
    "start": "3925220",
    "end": "3932450"
  },
  {
    "text": "So now I have one bitcoin here. And I have s1 here. And now I have\nzero bitcoins here.",
    "start": "3932450",
    "end": "3940640"
  },
  {
    "text": " All right, so zero\nbitcoins in this output.",
    "start": "3940640",
    "end": "3949270"
  },
  {
    "text": "And maybe s2 here. So that would be terrible. Right, now I can't go on.",
    "start": "3949270",
    "end": "3955790"
  },
  {
    "text": "Does everybody see\nthis as a problem? Right, so what Raul is saying\nis look at another input",
    "start": "3955790",
    "end": "3961809"
  },
  {
    "text": "here and make it take coins\nfrom some other transaction",
    "start": "3961810",
    "end": "3967130"
  },
  {
    "text": "whatever, 20 bitcoins. And now you get\n20 bitcoins here. Right, so you can easily\nrefund transactions.",
    "start": "3967130",
    "end": "3973982"
  },
  {
    "start": "3973982",
    "end": "3979069"
  },
  {
    "text": "There is a bit more\nsubtlety there in the sense that you don't\nwant to join logs--",
    "start": "3979070",
    "end": "3986180"
  },
  {
    "text": "let's say if you have two\nlogs, GTX and GTX prime",
    "start": "3986180",
    "end": "3991460"
  },
  {
    "text": "for different applications. Right, and they start\nissuing statements-- s1, s2.",
    "start": "3991460",
    "end": "3996710"
  },
  {
    "text": "You don't want to\nbe able to join-- I'm sorry, s1, s1 prime-- these two locks to a single\nlog for certain reasons right.",
    "start": "3996710",
    "end": "4005200"
  },
  {
    "text": "But this doesn't actually\nallow you to join them in the sense that-- let's say you actually\ndo this and join them.",
    "start": "4005200",
    "end": "4010840"
  },
  {
    "text": "Right, so let's say\nthis transaction here came from GTX prime, right?",
    "start": "4010840",
    "end": "4018840"
  },
  {
    "text": "And there was an s1 prime here. ",
    "start": "4018840",
    "end": "4024428"
  },
  {
    "text": "And you did this, right? So the problem is this is\nno longer a valid Catena",
    "start": "4024428",
    "end": "4030609"
  },
  {
    "text": "transaction for this log\nbecause a valid Casino transaction-- the\nfirst input spends",
    "start": "4030610",
    "end": "4037840"
  },
  {
    "text": "the previous\ntransactions output. But in this chain, it's\nthe second input that",
    "start": "4037840",
    "end": "4044109"
  },
  {
    "text": "spends the previous output. So I cannot join logs. And this matters for\na bunch of reasons",
    "start": "4044110",
    "end": "4050800"
  },
  {
    "text": "that we don't have to go into. ",
    "start": "4050800",
    "end": "4057350"
  },
  {
    "text": "Yeah, so we talked about the\nabout batching statements. I want to show you guys\nsome previous work,",
    "start": "4057350",
    "end": "4063560"
  },
  {
    "text": "so how did some previous\nwork do this since there we seem to have a bit of time.",
    "start": "4063560",
    "end": "4069151"
  },
  {
    "text": "OK, so there are\nsome previous work called liar, liar,\ncoins on fire. Have you guys seen this?",
    "start": "4069152",
    "end": "4075380"
  },
  {
    "text": "So the idea here is that it\nis a really nice piece of work and lots of people in\nthe bitcoin community already know about this.",
    "start": "4075380",
    "end": "4082740"
  },
  {
    "text": "And I think it was an idea\nbefore the paper or maybe not, I'm not sure. But Tadge has a similar idea.",
    "start": "4082740",
    "end": "4090330"
  },
  {
    "text": "So for example, suppose\nwe have this authority.",
    "start": "4090330",
    "end": "4095450"
  },
  {
    "text": "Imagine this is a\nCatena block server and it publishes a transaction\nwhich locks to bitcoin",
    "start": "4095450",
    "end": "4101149"
  },
  {
    "text": "and locks those bitcoins\nto that public key. And this authority\nsometimes will want",
    "start": "4101149",
    "end": "4106473"
  },
  {
    "text": "to say two different things. It will want to say\ns and s prime, right? And it will sign the statements\nwith their secret key.",
    "start": "4106473",
    "end": "4115318"
  },
  {
    "text": " But the secret key\nthat the authority uses to sign statements is\nalso a bitcoin secret key.",
    "start": "4115319",
    "end": "4124290"
  },
  {
    "text": "It's the same secret\nkey that the authority used to lock to bitcoins,\nso $20,000 or something.",
    "start": "4124290",
    "end": "4130469"
  },
  {
    "text": "I'm not sure if bitcoin\nplummeted since yesterday, can never be sure. Does the setting make sense?",
    "start": "4130470",
    "end": "4136560"
  },
  {
    "text": "So I have an authority. It issues statements\njust like before. And it numbers them\nwith i, let's say.",
    "start": "4136560",
    "end": "4144649"
  },
  {
    "text": "And we want to prevent this\nauthority from equivocating. We're not actually\ngoing to prevent it. We're just going to\ndisincentivize it in the sense",
    "start": "4144649",
    "end": "4152339"
  },
  {
    "text": "that if this authority\nequivocates like this for the same statement\ni, what I claim",
    "start": "4152340",
    "end": "4158700"
  },
  {
    "text": "is that anybody can then\nsteal that authority's bitcoin because\nequivocating like this",
    "start": "4158700",
    "end": "4163799"
  },
  {
    "text": "reveals the secret key. And the reason it\nreveals the secret key is because the signature\nshares the same i here.",
    "start": "4163800",
    "end": "4172750"
  },
  {
    "text": "So how many of you\nguys actually, you did cover Schnorr\nsignatures, right? So did Tadge talk about how\nto do this with Schnorr?",
    "start": "4172750",
    "end": "4181712"
  },
  {
    "text": "AUDIENCE: This is\nthe [INAUDIBLE]..  ALIN TOMESCU: But\ndid Tadge cover it?",
    "start": "4181712",
    "end": "4187930"
  },
  {
    "text": "AUDIENCE: Yes. ALIN TOMESCU: OK, great. So yeah so let's go\nover that less briefly.",
    "start": "4187930",
    "end": "4193080"
  },
  {
    "text": "So again, the idea is that\nif someone observes these two signatures on conflicting\nstatements for the same i,",
    "start": "4193080",
    "end": "4199440"
  },
  {
    "text": "there is this box where you\ncan put the two signatures and get back the secret key. And once you have\nthe secret key,",
    "start": "4199440",
    "end": "4205130"
  },
  {
    "text": "we can spend this\ntransaction and get that authority's bitcoins. And then there's\na lot of details",
    "start": "4205130",
    "end": "4210700"
  },
  {
    "text": "to get it right because\nyou might notice that if the authority does\nthis, before they do this,",
    "start": "4210700",
    "end": "4216860"
  },
  {
    "text": "they might already be spending\nthis transaction themselves so as to prevent\nyou from taking it.",
    "start": "4216860",
    "end": "4222969"
  },
  {
    "text": "And details on how to prevent\nthe authority from doing that are in those paper. Yeah, and then you\nknow, whoever discovered",
    "start": "4222970",
    "end": "4229870"
  },
  {
    "text": "this can spend those bitcoins. And the idea is that this\ndisincentivizes equivocation",
    "start": "4229870",
    "end": "4236170"
  },
  {
    "text": "by locking these funds\nunder the secret key of the bad authority. But it does not prevent it.",
    "start": "4236170",
    "end": "4241420"
  },
  {
    "text": "Right, so in Catena we\nactually prevent equivocation. We say, if you\nwant to equivocate, you better fork bitcoin.",
    "start": "4241420",
    "end": "4248540"
  },
  {
    "text": "Here they say, if you\nwant to equivocate, you're going to lose $20,000.",
    "start": "4248540",
    "end": "4254750"
  },
  {
    "text": "Right? But you have to\nunderstand like this could be a good authority\nthat locked $20,000 here.",
    "start": "4254750",
    "end": "4260872"
  },
  {
    "text": "But the attackers are going\nto be-- they're not going to care about those $20,000. They're just going to\nsteal the secret key,",
    "start": "4260872",
    "end": "4266619"
  },
  {
    "text": "equivocate and\nthen the authority is going to be\nleft without money.",
    "start": "4266620",
    "end": "4271690"
  },
  {
    "text": "If the authority\nis the attacker, then this makes sense. But if the attacker\nis not the authority, then this makes less sense\nbecause the authority sort",
    "start": "4271690",
    "end": "4278110"
  },
  {
    "text": "of risking their bitcoins\non the assumption that no attacker can compromise\nthem, which you know,",
    "start": "4278110",
    "end": "4284661"
  },
  {
    "text": "if you could do that\nin computer science, I wouldn't be sitting\nhere talking to you guys. ",
    "start": "4284662",
    "end": "4290330"
  },
  {
    "text": "OK, so now how do you do this? So do you remember Schnorr\nsignatures real quickly?",
    "start": "4290330",
    "end": "4296500"
  },
  {
    "text": " An easy way to do this is\nusing Schnorr signatures.",
    "start": "4296500",
    "end": "4304699"
  },
  {
    "text": "And I think-- I could be wrong, but\nI think this new SegWit update to bitcoin allows\nSchnorr signatures, right?",
    "start": "4304700",
    "end": "4314360"
  },
  {
    "text": "So with SegWit and\nwith Schnorr signature, as you can definitely do this.",
    "start": "4314360",
    "end": "4319750"
  },
  {
    "text": "And the idea is that\nSchnorr signature if you recall, is just k\nplus h of m, g to the k s,",
    "start": "4319750",
    "end": "4331210"
  },
  {
    "text": "where s is the secret key. Right, so this is a Schnorr\nsignature on m, right?",
    "start": "4331210",
    "end": "4336230"
  },
  {
    "text": " How many recall this? Right, and of course,\nit's not just this.",
    "start": "4336230",
    "end": "4342490"
  },
  {
    "text": "I mean, the signature is\nreally this and this h of m,",
    "start": "4342490",
    "end": "4351880"
  },
  {
    "text": "g to the k. So it's these two things, right. But now I want to show you that\nif I sign two different things,",
    "start": "4351880",
    "end": "4364870"
  },
  {
    "text": "I can actually get s. But if I sign them\nin a certain way--",
    "start": "4364870",
    "end": "4370030"
  },
  {
    "text": "so remember what I said before\nis I would like this authority to sign i m and i m prime.",
    "start": "4370030",
    "end": "4379490"
  },
  {
    "text": "Right, and if the\nauthority does this, I claim that I can get\nthe secret key out.",
    "start": "4379490",
    "end": "4385150"
  },
  {
    "text": "But I have to have the same i. So we relax this in a\nsense that we're not",
    "start": "4385150",
    "end": "4390340"
  },
  {
    "text": "going to use i here, we're just\ngoing to use this g to the k.",
    "start": "4390340",
    "end": "4395949"
  },
  {
    "text": "So if the authority uses\nthe same g to the k to sign, then we can extract\nthe secret key. And the way we can do that\nis I'll just show an example,",
    "start": "4395950",
    "end": "4403200"
  },
  {
    "text": "sig1 would be k plus\nh of m1 g to the k.",
    "start": "4403200",
    "end": "4412120"
  },
  {
    "text": "And it'll be sig 1 and I\nguess the associated hash E1 would be h m1, g to the k.",
    "start": "4412120",
    "end": "4421370"
  },
  {
    "text": "Does everybody see this? And then sig2 would be k\nplus h of m 2 g to the k.",
    "start": "4421370",
    "end": "4430030"
  },
  {
    "text": "So again, oh, you guys are\nclearly not paying attention. I forgot the secret key. ",
    "start": "4430030",
    "end": "4437199"
  },
  {
    "text": "E2 is hash of m2 g to the k. OK, so I'm using the same\ng to the k and the same k.",
    "start": "4437200",
    "end": "4445090"
  },
  {
    "start": "4445090",
    "end": "4452520"
  },
  {
    "text": "So now how can I\nextract the secret key? Does anybody see a\nsolution to this? ",
    "start": "4452520",
    "end": "4458969"
  },
  {
    "text": "AUDIENCE: It's now just system\nof two equations and two variables where k and s\nare the unknown variables. ALIN TOMESCU: So I think\nwhat Rahul always saying",
    "start": "4458970",
    "end": "4465542"
  },
  {
    "text": "is that s is just sig1 minus\nsig2 divided by e1 minus e2.",
    "start": "4465542",
    "end": "4472500"
  },
  {
    "text": "Is that right? Yeah. ",
    "start": "4472500",
    "end": "4479140"
  },
  {
    "text": "See this, because if I\nsubtract this from this, I just get h m1--",
    "start": "4479140",
    "end": "4488470"
  },
  {
    "text": "I'm not going to\nhave space here. I get-- let's say it here--",
    "start": "4488470",
    "end": "4494470"
  },
  {
    "text": "h of m1, g to the k minus h\nof m2 g into the k times s.",
    "start": "4494470",
    "end": "4506150"
  },
  {
    "text": "All right? And now I take this\nhere in the denominator",
    "start": "4506150",
    "end": "4512590"
  },
  {
    "text": "and I simplify and I get s. All right. ",
    "start": "4512590",
    "end": "4518430"
  },
  {
    "text": "So it turns out that\nthat's kind of the trick that this word leverage\nis more or less. The only sort of caveat here\nis that remember I said,",
    "start": "4518430",
    "end": "4527000"
  },
  {
    "text": "there is a position\ni for the statement. But now I'm saying, there's\nno longer a position. We have to use this g to the k.",
    "start": "4527000",
    "end": "4533130"
  },
  {
    "text": "And how do we map positions\nthat are g to the k is another trick that you\nhave to do but you can do it. And if you want more details,\nyou can read the paper",
    "start": "4533130",
    "end": "4540257"
  },
  {
    "text": "and I'm sure Tadge will tell you\neven more details about this. I think the lightning\nnetwork also leverages",
    "start": "4540257",
    "end": "4545850"
  },
  {
    "text": "this trick in some cases. ",
    "start": "4545850",
    "end": "4551849"
  },
  {
    "text": "All right now, let's talk a\nlittle bit about some attacks if there is time. The most interesting attack\nwould be the generalized vector",
    "start": "4551850",
    "end": "4559949"
  },
  {
    "text": "76 attack. So this is a screenshot\nfrom a paper. Can everybody see this?",
    "start": "4559950",
    "end": "4565020"
  },
  {
    "text": "So the generalized vector 76\nattack is very interesting. So you have you have\nan attacker, right?",
    "start": "4565020",
    "end": "4571199"
  },
  {
    "text": "And remember, the goal of\nthe attacker is to replace-- let's say this\nTX1 with that TX2.",
    "start": "4571200",
    "end": "4579120"
  },
  {
    "text": "It's going to show this TX1\nto a merchant saying hey, I paid you money. And then it's going to show\nthis TX2 to the merchant sending",
    "start": "4579120",
    "end": "4586560"
  },
  {
    "text": "the money back to himself. So the whole trick is to fork\nthe merchant on this side and then to switch him\nback to that, right.",
    "start": "4586560",
    "end": "4592980"
  },
  {
    "text": "It's a sort of a pre-mining\nattack and this attack is much easier to pull on SPV notes\nbecause what the attacker does",
    "start": "4592980",
    "end": "4600780"
  },
  {
    "text": "is-- let's see-- he works on the\nsecret chain with TX1 in it.",
    "start": "4600780",
    "end": "4606020"
  },
  {
    "text": "And at some point, the main\nchain might take him over, might win. So the attacker kind of\ngives up and keeps trying.",
    "start": "4606020",
    "end": "4611250"
  },
  {
    "text": "But at some point the\nattacker gets ahead, right in the second chain. He gets ahead of the main chain. This stuff is not posted yet.",
    "start": "4611250",
    "end": "4617940"
  },
  {
    "text": "And let's see this merchant only\nfor some reason because they're silly, they only need one\nconfirmation to accept the TX1.",
    "start": "4617940",
    "end": "4626190"
  },
  {
    "text": "And for other silly\nreasons, this merchant is an SPV merchant, right? Let's draw a figure here.",
    "start": "4626190",
    "end": "4632730"
  },
  {
    "text": "So this merchant\nis an SPV merchant that only needs one confirmation\nto accept the transaction.",
    "start": "4632730",
    "end": "4639686"
  },
  {
    "text": " So we have the attacker.",
    "start": "4639686",
    "end": "4645875"
  },
  {
    "text": " And we have let's\nsay, the SPV merchant.",
    "start": "4645875",
    "end": "4651469"
  },
  {
    "text": " Right, and now the\nattacker's sent you know,",
    "start": "4651470",
    "end": "4658300"
  },
  {
    "text": "this was the main block\nthere, let's say, this was bi. And the attacker forked it.",
    "start": "4658300",
    "end": "4664290"
  },
  {
    "text": "He put TX1 here. And then had a\nconfirmation on it, right?",
    "start": "4664290",
    "end": "4669720"
  },
  {
    "text": "So he sends this\nchain to the merchant. And the other miners\nhaven't found anything yet.",
    "start": "4669720",
    "end": "4675136"
  },
  {
    "text": "Right, so the attacker\nis a bit ahead. So he's pre-mining. So far, so good. Are you all with me?",
    "start": "4675137",
    "end": "4681510"
  },
  {
    "text": "And remember that he really\njust is showing block headers. So these are not full blocks.",
    "start": "4681510",
    "end": "4686937"
  },
  {
    "text": "He's just showing block headers. They're much smaller\nblocks, 80 bytes. And the blocks are missing.",
    "start": "4686937",
    "end": "4694160"
  },
  {
    "text": "All right, so when\nhe shows TX1, he is just showing like a Merkle\npath to TX1 to the merchant.",
    "start": "4694160",
    "end": "4701340"
  },
  {
    "text": "You guys with me? OK, so now he did\nthis to the merchant. And now what the\nattacker is going to do,",
    "start": "4701340",
    "end": "4706850"
  },
  {
    "text": "he's going to relax,\nsit back, and post the TX2 the mines--\ngive TX2 to the miners.",
    "start": "4706850",
    "end": "4713240"
  },
  {
    "text": "Let's say the miners are here. Hes going to post\nTX2 to the miners.",
    "start": "4713240",
    "end": "4718370"
  },
  {
    "text": "And he'll stop\nmining the attacker. He's not going to mine anymore. But he got the merchant\nto accept the payment. And the merchant\nshipped the goods.",
    "start": "4718370",
    "end": "4724730"
  },
  {
    "text": "Maybe this is an\nonline purchase. And so now the miners, they will\nfind the next block bi plus 1.",
    "start": "4724730",
    "end": "4732740"
  },
  {
    "text": "They'll put TX2 here. They'll find the next block\nand then the next block.",
    "start": "4732740",
    "end": "4738650"
  },
  {
    "text": "And they'll take over. Their chain will\nbe the main chain. And eventually\nthis merchant will hear about this main chain.",
    "start": "4738650",
    "end": "4744769"
  },
  {
    "text": "And he'll just see the\nheaders, of course, because he's an SPV merchant. So now the SPV merchant\njust got double spent.",
    "start": "4744770",
    "end": "4750860"
  },
  {
    "text": "Does everybody see this? That I just double\nspent the merchant? And sort of the\nfundamental problem",
    "start": "4750860",
    "end": "4756469"
  },
  {
    "text": "here is that the merchant\nonly received block headers. So he cannot take these block\nheaders and broadcast them",
    "start": "4756470",
    "end": "4763250"
  },
  {
    "text": "to the miners because miners\ndon't mine on top of block headers. Miners mine on top\nof full blocks.",
    "start": "4763250",
    "end": "4769760"
  },
  {
    "text": "So this merchant cannot has\nno protection against this if he's doing SPV-- if he's accepting SPV payments.",
    "start": "4769760",
    "end": "4775960"
  },
  {
    "text": "If these were full blocks, what\nthe merchant could have done was the following.",
    "start": "4775960",
    "end": "4781273"
  },
  {
    "text": "The merchant would\nhave would have received the full block here\nwith the transaction in it,",
    "start": "4781273",
    "end": "4791060"
  },
  {
    "text": "right. So again the attacker got ahead. But now the merchant\nbecause he saw a block, he's going to ship this\nblock with TX1 to the miners",
    "start": "4791060",
    "end": "4799900"
  },
  {
    "text": "because he's a full node. Full nodes do that. When they hear about a\nblock, they broadcast it.",
    "start": "4799900",
    "end": "4805000"
  },
  {
    "text": "So now the miners\nknow about this block. They're going to continue\nmining on top of it. And in fact, the merchant\nwill send both blocks,",
    "start": "4805000",
    "end": "4811480"
  },
  {
    "text": "right to the miners. So now miners will\ncontinue building here. So now the attacker has a bit of\na tougher problem on his hands.",
    "start": "4811480",
    "end": "4821380"
  },
  {
    "text": "There is still a way to\ntrick even full nodes, even if this guy\nis a full node, you can sort of leverage\nsome timing assumptions",
    "start": "4821380",
    "end": "4827730"
  },
  {
    "text": "to still trick the full node. And the details are in\nthat paper over there. But that's one way--",
    "start": "4827730",
    "end": "4835193"
  },
  {
    "text": "somebody was asking, I think\nyou were asking Anne, right-- about SPV nodes and how\nthey're less secure. And this is one fundamental way\nin which they're less secure.",
    "start": "4835193",
    "end": "4841712"
  },
  {
    "text": "If you accept payments\nwith SPV nodes you're really playing with fire. You know, you do need a\nsufficiently powerful attacker",
    "start": "4841712",
    "end": "4850930"
  },
  {
    "text": "who can get ahead. But yeah. OK, so with that I think that\nkind of concludes the lecture.",
    "start": "4850930",
    "end": "4859010"
  },
  {
    "text": "Any final questions? ",
    "start": "4859010",
    "end": "4865190"
  },
  {
    "text": "All right, cool. Thank you guys. ",
    "start": "4865190",
    "end": "4878279"
  }
]