[
  {
    "start": "0",
    "end": "28000"
  },
  {
    "text": "The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6360"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6360",
    "end": "13350"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13350",
    "end": "27883"
  },
  {
    "text": "HARI BALAKRISHNAN: OK. So today, we're going\nto continue talking about multi-hop networks. And in particular,\nI'm going to talk",
    "start": "27883",
    "end": "33719"
  },
  {
    "start": "28000",
    "end": "66000"
  },
  {
    "text": "about a fairly fundamental\nproblem in multi-hop networks called network routing.",
    "start": "33720",
    "end": "40120"
  },
  {
    "text": "And that's the topic for today\nand through most of, half of, next week.",
    "start": "40120",
    "end": "46110"
  },
  {
    "text": "And today, this week,\nwe'll talk about network routing in networks where\nthere are no failures.",
    "start": "46110",
    "end": "52860"
  },
  {
    "text": "So in real networks,\nof course, things fail. Packets get dropped. Nodes may fail. Switches may fail. Links may fail.",
    "start": "52860",
    "end": "58610"
  },
  {
    "text": "We'll just worry about\nthe case when there are no failures for this week. Next week, we'll add\nsome more complexity",
    "start": "58610",
    "end": "65040"
  },
  {
    "text": "and talk about how we\ndeal with failures. So the abstract problem\nis pretty simple. You have a set of\nnodes in the network.",
    "start": "65040",
    "end": "71700"
  },
  {
    "start": "66000",
    "end": "307000"
  },
  {
    "text": "And there's some\nnetwork topology. ",
    "start": "71700",
    "end": "87240"
  },
  {
    "text": "And every source\nin the network-- you have sources, and\nyou have destinations, nodes in the network.",
    "start": "87240",
    "end": "92820"
  },
  {
    "text": "And they wish to send\npackets to each other. And we're going to\ndecompose this problem, these endpoints,\nwhich actually want",
    "start": "92820",
    "end": "102687"
  },
  {
    "text": "to communicate with each other,\nas we've already talked about, do so by sending\npackets via switches.",
    "start": "102687",
    "end": "109799"
  },
  {
    "text": "And the problem we're\ngoing to worry about is what happens inside the\nnetwork in these switches.",
    "start": "109800",
    "end": "119259"
  },
  {
    "text": "The switches solve\nthe following problem. If things work correctly\nand if things work well,",
    "start": "119260",
    "end": "125210"
  },
  {
    "text": "when a switch receives a\npacket with a destination address specifying\nthat that packet has",
    "start": "125210",
    "end": "131270"
  },
  {
    "text": "to be sent to a particular named\ndestination to the network, the switch figures out\nhow to ship that packet.",
    "start": "131270",
    "end": "137960"
  },
  {
    "text": "It figures out whether\nto send it along-- I need a better-- here. This switch, for\nexample, figures out",
    "start": "137960",
    "end": "144110"
  },
  {
    "text": "whether a package should go\nalong that link, or this link, or this link, or this\nlink, or that link,",
    "start": "144110",
    "end": "150410"
  },
  {
    "text": "given any package\nthat it receives. And every switch in the\nnetwork performs this task. ",
    "start": "150410",
    "end": "157930"
  },
  {
    "text": "Now, when a switch gets\na packet and the packet has a destination address\nin it, what the switch does",
    "start": "157930",
    "end": "164580"
  },
  {
    "text": "is some sort of a lookup. It looks up that destination\nin some sort of a table.",
    "start": "164580",
    "end": "172230"
  },
  {
    "text": "And that table maintains\ninformation about which of the links to use\nin sending that packet",
    "start": "172230",
    "end": "179910"
  },
  {
    "text": "toward the destination. And this step is\ncalled forwarding. ",
    "start": "179910",
    "end": "191630"
  },
  {
    "text": "Packets are forwarded\nby switches. Technically, packets\naren't routed.",
    "start": "191630",
    "end": "196970"
  },
  {
    "text": "Everybody says packet\nrouting, and I say it, too. But it's important to realize\npackets aren't routed.",
    "start": "196970",
    "end": "202030"
  },
  {
    "text": "Packets are forwarded. The forwarding process is pretty\nstraightforward at slow speeds.",
    "start": "202030",
    "end": "208080"
  },
  {
    "text": "You get a packet. You take the destination. You look up that\npacket in a table. And that table tells you what\nyou do with the packet, which",
    "start": "208080",
    "end": "215750"
  },
  {
    "text": "link to use. Routing is the problem\nthat the switches solve",
    "start": "215750",
    "end": "221900"
  },
  {
    "text": "of constructing these tables. So forwarding is simply\nlookup in a table.",
    "start": "221900",
    "end": "230050"
  },
  {
    "text": "And the table is called\nthe routing table. ",
    "start": "230050",
    "end": "235130"
  },
  {
    "text": "Sometimes it's also called\nthe forwarding table. And there's a technical\ndifference between them that's not that important for us.",
    "start": "235130",
    "end": "240400"
  },
  {
    "text": "So forwarding is the process\nof looking up the destination",
    "start": "240400",
    "end": "246450"
  },
  {
    "text": "in the routing table. Routing is the\ndistributed process, the algorithm that's\nused or the protocol",
    "start": "246450",
    "end": "251700"
  },
  {
    "text": "that's used, to build\nup these routing tables. So it's the\nconstruction process,",
    "start": "251700",
    "end": "257430"
  },
  {
    "text": "how to construct\nthese routing tables at each switch in the network.",
    "start": "257430",
    "end": "264500"
  },
  {
    "text": "That's done in the background. That's usually done in software. Switches at high speeds involve\na fair amount of hardware.",
    "start": "264500",
    "end": "271033"
  },
  {
    "text": "Routing itself is\nusually done in software. ",
    "start": "271033",
    "end": "276490"
  },
  {
    "text": "And so a typical switch has\na lot of different processing elements in it. A lot of those\nprocessing elements",
    "start": "276490",
    "end": "281720"
  },
  {
    "text": "are high speed\nhardware that deals with the process of forwarding. And then you have software\nsitting on the side",
    "start": "281720",
    "end": "287220"
  },
  {
    "text": "where all of the complexity is. And all that complexity\ndeals with all sorts",
    "start": "287220",
    "end": "292790"
  },
  {
    "text": "of complicated rules that\nyou have to come up with in order to decide how to\nconstruct these routing tables.",
    "start": "292790",
    "end": "297892"
  },
  {
    "text": "And we're going to talk about\nthe world's simplest networks today. And you'll find that\neven that's reasonably",
    "start": "297892",
    "end": "303110"
  },
  {
    "text": "sophisticated and complicated. So just for\nconcreteness, an example",
    "start": "303110",
    "end": "308930"
  },
  {
    "text": "of a picture of a\ntopology is like this. And for reasons that\nwill become apparent as we talk this through,\nwe'll model the network",
    "start": "308930",
    "end": "317030"
  },
  {
    "text": "as a set of nodes\nand a set of links. And so far, there's\nnothing new about this. But we'll model links\nas having a cost.",
    "start": "317030",
    "end": "323960"
  },
  {
    "text": "And this cost might reflect, for\nexample, the delay or latency to send a packet\nalong that link.",
    "start": "323960",
    "end": "330890"
  },
  {
    "text": "The cost might reflect\nthe real dollar cost of shipping data along links.",
    "start": "330890",
    "end": "335895"
  },
  {
    "text": "Internet service providers\nmight charge different amounts of money for different\ntypes of data, for example. Or the cost might just reflect\nyour own internal preferences",
    "start": "335895",
    "end": "344660"
  },
  {
    "text": "as to which links\nyou might prefer based on whatever concerns. Maybe some links are slow,\nand some links are fast.",
    "start": "344660",
    "end": "350300"
  },
  {
    "text": "Maybe there are higher speed\nlinks, lower speed links, that cost more or less, et cetera. So these costs are\nabstract numbers.",
    "start": "350300",
    "end": "356270"
  },
  {
    "text": "And we'll just assume that\nwe're interested in finding minimum cost paths between\nsenders and receivers.",
    "start": "356270",
    "end": "363319"
  },
  {
    "text": "So every switch\nsolves the problem of finding the minimum cost\npath to a destination where",
    "start": "363320",
    "end": "369110"
  },
  {
    "text": "the cost along a path is\nsimply the sum of the costs along the links on that path.",
    "start": "369110",
    "end": "374660"
  },
  {
    "text": "This is just standard\nshortest path routing. We'll use shortest\npath even though we don't mean literally the\nshortest number of hops,",
    "start": "374660",
    "end": "381500"
  },
  {
    "text": "but the minimum cost path. And where that distinction is\nimportant between the number of hops and the cost, et\ncetera, we'll clarify.",
    "start": "381500",
    "end": "387925"
  },
  {
    "text": " So the routing table\nlooks something like this.",
    "start": "387925",
    "end": "393000"
  },
  {
    "text": "In fact, it looks like this. There's destination. Every switch has this. So this is an example of\na routing table at node",
    "start": "393000",
    "end": "398930"
  },
  {
    "text": "B. Node B maintains all the\ndestinations in the network. And we're dealing with small\nnetworks so far in our class.",
    "start": "398930",
    "end": "405629"
  },
  {
    "text": "So we'll just assume that\nevery node in the network has a unique name\nor a unique address,",
    "start": "405630",
    "end": "411500"
  },
  {
    "text": "and that the routing\ntables contain an entry for every\ndestination in the network.",
    "start": "411500",
    "end": "416789"
  },
  {
    "text": "So the routing table\nhas three columns. It's a database\nwith three columns. And every switch in\nthe network or a node--",
    "start": "416790",
    "end": "422733"
  },
  {
    "text": "I'm going to use the word node\nand switch interchangeably. Every switch or\nnode in the network has one of these if the\nnetwork is working correctly.",
    "start": "422733",
    "end": "429210"
  },
  {
    "text": "So if the routing\nprotocol does its job, every node comes up with its\nown version of this table. There is a destination.",
    "start": "429210",
    "end": "435139"
  },
  {
    "text": "There is the link\nyou need to use that is the next hop, if you get\na packet to this destination,",
    "start": "435140",
    "end": "441560"
  },
  {
    "text": "what link would you\nuse, and a cost. So in this table,\nif node B or switch",
    "start": "441560",
    "end": "446910"
  },
  {
    "text": "B received a packet\ndestined for destination A, it would use link L1.",
    "start": "446910",
    "end": "453230"
  },
  {
    "text": "Each link is named locally. So B would have its\nown L0, L2, and L1. You know, your own computer\nhas a bunch of links.",
    "start": "453230",
    "end": "460427"
  },
  {
    "text": "I don't know what the\ncommand is in Windows, but in all other sensible\nplatforms, if you do IF Config,",
    "start": "460427",
    "end": "466220"
  },
  {
    "text": "you can get it. I think it's called IP\nconfig on a Windows. But you can actually\nsee a list of links. So switches have many,\nmany, many links.",
    "start": "466220",
    "end": "472490"
  },
  {
    "text": "And so you'll find, for\nexample, for destination A you use link L1. The cost is 18.",
    "start": "472490",
    "end": "477560"
  },
  {
    "text": "In fact, you'll see here that,\nwhen B receives a packet for A, it doesn't use the direct link\nbecause the direct link has",
    "start": "477560",
    "end": "483950"
  },
  {
    "text": "a cost of 19, whereas\ngoing through L1, this link has a cost of 11.",
    "start": "483950",
    "end": "489080"
  },
  {
    "text": "And if B believes that the\npath toward A along this link",
    "start": "489080",
    "end": "494720"
  },
  {
    "text": "has a cost of 11 plus 7 is\n18, that's what it thinks. And, therefore, it\nwould use that link. ",
    "start": "494720",
    "end": "502210"
  },
  {
    "text": "OK? It's very simple. Now, routing is the\nprocess by which these different nodes\ntalk to each other and build up these tables.",
    "start": "502210",
    "end": "510350"
  },
  {
    "text": "When I say a route to a\ndestination, I mean this. I mean the route to a\ndestination at a switch",
    "start": "510350",
    "end": "517549"
  },
  {
    "text": "or at a node is the link\nthat that destination would use to send packets\nto the destination.",
    "start": "517549",
    "end": "524850"
  },
  {
    "text": "This is important\ntechnically for us. Because, otherwise, we\nwill get all tangled up getting confused between\nroutes and paths.",
    "start": "524850",
    "end": "532240"
  },
  {
    "text": "OK. For the purposes\nof our discussion, a route is the next\nhop link, is the link that you're going to use\nto get to the destination.",
    "start": "532240",
    "end": "538580"
  },
  {
    "text": "The path is a sequence of links. So I don't want people telling\nme that the route from B to E",
    "start": "538580",
    "end": "543920"
  },
  {
    "text": "is whatever, is BCE. I'd like people to tell me\nthat the route at node B",
    "start": "543920",
    "end": "551310"
  },
  {
    "text": "to destination E is L1. Or if you wish to\nbe clear, you can say, it's link L1 which\ntakes it to next hop",
    "start": "551310",
    "end": "558770"
  },
  {
    "text": "C. The path from B\nto E might BCE, OK? ",
    "start": "558770",
    "end": "567070"
  },
  {
    "text": "All right, so that's what\nthe routing table structure looks like. And we're interested\nin minimum cost paths",
    "start": "567070",
    "end": "573070"
  },
  {
    "text": "to go from places to places. So normally, traditionally,\nwe sit around",
    "start": "573070",
    "end": "578079"
  },
  {
    "text": "and try to now dive\ninto protocols. But I think here what\nwe're going to do is since our notes are all\nso nice and written up,",
    "start": "578080",
    "end": "585063"
  },
  {
    "text": "I actually don't have to tell\nyou everything that's there. So what we're\nactually going to do is something we call\nthe routing game, which",
    "start": "585063",
    "end": "592509"
  },
  {
    "start": "589000",
    "end": "864000"
  },
  {
    "text": "is an experiment in\nsocial networking. What it means is that\neach of you or some of you",
    "start": "592510",
    "end": "598180"
  },
  {
    "text": "will act as nodes and\nstart computing routes to different destinations.",
    "start": "598180",
    "end": "604007"
  },
  {
    "text": "OK, so that's what this\ngame is going to be. So what I have in my hand\nis 40 slips of paper.",
    "start": "604007",
    "end": "609520"
  },
  {
    "text": "And I hope there are 40 people\nhere, 40 slips of paper. And each of these slips of\npaper has some information",
    "start": "609520",
    "end": "617920"
  },
  {
    "text": "that looks like this. ",
    "start": "617920",
    "end": "623420"
  },
  {
    "text": "It says you are node X, and\nyou're connected to nodes Y, Z, W, et cetera, OK?",
    "start": "623420",
    "end": "629470"
  },
  {
    "text": "And there's a set of rules that\nI will go through in a minute. First of all, these were\nall in perfect order.",
    "start": "629470",
    "end": "636339"
  },
  {
    "text": "So I need to shuffle them a few\ntimes carefully without losing them. I think Perci Diaconis,\nthe famous probabilist,",
    "start": "636340",
    "end": "642850"
  },
  {
    "text": "said that you've got\nto do this seven times. Maybe this is close to seven.",
    "start": "642850",
    "end": "648200"
  },
  {
    "text": "OK. So what I'm going to do is\nI'm going to pass this around. There's no bag here. The bag's cumbersome.",
    "start": "648200",
    "end": "654110"
  },
  {
    "text": "So what I'd like you\nto do-- actually, I'll put it in the envelope\nand pass it around. Just kind of close\nyour eyes or something. Don't look at the number.",
    "start": "654110",
    "end": "659710"
  },
  {
    "text": "And just pick one up. And don't look at it\nuntil I tell you, OK? So we'll start here and\njust pass it around.",
    "start": "659710",
    "end": "665050"
  },
  {
    "text": "I'd like 40 different\npeople to have them. You don't have to feel\ncompelled to take it, but just",
    "start": "665050",
    "end": "670450"
  },
  {
    "text": "pass it around. And try to do it\nquickly because I'd like that to happen faster than\nthe time it's going to take",
    "start": "670450",
    "end": "675820"
  },
  {
    "text": "for us to compute these routes. So why don't you just pick\none sheet of paper up and just pass it around, please?",
    "start": "675820",
    "end": "682000"
  },
  {
    "text": "OK, so I picked 7 minutes. It sometimes works a\nlittle faster than 7.",
    "start": "682000",
    "end": "687530"
  },
  {
    "text": "The best that the class has\ndone is about 5 minutes. Last time, they did it very\nquickly, but they got it wrong.",
    "start": "687530",
    "end": "694790"
  },
  {
    "text": "So I don't think that counts. But I've been told\nthat they've tried this experiment at Berkeley. It's taken usually\nmore than 7 minutes.",
    "start": "694790",
    "end": "701577"
  },
  {
    "text": "And I figure MIT\nstudents are smarter. So let's see if you can do\nit faster than 7 minutes.",
    "start": "701577",
    "end": "708100"
  },
  {
    "text": "Now, your job is to find\na path from a source node to a destination node\nas quickly as possible, OK?",
    "start": "708100",
    "end": "715790"
  },
  {
    "text": "And I mean, as a\nbonus, if you actually find the path with the\nminimum number of hops, that's even better, but\nwe'll take any path.",
    "start": "715790",
    "end": "724662"
  },
  {
    "text": "Now, there's some rules here. ",
    "start": "724662",
    "end": "730908"
  },
  {
    "text": "Now, there are some rules here. So you may not\nactually kind of get up and run around and try to do\nthings that a normal network",
    "start": "730908",
    "end": "737210"
  },
  {
    "text": "switch wouldn't do. So you're allowed to\nstay in one place. And what you're\nactually allowed to do",
    "start": "737210",
    "end": "743258"
  },
  {
    "text": "is you're not allowed to\npass your sheet of paper to other people because you\nhave information about yourself. And that piece tells you\nwho your neighbors are,",
    "start": "743258",
    "end": "750100"
  },
  {
    "text": "the numbers of your neighbors. So you can't actually kind\nof send your piece of paper to other nodes. That's not allowed.",
    "start": "750100",
    "end": "756070"
  },
  {
    "text": "And don't let people copy\nwhat's on your sheet of paper. Now, here's some\nthings you can do.",
    "start": "756070",
    "end": "762050"
  },
  {
    "text": "You can read them. Ask your friends for advice. You can shout to\nother participants. We're allowing you\nto yell and scream,",
    "start": "762050",
    "end": "769120"
  },
  {
    "text": "but do so in a way that's\nsomewhat civilized. And you can wish that\nyou didn't pick up a slip",
    "start": "769120",
    "end": "774550"
  },
  {
    "text": "or pick up a slip or whatever. But try to act generally-- I mean, this class is recorded. So you know, what you\nsay might be heard.",
    "start": "774550",
    "end": "781600"
  },
  {
    "text": "Now, if you get a slip,\nthere's some ground rules. You can't cheat. We're not dealing\nwith security here",
    "start": "781600",
    "end": "787360"
  },
  {
    "text": "where a node that's 17\nand connected to 27 and 29 tells people that it's 14. I mean, you don't want that.",
    "start": "787360",
    "end": "792580"
  },
  {
    "text": "It's hard enough to do\nwhen you tell the truth. So don't cheat. There's probably\na variant of this",
    "start": "792580",
    "end": "798250"
  },
  {
    "text": "we can come up with where\nsome fraction of the nodes are adversarial and one can't\nsee if this stuff even works. But right now, don't cheat.",
    "start": "798250",
    "end": "804735"
  },
  {
    "text": "If you've got a\nslip, you kind of have to really try to\nparticipate in whatever protocol you come up with.",
    "start": "804735",
    "end": "810040"
  },
  {
    "text": "And this experiment has no\nhuman subjects approval. ",
    "start": "810040",
    "end": "815540"
  },
  {
    "text": "OK. So who has the envelope? Is it empty?",
    "start": "815540",
    "end": "821800"
  },
  {
    "text": "Oh my goodness, it's\n7 minutes already. Let's move it around. ",
    "start": "821800",
    "end": "829399"
  },
  {
    "text": "OK. When the envelope gets empty,\nwe can start this thing. So we should try\nto move it along.",
    "start": "829400",
    "end": "835456"
  },
  {
    "text": "Is everyone clear on the rules? What you're trying to do is to\nfind a path between the source",
    "start": "835456",
    "end": "840910"
  },
  {
    "text": "node, which was numbered\n1, and the destination node that was numbered 40. The source and the destination\nknow who they each are.",
    "start": "840910",
    "end": "847113"
  },
  {
    "text": "And then we're\njust going to wait. This is the easiest\nlecture to prepare for because I just have to\nkeep quiet for a few minutes.",
    "start": "847113",
    "end": "854120"
  },
  {
    "text": "OK. And if things don't work\nout or things don't work, whatever it is, I'm\nassuming that you'll come up with some variant of\na reasonable routing protocol.",
    "start": "854120",
    "end": "860800"
  },
  {
    "text": "And odds are, it'll\nbe a variant of one of the ones we're\ngoing to study. You know, the gentleman\nhere who suggested",
    "start": "860800",
    "end": "867100"
  },
  {
    "text": "something was a reasonable\nidea, which is you go and you pick one\nneighbor and you go through.",
    "start": "867100",
    "end": "874113"
  },
  {
    "text": "But you get stuck in a\nloop, and then the idea is you come back\nto where you start. And then you go\nthrough the next. And that principle\ncould work, but you",
    "start": "874113",
    "end": "881083"
  },
  {
    "text": "got to remember a lot of stuff\nand tends to make mistakes. And in fact, this\nwas an easy network where every node had one,\ntwo, or three neighbors.",
    "start": "881083",
    "end": "887680"
  },
  {
    "text": "I mean, there's a few with\nmore, but most of them had a small number of neighbors. What you guys were\ngoing after was a sort of better plan,\nwhich everybody yells out",
    "start": "887680",
    "end": "893980"
  },
  {
    "text": "their neighbors. And then they yell out their\nneighbors and their neighbors and so forth. And that particular protocol\nhas a nice name to it.",
    "start": "893980",
    "end": "899800"
  },
  {
    "text": "It's called link-state routing,\nwhere you broadcast and flood",
    "start": "899800",
    "end": "904959"
  },
  {
    "text": "your own neighbor\ninformation, OK? That's the second of the two\nprotocols we're going to study.",
    "start": "904960",
    "end": "910930"
  },
  {
    "start": "907000",
    "end": "1266000"
  },
  {
    "text": "What you were trying to go\nafter was link-state routing. Now, the first protocol\nwe're going to study",
    "start": "910930",
    "end": "919235"
  },
  {
    "text": "has a different name to it. It's called distance\nvector routing. ",
    "start": "919235",
    "end": "927200"
  },
  {
    "text": "And these are the two routing\nprotocols we're going to study. Almost all routing\nprotocols in practice are variants of either\na vector protocol or one",
    "start": "927200",
    "end": "935160"
  },
  {
    "text": "of these link-state protocols. There's lots of variance. And there's hundreds\nof routing protocols,",
    "start": "935160",
    "end": "941260"
  },
  {
    "text": "but these cover\nthe main concepts. So let me tell you how\ndistance vector protocols",
    "start": "941260",
    "end": "947820"
  },
  {
    "text": "or how these vector\nprotocols work. They're a little different\nfrom the kind of approach you were going after in\nsolving this problem.",
    "start": "947820",
    "end": "956350"
  },
  {
    "text": "Had you gone after an\napproach where you started at the destination, at 40--",
    "start": "956350",
    "end": "963029"
  },
  {
    "text": "and 40 simply said, I'm 40. And then the neighbors next to\n40 then said, I'm connected 40.",
    "start": "963030",
    "end": "971650"
  },
  {
    "text": "To get to 40, come through me. And the cost is, let's\nsay, whatever the cost",
    "start": "971650",
    "end": "976780"
  },
  {
    "text": "of their link to 40 is, right? Then, now, initially, nodes\nonly knew about themselves.",
    "start": "976780",
    "end": "982990"
  },
  {
    "text": "But, now, you have\na destination. And you have a\nset of nodes going to get to the destination. Let's call these nodes-- ",
    "start": "982990",
    "end": "990700"
  },
  {
    "text": "let's just say n1, n2, and n3.",
    "start": "990700",
    "end": "996100"
  },
  {
    "text": "Initially, the only thing\nthat D says is I am D. And it says that to its\nneighbors along these links.",
    "start": "996100",
    "end": "1002580"
  },
  {
    "text": " This saying has a name to it. It's an advertisement.",
    "start": "1002580",
    "end": "1009193"
  },
  {
    "text": " Now, when anyone hears\nabout destination D,",
    "start": "1009193",
    "end": "1017140"
  },
  {
    "text": "it can do the same\nthing to its neighbors. ",
    "start": "1017140",
    "end": "1022580"
  },
  {
    "text": "So let's say these\nare n4 and n5 here. What n1 can do is to\nsay that, to get to D,",
    "start": "1022580",
    "end": "1029829"
  },
  {
    "text": "let's imagine that\nthis cost here is 6. So D says, I'm D. And\nthe cost to get to me",
    "start": "1029829",
    "end": "1036099"
  },
  {
    "text": "is 0 because I'm D. n1 here's that. And it says, I'm n1.",
    "start": "1036099",
    "end": "1043000"
  },
  {
    "text": "That's true. But to get to D, come\nthrough me and the cost is 6. So it now puts\nout advertisements",
    "start": "1043000",
    "end": "1048670"
  },
  {
    "text": "along these links. But it says, D:6, D:6, D:6,\nwhere 6 is the cost of that",
    "start": "1048670",
    "end": "1060910"
  },
  {
    "text": "link. Now, let's imagine that\nthese other links have cost. So let's say this\nlink has a cost of 8.",
    "start": "1060910",
    "end": "1067570"
  },
  {
    "text": "This link has a cost of 2. Let's say this link\nhas a cost of 9.",
    "start": "1067570",
    "end": "1073830"
  },
  {
    "text": "Sorry, I should\ndraw this better. Let's put a 9 here. So the link cost is 8. The link cost is 9.",
    "start": "1073830",
    "end": "1078850"
  },
  {
    "text": "And the link cost is 2. And let's say for a minute here\nthat this cost of this link is 10.",
    "start": "1078850",
    "end": "1085570"
  },
  {
    "text": "Now, n1 advertises to\neverybody saying, to get to D,",
    "start": "1085570",
    "end": "1090659"
  },
  {
    "text": "the cost is 6. To get to D, the cost to 6. And to get to D, the cost of 6. Each of those guys, when\nthey get this information,",
    "start": "1090660",
    "end": "1097950"
  },
  {
    "text": "now know that they can get\na route to destination D.",
    "start": "1097950",
    "end": "1104250"
  },
  {
    "text": "Because now n4 knows that, if\nit used this link to get to D, the cost would be 6 plus\nthe cost of that link.",
    "start": "1104250",
    "end": "1113250"
  },
  {
    "text": "So it's 14. So it would have a routing table\nentry that says D is cost 14.",
    "start": "1113250",
    "end": "1119107"
  },
  {
    "text": "And of course, its\nrouting table entry would have an entry saying this\nis the link that it should use.",
    "start": "1119107",
    "end": "1125370"
  },
  {
    "text": "Similarly, n5 here\nwould take destination D",
    "start": "1125370",
    "end": "1131720"
  },
  {
    "text": "and say that the\ncost to destination D is 9 plus the\nadvertisement, which was 6.",
    "start": "1131720",
    "end": "1137360"
  },
  {
    "text": "And so it would say D is 15. And n2, which previously\nhad it a route to D, which",
    "start": "1137360",
    "end": "1144200"
  },
  {
    "text": "was this link at cost 10, would\nlook at this new advertisement coming in here saying that\nthe cost on this from n1 is 6.",
    "start": "1144200",
    "end": "1154529"
  },
  {
    "text": "Add that cost to the cost\nof the link, which is 2, and have now a different way\nto get to D whose cost is 8.",
    "start": "1154530",
    "end": "1162559"
  },
  {
    "text": "And compare that\ncost against the cost it previously held\nto destination D. And because we're interested\nin minimum cost routing,",
    "start": "1162560",
    "end": "1170059"
  },
  {
    "text": "8 is smaller than 10. So n2, which previously had a\ncost to destination D of 10,",
    "start": "1170060",
    "end": "1176659"
  },
  {
    "text": "would throw that route out\nand replace it with a route to destination D\ngoing along this link",
    "start": "1176660",
    "end": "1184160"
  },
  {
    "text": "with the cost of, now, 8,\nwhich is smaller than 10. And this process just continues\nthrough as it goes along.",
    "start": "1184160",
    "end": "1191820"
  },
  {
    "text": "So you might end up in a\nsituation quite easily, as we just went through here,\nwhere, let's say, n3 were connected to n5.",
    "start": "1191820",
    "end": "1198260"
  },
  {
    "text": "If this link had a\ncost of 1 and this link had a cost of 4,\nwhat would eventually happen is that n5, which\nended up with a cost of 15",
    "start": "1198260",
    "end": "1205760"
  },
  {
    "text": "to go like that,\nwould, when it hears an advertisement from\nthis node, replace that route with a cost of 4\nand use this link as its route",
    "start": "1205760",
    "end": "1214429"
  },
  {
    "text": "to get to destination D. And\nthis process just continues until everybody has\ninitially some route to D.",
    "start": "1214430",
    "end": "1221510"
  },
  {
    "text": "And then if the process\ncontinues a little bit longer, everybody will have a\nminimum cost route to D.",
    "start": "1221510",
    "end": "1228320"
  },
  {
    "text": "This step, where nodes\nevaluate an advertisement that they hear\nabout a destination",
    "start": "1228320",
    "end": "1235559"
  },
  {
    "text": "against their current\nroute and the current cost to the destination,\nand replace it",
    "start": "1235560",
    "end": "1241460"
  },
  {
    "text": "if they end up finding\na route with smaller cost or an advertisement\nwith smaller cost, when",
    "start": "1241460",
    "end": "1248998"
  },
  {
    "text": "the cost you have to compare is\nthe cost of the advertisement plus the cost of the link along\nwhich that advertisement came",
    "start": "1248998",
    "end": "1255440"
  },
  {
    "text": "and you compare that\ncost against the cost of the route you already\nhold, if it's smaller, you replace it.",
    "start": "1255440",
    "end": "1261290"
  },
  {
    "text": "That algorithm is called the\nBellman-Ford for algorithm.",
    "start": "1261290",
    "end": "1266310"
  },
  {
    "start": "1266000",
    "end": "1511000"
  },
  {
    "text": "And you might have seen\ncentralized implementations of shortest path routing\nusing this algorithm.",
    "start": "1266310",
    "end": "1271680"
  },
  {
    "text": "And if you have, it\nactually turns out it's a little less efficient\nthan another algorithm, another one we'll the\nstudy called Dijkstra,",
    "start": "1271680",
    "end": "1278299"
  },
  {
    "text": "if you're doing it centralized. But it's very, very elegant\nelegant for distributed computation because the routes\nto different destinations",
    "start": "1278300",
    "end": "1285950"
  },
  {
    "text": "are being computed in a\ncompletely distributed way. These nodes far away\nhere have no idea",
    "start": "1285950",
    "end": "1291680"
  },
  {
    "text": "what the network\ntopology looks like. They couldn't even reconstruct\nthe network topology. The best they could do\nis to find their own way",
    "start": "1291680",
    "end": "1297748"
  },
  {
    "text": "to get their linked to use. The only information\nthey have is what they hear from their neighbors.",
    "start": "1297748",
    "end": "1303080"
  },
  {
    "text": "But, yet, they're\nable to find an answer because all they have\nto do is to listen to all their neighbors and,\namong the set of neighbors,",
    "start": "1303080",
    "end": "1310820"
  },
  {
    "text": "pick that neighbor\nwho's advertised cost plus the cost of\nthe link to that neighbor",
    "start": "1310820",
    "end": "1317630"
  },
  {
    "text": "is minimum across\nall of the neighbors. So the computation\nthat's being done is a very simple computation.",
    "start": "1317630",
    "end": "1323509"
  },
  {
    "text": "It's a very elegant\ncomputation, which is the min over all of the\nneighbors of the link cost LIJ",
    "start": "1323510",
    "end": "1330890"
  },
  {
    "text": "plus the advertised cost from J\nwhere the minimum is done over that all J, where J is\nthe set of neighbors of I.",
    "start": "1330890",
    "end": "1342500"
  },
  {
    "text": "So you minimize over the\nset of the neighbors. Each node I does this. You minimize over the\nset of neighbors J of I.",
    "start": "1342500",
    "end": "1349650"
  },
  {
    "text": "The link cost from I to J\nplus the advertised cost to destination D of J.",
    "start": "1349650",
    "end": "1356950"
  },
  {
    "text": "And you take the minimum cost. That's the minimum cost. And then you take the link\ncorresponding to that neighbor. And that's the\nroute that you use.",
    "start": "1356950",
    "end": "1363247"
  },
  {
    "text": " Now, this algorithm gets\nmore complicated and tricky",
    "start": "1363247",
    "end": "1369400"
  },
  {
    "text": "to argue that it's correct\nwhen there are failures. But today, there\nare no failures. ",
    "start": "1369400",
    "end": "1375562"
  },
  {
    "text": "There's another wrinkle\nin the algorithm, which is I mentioned that what are the\nconditions under which a node",
    "start": "1375562",
    "end": "1382860"
  },
  {
    "text": "changes its route\nto a destination. So I went through one rule.",
    "start": "1382860",
    "end": "1388320"
  },
  {
    "text": "I mentioned a rule that\nsaid, if the current route to the destination does\nnot exist, in which case",
    "start": "1388320",
    "end": "1394860"
  },
  {
    "text": "the cost is assumed\nto be infinity, or if the current cost\nto the destination",
    "start": "1394860",
    "end": "1400770"
  },
  {
    "text": "is smaller than the cost of\nthe advertisement plus the cost of the link along which\nthe advertisement came,",
    "start": "1400770",
    "end": "1407309"
  },
  {
    "text": "then you replace the\nroute to the destination. But there's actually\none other condition",
    "start": "1407310",
    "end": "1412410"
  },
  {
    "text": "under which you should replace\nthat route to the destination. ",
    "start": "1412410",
    "end": "1418840"
  },
  {
    "text": "Yeah. AUDIENCE: [INAUDIBLE] HARI BALAKRISHNAN:\nIf it's equal, well, technically, you don't\nhave to replace it.",
    "start": "1418840",
    "end": "1425410"
  },
  {
    "text": "You still have a\ngood path, right? You could replace it,\nbut it doesn't matter. There might be a\ncase where you have",
    "start": "1425410",
    "end": "1430620"
  },
  {
    "text": "to replace the link,\nthe route, when in fact the cost increases.",
    "start": "1430620",
    "end": "1438000"
  },
  {
    "text": "There might be a case where\nyou have a current cost to the destination\nand some current route",
    "start": "1438000",
    "end": "1445068"
  },
  {
    "text": "to the destination. And you hear an\nadvertisement, and you take that advertisement. And you add the link cost,\nand you find a bigger number.",
    "start": "1445068",
    "end": "1450600"
  },
  {
    "text": "And you might sometimes\nhave to replace it. ",
    "start": "1450600",
    "end": "1455760"
  },
  {
    "text": "Yes. AUDIENCE: [INAUDIBLE]",
    "start": "1455760",
    "end": "1463357"
  },
  {
    "text": "HARI BALAKRISHNAN: Right. It could be that what's going\non here is that the cost to the destination, a link--",
    "start": "1463358",
    "end": "1470100"
  },
  {
    "text": "I previously told you that my\ncost to the destination is 17. And, now, I've changed my mind. I tell you that\nit's actually 19.",
    "start": "1470100",
    "end": "1476045"
  },
  {
    "text": "And I could change my mind\nfor a variety of reasons usually having to\ndo with failure. So I guess this is a little\nbit of a cheating question",
    "start": "1476045",
    "end": "1481650"
  },
  {
    "text": "because I told you\nthere's no failures. But it could be that\nperhaps the cost of a link",
    "start": "1481650",
    "end": "1487092"
  },
  {
    "text": "changed because it became\nmore expensive or something like that. And that's the only\nsort of case you have to worry about where\na cost of the advertisement",
    "start": "1487092",
    "end": "1494550"
  },
  {
    "text": "could increase. And if that cost increases\nalong your current route,",
    "start": "1494550",
    "end": "1500070"
  },
  {
    "text": "like you think that the route\nto the destination is 17, the cost is 17, but in\nfact, it turns out to be 24.",
    "start": "1500070",
    "end": "1506657"
  },
  {
    "text": "That's the time when you\nhave to change your entry in the routing table. You have to change the\ncost associated with it.",
    "start": "1506657",
    "end": "1511900"
  },
  {
    "start": "1511000",
    "end": "2012000"
  },
  {
    "text": "But, otherwise, it's basically\nthat's the algorithm. And it's summarized\nover in this chart here.",
    "start": "1511900",
    "end": "1519750"
  },
  {
    "text": "And I've gone through\npretty much all of it. Does anyone have any questions?",
    "start": "1519750",
    "end": "1526146"
  },
  {
    "text": " No questions?",
    "start": "1526146",
    "end": "1532900"
  },
  {
    "text": "How long does it take before\nevery node in the network-- actually, before I get\nto that, the reason",
    "start": "1532900",
    "end": "1539289"
  },
  {
    "text": "it's called a\nvector protocol is I showed you a picture\nfor one destination. But in fact, each\nswitch or each node",
    "start": "1539290",
    "end": "1546309"
  },
  {
    "text": "does it for all destinations. So the general form of a\ndistance vector advertisement",
    "start": "1546310",
    "end": "1553990"
  },
  {
    "text": "looks like this. It has a destination,\ndestination 1 colon cost 1,",
    "start": "1553990",
    "end": "1562150"
  },
  {
    "text": "destination 2 colon cost 2,\ndestination 3 colon cost 3,",
    "start": "1562150",
    "end": "1567340"
  },
  {
    "text": "and so forth for\nall the destinations to which you have a cost. And initially when\nyou start, you",
    "start": "1567340",
    "end": "1572483"
  },
  {
    "text": "don't know about any\nof the other nodes. If you have a route to some\ndestination in general, then there's some cost\nassociated with it.",
    "start": "1572483",
    "end": "1579130"
  },
  {
    "text": "If you know about a destination\nbut have no route to it, the cost is infinity. It'll turn out next week we'll\nfind that the value of infinity",
    "start": "1579130",
    "end": "1587020"
  },
  {
    "text": "in this network has\nto be pretty small, but that's because\nthis algorithm is not the world's best algorithm\nfor big networks.",
    "start": "1587020",
    "end": "1593960"
  },
  {
    "text": "And I'll explain why infinity\nhas to be a small number, but theoretically we can\nassume it's infinite.",
    "start": "1593960",
    "end": "1601733"
  },
  {
    "text": "The reason it's called\na vector protocol is because the advertisements\nare a vector of destination",
    "start": "1601733",
    "end": "1607060"
  },
  {
    "text": "cost tuples. And so you send\nthese tuples around. And this is a vector\nof these tuples. And, hence, this is\ncalled a vector protocol.",
    "start": "1607060",
    "end": "1613750"
  },
  {
    "text": "It really should be called\ncost vector protocol. But initially, they ran this\nthing where all of the links had cost of 1.",
    "start": "1613750",
    "end": "1619960"
  },
  {
    "text": "And, therefore, they\nwere minimizing distance. And the name stuck. But if we wanted to\nbe perfectly precise,",
    "start": "1619960",
    "end": "1625188"
  },
  {
    "text": "we would say cost vector. But then no one\nelse in the world would understand what you meant. So we say distance vector.",
    "start": "1625188",
    "end": "1631590"
  },
  {
    "text": "OK, any questions? All right, for some\ndestination, how long",
    "start": "1631590",
    "end": "1638945"
  },
  {
    "text": "does it take before\nevery node in the network has a route to that destination?",
    "start": "1638945",
    "end": "1644309"
  },
  {
    "text": "By how long, I mean, how\nmany advertisement cycles do you have to go through? How many of these\nadvertisements?",
    "start": "1644310",
    "end": "1650720"
  },
  {
    "text": "Let's say that the way\nour world is going to work is initially every\nnode advertises its own advertisement to itself.",
    "start": "1650720",
    "end": "1657679"
  },
  {
    "text": "Then at the next\ntime step, every node advertises the routes\nthat it knows about. And then it does\nthat periodically.",
    "start": "1657680",
    "end": "1663650"
  },
  {
    "text": "So let's say that, every t\nseconds, a node sends out an advertisement where an\nadvertisement basically",
    "start": "1663650",
    "end": "1668960"
  },
  {
    "text": "contains this vector of tuples\nfor all of the destination",
    "start": "1668960",
    "end": "1674330"
  },
  {
    "text": "it knows about, right? So let me explain\nthis protocol again, and then I'll ask\nyou the question.",
    "start": "1674330",
    "end": "1680149"
  },
  {
    "text": "The protocol is very simple. Every t seconds, what\nthe node is doing",
    "start": "1680150",
    "end": "1689990"
  },
  {
    "text": "is looking at two columns\nin its routing table. It's looking at the destination\ncolumn and the cost column.",
    "start": "1689990",
    "end": "1695390"
  },
  {
    "text": "And it's just taking\nthat information out. And it sends out\nan advertisement,",
    "start": "1695390",
    "end": "1700790"
  },
  {
    "text": "the distance vector\nadvertisement, every t seconds.",
    "start": "1700790",
    "end": "1706190"
  },
  {
    "text": "How long does it take? Now, let's focus on one\ndestination D, some destination D in the network.",
    "start": "1706190",
    "end": "1711320"
  },
  {
    "text": "And you have some network. How long does it take\nbefore every node has some route to the destination?",
    "start": "1711320",
    "end": "1717350"
  },
  {
    "text": "Yes. AUDIENCE: [INAUDIBLE] up to\nthe number of [INAUDIBLE].. HARI BALAKRISHNAN: Up to the\nnumber of edges in my network?",
    "start": "1717350",
    "end": "1724410"
  },
  {
    "text": "AUDIENCE: Yeah, because\nif you're [INAUDIBLE].. HARI BALAKRISHNAN: All right. So let's say you have a\nnetwork that looks like this.",
    "start": "1724410",
    "end": "1730008"
  },
  {
    "start": "1730008",
    "end": "1736045"
  },
  {
    "text": "How long does it take\nbefore every node has a route to destination D? AUDIENCE: So in that\ncase, it only takes one-- HARI BALAKRISHNAN: Therefore--",
    "start": "1736045",
    "end": "1742190"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] worst\ncase everything is in a line. HARI BALAKRISHNAN:\nWell, I'm asking for an answer that holds\nfor all networks, not for--",
    "start": "1742190",
    "end": "1747567"
  },
  {
    "text": "AUDIENCE: Oh, OK. What do you call the worst\ncase, like how fast [INAUDIBLE].. HARI BALAKRISHNAN:\nSure, in the worst case, it could-- well, yes.",
    "start": "1747567",
    "end": "1756090"
  },
  {
    "text": "In the absolute worst\ncase, it is true that it'll always take time\nsmaller than the number of edges in the network. But you can come up with\na much better bound.",
    "start": "1756090",
    "end": "1763122"
  },
  {
    "text": "So let's try to\ncome up-- yes, sir. AUDIENCE: What if you did the\nnumber of nodes [INAUDIBLE] longest length chain?",
    "start": "1763122",
    "end": "1768752"
  },
  {
    "text": "HARI BALAKRISHNAN:\nLongest length chain, so that's not completely true. Longest, what kind\nof longest length?",
    "start": "1768753",
    "end": "1774930"
  },
  {
    "text": "So another counter\nexample, let's say that I have this network. The longest length chain\nis 1, 2, 3, 4, 5, 6.",
    "start": "1774930",
    "end": "1783397"
  },
  {
    "text": "But, yet, you guys just\ntold me that, in one shot, you get the answer. So you have to clarify what\nyou meant a little bit.",
    "start": "1783397",
    "end": "1790590"
  },
  {
    "text": "You're almost right. [INTERPOSING VOICES] AUDIENCE: In this cast, it\nmight actually be 6, right?",
    "start": "1790590",
    "end": "1797226"
  },
  {
    "text": "Because you want to find\nthat path of the top one and the bottom one? HARI BALAKRISHNAN:\nI said find a path or find a route,\nnot the best route.",
    "start": "1797226",
    "end": "1803120"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] HARI BALAKRISHNAN:\nHow long does it take to find a route in a network? You said this almost.",
    "start": "1803120",
    "end": "1808570"
  },
  {
    "text": "The longest path-- but it's\nnot quite the longest path. It's the longest something path.",
    "start": "1808570",
    "end": "1813670"
  },
  {
    "text": "Yes? AUDIENCE: [INAUDIBLE] HARI BALAKRISHNAN: The\nlongest shortest path, that is the the\nlongest path when",
    "start": "1813670",
    "end": "1820540"
  },
  {
    "text": "you compute the\nlongest over all paths with a minimum number of hops\nbetween one place to another. That's also called the\ndiameter of the network.",
    "start": "1820540",
    "end": "1827140"
  },
  {
    "text": "OK? Yes? Yes? OK. All right, now, that's the time\nit takes a multiplied by t.",
    "start": "1827140",
    "end": "1835020"
  },
  {
    "text": "And I might be off by 1. You know, it's that minus 1. Actually, it's not. It is the number of hops along\nthe longest shortest path.",
    "start": "1835020",
    "end": "1843150"
  },
  {
    "text": "Now, how long does it take\nto find the minimum cost",
    "start": "1843150",
    "end": "1848730"
  },
  {
    "text": "path to some destination\nD at all of the nodes? ",
    "start": "1848730",
    "end": "1857548"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE] HARI BALAKRISHNAN: What? AUDIENCE: [INAUDIBLE] HARI BALAKRISHNAN:\nt times-- no, that's",
    "start": "1857548",
    "end": "1863330"
  },
  {
    "text": "true that you can\nfind it within that. That's too long. So I'm going to come\nback to this question.",
    "start": "1863330",
    "end": "1869570"
  },
  {
    "text": "It's probably answered\nin chapter 18, I think. But we've come back\nto that next time.",
    "start": "1869570",
    "end": "1876040"
  },
  {
    "text": "It'll become a\nlittle bit clearer. But you should think about it. There's a nice, succinct\nanswer to this question. And generally speaking,\nin every quiz,",
    "start": "1876040",
    "end": "1881917"
  },
  {
    "text": "there's some variant\nof this question. So you know, it's not\nexplicit, but there's some story that requires--\nyes, you have an answer?",
    "start": "1881917",
    "end": "1887660"
  },
  {
    "text": "AUDIENCE: No, I have a question. HARI BALAKRISHNAN: Oh, you do. OK. I'll come back to that\nquestion next time. But yes? AUDIENCE: Can you go\nover again what you mean",
    "start": "1887660",
    "end": "1893945"
  },
  {
    "text": "by the longest shortest path? HARI BALAKRISHNAN: Yeah,\nI can go over that. So let's say you have D here.",
    "start": "1893945",
    "end": "1902860"
  },
  {
    "start": "1902860",
    "end": "1908640"
  },
  {
    "text": "You look at this destination\nD. And you look at, from every node, what's\nthe path with the smallest",
    "start": "1908640",
    "end": "1914810"
  },
  {
    "text": "number of hops-- number of hops, not cost-- to get to that\ndestination, right?",
    "start": "1914810",
    "end": "1920990"
  },
  {
    "text": "For this guy, it's 1, 2, 3. For this guy, it's\n1, 2, 3, et cetera.",
    "start": "1920990",
    "end": "1927679"
  },
  {
    "text": "Whatever that biggest number is\nmultiplied by t is the answer. That's how long it takes before\nevery node hears some path.",
    "start": "1927680",
    "end": "1936420"
  },
  {
    "text": "But it's not quite the right\nanswer for the best path. Because as you saw in this\nexample here, it took us",
    "start": "1936420",
    "end": "1943220"
  },
  {
    "text": "one step before n2 got a\nroute to the destination. But it took us two time steps\nbefore it got its best route",
    "start": "1943220",
    "end": "1950000"
  },
  {
    "text": "to the destination. And the reason was\nthat it has something to do with the length of the\nminimum cost path, right?",
    "start": "1950000",
    "end": "1956804"
  },
  {
    "text": "Because in this case, the\nlength of the minimum cost path is 2 plus 6, 8. It took 2 hops, which is\ndifferent from the length",
    "start": "1956805",
    "end": "1963320"
  },
  {
    "text": "of some shortest hop\npath, which was one hop. So if I look at this picture,\nn2 hears about some route",
    "start": "1963320",
    "end": "1969120"
  },
  {
    "text": "to the destination in\nthe first advertisement. But then to find its best\nroute to the destination",
    "start": "1969120",
    "end": "1974750"
  },
  {
    "text": "requires us to\nactually wait around until we find this 2 plus\n6 path, which took 2 hops.",
    "start": "1974750",
    "end": "1981169"
  },
  {
    "text": "So it's a little longer, but\nit's not enormously long. It's just a little bit longer. And the answer, of\ncourse, depends.",
    "start": "1981170",
    "end": "1987789"
  },
  {
    "text": "In the worst case, it\ncould be quite long. But it depends on\nthe number of hops along the minimum cost path.",
    "start": "1987790",
    "end": "1994400"
  },
  {
    "text": "And if you minimize\nthat quantity, you'll find the answer\nto the question, how long does it take\nbefore every node finds",
    "start": "1994400",
    "end": "2000520"
  },
  {
    "text": "the minimum cost path\nto the destination. OK, is that clear?",
    "start": "2000520",
    "end": "2006110"
  },
  {
    "text": "Any questions about\ndistance vector? Crystal clear?",
    "start": "2006110",
    "end": "2011330"
  },
  {
    "text": "OK. We'll see when the\nlab comes around. It is crystal.",
    "start": "2011330",
    "end": "2016970"
  },
  {
    "start": "2012000",
    "end": "2201000"
  },
  {
    "text": "Everybody really, really\ndoes well in these labs. And it's a lot of fun\nhacking this stuff up. So you'll implement\nboth protocols.",
    "start": "2016970",
    "end": "2023887"
  },
  {
    "text": "And you'll actually look\nat all sorts of failures. And it'll just be\nsometimes miraculous that it actually works\neven when you didn't",
    "start": "2023887",
    "end": "2029630"
  },
  {
    "text": "consider some failure cases. OK. Now, I'm going to talk\nabout link-state routing. And this is the routing\nprotocol that you guys",
    "start": "2029630",
    "end": "2036629"
  },
  {
    "text": "were sort of attempting\nto implement, attempting to come up with. This is a radically\ndifferent approach",
    "start": "2036630",
    "end": "2044179"
  },
  {
    "text": "from the vector protocols. In a vector protocol,\neverybody advertises, for each destination, a\nvector of tuples where it's",
    "start": "2044180",
    "end": "2052610"
  },
  {
    "text": "the destination and the cost. In a link-state protocol,\nwe don't do that. The link-state protocol does not\ncompute in a distributed way.",
    "start": "2052610",
    "end": "2061129"
  },
  {
    "text": "In a link-state protocol, every\nnode just says, I am node 17. And I'm connected\nto 16, 45, and 44.",
    "start": "2061130",
    "end": "2067669"
  },
  {
    "text": "And the cost of my\nlink to 16 is 7. The cost of my link\nto 45 is something.",
    "start": "2067670",
    "end": "2073340"
  },
  {
    "text": "And my cost of my link to this\nother neighbor that I have is something else. So every node advertises what\nI've shown up on this slide.",
    "start": "2073340",
    "end": "2082100"
  },
  {
    "text": "Every node advertises\na neighbor, its immediate neighbor, and\nthe link cost to that neighbor.",
    "start": "2082100",
    "end": "2088899"
  },
  {
    "text": "OK. In addition, in each of these\nlink-state advertisements, there is a sequence number.",
    "start": "2088900",
    "end": "2095429"
  },
  {
    "text": "The sequence number starts\nat some initial value, like, say, zero. And every time one of these\nlink-state advertisements",
    "start": "2095429",
    "end": "2102050"
  },
  {
    "text": "is sent-- and that's\ndone periodically as well, every t seconds. Every time you send a\nlink-state advertisement,",
    "start": "2102050",
    "end": "2107510"
  },
  {
    "text": "you increment the\nsequence number by one. Now, here's the key step.",
    "start": "2107510",
    "end": "2112670"
  },
  {
    "text": "The key step here is\nthat, if I receive",
    "start": "2112670",
    "end": "2119180"
  },
  {
    "text": "a link-state\nadvertisement from you, I just send that\nto my neighbors.",
    "start": "2119180",
    "end": "2124190"
  },
  {
    "text": "And then my neighbors will\nsend it to their neighbors and so on. So it's a very this\nnice flooding protocol.",
    "start": "2124190",
    "end": "2130400"
  },
  {
    "text": "Every node sends out its\nlink-state advertisement. And every neighbor that receives\nit processes that and then",
    "start": "2130400",
    "end": "2138109"
  },
  {
    "text": "turns around and ships\nit to their neighbors. And they do the same thing to\ntheir neighbors and so forth.",
    "start": "2138110",
    "end": "2144510"
  },
  {
    "text": "Now, when this flooding process\ncompletes and every node is originating its own\nlink-state advertisement-- so you're telling\nthem your neighbors",
    "start": "2144510",
    "end": "2151569"
  },
  {
    "text": "who you're connected to. She's telling her neighbors\nwho she's connected to. And we all do that.",
    "start": "2151570",
    "end": "2156998"
  },
  {
    "text": "And we're all doing\nthis in parallel. It's all happening\nat the same time. And all our neighbors\nare rebroadcasting this.",
    "start": "2156998",
    "end": "2162140"
  },
  {
    "text": "And eventually,\nevery node is going to get one or more copies of\nevery link-state advertisement,",
    "start": "2162140",
    "end": "2168455"
  },
  {
    "text": "which means that every\nnode can now construct an entire map of the network. Every node can construct\nthis entire graph.",
    "start": "2168455",
    "end": "2175369"
  },
  {
    "text": "And once they\nconstruct that graph, every node can implement some\nshortest path routing protocol to compute the paths\nover that graph.",
    "start": "2175370",
    "end": "2182707"
  },
  {
    "text": "This is very different\nfrom the previous protocol. In vector routing\nprotocols, the nodes actually have no idea what the\ntopology of the network is.",
    "start": "2182707",
    "end": "2189470"
  },
  {
    "text": "All they know is they trust\nwhat the neighbors tell them. Here, under the basic\nmodel, every node",
    "start": "2189470",
    "end": "2197540"
  },
  {
    "text": "has complete knowledge of\nthe overall network topology. So let me show this\nby example, and it",
    "start": "2197540",
    "end": "2204799"
  },
  {
    "start": "2201000",
    "end": "2576000"
  },
  {
    "text": "will become completely clear. So let's imagine that this is\nwhat the network looks like.",
    "start": "2204800",
    "end": "2210370"
  },
  {
    "text": "I'm going to show you a\npicture of node F. Node F originates its initial\nlink-state advertisement.",
    "start": "2210370",
    "end": "2216905"
  },
  {
    "text": "And then every advertisement, it\nincrements the sequence number by 1. And it says, I'm connected\nto node G with a cost of 8",
    "start": "2216905",
    "end": "2226220"
  },
  {
    "text": "and to node C with a cost of 2. And it spits it out\nto its neighbors. Each of those neighbors turns\naround and does the same thing.",
    "start": "2226220",
    "end": "2233240"
  },
  {
    "text": "You rebroadcast a link-state\nadvertisement along the links that you are connected to.",
    "start": "2233240",
    "end": "2238970"
  },
  {
    "text": "And they rebroadcast\nit and so forth. And eventually, B gets it. And he broadcasts it,\ntoo, though it was completely useless to do so.",
    "start": "2238970",
    "end": "2245995"
  },
  {
    "text": "Well, not completely. If packets are lost,\nit's pretty useful. Anyway, when this\nflooding completes,",
    "start": "2245995",
    "end": "2251119"
  },
  {
    "text": "which takes some\nnumber of steps, every node now has at least\none-- if no packets are lost,",
    "start": "2251120",
    "end": "2257720"
  },
  {
    "text": "every node has a\nbunch of copies of this link-state advertisement. If packets can get lost, as\nlong as the loss rates are not",
    "start": "2257720",
    "end": "2264050"
  },
  {
    "text": "enormous, every node\nmight have one copy of a link-state advertisement.",
    "start": "2264050",
    "end": "2269270"
  },
  {
    "text": "And, now, every node\noriginates its own link-state advertisement. And, therefore, they end up\nwith a map of the network.",
    "start": "2269270",
    "end": "2275902"
  },
  {
    "text": "By the way, why do we\nhave the sequence number in the link-state advertisement? ",
    "start": "2275903",
    "end": "2283520"
  },
  {
    "text": "Yes? AUDIENCE: I don't know, if F\nbroadcasts its advertisement and something changes and it\nbroadcasts a new advertisement,",
    "start": "2283520",
    "end": "2291010"
  },
  {
    "text": "by the time the two\nadvertisements get to B, you don't know which\none gets there first. So you want to [INAUDIBLE]. HARI BALAKRISHNAN: That\nis one of the two reasons",
    "start": "2291010",
    "end": "2297370"
  },
  {
    "text": "why you have it. That's actually\nthe second reason. And that's a valid reason. But the main reason\nyou have it is",
    "start": "2297370",
    "end": "2302710"
  },
  {
    "text": "that, if C gets a link-state\nadvertisement originating from F with sequence number\n17, and then eventually C",
    "start": "2302710",
    "end": "2310180"
  },
  {
    "text": "is also going to\nget D rebroadcasting that link-state advertisement. Because F sends it this way,\nbut F also sends it this way.",
    "start": "2310180",
    "end": "2317050"
  },
  {
    "text": "And that goes up here,\nand that comes down here. And then D rebroadcasts it. C needs a way of telling whether\nthis link-state advertisement",
    "start": "2317050",
    "end": "2323290"
  },
  {
    "text": "is new or old, right? And the way it tells\nif it's new or old is it considers a\nlink-state advertisement",
    "start": "2323290",
    "end": "2330100"
  },
  {
    "text": "to be new if it's bigger\nthan the last sequence number it received from that origin.",
    "start": "2330100",
    "end": "2336805"
  },
  {
    "text": "So, now, every node has\na map of the network. And, now, we run\nthis integration step where we actually take\nthis map of the network,",
    "start": "2336805",
    "end": "2343720"
  },
  {
    "text": "and we find shortest\npaths to the network. I need a show of hands. How many people know\nhow Dijkstra's algorithm",
    "start": "2343720",
    "end": "2348755"
  },
  {
    "text": "works from class? How many people don't\nknow how it works? All right, what\nI'm going to do is it's described very\nwell in the notes.",
    "start": "2348755",
    "end": "2354790"
  },
  {
    "text": "We'll talk about in\nrecitation tomorrow, but I'm going to\nshow it by example. And then we'll come back\nto this again on Monday.",
    "start": "2354790",
    "end": "2360759"
  },
  {
    "text": "But I'm going to tell you this\nnow because you kind of need it for the lab. And it is described very\nwell in the readings. And we'll do it in\nrecitation as well.",
    "start": "2360760",
    "end": "2367309"
  },
  {
    "text": "So here's how it works. Let's imagine we\nwant to find paths from A to all of the other\nnodes in the network.",
    "start": "2367310",
    "end": "2374270"
  },
  {
    "text": "Now, initially, A doesn't\nknow paths to anyone except for itself. But what A knows is\nthis map of the network.",
    "start": "2374270",
    "end": "2380440"
  },
  {
    "text": "And what A is trying\nto do is to find routes to all the other destinations. The way it does that\nis it keeps building up",
    "start": "2380440",
    "end": "2387100"
  },
  {
    "text": "in non-decreasing order of the\ncost of the minimum cost back to the destination.",
    "start": "2387100",
    "end": "2392530"
  },
  {
    "text": "It starts building up\ninformation about the routes to the different destinations. So initially, it\nlooks at this table.",
    "start": "2392530",
    "end": "2398200"
  },
  {
    "text": "And it says, it's\nconnected to C. And it's to get to\nB with a cost of 6. So what it does is it\nsays, all right, among all",
    "start": "2398200",
    "end": "2404745"
  },
  {
    "text": "of the people out\nhere, I'm going to pull in the person with\nthe minimum cost path.",
    "start": "2404745",
    "end": "2410920"
  },
  {
    "text": "And in this case, it might\njust pick the node C. Because between C\nand B, it doesn't",
    "start": "2410920",
    "end": "2415990"
  },
  {
    "text": "matter which one it picks. Now, the cost to all\nof the other guys is considered to be infinity.",
    "start": "2415990",
    "end": "2423369"
  },
  {
    "text": "So it has costs of 6 and 6,\nso it pulls in one of them without loss of generality. It just picks one of them.",
    "start": "2423370",
    "end": "2429150"
  },
  {
    "text": "And, now, it has\ncosts to both of them. And it says that the route from\nA itself, at A, the route to C",
    "start": "2429150",
    "end": "2434760"
  },
  {
    "text": "is this link. What it then does\nis it goes and looks at all of the neighbors\nconnected to A and C.",
    "start": "2434760",
    "end": "2441230"
  },
  {
    "text": "And in fact, it only has to look\nat the new node it pulled in. And it has to adjust the\ncost of the minimum cost path",
    "start": "2441230",
    "end": "2447210"
  },
  {
    "text": "to the destination\nthat's connected to that. In this case, it\nadjusts from infinity. It brings down the\ncost to D to 13.",
    "start": "2447210",
    "end": "2454440"
  },
  {
    "text": "Because it knows that\nit can get to C in 6. 6 plus 7 is 13. Similarly, it does\nthat for E at 10.",
    "start": "2454440",
    "end": "2461220"
  },
  {
    "text": "And then it does that to F at 8. So, now, it has costs of 6,\n6-- that 6 is already in--",
    "start": "2461220",
    "end": "2467610"
  },
  {
    "text": "6, 13, 10, and 8, and infinity. So, now, it has to decide\nwhat node to pull in next.",
    "start": "2467610",
    "end": "2473130"
  },
  {
    "text": "And it pulls in the node\nwith the minimum cost among the costs that\nyou have so far.",
    "start": "2473130",
    "end": "2478140"
  },
  {
    "text": "And that's this node over here. So it pulls that in\nif my wireless works.",
    "start": "2478140",
    "end": "2484120"
  },
  {
    "text": "There we go. And then once it pulls that\nin, it adjusts the route to that to be that green link.",
    "start": "2484120",
    "end": "2489870"
  },
  {
    "text": "And then it goes ahead and\nlooks at the neighbors of B. And it adjusts the\nshortest path cost.",
    "start": "2489870",
    "end": "2495090"
  },
  {
    "text": "In this case, that\n13 now becomes 11 because 6 plus 5 going through\nB is shorter than 6 plus 7",
    "start": "2495090",
    "end": "2501330"
  },
  {
    "text": "going through C.\nAnd, now, it repeats. It pulls down the minimum. The minimum, in this case, is 8.",
    "start": "2501330",
    "end": "2506520"
  },
  {
    "text": "It pulls in F, makes\nthat be the route to F. Now, the route to\nF is not that link.",
    "start": "2506520",
    "end": "2511830"
  },
  {
    "text": "The route to F is, in fact,\nthis link at the routing table. But it knows that because it\nknows that F is connected to C.",
    "start": "2511830",
    "end": "2518280"
  },
  {
    "text": "And, therefore,\nthe route to F is equal to the route to the\nparent, which is C. Therefore, in its routing table\nentry, it makes the route",
    "start": "2518280",
    "end": "2525210"
  },
  {
    "text": "to F be that link, which\nis exactly the link to C. So that's the subtlety you\nhave to keep in mind when",
    "start": "2525210",
    "end": "2530220"
  },
  {
    "text": "you implement this\nstuff in the lab. It goes ahead and\nadjusts that to 16. It now pulls the minimum,\nwhich will be 10,",
    "start": "2530220",
    "end": "2538690"
  },
  {
    "text": "and then adjusts the cost\nof the guys connected to it. So D changes to 10.",
    "start": "2538690",
    "end": "2544590"
  },
  {
    "text": "And then it now goes ahead\nand pulls the minimum in. In this case, it's D\nwith the cost of 10.",
    "start": "2544590",
    "end": "2551870"
  },
  {
    "text": "That's the link to use. And that link,\ntherefore, the route to D is the same as the route\nto E. The route to E",
    "start": "2551870",
    "end": "2557940"
  },
  {
    "text": "is the same as the route\nto C, which is that link. And, now, you finally\nconclude the algorithm by getting that last node in.",
    "start": "2557940",
    "end": "2564250"
  },
  {
    "text": " So I'm going to stop here. That was Dijkstra's algorithm\nand the two routing protocols.",
    "start": "2564250",
    "end": "2570680"
  },
  {
    "text": "We'll pick it up in\nrecitation tomorrow. ",
    "start": "2570680",
    "end": "2577000"
  }
]