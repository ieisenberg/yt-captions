[
  {
    "text": "[SQUEAKING]\n[RUSTLING] [CLICKING]",
    "start": "0",
    "end": "8568"
  },
  {
    "text": " DAVID PERREAULT: OK why\ndon't we get started? [MIXED CONVERSATIONS]",
    "start": "8568",
    "end": "15136"
  },
  {
    "text": "DAVID PERREAULT: Spring seems to\nbe giving everybody energy here. ",
    "start": "15137",
    "end": "20930"
  },
  {
    "text": "I wanted to continue talking\nabout EMIs and filter design, and most of what\nI'm talking about",
    "start": "20930",
    "end": "28490"
  },
  {
    "text": "is in Principles of Power\nElectronics chapter 26, plus some additional handouts\nthat are going around",
    "start": "28490",
    "end": "37220"
  },
  {
    "text": "and are also posted on Canvas. Just as a reminder, last time\nwe talked a little bit about how",
    "start": "37220",
    "end": "44840"
  },
  {
    "text": "one goes about measuring EMI. And we said, OK, if I\nhave some converter--",
    "start": "44840",
    "end": "50760"
  },
  {
    "text": "it could be a buck converter\nis our canonical example here,",
    "start": "50760",
    "end": "56660"
  },
  {
    "text": "and it's drawing some\nreally pulsating current from its input that's going\nto look like sort of ix",
    "start": "56660",
    "end": "65810"
  },
  {
    "text": "is some big pulsation at the\nswitching frequency, right?",
    "start": "65810",
    "end": "70860"
  },
  {
    "text": "And then I could\nsay, well, maybe I have some input filter that\nmaybe here I'm just going to say",
    "start": "70860",
    "end": "76530"
  },
  {
    "text": "is some capacitor. At minimum, I always\nhave a capacitor here.",
    "start": "76530",
    "end": "82470"
  },
  {
    "text": "And we said, well,\nif I just connected this up to some source\nimpedance, Z sub",
    "start": "82470",
    "end": "88110"
  },
  {
    "text": "s, or some voltage source V\nsub s with a source impedance",
    "start": "88110",
    "end": "93660"
  },
  {
    "text": "Z sub s, I would\nprobably run into trouble with repeatability,\nbecause depending",
    "start": "93660",
    "end": "99300"
  },
  {
    "text": "upon what Z sub s\nlooked like, I would get different voltages, Vx.",
    "start": "99300",
    "end": "105990"
  },
  {
    "text": "And maybe I'll call\nthis current i sub y",
    "start": "105990",
    "end": "112860"
  },
  {
    "text": "on the other side of the filter. And so it's kind of problematic\nfrom a repeatability point",
    "start": "112860",
    "end": "120240"
  },
  {
    "text": "of view. So if I want to test\nto some standards I need some better\nway of basically",
    "start": "120240",
    "end": "126210"
  },
  {
    "text": "controlling the impedance\nwe're looking back into. And so to do that, when we're\ndoing EMI testing alone,",
    "start": "126210",
    "end": "134510"
  },
  {
    "text": "we come and then insert an\nadditional stage in here, which I'll draw in orange.",
    "start": "134510",
    "end": "140810"
  },
  {
    "text": "And this would look like\nsomething like this. I'll have some box that\nis part of my test setup,",
    "start": "140810",
    "end": "150170"
  },
  {
    "text": "called a LISN-- Line Impedance\nStabilization Network. And it will, at minimum,\nhave some L LISN and C LISN.",
    "start": "150170",
    "end": "159280"
  },
  {
    "text": " And then I will connect this\nup to some impedance analyzer",
    "start": "159280",
    "end": "170250"
  },
  {
    "text": "that is usually 50 ohms. So if I looked at the impedance\nlooking back this way, I would--",
    "start": "170250",
    "end": "179970"
  },
  {
    "text": "high EMI frequencies, when\nthis becomes an open circuit and this becomes\na short circuit, I'll look back into\nthe spectrum analyzer",
    "start": "179970",
    "end": "187590"
  },
  {
    "text": "impedance, which\nis usually 50 ohms, and I'll make my tests that way. So we get rid of the\nvariability in the source",
    "start": "187590",
    "end": "196019"
  },
  {
    "text": "impedance for testing\npurposes only by doing that. And I should say,\nthis is actually",
    "start": "196020",
    "end": "203280"
  },
  {
    "text": "a slight simplification. In most systems, you\nactually put a separate LISN",
    "start": "203280",
    "end": "209490"
  },
  {
    "text": "on the hot lead, the power\nlead, and on the ground lead, and you measure the response\nof the LISN on both.",
    "start": "209490",
    "end": "216100"
  },
  {
    "text": "And the usual method\nyou do is you're looking at the frequency content\nof what goes into the spectrum",
    "start": "216100",
    "end": "223050"
  },
  {
    "text": "analyzer here, typically for\nconducting EMI between 150 kilohertz to 30 megahertz.",
    "start": "223050",
    "end": "228820"
  },
  {
    "text": "But that again depends upon the\nstandard you're comparing it to. Some military standards go\ndown to much lower frequencies.",
    "start": "228820",
    "end": "235349"
  },
  {
    "text": "And all the details. What are the LISN values,\nwhat does the test setup look like, et cetera, that's\nall part of a standard",
    "start": "235350",
    "end": "242860"
  },
  {
    "text": "that you adhere to\ntest your converter. ",
    "start": "242860",
    "end": "248392"
  },
  {
    "text": "But what we-- the basic\nidea is as follows.",
    "start": "248392",
    "end": "253940"
  },
  {
    "text": "If I think about I have\nsome ripple frequency. I'll call it ix\ntilde here, which",
    "start": "253940",
    "end": "259570"
  },
  {
    "text": "might be some large signal. I put it back into my filter\ncapacitor, or my filter,",
    "start": "259570",
    "end": "268900"
  },
  {
    "text": "more broadly. Here is just Cf. And then that goes back\ninto some impedance",
    "start": "268900",
    "end": "275710"
  },
  {
    "text": "which, in the test stand only,\nends up looking like our LISN.",
    "start": "275710",
    "end": "282565"
  },
  {
    "text": "And I can measure\neither this current-- I'll call it iy, or\nthe more accurately,",
    "start": "282565",
    "end": "292060"
  },
  {
    "text": "in terms of the actual\ntest specifications, the voltage across the\nLISN impedance in order",
    "start": "292060",
    "end": "297370"
  },
  {
    "text": "to make my measurements. Any questions about that? ",
    "start": "297370",
    "end": "304400"
  },
  {
    "text": "So we said, OK.  We need to design a filter here.",
    "start": "304400",
    "end": "312970"
  },
  {
    "text": "A capacitor is not\ngoing to cut it because for typical\nspecifications, who",
    "start": "312970",
    "end": "318370"
  },
  {
    "text": "knows what this is? Maybe this is tens of amps. Typically, the current I'm\nallowed to squirt back into here",
    "start": "318370",
    "end": "323830"
  },
  {
    "text": "is on the orders of\ntens of microamps. It's really small.",
    "start": "323830",
    "end": "328930"
  },
  {
    "text": "So we usually need to design a\nhigher-order filter than that. And so what we've thought about\nis building with a basic filter",
    "start": "328930",
    "end": "338590"
  },
  {
    "text": "stage. So if here's my converter\nthat's driving noise, and I'm going to\ncall this ix tilde,",
    "start": "338590",
    "end": "344050"
  },
  {
    "text": "and again, whatever this\nterm by the converter, I will put this\ninto some filter.",
    "start": "344050",
    "end": "350770"
  },
  {
    "text": "And here maybe I would think of\nhaving some filter capacitor Cf",
    "start": "350770",
    "end": "361150"
  },
  {
    "text": "and some filter inductance\nLf as a basic building block for a filter.",
    "start": "361150",
    "end": "367702"
  },
  {
    "text": "And the notion is,\nI can look back. And on the other\nside of this filter, depending upon whether\nI'm-- in my test stand,",
    "start": "367702",
    "end": "374919"
  },
  {
    "text": "I'm going to have-- I'm going to look\nback into something that looks like Z LISN,\nwhich at high frequencies",
    "start": "374920",
    "end": "379930"
  },
  {
    "text": "might be 50 ohms and at lower\nfrequencies is something else. But let me just\nsay, this goes back into some source impedance\nwhich for the moment,",
    "start": "379930",
    "end": "387062"
  },
  {
    "text": "for our present discussion,\nlet me just pretend it goes back into a short. And I'm interested\nin this current.",
    "start": "387062",
    "end": "396890"
  },
  {
    "text": "I'm interested in\nthis current iy tilde, the amount that's\ngoing back into the source,",
    "start": "396890",
    "end": "403130"
  },
  {
    "text": "in terms of ix tilde. And we said, all\nright, if I wanted",
    "start": "403130",
    "end": "411020"
  },
  {
    "text": "to think about the\nattenuation of this filter, and maybe I could think of this\nas being going back into Z LISN",
    "start": "411020",
    "end": "420920"
  },
  {
    "text": "under some other conditions\nif I'm in the test stand.",
    "start": "420920",
    "end": "427910"
  },
  {
    "text": "Maybe this filter\nblock would give me an attenuation that would go the\nmagnitude of iy over ix tilde",
    "start": "427910",
    "end": "436669"
  },
  {
    "text": "might look something like this. At DC, everything\ngets passed back.",
    "start": "436670",
    "end": "441820"
  },
  {
    "text": " And then well above 1 over\nthe square root of Lf Cf",
    "start": "441820",
    "end": "449990"
  },
  {
    "text": "it will roll off as 40 dB\nper decade, or minus 40",
    "start": "449990",
    "end": "458400"
  },
  {
    "text": "dB per decade. Why? Because the capacitor impedance\nis falling by a factor of 10,",
    "start": "458400",
    "end": "465940"
  },
  {
    "text": "every factor of 10 in frequency. And the inductance\nimpedance is rising by a factor of every factor\nof 10 impedance, factor of 10",
    "start": "465940",
    "end": "473160"
  },
  {
    "text": "for every factor\nof 10 in frequency. And hence so I get a factor of\n100 attenuation for every factor",
    "start": "473160",
    "end": "478530"
  },
  {
    "text": "of 10 in frequency. And that's great.",
    "start": "478530",
    "end": "484020"
  },
  {
    "text": "And I'm intentionally\nignoring what happens in the\nvicinity of cutoff,",
    "start": "484020",
    "end": "489300"
  },
  {
    "text": "because keep in mind, the\ncutoff some low frequency, we're going to put our PWM\nfrequency and ripple frequency",
    "start": "489300",
    "end": "494970"
  },
  {
    "text": "way out here somewhere so we're\ngetting lots of attenuation. ",
    "start": "494970",
    "end": "500396"
  },
  {
    "text": "But we have to be a\nlittle bit careful because we said when we lay\nthese filters out, first of all,",
    "start": "500396",
    "end": "507120"
  },
  {
    "text": "there are internal parasitics.",
    "start": "507120",
    "end": "512318"
  },
  {
    "text": "So if I go buy a filter\ncapacitor, he's not perfect. So maybe he has some\ninternal ESR, RESR.",
    "start": "512318",
    "end": "521229"
  },
  {
    "text": "And what that would do is that\nwould reduce, instead of falling off like this, it\nwould start to fall off",
    "start": "521230",
    "end": "526480"
  },
  {
    "text": "at minus 20 dB per decade,\nbecause above some frequency,",
    "start": "526480",
    "end": "532120"
  },
  {
    "text": "this shunt path just\nlooks like a resistance. And then if I keep going up, and\nI have some parasitic inductance",
    "start": "532120",
    "end": "539710"
  },
  {
    "text": "here, L parasitic, then I\njust have a current divider between Lf and Lp.",
    "start": "539710",
    "end": "546010"
  },
  {
    "text": "And in fact, this\nmight even flatten out. So I might be thinking I'm\ngoing to be way down here,",
    "start": "546010",
    "end": "552700"
  },
  {
    "text": "but really my\nattenuation's up here, and I don't get nearly as\ngood a performance as I hoped.",
    "start": "552700",
    "end": "559580"
  },
  {
    "text": "So this could be due to\ninternal component parasitics,",
    "start": "559580",
    "end": "564760"
  },
  {
    "text": "or it could be due to\nlayout parasitics-- how I place everything\non the circuit board.",
    "start": "564760",
    "end": "569949"
  },
  {
    "text": "Parasitic inductance\nand resistance is one thing I worry about. Parasitic capacitance is\nanother thing I worry about.",
    "start": "569950",
    "end": "577730"
  },
  {
    "text": "So that's just a quick\nreview of last class.",
    "start": "577730",
    "end": "585699"
  },
  {
    "text": "But I'd like to now move forward\na little bit, And let's start",
    "start": "585700",
    "end": "590830"
  },
  {
    "text": "thinking about-- let's start thinking\nabout what happens",
    "start": "590830",
    "end": "595840"
  },
  {
    "text": "in the vicinity of cutoff. So if my converter is in\nthe hundreds of kilohertz,",
    "start": "595840",
    "end": "601630"
  },
  {
    "text": "you know, maybe this is-- this cutoff is in\nthe kilohertz range. It depends on the system.",
    "start": "601630",
    "end": "607490"
  },
  {
    "text": "But at any rate, my\ncutoff of my filter is going to be well below\nthe switching frequency.",
    "start": "607490",
    "end": "614450"
  },
  {
    "text": "So let's think about\nwhat's going on there. If I have some\nconverter, and it's",
    "start": "614450",
    "end": "624990"
  },
  {
    "text": "drawing some ripple current,\nand then I put in my filter-- ",
    "start": "624990",
    "end": "635785"
  },
  {
    "text": "and I'm going to call\nthis i sub y tilde-- let me just forget about the\nLISN impedance for a moment.",
    "start": "635785",
    "end": "648700"
  },
  {
    "text": "What am I going to\nbe looking back into? That depends what I'm going\nto put my converter into. The LISN is only\nthere for testing.",
    "start": "648700",
    "end": "655680"
  },
  {
    "text": "This converter and this filter\nhas to live in the real world where this source impedance\nmight even be 0, for all I know",
    "start": "655680",
    "end": "663510"
  },
  {
    "text": "So what's going to happen\nin the vicinity of cutoff? Well, let's think about this.",
    "start": "663510",
    "end": "669100"
  },
  {
    "text": "If I plotted iy over\nix versus frequency,",
    "start": "669100",
    "end": "678959"
  },
  {
    "text": "and this is all\non a log scale, I should say, what do we\nsay was going to happen?",
    "start": "678960",
    "end": "684690"
  },
  {
    "text": "At low frequency, I'm going to\nget a transfer function of 1, and at high frequency I'm going\nto go minus 40 dB per decade.",
    "start": "684690",
    "end": "693995"
  },
  {
    "text": " The question is, what\nhappens here at cutoff?",
    "start": "693995",
    "end": "701630"
  },
  {
    "text": "Where is cutoff? 1 over the square root of Lf Cf. ",
    "start": "701630",
    "end": "709910"
  },
  {
    "text": "And what do I look back into at\nexactly the cutoff frequency?",
    "start": "709910",
    "end": "715649"
  },
  {
    "text": " I have an inductor in\nparallel with the capacitor",
    "start": "715650",
    "end": "721800"
  },
  {
    "text": "at its resonant frequency. So while I get this\nroll-off at high frequency,",
    "start": "721800",
    "end": "729769"
  },
  {
    "text": "and I get all the current paths\npassed back at DC, basically,",
    "start": "729770",
    "end": "734780"
  },
  {
    "text": "at the resonance frequency,\nLf and Cf basically look like an open circuit.",
    "start": "734780",
    "end": "740180"
  },
  {
    "text": "Or what's going\nto happen is, if I start to draw any ripple current\nnear the resonant frequency,",
    "start": "740180",
    "end": "745610"
  },
  {
    "text": "I'm going to get huge\ncirculating currents in the input. And I'm going to drive a big\ncurrent iy back into my input.",
    "start": "745610",
    "end": "753540"
  },
  {
    "text": "So the current gain\nhere, actually, does something like this. It goes off to infinity\nin this simplified case.",
    "start": "753540",
    "end": "763821"
  },
  {
    "text": "It would do something like\nthis, which is pretty bad. If you imagine that\nthe converter somehow",
    "start": "763821",
    "end": "772010"
  },
  {
    "text": "had some small amount\nthat it was drawing at some low frequency\nnear this cutoff,",
    "start": "772010",
    "end": "777769"
  },
  {
    "text": "it would drive this\ninput filter nuts.  Another thing I could look\nat is I could say, well,",
    "start": "777770",
    "end": "785760"
  },
  {
    "text": "what is the output impedance\nof the filter look like?",
    "start": "785760",
    "end": "791410"
  },
  {
    "text": "In other words, the filter\nseen by the converter. If I look back into\nthis filter, and I say,",
    "start": "791410",
    "end": "797130"
  },
  {
    "text": "what is this\nimpedance Zx, which is equal to Vx tilde over ix\ntilde, where this is Vx tilde.",
    "start": "797130",
    "end": "808269"
  },
  {
    "text": "What does that look like? Well, I would argue in this\ncase that at low frequencies,",
    "start": "808270",
    "end": "821680"
  },
  {
    "text": "this is close to\na short circuit, so it looks like omega Lf. And at high\nfrequencies, this starts",
    "start": "821680",
    "end": "828370"
  },
  {
    "text": "to look like a short circuit,\nso it becomes 1 over omega Cf. And you get the\nfollowing behavior. I get omega Lf, I\nget 1 over omega Cf,",
    "start": "828370",
    "end": "846860"
  },
  {
    "text": "and right at this\ncutoff frequency these two are in\nparallel and these are resonating against each other.",
    "start": "846860",
    "end": "853200"
  },
  {
    "text": "One has a positive admittance. The other has a negative\nadmittance, and they cancel.",
    "start": "853200",
    "end": "858990"
  },
  {
    "text": "And this impedance would\ngo off to infinity. So you're looking back\ninto an open circuit.",
    "start": "858990",
    "end": "865740"
  },
  {
    "text": "That makes sense why this\ndraws kind of high current. You're trying to draw a\ncurrent from an open circuit,",
    "start": "865740",
    "end": "871220"
  },
  {
    "text": "and so you're going to get\na lot of voltage ripple here and a lot of resulting current\nripple back into the input.",
    "start": "871220",
    "end": "877000"
  },
  {
    "text": "Any questions about that? ",
    "start": "877000",
    "end": "883570"
  },
  {
    "text": "So what would I do about that? What would be the kind\nof natural thing to do? ",
    "start": "883570",
    "end": "892210"
  },
  {
    "text": "Better put a damping\nleg on your filter. So while we're using this filter\nway out here to cut off ripple",
    "start": "892210",
    "end": "901180"
  },
  {
    "text": "from the converter, I also\nhave to think about what it's going to do here. Now the most natural\nthing to think",
    "start": "901180",
    "end": "907360"
  },
  {
    "text": "about doing,\nputting in a filter, is maybe just\nputting a resistor--",
    "start": "907360",
    "end": "913930"
  },
  {
    "text": "maybe I could put a resistor-- I'll call it a\ndamping resistor-- Rd-- right here.",
    "start": "913930",
    "end": "919690"
  },
  {
    "text": "What would Rd do? Well if Lf and Cf\nare at resonance,",
    "start": "919690",
    "end": "925730"
  },
  {
    "text": "Rd is the only thing\nleft, because these kind of cancel each other. And my output impedance\nwould just go to Rd.",
    "start": "925730",
    "end": "932580"
  },
  {
    "text": "So instead of peaking\noff to infinity, I would peak off\nto some value Rd,",
    "start": "932580",
    "end": "940260"
  },
  {
    "text": "would be the maximum of my\noutput impedance if I did this. And likewise, if I looked at the\npeaking in my transfer function,",
    "start": "940260",
    "end": "948540"
  },
  {
    "text": "it would be limited by the\nfact that I was damping this. And you know, maybe it\ndoes something like this.",
    "start": "948540",
    "end": "954420"
  },
  {
    "text": "And I'm no longer unhappy. Any questions about that?",
    "start": "954420",
    "end": "962950"
  },
  {
    "text": "Anybody see a problem\nwith that scheme? ",
    "start": "962950",
    "end": "968490"
  },
  {
    "text": "Yeah, you're going to burn\na lot of energy in this. I mean, if I come back\nto my original converter,",
    "start": "968490",
    "end": "975270"
  },
  {
    "text": "I need to make Rd, typically, if\nI want this to be nicely damped,",
    "start": "975270",
    "end": "980280"
  },
  {
    "text": "on the order of square\nroot of Lf over Cf or lower for good damping.",
    "start": "980280",
    "end": "986190"
  },
  {
    "text": "And I'm basically\nputting a resistor across the input\nof my converter.",
    "start": "986190",
    "end": "991480"
  },
  {
    "text": "That's not very happy.  So what would I do\nin the real world?",
    "start": "991480",
    "end": "999030"
  },
  {
    "text": "I'd say, well, I can't accept\nthat being a very good idea. But maybe what I could do is\ntake this damping resistor",
    "start": "999030",
    "end": "1008199"
  },
  {
    "text": "and put it in series with\na damping capacitor, Cd. ",
    "start": "1008200",
    "end": "1013839"
  },
  {
    "text": "OK. So I'll put Rd in\nseries with Cd. OK, what does that do?",
    "start": "1013840",
    "end": "1019490"
  },
  {
    "text": "Well, if Cd is bigger than\nC sub f near the cutoff, 1",
    "start": "1019490",
    "end": "1026589"
  },
  {
    "text": "over the square root of Lf Cf,\nCd looks like a short circuit, and it looks just\nlike Rd is in shunt.",
    "start": "1026589",
    "end": "1034839"
  },
  {
    "text": "And so I'll get this\nnice kind of damping. ",
    "start": "1034839",
    "end": "1041670"
  },
  {
    "text": "But a DC, Cd is an open circuit,\nso I don't get any DC current through here. And so that helps me.",
    "start": "1041670",
    "end": "1048820"
  },
  {
    "text": "OK, so this Rd Cd\nbranch is sometimes called the damping\nleg, And it can really",
    "start": "1048820",
    "end": "1056160"
  },
  {
    "text": "do a nice job of improving\nyour filter design. Now typically, Cd\ndepends-- and we're",
    "start": "1056160",
    "end": "1062507"
  },
  {
    "text": "going to talk about\nthe details of this-- a typical number for Cd is\nusually on the order of 2 to 10",
    "start": "1062507",
    "end": "1068610"
  },
  {
    "text": "times Cf, or two or\ngreater times Cf in order",
    "start": "1068610",
    "end": "1073679"
  },
  {
    "text": "to get good enough damping. But we'll get into\nthe details of that. But before I do\nthat, any questions?",
    "start": "1073680",
    "end": "1078790"
  },
  {
    "start": "1078790",
    "end": "1084510"
  },
  {
    "text": "So let's think about what\nwould happen if I put this damping branch in here.",
    "start": "1084510",
    "end": "1092330"
  },
  {
    "text": "How do I pick Rd. Or another question\nI could ask is,",
    "start": "1092330",
    "end": "1098650"
  },
  {
    "text": "what does the resonance\nof this filter look like as I vary Rd\nin this system?",
    "start": "1098650",
    "end": "1105169"
  },
  {
    "text": "So let's take a look at that. I'm going to replot it here.",
    "start": "1105170",
    "end": "1110655"
  },
  {
    "text": " And I'm going to look at Zx,\nthe filter output impedance.",
    "start": "1110655",
    "end": "1121802"
  },
  {
    "text": "And we're going to\ncome back to why I'm obsessed with what the\nfilter output impedance looks like.",
    "start": "1121802",
    "end": "1126860"
  },
  {
    "text": "And that's the impedance\nseen looking back, what the converter\nlooks back and sees.",
    "start": "1126860",
    "end": "1131960"
  },
  {
    "text": "And in doing my\nanalysis here, I'm just assuming that the\nsource impedance out here looks like a short circuit.",
    "start": "1131960",
    "end": "1137090"
  },
  {
    "text": "I'm making that\nsimplifying assumption. But let's think about this. I said in the undamped case,\nwhat would I have seen?",
    "start": "1137090",
    "end": "1149490"
  },
  {
    "text": "I would have seen\nsomething like this-- 1 over the square root of Lf Cf. ",
    "start": "1149490",
    "end": "1157860"
  },
  {
    "text": "This is omega Cf. Oops. I'm sorry. This is omega Lf.",
    "start": "1157860",
    "end": "1164850"
  },
  {
    "text": "And then this is\n1 over omega Cf.",
    "start": "1164850",
    "end": "1173190"
  },
  {
    "text": "And this is versus\nfrequency on a log log plot. ",
    "start": "1173190",
    "end": "1181374"
  },
  {
    "text": "And this is the magnitude\nof Zx, looking back there.",
    "start": "1181374",
    "end": "1187470"
  },
  {
    "text": "If I let Rd go to\ninfinity, it's basically",
    "start": "1187470",
    "end": "1193110"
  },
  {
    "text": "like Cd is not in the circuit.  So as Rd goes to infinity,\nwhat I'm going to see",
    "start": "1193110",
    "end": "1201303"
  },
  {
    "text": "is something that\nlooks like this. This is the case where\nRd goes to infinity. This is just going to do\nwhat the undamped system did.",
    "start": "1201303",
    "end": "1207365"
  },
  {
    "start": "1207365",
    "end": "1215750"
  },
  {
    "text": "So this is the case where\nRd goes to infinity. So, clearly, I can't\nmake Rd too big, or the--",
    "start": "1215750",
    "end": "1223367"
  },
  {
    "text": "even putting in the damping\ndoesn't do me any good.  Well, what happens if I make--",
    "start": "1223367",
    "end": "1231210"
  },
  {
    "text": "so, clearly, I need\nto make Rd small. What happens if I\nmake Rd super small? Well, if I make Rd go\nto 0, what happens?",
    "start": "1231210",
    "end": "1238510"
  },
  {
    "text": "If Rd was 0, i would just\nhave Cd in parallel with Cf. So if I made Rd go to\n0, what I would see",
    "start": "1238510",
    "end": "1246670"
  },
  {
    "text": "is something like this. Instead of having a cut\noff 1 over omega Lf Cf,",
    "start": "1246670",
    "end": "1253420"
  },
  {
    "text": "I'm just putting Cd\nin parallel with Cf so I'd have some other place-- here it is-- 1 over the square root\nof Lf times Cf plus Cd.",
    "start": "1253420",
    "end": "1265269"
  },
  {
    "text": "And I'd have another cutoff. ",
    "start": "1265270",
    "end": "1270898"
  },
  {
    "text": "Actually, let me put that a\nlittle bit over to the right. Let me put it here just so\nyou can see it more easily.",
    "start": "1270898",
    "end": "1277850"
  },
  {
    "text": "So I'm going to put\nthat cutoff right here.  And what I would\nget is the same--",
    "start": "1277850",
    "end": "1286992"
  },
  {
    "text": " I would get a different\nhigh-frequency asymptote.",
    "start": "1286993",
    "end": "1292916"
  },
  {
    "start": "1292916",
    "end": "1298210"
  },
  {
    "text": "Actually, let me\nput it right here. Be accurate.",
    "start": "1298210",
    "end": "1304000"
  },
  {
    "text": "OK, so this would be 1\nover omega Cf plus Cd.",
    "start": "1304000",
    "end": "1312680"
  },
  {
    "text": "And I would peak up, and\nI'd get something that went off to infinity like this. ",
    "start": "1312680",
    "end": "1323690"
  },
  {
    "text": "So this is the case where Rd\ngoes to 0 for some value of Cd",
    "start": "1323690",
    "end": "1330830"
  },
  {
    "text": "that I've picked. Does that make\nsense to everybody? So this is a Goldilocks thing.",
    "start": "1330830",
    "end": "1338270"
  },
  {
    "text": "If you make your damping\nresistor too big, you get bad damping.",
    "start": "1338270",
    "end": "1343710"
  },
  {
    "text": "If you make your damping\nresistor too small, you get terrible damping.",
    "start": "1343710",
    "end": "1348930"
  },
  {
    "text": "And you got to, for\na given value of Cd, you've got to pick the\nright damping resistance.",
    "start": "1348930",
    "end": "1356990"
  },
  {
    "text": "What would my output\nimpedance look like if I picked\nthe right one, where you can show that the best case,\nthrough a nice bit of analysis,",
    "start": "1356990",
    "end": "1365060"
  },
  {
    "text": "actually goes through\nthese two points. So if you picked Rd\noptimum, what you would get",
    "start": "1365060",
    "end": "1372320"
  },
  {
    "text": "is something that did this. ",
    "start": "1372320",
    "end": "1379180"
  },
  {
    "text": "And then it would eventually\nfall off like this. So that's a pretty--",
    "start": "1379180",
    "end": "1384220"
  },
  {
    "text": "kind of crummy drawing. But this is sort of\nbest Rd, the best",
    "start": "1384220",
    "end": "1392450"
  },
  {
    "text": "Rd in terms of limiting how\nbig the output impedance gets, which we could take as\nsome kind of measure",
    "start": "1392450",
    "end": "1398840"
  },
  {
    "text": "for how badly damped\nthe filter is. Questions about that?",
    "start": "1398840",
    "end": "1406279"
  },
  {
    "text": "So what do I do if I don't like\nthat value of output resistance that I get?",
    "start": "1406280",
    "end": "1412379"
  },
  {
    "text": "Well, if I make Cd bigger,\nI can slide this down,",
    "start": "1412380",
    "end": "1419760"
  },
  {
    "text": "and then I'll pick a different\nvalue, which will then bring this intersection point down.",
    "start": "1419760",
    "end": "1426870"
  },
  {
    "text": "And we'll get better damping. So I'm not going to derive this. This is actually nicely\nderived in one of the handouts",
    "start": "1426870",
    "end": "1436289"
  },
  {
    "text": "that I've provided. But here's the final result. If\nI define R out as being equal",
    "start": "1436290",
    "end": "1444930"
  },
  {
    "text": "to square root of Lf over\nCf-- that's the characteristic impedance of my\noriginal Lf Cf branch--",
    "start": "1444930",
    "end": "1453320"
  },
  {
    "text": "and I define n as being\nequal to Cd over Cf--",
    "start": "1453320",
    "end": "1460110"
  },
  {
    "text": "so that's how much bigger is\nthe damping capacitor compared to the filter capacitor--",
    "start": "1460110",
    "end": "1465880"
  },
  {
    "text": "what you can see is that Rd opt\nis equal to R0 times square root",
    "start": "1465880",
    "end": "1479510"
  },
  {
    "text": "of 2 plus n times 4 plus 3n\ndivided by 2n squared times 4",
    "start": "1479510",
    "end": "1490190"
  },
  {
    "text": "plus n. And this gives a Zx max--",
    "start": "1490190",
    "end": "1498350"
  },
  {
    "text": "if I call this Zx max-- ",
    "start": "1498350",
    "end": "1505670"
  },
  {
    "text": "a value that's equal to R0 times\nsquare root of 2 plus n over n.",
    "start": "1505670",
    "end": "1514820"
  },
  {
    "text": "So that means, the bigger\nI choose n, this goes down,",
    "start": "1514820",
    "end": "1523639"
  },
  {
    "text": "and my peak output impedance\nof the filter goes down.",
    "start": "1523640",
    "end": "1529620"
  },
  {
    "text": "All right? And I get essentially\nbetter damping. OK. Larry. AUDIENCE: Your notes\nsay 2 times 2 plus n.",
    "start": "1529620",
    "end": "1538255"
  },
  {
    "text": "DAVID PERREAULT: Whatever\nmy notes say are correct. 2 times 2 plus n. Yes.",
    "start": "1538255",
    "end": "1543500"
  },
  {
    "text": "Now by the way, these\nare nice equations. There's a very clever\nanalysis that shows all this.",
    "start": "1543500",
    "end": "1549505"
  },
  {
    "start": "1549505",
    "end": "1554545"
  },
  {
    "text": "And certainly,\nthis is well known, and it's in one of the handouts. ",
    "start": "1554545",
    "end": "1561170"
  },
  {
    "text": "The nice thing about this\nis that you can say, well,",
    "start": "1561170",
    "end": "1568010"
  },
  {
    "text": "how small do I or how well\nthe damp do I want this thing, I will pick n big\nenough to give me that,",
    "start": "1568010",
    "end": "1574760"
  },
  {
    "text": "and then that gives me my\nvalue of damping capacitor, and away I go, and I get\nenough, make my output impedance",
    "start": "1574760",
    "end": "1581480"
  },
  {
    "text": "small or my system well damped.  Now the thing we\ndon't like about doing",
    "start": "1581480",
    "end": "1589010"
  },
  {
    "text": "this is you say, well, why\ndon't I just make n really big, and then this will be\nreally well damped.",
    "start": "1589010",
    "end": "1594060"
  },
  {
    "text": "Well, the reason is, I've got\nto pay for that capacitor. If I'm choosing\nCd as 10 times Cf,",
    "start": "1594060",
    "end": "1601640"
  },
  {
    "text": "well, that's expensive,\nin terms of cost but also in terms of\nvolume, because it",
    "start": "1601640",
    "end": "1607880"
  },
  {
    "text": "has to store 10 times\nthe energy of Cf, right? On the other hand, Cd\nand Cf, if I come back",
    "start": "1607880",
    "end": "1614660"
  },
  {
    "text": "to this original\ndesign, Cf is important at the ripple frequency\nWe were talking about--",
    "start": "1614660",
    "end": "1620809"
  },
  {
    "text": "up here, we were talking\nabout, well, I really care about the parasitics\nof this filter capacitor",
    "start": "1620810",
    "end": "1626450"
  },
  {
    "text": "in order to get good,\nhigh-frequency attenuation. So Cf's job, the\nfilter capacitor's job,",
    "start": "1626450",
    "end": "1632690"
  },
  {
    "text": "is really to help me attenuate\nthe high ripple frequency. He wants to be a really good\ncapacitor for high frequency.",
    "start": "1632690",
    "end": "1639530"
  },
  {
    "text": "On the other hand, Cd is really\noperative near the cutoff, which",
    "start": "1639530",
    "end": "1645470"
  },
  {
    "text": "is orders of magnitude lower. So Cd doesn't have to\nbe a great capacitor. In fact, if Cd had\nparasitic inductance,",
    "start": "1645470",
    "end": "1653429"
  },
  {
    "text": "I probably don't care that much. In fact, if he has\nparasitic resistance, I still may not care\nthat much, because I",
    "start": "1653430",
    "end": "1658640"
  },
  {
    "text": "can use that parasitic\nresistance as part of my filter damping leg. So this might be, for example,\nan electrolytic capacitor,",
    "start": "1658640",
    "end": "1668210"
  },
  {
    "text": "whereas this might be\nfilm or ceramic capacitor. So the jobs of these two\ncapacitors are different,",
    "start": "1668210",
    "end": "1674180"
  },
  {
    "text": "and the construction of them. And you can get a\nlot of energy storage in electrolytic, for example, as\ncompared to a ceramic or a film",
    "start": "1674180",
    "end": "1681020"
  },
  {
    "text": "capacitor typically. Any questions about that? ",
    "start": "1681020",
    "end": "1691130"
  },
  {
    "text": "All right. So what we're going to do\nis we're going to say, jeez,",
    "start": "1691130",
    "end": "1697080"
  },
  {
    "text": "how well damped do\nI want this to be? First of all,\ndesign my filter Lf and Cf to attenuate\nthe ripple frequency.",
    "start": "1697080",
    "end": "1705309"
  },
  {
    "text": "Then I'll say, how\nwell damped do I need this to be down at the cutoff?",
    "start": "1705310",
    "end": "1710919"
  },
  {
    "text": "And I will say, OK, I will\npick n to be big enough, the ratio of Cd over\nCf to be big enough,",
    "start": "1710920",
    "end": "1718420"
  },
  {
    "text": "and then out of that\nwill-- out of this will drop what filter\ndamping resistor I need.",
    "start": "1718420",
    "end": "1723593"
  },
  {
    "text": "And then we kind\nof have a filter. ",
    "start": "1723593",
    "end": "1728660"
  },
  {
    "text": "By the way, if you don't like\nremembering these equations, it's not too hard to simulate or\njust calculate for a few values,",
    "start": "1728660",
    "end": "1737065"
  },
  {
    "text": "and then you'd zero in on it. It's just the Goldilocks thing. It's too hot, it's too cold, you\nfind the one that's just right,",
    "start": "1737065",
    "end": "1743000"
  },
  {
    "text": "and then you're there. ",
    "start": "1743000",
    "end": "1748770"
  },
  {
    "text": "I should say, this isn't the\nonly way to damp a filter.",
    "start": "1748770",
    "end": "1754770"
  },
  {
    "text": "If I thought of a-- if I thought of a different\ndamping mechanism, right,",
    "start": "1754770",
    "end": "1764840"
  },
  {
    "text": "I could come back to the\nsame basic filter structure. Here's Cf.",
    "start": "1764840",
    "end": "1771310"
  },
  {
    "text": "OK. Here's Lf. And he's going to be coming back\ninto the source impedance, which",
    "start": "1771310",
    "end": "1777680"
  },
  {
    "text": "are just presented\nas a short circuit. And he's going to be driven by\nsome converter ripple ix tilde.",
    "start": "1777680",
    "end": "1784380"
  },
  {
    "text": "And I want to worry\nabout what iy tilde here is, this current\ngain of the filter.",
    "start": "1784380",
    "end": "1790490"
  },
  {
    "text": "I could come back to this\nand say, you know what? Instead of using a shunt\ndamping leg like that,",
    "start": "1790490",
    "end": "1795649"
  },
  {
    "text": "in parallel with\nCf, maybe I could go get a damping leg like this.",
    "start": "1795650",
    "end": "1801810"
  },
  {
    "text": "I could have Ld and Rd here.",
    "start": "1801810",
    "end": "1808460"
  },
  {
    "text": "To the extent that this\nis a short circuit, this now also gives\nme parallel damping.",
    "start": "1808460",
    "end": "1814950"
  },
  {
    "text": "In this case, I would make,\nif this is Lf, in this case,",
    "start": "1814950",
    "end": "1820899"
  },
  {
    "text": "I would make Ld less than\nLf, so that nearer the cutoff",
    "start": "1820900",
    "end": "1827310"
  },
  {
    "text": "frequency, 1 over the\nsquare root of Lf Cf, Ld now looks like\na short circuit, and it's Rd that's\ndamping Lf and Cf.",
    "start": "1827310",
    "end": "1838770"
  },
  {
    "text": "When I get to high\nenough frequencies, Ld starts to look inductive. It looks like a higher impedance\nthan Rd, and I get my roll-off.",
    "start": "1838770",
    "end": "1845070"
  },
  {
    "text": " Now this is also a very\npopular damping scheme.",
    "start": "1845070",
    "end": "1852600"
  },
  {
    "text": "And you can do the same\nthing for this analysis. There's always going to\nbe, for a given value of Ld",
    "start": "1852600",
    "end": "1858740"
  },
  {
    "text": "relative to Lf, there's\nan optimum value of Rd to give you a good damping. The downside to this\nfilter-damping strategy",
    "start": "1858740",
    "end": "1868120"
  },
  {
    "text": "is that, whereas this additional\nshunt path only kind of improved",
    "start": "1868120",
    "end": "1877360"
  },
  {
    "text": "your filtering well\nabove cutoff, here, because Ld is small, you're kind\nof hurting your filter impedance",
    "start": "1877360",
    "end": "1887110"
  },
  {
    "text": "This path's impedance\ngone down compared to this path's impedance. So this doesn't do as good\na job slightly above cutoff",
    "start": "1887110",
    "end": "1897760"
  },
  {
    "text": "because Ld is small. So what will happen is,\ninstead of getting--",
    "start": "1897760",
    "end": "1904510"
  },
  {
    "text": "if I looked at iy over ix, iy\nover ix, instead of cutting off",
    "start": "1904510",
    "end": "1913630"
  },
  {
    "text": "if minus 40 dB per decade,\nwhat's going to happen is I'm going to cut off at\nminus 20 dB per decade",
    "start": "1913630",
    "end": "1920470"
  },
  {
    "text": "because all I have is this\ndamping resistor being important. And then, once Ld comes in,\nthen I'll start falling off,",
    "start": "1920470",
    "end": "1927310"
  },
  {
    "text": "and I will eventually roll\noff at minus 40 dB per decade. But my roll-off is not\ngoing to be as good.",
    "start": "1927310",
    "end": "1933100"
  },
  {
    "text": "So what do I have to do? I have to pick a correspondingly\nlower cutoff frequency to account for what Ld\nis doing to my filtering.",
    "start": "1933100",
    "end": "1941410"
  },
  {
    "text": "So that's the downside of\nthis inductive damping scheme. The upside to the\ninductive damping scheme",
    "start": "1941410",
    "end": "1947889"
  },
  {
    "text": "is that whereas Cd costs\nme a lot of energy storage",
    "start": "1947890",
    "end": "1953640"
  },
  {
    "text": "because he's got to block\nthe full input voltage, Ld is small and\ncarries no DC current,",
    "start": "1953640",
    "end": "1959550"
  },
  {
    "text": "so it can be a pretty\nsmall inductor. So they both have their\nupsides and downsides.",
    "start": "1959550",
    "end": "1964600"
  },
  {
    "text": "They're both widely used. Just depends on the situation. Try them both out. In one of the handouts\nthat I provided,",
    "start": "1964600",
    "end": "1970710"
  },
  {
    "text": "I have actually shown all\nkinds of different filters, some higher-order\nversions than this.",
    "start": "1970710",
    "end": "1977670"
  },
  {
    "text": "But typically, an Lc\nfilter as a building block is a pretty good structure.",
    "start": "1977670",
    "end": "1983049"
  },
  {
    "text": " Any questions about that?",
    "start": "1983050",
    "end": "1989740"
  },
  {
    "text": "Larry. AUDIENCE: Do we have to consider\nany of this at the power stage? Because you also\nhave notes saying--",
    "start": "1989740",
    "end": "1995868"
  },
  {
    "text": "DAVID PERREAULT: Oh, yes. Well, yes. Actually, let me answer\nthat exact question. The answer is yes, you do.",
    "start": "1995868",
    "end": "2003240"
  },
  {
    "text": "Why was I talking-- I kind of focused\nin this picture.",
    "start": "2003240",
    "end": "2009010"
  },
  {
    "text": "I focused on what the output\nimpedance of the filter looks like. Well, let's think about\nthis for a second.",
    "start": "2009010",
    "end": "2018460"
  },
  {
    "text": "Suppose I have some power stage. ",
    "start": "2018460",
    "end": "2023850"
  },
  {
    "text": "Here's my power stage. This is my power converter. And he's got some you\nknow R out here that he's",
    "start": "2023850",
    "end": "2032040"
  },
  {
    "text": "controlling some V out on. And he's being powered\nfrom an input voltage",
    "start": "2032040",
    "end": "2037827"
  },
  {
    "text": "that I'm going to call Vn.  And then I'm going\nto have some filter.",
    "start": "2037827",
    "end": "2046150"
  },
  {
    "text": "And let me consider\na simple filter. Here's Cf. ",
    "start": "2046150",
    "end": "2054550"
  },
  {
    "text": "Here's Lf.  Let me put--",
    "start": "2054550",
    "end": "2059949"
  },
  {
    "text": "I'm just going to use a simple\nresistive damping leg, Rd, just for simplicity's sake.",
    "start": "2059949",
    "end": "2068409"
  },
  {
    "text": "And now this is going to get\nconnected to my power source. So here is Vn.",
    "start": "2068410",
    "end": "2075969"
  },
  {
    "text": "Or I'm going to\ncall this Vs and Zs. But again, let me just consider\nthe case where Zs is 0,",
    "start": "2075969",
    "end": "2081699"
  },
  {
    "text": "for simplicity.  All right. What does this\npower converter do?",
    "start": "2081699",
    "end": "2088580"
  },
  {
    "text": "Let's assume he's a\nperfect power converter. He's going to go and keep the\noutput voltage at the reference",
    "start": "2088580",
    "end": "2095810"
  },
  {
    "text": "no matter what the\ninput voltage does. That's his job. Input voltage varies.",
    "start": "2095810",
    "end": "2101658"
  },
  {
    "text": "I don't care. I'm going to keep 12 volts\nat the output no matter what.",
    "start": "2101658",
    "end": "2107138"
  },
  {
    "text": "So what would I\nsay that he does? Well, he's a constant\npower load in that case.",
    "start": "2107138",
    "end": "2114400"
  },
  {
    "text": "No matter what the\ninput voltage is doing, I want to draw V reference\nsquared over R0 if this is",
    "start": "2114400",
    "end": "2120840"
  },
  {
    "text": "some fixed load at the output. ",
    "start": "2120840",
    "end": "2128090"
  },
  {
    "text": "So if I thought of this\ncurrent as being some i n, What",
    "start": "2128090",
    "end": "2135710"
  },
  {
    "text": "I get is i n times Vn is equal\nto whatever my power output",
    "start": "2135710",
    "end": "2143089"
  },
  {
    "text": "power is going to be, which\nis V out squared over R out. ",
    "start": "2143090",
    "end": "2150190"
  },
  {
    "text": "Or I could write this\nas in terms of the--",
    "start": "2150190",
    "end": "2156790"
  },
  {
    "text": "if I reference, write\nit in terms of voltage, I could write this as V out-- I'm sorry, Vn is equal\nto P out over i n.",
    "start": "2156790",
    "end": "2165580"
  },
  {
    "text": "And I might evaluate\nI might consider that as some operating point at\nwhich I'm sitting Vn and i n.",
    "start": "2165580",
    "end": "2173319"
  },
  {
    "text": "So if I were to plot that-- ",
    "start": "2173320",
    "end": "2178780"
  },
  {
    "text": "let's plot that. What we're going to get\nis Here's Vn, here's i n.",
    "start": "2178780",
    "end": "2188180"
  },
  {
    "text": "This converter, his\njob at his input port is basically to maintain\nthe system on this curve,",
    "start": "2188180",
    "end": "2197700"
  },
  {
    "text": "where Vn is equal\nto P out over i n.",
    "start": "2197700",
    "end": "2203670"
  },
  {
    "text": " And if he's going to sit\nat some operating point--",
    "start": "2203670",
    "end": "2209880"
  },
  {
    "text": "maybe that's here. Maybe I have some DC\noperating point Vn and capital",
    "start": "2209880",
    "end": "2215790"
  },
  {
    "text": "I n that we're going to sit at.",
    "start": "2215790",
    "end": "2220820"
  },
  {
    "text": "So how does this\nbehave for variations? Suppose my input voltage\nwiggles a little bit.",
    "start": "2220820",
    "end": "2229760"
  },
  {
    "text": "What does my input current do? Well, it's exactly the kind of\nlinearization we caught before.",
    "start": "2229760",
    "end": "2237050"
  },
  {
    "text": "I can look at what this\ntangent line looks like. And I can write d Vn, D\ni n evaluated at Vn i n",
    "start": "2237050",
    "end": "2249640"
  },
  {
    "text": "is equal to minus p\n0 over i n squared.",
    "start": "2249640",
    "end": "2255849"
  },
  {
    "text": "All I did was differentiate\nthis, and evaluate it at the operating point. And this is equal to what\nI'm going to call r sub l.",
    "start": "2255850",
    "end": "2266619"
  },
  {
    "text": "This is r sub l. This slope is r sub L. Does\nthat make sense to everybody?",
    "start": "2266620",
    "end": "2275030"
  },
  {
    "text": " Anybody notice anything about\nthis resistance here, r sub l,",
    "start": "2275030",
    "end": "2282870"
  },
  {
    "text": "this slope? AUDIENCE: It's negative. DAVID PERREAULT: It's negative. So this negative\nsign is the source",
    "start": "2282870",
    "end": "2289380"
  },
  {
    "text": "of a lot of pain\nand embarrassment, because essentially, from\na small signal perspective,",
    "start": "2289380",
    "end": "2295140"
  },
  {
    "text": "the power converter looks\nlike a negative resistance to the source. And negative resistances tend\nto make you unhappy because why?",
    "start": "2295140",
    "end": "2303310"
  },
  {
    "text": "Because they can make\nthings oscillate. All right? So if I then thought of what\nthis converter looks like,",
    "start": "2303310",
    "end": "2313340"
  },
  {
    "text": "OK, I might have, looking\nthis way, what I see",
    "start": "2313340",
    "end": "2319670"
  },
  {
    "text": "is rl is less than 0. Looking this way, I see\na negative resistor.",
    "start": "2319670",
    "end": "2328140"
  },
  {
    "text": "What do I see looking this way? I see Lf, Cf, and Rd.",
    "start": "2328140",
    "end": "2333190"
  },
  {
    "text": "So if I were to redraw\nthis, what I have is essentially Cf, Lf,\nand Rd in parallel.",
    "start": "2333190",
    "end": "2348330"
  },
  {
    "text": "And so this, we've\nbeen calling-- this output impedance we've\nbeen calling Zx, right?",
    "start": "2348330",
    "end": "2355540"
  },
  {
    "text": " And he's looking in\nthe other direction.",
    "start": "2355540",
    "end": "2361800"
  },
  {
    "text": "He's looking into\nrl less than 0. And this is my\nconverter and his load,",
    "start": "2361800",
    "end": "2371599"
  },
  {
    "text": "in the case where the\nconverter is perfect. All right. So what's going to be true?",
    "start": "2371600",
    "end": "2378110"
  },
  {
    "text": "Well, basically Rd and rl in\nthis example are in parallel. So the net resistance,\nR net, the effect",
    "start": "2378110",
    "end": "2387300"
  },
  {
    "text": "of resistance\ndamping the Lc tank, is equal to Rd rl\nover Rd plus rl.",
    "start": "2387300",
    "end": "2397530"
  },
  {
    "text": "Our net is greater than 0.  Our net is greater than 0\nfor the magnitude of Zx--",
    "start": "2397530",
    "end": "2407850"
  },
  {
    "text": "or I should say, for Rd is\nless than the magnitude of rl.",
    "start": "2407850",
    "end": "2417426"
  },
  {
    "text": "So if I'm looking in\nhere, and that slope-- ",
    "start": "2417426",
    "end": "2423839"
  },
  {
    "text": "this slope is minus\n1 ohms, I'd better make sure Rd is less than 1 ohm.",
    "start": "2423840",
    "end": "2430930"
  },
  {
    "text": "Otherwise, basically\nthis LCR stage is going to start to oscillate.",
    "start": "2430930",
    "end": "2436550"
  },
  {
    "text": "And that's not\ngoing to be happy. And this is true\nin this instance, but it's true in a lot\nof other instances,",
    "start": "2436550",
    "end": "2442730"
  },
  {
    "text": "where you have to\ndeal with these kind of self-regulating\nloads, is they just tend to destabilize your system.",
    "start": "2442730",
    "end": "2448589"
  },
  {
    "text": "And in this case, the\nsystem we're destabilizing is the input filter. But in other systems, you\ncan destabilize other things.",
    "start": "2448590",
    "end": "2454560"
  },
  {
    "text": "So in a DC power\nsystem, you might worry about what it's\ndoing to long inductive",
    "start": "2454560",
    "end": "2461220"
  },
  {
    "text": "runs of cable or capacitive\nfilters on things.",
    "start": "2461220",
    "end": "2466270"
  },
  {
    "text": "You can start to\nmake oscillations in constant power loads.",
    "start": "2466270",
    "end": "2471540"
  },
  {
    "text": "So generally, the\nreason we obsess over what's our output\nimpedance of our filter",
    "start": "2471540",
    "end": "2477800"
  },
  {
    "text": "is because I need to\nkeep it small enough that when it looks\ninto a negative input impedance-- effectively a power\nconverter-- the whole system is",
    "start": "2477800",
    "end": "2486470"
  },
  {
    "text": "going to be stable. And here I've shown you in\nthe simplest case for Rd.",
    "start": "2486470",
    "end": "2493410"
  },
  {
    "text": "But generally what we need, the\nmore general statement of this, is that we need the maximum--",
    "start": "2493410",
    "end": "2499713"
  },
  {
    "text": " output impedance of my\nfilter across all frequencies",
    "start": "2499713",
    "end": "2507210"
  },
  {
    "text": "ought to be well below\nthe magnitude of P",
    "start": "2507210",
    "end": "2513450"
  },
  {
    "text": "out minus P out\nover I n squared. ",
    "start": "2513450",
    "end": "2519445"
  },
  {
    "text": "So I've got to pick my damping. And that's going to drive\nme to go pick some minimum--",
    "start": "2519445",
    "end": "2526110"
  },
  {
    "text": "if I were to use this\ncapacitive damping scheme, that's going to drive me\nto pick some minimum value",
    "start": "2526110",
    "end": "2532110"
  },
  {
    "text": "of the damping capacitance\nso that I can minimize the maximum value of my output,\nmy filter output impedance,",
    "start": "2532110",
    "end": "2540540"
  },
  {
    "text": "across frequency. Does that make\nsense to everybody? ",
    "start": "2540540",
    "end": "2547760"
  },
  {
    "text": "Now just to drive home in your\nhead that this isn't some--",
    "start": "2547760",
    "end": "2554630"
  },
  {
    "text": "just some kind of\nmathematical funniness, Muncie has been very kind to\nset up an actual power converter",
    "start": "2554630",
    "end": "2562230"
  },
  {
    "text": "with an actual filter. ",
    "start": "2562230",
    "end": "2568910"
  },
  {
    "text": "And this is actually\na buck converter with an Lc input filter.",
    "start": "2568910",
    "end": "2576120"
  },
  {
    "text": "And then what she\nhas done is made sure that we can basically put a\nswitch on this damping leg.",
    "start": "2576120",
    "end": "2582940"
  },
  {
    "text": "We can put the damping leg in or\nwe can take the damping leg out. And if we power this up,\nthat's the input voltage",
    "start": "2582940",
    "end": "2600090"
  },
  {
    "text": "to the converter. So it's actually on the-- it's exactly the voltage\nVn here that we're seeing.",
    "start": "2600090",
    "end": "2610710"
  },
  {
    "text": "This is the input voltage\nthat we're looking at-- Vn. If we have the filter in\nplace, Vn basically sits at Vs.",
    "start": "2610710",
    "end": "2621810"
  },
  {
    "text": "But if I take out that damping\nleg, that's what happens.",
    "start": "2621810",
    "end": "2630620"
  },
  {
    "text": "The input voltage\nis still fixed, but this voltage is going crazy.",
    "start": "2630620",
    "end": "2635920"
  },
  {
    "text": "And you say, well, I\ncould live with that. I don't care. Well, it depends. Sometimes you can\nhear a lot of noise.",
    "start": "2635920",
    "end": "2642560"
  },
  {
    "text": "This is just with the\nconverter at some value, some value of load.",
    "start": "2642560",
    "end": "2648359"
  },
  {
    "text": "But imagine this thing\nwe're trying to drive, draw current varying\nnear that frequency, it would go really crazy.",
    "start": "2648360",
    "end": "2655130"
  },
  {
    "text": "So you really can't\ntolerate this kind of thing. And you would see\nthis in the out-- converter response at\nthe output and so forth.",
    "start": "2655130",
    "end": "2661920"
  },
  {
    "text": "So you really do have\nto seriously account not only for the fact that\nyou need to damp the LNC,",
    "start": "2661920",
    "end": "2668510"
  },
  {
    "text": "but you need to account\nfor the negative input impedance of the\nconverter in order",
    "start": "2668510",
    "end": "2673610"
  },
  {
    "text": "to get acceptable response. Any question about that? ",
    "start": "2673610",
    "end": "2688140"
  },
  {
    "text": "Now what I've told you\nso far is necessary.",
    "start": "2688140",
    "end": "2699500"
  },
  {
    "text": "You'd better design\nyour filter for that. But it comes out to be a\nlittle bit trickier too,",
    "start": "2699500",
    "end": "2705380"
  },
  {
    "text": "because we've talked\nabout modeling and control of your converter. We've said, OK, I want some\ncertain transfer functions.",
    "start": "2705380",
    "end": "2712590"
  },
  {
    "text": "We use averaging to derive\nkind of local average models, and you get your transfer\nfunctions and all that.",
    "start": "2712590",
    "end": "2721160"
  },
  {
    "text": "When we did all that,\nwe assumed that you were working from a perfect source.",
    "start": "2721160",
    "end": "2728630"
  },
  {
    "text": "The picture we drew\nfor our boost converter was just you as\na voltage source. It's just zero-impedance source.",
    "start": "2728630",
    "end": "2734640"
  },
  {
    "text": "We pretended there\nwas no filter there. In the real world,\nthere is a filter there. And that filter can indeed\nimpact your converter.",
    "start": "2734640",
    "end": "2743759"
  },
  {
    "text": "If I come back to\nthe baseline here,",
    "start": "2743760",
    "end": "2751770"
  },
  {
    "text": "maybe I don't have my LISN here.",
    "start": "2751770",
    "end": "2759350"
  },
  {
    "text": "That's fine. There's no LISN when I'm\nrunning in the real world. And maybe my source\nimpedance is low,",
    "start": "2759350",
    "end": "2766190"
  },
  {
    "text": "but I still have some\nconverter and filter.",
    "start": "2766190",
    "end": "2772631"
  },
  {
    "text": "And who knows what\nthis looks like? This looks like whatever\nthing you drew here.",
    "start": "2772632",
    "end": "2778195"
  },
  {
    "text": "But I could replace this whole\nthing with the source voltage",
    "start": "2778195",
    "end": "2785720"
  },
  {
    "text": "Vs and an output impedance\nZx, the output impedance seen",
    "start": "2785720",
    "end": "2793070"
  },
  {
    "text": "from my filter. So this is really the model\nof my source and filter.",
    "start": "2793070",
    "end": "2799280"
  },
  {
    "text": "It's the source voltage\nin series with the output impedance of my filter. That's a Thevenin\nmodel for my system.",
    "start": "2799280",
    "end": "2807518"
  },
  {
    "text": "And my assumption in designing\nthe converter and controller was that Zs was 0, or Zx was 0.",
    "start": "2807518",
    "end": "2815860"
  },
  {
    "text": "But Zx isn't 0 once\nI've designed my filter. How close do I need\nto make it towards 0?",
    "start": "2815860",
    "end": "2823380"
  },
  {
    "text": "Well, what I would\nlike to do is have",
    "start": "2823380",
    "end": "2829130"
  },
  {
    "text": "the case where all of\nmy models that I used to derive my converter, or\ncontrol of transfer function,",
    "start": "2829130",
    "end": "2835040"
  },
  {
    "text": "all of that stuff is valid. It's not affected by the\nfilter I designed later. ",
    "start": "2835040",
    "end": "2842170"
  },
  {
    "text": "And a sufficient--\nnot necessary, but a sufficient condition\nto doing that is two things.",
    "start": "2842170",
    "end": "2848150"
  },
  {
    "text": "And I'm not going to\nprove this to you. ",
    "start": "2848150",
    "end": "2855650"
  },
  {
    "text": "But there's some\nvery clever analysis. People have shown this,\nand in particular, Erickson and Maksimovic at\nUniversity of Colorado Boulder,",
    "start": "2855650",
    "end": "2865100"
  },
  {
    "text": "did some very nice\nanalysis of this. And a sufficient conversion--\na sufficient condition",
    "start": "2865100",
    "end": "2871190"
  },
  {
    "text": "is the following. First, if I assume my converter\noperates perfectly like this,",
    "start": "2871190",
    "end": "2878869"
  },
  {
    "text": "we would like the\noutput impedance of my filter, Zx,\nthe maximum value, to be much less than the\nmagnitude of the negative input",
    "start": "2878870",
    "end": "2886970"
  },
  {
    "text": "resistance if I have\nperfect control. And that would be\nperfectly the case",
    "start": "2886970",
    "end": "2893859"
  },
  {
    "text": "if I had a perfect\nconverter that had infinite bandwidth and\ncontrolling the output anyways. So I kind of need to\nmeet that requirement.",
    "start": "2893860",
    "end": "2900680"
  },
  {
    "text": " But what they showed\nis, in additionally, a sufficient\ncondition, although not",
    "start": "2900680",
    "end": "2906720"
  },
  {
    "text": "necessary to getting a stable\nsystem, but sufficient to be that you can ignore the\ndesign of the filter",
    "start": "2906720",
    "end": "2912990"
  },
  {
    "text": "or decouple the\ndesign of the filter from the design of your\ncontroller for your converter, is to also say, if I\nimagined, instead of having",
    "start": "2912990",
    "end": "2920880"
  },
  {
    "text": "a perfect controller\nover the output, I just regulated my converter\nat fixed-duty ratio.",
    "start": "2920880",
    "end": "2927220"
  },
  {
    "text": "And I looked at\nthe input impedance of the converter at fixed-duty\nratio across frequency--",
    "start": "2927220",
    "end": "2932319"
  },
  {
    "text": "and that's going to be\nvariable across frequency-- at every frequency, that input\nimpedance under fixed-duty ratio",
    "start": "2932320",
    "end": "2939789"
  },
  {
    "text": "ought to be smaller than\nthe output impedance at the same frequency looking\nback into my output filter.",
    "start": "2939790",
    "end": "2946490"
  },
  {
    "text": "If you put those two\nconditions together, you get a complete\nsufficient condition",
    "start": "2946490",
    "end": "2952687"
  },
  {
    "text": "that you can ignore the\neffect of the input filter on the rest of your\ncontrol design. ",
    "start": "2952687",
    "end": "2958844"
  },
  {
    "text": "But a good starting\nplace for all that is just to make sure\nthat under perfect control,",
    "start": "2958844",
    "end": "2966770"
  },
  {
    "text": "that your filter is\nwell enough damped to deal with the\nnegative resistance of a perfect controller.",
    "start": "2966770",
    "end": "2972210"
  },
  {
    "text": "So that's the\nplace I would start in thinking about any design. So that's a little bit about\nfilter design and filter",
    "start": "2972210",
    "end": "2980540"
  },
  {
    "text": "damping. The last thing I\nshould have mentioned was, well, what if this\nLc filter isn't enough?",
    "start": "2980540",
    "end": "2986270"
  },
  {
    "text": "You can cascade Lc\nfilter stages and get more and more attenuation.",
    "start": "2986270",
    "end": "2991920"
  },
  {
    "text": "And again, there's rules for how\nyou want to cascade those filter",
    "start": "2991920",
    "end": "2997220"
  },
  {
    "text": "impedances. And again, those\nare in the handouts. Any last questions before\nwe wrap up for the day?",
    "start": "2997220",
    "end": "3002250"
  },
  {
    "text": " OK, next class we'll talk about\none other additional item that's",
    "start": "3002250",
    "end": "3010339"
  },
  {
    "text": "very important in filter design. Have a great day. ",
    "start": "3010340",
    "end": "3018000"
  }
]