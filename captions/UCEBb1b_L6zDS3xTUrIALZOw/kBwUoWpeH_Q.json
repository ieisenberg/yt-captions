[
  {
    "start": "0",
    "end": "430000"
  },
  {
    "text": "Good morning.\nToday we're going to talk about it a balanced search structure,\nso a data structure that",
    "start": "7000",
    "end": "14799"
  },
  {
    "text": "maintains a dynamic set subject\nto insertion, deletion, and search called\nskip lists.",
    "start": "14800",
    "end": "21260"
  },
  {
    "text": "So, I'll call this a dynamic\nsearch structure because it's a data structure.\nIt supports search,",
    "start": "21260",
    "end": "28587"
  },
  {
    "text": "and it's dynamic,\nmeaning insert and delete. So, what other dynamic search\nstructures do we know,",
    "start": "28587",
    "end": "39324"
  },
  {
    "text": "just for sake of comparison,\nand to wake everyone up?",
    "start": "39324",
    "end": "45772"
  },
  {
    "text": "Shut them out,\nefficient, I should say, also good, logarithmic time per\noperation.",
    "start": "45772",
    "end": "55568"
  },
  {
    "text": "So, this is a really easy\nquestion to get us off the",
    "start": "55568",
    "end": "61892"
  },
  {
    "text": "ground.\nYou've seen them all in the last week, so it shouldn't be so\nhard.",
    "start": "61892",
    "end": "68637"
  },
  {
    "text": "Treap, good.\nOn the problems that we saw treaps.\nThat's, in some sense, the simplest dynamic search\nstructure you can get from first",
    "start": "68637",
    "end": "77840"
  },
  {
    "text": "principles because all we needed\nwas a bound on a randomly constructed binary search tree.\nAnd then treaps did well.",
    "start": "77840",
    "end": "86028"
  },
  {
    "text": "So, that was sort of the first\none you saw depending on when you did your problem set.\nWhat else?",
    "start": "86028",
    "end": "94000"
  },
  {
    "text": "Charles?\nRed black trees, good answer.\nSo, that was exactly one week",
    "start": "94000",
    "end": "100985"
  },
  {
    "text": "ago.\nI hope you still remember it. They have guaranteed log n\nperformance.",
    "start": "100985",
    "end": "108614"
  },
  {
    "text": "So, this was an expected bound.\nThis was a worst-case order log",
    "start": "108614",
    "end": "115277"
  },
  {
    "text": "n per operation,\ninsert, delete, and search.\nAnd, there was one more for",
    "start": "115277",
    "end": "122692"
  },
  {
    "text": "those who want to recitation on\nFriday: B trees,",
    "start": "122692",
    "end": "127743"
  },
  {
    "text": "good.\nAnd, by B trees, I also include two-three trees,\ntwo-three-four trees,",
    "start": "127743",
    "end": "134082"
  },
  {
    "text": "and all those guys.\nSo, if B is a constant, or if you want your B trees\nknows a little bit cleverly,",
    "start": "134082",
    "end": "139906"
  },
  {
    "text": "that these have guaranteed\norder log n performance, so, worst case,\norder log n. So, you should know this.\nThese are all balanced search",
    "start": "139906",
    "end": "147771"
  },
  {
    "text": "structures.\nThey are dynamic. They support insertions and\ndeletions. They support searches,\nfinding a given key.",
    "start": "147771",
    "end": "154195"
  },
  {
    "text": "And if you don't find the key,\nyou find its predecessor and successor pretty easily in all\nof these structures.",
    "start": "154195",
    "end": "162000"
  },
  {
    "text": "If you want to augment some\ndata structure, you should think about which\none of these is easiest to",
    "start": "162000",
    "end": "168673"
  },
  {
    "text": "augment, as in Monday's lecture.\nSo, the question I want to pose to you is supposed I gave you\nall a laptop right now,",
    "start": "168673",
    "end": "176668"
  },
  {
    "text": "which would be great.\nThen I asked you, in order to keep this laptop\nyou have to implement one of",
    "start": "176668",
    "end": "183203"
  },
  {
    "text": "these data structures,\nlet's say, within this class hour.\nDo you think you could do it?",
    "start": "183203",
    "end": "189817"
  },
  {
    "text": "How many people think you could\ndo it? A couple people,\na few people, OK, all front row people,\ngood.",
    "start": "189817",
    "end": "195834"
  },
  {
    "text": "I could probably do it.\nMy preference would be B trees. They're sort of the simplest in\nmy mind.",
    "start": "195834",
    "end": "201663"
  },
  {
    "text": "This is without using the\ntextbook. This would be a closed book\nexam. I don't have enough laptops to\ndo it, unfortunately.",
    "start": "201663",
    "end": "210000"
  },
  {
    "text": "So, B trees are pretty\nreasonable. Deletion, you have to remember\nstealing from a sibling and",
    "start": "210000",
    "end": "215484"
  },
  {
    "text": "whatnot.\nSo, deletions are a bit tricky. Red black trees,\nI can never remember it. I'd have to look it up,\nor re-derive the three cases.",
    "start": "215484",
    "end": "223467"
  },
  {
    "text": "treaps are a bit fancy.\nSo, that would take a little while to remember exactly how\nthose work.",
    "start": "223467",
    "end": "229012"
  },
  {
    "text": "You'd have to solve your\nproblem set again, if you don't have it memorized.\nSkip lists, on the other hand,",
    "start": "229012",
    "end": "235289"
  },
  {
    "text": "are a data structure you will\nnever forget, and something you can implement\nwithin an hour,",
    "start": "235289",
    "end": "240651"
  },
  {
    "text": "no problem.\nI've made this claim a couple times before,\nand I always felt bad because I",
    "start": "240651",
    "end": "245770"
  },
  {
    "text": "had never actually done it.\nSo, this morning, I implemented skip lists,\nand it took me ten minutes to",
    "start": "245770",
    "end": "253733"
  },
  {
    "text": "implement a linked list,\nand 30 minutes to implement skip lists.\nAnd another 30 minutes",
    "start": "253733",
    "end": "259333"
  },
  {
    "text": "debugging them.\nThere you go. It can be done.\nSkip lists are really simple. And, at no point writing the\ncode did I have to think,",
    "start": "259333",
    "end": "267666"
  },
  {
    "text": "whereas every other structure I\nwould have to think. There was one moment when I\nthought, ah, how do I flip a",
    "start": "267666",
    "end": "276021"
  },
  {
    "text": "coin?\nThat was the entire amount of thinking.\nSo, skip lists are a randomized",
    "start": "276021",
    "end": "281431"
  },
  {
    "text": "structure.\nLet's add in another adjective here, and let's also add in\nsimple.",
    "start": "281432",
    "end": "286843"
  },
  {
    "text": "So, we have a simple,\nefficient, dynamic, randomized search structure:\nall those things together.",
    "start": "286843",
    "end": "293716"
  },
  {
    "text": "So, it's sort of like treaps\nand that the bound is only a randomized bound.\nBut today, we're going to see a",
    "start": "293716",
    "end": "301320"
  },
  {
    "text": "much stronger bound than an\nexpectation bound. So, in particular,\nskip lists will run in order",
    "start": "301320",
    "end": "311366"
  },
  {
    "text": "log n expected time.\nSo, the running time for each",
    "start": "311366",
    "end": "317083"
  },
  {
    "text": "operation will be order log n in\nexpectation.",
    "start": "317083",
    "end": "322216"
  },
  {
    "text": "But, we're going to prove a\nmuch stronger result that their",
    "start": "322216",
    "end": "328983"
  },
  {
    "text": "order log n, with high\nprobability.",
    "start": "328983",
    "end": "334000"
  },
  {
    "text": "So, this is a very strong\nclaim. And it means that the running\ntime of each operation,",
    "start": "334000",
    "end": "342613"
  },
  {
    "text": "the running time of every\noperation is order log n almost",
    "start": "342613",
    "end": "348424"
  },
  {
    "text": "always in a certain sense.\nWhy don't I foreshadow that?",
    "start": "348424",
    "end": "354028"
  },
  {
    "text": "So, it's something like,\nthe probability that it's order",
    "start": "354028",
    "end": "359735"
  },
  {
    "text": "log n is at least one minus one\nover some polynomial,",
    "start": "359735",
    "end": "365132"
  },
  {
    "text": "and n.\nAnd, you get to set the polynomial however large you\nlike.",
    "start": "365132",
    "end": "370149"
  },
  {
    "text": "So, what this basically means\nis that almost all the time, you take your skip lists,\nyou do a polynomial number of",
    "start": "370149",
    "end": "376391"
  },
  {
    "text": "operations on it,\nbecause presumably you are running a polynomial time\nalgorithm that using this data",
    "start": "376391",
    "end": "381901"
  },
  {
    "text": "structure.\nDo polynomial numbers of inserts, delete searches,\nevery single one of them will take order log n time,\nalmost guaranteed.",
    "start": "381902",
    "end": "390000"
  },
  {
    "text": "So this is a really strong\nbound on the tail of the distribution.\nThe mean is order log n.",
    "start": "390000",
    "end": "396624"
  },
  {
    "text": "That's not so exciting.\nBut, in fact, almost all of the weight of\nthis probability distribution is",
    "start": "396624",
    "end": "403857"
  },
  {
    "text": "right around the log n,\njust tiny little epsilons, very tiny probabilities you\ncould be bigger than log n.",
    "start": "403857",
    "end": "411700"
  },
  {
    "text": "So that's where we are going.\nThis is a data structure by Pugh] in 1989.\nThis is the most recent.",
    "start": "411700",
    "end": "420000"
  },
  {
    "text": "Actually, no,\nsorry, treaps are more recent. They were like '93 or so,\nbut a fairly recent data",
    "start": "420000",
    "end": "426672"
  },
  {
    "text": "structure for just insert,\ndelete, search. And, it's very simple.\nYou can derive it if you don't",
    "start": "426673",
    "end": "433419"
  },
  {
    "start": "430000",
    "end": "625000"
  },
  {
    "text": "know anything about data\nstructures, well, almost nothing.\nNow, analyzing that the",
    "start": "433419",
    "end": "439150"
  },
  {
    "text": "performance is log n,\nthat, of course, takes our sophistication.\nBut the data structure itself",
    "start": "439150",
    "end": "445751"
  },
  {
    "text": "is very simple.\nWe're going to start from scratch.\nSuppose you don't know what a",
    "start": "445751",
    "end": "454133"
  },
  {
    "text": "red black tree is.\nYou don't know what a B tree is.\nSuppose you don't even know",
    "start": "454133",
    "end": "461651"
  },
  {
    "text": "what a tree is.\nWhat is the simplest data structure for storing a bunch of\nitems for storing a dynamic set?",
    "start": "461652",
    "end": "471941"
  },
  {
    "text": "A list, good,\na linked list. Now, suppose that it's a sorted\nlinked list.",
    "start": "471941",
    "end": "478866"
  },
  {
    "text": "So, I'm going to be a little\nbit fancier there.",
    "start": "478866",
    "end": "485000"
  },
  {
    "text": "So, if you have a linked list\nof items, here it is,",
    "start": "485000",
    "end": "490630"
  },
  {
    "text": "maybe we'll make it doubly\nlinked just for kicks,",
    "start": "490630",
    "end": "496036"
  },
  {
    "text": "how long does it take to search\nin a sorted linked list?",
    "start": "496036",
    "end": "502229"
  },
  {
    "text": "Log n is one answer.\nn is the other answer. Which one is right?\nn is the right answer.",
    "start": "502229",
    "end": "511488"
  },
  {
    "text": "So, even though it's sorted,\nwe can't do binary search because we don't have\nrandom-access into a linked",
    "start": "511488",
    "end": "518320"
  },
  {
    "text": "list.\nSo, suppose I'm only given a pointer to the head.\nOtherwise, I'm assuming it's an",
    "start": "518321",
    "end": "524003"
  },
  {
    "text": "array.\nSo, in a sorted array you can search in log n.\nSorted linked list: you've still got to scan\nthrough the darn thing.",
    "start": "524004",
    "end": "531919"
  },
  {
    "text": "So, theta n,\nworst case search. Not so good,\nbut if we just try to improve it a little bit,\nwe will discover skip lists",
    "start": "531919",
    "end": "539632"
  },
  {
    "text": "automatically.\nSo, this is our starting point: sorted linked lists,\ndata n time.",
    "start": "539632",
    "end": "546003"
  },
  {
    "text": "And, I'm not going to think too\nmuch about insertions and deletions for the moment.\nLet's just get search better,",
    "start": "546004",
    "end": "552995"
  },
  {
    "text": "and then we'll worry about\ndates. Updates are where randomization\nwill come in. Search: pretty easy idea.\nSo, how can we make a linked",
    "start": "552995",
    "end": "561194"
  },
  {
    "text": "list better?\nSuppose all we know about our linked lists.\nWhat can I do to make it faster?\nThis is where you need a little",
    "start": "561194",
    "end": "568566"
  },
  {
    "text": "bit of innovation,\nsome creativity. More links: that's a good idea.\nSo, I do try to maybe add",
    "start": "568567",
    "end": "577377"
  },
  {
    "text": "pointers to go a couple steps\nahead. If I had log n pointers,\nI could do all powers of two",
    "start": "577377",
    "end": "585730"
  },
  {
    "text": "ahead.\nThat's a pretty good search structure.\nSome people use that;",
    "start": "585731",
    "end": "591877"
  },
  {
    "text": "like, some peer-to-peer\nnetworks use that idea. But that's a little too fancy\nfor me.",
    "start": "591877",
    "end": "601000"
  },
  {
    "text": "Ah, good.\nYou could try to build a tree on this linear structure.\nThat's essentially where we're",
    "start": "601000",
    "end": "607172"
  },
  {
    "text": "going.\nSo, you could try to put pointers to, like,\nthe middle of the list from the",
    "start": "607172",
    "end": "612415"
  },
  {
    "text": "roots.\nSo, you search between either here.\nYou point to the median, so you can compare against the\nmedian, and know whether you",
    "start": "612415",
    "end": "620513"
  },
  {
    "text": "should go in the first half or\nthe second half that's definitely on the right track,\nalso a bit too sophisticated.",
    "start": "620513",
    "end": "627880"
  },
  {
    "start": "625000",
    "end": "855000"
  },
  {
    "text": "Another list:\nyes. Yes, good.\nSo, we are going to use two",
    "start": "627880",
    "end": "632924"
  },
  {
    "text": "lists.\nThat's sort of the next simplest thing you could do.\nOK, and as you suggested,",
    "start": "632924",
    "end": "638766"
  },
  {
    "text": "we could maybe have pointers\nbetween them. So, maybe we have some elements\ndown here, some of the elements",
    "start": "638767",
    "end": "646108"
  },
  {
    "text": "up here.\nWe want to have pointers between the lists.\nOK, it gets a little bit crazy",
    "start": "646108",
    "end": "651809"
  },
  {
    "text": "in how exactly you might do\nthat. But somehow,\nthis feels good. So this is one linked list:\nL_1.",
    "start": "651809",
    "end": "658294"
  },
  {
    "text": "This is another linked list:\nL_2. And, to give you some\ninspiration, I want to give you,",
    "start": "658294",
    "end": "672965"
  },
  {
    "text": "so let's play a game.\nThe game is,",
    "start": "672965",
    "end": "679793"
  },
  {
    "text": "what is this sequence?\nSo, the sequence is 14.",
    "start": "679793",
    "end": "689103"
  },
  {
    "text": "If you know the answer,\nshout it out.",
    "start": "689103",
    "end": "698000"
  },
  {
    "text": "Anyone yet? OK, it's tricky.",
    "start": "698000",
    "end": "702000"
  },
  {
    "text": "It's a bit of a small class,\nso I hope someone knows the answer.",
    "start": "714000",
    "end": "719000"
  },
  {
    "text": "How many TA's know the answer?\nJust a couple, OK, if you're looking at the\nslides, probably you know the",
    "start": "730000",
    "end": "739384"
  },
  {
    "text": "answer.\nThat's cheating. OK, I'll give you a hint.\nIt is not a mathematical",
    "start": "739384",
    "end": "746074"
  },
  {
    "text": "sequence.\nThis is a real-life sequence. Yeah?\nYeah, and what city?",
    "start": "746075",
    "end": "752939"
  },
  {
    "text": "New York, yeah,\nthis is the 7th Ave line. This is my favorite subway line\nin New York.",
    "start": "752939",
    "end": "760988"
  },
  {
    "text": "But, what's a cool feature of\nthe New York City subway?",
    "start": "760989",
    "end": "766227"
  },
  {
    "text": "OK, it's a skip list.\nGood answer. [LAUGHTER] Indeed it is.\nSkip lists are so practical.",
    "start": "766227",
    "end": "774471"
  },
  {
    "text": "They've been implemented in the\nsubway system.",
    "start": "774471",
    "end": "780000"
  },
  {
    "text": "How cool is that?\nOK, Boston subway is pretty cool because it's the oldest\nsubway definitely in the United",
    "start": "780000",
    "end": "788200"
  },
  {
    "text": "States, maybe in the world.\nNew York is close, and it has other nice features\nlike it's open 24 hours.",
    "start": "788200",
    "end": "796082"
  },
  {
    "text": "That's a definite plus,\nbut it also has this feature of express lines.\nSo, it's a bit of an",
    "start": "796082",
    "end": "803089"
  },
  {
    "text": "abstraction,\nbut the 7th Ave line has essentially two kinds of cars.\nThese are street numbers by the",
    "start": "803089",
    "end": "809619"
  },
  {
    "text": "way.\nThis is, Penn Station, Times Square,\nand so on. So, there are essentially two\nlines.",
    "start": "809619",
    "end": "816181"
  },
  {
    "text": "There's the express line which\ngoes 14, to 34, to 42, to 72,\nto 96. And then, there's the local\nline which stops at every stop.",
    "start": "816181",
    "end": "825607"
  },
  {
    "text": "And, they accomplish this with\nfour sets of tracks. So, I mean, the express lines\nhave their own dedicated track.",
    "start": "825607",
    "end": "834105"
  },
  {
    "text": "If you want to go to stop 59\nfrom, let's say, Penn Station,\nwell, let's say from lower west",
    "start": "834105",
    "end": "840905"
  },
  {
    "text": "side, you get on the express\nline. You jump to 42 pretty quickly,\nand then you switch over to the",
    "start": "840905",
    "end": "850956"
  },
  {
    "text": "local line, and go on to 59 or\nwherever I said I was going.",
    "start": "850956",
    "end": "856619"
  },
  {
    "start": "855000",
    "end": "1065000"
  },
  {
    "text": "OK, so this is express and\nlocal lines, and we can represent that with a couple of\nlists.",
    "start": "856619",
    "end": "865016"
  },
  {
    "text": "We have one list,\nsure, we have one list on the bottom, so leave some space up\nhere.",
    "start": "865016",
    "end": "874000"
  },
  {
    "text": "This is the local line,\nL_2, 34, 42,",
    "start": "874000",
    "end": "888626"
  },
  {
    "text": "50, 59, 66, 72,\n79, and so on.",
    "start": "888626",
    "end": "902000"
  },
  {
    "text": "And then we had the express\nline on top, which only stops at",
    "start": "902000",
    "end": "908833"
  },
  {
    "text": "14, 34, 42, 72,\nand so on. I'm not going to redraw the\nwhole list.",
    "start": "908833",
    "end": "916131"
  },
  {
    "text": "You get the idea.\nAnd so, what we're going to do",
    "start": "916131",
    "end": "921574"
  },
  {
    "text": "is put links between in the\nlocal and express lines,",
    "start": "921575",
    "end": "927482"
  },
  {
    "text": "wherever they happen to meet.\nAnd, that's our two linked list",
    "start": "927482",
    "end": "934889"
  },
  {
    "text": "structure.\nSo, that's what I actually meant what I was trying to draw\nsome picture.",
    "start": "934889",
    "end": "942347"
  },
  {
    "text": "Now, this has a property that\nin one list, the bottom list,",
    "start": "942347",
    "end": "947753"
  },
  {
    "text": "every element occurs.\nAnd the top list just copies some of those elements.\nAnd we're going to preserve",
    "start": "947754",
    "end": "956983"
  },
  {
    "text": "that property.\nSo, L_2 stores all the elements, and L_1 stores some\nsubset.",
    "start": "956983",
    "end": "965000"
  },
  {
    "text": "And, it's still open which ones\nwe should store.",
    "start": "965000",
    "end": "970912"
  },
  {
    "text": "That's the one thing we need to\nthink about.",
    "start": "970912",
    "end": "976321"
  },
  {
    "text": "But, our inspiration is from\nthe New York subway system.",
    "start": "976322",
    "end": "983241"
  },
  {
    "text": "OK, there, that the idea.\nOf course, we're also going to",
    "start": "983241",
    "end": "990161"
  },
  {
    "text": "use more than two lists.\nOK, we also have links.",
    "start": "990161",
    "end": "996074"
  },
  {
    "text": "Let's say it links between\nequal keys in L_1 and L_2.",
    "start": "996074",
    "end": "1004000"
  },
  {
    "text": "Good.\nSo, just for the sake of completeness,\nand because we will need this",
    "start": "1004000",
    "end": "1010203"
  },
  {
    "text": "later, let's talk about searches\nbefore we worry about how these",
    "start": "1010203",
    "end": "1015708"
  },
  {
    "text": "lists are actually constructed.\nOf course, if I wanted that",
    "start": "1015708",
    "end": "1020776"
  },
  {
    "text": "board.\nSo, if you want to search for an element, x,\nwhat do you do?",
    "start": "1020776",
    "end": "1026334"
  },
  {
    "text": "Well, this is the taking the\nsubway algorithm. And, suppose you always start\nin the upper left corner of the",
    "start": "1026335",
    "end": "1034182"
  },
  {
    "text": "subway system,\nif you're always in the lower west side, 14th St,\nand I don't know exactly where",
    "start": "1034182",
    "end": "1041058"
  },
  {
    "text": "that is, but more or less,\nsomewhere down at the bottom of Manhattan.\nAnd, you want to go to a",
    "start": "1041059",
    "end": "1047860"
  },
  {
    "text": "particular station like 59.\nWell, you'd stay on the express",
    "start": "1047860",
    "end": "1053110"
  },
  {
    "text": "line as long as you can because\nit happens that we started on the express line.\nAnd then, you go down.",
    "start": "1053110",
    "end": "1059849"
  },
  {
    "text": "And then you take the local\nline the rest of the way. That's clearly the right thing\nto do if you always start in the",
    "start": "1059849",
    "end": "1067610"
  },
  {
    "start": "1065000",
    "end": "1262000"
  },
  {
    "text": "top left corner.\nSo, I'm going to write that down in some kind of an\nalgorithm because we will be",
    "start": "1067610",
    "end": "1074009"
  },
  {
    "text": "generalizing it.\nIt's pretty obvious at this point.\nIt will remain obvious.",
    "start": "1074009",
    "end": "1080000"
  },
  {
    "text": "So, I want to walk right in the\ntop list until that would go too",
    "start": "1080000",
    "end": "1086096"
  },
  {
    "text": "far.\nSo, you imagine giving someone directions on the subway system\nthey've never been on.",
    "start": "1086096",
    "end": "1094516"
  },
  {
    "text": "So, you say,\nOK, you start at 14th. Take the express line,\nand when you get to 72nd,",
    "start": "1094516",
    "end": "1102354"
  },
  {
    "text": "you've gone too far.\nGo back one, and then go down to the local\nline.",
    "start": "1102354",
    "end": "1110000"
  },
  {
    "text": "It's really annoying\ndirections. But this is what an algorithm\nhas to do because it's never",
    "start": "1110000",
    "end": "1117351"
  },
  {
    "text": "taken the subway before.\nSo, it's going to check, so let's do it here.\nSo, suppose I'm aiming for 59.",
    "start": "1117352",
    "end": "1125540"
  },
  {
    "text": "So, I started 14,\nsay the first thing I do is go to 34.\nThen from there,",
    "start": "1125540",
    "end": "1131305"
  },
  {
    "text": "I go to 42.\nStill good because 59 is bigger than 42.\nI go right again.",
    "start": "1131305",
    "end": "1136903"
  },
  {
    "text": "I say, oops,\n72 is too big. That was too far.\nSo, I go back to where it just",
    "start": "1136903",
    "end": "1144779"
  },
  {
    "text": "was.\nThen I go down and then I keep going right until I find the\nelement that I want,",
    "start": "1144780",
    "end": "1152379"
  },
  {
    "text": "or discover that it's not in\nthe bottom list because bottom",
    "start": "1152379",
    "end": "1157754"
  },
  {
    "text": "list has everyone.\nSo, that's the algorithm. Stop when going right would go\ntoo far, and you discover that",
    "start": "1157754",
    "end": "1167299"
  },
  {
    "text": "with a comparison.\nThen you walk down to L_2. And then you walk right in L_2\nuntil you find x,",
    "start": "1167299",
    "end": "1175731"
  },
  {
    "text": "or you find something greater\nthan x, in which case x is",
    "start": "1175732",
    "end": "1180829"
  },
  {
    "text": "definitely not on your list.\nAnd you found the predecessor",
    "start": "1180829",
    "end": "1186793"
  },
  {
    "text": "and successor,\nwhich may be your goal. If you didn't find where x was,\nyou should find where it would",
    "start": "1186793",
    "end": "1192855"
  },
  {
    "text": "go if it were there,\nbecause then maybe you could insert there.\nWe're going to use this",
    "start": "1192855",
    "end": "1198051"
  },
  {
    "text": "algorithm in insertion.\nOK, but that search: pretty easy at this point.\nNow, what we haven't discussed",
    "start": "1198051",
    "end": "1205027"
  },
  {
    "text": "is how fast the search algorithm\nis, and it depends, of course, which elements we're\ngoing to store in L_1,",
    "start": "1205027",
    "end": "1212054"
  },
  {
    "text": "which subset of elements should\ngo in L_1. Now, in the subway system,\nyou probably put all the",
    "start": "1212054",
    "end": "1218202"
  },
  {
    "text": "popular stations in L_1.\nBut here, we want worst-case performance.\nSo, we don't have some",
    "start": "1218202",
    "end": "1224013"
  },
  {
    "text": "probability distribution on the\nnodes. We just like every node to be\naccessed sort of as quickly as",
    "start": "1224013",
    "end": "1230500"
  },
  {
    "text": "possible, uniformly.\nSo, we want to minimize the maximum time over all queries.\nSo, any ideas what we should do",
    "start": "1230500",
    "end": "1239867"
  },
  {
    "text": "with L_1?\nShould I put all the nodes of L_1 in the beginning?\nOK, it's a strict subset.",
    "start": "1239867",
    "end": "1246421"
  },
  {
    "text": "Suppose I told you what the\nsize of L_1 was. I can tell you,\nI could afford to build this",
    "start": "1246421",
    "end": "1253132"
  },
  {
    "text": "many express stops.\nHow should you distribute them among the elements of L_2?\nUniformly, good.",
    "start": "1253132",
    "end": "1262731"
  },
  {
    "text": "So, what nodes,\nsorry, what keys,",
    "start": "1262731",
    "end": "1268195"
  },
  {
    "text": "let's say, go in L_1?\nWell, definitely the best thing",
    "start": "1268195",
    "end": "1277073"
  },
  {
    "text": "to do is to spread them out\nuniformly, OK,",
    "start": "1277073",
    "end": "1284073"
  },
  {
    "text": "which is definitely not what\nthe 7th Ave line looks like.",
    "start": "1284073",
    "end": "1295000"
  },
  {
    "text": "But, let's imagine that we\ncould reengineer everything. So, we're going to try to space\nthese things out a little bit",
    "start": "1295000",
    "end": "1305107"
  },
  {
    "text": "more.\nSo, 34 and 42nd are way too close.\nWe'll take a few more stops.",
    "start": "1305108",
    "end": "1310960"
  },
  {
    "text": "And, now we can start to\nanalyze things. OK, as a function of the length\nof L_1.",
    "start": "1310960",
    "end": "1317788"
  },
  {
    "text": "So, the cost of a search is now\nroughly, so, I want a function",
    "start": "1317788",
    "end": "1323197"
  },
  {
    "text": "of the length of L_1,\nand the length of L_2, which is all the elements,\nn.",
    "start": "1323197",
    "end": "1331000"
  },
  {
    "text": "What is the cost of the search\nif I spread out all the elements",
    "start": "1331000",
    "end": "1338141"
  },
  {
    "text": "in L_1 uniformly?\nYeah? Right, the total number of\nelements in the top lists,",
    "start": "1338141",
    "end": "1346664"
  },
  {
    "text": "plus the division between the\nbottom and the top.",
    "start": "1346664",
    "end": "1353000"
  },
  {
    "text": "So, I'll write the length of\nL_1 plus the length of L_2 divided by the length of L_1.\nOK, this is roughly,",
    "start": "1353000",
    "end": "1359249"
  },
  {
    "text": "I mean, there's maybe a plus\none or so here because in the worst case, I have to search\nthrough all of L_1 because the",
    "start": "1359249",
    "end": "1366226"
  },
  {
    "text": "station I could be looking for\ncould be the max. OK, and maybe I'm not lucky,\nand the max is not on the",
    "start": "1366226",
    "end": "1372294"
  },
  {
    "text": "express line.\nSo then, I have to go down to the local line.\nAnd how many stops will I have",
    "start": "1372294",
    "end": "1377573"
  },
  {
    "text": "to go on the local line?\nWell, L_1 just evenly partitions L_2.\nSo this is the number of",
    "start": "1377573",
    "end": "1384986"
  },
  {
    "text": "consecutive stations between two\nexpress stops. So, I take the express,\npossibly this long,",
    "start": "1384986",
    "end": "1392299"
  },
  {
    "text": "but I take the local possibly\nthis long. And, this is an L_2.\nAnd there is,",
    "start": "1392300",
    "end": "1398284"
  },
  {
    "text": "plus, a constant,\nfor example, go walking down.\nBut that's basically the number",
    "start": "1398284",
    "end": "1404600"
  },
  {
    "text": "of nodes that I visit.\nSo, I'd like to minimize this function.\nNow, L_2, I'm going to call",
    "start": "1404600",
    "end": "1416625"
  },
  {
    "text": "that n because that's the total\nnumber of elements.",
    "start": "1416625",
    "end": "1427041"
  },
  {
    "text": "L_1, I can choose to be\nwhatever I want.",
    "start": "1427041",
    "end": "1435166"
  },
  {
    "text": "So, let's go over here.\nSo, I want to minimize L_1 plus",
    "start": "1435166",
    "end": "1443894"
  },
  {
    "text": "n over L_1.\nAnd I get to choose L_1. Now, I could differentiate\nthis, set it to zero,",
    "start": "1443894",
    "end": "1451551"
  },
  {
    "text": "and go crazy.\nOr, I could realize that, I mean, that's not hard.\nBut, that's a little bit too",
    "start": "1451551",
    "end": "1459954"
  },
  {
    "text": "fancy for me.\nSo, I could say, well, this is clearly best when\nL_1 is small.",
    "start": "1459954",
    "end": "1466771"
  },
  {
    "text": "And this is clearly best when\nL_1 is large.",
    "start": "1466771",
    "end": "1472000"
  },
  {
    "text": "So, there's a trade-off there.\nAnd, the trade-off will be",
    "start": "1472000",
    "end": "1477927"
  },
  {
    "text": "roughly minimized up to constant\nfactors when these two terms are",
    "start": "1477927",
    "end": "1484701"
  },
  {
    "text": "equal.\nThat's when I have pretty good balance between the two ends of\nthe trade-off.",
    "start": "1484701",
    "end": "1493274"
  },
  {
    "text": "So, this is up to constant\nfactors. I can let L_1 equal n over L_1,\nOK, because at most I'm losing",
    "start": "1493275",
    "end": "1503331"
  },
  {
    "text": "a factor of two there when they\nhappen to be equal.",
    "start": "1503331",
    "end": "1510000"
  },
  {
    "text": "So now, I just solve this.\nThis is really easy. This is (L_1)^2 equals n.\nSo, L_1 is the square root of",
    "start": "1510000",
    "end": "1518713"
  },
  {
    "text": "n.\nOK, so the cost that I'm getting over here,\nL_1 plus L_2 over L_1 is the",
    "start": "1518713",
    "end": "1524987"
  },
  {
    "text": "square root of n plus n over\nroot n, which is, again, root n.\nSo, I get two root n.",
    "start": "1524987",
    "end": "1532722"
  },
  {
    "text": "So, search cost,\nand I'm caring about the constant here,\nbecause it will matter in a",
    "start": "1532723",
    "end": "1539369"
  },
  {
    "text": "moment.\nTwo square root of n: I'm not caring about the\nadditive constant,",
    "start": "1539369",
    "end": "1545112"
  },
  {
    "text": "but the multiplicative constant\nI care about. OK, that seems good.\nWe started with a linked list",
    "start": "1545112",
    "end": "1552743"
  },
  {
    "text": "that searched in n time,\ntheta n time per operation. Now we have two linked lists,\nsearch and theta root n time.",
    "start": "1552743",
    "end": "1563000"
  },
  {
    "text": "It seems pretty good.\nThis is what the structure looks like.\nWe have root n guys here.",
    "start": "1563000",
    "end": "1570570"
  },
  {
    "text": "This is in the local line.\nAnd, we have one express stop",
    "start": "1570570",
    "end": "1575586"
  },
  {
    "text": "which represents that.\nBut we have another root n values in the local line.\nAnd we have one express stop",
    "start": "1575586",
    "end": "1584798"
  },
  {
    "text": "that represents that.\nAnd these two are linked, and so on.",
    "start": "1584798",
    "end": "1591000"
  },
  {
    "text": "Well, I should put some dot,\ndot, dots in there. OK, so each of these chunks has\nlength root n,",
    "start": "1602000",
    "end": "1607096"
  },
  {
    "text": "and the number of\nrepresentatives up here is square root of n.\nThe number of express stops is square root of n.\nSo clearly, things are balanced",
    "start": "1607096",
    "end": "1614742"
  },
  {
    "text": "now.\nI search for, at most, square root of n up\nhere. Then I search in one of these\nlists for, at most,",
    "start": "1614742",
    "end": "1620171"
  },
  {
    "text": "square root of n.\nSo, every search takes, at most, two root n.\nCool, what should we do next?",
    "start": "1620171",
    "end": "1630565"
  },
  {
    "text": "So, again, ignore insertions\nand deletions. I want to make searches faster\nbecause square root of n is not",
    "start": "1630565",
    "end": "1642819"
  },
  {
    "text": "so hot as we know.\nSorry? More lines.\nLet's add a super express line,",
    "start": "1642819",
    "end": "1650672"
  },
  {
    "text": "or another linked list.\nOK, this was two. Why not do three?\nSo, we started with a sorted",
    "start": "1650672",
    "end": "1661812"
  },
  {
    "text": "linked list.\nThen we went to two. This gave us two square root of\nn.",
    "start": "1661812",
    "end": "1668340"
  },
  {
    "text": "Now, I want three sorted linked\nlists. I didn't pluralize here.\nAny guesses what the running",
    "start": "1668340",
    "end": "1677279"
  },
  {
    "text": "time might be?\nThis is just guesswork. Don't think.\nFrom two square root of n,",
    "start": "1677279",
    "end": "1685834"
  },
  {
    "text": "you would go to,\nsorry? Two square root of two,\nfourth root of n?",
    "start": "1685834",
    "end": "1692091"
  },
  {
    "text": "That's on the right track.\nBoth the constant and the root",
    "start": "1692091",
    "end": "1697742"
  },
  {
    "text": "change, but not quite so\nfancily. Three times the cubed root:\ngood.",
    "start": "1697743",
    "end": "1704201"
  },
  {
    "text": "Intuition is very helpful here.\nIt doesn't matter what the",
    "start": "1704201",
    "end": "1709954"
  },
  {
    "text": "right answer is.\nUse your intuition.",
    "start": "1709954",
    "end": "1715000"
  },
  {
    "text": "You can prove that.\nIt's not so hard. You now have three lists,\nand what you want to balance",
    "start": "1715000",
    "end": "1720632"
  },
  {
    "text": "are at the length of the top\nlist, the ratio between the top two lists, and the ratio between\nthe bottom two lists.",
    "start": "1720632",
    "end": "1727721"
  },
  {
    "text": "So, you want these three to\nmultiply out to n, because the top times the ratio\ntimes the ratio:",
    "start": "1727721",
    "end": "1733544"
  },
  {
    "text": "that has to equal n.\nAnd, so that's where you get the cubed root of n.\nEach of these should be equal.",
    "start": "1733544",
    "end": "1739746"
  },
  {
    "text": "So, you set them because the\ncost is the sum of those three things.\nSo, you set each of them to",
    "start": "1739746",
    "end": "1747470"
  },
  {
    "text": "cubed root of n,\nand there are three of them. OK, check it at home if you\nwant to be more sure.",
    "start": "1747470",
    "end": "1755888"
  },
  {
    "text": "Obviously, we want a few more.\nSo, let's think about k sorted",
    "start": "1755888",
    "end": "1761378"
  },
  {
    "text": "lists.\nk sorted lists will be k times the k'th root of n.\nYou probably guessed that by",
    "start": "1761379",
    "end": "1768973"
  },
  {
    "text": "now.\nSo, what should we set k to? I don't want the exact minimum.\nWhat's a good value for k?",
    "start": "1768973",
    "end": "1778013"
  },
  {
    "text": "Should I set it to n?\nn's kind of nice, because the n'th root of n is\njust one.",
    "start": "1778013",
    "end": "1784697"
  },
  {
    "text": "Now that's n.\nSo, this is why I cared about the lead constant because it's\ngoing to grow as I add more",
    "start": "1784697",
    "end": "1793403"
  },
  {
    "text": "lists.\nWhat's the biggest reasonable value of k that I could use?\nLog n, because I have a k out",
    "start": "1793403",
    "end": "1803572"
  },
  {
    "text": "there.\nI certainly don't want to use more than log n.\nSo, log n times the log n'th",
    "start": "1803572",
    "end": "1813304"
  },
  {
    "text": "root, and this is a little hard\nto draw of n.",
    "start": "1813304",
    "end": "1818724"
  },
  {
    "text": "Now, what is the log n'th root\nof n? That's what you're all thinking\nabout.",
    "start": "1818724",
    "end": "1827594"
  },
  {
    "text": "What is the log n'th root of n\nminus two?",
    "start": "1827594",
    "end": "1834000"
  },
  {
    "text": "It's one of these good\nquestions whose answer is?",
    "start": "1834000",
    "end": "1839559"
  },
  {
    "text": "Oh man.\nRemember the definition of root?\nOK, the root is n to the one",
    "start": "1839559",
    "end": "1847203"
  },
  {
    "text": "over log n.\nOK, good, remember the definition of having a power,\nA to the B?",
    "start": "1847203",
    "end": "1855658"
  },
  {
    "text": "It was like two to the power,\nB log A? Does that sound familiar?\nSo, this is two to the log n",
    "start": "1855658",
    "end": "1866080"
  },
  {
    "text": "over log n, which is,\nI hope you can get it at this",
    "start": "1866081",
    "end": "1871872"
  },
  {
    "text": "point, two.\nWow, so the log n'th root of n",
    "start": "1871872",
    "end": "1877316"
  },
  {
    "text": "minus two is zero:\nmy favorite answer. OK, this is to.\nSo this whole thing is two log",
    "start": "1877317",
    "end": "1883652"
  },
  {
    "text": "n: pretty nifty.\nSo, you could be a little fancier and tweak this a little\nbit, but two log n is plenty",
    "start": "1883652",
    "end": "1891377"
  },
  {
    "text": "good for me.\nWe clearly don't want to use any more lists,\nbut log n lists sounds pretty",
    "start": "1891377",
    "end": "1901298"
  },
  {
    "text": "good.\nI get, now, logarithmic search time.\nLet's check.",
    "start": "1901298",
    "end": "1907291"
  },
  {
    "start": "1904000",
    "end": "2302000"
  },
  {
    "text": "I mean, we sort of did this all\nintuitively. Let's draw what the list looks\nlike.",
    "start": "1907291",
    "end": "1916281"
  },
  {
    "text": "But, it will work.\nSo, I'm going to redraw this",
    "start": "1916281",
    "end": "1921583"
  },
  {
    "text": "example because you have to,\nalso.",
    "start": "1921583",
    "end": "1927000"
  },
  {
    "text": "So, let's redesign that New\nYork City subway system.",
    "start": "1927000",
    "end": "1934968"
  },
  {
    "text": "And, I want you to leave three\nblank lines up here.",
    "start": "1934968",
    "end": "1942781"
  },
  {
    "text": "So, you should have this\nmemorized by now.",
    "start": "1942781",
    "end": "1949187"
  },
  {
    "text": "But I don't.\nSo, we are not allowed to",
    "start": "1949187",
    "end": "1954293"
  },
  {
    "text": "change the local line,\nthough it would be nice, add a few more stops there.\nOK, we can stop at 79th Street.",
    "start": "1954293",
    "end": "1963834"
  },
  {
    "text": "That's enough.\nSo now, we have log n lists. And here, log n is about four.\nSo, I want to make a bunch of",
    "start": "1963834",
    "end": "1973100"
  },
  {
    "text": "lists here.\nIn particular, 14 will appear on all of them.\nSo, why don't I draw those in?",
    "start": "1973100",
    "end": "1982000"
  },
  {
    "text": "And, the question is,\nwhich elements go in here? So, I have log n lists.\nAnd, my goal is to balance the",
    "start": "1982000",
    "end": "1988896"
  },
  {
    "text": "number of items up here,\nand the ratio between these two lists, and the ratio between\nthese two lists,",
    "start": "1988896",
    "end": "1995724"
  },
  {
    "text": "and the ratio between these two\nlists. I want all these things to be\nbalanced.",
    "start": "1995724",
    "end": "2000896"
  },
  {
    "text": "There are log n of them.\nSo, the product of all those ratios better be n,\nthe number of elements down",
    "start": "2000896",
    "end": "2007655"
  },
  {
    "text": "here.\nSo, the product of all these ratios is n.\nAnd there's log n of them;",
    "start": "2007655",
    "end": "2016457"
  },
  {
    "text": "how big is each ratio?\nSo, I'll call the ratio r.",
    "start": "2016457",
    "end": "2024685"
  },
  {
    "text": "The ratio's r.\nI should have r to the power of",
    "start": "2024685",
    "end": "2032400"
  },
  {
    "text": "log n equals n.\nWhat's r? What's r minus two?\nZero.",
    "start": "2032400",
    "end": "2042000"
  },
  {
    "text": "OK, this should be two to the\npower of log n. So, if the ratio between the\nnumber of elements here and here",
    "start": "2042000",
    "end": "2049179"
  },
  {
    "text": "is to all the way down,\nthen I will have an elements at the bottom, which is what I\nwant.",
    "start": "2049180",
    "end": "2055118"
  },
  {
    "text": "So, in other words,\nI want half the elements here, a quarter of the elements here,\nan eighth of the elements here,",
    "start": "2055119",
    "end": "2062783"
  },
  {
    "text": "and so on.\nSo, I'm going to take half of the elements evenly spaced out:\n34th, 50th, 66th,",
    "start": "2062783",
    "end": "2068790"
  },
  {
    "text": "79th, and so on.\nSo, this is our new semi-express line:\nnot terribly fast,",
    "start": "2068790",
    "end": "2075529"
  },
  {
    "text": "but you save a factor of two\nfor going up there. And, when you're done,\nyou go down,",
    "start": "2075529",
    "end": "2082199"
  },
  {
    "text": "and you walk,\nat most, one step. And you find what you're\nlooking for.",
    "start": "2082199",
    "end": "2087717"
  },
  {
    "text": "OK, and then we do the same\nthing over and over and over until we run out of elements.\nI can't read my own writing.",
    "start": "2087717",
    "end": "2096940"
  },
  {
    "text": "It's 79th.",
    "start": "2096941",
    "end": "2099000"
  },
  {
    "text": "OK, if I had a bigger example,\nI would be more levels, but this is just barely enough.\nLet's say two elements is where",
    "start": "2111000",
    "end": "2119121"
  },
  {
    "text": "I stop.\nSo, this looks good. Does this look like a structure\nyou've seen before,",
    "start": "2119122",
    "end": "2124561"
  },
  {
    "text": "at all, vaguely?\nYes? A tree: yes.\nIt looks a lot like a binary tree.\nI'll just leave it at that.",
    "start": "2124561",
    "end": "2131715"
  },
  {
    "text": "In your problem set,\nyou'll understand why skip lists are really like trees.\nBut it's more or less a tree.",
    "start": "2131715",
    "end": "2138261"
  },
  {
    "text": "Let's say at this level,\nit looks sort of like binary search.\nYou look at 14; you look at 15,\nand therefore,",
    "start": "2138261",
    "end": "2144807"
  },
  {
    "text": "you decide whether you are in\nthe left half for the right half.\nAnd that's sort of like a tree.",
    "start": "2144807",
    "end": "2150654"
  },
  {
    "text": "It's not quite a tree because\nwe have this element repeated all over.\nBut more or less,",
    "start": "2150654",
    "end": "2155992"
  },
  {
    "text": "this is a binary tree.\nAt depth I, we have two to the I nodes, just like a tree,\njust like a balanced tree.",
    "start": "2155992",
    "end": "2164000"
  },
  {
    "text": "I'm going to call this\nstructure an ideal skip list. And, if all we are doing our\nsearches, ideal skip lists are",
    "start": "2164000",
    "end": "2173201"
  },
  {
    "text": "pretty good.\nMaybe at practice: not quite as good as a binary\nsearch tree, but up to constant",
    "start": "2173201",
    "end": "2180797"
  },
  {
    "text": "factors: just as good.\nSo, for example, I mean, we can generalize\nsearch, just check that it's log",
    "start": "2180798",
    "end": "2188818"
  },
  {
    "text": "n.\nSo, the search procedure is you start at the top left.\nSo, let's say we are looking",
    "start": "2188818",
    "end": "2196136"
  },
  {
    "text": "for 72.\nYou start at the top left. 14 is smaller than 72,\nso I try to go right.",
    "start": "2196136",
    "end": "2201893"
  },
  {
    "text": "79 is too big.\nSo, I follow this arrow, but I say, oops,\nthat's too much.",
    "start": "2201893",
    "end": "2207196"
  },
  {
    "text": "So, instead,\nI go down 14 still. I go to the right:\noh, 50, that's still smaller",
    "start": "2207196",
    "end": "2213030"
  },
  {
    "text": "than 72: OK.\nI tried to go right again. Oh: 79, that's too big.\nThat's no good.",
    "start": "2213030",
    "end": "2218786"
  },
  {
    "text": "So, I go down.\nSo, I get 50. I do the same thing over and\nover.",
    "start": "2218787",
    "end": "2225000"
  },
  {
    "text": "I try to go to the right:\noh, 66, that's OK. Try to go to the right:\noh, 79, that's too big. So I go down.\nNow I go to the right and,",
    "start": "2225000",
    "end": "2231866"
  },
  {
    "text": "oh, 72: done.\nOtherwise, I'd go too far and try to go down and say,\noops, element must not be there.\nIt's a very simple search",
    "start": "2231866",
    "end": "2238358"
  },
  {
    "text": "algorithm: same as here except\njust remove the L_1 and L_2. Go right until that would go\ntoo far.",
    "start": "2238358",
    "end": "2243401"
  },
  {
    "text": "Then go down.\nThen go right until we'd go too far, and then go down.\nYou might have to do this log n",
    "start": "2243401",
    "end": "2248605"
  },
  {
    "text": "times.\nIn each level, you're clearly only walking a\ncouple of steps because the",
    "start": "2248605",
    "end": "2254687"
  },
  {
    "text": "ratio between these two sizes is\nonly two. So, this will cost two log n\nfor search.",
    "start": "2254687",
    "end": "2260044"
  },
  {
    "text": "Good, I mean,\nso that was to check because we were using intuition over here;\na little bit shaky.",
    "start": "2260044",
    "end": "2266338"
  },
  {
    "text": "So, this is an ideal skip list,\nwe have to support insertions and deletions.\nAs soon as we do an insert and",
    "start": "2266339",
    "end": "2273303"
  },
  {
    "text": "delete, there's no way we're\ngoing to maintain the structure. It's a bit too special.\nThere is only one of these",
    "start": "2273303",
    "end": "2283074"
  },
  {
    "text": "where everything is perfectly\nspaced out, and everything is",
    "start": "2283074",
    "end": "2289932"
  },
  {
    "text": "beautiful.\nSo, we can't do that. We're going to maintain roughly\nthis structure as best we can.",
    "start": "2289932",
    "end": "2300809"
  },
  {
    "text": "And, if anyone of you knows\nsomeone in New York City subway",
    "start": "2300810",
    "end": "2307668"
  },
  {
    "text": "planning, you can tell them\nthis. OK, so: skip lists.\nSo, I mean, this is basically",
    "start": "2307668",
    "end": "2317900"
  },
  {
    "text": "our data structure.\nYou could use this as a starting point,\nbut then you start using skip",
    "start": "2317900",
    "end": "2326500"
  },
  {
    "text": "lists.\nAnd, we need to somehow implement insertions and\ndeletions, and maintain roughly",
    "start": "2326500",
    "end": "2334900"
  },
  {
    "text": "this structure well enough that\nthe search still costs order log",
    "start": "2334900",
    "end": "2341199"
  },
  {
    "text": "n time.\nSo, let's focus on insertions. If we do insertions right,\nit turns out deletions are",
    "start": "2341199",
    "end": "2349558"
  },
  {
    "text": "really trivial.",
    "start": "2349559",
    "end": "2351000"
  },
  {
    "text": "And again, this is all from\nfirst principles. We're not allowed to use\nanything fancy.",
    "start": "2368000",
    "end": "2374709"
  },
  {
    "text": "But, it would be nice if we\nused some good chalk. This one looks better.\nSo, suppose you want to insert",
    "start": "2374709",
    "end": "2382792"
  },
  {
    "text": "an element, x.\nWe said how to search for an element.\nSo, how do we insert it?",
    "start": "2382792",
    "end": "2388773"
  },
  {
    "text": "Well, the first thing we should\ndo is figure out where it goes.",
    "start": "2388773",
    "end": "2393785"
  },
  {
    "text": "So, we search for x.\nWe call search of x to find where x fits in the bottom list,\nnot just any list.",
    "start": "2393785",
    "end": "2403000"
  },
  {
    "text": "Pretty easy to find out where\nit fits in the top list. That takes, like,\nconstant time.",
    "start": "2403000",
    "end": "2408343"
  },
  {
    "text": "What we want to know:\nbecause the top list has constant length,\nwe want to know where x goes in",
    "start": "2408343",
    "end": "2414196"
  },
  {
    "text": "the bottom list.\nSo, let's say we want to insert a search for 80.\nWell, it is a bit too big.",
    "start": "2414196",
    "end": "2419858"
  },
  {
    "text": "Let search for 75.\nSo, we'll find the 75 fits right here between 72 and 79\nusing the same path.",
    "start": "2419858",
    "end": "2425711"
  },
  {
    "text": "OK, if it's there already,\nwe complain because I'm going to assume all keys are distinct\nfor now just so the picture",
    "start": "2425711",
    "end": "2432900"
  },
  {
    "text": "stays simple.\nBut this works fine even if you",
    "start": "2432900",
    "end": "2438224"
  },
  {
    "text": "are inserting the same key over\nand over. So, that seems good.\nOne thing we should clearly do",
    "start": "2438224",
    "end": "2447587"
  },
  {
    "text": "is insert x into the bottom\nlist. We now know where it fits.\nIt should go there.",
    "start": "2447587",
    "end": "2455597"
  },
  {
    "text": "Because we want to maintain\nthis invariant, that the bottom list contains\nall the elements.",
    "start": "2455597",
    "end": "2466000"
  },
  {
    "text": "So, there we go.\nWe've maintained the invariant. The bottom list contains all\nthe elements.",
    "start": "2466000",
    "end": "2474261"
  },
  {
    "text": "So, we search for 75.\nWe say, oh, 75 goes here, and we just sort of link in 75.\nYou know how to do a linked",
    "start": "2474261",
    "end": "2484024"
  },
  {
    "text": "list, I hope.\nLet me just erase that pointer. All the work in implementing\nskip lists is the linked list",
    "start": "2484024",
    "end": "2492627"
  },
  {
    "text": "manipulation.\nIs that enough? No, it would be fine for now\nbecause now there's only a chain",
    "start": "2492627",
    "end": "2498227"
  },
  {
    "text": "of length three here that you'd\nhave to walk over if you're looking for something in this\nrange.",
    "start": "2498227",
    "end": "2504145"
  },
  {
    "text": "But if I just keep inserting\n75, and 76, than 76 plus epsilon, 76 plus two epsilon,\nand so on, just pack a whole",
    "start": "2504145",
    "end": "2511081"
  },
  {
    "text": "bunch of elements in here,\nthis chain will get really long.\nNow, suddenly, things are not so balanced.\nIf I do a search,",
    "start": "2511081",
    "end": "2518400"
  },
  {
    "text": "I'll pay an arbitrarily long\namount time here to search for someone.\nIf I insert k things,",
    "start": "2518400",
    "end": "2525403"
  },
  {
    "text": "it'll take k time.\nI want it to stay log n. If I only insert log n items,\nit's OK for now.",
    "start": "2525403",
    "end": "2531218"
  },
  {
    "text": "What I want to do is decide\nwhich of these lists contain 75. So, clearly it goes on the\nbottom.",
    "start": "2531218",
    "end": "2537367"
  },
  {
    "text": "Every element goes in the\nbottom. Should it go up a level?\nMaybe. It depends.\nIt's not clear yet.",
    "start": "2537367",
    "end": "2543515"
  },
  {
    "text": "If I insert a few items here,\ndefinitely some of them should go on the next level.\nShould I go to levels up?",
    "start": "2543516",
    "end": "2559146"
  },
  {
    "text": "Maybe, but even less likely.\nSo, what should I do?",
    "start": "2559146",
    "end": "2577073"
  },
  {
    "text": "Yeah?\nRight, so you maintain the ideal partition size,\nwhich may be like the length of",
    "start": "2577073",
    "end": "2585414"
  },
  {
    "text": "this chain.\nAnd you see, well, if that gets too long,\nthen I should split it in the",
    "start": "2585414",
    "end": "2590967"
  },
  {
    "text": "middle, promote that guy up to\nthe next level, and do the same thing up here.\nIf this chain gets too long",
    "start": "2590967",
    "end": "2598047"
  },
  {
    "text": "between two consecutive next\nlevel express stops, then I'll promote the middle\nguy.",
    "start": "2598047",
    "end": "2603599"
  },
  {
    "text": "And that's what you'll do in\nyour problem set. That's too fancy for me.\nI don't need no stinking",
    "start": "2603600",
    "end": "2610056"
  },
  {
    "text": "counters.\nWhat else could I do?",
    "start": "2610056",
    "end": "2614000"
  },
  {
    "text": "I could try to maintain the\nideal skip list structure. That will be too expensive.\nLike I say, 75 is the guy that",
    "start": "2626000",
    "end": "2631811"
  },
  {
    "text": "gets promoted,\nand this guy gets demoted all the way down.\nBut that will propagate everything to the right.\nAnd that could cost linear time",
    "start": "2631811",
    "end": "2638890"
  },
  {
    "text": "for update.\nOther idea? If I only want half of them to\ngo up, I could flip a coin.",
    "start": "2638890",
    "end": "2647799"
  },
  {
    "text": "Good idea.\nAll right, for that, I will give you a quarter.\nIt's a good one.",
    "start": "2647799",
    "end": "2656057"
  },
  {
    "text": "It's the old line state,\nMaryland. There you go.\nHowever, you have to perform",
    "start": "2656057",
    "end": "2664544"
  },
  {
    "text": "some services for that quarter,\nnamely, flip the coin.",
    "start": "2664544",
    "end": "2672000"
  },
  {
    "text": "Can you flip a coin?\nGood. What did you get?\nTails, OK, that's the first",
    "start": "2672000",
    "end": "2678380"
  },
  {
    "text": "random bit.\nBut we are going to do is build a skip list.\nMaybe I should tell you how",
    "start": "2678380",
    "end": "2685869"
  },
  {
    "text": "first.\nOK, but the idea is flip a coin.\nIf it's heads, so, sorry, if it's heads,\nwe will promote it to the next",
    "start": "2685869",
    "end": "2695671"
  },
  {
    "text": "level, and flip again.\nSo, this is an answer to the",
    "start": "2695671",
    "end": "2703484"
  },
  {
    "text": "question, which other lists\nshould store x?",
    "start": "2703484",
    "end": "2710212"
  },
  {
    "text": "How many other lists should we\nadd x to?",
    "start": "2710212",
    "end": "2716458"
  },
  {
    "text": "Well, the algorithm is,\nflip a coin,",
    "start": "2716458",
    "end": "2722064"
  },
  {
    "text": "and if it comes out heads,\nthen promote x.",
    "start": "2722064",
    "end": "2728632"
  },
  {
    "text": "to the next level up,\nand flip again.",
    "start": "2728632",
    "end": "2736000"
  },
  {
    "text": "OK, that's key because we might\nwant this element to go arbitrarily high.\nBut for starters,",
    "start": "2736000",
    "end": "2741084"
  },
  {
    "text": "we flip a coin.\nIt doesn't go to the next level.\nWell, we'd like it to go to the next level with probability one\nhalf because we want the ratio",
    "start": "2741084",
    "end": "2749057"
  },
  {
    "text": "between these two sizes to be a\nhalf, or sorry, two, depending which way you\ntake the ratio.",
    "start": "2749057",
    "end": "2754199"
  },
  {
    "text": "So, I want roughly half the\nelements up here. So, I flip a coin.\nIf it comes up heads, I go up here.\nThis is a fair coin.",
    "start": "2754199",
    "end": "2762000"
  },
  {
    "text": "So I want it 50-50.\nOK, then how many should that element go up to the next level\nup?",
    "start": "2762000",
    "end": "2767361"
  },
  {
    "text": "Well, with 50% probability\nagain. So, I flip another point.\nIf it comes up heads,",
    "start": "2767362",
    "end": "2772464"
  },
  {
    "text": "I'll go up another level.\nAnd that will maintain the approximate ratio between these\ntwo guys as being two.",
    "start": "2772464",
    "end": "2779265"
  },
  {
    "text": "The expected ratio will\ndefinitely be two, and so on, all the way up.\nIf I go up to the top and flip",
    "start": "2779265",
    "end": "2785609"
  },
  {
    "text": "a coin, it comes up heads,\nI'll make another level. This is the insertion\nalgorithm: dead simple.",
    "start": "2785609",
    "end": "2793000"
  },
  {
    "start": "2792000",
    "end": "2897000"
  },
  {
    "text": "The fancier one you will see on\nyour problem set.",
    "start": "2793000",
    "end": "2798090"
  },
  {
    "text": "So, let's do it.",
    "start": "2798090",
    "end": "2800000"
  },
  {
    "text": "OK, I also need someone to\ngenerate random numbers. Who can generate random\nnumbers?",
    "start": "2809000",
    "end": "2816185"
  },
  {
    "text": "Pseudo-random?\nI'll give you a quarter. I have one here.\nHere you go.",
    "start": "2816185",
    "end": "2822004"
  },
  {
    "text": "That's a boring quarter.\nWho would like to generate random numbers?\nSomeone volunteering someone",
    "start": "2822004",
    "end": "2828661"
  },
  {
    "text": "else: that's a good way to do\nit. Here you go.\nYou get a quarter, but you're not allowed to flip\nit.",
    "start": "2828662",
    "end": "2835464"
  },
  {
    "text": "No randomness for you;\nwell, OK, you can generate bits, and then compute a number.\nSo, give me a number.",
    "start": "2835464",
    "end": "2842694"
  },
  {
    "text": "44, can answer.\nOK, we already flipped a coin and I got tails.\nDone. That's the insertion algorithm.\nI'm going to make some more",
    "start": "2842695",
    "end": "2853441"
  },
  {
    "text": "space actually,\nput it way down here. OK, so 44 does not get promoted\nbecause we got a tails.",
    "start": "2853441",
    "end": "2861579"
  },
  {
    "text": "So, give me another number.\nNine, OK, I search for nine in",
    "start": "2861579",
    "end": "2866734"
  },
  {
    "text": "this list.\nI should mention one other thing, sorry.\nI need a small change.",
    "start": "2866734",
    "end": "2873154"
  },
  {
    "text": "This is just to make sure\nsearches still work. So, the worry is suppose I\ninsert something bigger and then",
    "start": "2873154",
    "end": "2882468"
  },
  {
    "text": "I promote it.\nThis would look very bad for a skip list data structure because\nI always want to start at the",
    "start": "2882468",
    "end": "2891359"
  },
  {
    "text": "top left, and now there's no top\nleft. So, just minor change:\njust let me remember that.",
    "start": "2891360",
    "end": "2897301"
  },
  {
    "start": "2897000",
    "end": "3217000"
  },
  {
    "text": "The minor change is that I'm\ngoing to store a special value minus infinity in every list.\nSo, minus infinity always gets",
    "start": "2897301",
    "end": "2905478"
  },
  {
    "text": "promoted all the way to the top,\nwhatever the top happens to be now.\nSo, initially,",
    "start": "2905478",
    "end": "2912234"
  },
  {
    "text": "that way I'll always have a top\nleft. Sorry, I forgot to mention\nthat.",
    "start": "2912234",
    "end": "2918139"
  },
  {
    "text": "So, initially I'll just have\nminus infinity. Then I insert 44.\nI say, OK, 44 goes there,",
    "start": "2918139",
    "end": "2925631"
  },
  {
    "text": "no promotion,\ndone. Now, we're going to insert\nnine. Nine goes here.\nSo, minus infinity to nine,",
    "start": "2925632",
    "end": "2933652"
  },
  {
    "text": "flip your coin,\nheads. Did he actually flip it?\nOK, good.",
    "start": "2933653",
    "end": "2940000"
  },
  {
    "text": "He flipped it before,\nyeah, sure. I'm just giving you a hard\ntime. So, we have nine up here.\nWe need to maintain this minus",
    "start": "2940000",
    "end": "2949142"
  },
  {
    "text": "infinity just to make sure it\ngets promoted along with everything else.\nSo, that looks like a nice skip",
    "start": "2949142",
    "end": "2956891"
  },
  {
    "text": "list.\nFlip it again. Tails, good.\nOK, so this looks like an ideal skip list.\nIsn't that great?",
    "start": "2956891",
    "end": "2963786"
  },
  {
    "text": "It works every time.\nOK, give me another number. 26, OK, so I search for 26.\n26 goes here.",
    "start": "2963786",
    "end": "2972000"
  },
  {
    "text": "It clearly goes on the bottom\nlist. Here we go, 26,\nand then I you raised 44.",
    "start": "2972000",
    "end": "2981886"
  },
  {
    "text": "Flip.\nTails, OK, another number. 50, oh, a big one.\nIt costs me a little while to",
    "start": "2981886",
    "end": "2992307"
  },
  {
    "text": "search, and I get over here.\n50. Flip.\nHeads, good.",
    "start": "2992307",
    "end": "2998720"
  },
  {
    "text": "So 50 gets promoted.\nFlip it again.",
    "start": "2998720",
    "end": "3005000"
  },
  {
    "text": "Tails, OK, still a reasonable\nnumber. Another number?\n12, it takes a little while to",
    "start": "3005000",
    "end": "3011911"
  },
  {
    "text": "get exciting here.\nOK, 12 goes here between nine and 26.\nYou're giving me a hard time",
    "start": "3011911",
    "end": "3018907"
  },
  {
    "text": "here.\nOK, flip. Heads, OK, 12 gets promoted.\nI know you have to work a",
    "start": "3018907",
    "end": "3024624"
  },
  {
    "text": "little bit, but we just came\nhere to search for 12.",
    "start": "3024624",
    "end": "3030000"
  },
  {
    "text": "So, we know that nine was the\nlast point we went down.",
    "start": "3030000",
    "end": "3035371"
  },
  {
    "text": "So, we promote 12.\nIt gets inserted up here. We are just inserting into this\nparticular linked list:",
    "start": "3035371",
    "end": "3045202"
  },
  {
    "text": "nothing fancy.\nWe link the two twelves together.\nIt still looks kind of like a",
    "start": "3045202",
    "end": "3052804"
  },
  {
    "text": "linked list.\nFlip again. OK, tails, another number.\n37.",
    "start": "3052804",
    "end": "3058074"
  },
  {
    "text": "Jeez.\nIt's a good test of memory. 37, what was it,\n44 and 50?",
    "start": "3058074",
    "end": "3065569"
  },
  {
    "text": "And 50 was at the next level\nup. I think I should just keep\nappending elements and have you",
    "start": "3065570",
    "end": "3074817"
  },
  {
    "text": "flip coins.\nOK, we just inserted 37. Tails.\nOK, that's getting to be a long",
    "start": "3074818",
    "end": "3082385"
  },
  {
    "text": "chain.\nThat looks a bit worse. OK, give me another number\nlarger than 50.",
    "start": "3082385",
    "end": "3089742"
  },
  {
    "text": "51, good answer.\nThank you. OK, flip again.\nAnd again.",
    "start": "3089742",
    "end": "3097494"
  },
  {
    "text": "Tails.\nAnother number. Wait, someone else should pick\na number.",
    "start": "3097495",
    "end": "3105201"
  },
  {
    "text": "It's not working.\nWhat did you say? 52, good answer.\nFlip.",
    "start": "3105201",
    "end": "3112266"
  },
  {
    "text": "Tails, not surprising.\nWe've gotten a lot of heads",
    "start": "3112266",
    "end": "3118559"
  },
  {
    "text": "there.\nOK, another number.",
    "start": "3118559",
    "end": "3123778"
  },
  {
    "text": "53, thank you.\nFlip. Heads, heads,\nOK.",
    "start": "3123778",
    "end": "3128896"
  },
  {
    "text": "Heads, heads,\nyou didn't flip. All right, 53,\nyou get the idea.",
    "start": "3128896",
    "end": "3137669"
  },
  {
    "text": "If you get two consecutive\nheads, then the guy goes up two",
    "start": "3137669",
    "end": "3146004"
  },
  {
    "text": "levels.\nOK, now flip for real.",
    "start": "3146004",
    "end": "3152000"
  },
  {
    "text": "Heads.\nFinally. Heads we've been waiting for.\nIf you flipped three heads in a",
    "start": "3152000",
    "end": "3159938"
  },
  {
    "text": "row, you go three levels.\nAnd each time, we keep promoting minus\ninfinity.",
    "start": "3159938",
    "end": "3167555"
  },
  {
    "text": "Look again.\nHeads, oh my God. Where were they before?\nFlip again.",
    "start": "3167555",
    "end": "3174206"
  },
  {
    "text": "It better be tails this time.\nTails, good.",
    "start": "3174206",
    "end": "3180000"
  },
  {
    "text": "OK, you get the idea.\nEventually you run out of board space.\nNow, it's pretty rare that you",
    "start": "3180000",
    "end": "3186769"
  },
  {
    "text": "go too high.\nWhat's the probability that you go higher than log n?\nAnother easy log computation.",
    "start": "3186769",
    "end": "3193922"
  },
  {
    "text": "Each time, I have a 50%\nprobability of going up. One in n probability of going\nup log n levels because half to",
    "start": "3193923",
    "end": "3202153"
  },
  {
    "text": "the power of log n is one out of\nn. So, it depends on n,\nbut I'm not going to go too",
    "start": "3202153",
    "end": "3208384"
  },
  {
    "text": "high.\nAnd, intuitively, this is not so bad.\nSo, these are skip lists.",
    "start": "3208384",
    "end": "3217255"
  },
  {
    "text": "You have the ratios right in\nexpectation, which is a pretty",
    "start": "3217256",
    "end": "3224156"
  },
  {
    "text": "weak statement.\nThis doesn't say anything about",
    "start": "3224156",
    "end": "3229628"
  },
  {
    "text": "the lengths of these change.\nBut intuitively,",
    "start": "3229628",
    "end": "3234861"
  },
  {
    "text": "it's pretty good.\nLet's say pretty good on average.\nSo, I had two semi-random",
    "start": "3234862",
    "end": "3243279"
  },
  {
    "text": "processes going on here.\nOne is picking the numbers, and that, I don't want to\nassume anything about.",
    "start": "3243279",
    "end": "3248296"
  },
  {
    "text": "The numbers could be\nadversarial. It could be sequential.\nIt could be reverse sorted. It could be random.\nI don't know.",
    "start": "3248296",
    "end": "3254132"
  },
  {
    "text": "So, it didn't matter what he\nsaid. At least, it shouldn't matter.\nI mean, it matters here. Don't worry.\nYou're still loved.",
    "start": "3254133",
    "end": "3260173"
  },
  {
    "text": "You still get your $0.25.\nBut what the algorithm cares about is the outcomes of these\ncoins. And the probability,\nthe statement that this data",
    "start": "3260174",
    "end": "3267187"
  },
  {
    "text": "structure is fast with high\nprobability is only about the random coins.\nRight, it doesn't matter what",
    "start": "3267187",
    "end": "3274396"
  },
  {
    "text": "the adversary chooses for\nnumbers as long as those coins are random, and the adversary\ndoesn't know the coins.",
    "start": "3274396",
    "end": "3283239"
  },
  {
    "text": "It doesn't know the outcomes of\nthe coins. So, in that case,\non average, overall of the coin",
    "start": "3283239",
    "end": "3290595"
  },
  {
    "text": "flips, you should be OK.\nBut the claim is not just that it's pretty good on average.\nBut, it's really,",
    "start": "3290595",
    "end": "3298776"
  },
  {
    "text": "really good almost always.\nOK, with really high",
    "start": "3298776",
    "end": "3303794"
  },
  {
    "text": "probability it's log n.\nSo, for example, with probability,\none minus one over n,",
    "start": "3303794",
    "end": "3310704"
  },
  {
    "text": "it's order of log n,\nwith probability one minus one over n^2 it's log n,\nprobability one minus one over",
    "start": "3310705",
    "end": "3319679"
  },
  {
    "text": "n^100, it's order log n.\nAll those statements are true for any value of 100.\nSo, that's where we're going.",
    "start": "3319679",
    "end": "3330000"
  },
  {
    "text": "OK, I should mention,\nhow do you delete in a skip list?\nFind the element. You delete it all the way.\nThere's nothing fancy with",
    "start": "3330000",
    "end": "3337934"
  },
  {
    "text": "delete.\nBecause we have all these independent, random choices,\nall of these elements are sort",
    "start": "3337934",
    "end": "3343788"
  },
  {
    "text": "of independent from each other.\nWe don't really care. So, delete an element,\njust throw it away.",
    "start": "3343788",
    "end": "3349837"
  },
  {
    "text": "The tricky part is insertion.\nWhen I insert an element, I'm just going to randomly see\nhow high it should go.",
    "start": "3349837",
    "end": "3356731"
  },
  {
    "text": "With probability one over two\nto the i, it will go to height i.\nGood, that's my time.",
    "start": "3356731",
    "end": "3364597"
  },
  {
    "text": "I've been having too much fun\nhere. I've got to go a little bit\nfaster, OK.",
    "start": "3364597",
    "end": "3374000"
  },
  {
    "start": "3372000",
    "end": "3600000"
  },
  {
    "text": "So here's the theorem.\nLet's see exactly what we are",
    "start": "3385000",
    "end": "3392828"
  },
  {
    "text": "proving first.\nWith high probability,",
    "start": "3392828",
    "end": "3398355"
  },
  {
    "text": "this is a formal notion which I\nwill define a second.",
    "start": "3398355",
    "end": "3406337"
  },
  {
    "text": "Every search in n elements skip\nlists costs order of log n.",
    "start": "3406337",
    "end": "3415241"
  },
  {
    "text": "So, that's the theorem.\nNow I need to define with high",
    "start": "3415241",
    "end": "3423050"
  },
  {
    "text": "probability.\nSo, with high probability. And, it's a bit of a long\nphrase.",
    "start": "3423050",
    "end": "3430169"
  },
  {
    "text": "So, often we will,\nand you can abbreviate it WHP. So, if I have a random event,\nand the random event here is",
    "start": "3430169",
    "end": "3440847"
  },
  {
    "text": "that every search in an n\nelement skip list costs order",
    "start": "3440847",
    "end": "3446338"
  },
  {
    "text": "log n, I want to know what it\nmeans for that event E to occur",
    "start": "3446338",
    "end": "3452440"
  },
  {
    "text": "with high probability.",
    "start": "3452440",
    "end": "3456000"
  },
  {
    "text": "So this is the definition.\nSo, the statement is that for",
    "start": "3467000",
    "end": "3473726"
  },
  {
    "text": "any alpha greater than or equal\nto one, there is a suitable",
    "start": "3473726",
    "end": "3480820"
  },
  {
    "text": "choice of constants --",
    "start": "3480820",
    "end": "3484000"
  },
  {
    "text": "-- for which the event,\nE, occurs with this probability",
    "start": "3496000",
    "end": "3507739"
  },
  {
    "text": "I keep mentioning.\nSo, the probability at least",
    "start": "3507739",
    "end": "3517739"
  },
  {
    "text": "one minus one over n to the\nalpha.",
    "start": "3517739",
    "end": "3526000"
  },
  {
    "text": "So, this is a bit imprecise,\nbut it will suffice for our purposes.\nIf you want to really formal",
    "start": "3526000",
    "end": "3532369"
  },
  {
    "text": "definition, you can read the\nlecture notes. There are special lecture notes\nfor this lecture on the stellar",
    "start": "3532369",
    "end": "3539568"
  },
  {
    "text": "site.\nAnd, there's the PowerPoint notes on the SMA site.\nBut, right, there's a bit of a",
    "start": "3539569",
    "end": "3546130"
  },
  {
    "text": "subtlety in the choice of\nconstants here. There is a choice of this\nconstant.",
    "start": "3546130",
    "end": "3551384"
  },
  {
    "text": "And there's a choice of this\nconstant. And, these are related.\nAnd, there's alpha,",
    "start": "3551384",
    "end": "3556994"
  },
  {
    "text": "which we get to whatever we\nwant. But the bottom line is,\nwe get to choose what",
    "start": "3556994",
    "end": "3562390"
  },
  {
    "text": "probability we want this to be\ntrue. If I want it to be true,\nwith probability one minus one",
    "start": "3562390",
    "end": "3568710"
  },
  {
    "text": "over n^100, I can do that.\nI just sat alpha to a hundred, and up to this little constant\nthat's going to grow much slower",
    "start": "3568710",
    "end": "3577088"
  },
  {
    "text": "than n to the alpha.\nI get the error probability. So this thing is called the\nerror probability.",
    "start": "3577088",
    "end": "3585048"
  },
  {
    "text": "The probability that I fail is\npolynomially small, for any polynomial I want.\nNow, with the same data",
    "start": "3585048",
    "end": "3591827"
  },
  {
    "text": "structure, right,\nI fixed the data structure. It doesn't depend on alpha.\nAnything you want,",
    "start": "3591827",
    "end": "3597982"
  },
  {
    "text": "any alpha value you want,\nthis data structure will take order of log n time.\nNow, this constant will depend",
    "start": "3597982",
    "end": "3606692"
  },
  {
    "text": "on alpha.\nSo, you know, you want error probability one\nover n^100 is probably going to",
    "start": "3606692",
    "end": "3614141"
  },
  {
    "text": "be, like, 100 log n.\nIt's still log n. OK, this is a very strong claim\nabout the tale of the",
    "start": "3614141",
    "end": "3622128"
  },
  {
    "text": "distribution of the running time\nof search, very strong. Let me give you an idea of how\nstrong it is.",
    "start": "3622128",
    "end": "3632000"
  },
  {
    "text": "How many people know what\nBoole's inequality is? How many people know what the\nunion bound is in probability?",
    "start": "3632000",
    "end": "3642671"
  },
  {
    "text": "You should.\nIt's in appendix c. Maybe you'll know it by the\ntheorem.",
    "start": "3642671",
    "end": "3649213"
  },
  {
    "text": "It's good to know it by name.\nIt's sort of like linearity of",
    "start": "3649214",
    "end": "3655154"
  },
  {
    "text": "expectations.\nIt's a lot easier to communicate to someone.\nLinearity of expectations:",
    "start": "3655154",
    "end": "3663978"
  },
  {
    "text": "instead of saying,\nyou know that thing where you sum up all the expectations of\nthings, and that's the",
    "start": "3663978",
    "end": "3671510"
  },
  {
    "text": "expectation of the sum?\nIt's a lot easier to say linearity of expectation.\nSo, let me quiz you in a",
    "start": "3671510",
    "end": "3678815"
  },
  {
    "text": "different way.\nSo, if I take a bunch of events, and I take their union,\neither this happens or this",
    "start": "3678815",
    "end": "3686119"
  },
  {
    "text": "happens, or so on.\nSo, this is the inclusive OR of k events.\nAnd, instead,",
    "start": "3686119",
    "end": "3691521"
  },
  {
    "text": "I look at the sum of the\nprobabilities of those events.",
    "start": "3691521",
    "end": "3697000"
  },
  {
    "text": "OK, easy question:\nare these equal? No, unless they are\nindependent.",
    "start": "3697000",
    "end": "3702947"
  },
  {
    "text": "But can I say anything about\nthem, any relation? Smaller, yeah.\nThis is less than or equal to",
    "start": "3702947",
    "end": "3711183"
  },
  {
    "text": "that.\nOK, this should be intuitive to you from a probability point of\nview.",
    "start": "3711183",
    "end": "3717771"
  },
  {
    "text": "Look at the textbook.\nOK: very basic result, trivial result almost.\nWhat does this tell us?",
    "start": "3717771",
    "end": "3727041"
  },
  {
    "text": "Well, suppose that E_i is some\nkind of error event. We don't want it to happen.\nOK, and suppose,",
    "start": "3727041",
    "end": "3735295"
  },
  {
    "text": "mix some letters here.\nSuppose I have a bunch of events which occur with high\nprobability.",
    "start": "3735295",
    "end": "3743017"
  },
  {
    "text": "OK, call those E_i complement.\nSo, suppose, so this is the end of that\nstatement, E_i complement occurs",
    "start": "3743017",
    "end": "3751893"
  },
  {
    "text": "with high probability.\nOK, so then the probability of",
    "start": "3751893",
    "end": "3757063"
  },
  {
    "text": "E_i is very small,\npolynomially small. One over n to the alpha for any\nalpha I want.",
    "start": "3757063",
    "end": "3762636"
  },
  {
    "text": "Now, suppose I take a whole\nbunch of these events, and let's say that k is\npolynomial in n.",
    "start": "3762636",
    "end": "3768690"
  },
  {
    "text": "So, I take a bunch of events,\nwhich I'd like to happen. They all occur with high\nprobability.",
    "start": "3768690",
    "end": "3774882"
  },
  {
    "text": "There is only polynomially many\nof them. So let's say,\nlet me give this constant a",
    "start": "3774882",
    "end": "3780316"
  },
  {
    "text": "name.\nLet's call it c. Let's say I take n to the c\nsuch events.",
    "start": "3780316",
    "end": "3785873"
  },
  {
    "text": "Well, what's the probability\nthat all those events occur together?\nBecause they should rest of the",
    "start": "3785873",
    "end": "3792873"
  },
  {
    "text": "time occurred together because\neach one occurs most of the time, occurs with high\nprobability.",
    "start": "3792873",
    "end": "3799578"
  },
  {
    "text": "So, I want to look at E_1 bar\nintersect, E_2 bar, and so on.\nSo, each of these occurs as",
    "start": "3799578",
    "end": "3805842"
  },
  {
    "text": "high probability.\nWhat's the chance that they all occur?\nIt's also with high",
    "start": "3805842",
    "end": "3812166"
  },
  {
    "text": "probability.\nI'm changing the alpha. So, the union bound tells me\nthe probability of any one of",
    "start": "3812166",
    "end": "3817817"
  },
  {
    "text": "these failing,\nthe probability of this failing, or this failing,\nor this failing, which is this thing,\nis, at most,",
    "start": "3817817",
    "end": "3824573"
  },
  {
    "text": "the sum of the probabilities of\neach failure. These are the error\nprobabilities. I know that each of them is,\nat most, one over n to the",
    "start": "3824573",
    "end": "3832619"
  },
  {
    "text": "alpha, with a constant in front.\nIf I add them all up, there's only n to the c of\nthem.",
    "start": "3832619",
    "end": "3837779"
  },
  {
    "text": "So, I take this error\nprobability, and I multiply by n to the c.\nSo, I get like n to the c over",
    "start": "3837779",
    "end": "3845400"
  },
  {
    "text": "n to the alpha,\nwhich is one over n to the alpha minus c.\nI can set alpha as big as I",
    "start": "3845400",
    "end": "3851960"
  },
  {
    "text": "want.\nSo, I said it much, much bigger than c,\nand this event occurs with high",
    "start": "3851960",
    "end": "3857880"
  },
  {
    "text": "probability.\nI sort of made a mess here, but this event occurs with high\nprobability because of this.",
    "start": "3857880",
    "end": "3865719"
  },
  {
    "text": "Whatever the constant is here,\nhowever many events I'm taking, I just set alpha to be bigger\nthan that.",
    "start": "3865719",
    "end": "3875000"
  },
  {
    "text": "And, this event will occur with\nhigh probability, too.\nSo, when I say here that every",
    "start": "3875000",
    "end": "3880041"
  },
  {
    "text": "search of cost order log n with\nhigh probability, not only do I mean that if you\nlook at one search,",
    "start": "3880041",
    "end": "3886005"
  },
  {
    "text": "it costs order log n with high\nprobability. You look at another search,\nand it costs log n with high",
    "start": "3886005",
    "end": "3891969"
  },
  {
    "text": "probability.\nI mean, if you take every search, all of them take order\nlog n time with high",
    "start": "3891969",
    "end": "3897317"
  },
  {
    "text": "probability.\nSo, this event that every single search you do takes order\nlog n, is true with high",
    "start": "3897318",
    "end": "3903036"
  },
  {
    "text": "probability estimate the number\nof searches you are doing is polynomial in n.\nSo, I'm assuming that I'm not",
    "start": "3903036",
    "end": "3910887"
  },
  {
    "text": "using this data structure\nforever, just for a polynomial amount of time.\nBut, who's got more than a",
    "start": "3910887",
    "end": "3917136"
  },
  {
    "text": "polynomial amount of time\nanyway? This is MIT.\nSo, hopefully that's clear. We'll see it a few more times.\nYeah?",
    "start": "3917136",
    "end": "3924035"
  },
  {
    "text": "The algorithm doesn't depend on\nAlpha. The question is how do you\nchoose alpha in the algorithm.",
    "start": "3924035",
    "end": "3931000"
  },
  {
    "text": "So, we don't need to.\nThis is just sort of for an analysis tool.\nThis is saying that the farther",
    "start": "3931000",
    "end": "3936668"
  },
  {
    "text": "out you get, so you say,\nwell, what's the probability that more than ten log n.\nWell, it's like one over n^10.",
    "start": "3936668",
    "end": "3943190"
  },
  {
    "text": "Let's say it's linear.\nWell, what's the chance that you're more than 20 log n?\nWell that's one over n^20.",
    "start": "3943190",
    "end": "3949407"
  },
  {
    "text": "So, the point is the tail of\nthis distribution is getting a really small,\nreally fast.",
    "start": "3949407",
    "end": "3954465"
  },
  {
    "text": "And, such using alpha is more\nlike sort of for your own feeling good.\nOK, you can set it to 100,",
    "start": "3954466",
    "end": "3960135"
  },
  {
    "text": "and then n is at least two.\nSo, that's like one over 2^100",
    "start": "3960135",
    "end": "3965209"
  },
  {
    "text": "chance that you fail.\nThat's damn small. If you've got a real random\nnumber generator,",
    "start": "3965209",
    "end": "3971322"
  },
  {
    "text": "the chance that you're going to\nhit one over 2^200 is pretty tiny, right?\nSo, let's say you set alpha to",
    "start": "3971322",
    "end": "3978762"
  },
  {
    "text": "256, which is always a good\nnumber. 2^256 is much bigger than the\nnumber of particles in the known",
    "start": "3978762",
    "end": "3985759"
  },
  {
    "text": "universe, so,\nthe light matter. So, actually I think this even\naccounts for some notion of dark",
    "start": "3985759",
    "end": "3992898"
  },
  {
    "text": "matter.\nSo, this is really, really, really big.\nSo, the chance that you pick a random particle in the universe\nthat happens to be your favorite",
    "start": "3992898",
    "end": "4001576"
  },
  {
    "text": "particle, this one right here,\nthat's over one over 2^256, or even smaller.\nSo, set alpha to 256,",
    "start": "4001576",
    "end": "4007486"
  },
  {
    "text": "the chance to your algorithm\ntakes more than order log n time is a lot smaller than the chance\nthat a meteor strikes your",
    "start": "4007487",
    "end": "4014907"
  },
  {
    "text": "computer at the same time that\nit has a flooding point error, at the same time that the earth\nexplodes because they're putting",
    "start": "4014907",
    "end": "4022641"
  },
  {
    "text": "a transport through this part of\nthe solar system at the same time, I mean,\nI could go on,",
    "start": "4022642",
    "end": "4028113"
  },
  {
    "text": "right?\nIt's really, really unlikely that you are\nmore than log n.",
    "start": "4028113",
    "end": "4033510"
  },
  {
    "text": "And how unlikely:\nyou get to choose. But it's just in the analysis\nthe algorithm doesn't depend on",
    "start": "4033510",
    "end": "4039467"
  },
  {
    "text": "it.\nIt's the same algorithm, very cool.\nSometimes, with high probability, bounds depends on\nalpha.",
    "start": "4039467",
    "end": "4045297"
  },
  {
    "text": "I mean, the algorithm depends\non alpha. But here, it will not.\nOK, away we go.",
    "start": "4045297",
    "end": "4052307"
  },
  {
    "text": "So now you all understand the\nclaim.",
    "start": "4052307",
    "end": "4057692"
  },
  {
    "text": "So let's do a warm up.\nWe will also need this fact.",
    "start": "4057692",
    "end": "4065383"
  },
  {
    "text": "But it's pretty easy.\nThe lemma is that with high",
    "start": "4065384",
    "end": "4072769"
  },
  {
    "text": "probability, the number of\nlevels in the skip list is order",
    "start": "4072769",
    "end": "4081692"
  },
  {
    "text": "log n.\nI think it's order log n, certainly.\nSo, how do we prove that",
    "start": "4081692",
    "end": "4089349"
  },
  {
    "text": "something happens with high\nprobably? Compute the probability that it\nhappened; show that it's high.",
    "start": "4089349",
    "end": "4098144"
  },
  {
    "text": "Even if you don't know what\nhigh probability means, in fact, I used to ask that\nearlier on.",
    "start": "4098144",
    "end": "4106121"
  },
  {
    "text": "So, let's compute the chance\nthat it doesn't happen, the error probability,\nbecause that's just a one minus",
    "start": "4106122",
    "end": "4115550"
  },
  {
    "text": "the cleaner.\nSo, I'd like to say, let's say, that it's,\nat most, c log n levels.",
    "start": "4115551",
    "end": "4122710"
  },
  {
    "text": "So, what's the error\nprobability for that event? This is sort of an event.\nI'll put it in squiggles just",
    "start": "4122710",
    "end": "4130027"
  },
  {
    "text": "for, all set.\nThis is the probability that they are strictly greater than c\nlog n levels.",
    "start": "4130028",
    "end": "4136259"
  },
  {
    "text": "So, I want to say that that\nprobability is particularly small, polynomially small.\nWell, how do I make levels?",
    "start": "4136260",
    "end": "4144682"
  },
  {
    "text": "When I insert an element,\nthe probability half, it goes up.\nAnd, the number of levels in",
    "start": "4144683",
    "end": "4149984"
  },
  {
    "text": "the skip list is the max over\nall the elements of how high it goes up.\nBut, max, oh,",
    "start": "4149984",
    "end": "4155035"
  },
  {
    "text": "that's a mess.\nAll right, you can compute the expectation of the max if you\nhave a bunch of unknown",
    "start": "4155035",
    "end": "4161022"
  },
  {
    "text": "variables; there is expectation\nthere is a constant, and you take the max.\nIt's like log in and",
    "start": "4161022",
    "end": "4166758"
  },
  {
    "text": "expectation, but we want a much\nstronger statement. And, we have this Boole's\ninequality that says I have a",
    "start": "4166759",
    "end": "4175815"
  },
  {
    "text": "bunch of things,\npolynomially many things. Let's say we have n items.\nEach one independently,",
    "start": "4175815",
    "end": "4183841"
  },
  {
    "text": "I don't even care if it's a\ndependent. If it goes up more than c log\nn, yeah, the number of levels is",
    "start": "4183842",
    "end": "4192582"
  },
  {
    "text": "more than c log n.\nSo, this is, at most, and then I want to\nknow, do any of those events",
    "start": "4192582",
    "end": "4200162"
  },
  {
    "text": "happen for any of the n\nelements? So, I just multiplied by n.\nIt's certainly,",
    "start": "4200163",
    "end": "4206762"
  },
  {
    "text": "at most, n times the\nprobability that x gets promoted, this much here,\ngreater than or equal to log n",
    "start": "4206762",
    "end": "4215502"
  },
  {
    "text": "times.\nOK, if I pick, for any element,\nx, because it's the same for",
    "start": "4215502",
    "end": "4221041"
  },
  {
    "text": "each element.\nThey are done independently. So, I'm just summing over x\nhere, and that's just a factor",
    "start": "4221041",
    "end": "4226178"
  },
  {
    "text": "of n.\nClear? This is Boole's inequality.\nNow, what's the probability that x gets promoted c log n\ntimes?",
    "start": "4226179",
    "end": "4232000"
  },
  {
    "text": "We did this before for log n.\nIt was one over n. For c log n,\nit's one over n to the c.",
    "start": "4232000",
    "end": "4240305"
  },
  {
    "text": "OK, this is n times two.\nLet's be nicer: one half to the power of c log\nn.",
    "start": "4240305",
    "end": "4247324"
  },
  {
    "text": "One half to the power of c log\nn is one over two to the c log",
    "start": "4247324",
    "end": "4253257"
  },
  {
    "text": "n.\nThe log n comes out here, becomes an n.\nWe get n to the c.",
    "start": "4253257",
    "end": "4258990"
  },
  {
    "text": "So, this is n divided by n to\nthe c, which is n to the c minus",
    "start": "4258991",
    "end": "4265022"
  },
  {
    "text": "one.\nAnd, I get to choose c to be whatever I want.\nSo, I choose c minus one to be",
    "start": "4265022",
    "end": "4274676"
  },
  {
    "text": "alpha.\nI think exactly that. Oh, sorry, one over n to the c\nminus one.",
    "start": "4274676",
    "end": "4281626"
  },
  {
    "text": "Thank you.\nIt better be small. This is an upper bound.\nSo, probability is polynomially",
    "start": "4281626",
    "end": "4290236"
  },
  {
    "text": "small.\nI get to choose, and this is a bit of the trik.\nI'm choosing this constant to",
    "start": "4290236",
    "end": "4296484"
  },
  {
    "text": "be large, large enough for\nalpha. The point is,\nas c grows, alpha grows. Therefore, I can set alpha to\nbe whatever I want,",
    "start": "4296484",
    "end": "4303480"
  },
  {
    "text": "set c accordingly.\nSo, there's a little bit more words that have to go here.\nBut, they're in the notes.",
    "start": "4303480",
    "end": "4309459"
  },
  {
    "text": "I can set alpha to be as large\nas I want. So, I can make this probability\nas small as I want in the",
    "start": "4309459",
    "end": "4315199"
  },
  {
    "text": "polynomial sets.\nSo, that's it. Number of levels,\norder log n: wasn't that easy?\nRules and equality,",
    "start": "4315199",
    "end": "4322224"
  },
  {
    "text": "the point is that when you're\ndealing with high probability, use Boole's inequality.\nAnd, anything that's true for",
    "start": "4322224",
    "end": "4329377"
  },
  {
    "text": "one element is true for all of\nthem, just like that. Just lose a factor of n,\nbut that's just one in the",
    "start": "4329377",
    "end": "4335886"
  },
  {
    "text": "alpha, and alpha is big:\nbig constant, but it's big.\nOK, so let's prove the theorem.",
    "start": "4335886",
    "end": "4341106"
  },
  {
    "text": "High probability searches cost\norder log n. We now know the height is order\nlog n, but it depends how",
    "start": "4341106",
    "end": "4347422"
  },
  {
    "text": "balanced this thing is.\nIt depends how long the chains",
    "start": "4347422",
    "end": "4352756"
  },
  {
    "text": "are to really know that a search\ncosts log n. Just knowing a bound on the\nheight is not enough,",
    "start": "4352756",
    "end": "4361210"
  },
  {
    "text": "unlike a binary tree.\nSo, we have one cool idea for this analysis.\nAnd it's called backwards",
    "start": "4361210",
    "end": "4369389"
  },
  {
    "text": "analysis.\nSo, normally you think of a search as starting in the top\nleft corner going left and down",
    "start": "4369389",
    "end": "4378210"
  },
  {
    "text": "until you get to the item that\nyou're looking for.",
    "start": "4378210",
    "end": "4384000"
  },
  {
    "text": "I'm going to look at the\nreverse process. You start at the item you're\nlooking for, and you go left and",
    "start": "4384000",
    "end": "4392557"
  },
  {
    "text": "up until you get to the top left\ncorner. The number of steps in those\ntwo walks is the same.",
    "start": "4392558",
    "end": "4400175"
  },
  {
    "text": "And, I'm not implementing an\nalgorithm here, I'm just doing analysis.\nSo, those are the same",
    "start": "4400175",
    "end": "4407792"
  },
  {
    "text": "processes, just in reverse.\nSo, here's what it looks like. You have a search,\nand it starts,",
    "start": "4407792",
    "end": "4415408"
  },
  {
    "text": "which really means that it ends\nat a node in the bottom list.",
    "start": "4415409",
    "end": "4422000"
  },
  {
    "text": "Then, each time you visit a\nnode in this search, you either go left or up.\nAnd, when do you go left or up?",
    "start": "4422000",
    "end": "4432618"
  },
  {
    "text": "Well, it depends with the coin\nflip was. So, if the node wasn't promoted\nat this level.",
    "start": "4432618",
    "end": "4442000"
  },
  {
    "text": "So, if it wasn't promoted\nhigher, and that happened",
    "start": "4442000",
    "end": "4448317"
  },
  {
    "text": "exactly when we got a tails.\nThen, we go left,",
    "start": "4448317",
    "end": "4454003"
  },
  {
    "text": "which really means we came from\nthe left.",
    "start": "4454003",
    "end": "4459057"
  },
  {
    "text": "Or, if we got a heads,\nso if this node was promoted to",
    "start": "4459057",
    "end": "4465754"
  },
  {
    "text": "the next level,\nwhich happened whenever we got",
    "start": "4465754",
    "end": "4471440"
  },
  {
    "text": "a heads at that particular\nmoment.",
    "start": "4471440",
    "end": "4477000"
  },
  {
    "text": "This is in the past some time\nwhen we did the insertion.",
    "start": "4477000",
    "end": "4482860"
  },
  {
    "text": "Then we go, or came from,\nup. And, we stop at the root.\nThis is really where we start;",
    "start": "4482860",
    "end": "4491704"
  },
  {
    "text": "same thing.\nSo, either at the root or I'm also going to think of this as\nstopping at minus infinity.",
    "start": "4491704",
    "end": "4503000"
  },
  {
    "text": "OK, that was a bit messy,\nbut let me review. So, normally we start up here.\nWell, just looking at",
    "start": "4503000",
    "end": "4508602"
  },
  {
    "text": "everything backwards,\nand in brackets is what's really happening.\nSo, this search ends at the",
    "start": "4508602",
    "end": "4513966"
  },
  {
    "text": "node you were looking for.\nIt's always in the bottom list. Then it says,\nwell, was this node promoted",
    "start": "4513966",
    "end": "4519806"
  },
  {
    "text": "higher?\nIf it was, I came from above. If not, I came to the left.\nIt must have been in the bottom",
    "start": "4519807",
    "end": "4525410"
  },
  {
    "text": "chain somewhere.\nOK, and that's true at every node you visit.\nIt depends whether that quite",
    "start": "4525410",
    "end": "4531870"
  },
  {
    "text": "slipped heads or tails at the\ntime that you inserted that node into that level.\nBut, these are just a bunch of",
    "start": "4531870",
    "end": "4538774"
  },
  {
    "text": "events.\nI'm just going to check, what is the probability that\nits heads, and what is the",
    "start": "4538774",
    "end": "4544258"
  },
  {
    "text": "probability that a tails?\nIt's always a half. Every time I look at a coin\nflip, when it was flipped,",
    "start": "4544258",
    "end": "4550516"
  },
  {
    "text": "there was a probability of half\ngoing out of their way. That's the magic.\nAnd, I'm not using that these",
    "start": "4550516",
    "end": "4556967"
  },
  {
    "text": "events are independent anyway.\nFor every element that I search",
    "start": "4556967",
    "end": "4562247"
  },
  {
    "text": "for, for every value,\nx, that's another search. Those events may not be\nindependent.",
    "start": "4562248",
    "end": "4568123"
  },
  {
    "text": "I can still use Boole's\ninequality and conclude that all of them are order log n with\nhigh probability.",
    "start": "4568123",
    "end": "4575375"
  },
  {
    "text": "As long as I can prove that any\none event happens with high probability.\nSo, I don't need independence",
    "start": "4575375",
    "end": "4582556"
  },
  {
    "text": "between, I knew that these coin\nflips in a single search are independent, but everything\nelse, for different searches I",
    "start": "4582556",
    "end": "4590969"
  },
  {
    "text": "don't care.\nSo, how long can this process go on?\nWe want to know how many times",
    "start": "4590969",
    "end": "4599283"
  },
  {
    "text": "can I make this walk?\nWell, when I hit the root node,",
    "start": "4599283",
    "end": "4604310"
  },
  {
    "text": "I'm done.\nWell, how quickly would I hit the root node?\nWell, with probability,",
    "start": "4604310",
    "end": "4611560"
  },
  {
    "text": "a half, I go up each step.\nThe number of times I go up is,",
    "start": "4611560",
    "end": "4617069"
  },
  {
    "text": "at most, the number of levels\nminus one. And that's order log n with\nhigh probability.",
    "start": "4617069",
    "end": "4625410"
  },
  {
    "text": "So, this is the only other\nidea. So, we are now improving this\ntheorem.",
    "start": "4625410",
    "end": "4630682"
  },
  {
    "text": "So, the number of up moves in a\nsearch, which are really down moves, but same thing,\nis less than the number of",
    "start": "4630682",
    "end": "4639054"
  },
  {
    "text": "levels.\nCertainly, you can't go up more than there are levels in the\nsearch.",
    "start": "4639054",
    "end": "4644713"
  },
  {
    "text": "And in insert,\nyou can go arbitrarily high. But a search:\nas high as you can go.",
    "start": "4644713",
    "end": "4652000"
  },
  {
    "text": "And this is,\nat most, c log n with high probability.\nThis is what we proved in the",
    "start": "4652000",
    "end": "4657865"
  },
  {
    "text": "lemma.\nSo, we have a bound on the number of up moves.\nHalf of the moves,",
    "start": "4657866",
    "end": "4662990"
  },
  {
    "text": "roughly, are going to be up\nmoves. So, this pretty much down to\nthe number of moves.",
    "start": "4662990",
    "end": "4669004"
  },
  {
    "text": "Not quite.\nSo, what this means is that with high probability,\nso this is the same",
    "start": "4669004",
    "end": "4674797"
  },
  {
    "text": "probability, but I could choose\nthat as high as I want by setting c large enough.\nThe number of moves,",
    "start": "4674797",
    "end": "4683553"
  },
  {
    "text": "in other words,\nthe cost of the search is at most the number of coin flips\nuntil we get c long n heads,",
    "start": "4683553",
    "end": "4691320"
  },
  {
    "text": "right, because in every step of\nthe search, I make a move, and then I flip another coin,\nconceptually.",
    "start": "4691320",
    "end": "4699009"
  },
  {
    "text": "There is another independent\ncoin lying there. And it's either heads or tails.\nEach of those is independent.",
    "start": "4699009",
    "end": "4707165"
  },
  {
    "text": "So, how many independent coin\nflips does it take until I get c log n heads?\nThe claim is that that's order",
    "start": "4707165",
    "end": "4717206"
  },
  {
    "text": "log n with high probability.\nBut we need to prove that.",
    "start": "4717206",
    "end": "4722979"
  },
  {
    "text": "So, this is a claim.\nSo, if you just sit there with",
    "start": "4722979",
    "end": "4728324"
  },
  {
    "text": "a coin, and you want to know how\nmany times does it take until I",
    "start": "4728324",
    "end": "4735058"
  },
  {
    "text": "get c log n heads,\nthe claim is that that number",
    "start": "4735058",
    "end": "4740082"
  },
  {
    "text": "is order log n with high\nprobability. As long as I prove that,\nI know that the total number of",
    "start": "4740082",
    "end": "4748595"
  },
  {
    "text": "steps I make,\nwhich is the number of heads and tails is order log n because\nI definitely know the number of",
    "start": "4748595",
    "end": "4755394"
  },
  {
    "text": "heads is, at most,\nc log n. The claim is that the number of\ntails can't be too much bigger.",
    "start": "4755394",
    "end": "4761147"
  },
  {
    "text": "Notice, I can't just say c\nhere. OK, it's really important that\nI have log n. Why?\nBecause with high probability,",
    "start": "4761147",
    "end": "4768208"
  },
  {
    "text": "it depends on n.\nThis notion depends on n. Log n: it's true.\nAnything bigger that log n:",
    "start": "4768208",
    "end": "4775434"
  },
  {
    "text": "it's true, like n.\nIf I put n here, this is also true.\nBut, if I put a constant or a",
    "start": "4775434",
    "end": "4781756"
  },
  {
    "text": "log log n, this is not true.\nIt's really important that I have log n here because my\nnotion of high probability",
    "start": "4781756",
    "end": "4790185"
  },
  {
    "text": "depends on what's written here.\nOK, it's clear so far. We're almost done,\nwhich is good because I just",
    "start": "4790185",
    "end": "4797911"
  },
  {
    "text": "ran out of time.\nSorry, we're going to go a couple minutes over.\nSo, I want to compute the error",
    "start": "4797912",
    "end": "4807528"
  },
  {
    "text": "probability here.\nSo, I want to compute the probability that there is less\nthan c log n heads.",
    "start": "4807528",
    "end": "4817886"
  },
  {
    "text": "Let me skip this step.\nSo, I will be approximate and",
    "start": "4817886",
    "end": "4823691"
  },
  {
    "text": "say, what's the probability that\nthere is, at most,",
    "start": "4823691",
    "end": "4829382"
  },
  {
    "text": "c log n heads?\nSo, I need to say how many coins we are flipping here for\nwhat this event is.",
    "start": "4829382",
    "end": "4837549"
  },
  {
    "text": "So, I need to specify this\nconstant. Let's say we flip ten c log n\ncoins.",
    "start": "4837549",
    "end": "4842729"
  },
  {
    "text": "Now I want to look at the error\nprobability under that event. The probability that there is\nat most c log n heads among",
    "start": "4842729",
    "end": "4851312"
  },
  {
    "text": "those ten c log n flips.\nSo, the claim is this should be pretty small.\nIt's going to depend on ten.",
    "start": "4851312",
    "end": "4858416"
  },
  {
    "text": "Then I'll choose ten to be\narbitrarily large, and I'll be done,\nOK, make my life a little bit",
    "start": "4858416",
    "end": "4865075"
  },
  {
    "text": "easier.\nWell, I would ask you normally, but this is 6.042 material.\nSo, what's the probability that",
    "start": "4865076",
    "end": "4875770"
  },
  {
    "text": "we have, at most,\nthis many heads? Well, that means that nine c\nlog n of the coins,",
    "start": "4875770",
    "end": "4883653"
  },
  {
    "text": "because there are ten c log n\nflips, c log n heads at most,",
    "start": "4883653",
    "end": "4889367"
  },
  {
    "text": "nine c log n at least better be\ntails. So this is the probability that\nall those other guys become",
    "start": "4889368",
    "end": "4897149"
  },
  {
    "text": "tails, which is already pretty\nsmall. And then, there is this\npermutation thing. So, if I had exactly c log n\nheads, this would be the number",
    "start": "4897149",
    "end": "4904533"
  },
  {
    "text": "of ways to rearrange c log n\nheads among ten c log n coin flips.\nOK, that's just the number of permutations.\nSo, this is a bit big,",
    "start": "4904533",
    "end": "4911375"
  },
  {
    "text": "which is kind of annoying.\nThis is really, really small.\nThe claim is this is much smaller than that is big.",
    "start": "4911375",
    "end": "4918000"
  },
  {
    "text": "So, this is just some math.\nI'm going to whiz through it. So, you don't have to stay too\nlong.",
    "start": "4934000",
    "end": "4941389"
  },
  {
    "text": "But you should go over it.\nYou should know that y choose x is, at most, ey over x to the x,\ngood fact.",
    "start": "4941390",
    "end": "4950000"
  },
  {
    "text": "Therefore, this is,\nat most, ten c log n over c log",
    "start": "4950000",
    "end": "4955033"
  },
  {
    "text": "n, also known as ten.\nThese cancel. There's an e out here.\nAnd then I raise that to the c",
    "start": "4955033",
    "end": "4963691"
  },
  {
    "text": "log n power.\nOK, then I divide by two to the power, nine c log n.\nOK, so what's this?",
    "start": "4963691",
    "end": "4971946"
  },
  {
    "text": "This is e times ten to the c\nlog n divided by two to the nine",
    "start": "4971946",
    "end": "4977986"
  },
  {
    "text": "c log n.\nOK, claim this is very big. This is not so big,\nbecause I have a nine here.",
    "start": "4977986",
    "end": "4986367"
  },
  {
    "text": "So, let's work it out.\nThis e times ten, that's a good number,\nwe can put upstairs.",
    "start": "4986367",
    "end": "4993345"
  },
  {
    "text": "So, we get log of e times ten,\nten times, e, and then c log n.\nAnd then, we have over two to",
    "start": "4993345",
    "end": "5001109"
  },
  {
    "text": "the nine c log n.\nSo, we have this two to the c log n in both cases.\nSo, this is two to the log,",
    "start": "5001109",
    "end": "5011946"
  },
  {
    "text": "ten e minus nine,\nc, log n: some basic algebra.",
    "start": "5011946",
    "end": "5018669"
  },
  {
    "text": "So, I'm going to set,\nnot quite. This is one over two to the\nnine minus log:",
    "start": "5018669",
    "end": "5029338"
  },
  {
    "text": "so, just inverting everything\nhere, negating the sign in here.",
    "start": "5029338",
    "end": "5038253"
  },
  {
    "text": "And, this is my alpha because\nthe rest is n.",
    "start": "5038253",
    "end": "5046000"
  },
  {
    "text": "So, this is one over n to the\nalpha when alpha is this particular value:\nnine minus log of ten times e",
    "start": "5046000",
    "end": "5053291"
  },
  {
    "text": "times c.\nIt's a bit of a strange thing. But, the point is,\nas ten goes to infinity,",
    "start": "5053291",
    "end": "5059184"
  },
  {
    "text": "nine here is the number one\nsmaller than ten, right?\nWe subtracted one somewhere",
    "start": "5059184",
    "end": "5064855"
  },
  {
    "text": "along the way.\nSo, as ten goes to infinity, this is basically,\nthis is ten minus one.",
    "start": "5064855",
    "end": "5072000"
  },
  {
    "text": "This is log of ten times e.\ne doesn't really matter. The point is,\nthis is logarithmic in ten.",
    "start": "5072000",
    "end": "5077531"
  },
  {
    "text": "This is linear in ten.\nThe thing that's linear in ten is much bigger than the thing\nthat's logarithmic in ten.",
    "start": "5077531",
    "end": "5084034"
  },
  {
    "text": "This is called abusive\nnotation. OK, as ten goes to infinity,\nthis goes to infinity, gets bigger.\nAnd, there is a c out here.",
    "start": "5084035",
    "end": "5091329"
  },
  {
    "text": "But, for any value of c that\nyou want, whatever value of c you wanted in that claim,\nI can make alpha arbitrarily",
    "start": "5091329",
    "end": "5098015"
  },
  {
    "text": "large by changing the constant\nin the big O, which here was ten.\nOK, so that claim is true with",
    "start": "5098015",
    "end": "5104812"
  },
  {
    "text": "high probability.\nWhatever probability you want, which tells you alpha,\nyou set a constant effort of",
    "start": "5104812",
    "end": "5110673"
  },
  {
    "text": "the log N to be this number,\nwhich grows, and you're done.\nYou get the claim that is order",
    "start": "5110673",
    "end": "5115928"
  },
  {
    "text": "log N heads, order log N flips\nwith the high probability, therefore.\n[None of the steps?] in the",
    "start": "5115929",
    "end": "5121548"
  },
  {
    "text": "search is order log N with high\nprobability. Really cool stuff;\nread the notes. Sorry I went so fast at the\nend.",
    "start": "5121548",
    "end": "5128206"
  }
]