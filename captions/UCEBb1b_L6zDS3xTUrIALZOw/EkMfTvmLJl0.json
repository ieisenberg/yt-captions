[
  {
    "start": "0",
    "end": "50"
  },
  {
    "text": "The following content is\nprovided under a Creative",
    "start": "50",
    "end": "2500"
  },
  {
    "text": "Commons license.",
    "start": "2500",
    "end": "4010"
  },
  {
    "text": "Your support will help\nMIT OpenCourseWare",
    "start": "4010",
    "end": "6350"
  },
  {
    "text": "continue to offer high quality\neducational resources for free.",
    "start": "6350",
    "end": "10719"
  },
  {
    "text": "To make a donation or\nview additional materials",
    "start": "10720",
    "end": "13330"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare",
    "start": "13330",
    "end": "17205"
  },
  {
    "text": "at ocw.mit.edu.",
    "start": "17205",
    "end": "17830"
  },
  {
    "start": "17830",
    "end": "21480"
  },
  {
    "text": "BRIAN SWEATT: So we're the\nreal time ray tracing group.",
    "start": "21480",
    "end": "24388"
  },
  {
    "text": "And as we like to call\nourselves, Blue Steel.",
    "start": "24388",
    "end": "29020"
  },
  {
    "text": "So one thing you might be\nasking yourselves and wondering",
    "start": "29020",
    "end": "33440"
  },
  {
    "text": "from us is, where did we\nget the name Blue Steel?",
    "start": "33440",
    "end": "35980"
  },
  {
    "text": "What does it have to do with\nthis thing we call ray tracing?",
    "start": "35980",
    "end": "38670"
  },
  {
    "text": "And this morning when I was\nsitting up and finishing up",
    "start": "38670",
    "end": "44350"
  },
  {
    "text": "the project, I was asking\nmyself the same thing.",
    "start": "44350",
    "end": "47390"
  },
  {
    "text": "We're doing ray tracing.",
    "start": "47390",
    "end": "48390"
  },
  {
    "text": "Where did we come\nup with this name?",
    "start": "48390",
    "end": "49739"
  },
  {
    "text": "So I'm going to give you a\nlittle background on what",
    "start": "49740",
    "end": "51906"
  },
  {
    "text": "Blue Steel is.",
    "start": "51906",
    "end": "52579"
  },
  {
    "start": "52580",
    "end": "57890"
  },
  {
    "text": "The name came from the first\nday we got access to our PS3,",
    "start": "57890",
    "end": "61610"
  },
  {
    "text": "we went to the student\ncenter like a bunch",
    "start": "61610",
    "end": "63360"
  },
  {
    "text": "of excited kids on Christmas.",
    "start": "63360",
    "end": "64920"
  },
  {
    "text": "And what did we do?",
    "start": "64920",
    "end": "66060"
  },
  {
    "text": "We created a mailing\nlist for our group.",
    "start": "66060",
    "end": "70009"
  },
  {
    "text": "Didn't even mess with the PS3.",
    "start": "70010",
    "end": "71260"
  },
  {
    "text": "Just created the mailing list\nand sat there for about an hour",
    "start": "71260",
    "end": "73890"
  },
  {
    "text": "and a half, thinking of a name.",
    "start": "73890",
    "end": "75520"
  },
  {
    "text": "And somehow, we decided on\nZoolander's famous face,",
    "start": "75520",
    "end": "79140"
  },
  {
    "text": "Blue Steel.",
    "start": "79140",
    "end": "80350"
  },
  {
    "text": "And it didn't have particular\nsignificance to us before,",
    "start": "80350",
    "end": "84740"
  },
  {
    "text": "but as you'll see, it has\na lot of historical value.",
    "start": "84740",
    "end": "88729"
  },
  {
    "start": "88730",
    "end": "92080"
  },
  {
    "text": "Blue Steel is also an\nalloy, a ferrous alloy.",
    "start": "92080",
    "end": "97060"
  },
  {
    "start": "97060",
    "end": "99680"
  },
  {
    "text": "As you could see, we have\nblue tempered spring steel",
    "start": "99680",
    "end": "104000"
  },
  {
    "text": "that many companies,\nindustries, use.",
    "start": "104000",
    "end": "107210"
  },
  {
    "text": "And Blue Steel is also a\nwarhead made in the Cold War.",
    "start": "107210",
    "end": "114440"
  },
  {
    "text": "But these have nothing\nto do with our project.",
    "start": "114440",
    "end": "116770"
  },
  {
    "text": "To us, and for the\npurpose of this project,",
    "start": "116770",
    "end": "120399"
  },
  {
    "text": "Blue Steel is a distributed\nreal time ray tracer.",
    "start": "120400",
    "end": "124000"
  },
  {
    "text": "And Natalia is going to give\nyou a little background on what",
    "start": "124000",
    "end": "127020"
  },
  {
    "text": "ray tracing really is.",
    "start": "127020",
    "end": "129461"
  },
  {
    "text": "NATALIA CHERNENKO: Thank you.",
    "start": "129461",
    "end": "130668"
  },
  {
    "start": "130669",
    "end": "137660"
  },
  {
    "text": "So ray tracing, there are two\nterms that you would generally",
    "start": "137660",
    "end": "144210"
  },
  {
    "text": "hear, ray tracing\nand ray casting.",
    "start": "144210",
    "end": "147250"
  },
  {
    "text": "Basically, the idea is the\ncamera is like the eye.",
    "start": "147250",
    "end": "152800"
  },
  {
    "text": "And from the camera,\nrays are cast",
    "start": "152800",
    "end": "155710"
  },
  {
    "text": "for each pixel in a picture.",
    "start": "155710",
    "end": "158170"
  },
  {
    "text": "And these rays, they intersect\nwith all the virtual objects",
    "start": "158170",
    "end": "163590"
  },
  {
    "text": "in the scene.",
    "start": "163590",
    "end": "164700"
  },
  {
    "text": "When an object is hit, the\ncolor of it is computed.",
    "start": "164700",
    "end": "170819"
  },
  {
    "start": "170820",
    "end": "173610"
  },
  {
    "text": "The closest object\nthat is intersected",
    "start": "173610",
    "end": "176400"
  },
  {
    "text": "is the object that\nshows up on the screen.",
    "start": "176400",
    "end": "180269"
  },
  {
    "start": "180270",
    "end": "182451"
  },
  {
    "text": "BRIAN SWEATT: We should\ncredit these slides.",
    "start": "182451",
    "end": "184284"
  },
  {
    "text": "They're Fredo\nDurand's from 6A37.",
    "start": "184284",
    "end": "188760"
  },
  {
    "text": "NATALIA CHERNENKO: And\nray tracing is recursive.",
    "start": "188760",
    "end": "192180"
  },
  {
    "text": "It accounts for\nshadows, positions",
    "start": "192180",
    "end": "195140"
  },
  {
    "text": "of other objects in the scene.",
    "start": "195140",
    "end": "199200"
  },
  {
    "text": "There is reflection\nand refraction.",
    "start": "199200",
    "end": "202390"
  },
  {
    "text": "For example, if this ray\nwere to hit that object",
    "start": "202390",
    "end": "206030"
  },
  {
    "text": "and then reflect\nit, then another ray",
    "start": "206030",
    "end": "208360"
  },
  {
    "text": "is cast from that object in\nthe reflecting direction.",
    "start": "208360",
    "end": "212160"
  },
  {
    "text": "And this can go on for\nan indefinite number",
    "start": "212160",
    "end": "215420"
  },
  {
    "text": "of reflections.",
    "start": "215420",
    "end": "217500"
  },
  {
    "text": "These are normally\nspecified in the program.",
    "start": "217500",
    "end": "220590"
  },
  {
    "start": "220590",
    "end": "224550"
  },
  {
    "text": "Here is an example\nof the recursion.",
    "start": "224550",
    "end": "227250"
  },
  {
    "text": "So the three planes\nare reflective.",
    "start": "227250",
    "end": "232080"
  },
  {
    "text": "They're like mirrors, and\nthere are three spheres",
    "start": "232080",
    "end": "235080"
  },
  {
    "text": "running between them.",
    "start": "235080",
    "end": "236580"
  },
  {
    "text": "With no recursion, you can see\nthere is no reflection at all.",
    "start": "236580",
    "end": "239580"
  },
  {
    "text": "With one recursion, you can see\nthe rays are reflecting just",
    "start": "239580",
    "end": "244580"
  },
  {
    "text": "off the side mirrors.",
    "start": "244580",
    "end": "245580"
  },
  {
    "text": "At the end with two\nrecursions, there is also",
    "start": "245580",
    "end": "248170"
  },
  {
    "text": "reflection at the bottom.",
    "start": "248170",
    "end": "249569"
  },
  {
    "text": "So it is a reflection of\none of the reflections.",
    "start": "249570",
    "end": "252220"
  },
  {
    "start": "252220",
    "end": "257180"
  },
  {
    "text": "And this is very\ncomputationally intensive",
    "start": "257180",
    "end": "260549"
  },
  {
    "text": "because for every pixel,\nyou're casting a ray.",
    "start": "260550",
    "end": "265090"
  },
  {
    "text": "And for every\nobject in the scene,",
    "start": "265090",
    "end": "267300"
  },
  {
    "text": "you're intersecting\nthat ray with the object",
    "start": "267300",
    "end": "270009"
  },
  {
    "text": "and seeing if it's hit.",
    "start": "270010",
    "end": "271480"
  },
  {
    "text": "And then if it is hit and it\nis reflective or refractive--",
    "start": "271480",
    "end": "275560"
  },
  {
    "text": "so transparent-- then\nanother ray is cast.",
    "start": "275560",
    "end": "280300"
  },
  {
    "text": "This scene here is a\nresolution 1024 by 1024",
    "start": "280300",
    "end": "286440"
  },
  {
    "text": "and recursion depth is 100.",
    "start": "286440",
    "end": "289490"
  },
  {
    "text": "And the rendering time in\nour program was 2.6 seconds.",
    "start": "289490",
    "end": "294780"
  },
  {
    "text": "The rendering time for 20 depth\nrecursion was 600 milliseconds,",
    "start": "294780",
    "end": "301910"
  },
  {
    "text": "and for 10 was 300 milliseconds.",
    "start": "301910",
    "end": "306492"
  },
  {
    "text": "PROFESSOR: [INAUDIBLE]\nSPU [INAUDIBLE].",
    "start": "306492",
    "end": "310920"
  },
  {
    "text": "What would be the [INAUDIBLE].",
    "start": "310920",
    "end": "313872"
  },
  {
    "text": "R. J. RYAN: Many of us have\ntaken 6A37, and in that class,",
    "start": "313872",
    "end": "317550"
  },
  {
    "text": "we're all about ray tracers.",
    "start": "317550",
    "end": "320300"
  },
  {
    "text": "And a typical scene like the one\nthat is on the PowerPoint right",
    "start": "320300",
    "end": "324098"
  },
  {
    "text": "now could take up\nto a minute or more.",
    "start": "324098",
    "end": "328550"
  },
  {
    "text": "Often, if you were\nto do 100 bounces,",
    "start": "328550",
    "end": "332360"
  },
  {
    "text": "I think mine would probably\ntake over 10 minutes.",
    "start": "332360",
    "end": "337397"
  },
  {
    "text": "PROFESSOR: [INAUDIBLE] you\njust to [INAUDIBLE] SPU or",
    "start": "337398",
    "end": "340877"
  },
  {
    "text": "[? one SPU. ?]",
    "start": "340877",
    "end": "342236"
  },
  {
    "text": "NATALIA CHERNENKO: We\ndid try different SPUs.",
    "start": "342236",
    "end": "344110"
  },
  {
    "text": "This picture, we didn't\ntry with different SPUs,",
    "start": "344110",
    "end": "346840"
  },
  {
    "text": "but we have tried other\nscenes with various numbers.",
    "start": "346840",
    "end": "350610"
  },
  {
    "text": "And we did get exact\nlinear speed up.",
    "start": "350610",
    "end": "354289"
  },
  {
    "text": "So if there were\ntwice as many SPUs,",
    "start": "354290",
    "end": "357620"
  },
  {
    "text": "it would be twice as fast.",
    "start": "357620",
    "end": "359900"
  },
  {
    "start": "359900",
    "end": "365165"
  },
  {
    "text": "R. J. RYAN: OK.",
    "start": "365165",
    "end": "365790"
  },
  {
    "text": "So I'm going to talk to\nyou about optimizations",
    "start": "365790",
    "end": "368685"
  },
  {
    "text": "that we did.",
    "start": "368685",
    "end": "370080"
  },
  {
    "text": "Natalia's told you about ray\ntracing, and that's only half",
    "start": "370080",
    "end": "372580"
  },
  {
    "text": "of our project.",
    "start": "372580",
    "end": "375030"
  },
  {
    "text": "The part that we have to\nfocus on is optimizing.",
    "start": "375030",
    "end": "379012"
  },
  {
    "text": "And meeting that goal\nof being real time.",
    "start": "379012",
    "end": "382565"
  },
  {
    "text": "And for us, real time, you\nhave to ask, what is real time?",
    "start": "382565",
    "end": "387745"
  },
  {
    "text": "If we go off of like, the\nAmerican video standard NTSC,",
    "start": "387745",
    "end": "392790"
  },
  {
    "text": "they define it to be around\n27, 30 frames a second.",
    "start": "392790",
    "end": "397430"
  },
  {
    "text": "So that was pretty\nmuch the goal that we",
    "start": "397430",
    "end": "399366"
  },
  {
    "text": "set when we set out to do this.",
    "start": "399366",
    "end": "400889"
  },
  {
    "text": "And so we took the code and we\nthink, OK, we can split this.",
    "start": "400890",
    "end": "404790"
  },
  {
    "text": "This task is easily\nparallelizable.",
    "start": "404790",
    "end": "407290"
  },
  {
    "text": "But we're going to have to\ndo a lot more than that if we",
    "start": "407290",
    "end": "410720"
  },
  {
    "text": "want to get better rates.",
    "start": "410720",
    "end": "412010"
  },
  {
    "text": "So we took advantage of the\nhardware that we were on.",
    "start": "412010",
    "end": "415430"
  },
  {
    "text": "And one thing that on\nthe ray tracing end,",
    "start": "415430",
    "end": "421570"
  },
  {
    "text": "we had to go crazy\nwith, was SIMD.",
    "start": "421570",
    "end": "423680"
  },
  {
    "start": "423680",
    "end": "424669"
  },
  {
    "text": "Pretty much, the\nentire ray tracer never",
    "start": "424670",
    "end": "428300"
  },
  {
    "text": "deals with a scalar value.",
    "start": "428300",
    "end": "431009"
  },
  {
    "text": "We use SIMD for everything.",
    "start": "431010",
    "end": "432660"
  },
  {
    "text": "And in the core of it,\nwe do branch avoidance.",
    "start": "432660",
    "end": "439460"
  },
  {
    "text": "So we really try not\nto take branches,",
    "start": "439460",
    "end": "441880"
  },
  {
    "text": "because branch misses are\nvery costly on the cell.",
    "start": "441880",
    "end": "445010"
  },
  {
    "text": "So I believe there's\nsomething like three",
    "start": "445010",
    "end": "449490"
  },
  {
    "text": "if statements spread\nacross 4,000 lines of code",
    "start": "449490",
    "end": "454020"
  },
  {
    "text": "for the ray tracer.",
    "start": "454020",
    "end": "455520"
  },
  {
    "text": "We really took SIMD\nto hear in this.",
    "start": "455520",
    "end": "458590"
  },
  {
    "start": "458590",
    "end": "462110"
  },
  {
    "text": "Using SIMD, you can process\narrays of structures.",
    "start": "462110",
    "end": "467479"
  },
  {
    "text": "So we took--",
    "start": "467480",
    "end": "469797"
  },
  {
    "text": "NATALIA CHERNENKO: [INAUDIBLE]",
    "start": "469797",
    "end": "471639"
  },
  {
    "start": "471640",
    "end": "472585"
  },
  {
    "text": "R. J. RYAN: We would trace ray\npackets of four rays at a time,",
    "start": "472585",
    "end": "476509"
  },
  {
    "text": "and from those ray packets,\nwe would generate hit packets.",
    "start": "476510",
    "end": "478950"
  },
  {
    "text": "And then similarly, as\nyou go down the line,",
    "start": "478950",
    "end": "481120"
  },
  {
    "text": "we would produce an RGB packet,\nwhich is four color values tied",
    "start": "481120",
    "end": "485630"
  },
  {
    "text": "into one.",
    "start": "485630",
    "end": "486540"
  },
  {
    "text": "So at every step, we would\nuse SIMD to our advantage.",
    "start": "486540",
    "end": "491015"
  },
  {
    "text": "Now Brian's going to talk\nto you about pipe lining.",
    "start": "491015",
    "end": "493140"
  },
  {
    "start": "493140",
    "end": "497570"
  },
  {
    "text": "BRIAN SWEATT: So of particular\nimportance on the cell",
    "start": "497570",
    "end": "500085"
  },
  {
    "text": "is not only what instructions\nyou execute, but the order",
    "start": "500085",
    "end": "503347"
  },
  {
    "text": "that you execute them\nin, because there is",
    "start": "503347",
    "end": "505163"
  },
  {
    "text": "no reorder buffer on the cell.",
    "start": "505164",
    "end": "507080"
  },
  {
    "text": "There is no out of\norder execution.",
    "start": "507080",
    "end": "508680"
  },
  {
    "text": "And despite the fact\nthat compiler technology",
    "start": "508680",
    "end": "511400"
  },
  {
    "text": "is very good, hand optimization\nand pipe lining instructions",
    "start": "511400",
    "end": "515909"
  },
  {
    "text": "is still always better.",
    "start": "515909",
    "end": "517770"
  },
  {
    "text": "For instance, with our\ntriangle intersection routine,",
    "start": "517770",
    "end": "522520"
  },
  {
    "text": "we gained on the\norder of hundreds",
    "start": "522520",
    "end": "525360"
  },
  {
    "text": "of milliseconds of render time.",
    "start": "525360",
    "end": "529259"
  },
  {
    "text": "We shaved hundreds of\nmilliseconds of render time",
    "start": "529259",
    "end": "531300"
  },
  {
    "text": "off of our render time for\nsome scenes you will see later,",
    "start": "531300",
    "end": "534010"
  },
  {
    "text": "just by reordering\nour calculations",
    "start": "534010",
    "end": "537190"
  },
  {
    "text": "in the intersection code.",
    "start": "537190",
    "end": "538450"
  },
  {
    "text": "So it's very important,\nespecially on the SPEs.",
    "start": "538450",
    "end": "540750"
  },
  {
    "text": "And one other\noptimization we made",
    "start": "540750",
    "end": "542720"
  },
  {
    "text": "was the fact that we\ncoded basically everything",
    "start": "542720",
    "end": "546430"
  },
  {
    "text": "on the SPEs.",
    "start": "546430",
    "end": "547750"
  },
  {
    "text": "Anything running on the SPEs\nis coded in C. Not in C++.",
    "start": "547750",
    "end": "551480"
  },
  {
    "text": "And we're not using\ninheritance when we do use C++",
    "start": "551480",
    "end": "553730"
  },
  {
    "text": "because virtual functions\nhave more overhead in respect",
    "start": "553730",
    "end": "558930"
  },
  {
    "text": "to memory, the V table, and\nalso looking up the function",
    "start": "558930",
    "end": "562290"
  },
  {
    "text": "pointers from the V table.",
    "start": "562290",
    "end": "563880"
  },
  {
    "text": "So these are just a couple\nof the optimizations we made.",
    "start": "563880",
    "end": "566354"
  },
  {
    "text": "We'll talk about more later.",
    "start": "566354",
    "end": "567520"
  },
  {
    "text": "AUDIENCE: Just a quick question.",
    "start": "567520",
    "end": "568120"
  },
  {
    "text": "So for the pipeline,\nyou actually",
    "start": "568120",
    "end": "569494"
  },
  {
    "text": "reordered instruction\nstatements?",
    "start": "569494",
    "end": "571630"
  },
  {
    "text": "The compiler wasn't very\nhelpful in that respect?",
    "start": "571630",
    "end": "573710"
  },
  {
    "text": "BRIAN SWEATT: Yeah.",
    "start": "573710",
    "end": "574501"
  },
  {
    "text": "So on that scene, 1024\nby 1024 with the spheres,",
    "start": "574501",
    "end": "580480"
  },
  {
    "text": "we were getting,\nNatalia mentioned",
    "start": "580480",
    "end": "583459"
  },
  {
    "text": "with a depth of recursion 10, we\nwere getting 300 milliseconds.",
    "start": "583460",
    "end": "587800"
  },
  {
    "text": "That's with optimized.",
    "start": "587800",
    "end": "588970"
  },
  {
    "text": "Without the optimizations,\nwe were getting closer to 500",
    "start": "588970",
    "end": "592250"
  },
  {
    "text": "with a depth of recursion of 10.",
    "start": "592250",
    "end": "595850"
  },
  {
    "text": "And we gained that extra 200\nmilliseconds just by reordering",
    "start": "595850",
    "end": "599930"
  },
  {
    "text": "instructions in the intersection\nwith optimization level 03",
    "start": "599930",
    "end": "603980"
  },
  {
    "text": "in XLC.",
    "start": "603980",
    "end": "605570"
  },
  {
    "text": "So hand optimization, like\nMike Acton said in class,",
    "start": "605570",
    "end": "608930"
  },
  {
    "text": "is still very important.",
    "start": "608930",
    "end": "609960"
  },
  {
    "start": "609960",
    "end": "613281"
  },
  {
    "text": "And I'm going to hand\nyou off to Mikey now",
    "start": "613281",
    "end": "615030"
  },
  {
    "text": "to discuss the regular grid.",
    "start": "615030",
    "end": "616340"
  },
  {
    "start": "616340",
    "end": "621059"
  },
  {
    "text": "MICHAEL D'AMBROSIO: So\none of the problems,",
    "start": "621059",
    "end": "622850"
  },
  {
    "text": "I guess, with ray tracing\nis that intersections",
    "start": "622850",
    "end": "625339"
  },
  {
    "text": "are very expensive.",
    "start": "625340",
    "end": "626953"
  },
  {
    "text": "And when you have scenes\nwith n rays and m primitives,",
    "start": "626953",
    "end": "631056"
  },
  {
    "text": "well, you have to generate\nn times m intersections.",
    "start": "631056",
    "end": "634200"
  },
  {
    "text": "So one common acceleration\nstructure is grid.",
    "start": "634200",
    "end": "637700"
  },
  {
    "text": "And the concept is very\nsimple, as the picture depicts.",
    "start": "637700",
    "end": "640480"
  },
  {
    "text": "You just take your\nscreen, split it up",
    "start": "640480",
    "end": "642380"
  },
  {
    "text": "into a number of\nevenly size box holes,",
    "start": "642380",
    "end": "644840"
  },
  {
    "text": "place your primitives\nin them, and then you",
    "start": "644840",
    "end": "646930"
  },
  {
    "text": "march your ray through.",
    "start": "646930",
    "end": "648560"
  },
  {
    "text": "And you only intersect\nthe ray with primitives",
    "start": "648560",
    "end": "652550"
  },
  {
    "text": "that are around the area.",
    "start": "652550",
    "end": "654660"
  },
  {
    "text": "And the good thing\nabout a grid is",
    "start": "654660",
    "end": "656230"
  },
  {
    "text": "that it's very\neasy to construct,",
    "start": "656230",
    "end": "657690"
  },
  {
    "text": "as opposed to, say, a\nk-d tree or an octree.",
    "start": "657690",
    "end": "660130"
  },
  {
    "text": "Those take on the\norder of n log n,",
    "start": "660130",
    "end": "662050"
  },
  {
    "text": "where n is number of primitives.",
    "start": "662050",
    "end": "664350"
  },
  {
    "text": "Regular grid is order n, where\nn is the number of primitives.",
    "start": "664350",
    "end": "667274"
  },
  {
    "text": "And the reason\nwhy we did this is",
    "start": "667275",
    "end": "668650"
  },
  {
    "text": "because with an interactive\nscene where things are moving",
    "start": "668650",
    "end": "672170"
  },
  {
    "text": "around, you need to rebuild\nthe grid every frame",
    "start": "672170",
    "end": "675089"
  },
  {
    "text": "or whenever something moves.",
    "start": "675090",
    "end": "676930"
  },
  {
    "text": "So we favored this choice\nof acceleration structure",
    "start": "676930",
    "end": "680410"
  },
  {
    "text": "because it was quick to\nbuild and easy to traverse.",
    "start": "680410",
    "end": "683324"
  },
  {
    "start": "683325",
    "end": "686080"
  },
  {
    "text": "And now Fish is going to\ntell you about the fun",
    "start": "686080",
    "end": "691063"
  },
  {
    "text": "part of the project.",
    "start": "691063",
    "end": "692037"
  },
  {
    "start": "692037",
    "end": "697394"
  },
  {
    "text": "SCOTT FISHER: I was in charge\nof building the actual physics",
    "start": "697394",
    "end": "701290"
  },
  {
    "text": "engine.",
    "start": "701290",
    "end": "702269"
  },
  {
    "text": "Our original plan was to\nthe 6170 well-known gizmo",
    "start": "702270",
    "end": "707770"
  },
  {
    "text": "ball in 3D and ray traced.",
    "start": "707770",
    "end": "711860"
  },
  {
    "text": "And I guess if we\nwant to show that?",
    "start": "711860",
    "end": "717180"
  },
  {
    "text": "I have it running\non this laptop.",
    "start": "717180",
    "end": "720790"
  },
  {
    "text": "We didn't quite\nget it ray traced,",
    "start": "720790",
    "end": "722699"
  },
  {
    "text": "but I'm just going to show\nyou a little bit of what",
    "start": "722700",
    "end": "726110"
  },
  {
    "text": "I did as a physics engine.",
    "start": "726110",
    "end": "727300"
  },
  {
    "start": "727300",
    "end": "741880"
  },
  {
    "text": "Maybe not.",
    "start": "741880",
    "end": "742380"
  },
  {
    "start": "742380",
    "end": "752535"
  },
  {
    "text": "R. J. RYAN: We'll\nget the demo working",
    "start": "752535",
    "end": "754118"
  },
  {
    "text": "and then I think we\ncan use it later.",
    "start": "754118",
    "end": "755886"
  },
  {
    "text": "SCOTT FISHER: Anyway,\nit was basically",
    "start": "755886",
    "end": "757469"
  },
  {
    "text": "a 2 and 1/2 D version\nof the example that",
    "start": "757469",
    "end": "760120"
  },
  {
    "text": "was just up on the screen.",
    "start": "760120",
    "end": "762170"
  },
  {
    "text": "Flippers work, absorbers work,\nand due to complications,",
    "start": "762170",
    "end": "766440"
  },
  {
    "text": "we never did get it\nfully ray traced.",
    "start": "766440",
    "end": "768470"
  },
  {
    "text": "And I guess we'll go ahead and\ngive you the real ray trace",
    "start": "768470",
    "end": "774120"
  },
  {
    "text": "demo, since we do have\na couple of those.",
    "start": "774120",
    "end": "775860"
  },
  {
    "start": "775860",
    "end": "784613"
  },
  {
    "text": "PROFESSOR: So their actual demo\nwill be on a little LCD screen",
    "start": "784613",
    "end": "788024"
  },
  {
    "text": "here.",
    "start": "788025",
    "end": "788525"
  },
  {
    "text": "Hopefully everybody\ncan see the ray trace.",
    "start": "788525",
    "end": "791948"
  },
  {
    "text": "Unfortunately, PS3\nneeds a specific kind",
    "start": "791948",
    "end": "795126"
  },
  {
    "text": "of digital connection to display\nthings in the right resolution",
    "start": "795126",
    "end": "798716"
  },
  {
    "text": "when you're writing\nthrough Frame Buffer.",
    "start": "798716",
    "end": "800680"
  },
  {
    "text": "So we can't project it\nonto the big screen.",
    "start": "800680",
    "end": "802660"
  },
  {
    "text": "PROFESSOR: [INAUDIBLE]",
    "start": "802660",
    "end": "805134"
  },
  {
    "text": "PROFESSOR: Can I\ndo it from here?",
    "start": "805135",
    "end": "806819"
  },
  {
    "text": "PROFESSOR: Perfect.",
    "start": "806819",
    "end": "807610"
  },
  {
    "start": "807610",
    "end": "812623"
  },
  {
    "text": "BRIAN SWEATT: Now you\ngot to tell [INAUDIBLE].",
    "start": "812624",
    "end": "814540"
  },
  {
    "start": "814540",
    "end": "817505"
  },
  {
    "text": "Oh, no.",
    "start": "817505",
    "end": "818005"
  },
  {
    "text": "Wrong way.",
    "start": "818005",
    "end": "819985"
  },
  {
    "text": "R. J. RYAN: Really?",
    "start": "819985",
    "end": "820975"
  },
  {
    "text": "BRIAN SWEATT: By the way,\nhe's still adjusting it.",
    "start": "820975",
    "end": "823769"
  },
  {
    "text": "R. J. RYAN: Whoops.",
    "start": "823770",
    "end": "824720"
  },
  {
    "text": "BRIAN SWEATT: Uh oh.",
    "start": "824720",
    "end": "825553"
  },
  {
    "start": "825553",
    "end": "829000"
  },
  {
    "text": "Oh, no.",
    "start": "829000",
    "end": "830715"
  },
  {
    "text": "R. J. RYAN: OK.",
    "start": "830715",
    "end": "831340"
  },
  {
    "text": "We've prepared a\nfew demos for you.",
    "start": "831340",
    "end": "834480"
  },
  {
    "text": "And these are really\njust going to show off",
    "start": "834480",
    "end": "837709"
  },
  {
    "text": "the ray tracing part\nof it and the rates",
    "start": "837710",
    "end": "840650"
  },
  {
    "text": "that we got after we\napplied our speed ups.",
    "start": "840650",
    "end": "844430"
  },
  {
    "start": "844430",
    "end": "848160"
  },
  {
    "text": "Thank you.",
    "start": "848160",
    "end": "849959"
  },
  {
    "text": "Here we see both\nthe camera is moving",
    "start": "849960",
    "end": "852850"
  },
  {
    "text": "and we implemented full\nscene functional textures,",
    "start": "852850",
    "end": "857449"
  },
  {
    "text": "so you see the checkerboard.",
    "start": "857450",
    "end": "858900"
  },
  {
    "text": "It's generated every frame.",
    "start": "858900",
    "end": "861890"
  },
  {
    "text": "We used no texture maps.",
    "start": "861890",
    "end": "863500"
  },
  {
    "text": "This is completely\ngenerated functionally.",
    "start": "863500",
    "end": "866600"
  },
  {
    "text": "Bump mapping, as you can see\nin the large orange sphere,",
    "start": "866600",
    "end": "870110"
  },
  {
    "text": "is also done on the\nfly, as well as blending",
    "start": "870110",
    "end": "873470"
  },
  {
    "text": "between two textures using\nPerlin noise is done on the fly",
    "start": "873470",
    "end": "877699"
  },
  {
    "text": "also.",
    "start": "877700",
    "end": "878980"
  },
  {
    "text": "Showcased in the center\nsphere right here,",
    "start": "878980",
    "end": "880970"
  },
  {
    "text": "you can see both\nreflection and refraction.",
    "start": "880970",
    "end": "883720"
  },
  {
    "text": "The sphere is transparent.",
    "start": "883720",
    "end": "885129"
  },
  {
    "text": "It acts as a glass sphere.",
    "start": "885130",
    "end": "886910"
  },
  {
    "text": "So you can see the reflection\nof the orange in it,",
    "start": "886910",
    "end": "893490"
  },
  {
    "text": "but also the warping\nof the checkerboard",
    "start": "893490",
    "end": "895390"
  },
  {
    "text": "as it goes through.",
    "start": "895390",
    "end": "897390"
  },
  {
    "text": "This is one of the\nadvantages of-- well,",
    "start": "897390",
    "end": "899250"
  },
  {
    "text": "spheres are one of the\nadvantages of ray tracing,",
    "start": "899250",
    "end": "902180"
  },
  {
    "text": "because you can use\ngeometrical equations to define",
    "start": "902180",
    "end": "908690"
  },
  {
    "text": "your geometry versus in\nusing rasterization methods,",
    "start": "908690",
    "end": "912080"
  },
  {
    "text": "you have to actually\ndefine the geometry",
    "start": "912080",
    "end": "913990"
  },
  {
    "text": "in some concrete numerical way.",
    "start": "913990",
    "end": "917246"
  },
  {
    "text": "Going to go to the next demo.",
    "start": "917246",
    "end": "919370"
  },
  {
    "text": "This should showcase some of\nthe lights that we implemented.",
    "start": "919370",
    "end": "922000"
  },
  {
    "text": "AUDIENCE: So how many\nframes per second is this?",
    "start": "922000",
    "end": "924900"
  },
  {
    "text": "R. J. RYAN: This should\nbe 15 frames a second.",
    "start": "924900",
    "end": "927400"
  },
  {
    "text": "And let me reiterate.",
    "start": "927400",
    "end": "929860"
  },
  {
    "text": "The refraction step requires\nat least two bounces,",
    "start": "929860",
    "end": "933290"
  },
  {
    "text": "so two steps of recursion.",
    "start": "933290",
    "end": "935839"
  },
  {
    "text": "If we were to turn that\noff, we would be achieving,",
    "start": "935840",
    "end": "942540"
  },
  {
    "text": "I would estimate, 27\nframes a second, 28.",
    "start": "942540",
    "end": "946165"
  },
  {
    "text": "But then it doesn't\nlook as pretty, so,",
    "start": "946165",
    "end": "947790"
  },
  {
    "text": "you know, what's the point.",
    "start": "947790",
    "end": "949220"
  },
  {
    "text": "You can see-- this will\nbe showcased later--",
    "start": "949220",
    "end": "952040"
  },
  {
    "text": "but you can see the spotlight.",
    "start": "952040",
    "end": "954167"
  },
  {
    "text": "It's kind of moving.",
    "start": "954167",
    "end": "955000"
  },
  {
    "text": "It's waving back and\nforth, illuminating",
    "start": "955000",
    "end": "957639"
  },
  {
    "text": "parts of the scene.",
    "start": "957639",
    "end": "958430"
  },
  {
    "text": "There's also a point light\nat some distance around here",
    "start": "958430",
    "end": "961490"
  },
  {
    "text": "that's illuminating everything.",
    "start": "961490",
    "end": "962970"
  },
  {
    "text": "But it's basically the\nsame set of primitives.",
    "start": "962970",
    "end": "966199"
  },
  {
    "text": "If you are closer,\nyou could probably",
    "start": "966199",
    "end": "967740"
  },
  {
    "text": "notice that the checkerboard\nis fully reflective.",
    "start": "967740",
    "end": "971690"
  },
  {
    "text": "This far wall, you can view\nthe entire scene in it.",
    "start": "971690",
    "end": "975292"
  },
  {
    "text": "Going to go to the next demo.",
    "start": "975292",
    "end": "976605"
  },
  {
    "start": "976605",
    "end": "979949"
  },
  {
    "text": "This is with the lights off.",
    "start": "979950",
    "end": "982910"
  },
  {
    "text": "So you can get a better sense of\nwhat the spotlight is actually",
    "start": "982910",
    "end": "985600"
  },
  {
    "text": "doing.",
    "start": "985600",
    "end": "986100"
  },
  {
    "start": "986100",
    "end": "988910"
  },
  {
    "text": "If you notice on\nthis orange sphere,",
    "start": "988910",
    "end": "990769"
  },
  {
    "text": "we implemented two\ndifferent forms of BRDFs.",
    "start": "990770",
    "end": "995190"
  },
  {
    "text": "One was generic foam shading.",
    "start": "995190",
    "end": "996920"
  },
  {
    "text": "And then the other\nwas Cook-Torrance,",
    "start": "996920",
    "end": "998990"
  },
  {
    "text": "which helps\nparticularly with metals",
    "start": "998990",
    "end": "1002165"
  },
  {
    "text": "and other materials like that.",
    "start": "1002165",
    "end": "1005170"
  },
  {
    "text": "It helps have very bright\nspecular highlight.",
    "start": "1005170",
    "end": "1010750"
  },
  {
    "text": "And you'll notice as\nthe camera's panning",
    "start": "1010750",
    "end": "1012740"
  },
  {
    "text": "back and forth, the speed\nups that we get from-- we",
    "start": "1012740",
    "end": "1021360"
  },
  {
    "text": "used little tricks to\nglean speed here and there.",
    "start": "1021360",
    "end": "1024559"
  },
  {
    "text": "Like when it's so dark\nor it's very far away,",
    "start": "1024560",
    "end": "1029150"
  },
  {
    "text": "we stop recursing.",
    "start": "1029150",
    "end": "1030704"
  },
  {
    "text": "BRIAN SWEATT: We're over, so--",
    "start": "1030704",
    "end": "1032156"
  },
  {
    "text": "R. J. RYAN: We are?",
    "start": "1032156",
    "end": "1032640"
  },
  {
    "text": "BRIAN SWEATT: Yeah.",
    "start": "1032640",
    "end": "1033124"
  },
  {
    "text": "So if there's any--",
    "start": "1033124",
    "end": "1034099"
  },
  {
    "text": "R. J. RYAN: Let's see.",
    "start": "1034099",
    "end": "1035280"
  },
  {
    "text": "SCOTT FISHER: Do the\nSPUs from one to six.",
    "start": "1035280",
    "end": "1037650"
  },
  {
    "text": "R. J. RYAN: I can demonstrate--\nwe actually enabled it",
    "start": "1037650",
    "end": "1041050"
  },
  {
    "text": "so that you can turn it on\neither one through six SPEs",
    "start": "1041050",
    "end": "1044347"
  },
  {
    "text": "using command line arguments.",
    "start": "1044347",
    "end": "1045555"
  },
  {
    "start": "1045555",
    "end": "1048130"
  },
  {
    "text": "Let's go back to the first demo.",
    "start": "1048130",
    "end": "1049810"
  },
  {
    "text": "If I say just use one SPE, we\ncan watch it slowly trod along.",
    "start": "1049810",
    "end": "1056330"
  },
  {
    "text": "And if I were\nSHH-ed in, it would",
    "start": "1056330",
    "end": "1058059"
  },
  {
    "text": "be giving me timing information\nso I could tell you exactly.",
    "start": "1058060",
    "end": "1062056"
  },
  {
    "text": "It's really unfortunate\nthat it's not, because it's",
    "start": "1062056",
    "end": "1064180"
  },
  {
    "text": "very linear in its speed up.",
    "start": "1064180",
    "end": "1065790"
  },
  {
    "text": "Right now it says\n500 milliseconds.",
    "start": "1065790",
    "end": "1069690"
  },
  {
    "text": "But if I turn it on two, it\ndrops literally in half to 250.",
    "start": "1069690",
    "end": "1074769"
  },
  {
    "text": "You can get a sense\nof that, that it's",
    "start": "1074770",
    "end": "1077305"
  },
  {
    "text": "moving like tick, tick, tick,\ntick versus tick, tick, tick.",
    "start": "1077305",
    "end": "1082760"
  },
  {
    "text": "And then three, it's\na similar speedup.",
    "start": "1082760",
    "end": "1088420"
  },
  {
    "text": "And then I'll jump to five.",
    "start": "1088420",
    "end": "1091420"
  },
  {
    "text": "It's getting closer.",
    "start": "1091420",
    "end": "1093200"
  },
  {
    "text": "And then when we turn on the\nsixth, this should be about 12,",
    "start": "1093200",
    "end": "1102130"
  },
  {
    "text": "15 frames a second.",
    "start": "1102130",
    "end": "1103560"
  },
  {
    "start": "1103560",
    "end": "1105977"
  },
  {
    "text": "AUDIENCE: So you estimate\nif you had a dozen SPUs,",
    "start": "1105977",
    "end": "1108060"
  },
  {
    "text": "you could go--",
    "start": "1108060",
    "end": "1109024"
  },
  {
    "text": "R. J. RYAN: Actually, it's\nfunny you mentioned that.",
    "start": "1109024",
    "end": "1111190"
  },
  {
    "text": "I think it was the Julia\nre-tracer or the IRT.",
    "start": "1111190",
    "end": "1114164"
  },
  {
    "text": "BRIAN SWEATT: Both of them.",
    "start": "1114165",
    "end": "1115290"
  },
  {
    "text": "R. J. RYAN: Both of them\nuse two cell blades,",
    "start": "1115290",
    "end": "1117485"
  },
  {
    "text": "which is a full eight?",
    "start": "1117485",
    "end": "1119125"
  },
  {
    "text": "MICHAEL D'AMBROSIO: It's\na full eight times--",
    "start": "1119125",
    "end": "1121000"
  },
  {
    "text": "R. J. RYAN: Eight\ncores times two.",
    "start": "1121000",
    "end": "1122416"
  },
  {
    "text": "So they use 16 SPUs.",
    "start": "1122416",
    "end": "1124760"
  },
  {
    "text": "The PlayStation 3 do\nhave certain factors.",
    "start": "1124760",
    "end": "1127517"
  },
  {
    "text": "We're only limited to six.",
    "start": "1127517",
    "end": "1128600"
  },
  {
    "start": "1128600",
    "end": "1133340"
  },
  {
    "text": "AUDIENCE: The way you're\ndividing up the work,",
    "start": "1133340",
    "end": "1135390"
  },
  {
    "text": "each SPU taking every sixth\nraster line, that sounds like--",
    "start": "1135390",
    "end": "1141140"
  },
  {
    "text": "could you improve on the\nperformance by allocating",
    "start": "1141140",
    "end": "1145640"
  },
  {
    "text": "the rays--",
    "start": "1145640",
    "end": "1146980"
  },
  {
    "text": "R. J. RYAN: The issue\nthere is one of granularity",
    "start": "1146980",
    "end": "1149419"
  },
  {
    "text": "of our distribution.",
    "start": "1149420",
    "end": "1151500"
  },
  {
    "text": "And also communication\ntime on the bus.",
    "start": "1151500",
    "end": "1155630"
  },
  {
    "text": "We've designed it such that\nwe can fine tune it in any way",
    "start": "1155630",
    "end": "1158535"
  },
  {
    "text": "we want.",
    "start": "1158535",
    "end": "1159248"
  },
  {
    "text": "AUDIENCE: But it\nseems to me if you",
    "start": "1159248",
    "end": "1160706"
  },
  {
    "text": "had a localized bundle\nof rays on a single SPU,",
    "start": "1160706",
    "end": "1166490"
  },
  {
    "text": "you might be able to\ndo some optimizations,",
    "start": "1166490",
    "end": "1168679"
  },
  {
    "text": "like treat them as fat rays.",
    "start": "1168680",
    "end": "1170810"
  },
  {
    "text": "Nearby rays are likely to\nintersect the same triangles.",
    "start": "1170810",
    "end": "1173177"
  },
  {
    "text": "MICHAEL D'AMBROSIO: Choosing\nthe frosting variety.",
    "start": "1173177",
    "end": "1175260"
  },
  {
    "text": "R. J. RYAN: The\nentire material system",
    "start": "1175260",
    "end": "1177090"
  },
  {
    "text": "works very much like that.",
    "start": "1177090",
    "end": "1178390"
  },
  {
    "text": "It actually saves\non computations",
    "start": "1178390",
    "end": "1180790"
  },
  {
    "text": "based on which rays\nin a packet of four",
    "start": "1180790",
    "end": "1185780"
  },
  {
    "text": "have collided with\nthe same element.",
    "start": "1185780",
    "end": "1188210"
  },
  {
    "text": "And if it does, then it\ntakes full advantage of SIMD",
    "start": "1188210",
    "end": "1191130"
  },
  {
    "text": "to quickly chug through\nthose rays that are the same",
    "start": "1191130",
    "end": "1194933"
  },
  {
    "text": "and then never call that\nparticular shader again,",
    "start": "1194933",
    "end": "1197217"
  },
  {
    "text": "because it's already\ndone the work for them.",
    "start": "1197217",
    "end": "1199050"
  },
  {
    "text": "MICHAEL D'AMBROSIO: Another\nissue, I think, is--",
    "start": "1199050",
    "end": "1201260"
  },
  {
    "text": "PROFESSOR: Sorry, we\nshould try to wrap so we",
    "start": "1201260",
    "end": "1203320"
  },
  {
    "text": "can get through the others.",
    "start": "1203320",
    "end": "1204580"
  },
  {
    "text": "Any more very short questions?",
    "start": "1204580",
    "end": "1207289"
  },
  {
    "text": "Did you guys have any last\nconcluding statements?",
    "start": "1207290",
    "end": "1210760"
  },
  {
    "text": "NATALIA CHERNENKO: Maybe we go\nthrough this like really fast?",
    "start": "1210760",
    "end": "1213560"
  },
  {
    "text": "[INTERPOSING VOICES]",
    "start": "1213560",
    "end": "1215452"
  },
  {
    "text": "BRIAN SWEATT: Point\nis we had two pieces.",
    "start": "1215452",
    "end": "1217160"
  },
  {
    "text": "PROFESSOR: Thank the speaker.",
    "start": "1217160",
    "end": "1218010"
  },
  {
    "text": "R. J. RYAN: Thank you.",
    "start": "1218010",
    "end": "1218926"
  },
  {
    "text": "[APPLAUSE]",
    "start": "1218926",
    "end": "1222560"
  },
  {
    "start": "1222560",
    "end": "1223134"
  }
]