[
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6340"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6340",
    "end": "13320"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu. ",
    "start": "13320",
    "end": "21264"
  },
  {
    "text": "SRINIVAS DEVADAS: All right. Good morning, everyone. And let's get started. Today's lecture is about a\nrandomized data structure",
    "start": "21264",
    "end": "30130"
  },
  {
    "text": "called the skip list. And it's a data structure\nthat, obviously because it's",
    "start": "30130",
    "end": "37390"
  },
  {
    "text": "randomized, we'd have to do\na probabilistic analysis for. And we're going to sort of raise\nthe stakes here a little bit",
    "start": "37390",
    "end": "44740"
  },
  {
    "text": "with respect to\nour expectation-- the pun intended of this\ndata structure-- in the sense",
    "start": "44740",
    "end": "52640"
  },
  {
    "text": "that we're not going to be happy\nwith just doing an expected value analysis or to get\nwhat the expectation is",
    "start": "52640",
    "end": "61290"
  },
  {
    "text": "of the search complexity\nin a skip list. We're going to introduce this\nnotion with high probability,",
    "start": "61290",
    "end": "70030"
  },
  {
    "text": "which is a stronger notion than\njust giving you the expected value or the expectation for\nthe complexity of a search",
    "start": "70030",
    "end": "79020"
  },
  {
    "text": "algorithm. And we're going to prove\nthat under this notion,",
    "start": "79020",
    "end": "84689"
  },
  {
    "text": "that search has a\nparticular complexity with high probability.",
    "start": "84690",
    "end": "90520"
  },
  {
    "text": "So we'll get to the with high\nprobability part a little bit later in the lecture,\nbut we're just",
    "start": "90520",
    "end": "96330"
  },
  {
    "text": "going to start off doing some\ncool data structure design,",
    "start": "96330",
    "end": "101470"
  },
  {
    "text": "I guess, [INAUDIBLE]\npointing to the skip list. The skip list is a relatively\nyoung data structure",
    "start": "101470",
    "end": "108810"
  },
  {
    "text": "invented by a guy called\nBill Pugh in 1989,",
    "start": "108810",
    "end": "114290"
  },
  {
    "text": "so not much older than you guys. ",
    "start": "114290",
    "end": "119470"
  },
  {
    "text": "It's relatively easy to\nimplement as you'll see. I won't really claim\nthat, but hopefully you'll",
    "start": "119470",
    "end": "127479"
  },
  {
    "text": "be convinced by the time you're\ndone describing the structure. Especially in comparison\nto balanced trees.",
    "start": "127480",
    "end": "138004"
  },
  {
    "text": " And we can do a comparison after\nwe do our analysis of the data",
    "start": "138004",
    "end": "144860"
  },
  {
    "text": "structure as to what the\ncomplexity comparisons are",
    "start": "144860",
    "end": "150290"
  },
  {
    "text": "for search and insert\nwhen you take a skip list and compare it to an\nAVL tree, for example,",
    "start": "150290",
    "end": "157310"
  },
  {
    "text": "or a red black tree, et cetera. In general, when we\nhave a data structure,",
    "start": "157310",
    "end": "164240"
  },
  {
    "text": "we want it to be dynamic. The skip list maintains\na dynamic set.",
    "start": "164240",
    "end": "173530"
  },
  {
    "text": "What that means\nis not only do you want to search on\nit-- obviously it's",
    "start": "173530",
    "end": "178810"
  },
  {
    "text": "uninteresting to have a static\ndata structure and do a search. You want to be able to\nchange it, want to be",
    "start": "178810",
    "end": "185750"
  },
  {
    "text": "able to insert values into it. There's a complexity of\ninsert to worry about. You want to be able\nto delete values.",
    "start": "185750",
    "end": "193170"
  },
  {
    "text": "And the richness of\nthe data structure comes from the operations\nand the augmentations you can do on it, and the skip\nlists are no exception to that.",
    "start": "193170",
    "end": "202440"
  },
  {
    "text": "So if you want to maintain\na dynamic set of n elements, and you obviously know a ton\nof data structures to do this,",
    "start": "202440",
    "end": "209319"
  },
  {
    "text": "each of which has\ndifferent characteristics. And this is, if you\nignore hash tables,",
    "start": "209320",
    "end": "217050"
  },
  {
    "text": "this is your first real\nrandomized data structure,",
    "start": "217050",
    "end": "224280"
  },
  {
    "text": "if you're just taking\n6006 and this class might have seen randomized\nstructures in other classes.",
    "start": "224280",
    "end": "231875"
  },
  {
    "text": " So we're going to try and\ndo this in order log n time.",
    "start": "231875",
    "end": "240320"
  },
  {
    "text": "As you know with\nbalanced binary trees, you can do things in order\nlog n time, a ton of things,",
    "start": "240320",
    "end": "247470"
  },
  {
    "text": "pretty much everything\nthat is interesting. And this, given that\nit's randomized,",
    "start": "247470",
    "end": "256010"
  },
  {
    "text": "it's a relatively\neasy analysis to show that the expectation or the\nexpected value of a search",
    "start": "256010",
    "end": "265210"
  },
  {
    "text": "would be order log\nn expected time. But we're going to, as I\nsaid, raise the stakes,",
    "start": "265210",
    "end": "271550"
  },
  {
    "text": "and we're going to\nspend a ton of time the second half of this showing\nthe with high probability",
    "start": "271550",
    "end": "280610"
  },
  {
    "text": "result. And that's\na stronger result than just saying that search\ntakes expected order log n",
    "start": "280610",
    "end": "287790"
  },
  {
    "text": "time. All right, so\nthat's the context. You can think of a\nskip list as beginning",
    "start": "287790",
    "end": "295720"
  },
  {
    "text": "with a simple linked list.",
    "start": "295720",
    "end": "300800"
  },
  {
    "text": "So if we have one link list\nand that link list-- let's",
    "start": "300800",
    "end": "308639"
  },
  {
    "text": "first think of this\nas being unsorted.",
    "start": "308640",
    "end": "316610"
  },
  {
    "text": "So suppose I have a link\nlist which is unsorted and I want to search for a\nparticular value in this link",
    "start": "316610",
    "end": "323650"
  },
  {
    "text": "list. And we can assume that this\nis a doubly-linked list,",
    "start": "323650",
    "end": "329320"
  },
  {
    "text": "so the arrows go both ways. You have a pointer, let's say,\njust to the first element.",
    "start": "329320",
    "end": "338660"
  },
  {
    "text": "So if you have a\nlist that's unsorted and you want to\nsearch for an element,",
    "start": "338660",
    "end": "345030"
  },
  {
    "text": "you would want to do\na membership query. If there's n elements,\nthe complexity is?",
    "start": "345030",
    "end": "350905"
  },
  {
    "text": "AUDIENCE: Order n. SRINIVAS DEVADAS: Order n. So a linked list, the search\ntakes the order n time.",
    "start": "350906",
    "end": "360370"
  },
  {
    "text": "Now let's go ahead and say\nthat we are sorting this list,",
    "start": "360370",
    "end": "365630"
  },
  {
    "text": "so it's a sorted linked list. So your values here,\n14, 23, 34, 42, 50, 59.",
    "start": "365630",
    "end": "377190"
  },
  {
    "text": "They're sorted in\nascending order. You still only have a pointer\nto the front of the list",
    "start": "377190",
    "end": "385040"
  },
  {
    "text": "and it's a\ndoubly-linked list, what is the complexity of search\nin the sorted link list?",
    "start": "385040",
    "end": "394090"
  },
  {
    "text": "AUDIENCE: Log n. SRINIVAS DEVADAS: Log n. Oh, I wanted to hear that.",
    "start": "394090",
    "end": "399200"
  },
  {
    "text": "Because it is? AUDIENCE: Order n. SRINIVAS DEVADAS: It's order n. log n is-- yeah, that\nwas a trick question.",
    "start": "399200",
    "end": "404400"
  },
  {
    "text": " Because I liked that answer,\nthe person who said log n",
    "start": "404400",
    "end": "411910"
  },
  {
    "text": "gets a Frisbee.  This person won't admit. [LAUGHTER]",
    "start": "411910",
    "end": "418270"
  },
  {
    "text": "Oh, it was you. OK, all right. There you go. All right.",
    "start": "418270",
    "end": "423940"
  },
  {
    "text": "So log n would imply that\nyou have random access.",
    "start": "423940",
    "end": "432960"
  },
  {
    "text": "If you have an array that's\nsorted and you can go [? AFi, ?] and you can go\n[? AFi ?] divided by 2,",
    "start": "432960",
    "end": "439660"
  },
  {
    "text": "or [? AF2i ?] and you can\ngo directly to that element, then you can do binary search\nand you can get a log n,",
    "start": "439660",
    "end": "447650"
  },
  {
    "text": "order log in. But here, the sorting\nactually doesn't help you",
    "start": "447650",
    "end": "453210"
  },
  {
    "text": "with respect to the\nsearch simply because you have to start from\nthe beginning,",
    "start": "453210",
    "end": "460890"
  },
  {
    "text": "from the front of the list,\nand you've got to keep walking. The only place that it helps you\nis that if you know it's sorted",
    "start": "460890",
    "end": "467389"
  },
  {
    "text": "and you're looking\nfor 37, you can stop after you see 42, right?",
    "start": "467390",
    "end": "474840"
  },
  {
    "text": "That's pretty much the only\nplace that it helps you. But it's still\norder n because that could happen-- on\naverage is going",
    "start": "474840",
    "end": "480650"
  },
  {
    "text": "to happen halfway through the\nlist for a given membership query. So it's still order n\nfor a sorted link list.",
    "start": "480650",
    "end": "490350"
  },
  {
    "text": "But now let's say that we\nhad two sorted link lists. ",
    "start": "490350",
    "end": "500479"
  },
  {
    "text": "And how are these two\nlink lists structured? Well, they're structured\nin a certain way,",
    "start": "500480",
    "end": "507080"
  },
  {
    "text": "and let me draw our canonical\nexample for skip list",
    "start": "507080",
    "end": "512269"
  },
  {
    "text": "that I'm going to\nkeep coming back to. So I won't erase this, but I'll\ndraw one out-- 1, 2, 3, 4, 5,",
    "start": "512270",
    "end": "519974"
  },
  {
    "text": "6, 7, 8, 9-- 9 elements. ",
    "start": "519974",
    "end": "536060"
  },
  {
    "text": "So that's my first\nlist which is sorted,",
    "start": "536060",
    "end": "541450"
  },
  {
    "text": "and so I have 14, 23, 34,\n42, 50, 59, 66, 72, and 79.",
    "start": "541450",
    "end": "558110"
  },
  {
    "text": "What I'm going to have\nnow is another list sort of on top of this. I can move from top\nto bottom, et cetera.",
    "start": "558110",
    "end": "571660"
  },
  {
    "text": "But I'm not going\nto have elements on top of each bottom element.",
    "start": "571660",
    "end": "578733"
  },
  {
    "text": " By convention, I'm\ngoing to have elements",
    "start": "578733",
    "end": "584650"
  },
  {
    "text": "on top of the first\nelement, regardless of how many lists I have. We only have two at this point.",
    "start": "584650",
    "end": "590839"
  },
  {
    "text": "And so I see a 14, which\nis exactly the same element duplicated up on the top list.",
    "start": "590840",
    "end": "597279"
  },
  {
    "text": "And that list is\nalso sorted, but I won't have all of the\nelements in the top list.",
    "start": "597280",
    "end": "604339"
  },
  {
    "text": "I'm just picking a couple here. So I've got 34, 42--\nthey're adjacent here--",
    "start": "604340",
    "end": "611769"
  },
  {
    "text": "and then I go all\nthe way up to 72, and I duplicate it, et cetera.",
    "start": "611770",
    "end": "618740"
  },
  {
    "text": " Now, this looks kind of random.",
    "start": "618740",
    "end": "624227"
  },
  {
    "text": "Anybody recognize these numbers? ",
    "start": "624227",
    "end": "631460"
  },
  {
    "text": "No one from the great\nCity of New York? No?",
    "start": "631460",
    "end": "636760"
  },
  {
    "text": "Yup, yup. AUDIENCE: On the subway stops? SRINIVAS DEVADAS: Yeah, subway\nstops on the Seventh Avenue Express Line.",
    "start": "636760",
    "end": "642465"
  },
  {
    "start": "642465",
    "end": "649640"
  },
  {
    "text": "So this is exactly the notion\nof a skip list, the fact that you have--\ncould you stand up?",
    "start": "649640",
    "end": "657152"
  },
  {
    "text": " Great.",
    "start": "657152",
    "end": "662970"
  },
  {
    "text": "All right. So the notion here\nis that you don't",
    "start": "662970",
    "end": "669210"
  },
  {
    "text": "have to make a lot of stops if\nyou know you have to go far.",
    "start": "669210",
    "end": "674370"
  },
  {
    "text": "So if you want to go from\n14th Street to 72nd Street,",
    "start": "674370",
    "end": "680339"
  },
  {
    "text": "you just take the express line. But if you want to go to 66th\nStreet, what would you do?",
    "start": "680340",
    "end": "687426"
  },
  {
    "text": "AUDIENCE: Go to 72nd\nand then go back. SRINIVAS DEVADAS:\nWell, that's one way.",
    "start": "687426",
    "end": "693710"
  },
  {
    "text": "That's one way. That's not the way I wanted. The way we're going\nto do this is we're",
    "start": "693710",
    "end": "698780"
  },
  {
    "text": "not going to overshoot. So we want to minimize\ndistance, let's say. So our secondary\nthing is going to be",
    "start": "698780",
    "end": "706240"
  },
  {
    "text": "minimizing distance travel. And so you're going to pop\nup the express line, go",
    "start": "706240",
    "end": "713610"
  },
  {
    "text": "all the way to 42nd\nStreet, and you're going to say if I go to the\nnext stop on the Express Line,",
    "start": "713610",
    "end": "721100"
  },
  {
    "text": "I'm going too far. And so you're going to pop\ndown to the local line. So you can think of this as\nbeing link list L0 and link",
    "start": "721100",
    "end": "729240"
  },
  {
    "text": "list L1. You're going to pop\ndown, and then you're going to go to 66th Street.",
    "start": "729240",
    "end": "735150"
  },
  {
    "text": "So search 66 will be\ngoing from 14 to 42",
    "start": "735150",
    "end": "745520"
  },
  {
    "text": "on L1, and then from 42,\nlet's just say that's walking.",
    "start": "745520",
    "end": "754730"
  },
  {
    "text": "42 to 42, L1 to L0. ",
    "start": "754730",
    "end": "763510"
  },
  {
    "text": "And then 42 to 66 on L0. ",
    "start": "763510",
    "end": "770360"
  },
  {
    "text": "So that's the basic\nnotion of a skip list. So you can see that it's\nreally pretty simple.",
    "start": "770360",
    "end": "777660"
  },
  {
    "text": "What we're going to do\nnow is do two things.",
    "start": "777660",
    "end": "782899"
  },
  {
    "text": "I want to think about this\ndouble-sorted list as a data",
    "start": "782900",
    "end": "788090"
  },
  {
    "text": "structure in its own right\nbefore I dive into skip lists in general.",
    "start": "788090",
    "end": "793920"
  },
  {
    "text": "And I want to analyze at some\nlevel, the best case situation",
    "start": "793920",
    "end": "801990"
  },
  {
    "text": "for worst case complexity. And by that I mean I want to\nstructure the express stops",
    "start": "801990",
    "end": "810970"
  },
  {
    "text": "in the best manner possible. These stops are very\nstructured for passengers because they figured fancy\nstops on 42nd Avenue, whatever--",
    "start": "810970",
    "end": "818980"
  },
  {
    "text": "fancy stores. Everybody wants to go there\nand so on and so forth. So you have 34 pretty close\nto 42 because they're both",
    "start": "818980",
    "end": "826889"
  },
  {
    "text": "popular destinations. But let's say that\nthings where I",
    "start": "826890",
    "end": "833250"
  },
  {
    "text": "guess more egalitarian and\nrandomized, if you will. And what I want to do\nis I want to structure",
    "start": "833250",
    "end": "840310"
  },
  {
    "text": "this double-sorted list so\nI get the best worst case",
    "start": "840310",
    "end": "847029"
  },
  {
    "text": "complexity for search. And so let's do that.",
    "start": "847030",
    "end": "852750"
  },
  {
    "text": "And before I do that, let me\nwrite out the search algorithm,",
    "start": "852750",
    "end": "860019"
  },
  {
    "text": "which is going to be important. I want you to assimilate\nthis, keep it in your head because we're going\nto analyze search",
    "start": "860019",
    "end": "867000"
  },
  {
    "text": "pretty much for the rest\nof the morning here. And so I'll write this down. You've got a sense of what it\nis based on what I just did here",
    "start": "867000",
    "end": "877279"
  },
  {
    "text": "with this example of 66,\nbut worth writing down.",
    "start": "877280",
    "end": "883930"
  },
  {
    "text": "We're going to walk right\nin the top linked list, so this is simply\nfor two linked lists,",
    "start": "883930",
    "end": "890278"
  },
  {
    "text": "and we'll generalize\nat some point. So we want to walk right\nin the top linked list, L1,",
    "start": "890278",
    "end": "900260"
  },
  {
    "text": "until going right\nwould go too far.",
    "start": "900260",
    "end": "906956"
  },
  {
    "text": " Now, there was this answer with\n72, which I kind of dismissed.",
    "start": "906956",
    "end": "915210"
  },
  {
    "text": "But there's no reason\nwhy you can't overshoot one stop and go backwards.",
    "start": "915210",
    "end": "921184"
  },
  {
    "text": "It would just be a\ndifferent search algorithm. It's not something we're\ngoing to analyze here. It turns out in analyzing that\nwith high probability would",
    "start": "921184",
    "end": "929770"
  },
  {
    "text": "be even more painful\nthan the painful analysis we're going to do. So we won't go there.",
    "start": "929770",
    "end": "935355"
  },
  {
    "text": " And then we walk down\nto the bottom list.",
    "start": "935355",
    "end": "945880"
  },
  {
    "start": "945880",
    "end": "952350"
  },
  {
    "text": "And the bottom\nlist we'll call L0. ",
    "start": "952350",
    "end": "957930"
  },
  {
    "text": "And walk right in L0 until\nthe element is found or not.",
    "start": "957930",
    "end": "971960"
  },
  {
    "text": "And you know that\nif you've overshot.  So if you're looking here for\nroute 67, when you get to 72",
    "start": "971960",
    "end": "981129"
  },
  {
    "text": "here-- you've seen\n66 and you get to 72 and you're looking\nfor 67, search fails.",
    "start": "981130",
    "end": "987449"
  },
  {
    "text": "It stops and fails. Doesn't succeed in this case. So that's what we\ngot for search.",
    "start": "987450",
    "end": "994870"
  },
  {
    "text": "And that's our two\nlinked list argument. Now, our analysis essentially\nsays what I have is",
    "start": "994870",
    "end": "1005040"
  },
  {
    "text": "I'm walking right at\nthe bottom list here,",
    "start": "1005040",
    "end": "1013089"
  },
  {
    "text": "and my top list is L1,\nso I start with L1.",
    "start": "1013090",
    "end": "1019530"
  },
  {
    "text": " And my search cost\nis going to be",
    "start": "1019530",
    "end": "1024780"
  },
  {
    "text": "approximately the length of L1.",
    "start": "1024780",
    "end": "1032420"
  },
  {
    "text": "The worst case analysis,\nI could go all the way",
    "start": "1032420",
    "end": "1037470"
  },
  {
    "text": "on the top list-- it's possible. But for a given value, I'm\ngoing to be looking at only",
    "start": "1037470",
    "end": "1050680"
  },
  {
    "text": "a portion of the bottom list. I'm not going to go all the\nway on the bottom list ever.",
    "start": "1050680",
    "end": "1057700"
  },
  {
    "text": "I'm only going to be\nlooking at a portion of it. So it's going to be\nL0 divided by L1,",
    "start": "1057700",
    "end": "1064220"
  },
  {
    "text": "if I have interspersed my\nexpress stops in a uniform way.",
    "start": "1064220",
    "end": "1071179"
  },
  {
    "text": "So there's no reason--\nif I have 100 elements in the bottom list,\nand if I had five,",
    "start": "1071180",
    "end": "1079750"
  },
  {
    "text": "just for argument sake,\nfive in the top list, then I'd put them at, let's\nsay, the 0 position, 20, 40, 60,",
    "start": "1079750",
    "end": "1088060"
  },
  {
    "text": "et cetera. So I want to have\nroughly equal spacings. But we need to make that\na little more concrete,",
    "start": "1088060",
    "end": "1095505"
  },
  {
    "text": "and a little more precise. And what I'm saying\nhere simply is that this is the cost of\ntraversal in the top list,",
    "start": "1095505",
    "end": "1103299"
  },
  {
    "text": "and this is the cost of\ntraversal in the bottom list, because I'm not going to go\nall the way in the bottom list.",
    "start": "1103300",
    "end": "1108480"
  },
  {
    "text": "I'm only going to go a\nportion on the bottom list. Everybody gets that? Yup?",
    "start": "1108480",
    "end": "1114400"
  },
  {
    "text": "All right, good. So if I want to minimize\nthis cost, which is going to tell\nme how to scatter",
    "start": "1114400",
    "end": "1124250"
  },
  {
    "text": "these elements in the top list,\nhow to choose my express stops,",
    "start": "1124250",
    "end": "1130230"
  },
  {
    "text": "if you will-- I want to\nscatter these in a uniform way, then this is minimized\nwhen terms are equal.",
    "start": "1130230",
    "end": "1141908"
  },
  {
    "text": " You could go off and\ndifferentiate and do that.",
    "start": "1141908",
    "end": "1147510"
  },
  {
    "text": "It's fairly standard. And what you end up getting\nis you want to get L1 square",
    "start": "1147510",
    "end": "1156950"
  },
  {
    "text": "equals L0 equals n. So all of the elements are\ndown at the bottom list,",
    "start": "1156950",
    "end": "1163460"
  },
  {
    "text": "and so the cardinality\nof the bottom list is n. And roughly speaking, you're\ngoing to end up optimizing,",
    "start": "1163460",
    "end": "1174980"
  },
  {
    "text": "if you have this satisfied,\nwhich means that L1 is going to be square root of n.",
    "start": "1174980",
    "end": "1182010"
  },
  {
    "text": "OK? So what you've done here is\nyou've said a bunch of things, actually.",
    "start": "1182010",
    "end": "1188030"
  },
  {
    "text": "You've decided how\nmany elements are going to be in your top list.",
    "start": "1188030",
    "end": "1193580"
  },
  {
    "text": "If there's n elements\nin the bottom list, you want to have the square root\nof n elements in the top list.",
    "start": "1193580",
    "end": "1199580"
  },
  {
    "text": "And not only that,\nin order to make sure that this works properly, and\nthat you don't get a worse case",
    "start": "1199580",
    "end": "1207910"
  },
  {
    "text": "cost that is not\noptimal, you do have to intersperse the\nsquare root of n elements",
    "start": "1207910",
    "end": "1215340"
  },
  {
    "text": "at regular intervals in\nrelation to the bottom list on the top list.",
    "start": "1215340",
    "end": "1221020"
  },
  {
    "text": "OK, so pictorially\nwhat this means is it's not what you have here.",
    "start": "1221020",
    "end": "1226730"
  },
  {
    "text": "What you really\nwant is something that, let's say, looks like\nthis where this part here",
    "start": "1226730",
    "end": "1240920"
  },
  {
    "text": "is square root of n elements\nup until that point, and then let's say we\ngo from here to here",
    "start": "1240920",
    "end": "1250190"
  },
  {
    "text": "or square root of n\nelements, and maybe I'll have a 66 here because\nthat's exactly where I",
    "start": "1250190",
    "end": "1257610"
  },
  {
    "text": "want my square root of n. Basically, three\nelements in between. So I got 66 here, et cetera.",
    "start": "1257610",
    "end": "1266870"
  },
  {
    "text": "I mean I chose n to be\na particular value here, but you get the picture.",
    "start": "1266870",
    "end": "1272230"
  },
  {
    "text": "So the search now, as you can\nsee if you just add those up you get square root\nof n here, and you",
    "start": "1272230",
    "end": "1277240"
  },
  {
    "text": "got n divided by\nsquare root of n here. So that's square\nroot of n as well. So the search cost is\norder square root of n.",
    "start": "1277240",
    "end": "1289530"
  },
  {
    "text": "And so that's it. That's the first\ngeneralization, and really",
    "start": "1289530",
    "end": "1296660"
  },
  {
    "text": "the most important\none, that comes from going from a\nsingle sorted list",
    "start": "1296660",
    "end": "1302580"
  },
  {
    "text": "to an approximation\nof a skip list. So what do you do if you\nwant to make things better?",
    "start": "1302580",
    "end": "1311420"
  },
  {
    "text": "So we want to make\nthings better? Are we happy with\nsquare root of n? AUDIENCE: No. SRINIVAS DEVADAS: No. Well, what's our target?",
    "start": "1311420",
    "end": "1316966"
  },
  {
    "text": "AUDIENCE: Log n. SRINIVAS DEVADAS:\nLog n, obviously. Well, I guess you can\nargue that our target may be order 1 at some point,\nbut for today's lecture",
    "start": "1316966",
    "end": "1323880"
  },
  {
    "text": "it is order log n\nwith high probability. We'll leave it at that. And so what do you do if\nyou want to go this way",
    "start": "1323880",
    "end": "1334940"
  },
  {
    "text": "and generalize? You simply add more lists. I mean it seems to be pretty\nmuch the only thing we",
    "start": "1334940",
    "end": "1340650"
  },
  {
    "text": "could do here. So let's go ahead\nand add a third list.",
    "start": "1340650",
    "end": "1345900"
  },
  {
    "text": "So if you have two\nsorted lists, that",
    "start": "1345900",
    "end": "1352710"
  },
  {
    "text": "implies I have 2\nsquare root of n. If I want to be explicit\nabout the constant in terms of the search cost,\nassuming things",
    "start": "1352710",
    "end": "1360050"
  },
  {
    "text": "are interspersed exactly right. Keep that in mind because\nthat is going to go away",
    "start": "1360050",
    "end": "1365560"
  },
  {
    "text": "when we go and randomize. We're going to be flipping\ncoins and things like that. But so far, things\nare very structured.",
    "start": "1365560",
    "end": "1373880"
  },
  {
    "text": "What do you think-- we won't\ndo this analysis-- the cost is",
    "start": "1373880",
    "end": "1379690"
  },
  {
    "text": "going to be if I\nintersperse optimally, what is the cost going\nto be for a search",
    "start": "1379690",
    "end": "1388830"
  },
  {
    "text": "when I have three sorted lists? AUDIENCE: Cube root. SRINIVAS DEVADAS: Cube root.",
    "start": "1388830",
    "end": "1394790"
  },
  {
    "text": "Great guess. Who said cube root? AUDIENCE: [INAUDIBLE]. SRINIVAS DEVADAS: You\nalready have a Frisbee.",
    "start": "1394790",
    "end": "1399834"
  },
  {
    "text": "Give it to a friend. I need to get rid of these.  So it's going to be cube\nroot, and the constant",
    "start": "1399834",
    "end": "1409730"
  },
  {
    "text": "in front of that is going to be? AUDIENCE: 3. SRINIVAS DEVADAS: 3. So you have-- right?",
    "start": "1409730",
    "end": "1416380"
  },
  {
    "text": "So let's just keep going. You have k sorted lists. You're going to have k\ntimes the k-th root of n.",
    "start": "1416380",
    "end": "1423549"
  },
  {
    "text": " That's what you got.",
    "start": "1423550",
    "end": "1429309"
  },
  {
    "text": "And I'm not going to\nbother drawing this, but essentially\nwhat happens is you are making the same number\nof moves which corresponds",
    "start": "1429310",
    "end": "1437110"
  },
  {
    "text": "to the root of n, the\ncorresponding root of n, at every level.",
    "start": "1437110",
    "end": "1444420"
  },
  {
    "text": "And the last thing we have to do\nto get a sense for what happens",
    "start": "1444420",
    "end": "1452600"
  },
  {
    "text": "here is we have log n sorted\nlists, so the number of levels",
    "start": "1452600",
    "end": "1457630"
  },
  {
    "text": "here is log n. So this is starting to look kind\nof familiar because it borrows",
    "start": "1457630",
    "end": "1464840"
  },
  {
    "text": "from other data structures. And what this is I'm just going\nto substitute log n for k,",
    "start": "1464840",
    "end": "1471390"
  },
  {
    "text": "and I got this kind\nof scary looking-- I was scared the\nfirst time I saw this.",
    "start": "1471390",
    "end": "1478037"
  },
  {
    "text": " Oh, this is n. ",
    "start": "1478037",
    "end": "1485050"
  },
  {
    "text": "It's the log n-th root of n, OK? And so it's kind\nof scary looking.",
    "start": "1485050",
    "end": "1490910"
  },
  {
    "text": "But what is the log n-th\nroot of n-- and we can assume that n is a power of two?",
    "start": "1490910",
    "end": "1496101"
  },
  {
    "text": "AUDIENCE: 2. SRINIVAS DEVADAS: 2, exactly. It's not that scary\nlooking, and that's because I'm not a mathematician.",
    "start": "1496102",
    "end": "1501630"
  },
  {
    "text": "That's why I was scared. So 2 log n.",
    "start": "1501630",
    "end": "1506929"
  },
  {
    "text": "All right. So that's it. So you get a sense of how\nthis works now, right?",
    "start": "1506930",
    "end": "1514170"
  },
  {
    "text": "We haven't talked about\nrandomized structures yet, but I've given you\nthe template that's associated with the skip list,\nwhich essentially says what I'm",
    "start": "1514170",
    "end": "1522990"
  },
  {
    "text": "going to have are-- if it was\nstatic data items and n was",
    "start": "1522990",
    "end": "1529990"
  },
  {
    "text": "a power of two, then\nessentially what I'm saying is I'm going to\nhave a bunch of items, n items,",
    "start": "1529990",
    "end": "1537230"
  },
  {
    "text": "at the bottom. I'm going to have n over\n2 items at the list that's just immediately above.",
    "start": "1537230",
    "end": "1544279"
  },
  {
    "text": "And each of them are\ngoing to be alternating. You're going to have\nan item in between. And then on the top I'm\ngoing to see n over 4 items,",
    "start": "1544280",
    "end": "1552210"
  },
  {
    "text": "and so on and so forth. What does that look like? Kind of looks like\na tree, right?",
    "start": "1552210",
    "end": "1557710"
  },
  {
    "text": "I mean it doesn't\nhave the structure of a tree in the sense\nof the edges of a tree. It's quite different\nbecause you're",
    "start": "1557710",
    "end": "1563530"
  },
  {
    "text": "connecting things differently. You have all the\nleaves connected down at the bottom of\nthis so-called tree",
    "start": "1563530",
    "end": "1570169"
  },
  {
    "text": "with this doubly linked\nlist, but it has the triangle structure of a tree. And that's where the\nlog n comes from.",
    "start": "1570170",
    "end": "1577490"
  },
  {
    "text": "So this is would\nall be wonderful if this were a static set. And n doesn't have to be a\npower of 2-- you could pad it,",
    "start": "1577490",
    "end": "1585909"
  },
  {
    "text": "and so on and so forth. But the big thing here\nis that we haven't quite accomplished what\nwe set out to do,",
    "start": "1585910",
    "end": "1592900"
  },
  {
    "text": "even though we seem to have\nthis log n cost for search. But it's all based on a static\nset which doesn't change.",
    "start": "1592900",
    "end": "1601840"
  },
  {
    "text": "And the problem, of course, is\nthat you could have deletions. You want to take away 42.",
    "start": "1601840",
    "end": "1607480"
  },
  {
    "text": "For some reason you\ncan't go to 42nd Avenue, or I guess art-- you\ncan't go to [INAUDIBLE]",
    "start": "1607480",
    "end": "1613090"
  },
  {
    "text": "would be a better example. So stuff breaks, right?",
    "start": "1613090",
    "end": "1618300"
  },
  {
    "text": "And so you take stuff out\nand you insert things in. Suppose I wanted to insert\n60, 61, 62, 63, and 64",
    "start": "1618300",
    "end": "1626650"
  },
  {
    "text": "into that list that I have? What would happen? Yeah, you're shaking your head. I mean that log n would go\naway, so it would be a problem.",
    "start": "1626650",
    "end": "1637490"
  },
  {
    "text": "But what we have\nto do now is move to the probabilistic domain. We have to think\nabout what happens",
    "start": "1637490",
    "end": "1643990"
  },
  {
    "text": "when we insert elements. We need an algorithm for insert. So then we can start with the\nnull list and build it up.",
    "start": "1643990",
    "end": "1650510"
  },
  {
    "text": "And then you start\nwith a null list and you have a randomized\nalgorithm for insert, it ain't going to\nlook that pretty.",
    "start": "1650510",
    "end": "1657490"
  },
  {
    "text": "It's going to look random. But you have to have a\ncertain amount of structure so you can still get\nyour order log n.",
    "start": "1657490",
    "end": "1665190"
  },
  {
    "text": "So you have to do the\ninsertion appropriately. So that's what we\nhave to do next.",
    "start": "1665190",
    "end": "1670325"
  },
  {
    "text": "But any questions\nabout that complexity that I have up there? ",
    "start": "1670325",
    "end": "1675460"
  },
  {
    "text": "All right, good. ",
    "start": "1675460",
    "end": "1683280"
  },
  {
    "text": "I want a canonical\nexample of a list here,",
    "start": "1683280",
    "end": "1688460"
  },
  {
    "text": "and I kind of ran out\nof room over there, so bear with me as I draw you\na more sophisticated skip list",
    "start": "1688460",
    "end": "1703220"
  },
  {
    "text": "that has a few more levels. And the reason for this is\nit's only interesting when",
    "start": "1703220",
    "end": "1710090"
  },
  {
    "text": "you have three or more levels. The search algorithm\nis kind of the same.",
    "start": "1710090",
    "end": "1715330"
  },
  {
    "text": "You go up top and when\nyou overshoot you pop down one level, and then you do\nthe same thing over and over.",
    "start": "1715330",
    "end": "1723669"
  },
  {
    "text": "But we are going\nto have to bound the number of levels in the skip\nlist in a probabilistic way.",
    "start": "1723670",
    "end": "1732740"
  },
  {
    "text": "We have to actually discover\nthe expected number of levels because we're going to be doing\ninserts in a randomized way.",
    "start": "1732740",
    "end": "1741540"
  },
  {
    "text": "And so it's worthwhile\nhaving a picture that's a little more interesting than\nthe picture of the two linked",
    "start": "1741540",
    "end": "1747750"
  },
  {
    "text": "lists that I had up there. So I'm going to leave this on\nfor the rest of the lecture.",
    "start": "1747750",
    "end": "1754685"
  },
  {
    "start": "1754685",
    "end": "1763000"
  },
  {
    "text": "So that's our bottom,\nand that hasn't changed from our previous examples. I'm not going to bother drawing\nthe horizontal connections.",
    "start": "1763000",
    "end": "1774450"
  },
  {
    "text": "When you see things adjacent\nhorizontally at the same level, assume that they're all\nconnected-- all of them.",
    "start": "1774450",
    "end": "1783896"
  },
  {
    "text": " And so I have four levels here.",
    "start": "1783896",
    "end": "1792440"
  },
  {
    "text": "And you can think of this\nas being the entire list or part of it.",
    "start": "1792440",
    "end": "1798310"
  },
  {
    "text": "Just to delineate\nthings nicely, we'll assume that 79, which\nis the last element,",
    "start": "1798310",
    "end": "1807940"
  },
  {
    "text": "is all the way up\nat the top as well. Sort of the terminus,\ntermini, corresponding",
    "start": "1807940",
    "end": "1815300"
  },
  {
    "text": "to our analogy of subways.",
    "start": "1815300",
    "end": "1821980"
  },
  {
    "text": "And so that's our\ntop-most level. And then I might have\n50 here at this level,",
    "start": "1821980",
    "end": "1835470"
  },
  {
    "text": "or so that looks like. I will have 50, so\nthe invariant here, and that's another reason\nI want to draw this out,",
    "start": "1835470",
    "end": "1841950"
  },
  {
    "text": "is that if you have a station\nat highest level, then",
    "start": "1841950",
    "end": "1848679"
  },
  {
    "text": "you will have-- it's got\nto be sitting on something.",
    "start": "1848680",
    "end": "1854000"
  },
  {
    "text": "So if you've got a 79 at\nlevel four, or level three here if this is L0, then you\nwill see 79 at L2, L1, and L0.",
    "start": "1854000",
    "end": "1866200"
  },
  {
    "text": "And if you see 50 here,\nit's not in L3 so that's OK, but it's in L2, so it's\ngot to be at L1 as well.",
    "start": "1866200",
    "end": "1873420"
  },
  {
    "text": "Of course you know that\neverything is down at L1, so this is interesting from a\nstandpoint of the relationship",
    "start": "1873420",
    "end": "1878800"
  },
  {
    "text": "between Li and Li plus 1 where\ni is greater than or equal to 1.",
    "start": "1878800",
    "end": "1885220"
  },
  {
    "text": "So the implication is that if\nyou see it at at Li plus 1,",
    "start": "1885220",
    "end": "1893440"
  },
  {
    "text": "it's going to be at\nLi and Li minus 1 if that happens to\nexist, et cetera.",
    "start": "1893440",
    "end": "1899940"
  },
  {
    "text": "And so one last thing\nhere just to finish it up. I got 34 here, which is\nan additional thing which",
    "start": "1899940",
    "end": "1908490"
  },
  {
    "text": "ends there. So the highest level is\nthis second level or L1.",
    "start": "1908490",
    "end": "1914060"
  },
  {
    "text": "This is 66. And then that's it. So that's our skip list.",
    "start": "1914060",
    "end": "1921910"
  },
  {
    "text": "So if you wanted to search\nfor 72, you would start here, and then you'd go to 79,\nor you'd look and say,",
    "start": "1921910",
    "end": "1929460"
  },
  {
    "text": "oh, 79 is too far, so I'm\ngoing to pop down a level. And then you'd say 50, oh, good.",
    "start": "1929460",
    "end": "1935320"
  },
  {
    "text": "I can get to 50. 79 is too far, so I'm\ngoing to pop down a level. And then you go to 66--\n79 is too far-- and at 66,",
    "start": "1935320",
    "end": "1943820"
  },
  {
    "text": "you pop down a level and\nthen you go 66 to 72.",
    "start": "1943820",
    "end": "1949220"
  },
  {
    "text": "So same as what we had before. Hopefully it's not\ntoo complicated.",
    "start": "1949220",
    "end": "1954309"
  },
  {
    "text": "So that's our skip list. It's still looking\npretty structured,",
    "start": "1954310",
    "end": "1960710"
  },
  {
    "text": "looking pretty regular. But if I start\ntaking that and start inserting things\nand deleting things,",
    "start": "1960710",
    "end": "1966590"
  },
  {
    "text": "it could become quite irregular. I could take away\n23, for example. And there's nothing\nthat's stopping me",
    "start": "1966590",
    "end": "1972123"
  },
  {
    "text": "from taking away 34 or 79. You've got to delete\nan element, you've got to delete an element.",
    "start": "1972123",
    "end": "1977574"
  },
  {
    "text": "I mean the fact that\nit's in four levels shouldn't make a difference. And so that's something\nto keep in mind.",
    "start": "1977574",
    "end": "1983680"
  },
  {
    "text": "So this could get pretty messy. So let's talk about\ninsert, and I've",
    "start": "1983680",
    "end": "1988830"
  },
  {
    "text": "spent a bunch of time skirting\naround the issue of what exactly happens when\nyou insert an element.",
    "start": "1988830",
    "end": "1995909"
  },
  {
    "text": "Turns out delete is pretty easy. Insert is more interesting. Let's do insert.",
    "start": "1995910",
    "end": "2001090"
  },
  {
    "start": "2001090",
    "end": "2023539"
  },
  {
    "text": "To insert an element\nx into a skip list, the first thing\nwe're going to do is search to figure out where\nx fits into the bottom list.",
    "start": "2023540",
    "end": "2039530"
  },
  {
    "text": "So you do a search just like\nyou would if you were just doing a search.",
    "start": "2039530",
    "end": "2046990"
  },
  {
    "text": "You always insert into\nthe appropriate position. So if there's a\nsingle sorted list,",
    "start": "2046990",
    "end": "2052040"
  },
  {
    "text": "that would pretty much be it.  And so that part is easy.",
    "start": "2052040",
    "end": "2058809"
  },
  {
    "text": "If you want to insert 67, you\ndo all of the search operations",
    "start": "2058810",
    "end": "2064530"
  },
  {
    "text": "that I just went\nover, and then you insert 67 between 66 and 72.",
    "start": "2064530",
    "end": "2070638"
  },
  {
    "text": "So do your pointer\nmanipulations, what have you, and you're good. But you're not done yet, because\nyou want this to be a skip list",
    "start": "2070639",
    "end": "2078250"
  },
  {
    "text": "and you want this to\nhave expected search over any random query as\nthe list grows and shrinks",
    "start": "2078250",
    "end": "2087199"
  },
  {
    "text": "of order log n, expectation,\nand also with high probability. So what you're going to have to\ndo is when you start inserting,",
    "start": "2087199",
    "end": "2094560"
  },
  {
    "text": "you're going to have\nto decide if you're going to what is called\npromote these elements or not.",
    "start": "2094560",
    "end": "2101740"
  },
  {
    "text": "And the notion of a\npromotion is that you are going up and duplicating\nthis inserted element",
    "start": "2101740",
    "end": "2109500"
  },
  {
    "text": "some number of levels up. So if you just look\nat how this works,",
    "start": "2109500",
    "end": "2116520"
  },
  {
    "text": "it's really pretty\nstraightforward. What is going to happen is\nsimply that let's say I have 67",
    "start": "2116520",
    "end": "2122070"
  },
  {
    "text": "and I'm going to insert\nit between 66 and 72. That much is a given. That is deterministic.",
    "start": "2122070",
    "end": "2128020"
  },
  {
    "text": "Then I'm going to flip a\ncoin or spin a Frisbee.",
    "start": "2128020",
    "end": "2133550"
  },
  {
    "text": "I like this better. I'm not sure if this\nis biased or not. It's probably seriously biased.",
    "start": "2133550",
    "end": "2140230"
  },
  {
    "text": "[LAUGHTER] Would it ever go the\nother way is the question.",
    "start": "2140230",
    "end": "2147650"
  },
  {
    "text": "Would it ever? No. All right. So we've got a problem here. I think we might have to\ndo something like that.",
    "start": "2147650",
    "end": "2153920"
  },
  {
    "text": "[LAUGHTER] I'm procrastinating. I don't want to teach the\nrest of this material.",
    "start": "2153920",
    "end": "2160280"
  },
  {
    "text": "[LAUGHTER]",
    "start": "2160280",
    "end": "2165630"
  },
  {
    "text": "All right. Let's go, let's go. So I'd like to insert\ninto some of the lists,",
    "start": "2165630",
    "end": "2183640"
  },
  {
    "text": "and the big question\nis which ones? ",
    "start": "2183640",
    "end": "2190059"
  },
  {
    "text": "It's going to be really cool. I'm just going to flip\ncoins, fair coins,",
    "start": "2190060",
    "end": "2196560"
  },
  {
    "text": "and decide how much to\npromote these elements.",
    "start": "2196560",
    "end": "2202855"
  },
  {
    "start": "2202855",
    "end": "2211940"
  },
  {
    "text": "So flip fair coin.",
    "start": "2211940",
    "end": "2217790"
  },
  {
    "text": "If heads, promote x to the\nnext level up, and repeat.",
    "start": "2217790",
    "end": "2233000"
  },
  {
    "start": "2233000",
    "end": "2241100"
  },
  {
    "text": "Else, if you ever get\na tails, you stop.",
    "start": "2241100",
    "end": "2246400"
  },
  {
    "text": "And this next level up\nmay be newly created. ",
    "start": "2246400",
    "end": "2255370"
  },
  {
    "text": "So what might happen with the\n67 is that you stick it in here,",
    "start": "2255370",
    "end": "2261530"
  },
  {
    "text": "and it might happen that\nthe first time you flip you get a tails, in which\ncase, 67 is going",
    "start": "2261530",
    "end": "2267520"
  },
  {
    "text": "to just be at the bottom list. But if you get one heads,\nthen you're not only going to put 67 in\nhere, you're going",
    "start": "2267520",
    "end": "2274020"
  },
  {
    "text": "to put 67 up here as well. And you're going to flip again.",
    "start": "2274020",
    "end": "2279160"
  },
  {
    "text": "And if you get a heads again,\nyou're going to put 67 up here.",
    "start": "2279160",
    "end": "2284890"
  },
  {
    "text": "And if you get a heads again,\nyou're going to put 67 up here.",
    "start": "2284890",
    "end": "2290039"
  },
  {
    "text": "And if you get a\nheads again, you're going to create a\nnew list up there, and at this point when\nyou create the new list,",
    "start": "2290040",
    "end": "2297265"
  },
  {
    "text": "it's only going\nto be 67 up there. And that's going to be\nthe front of your list,",
    "start": "2297265",
    "end": "2304329"
  },
  {
    "text": "because that's the one element\nthat you're duplicating. So you're going to keep\ngoing until you get a tails.",
    "start": "2304330",
    "end": "2310660"
  },
  {
    "text": "Now, that's why this\ncoin had better be fair. So you're going to\nkeep going and you're",
    "start": "2310660",
    "end": "2316309"
  },
  {
    "text": "going to keep adding. Every time you insert\nthere's a potential for increasing the number\nof levels in this list.",
    "start": "2316310",
    "end": "2324700"
  },
  {
    "text": "Now, the number\nof levels is going to be bounded in expectation\nwith a high probability",
    "start": "2324700",
    "end": "2332270"
  },
  {
    "text": "of regular\nexpectation, but I want to make it clear that\nevery time you insert,",
    "start": "2332270",
    "end": "2337820"
  },
  {
    "text": "if you get a chain\nof heads, you're going to be adding levels. And so the first time you\nget a tails, you just stop.",
    "start": "2337820",
    "end": "2346549"
  },
  {
    "text": "You just stop. So you can see that this can\nget pretty messy pretty quick.",
    "start": "2346550",
    "end": "2351730"
  },
  {
    "text": "And especially if you were\nstarting from ground zero and adding 14, 23--\nall of those things, the bottom is going\nto look exactly",
    "start": "2351730",
    "end": "2358120"
  },
  {
    "text": "like it looks now because\nyou're going to put it in there. It's deterministic. But the very next level after\nthat looked pretty messy.",
    "start": "2358120",
    "end": "2364740"
  },
  {
    "text": "You could have all of\nthem chunked up here, and a big gap, et\ncetera, et cetera. So it's all about\nrandomized search cost.",
    "start": "2364740",
    "end": "2373600"
  },
  {
    "text": "The worse case cost here\nis going to be order n. Worst case cost is\ngoing to be order n,",
    "start": "2373600",
    "end": "2380030"
  },
  {
    "text": "because you have no idea\nwhere these things are going to end up. But the randomized cost\nis what's cool about this.",
    "start": "2380030",
    "end": "2387020"
  },
  {
    "text": "Any questions about\ninsert or anything I said? Yeah, go ahead. AUDIENCE: Is worse\ncase really order n?",
    "start": "2387020",
    "end": "2393512"
  },
  {
    "text": "What if you had a really\nlong, like a lot of lists on top of each other, and\nyou start at the top of that and you had to walk all\nthe way [INAUDIBLE]?",
    "start": "2393512",
    "end": "2401530"
  },
  {
    "text": "SRINIVAS DEVADAS: Well, you go\nn down and n this way, right? You would be checking\nso it would be order n.",
    "start": "2401530",
    "end": "2408589"
  },
  {
    "text": "AUDIENCE: So it's\n[? bounded ?] by n? SRINIVAS DEVADAS:\nYeah, the worst case. AUDIENCE: Worse\ncase is infinity.",
    "start": "2408589",
    "end": "2413790"
  },
  {
    "text": "SRINIVAS DEVADAS:\nWorse case is infinity. Oh, in that sense, yeah. OK. Well, n elements, Eric is right.",
    "start": "2413790",
    "end": "2419769"
  },
  {
    "text": "So what is happening\nhere is that you have a small probability\nthat you will keep flipping heads forever.",
    "start": "2419769",
    "end": "2427839"
  },
  {
    "text": "So at some level, if you\nsomehow take that away and use Frisbees instead\nor you truncate it.",
    "start": "2427840",
    "end": "2434750"
  },
  {
    "text": "Let's say at some point you\nended up saying that you only have n levels total. ",
    "start": "2434750",
    "end": "2442310"
  },
  {
    "text": "So it's not a-- I\nshould have gone there. The question has to\nbe posed a little more",
    "start": "2442310",
    "end": "2449369"
  },
  {
    "text": "precisely for the\nanswer to be order n. You have to have some more\nlimitations to avoid the case",
    "start": "2449370",
    "end": "2455420"
  },
  {
    "text": "that Eric just mentioned, which\nis in the randomized situation you will have the\npossibility of getting",
    "start": "2455420",
    "end": "2463070"
  },
  {
    "text": "an infinite number of heads. Yeah, question back there. AUDIENCE: [INAUDIBLE]. ",
    "start": "2463070",
    "end": "2470109"
  },
  {
    "text": "SRINIVAS DEVADAS: Yes, you\ncan certainly do capping and you can do a\nbunch of other things.",
    "start": "2470110",
    "end": "2477100"
  },
  {
    "text": "It ends up becoming\nsomething which is not as clean as what you have here.",
    "start": "2477100",
    "end": "2482320"
  },
  {
    "text": "The analysis is messy. And it's sort of in between\na randomized data structure,",
    "start": "2482320",
    "end": "2488792"
  },
  {
    "text": "a purely randomized\ndata structure, and a deterministic one. ",
    "start": "2488792",
    "end": "2494510"
  },
  {
    "text": "I think the important\nthing to bring out here is the worst case is much\nworse than order log n, OK?",
    "start": "2494510",
    "end": "2503570"
  },
  {
    "text": "Cool. Good. Thanks for those questions. And so what we have here now is\nan insert algorithm that could",
    "start": "2503571",
    "end": "2512720"
  },
  {
    "text": "make things look pretty messy. I'm going to leave the insert\nup here, and that, of course,",
    "start": "2512720",
    "end": "2520309"
  },
  {
    "text": "is part of that. Now, for the rest\nof the lecture we're going to talk about why\nskip lists are good.",
    "start": "2520310",
    "end": "2528809"
  },
  {
    "text": "And we're going to justify\nthis randomized data structure and show lots of nice\nresults with respect",
    "start": "2528810",
    "end": "2536790"
  },
  {
    "text": "to the expectation on the\nnumber of levels, expectation on the number of\nmoves in a search,",
    "start": "2536790",
    "end": "2542390"
  },
  {
    "text": "regardless of what items\nyou're inserting and deleting. One last thing.",
    "start": "2542390",
    "end": "2547700"
  },
  {
    "text": "To delete an item,\nyou just delete it. You find it, search, and\ndelete at all levels.",
    "start": "2547700",
    "end": "2560257"
  },
  {
    "text": " So you can't leave it\nin any of the levels. So you find it, and you have\nto have the pointers set up",
    "start": "2560258",
    "end": "2567799"
  },
  {
    "text": "properly-- move the\nprevious pointer over to the next one, et\ncetera, et cetera.",
    "start": "2567800",
    "end": "2574550"
  },
  {
    "text": "We won't get into\nthat here, but you have to do the delete\nat every level.",
    "start": "2574550",
    "end": "2581150"
  },
  {
    "text": "Yeah, question. AUDIENCE: So what happens\nif you inserted 10s and you flip off a tail?",
    "start": "2581150",
    "end": "2586380"
  },
  {
    "text": "So that's like your\nfirst element is not going to go up all the way,\nand then have you do search.",
    "start": "2586380",
    "end": "2592772"
  },
  {
    "text": "SRINIVAS DEVADAS:\nSo typically what happens is you need to\nhave a minus infinity here.",
    "start": "2592772",
    "end": "2598520"
  },
  {
    "text": "And that's a good point. It's a corner case. You have to have a\nminus infinity that goes up all the way.",
    "start": "2598520",
    "end": "2603990"
  },
  {
    "text": "Good question. So the question was what happens\nif I had something less than 14 and I inserted it?",
    "start": "2603990",
    "end": "2609780"
  },
  {
    "text": "Well, that doesn't\nhappen because nothing is less than minus infinity,\nand that goes up all the way.",
    "start": "2609780",
    "end": "2615040"
  },
  {
    "text": "But thanks for bringing it up. And so we're going to do\na little warm-up Lemma.",
    "start": "2615040",
    "end": "2623790"
  },
  {
    "text": "I don't know if\nyou've ever heard these two terms in juxtaposition\nlike this-- warm up and Lemma.",
    "start": "2623790",
    "end": "2631520"
  },
  {
    "text": "But here you go, your\nfirst warm-up Lemma. I guess you'd never\nhave a warm-up theorem.",
    "start": "2631520",
    "end": "2637330"
  },
  {
    "text": "It's a warm-up Lemma for\nthis theorem, which is going to take a while to prove.",
    "start": "2637330",
    "end": "2644060"
  },
  {
    "text": "This comes down to trying to\nget a sense of how many levels",
    "start": "2644060",
    "end": "2649470"
  },
  {
    "text": "you're going to have from\na probabilistic standpoint. The number of levels in\nan n element skip list",
    "start": "2649470",
    "end": "2662290"
  },
  {
    "text": "is order log n. And I'm going to now define\nthe term with high probability.",
    "start": "2662290",
    "end": "2669740"
  },
  {
    "text": "So what does this mean exactly? Well, what this\nmeans is order log n",
    "start": "2669740",
    "end": "2675330"
  },
  {
    "text": "is something like c\nlog n plus a constant. Let's ignore the constant\nand let's stick with c log n.",
    "start": "2675330",
    "end": "2683460"
  },
  {
    "text": "And with high probability\nis a probability",
    "start": "2683460",
    "end": "2688640"
  },
  {
    "text": "that is really a\nfunction of n and alpha.",
    "start": "2688640",
    "end": "2696789"
  },
  {
    "text": "And you have this inverse\npolynomial relationship",
    "start": "2696790",
    "end": "2702710"
  },
  {
    "text": "in the sense that\nobviously as n grows here, an alpha-- we'll assume that\nalpha is greater than the 1--",
    "start": "2702710",
    "end": "2713300"
  },
  {
    "text": "you are going to get a\ndecrease in this quantity.",
    "start": "2713300",
    "end": "2719480"
  },
  {
    "text": "So this is going to get closer\nand closer to 1 as n grows. So that's the difference\nbetween with high probability",
    "start": "2719480",
    "end": "2725590"
  },
  {
    "text": "and just sort of giving you\nan expectation number where you have no such guarantees. What is interesting about\nthis is that as n grows,",
    "start": "2725590",
    "end": "2733360"
  },
  {
    "text": "you're going to get a higher\nand higher probability. And this constant c is going\nto be related to alpha.",
    "start": "2733360",
    "end": "2741742"
  },
  {
    "text": "That's the other thing that's\ninteresting about this. So it's like saying-- and\nyou can kind of say this for using Chernoff bounds that\nwe'll get to in a few minutes,",
    "start": "2741742",
    "end": "2751809"
  },
  {
    "text": "even for expectation as well. But what this says is that\nif, for example, c doubled,",
    "start": "2751810",
    "end": "2760980"
  },
  {
    "text": "then you are saying that\nyour number of levels",
    "start": "2760980",
    "end": "2766619"
  },
  {
    "text": "is order 4 log n. I mean I understand that that\ndoesn't make too much sense, but it's less than or equal\nto 4 log n plus a constant.",
    "start": "2766620",
    "end": "2774620"
  },
  {
    "text": "And that 4 is going to get\nreflected in the alpha here. ",
    "start": "2774620",
    "end": "2781720"
  },
  {
    "text": "When the 4 goes from 4 to\n8, the alpha increases. So the more room that you have\nwith respect to this constant,",
    "start": "2781720",
    "end": "2790599"
  },
  {
    "text": "the higher the probability. It becomes an\noverwhelming probability that you're going to be\nwithin those number of levels.",
    "start": "2790600",
    "end": "2798190"
  },
  {
    "text": "So maybe there's\nan 80% probability that you're within 2 log n.",
    "start": "2798190",
    "end": "2804369"
  },
  {
    "text": "But there's a\n99.99999% probability that you're within 4 log\nn, and so on and so forth.",
    "start": "2804370",
    "end": "2810430"
  },
  {
    "text": "So that's the kind of thing\nthat with the high probability analysis tells you explicitly.",
    "start": "2810430",
    "end": "2816630"
  },
  {
    "text": "And so you can do that,\nyou can do this analysis fairly straightforwardly.",
    "start": "2816630",
    "end": "2823980"
  },
  {
    "text": "And let me do that\non a different board. Let me go ahead and\ndo that over here.",
    "start": "2823980",
    "end": "2830410"
  },
  {
    "text": "Actually, I don't\nreally need this. So let's do that over here. ",
    "start": "2830410",
    "end": "2838830"
  },
  {
    "text": "And so this is our first with\nhigh probability analysis. And I want to prove\nthat warm-up Lemma.",
    "start": "2838830",
    "end": "2846210"
  },
  {
    "text": "So usually what you\ndo here is you look at the failure probability. So with high\nprobability is typically",
    "start": "2846210",
    "end": "2852940"
  },
  {
    "text": "something that\nlooks like 1 minus 1 divided by n raised to alpha.",
    "start": "2852940",
    "end": "2858100"
  },
  {
    "text": "And this part here is\nthe failure probability. And that's typically\nwhat you analyze",
    "start": "2858100",
    "end": "2863750"
  },
  {
    "text": "and what we're\ngoing to do today. So the failure probability\nis that it's not less",
    "start": "2863750",
    "end": "2869040"
  },
  {
    "text": "than c log n levels, is the\ncomplement of what we just looked at, which is the\nprobability that it's strictly",
    "start": "2869040",
    "end": "2877250"
  },
  {
    "text": "greater than c log n levels.  And that's the probability\nthat some element gets promoted",
    "start": "2877250",
    "end": "2894710"
  },
  {
    "text": "greater than c log n times.  So why would you have\nmore than c log n levels?",
    "start": "2894710",
    "end": "2904120"
  },
  {
    "text": "It's essentially because\nyou inserted something and that element got promoted\nstrictly greater than c",
    "start": "2904120",
    "end": "2910930"
  },
  {
    "text": "log n times, which\nobviously implies that you had the sequence\nof heads, and we'll",
    "start": "2910930",
    "end": "2917319"
  },
  {
    "text": "get to that in just a second. But before we go to that\nstep of figuring out",
    "start": "2917320",
    "end": "2923350"
  },
  {
    "text": "exactly what's going on here\nas to why this got promoted and what the probability\nof each promotion",
    "start": "2923350",
    "end": "2928880"
  },
  {
    "text": "is, what I have here is I\nhave a sequence of inserts",
    "start": "2928880",
    "end": "2936759"
  },
  {
    "text": "potentially that\nI have to analyze. And in general, when I\nhave an n element list,",
    "start": "2936760",
    "end": "2944020"
  },
  {
    "text": "I'm going to assume that\neach of these elements got inserted into the\nlist at some point.",
    "start": "2944020",
    "end": "2949540"
  },
  {
    "text": "So I've had n inserts. And we just look at the case\nwhere you have n inserts,",
    "start": "2949540",
    "end": "2956050"
  },
  {
    "text": "you could have deletes, and so\nyou could have more inserts, but it won't really\nchange anything. You have n inserts corresponding\nto each of these elements,",
    "start": "2956050",
    "end": "2966480"
  },
  {
    "text": "and one of those n elements got\npromoted in this failure case greater than c log n times.",
    "start": "2966480",
    "end": "2974380"
  },
  {
    "text": "That's essentially\nwhat's happened here. And so you don't know which\none, but you can typically",
    "start": "2974380",
    "end": "2981120"
  },
  {
    "text": "do this in with high\nprobability analysis because the probabilities\nare so small and they're inverse\npolynomials, polynomials like n",
    "start": "2981120",
    "end": "2990545"
  },
  {
    "text": "raised to alpha. You can use what's\ncalled the union bound that I'm sure you've used before\nin some context or the other.",
    "start": "2990545",
    "end": "2998180"
  },
  {
    "text": "And you essentially\nsay that this is less than or equal\nto the probability that a particular element x.",
    "start": "2998180",
    "end": "3006810"
  },
  {
    "text": "So you just pick an element,\narbitrary element x, but you pick one.",
    "start": "3006810",
    "end": "3012720"
  },
  {
    "text": "Gets promoted greater\nthan c log n times.",
    "start": "3012720",
    "end": "3018830"
  },
  {
    "text": "So you have a small probability. You have no idea whether these\nevents are independent or not.",
    "start": "3018830",
    "end": "3024760"
  },
  {
    "text": "The union bound\ndoesn't care about it. It's like saying you've got\na 0.001 probability that any",
    "start": "3024760",
    "end": "3031800"
  },
  {
    "text": "of these elements could get\npromoted greater than c log n times, and there's\n10 of those elements.",
    "start": "3031800",
    "end": "3038980"
  },
  {
    "text": "You don't know whether they're\nindependent events or not, but you can certainly\nuse the union bound that says the overall\nfailure probability is going",
    "start": "3038980",
    "end": "3046620"
  },
  {
    "text": "to be less than or equal to\nn equals 10, in my example, times that 0.001.",
    "start": "3046620",
    "end": "3053460"
  },
  {
    "text": "That's basically it. Now you can go off\nand say, what does it mean for an element\nto get promoted?",
    "start": "3053460",
    "end": "3060700"
  },
  {
    "text": "What actually has to happen\nfor an element to get promoted? And you have n times 1\nover 2, because you're",
    "start": "3060700",
    "end": "3069970"
  },
  {
    "text": "flipping a fair\ncoin, and you are getting a c log n heads here.",
    "start": "3069970",
    "end": "3078950"
  },
  {
    "text": "You flip and you\nget one promotion. ",
    "start": "3078950",
    "end": "3085705"
  },
  {
    "text": "There's two levels\nassociated with a promotion, the level you came from\nand the level you went to.",
    "start": "3085705",
    "end": "3091330"
  },
  {
    "text": "And so a promotion\nis a move, so you're going to have one more level.",
    "start": "3091330",
    "end": "3097530"
  },
  {
    "text": "If you count levels, then you\nhave the number of promotions, right? That's just simply\ncorresponds to taking this 1/2",
    "start": "3097530",
    "end": "3106510"
  },
  {
    "text": "and raising it to c log n,\nbecause that's essentially the number of\npromotions you have.",
    "start": "3106510",
    "end": "3115330"
  },
  {
    "text": "And you got n 1/2 c log n,\nand what does that turn into?",
    "start": "3115330",
    "end": "3122950"
  },
  {
    "text": "What is n times 1/2 c log n?",
    "start": "3122950",
    "end": "3127990"
  },
  {
    "text": "1 over 2 raised to\nlog n would give you? 2 raised to log ns?",
    "start": "3127990",
    "end": "3134790"
  },
  {
    "text": "Is n, right? So you got n divided\nby n raised to c, which",
    "start": "3134790",
    "end": "3140510"
  },
  {
    "text": "is 1 divided by n\nraised to c minus 1, which is 1 divided by n\nraised to alpha where alpha",
    "start": "3140510",
    "end": "3147500"
  },
  {
    "text": "is c minus 1. So that's it. That's our first with\nhigh probability analysis.",
    "start": "3147500",
    "end": "3153970"
  },
  {
    "text": "Not too hard. What I've done is done\nexactly what I just told you",
    "start": "3153970",
    "end": "3159140"
  },
  {
    "text": "that the notion of with\nhigh probability is. You have a failure\nprobability that is related.",
    "start": "3159140",
    "end": "3168050"
  },
  {
    "text": "Inverse polynomial and the\ndegree of the polynomial alpha",
    "start": "3168050",
    "end": "3174380"
  },
  {
    "text": "is related to c. And so that's what\nI have out there, but c equals-- what did it have?",
    "start": "3174380",
    "end": "3180080"
  },
  {
    "text": "Alpha equals c minus 1\nor c equals alpha plus 1. So what I've done here\nis done an analysis",
    "start": "3180080",
    "end": "3187090"
  },
  {
    "text": "that tells you with high\nprobability how many levels I'm going to have given\nmy insert algorithm.",
    "start": "3187090",
    "end": "3194609"
  },
  {
    "text": "So this is the first part\nof what we'd like to show. This just tells us\nhow big this skip list",
    "start": "3194610",
    "end": "3202050"
  },
  {
    "text": "is going to grow vertically. It doesn't tell us anything\nabout the structure of the list",
    "start": "3202050",
    "end": "3209140"
  },
  {
    "text": "internally as to whether\nthe randomization is going",
    "start": "3209140",
    "end": "3215109"
  },
  {
    "text": "to cause that pretty\nstructure that you see up here to be completely messed up\nto the point where we don't get",
    "start": "3215110",
    "end": "3222710"
  },
  {
    "text": "order log n search complexity,\nbecause we are spending way too much time let's say on the\nbottom list or the list",
    "start": "3222710",
    "end": "3229200"
  },
  {
    "text": "just above the bottom\nlist, et cetera. So we need to get a sense of\nhow the structure corresponding",
    "start": "3229200",
    "end": "3237580"
  },
  {
    "text": "to the skip list, whether it's\ngoing to look somewhat uniform or not. We have to categorize\nthat, and the only way",
    "start": "3237580",
    "end": "3242809"
  },
  {
    "text": "we're going to\ncharacterize that is by analyzing search and\ncounting the number of moves",
    "start": "3242810",
    "end": "3248400"
  },
  {
    "text": "that a search makes. And the reason it's\nmore complicated than what you see up there\nis that in a search, as you",
    "start": "3248400",
    "end": "3255660"
  },
  {
    "text": "can see, you're going to be\nmoving at different levels. You're going to be\nmoving at the top level.",
    "start": "3255660",
    "end": "3261500"
  },
  {
    "text": "Maybe at relatively\nsmall number of moves, you're going to pop down one,\nmove a few moves at that level,",
    "start": "3261500",
    "end": "3268130"
  },
  {
    "text": "pop down, et cetera, et cetera. So there's a lot of things\ngoing on in search which happen at different\nlevels, and the total cost",
    "start": "3268130",
    "end": "3275859"
  },
  {
    "text": "is going to have to\nbe all of the moves. So we're going to think\nabout all of the moves--",
    "start": "3275860",
    "end": "3282200"
  },
  {
    "text": "up moves, down moves,\nand add them all up. They all have to be order\nlog n with high probability.",
    "start": "3282200",
    "end": "3289090"
  },
  {
    "text": "There's no getting around that\nbecause each of them costs you. So that's the thing that we'll\nspend the next 20 minutes on.",
    "start": "3289090",
    "end": "3299400"
  },
  {
    "text": "And the theorem that we\nlike to prove for search",
    "start": "3299400",
    "end": "3304640"
  },
  {
    "text": "is that-- this is\nwhat I just said-- any search in an n element skip\nlist costs order log n w.h.p.",
    "start": "3304640",
    "end": "3326920"
  },
  {
    "text": "So it doesn't matter how\nthis skip list looks. There's n elements,\nthey got inserted",
    "start": "3326920",
    "end": "3332800"
  },
  {
    "text": "using the insert\nalgorithm-- that's important to know if you're\ngoing to have to use that. And when I do a search for an\nelement, it may be in there,",
    "start": "3332800",
    "end": "3341300"
  },
  {
    "text": "it may not be in there. Doesn't really matter. We'll assume a\nsuccessful search.",
    "start": "3341300",
    "end": "3346940"
  },
  {
    "text": "That is going to cost me order\nlog n with high probability. And the cool idea here in\nterms of analyzing the search",
    "start": "3346940",
    "end": "3355130"
  },
  {
    "text": "in order to figure out\nhow we're going to add up all of these moves is\nwe're going to analyze",
    "start": "3355130",
    "end": "3361280"
  },
  {
    "text": "the search backwards. So that's a cool idea. ",
    "start": "3361280",
    "end": "3369349"
  },
  {
    "text": "So what does that mean exactly? Well, what that\nmeans is that we're",
    "start": "3369350",
    "end": "3375890"
  },
  {
    "text": "going to think\nabout this b search, which think of it as the\nbackward search, starts--",
    "start": "3375890",
    "end": "3384470"
  },
  {
    "text": "it actually ends, so that's what\nI'm writing in brackets here, at the node in the bottom list.",
    "start": "3384470",
    "end": "3391000"
  },
  {
    "text": "So we're assuming a successful\nsearch, as I mentioned before. Otherwise, the point would\njust be in between two members.",
    "start": "3391000",
    "end": "3400520"
  },
  {
    "text": "You know that it's not in there\nbecause you're looking for 67 and you see 66 to your\nleft and 72 to your right.",
    "start": "3400520",
    "end": "3408819"
  },
  {
    "text": "So either way it\nworks, but keep in mind that it's a successful\nsearch because it just makes",
    "start": "3408820",
    "end": "3415339"
  },
  {
    "text": "things a little bit easier. Now, at each node that we\nvisit, what we're going to do",
    "start": "3415340",
    "end": "3426760"
  },
  {
    "text": "is we're going to say that\nif the node was not promoted",
    "start": "3426760",
    "end": "3436920"
  },
  {
    "text": "higher, then what\nactually happened here was that when you inserted\nthat particular element,",
    "start": "3436920",
    "end": "3444030"
  },
  {
    "text": "you got a tails. Because otherwise you\nwould have gotten a heads, that element would have\nbeen promoted higher.",
    "start": "3444030",
    "end": "3451820"
  },
  {
    "text": "Then you go-- and\nthat really means",
    "start": "3451820",
    "end": "3458250"
  },
  {
    "text": "that you came from the left-hand\nside, so you make a left move.",
    "start": "3458250",
    "end": "3464200"
  },
  {
    "text": "Now, search of course makes\ndown moves and right moves, but this is a backward search\nso it's going to make left moves",
    "start": "3464200",
    "end": "3470680"
  },
  {
    "text": "and up moves. What else do I have here? Running out of room, so let\nme-- let's continue with that.",
    "start": "3470680",
    "end": "3486400"
  },
  {
    "start": "3486400",
    "end": "3498099"
  },
  {
    "text": "All right. And now the case is if\nthe node was promoted",
    "start": "3498100",
    "end": "3509050"
  },
  {
    "text": "higher, that means\nwe got heads here",
    "start": "3509050",
    "end": "3514510"
  },
  {
    "text": "in that particular insertion. Then we go, and that means\nthat during the search",
    "start": "3514510",
    "end": "3523990"
  },
  {
    "text": "we came from upstairs.",
    "start": "3523990",
    "end": "3529280"
  },
  {
    "text": "And then lastly, we\nstop, which means we start when we reach the top\nlevel or minus infinity if we",
    "start": "3529280",
    "end": "3546070"
  },
  {
    "text": "go all the way back. So that's it. A lot of writing here, but\nthis should make things clear.",
    "start": "3546070",
    "end": "3553360"
  },
  {
    "text": "So let's say that\nwe're searching for 66. I want to trace through what\nthe backwards path would",
    "start": "3553360",
    "end": "3560430"
  },
  {
    "text": "look like, and keep that\ncode in mind as I do this. So I'm searching for\n66, and obviously, we",
    "start": "3560430",
    "end": "3567716"
  },
  {
    "text": "know how to find it. We've done that. But let's go backwards\nas to what exactly happened when we look for 66.",
    "start": "3567717",
    "end": "3576380"
  },
  {
    "text": "When we look for 66, right at\nthis point when you see 66,",
    "start": "3576380",
    "end": "3582230"
  },
  {
    "text": "where would you have come from? AUDIENCE: [INAUDIBLE] SRINIVAS DEVADAS: You'd\nhave come from the top. And so if you go look\nat what happens here,",
    "start": "3582230",
    "end": "3590599"
  },
  {
    "text": "the node when it got inserted\nwas promoted one level. So that means that you would go\nup top in the backward search",
    "start": "3590600",
    "end": "3599591"
  },
  {
    "text": "first. Your first move would\nbe going up like that. Now, if there's a 66 up there,\nyou would go up one more.",
    "start": "3599591",
    "end": "3607390"
  },
  {
    "text": "But there's not, so you go left.  You go to 50.",
    "start": "3607390",
    "end": "3613720"
  },
  {
    "text": "And when you have a 50 up here,\nwould you stay on this level? AUDIENCE: No. SRINIVAS DEVADAS: No.",
    "start": "3613720",
    "end": "3619166"
  },
  {
    "text": "You'd go up to 50\nbecause the first chance you get you want to get\nup to the higher levels.",
    "start": "3619166",
    "end": "3626020"
  },
  {
    "text": "And again, this 50 was\npromoted so you go up there, and you go to 14, and pretty\nmuch that's the end of that.",
    "start": "3626020",
    "end": "3633230"
  },
  {
    "text": "So this would look like you go\nlike that, you have an up move,",
    "start": "3633230",
    "end": "3638859"
  },
  {
    "text": "then you have a left move--\ndifferent colors here would be good-- then\nyou have an up move,",
    "start": "3638860",
    "end": "3647570"
  },
  {
    "text": "and a left, and then an up. So that's our backward search.",
    "start": "3647570",
    "end": "3655140"
  },
  {
    "text": "And it's not that\ncomplicated, hopefully. If you're looking for\n66 or 59, you do that.",
    "start": "3655140",
    "end": "3661980"
  },
  {
    "text": "So it's much more natural,\nand you just need to flip it. Why am I doing all this?",
    "start": "3661980",
    "end": "3667520"
  },
  {
    "text": "Well, the reason\nI'm doing all this is that I have to do some\nbounding of the moves,",
    "start": "3667520",
    "end": "3675770"
  },
  {
    "text": "and I know that the moves that\ncorrespond to the up moves",
    "start": "3675770",
    "end": "3681350"
  },
  {
    "text": "are probabilistic in the sense\nthat the reason I'm making them is because I flipped\nheads at some point.",
    "start": "3681350",
    "end": "3689170"
  },
  {
    "text": "So all of this is going\nto turn into counting how many coin flips\ncome out heads",
    "start": "3689170",
    "end": "3696350"
  },
  {
    "text": "in a long stream of coin flips. So that's what this\nbackward search is going to allow us to do.",
    "start": "3696350",
    "end": "3702630"
  },
  {
    "text": "And that crucial thing is\nwhat we'll look at next. So the analysis itself\nis a bit painful,",
    "start": "3702630",
    "end": "3710730"
  },
  {
    "text": "but there's a bunch of algebra. But what I want to\ndo is to make sure that you get the high\nlevel picture, number one,",
    "start": "3710730",
    "end": "3717950"
  },
  {
    "text": "and the insights as to why\nthe expected value or the with",
    "start": "3717950",
    "end": "3728500"
  },
  {
    "text": "high probability value is\ngoing to be order log n. But the key is the strategy. So we're going to\ngo off and we're",
    "start": "3728500",
    "end": "3734580"
  },
  {
    "text": "going to prove this theorem. ",
    "start": "3734580",
    "end": "3742080"
  },
  {
    "text": "Our backward search makes\nup moves and left moves.",
    "start": "3742080",
    "end": "3758330"
  },
  {
    "text": "We know that.  Each with probability 1/2.",
    "start": "3758330",
    "end": "3768310"
  },
  {
    "text": "And the reason for\nthat is when you go up is because you got\na heads, and if you",
    "start": "3768310",
    "end": "3775049"
  },
  {
    "text": "didn't get a heads in you got a\ntails, that meant you go left. Because of the previous\nelement, every time you're",
    "start": "3775050",
    "end": "3781960"
  },
  {
    "text": "passing these elements\nthat are inserted, and they were inserted\nby flipping coins.",
    "start": "3781960",
    "end": "3789660"
  },
  {
    "text": "So that's key point number one. All of that, if you look\nat what happens here",
    "start": "3789660",
    "end": "3795310"
  },
  {
    "text": "when I drew this out,\nyou got heads here and you got tails there. So each of those\nthings for a fair coin",
    "start": "3795310",
    "end": "3801460"
  },
  {
    "text": "is happening with\nprobability 1/2. And it's all about\ncoin flips here. Now, the number\nof moves going up",
    "start": "3801460",
    "end": "3818700"
  },
  {
    "text": "is less than the number of\nlevels-- the number of levels",
    "start": "3818700",
    "end": "3824750"
  },
  {
    "text": "is one more than that. And we've shown that that's\nc log n with high probability",
    "start": "3824750",
    "end": "3832230"
  },
  {
    "text": "by the warm-up Lemma. That's what this just did. The number of up moves-- I mean\nyou can't go off the list here.",
    "start": "3832230",
    "end": "3839540"
  },
  {
    "text": "This list is now you're\nnot inserting anymore, you're doing a search. So it's not like you're\ngoing to be adding",
    "start": "3839540",
    "end": "3844750"
  },
  {
    "text": "levels or anything like that. So the number of up moves\nwe've taken care of. So this last thing here which\nI'm going to write out here",
    "start": "3844750",
    "end": "3851970"
  },
  {
    "text": "is the key observation,\nwhich is going to make the whole analysis possible.",
    "start": "3851970",
    "end": "3857880"
  },
  {
    "text": "And so this last thing it\nsays that the total number",
    "start": "3857880",
    "end": "3863400"
  },
  {
    "text": "of moves-- so now the total\nnumber of moves has to include, obviously, the up\nmoves and the left",
    "start": "3863400",
    "end": "3868820"
  },
  {
    "text": "moves, and there's\nno other kind.  The total number\nof moves is going",
    "start": "3868820",
    "end": "3878770"
  },
  {
    "text": "to correspond to\nthe number of moves",
    "start": "3878770",
    "end": "3891258"
  },
  {
    "text": "till you get c log n up moves.",
    "start": "3891258",
    "end": "3904317"
  },
  {
    "text": " So what does that mean?",
    "start": "3904317",
    "end": "3909720"
  },
  {
    "text": "There's some sequence\nof heads and tails that I'm getting, each of\nthem with probability 1/2.",
    "start": "3909720",
    "end": "3915270"
  },
  {
    "text": "Every time that I got a\nheads, I moved up a level. The fact of the matter is that\nI can't get more than c log n",
    "start": "3915270",
    "end": "3923140"
  },
  {
    "text": "heads because I'm going\nto run out of levels. That's it.",
    "start": "3923140",
    "end": "3928980"
  },
  {
    "text": "I'm going to run out of room\nvertically if I keep popping up and keep doing up moves.",
    "start": "3928980",
    "end": "3935700"
  },
  {
    "text": "So at that point I'm\nforced to go left. Maybe I'm going\nleft in the middle",
    "start": "3935700",
    "end": "3940900"
  },
  {
    "text": "there when I still\nhad a chance to go up. That corresponds to getting a\ntails as opposed to a heads.",
    "start": "3940900",
    "end": "3947390"
  },
  {
    "text": "But I can limit the\ntotal number of moves from a probabilistic\nstandpoint by saying",
    "start": "3947390",
    "end": "3953849"
  },
  {
    "text": "during that sequence\nof coin flips I only have a certain number\nof heads that I",
    "start": "3953850",
    "end": "3959500"
  },
  {
    "text": "could have possibly gotten. Because if I got more heads\nthan that, I would be up top.",
    "start": "3959500",
    "end": "3964910"
  },
  {
    "text": "I'd be out of the skip\nlist, and that doesn't work.",
    "start": "3964910",
    "end": "3970119"
  },
  {
    "text": "So the total number of\nmoves is the number of moves till you get c log n up moves,\nwhich essentially corresponds",
    "start": "3970120",
    "end": "3978720"
  },
  {
    "text": "to-- now, forget about\nskip lists for a second.",
    "start": "3978720",
    "end": "3984210"
  },
  {
    "text": "Our claim is the\ntotal number of moves is the number of coin flips,\nso these are the same,",
    "start": "3984210",
    "end": "3993950"
  },
  {
    "text": "because every move\ncorresponds to a coin flip. Until-- it's a fair\ncoin, probability 1/2--",
    "start": "3993950",
    "end": "4001720"
  },
  {
    "text": "until c log n heads\nhave been obtained.",
    "start": "4001720",
    "end": "4009619"
  },
  {
    "text": "So the number of\ncoin flips until c log n heads is the\ntotal number of moves.",
    "start": "4009620",
    "end": "4016880"
  },
  {
    "text": "This equals that.  And what we now want to show, if\nyou believe that, and hopefully",
    "start": "4016880",
    "end": "4026599"
  },
  {
    "text": "you do because the\nargument is simply that you run out of levels,\nthat this is order log n w.h.p.",
    "start": "4026600",
    "end": "4035740"
  },
  {
    "text": "That's why it's a claim. So the observation is\nthat the number of coin",
    "start": "4035740",
    "end": "4041550"
  },
  {
    "text": "flips, as you flip a\nfair coin, until you get c log n heads will give\nyou the number of moves",
    "start": "4041550",
    "end": "4048700"
  },
  {
    "text": "in your search, total number\nof moves in your search. It includes the up moves\nas well as the left moves.",
    "start": "4048700",
    "end": "4055880"
  },
  {
    "text": "And now what we have\nto show is that that",
    "start": "4055880",
    "end": "4061220"
  },
  {
    "text": "is going to be order log\nn with high probability. OK? And then once you do that\nyou've done two things.",
    "start": "4061220",
    "end": "4068650"
  },
  {
    "text": "You've bounded the number\nof levels in the skip list",
    "start": "4068650",
    "end": "4075829"
  },
  {
    "text": "to be order log n\nwith high probability. And you've said the number\nof moves in the search",
    "start": "4075830",
    "end": "4081470"
  },
  {
    "text": "is order log n with high\nprobability assuming that the number of levels\nis c log n, obviously.",
    "start": "4081470",
    "end": "4091240"
  },
  {
    "text": "So it's not that the bottom\none subsumes the top one. It's the last thing to\nkeep in mind as we get all",
    "start": "4091240",
    "end": "4098560"
  },
  {
    "text": "of these items out of the way. This assumes that there are\nless than or equal to c log n",
    "start": "4098560",
    "end": "4106439"
  },
  {
    "text": "levels. That's the only reason why\nI could make an argument that I've run out of levels. So if I have this event A\nhere-- if I call this event A,",
    "start": "4106439",
    "end": "4115036"
  },
  {
    "text": "and I have this event\nB, what I really want is-- I've shown you that event\nA happens with high probability.",
    "start": "4115036",
    "end": "4123389"
  },
  {
    "text": "That's the warm-up Lemma. I need to show you that event B\nhappens with high probability.",
    "start": "4123390",
    "end": "4128649"
  },
  {
    "text": "And then I have to show you\nthat event A and event B happen with high probability,\nbecause I need both.",
    "start": "4128649",
    "end": "4136490"
  },
  {
    "text": "Any questions? We're stopping a minute here. The rest of the analysis,\na bunch of algebra,",
    "start": "4136490",
    "end": "4141870"
  },
  {
    "text": "we'll get through it, you\ncan look at the notes. This is the key point. If you got this, you got it.",
    "start": "4141870",
    "end": "4148761"
  },
  {
    "text": "Yeah. AUDIENCE: Can you just say\nthat because the probability of drawing an up move\ninstead of a left move",
    "start": "4148762",
    "end": "4155869"
  },
  {
    "text": "is 1/2, that the expected\nnumber of left moves",
    "start": "4155869",
    "end": "4161265"
  },
  {
    "text": "should be equal to the number\nof up moves, [INAUDIBLE] bound the up moves?",
    "start": "4161265",
    "end": "4166649"
  },
  {
    "text": "SRINIVAS DEVADAS:\nSo the argument is that since you\nhave 1/2, can you",
    "start": "4166649",
    "end": "4172410"
  },
  {
    "text": "simply say that the expected\nnumber of left moves",
    "start": "4172410",
    "end": "4177470"
  },
  {
    "text": "is going to be the same as\nthe same as the up moves? You can make arguments\nabout expectation.",
    "start": "4177470",
    "end": "4182790"
  },
  {
    "text": "You can say that at any level,\nthe number of left moves that you're going to have is\ngoing to be two in expectation.",
    "start": "4182790",
    "end": "4190089"
  },
  {
    "text": "It's not going to give you your\nwith high probability proof. It's not going to relate\nthat to the 1 divided",
    "start": "4190090",
    "end": "4197410"
  },
  {
    "text": "by n raised to alpha. But I will tell you that if you\njust wanted to show expectation",
    "start": "4197410",
    "end": "4202429"
  },
  {
    "text": "for search is order\nlog n, you won't have to jump through\nall of these hoops.",
    "start": "4202430",
    "end": "4208400"
  },
  {
    "text": "At some level you'll be\nmaking the assumptions that I've made explicit\nhere through my observations",
    "start": "4208400",
    "end": "4213927"
  },
  {
    "text": "when you do that expectation. So if you really want to write\na precise proof of expected",
    "start": "4213927",
    "end": "4219539"
  },
  {
    "text": "value for search\ncomplexity, you would have to do a lot of the\nthings that I'm doing here.",
    "start": "4219540",
    "end": "4225880"
  },
  {
    "text": "I'm not saying you\nwaved your hands. You did not. But it needed more to\nthan what you just said.",
    "start": "4225880",
    "end": "4234220"
  },
  {
    "text": "OK? So this is pretty much\nwhat the analysis is.",
    "start": "4234220",
    "end": "4240579"
  },
  {
    "text": "With high probability analysis\nwe bounded the vertical, we bounded the number of moves.",
    "start": "4240580",
    "end": "4245920"
  },
  {
    "text": "Assuming the\nvertical was bounded, we got the result for\nthe number of moves.",
    "start": "4245920",
    "end": "4251350"
  },
  {
    "text": "So both of those happen\nwith high probability. You got your result,\nwhich is the theorem",
    "start": "4251350",
    "end": "4256570"
  },
  {
    "text": "that we have somewhere. Woah, did I erase the theorem?",
    "start": "4256570",
    "end": "4262770"
  },
  {
    "text": "AUDIENCE: [INAUDIBLE]. SRINIVAS DEVADAS:\nIt's somewhere.  All right. Good.",
    "start": "4262770",
    "end": "4268270"
  },
  {
    "text": "So let's do what\nwe can with respect to showing this theorem.",
    "start": "4268270",
    "end": "4274980"
  },
  {
    "text": "There's a couple ways\nthat you could prove this. There's a way that you\ncould use a Chernoff bound.",
    "start": "4274980",
    "end": "4286910"
  },
  {
    "text": "And this is kind\nof a cool result that I think is worth knowing.",
    "start": "4286910",
    "end": "4292699"
  },
  {
    "text": "I don't know if\nyou've seen this, but this is a seminal\ntheorem by Chernoff",
    "start": "4292700",
    "end": "4298430"
  },
  {
    "text": "that says if you have a\nrandom variable representing",
    "start": "4298430",
    "end": "4315220"
  },
  {
    "text": "the total number of\ntails, let's say--",
    "start": "4315220",
    "end": "4320700"
  },
  {
    "text": "it could be heads as\nwell-- in a series of m--",
    "start": "4320700",
    "end": "4328310"
  },
  {
    "text": "not n, m-- independent coin\nflips where each flip has",
    "start": "4328310",
    "end": "4342110"
  },
  {
    "text": "a probability p of\ncoming up heads,",
    "start": "4342110",
    "end": "4350199"
  },
  {
    "text": "then for all r greater\nthan 0, we have",
    "start": "4350200",
    "end": "4358750"
  },
  {
    "text": "this beautiful result that\nsays the probability that y,",
    "start": "4358750",
    "end": "4365040"
  },
  {
    "text": "which is a random variable--\na particular instance",
    "start": "4365040",
    "end": "4373320"
  },
  {
    "text": "when you evaluate\nit-- that it is larger",
    "start": "4373320",
    "end": "4378980"
  },
  {
    "text": "than the expectation\nby r is bounded. So just a beautiful\nresult that says here's",
    "start": "4378980",
    "end": "4387560"
  },
  {
    "text": "a random variable that\ncorresponds to flipping a coin. I'm going to flip\nthis a bunch of times,",
    "start": "4387560",
    "end": "4395700"
  },
  {
    "text": "and I know what\nthe expectation is. If it's a fair coin\nof 1/2, then I'm",
    "start": "4395700",
    "end": "4401789"
  },
  {
    "text": "going to get m over 2--\nexpected number of heads is going to be m over 2. Expected number of tails\nis going to be m over 2.",
    "start": "4401790",
    "end": "4408039"
  },
  {
    "text": "If it's p, then obviously\nit's a little bit different-- p times m. But what I have here is if you\ntell me what the probability is",
    "start": "4408040",
    "end": "4417850"
  },
  {
    "text": "that I'm 10 away\nfrom the expectation and that would imply that r is\n10, then that is bounded by e",
    "start": "4417850",
    "end": "4424670"
  },
  {
    "text": "raised to minus 2 times\n10 square divided by m. So that's Chernoff's bound.",
    "start": "4424670",
    "end": "4430369"
  },
  {
    "text": "And you can see how this relates\nto our with high probability analysis. Because our with\nhigh probability analysis is exactly this.",
    "start": "4430369",
    "end": "4437110"
  },
  {
    "text": "This is the hammer that you can\nuse to do with high probability analysis. Because this tells you as you\nget further and further away",
    "start": "4437110",
    "end": "4444730"
  },
  {
    "text": "from the average or you get\nfurther and further away from the expectation, what\nthe probability is that you're",
    "start": "4444730",
    "end": "4450090"
  },
  {
    "text": "going to be so far away. What is the probability that in\n100 coin flips that are fair,",
    "start": "4450090",
    "end": "4459260"
  },
  {
    "text": "you get 50 heads? It's a reasonably large number\nbecause the expected value",
    "start": "4459260",
    "end": "4465440"
  },
  {
    "text": "corresponds to 50. So r is 0.",
    "start": "4465440",
    "end": "4470469"
  },
  {
    "text": "So that just says\nthis is a-- well, it doesn't tell you much\nbecause this says it's less than or equal to 1.",
    "start": "4470470",
    "end": "4476750"
  },
  {
    "text": "That's all it's says. But if you had 75, what are\nthe probability that you",
    "start": "4476750",
    "end": "4483360"
  },
  {
    "text": "get 75 heads when you\nflip a coin 100 times?",
    "start": "4483360",
    "end": "4488369"
  },
  {
    "text": "Then e of y for a fair coin\nwould be 50, r would be 25,",
    "start": "4488370",
    "end": "4493390"
  },
  {
    "text": "and you'd go off and you\ncould do the math for that. So it's a beautiful\nrelationship that tells you",
    "start": "4493390",
    "end": "4499670"
  },
  {
    "text": "how the probabilities change as\nyour random variable value is",
    "start": "4499670",
    "end": "4505050"
  },
  {
    "text": "further and further away\nfrom the expectation. And you can imagine\nthat this is going to be very useful in showing our\nwith high probability result.",
    "start": "4505050",
    "end": "4519110"
  },
  {
    "text": "And I think what I\nhave time for is just to give you a sense of how\nthis result works out-- I'm not",
    "start": "4519110",
    "end": "4527809"
  },
  {
    "text": "going to do the algebra. I don't think it's worth it to\nwrite all of this on the board when you can read\nit in the notes.",
    "start": "4527810",
    "end": "4535340"
  },
  {
    "text": "But the bottom\nline is we're going to show this little Lemma\nthat says for any c,",
    "start": "4535340",
    "end": "4547730"
  },
  {
    "text": "invoking this Chernoff\nbound, there's a constant d,",
    "start": "4547730",
    "end": "4553330"
  },
  {
    "text": "such that with high\nprobability, the number of heads",
    "start": "4553330",
    "end": "4565406"
  },
  {
    "text": "in flipping d log n. So I have a new constant here.",
    "start": "4565406",
    "end": "4571239"
  },
  {
    "text": "d log n fair coins,\nor a single fair coin, d log n times,\nassuming independence,",
    "start": "4571240",
    "end": "4580040"
  },
  {
    "text": "is at least c log n. So what does this say? A lot of words.",
    "start": "4580040",
    "end": "4586389"
  },
  {
    "text": "It just says, hey, you\nwant an order log n",
    "start": "4586390",
    "end": "4592320"
  },
  {
    "text": "bound here eventually. The beauty of order log n\nis that there's a constant in there that you control.",
    "start": "4592320",
    "end": "4598760"
  },
  {
    "text": "That constant is d. So you tell me\nthat c log n is 50.",
    "start": "4598760",
    "end": "4606530"
  },
  {
    "text": "So c log n is 50. Then what I'm going to do is\nI'm going to say something like,",
    "start": "4606530",
    "end": "4612570"
  },
  {
    "text": "well, if I flip a\ncoin 1,000 times, then",
    "start": "4612570",
    "end": "4620760"
  },
  {
    "text": "I'm going to have an\noverwhelming probability that I'm going to get 50 heads.",
    "start": "4620760",
    "end": "4626070"
  },
  {
    "text": "And that's it. That's what the Lemma says. It says tell me what c log n is.",
    "start": "4626070",
    "end": "4632900"
  },
  {
    "text": "Give me that value. And I will find you a d, such\nthat by invoking Chernoff,",
    "start": "4632900",
    "end": "4638970"
  },
  {
    "text": "I'm going to show you an\noverwhelming probability that for that d you're going to\nget at least c log n heads.",
    "start": "4638970",
    "end": "4645924"
  },
  {
    "text": "So everybody buy that? Make sense from what\nyou see up there? Yup?",
    "start": "4645924",
    "end": "4651520"
  },
  {
    "text": "So this essentially\ncan be shown-- it turns out that\nwhat you have to do is-- and you don't\nhave to choose 8,",
    "start": "4651520",
    "end": "4658110"
  },
  {
    "text": "but you can choose d equals 8c. Just choose d\nequals 8c and you'll",
    "start": "4658110",
    "end": "4664030"
  },
  {
    "text": "see the algebra in the\nnotes corresponding to what each of these values are.",
    "start": "4664030",
    "end": "4669560"
  },
  {
    "text": "So e of y, just to tell\nyou, would be m over 2.",
    "start": "4669560",
    "end": "4674570"
  },
  {
    "text": "You're flipping m coins, fair\ncoin with probability 1/2. So you got m over 2.",
    "start": "4674570",
    "end": "4681074"
  },
  {
    "text": "And then the last\nthing that I'll tell you is that what you want\nin terms of invoking that,",
    "start": "4681075",
    "end": "4688980"
  },
  {
    "text": "you want r-- remember we were\ntalking about tails here-- so r is going to be d\nlog n minus c log n.",
    "start": "4688980",
    "end": "4698990"
  },
  {
    "text": "So you just invoke Chernoff\nwith e of y equals m over 2. And what you're saying here\nis you want c log n heads.",
    "start": "4698990",
    "end": "4707369"
  },
  {
    "text": "You want to make sure you\nget c log n heads, which",
    "start": "4707370",
    "end": "4714195"
  },
  {
    "text": "means that the number\nof tails is going to be d log n minus c log n. And typically we analyze\nfailure probability,",
    "start": "4714195",
    "end": "4721610"
  },
  {
    "text": "so what this is is this is\ngoing to be a tiny number. So the failure is when you\nget fewer than c log n heads.",
    "start": "4721610",
    "end": "4731350"
  },
  {
    "text": "So the failure is when you\nget fewer than c log n heads. And so that means that you're\ngetting more than d log",
    "start": "4731350",
    "end": "4739585"
  },
  {
    "text": "n minus c log n tails as\nyou're flipping this coin. Fewer than c log n heads means\nyou're getting at least d log",
    "start": "4739585",
    "end": "4747910"
  },
  {
    "text": "n minus c log n tails. So that's why this\nis your r here. And then when your\nr gets that large,",
    "start": "4747910",
    "end": "4754360"
  },
  {
    "text": "and you can play around\nwith the d and the c and choose d equals\n8c, you realize",
    "start": "4754360",
    "end": "4759580"
  },
  {
    "text": "that this is going to be\na minuscule probability. And you can turn that\naround to a polynomial--",
    "start": "4759580",
    "end": "4767790"
  },
  {
    "text": "again, a little bit of algebra. But you can show\nthis result on here",
    "start": "4767790",
    "end": "4772990"
  },
  {
    "text": "that says that\nthe number of coin flips until c log n\nheads is order log n with high probability\nby appropriately",
    "start": "4772990",
    "end": "4779940"
  },
  {
    "text": "choosing the constant d to\nbe some time/number over c.",
    "start": "4779940",
    "end": "4785699"
  },
  {
    "text": "So I'll let you do that algebra. But this one last thing\nthat-- we're not quite done.",
    "start": "4785700",
    "end": "4791100"
  },
  {
    "text": "So you thought we were done,\nbut we're not quite done. And why is it that\nwe're not quite done?",
    "start": "4791100",
    "end": "4798219"
  },
  {
    "text": "Real quick question\nworth five Frisbees. Why is it that we're\nnot quite done?",
    "start": "4798220",
    "end": "4804620"
  },
  {
    "text": "What did I say? I have done event A\nand event B, right? AUDIENCE: [INAUDIBLE].",
    "start": "4804620",
    "end": "4810100"
  },
  {
    "text": "SRINIVAS DEVADAS: I haven't\ndone the last thing which is to show that probability\nof event A-- this",
    "start": "4810100",
    "end": "4822070"
  },
  {
    "text": "is with high\nprobability happens-- and I need to show\nthat probability of event A and event\nB happens-- or this",
    "start": "4822070",
    "end": "4833385"
  },
  {
    "text": "is with high probability. Or I should just say\nevent A and event B happen with high probability.",
    "start": "4833385",
    "end": "4842510"
  },
  {
    "text": "And you can see that. It turns out it's\npretty straightforward, but you got the gist of it. Thanks for being so patient.",
    "start": "4842510",
    "end": "4849020"
  },
  {
    "text": "And there you go guys. Woah. ",
    "start": "4849020",
    "end": "4855059"
  }
]