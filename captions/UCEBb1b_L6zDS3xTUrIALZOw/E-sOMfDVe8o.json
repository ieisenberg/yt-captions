[
  {
    "start": "0",
    "end": "21000"
  },
  {
    "text": "The following content is\nprovided under a Creative Commons license. Your support will help\nMIT OpenCourseWare",
    "start": "0",
    "end": "6360"
  },
  {
    "text": "continue to offer high quality\neducational resources for free. To make a donation or\nview additional materials",
    "start": "6360",
    "end": "13350"
  },
  {
    "text": "from hundreds of MIT courses,\nvisit MIT OpenCourseWare at ocw.mit.edu",
    "start": "13350",
    "end": "21698"
  },
  {
    "start": "21000",
    "end": "494000"
  },
  {
    "text": "RUSS TEDRAKE: Today\nwe're going to do sort of the second part of\nour discussion on walking. ",
    "start": "21698",
    "end": "29720"
  },
  {
    "text": "I want to start with what\nsounds like a little bit of a remedial\nquestion in some ways,",
    "start": "29720",
    "end": "38120"
  },
  {
    "text": "in numerical analysis\nof these walking kids. Because it forces us to be\nmore careful about talking about the dynamics through\ncollisions and on Poincare",
    "start": "38120",
    "end": "45420"
  },
  {
    "text": "maps. OK. So I actually want to\nstart the discussion",
    "start": "45420",
    "end": "50450"
  },
  {
    "text": "by just asking given\nwe've defined a walking robot with some stance dynamics,\nand some sort of collision",
    "start": "50450",
    "end": "57860"
  },
  {
    "text": "dynamics, like we did\nfor the rimless wheel and the compass gait and the\nneat compass gait, quickly.",
    "start": "57860",
    "end": "63834"
  },
  {
    "text": "I just want to ask\nthe simple question. Can you find the stable\nlimits cycles or even any periodic gaits\nof the system?",
    "start": "63834",
    "end": "72130"
  },
  {
    "text": "OK. So the first question, I\nwant to find equilibrium,",
    "start": "72130",
    "end": "86180"
  },
  {
    "text": "fixed points of\nthe Poincare map. ",
    "start": "86180",
    "end": "116280"
  },
  {
    "text": "OK. So remember we talked\nabout Poincare analysis",
    "start": "116280",
    "end": "122570"
  },
  {
    "text": "of limited cycle\nbehaviors last time. And we said that this continuous\ntime, stable oscillation",
    "start": "122570",
    "end": "128720"
  },
  {
    "text": "could be nicely characterized\nas a discrete time, fixed point analysis.",
    "start": "128720",
    "end": "133730"
  },
  {
    "text": "If we're able to, for\ninstance, for the van der Pol oscillator--",
    "start": "133730",
    "end": "140180"
  },
  {
    "text": "and call that x the next dot\non the van der Pol oscillator. If we're able to design\nsome surface of section,",
    "start": "140180",
    "end": "146870"
  },
  {
    "text": "and just look at the state\nof the system every time it goes through that\nsurface of section,",
    "start": "146870",
    "end": "152060"
  },
  {
    "text": "then I can build a Poincare map. On the Poincare,\nI've got a state x,",
    "start": "152060",
    "end": "158220"
  },
  {
    "text": "which is just some potentially\nnonlinear mapping from the nth",
    "start": "158220",
    "end": "166280"
  },
  {
    "text": "crossing of this map to\nthe n plus 1 crossing of the mapping of the\nsurface of section.",
    "start": "166280",
    "end": "174640"
  },
  {
    "text": "So given I have some sort\nof bisecting surface here,",
    "start": "174640",
    "end": "182440"
  },
  {
    "text": "what I'd like to do is\nnow find the fixed points of that solution, which means\nxp star is just p of x p star.",
    "start": "182440",
    "end": "202030"
  },
  {
    "text": "Simple enough. And that should tell me\nwhere I've got a fixed point, and, therefore, where\nI have a limit cycle.",
    "start": "202030",
    "end": "210610"
  },
  {
    "text": "It doesn't actually\nimply necessarily that limit cycle is stable. If it was stable,\nthen you could imagine",
    "start": "210610",
    "end": "216550"
  },
  {
    "text": "finding the fixed\npoint, for instance, of the van der Pol oscillator\njust by simulating the van der Pol oscillator for enough time.",
    "start": "216550",
    "end": "221740"
  },
  {
    "text": "I'll eventually go and\ndo the work for you and find its way to\nthe stable fixed point if you just run\nalong long enough.",
    "start": "221740",
    "end": "227800"
  },
  {
    "text": "But if it's unstable,\nthat's not as easy to do. And for systems like\nthe compass gait, it turns out the\nbasin of attraction",
    "start": "227800",
    "end": "234610"
  },
  {
    "text": "is sort of small enough that you\ncould spend a long time trying to find initial\nconditions, which happened to simulate their way\ninto the stable fixed point.",
    "start": "234610",
    "end": "242480"
  },
  {
    "text": "OK. So you want to do better\nand get some better tools. ",
    "start": "242480",
    "end": "248170"
  },
  {
    "text": "Given what we've talked about\nin other parts of the class, if you want to define\nthe roots of this--",
    "start": "248170",
    "end": "253959"
  },
  {
    "text": "the fixed points of the\nsystem, how would you do it? I just slipped a little bit and\ngave you half the answer there.",
    "start": "253960",
    "end": "262200"
  },
  {
    "start": "262200",
    "end": "270610"
  },
  {
    "text": "How would you do it? I've got some big,\ncomplicated function p. I want to find the fixed points. ",
    "start": "270610",
    "end": "279170"
  },
  {
    "text": "Close. So I want to find the roots\nof some function of xp.",
    "start": "279170",
    "end": "285020"
  },
  {
    "text": "So it's equivalent to\nfinding the roots-- ",
    "start": "285020",
    "end": "297139"
  },
  {
    "text": "the roots of pxp\nstar minus xp star.",
    "start": "297140",
    "end": "302600"
  },
  {
    "start": "302600",
    "end": "309460"
  },
  {
    "text": "So if I can evaluate p through\nsimulation or whatever, then I can evaluate this.",
    "start": "309460",
    "end": "316202"
  },
  {
    "text": "And I could just hand it\nto MATLAB or something and say, find me the roots\nof this nonlinear function.",
    "start": "316202",
    "end": "323890"
  },
  {
    "text": "OK. And that's easy enough. We talked about\nthe Newton method for finding roots\nquickly, and we",
    "start": "323890",
    "end": "330790"
  },
  {
    "text": "talked about the constraint\nsolvers that SNOPT and the like uses.",
    "start": "330790",
    "end": "335889"
  },
  {
    "text": "OK. So in fact, we could just\nhand this to SNOPT as is, and ask it to do its thing.",
    "start": "335890",
    "end": "341530"
  },
  {
    "text": "And it would do\nnumerical derivatives and would find its way to\nsome zero of that function.",
    "start": "341530",
    "end": "348660"
  },
  {
    "text": "We're going to be a lot\nbetter shape, though, if we can compute the\ngradients of that analytically.",
    "start": "348660",
    "end": "353675"
  },
  {
    "text": "And hand it to SNOPT. It would take a\nlot fewer trials. And I want to sort of do\nthat exercise quickly,",
    "start": "353675",
    "end": "360310"
  },
  {
    "text": "computing the gradients\nof the Poincare map. Because it's going to be\nbroadly useful in control. And because it forces us\nto really think about how",
    "start": "360310",
    "end": "368440"
  },
  {
    "text": "we define that Poincare map. OK. ",
    "start": "368440",
    "end": "374860"
  },
  {
    "text": "So what we'd like\nto do, we just say it's easier if we have\npartial p partial x",
    "start": "374860",
    "end": "387520"
  },
  {
    "text": "available for the optimization. ",
    "start": "387520",
    "end": "414920"
  },
  {
    "text": "OK. Just think ahead\nfor a second here. How would you compute if I would\njust ask you on the street,",
    "start": "414920",
    "end": "422180"
  },
  {
    "text": "I've got a Poincare map, how\nwould I compute the gradients. What would you think? What would you\nstart trying to do?",
    "start": "422180",
    "end": "428620"
  },
  {
    "text": " Yeah. So where we analyze the\nperturbations before?",
    "start": "428620",
    "end": "439810"
  },
  {
    "text": "What kind of tools\ngo with that idea? ",
    "start": "439810",
    "end": "449030"
  },
  {
    "text": "Yeah. So again around any given point\nwhich defines the trajectory,",
    "start": "449030",
    "end": "454155"
  },
  {
    "text": "we could do backprop\nthrough time if we cared about\na cost function. But remember the\ntrick behind backprop through time, computing\nthose gradients,",
    "start": "454155",
    "end": "460640"
  },
  {
    "text": "the reason that was\nso efficient was because we were trying to\nfind the gradient with respect to a scalar output.",
    "start": "460640",
    "end": "466040"
  },
  {
    "text": "So backprop through\ntime did a forward pass, and then connected it to that\nscalar cost function output. And then backed up a\nminimal state vector.",
    "start": "466040",
    "end": "474520"
  },
  {
    "text": "The forward version\nwe talked about was just computing the\ngradients marching forward.",
    "start": "474520",
    "end": "481720"
  },
  {
    "text": "And I called that real time\nrecurrent learning, RTRL. And that's actually sort\nof 80% of what you need",
    "start": "481720",
    "end": "488132"
  },
  {
    "text": "to compute the gradient here. Is there something I did wrong? No. ",
    "start": "488132",
    "end": "495349"
  },
  {
    "start": "494000",
    "end": "728000"
  },
  {
    "text": "OK. So RTRL, which we've\ntalked about before and I'll say again real quickly\nhere, is a lot of the answer.",
    "start": "495350",
    "end": "503390"
  },
  {
    "text": "But there's a subtlety\nthat I want you to see. OK. So let's be a little careful\nabout how we go from xp of m",
    "start": "503390",
    "end": "514549"
  },
  {
    "text": "over to xp n plus 1. ",
    "start": "514549",
    "end": "522740"
  },
  {
    "text": "That mapping is sort\nof a complicated-- ",
    "start": "522740",
    "end": "528259"
  },
  {
    "text": "there's a transition from\nthis discrete time system to the continuous time\ndynamics, a simulation of those continuous\ntime dynamics.",
    "start": "528260",
    "end": "534769"
  },
  {
    "text": "Potentially, an\nimpact map at the end. We talked about\nthe rimless wheel doing the Poincare map\nright at the impact.",
    "start": "534770",
    "end": "541040"
  },
  {
    "text": "So let's do that carefully. So let me define xp at m\nas being equivalent to,",
    "start": "541040",
    "end": "552740"
  },
  {
    "text": "in continuous time, x,\nthe original vector-- I used a p to denote the\ndiscrete time, Poincare thing--",
    "start": "552740",
    "end": "561170"
  },
  {
    "text": "at the time of collision\nof the nth collision. ",
    "start": "561170",
    "end": "568820"
  },
  {
    "text": "In the walking case, we\nalways did our Poincare map at the same time\nas the collision. And more generally,\nyou could just",
    "start": "568820",
    "end": "575630"
  },
  {
    "text": "think of this as\nsort of a collision with a surface of section.",
    "start": "575630",
    "end": "580850"
  },
  {
    "text": "OK. In the walking case, because\nthe collision has some dynamics,",
    "start": "580850",
    "end": "586550"
  },
  {
    "text": "we want to be explicit\nabout whether it's before or after those dynamics,\nbefore or after the collision.",
    "start": "586550",
    "end": "593790"
  },
  {
    "text": "So I'm going to call\nour discrete time",
    "start": "593790",
    "end": "599480"
  },
  {
    "text": "state of our system to be\nthe state of the system immediately after I process\nthat collision dynamics.",
    "start": "599480",
    "end": "605290"
  },
  {
    "text": "So I'm going to\nput a plus there. Minus would be just\nbefore the collision. Yeah. They're both at the\nsame time, but there's",
    "start": "605290",
    "end": "610530"
  },
  {
    "text": "an instantaneous dynamics. OK. So I have this. I know how to go from xp\nto a continuous time thing.",
    "start": "610530",
    "end": "618370"
  },
  {
    "text": "And then I know how to go from\nthis to march that forward.",
    "start": "618370",
    "end": "624240"
  },
  {
    "text": "If I know when the\nnext collision is,",
    "start": "624240",
    "end": "630690"
  },
  {
    "text": "then I know that\nhad better just be x of tc plus n plus the\nintegral from tc plus n",
    "start": "630690",
    "end": "645390"
  },
  {
    "text": "to tc minus n plus 1. Let's just say my dynamics\nare x dot equals f of x.",
    "start": "645390",
    "end": "652649"
  },
  {
    "text": "I forget about control for a\nsecond just to keep it simpler. ",
    "start": "652650",
    "end": "664050"
  },
  {
    "text": "Once I go from my\ndiscrete time thing to a continuous\ntime thing, I just integrate my equations\nof motion forward",
    "start": "664050",
    "end": "671459"
  },
  {
    "text": "until I collide with the\nsurface of section again.",
    "start": "671460",
    "end": "679950"
  },
  {
    "text": "And I want tc defined somehow. I want to somehow define\nthat surface of section. ",
    "start": "679950",
    "end": "689180"
  },
  {
    "text": "And to define that surface\nof section and that collision",
    "start": "689180",
    "end": "696300"
  },
  {
    "text": "time, I'm going to define-- ",
    "start": "696300",
    "end": "708089"
  },
  {
    "text": "or more generally a collision-- as some function\nthat equals zero.",
    "start": "708090",
    "end": "722150"
  },
  {
    "start": "722150",
    "end": "730340"
  },
  {
    "start": "728000",
    "end": "939000"
  },
  {
    "text": "There's some manifold\nof states that I can describe by this\nfunction, which will",
    "start": "730340",
    "end": "737220"
  },
  {
    "text": "define my surface of section.  So what was it for the\nvan der Pol oscillator?",
    "start": "737220",
    "end": "745751"
  },
  {
    "text": " I designed my surface of section\nto be this thing going forward.",
    "start": "745751",
    "end": "753960"
  },
  {
    "text": "So what the surface\nof section is defined as some function which\njust happens to be zero here.",
    "start": "753960",
    "end": "759740"
  },
  {
    "text": " So a perfectly good candidate\nwould be like the distance,",
    "start": "759740",
    "end": "765710"
  },
  {
    "text": "the signed distance let's say,\nbetween your current state",
    "start": "765710",
    "end": "771920"
  },
  {
    "text": "and that manifold.  You OK with that? I don't think I\nsaid that very well.",
    "start": "771920",
    "end": "777960"
  },
  {
    "text": "But if I want to know-- define my surface of\nsection, just define a function of state, which\nis non-zero everywhere",
    "start": "777960",
    "end": "784040"
  },
  {
    "text": "and zero where the\nsurface I care about is. Yeah. And that's going to\nallow me, as you'll see,",
    "start": "784040",
    "end": "789623"
  },
  {
    "text": "to do things like taking\nthe gradient of knowing when I'm going to collide\nwith that surface of section.",
    "start": "789623",
    "end": "798870"
  },
  {
    "text": "So this could just\nbe for instance the signed distance\nbetween, let's say,",
    "start": "798870",
    "end": "811400"
  },
  {
    "text": "the foot of the\nrobot and the ground.",
    "start": "811400",
    "end": "820780"
  },
  {
    "text": " Yeah. ",
    "start": "820780",
    "end": "829980"
  },
  {
    "text": "So when the robot's\nfoot hits the ground, that thing's going to be zero. When it's below\nthe ground, it'll",
    "start": "829980",
    "end": "835530"
  },
  {
    "text": "be some negative distance. When it's above\nthe ground, it'll be some positive distance. OK now that's going to allow\nme then to define this.",
    "start": "835530",
    "end": "845190"
  },
  {
    "text": "At a time of\ncollision, this thing is going to add better be zero. ",
    "start": "845190",
    "end": "858098"
  },
  {
    "text": "Good so I would I'd\nwant to define it in a way that\ndoesn't include that. So I could put a--",
    "start": "858098",
    "end": "863105"
  },
  {
    "text": "so the robot's foot\ncolliding with the ground doesn't have that problem,\nif you think about it. ",
    "start": "863105",
    "end": "869129"
  },
  {
    "text": "But I do typically put something\nlike a velocity term in it. Let me just write\ndown what I would",
    "start": "869130",
    "end": "874610"
  },
  {
    "text": "use for the rimless wheel. Actually, I've got it here. So I do phi of x is just sine,\nthe sine function of theta",
    "start": "874610",
    "end": "895910"
  },
  {
    "text": "dot times theta minus\ngamma minus alpha.",
    "start": "895910",
    "end": "902217"
  },
  {
    "text": "So if you don't remember\nall those symbols, that's almost useless. But this is saying--",
    "start": "902218",
    "end": "908750"
  },
  {
    "text": "the sine of theta dot tells me\nif the robot's moving forward, then I'm going to\nlook for the collision",
    "start": "908750",
    "end": "914570"
  },
  {
    "text": "with the ground at this angle. And if the robot's\nlooking backwards, I'm going to actually\nlook at the collision with the ground at that angle.",
    "start": "914570",
    "end": "920540"
  },
  {
    "text": "And that's how I end up getting\nthe surface of section which doesn't go-- just goes in the top half\nand bottom half of the thing.",
    "start": "920540",
    "end": "930230"
  },
  {
    "text": "So you can divide\nwhatever function, but you just want\nit to be not 0 here. ",
    "start": "930230",
    "end": "940459"
  },
  {
    "start": "939000",
    "end": "1115000"
  },
  {
    "text": "OK we're getting closer to\nhaving this be well defined. In fact, this is\na very common way",
    "start": "940460",
    "end": "945589"
  },
  {
    "text": "to define a collision\nin any hybrid system.",
    "start": "945590",
    "end": "951480"
  },
  {
    "text": "So systems that are continuous\nwith discrete impacts are called hybrid systems. ",
    "start": "951480",
    "end": "957829"
  },
  {
    "text": "If you wanted to simulate\na hybrid system in MATLAB with ODE, then you\nwould very much do that by defining\na function, which",
    "start": "957830",
    "end": "964880"
  },
  {
    "text": "they call a collision function\nor a collision event function, which has got 0's here.",
    "start": "964880",
    "end": "969889"
  },
  {
    "text": "And you can hand,\nas your options to the ODE solvers in MATLAB,\nevent functions like this.",
    "start": "969890",
    "end": "974990"
  },
  {
    "text": "And they will very carefully\nwatch a crossing of that event function across 0, and pinpoint\nthe time and state at which",
    "start": "974990",
    "end": "982730"
  },
  {
    "text": "that thing goes across 0. So this is a very common\nnotation in hybrid systems",
    "start": "982730",
    "end": "987830"
  },
  {
    "text": "kind of worlds.  It turns out if we\ndo care about finding",
    "start": "987830",
    "end": "994550"
  },
  {
    "text": "this gradient of\nthe Poincare map, then this is going to be also be\nthe enabling thing which allows us to compute that gradient.",
    "start": "994550",
    "end": "1000607"
  },
  {
    "start": "1000607",
    "end": "1007839"
  },
  {
    "text": "OK So we have this x of t minus. We've gone from just\nafter a collision.",
    "start": "1007840",
    "end": "1015410"
  },
  {
    "text": "We've integrated forward\nover a continuous dynamics. Yeah. So now we're at the time\nof the new collision, tc",
    "start": "1015410",
    "end": "1022670"
  },
  {
    "text": "minus n plus 1. We're going to compute\nthe new dynamics by having",
    "start": "1022670",
    "end": "1029030"
  },
  {
    "text": "some collision function. In the rimless\nwheel, it was just the thing that took\nout some energy because",
    "start": "1029030",
    "end": "1035030"
  },
  {
    "text": "of the inelastic\ncollision with the ground. So the final piece of the\npuzzle here is x of p n",
    "start": "1035030",
    "end": "1044069"
  },
  {
    "text": "plus 1, which is equivalent\nto x of tc plus n plus 1,",
    "start": "1044069",
    "end": "1053309"
  },
  {
    "text": "which is some impact dynamics. I'll just call it big f\nof x of tc minus n plus 1.",
    "start": "1053310",
    "end": "1063720"
  },
  {
    "start": "1063720",
    "end": "1084809"
  },
  {
    "text": "In 90% of cases that\nI would care about, it's only a function of x.",
    "start": "1084810",
    "end": "1090350"
  },
  {
    "text": "I like to write in the\nmore general form in case you have things like\nmoving obstacles. Let's say.",
    "start": "1090350",
    "end": "1095730"
  },
  {
    "text": "In the surface of section\ncase for limit cycles, I think it'd be\npretty unusual to have",
    "start": "1095730",
    "end": "1101430"
  },
  {
    "text": "a direct dependence on time. But it doesn't make an our\nderivation any more complicated than if you had-- you wanted to worry\nabout collisions",
    "start": "1101430",
    "end": "1108630"
  },
  {
    "text": "with moving things or something\nlike that, you could do that. ",
    "start": "1108630",
    "end": "1115720"
  },
  {
    "start": "1115000",
    "end": "1163000"
  },
  {
    "text": "OK. So this is a sufficient recipe\nnow for simulating the Poincare map.",
    "start": "1115720",
    "end": "1120837"
  },
  {
    "text": "If I want to just\nevaluate in the simulation with the Poincare\nmap, someone says I'm at state xp on\nthe nth Poincare map,",
    "start": "1120837",
    "end": "1128640"
  },
  {
    "text": "I'm going to turn that into\nmy continuous time thing. I'm going to integrate\nforward my dynamics,",
    "start": "1128640",
    "end": "1134309"
  },
  {
    "text": "just like we always do. But I'm going to stop at a\nparticular time, tc minus,",
    "start": "1134310",
    "end": "1139380"
  },
  {
    "text": "which is defined as the\ntime when it causes phi to equals zero.",
    "start": "1139380",
    "end": "1146188"
  },
  {
    "text": "And then at that time, in\nthe case of the walking robots or any collisions,\nphysical collisions, you might have to implement the\ndiscrete collision dynamics.",
    "start": "1146188",
    "end": "1155580"
  },
  {
    "text": "And that takes you\nback to the next map. ",
    "start": "1155580",
    "end": "1164060"
  },
  {
    "start": "1163000",
    "end": "1236000"
  },
  {
    "text": "Good. So how do we take the\ngradients of that? ",
    "start": "1164060",
    "end": "1171220"
  },
  {
    "text": "It's almost trivial,\nalmost trivial. We know how to take the\ngradients off of this.",
    "start": "1171220",
    "end": "1177840"
  },
  {
    "text": " We'll do it again,\njust in one line. But we know how to\njust integrate forward",
    "start": "1177840",
    "end": "1186130"
  },
  {
    "text": "the gradient dynamics to compute\nthe long term gradients of x.",
    "start": "1186130",
    "end": "1193330"
  },
  {
    "text": " The only subtlety is that--",
    "start": "1193330",
    "end": "1199820"
  },
  {
    "text": "so when I'm computing\nthe gradient, I'm changing xp a little bit. I'm trying to do a sensitivity\nanalysis between x.",
    "start": "1199820",
    "end": "1205000"
  },
  {
    "text": "If I change xp a\nlittle bit, how is it going to change xp n plus 1? So the only subtlety is that\nwhen I change xp a little bit,",
    "start": "1205000",
    "end": "1214510"
  },
  {
    "text": "it can change my collision time. So you have to\nmake darn sure when you're taking the\ngradients, that you",
    "start": "1214510",
    "end": "1220570"
  },
  {
    "text": "capture the changes\nin collision time that are due to your change\nin the initial conditions.",
    "start": "1220570",
    "end": "1227500"
  },
  {
    "text": "Other than that it's almost\nexactly the RTRL code that we've done before.",
    "start": "1227500",
    "end": "1233330"
  },
  {
    "text": "And that turns out to be not\nso bad, so I want to do it. All right. So we can just go forward with\nthe chain rule here, so dxp",
    "start": "1233330",
    "end": "1243100"
  },
  {
    "start": "1236000",
    "end": "1603000"
  },
  {
    "text": "of n plus 1 dxp of n. ",
    "start": "1243100",
    "end": "1251700"
  },
  {
    "text": "Well that's going to be,\nfirst of all, the gradient",
    "start": "1251700",
    "end": "1257519"
  },
  {
    "text": "of this f, partial capital\nf partial x and then times",
    "start": "1257520",
    "end": "1267010"
  },
  {
    "text": "the gradient of the inside. ",
    "start": "1267010",
    "end": "1273610"
  },
  {
    "text": "The inside is defined\nby x at a certain time. So this is where that comes in.",
    "start": "1273610",
    "end": "1279880"
  },
  {
    "start": "1279880",
    "end": "1334490"
  },
  {
    "text": "OK. ",
    "start": "1334490",
    "end": "1339915"
  },
  {
    "text": "So first of all,\nlet me say we're doing we're doing\nthis linearization around some nominal trajectory. We have some xp0 that\nwe're linearizing around.",
    "start": "1339915",
    "end": "1350980"
  },
  {
    "text": "That implies we have\nan xt trajectory that we're linearizing,\naround which I'm calling x0.",
    "start": "1350980",
    "end": "1358299"
  },
  {
    "text": " And it implies that there's\nsome nominal time of impact--",
    "start": "1358300",
    "end": "1365240"
  },
  {
    "text": "time of collision that\nwe're linearizing around, which I'm calling tc0. OK.",
    "start": "1365240",
    "end": "1372669"
  },
  {
    "text": "So the obvious gradient\nhere, partial f partial x, gets us past-- gets up backwards with respect\nto the impact dynamics.",
    "start": "1372670",
    "end": "1378580"
  },
  {
    "text": "And then we have to figure\nout what the state of x is relative to the\ninitial conditions,",
    "start": "1378580",
    "end": "1384429"
  },
  {
    "text": "at time evaluated at the\noriginal impact time. ",
    "start": "1384430",
    "end": "1390250"
  },
  {
    "text": "And then the subtlety is that I\ncan also increment or decrement",
    "start": "1390250",
    "end": "1395620"
  },
  {
    "text": "the index of the integral, the\nlimits of the integral, which has the effect of adding\nthis term again modified",
    "start": "1395620",
    "end": "1406269"
  },
  {
    "text": "by that increment in the\nlimit of the integral. So I get f of x\ntimes that increment.",
    "start": "1406270",
    "end": "1416020"
  },
  {
    "text": "OK. So let's do this in a picture. ",
    "start": "1416020",
    "end": "1422590"
  },
  {
    "text": "So let's say I have some thing,\nsome manifold defined by phi",
    "start": "1422590",
    "end": "1429220"
  },
  {
    "text": "equals 0.  And I have some\nnominal trajectory",
    "start": "1429220",
    "end": "1435610"
  },
  {
    "text": "that I took to get there. ",
    "start": "1435610",
    "end": "1442799"
  },
  {
    "text": "I got to my switching surface.",
    "start": "1442800",
    "end": "1449050"
  },
  {
    "text": "I'm calling this x0 of t. ",
    "start": "1449050",
    "end": "1455140"
  },
  {
    "text": "And this one here\nis x0 of tc0 plus n,",
    "start": "1455140",
    "end": "1466030"
  },
  {
    "text": "to be entirely confusing. It just takes a lot to write.",
    "start": "1466030",
    "end": "1472450"
  },
  {
    "text": "I could write that\nequally well as xp0 of m. ",
    "start": "1472450",
    "end": "1480250"
  },
  {
    "text": "And what I'm trying\nto figure out is what's the state\ngoing to be if I'm",
    "start": "1480250",
    "end": "1486042"
  },
  {
    "text": "going to simulate my\nsystem from slightly different initial conditions\nwhen it hits the map.",
    "start": "1486042",
    "end": "1491950"
  },
  {
    "text": "So using my multi-colored\napproach here,",
    "start": "1491950",
    "end": "1497350"
  },
  {
    "text": "if I take some increment in x0\nand I simulate my new dynamics",
    "start": "1497350",
    "end": "1504850"
  },
  {
    "text": "forward, then maybe I get\nsomething pretty similar. But at time-- what my\noriginal end of time,",
    "start": "1504850",
    "end": "1512620"
  },
  {
    "text": "if I evaluated this integral\nfor the same amount of time, there's no reason to\nexpect I would get back to that switching surface.",
    "start": "1512620",
    "end": "1518473"
  },
  {
    "text": " So this is my\nmodified thing at tc0.",
    "start": "1518473",
    "end": "1523810"
  },
  {
    "text": " But what I would\nfigure out is where",
    "start": "1523810",
    "end": "1529180"
  },
  {
    "text": "it's going to be the next\ntime it hits to the surface. ",
    "start": "1529180",
    "end": "1537200"
  },
  {
    "text": "So you can do that by figuring\nout what this difference is. This is partial x of t given the\ninitial conditions at time tc0.",
    "start": "1537200",
    "end": "1551049"
  },
  {
    "text": "That's this term here,\ncorresponds to this. Yeah.",
    "start": "1551050",
    "end": "1556750"
  },
  {
    "text": "But I'd better also add in the\ndynamics of this thing pushed",
    "start": "1556750",
    "end": "1561910"
  },
  {
    "text": "forward by the amount of\ntime necessary to get me back to the surface for\nthat collision.",
    "start": "1561910",
    "end": "1570640"
  },
  {
    "text": "Yeah. STUDENT: So you never take the\nderivative of the p function? RUSS TEDRAKE: You do. I'll show you.",
    "start": "1570640",
    "end": "1575660"
  },
  {
    "text": "So in order to get\nthis, we're going have to take a derivative\nof the p function. ",
    "start": "1575660",
    "end": "1581845"
  },
  {
    "text": "I can't tell if people are bored\nby this, or intrigued by this, or don't care.",
    "start": "1581845",
    "end": "1587809"
  },
  {
    "text": "OK. Does that makes sense? Good. All right.",
    "start": "1587810",
    "end": "1593170"
  },
  {
    "text": "So how do we figure\nout the change-- the increment in time, given\nthe initial conditions? ",
    "start": "1593170",
    "end": "1604050"
  },
  {
    "start": "1603000",
    "end": "2159000"
  },
  {
    "text": "Well it's defined based\non that phi equaling 0 is the thing that defines\nthis collision surface.",
    "start": "1604050",
    "end": "1614238"
  },
  {
    "text": "So it's going to be\nused in computing that increment in time. OK. So if phi equals 0, then\nit better also be the case",
    "start": "1614238",
    "end": "1624840"
  },
  {
    "text": "that dphi dxp of n--",
    "start": "1624840",
    "end": "1632220"
  },
  {
    "text": "and let me just write this-- tc minus tc n plus 1,\nx of tc minus n plus 1.",
    "start": "1632220",
    "end": "1647670"
  },
  {
    "text": " This is just the\nderivative of that thing",
    "start": "1647670",
    "end": "1654840"
  },
  {
    "text": "based on the changes of in xp. ",
    "start": "1654840",
    "end": "1660330"
  },
  {
    "text": "I've defined that. I'm saying that even\nthough I changed xp, phi had better still be 0.",
    "start": "1660330",
    "end": "1666690"
  },
  {
    "text": "I'm integrating until\nI hit that surface. So this thing a better equal 0. ",
    "start": "1666690",
    "end": "1680240"
  },
  {
    "text": "And I can take that\nderivative with partial phi",
    "start": "1680240",
    "end": "1688610"
  },
  {
    "text": "tx, partial x-- ",
    "start": "1688610",
    "end": "1742250"
  },
  {
    "text": "t evaluated those same places. ",
    "start": "1742250",
    "end": "1770680"
  },
  {
    "text": "OK. I'll save myself from\nwriting that last equation, but obviously I can now\nsolve this for dtc dxp.",
    "start": "1770680",
    "end": "1779389"
  },
  {
    "text": " Yeah. ",
    "start": "1779390",
    "end": "1791260"
  },
  {
    "text": "Stepping back just a second,\nI'm making an increment here. I'm defining that, even\nthough I made that increment,",
    "start": "1791260",
    "end": "1798250"
  },
  {
    "text": "I still better get\nto phi equals 0. ",
    "start": "1798250",
    "end": "1804040"
  },
  {
    "text": "I can look at the change in phi\nthat could potentially occur. It's going to also depend on\nthe change in x and the change",
    "start": "1804040",
    "end": "1810460"
  },
  {
    "text": "in final time. And that allows me to solve\nfor the final time that",
    "start": "1810460",
    "end": "1815860"
  },
  {
    "text": "must have made that happen. That must have made it so I get\nback to the switching surface.",
    "start": "1815860",
    "end": "1821620"
  },
  {
    "text": " Yeah. ",
    "start": "1821620",
    "end": "1832650"
  },
  {
    "text": "OK.  That's really the\nonly thing you need",
    "start": "1832650",
    "end": "1838080"
  },
  {
    "text": "to know to make\nall of your tools we've used for loop\noptimal control, for instance, for the acrobat\nand the cart-pole work",
    "start": "1838080",
    "end": "1846900"
  },
  {
    "text": "for the walking systems. The additional advantage\nof thinking about this",
    "start": "1846900",
    "end": "1854550"
  },
  {
    "text": "now as on the Poincare\nmap is in some ways we",
    "start": "1854550",
    "end": "1861360"
  },
  {
    "text": "could do even easier control. ",
    "start": "1861360",
    "end": "1866480"
  },
  {
    "text": "OK.  So what did I just solve for?",
    "start": "1866480",
    "end": "1873260"
  },
  {
    "text": "I solved for\npartial p partial x. ",
    "start": "1873260",
    "end": "1884830"
  },
  {
    "text": "Absolutely. Please.  Yeah. Good I want questions.",
    "start": "1884830",
    "end": "1891120"
  },
  {
    "start": "1891120",
    "end": "1906840"
  },
  {
    "text": "No, not necessarily. I mean this to say,\nso it happens--",
    "start": "1906840",
    "end": "1912630"
  },
  {
    "text": "it happens that oftentimes\nat the surface of section we want to compute a discrete\ncollision dynamics, which",
    "start": "1912630",
    "end": "1921120"
  },
  {
    "text": "is just some other function\nwhich I'm calling capital f. I don't mean that to be\ndirectly related to that.",
    "start": "1921120",
    "end": "1926490"
  },
  {
    "text": "I can see that coming right\nafter the integral that's confusing. Want to I call that\nsomething different? We can call it\nsomething different.",
    "start": "1926490",
    "end": "1933950"
  },
  {
    "text": "Yeah. This is the equation-- well in the rimless\nwheel example,",
    "start": "1933950",
    "end": "1940007"
  },
  {
    "text": "it actually says I'm going\nto change coordinate systems back to where my new\nleg is on the ground.",
    "start": "1940008",
    "end": "1945400"
  },
  {
    "text": "So I'm actually going to do\na discrete change in theta, and I'm going to take away\nsome of the theta dot.",
    "start": "1945400",
    "end": "1950520"
  },
  {
    "text": "Because I've lost some energy\ninto the ground And in general, when you have collisions\nin mechanical systems,",
    "start": "1950520",
    "end": "1957750"
  },
  {
    "text": "if you model them\nas impulses, you're going to have some\nfunction like f. ",
    "start": "1957750",
    "end": "1969260"
  },
  {
    "text": "All right. ",
    "start": "1969260",
    "end": "1982720"
  },
  {
    "text": "This is equivalent, right, to\nbeing the partial p partial x, Everybody sees that?",
    "start": "1982720",
    "end": "1989150"
  },
  {
    "text": "OK. ",
    "start": "1989150",
    "end": "1998440"
  },
  {
    "text": "Not a little bit\nof change of phi. What we're changing, the\nthing we're changing, is xp.",
    "start": "1998440",
    "end": "2003500"
  },
  {
    "start": "2003500",
    "end": "2019910"
  },
  {
    "text": "STUDENT: And x0 and all\nthe nots are basically the initial trajectory we would\nhave taken without changing.",
    "start": "2019910",
    "end": "2025977"
  },
  {
    "text": "RUSS TEDRAKE: Yes, because\nwe're doing everything as an increment. We're doing an\nincremental analysis. So I want to say that\nthe new tc is going",
    "start": "2025978",
    "end": "2033330"
  },
  {
    "text": "to be tc0 plus this increment. ",
    "start": "2033330",
    "end": "2053310"
  },
  {
    "text": "I've defined the\nproblem that way, again. So even if I make a\nsmall change in xp,",
    "start": "2053310",
    "end": "2058590"
  },
  {
    "text": "I still want it to be that\na minute collision point-- I'm not going to call\nit a collision point until phi equals 0.",
    "start": "2058590",
    "end": "2065842"
  },
  {
    "text": "And if phi's going to\nequal 0 along everything, then it certainly equals\n0 on an increment in xp. ",
    "start": "2065842",
    "end": "2083649"
  },
  {
    "text": "Yeah. So it's tempting to say-- so we've got gradient based\ncalculations flying around",
    "start": "2083650",
    "end": "2089690"
  },
  {
    "text": "here. We've been doing\na lot with that. I think they're pretty powerful. It's tempting to say that\nif I have a discontinuity,",
    "start": "2089690",
    "end": "2095679"
  },
  {
    "text": "then it breaks all my\ngradient calculations it doesn't break\nthem, you just have to be more careful about them. Yeah. OK.",
    "start": "2095679",
    "end": "2100930"
  },
  {
    "text": "So we can take a gradient\nthrough the impact of a walking robot. No problem.",
    "start": "2100930",
    "end": "2105950"
  },
  {
    "text": "You just have to use this. OK. This will be the same if\nyou're doing a ping pong",
    "start": "2105950",
    "end": "2112822"
  },
  {
    "text": "robot or something like that. Anything with collisions,\na mobile robot that runs into a museum\nvisitors or something like this,",
    "start": "2112822",
    "end": "2121480"
  },
  {
    "text": "would also have an impact map. OK. So that's all you need to\nuse all those methods we",
    "start": "2121480",
    "end": "2130660"
  },
  {
    "text": "did before. OK. So if I wanted to now\noptimize the trajectory,",
    "start": "2130660",
    "end": "2136690"
  },
  {
    "text": "let's say, of my\nperiodic system-- if I had my dynamics\nand now we're back.",
    "start": "2136690",
    "end": "2142480"
  },
  {
    "text": "I did this just in the\nsimple case of f of x, but if I had f of x, u and I\nwanted to optimize u in order",
    "start": "2142480",
    "end": "2150110"
  },
  {
    "text": "to do something good on\nthe Poincare map that minimizes the cost function,\nI can take the gradients. I can do my optimization.",
    "start": "2150110",
    "end": "2156090"
  },
  {
    "text": " But this idea of actually\nchanging to a discrete time",
    "start": "2156090",
    "end": "2162140"
  },
  {
    "start": "2159000",
    "end": "2201000"
  },
  {
    "text": "system is a bit empowering too. You can always do it. It's not that you only\ndo it for walking robots.",
    "start": "2162140",
    "end": "2168890"
  },
  {
    "text": "Any continuous time\nsystem, instead of looking at it at every\nt, I could look at it",
    "start": "2168890",
    "end": "2174109"
  },
  {
    "text": "at discrete intervals of time. I could take a ball that\nI throw across the room,",
    "start": "2174110",
    "end": "2180110"
  },
  {
    "text": "has no impact whatsoever\nwell at the beginning, and then I could look at\nthe system at x of time 0,",
    "start": "2180110",
    "end": "2187010"
  },
  {
    "text": "then x at t equals 1 second,\nx of t equals 2 second. And I could build a\ndiscrete time system",
    "start": "2187010",
    "end": "2192380"
  },
  {
    "text": "for any of these\ncontinuous time systems. It's particularly nice to do\nit on these walking robots,",
    "start": "2192380",
    "end": "2200420"
  },
  {
    "text": "because, well, let's do it. So what have I just done? I've computed partial p\npartial x, which is telling me",
    "start": "2200420",
    "end": "2215720"
  },
  {
    "text": "that I'm going to have-- I'm approximating, it's\na Taylor expansion,",
    "start": "2215720",
    "end": "2223220"
  },
  {
    "text": "of my dynamics around\nsome nominal point.",
    "start": "2223220",
    "end": "2233390"
  },
  {
    "start": "2233390",
    "end": "2245390"
  },
  {
    "text": "If x nominal is a fixed\npoint, or if I just change",
    "start": "2245390",
    "end": "2251450"
  },
  {
    "text": "my coordinate systems to x\nbar is xn minus x nominal n .",
    "start": "2251450",
    "end": "2258630"
  },
  {
    "text": "And I could do the time\nvarying thing if I want, or I could just do it simply\nif xbar0 is a fixed point,",
    "start": "2258630",
    "end": "2266540"
  },
  {
    "text": "then I'm left with\nabout a model like this.",
    "start": "2266540",
    "end": "2273000"
  },
  {
    "start": "2273000",
    "end": "2280630"
  },
  {
    "text": "Careful here. p's everywhere. p n plus 1 is a xbar p of n.",
    "start": "2280630",
    "end": "2289948"
  },
  {
    "start": "2289948",
    "end": "2296430"
  },
  {
    "text": "OK. I can immediately look for\nthe stability of that model by taking the\neigenvectors, eigenvalues.",
    "start": "2296430",
    "end": "2304830"
  },
  {
    "text": "Stability conditions\nare discrete time so those eigenvalues had better\nbe bounded by 1 and negative 1.",
    "start": "2304830",
    "end": "2310020"
  },
  {
    "text": "It's not the same condition\nbut perfectly easy to analyze the stability\nof the fixed points.",
    "start": "2310020",
    "end": "2316680"
  },
  {
    "text": " So now for the--",
    "start": "2316680",
    "end": "2322650"
  },
  {
    "text": "if I just cared about\nanalyzing the passive walker, I've got ways now by\ncomputing partial p partial x,",
    "start": "2322650",
    "end": "2329910"
  },
  {
    "text": "handing it to SNOPT or something\nto solve to find the roots. I can find the fixed\npoints and it also",
    "start": "2329910",
    "end": "2335325"
  },
  {
    "text": "happens that by computing\npartial p partial x I can evaluate the stability\nof those fixed points. Yeah. ",
    "start": "2335325",
    "end": "2342760"
  },
  {
    "text": "The rimless wheels fixed\npoints, if you remember, there was two of them.",
    "start": "2342760",
    "end": "2348080"
  },
  {
    "text": "One was a rolling fixed point. One was a standing\nstill fixed point.",
    "start": "2348080",
    "end": "2353320"
  },
  {
    "text": "Both of them locally stable. The compass gait, if you\nremember the compass gait,",
    "start": "2353320",
    "end": "2360740"
  },
  {
    "text": "It also can have\nmultiple fixed points. It has one fixed point\nfor a nominal slope.",
    "start": "2360740",
    "end": "2366940"
  },
  {
    "text": "It has one fixed\npoint that's walking, and it actually has an\nunstable fixed point. ",
    "start": "2366940",
    "end": "2373890"
  },
  {
    "text": "Now the cool thing is--\nso Ambarish Goswami, who's a friend and does a lot\nof the initial confiscated",
    "start": "2373890",
    "end": "2379620"
  },
  {
    "text": "analysis. If you start inclining the\nramp steeper and steeper,",
    "start": "2379620",
    "end": "2385289"
  },
  {
    "text": "then those fixed points change\nas a function of the dynamics. Something really\ninteresting happens. It's not surprising that these\nare complicated dynamics.",
    "start": "2385290",
    "end": "2392670"
  },
  {
    "text": "But you actually at some\npoint, at some critical angle, you get a period\ndoubling bifurcation.",
    "start": "2392670",
    "end": "2398640"
  },
  {
    "text": "So you get an extra\npoint that corresponds not to a one step fixed point,\nbut to a two step fixed point.",
    "start": "2398640",
    "end": "2406730"
  },
  {
    "text": "So what does that mean? What does that\ncorrespond to physically? What is a two step?",
    "start": "2406730",
    "end": "2412812"
  },
  {
    "text": "What do I mean by two\nstep on the Poincare map? ",
    "start": "2412812",
    "end": "2419240"
  },
  {
    "text": "So at x of n plus 2 is\ngoing to equal x of n.",
    "start": "2419240",
    "end": "2425119"
  },
  {
    "text": "But x of n plus 1\ndoesn't necessarily. But every other thing\nis going to be the same. So what does that physically\ncorrespond to in the walking?",
    "start": "2425120",
    "end": "2432710"
  },
  {
    "text": "It's more of a limp I'd say. Yeah it's some asymmetric gait. It's like this.",
    "start": "2432710",
    "end": "2439220"
  },
  {
    "text": "These robots are doing\npotentially asymmetric thing. Every other footstep ends\nup landing in the same place",
    "start": "2439220",
    "end": "2446180"
  },
  {
    "text": "but not every footstep. OK. So it's actually-- there's a\nlot of interesting work just",
    "start": "2446180",
    "end": "2451400"
  },
  {
    "text": "looking at these passive\nmodels and just looking at the stability of\nthese passive gaits. OK.",
    "start": "2451400",
    "end": "2458349"
  },
  {
    "text": "I do want to say\nmake one note here, If you're looking at\nthe eigenvalues of A,",
    "start": "2458350",
    "end": "2464180"
  },
  {
    "text": "the way I've defined it.  So the trivial condition here\nis that the eigenvalues of A",
    "start": "2464180",
    "end": "2471680"
  },
  {
    "text": "had better be less than-- the magnitude had\nbetter be less than 1. ",
    "start": "2471680",
    "end": "2479807"
  },
  {
    "text": "There's different notations for\nworking on the Poincare maps. My notation is to\ndenote x of p where",
    "start": "2479808",
    "end": "2486400"
  },
  {
    "text": "x is the same size as\nthe original vector. Because that's more useful in\nsimulation that's more useful",
    "start": "2486400",
    "end": "2492430"
  },
  {
    "text": "most of our computations. But remember the\nPoincare map effectively reduces dimensionality\nby 1 And in the way",
    "start": "2492430",
    "end": "2501135"
  },
  {
    "text": "I've written it\nhere, if you just look at A that comes out of a\nstable periodic oscillation,",
    "start": "2501135",
    "end": "2506590"
  },
  {
    "text": "there's actually,\nthe way I've done it, there's always a\ntrivial eigenvalue",
    "start": "2506590",
    "end": "2512589"
  },
  {
    "text": "of 1, which doesn't degrade\nthe stability of the system.",
    "start": "2512590",
    "end": "2520900"
  },
  {
    "text": "What does that\neigenvalue correspond to? ",
    "start": "2520900",
    "end": "2528010"
  },
  {
    "text": "If I take my stable\nrimless wheel, I compute A. I take\nthe eigenvalues.",
    "start": "2528010",
    "end": "2536122"
  },
  {
    "text": "I see that the system stable. It goes to my nominal thing. This is the standard\nstability criteria",
    "start": "2536122",
    "end": "2542200"
  },
  {
    "text": "for discrete time system. But I notice that there's\nactually always a trivial-- there's one eigenvalue\nthat equals 1.",
    "start": "2542200",
    "end": "2547390"
  },
  {
    "text": " Good.",
    "start": "2547390",
    "end": "2553329"
  },
  {
    "text": "People see that? There's one direction\nthat I can push it in which it does not\nreject that disturbance,",
    "start": "2553330",
    "end": "2563911"
  },
  {
    "text": "and that's the\ndirection-- if you push it along the limit cycle. ",
    "start": "2563912",
    "end": "2570110"
  },
  {
    "text": "So there's two ways to do it. I'm sorry to make\nit complicated, but there's two ways to do it. If I were to have redefined my\ncoordinate system on the map,",
    "start": "2570110",
    "end": "2576925"
  },
  {
    "text": "I wouldn't want to call it\nx anymore, but something that reduce the dimensionality\nof the map by 1.",
    "start": "2576925",
    "end": "2582830"
  },
  {
    "text": "And then I could use\nthis condition alone.",
    "start": "2582830",
    "end": "2588080"
  },
  {
    "text": "But in the way I've done it\nin the notes and in life, I like to keep this sort of\nas the same dimension of x.",
    "start": "2588080",
    "end": "2595280"
  },
  {
    "text": "And then because I want\nlimit cycle stability, it's absolutely the case\nthat one of the eigenvalue--",
    "start": "2595280",
    "end": "2601647"
  },
  {
    "text": "there is a direction in which\nthose disturbances are not rejected. That's what I want. Yeah.",
    "start": "2601647",
    "end": "2607690"
  },
  {
    "text": "OK. So the way I describe\nit in the notes is that what you want for\nstability of the periodic gait",
    "start": "2607690",
    "end": "2615590"
  },
  {
    "text": "is you want to ignore the\nfirst eigenvalue of one. The rest of them better be--",
    "start": "2615590",
    "end": "2620595"
  },
  {
    "text": "I want it to be only\none direction that doesn't reject disturbances. You with me?",
    "start": "2620595",
    "end": "2626910"
  },
  {
    "text": "OK. ",
    "start": "2626910",
    "end": "2632210"
  },
  {
    "text": "Then there's some\nother direction that doesn't reject\ndisturbances and then I start questioning\nwhether it's stable.",
    "start": "2632210",
    "end": "2638750"
  },
  {
    "text": "I wouldn't call it stable in\nthe sense of a limit cycle stability. ",
    "start": "2638750",
    "end": "2644510"
  },
  {
    "text": "If I could push in some other\ndirection in state space and doesn't get\nrejected, then it's",
    "start": "2644510",
    "end": "2650540"
  },
  {
    "text": "not going to return\nto that orbit. There's a special direction\nalong the orbit, which",
    "start": "2650540",
    "end": "2656430"
  },
  {
    "text": "I'm allowed to push,\nand that's what defines limits of stability. But there's only one direction.",
    "start": "2656430",
    "end": "2662340"
  },
  {
    "text": " Even in high dimensional\nspace, a 50 dimensional robot",
    "start": "2662340",
    "end": "2669210"
  },
  {
    "text": "going around, there's\nonly one place that trajectory is going\nforward that I'm allowed to push",
    "start": "2669210",
    "end": "2675418"
  },
  {
    "text": "and not reject the disturbance. Every other one better converge\nfor me to call it stable.",
    "start": "2675418",
    "end": "2682200"
  },
  {
    "start": "2682200",
    "end": "2687420"
  },
  {
    "text": "OK. We did the case for the\nnon-controlled system. But we're only a\nstone's throw away",
    "start": "2687420",
    "end": "2693590"
  },
  {
    "text": "from doing the actuated version. I'm not going to write it\nout again, but let's say--",
    "start": "2693590",
    "end": "2698840"
  },
  {
    "start": "2698840",
    "end": "2715840"
  },
  {
    "text": "let me do it a\nlittle carefully just to say what I mean carefully.",
    "start": "2715840",
    "end": "2720952"
  },
  {
    "start": "2720952",
    "end": "2736230"
  },
  {
    "text": "So if I want to do\nthe controlled case,",
    "start": "2736230",
    "end": "2741250"
  },
  {
    "text": "get back to a system like this. We talked about in\nthe policy gradient--",
    "start": "2741250",
    "end": "2748250"
  },
  {
    "text": "in the policy research world-- that I could then define u to\nbe a tape of u's, or come out",
    "start": "2748250",
    "end": "2756273"
  },
  {
    "text": "of a linear feedback\ncontrol or whatever sort of parameterization. But I like to think of it\nas being some function which",
    "start": "2756273",
    "end": "2766040"
  },
  {
    "text": "depends on a parameter vector,\nalpha, and can generally depend on x and u.",
    "start": "2766040",
    "end": "2771080"
  },
  {
    "start": "2771080",
    "end": "2791292"
  },
  {
    "text": "So there's a\ndifferent way to think about control in the\ndiscrete time Poincare sense.",
    "start": "2791292",
    "end": "2799390"
  },
  {
    "text": " One way to think\nabout it is, let's",
    "start": "2799390",
    "end": "2806510"
  },
  {
    "text": "say every time I hit\na surface of section, or my foot hits the ground\nin the walking case,",
    "start": "2806510",
    "end": "2813440"
  },
  {
    "text": "why don't I change the\nparameter vector alpha OK.",
    "start": "2813440",
    "end": "2819230"
  },
  {
    "text": "But I'm going to make\ndecisions only once per step. And then I'm going to\nexecute this policy",
    "start": "2819230",
    "end": "2825850"
  },
  {
    "text": "for the duration of that cycle.",
    "start": "2825850",
    "end": "2831022"
  },
  {
    "text": "And then the next\ntime my foot hits the ground I'll make a\ndifferent decision about alpha. ",
    "start": "2831022",
    "end": "2837849"
  },
  {
    "text": "You can imagine. So let's say that pi of alpha\nand my compass gait walker, we'll use this example in\nsimulation in a second.",
    "start": "2837850",
    "end": "2845942"
  },
  {
    "text": "Let's say I have\na controller that runs during the\nlimit cycle which tries to set my interleg angle\nto be some desired value.",
    "start": "2845943",
    "end": "2855550"
  },
  {
    "text": "Every step I take the\nonly decision I make is what should that\ndesired interleg angle be for my compass gait.",
    "start": "2855550",
    "end": "2862839"
  },
  {
    "text": "But over the course\nof the cycle, I'll simulate a\nPD controller that tries to make that\ninterleg angle happen.",
    "start": "2862840",
    "end": "2869260"
  },
  {
    "text": "But my discrete time\ndecisions are just what interleg angle should I be.",
    "start": "2869260",
    "end": "2875829"
  },
  {
    "text": "Fumi has got a compass gait\nthat works with open loop trajectories that play out,\nwhere his major parameters",
    "start": "2875830",
    "end": "2883810"
  },
  {
    "text": "are the frequency and phase\nof the periodic input. It's amazingly\nstable coming out.",
    "start": "2883810",
    "end": "2889839"
  },
  {
    "text": "It's like a beautiful example\nof open loop stability. OK. So Fumi and I have been\ntalking about changing",
    "start": "2889840",
    "end": "2898000"
  },
  {
    "text": "the parameters of his open\nloop controller once per step, in order to try to regulate\nthe behavior of the system.",
    "start": "2898000",
    "end": "2908960"
  },
  {
    "text": "OK. There's lots of ways\nyou could do it. But, generally, what\nthat gives you--",
    "start": "2908960",
    "end": "2915730"
  },
  {
    "text": "if you just try to compute these\nexact same gradients again, we've computed the gradient with\nrespect to the initial state.",
    "start": "2915730",
    "end": "2923411"
  },
  {
    "text": "But we could also compute a\ngradient with respect to alpha. ",
    "start": "2923412",
    "end": "2928980"
  },
  {
    "text": "And what that could give me\nhere is a model like this. I call it B because I'm\nthinking of alpha like a control",
    "start": "2928980",
    "end": "2936180"
  },
  {
    "text": "decision. Where alpha bar of n is the\ndifference between my control",
    "start": "2936180",
    "end": "2947760"
  },
  {
    "text": "decision at n minus whatever\nthe nominal alpha is. ",
    "start": "2947760",
    "end": "2961609"
  },
  {
    "text": "OK. So let's say I find a stable\nlimit cycle where I just",
    "start": "2961610",
    "end": "2967420"
  },
  {
    "text": "command the interleg\nangle to be, I don't know, pi/4 every step.",
    "start": "2967420",
    "end": "2973450"
  },
  {
    "text": "And I can find a stable\nlimit cycle behavior. Well if someone pushes my\nrobot, computing these A and B",
    "start": "2973450",
    "end": "2981200"
  },
  {
    "text": "matrices give me\na nice, simple way to make discrete decisions to\ntry to stabilize that robot.",
    "start": "2981200",
    "end": "2986770"
  },
  {
    "text": "If I'm away from\nmy limit cycle, I can correct for those\ndifferences by just saying, OK,",
    "start": "2986770",
    "end": "2992799"
  },
  {
    "text": "next time take a bigger step\nand then take a smaller step. ",
    "start": "2992800",
    "end": "2998470"
  },
  {
    "text": "And how would I design\nthat rule to change alpha? ",
    "start": "2998470",
    "end": "3008000"
  },
  {
    "text": "How would you design it if\nyou wanted to make a feedback law an alpha here? ",
    "start": "3008000",
    "end": "3017540"
  },
  {
    "text": "This is a discrete\ntime linear system. I could just hand it to MATLAB\nand call LQR, discrete time",
    "start": "3017540",
    "end": "3023160"
  },
  {
    "text": "LQR. Give it A, B, Q, and R. It'll\ngive me back a negative k",
    "start": "3023160",
    "end": "3031250"
  },
  {
    "text": "alpha, a kx to find alpha. ",
    "start": "3031250",
    "end": "3037850"
  },
  {
    "text": "Are you with me on that? So the discrete\ntime summarization",
    "start": "3037850",
    "end": "3044210"
  },
  {
    "text": "of the dynamics in\nthis way can actually make it very natural and very\nsimple to compute controllers,",
    "start": "3044210",
    "end": "3051740"
  },
  {
    "text": "which stabilize a walking\ncycle for instance, where you make decisions once per step. ",
    "start": "3051740",
    "end": "3061870"
  },
  {
    "text": "I want to show you some work\nthat Katie Byl did in my lab,",
    "start": "3061870",
    "end": "3067260"
  },
  {
    "text": "where she did it on\nthe nonlinear case for the compass gait.",
    "start": "3067260",
    "end": "3073200"
  },
  {
    "text": "Instead of linearizing\nthis, she went right with the full\nnonlinear Poincare map.",
    "start": "3073200",
    "end": "3081900"
  },
  {
    "text": "She just did x of n plus\n1 is some Poincare map",
    "start": "3081900",
    "end": "3088829"
  },
  {
    "text": "of x of n parameterized\nby alpha, or alpha n.",
    "start": "3088830",
    "end": "3094110"
  },
  {
    "text": " And the compass gait,\nhow many dimensions?",
    "start": "3094110",
    "end": "3100790"
  },
  {
    "text": "What it is it's four\nbasic dimensions. There's two angles\nand two velocities.",
    "start": "3100790",
    "end": "3107962"
  },
  {
    "text": " And it's just about\nthe right size",
    "start": "3107962",
    "end": "3114260"
  },
  {
    "text": "that you can try discretizing\nand doing value iteration. So Katie had some\nnice work showing",
    "start": "3114260",
    "end": "3120380"
  },
  {
    "text": "that on the compass\ngait we can really get a pretty good sense of\nthe nonlinear optimal solution by just popping this\ndiscrete time control",
    "start": "3120380",
    "end": "3129140"
  },
  {
    "text": "problem into a value\niteration, doing some work,",
    "start": "3129140",
    "end": "3135049"
  },
  {
    "text": "and computing back an optical\nfeedback policy, which tells you where you should\nstep every time in order",
    "start": "3135050",
    "end": "3141289"
  },
  {
    "text": "to stabilize your gait. One better, if you add one more\ndimension to your compass gait",
    "start": "3141290",
    "end": "3147290"
  },
  {
    "text": "robot, you can actually think\nabout where it is on terrain, and make it walk\nover rough terrain.",
    "start": "3147290",
    "end": "3153040"
  },
  {
    "text": " So maybe I didn't\nspend enough time",
    "start": "3153040",
    "end": "3158490"
  },
  {
    "start": "3155000",
    "end": "3215000"
  },
  {
    "text": "in these two lectures\nconvincing you that nobody knows how to make\nrobots walk on rough terrain,",
    "start": "3158490",
    "end": "3163620"
  },
  {
    "text": "but-- oh shoot, it's going\nto take a second here. ",
    "start": "3163620",
    "end": "3172530"
  },
  {
    "text": "But you might know\nfor yourself that you don't see a lot of walking\nrobots walking on rough terrain yet. Big Dog's sort of the exception.",
    "start": "3172530",
    "end": "3180536"
  },
  {
    "text": "Big Dog seems to be pretty good. ",
    "start": "3180537",
    "end": "3187450"
  },
  {
    "text": "We've got a little dog\nupstairs in our lab, which is also pretty good I think. They're different.",
    "start": "3187450",
    "end": "3192840"
  },
  {
    "text": "Little dog got can\nsee the terrain and Big Dog can't,\nso we're supposed to be doing the long term\nresearch for Big Dog's idea.",
    "start": "3192840",
    "end": "3203040"
  },
  {
    "start": "3203040",
    "end": "3214550"
  },
  {
    "text": "Now we've had that\nentry music here. It's a very dramatic\nsimulation that follows.",
    "start": "3214550",
    "end": "3219980"
  },
  {
    "start": "3215000",
    "end": "3275000"
  },
  {
    "text": "OK. Here's Katie's work on compass\ngaits on rough terrain. A little compass gait robot.",
    "start": "3219980",
    "end": "3226130"
  },
  {
    "text": "Its making control\ndecisions every footstep. It knows where the terrain is.",
    "start": "3226130",
    "end": "3231530"
  },
  {
    "text": "Pop it into to a big\nvalue iteration solver. And this thing can walk\nover almost anything,",
    "start": "3231530",
    "end": "3239660"
  },
  {
    "text": "It applies to talk\nat the hip width the PD controller I\ndescribed, and it also puts in an impulse at the foot,\none time every post impact.",
    "start": "3239660",
    "end": "3249180"
  },
  {
    "text": "So it can push itself\nforward a little bit. So this thing it's pretty good. ",
    "start": "3249180",
    "end": "3259660"
  },
  {
    "text": "And it's just\nconverting this sort of complicated looking problem\ninto a valuation problem.",
    "start": "3259660",
    "end": "3265570"
  },
  {
    "start": "3265570",
    "end": "3270970"
  },
  {
    "text": "It doesn't think about\nthe slope of the terrain. It could. But the reason it's\ntractable, actually,",
    "start": "3270970",
    "end": "3277540"
  },
  {
    "start": "3275000",
    "end": "3395000"
  },
  {
    "text": "if you can tell by the\nfootprints, it wraps around. So we've got a limited\nstate space in x.",
    "start": "3277540",
    "end": "3282970"
  },
  {
    "text": " We ignore it. If you look real\ncarefully, I think",
    "start": "3282970",
    "end": "3289810"
  },
  {
    "text": "the leg gets a little\nshorter every time it goes. But the mass looks like\nthere's no dynamics like that. We built the robot the same\nway to have a little tweak",
    "start": "3289810",
    "end": "3297190"
  },
  {
    "text": "toe that pulls up. ",
    "start": "3297190",
    "end": "3303849"
  },
  {
    "text": "It's trivial in simulation. Yeah. How do we do it in real life? Not as well as we'd like.",
    "start": "3303850",
    "end": "3309820"
  },
  {
    "text": "Fumi has got a design\nthat's got a servo that pushes as fast as we can. We've talked about pneumatics,\nthat would be a little faster.",
    "start": "3309820",
    "end": "3318190"
  },
  {
    "text": "But we haven't run\nthat, run them yet. ",
    "start": "3318190",
    "end": "3324390"
  },
  {
    "text": "It's interesting. So she actually did the\ncase of just hip, just foot.",
    "start": "3324390",
    "end": "3330910"
  },
  {
    "text": "They both work. They both stabilize the\nwalking on moderate terrain. But together they're much\nmore stable than the other.",
    "start": "3330910",
    "end": "3337700"
  },
  {
    "text": "The thing with the hip\none, it always gets in these configurations like\nthis and falls backwards.",
    "start": "3337700",
    "end": "3343060"
  },
  {
    "text": "You need a little bit of\nfoot energy to get over. And the one that\npushes off of the toe keeps putting its foot\ndown in the wrong place.",
    "start": "3343060",
    "end": "3349098"
  },
  {
    "text": " There's one thing that Katie's\nsimulations had problems with.",
    "start": "3349098",
    "end": "3355420"
  },
  {
    "text": "You guys in my lab know. But there's a pretty\nsort of very visual--",
    "start": "3355420",
    "end": "3361280"
  },
  {
    "text": "I should find the video maybe. But there's a very visual\nthing that we had problems. What was the problem\nI always talked about",
    "start": "3361280",
    "end": "3367600"
  },
  {
    "text": "with valuation iteration? Even if you could\npile the space, you got to watch\nout for something.",
    "start": "3367600",
    "end": "3373540"
  },
  {
    "text": "Yeah. Your discretization, if\nthere's hard discontinuities, you can do things wrong\nin your discretization.",
    "start": "3373540",
    "end": "3381670"
  },
  {
    "text": "Your discrimination can\nbe a poor approximation of your continuous thing. So Katie stimulated a bunch of\nterrain that had holes in it",
    "start": "3381670",
    "end": "3388779"
  },
  {
    "text": "like cliffs. And had these\nbeautiful policies that would choose their\nstep across Karate Kid",
    "start": "3388780",
    "end": "3396280"
  },
  {
    "start": "3395000",
    "end": "3515000"
  },
  {
    "text": "sort of style terrain. But every once in\na while, the mesh points would land\nin the wrong place",
    "start": "3396280",
    "end": "3403205"
  },
  {
    "text": "and the stupid thing\nwould put its foot right in the middle of the\nhole, right down into the ether.",
    "start": "3403205",
    "end": "3409840"
  },
  {
    "text": "This is sort of the textbook\ncase of value iteration resolution problems. ",
    "start": "3409840",
    "end": "3417260"
  },
  {
    "text": "OK. So walking isn't any harder\nthan any other robot really.",
    "start": "3417260",
    "end": "3422960"
  },
  {
    "text": "There's mechanical challenges. You have to carry\nyour actuators. You're typically dealing with\nactuator saturations a lot.",
    "start": "3422960",
    "end": "3428590"
  },
  {
    "text": "So it's definitely\nunderactuated. I don't mean to say it's\neasy, because I think the acrobats are rich and hard.",
    "start": "3428590",
    "end": "3434079"
  },
  {
    "text": "But it's not\nsignificantly harder than the acrobat and this is,\nremember, the acrobat dynamics. ",
    "start": "3434080",
    "end": "3440472"
  },
  {
    "text": "The only two differences are\nthat you have to worry about-- you tend to think about Poincare\nmaps to define stability,",
    "start": "3440472",
    "end": "3445602"
  },
  {
    "text": "and you have to worry about\nthese collision dynamics.  You get 100 degree--",
    "start": "3445602",
    "end": "3451450"
  },
  {
    "text": "I'm not showing you 100 degree\nof freedom robot here walking along but you could. I mean we're getting there.",
    "start": "3451450",
    "end": "3457570"
  },
  {
    "text": "So the dork hall type\nmethods that we're using with the LTV linearization. We think that's going to work\npretty nicely for a little dog",
    "start": "3457570",
    "end": "3464770"
  },
  {
    "text": "and that's 36 dimensional,\nwalking on very rough terrain. ",
    "start": "3464770",
    "end": "3473170"
  },
  {
    "text": "So there's been a lot\nof work in the control of this, sort of outside\nthe optimal control",
    "start": "3473170",
    "end": "3479019"
  },
  {
    "text": "view of the world. I'd be doing you a disservice\nif I didn't tell you a little bit of it.",
    "start": "3479020",
    "end": "3485020"
  },
  {
    "start": "3485020",
    "end": "3498347"
  },
  {
    "text": "Make sure I said\neverything I wanted to say. ",
    "start": "3498347",
    "end": "3505527"
  },
  {
    "text": "There was one other\npoint I wanted to make.  There's something you\ncan do in discrete time",
    "start": "3505528",
    "end": "3514940"
  },
  {
    "text": "that you can't really\ndo in continuous time when it comes to\nstabilizing controllers.",
    "start": "3514940",
    "end": "3521070"
  },
  {
    "start": "3515000",
    "end": "3599000"
  },
  {
    "text": " Anybody get it from just that? I said it very\nobtusely, but yeah",
    "start": "3521070",
    "end": "3528849"
  },
  {
    "text": "Yeah. Good. So in discrete\ntime, I can actually",
    "start": "3528850",
    "end": "3534030"
  },
  {
    "text": "find an action,\npotentially, depends on B. I could find an\naction which would actually",
    "start": "3534030",
    "end": "3539369"
  },
  {
    "text": "drive me to zero, in my\naerodynamics, in a single step.",
    "start": "3539370",
    "end": "3545940"
  },
  {
    "text": "In continuous time,\ngetting there arbitrarily fast means setting your\ngains arbitrarily high.",
    "start": "3545940",
    "end": "3552089"
  },
  {
    "text": "In discrete time,\nthat's not the case. I can set a finite\nmagnitude gain",
    "start": "3552090",
    "end": "3557970"
  },
  {
    "text": "that will get me to\nzero in a single step.",
    "start": "3557970",
    "end": "3563063"
  },
  {
    "text": "So that's called\ndeadbeat control. ",
    "start": "3563063",
    "end": "3572740"
  },
  {
    "text": "It's a very beautiful goal\nto have for a walking robot. if I get perturbed by the\nterrain or by someone hitting",
    "start": "3572740",
    "end": "3580390"
  },
  {
    "text": "me with a baseball\nbat or whatever-- you should see the videos\nthat the robotics people make of walking robot-- ",
    "start": "3580390",
    "end": "3587860"
  },
  {
    "text": "then a very beautiful\ngoal is to say that before my next\nfoot hits the ground,",
    "start": "3587860",
    "end": "3593589"
  },
  {
    "text": "I'm going to cancel out all\nthe error for my disturbance. ",
    "start": "3593590",
    "end": "3600190"
  },
  {
    "text": "Certainly you can do that here\nif you have no limits on alpha and if B is full row rank.",
    "start": "3600190",
    "end": "3608920"
  },
  {
    "text": "Then it's algebraic\nequation to compute what alpha n had better be.",
    "start": "3608920",
    "end": "3616720"
  },
  {
    "text": "I could just say, if you want\nsomething that could basically look like feedback\nlinearization, I could just cancel that out.",
    "start": "3616720",
    "end": "3622698"
  },
  {
    "text": " Sometimes you can't\ndo it, but I want",
    "start": "3622698",
    "end": "3628500"
  },
  {
    "text": "you to know that's a\nbeautiful goal for control. We'll see in the\nrunning bit, we'll",
    "start": "3628500",
    "end": "3634770"
  },
  {
    "text": "see some running models where\nyou can do that B control. The compass gait, if you had\nthe right parameterization,",
    "start": "3634770",
    "end": "3641790"
  },
  {
    "text": "you could do compass\ngait control. John and I were debating\nthis last night. I don't think that the\nPD controller is probably",
    "start": "3641790",
    "end": "3647340"
  },
  {
    "text": "going to be enough to\ngive you that B control. Because it won't simultaneously\ntake out your energy",
    "start": "3647340",
    "end": "3653160"
  },
  {
    "text": "and get your foot\nin the right place. But it's possible. You could actually\ndo the analysis",
    "start": "3653160",
    "end": "3658417"
  },
  {
    "text": "and answer that question.  OK.",
    "start": "3658417",
    "end": "3663738"
  },
  {
    "text": "So thinking about these things\nas discrete time control problems is pretty beautiful.",
    "start": "3663738",
    "end": "3669240"
  },
  {
    "text": "More generally, though, we can\ndo control through the swing",
    "start": "3669240",
    "end": "3675060"
  },
  {
    "text": "phase, in this case. Or between the\nsurfaces of section in a general limited cycle case.",
    "start": "3675060",
    "end": "3682380"
  },
  {
    "text": "And if you want to\ndo that, you could do you could do a shooting method. You could do deer call. Optimize some trajectory.",
    "start": "3682380",
    "end": "3688200"
  },
  {
    "text": "You have to be careful\nbecause the time can change during your optimization, the\nduration of your trajectory, but you could do that.",
    "start": "3688200",
    "end": "3693617"
  },
  {
    "text": " And then optimize it. But just like we showed in the\nacrobat and cart-pole case,",
    "start": "3693617",
    "end": "3702360"
  },
  {
    "text": "people have come up with more-- I don't want to say problem\nspecific-- but more sort",
    "start": "3702360",
    "end": "3707550"
  },
  {
    "text": "of problem specific solutions.",
    "start": "3707550",
    "end": "3712650"
  },
  {
    "text": "So Goswami, Ambarish\nGoswami did some nice work.",
    "start": "3712650",
    "end": "3718799"
  },
  {
    "text": " Can anybody guess?",
    "start": "3718800",
    "end": "3724650"
  },
  {
    "text": "What's one of the dominant\nnonlinear control ideas we talked about for the\nacrobat and cart-pole.",
    "start": "3724650",
    "end": "3732060"
  },
  {
    "text": "PFL, but that led\nto energy shaping. So Goswami did a nice controller\nbased on energy shaping.",
    "start": "3732060",
    "end": "3740040"
  },
  {
    "start": "3740040",
    "end": "3749950"
  },
  {
    "text": "And he showed that you take\nyour nominal confiscate with its fragile little\nbasin of attraction,",
    "start": "3749950",
    "end": "3756309"
  },
  {
    "text": "which he computed by sampling. Pushing the system\nuntil it fell down.",
    "start": "3756310",
    "end": "3761782"
  },
  {
    "text": "And he showed that with an\nenergy shaping controller, which is derived\nexactly the same way we derive the other\none, but I can",
    "start": "3761782",
    "end": "3768080"
  },
  {
    "text": "regulate the energy of\nthe system to put me back on the energetic orbit. Because this thing\nis with zero torque.",
    "start": "3768080",
    "end": "3774880"
  },
  {
    "text": "It's passive in the swing phase. So I can just drive\nmyself up to the place",
    "start": "3774880",
    "end": "3780790"
  },
  {
    "text": "where I will passively fall\ndown and hit the right place on my Poincare map.",
    "start": "3780790",
    "end": "3787509"
  },
  {
    "text": "And that worked locally. That's a good idea. ",
    "start": "3787510",
    "end": "3796050"
  },
  {
    "text": "There's another\nbunch of work that's become popular in our world.",
    "start": "3796050",
    "end": "3801720"
  },
  {
    "text": "Eric Westervelt and Jesse\nGrizzelle and these guys",
    "start": "3801720",
    "end": "3814970"
  },
  {
    "text": "they talk about\nhybrid zero dynamics. ",
    "start": "3814970",
    "end": "3830830"
  },
  {
    "text": "And more recently,\nour friend who's going to join the lab,\nthe advisor in Manchester.",
    "start": "3830830",
    "end": "3842230"
  },
  {
    "text": " These guys have been doing\nsort of similar work using more",
    "start": "3842230",
    "end": "3848079"
  },
  {
    "text": "optimal control derivations\nand similar hybrid zero dynamic kind of methods.",
    "start": "3848080",
    "end": "3855490"
  },
  {
    "text": "Let me just cartoon the idea.  It's sort of similar\nto the PFL idea.",
    "start": "3855490",
    "end": "3863170"
  },
  {
    "text": "But these hybrid\nzero dynamic methods are one of the places\nwhere we actually have proofs of convergence.",
    "start": "3863170",
    "end": "3870490"
  },
  {
    "start": "3870490",
    "end": "3876090"
  },
  {
    "text": "And the way they do it, like in\npartial feedback linearization,",
    "start": "3876090",
    "end": "3881190"
  },
  {
    "text": "is that when the system is-- let me say it carefully here.",
    "start": "3881190",
    "end": "3888750"
  },
  {
    "text": "They find some\ndesired trajectory of the robot, which has a\nperiodic gait that they like.",
    "start": "3888750",
    "end": "3894450"
  },
  {
    "text": "It has actuated\njoints that follow this trajectory and\npassive joints that follow this trajectory.",
    "start": "3894450",
    "end": "3899640"
  },
  {
    "text": "If you do a collocated\nPFL, if you just regulate the dynamics\nof your system,",
    "start": "3899640",
    "end": "3906480"
  },
  {
    "text": "you're actuated joints to\nfollow that trajectory, then the passive one pretty\nmuch has to do the same,",
    "start": "3906480",
    "end": "3912420"
  },
  {
    "text": "has to do the right thing. OK. So the results that these guys\non the hybrid zero dynamics--",
    "start": "3912420",
    "end": "3919770"
  },
  {
    "text": "they talk at the zero dynamics\nof the resulting output dynamics you drive\nto drive to zero. Yeah.",
    "start": "3919770",
    "end": "3925710"
  },
  {
    "text": "When your PFL controller\nhas done its job-- and has it doesn't\nhave to be a PFL. It could be a speed controller.",
    "start": "3925710",
    "end": "3932293"
  },
  {
    "text": "When you've driven all your\nactuated joints to the desired trajectory, if you parameterized\nthat trajectory off",
    "start": "3932293",
    "end": "3938820"
  },
  {
    "text": "let's say the ankle angle,\nthen your whole big complicated bipedal robot, five\nlink ten link whatever.",
    "start": "3938820",
    "end": "3946380"
  },
  {
    "text": "Looks like a remote wheel\nrolling around the stance foot.",
    "start": "3946380",
    "end": "3952769"
  },
  {
    "text": "And that's a beautiful idea. So maybe the bigger\nidea here is actually. ",
    "start": "3952770",
    "end": "3973302"
  },
  {
    "text": "A lot of the walking\nrobots you can think of as having a lot of\nactuators at all the joints",
    "start": "3973302",
    "end": "3990290"
  },
  {
    "text": "and just having\none passive joint. So a pretty good idea\nfor a walking robot",
    "start": "3990290",
    "end": "3998569"
  },
  {
    "text": "is to just drive all of the\nactuated joints as a function of the passive joint.",
    "start": "3998570",
    "end": "4004990"
  },
  {
    "text": "And that gives you a dynamical\nsystem in one variable. It's a more complicated\ndynamical system",
    "start": "4004990",
    "end": "4011170"
  },
  {
    "text": "than the rimless wheel. It's one that you can\ndesign but the analysis reverts to basically the\nrimless wheel type analysis.",
    "start": "4011170",
    "end": "4019510"
  },
  {
    "text": "OK. So this hybrid zero dynamics\nis roughly that idea. ",
    "start": "4019510",
    "end": "4054270"
  },
  {
    "text": "And then you can sort\nof do a rimless wheel. ",
    "start": "4054270",
    "end": "4081070"
  },
  {
    "text": "I have had this debate with\nEric Westervelt many times. Yeah. I think it is.",
    "start": "4081070",
    "end": "4086980"
  },
  {
    "text": "Yeah. That's a good idea. Just like PFL is great. We should use it\nfor a little while",
    "start": "4086980",
    "end": "4091998"
  },
  {
    "text": "until we figure out\nsomething better to do. I think they'd admit that too. Their stability\nguarantees are when",
    "start": "4091998",
    "end": "4097028"
  },
  {
    "text": "you've driven the\naerodynamics to zero. You squash the aerodynamics. And you have to have gains that\nare high enough to squash those",
    "start": "4097029",
    "end": "4104200"
  },
  {
    "text": "arbitrarily fast. Now the bigger idea\nI think is that I",
    "start": "4104200",
    "end": "4111729"
  },
  {
    "text": "mean you can do sort\nof softer feedback, and get some of the same\ntype of performance,",
    "start": "4111729",
    "end": "4116770"
  },
  {
    "text": "but the theory does\ndepend on squashing. ",
    "start": "4116770",
    "end": "4121913"
  },
  {
    "text": "So all this stuff I\ntalked about I think is sort of the right way to\nthink about walking control.",
    "start": "4121913",
    "end": "4127028"
  },
  {
    "text": "It's a small fraction\nof what people actually do in the walking robot world.",
    "start": "4127029",
    "end": "4132429"
  },
  {
    "text": "By far, the dominant approach is\nthese Honda ASIMO type robots. Anybody see HRP4C yesterday.",
    "start": "4132430",
    "end": "4143352"
  },
  {
    "text": "What does it look like? ",
    "start": "4143352",
    "end": "4149830"
  },
  {
    "text": "It looks like a model. They actually videotaped\na Japanese model walking in high\nheels, and they built",
    "start": "4149830",
    "end": "4157989"
  },
  {
    "text": "one of their newest that's\nthe AIST robot by Kawada",
    "start": "4157990",
    "end": "4163240"
  },
  {
    "text": "Industries. It's got now sort of a\nfemale Android head on it. And it works.",
    "start": "4163240",
    "end": "4168649"
  },
  {
    "text": "I mean, I just saw a few videos. But it looks pretty good. The shapes are more\nfeminine and the gait",
    "start": "4168649",
    "end": "4177463"
  },
  {
    "text": "was a little bit looser.  But most of the walking\nrobots out there today,",
    "start": "4177464",
    "end": "4183849"
  },
  {
    "text": "most of the successful ones,\nare all pretty similar to ASIMO. And ASIMO doesn't do any\nof this stuff really.",
    "start": "4183850",
    "end": "4192729"
  },
  {
    "text": "ASIMO plays one trick. I can say it is sort\nof in a single line. They try to keep one\nfoot flat on the ground,",
    "start": "4192729",
    "end": "4202310"
  },
  {
    "text": "and assume that foot is\nbolted to the ground. And they pretend they're\nfully actuated system",
    "start": "4202310",
    "end": "4207430"
  },
  {
    "text": "and do their\ntrajectory tracking. And when they're doing\ntheir trajectory tracking, they have to make darn sure\nthat foot doesn't roll off",
    "start": "4207430",
    "end": "4214550"
  },
  {
    "text": "the ground. But if you watch\nthe videos of ASIMO, you're going to\nsee it's always got one foot flat on the ground.",
    "start": "4214550",
    "end": "4219950"
  },
  {
    "text": "Running is a small excursion. They just give up on\nstability for a little bit, until they go back\nto the place where",
    "start": "4219950",
    "end": "4226340"
  },
  {
    "text": "they can catch on the ground. OK. That's relatively unappealing\ncompared to these I think,",
    "start": "4226340",
    "end": "4231650"
  },
  {
    "text": "because it uses a ton of energy. I told you in the first lecture\nit uses 20 times as much energy as a human when it walks.",
    "start": "4231650",
    "end": "4237477"
  },
  {
    "text": "People have used\nthese type of methods to make a robot that uses the\nsame kind of energy economy as a human.",
    "start": "4237477",
    "end": "4243617"
  },
  {
    "text": "And it's just walking with\nits foot flat on the ground. It doesn't work on\nrough terrain It's not walking as fast as we are.",
    "start": "4243618",
    "end": "4249440"
  },
  {
    "text": "All the energetics\nof heel strike, you have to do all that\nwith active control because you can't sort of\nreduce your collision if you're",
    "start": "4249440",
    "end": "4255890"
  },
  {
    "text": "going to land with a flat\nfoot, so this is a better way to do things.",
    "start": "4255890",
    "end": "4262190"
  },
  {
    "text": "Excellent That's a quick preview\ninto the world of walking. And really the key\nmessage here is",
    "start": "4262190",
    "end": "4267320"
  },
  {
    "text": "it only takes one or two\nmore tools to turn it back into the acrobat problem. OK.",
    "start": "4267320",
    "end": "4272700"
  },
  {
    "text": " Midterm on Thursday. If you have questions\nabout that, ask John.",
    "start": "4272700",
    "end": "4278472"
  },
  {
    "text": "Ask me. If I do disappear, I apologize. But it's for a good reason.",
    "start": "4278472",
    "end": "4284480"
  },
  {
    "text": "And we'll have a\ngood spring break. And I'll see you soon.",
    "start": "4284480",
    "end": "4289500"
  },
  {
    "start": "4289500",
    "end": "4290000"
  }
]