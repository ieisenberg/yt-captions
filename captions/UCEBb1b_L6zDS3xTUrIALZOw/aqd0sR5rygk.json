[
  {
    "start": "0",
    "end": "21000"
  },
  {
    "text": " The following content is\nprovided under a Creative Commons license. Your support will help MIT\nOpenCourseWare continue to",
    "start": "0",
    "end": "6910"
  },
  {
    "text": "offer high-quality educational\nresources for free. To make a donation or view\nadditional materials from",
    "start": "6910",
    "end": "13460"
  },
  {
    "text": "hundreds of MIT courses, visit\nMIT OpenCourseWare at",
    "start": "13460",
    "end": "19290"
  },
  {
    "text": "ocw.mit.edu. PROFESSOR: Good morning,\neverybody. ",
    "start": "19290",
    "end": "25070"
  },
  {
    "start": "21000",
    "end": "35000"
  },
  {
    "text": "We're on the home\nstretch here. Only two more lectures, no more\nrecitations, and a small",
    "start": "25070",
    "end": "31130"
  },
  {
    "text": "matter of a final exam.  I should remind you the\nfinal exam is on",
    "start": "31130",
    "end": "38590"
  },
  {
    "start": "35000",
    "end": "357000"
  },
  {
    "text": "Monday of finals week. And it will be a two-hour exam,\nnot a three-hour exam.",
    "start": "38590",
    "end": "46379"
  },
  {
    "text": "Same kind of format as on\nthe first two quizzes. Open book, open notes.",
    "start": "46380",
    "end": "53400"
  },
  {
    "text": "The difference is that we'll be\ngiving you some code, which we'll be posting today, which\nwe're going to ask you to",
    "start": "53400",
    "end": "61449"
  },
  {
    "text": "study in preparation\nfor the exam. And then we'll ask you some\nquestions about that code.",
    "start": "61450",
    "end": "69100"
  },
  {
    "text": "For example, ask you to make\na small modification to it on the exam.",
    "start": "69100",
    "end": "75060"
  },
  {
    "text": "And in fact, today's lecture,\njust as a special incentive to pay attention, will be about\nthings related to the code",
    "start": "75060",
    "end": "82890"
  },
  {
    "text": "we'll be posting for you\nto study for the exam. It covers one final class of\nsimulation that we haven't",
    "start": "82890",
    "end": "91200"
  },
  {
    "text": "looked at at all this term, but\nI think is important to at least know a little\nbit about it.",
    "start": "91200",
    "end": "97810"
  },
  {
    "text": "And those are queueing\nnetwork simulations. ",
    "start": "97810",
    "end": "114380"
  },
  {
    "text": "From the time of conception\nuntil death, human beings find themselves all too often\nwaiting for things--",
    "start": "114380",
    "end": "122570"
  },
  {
    "text": "waiting for events, waiting for\nconditions, waiting for TAs, et cetera.",
    "start": "122570",
    "end": "128869"
  },
  {
    "text": "Queuing networks give us a\nformal way to study systems in",
    "start": "128870",
    "end": "134690"
  },
  {
    "text": "which waiting plays a\nfundamental role. Some typical examples might\nbe in a supermarket,",
    "start": "134690",
    "end": "142350"
  },
  {
    "text": "waiting to check out. You get in a queue,\nwait your turn. Computers all the time --",
    "start": "142350",
    "end": "150450"
  },
  {
    "text": "you may wonder sometimes why\nwhen you hit your computer, and ask it to do something,\nsometimes it's fast,",
    "start": "150450",
    "end": "156110"
  },
  {
    "text": "sometimes it's slow. Well, it's because there are\ntasks running in the background that are ahead of\nyour task in the queue, and",
    "start": "156110",
    "end": "163320"
  },
  {
    "text": "you're waiting for\nthem to finish. Computer networks, waiting for\narrivals and things like that.",
    "start": "163320",
    "end": "170980"
  },
  {
    "text": "If you look at the internal\nstructure of the internet, as, say, an email hops from hither\nto yon between two sites,",
    "start": "170980",
    "end": "179069"
  },
  {
    "text": "along the way, it enters queues\nand waits for its turn to get forwarded to\nthe next hop.",
    "start": "179070",
    "end": "184205"
  },
  {
    "text": " A few of you have experienced\nthis when you go to office",
    "start": "184205",
    "end": "189640"
  },
  {
    "text": "hours, where there's a\nwait for a TA, and you get in a queue.",
    "start": "189640",
    "end": "195470"
  },
  {
    "text": "Public transit, analysis\nof highway systems. All of these things depend upon\nunderstanding queues to",
    "start": "195470",
    "end": "204700"
  },
  {
    "text": "understand how they work. ",
    "start": "204700",
    "end": "209800"
  },
  {
    "text": "You might wonder why\nwe have queues. The answer is pretty simple,\nin that it typically makes",
    "start": "209800",
    "end": "217250"
  },
  {
    "text": "economic sense. ",
    "start": "217250",
    "end": "223530"
  },
  {
    "text": "As we'll see in our analysis,\nwhen resources are limited--",
    "start": "223530",
    "end": "228950"
  },
  {
    "text": "particularly, say, servers-- it makes economic sense to have\njobs line up for service.",
    "start": "228950",
    "end": "237300"
  },
  {
    "text": "So if you think about a\nsupermarket, ideally, when you go to check out, you'd like\nthere to be no line.",
    "start": "237300",
    "end": "243160"
  },
  {
    "text": "But think about how many cash\nregisters they would need to ensure that all the time\nwhen someone was ready,",
    "start": "243160",
    "end": "250320"
  },
  {
    "text": "there was no line. And the problem is if\nthey did that, they would have idle servers.",
    "start": "250320",
    "end": "256959"
  },
  {
    "text": "And so they would not get very\ngood resource utilization of the people they would be hiring\nto do the checkout.",
    "start": "256959",
    "end": "265390"
  },
  {
    "text": "In designing a system\nwith queues-- and that's what the simulations\nhelp us do--",
    "start": "265390",
    "end": "271530"
  },
  {
    "text": "we're aiming for a balance\nbetween, essentially, customer",
    "start": "271530",
    "end": "283630"
  },
  {
    "text": "service and resource\nutilization.",
    "start": "283630",
    "end": "290920"
  },
  {
    "start": "290920",
    "end": "302630"
  },
  {
    "text": "The organization paying for the\nresources would like them to be working a 100% of the\ntime at full capacity, so",
    "start": "302630",
    "end": "310440"
  },
  {
    "text": "there's no wasted expense. On the other hand, it's easy\nto show in any reasonable",
    "start": "310440",
    "end": "315820"
  },
  {
    "text": "system that if you have a 100%\nresource utilization, you're going to be providing terrible\ncustomer service.",
    "start": "315820",
    "end": "323810"
  },
  {
    "text": "There is always a need for\nexcess capacity in a complex system in order to\nprovide adequate",
    "start": "323810",
    "end": "330680"
  },
  {
    "text": "service most of the time. And that's because, as we'll\nsee, the demand for service is",
    "start": "330680",
    "end": "336200"
  },
  {
    "text": "probabilistic and\nunpredictable.  And in order to absorb bursts\nof activity, you need excess",
    "start": "336200",
    "end": "346890"
  },
  {
    "text": "capacity, because a lot\nof the time, you don't see those bursts.",
    "start": "346890",
    "end": "352780"
  },
  {
    "text": "All right. All that by way of\nintroduction. If we think about how to model\na system with queues, they're",
    "start": "352780",
    "end": "362320"
  },
  {
    "text": "are all modeled essentially\nthe same way. You start with some jobs,\nwork to be done.",
    "start": "362320",
    "end": "373320"
  },
  {
    "text": "Those jobs enter a queue. ",
    "start": "373320",
    "end": "383229"
  },
  {
    "text": "They wait around for a while. They leave the queue one at\na time and enter a server.",
    "start": "383230",
    "end": "391020"
  },
  {
    "text": " And then they depart. ",
    "start": "391020",
    "end": "400720"
  },
  {
    "text": "So that's what it looks like. And of course, it can be much\nmore complicated than this.",
    "start": "400720",
    "end": "405740"
  },
  {
    "text": "You can have multiple\nstreams of jobs. You can have multiple queues. You can have multiple servers.",
    "start": "405740",
    "end": "411910"
  },
  {
    "text": "But when we build an analysis\nof it, when we build a simulation, we typically break\nit down into components that",
    "start": "411910",
    "end": "418610"
  },
  {
    "text": "look exactly like this and\nuse that as the key.",
    "start": "418610",
    "end": "423789"
  },
  {
    "text": "As we do this, we have\nto look at a number of different things. ",
    "start": "423790",
    "end": "431370"
  },
  {
    "text": "We start with the\narrival process. ",
    "start": "431370",
    "end": "438979"
  },
  {
    "text": "How do the jobs appear? And there are lots of questions\nwe can ask.",
    "start": "438980",
    "end": "445370"
  },
  {
    "text": "Do they arrive singly,\nor in groups? If they arrive in groups, we say\nthat it's a batch process.",
    "start": "445370",
    "end": "453635"
  },
  {
    "text": " So if you think about a service\nfor, say, processing",
    "start": "453635",
    "end": "460780"
  },
  {
    "text": "students at MIT into the\ndatabase, they typically arrive in a big batch in\nSeptember, rather than",
    "start": "460780",
    "end": "467770"
  },
  {
    "text": "straggling in one at a time.  We have to ask, related to\nthat, is how arrivals are",
    "start": "467770",
    "end": "478910"
  },
  {
    "text": "distributed in time. ",
    "start": "478910",
    "end": "484300"
  },
  {
    "text": "Assume for the moment that\narrivals are one at a time-- for example, automobiles\nentering a highway.",
    "start": "484300",
    "end": "491390"
  },
  {
    "text": " Do they come uniformly, at\nevenly-spaced intervals?",
    "start": "491390",
    "end": "500240"
  },
  {
    "text": "Do they come at random times? If random, is there a time of\nday when we see most of them?",
    "start": "500240",
    "end": "507160"
  },
  {
    "text": "We typically model all of\nthat in what's called an",
    "start": "507160",
    "end": "512700"
  },
  {
    "text": "inter-arrival time\ndistribution.",
    "start": "512700",
    "end": "518159"
  },
  {
    "start": "518159",
    "end": "530940"
  },
  {
    "text": "The simplest process is where\nthese things do arrive at regular intervals, constant\nintervals.",
    "start": "530940",
    "end": "539120"
  },
  {
    "text": "We hardly ever see this\nin the real world. Most of the time, we see\nsomething that looks much like",
    "start": "539120",
    "end": "549270"
  },
  {
    "start": "547000",
    "end": "588000"
  },
  {
    "text": "our old friend, the\nPoisson process. ",
    "start": "549270",
    "end": "561110"
  },
  {
    "text": "Things arrive at a\nrandom interval. But they are typically\nexponentially distributed.",
    "start": "561110",
    "end": "568505"
  },
  {
    "text": " We've seen this before. ",
    "start": "568505",
    "end": "577690"
  },
  {
    "text": "Ok. It is, as you will recall,\nmemoryless. It is, as you will recall,\ndescribed by a single",
    "start": "577690",
    "end": "583220"
  },
  {
    "text": "parameter, the average\narrival rate. ",
    "start": "583220",
    "end": "589260"
  },
  {
    "text": "We can look at it just briefly\nto see what it looks like,",
    "start": "589260",
    "end": "598310"
  },
  {
    "text": "just to remind ourselves,\nreally. ",
    "start": "598310",
    "end": "605220"
  },
  {
    "text": "So I've just a small piece of\ncode, where I've given the mean arrival.",
    "start": "605220",
    "end": "610440"
  },
  {
    "text": "And then I'm going to just have\n2000 things arrive at Poisson intervals.",
    "start": "610440",
    "end": "615970"
  },
  {
    "start": "615970",
    "end": "637254"
  },
  {
    "text": "Why is it not running?  I cleverly rebooted before I got\nhere, so it shouldn't have",
    "start": "637255",
    "end": "645330"
  },
  {
    "text": "had any problem. There it is. All right, so that really\nshould be--",
    "start": "645330",
    "end": "654220"
  },
  {
    "text": "anyone remember what\nthis calls?  Right.",
    "start": "654220",
    "end": "660050"
  },
  {
    "text": " And so we'll see that we have\nexponential arrival times, a",
    "start": "660050",
    "end": "674779"
  },
  {
    "start": "668000",
    "end": "788000"
  },
  {
    "text": "rapid decay, only a small tail\nout at the right in this picture, and a big cluster\nnear the mean.",
    "start": "674780",
    "end": "682940"
  },
  {
    "text": "We can look at this in a\ndifferent way if you look at the scatterplot. And you'll notice that we've\ngiven it a mean of 60, the",
    "start": "682940",
    "end": "691040"
  },
  {
    "text": "dark blue line. But we seem to have an awful lot\nof points below the mean",
    "start": "691040",
    "end": "698910"
  },
  {
    "text": "compared to a very much\nsmaller number of points above the mean.",
    "start": "698910",
    "end": "704830"
  },
  {
    "text": "Why is that, in fact, inevitable\nin this situation?",
    "start": "704830",
    "end": "711055"
  },
  {
    "text": " Yeah? ",
    "start": "711055",
    "end": "717310"
  },
  {
    "text": "AUDIENCE: Because there's\nless space for them to-- PROFESSOR: Because? AUDIENCE: There's just\nless space for them. We can go from 60--",
    "start": "717310",
    "end": "723250"
  },
  {
    "text": "PROFESSOR: Well, there's\nless space. And the reason that there's less\nspace is we don't allow",
    "start": "723250",
    "end": "729889"
  },
  {
    "text": "things to arrive yesterday,\nin negative time. So the smallest inter-arrival\ntime is just",
    "start": "729890",
    "end": "737130"
  },
  {
    "text": "epsilon more than 0. So the time between jobs can\nnever be less than 0.",
    "start": "737130",
    "end": "744490"
  },
  {
    "text": "And so if we want-- and we're going to have a few\nway out here that take a lot",
    "start": "744490",
    "end": "750600"
  },
  {
    "text": "longer, because that's the\nnature of an exponential. So we're going to have to have\na bunch down here to",
    "start": "750600",
    "end": "757380"
  },
  {
    "text": "counterbalance the\nfew way up here. We can only get 60 below\nthe mean, in this case.",
    "start": "757380",
    "end": "765040"
  },
  {
    "text": "And you can see we here have\nover 500 above the mean.",
    "start": "765040",
    "end": "770699"
  },
  {
    "text": "So it's going to always look\nlike that, which is why the",
    "start": "770700",
    "end": "776160"
  },
  {
    "text": "histogram looks something\nlike this. So you'll observe that as you\nlook at these things.",
    "start": "776160",
    "end": "783050"
  },
  {
    "text": "All right, that's the\narrival process. ",
    "start": "783050",
    "end": "789440"
  },
  {
    "start": "788000",
    "end": "991000"
  },
  {
    "text": "We also have to look at\nthe service mechanism.",
    "start": "789440",
    "end": "795130"
  },
  {
    "text": "How does the server work? ",
    "start": "795130",
    "end": "802950"
  },
  {
    "text": "Again, we can ask some question\nlike, how long will",
    "start": "802950",
    "end": "810050"
  },
  {
    "text": "it take to provide service?",
    "start": "810050",
    "end": "815420"
  },
  {
    "text": "And this is called the service\ntime distribution. ",
    "start": "815420",
    "end": "828030"
  },
  {
    "text": "This depends on two things-- the amount of work the job to\nbe served entails, and the",
    "start": "828030",
    "end": "834850"
  },
  {
    "text": "speed of the server.  So, again, you've experienced\nthis, no doubt, at the",
    "start": "834850",
    "end": "840630"
  },
  {
    "text": "supermarket, where if you get\nin the wrong line, where there's a very slow person\nrunning the cash register,",
    "start": "840630",
    "end": "847460"
  },
  {
    "text": "even though the jobs are small,\nit takes forever, because there's a slow server.",
    "start": "847460",
    "end": "852480"
  },
  {
    "text": "Or alternatively, you've gotten\nbehind a line, not noticing that the person in\nfront of you has two shopping carts full of junk.",
    "start": "852480",
    "end": "859430"
  },
  {
    "text": "And so even though the server\nis fast, it'll take a long time to service that job.",
    "start": "859430",
    "end": "865690"
  },
  {
    "text": "The number of servers\ncertainly matters. ",
    "start": "865690",
    "end": "873470"
  },
  {
    "text": "An important question is\nthe number of queues. ",
    "start": "873470",
    "end": "882480"
  },
  {
    "text": "In particular, does each server\nhave its own queue, which is what you see\nat the supermarket?",
    "start": "882480",
    "end": "889810"
  },
  {
    "text": "Or is there a single queue for\nmany servers, typically what",
    "start": "889810",
    "end": "894980"
  },
  {
    "text": "you see if you are checking in,\nsay, in coach class at the airport, or lining up for\nsecurity at the airport?",
    "start": "894980",
    "end": "905240"
  },
  {
    "text": "Which of those is better,\ndo you think? Which provides, on average,\nbetter service, multiple",
    "start": "905240",
    "end": "911630"
  },
  {
    "text": "queues or a single queue? Single queue, right,\nis much better.",
    "start": "911630",
    "end": "919649"
  },
  {
    "text": "In fact, it's easy\nto construct a proof why it's better.",
    "start": "919650",
    "end": "924839"
  },
  {
    "text": "Which is why we now see them,\ntypically, at places like banks and airports. Didn't used to be.",
    "start": "924840",
    "end": "931360"
  },
  {
    "text": "Initially, people didn't\nunderstand this was better, and they would have\nmultiple queues. ",
    "start": "931360",
    "end": "939810"
  },
  {
    "text": "Why don't we always have\na single queue? Because we may not have\nenough space.",
    "start": "939810",
    "end": "949379"
  },
  {
    "text": "So you can, again, imagine at\nthe supermarket there'd be no place to put the single\nqueue for all of the",
    "start": "949380",
    "end": "954710"
  },
  {
    "text": "cash registers, maybe. And another question we have\nto ask is whether or not we",
    "start": "954710",
    "end": "962100"
  },
  {
    "text": "allow preemption. ",
    "start": "962100",
    "end": "968610"
  },
  {
    "text": "In some queuing systems, a\nserver can stop processing a customer to deal with another\nemergency customer.",
    "start": "968610",
    "end": "977490"
  },
  {
    "text": "In others, once a job is\nstarted, it has to run to completion. And, again, you get very\ndifferent performance,",
    "start": "977490",
    "end": "984589"
  },
  {
    "text": "depending upon whether you\nallow preemption or not. ",
    "start": "984590",
    "end": "992040"
  },
  {
    "start": "991000",
    "end": "1578000"
  },
  {
    "text": "An important part of the\narchitecture is, of course, the characteristics of\nthe queue itself.",
    "start": "992040",
    "end": "997170"
  },
  {
    "start": "997170",
    "end": "1009850"
  },
  {
    "text": "The fundamental question\nis the policy. ",
    "start": "1009850",
    "end": "1018600"
  },
  {
    "text": "How from the set of customers\nwaiting for service do we choose the customer\nto be served next?",
    "start": "1018600",
    "end": "1025199"
  },
  {
    "text": " So a very common\npolicy is FIFO.",
    "start": "1025200",
    "end": "1032283"
  },
  {
    "text": "It stands for First\nIn First Out. That's the one we see most of\nthe time in a lot of physical",
    "start": "1032284",
    "end": "1039050"
  },
  {
    "text": "situations. Whoever gets in line first\nget served first. ",
    "start": "1039050",
    "end": "1046760"
  },
  {
    "text": "There are some situations\nwhere you do Last In First Out.",
    "start": "1046760",
    "end": "1053280"
  },
  {
    "text": "Whoever's arrived most recently\ngets served first. ",
    "start": "1053280",
    "end": "1059750"
  },
  {
    "text": "A very popular one in many\ncomputing applications is",
    "start": "1059750",
    "end": "1065690"
  },
  {
    "text": "what's called SRPT, which is\nshort for Shortest Remaining",
    "start": "1065690",
    "end": "1071929"
  },
  {
    "text": "Processing Time. ",
    "start": "1071930",
    "end": "1083870"
  },
  {
    "text": "Take whichever job you\ncan complete fastest. ",
    "start": "1083870",
    "end": "1094779"
  },
  {
    "text": "So these are the three most\npopular policies. You could also imagine a random\npolicy, where you just",
    "start": "1094780",
    "end": "1100970"
  },
  {
    "text": "chose some random member\nof the queue. Then there are lots of other\nkinds of issues, which I won't",
    "start": "1100970",
    "end": "1107330"
  },
  {
    "text": "go into in detail. The choice of queuing\ndiscipline, as we'll see when",
    "start": "1107330",
    "end": "1114410"
  },
  {
    "text": "we look at the code, can have a\nmajor effect on performance.",
    "start": "1114410",
    "end": "1122790"
  },
  {
    "text": "In particular, it can be used\nto reduce congestion. We'll often see in practice\nthis one.",
    "start": "1122790",
    "end": "1134840"
  },
  {
    "text": "Now, why might that be a very\nuseful practical method? ",
    "start": "1134840",
    "end": "1143072"
  },
  {
    "text": "Well, It's got one\nobvious feature. If the available space for the\nqueue is small, by taking the",
    "start": "1143072",
    "end": "1155220"
  },
  {
    "text": "ones you can finish fastest, you\nreduce the average number of elements in the queue.",
    "start": "1155220",
    "end": "1163179"
  },
  {
    "text": "Because you get to process more\ncustomers by taking the customers that you can\nprocess quickly.",
    "start": "1163180",
    "end": "1169250"
  },
  {
    "text": "And so on average, there\nwill be fewer customers in the queue. ",
    "start": "1169250",
    "end": "1175179"
  },
  {
    "text": "And so it reduces congestion. ",
    "start": "1175180",
    "end": "1183230"
  },
  {
    "text": "As we'll see, it also improves\nexpected service time.",
    "start": "1183230",
    "end": "1190080"
  },
  {
    "text": "So it is an excellent method. When we talk about queuing\nnetworks, what",
    "start": "1190080",
    "end": "1198380"
  },
  {
    "text": "we're going to see-- and I hope I've implied\nthis already-- is that probability has to play\na fundamental role in",
    "start": "1198380",
    "end": "1205480"
  },
  {
    "text": "understanding them, because\nthere's randomness. There's randomness in the\ninter-arrival time, and",
    "start": "1205480",
    "end": "1213820"
  },
  {
    "text": "there's typically randomness in\nhow long each job will take to process.",
    "start": "1213820",
    "end": "1221090"
  },
  {
    "text": "What are the questions we might\nwant to ask about a queuing system to see whether\nwe've designed it properly?",
    "start": "1221090",
    "end": "1229730"
  },
  {
    "text": "An important question is the\naverage waiting time. ",
    "start": "1229730",
    "end": "1239549"
  },
  {
    "text": "On average, how long does a job\nwait between the time it enters the queue and the time\nit leaves the queue?",
    "start": "1239550",
    "end": "1249570"
  },
  {
    "text": "Now, imagine that you're\nwaiting for the MIT Shuttle Bus. How long you wait before you\nget on the bus, on average?",
    "start": "1249570",
    "end": "1257950"
  },
  {
    "text": "You can also ask, once the job\nstarts, how long to complete? ",
    "start": "1257950",
    "end": "1267790"
  },
  {
    "text": "We can also ask, is the\nwaiting time bounded? ",
    "start": "1267790",
    "end": "1277409"
  },
  {
    "text": "So this is a different question\nthan how long you should expect to wait\non average.",
    "start": "1277410",
    "end": "1282430"
  },
  {
    "text": "It's, what's the probability\nof your not having to wait longer than some upper bound? ",
    "start": "1282430",
    "end": "1290360"
  },
  {
    "text": "So you can imagine that if you\nwere working for some company",
    "start": "1290360",
    "end": "1297620"
  },
  {
    "text": "that, for example, sold products\nover the telephone, you might want to put a bound\non how long a customer would",
    "start": "1297620",
    "end": "1304170"
  },
  {
    "text": "wait before their call\ngot picked up. And you'd do some analysis,\nsaying if people have to wait",
    "start": "1304170",
    "end": "1312580"
  },
  {
    "text": "longer than three minutes,\nthey hang up the phone. And so we'll have enough servers\nthat it's only rare",
    "start": "1312580",
    "end": "1319635"
  },
  {
    "text": "that someone has to wait more\nthan three minutes. It's a different question than\nhow long people have to wait",
    "start": "1319635",
    "end": "1325870"
  },
  {
    "text": "on average.  We've already talked about\nthe average queue length.",
    "start": "1325870",
    "end": "1332235"
  },
  {
    "start": "1332235",
    "end": "1340120"
  },
  {
    "text": "And by analogy, we can also\nask about the bound. ",
    "start": "1340120",
    "end": "1351393"
  },
  {
    "text": "on queue length. You can imagine if you're\ndesigning a router for the",
    "start": "1351394",
    "end": "1357490"
  },
  {
    "text": "internet, you need to know how\nmuch memory to allocate for the queues of jobs so that\nyou don't run out.",
    "start": "1357490",
    "end": "1365700"
  },
  {
    "text": "It's not infinite, so there's\nan upper bound in how long you'll let the queues grow.",
    "start": "1365700",
    "end": "1371990"
  },
  {
    "text": "And finally, along a different\ndimension is something we've",
    "start": "1371990",
    "end": "1377700"
  },
  {
    "text": "already talked about,\nserver utilization. ",
    "start": "1377700",
    "end": "1385500"
  },
  {
    "text": "What is the expected utilization\nof each server, in the sense of, what is the\nexpected amount of time it",
    "start": "1385500",
    "end": "1392840"
  },
  {
    "text": "will be fully occupied? Remember, servers cost\nmoney, so keeping",
    "start": "1392840",
    "end": "1399799"
  },
  {
    "text": "them busy is important. If we can assign relative cost\nvalues to each of these",
    "start": "1399800",
    "end": "1408270"
  },
  {
    "text": "things, we can then build a\nsystem that will let us do an analysis and build an\noptimal system--",
    "start": "1408270",
    "end": "1417220"
  },
  {
    "text": "decide how big the queues should\nbe, how many servers, how fast they should be, do\nthe analysis, and design a",
    "start": "1417220",
    "end": "1423659"
  },
  {
    "text": "system that meets some\noptimization criteria. ",
    "start": "1423660",
    "end": "1429120"
  },
  {
    "text": "So now, we need to investigate\nthese things. Two basic methods, as we've",
    "start": "1429120",
    "end": "1435390"
  },
  {
    "text": "discussed before, are analytic-- and, indeed, you can get books\non analytic queuing theory,",
    "start": "1435390",
    "end": "1442690"
  },
  {
    "text": "really thick, hard-to-read\nbooks, I might add, that give you complicated formulas\nfor deriving",
    "start": "1442690",
    "end": "1448680"
  },
  {
    "text": "these kinds of things. In practice, they're hardly\never used, because most",
    "start": "1448680",
    "end": "1454970"
  },
  {
    "text": "systems are too complex to\nactually model analytically. So, in fact, today, most queuing\nnetwork systems are",
    "start": "1454970",
    "end": "1462650"
  },
  {
    "text": "analyzed using simulations,\nthe kind of discrete event",
    "start": "1462650",
    "end": "1468850"
  },
  {
    "text": "simulations we've looked\nat earlier in the term. All right. Now, I want to look at a\nparticular example, and see",
    "start": "1468850",
    "end": "1475940"
  },
  {
    "text": "how we can build a simulation\nthat will let us answer these",
    "start": "1475940",
    "end": "1480950"
  },
  {
    "text": "kinds of questions about\na particular example. The example is a --",
    "start": "1480950",
    "end": "1487405"
  },
  {
    "text": "and again, this is the\none that you'll be asked to look at -- is a simplification of the\nMIT Shuttle Bus system.",
    "start": "1487405",
    "end": "1496020"
  },
  {
    "text": "So as I'm sure you all know, it\nruns in a loop, picking up",
    "start": "1496020",
    "end": "1503560"
  },
  {
    "text": "students, and dropping them off\nat some number of stops. For legal reasons, each bus\nhas a maximum capacity--",
    "start": "1503560",
    "end": "1512880"
  },
  {
    "text": "often exceeded I'm sure, in\npractice, but there is officially a maximum number of\npeople allowed on a bus.",
    "start": "1512880",
    "end": "1520460"
  },
  {
    "text": "And it takes a certain amount of\ntime to go around the loop. ",
    "start": "1520460",
    "end": "1527140"
  },
  {
    "text": "The obvious question to ask is,\nhow long should a student",
    "start": "1527140",
    "end": "1532430"
  },
  {
    "text": "expect to have to wait for a\nbus at a particular stop to get picked up? And what should MIT do to,\ndepending upon whether it's",
    "start": "1532430",
    "end": "1541490"
  },
  {
    "text": "feeling benevolent or not,\nminimize or maximize the waiting time for the bus?",
    "start": "1541490",
    "end": "1546980"
  },
  {
    "text": "All right. Most of the code we're\ngoing to look at now is on your handout.",
    "start": "1546980",
    "end": "1554720"
  },
  {
    "text": "I should say I've deleted the\nobvious parts so I could fit it on the handout.",
    "start": "1554720",
    "end": "1559850"
  },
  {
    "text": "However, we'll be posting the\ncode on the web today, a .py file that you'll be able to\nstudy, and more importantly,",
    "start": "1559850",
    "end": "1568880"
  },
  {
    "text": "probably run it. ",
    "start": "1568880",
    "end": "1578670"
  },
  {
    "text": "All right, let's start. So, as usual in designing a\npiece of code, I began with",
    "start": "1578670",
    "end": "1585510"
  },
  {
    "text": "some useful classes. You won't be surprised that the\nfirst class I looked at was class job.",
    "start": "1585510",
    "end": "1591700"
  },
  {
    "text": " So what is a job?",
    "start": "1591700",
    "end": "1596830"
  },
  {
    "text": "A job is -- depending upon the\nmean arrival and the mean work involved.",
    "start": "1596830",
    "end": "1604060"
  },
  {
    "text": "And I've chosen to model\narrivals as exponential. ",
    "start": "1604060",
    "end": "1612580"
  },
  {
    "text": "And I've chosen to model\nwork as a Gaussian.",
    "start": "1612580",
    "end": "1617690"
  },
  {
    "text": "Nothing magical about this. And in fact, I played with\nvarious other models.",
    "start": "1617690",
    "end": "1622810"
  },
  {
    "text": "What would happen if the work\nwere uniformly distributed or exponentially distributed? And, of course, you get\ndifferent answers.",
    "start": "1622810",
    "end": "1629215"
  },
  {
    "text": " I said next two attributes. There is actually only\none attribute here.",
    "start": "1629215",
    "end": "1635980"
  },
  {
    "text": "And this is going to keep track\nof when a job enters the queue, so that we can tell\nhow long it had to wait.",
    "start": "1635980",
    "end": "1644830"
  },
  {
    "text": "And then there's the\ninter-arrival, the work, the queue, the queue time,\net cetera.",
    "start": "1644830",
    "end": "1651420"
  },
  {
    "text": "And then I'm going to model\na passenger as a job. You'll note this is kind\nof a boring class.",
    "start": "1651420",
    "end": "1657890"
  },
  {
    "text": "All I've done is say, pass. Because I'm not adding\nanything new.",
    "start": "1657890",
    "end": "1663150"
  },
  {
    "text": "I am giving it a\ndifferent type. And it gave me a place to put\nthe comment here, that the",
    "start": "1663150",
    "end": "1668279"
  },
  {
    "text": "arrival rate corresponds to\npassengers to arriving at a bus stop, and work is the time\nit takes a passenger",
    "start": "1668280",
    "end": "1675080"
  },
  {
    "text": "to board the bus. There are many other things I\ncould have done for work.",
    "start": "1675080",
    "end": "1680410"
  },
  {
    "text": "I could have made it\nmulti-dimensional, having to do with how long to get\non the bus, how many stops, et cetera.",
    "start": "1680410",
    "end": "1687059"
  },
  {
    "text": "For simplicity, I'm just\nassuming that there are some agile people who just get on the\nbus quickly, and there's",
    "start": "1687060",
    "end": "1692590"
  },
  {
    "text": "some people who are a little bit\nslower, who might take a longer time to get on the bus.",
    "start": "1692590",
    "end": "1698450"
  },
  {
    "text": "And that's it for jobs. Pretty simple, but pretty\ntypical of the kinds",
    "start": "1698450",
    "end": "1703980"
  },
  {
    "text": "of things we see.  Then we come to the\nqueues themselves.",
    "start": "1703980",
    "end": "1711315"
  },
  {
    "text": " The root class is just\nthe job queue.",
    "start": "1711315",
    "end": "1717095"
  },
  {
    "text": " Jobs can arrive, and the queue\ncan have a length.",
    "start": "1717095",
    "end": "1722899"
  },
  {
    "text": "You'll note that I don't have\nany way for jobs to leave the queue in the base class.",
    "start": "1722900",
    "end": "1728780"
  },
  {
    "text": "And that's because each subclass\nwill be distinguished",
    "start": "1728780",
    "end": "1733900"
  },
  {
    "text": "by the queueing discipline\nit's using. And the queueing discipline\ntypically has to do with how",
    "start": "1733900",
    "end": "1741300"
  },
  {
    "text": "jobs leave the queue. So there's a FIFO discipline.",
    "start": "1741300",
    "end": "1747429"
  },
  {
    "text": "Pretty simplistic. It just removes the first item\nfrom the queue and returns it.",
    "start": "1747430",
    "end": "1754919"
  },
  {
    "text": "Raises an exception if you try\nand remove something from the queue when there's\nnothing there.",
    "start": "1754920",
    "end": "1762039"
  },
  {
    "text": "An SRPT is a little bit more\ninvolved, but not much.",
    "start": "1762040",
    "end": "1770760"
  },
  {
    "text": "I've not tried to be clever. You could imagine a much more\nefficient implementation than the one I've got.",
    "start": "1770760",
    "end": "1776710"
  },
  {
    "text": "But here, each time a job needs\nto leave the queue, I just search the queue to find\none of the jobs with the least",
    "start": "1776710",
    "end": "1783430"
  },
  {
    "text": "amount of work, and\nI remove that. ",
    "start": "1783430",
    "end": "1788940"
  },
  {
    "text": "That's why I'm searching with\nthe index here, because pop lets me remove something from a\nlist at a particular index.",
    "start": "1788940",
    "end": "1797740"
  },
  {
    "text": " And then finally,\nI have another",
    "start": "1797740",
    "end": "1803500"
  },
  {
    "text": "simple class, bus stop. And the key thing here what\nit's a subclass of.",
    "start": "1803500",
    "end": "1810370"
  },
  {
    "text": "Initially, I'm choosing it\nto be a subclass of FIFO. ",
    "start": "1810370",
    "end": "1817169"
  },
  {
    "text": "Later, we'll see I could make\nit a subclass of SRPT, or in fact, anything else I chose.",
    "start": "1817170",
    "end": "1824130"
  },
  {
    "text": "But this gives me a convenient\nway to decide what queueing discipline I'm going to\nuse at the bus stops.",
    "start": "1824130",
    "end": "1831284"
  },
  {
    "start": "1831285",
    "end": "1841330"
  },
  {
    "text": "So I mentioned earlier that\nSRPT is nice, because it",
    "start": "1841330",
    "end": "1846450"
  },
  {
    "text": "allows us to reduce the\nsize of the queue.",
    "start": "1846450",
    "end": "1852220"
  },
  {
    "text": "I also mentioned that it's\ntypically optimal in the sense",
    "start": "1852220",
    "end": "1857970"
  },
  {
    "text": "of producing the shortest\naverage waiting time. So let's think about why.",
    "start": "1857970",
    "end": "1865820"
  },
  {
    "text": "Imagine that we do\nthe opposite. This is a good intellectual\ntool.",
    "start": "1865820",
    "end": "1871590"
  },
  {
    "text": "Just think of the opposite. Suppose we always took the\nlongest job first. ",
    "start": "1871590",
    "end": "1878299"
  },
  {
    "text": "What would that do to the\naverage waiting time? ",
    "start": "1878300",
    "end": "1884200"
  },
  {
    "text": "Say we had a job that took 10\nminutes and a queue with 10",
    "start": "1884200",
    "end": "1890909"
  },
  {
    "text": "people in it. Well, while we were waiting for\nthat 1 10-minute job to get on the bus, the other 9\npeople would each have to wait",
    "start": "1890910",
    "end": "1900510"
  },
  {
    "text": "10 minutes. 9 times 10, 90 minutes\nof waiting time.",
    "start": "1900510",
    "end": "1906480"
  },
  {
    "text": "Not very good, right? Now, suppose each of those 9\njobs only took 1 minute.",
    "start": "1906480",
    "end": "1915799"
  },
  {
    "text": "Well, the first job would wait\n0, the next job would wait 1 minute, the next job would\nwait 2 minutes.",
    "start": "1915800",
    "end": "1922750"
  },
  {
    "text": "And even the longest job would\nonly have to wait 9 minutes before it started.",
    "start": "1922750",
    "end": "1928409"
  },
  {
    "text": "So the total amount of\ntime spent waiting would be much less. ",
    "start": "1928410",
    "end": "1935880"
  },
  {
    "text": "So we can see that by using\nshortest remaining processing time, the waiting times\nare reduced.",
    "start": "1935880",
    "end": "1943380"
  },
  {
    "text": "Now, with the bus example, it's\na little bit strange, in that, yes, you'd get on the\nbus, but maybe the bus",
    "start": "1943380",
    "end": "1949490"
  },
  {
    "text": "wouldn't move at all while it\nwas waiting for that last person to get on.",
    "start": "1949490",
    "end": "1955560"
  },
  {
    "text": "But most queueing\ndisciplines-- imagine you're in the\nsupermarket-- you don't care how long the\nguys behind you take.",
    "start": "1955560",
    "end": "1962870"
  },
  {
    "text": "As soon as you get to the front,\nyou get processed, you get to leave the store. So in fact, a supermarket\nwould, on average, have",
    "start": "1962870",
    "end": "1971550"
  },
  {
    "text": "happier customers if it followed\nshortest remaining processing time, and always took\nwhoever had the fewest",
    "start": "1971550",
    "end": "1981040"
  },
  {
    "text": "number of items first. Why don't they do that?",
    "start": "1981040",
    "end": "1986690"
  },
  {
    "text": "Or why is not SRPT always\nused in practice? It's got one glaring problem.",
    "start": "1986690",
    "end": "1994200"
  },
  {
    "text": "What's that problem? ",
    "start": "1994200",
    "end": "1999340"
  },
  {
    "start": "1998000",
    "end": "2338000"
  },
  {
    "text": "AUDIENCE: It doesn't seem\nfair to everyone else. PROFESSOR: It's not fair. ",
    "start": "1999340",
    "end": "2005049"
  },
  {
    "text": "And this is actually\na technical word. People talk about fairness\nof a queueing discipline.",
    "start": "2005050",
    "end": "2013769"
  },
  {
    "text": "And in particular, it's so\nunfair that it allows",
    "start": "2013770",
    "end": "2020260"
  },
  {
    "text": "starvation, another\ntechnical term.",
    "start": "2020260",
    "end": "2026700"
  },
  {
    "start": "2026700",
    "end": "2032789"
  },
  {
    "text": "Imagine that you're the person\nwith the 10-minute job, and",
    "start": "2032790",
    "end": "2038930"
  },
  {
    "text": "there's a continuing stream\nof people arriving with 1-minute jobs.",
    "start": "2038930",
    "end": "2044629"
  },
  {
    "text": "You never to get your job\nprocessed at all. You just sit there, and\nyou wait, and you",
    "start": "2044630",
    "end": "2050679"
  },
  {
    "text": "wait, and you wait. And in fact, you wait forever. ",
    "start": "2050679",
    "end": "2056199"
  },
  {
    "text": "In the bus situation, imagine\nyou're the person who's in a wheelchair and takes 10 minutes\nto get on the bus.",
    "start": "2056199",
    "end": "2061449"
  },
  {
    "text": " And people keep arriving\nat the bus stop.",
    "start": "2061449",
    "end": "2066530"
  },
  {
    "text": "Well, before it gets to be your\nturn, the bus is full, and it leaves. And you have to wait\nfor the next bus.",
    "start": "2066530",
    "end": "2073669"
  },
  {
    "text": "But people arrive while\nyou're waiting. It arrives. Again, you don't get on.",
    "start": "2073670",
    "end": "2078679"
  },
  {
    "text": "And you never get on. This is technically\ncalled starvation. And it's a problem\nthat SRPT has.",
    "start": "2078679",
    "end": "2087219"
  },
  {
    "text": "So typically, if you're using\nthat as your scheduling algorithm, you've got to put in\nsome sort of a priority on",
    "start": "2087219",
    "end": "2094060"
  },
  {
    "text": "top of it that gives the long\njobs a chance to at least run once in a while.",
    "start": "2094060",
    "end": "2100819"
  },
  {
    "text": "And there are lots of different\ndisciplines for doing that. All right, let's continue\nlooking at the code.",
    "start": "2100820",
    "end": "2109690"
  },
  {
    "text": "So now we've got bus stops,\nwhich are queues. We got jobs.",
    "start": "2109690",
    "end": "2115770"
  },
  {
    "text": "Well, we're going to\nhave our server. And in this case, our\nserver is a bus. ",
    "start": "2115770",
    "end": "2124010"
  },
  {
    "text": "Every bus has got a capacity,\nthe number of people it's allowed to hold, and a speed.",
    "start": "2124010",
    "end": "2131515"
  },
  {
    "text": "The speed has to do with\nhow fast it goes from stop to stop.",
    "start": "2131515",
    "end": "2136770"
  },
  {
    "text": "And for simplicity, we're going\nto assume that this depends only on the bus itself,\nnot on the traffic.",
    "start": "2136770",
    "end": "2143210"
  },
  {
    "text": "Not true in Cambridge and\nBoston, of course, but we can't get everything in\na code that we get",
    "start": "2143210",
    "end": "2148740"
  },
  {
    "text": "through in one lecture. So it's got a capacity,\nit's got a speed.",
    "start": "2148740",
    "end": "2154770"
  },
  {
    "text": "And then, we can keep\ntrack of how many people are on the bus. It's got an enter, which\nhas to do with",
    "start": "2154770",
    "end": "2162100"
  },
  {
    "text": "people getting on it. And does that until it's\nfull, and then",
    "start": "2162100",
    "end": "2168180"
  },
  {
    "text": "it raises an exception. And things can leave the bus.",
    "start": "2168180",
    "end": "2175319"
  },
  {
    "text": "And here's the interesting\nmethod. Unload takes a self and\nthe number to be",
    "start": "2175320",
    "end": "2183720"
  },
  {
    "text": "unloaded from the bus. And it just calls self.leave\nover and over again.",
    "start": "2183720",
    "end": "2190780"
  },
  {
    "text": "All right, those are\nour basic classes. Nothing too sophisticated.",
    "start": "2190780",
    "end": "2196270"
  },
  {
    "text": "As is often the case with\nclasses, the code is straightforward. And now comes the\nnot-so-quite-straightforward",
    "start": "2196270",
    "end": "2203779"
  },
  {
    "text": "code, which is the actual\nsimulation itself.",
    "start": "2203780",
    "end": "2209460"
  },
  {
    "text": "Probably the most important\nthing to understand in looking at this code is the arguments.",
    "start": "2209460",
    "end": "2217200"
  },
  {
    "text": "This will tell us what the\nsimulation depends on.",
    "start": "2217200",
    "end": "2222760"
  },
  {
    "text": "So there's going to be a bus. So notice we have\nonly one bus.",
    "start": "2222760",
    "end": "2229500"
  },
  {
    "text": "So, again, I've simplified\nthe simulation. Instead of having multiple buses\nrunning around the loop,",
    "start": "2229500",
    "end": "2236750"
  },
  {
    "text": "we're going to assume you've\njust got to wait for that first bus to get back. Later, we can talk about what\nwould be involved in having",
    "start": "2236750",
    "end": "2244180"
  },
  {
    "text": "multiple buses. The number of stops in the\nloop, the loop length.",
    "start": "2244180",
    "end": "2250490"
  },
  {
    "text": "And for simplicity, I'm going\nto assume that the stops are equally spaced along\nthe length.",
    "start": "2250490",
    "end": "2255769"
  },
  {
    "text": " The mean arrival rate of jobs,\nthe mean work per job, and",
    "start": "2255770",
    "end": "2264380"
  },
  {
    "text": "then how long we're going\nto run the simulation.  Roughly speaking, I'm using\nthe same units for the",
    "start": "2264380",
    "end": "2272119"
  },
  {
    "text": "simulation time and\nthe loop length. So this would tell us, if we\nsimulate for 30,000 times, and",
    "start": "2272120",
    "end": "2279830"
  },
  {
    "text": "the loop is this 1,200 time\nunits long, how many times",
    "start": "2279830",
    "end": "2286090"
  },
  {
    "text": "around the loop we could get,\nand how many stops the bus would make. ",
    "start": "2286090",
    "end": "2292380"
  },
  {
    "text": "All right. And then comes the body\nof the simulation. ",
    "start": "2292380",
    "end": "2300339"
  },
  {
    "text": "So the first thing-- actually,\nlet me write up some pseudo-code here to basically\nshow you the way it's",
    "start": "2300340",
    "end": "2307320"
  },
  {
    "text": "structured. ",
    "start": "2307320",
    "end": "2314460"
  },
  {
    "text": "Yeah, I think we'll\nput it over here. ",
    "start": "2314460",
    "end": "2323640"
  },
  {
    "text": "So the first thing we do is we\ncreate the stops, and we",
    "start": "2323640",
    "end": "2329609"
  },
  {
    "text": "initialize some variables then\nwe're going to use to keep",
    "start": "2329610",
    "end": "2335140"
  },
  {
    "text": "track of performance. ",
    "start": "2335140",
    "end": "2340650"
  },
  {
    "start": "2338000",
    "end": "2448000"
  },
  {
    "text": "We then enter the main loop,\nwhich is essentially while time not expired.",
    "start": "2340650",
    "end": "2346230"
  },
  {
    "text": " That has to do with how long\nwe're going to run the",
    "start": "2346230",
    "end": "2351930"
  },
  {
    "text": "simulation. We move the bus.",
    "start": "2351930",
    "end": "2357400"
  },
  {
    "text": "So the loop will go through one\ntime unit each iteration. At least, it looks that\nway initially.",
    "start": "2357400",
    "end": "2364740"
  },
  {
    "text": "So we'll move the bus\nthat amount of time. ",
    "start": "2364740",
    "end": "2378750"
  },
  {
    "text": "So then, while we're doing\nit, passengers will arrive at the stops.",
    "start": "2378750",
    "end": "2384600"
  },
  {
    "start": "2384600",
    "end": "2399460"
  },
  {
    "text": "Then we'll see when a\nbus is at a stop. ",
    "start": "2399460",
    "end": "2405220"
  },
  {
    "text": "Has it driven long enough\nto get to the next stop? And when it's there, we'll\nunload some passengers first,",
    "start": "2405220",
    "end": "2415280"
  },
  {
    "text": "and then we'll load\nsome passengers.  And then, when we're done at\nthe very end, we'll compute",
    "start": "2415280",
    "end": "2426540"
  },
  {
    "text": "some statistics. ",
    "start": "2426540",
    "end": "2433930"
  },
  {
    "text": "So that's the overall structure\nof the simulation. Then we can put that in\nsomething outside it that",
    "start": "2433930",
    "end": "2441140"
  },
  {
    "text": "tells us how many simulations to\nrun and get more statistics about aggregate.",
    "start": "2441140",
    "end": "2447010"
  },
  {
    "text": " All right, now working our\nway through the code, the",
    "start": "2447010",
    "end": "2454790"
  },
  {
    "start": "2448000",
    "end": "2868000"
  },
  {
    "text": "initialization, while\ntime less than simTime, advance time.",
    "start": "2454790",
    "end": "2462020"
  },
  {
    "text": "Move the bus. Now, how far we move it depends\nupon how fast it is.",
    "start": "2462020",
    "end": "2467910"
  },
  {
    "text": "So we'll just add to the bus\nlocation however far it's allowed to move in\none time unit.",
    "start": "2467910",
    "end": "2475170"
  },
  {
    "text": "I don't care whether the time\nunit is seconds, minutes, hours, days, whatever. Just it has to be\nall consistent.",
    "start": "2475170",
    "end": "2481549"
  },
  {
    "text": " Then I'll see if there's a\npassenger waiting to enter the",
    "start": "2481550",
    "end": "2487860"
  },
  {
    "text": "queue by checking the\narrival time. ",
    "start": "2487860",
    "end": "2493550"
  },
  {
    "text": "And passengers can arrive\nsimultaneously at each stop. ",
    "start": "2493550",
    "end": "2501200"
  },
  {
    "text": "I apologize for leaving the\ncomments out of your handouts, but I couldn't squeeze it onto\nthe page with the comments.",
    "start": "2501200",
    "end": "2506869"
  },
  {
    "start": "2506870",
    "end": "2516480"
  },
  {
    "text": "Then, here's the interesting\npiece. So we do this. We're just having passengers\narrive based upon the",
    "start": "2516480",
    "end": "2523500"
  },
  {
    "text": "characteristics of jobs. See if the bus is at a stop.",
    "start": "2523500",
    "end": "2530950"
  },
  {
    "text": "If the bus location divided by\nthe inter-stop distance is",
    "start": "2530950",
    "end": "2537780"
  },
  {
    "text": "equal to 0, so it's actually\nat a stop, I'll do my unloading, et cetera.",
    "start": "2537780",
    "end": "2545420"
  },
  {
    "text": "Now, down here, you'll notice\nthat up here, I had this",
    "start": "2545420",
    "end": "2551319"
  },
  {
    "text": "assumption that the speed of the\nbus is small relative to",
    "start": "2551320",
    "end": "2556960"
  },
  {
    "text": "the inter-stop distance.  This assumption is important\nbecause of this statement.",
    "start": "2556960",
    "end": "2565895"
  },
  {
    "text": " If the bus were moving\ntoo fast.",
    "start": "2565895",
    "end": "2573000"
  },
  {
    "text": "It might skip over the stops. Now, this is kind of a clumsy\ntrick I've used here.",
    "start": "2573000",
    "end": "2582670"
  },
  {
    "text": "It has to do with\nit being small. It has to do with each movement\nof the bus being, in fact, an integral of the\ninter-stop distance so that",
    "start": "2582670",
    "end": "2590540"
  },
  {
    "text": "you don't skip over the stops. In a real simulation, I would\nhave done something much more",
    "start": "2590540",
    "end": "2596870"
  },
  {
    "text": "careful to deal with\nnot missing stops. But again, I wanted to make\nthis relatively simple.",
    "start": "2596870",
    "end": "2604240"
  },
  {
    "text": "So I'm going to jigger things\nso that the speed of the bus",
    "start": "2604240",
    "end": "2609790"
  },
  {
    "text": "evenly divides the inter-stop\ndistance, so when I advance the bus, it never skips\nover a stop.",
    "start": "2609790",
    "end": "2617180"
  },
  {
    "text": "It's just a trick. Not very elegant trick, but\nit keeps things working. ",
    "start": "2617180",
    "end": "2624130"
  },
  {
    "text": "All right. Then I'm going to unload some\nfraction of the passengers. Now, again, in a more realistic\nsimulation, I'd be",
    "start": "2624130",
    "end": "2632349"
  },
  {
    "text": "keeping track of what's the\naverage distance a passenger wants to travel.",
    "start": "2632350",
    "end": "2638170"
  },
  {
    "text": "And I would have, in fact, made\nwork two-dimensional-- the amount of time to get on\nthe bus, plus how far the",
    "start": "2638170",
    "end": "2645750"
  },
  {
    "text": "passenger wanted to travel. Again, here, I've done\nsomething simple. I've just assumed that a\nfraction of all the passengers",
    "start": "2645750",
    "end": "2653880"
  },
  {
    "text": "get off at each stop, and the\nfraction depends upon how many total stops there are.",
    "start": "2653880",
    "end": "2660690"
  },
  {
    "text": "We can still understand most of\nthe interesting aspects of the problem, even with all\nof these simplifications.",
    "start": "2660690",
    "end": "2668780"
  },
  {
    "text": "And that's an important\nlesson. Every simulation is a\nsimplification of reality.",
    "start": "2668780",
    "end": "2676849"
  },
  {
    "text": "No simulation is ever a perfect\nmodel of reality. No model is ever a perfect\nmodel of reality.",
    "start": "2676850",
    "end": "2685010"
  },
  {
    "text": "What we typically do in building\nthe simulation is simplify it enough that we can\nget it to work, but not so",
    "start": "2685010",
    "end": "2695290"
  },
  {
    "text": "much that we can't answer the\nquestions we want to answer. And so I've made a lot of these\nsimplifications, but",
    "start": "2695290",
    "end": "2703130"
  },
  {
    "text": "they will still allow us, while\nmaybe not to get precise answers about the impact of\nvarious things, to understand",
    "start": "2703130",
    "end": "2711220"
  },
  {
    "text": "how things relate to each other,\nthe relative impact of various design decisions.",
    "start": "2711220",
    "end": "2716315"
  },
  {
    "start": "2716315",
    "end": "2723740"
  },
  {
    "text": "All right. If the bus is at a stop, as I\nsaid, some passengers will get",
    "start": "2723740",
    "end": "2730360"
  },
  {
    "text": "on, get off.  Passengers that are already\nat the stop will try",
    "start": "2730360",
    "end": "2738840"
  },
  {
    "text": "and get on the bus.  We'll have to advance time,\nbecause time starts to run out",
    "start": "2738840",
    "end": "2747810"
  },
  {
    "text": "as people are getting\non the bus, even though the bus is moving. But, of course, even\nthough time is advancing, the bus is not.",
    "start": "2747810",
    "end": "2754750"
  },
  {
    "text": "So we have to model that, the\nimpact of loading times. And in fact, in mass transit\nsystems, it turns out that",
    "start": "2754750",
    "end": "2761460"
  },
  {
    "text": "loading time is a very\nimportant parameter. In many urban systems, subways\nwill spend more time at",
    "start": "2761460",
    "end": "2768610"
  },
  {
    "text": "stations getting loaded than\nbetween stations, moving to the next one, if the\nstations are dense.",
    "start": "2768610",
    "end": "2775410"
  },
  {
    "text": "You may have noticed this\non the Green Line.  So we have to make sure\nwe model that.",
    "start": "2775410",
    "end": "2782330"
  },
  {
    "text": "And then, of course, since the\nbus could be at the stop for a while, passengers might arrive\nwhile it's at the stop.",
    "start": "2782330",
    "end": "2788700"
  },
  {
    "text": " Then, we can keep track of the\nnumber of people left waiting",
    "start": "2788700",
    "end": "2797240"
  },
  {
    "text": "when the simulation ends,\nand do things like that. All right, finally, there's\nthis program test, which I",
    "start": "2797240",
    "end": "2807630"
  },
  {
    "text": "won't go over in detail. It's exactly like the drivers\nwe've written for other",
    "start": "2807630",
    "end": "2813190"
  },
  {
    "text": "simulations for at least half\nthe semester, in which I run",
    "start": "2813190",
    "end": "2819470"
  },
  {
    "text": "simbus multiple times,\naccumulate results from trials, and then plot\nthem nicely.",
    "start": "2819470",
    "end": "2827390"
  },
  {
    "text": "All right, let's run it. So I'm going to run it with--",
    "start": "2827390",
    "end": "2834190"
  },
  {
    "text": "I've actually written it\nso that I can look at combinations of speeds\nand capacities.",
    "start": "2834190",
    "end": "2839620"
  },
  {
    "text": "But first, I'll just look\nat small combinations-- i.e. each list will be one.",
    "start": "2839620",
    "end": "2844750"
  },
  {
    "text": "So we'll test it with a capacity\nof 30 and a speed of 10, to 40 trials.",
    "start": "2844750",
    "end": "2850900"
  },
  {
    "text": "Then, we'll test it with a\ncapacity of 15 and the speed of 10 and a capacity of\n15 and a speed of 20.",
    "start": "2850900",
    "end": "2858240"
  },
  {
    "start": "2858240",
    "end": "2871760"
  },
  {
    "start": "2868000",
    "end": "3158000"
  },
  {
    "text": "All right. We have some results. So what we can tell looking at\nGreen Line is that I have a",
    "start": "2871760",
    "end": "2880640"
  },
  {
    "text": "speed of 10 and a\ncapacity of 15. The aggregate average wait time\nis long and apparently",
    "start": "2880640",
    "end": "2890930"
  },
  {
    "text": "growing the longer I\nrun the simulation. I've only plotted here up to the\nfirst 500 times if the bus",
    "start": "2890930",
    "end": "2897290"
  },
  {
    "text": "stop at a stop. But we can imagine that if I\nwent further, it would just get worse for a while.",
    "start": "2897290",
    "end": "2904830"
  },
  {
    "text": "Then, it will eventually\nplateau, but it will take it quite a while to do that. ",
    "start": "2904830",
    "end": "2912120"
  },
  {
    "text": "And here we can see the\ninteresting thing, in that the Blue and the Red Lines are\nnot very different.",
    "start": "2912120",
    "end": "2920640"
  },
  {
    "text": "So what this tells us is\nthere's a trade-off. I can afford to have smaller\nbuses if I make them faster.",
    "start": "2920640",
    "end": "2928810"
  },
  {
    "text": " Or conversely, if I want\nslow buses, I have",
    "start": "2928810",
    "end": "2935040"
  },
  {
    "text": "to make them bigger. And I get more or less the same\naverage wait time and not",
    "start": "2935040",
    "end": "2940720"
  },
  {
    "text": "much difference in how\nmany people are left behind at the end.",
    "start": "2940720",
    "end": "2946109"
  },
  {
    "text": "Clearly, here I have\na big number. These are smallish numbers. Again, we'd have to run it\nlonger to see whether these",
    "start": "2946110",
    "end": "2954410"
  },
  {
    "text": "are stable, and with different\nseeds, or different random numbers, to see whether or not\nthe fact that this is 80 and",
    "start": "2954410",
    "end": "2960119"
  },
  {
    "text": "this is 40 is statistically\nsignificant, or just an accident of this run. Because we do have randomness.",
    "start": "2960120",
    "end": "2967260"
  },
  {
    "text": "But we did do 40 trials, so\nmaybe there's a reason to believe that in fact, this\nis slightly worse.",
    "start": "2967260",
    "end": "2975589"
  },
  {
    "text": "You'll notice also the Blue Line\ndoesn't quite get all the way to 500, which means that\nslow bus didn't get to make",
    "start": "2975590",
    "end": "2983060"
  },
  {
    "text": "enough stops. It took a long time to load\nup, because it had big",
    "start": "2983060",
    "end": "2988170"
  },
  {
    "text": "capacity and didn't really\nget to all of the stops.",
    "start": "2988170",
    "end": "2994430"
  },
  {
    "text": "All right. Let's try another experiment. And let's go change the\nqueueing discipline.",
    "start": "2994430",
    "end": "3000100"
  },
  {
    "start": "3000100",
    "end": "3006070"
  },
  {
    "text": "Go way back up here. And let's make it SRPT\nand see what we get.",
    "start": "3006070",
    "end": "3017630"
  },
  {
    "start": "3017630",
    "end": "3032829"
  },
  {
    "text": "Well, we get something\npretty different.  In particular, you'll note that\nthe average wait time has",
    "start": "3032830",
    "end": "3043470"
  },
  {
    "text": "dropped rather significantly. ",
    "start": "3043470",
    "end": "3049670"
  },
  {
    "text": "It really has, as the theory\npredicted, led to the improved",
    "start": "3049670",
    "end": "3054819"
  },
  {
    "text": "wait times. We'll also notice that it's got\nsome interesting shapes here, where it jumps around,\ngoes up, almost a knee here.",
    "start": "3054820",
    "end": "3065560"
  },
  {
    "text": "And you might try and understand\nwhy it's doing that as you look at the code.",
    "start": "3065560",
    "end": "3071150"
  },
  {
    "text": "Is it random? Is it just bad luck? Is there something fundamental\ngoing on? Think it all through and\ndecide what's going on.",
    "start": "3071150",
    "end": "3081300"
  },
  {
    "text": "All right, finally-- ",
    "start": "3081300",
    "end": "3087780"
  },
  {
    "text": "and, again, I suggest you play\nthis with a lot of different combinations to get a sense\nof what the code is doing.",
    "start": "3087780",
    "end": "3093460"
  },
  {
    "text": "So one last queuing network\nquestion to test your understanding-- different question.",
    "start": "3093460",
    "end": "3099060"
  },
  {
    "text": "Suppose you were given the\njob of hiring a 6.00 lab assistant, and you had a choice\nbetween hiring an MIT",
    "start": "3099060",
    "end": "3106120"
  },
  {
    "text": "student at $15 an hour\nor two Harvard students at $7.50 an hour.",
    "start": "3106120",
    "end": "3114039"
  },
  {
    "text": "Suppose further that the MIT\nstudent could deal with twice as many problems per hour\nas the Harvard students.",
    "start": "3114040",
    "end": "3120380"
  },
  {
    "text": "Does it matter which you hire? ",
    "start": "3120380",
    "end": "3126109"
  },
  {
    "text": "Well, you could build a\nsimulation, and you would discover that in your queuing\nnetwork, it didn't matter.",
    "start": "3126110",
    "end": "3132890"
  },
  {
    "text": "On the other hand, when you ran\nit in real life, you would probably discover that it\nmattered a lot, because the",
    "start": "3132890",
    "end": "3138480"
  },
  {
    "text": "MIT student would answer\nquestions correctly. And the moral is, the queuing\nnetwork never",
    "start": "3138480",
    "end": "3146420"
  },
  {
    "text": "tells the whole story. You've really got to\nthink about the thing in more detail.",
    "start": "3146420",
    "end": "3151680"
  },
  {
    "text": "All right. One more lecture. See you on Thursday. ",
    "start": "3151680",
    "end": "3158165"
  }
]