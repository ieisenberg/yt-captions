[
  {
    "start": "0",
    "end": "20000"
  },
  {
    "text": "i want to take you on a journey of uh what we call a request",
    "start": "80",
    "end": "6640"
  },
  {
    "text": "and specifically an http request because that's the",
    "start": "6640",
    "end": "11840"
  },
  {
    "text": "most ubiquitous and abundant type of request that is on the web",
    "start": "11840",
    "end": "17680"
  },
  {
    "text": "obviously right keep in mind that the",
    "start": "17680",
    "end": "22960"
  },
  {
    "start": "20000",
    "end": "70000"
  },
  {
    "text": "really the anatomy of a request that a front end makes to a back and doesn't",
    "start": "22960",
    "end": "28800"
  },
  {
    "text": "have to be an http request you can do like what the game developers do and",
    "start": "28800",
    "end": "35680"
  },
  {
    "text": "they go deep down into the networking stack and pick a protocol that is so low level and they build their own protocol",
    "start": "35680",
    "end": "43920"
  },
  {
    "text": "because they don't need all the crap that http has you know they send a single bite and boy",
    "start": "43920",
    "end": "50559"
  },
  {
    "text": "they cram as much information in that bite as possible right a bite is eight bits and",
    "start": "50559",
    "end": "56879"
  },
  {
    "text": "then boy they can they can send eight commands they can send eight different",
    "start": "56879",
    "end": "63920"
  },
  {
    "text": "commands in a single bite you know it doesn't have to be a text right it's",
    "start": "63920",
    "end": "69200"
  },
  {
    "text": "just this always fascinates me how how much wastage are there",
    "start": "69200",
    "end": "74640"
  },
  {
    "start": "70000",
    "end": "142000"
  },
  {
    "text": "in http but it is what we have obviously and it's being compressed and being",
    "start": "74640",
    "end": "80560"
  },
  {
    "text": "compact as much as possible but regardless it's not our topic our topic is let's follow",
    "start": "80560",
    "end": "87759"
  },
  {
    "text": "the journey of a request exactly what happens when you take that request and delivers it to the back and",
    "start": "87759",
    "end": "96400"
  },
  {
    "text": "especially when the back end is really not the final destination there is another back end",
    "start": "96400",
    "end": "102320"
  },
  {
    "text": "behind the back end you know because usually in in a",
    "start": "102320",
    "end": "108079"
  },
  {
    "text": "in an enterprise level architecture and when you have like an actual",
    "start": "108079",
    "end": "115360"
  },
  {
    "text": "you know production level system you have all these layers",
    "start": "115360",
    "end": "120719"
  },
  {
    "text": "uh that that your request has you know to has to go through",
    "start": "120719",
    "end": "126880"
  },
  {
    "text": "most of these are an api gateway which is nothing but a glorified reverse proxy",
    "start": "126880",
    "end": "131920"
  },
  {
    "text": "by the way right and behind that could be a load balancer you know",
    "start": "131920",
    "end": "138319"
  },
  {
    "text": "which is again nothing but a glorified reverse proxy but at the end of the day what really",
    "start": "138319",
    "end": "144720"
  },
  {
    "text": "happens and what's the kind of latencies that the request faces before it reaches",
    "start": "144720",
    "end": "150319"
  },
  {
    "text": "you know the the the final you know destination which is actual",
    "start": "150319",
    "end": "157280"
  },
  {
    "text": "web server that understands how to respond",
    "start": "157280",
    "end": "162959"
  },
  {
    "text": "to that request let's go into this journey welcome to the backend engineering show with your",
    "start": "162959",
    "end": "169440"
  },
  {
    "text": "host hussein nasser and let's follow this journey of the",
    "start": "169440",
    "end": "174800"
  },
  {
    "text": "request an http request to be specific right so let's say you have a link",
    "start": "174800",
    "end": "180480"
  },
  {
    "text": "and you receive this link via whatsapp or maybe you you actually have that link in a page",
    "start": "180480",
    "end": "187519"
  },
  {
    "text": "that you have already loaded so there is already a domain that has been loaded and this link is one of them and your cl",
    "start": "187519",
    "end": "194319"
  },
  {
    "text": "you try to click on this link or you actually typing that link in the browser",
    "start": "194319",
    "end": "199519"
  },
  {
    "text": "and hitting enter the three uh scenarios yield completely different",
    "start": "199519",
    "end": "205760"
  },
  {
    "text": "results but i don't have time of it to explain all these scenarios",
    "start": "205760",
    "end": "210959"
  },
  {
    "text": "so let's take the whatsapp example or the messages you received a link from a message and you clicked on that link on",
    "start": "210959",
    "end": "217440"
  },
  {
    "text": "your mobile phone what happened is the operating system will detect that oh",
    "start": "217440",
    "end": "223920"
  },
  {
    "text": "this link is an http link so we need a browser",
    "start": "223920",
    "end": "229040"
  },
  {
    "text": "to understand how to you know render this link let's say",
    "start": "229040",
    "end": "236560"
  },
  {
    "start": "236000",
    "end": "300000"
  },
  {
    "text": "first of all we open a browser instance so we detect",
    "start": "236560",
    "end": "242080"
  },
  {
    "text": "what is your default browser so we open that if we don't have a default browser we prompt you",
    "start": "242080",
    "end": "248000"
  },
  {
    "text": "by we i mean the phone here and then we open a browser regardless chrome safari",
    "start": "248000",
    "end": "254879"
  },
  {
    "text": "you know opera whatever is the default browser and now we open the browser and now",
    "start": "254879",
    "end": "260479"
  },
  {
    "text": "we deliver the link to the browser and we say though this is an http or https link and here is really",
    "start": "260479",
    "end": "268240"
  },
  {
    "text": "what what is really critical was the link sent to you",
    "start": "268240",
    "end": "273840"
  },
  {
    "text": "starts with an https call and slash slash or http call slash and really",
    "start": "273840",
    "end": "279360"
  },
  {
    "text": "makes a difference so let's say we start with https okay",
    "start": "279360",
    "end": "285280"
  },
  {
    "text": "if we start with https then the browser knows that the domain",
    "start": "285280",
    "end": "290800"
  },
  {
    "text": "that i need to connect to lives on port 443 because that's the default port",
    "start": "290800",
    "end": "297199"
  },
  {
    "text": "usually but before even we do that",
    "start": "297199",
    "end": "302240"
  },
  {
    "start": "300000",
    "end": "407000"
  },
  {
    "text": "we really need in order to connect to we need the port which we know now because https",
    "start": "302240",
    "end": "309120"
  },
  {
    "text": "and we need the ip address which we don't have we have a domain",
    "start": "309120",
    "end": "314960"
  },
  {
    "text": "because let's say this this domain is facebook.com let's say someone sent you a facebook post right you wanted to view",
    "start": "314960",
    "end": "321520"
  },
  {
    "text": "that facebook.com so the browser says okay",
    "start": "321520",
    "end": "327199"
  },
  {
    "text": "what is the ips on facebook.com we do a what we call the domain name",
    "start": "327199",
    "end": "334960"
  },
  {
    "text": "query to get the ip errors say dns",
    "start": "336160",
    "end": "341840"
  },
  {
    "text": "so we deliver this query to the operating system to figure it out right",
    "start": "341840",
    "end": "347039"
  },
  {
    "text": "and we depends on the configuration at that end what kind of dns is configured you know",
    "start": "347039",
    "end": "355199"
  },
  {
    "text": "do we have a pure vanilla dns which is on top of udb or do we have this fancy new thing which",
    "start": "355199",
    "end": "361360"
  },
  {
    "text": "is dot or doh or dns security and then we resolve the",
    "start": "361360",
    "end": "367360"
  },
  {
    "text": "dns using the appropriate approach right it's it's an episode by itself dns",
    "start": "367360",
    "end": "373759"
  },
  {
    "text": "resolution so now we find my domain name server",
    "start": "373759",
    "end": "381039"
  },
  {
    "text": "that is configured on the phone which is retrieved from my router which is",
    "start": "381039",
    "end": "386160"
  },
  {
    "text": "probably configured by your admin or maybe you have overridden that on your phone and we use that dns server whether",
    "start": "386160",
    "end": "394479"
  },
  {
    "text": "this is google 888 air cloudflare 1111 or any",
    "start": "394479",
    "end": "399919"
  },
  {
    "text": "any other domain provider or maybe you have your own dns provider you know like a pie hole or whatever",
    "start": "399919",
    "end": "407120"
  },
  {
    "start": "407000",
    "end": "523000"
  },
  {
    "text": "so now we ask that question and the facebook.com we",
    "start": "407120",
    "end": "413199"
  },
  {
    "text": "go to a root server which then takes us to you know one of the 13 wrote servers and",
    "start": "413199",
    "end": "419120"
  },
  {
    "text": "then the questions like okay where is dot com right because we want facebook.com but",
    "start": "419120",
    "end": "424479"
  },
  {
    "text": "we have to answer with the dot-com servers so we go to the topleveldomains.com give me a dot-com",
    "start": "424479",
    "end": "430080"
  },
  {
    "text": "server there are millions of those so we go to one of them and we ask okay give me",
    "start": "430080",
    "end": "436400"
  },
  {
    "text": "uh tell me where facebook.com is and facebook.com facebook.com is like",
    "start": "436400",
    "end": "442479"
  },
  {
    "text": "this is where you can get the answer of facebook.com so you get another server which is called",
    "start": "442479",
    "end": "449840"
  },
  {
    "text": "we go to that and then that gives us the answer",
    "start": "449840",
    "end": "456000"
  },
  {
    "text": "to our facebook.com so authoritative name servers usually belong to facebook",
    "start": "456000",
    "end": "461120"
  },
  {
    "text": "so this is all done by the dns recurser on the background probably synchronously while we are",
    "start": "461120",
    "end": "468080"
  },
  {
    "text": "blocked waiting right assuming we don't have any cache obviously until we get a result we have a",
    "start": "468080",
    "end": "475039"
  },
  {
    "text": "beautiful ips this ip address is usually the iprs of the first front end reverse proxy that all",
    "start": "475039",
    "end": "483360"
  },
  {
    "text": "the request goes to ram and now we have a beautiful ip address in the client side and now we also have a port",
    "start": "483360",
    "end": "490479"
  },
  {
    "text": "now we can establish a connection",
    "start": "490479",
    "end": "496479"
  },
  {
    "text": "and for simplicity i'm going to use http 2. http 3 is a little bit different we",
    "start": "496479",
    "end": "501599"
  },
  {
    "text": "use the quick and i want to get into the complexity of quick now",
    "start": "501599",
    "end": "507520"
  },
  {
    "text": "we still most of the web now is on top of http 2 this although facebook now uses hdb3",
    "start": "507520",
    "end": "514640"
  },
  {
    "text": "and quick almost exclusively but for the sake of example let's simplify the story",
    "start": "514640",
    "end": "522159"
  },
  {
    "start": "523000",
    "end": "746000"
  },
  {
    "text": "so now we establish a tcp connection all right",
    "start": "523440",
    "end": "528800"
  },
  {
    "text": "with with this ip address that we just got on port 443 because that's that's that's",
    "start": "528800",
    "end": "535680"
  },
  {
    "text": "what we need right we need this pair and obviously to establish a tcp",
    "start": "535680",
    "end": "541360"
  },
  {
    "text": "connection we have an ip address and we have also a source port that is",
    "start": "541360",
    "end": "547360"
  },
  {
    "text": "almost random that is used for facebook.com to know how to respond",
    "start": "547360",
    "end": "552800"
  },
  {
    "text": "to us right because a tcp connection is always we need these four pairs this is very critical to",
    "start": "552800",
    "end": "559600"
  },
  {
    "text": "understand these four pairs the four pairs is destination ipaddress where you're going destination port which",
    "start": "559600",
    "end": "565839"
  },
  {
    "text": "application you're going to that on that machine right on that host",
    "start": "565839",
    "end": "571839"
  },
  {
    "text": "and the source ip address where who are you as a host and which application is",
    "start": "571839",
    "end": "578240"
  },
  {
    "text": "actually running right and that's basically the the unique",
    "start": "578240",
    "end": "583839"
  },
  {
    "text": "configuration we basically establish a tcp connection through a three-way",
    "start": "583839",
    "end": "589920"
  },
  {
    "text": "handshake sync a synag and an ack",
    "start": "589920",
    "end": "595440"
  },
  {
    "text": "then now we have a stateful beautiful tcp connection we established sequence numbers so that",
    "start": "595440",
    "end": "601120"
  },
  {
    "text": "we can label our segments right it's like hey this is segment number one obviously that never starts from one",
    "start": "601120",
    "end": "607519"
  },
  {
    "text": "starts from a very big large numbers that both the server and the client agrees on",
    "start": "607519",
    "end": "612720"
  },
  {
    "text": "and now we have some sort of a state going on tcp is stateful we don't know we know that",
    "start": "612720",
    "end": "619040"
  },
  {
    "text": "that's not enough we have a tcp connection beautiful but the next thing is because we know it's the https we",
    "start": "619040",
    "end": "625120"
  },
  {
    "text": "have knowledge tai lopez knowledge of this beautiful",
    "start": "625120",
    "end": "630399"
  },
  {
    "text": "uh link we need to establish on top of that unencrypted tcp connection plain text we",
    "start": "630399",
    "end": "637600"
  },
  {
    "text": "really need to establish a tls we talked about tls many times and the reason is",
    "start": "637600",
    "end": "642800"
  },
  {
    "text": "we really need to establish session keys ephemeral session keys that is only used for this",
    "start": "642800",
    "end": "650240"
  },
  {
    "text": "particular connection so we use the helmet to exchange this session key so even if someone in the",
    "start": "650240",
    "end": "656880"
  },
  {
    "text": "middle trying to really intercept and understand what's going on they can't",
    "start": "656880",
    "end": "662880"
  },
  {
    "text": "right and uh they they we send the client hello to else client hello the server responds",
    "start": "662880",
    "end": "669680"
  },
  {
    "text": "back with a server hello with the certificate proving that you are in fact talking to facebook.com",
    "start": "669680",
    "end": "676000"
  },
  {
    "text": "in the tcp side there is no authentication we don't know that the ip address that",
    "start": "676000",
    "end": "683120"
  },
  {
    "text": "we got actually belongs to facebook we have no knowledge about that the the tls helps us authenticate and",
    "start": "683120",
    "end": "690320"
  },
  {
    "text": "encrypt right authenticate that means hey are you who you say you are okay",
    "start": "690320",
    "end": "695760"
  },
  {
    "text": "and and the re the the it is done by this is this thing that is called certificates right so facebook",
    "start": "695760",
    "end": "702800"
  },
  {
    "text": "will reply with an actual digital certificate that has this string",
    "start": "702800",
    "end": "708760"
  },
  {
    "text": "facebook.com in it and and is signed by some trusted party",
    "start": "708760",
    "end": "714160"
  },
  {
    "text": "called the certificate authority which is signed by another trusted party called the root certificate that everybody's trust on their machines",
    "start": "714160",
    "end": "722160"
  },
  {
    "text": "unless you're a chinese laptop okay",
    "start": "722160",
    "end": "727760"
  },
  {
    "text": "so so now we have this beautiful hierarchy of this we have a trust i know that",
    "start": "727760",
    "end": "734320"
  },
  {
    "text": "we're talking to facebook we established an ephemeral key that we use to encrypt using",
    "start": "734320",
    "end": "739760"
  },
  {
    "text": "symmetric encryption because it's faster than asymmetric public key encryption",
    "start": "739760",
    "end": "745519"
  },
  {
    "text": "right and then now we start encrypting now",
    "start": "745519",
    "end": "750959"
  },
  {
    "start": "746000",
    "end": "926000"
  },
  {
    "text": "the application is ready to actually start sending the request so",
    "start": "750959",
    "end": "757120"
  },
  {
    "text": "a click that we have done on the whatsapp translates to",
    "start": "757120",
    "end": "762880"
  },
  {
    "text": "a get request that's a get request always i get request so we need to send an http",
    "start": "762880",
    "end": "769360"
  },
  {
    "text": "get request right and obviously we have agreed on which protocol we are using with with facebook",
    "start": "769360",
    "end": "775920"
  },
  {
    "text": "in the tls handshake all right this is done by using something called a lpn application layer uh protocol gateway",
    "start": "775920",
    "end": "783440"
  },
  {
    "text": "and uh now we know which uh which application we're using right",
    "start": "783440",
    "end": "788959"
  },
  {
    "text": "we're using which protocol we're using is hdb2 http one one orange to be three",
    "start": "788959",
    "end": "795680"
  },
  {
    "text": "and now we know we're using http two so let's go ahead and send our first get",
    "start": "795680",
    "end": "800800"
  },
  {
    "text": "request we need to construct this get request what are we sending exactly where are we going we're sending the get request",
    "start": "800800",
    "end": "807519"
  },
  {
    "text": "that's the method uh http needs also the protocol so http",
    "start": "807519",
    "end": "812720"
  },
  {
    "text": "2 all right the third parameter is actually a parameter the third",
    "start": "812720",
    "end": "817760"
  },
  {
    "text": "bit that we need is the path and the path is clearly in the link right because facebook.com",
    "start": "817760",
    "end": "825360"
  },
  {
    "text": "that's the whole path and sometimes there is like funky wonky query parameters which starts with the",
    "start": "825360",
    "end": "831120"
  },
  {
    "text": "question mark and blah blah blah blah blah blah so that also is added on top of the path so we have this get",
    "start": "831120",
    "end": "837920"
  },
  {
    "text": "request we have the path and now before we send this wait a minute all",
    "start": "837920",
    "end": "842959"
  },
  {
    "text": "right we need to send this and this is the domain what kind of headers do we need well",
    "start": "842959",
    "end": "849440"
  },
  {
    "text": "the host header this is a very required header host header where are we going we're going to",
    "start": "849440",
    "end": "854839"
  },
  {
    "text": "facebook.com facebook.com put it there you might say why why are we putting redundant information fixed",
    "start": "854839",
    "end": "862240"
  },
  {
    "text": "we know that we're connecting to facebook.com no actually we lost that knowledge we did it in the dns right",
    "start": "862240",
    "end": "868800"
  },
  {
    "text": "and then we got it from facebook from the tls which is a as a certificate but",
    "start": "868800",
    "end": "874320"
  },
  {
    "text": "then we lost that knowledge we lost it right so we need to http is stateless it doesn't know this",
    "start": "874320",
    "end": "881279"
  },
  {
    "text": "stuff so we need to carry on that we're actually hey i'm actually going to facebook.com you put",
    "start": "881279",
    "end": "887680"
  },
  {
    "text": "as a header optionally we need to also authenticate this",
    "start": "887680",
    "end": "892880"
  },
  {
    "text": "request that hey by the way i have visited facebook.com before i",
    "start": "892880",
    "end": "899199"
  },
  {
    "text": "have logged in on facebook.com before and the browser remembers that",
    "start": "899199",
    "end": "907760"
  },
  {
    "text": "and says okay where are you coming from you're coming from whatsapp all right this so this is a click link so it's as if you",
    "start": "907760",
    "end": "915440"
  },
  {
    "text": "went to the browser and actually type fix will recommend you hit enter most browsers treat that as equal",
    "start": "915440",
    "end": "922800"
  },
  {
    "text": "some don't wow okay some don't but now we have a beautiful",
    "start": "922800",
    "end": "929519"
  },
  {
    "start": "926000",
    "end": "975000"
  },
  {
    "text": "you know uh authentication that we can send",
    "start": "929519",
    "end": "935680"
  },
  {
    "text": "it's called cookies so the browser makes the decision should i include",
    "start": "935680",
    "end": "941040"
  },
  {
    "text": "the facebook.com cookie because it's already there i saved it locally",
    "start": "941040",
    "end": "946480"
  },
  {
    "text": "if i include it then facebook eventually will get that",
    "start": "946480",
    "end": "951519"
  },
  {
    "text": "so we include let's say you included cookies boom put the login information and now",
    "start": "951519",
    "end": "959279"
  },
  {
    "text": "we package this beautiful git request there is nobody in guitar requests usually",
    "start": "959279",
    "end": "965360"
  },
  {
    "text": "i say usually because i never seen one and that's i think that's the standard really but some people say they're",
    "start": "965360",
    "end": "971040"
  },
  {
    "text": "that can be broken everything can be broken at the end of the day and now you stick that beautiful payload",
    "start": "971040",
    "end": "979360"
  },
  {
    "start": "975000",
    "end": "1131000"
  },
  {
    "text": "and that could be large payload right now",
    "start": "979360",
    "end": "984720"
  },
  {
    "text": "we need to send it on the tcp vehicle that's the vehicle we have",
    "start": "984720",
    "end": "990480"
  },
  {
    "text": "well what do we send in tcp well we send segments right which translate to ip packets but the tcp segments here let's",
    "start": "990800",
    "end": "998720"
  },
  {
    "text": "say for the sake of example that beautiful request that we have the get request",
    "start": "998720",
    "end": "1006959"
  },
  {
    "text": "which has a long strings of stuff right maybe we also we compressed it when",
    "start": "1006959",
    "end": "1013360"
  },
  {
    "text": "and we did header compression with hpac h-pack with hdb2 we did so much stuff",
    "start": "1013360",
    "end": "1019920"
  },
  {
    "text": "and that beautiful string of bytes we need to send it now it depends on the maximum segment",
    "start": "1019920",
    "end": "1027918"
  },
  {
    "text": "size and the window size that we have been agreed upon on the tcp",
    "start": "1027919",
    "end": "1033600"
  },
  {
    "text": "you know stack we can only send this much this is called the tcp slow start you start slow",
    "start": "1033600",
    "end": "1041038"
  },
  {
    "text": "and then uh if you sense if the tcp stack sense that the back end actually can handle",
    "start": "1041039",
    "end": "1048799"
  },
  {
    "text": "more it will increase the segment size and you can send more more data so let's say",
    "start": "1048799",
    "end": "1056000"
  },
  {
    "text": "i can only send x amount of segments right and my request is too big",
    "start": "1056000",
    "end": "1061679"
  },
  {
    "text": "so i have to break it into four segments right as i start",
    "start": "1061679",
    "end": "1068559"
  },
  {
    "text": "now all segments and here's where the algorithms kicks in",
    "start": "1068559",
    "end": "1074640"
  },
  {
    "text": "should you as a client the client being the mobile phone that had the link",
    "start": "1074640",
    "end": "1081360"
  },
  {
    "text": "from whatsapp and all that jazz right should you send the first segment which is probably",
    "start": "1081360",
    "end": "1089280"
  },
  {
    "text": "going to be nonsense right in the grand scheme of things",
    "start": "1089280",
    "end": "1095120"
  },
  {
    "text": "because it's going to be chopped up get request it's not going to be the whole thing",
    "start": "1095120",
    "end": "1100799"
  },
  {
    "text": "should you send that segment and then wait for an acknowledgement of the server that you have actually",
    "start": "1100799",
    "end": "1107120"
  },
  {
    "text": "receive that segment or should you send the four most clients will behave and says no way",
    "start": "1107120",
    "end": "1115200"
  },
  {
    "text": "no really we really need to send one and then wait because",
    "start": "1115200",
    "end": "1120960"
  },
  {
    "text": "there could be a congestion going in the network and i have no idea about the state of the network so i have to test",
    "start": "1120960",
    "end": "1127120"
  },
  {
    "text": "the network i have to you know i have to play with this network okay let's take this few bites can you handle this",
    "start": "1127120",
    "end": "1134960"
  },
  {
    "text": "yeah can you handle this and then we send it and we wait if we",
    "start": "1134960",
    "end": "1140320"
  },
  {
    "text": "receive an acknowledgement that means hey this seems like the server",
    "start": "1140320",
    "end": "1146640"
  },
  {
    "text": "actually can handle this but we took a hit here because we send it a single segment that is part of our get",
    "start": "1146640",
    "end": "1153919"
  },
  {
    "text": "request remember this is not the full request yet we sent just part of it the client is",
    "start": "1153919",
    "end": "1160320"
  },
  {
    "text": "now waiting you're waiting for facebook.com to open but we never actually delivered the",
    "start": "1160320",
    "end": "1165520"
  },
  {
    "text": "request yet to the back end i want you to really pay attention to this because this is",
    "start": "1165520",
    "end": "1171039"
  },
  {
    "text": "very critical especially in the back when you work with nginx and load balancers and ha proxies and stuff like",
    "start": "1171039",
    "end": "1176880"
  },
  {
    "text": "that this is the low level stuff that you play with and you have to understand",
    "start": "1176880",
    "end": "1182400"
  },
  {
    "text": "so now we sent a segment there's part part one of our four of that http",
    "start": "1182400",
    "end": "1188960"
  },
  {
    "text": "request that are about to send right the back end now here let's say this is the api",
    "start": "1188960",
    "end": "1196320"
  },
  {
    "text": "gateway that is the front end of facebook talking to us",
    "start": "1196320",
    "end": "1202159"
  },
  {
    "text": "right that's why i always say like the every backend has a front end and every front that has a back end at the end of",
    "start": "1202159",
    "end": "1207520"
  },
  {
    "text": "the day right a back end is always a front end of something else",
    "start": "1207520",
    "end": "1212559"
  },
  {
    "text": "so now we receive that segment in the back and the back end and we receive we send back an acknowledgement",
    "start": "1212799",
    "end": "1219200"
  },
  {
    "text": "okay i got it but now we took a hit of latency whatever that round trip time",
    "start": "1219200",
    "end": "1226880"
  },
  {
    "text": "let's say x millisecond we talk it like minimum is like latencies when it's when this comes",
    "start": "1226880",
    "end": "1232880"
  },
  {
    "text": "thing is like 20 millisecond 40 millisecond you're gonna get lucky if you are like",
    "start": "1232880",
    "end": "1238480"
  },
  {
    "text": "going to google and you have like a server next to you you get maybe five eight milliseconds i never seen less you",
    "start": "1238480",
    "end": "1245440"
  },
  {
    "text": "only get like sub millisecond module on local network but you you almost never get uh 10 5 6",
    "start": "1245440",
    "end": "1252799"
  },
  {
    "text": "millisecond if you're going to the internet right there so there is you're taking the hit",
    "start": "1252799",
    "end": "1257840"
  },
  {
    "text": "so 4 milliseconds going or 10 milliseconds going and or 40 milliseconds going 40 millisecond coming",
    "start": "1257840",
    "end": "1263760"
  },
  {
    "text": "back so there is a 80 millisecond hit right",
    "start": "1263760",
    "end": "1269200"
  },
  {
    "text": "and now you send the second segment and let's say you decided the client decided that it's still",
    "start": "1269200",
    "end": "1275120"
  },
  {
    "text": "it's too slow so let's let's let's be patient and send the second segment and wait for an acknowledgement before we",
    "start": "1275120",
    "end": "1281039"
  },
  {
    "text": "send the third segment so now we take a 40 40 milliseconds so",
    "start": "1281039",
    "end": "1286240"
  },
  {
    "text": "we take another 80 so the 160 millisecond you might not feel it 160 millisecond is not",
    "start": "1286240",
    "end": "1292240"
  },
  {
    "text": "sub step sub second but do the do that again 160 plus another 80. do the math 2",
    "start": "1292240",
    "end": "1299760"
  },
  {
    "text": "to 20 to 220 yeah to 20 milliseconds the fourth millisecond now 300 millisecond",
    "start": "1299760",
    "end": "1307520"
  },
  {
    "text": "is what users usually feel you start feeling it so you took 300",
    "start": "1307520",
    "end": "1314720"
  },
  {
    "text": "milliseconds 300 something right millisecond even more than that",
    "start": "1314720",
    "end": "1320880"
  },
  {
    "text": "just to deliver the request to who not your back end",
    "start": "1320880",
    "end": "1328000"
  },
  {
    "text": "that's just to deliver the requests to the api gateway which is the front",
    "start": "1328000",
    "end": "1334640"
  },
  {
    "text": "facing reverse proxy we didn't even reach the back end yet so now",
    "start": "1334640",
    "end": "1340640"
  },
  {
    "text": "the back end which is in this case the api gateway says okay i got folder because okay this makes sense",
    "start": "1340640",
    "end": "1346799"
  },
  {
    "text": "now these four segments combined oh now i understand what this is",
    "start": "1346799",
    "end": "1352799"
  },
  {
    "text": "these are actually part of one stream right because that's how http 2 works and now this beautiful string of bytes",
    "start": "1352799",
    "end": "1361120"
  },
  {
    "text": "compose a beautiful get request with the cookies and stuff now",
    "start": "1361120",
    "end": "1367520"
  },
  {
    "text": "obviously there is decryption on top of that that i didn't talk about we use the symmetric key that we agreed upon with",
    "start": "1367520",
    "end": "1373919"
  },
  {
    "text": "the api gateway to decrypt and then look at that beautiful stuff and then all of this thing now we have a get request",
    "start": "1373919",
    "end": "1382720"
  },
  {
    "text": "now does the api gateway answer absolutely not the api gateway will say wait a minute",
    "start": "1383600",
    "end": "1391039"
  },
  {
    "text": "let's let's see if you are actually authorized to make this request to begin",
    "start": "1391039",
    "end": "1396640"
  },
  {
    "text": "with so we'll check your ip address it will check the nature of the request it's a",
    "start": "1396640",
    "end": "1402320"
  },
  {
    "text": "layer 7 reverse proxy so it didn't it sees the request it's decrypting and it",
    "start": "1402320",
    "end": "1407760"
  },
  {
    "text": "sees your entire request it might need to do some api rate",
    "start": "1407760",
    "end": "1413600"
  },
  {
    "text": "limiting at you it does all sorts of checks and this checks is it takes a finize amount of time in the api gate",
    "start": "1413600",
    "end": "1422240"
  },
  {
    "text": "why you are still while you're still waiting that's a click on whatsapp",
    "start": "1422240",
    "end": "1427919"
  },
  {
    "text": "that was one single click all this time you're doing that stuff",
    "start": "1427919",
    "end": "1433120"
  },
  {
    "text": "api get we got a request says okay you may proceed and when i say you may proceed that means i as an api",
    "start": "1433120",
    "end": "1440960"
  },
  {
    "text": "gateway now i am a front end and my actual back end",
    "start": "1440960",
    "end": "1446559"
  },
  {
    "text": "let's make it simple let's say this is the final destination because i can go on and make it another",
    "start": "1446559",
    "end": "1452799"
  },
  {
    "text": "load balancer which then another hop which goes to another back end but let's simplify let's say the back end is",
    "start": "1452799",
    "end": "1459039"
  },
  {
    "text": "actually the final destination and this is your apache observer this is your caddy this is your lent this is your uh",
    "start": "1459039",
    "end": "1467200"
  },
  {
    "text": "what kind of observers do we have all right mongrel 2 this is whatever web server",
    "start": "1467200",
    "end": "1472480"
  },
  {
    "text": "you're using at the end of the day right your your iis",
    "start": "1472480",
    "end": "1477600"
  },
  {
    "start": "1476000",
    "end": "1553000"
  },
  {
    "text": "and now you're talking to that but how how can you talk to the back end",
    "start": "1477600",
    "end": "1484080"
  },
  {
    "text": "now the",
    "start": "1484080",
    "end": "1489520"
  },
  {
    "text": "the channel between the api gateway and reverse proxy now",
    "start": "1489520",
    "end": "1495840"
  },
  {
    "text": "needs to go through some sort of a similar pattern right",
    "start": "1495840",
    "end": "1501360"
  },
  {
    "text": "either open a connection to the back end eagerly when a request comes it says",
    "start": "1501360",
    "end": "1508880"
  },
  {
    "text": "okay uh you now need to go to this particular server i'm gonna pick one for you because",
    "start": "1508880",
    "end": "1515279"
  },
  {
    "text": "the client doesn't know anything about the actual final back end that's what the definition of a reverse proxy is",
    "start": "1515279",
    "end": "1521120"
  },
  {
    "text": "right you as a client talks to the reverse proxy but you don't know the",
    "start": "1521120",
    "end": "1526159"
  },
  {
    "text": "true final destination it just hides it from you it's like exact reverse of a",
    "start": "1526159",
    "end": "1531279"
  },
  {
    "text": "proxy proxy you know where you're going and you want some help to take you there",
    "start": "1531279",
    "end": "1536960"
  },
  {
    "text": "right that's the proxy so now you talk to diverse proxy in the reverse proxy of facebook talks to an",
    "start": "1536960",
    "end": "1543120"
  },
  {
    "text": "actual backend and now this is where the the creativity of engineering and",
    "start": "1543120",
    "end": "1550000"
  },
  {
    "text": "backend engineer comes into the picture what do you do do you establish a connection on that",
    "start": "1550000",
    "end": "1555520"
  },
  {
    "text": "spot right taking the head of dns which is not much",
    "start": "1555520",
    "end": "1562000"
  },
  {
    "text": "but taking the head of tcp connection and taking the head of tls encryption",
    "start": "1562000",
    "end": "1568000"
  },
  {
    "text": "three hits then package that request again",
    "start": "1568000",
    "end": "1574559"
  },
  {
    "text": "send it or do you preheat this connection",
    "start": "1574559",
    "end": "1580240"
  },
  {
    "text": "prior in anticipation that someone might actually send a request",
    "start": "1580240",
    "end": "1586080"
  },
  {
    "text": "there is pros and cons for both approaches the lazy approach or the eager approach there is pros and cons",
    "start": "1586080",
    "end": "1591360"
  },
  {
    "text": "right because if you preheat them you're wasting memory that might nobody might use as now you have something ready that",
    "start": "1591360",
    "end": "1597760"
  },
  {
    "text": "you just ship something to right the other approach is is hey let's open",
    "start": "1597760",
    "end": "1603279"
  },
  {
    "text": "on demand but it's uh it's going to be slow right the request you're you're taking that",
    "start": "1603279",
    "end": "1609360"
  },
  {
    "text": "synchronous request gets the hit of the establishment of the",
    "start": "1609360",
    "end": "1614640"
  },
  {
    "text": "backing connection does that make sense it's all decisions that you can make that's not true right or wrong there's",
    "start": "1614640",
    "end": "1621039"
  },
  {
    "text": "no nothing like that it's all decisions that you make based on your workload",
    "start": "1621039",
    "end": "1627840"
  },
  {
    "start": "1628000",
    "end": "1701000"
  },
  {
    "text": "so now with now the api gateway packages that get request maybe most of the time adds",
    "start": "1628159",
    "end": "1635679"
  },
  {
    "text": "more even more headers to that request and then ships us to the",
    "start": "1635679",
    "end": "1641039"
  },
  {
    "text": "back end right and usually the api gateway [Music]",
    "start": "1641039",
    "end": "1646480"
  },
  {
    "text": "to the back end this is a local network right because it's it's the back end",
    "start": "1646480",
    "end": "1652799"
  },
  {
    "text": "network interface the neck of the api gateway is different than the neck that",
    "start": "1652799",
    "end": "1658559"
  },
  {
    "text": "talked to the front end right usually have two network cards like not physical torque could be virtual who",
    "start": "1658559",
    "end": "1665600"
  },
  {
    "text": "cares and then now the back end is almost local so there's no latency there's like",
    "start": "1665600",
    "end": "1670880"
  },
  {
    "text": "sub-militech and microsecond latencies right so now if i send that request right i can send",
    "start": "1670880",
    "end": "1677600"
  },
  {
    "text": "it as a whole probably there is a pro pre up that's another advantage of",
    "start": "1677600",
    "end": "1682880"
  },
  {
    "text": "preheating because the pre-heating you can you can send garbage data to a",
    "start": "1682880",
    "end": "1687919"
  },
  {
    "text": "trigger slow start so that we know that we are in a high bandwidth area and we can send that request in one tcp segment",
    "start": "1687919",
    "end": "1696559"
  },
  {
    "text": "beautiful right avoiding that whole latency stuff right and then you receive the request from",
    "start": "1696559",
    "end": "1702559"
  },
  {
    "text": "the back end no no no no you don't receive a request you receive the request on the back end",
    "start": "1702559",
    "end": "1708559"
  },
  {
    "text": "now the back end decrypts the request takes a look at it",
    "start": "1708559",
    "end": "1714000"
  },
  {
    "text": "and then decides to actually execute that request now this is your express",
    "start": "1714000",
    "end": "1719600"
  },
  {
    "text": "server this is your node.js fancy stuff your django your python whatever logic",
    "start": "1719600",
    "end": "1726640"
  },
  {
    "text": "you have now you actually execute it there right",
    "start": "1726640",
    "end": "1731760"
  },
  {
    "text": "this is maybe a query to the database you're doing all that stuff so the response time",
    "start": "1731760",
    "end": "1738559"
  },
  {
    "text": "that usually back in injuries measures is that like how long it takes for me to once i",
    "start": "1738559",
    "end": "1745279"
  },
  {
    "text": "receive that request right after it gets assembled to me",
    "start": "1745279",
    "end": "1750720"
  },
  {
    "text": "i your your slash get method will be called the callback right",
    "start": "1750720",
    "end": "1758000"
  },
  {
    "text": "that that that callback will be called with a request only when when that tcp segments are assembled into what what",
    "start": "1758000",
    "end": "1766159"
  },
  {
    "text": "the backend actually understands as a good request or a post request right now you go and do your own stuff and",
    "start": "1766159",
    "end": "1772559"
  },
  {
    "start": "1770000",
    "end": "1834000"
  },
  {
    "text": "this is you try to minimize the response time as much as possible you do your own thing and now you",
    "start": "1772559",
    "end": "1779360"
  },
  {
    "text": "compile a response http and do the same thing exactly",
    "start": "1779360",
    "end": "1785039"
  },
  {
    "text": "you write that response right to your api gateway you don't know",
    "start": "1785039",
    "end": "1790640"
  },
  {
    "text": "you just write it to whomever send it to you right whoever established the ccp connection with you",
    "start": "1790640",
    "end": "1796320"
  },
  {
    "text": "and now hopefully you can write all the responsibility responses tiny you can do",
    "start": "1796320",
    "end": "1801360"
  },
  {
    "text": "it in a single tcp segment if it's big then it's going to be broken up into the",
    "start": "1801360",
    "end": "1806960"
  },
  {
    "text": "different tcp segments based on the maximum segment size at that point",
    "start": "1806960",
    "end": "1812080"
  },
  {
    "text": "or the window size at that point that's the accurate terminology and then we send it to the api gateway where the ap",
    "start": "1812080",
    "end": "1818240"
  },
  {
    "text": "goes we does the same exact thing decrypt it because it's it's a layer 7 thing right both of these",
    "start": "1818240",
    "end": "1824720"
  },
  {
    "text": "endpoints actually needs to go all up to the first stack which is the layer 7 or the last stack depends on",
    "start": "1824720",
    "end": "1832000"
  },
  {
    "text": "how you look at it and then understand that stuff and then unpack that",
    "start": "1832000",
    "end": "1837919"
  },
  {
    "text": "and then maybe add some more headers right and then now",
    "start": "1837919",
    "end": "1844159"
  },
  {
    "text": "we already the api gateway receives that response",
    "start": "1844159",
    "end": "1849600"
  },
  {
    "text": "it takes it and then writes it back to the client which is our phone right",
    "start": "1849600",
    "end": "1855520"
  },
  {
    "text": "and now the same thing we're at the mercy of the internet we are at the mercy of the tcp window size how much can i send and the",
    "start": "1855520",
    "end": "1863679"
  },
  {
    "text": "larger the response size the more tcp segments you need to send and the more you have to wait for an",
    "start": "1863679",
    "end": "1870240"
  },
  {
    "text": "acknowledgement for these tcp segments so now you can you can play all sorts of games here",
    "start": "1870240",
    "end": "1875919"
  },
  {
    "text": "some even if you have multiple tcp segments you the tcp stack can",
    "start": "1875919",
    "end": "1883279"
  },
  {
    "text": "send a lot of segments without waiting for an acknowledgement and you want to be in that state where",
    "start": "1883279",
    "end": "1890799"
  },
  {
    "text": "you can send as much tcp segments as possible without actually waiting for acknowledgement",
    "start": "1890799",
    "end": "1897519"
  },
  {
    "text": "from the server because if you wait for an acknowledgement that means you have a slow connection that means",
    "start": "1897519",
    "end": "1903200"
  },
  {
    "text": "you don't trust the back end to respond to you in time that means there is a",
    "start": "1903200",
    "end": "1908559"
  },
  {
    "text": "possibility of latency because now you're waiting right so the best configuration that you",
    "start": "1908559",
    "end": "1914320"
  },
  {
    "text": "can get on is is when when the window size is so large that you can send",
    "start": "1914320",
    "end": "1919760"
  },
  {
    "text": "a gigabyte i don't know if that's that big to be honest but you can sit huge",
    "start": "1919760",
    "end": "1925200"
  },
  {
    "text": "amount of data without acknowledgement so hey shove that on the bandwidth because my",
    "start": "1925200",
    "end": "1930720"
  },
  {
    "start": "1926000",
    "end": "2028000"
  },
  {
    "text": "bandwidth the routers in the middle actually are not yelling at me",
    "start": "1930720",
    "end": "1937279"
  },
  {
    "text": "they take my data they can send it and then you receive the response",
    "start": "1937279",
    "end": "1943039"
  },
  {
    "text": "on your client side and now it's probably going to be an html page or a json or whatever",
    "start": "1943039",
    "end": "1949760"
  },
  {
    "text": "now when we receive that on the client side we decrypt it with the session key that we use in tls",
    "start": "1949760",
    "end": "1956480"
  },
  {
    "text": "right we decrypt every tls we decrypt every tcp segment right",
    "start": "1956480",
    "end": "1963039"
  },
  {
    "text": "right however there is that's why the encryption algorithm used in tls",
    "start": "1963039",
    "end": "1970159"
  },
  {
    "text": "must be really fast right otherwise if it's so slow",
    "start": "1970159",
    "end": "1975360"
  },
  {
    "text": "imagine doing that with with a large number of bits that's why aes these symmetric",
    "start": "1975360",
    "end": "1981120"
  },
  {
    "text": "encryption are usually small with 128 bits 256 if you want more security right",
    "start": "1981120",
    "end": "1986640"
  },
  {
    "text": "you have to use a small some number of bits if you use a large number of bits then it's going to be slower",
    "start": "1986640",
    "end": "1992399"
  },
  {
    "text": "that being said it's it's going to be very secure at the end but no one proved that",
    "start": "1992399",
    "end": "1998320"
  },
  {
    "text": "you don't you don't need more than 256 of es bits in security to be honest to to",
    "start": "1998320",
    "end": "2004000"
  },
  {
    "text": "receive great security with symmetric encryption now yeah you receive you decrypt segment",
    "start": "2004000",
    "end": "2009200"
  },
  {
    "text": "by segment you have this beautiful plain text you combine it and you now understand it's an actually an http",
    "start": "2009200",
    "end": "2015840"
  },
  {
    "text": "response you look at the headers you look at the response here",
    "start": "2015840",
    "end": "2021440"
  },
  {
    "text": "you look at the status code oh is it 200 is it for whatever four errors whatever",
    "start": "2021440",
    "end": "2028000"
  },
  {
    "text": "and then you parse the response content type what did we receive we received an http html page we received a json we",
    "start": "2028000",
    "end": "2036399"
  },
  {
    "text": "receive javascript we receive css and then you do what what the browser",
    "start": "2036399",
    "end": "2042080"
  },
  {
    "text": "can do effectively based on the content type of html we render it if it's an",
    "start": "2042080",
    "end": "2047600"
  },
  {
    "text": "image we render it if it's a css we view it if it's a javascript",
    "start": "2047600",
    "end": "2053040"
  },
  {
    "text": "we execute it dangerous sometimes right and",
    "start": "2053040",
    "end": "2059118"
  },
  {
    "text": "that's it that's what we do basically right that's the cycle and that is that was",
    "start": "2059119",
    "end": "2066158"
  },
  {
    "text": "a single request guys now imagine all the stuff you do next",
    "start": "2066159",
    "end": "2074878"
  },
  {
    "text": "time you're gonna send a get request or a loop of get request or",
    "start": "2074879",
    "end": "2080240"
  },
  {
    "text": "you you will again appreciate the cost of all of that",
    "start": "2080240",
    "end": "2086480"
  },
  {
    "text": "and that was the purpose of this podcast effectively just just appreciate what is going on",
    "start": "2086480",
    "end": "2093358"
  },
  {
    "text": "on the back end right on the networking stack on the security stack on the api gateway on the",
    "start": "2093359",
    "end": "2100480"
  },
  {
    "text": "load balancers right and i had only one layer which is api gateway i could have another layer load balancer that's",
    "start": "2100480",
    "end": "2107680"
  },
  {
    "text": "another read and read and buffer read and buffer and then",
    "start": "2107680",
    "end": "2112800"
  },
  {
    "text": "rewrite to another socket and then network interface the operating system latencies",
    "start": "2112800",
    "end": "2119839"
  },
  {
    "text": "i'm pretty much i'm pretty sure i missed so much other stuff as well that i i basically don't have knowledge",
    "start": "2119839",
    "end": "2127359"
  },
  {
    "text": "about yet but i hope you guys enjoyed this podcast if you want a quick plug if",
    "start": "2127359",
    "end": "2133760"
  },
  {
    "text": "you uh if you like this kind of podcast considering checking out my",
    "start": "2133760",
    "end": "2139680"
  },
  {
    "text": "first of all consider checking out my our membership here in youtube if you join the membership uh i have over 60",
    "start": "2139680",
    "end": "2146560"
  },
  {
    "text": "videos of member only exclusive content that you can't get public on youtube",
    "start": "2146560",
    "end": "2151920"
  },
  {
    "text": "right so you get access to that and consider also checking my fundamentals",
    "start": "2151920",
    "end": "2157040"
  },
  {
    "text": "of nginx our introduction to nginx udemy course where i talked about these kind of you know in detail uh the",
    "start": "2157040",
    "end": "2164160"
  },
  {
    "text": "fundamentals of reverse proxies load balancers the different configuration",
    "start": "2164160",
    "end": "2169200"
  },
  {
    "text": "that you can put in genex on the different ciphers that you can put mginx on and do do all this kind of",
    "start": "2169200",
    "end": "2176800"
  },
  {
    "text": "cool stuff right talking about the basics fundamentals that you can apply on your daily jobs consider that go to",
    "start": "2176800",
    "end": "2183200"
  },
  {
    "text": "nginx.json.com for a discount coupon thank you so much",
    "start": "2183200",
    "end": "2189839"
  },
  {
    "text": "guys for uh listening or watching if you're listening to this on the podcast or spotify or apple podcast i appreciate",
    "start": "2189839",
    "end": "2196240"
  },
  {
    "text": "you thank you so much uh i'm gonna see you in the next one you guys stay awesome",
    "start": "2196240",
    "end": "2202480"
  }
]