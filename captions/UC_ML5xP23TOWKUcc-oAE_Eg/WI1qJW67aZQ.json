[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "in this episode of the backend engineering show we're going to discuss the amazon outage there were effectively",
    "start": "240",
    "end": "7600"
  },
  {
    "text": "two outages in december one that happened on december 7th that",
    "start": "7600",
    "end": "12799"
  },
  {
    "text": "we're going to discuss in this episode and another one that happened a couple days ago december 15 a week later",
    "start": "12799",
    "end": "19680"
  },
  {
    "text": "right that affected the west region of uh the amazon cloud",
    "start": "19680",
    "end": "25119"
  },
  {
    "text": "while the first one affected the east one so in this episode what i'm gonna do is i'm",
    "start": "25119",
    "end": "30720"
  },
  {
    "text": "gonna talk only about the east region because we have a root cause analysis uh detailed beautiful root cause",
    "start": "30720",
    "end": "37760"
  },
  {
    "text": "analysis of that and uh what i'm gonna do is i'll i'll take a",
    "start": "37760",
    "end": "43280"
  },
  {
    "text": "few more minutes to summarize what is the outage and then for those",
    "start": "43280",
    "end": "48640"
  },
  {
    "text": "interested i'm gonna then go into a deep dive and usually this is the fun part where we effectively",
    "start": "48640",
    "end": "55039"
  },
  {
    "text": "break down everything in the report and discuss and and have a lengthy",
    "start": "55039",
    "end": "63120"
  },
  {
    "text": "you know deep discussion about the inter infrastructure on the back end about uh",
    "start": "63120",
    "end": "69280"
  },
  {
    "text": "amazon in this case and what caused the outreach and what can we learn as engineers from this beautiful outage",
    "start": "69280",
    "end": "77200"
  },
  {
    "text": "yes i call it beautiful because it is beautiful but it is catastrophic i know for customers but to us",
    "start": "77200",
    "end": "84320"
  },
  {
    "text": "i don't know this is this is a learning experience that you know to to engineers like uh to like",
    "start": "84320",
    "end": "91280"
  },
  {
    "text": "you know just uh uh avoid these kind of situations most",
    "start": "91280",
    "end": "96400"
  },
  {
    "text": "of us you know don't work on this massive huge cloud you know like amazon",
    "start": "96400",
    "end": "102399"
  },
  {
    "text": "scale so it's really it's really uh refreshing to see",
    "start": "102399",
    "end": "107600"
  },
  {
    "text": "you know to learn and to get like a to get a peek on their internal architecture where we",
    "start": "107600",
    "end": "113280"
  },
  {
    "text": "get when we get these kind of outages so how about we jump into it welcome to",
    "start": "113280",
    "end": "119680"
  },
  {
    "text": "the backend engineering show with your host hussein nasser and here's a quick summary of what happened",
    "start": "119680",
    "end": "126079"
  },
  {
    "start": "120000",
    "end": "520000"
  },
  {
    "text": "on december 7th 2021 on the east region of the amazon cloud",
    "start": "126079",
    "end": "134000"
  },
  {
    "text": "which lasted around seven hours which is a lot for an outage",
    "start": "134000",
    "end": "140319"
  },
  {
    "text": "but what happened is amazon have two",
    "start": "140319",
    "end": "146319"
  },
  {
    "text": "networks what they call the main network was where the customers live you know where",
    "start": "146319",
    "end": "152319"
  },
  {
    "text": "your ec2 ec2 stuff running where you have your dynamodbs",
    "start": "152319",
    "end": "158800"
  },
  {
    "text": "where you have your you know what we call this the lambda serverless",
    "start": "158800",
    "end": "165360"
  },
  {
    "text": "everything is there the customer workload and there is the this is the first network the main network as they",
    "start": "165360",
    "end": "172000"
  },
  {
    "text": "call it and there is the internal amazon network which have the internal services",
    "start": "172000",
    "end": "178480"
  },
  {
    "text": "you know monitoring staff internal dns a very important piece so that their authoritative name servers",
    "start": "178480",
    "end": "186319"
  },
  {
    "text": "live in this internal network and obviously the main network",
    "start": "186319",
    "end": "192480"
  },
  {
    "text": "and the internal network need to communicate to each other right these are completely almost isolated but there",
    "start": "192480",
    "end": "198959"
  },
  {
    "text": "are routers and network devices that kind of gnat things together network",
    "start": "198959",
    "end": "204239"
  },
  {
    "text": "does a network address translation to to enable this communication because",
    "start": "204239",
    "end": "210080"
  },
  {
    "text": "the at the end of the day this these internal services need something from the main network and vice versa the main",
    "start": "210080",
    "end": "216959"
  },
  {
    "text": "network will need access for example to dns or access to ec2",
    "start": "216959",
    "end": "223120"
  },
  {
    "text": "uh apis to spin up a new ec2 instances which by the way live in the internal",
    "start": "223120",
    "end": "229440"
  },
  {
    "text": "network right so what happened what happened is",
    "start": "229440",
    "end": "235519"
  },
  {
    "text": "an automated activity on the main network",
    "start": "235519",
    "end": "241040"
  },
  {
    "text": "uh triggered some sort of scaling scaled one of those services they didn't",
    "start": "241040",
    "end": "246400"
  },
  {
    "text": "tell us which one and this service started to scale in the main network start to scale that's a scale",
    "start": "246400",
    "end": "252879"
  },
  {
    "text": "this triggered an unexpected behavior in the internal network clients from the internet",
    "start": "252879",
    "end": "259919"
  },
  {
    "text": "workdays effectively just flooded requests to the main network to kind of",
    "start": "259919",
    "end": "266080"
  },
  {
    "text": "consume the the this this recently scaled services",
    "start": "266080",
    "end": "272479"
  },
  {
    "text": "and as a result this surge of requests from the internal network to the main network caused these",
    "start": "272479",
    "end": "280160"
  },
  {
    "text": "uh you know this weak points effectively right off of that that supports these",
    "start": "280160",
    "end": "285759"
  },
  {
    "text": "two networks to experience huge congestion this was unexpected it's like",
    "start": "285759",
    "end": "291600"
  },
  {
    "text": "they didn't tell us much but they said large and when amazon said large you know amazon's large when they actually",
    "start": "291600",
    "end": "298000"
  },
  {
    "text": "say large that means it's really really big right so as a result",
    "start": "298000",
    "end": "303759"
  },
  {
    "text": "this risk to congestion between the internal network and the main network so keep in mind services",
    "start": "303759",
    "end": "310160"
  },
  {
    "text": "are fine the services in here are fine the services are here and fine is are fine",
    "start": "310160",
    "end": "316960"
  },
  {
    "text": "and now but the communication between these two networks",
    "start": "316960",
    "end": "322960"
  },
  {
    "text": "is what got you know congested and what what happened when the auto congestion these",
    "start": "322960",
    "end": "329199"
  },
  {
    "text": "routers the packets between these routers uh get slowed down as a result",
    "start": "329199",
    "end": "336720"
  },
  {
    "text": "packets will be dropped and as a result the clients and the servers on this both",
    "start": "336720",
    "end": "343840"
  },
  {
    "text": "side from both sides really whatever the main network want to talk to internal internally i want to take to",
    "start": "343840",
    "end": "349600"
  },
  {
    "text": "the main both experienced errors all right and when errors happen what",
    "start": "349600",
    "end": "355840"
  },
  {
    "text": "happens you know you're an engineer what do you do when when a request fails",
    "start": "355840",
    "end": "361759"
  },
  {
    "text": "most of the time you retry and when you rethraw you exacerbate",
    "start": "361759",
    "end": "367280"
  },
  {
    "text": "the problem you just you just amplify the thing right that's why you have to kind of implement",
    "start": "367280",
    "end": "373120"
  },
  {
    "text": "some sort of a back off you know logic and short circuit and whatnot",
    "start": "373120",
    "end": "378400"
  },
  {
    "text": "these kind of things to to kind of slow down it's like oh so effectively what happened this is the summary of what happened amazon ddosed",
    "start": "378400",
    "end": "385919"
  },
  {
    "text": "themselves that's exactly what happened all right so how did they fix it uh well",
    "start": "385919",
    "end": "391840"
  },
  {
    "text": "they applied some remediation to move a certain heavy network traffic",
    "start": "391840",
    "end": "398800"
  },
  {
    "text": "right to another path they didn't say what path and as a result slowly slowly",
    "start": "398800",
    "end": "404000"
  },
  {
    "text": "they fixed the congestion but when they fix the conjunction at after",
    "start": "404000",
    "end": "409520"
  },
  {
    "text": "seven hours obviously the the residue of the failed request will remain right",
    "start": "409520",
    "end": "417039"
  },
  {
    "text": "because you keep retrying and there are you know the services keep cache of oh i took to this service",
    "start": "417039",
    "end": "423520"
  },
  {
    "text": "before and it was failing so i'm not going to try again so the state these services will store a",
    "start": "423520",
    "end": "430240"
  },
  {
    "text": "state that oh this service is down it will not try again right and uh so so the end user will still see",
    "start": "430240",
    "end": "440319"
  },
  {
    "text": "uh that the the server is not working but the actual back-end is still",
    "start": "440319",
    "end": "445759"
  },
  {
    "text": "is now running right but it will take time for the application to resume you",
    "start": "445759",
    "end": "450800"
  },
  {
    "text": "know just clear the cash and you know clear all the you know uh the the health",
    "start": "450800",
    "end": "456479"
  },
  {
    "text": "status and whatnot so that that's basically what happened basically yeah so most of the stuff were effectively",
    "start": "456479",
    "end": "462319"
  },
  {
    "text": "running to be honest right it's just certain workloads where when you want to",
    "start": "462319",
    "end": "468080"
  },
  {
    "text": "spin up a new ec2 in a stance when you have a specific api that rely on",
    "start": "468080",
    "end": "475039"
  },
  {
    "text": "creating a new resource like you know if i want to call ddl you know operations like if you want to actually",
    "start": "475039",
    "end": "482560"
  },
  {
    "text": "change something right in your resources you want to spin up a new vm this things rely on which relies",
    "start": "482560",
    "end": "490720"
  },
  {
    "text": "on the internal network that's what we're effectively that's what was",
    "start": "490720",
    "end": "497039"
  },
  {
    "text": "what was affected and mainly the the main thing here is really dns if",
    "start": "497039",
    "end": "505039"
  },
  {
    "text": "they fix dns in the first two hours if they did not fix dns it will be a disaster it was already a",
    "start": "505039",
    "end": "511919"
  },
  {
    "text": "disaster but but yeah if they didn't fix dns in the first two hours",
    "start": "511919",
    "end": "517440"
  },
  {
    "text": "it would have been really disaster because dns is the the really the the most important thing right so that's the",
    "start": "517440",
    "end": "523440"
  },
  {
    "start": "520000",
    "end": "2760000"
  },
  {
    "text": "summary of the outage for those interested you can stay along tag along and let's have fun reading",
    "start": "523440",
    "end": "529360"
  },
  {
    "text": "reading the root cause analysis of this beautiful beautiful outage all right",
    "start": "529360",
    "end": "536000"
  },
  {
    "text": "guys i'm gonna reference this root cause analysis again we're talking about the first outage that happened on uh",
    "start": "536000",
    "end": "543760"
  },
  {
    "text": "on amazon cloud this is the outage that happened on december 7th",
    "start": "543760",
    "end": "549279"
  },
  {
    "text": "2021 on the us east the u.s east region north virginia there",
    "start": "549279",
    "end": "556720"
  },
  {
    "text": "was another outage that happened two days ago on december 15th we don't have",
    "start": "556720",
    "end": "561839"
  },
  {
    "text": "a root cause analysis of that although they they themselves says it's always also a network congestion we don't know",
    "start": "561839",
    "end": "568080"
  },
  {
    "text": "if it's the same exact problem but i'll i'll keep you in the loop",
    "start": "568080",
    "end": "573839"
  },
  {
    "text": "if i heard anything but yeah let's read through the issue summary and let's let's just",
    "start": "573839",
    "end": "580399"
  },
  {
    "text": "read through the read through this and then analyze",
    "start": "580399",
    "end": "586160"
  },
  {
    "text": "this outage issue summary to explain this event",
    "start": "586160",
    "end": "591519"
  },
  {
    "text": "we need to share a little bit about internals of the edibles network while the majority of aws services and all",
    "start": "591519",
    "end": "598800"
  },
  {
    "text": "customer applications run within the main aws network again they they mention",
    "start": "598800",
    "end": "604800"
  },
  {
    "text": "this main aws network aws makes use of an internal network to host",
    "start": "604800",
    "end": "612680"
  },
  {
    "text": "foundational services right so this internal there you might say why do we need two networks why don't we have this",
    "start": "612680",
    "end": "619839"
  },
  {
    "text": "massive uh everything hosted on the massive main network",
    "start": "619839",
    "end": "625120"
  },
  {
    "text": "i'm not if i would guess uh this is the same as facebook when we analyze the facebook outage they usually",
    "start": "625120",
    "end": "632480"
  },
  {
    "text": "you know things that they don't want to expose to the public internet they host",
    "start": "632480",
    "end": "637839"
  },
  {
    "text": "it in the internal network and there's only specific services that can access",
    "start": "637839",
    "end": "643360"
  },
  {
    "text": "this network it's just security i would say right i don't know if there was any other reasons but mainly securities like",
    "start": "643360",
    "end": "649519"
  },
  {
    "text": "there is no there is no business for these kind of um uh",
    "start": "649519",
    "end": "654720"
  },
  {
    "text": "services to be accessed from the internet you know just yeah if there is no if there is no need",
    "start": "654720",
    "end": "660800"
  },
  {
    "text": "for something you don't you you shouldn't really do it right uh just to minimize the attack surface",
    "start": "660800",
    "end": "667519"
  },
  {
    "text": "so to host the foundational service including monitoring yeah you don't want monitoring stuff to be accessed to the",
    "start": "667519",
    "end": "673440"
  },
  {
    "text": "internet that's just bad right internal dns right well yeah authoritative name server",
    "start": "673440",
    "end": "681440"
  },
  {
    "text": "i i believe yeah this is this is a really interesting thing interesting right the",
    "start": "681440",
    "end": "686720"
  },
  {
    "text": "internal dns so i would imagine that there will be some sort of authoritative dns name",
    "start": "686720",
    "end": "693600"
  },
  {
    "text": "servers on the main network you know for accessing things from the clients perspective that",
    "start": "693600",
    "end": "700720"
  },
  {
    "text": "are outside in the internet right if i want to access an s3 bucket there will",
    "start": "700720",
    "end": "706000"
  },
  {
    "text": "be a specific domain right i'm not going to go to the internal dns to resolve it",
    "start": "706000",
    "end": "711440"
  },
  {
    "text": "i don't even know where that is there must be something that is exposed to the",
    "start": "711440",
    "end": "716959"
  },
  {
    "text": "outside internet you know through cloudflare you know that then points to",
    "start": "716959",
    "end": "722880"
  },
  {
    "text": "an authoritative name server that lives outside",
    "start": "722880",
    "end": "727920"
  },
  {
    "text": "right amazon amazon maybe in the main network but this should be accessible",
    "start": "727920",
    "end": "733680"
  },
  {
    "text": "by cloudflare or google dns result recurser to actually effectively reach",
    "start": "733680",
    "end": "739680"
  },
  {
    "text": "this authoritative name sorry to know where this domain lives so outside",
    "start": "739680",
    "end": "744800"
  },
  {
    "text": "clients can consume now internal clients in the main network might have dns that",
    "start": "744800",
    "end": "750320"
  },
  {
    "text": "are completely internal have nothing to do with the internet these i believe rely on internal dns which are not even",
    "start": "750320",
    "end": "758399"
  },
  {
    "text": "exposed to the internet they are just completely internal you know like when you go to work you have you probably",
    "start": "758399",
    "end": "764720"
  },
  {
    "text": "have an engineering department you know you have something.something.com you know that has doesn't resolve when",
    "start": "764720",
    "end": "772079"
  },
  {
    "text": "you go outside into your vpn it won't result but if you're in the vpn",
    "start": "772079",
    "end": "778079"
  },
  {
    "text": "it wears off because it's an internal thing completely internal to your effectively work environment the same",
    "start": "778079",
    "end": "784800"
  },
  {
    "text": "thing i believe i believe this is similar internal data i might be wrong obviously that might be wrong",
    "start": "784800",
    "end": "790639"
  },
  {
    "text": "but yeah that's that's my guess so there was there they are maintaining two authoritative",
    "start": "790639",
    "end": "796480"
  },
  {
    "text": "domain name servers so this is when we say internal dns",
    "start": "796480",
    "end": "802560"
  },
  {
    "text": "we're talking about the authoritative name servers living in the internal network that serves dns queries for",
    "start": "802560",
    "end": "810560"
  },
  {
    "text": "hosts that are internal right to the network and when i say internal here i mean both in the main",
    "start": "810560",
    "end": "816399"
  },
  {
    "text": "and the internal network right then at the end of the day you always",
    "start": "816399",
    "end": "822079"
  },
  {
    "text": "think about it's like how do you you know minimize",
    "start": "822079",
    "end": "827120"
  },
  {
    "text": "attack surfaces how do you minimize traffic like latency and and whatnot",
    "start": "827120",
    "end": "833360"
  },
  {
    "text": "authorization services how can i authorize a certain service to access another service they didn't",
    "start": "833360",
    "end": "839519"
  },
  {
    "text": "mention they are using microservices and or now but if they do then if a service want to talk to another service i",
    "start": "839519",
    "end": "846079"
  },
  {
    "text": "believe they have to talk to the authoritative services and this at this rate will never finish but",
    "start": "846079",
    "end": "853360"
  },
  {
    "text": "you know if you are here already you know what you signed up for i take my time when i discuss these things",
    "start": "853360",
    "end": "860800"
  },
  {
    "text": "it's not really uh it's not really an educational",
    "start": "860800",
    "end": "866000"
  },
  {
    "text": "you know videos we're learning together things here",
    "start": "866000",
    "end": "871279"
  },
  {
    "text": "right and parts of the ec2 control plane and when you when you hear more about",
    "start": "871279",
    "end": "876320"
  },
  {
    "text": "this not easy to it when it comes to like the actual living vms no but the the apis",
    "start": "876320",
    "end": "885360"
  },
  {
    "text": "that spins up a new ec2 vms and so on right the apis to hey tell me what's the",
    "start": "885360",
    "end": "892079"
  },
  {
    "text": "status of this vm this the state of the ac2 i guess lives in the internal",
    "start": "892079",
    "end": "899040"
  },
  {
    "text": "network for some reason why i don't know okay maybe security issues",
    "start": "899040",
    "end": "906639"
  },
  {
    "text": "because of the importance of these services in the internal network we connect this network with multiple",
    "start": "906639",
    "end": "912720"
  },
  {
    "text": "geographically isolated network devices and scale the capacity",
    "start": "912720",
    "end": "920000"
  },
  {
    "text": "of this network significantly to ensure high availability of this",
    "start": "920000",
    "end": "925440"
  },
  {
    "text": "network connection so these network devices right that",
    "start": "925440",
    "end": "930639"
  },
  {
    "text": "that isolates the main network and the internal network or as we're talking",
    "start": "930639",
    "end": "936399"
  },
  {
    "text": "about these guys now right this networking devices provide additional routing and network address",
    "start": "936399",
    "end": "943519"
  },
  {
    "text": "translation of course nat right because i believe this internal network will have",
    "start": "943519",
    "end": "948560"
  },
  {
    "text": "don't call me on it but my guess is going to be private ip addresses like like we the one we have like",
    "start": "948560",
    "end": "955279"
  },
  {
    "text": "10.0.0.1.002 right just like",
    "start": "955279",
    "end": "960639"
  },
  {
    "text": "we have internally at your work right and then there will be some sort of a network address translation between the",
    "start": "960639",
    "end": "966839"
  },
  {
    "text": "public main network which is exposed to the internet and to translate this down",
    "start": "966839",
    "end": "972720"
  },
  {
    "text": "to a to the private and so on vice versa right that's my guess",
    "start": "972720",
    "end": "979839"
  },
  {
    "text": "again i don't know anything about amazon architecture but if i would guess",
    "start": "980079",
    "end": "986079"
  },
  {
    "text": "this is it right it might be who knows maybe maybe it is up exposed to the internet throughout",
    "start": "986079",
    "end": "991759"
  },
  {
    "text": "some other paths right that allows aws services to communicate",
    "start": "991759",
    "end": "998800"
  },
  {
    "text": "between the internal network and the main aws network right this is how you this",
    "start": "998800",
    "end": "1004800"
  },
  {
    "text": "is how nat works effectively this is very similar to what you do when you you are in your private network and you want",
    "start": "1004800",
    "end": "1011279"
  },
  {
    "text": "to access a resource on the internet you do your router does not because it won't won't let you go",
    "start": "1011279",
    "end": "1018320"
  },
  {
    "text": "to the public internet with your private 1002 private address to the internet",
    "start": "1018320",
    "end": "1025360"
  },
  {
    "text": "they they translate that and replace the packet the ip packet",
    "start": "1025360",
    "end": "1032000"
  },
  {
    "text": "with your router's public ip address right and and send that and when the",
    "start": "1032000",
    "end": "1037520"
  },
  {
    "text": "right when the packet comes back to that destination poor in no the",
    "start": "1037520",
    "end": "1042959"
  },
  {
    "text": "router knows oh uh this packet this port oh this private ip address",
    "start": "1042959",
    "end": "1049120"
  },
  {
    "text": "requested it so it will swizzle effectively at 7 30 a.m pacific standard",
    "start": "1049120",
    "end": "1055360"
  },
  {
    "text": "time an automated activity to scale capacity of one of the",
    "start": "1055360",
    "end": "1061120"
  },
  {
    "text": "aws services hosted in the main aws network",
    "start": "1061120",
    "end": "1066880"
  },
  {
    "text": "triggered an expect unexp it triggered an unexpected that that's a",
    "start": "1066880",
    "end": "1072240"
  },
  {
    "text": "tongue twister triggered an unexpected behavior from a large number of clients inside",
    "start": "1072240",
    "end": "1079919"
  },
  {
    "text": "the internal network so there is a main network something got scaled there",
    "start": "1079919",
    "end": "1085120"
  },
  {
    "text": "and there is an internal network which says yummy yummy something is really",
    "start": "1085120",
    "end": "1091120"
  },
  {
    "text": "baking in the main network let me let's just flood there so all of this just",
    "start": "1091120",
    "end": "1097200"
  },
  {
    "text": "jumped a flood of requests a large number and when amazon said large it is large it's got to be large",
    "start": "1097200",
    "end": "1104559"
  },
  {
    "text": "so effectively amazon ddos themselves that's what happened this results in a large surge of",
    "start": "1104559",
    "end": "1111840"
  },
  {
    "text": "connection activity that overwhelmed the network devices between the internal network and the",
    "start": "1111840",
    "end": "1118880"
  },
  {
    "text": "main aws network and god knows how large this nat table grew right",
    "start": "1118880",
    "end": "1124480"
  },
  {
    "text": "and i don't know really the performance when it comes to i mean if if you're like in a home network",
    "start": "1124480",
    "end": "1130480"
  },
  {
    "text": "right you have like a few devices and then that table will not grow that large right like you have a couple of devices",
    "start": "1130480",
    "end": "1136960"
  },
  {
    "text": "you might have a ring device you might have like a camera and these yeah will have their own entry",
    "start": "1136960",
    "end": "1142400"
  },
  {
    "text": "but if the connections persist yeah and this connection needs to be alive",
    "start": "1142400",
    "end": "1150640"
  },
  {
    "text": "and multiply that by a large number of clients i'm i'm guessing tens and tens and tens",
    "start": "1150640",
    "end": "1157120"
  },
  {
    "text": "and thousands and more that's a lot of entries",
    "start": "1157120",
    "end": "1162559"
  },
  {
    "text": "that's a lot of entries in the net table and when you have a large entries in the table at the end of the day you're gonna",
    "start": "1162559",
    "end": "1168799"
  },
  {
    "text": "what a table is a table right you're gonna scan it and scanning takes time right and you're on the database land",
    "start": "1168799",
    "end": "1175760"
  },
  {
    "text": "and we speak of database shameless plug if you want to learn the fundamentals of database engineering check out my course",
    "start": "1175760",
    "end": "1181440"
  },
  {
    "text": "fundamentals of database engineering head to database dot hussein also dot com",
    "start": "1181440",
    "end": "1187520"
  },
  {
    "text": "and get yourself a coupon discount coupon from there learn the fundamentals of",
    "start": "1187520",
    "end": "1192960"
  },
  {
    "text": "database engineering which will just set you up anything on top any any stuff on",
    "start": "1192960",
    "end": "1198000"
  },
  {
    "text": "top that is just tools and stuff you will understand that don't teach you",
    "start": "1198000",
    "end": "1203360"
  },
  {
    "text": "these tools i teach you the fundamentals and these fundamentals you just start building up the building blocks and you",
    "start": "1203360",
    "end": "1209840"
  },
  {
    "text": "will understand almost how everything work on the database at the higher level",
    "start": "1209840",
    "end": "1215679"
  },
  {
    "text": "the fundamentals are very important all right so yeah and that as the net table grows it will slow things down you",
    "start": "1215679",
    "end": "1222320"
  },
  {
    "text": "know because the router need to search and the search er god knows if then if the router",
    "start": "1222320",
    "end": "1227760"
  },
  {
    "text": "actually uh index these entries or not if the index still needs to maintain all",
    "start": "1227760",
    "end": "1233120"
  },
  {
    "text": "of this really is just code at the end of the day and",
    "start": "1233120",
    "end": "1238720"
  },
  {
    "text": "nothing is free right we take everything for granted if",
    "start": "1238720",
    "end": "1244720"
  },
  {
    "text": "you think about it right now i'm not sure if this is really uh",
    "start": "1244720",
    "end": "1250080"
  },
  {
    "text": "the the nat table growing is really a problem but i'm i'm just guessing right",
    "start": "1250080",
    "end": "1255520"
  },
  {
    "text": "is that a problem with guessing please say no",
    "start": "1255520",
    "end": "1260480"
  },
  {
    "text": "all right this resulted in a logic activity will overwhelm network devices between the internet or in the main resulting delays the communication",
    "start": "1260960",
    "end": "1267200"
  },
  {
    "text": "between this network these delays increase latency what's wrong with you brave why are you",
    "start": "1267200",
    "end": "1273039"
  },
  {
    "text": "what is this what is this all right",
    "start": "1273039",
    "end": "1278480"
  },
  {
    "text": "these delays increased latency and errors for services communicating between these network resulting in one",
    "start": "1278480",
    "end": "1286240"
  },
  {
    "text": "more connection and in even more connection attempts and retries",
    "start": "1286240",
    "end": "1293039"
  },
  {
    "text": "talked about that all right clients are just wired most",
    "start": "1293039",
    "end": "1298240"
  },
  {
    "text": "clients are wired to retry morse clients are wired to retry",
    "start": "1298240",
    "end": "1304960"
  },
  {
    "text": "and when you retry things the back end is still processing your original thing but in you if you send another request",
    "start": "1304960",
    "end": "1312080"
  },
  {
    "text": "to retry you just added amplified right and uh that that is bad effectively",
    "start": "1312080",
    "end": "1321120"
  },
  {
    "text": "this led to persistent persistent congestion and performance issues on the devices",
    "start": "1321440",
    "end": "1328480"
  },
  {
    "text": "connecting the two networks see this is very critical the devices in the network itself in",
    "start": "1328480",
    "end": "1335360"
  },
  {
    "text": "both networks right because there are switches and stuff like that between the networks themselves",
    "start": "1335360",
    "end": "1340400"
  },
  {
    "text": "we're talking about the devices that link these two networks together all of a sudden",
    "start": "1340400",
    "end": "1347840"
  },
  {
    "text": "they are congested so now traffic let's be very specific",
    "start": "1347840",
    "end": "1353679"
  },
  {
    "text": "traffic that needs to go from the main network to the internal network is almost dead now almost",
    "start": "1353679",
    "end": "1360880"
  },
  {
    "text": "traffic that goes from the internet directly to the main network to consume i don't know a web server that's fine",
    "start": "1360880",
    "end": "1366640"
  },
  {
    "text": "that should be fine right but for example if your app utilizes",
    "start": "1366640",
    "end": "1372559"
  },
  {
    "text": "some sort of a logging [Music] right like let's say you you",
    "start": "1372559",
    "end": "1377600"
  },
  {
    "text": "i i want to use your aws web server right and i did that i connected to your aws",
    "start": "1377600",
    "end": "1383679"
  },
  {
    "text": "service and i did i don't know a bad login you want to log this activity",
    "start": "1383679",
    "end": "1389200"
  },
  {
    "text": "right and do you want to use some sort of a aws service that logs this logging",
    "start": "1389200",
    "end": "1394480"
  },
  {
    "text": "and monitoring probably uses the internal network so asynchronously",
    "start": "1394480",
    "end": "1401039"
  },
  {
    "text": "on the back end your app might be flailing right but the",
    "start": "1401039",
    "end": "1406960"
  },
  {
    "text": "front end when i say frontend i don't mean the app right the mobile app i mean the front-end",
    "start": "1406960",
    "end": "1412960"
  },
  {
    "text": "web server it's it's serving requests fine does that make sense you know only when",
    "start": "1412960",
    "end": "1420320"
  },
  {
    "text": "when your request relies on something that is on the internal network that's when it's effective right",
    "start": "1420320",
    "end": "1426720"
  },
  {
    "text": "so i'm really surprised when i saw all the twitter messages had like a hula's down i don't know what's down and people",
    "start": "1426720",
    "end": "1432400"
  },
  {
    "text": "couldn't do anything really yeah i was really surprised but from what they described it's not really that",
    "start": "1432400",
    "end": "1438880"
  },
  {
    "text": "bad well we're going to continue continuing let's see this conjunction immediately",
    "start": "1438880",
    "end": "1444240"
  },
  {
    "text": "impacted the availability of real-time monitoring data of our internal",
    "start": "1444240",
    "end": "1449760"
  },
  {
    "text": "operation team okay so they're trying to monitor the data the internal the operation their",
    "start": "1449760",
    "end": "1455600"
  },
  {
    "text": "operation team couldn't monitor anything now this this made me thin right",
    "start": "1455600",
    "end": "1461360"
  },
  {
    "text": "why couldn't they monitor name that means the monitoring data lives in",
    "start": "1461360",
    "end": "1467120"
  },
  {
    "text": "the internal network that tells me they are trying to access the monitoring data from",
    "start": "1467120",
    "end": "1475200"
  },
  {
    "text": "the main network right because the monitoring data lives in",
    "start": "1475200",
    "end": "1482559"
  },
  {
    "text": "in the internal network so if you're trying to access that you can either access from the internal network",
    "start": "1482559",
    "end": "1489120"
  },
  {
    "text": "can they access from the internal network that's a good question do employees have access directly to the",
    "start": "1489120",
    "end": "1495679"
  },
  {
    "text": "internal network can i take my laptop and plug it to the internal network or not",
    "start": "1495679",
    "end": "1501679"
  },
  {
    "text": "i don't know apparently not because if they cared they would immediately see this data",
    "start": "1501679",
    "end": "1508159"
  },
  {
    "text": "right but they couldn't that means they are ad working from home obviously using the",
    "start": "1508159",
    "end": "1513440"
  },
  {
    "text": "internet which goes through the main network through the internment network right",
    "start": "1513440",
    "end": "1519360"
  },
  {
    "text": "re i'm really surprised by this to be honest right",
    "start": "1519360",
    "end": "1524880"
  },
  {
    "text": "you would think that there will be some sort of an access",
    "start": "1524880",
    "end": "1530480"
  },
  {
    "text": "right for employees to get direct access to the internal network yeah through the",
    "start": "1530480",
    "end": "1536240"
  },
  {
    "text": "internet but there will be some devices set just for this purpose right",
    "start": "1536240",
    "end": "1541360"
  },
  {
    "text": "expose a network device right through",
    "start": "1541360",
    "end": "1546480"
  },
  {
    "text": "the internet that goes directly to the internal network that might be a bad idea again for for attack services or",
    "start": "1546480",
    "end": "1554080"
  },
  {
    "text": "whatnot so maybe they they just say hey if you want to access that internal you'll have to go through them in",
    "start": "1554080",
    "end": "1560480"
  },
  {
    "text": "i don't know they should have done what what uh",
    "start": "1560480",
    "end": "1565600"
  },
  {
    "text": "what facebook have done just draw dr drive through the to the actual uh you know data center and let's just",
    "start": "1565600",
    "end": "1572080"
  },
  {
    "text": "plug their laptops in you know that's what facebook did but they the facebook had a lot of problem",
    "start": "1572080",
    "end": "1578240"
  },
  {
    "text": "getting in because of covet and stuff like that just just getting into the data center security who are you i don't",
    "start": "1578240",
    "end": "1584960"
  },
  {
    "text": "trust you you know just get the security clearance out you know i guess they had the same",
    "start": "1584960",
    "end": "1590960"
  },
  {
    "text": "problem but they didn't mention any of that stuff which impaired impaired their ability to find the source of congestion",
    "start": "1590960",
    "end": "1598559"
  },
  {
    "text": "and resolve it operators instead relied on logs to understand what was happening",
    "start": "1598559",
    "end": "1605039"
  },
  {
    "text": "initially identified elevated internal dns",
    "start": "1605039",
    "end": "1610840"
  },
  {
    "text": "errors so they are on logs now my question is how did they read the logs i know i'm",
    "start": "1610840",
    "end": "1617120"
  },
  {
    "text": "nitpicking but i'm really interested to understand everything you know now you're saying that they couldn't see the",
    "start": "1617120",
    "end": "1623760"
  },
  {
    "text": "monitoring data but you're saying they can see the logs but how could they where are the logs are the logs in the",
    "start": "1623760",
    "end": "1630559"
  },
  {
    "text": "internal network if they're on an internal log how could they access it because the the network devices are",
    "start": "1630559",
    "end": "1636159"
  },
  {
    "text": "congested how could they access the log and unless the logs are somewhere stored in the main network then they",
    "start": "1636159",
    "end": "1642960"
  },
  {
    "text": "couldn't they could access it really easily maybe",
    "start": "1642960",
    "end": "1647600"
  },
  {
    "text": "but regardless they were able to see the logs they opened they cracked the logs open and they say they saw what they saw",
    "start": "1648559",
    "end": "1657279"
  },
  {
    "text": "internal dns errors so that means there is an elevated intern",
    "start": "1657279",
    "end": "1663039"
  },
  {
    "text": "dns request that i've been failing red flag if dns",
    "start": "1663120",
    "end": "1670080"
  },
  {
    "text": "in your services start to fail you're dead that's what happened to microsoft in the outage last year right",
    "start": "1670080",
    "end": "1677120"
  },
  {
    "text": "their authoritarian server worn down basically the whole thing just collapses",
    "start": "1677120",
    "end": "1682640"
  },
  {
    "text": "dns is just i know a lot of people say the unis is distributed and whatnot dns is a single",
    "start": "1682640",
    "end": "1688000"
  },
  {
    "text": "point of failure baby it is stop saying it's distributed yeah it's",
    "start": "1688000",
    "end": "1693120"
  },
  {
    "text": "distributed when it comes to you know looking at it from bird's eye view but at the end of the day",
    "start": "1693120",
    "end": "1699279"
  },
  {
    "text": "who have the answer for your dns query your authoritative name servers if those puppies are down",
    "start": "1699279",
    "end": "1705919"
  },
  {
    "text": "you did son right if you manage your own authoritative name server that is right",
    "start": "1705919",
    "end": "1711679"
  },
  {
    "text": "now you can argue you should you should distribute your authoritative name server but if from",
    "start": "1711679",
    "end": "1717039"
  },
  {
    "text": "from looking at from you know big picture the authoritative name servers is a",
    "start": "1717039",
    "end": "1723440"
  },
  {
    "text": "single point server if the whole thing went down you're dead you cannot answer any",
    "start": "1723440",
    "end": "1730960"
  },
  {
    "text": "any dns queries but they say they they manage they've seen some dns errors here",
    "start": "1730960",
    "end": "1737840"
  },
  {
    "text": "because internet dns because internal dns is foundational for all services",
    "start": "1737840",
    "end": "1744320"
  },
  {
    "text": "all services and this traffic was believed to be contributing to the congestion",
    "start": "1744320",
    "end": "1750240"
  },
  {
    "text": "the teams focused on moving the internal dns traffic away from",
    "start": "1750240",
    "end": "1756240"
  },
  {
    "text": "congested network path and i did not understand how they did that they didn't explain any of this",
    "start": "1756240",
    "end": "1763279"
  },
  {
    "text": "i'm really surprised first of all let's talk about this a little bit",
    "start": "1763279",
    "end": "1768799"
  },
  {
    "text": "right no no let's really analyze this statement because this is very very critical i",
    "start": "1768799",
    "end": "1774240"
  },
  {
    "text": "have so much to say about this okay internal dns",
    "start": "1774240",
    "end": "1781279"
  },
  {
    "text": "the internal dns which is used obviously to resolve",
    "start": "1781279",
    "end": "1786640"
  },
  {
    "text": "internal services that is in the main network that has nothing to do with the public internet again",
    "start": "1786640",
    "end": "1792799"
  },
  {
    "text": "internal stuff okay that's my guess this lives on the internal network",
    "start": "1792799",
    "end": "1799360"
  },
  {
    "text": "okay now my first point is",
    "start": "1799360",
    "end": "1805200"
  },
  {
    "text": "the the path between the main network and the internal network",
    "start": "1806640",
    "end": "1812000"
  },
  {
    "text": "have a lot of failed internal dns errors because of the congestion right because the the udp",
    "start": "1812000",
    "end": "1818399"
  },
  {
    "text": "packets are getting dropped because the devices in the middle are",
    "start": "1818399",
    "end": "1824000"
  },
  {
    "text": "are congested right the packets are getting dropped so dns are timing out and you're not resolving",
    "start": "1824000",
    "end": "1830320"
  },
  {
    "text": "dns that's bad if dns cannot be resolved your services",
    "start": "1830320",
    "end": "1836320"
  },
  {
    "text": "eventually will die and this will propagate back to the actual users and",
    "start": "1836320",
    "end": "1841919"
  },
  {
    "text": "we'll say oh users are bad the users will immediately experience",
    "start": "1841919",
    "end": "1847279"
  },
  {
    "text": "this so that's why they focused to fix the ns the first thing they have to fix",
    "start": "1847279",
    "end": "1853440"
  },
  {
    "text": "dns so they moved the internal dns traffic",
    "start": "1853440",
    "end": "1860480"
  },
  {
    "text": "away from the conjunction path now i have i have some comments about this",
    "start": "1860480",
    "end": "1866399"
  },
  {
    "text": "what do you mean by move dns traffic well to move dns do to move any traffic",
    "start": "1866399",
    "end": "1871919"
  },
  {
    "text": "is to inspect the packets that comes into the",
    "start": "1871919",
    "end": "1876960"
  },
  {
    "text": "router or the switch and says hey if this is a dns request",
    "start": "1876960",
    "end": "1883919"
  },
  {
    "text": "take it to this port instead of this port right and as a result they moved it around",
    "start": "1883919",
    "end": "1889679"
  },
  {
    "text": "i don't know how because i congested bad at the conducted path right where is",
    "start": "1889679",
    "end": "1894960"
  },
  {
    "text": "this path that is not congested i don't know right the whole the whole the whole network is",
    "start": "1894960",
    "end": "1900640"
  },
  {
    "text": "congested where would you move it right so that i don't know where do they move it but the fact that they were able to move it",
    "start": "1900640",
    "end": "1907440"
  },
  {
    "text": "is fascinating you might say i'm saying why why is this fascinating it is fascinating because",
    "start": "1907440",
    "end": "1913600"
  },
  {
    "text": "guys remember dns is unencrypted",
    "start": "1913600",
    "end": "1919679"
  },
  {
    "text": "as of today right dns is plain text anyone can sniff dns",
    "start": "1919679",
    "end": "1925919"
  },
  {
    "text": "traffic right because it's a pure udp request saying hey i want to go to this",
    "start": "1925919",
    "end": "1931519"
  },
  {
    "text": "domain give me the ip address of this domain [Music] but",
    "start": "1931519",
    "end": "1936960"
  },
  {
    "text": "cloudflare and people you know big big companies are trying to encrypt the",
    "start": "1936960",
    "end": "1942320"
  },
  {
    "text": "dns traffic which for good reasons for privacy right we don't want anyone to stop on our dns and there are two camps",
    "start": "1942320",
    "end": "1949519"
  },
  {
    "text": "to encrypt the dns traffic there's the first camp right",
    "start": "1949519",
    "end": "1955919"
  },
  {
    "text": "which is the dns over https people say hey i don't",
    "start": "1955919",
    "end": "1961279"
  },
  {
    "text": "want any business let's use the uh the existing infrastructure built on top",
    "start": "1961279",
    "end": "1966720"
  },
  {
    "text": "of https which is built on top of tls which is built on top 443 and they just",
    "start": "1966720",
    "end": "1972320"
  },
  {
    "text": "shove the dns traffic as just another web traffic there is this this people right so like",
    "start": "1972320",
    "end": "1978559"
  },
  {
    "text": "we have we have already built in structure let's use that",
    "start": "1978559",
    "end": "1983600"
  },
  {
    "text": "let's just shove the dns into them there is another cap which is called the dot dns over tls",
    "start": "1983600",
    "end": "1990960"
  },
  {
    "text": "which says no guys yeah we're with you we love",
    "start": "1990960",
    "end": "1997039"
  },
  {
    "text": "to encrypt dns but we cannot do it on the web traffic we cannot do it on port 443",
    "start": "1997039",
    "end": "2003440"
  },
  {
    "text": "we have to dedicate a specific tls",
    "start": "2003440",
    "end": "2008880"
  },
  {
    "text": "a specific port just for encrypted dns and let's just reserve that port all",
    "start": "2008880",
    "end": "2014720"
  },
  {
    "text": "right and there is a big fight between the two camps as well why complicate the story",
    "start": "2014720",
    "end": "2021440"
  },
  {
    "text": "now we have to know a new port and all that stuff no everybody will use their",
    "start": "2021440",
    "end": "2026640"
  },
  {
    "text": "own port no need just we will have our own protocol no there is no need to have their own protocol to",
    "start": "2026640",
    "end": "2033600"
  },
  {
    "text": "do all that stuff let's use the doh so do you which seems to be winning",
    "start": "2033600",
    "end": "2038799"
  },
  {
    "text": "right because like firefox started implementing it i granted they took a talk it back because",
    "start": "2038799",
    "end": "2045519"
  },
  {
    "text": "the the the cloud services that host the doh service couldn't handle that but i",
    "start": "2045519",
    "end": "2050800"
  },
  {
    "text": "think it's there are a lot of you know there's a lot of talk to support the uh right",
    "start": "2050800",
    "end": "2058079"
  },
  {
    "text": "back to amazon if doh happen to be a thing",
    "start": "2058960",
    "end": "2064079"
  },
  {
    "text": "amazon could never do this now what they just did",
    "start": "2064079",
    "end": "2069679"
  },
  {
    "text": "right they could never move dns traffic if it's because it's just warp traffic",
    "start": "2069679",
    "end": "2075040"
  },
  {
    "text": "to them everything is encrypted right the network you know the device only sees the port",
    "start": "2075040",
    "end": "2080878"
  },
  {
    "text": "and the ip where you're going it never sees the actual content because it's",
    "start": "2080879",
    "end": "2086560"
  },
  {
    "text": "encrypted and if it sees 443 it has zero context as was what this is it doesn't",
    "start": "2086560",
    "end": "2091839"
  },
  {
    "text": "know this is dns so that is actually i've been always on the camp of doh it's",
    "start": "2091839",
    "end": "2098320"
  },
  {
    "text": "like let's simplify things but this made me kind of",
    "start": "2098320",
    "end": "2104480"
  },
  {
    "text": "kind of think about these cases like what if i want to identify dns traffic because dns",
    "start": "2104480",
    "end": "2111359"
  },
  {
    "text": "is crucial right i want to have it dedicated in this particular path how do i do that",
    "start": "2111359",
    "end": "2119040"
  },
  {
    "text": "without knowing the port i need to know which port we're going through so i can you know direct dns traffic i need to",
    "start": "2119040",
    "end": "2126160"
  },
  {
    "text": "identify so i kind of i kind of go with the dot tamp on this",
    "start": "2126160",
    "end": "2132079"
  },
  {
    "text": "one right but so let's say the ot won doh 0 on this round",
    "start": "2132079",
    "end": "2139680"
  },
  {
    "text": "but we'll we'll have to wait and see but this is a good example where you need to identify dns traffic i don't know how",
    "start": "2139680",
    "end": "2147680"
  },
  {
    "text": "but boy the uh camp and the audo which is the oblivious one really need some sort of a",
    "start": "2147680",
    "end": "2155200"
  },
  {
    "text": "bit that tells you this is dns or not i have no idea how how they're going to do it",
    "start": "2155200",
    "end": "2160880"
  },
  {
    "text": "maybe through the tls session they could introduce a new tls extension but yeah that's that's uh that's just",
    "start": "2160880",
    "end": "2167839"
  },
  {
    "text": "one thing i noticed when i read this so it's just it it is gonna",
    "start": "2167839",
    "end": "2173920"
  },
  {
    "text": "it's gonna be a mess when the osh is fully implemented all right at 2 9 28 a.m so two hours",
    "start": "2173920",
    "end": "2180720"
  },
  {
    "text": "later exactly two hours later the team completed this work and dns",
    "start": "2180720",
    "end": "2185920"
  },
  {
    "text": "resolution errors fully recovered so there are no more errors they moved the dns traffic to some other",
    "start": "2185920",
    "end": "2192400"
  },
  {
    "text": "uncongested path again where no idea right where are you moving it",
    "start": "2192400",
    "end": "2197520"
  },
  {
    "text": "everything is congested how are you moving things where",
    "start": "2197520",
    "end": "2202560"
  },
  {
    "text": "like maybe there are okay maybe they spun up a new network devices and move it there maybe they did",
    "start": "2202560",
    "end": "2207839"
  },
  {
    "text": "that but they didn't mention here maybe they did that maybe just spin up a new edge devices when i say edge the",
    "start": "2207839",
    "end": "2215359"
  },
  {
    "text": "network devices that link the internal the main network between the internal network",
    "start": "2215359",
    "end": "2221200"
  },
  {
    "text": "this change improved the ability availability of several impacted",
    "start": "2221200",
    "end": "2227040"
  },
  {
    "text": "services by reducing load on the impacted network networking devices but did not",
    "start": "2227040",
    "end": "2234720"
  },
  {
    "text": "fully resolve the aws service impact or eliminate the conjunction keep in mind i",
    "start": "2234720",
    "end": "2240640"
  },
  {
    "text": "don't think because of the you know the monitoring thing they couldn't see the monitoring they",
    "start": "2240640",
    "end": "2246480"
  },
  {
    "text": "don't know that the the auto scale thing that trigger on the minotaur caused this they don't know that",
    "start": "2246480",
    "end": "2252880"
  },
  {
    "text": "they still don't know they are telling us the summary after the fact they have discovered it but i don't think at this",
    "start": "2252880",
    "end": "2259119"
  },
  {
    "text": "stage they know that oh that that service caused it they don't know this right",
    "start": "2259119",
    "end": "2265040"
  },
  {
    "text": "importantly monitoring data was still not visible to our operation are we",
    "start": "2265040",
    "end": "2271359"
  },
  {
    "text": "still recording yes importantly monitoring data was still not available to our operation team so",
    "start": "2271359",
    "end": "2278800"
  },
  {
    "text": "they had to continue resolving the issue with reduced system",
    "start": "2278800",
    "end": "2284079"
  },
  {
    "text": "visibility operators continue working on a set of remediation actions to reduce congestion",
    "start": "2284079",
    "end": "2291599"
  },
  {
    "text": "on the network internal network including identifying the top",
    "start": "2291599",
    "end": "2297440"
  },
  {
    "text": "sources of traffic to isolate to uh to dedicated network devices disabling some",
    "start": "2297440",
    "end": "2303680"
  },
  {
    "text": "heavy traffic services so they look at the traffic okay what is this traffic like this service is generating a lot",
    "start": "2303680",
    "end": "2309920"
  },
  {
    "text": "from this ips this generating a lot of traffic let's disable it maybe it's not that important",
    "start": "2309920",
    "end": "2315359"
  },
  {
    "text": "right let's disable that services and bringing additional network capacity",
    "start": "2315359",
    "end": "2320480"
  },
  {
    "text": "online this progressed slowly for several reasons so they're trying to",
    "start": "2320480",
    "end": "2326000"
  },
  {
    "text": "justify why it took so seven hours to resolve this outage right first the impact of the internal",
    "start": "2326000",
    "end": "2331680"
  },
  {
    "text": "monitoring limited our ability to understand the problem second our internal deployment system",
    "start": "2331680",
    "end": "2338160"
  },
  {
    "text": "which ran on the internal network were impacted which further slowed our",
    "start": "2338160",
    "end": "2345280"
  },
  {
    "text": "remediation effort finally because many aws services on the main aws network and",
    "start": "2345280",
    "end": "2351040"
  },
  {
    "text": "the aws customer applications were still operating normally",
    "start": "2351040",
    "end": "2356160"
  },
  {
    "text": "we wanted this is very critical huh the customer application and the aws",
    "start": "2356160",
    "end": "2362560"
  },
  {
    "text": "network is just operating normally because again remember where the the problem is that",
    "start": "2362560",
    "end": "2368560"
  },
  {
    "text": "is in the edge between these two networks so if you have a service that is purely using the main or if you have",
    "start": "2368560",
    "end": "2374240"
  },
  {
    "text": "a service that purely using the internal you're fine son but the moment you start to communicate",
    "start": "2374240",
    "end": "2380320"
  },
  {
    "text": "with these two if you have something that needs to jump to the internal or via versa",
    "start": "2380320",
    "end": "2385520"
  },
  {
    "text": "then you're screwed we wanted to be extremely deliberate while",
    "start": "2385520",
    "end": "2393119"
  },
  {
    "text": "making changes to avoid impacting functional workloads as the operations",
    "start": "2393119",
    "end": "2398800"
  },
  {
    "text": "teams continued applying the remediation actions",
    "start": "2398800",
    "end": "2405119"
  },
  {
    "text": "described above congestion significantly improved so they kept",
    "start": "2405119",
    "end": "2410480"
  },
  {
    "text": "applying the same remediation which is what which is to to spin up new devices and",
    "start": "2410480",
    "end": "2416640"
  },
  {
    "text": "then move the network traffic disabling stuff that is not really required",
    "start": "2416640",
    "end": "2422240"
  },
  {
    "text": "congestion significant poor improved on 134 pst they found apparently they found",
    "start": "2422240",
    "end": "2427440"
  },
  {
    "text": "the service that there's the culprit and they disabled that and all the network devices fully",
    "start": "2427440",
    "end": "2434000"
  },
  {
    "text": "recovered by two 22 pm pst that is exactly seven hours",
    "start": "2434000",
    "end": "2440560"
  },
  {
    "text": "from the outage which started at seven am",
    "start": "2440560",
    "end": "2445680"
  },
  {
    "text": "in the morning we have taken several actions to prevent a recurrence",
    "start": "2445680",
    "end": "2451359"
  },
  {
    "text": "of this event we immediately disable the scaling activities that trigger this event",
    "start": "2451359",
    "end": "2458079"
  },
  {
    "text": "because remember the scaling activity that happened on the main network",
    "start": "2458079",
    "end": "2463119"
  },
  {
    "text": "is the one that caused this this puppy right",
    "start": "2463119",
    "end": "2468560"
  },
  {
    "text": "so they they disable scale say hey no there is no business to scale something that doesn't need to be scaled right",
    "start": "2468560",
    "end": "2474640"
  },
  {
    "text": "and will not resume until we have deployed all remediations",
    "start": "2474640",
    "end": "2480560"
  },
  {
    "text": "so they're trying to deploy some remediations and my guess these remediations",
    "start": "2480560",
    "end": "2487040"
  },
  {
    "text": "is what caused the second outage that happened two days ago on december",
    "start": "2487040",
    "end": "2493440"
  },
  {
    "text": "15. i was just like a jet lagged so i slept through the day",
    "start": "2493440",
    "end": "2500160"
  },
  {
    "text": "i think i woke up at 10 a.m or something",
    "start": "2500160",
    "end": "2504640"
  },
  {
    "text": "our systems are scaled adequately so that we do not need to resume these",
    "start": "2506079",
    "end": "2512160"
  },
  {
    "text": "activities in the near term our networking clients have well-tested request",
    "start": "2512160",
    "end": "2519440"
  },
  {
    "text": "back-off behavior that are designed to allow our system to",
    "start": "2519440",
    "end": "2524640"
  },
  {
    "text": "recover from this sort of congestion event but a latent issue what does latent mean",
    "start": "2524640",
    "end": "2531920"
  },
  {
    "text": "i really don't know what is latent latent existing but not yet developed or",
    "start": "2531920",
    "end": "2539040"
  },
  {
    "text": "manifest okay and late that means still oh we're still working on it prevented these clients from adequately backing",
    "start": "2539040",
    "end": "2545760"
  },
  {
    "text": "off during this event so it's probably something they they just forgot about to to to actually implement",
    "start": "2545760",
    "end": "2552800"
  },
  {
    "text": "this back off event is just the more i read about the more it's like it's very critical to understand because",
    "start": "2552800",
    "end": "2559440"
  },
  {
    "text": "whether you like it or not your backend he really is just derived by the clients",
    "start": "2559440",
    "end": "2565680"
  },
  {
    "text": "if you have bad behaving clients they can take down your back end easily",
    "start": "2565680",
    "end": "2571599"
  },
  {
    "text": "right especially if you have a large number of clients and in a controlled environment like",
    "start": "2571599",
    "end": "2577760"
  },
  {
    "text": "this my god look what happened this code path has been in production",
    "start": "2577760",
    "end": "2582800"
  },
  {
    "text": "for many years but the automated scaling activity triggered a previously unobserved behavior again so it's a it's",
    "start": "2582800",
    "end": "2589680"
  },
  {
    "text": "a path that they never experienced before it happens we are developing a fix for this issue",
    "start": "2589680",
    "end": "2596000"
  },
  {
    "text": "and expected to deploy this change over the next two weeks",
    "start": "2596000",
    "end": "2601040"
  },
  {
    "text": "wink wink so they apparently have deployed it exactly",
    "start": "2601040",
    "end": "2606480"
  },
  {
    "text": "the next week and maybe something happened i don't know",
    "start": "2606480",
    "end": "2612160"
  },
  {
    "text": "i i think they deployed to the east and then when they tried to deploy to the west something else happened but they",
    "start": "2612160",
    "end": "2617200"
  },
  {
    "text": "the second outage i think the last is only for 30 minutes so it's not that bad right but the media still talked about",
    "start": "2617200",
    "end": "2622880"
  },
  {
    "text": "it because you know media won't clicks we have also develop deployed additional",
    "start": "2622880",
    "end": "2629760"
  },
  {
    "text": "network configuration that protects potentially impacted",
    "start": "2629760",
    "end": "2635119"
  },
  {
    "text": "networking devices even in the face of a similar congested congestion event",
    "start": "2635119",
    "end": "2642000"
  },
  {
    "text": "this remediation gave us confidence that we'll not see and a recurrence of this issue",
    "start": "2642000",
    "end": "2650560"
  },
  {
    "text": "ah december 15th entered the chat",
    "start": "2651839",
    "end": "2656800"
  },
  {
    "text": "all right i'm not gonna this is this is taking so long and i i have to go to work it's uh it's what now it's uh it's",
    "start": "2657760",
    "end": "2664400"
  },
  {
    "text": "7 00 am so i have to give work in an hour so i gotta prepare but yeah so i'm gonna i'm gonna wrap",
    "start": "2664400",
    "end": "2670079"
  },
  {
    "text": "this up i'm gonna leave this to you guys right i'm gonna read the summary and then uh",
    "start": "2670079",
    "end": "2676240"
  },
  {
    "text": "we'll we'll continue some other time right um but i want to read this part",
    "start": "2676240",
    "end": "2683280"
  },
  {
    "text": "this is this is the summary on this is exactly the same as i explained earlier uh there is",
    "start": "2683359",
    "end": "2690480"
  },
  {
    "text": "aws service impact the impact was basically for services that requires",
    "start": "2690480",
    "end": "2698000"
  },
  {
    "text": "to spin up a new ec2 instance right when they wanted to spin up a new ec2 instance they needed the internal",
    "start": "2698000",
    "end": "2703599"
  },
  {
    "text": "network and that fails right when they want to inspect when a customer want to inspect an ec2 understands and they try",
    "start": "2703599",
    "end": "2710640"
  },
  {
    "text": "to go to the internal network that fails right and when i say fail basically it times out which which eventually fails",
    "start": "2710640",
    "end": "2716640"
  },
  {
    "text": "and it takes time for these services even after the congestion is gone or gone",
    "start": "2716640",
    "end": "2722800"
  },
  {
    "text": "is gone takes time for these services to recover because it caches the fact that the",
    "start": "2722800",
    "end": "2729200"
  },
  {
    "text": "server is down because of the congestion right it doesn't know that it's contracts it knows that hey there's",
    "start": "2729200",
    "end": "2735359"
  },
  {
    "text": "timeouts doesn't know that oh there's a congestion it knows that it tries to connect and it fails so it says okay i'm",
    "start": "2735359",
    "end": "2740880"
  },
  {
    "text": "not going to try again let me disable my effect that's just the backing of behavior most applications doesn't but",
    "start": "2740880",
    "end": "2747920"
  },
  {
    "text": "that's why it took it took the sts what is the steers again it stands for i don't know",
    "start": "2747920",
    "end": "2754160"
  },
  {
    "text": "it wouldn't it yeah it took another two two hours to fully recover everything",
    "start": "2754400",
    "end": "2761520"
  },
  {
    "start": "2760000",
    "end": "3241000"
  },
  {
    "text": "from an aws cloud watch and dynamodb and s3 buckets and ac2 and things these",
    "start": "2761520",
    "end": "2768640"
  },
  {
    "text": "these partial things right they talk about the lambda what what what effects happened to lambda lambda",
    "start": "2768640",
    "end": "2775760"
  },
  {
    "text": "took a little bit longer right lambda was recovered you know certain workloads in lambda are",
    "start": "2775760",
    "end": "2781839"
  },
  {
    "text": "covered at 640. so that is like what so we're talking about seven uh",
    "start": "2781839",
    "end": "2789280"
  },
  {
    "text": "that's nine eleven twelve hours it took almost 12 hours right to recover these lambdas okay guys",
    "start": "2789280",
    "end": "2796319"
  },
  {
    "text": "i don't know did you did you run into this uh like for those who i don't use amazon",
    "start": "2796319",
    "end": "2802560"
  },
  {
    "text": "but if for those who use amazon did you guys run into uh problems with this and what kind of",
    "start": "2802560",
    "end": "2807680"
  },
  {
    "text": "problems and let's just have a discussion in the comment section and the event",
    "start": "2807680",
    "end": "2812960"
  },
  {
    "text": "guys almost every single outage that i analyzed in this channel and uh i'm",
    "start": "2812960",
    "end": "2818720"
  },
  {
    "text": "gonna reference the uh the playlist if you're interested in this kind of content uh watch the playlist in the in",
    "start": "2818720",
    "end": "2825119"
  },
  {
    "text": "the description and also in the in the screens almost every outage almost every outage",
    "start": "2825119",
    "end": "2832480"
  },
  {
    "text": "the company that experienced the outage couldn't even tell you that there was an",
    "start": "2832480",
    "end": "2837920"
  },
  {
    "text": "outage almost everyone google amazon right amazon the first one the",
    "start": "2837920",
    "end": "2843440"
  },
  {
    "text": "2020 one microsoft right uh slack it's almost all the time",
    "start": "2843440",
    "end": "2851040"
  },
  {
    "text": "because you know it's easy to rely on your trusted or internal",
    "start": "2851040",
    "end": "2857680"
  },
  {
    "text": "infrastructure to report the status for out for for you know the health of their",
    "start": "2857680",
    "end": "2862800"
  },
  {
    "text": "report right so you rely on this network to report the status but so yeah guys to",
    "start": "2862800",
    "end": "2868640"
  },
  {
    "text": "summarize right there's no need to see the page anymore yeah i mean all the outages that we've covered",
    "start": "2868640",
    "end": "2875440"
  },
  {
    "text": "most of the time the company cannot tell you that there was an outage because they rely on this",
    "start": "2875440",
    "end": "2882240"
  },
  {
    "text": "their backend infrastructure to report the outage to report the status of the health of the system",
    "start": "2882240",
    "end": "2888160"
  },
  {
    "text": "but if the infrastructure on which you're hosting the status page is down",
    "start": "2888160",
    "end": "2893440"
  },
  {
    "text": "how can you report to your customers so amazon in this case they just used a banner on their html",
    "start": "2893440",
    "end": "2899599"
  },
  {
    "text": "going to the back you know the good old html static page solved the issue you know",
    "start": "2899599",
    "end": "2906480"
  },
  {
    "text": "and even that people said what are you talking about i didn't see any anything so yeah guys",
    "start": "2906480",
    "end": "2913599"
  },
  {
    "text": "it's just just interesting to learn about this again we always at the end of the the day we thank the engineers the",
    "start": "2913839",
    "end": "2921359"
  },
  {
    "text": "fellow engineers work on amazon to bring this back up because it's always stressful i've been there myself with outages back",
    "start": "2921359",
    "end": "2929040"
  },
  {
    "text": "in the day right just it's just it's not fun right so the reason i cover this is",
    "start": "2929040",
    "end": "2934079"
  },
  {
    "text": "just to learn from these experiences and always try to be you know think about",
    "start": "2934079",
    "end": "2940400"
  },
  {
    "text": "the the stress that the engineers whether in google and amazon on amazon or or microsoft or all the",
    "start": "2940400",
    "end": "2948160"
  },
  {
    "text": "companies right the stress they run into the our engineers you know you know our",
    "start": "2948160",
    "end": "2953200"
  },
  {
    "text": "fellow engineers just it's just a lot of work so kudos to all the engineering is working on",
    "start": "2953200",
    "end": "2959200"
  },
  {
    "text": "really fixing this outage because it's outages happen things happen right",
    "start": "2959200",
    "end": "2965280"
  },
  {
    "text": "but it takes skills and really maneuver",
    "start": "2965280",
    "end": "2970800"
  },
  {
    "text": "to bring back a service back online this is where real engineers thrive",
    "start": "2970800",
    "end": "2977520"
  },
  {
    "text": "right this is completely unexpected this is not a test that you take in an interview",
    "start": "2977520",
    "end": "2983359"
  },
  {
    "text": "right this is the real engineer it's like okay oh let's do this let's let's try this so",
    "start": "2983359",
    "end": "2989760"
  },
  {
    "text": "they they and this comes with experience with guts you know it takes guts to okay",
    "start": "2989760",
    "end": "2995680"
  },
  {
    "text": "let's try this approach let's try this approach and takes experience it takes really",
    "start": "2995680",
    "end": "3002720"
  },
  {
    "text": "deep knowledge of the fundamentals of networking deep knowledge of the back end and that's why i love analyzing this",
    "start": "3002960",
    "end": "3009440"
  },
  {
    "text": "outage because whatever the the smart engineers do is just like wow i can't believe they",
    "start": "3009440",
    "end": "3014880"
  },
  {
    "text": "thought about this this is actually good i've never thought about this so like the the the idea of reversing the the",
    "start": "3014880",
    "end": "3021119"
  },
  {
    "text": "redirecting the dns traffic is genius right like let's let's move the dna started because that's the most important thing right if they didn't do",
    "start": "3021119",
    "end": "3028160"
  },
  {
    "text": "that whoever made that decision to move the dns traffic really should get a raise right it should good chunk of",
    "start": "3028160",
    "end": "3035200"
  },
  {
    "text": "money right because that is a really smart decision if they did not do that",
    "start": "3035200",
    "end": "3042480"
  },
  {
    "text": "that would be really disaster yeah who have been disaster if you cannot resolve dns that you're dead basically right so",
    "start": "3042480",
    "end": "3050400"
  },
  {
    "text": "that's very smart to do that but at the same time makes me think that",
    "start": "3050400",
    "end": "3056800"
  },
  {
    "text": "doh right is not going to see the day of light the dns over https right and or",
    "start": "3056800",
    "end": "3063920"
  },
  {
    "text": "internal companies will say okay we're not going to encrypt dns who cares we don't really need to encrypt internal",
    "start": "3063920",
    "end": "3070079"
  },
  {
    "text": "dns like we are the one making this dns request who cares if it's visible of course i",
    "start": "3070079",
    "end": "3076000"
  },
  {
    "text": "want to see all these things don't encrypt them right so there's no point yeah i understand",
    "start": "3076000",
    "end": "3084240"
  },
  {
    "text": "encrypting the dns and the internet but in the internal one you don't really",
    "start": "3084240",
    "end": "3090480"
  },
  {
    "text": "don't need to encrypt things because if you if there is encrypted with doh on port 443 they could have never",
    "start": "3090480",
    "end": "3097839"
  },
  {
    "text": "never done this but yeah the overall uh excellent work everyone at amazon",
    "start": "3097839",
    "end": "3105280"
  },
  {
    "text": "engineers and uh yeah we're waiting for the second outage",
    "start": "3105280",
    "end": "3111599"
  },
  {
    "text": "uh root cause analysis although i doubt that amazon will will issue a root cause analysis on that one",
    "start": "3111599",
    "end": "3117920"
  },
  {
    "text": "because of that let's do it what for 30 minutes usually if it's if it's less than two",
    "start": "3117920",
    "end": "3124240"
  },
  {
    "text": "hours they don't bother talking about it we talked from experience they would probably",
    "start": "3124240",
    "end": "3130400"
  },
  {
    "text": "uh show a page or something but it will not but this was a disaster it was like what almost let's say 12",
    "start": "3130400",
    "end": "3137119"
  },
  {
    "text": "hours right for for lambda to come back on and ec2 and all that stuff took like 12 hours outage right",
    "start": "3137119",
    "end": "3143680"
  },
  {
    "text": "yeah the actual direct outage is seven hours but the you",
    "start": "3143680",
    "end": "3149359"
  },
  {
    "text": "know the um the ramification talk more than that man obviously",
    "start": "3149359",
    "end": "3155200"
  },
  {
    "text": "all right guys that's for me today i hope you really enjoyed this video",
    "start": "3155200",
    "end": "3161119"
  },
  {
    "text": "and oh guys this video is also uh hosted on my podcast the backend engineering show",
    "start": "3161119",
    "end": "3168800"
  },
  {
    "text": "which you can find on your favorite uh podcast player just google the back engineering show with hussein nasser and",
    "start": "3168800",
    "end": "3175760"
  },
  {
    "text": "you can find it in every it's google it's on anchor it's on spotify it's everywhere so you if you want a lesson",
    "start": "3175760",
    "end": "3181200"
  },
  {
    "text": "on the back end the back end no punishment uh no pun intended in the background if you want to listen in the",
    "start": "3181200",
    "end": "3187359"
  },
  {
    "text": "background while you're doing your own your own thing you're at work you're a gym you want to listen on this",
    "start": "3187359",
    "end": "3193200"
  },
  {
    "text": "make sure to check it out go to husseinhasser.com podcast right and make sure",
    "start": "3193200",
    "end": "3199520"
  },
  {
    "text": "make sure to check out the my courses after i have two courses i have three courses on udemy uh go to database dot",
    "start": "3199520",
    "end": "3206559"
  },
  {
    "text": "hussein dot also.com [Music] that's at the fundamentals of database engineering are you really proud of that",
    "start": "3206559",
    "end": "3212000"
  },
  {
    "text": "course i love it and you guys seem to love it too the cue the questions we get there is just",
    "start": "3212000",
    "end": "3217520"
  },
  {
    "text": "seeds more content in the course uh check my nginx course talk about the fundamentals of load balancers and nginx",
    "start": "3217520",
    "end": "3225119"
  },
  {
    "text": "configurations and how you can scale and genex with whoops sockets",
    "start": "3225119",
    "end": "3230160"
  },
  {
    "text": "stuff that i don't talk about in the youtube channel so yeah check out nginx.josenauto.com i'm gonna see you in",
    "start": "3230160",
    "end": "3236640"
  },
  {
    "text": "the next one you guys stay awesome all this thank you so much",
    "start": "3236640",
    "end": "3242400"
  }
]