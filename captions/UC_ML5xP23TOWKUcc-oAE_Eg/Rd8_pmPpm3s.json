[
  {
    "start": "0",
    "end": "810000"
  },
  {
    "text": "what's going on guys another day another",
    "start": "160",
    "end": "2720"
  },
  {
    "text": "microsoft",
    "start": "2720",
    "end": "3679"
  },
  {
    "text": "outage uh this happened uh two days ago",
    "start": "3679",
    "end": "6480"
  },
  {
    "text": "actually on",
    "start": "6480",
    "end": "7200"
  },
  {
    "text": "april 1st april fool's day",
    "start": "7200",
    "end": "11280"
  },
  {
    "text": "and um a lot of microsoft services",
    "start": "11280",
    "end": "14960"
  },
  {
    "text": "just went down uh microsoft actually",
    "start": "14960",
    "end": "18400"
  },
  {
    "text": "revealed the issue back then it was a",
    "start": "18400",
    "end": "20320"
  },
  {
    "text": "dns issue but we don't know much",
    "start": "20320",
    "end": "22240"
  },
  {
    "text": "information",
    "start": "22240",
    "end": "23600"
  },
  {
    "text": "back then and i make a quick i made a",
    "start": "23600",
    "end": "25920"
  },
  {
    "text": "quick video talking about that",
    "start": "25920",
    "end": "28400"
  },
  {
    "text": "right they released a root cause",
    "start": "28400",
    "end": "32238"
  },
  {
    "text": "analysis",
    "start": "32239",
    "end": "33040"
  },
  {
    "text": "so i thought just make a video quick",
    "start": "33040",
    "end": "34880"
  },
  {
    "text": "video",
    "start": "34880",
    "end": "36160"
  },
  {
    "text": "to discuss this but i think",
    "start": "36160",
    "end": "39280"
  },
  {
    "text": "we can learn i think or two but i just",
    "start": "39280",
    "end": "42320"
  },
  {
    "text": "want to go through the list of outages",
    "start": "42320",
    "end": "44079"
  },
  {
    "text": "that they had right",
    "start": "44079",
    "end": "45360"
  },
  {
    "text": "back on april 1st that's the latest one",
    "start": "45360",
    "end": "48079"
  },
  {
    "text": "that happened two days ago",
    "start": "48079",
    "end": "49760"
  },
  {
    "text": "there is another one that happened march",
    "start": "49760",
    "end": "52160"
  },
  {
    "text": "18th i completely missed that",
    "start": "52160",
    "end": "54640"
  },
  {
    "text": "i'm not sure it was like maybe it was a",
    "start": "54640",
    "end": "56879"
  },
  {
    "text": "weekend",
    "start": "56879",
    "end": "58000"
  },
  {
    "text": "uh because we didn't see anyone",
    "start": "58000",
    "end": "59600"
  },
  {
    "text": "complaining about it",
    "start": "59600",
    "end": "61039"
  },
  {
    "text": "but this one is is the most interesting",
    "start": "61039",
    "end": "62879"
  },
  {
    "text": "one right",
    "start": "62879",
    "end": "64080"
  },
  {
    "text": "and then three days before that's the",
    "start": "64080",
    "end": "66159"
  },
  {
    "text": "one i reported on",
    "start": "66159",
    "end": "67439"
  },
  {
    "text": "march 15th right uh the authentication",
    "start": "67439",
    "end": "70560"
  },
  {
    "text": "the token bug",
    "start": "70560",
    "end": "71600"
  },
  {
    "text": "right where the token was uh",
    "start": "71600",
    "end": "74799"
  },
  {
    "text": "a token was essentially incorrectly",
    "start": "74799",
    "end": "77200"
  },
  {
    "text": "revoked and",
    "start": "77200",
    "end": "78080"
  },
  {
    "text": "causes every every single uh service to",
    "start": "78080",
    "end": "81040"
  },
  {
    "text": "freak out",
    "start": "81040",
    "end": "81840"
  },
  {
    "text": "and they did not accept any",
    "start": "81840",
    "end": "84880"
  },
  {
    "text": "authentication",
    "start": "84880",
    "end": "86320"
  },
  {
    "text": "there's another way on another on march",
    "start": "86320",
    "end": "88560"
  },
  {
    "text": "9th or or",
    "start": "88560",
    "end": "89759"
  },
  {
    "text": "it's just argentina and uruguay i'm not",
    "start": "89759",
    "end": "92880"
  },
  {
    "text": "not the entire war all of these were",
    "start": "92880",
    "end": "94479"
  },
  {
    "text": "global",
    "start": "94479",
    "end": "95040"
  },
  {
    "text": "outages do happen guys this is",
    "start": "95040",
    "end": "97119"
  },
  {
    "text": "absolutely normal this is how what you",
    "start": "97119",
    "end": "98960"
  },
  {
    "text": "do",
    "start": "98960",
    "end": "99360"
  },
  {
    "text": "when you have when you're serving an",
    "start": "99360",
    "end": "101360"
  },
  {
    "text": "entire globe obviously",
    "start": "101360",
    "end": "103680"
  },
  {
    "text": "right and then you have the scale of",
    "start": "103680",
    "end": "105439"
  },
  {
    "text": "microsoft obviously google",
    "start": "105439",
    "end": "106960"
  },
  {
    "text": "has the same thing and microsoft is not",
    "start": "106960",
    "end": "111040"
  },
  {
    "text": "as experiencing these challenges and",
    "start": "111040",
    "end": "113600"
  },
  {
    "text": "learning from them and just",
    "start": "113600",
    "end": "115119"
  },
  {
    "text": "moving on so there's nothing we can do",
    "start": "115119",
    "end": "117680"
  },
  {
    "text": "it's like we're not here just to",
    "start": "117680",
    "end": "119600"
  },
  {
    "text": "kind of poke fun uh these outages no",
    "start": "119600",
    "end": "122079"
  },
  {
    "text": "we're here to learn",
    "start": "122079",
    "end": "123759"
  },
  {
    "text": "and educate ourselves as engineers so",
    "start": "123759",
    "end": "126479"
  },
  {
    "text": "that we",
    "start": "126479",
    "end": "128080"
  },
  {
    "text": "don't fall into it so that we if we",
    "start": "128080",
    "end": "132080"
  },
  {
    "text": "uh if we face the challenge or a problem",
    "start": "132080",
    "end": "135520"
  },
  {
    "text": "that we want to solve we know",
    "start": "135520",
    "end": "137440"
  },
  {
    "text": "what not to do because these are just",
    "start": "137440",
    "end": "140319"
  },
  {
    "text": "lessons that we can",
    "start": "140319",
    "end": "141760"
  },
  {
    "text": "extract from this origin let's read",
    "start": "141760",
    "end": "144080"
  },
  {
    "text": "through the",
    "start": "144080",
    "end": "145440"
  },
  {
    "text": "rca that happened on april 1st",
    "start": "145440",
    "end": "149040"
  },
  {
    "text": "and let's discuss the title is",
    "start": "149040",
    "end": "152160"
  },
  {
    "text": "root cause analysis dns issue impacting",
    "start": "152160",
    "end": "154720"
  },
  {
    "text": "multiple microsoft services tracking id",
    "start": "154720",
    "end": "157879"
  },
  {
    "text": "gvy5 dash t",
    "start": "157879",
    "end": "160400"
  },
  {
    "text": "z or z if you're in the uk",
    "start": "160400",
    "end": "164319"
  },
  {
    "text": "summary of the impact between 9",
    "start": "164319",
    "end": "168000"
  },
  {
    "text": "21 utc and",
    "start": "168000",
    "end": "171200"
  },
  {
    "text": "22 which is 10 o'clock",
    "start": "171200",
    "end": "174239"
  },
  {
    "text": "in the evening on april 1st azure dns",
    "start": "174239",
    "end": "178319"
  },
  {
    "text": "experienced as a service rely",
    "start": "178319",
    "end": "181360"
  },
  {
    "text": "availability issue this resulted in",
    "start": "181360",
    "end": "183519"
  },
  {
    "text": "customers being",
    "start": "183519",
    "end": "184400"
  },
  {
    "text": "unable to resolve dns names",
    "start": "184400",
    "end": "188239"
  },
  {
    "text": "for services they use which resulted in",
    "start": "188239",
    "end": "191200"
  },
  {
    "text": "intermittent failures",
    "start": "191200",
    "end": "192800"
  },
  {
    "text": "accessing or managing azure or microsoft",
    "start": "192800",
    "end": "196159"
  },
  {
    "text": "services",
    "start": "196159",
    "end": "197200"
  },
  {
    "text": "due to the nature of dns the impacts of",
    "start": "197200",
    "end": "199519"
  },
  {
    "text": "the issue was",
    "start": "199519",
    "end": "200800"
  },
  {
    "text": "observed across multiple regions",
    "start": "200800",
    "end": "203440"
  },
  {
    "text": "recovery time",
    "start": "203440",
    "end": "204959"
  },
  {
    "text": "varied by service but the majority of",
    "start": "204959",
    "end": "207200"
  },
  {
    "text": "service recovered by",
    "start": "207200",
    "end": "208799"
  },
  {
    "text": "22 30. so they",
    "start": "208799",
    "end": "212319"
  },
  {
    "text": "i guess took one hour that's not so bad",
    "start": "212319",
    "end": "216159"
  },
  {
    "text": "right they started getting services by",
    "start": "216159",
    "end": "219040"
  },
  {
    "text": "one hour",
    "start": "219040",
    "end": "219760"
  },
  {
    "text": "some people experienced more than that",
    "start": "219760",
    "end": "221200"
  },
  {
    "text": "but one hour is is is good right they",
    "start": "221200",
    "end": "223920"
  },
  {
    "text": "managed to fix their issues",
    "start": "223920",
    "end": "225200"
  },
  {
    "text": "so what caused that issue right",
    "start": "225200",
    "end": "228000"
  },
  {
    "text": "obviously i was",
    "start": "228000",
    "end": "229200"
  },
  {
    "text": "i was fixing my car so i did i wasn't at",
    "start": "229200",
    "end": "232400"
  },
  {
    "text": "work",
    "start": "232400",
    "end": "232879"
  },
  {
    "text": "i wasn't working so i did not actually",
    "start": "232879",
    "end": "235200"
  },
  {
    "text": "experience that",
    "start": "235200",
    "end": "236959"
  },
  {
    "text": "right and thank you for everyone who",
    "start": "236959",
    "end": "239120"
  },
  {
    "text": "asked me about my car",
    "start": "239120",
    "end": "240159"
  },
  {
    "text": "uh it was just a tire blown i had to",
    "start": "240159",
    "end": "242959"
  },
  {
    "text": "change it and",
    "start": "242959",
    "end": "244080"
  },
  {
    "text": "the lugs were stuck and because of",
    "start": "244080",
    "end": "246959"
  },
  {
    "text": "california's heat",
    "start": "246959",
    "end": "248080"
  },
  {
    "text": "they melted and they couldn't get it off",
    "start": "248080",
    "end": "250560"
  },
  {
    "text": "that's the problem",
    "start": "250560",
    "end": "251599"
  },
  {
    "text": "root cause analysis azure dns servers",
    "start": "251599",
    "end": "254400"
  },
  {
    "text": "experienced an anomalous surge in dns",
    "start": "254400",
    "end": "256720"
  },
  {
    "text": "queries from",
    "start": "256720",
    "end": "257600"
  },
  {
    "text": "across the globe targeting a set of",
    "start": "257600",
    "end": "260239"
  },
  {
    "text": "domains",
    "start": "260239",
    "end": "261199"
  },
  {
    "text": "hosting hosted on azure normally",
    "start": "261199",
    "end": "264639"
  },
  {
    "text": "azure's layers of caches which the first",
    "start": "264639",
    "end": "267919"
  },
  {
    "text": "thing that we thought about right cashes",
    "start": "267919",
    "end": "269520"
  },
  {
    "text": "where's cashes",
    "start": "269520",
    "end": "270479"
  },
  {
    "text": "where's the cash why are we having dns",
    "start": "270479",
    "end": "272800"
  },
  {
    "text": "surge normally azure caches and traffic",
    "start": "272800",
    "end": "275360"
  },
  {
    "text": "shaping would mitigate this surge",
    "start": "275360",
    "end": "277440"
  },
  {
    "text": "in this incident one specific sequence",
    "start": "277440",
    "end": "280160"
  },
  {
    "text": "of events",
    "start": "280160",
    "end": "281120"
  },
  {
    "text": "exposed a code defect in our dns service",
    "start": "281120",
    "end": "285759"
  },
  {
    "text": "that reduced the efficiency of our dns",
    "start": "285759",
    "end": "288960"
  },
  {
    "text": "edge caches as our dns",
    "start": "288960",
    "end": "293040"
  },
  {
    "text": "service became overloaded dns clients",
    "start": "293040",
    "end": "295440"
  },
  {
    "text": "begin frequent three tries",
    "start": "295440",
    "end": "296960"
  },
  {
    "text": "we know what happened when we do retries",
    "start": "296960",
    "end": "298720"
  },
  {
    "text": "guys right",
    "start": "298720",
    "end": "300639"
  },
  {
    "text": "this is this is the major problems that",
    "start": "300639",
    "end": "303039"
  },
  {
    "text": "we have in microservices",
    "start": "303039",
    "end": "305199"
  },
  {
    "text": "retries and short circuit short",
    "start": "305199",
    "end": "308720"
  },
  {
    "text": "circuit breaking all these things",
    "start": "308720",
    "end": "311600"
  },
  {
    "text": "amplify the number of requests the more",
    "start": "311600",
    "end": "313360"
  },
  {
    "text": "request you have",
    "start": "313360",
    "end": "314720"
  },
  {
    "text": "right you make a request and the client",
    "start": "314720",
    "end": "317919"
  },
  {
    "text": "times out right and then",
    "start": "317919",
    "end": "321039"
  },
  {
    "text": "although yeah the client times up but",
    "start": "321039",
    "end": "322720"
  },
  {
    "text": "the servers is the server or the service",
    "start": "322720",
    "end": "325840"
  },
  {
    "text": "keeps executing that request because it",
    "start": "325840",
    "end": "328800"
  },
  {
    "text": "doesn't know that you actually timed out",
    "start": "328800",
    "end": "330400"
  },
  {
    "text": "right they don't have knowledge",
    "start": "330400",
    "end": "332000"
  },
  {
    "text": "right of each other the client and the",
    "start": "332000",
    "end": "334479"
  },
  {
    "text": "service",
    "start": "334479",
    "end": "335600"
  },
  {
    "text": "so now the client says okay let me retry",
    "start": "335600",
    "end": "337520"
  },
  {
    "text": "so it will",
    "start": "337520",
    "end": "339360"
  },
  {
    "text": "try to it will it will cancel that",
    "start": "339360",
    "end": "341840"
  },
  {
    "text": "request",
    "start": "341840",
    "end": "342560"
  },
  {
    "text": "and by cancel we mean give up",
    "start": "342560",
    "end": "345919"
  },
  {
    "text": "very few services have the ability to",
    "start": "345919",
    "end": "347680"
  },
  {
    "text": "truly cancel the request is very very",
    "start": "347680",
    "end": "349680"
  },
  {
    "text": "difficult",
    "start": "349680",
    "end": "350560"
  },
  {
    "text": "it's a stateful way of cancellation grpc",
    "start": "350560",
    "end": "353360"
  },
  {
    "text": "supports it but you have to do it",
    "start": "353360",
    "end": "355120"
  },
  {
    "text": "really right you have to get it right to",
    "start": "355120",
    "end": "356880"
  },
  {
    "text": "cancel a request because what does that",
    "start": "356880",
    "end": "358319"
  },
  {
    "text": "mean",
    "start": "358319",
    "end": "358800"
  },
  {
    "text": "i'm in the middle of something right you",
    "start": "358800",
    "end": "360639"
  },
  {
    "text": "have to have hooks on the server side to",
    "start": "360639",
    "end": "362319"
  },
  {
    "text": "cancel a request there is no way",
    "start": "362319",
    "end": "364560"
  },
  {
    "text": "to do it easily right there's a lot of",
    "start": "364560",
    "end": "367039"
  },
  {
    "text": "work so",
    "start": "367039",
    "end": "368000"
  },
  {
    "text": "by canceling here we mean hey i just",
    "start": "368000",
    "end": "370000"
  },
  {
    "text": "give up let me make another request",
    "start": "370000",
    "end": "372000"
  },
  {
    "text": "all of a sudden you just double the",
    "start": "372000",
    "end": "373360"
  },
  {
    "text": "amount of requests that request now is",
    "start": "373360",
    "end": "375360"
  },
  {
    "text": "waiting",
    "start": "375360",
    "end": "376000"
  },
  {
    "text": "and now imagine thousands and thousands",
    "start": "376000",
    "end": "378479"
  },
  {
    "text": "of dns clients",
    "start": "378479",
    "end": "379520"
  },
  {
    "text": "doing the same thing all this is going",
    "start": "379520",
    "end": "381360"
  },
  {
    "text": "to become overloaded right",
    "start": "381360",
    "end": "383680"
  },
  {
    "text": "as our dns service become overloaded dns",
    "start": "383680",
    "end": "386240"
  },
  {
    "text": "clients began frequent retries",
    "start": "386240",
    "end": "388160"
  },
  {
    "text": "of their quest which added workload to",
    "start": "388160",
    "end": "391280"
  },
  {
    "text": "the dns service",
    "start": "391280",
    "end": "392880"
  },
  {
    "text": "since client retries are considered",
    "start": "392880",
    "end": "395039"
  },
  {
    "text": "legitimate dns traffic",
    "start": "395039",
    "end": "396720"
  },
  {
    "text": "that's this traffic was not dropped by",
    "start": "396720",
    "end": "398479"
  },
  {
    "text": "our vol",
    "start": "398479",
    "end": "399759"
  },
  {
    "text": "volumetric spike monitoring systems",
    "start": "399759",
    "end": "403440"
  },
  {
    "text": "that's very interesting because it was",
    "start": "403440",
    "end": "404880"
  },
  {
    "text": "it wasn't just a normal http request",
    "start": "404880",
    "end": "406960"
  },
  {
    "text": "it would have been detected by their",
    "start": "406960",
    "end": "408800"
  },
  {
    "text": "monitoring and",
    "start": "408800",
    "end": "410080"
  },
  {
    "text": "mitigation system so hey there's a spike",
    "start": "410080",
    "end": "412400"
  },
  {
    "text": "you know what",
    "start": "412400",
    "end": "413520"
  },
  {
    "text": "that's what slack did like a few months",
    "start": "413520",
    "end": "415599"
  },
  {
    "text": "ago when they had",
    "start": "415599",
    "end": "417840"
  },
  {
    "text": "in january 2021 when they had it like",
    "start": "417840",
    "end": "420080"
  },
  {
    "text": "hey there's a lot of requests let's kill",
    "start": "420080",
    "end": "421680"
  },
  {
    "text": "those",
    "start": "421680",
    "end": "422000"
  },
  {
    "text": "requests so that our service uh",
    "start": "422000",
    "end": "425759"
  },
  {
    "text": "continue processing the existing one and",
    "start": "425759",
    "end": "427919"
  },
  {
    "text": "then let's let it in",
    "start": "427919",
    "end": "429599"
  },
  {
    "text": "they had to do that they can do that",
    "start": "429599",
    "end": "431440"
  },
  {
    "text": "because they have control over this",
    "start": "431440",
    "end": "433120"
  },
  {
    "text": "this is a completely different thing",
    "start": "433120",
    "end": "434560"
  },
  {
    "text": "that's why that's why i think a little",
    "start": "434560",
    "end": "436160"
  },
  {
    "text": "bit interesting here right",
    "start": "436160",
    "end": "437520"
  },
  {
    "text": "it's a dns request you can't just stop",
    "start": "437520",
    "end": "439840"
  },
  {
    "text": "dns requesting",
    "start": "439840",
    "end": "440800"
  },
  {
    "text": "this is the most legitimate request ever",
    "start": "440800",
    "end": "443520"
  },
  {
    "text": "it's a udp request a package",
    "start": "443520",
    "end": "445520"
  },
  {
    "text": "usually lightweight and usually it's",
    "start": "445520",
    "end": "448160"
  },
  {
    "text": "processed very quick",
    "start": "448160",
    "end": "449360"
  },
  {
    "text": "but the the cash misses here",
    "start": "449360",
    "end": "452880"
  },
  {
    "text": "is what got microsoft okay let's",
    "start": "452880",
    "end": "455280"
  },
  {
    "text": "continue",
    "start": "455280",
    "end": "456160"
  },
  {
    "text": "this increase in traffic led to",
    "start": "456160",
    "end": "458479"
  },
  {
    "text": "decreased availability",
    "start": "458479",
    "end": "460160"
  },
  {
    "text": "of our dns service so the arena is being",
    "start": "460160",
    "end": "463199"
  },
  {
    "text": "resolved",
    "start": "463199",
    "end": "465199"
  },
  {
    "text": "uh let's go if you want to go to",
    "start": "465199",
    "end": "467479"
  },
  {
    "text": "teams.microsoft.com",
    "start": "467479",
    "end": "468960"
  },
  {
    "text": "imagine all of these kinds trying to",
    "start": "468960",
    "end": "471039"
  },
  {
    "text": "resolve teams",
    "start": "471039",
    "end": "472000"
  },
  {
    "text": "right eventually and here's what how dns",
    "start": "472000",
    "end": "475680"
  },
  {
    "text": "works guys right",
    "start": "475680",
    "end": "476800"
  },
  {
    "text": "the ns works with multi-layers so you",
    "start": "476800",
    "end": "479840"
  },
  {
    "text": "will",
    "start": "479840",
    "end": "480240"
  },
  {
    "text": "call ideally you will call for dns",
    "start": "480240",
    "end": "483919"
  },
  {
    "text": "request",
    "start": "483919",
    "end": "484720"
  },
  {
    "text": "you will call your local dns provider",
    "start": "484720",
    "end": "487280"
  },
  {
    "text": "usually this is your isp",
    "start": "487280",
    "end": "488800"
  },
  {
    "text": "but you can override it to be anything",
    "start": "488800",
    "end": "490720"
  },
  {
    "text": "you want people started",
    "start": "490720",
    "end": "492879"
  },
  {
    "text": "using cloudflare recently and google",
    "start": "492879",
    "end": "495960"
  },
  {
    "text": "cloudflares111 and",
    "start": "495960",
    "end": "497680"
  },
  {
    "text": "google is 8888. so if you're calling",
    "start": "497680",
    "end": "500879"
  },
  {
    "text": "that say",
    "start": "500879",
    "end": "501840"
  },
  {
    "text": "where is teams.microsoft.com it will try",
    "start": "501840",
    "end": "505360"
  },
  {
    "text": "to answer",
    "start": "505360",
    "end": "506000"
  },
  {
    "text": "from the cache from its cache if it",
    "start": "506000",
    "end": "509120"
  },
  {
    "text": "doesn't know",
    "start": "509120",
    "end": "510800"
  },
  {
    "text": "it will forward the request to",
    "start": "510800",
    "end": "513919"
  },
  {
    "text": "an uh another dns intermediate dns",
    "start": "513919",
    "end": "517360"
  },
  {
    "text": "resolver",
    "start": "517360",
    "end": "518719"
  },
  {
    "text": "until this forwarding happens until you",
    "start": "518719",
    "end": "521039"
  },
  {
    "text": "reach what we call",
    "start": "521039",
    "end": "522159"
  },
  {
    "text": "the root dns server that is responsible",
    "start": "522159",
    "end": "525920"
  },
  {
    "text": "to resolve this domain which is uh",
    "start": "525920",
    "end": "528360"
  },
  {
    "text": "microsoft.com",
    "start": "528360",
    "end": "529680"
  },
  {
    "text": "belong in microsoft servers so the",
    "start": "529680",
    "end": "532000"
  },
  {
    "text": "authoritative dns server is at microsoft",
    "start": "532000",
    "end": "534959"
  },
  {
    "text": "that's what happened so the caching are",
    "start": "534959",
    "end": "538160"
  },
  {
    "text": "not happening just",
    "start": "538160",
    "end": "539279"
  },
  {
    "text": "at the microsoft layer there are",
    "start": "539279",
    "end": "542000"
  },
  {
    "text": "different caches",
    "start": "542000",
    "end": "542959"
  },
  {
    "text": "all around the globe but those got timed",
    "start": "542959",
    "end": "545920"
  },
  {
    "text": "out",
    "start": "545920",
    "end": "546720"
  },
  {
    "text": "eventually those caches got stale and",
    "start": "546720",
    "end": "549680"
  },
  {
    "text": "cloudflare and google had to",
    "start": "549680",
    "end": "552399"
  },
  {
    "text": "uh had to make requests eventually to",
    "start": "552399",
    "end": "554800"
  },
  {
    "text": "google",
    "start": "554800",
    "end": "555440"
  },
  {
    "text": "to microsoft to get the latest dns",
    "start": "555440",
    "end": "558480"
  },
  {
    "text": "request",
    "start": "558480",
    "end": "559360"
  },
  {
    "text": "and this essentially uh exacerbated the",
    "start": "559360",
    "end": "562560"
  },
  {
    "text": "problem",
    "start": "562560",
    "end": "563120"
  },
  {
    "text": "so what we learned here is if you don't",
    "start": "563120",
    "end": "565440"
  },
  {
    "text": "have cash for this you you better have a",
    "start": "565440",
    "end": "567680"
  },
  {
    "text": "lot of these dns servers",
    "start": "567680",
    "end": "569279"
  },
  {
    "text": "resolved ready to process this request",
    "start": "569279",
    "end": "572320"
  },
  {
    "text": "and you have to have",
    "start": "572320",
    "end": "573519"
  },
  {
    "text": "all sorts of caching to",
    "start": "573519",
    "end": "577279"
  },
  {
    "text": "to make it mitigate this because like",
    "start": "577279",
    "end": "578959"
  },
  {
    "text": "imagine all everybody's",
    "start": "578959",
    "end": "580720"
  },
  {
    "text": "calling on microsoft not just browsers",
    "start": "580720",
    "end": "583920"
  },
  {
    "text": "apis iot microsoft",
    "start": "583920",
    "end": "588399"
  },
  {
    "text": "teams and 365 services",
    "start": "588399",
    "end": "592000"
  },
  {
    "text": "imagine all these services everybody is",
    "start": "592000",
    "end": "594720"
  },
  {
    "text": "calling into dns",
    "start": "594720",
    "end": "596080"
  },
  {
    "text": "eventually this dns request poured in",
    "start": "596080",
    "end": "598720"
  },
  {
    "text": "into this dns servers",
    "start": "598720",
    "end": "600240"
  },
  {
    "text": "that micro uh that microsoft have so",
    "start": "600240",
    "end": "602959"
  },
  {
    "text": "what did they do mitigation",
    "start": "602959",
    "end": "604959"
  },
  {
    "text": "the decrease in service availability",
    "start": "604959",
    "end": "606880"
  },
  {
    "text": "triggered our monitoring systems",
    "start": "606880",
    "end": "608880"
  },
  {
    "text": "and engaged our engineers our dns",
    "start": "608880",
    "end": "611760"
  },
  {
    "text": "services",
    "start": "611760",
    "end": "612720"
  },
  {
    "text": "automatically recovered themselves by",
    "start": "612720",
    "end": "615120"
  },
  {
    "text": "2020",
    "start": "615120",
    "end": "616399"
  },
  {
    "text": "tour by 10 o'clock at the evening sheesh",
    "start": "616399",
    "end": "619839"
  },
  {
    "text": "i can't read this military timing 2200",
    "start": "619839",
    "end": "623120"
  },
  {
    "text": "right let's be uh fancy 2200 utc",
    "start": "623120",
    "end": "627680"
  },
  {
    "text": "this recovery time exceeded our",
    "start": "627680",
    "end": "630880"
  },
  {
    "text": "design goal and our engineers prepare",
    "start": "630880",
    "end": "634000"
  },
  {
    "text": "additional serving capacity",
    "start": "634000",
    "end": "636399"
  },
  {
    "text": "and the ability to answer dns queries",
    "start": "636399",
    "end": "639040"
  },
  {
    "text": "from",
    "start": "639040",
    "end": "639760"
  },
  {
    "text": "the volumatic spike mitigation system",
    "start": "639760",
    "end": "642880"
  },
  {
    "text": "in case further mitigation steps were",
    "start": "642880",
    "end": "646240"
  },
  {
    "text": "needed so they increased the",
    "start": "646240",
    "end": "647680"
  },
  {
    "text": "amount of dns resources essentially to",
    "start": "647680",
    "end": "650399"
  },
  {
    "text": "solve this",
    "start": "650399",
    "end": "652000"
  },
  {
    "text": "right because they they just couldn't",
    "start": "652000",
    "end": "654000"
  },
  {
    "text": "keep up with them",
    "start": "654000",
    "end": "655120"
  },
  {
    "text": "with the amount of load right it's just",
    "start": "655120",
    "end": "658320"
  },
  {
    "text": "interesting because",
    "start": "658320",
    "end": "660079"
  },
  {
    "text": "remember if if you don't",
    "start": "660079",
    "end": "663600"
  },
  {
    "text": "if nobody has the knowledge about your",
    "start": "663600",
    "end": "666000"
  },
  {
    "text": "dns resolver",
    "start": "666000",
    "end": "667680"
  },
  {
    "text": "the more you wait the worse it gets",
    "start": "667680",
    "end": "670560"
  },
  {
    "text": "because",
    "start": "670560",
    "end": "671600"
  },
  {
    "text": "if if at least one or two services",
    "start": "671600",
    "end": "674800"
  },
  {
    "text": "the intermediate dns resolvers got the",
    "start": "674800",
    "end": "677120"
  },
  {
    "text": "iprs for your dns",
    "start": "677120",
    "end": "679120"
  },
  {
    "text": "host then that's not a problem it's",
    "start": "679120",
    "end": "681839"
  },
  {
    "text": "gonna be cash",
    "start": "681839",
    "end": "682640"
  },
  {
    "text": "downstream but what if nobody got this",
    "start": "682640",
    "end": "686000"
  },
  {
    "text": "stuff",
    "start": "686000",
    "end": "687120"
  },
  {
    "text": "all these not just end users",
    "start": "687120",
    "end": "689839"
  },
  {
    "text": "intermediate dns resolvers are asking",
    "start": "689839",
    "end": "692160"
  },
  {
    "text": "microsoft and there are",
    "start": "692160",
    "end": "693519"
  },
  {
    "text": "thousands and thousands of those right",
    "start": "693519",
    "end": "695920"
  },
  {
    "text": "and",
    "start": "695920",
    "end": "696720"
  },
  {
    "text": "if you don't get and there are clients",
    "start": "696720",
    "end": "699600"
  },
  {
    "text": "of those",
    "start": "699600",
    "end": "700720"
  },
  {
    "text": "intermediate dns resolvers that are",
    "start": "700720",
    "end": "702560"
  },
  {
    "text": "asking google that are asking cloudflare",
    "start": "702560",
    "end": "705680"
  },
  {
    "text": "uh for microsoft.com or for",
    "start": "705680",
    "end": "708800"
  },
  {
    "text": "azure.com or for the status. all these",
    "start": "708800",
    "end": "711920"
  },
  {
    "text": "dns",
    "start": "711920",
    "end": "712560"
  },
  {
    "text": "and google and micro and cloud don't",
    "start": "712560",
    "end": "715120"
  },
  {
    "text": "know the answer they have to connect",
    "start": "715120",
    "end": "716480"
  },
  {
    "text": "mode",
    "start": "716480",
    "end": "716800"
  },
  {
    "text": "and that just this exacerbated the",
    "start": "716800",
    "end": "718720"
  },
  {
    "text": "request obviously",
    "start": "718720",
    "end": "720240"
  },
  {
    "text": "immediately after the incident we",
    "start": "720240",
    "end": "722320"
  },
  {
    "text": "updated the logic of the",
    "start": "722320",
    "end": "724160"
  },
  {
    "text": "volumetric spike mitigation system to",
    "start": "724160",
    "end": "726959"
  },
  {
    "text": "protect",
    "start": "726959",
    "end": "727519"
  },
  {
    "text": "the dns service from excessive",
    "start": "727519",
    "end": "728880"
  },
  {
    "text": "accessibility okay so",
    "start": "728880",
    "end": "730720"
  },
  {
    "text": "they started adding the logic into their",
    "start": "730720",
    "end": "733680"
  },
  {
    "text": "monitoring system to monitor",
    "start": "733680",
    "end": "735760"
  },
  {
    "text": "retries on dns service and and stop it",
    "start": "735760",
    "end": "738320"
  },
  {
    "text": "because you have to stop it at the end",
    "start": "738320",
    "end": "739600"
  },
  {
    "text": "of the day",
    "start": "739600",
    "end": "740880"
  },
  {
    "text": "because you cannot just accept accept",
    "start": "740880",
    "end": "742480"
  },
  {
    "text": "accept at the end of the day you're",
    "start": "742480",
    "end": "743680"
  },
  {
    "text": "going to increase your limits",
    "start": "743680",
    "end": "745600"
  },
  {
    "text": "which is something very interesting",
    "start": "745600",
    "end": "747040"
  },
  {
    "text": "happening on march i'm going to read",
    "start": "747040",
    "end": "748399"
  },
  {
    "text": "through that because uh",
    "start": "748399",
    "end": "749839"
  },
  {
    "text": "sorry guys i know that's going to make",
    "start": "749839",
    "end": "751440"
  },
  {
    "text": "the video longer but i think it's very",
    "start": "751440",
    "end": "753200"
  },
  {
    "text": "very interesting to read through",
    "start": "753200",
    "end": "754720"
  },
  {
    "text": "the other piece which i think it's it's",
    "start": "754720",
    "end": "756800"
  },
  {
    "text": "not really related but",
    "start": "756800",
    "end": "758880"
  },
  {
    "text": "i think it's interesting i'm not gonna",
    "start": "758880",
    "end": "760240"
  },
  {
    "text": "make another video for it i just so",
    "start": "760240",
    "end": "762399"
  },
  {
    "text": "enjoy the extra content all right next",
    "start": "762399",
    "end": "765200"
  },
  {
    "text": "steps",
    "start": "765200",
    "end": "767200"
  },
  {
    "text": "we apologize for the impact to affect",
    "start": "767200",
    "end": "769839"
  },
  {
    "text": "our customers",
    "start": "769839",
    "end": "770720"
  },
  {
    "text": "we are continuously taking steps to",
    "start": "770720",
    "end": "772720"
  },
  {
    "text": "improve the microsoft azure platform",
    "start": "772720",
    "end": "774639"
  },
  {
    "text": "and our processes to help ensure such",
    "start": "774639",
    "end": "777279"
  },
  {
    "text": "incidents do not occur",
    "start": "777279",
    "end": "778639"
  },
  {
    "text": "in the future in this case this includes",
    "start": "778639",
    "end": "780880"
  },
  {
    "text": "but is not limited to",
    "start": "780880",
    "end": "782480"
  },
  {
    "text": "repair the code defect so that all",
    "start": "782480",
    "end": "785279"
  },
  {
    "text": "requests can be efficiently handled in",
    "start": "785279",
    "end": "786880"
  },
  {
    "text": "the cash okay this is obviously",
    "start": "786880",
    "end": "789360"
  },
  {
    "text": "one of the solution or if if not the",
    "start": "789360",
    "end": "791279"
  },
  {
    "text": "solution just",
    "start": "791279",
    "end": "792720"
  },
  {
    "text": "just cash it on and when i say cash here",
    "start": "792720",
    "end": "796079"
  },
  {
    "text": "we're talking about cashing at microsoft",
    "start": "796079",
    "end": "798800"
  },
  {
    "text": "site we're not talking about",
    "start": "798800",
    "end": "800079"
  },
  {
    "text": "outside cache our cache is taken for",
    "start": "800079",
    "end": "802079"
  },
  {
    "text": "granted obviously that's",
    "start": "802079",
    "end": "803279"
  },
  {
    "text": "without saying we need to cache at",
    "start": "803279",
    "end": "807040"
  },
  {
    "text": "the edge of microsoft servers",
    "start": "807040",
    "end": "810320"
  },
  {
    "start": "810000",
    "end": "1561000"
  },
  {
    "text": "improve the automatic detection and",
    "start": "810320",
    "end": "812639"
  },
  {
    "text": "mitigation of the anomalous traffic",
    "start": "812639",
    "end": "814240"
  },
  {
    "text": "pattern which they did right",
    "start": "814240",
    "end": "815440"
  },
  {
    "text": "they uh they mentioned that all right so",
    "start": "815440",
    "end": "818480"
  },
  {
    "text": "let's go through this",
    "start": "818480",
    "end": "819519"
  },
  {
    "text": "uh the other one i think you're gonna",
    "start": "819519",
    "end": "822639"
  },
  {
    "text": "enjoy this this is",
    "start": "822639",
    "end": "823440"
  },
  {
    "text": "this is really good azure key vault",
    "start": "823440",
    "end": "826720"
  },
  {
    "text": "interme intermittent failures so there",
    "start": "826720",
    "end": "829360"
  },
  {
    "text": "they had",
    "start": "829360",
    "end": "830399"
  },
  {
    "text": "on march 18 they had another outage",
    "start": "830399",
    "end": "834800"
  },
  {
    "text": "where a subset of customers experienced",
    "start": "834800",
    "end": "838880"
  },
  {
    "text": "issues and encountered error message",
    "start": "838880",
    "end": "840800"
  },
  {
    "text": "internal server",
    "start": "840800",
    "end": "842160"
  },
  {
    "text": "errors when accessing their vaults in",
    "start": "842160",
    "end": "844880"
  },
  {
    "text": "west europe",
    "start": "844880",
    "end": "845839"
  },
  {
    "text": "and north europe region oh it's only on",
    "start": "845839",
    "end": "847600"
  },
  {
    "text": "europe okay there was only on europe",
    "start": "847600",
    "end": "850560"
  },
  {
    "text": "only on europe it's basically half the",
    "start": "850560",
    "end": "852800"
  },
  {
    "text": "world",
    "start": "852800",
    "end": "854000"
  },
  {
    "text": "these errors were directly impacting",
    "start": "854000",
    "end": "857120"
  },
  {
    "text": "customers",
    "start": "857120",
    "end": "857839"
  },
  {
    "text": "performing operations on the control",
    "start": "857839",
    "end": "860000"
  },
  {
    "text": "plane and data plane",
    "start": "860000",
    "end": "861600"
  },
  {
    "text": "for azure key vault or for supported",
    "start": "861600",
    "end": "865279"
  },
  {
    "text": "scenarios",
    "start": "865279",
    "end": "866639"
  },
  {
    "text": "that that cost that use customers manage",
    "start": "866639",
    "end": "869279"
  },
  {
    "text": "keys for encryption or the rest",
    "start": "869279",
    "end": "871120"
  },
  {
    "text": "azure resource providers in which case",
    "start": "871120",
    "end": "874399"
  },
  {
    "text": "those resources will remain available so",
    "start": "874399",
    "end": "876079"
  },
  {
    "text": "what happened really here",
    "start": "876079",
    "end": "878160"
  },
  {
    "text": "i just want to read the blurb that i'm",
    "start": "878160",
    "end": "880399"
  },
  {
    "text": "interested in here",
    "start": "880399",
    "end": "881600"
  },
  {
    "text": "this is relatable to me this happened to",
    "start": "881600",
    "end": "884160"
  },
  {
    "text": "me that's why i would like to read it to",
    "start": "884160",
    "end": "885680"
  },
  {
    "text": "you guys",
    "start": "885680",
    "end": "887040"
  },
  {
    "text": "and i think yeah you're going to enjoy",
    "start": "887040",
    "end": "888480"
  },
  {
    "text": "it",
    "start": "888480",
    "end": "890079"
  },
  {
    "text": "root cause azure key vault microservice",
    "start": "890079",
    "end": "893519"
  },
  {
    "text": "that handles storage transactions in",
    "start": "893519",
    "end": "895839"
  },
  {
    "text": "west europe region",
    "start": "895839",
    "end": "897199"
  },
  {
    "text": "was impacted by a high cpu usage event",
    "start": "897199",
    "end": "900800"
  },
  {
    "text": "in one of the processes that runs on the",
    "start": "900800",
    "end": "903839"
  },
  {
    "text": "vms",
    "start": "903839",
    "end": "905680"
  },
  {
    "text": "so there's a micro service that handles",
    "start": "905680",
    "end": "908399"
  },
  {
    "text": "this",
    "start": "908399",
    "end": "908720"
  },
  {
    "text": "azure key vault and it's running on",
    "start": "908720",
    "end": "911839"
  },
  {
    "text": "on one of the vms one of the vms",
    "start": "911839",
    "end": "915040"
  },
  {
    "text": "and where do vms live they live",
    "start": "915040",
    "end": "917040"
  },
  {
    "text": "eventually on a physical machine",
    "start": "917040",
    "end": "918560"
  },
  {
    "text": "so you have this one physical machine",
    "start": "918560",
    "end": "921680"
  },
  {
    "text": "this bare metal that is hosting",
    "start": "921680",
    "end": "924720"
  },
  {
    "text": "maybe thousands of vms and there's one",
    "start": "924720",
    "end": "927279"
  },
  {
    "text": "vm",
    "start": "927279",
    "end": "928160"
  },
  {
    "text": "that is have high cpu usage",
    "start": "928160",
    "end": "933120"
  },
  {
    "text": "the resource utilization of that process",
    "start": "933199",
    "end": "936079"
  },
  {
    "text": "was",
    "start": "936079",
    "end": "936560"
  },
  {
    "text": "not constrained and it impacted",
    "start": "936560",
    "end": "940079"
  },
  {
    "text": "underlying machines supporting azure key",
    "start": "940079",
    "end": "943120"
  },
  {
    "text": "vaults",
    "start": "943120",
    "end": "943920"
  },
  {
    "text": "service at uh 11 o'clock",
    "start": "943920",
    "end": "947120"
  },
  {
    "text": "wow because that vm didn't have any",
    "start": "947120",
    "end": "949920"
  },
  {
    "text": "consensus hey you can grow as",
    "start": "949920",
    "end": "951519"
  },
  {
    "text": "as as large as you can that's what she",
    "start": "951519",
    "end": "954560"
  },
  {
    "text": "said",
    "start": "954560",
    "end": "955279"
  },
  {
    "text": "and basically because you didn't have",
    "start": "955279",
    "end": "957519"
  },
  {
    "text": "any limit",
    "start": "957519",
    "end": "958800"
  },
  {
    "text": "the vm just took over the whole machine",
    "start": "958800",
    "end": "961199"
  },
  {
    "text": "and the rest of the vms",
    "start": "961199",
    "end": "963199"
  },
  {
    "text": "that is in that same physical machine",
    "start": "963199",
    "end": "965839"
  },
  {
    "text": "starved",
    "start": "965839",
    "end": "966639"
  },
  {
    "text": "to death essentially and then just",
    "start": "966639",
    "end": "969120"
  },
  {
    "text": "basically",
    "start": "969120",
    "end": "970079"
  },
  {
    "text": "stop responding to other stuff which it",
    "start": "970079",
    "end": "972320"
  },
  {
    "text": "kind of we saw this downstream behavior",
    "start": "972320",
    "end": "974720"
  },
  {
    "text": "of",
    "start": "974720",
    "end": "975279"
  },
  {
    "text": "one thing leads to another thing leads",
    "start": "975279",
    "end": "976800"
  },
  {
    "text": "to another thing all right so",
    "start": "976800",
    "end": "978720"
  },
  {
    "text": "that's very interesting this is very",
    "start": "978720",
    "end": "981680"
  },
  {
    "text": "very",
    "start": "981680",
    "end": "982000"
  },
  {
    "text": "common i i've done this before where a",
    "start": "982000",
    "end": "984480"
  },
  {
    "text": "vm just didn't have any constraint by",
    "start": "984480",
    "end": "986240"
  },
  {
    "text": "default there's",
    "start": "986240",
    "end": "987839"
  },
  {
    "text": "well just why is this thing not working",
    "start": "987839",
    "end": "990560"
  },
  {
    "text": "right it has nothing to do with it just",
    "start": "990560",
    "end": "992399"
  },
  {
    "text": "if you go to the vm the vm will report",
    "start": "992399",
    "end": "994399"
  },
  {
    "text": "hey everything is happy and dandy right",
    "start": "994399",
    "end": "996480"
  },
  {
    "text": "because the vm",
    "start": "996480",
    "end": "997440"
  },
  {
    "text": "says hey i'm not doing anything but",
    "start": "997440",
    "end": "1000320"
  },
  {
    "text": "outside",
    "start": "1000320",
    "end": "1001759"
  },
  {
    "text": "cpu the outside machine is being pegged",
    "start": "1001759",
    "end": "1005759"
  },
  {
    "text": "by",
    "start": "1005759",
    "end": "1006079"
  },
  {
    "text": "one of the vms because we have actually",
    "start": "1006079",
    "end": "1008800"
  },
  {
    "text": "took all the resources",
    "start": "1008800",
    "end": "1010079"
  },
  {
    "text": "the increased cpu utilization led to",
    "start": "1010079",
    "end": "1011759"
  },
  {
    "text": "connection drops to the other backend",
    "start": "1011759",
    "end": "1013600"
  },
  {
    "text": "system makes sense right",
    "start": "1013600",
    "end": "1014720"
  },
  {
    "text": "it's like one once once you don't have",
    "start": "1014720",
    "end": "1016800"
  },
  {
    "text": "cpu to",
    "start": "1016800",
    "end": "1017839"
  },
  {
    "text": "process packets that comes in you're",
    "start": "1017839",
    "end": "1020560"
  },
  {
    "text": "done",
    "start": "1020560",
    "end": "1021040"
  },
  {
    "text": "right hey guys jose from editing as i",
    "start": "1021040",
    "end": "1023360"
  },
  {
    "text": "started",
    "start": "1023360",
    "end": "1024160"
  },
  {
    "text": "reading and editing through the video",
    "start": "1024160",
    "end": "1026400"
  },
  {
    "text": "now i'm not 100",
    "start": "1026400",
    "end": "1027760"
  },
  {
    "text": "sure what really happened so now here's",
    "start": "1027760",
    "end": "1030160"
  },
  {
    "text": "what happened",
    "start": "1030160",
    "end": "1030880"
  },
  {
    "text": "we have a process that is running in a",
    "start": "1030880",
    "end": "1033360"
  },
  {
    "text": "vm",
    "start": "1033360",
    "end": "1034798"
  },
  {
    "text": "and that vm is",
    "start": "1034799",
    "end": "1038240"
  },
  {
    "text": "sitting besides other vm's in the same",
    "start": "1038240",
    "end": "1041280"
  },
  {
    "text": "physical machine",
    "start": "1041280",
    "end": "1042720"
  },
  {
    "text": "right that single process running this",
    "start": "1042720",
    "end": "1045438"
  },
  {
    "text": "key volt microservice",
    "start": "1045439",
    "end": "1047438"
  },
  {
    "text": "took over and and hit 100 cpu",
    "start": "1047439",
    "end": "1050960"
  },
  {
    "text": "now did it took",
    "start": "1050960",
    "end": "1054480"
  },
  {
    "text": "did it took over did it take did it take",
    "start": "1054480",
    "end": "1057200"
  },
  {
    "text": "over",
    "start": "1057200",
    "end": "1058000"
  },
  {
    "text": "that single vm that is this processing",
    "start": "1058000",
    "end": "1060240"
  },
  {
    "text": "on or did it even go",
    "start": "1060240",
    "end": "1062080"
  },
  {
    "text": "further and took over that vm and",
    "start": "1062080",
    "end": "1065360"
  },
  {
    "text": "went all the way and took over the",
    "start": "1065360",
    "end": "1067600"
  },
  {
    "text": "processes",
    "start": "1067600",
    "end": "1068799"
  },
  {
    "text": "of that machine itself",
    "start": "1068799",
    "end": "1072559"
  },
  {
    "text": "the physical machine that i'm not sure",
    "start": "1072559",
    "end": "1074720"
  },
  {
    "text": "about so i just wanted to clarify that",
    "start": "1074720",
    "end": "1077120"
  },
  {
    "text": "i'm i think it's the earlier where the",
    "start": "1077120",
    "end": "1080240"
  },
  {
    "text": "process took over that vm",
    "start": "1080240",
    "end": "1082720"
  },
  {
    "text": "the other vms in that physical machine",
    "start": "1082720",
    "end": "1086000"
  },
  {
    "text": "i think it remain uh intact but",
    "start": "1086000",
    "end": "1089120"
  },
  {
    "text": "i could be wrong it's not clear from the",
    "start": "1089120",
    "end": "1090880"
  },
  {
    "text": "article let me know what you think",
    "start": "1090880",
    "end": "1092960"
  },
  {
    "text": "back to the video you'll see other",
    "start": "1092960",
    "end": "1095679"
  },
  {
    "text": "services start to",
    "start": "1095679",
    "end": "1096880"
  },
  {
    "text": "fall down the monitoring system detected",
    "start": "1096880",
    "end": "1099600"
  },
  {
    "text": "the failures and triggered and automatic",
    "start": "1099600",
    "end": "1101520"
  },
  {
    "text": "failures",
    "start": "1101520",
    "end": "1102240"
  },
  {
    "text": "of the west europe's uh services to",
    "start": "1102240",
    "end": "1104559"
  },
  {
    "text": "north europe",
    "start": "1104559",
    "end": "1106080"
  },
  {
    "text": "at vault and west region were then",
    "start": "1106080",
    "end": "1108559"
  },
  {
    "text": "limited to read-only operation so was",
    "start": "1108559",
    "end": "1110480"
  },
  {
    "text": "limited to",
    "start": "1110480",
    "end": "1111120"
  },
  {
    "text": "read-only operations westeros vms for",
    "start": "1111120",
    "end": "1113600"
  },
  {
    "text": "the microservice continued to be",
    "start": "1113600",
    "end": "1115280"
  },
  {
    "text": "unhealthy",
    "start": "1115280",
    "end": "1116240"
  },
  {
    "text": "and north europe served the traffic for",
    "start": "1116240",
    "end": "1118400"
  },
  {
    "text": "both regions",
    "start": "1118400",
    "end": "1119760"
  },
  {
    "text": "so it shifted to north north europe",
    "start": "1119760",
    "end": "1123360"
  },
  {
    "text": "right so so it was like some sort of a",
    "start": "1123360",
    "end": "1125840"
  },
  {
    "text": "failover i guess",
    "start": "1125840",
    "end": "1127440"
  },
  {
    "text": "and then now all the requests flip to",
    "start": "1127440",
    "end": "1130720"
  },
  {
    "text": "the",
    "start": "1130720",
    "end": "1131120"
  },
  {
    "text": "north europe the same background process",
    "start": "1131120",
    "end": "1136080"
  },
  {
    "text": "experienced high cp usage in north",
    "start": "1136080",
    "end": "1138720"
  },
  {
    "text": "europe",
    "start": "1138720",
    "end": "1139520"
  },
  {
    "text": "at this now now north europe just",
    "start": "1139520",
    "end": "1142640"
  },
  {
    "text": "kicked in the same bug oh not bike",
    "start": "1142640",
    "end": "1145600"
  },
  {
    "text": "really it's just",
    "start": "1145600",
    "end": "1146559"
  },
  {
    "text": "the that north we know that west europe",
    "start": "1146559",
    "end": "1149840"
  },
  {
    "text": "just got",
    "start": "1149840",
    "end": "1151440"
  },
  {
    "text": "screwed right now failover took over",
    "start": "1151440",
    "end": "1154799"
  },
  {
    "text": "we went to north europe and north europe",
    "start": "1154799",
    "end": "1156960"
  },
  {
    "text": "now have the same problem",
    "start": "1156960",
    "end": "1158240"
  },
  {
    "text": "one of the vms high cpu the underlying",
    "start": "1158240",
    "end": "1161120"
  },
  {
    "text": "machine just died",
    "start": "1161120",
    "end": "1162640"
  },
  {
    "text": "and all the vms just die as a result",
    "start": "1162640",
    "end": "1165280"
  },
  {
    "text": "living on top of that physical machine",
    "start": "1165280",
    "end": "1166960"
  },
  {
    "text": "again",
    "start": "1166960",
    "end": "1168000"
  },
  {
    "text": "i don't think that's what's happened i",
    "start": "1168000",
    "end": "1170320"
  },
  {
    "text": "think the vm that the process is running",
    "start": "1170320",
    "end": "1173280"
  },
  {
    "text": "went down",
    "start": "1173280",
    "end": "1174000"
  },
  {
    "text": "and all the micro services running on",
    "start": "1174000",
    "end": "1177360"
  },
  {
    "text": "that vm when done with it",
    "start": "1177360",
    "end": "1179440"
  },
  {
    "text": "the other vms that has nothing to do",
    "start": "1179440",
    "end": "1181919"
  },
  {
    "text": "with the vm",
    "start": "1181919",
    "end": "1183280"
  },
  {
    "text": "should remain isolated again",
    "start": "1183280",
    "end": "1186880"
  },
  {
    "text": "that's just a speculation at this point",
    "start": "1186880",
    "end": "1188640"
  },
  {
    "text": "the failures across both region",
    "start": "1188640",
    "end": "1190320"
  },
  {
    "text": "caused an outage for both read and write",
    "start": "1190320",
    "end": "1192640"
  },
  {
    "text": "okay because",
    "start": "1192640",
    "end": "1193360"
  },
  {
    "text": "you can't even read you were able to",
    "start": "1193360",
    "end": "1195200"
  },
  {
    "text": "read but now you can even read or write",
    "start": "1195200",
    "end": "1197840"
  },
  {
    "text": "availability of vaults in both regions",
    "start": "1197840",
    "end": "1200880"
  },
  {
    "text": "while working on this mitigation the",
    "start": "1200880",
    "end": "1202880"
  },
  {
    "text": "automated systems triggered a series of",
    "start": "1202880",
    "end": "1204880"
  },
  {
    "text": "failures",
    "start": "1204880",
    "end": "1205679"
  },
  {
    "text": "failovers and failbacks so guys this",
    "start": "1205679",
    "end": "1208640"
  },
  {
    "text": "only affects",
    "start": "1208640",
    "end": "1210000"
  },
  {
    "text": "if you were unlucky and your",
    "start": "1210000",
    "end": "1213760"
  },
  {
    "text": "to-do microservice lives",
    "start": "1213760",
    "end": "1217200"
  },
  {
    "text": "on a vm that happens to be and the same",
    "start": "1217200",
    "end": "1221039"
  },
  {
    "text": "machine that this key vault is in",
    "start": "1221039",
    "end": "1223520"
  },
  {
    "text": "your application is done essentially so",
    "start": "1223520",
    "end": "1227120"
  },
  {
    "text": "some lucky services were not in the same",
    "start": "1227120",
    "end": "1230880"
  },
  {
    "text": "physical machine as a key vault azure",
    "start": "1230880",
    "end": "1233280"
  },
  {
    "text": "which which makes sense like",
    "start": "1233280",
    "end": "1234880"
  },
  {
    "text": "as you distribute things you it's good",
    "start": "1234880",
    "end": "1236799"
  },
  {
    "text": "to distribute the things",
    "start": "1236799",
    "end": "1238400"
  },
  {
    "text": "kind of randomly and don't put things",
    "start": "1238400",
    "end": "1240960"
  },
  {
    "text": "consistently",
    "start": "1240960",
    "end": "1242080"
  },
  {
    "text": "right because i know the other machines",
    "start": "1242080",
    "end": "1243919"
  },
  {
    "text": "continue working normally right because",
    "start": "1243919",
    "end": "1245600"
  },
  {
    "text": "they don't have this",
    "start": "1245600",
    "end": "1247200"
  },
  {
    "text": "one key volt thing that just took over",
    "start": "1247200",
    "end": "1250159"
  },
  {
    "text": "the whole",
    "start": "1250159",
    "end": "1250880"
  },
  {
    "text": "machine the automated system triggered a",
    "start": "1250880",
    "end": "1252559"
  },
  {
    "text": "series of failovers and",
    "start": "1252559",
    "end": "1254000"
  },
  {
    "text": "failed backs which led to the service",
    "start": "1254000",
    "end": "1256640"
  },
  {
    "text": "switching",
    "start": "1256640",
    "end": "1257520"
  },
  {
    "text": "traffic between west europe and north",
    "start": "1257520",
    "end": "1260000"
  },
  {
    "text": "europe as",
    "start": "1260000",
    "end": "1260799"
  },
  {
    "text": "each region alternate becoming healthy",
    "start": "1260799",
    "end": "1262880"
  },
  {
    "text": "and unhealthy with shifting traffic so",
    "start": "1262880",
    "end": "1264640"
  },
  {
    "text": "they just like",
    "start": "1264640",
    "end": "1265679"
  },
  {
    "text": "back and forth back and forth mitigation",
    "start": "1265679",
    "end": "1268640"
  },
  {
    "text": "at the first measure to remedy this uh",
    "start": "1268640",
    "end": "1270960"
  },
  {
    "text": "the situation underlining vm supporting",
    "start": "1270960",
    "end": "1273200"
  },
  {
    "text": "key guys what would be the",
    "start": "1273200",
    "end": "1275120"
  },
  {
    "text": "what would be the measure should be",
    "start": "1275120",
    "end": "1277360"
  },
  {
    "text": "limit the vm so it does",
    "start": "1277360",
    "end": "1278799"
  },
  {
    "text": "it doesn't increase like hey you can",
    "start": "1278799",
    "end": "1280799"
  },
  {
    "text": "only have one cpu or two cpus",
    "start": "1280799",
    "end": "1283679"
  },
  {
    "text": "and and hey you can only consume 50 of",
    "start": "1283679",
    "end": "1286320"
  },
  {
    "text": "the cpu you cannot",
    "start": "1286320",
    "end": "1287440"
  },
  {
    "text": "do more than that as the first measure",
    "start": "1287440",
    "end": "1289280"
  },
  {
    "text": "to emerit the situation underlying vms",
    "start": "1289280",
    "end": "1291760"
  },
  {
    "text": "supporting azure key vault were rebooted",
    "start": "1291760",
    "end": "1294480"
  },
  {
    "text": "they just rebooted the whole machine",
    "start": "1294480",
    "end": "1295840"
  },
  {
    "text": "however the cpu usage continued to be",
    "start": "1295840",
    "end": "1297600"
  },
  {
    "text": "high in the vms",
    "start": "1297600",
    "end": "1298480"
  },
  {
    "text": "engineers then deployed new vms with",
    "start": "1298480",
    "end": "1301280"
  },
  {
    "text": "higher capacity to handle the increased",
    "start": "1301280",
    "end": "1303520"
  },
  {
    "text": "cpu",
    "start": "1303520",
    "end": "1304080"
  },
  {
    "text": "usage oh so just deploy a new cpu okay",
    "start": "1304080",
    "end": "1307200"
  },
  {
    "text": "and redirect the traffic to them once",
    "start": "1307200",
    "end": "1309120"
  },
  {
    "text": "this was completed both regions recover",
    "start": "1309120",
    "end": "1311840"
  },
  {
    "text": "also as a preliminary measure to prevent",
    "start": "1311840",
    "end": "1315760"
  },
  {
    "text": "recurrence in other regions the capacity",
    "start": "1315760",
    "end": "1319039"
  },
  {
    "text": "was increased so they just increase the",
    "start": "1319039",
    "end": "1320720"
  },
  {
    "text": "capacity interesting",
    "start": "1320720",
    "end": "1322400"
  },
  {
    "text": "why wouldn't they limit okay that's",
    "start": "1322400",
    "end": "1324880"
  },
  {
    "text": "weird",
    "start": "1324880",
    "end": "1325760"
  },
  {
    "text": "let's continue reading maybe they will",
    "start": "1325760",
    "end": "1327039"
  },
  {
    "text": "do it here",
    "start": "1327039",
    "end": "1329280"
  },
  {
    "text": "we apologize blah blah blah the first",
    "start": "1329280",
    "end": "1331760"
  },
  {
    "text": "precautionary measure taken was to",
    "start": "1331760",
    "end": "1333360"
  },
  {
    "text": "increase the number of vms and capacity",
    "start": "1333360",
    "end": "1335440"
  },
  {
    "text": "for the microservices globally",
    "start": "1335440",
    "end": "1337200"
  },
  {
    "text": "to prevent outages from from a similar",
    "start": "1337200",
    "end": "1339919"
  },
  {
    "text": "issue so",
    "start": "1339919",
    "end": "1341039"
  },
  {
    "text": "because now the vms yeah there is a",
    "start": "1341039",
    "end": "1343360"
  },
  {
    "text": "problem because the vm is",
    "start": "1343360",
    "end": "1345200"
  },
  {
    "text": "taking a lot a lot of cpu that means we",
    "start": "1345200",
    "end": "1348240"
  },
  {
    "text": "need more",
    "start": "1348240",
    "end": "1349280"
  },
  {
    "text": "vms of this instance we need more",
    "start": "1349280",
    "end": "1351360"
  },
  {
    "text": "instances of this key vaulting",
    "start": "1351360",
    "end": "1353200"
  },
  {
    "text": "because apparently one vm is not",
    "start": "1353200",
    "end": "1354880"
  },
  {
    "text": "handling it so spin up more",
    "start": "1354880",
    "end": "1357039"
  },
  {
    "text": "right now you need i think we need to",
    "start": "1357039",
    "end": "1360400"
  },
  {
    "text": "kind of limit this from happening all",
    "start": "1360400",
    "end": "1362880"
  },
  {
    "text": "right",
    "start": "1362880",
    "end": "1363760"
  },
  {
    "text": "i guess they won't be doing it let's see",
    "start": "1363760",
    "end": "1366400"
  },
  {
    "text": "new monitors have been added to watch",
    "start": "1366400",
    "end": "1368559"
  },
  {
    "text": "for increased resource resource user",
    "start": "1368559",
    "end": "1370960"
  },
  {
    "text": "usage from processes",
    "start": "1370960",
    "end": "1373600"
  },
  {
    "text": "and fail back is being constrained what",
    "start": "1373600",
    "end": "1376000"
  },
  {
    "text": "is failback i never heard this before",
    "start": "1376000",
    "end": "1377760"
  },
  {
    "text": "interesting i guess failovers go to the",
    "start": "1377760",
    "end": "1380159"
  },
  {
    "text": "other machine and then",
    "start": "1380159",
    "end": "1381360"
  },
  {
    "text": "when we flip back when the other machine",
    "start": "1381360",
    "end": "1383919"
  },
  {
    "text": "is healthy we fail back oh i guess",
    "start": "1383919",
    "end": "1385600"
  },
  {
    "text": "that's what it means",
    "start": "1385600",
    "end": "1386799"
  },
  {
    "text": "never heard of this before i guess they",
    "start": "1386799",
    "end": "1389520"
  },
  {
    "text": "go",
    "start": "1389520",
    "end": "1390159"
  },
  {
    "text": "side by side okay is being constrained",
    "start": "1390159",
    "end": "1393360"
  },
  {
    "text": "to prevent",
    "start": "1393360",
    "end": "1394159"
  },
  {
    "text": "ping pong between uh repaired region",
    "start": "1394159",
    "end": "1397520"
  },
  {
    "text": "because of this ping-pong as we talked",
    "start": "1397520",
    "end": "1398880"
  },
  {
    "text": "about fail back fade over fail back",
    "start": "1398880",
    "end": "1400720"
  },
  {
    "text": "forever",
    "start": "1400720",
    "end": "1401440"
  },
  {
    "text": "because if you go back and forth that's",
    "start": "1401440",
    "end": "1403360"
  },
  {
    "text": "just that's just a lot of uh",
    "start": "1403360",
    "end": "1406240"
  },
  {
    "text": "resources being consumed right which",
    "start": "1406240",
    "end": "1409120"
  },
  {
    "text": "extended the recovery time",
    "start": "1409120",
    "end": "1410960"
  },
  {
    "text": "the team is working on modifying the",
    "start": "1410960",
    "end": "1412320"
  },
  {
    "text": "failover pattern for the service so that",
    "start": "1412320",
    "end": "1414400"
  },
  {
    "text": "the",
    "start": "1414400",
    "end": "1415200"
  },
  {
    "text": "paired region is not affected by the",
    "start": "1415200",
    "end": "1417440"
  },
  {
    "text": "failover",
    "start": "1417440",
    "end": "1418240"
  },
  {
    "text": "traffic from another region so they are",
    "start": "1418240",
    "end": "1421279"
  },
  {
    "text": "the failover region when we go from",
    "start": "1421279",
    "end": "1424559"
  },
  {
    "text": "west europe to north europe",
    "start": "1424559",
    "end": "1427600"
  },
  {
    "text": "let's dedicate certain areas in the new",
    "start": "1427600",
    "end": "1431120"
  },
  {
    "text": "region",
    "start": "1431120",
    "end": "1432080"
  },
  {
    "text": "in the failover region for the fill over",
    "start": "1432080",
    "end": "1435279"
  },
  {
    "text": "stuff so that we don't take over the",
    "start": "1435279",
    "end": "1437600"
  },
  {
    "text": "whole region right just",
    "start": "1437600",
    "end": "1439279"
  },
  {
    "text": "dedicate a new er that's a good idea i",
    "start": "1439279",
    "end": "1441200"
  },
  {
    "text": "like it",
    "start": "1441200",
    "end": "1443600"
  },
  {
    "text": "we are looking into its resource usage",
    "start": "1443600",
    "end": "1445520"
  },
  {
    "text": "by processes on the underlying",
    "start": "1445520",
    "end": "1447360"
  },
  {
    "text": "vms that support key azure key vault and",
    "start": "1447360",
    "end": "1451120"
  },
  {
    "text": "working to build capacity model",
    "start": "1451120",
    "end": "1453440"
  },
  {
    "text": "and restrict high usage by a single",
    "start": "1453440",
    "end": "1455919"
  },
  {
    "text": "process okay",
    "start": "1455919",
    "end": "1456960"
  },
  {
    "text": "they are doing it this is just the final",
    "start": "1456960",
    "end": "1459679"
  },
  {
    "text": "uh essentially a",
    "start": "1459679",
    "end": "1460960"
  },
  {
    "text": "final solution for them all right guys i",
    "start": "1460960",
    "end": "1463440"
  },
  {
    "text": "think i think this",
    "start": "1463440",
    "end": "1464320"
  },
  {
    "text": "these two and then the third one",
    "start": "1464320",
    "end": "1466320"
  },
  {
    "text": "obviously i discussed it",
    "start": "1466320",
    "end": "1467520"
  },
  {
    "text": "i'm gonna reference the video guys if",
    "start": "1467520",
    "end": "1469120"
  },
  {
    "text": "you want to learn more about it",
    "start": "1469120",
    "end": "1471440"
  },
  {
    "text": "but this is interesting i think i think",
    "start": "1471440",
    "end": "1473120"
  },
  {
    "text": "that back the dns issue is actually",
    "start": "1473120",
    "end": "1474880"
  },
  {
    "text": "interesting",
    "start": "1474880",
    "end": "1476320"
  },
  {
    "text": "uh the idea of having different kind of",
    "start": "1476320",
    "end": "1479120"
  },
  {
    "text": "caches",
    "start": "1479120",
    "end": "1480240"
  },
  {
    "text": "and the monitoring and the retry concept",
    "start": "1480240",
    "end": "1483760"
  },
  {
    "text": "it's it's interesting the whole thing is",
    "start": "1483760",
    "end": "1485440"
  },
  {
    "text": "very interesting because",
    "start": "1485440",
    "end": "1486799"
  },
  {
    "text": "i never seen uh dns",
    "start": "1486799",
    "end": "1490159"
  },
  {
    "text": "queries taking down servers before right",
    "start": "1490159",
    "end": "1494080"
  },
  {
    "text": "this is this is new right maybe maybe",
    "start": "1494080",
    "end": "1497039"
  },
  {
    "text": "you guys",
    "start": "1497039",
    "end": "1497760"
  },
  {
    "text": "saw something like that but dns is",
    "start": "1497760",
    "end": "1500240"
  },
  {
    "text": "interesting",
    "start": "1500240",
    "end": "1501120"
  },
  {
    "text": "i mean regardless of actual attacks this",
    "start": "1501120",
    "end": "1504720"
  },
  {
    "text": "was not an attack this was just",
    "start": "1504720",
    "end": "1507200"
  },
  {
    "text": "as far as why you know we know this is",
    "start": "1507200",
    "end": "1508559"
  },
  {
    "text": "not an attack right",
    "start": "1508559",
    "end": "1510320"
  },
  {
    "text": "but this is uh this is just normal",
    "start": "1510320",
    "end": "1513440"
  },
  {
    "text": "processes",
    "start": "1513440",
    "end": "1514320"
  },
  {
    "text": "that is exacerbated by",
    "start": "1514320",
    "end": "1517919"
  },
  {
    "text": "the missing cache or the defect with the",
    "start": "1517919",
    "end": "1520720"
  },
  {
    "text": "caching",
    "start": "1520720",
    "end": "1521360"
  },
  {
    "text": "so i found it interesting let me know",
    "start": "1521360",
    "end": "1522960"
  },
  {
    "text": "guys what do you think",
    "start": "1522960",
    "end": "1524640"
  },
  {
    "text": "in the comment section below i'm going",
    "start": "1524640",
    "end": "1526400"
  },
  {
    "text": "to see you on the next one guys again",
    "start": "1526400",
    "end": "1528240"
  },
  {
    "text": "kudos for the microsoft engineers uh",
    "start": "1528240",
    "end": "1531520"
  },
  {
    "text": "on top of everything uh or as usual this",
    "start": "1531520",
    "end": "1534159"
  },
  {
    "text": "is this is difficult situations",
    "start": "1534159",
    "end": "1535840"
  },
  {
    "text": "uh if you if you are an engineer in",
    "start": "1535840",
    "end": "1538400"
  },
  {
    "text": "these companies",
    "start": "1538400",
    "end": "1539600"
  },
  {
    "text": "uh kudos to you guys i know this",
    "start": "1539600",
    "end": "1543120"
  },
  {
    "text": "is a very stressful and",
    "start": "1543120",
    "end": "1546159"
  },
  {
    "text": "very tough job so thank you so much for",
    "start": "1546159",
    "end": "1550080"
  },
  {
    "text": "all the engineers my fellow brethren",
    "start": "1550080",
    "end": "1554559"
  },
  {
    "text": "and sisters good job and",
    "start": "1554559",
    "end": "1557679"
  },
  {
    "text": "i'm going to see you in the next one you",
    "start": "1557679",
    "end": "1558960"
  },
  {
    "text": "guys stay awesome goodbye",
    "start": "1558960",
    "end": "1561919"
  }
]