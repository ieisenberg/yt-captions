[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "I want to share a new thing I learned about the windows kernel TCP IP stack",
    "start": "80",
    "end": "5920"
  },
  {
    "text": "very interesting when when certain implementations of whether it's the",
    "start": "5920",
    "end": "11960"
  },
  {
    "text": "kernel or certain application implementation decisions it's always very interesting to see how",
    "start": "11960",
    "end": "18920"
  },
  {
    "text": "different parties you know interpret certain proposal or RFC and implement it",
    "start": "18920",
    "end": "25439"
  },
  {
    "text": "in this particular case uh Windows versus Linux act completely different",
    "start": "25439",
    "end": "31000"
  },
  {
    "start": "30000",
    "end": "180000"
  },
  {
    "text": "like what so what's the story let summarize it and then go into a little bit more detail so so for the to",
    "start": "31000",
    "end": "39200"
  },
  {
    "text": "establish the TCP handshake right to connect to a to a host you specify the",
    "start": "39200",
    "end": "45440"
  },
  {
    "text": "destination IP address right and the destination Port that you want to",
    "start": "45440",
    "end": "52000"
  },
  {
    "text": "connect to on that uh host that this IP addresses basically belongs to so what",
    "start": "52000",
    "end": "59640"
  },
  {
    "text": "first first what we need to do is send that send request to synchronize the",
    "start": "59640",
    "end": "67200"
  },
  {
    "text": "client and the server sequence numbers right so you send the sin and the sin",
    "start": "67200",
    "end": "72759"
  },
  {
    "text": "will go into a segment with the destination Port let's say Port 80 right",
    "start": "72759",
    "end": "80479"
  },
  {
    "text": "this will be encapsulated into the IP packet well technically a segment only",
    "start": "80479",
    "end": "85640"
  },
  {
    "text": "have Port the IP packets will have the destination IP right and then through the internet we'll route all",
    "start": "85640",
    "end": "92720"
  },
  {
    "text": "this IP package we don't deal with ports often when it comes to the internet we just deal with with the IP the raw IP",
    "start": "92720",
    "end": "99439"
  },
  {
    "text": "packets the destination uh IP is important and the source IP is important yeah we use the",
    "start": "99439",
    "end": "105000"
  },
  {
    "text": "port for for certain algorithms to to make the path sticky into one place but",
    "start": "105000",
    "end": "111600"
  },
  {
    "text": "most more more importantly is the IP so we can route right so we can this is the",
    "start": "111600",
    "end": "117119"
  },
  {
    "text": "beauty of the IP protocol where we can eliminate billions of networks and go",
    "start": "117119",
    "end": "124960"
  },
  {
    "text": "exactly to the network that we want to go right this is all the art of the subnet versus the host right uh this is",
    "start": "124960",
    "end": "132040"
  },
  {
    "text": "all that I discussed in my networking course and it's also available in videos that that I put YouTube but so once you",
    "start": "132040",
    "end": "139760"
  },
  {
    "text": "reach that IP packet reaches the host right let's not take the case where the",
    "start": "139760",
    "end": "145879"
  },
  {
    "text": "the host is unreachable at all right so we are routable we reached the IP packet",
    "start": "145879",
    "end": "152400"
  },
  {
    "text": "reached all the way to the host the first thing that will happen the IP packet will go to the neck and then",
    "start": "152400",
    "end": "158840"
  },
  {
    "text": "depends whether you have a smart neck or a normal neck it will basically copy the",
    "start": "158840",
    "end": "164239"
  },
  {
    "text": "content of this packet to the windows or",
    "start": "164239",
    "end": "169920"
  },
  {
    "text": "Linux or Unix or Mac whatever the kernel is memory we copy the data there that",
    "start": "169920",
    "end": "178200"
  },
  {
    "text": "segments copied in the kernel and then there are checks that happen there in the kernel the first thing and",
    "start": "178200",
    "end": "185440"
  },
  {
    "start": "180000",
    "end": "360000"
  },
  {
    "text": "most important thing is is there a corresponding file descriptor or in",
    "start": "185440",
    "end": "192040"
  },
  {
    "text": "Windows an object a one socket an objects right one socket by the way is",
    "start": "192040",
    "end": "198120"
  },
  {
    "text": "the first you know socket programming ever done back in the late '90s when so",
    "start": "198120",
    "end": "203959"
  },
  {
    "text": "that's for Windows right so we check is the destination Port actually no yeah",
    "start": "203959",
    "end": "210560"
  },
  {
    "text": "the IP is there we reached but let wait a minute you're trying to go to Port 80 is there a",
    "start": "210560",
    "end": "217159"
  },
  {
    "text": "listener is there a process or processes cuz yeah one port can be listen on",
    "start": "217159",
    "end": "223120"
  },
  {
    "text": "multiple processes right multiple proc can be listening in one port if you enable the uh socket option Port reuse",
    "start": "223120",
    "end": "231840"
  },
  {
    "text": "but General right so you have that we reach it but guess what there is no",
    "start": "231840",
    "end": "237000"
  },
  {
    "text": "listener what do you do in this case well all of this stuff is defined is",
    "start": "237000",
    "end": "242480"
  },
  {
    "text": "defined thoroughly in the RFC in the in the 1981 tcpr RFC so you get it and then the",
    "start": "242480",
    "end": "251879"
  },
  {
    "text": "kernel right is supposed to reply back so this is the backend kernel not the client",
    "start": "251879",
    "end": "259040"
  },
  {
    "text": "right so there's always the client kernel and there's a backend kernel both are talking in TCP I because the TCP IP",
    "start": "259040",
    "end": "267000"
  },
  {
    "text": "is always implemented at the Kel level we at the application know nothing about it and this might cause problems as",
    "start": "267000",
    "end": "274520"
  },
  {
    "text": "we're going to see in this in this video right so now we have we reached it but",
    "start": "274520",
    "end": "280639"
  },
  {
    "text": "guess what there's no Port 80 so what do we do RFC says you have to send back cuz",
    "start": "280639",
    "end": "286240"
  },
  {
    "text": "you reached got might as well tell acknowledge this sin that you tell that",
    "start": "286240",
    "end": "292520"
  },
  {
    "text": "you that you sent us but we got to have to send back an error",
    "start": "292520",
    "end": "300560"
  },
  {
    "text": "and reset rst you send back a new segment to the client an actual reply if",
    "start": "300560",
    "end": "308360"
  },
  {
    "text": "you will this is a reply this is this is the server telling the client that hey I exist but dude there's nothing here",
    "start": "308360",
    "end": "316479"
  },
  {
    "text": "whatever you're trying to connect to there is nothing so you're sending a reset and this tells the client that oh",
    "start": "316479",
    "end": "323520"
  },
  {
    "text": "okay that means the host is there it's just the port is unavailable for one",
    "start": "323520",
    "end": "329120"
  },
  {
    "text": "reason or another it could be that could be there is no listener it could be that",
    "start": "329120",
    "end": "335120"
  },
  {
    "text": "I'm so overloaded I couldn't accept connections so I sent you a reset or I waited or waited and I sent you a reset",
    "start": "335120",
    "end": "341160"
  },
  {
    "text": "and eh I don't have I don't have enough I don't know maybe the maximum number of file descriptors exceeded and I cannot",
    "start": "341160",
    "end": "348199"
  },
  {
    "text": "connect right sorry so you consider R so this tells the",
    "start": "348199",
    "end": "353680"
  },
  {
    "text": "client this this knowledge that the server was reachable but the the port",
    "start": "353680",
    "end": "359639"
  },
  {
    "text": "you're return to connect is not and here's where things come interesting the kernel client side implementation of TCI",
    "start": "359639",
    "end": "370080"
  },
  {
    "start": "360000",
    "end": "700000"
  },
  {
    "text": "tcpip says in Linux receive the reset what do we do in",
    "start": "370080",
    "end": "376400"
  },
  {
    "text": "Linux we just St the application we just bubble it up as we you know colloquially",
    "start": "376400",
    "end": "383120"
  },
  {
    "text": "say in programming we Bubble Up the error to the higher stack and we say",
    "start": "383120",
    "end": "390440"
  },
  {
    "text": "yo there's the reset and the and it ends there the Colonel's job is done for the",
    "start": "390440",
    "end": "397440"
  },
  {
    "text": "Linux Kel that's it we don't do anything",
    "start": "397440",
    "end": "402639"
  },
  {
    "text": "else and then the application can do whatever it wants with this knowledge and now you might say hin I don't do",
    "start": "403160",
    "end": "410000"
  },
  {
    "text": "anything with resets and all well because we are so used to building on",
    "start": "410000",
    "end": "416160"
  },
  {
    "text": "top of stack on top of stack on top of libraries that are you know hiding all",
    "start": "416160",
    "end": "421240"
  },
  {
    "text": "this stuff from us whether it's good or bad I'll leave it to you but it's just",
    "start": "421240",
    "end": "426560"
  },
  {
    "text": "because we're we're just being uh you know cuddled by these libraries we have",
    "start": "426560",
    "end": "432520"
  },
  {
    "text": "no idea what's going on we've been led by by the hand all the time",
    "start": "432520",
    "end": "438560"
  },
  {
    "text": "but essentially the application can decide whether to retry the connection or not but here's what the wind what the",
    "start": "438560",
    "end": "446319"
  },
  {
    "text": "windows do what the windows kernel does this is since 1995 this is in Windows",
    "start": "446319",
    "end": "453000"
  },
  {
    "text": "995 right specifically what it does that because",
    "start": "453000",
    "end": "458039"
  },
  {
    "text": "of what I said well servers can get overloaded the host Port could be you",
    "start": "458039",
    "end": "465159"
  },
  {
    "text": "know down for a moment the service has been restarted especially back",
    "start": "465159",
    "end": "470400"
  },
  {
    "text": "then there was no like concept of you know uh you know zero downtown or",
    "start": "470400",
    "end": "477840"
  },
  {
    "text": "anything like oh just oh not working just restart the machines planned outage whatever it's",
    "start": "477840",
    "end": "484479"
  },
  {
    "text": "fine yeah schedule maintenance you know that's fine so you restart it and then",
    "start": "484479",
    "end": "490080"
  },
  {
    "text": "uh it will come back eventually so what Windows did and you can you can disagree or",
    "start": "490080",
    "end": "496039"
  },
  {
    "text": "agree with this they put a retry where in the kernel the kernel",
    "start": "496039",
    "end": "503840"
  },
  {
    "text": "when it received the reset it it is being told that the host does exist but",
    "start": "503840",
    "end": "510440"
  },
  {
    "text": "the port that we're trying to connect is not available now whoever design designed the RFC for",
    "start": "510440",
    "end": "518320"
  },
  {
    "text": "TCP didn't add like more error codes like oh reset like reset one that means",
    "start": "518320",
    "end": "526200"
  },
  {
    "text": "is this reset two is this I really don't know if there's a multiple reset versions but or reset three is this",
    "start": "526200",
    "end": "533640"
  },
  {
    "text": "reset one is overloaded reset two is this port is not available at all reset",
    "start": "533640",
    "end": "538800"
  },
  {
    "text": "three that oh it's temporarily not available it's like this will become like an HTTP server code at this point",
    "start": "538800",
    "end": "545760"
  },
  {
    "text": "but you know there is it's just a one error message reset so so what happened",
    "start": "545760",
    "end": "552240"
  },
  {
    "text": "to the kernel the windows will actually will retro it all right wait a minute let's just wait for a little bit more",
    "start": "552240",
    "end": "559320"
  },
  {
    "text": "and so we will wait for two seconds exactly two seconds and this is configurable with the rid key and then",
    "start": "559320",
    "end": "567079"
  },
  {
    "text": "it will retry the S right it will send the S back a new",
    "start": "567079",
    "end": "573560"
  },
  {
    "text": "sin a new s a new segment cuz maybe it will now it's",
    "start": "573560",
    "end": "579079"
  },
  {
    "text": "available and of course if it's not available it will try again if it's not available try again for maximum of three",
    "start": "579079",
    "end": "585880"
  },
  {
    "text": "times and both the three and the two seconds are configurable in a rich case so this is this is what's Happening Here",
    "start": "585880",
    "end": "592640"
  },
  {
    "text": "you might say who cares why would I ever connect to a port if I if I connect to a",
    "start": "592640",
    "end": "598399"
  },
  {
    "text": "port that is not available even you you can do it on Windows right now if you have Windows machine just go connect to",
    "start": "598399",
    "end": "604279"
  },
  {
    "text": "do a craw or tet to a port to a host",
    "start": "604279",
    "end": "609720"
  },
  {
    "text": "that you know it exists I don't know microsoft.com and put a port I 9999",
    "start": "609720",
    "end": "615959"
  },
  {
    "text": "hopefully that doesn't exist you will see that the the the response comes back in two in two",
    "start": "615959",
    "end": "622920"
  },
  {
    "text": "seconds in Linux it comes back immediately right and the only cost is",
    "start": "622920",
    "end": "627959"
  },
  {
    "text": "the cost of the uh basically round trip right to go back and V right so try on",
    "start": "627959",
    "end": "634320"
  },
  {
    "text": "Local Host and this is what I want to discuss so let's jump into this uh",
    "start": "634320",
    "end": "639639"
  },
  {
    "text": "Daniel stumberg this is where I learned all of this stuff from this guy you know",
    "start": "639639",
    "end": "645200"
  },
  {
    "text": "uh you know to to me I I called the Daniel stumberg who's the creator of curl he's the ultimate you know uh Guru",
    "start": "645200",
    "end": "653920"
  },
  {
    "text": "when it comes to frontend engineering as I understand frontend engineering they built like like the ultimate front end",
    "start": "653920",
    "end": "660920"
  },
  {
    "text": "machine he understand everything El goes to the front end when it comes to",
    "start": "660920",
    "end": "667160"
  },
  {
    "text": "command line at least right so cuz curl is a front-end application right it it's",
    "start": "667160",
    "end": "672440"
  },
  {
    "text": "a client application right I know we refer to front end usually as web applications but I kind of distill it",
    "start": "672440",
    "end": "679320"
  },
  {
    "text": "back to this its basic beautiful fundamental level which is this this",
    "start": "679320",
    "end": "685560"
  },
  {
    "text": "this this this TCP stack right and in the future when Implement quick it will",
    "start": "685560",
    "end": "690639"
  },
  {
    "text": "be udb /qu NH htb3 but yeah let's jump into this article read a little bit and",
    "start": "690639",
    "end": "697600"
  },
  {
    "text": "uh discuss all right so this comes from Daniel St",
    "start": "697600",
    "end": "702839"
  },
  {
    "start": "700000",
    "end": "900000"
  },
  {
    "text": "Stenberg right and I'm not going to read the whole article because I'm going to refence it to use because we we have to give you know credit uh uh to the author",
    "start": "702839",
    "end": "712240"
  },
  {
    "text": "of this you know this always follow you know Daniel we learn I always learn new",
    "start": "712240",
    "end": "717920"
  },
  {
    "text": "things that I will never ever dream of learning by myself from this guy so",
    "start": "717920",
    "end": "724519"
  },
  {
    "text": "title slow TCP connect on Windows now that I summarized all of that mumbo",
    "start": "724519",
    "end": "731839"
  },
  {
    "text": "jumbo about the difference in kernel right uh of the windows kernel versus",
    "start": "731839",
    "end": "738079"
  },
  {
    "text": "the Linux kernel this is what's the difference now see this is where really",
    "start": "738079",
    "end": "744240"
  },
  {
    "text": "matters right cuz yeah you connect to a port that doesn't exist you just quit you just do control C and then you move",
    "start": "744240",
    "end": "751399"
  },
  {
    "text": "on with your life or just refresh but what if there is a special",
    "start": "751399",
    "end": "758880"
  },
  {
    "text": "another RFC that also does retries this is where it gets very",
    "start": "758880",
    "end": "765480"
  },
  {
    "text": "dicey let's let's do it let's get into it let's jump into this so I have this",
    "start": "765480",
    "end": "774120"
  },
  {
    "text": "tradition of mentioning occasional Network related quirks on Windows on my blog",
    "start": "774120",
    "end": "779760"
  },
  {
    "text": "so here we go again this round started with a bug report that said curl is slow",
    "start": "779760",
    "end": "788519"
  },
  {
    "text": "to connect to Local Host on windows so very beautiful title this is",
    "start": "788519",
    "end": "796360"
  },
  {
    "text": "a very I would give this bug Title Nine out of 10 I love it cuz it has it has",
    "start": "796360",
    "end": "804920"
  },
  {
    "text": "exactly describe what is the behavior curl you know I should I should start a",
    "start": "804920",
    "end": "810399"
  },
  {
    "text": "show where I rate bugs no uh it has the behavior connect it has",
    "start": "810399",
    "end": "817240"
  },
  {
    "text": "the platform Windows it has the destination Local Host and it has the application curl curl is slow to connect",
    "start": "817240",
    "end": "824720"
  },
  {
    "text": "to Local Host on Windows 9 out of",
    "start": "824720",
    "end": "830000"
  },
  {
    "text": "10 uh it is also demonstrably",
    "start": "830440",
    "end": "835720"
  },
  {
    "text": "demonstrably demon I cannot pronounce that word it is also",
    "start": "836160",
    "end": "841680"
  },
  {
    "text": "demonstrably I think you made up this word uh Daniel sorry this is not a word",
    "start": "841680",
    "end": "847360"
  },
  {
    "text": "demonstrably true demon okay this is also demonstrably disturbingly true I'm",
    "start": "847360",
    "end": "854160"
  },
  {
    "text": "going to change the word the person runs a web server I have dyslexia the person",
    "start": "854160",
    "end": "860639"
  },
  {
    "text": "runs a web server a web service on a local ipv4 port and nothing on ipv six Port",
    "start": "860639",
    "end": "871160"
  },
  {
    "text": "right of course uh Daniel always assumed everybody knows what he's talking about which is not always the case cuz I",
    "start": "871160",
    "end": "878160"
  },
  {
    "text": "always didn't understand what he was writing maybe like five years ago until",
    "start": "878160",
    "end": "883519"
  },
  {
    "text": "I G I gain a little bit of a knowledge right cuz he's he's way there you know",
    "start": "883519",
    "end": "889720"
  },
  {
    "text": "when it comes to this so he doesn't explain fundamentals and Basics so let me let me talk about this a little bit",
    "start": "889720",
    "end": "895399"
  },
  {
    "text": "so Local Host is a host name is a DNS inter you can think of it this way right",
    "start": "895399",
    "end": "901120"
  },
  {
    "start": "900000",
    "end": "1200000"
  },
  {
    "text": "and you it's useless the word the string Local Host is absolutely useless for TCB",
    "start": "901120",
    "end": "906680"
  },
  {
    "text": "it doesn't mean anything you know so you need to convert it to an IP for it to",
    "start": "906680",
    "end": "911920"
  },
  {
    "text": "work on TCP you cannot just although you technically using Cur you type HTTP",
    "start": "911920",
    "end": "918639"
  },
  {
    "text": "colon colon Local Host this down the drain down the stack gets translated to",
    "start": "918639",
    "end": "926000"
  },
  {
    "text": "an IP address right the trick here is we have two protocols we have ipv4 and we",
    "start": "926000",
    "end": "933959"
  },
  {
    "text": "have IPv6 so this n right so the problem here is which one to connect",
    "start": "933959",
    "end": "940680"
  },
  {
    "text": "to ipv4 IPv6 hin wait a minute Local Host I know that it's",
    "start": "940680",
    "end": "948639"
  },
  {
    "text": "12701 and that's the ipv4 what is the IPv6 well it's colon colon one right and",
    "start": "948639",
    "end": "956639"
  },
  {
    "text": "that is basically the loop back IPv6 version and if you have IPv6 enabled",
    "start": "956639",
    "end": "962120"
  },
  {
    "text": "which I think it's always enabled at this point in 2024 you get",
    "start": "962120",
    "end": "967319"
  },
  {
    "text": "both so Local Host if you do a DNS lookup it will resolve to two it will",
    "start": "967319",
    "end": "973399"
  },
  {
    "text": "resolve to I to colon colon one and and and 12701 which one do you want to connect",
    "start": "973399",
    "end": "981040"
  },
  {
    "text": "to which one and this is where things started to get interesting the moment you get a",
    "start": "981040",
    "end": "987600"
  },
  {
    "text": "choice the moment you get and this not only apply to Local Host applies to normal DNS queries if you do",
    "start": "987600",
    "end": "993720"
  },
  {
    "text": "a DNS query to microsoft.com I keep I'm hang up on Microsoft for some reason now because of",
    "start": "993720",
    "end": "999560"
  },
  {
    "text": "Windows if you go to any site now twitter.com x.com it gives you you have",
    "start": "999560",
    "end": "1005560"
  },
  {
    "text": "to do a DNS right to get back IPS you get a list of crap you know you get a",
    "start": "1005560",
    "end": "1010600"
  },
  {
    "text": "record a a a record is the ipv4 you get a a AA which is the IPv6 IP address and",
    "start": "1010600",
    "end": "1018600"
  },
  {
    "text": "you might get like three or four of those you might get a text record which is for forgot what was that txt and you",
    "start": "1018600",
    "end": "1026360"
  },
  {
    "text": "get MX which is for them email and you get so much stuff like a alternative",
    "start": "1026360",
    "end": "1032678"
  },
  {
    "text": "service for HTTP 3 if that's supported right and you have of course",
    "start": "1032679",
    "end": "1038319"
  },
  {
    "text": "do DNS over https on on your U configure right so do",
    "start": "1038319",
    "end": "1045880"
  },
  {
    "text": "you have to I'm not sure actually but yeah so what when you get that you get a",
    "start": "1045880",
    "end": "1051080"
  },
  {
    "text": "choices you get you get a bouquet of IP addresses which one do you connect to",
    "start": "1051080",
    "end": "1056120"
  },
  {
    "text": "and here is where there is a beautiful RFC called happy eyeballs a weird ass",
    "start": "1056120",
    "end": "1062760"
  },
  {
    "text": "name happy eyeballs I'm pretty sure this just means something in like colloquial",
    "start": "1062760",
    "end": "1068160"
  },
  {
    "text": "English language that I don't know about but happy eyeballs essentially means as a as a foreigner",
    "start": "1068160",
    "end": "1075400"
  },
  {
    "text": "who doesn't speak as not my my first language it doesn't mean anything happy eyeballs like someone is happy to look",
    "start": "1075400",
    "end": "1081280"
  },
  {
    "text": "at this I don't know but what what it means is you pick the IPv6 first before ipv4",
    "start": "1081280",
    "end": "1091400"
  },
  {
    "text": "you favor IPv6 for first now what algorithm to choose there is two",
    "start": "1091400",
    "end": "1096720"
  },
  {
    "text": "versions of this RFC the hyp eyeball there is a the old version where you",
    "start": "1096720",
    "end": "1101799"
  },
  {
    "text": "retry IPv6 and you retry again and you retry again and then if it failed you",
    "start": "1101799",
    "end": "1108799"
  },
  {
    "text": "you try the ipv4 right so that's in itself forget about the kernel bug for a",
    "start": "1108799",
    "end": "1114280"
  },
  {
    "text": "minute now for the window not bug the behavior for Windows forget about it for",
    "start": "1114280",
    "end": "1119880"
  },
  {
    "text": "a second happy iBall tells you to try the IPv6 if it fails go to the ipv4 and",
    "start": "1119880",
    "end": "1126280"
  },
  {
    "text": "the new version uh which is which is which Co doesn't Implement by the way H",
    "start": "1126280",
    "end": "1131840"
  },
  {
    "text": "it tells you to establish both concurrently two connections which is of course resource intensive right connect",
    "start": "1131840",
    "end": "1137880"
  },
  {
    "text": "to IPv6 if it fails connect back to uh ipv4 no no connect to both IPv6 and IP",
    "start": "1137880",
    "end": "1145440"
  },
  {
    "text": "V4 right connect to both of them at the same time send two sends",
    "start": "1145440",
    "end": "1150679"
  },
  {
    "text": "right and then wait for wherever it comes right so if you get a reset on the",
    "start": "1150679",
    "end": "1156320"
  },
  {
    "text": "IPv6 just ignore it and continue with the ipv4 right and then uh uh continue",
    "start": "1156320",
    "end": "1162919"
  },
  {
    "text": "with IP if you get if you if you both succeeded which sometimes are well uh",
    "start": "1162919",
    "end": "1168159"
  },
  {
    "text": "you have to close close the ipv4 and continue the IPv6 connection because we want the IPv6 the new and shiny things",
    "start": "1168159",
    "end": "1175559"
  },
  {
    "text": "and it's optimized and the headers are are are efficient and it's a it has like",
    "start": "1175559",
    "end": "1181440"
  },
  {
    "text": "U billions and billions and billions unlimited you know IP addresses what",
    "start": "1181440",
    "end": "1186960"
  },
  {
    "text": "else has a lot of benefits you know I can't remember all of them right now so we understand now now we go back with",
    "start": "1186960",
    "end": "1192039"
  },
  {
    "text": "that knowledge go let's go back to the article and all right it is also demonstrability disturb",
    "start": "1192039",
    "end": "1199640"
  },
  {
    "text": "true the person runs a web servers on a local ipv4 and nothing on IPv6 now if in",
    "start": "1199640",
    "end": "1205520"
  },
  {
    "start": "1200000",
    "end": "1680000"
  },
  {
    "text": "the case that you're listening on Local Host you just decided to ask node listen",
    "start": "1205520",
    "end": "1210640"
  },
  {
    "text": "on if you ask node you cannot ask node to listen can you ask node listen on",
    "start": "1210640",
    "end": "1216520"
  },
  {
    "text": "Local Host if that's the case I think node will listen on both IPv6 and ipv4",
    "start": "1216520",
    "end": "1222799"
  },
  {
    "text": "right in that particular case if it takes a string I can't remember if you can give no Js or bun or whatever higher",
    "start": "1222799",
    "end": "1230799"
  },
  {
    "text": "level Library a string eventually bun or node or PHP or",
    "start": "1230799",
    "end": "1236280"
  },
  {
    "text": "wherever the framework needs to understand what that means and also",
    "start": "1236280",
    "end": "1241320"
  },
  {
    "text": "listen on on on an IP because it doesn't make a sense to listen on a on a string",
    "start": "1241320",
    "end": "1246919"
  },
  {
    "text": "right so so so so if you do if you did",
    "start": "1246919",
    "end": "1252159"
  },
  {
    "text": "listen only on ipv4 1271 what will happen is basically your",
    "start": "1252159",
    "end": "1258640"
  },
  {
    "text": "listening specifically on an ipv4 right there's nothing on IPv6 so if you try to",
    "start": "1258640",
    "end": "1265240"
  },
  {
    "text": "connect to col and colon one nothing will happen on Port 80 although you are listening on Port 80 or 8080 on ipv4",
    "start": "1265240",
    "end": "1273559"
  },
  {
    "text": "right so that's the situation you have and if that happen it takes over 200",
    "start": "1273559",
    "end": "1279320"
  },
  {
    "text": "milliseconds to connect to it right you would expect it to take no less than a",
    "start": "1279320",
    "end": "1284919"
  },
  {
    "text": "number of micros seconds as it does know as it does on just about all other",
    "start": "1284919",
    "end": "1292440"
  },
  {
    "text": "systems right so he's saying it takes about 200 milliseconds cuz that that's",
    "start": "1292440",
    "end": "1297600"
  },
  {
    "text": "the that's what's happening here right so that's the command he's showing the command Here Local Host",
    "start": "1297600",
    "end": "1303159"
  },
  {
    "text": "4567 now we're connecting buckle up this is getting worse but first let's take a look at",
    "start": "1303159",
    "end": "1309760"
  },
  {
    "text": "this exam uh exact use case and what happened right this is all I now",
    "start": "1309760",
    "end": "1315799"
  },
  {
    "text": "explained this is the all the happy eyeball things you know on all systems except for Windows where the IPv6 TCP",
    "start": "1315799",
    "end": "1324440"
  },
  {
    "text": "connect at attemp sends a send to the TCP Port where nothing is listening",
    "start": "1324440",
    "end": "1331320"
  },
  {
    "text": "right cuz we're we're talking to the IPv6 we're sending a TCP s it gets a reset back immediately right cuz yeah",
    "start": "1331320",
    "end": "1339840"
  },
  {
    "text": "IPv6 the IPv6 call and call one in this particular case does exist but there is",
    "start": "1339840",
    "end": "1345679"
  },
  {
    "text": "no Port so we send you a reset in all systems except windows we get back what",
    "start": "1345679",
    "end": "1352279"
  },
  {
    "text": "connection refuse we get a RIS reset and then you get a connection refuse so what",
    "start": "1352279",
    "end": "1357640"
  },
  {
    "text": "do we do we switch back immediately to attempt to IP V4 so this whole thing",
    "start": "1357640",
    "end": "1363480"
  },
  {
    "text": "happens in few milliseconds you know in all systems except Windows",
    "start": "1363480",
    "end": "1369400"
  },
  {
    "text": "switches over to ipv4 and this whole thing happens on in few milliseconds all right the failed IPv6",
    "start": "1369400",
    "end": "1378600"
  },
  {
    "text": "attempt is not Noble to a user and here are some diagrams showing what it was",
    "start": "1378600",
    "end": "1384919"
  },
  {
    "text": "going to have normal handshake right this is where a refuse TCP look like you",
    "start": "1384919",
    "end": "1391279"
  },
  {
    "text": "send this in you get back a reset talked about that now connection on Windows",
    "start": "1391279",
    "end": "1397760"
  },
  {
    "text": "what happened on Windows right on Windows you going to I'm going to",
    "start": "1397760",
    "end": "1404919"
  },
  {
    "text": "immediately go to the diagram on Windows we explain what happened we connect to IPv6 guess what that's because the happy",
    "start": "1404919",
    "end": "1412520"
  },
  {
    "text": "iul tells us you have to connect to IPv6 you send the in what do you get",
    "start": "1412520",
    "end": "1418000"
  },
  {
    "text": "immediately the kernel the server or the backend server",
    "start": "1418000",
    "end": "1424760"
  },
  {
    "text": "uh uh kernel sends back a reset in this",
    "start": "1424760",
    "end": "1429919"
  },
  {
    "text": "case it's the Local Host it's the same kernel right we send the reset but guess",
    "start": "1429919",
    "end": "1435000"
  },
  {
    "text": "what windows will say wait a minute we get a reset is IPv6",
    "start": "1435000",
    "end": "1441440"
  },
  {
    "text": "I'm just going to delay for two seconds just because I feel like it that's deep into the kernel the application have no",
    "start": "1441440",
    "end": "1448279"
  },
  {
    "text": "idea curl as an application have no idea browser as an application have no idea",
    "start": "1448279",
    "end": "1454520"
  },
  {
    "text": "that Windows is doing these three tries it's a it's a it's it's like you're calling a function and the function has",
    "start": "1454520",
    "end": "1459760"
  },
  {
    "text": "a loop right and it's doing all this stuff",
    "start": "1459760",
    "end": "1465440"
  },
  {
    "text": "right so it will try again and then again again and again until it",
    "start": "1465440",
    "end": "1471600"
  },
  {
    "text": "responds back after a few seconds it depends on the delay those stuff two to",
    "start": "1471600",
    "end": "1478120"
  },
  {
    "text": "three to four seconds and then now only now curl got",
    "start": "1478120",
    "end": "1485039"
  },
  {
    "text": "the fact the knowledge that IPv6 is not reachable only now after 3",
    "start": "1485039",
    "end": "1493279"
  },
  {
    "text": "seconds it knows that IPv6 is not reachable so it kicks the happy uh",
    "start": "1493279",
    "end": "1499480"
  },
  {
    "text": "eyeball algorithm to switch back to ipv4 which then connects immediately which works so in this case if you only listen",
    "start": "1499480",
    "end": "1508120"
  },
  {
    "text": "on ipv4 but your client is using Local Host",
    "start": "1508120",
    "end": "1513600"
  },
  {
    "text": "in this particular case to connect you're going to hit that slowdown every time which really sucks right I don't",
    "start": "1513600",
    "end": "1522000"
  },
  {
    "text": "know if there's caches and probably curl will cash or the applic and this there's not really curl any any app right if you",
    "start": "1522000",
    "end": "1530520"
  },
  {
    "text": "have I don't know think about an app like uh what browser no GS you're",
    "start": "1530520",
    "end": "1536360"
  },
  {
    "text": "listening on on on I 2271 Port 8888 right and then but in the",
    "start": "1536360",
    "end": "1543679"
  },
  {
    "text": "browser you would type Local Host colon colon 18 in this particular case what will happen is Happy eyeball will kick",
    "start": "1543679",
    "end": "1551559"
  },
  {
    "text": "in the same thing we'll try our pv6 if you're using Windows you're going to see it and I I see it all the time I never I",
    "start": "1551559",
    "end": "1559279"
  },
  {
    "text": "got it to explain until now every time Local Host will be slow in this",
    "start": "1559279",
    "end": "1564799"
  },
  {
    "text": "particular case if I'm listening to a to a ipv V4 I was like always not able to",
    "start": "1564799",
    "end": "1571399"
  },
  {
    "text": "explain this but now it's perfectly clear that this is what happening Windows is",
    "start": "1571399",
    "end": "1578399"
  },
  {
    "text": "retrying and the app has no knowledge about it so now get back all the way",
    "start": "1578399",
    "end": "1583600"
  },
  {
    "text": "this get result and then what do we do eventually we switch back to",
    "start": "1583600",
    "end": "1588840"
  },
  {
    "text": "um ipv uh 4 and then everything connects and everything is happy so you'll feel",
    "start": "1588840",
    "end": "1595679"
  },
  {
    "text": "it sometimes and of course the browser is smart enough to cat that okay yeah last time we check connect to ipv didn't",
    "start": "1595679",
    "end": "1601679"
  },
  {
    "text": "work so I'm going to cach the fact that it's the service is not available so I",
    "start": "1601679",
    "end": "1606840"
  },
  {
    "text": "don't have to retry it so so things like that the browser definitely have done that that's why I explain when I can",
    "start": "1606840",
    "end": "1613679"
  },
  {
    "text": "refresh the page it's faster right the first time I visit is like Tex 2 seconds",
    "start": "1613679",
    "end": "1618799"
  },
  {
    "text": "at least in Windows right Linux doesn't have this problem right only Windows",
    "start": "1618799",
    "end": "1624559"
  },
  {
    "text": "Linux uh let's be careful here if you",
    "start": "1624559",
    "end": "1630600"
  },
  {
    "text": "have uh if you have a Linux server and a Windows client you're still going to see",
    "start": "1630600",
    "end": "1635720"
  },
  {
    "text": "this problem right it's the problem with a client code not server code make sense",
    "start": "1635720",
    "end": "1642799"
  },
  {
    "text": "right uh you you will not see this problem if you have a a Linux",
    "start": "1642799",
    "end": "1648919"
  },
  {
    "text": "client you will see this problem if you have a Windows Client app okay isn't this stuff just",
    "start": "1648919",
    "end": "1658240"
  },
  {
    "text": "amazing you guys I just love this",
    "start": "1658240",
    "end": "1663640"
  },
  {
    "text": "stuff really really stu okay so um so yeah let's go to the other article that",
    "start": "1665240",
    "end": "1672080"
  },
  {
    "text": "uh then I'm going to all this stuff by the way in the if you're listening on the podcast on Spotify or Apple or all",
    "start": "1672080",
    "end": "1678799"
  },
  {
    "text": "that stuff you're going to find in the show notes if you're on YouTube you're going to find it in the",
    "start": "1678799",
    "end": "1685360"
  },
  {
    "start": "1680000",
    "end": "1860000"
  },
  {
    "text": "description below this it so here's here's the rich key if anyone",
    "start": "1685360",
    "end": "1693279"
  },
  {
    "text": "is interested but use it with a use it with a grain of salt okay this",
    "start": "1693279",
    "end": "1701600"
  },
  {
    "text": "Rich key you can change this maximum connect transmission and the other",
    "start": "1701600",
    "end": "1706640"
  },
  {
    "text": "parameter what is it called the max connect rro you can change those if you want right it's in the Local Host system",
    "start": "1706640",
    "end": "1713559"
  },
  {
    "text": "current control set Services TCP I parameters so you can change this but",
    "start": "1713559",
    "end": "1718600"
  },
  {
    "text": "guess what this is a global change and if you change it all apps",
    "start": "1718600",
    "end": "1725880"
  },
  {
    "text": "will will greed that value and it will respect it I mean not all apps the kernel there's one kernel running on",
    "start": "1725880",
    "end": "1733159"
  },
  {
    "text": "your machine right so that's that basically will behave as that right",
    "start": "1733159",
    "end": "1740039"
  },
  {
    "text": "right what happen if you have containers though because containers Shar the",
    "start": "1740519",
    "end": "1747960"
  },
  {
    "text": "kernel if if you have wait if you have like Linux containers then you're using",
    "start": "1747960",
    "end": "1753880"
  },
  {
    "text": "the Linux kernel if you're using Windows kernel containers then all your",
    "start": "1753880",
    "end": "1760000"
  },
  {
    "text": "containers will inherit this property as well I think I never tested that but but",
    "start": "1760000",
    "end": "1766640"
  },
  {
    "text": "I think that's what's going to happen so it's that that's just something regardless watch out for changing this because all your apps will just all of a",
    "start": "1766640",
    "end": "1774720"
  },
  {
    "text": "sudden sometimes you you you'll see something breaking because this has been there since the",
    "start": "1774720",
    "end": "1781039"
  },
  {
    "text": "'90s you guys right very long time ago right very very",
    "start": "1781039",
    "end": "1789840"
  },
  {
    "text": "long time ago so apps have been built relying on this retri",
    "start": "1789840",
    "end": "1798720"
  },
  {
    "text": "in place to function on Windows right so so so changing this",
    "start": "1798720",
    "end": "1806120"
  },
  {
    "text": "might break other apps because some apps will just oh imagine just not retrying if you",
    "start": "1806120",
    "end": "1812600"
  },
  {
    "text": "don't retry the and the app is not designed to retry because it was it it",
    "start": "1812600",
    "end": "1817880"
  },
  {
    "text": "had the luxury that the colonel is always retrying for it and you can argue",
    "start": "1817880",
    "end": "1823080"
  },
  {
    "text": "this is lazy and uh I'm not going to hold it against you to be honest",
    "start": "1823080",
    "end": "1828600"
  },
  {
    "text": "but lazy programming but yeah if if you don't retry in the app and your konel is",
    "start": "1828600",
    "end": "1835360"
  },
  {
    "text": "retrying for you your app just works so if you change that parameter and change",
    "start": "1835360",
    "end": "1841919"
  },
  {
    "text": "to zero retri for example and the app try to connect and for some reason",
    "start": "1841919",
    "end": "1847440"
  },
  {
    "text": "there is a glitch you uh there is the port is not available and receive that",
    "start": "1847440",
    "end": "1854399"
  },
  {
    "text": "it will just won't know what to do with this it will freak out and it will just maybe crash right or just don't do",
    "start": "1854399",
    "end": "1862000"
  },
  {
    "start": "1860000",
    "end": "2150000"
  },
  {
    "text": "anything the other thing I want I I want to end this before I end this video is u",
    "start": "1862000",
    "end": "1868240"
  },
  {
    "text": "a little dark here but yeah it's a little bit dark here sorry I'm going to work on my lighting so the other thing",
    "start": "1868240",
    "end": "1875600"
  },
  {
    "text": "is a differentiate between Port unreachable versus address unreachable right if you send a sin to an IP address",
    "start": "1875600",
    "end": "1885880"
  },
  {
    "text": "and that IP address is not routable then there is no one to reply to you to tell",
    "start": "1885880",
    "end": "1891080"
  },
  {
    "text": "you that the address is not routable right cuz",
    "start": "1891080",
    "end": "1897399"
  },
  {
    "text": "well you will eventually either time out",
    "start": "1897399",
    "end": "1902519"
  },
  {
    "text": "or you might get an icmp message and I talk about I talk about that in my my",
    "start": "1902519",
    "end": "1908840"
  },
  {
    "text": "network course check it out if you're interested this is the internet control uh",
    "start": "1908840",
    "end": "1914200"
  },
  {
    "text": "protocol um information messages they get the router because IP packets every",
    "start": "1914200",
    "end": "1921799"
  },
  {
    "text": "I every hop the IP packet goes through every router H we decrement the TTL in",
    "start": "1921799",
    "end": "1929120"
  },
  {
    "text": "the IP packet says okay we start with I don't know value 128 right and then every",
    "start": "1929120",
    "end": "1934760"
  },
  {
    "text": "router 127 and this is how basically uh trace route works if",
    "start": "1934760",
    "end": "1941360"
  },
  {
    "text": "you if you think about it right we until the router that decr it to zero",
    "start": "1941360",
    "end": "1949679"
  },
  {
    "text": "will basically drop the packet and if icmp is enabl it will send back",
    "start": "1949679",
    "end": "1955679"
  },
  {
    "text": "something say boo go icmp host not available it will",
    "start": "1955679",
    "end": "1961159"
  },
  {
    "text": "send it back now whether this reaches this packet reaches back or not that's a",
    "start": "1961159",
    "end": "1966360"
  },
  {
    "text": "different different story alog together so if you did get that then you understand that the host actually not",
    "start": "1966360",
    "end": "1972519"
  },
  {
    "text": "reachable if you timed out waiting that's different than",
    "start": "1972519",
    "end": "1978399"
  },
  {
    "text": "not responding at all I mean that if you timed are waiting for a response waiting",
    "start": "1978399",
    "end": "1984080"
  },
  {
    "text": "even for a reset that is different than actually receiving a reset a reset means that the host is reachable because hey",
    "start": "1984080",
    "end": "1992080"
  },
  {
    "text": "it replied to us with a reset it's like this is like U this is another argument",
    "start": "1992080",
    "end": "1998159"
  },
  {
    "text": "uh I get with people that a 404 error to me is also a response right because the",
    "start": "1998159",
    "end": "2004399"
  },
  {
    "text": "server is reachable it just returned back an error for you right so to me as a",
    "start": "2004399",
    "end": "2011559"
  },
  {
    "text": "back and 404 is not an error you know like well you can argue again this is",
    "start": "2011559",
    "end": "2018000"
  },
  {
    "text": "all semantics right for the Ping is actually explicitly got a message looked",
    "start": "2018000",
    "end": "2023240"
  },
  {
    "text": "up a file couldn't find it and replied back to you with a beautiful response",
    "start": "2023240",
    "end": "2029519"
  },
  {
    "text": "HTTP message nothing wrong with it it has a TCP segment there is a",
    "start": "2029519",
    "end": "2036279"
  },
  {
    "text": "body there is a body yeah there's a body there's headers in the 404 message and",
    "start": "2036279",
    "end": "2041440"
  },
  {
    "text": "then just and now the client treats it as an error that's a different thing right but to me is just a message that's",
    "start": "2041440",
    "end": "2048079"
  },
  {
    "text": "also another argument right whether fetch I think versus AIO I think axus",
    "start": "2048079",
    "end": "2053560"
  },
  {
    "text": "trated as an error and Rise as an exception versus you know this is very uh very controversial people get very",
    "start": "2053560",
    "end": "2060520"
  },
  {
    "text": "boiled up with this topics for some reason yeah I don't really mind but but",
    "start": "2060520",
    "end": "2065599"
  },
  {
    "text": "yeah a fch treats it as a me as a response it's not an error it will just read it as a response",
    "start": "2065599",
    "end": "2072040"
  },
  {
    "text": "and we'll send you a nice response hey the server responded what would it respond",
    "start": "2072040",
    "end": "2078040"
  },
  {
    "text": "404 yeah so so what this is the same thing right reset actually send you a response back it's just hey the server",
    "start": "2078040",
    "end": "2086440"
  },
  {
    "text": "was reachable it's just uh hey there's nothing there the the portter actually",
    "start": "2086440",
    "end": "2091878"
  },
  {
    "text": "to connector us not there all right guys that was like a little bit of long video but I thought I'll talk about that",
    "start": "2091879",
    "end": "2097079"
  },
  {
    "text": "because I love this stuff I love learning uh new things and I I don't love learning in a",
    "start": "2097079",
    "end": "2104000"
  },
  {
    "text": "in a sense that I seek learning the learning comes in to me right and and",
    "start": "2104000",
    "end": "2112320"
  },
  {
    "text": "just naturally you know when it comes you grab it you know it's everywhere",
    "start": "2112320",
    "end": "2117480"
  },
  {
    "text": "learning opportunities are everywhere flying like this you know it's everywhere you just need to grab it no",
    "start": "2117480",
    "end": "2125560"
  },
  {
    "text": "if you don't not in the moon to grab it that's fine also don't don't uh don't",
    "start": "2125560",
    "end": "2130839"
  },
  {
    "text": "beat yourself up it's okay it's okay not to always be in the mood to learn and",
    "start": "2130839",
    "end": "2137640"
  },
  {
    "text": "and prove that's fine just relax be now here in the moment and live just live",
    "start": "2137640",
    "end": "2146880"
  },
  {
    "text": "all right guys see you in the next one",
    "start": "2146880",
    "end": "2151680"
  }
]