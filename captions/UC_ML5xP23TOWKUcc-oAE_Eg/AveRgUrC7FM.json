[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "what is going on guys today I'm gonna",
    "start": "0",
    "end": "1920"
  },
  {
    "text": "talk about Oscar's system columns and I",
    "start": "1920",
    "end": "5580"
  },
  {
    "text": "thought I'll do it in a practical way",
    "start": "5580",
    "end": "7020"
  },
  {
    "text": "instead of just Theory and we'll explain",
    "start": "7020",
    "end": "9540"
  },
  {
    "text": "the theory as we go how about we do that",
    "start": "9540",
    "end": "12000"
  },
  {
    "text": "I have two sessions here on my Raspberry",
    "start": "12000",
    "end": "14700"
  },
  {
    "text": "Pi and I have a database aposcus 11 a",
    "start": "14700",
    "end": "18660"
  },
  {
    "text": "little old but it does the job on my pie",
    "start": "18660",
    "end": "22080"
  },
  {
    "text": "here what I'm gonna do here I'm logged",
    "start": "22080",
    "end": "24240"
  },
  {
    "text": "in as a user Pi here on this session and",
    "start": "24240",
    "end": "26820"
  },
  {
    "text": "there's another session",
    "start": "26820",
    "end": "28260"
  },
  {
    "text": "and the reason I'm doing this because",
    "start": "28260",
    "end": "29699"
  },
  {
    "text": "we're going to execute multiple",
    "start": "29699",
    "end": "30900"
  },
  {
    "text": "transactions in each concurrently in",
    "start": "30900",
    "end": "34440"
  },
  {
    "text": "each session and this will kind of show",
    "start": "34440",
    "end": "37559"
  },
  {
    "text": "us different isolation levels and stuff",
    "start": "37559",
    "end": "39840"
  },
  {
    "text": "like that so let's go ahead and create a",
    "start": "39840",
    "end": "41520"
  },
  {
    "text": "table actually let's go create a table",
    "start": "41520",
    "end": "43379"
  },
  {
    "text": "test ID integer very very very simple",
    "start": "43379",
    "end": "48180"
  },
  {
    "text": "table right go ahead and create them and",
    "start": "48180",
    "end": "51480"
  },
  {
    "text": "I'm gonna go ahead and insert uh one",
    "start": "51480",
    "end": "54899"
  },
  {
    "text": "value here so if I do select",
    "start": "54899",
    "end": "58379"
  },
  {
    "text": "star from",
    "start": "58379",
    "end": "60379"
  },
  {
    "text": "test here and I do select store from",
    "start": "60379",
    "end": "64198"
  },
  {
    "text": "test as another transaction you can see",
    "start": "64199",
    "end": "66720"
  },
  {
    "text": "that I can see the same row because that",
    "start": "66720",
    "end": "71220"
  },
  {
    "text": "insert statement was a new transaction",
    "start": "71220",
    "end": "75080"
  },
  {
    "text": "that started right and then inserted the",
    "start": "75080",
    "end": "78960"
  },
  {
    "text": "row and then commit it so this is an",
    "start": "78960",
    "end": "81180"
  },
  {
    "text": "also a misconception I suppose you can",
    "start": "81180",
    "end": "83759"
  },
  {
    "text": "say that uh individuals didn't like that",
    "start": "83759",
    "end": "86820"
  },
  {
    "text": "don't have in transactions everything is",
    "start": "86820",
    "end": "88799"
  },
  {
    "text": "a transaction right if you don't wrap it",
    "start": "88799",
    "end": "90720"
  },
  {
    "text": "in this transaction postgres or any that",
    "start": "90720",
    "end": "93900"
  },
  {
    "text": "eBay for that matter will start a",
    "start": "93900",
    "end": "95759"
  },
  {
    "text": "transaction and if Auto command is",
    "start": "95759",
    "end": "98280"
  },
  {
    "text": "enabled it will auto commit it right",
    "start": "98280",
    "end": "100380"
  },
  {
    "text": "what I want to do here is",
    "start": "100380",
    "end": "103200"
  },
  {
    "text": "I want to show you that",
    "start": "103200",
    "end": "106159"
  },
  {
    "text": "columns the system columns that you see",
    "start": "106159",
    "end": "108840"
  },
  {
    "text": "here so yeah we haven't called a user",
    "start": "108840",
    "end": "111479"
  },
  {
    "text": "column called ID which is an integer",
    "start": "111479",
    "end": "113280"
  },
  {
    "text": "field here we have a table called test",
    "start": "113280",
    "end": "115799"
  },
  {
    "text": "so we have a an actual file on disk with",
    "start": "115799",
    "end": "120180"
  },
  {
    "start": "120000",
    "end": "420000"
  },
  {
    "text": "certain amount of pages Associated",
    "start": "120180",
    "end": "122939"
  },
  {
    "text": "within probably it's just single page",
    "start": "122939",
    "end": "125159"
  },
  {
    "text": "because there's one row right and when",
    "start": "125159",
    "end": "129179"
  },
  {
    "text": "we do when we see these columns the most",
    "start": "129179",
    "end": "131700"
  },
  {
    "text": "important one that we're going to show",
    "start": "131700",
    "end": "133440"
  },
  {
    "text": "is ctid",
    "start": "133440",
    "end": "135959"
  },
  {
    "text": "which stands for uh",
    "start": "135959",
    "end": "139440"
  },
  {
    "text": "I don't understand the C stands for but",
    "start": "139440",
    "end": "141900"
  },
  {
    "text": "T is the topology right C the idea of C",
    "start": "141900",
    "end": "145980"
  },
  {
    "text": "is basically showing the page as well",
    "start": "145980",
    "end": "149040"
  },
  {
    "text": "where the page lives right which the",
    "start": "149040",
    "end": "152040"
  },
  {
    "text": "page number and also the the index on",
    "start": "152040",
    "end": "156180"
  },
  {
    "text": "that page right because you see the",
    "start": "156180",
    "end": "158900"
  },
  {
    "text": "postgres organizes things as pages and",
    "start": "158900",
    "end": "162300"
  },
  {
    "text": "they are they are 8K each and each Tuple",
    "start": "162300",
    "end": "167060"
  },
  {
    "text": "represent the",
    "start": "167060",
    "end": "170180"
  },
  {
    "text": "individual indexed right so triple",
    "start": "170180",
    "end": "173640"
  },
  {
    "text": "number zero is the first Tuple and then",
    "start": "173640",
    "end": "176040"
  },
  {
    "text": "indexable number one is the second and",
    "start": "176040",
    "end": "178680"
  },
  {
    "text": "so on right",
    "start": "178680",
    "end": "180120"
  },
  {
    "text": "and I think they start from one I'm not",
    "start": "180120",
    "end": "182040"
  },
  {
    "text": "sure about that so if I do ctid from",
    "start": "182040",
    "end": "185700"
  },
  {
    "text": "test you can see that we get zero on one",
    "start": "185700",
    "end": "189319"
  },
  {
    "text": "zero so my understanding was correct we",
    "start": "189319",
    "end": "192720"
  },
  {
    "text": "start from one the index starts from one",
    "start": "192720",
    "end": "194599"
  },
  {
    "text": "I'm pretty sure I remember reading the",
    "start": "194599",
    "end": "196980"
  },
  {
    "text": "code and says the tid starts from work",
    "start": "196980",
    "end": "199200"
  },
  {
    "text": "towards the start from one not zero but",
    "start": "199200",
    "end": "201599"
  },
  {
    "text": "the pages start from zero so we have one",
    "start": "201599",
    "end": "203580"
  },
  {
    "text": "page and there is a one row in that page",
    "start": "203580",
    "end": "206760"
  },
  {
    "text": "right and if I do the same thing right",
    "start": "206760",
    "end": "209099"
  },
  {
    "text": "here",
    "start": "209099",
    "end": "211400"
  },
  {
    "text": "of course you can still say star and",
    "start": "211440",
    "end": "213840"
  },
  {
    "text": "then you do City ID from test",
    "start": "213840",
    "end": "216060"
  },
  {
    "text": "form from test you can see that this the",
    "start": "216060",
    "end": "219840"
  },
  {
    "text": "current the ctid so zero and one let's",
    "start": "219840",
    "end": "223080"
  },
  {
    "text": "go ahead and and actually insert an and",
    "start": "223080",
    "end": "226319"
  },
  {
    "text": "another row",
    "start": "226319",
    "end": "227840"
  },
  {
    "text": "insert uh let's do it from this",
    "start": "227840",
    "end": "230940"
  },
  {
    "text": "transaction from this session",
    "start": "230940",
    "end": "233340"
  },
  {
    "text": "shouldn't matter but",
    "start": "233340",
    "end": "235080"
  },
  {
    "text": "would be nice to do something like let's",
    "start": "235080",
    "end": "237420"
  },
  {
    "text": "do two right and if I do this now",
    "start": "237420",
    "end": "241260"
  },
  {
    "text": "you can see that now",
    "start": "241260",
    "end": "244700"
  },
  {
    "text": "this is showing that's the first Tuple",
    "start": "244819",
    "end": "248099"
  },
  {
    "text": "and that's the second Tuple and zero two",
    "start": "248099",
    "end": "250500"
  },
  {
    "text": "and",
    "start": "250500",
    "end": "251700"
  },
  {
    "text": "notice that I use the word Tuple and not",
    "start": "251700",
    "end": "253860"
  },
  {
    "text": "row there is difference between them I'm",
    "start": "253860",
    "end": "256979"
  },
  {
    "text": "going to come to that now in this minute",
    "start": "256979",
    "end": "258720"
  },
  {
    "text": "now",
    "start": "258720",
    "end": "260400"
  },
  {
    "text": "you see now that we have uh let's be a",
    "start": "260400",
    "end": "264720"
  },
  {
    "text": "little bit similar here do that all",
    "start": "264720",
    "end": "267660"
  },
  {
    "text": "right",
    "start": "267660",
    "end": "269100"
  },
  {
    "text": "so that I have row number one",
    "start": "269100",
    "end": "271740"
  },
  {
    "text": "identified by my user id which is one",
    "start": "271740",
    "end": "274500"
  },
  {
    "text": "and I have an row number two and this is",
    "start": "274500",
    "end": "277800"
  },
  {
    "text": "almost kind of similar right but here's",
    "start": "277800",
    "end": "280080"
  },
  {
    "text": "what I'm gonna do I'm gonna do an update",
    "start": "280080",
    "end": "281580"
  },
  {
    "text": "test",
    "start": "281580",
    "end": "283080"
  },
  {
    "text": "set",
    "start": "283080",
    "end": "284720"
  },
  {
    "text": "ID equal",
    "start": "284720",
    "end": "287400"
  },
  {
    "text": "three",
    "start": "287400",
    "end": "288600"
  },
  {
    "text": "sad that we don't have another column",
    "start": "288600",
    "end": "290340"
  },
  {
    "text": "but sure",
    "start": "290340",
    "end": "291360"
  },
  {
    "text": "where ID equal to right that's what I'm",
    "start": "291360",
    "end": "293520"
  },
  {
    "text": "going to do I'm gonna update and here's",
    "start": "293520",
    "end": "296460"
  },
  {
    "text": "the big difference in postgres compared",
    "start": "296460",
    "end": "298440"
  },
  {
    "text": "to any other databases when we do the",
    "start": "298440",
    "end": "300720"
  },
  {
    "text": "select you see that we actually get",
    "start": "300720",
    "end": "305820"
  },
  {
    "text": "two rows there is another rule that is",
    "start": "305820",
    "end": "309240"
  },
  {
    "text": "kind of missing here but it's still",
    "start": "309240",
    "end": "312800"
  },
  {
    "text": "hanging there if you will and I do that",
    "start": "312800",
    "end": "316680"
  },
  {
    "text": "now you can see that it's it says three",
    "start": "316680",
    "end": "319500"
  },
  {
    "text": "so zero two actually there is a tuple",
    "start": "319500",
    "end": "324120"
  },
  {
    "text": "that is there what postgres really did",
    "start": "324120",
    "end": "327000"
  },
  {
    "text": "here is actually created a new Tuple",
    "start": "327000",
    "end": "330960"
  },
  {
    "text": "pointing to that row and that row now",
    "start": "330960",
    "end": "336180"
  },
  {
    "text": "is dead",
    "start": "336180",
    "end": "339360"
  },
  {
    "text": "so let's clear this out to prove that",
    "start": "339360",
    "end": "341639"
  },
  {
    "text": "point we can do this query query the",
    "start": "341639",
    "end": "344639"
  },
  {
    "text": "stats table",
    "start": "344639",
    "end": "346139"
  },
  {
    "text": "which is the old table looking for our",
    "start": "346139",
    "end": "349080"
  },
  {
    "text": "relation which is table test and you can",
    "start": "349080",
    "end": "351960"
  },
  {
    "text": "see that we have now two live stable and",
    "start": "351960",
    "end": "355020"
  },
  {
    "text": "one dead Tuple so there that Tuple",
    "start": "355020",
    "end": "358800"
  },
  {
    "text": "id2 is actually still there but it's",
    "start": "358800",
    "end": "362160"
  },
  {
    "text": "dead right and the reason it's dead is",
    "start": "362160",
    "end": "365699"
  },
  {
    "text": "because no we updated it and we created",
    "start": "365699",
    "end": "370440"
  },
  {
    "text": "a new one that's how postgres Works",
    "start": "370440",
    "end": "372479"
  },
  {
    "text": "forskus never",
    "start": "372479",
    "end": "374400"
  },
  {
    "text": "does an In-Place update it always",
    "start": "374400",
    "end": "376919"
  },
  {
    "text": "creates a new Tuple so technically",
    "start": "376919",
    "end": "379320"
  },
  {
    "text": "speaking one row can have many",
    "start": "379320",
    "end": "383120"
  },
  {
    "text": "physical tuples corresponding to it and",
    "start": "383120",
    "end": "386520"
  },
  {
    "text": "the reason we do this is for MVC series",
    "start": "386520",
    "end": "390000"
  },
  {
    "text": "um multiversion concurrency control",
    "start": "390000",
    "end": "392060"
  },
  {
    "text": "older transactions such as repeatable",
    "start": "392060",
    "end": "395100"
  },
  {
    "text": "read or read committed",
    "start": "395100",
    "end": "396900"
  },
  {
    "text": "there are still running can still read",
    "start": "396900",
    "end": "399780"
  },
  {
    "text": "all draws all tuples if necessary right",
    "start": "399780",
    "end": "403319"
  },
  {
    "text": "all right another we learned about this",
    "start": "403319",
    "end": "406860"
  },
  {
    "text": "what I'm going to show you next is",
    "start": "406860",
    "end": "409380"
  },
  {
    "text": "actually the other two pieces which is",
    "start": "409380",
    "end": "415460"
  },
  {
    "text": "uh X Min and x max",
    "start": "415500",
    "end": "419720"
  },
  {
    "text": "X-Men stands for",
    "start": "419720",
    "end": "422039"
  },
  {
    "start": "420000",
    "end": "480000"
  },
  {
    "text": "the transaction minimum what is the",
    "start": "422039",
    "end": "425039"
  },
  {
    "text": "transaction that actually created that",
    "start": "425039",
    "end": "426840"
  },
  {
    "text": "row and x max if necessary what",
    "start": "426840",
    "end": "430860"
  },
  {
    "text": "transaction is actually killed that road",
    "start": "430860",
    "end": "433380"
  },
  {
    "text": "right and if you do that you can",
    "start": "433380",
    "end": "436199"
  },
  {
    "text": "actually see",
    "start": "436199",
    "end": "437580"
  },
  {
    "text": "right",
    "start": "437580",
    "end": "440120"
  },
  {
    "text": "you can see now these transactions X Min",
    "start": "440780",
    "end": "444060"
  },
  {
    "text": "x max",
    "start": "444060",
    "end": "446039"
  },
  {
    "text": "beautiful see that it's zero the X Min",
    "start": "446039",
    "end": "450360"
  },
  {
    "text": "so you can see that X-Men is 577 then",
    "start": "450360",
    "end": "453900"
  },
  {
    "text": "the transaction we created this row is",
    "start": "453900",
    "end": "456479"
  },
  {
    "text": "one is 577.",
    "start": "456479",
    "end": "460020"
  },
  {
    "text": "and the transaction that created Row 3",
    "start": "460020",
    "end": "462720"
  },
  {
    "text": "is 579. now let's actually be in a",
    "start": "462720",
    "end": "466560"
  },
  {
    "text": "transaction",
    "start": "466560",
    "end": "467699"
  },
  {
    "text": "a logical transaction so I'm going to",
    "start": "467699",
    "end": "470460"
  },
  {
    "text": "begin the transaction here I'm going to",
    "start": "470460",
    "end": "472080"
  },
  {
    "text": "begin another transaction here so we",
    "start": "472080",
    "end": "473819"
  },
  {
    "text": "have two transaction in flight",
    "start": "473819",
    "end": "476400"
  },
  {
    "text": "I'm going to insert a row",
    "start": "476400",
    "end": "478440"
  },
  {
    "text": "insert into test values",
    "start": "478440",
    "end": "482340"
  },
  {
    "start": "480000",
    "end": "780000"
  },
  {
    "text": "or",
    "start": "482340",
    "end": "484880"
  },
  {
    "text": "and then insert into test values five",
    "start": "486060",
    "end": "488699"
  },
  {
    "text": "right",
    "start": "488699",
    "end": "490440"
  },
  {
    "text": "so this transaction inserted first this",
    "start": "490440",
    "end": "493199"
  },
  {
    "text": "transaction inserted second right and",
    "start": "493199",
    "end": "496319"
  },
  {
    "text": "then I'm gonna do a select here same",
    "start": "496319",
    "end": "499379"
  },
  {
    "text": "select that we did",
    "start": "499379",
    "end": "501060"
  },
  {
    "text": "you see that the four that we inserted",
    "start": "501060",
    "end": "504479"
  },
  {
    "text": "in this session",
    "start": "504479",
    "end": "505979"
  },
  {
    "text": "is visible to us and that's the acid",
    "start": "505979",
    "end": "509340"
  },
  {
    "text": "rules and I need to see what I touched",
    "start": "509340",
    "end": "512700"
  },
  {
    "text": "but the changes that this guy made is",
    "start": "512700",
    "end": "516120"
  },
  {
    "text": "not visible and that reason is because",
    "start": "516120",
    "end": "518120"
  },
  {
    "text": "default isolation level in postgres is",
    "start": "518120",
    "end": "520860"
  },
  {
    "text": "really committed that means anything",
    "start": "520860",
    "end": "523140"
  },
  {
    "text": "that is not committed I should not see",
    "start": "523140",
    "end": "525060"
  },
  {
    "text": "right although if I did the same exact",
    "start": "525060",
    "end": "529019"
  },
  {
    "text": "identical query here you see that this",
    "start": "529019",
    "end": "532200"
  },
  {
    "text": "transaction c05 which is what it created",
    "start": "532200",
    "end": "535140"
  },
  {
    "text": "but it does not zero four which this",
    "start": "535140",
    "end": "537839"
  },
  {
    "text": "guy's created",
    "start": "537839",
    "end": "539160"
  },
  {
    "text": "and we can know that this is the",
    "start": "539160",
    "end": "541320"
  },
  {
    "text": "transaction ID 581 now that means my",
    "start": "541320",
    "end": "544140"
  },
  {
    "text": "transaction ID is 581 this transaction",
    "start": "544140",
    "end": "546600"
  },
  {
    "text": "ID is 580 all right and now",
    "start": "546600",
    "end": "550700"
  },
  {
    "text": "very interestingly we can do a commit on",
    "start": "550700",
    "end": "554580"
  },
  {
    "text": "the second transaction and just like",
    "start": "554580",
    "end": "556980"
  },
  {
    "text": "that if I do a commit if I do a query on",
    "start": "556980",
    "end": "561060"
  },
  {
    "text": "this guy I still only see Row 5 because",
    "start": "561060",
    "end": "564540"
  },
  {
    "text": "that's what I created right and four",
    "start": "564540",
    "end": "567899"
  },
  {
    "text": "technically is not committed but let's",
    "start": "567899",
    "end": "569880"
  },
  {
    "text": "query this time from this transaction",
    "start": "569880",
    "end": "572700"
  },
  {
    "text": "you see now I see four and I also",
    "start": "572700",
    "end": "575640"
  },
  {
    "text": "receive five that is created by a",
    "start": "575640",
    "end": "577920"
  },
  {
    "text": "transaction in the future all right I'm",
    "start": "577920",
    "end": "581160"
  },
  {
    "text": "in the past 580.",
    "start": "581160",
    "end": "584279"
  },
  {
    "text": "but I'm seeing something from the future",
    "start": "584279",
    "end": "586680"
  },
  {
    "text": "and the reason you're seeing something",
    "start": "586680",
    "end": "588540"
  },
  {
    "text": "in the future is because this particular",
    "start": "588540",
    "end": "590820"
  },
  {
    "text": "select statement",
    "start": "590820",
    "end": "593459"
  },
  {
    "text": "because my isolation level is read",
    "start": "593459",
    "end": "595620"
  },
  {
    "text": "committed it",
    "start": "595620",
    "end": "597600"
  },
  {
    "text": "it creates a new snapshot the read",
    "start": "597600",
    "end": "600660"
  },
  {
    "text": "snapshot is always at the time of the",
    "start": "600660",
    "end": "604380"
  },
  {
    "text": "query so what postgres is okay you're",
    "start": "604380",
    "end": "607740"
  },
  {
    "text": "executing a new query",
    "start": "607740",
    "end": "609240"
  },
  {
    "text": "what is the latest committed transaction",
    "start": "609240",
    "end": "612000"
  },
  {
    "text": "the last commit success 581 so it's all",
    "start": "612000",
    "end": "615480"
  },
  {
    "text": "right you're gonna see 581 and less than",
    "start": "615480",
    "end": "618600"
  },
  {
    "text": "that anything below 581 you're gonna see",
    "start": "618600",
    "end": "621959"
  },
  {
    "text": "it that's the contract for read",
    "start": "621959",
    "end": "624060"
  },
  {
    "text": "committed right we're gonna see later if",
    "start": "624060",
    "end": "627000"
  },
  {
    "text": "we're going to change this to isolation",
    "start": "627000",
    "end": "628560"
  },
  {
    "text": "level to or read repeatable read and",
    "start": "628560",
    "end": "630959"
  },
  {
    "text": "dial who's gonna change right so now I'm",
    "start": "630959",
    "end": "633720"
  },
  {
    "text": "I am seeing",
    "start": "633720",
    "end": "635820"
  },
  {
    "text": "things that are committed by other",
    "start": "635820",
    "end": "637740"
  },
  {
    "text": "transactions even though they started",
    "start": "637740",
    "end": "640680"
  },
  {
    "text": "after me that has no implication because",
    "start": "640680",
    "end": "643800"
  },
  {
    "text": "every time right and let's let's",
    "start": "643800",
    "end": "646440"
  },
  {
    "text": "actually compare that I'm not gonna even",
    "start": "646440",
    "end": "648360"
  },
  {
    "text": "start the transaction this time just and",
    "start": "648360",
    "end": "650279"
  },
  {
    "text": "again insert six right and we know every",
    "start": "650279",
    "end": "654420"
  },
  {
    "text": "transaction if it changes things it it",
    "start": "654420",
    "end": "657959"
  },
  {
    "text": "gets a new X ID transaction ID and a",
    "start": "657959",
    "end": "661200"
  },
  {
    "text": "result we",
    "start": "661200",
    "end": "663600"
  },
  {
    "text": "should get a new transaction ID and I am",
    "start": "663600",
    "end": "667200"
  },
  {
    "text": "as a still running transaction I am",
    "start": "667200",
    "end": "669779"
  },
  {
    "text": "supposed to see that other transaction",
    "start": "669779",
    "end": "671820"
  },
  {
    "text": "changes because my isolation level my",
    "start": "671820",
    "end": "674940"
  },
  {
    "text": "isolation level here is read committed",
    "start": "674940",
    "end": "678480"
  },
  {
    "text": "I am reading any committed value at this",
    "start": "678480",
    "end": "682920"
  },
  {
    "text": "particular point",
    "start": "682920",
    "end": "684540"
  },
  {
    "text": "right when I start this I always ask",
    "start": "684540",
    "end": "687240"
  },
  {
    "text": "that question what is the latest",
    "start": "687240",
    "end": "688980"
  },
  {
    "text": "committed transaction and from that is",
    "start": "688980",
    "end": "692040"
  },
  {
    "text": "in this case it's 582 I'll read anything",
    "start": "692040",
    "end": "694320"
  },
  {
    "text": "582 and and lower",
    "start": "694320",
    "end": "697380"
  },
  {
    "text": "if for some reason you execute this",
    "start": "697380",
    "end": "701760"
  },
  {
    "text": "query and it takes so long right like if",
    "start": "701760",
    "end": "705360"
  },
  {
    "text": "it takes this so long to let's say 10",
    "start": "705360",
    "end": "708480"
  },
  {
    "text": "seconds right",
    "start": "708480",
    "end": "711000"
  },
  {
    "text": "the transaction read point the snapshot",
    "start": "711000",
    "end": "713640"
  },
  {
    "text": "will become 5 582 Ram that's the latest",
    "start": "713640",
    "end": "716040"
  },
  {
    "text": "command but meanwhile in the 10 second",
    "start": "716040",
    "end": "718200"
  },
  {
    "text": "word this execute you inserted more",
    "start": "718200",
    "end": "721019"
  },
  {
    "text": "stuff you will not see these changes",
    "start": "721019",
    "end": "723839"
  },
  {
    "text": "while that query changes because your",
    "start": "723839",
    "end": "726420"
  },
  {
    "text": "snapshot was created as 582 not 583",
    "start": "726420",
    "end": "729959"
  },
  {
    "text": "right so that's also another compelling",
    "start": "729959",
    "end": "733800"
  },
  {
    "text": "Point all right if I of course if I do",
    "start": "733800",
    "end": "736800"
  },
  {
    "text": "here select star",
    "start": "736800",
    "end": "738540"
  },
  {
    "text": "you can see that I see everything except",
    "start": "738540",
    "end": "740339"
  },
  {
    "text": "4 because 4 was not committed right but",
    "start": "740339",
    "end": "743100"
  },
  {
    "text": "at the moment I commit this guy",
    "start": "743100",
    "end": "744959"
  },
  {
    "text": "okay I now see everything well beautiful",
    "start": "744959",
    "end": "748620"
  },
  {
    "text": "design and the reason is because we look",
    "start": "748620",
    "end": "751980"
  },
  {
    "text": "through the Heap the pages and we see",
    "start": "751980",
    "end": "754380"
  },
  {
    "text": "okay 580 actually this queries stumbles",
    "start": "754380",
    "end": "758700"
  },
  {
    "text": "upon 580 but it just doesn't return it",
    "start": "758700",
    "end": "761820"
  },
  {
    "text": "to us as users because it will look at",
    "start": "761820",
    "end": "765839"
  },
  {
    "text": "the state of the transaction 580 and",
    "start": "765839",
    "end": "768180"
  },
  {
    "text": "will say Ah that's not really trans",
    "start": "768180",
    "end": "769980"
  },
  {
    "text": "that's not really committed I'm not",
    "start": "769980",
    "end": "771839"
  },
  {
    "text": "going to touch it and if it's not",
    "start": "771839",
    "end": "773820"
  },
  {
    "text": "committed",
    "start": "773820",
    "end": "774899"
  },
  {
    "text": "you should not read it right and",
    "start": "774899",
    "end": "778139"
  },
  {
    "text": "postgres doesn't support read",
    "start": "778139",
    "end": "779339"
  },
  {
    "text": "uncommitted isolation level all right",
    "start": "779339",
    "end": "782579"
  },
  {
    "start": "780000",
    "end": "1140000"
  },
  {
    "text": "let's do some fancy stuff let's do some",
    "start": "782579",
    "end": "784380"
  },
  {
    "text": "repeatable read thing here",
    "start": "784380",
    "end": "786480"
  },
  {
    "text": "okay maybe let's not get the table so we",
    "start": "786480",
    "end": "789360"
  },
  {
    "text": "don't get all this strong kite test",
    "start": "789360",
    "end": "792540"
  },
  {
    "text": "right so let's start from test okay",
    "start": "792540",
    "end": "796320"
  },
  {
    "text": "clean all right so now we're gonna do",
    "start": "796320",
    "end": "797880"
  },
  {
    "text": "here",
    "start": "797880",
    "end": "799139"
  },
  {
    "text": "um I'm gonna begin a transaction here",
    "start": "799139",
    "end": "801600"
  },
  {
    "text": "I'm going to begin a transaction here so",
    "start": "801600",
    "end": "803579"
  },
  {
    "text": "I'm Gonna Leave This as a read committed",
    "start": "803579",
    "end": "805500"
  },
  {
    "text": "but this guy I'm gonna make as an a",
    "start": "805500",
    "end": "809700"
  },
  {
    "text": "repeatable read isolation level a little",
    "start": "809700",
    "end": "811860"
  },
  {
    "text": "different and the way you do it is trans",
    "start": "811860",
    "end": "814519"
  },
  {
    "text": "transaction",
    "start": "814519",
    "end": "816139"
  },
  {
    "text": "transaction isolation level repeatable",
    "start": "816139",
    "end": "820079"
  },
  {
    "text": "rate if I'm not mistaken I think that's",
    "start": "820079",
    "end": "821880"
  },
  {
    "text": "how you do it there you go right and",
    "start": "821880",
    "end": "824700"
  },
  {
    "text": "then",
    "start": "824700",
    "end": "825480"
  },
  {
    "text": "same thing you do select store I'm going",
    "start": "825480",
    "end": "829680"
  },
  {
    "text": "to go ahead and insert a row here",
    "start": "829680",
    "end": "832680"
  },
  {
    "text": "let's go ahead and insert a row insert",
    "start": "832680",
    "end": "834420"
  },
  {
    "text": "into test values",
    "start": "834420",
    "end": "837720"
  },
  {
    "text": "so inside the one here and I'm gonna",
    "start": "837720",
    "end": "840120"
  },
  {
    "text": "insert into",
    "start": "840120",
    "end": "842279"
  },
  {
    "text": "test value is two",
    "start": "842279",
    "end": "844680"
  },
  {
    "text": "right and I do select",
    "start": "844680",
    "end": "848839"
  },
  {
    "text": "right everything",
    "start": "848880",
    "end": "851820"
  },
  {
    "text": "we see the stuff I changed and you see",
    "start": "851820",
    "end": "854639"
  },
  {
    "text": "that we start from page zero and triple",
    "start": "854639",
    "end": "857339"
  },
  {
    "text": "zero that means tip or one it means we",
    "start": "857339",
    "end": "859320"
  },
  {
    "text": "cleaned everything trinket literally",
    "start": "859320",
    "end": "861240"
  },
  {
    "text": "just truncated that page that we had all",
    "start": "861240",
    "end": "863940"
  },
  {
    "text": "right",
    "start": "863940",
    "end": "864920"
  },
  {
    "text": "and here I'm gonna just do the same",
    "start": "864920",
    "end": "867899"
  },
  {
    "text": "thing select",
    "start": "867899",
    "end": "870540"
  },
  {
    "text": "you can see that I see my change right",
    "start": "870540",
    "end": "873480"
  },
  {
    "text": "and I'm I'm the second Tuple here on",
    "start": "873480",
    "end": "877019"
  },
  {
    "text": "this first double right that means I I",
    "start": "877019",
    "end": "879240"
  },
  {
    "text": "read something before me but but I",
    "start": "879240",
    "end": "881040"
  },
  {
    "text": "wasn't supposed to read it so I'm gonna",
    "start": "881040",
    "end": "882779"
  },
  {
    "text": "go ahead and actually commit here",
    "start": "882779",
    "end": "885440"
  },
  {
    "text": "but I'm gonna go ahead and actually read",
    "start": "885440",
    "end": "888420"
  },
  {
    "text": "you can see that I am although this is",
    "start": "888420",
    "end": "891899"
  },
  {
    "text": "committed",
    "start": "891899",
    "end": "893100"
  },
  {
    "text": "I'm not seeing the changes you don't",
    "start": "893100",
    "end": "895860"
  },
  {
    "text": "believe me let's insert another row",
    "start": "895860",
    "end": "897420"
  },
  {
    "text": "insert into test values three",
    "start": "897420",
    "end": "900600"
  },
  {
    "text": "and now I am going to do another query",
    "start": "900600",
    "end": "903800"
  },
  {
    "text": "nope I'm not seeing it why because",
    "start": "903800",
    "end": "907260"
  },
  {
    "text": "repeatable read does not start the",
    "start": "907260",
    "end": "910920"
  },
  {
    "text": "snapshot where you read stuff does not",
    "start": "910920",
    "end": "913560"
  },
  {
    "text": "start with the query it starts with the",
    "start": "913560",
    "end": "917100"
  },
  {
    "text": "begin",
    "start": "917100",
    "end": "918959"
  },
  {
    "text": "when we begin what was the the committed",
    "start": "918959",
    "end": "923639"
  },
  {
    "text": "transaction at that point",
    "start": "923639",
    "end": "925560"
  },
  {
    "text": "it was 584 was me and as a result only",
    "start": "925560",
    "end": "929519"
  },
  {
    "text": "something 584 and below I should see",
    "start": "929519",
    "end": "932639"
  },
  {
    "text": "anything that is above I'm not supposed",
    "start": "932639",
    "end": "935040"
  },
  {
    "text": "to see so if I actually query here",
    "start": "935040",
    "end": "938360"
  },
  {
    "text": "585 and 586 started after me right and",
    "start": "938360",
    "end": "943320"
  },
  {
    "text": "as a transaction when I started my",
    "start": "943320",
    "end": "945240"
  },
  {
    "text": "transaction 584 that's what I'm supposed",
    "start": "945240",
    "end": "947940"
  },
  {
    "text": "to read I'm not supposed to read",
    "start": "947940",
    "end": "950040"
  },
  {
    "text": "anything after that that's how",
    "start": "950040",
    "end": "952019"
  },
  {
    "text": "repeatable read actually works right and",
    "start": "952019",
    "end": "955380"
  },
  {
    "text": "it's very interesting when you actually",
    "start": "955380",
    "end": "957300"
  },
  {
    "text": "think about this stuff right so even if",
    "start": "957300",
    "end": "960540"
  },
  {
    "text": "I",
    "start": "960540",
    "end": "961620"
  },
  {
    "text": "played with this game I deleted things",
    "start": "961620",
    "end": "964320"
  },
  {
    "text": "like I I changed the x max the x-max is",
    "start": "964320",
    "end": "967139"
  },
  {
    "text": "basically if if a row is updated we get",
    "start": "967139",
    "end": "970620"
  },
  {
    "text": "the transaction that actually touched",
    "start": "970620",
    "end": "972540"
  },
  {
    "text": "that row but that's basically it",
    "start": "972540",
    "end": "975300"
  },
  {
    "text": "that's very powerful concept isn't it",
    "start": "975300",
    "end": "978360"
  },
  {
    "text": "right the the final thing I want to do",
    "start": "978360",
    "end": "980760"
  },
  {
    "text": "is I want to kind of exceed",
    "start": "980760",
    "end": "983940"
  },
  {
    "text": "the",
    "start": "983940",
    "end": "985440"
  },
  {
    "text": "uh the page I want to show you how the",
    "start": "985440",
    "end": "987779"
  },
  {
    "text": "pages are rolled up okay",
    "start": "987779",
    "end": "990959"
  },
  {
    "text": "and uh it's very interesting the ctid is",
    "start": "990959",
    "end": "993959"
  },
  {
    "text": "actually referenced everywhere in all",
    "start": "993959",
    "end": "995639"
  },
  {
    "text": "indexes so that is why it's really",
    "start": "995639",
    "end": "999180"
  },
  {
    "text": "critical changing that if the Heap if",
    "start": "999180",
    "end": "1002600"
  },
  {
    "text": "the Tuple changes its location changes",
    "start": "1002600",
    "end": "1005600"
  },
  {
    "text": "its location on which page it lives you",
    "start": "1005600",
    "end": "1009920"
  },
  {
    "text": "need to update all indexes if you insert",
    "start": "1009920",
    "end": "1012320"
  },
  {
    "text": "a new Tuple that belongs to the new",
    "start": "1012320",
    "end": "1014180"
  },
  {
    "text": "version of the row you need to update",
    "start": "1014180",
    "end": "1016160"
  },
  {
    "text": "all the indexes because all indexes",
    "start": "1016160",
    "end": "1017959"
  },
  {
    "text": "actually pulling to the ctid not to the",
    "start": "1017959",
    "end": "1020540"
  },
  {
    "text": "primary key like a classical done by",
    "start": "1020540",
    "end": "1023420"
  },
  {
    "text": "anodb in MySQL right it's different if",
    "start": "1023420",
    "end": "1026058"
  },
  {
    "text": "I'm not mistaken I think you can do it",
    "start": "1026059",
    "end": "1028040"
  },
  {
    "text": "this way right select as insert into",
    "start": "1028040",
    "end": "1030880"
  },
  {
    "text": "test select from generate series Maybe",
    "start": "1030880",
    "end": "1037780"
  },
  {
    "text": "there you go",
    "start": "1040160",
    "end": "1042500"
  },
  {
    "text": "wins with a bunch of rows",
    "start": "1042500",
    "end": "1045260"
  },
  {
    "text": "look at that",
    "start": "1045260",
    "end": "1047240"
  },
  {
    "text": "we inserted a bunch of rows and we got",
    "start": "1047240",
    "end": "1051020"
  },
  {
    "text": "up until 290 rows",
    "start": "1051020",
    "end": "1054679"
  },
  {
    "text": "in page zero that is it and you can see",
    "start": "1054679",
    "end": "1058220"
  },
  {
    "text": "that all of them were creating the same",
    "start": "1058220",
    "end": "1060620"
  },
  {
    "text": "transaction understandably so right and",
    "start": "1060620",
    "end": "1063799"
  },
  {
    "text": "then we flip to page one and then we",
    "start": "1063799",
    "end": "1066260"
  },
  {
    "text": "started over because page one is a brand",
    "start": "1066260",
    "end": "1068480"
  },
  {
    "text": "new page in the Heap right and we",
    "start": "1068480",
    "end": "1071600"
  },
  {
    "text": "started from triple one to pull two to",
    "start": "1071600",
    "end": "1074299"
  },
  {
    "text": "is it the same concept let's say 290",
    "start": "1074299",
    "end": "1077419"
  },
  {
    "text": "was it how much 291 the first one was",
    "start": "1077419",
    "end": "1081460"
  },
  {
    "text": "290 right the second one we got an extra",
    "start": "1081460",
    "end": "1084200"
  },
  {
    "text": "hit because probably okay because we",
    "start": "1084200",
    "end": "1085760"
  },
  {
    "text": "deleted some stuff right",
    "start": "1085760",
    "end": "1087559"
  },
  {
    "text": "then we got page two two 300 per per",
    "start": "1087559",
    "end": "1091400"
  },
  {
    "text": "page is too low right think about it you",
    "start": "1091400",
    "end": "1094520"
  },
  {
    "text": "get only",
    "start": "1094520",
    "end": "1095620"
  },
  {
    "text": "290 rows per 8 000 bytes",
    "start": "1095620",
    "end": "1100580"
  },
  {
    "text": "that is very low and that's probably",
    "start": "1100580",
    "end": "1103100"
  },
  {
    "text": "because of the overhead and and the page",
    "start": "1103100",
    "end": "1106059"
  },
  {
    "text": "headers and the Tuple headers and",
    "start": "1106059",
    "end": "1108679"
  },
  {
    "text": "postgres because it's like a really",
    "start": "1108679",
    "end": "1111260"
  },
  {
    "text": "massive right these headers and and the",
    "start": "1111260",
    "end": "1114500"
  },
  {
    "text": "overhead of the headers it's a lot of",
    "start": "1114500",
    "end": "1117200"
  },
  {
    "text": "stuff and there 291",
    "start": "1117200",
    "end": "1121059"
  },
  {
    "text": "291 page all right that's it I think",
    "start": "1121059",
    "end": "1125059"
  },
  {
    "text": "that's it that's then right there you go",
    "start": "1125059",
    "end": "1127940"
  },
  {
    "text": "how do you exit that's how you do it",
    "start": "1127940",
    "end": "1129740"
  },
  {
    "text": "okay",
    "start": "1129740",
    "end": "1130580"
  },
  {
    "text": "so we have a lot of a lot of rows it's",
    "start": "1130580",
    "end": "1133940"
  },
  {
    "text": "beautiful but this guy",
    "start": "1133940",
    "end": "1136760"
  },
  {
    "text": "guess what",
    "start": "1136760",
    "end": "1138440"
  },
  {
    "text": "because it's a repeatable read it should",
    "start": "1138440",
    "end": "1141320"
  },
  {
    "start": "1140000",
    "end": "1588000"
  },
  {
    "text": "not see anything in the future because",
    "start": "1141320",
    "end": "1143960"
  },
  {
    "text": "it's snapshot read moment started at the",
    "start": "1143960",
    "end": "1147679"
  },
  {
    "text": "beginning of the transaction not at the",
    "start": "1147679",
    "end": "1149840"
  },
  {
    "text": "time of the query unlike read commission",
    "start": "1149840",
    "end": "1152480"
  },
  {
    "text": "all right how about we actually try the",
    "start": "1152480",
    "end": "1154760"
  },
  {
    "text": "x-max explain the x-max right but again",
    "start": "1154760",
    "end": "1158480"
  },
  {
    "text": "um I'm going to roll back this",
    "start": "1158480",
    "end": "1161299"
  },
  {
    "text": "I'm gonna try and get a test",
    "start": "1161299",
    "end": "1164419"
  },
  {
    "text": "and I'm gonna start fresh here now that",
    "start": "1164419",
    "end": "1167480"
  },
  {
    "text": "we have the table that is clean what I'm",
    "start": "1167480",
    "end": "1169820"
  },
  {
    "text": "gonna do here is I'm gonna insert I'm",
    "start": "1169820",
    "end": "1171559"
  },
  {
    "text": "gonna insert into test that is one",
    "start": "1171559",
    "end": "1176000"
  },
  {
    "text": "and I'm gonna insert into this values",
    "start": "1176000",
    "end": "1178160"
  },
  {
    "text": "too okay",
    "start": "1178160",
    "end": "1180200"
  },
  {
    "text": "if I query that guy",
    "start": "1180200",
    "end": "1182360"
  },
  {
    "text": "I have one and two and these are the",
    "start": "1182360",
    "end": "1184460"
  },
  {
    "text": "transaction",
    "start": "1184460",
    "end": "1185960"
  },
  {
    "text": "what I'm gonna do here is I'm gonna",
    "start": "1185960",
    "end": "1187460"
  },
  {
    "text": "begin a transaction that is repeatable",
    "start": "1187460",
    "end": "1189740"
  },
  {
    "text": "read and then I'm gonna do the select",
    "start": "1189740",
    "end": "1193340"
  },
  {
    "text": "I'm seeing the rose because I started my",
    "start": "1193340",
    "end": "1197419"
  },
  {
    "text": "transaction after those rows were",
    "start": "1197419",
    "end": "1199400"
  },
  {
    "text": "created and of course I should see them",
    "start": "1199400",
    "end": "1201679"
  },
  {
    "text": "right so in another transaction I'm",
    "start": "1201679",
    "end": "1204620"
  },
  {
    "text": "going to delete one of those rows let's",
    "start": "1204620",
    "end": "1207860"
  },
  {
    "text": "delete row two",
    "start": "1207860",
    "end": "1209120"
  },
  {
    "text": "delete from",
    "start": "1209120",
    "end": "1211880"
  },
  {
    "text": "test where ID equal to",
    "start": "1211880",
    "end": "1215960"
  },
  {
    "text": "and if I query again of course id2 is",
    "start": "1215960",
    "end": "1219140"
  },
  {
    "text": "now gone and the reason it's gone",
    "start": "1219140",
    "end": "1221120"
  },
  {
    "text": "because technically",
    "start": "1221120",
    "end": "1222860"
  },
  {
    "text": "it was not physically deleted the x-max",
    "start": "1222860",
    "end": "1226760"
  },
  {
    "text": "was set for the new transaction which is",
    "start": "1226760",
    "end": "1229520"
  },
  {
    "text": "probably 596. that's the new transaction",
    "start": "1229520",
    "end": "1233020"
  },
  {
    "text": "that that deleted that row right",
    "start": "1233020",
    "end": "1236660"
  },
  {
    "text": "if I go back to this guy now and I do a",
    "start": "1236660",
    "end": "1239840"
  },
  {
    "text": "query",
    "start": "1239840",
    "end": "1240980"
  },
  {
    "text": "look what happened here",
    "start": "1240980",
    "end": "1243200"
  },
  {
    "text": "now it's a beautiful",
    "start": "1243200",
    "end": "1246860"
  },
  {
    "text": "uh forensics if you will that hey I'm",
    "start": "1246860",
    "end": "1251900"
  },
  {
    "text": "old I'm an old transaction I started",
    "start": "1251900",
    "end": "1254660"
  },
  {
    "text": "before I read those rows I kind of",
    "start": "1254660",
    "end": "1257660"
  },
  {
    "text": "placed some sort of a special lock not",
    "start": "1257660",
    "end": "1259880"
  },
  {
    "text": "shared not exclusive a special kind of",
    "start": "1259880",
    "end": "1262640"
  },
  {
    "text": "lock then okay I need to maintain this",
    "start": "1262640",
    "end": "1266360"
  },
  {
    "text": "state of these rows this row was deleted",
    "start": "1266360",
    "end": "1269380"
  },
  {
    "text": "in 596. I did not exist technically in",
    "start": "1269380",
    "end": "1274340"
  },
  {
    "text": "596. I I don't care about what happens",
    "start": "1274340",
    "end": "1276620"
  },
  {
    "text": "in the future because I'm a repeatable",
    "start": "1276620",
    "end": "1278299"
  },
  {
    "text": "read so my transaction should not delete",
    "start": "1278299",
    "end": "1282440"
  },
  {
    "text": "that row I should see it and that's why",
    "start": "1282440",
    "end": "1285100"
  },
  {
    "text": "although it is gone right this row is",
    "start": "1285100",
    "end": "1289760"
  },
  {
    "text": "gonna be kept forever as long as this",
    "start": "1289760",
    "end": "1293840"
  },
  {
    "text": "transaction is running if I never commit",
    "start": "1293840",
    "end": "1295880"
  },
  {
    "text": "this this row right this trans this row",
    "start": "1295880",
    "end": "1299360"
  },
  {
    "text": "is not if I never commit this",
    "start": "1299360",
    "end": "1301159"
  },
  {
    "text": "transaction this Tuple is Never Gonna Be",
    "start": "1301159",
    "end": "1303919"
  },
  {
    "text": "purged from the page it's gonna stay",
    "start": "1303919",
    "end": "1306320"
  },
  {
    "text": "there for ever as long as this",
    "start": "1306320",
    "end": "1308360"
  },
  {
    "text": "transaction lives why because it needs",
    "start": "1308360",
    "end": "1311960"
  },
  {
    "text": "it it locks it it it needs that role to",
    "start": "1311960",
    "end": "1316760"
  },
  {
    "text": "exist yeah I don't care that you deleted",
    "start": "1316760",
    "end": "1319100"
  },
  {
    "text": "it in the future but to me in the past I",
    "start": "1319100",
    "end": "1322400"
  },
  {
    "text": "need to see it and that's uh the power",
    "start": "1322400",
    "end": "1324980"
  },
  {
    "text": "of the isolation level that is",
    "start": "1324980",
    "end": "1327020"
  },
  {
    "text": "repeatable read in read committed we",
    "start": "1327020",
    "end": "1329120"
  },
  {
    "text": "don't have this when you commit",
    "start": "1329120",
    "end": "1330559"
  },
  {
    "text": "something that's it's gone that's it",
    "start": "1330559",
    "end": "1333380"
  },
  {
    "text": "right and that's the same for repeatable",
    "start": "1333380",
    "end": "1335720"
  },
  {
    "text": "read for the eyes for the serialization",
    "start": "1335720",
    "end": "1338299"
  },
  {
    "text": "for the serializable repeatable read",
    "start": "1338299",
    "end": "1341320"
  },
  {
    "text": "identical there's tiny changes between",
    "start": "1341320",
    "end": "1344240"
  },
  {
    "text": "repeatable read and serializable",
    "start": "1344240",
    "end": "1347059"
  },
  {
    "text": "and we're going to talk about in another",
    "start": "1347059",
    "end": "1348559"
  },
  {
    "text": "video but that's basically it so x max",
    "start": "1348559",
    "end": "1351620"
  },
  {
    "text": "is when which transaction actually",
    "start": "1351620",
    "end": "1355000"
  },
  {
    "text": "marked that Tuple as deleted so let's do",
    "start": "1355000",
    "end": "1359299"
  },
  {
    "text": "another fancy thing I'm gonna update",
    "start": "1359299",
    "end": "1364000"
  },
  {
    "text": "test set ID equal to 999 where ID equal",
    "start": "1365840",
    "end": "1372260"
  },
  {
    "text": "one I'm not gonna delete it per se but",
    "start": "1372260",
    "end": "1375440"
  },
  {
    "text": "I'm gonna update it",
    "start": "1375440",
    "end": "1377480"
  },
  {
    "text": "okay so what will happen here",
    "start": "1377480",
    "end": "1382539"
  },
  {
    "text": "I updated that",
    "start": "1382940",
    "end": "1384860"
  },
  {
    "text": "that ID is no longer one",
    "start": "1384860",
    "end": "1386960"
  },
  {
    "text": "it's now 999.",
    "start": "1386960",
    "end": "1389360"
  },
  {
    "text": "now if I do the query you can see that",
    "start": "1389360",
    "end": "1393320"
  },
  {
    "text": "the Tuple ID changed it's now zero three",
    "start": "1393320",
    "end": "1396140"
  },
  {
    "text": "it's a new Tuple it's not the same one",
    "start": "1396140",
    "end": "1398539"
  },
  {
    "text": "why because postgres that's how they",
    "start": "1398539",
    "end": "1401600"
  },
  {
    "text": "work they insert a new Tuple they never",
    "start": "1401600",
    "end": "1404539"
  },
  {
    "text": "change things in place right so one",
    "start": "1404539",
    "end": "1408380"
  },
  {
    "text": "technically still exists and here's the",
    "start": "1408380",
    "end": "1410240"
  },
  {
    "text": "proof",
    "start": "1410240",
    "end": "1412539"
  },
  {
    "text": "it's still there but look what happened",
    "start": "1413059",
    "end": "1416320"
  },
  {
    "text": "it started from 594 which I'm supposed",
    "start": "1416320",
    "end": "1420320"
  },
  {
    "text": "to read because I'm supposed to read",
    "start": "1420320",
    "end": "1422059"
  },
  {
    "text": "everything before 595 right",
    "start": "1422059",
    "end": "1425480"
  },
  {
    "text": "so I see I should read this but yeah",
    "start": "1425480",
    "end": "1428659"
  },
  {
    "text": "someone deleted that Tuple at 597 but I",
    "start": "1428659",
    "end": "1432380"
  },
  {
    "text": "don't care I need to see that Tuple as",
    "start": "1432380",
    "end": "1436159"
  },
  {
    "text": "it exists I need to see the old state of",
    "start": "1436159",
    "end": "1438799"
  },
  {
    "text": "the table the oldest state of the Tuple",
    "start": "1438799",
    "end": "1441080"
  },
  {
    "text": "is 0 1 right of the row technically and",
    "start": "1441080",
    "end": "1445039"
  },
  {
    "text": "this ID it's probably I should have kept",
    "start": "1445039",
    "end": "1447440"
  },
  {
    "text": "the ID and added another column that's a",
    "start": "1447440",
    "end": "1449240"
  },
  {
    "text": "that's a bad design in my part but you",
    "start": "1449240",
    "end": "1451340"
  },
  {
    "text": "get the point I think right so that row",
    "start": "1451340",
    "end": "1454760"
  },
  {
    "text": "is now row 9999 right but it's",
    "start": "1454760",
    "end": "1458240"
  },
  {
    "text": "technically the same logical row to the",
    "start": "1458240",
    "end": "1461000"
  },
  {
    "text": "user",
    "start": "1461000",
    "end": "1462080"
  },
  {
    "text": "someone just changed it but that old",
    "start": "1462080",
    "end": "1465380"
  },
  {
    "text": "transaction",
    "start": "1465380",
    "end": "1466700"
  },
  {
    "text": "still saw the old",
    "start": "1466700",
    "end": "1470480"
  },
  {
    "text": "Tuple and that's powerful concept that's",
    "start": "1470480",
    "end": "1473659"
  },
  {
    "text": "in VCC",
    "start": "1473659",
    "end": "1476059"
  },
  {
    "text": "in its uh Prime as they say if your",
    "start": "1476059",
    "end": "1479840"
  },
  {
    "text": "transaction lives between 594 and 597",
    "start": "1479840",
    "end": "1483080"
  },
  {
    "text": "you should see the Rope if your",
    "start": "1483080",
    "end": "1484940"
  },
  {
    "text": "transaction is after 597 you should not",
    "start": "1484940",
    "end": "1488360"
  },
  {
    "text": "see that row right so yeah it's it's so",
    "start": "1488360",
    "end": "1490760"
  },
  {
    "text": "fascinating that these two tuples are",
    "start": "1490760",
    "end": "1492620"
  },
  {
    "text": "actually dead but we're still reading",
    "start": "1492620",
    "end": "1494419"
  },
  {
    "text": "them right because we need them and if",
    "start": "1494419",
    "end": "1497419"
  },
  {
    "text": "you actually do a vacuum which is the",
    "start": "1497419",
    "end": "1499280"
  },
  {
    "text": "operation that cleans the tuples right",
    "start": "1499280",
    "end": "1501980"
  },
  {
    "text": "oh we have a let's roll back here and",
    "start": "1501980",
    "end": "1504620"
  },
  {
    "text": "then we do a vacuum if we're both test",
    "start": "1504620",
    "end": "1507200"
  },
  {
    "text": "there you go look at this so that's how",
    "start": "1507200",
    "end": "1509240"
  },
  {
    "text": "you do it vacuum for post test vacuum is",
    "start": "1509240",
    "end": "1511700"
  },
  {
    "text": "the process that cleans up these old",
    "start": "1511700",
    "end": "1513620"
  },
  {
    "text": "tuples right that are not longer but",
    "start": "1513620",
    "end": "1515900"
  },
  {
    "text": "look at this",
    "start": "1515900",
    "end": "1517220"
  },
  {
    "text": "it says",
    "start": "1517220",
    "end": "1518980"
  },
  {
    "text": "I found two dead row versions that",
    "start": "1518980",
    "end": "1523460"
  },
  {
    "text": "cannot be removed yet the oldest X Men",
    "start": "1523460",
    "end": "1528320"
  },
  {
    "text": "is 596 which is probably me that is",
    "start": "1528320",
    "end": "1531860"
  },
  {
    "text": "because we cannot really remove it",
    "start": "1531860",
    "end": "1533900"
  },
  {
    "text": "because someone is actually there is a",
    "start": "1533900",
    "end": "1535460"
  },
  {
    "text": "transaction that is actually using it",
    "start": "1535460",
    "end": "1536960"
  },
  {
    "text": "right that's probably why we don't need",
    "start": "1536960",
    "end": "1538640"
  },
  {
    "text": "it right that's why we cannot clean it",
    "start": "1538640",
    "end": "1541460"
  },
  {
    "text": "so go ahead and let's do a commit",
    "start": "1541460",
    "end": "1543500"
  },
  {
    "text": "although we didn't really change",
    "start": "1543500",
    "end": "1544760"
  },
  {
    "text": "anything but so go ahead and commit now",
    "start": "1544760",
    "end": "1546620"
  },
  {
    "text": "if I do vacuum you can see that found",
    "start": "1546620",
    "end": "1549980"
  },
  {
    "text": "two removable rows one non-removable raw",
    "start": "1549980",
    "end": "1554360"
  },
  {
    "text": "version in one out of one Pages zero the",
    "start": "1554360",
    "end": "1557900"
  },
  {
    "text": "draws version cannot be removed so they",
    "start": "1557900",
    "end": "1560059"
  },
  {
    "text": "actually clean now they are cleaned",
    "start": "1560059",
    "end": "1562100"
  },
  {
    "text": "those two rows",
    "start": "1562100",
    "end": "1564320"
  },
  {
    "text": "has been removed we removed two versions",
    "start": "1564320",
    "end": "1567020"
  },
  {
    "text": "right",
    "start": "1567020",
    "end": "1568100"
  },
  {
    "text": "and that's the power of postgres",
    "start": "1568100",
    "end": "1570880"
  },
  {
    "text": "understanding the system level uh",
    "start": "1570880",
    "end": "1574039"
  },
  {
    "text": "columns are actually critical to",
    "start": "1574039",
    "end": "1576380"
  },
  {
    "text": "understanding postgres I think there's",
    "start": "1576380",
    "end": "1578840"
  },
  {
    "text": "so much to this I'm still scratching the",
    "start": "1578840",
    "end": "1581659"
  },
  {
    "text": "surface when it comes to postgres all",
    "start": "1581659",
    "end": "1584419"
  },
  {
    "text": "right guys uh that's it for me today",
    "start": "1584419",
    "end": "1585620"
  },
  {
    "text": "sorry for the long video I'll see you in",
    "start": "1585620",
    "end": "1587299"
  },
  {
    "text": "the next one bye",
    "start": "1587299",
    "end": "1589720"
  }
]