[
  {
    "start": "0",
    "end": "180000"
  },
  {
    "text": "an atomic transaction is a transaction",
    "start": "160",
    "end": "3439"
  },
  {
    "text": "that have all the rights that it makes",
    "start": "3439",
    "end": "6799"
  },
  {
    "text": "considered as a unit of work which means",
    "start": "6799",
    "end": "10480"
  },
  {
    "text": "that",
    "start": "10480",
    "end": "11759"
  },
  {
    "text": "all the right should happen or none of",
    "start": "11759",
    "end": "14400"
  },
  {
    "text": "it should happen you know so if the",
    "start": "14400",
    "end": "16320"
  },
  {
    "text": "transaction crashed in the middle you",
    "start": "16320",
    "end": "18480"
  },
  {
    "text": "know",
    "start": "18480",
    "end": "19520"
  },
  {
    "text": "and you wrote half of these changes",
    "start": "19520",
    "end": "22640"
  },
  {
    "text": "these changes should be",
    "start": "22640",
    "end": "24320"
  },
  {
    "text": "removed from the database nobody should",
    "start": "24320",
    "end": "26160"
  },
  {
    "text": "see half of this effectively this",
    "start": "26160",
    "end": "29519"
  },
  {
    "text": "this this creates the concept of an atom",
    "start": "29519",
    "end": "32480"
  },
  {
    "text": "which cannot be split which obviously is",
    "start": "32480",
    "end": "34800"
  },
  {
    "text": "now no longer true because there is",
    "start": "34800",
    "end": "36800"
  },
  {
    "text": "nuclear fission right",
    "start": "36800",
    "end": "38640"
  },
  {
    "text": "but that's the idea of atomic",
    "start": "38640",
    "end": "40559"
  },
  {
    "text": "transactions",
    "start": "40559",
    "end": "41760"
  },
  {
    "text": "uh",
    "start": "41760",
    "end": "43200"
  },
  {
    "text": "and this is happening this is possible",
    "start": "43200",
    "end": "45920"
  },
  {
    "text": "because the a transaction is running in",
    "start": "45920",
    "end": "48000"
  },
  {
    "text": "a single process or multiple processes",
    "start": "48000",
    "end": "50719"
  },
  {
    "text": "that are coordinated in one machine with",
    "start": "50719",
    "end": "53120"
  },
  {
    "text": "the one resource or many resources we",
    "start": "53120",
    "end": "55280"
  },
  {
    "text": "have a ram we have locks in place we",
    "start": "55280",
    "end": "58480"
  },
  {
    "text": "have semaphores and everything is tucked",
    "start": "58480",
    "end": "61440"
  },
  {
    "text": "in into one unit",
    "start": "61440",
    "end": "63840"
  },
  {
    "text": "machine that i can control that's why i",
    "start": "63840",
    "end": "66080"
  },
  {
    "text": "was able to do that right atomicity if",
    "start": "66080",
    "end": "69040"
  },
  {
    "text": "you will",
    "start": "69040",
    "end": "70080"
  },
  {
    "text": "no",
    "start": "70080",
    "end": "70799"
  },
  {
    "text": "and and i can detect that because if if",
    "start": "70799",
    "end": "73360"
  },
  {
    "text": "the transaction",
    "start": "73360",
    "end": "74799"
  },
  {
    "text": "crashes in the middle",
    "start": "74799",
    "end": "76640"
  },
  {
    "text": "of the",
    "start": "76640",
    "end": "77680"
  },
  {
    "text": "uh",
    "start": "77680",
    "end": "78720"
  },
  {
    "text": "of me writing changes",
    "start": "78720",
    "end": "81439"
  },
  {
    "text": "obviously during the crash the database",
    "start": "81439",
    "end": "83600"
  },
  {
    "text": "will not be able to remove anything or",
    "start": "83600",
    "end": "86400"
  },
  {
    "text": "roll back one half time like what would",
    "start": "86400",
    "end": "88799"
  },
  {
    "text": "happen if you pull the power plug it's",
    "start": "88799",
    "end": "90560"
  },
  {
    "text": "not like oh i'm about to crash let me",
    "start": "90560",
    "end": "92720"
  },
  {
    "text": "clean up no",
    "start": "92720",
    "end": "94000"
  },
  {
    "text": "no databases does that",
    "start": "94000",
    "end": "95920"
  },
  {
    "text": "what what what databases do is like upon",
    "start": "95920",
    "end": "98400"
  },
  {
    "text": "recovery they will detect that this",
    "start": "98400",
    "end": "101040"
  },
  {
    "text": "transaction",
    "start": "101040",
    "end": "102560"
  },
  {
    "text": "wrought",
    "start": "102560",
    "end": "104000"
  },
  {
    "text": "is the state of this transaction was not",
    "start": "104000",
    "end": "106159"
  },
  {
    "text": "committed as a result by default",
    "start": "106159",
    "end": "108640"
  },
  {
    "text": "rollback",
    "start": "108640",
    "end": "109920"
  },
  {
    "text": "that's the contract if you happen to",
    "start": "109920",
    "end": "112799"
  },
  {
    "text": "have a crash in a transaction middleware",
    "start": "112799",
    "end": "115680"
  },
  {
    "text": "right",
    "start": "115680",
    "end": "116960"
  },
  {
    "text": "it will be rollback upon respond all",
    "start": "116960",
    "end": "119280"
  },
  {
    "text": "right and obviously some databases do it",
    "start": "119280",
    "end": "121280"
  },
  {
    "text": "differently right uh sql server and i",
    "start": "121280",
    "end": "124240"
  },
  {
    "text": "believe mysql",
    "start": "124240",
    "end": "125680"
  },
  {
    "text": "does it on reboot as the database start",
    "start": "125680",
    "end": "128640"
  },
  {
    "text": "it just cleans up everything it goes to",
    "start": "128640",
    "end": "131920"
  },
  {
    "text": "the undo",
    "start": "131920",
    "end": "134080"
  },
  {
    "text": "log",
    "start": "134080",
    "end": "135040"
  },
  {
    "text": "crack open the old state and persist it",
    "start": "135040",
    "end": "137760"
  },
  {
    "text": "to the data files and make sure",
    "start": "137760",
    "end": "139680"
  },
  {
    "text": "everything is as hanky dory as they say",
    "start": "139680",
    "end": "143760"
  },
  {
    "text": "and",
    "start": "143760",
    "end": "144560"
  },
  {
    "text": "and starts up polska's does it",
    "start": "144560",
    "end": "146160"
  },
  {
    "text": "differently obscures doesn't don't care",
    "start": "146160",
    "end": "148080"
  },
  {
    "text": "so",
    "start": "148080",
    "end": "148800"
  },
  {
    "text": "let it start",
    "start": "148800",
    "end": "150239"
  },
  {
    "text": "let the database start as fast as it can",
    "start": "150239",
    "end": "152400"
  },
  {
    "text": "but then later",
    "start": "152400",
    "end": "154239"
  },
  {
    "text": "transactions know not to read junk data",
    "start": "154239",
    "end": "157760"
  },
  {
    "text": "because there is a bit in the row",
    "start": "157760",
    "end": "160400"
  },
  {
    "text": "that tags the transaction id every row",
    "start": "160400",
    "end": "163360"
  },
  {
    "text": "you write there is a transaction bit",
    "start": "163360",
    "end": "165040"
  },
  {
    "text": "that says okay this is the transaction",
    "start": "165040",
    "end": "166480"
  },
  {
    "text": "id that wrote or updated or deleted this",
    "start": "166480",
    "end": "169440"
  },
  {
    "text": "row and as a result the transaction that",
    "start": "169440",
    "end": "172400"
  },
  {
    "text": "is reading is responsible to check the",
    "start": "172400",
    "end": "174239"
  },
  {
    "text": "state of that transaction and it will",
    "start": "174239",
    "end": "175760"
  },
  {
    "text": "know that it's not committed so it won't",
    "start": "175760",
    "end": "177440"
  },
  {
    "text": "read it",
    "start": "177440",
    "end": "178400"
  },
  {
    "text": "later postgres does a vacuum to clean up",
    "start": "178400",
    "end": "181120"
  },
  {
    "start": "180000",
    "end": "360000"
  },
  {
    "text": "all that junk so that's we know that",
    "start": "181120",
    "end": "183840"
  },
  {
    "text": "what an atomic transaction is we know",
    "start": "183840",
    "end": "186000"
  },
  {
    "text": "how it works but what happens",
    "start": "186000",
    "end": "189680"
  },
  {
    "text": "if the",
    "start": "189680",
    "end": "191920"
  },
  {
    "text": "states",
    "start": "191920",
    "end": "193360"
  },
  {
    "text": "and the data that i'm changing are",
    "start": "193360",
    "end": "195040"
  },
  {
    "text": "completely different machines completely",
    "start": "195040",
    "end": "197040"
  },
  {
    "text": "different databases",
    "start": "197040",
    "end": "198560"
  },
  {
    "text": "not even the same database",
    "start": "198560",
    "end": "200800"
  },
  {
    "text": "how do i",
    "start": "200800",
    "end": "203040"
  },
  {
    "text": "ensure atomicity and now this is a big",
    "start": "203040",
    "end": "205840"
  },
  {
    "text": "problem right it comes back to the idea",
    "start": "205840",
    "end": "208159"
  },
  {
    "text": "of consistency and a cap theorem that we",
    "start": "208159",
    "end": "210239"
  },
  {
    "text": "talked about and the moment you have",
    "start": "210239",
    "end": "212879"
  },
  {
    "text": "a partitioning",
    "start": "212879",
    "end": "215440"
  },
  {
    "text": "right in your",
    "start": "215440",
    "end": "217040"
  },
  {
    "text": "database",
    "start": "217040",
    "end": "218640"
  },
  {
    "text": "then",
    "start": "218640",
    "end": "219599"
  },
  {
    "text": "there is",
    "start": "219599",
    "end": "221040"
  },
  {
    "text": "no longer",
    "start": "221040",
    "end": "222319"
  },
  {
    "text": "guarantees consistency you cannot",
    "start": "222319",
    "end": "224640"
  },
  {
    "text": "guarantee consistency you're gonna get",
    "start": "224640",
    "end": "226239"
  },
  {
    "text": "eventual consistency but that's pretty",
    "start": "226239",
    "end": "228080"
  },
  {
    "text": "much it",
    "start": "228080",
    "end": "230000"
  },
  {
    "text": "that because you're now",
    "start": "230000",
    "end": "231760"
  },
  {
    "text": "sub physically separating that and there",
    "start": "231760",
    "end": "233760"
  },
  {
    "text": "is so there is a link that tolerable for",
    "start": "233760",
    "end": "236239"
  },
  {
    "text": "failure there is a possibility of a",
    "start": "236239",
    "end": "238840"
  },
  {
    "text": "failure now",
    "start": "238840",
    "end": "240879"
  },
  {
    "text": "you might say okay let's think about",
    "start": "240879",
    "end": "242480"
  },
  {
    "text": "this how about i'm going to do a",
    "start": "242480",
    "end": "244439"
  },
  {
    "text": "distributed transaction this is the",
    "start": "244439",
    "end": "246400"
  },
  {
    "text": "topic of today right this video i'm",
    "start": "246400",
    "end": "248640"
  },
  {
    "text": "going to do a distributed transaction",
    "start": "248640",
    "end": "250159"
  },
  {
    "text": "here's what i'm going to do",
    "start": "250159",
    "end": "251840"
  },
  {
    "text": "i'm going to have a coordinator another",
    "start": "251840",
    "end": "253120"
  },
  {
    "text": "machine that has no data just coordinate",
    "start": "253120",
    "end": "255519"
  },
  {
    "text": "two databases",
    "start": "255519",
    "end": "257440"
  },
  {
    "text": "this database will have i don't know",
    "start": "257440",
    "end": "260079"
  },
  {
    "text": "part of the atomic transaction and the",
    "start": "260079",
    "end": "262160"
  },
  {
    "text": "other one will have the other part right",
    "start": "262160",
    "end": "264400"
  },
  {
    "text": "let's say we're debiting one account",
    "start": "264400",
    "end": "266320"
  },
  {
    "text": "we're crediting the other account that's",
    "start": "266320",
    "end": "268479"
  },
  {
    "text": "an atomic transaction you better do the",
    "start": "268479",
    "end": "270639"
  },
  {
    "text": "same two of them at the same time right",
    "start": "270639",
    "end": "272960"
  },
  {
    "text": "you cannot credit one account and",
    "start": "272960",
    "end": "275280"
  },
  {
    "text": "not debit the other one right otherwise",
    "start": "275280",
    "end": "277199"
  },
  {
    "text": "you're gonna have money flowing in the",
    "start": "277199",
    "end": "278800"
  },
  {
    "text": "air",
    "start": "278800",
    "end": "280960"
  },
  {
    "text": "so",
    "start": "281680",
    "end": "283280"
  },
  {
    "text": "so if i have two databases and i as a",
    "start": "283280",
    "end": "285280"
  },
  {
    "text": "coordinator says okay hey transaction",
    "start": "285280",
    "end": "288320"
  },
  {
    "text": "start a transaction start a transaction",
    "start": "288320",
    "end": "290639"
  },
  {
    "text": "right",
    "start": "290639",
    "end": "291680"
  },
  {
    "text": "and then",
    "start": "291680",
    "end": "292800"
  },
  {
    "text": "go",
    "start": "292800",
    "end": "293919"
  },
  {
    "text": "whenever you're done commit",
    "start": "293919",
    "end": "295680"
  },
  {
    "text": "it's just like you can do this like oh",
    "start": "295680",
    "end": "297440"
  },
  {
    "text": "go commit and then when you do that",
    "start": "297440",
    "end": "301759"
  },
  {
    "text": "what happened if this transaction",
    "start": "301759",
    "end": "304639"
  },
  {
    "text": "continues",
    "start": "304639",
    "end": "305840"
  },
  {
    "text": "and then commits and this transaction",
    "start": "305840",
    "end": "307759"
  },
  {
    "text": "continues and it fails it crashes",
    "start": "307759",
    "end": "310800"
  },
  {
    "text": "what happens",
    "start": "310800",
    "end": "312240"
  },
  {
    "text": "there is a commit",
    "start": "312240",
    "end": "313840"
  },
  {
    "text": "that is a rollback by definition so the",
    "start": "313840",
    "end": "315600"
  },
  {
    "text": "database when it comes back",
    "start": "315600",
    "end": "317680"
  },
  {
    "text": "what will happen",
    "start": "317680",
    "end": "320160"
  },
  {
    "text": "the database will detect hey transaction",
    "start": "320160",
    "end": "322639"
  },
  {
    "text": "failed mid-state rollback",
    "start": "322639",
    "end": "325360"
  },
  {
    "text": "and then this transaction has committed",
    "start": "325360",
    "end": "329360"
  },
  {
    "text": "you no longer have atomicity that's a",
    "start": "329360",
    "end": "331759"
  },
  {
    "text": "problem",
    "start": "331759",
    "end": "332800"
  },
  {
    "text": "and you can work around that you can",
    "start": "332800",
    "end": "335680"
  },
  {
    "text": "build definitely build logic that solves",
    "start": "335680",
    "end": "338960"
  },
  {
    "text": "some of this problem but you're going to",
    "start": "338960",
    "end": "340800"
  },
  {
    "text": "have a write a lot of code obviously but",
    "start": "340800",
    "end": "343520"
  },
  {
    "text": "that's where",
    "start": "343520",
    "end": "344720"
  },
  {
    "text": "people start thinking about protocols to",
    "start": "344720",
    "end": "347600"
  },
  {
    "text": "solve this problem not perfect by any",
    "start": "347600",
    "end": "349919"
  },
  {
    "text": "means because i don't believe there is a",
    "start": "349919",
    "end": "352160"
  },
  {
    "text": "perfect distributed algorithm",
    "start": "352160",
    "end": "354960"
  },
  {
    "text": "right distributed transaction for",
    "start": "354960",
    "end": "356880"
  },
  {
    "text": "atomicity i don't believe so i might be",
    "start": "356880",
    "end": "358880"
  },
  {
    "text": "wrong",
    "start": "358880",
    "end": "359759"
  },
  {
    "text": "but one of the algorithm that i want to",
    "start": "359759",
    "end": "361199"
  },
  {
    "start": "360000",
    "end": "780000"
  },
  {
    "text": "talk about is called two phase commit",
    "start": "361199",
    "end": "365520"
  },
  {
    "text": "and the",
    "start": "365520",
    "end": "366720"
  },
  {
    "text": "pretty idea behind this is",
    "start": "366720",
    "end": "370479"
  },
  {
    "text": "what if we built a feature to the",
    "start": "370479",
    "end": "372319"
  },
  {
    "text": "database that says",
    "start": "372319",
    "end": "375680"
  },
  {
    "text": "hey you have a running transaction you",
    "start": "376319",
    "end": "377840"
  },
  {
    "text": "make all these changes i don't want you",
    "start": "377840",
    "end": "379680"
  },
  {
    "text": "to commit but i want you to prepare this",
    "start": "379680",
    "end": "382720"
  },
  {
    "text": "transaction for committing or for",
    "start": "382720",
    "end": "385440"
  },
  {
    "text": "rollback so what does that mean",
    "start": "385440",
    "end": "387680"
  },
  {
    "text": "it means that",
    "start": "387680",
    "end": "390400"
  },
  {
    "text": "when you prepare that transaction i want",
    "start": "390400",
    "end": "393120"
  },
  {
    "text": "you to flush all the changes to disk",
    "start": "393120",
    "end": "396479"
  },
  {
    "text": "anything yet you did write it to disk",
    "start": "396479",
    "end": "398800"
  },
  {
    "text": "write it right you might say what",
    "start": "398800",
    "end": "401280"
  },
  {
    "text": "that's saying that's just the commit no",
    "start": "401280",
    "end": "403120"
  },
  {
    "text": "no no",
    "start": "403120",
    "end": "404400"
  },
  {
    "text": "flushing digital disk doesn't usually",
    "start": "404400",
    "end": "406319"
  },
  {
    "text": "mean commit because you can flush",
    "start": "406319",
    "end": "408080"
  },
  {
    "text": "everything to disk and then",
    "start": "408080",
    "end": "410240"
  },
  {
    "text": "flush also the state of the transaction",
    "start": "410240",
    "end": "412240"
  },
  {
    "text": "saying that hey by the way this is still",
    "start": "412240",
    "end": "414240"
  },
  {
    "text": "running or this is a prepared",
    "start": "414240",
    "end": "415919"
  },
  {
    "text": "transaction",
    "start": "415919",
    "end": "417120"
  },
  {
    "text": "so that you can tell other transactions",
    "start": "417120",
    "end": "420400"
  },
  {
    "text": "that are running not to treat this as a",
    "start": "420400",
    "end": "422560"
  },
  {
    "text": "committed transaction why we're doing",
    "start": "422560",
    "end": "424880"
  },
  {
    "text": "this we're doing this that means if i",
    "start": "424880",
    "end": "427360"
  },
  {
    "text": "prepare a transaction i flush it to disk",
    "start": "427360",
    "end": "429919"
  },
  {
    "text": "right with a state as a prepared",
    "start": "429919",
    "end": "433039"
  },
  {
    "text": "if that database crashed after the",
    "start": "433039",
    "end": "434840"
  },
  {
    "text": "preparation the database will come back",
    "start": "434840",
    "end": "437599"
  },
  {
    "text": "and say oh i have a prepared transaction",
    "start": "437599",
    "end": "439440"
  },
  {
    "text": "let me restore it back in memory",
    "start": "439440",
    "end": "441599"
  },
  {
    "text": "let me acquire all the locks because we",
    "start": "441599",
    "end": "444000"
  },
  {
    "text": "talked about this in my database course",
    "start": "444000",
    "end": "446000"
  },
  {
    "text": "if a transaction starts changing it",
    "start": "446000",
    "end": "447919"
  },
  {
    "text": "immediately start obtaining locks so if",
    "start": "447919",
    "end": "450639"
  },
  {
    "text": "i change the row it obtains",
    "start": "450639",
    "end": "454240"
  },
  {
    "text": "exclusive lock on that row",
    "start": "454240",
    "end": "456639"
  },
  {
    "text": "assuming pessimistic concurrency control",
    "start": "456639",
    "end": "459120"
  },
  {
    "text": "here right and then some databases even",
    "start": "459120",
    "end": "461919"
  },
  {
    "text": "will obtain multiple locks based on",
    "start": "461919",
    "end": "464080"
  },
  {
    "text": "something called lock escalation if hey",
    "start": "464080",
    "end": "466639"
  },
  {
    "text": "i'm changing i'm touching a lot of rows",
    "start": "466639",
    "end": "469120"
  },
  {
    "text": "that's a lot of memory being maintained",
    "start": "469120",
    "end": "471120"
  },
  {
    "text": "in memory locks so let's just let's just",
    "start": "471120",
    "end": "473599"
  },
  {
    "text": "let's just obtain a",
    "start": "473599",
    "end": "475039"
  },
  {
    "text": "one page lock or one table lock because",
    "start": "475039",
    "end": "477280"
  },
  {
    "text": "hey chances that",
    "start": "477280",
    "end": "480560"
  },
  {
    "text": "the the whole tables will be touched as",
    "start": "480560",
    "end": "482400"
  },
  {
    "text": "high so let's",
    "start": "482400",
    "end": "483680"
  },
  {
    "text": "let's just touch the whole table let's",
    "start": "483680",
    "end": "485199"
  },
  {
    "text": "just block the whole thing so these",
    "start": "485199",
    "end": "487199"
  },
  {
    "text": "locks are re-established upon restart",
    "start": "487199",
    "end": "490240"
  },
  {
    "text": "and the transaction is now running so",
    "start": "490240",
    "end": "492560"
  },
  {
    "text": "prepare transactions",
    "start": "492560",
    "end": "494800"
  },
  {
    "text": "come back to life if you will so that's",
    "start": "494800",
    "end": "496720"
  },
  {
    "text": "the feature that",
    "start": "496720",
    "end": "498319"
  },
  {
    "text": "that is",
    "start": "498319",
    "end": "500160"
  },
  {
    "text": "necessary",
    "start": "500160",
    "end": "501759"
  },
  {
    "text": "to us what if i have we have that",
    "start": "501759",
    "end": "503759"
  },
  {
    "text": "feature let's assume we have that okay",
    "start": "503759",
    "end": "507120"
  },
  {
    "text": "now this protocol this two-phase commits",
    "start": "507120",
    "end": "510720"
  },
  {
    "text": "have the coordinator go into two phases",
    "start": "510720",
    "end": "513839"
  },
  {
    "text": "the first phase is to actually talk to",
    "start": "513839",
    "end": "516560"
  },
  {
    "text": "all these nodes and says hey",
    "start": "516560",
    "end": "519279"
  },
  {
    "text": "guys",
    "start": "519279",
    "end": "520880"
  },
  {
    "text": "you guys i know all of you have some",
    "start": "520880",
    "end": "522880"
  },
  {
    "text": "startup transactions but now what i want",
    "start": "522880",
    "end": "525680"
  },
  {
    "text": "you to do is",
    "start": "525680",
    "end": "526959"
  },
  {
    "text": "prepare prepare prepare prepare",
    "start": "526959",
    "end": "530800"
  },
  {
    "text": "this is called also the voting stage",
    "start": "530800",
    "end": "532880"
  },
  {
    "text": "it's like hey vote vote for are you guys",
    "start": "532880",
    "end": "534640"
  },
  {
    "text": "ready everybody's ready hey",
    "start": "534640",
    "end": "536959"
  },
  {
    "text": "everyone is good",
    "start": "536959",
    "end": "538240"
  },
  {
    "text": "all right so this database will say i",
    "start": "538240",
    "end": "540880"
  },
  {
    "text": "prepared i vote yes",
    "start": "540880",
    "end": "542959"
  },
  {
    "text": "i think my situation is good this",
    "start": "542959",
    "end": "544800"
  },
  {
    "text": "database will say i'm not ready yet",
    "start": "544800",
    "end": "546720"
  },
  {
    "text": "because i still have few changes to do",
    "start": "546720",
    "end": "549360"
  },
  {
    "text": "i'll block you coordinator for a while",
    "start": "549360",
    "end": "551839"
  },
  {
    "text": "let me change i'll respond to a while",
    "start": "551839",
    "end": "553600"
  },
  {
    "text": "right and then that is i'm ready i'm",
    "start": "553600",
    "end": "555680"
  },
  {
    "text": "ready this database comes back and says",
    "start": "555680",
    "end": "557120"
  },
  {
    "text": "okay i changed everything and now i vote",
    "start": "557120",
    "end": "559279"
  },
  {
    "text": "yes so if all of those guys voted yes",
    "start": "559279",
    "end": "562800"
  },
  {
    "text": "that means all their prepared",
    "start": "562800",
    "end": "564240"
  },
  {
    "text": "transactions are flush to disk and in",
    "start": "564240",
    "end": "566240"
  },
  {
    "text": "case of a failure we're good",
    "start": "566240",
    "end": "568640"
  },
  {
    "text": "in that best case scenario because",
    "start": "568640",
    "end": "570880"
  },
  {
    "text": "nothing is perfect again the coordinator",
    "start": "570880",
    "end": "573360"
  },
  {
    "text": "will come back and say",
    "start": "573360",
    "end": "575200"
  },
  {
    "text": "all right since everybody voted yes i",
    "start": "575200",
    "end": "577839"
  },
  {
    "text": "think it's safe to commit so it decides",
    "start": "577839",
    "end": "580640"
  },
  {
    "text": "based on some logic to commit",
    "start": "580640",
    "end": "583040"
  },
  {
    "text": "or to rollback",
    "start": "583040",
    "end": "584640"
  },
  {
    "text": "let's say",
    "start": "584640",
    "end": "585839"
  },
  {
    "text": "we decided to commit",
    "start": "585839",
    "end": "587519"
  },
  {
    "text": "so now",
    "start": "587519",
    "end": "589360"
  },
  {
    "text": "we till back all these transactions say",
    "start": "589360",
    "end": "592240"
  },
  {
    "text": "hey",
    "start": "592240",
    "end": "593200"
  },
  {
    "text": "hey you prepared that transaction",
    "start": "593200",
    "end": "595920"
  },
  {
    "text": "i wanted to commit that transaction you",
    "start": "595920",
    "end": "597600"
  },
  {
    "text": "might say how do you know which what",
    "start": "597600",
    "end": "599519"
  },
  {
    "text": "what if i have thousand prepared",
    "start": "599519",
    "end": "600720"
  },
  {
    "text": "transaction ah this is something i",
    "start": "600720",
    "end": "602399"
  },
  {
    "text": "forgot to mention when you prepare",
    "start": "602399",
    "end": "604160"
  },
  {
    "text": "that's actually given a name a unique",
    "start": "604160",
    "end": "606160"
  },
  {
    "text": "name so that name will be transferred to",
    "start": "606160",
    "end": "608480"
  },
  {
    "text": "the coordinator and the coordinator will",
    "start": "608480",
    "end": "610320"
  },
  {
    "text": "use name hey commit",
    "start": "610320",
    "end": "612079"
  },
  {
    "text": "transact commit prepare transaction for",
    "start": "612079",
    "end": "614399"
  },
  {
    "text": "commit full commit for commit for",
    "start": "614399",
    "end": "615920"
  },
  {
    "text": "comment four",
    "start": "615920",
    "end": "617040"
  },
  {
    "text": "so now all of these guys will comment",
    "start": "617040",
    "end": "618880"
  },
  {
    "text": "comment comment comment comment",
    "start": "618880",
    "end": "620560"
  },
  {
    "text": "transaction will receive the coordinator",
    "start": "620560",
    "end": "622160"
  },
  {
    "text": "receive all the comments",
    "start": "622160",
    "end": "623760"
  },
  {
    "text": "you're good to go",
    "start": "623760",
    "end": "625440"
  },
  {
    "text": "all right let's take one possible",
    "start": "625440",
    "end": "627360"
  },
  {
    "text": "failure",
    "start": "627360",
    "end": "628560"
  },
  {
    "text": "so what happened if",
    "start": "628560",
    "end": "630880"
  },
  {
    "text": "the coordinates talk to all these",
    "start": "630880",
    "end": "632160"
  },
  {
    "text": "machines databases and say okay",
    "start": "632160",
    "end": "634800"
  },
  {
    "text": "prepare prepare prepare prepare and they",
    "start": "634800",
    "end": "637040"
  },
  {
    "text": "all voted yes",
    "start": "637040",
    "end": "638720"
  },
  {
    "text": "all good",
    "start": "638720",
    "end": "640959"
  },
  {
    "text": "and then",
    "start": "640959",
    "end": "642160"
  },
  {
    "text": "after they voted yes",
    "start": "642160",
    "end": "644720"
  },
  {
    "text": "the according talk is a sweet time to",
    "start": "644720",
    "end": "647279"
  },
  {
    "text": "actually",
    "start": "647279",
    "end": "648959"
  },
  {
    "text": "respond back to what what those",
    "start": "648959",
    "end": "650880"
  },
  {
    "text": "databases should do and one of them",
    "start": "650880",
    "end": "652959"
  },
  {
    "text": "crashed",
    "start": "652959",
    "end": "654800"
  },
  {
    "text": "no the coordinator said okay",
    "start": "654800",
    "end": "656800"
  },
  {
    "text": "guys i think we should commit",
    "start": "656800",
    "end": "658720"
  },
  {
    "text": "go ahead and commit go ahead and commit",
    "start": "658720",
    "end": "660480"
  },
  {
    "text": "go ahead and comment go ahead and commit",
    "start": "660480",
    "end": "662079"
  },
  {
    "text": "so these databases will say okay i",
    "start": "662079",
    "end": "665519"
  },
  {
    "text": "committed i committed our committee but",
    "start": "665519",
    "end": "666959"
  },
  {
    "text": "this database was offline",
    "start": "666959",
    "end": "669839"
  },
  {
    "text": "right so it never received the request",
    "start": "669839",
    "end": "673040"
  },
  {
    "text": "to commit",
    "start": "673040",
    "end": "675680"
  },
  {
    "text": "what are we going to do",
    "start": "675680",
    "end": "677920"
  },
  {
    "text": "the codename in this case will say okay",
    "start": "677920",
    "end": "680240"
  },
  {
    "text": "i guess",
    "start": "680240",
    "end": "681360"
  },
  {
    "text": "one node didn't respond",
    "start": "681360",
    "end": "683920"
  },
  {
    "text": "let's just wait right so now you have",
    "start": "683920",
    "end": "687120"
  },
  {
    "text": "three databases that are committed while",
    "start": "687120",
    "end": "688959"
  },
  {
    "text": "one unknown state",
    "start": "688959",
    "end": "691600"
  },
  {
    "text": "let's for the second",
    "start": "691600",
    "end": "693360"
  },
  {
    "text": "example",
    "start": "693360",
    "end": "694560"
  },
  {
    "text": "that that database comes back to life",
    "start": "694560",
    "end": "696800"
  },
  {
    "text": "and says hey",
    "start": "696800",
    "end": "698000"
  },
  {
    "text": "oh",
    "start": "698000",
    "end": "698880"
  },
  {
    "text": "what happened",
    "start": "698880",
    "end": "700160"
  },
  {
    "text": "i was in a coma the neighbors come back",
    "start": "700160",
    "end": "702560"
  },
  {
    "text": "online and say all right i have this",
    "start": "702560",
    "end": "704959"
  },
  {
    "text": "beautiful prepared transaction what",
    "start": "704959",
    "end": "706880"
  },
  {
    "text": "should i do with it let me let me let me",
    "start": "706880",
    "end": "709200"
  },
  {
    "text": "do my job",
    "start": "709200",
    "end": "710480"
  },
  {
    "text": "let me put in memory let me acquire all",
    "start": "710480",
    "end": "712880"
  },
  {
    "text": "the locks right",
    "start": "712880",
    "end": "714560"
  },
  {
    "text": "and then do my thing i said wait a",
    "start": "714560",
    "end": "716079"
  },
  {
    "text": "minute this prepared transaction uh",
    "start": "716079",
    "end": "718639"
  },
  {
    "text": "like who was my coordinator again for",
    "start": "718639",
    "end": "720560"
  },
  {
    "text": "this one so it needs to talk back to the",
    "start": "720560",
    "end": "722800"
  },
  {
    "text": "cordento because it went offline right",
    "start": "722800",
    "end": "725440"
  },
  {
    "text": "this kind of indicate that you should",
    "start": "725440",
    "end": "727040"
  },
  {
    "text": "have logic to link the coordinator to",
    "start": "727040",
    "end": "730160"
  },
  {
    "text": "the prepared transaction so nothing is",
    "start": "730160",
    "end": "732160"
  },
  {
    "text": "free you gotta have to write all this",
    "start": "732160",
    "end": "733680"
  },
  {
    "text": "code we're just talking about the",
    "start": "733680",
    "end": "734959"
  },
  {
    "text": "protocol here right and now",
    "start": "734959",
    "end": "737600"
  },
  {
    "text": "the database will talk back to occurred",
    "start": "737600",
    "end": "739360"
  },
  {
    "text": "hey by the way coordinator i was offline",
    "start": "739360",
    "end": "741279"
  },
  {
    "text": "for a while uh and this transaction uh",
    "start": "741279",
    "end": "744959"
  },
  {
    "text": "what should i do with it",
    "start": "744959",
    "end": "746639"
  },
  {
    "text": "did you give me",
    "start": "746639",
    "end": "748399"
  },
  {
    "text": "an answer",
    "start": "748399",
    "end": "749839"
  },
  {
    "text": "oh yeah yeah this please go ahead and",
    "start": "749839",
    "end": "751760"
  },
  {
    "text": "commit that so",
    "start": "751760",
    "end": "753519"
  },
  {
    "text": "the database will commit that and as a",
    "start": "753519",
    "end": "755360"
  },
  {
    "text": "result you get",
    "start": "755360",
    "end": "757519"
  },
  {
    "text": "eventually",
    "start": "757519",
    "end": "759120"
  },
  {
    "text": "into a consistent state that's the word",
    "start": "759120",
    "end": "761839"
  },
  {
    "text": "eventually consistent the moment you",
    "start": "761839",
    "end": "764480"
  },
  {
    "text": "break down your sharded databases you",
    "start": "764480",
    "end": "767519"
  },
  {
    "text": "have eventual consistency consistency",
    "start": "767519",
    "end": "769920"
  },
  {
    "text": "right it's very very hard to have strong",
    "start": "769920",
    "end": "773680"
  },
  {
    "text": "consistency unless in the very certain",
    "start": "773680",
    "end": "776240"
  },
  {
    "text": "situations",
    "start": "776240",
    "end": "777839"
  },
  {
    "text": "right where you have very strong",
    "start": "777839",
    "end": "779760"
  },
  {
    "text": "guarantees about these situations right",
    "start": "779760",
    "end": "782480"
  },
  {
    "start": "780000",
    "end": "984000"
  },
  {
    "text": "very very hard to do but now",
    "start": "782480",
    "end": "785120"
  },
  {
    "text": "let's talk about the bad things and the",
    "start": "785120",
    "end": "787200"
  },
  {
    "text": "limitations of the two-phase",
    "start": "787200",
    "end": "789600"
  },
  {
    "text": "commits right so we talked about",
    "start": "789600",
    "end": "791120"
  },
  {
    "text": "two-phase commit",
    "start": "791120",
    "end": "792480"
  },
  {
    "text": "voting stage prepare prepare prepare",
    "start": "792480",
    "end": "795680"
  },
  {
    "text": "the second stage either commit or roll",
    "start": "795680",
    "end": "797519"
  },
  {
    "text": "back right the bad thing about the",
    "start": "797519",
    "end": "799680"
  },
  {
    "text": "two-face comment protocol is that",
    "start": "799680",
    "end": "802880"
  },
  {
    "text": "it's not perfect like any other",
    "start": "802880",
    "end": "804800"
  },
  {
    "text": "distributed protocol like what happened",
    "start": "804800",
    "end": "807040"
  },
  {
    "text": "if the leader dies",
    "start": "807040",
    "end": "810240"
  },
  {
    "text": "if the leader dies all bets are off",
    "start": "810240",
    "end": "813120"
  },
  {
    "text": "right because those databases will have",
    "start": "813120",
    "end": "816079"
  },
  {
    "text": "prepared transactions",
    "start": "816079",
    "end": "818000"
  },
  {
    "text": "that are sitting there acquiring locks",
    "start": "818000",
    "end": "820800"
  },
  {
    "text": "and preventing other transactions from",
    "start": "820800",
    "end": "823360"
  },
  {
    "text": "writing",
    "start": "823360",
    "end": "824560"
  },
  {
    "text": "even sometimes blocking from reads in",
    "start": "824560",
    "end": "827040"
  },
  {
    "text": "certain situations",
    "start": "827040",
    "end": "829360"
  },
  {
    "text": "and that's bad that's absolutely bad",
    "start": "829360",
    "end": "831760"
  },
  {
    "text": "right",
    "start": "831760",
    "end": "834160"
  },
  {
    "text": "and there is",
    "start": "834320",
    "end": "835440"
  },
  {
    "text": "no known solution to this except working",
    "start": "835440",
    "end": "838880"
  },
  {
    "text": "around it manually i guess or you can",
    "start": "838880",
    "end": "841199"
  },
  {
    "text": "write certain code because what happens",
    "start": "841199",
    "end": "843600"
  },
  {
    "text": "if if",
    "start": "843600",
    "end": "845120"
  },
  {
    "text": "the leader dies and another leader is",
    "start": "845120",
    "end": "847040"
  },
  {
    "text": "elected that new leader knows nothing",
    "start": "847040",
    "end": "849279"
  },
  {
    "text": "about the state of these transactions",
    "start": "849279",
    "end": "852480"
  },
  {
    "text": "right you can obviously transfer the",
    "start": "852480",
    "end": "855199"
  },
  {
    "text": "state you can work around it work about",
    "start": "855199",
    "end": "857680"
  },
  {
    "text": "all these situations but it's not easy",
    "start": "857680",
    "end": "860880"
  },
  {
    "text": "right so that's why some people are fine",
    "start": "860880",
    "end": "863360"
  },
  {
    "text": "with the two-phase",
    "start": "863360",
    "end": "864880"
  },
  {
    "text": "protocol two-phase commits protocol",
    "start": "864880",
    "end": "867760"
  },
  {
    "text": "and they say okay if the leader fail",
    "start": "867760",
    "end": "870399"
  },
  {
    "text": "sure that edge case if that happened",
    "start": "870399",
    "end": "873760"
  },
  {
    "text": "i'll take i'll take the hit right i'm",
    "start": "873760",
    "end": "877040"
  },
  {
    "text": "okay with it i'm gonna solve it with",
    "start": "877040",
    "end": "880000"
  },
  {
    "text": "perhaps a timeout you know i'll treat",
    "start": "880000",
    "end": "882800"
  },
  {
    "text": "all the transactions as rollback that's",
    "start": "882800",
    "end": "885279"
  },
  {
    "text": "why uh microservices sagas architecture",
    "start": "885279",
    "end": "889440"
  },
  {
    "text": "you know comes into the place and tries",
    "start": "889440",
    "end": "891519"
  },
  {
    "text": "to",
    "start": "891519",
    "end": "892480"
  },
  {
    "text": "resolve this post the fact",
    "start": "892480",
    "end": "895120"
  },
  {
    "text": "you know",
    "start": "895120",
    "end": "896160"
  },
  {
    "text": "tries to version every right you know",
    "start": "896160",
    "end": "899120"
  },
  {
    "text": "and tries to check the consistency so",
    "start": "899120",
    "end": "901760"
  },
  {
    "text": "okay are we consistent",
    "start": "901760",
    "end": "903920"
  },
  {
    "text": "anything happened anything bad happens",
    "start": "903920",
    "end": "906800"
  },
  {
    "text": "and obviously i'm not an expert in",
    "start": "906800",
    "end": "908160"
  },
  {
    "text": "distributed transactions or distributed",
    "start": "908160",
    "end": "910399"
  },
  {
    "text": "processing at all you know but this is",
    "start": "910399",
    "end": "912800"
  },
  {
    "text": "just from my personal readings uh",
    "start": "912800",
    "end": "915839"
  },
  {
    "text": "leave the question to you what do you",
    "start": "915839",
    "end": "917040"
  },
  {
    "text": "guys think did you use these protocols",
    "start": "917040",
    "end": "918880"
  },
  {
    "text": "uh are you in",
    "start": "918880",
    "end": "921360"
  },
  {
    "text": "walking alone of these big companies",
    "start": "921360",
    "end": "922959"
  },
  {
    "text": "like google working on a spanner and and",
    "start": "922959",
    "end": "925760"
  },
  {
    "text": "you know",
    "start": "925760",
    "end": "926720"
  },
  {
    "text": "amazon was that database called dynamodb",
    "start": "926720",
    "end": "931199"
  },
  {
    "text": "they they do these things on a daily",
    "start": "931199",
    "end": "933199"
  },
  {
    "text": "basis and",
    "start": "933199",
    "end": "934560"
  },
  {
    "text": "believe me it's it's not easy obviously",
    "start": "934560",
    "end": "937040"
  },
  {
    "text": "working with distributor because of this",
    "start": "937040",
    "end": "939600"
  },
  {
    "text": "networking aspect of this there's",
    "start": "939600",
    "end": "941680"
  },
  {
    "text": "failure",
    "start": "941680",
    "end": "942800"
  },
  {
    "text": "and there's a chance that their message",
    "start": "942800",
    "end": "945600"
  },
  {
    "text": "doesn't arrive and if it doesn't arrive",
    "start": "945600",
    "end": "948959"
  },
  {
    "text": "things can go wrong",
    "start": "948959",
    "end": "950480"
  },
  {
    "text": "things that",
    "start": "950480",
    "end": "952000"
  },
  {
    "text": "is no longer true no not true in a",
    "start": "952000",
    "end": "954560"
  },
  {
    "text": "single box you know when you send a",
    "start": "954560",
    "end": "956480"
  },
  {
    "text": "message to a process it will 100 arrive",
    "start": "956480",
    "end": "960160"
  },
  {
    "text": "unless something happens and if",
    "start": "960160",
    "end": "961920"
  },
  {
    "text": "something happens to that machine the",
    "start": "961920",
    "end": "963199"
  },
  {
    "text": "whole thing dies you know it's just a",
    "start": "963199",
    "end": "965199"
  },
  {
    "text": "one box right so it's rarely a problem",
    "start": "965199",
    "end": "968800"
  },
  {
    "text": "in a single instance well the moment you",
    "start": "968800",
    "end": "971120"
  },
  {
    "text": "separate them in a network that may fail",
    "start": "971120",
    "end": "974000"
  },
  {
    "text": "there is a latency there is a delay and",
    "start": "974000",
    "end": "976959"
  },
  {
    "text": "that as a result causes these problems",
    "start": "976959",
    "end": "979600"
  },
  {
    "text": "let me know what do you guys think got",
    "start": "979600",
    "end": "981279"
  },
  {
    "text": "to see in the next one goodbye",
    "start": "981279",
    "end": "984959"
  }
]