[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "what is going on guys my name is hussein",
    "start": "80",
    "end": "2639"
  },
  {
    "text": "and welcome to another episode of the",
    "start": "2639",
    "end": "4880"
  },
  {
    "text": "backend engineering",
    "start": "4880",
    "end": "7040"
  },
  {
    "text": "show in a make shift set up here this is",
    "start": "7040",
    "end": "11519"
  },
  {
    "text": "the poor man's",
    "start": "11519",
    "end": "13840"
  },
  {
    "text": "setup i i you don't want to see what i",
    "start": "13840",
    "end": "17600"
  },
  {
    "text": "i made my phone stand on",
    "start": "17600",
    "end": "19920"
  },
  {
    "text": "to get this shot",
    "start": "19920",
    "end": "21520"
  },
  {
    "text": "but in general i thought that i'll take",
    "start": "21520",
    "end": "23760"
  },
  {
    "text": "few minutes to",
    "start": "23760",
    "end": "25599"
  },
  {
    "text": "discuss a",
    "start": "25599",
    "end": "26800"
  },
  {
    "text": "topic for this show",
    "start": "26800",
    "end": "29439"
  },
  {
    "text": "and that is uh",
    "start": "29439",
    "end": "31519"
  },
  {
    "text": "postgres",
    "start": "31519",
    "end": "33280"
  },
  {
    "text": "version churn",
    "start": "33280",
    "end": "35280"
  },
  {
    "text": "and its implication",
    "start": "35280",
    "end": "38000"
  },
  {
    "text": "uh to performance",
    "start": "38000",
    "end": "40000"
  },
  {
    "text": "uh specifically to i o reading",
    "start": "40000",
    "end": "42960"
  },
  {
    "text": "effectively and how does it really",
    "start": "42960",
    "end": "45039"
  },
  {
    "text": "affect and how",
    "start": "45039",
    "end": "46640"
  },
  {
    "text": "postgres version 14",
    "start": "46640",
    "end": "49120"
  },
  {
    "text": "addressed this",
    "start": "49120",
    "end": "50879"
  },
  {
    "text": "problem of what they called the version",
    "start": "50879",
    "end": "53760"
  },
  {
    "text": "churn or version bloat right how about",
    "start": "53760",
    "end": "56719"
  },
  {
    "text": "we jump into it and talk about this",
    "start": "56719",
    "end": "59440"
  },
  {
    "text": "topic welcome to the beckett engineering",
    "start": "59440",
    "end": "61199"
  },
  {
    "start": "60000",
    "end": "402000"
  },
  {
    "text": "show with your host hussein nasser and",
    "start": "61199",
    "end": "64080"
  },
  {
    "text": "the way i'd like to uh start this topic",
    "start": "64080",
    "end": "67439"
  },
  {
    "text": "is to discuss",
    "start": "67439",
    "end": "68799"
  },
  {
    "text": "how postgres",
    "start": "68799",
    "end": "71360"
  },
  {
    "text": "uh versioning or mvcc",
    "start": "71360",
    "end": "74560"
  },
  {
    "text": "multiversion concurrency control works",
    "start": "74560",
    "end": "77360"
  },
  {
    "text": "and what is",
    "start": "77360",
    "end": "78560"
  },
  {
    "text": "the side effect of the design choice",
    "start": "78560",
    "end": "82320"
  },
  {
    "text": "that the postgres team made",
    "start": "82320",
    "end": "84880"
  },
  {
    "text": "to create a new version of the",
    "start": "84880",
    "end": "89280"
  },
  {
    "text": "row and you tuple effectively",
    "start": "89280",
    "end": "92079"
  },
  {
    "text": "to represent the change",
    "start": "92079",
    "end": "95600"
  },
  {
    "text": "for that given row so if you have data",
    "start": "95680",
    "end": "97840"
  },
  {
    "text": "row inserter or delete a row that is",
    "start": "97840",
    "end": "101040"
  },
  {
    "text": "effectively a new",
    "start": "101040",
    "end": "102960"
  },
  {
    "text": "role being inserted",
    "start": "102960",
    "end": "105280"
  },
  {
    "text": "into the database",
    "start": "105280",
    "end": "106960"
  },
  {
    "text": "with the change while we keep the state",
    "start": "106960",
    "end": "110640"
  },
  {
    "text": "of the old version right while i i",
    "start": "110640",
    "end": "113520"
  },
  {
    "text": "absolutely love that design it has some",
    "start": "113520",
    "end": "116000"
  },
  {
    "text": "side effects",
    "start": "116000",
    "end": "117439"
  },
  {
    "text": "and the side effect is",
    "start": "117439",
    "end": "119600"
  },
  {
    "text": "the bloat",
    "start": "119600",
    "end": "121040"
  },
  {
    "text": "that",
    "start": "121040",
    "end": "123280"
  },
  {
    "text": "results as a result",
    "start": "124000",
    "end": "126640"
  },
  {
    "text": "of these operations as you add as you",
    "start": "126640",
    "end": "129280"
  },
  {
    "text": "update a lot of",
    "start": "129280",
    "end": "131039"
  },
  {
    "text": "rows you will get a lot of stale",
    "start": "131039",
    "end": "134160"
  },
  {
    "text": "versions and those old versions are",
    "start": "134160",
    "end": "138400"
  },
  {
    "text": "necessary to be there",
    "start": "138400",
    "end": "140239"
  },
  {
    "text": "because older transactions",
    "start": "140239",
    "end": "143040"
  },
  {
    "text": "that started before that an update",
    "start": "143040",
    "end": "146640"
  },
  {
    "text": "happens",
    "start": "146640",
    "end": "147760"
  },
  {
    "text": "needs to see the",
    "start": "147760",
    "end": "150000"
  },
  {
    "text": "old state of the road as it existed",
    "start": "150000",
    "end": "153120"
  },
  {
    "text": "before",
    "start": "153120",
    "end": "154840"
  },
  {
    "text": "okay and and the reason it needs to see",
    "start": "154840",
    "end": "158239"
  },
  {
    "text": "that state",
    "start": "158239",
    "end": "159920"
  },
  {
    "text": "is for consistency",
    "start": "159920",
    "end": "161840"
  },
  {
    "text": "right",
    "start": "161840",
    "end": "162640"
  },
  {
    "text": "and",
    "start": "162640",
    "end": "163440"
  },
  {
    "text": "another thing called isolation right",
    "start": "163440",
    "end": "165760"
  },
  {
    "text": "there this is the i and the c",
    "start": "165760",
    "end": "168400"
  },
  {
    "text": "in the asset properties which i talked",
    "start": "168400",
    "end": "170800"
  },
  {
    "text": "about it a lot in details in my course",
    "start": "170800",
    "end": "173840"
  },
  {
    "text": "another shameless plug here go to",
    "start": "173840",
    "end": "175840"
  },
  {
    "text": "database done let's say nasart.com to",
    "start": "175840",
    "end": "179200"
  },
  {
    "text": "grab",
    "start": "179200",
    "end": "180239"
  },
  {
    "text": "over 18 hours worth of exclusive content",
    "start": "180239",
    "end": "183200"
  },
  {
    "text": "there talking about this beautiful",
    "start": "183200",
    "end": "186879"
  },
  {
    "text": "bare metal fundamentals",
    "start": "186879",
    "end": "190000"
  },
  {
    "text": "so that's that that's the decision that",
    "start": "190000",
    "end": "191760"
  },
  {
    "text": "the postgres",
    "start": "191760",
    "end": "194480"
  },
  {
    "text": "database made",
    "start": "194480",
    "end": "196560"
  },
  {
    "text": "which is when i update when i insert",
    "start": "196560",
    "end": "199920"
  },
  {
    "text": "when i delete",
    "start": "199920",
    "end": "201280"
  },
  {
    "text": "go ahead and insert a new",
    "start": "201280",
    "end": "204480"
  },
  {
    "text": "tuple right",
    "start": "204480",
    "end": "206080"
  },
  {
    "text": "and quick differentiation between what",
    "start": "206080",
    "end": "208239"
  },
  {
    "text": "is a tuple and what is a row in postgres",
    "start": "208239",
    "end": "212319"
  },
  {
    "text": "a row is what the",
    "start": "212319",
    "end": "214720"
  },
  {
    "text": "application sees",
    "start": "214720",
    "end": "216799"
  },
  {
    "text": "right so if i select something this is a",
    "start": "216799",
    "end": "219760"
  },
  {
    "text": "row let's say primary key seven that's",
    "start": "219760",
    "end": "223120"
  },
  {
    "text": "the unique identifier seven right",
    "start": "223120",
    "end": "227120"
  },
  {
    "text": "but",
    "start": "227120",
    "end": "227920"
  },
  {
    "text": "a tuple is",
    "start": "227920",
    "end": "230000"
  },
  {
    "text": "effectively the representation of the",
    "start": "230000",
    "end": "232959"
  },
  {
    "text": "physical",
    "start": "232959",
    "end": "234640"
  },
  {
    "text": "uh",
    "start": "234640",
    "end": "236000"
  },
  {
    "text": "version of that raw at that state right",
    "start": "236000",
    "end": "239200"
  },
  {
    "text": "so a logical row can",
    "start": "239200",
    "end": "242080"
  },
  {
    "text": "uh",
    "start": "242080",
    "end": "243599"
  },
  {
    "text": "have many many tuples floating around",
    "start": "243599",
    "end": "246560"
  },
  {
    "text": "right because it could have been updated",
    "start": "246560",
    "end": "248319"
  },
  {
    "text": "many many times it could have been",
    "start": "248319",
    "end": "250640"
  },
  {
    "text": "deleted effectively right and it will it",
    "start": "250640",
    "end": "254000"
  },
  {
    "text": "will have multiple tuples right",
    "start": "254000",
    "end": "256880"
  },
  {
    "text": "so that's that's effectively what it is",
    "start": "256880",
    "end": "258720"
  },
  {
    "text": "but as as a logical representation the",
    "start": "258720",
    "end": "261680"
  },
  {
    "text": "application should only see one of them",
    "start": "261680",
    "end": "263600"
  },
  {
    "text": "right the more the c's do that's a",
    "start": "263600",
    "end": "265360"
  },
  {
    "text": "corruption",
    "start": "265360",
    "end": "266880"
  },
  {
    "text": "um which by the way happened to uber",
    "start": "266880",
    "end": "269759"
  },
  {
    "text": "back in 2016 i believe one of the bugs",
    "start": "269759",
    "end": "273280"
  },
  {
    "text": "that they complained about",
    "start": "273280",
    "end": "275520"
  },
  {
    "text": "when they moved to my sequel",
    "start": "275520",
    "end": "277919"
  },
  {
    "text": "um",
    "start": "277919",
    "end": "279440"
  },
  {
    "text": "so that's the decision that the postgres",
    "start": "279440",
    "end": "281440"
  },
  {
    "text": "team made and then it's a very elegant",
    "start": "281440",
    "end": "283280"
  },
  {
    "text": "decision because",
    "start": "283280",
    "end": "285600"
  },
  {
    "text": "now all the transaction can see",
    "start": "285600",
    "end": "288720"
  },
  {
    "text": "those",
    "start": "288720",
    "end": "289370"
  },
  {
    "text": "[Music]",
    "start": "289370",
    "end": "290880"
  },
  {
    "text": "older rows by checking their transaction",
    "start": "290880",
    "end": "293600"
  },
  {
    "text": "ids so i started this",
    "start": "293600",
    "end": "296880"
  },
  {
    "text": "at this time right this is the latest",
    "start": "296880",
    "end": "299840"
  },
  {
    "text": "committed transaction at that time so",
    "start": "299840",
    "end": "302400"
  },
  {
    "text": "i'm only supposed to read rows",
    "start": "302400",
    "end": "306400"
  },
  {
    "text": "that are",
    "start": "306400",
    "end": "308080"
  },
  {
    "text": "created before this transaction right",
    "start": "308080",
    "end": "312240"
  },
  {
    "text": "and this is effectively my visible state",
    "start": "312240",
    "end": "314560"
  },
  {
    "text": "right there is many implementation that",
    "start": "314560",
    "end": "316560"
  },
  {
    "text": "you could have done uh",
    "start": "316560",
    "end": "318639"
  },
  {
    "text": "dates are one of them but postgres uses",
    "start": "318639",
    "end": "320960"
  },
  {
    "text": "the transaction id as a number right and",
    "start": "320960",
    "end": "324720"
  },
  {
    "text": "every transaction starts it gets a new",
    "start": "324720",
    "end": "326720"
  },
  {
    "text": "id every transaction that changes the",
    "start": "326720",
    "end": "329919"
  },
  {
    "text": "data",
    "start": "329919",
    "end": "331120"
  },
  {
    "text": "gets a new transaction id and that",
    "start": "331120",
    "end": "333039"
  },
  {
    "text": "that's how we we basically determine the",
    "start": "333039",
    "end": "336160"
  },
  {
    "text": "role of visibility am i supposed to read",
    "start": "336160",
    "end": "339199"
  },
  {
    "text": "and see this row that's the question",
    "start": "339199",
    "end": "342160"
  },
  {
    "text": "that every transaction asks am i",
    "start": "342160",
    "end": "344880"
  },
  {
    "text": "supposed to see that row and every",
    "start": "344880",
    "end": "348000"
  },
  {
    "text": "row every tuple has a minimum",
    "start": "348000",
    "end": "351440"
  },
  {
    "text": "transaction id and a maximum transaction",
    "start": "351440",
    "end": "353440"
  },
  {
    "text": "maybe and if you are basically between",
    "start": "353440",
    "end": "357520"
  },
  {
    "text": "these two",
    "start": "357520",
    "end": "358639"
  },
  {
    "text": "if your transaction only lies between",
    "start": "358639",
    "end": "360560"
  },
  {
    "text": "these two then you are supposed to see",
    "start": "360560",
    "end": "362880"
  },
  {
    "text": "it if your transaction is after right",
    "start": "362880",
    "end": "366080"
  },
  {
    "text": "that means you have",
    "start": "366080",
    "end": "368080"
  },
  {
    "text": "you effectively",
    "start": "368080",
    "end": "369759"
  },
  {
    "text": "uh",
    "start": "369759",
    "end": "371280"
  },
  {
    "text": "that means that you're not supposed to",
    "start": "371280",
    "end": "373360"
  },
  {
    "text": "see this role because well",
    "start": "373360",
    "end": "376080"
  },
  {
    "text": "then the the existence of a max",
    "start": "376080",
    "end": "378240"
  },
  {
    "text": "transaction id in a row that means it's",
    "start": "378240",
    "end": "380880"
  },
  {
    "text": "effectively has been deleted right or",
    "start": "380880",
    "end": "383759"
  },
  {
    "text": "has been updated effectively",
    "start": "383759",
    "end": "386639"
  },
  {
    "text": "right then and there's a new version of",
    "start": "386639",
    "end": "388960"
  },
  {
    "text": "that row so that's how",
    "start": "388960",
    "end": "392080"
  },
  {
    "text": "postgres",
    "start": "392080",
    "end": "393280"
  },
  {
    "text": "works with the versioning other",
    "start": "393280",
    "end": "395520"
  },
  {
    "text": "databases and quickly we need to mention",
    "start": "395520",
    "end": "398080"
  },
  {
    "text": "this right",
    "start": "398080",
    "end": "399360"
  },
  {
    "text": "in order to kind of understand how other",
    "start": "399360",
    "end": "401520"
  },
  {
    "text": "databases do things uh mysql for example",
    "start": "401520",
    "end": "405440"
  },
  {
    "start": "402000",
    "end": "675000"
  },
  {
    "text": "they don't do this",
    "start": "405440",
    "end": "406800"
  },
  {
    "text": "they do not insert a new",
    "start": "406800",
    "end": "409919"
  },
  {
    "text": "row for every change",
    "start": "409919",
    "end": "412080"
  },
  {
    "text": "that you make right that are in some new",
    "start": "412080",
    "end": "413840"
  },
  {
    "text": "temple",
    "start": "413840",
    "end": "415120"
  },
  {
    "text": "but what they do is they keep the",
    "start": "415120",
    "end": "418800"
  },
  {
    "text": "heap",
    "start": "418800",
    "end": "419919"
  },
  {
    "text": "pages or the physical storage pages",
    "start": "419919",
    "end": "425919"
  },
  {
    "text": "represents the latest",
    "start": "425919",
    "end": "429520"
  },
  {
    "text": "results effectively right",
    "start": "429520",
    "end": "432240"
  },
  {
    "text": "so that",
    "start": "432240",
    "end": "433199"
  },
  {
    "text": "when you actually go and read that is",
    "start": "433199",
    "end": "435599"
  },
  {
    "text": "the final representation of the rule",
    "start": "435599",
    "end": "438080"
  },
  {
    "text": "they always only keep the final",
    "start": "438080",
    "end": "440560"
  },
  {
    "text": "representation of the rule so if you",
    "start": "440560",
    "end": "442240"
  },
  {
    "text": "make an update we go and physically make",
    "start": "442240",
    "end": "444960"
  },
  {
    "text": "that update",
    "start": "444960",
    "end": "446160"
  },
  {
    "text": "to that row",
    "start": "446160",
    "end": "448080"
  },
  {
    "text": "on",
    "start": "448080",
    "end": "449280"
  },
  {
    "text": "its location effectively now you might",
    "start": "449280",
    "end": "451759"
  },
  {
    "text": "say hussein uh what about older",
    "start": "451759",
    "end": "454319"
  },
  {
    "text": "transactions i need to see the older",
    "start": "454319",
    "end": "456319"
  },
  {
    "text": "state",
    "start": "456319",
    "end": "457759"
  },
  {
    "text": "well the my sequel team",
    "start": "457759",
    "end": "460240"
  },
  {
    "text": "or i believe oracle's the same thing",
    "start": "460240",
    "end": "463520"
  },
  {
    "text": "made the decision that",
    "start": "463520",
    "end": "465280"
  },
  {
    "text": "mvc longer running transactions",
    "start": "465280",
    "end": "468800"
  },
  {
    "text": "have to do extra work",
    "start": "468800",
    "end": "471440"
  },
  {
    "text": "right to determine the older state",
    "start": "471440",
    "end": "475759"
  },
  {
    "text": "of the road if they want to see the",
    "start": "475759",
    "end": "478560"
  },
  {
    "text": "older state of the room",
    "start": "478560",
    "end": "480319"
  },
  {
    "text": "how",
    "start": "480319",
    "end": "481680"
  },
  {
    "text": "when you make a change in mysql or other",
    "start": "481680",
    "end": "485039"
  },
  {
    "text": "databases",
    "start": "485039",
    "end": "486800"
  },
  {
    "text": "all right they make physical change to",
    "start": "486800",
    "end": "489039"
  },
  {
    "text": "the row you update a field",
    "start": "489039",
    "end": "491759"
  },
  {
    "text": "that update is just overwritten",
    "start": "491759",
    "end": "493360"
  },
  {
    "text": "whatever's old is gone",
    "start": "493360",
    "end": "495599"
  },
  {
    "text": "in that physical page state right in the",
    "start": "495599",
    "end": "499280"
  },
  {
    "text": "heap as they call it",
    "start": "499280",
    "end": "501280"
  },
  {
    "text": "but",
    "start": "501280",
    "end": "502240"
  },
  {
    "text": "before they make that change they record",
    "start": "502240",
    "end": "505039"
  },
  {
    "text": "the older state effectively in something",
    "start": "505039",
    "end": "509039"
  },
  {
    "text": "called the undo files",
    "start": "509039",
    "end": "511919"
  },
  {
    "text": "so",
    "start": "511919",
    "end": "512880"
  },
  {
    "text": "this undo",
    "start": "512880",
    "end": "514399"
  },
  {
    "text": "list",
    "start": "514399",
    "end": "515680"
  },
  {
    "text": "keeps growing and growing and growing so",
    "start": "515680",
    "end": "518560"
  },
  {
    "text": "you'll have a list of files a list of",
    "start": "518560",
    "end": "522399"
  },
  {
    "text": "some some sort of a data structure that",
    "start": "522399",
    "end": "524560"
  },
  {
    "text": "keeps the old state of the",
    "start": "524560",
    "end": "528000"
  },
  {
    "text": "world so if an older transaction wants",
    "start": "528000",
    "end": "530640"
  },
  {
    "text": "the older version of the row well it",
    "start": "530640",
    "end": "533360"
  },
  {
    "text": "needs to determine whether c needs to",
    "start": "533360",
    "end": "535440"
  },
  {
    "text": "see the latest or not right there's a",
    "start": "535440",
    "end": "538240"
  },
  {
    "text": "there is a there is a formula for that",
    "start": "538240",
    "end": "541120"
  },
  {
    "text": "and once it does oh no you need to see",
    "start": "541120",
    "end": "543200"
  },
  {
    "text": "that older version it takes",
    "start": "543200",
    "end": "546480"
  },
  {
    "text": "the latest version because which is the",
    "start": "546480",
    "end": "549040"
  },
  {
    "text": "only thing that is the error obviously",
    "start": "549040",
    "end": "551279"
  },
  {
    "text": "right and it depends on whether it's a",
    "start": "551279",
    "end": "553040"
  },
  {
    "text": "disk or it's a memory cache hopefully",
    "start": "553040",
    "end": "555519"
  },
  {
    "text": "someone else read it so it's in the",
    "start": "555519",
    "end": "557680"
  },
  {
    "text": "buffer pool so we read that beautiful",
    "start": "557680",
    "end": "560480"
  },
  {
    "text": "role but it's not the one i want this is",
    "start": "560480",
    "end": "562320"
  },
  {
    "text": "the latest one i'm not supposed to see",
    "start": "562320",
    "end": "566160"
  },
  {
    "text": "the latest because i am an old",
    "start": "566160",
    "end": "568160"
  },
  {
    "text": "transaction i started way before this",
    "start": "568160",
    "end": "570000"
  },
  {
    "text": "transaction changed this row",
    "start": "570000",
    "end": "572240"
  },
  {
    "text": "right and committed so it takes that",
    "start": "572240",
    "end": "574640"
  },
  {
    "text": "latest row and then start applying the",
    "start": "574640",
    "end": "577440"
  },
  {
    "text": "undo file on the row to determine",
    "start": "577440",
    "end": "581200"
  },
  {
    "text": "effectively the state of the row and",
    "start": "581200",
    "end": "583440"
  },
  {
    "text": "obviously",
    "start": "583440",
    "end": "584800"
  },
  {
    "text": "that will slow things down compared to",
    "start": "584800",
    "end": "587360"
  },
  {
    "text": "the postgres model",
    "start": "587360",
    "end": "589120"
  },
  {
    "text": "where we only",
    "start": "589120",
    "end": "591680"
  },
  {
    "text": "it's right there the old row is in the",
    "start": "591680",
    "end": "594880"
  },
  {
    "text": "page right",
    "start": "594880",
    "end": "596560"
  },
  {
    "text": "and uh i just need to read it i don't",
    "start": "596560",
    "end": "598320"
  },
  {
    "text": "need to do any more work",
    "start": "598320",
    "end": "600560"
  },
  {
    "text": "okay so that's the effectively",
    "start": "600560",
    "end": "603279"
  },
  {
    "text": "uh the the different models and this is",
    "start": "603279",
    "end": "606480"
  },
  {
    "text": "very interesting to",
    "start": "606480",
    "end": "608480"
  },
  {
    "text": "to understand",
    "start": "608480",
    "end": "610000"
  },
  {
    "text": "and are these the only two ways",
    "start": "610000",
    "end": "612399"
  },
  {
    "text": "now you",
    "start": "612399",
    "end": "613839"
  },
  {
    "text": "the listener or the overwatching",
    "start": "613839",
    "end": "617040"
  },
  {
    "text": "this video",
    "start": "617040",
    "end": "619120"
  },
  {
    "text": "you can make",
    "start": "619120",
    "end": "620320"
  },
  {
    "text": "your own",
    "start": "620320",
    "end": "622800"
  },
  {
    "text": "model that was never invented this is",
    "start": "623360",
    "end": "626000"
  },
  {
    "text": "where i like to",
    "start": "626000",
    "end": "628000"
  },
  {
    "text": "kind of challenge everything that is",
    "start": "628000",
    "end": "629920"
  },
  {
    "text": "exist here",
    "start": "629920",
    "end": "631440"
  },
  {
    "text": "nothing is right and nothing is wrong",
    "start": "631440",
    "end": "634880"
  },
  {
    "text": "in in",
    "start": "634880",
    "end": "636079"
  },
  {
    "text": "a space of back in engineering right",
    "start": "636079",
    "end": "638720"
  },
  {
    "text": "anything can be broken right",
    "start": "638720",
    "end": "641200"
  },
  {
    "text": "anything can be challenged",
    "start": "641200",
    "end": "643760"
  },
  {
    "text": "right and that's a healthy mentality to",
    "start": "643760",
    "end": "646160"
  },
  {
    "text": "keep",
    "start": "646160",
    "end": "646959"
  },
  {
    "text": "in mind that's because whatever someone",
    "start": "646959",
    "end": "649440"
  },
  {
    "text": "did it's a human at the end of the day",
    "start": "649440",
    "end": "652160"
  },
  {
    "text": "and they make mistakes and nothing is",
    "start": "652160",
    "end": "654160"
  },
  {
    "text": "perfect",
    "start": "654160",
    "end": "655200"
  },
  {
    "text": "so these these this is the data that we",
    "start": "655200",
    "end": "658079"
  },
  {
    "text": "have this is what we have right",
    "start": "658079",
    "end": "660880"
  },
  {
    "text": "will someone invent something better",
    "start": "660880",
    "end": "662640"
  },
  {
    "text": "definitely right well this is where we",
    "start": "662640",
    "end": "664399"
  },
  {
    "text": "have all right so",
    "start": "664399",
    "end": "666959"
  },
  {
    "text": "these are the decisions that the",
    "start": "666959",
    "end": "668800"
  },
  {
    "text": "postgres team made which with versioning",
    "start": "668800",
    "end": "671839"
  },
  {
    "text": "so what is the side effect",
    "start": "671839",
    "end": "675360"
  },
  {
    "start": "675000",
    "end": "1020000"
  },
  {
    "text": "of that decision",
    "start": "675360",
    "end": "678320"
  },
  {
    "text": "updates",
    "start": "678320",
    "end": "679600"
  },
  {
    "text": "physical",
    "start": "679600",
    "end": "681120"
  },
  {
    "text": "update to the row so if i am updating",
    "start": "681120",
    "end": "684240"
  },
  {
    "text": "column one",
    "start": "684240",
    "end": "686240"
  },
  {
    "text": "right",
    "start": "686240",
    "end": "687680"
  },
  {
    "text": "i need to create a new row right",
    "start": "687680",
    "end": "690720"
  },
  {
    "text": "but",
    "start": "690720",
    "end": "692079"
  },
  {
    "text": "if i object column two",
    "start": "692079",
    "end": "694160"
  },
  {
    "text": "i have to create a new row",
    "start": "694160",
    "end": "695760"
  },
  {
    "text": "five bit column three i have to create a",
    "start": "695760",
    "end": "697600"
  },
  {
    "text": "new a new row so if you shoot three",
    "start": "697600",
    "end": "700560"
  },
  {
    "text": "updates segment to the same row three",
    "start": "700560",
    "end": "702959"
  },
  {
    "text": "times which is a bad idea",
    "start": "702959",
    "end": "705360"
  },
  {
    "text": "you're gonna get three",
    "start": "705360",
    "end": "706959"
  },
  {
    "text": "three rows three tuples representing",
    "start": "706959",
    "end": "710639"
  },
  {
    "text": "that same row effectively right",
    "start": "710639",
    "end": "713839"
  },
  {
    "text": "but is it interesting",
    "start": "713839",
    "end": "715680"
  },
  {
    "text": "what if you have",
    "start": "715680",
    "end": "717120"
  },
  {
    "text": "an index on column one an index on",
    "start": "717120",
    "end": "719600"
  },
  {
    "text": "column two an index on column three",
    "start": "719600",
    "end": "723920"
  },
  {
    "text": "these b3 indexing indexes are separate",
    "start": "724399",
    "end": "729120"
  },
  {
    "text": "data structures that exist on disk",
    "start": "729120",
    "end": "733200"
  },
  {
    "text": "and pulled in memory",
    "start": "733200",
    "end": "735360"
  },
  {
    "text": "if applicable",
    "start": "735360",
    "end": "737519"
  },
  {
    "text": "right uh to speed up the read",
    "start": "737519",
    "end": "740639"
  },
  {
    "text": "so we have column one index column two",
    "start": "740639",
    "end": "742399"
  },
  {
    "text": "index form 300 but here's",
    "start": "742399",
    "end": "744639"
  },
  {
    "text": "for postgres",
    "start": "744639",
    "end": "747279"
  },
  {
    "text": "these d3 indexes",
    "start": "747279",
    "end": "749680"
  },
  {
    "text": "effectively",
    "start": "749680",
    "end": "751360"
  },
  {
    "text": "contains that column one data or column",
    "start": "751360",
    "end": "754160"
  },
  {
    "text": "two data or column three in it but",
    "start": "754160",
    "end": "756800"
  },
  {
    "text": "with pointers back to the table back to",
    "start": "756800",
    "end": "760320"
  },
  {
    "text": "the heap back to the actual",
    "start": "760320",
    "end": "763760"
  },
  {
    "text": "you know the source of truth where",
    "start": "763760",
    "end": "765839"
  },
  {
    "text": "everything there right",
    "start": "765839",
    "end": "768560"
  },
  {
    "text": "so now if you update",
    "start": "768560",
    "end": "771279"
  },
  {
    "text": "the row let's say updated column one",
    "start": "771279",
    "end": "773440"
  },
  {
    "text": "value okay",
    "start": "773440",
    "end": "775440"
  },
  {
    "text": "and this is the row",
    "start": "775440",
    "end": "776959"
  },
  {
    "text": "row seven whatever it is",
    "start": "776959",
    "end": "779519"
  },
  {
    "text": "when we do an update to column one we",
    "start": "779519",
    "end": "782079"
  },
  {
    "text": "insert",
    "start": "782079",
    "end": "783279"
  },
  {
    "text": "a new",
    "start": "783279",
    "end": "784480"
  },
  {
    "text": "tuple in the heap and says okay",
    "start": "784480",
    "end": "788639"
  },
  {
    "text": "this is a new version of the row number",
    "start": "788639",
    "end": "790800"
  },
  {
    "text": "seven",
    "start": "790800",
    "end": "792160"
  },
  {
    "text": "and let's say it's seven dash",
    "start": "792160",
    "end": "794480"
  },
  {
    "text": "which is the the new tuple id right it",
    "start": "794480",
    "end": "796959"
  },
  {
    "text": "probably has a very long number",
    "start": "796959",
    "end": "798959"
  },
  {
    "text": "effectively it's called triple id",
    "start": "798959",
    "end": "801920"
  },
  {
    "text": "now",
    "start": "801920",
    "end": "803920"
  },
  {
    "text": "those indexes column one index column",
    "start": "803920",
    "end": "806560"
  },
  {
    "text": "two index column three index what will",
    "start": "806560",
    "end": "808639"
  },
  {
    "text": "happen",
    "start": "808639",
    "end": "810000"
  },
  {
    "text": "well i just changed column one",
    "start": "810000",
    "end": "814480"
  },
  {
    "text": "write datas because i updated it",
    "start": "814480",
    "end": "816959"
  },
  {
    "text": "i better go to column one index and",
    "start": "816959",
    "end": "820399"
  },
  {
    "text": "reshuffle",
    "start": "820399",
    "end": "821839"
  },
  {
    "text": "the b3",
    "start": "821839",
    "end": "823440"
  },
  {
    "text": "to include the column one because there",
    "start": "823440",
    "end": "825600"
  },
  {
    "text": "is a new value you need to insert it to",
    "start": "825600",
    "end": "829199"
  },
  {
    "text": "the appropriate node rebalance the b3 as",
    "start": "829199",
    "end": "833199"
  },
  {
    "text": "necessary and now you have",
    "start": "833199",
    "end": "835920"
  },
  {
    "text": "a new tree effectively a brand new tree",
    "start": "835920",
    "end": "839120"
  },
  {
    "text": "right",
    "start": "839120",
    "end": "840000"
  },
  {
    "text": "this could be a single page could this",
    "start": "840000",
    "end": "842160"
  },
  {
    "text": "could be a multiple i o page writing who",
    "start": "842160",
    "end": "845040"
  },
  {
    "text": "knows depends on the state of the tree",
    "start": "845040",
    "end": "847040"
  },
  {
    "text": "uh i made a course on on v3 right it's",
    "start": "847040",
    "end": "850240"
  },
  {
    "text": "an as i'm as a member on the video and",
    "start": "850240",
    "end": "852959"
  },
  {
    "text": "it's also available on my uh should be",
    "start": "852959",
    "end": "855519"
  },
  {
    "text": "course if you if you're interested to",
    "start": "855519",
    "end": "857680"
  },
  {
    "text": "learn more about beatrice in in a",
    "start": "857680",
    "end": "859760"
  },
  {
    "text": "fundamental way",
    "start": "859760",
    "end": "861600"
  },
  {
    "text": "so now we have this right",
    "start": "861600",
    "end": "863600"
  },
  {
    "text": "so that that that is kind of",
    "start": "863600",
    "end": "866160"
  },
  {
    "text": "understandable we need to update column",
    "start": "866160",
    "end": "867760"
  },
  {
    "text": "one",
    "start": "867760",
    "end": "869440"
  },
  {
    "text": "we also need to in to insert",
    "start": "869440",
    "end": "873519"
  },
  {
    "text": "the new tuple id to point to the row",
    "start": "873519",
    "end": "876880"
  },
  {
    "text": "that is latest right",
    "start": "876880",
    "end": "879279"
  },
  {
    "text": "the index should not point",
    "start": "879279",
    "end": "881440"
  },
  {
    "text": "to the old row anymore right well it",
    "start": "881440",
    "end": "883839"
  },
  {
    "text": "should we need to keep the entry in the",
    "start": "883839",
    "end": "886720"
  },
  {
    "text": "index where it points to the old row",
    "start": "886720",
    "end": "889760"
  },
  {
    "text": "because some other older transaction",
    "start": "889760",
    "end": "892000"
  },
  {
    "text": "might need to pull that old version",
    "start": "892000",
    "end": "896160"
  },
  {
    "text": "right and and that sql statement might",
    "start": "896160",
    "end": "899600"
  },
  {
    "text": "have done",
    "start": "899600",
    "end": "901199"
  },
  {
    "text": "an index uh a plan that is using the",
    "start": "901199",
    "end": "904800"
  },
  {
    "text": "index you cannot just update ch remove",
    "start": "904800",
    "end": "908320"
  },
  {
    "text": "the old tuple id pointer no you need to",
    "start": "908320",
    "end": "911360"
  },
  {
    "text": "insert a new",
    "start": "911360",
    "end": "913040"
  },
  {
    "text": "right version of the tuple",
    "start": "913040",
    "end": "915839"
  },
  {
    "text": "that points to the new tuple id so we",
    "start": "915839",
    "end": "918320"
  },
  {
    "text": "have effectively two now two versions",
    "start": "918320",
    "end": "920560"
  },
  {
    "text": "right",
    "start": "920560",
    "end": "922160"
  },
  {
    "text": "and that looks like that is",
    "start": "922160",
    "end": "925440"
  },
  {
    "text": "the understandable",
    "start": "925440",
    "end": "926399"
  },
  {
    "text": "is",
    "start": "926399",
    "end": "928480"
  },
  {
    "text": "unfortunately",
    "start": "928480",
    "end": "930000"
  },
  {
    "text": "you also need",
    "start": "930000",
    "end": "931920"
  },
  {
    "text": "to do the same exact thing for column",
    "start": "931920",
    "end": "934639"
  },
  {
    "text": "two index and column three index despite",
    "start": "934639",
    "end": "937680"
  },
  {
    "text": "you never",
    "start": "937680",
    "end": "939360"
  },
  {
    "text": "touching",
    "start": "939360",
    "end": "941120"
  },
  {
    "text": "that column two or column three you",
    "start": "941120",
    "end": "943600"
  },
  {
    "text": "never touched those values you updated",
    "start": "943600",
    "end": "945440"
  },
  {
    "text": "column one",
    "start": "945440",
    "end": "946720"
  },
  {
    "text": "yet you need to update the column two",
    "start": "946720",
    "end": "949360"
  },
  {
    "text": "index and column three index",
    "start": "949360",
    "end": "951839"
  },
  {
    "text": "within your total id the question is why",
    "start": "951839",
    "end": "955440"
  },
  {
    "text": "why do you need to update it",
    "start": "955440",
    "end": "957279"
  },
  {
    "text": "well because",
    "start": "957279",
    "end": "959040"
  },
  {
    "text": "new transactions",
    "start": "959040",
    "end": "960800"
  },
  {
    "text": "need to read the new row right if",
    "start": "960800",
    "end": "964880"
  },
  {
    "text": "if a new transaction started after all",
    "start": "964880",
    "end": "967360"
  },
  {
    "text": "this mess that we did and it used column",
    "start": "967360",
    "end": "970560"
  },
  {
    "text": "two index and we haven't updated the",
    "start": "970560",
    "end": "972800"
  },
  {
    "text": "tuple id",
    "start": "972800",
    "end": "974560"
  },
  {
    "text": "it will read the old tuple",
    "start": "974560",
    "end": "977360"
  },
  {
    "text": "right because that's what is in and",
    "start": "977360",
    "end": "979680"
  },
  {
    "text": "that's when it what is in it so you need",
    "start": "979680",
    "end": "982000"
  },
  {
    "text": "to update those pointers too",
    "start": "982000",
    "end": "984880"
  },
  {
    "text": "thus the",
    "start": "984880",
    "end": "986320"
  },
  {
    "text": "this all this referential integrity",
    "start": "986320",
    "end": "989040"
  },
  {
    "text": "becomes very challenging for postgres to",
    "start": "989040",
    "end": "992480"
  },
  {
    "text": "you know to ensure correctness but you",
    "start": "992480",
    "end": "994560"
  },
  {
    "text": "can imagine all the bugs that they got",
    "start": "994560",
    "end": "996880"
  },
  {
    "text": "through all the years to kind of finally",
    "start": "996880",
    "end": "998880"
  },
  {
    "text": "iron out",
    "start": "998880",
    "end": "1000560"
  },
  {
    "text": "but that's effectively",
    "start": "1000560",
    "end": "1002240"
  },
  {
    "text": "you see the problem here right",
    "start": "1002240",
    "end": "1004399"
  },
  {
    "text": "now any update",
    "start": "1004399",
    "end": "1006480"
  },
  {
    "text": "you get a new version and of course we",
    "start": "1006480",
    "end": "1008639"
  },
  {
    "text": "always have to keep the old version",
    "start": "1008639",
    "end": "1010399"
  },
  {
    "text": "so if you have any number of indexes",
    "start": "1010399",
    "end": "1013440"
  },
  {
    "text": "right",
    "start": "1013440",
    "end": "1014800"
  },
  {
    "text": "then you have to up make n updates",
    "start": "1014800",
    "end": "1017680"
  },
  {
    "text": "effective",
    "start": "1017680",
    "end": "1019440"
  },
  {
    "text": "now that is not always true",
    "start": "1019440",
    "end": "1022240"
  },
  {
    "start": "1020000",
    "end": "1190000"
  },
  {
    "text": "right because postgres have this",
    "start": "1022240",
    "end": "1024079"
  },
  {
    "text": "optimization it's called",
    "start": "1024079",
    "end": "1026240"
  },
  {
    "text": "hot",
    "start": "1026240",
    "end": "1027038"
  },
  {
    "text": "right heap only tumble when it is it",
    "start": "1027039",
    "end": "1029600"
  },
  {
    "text": "will be smart enough",
    "start": "1029600",
    "end": "1031280"
  },
  {
    "text": "if the field that you're effectively you",
    "start": "1031280",
    "end": "1034640"
  },
  {
    "text": "updated something column one",
    "start": "1034640",
    "end": "1036959"
  },
  {
    "text": "column two and column three",
    "start": "1036959",
    "end": "1040079"
  },
  {
    "text": "it will do an optimization not to update",
    "start": "1040079",
    "end": "1043839"
  },
  {
    "text": "the tuple id in column two and column",
    "start": "1043839",
    "end": "1045678"
  },
  {
    "text": "three and the only reason is because it",
    "start": "1045679",
    "end": "1048319"
  },
  {
    "text": "will have some sort of flags we'll say",
    "start": "1048319",
    "end": "1050880"
  },
  {
    "text": "okay let's keep the old tuple",
    "start": "1050880",
    "end": "1054480"
  },
  {
    "text": "but",
    "start": "1054480",
    "end": "1055520"
  },
  {
    "text": "in the heap we're going to add an",
    "start": "1055520",
    "end": "1057520"
  },
  {
    "text": "optimization that tells us hey by the",
    "start": "1057520",
    "end": "1059679"
  },
  {
    "text": "way we're going to do a pointer of 2 and",
    "start": "1059679",
    "end": "1061440"
  },
  {
    "text": "a new pointer and the multiple will",
    "start": "1061440",
    "end": "1064480"
  },
  {
    "text": "point to the new tuple right they do",
    "start": "1064480",
    "end": "1066559"
  },
  {
    "text": "this kind of optimization to effectively",
    "start": "1066559",
    "end": "1069360"
  },
  {
    "text": "do that however",
    "start": "1069360",
    "end": "1071039"
  },
  {
    "text": "this will not be",
    "start": "1071039",
    "end": "1073280"
  },
  {
    "text": "successful",
    "start": "1073280",
    "end": "1074640"
  },
  {
    "text": "if one",
    "start": "1074640",
    "end": "1075919"
  },
  {
    "text": "if you're",
    "start": "1075919",
    "end": "1076960"
  },
  {
    "text": "updating a field in which there isn't",
    "start": "1076960",
    "end": "1079840"
  },
  {
    "text": "any next one like column one and if",
    "start": "1079840",
    "end": "1082000"
  },
  {
    "text": "you're updating column one and it has an",
    "start": "1082000",
    "end": "1084400"
  },
  {
    "text": "index you have to update column one",
    "start": "1084400",
    "end": "1086000"
  },
  {
    "text": "index",
    "start": "1086000",
    "end": "1087280"
  },
  {
    "text": "period there is no heart of optimization",
    "start": "1087280",
    "end": "1089200"
  },
  {
    "text": "that i'm aware of at least right",
    "start": "1089200",
    "end": "1091600"
  },
  {
    "text": "because you have to reshuffle the tree",
    "start": "1091600",
    "end": "1093440"
  },
  {
    "text": "you have to update the actual tree",
    "start": "1093440",
    "end": "1095200"
  },
  {
    "text": "itself right",
    "start": "1095200",
    "end": "1096720"
  },
  {
    "text": "but other",
    "start": "1096720",
    "end": "1098240"
  },
  {
    "text": "indexes is the problem so",
    "start": "1098240",
    "end": "1100960"
  },
  {
    "text": "this is where",
    "start": "1100960",
    "end": "1102559"
  },
  {
    "text": "there's not enough time to talk about",
    "start": "1102559",
    "end": "1104000"
  },
  {
    "text": "all this but",
    "start": "1104000",
    "end": "1105200"
  },
  {
    "text": "it's all logic at the end of the if you",
    "start": "1105200",
    "end": "1107039"
  },
  {
    "text": "think about it right",
    "start": "1107039",
    "end": "1108559"
  },
  {
    "text": "this is where fill factor come into the",
    "start": "1108559",
    "end": "1111520"
  },
  {
    "text": "place you need to the page on which the",
    "start": "1111520",
    "end": "1114720"
  },
  {
    "text": "heap",
    "start": "1114720",
    "end": "1115600"
  },
  {
    "text": "stores the rose you need to fill it up",
    "start": "1115600",
    "end": "1118559"
  },
  {
    "text": "until certain extent so that this heap",
    "start": "1118559",
    "end": "1121679"
  },
  {
    "text": "only tuple",
    "start": "1121679",
    "end": "1123200"
  },
  {
    "text": "can benefit from this optimization",
    "start": "1123200",
    "end": "1125520"
  },
  {
    "text": "because the moment the update the tuple",
    "start": "1125520",
    "end": "1128080"
  },
  {
    "text": "jumps into another page",
    "start": "1128080",
    "end": "1130960"
  },
  {
    "text": "this is out of the question",
    "start": "1130960",
    "end": "1134000"
  },
  {
    "text": "but let's take hot optimization out of",
    "start": "1134000",
    "end": "1136240"
  },
  {
    "text": "the questions for now let's say that you",
    "start": "1136240",
    "end": "1139280"
  },
  {
    "text": "will end up with a lot",
    "start": "1139280",
    "end": "1141919"
  },
  {
    "text": "of these versions",
    "start": "1141919",
    "end": "1143520"
  },
  {
    "text": "that are effectively",
    "start": "1143520",
    "end": "1145280"
  },
  {
    "text": "bloat",
    "start": "1145280",
    "end": "1146480"
  },
  {
    "text": "these are available effectively just",
    "start": "1146480",
    "end": "1148160"
  },
  {
    "text": "version churn",
    "start": "1148160",
    "end": "1149440"
  },
  {
    "text": "where",
    "start": "1149440",
    "end": "1150799"
  },
  {
    "text": "column two and column three which",
    "start": "1150799",
    "end": "1153280"
  },
  {
    "text": "we didn't really touch we touched column",
    "start": "1153280",
    "end": "1155600"
  },
  {
    "text": "one yet they are",
    "start": "1155600",
    "end": "1157679"
  },
  {
    "text": "being updated with duplicate versions",
    "start": "1157679",
    "end": "1161520"
  },
  {
    "text": "right",
    "start": "1161520",
    "end": "1163600"
  },
  {
    "text": "so now we we have 10 20 30 40 70. if you",
    "start": "1163600",
    "end": "1167840"
  },
  {
    "text": "if you're in an",
    "start": "1167840",
    "end": "1169360"
  },
  {
    "text": "update",
    "start": "1169360",
    "end": "1170559"
  },
  {
    "text": "heavy",
    "start": "1170559",
    "end": "1171919"
  },
  {
    "text": "workload in postgres",
    "start": "1171919",
    "end": "1174799"
  },
  {
    "text": "be careful because of this if you're",
    "start": "1174799",
    "end": "1177520"
  },
  {
    "text": "updating the same row over and over and",
    "start": "1177520",
    "end": "1179520"
  },
  {
    "text": "over again especially in an automated",
    "start": "1179520",
    "end": "1181840"
  },
  {
    "text": "way yeah",
    "start": "1181840",
    "end": "1183760"
  },
  {
    "text": "that will kill the performance",
    "start": "1183760",
    "end": "1186720"
  },
  {
    "text": "and because now how powerful performance",
    "start": "1186720",
    "end": "1189520"
  },
  {
    "text": "would you we don't want to throw words",
    "start": "1189520",
    "end": "1191600"
  },
  {
    "start": "1190000",
    "end": "1460000"
  },
  {
    "text": "like that we need to understand what's",
    "start": "1191600",
    "end": "1193039"
  },
  {
    "text": "going on right so now",
    "start": "1193039",
    "end": "1195360"
  },
  {
    "text": "you will have",
    "start": "1195360",
    "end": "1197120"
  },
  {
    "text": "a lot of tuples pointing to the same row",
    "start": "1197120",
    "end": "1199919"
  },
  {
    "text": "right",
    "start": "1199919",
    "end": "1201120"
  },
  {
    "text": "now this makes sense if you have older",
    "start": "1201120",
    "end": "1203520"
  },
  {
    "text": "transaction that needs those old rows",
    "start": "1203520",
    "end": "1206480"
  },
  {
    "text": "but",
    "start": "1206480",
    "end": "1207600"
  },
  {
    "text": "most systems hopefully you don't have",
    "start": "1207600",
    "end": "1210880"
  },
  {
    "text": "those long transactions that are running",
    "start": "1210880",
    "end": "1213280"
  },
  {
    "text": "that are just",
    "start": "1213280",
    "end": "1214559"
  },
  {
    "text": "hanging and and preventing you from",
    "start": "1214559",
    "end": "1217360"
  },
  {
    "text": "removing those old rows",
    "start": "1217360",
    "end": "1220159"
  },
  {
    "text": "all tuples pieces",
    "start": "1220159",
    "end": "1221840"
  },
  {
    "text": "because you want to get rid of all this",
    "start": "1221840",
    "end": "1223520"
  },
  {
    "text": "old",
    "start": "1223520",
    "end": "1224400"
  },
  {
    "text": "dead stuff",
    "start": "1224400",
    "end": "1226880"
  },
  {
    "text": "definition of dead here is a row that",
    "start": "1226880",
    "end": "1229440"
  },
  {
    "text": "nobody will ever read because all the",
    "start": "1229440",
    "end": "1232640"
  },
  {
    "text": "transactions that started they're",
    "start": "1232640",
    "end": "1235280"
  },
  {
    "text": "supposed to see this old role are dead",
    "start": "1235280",
    "end": "1238880"
  },
  {
    "text": "or committed or rolled back they are",
    "start": "1238880",
    "end": "1241280"
  },
  {
    "text": "none",
    "start": "1241280",
    "end": "1242240"
  },
  {
    "text": "so this is where postgres kicks in",
    "start": "1242240",
    "end": "1245679"
  },
  {
    "text": "with a process called vacuum auto vacuum",
    "start": "1245679",
    "end": "1248320"
  },
  {
    "text": "to be specific and start cleaning up",
    "start": "1248320",
    "end": "1250320"
  },
  {
    "text": "those stuff so it's like all right we",
    "start": "1250320",
    "end": "1252240"
  },
  {
    "text": "have all this",
    "start": "1252240",
    "end": "1253679"
  },
  {
    "text": "jumbo",
    "start": "1253679",
    "end": "1255360"
  },
  {
    "text": "old dead rose",
    "start": "1255360",
    "end": "1258000"
  },
  {
    "text": "let's just remove them right it will",
    "start": "1258000",
    "end": "1260559"
  },
  {
    "text": "just start to start to physically mark",
    "start": "1260559",
    "end": "1263039"
  },
  {
    "text": "them as dead see they did it so that",
    "start": "1263039",
    "end": "1266559"
  },
  {
    "text": "oscars can use this space that's first",
    "start": "1266559",
    "end": "1270000"
  },
  {
    "text": "thing",
    "start": "1270000",
    "end": "1270799"
  },
  {
    "text": "uh to to to insert new rows right to",
    "start": "1270799",
    "end": "1273919"
  },
  {
    "text": "insert new index entries right",
    "start": "1273919",
    "end": "1277120"
  },
  {
    "text": "again we're worried about the index more",
    "start": "1277120",
    "end": "1279039"
  },
  {
    "text": "in this case right",
    "start": "1279039",
    "end": "1280720"
  },
  {
    "text": "in this particular situation",
    "start": "1280720",
    "end": "1283039"
  },
  {
    "text": "right",
    "start": "1283039",
    "end": "1284240"
  },
  {
    "text": "so postgres will do this",
    "start": "1284240",
    "end": "1286240"
  },
  {
    "text": "vacuum to clean up this thing",
    "start": "1286240",
    "end": "1289039"
  },
  {
    "text": "but we didn't really talk about what is",
    "start": "1289039",
    "end": "1290960"
  },
  {
    "text": "the problem if i have a lot of entries",
    "start": "1290960",
    "end": "1294480"
  },
  {
    "text": "that point to the same thing",
    "start": "1294480",
    "end": "1297520"
  },
  {
    "text": "what",
    "start": "1297520",
    "end": "1298799"
  },
  {
    "text": "let's be honest guys we're not really",
    "start": "1298799",
    "end": "1300480"
  },
  {
    "text": "worried about desk space right and this",
    "start": "1300480",
    "end": "1303280"
  },
  {
    "text": "in 2021 we're never worrying about uh",
    "start": "1303280",
    "end": "1306640"
  },
  {
    "text": "storage that have to be large and stuff",
    "start": "1306640",
    "end": "1309120"
  },
  {
    "text": "like that right we're not worrying about",
    "start": "1309120",
    "end": "1310640"
  },
  {
    "text": "that",
    "start": "1310640",
    "end": "1311600"
  },
  {
    "text": "we are",
    "start": "1311600",
    "end": "1312480"
  },
  {
    "text": "worried about",
    "start": "1312480",
    "end": "1314640"
  },
  {
    "text": "the",
    "start": "1314640",
    "end": "1315840"
  },
  {
    "text": "performance implication of having a lot",
    "start": "1315840",
    "end": "1318480"
  },
  {
    "text": "of rows",
    "start": "1318480",
    "end": "1319760"
  },
  {
    "text": "what is the problem",
    "start": "1319760",
    "end": "1321280"
  },
  {
    "text": "when you read vendors how do you read",
    "start": "1321280",
    "end": "1322559"
  },
  {
    "text": "then this you read it page by page right",
    "start": "1322559",
    "end": "1324799"
  },
  {
    "text": "you issue io and you get back a bunch of",
    "start": "1324799",
    "end": "1328400"
  },
  {
    "text": "data this is how the b3 works you get",
    "start": "1328400",
    "end": "1332000"
  },
  {
    "text": "the internal nodes and you use it to",
    "start": "1332000",
    "end": "1333679"
  },
  {
    "text": "traverse and find the leaf nodes and",
    "start": "1333679",
    "end": "1335600"
  },
  {
    "text": "then you start jumping jumping jumping",
    "start": "1335600",
    "end": "1337360"
  },
  {
    "text": "right but these jumps these are also ios",
    "start": "1337360",
    "end": "1340960"
  },
  {
    "text": "a single io gives you x amount of",
    "start": "1340960",
    "end": "1344159"
  },
  {
    "text": "content x amount of rows",
    "start": "1344159",
    "end": "1346640"
  },
  {
    "text": "and",
    "start": "1346640",
    "end": "1347679"
  },
  {
    "text": "the trick here is for your io to be",
    "start": "1347679",
    "end": "1349919"
  },
  {
    "text": "efficient so that it gives you things",
    "start": "1349919",
    "end": "1352400"
  },
  {
    "text": "that you actually you want",
    "start": "1352400",
    "end": "1355039"
  },
  {
    "text": "if your io started giving you",
    "start": "1355039",
    "end": "1358240"
  },
  {
    "text": "thousand duplicate versions that you",
    "start": "1358240",
    "end": "1361840"
  },
  {
    "text": "none of these",
    "start": "1361840",
    "end": "1363360"
  },
  {
    "text": "you actually need you're gonna start",
    "start": "1363360",
    "end": "1365360"
  },
  {
    "text": "throwing those out",
    "start": "1365360",
    "end": "1366880"
  },
  {
    "text": "and hey none of this stuff is actually",
    "start": "1366880",
    "end": "1369360"
  },
  {
    "text": "what i need let me do another i o",
    "start": "1369360",
    "end": "1372240"
  },
  {
    "text": "thousand all of them are duplicates",
    "start": "1372240",
    "end": "1374880"
  },
  {
    "text": "another thousand",
    "start": "1374880",
    "end": "1376559"
  },
  {
    "text": "all of them are duplicated and then",
    "start": "1376559",
    "end": "1378080"
  },
  {
    "text": "another io you get another thousand oh",
    "start": "1378080",
    "end": "1380159"
  },
  {
    "text": "the last one is actually the one i need",
    "start": "1380159",
    "end": "1381919"
  },
  {
    "text": "so you did three four r rows that are",
    "start": "1381919",
    "end": "1384320"
  },
  {
    "text": "useless so",
    "start": "1384320",
    "end": "1385919"
  },
  {
    "text": "the version churn",
    "start": "1385919",
    "end": "1388400"
  },
  {
    "text": "causes this problem effectively the more",
    "start": "1388400",
    "end": "1391280"
  },
  {
    "text": "i o slows things down",
    "start": "1391280",
    "end": "1393760"
  },
  {
    "text": "when things slow down",
    "start": "1393760",
    "end": "1395600"
  },
  {
    "text": "there is likely you feel it in your",
    "start": "1395600",
    "end": "1398640"
  },
  {
    "text": "queries and your select statements",
    "start": "1398640",
    "end": "1401600"
  },
  {
    "text": "and um guys to be broken pragmatic this",
    "start": "1401600",
    "end": "1405600"
  },
  {
    "text": "is really the things that slows down",
    "start": "1405600",
    "end": "1408720"
  },
  {
    "text": "applications right let's just be very",
    "start": "1408720",
    "end": "1410799"
  },
  {
    "text": "pragmatic postgres",
    "start": "1410799",
    "end": "1413200"
  },
  {
    "text": "this is yeah",
    "start": "1413200",
    "end": "1414640"
  },
  {
    "text": "if you have",
    "start": "1414640",
    "end": "1416080"
  },
  {
    "text": "designing an application that is like",
    "start": "1416080",
    "end": "1418480"
  },
  {
    "text": "three four millisecond latency and",
    "start": "1418480",
    "end": "1420720"
  },
  {
    "text": "you're getting an extra 10",
    "start": "1420720",
    "end": "1423200"
  },
  {
    "text": "you you want to shave those extra 10",
    "start": "1423200",
    "end": "1424960"
  },
  {
    "text": "milliseconds then you worry about this",
    "start": "1424960",
    "end": "1426960"
  },
  {
    "text": "most of the things based on my 15 16",
    "start": "1426960",
    "end": "1430000"
  },
  {
    "text": "years of experience is never the",
    "start": "1430000",
    "end": "1432320"
  },
  {
    "text": "database you know tuning when it comes",
    "start": "1432320",
    "end": "1434960"
  },
  {
    "text": "to these low level",
    "start": "1434960",
    "end": "1436720"
  },
  {
    "text": "you know efficiency things that the",
    "start": "1436720",
    "end": "1438400"
  },
  {
    "text": "database have to do it's most of the",
    "start": "1438400",
    "end": "1440320"
  },
  {
    "text": "time it's just a bad plan",
    "start": "1440320",
    "end": "1442799"
  },
  {
    "text": "a bad index a missing index or too many",
    "start": "1442799",
    "end": "1445760"
  },
  {
    "text": "indexes stuff like that it's always us",
    "start": "1445760",
    "end": "1448080"
  },
  {
    "text": "so is the back end application the",
    "start": "1448080",
    "end": "1450400"
  },
  {
    "text": "consumer",
    "start": "1450400",
    "end": "1451679"
  },
  {
    "text": "not knowing how to you know finesse the",
    "start": "1451679",
    "end": "1455440"
  },
  {
    "text": "database",
    "start": "1455440",
    "end": "1457360"
  },
  {
    "text": "postgres 14",
    "start": "1457360",
    "end": "1459039"
  },
  {
    "text": "this is all comes back to postgres 14",
    "start": "1459039",
    "end": "1462400"
  },
  {
    "start": "1460000",
    "end": "1626000"
  },
  {
    "text": "which is the new version that was",
    "start": "1462400",
    "end": "1463919"
  },
  {
    "text": "released back in september 2021",
    "start": "1463919",
    "end": "1466799"
  },
  {
    "text": "they",
    "start": "1466799",
    "end": "1468480"
  },
  {
    "text": "optimized this b3",
    "start": "1468480",
    "end": "1471039"
  },
  {
    "text": "called bottom up d3 deletion",
    "start": "1471039",
    "end": "1474720"
  },
  {
    "text": "where they detect during",
    "start": "1474720",
    "end": "1477760"
  },
  {
    "text": "a read operation",
    "start": "1477760",
    "end": "1480240"
  },
  {
    "text": "that oh some of those",
    "start": "1480240",
    "end": "1482799"
  },
  {
    "text": "version",
    "start": "1482799",
    "end": "1484080"
  },
  {
    "text": "churns",
    "start": "1484080",
    "end": "1485360"
  },
  {
    "text": "can be marked as deleted",
    "start": "1485360",
    "end": "1488240"
  },
  {
    "text": "during my read so that vacuum doesn't",
    "start": "1488240",
    "end": "1492080"
  },
  {
    "text": "have to kick in to consume cpu consume",
    "start": "1492080",
    "end": "1495760"
  },
  {
    "text": "memory to do this operation right",
    "start": "1495760",
    "end": "1499200"
  },
  {
    "text": "so instead",
    "start": "1499200",
    "end": "1500799"
  },
  {
    "text": "they",
    "start": "1500799",
    "end": "1501600"
  },
  {
    "text": "found a way",
    "start": "1501600",
    "end": "1503120"
  },
  {
    "text": "to minimize the version churn in an",
    "start": "1503120",
    "end": "1505679"
  },
  {
    "text": "update heavy workload where they",
    "start": "1505679",
    "end": "1508480"
  },
  {
    "text": "effectively uh",
    "start": "1508480",
    "end": "1510400"
  },
  {
    "text": "will will do this delete bottom up",
    "start": "1510400",
    "end": "1512960"
  },
  {
    "text": "deletion right as as they find new old",
    "start": "1512960",
    "end": "1516880"
  },
  {
    "text": "rows they will mark it as deleted and",
    "start": "1516880",
    "end": "1519279"
  },
  {
    "text": "obviously the",
    "start": "1519279",
    "end": "1520960"
  },
  {
    "text": "subsequent processes will clean those up",
    "start": "1520960",
    "end": "1523279"
  },
  {
    "text": "effectively but",
    "start": "1523279",
    "end": "1524720"
  },
  {
    "text": "the the trick is just to mark these old",
    "start": "1524720",
    "end": "1527679"
  },
  {
    "text": "stale version as deleted so that",
    "start": "1527679",
    "end": "1530240"
  },
  {
    "text": "first of all all the transactions can",
    "start": "1530240",
    "end": "1533200"
  },
  {
    "text": "just",
    "start": "1533200",
    "end": "1534240"
  },
  {
    "text": "don't worry about it right",
    "start": "1534240",
    "end": "1536240"
  },
  {
    "text": "we don't really need to worry about",
    "start": "1536240",
    "end": "1537600"
  },
  {
    "text": "these things and our ios will become",
    "start": "1537600",
    "end": "1540480"
  },
  {
    "text": "efficient well not straightforward",
    "start": "1540480",
    "end": "1543039"
  },
  {
    "text": "because you need to start inserting",
    "start": "1543039",
    "end": "1545919"
  },
  {
    "text": "some rows",
    "start": "1545919",
    "end": "1547520"
  },
  {
    "text": "in this blank space that we just deleted",
    "start": "1547520",
    "end": "1550799"
  },
  {
    "text": "right there is some work need to be done",
    "start": "1550799",
    "end": "1553200"
  },
  {
    "text": "if you think about it",
    "start": "1553200",
    "end": "1554799"
  },
  {
    "text": "right full vacuum will visually",
    "start": "1554799",
    "end": "1557919"
  },
  {
    "text": "reshuffle the fragment if you will this",
    "start": "1557919",
    "end": "1561600"
  },
  {
    "text": "empty space that is left as you start",
    "start": "1561600",
    "end": "1564240"
  },
  {
    "text": "deleting those stuff guys this is still",
    "start": "1564240",
    "end": "1567360"
  },
  {
    "text": "an area that i'm researching i'm",
    "start": "1567360",
    "end": "1569520"
  },
  {
    "text": "learning more about but it's just",
    "start": "1569520",
    "end": "1571360"
  },
  {
    "text": "fascinating the different decisions that",
    "start": "1571360",
    "end": "1574159"
  },
  {
    "text": "different database vendors make right",
    "start": "1574159",
    "end": "1577200"
  },
  {
    "text": "postgres with their post process book",
    "start": "1577200",
    "end": "1580000"
  },
  {
    "text": "vacuum",
    "start": "1580000",
    "end": "1581360"
  },
  {
    "text": "to clean things things up versus my",
    "start": "1581360",
    "end": "1583679"
  },
  {
    "text": "sequel where they're undo",
    "start": "1583679",
    "end": "1586159"
  },
  {
    "text": "files",
    "start": "1586159",
    "end": "1587200"
  },
  {
    "text": "but it's always you know older queries",
    "start": "1587200",
    "end": "1590400"
  },
  {
    "text": "will be slower in case of my sequel",
    "start": "1590400",
    "end": "1592480"
  },
  {
    "text": "postgres older squares will be",
    "start": "1592480",
    "end": "1595200"
  },
  {
    "text": "faster code and go",
    "start": "1595200",
    "end": "1596840"
  },
  {
    "text": "faster right",
    "start": "1596840",
    "end": "1599279"
  },
  {
    "text": "yeah that's what i want to talk about",
    "start": "1599279",
    "end": "1600960"
  },
  {
    "text": "guys today version churn in postgres and",
    "start": "1600960",
    "end": "1603919"
  },
  {
    "text": "how postgres 14",
    "start": "1603919",
    "end": "1606080"
  },
  {
    "text": "handles it hope you enjoyed this episode",
    "start": "1606080",
    "end": "1608880"
  },
  {
    "text": "and apologies for the audio quality i",
    "start": "1608880",
    "end": "1611360"
  },
  {
    "text": "don't think it's that great but",
    "start": "1611360",
    "end": "1614320"
  },
  {
    "text": "i'll be back soon",
    "start": "1614320",
    "end": "1616080"
  },
  {
    "text": "and to the office",
    "start": "1616080",
    "end": "1618000"
  },
  {
    "text": "and crank on some more content for you",
    "start": "1618000",
    "end": "1620159"
  },
  {
    "text": "guys you enjoyed this episode i'm gonna",
    "start": "1620159",
    "end": "1622240"
  },
  {
    "text": "see you in the next one you guys stay",
    "start": "1622240",
    "end": "1623440"
  },
  {
    "text": "awesome",
    "start": "1623440",
    "end": "1626440"
  }
]