[
  {
    "start": "0",
    "end": "135000"
  },
  {
    "text": "what's going on guys my name is hussain",
    "start": "80",
    "end": "2240"
  },
  {
    "text": "and we have some spicy back and",
    "start": "2240",
    "end": "4799"
  },
  {
    "text": "slash security news right here jack",
    "start": "4799",
    "end": "8320"
  },
  {
    "text": "miller discovered a very",
    "start": "8320",
    "end": "11719"
  },
  {
    "text": "interesting security flaw",
    "start": "11719",
    "end": "16160"
  },
  {
    "text": "with proxies and http 2 on the back end",
    "start": "16160",
    "end": "19920"
  },
  {
    "text": "specific version of http 2",
    "start": "19920",
    "end": "22560"
  },
  {
    "text": "that allows you to smuggle content using",
    "start": "22560",
    "end": "25279"
  },
  {
    "text": "tunneling",
    "start": "25279",
    "end": "26160"
  },
  {
    "text": "i'm going to explain all about it jake",
    "start": "26160",
    "end": "28880"
  },
  {
    "text": "miller uh let's give you",
    "start": "28880",
    "end": "30720"
  },
  {
    "text": "props he's a security researcher at",
    "start": "30720",
    "end": "32960"
  },
  {
    "text": "bishop fox",
    "start": "32960",
    "end": "34800"
  },
  {
    "text": "it's a very detailed article he",
    "start": "34800",
    "end": "38640"
  },
  {
    "text": "he actually went through uh uh",
    "start": "38640",
    "end": "41840"
  },
  {
    "text": "the details and and explained everything",
    "start": "41840",
    "end": "44879"
  },
  {
    "text": "with",
    "start": "44879",
    "end": "45200"
  },
  {
    "text": "with the examples and he give you the",
    "start": "45200",
    "end": "48079"
  },
  {
    "text": "code and proof of concept",
    "start": "48079",
    "end": "49920"
  },
  {
    "text": "so how about we jump into it guys and",
    "start": "49920",
    "end": "52320"
  },
  {
    "text": "explain",
    "start": "52320",
    "end": "53280"
  },
  {
    "text": "how it works right so i'm going to",
    "start": "53280",
    "end": "55360"
  },
  {
    "text": "reference the article",
    "start": "55360",
    "end": "56399"
  },
  {
    "text": "and jake's account below in the",
    "start": "56399",
    "end": "58960"
  },
  {
    "text": "description make sure to follow him",
    "start": "58960",
    "end": "60800"
  },
  {
    "text": "it's as a really really interesting",
    "start": "60800",
    "end": "64000"
  },
  {
    "text": "find so guys",
    "start": "64000",
    "end": "68080"
  },
  {
    "text": "when i first props to",
    "start": "68560",
    "end": "73200"
  },
  {
    "text": "tech strats from youtube guys uh",
    "start": "73200",
    "end": "77280"
  },
  {
    "text": "the extract commented commented on one",
    "start": "77280",
    "end": "79439"
  },
  {
    "text": "of the youtube channel hey hussain have",
    "start": "79439",
    "end": "80799"
  },
  {
    "text": "you heard about this htc",
    "start": "80799",
    "end": "82320"
  },
  {
    "text": "htc smugglers like what no i have not",
    "start": "82320",
    "end": "85200"
  },
  {
    "text": "let me check it",
    "start": "85200",
    "end": "86000"
  },
  {
    "text": "so and and to be honest when i first",
    "start": "86000",
    "end": "88240"
  },
  {
    "text": "read the title the title is a little bit",
    "start": "88240",
    "end": "90079"
  },
  {
    "text": "misleading",
    "start": "90079",
    "end": "91759"
  },
  {
    "text": "i'm not going to say misleading this",
    "start": "91759",
    "end": "93200"
  },
  {
    "text": "it's it's not as dangerous as the actual",
    "start": "93200",
    "end": "96000"
  },
  {
    "text": "article",
    "start": "96000",
    "end": "96640"
  },
  {
    "text": "that when i first read it so http 2 over",
    "start": "96640",
    "end": "99520"
  },
  {
    "text": "clear text we clearly block that",
    "start": "99520",
    "end": "101920"
  },
  {
    "text": "in all our browsers right so nobody can",
    "start": "101920",
    "end": "104880"
  },
  {
    "text": "actually communicate with http",
    "start": "104880",
    "end": "106560"
  },
  {
    "text": "to clear text out of the box",
    "start": "106560",
    "end": "109680"
  },
  {
    "text": "with with the clients now we know curl",
    "start": "109680",
    "end": "113200"
  },
  {
    "text": "blocks you browsers blocks you pretty",
    "start": "113200",
    "end": "115759"
  },
  {
    "text": "much any other out of the box",
    "start": "115759",
    "end": "118079"
  },
  {
    "text": "clients blocks you however",
    "start": "118079",
    "end": "121360"
  },
  {
    "text": "when i actually read the article i was",
    "start": "121360",
    "end": "123040"
  },
  {
    "text": "like holy",
    "start": "123040",
    "end": "125680"
  },
  {
    "text": "f because",
    "start": "126840",
    "end": "129360"
  },
  {
    "text": "it's a dangerous one and let's explain",
    "start": "129360",
    "end": "131760"
  },
  {
    "text": "it",
    "start": "131760",
    "end": "132720"
  },
  {
    "text": "so guys and he he he drew a very nice",
    "start": "132720",
    "end": "136640"
  },
  {
    "start": "135000",
    "end": "380000"
  },
  {
    "text": "diagram here i love this article i love",
    "start": "136640",
    "end": "139360"
  },
  {
    "text": "it",
    "start": "139360",
    "end": "140080"
  },
  {
    "text": "so detailed right and so great we talked",
    "start": "140080",
    "end": "143200"
  },
  {
    "text": "about guys",
    "start": "143200",
    "end": "144720"
  },
  {
    "text": "in order to understand this concept you",
    "start": "144720",
    "end": "146480"
  },
  {
    "text": "have to understand the concept of",
    "start": "146480",
    "end": "147920"
  },
  {
    "text": "protocol upgrade which i explained",
    "start": "147920",
    "end": "150959"
  },
  {
    "text": "in the websocket video right here go",
    "start": "150959",
    "end": "154080"
  },
  {
    "text": "watch that",
    "start": "154080",
    "end": "154800"
  },
  {
    "text": "okay so what we established between",
    "start": "154800",
    "end": "158319"
  },
  {
    "text": "the client and the server when i wanted",
    "start": "158319",
    "end": "161120"
  },
  {
    "text": "to establish",
    "start": "161120",
    "end": "162720"
  },
  {
    "text": "a tcp connection i use the three-way",
    "start": "162720",
    "end": "164720"
  },
  {
    "text": "handshake right and after that",
    "start": "164720",
    "end": "166640"
  },
  {
    "text": "i do the tls and after that i do",
    "start": "166640",
    "end": "170160"
  },
  {
    "text": "the http protocol and i send a get",
    "start": "170160",
    "end": "173840"
  },
  {
    "text": "request immediately",
    "start": "173840",
    "end": "175120"
  },
  {
    "text": "it requests http one and",
    "start": "175120",
    "end": "179120"
  },
  {
    "text": "if i want to hijack the tcp connection",
    "start": "179120",
    "end": "182080"
  },
  {
    "text": "for websocket use",
    "start": "182080",
    "end": "184080"
  },
  {
    "text": "then i do a protocol upgrade and i say",
    "start": "184080",
    "end": "187440"
  },
  {
    "text": "hey i want to whoops i use websocket and",
    "start": "187440",
    "end": "190959"
  },
  {
    "text": "the server assume there is no reverse",
    "start": "190959",
    "end": "193040"
  },
  {
    "text": "proxy here for simplicity",
    "start": "193040",
    "end": "194480"
  },
  {
    "text": "the server will reply back okay i",
    "start": "194480",
    "end": "196319"
  },
  {
    "text": "support websocket here we go",
    "start": "196319",
    "end": "198560"
  },
  {
    "text": "let's use this tcp connection as a pipe",
    "start": "198560",
    "end": "201440"
  },
  {
    "text": "as a dump",
    "start": "201440",
    "end": "202800"
  },
  {
    "text": "pipe for our content websocket",
    "start": "202800",
    "end": "205599"
  },
  {
    "text": "communication",
    "start": "205599",
    "end": "206400"
  },
  {
    "text": "we can no longer use it to send http",
    "start": "206400",
    "end": "208640"
  },
  {
    "text": "traffic we cannot you can use it for do",
    "start": "208640",
    "end": "210560"
  },
  {
    "text": "anything else",
    "start": "210560",
    "end": "211360"
  },
  {
    "text": "just pure websocket connection okay",
    "start": "211360",
    "end": "214560"
  },
  {
    "text": "so that's the idea it almost like",
    "start": "214560",
    "end": "216400"
  },
  {
    "text": "becomes like a tunnel",
    "start": "216400",
    "end": "217680"
  },
  {
    "text": "right so between the client and the the",
    "start": "217680",
    "end": "220480"
  },
  {
    "text": "server well there's no other",
    "start": "220480",
    "end": "222159"
  },
  {
    "text": "party so it's not really a tunnel so",
    "start": "222159",
    "end": "224720"
  },
  {
    "text": "what happened if i want to",
    "start": "224720",
    "end": "226080"
  },
  {
    "text": "inject a proxy in the middle",
    "start": "226080",
    "end": "229599"
  },
  {
    "text": "if we're going to inject a proxy and i'm",
    "start": "229599",
    "end": "231840"
  },
  {
    "text": "still talking about web sockets here",
    "start": "231840",
    "end": "233200"
  },
  {
    "text": "right forget the h2c",
    "start": "233200",
    "end": "234560"
  },
  {
    "text": "here if i want to",
    "start": "234560",
    "end": "238080"
  },
  {
    "text": "establish the connection first of all",
    "start": "238080",
    "end": "240959"
  },
  {
    "text": "i'm going to establish it with my",
    "start": "240959",
    "end": "242159"
  },
  {
    "text": "reverse proxy which is my final",
    "start": "242159",
    "end": "243680"
  },
  {
    "text": "destination as a client",
    "start": "243680",
    "end": "245120"
  },
  {
    "text": "right and i say okay tcp connection",
    "start": "245120",
    "end": "248239"
  },
  {
    "text": "right 3y handshake with the client and",
    "start": "248239",
    "end": "250400"
  },
  {
    "text": "then tls with that client and then",
    "start": "250400",
    "end": "252560"
  },
  {
    "text": "i'm going to send in a protocol upgrade",
    "start": "252560",
    "end": "254959"
  },
  {
    "text": "and say",
    "start": "254959",
    "end": "255680"
  },
  {
    "text": "hey let me switch protocol an nginx or",
    "start": "255680",
    "end": "259040"
  },
  {
    "text": "asia proxy or any printer",
    "start": "259040",
    "end": "260639"
  },
  {
    "text": "particular proxy listens at",
    "start": "260639",
    "end": "263840"
  },
  {
    "text": "if it's a layer 7 proxy which is i'm",
    "start": "263840",
    "end": "265759"
  },
  {
    "text": "talking about here",
    "start": "265759",
    "end": "266960"
  },
  {
    "text": "it listens for this event and it says",
    "start": "266960",
    "end": "270240"
  },
  {
    "text": "okay this is a switching protocol i need",
    "start": "270240",
    "end": "272320"
  },
  {
    "text": "to understand what this means",
    "start": "272320",
    "end": "274400"
  },
  {
    "text": "and it will forward the protocol upgrade",
    "start": "274400",
    "end": "277280"
  },
  {
    "text": "request",
    "start": "277280",
    "end": "277919"
  },
  {
    "text": "all the way to the backend okay",
    "start": "277919",
    "end": "281040"
  },
  {
    "text": "and the if the websocket back it",
    "start": "281040",
    "end": "283680"
  },
  {
    "text": "supports it it will reply back",
    "start": "283680",
    "end": "285680"
  },
  {
    "text": "and the nginx or the virtual proxy or or",
    "start": "285680",
    "end": "288639"
  },
  {
    "text": "envoy",
    "start": "288639",
    "end": "289520"
  },
  {
    "text": "it will listen to that and say okay we",
    "start": "289520",
    "end": "291840"
  },
  {
    "text": "just received",
    "start": "291840",
    "end": "293040"
  },
  {
    "text": "a response from the server that they are",
    "start": "293040",
    "end": "296080"
  },
  {
    "text": "wishing to communicate",
    "start": "296080",
    "end": "297360"
  },
  {
    "text": "in this protocol so they accepted the",
    "start": "297360",
    "end": "299440"
  },
  {
    "text": "connection",
    "start": "299440",
    "end": "300639"
  },
  {
    "text": "from now on i immediately flipped to a",
    "start": "300639",
    "end": "304080"
  },
  {
    "text": "layer for",
    "start": "304080",
    "end": "304720"
  },
  {
    "text": "proxy that's what most proxies do i",
    "start": "304720",
    "end": "307520"
  },
  {
    "text": "believe he proxy does",
    "start": "307520",
    "end": "308800"
  },
  {
    "text": "the same thing and njx does the same",
    "start": "308800",
    "end": "310400"
  },
  {
    "text": "thing just swipe it",
    "start": "310400",
    "end": "312160"
  },
  {
    "text": "flip to an to a mere",
    "start": "312160",
    "end": "315280"
  },
  {
    "text": "layer for proxy and what do we do with",
    "start": "315280",
    "end": "317039"
  },
  {
    "text": "therefore proxy we",
    "start": "317039",
    "end": "318560"
  },
  {
    "text": "we we basically stick the connection",
    "start": "318560",
    "end": "321280"
  },
  {
    "text": "right",
    "start": "321280",
    "end": "321680"
  },
  {
    "text": "so if i if i if you send anything to",
    "start": "321680",
    "end": "323440"
  },
  {
    "text": "this connection i will",
    "start": "323440",
    "end": "325280"
  },
  {
    "text": "pin you to this connection all the time",
    "start": "325280",
    "end": "327840"
  },
  {
    "text": "okay",
    "start": "327840",
    "end": "328320"
  },
  {
    "text": "assuming that these are two tcp",
    "start": "328320",
    "end": "330240"
  },
  {
    "text": "connection it's no longer",
    "start": "330240",
    "end": "332400"
  },
  {
    "text": "load uh load balance",
    "start": "332400",
    "end": "335759"
  },
  {
    "text": "per request it is load balance pair tcp",
    "start": "335759",
    "end": "339199"
  },
  {
    "text": "connection and that's it",
    "start": "339199",
    "end": "340160"
  },
  {
    "text": "any future request on this will always",
    "start": "340160",
    "end": "342639"
  },
  {
    "text": "go to the ctcp connection",
    "start": "342639",
    "end": "344479"
  },
  {
    "text": "thus almost establishing a channel so",
    "start": "344479",
    "end": "346880"
  },
  {
    "text": "that's how websocket work",
    "start": "346880",
    "end": "348240"
  },
  {
    "text": "so now if you send me a another request",
    "start": "348240",
    "end": "350639"
  },
  {
    "text": "on the websocket the",
    "start": "350639",
    "end": "351840"
  },
  {
    "text": "actual websocket content here i will",
    "start": "351840",
    "end": "354560"
  },
  {
    "text": "immediately just forward it blindly",
    "start": "354560",
    "end": "356479"
  },
  {
    "text": "i am not allowed to look i cannot do",
    "start": "356479",
    "end": "359520"
  },
  {
    "text": "anything",
    "start": "359520",
    "end": "360160"
  },
  {
    "text": "i can't even do any any of that stuff i",
    "start": "360160",
    "end": "362800"
  },
  {
    "text": "can't do any of that stuff right",
    "start": "362800",
    "end": "364319"
  },
  {
    "text": "this is a little bit different with tls",
    "start": "364319",
    "end": "366160"
  },
  {
    "text": "termination versus tls pass through when",
    "start": "366160",
    "end": "368240"
  },
  {
    "text": "it comes to that but let's simplify it",
    "start": "368240",
    "end": "369680"
  },
  {
    "text": "and say that's why",
    "start": "369680",
    "end": "371360"
  },
  {
    "text": "now let's come to the great",
    "start": "371360",
    "end": "374400"
  },
  {
    "text": "find here by jake",
    "start": "374400",
    "end": "378400"
  },
  {
    "text": "so here's what we do",
    "start": "378840",
    "end": "381840"
  },
  {
    "start": "380000",
    "end": "760000"
  },
  {
    "text": "assume you have a layer 7",
    "start": "381840",
    "end": "385039"
  },
  {
    "text": "reverse proxy and that has a lot of",
    "start": "385039",
    "end": "388479"
  },
  {
    "text": "access control",
    "start": "388479",
    "end": "389840"
  },
  {
    "text": "hey you shouldn't be able to access",
    "start": "389840",
    "end": "392080"
  },
  {
    "text": "slash admin",
    "start": "392080",
    "end": "393280"
  },
  {
    "text": "hey you shouldn't be able to access",
    "start": "393280",
    "end": "395039"
  },
  {
    "text": "slash internal",
    "start": "395039",
    "end": "396319"
  },
  {
    "text": "you shouldn't be access slash dashboard",
    "start": "396319",
    "end": "399120"
  },
  {
    "text": "if you're not in these ip addresses",
    "start": "399120",
    "end": "401199"
  },
  {
    "text": "there's a bunch of rules that you just",
    "start": "401199",
    "end": "403840"
  },
  {
    "text": "do",
    "start": "403840",
    "end": "404319"
  },
  {
    "text": "here and naturally",
    "start": "404319",
    "end": "407360"
  },
  {
    "text": "these rules do not exist on the backend",
    "start": "407360",
    "end": "409840"
  },
  {
    "text": "right we have done",
    "start": "409840",
    "end": "411360"
  },
  {
    "text": "countless literally countless of",
    "start": "411360",
    "end": "414000"
  },
  {
    "text": "applications like this in this channel",
    "start": "414000",
    "end": "415919"
  },
  {
    "text": "check out the proxies playlist here i",
    "start": "415919",
    "end": "417919"
  },
  {
    "text": "did this initial proxy i did this in",
    "start": "417919",
    "end": "419680"
  },
  {
    "text": "nginx i just did",
    "start": "419680",
    "end": "420880"
  },
  {
    "text": "i did this in traffic i did this in in",
    "start": "420880",
    "end": "424240"
  },
  {
    "text": "invoi right i'm about to do it in caddy",
    "start": "424240",
    "end": "426560"
  },
  {
    "text": "and and len kardeen pretty much",
    "start": "426560",
    "end": "428639"
  },
  {
    "text": "every single proxy right i'm ash ketchum",
    "start": "428639",
    "end": "431520"
  },
  {
    "text": "i'm going to catch them all",
    "start": "431520",
    "end": "432639"
  },
  {
    "text": "and proxies is the pokemon here let's do",
    "start": "432639",
    "end": "435280"
  },
  {
    "text": "this so",
    "start": "435280",
    "end": "437039"
  },
  {
    "text": "yeah so the indirects here have these",
    "start": "437039",
    "end": "439840"
  },
  {
    "text": "rules",
    "start": "439840",
    "end": "440880"
  },
  {
    "text": "and if i if i try to go to slash admin",
    "start": "440880",
    "end": "443360"
  },
  {
    "text": "obviously the nginx",
    "start": "443360",
    "end": "444639"
  },
  {
    "text": "looks terminates the traffic so it looks",
    "start": "444639",
    "end": "447199"
  },
  {
    "text": "at the content and says oh you want to",
    "start": "447199",
    "end": "448639"
  },
  {
    "text": "go to the slash admin",
    "start": "448639",
    "end": "450080"
  },
  {
    "text": "no sir you cannot because it's it looks",
    "start": "450080",
    "end": "452960"
  },
  {
    "text": "at layer 7 content right",
    "start": "452960",
    "end": "455479"
  },
  {
    "text": "however this is a case",
    "start": "455479",
    "end": "459840"
  },
  {
    "text": "with particular htc upgrade that",
    "start": "459840",
    "end": "464319"
  },
  {
    "text": "allows you to bypass this and it treats",
    "start": "464319",
    "end": "466560"
  },
  {
    "text": "it like a websocket",
    "start": "466560",
    "end": "468160"
  },
  {
    "text": "this case is essentially you're going to",
    "start": "468160",
    "end": "470000"
  },
  {
    "text": "send an upgrade header",
    "start": "470000",
    "end": "471520"
  },
  {
    "text": "but instead of saying whoop socket you",
    "start": "471520",
    "end": "473360"
  },
  {
    "text": "you see a you",
    "start": "473360",
    "end": "474560"
  },
  {
    "text": "you specify h2 clear text h2c",
    "start": "474560",
    "end": "479039"
  },
  {
    "text": "right and i didn't know that thing",
    "start": "479039",
    "end": "481280"
  },
  {
    "text": "exists before this article to be honest",
    "start": "481280",
    "end": "483280"
  },
  {
    "text": "like i thought h2 i thought we always",
    "start": "483280",
    "end": "486800"
  },
  {
    "text": "negotiate h2 with alpn application layer",
    "start": "486800",
    "end": "490080"
  },
  {
    "text": "protocol negotiation",
    "start": "490080",
    "end": "491039"
  },
  {
    "text": "which i have a video coming up tomorrow",
    "start": "491039",
    "end": "492720"
  },
  {
    "text": "on it by the way",
    "start": "492720",
    "end": "494080"
  },
  {
    "text": "right it's through the tls and handshake",
    "start": "494080",
    "end": "496960"
  },
  {
    "text": "we talked about this countless time guys",
    "start": "496960",
    "end": "498639"
  },
  {
    "text": "we talked about this when you",
    "start": "498639",
    "end": "500000"
  },
  {
    "text": "talk about the tls when we do the video",
    "start": "500000",
    "end": "503120"
  },
  {
    "text": "when we want to enable http 2 how do we",
    "start": "503120",
    "end": "505039"
  },
  {
    "text": "do it we say the server",
    "start": "505039",
    "end": "506960"
  },
  {
    "text": "yo server please enable alpn",
    "start": "506960",
    "end": "510319"
  },
  {
    "text": "and here are the protocol that you",
    "start": "510319",
    "end": "511919"
  },
  {
    "text": "support and during the tls handshake",
    "start": "511919",
    "end": "514320"
  },
  {
    "text": "we know we have knowledge now that we",
    "start": "514320",
    "end": "517120"
  },
  {
    "text": "support h2",
    "start": "517120",
    "end": "518320"
  },
  {
    "text": "this is a back door that i have no idea",
    "start": "518320",
    "end": "521839"
  },
  {
    "text": "that it",
    "start": "521839",
    "end": "522479"
  },
  {
    "text": "exists before this and here's what",
    "start": "522479",
    "end": "524720"
  },
  {
    "text": "happens",
    "start": "524720",
    "end": "525519"
  },
  {
    "text": "so you're going to do an upgrade header",
    "start": "525519",
    "end": "528880"
  },
  {
    "text": "and you specify h2c and then the reverse",
    "start": "528880",
    "end": "532000"
  },
  {
    "text": "proxy",
    "start": "532000",
    "end": "533519"
  },
  {
    "text": "here's the thing some reverse boxes do",
    "start": "533519",
    "end": "536480"
  },
  {
    "text": "not actually look at what are you",
    "start": "536480",
    "end": "538000"
  },
  {
    "text": "upgrading",
    "start": "538000",
    "end": "539360"
  },
  {
    "text": "and i believe all of them don't",
    "start": "539360",
    "end": "542560"
  },
  {
    "text": "i might be wrong correct me if you're",
    "start": "542560",
    "end": "545120"
  },
  {
    "text": "watching this",
    "start": "545120",
    "end": "547040"
  },
  {
    "text": "it will merely forward this to the back",
    "start": "547040",
    "end": "549279"
  },
  {
    "text": "end",
    "start": "549279",
    "end": "550720"
  },
  {
    "text": "and if your back end",
    "start": "550720",
    "end": "553760"
  },
  {
    "text": "support for any particular reason",
    "start": "553760",
    "end": "556320"
  },
  {
    "text": "protocol upgrade on hd2",
    "start": "556320",
    "end": "558160"
  },
  {
    "text": "h2c then let's say you you enabled it",
    "start": "558160",
    "end": "562080"
  },
  {
    "text": "for",
    "start": "562080",
    "end": "562399"
  },
  {
    "text": "for testing purposes right and like you",
    "start": "562399",
    "end": "564640"
  },
  {
    "text": "have a node.js",
    "start": "564640",
    "end": "565600"
  },
  {
    "text": "htv2 server i believe it supports it",
    "start": "565600",
    "end": "567680"
  },
  {
    "text": "right or anything",
    "start": "567680",
    "end": "570320"
  },
  {
    "text": "if it accepts that protocol upgrade then",
    "start": "570320",
    "end": "573680"
  },
  {
    "text": "it will respond back with a switching",
    "start": "573680",
    "end": "576000"
  },
  {
    "text": "protocol",
    "start": "576000",
    "end": "577200"
  },
  {
    "text": "right and that says okay let's switch",
    "start": "577200",
    "end": "579839"
  },
  {
    "text": "back to",
    "start": "579839",
    "end": "580720"
  },
  {
    "text": "h2 whatever this version right",
    "start": "580720",
    "end": "584399"
  },
  {
    "text": "and then the reverse proxy",
    "start": "584399",
    "end": "587680"
  },
  {
    "text": "will basically say okay i just received",
    "start": "587680",
    "end": "590240"
  },
  {
    "text": "the product a switch protocol",
    "start": "590240",
    "end": "591760"
  },
  {
    "text": "that means i i don't care anymore i'm",
    "start": "591760",
    "end": "594560"
  },
  {
    "text": "not going to look at the content",
    "start": "594560",
    "end": "596320"
  },
  {
    "text": "switching to layer 4 proxy here's the",
    "start": "596320",
    "end": "599440"
  },
  {
    "text": "problem",
    "start": "599440",
    "end": "600080"
  },
  {
    "text": "here's the exact problem we just",
    "start": "600080",
    "end": "601920"
  },
  {
    "text": "switched to a layer 4 proxy what does",
    "start": "601920",
    "end": "603440"
  },
  {
    "text": "that mean",
    "start": "603440",
    "end": "604800"
  },
  {
    "text": "now the client is hooked to the back end",
    "start": "604800",
    "end": "607839"
  },
  {
    "text": "with it almost like a virtual single tcp",
    "start": "607839",
    "end": "611040"
  },
  {
    "text": "connection it's not",
    "start": "611040",
    "end": "612160"
  },
  {
    "text": "it's two right it's between you and the",
    "start": "612160",
    "end": "614480"
  },
  {
    "text": "reverse proxy and reverse boxy n",
    "start": "614480",
    "end": "616480"
  },
  {
    "text": "and the back there is a configuration",
    "start": "616480",
    "end": "618480"
  },
  {
    "text": "where it will physically become one tcp",
    "start": "618480",
    "end": "620720"
  },
  {
    "text": "connection where it's a gateway nat",
    "start": "620720",
    "end": "622720"
  },
  {
    "text": "right but i'm not going to discuss it in",
    "start": "622720",
    "end": "624079"
  },
  {
    "text": "this video right",
    "start": "624079",
    "end": "626800"
  },
  {
    "text": "hr proxy is about that so now",
    "start": "626800",
    "end": "630880"
  },
  {
    "text": "the client will say okay i upgraded i'm",
    "start": "630880",
    "end": "633600"
  },
  {
    "text": "gonna send",
    "start": "633600",
    "end": "634720"
  },
  {
    "text": "an actual http to packet",
    "start": "634720",
    "end": "638000"
  },
  {
    "text": "this magix and all that stuff right",
    "start": "638000",
    "end": "641440"
  },
  {
    "text": "it doesn't matter because what does",
    "start": "641440",
    "end": "642959"
  },
  {
    "text": "nginx do it will not look at the content",
    "start": "642959",
    "end": "646000"
  },
  {
    "text": "anymore because guess what it doesn't",
    "start": "646000",
    "end": "647440"
  },
  {
    "text": "know if it's the http unknown",
    "start": "647440",
    "end": "649600"
  },
  {
    "text": "it does not care it treats it as layer 4",
    "start": "649600",
    "end": "652640"
  },
  {
    "text": "proxy so we'll just",
    "start": "652640",
    "end": "654000"
  },
  {
    "text": "merely follow the packet to the back end",
    "start": "654000",
    "end": "655839"
  },
  {
    "text": "and the packet will what",
    "start": "655839",
    "end": "657600"
  },
  {
    "text": "will just execute whatever you were",
    "start": "657600",
    "end": "659360"
  },
  {
    "text": "forwarded to so if you",
    "start": "659360",
    "end": "661600"
  },
  {
    "text": "can craft a client that supports",
    "start": "661600",
    "end": "666800"
  },
  {
    "text": "protocol upgrade with http http to",
    "start": "666800",
    "end": "670079"
  },
  {
    "text": "clear text and you were able to assemble",
    "start": "670079",
    "end": "673440"
  },
  {
    "text": "streams",
    "start": "673440",
    "end": "674320"
  },
  {
    "text": "because hdb2 is a bunch of streams check",
    "start": "674320",
    "end": "676480"
  },
  {
    "text": "out the video here if you want to learn",
    "start": "676480",
    "end": "677760"
  },
  {
    "text": "more about hdb2 guys",
    "start": "677760",
    "end": "679200"
  },
  {
    "text": "i made a full one hour video about that",
    "start": "679200",
    "end": "682000"
  },
  {
    "text": "so",
    "start": "682000",
    "end": "682399"
  },
  {
    "text": "it will start assembling a stream so i",
    "start": "682399",
    "end": "683920"
  },
  {
    "text": "can stream one i'm gonna make a get",
    "start": "683920",
    "end": "685200"
  },
  {
    "text": "request",
    "start": "685200",
    "end": "685760"
  },
  {
    "text": "here's the header for the stream here's",
    "start": "685760",
    "end": "687519"
  },
  {
    "text": "the header for the data",
    "start": "687519",
    "end": "688800"
  },
  {
    "text": "here's the headers for the headers and",
    "start": "688800",
    "end": "690720"
  },
  {
    "text": "all that stuff and then",
    "start": "690720",
    "end": "692959"
  },
  {
    "text": "send that tcp packet to the reverse",
    "start": "692959",
    "end": "695519"
  },
  {
    "text": "proxy and",
    "start": "695519",
    "end": "696320"
  },
  {
    "text": "nginx or hp proxy will just merely",
    "start": "696320",
    "end": "698800"
  },
  {
    "text": "forward it",
    "start": "698800",
    "end": "699920"
  },
  {
    "text": "to the to the backend and",
    "start": "699920",
    "end": "702959"
  },
  {
    "text": "the back instance back in under spanish",
    "start": "702959",
    "end": "704800"
  },
  {
    "text": "too it will",
    "start": "704800",
    "end": "706000"
  },
  {
    "text": "disassemble that okay oh this is a",
    "start": "706000",
    "end": "707760"
  },
  {
    "text": "stream oh let me oh you want to",
    "start": "707760",
    "end": "709440"
  },
  {
    "text": "stick you execute get slash admin sure",
    "start": "709440",
    "end": "712639"
  },
  {
    "text": "sir",
    "start": "712639",
    "end": "713279"
  },
  {
    "text": "here's slash admin because it doesn't",
    "start": "713279",
    "end": "716399"
  },
  {
    "text": "know",
    "start": "716399",
    "end": "717200"
  },
  {
    "text": "that it was supposed to block that the",
    "start": "717200",
    "end": "719600"
  },
  {
    "text": "blockage was here the blocking the rules",
    "start": "719600",
    "end": "721760"
  },
  {
    "text": "were here in this internet so i hope you",
    "start": "721760",
    "end": "723519"
  },
  {
    "text": "see you can see my mouse",
    "start": "723519",
    "end": "725279"
  },
  {
    "text": "that's yeah so yeah",
    "start": "725279",
    "end": "728320"
  },
  {
    "text": "so everything you just bypassed all the",
    "start": "728320",
    "end": "731680"
  },
  {
    "text": "stuff that's the summary of the article",
    "start": "731680",
    "end": "734639"
  },
  {
    "text": "guys",
    "start": "734639",
    "end": "735040"
  },
  {
    "text": "read it for more details jack did a",
    "start": "735040",
    "end": "737120"
  },
  {
    "text": "fantastic job",
    "start": "737120",
    "end": "738480"
  },
  {
    "text": "explaining examples and he wrote his own",
    "start": "738480",
    "end": "740720"
  },
  {
    "text": "client because guess what",
    "start": "740720",
    "end": "742480"
  },
  {
    "text": "you cannot do this in an out-of-the-box",
    "start": "742480",
    "end": "744480"
  },
  {
    "text": "client you cannot",
    "start": "744480",
    "end": "746079"
  },
  {
    "text": "he had to write his own client to do",
    "start": "746079",
    "end": "747680"
  },
  {
    "text": "this cheers",
    "start": "747680",
    "end": "751200"
  },
  {
    "text": "fantastic fine is this dangerous guys",
    "start": "753040",
    "end": "756399"
  },
  {
    "text": "i think it is i when i first read this",
    "start": "756399",
    "end": "759600"
  },
  {
    "text": "i was like clearstick seems to be who",
    "start": "759600",
    "end": "762320"
  },
  {
    "start": "760000",
    "end": "1124000"
  },
  {
    "text": "cares",
    "start": "762320",
    "end": "763200"
  },
  {
    "text": "nobody supports that stuff but no",
    "start": "763200",
    "end": "766959"
  },
  {
    "text": "some some web server supports it right",
    "start": "766959",
    "end": "770240"
  },
  {
    "text": "so if you're using normal nginx server",
    "start": "770240",
    "end": "772720"
  },
  {
    "text": "or whoops",
    "start": "772720",
    "end": "774079"
  },
  {
    "text": "that normal reverse proxies it will just",
    "start": "774079",
    "end": "778079"
  },
  {
    "text": "do whatever you say right i it doesn't",
    "start": "778079",
    "end": "781360"
  },
  {
    "text": "know like",
    "start": "781360",
    "end": "782079"
  },
  {
    "text": "it might you might have written your own",
    "start": "782079",
    "end": "785519"
  },
  {
    "text": "protocol",
    "start": "785519",
    "end": "786160"
  },
  {
    "text": "and you wish to upgrade it who is who is",
    "start": "786160",
    "end": "789440"
  },
  {
    "text": "nginx or who is hi proxy to block that",
    "start": "789440",
    "end": "791839"
  },
  {
    "text": "stuff",
    "start": "791839",
    "end": "792720"
  },
  {
    "text": "you shouldn't right so i might have",
    "start": "792720",
    "end": "794800"
  },
  {
    "text": "written my own",
    "start": "794800",
    "end": "796160"
  },
  {
    "text": "sexy h2 and i wanted to upgrade to sex",
    "start": "796160",
    "end": "799839"
  },
  {
    "text": "ch2",
    "start": "799839",
    "end": "801120"
  },
  {
    "text": "why are you blocking me from my sexy h2",
    "start": "801120",
    "end": "803600"
  },
  {
    "text": "no",
    "start": "803600",
    "end": "804240"
  },
  {
    "text": "don't right so that's why the these",
    "start": "804240",
    "end": "807279"
  },
  {
    "text": "hitters don't look at the content of the",
    "start": "807279",
    "end": "809120"
  },
  {
    "text": "upgrade",
    "start": "809120",
    "end": "810079"
  },
  {
    "text": "but it looks like you should",
    "start": "810079",
    "end": "814000"
  },
  {
    "text": "add a rule that listens to the upper",
    "start": "814000",
    "end": "816000"
  },
  {
    "text": "grade right",
    "start": "816000",
    "end": "817440"
  },
  {
    "text": "and and block h2c upgrade that's what",
    "start": "817440",
    "end": "820880"
  },
  {
    "text": "uh the mitigation should be right let's",
    "start": "820880",
    "end": "822880"
  },
  {
    "text": "read it through the mitigation what did",
    "start": "822880",
    "end": "824240"
  },
  {
    "text": "jake",
    "start": "824240",
    "end": "824720"
  },
  {
    "text": "i didn't read through that what did jx",
    "start": "824720",
    "end": "826639"
  },
  {
    "text": "support remedy",
    "start": "826639",
    "end": "829839"
  },
  {
    "text": "remediation to mitigate the risk of hdb",
    "start": "830160",
    "end": "832079"
  },
  {
    "text": "smuggling with the proxy",
    "start": "832079",
    "end": "833440"
  },
  {
    "text": "whoops it throw wood socket through",
    "start": "833440",
    "end": "835279"
  },
  {
    "text": "support require allow only",
    "start": "835279",
    "end": "838000"
  },
  {
    "text": "that's exactly what i said right only",
    "start": "838000",
    "end": "839920"
  },
  {
    "text": "allow",
    "start": "839920",
    "end": "841120"
  },
  {
    "text": "a boob socket upgrade if you if you want",
    "start": "841120",
    "end": "844079"
  },
  {
    "text": "to upgrade your sockets",
    "start": "844079",
    "end": "845440"
  },
  {
    "text": "allow only websocket upgrade right add a",
    "start": "845440",
    "end": "847680"
  },
  {
    "text": "rule that",
    "start": "847680",
    "end": "848480"
  },
  {
    "text": "blocks anything that that is not warp",
    "start": "848480",
    "end": "851519"
  },
  {
    "text": "socket right",
    "start": "851519",
    "end": "852480"
  },
  {
    "text": "if you if you support website if you",
    "start": "852480",
    "end": "854320"
  },
  {
    "text": "don't just block any upgrade header",
    "start": "854320",
    "end": "856079"
  },
  {
    "text": "altogether right and i'm gonna add a",
    "start": "856079",
    "end": "858880"
  },
  {
    "text": "third one",
    "start": "858880",
    "end": "860480"
  },
  {
    "text": "that jake forgot here if you have your",
    "start": "860480",
    "end": "863040"
  },
  {
    "text": "own upgrade header",
    "start": "863040",
    "end": "865519"
  },
  {
    "text": "for your custom rule for your custom",
    "start": "865519",
    "end": "867680"
  },
  {
    "text": "http",
    "start": "867680",
    "end": "868720"
  },
  {
    "text": "protocol your custom protocol then",
    "start": "868720",
    "end": "871839"
  },
  {
    "text": "also add that right not only add that",
    "start": "871839",
    "end": "875360"
  },
  {
    "text": "add whatever",
    "start": "875360",
    "end": "876320"
  },
  {
    "text": "you want to allow add allow this list of",
    "start": "876320",
    "end": "879040"
  },
  {
    "text": "protocols right",
    "start": "879040",
    "end": "880240"
  },
  {
    "text": "and that's essentially it guys and",
    "start": "880240",
    "end": "882800"
  },
  {
    "text": "here's the thing that is a",
    "start": "882800",
    "end": "884959"
  },
  {
    "text": "oh he actually made oh you love this",
    "start": "884959",
    "end": "888959"
  },
  {
    "text": "that is awesome he essentially",
    "start": "890639",
    "end": "894079"
  },
  {
    "text": "lists you all the protocols the reverse",
    "start": "894079",
    "end": "896959"
  },
  {
    "text": "proxies",
    "start": "896959",
    "end": "897680"
  },
  {
    "text": "oh yeah i talked about varnish as well i",
    "start": "897680",
    "end": "899440"
  },
  {
    "text": "made a video about varnish",
    "start": "899440",
    "end": "900800"
  },
  {
    "text": "right as a reverse proxy it's a caching",
    "start": "900800",
    "end": "903199"
  },
  {
    "text": "protocol",
    "start": "903199",
    "end": "903839"
  },
  {
    "text": "only but yeah so hi proxy forwards",
    "start": "903839",
    "end": "906480"
  },
  {
    "text": "upgrade by default so this is dangerous",
    "start": "906480",
    "end": "908880"
  },
  {
    "text": "traffic forwarded by default naster the",
    "start": "908880",
    "end": "911920"
  },
  {
    "text": "heck is naster",
    "start": "911920",
    "end": "913360"
  },
  {
    "text": "i have never heard of nasr before",
    "start": "913360",
    "end": "917519"
  },
  {
    "text": "aws never used it but i know off it",
    "start": "917519",
    "end": "920560"
  },
  {
    "text": "it does not forward upgrade header",
    "start": "920560",
    "end": "922320"
  },
  {
    "text": "injects does not forward by default",
    "start": "922320",
    "end": "924079"
  },
  {
    "text": "apache does not forward squid varnish",
    "start": "924079",
    "end": "926000"
  },
  {
    "text": "does not forward",
    "start": "926000",
    "end": "926959"
  },
  {
    "text": "invoice does not forward go envoy so",
    "start": "926959",
    "end": "929680"
  },
  {
    "text": "yeah you're good",
    "start": "929680",
    "end": "931040"
  },
  {
    "text": "if you're using these but just make sure",
    "start": "931040",
    "end": "933040"
  },
  {
    "text": "that you have not",
    "start": "933040",
    "end": "934240"
  },
  {
    "text": "configured in an insecure manner by",
    "start": "934240",
    "end": "936639"
  },
  {
    "text": "bypassing a",
    "start": "936639",
    "end": "937839"
  },
  {
    "text": "filter so there is a switch",
    "start": "937839",
    "end": "941360"
  },
  {
    "text": "right so during but can be configured",
    "start": "941360",
    "end": "944399"
  },
  {
    "text": "in a secure manner so make sure that",
    "start": "944399",
    "end": "946720"
  },
  {
    "text": "they are not configured that way",
    "start": "946720",
    "end": "948800"
  },
  {
    "text": "all right man this guy",
    "start": "948800",
    "end": "952160"
  },
  {
    "text": "he gives you he even gives you how to",
    "start": "952160",
    "end": "954560"
  },
  {
    "text": "fix it",
    "start": "954560",
    "end": "956240"
  },
  {
    "text": "man how long did it take you to write",
    "start": "956240",
    "end": "958399"
  },
  {
    "text": "this article",
    "start": "958399",
    "end": "959839"
  },
  {
    "text": "it must be a long time because you went",
    "start": "959839",
    "end": "962240"
  },
  {
    "text": "and did a lot of research",
    "start": "962240",
    "end": "964639"
  },
  {
    "text": "kudos jake great article guys what do",
    "start": "964639",
    "end": "967600"
  },
  {
    "text": "you think",
    "start": "967600",
    "end": "968000"
  },
  {
    "text": "about this um do you think it's as",
    "start": "968000",
    "end": "970480"
  },
  {
    "text": "dangerous as it sounds",
    "start": "970480",
    "end": "972079"
  },
  {
    "text": "i think it is to be honest because the",
    "start": "972079",
    "end": "974160"
  },
  {
    "text": "whip socket",
    "start": "974160",
    "end": "975120"
  },
  {
    "text": "and the web server on the on the back",
    "start": "975120",
    "end": "977040"
  },
  {
    "text": "end we don't know",
    "start": "977040",
    "end": "978959"
  },
  {
    "text": "guys we don't know this stuff right so",
    "start": "978959",
    "end": "982000"
  },
  {
    "text": "if you're using proxies",
    "start": "982000",
    "end": "985360"
  },
  {
    "text": "this is serious i think this is really",
    "start": "985360",
    "end": "987920"
  },
  {
    "text": "really serious hdb smuggling",
    "start": "987920",
    "end": "990079"
  },
  {
    "text": "guys i talked about http smuggling",
    "start": "990079",
    "end": "991839"
  },
  {
    "text": "normal http smuggling before",
    "start": "991839",
    "end": "994079"
  },
  {
    "text": "i i haven't mentioned this in the video",
    "start": "994079",
    "end": "995920"
  },
  {
    "text": "right http",
    "start": "995920",
    "end": "997519"
  },
  {
    "text": "too small to me this is way",
    "start": "997519",
    "end": "1000560"
  },
  {
    "text": "easier than http 21 smuggling",
    "start": "1000560",
    "end": "1003839"
  },
  {
    "text": "right i always said i should have",
    "start": "1003839",
    "end": "1006560"
  },
  {
    "text": "mentioned this in the beginning",
    "start": "1006560",
    "end": "1008160"
  },
  {
    "text": "http i always said if you want to avoid",
    "start": "1008160",
    "end": "1012079"
  },
  {
    "text": "http ones smuggling http smuggling",
    "start": "1012079",
    "end": "1015360"
  },
  {
    "text": "move to http 2 because you cannot there",
    "start": "1015360",
    "end": "1018079"
  },
  {
    "text": "is no",
    "start": "1018079",
    "end": "1018800"
  },
  {
    "text": "clear text uh beginning on end to",
    "start": "1018800",
    "end": "1022720"
  },
  {
    "text": "determine where the request starts and",
    "start": "1022720",
    "end": "1024798"
  },
  {
    "text": "where it ends we don't have this",
    "start": "1024799",
    "end": "1026400"
  },
  {
    "text": "this in http 2. in hdb1 we have to",
    "start": "1026400",
    "end": "1029918"
  },
  {
    "text": "do these hacky things or oh oh this is",
    "start": "1029919",
    "end": "1032240"
  },
  {
    "text": "the beginning of the header this is the",
    "start": "1032240",
    "end": "1033438"
  },
  {
    "text": "end of the request there's a new line",
    "start": "1033439",
    "end": "1035438"
  },
  {
    "text": "oh the content length this is oh this is",
    "start": "1035439",
    "end": "1037760"
  },
  {
    "text": "a",
    "start": "1037760",
    "end": "1038558"
  },
  {
    "text": "transfer chunk encoding this is the",
    "start": "1038559",
    "end": "1040880"
  },
  {
    "text": "limit",
    "start": "1040880",
    "end": "1041600"
  },
  {
    "text": "right of the wherever the last byte is",
    "start": "1041600",
    "end": "1044640"
  },
  {
    "text": "that's where the request begins and end",
    "start": "1044640",
    "end": "1047038"
  },
  {
    "text": "is a problem with http one",
    "start": "1047039",
    "end": "1048880"
  },
  {
    "text": "it's not with hdb2 because we have",
    "start": "1048880",
    "end": "1050640"
  },
  {
    "text": "streams it's dedicated",
    "start": "1050640",
    "end": "1052799"
  },
  {
    "text": "right we do not have this problem but",
    "start": "1052799",
    "end": "1054799"
  },
  {
    "text": "apparently we",
    "start": "1054799",
    "end": "1056000"
  },
  {
    "text": "do jack discovered that even http 2",
    "start": "1056000",
    "end": "1059039"
  },
  {
    "text": "clear text that is clear text can have",
    "start": "1059039",
    "end": "1062320"
  },
  {
    "text": "smuggling effects right",
    "start": "1062320",
    "end": "1064320"
  },
  {
    "text": "but this is way easier than that first",
    "start": "1064320",
    "end": "1067039"
  },
  {
    "text": "one",
    "start": "1067039",
    "end": "1067360"
  },
  {
    "text": "in my opinion the first one you had to",
    "start": "1067360",
    "end": "1070080"
  },
  {
    "text": "to craft",
    "start": "1070080",
    "end": "1071039"
  },
  {
    "text": "a malicious request and",
    "start": "1071039",
    "end": "1074160"
  },
  {
    "text": "hope that it came at the same time",
    "start": "1074160",
    "end": "1076400"
  },
  {
    "text": "there's a timing effect",
    "start": "1076400",
    "end": "1077919"
  },
  {
    "text": "that so that they came at the same time",
    "start": "1077919",
    "end": "1079760"
  },
  {
    "text": "so they they",
    "start": "1079760",
    "end": "1080960"
  },
  {
    "text": "they and share the same back and pool",
    "start": "1080960",
    "end": "1084400"
  },
  {
    "text": "tcp connection for it to take effect",
    "start": "1084400",
    "end": "1086960"
  },
  {
    "text": "it's so hard to",
    "start": "1086960",
    "end": "1088320"
  },
  {
    "text": "to execute in my opinion this one",
    "start": "1088320",
    "end": "1091360"
  },
  {
    "text": "you don't need anybody else you as the",
    "start": "1091360",
    "end": "1093280"
  },
  {
    "text": "attacker",
    "start": "1093280",
    "end": "1094720"
  },
  {
    "text": "you can access any back-end",
    "start": "1094720",
    "end": "1096559"
  },
  {
    "text": "infrastructure that is",
    "start": "1096559",
    "end": "1099280"
  },
  {
    "text": "shouldn't be able to access bypassing",
    "start": "1099280",
    "end": "1102080"
  },
  {
    "text": "all our proxy protocols",
    "start": "1102080",
    "end": "1104559"
  },
  {
    "text": "by using this upgrade so it is more",
    "start": "1104559",
    "end": "1106720"
  },
  {
    "text": "dangerous",
    "start": "1106720",
    "end": "1107679"
  },
  {
    "text": "and easier right to to achieve",
    "start": "1107679",
    "end": "1111280"
  },
  {
    "text": "all right guys that's it for me today uh",
    "start": "1111280",
    "end": "1113200"
  },
  {
    "text": "great article i loved it i",
    "start": "1113200",
    "end": "1114799"
  },
  {
    "text": "i loved it a lot um what do you guys",
    "start": "1114799",
    "end": "1117679"
  },
  {
    "text": "think",
    "start": "1117679",
    "end": "1118080"
  },
  {
    "text": "let me know in the comment section below",
    "start": "1118080",
    "end": "1120160"
  },
  {
    "text": "i'm gonna see you in the next one",
    "start": "1120160",
    "end": "1121600"
  },
  {
    "text": "you guys stay awesome have a great",
    "start": "1121600",
    "end": "1123679"
  },
  {
    "text": "friday",
    "start": "1123679",
    "end": "1126240"
  }
]