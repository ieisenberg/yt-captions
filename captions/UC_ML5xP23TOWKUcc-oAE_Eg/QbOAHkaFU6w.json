[
  {
    "start": "0",
    "end": "113000"
  },
  {
    "text": "cloudflare is moving from nginx their",
    "start": "0",
    "end": "3480"
  },
  {
    "text": "primary reverse proxy and caching needs",
    "start": "3480",
    "end": "7140"
  },
  {
    "text": "and even web server uh you know request",
    "start": "7140",
    "end": "10740"
  },
  {
    "text": "handling to their own homegrown reverse",
    "start": "10740",
    "end": "16080"
  },
  {
    "text": "proxy it's called pingora let's jump",
    "start": "16080",
    "end": "19020"
  },
  {
    "text": "into it and discuss this is very very",
    "start": "19020",
    "end": "21060"
  },
  {
    "text": "interesting as usual cloudfit is one of",
    "start": "21060",
    "end": "24300"
  },
  {
    "text": "the very few companies that actually",
    "start": "24300",
    "end": "26760"
  },
  {
    "text": "write",
    "start": "26760",
    "end": "28160"
  },
  {
    "text": "detailed technical",
    "start": "28160",
    "end": "30980"
  },
  {
    "text": "uh articles like this you know we as",
    "start": "30980",
    "end": "35280"
  },
  {
    "text": "Engineers starve for something like this",
    "start": "35280",
    "end": "37860"
  },
  {
    "text": "we really like this level of details",
    "start": "37860",
    "end": "40440"
  },
  {
    "text": "although admittedly their new proxy",
    "start": "40440",
    "end": "43379"
  },
  {
    "text": "pingora they did not explain how it",
    "start": "43379",
    "end": "46739"
  },
  {
    "text": "actually works they give us kind of a",
    "start": "46739",
    "end": "49320"
  },
  {
    "text": "flavor a hint you know a teaser and uh",
    "start": "49320",
    "end": "53460"
  },
  {
    "text": "boy we really need another uh a whole",
    "start": "53460",
    "end": "57079"
  },
  {
    "text": "brand new block just to talk about that",
    "start": "57079",
    "end": "60059"
  },
  {
    "text": "in this blog they focus on the problems",
    "start": "60059",
    "end": "63420"
  },
  {
    "text": "of nginx the deep architectural flaws",
    "start": "63420",
    "end": "67820"
  },
  {
    "text": "that they saw with nginx does that mean",
    "start": "67820",
    "end": "72119"
  },
  {
    "text": "that nginx sucks not at all it does not",
    "start": "72119",
    "end": "74939"
  },
  {
    "text": "mean that it's just the massive you know",
    "start": "74939",
    "end": "78860"
  },
  {
    "text": "trillion request HTTP layer 7 request",
    "start": "78860",
    "end": "83159"
  },
  {
    "text": "that uh that that cloudflare actually",
    "start": "83159",
    "end": "85920"
  },
  {
    "text": "receives as a Content management content",
    "start": "85920",
    "end": "89220"
  },
  {
    "text": "manager content delivery Network and as",
    "start": "89220",
    "end": "91680"
  },
  {
    "text": "a DDOS protection and many many other",
    "start": "91680",
    "end": "94560"
  },
  {
    "text": "stuff they they just run into a very",
    "start": "94560",
    "end": "97920"
  },
  {
    "text": "unique",
    "start": "97920",
    "end": "99200"
  },
  {
    "text": "cases that usually we don't see as you",
    "start": "99200",
    "end": "103200"
  },
  {
    "text": "know",
    "start": "103200",
    "end": "103979"
  },
  {
    "text": "simple backing Engineers you and I you",
    "start": "103979",
    "end": "106320"
  },
  {
    "text": "know let's get into it so there they",
    "start": "106320",
    "end": "109860"
  },
  {
    "text": "talk about",
    "start": "109860",
    "end": "111600"
  },
  {
    "text": "um nginx here the main use here is for",
    "start": "111600",
    "end": "116060"
  },
  {
    "start": "113000",
    "end": "217000"
  },
  {
    "text": "cloudflare is when you have a website",
    "start": "116060",
    "end": "119640"
  },
  {
    "text": "let's say stack Overflow which uses",
    "start": "119640",
    "end": "122220"
  },
  {
    "text": "but they use fastly but let's take them",
    "start": "122220",
    "end": "124500"
  },
  {
    "text": "as an example when they want to Cache",
    "start": "124500",
    "end": "128099"
  },
  {
    "text": "their content you know",
    "start": "128099",
    "end": "130259"
  },
  {
    "text": "they can hire fastly or any content or",
    "start": "130259",
    "end": "134040"
  },
  {
    "text": "let's say cloudflare what cloud referral",
    "start": "134040",
    "end": "137340"
  },
  {
    "text": "will do is we'll ask stack Overflow to",
    "start": "137340",
    "end": "141480"
  },
  {
    "text": "point their DNS IP addresses to and to",
    "start": "141480",
    "end": "144540"
  },
  {
    "text": "cloudflare right and they will",
    "start": "144540",
    "end": "146940"
  },
  {
    "text": "effectively terminate the traffic in",
    "start": "146940",
    "end": "149640"
  },
  {
    "text": "cloudflare",
    "start": "149640",
    "end": "150720"
  },
  {
    "text": "and then",
    "start": "150720",
    "end": "152760"
  },
  {
    "text": "establish the TCP connection to",
    "start": "152760",
    "end": "154860"
  },
  {
    "text": "cloudflare all users will go to",
    "start": "154860",
    "end": "157080"
  },
  {
    "text": "cloudflare the TLs connections and",
    "start": "157080",
    "end": "160080"
  },
  {
    "text": "encryption will go to cloudflare and",
    "start": "160080",
    "end": "162599"
  },
  {
    "text": "cloudflare will decrypt the connection",
    "start": "162599",
    "end": "164580"
  },
  {
    "text": "will decrypt their request we'll see",
    "start": "164580",
    "end": "167940"
  },
  {
    "text": "every single request that the the cloud",
    "start": "167940",
    "end": "170940"
  },
  {
    "text": "the customer said and then turn around",
    "start": "170940",
    "end": "173400"
  },
  {
    "text": "and look in their cache hey have anybody",
    "start": "173400",
    "end": "176340"
  },
  {
    "text": "asked for this before nope all right let",
    "start": "176340",
    "end": "180120"
  },
  {
    "text": "me go ahead and send the request to the",
    "start": "180120",
    "end": "182280"
  },
  {
    "text": "origin",
    "start": "182280",
    "end": "183180"
  },
  {
    "text": "right which is the actual stack Overflow",
    "start": "183180",
    "end": "186060"
  },
  {
    "text": "origin servers and that will basically",
    "start": "186060",
    "end": "188819"
  },
  {
    "text": "serve them and this is what they're",
    "start": "188819",
    "end": "190980"
  },
  {
    "text": "trying to optimize right the caching",
    "start": "190980",
    "end": "193379"
  },
  {
    "text": "request processing CPU latency request",
    "start": "193379",
    "end": "197519"
  },
  {
    "text": "pinning and back end connection",
    "start": "197519",
    "end": "200480"
  },
  {
    "text": "establishment to the origin servers so",
    "start": "200480",
    "end": "203580"
  },
  {
    "text": "that's what's happening right here again",
    "start": "203580",
    "end": "205260"
  },
  {
    "text": "stack of photo doesn't use cloudflare as",
    "start": "205260",
    "end": "207780"
  },
  {
    "text": "I believe they use fastly but I just",
    "start": "207780",
    "end": "210120"
  },
  {
    "text": "gave them an example of a popular",
    "start": "210120",
    "end": "211860"
  },
  {
    "text": "website",
    "start": "211860",
    "end": "213720"
  },
  {
    "text": "so they hear",
    "start": "213720",
    "end": "215220"
  },
  {
    "text": "you talk about why build another",
    "start": "215220",
    "end": "219420"
  },
  {
    "start": "217000",
    "end": "472000"
  },
  {
    "text": "over the years our usage nginx has run",
    "start": "219420",
    "end": "222959"
  },
  {
    "text": "up against limitations it's always like",
    "start": "222959",
    "end": "225599"
  },
  {
    "text": "when you use the out of the box",
    "start": "225599",
    "end": "226739"
  },
  {
    "text": "something out of the box uh",
    "start": "226739",
    "end": "229440"
  },
  {
    "text": "maybe 80 70 of the use cases will just",
    "start": "229440",
    "end": "232500"
  },
  {
    "text": "fit you right now nicely but you'll",
    "start": "232500",
    "end": "234840"
  },
  {
    "text": "always almost always gonna have a use",
    "start": "234840",
    "end": "237599"
  },
  {
    "text": "case where this product will not fit you",
    "start": "237599",
    "end": "240420"
  },
  {
    "text": "and you can customize it you can",
    "start": "240420",
    "end": "242819"
  },
  {
    "text": "configure it or you can end up just",
    "start": "242819",
    "end": "245220"
  },
  {
    "text": "building your own and this is always a",
    "start": "245220",
    "end": "248220"
  },
  {
    "text": "decision that an organization has to",
    "start": "248220",
    "end": "250260"
  },
  {
    "text": "make it's a very tough one right so I",
    "start": "250260",
    "end": "253019"
  },
  {
    "text": "want to talk about the architecture",
    "start": "253019",
    "end": "254519"
  },
  {
    "text": "limitation",
    "start": "254519",
    "end": "255979"
  },
  {
    "text": "uh that nginx has that at least",
    "start": "255979",
    "end": "260340"
  },
  {
    "text": "cloudflare ran into it's a very",
    "start": "260340",
    "end": "262620"
  },
  {
    "text": "interesting thing so in order to do that",
    "start": "262620",
    "end": "264900"
  },
  {
    "text": "I want to go to",
    "start": "264900",
    "end": "267479"
  },
  {
    "text": "nginx",
    "start": "267479",
    "end": "268979"
  },
  {
    "text": "website what how nginx works is it's a",
    "start": "268979",
    "end": "272639"
  },
  {
    "text": "very simple and elegant design they spin",
    "start": "272639",
    "end": "275699"
  },
  {
    "text": "up what they call worker processes an",
    "start": "275699",
    "end": "278460"
  },
  {
    "text": "actual dedicated processes those guys do",
    "start": "278460",
    "end": "282180"
  },
  {
    "text": "the actual work there is one master",
    "start": "282180",
    "end": "284400"
  },
  {
    "text": "process that actually spins up spawns",
    "start": "284400",
    "end": "286919"
  },
  {
    "text": "these child processors and these worker",
    "start": "286919",
    "end": "289620"
  },
  {
    "text": "processes usually they're one-to-one",
    "start": "289620",
    "end": "291300"
  },
  {
    "text": "with the number of cores that you have",
    "start": "291300",
    "end": "292979"
  },
  {
    "text": "in the CPU and whenever there is an a",
    "start": "292979",
    "end": "297300"
  },
  {
    "text": "request for a connection what will",
    "start": "297300",
    "end": "299639"
  },
  {
    "text": "happen is and I have another article",
    "start": "299639",
    "end": "301800"
  },
  {
    "text": "here that actually explained it better",
    "start": "301800",
    "end": "303180"
  },
  {
    "text": "what will happen here is the application",
    "start": "303180",
    "end": "305460"
  },
  {
    "text": "will we'll establish the connection",
    "start": "305460",
    "end": "307500"
  },
  {
    "text": "right the TCP connection and it will go",
    "start": "307500",
    "end": "309720"
  },
  {
    "text": "to the kernel first we'll go to the neck",
    "start": "309720",
    "end": "311460"
  },
  {
    "text": "and then from the kernel take it there",
    "start": "311460",
    "end": "314040"
  },
  {
    "text": "and then the kernel will start to",
    "start": "314040",
    "end": "315900"
  },
  {
    "text": "deliver this connection to the socket",
    "start": "315900",
    "end": "318720"
  },
  {
    "text": "listener right and this is the kind of",
    "start": "318720",
    "end": "321600"
  },
  {
    "text": "an advanced so really the common things",
    "start": "321600",
    "end": "324539"
  },
  {
    "text": "to do here where each worker process",
    "start": "324539",
    "end": "327539"
  },
  {
    "text": "right will have a listener socket and we",
    "start": "327539",
    "end": "331380"
  },
  {
    "text": "will they will listen on the same port",
    "start": "331380",
    "end": "333240"
  },
  {
    "text": "and you might say how how is how is it",
    "start": "333240",
    "end": "335639"
  },
  {
    "text": "that multiple worker processor will",
    "start": "335639",
    "end": "337320"
  },
  {
    "text": "listen to the same port that's an error",
    "start": "337320",
    "end": "338820"
  },
  {
    "text": "right well you can override that with",
    "start": "338820",
    "end": "340620"
  },
  {
    "text": "the the socket option uh Port reuse and",
    "start": "340620",
    "end": "343860"
  },
  {
    "text": "the kernel will just load balance these",
    "start": "343860",
    "end": "345900"
  },
  {
    "text": "uh connections on each except queue and",
    "start": "345900",
    "end": "350759"
  },
  {
    "text": "the worker will basically accept except",
    "start": "350759",
    "end": "353039"
  },
  {
    "text": "except right so this way will increase",
    "start": "353039",
    "end": "355199"
  },
  {
    "text": "the throughput as opposed to the old",
    "start": "355199",
    "end": "357360"
  },
  {
    "text": "model",
    "start": "357360",
    "end": "358320"
  },
  {
    "text": "where we have a single one and all of",
    "start": "358320",
    "end": "360780"
  },
  {
    "text": "these process will fight over a single",
    "start": "360780",
    "end": "363360"
  },
  {
    "text": "lesson will except on the same",
    "start": "363360",
    "end": "365639"
  },
  {
    "text": "shared socket file descriptor right and",
    "start": "365639",
    "end": "369479"
  },
  {
    "text": "then when they all fight on that there",
    "start": "369479",
    "end": "372360"
  },
  {
    "text": "is a contention that will happen here",
    "start": "372360",
    "end": "374340"
  },
  {
    "text": "right there is mutexes and you know it's",
    "start": "374340",
    "end": "376800"
  },
  {
    "text": "just it's an object memory the moment",
    "start": "376800",
    "end": "379080"
  },
  {
    "text": "you have two people fighting over it",
    "start": "379080",
    "end": "380699"
  },
  {
    "text": "they will get queued now whether this",
    "start": "380699",
    "end": "383100"
  },
  {
    "text": "approach is better versus this it's",
    "start": "383100",
    "end": "385500"
  },
  {
    "text": "still really debatable you know uh",
    "start": "385500",
    "end": "389639"
  },
  {
    "text": "this is back to the the concept of cues",
    "start": "389639",
    "end": "393360"
  },
  {
    "text": "when you go to a grocery store for",
    "start": "393360",
    "end": "395039"
  },
  {
    "text": "example and yeah when you go to work at",
    "start": "395039",
    "end": "396900"
  },
  {
    "text": "my grocery store there's an option we",
    "start": "396900",
    "end": "399600"
  },
  {
    "text": "have one queue and you have multiple",
    "start": "399600",
    "end": "401759"
  },
  {
    "text": "cashiers that is identical this is the",
    "start": "401759",
    "end": "403740"
  },
  {
    "text": "same thing here right we have multiple Q",
    "start": "403740",
    "end": "405600"
  },
  {
    "text": "multiple cashiers and one queue this",
    "start": "405600",
    "end": "408539"
  },
  {
    "text": "this can work the problem here is the",
    "start": "408539",
    "end": "411780"
  },
  {
    "text": "problem here is like you're gonna get a",
    "start": "411780",
    "end": "413280"
  },
  {
    "text": "low a very long queue right so naturally",
    "start": "413280",
    "end": "415680"
  },
  {
    "text": "say hey let's have multiple cues and",
    "start": "415680",
    "end": "418680"
  },
  {
    "text": "each queue will have basically its own",
    "start": "418680",
    "end": "422419"
  },
  {
    "text": "worker process which is its own cashier",
    "start": "422419",
    "end": "425400"
  },
  {
    "text": "effectively right so people will line up",
    "start": "425400",
    "end": "428100"
  },
  {
    "text": "right here but this is also has its own",
    "start": "428100",
    "end": "430919"
  },
  {
    "text": "limitation right but I don't want to go",
    "start": "430919",
    "end": "432720"
  },
  {
    "text": "into details here because what it what",
    "start": "432720",
    "end": "435180"
  },
  {
    "text": "if this cashier I don't know this this",
    "start": "435180",
    "end": "437940"
  },
  {
    "text": "guy payment process failing and he's",
    "start": "437940",
    "end": "440520"
  },
  {
    "text": "trying and he's giving another credit",
    "start": "440520",
    "end": "442919"
  },
  {
    "text": "card and all of these guys are now",
    "start": "442919",
    "end": "445199"
  },
  {
    "text": "blocked while these guys are not doing",
    "start": "445199",
    "end": "447539"
  },
  {
    "text": "anything yeah so technically you can say",
    "start": "447539",
    "end": "451560"
  },
  {
    "text": "in a real world just go to another line",
    "start": "451560",
    "end": "453479"
  },
  {
    "text": "and people will start jumping into other",
    "start": "453479",
    "end": "455460"
  },
  {
    "text": "lines here but it's very hard to do in",
    "start": "455460",
    "end": "457979"
  },
  {
    "text": "an operating system to jump between",
    "start": "457979",
    "end": "459599"
  },
  {
    "text": "lines Envoy actually I think believe do",
    "start": "459599",
    "end": "462780"
  },
  {
    "text": "that",
    "start": "462780",
    "end": "463560"
  },
  {
    "text": "and behind the scenes they can do",
    "start": "463560",
    "end": "466020"
  },
  {
    "text": "something called listen or balancing but",
    "start": "466020",
    "end": "467699"
  },
  {
    "text": "yeah I don't want to spend a lot of time",
    "start": "467699",
    "end": "469020"
  },
  {
    "text": "discussing this back to this the",
    "start": "469020",
    "end": "471599"
  },
  {
    "text": "architectural limitation is actually",
    "start": "471599",
    "end": "473819"
  },
  {
    "start": "472000",
    "end": "1032000"
  },
  {
    "text": "that",
    "start": "473819",
    "end": "474900"
  },
  {
    "text": "when it's in this configuration right",
    "start": "474900",
    "end": "477300"
  },
  {
    "text": "there is a chance where the request is",
    "start": "477300",
    "end": "480720"
  },
  {
    "text": "pinned the worker process will have many",
    "start": "480720",
    "end": "484259"
  },
  {
    "text": "many connections right because the",
    "start": "484259",
    "end": "486660"
  },
  {
    "text": "connections will be shared so requests",
    "start": "486660",
    "end": "489120"
  },
  {
    "text": "are sent on these connections",
    "start": "489120",
    "end": "491880"
  },
  {
    "text": "might be greedy some connections might",
    "start": "491880",
    "end": "495360"
  },
  {
    "text": "happen to have a very CPU intensive HTTP",
    "start": "495360",
    "end": "498900"
  },
  {
    "text": "request right",
    "start": "498900",
    "end": "501060"
  },
  {
    "text": "and it's it's doing a lot of work or a",
    "start": "501060",
    "end": "504660"
  },
  {
    "text": "blocking IO right and I can't think of",
    "start": "504660",
    "end": "507419"
  },
  {
    "text": "an HTTP request that is actually a CPU",
    "start": "507419",
    "end": "509580"
  },
  {
    "text": "on intensive in the caching layer right",
    "start": "509580",
    "end": "512399"
  },
  {
    "text": "I know it's a I suppose you can have",
    "start": "512399",
    "end": "515339"
  },
  {
    "text": "some Edge workers running on cloudflare",
    "start": "515339",
    "end": "517680"
  },
  {
    "text": "where some you know I know there's some",
    "start": "517680",
    "end": "521159"
  },
  {
    "text": "stuff that you can do to replace the",
    "start": "521159",
    "end": "524580"
  },
  {
    "text": "cache like you have version of the cache",
    "start": "524580",
    "end": "526620"
  },
  {
    "text": "but you cannot change it I don't know",
    "start": "526620",
    "end": "528240"
  },
  {
    "text": "what it's called the service worker is",
    "start": "528240",
    "end": "529620"
  },
  {
    "text": "that what it's called",
    "start": "529620",
    "end": "530940"
  },
  {
    "text": "service workers something else I don't",
    "start": "530940",
    "end": "533040"
  },
  {
    "text": "know what I'm thinking about right so",
    "start": "533040",
    "end": "535380"
  },
  {
    "text": "the the problem here is there is a there",
    "start": "535380",
    "end": "538380"
  },
  {
    "text": "can be a request that takes a lot of CPU",
    "start": "538380",
    "end": "540660"
  },
  {
    "text": "and and this will block the worker from",
    "start": "540660",
    "end": "544200"
  },
  {
    "text": "doing other stuff well these guys are",
    "start": "544200",
    "end": "546899"
  },
  {
    "text": "singing and happy and not doing anything",
    "start": "546899",
    "end": "549000"
  },
  {
    "text": "right",
    "start": "549000",
    "end": "550080"
  },
  {
    "text": "so this lack of load balancing is one of",
    "start": "550080",
    "end": "553800"
  },
  {
    "text": "the problems that they want to solve in",
    "start": "553800",
    "end": "556500"
  },
  {
    "text": "cloudflare they notice that hey it's",
    "start": "556500",
    "end": "558420"
  },
  {
    "text": "like we have one worker that is so heavy",
    "start": "558420",
    "end": "561480"
  },
  {
    "text": "you know with executing stuff but the",
    "start": "561480",
    "end": "564420"
  },
  {
    "text": "others are just not doing anything yeah",
    "start": "564420",
    "end": "566279"
  },
  {
    "text": "the other problem",
    "start": "566279",
    "end": "568880"
  },
  {
    "text": "is what is really most interesting to me",
    "start": "568880",
    "end": "572399"
  },
  {
    "text": "is the back end connection pooling you",
    "start": "572399",
    "end": "576120"
  },
  {
    "text": "know you see when you make a request to",
    "start": "576120",
    "end": "578820"
  },
  {
    "text": "nginx or any Universe proxy the reverse",
    "start": "578820",
    "end": "581279"
  },
  {
    "text": "proxy's job is to turn around and talk",
    "start": "581279",
    "end": "584279"
  },
  {
    "text": "to the actual origin server right",
    "start": "584279",
    "end": "588240"
  },
  {
    "text": "that's that's what a reverse proxy is",
    "start": "588240",
    "end": "590160"
  },
  {
    "text": "and in order to do that it needs to",
    "start": "590160",
    "end": "592080"
  },
  {
    "text": "establish a connection to the back end",
    "start": "592080",
    "end": "593700"
  },
  {
    "text": "which is this is the true back in here",
    "start": "593700",
    "end": "595320"
  },
  {
    "text": "right the server what happens here is",
    "start": "595320",
    "end": "597480"
  },
  {
    "text": "this is one worker this is another",
    "start": "597480",
    "end": "599519"
  },
  {
    "text": "worker this is another worker",
    "start": "599519",
    "end": "601500"
  },
  {
    "text": "each worker will have its own sets of",
    "start": "601500",
    "end": "605580"
  },
  {
    "text": "connection pool that that is already",
    "start": "605580",
    "end": "608880"
  },
  {
    "text": "established to the server what does that",
    "start": "608880",
    "end": "611279"
  },
  {
    "text": "mean it means that if a request came in",
    "start": "611279",
    "end": "613620"
  },
  {
    "text": "here",
    "start": "613620",
    "end": "615140"
  },
  {
    "text": "that worker must use one of these",
    "start": "615140",
    "end": "619500"
  },
  {
    "text": "Connections in its pool because these",
    "start": "619500",
    "end": "622200"
  },
  {
    "text": "pools are isolated right processes are",
    "start": "622200",
    "end": "624779"
  },
  {
    "text": "completely isolated yeah there is some",
    "start": "624779",
    "end": "626820"
  },
  {
    "text": "shared memory between them but",
    "start": "626820",
    "end": "628140"
  },
  {
    "text": "connection pools are not one of them so",
    "start": "628140",
    "end": "630959"
  },
  {
    "text": "if I turn around and if a request came",
    "start": "630959",
    "end": "632880"
  },
  {
    "text": "in here and it turns around and want to",
    "start": "632880",
    "end": "635760"
  },
  {
    "text": "talk to the server it has to use its own",
    "start": "635760",
    "end": "639300"
  },
  {
    "text": "connection pool and if there are there",
    "start": "639300",
    "end": "641580"
  },
  {
    "text": "isn't any connection or one of these are",
    "start": "641580",
    "end": "644160"
  },
  {
    "text": "busy then it has to establish a new",
    "start": "644160",
    "end": "646740"
  },
  {
    "text": "connection right although another worker",
    "start": "646740",
    "end": "652140"
  },
  {
    "text": "might have a connection that is already",
    "start": "652140",
    "end": "654019"
  },
  {
    "text": "hot and ready to be used but I cannot",
    "start": "654019",
    "end": "657660"
  },
  {
    "text": "use them and that's the major problem",
    "start": "657660",
    "end": "660560"
  },
  {
    "text": "that nginx and nginx that cloudflare",
    "start": "660560",
    "end": "664019"
  },
  {
    "text": "want to solve the repetitive",
    "start": "664019",
    "end": "666980"
  },
  {
    "text": "handshakes and TLS handshank to the back",
    "start": "666980",
    "end": "669839"
  },
  {
    "text": "end which is very expensive you know",
    "start": "669839",
    "end": "672959"
  },
  {
    "text": "it's not really expensive when it comes",
    "start": "672959",
    "end": "674700"
  },
  {
    "text": "like hey",
    "start": "674700",
    "end": "676500"
  },
  {
    "text": "if I establish one Connection in three",
    "start": "676500",
    "end": "678600"
  },
  {
    "text": "four ten it's not really but if you have",
    "start": "678600",
    "end": "681000"
  },
  {
    "text": "in hundreds of thousands actually it",
    "start": "681000",
    "end": "683579"
  },
  {
    "text": "really adds up so that's exactly what",
    "start": "683579",
    "end": "685860"
  },
  {
    "text": "they did here right so that's one flaw",
    "start": "685860",
    "end": "688800"
  },
  {
    "text": "and we're going to come to to how",
    "start": "688800",
    "end": "690779"
  },
  {
    "text": "exactly they sold they only",
    "start": "690779",
    "end": "693660"
  },
  {
    "text": "talked about how they solved that you",
    "start": "693660",
    "end": "696480"
  },
  {
    "text": "know",
    "start": "696480",
    "end": "697680"
  },
  {
    "text": "they also talked about like",
    "start": "697680",
    "end": "700260"
  },
  {
    "text": "the limitation of how nginx uses",
    "start": "700260",
    "end": "702720"
  },
  {
    "text": "processes instead of threads and",
    "start": "702720",
    "end": "706440"
  },
  {
    "text": "a process and thread are really very",
    "start": "706440",
    "end": "708899"
  },
  {
    "text": "similar in Linux so",
    "start": "708899",
    "end": "710579"
  },
  {
    "text": "um I was really surprised to know that",
    "start": "710579",
    "end": "711959"
  },
  {
    "text": "this was a limitation I guess but I",
    "start": "711959",
    "end": "714360"
  },
  {
    "text": "suppose the sharing model in Threads is",
    "start": "714360",
    "end": "717060"
  },
  {
    "text": "easier because by default when you when",
    "start": "717060",
    "end": "719399"
  },
  {
    "text": "you have a process and you smash the",
    "start": "719399",
    "end": "720779"
  },
  {
    "text": "thread threads and process the main",
    "start": "720779",
    "end": "722940"
  },
  {
    "text": "process have some sort of a shared",
    "start": "722940",
    "end": "725399"
  },
  {
    "text": "memory by default right",
    "start": "725399",
    "end": "728279"
  },
  {
    "text": "you can of course control that but if",
    "start": "728279",
    "end": "730620"
  },
  {
    "text": "you have different processes they each",
    "start": "730620",
    "end": "732779"
  },
  {
    "text": "have their own dedicated memory yeah you",
    "start": "732779",
    "end": "735240"
  },
  {
    "text": "can create a shared memory that's what",
    "start": "735240",
    "end": "736980"
  },
  {
    "text": "postgres does right it has a shared pool",
    "start": "736980",
    "end": "739920"
  },
  {
    "text": "and all of these guys share this memory",
    "start": "739920",
    "end": "743279"
  },
  {
    "text": "you can do that then once you do that",
    "start": "743279",
    "end": "745200"
  },
  {
    "text": "you have to have mutexes you have to",
    "start": "745200",
    "end": "747600"
  },
  {
    "text": "kind of serialize the stuff the access",
    "start": "747600",
    "end": "750740"
  },
  {
    "text": "you know",
    "start": "750740",
    "end": "752399"
  },
  {
    "text": "very interesting stuff and this is very",
    "start": "752399",
    "end": "754620"
  },
  {
    "text": "deep I'm going to really need to talk",
    "start": "754620",
    "end": "757200"
  },
  {
    "text": "about this stuff yeah",
    "start": "757200",
    "end": "759060"
  },
  {
    "text": "the difficult to add features right",
    "start": "759060",
    "end": "763019"
  },
  {
    "text": "you know when you add features this is a",
    "start": "763019",
    "end": "765180"
  },
  {
    "text": "problem that Google has you know with",
    "start": "765180",
    "end": "767399"
  },
  {
    "text": "Borg started with Borg really which is",
    "start": "767399",
    "end": "770459"
  },
  {
    "text": "their the kubernet is the original",
    "start": "770459",
    "end": "772200"
  },
  {
    "text": "kubernetes and they started like when",
    "start": "772200",
    "end": "775260"
  },
  {
    "text": "you develop a software you develop it",
    "start": "775260",
    "end": "777180"
  },
  {
    "text": "for your needs",
    "start": "777180",
    "end": "778560"
  },
  {
    "text": "so but if it's open source you have to",
    "start": "778560",
    "end": "781620"
  },
  {
    "text": "really",
    "start": "781620",
    "end": "782959"
  },
  {
    "text": "abstracted and that is really painful",
    "start": "782959",
    "end": "785639"
  },
  {
    "text": "dude you know because if you abstract",
    "start": "785639",
    "end": "788160"
  },
  {
    "text": "things then you add complexity because",
    "start": "788160",
    "end": "790980"
  },
  {
    "text": "instead of just doing the thing you",
    "start": "790980",
    "end": "793500"
  },
  {
    "text": "start have to now you have to",
    "start": "793500",
    "end": "794959"
  },
  {
    "text": "intellectualize and think about oh what",
    "start": "794959",
    "end": "798180"
  },
  {
    "text": "else could um someone how can I make",
    "start": "798180",
    "end": "800700"
  },
  {
    "text": "this abstract so that anybody can use",
    "start": "800700",
    "end": "802920"
  },
  {
    "text": "this feature and that's what kills most",
    "start": "802920",
    "end": "805800"
  },
  {
    "text": "you know it makes software complex",
    "start": "805800",
    "end": "808260"
  },
  {
    "text": "abstraction absolutely makes software",
    "start": "808260",
    "end": "810959"
  },
  {
    "text": "complex because now you have to kind of",
    "start": "810959",
    "end": "813839"
  },
  {
    "text": "think about oh you cannot just add this",
    "start": "813839",
    "end": "816480"
  },
  {
    "text": "feature because it's only you so now we",
    "start": "816480",
    "end": "818940"
  },
  {
    "text": "have to theorize okay how how someone",
    "start": "818940",
    "end": "822060"
  },
  {
    "text": "else can actually use this so now you",
    "start": "822060",
    "end": "823860"
  },
  {
    "text": "have to look at us introduce this answer",
    "start": "823860",
    "end": "825540"
  },
  {
    "text": "so that it can be fit and then it gets",
    "start": "825540",
    "end": "828540"
  },
  {
    "text": "confusing for people's like why do I",
    "start": "828540",
    "end": "830459"
  },
  {
    "text": "need this right but that's that's part",
    "start": "830459",
    "end": "832740"
  },
  {
    "text": "of it",
    "start": "832740",
    "end": "833639"
  },
  {
    "text": "and the other part is uh adding features",
    "start": "833639",
    "end": "837720"
  },
  {
    "text": "like",
    "start": "837720",
    "end": "838680"
  },
  {
    "text": "take retry and failing over for example",
    "start": "838680",
    "end": "841560"
  },
  {
    "text": "in nginx they have their own special",
    "start": "841560",
    "end": "843959"
  },
  {
    "text": "logic that okay if I want to talk to",
    "start": "843959",
    "end": "847139"
  },
  {
    "text": "if a if a request failed nginx just",
    "start": "847139",
    "end": "851220"
  },
  {
    "text": "retries the request there is an option",
    "start": "851220",
    "end": "853079"
  },
  {
    "text": "to retry",
    "start": "853079",
    "end": "854700"
  },
  {
    "text": "that doesn't work for cloudflare they",
    "start": "854700",
    "end": "857100"
  },
  {
    "text": "want a custom Logic for retrying and in",
    "start": "857100",
    "end": "862139"
  },
  {
    "text": "order to do that",
    "start": "862139",
    "end": "863639"
  },
  {
    "text": "like how do you do that how do you bake",
    "start": "863639",
    "end": "866160"
  },
  {
    "text": "this into nginx you have to add",
    "start": "866160",
    "end": "867899"
  },
  {
    "text": "configurations you have to add code",
    "start": "867899",
    "end": "870540"
  },
  {
    "text": "right I believe nginx has this thing",
    "start": "870540",
    "end": "872820"
  },
  {
    "text": "that's called Loa the language that you",
    "start": "872820",
    "end": "874800"
  },
  {
    "text": "can extend it I never used it",
    "start": "874800",
    "end": "877200"
  },
  {
    "text": "I think I used it once when I developed",
    "start": "877200",
    "end": "880019"
  },
  {
    "text": "a game",
    "start": "880019",
    "end": "881279"
  },
  {
    "text": "like I I purchased this tutorial to",
    "start": "881279",
    "end": "883800"
  },
  {
    "text": "build the games and that's the only time",
    "start": "883800",
    "end": "885420"
  },
  {
    "text": "I used lower but yeah it's a very",
    "start": "885420",
    "end": "887820"
  },
  {
    "text": "interesting that's apparently a problem",
    "start": "887820",
    "end": "889320"
  },
  {
    "text": "with cloudflare and extended that thing",
    "start": "889320",
    "end": "892560"
  },
  {
    "text": "so they they chose to build their own",
    "start": "892560",
    "end": "894959"
  },
  {
    "text": "and here's why they built their own they",
    "start": "894959",
    "end": "897839"
  },
  {
    "text": "had",
    "start": "897839",
    "end": "898560"
  },
  {
    "text": "basically the problems and they said",
    "start": "898560",
    "end": "902220"
  },
  {
    "text": "they had okay we have three Choice what",
    "start": "902220",
    "end": "904019"
  },
  {
    "text": "could we do and Gen X is a problem what",
    "start": "904019",
    "end": "906180"
  },
  {
    "text": "do we do",
    "start": "906180",
    "end": "907139"
  },
  {
    "text": "we can invest in nginx and possibly Fork",
    "start": "907139",
    "end": "909779"
  },
  {
    "text": "it to tailor it hundred percent to our",
    "start": "909779",
    "end": "911639"
  },
  {
    "text": "needs the problem is pushing those back",
    "start": "911639",
    "end": "915000"
  },
  {
    "text": "to Upstream is just",
    "start": "915000",
    "end": "917820"
  },
  {
    "text": "out of the question they cannot push",
    "start": "917820",
    "end": "919260"
  },
  {
    "text": "that because whatever they do is very",
    "start": "919260",
    "end": "921480"
  },
  {
    "text": "sticky to their architecture to",
    "start": "921480",
    "end": "923279"
  },
  {
    "text": "cloudflares right",
    "start": "923279",
    "end": "926180"
  },
  {
    "text": "I'm going to call something else but the",
    "start": "926480",
    "end": "928740"
  },
  {
    "text": "problem here the architecture limitation",
    "start": "928740",
    "end": "930600"
  },
  {
    "text": "they said hey this connection pool thing",
    "start": "930600",
    "end": "933000"
  },
  {
    "text": "the process model the way you share",
    "start": "933000",
    "end": "935279"
  },
  {
    "text": "memories just doesn't work for us dude",
    "start": "935279",
    "end": "937560"
  },
  {
    "text": "so it just doesn't scale and it's a",
    "start": "937560",
    "end": "940860"
  },
  {
    "text": "problem",
    "start": "940860",
    "end": "942000"
  },
  {
    "text": "so what do we do they said okay let's",
    "start": "942000",
    "end": "944459"
  },
  {
    "text": "use Envoy Envoy is a good it's a great",
    "start": "944459",
    "end": "947459"
  },
  {
    "text": "choice right and they took they did",
    "start": "947459",
    "end": "950880"
  },
  {
    "text": "definitely consider it they said again",
    "start": "950880",
    "end": "952380"
  },
  {
    "text": "let's migrate to a third party proxy",
    "start": "952380",
    "end": "954360"
  },
  {
    "text": "code base we're gonna completely migrate",
    "start": "954360",
    "end": "956279"
  },
  {
    "text": "your Envoy and others when you click on",
    "start": "956279",
    "end": "959639"
  },
  {
    "text": "others it says it's it's point to link",
    "start": "959639",
    "end": "962339"
  },
  {
    "text": "cardi I don't know why did they call it",
    "start": "962339",
    "end": "964320"
  },
  {
    "text": "they didn't just say link Rd it's just",
    "start": "964320",
    "end": "967320"
  },
  {
    "text": "uh",
    "start": "967320",
    "end": "969480"
  },
  {
    "text": "that link I don't know it's just a",
    "start": "969480",
    "end": "972180"
  },
  {
    "text": "little shady",
    "start": "972180",
    "end": "974240"
  },
  {
    "text": "but yeah but this path means that the",
    "start": "974240",
    "end": "977519"
  },
  {
    "text": "same cycle will repeat it's like like",
    "start": "977519",
    "end": "979139"
  },
  {
    "text": "what it what will happen in a few years",
    "start": "979139",
    "end": "980940"
  },
  {
    "text": "like what if Envoy we hit a block with",
    "start": "980940",
    "end": "984660"
  },
  {
    "text": "Envoy right",
    "start": "984660",
    "end": "987120"
  },
  {
    "text": "uh and the third options just start from",
    "start": "987120",
    "end": "989519"
  },
  {
    "text": "scratch and build it and that's what",
    "start": "989519",
    "end": "990899"
  },
  {
    "text": "they pick they say they we're gonna",
    "start": "990899",
    "end": "992399"
  },
  {
    "text": "rebuild the whole thing because the",
    "start": "992399",
    "end": "993959"
  },
  {
    "text": "architectury it doesn't scale you know",
    "start": "993959",
    "end": "996720"
  },
  {
    "text": "and and whatever",
    "start": "996720",
    "end": "998699"
  },
  {
    "text": "you have something that is",
    "start": "998699",
    "end": "1000320"
  },
  {
    "text": "architecturally flawed again flawed to",
    "start": "1000320",
    "end": "1003500"
  },
  {
    "text": "your needs doesn't mean nginx is bad",
    "start": "1003500",
    "end": "1006079"
  },
  {
    "text": "again I have to repeat this and DX is a",
    "start": "1006079",
    "end": "1008540"
  },
  {
    "text": "great proxy you know",
    "start": "1008540",
    "end": "1011740"
  },
  {
    "text": "and by the way when they mentioned the",
    "start": "1011740",
    "end": "1013880"
  },
  {
    "text": "word proxy here they really mean reverse",
    "start": "1013880",
    "end": "1016160"
  },
  {
    "text": "proxy you know but it's just employed",
    "start": "1016160",
    "end": "1019820"
  },
  {
    "text": "here because nobody use cloudflare as a",
    "start": "1019820",
    "end": "1022459"
  },
  {
    "text": "actual proxy you don't go to your uh I",
    "start": "1022459",
    "end": "1027438"
  },
  {
    "text": "suppose never do like you know you don't",
    "start": "1027439",
    "end": "1029058"
  },
  {
    "text": "go to your setting and you set",
    "start": "1029059",
    "end": "1030260"
  },
  {
    "text": "cloudflare in your proxy setting right",
    "start": "1030260",
    "end": "1032240"
  },
  {
    "start": "1032000",
    "end": "1515000"
  },
  {
    "text": "it's not that it's not a first proxy",
    "start": "1032240",
    "end": "1034880"
  },
  {
    "text": "it's just it's the final destination to",
    "start": "1034880",
    "end": "1037280"
  },
  {
    "text": "you and then it turns around it talks to",
    "start": "1037280",
    "end": "1040220"
  },
  {
    "text": "some origin server the pingora project",
    "start": "1040220",
    "end": "1042500"
  },
  {
    "text": "and they used rust and this is where",
    "start": "1042500",
    "end": "1045140"
  },
  {
    "text": "everybody really cares about I don't",
    "start": "1045140",
    "end": "1047058"
  },
  {
    "text": "really care about the language being",
    "start": "1047059",
    "end": "1049220"
  },
  {
    "text": "used to be honest I mean yeah it it",
    "start": "1049220",
    "end": "1051380"
  },
  {
    "text": "matters but by how much architecturally",
    "start": "1051380",
    "end": "1054860"
  },
  {
    "text": "is what matters to me right the language",
    "start": "1054860",
    "end": "1056780"
  },
  {
    "text": "really doesn't matter to me like okay",
    "start": "1056780",
    "end": "1058700"
  },
  {
    "text": "see rust okay there's security",
    "start": "1058700",
    "end": "1060679"
  },
  {
    "text": "consideration let's see and that Russ",
    "start": "1060679",
    "end": "1062900"
  },
  {
    "text": "solves",
    "start": "1062900",
    "end": "1064039"
  },
  {
    "text": "that is good a cell is not something",
    "start": "1064039",
    "end": "1066740"
  },
  {
    "text": "interesting to me there are a lot of",
    "start": "1066740",
    "end": "1068360"
  },
  {
    "text": "people are very excited that rust I",
    "start": "1068360",
    "end": "1070580"
  },
  {
    "text": "never use dust I know a lot of people",
    "start": "1070580",
    "end": "1071900"
  },
  {
    "text": "want me to cover rust maybe in the",
    "start": "1071900",
    "end": "1074780"
  },
  {
    "text": "future I'll try it and then see what uh",
    "start": "1074780",
    "end": "1078080"
  },
  {
    "text": "how is it differ but yeah and here they",
    "start": "1078080",
    "end": "1080720"
  },
  {
    "text": "talk about like how even losing rust you",
    "start": "1080720",
    "end": "1084020"
  },
  {
    "text": "know",
    "start": "1084020",
    "end": "1085000"
  },
  {
    "text": "the language you have to use libraries",
    "start": "1085000",
    "end": "1087500"
  },
  {
    "text": "that come with the language you don't",
    "start": "1087500",
    "end": "1089059"
  },
  {
    "text": "have to but you can right and the first",
    "start": "1089059",
    "end": "1091580"
  },
  {
    "text": "thing is like okay let's use the HTTP",
    "start": "1091580",
    "end": "1093140"
  },
  {
    "text": "Library definitely not an option for",
    "start": "1093140",
    "end": "1095600"
  },
  {
    "text": "cloudflare ISO it's like what you're not",
    "start": "1095600",
    "end": "1097280"
  },
  {
    "text": "going to use the the built-in",
    "start": "1097280",
    "end": "1099919"
  },
  {
    "text": "rust Library cloudflare you're never",
    "start": "1099919",
    "end": "1102500"
  },
  {
    "text": "going to do that of course it's your",
    "start": "1102500",
    "end": "1105380"
  },
  {
    "text": "bread and Butter's HDTV you cannot use a",
    "start": "1105380",
    "end": "1107900"
  },
  {
    "text": "baked and out of the box HTTP Library",
    "start": "1107900",
    "end": "1110299"
  },
  {
    "text": "you have to build your own so they did",
    "start": "1110299",
    "end": "1112100"
  },
  {
    "text": "they actually built their own rust HTTP",
    "start": "1112100",
    "end": "1115039"
  },
  {
    "text": "library because and they explain here",
    "start": "1115039",
    "end": "1117740"
  },
  {
    "text": "that the you know the web is you know",
    "start": "1117740",
    "end": "1120320"
  },
  {
    "text": "it's like it's wild and there are no",
    "start": "1120320",
    "end": "1123140"
  },
  {
    "text": "rules There are rules but not really",
    "start": "1123140",
    "end": "1125660"
  },
  {
    "text": "followed",
    "start": "1125660",
    "end": "1126740"
  },
  {
    "text": "and they want this flexibility to have",
    "start": "1126740",
    "end": "1128539"
  },
  {
    "text": "their own HTTP library because",
    "start": "1128539",
    "end": "1130760"
  },
  {
    "text": "the moment you use an HTTP Library it's",
    "start": "1130760",
    "end": "1132559"
  },
  {
    "text": "the same problem with the nginx right",
    "start": "1132559",
    "end": "1134539"
  },
  {
    "text": "you cannot just",
    "start": "1134539",
    "end": "1136900"
  },
  {
    "text": "request changes oh we're going to add",
    "start": "1136900",
    "end": "1139460"
  },
  {
    "text": "this let's talk to the library makers",
    "start": "1139460",
    "end": "1141440"
  },
  {
    "text": "have meetings and have discussions and",
    "start": "1141440",
    "end": "1144799"
  },
  {
    "text": "the worst thing ever you know it's like",
    "start": "1144799",
    "end": "1147080"
  },
  {
    "text": "oh yeah let's have a discussion let's",
    "start": "1147080",
    "end": "1148700"
  },
  {
    "text": "have a meeting let's have a month worth",
    "start": "1148700",
    "end": "1150440"
  },
  {
    "text": "of meeting so we can add in one line of",
    "start": "1150440",
    "end": "1152720"
  },
  {
    "text": "code",
    "start": "1152720",
    "end": "1153500"
  },
  {
    "text": "these are the wars you know this design",
    "start": "1153500",
    "end": "1156740"
  },
  {
    "text": "by committee thing it's just takes so",
    "start": "1156740",
    "end": "1160039"
  },
  {
    "text": "much time right",
    "start": "1160039",
    "end": "1162320"
  },
  {
    "text": "sometimes it's useful of course but yeah",
    "start": "1162320",
    "end": "1164419"
  },
  {
    "text": "and then they obviously move to",
    "start": "1164419",
    "end": "1167200"
  },
  {
    "text": "multi-threading over Market processing",
    "start": "1167200",
    "end": "1170419"
  },
  {
    "text": "in order to share resources especially",
    "start": "1170419",
    "end": "1172520"
  },
  {
    "text": "connection pools easily the word",
    "start": "1172520",
    "end": "1175700"
  },
  {
    "text": "emphasize on the word easily here right",
    "start": "1175700",
    "end": "1178700"
  },
  {
    "text": "because you can do it but uh it's not as",
    "start": "1178700",
    "end": "1184280"
  },
  {
    "text": "easily with multi-processing and this is",
    "start": "1184280",
    "end": "1186799"
  },
  {
    "text": "another interesting concept called work",
    "start": "1186799",
    "end": "1188660"
  },
  {
    "text": "stealing I never heard about it work",
    "start": "1188660",
    "end": "1190820"
  },
  {
    "text": "stealing is actually as the CPU level",
    "start": "1190820",
    "end": "1192919"
  },
  {
    "text": "when tasks are scheduled you know and",
    "start": "1192919",
    "end": "1196039"
  },
  {
    "text": "CPUs can actually be configured or I",
    "start": "1196039",
    "end": "1199700"
  },
  {
    "text": "suppose the processor itself can be",
    "start": "1199700",
    "end": "1201559"
  },
  {
    "text": "configured to steal work from other CPUs",
    "start": "1201559",
    "end": "1204740"
  },
  {
    "text": "that has q in them right and instead of",
    "start": "1204740",
    "end": "1207740"
  },
  {
    "text": "sitting idle there I don't know how it's",
    "start": "1207740",
    "end": "1209720"
  },
  {
    "text": "implemented but this is what it is",
    "start": "1209720",
    "end": "1211280"
  },
  {
    "text": "effectively so they do this as well so",
    "start": "1211280",
    "end": "1213799"
  },
  {
    "text": "even if the cores are imbalanced you",
    "start": "1213799",
    "end": "1216260"
  },
  {
    "text": "know that one chord is doing a lot of",
    "start": "1216260",
    "end": "1218059"
  },
  {
    "text": "stuff and the other cars are not doing",
    "start": "1218059",
    "end": "1219679"
  },
  {
    "text": "anything",
    "start": "1219679",
    "end": "1221000"
  },
  {
    "text": "the and I don't know who actually does",
    "start": "1221000",
    "end": "1224240"
  },
  {
    "text": "that but I suppose there's a monitor",
    "start": "1224240",
    "end": "1226640"
  },
  {
    "text": "process that monitors these jobs and",
    "start": "1226640",
    "end": "1229220"
  },
  {
    "text": "actually will shift okay hey you're not",
    "start": "1229220",
    "end": "1231080"
  },
  {
    "text": "doing anything just take take some cue",
    "start": "1231080",
    "end": "1233660"
  },
  {
    "text": "from this process and instead of",
    "start": "1233660",
    "end": "1235160"
  },
  {
    "text": "actually just don't don't do anything do",
    "start": "1235160",
    "end": "1238940"
  },
  {
    "text": "some stuff",
    "start": "1238940",
    "end": "1239960"
  },
  {
    "text": "and now",
    "start": "1239960",
    "end": "1241280"
  },
  {
    "text": "now we're talking about talking across",
    "start": "1241280",
    "end": "1243919"
  },
  {
    "text": "cores this is where no more architecture",
    "start": "1243919",
    "end": "1245960"
  },
  {
    "text": "comes into the picture and I don't know",
    "start": "1245960",
    "end": "1248900"
  },
  {
    "text": "the the cost of talking between cores",
    "start": "1248900",
    "end": "1252200"
  },
  {
    "text": "yes if you're using like uh M1 or M2 the",
    "start": "1252200",
    "end": "1256160"
  },
  {
    "text": "the the the the the the new Mac uh CPU",
    "start": "1256160",
    "end": "1261080"
  },
  {
    "text": "that that actually the sosc is so tucked",
    "start": "1261080",
    "end": "1265100"
  },
  {
    "text": "in with the RAM and all the cores the",
    "start": "1265100",
    "end": "1267440"
  },
  {
    "text": "cost between going to the cores and",
    "start": "1267440",
    "end": "1269600"
  },
  {
    "text": "stuff going to the bus is negligible",
    "start": "1269600",
    "end": "1271580"
  },
  {
    "text": "it's nothing so they made it really",
    "start": "1271580",
    "end": "1273440"
  },
  {
    "text": "really fast",
    "start": "1273440",
    "end": "1274760"
  },
  {
    "text": "but and then this is the most important",
    "start": "1274760",
    "end": "1276919"
  },
  {
    "text": "thing this is where you actually you're",
    "start": "1276919",
    "end": "1278419"
  },
  {
    "text": "here what did they change that's the",
    "start": "1278419",
    "end": "1280880"
  },
  {
    "text": "only thing that actually mentioned about",
    "start": "1280880",
    "end": "1282740"
  },
  {
    "text": "pingora architecturally",
    "start": "1282740",
    "end": "1285200"
  },
  {
    "text": "right that and that multi-threading",
    "start": "1285200",
    "end": "1287720"
  },
  {
    "text": "right so again this is this is not by",
    "start": "1287720",
    "end": "1289760"
  },
  {
    "text": "any mean a complete uh a complete",
    "start": "1289760",
    "end": "1293179"
  },
  {
    "text": "article so what they did is",
    "start": "1293179",
    "end": "1295419"
  },
  {
    "text": "they share all the all the threads share",
    "start": "1295419",
    "end": "1299960"
  },
  {
    "text": "the connection pools so even if you have",
    "start": "1299960",
    "end": "1301940"
  },
  {
    "text": "a request comes in here",
    "start": "1301940",
    "end": "1304700"
  },
  {
    "text": "and instead of each request sitting in a",
    "start": "1304700",
    "end": "1307400"
  },
  {
    "text": "thread and just being isolated right",
    "start": "1307400",
    "end": "1310640"
  },
  {
    "text": "just like nginx",
    "start": "1310640",
    "end": "1312260"
  },
  {
    "text": "and doesn't know about any other thing",
    "start": "1312260",
    "end": "1314299"
  },
  {
    "text": "no it actually can reuse the connection",
    "start": "1314299",
    "end": "1317179"
  },
  {
    "text": "pool that is just Global you know and",
    "start": "1317179",
    "end": "1320659"
  },
  {
    "text": "now of course you have to be careful",
    "start": "1320659",
    "end": "1322880"
  },
  {
    "text": "with this because accessing the",
    "start": "1322880",
    "end": "1325159"
  },
  {
    "text": "connection pool you have to really",
    "start": "1325159",
    "end": "1327500"
  },
  {
    "text": "still you need to to be careful two",
    "start": "1327500",
    "end": "1330919"
  },
  {
    "text": "threads accessing the same connection",
    "start": "1330919",
    "end": "1332179"
  },
  {
    "text": "now you cannot use like once you have a",
    "start": "1332179",
    "end": "1335059"
  },
  {
    "text": "connection",
    "start": "1335059",
    "end": "1335799"
  },
  {
    "text": "to send a request you cannot use another",
    "start": "1335799",
    "end": "1338840"
  },
  {
    "text": "thread to use the same connection you",
    "start": "1338840",
    "end": "1340580"
  },
  {
    "text": "have to be really be careful not",
    "start": "1340580",
    "end": "1343340"
  },
  {
    "text": "two threads taking the same connection",
    "start": "1343340",
    "end": "1345080"
  },
  {
    "text": "and",
    "start": "1345080",
    "end": "1346820"
  },
  {
    "text": "now",
    "start": "1346820",
    "end": "1348380"
  },
  {
    "text": "this could be",
    "start": "1348380",
    "end": "1350360"
  },
  {
    "text": "it depends right whether the backend is",
    "start": "1350360",
    "end": "1353419"
  },
  {
    "text": "hdb2 or not because you can do",
    "start": "1353419",
    "end": "1355940"
  },
  {
    "text": "multiplexing but this is a",
    "start": "1355940",
    "end": "1358940"
  },
  {
    "text": "complex",
    "start": "1358940",
    "end": "1360860"
  },
  {
    "text": "thing to discuss in in a few minutes",
    "start": "1360860",
    "end": "1363620"
  },
  {
    "text": "video so maybe in the future I'll go",
    "start": "1363620",
    "end": "1366320"
  },
  {
    "text": "into details but this is really cool you",
    "start": "1366320",
    "end": "1369559"
  },
  {
    "text": "know by reusing connection pool they",
    "start": "1369559",
    "end": "1373039"
  },
  {
    "text": "eliminated the need of establishing",
    "start": "1373039",
    "end": "1376419"
  },
  {
    "text": "connections to the backend so they went",
    "start": "1376419",
    "end": "1379159"
  },
  {
    "text": "from the connection reuse went from 87",
    "start": "1379159",
    "end": "1382280"
  },
  {
    "text": "to",
    "start": "1382280",
    "end": "1383140"
  },
  {
    "text": "99.92 that's huge really and their their",
    "start": "1383140",
    "end": "1388220"
  },
  {
    "text": "connections new connection to the origin",
    "start": "1388220",
    "end": "1390140"
  },
  {
    "text": "were reduced by 160",
    "start": "1390140",
    "end": "1392480"
  },
  {
    "text": "X",
    "start": "1392480",
    "end": "1393400"
  },
  {
    "text": "that's a lot so now here's another thing",
    "start": "1393400",
    "end": "1396980"
  },
  {
    "text": "we saved our customers and uses 434",
    "start": "1396980",
    "end": "1400400"
  },
  {
    "text": "years of handshake time every day that's",
    "start": "1400400",
    "end": "1403580"
  },
  {
    "text": "a lot of handshakes but yeah so they",
    "start": "1403580",
    "end": "1406400"
  },
  {
    "text": "talk about now here the more features",
    "start": "1406400",
    "end": "1407900"
  },
  {
    "text": "they're adding HTTP Upstream you know",
    "start": "1407900",
    "end": "1411679"
  },
  {
    "text": "they easily added that why do they",
    "start": "1411679",
    "end": "1414440"
  },
  {
    "text": "support HTTP stream that's what Envoy",
    "start": "1414440",
    "end": "1416419"
  },
  {
    "text": "does by the way but that's where they",
    "start": "1416419",
    "end": "1419179"
  },
  {
    "text": "you know Envoy really like to talk about",
    "start": "1419179",
    "end": "1422000"
  },
  {
    "text": "that having HTTP stream why because grpc",
    "start": "1422000",
    "end": "1424640"
  },
  {
    "text": "and grpc is the basically the",
    "start": "1424640",
    "end": "1428179"
  },
  {
    "text": "the I guess the de facto right now I",
    "start": "1428179",
    "end": "1431600"
  },
  {
    "text": "know there's a Apache Thrift but now",
    "start": "1431600",
    "end": "1433820"
  },
  {
    "text": "grpc is the de facto communication when",
    "start": "1433820",
    "end": "1436159"
  },
  {
    "text": "it comes to microservices and",
    "start": "1436159",
    "end": "1438559"
  },
  {
    "text": "uh things like that Envoy always uses",
    "start": "1438559",
    "end": "1442400"
  },
  {
    "text": "it's the de facto service mesh right",
    "start": "1442400",
    "end": "1445220"
  },
  {
    "text": "that and also Linker d right",
    "start": "1445220",
    "end": "1448280"
  },
  {
    "text": "and when when two Services want to talk",
    "start": "1448280",
    "end": "1450500"
  },
  {
    "text": "to each other it's proxies talking to",
    "start": "1450500",
    "end": "1452480"
  },
  {
    "text": "each other so everything is almost grpc",
    "start": "1452480",
    "end": "1455240"
  },
  {
    "text": "so now grpc is very critical and when",
    "start": "1455240",
    "end": "1458480"
  },
  {
    "text": "when your back end is behind cloudflare",
    "start": "1458480",
    "end": "1461900"
  },
  {
    "text": "you can use grpc again this is grpc at",
    "start": "1461900",
    "end": "1465380"
  },
  {
    "text": "layer 7. obviously nobody's talking",
    "start": "1465380",
    "end": "1467480"
  },
  {
    "text": "about that because it's always implied",
    "start": "1467480",
    "end": "1470059"
  },
  {
    "text": "grpc at layer 4 is useless because it's",
    "start": "1470059",
    "end": "1472340"
  },
  {
    "text": "just so consuming you need to have grpc",
    "start": "1472340",
    "end": "1476960"
  },
  {
    "text": "at layer 7 so that messages sent or",
    "start": "1476960",
    "end": "1479960"
  },
  {
    "text": "actually understood by the by the proxy",
    "start": "1479960",
    "end": "1482600"
  },
  {
    "text": "and turn around terminated and talk to",
    "start": "1482600",
    "end": "1484880"
  },
  {
    "text": "the back end all right guys I'm gonna",
    "start": "1484880",
    "end": "1486440"
  },
  {
    "text": "stop right here this is this is a very",
    "start": "1486440",
    "end": "1489440"
  },
  {
    "text": "lengthy article you know talking about",
    "start": "1489440",
    "end": "1491600"
  },
  {
    "text": "detail stuff still is missing a lot of",
    "start": "1491600",
    "end": "1494000"
  },
  {
    "text": "juice I want juice clefair give us some",
    "start": "1494000",
    "end": "1497059"
  },
  {
    "text": "juice about pingora more juice is",
    "start": "1497059",
    "end": "1500179"
  },
  {
    "text": "required thank you so much and uh I'm",
    "start": "1500179",
    "end": "1502880"
  },
  {
    "text": "back I wasn't on vacation for a month I",
    "start": "1502880",
    "end": "1505159"
  },
  {
    "text": "went to Bahrain to visit my family and",
    "start": "1505159",
    "end": "1507860"
  },
  {
    "text": "now we're back so videos will be resumed",
    "start": "1507860",
    "end": "1510440"
  },
  {
    "text": "as usual when I had the time of course",
    "start": "1510440",
    "end": "1513740"
  },
  {
    "text": "take care",
    "start": "1513740",
    "end": "1516460"
  }
]