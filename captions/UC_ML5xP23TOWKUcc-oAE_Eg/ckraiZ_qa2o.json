[
  {
    "start": "0",
    "end": "260000"
  },
  {
    "text": "what's going on guys my name is hussein and let's discuss this awesome news this is a fantastic",
    "start": "719",
    "end": "8639"
  },
  {
    "text": "article written by the dropbox team where they migrated",
    "start": "8639",
    "end": "13840"
  },
  {
    "text": "their nginx needs from nginx to envoy proxy",
    "start": "13840",
    "end": "21279"
  },
  {
    "text": "it is a well written deeply technical details and whatever",
    "start": "21279",
    "end": "27760"
  },
  {
    "text": "the article shy or or limits or or doesn't dis",
    "start": "27760",
    "end": "33280"
  },
  {
    "text": "disclose or discuss they reference papers they reference other articles which i really appreciate",
    "start": "33280",
    "end": "40160"
  },
  {
    "text": "i don't like reading the article that they just make claims out of thin air and they don't",
    "start": "40160",
    "end": "45360"
  },
  {
    "text": "back it up those guys know what they're doing this is an interesting article i do have",
    "start": "45360",
    "end": "51120"
  },
  {
    "text": "my reservations some of the article piece some of the pieces",
    "start": "51120",
    "end": "56879"
  },
  {
    "text": "uh felt like i am reading an ad for envoy to be honest and it felt like",
    "start": "56879",
    "end": "62800"
  },
  {
    "text": "someone really despises nginx whoever wrote this article at least some some like a few",
    "start": "62800",
    "end": "71200"
  },
  {
    "text": "paragraphs felt like someone is really despises nginx and and by by all means guys i don't",
    "start": "71200",
    "end": "78640"
  },
  {
    "text": "hate nginx you saw me when i made the nginx video i had my reservation and i had",
    "start": "78640",
    "end": "86880"
  },
  {
    "text": "some i guess opinions you can say about nginx and and and",
    "start": "86880",
    "end": "93600"
  },
  {
    "text": "why i think a proxy should just be a proxy instead of being a web server and proxy",
    "start": "93600",
    "end": "101360"
  },
  {
    "text": "that's why i like haproxy hi proxy just started supporting static file",
    "start": "101360",
    "end": "106799"
  },
  {
    "text": "sorry which i think it's a mistake to be honest i like if you're a proxy just be a proxy focus",
    "start": "106799",
    "end": "112880"
  },
  {
    "text": "on being a proxy because these are two different things a lot of people disagree with me on twitter oh my god a twitter mob man",
    "start": "112880",
    "end": "120000"
  },
  {
    "text": "when i say this stuff they say no it's the same thing no it's not you focus on a feature and",
    "start": "120000",
    "end": "128000"
  },
  {
    "text": "you deliver the proxying needs it's and you're gonna see that dropbox",
    "start": "128000",
    "end": "135599"
  },
  {
    "text": "exactly mentioned that that's one of the features if you focus on being a proxy",
    "start": "135599",
    "end": "141280"
  },
  {
    "text": "you can run fast and develop features way faster than maintaining a a",
    "start": "141280",
    "end": "148560"
  },
  {
    "text": "product that is a proxy analog server at the same time that just slows you down unless you have f5 money",
    "start": "148560",
    "end": "154560"
  },
  {
    "text": "nginx having 5 money and they couldn't keep up with being a proxy and a web server",
    "start": "154560",
    "end": "160480"
  },
  {
    "text": "the bugs security features the http spec sheet keep changing and how do you",
    "start": "160480",
    "end": "167760"
  },
  {
    "text": "handle smuggling attacks with being a web server it's just it's just a mess so let's go through",
    "start": "167760",
    "end": "174640"
  },
  {
    "text": "this article i'm not gonna read it because you can do it yourself i'm gonna references below",
    "start": "174640",
    "end": "179840"
  },
  {
    "text": "but i'm gonna go through the stuff i'm personally interested in the article is very long and look at",
    "start": "179840",
    "end": "186959"
  },
  {
    "text": "this beautiful thing do you see the progress bar guys there how frontend engineers how do you do",
    "start": "186959",
    "end": "192000"
  },
  {
    "text": "this my god i'm i'm just amazed by the front-end engineering uh community",
    "start": "192000",
    "end": "199680"
  },
  {
    "text": "look at this beautiful thing i would never dream to do something like that",
    "start": "199680",
    "end": "205519"
  },
  {
    "text": "i can barely write the css code this is beautiful all right let's get",
    "start": "205519",
    "end": "211120"
  },
  {
    "text": "back to the track all right what i'm going to discuss in this channel and and in this video you're going to start seeing some",
    "start": "211120",
    "end": "216799"
  },
  {
    "text": "youtube chapter you can jump into the interesting part that you like to watch you don't have to watch the whole video",
    "start": "216799",
    "end": "222879"
  },
  {
    "text": "i'm going to discuss i'm going to summarize the article a bit and uh the performance aspect of this",
    "start": "222879",
    "end": "229040"
  },
  {
    "text": "stuff comparison between nginx and envoy i'm gonna discuss a little bit the security uh portion of the article i'm gonna",
    "start": "229040",
    "end": "236000"
  },
  {
    "text": "discuss uh the yes security i'm going to discuss the missing feature that dropbox",
    "start": "236000",
    "end": "242640"
  },
  {
    "text": "claims that nginx doesn't have but envoy have that's a very interesting thing and then",
    "start": "242640",
    "end": "249519"
  },
  {
    "text": "finally i'm going to discuss the migration concept right the migration between nginx",
    "start": "249519",
    "end": "255120"
  },
  {
    "text": "and envoy and a little bit there is a little bit of a discrepancy in the article that i just i want to call out uh a little bit how",
    "start": "255120",
    "end": "262720"
  },
  {
    "start": "260000",
    "end": "370000"
  },
  {
    "text": "about we jump away guys so let's summarize this article so what it says hey uh dropbox is a file sharing",
    "start": "262720",
    "end": "270479"
  },
  {
    "text": "app right it says hey you can you have have a file and then you can stream the file and open the file wherever you want",
    "start": "270479",
    "end": "277120"
  },
  {
    "text": "that's the that's the simple feature they serve it's a complex system",
    "start": "277120",
    "end": "283199"
  },
  {
    "text": "all right and they have this ability and and since you are serving almost",
    "start": "283199",
    "end": "289120"
  },
  {
    "text": "like static content files are static yeah they are they support versioning and stuff like that but",
    "start": "289120",
    "end": "295440"
  },
  {
    "text": "they have a lot of proxying needs and they use grpc",
    "start": "295440",
    "end": "301600"
  },
  {
    "text": "to do that and we talked about grpc check out this video right here guys",
    "start": "301600",
    "end": "306639"
  },
  {
    "text": "but grpc is the multi uh it's a multi-directional",
    "start": "306639",
    "end": "311919"
  },
  {
    "text": "protocol that uses http 2 and the moment you start saying that it's like okay",
    "start": "311919",
    "end": "317199"
  },
  {
    "text": "what does that mean right in a proxy setting right if you have proxies in http 2",
    "start": "317199",
    "end": "322320"
  },
  {
    "text": "hgtv2 you would think it's http 2 all the way but",
    "start": "322320",
    "end": "327440"
  },
  {
    "text": "they found a lot of problems with nginx when it comes to just supporting pure native http 2 right",
    "start": "327440",
    "end": "333759"
  },
  {
    "text": "with grpc and and it's it's not it's not straightforward it is complex to build and obviously they like",
    "start": "333759",
    "end": "341680"
  },
  {
    "text": "the ability to have a schema will define schema with protobuf because grpc and that's that's that's their system in",
    "start": "341680",
    "end": "348800"
  },
  {
    "text": "a nutshell so you can read more right there are some stuff that i didn't understand to be honest but it is",
    "start": "348800",
    "end": "355520"
  },
  {
    "text": "it is a complexes they have a lot of testing stuff and then deployment and but that's not what i i'm",
    "start": "355520",
    "end": "361440"
  },
  {
    "text": "really interested in there's them this is what i'm interested in so they decided to move from nginx",
    "start": "361440",
    "end": "367759"
  },
  {
    "text": "to envoy because of certain reasons that they claim here let's start with the first one",
    "start": "367759",
    "end": "373039"
  },
  {
    "start": "370000",
    "end": "675000"
  },
  {
    "text": "performance so i'm gonna jump to the part where they discuss the performance here",
    "start": "373039",
    "end": "378639"
  },
  {
    "text": "so they said that nginx performance after they run some tests",
    "start": "378639",
    "end": "386639"
  },
  {
    "text": "had it is started to slow down it gives you large tail latency",
    "start": "386639",
    "end": "393600"
  },
  {
    "text": "when the request uh started to uh to increase and they most of the time they said that",
    "start": "393600",
    "end": "399520"
  },
  {
    "text": "because of of blocking at the process level right and the way nginx works is it uses",
    "start": "399520",
    "end": "407680"
  },
  {
    "text": "a worker process that spun off different child processes that's the ancient",
    "start": "407680",
    "end": "413520"
  },
  {
    "text": "design right after apache i believe uses",
    "start": "413520",
    "end": "418800"
  },
  {
    "text": "multi-threading but nginx uses multi-processing for this so everything is its own process so guys if",
    "start": "418800",
    "end": "426240"
  },
  {
    "text": "you have a proxy and you have some back end right and you want to serve requests",
    "start": "426240",
    "end": "433120"
  },
  {
    "text": "that comes to this server right internally if you look at it",
    "start": "433120",
    "end": "438720"
  },
  {
    "text": "you have many options to solve this problem right because you have incoming requests and these",
    "start": "438720",
    "end": "444639"
  },
  {
    "text": "incoming requests are are basically listening to this uh or starting to wake up the tcp connections",
    "start": "444639",
    "end": "452479"
  },
  {
    "text": "right and you have many ways to solve this nodejs have the simplest design of of a of a",
    "start": "452479",
    "end": "460160"
  },
  {
    "text": "single threaded uh event loop that has",
    "start": "460160",
    "end": "465599"
  },
  {
    "text": "one thread and that just loops through uh different tasks that it needs to do",
    "start": "465599",
    "end": "470960"
  },
  {
    "text": "and it picks up and then and it just tries to execute that or delegates the",
    "start": "470960",
    "end": "476240"
  },
  {
    "text": "the task to something else right nginx does not use that model and you",
    "start": "476240",
    "end": "482080"
  },
  {
    "text": "have the same event loop but for every request that it comes it immediately takes that request and",
    "start": "482080",
    "end": "490879"
  },
  {
    "text": "delegate delegated to and its own child process and then list of these child processes",
    "start": "490879",
    "end": "496639"
  },
  {
    "text": "are just are just waiting and",
    "start": "496639",
    "end": "502639"
  },
  {
    "text": "spun up at the time of nginx running the server right and so what happens here whenever",
    "start": "502639",
    "end": "509360"
  },
  {
    "text": "a request an http request comes or any other request comes the nginx will shove it and deliver it",
    "start": "509360",
    "end": "517039"
  },
  {
    "text": "there is a main process a master process a main leader process that goes",
    "start": "517039",
    "end": "523518"
  },
  {
    "text": "to a back end and delivers that that request to a child worker process",
    "start": "523519",
    "end": "532560"
  },
  {
    "text": "this is works great however the more request comes in this worker",
    "start": "532560",
    "end": "540240"
  },
  {
    "text": "process becomes the bottleneck so nginx comes comes up with this so",
    "start": "540240",
    "end": "548080"
  },
  {
    "text": "so reuse port idea where instead of having one process the main process",
    "start": "548080",
    "end": "555600"
  },
  {
    "text": "listening on the port 80 or 8080 or 443",
    "start": "555600",
    "end": "560720"
  },
  {
    "text": "all of these worker processes will be listening on the same port and you might say hussain that's impossible",
    "start": "560720",
    "end": "566800"
  },
  {
    "text": "because you cannot have two processes listening on the same port well apparently there is i never knew",
    "start": "566800",
    "end": "573040"
  },
  {
    "text": "this there is a way if you dug deep into the linux system or the operating system you can",
    "start": "573040",
    "end": "581600"
  },
  {
    "text": "allow the kernel to say hey all these processes are actually listening on the same port",
    "start": "581600",
    "end": "587920"
  },
  {
    "text": "and the kernel will take care of load balance almost like load balancing the request to these",
    "start": "587920",
    "end": "594000"
  },
  {
    "text": "uh child processes so you throw the right the the responsibility at the uh",
    "start": "594000",
    "end": "600880"
  },
  {
    "text": "at the kernel or the operating system process however dropbox team claims that",
    "start": "600880",
    "end": "607920"
  },
  {
    "text": "even after enabling that feature they saw some lag as a result of asynchronous",
    "start": "607920",
    "end": "615519"
  },
  {
    "text": "uh io so and that's because the process",
    "start": "615519",
    "end": "622480"
  },
  {
    "text": "is trying to read from disk and although this operation is supposed",
    "start": "622480",
    "end": "628399"
  },
  {
    "text": "to be asynchronous right because it's it's 20 20. who does synchronous io",
    "start": "628399",
    "end": "633680"
  },
  {
    "text": "anymore right i i just send a request and that request will then be",
    "start": "633680",
    "end": "639440"
  },
  {
    "text": "called back when i get the result right so i was surprised when i read that",
    "start": "639440",
    "end": "644480"
  },
  {
    "text": "oh yeah even after enabling this feature they got some tail latency",
    "start": "644480",
    "end": "650800"
  },
  {
    "text": "compared to envoy and that's one reason that performance didn't meet their needs",
    "start": "650800",
    "end": "657279"
  },
  {
    "text": "when it comes to uh to these high demand tail latency",
    "start": "657279",
    "end": "663760"
  },
  {
    "text": "right so especially in a mixed environment where you they were they use grpc",
    "start": "663760",
    "end": "669440"
  },
  {
    "text": "and and uh and the back and and in the front end all right so that's performance let's",
    "start": "669440",
    "end": "675600"
  },
  {
    "start": "675000",
    "end": "868000"
  },
  {
    "text": "discuss security so this is a prop for engine x surprisingly so",
    "start": "675600",
    "end": "681680"
  },
  {
    "text": "here the the the the the balance is goes towards nginx",
    "start": "681680",
    "end": "688240"
  },
  {
    "text": "when when it comes to this article says yeah nginx is actually has a smaller",
    "start": "688240",
    "end": "694720"
  },
  {
    "text": "code surface and that means they don't have as much dependence so they don't like uh reference open ssl things like that",
    "start": "694720",
    "end": "702240"
  },
  {
    "text": "they actually build their own custom stuff and bake it into nginx itself so now as a result you don't have",
    "start": "702240",
    "end": "709440"
  },
  {
    "text": "dependency on other third-party i mean when i say third-party another open source",
    "start": "709440",
    "end": "715040"
  },
  {
    "text": "protocols you just they write their own protocol parcels they do all their stuff",
    "start": "715040",
    "end": "721360"
  },
  {
    "text": "themselves too and and as a result nginx has only 30 vulnerability and exposure",
    "start": "721360",
    "end": "730480"
  },
  {
    "text": "in the past 11 years only 30 guys nginx is one of the most used proxy",
    "start": "730480",
    "end": "737519"
  },
  {
    "text": "and slash web server in the globe and they only reported 30",
    "start": "737519",
    "end": "743279"
  },
  {
    "text": "vulnerabilities something is off there even it's a great secure system or some people are not",
    "start": "743279",
    "end": "750399"
  },
  {
    "text": "or just we maybe we are now discovering more and getting more better",
    "start": "750399",
    "end": "756079"
  },
  {
    "text": "as as white hackers hot white hat or gray hat hackers becoming more more prevalent now we're",
    "start": "756079",
    "end": "763360"
  },
  {
    "text": "going to discover more and more vulnerabilities you know it will be interesting to know these 30",
    "start": "763360",
    "end": "768800"
  },
  {
    "text": "vulnerabilities when they were discovered is it in the past 11 years right or recently in the past two years",
    "start": "768800",
    "end": "775440"
  },
  {
    "text": "right because just looking at envoy in the past two years envoy they discovered 22",
    "start": "775440",
    "end": "783360"
  },
  {
    "text": "security advisories and that's because invoice just",
    "start": "783360",
    "end": "788480"
  },
  {
    "text": "referencing references libraries right from different uh libraries existing so",
    "start": "788480",
    "end": "794880"
  },
  {
    "text": "it just reuses these libraries and they explained that they were",
    "start": "794880",
    "end": "801040"
  },
  {
    "text": "able dropbox team they were happy with this and it says yeah",
    "start": "801040",
    "end": "806720"
  },
  {
    "text": "we know about this this was not good enough reason for us to stick with nginx because of other reasons we're going to",
    "start": "806720",
    "end": "813200"
  },
  {
    "text": "come in and then later in the article but it's so interesting guys look at this",
    "start": "813200",
    "end": "819040"
  },
  {
    "text": "they started using these tools in order to basically continuously",
    "start": "819040",
    "end": "825360"
  },
  {
    "text": "monitoring these security practices and we don't know what technically invoice is a",
    "start": "825360",
    "end": "830880"
  },
  {
    "text": "very very new software and what by the way is written by matt",
    "start": "830880",
    "end": "836560"
  },
  {
    "text": "klein and i follow him on twitter he's pretty smart guy",
    "start": "836560",
    "end": "841600"
  },
  {
    "text": "so smart and then and uh it's a it's just fascinating how much",
    "start": "841600",
    "end": "849440"
  },
  {
    "text": "you learn by following so smart people and twitter and and just that's this article",
    "start": "849440",
    "end": "855199"
  },
  {
    "text": "it's just lists so much cool stuff so yeah there are some uh heap some vulnerabilities in an",
    "start": "855199",
    "end": "863040"
  },
  {
    "text": "envoy but they're keeping an eye on this but that's that's security in a nutshell the",
    "start": "863040",
    "end": "868639"
  },
  {
    "start": "868000",
    "end": "1404000"
  },
  {
    "text": "features it's this one is interesting this is one of my favorite part the features of uh nginx",
    "start": "868639",
    "end": "876880"
  },
  {
    "text": "and if you zoom in i zoom in here look at this guys that's exactly what i said two years ago",
    "start": "876880",
    "end": "884160"
  },
  {
    "text": "when i made the nginx video i felt same thing so it's okay there is a proxy",
    "start": "884160",
    "end": "889600"
  },
  {
    "text": "that does only one job and that's a proxy each a proxy when i start comparing to a proxy and nginx i didn't",
    "start": "889600",
    "end": "894959"
  },
  {
    "text": "know about envoy back then so okay this thing is a web server and we know how much work required to build",
    "start": "894959",
    "end": "903040"
  },
  {
    "text": "a web server versus a proxy yeah there are similarities but it's content and static content surely",
    "start": "903040",
    "end": "910000"
  },
  {
    "text": "you're gonna start sliding into cgi and stuff like that and start supporting a lot of warp",
    "start": "910000",
    "end": "915040"
  },
  {
    "text": "servery stuff versus proxy you need to just be good at building rules and and",
    "start": "915040",
    "end": "924560"
  },
  {
    "text": "do proxing and layer four and layer seven and tls terminating and do these things",
    "start": "924560",
    "end": "929920"
  },
  {
    "text": "very well these are to me there are two different distinct",
    "start": "929920",
    "end": "934959"
  },
  {
    "text": "niches that uh developers need to just pick one and focus on and that's what",
    "start": "934959",
    "end": "940639"
  },
  {
    "text": "nginx did they started as a web server and then they evolved into a proxy so now an invoice started as just a pure",
    "start": "940639",
    "end": "947600"
  },
  {
    "text": "proxy and that's clearly is going to be a winner because they're focusing on having",
    "start": "947600",
    "end": "954959"
  },
  {
    "text": "a clean transparent grpc proxy right now grpc guys uses http too",
    "start": "954959",
    "end": "962320"
  },
  {
    "text": "and that's one problem that nginx has to do a grpc nginx started to start",
    "start": "962320",
    "end": "970560"
  },
  {
    "text": "implementing grpc as almost like an afterthought right not as",
    "start": "970560",
    "end": "975759"
  },
  {
    "text": "a ground up thing right so when you do that what is hdr pc you can do grpc today by doing a layer 4",
    "start": "975759",
    "end": "983120"
  },
  {
    "text": "blind uh tcp stream proxy that's easy right because",
    "start": "983120",
    "end": "991519"
  },
  {
    "text": "now that you just you just do a tcp all the way until the server but that's",
    "start": "991519",
    "end": "998560"
  },
  {
    "text": "extremely expensive because you're going to end up creating a new tcp connection for",
    "start": "998560",
    "end": "1004399"
  },
  {
    "text": "each request and that's extremely expensive",
    "start": "1004399",
    "end": "1009519"
  },
  {
    "text": "hey guys this is hussein from editing uh what i meant to say here is it is extremely expensive",
    "start": "1009519",
    "end": "1016720"
  },
  {
    "text": "that's true however uh each tcp connection will get a back end",
    "start": "1016720",
    "end": "1024400"
  },
  {
    "text": "connection a dedicated one right so that means you cannot multiplex and you cannot",
    "start": "1024400",
    "end": "1030959"
  },
  {
    "text": "pull back in connection in the tc tcp mode right because every request every connection will will",
    "start": "1030959",
    "end": "1038558"
  },
  {
    "text": "end up having a dedicated connection as long as a source ip and the port are the same and that will basically",
    "start": "1038559",
    "end": "1045678"
  },
  {
    "text": "expand the number of tcp connection at the back and that's kind of limits memory and then obviously",
    "start": "1045679",
    "end": "1052080"
  },
  {
    "text": "more work on the proxy level and that's it compared to multiplexing pulled back in connection",
    "start": "1052080",
    "end": "1059440"
  },
  {
    "text": "into one tcp connection or many tps tcp connections right right so that's that's what i meant to",
    "start": "1059440",
    "end": "1064960"
  },
  {
    "text": "do it's like request was the wrong uh work to use right because we know that we're going to end up we didn't we want",
    "start": "1064960",
    "end": "1071360"
  },
  {
    "text": "to pull the back end tcp connection as much as possible and nginx didn't do that it just starts",
    "start": "1071360",
    "end": "1078720"
  },
  {
    "text": "spinning up engine uh uh approx uh tcps on the back end without multiplexing and",
    "start": "1078720",
    "end": "1086400"
  },
  {
    "text": "that was a deal breaker for a drop drop drop box and i don't disagree with that at",
    "start": "1086400",
    "end": "1093760"
  },
  {
    "text": "all because yeah that's a problem if you don't do that and look at this http 2 back-end this",
    "start": "1093760",
    "end": "1099360"
  },
  {
    "text": "feature allows us to greatly reduce the number of tcp connections that's true right i don't believe http 2",
    "start": "1099360",
    "end": "1107120"
  },
  {
    "text": "it did not have http 2 back in at that time again they were using guys they were",
    "start": "1107120",
    "end": "1113679"
  },
  {
    "text": "using the nginx free version on this and nothing wrong with that but as a dropbox i would imagine",
    "start": "1113679",
    "end": "1119440"
  },
  {
    "text": "they would pay a little bit more money to get the enterprise version of nginx",
    "start": "1119440",
    "end": "1124480"
  },
  {
    "text": "now i don't know if in the enterprise version of nginx had these capabilities or not god knows",
    "start": "1124480",
    "end": "1131280"
  },
  {
    "text": "but look at this http 2 on the back end this feature allows to greatly reduce the number of tcp",
    "start": "1131280",
    "end": "1136559"
  },
  {
    "text": "connections between our traffic tiers why we talked about that guys many many",
    "start": "1136559",
    "end": "1142559"
  },
  {
    "text": "times the channel check out the http on the back end thing because if you have http on the front end which",
    "start": "1142559",
    "end": "1149280"
  },
  {
    "text": "is grpc now if you create an http 2",
    "start": "1149280",
    "end": "1154559"
  },
  {
    "text": "tcp connection now you can use streams in that",
    "start": "1154559",
    "end": "1162080"
  },
  {
    "text": "back in tcp connection to represent requests from multiple client so technically you can reuse the tcp",
    "start": "1162080",
    "end": "1168559"
  },
  {
    "text": "connection instead of wasting it and that's",
    "start": "1168559",
    "end": "1173679"
  },
  {
    "text": "instead of wasting it just splitting up a new tcp connection that's extremely powerful apparently",
    "start": "1173679",
    "end": "1180240"
  },
  {
    "text": "envoy supports that nginx as they claim i'm not sure about that does not support",
    "start": "1180240",
    "end": "1186720"
  },
  {
    "text": "that okay grpc web obviously guys grpc is not supported on",
    "start": "1186720",
    "end": "1192640"
  },
  {
    "text": "natively on the browsers and the reason because the the the vendors who want to write",
    "start": "1192640",
    "end": "1199679"
  },
  {
    "text": "grpc clients mainly google do not have low access to",
    "start": "1199679",
    "end": "1208159"
  },
  {
    "text": "http 2 libraries in order to to play and fingel with them what the hell is woofing mean single",
    "start": "1208159",
    "end": "1215280"
  },
  {
    "text": "with the with the with the stream level",
    "start": "1215280",
    "end": "1220480"
  },
  {
    "text": "http 2 socket they only have very they only ca they can do as much as",
    "start": "1220480",
    "end": "1225919"
  },
  {
    "text": "we can do fetch that's pretty much it so because of that we can't really do grpc on the web right",
    "start": "1225919",
    "end": "1233840"
  },
  {
    "text": "unless someone comes down and build a a nice api",
    "start": "1233840",
    "end": "1240799"
  },
  {
    "text": "in the browser and the browser community have to agree on it geez so that's another seven years good luck",
    "start": "1240799",
    "end": "1248240"
  },
  {
    "text": "doing that right and just people agreeing on stuff no that was not gonna happen",
    "start": "1248240",
    "end": "1253600"
  },
  {
    "text": "so either chrome which is the one who built your pc they can just submit a",
    "start": "1253600",
    "end": "1260960"
  },
  {
    "text": "an api to be honest in chrome and stuff with the chrome then take the advantage but until then",
    "start": "1260960",
    "end": "1268640"
  },
  {
    "text": "we have a native grpc we have to do this hack which i i don't like to be honest it's grpc web",
    "start": "1268640",
    "end": "1275760"
  },
  {
    "text": "is a proxy that you spin up locally and and and on your",
    "start": "1275760",
    "end": "1282799"
  },
  {
    "text": "browser i don't know if it's an extension or or a service uh proxy or what is it called service uh",
    "start": "1282799",
    "end": "1289039"
  },
  {
    "text": "forgot to come so name service worker right it will just basically listen",
    "start": "1289039",
    "end": "1294960"
  },
  {
    "text": "and you send normal rest calls or get post calls and that will be",
    "start": "1294960",
    "end": "1300400"
  },
  {
    "text": "transmitted as a grpc to the back end right",
    "start": "1300400",
    "end": "1305440"
  },
  {
    "text": "so technically you are locally communicating in pure http",
    "start": "1305440",
    "end": "1312720"
  },
  {
    "text": "localhost loopback between yourself as a browser and the grpc web proxy and the grpc web",
    "start": "1312720",
    "end": "1320240"
  },
  {
    "text": "proxy is communicating as as a as basically an another grpc",
    "start": "1320240",
    "end": "1325520"
  },
  {
    "text": "layer at the back end right so now they that's what they that that's what they mean by grpc end",
    "start": "1325520",
    "end": "1331919"
  },
  {
    "text": "to end here right so yeah they they do say that's end to end but i believe they do",
    "start": "1331919",
    "end": "1341120"
  },
  {
    "text": "have layer 7 tls terminating proxies in the middle",
    "start": "1341120",
    "end": "1346640"
  },
  {
    "text": "to look at the traffic to make decisions based on that otherwise it's useless right so right they have to look they",
    "start": "1346640",
    "end": "1354000"
  },
  {
    "text": "terminate they look at that they they try to understand stream level grpc",
    "start": "1354000",
    "end": "1359280"
  },
  {
    "text": "and then make another stream request on the back end so it's like stream almost like stream proxy that's",
    "start": "1359280",
    "end": "1365679"
  },
  {
    "text": "very interesting more because it's very confusing stream proxy in nginx means",
    "start": "1365679",
    "end": "1370720"
  },
  {
    "text": "tcp streaming versus stream proxy what i meant is stream http 2 stream that's why i",
    "start": "1370720",
    "end": "1378240"
  },
  {
    "text": "hate the word stream guys why did we pick this stream should be channel",
    "start": "1378240",
    "end": "1383280"
  },
  {
    "text": "right rabbitmq did that and and ssh way back",
    "start": "1383280",
    "end": "1390080"
  },
  {
    "text": "used channel why google why did you pick stream it's just so confusing it should have",
    "start": "1390080",
    "end": "1396720"
  },
  {
    "text": "been named channel all right so that's that's that's pretty neat",
    "start": "1396720",
    "end": "1402320"
  },
  {
    "text": "i love it i absolutely love it all right migration guys migration look at this guys so",
    "start": "1402320",
    "end": "1410559"
  },
  {
    "start": "1404000",
    "end": "1980000"
  },
  {
    "text": "here we'll come to this issues we encounter right let's go back so with migration",
    "start": "1410559",
    "end": "1416000"
  },
  {
    "text": "they say we had seamlessly migrate a system that already handles 10",
    "start": "1416000",
    "end": "1421760"
  },
  {
    "text": "millions of open designers so that's why the first time i read it oh they managed to seemingly seamlessly",
    "start": "1421760",
    "end": "1428240"
  },
  {
    "text": "migrate the system from nginx to envoy right seamlessly then at the end of the article they say well",
    "start": "1428240",
    "end": "1436400"
  },
  {
    "text": "not really not really because then then they say well",
    "start": "1436400",
    "end": "1443120"
  },
  {
    "text": "migration was not really flawless to be honest right so it took them almost half more",
    "start": "1443120",
    "end": "1449039"
  },
  {
    "text": "than six months seven months to do the migration and uh they",
    "start": "1449039",
    "end": "1454799"
  },
  {
    "text": "uh they took them over the half a year to do migration so it's not it wasn't that simple so they ran nginx",
    "start": "1454799",
    "end": "1462880"
  },
  {
    "text": "and invite proxy in parallel and they use dns to start just flipping the ip addresses",
    "start": "1462880",
    "end": "1469760"
  },
  {
    "text": "at the dns level to point slowly from engine x to envoy and start managing and managing",
    "start": "1469760",
    "end": "1477120"
  },
  {
    "text": "the high put the traffic slowly until they removed all nginx traffic",
    "start": "1477120",
    "end": "1485360"
  },
  {
    "text": "uh at all all of it just gone however it wasn't flawless and this is",
    "start": "1485360",
    "end": "1492240"
  },
  {
    "text": "so awesome let's go through this nginx it was built long time ago guys so they",
    "start": "1492240",
    "end": "1499520"
  },
  {
    "text": "run into a lot of stuff and they did something some stuff some features",
    "start": "1499520",
    "end": "1507279"
  },
  {
    "text": "they implemented let's say to",
    "start": "1507279",
    "end": "1512400"
  },
  {
    "text": "to mask bugs they were not supposed they were supposed to be bugs",
    "start": "1512400",
    "end": "1517600"
  },
  {
    "text": "in in in the back end servers but they mask it in and they took care of of taking the",
    "start": "1517600",
    "end": "1524400"
  },
  {
    "text": "blame and fixing it an example of this is as the transfer chunk encoding",
    "start": "1524400",
    "end": "1529679"
  },
  {
    "text": "so we talked about hdb smuggling in this channel a little bit guys right so",
    "start": "1529679",
    "end": "1535200"
  },
  {
    "text": "nginx wrote a lot of code to to smartly uh",
    "start": "1535200",
    "end": "1542320"
  },
  {
    "text": "take care of transfer encoding and content length duplicates right which",
    "start": "1542320",
    "end": "1549039"
  },
  {
    "text": "attackers use to smuggle bad content into into their uh into the request",
    "start": "1549039",
    "end": "1555200"
  },
  {
    "text": "right envoy just says nope nope don't don't accept things that",
    "start": "1555200",
    "end": "1561840"
  },
  {
    "text": "takes both of this right nginx used to say okay i'm gonna accept it",
    "start": "1561840",
    "end": "1568000"
  },
  {
    "text": "but i'm gonna deal with it later right but invoice says nope just block it",
    "start": "1568000",
    "end": "1574320"
  },
  {
    "text": "all of it which to me i think that's the best approach just block it because that's a bad request if you're sending",
    "start": "1574320",
    "end": "1580799"
  },
  {
    "text": "me a content length and uh http chunked uh encoding that means",
    "start": "1580799",
    "end": "1586240"
  },
  {
    "text": "you're either an attacker or could be just a naive client the simple client which is which is the case",
    "start": "1586240",
    "end": "1591600"
  },
  {
    "text": "they had a lot of http 100 by the way clients which was i was surprised that's like",
    "start": "1591600",
    "end": "1596840"
  },
  {
    "text": "apparently dropbox being used for a lot of stuff right so yeah so you would see these",
    "start": "1596840",
    "end": "1605200"
  },
  {
    "text": "features right they're like for example ports and virtual host name nginx allows receiving host headers in both",
    "start": "1605200",
    "end": "1612159"
  },
  {
    "text": "forms either example example we had a couple of apis that used to rely on this behavior first we worked",
    "start": "1612159",
    "end": "1619440"
  },
  {
    "text": "around this by duplicating our vhost in our configuration okay that makes sense but later added",
    "start": "1619440",
    "end": "1624880"
  },
  {
    "text": "an option to ignore the matching port in invoice sorry so that's nginx just this is just",
    "start": "1624880",
    "end": "1631919"
  },
  {
    "text": "features and nginx that technically didn't exist in envoy and what they are doing some of them are",
    "start": "1631919",
    "end": "1639679"
  },
  {
    "text": "to be honest bash these features shouldn't be a feature should be you can you can consider it a bug that shouldn't",
    "start": "1639679",
    "end": "1647520"
  },
  {
    "text": "have been fixed right it should should just fail right but it's just all of these things like",
    "start": "1647520",
    "end": "1655120"
  },
  {
    "text": "take a look at this buffering uh nginx allow request buffering on disk",
    "start": "1655120",
    "end": "1662880"
  },
  {
    "text": "this especially useful environment you where you have legacy http one back-end that don't understand transfer encoding nginx could convert",
    "start": "1662880",
    "end": "1670080"
  },
  {
    "text": "this request with content length so injects was smart enough to look at the back end",
    "start": "1670080",
    "end": "1675919"
  },
  {
    "text": "and say do you support https content chunked right and if the back end",
    "start": "1675919",
    "end": "1681679"
  },
  {
    "text": "doesn't support it it doesn't say fail no nginx",
    "start": "1681679",
    "end": "1687200"
  },
  {
    "text": "uh actually says wait the back end doesn't stop doesn't support it content chunking because",
    "start": "1687200",
    "end": "1692320"
  },
  {
    "text": "these transmit the server side events guys the server sent events that that we talked",
    "start": "1692320",
    "end": "1697760"
  },
  {
    "text": "about right the back-end doesn't support it but doesn't mean i can fail so engines started basically loading",
    "start": "1697760",
    "end": "1705360"
  },
  {
    "text": "buffering all the content until it reached the end and then sending it as just one request",
    "start": "1705360",
    "end": "1711520"
  },
  {
    "text": "to the back end obviously invoice did not support that feature so",
    "start": "1711520",
    "end": "1716720"
  },
  {
    "text": "they uh i don't know what they do whether the invoice has a buffer filter but without the ability to store data",
    "start": "1716720",
    "end": "1721919"
  },
  {
    "text": "right so they basically started uh dropbox contributed by the way to the",
    "start": "1721919",
    "end": "1728480"
  },
  {
    "text": "envoy project by implementing this feature as they find all engines apparently is a big thing",
    "start": "1728480",
    "end": "1734080"
  },
  {
    "text": "right so so they started implementing this feature envoy and then pushing it to to uh",
    "start": "1734080",
    "end": "1741120"
  },
  {
    "text": "implementing this in uh feature locally in envoy and then pushing it upstream to the open source",
    "start": "1741120",
    "end": "1746240"
  },
  {
    "text": "and voip project and i need to make an envoy proxy type below comment section make",
    "start": "1746240",
    "end": "1752480"
  },
  {
    "text": "envoy so we can make this fair i'll just type envoy so we can write uh so we can do this",
    "start": "1752480",
    "end": "1758480"
  },
  {
    "text": "thing guys this is man what do you guys think about this stuff",
    "start": "1758480",
    "end": "1763919"
  },
  {
    "text": "this is a very interesting article what's next http3 everybody is talking about hdb3",
    "start": "1763919",
    "end": "1770559"
  },
  {
    "text": "i'm not sure we need it i mean dropbox will need it because they use grpc all the way right even in the web",
    "start": "1770559",
    "end": "1778880"
  },
  {
    "text": "because they are using grpc web so they are suffering now with one limitation http 2 guys the the",
    "start": "1778880",
    "end": "1785600"
  },
  {
    "text": "tcp retransmission problem right and here's the problem in a nutshell tcp",
    "start": "1785600",
    "end": "1794720"
  },
  {
    "text": "when you send a packet in tcp you get an acknowledgement from the server and and this is just a packet level",
    "start": "1794720",
    "end": "1800880"
  },
  {
    "text": "right that's how tcp work and http 2 uses tcp so if you send a packet and if you don't",
    "start": "1800880",
    "end": "1806880"
  },
  {
    "text": "receive that packet right each packet has a serial number this is which is the send they agree on",
    "start": "1806880",
    "end": "1813760"
  },
  {
    "text": "the sends and hack right or each packet is serialized now if you send packets and you receive",
    "start": "1813760",
    "end": "1820080"
  },
  {
    "text": "like packet one packet two packet three and you receive a condom of packet three guess what the client will wait",
    "start": "1820080",
    "end": "1827919"
  },
  {
    "text": "and until or even the server the server and client will wait until this that",
    "start": "1827919",
    "end": "1834720"
  },
  {
    "text": "the server acknowledges two and one despite three has been received",
    "start": "1834720",
    "end": "1840320"
  },
  {
    "text": "right that's because they want to order stuff right that's a problem and here's why",
    "start": "1840320",
    "end": "1847360"
  },
  {
    "text": "http 2 use multiplexing and it sends uh every request as its own stream",
    "start": "1847360",
    "end": "1855840"
  },
  {
    "text": "so a stream will be translated into packets right so to the tcp stack",
    "start": "1855840",
    "end": "1864399"
  },
  {
    "text": "there is no information that says this packet belongs to this stream because it's a higher level to it it's just data",
    "start": "1864399",
    "end": "1870720"
  },
  {
    "text": "right so now if you successfully received all the content for stream one",
    "start": "1870720",
    "end": "1877519"
  },
  {
    "text": "which is request number one for example let's say but stream two where those packets were sent",
    "start": "1877519",
    "end": "1884640"
  },
  {
    "text": "but let's say it's not acknowledged yet guess what right get guess what stream",
    "start": "1884640",
    "end": "1892159"
  },
  {
    "text": "two is now a stream one is now blocked because",
    "start": "1892159",
    "end": "1898559"
  },
  {
    "text": "stream two there's a stinking packet that hasn't hasn't been received who cares stream one is its own request",
    "start": "1898559",
    "end": "1906080"
  },
  {
    "text": "you're blocking me because stream eight or stream nine has one packet that has known being acknowledged that's what's happening on",
    "start": "1906080",
    "end": "1912320"
  },
  {
    "text": "the back end right that's why uh http use a lot of cpu uh power to just do this thing and",
    "start": "1912320",
    "end": "1920240"
  },
  {
    "text": "assemble the streams from packets so it's just so interesting to me all this stuff and",
    "start": "1920240",
    "end": "1925919"
  },
  {
    "text": "envoy mobile is another thing that i i don't know really much about but apparently they don't use proxy in here",
    "start": "1925919",
    "end": "1932399"
  },
  {
    "text": "they just use a library into mobile to just from day one they they you can",
    "start": "1932399",
    "end": "1940240"
  },
  {
    "text": "communicate with grpc with http 2 and http 3 in the future right so now",
    "start": "1940240",
    "end": "1945519"
  },
  {
    "text": "this is the problem with db2 guys right so now they want to move next to hdb3 which is",
    "start": "1945519",
    "end": "1951679"
  },
  {
    "text": "uses quick which uses udp which implements this streaming thing",
    "start": "1951679",
    "end": "1956960"
  },
  {
    "text": "on on the application layer right and and that's really powerful now you",
    "start": "1956960",
    "end": "1962799"
  },
  {
    "text": "don't have this uh uh what does it call i forgot it's called is it pipelining",
    "start": "1962799",
    "end": "1969279"
  },
  {
    "text": "hit offline blocking thank you i don't know i'm almost i'm thinking but yeah head offline blocking that's what we're",
    "start": "1969279",
    "end": "1975760"
  },
  {
    "text": "blocking because there's a stinking packet that has not been acknowledged in in stream eight",
    "start": "1975760",
    "end": "1980960"
  },
  {
    "start": "1980000",
    "end": "2139000"
  },
  {
    "text": "and you're blocking all this other streams just because uh uh there's a packet that's received",
    "start": "1980960",
    "end": "1986399"
  },
  {
    "text": "in stream a so in quick only that packet will be uh only that packet will",
    "start": "1986399",
    "end": "1993760"
  },
  {
    "text": "not be acknowledged and as a result only stream eight or stream nine will not be will be weighed will will",
    "start": "1993760",
    "end": "2000480"
  },
  {
    "text": "block the communication however streams any any streams that receive their package will be just gone",
    "start": "2000480",
    "end": "2006159"
  },
  {
    "text": "and everything is good but yeah guys so they claimed that everything was",
    "start": "2006159",
    "end": "2011519"
  },
  {
    "text": "was dandy and seamless but not really so there was a little bit of a contradiction here so i didn't really",
    "start": "2011519",
    "end": "2017679"
  },
  {
    "text": "understand that i don't know maybe it's just my english it's just me right they just say",
    "start": "2017679",
    "end": "2022880"
  },
  {
    "text": "seamlessly migrate and then they say well we wasn't really flawless so i don't know about that but nevertheless",
    "start": "2022880",
    "end": "2030399"
  },
  {
    "text": "an excellent article well written good job alexey and oleg great",
    "start": "2030399",
    "end": "2037360"
  },
  {
    "text": "great content please give us more beautiful stuff like that i learned so",
    "start": "2037360",
    "end": "2042960"
  },
  {
    "text": "much and i from this article i have now seven papers that i need to read",
    "start": "2042960",
    "end": "2048079"
  },
  {
    "text": "as a result because i want to understand more about uh uh more about these stuff to be honest",
    "start": "2048079",
    "end": "2054638"
  },
  {
    "text": "especially when it comes to multi-processing versus multi-threading and which one is better because uh i didn't quite buy that to be",
    "start": "2054639",
    "end": "2061760"
  },
  {
    "text": "honest they moved from nginx because it's a multi-processing to multi-threaded envoy because it's",
    "start": "2061760",
    "end": "2069200"
  },
  {
    "text": "better because there's one problem that it referenced just well and boy if it's used as",
    "start": "2069200",
    "end": "2074638"
  },
  {
    "text": "multi-threading that if the process main process died all the threats is dead that's even worse to me than",
    "start": "2074639",
    "end": "2080800"
  },
  {
    "text": "multi-processing yeah you can argue that multi-processing has uh what has or more overhead because",
    "start": "2080800",
    "end": "2088240"
  },
  {
    "text": "every process have its own process overhead that the operating system do but i don't know if it's that bad but",
    "start": "2088240",
    "end": "2096079"
  },
  {
    "text": "again we're all learning we're all gonna learn we're gonna communicate guys",
    "start": "2096079",
    "end": "2102880"
  },
  {
    "text": "what do you think about this whole thing let me know in the comment section below i'm gonna see you in the next one we're",
    "start": "2102880",
    "end": "2109440"
  },
  {
    "text": "gonna keep learning i want more of these beautiful articles",
    "start": "2109440",
    "end": "2114800"
  },
  {
    "text": "from the software engineering community this is excellent we want this transparency",
    "start": "2114800",
    "end": "2121040"
  },
  {
    "text": "dropbox great job thank you so much yeah you a little bit through a lot of shade",
    "start": "2121040",
    "end": "2126880"
  },
  {
    "text": "on nginx to be honest i wouldn't do that but you did give it some praise and i",
    "start": "2126880",
    "end": "2132640"
  },
  {
    "text": "like that so thank you so much i'm gonna see in the next one you guys stay awesome",
    "start": "2132640",
    "end": "2137920"
  },
  {
    "text": "goodbye",
    "start": "2137920",
    "end": "2140319"
  }
]