[
  {
    "start": "0",
    "end": "227000"
  },
  {
    "text": "on may 27 2021 a very popular fintech company a swedish fintech",
    "start": "80",
    "end": "5680"
  },
  {
    "text": "company called klarna has suffered a let's say a leak",
    "start": "5680",
    "end": "10880"
  },
  {
    "text": "on their backing infrastructure that causes users who log into their app to see",
    "start": "10880",
    "end": "18080"
  },
  {
    "text": "other users personal information not theirs they see other people",
    "start": "18080",
    "end": "24560"
  },
  {
    "text": "obviously this is pretty bad but i think it can give us a lesson or two to learn",
    "start": "24560",
    "end": "32238"
  },
  {
    "text": "on here on the back engineering show i think it's very useful to highlight that so klarna",
    "start": "32239",
    "end": "38399"
  },
  {
    "text": "the company has released a root cause analysis so i'd like to go through that read a",
    "start": "38399",
    "end": "44079"
  },
  {
    "text": "little bit see the side effect of that and see what we can learn from this and uh",
    "start": "44079",
    "end": "49200"
  },
  {
    "text": "give you my personal take on this because i ran into similar yet not as catastrophic bug myself",
    "start": "49200",
    "end": "57199"
  },
  {
    "text": "and it took me a while to debug how about we jump into it welcome to the back engineering show with your host hussein",
    "start": "57199",
    "end": "62879"
  },
  {
    "text": "nasser and today we have not really an outage but it's a it's a it's an incident",
    "start": "62879",
    "end": "68080"
  },
  {
    "text": "it's not really an attack or anything like that it's uh to us to to summarize that the",
    "start": "68080",
    "end": "74960"
  },
  {
    "text": "engineers of klarna the company the swedish company have pushed a configuration on their back end that led to this side",
    "start": "74960",
    "end": "82320"
  },
  {
    "text": "effect the request that goes to the back and goes through a cdn a content development which which",
    "start": "82320",
    "end": "88080"
  },
  {
    "text": "essentially handles its own cache so if you cache thing you have to cache",
    "start": "88080",
    "end": "93600"
  },
  {
    "text": "these information per user so if i come in with my request right and i logged in",
    "start": "93600",
    "end": "101439"
  },
  {
    "text": "and i you retrieve the information you cache it in the cdn or in the back end doesn't matter then",
    "start": "101439",
    "end": "108079"
  },
  {
    "text": "the next request i come in because i am stateless http",
    "start": "108079",
    "end": "113600"
  },
  {
    "text": "stateless i have to give you some identify that hey this is me so he's sending a token or a login id or",
    "start": "113600",
    "end": "118960"
  },
  {
    "text": "something that identifies me right and as a result",
    "start": "118960",
    "end": "124159"
  },
  {
    "text": "you on the back and you can choose to create the database again but you can serve me from a cache and a",
    "start": "124159",
    "end": "130080"
  },
  {
    "text": "better it better be that exact my cache not somebody else's because",
    "start": "130080",
    "end": "135120"
  },
  {
    "text": "other people's will be log in doing the same thing so i get served that portion of the cache",
    "start": "135120",
    "end": "140160"
  },
  {
    "text": "it's it's a partitioned cache just for repair user right so we're using",
    "start": "140160",
    "end": "145760"
  },
  {
    "text": "part of the information that is sent in the http to know which cache to pull pull from essentially identified",
    "start": "145760",
    "end": "152879"
  },
  {
    "text": "you can implement it many ways but this is basically basic so the bug here essentially invalidated this extra",
    "start": "152879",
    "end": "158640"
  },
  {
    "text": "measurement as a result when you make a request and you do identify yourself with the request",
    "start": "158640",
    "end": "165440"
  },
  {
    "text": "right and since the server is not only caching you it's",
    "start": "165440",
    "end": "170640"
  },
  {
    "text": "caching thousands of other users right now this server has many other caches",
    "start": "170640",
    "end": "177680"
  },
  {
    "text": "the bug here was the identification which cache is mine has gone this protection is like which cache is",
    "start": "177680",
    "end": "183920"
  },
  {
    "text": "mine is gone so i will pick the server will pick maybe the first one or the last one busy based on the i'll",
    "start": "183920",
    "end": "189920"
  },
  {
    "text": "go to the news let me be the last recently used again i'm making stuff up i have no idea there are no",
    "start": "189920",
    "end": "195360"
  },
  {
    "text": "that level of details on the on the rc uh root cause analysis but uh it gives you like some sort of",
    "start": "195360",
    "end": "200480"
  },
  {
    "text": "idea so how about we jump into the report read a little bit and show you the side effect of what exactly this",
    "start": "200480",
    "end": "205599"
  },
  {
    "text": "happens and i'd like to thank dennis who sent me a link to this uh article and this root cause analysis",
    "start": "205599",
    "end": "213120"
  },
  {
    "text": "because i didn't know about this news especially when things happened in europe we don't hear about it here in the us much",
    "start": "213120",
    "end": "218959"
  },
  {
    "text": "and plus i'm i've been off the news for a while so i'm not being i haven't been being at",
    "start": "218959",
    "end": "225120"
  },
  {
    "text": "paying attention recently on these kind of things all right before we start reading the summary",
    "start": "225120",
    "end": "230400"
  },
  {
    "start": "227000",
    "end": "384000"
  },
  {
    "text": "uh i'd like to show you the video of uh someone who actually posted that",
    "start": "230400",
    "end": "236239"
  },
  {
    "text": "carrie stewart carrie stewart has posted a video of how this this is actually looking",
    "start": "236239",
    "end": "242640"
  },
  {
    "text": "like so for people who are listening in the podcast i'm going to describe exactly what we're watching so carrie's using an iphone and all right",
    "start": "242640",
    "end": "249840"
  },
  {
    "text": "so carrie is using an iphone and uh she's now logging into the clarinet app",
    "start": "249840",
    "end": "255599"
  },
  {
    "text": "and clan is loading using the face id login identified she's going into the",
    "start": "255599",
    "end": "262800"
  },
  {
    "text": "uh we're not sure if this is this actually her video or not but the whoever opened this app now open",
    "start": "262800",
    "end": "270240"
  },
  {
    "text": "there and then it says aled is the user and there is a 29 pound",
    "start": "270240",
    "end": "275520"
  },
  {
    "text": "uh payments to to pay and they are they are going through going",
    "start": "275520",
    "end": "281040"
  },
  {
    "text": "through one-time cards and looking through the payment method and there you go you",
    "start": "281040",
    "end": "286639"
  },
  {
    "text": "can see obviously the visa cards not good but now they are logging out right they're closing the app and",
    "start": "286639",
    "end": "292960"
  },
  {
    "text": "they're logging back in again with their face id and behold",
    "start": "292960",
    "end": "298800"
  },
  {
    "text": "now it says stacy is the user what a crea and there's a profile",
    "start": "298800",
    "end": "305120"
  },
  {
    "text": "different profile picture everything is different let's confirm actually was it that when was aled",
    "start": "305120",
    "end": "311440"
  },
  {
    "text": "yes alex didn't have a profile picture stacy did so it's a huge cache it's basically",
    "start": "311440",
    "end": "318880"
  },
  {
    "text": "the entire metadata about the user itself let's see let's continue watching this",
    "start": "318880",
    "end": "325280"
  },
  {
    "text": "so now closing again opening again i wish they they went to the visa socket does it",
    "start": "325280",
    "end": "331680"
  },
  {
    "text": "actually pull also the visa information or the credit card information as well now says becky becky doesn't have a",
    "start": "331680",
    "end": "337520"
  },
  {
    "text": "profile picture but that just that is just creepy all right so now it says becky obviously what is not",
    "start": "337520",
    "end": "344400"
  },
  {
    "text": "clear from the video is can you actually make payments can you",
    "start": "344400",
    "end": "349680"
  },
  {
    "text": "actually do transaction on behalf of becky that i'm not quite sure",
    "start": "349680",
    "end": "357600"
  },
  {
    "text": "and it does the root cause answers even doesn't say so and if i'm gonna guess i'm gonna say no",
    "start": "357600",
    "end": "363520"
  },
  {
    "text": "based on what is described because it's just it's just the reading cache thing the right is",
    "start": "363520",
    "end": "369520"
  },
  {
    "text": "probably it's not gonna use the cache when you write you can you can you go directly to the database",
    "start": "369520",
    "end": "375840"
  },
  {
    "text": "so you're gonna be identified with your token that you're gonna send me okay unless obviously we're looking at",
    "start": "375840",
    "end": "382479"
  },
  {
    "text": "something else we have no idea all right so how about we go into the incident report read a little bit and",
    "start": "382479",
    "end": "388560"
  },
  {
    "start": "384000",
    "end": "444000"
  },
  {
    "text": "then discuss what we can learn from this i'm gonna tell you one story that happened to me a few years",
    "start": "388560",
    "end": "394560"
  },
  {
    "text": "back i got into the cash cash and validation is the worst this is not an incident of cash and validation",
    "start": "394560",
    "end": "401680"
  },
  {
    "text": "per se it's an incident of cash mishandling again guys you can say all you what you",
    "start": "401680",
    "end": "409280"
  },
  {
    "text": "want about oh how dare they have this kind of bug no",
    "start": "409280",
    "end": "414639"
  },
  {
    "text": "if you have been an engineer for a few years you know this this thing happens these things happen",
    "start": "414639",
    "end": "420720"
  },
  {
    "text": "we're dealing with complex systems obviously so i don't blame any engineers for missing",
    "start": "420720",
    "end": "427520"
  },
  {
    "text": "some any kind of the these kind of a small things obviously that it's a disaster what happened right",
    "start": "427520",
    "end": "435599"
  },
  {
    "text": "seeing other people information but we're gonna see we're gonna continue reading through this and see what we can",
    "start": "435599",
    "end": "442479"
  },
  {
    "text": "extract from this all right detailed incident report incorrect cache configuration leading to klarna app",
    "start": "442479",
    "end": "448240"
  },
  {
    "start": "444000",
    "end": "502000"
  },
  {
    "text": "exposing personal information the root cause of this incident is detailed below to",
    "start": "448240",
    "end": "453440"
  },
  {
    "text": "summarize to summarize one of our development teams made a configuration update",
    "start": "453440",
    "end": "458800"
  },
  {
    "text": "which included an unintentional change to how information is cached between our backing and our app they",
    "start": "458800",
    "end": "464879"
  },
  {
    "text": "don't specify how they just display okay it's an unintentional how the cache is being",
    "start": "464879",
    "end": "470319"
  },
  {
    "text": "handled the result of this configuration error was that information belonging to different users",
    "start": "470319",
    "end": "476080"
  },
  {
    "text": "were cached and visible to other users we detected that something was wrong",
    "start": "476080",
    "end": "481440"
  },
  {
    "text": "within nine minutes and identified the cause and disabled the app within 31 minutes",
    "start": "481440",
    "end": "488400"
  },
  {
    "text": "so the whole thing took 40 minutes so 40 minutes you can do a pretty lot of damage with",
    "start": "488400",
    "end": "494479"
  },
  {
    "text": "40 minutes right if you can do screenshots stuff like that you can you just have other",
    "start": "494479",
    "end": "499599"
  },
  {
    "text": "users information now usually the app doesn't show you the",
    "start": "499599",
    "end": "506240"
  },
  {
    "text": "full credit card number or or whatnot i usually show these stars but",
    "start": "506240",
    "end": "512159"
  },
  {
    "text": "who knows i i don't use the app again i'm not a user of this app so i don't know anything about it but uh it is bad it looks like it's bad",
    "start": "512159",
    "end": "521360"
  },
  {
    "text": "in addition to mitigating the current incident we have implemented a number of changes to prevent resource and",
    "start": "521360",
    "end": "526480"
  },
  {
    "text": "recurrence and reduce the impact of this type of issue and continue to work on additional safeguard this is this is",
    "start": "526480",
    "end": "532000"
  },
  {
    "text": "what we want to hear right we want to hear that uh that the company address know the effect",
    "start": "532000",
    "end": "540160"
  },
  {
    "text": "actually talk about it transparently which is i didn't say this enough this is",
    "start": "540160",
    "end": "545760"
  },
  {
    "text": "actually amazing that they went through this level of deep to be transparent so kudos to klerner for",
    "start": "545760",
    "end": "553519"
  },
  {
    "text": "actually doing that this is this is pretty good a lot of people just hush hush and say oh nothing happened oh what happened what are you",
    "start": "553519",
    "end": "559600"
  },
  {
    "text": "talking about oh that's i don't know that's not us i'll just they will just ignore it they",
    "start": "559600",
    "end": "565760"
  },
  {
    "text": "essentially went into their because they are tech company they have to do this essentially it's like",
    "start": "565760",
    "end": "571760"
  },
  {
    "text": "one right if it's a fintech now you're you have to explain to us what happened right so yeah and the other",
    "start": "571760",
    "end": "578240"
  },
  {
    "text": "thing is um they're working uh hard to essentially address the issue and put",
    "start": "578240",
    "end": "585600"
  },
  {
    "text": "measurements in to prevent this from happening again so you might have questions what why did",
    "start": "585600",
    "end": "592480"
  },
  {
    "text": "the test didn't capture that i might give you the even the rigorous test will not capture such bug because",
    "start": "592480",
    "end": "599040"
  },
  {
    "text": "caching bugs are the worst you can't write enough test to cash cashing to catch",
    "start": "599040",
    "end": "605760"
  },
  {
    "text": "cashing bugs it's very very hard so here they go through the timeline",
    "start": "605760",
    "end": "612640"
  },
  {
    "start": "608000",
    "end": "712000"
  },
  {
    "text": "uh let's go quickly through the timeline what had really happened so on may 27",
    "start": "612640",
    "end": "617680"
  },
  {
    "text": "10 49 this is am i'm gonna assume it's in the morning we deployed the problematic",
    "start": "617680",
    "end": "623600"
  },
  {
    "text": "configuration update and then a few minutes later we began to investigate multiple issues based on",
    "start": "623600",
    "end": "628959"
  },
  {
    "text": "incoming user reports users were being reporting it's like what that's not me we identified the",
    "start": "628959",
    "end": "634320"
  },
  {
    "text": "situation as extremely serious of course raised it as a critical",
    "start": "634320",
    "end": "639680"
  },
  {
    "text": "incident and then escalated to senior management we disabled app features known to be",
    "start": "639680",
    "end": "645600"
  },
  {
    "text": "affected by the incident to prevent further information leaks that is actually",
    "start": "645600",
    "end": "650959"
  },
  {
    "text": "pretty good that they have this hook to disable apps features very quickly if they didn't",
    "start": "650959",
    "end": "657440"
  },
  {
    "text": "have that they would they have to turn off their backend altogether",
    "start": "657440",
    "end": "662880"
  },
  {
    "text": "we identified the configuration update as the poor probable root cause and reverted the",
    "start": "662880",
    "end": "668240"
  },
  {
    "text": "update we completely disabled the app in all markets oh they eventually disable the app so nobody can",
    "start": "668240",
    "end": "674320"
  },
  {
    "text": "download but people obviously who if you disable an app can you actually run it",
    "start": "674320",
    "end": "679839"
  },
  {
    "text": "i'm just interested if you have it downloaded i don't know what does it mean to disable it yeah i",
    "start": "679839",
    "end": "684959"
  },
  {
    "text": "cannot download but what if i have it right we begin to bring the app back online in all markets",
    "start": "684959",
    "end": "691040"
  },
  {
    "text": "the app was fully online in all markets uh at five o'clock so it's not really just",
    "start": "691040",
    "end": "698240"
  },
  {
    "text": "40 minutes it took them seven hours exactly seven hours uh give or take seven",
    "start": "698240",
    "end": "706480"
  },
  {
    "text": "hours to fully restore the surface so it is an outage after all huh",
    "start": "706480",
    "end": "713040"
  },
  {
    "start": "712000",
    "end": "746000"
  },
  {
    "text": "so in an outage caused by a privacy concern that's a very important thing so that's",
    "start": "713040",
    "end": "719040"
  },
  {
    "text": "why we were reporting about it root cause on may 27 clarinet experienced a configuration error",
    "start": "719040",
    "end": "725279"
  },
  {
    "text": "causing clan app users to see some other informations some other users information as soon as",
    "start": "725279",
    "end": "732880"
  },
  {
    "text": "we got the report we we assembled an incident management team that represented all the relevant they",
    "start": "732880",
    "end": "737920"
  },
  {
    "text": "immediately started evaluating and they identified that a problem is the content delivery network",
    "start": "737920",
    "end": "744959"
  },
  {
    "text": "configuration which i assume it reads from their back",
    "start": "744959",
    "end": "750480"
  },
  {
    "text": "end right because certain content delivering with the main purpose of it is caching right",
    "start": "750480",
    "end": "757760"
  },
  {
    "text": "soon after the app was disabled we had confirmed the following a cnn configuration update had",
    "start": "757760",
    "end": "764079"
  },
  {
    "text": "included a line that changed the cache configuration to what no idea the observed erroneous",
    "start": "764079",
    "end": "771760"
  },
  {
    "text": "behavior started right after the cdn configuration update was rolled out okay so they they linked they put",
    "start": "771760",
    "end": "779040"
  },
  {
    "text": "one on one two and two together verified in logs that calls to our back end had been cached in",
    "start": "779040",
    "end": "786240"
  },
  {
    "text": "an unexpected way during the time period so that's a good thing they had logs in",
    "start": "786240",
    "end": "791920"
  },
  {
    "text": "place that tells them that okay this is what we did so they're logging",
    "start": "791920",
    "end": "797279"
  },
  {
    "text": "everything that happens between the cdm and the back end pretty good consulting documentation",
    "start": "797279",
    "end": "803839"
  },
  {
    "text": "and experts it was clear that the cash change would without a doubt result in the observed",
    "start": "803839",
    "end": "810480"
  },
  {
    "text": "errors behavior now you may have a question if that particular change will result in",
    "start": "810480",
    "end": "818399"
  },
  {
    "text": "this why wouldn't the code reviewers of the configuration detect that well let's",
    "start": "818399",
    "end": "825040"
  },
  {
    "text": "let's find out this had us can conclude that the cdn configuration update was the root cause",
    "start": "825040",
    "end": "830880"
  },
  {
    "text": "and the action we took after nowhere based on that now confirmed hypothesis all right",
    "start": "830880",
    "end": "837760"
  },
  {
    "start": "837000",
    "end": "872000"
  },
  {
    "text": "so how did it all start why did you make the configuration scene to begin with a klarna team had prepared a cdn",
    "start": "837760",
    "end": "844399"
  },
  {
    "text": "configuration update as part of a project that aimed to improve the visibility for the user for",
    "start": "844399",
    "end": "849600"
  },
  {
    "text": "where a particular device account was used so there's a new configuration they changed that they try to deploy",
    "start": "849600",
    "end": "856000"
  },
  {
    "text": "which will show you that oh this account has been accessed on this on this time from this location very important pieces",
    "start": "856000",
    "end": "862399"
  },
  {
    "text": "of metadata but to roll out this change they have to make a configuration change obviously to the cdn",
    "start": "862399",
    "end": "868160"
  },
  {
    "text": "which serves this information which reads from a back end this configuration change had been",
    "start": "868160",
    "end": "874720"
  },
  {
    "text": "written by an authorized engineer on one in one team consulting but",
    "start": "874720",
    "end": "880880"
  },
  {
    "text": "mis interpre misinterpreting vendor documentation so i believe the cdn is",
    "start": "880880",
    "end": "886160"
  },
  {
    "text": "the vendor here they didn't specify what vendor they are using the change was then reviewed",
    "start": "886160",
    "end": "891839"
  },
  {
    "text": "by three other authorized engineer in three separate teams so a lot of",
    "start": "891839",
    "end": "897680"
  },
  {
    "text": "people reviewed this according to normal processes no none of them spotted the mistake in the",
    "start": "897680",
    "end": "903600"
  },
  {
    "text": "configuration update and mistakes happen guys right",
    "start": "903600",
    "end": "909040"
  },
  {
    "start": "909000",
    "end": "946000"
  },
  {
    "text": "i wouldn't go uh be hard on the engineers in my opinion right things mistakes happen and you",
    "start": "909040",
    "end": "915279"
  },
  {
    "text": "have to be really knowledgeable to know about these kind of things right but but they",
    "start": "915279",
    "end": "922720"
  },
  {
    "text": "apparently i i think kelana need an expert engineer",
    "start": "922800",
    "end": "930480"
  },
  {
    "text": "that is dedicated just for that cdn right an expert who read the",
    "start": "930480",
    "end": "937040"
  },
  {
    "text": "documentation who knows everything that is to know about that cdn software",
    "start": "937040",
    "end": "942800"
  },
  {
    "text": "they're using i don't think they have that engineer they they look if you have you have the",
    "start": "942800",
    "end": "948399"
  },
  {
    "start": "946000",
    "end": "1020000"
  },
  {
    "text": "subroutine but if you'll give me a code now if you send me a code review and say okay if you say hey i'm saying review this",
    "start": "948399",
    "end": "954160"
  },
  {
    "text": "company i would i don't know anything about i was like oh i'm gonna say yeah sure it's okay i don't know it's like yeah it looks",
    "start": "954160",
    "end": "960160"
  },
  {
    "text": "good there's no syntax there like what does it do we're gonna say oh does this converge that",
    "start": "960160",
    "end": "965680"
  },
  {
    "text": "yeah especially if it's big sometimes if you don't know the ins and out of the certain configuration and what is",
    "start": "965680",
    "end": "972320"
  },
  {
    "text": "do you have no idea what's inside of it we've been we've seen what happened to amazon kinesis with a configuration",
    "start": "972320",
    "end": "977519"
  },
  {
    "text": "sheet we've seen what happened with google themselves with a single configurations always starts with a",
    "start": "977519",
    "end": "982959"
  },
  {
    "text": "configuration right and the configuration can sometimes it's so subtle the leaky",
    "start": "982959",
    "end": "990399"
  },
  {
    "text": "abstraction be behind what the conf configuration actually hides",
    "start": "990399",
    "end": "996639"
  },
  {
    "text": "is massive the configuration abstracts so much complexity so that only really elite engineers who",
    "start": "996639",
    "end": "1004079"
  },
  {
    "text": "understand the ins and out of what's behind this configuration can actually",
    "start": "1004079",
    "end": "1009199"
  },
  {
    "text": "tell you if this is bad or not right and and nobody can be an expert in another thing you get you gotta",
    "start": "1009199",
    "end": "1015600"
  },
  {
    "text": "hire someone who's just the no then ends and after this automatist did not cover verifying the",
    "start": "1015600",
    "end": "1022160"
  },
  {
    "start": "1020000",
    "end": "1142000"
  },
  {
    "text": "cash configuration the cache configuration change was an unintended side effect and part of the",
    "start": "1022160",
    "end": "1027918"
  },
  {
    "text": "larger change even if you write such tests you will not be able to find this",
    "start": "1027919",
    "end": "1034319"
  },
  {
    "text": "part of your bug because it relies on on multiple users being logged in at the same time for this to surface",
    "start": "1034319",
    "end": "1041760"
  },
  {
    "text": "right because if you if you run your automated test you log in as you whatever a user",
    "start": "1041760",
    "end": "1047760"
  },
  {
    "text": "you can you're not necessarily going to run it it's what's the word there is a war for it",
    "start": "1047760",
    "end": "1053919"
  },
  {
    "text": "it's indeterministic caching is indeterministic sometimes you're gonna hit it sometimes yeah",
    "start": "1053919",
    "end": "1059200"
  },
  {
    "text": "sometimes you get a cache sometimes another user you have to have multiple users and you have to hit the same",
    "start": "1059200",
    "end": "1065200"
  },
  {
    "text": "server because the cdn have many servers right you have to hit the same exact instance right",
    "start": "1065200",
    "end": "1073840"
  },
  {
    "text": "to essentially replicate that because if i here's where the bug cannot be",
    "start": "1073840",
    "end": "1079760"
  },
  {
    "text": "reproduced if i log in and then hit one server and cache my",
    "start": "1079760",
    "end": "1087600"
  },
  {
    "text": "information and then another user logged in and hit another server and cache that information i will not see the leak you",
    "start": "1087600",
    "end": "1094000"
  },
  {
    "text": "will not see the other person's personal information because it's a different server you can understand how things work right",
    "start": "1094000",
    "end": "1101840"
  },
  {
    "text": "but if you just so happen and hit the same instance and if you're using like something like docker which we have like",
    "start": "1101840",
    "end": "1108000"
  },
  {
    "text": "i don't know hundreds of instances the the chances that they can happen are so low",
    "start": "1108000",
    "end": "1113360"
  },
  {
    "text": "that it's very hard to replicate a test environment so um i'm actually giving them the",
    "start": "1113360",
    "end": "1119520"
  },
  {
    "text": "benefit of the doubt here how do you write a test like that how",
    "start": "1119520",
    "end": "1126880"
  },
  {
    "text": "you might say no i'm going to spin up multiple messages and just test this but yeah you can do all sorts of",
    "start": "1126880",
    "end": "1133280"
  },
  {
    "text": "things but how would you know that this is what gonna cause it obviously now that they know they might",
    "start": "1133280",
    "end": "1139679"
  },
  {
    "text": "have other uh that they're gonna write the test and do whatever to",
    "start": "1139679",
    "end": "1145120"
  },
  {
    "start": "1142000",
    "end": "1198000"
  },
  {
    "text": "replicate that the change had been deployed into an internal testing environment on may 17",
    "start": "1145120",
    "end": "1150720"
  },
  {
    "text": "and had been part of the validation test numeric uh amorous time between may seven months",
    "start": "1150720",
    "end": "1156080"
  },
  {
    "text": "no errors behavior had been observed in testimony of course very hard to replicate in a",
    "start": "1156080",
    "end": "1161919"
  },
  {
    "text": "test environment again as i said load balancing production configuration",
    "start": "1161919",
    "end": "1167200"
  },
  {
    "text": "many instances you have to be so lucky so that two requests",
    "start": "1167200",
    "end": "1173520"
  },
  {
    "text": "right one rook is a hit server and and you have to use the system a lot for this caching to build up",
    "start": "1173520",
    "end": "1180080"
  },
  {
    "text": "and you have to know what to look for right how do you know right",
    "start": "1180080",
    "end": "1187600"
  },
  {
    "text": "how do you know that the information that you think is actually accurate you have to have obviously it's not hard you can you can",
    "start": "1187600",
    "end": "1193360"
  },
  {
    "text": "just no this is what i'm expecting i'm going to query i'm going to expect this name that comes back let's continue this",
    "start": "1193360",
    "end": "1198640"
  },
  {
    "start": "1198000",
    "end": "1280000"
  },
  {
    "text": "is the most interesting one our comparison specifically to avoid inadvertently cashing through the use",
    "start": "1198640",
    "end": "1204880"
  },
  {
    "text": "of cache control directive found in the http standard i made a video about this no cache no store mastery value these",
    "start": "1204880",
    "end": "1212080"
  },
  {
    "text": "are directives that are sent in the http requested okay cash or don't cash",
    "start": "1212080",
    "end": "1217440"
  },
  {
    "text": "right however they don't use any of that they manually manage everything on the back",
    "start": "1217440",
    "end": "1224000"
  },
  {
    "text": "in which sometimes we have to do sometimes you cannot rely on on the http protocol for for this thing for security reasons and",
    "start": "1224000",
    "end": "1231039"
  },
  {
    "text": "others as well however the cdn configuration can at times override the",
    "start": "1231039",
    "end": "1236240"
  },
  {
    "text": "app configurations this would normally not lead to an information leak since",
    "start": "1236240",
    "end": "1241760"
  },
  {
    "text": "additional protection including user specific cache keys are in",
    "start": "1241760",
    "end": "1247039"
  },
  {
    "text": "are enforced so even if you had this problem where you did cash",
    "start": "1247039",
    "end": "1254159"
  },
  {
    "text": "something that you're not supposed to cash the cash keys that you send with every",
    "start": "1254159",
    "end": "1261520"
  },
  {
    "text": "request will pin you to that cash cash to the cash partition",
    "start": "1261520",
    "end": "1270000"
  },
  {
    "text": "that you need to pick and read that's where you're going to use the",
    "start": "1270000",
    "end": "1276080"
  },
  {
    "text": "cash keys so let's read the next sentence the inadvert",
    "start": "1276080",
    "end": "1281840"
  },
  {
    "start": "1280000",
    "end": "1311000"
  },
  {
    "text": "cache configuration update unfortunately disabled those protection this sentence",
    "start": "1281840",
    "end": "1289679"
  },
  {
    "text": "tells all the story as i said in the beginning the hook that tells",
    "start": "1289679",
    "end": "1297600"
  },
  {
    "text": "the back end or the cdn in this case which cache to read has gone",
    "start": "1297600",
    "end": "1304880"
  },
  {
    "text": "so it will just read whatever caches sees first assuming very very bad",
    "start": "1304880",
    "end": "1312240"
  },
  {
    "text": "here's the repeating that they're all we couldn't reproduce in the testing environment uh obviously we give them the benefit of",
    "start": "1312240",
    "end": "1317919"
  },
  {
    "text": "that out it's very hard to reproduce and once you know how things work you kind of give them uh some slack",
    "start": "1317919",
    "end": "1324880"
  },
  {
    "text": "right obviously i don't know how i feel about this to be honest i mean i as an engineer",
    "start": "1324880",
    "end": "1333200"
  },
  {
    "text": "i feel for the engineers that work in this in the clan because it is difficult problem",
    "start": "1333200",
    "end": "1341520"
  },
  {
    "text": "as a user as a user to be honest this is this is pretty bad right if i log into my bank",
    "start": "1341520",
    "end": "1348240"
  },
  {
    "text": "of america and i've seen someone else's information i would freak out because someone else",
    "start": "1348240",
    "end": "1353679"
  },
  {
    "text": "can't see my information and again we have no idea if you can",
    "start": "1353679",
    "end": "1358799"
  },
  {
    "text": "carry out transactions on behalf of that other user again i'm going to say no based on the",
    "start": "1358799",
    "end": "1365840"
  },
  {
    "text": "architecture that they described here because this is a read architecture we we only know the read",
    "start": "1365840",
    "end": "1371919"
  },
  {
    "text": "part of of things we're talking about cdn right so i'm assuming the actual transaction",
    "start": "1371919",
    "end": "1379760"
  },
  {
    "text": "have to happen through a different backend direct probably because you don't really need to cache anything",
    "start": "1379760",
    "end": "1385200"
  },
  {
    "text": "during writing right you have to follow another firm path so i'm guessing it's it's a different",
    "start": "1385200",
    "end": "1390720"
  },
  {
    "text": "validation different things more restrict obviously captchas and whatnot",
    "start": "1390720",
    "end": "1396480"
  },
  {
    "text": "right you have to enter your password again so yeah i don't think is that bad what we are",
    "start": "1396480",
    "end": "1403440"
  },
  {
    "text": "reading here is bad don't get me wrong right but it's still as long as someone",
    "start": "1403440",
    "end": "1408480"
  },
  {
    "text": "can't transfer the three dollars that i have in my bank account to someone else i'm good",
    "start": "1408480",
    "end": "1413600"
  },
  {
    "text": "remediation what did they do to fix this",
    "start": "1413600",
    "end": "1419600"
  },
  {
    "text": "and then we're gonna go back to the uh so let's read the recommendation and then go back and discuss a little bit",
    "start": "1420159",
    "end": "1426000"
  },
  {
    "text": "and tell you a little story of i had a few years back before i",
    "start": "1426000",
    "end": "1431039"
  },
  {
    "text": "joined esri it's very interesting i think you can enjoy it it's very similar to this",
    "start": "1431039",
    "end": "1436320"
  },
  {
    "text": "it's less catastrophic because i don't deal with thanks remediation we have numerous safeguards",
    "start": "1436320",
    "end": "1442000"
  },
  {
    "start": "1439000",
    "end": "1564000"
  },
  {
    "text": "in place to protect personal information even so keeping these safeguards strong",
    "start": "1442000",
    "end": "1447200"
  },
  {
    "text": "requires continuous improvement and optimization we have identified areas of improvement that reduce the risk",
    "start": "1447200",
    "end": "1453440"
  },
  {
    "text": "and impact of similar incidents in the future additional monitoring and anomaly detection processes have been",
    "start": "1453440",
    "end": "1459200"
  },
  {
    "text": "implemented these will allow us to react to unexpected changes even faster i mean you found it within",
    "start": "1459200",
    "end": "1467600"
  },
  {
    "text": "nine minutes but did you find it yourself or did someone report it if someone reported it then you didn't",
    "start": "1467600",
    "end": "1474000"
  },
  {
    "text": "really find it someone else did but can how can you detect anomalies",
    "start": "1474000",
    "end": "1479360"
  },
  {
    "text": "right it's interesting i don't know much about this anomaly section i think it says",
    "start": "1479360",
    "end": "1484640"
  },
  {
    "text": "science by itself you can be an abac engineer that is specific niched",
    "start": "1484640",
    "end": "1493679"
  },
  {
    "text": "into anomaly detection and you're going to be paid hands over fest",
    "start": "1493679",
    "end": "1501600"
  },
  {
    "text": "for your expertise by the way is that the right saying handover fist i think it says",
    "start": "1501600",
    "end": "1508720"
  },
  {
    "text": "because this is apparently is gonna probably gonna continue facing the fintech uh community",
    "start": "1508960",
    "end": "1515440"
  },
  {
    "text": "back in community specifically we have also introduced several changes",
    "start": "1515440",
    "end": "1522480"
  },
  {
    "text": "to ensure that the cash configurations are handled with extra care what does that mean extra care what are",
    "start": "1522480",
    "end": "1528400"
  },
  {
    "text": "you gonna give it a spa are you gonna take your cash to the spa what is that what does that mean extra care",
    "start": "1528400",
    "end": "1533760"
  },
  {
    "text": "ah i have this abstract word that don't mean anything extra care",
    "start": "1533760",
    "end": "1539360"
  },
  {
    "text": "yeah we're gonna take it to the we're gonna give the cash a bath we're gonna uh take it to the spa",
    "start": "1539360",
    "end": "1547919"
  },
  {
    "text": "we're gonna do a massage for the cash because the cash is really tired serving all this request",
    "start": "1547919",
    "end": "1553279"
  },
  {
    "text": "we're gonna handle it with extra care it's a fragile the cash is fragile and before you ship the cash put that",
    "start": "1553279",
    "end": "1559600"
  },
  {
    "text": "sticker that says fragile in it extra care cheese extra care",
    "start": "1559600",
    "end": "1565200"
  },
  {
    "start": "1564000",
    "end": "1631000"
  },
  {
    "text": "okay to address this we have added several new restrictions and warning",
    "start": "1565200",
    "end": "1570640"
  },
  {
    "text": "when making configuration changes i love it i love it i love it a lot i love it",
    "start": "1570640",
    "end": "1577360"
  },
  {
    "text": "which will force additional review before committing similar change in the future okay so they're adding the code review",
    "start": "1577360",
    "end": "1583840"
  },
  {
    "text": "has to be more regular again i really think some someone you you",
    "start": "1583840",
    "end": "1589039"
  },
  {
    "text": "don't really you shouldn't have an engineer reading through the doc that is expert in this",
    "start": "1589039",
    "end": "1595679"
  },
  {
    "text": "yeah but i think the engineer should know the ins and outs of the cdm i mean as a fintech company this this really you",
    "start": "1595679",
    "end": "1602080"
  },
  {
    "text": "need an expert in this configuration someone that is dedicated",
    "start": "1602080",
    "end": "1607440"
  },
  {
    "text": "for that task only don't don't stretch your engineers so thin that day oh you're gonna do this",
    "start": "1607440",
    "end": "1613679"
  },
  {
    "text": "and do this and do this and by the way you have to do this if you're doing that",
    "start": "1613679",
    "end": "1619679"
  },
  {
    "text": "i don't really i don't know what to say you have engineers specify special to",
    "start": "1619840",
    "end": "1627120"
  },
  {
    "text": "this because this is a very delicate area i believe we will also",
    "start": "1627120",
    "end": "1632640"
  },
  {
    "start": "1631000",
    "end": "1748000"
  },
  {
    "text": "implement additional checks in in the app to validate responses from oh",
    "start": "1632640",
    "end": "1638080"
  },
  {
    "text": "oh that's interesting so there's a front-end change too so the fronted app they're going to make",
    "start": "1638080",
    "end": "1644320"
  },
  {
    "text": "a validation to the value response from our back-end so how would you do how would you go",
    "start": "1644320",
    "end": "1650799"
  },
  {
    "text": "implementing something like that how would you know that the information you receive is actually correct you need",
    "start": "1650799",
    "end": "1656640"
  },
  {
    "text": "something that matches well you can you can say you user id because i have the user id",
    "start": "1656640",
    "end": "1663039"
  },
  {
    "text": "cached i guess stored on my device right and when i send it i'm gonna log in with my face id and then",
    "start": "1663039",
    "end": "1669279"
  },
  {
    "text": "obviously send the passwords and whatever the token or maybe negotiate and then when i",
    "start": "1669279",
    "end": "1674399"
  },
  {
    "text": "get back information i'm gonna match did the i user id that i get back equal to mine",
    "start": "1674399",
    "end": "1679840"
  },
  {
    "text": "if it doesn't close the app just fail crash i better yeah it's better to",
    "start": "1679840",
    "end": "1685760"
  },
  {
    "text": "crash the app than actually show that information so i didn't expect that i think this is a",
    "start": "1685760",
    "end": "1692000"
  },
  {
    "text": "good change still stone not great because if i am sniffing",
    "start": "1692000",
    "end": "1697279"
  },
  {
    "text": "it's me that i terminated tls of the app and i'm looking through the traffic because i can right if i have control",
    "start": "1697279",
    "end": "1704559"
  },
  {
    "text": "over that i can point the app to point to a proxy and that proxy is like a man in the",
    "start": "1704559",
    "end": "1710480"
  },
  {
    "text": "middle proxy which i talked about right here and then men in the middle proxy we'll talk about we'll talk to the",
    "start": "1710480",
    "end": "1715840"
  },
  {
    "text": "uh to kill in now whatever it's called the bank then i can see all the traffic and then",
    "start": "1715840",
    "end": "1721919"
  },
  {
    "text": "if i'm in that configuration i can definitely see the other person function even more you can see more",
    "start": "1721919",
    "end": "1727840"
  },
  {
    "text": "details because what comes back from back end is way more than what is displayed in the app right",
    "start": "1727840",
    "end": "1736480"
  },
  {
    "text": "okay the final thing we take extra uh protection of our user prophecy very seriously and certainly",
    "start": "1736480",
    "end": "1742320"
  },
  {
    "text": "regret this incident aboraka we will do everything we can to learn from this experience",
    "start": "1742320",
    "end": "1747360"
  },
  {
    "text": "again i think this is good i think whatever they doing they did everything they could i",
    "start": "1747360",
    "end": "1753600"
  },
  {
    "text": "think they should again hire someone that is specialized",
    "start": "1753600",
    "end": "1758880"
  },
  {
    "text": "in understanding that portion of the cdn which is apparently from what i'm",
    "start": "1758880",
    "end": "1764399"
  },
  {
    "text": "reading they don't have that someone they have someone's okay oh let's have someone from this team read this configuration",
    "start": "1764399",
    "end": "1770559"
  },
  {
    "text": "maybe i'm wrong but this is what i got from them i think they should invest on that person so guys so this is what this",
    "start": "1770559",
    "end": "1776240"
  },
  {
    "start": "1775000",
    "end": "2098000"
  },
  {
    "text": "was the news it's pretty bad",
    "start": "1776240",
    "end": "1781600"
  },
  {
    "text": "right to to open the app and all of a sudden you're seeing someone else's information",
    "start": "1781600",
    "end": "1788480"
  },
  {
    "text": "right nasty stuff very nasty but",
    "start": "1788480",
    "end": "1795840"
  },
  {
    "text": "but when i when i read that article i i couldn't help but remember something",
    "start": "1796960",
    "end": "1802640"
  },
  {
    "text": "happened i think maybe seven years ago or so and it was the the same within the same role of",
    "start": "1802640",
    "end": "1810880"
  },
  {
    "text": "cash mishandling on my part well no i wasn't the developer but i",
    "start": "1810880",
    "end": "1817679"
  },
  {
    "text": "discovered the bug [Music] and then i took around a day",
    "start": "1817679",
    "end": "1825360"
  },
  {
    "text": "a whole day just to find out what that bug was and let me explain to you",
    "start": "1825360",
    "end": "1830960"
  },
  {
    "text": "there's a lot of technical stuff so i can't explain this to you because it is gisc stuff and i i don't know if",
    "start": "1830960",
    "end": "1838000"
  },
  {
    "text": "i i can't even talk about it happened seven years ago but i'll start to be as as as obscure as",
    "start": "1838000",
    "end": "1844720"
  },
  {
    "text": "possible so that i don't reveal anything about the company when i log in as an admin here's what the the behavior that would",
    "start": "1844720",
    "end": "1851279"
  },
  {
    "text": "happen i would create an this item okay and i give it a name",
    "start": "1851279",
    "end": "1856320"
  },
  {
    "text": "and then i turn around and delete that item again by name and then i log out",
    "start": "1856320",
    "end": "1864240"
  },
  {
    "text": "and i use a completely different browser and i you log in not as an admin as a normal",
    "start": "1864240",
    "end": "1870880"
  },
  {
    "text": "user and then i create another item using the",
    "start": "1870880",
    "end": "1876080"
  },
  {
    "text": "same name as the item that i just deleted the item",
    "start": "1876080",
    "end": "1881360"
  },
  {
    "text": "sometimes comes up as the admin as owned by the admin and as a result it gives you more",
    "start": "1881360",
    "end": "1888880"
  },
  {
    "text": "privileges which is very dangerous stuff right your session now have more because",
    "start": "1888880",
    "end": "1894000"
  },
  {
    "text": "you created that it's it's been created as the admin which is false but it created by the user but also",
    "start": "1894000",
    "end": "1900559"
  },
  {
    "text": "gives you some other information as well that you shouldn't really see so to find out what went wrong",
    "start": "1900559",
    "end": "1907679"
  },
  {
    "text": "it was so hard right because i had first of all is it a caching in the",
    "start": "1907679",
    "end": "1912799"
  },
  {
    "text": "client side is is it a session is a cookie that being sent as an admin so i blame the browser",
    "start": "1912799",
    "end": "1919120"
  },
  {
    "text": "and then when i when i reproduce again you can't reproduce it every time",
    "start": "1919120",
    "end": "1924640"
  },
  {
    "text": "when you refresh and you create an item sometimes it comes out as a user sometimes it comes up as the admin it's so confusing so i went to another",
    "start": "1924640",
    "end": "1932320"
  },
  {
    "text": "ink tried an incognito and all of a sudden what happened is i i i reproduced it with an incognito",
    "start": "1932320",
    "end": "1940159"
  },
  {
    "text": "that means okay we're not sending the cookie we're not sending the session that means it's a server-side buck now i went all the way to the back end",
    "start": "1940159",
    "end": "1947039"
  },
  {
    "text": "and then try to write an app that reproduced this right and what i chained i i had to make",
    "start": "1947039",
    "end": "1954240"
  },
  {
    "text": "a configuration on the back end for this to reproduce consistently by minimizing the number of processes",
    "start": "1954240",
    "end": "1961120"
  },
  {
    "text": "that my back end runs to one and i disabled multi-threading two so we",
    "start": "1961120",
    "end": "1966320"
  },
  {
    "text": "have only one thread and a single cache so that information the cache is when a singleton cache",
    "start": "1966320",
    "end": "1972080"
  },
  {
    "text": "essentially becomes and it immediately became reproducible essentially it's it's a very it's a",
    "start": "1972080",
    "end": "1978080"
  },
  {
    "text": "silly bug what we're doing where we're we were storing the cache",
    "start": "1978080",
    "end": "1984640"
  },
  {
    "text": "the key size of the cache is actually the name of the item which is obviously wrong because",
    "start": "1984640",
    "end": "1990640"
  },
  {
    "text": "the name is not unique so that's what happened here when we created the first item",
    "start": "1990640",
    "end": "1996159"
  },
  {
    "text": "as the admin and i named it test and then i deleted that item i found the item and i deleted",
    "start": "1996159",
    "end": "2004080"
  },
  {
    "text": "with the id obviously on the back you have to do with the id but the cash remained here so the cash",
    "start": "2004080",
    "end": "2009760"
  },
  {
    "text": "of the item remained and when i went to another",
    "start": "2009760",
    "end": "2014960"
  },
  {
    "text": "browser session i created the item it checked oh do i have a cache for this so i don't have to",
    "start": "2015120",
    "end": "2020880"
  },
  {
    "text": "uh recall the the service to find the identity of the user and all that stuff",
    "start": "2020880",
    "end": "2027039"
  },
  {
    "text": "do i have a cache about this item information and oh i do have a",
    "start": "2027039",
    "end": "2032240"
  },
  {
    "text": "cache because i just search by name and find this stale cache and it picked it up and say oh you are",
    "start": "2032240",
    "end": "2037440"
  },
  {
    "text": "an admin because that's the session information there are so many bugs in that arena in",
    "start": "2037440",
    "end": "2042960"
  },
  {
    "text": "this case and all of a sudden obviously that the rest of history you know the",
    "start": "2042960",
    "end": "2049200"
  },
  {
    "text": "the solution was to basically to try to invalidate the cash when you",
    "start": "2049200",
    "end": "2054320"
  },
  {
    "text": "delete an item because that cash doesn't have no business being there the second thing is maybe you don't",
    "start": "2054320",
    "end": "2059440"
  },
  {
    "text": "don't store the cache as the name use it in the timezone but that's what does it that's just a very big change because in",
    "start": "2059440",
    "end": "2066480"
  },
  {
    "text": "the app we always deal with the item name right maybe that that will require a huge change",
    "start": "2066480",
    "end": "2072158"
  },
  {
    "text": "obviously but that was uh i thought this is something very similar to this not really as bad but a very similar and",
    "start": "2072159",
    "end": "2078878"
  },
  {
    "text": "i thought i'd share this with you guys all right guys i'm gonna end the video here and uh let me know",
    "start": "2078879",
    "end": "2084480"
  },
  {
    "text": "do you have horror story of cash horror and problems that you faced let",
    "start": "2084480",
    "end": "2091520"
  },
  {
    "text": "me know in the comment section below and i'm going to see you on the next one you guys stay awesome",
    "start": "2091520",
    "end": "2097118"
  },
  {
    "text": "goodbye this guy",
    "start": "2097119",
    "end": "2100480"
  }
]