[
  {
    "start": "0",
    "end": "50000"
  },
  {
    "text": "guys public postgres instances are being",
    "start": "160",
    "end": "4480"
  },
  {
    "text": "compromised and used as a botnet",
    "start": "4480",
    "end": "8639"
  },
  {
    "text": "to mine bitcoin this one is interesting",
    "start": "8639",
    "end": "12080"
  },
  {
    "text": "let's just jump into it so there is",
    "start": "12080",
    "end": "14160"
  },
  {
    "text": "a botnet called pg mino stands for",
    "start": "14160",
    "end": "17440"
  },
  {
    "text": "postgres miner and it is scanning the",
    "start": "17440",
    "end": "20880"
  },
  {
    "text": "internet",
    "start": "20880",
    "end": "22000"
  },
  {
    "text": "for publicly accessible postgres",
    "start": "22000",
    "end": "24400"
  },
  {
    "text": "instances",
    "start": "24400",
    "end": "25840"
  },
  {
    "text": "guessing the postgres password getting",
    "start": "25840",
    "end": "29119"
  },
  {
    "text": "into the",
    "start": "29119",
    "end": "29920"
  },
  {
    "text": "actual database using the postgres",
    "start": "29920",
    "end": "32000"
  },
  {
    "text": "credentials",
    "start": "32000",
    "end": "32960"
  },
  {
    "text": "and then getting access to the operating",
    "start": "32960",
    "end": "35360"
  },
  {
    "text": "system and installing",
    "start": "35360",
    "end": "37200"
  },
  {
    "text": "the pgminer software which actually used",
    "start": "37200",
    "end": "40320"
  },
  {
    "text": "that",
    "start": "40320",
    "end": "40800"
  },
  {
    "text": "instance to mine bitcoin how about we",
    "start": "40800",
    "end": "43920"
  },
  {
    "text": "jump into it and see",
    "start": "43920",
    "end": "44879"
  },
  {
    "text": "explain exactly how this works it's very",
    "start": "44879",
    "end": "47680"
  },
  {
    "text": "very interesting",
    "start": "47680",
    "end": "49440"
  },
  {
    "text": "so the first thing that this botnet does",
    "start": "49440",
    "end": "53039"
  },
  {
    "start": "50000",
    "end": "230000"
  },
  {
    "text": "it is scans public",
    "start": "53039",
    "end": "54800"
  },
  {
    "text": "network ranges ip for",
    "start": "54800",
    "end": "58320"
  },
  {
    "text": "the port for 5432 which is their default",
    "start": "58320",
    "end": "61280"
  },
  {
    "text": "port",
    "start": "61280",
    "end": "61840"
  },
  {
    "text": "for postgres instances so the",
    "start": "61840",
    "end": "65360"
  },
  {
    "text": "we talked about this all the time guys",
    "start": "65360",
    "end": "66960"
  },
  {
    "text": "right there is no need for the postgres",
    "start": "66960",
    "end": "69600"
  },
  {
    "text": "database to be publicly accessible",
    "start": "69600",
    "end": "72799"
  },
  {
    "text": "the postgres database should only be",
    "start": "72799",
    "end": "75360"
  },
  {
    "text": "accessible from a certain ip addresses",
    "start": "75360",
    "end": "78159"
  },
  {
    "text": "and those are the back end application",
    "start": "78159",
    "end": "80560"
  },
  {
    "text": "that needs access to this database",
    "start": "80560",
    "end": "82880"
  },
  {
    "text": "having a postgres instance that is just",
    "start": "82880",
    "end": "85520"
  },
  {
    "text": "open",
    "start": "85520",
    "end": "86240"
  },
  {
    "text": "for anyone to just connect to just",
    "start": "86240",
    "end": "88400"
  },
  {
    "text": "doesn't make any sense",
    "start": "88400",
    "end": "90240"
  },
  {
    "text": "right not just it's it's insecure plus",
    "start": "90240",
    "end": "92640"
  },
  {
    "text": "it doesn't make any sense so",
    "start": "92640",
    "end": "94079"
  },
  {
    "text": "regardless so there are bad practices",
    "start": "94079",
    "end": "96880"
  },
  {
    "text": "out there",
    "start": "96880",
    "end": "97360"
  },
  {
    "text": "and there are those instances living in",
    "start": "97360",
    "end": "100159"
  },
  {
    "text": "an impulse chris elephant",
    "start": "100159",
    "end": "101840"
  },
  {
    "text": "elephant sequel and and aws and other",
    "start": "101840",
    "end": "105200"
  },
  {
    "text": "instances so we have those",
    "start": "105200",
    "end": "106880"
  },
  {
    "text": "still there is a there is still a",
    "start": "106880",
    "end": "109200"
  },
  {
    "text": "password to get in right",
    "start": "109200",
    "end": "110560"
  },
  {
    "text": "the next thing that this software does",
    "start": "110560",
    "end": "113600"
  },
  {
    "text": "it tries to guess the default username",
    "start": "113600",
    "end": "116240"
  },
  {
    "text": "which is what",
    "start": "116240",
    "end": "117360"
  },
  {
    "text": "the postgres username it tries to guess",
    "start": "117360",
    "end": "120320"
  },
  {
    "text": "the",
    "start": "120320",
    "end": "121040"
  },
  {
    "text": "the password of that username and that's",
    "start": "121040",
    "end": "123520"
  },
  {
    "text": "another thing that we have to",
    "start": "123520",
    "end": "125680"
  },
  {
    "text": "talk about right postgres the default",
    "start": "125680",
    "end": "127759"
  },
  {
    "text": "postcast user should be disabled",
    "start": "127759",
    "end": "129599"
  },
  {
    "text": "right because why do you have it try",
    "start": "129599",
    "end": "132640"
  },
  {
    "text": "as much as possible to not give clues of",
    "start": "132640",
    "end": "135280"
  },
  {
    "text": "your",
    "start": "135280",
    "end": "136160"
  },
  {
    "text": "uh database to outside world so",
    "start": "136160",
    "end": "139200"
  },
  {
    "text": "the postgres user why do you have to use",
    "start": "139200",
    "end": "141360"
  },
  {
    "text": "it disable that",
    "start": "141360",
    "end": "142480"
  },
  {
    "text": "created a brand new one just for you so",
    "start": "142480",
    "end": "145520"
  },
  {
    "text": "just make their life a little bit harder",
    "start": "145520",
    "end": "148000"
  },
  {
    "text": "essentially",
    "start": "148000",
    "end": "149120"
  },
  {
    "text": "anyway so there's a postgres user and",
    "start": "149120",
    "end": "151360"
  },
  {
    "text": "they would try to",
    "start": "151360",
    "end": "152640"
  },
  {
    "text": "boot for the password to get into the",
    "start": "152640",
    "end": "154640"
  },
  {
    "text": "password to get into the",
    "start": "154640",
    "end": "156000"
  },
  {
    "text": "database essentially right that postgres",
    "start": "156000",
    "end": "158160"
  },
  {
    "text": "user is an administrator so",
    "start": "158160",
    "end": "159599"
  },
  {
    "text": "it technically can do pretty much",
    "start": "159599",
    "end": "162080"
  },
  {
    "text": "anything",
    "start": "162080",
    "end": "163040"
  },
  {
    "text": "in the database so once you get access",
    "start": "163040",
    "end": "166000"
  },
  {
    "text": "to that",
    "start": "166000",
    "end": "166480"
  },
  {
    "text": "if you think about it now they can",
    "start": "166480",
    "end": "168480"
  },
  {
    "text": "technically encrypt the databases they",
    "start": "168480",
    "end": "170720"
  },
  {
    "text": "can pull off for ransomware by",
    "start": "170720",
    "end": "172560"
  },
  {
    "text": "encrypting the password deleting it and",
    "start": "172560",
    "end": "174239"
  },
  {
    "text": "uploading the archive to their own",
    "start": "174239",
    "end": "177920"
  },
  {
    "text": "instance and they say hey if you want",
    "start": "178640",
    "end": "182000"
  },
  {
    "text": "if you want your database and your data",
    "start": "182000",
    "end": "185200"
  },
  {
    "text": "uh give us um give us this much bitcoins",
    "start": "185200",
    "end": "189200"
  },
  {
    "text": "uh on this bitcoin address right so they",
    "start": "189200",
    "end": "191760"
  },
  {
    "text": "could have done that but they decided in",
    "start": "191760",
    "end": "193760"
  },
  {
    "text": "this case",
    "start": "193760",
    "end": "194640"
  },
  {
    "text": "to silently use that instance",
    "start": "194640",
    "end": "198400"
  },
  {
    "text": "to mine bitcoin instead how do you do",
    "start": "198400",
    "end": "201519"
  },
  {
    "text": "how do they do that though right okay",
    "start": "201519",
    "end": "203280"
  },
  {
    "text": "they have access to the postgres",
    "start": "203280",
    "end": "205360"
  },
  {
    "text": "database but they cannot run the",
    "start": "205360",
    "end": "206799"
  },
  {
    "text": "programs with that right it's just a",
    "start": "206799",
    "end": "208319"
  },
  {
    "text": "database right",
    "start": "208319",
    "end": "209280"
  },
  {
    "text": "it's it's you cannot run programs with",
    "start": "209280",
    "end": "211120"
  },
  {
    "text": "that here's the intelligent book",
    "start": "211120",
    "end": "214080"
  },
  {
    "text": "and it's not really explained in this",
    "start": "214080",
    "end": "216239"
  },
  {
    "text": "article",
    "start": "216239",
    "end": "217599"
  },
  {
    "text": "but i did a little bit dig in and",
    "start": "217599",
    "end": "219360"
  },
  {
    "text": "there's there are many ways to do that",
    "start": "219360",
    "end": "221519"
  },
  {
    "text": "so there is a command called copy from",
    "start": "221519",
    "end": "225040"
  },
  {
    "text": "and copy 2 program",
    "start": "225040",
    "end": "228400"
  },
  {
    "text": "in postgres what this does here are some",
    "start": "228400",
    "end": "231760"
  },
  {
    "start": "230000",
    "end": "410000"
  },
  {
    "text": "examples of what you can do",
    "start": "231760",
    "end": "233439"
  },
  {
    "text": "so copy from you can give it a table",
    "start": "233439",
    "end": "237439"
  },
  {
    "text": "copy the table name from",
    "start": "237439",
    "end": "241040"
  },
  {
    "text": "and a file name or anything that is on",
    "start": "241040",
    "end": "243599"
  },
  {
    "text": "this the program itself",
    "start": "243599",
    "end": "245280"
  },
  {
    "text": "and what it would do it will copy the",
    "start": "245280",
    "end": "247840"
  },
  {
    "text": "content",
    "start": "247840",
    "end": "248560"
  },
  {
    "text": "of this file on the operating system",
    "start": "248560",
    "end": "251599"
  },
  {
    "text": "to this table so you can technically",
    "start": "251599",
    "end": "254480"
  },
  {
    "text": "copy anything you want as long",
    "start": "254480",
    "end": "256639"
  },
  {
    "text": "as the username running the postgres",
    "start": "256639",
    "end": "259759"
  },
  {
    "text": "instance itself has privilege to access",
    "start": "259759",
    "end": "263199"
  },
  {
    "text": "that directly",
    "start": "263199",
    "end": "264160"
  },
  {
    "text": "you'll be able to access it you can copy",
    "start": "264160",
    "end": "266400"
  },
  {
    "text": "pretty much anything you want",
    "start": "266400",
    "end": "268160"
  },
  {
    "text": "from there right so that's one way to do",
    "start": "268160",
    "end": "270960"
  },
  {
    "text": "it right",
    "start": "270960",
    "end": "271759"
  },
  {
    "text": "so you can copy the ssh keys that are",
    "start": "271759",
    "end": "274479"
  },
  {
    "text": "there you can copy if there are",
    "start": "274479",
    "end": "276000"
  },
  {
    "text": "passwords you can copy there",
    "start": "276000",
    "end": "277520"
  },
  {
    "text": "you can copy stuff from there the other",
    "start": "277520",
    "end": "280000"
  },
  {
    "text": "way you can use",
    "start": "280000",
    "end": "281360"
  },
  {
    "text": "cop copy 2 which is the other way",
    "start": "281360",
    "end": "285520"
  },
  {
    "text": "you can inject stuff into",
    "start": "285520",
    "end": "288639"
  },
  {
    "text": "the postgres instance so here's what you",
    "start": "288639",
    "end": "291199"
  },
  {
    "text": "can do as an attacker",
    "start": "291199",
    "end": "292639"
  },
  {
    "text": "to access the operating system to be",
    "start": "292639",
    "end": "295040"
  },
  {
    "text": "able to ssh into the operating system",
    "start": "295040",
    "end": "298240"
  },
  {
    "text": "itself using postgres you can create",
    "start": "298240",
    "end": "301919"
  },
  {
    "text": "an ssh keys on your attacker machine",
    "start": "301919",
    "end": "305199"
  },
  {
    "text": "your terminal machine that will give you",
    "start": "305199",
    "end": "306880"
  },
  {
    "text": "a public key and a private key",
    "start": "306880",
    "end": "308560"
  },
  {
    "text": "you take your public key and then you",
    "start": "308560",
    "end": "312000"
  },
  {
    "text": "store it in a table in this database",
    "start": "312000",
    "end": "315919"
  },
  {
    "text": "right let's call it ssh and then using",
    "start": "315919",
    "end": "318720"
  },
  {
    "text": "that table you can com you do",
    "start": "318720",
    "end": "320479"
  },
  {
    "text": "the command copy ssh the table itself",
    "start": "320479",
    "end": "323600"
  },
  {
    "text": "which has the public cure public key to",
    "start": "323600",
    "end": "326560"
  },
  {
    "text": "a program and you specify the path",
    "start": "326560",
    "end": "329520"
  },
  {
    "text": "where all the authorized ssh keys",
    "start": "329520",
    "end": "333759"
  },
  {
    "text": "are and you can shove your authorized",
    "start": "333759",
    "end": "336960"
  },
  {
    "text": "public key into the operating system",
    "start": "336960",
    "end": "340160"
  },
  {
    "text": "again if you if the postgres user the",
    "start": "340160",
    "end": "343120"
  },
  {
    "text": "the user",
    "start": "343120",
    "end": "344000"
  },
  {
    "text": "running the postgres instance have",
    "start": "344000",
    "end": "346560"
  },
  {
    "text": "access",
    "start": "346560",
    "end": "347199"
  },
  {
    "text": "you will just write it there so the next",
    "start": "347199",
    "end": "349360"
  },
  {
    "text": "time you suggestion to the machine",
    "start": "349360",
    "end": "351280"
  },
  {
    "text": "you will be presenting your public key",
    "start": "351280",
    "end": "353600"
  },
  {
    "text": "and",
    "start": "353600",
    "end": "354400"
  },
  {
    "text": "the server will say oh this public key",
    "start": "354400",
    "end": "356160"
  },
  {
    "text": "is actually trusted so let me actually",
    "start": "356160",
    "end": "357919"
  },
  {
    "text": "encrypt a message",
    "start": "357919",
    "end": "358960"
  },
  {
    "text": "send it back to you you will have the",
    "start": "358960",
    "end": "360880"
  },
  {
    "text": "private key so you'll be able to decrypt",
    "start": "360880",
    "end": "362479"
  },
  {
    "text": "the message and this way you will",
    "start": "362479",
    "end": "364080"
  },
  {
    "text": "establish a trust with that with the",
    "start": "364080",
    "end": "366160"
  },
  {
    "text": "with the victim machine which is the",
    "start": "366160",
    "end": "367600"
  },
  {
    "text": "postgres",
    "start": "367600",
    "end": "368400"
  },
  {
    "text": "and you'll be able to association to the",
    "start": "368400",
    "end": "370400"
  },
  {
    "text": "machine once us assertion to the machine",
    "start": "370400",
    "end": "372880"
  },
  {
    "text": "it's the wild wild west you can run your",
    "start": "372880",
    "end": "375919"
  },
  {
    "text": "shady botnet that essentially",
    "start": "375919",
    "end": "379039"
  },
  {
    "text": "mine bitcoin and that is it basically",
    "start": "379039",
    "end": "382560"
  },
  {
    "text": "right this one is really dangerous guys",
    "start": "382560",
    "end": "385919"
  },
  {
    "text": "and uh here's here's a nice uh",
    "start": "385919",
    "end": "389039"
  },
  {
    "text": "diagram of what how what they were they",
    "start": "389039",
    "end": "391120"
  },
  {
    "text": "actually doing the attacker is using tor",
    "start": "391120",
    "end": "392960"
  },
  {
    "text": "so they can be identified",
    "start": "392960",
    "end": "394560"
  },
  {
    "text": "and then in from tor they will run",
    "start": "394560",
    "end": "397360"
  },
  {
    "text": "exactly what we described",
    "start": "397360",
    "end": "398800"
  },
  {
    "text": "and then they will mine the out of",
    "start": "398800",
    "end": "401039"
  },
  {
    "text": "everything",
    "start": "401039",
    "end": "401919"
  },
  {
    "text": "essentially mining bitcoins all right",
    "start": "401919",
    "end": "404479"
  },
  {
    "text": "guys that's it for me today what do you",
    "start": "404479",
    "end": "405759"
  },
  {
    "text": "think about this attack let me know in",
    "start": "405759",
    "end": "407039"
  },
  {
    "text": "the comment section below",
    "start": "407039",
    "end": "408000"
  },
  {
    "text": "i'm gonna see you in the next one you",
    "start": "408000",
    "end": "409440"
  },
  {
    "text": "guys stay awesome goodbye",
    "start": "409440",
    "end": "412479"
  }
]