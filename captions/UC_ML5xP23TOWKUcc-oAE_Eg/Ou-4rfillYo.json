[
  {
    "start": "0",
    "end": "265000"
  },
  {
    "text": "cloudfare has grown to be more than where it started a Content delivery",
    "start": "80",
    "end": "6399"
  },
  {
    "text": "Network it started as a CDN but now it's way more than that but it's score it's a",
    "start": "6399",
    "end": "14080"
  },
  {
    "text": "Content delivery Network and This Global",
    "start": "14080",
    "end": "19680"
  },
  {
    "text": "content delivery Network those guys face a lot of challenges beautiful challenges software",
    "start": "19680",
    "end": "27359"
  },
  {
    "text": "engineering challenges that we can learn R in this particular video we'll talk",
    "start": "27359",
    "end": "33840"
  },
  {
    "text": "about a beautiful article they they authored recently and it is how do they",
    "start": "33840",
    "end": "40480"
  },
  {
    "text": "manage purging stale cashed",
    "start": "40480",
    "end": "47199"
  },
  {
    "text": "content on demand they added this feature they say hey you're a user we",
    "start": "47199",
    "end": "52920"
  },
  {
    "text": "cash your stuff by default you know based on certain criteria if user makes a request we cash it we put in our",
    "start": "52920",
    "end": "59600"
  },
  {
    "text": "Network work uh and then uh closer to the as close as possible to the user to",
    "start": "59600",
    "end": "65799"
  },
  {
    "text": "the customer and then if that cash is expired or eved because the freshness is",
    "start": "65799",
    "end": "73799"
  },
  {
    "text": "out of date the TTL has gone we'll make a request to your backend application",
    "start": "73799",
    "end": "79280"
  },
  {
    "text": "which is basically cuz that's what a CDN is it's just a reverse proxy really glorified reverse proxy with a lot of",
    "start": "79280",
    "end": "86159"
  },
  {
    "text": "you know bills and wles right so we we we will talk to your original server the",
    "start": "86159",
    "end": "92640"
  },
  {
    "text": "backend server and f a fresh copy right and that's the challenge you as a",
    "start": "92640",
    "end": "98079"
  },
  {
    "text": "customer of cloud flare you pointed your domain to their IPs and as a result you",
    "start": "98079",
    "end": "104040"
  },
  {
    "text": "uh you give them permission to decrypt your content and cash it okay so by doing that they give you features",
    "start": "104040",
    "end": "112960"
  },
  {
    "text": "to actively Purge certain content so let's say you're running a news site or",
    "start": "112960",
    "end": "119960"
  },
  {
    "text": "I know currency based side that the the M the you know the currency changes all",
    "start": "119960",
    "end": "125960"
  },
  {
    "text": "the time or things that is like hot data that get updated all the time you know how does cloudfare knows that something",
    "start": "125960",
    "end": "133000"
  },
  {
    "text": "has changed on your backend application you have to tell them right but it's",
    "start": "133000",
    "end": "138280"
  },
  {
    "text": "it's only one way communication the backend doesn't communicate with this the C CDN the CDN talks to the back end",
    "start": "138280",
    "end": "144760"
  },
  {
    "text": "right so as a result they give you a feature to purge this content and",
    "start": "144760",
    "end": "150760"
  },
  {
    "text": "that they can do it in their new design system in 150",
    "start": "150760",
    "end": "157200"
  },
  {
    "text": "millisecond entire Globe so if you have customers if you're a customer of cloud flare your by default will lit up across",
    "start": "157200",
    "end": "164720"
  },
  {
    "text": "the entire world you will have customers from India uh Australia America Dubai anywhere in the",
    "start": "164720",
    "end": "174040"
  },
  {
    "text": "world and they will have their local servers Cloud will live in those C",
    "start": "174040",
    "end": "179840"
  },
  {
    "text": "cities and very close City by from the clients making request to your servers",
    "start": "179840",
    "end": "186440"
  },
  {
    "text": "which is very neat right and you will be given a feature to purge all of this",
    "start": "186440",
    "end": "192599"
  },
  {
    "text": "content in 150 millisecond so here in this video we'll explore all of that how",
    "start": "192599",
    "end": "200000"
  },
  {
    "text": "do they do it we'll go into this blog and and just I have few little bit doubt",
    "start": "200000",
    "end": "206840"
  },
  {
    "text": "little bit questions we'll just enjoy this ride we'll learn together let's",
    "start": "206840",
    "end": "212720"
  },
  {
    "text": "jump into it all right this comes from cloud flare bog instant Purge",
    "start": "212720",
    "end": "220360"
  },
  {
    "text": "invalidating cached content in under 150 millisecond right authored by Alex kette",
    "start": "220360",
    "end": "227799"
  },
  {
    "text": "trim corn Hammer Connor Harwood and 30 minutes read this is",
    "start": "227799",
    "end": "235079"
  },
  {
    "text": "going to be a long video guys there's a lot to unpack here but if you can't of",
    "start": "235079",
    "end": "240720"
  },
  {
    "text": "course wait I'm going to give a summary right now of this entire blog in the next five minutes and if you're",
    "start": "240720",
    "end": "246439"
  },
  {
    "text": "interested just ignore the whole whole video just listen to this part but if",
    "start": "246439",
    "end": "251959"
  },
  {
    "text": "you're really interested to dive to real the meat yeah stay and listen all right",
    "start": "251959",
    "end": "258479"
  },
  {
    "text": "a quick summary before we jump into the Integrity of the details I'm going to go to to my whiteboard but here's here's",
    "start": "258479",
    "end": "266400"
  },
  {
    "start": "265000",
    "end": "770000"
  },
  {
    "text": "here's the you don't need anything for this right",
    "start": "266400",
    "end": "271720"
  },
  {
    "text": "cloudfare is a CDM I the I.E it's a reverse proxy you send a request to this",
    "start": "272520",
    "end": "278560"
  },
  {
    "text": "reverse proxy it understands it and sends a request to your actual backend get some content optionally cash it and",
    "start": "278560",
    "end": "286639"
  },
  {
    "text": "this cash has a lifetime how long is the tricky part and this is their bread and",
    "start": "286639",
    "end": "292840"
  },
  {
    "text": "butter if I make another request I'll be Satisfied from the local CDN cache based",
    "start": "292840",
    "end": "298240"
  },
  {
    "text": "on the request parameters and the request URL if you the request like this and the header the",
    "start": "298240",
    "end": "304759"
  },
  {
    "text": "request looks like this then I'm going to Hash it and find the file on dis look it up pull it back and then respond",
    "start": "304759",
    "end": "311680"
  },
  {
    "text": "right and every now and then I'll check back with the backend server and get a fresh copy the major challenge cdns",
    "start": "311680",
    "end": "319840"
  },
  {
    "text": "found like Cloud flare is how do users that did put a TTL like a time to live",
    "start": "319840",
    "end": "326240"
  },
  {
    "text": "for this cash let's say hey 5 minutes or 10 minutes the those users who want to actually Purge those caches globally",
    "start": "326240",
    "end": "333240"
  },
  {
    "text": "from the entire machines in the entire CDN Network how do they do that so they",
    "start": "333240",
    "end": "339840"
  },
  {
    "text": "offer the feature say all right we're going to do that how do they do that here's the old system the old system was",
    "start": "339840",
    "end": "345280"
  },
  {
    "text": "based on a centralized database that is called Quicksilver which they use to",
    "start": "345280",
    "end": "352560"
  },
  {
    "text": "push configuration that's it how do we talk all these data center talk to each other this nice replicated based uh",
    "start": "352560",
    "end": "359919"
  },
  {
    "text": "database that's called quick server so you make a request to this quick server",
    "start": "359919",
    "end": "365639"
  },
  {
    "text": "database which lives in in the US and then once the request arrives at this quick uh Quicksilver data center",
    "start": "365639",
    "end": "373319"
  },
  {
    "text": "database it will replicate to the entire globe and they use that for Purge",
    "start": "373319",
    "end": "378639"
  },
  {
    "text": "request so the user will send a purge request to this Quicksilver database and this database will turn and distribute",
    "start": "378639",
    "end": "386240"
  },
  {
    "text": "all this purge request across the globe so everybody all the data center will receive it they will receive this purge",
    "start": "386240",
    "end": "392960"
  },
  {
    "text": "request and then they will start working towards the other part of how to purge",
    "start": "392960",
    "end": "399680"
  },
  {
    "text": "the cash we we'll come to that so it's a centralized system the old system is a centralized system they call it core",
    "start": "399680",
    "end": "406680"
  },
  {
    "text": "based you know because it's it relies on the core data system",
    "start": "406680",
    "end": "412199"
  },
  {
    "text": "what they call it the one in the US to distribute to replicate this the other part of the old system is it's lazy",
    "start": "412199",
    "end": "418879"
  },
  {
    "text": "Purge not not active Purge I.E when I receive a purge request I say all right",
    "start": "418879",
    "end": "424479"
  },
  {
    "text": "hey I someone just wanted to delete this file",
    "start": "424479",
    "end": "430080"
  },
  {
    "text": "right it doesn't do that it actually keeps that file there and when a request",
    "start": "430080",
    "end": "437560"
  },
  {
    "text": "comes in we check with the purge requests that are there in the in the",
    "start": "437560",
    "end": "442720"
  },
  {
    "text": "machine oh does this file matches this purge request yes then okay then don't",
    "start": "442720",
    "end": "449039"
  },
  {
    "text": "return it to the the user no no no because this is supposed to be purged so don't actively go and search every",
    "start": "449039",
    "end": "455479"
  },
  {
    "text": "single file to be purged because one purge request can Purge millions of",
    "start": "455479",
    "end": "461039"
  },
  {
    "text": "requests right an example is Purge everything that returns Jason that's one",
    "start": "461039",
    "end": "466120"
  },
  {
    "text": "example right like everything that is in Jason right now Purge it just just don't",
    "start": "466120",
    "end": "471400"
  },
  {
    "text": "don't return it to the user that's one request right so to do it actively is",
    "start": "471400",
    "end": "477240"
  },
  {
    "text": "like once you get it Go and delete it everything that is Json that's very hard",
    "start": "477240",
    "end": "482759"
  },
  {
    "text": "very hard to do it takes time so that's active purging they don't do that in the old system they do lazy purging let's",
    "start": "482759",
    "end": "489360"
  },
  {
    "text": "keep the purge request and then compare and then if a cached response was",
    "start": "489360",
    "end": "497319"
  },
  {
    "text": "detected compare it against the purge request yes if if it's there we remove",
    "start": "497319",
    "end": "505639"
  },
  {
    "text": "it if it's not there then we'll return it safely to the user yeah so that's the old system problems with the old system",
    "start": "505639",
    "end": "512159"
  },
  {
    "text": "Purge history this purge request history becomes very large why because they don't really know how long sh should",
    "start": "512159",
    "end": "520640"
  },
  {
    "text": "they keep this purge request uh requests for because one purge request can can",
    "start": "520640",
    "end": "526519"
  },
  {
    "text": "delete a million files like and one file",
    "start": "526519",
    "end": "531600"
  },
  {
    "text": "the eviction for one file is five minutes the other one is 10 minutes the other one is 30 minutes so you don't know so what they do is like they keep",
    "start": "531600",
    "end": "538040"
  },
  {
    "text": "it for the maximum eviction for the whole machine which is whatever one hour two hours right so you can see that",
    "start": "538040",
    "end": "544760"
  },
  {
    "text": "these Purge request can accumulate as a result queries become slower read",
    "start": "544760",
    "end": "550519"
  },
  {
    "text": "requests become slower right disk space you're taking disk space because you're",
    "start": "550519",
    "end": "556200"
  },
  {
    "text": "saving these things instead of content right you're taking disk away from",
    "start": "556200",
    "end": "564720"
  },
  {
    "text": "precious content user content so that's the problem",
    "start": "564720",
    "end": "570040"
  },
  {
    "text": "the other problem is this system that's called Quicks was not really designed for high intensity right and high",
    "start": "570040",
    "end": "577360"
  },
  {
    "text": "intensive reads like this it was designed for configuration like hey every week we change something let's",
    "start": "577360",
    "end": "586079"
  },
  {
    "text": "propagate it across the globe sure that's easy but if you design it if you",
    "start": "586079",
    "end": "591839"
  },
  {
    "text": "use it to to make a th000 requests per second 10,000 million requests per",
    "start": "591839",
    "end": "597720"
  },
  {
    "text": "second million rights per second like purges apparently we're going to learn they became very popular people",
    "start": "597720",
    "end": "603800"
  },
  {
    "text": "submitted a lot of purges they accumulate they became a performance bottl net another problem with this old",
    "start": "603800",
    "end": "611399"
  },
  {
    "text": "system was the latency because it's a centralized system so if I am in",
    "start": "611399",
    "end": "617640"
  },
  {
    "text": "Australia Australia sorry and I send a a Pur request it has to go to the core",
    "start": "617640",
    "end": "624920"
  },
  {
    "text": "server first which is where the Quicksilver main instance Liv all the",
    "start": "624920",
    "end": "630079"
  },
  {
    "text": "way into the US I'm submitting something to delete from my local system of course",
    "start": "630079",
    "end": "635959"
  },
  {
    "text": "cuz I live there right but but it has to go there to the US and",
    "start": "635959",
    "end": "642399"
  },
  {
    "text": "then propagates all the way back to me so the time it takes to send a request",
    "start": "642399",
    "end": "650279"
  },
  {
    "text": "across the Pacific comes back and then start The Purge that's a big latency so",
    "start": "650279",
    "end": "658079"
  },
  {
    "text": "I would I would submit The Purge request and I go refresh refresh and I still see the old stuff refresh and I still see",
    "start": "658079",
    "end": "663839"
  },
  {
    "text": "the old stuff because the the my local instance my local data center didn't receive the message that I purged",
    "start": "663839",
    "end": "670880"
  },
  {
    "text": "because it has to go to the using I'm back and that's the problem of the centralized system okay what do they",
    "start": "670880",
    "end": "677200"
  },
  {
    "text": "change it with they changed it with coreless they call it or",
    "start": "677200",
    "end": "682839"
  },
  {
    "text": "decentralized system and they moved from a lazy Purge to an Ive Purge how they",
    "start": "682839",
    "end": "691959"
  },
  {
    "text": "put a database on every machine what database rocks DB and I have a little",
    "start": "691959",
    "end": "697440"
  },
  {
    "text": "bit of my question my my doubts about that choice because as we we know uh LSM",
    "start": "697440",
    "end": "704240"
  },
  {
    "text": "trees are not really great when it comes to deletes and purges are all about deletes all these tombstones what are",
    "start": "704240",
    "end": "711399"
  },
  {
    "text": "you going to do with them so I I'll talk about that a little bit so they moved from this core",
    "start": "711399",
    "end": "717040"
  },
  {
    "text": "based lazy Purge to a coreless",
    "start": "717040",
    "end": "723920"
  },
  {
    "text": "decentralized active birge the moment I receive a Pur request let go there right",
    "start": "723920",
    "end": "729200"
  },
  {
    "text": "there and then and delete everything and how do I find all this you might say well we're going to index all this stuff",
    "start": "729200",
    "end": "735040"
  },
  {
    "text": "going to build a database I'm going to maintain this database locally and I'm going to do all of that stuff and based",
    "start": "735040",
    "end": "740519"
  },
  {
    "text": "on this new system they went from 1.5 seconds to 150 milliseconds which is",
    "start": "740519",
    "end": "746560"
  },
  {
    "text": "impressive 90% Improvement impressive impress impressive work in general of",
    "start": "746560",
    "end": "752440"
  },
  {
    "text": "course let's dive let's dive let's dive deep though let's dive deep and and read",
    "start": "752440",
    "end": "759279"
  },
  {
    "text": "and learn more about this system this net I thought maybe the best way is to",
    "start": "759279",
    "end": "764720"
  },
  {
    "text": "actually draw something how about that all right so let's put the backend server here uh let's put their CDN",
    "start": "764720",
    "end": "773120"
  },
  {
    "start": "770000",
    "end": "960000"
  },
  {
    "text": "here but the CDN of course there are many servers right so it's across across",
    "start": "773120",
    "end": "778440"
  },
  {
    "text": "the globe we have users right users so here's here's how the cdns in",
    "start": "778440",
    "end": "786000"
  },
  {
    "text": "in a very primitive way works right so a client makes a request and the final",
    "start": "786000",
    "end": "793639"
  },
  {
    "text": "destination of the request is the CDN yeah because as far as the as the the",
    "start": "793639",
    "end": "798800"
  },
  {
    "text": "client is concerned it's talking to a specific domain that domain points to the CDN not your backend server so if",
    "start": "798800",
    "end": "805360"
  },
  {
    "text": "your website is a.com right right this is the actual a.com that will",
    "start": "805360",
    "end": "813480"
  },
  {
    "text": "be resolved to right this will be probably another domain that is the",
    "start": "813480",
    "end": "819240"
  },
  {
    "text": "actual backend and probably will be configured so that only this these servers can reach the actual content",
    "start": "819240",
    "end": "826160"
  },
  {
    "text": "right so you make a request and you specify hey this is My URL SL blah blah blah right and then there's my request",
    "start": "826160",
    "end": "833079"
  },
  {
    "text": "headers and you it goes to the content delivery Network to one machine event",
    "start": "833079",
    "end": "839639"
  },
  {
    "text": "and based on that cloud flare in this particular case generates what they call",
    "start": "839639",
    "end": "844800"
  },
  {
    "text": "the cash key and in the cash key they keep track of that and they do a lookup",
    "start": "844800",
    "end": "851839"
  },
  {
    "text": "locally say all right this cash key it's probably the same file name right soop",
    "start": "851839",
    "end": "857839"
  },
  {
    "text": "just go is this cash key exist in this file in the in dis so that's a very nice",
    "start": "857839",
    "end": "863120"
  },
  {
    "text": "thing open file is it there or not it's not there oh it's not there let's go",
    "start": "863120",
    "end": "868320"
  },
  {
    "text": "ahead and make a request to the actual backend server and get that get that",
    "start": "868320",
    "end": "874880"
  },
  {
    "text": "actual content cuz that's the source of Truth once we get the content we get a",
    "start": "874880",
    "end": "881360"
  },
  {
    "text": "response and the response has more data right has a lot of other",
    "start": "881360",
    "end": "888040"
  },
  {
    "text": "information such as how long should you keep this file the type of the file Json",
    "start": "888040",
    "end": "894040"
  },
  {
    "text": "whatever right because from the request you can't really tell you can sometimes but not always",
    "start": "894040",
    "end": "899560"
  },
  {
    "text": "what is the type of the response right but using that information it will write",
    "start": "899560",
    "end": "905639"
  },
  {
    "text": "that cach key which is remember it for later we only know it based on the on",
    "start": "905639",
    "end": "911639"
  },
  {
    "text": "the request Header information and the URL that's it and we write a file so the",
    "start": "911639",
    "end": "917199"
  },
  {
    "text": "next request that comes in from a client will hit the cache and we get a",
    "start": "917199",
    "end": "923720"
  },
  {
    "text": "response right that's basically it and the same thing A customer from India will make a",
    "start": "923720",
    "end": "932639"
  },
  {
    "text": "request uh forget about India just the same like the same location if I make a",
    "start": "932639",
    "end": "937959"
  },
  {
    "text": "request right let's put another uh let's put another customer in the same area",
    "start": "937959",
    "end": "945600"
  },
  {
    "text": "right here for example right same region for example in this case it's going to be a green arrow right because it's cach",
    "start": "945600",
    "end": "951440"
  },
  {
    "text": "that's how I just imagined it so you're going to send a request it will hit the cash because based on the request URL",
    "start": "951440",
    "end": "958560"
  },
  {
    "text": "and the request header we generate this hash which is the cashing key and then",
    "start": "958560",
    "end": "964040"
  },
  {
    "start": "960000",
    "end": "1070000"
  },
  {
    "text": "we look up locally boom it's not really there's no databases yet here you'll",
    "start": "964040",
    "end": "970360"
  },
  {
    "text": "learn that there will be in the future but that's just how things work right so",
    "start": "970360",
    "end": "975800"
  },
  {
    "text": "and then you get a response very nice there's of course chances that this cash file also has a time to live freshness",
    "start": "975800",
    "end": "983880"
  },
  {
    "text": "they call it so if I make a request here it hits the cash but the but the CDN check so wait a minute actually the",
    "start": "983880",
    "end": "991040"
  },
  {
    "text": "based on the TTL which is Again part of the response we just discovered after",
    "start": "991040",
    "end": "997399"
  },
  {
    "text": "opening the file that hey actually this this is now need to be eved so boom",
    "start": "997399",
    "end": "1003120"
  },
  {
    "text": "let's kick it out right so now we will still have to go to the server and Fitch",
    "start": "1003120",
    "end": "1008440"
  },
  {
    "text": "it despite we have a cached copy but it's expired right it's been evicted so",
    "start": "1008440",
    "end": "1014839"
  },
  {
    "text": "now you need to go back to the server so that's another way where we evict so eviction is very nice because you",
    "start": "1014839",
    "end": "1021920"
  },
  {
    "text": "know you know as as the owner of the file or the response that hey this kind",
    "start": "1021920",
    "end": "1027038"
  },
  {
    "text": "of cash I want to keep it for five minutes 10 minutes and based on that you will know that every 10 minutes you're",
    "start": "1027039",
    "end": "1032760"
  },
  {
    "text": "going to get a hit a fresh hit from the CDN to fit a new copy so just that is",
    "start": "1032760",
    "end": "1037839"
  },
  {
    "text": "actually might be enough for certain cases right just have a nice eviction policy nice timeout you're good to go",
    "start": "1037839",
    "end": "1046199"
  },
  {
    "text": "but for some customers even even that is not enough because yeah I tell you that",
    "start": "1046199",
    "end": "1052000"
  },
  {
    "text": "every every one minute if I put it too low if I put the freshness too low then",
    "start": "1052000",
    "end": "1057919"
  },
  {
    "text": "the the the chattiness between the server the CDN and the server will be very high and you'll be flooded with",
    "start": "1057919",
    "end": "1064520"
  },
  {
    "text": "request what you do is you put a high level freshness TTL with the hope that there is an",
    "start": "1064520",
    "end": "1072360"
  },
  {
    "start": "1070000",
    "end": "1200000"
  },
  {
    "text": "ability on demand Purge Pur you see that the movie The",
    "start": "1072360",
    "end": "1080360"
  },
  {
    "text": "Purge Purge you get a purge so who's purging",
    "start": "1080360",
    "end": "1087000"
  },
  {
    "text": "here it's a customer thing not a user a customer I am the owner of a.com and I",
    "start": "1087000",
    "end": "1093360"
  },
  {
    "text": "want to purge a single file purging a file specifically is easy you",
    "start": "1093360",
    "end": "1100640"
  },
  {
    "text": "know because how do you PGE a file says Hey CDN this buy cash key",
    "start": "1100640",
    "end": "1109600"
  },
  {
    "text": "that means this part if you receive this request right or this uh particular set",
    "start": "1109600",
    "end": "1116320"
  },
  {
    "text": "of headers I want you to purge any files that generate this particular cach key right so you'll find what the cach key",
    "start": "1116320",
    "end": "1123480"
  },
  {
    "text": "is as as a user when I say user here I mean the owner of the site and you say hey Cloud flare Purge this cash key and",
    "start": "1123480",
    "end": "1131760"
  },
  {
    "text": "that's easy because that cash key if that as long as the main problem is",
    "start": "1131760",
    "end": "1137240"
  },
  {
    "text": "Distributing that request to every single data center in the world so",
    "start": "1137240",
    "end": "1142960"
  },
  {
    "text": "here's how they initially did it so once I send a purge request and it arrives in",
    "start": "1142960",
    "end": "1150679"
  },
  {
    "text": "my data center as a user right it's like hey I want to purge this file please",
    "start": "1150679",
    "end": "1155799"
  },
  {
    "text": "this is my cash key go purge it right let's not talk about the complex purges",
    "start": "1155799",
    "end": "1161640"
  },
  {
    "text": "now let's talk about simple purges right and simple purges they say hey Purge this and it goes to this Cloud uh cloud",
    "start": "1161640",
    "end": "1168799"
  },
  {
    "text": "flare Data Center and it says all right I received your request right local",
    "start": "1168799",
    "end": "1174919"
  },
  {
    "text": "request and here's what happens the current",
    "start": "1174919",
    "end": "1180880"
  },
  {
    "text": "system that they used before this in new Implement is called",
    "start": "1181159",
    "end": "1187440"
  },
  {
    "text": "Quicksilver and Quicksilver is what they call Core",
    "start": "1187440",
    "end": "1193320"
  },
  {
    "text": "based server it's a centralized data center let's let's uh let's make it a different color just so that it to know",
    "start": "1193320",
    "end": "1201200"
  },
  {
    "start": "1200000",
    "end": "1440000"
  },
  {
    "text": "this is a different is a centralized that's why they call it core based",
    "start": "1201200",
    "end": "1206799"
  },
  {
    "text": "right and then what you do is you don't actually send you send the purge request",
    "start": "1206799",
    "end": "1213559"
  },
  {
    "text": "locally but you then talk to the quicks",
    "start": "1213559",
    "end": "1218880"
  },
  {
    "text": "silver data center that's the main Center and that guy will propagate it's",
    "start": "1218880",
    "end": "1224880"
  },
  {
    "text": "a replication based uh system that they bu bu in 2020 I think and that is used mainly for",
    "start": "1224880",
    "end": "1233080"
  },
  {
    "text": "configuration to push configuration between all the data centers right so that's what they do do you notice what I",
    "start": "1233080",
    "end": "1238640"
  },
  {
    "text": "did here I pushed you push something to the Quicksilver and it goes around and push",
    "start": "1238640",
    "end": "1244880"
  },
  {
    "text": "everything back even to yourself so you as a quicksilver instance because the",
    "start": "1244880",
    "end": "1250039"
  },
  {
    "text": "Quicksilver exist everywhere as an instance on all all data centers you",
    "start": "1250039",
    "end": "1255400"
  },
  {
    "text": "don't get it in the beginning you have to make a request to to the main you go all the way there and then the quick",
    "start": "1255400",
    "end": "1261679"
  },
  {
    "text": "server replication will go back and send that request to everybody and that's",
    "start": "1261679",
    "end": "1266960"
  },
  {
    "text": "what we're used to to do configuration base which is not common you don't change configuration every second right",
    "start": "1266960",
    "end": "1272640"
  },
  {
    "text": "but they decided you know what let's use it for Purge requests so if I get her",
    "start": "1272640",
    "end": "1277840"
  },
  {
    "text": "Purge let's send that Purge request and then let's propagate this purge",
    "start": "1277840",
    "end": "1284840"
  },
  {
    "text": "everywhere what's wrong with this well I'll tell you what's wrong with this",
    "start": "1285600",
    "end": "1290840"
  },
  {
    "text": "latency is what's wrong with this so assume I am here and and that's the",
    "start": "1290840",
    "end": "1297840"
  },
  {
    "text": "example they give I am here in Australia and you have to say Australia",
    "start": "1297840",
    "end": "1303440"
  },
  {
    "text": "if you're an American with a she Australia that's something you learn and",
    "start": "1303440",
    "end": "1309559"
  },
  {
    "text": "you can you have to also misspell Australia you know you'll learn that uh that I think it's only an American thing",
    "start": "1309559",
    "end": "1316120"
  },
  {
    "text": "no not not English in general right the S is pronounced sh in certain situations",
    "start": "1316120",
    "end": "1323039"
  },
  {
    "text": "and you just learn like strawberry you never say strawberry that's just ridiculous you know it's a strawberry",
    "start": "1323039",
    "end": "1328960"
  },
  {
    "text": "you have to share know I can think of some other examples as well",
    "start": "1328960",
    "end": "1334520"
  },
  {
    "text": "Australia so Australia is here while the core Center is actually where get you",
    "start": "1334520",
    "end": "1341400"
  },
  {
    "text": "guess it's in the US right that's the core Quicksilver instance which does the",
    "start": "1341400",
    "end": "1347440"
  },
  {
    "text": "replication so if I'm sending and maybe I have to do",
    "start": "1347440",
    "end": "1353039"
  },
  {
    "text": "it can I extend this thing probably yeah this is not going it's probably not a",
    "start": "1353039",
    "end": "1360840"
  },
  {
    "text": "pretty thing so I'm make a quest I am in Australia and send it all the way across",
    "start": "1360840",
    "end": "1367480"
  },
  {
    "text": "the Pacific gets through this instance and then propagates back until it gets back to me only then I learned that oh",
    "start": "1367480",
    "end": "1375400"
  },
  {
    "text": "by the way I just purged this F I am there I know the file that need to",
    "start": "1375400",
    "end": "1381520"
  },
  {
    "text": "be purged I made the request by the way right but local users in Australia will",
    "start": "1381520",
    "end": "1388880"
  },
  {
    "text": "not learn until we take all of that hit go whatever that is it's like I think",
    "start": "1388880",
    "end": "1394960"
  },
  {
    "text": "two seconds right average two seconds 1.5 seconds you go all the way there and",
    "start": "1394960",
    "end": "1400520"
  },
  {
    "text": "then come back there there's a huge latency now if you're lucky if you're the US you'll immediately get that Purge",
    "start": "1400520",
    "end": "1407360"
  },
  {
    "text": "request right but if you're not then you there's this delay and that's what they're trying to solve right so that's",
    "start": "1407360",
    "end": "1414200"
  },
  {
    "text": "one problem the the latency this is what they call the core",
    "start": "1414200",
    "end": "1419600"
  },
  {
    "text": "Purge because you're basing on a core server to do that thing right um the",
    "start": "1419600",
    "end": "1426039"
  },
  {
    "text": "other problem is these Purge requests are not so",
    "start": "1426039",
    "end": "1432720"
  },
  {
    "text": "simple those P Purge request are not always so simple",
    "start": "1432720",
    "end": "1438600"
  },
  {
    "text": "and I they just built those features you know uh I suppose most",
    "start": "1438600",
    "end": "1445520"
  },
  {
    "start": "1440000",
    "end": "1596000"
  },
  {
    "text": "complexity in software engineering is introduced by features we add always you",
    "start": "1445520",
    "end": "1451600"
  },
  {
    "text": "think that oh it's just a nice thing let's add this feature and then it it creates huge problems like this one",
    "start": "1451600",
    "end": "1458760"
  },
  {
    "text": "right so the purge you can also Purge by other attributes that are not based on",
    "start": "1458760",
    "end": "1464279"
  },
  {
    "text": "the request they are based on response well good luck",
    "start": "1464279",
    "end": "1470760"
  },
  {
    "text": "because if I know the cash key if I know I know the request I know the headers this is welln and if I know these two I",
    "start": "1470760",
    "end": "1478679"
  },
  {
    "text": "can quickly find the the cache key and I can quickly find the file but what if I",
    "start": "1478679",
    "end": "1484840"
  },
  {
    "text": "am deleting based let's do a ridiculous example based on the content type I want",
    "start": "1484840",
    "end": "1491000"
  },
  {
    "text": "to delete everything that is return Jason I just want to do that like hey",
    "start": "1491000",
    "end": "1497240"
  },
  {
    "text": "don't trust anything cas Json cash everything that is Purge everything that is Json you know not",
    "start": "1497240",
    "end": "1503399"
  },
  {
    "text": "every time the content type is sent on the request site right it's always on",
    "start": "1503399",
    "end": "1508559"
  },
  {
    "text": "the response right in this particular case how do you know you have to crack",
    "start": "1508559",
    "end": "1513600"
  },
  {
    "text": "down the open the files the actual cached content to know the the content",
    "start": "1513600",
    "end": "1521520"
  },
  {
    "text": "type in order to to purge it so and that also mean it's not one to one anymore",
    "start": "1521520",
    "end": "1528320"
  },
  {
    "text": "you're deleting you you have Purge one purge request which can potentially delete millions of files and that's",
    "start": "1528320",
    "end": "1535520"
  },
  {
    "text": "another problem so what do you do you receive a page Purge request right and",
    "start": "1535520",
    "end": "1542039"
  },
  {
    "text": "so that's the system you you receive a purge request and then you start deleting everything no they couldn't do",
    "start": "1542039",
    "end": "1548799"
  },
  {
    "text": "that it says all right I I cannot just scan the entire hard drive and open every single",
    "start": "1548799",
    "end": "1554360"
  },
  {
    "text": "file to delete just to look at the content type only to delete it and some of you might",
    "start": "1554360",
    "end": "1561200"
  },
  {
    "text": "say it's like oh why can we build some systems around it can we can build indexes apparently they didn't think",
    "start": "1561200",
    "end": "1566360"
  },
  {
    "text": "about that back then but now they do right so that that's the system it's",
    "start": "1566360",
    "end": "1574640"
  },
  {
    "text": "distributed right uh replicated core based and they didn't use the active",
    "start": "1574640",
    "end": "1581200"
  },
  {
    "text": "based purging I mean once you get a purge let's actively Purge no they did",
    "start": "1581200",
    "end": "1588559"
  },
  {
    "text": "another system and we're still talking about the old system by the way so what they did is they did something called",
    "start": "1588559",
    "end": "1594120"
  },
  {
    "text": "lazy Purge so here's how uh lazy Purge work when we receive a purge",
    "start": "1594120",
    "end": "1601159"
  },
  {
    "start": "1596000",
    "end": "1800000"
  },
  {
    "text": "request okay we're going to save this purge request locally here but we're not",
    "start": "1601159",
    "end": "1606279"
  },
  {
    "text": "going to actively look for the file and delete the file that represent the purge",
    "start": "1606279",
    "end": "1612640"
  },
  {
    "text": "request because it could be what they call flexible Purge could be anything right so what we do is just keep it",
    "start": "1612640",
    "end": "1618799"
  },
  {
    "text": "there keep an entry there The Purge cash is there The Purge key is there we have",
    "start": "1618799",
    "end": "1624520"
  },
  {
    "text": "knowledge there and you keep your purges P1 P2 keep them just store them so if a",
    "start": "1624520",
    "end": "1631720"
  },
  {
    "text": "request does come in for a specific cash key look at it if it's evicted then we",
    "start": "1631720",
    "end": "1639679"
  },
  {
    "text": "don't need to even worry about The Purge right but if it's the cash is there and",
    "start": "1639679",
    "end": "1644960"
  },
  {
    "text": "it's still valid then you don't return return it no don't return it what you do",
    "start": "1644960",
    "end": "1652679"
  },
  {
    "text": "is look up all the purges one by one that you have in your history and you do",
    "start": "1652679",
    "end": "1660640"
  },
  {
    "text": "a query how do you do a query you use the same system query s quick silver but you do a local query on your local quick",
    "start": "1660640",
    "end": "1668399"
  },
  {
    "text": "server instance and you do a query up can you find me this purge key how do",
    "start": "1668399",
    "end": "1673720"
  },
  {
    "text": "you find the purge key The Purge key is found by actually cracking open the content",
    "start": "1673720",
    "end": "1679200"
  },
  {
    "text": "combining server certain uh metadata with the request Cash Cash key",
    "start": "1679200",
    "end": "1685440"
  },
  {
    "text": "and then looking up The Purge requests one by one and cracking them open and",
    "start": "1685440",
    "end": "1690640"
  },
  {
    "text": "says all right what do you do what do you delete oh you need content type Jason well this is not Jason so remove",
    "start": "1690640",
    "end": "1696640"
  },
  {
    "text": "it and you're only uh looking through User submitted Purge request so there's",
    "start": "1696640",
    "end": "1704039"
  },
  {
    "text": "like a some cost associated with that so if this grows too large then you have a problem and that's exactly what so what",
    "start": "1704039",
    "end": "1710760"
  },
  {
    "text": "do you do you make a request if it's a cash don't just immediately return it if",
    "start": "1710760",
    "end": "1716440"
  },
  {
    "text": "you find the cash actually look through the purge request and does any of The Purge request matches what you have am I",
    "start": "1716440",
    "end": "1723679"
  },
  {
    "text": "supposed to return this or am I supposed to purge it that's what lazy Purge is yeah on demand you purge not actively",
    "start": "1723679",
    "end": "1733240"
  },
  {
    "text": "when The Purge request arrives in the data center no do it lazily if I'm not",
    "start": "1733240",
    "end": "1740600"
  },
  {
    "text": "supposed to purge this content I purge it and of course at that time I remove uh can we remove we cannot unfortunately",
    "start": "1740600",
    "end": "1747480"
  },
  {
    "text": "we cannot remove that Purge request we we have to keep it because yeah I purge",
    "start": "1747480",
    "end": "1752799"
  },
  {
    "text": "this file but it could be other files need the same Purge request so we need",
    "start": "1752799",
    "end": "1759200"
  },
  {
    "text": "to keep it these Purge request histories need to stay right so at this result",
    "start": "1759200",
    "end": "1765760"
  },
  {
    "text": "that's how we lazy Purge work what's the problem with this lazy Purge will have to collect a lot of purge history and",
    "start": "1765760",
    "end": "1774679"
  },
  {
    "text": "the reason is two the first one is uh if I look up a a cont if I if a user just",
    "start": "1774679",
    "end": "1782840"
  },
  {
    "text": "happen to look up a con certain file and that happened to be a Jason and we there is a purge request that says Purge all",
    "start": "1782840",
    "end": "1790120"
  },
  {
    "text": "Jason then you clear just that Json file that you requested not all of them right",
    "start": "1790120",
    "end": "1796559"
  },
  {
    "text": "because it's not active and as a result you need to keep that Purge",
    "start": "1796559",
    "end": "1803000"
  },
  {
    "start": "1800000",
    "end": "2160000"
  },
  {
    "text": "request for other files so what happens is that's what that's one reason you need to keep this purge files right the",
    "start": "1803000",
    "end": "1810080"
  },
  {
    "text": "second reason is uh we really need to keep the purge request until the maximum",
    "start": "1810080",
    "end": "1817039"
  },
  {
    "text": "eviction time for the entire machine why is that it's because we",
    "start": "1817039",
    "end": "1824440"
  },
  {
    "text": "don't really know when a purge request comes in how long should I keep it for you don't you don't know the file",
    "start": "1824440",
    "end": "1832519"
  },
  {
    "text": "that you're purging how what's the TTL for that you don't know that because",
    "start": "1832519",
    "end": "1840159"
  },
  {
    "text": "that information is in the file itself which you don't have access to when you made The Purge request remember cuz you",
    "start": "1840159",
    "end": "1847720"
  },
  {
    "text": "you you said hey Purge all the Json but one Json file can have a five minute TTL",
    "start": "1847720",
    "end": "1853000"
  },
  {
    "text": "one another Jason file can have 20 minutes TTL how do you know so you keep it up till the maximum which",
    "start": "1853000",
    "end": "1860720"
  },
  {
    "text": "increases this retention you keep a lot of files a lot",
    "start": "1860720",
    "end": "1866200"
  },
  {
    "text": "of files means a lot of searches that's another problem purges started coming a",
    "start": "1866200",
    "end": "1873679"
  },
  {
    "text": "lot a lot of purges because users started using this feature and silver",
    "start": "1873679",
    "end": "1879799"
  },
  {
    "text": "Quicks silver this guy this was not designed for you know high intensivity",
    "start": "1879799",
    "end": "1885880"
  },
  {
    "text": "right it was designed for configuration remember was just hey change this I",
    "start": "1885880",
    "end": "1891840"
  },
  {
    "text": "don't know this the the cash for all servers are now uh maximum one hour",
    "start": "1891840",
    "end": "1898240"
  },
  {
    "text": "let's change it and you don't change this every minute you know you change it like every day uh top week monthly you",
    "start": "1898240",
    "end": "1906360"
  },
  {
    "text": "know configurations don't change that often they do but not like hourly or",
    "start": "1906360",
    "end": "1911480"
  },
  {
    "text": "every second right but purges on the other",
    "start": "1911480",
    "end": "1916840"
  },
  {
    "text": "hand apparently they come a lot lots of purges users started making a lot of",
    "start": "1916840",
    "end": "1923840"
  },
  {
    "text": "purges causing a lot of problems and those this guy this puppy couldn't",
    "start": "1923840",
    "end": "1930279"
  },
  {
    "text": "handle the Intensive rights cuz it wasn't designed for for intensive rights",
    "start": "1930279",
    "end": "1937519"
  },
  {
    "text": "so we went from uh that's the system that's the old system lazy Purge core",
    "start": "1937519",
    "end": "1945360"
  },
  {
    "text": "based there's a centralized let's call it centralized I don't know why I call Core based it's just so so I I can",
    "start": "1945360",
    "end": "1951840"
  },
  {
    "text": "barely pronounce anything in English so core based is very difficult to pronounce so centralized lazy Purge",
    "start": "1951840",
    "end": "1960600"
  },
  {
    "text": "system which takes two two seconds 1.5 seconds which isn't bad by the way but",
    "start": "1960600",
    "end": "1966679"
  },
  {
    "text": "it doesn't scale oh another problem yeah oh we're just listing all the problem at this point I just did the whole blog I",
    "start": "1966679",
    "end": "1972600"
  },
  {
    "text": "don't know why I should go through the blog anymore so so and another problem is as",
    "start": "1972600",
    "end": "1979159"
  },
  {
    "text": "this purge started to grow this becomes like a massive you know storage problem on the",
    "start": "1979159",
    "end": "1986360"
  },
  {
    "text": "local machine which takes of course if you store a lot of stuff right it takes",
    "start": "1986360",
    "end": "1993360"
  },
  {
    "text": "from the desk space which is supposed to be there for what for user cached content now you're storing all this",
    "start": "1993360",
    "end": "1999440"
  },
  {
    "text": "purge stuff right and you have to keep it for a long time why because you don't know how long you should keep it and",
    "start": "1999440",
    "end": "2005880"
  },
  {
    "text": "that's the problem and all because it started with this feature that's called flexible",
    "start": "2005880",
    "end": "2012039"
  },
  {
    "text": "Purge Purge everything based on the response type not on the request right",
    "start": "2012039",
    "end": "2017679"
  },
  {
    "text": "probably if they kept the the system simple and I don't know if customers will accept it of course I don't know",
    "start": "2017679",
    "end": "2023840"
  },
  {
    "text": "anything about any of this right says hey sorry guys we're not",
    "start": "2023840",
    "end": "2030000"
  },
  {
    "text": "going to build a Purge based system based on the response type you figure",
    "start": "2030000",
    "end": "2037039"
  },
  {
    "text": "out what is the request URL what's the request header and we will Purge that",
    "start": "2037039",
    "end": "2042559"
  },
  {
    "text": "very efficiently that's how I would I would prevent some systems from running",
    "start": "2042559",
    "end": "2048638"
  },
  {
    "text": "rampid you know at the end of the day you have to kind of put your feet down",
    "start": "2048639",
    "end": "2054839"
  },
  {
    "text": "at this at certain point says yeah nope that feature we're not going to get ship",
    "start": "2054839",
    "end": "2060839"
  },
  {
    "text": "it because I cannot build it efficiently I just put your foot down",
    "start": "2060839",
    "end": "2066240"
  },
  {
    "text": "says hey I'm not going to this thing cuz remember all of this would be really",
    "start": "2066240",
    "end": "2071320"
  },
  {
    "text": "simple if I just B based on the cash key the problem is the flexible purchase",
    "start": "2071320",
    "end": "2078079"
  },
  {
    "text": "which is based on the response which is of course unknown but yeah it's it's a",
    "start": "2078079",
    "end": "2083638"
  },
  {
    "text": "balance features performance some features when you want",
    "start": "2083639",
    "end": "2089679"
  },
  {
    "text": "to implement it look simple but just adding them in certain systems might be",
    "start": "2089679",
    "end": "2096839"
  },
  {
    "text": "simple then you find find out the performance problem then you want to redesign it and you already forgot about",
    "start": "2096839",
    "end": "2102079"
  },
  {
    "text": "this feature that you already added years ago that people start to use and you have to support it in the new system",
    "start": "2102079",
    "end": "2108040"
  },
  {
    "text": "and you will say oh shoot I have to redesign this just because of this",
    "start": "2108040",
    "end": "2114560"
  },
  {
    "text": "thinking feature right and it just collapses Everything At what point you say stop it",
    "start": "2114560",
    "end": "2122839"
  },
  {
    "text": "guys I'm not going to give you this feature sorry just now right but",
    "start": "2122839",
    "end": "2128400"
  },
  {
    "text": "anyway they figured it out our way and honestly I'm not",
    "start": "2128400",
    "end": "2133960"
  },
  {
    "text": "convinced it's fast 150 millisecond but you got to know what that means right",
    "start": "2133960",
    "end": "2139599"
  },
  {
    "text": "when I tweeted about that I didn't read the whole blog of course uh 150 Mill this new system we're going to talk",
    "start": "2139599",
    "end": "2145119"
  },
  {
    "text": "about this new system in a minute that was the old system we just talked about the old system all right now that we learned about the old system let's go",
    "start": "2145119",
    "end": "2151680"
  },
  {
    "text": "through the blog and kind of skim through this thing here they talk about",
    "start": "2151680",
    "end": "2157280"
  },
  {
    "text": "what is Cloud flare what do they do past 14 years Cloud flare has evolved from",
    "start": "2157280",
    "end": "2162359"
  },
  {
    "start": "2160000",
    "end": "2340000"
  },
  {
    "text": "content delivering Network to a zero trust security policy network security performance application database problem",
    "start": "2162359",
    "end": "2169000"
  },
  {
    "text": "they do everything pretty much everything now right now right so they started with this problem that says all",
    "start": "2169000",
    "end": "2174599"
  },
  {
    "text": "right uh here's our old system we improved it by 90% our p50 and I want",
    "start": "2174599",
    "end": "2182720"
  },
  {
    "text": "you to pay attention to this p50 is 150 millisecond they didn't share their P99",
    "start": "2182720",
    "end": "2189000"
  },
  {
    "text": "right cuz I expect the P99 to be very slow based on just just just the design",
    "start": "2189000",
    "end": "2197040"
  },
  {
    "text": "the AR the current architecture right I expect it to be larger but yeah still",
    "start": "2197040",
    "end": "2202920"
  },
  {
    "text": "150 millisecond is amazing as an average of course so now we're talking about the",
    "start": "2202920",
    "end": "2207960"
  },
  {
    "text": "new system so they ditched Quicksilver",
    "start": "2207960",
    "end": "2213319"
  },
  {
    "text": "for a direct peer-to-peer communication here so yeah regardless they want to",
    "start": "2213319",
    "end": "2220280"
  },
  {
    "text": "move completely to a peer-to-peer distribution so they tried it with the purge by URL and it worked and they want",
    "start": "2220280",
    "end": "2226560"
  },
  {
    "text": "to move flexible purges which is the you know by by cash tag as we talked about",
    "start": "2226560",
    "end": "2232200"
  },
  {
    "text": "by the response typ and that uh says all right that means hey elephant in the",
    "start": "2232200",
    "end": "2238480"
  },
  {
    "text": "room we no longer need Quicksilver anymore uh so yeah they no longer use",
    "start": "2238480",
    "end": "2244480"
  },
  {
    "text": "Quicksilver for that coreless right right so that means write",
    "start": "2244480",
    "end": "2249520"
  },
  {
    "text": "if I write something to my local Purge uh to my local data center as a purge",
    "start": "2249520",
    "end": "2256000"
  },
  {
    "text": "request immediately just just fan out and just talk to your neighbors and let",
    "start": "2256000",
    "end": "2261560"
  },
  {
    "text": "them know simple enough system and I'm pretty sure the system already exists there so",
    "start": "2261560",
    "end": "2266599"
  },
  {
    "text": "there is no more quick silver they don't use it anymore to purge they send a purge request to the local data center",
    "start": "2266599",
    "end": "2273319"
  },
  {
    "text": "and immediately they start the purging process right there and there and then the purge will send it to the",
    "start": "2273319",
    "end": "2279400"
  },
  {
    "text": "neighboring data center this will send it to this and this will send it to this and it will just talk to the rest of",
    "start": "2279400",
    "end": "2285880"
  },
  {
    "text": "data centers that's the peerto beer model that's the that's how they do it as what they call uh",
    "start": "2285880",
    "end": "2295160"
  },
  {
    "text": "Corless Purge the other thing is they flipping",
    "start": "2295839",
    "end": "2301319"
  },
  {
    "text": "Purge on its head and make it active so here's here's how they do it this is",
    "start": "2301319",
    "end": "2306640"
  },
  {
    "text": "interesting this is what where I probably have the most to say here uh we decided if we're going to",
    "start": "2306640",
    "end": "2312520"
  },
  {
    "text": "replace our storage system we should dig into exactly what what what our needs are and find the best fit it was time to",
    "start": "2312520",
    "end": "2320079"
  },
  {
    "text": "revisit some of our oldest conclusions to see if they still held true and one",
    "start": "2320079",
    "end": "2326400"
  },
  {
    "text": "of the earlier earlier ones was that proactively purging content from desk",
    "start": "2326400",
    "end": "2332720"
  },
  {
    "text": "would be too difficult to do efficiently given our stage layout so that was a",
    "start": "2332720",
    "end": "2338040"
  },
  {
    "text": "problem remember we talked about this in the beginning uh I have one purge request that deletes all the content",
    "start": "2338040",
    "end": "2343359"
  },
  {
    "start": "2340000",
    "end": "2730000"
  },
  {
    "text": "type Json just delete everything how do you find first anything that content type",
    "start": "2343359",
    "end": "2349040"
  },
  {
    "text": "Jason right how do you even know that right well the answer is really simple",
    "start": "2349040",
    "end": "2354880"
  },
  {
    "text": "guys we we know how databases indexes is the solution like you index it's like all",
    "start": "2354880",
    "end": "2361640"
  },
  {
    "text": "right look up this you reverse look up you build an index you maintain an index",
    "start": "2361640",
    "end": "2368240"
  },
  {
    "text": "and you index on uh on on the content type on the cash",
    "start": "2368240",
    "end": "2374359"
  },
  {
    "text": "tag whatever they use right for this flexible and and then start building an index right and I'm not going to go",
    "start": "2374359",
    "end": "2379599"
  },
  {
    "text": "through the details here they they went through like should we do the index on on the data center level or should we",
    "start": "2379599",
    "end": "2385240"
  },
  {
    "text": "end index on the cluster level or on the machine so they end up doing it on the",
    "start": "2385240",
    "end": "2390400"
  },
  {
    "text": "machine itself so they decided to go with an index what is this Index right",
    "start": "2390400",
    "end": "2396200"
  },
  {
    "text": "per machine index what is this after conducting a thorough analysis we were",
    "start": "2396200",
    "end": "2401400"
  },
  {
    "text": "convinced that the the design would work with a clearer understanding of the",
    "start": "2401400",
    "end": "2406920"
  },
  {
    "text": "anticipated read and write throughput we started looking at databases that could meet our needs after benchmarking",
    "start": "2406920",
    "end": "2414520"
  },
  {
    "text": "several relational and non-relational database we ultimately chose rocks DB",
    "start": "2414520",
    "end": "2420000"
  },
  {
    "text": "which as you might know the project that Facebook started and it's h based on the",
    "start": "2420000",
    "end": "2425560"
  },
  {
    "text": "LSM trees now you know uh log structure merge trees as opposed to B+ trees a",
    "start": "2425560",
    "end": "2431119"
  },
  {
    "text": "high performance embedded key store Valu we found that the proper tuning it could",
    "start": "2431119",
    "end": "2436319"
  },
  {
    "text": "be extremely good at type of ques so they need to tune it of course for this",
    "start": "2436319",
    "end": "2441920"
  },
  {
    "text": "workload but let's talk about this a little bit because",
    "start": "2441920",
    "end": "2448480"
  },
  {
    "text": "um LSM trees are really good for inserts every time I insert I build this in",
    "start": "2448960",
    "end": "2456520"
  },
  {
    "text": "memory SS tables and then I merge them and I write always at the end we never",
    "start": "2456520",
    "end": "2462599"
  },
  {
    "text": "go to the same page and and update in place unless we compact so as opposed to",
    "start": "2462599",
    "end": "2469920"
  },
  {
    "text": "B+ 3s when you insert you're always going either to the same page and your",
    "start": "2469920",
    "end": "2475079"
  },
  {
    "text": "insert which an insert is what's an insert an insert your you're you take an existing page you write something to it",
    "start": "2475079",
    "end": "2481800"
  },
  {
    "text": "and you flush the whole page that's what an insert is so you're taking the same thing and you flushing it to dis",
    "start": "2481800",
    "end": "2489319"
  },
  {
    "text": "whatever 16k 8K depends on the database type and you just flush flush flush flush so so ssds don't like this very",
    "start": "2489319",
    "end": "2498800"
  },
  {
    "text": "much you know if you're taking the same place and you're flushing updates in the",
    "start": "2498800",
    "end": "2503920"
  },
  {
    "text": "same place because what that does is you're you're essentially creating",
    "start": "2503920",
    "end": "2509839"
  },
  {
    "text": "because even updates or n ssds are just inserts and a remap right but you're",
    "start": "2509839",
    "end": "2515880"
  },
  {
    "text": "creating and then that creates uh a new SSD page it's a little bit less than",
    "start": "2515880",
    "end": "2523480"
  },
  {
    "text": "that and then remapping the the the LBA to the new",
    "start": "2523480",
    "end": "2530040"
  },
  {
    "text": "physical page and then you do so you're leaving a lot of",
    "start": "2530040",
    "end": "2537240"
  },
  {
    "text": "garbage stale Pages which need to be what it called not",
    "start": "2537240",
    "end": "2543520"
  },
  {
    "text": "vacuumed garbage collected gced the SSD which is heck can this problem now how",
    "start": "2543520",
    "end": "2549400"
  },
  {
    "text": "big problem is that it's just if you with the wall if you have a wall which you do in B+ 3s you really write",
    "start": "2549400",
    "end": "2556920"
  },
  {
    "text": "sequentially to the wall and all of these updates only happen in memory and",
    "start": "2556920",
    "end": "2562119"
  },
  {
    "text": "how often are you flushing those pages just delay this thing right the whole thing is just cash anyway right so it",
    "start": "2562119",
    "end": "2568880"
  },
  {
    "text": "doesn't matter so to my opinion I think b+3 would have worked fine cuz like hey",
    "start": "2568880",
    "end": "2575119"
  },
  {
    "text": "just literally just write everything thing to the wall and keep all the pages",
    "start": "2575119",
    "end": "2580760"
  },
  {
    "text": "as long as possible in memory sure if we crash it's a cash who cares right just",
    "start": "2580760",
    "end": "2588440"
  },
  {
    "text": "all right just assume everything is invalidated like how often are we going to crash the problem is if we crash",
    "start": "2588440",
    "end": "2596839"
  },
  {
    "text": "we'll have to rebuild everything from the wall which takes time startup takes",
    "start": "2596839",
    "end": "2601880"
  },
  {
    "text": "time so the problem with b+3 is is this constant updating of the same page or",
    "start": "2601880",
    "end": "2608240"
  },
  {
    "text": "other similar Pages which translates to",
    "start": "2608240",
    "end": "2613520"
  },
  {
    "text": "uh a right and a remap and and we're leaving garbage for the SSD to clean up",
    "start": "2613520",
    "end": "2622520"
  },
  {
    "text": "you're not going to have this problem with LSM trees cuz you you always insert with LSM there's no like look up and",
    "start": "2622520",
    "end": "2631240"
  },
  {
    "text": "update the page in place does that make sense so with B+ trees",
    "start": "2631240",
    "end": "2637839"
  },
  {
    "text": "this can be avoided right just we have this thing that's called the wall right",
    "start": "2637839",
    "end": "2643359"
  },
  {
    "text": "ahead log right the right head log is a very nice sequential uh data structure which makes",
    "start": "2643359",
    "end": "2652040"
  },
  {
    "text": "keeps track of the changes in a sequential Manner and then you can update all these user Pages the leaf",
    "start": "2652040",
    "end": "2659640"
  },
  {
    "text": "Pages the internal pages in memory we don't need to flush these pages every time someone updated to desk okay keep",
    "start": "2659640",
    "end": "2667240"
  },
  {
    "text": "it in memory why not keep updating the memory updating memory is cheap there's",
    "start": "2667240",
    "end": "2672280"
  },
  {
    "text": "no like limit to how much you can do right unlike SSD like SSD if you update",
    "start": "2672280",
    "end": "2678200"
  },
  {
    "text": "the same thing a lot then you're going to be reusing a",
    "start": "2678200",
    "end": "2683400"
  },
  {
    "text": "lot of pages you're you're kicking up garbage collecting you're kicking up we",
    "start": "2683400",
    "end": "2689119"
  },
  {
    "text": "leveling all these algorithm that needs to shuffle data around erasing but just don't do it delay",
    "start": "2689119",
    "end": "2698319"
  },
  {
    "text": "flushing the background tasks that flushes the",
    "start": "2698319",
    "end": "2703640"
  },
  {
    "text": "pages keep keep it as long as you want and then flush every I don't know 10 minutes you",
    "start": "2703640",
    "end": "2711319"
  },
  {
    "text": "know keep keep accumulating those pages those rides and you can do that so",
    "start": "2711319",
    "end": "2717960"
  },
  {
    "text": "there's tricks you can play right but of course regardless of the decision we",
    "start": "2717960",
    "end": "2723800"
  },
  {
    "text": "don't know much about the warlo to decide but they went with Rox DB for that and I have one",
    "start": "2723800",
    "end": "2731440"
  },
  {
    "start": "2730000",
    "end": "2880000"
  },
  {
    "text": "uh concern with Rox DB really and that concern is is deletes right uh LSM trees doesn't do",
    "start": "2731440",
    "end": "2739880"
  },
  {
    "text": "well with deletes they create what they what is called um",
    "start": "2739880",
    "end": "2745680"
  },
  {
    "text": "tombstones and if you do a lot of deletes which purges will do I'm just",
    "start": "2745680",
    "end": "2751880"
  },
  {
    "text": "interested to see the numbers like what if there's a purge that deletes a million file those deletes are inserts",
    "start": "2751880",
    "end": "2759960"
  },
  {
    "text": "in LSM they just new files that would get inserted as tombstones we don't go",
    "start": "2759960",
    "end": "2765960"
  },
  {
    "text": "to the same place and insert we just insert tombstones and and now what",
    "start": "2765960",
    "end": "2771280"
  },
  {
    "text": "happens to reads that",
    "start": "2771280",
    "end": "2776839"
  },
  {
    "text": "clashes with tombstones I'm reading a cache file that",
    "start": "2776839",
    "end": "2783920"
  },
  {
    "text": "happens to be deleted that is expensive so what what is the cost of that and we've seen this",
    "start": "2783920",
    "end": "2790000"
  },
  {
    "text": "with the what it called the Cassandra actually I think I made a video about that where they have like massive",
    "start": "2790000",
    "end": "2795839"
  },
  {
    "text": "tombstones and they're just running through so many tombstones records",
    "start": "2795839",
    "end": "2802359"
  },
  {
    "text": "through during grads which which makes uh reading really slow so I'm interested",
    "start": "2802359",
    "end": "2808280"
  },
  {
    "text": "to see these numbers and uh at the at the worst case scenario how does it look",
    "start": "2808280",
    "end": "2813720"
  },
  {
    "text": "like because from what you're going to notice putting all together how much left",
    "start": "2813720",
    "end": "2821240"
  },
  {
    "text": "payoff yeah so this is what they have here let's go through this I think I think we have everything right did we",
    "start": "2821400",
    "end": "2827400"
  },
  {
    "text": "talk about everything we're going to talk through the numbers yeah they called this new database they built it on top of with rust of course has to be",
    "start": "2827400",
    "end": "2834680"
  },
  {
    "text": "rust uh cash DB was born they create a new database CU we don't have enough databases out there we need a new",
    "start": "2834680",
    "end": "2840680"
  },
  {
    "text": "database of course it's called Cash DB was born a service written in Rust built",
    "start": "2840680",
    "end": "2845720"
  },
  {
    "text": "on Rox DB which operates on each machine along with a cache proxy right so what",
    "start": "2845720",
    "end": "2851160"
  },
  {
    "text": "they do is essentially here's what it it does an active an active uh Purge if a purge",
    "start": "2851160",
    "end": "2859800"
  },
  {
    "text": "request comes into the queue to the machine it immediately gets executed and",
    "start": "2859800",
    "end": "2865280"
  },
  {
    "text": "we perform the delete and delete every single whatever flexible Purge it it uh",
    "start": "2865280",
    "end": "2873040"
  },
  {
    "text": "it results to right and then we delete everything and if a user wants to read something we",
    "start": "2873040",
    "end": "2880800"
  },
  {
    "start": "2880000",
    "end": "3030000"
  },
  {
    "text": "look it up in the cache first this is something we didn't used to do before well we look it up if it's not there",
    "start": "2880800",
    "end": "2886359"
  },
  {
    "text": "that means it's either deleted purged which we might have to took some hit on the Tombstones to just go through it and",
    "start": "2886359",
    "end": "2893200"
  },
  {
    "text": "find that oh it's a tombstone deleted or it might be there if it's there I found",
    "start": "2893200",
    "end": "2900079"
  },
  {
    "text": "it okay don't return immediately there's one more thing that that's a nice optimization they added here go and look",
    "start": "2900079",
    "end": "2906280"
  },
  {
    "text": "through the actually cuz there might be a Purge request in the queue that we didn't process yet go look just just",
    "start": "2906280",
    "end": "2912400"
  },
  {
    "text": "just take a take a shot the the Quee that you have if any of these Purge",
    "start": "2912400",
    "end": "2917880"
  },
  {
    "text": "request matches this file then just don't return to the user and just uh",
    "start": "2917880",
    "end": "2924440"
  },
  {
    "text": "basically go to the uh origin server and pull a new copy [Music]",
    "start": "2924440",
    "end": "2930280"
  },
  {
    "text": "right so that's all what it happen so there is a background process that reads the P PGE request from the queue and",
    "start": "2930280",
    "end": "2936000"
  },
  {
    "text": "then uh uh process it on the cach DB instance of course all of this we talked",
    "start": "2936000",
    "end": "2943640"
  },
  {
    "text": "about that this optimization they have so this means purges will prevent",
    "start": "2943640",
    "end": "2950599"
  },
  {
    "text": "the cash proxy from returning a match cash file as soon as the purge reaches the machine so once we reach the machine",
    "start": "2950599",
    "end": "2956839"
  },
  {
    "text": "even if the purge is not processed we still can cash this cases which is amazing right because that those purches",
    "start": "2956839",
    "end": "2963000"
  },
  {
    "text": "can can be in the queue still right even if there are millions of files that",
    "start": "2963000",
    "end": "2968680"
  },
  {
    "text": "correspond to The Purge key and takes and takes a while to actually delete them all from desk it's amazing because",
    "start": "2968680",
    "end": "2975920"
  },
  {
    "text": "not only you need to delete them from the index because there is a data structure that is index then you have to",
    "start": "2975920",
    "end": "2981319"
  },
  {
    "text": "turn around actually physically delete them from disk too right and and that can be scheduled I think you don't have",
    "start": "2981319",
    "end": "2988079"
  },
  {
    "text": "to thinkr nextly go and delete those files right you can can just keep them",
    "start": "2988079",
    "end": "2993119"
  },
  {
    "text": "there as long as they're deleted from the index you're safe because your index is the SCE of truth but this is The",
    "start": "2993119",
    "end": "2998640"
  },
  {
    "text": "coreless Purge you go you talk to your local instance and then that local",
    "start": "2998640",
    "end": "3005400"
  },
  {
    "text": "instance distribute The Purge and you use cash DB fan out worker to Fan out",
    "start": "3005400",
    "end": "3012520"
  },
  {
    "text": "everything all these Purge request and talk to all the other uh cash DB",
    "start": "3012520",
    "end": "3019480"
  },
  {
    "text": "instances and that's how Corless work so they're saving with this new approach they're saving 10 extra storage which is",
    "start": "3019480",
    "end": "3026200"
  },
  {
    "text": "amazing and we're getting 150 millisecond but here's here's the catch",
    "start": "3026200",
    "end": "3032359"
  },
  {
    "start": "3030000",
    "end": "3510000"
  },
  {
    "text": "it's p50 the 50th percentile right so there's the benchmarks",
    "start": "3032359",
    "end": "3039760"
  },
  {
    "text": "so the benchmarks on the 50 that's the average on the coreless approach you can see",
    "start": "3039760",
    "end": "3047680"
  },
  {
    "text": "that the average is 150 millisecond in the core based which is the sil silver",
    "start": "3047680",
    "end": "3053400"
  },
  {
    "text": "silver light the quick silver approach some of you might not know what silver",
    "start": "3053400",
    "end": "3058440"
  },
  {
    "text": "light are that's some of you might laugh but uh quick silver approach is 1.5",
    "start": "3058440",
    "end": "3064280"
  },
  {
    "text": "seconds yeah 90 90% but guys",
    "start": "3064280",
    "end": "3070720"
  },
  {
    "text": "uh I'm interested to see the P99 numbers",
    "start": "3070720",
    "end": "3076040"
  },
  {
    "text": "because I believe that will tell us something else and I like to compare the",
    "start": "3076040",
    "end": "3081559"
  },
  {
    "text": "p99s of this guy versus the P99 of the Corless",
    "start": "3081559",
    "end": "3087040"
  },
  {
    "text": "and I have a slight suspicion that coreless will be slower",
    "start": "3087040",
    "end": "3093280"
  },
  {
    "text": "at the P99 than core based why because there's just",
    "start": "3093280",
    "end": "3102559"
  },
  {
    "text": "more work to do we're adding more work there's a there's a database to be",
    "start": "3102559",
    "end": "3108680"
  },
  {
    "text": "maintained locally there's an index and there is active purging which",
    "start": "3108680",
    "end": "3115079"
  },
  {
    "text": "takes time and depends on on how they delete files I really hope that they",
    "start": "3115079",
    "end": "3120640"
  },
  {
    "text": "don't synchronously delete the file right after they Purge uh they execute",
    "start": "3120640",
    "end": "3128359"
  },
  {
    "text": "The Purge on the index because that will be it will be really slow right they",
    "start": "3128359",
    "end": "3135119"
  },
  {
    "text": "have to schedule the delet on an on an asynchronous thread they have",
    "start": "3135119",
    "end": "3140640"
  },
  {
    "text": "to right otherwise this I I can I can see easy easily 10 seconds 9",
    "start": "3140640",
    "end": "3150920"
  },
  {
    "text": "seconds for for complex purges that reached millions of files just just imagine just say hey go go and delete",
    "start": "3150920",
    "end": "3158359"
  },
  {
    "text": "million files globally no way it's not it's going to take one50 milliseconds come on",
    "start": "3158359",
    "end": "3165880"
  },
  {
    "text": "right just the network alone this is probably just the network alone right",
    "start": "3165880",
    "end": "3170960"
  },
  {
    "text": "just okay go there in and out take this much right but even though right this",
    "start": "3170960",
    "end": "3177799"
  },
  {
    "text": "time it's amazing that this took 1.5 millisecond that's just because that's",
    "start": "3177799",
    "end": "3182839"
  },
  {
    "text": "that's that's the cost of Quick Silver right because we're Distributing",
    "start": "3182839",
    "end": "3189119"
  },
  {
    "text": "everywhere and we're going all the way to the local uh to the core server and",
    "start": "3189119",
    "end": "3196480"
  },
  {
    "text": "and back but then we don't really do much once we receive the pur request",
    "start": "3196480",
    "end": "3201720"
  },
  {
    "text": "that's the cost of the network and that's it so that Sub Sub sub millisecond",
    "start": "3201720",
    "end": "3206920"
  },
  {
    "text": "that's the all that's the that's the entire cost",
    "start": "3206920",
    "end": "3212000"
  },
  {
    "text": "the quick silver is the latency then we don't really do much with lazy Purge lazy Purge is very",
    "start": "3212000",
    "end": "3219839"
  },
  {
    "text": "cheap right lazy Purge if I received a purge",
    "start": "3219839",
    "end": "3227440"
  },
  {
    "text": "request I just keep it there the next request I do a tiny query to quer Quick",
    "start": "3227440",
    "end": "3232880"
  },
  {
    "text": "Silver which takes as they say few micros seconds it's going to be intered to see those numbers but I really think",
    "start": "3232880",
    "end": "3240359"
  },
  {
    "text": "it's going to be slower I can't imagine active purging be faster than lazy",
    "start": "3240359",
    "end": "3247319"
  },
  {
    "text": "purges I just can't imagine that right I don't know guys what do you think about",
    "start": "3247319",
    "end": "3253079"
  },
  {
    "text": "all this it's interesting I love it I love that we have this but I think there",
    "start": "3253079",
    "end": "3258720"
  },
  {
    "text": "is so much missing here it's just to me there's so much missing one more thing I would like to",
    "start": "3258720",
    "end": "3264440"
  },
  {
    "text": "add is is is yeah regardless of the database you're going to use right just deleting million rows million rows from",
    "start": "3264440",
    "end": "3274680"
  },
  {
    "text": "an index takes time right it's really slow to",
    "start": "3274680",
    "end": "3280799"
  },
  {
    "text": "delete right it's just hey go delete a million Purge yeah Purge Million result",
    "start": "3280799",
    "end": "3287040"
  },
  {
    "text": "maybe like million is just unrealistic but who knows maybe the maybe it exist whether you it do it",
    "start": "3287040",
    "end": "3294400"
  },
  {
    "text": "through LSM or be three there must be like there there would be a difference between the two I can see B+ 3 being",
    "start": "3294400",
    "end": "3303119"
  },
  {
    "text": "faster in reads than uh uh than LSM but Pro POS possibly",
    "start": "3303119",
    "end": "3312000"
  },
  {
    "text": "slow and and rights like when I delete deleting a million from a b+3 versus an",
    "start": "3312000",
    "end": "3318520"
  },
  {
    "text": "LSM it's just not a simple question to answer right CU LSM will just it will",
    "start": "3318520",
    "end": "3324119"
  },
  {
    "text": "just insert a bunch of stuff B plus plus three it has a structure to manage it",
    "start": "3324119",
    "end": "3329240"
  },
  {
    "text": "has like a tree to balance and uh depends on what you're deleting of course they have to be",
    "start": "3329240",
    "end": "3335000"
  },
  {
    "text": "random I suppose so you'll be dancing across the the leaves of the tree left",
    "start": "3335000",
    "end": "3342280"
  },
  {
    "text": "and right and you're deleting doing update update update update update update update on all the pages writing",
    "start": "3342280",
    "end": "3348200"
  },
  {
    "text": "all these wall entries uh if you have a mistuned",
    "start": "3348200",
    "end": "3353920"
  },
  {
    "text": "database uh then what you going to end up with is is a lot of flushes God forbid for",
    "start": "3353920",
    "end": "3361480"
  },
  {
    "text": "all these rights will slow down a lot of stuff so and that's the beauty of all this understanding the use case and they",
    "start": "3361480",
    "end": "3368520"
  },
  {
    "text": "probably thought about all of this and they have answers to all of this right",
    "start": "3368520",
    "end": "3374480"
  },
  {
    "text": "cuz the people behind this is are smart people you know of course they they thought about everything about these",
    "start": "3374480",
    "end": "3380799"
  },
  {
    "text": "things I'm pretty sure they thought about that just I wish there there's the P90 90 I don't want 99 then I just want",
    "start": "3380799",
    "end": "3388880"
  },
  {
    "text": "P99 P99 best P99 don't give me don't give me B p80 p80 give me",
    "start": "3388880",
    "end": "3398200"
  },
  {
    "text": "p80 p80 just give me p80 anyway let's go what's next what are",
    "start": "3398599",
    "end": "3406200"
  },
  {
    "text": "they planning to what's next we are currently wrapping up the roll out of",
    "start": "3406200",
    "end": "3411359"
  },
  {
    "text": "the last throughput changes which allow us to efficiently scale Purge",
    "start": "3411359",
    "end": "3417480"
  },
  {
    "text": "quests oh they're doing more more fixes nice and that happens as that happens we",
    "start": "3417480",
    "end": "3424200"
  },
  {
    "text": "will revise our rate limits and open up Purge by tag host name and prefix for",
    "start": "3424200",
    "end": "3430839"
  },
  {
    "text": "all plan type oh look at that once the free uh package can Purge that will ramp",
    "start": "3430839",
    "end": "3440680"
  },
  {
    "text": "up the request as well we expect to begin rolling out additional Purge types to to all plans and users by",
    "start": "3440680",
    "end": "3449440"
  },
  {
    "text": "2025 yeah in addition in the process of implementing this new approach we have",
    "start": "3449520",
    "end": "3454760"
  },
  {
    "text": "identified Improvement that will shave a few more milliseconds off of our single",
    "start": "3454760",
    "end": "3459839"
  },
  {
    "text": "file Purge currently single file Purge have a p50 of 234 millisecond however we",
    "start": "3459839",
    "end": "3466240"
  },
  {
    "text": "want to and can bring that number down to 200",
    "start": "3466240",
    "end": "3472039"
  },
  {
    "text": "milliseconds how's that slower though how single file is slower in",
    "start": "3472039",
    "end": "3480319"
  },
  {
    "text": "coreless h wonder how is that like here's what I want to know in this in",
    "start": "3480319",
    "end": "3487079"
  },
  {
    "text": "these numbers like what is Network latency what is the time being",
    "start": "3487079",
    "end": "3492880"
  },
  {
    "text": "spent locally yeah what is the network latency versus what is the",
    "start": "3492880",
    "end": "3498000"
  },
  {
    "text": "time uh for for this purge yeah interesting stuff guys what",
    "start": "3498000",
    "end": "3505039"
  },
  {
    "text": "do you think uh that that's basically it for me that was a long video we learned",
    "start": "3505039",
    "end": "3510960"
  },
  {
    "start": "3510000",
    "end": "3641000"
  },
  {
    "text": "so much right let's summarize it what do we have what do we have guys let's",
    "start": "3510960",
    "end": "3516680"
  },
  {
    "text": "summarize this video so as a summary what they did they had a system where",
    "start": "3516680",
    "end": "3521920"
  },
  {
    "text": "they have a centralized system where they talk to this Central node and that Central node replicates The Purge",
    "start": "3521920",
    "end": "3528559"
  },
  {
    "text": "request to everywhere which then uh let every single data center know to purge",
    "start": "3528559",
    "end": "3534839"
  },
  {
    "text": "those caches that we need to purge the problem with that is the latency of the",
    "start": "3534839",
    "end": "3540039"
  },
  {
    "text": "network so they Chang that from a core based centralized system to a",
    "start": "3540039",
    "end": "3545520"
  },
  {
    "text": "peer-to-peer Network so all right I'll talk to my system you talk to this you talk let's talk to each other and then",
    "start": "3545520",
    "end": "3552000"
  },
  {
    "text": "under 150 millisecond everybody just got the purge request the other change they",
    "start": "3552000",
    "end": "3557760"
  },
  {
    "text": "made is they they changed from lazy Purge IE let's send The Purge and then",
    "start": "3557760",
    "end": "3566640"
  },
  {
    "text": "immediately quit and when a user actually makes a request look up and",
    "start": "3566640",
    "end": "3571680"
  },
  {
    "text": "then start The Purge only when you actually have a match right so lazily start purging so versus now they do an",
    "start": "3571680",
    "end": "3578480"
  },
  {
    "text": "active Purge once The Purge re is received to the machine immediately it's getting processed yeah it puts in that",
    "start": "3578480",
    "end": "3584520"
  },
  {
    "text": "queue but this it just gets processed and we have now an index local database",
    "start": "3584520",
    "end": "3591039"
  },
  {
    "text": "you know what I like about all this just all the challenges that people run through and just be you try to be in",
    "start": "3591039",
    "end": "3598480"
  },
  {
    "text": "their shoes and trying to work through the problems and there are really not a",
    "start": "3598480",
    "end": "3603520"
  },
  {
    "text": "single solution for any of this there's just many ways you know to skin this",
    "start": "3603520",
    "end": "3608680"
  },
  {
    "text": "thing and uh who who is to know that which one is the best approach to be",
    "start": "3608680",
    "end": "3614640"
  },
  {
    "text": "honest right all right guys what do you think about all of this that was a long video we learned a lot I'm just I'm very",
    "start": "3614640",
    "end": "3621359"
  },
  {
    "text": "excited to learn about all of this stuff just uh to read about all this stuff to learn",
    "start": "3621359",
    "end": "3626760"
  },
  {
    "text": "so much you know just techniques really here there's so many ways to solve this",
    "start": "3626760",
    "end": "3633240"
  },
  {
    "text": "it's just fascinating how everyone thinks differently see you in the next",
    "start": "3633240",
    "end": "3638640"
  },
  {
    "text": "one",
    "start": "3638640",
    "end": "3641640"
  }
]