[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "you know guys I always believed that",
    "start": "40",
    "end": "3319"
  },
  {
    "text": "bugs are what makes our experience as",
    "start": "3319",
    "end": "7200"
  },
  {
    "text": "software Engineers it is the encounter",
    "start": "7200",
    "end": "11080"
  },
  {
    "text": "and finally the you know getting over",
    "start": "11080",
    "end": "14839"
  },
  {
    "text": "the hump of bugs and fixing the bug or",
    "start": "14839",
    "end": "18000"
  },
  {
    "text": "addressing it cuz you don't always fix",
    "start": "18000",
    "end": "20320"
  },
  {
    "text": "bugs you just work around it sometimes",
    "start": "20320",
    "end": "23199"
  },
  {
    "text": "and fix it and automatically it got",
    "start": "23199",
    "end": "25119"
  },
  {
    "text": "fixed by itself cuz bugs sometimes are",
    "start": "25119",
    "end": "28840"
  },
  {
    "text": "exposed because other things it has not",
    "start": "28840",
    "end": "31920"
  },
  {
    "start": "30000",
    "end": "140000"
  },
  {
    "text": "related with the thing that the bug is",
    "start": "31920",
    "end": "34399"
  },
  {
    "text": "exposed to you know if you if you if you",
    "start": "34399",
    "end": "36879"
  },
  {
    "text": "Cod it for a long time you know what I'm",
    "start": "36879",
    "end": "38480"
  },
  {
    "text": "saying but essentially in this video I",
    "start": "38480",
    "end": "41239"
  },
  {
    "text": "want to talk about a very interesting",
    "start": "41239",
    "end": "43480"
  },
  {
    "text": "bug that I never run into before that I",
    "start": "43480",
    "end": "46360"
  },
  {
    "text": "run in the past few months actually I",
    "start": "46360",
    "end": "49719"
  },
  {
    "text": "thought itd make a very good podcast and",
    "start": "49719",
    "end": "52440"
  },
  {
    "text": "to give you an idea what really happens",
    "start": "52440",
    "end": "55160"
  },
  {
    "text": "when you run out of this randomly",
    "start": "55160",
    "end": "58039"
  },
  {
    "text": "assigned Emeral sour Sports in your TCP",
    "start": "58039",
    "end": "62600"
  },
  {
    "text": "connections cuz I never run out of those",
    "start": "62600",
    "end": "66000"
  },
  {
    "text": "there yeah there are",
    "start": "66000",
    "end": "67960"
  },
  {
    "text": "65,000 is but man you can run on it if",
    "start": "67960",
    "end": "72960"
  },
  {
    "text": "you wrote inefficient code which in that",
    "start": "72960",
    "end": "76280"
  },
  {
    "text": "particular case I did let's jump into it",
    "start": "76280",
    "end": "80520"
  },
  {
    "text": "welcome to the back in engineering show",
    "start": "80520",
    "end": "82079"
  },
  {
    "text": "with your host Hussein Naser and uh to",
    "start": "82079",
    "end": "86240"
  },
  {
    "text": "explain this bug I I wanted to kind of",
    "start": "86240",
    "end": "89119"
  },
  {
    "text": "visualize this simple system you know I",
    "start": "89119",
    "end": "91799"
  },
  {
    "text": "simplified it just for the sake of this",
    "start": "91799",
    "end": "93560"
  },
  {
    "text": "video but essentially it's a it's a web",
    "start": "93560",
    "end": "95560"
  },
  {
    "text": "server and there is a message broker and",
    "start": "95560",
    "end": "98600"
  },
  {
    "text": "there's other pieces of the of the",
    "start": "98600",
    "end": "100680"
  },
  {
    "text": "system that is irrelevant here but these",
    "start": "100680",
    "end": "103280"
  },
  {
    "text": "are the two pieces that are critical",
    "start": "103280",
    "end": "105280"
  },
  {
    "text": "here so the web server that accepts",
    "start": "105280",
    "end": "107840"
  },
  {
    "text": "connection from clients directly this is",
    "start": "107840",
    "end": "110280"
  },
  {
    "text": "the public uh web server that accepts",
    "start": "110280",
    "end": "113719"
  },
  {
    "text": "connections right so clients browsers",
    "start": "113719",
    "end": "116799"
  },
  {
    "text": "curs anything that connects to the web",
    "start": "116799",
    "end": "118680"
  },
  {
    "text": "server and the web server",
    "start": "118680",
    "end": "121000"
  },
  {
    "text": "submits jobs submits messages all sorts",
    "start": "121000",
    "end": "125280"
  },
  {
    "text": "of thing to the message queue and",
    "start": "125280",
    "end": "128000"
  },
  {
    "text": "there's there's this will get processed",
    "start": "128000",
    "end": "131200"
  },
  {
    "text": "by further Downstream Services you know",
    "start": "131200",
    "end": "134879"
  },
  {
    "text": "or will it will be there for certain",
    "start": "134879",
    "end": "139000"
  },
  {
    "text": "metadata information okay so here's what",
    "start": "139000",
    "end": "141599"
  },
  {
    "start": "140000",
    "end": "240000"
  },
  {
    "text": "happen what what happened is after uh a",
    "start": "141599",
    "end": "145319"
  },
  {
    "text": "few",
    "start": "145319",
    "end": "146640"
  },
  {
    "text": "commits something got committed to the",
    "start": "146640",
    "end": "149200"
  },
  {
    "text": "repo",
    "start": "149200",
    "end": "150920"
  },
  {
    "text": "and what we noticed",
    "start": "150920",
    "end": "153160"
  },
  {
    "text": "is the the system works fine requests",
    "start": "153160",
    "end": "156800"
  },
  {
    "text": "are being processed very nicely very",
    "start": "156800",
    "end": "160239"
  },
  {
    "text": "fast with no problem at all you make a",
    "start": "160239",
    "end": "162920"
  },
  {
    "text": "request to the web server you get a",
    "start": "162920",
    "end": "164840"
  },
  {
    "text": "response very nice but after a few",
    "start": "164840",
    "end": "167680"
  },
  {
    "text": "thousand requests and there is no",
    "start": "167680",
    "end": "172239"
  },
  {
    "text": "particular number right after a few",
    "start": "172239",
    "end": "174760"
  },
  {
    "text": "thousand of",
    "start": "174760",
    "end": "176599"
  },
  {
    "text": "course the web server will stop",
    "start": "176599",
    "end": "178879"
  },
  {
    "text": "responding all of the",
    "start": "178879",
    "end": "181400"
  },
  {
    "text": "it was just a nope I'm done what will",
    "start": "181400",
    "end": "184640"
  },
  {
    "text": "happen is the client will give up so",
    "start": "184640",
    "end": "186680"
  },
  {
    "text": "you'll give a client timeout and if you",
    "start": "186680",
    "end": "189360"
  },
  {
    "text": "have a proxy which made the pro pro",
    "start": "189360",
    "end": "191920"
  },
  {
    "text": "problem a little bit worse is the proxy",
    "start": "191920",
    "end": "194040"
  },
  {
    "text": "will time out and we get a proxy time I",
    "start": "194040",
    "end": "196519"
  },
  {
    "text": "was thinking that oh there is something",
    "start": "196519",
    "end": "199319"
  },
  {
    "text": "is happening on the server that is",
    "start": "199319",
    "end": "200920"
  },
  {
    "text": "timing out so which kind of diluted the",
    "start": "200920",
    "end": "204599"
  },
  {
    "text": "problem a little bit so essentially",
    "start": "204599",
    "end": "207239"
  },
  {
    "text": "what's happened is if you talk to the we",
    "start": "207239",
    "end": "209040"
  },
  {
    "text": "server directly make a request after",
    "start": "209040",
    "end": "211560"
  },
  {
    "text": "that threshold few thousand",
    "start": "211560",
    "end": "214879"
  },
  {
    "text": "requests your request will just keep",
    "start": "214879",
    "end": "217519"
  },
  {
    "text": "processing forever sometimes you'll get",
    "start": "217519",
    "end": "220439"
  },
  {
    "text": "a response after like three few minutes",
    "start": "220439",
    "end": "223400"
  },
  {
    "text": "but then after that they just",
    "start": "223400",
    "end": "226640"
  },
  {
    "text": "die and and you will try it again it",
    "start": "226640",
    "end": "229439"
  },
  {
    "text": "will work after that it will just go",
    "start": "229439",
    "end": "232200"
  },
  {
    "text": "down again so what was so that's the",
    "start": "232200",
    "end": "235680"
  },
  {
    "text": "behavior of the I I usually like not to",
    "start": "235680",
    "end": "240519"
  },
  {
    "start": "240000",
    "end": "420000"
  },
  {
    "text": "go directly to the because if I go to",
    "start": "240519",
    "end": "242239"
  },
  {
    "text": "the repo I I see the comments I see I",
    "start": "242239",
    "end": "244840"
  },
  {
    "text": "can I can tell what were wrong but",
    "start": "244840",
    "end": "248599"
  },
  {
    "text": "that's to me that's the last thing I do",
    "start": "248599",
    "end": "251079"
  },
  {
    "text": "because first I need to investigate the",
    "start": "251079",
    "end": "252920"
  },
  {
    "text": "problem and I have a whole course of how",
    "start": "252920",
    "end": "254560"
  },
  {
    "text": "to troubleshoot back in application uh",
    "start": "254560",
    "end": "256880"
  },
  {
    "text": "check it out go to performance. husin",
    "start": "256880",
    "end": "259440"
  },
  {
    "text": "nar.com uh to learn more about it",
    "start": "259440",
    "end": "262720"
  },
  {
    "text": "without even if you even if you don't",
    "start": "262720",
    "end": "264280"
  },
  {
    "text": "have a source code you can you can",
    "start": "264280",
    "end": "266520"
  },
  {
    "text": "technically",
    "start": "266520",
    "end": "268039"
  },
  {
    "text": "learn about a system system by just you",
    "start": "268039",
    "end": "271320"
  },
  {
    "text": "know do a blackbox this thing as they",
    "start": "271320",
    "end": "275039"
  },
  {
    "text": "say from the just looking at what is the",
    "start": "275039",
    "end": "277840"
  },
  {
    "text": "behavior of this as a box and how is it",
    "start": "277840",
    "end": "280400"
  },
  {
    "text": "communicating to each other so so what I",
    "start": "280400",
    "end": "283639"
  },
  {
    "text": "did is I went to the web server okay the",
    "start": "283639",
    "end": "287360"
  },
  {
    "text": "web server in this particular case was a",
    "start": "287360",
    "end": "289039"
  },
  {
    "text": "different machine than the message",
    "start": "289039",
    "end": "291440"
  },
  {
    "text": "broker so went to the web server and it",
    "start": "291440",
    "end": "293360"
  },
  {
    "text": "just says all right that's",
    "start": "293360",
    "end": "295880"
  },
  {
    "text": "that give me all your",
    "start": "295880",
    "end": "298479"
  },
  {
    "text": "connections and and I",
    "start": "298479",
    "end": "301880"
  },
  {
    "text": "noticed a flood of connections which is",
    "start": "301880",
    "end": "306199"
  },
  {
    "text": "unusual you shouldn't have this many",
    "start": "306199",
    "end": "308840"
  },
  {
    "text": "connection outgoing from the web server",
    "start": "308840",
    "end": "311720"
  },
  {
    "text": "to the message",
    "start": "311720",
    "end": "314520"
  },
  {
    "text": "broker you need one right and the",
    "start": "314520",
    "end": "317880"
  },
  {
    "text": "message broker I used in this particular",
    "start": "317880",
    "end": "320360"
  },
  {
    "text": "case we",
    "start": "320360",
    "end": "321560"
  },
  {
    "text": "used is uh",
    "start": "321560",
    "end": "325319"
  },
  {
    "text": "supports",
    "start": "325319",
    "end": "327280"
  },
  {
    "text": "uh multiplexing IE you can send multiple",
    "start": "327280",
    "end": "331160"
  },
  {
    "text": "requests concurrently on the same",
    "start": "331160",
    "end": "334720"
  },
  {
    "text": "connection so in this particular case",
    "start": "334960",
    "end": "338400"
  },
  {
    "text": "which which means that you can use one",
    "start": "338400",
    "end": "340680"
  },
  {
    "text": "connection for pretty much every request",
    "start": "340680",
    "end": "342960"
  },
  {
    "text": "right you can you can go crazy you don't",
    "start": "342960",
    "end": "344800"
  },
  {
    "text": "need another connection so you should",
    "start": "344800",
    "end": "346840"
  },
  {
    "text": "see one maybe two in case of an",
    "start": "346840",
    "end": "349759"
  },
  {
    "text": "overloaded system right but we've been",
    "start": "349759",
    "end": "354199"
  },
  {
    "text": "seeing 10,000",
    "start": "354199",
    "end": "357120"
  },
  {
    "text": "20,000 right and and that didn't look",
    "start": "357120",
    "end": "360919"
  },
  {
    "text": "right and if the system goes down it",
    "start": "360919",
    "end": "363440"
  },
  {
    "text": "goes to up to the 20,000 connections and",
    "start": "363440",
    "end": "366039"
  },
  {
    "text": "so that's the alarm but but why would",
    "start": "366039",
    "end": "368880"
  },
  {
    "text": "that be the problem that's the second",
    "start": "368880",
    "end": "371160"
  },
  {
    "text": "question all right you have a lot of",
    "start": "371160",
    "end": "372880"
  },
  {
    "text": "connections so what so we know the",
    "start": "372880",
    "end": "375960"
  },
  {
    "text": "problem and I looked at the com I know",
    "start": "375960",
    "end": "379000"
  },
  {
    "text": "even the inall that caused it but now",
    "start": "379000",
    "end": "381759"
  },
  {
    "text": "why is the question always this",
    "start": "381759",
    "end": "384319"
  },
  {
    "text": "curiosity in my it's a little bit",
    "start": "384319",
    "end": "386160"
  },
  {
    "text": "annoying when when people works with me",
    "start": "386160",
    "end": "388560"
  },
  {
    "text": "like oh no no no",
    "start": "388560",
    "end": "390240"
  },
  {
    "text": "we we know what the problem just just",
    "start": "390240",
    "end": "391840"
  },
  {
    "text": "revert it no no no I w't understand you",
    "start": "391840",
    "end": "394199"
  },
  {
    "text": "know it's just uh that's that's just uh",
    "start": "394199",
    "end": "396560"
  },
  {
    "text": "that's just my nature it could be",
    "start": "396560",
    "end": "398840"
  },
  {
    "text": "annoying sometimes because it slows down",
    "start": "398840",
    "end": "400639"
  },
  {
    "text": "the process because once once you",
    "start": "400639",
    "end": "404759"
  },
  {
    "text": "understand but but then so all right so",
    "start": "404759",
    "end": "408639"
  },
  {
    "text": "what we have making a lot of connections",
    "start": "408639",
    "end": "411000"
  },
  {
    "text": "that should not stop the web server from",
    "start": "411000",
    "end": "415919"
  },
  {
    "text": "responding right so here's what happened",
    "start": "415919",
    "end": "420240"
  },
  {
    "start": "420000",
    "end": "930000"
  },
  {
    "text": "we essentially long story short we ran",
    "start": "420240",
    "end": "423199"
  },
  {
    "text": "out of the aeral",
    "start": "423199",
    "end": "425520"
  },
  {
    "text": "ports in that machine so what does that",
    "start": "425520",
    "end": "428639"
  },
  {
    "text": "mean so this requires a little bit of",
    "start": "428639",
    "end": "430840"
  },
  {
    "text": "understanding of how TCP works you see",
    "start": "430840",
    "end": "433000"
  },
  {
    "text": "when you can establish a connection uh",
    "start": "433000",
    "end": "435759"
  },
  {
    "text": "between a client and a server uh the you",
    "start": "435759",
    "end": "439319"
  },
  {
    "text": "are essentially connecting to a",
    "start": "439319",
    "end": "441280"
  },
  {
    "text": "well-known IP address and a well-known",
    "start": "441280",
    "end": "444360"
  },
  {
    "text": "Port that is often if you're secure like",
    "start": "444360",
    "end": "447639"
  },
  {
    "text": "in HTTPS for 43 and the IP address is",
    "start": "447639",
    "end": "452400"
  },
  {
    "text": "also fixed right after you do a DNS you",
    "start": "452400",
    "end": "454919"
  },
  {
    "text": "get you get a load of IP addresses if",
    "start": "454919",
    "end": "457319"
  },
  {
    "text": "you have you",
    "start": "457319",
    "end": "458919"
  },
  {
    "text": "know",
    "start": "458919",
    "end": "460440"
  },
  {
    "text": "redundancy but then eventually you only",
    "start": "460440",
    "end": "462800"
  },
  {
    "text": "pick one so then you pick that and you",
    "start": "462800",
    "end": "464720"
  },
  {
    "text": "connect so you know the port you know",
    "start": "464720",
    "end": "466159"
  },
  {
    "text": "the source uh the destination IP the",
    "start": "466159",
    "end": "469759"
  },
  {
    "text": "destination Port but uh you know the",
    "start": "469759",
    "end": "473000"
  },
  {
    "text": "source Port uh sorry the source IP",
    "start": "473000",
    "end": "475919"
  },
  {
    "text": "that's your IP address and Let's ignore",
    "start": "475919",
    "end": "478599"
  },
  {
    "text": "Nat for for Simplicity here so the",
    "start": "478599",
    "end": "481120"
  },
  {
    "text": "source IP is known but the only one",
    "start": "481120",
    "end": "483639"
  },
  {
    "text": "variant is the source port and this is",
    "start": "483639",
    "end": "486319"
  },
  {
    "text": "the Colonel's job to assign a random",
    "start": "486319",
    "end": "490440"
  },
  {
    "text": "Source Port so that it completes the",
    "start": "490440",
    "end": "493560"
  },
  {
    "text": "four",
    "start": "493560",
    "end": "494599"
  },
  {
    "text": "toples the four",
    "start": "494599",
    "end": "496599"
  },
  {
    "text": "entries I always get confused with the",
    "start": "496599",
    "end": "498800"
  },
  {
    "text": "Wordle okay so these four entries so",
    "start": "498800",
    "end": "501599"
  },
  {
    "text": "that that fourth thing Port so it will",
    "start": "501599",
    "end": "504800"
  },
  {
    "text": "assign random from I think it's the even",
    "start": "504800",
    "end": "507560"
  },
  {
    "text": "the fal Port has a range right let me",
    "start": "507560",
    "end": "509919"
  },
  {
    "text": "look it up actually so I can give you",
    "start": "509919",
    "end": "511639"
  },
  {
    "text": "that uh",
    "start": "511639",
    "end": "513360"
  },
  {
    "text": "Emeral Port Ren so yeah I'm seeing here",
    "start": "513360",
    "end": "517120"
  },
  {
    "text": "from",
    "start": "517120",
    "end": "519518"
  },
  {
    "text": "32,768 up until",
    "start": "519800",
    "end": "521959"
  },
  {
    "text": "6,999 cuz we're talking about uh ipv4",
    "start": "521959",
    "end": "526279"
  },
  {
    "text": "here uh the port is 32 bit right so",
    "start": "526279",
    "end": "530560"
  },
  {
    "text": "that's 65,000 so you have a range of",
    "start": "530560",
    "end": "533080"
  },
  {
    "text": "30,000 which kind of lines up of",
    "start": "533080",
    "end": "535200"
  },
  {
    "text": "whatever I'm seeing when it gets to the",
    "start": "535200",
    "end": "537200"
  },
  {
    "text": "20,000 25,000",
    "start": "537200",
    "end": "540600"
  },
  {
    "text": "what we start seeing the problem So",
    "start": "540600",
    "end": "544320"
  },
  {
    "text": "eventually in this particular case the",
    "start": "544320",
    "end": "546600"
  },
  {
    "text": "web server IP address is known fixed the",
    "start": "546600",
    "end": "550200"
  },
  {
    "text": "destination IP address is known that's",
    "start": "550200",
    "end": "552640"
  },
  {
    "text": "the message cue right IP address the",
    "start": "552640",
    "end": "555399"
  },
  {
    "text": "destination Port is known that's the",
    "start": "555399",
    "end": "557760"
  },
  {
    "text": "port of The Listener on the message",
    "start": "557760",
    "end": "561399"
  },
  {
    "text": "queue right and the source Port is",
    "start": "561399",
    "end": "563720"
  },
  {
    "text": "basically FM mod that is generated so",
    "start": "563720",
    "end": "565800"
  },
  {
    "text": "you get only",
    "start": "565800",
    "end": "567360"
  },
  {
    "text": "what based on these",
    "start": "567360",
    "end": "570160"
  },
  {
    "text": "knowing that these two is are fixed",
    "start": "570160",
    "end": "573079"
  },
  {
    "text": "right the source IP is fixed the",
    "start": "573079",
    "end": "575640"
  },
  {
    "text": "destination IP is fixed the destination",
    "start": "575640",
    "end": "577399"
  },
  {
    "text": "Port is fixed you get only do you get",
    "start": "577399",
    "end": "579320"
  },
  {
    "text": "only 20,000 is",
    "start": "579320",
    "end": "581480"
  },
  {
    "text": "25,000 ports that means you get 25,000",
    "start": "581480",
    "end": "585120"
  },
  {
    "text": "connection from here to here you might",
    "start": "585120",
    "end": "587399"
  },
  {
    "text": "say it's it's",
    "start": "587399",
    "end": "590399"
  },
  {
    "text": "low it's not low number it's it's enough",
    "start": "590399",
    "end": "594800"
  },
  {
    "text": "for what you need to because",
    "start": "594800",
    "end": "596959"
  },
  {
    "text": "remember this is well fixed",
    "start": "596959",
    "end": "600079"
  },
  {
    "text": "than the host the client in this case",
    "start": "600079",
    "end": "603640"
  },
  {
    "text": "the Bob server is the client and the",
    "start": "603640",
    "end": "605920"
  },
  {
    "text": "destination the backend is the message",
    "start": "605920",
    "end": "607839"
  },
  {
    "text": "Cura and these are fixed so what's",
    "start": "607839",
    "end": "610839"
  },
  {
    "text": "happening is eventually we discovered",
    "start": "610839",
    "end": "614160"
  },
  {
    "text": "that every request incorrectly every",
    "start": "614160",
    "end": "618079"
  },
  {
    "text": "request from the client which also has a",
    "start": "618079",
    "end": "621000"
  },
  {
    "text": "connection by the way but this is this",
    "start": "621000",
    "end": "623399"
  },
  {
    "text": "is not a problem right the client to the",
    "start": "623399",
    "end": "626839"
  },
  {
    "text": "web server is not a problem you might",
    "start": "626839",
    "end": "629120"
  },
  {
    "text": "say why well the destination is known",
    "start": "629120",
    "end": "631839"
  },
  {
    "text": "the web server the destination IP is",
    "start": "631839",
    "end": "634440"
  },
  {
    "text": "known the destination Port is known the",
    "start": "634440",
    "end": "636399"
  },
  {
    "text": "web server Port 80 or 443 but the",
    "start": "636399",
    "end": "639240"
  },
  {
    "text": "clients change you don't have one client",
    "start": "639240",
    "end": "642399"
  },
  {
    "text": "establishing 100,000 connections no you",
    "start": "642399",
    "end": "645720"
  },
  {
    "text": "have 100,000 clients establishing a",
    "start": "645720",
    "end": "647920"
  },
  {
    "text": "connection each so that's you can go",
    "start": "647920",
    "end": "650440"
  },
  {
    "text": "crazy with that number right so the IP",
    "start": "650440",
    "end": "652839"
  },
  {
    "text": "address the S IP address change in this",
    "start": "652839",
    "end": "655200"
  },
  {
    "text": "particular case the source Port of",
    "start": "655200",
    "end": "657200"
  },
  {
    "text": "course for each Source IP address you",
    "start": "657200",
    "end": "658880"
  },
  {
    "text": "get all this again the 20,000 or 30,000",
    "start": "658880",
    "end": "662440"
  },
  {
    "text": "whatever Source IP address right and",
    "start": "662440",
    "end": "665639"
  },
  {
    "text": "these ranges by the way if you look up",
    "start": "665639",
    "end": "667279"
  },
  {
    "text": "this table I'll put on the screen uh",
    "start": "667279",
    "end": "669880"
  },
  {
    "text": "it's filled it's different for Windows",
    "start": "669880",
    "end": "672680"
  },
  {
    "text": "different for Linux different for",
    "start": "672680",
    "end": "675760"
  },
  {
    "text": "other you know other uh Colonels",
    "start": "675760",
    "end": "682360"
  },
  {
    "text": "so what was happening the problem is",
    "start": "682360",
    "end": "685440"
  },
  {
    "text": "clients were connecting clients were",
    "start": "685440",
    "end": "687079"
  },
  {
    "text": "sending request and then for request the",
    "start": "687079",
    "end": "690360"
  },
  {
    "text": "web server was supposed to look up a",
    "start": "690360",
    "end": "693079"
  },
  {
    "text": "backend connection and",
    "start": "693079",
    "end": "695880"
  },
  {
    "text": "establish uh this connection to the back",
    "start": "695880",
    "end": "698240"
  },
  {
    "text": "end which is the message que if it's not",
    "start": "698240",
    "end": "701120"
  },
  {
    "text": "established if there is an existing",
    "start": "701120",
    "end": "703120"
  },
  {
    "text": "connection write whatever you want to",
    "start": "703120",
    "end": "706040"
  },
  {
    "text": "write to the message cube",
    "start": "706040",
    "end": "708519"
  },
  {
    "text": "right sometimes you need the message CU",
    "start": "708519",
    "end": "711120"
  },
  {
    "text": "Sometimes some requests don't need it at",
    "start": "711120",
    "end": "712600"
  },
  {
    "text": "all right it's this problem the bug was",
    "start": "712600",
    "end": "715680"
  },
  {
    "text": "in the web",
    "start": "715680",
    "end": "716920"
  },
  {
    "text": "server and a specific Ally this logic",
    "start": "716920",
    "end": "720560"
  },
  {
    "text": "that connects to this message CU",
    "start": "720560",
    "end": "724880"
  },
  {
    "text": "incorrectly we were for every request",
    "start": "724880",
    "end": "728680"
  },
  {
    "text": "we're creating a new connection",
    "start": "728680",
    "end": "731680"
  },
  {
    "text": "regardless every request create new",
    "start": "731680",
    "end": "733800"
  },
  {
    "text": "connection send every request creating a",
    "start": "733800",
    "end": "736720"
  },
  {
    "text": "connection send for every request we",
    "start": "736720",
    "end": "738760"
  },
  {
    "text": "were creating a new connection so we",
    "start": "738760",
    "end": "740760"
  },
  {
    "text": "were leaving all these connections just",
    "start": "740760",
    "end": "743760"
  },
  {
    "text": "Idol right so you might say Okay Idols",
    "start": "743760",
    "end": "747399"
  },
  {
    "text": "well there's a timeout in the tcv shows",
    "start": "747399",
    "end": "749399"
  },
  {
    "text": "they eventually die and that's what",
    "start": "749399",
    "end": "750720"
  },
  {
    "text": "would happen right they eventually these",
    "start": "750720",
    "end": "753040"
  },
  {
    "text": "connections will die but what makes",
    "start": "753040",
    "end": "755720"
  },
  {
    "text": "things worse is there was custom client",
    "start": "755720",
    "end": "758680"
  },
  {
    "text": "logic I mean client here is the web",
    "start": "758680",
    "end": "760600"
  },
  {
    "text": "server that essentially kept",
    "start": "760600",
    "end": "763800"
  },
  {
    "text": "intentionally kept the connections Alive",
    "start": "763800",
    "end": "767120"
  },
  {
    "text": "by doing something like websockets it's",
    "start": "767120",
    "end": "769000"
  },
  {
    "text": "not really websocket it's good have you",
    "start": "769000",
    "end": "770760"
  },
  {
    "text": "heard of pingpong uh protocol in",
    "start": "770760",
    "end": "773720"
  },
  {
    "text": "websocket it's an it's it's a it's an",
    "start": "773720",
    "end": "777000"
  },
  {
    "text": "application layer 7",
    "start": "777000",
    "end": "780000"
  },
  {
    "text": "uh keep alive mechanism not the TCP keep",
    "start": "780000",
    "end": "783360"
  },
  {
    "text": "alive higher than that not the kernel",
    "start": "783360",
    "end": "785639"
  },
  {
    "text": "keeping the connection alive it's the",
    "start": "785639",
    "end": "787079"
  },
  {
    "text": "application sending essentially nothing",
    "start": "787079",
    "end": "791000"
  },
  {
    "text": "right just just to tell the client I'm",
    "start": "791000",
    "end": "793760"
  },
  {
    "text": "still using it I'm still here I'm still",
    "start": "793760",
    "end": "795040"
  },
  {
    "text": "here I'm so it's just chatter",
    "start": "795040",
    "end": "797000"
  },
  {
    "text": "essentially it's just Bing b Bing b",
    "start": "797000",
    "end": "799800"
  },
  {
    "text": "right so that kept the problem as well",
    "start": "799800",
    "end": "802959"
  },
  {
    "text": "because we're now maintaining all this",
    "start": "802959",
    "end": "805120"
  },
  {
    "text": "so they that added a little bit of an",
    "start": "805120",
    "end": "806920"
  },
  {
    "text": "overhead to maintain all these",
    "start": "806920",
    "end": "808760"
  },
  {
    "text": "connections is that we don't really need",
    "start": "808760",
    "end": "810160"
  },
  {
    "text": "to second we were keeping those",
    "start": "810160",
    "end": "814480"
  },
  {
    "text": "connections and they taken resources and",
    "start": "814480",
    "end": "818639"
  },
  {
    "text": "eventually once we reach that threshold",
    "start": "818639",
    "end": "820959"
  },
  {
    "text": "FAL report new requests what will happen",
    "start": "820959",
    "end": "825480"
  },
  {
    "text": "is or new request remember this these",
    "start": "825480",
    "end": "830399"
  },
  {
    "text": "are got to be careful with that",
    "start": "830399",
    "end": "833079"
  },
  {
    "text": "synchronous",
    "start": "833079",
    "end": "835199"
  },
  {
    "text": "request now the client I don't care",
    "start": "835199",
    "end": "837120"
  },
  {
    "text": "about the client the client is",
    "start": "837120",
    "end": "838120"
  },
  {
    "text": "asynchronous the web server received",
    "start": "838120",
    "end": "840720"
  },
  {
    "text": "this request is",
    "start": "840720",
    "end": "843360"
  },
  {
    "text": "synchronous I.E it is blocking the",
    "start": "843360",
    "end": "846600"
  },
  {
    "text": "request it's making the the a backend",
    "start": "846600",
    "end": "849920"
  },
  {
    "text": "request to the message queue while the",
    "start": "849920",
    "end": "852000"
  },
  {
    "text": "request blocked until it received the",
    "start": "852000",
    "end": "854839"
  },
  {
    "text": "response from the message queue it will",
    "start": "854839",
    "end": "856800"
  },
  {
    "text": "unblock the request and it will send the",
    "start": "856800",
    "end": "858639"
  },
  {
    "text": "response right it's stuck at this stage",
    "start": "858639",
    "end": "862399"
  },
  {
    "text": "where says there all right I cannot",
    "start": "862399",
    "end": "864639"
  },
  {
    "text": "respond to this guy until I get",
    "start": "864639",
    "end": "867399"
  },
  {
    "text": "something from SQ but guess what we were",
    "start": "867399",
    "end": "870600"
  },
  {
    "text": "stuck in essentially the kernel we",
    "start": "870600",
    "end": "873440"
  },
  {
    "text": "couldn't even create a connection so the",
    "start": "873440",
    "end": "877320"
  },
  {
    "text": "web server got berserk and eventually",
    "start": "877320",
    "end": "881600"
  },
  {
    "text": "other apps started to break because",
    "start": "881600",
    "end": "884399"
  },
  {
    "text": "other apps needs to connect to the to",
    "start": "884399",
    "end": "886759"
  },
  {
    "text": "that machine for some reason or another",
    "start": "886759",
    "end": "889519"
  },
  {
    "text": "and that also broke something that",
    "start": "889519",
    "end": "891839"
  },
  {
    "text": "consumed some of the feral ports and it",
    "start": "891839",
    "end": "894880"
  },
  {
    "text": "it it becomes very interesting right so",
    "start": "894880",
    "end": "898160"
  },
  {
    "text": "yeah you don't have much to be honest to",
    "start": "898160",
    "end": "900880"
  },
  {
    "text": "to run out of the F report so after I uh",
    "start": "900880",
    "end": "903839"
  },
  {
    "text": "we identifi that problem we saw the okay",
    "start": "903839",
    "end": "906120"
  },
  {
    "text": "fair enough here's the bug we're instead",
    "start": "906120",
    "end": "908480"
  },
  {
    "text": "of actually looking up for existing",
    "start": "908480",
    "end": "910519"
  },
  {
    "text": "connection we're always creating a new",
    "start": "910519",
    "end": "911920"
  },
  {
    "text": "one uh we fixed that all is good happy",
    "start": "911920",
    "end": "915720"
  },
  {
    "text": "happy happy we have back to one",
    "start": "915720",
    "end": "917800"
  },
  {
    "text": "beautiful connection so one resource can",
    "start": "917800",
    "end": "920839"
  },
  {
    "text": "give you so much you can go so far with",
    "start": "920839",
    "end": "924120"
  },
  {
    "text": "one connection so beautiful indeed very",
    "start": "924120",
    "end": "928600"
  },
  {
    "text": "very beautiful so I then started looking",
    "start": "928600",
    "end": "930680"
  },
  {
    "start": "930000",
    "end": "1113000"
  },
  {
    "text": "up like is this really a problem people",
    "start": "930680",
    "end": "932720"
  },
  {
    "text": "run into because it seems like an easy",
    "start": "932720",
    "end": "934839"
  },
  {
    "text": "thing to run into and fair enough a",
    "start": "934839",
    "end": "937079"
  },
  {
    "text": "cloud fry has a nice blog about it and",
    "start": "937079",
    "end": "939880"
  },
  {
    "text": "running out of ephemeral ports things",
    "start": "939880",
    "end": "942279"
  },
  {
    "text": "can get really wrong you know if that",
    "start": "942279",
    "end": "945120"
  },
  {
    "text": "started happen and I think the the",
    "start": "945120",
    "end": "948800"
  },
  {
    "text": "biggest problem that you're going to",
    "start": "948800",
    "end": "950720"
  },
  {
    "text": "start having",
    "start": "950720",
    "end": "953680"
  },
  {
    "text": "is if you are if you're not on the same",
    "start": "953800",
    "end": "956720"
  },
  {
    "text": "machine no",
    "start": "956720",
    "end": "960720"
  },
  {
    "text": "if you are on the same machine you're",
    "start": "961079",
    "end": "963720"
  },
  {
    "text": "going to see it even",
    "start": "963720",
    "end": "966199"
  },
  {
    "text": "worse because what was happening",
    "start": "966199",
    "end": "970000"
  },
  {
    "text": "is the The Source IP to the let's say",
    "start": "970000",
    "end": "974959"
  },
  {
    "text": "you're connected to local host let Let's",
    "start": "974959",
    "end": "977360"
  },
  {
    "text": "ignore IPv6 for for a second say only",
    "start": "977360",
    "end": "979920"
  },
  {
    "text": "ipv4 right so 12701 you're connecting to",
    "start": "979920",
    "end": "984120"
  },
  {
    "text": "Port 80 locally right and then the",
    "start": "984120",
    "end": "988360"
  },
  {
    "text": "source port is also known 12770 001",
    "start": "988360",
    "end": "992040"
  },
  {
    "text": "right so you're connecting locally you",
    "start": "992040",
    "end": "993560"
  },
  {
    "text": "have a loop back connections for one",
    "start": "993560",
    "end": "995560"
  },
  {
    "text": "reason or another you're using the TCP",
    "start": "995560",
    "end": "997319"
  },
  {
    "text": "IP and I always say try to shift away",
    "start": "997319",
    "end": "999959"
  },
  {
    "text": "from that you can't always do that like",
    "start": "999959",
    "end": "1002120"
  },
  {
    "text": "you can use ipv uh IPC for that but",
    "start": "1002120",
    "end": "1005639"
  },
  {
    "text": "sometimes you can't do that especially",
    "start": "1005639",
    "end": "1007600"
  },
  {
    "text": "if you want to use side proxies right",
    "start": "1007600",
    "end": "1010199"
  },
  {
    "text": "where where you want two containers",
    "start": "1010199",
    "end": "1012240"
  },
  {
    "text": "having the same loop back and they want",
    "start": "1012240",
    "end": "1014560"
  },
  {
    "text": "to connect to each other to enable",
    "start": "1014560",
    "end": "1016560"
  },
  {
    "text": "essentially side carard proxying to work",
    "start": "1016560",
    "end": "1019240"
  },
  {
    "text": "right you need to this capability T cpib",
    "start": "1019240",
    "end": "1022560"
  },
  {
    "text": "to do that so then",
    "start": "1022560",
    "end": "1026520"
  },
  {
    "text": "um you can essentially also run off your",
    "start": "1026520",
    "end": "1031079"
  },
  {
    "text": "ephemeral loop back ports as long as the",
    "start": "1031079",
    "end": "1035280"
  },
  {
    "text": "fixed the source the destination Port",
    "start": "1035280",
    "end": "1038000"
  },
  {
    "text": "the destination IP is fixed you and of",
    "start": "1038000",
    "end": "1041959"
  },
  {
    "text": "course the source IP is fixed you have",
    "start": "1041959",
    "end": "1043480"
  },
  {
    "text": "this 20,000 limit 30,000 limit whatever",
    "start": "1043480",
    "end": "1046000"
  },
  {
    "text": "the kernel allows it right but then but",
    "start": "1046000",
    "end": "1048720"
  },
  {
    "text": "then what if I connect to another Port",
    "start": "1048720",
    "end": "1050640"
  },
  {
    "text": "completely a different one 21 like right",
    "start": "1050640",
    "end": "1054000"
  },
  {
    "text": "22 is the SSH or 21 21 is FTP 22 right I",
    "start": "1054000",
    "end": "1058360"
  },
  {
    "text": "want to connect to that you can",
    "start": "1058360",
    "end": "1060919"
  },
  {
    "text": "technically reuse those ephemeral ports",
    "start": "1060919",
    "end": "1064000"
  },
  {
    "text": "because those are different now it's a",
    "start": "1064000",
    "end": "1065880"
  },
  {
    "text": "different",
    "start": "1065880",
    "end": "1067080"
  },
  {
    "text": "tle but some kernels don't even allow",
    "start": "1067080",
    "end": "1071200"
  },
  {
    "text": "that because it's sometimes break",
    "start": "1071200",
    "end": "1073640"
  },
  {
    "text": "applications because the uniqueness of",
    "start": "1073640",
    "end": "1076120"
  },
  {
    "text": "source ports they are treated as just",
    "start": "1076120",
    "end": "1079559"
  },
  {
    "text": "unique by itself not the they some",
    "start": "1079559",
    "end": "1082559"
  },
  {
    "text": "application don't take the four tles",
    "start": "1082559",
    "end": "1084159"
  },
  {
    "text": "they take the two tles which is of",
    "start": "1084159",
    "end": "1085679"
  },
  {
    "text": "course not an good idea but it sometimes",
    "start": "1085679",
    "end": "1089600"
  },
  {
    "text": "break application so even some kernels",
    "start": "1089600",
    "end": "1092400"
  },
  {
    "text": "just don't allow you to reuse ports even",
    "start": "1092400",
    "end": "1094360"
  },
  {
    "text": "across destination ports if that makes",
    "start": "1094360",
    "end": "1096880"
  },
  {
    "text": "sense which makes the problem uh even",
    "start": "1096880",
    "end": "1099440"
  },
  {
    "text": "more interesting so I I'll reference",
    "start": "1099440",
    "end": "1100960"
  },
  {
    "text": "that blog for you guys to to read but",
    "start": "1100960",
    "end": "1104159"
  },
  {
    "text": "yeah that's what I want to talk about",
    "start": "1104159",
    "end": "1105480"
  },
  {
    "text": "today so yeah I thought I thought this",
    "start": "1105480",
    "end": "1107559"
  },
  {
    "text": "was an interesting uh bug that I'll I'll",
    "start": "1107559",
    "end": "1109799"
  },
  {
    "text": "show share with you guys see you in the",
    "start": "1109799",
    "end": "1111919"
  },
  {
    "text": "next one goodbye",
    "start": "1111919",
    "end": "1114880"
  }
]