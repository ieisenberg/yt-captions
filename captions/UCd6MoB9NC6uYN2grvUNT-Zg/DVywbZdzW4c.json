[
  {
    "text": "all right my uh name is Camille Samaha I am on the worldwide public sector",
    "start": "599",
    "end": "6799"
  },
  {
    "text": "Solutions architecture team and we have a lot to cover",
    "start": "6799",
    "end": "12639"
  },
  {
    "text": "today okay so we're going to be covering two relatively new uh features uh that",
    "start": "12639",
    "end": "20240"
  },
  {
    "text": "were released in the last uh two to three months and primarily that's VPC",
    "start": "20240",
    "end": "26240"
  },
  {
    "text": "endpoints and this ability to reach public service endpoints from within",
    "start": "26240",
    "end": "31800"
  },
  {
    "text": "your VPC as well as VPC flow logs which will uh as I'll show you will increase",
    "start": "31800",
    "end": "39840"
  },
  {
    "text": "your visibility into the uh uh traffic in your VPC now this is an advanced",
    "start": "39840",
    "end": "47280"
  },
  {
    "text": "session level uh 300 so you are expected to have some knowledge on AW AWS",
    "start": "47280",
    "end": "55359"
  },
  {
    "text": "specifically VPC ec2 S3 uh and also a little bit of uh",
    "start": "55359",
    "end": "62440"
  },
  {
    "text": "network connectivity and routing within the VPC and if you don't don't don't sweat it I'm going to spend a few",
    "start": "62440",
    "end": "68960"
  },
  {
    "text": "minutes uh just covering the basics uh to make sure we're all level set and I'm",
    "start": "68960",
    "end": "75159"
  },
  {
    "text": "going to attempt the demo Gods I'm going to try a couple of live demos I do have",
    "start": "75159",
    "end": "80560"
  },
  {
    "text": "backup so uh bear with me and let's Jump Right",
    "start": "80560",
    "end": "85640"
  },
  {
    "text": "In okay VPC endpoints uh uh as most of you already",
    "start": "85640",
    "end": "91880"
  },
  {
    "text": "probably know a lot of the abstracted services offered through AWS are",
    "start": "91880",
    "end": "97159"
  },
  {
    "text": "available through Public Service endpoints so you need publicly",
    "start": "97159",
    "end": "103439"
  },
  {
    "text": "addressable IP addresses to be able to reach those uh endpoints any calls you",
    "start": "103439",
    "end": "109280"
  },
  {
    "text": "make for example against a service like S3 um whether you use the apis whether",
    "start": "109280",
    "end": "116399"
  },
  {
    "text": "you use the AWS CLI or the console or SDK all comes down to communicating with",
    "start": "116399",
    "end": "123200"
  },
  {
    "text": "that service through a service endpoint okay and uh the answer we're",
    "start": "123200",
    "end": "129959"
  },
  {
    "text": "trying to address is okay how to best reach those public endpoints from your",
    "start": "129959",
    "end": "136519"
  },
  {
    "text": "virtual private Cloud okay little bit of uh Basics on",
    "start": "136519",
    "end": "144040"
  },
  {
    "text": "VPC uh typically it's uh your own slice of the AWS cloud that you can deploy",
    "start": "144040",
    "end": "151160"
  },
  {
    "text": "your own private resources into typically assign a CER block like for",
    "start": "151160",
    "end": "157640"
  },
  {
    "text": "example 1010.6 and then you uh set up uh subnets",
    "start": "157640",
    "end": "164720"
  },
  {
    "text": "and those subnets um each subnet is within a particular",
    "start": "164720",
    "end": "170480"
  },
  {
    "text": "availability zone so in this case I created two subnets in two separate availability zones and I'm uh you know",
    "start": "170480",
    "end": "177720"
  },
  {
    "text": "you deploy your ec2 instances in those subnet Nets and all the resources within your VPC are able to communicate with",
    "start": "177720",
    "end": "184319"
  },
  {
    "text": "each other we also provide the capability to reach external resources",
    "start": "184319",
    "end": "191319"
  },
  {
    "text": "such as uh other ec2 instances let's say in your ec2 classic",
    "start": "191319",
    "end": "196440"
  },
  {
    "text": "environment uh servers in your omam data centers just general internet uh uh",
    "start": "196440",
    "end": "204560"
  },
  {
    "text": "sites or resources uh you can reach public uh service points in this example",
    "start": "204560",
    "end": "211560"
  },
  {
    "text": "I have S3 depicted as well as other resources in other vpcs whether in your",
    "start": "211560",
    "end": "217239"
  },
  {
    "text": "account or other accounts uh for today's session we're going to concentrate on VPC",
    "start": "217239",
    "end": "224040"
  },
  {
    "text": "endpoints uh but before doing that let's take a little bit of a dive into the um connectivity uh within a",
    "start": "224040",
    "end": "235120"
  },
  {
    "text": "VPC once you set up a subnet in a APC",
    "start": "235120",
    "end": "240319"
  },
  {
    "text": "and you look at its routing table and I'm going to show examples of using AWS CLI commands this is for an advanced",
    "start": "240319",
    "end": "248599"
  },
  {
    "text": "topic and in this par particular case uh I mean you'll see always an entry that's",
    "start": "248599",
    "end": "254519"
  },
  {
    "text": "going to be the CER block of your VPC with a Gateway ID of",
    "start": "254519",
    "end": "260959"
  },
  {
    "text": "local and that entry you cannot delete or modify all it means is all traffic to",
    "start": "260959",
    "end": "268919"
  },
  {
    "text": "the VPC uh IP addresses stay within that VPC you",
    "start": "268919",
    "end": "274919"
  },
  {
    "text": "don't have to worry about routing or any other connectivity uh these uh route table",
    "start": "274919",
    "end": "281240"
  },
  {
    "text": "entries will be in your each C uh subnet route table and if you don't have a par",
    "start": "281240",
    "end": "287199"
  },
  {
    "text": "a your own uh subnet route table there's a default route table which has that entry as well all",
    "start": "287199",
    "end": "294759"
  },
  {
    "text": "right so how do you establish public connectivity",
    "start": "294759",
    "end": "301479"
  },
  {
    "text": "you in effect you uh create an internet gateway you attach that gateway to a",
    "start": "303199",
    "end": "310320"
  },
  {
    "text": "particular VPC and then you add a routing entry for a subnet and uh if you want all your",
    "start": "310320",
    "end": "317919"
  },
  {
    "text": "traffic to go to the internet you'll add the 0.0.0.0 uh block and point it to the internet",
    "start": "317919",
    "end": "325759"
  },
  {
    "text": "gateway or igw ID all right and by the way if you set up an account today",
    "start": "325759",
    "end": "332440"
  },
  {
    "text": "you'll have a default VPC set up and that configuration is done for you",
    "start": "332440",
    "end": "337600"
  },
  {
    "text": "automatically so with your default VPC you already have an internet gateway and you already have a route entry in your",
    "start": "337600",
    "end": "344160"
  },
  {
    "text": "routing table all right so with the internet gateway added let's take a peek",
    "start": "344160",
    "end": "350720"
  },
  {
    "text": "into the routing table again here's our I mean the local cider is still in the",
    "start": "350720",
    "end": "357080"
  },
  {
    "text": "routing table but you'll also see the new route t uh route entry that we added",
    "start": "357080",
    "end": "362440"
  },
  {
    "text": "pointing to the default route and all that means is everything not destined to",
    "start": "362440",
    "end": "370520"
  },
  {
    "text": "the VPC IP range will go through the igw to the",
    "start": "370520",
    "end": "375840"
  },
  {
    "text": "internet pretty straightforward right a subnet that has an",
    "start": "375840",
    "end": "381440"
  },
  {
    "text": "igw route entry is referred to as a public subnet which means you can assign",
    "start": "381440",
    "end": "388440"
  },
  {
    "text": "elastic IP address or public IP addresses to instances to be able to communicate with",
    "start": "388440",
    "end": "394560"
  },
  {
    "text": "external uh resources through the igw if you do not have an igw or a route table",
    "start": "394560",
    "end": "402080"
  },
  {
    "text": "entry in the subnet that's what we refer to as a private subnet so when I talk um",
    "start": "402080",
    "end": "408720"
  },
  {
    "text": "in the few in the next slides and I refer to a public subnet and private subnet that's a definition of the two",
    "start": "408720",
    "end": "415400"
  },
  {
    "text": "all right so now we have this uh VPC and we",
    "start": "415400",
    "end": "424960"
  },
  {
    "text": "want to be able to communicate with an S3 Public",
    "start": "424960",
    "end": "430039"
  },
  {
    "text": "Service uh endpoint so in order to do that as I showed you you will you can",
    "start": "430039",
    "end": "436440"
  },
  {
    "text": "attach a igw that gives you a path to the internet and you're able to reach",
    "start": "436440",
    "end": "442280"
  },
  {
    "text": "the public service end points great what if you have a private",
    "start": "442280",
    "end": "449599"
  },
  {
    "text": "subnet where you put your application servers or even if you have a data",
    "start": "449599",
    "end": "456080"
  },
  {
    "text": "storage layer and you don't want to assign public IP addresses to those resources to those ec2",
    "start": "456080",
    "end": "462879"
  },
  {
    "text": "instances now there are a couple of ways to do it have been done very successfully by",
    "start": "462879",
    "end": "468240"
  },
  {
    "text": "customers uh one is to establish a natat instance in a public subnet and add a",
    "start": "468240",
    "end": "475240"
  },
  {
    "text": "route table entry for the private subnet pointing to that n instance so any",
    "start": "475240",
    "end": "481240"
  },
  {
    "text": "traffic going to the to the internet will flow through that not instance to",
    "start": "481240",
    "end": "486840"
  },
  {
    "text": "uh external resources another very good approach is instead of a not instance you can use one or more proxy servers",
    "start": "486840",
    "end": "495159"
  },
  {
    "text": "and you could then have a little bit more control so let's look at those three options one is to use public IP",
    "start": "495159",
    "end": "502479"
  },
  {
    "text": "addresses with the igw one is to use an at instance and the",
    "start": "502479",
    "end": "508639"
  },
  {
    "text": "other is to use a proxy server what are the pros and cons of uh",
    "start": "508639",
    "end": "515959"
  },
  {
    "text": "each approach with using and leveraging the",
    "start": "515959",
    "end": "521599"
  },
  {
    "text": "igw igw is a service that is highly available and highly scalable",
    "start": "521599",
    "end": "528760"
  },
  {
    "text": "horizontally scalable which effectively that means there's no uh upper ceiling",
    "start": "528760",
    "end": "534680"
  },
  {
    "text": "on the amount of traffic you're able to push through that service so that's a big",
    "start": "534680",
    "end": "540360"
  },
  {
    "text": "Pro and if you leverage security groups and knackles network access control",
    "start": "540360",
    "end": "546120"
  },
  {
    "text": "lists in your uh VPC you're able to control uh which destination addresses",
    "start": "546120",
    "end": "554120"
  },
  {
    "text": "and ports are able to communicate uh uh through that",
    "start": "554120",
    "end": "560040"
  },
  {
    "text": "igw now what are the cons for that is you need to assign a public IP address",
    "start": "560040",
    "end": "566360"
  },
  {
    "text": "to an ec2 instance to be able to use the IG you that might not meet your security",
    "start": "566360",
    "end": "574560"
  },
  {
    "text": "profile and throughout the talk you'll you'll hear me talk about security I'm going to look at these two features with",
    "start": "574560",
    "end": "581320"
  },
  {
    "text": "a security lens um I work in with a lot of government and security is usually a",
    "start": "581320",
    "end": "588320"
  },
  {
    "text": "top topic that we cover not that it's not the case with uh uh with Enterprises",
    "start": "588320",
    "end": "594240"
  },
  {
    "text": "as well with the igw if you do have access uh to outside",
    "start": "594240",
    "end": "602200"
  },
  {
    "text": "resources let's say S3 the entire service is accessible so",
    "start": "602200",
    "end": "607920"
  },
  {
    "text": "it could be your the buckets in your account or buckets in different accounts",
    "start": "607920",
    "end": "612959"
  },
  {
    "text": "everything is accessible and again from a security perspective that might not be what uh the security profile that you're",
    "start": "612959",
    "end": "619440"
  },
  {
    "text": "you're going after all right with an at or maybe I should say in most cases it's",
    "start": "619440",
    "end": "625959"
  },
  {
    "text": "a pat service which is a port address transl ation uh the biggest benefit there is",
    "start": "625959",
    "end": "633720"
  },
  {
    "text": "you have full control of the ec2 instance on which you're running the not service you completely have control of",
    "start": "633720",
    "end": "640200"
  },
  {
    "text": "the configuration and with not generally is",
    "start": "640200",
    "end": "645279"
  },
  {
    "text": "supports all protocols but with the not instance uh",
    "start": "645279",
    "end": "651240"
  },
  {
    "text": "it could potentially be a single point of failure you can try to set up",
    "start": "651240",
    "end": "656760"
  },
  {
    "text": "configuration like a self-healing configuration using autoscaling as an example or M deploy",
    "start": "656760",
    "end": "662920"
  },
  {
    "text": "multiple n natat instances to reduce your blast radius if one of them goes down regardless the availability and the",
    "start": "662920",
    "end": "671839"
  },
  {
    "text": "scalability of using not instances are weaknesses because you are limited to",
    "start": "671839",
    "end": "679560"
  },
  {
    "text": "one or maybe two maybe three instances for all your traffic going to uh",
    "start": "679560",
    "end": "686160"
  },
  {
    "text": "external public resources uh so so there's a management overhead and a configuration",
    "start": "686160",
    "end": "692639"
  },
  {
    "text": "configuration overhead uh additionally similar to the igw setup if you allow access through",
    "start": "692639",
    "end": "701320"
  },
  {
    "text": "the net instance from your private subnets let's use S3 as an examples",
    "start": "701320",
    "end": "707160"
  },
  {
    "text": "you'll have access to the full service all the buckets and all the objects okay with uh a proxy servers uh",
    "start": "707160",
    "end": "717399"
  },
  {
    "text": "you will have a lot more flexibility from a security perspective a stick",
    "start": "717399",
    "end": "723360"
  },
  {
    "text": "squid configuration for example you'll be able to set up um URL filters to",
    "start": "723360",
    "end": "730240"
  },
  {
    "text": "restrict which buckets are accessible or which region and the three service for",
    "start": "730240",
    "end": "736040"
  },
  {
    "text": "example is is reachable by using those URL filters and you still have the uh",
    "start": "736040",
    "end": "742440"
  },
  {
    "text": "Central uh control of those uh instances and you do have ability to uh",
    "start": "742440",
    "end": "749680"
  },
  {
    "text": "improve your high Ava High availability profile by for example putting a load",
    "start": "749680",
    "end": "756240"
  },
  {
    "text": "balancer in front of a fleet of proxy servers regardless there's still a",
    "start": "756240",
    "end": "762160"
  },
  {
    "text": "management overhead there's still a configuration overhead and if one of",
    "start": "762160",
    "end": "767920"
  },
  {
    "text": "those dc2 instances fails your availability will be compromised until it's replaced or if you have a burst of",
    "start": "767920",
    "end": "775639"
  },
  {
    "text": "traffic you're going to have to have a period of time time where your availability or performances might",
    "start": "775639",
    "end": "782480"
  },
  {
    "text": "suffer because you can't scale fast enough okay and in general um proxy",
    "start": "782480",
    "end": "789560"
  },
  {
    "text": "servers will work with HTTP and https protocols all three approaches work well",
    "start": "789560",
    "end": "798120"
  },
  {
    "text": "and have worked for customers for many years but all three approaches have",
    "start": "798120",
    "end": "803560"
  },
  {
    "text": "deficiencies that could be improved on so what is",
    "start": "803560",
    "end": "809959"
  },
  {
    "text": "uh this lead to VPC endpoints with using VPC endpoints and",
    "start": "809959",
    "end": "818680"
  },
  {
    "text": "today there's only one service that's currently available that's VPC endpoints for S3 with more services to follow so",
    "start": "818680",
    "end": "828199"
  },
  {
    "text": "uh I'm going to concentrate the the talk on VPC for S3 VPC VPC endpoints for",
    "start": "828199",
    "end": "835399"
  },
  {
    "text": "S3 uh in a nutshell what what it what the service does is allow you your",
    "start": "835399",
    "end": "842040"
  },
  {
    "text": "resources in your VPC to reach S3 public",
    "start": "842040",
    "end": "847120"
  },
  {
    "text": "endpoints without having to set up an igw without having to set up ad instances or proxy",
    "start": "847120",
    "end": "854480"
  },
  {
    "text": "servers so similar to the",
    "start": "854480",
    "end": "859639"
  },
  {
    "text": "igw VPC endpoints is a is a service that is highly available and highly scalable",
    "start": "859639",
    "end": "868600"
  },
  {
    "text": "horizontal ly again the infrastructure that we uh and all the management work",
    "start": "868600",
    "end": "874079"
  },
  {
    "text": "that is needed to make that service highly available and highly scalable you don't need to worry about we take care",
    "start": "874079",
    "end": "880199"
  },
  {
    "text": "of that s if you've been using AWS for many years very familiar with",
    "start": "880199",
    "end": "885440"
  },
  {
    "text": "igw you set it up you don't even think about it and it works and in the demo I'm going to show you um just a peak",
    "start": "885440",
    "end": "893399"
  },
  {
    "text": "into the performance you know comparing VPC endpoints with igw and and a net",
    "start": "893399",
    "end": "900360"
  },
  {
    "text": "instance configuration just from a comparison point of view um another major advantage uh with",
    "start": "900360",
    "end": "909399"
  },
  {
    "text": "VPC endpoints is a very rich security control set that will help you improve",
    "start": "909399",
    "end": "915759"
  },
  {
    "text": "your security stance so let's",
    "start": "915759",
    "end": "921519"
  },
  {
    "text": "um this is just a a depiction of the ability to reach s three uh from your",
    "start": "922040",
    "end": "930759"
  },
  {
    "text": "VPC without having to set up an igw instead you set up a VPC endpoint all",
    "start": "930759",
    "end": "937720"
  },
  {
    "text": "right once you have the VPC endpoint let's take a quick look again at the",
    "start": "937720",
    "end": "943199"
  },
  {
    "text": "routing table you will again see the 10.0.0.0",
    "start": "943199",
    "end": "949199"
  },
  {
    "text": "sl16 which is a local uh block for the VPC but there's I have it highlighted in",
    "start": "949199",
    "end": "956639"
  },
  {
    "text": "yellow you'll Al you'll see also another entry something that starts with PL and",
    "start": "956639",
    "end": "961959"
  },
  {
    "text": "and an ID PL stands for prefix list and then the Target or the Gateway ID is the",
    "start": "961959",
    "end": "969360"
  },
  {
    "text": "VPC endpoint ID itself so what is a prefix list again",
    "start": "969360",
    "end": "976279"
  },
  {
    "text": "with a with a CLI you're able to describe the uh prefix",
    "start": "976279",
    "end": "982360"
  },
  {
    "text": "list basically it's a representation of the IP addresses one",
    "start": "982360",
    "end": "989160"
  },
  {
    "text": "or more cider blocks in a particular region in this case in US West 2 that",
    "start": "989160",
    "end": "995720"
  },
  {
    "text": "are assigned to the S3 service those IP addresses can and will",
    "start": "995720",
    "end": "1002560"
  },
  {
    "text": "change over time so with the prefix list you don't need to worry about the",
    "start": "1002560",
    "end": "1008480"
  },
  {
    "text": "management of that change we do that for you as long as you're using the prefix list you'll be pointing to the correct",
    "start": "1008480",
    "end": "1015199"
  },
  {
    "text": "IP addresses for the S3 service so that's if you've tried to do restrict",
    "start": "1015199",
    "end": "1021920"
  },
  {
    "text": "access to S3 for example by manually updating your security",
    "start": "1021920",
    "end": "1027120"
  },
  {
    "text": "groups uh based on the IP addresses at that time for that service uh you would",
    "start": "1027120",
    "end": "1033600"
  },
  {
    "text": "have to go back and put and manage that any changes on our side with a prefix",
    "start": "1033600",
    "end": "1039120"
  },
  {
    "text": "list we take care of that for you you don't need to worry about it okay so let's put that security lens",
    "start": "1039120",
    "end": "1047760"
  },
  {
    "text": "again and as you saw uh in the previous slide VPC endpoint is exposed as a new",
    "start": "1047760",
    "end": "1054160"
  },
  {
    "text": "route entry in your subnet routing table all right you can set up as many VPC",
    "start": "1054160",
    "end": "1061600"
  },
  {
    "text": "endpoints as you want for your VPC but since it's a route table entry",
    "start": "1061600",
    "end": "1067200"
  },
  {
    "text": "you can set up for a particular subnet you can set up only one VPC endpoint for",
    "start": "1067200",
    "end": "1073039"
  },
  {
    "text": "a particular service I'll explain why you saw have a",
    "start": "1073039",
    "end": "1079080"
  },
  {
    "text": "prefix list that's associated with the IP uh IP addresses for S3 in a",
    "start": "1079080",
    "end": "1084400"
  },
  {
    "text": "particular region that comes with a VPC endpoint if I put two of those entries",
    "start": "1084400",
    "end": "1089480"
  },
  {
    "text": "I'm going to have the same destination in a route table and then the routing is not going to work anymore so the next question is well why",
    "start": "1089480",
    "end": "1096919"
  },
  {
    "text": "would I want more than one VPC endpoint in my VPC say you have two subnets with",
    "start": "1096919",
    "end": "1102480"
  },
  {
    "text": "two different Prof security profiles that you want to uh set up when you",
    "start": "1102480",
    "end": "1108480"
  },
  {
    "text": "create create a VPC endpoint you have an opportunity and I'll go into that more in the next slide you have the",
    "start": "1108480",
    "end": "1114640"
  },
  {
    "text": "opportunity to specify which S3 resources you want accessible through that VPC endpoint in",
    "start": "1114640",
    "end": "1122159"
  },
  {
    "text": "English which buckets in which objects you want that subnet to have access to",
    "start": "1122159",
    "end": "1129520"
  },
  {
    "text": "so if you have subnet a for developers you can restrict with a one VPC endpoint",
    "start": "1129520",
    "end": "1136840"
  },
  {
    "text": "access to bucket a and bucket B you have",
    "start": "1136840",
    "end": "1142520"
  },
  {
    "text": "a a test subnet uh you can set up different uh uh policies for S3",
    "start": "1142520",
    "end": "1151039"
  },
  {
    "text": "resources and restrict it to one bucket with objects that start with test and",
    "start": "1151039",
    "end": "1156840"
  },
  {
    "text": "use a wild card test STAR so that's a reason why you would want to deploy",
    "start": "1156840",
    "end": "1162400"
  },
  {
    "text": "potentially more than one VPC input okay another",
    "start": "1162400",
    "end": "1169240"
  },
  {
    "text": "um if I go back a couple of times you see the VPC endpoint has a logical",
    "start": "1169240",
    "end": "1174400"
  },
  {
    "text": "pointer to it a logic it has an ID and that ID you can add to your security",
    "start": "1174400",
    "end": "1181600"
  },
  {
    "text": "groups so you could put a entry in your security group and then restrict at the",
    "start": "1181600",
    "end": "1188440"
  },
  {
    "text": "instance level which instances in that subnet have access or are denied access",
    "start": "1188440",
    "end": "1194799"
  },
  {
    "text": "to uh to the your S3 resources through that VPC un point so yet again another",
    "start": "1194799",
    "end": "1202640"
  },
  {
    "text": "tool for your security Engineers to be able to set up the right profile for the",
    "start": "1202640",
    "end": "1207919"
  },
  {
    "text": "right resources very powerful",
    "start": "1207919",
    "end": "1213880"
  },
  {
    "text": "okay um as I just mentioned when you create a VPC endpoint you'll have the",
    "start": "1213880",
    "end": "1219360"
  },
  {
    "text": "opportunity to define a resource policy and that with that resource policy",
    "start": "1219360",
    "end": "1225000"
  },
  {
    "text": "you're able to constrain the actions can be taken against as three",
    "start": "1225000",
    "end": "1231120"
  },
  {
    "text": "resources the buckets destination buckets as well as the paths uh in those",
    "start": "1231120",
    "end": "1237559"
  },
  {
    "text": "buckets which that means the objects in the in your in your buckets and you can use wild cards to give you the",
    "start": "1237559",
    "end": "1244679"
  },
  {
    "text": "combination that you need in addition to resource policies you also can specify",
    "start": "1244679",
    "end": "1251120"
  },
  {
    "text": "S3 bucket policies and restrict access to a particular bucket",
    "start": "1251120",
    "end": "1257919"
  },
  {
    "text": "to one VPC or a VP or more or one or",
    "start": "1257919",
    "end": "1263600"
  },
  {
    "text": "more VPC end points so you can think of it you have on the front end of it the way I",
    "start": "1263600",
    "end": "1271440"
  },
  {
    "text": "look at it you have your S3 resource policy that you put in place you also",
    "start": "1271440",
    "end": "1276799"
  },
  {
    "text": "have your bucket policy and you also can still re leverage the identity and access",
    "start": "1276799",
    "end": "1282840"
  },
  {
    "text": "management policy and all of those are Ed together to give you the final decision whether we have the permission",
    "start": "1282840",
    "end": "1290000"
  },
  {
    "text": "to run a particular action against a particular object or bucket so a lot of",
    "start": "1290000",
    "end": "1297159"
  },
  {
    "text": "fine grain control that H gives you an extremely powerful",
    "start": "1297159",
    "end": "1303520"
  },
  {
    "text": "Tool Set uh that will enhance your security uh",
    "start": "1303520",
    "end": "1309240"
  },
  {
    "text": "stance okay here's a",
    "start": "1309240",
    "end": "1316600"
  },
  {
    "text": "sample uh VPC andp resource policy and basically um I'm",
    "start": "1316600",
    "end": "1323799"
  },
  {
    "text": "saying any calls coming from that particular through that particular vpca on",
    "start": "1323799",
    "end": "1330080"
  },
  {
    "text": "points uh you're only allowed get object and put object to my secure bucket and",
    "start": "1330080",
    "end": "1336840"
  },
  {
    "text": "the objects in that bucket okay and here's a sample bucket policy",
    "start": "1336840",
    "end": "1344840"
  },
  {
    "text": "it says deny access to this bucket to any API calls except those coming from a",
    "start": "1344840",
    "end": "1352679"
  },
  {
    "text": "particular VPC and there's a VPC uh VPC endpoint and there's a VPC",
    "start": "1352679",
    "end": "1359559"
  },
  {
    "text": "endpoint and here's the bucket policy that restricts it uh by VPC ID so you can do VPC ID on",
    "start": "1361000",
    "end": "1369400"
  },
  {
    "text": "the with the S3 bucket you can do VPC endpoint one or more or the combination",
    "start": "1369400",
    "end": "1375120"
  },
  {
    "text": "of the two okay and if you have any questions I'm I'm",
    "start": "1375120",
    "end": "1382279"
  },
  {
    "text": "going to be staying afterwards to be make sure I uh take any questions that you might",
    "start": "1382279",
    "end": "1389360"
  },
  {
    "text": "have okay live demo time let me set the",
    "start": "1390600",
    "end": "1397200"
  },
  {
    "text": "stage uh what I've done is I created a VPC and I",
    "start": "1397200",
    "end": "1403400"
  },
  {
    "text": "one uh and I set up one public subnet which means means traffic from",
    "start": "1403400",
    "end": "1409840"
  },
  {
    "text": "that ec2 instances and that subnet 2 S3 will flow through the",
    "start": "1409840",
    "end": "1415240"
  },
  {
    "text": "igw I set up a private subnet and put a route table entry it says any traffic to",
    "start": "1415240",
    "end": "1423200"
  },
  {
    "text": "the out to the internet to go through that net instance and then I set up a",
    "start": "1423200",
    "end": "1428440"
  },
  {
    "text": "third subnet with a VPC endpoint any traffic to S3 will flow through that VPC",
    "start": "1428440",
    "end": "1435480"
  },
  {
    "text": "endpoint all the instances that I'm using are c38 8X large which means they have",
    "start": "1435480",
    "end": "1443720"
  },
  {
    "text": "10 gig interfaces and enhanced networking and I'm using it across the",
    "start": "1443720",
    "end": "1448919"
  },
  {
    "text": "board within that instance as well is a C3 8X large with a 10 gig um interface",
    "start": "1448919",
    "end": "1456240"
  },
  {
    "text": "and and the enhanced networking um I wrote a uh using node.js a very",
    "start": "1456240",
    "end": "1465240"
  },
  {
    "text": "basic API and I put them on those uh instances so that I can trigger",
    "start": "1465240",
    "end": "1471679"
  },
  {
    "text": "uploads and downloads from S3 by just making an API call and you'll you'll see me make those API calls and I also",
    "start": "1471679",
    "end": "1479760"
  },
  {
    "text": "installed collect D agent on these instances to collect the statistics of",
    "start": "1479760",
    "end": "1486600"
  },
  {
    "text": "the interface send them to a uh a central uh rrd database and just use a",
    "start": "1486600",
    "end": "1494399"
  },
  {
    "text": "open- source rrd graphing tool to display the performance with these three",
    "start": "1494399",
    "end": "1501320"
  },
  {
    "text": "uh uh uh subnets so I do have backup slides so bear with",
    "start": "1501320",
    "end": "1510320"
  },
  {
    "text": "me could possibly goong oh no nothing will go",
    "start": "1510320",
    "end": "1516600"
  },
  {
    "text": "wrong now part of this test particularly when I'm sending large",
    "start": "1517000",
    "end": "1522640"
  },
  {
    "text": "amounts of data will take about 15 or 20 minutes we're not going to sit here waiting twiddling our thumbs for 15 or",
    "start": "1522640",
    "end": "1527960"
  },
  {
    "text": "20 minutes minutes I'm going to skip ahead and show you the results so it's going to be a combination of live and",
    "start": "1527960",
    "end": "1534159"
  },
  {
    "text": "and and recorded demo all",
    "start": "1534159",
    "end": "1542320"
  },
  {
    "text": "right first I'll show you where the uh objects are going to be placed",
    "start": "1542720",
    "end": "1549799"
  },
  {
    "text": "they're going to be put in a bucket and I have three separate quote unquote directories for igw not and VPC endpoint",
    "start": "1549799",
    "end": "1559480"
  },
  {
    "text": "and I have uh a clust three clusters of c3x large",
    "start": "1559480",
    "end": "1568080"
  },
  {
    "text": "instances waiting for me to trigger uploads and",
    "start": "1568080",
    "end": "1573120"
  },
  {
    "text": "downloads and what I'm going to do",
    "start": "1576320",
    "end": "1581120"
  },
  {
    "text": "and then with this test I have a cluster size in each of these subnets of",
    "start": "1600039",
    "end": "1606000"
  },
  {
    "text": "one and I'm doing so so that I can establish a Baseline and that and that one node in",
    "start": "1606000",
    "end": "1612720"
  },
  {
    "text": "the cluster is going to do a upload to S3 of a 10 GB file and and a download",
    "start": "1612720",
    "end": "1618880"
  },
  {
    "text": "from S3 or a 10 GB file simultaneously so it'll be both uploads and downloads",
    "start": "1618880",
    "end": "1624559"
  },
  {
    "text": "I'll be leveraging the AWS CLI which means I'll be doing multi-art uploads in",
    "start": "1624559",
    "end": "1630480"
  },
  {
    "text": "range gets to take advantage of multiple threads and parallelism and get better",
    "start": "1630480",
    "end": "1638120"
  },
  {
    "text": "performance um and here it goes I'll just sent three",
    "start": "1638120",
    "end": "1644200"
  },
  {
    "text": "API calls to the uh three endpoints to the three clusters and that initiated",
    "start": "1644200",
    "end": "1651679"
  },
  {
    "text": "the upload and download of uh the traffic while this is",
    "start": "1651679",
    "end": "1658399"
  },
  {
    "text": "running I can show you it's going to be collected using a tool called facet and",
    "start": "1658399",
    "end": "1663799"
  },
  {
    "text": "it's going to show me the uh the graphs uh as the data is collected and and sent",
    "start": "1663799",
    "end": "1669720"
  },
  {
    "text": "to the database but for the sake of",
    "start": "1669720",
    "end": "1676840"
  },
  {
    "text": "time this was my backup slide with the command that I just",
    "start": "1676840",
    "end": "1681960"
  },
  {
    "text": "ran and these are the results the top graph is for in I the",
    "start": "1681960",
    "end": "1689679"
  },
  {
    "text": "igw scenario using public IP addresses and uh the black graph is for",
    "start": "1689679",
    "end": "1696080"
  },
  {
    "text": "transmit the blue is for receive and you'll see it took about a minute or so",
    "start": "1696080",
    "end": "1703120"
  },
  {
    "text": "to upload and download that 10 gig 10 gig file or object it's a separate",
    "start": "1703120",
    "end": "1708480"
  },
  {
    "text": "object basically is simultaneously you'll see a similar performance",
    "start": "1708480",
    "end": "1713880"
  },
  {
    "text": "characteristic with a VPC endpoint uh as you notice I put a",
    "start": "1713880",
    "end": "1719000"
  },
  {
    "text": "highlight on this scale for uh to differentiate that for the test using",
    "start": "1719000",
    "end": "1727159"
  },
  {
    "text": "the net cluster uh is a different scale to make it easier to",
    "start": "1727159",
    "end": "1733559"
  },
  {
    "text": "see I overlap the download Lo for the VPC",
    "start": "1733559",
    "end": "1739880"
  },
  {
    "text": "endpoint with one node and the NAT with one node and then you'll see the difference between the two easier to to",
    "start": "1739880",
    "end": "1746159"
  },
  {
    "text": "look at now you might question with one instance shouldn't I get the similar",
    "start": "1746159",
    "end": "1753600"
  },
  {
    "text": "performance regardless whether I'm using VPC end points or not because the not",
    "start": "1753600",
    "end": "1758720"
  },
  {
    "text": "instance is a C3 8X large as well well if you look at if you think about the",
    "start": "1758720",
    "end": "1764360"
  },
  {
    "text": "traffic flow going through the KN because I'm doing simultaneous uploads and downloads for the uploads it goes",
    "start": "1764360",
    "end": "1771440"
  },
  {
    "text": "from the ec2 instance into the not instance out of the not instance to S3",
    "start": "1771440",
    "end": "1778519"
  },
  {
    "text": "for the downloads it goes from S3 into the not instance and back out to",
    "start": "1778519",
    "end": "1783919"
  },
  {
    "text": "the E2 instance so in effect you have double the amount of bandwith and that's why you'll see a difference in",
    "start": "1783919",
    "end": "1790240"
  },
  {
    "text": "performance going through the VPC endpoint service and one single node for",
    "start": "1790240",
    "end": "1796640"
  },
  {
    "text": "using that all right so let's kick this up a notch I'm",
    "start": "1796640",
    "end": "1804279"
  },
  {
    "text": "going to increase the cluster size to 10 instances in each subnet effectively",
    "start": "1804279",
    "end": "1811720"
  },
  {
    "text": "what that means I'm going to be doing 10 10 gig file uploads and 10 10 gig file",
    "start": "1811720",
    "end": "1818320"
  },
  {
    "text": "downloads simultaneously from each cluster all right and this will give us",
    "start": "1818320",
    "end": "1824399"
  },
  {
    "text": "a better perspective of this scale scalability of both igw and a VPC endpoint now you'll",
    "start": "1824399",
    "end": "1833159"
  },
  {
    "text": "see that first bump on the left hand side which is the test we previously did with one node I left it on there",
    "start": "1833159",
    "end": "1840399"
  },
  {
    "text": "primarily I did it the test you know right after the one after",
    "start": "1840399",
    "end": "1845840"
  },
  {
    "text": "the other so I can compare the two as well you'll see with both igw and VPC e",
    "start": "1845840",
    "end": "1854399"
  },
  {
    "text": "it took about a minute regardless whether it's one 10 gig file or 10 10 gig files",
    "start": "1854399",
    "end": "1862120"
  },
  {
    "text": "so all we've done is we didn't have any performance we didn't suffer any performance penalty we just scaled",
    "start": "1862120",
    "end": "1869559"
  },
  {
    "text": "out well you'll see with the NAT instance we effectively hit our ceiling",
    "start": "1869559",
    "end": "1876279"
  },
  {
    "text": "from a bandwidth and it's in this case the downloads and uploads are not done",
    "start": "1876279",
    "end": "1883278"
  },
  {
    "text": "yet okay this is just the same snapshot but only look looking at two uh graphs",
    "start": "1883440",
    "end": "1890639"
  },
  {
    "text": "primarily the VPC download and the N instance download again you'll see the",
    "start": "1890639",
    "end": "1896200"
  },
  {
    "text": "one Noe clusters versus the 10 node clusters the uh with the VPC we're",
    "start": "1896200",
    "end": "1903240"
  },
  {
    "text": "already done all the up the downloads are all done while Nat is still ongoing",
    "start": "1903240",
    "end": "1908840"
  },
  {
    "text": "all right let's time pass and finally the KN cluster is done",
    "start": "1908840",
    "end": "1916000"
  },
  {
    "text": "what is that about 20 minutes or so later um and taking again putting them on the",
    "start": "1916000",
    "end": "1923799"
  },
  {
    "text": "same scale gives you a better idea of and a",
    "start": "1923799",
    "end": "1930399"
  },
  {
    "text": "better comparison between the two now if you're a math geek like I am the area under the VPC in Black will be equal to",
    "start": "1930399",
    "end": "1937240"
  },
  {
    "text": "the area under the blue line and that's exactly what uh this shows",
    "start": "1937240",
    "end": "1943120"
  },
  {
    "text": "so the point I'm trying to uh bring across is with VPC endpoints similar to",
    "start": "1943120",
    "end": "1951360"
  },
  {
    "text": "the igw you don't need to worry about uh this scalability of the service",
    "start": "1951360",
    "end": "1957600"
  },
  {
    "text": "it will automatically scale and support virtually any amount of traffic",
    "start": "1957600",
    "end": "1964760"
  },
  {
    "text": "you you can push through it you don't need to think about it twice if you do it with the other two approaches you",
    "start": "1964760",
    "end": "1971440"
  },
  {
    "text": "have a lot of administrative and configuration overhead and you won't even reach the same performance or",
    "start": "1971440",
    "end": "1978080"
  },
  {
    "text": "availability points okay well let's see if I my live demo if",
    "start": "1978080",
    "end": "1986200"
  },
  {
    "text": "I have any here we",
    "start": "1986200",
    "end": "1992480"
  },
  {
    "text": "go and this is only with the one node",
    "start": "1992480",
    "end": "1997880"
  },
  {
    "text": "that's the only thing that I ran on here I'm just going to focus it more this is",
    "start": "1997880",
    "end": "2003200"
  },
  {
    "text": "similar graph that you saw in my uh SN in my screen capture that I showed you",
    "start": "2003200",
    "end": "2008639"
  },
  {
    "text": "earlier but basically uh I just recreated the",
    "start": "2008639",
    "end": "2014159"
  },
  {
    "text": "experiment with the cluster of one okay",
    "start": "2014159",
    "end": "2021200"
  },
  {
    "text": "great time check we're good all right uh VPC flow logs is the next topic",
    "start": "2022000",
    "end": "2031320"
  },
  {
    "text": "uh we're going to cover uh for the I don't know how many years",
    "start": "2031320",
    "end": "2039000"
  },
  {
    "text": "I've been with Amazon for four years I don't think a week passed by where I wasn't asked how can we get more",
    "start": "2039000",
    "end": "2046279"
  },
  {
    "text": "visibility into the traffic in a VPC now if you think about it the",
    "start": "2046279",
    "end": "2052520"
  },
  {
    "text": "interesting traffic is the rejects and denies that you set up if you set up rules on your security groups or",
    "start": "2052520",
    "end": "2060079"
  },
  {
    "text": "knackles uh to deny traffic that traffic will never reach your ac2 instance so",
    "start": "2060079",
    "end": "2065599"
  },
  {
    "text": "you'll never know that that traffic traffic even was attempted to reach your",
    "start": "2065599",
    "end": "2071158"
  },
  {
    "text": "instances the accepts will make it to your E2 instance",
    "start": "2071159",
    "end": "2076280"
  },
  {
    "text": "so if you really put your mind to it and you really wanted to do it you you could have collected all that data analyzed it",
    "start": "2076280",
    "end": "2084040"
  },
  {
    "text": "and gotten the exposure or the the views into that traffic so when I say the",
    "start": "2084040",
    "end": "2089760"
  },
  {
    "text": "reject traffic is the interesting part that we've uncovered because it was not visible to you before with VPC flow logs",
    "start": "2089760",
    "end": "2097800"
  },
  {
    "text": "both accepts and rejects you on your security groups and uh knackles are uh",
    "start": "2097800",
    "end": "2105320"
  },
  {
    "text": "made available to you to analyze okay",
    "start": "2105320",
    "end": "2111200"
  },
  {
    "text": "so you get that extra visibility from a security perspective so you can uh try",
    "start": "2111200",
    "end": "2117599"
  },
  {
    "text": "to understand what's being blocked what's being attempted against your application stack but also there uh",
    "start": "2117599",
    "end": "2124760"
  },
  {
    "text": "there is a strong benefit for your network uh and system administrators to",
    "start": "2124760",
    "end": "2130599"
  },
  {
    "text": "be able to troubleshoot any potential connectivity problems and also to do any analysis on",
    "start": "2130599",
    "end": "2137839"
  },
  {
    "text": "any interesting patterns that you might see as far as like behaviors that your applications are driving or are are you",
    "start": "2137839",
    "end": "2145400"
  },
  {
    "text": "seeing what you expected to see from your from your application so all that data now is available for you to be able",
    "start": "2145400",
    "end": "2151520"
  },
  {
    "text": "to analyze so",
    "start": "2151520",
    "end": "2156640"
  },
  {
    "text": "uh a little bit more detail about the service you can enable VPC flow logs at",
    "start": "2156640",
    "end": "2163520"
  },
  {
    "text": "the eni level which is elastic network interface at the subnet level or at the",
    "start": "2163520",
    "end": "2170520"
  },
  {
    "text": "uh VPC level now if you enable it at the VPC level all Enis in that VPC will have",
    "start": "2170520",
    "end": "2179599"
  },
  {
    "text": "flow logging turned on for so they will inherit that from the parent VPC",
    "start": "2179599",
    "end": "2185560"
  },
  {
    "text": "similarly with the subnet if you turn on VPC flow logs at a on at a subnet level",
    "start": "2185560",
    "end": "2193480"
  },
  {
    "text": "all the Enis within that subnet will have a stream for each uh in uh uh in",
    "start": "2193480",
    "end": "2201560"
  },
  {
    "text": "Cloud watch logs I can show you that because when",
    "start": "2201560",
    "end": "2207480"
  },
  {
    "text": "I was doing the S3 testing I turned on VPC flow logging I wanted to see if",
    "start": "2207480",
    "end": "2214319"
  },
  {
    "text": "during that time I can capture any interesting traffic so if you if I go to my",
    "start": "2214319",
    "end": "2221318"
  },
  {
    "text": "VPC and go to the flow lock tag you'll see where I have it turned",
    "start": "2224079",
    "end": "2230319"
  },
  {
    "text": "on okay but if I go to my subnets in.",
    "start": "2230319",
    "end": "2236280"
  },
  {
    "text": "VPC and look at the flow log entry you'll see that is inherited from the",
    "start": "2236280",
    "end": "2241680"
  },
  {
    "text": "VPC entry similarly for uh",
    "start": "2241680",
    "end": "2248640"
  },
  {
    "text": "and I can't see it over here for the Enis it'll be inherited from the VPC",
    "start": "2248640",
    "end": "2255040"
  },
  {
    "text": "itself okay now as I just mentioned all that",
    "start": "2255040",
    "end": "2262640"
  },
  {
    "text": "traffic that is collected is exposed through cloudwatch logs regular",
    "start": "2262640",
    "end": "2268319"
  },
  {
    "text": "cloudwatch log groups and streams uh what that means is any uh",
    "start": "2268319",
    "end": "2276280"
  },
  {
    "text": "capabilities that come with cloudwatch logs you could uh leverage for example",
    "start": "2276280",
    "end": "2282760"
  },
  {
    "text": "the integration with Lambda and the integration with uh Kinesis stream or",
    "start": "2282760",
    "end": "2288560"
  },
  {
    "text": "the ability to do you know to filter uh on those entries uh and set up alarms",
    "start": "2288560",
    "end": "2294720"
  },
  {
    "text": "and I'm going to show you how uh how easily it is to do create your custom metric based on filters that you define",
    "start": "2294720",
    "end": "2302960"
  },
  {
    "text": "and create alarms uh and actions based on patterns that are interesting to you",
    "start": "2302960",
    "end": "2310680"
  },
  {
    "text": "uh now the the data is collected at the elastic network interface in about 10",
    "start": "2310680",
    "end": "2317920"
  },
  {
    "text": "minutes or so intervals and aggregated and an entry uh and added to the",
    "start": "2317920",
    "end": "2323079"
  },
  {
    "text": "cloudwatch log stream all right",
    "start": "2323079",
    "end": "2328119"
  },
  {
    "text": "so uh a little bit more detail I'm not",
    "start": "2328119",
    "end": "2333599"
  },
  {
    "text": "going to go through all this but these are all the fields that are available in in a uh uh flow log record you'll see a",
    "start": "2333599",
    "end": "2342319"
  },
  {
    "text": "a just a version ID and that the account ID uh as well as the interface ID now",
    "start": "2342319",
    "end": "2349200"
  },
  {
    "text": "the data is aggregated on a five tuplet level where you have to have them be",
    "start": "2349200",
    "end": "2354720"
  },
  {
    "text": "unique and that's the source and destination uh IP addresses source and destination port and",
    "start": "2354720",
    "end": "2361560"
  },
  {
    "text": "protocol those five uh if they're unique the data is aggregated over that period",
    "start": "2361560",
    "end": "2366920"
  },
  {
    "text": "against the that five tuplet if not a new entry is recorded okay and you also",
    "start": "2366920",
    "end": "2374200"
  },
  {
    "text": "have the number of packets and bytes in that interval that are added uh together",
    "start": "2374200",
    "end": "2380280"
  },
  {
    "text": "as well as a start and end time uh for that interval itself so you",
    "start": "2380280",
    "end": "2386880"
  },
  {
    "text": "can uh whether using your own code or third party tools drill down by uh uh",
    "start": "2386880",
    "end": "2394440"
  },
  {
    "text": "using the time Dimension to look for inter traffic now as far as the actions you",
    "start": "2394440",
    "end": "2400599"
  },
  {
    "text": "have the option when you set up a VPC endpoint to capture all accepts to",
    "start": "2400599",
    "end": "2407240"
  },
  {
    "text": "capture all rejects or both okay and then you'll have a log",
    "start": "2407240",
    "end": "2414920"
  },
  {
    "text": "status to give you an indication if something is not working correctly and or whether the uh uh the status of flow",
    "start": "2414920",
    "end": "2423240"
  },
  {
    "text": "logging uh is okay here is a an example a",
    "start": "2423240",
    "end": "2430800"
  },
  {
    "text": "record uh for an inbound SSH traffic that was",
    "start": "2430800",
    "end": "2436760"
  },
  {
    "text": "allowed now to be more accurate I should have also highlighted the protocol",
    "start": "2436760",
    "end": "2442599"
  },
  {
    "text": "number because to ensure that it is SSH the protocol number is six in this case",
    "start": "2442599",
    "end": "2447800"
  },
  {
    "text": "which is TCP so uh to for to guarant well to tell me that this",
    "start": "2447800",
    "end": "2455079"
  },
  {
    "text": "is ass traffic the uh I need to check the protocol number as well",
    "start": "2455079",
    "end": "2462359"
  },
  {
    "text": "okay here's a example uh record where uh",
    "start": "2462599",
    "end": "2469720"
  },
  {
    "text": "an attempt to connect uh via RDP which is TCP Port 3389 was uh",
    "start": "2469720",
    "end": "2478799"
  },
  {
    "text": "rejected okay so let me just show",
    "start": "2479480",
    "end": "2486240"
  },
  {
    "text": "you instead of doing the screens how the records would look like uh in the",
    "start": "2486240",
    "end": "2493160"
  },
  {
    "text": "console now these like I said they're accessible via cloudwatch logs so you can look at them in the console you can",
    "start": "2493160",
    "end": "2500200"
  },
  {
    "text": "retrieve them using uh the AWS CLI or an SDK or uh you could uh leverage",
    "start": "2500200",
    "end": "2508680"
  },
  {
    "text": "third-party tools to extract and analyze that data and I'm going to show you an",
    "start": "2508680",
    "end": "2514119"
  },
  {
    "text": "example one of one of the tools about how you could manipulate some of the",
    "start": "2514119",
    "end": "2519800"
  },
  {
    "text": "data and analyze it uh there are currently several vendors that provide",
    "start": "2519800",
    "end": "2525480"
  },
  {
    "text": "integration with Cloud uh uh watch log with",
    "start": "2525480",
    "end": "2530680"
  },
  {
    "text": "um VPC flow logs there's a observable Network I no hasm Dome 9 uh Splunk and",
    "start": "2530680",
    "end": "2539440"
  },
  {
    "text": "there are more out there that I'm sure either already released it or are planning to release them very very soon",
    "start": "2539440",
    "end": "2546480"
  },
  {
    "text": "the support for flow logs uh so let's take a quick look I'm going to go to the",
    "start": "2546480",
    "end": "2552839"
  },
  {
    "text": "regular Cloud watch um console",
    "start": "2552839",
    "end": "2558440"
  },
  {
    "text": "View and I'm going to look at my logs here's my Flor log group and you'll see",
    "start": "2558440",
    "end": "2565800"
  },
  {
    "text": "all the Enis that I set up in my test VPC that I",
    "start": "2565800",
    "end": "2571359"
  },
  {
    "text": "used for S3 and VPC endpoint testing these are the Anis that uh uh was",
    "start": "2571359",
    "end": "2578160"
  },
  {
    "text": "enabled now and here are all the records that",
    "start": "2578160",
    "end": "2585160"
  },
  {
    "text": "have been recently collected now there's a lot of information here but you have the",
    "start": "2585160",
    "end": "2591000"
  },
  {
    "text": "ability to look for more interesting traffic let's see what was",
    "start": "2591000",
    "end": "2597960"
  },
  {
    "text": "rejected and there's a lot of stuff that was rejected uh if I look at some of the",
    "start": "2597960",
    "end": "2603520"
  },
  {
    "text": "ports to see if there's anything interesting in here um I know the last",
    "start": "2603520",
    "end": "2609440"
  },
  {
    "text": "time I looked at this and here are some here's Port 22 actually that's not the port never mind uh it is that's Port 22",
    "start": "2609440",
    "end": "2616720"
  },
  {
    "text": "so somebody's the time I launched all those instances maybe 10 minutes before",
    "start": "2616720",
    "end": "2621880"
  },
  {
    "text": "this demo started and I've already had attempts on Port on Port 22 for SSH into",
    "start": "2621880",
    "end": "2629040"
  },
  {
    "text": "the instances that have a public have public IP addresses so don't leave your",
    "start": "2629040",
    "end": "2637200"
  },
  {
    "text": "SSH open to the world this is actually not and that's why the rejects out there",
    "start": "2637200",
    "end": "2643280"
  },
  {
    "text": "because people out there have automated",
    "start": "2643280",
    "end": "2648559"
  },
  {
    "text": "processes going out there and just looking for vulnerabilities okay this will help you",
    "start": "2648559",
    "end": "2655040"
  },
  {
    "text": "close down those potential vulnerabilities and uh the uh and I'll show you a little bit more by setting up",
    "start": "2655040",
    "end": "2661599"
  },
  {
    "text": "alarms and just keeping track of what all the activity out there that might be happening against your",
    "start": "2661599",
    "end": "2668160"
  },
  {
    "text": "resources okay now this is great but so much",
    "start": "2668160",
    "end": "2674200"
  },
  {
    "text": "information if you want to be able to for example set up a custom metric that",
    "start": "2674200",
    "end": "2679280"
  },
  {
    "text": "measures the N attempts on SSH that were rejected in a 5 minute interval for",
    "start": "2679280",
    "end": "2685880"
  },
  {
    "text": "example uh you can set up custom metrics I'm going to show you I've already have",
    "start": "2685880",
    "end": "2690920"
  },
  {
    "text": "one set up but I'll show you quickly how what I did for this particular",
    "start": "2690920",
    "end": "2697960"
  },
  {
    "text": "uh uh a custom metric which is just a count of rejected SSH uh attempts so if I go to",
    "start": "2697960",
    "end": "2708359"
  },
  {
    "text": "Matrix actually logs create metric filter and then I",
    "start": "2710000",
    "end": "2716839"
  },
  {
    "text": "need to put a filter pattern uh that I want to uh to use to uh reduce the uh",
    "start": "2716839",
    "end": "2725960"
  },
  {
    "text": "interesting uh records that I want to start counting",
    "start": "2725960",
    "end": "2731400"
  },
  {
    "text": "against and here's the filter I'm going to",
    "start": "2733520",
    "end": "2738359"
  },
  {
    "text": "use and basically if I go through it I'm not going to pay attention to uh any",
    "start": "2739680",
    "end": "2748040"
  },
  {
    "text": "specific uh interfaces source and destination uh Source ports but the",
    "start": "2748040",
    "end": "2753160"
  },
  {
    "text": "destination Port I wanted to be 22 Pro call I want it to be six for",
    "start": "2753160",
    "end": "2761280"
  },
  {
    "text": "TCP I want the action to be reject and the status to be okay",
    "start": "2761280",
    "end": "2767839"
  },
  {
    "text": "so uh by doing so let me see if there's any interesting",
    "start": "2767839",
    "end": "2773839"
  },
  {
    "text": "traffic uh what it does is for to be able to test your filter patterns it it",
    "start": "2773960",
    "end": "2780520"
  },
  {
    "text": "has a small subset of the traffic available for you that you can test against in this case there weren't any",
    "start": "2780520",
    "end": "2787319"
  },
  {
    "text": "rejects but it's okay I know this pattern Works uh because that's what I set up in my",
    "start": "2787319",
    "end": "2794040"
  },
  {
    "text": "um in this particular metric right here that I've saved and once you have a",
    "start": "2794040",
    "end": "2800920"
  },
  {
    "text": "metric set up you can then create alarms against that",
    "start": "2800920",
    "end": "2809680"
  },
  {
    "text": "metric okay rejected count",
    "start": "2814040",
    "end": "2818839"
  },
  {
    "text": "okay I can't see here's the create alarm sorry I couldn't see the button and you'll be able to specify the threshold",
    "start": "2823000",
    "end": "2830599"
  },
  {
    "text": "that uh you want to set on the count of SSH Rejects and the action that you want",
    "start": "2830599",
    "end": "2835800"
  },
  {
    "text": "to take if that threshold is breached okay now I do have an alarm set up that",
    "start": "2835800",
    "end": "2844240"
  },
  {
    "text": "does that uh will the threshold is set up to 20 with a 5 minute interval in",
    "start": "2844240",
    "end": "2850920"
  },
  {
    "text": "this case it has not been breached yet and here so uh but let's see I've",
    "start": "2850920",
    "end": "2858280"
  },
  {
    "text": "already had attempts and I've had seven attempts already since we started this",
    "start": "2858280",
    "end": "2864839"
  },
  {
    "text": "demo okay if and I'll show you if that threshold was breached I have it set up",
    "start": "2864839",
    "end": "2872599"
  },
  {
    "text": "to send me an email automatically you know I'll show you an example email that I received but you can also have it take",
    "start": "2872599",
    "end": "2878880"
  },
  {
    "text": "automatic action you can set up a Lambda function to do whatever procedure you want to take or action you want to take",
    "start": "2878880",
    "end": "2885760"
  },
  {
    "text": "if a particular alarm is triggered so it gives you a lot of flexibility a lot of",
    "start": "2885760",
    "end": "2891760"
  },
  {
    "text": "power to detect potential security issues and get your security team",
    "start": "2891760",
    "end": "2898760"
  },
  {
    "text": "engaged um and here's what the email will look like",
    "start": "2898760",
    "end": "2905319"
  },
  {
    "text": "this is ex again these are my backup slides in case I couldn't do a live demo so you'll see",
    "start": "2905319",
    "end": "2911880"
  },
  {
    "text": "them and in this particular case when I ran my uh test before the threshold of",
    "start": "2913319",
    "end": "2921359"
  },
  {
    "text": "20 was breached twice and this is the sample email that",
    "start": "2921359",
    "end": "2927559"
  },
  {
    "text": "was sent to me because that threshold was breached and again an email is one",
    "start": "2927559",
    "end": "2933400"
  },
  {
    "text": "way uh from a notification perspective but if if you want to take action you",
    "start": "2933400",
    "end": "2938799"
  },
  {
    "text": "can take action whatever you want to do uh uh you can have that SNS topic uh",
    "start": "2938799",
    "end": "2946000"
  },
  {
    "text": "have a subscription to it and take whatever action that you",
    "start": "2946000",
    "end": "2951480"
  },
  {
    "text": "wish okay uh as I mentioned there's a lot of",
    "start": "2951480",
    "end": "2957160"
  },
  {
    "text": "information and a lot of hidden information in that data you could",
    "start": "2957160",
    "end": "2962319"
  },
  {
    "text": "leverage visualization tool available through third parties in this case I'm just",
    "start": "2962319",
    "end": "2967960"
  },
  {
    "text": "showcasing the uh user interface from observable networks there are others of",
    "start": "2967960",
    "end": "2973319"
  },
  {
    "text": "your preference that you could choose and you can dissect the data through different views you could look at the",
    "start": "2973319",
    "end": "2979920"
  },
  {
    "text": "top uh active devices in this case uh this is going to show a lot of traffic",
    "start": "2979920",
    "end": "2985880"
  },
  {
    "text": "to and from S3 because I did it uh uh in conjunction with a test I ran earlier",
    "start": "2985880",
    "end": "2992520"
  },
  {
    "text": "you could drill down on each instance for example and look at the interesting",
    "start": "2992520",
    "end": "2998480"
  },
  {
    "text": "flows from that one particular instance as you'll notice on the screen there was",
    "start": "2998480",
    "end": "3004359"
  },
  {
    "text": "traffic coming from a foreign country that could be interesting in this case if you look at the port",
    "start": "3004359",
    "end": "3010960"
  },
  {
    "text": "numbers HTTP 80 well you might want to open up a ticket or might not now you",
    "start": "3010960",
    "end": "3017839"
  },
  {
    "text": "don't you're not going to go through this visually and looking for potential",
    "start": "3017839",
    "end": "3023079"
  },
  {
    "text": "uh um activities you can set up ru tools again through these third party tools to",
    "start": "3023079",
    "end": "3030400"
  },
  {
    "text": "either notify you or do whatever action that you want uh you want to depending on the capabilities of the tool so there",
    "start": "3030400",
    "end": "3038640"
  },
  {
    "text": "are you can take different views this is a connectivity View and also with",
    "start": "3038640",
    "end": "3043960"
  },
  {
    "text": "combined with a bubble uh so the bigger the bubble the more traffic and I",
    "start": "3043960",
    "end": "3049119"
  },
  {
    "text": "highlighted one of them and they that's the one of the S3 endpoints but there's also if you notice",
    "start": "3049119",
    "end": "3055520"
  },
  {
    "text": "there's an alert next to this particular instance ID so if I drill down into it I set up an",
    "start": "3055520",
    "end": "3063000"
  },
  {
    "text": "alert to say if you know there's SSH attempts from addresses are foreign sources go ahead",
    "start": "3063000",
    "end": "3071799"
  },
  {
    "text": "and trigger a an alert it gives me the ability to drill down further it gives",
    "start": "3071799",
    "end": "3078440"
  },
  {
    "text": "me a hint of the source country as well",
    "start": "3078440",
    "end": "3083599"
  },
  {
    "text": "as the IP address so that your security team can take appropriate action if if",
    "start": "3083599",
    "end": "3091160"
  },
  {
    "text": "it falls within your security protocols uh so when I said the rejects are the",
    "start": "3091160",
    "end": "3097680"
  },
  {
    "text": "interesting is the interesting traffic it really is it's it's what security Engineers want to know what's going on",
    "start": "3097680",
    "end": "3103440"
  },
  {
    "text": "out there and whether you use custom metrics and",
    "start": "3103440",
    "end": "3109000"
  },
  {
    "text": "alarms third party tools or the combination of the two it gives you a",
    "start": "3109000",
    "end": "3114559"
  },
  {
    "text": "lot of control uh to and opportunity to improve",
    "start": "3114559",
    "end": "3120839"
  },
  {
    "text": "your security stance okay so that's the end of my talk keep",
    "start": "3120839",
    "end": "3129640"
  },
  {
    "text": "uh VPC networking is very integral part of any security conversation and we'll",
    "start": "3129640",
    "end": "3137480"
  },
  {
    "text": "be continuously releasing more features that are security Centric to give you",
    "start": "3137480",
    "end": "3142760"
  },
  {
    "text": "more control and more visibility uh into what's going on in your",
    "start": "3142760",
    "end": "3149680"
  },
  {
    "text": "environment and remember to please fill out your evaluations and make sure you go to",
    "start": "3149680",
    "end": "3156799"
  },
  {
    "text": "replay tonight thank you",
    "start": "3156799",
    "end": "3161880"
  }
]