[
  {
    "text": "- [Santhosh] Hello, my\nname is Santhosh Arunuri",
    "start": "2070",
    "end": "4649"
  },
  {
    "text": "and I'm a Storage Specialist",
    "start": "4650",
    "end": "5820"
  },
  {
    "text": "Solutions Architect here at AWS.",
    "start": "5820",
    "end": "7563"
  },
  {
    "text": "In this video, I'll be talking\nabout AWS storage gateway,",
    "start": "8922",
    "end": "11895"
  },
  {
    "text": "specifically about\nright-sizing the cache disk",
    "start": "11895",
    "end": "14610"
  },
  {
    "text": "in Amazon S3 File Gateway.",
    "start": "14610",
    "end": "16413"
  },
  {
    "text": "AWS Storage Gateway is a\nhybrid cloud storage service",
    "start": "19500",
    "end": "22200"
  },
  {
    "text": "that gives you on-premises access",
    "start": "22200",
    "end": "24065"
  },
  {
    "text": "to virtually unlimited cloud storage.",
    "start": "24065",
    "end": "27120"
  },
  {
    "text": "Storage gateway service",
    "start": "27120",
    "end": "28140"
  },
  {
    "text": "provides different types of gateways,",
    "start": "28140",
    "end": "30000"
  },
  {
    "text": "and today, we are going to\nfocus on the S3 File Gateway.",
    "start": "30000",
    "end": "33603"
  },
  {
    "text": "Amazon S3 File Gateway\npresents a file interface",
    "start": "35040",
    "end": "37830"
  },
  {
    "text": "that enables users to store\nfiles as objects in Amazon S3",
    "start": "37830",
    "end": "42000"
  },
  {
    "text": "using the industry standard\nNFS and SMB file protocols.",
    "start": "42000",
    "end": "45603"
  },
  {
    "text": "It allows access to those files",
    "start": "46470",
    "end": "47940"
  },
  {
    "text": "by NFS and SMB from your data center",
    "start": "47940",
    "end": "50610"
  },
  {
    "text": "or from an Amazon EC2 instance.",
    "start": "50610",
    "end": "52593"
  },
  {
    "text": "It also allows you to access those files",
    "start": "53850",
    "end": "55710"
  },
  {
    "text": "as objects directly in\nAmazon S3 using S3 APIs.",
    "start": "55710",
    "end": "59642"
  },
  {
    "text": "Because on the backend,",
    "start": "60690",
    "end": "61770"
  },
  {
    "text": "your data is being stored in an S3 bucket",
    "start": "61770",
    "end": "63870"
  },
  {
    "text": "when using the S3 File\nGateway, you actually are able",
    "start": "63870",
    "end": "66960"
  },
  {
    "text": "to leverage some of\nthe native S3 features,",
    "start": "66960",
    "end": "68880"
  },
  {
    "text": "such as versioning, lifecycle policies,",
    "start": "68880",
    "end": "71230"
  },
  {
    "text": "cross region replication,",
    "start": "71231",
    "end": "72990"
  },
  {
    "text": "and even have access to some",
    "start": "72990",
    "end": "74490"
  },
  {
    "text": "of the different storage classes in S3",
    "start": "74490",
    "end": "76950"
  },
  {
    "text": "when using the S3 File Gateway.",
    "start": "76950",
    "end": "78692"
  },
  {
    "text": "There are three main recommended use cases",
    "start": "81390",
    "end": "83310"
  },
  {
    "text": "when considering using\nthe S3 File Gateway.",
    "start": "83310",
    "end": "85473"
  },
  {
    "text": "Firstly, S3 File Gateway\nallows you to upload data",
    "start": "86850",
    "end": "89610"
  },
  {
    "text": "that is generated on\npremises to Amazon S3,",
    "start": "89610",
    "end": "92850"
  },
  {
    "text": "enabling you to build data lakes",
    "start": "92850",
    "end": "94350"
  },
  {
    "text": "and event-driven data\nprocessing workflows.",
    "start": "94350",
    "end": "96723"
  },
  {
    "text": "With the one-to-one mapping\nfrom file to object,",
    "start": "97590",
    "end": "100500"
  },
  {
    "text": "you can leverage native AWS services",
    "start": "100500",
    "end": "102690"
  },
  {
    "text": "to run analytics and process the data.",
    "start": "102690",
    "end": "104973"
  },
  {
    "text": "The second use case is S3 File Gateway",
    "start": "106590",
    "end": "108509"
  },
  {
    "text": "enables cost-effective short\nand long-term retention",
    "start": "108510",
    "end": "111540"
  },
  {
    "text": "by storing database backups in Amazon S3",
    "start": "111540",
    "end": "114960"
  },
  {
    "text": "with the ability to lifecycle\nto lower cost storage tiers.",
    "start": "114960",
    "end": "118650"
  },
  {
    "text": "You can reduce the need for\nenterprise backup applications",
    "start": "118650",
    "end": "121830"
  },
  {
    "text": "and use built-in tools such as\nSQL Server Management Studio,",
    "start": "121830",
    "end": "125812"
  },
  {
    "text": "and Oracle RMAN to write\nyour database backups",
    "start": "125812",
    "end": "129660"
  },
  {
    "text": "to the S3 File Gateway file shares.",
    "start": "129660",
    "end": "131823"
  },
  {
    "text": "And lastly, S3 File Gateway can be used",
    "start": "133470",
    "end": "136170"
  },
  {
    "text": "as an archive repository for call data,",
    "start": "136170",
    "end": "138270"
  },
  {
    "text": "such as images and videos.",
    "start": "138270",
    "end": "140670"
  },
  {
    "text": "It allows you to store petabytes",
    "start": "140670",
    "end": "142260"
  },
  {
    "text": "of infrequently accessed\ndata durably long-term",
    "start": "142260",
    "end": "144793"
  },
  {
    "text": "and cost effectively in Amazon S3.",
    "start": "144793",
    "end": "148410"
  },
  {
    "text": "You can do all of this without needing",
    "start": "148410",
    "end": "150330"
  },
  {
    "text": "to change your existing\napplication workflows.",
    "start": "150330",
    "end": "152763"
  },
  {
    "text": "Now, a quick high level overview",
    "start": "155190",
    "end": "157290"
  },
  {
    "text": "on how S3 File Gateway actually works.",
    "start": "157290",
    "end": "160530"
  },
  {
    "text": "The first thing you are\ngoing to do as a user",
    "start": "160530",
    "end": "162840"
  },
  {
    "text": "is to download the VM\nimage for your gateway",
    "start": "162840",
    "end": "165330"
  },
  {
    "text": "and deploy it on premises as\na VM on a storage gateway,",
    "start": "165330",
    "end": "169080"
  },
  {
    "text": "hardware appliance, or\neven as an EC2 instance.",
    "start": "169080",
    "end": "172500"
  },
  {
    "text": "And next, you're going to\nassociate a cache disk to your VM.",
    "start": "172500",
    "end": "175983"
  },
  {
    "text": "Once you do that, from a\ncontrol plane perspective,",
    "start": "176820",
    "end": "179700"
  },
  {
    "text": "your Gateway VM is going to communicate",
    "start": "179700",
    "end": "182040"
  },
  {
    "text": "with the storage gateway\nservice over HTTPS.",
    "start": "182040",
    "end": "184833"
  },
  {
    "text": "From a data plan\nperspective, the gateway VM",
    "start": "186690",
    "end": "189060"
  },
  {
    "text": "is going to communicate directly\nwith S3 also over HTTPS.",
    "start": "189060",
    "end": "193203"
  },
  {
    "text": "Your application server\nis going to communicate",
    "start": "195030",
    "end": "197130"
  },
  {
    "text": "with the Gateway VM over\nNFS and SMB protocols.",
    "start": "197130",
    "end": "200853"
  },
  {
    "text": "Whenever reads and writes are going to",
    "start": "201780",
    "end": "203910"
  },
  {
    "text": "and from your storage gateway,",
    "start": "203910",
    "end": "205532"
  },
  {
    "text": "they're actually going\nfirst to your gateway VM.",
    "start": "205532",
    "end": "208653"
  },
  {
    "text": "The cache disk is important,",
    "start": "210060",
    "end": "211650"
  },
  {
    "text": "because it functions as a cache,",
    "start": "211650",
    "end": "213299"
  },
  {
    "text": "and this is for two reasons.",
    "start": "213300",
    "end": "215220"
  },
  {
    "text": "One is for low latency\nto recently access data,",
    "start": "215220",
    "end": "218580"
  },
  {
    "text": "especially when you're doing a lot",
    "start": "218580",
    "end": "220230"
  },
  {
    "text": "of reads in your workflow.",
    "start": "220230",
    "end": "222120"
  },
  {
    "text": "And then, the second use case",
    "start": "222120",
    "end": "223500"
  },
  {
    "text": "is to reduce data egress charges.",
    "start": "223500",
    "end": "225663"
  },
  {
    "text": "Instead of any reads",
    "start": "226920",
    "end": "228000"
  },
  {
    "text": "coming directly from the\nback industry bucket,",
    "start": "228000",
    "end": "230730"
  },
  {
    "text": "the data will be fetched\nfrom the local cache disk,",
    "start": "230730",
    "end": "233550"
  },
  {
    "text": "reducing your data egress charges.",
    "start": "233550",
    "end": "235803"
  },
  {
    "text": "When it comes to the data\ntransfer for S3 File Gateway,",
    "start": "237216",
    "end": "240574"
  },
  {
    "text": "they're actually optimized in a way,",
    "start": "240574",
    "end": "242700"
  },
  {
    "text": "so that any data transfer\nbetween the gateway",
    "start": "242700",
    "end": "245220"
  },
  {
    "text": "and AWS is going to use\nmulti-part parallel uploads",
    "start": "245220",
    "end": "248587"
  },
  {
    "text": "or byte-range downloads",
    "start": "248587",
    "end": "250378"
  },
  {
    "text": "to better use the available\nnetwork bandwidth.",
    "start": "250378",
    "end": "253143"
  },
  {
    "text": "There's a one-to-one\nmapping between the files",
    "start": "255090",
    "end": "257130"
  },
  {
    "text": "that you're writing to your gateway VM",
    "start": "257130",
    "end": "258930"
  },
  {
    "text": "and the objects that are\nassociated with your S3 bucket.",
    "start": "258930",
    "end": "261902"
  },
  {
    "text": "Now, let's talk about\ncache disk best practices.",
    "start": "264630",
    "end": "267873"
  },
  {
    "text": "Your gateway uses its cache storage",
    "start": "269100",
    "end": "271110"
  },
  {
    "text": "to provide low latency access\nto your recently access data.",
    "start": "271110",
    "end": "274653"
  },
  {
    "text": "And the cache disk acts as\nthe on-premises durable store",
    "start": "275700",
    "end": "279330"
  },
  {
    "text": "for data that's pending\nupload to Amazon S3.",
    "start": "279330",
    "end": "282063"
  },
  {
    "text": "For cache, at the minimum,",
    "start": "283710",
    "end": "285311"
  },
  {
    "text": "you will need at least\none disk of 150 gigabytes.",
    "start": "285311",
    "end": "289320"
  },
  {
    "text": "This is the default\nvalue for the cache disk.",
    "start": "289320",
    "end": "292410"
  },
  {
    "text": "For best performance,",
    "start": "292410",
    "end": "293760"
  },
  {
    "text": "the cache disk should be large enough",
    "start": "293760",
    "end": "295410"
  },
  {
    "text": "to cover the size of your\nactive working dataset.",
    "start": "295410",
    "end": "298890"
  },
  {
    "text": "The amount of cache can\nalways be increased,",
    "start": "298890",
    "end": "301080"
  },
  {
    "text": "so starting small and increasing as needed",
    "start": "301080",
    "end": "303780"
  },
  {
    "text": "is often the most cost-effective approach.",
    "start": "303780",
    "end": "306273"
  },
  {
    "text": "Next, it is going to benefit you",
    "start": "307694",
    "end": "309870"
  },
  {
    "text": "from a performance standpoint",
    "start": "309870",
    "end": "311250"
  },
  {
    "text": "if you're using high performance disks",
    "start": "311250",
    "end": "313020"
  },
  {
    "text": "like SSDs or NVMes for your cache.",
    "start": "313020",
    "end": "315903"
  },
  {
    "text": "Using SSDs for your cache",
    "start": "316740",
    "end": "318360"
  },
  {
    "text": "benefits you from high\nIOPS and low latency.",
    "start": "318360",
    "end": "321452"
  },
  {
    "text": "It is also recommended that the root disk",
    "start": "322770",
    "end": "325020"
  },
  {
    "text": "for your gateway appliance\nis actually NVMe or SSD,",
    "start": "325020",
    "end": "328410"
  },
  {
    "text": "since it holds the metadata index",
    "start": "328410",
    "end": "330390"
  },
  {
    "text": "off the data that is in your cache.",
    "start": "330390",
    "end": "332283"
  },
  {
    "text": "Next, I wanna call out that\nyou can always add cache disks,",
    "start": "335370",
    "end": "338669"
  },
  {
    "text": "but you can't decrease that.",
    "start": "338670",
    "end": "340470"
  },
  {
    "text": "So, that's why we recommend you\nstart out with 150 gigabytes",
    "start": "340470",
    "end": "344430"
  },
  {
    "text": "and adjust based on the actual usage",
    "start": "344430",
    "end": "346889"
  },
  {
    "text": "and performance metrics\nand scale from there.",
    "start": "346890",
    "end": "349860"
  },
  {
    "text": "You can use Amazon CloudWatch\noperational metrics",
    "start": "349860",
    "end": "352379"
  },
  {
    "text": "to monitor the cache story usage",
    "start": "352380",
    "end": "353829"
  },
  {
    "text": "and provision more storage\nas needed using the console.",
    "start": "353829",
    "end": "357483"
  },
  {
    "text": "When we talk about\nscaling the cache disks,",
    "start": "358740",
    "end": "361117"
  },
  {
    "text": "you wanna add new disks",
    "start": "361117",
    "end": "363330"
  },
  {
    "text": "to increase the capacity of data cache",
    "start": "363330",
    "end": "365378"
  },
  {
    "text": "rather than increasing the\nsize of an existing disk.",
    "start": "365378",
    "end": "368490"
  },
  {
    "text": "And the reason we recommend this",
    "start": "368490",
    "end": "369960"
  },
  {
    "text": "is because providing multiple disks",
    "start": "369960",
    "end": "371850"
  },
  {
    "text": "for the gateway will\nimprove right performance",
    "start": "371850",
    "end": "374430"
  },
  {
    "text": "through panelizing access to the data,",
    "start": "374430",
    "end": "376949"
  },
  {
    "text": "which leads to higher IOPS.",
    "start": "376950",
    "end": "378513"
  },
  {
    "text": "Lastly, monitoring your\ngateway and its resources",
    "start": "381540",
    "end": "384540"
  },
  {
    "text": "can help you track the\nhealth of your gateway.",
    "start": "384540",
    "end": "387243"
  },
  {
    "text": "The gateway uses least\nrecently used algorithm",
    "start": "388080",
    "end": "390479"
  },
  {
    "text": "for eviction of data from the cache.",
    "start": "390480",
    "end": "392850"
  },
  {
    "text": "When the cache is actually being shared",
    "start": "392850",
    "end": "394500"
  },
  {
    "text": "between multiple file\nshares on your gateway,",
    "start": "394500",
    "end": "397200"
  },
  {
    "text": "it is important to recognize\nthat heavy utilization",
    "start": "397200",
    "end": "399780"
  },
  {
    "text": "of one of those shares could\nimpact the cache resources",
    "start": "399780",
    "end": "402720"
  },
  {
    "text": "of another share, which in turn",
    "start": "402720",
    "end": "404790"
  },
  {
    "text": "means there is going to be some sort",
    "start": "404790",
    "end": "406350"
  },
  {
    "text": "of a performance impact.",
    "start": "406350",
    "end": "408239"
  },
  {
    "text": "It is important to continue\nmonitoring resources",
    "start": "408239",
    "end": "411270"
  },
  {
    "text": "on the gateway to\nunderstand your workload.",
    "start": "411270",
    "end": "413419"
  },
  {
    "text": "In the case of read-heavy and\nmixed-read write workloads,",
    "start": "414930",
    "end": "418139"
  },
  {
    "text": "you are going to want",
    "start": "418139",
    "end": "419070"
  },
  {
    "text": "to achieve a high percentage\nof cache hits on the reads.",
    "start": "419070",
    "end": "422370"
  },
  {
    "text": "Otherwise, the data is\ngoing to be fetched from S3,",
    "start": "422370",
    "end": "425610"
  },
  {
    "text": "which is going to increase\nyour data egress charges.",
    "start": "425610",
    "end": "428610"
  },
  {
    "text": "We can take a look at this by monitoring",
    "start": "428610",
    "end": "430199"
  },
  {
    "text": "and looking at the gateway metrics",
    "start": "430200",
    "end": "431520"
  },
  {
    "text": "and CloudWatch title, CacheHitPercent.",
    "start": "431520",
    "end": "434550"
  },
  {
    "text": "This is going to indicate the percent",
    "start": "434550",
    "end": "436050"
  },
  {
    "text": "of reads coming from the cache disk,",
    "start": "436050",
    "end": "438000"
  },
  {
    "text": "and we want this value",
    "start": "438000",
    "end": "438960"
  },
  {
    "text": "to be as close to a hundred\npercent as possible.",
    "start": "438960",
    "end": "441360"
  },
  {
    "text": "On the other hand, when we talk\nabout write-heavy workloads",
    "start": "442195",
    "end": "445860"
  },
  {
    "text": "such as backup and archive,",
    "start": "445860",
    "end": "448013"
  },
  {
    "text": "the way the S3 File Gateway works",
    "start": "448013",
    "end": "450360"
  },
  {
    "text": "is that it is going to\nbuffer the incoming writes",
    "start": "450360",
    "end": "452370"
  },
  {
    "text": "from your applications and clients",
    "start": "452370",
    "end": "454041"
  },
  {
    "text": "prior to copying your\ndata asynchronicity to S3.",
    "start": "454041",
    "end": "458460"
  },
  {
    "text": "This is why it is important",
    "start": "458460",
    "end": "459375"
  },
  {
    "text": "to make sure you have\nsufficient cache space",
    "start": "459376",
    "end": "461820"
  },
  {
    "text": "to buffer the written data.",
    "start": "461820",
    "end": "463681"
  },
  {
    "text": "Again, by looking at the CloudWatch metric",
    "start": "463681",
    "end": "466410"
  },
  {
    "text": "for CachePercentDirty, it is\ngoing to indicate the percent",
    "start": "466410",
    "end": "470400"
  },
  {
    "text": "of data that has not yet persisted to S3.",
    "start": "470400",
    "end": "473729"
  },
  {
    "text": "If this value is too high,",
    "start": "473730",
    "end": "475136"
  },
  {
    "text": "you want to increase your disc space",
    "start": "475136",
    "end": "477270"
  },
  {
    "text": "or increase your network\nbandwidth, or maybe do both.",
    "start": "477270",
    "end": "480990"
  },
  {
    "text": "You can take a look at the read bytes",
    "start": "480990",
    "end": "482563"
  },
  {
    "text": "and write bytes metrics\nas well to determine",
    "start": "482563",
    "end": "485460"
  },
  {
    "text": "and calculate the actual throughput.",
    "start": "485460",
    "end": "487593"
  },
  {
    "text": "You can use Amazon CloudWatch",
    "start": "488449",
    "end": "490296"
  },
  {
    "text": "to view the storage gateway metrics",
    "start": "490296",
    "end": "492270"
  },
  {
    "text": "to get a better perspective",
    "start": "492270",
    "end": "493511"
  },
  {
    "text": "on how your gateways are performing.",
    "start": "493511",
    "end": "495813"
  },
  {
    "text": "To summarize what we've\ndiscussed, there is a list",
    "start": "498300",
    "end": "500639"
  },
  {
    "text": "of best practices to size your\nAmazon S3 File Gateway Cache.",
    "start": "500640",
    "end": "504183"
  },
  {
    "text": "I hope you found this informative,\nand thanks for watching.",
    "start": "506640",
    "end": "509590"
  }
]