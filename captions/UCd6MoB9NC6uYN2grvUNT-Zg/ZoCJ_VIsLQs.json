[
  {
    "text": "I got lost straightaway now welcome everybody to the session which is sec",
    "start": "0",
    "end": "6210"
  },
  {
    "text": "ops 2021 today so there's a pause in there for dramatic effect right the",
    "start": "6210",
    "end": "14280"
  },
  {
    "text": "purpose of the mentioning Zener something in the future something that is forward-looking is that if we go back",
    "start": "14280",
    "end": "20730"
  },
  {
    "text": "to years ago the when lambda was initially released the use of things like lambda to automate event response",
    "start": "20730",
    "end": "26640"
  },
  {
    "text": "was very novel and very few customers started using it even in the first 12",
    "start": "26640",
    "end": "32578"
  },
  {
    "text": "months for purely the perspective of supporting operational security tasks",
    "start": "32579",
    "end": "37879"
  },
  {
    "text": "right now something that at that time seem to be you know very forward-looking and very slightly far-fetched it's",
    "start": "37879",
    "end": "46170"
  },
  {
    "text": "becoming real you know people are automating more and more the way in which they perform their security operations on AWS relying on a number of",
    "start": "46170",
    "end": "53309"
  },
  {
    "text": "technologies that we'll cover I am very glad to have with me Alex my strategy",
    "start": "53309",
    "end": "59850"
  },
  {
    "text": "from Netflix you will come and join us a bit later on to talk a bit more about our Netflix approaches some of the",
    "start": "59850",
    "end": "66270"
  },
  {
    "text": "topics that we are covering within the Cyclops space one thing that I guess",
    "start": "66270",
    "end": "71820"
  },
  {
    "text": "it's it's good to set the scene for is that why 2021 right why not 2020 or 2025",
    "start": "71820",
    "end": "80460"
  },
  {
    "text": "or something like that I'm a big fan of William Gibson and you wrote a story",
    "start": "80460",
    "end": "86430"
  },
  {
    "text": "called journeyman Emmonak journeyman morick takes place in 2021 ends up if",
    "start": "86430",
    "end": "92189"
  },
  {
    "text": "you watch the movie or write the short story Goodin here in journeyman mark the whole",
    "start": "92189",
    "end": "98790"
  },
  {
    "text": "story is about data transfer you know is picking up large volume of data back in",
    "start": "98790",
    "end": "105270"
  },
  {
    "text": "1993 I think which is 320 gigabytes and is transferring it between one continent",
    "start": "105270",
    "end": "111990"
  },
  {
    "text": "to the other and there's all kinds of you know threat actors that are at play",
    "start": "111990",
    "end": "117719"
  },
  {
    "text": "that wants to get old of that data there's some insight into the use of",
    "start": "117719",
    "end": "123299"
  },
  {
    "text": "encryption and secrets protect the data so it's quite a cool movie but essentially any as you could expect from",
    "start": "123299",
    "end": "130379"
  },
  {
    "text": "from a from a from a movie from a Hollywood blockbuster so to speak there's all kinds of twists in the story",
    "start": "130379",
    "end": "137480"
  },
  {
    "text": "so that don't define in a way or it is the rules for the for the agenda that we",
    "start": "137480",
    "end": "143610"
  },
  {
    "text": "have which is M we will start by looking from the perspective of protecting assets and how we can automate that and",
    "start": "143610",
    "end": "151500"
  },
  {
    "text": "how we can create full end-to-end workflows that take things from the",
    "start": "151500",
    "end": "158040"
  },
  {
    "text": "implementation of a control to monitoring its effectiveness to automatically fixing it or preventing it",
    "start": "158040",
    "end": "163830"
  },
  {
    "text": "from from becoming you know an actual normally like stop the bleeding type actions we will then very quickly move",
    "start": "163830",
    "end": "171510"
  },
  {
    "text": "to adapt and what we mean by adapt is situations in where you know the",
    "start": "171510",
    "end": "177150"
  },
  {
    "text": "environments in which we operate are not static right so depending on the data",
    "start": "177150",
    "end": "183150"
  },
  {
    "text": "that is being received and in general on situational awareness how can security controls tune up so that they respond to",
    "start": "183150",
    "end": "190290"
  },
  {
    "text": "their environment rather than just being in a static binary yes/no or a very simplistic eristic sometimes you know",
    "start": "190290",
    "end": "198359"
  },
  {
    "text": "things may go south and we need to respond to it and that's all that will",
    "start": "198359",
    "end": "203790"
  },
  {
    "text": "cover on the third topic so let me start with with the first one and go straight",
    "start": "203790",
    "end": "209190"
  },
  {
    "text": "in to protect and to get us going we will have a very simple use case we have",
    "start": "209190",
    "end": "214799"
  },
  {
    "text": "a user he needs to launch a new instance to do that is going to make an API call",
    "start": "214799",
    "end": "220079"
  },
  {
    "text": "right which is calling run instances and with run instances it will specify a",
    "start": "220079",
    "end": "226200"
  },
  {
    "text": "number of things as you know like you know security groups what is the base am i placement etc etc the use case or the",
    "start": "226200",
    "end": "235560"
  },
  {
    "text": "main requirement from from security perspective is that only an approved ami",
    "start": "235560",
    "end": "244530"
  },
  {
    "text": "is used and that ami is placed and has the right placement and a few things",
    "start": "244530",
    "end": "251250"
  },
  {
    "text": "around around it are also adequate so let me switch to another laptop and let",
    "start": "251250",
    "end": "259049"
  },
  {
    "text": "just go straight to that that set of actions so I've been here I am that user",
    "start": "259049",
    "end": "266250"
  },
  {
    "text": "I just want to launch an MI so I'll just speak the first one from that list which is Amazon lionex rice",
    "start": "266250",
    "end": "273720"
  },
  {
    "text": "I'll say I'll go back slightly I'll say",
    "start": "273720",
    "end": "281440"
  },
  {
    "text": "that I want to place it on a specific subject because that's the one where I know I want to perform you know what I",
    "start": "281440",
    "end": "286660"
  },
  {
    "text": "need to do which in this case is the front end for a for an application and",
    "start": "286660",
    "end": "292350"
  },
  {
    "text": "after doing that I will just go straight to it I just don't do a quick test so",
    "start": "292350",
    "end": "297700"
  },
  {
    "text": "let me just press a lunch and see what happens there we can acknowledge that so",
    "start": "297700",
    "end": "305590"
  },
  {
    "text": "I press lounge this will be all behavior that I you likely will be very familiar with the first state that an instance",
    "start": "305590",
    "end": "313900"
  },
  {
    "text": "goes to when you launch it is a surface pending pending means that there's a few things being done in the background to",
    "start": "313900",
    "end": "319720"
  },
  {
    "text": "prepare that you convert an ami and make an instance out of it right we give it a",
    "start": "319720",
    "end": "326350"
  },
  {
    "text": "few seconds we're gonna press refresh and we see that it is shutting down typically the state now would be you",
    "start": "326350",
    "end": "332770"
  },
  {
    "text": "know it takes a bit longer than it took right here but it would go into running and it is shutting down because you know",
    "start": "332770",
    "end": "338560"
  },
  {
    "text": "I just picked a random ami it's not authorized or anything like that it's just you know an mi sort of the marketplace it is somewhat interesting",
    "start": "338560",
    "end": "346780"
  },
  {
    "text": "to be honest better ways of doing it with I am an access and policies to",
    "start": "346780",
    "end": "352600"
  },
  {
    "text": "block so let's do it slightly different let's this time I'm going to launch an MI and I'm going to",
    "start": "352600",
    "end": "358720"
  },
  {
    "text": "use the correct one that I know is used I'm going to place it in the same subnet",
    "start": "358720",
    "end": "367530"
  },
  {
    "text": "sorry in the same V PC and subnet and",
    "start": "367530",
    "end": "374760"
  },
  {
    "text": "we're good we're good we're good we're good",
    "start": "374760",
    "end": "380550"
  },
  {
    "text": "and we are good we acknowledge that we press launch instances and these things",
    "start": "380550",
    "end": "386410"
  },
  {
    "text": "starts cranking away this thing is called the cloud bad word",
    "start": "386410",
    "end": "391979"
  },
  {
    "text": "it feels like it once again into pending so we've been here before and it goes again into shutting down so there is a",
    "start": "392729",
    "end": "400139"
  },
  {
    "text": "slight difference to the previous one right this time what I did was I used actually what is supposed to be an",
    "start": "400139",
    "end": "405900"
  },
  {
    "text": "approved ami I did place it in the front",
    "start": "405900",
    "end": "411150"
  },
  {
    "text": "in the main in the in the subnet that is the front end it saw me that then I just",
    "start": "411150",
    "end": "416250"
  },
  {
    "text": "clicked through very quickly and what happens in the console when you click very quickly through the security groups",
    "start": "416250",
    "end": "422130"
  },
  {
    "text": "it will create one for you you know like launch wizard - something which in this",
    "start": "422130",
    "end": "427500"
  },
  {
    "text": "case defaults to having an SSH open to the world so what happened what is",
    "start": "427500",
    "end": "432570"
  },
  {
    "text": "happening at the back is a number of things and let's go in a bit of detail into that so is enough it's long",
    "start": "432570",
    "end": "443340"
  },
  {
    "text": "traditional it's it's it's if there's not much switch but what I'm doing is",
    "start": "443340",
    "end": "449070"
  },
  {
    "text": "that I am capturing or I have set up a filter that if a specific API call or if",
    "start": "449070",
    "end": "454740"
  },
  {
    "text": "a specific instance state is entered in this case pending I want to analyze in",
    "start": "454740",
    "end": "461220"
  },
  {
    "text": "more detail what are the circumstances under which that instance is being",
    "start": "461220",
    "end": "466349"
  },
  {
    "text": "launched so I have a filter let's say something else depending please trigger a lambda and the only purpose of this",
    "start": "466349",
    "end": "473849"
  },
  {
    "text": "lambda is to evaluate the context of that instance right where is it coming",
    "start": "473849",
    "end": "481620"
  },
  {
    "text": "from where it is being placed so is it in the right subnet the top just EBC is",
    "start": "481620",
    "end": "486960"
  },
  {
    "text": "not enough in this case and does it have adequate security groups so far a fairly",
    "start": "486960",
    "end": "495449"
  },
  {
    "text": "common use case outside so some of you may already be doing many things from utilities the traditional path here",
    "start": "495449",
    "end": "502259"
  },
  {
    "text": "would be is it ok after assessing those three elements and if it's not ok",
    "start": "502259",
    "end": "507330"
  },
  {
    "text": "you know just terminate the instance as you are showing we are not doing that what we are doing here is actually he is",
    "start": "507330",
    "end": "516479"
  },
  {
    "text": "actually generating a new cloud watch event this time it is a custom one so it",
    "start": "516479",
    "end": "524339"
  },
  {
    "text": "is not real I on any event that is generated by the AWS platform but one that is generated",
    "start": "524339",
    "end": "529530"
  },
  {
    "text": "by my code that says I made an assessment and I need to escalate these",
    "start": "529530",
    "end": "534630"
  },
  {
    "text": "to another level of assessment or response in this case that will lead to",
    "start": "534630",
    "end": "539850"
  },
  {
    "text": "the termination of that instance that is the action that I decided to take when I",
    "start": "539850",
    "end": "545220"
  },
  {
    "text": "come across this there's a kind of setup so one final lambda is called so it's",
    "start": "545220",
    "end": "552750"
  },
  {
    "text": "very simple example what it is doing or what is showcasing is a couple of things first is cloud watch events and those",
    "start": "552750",
    "end": "560730"
  },
  {
    "text": "couple of Jason's that I add there we are using called worksheet bench to route or route messages between the",
    "start": "560730",
    "end": "567840"
  },
  {
    "text": "different lambdas and to vary our response based on small sets of heuristics the second one is that you",
    "start": "567840",
    "end": "575580"
  },
  {
    "text": "know lambda you know it's its it thrives in being event-driven and when some date",
    "start": "575580",
    "end": "581850"
  },
  {
    "text": "is checked at it - you know evaluate and do something we did so that place not not so much new but as often happens in",
    "start": "581850",
    "end": "590880"
  },
  {
    "text": "demo I did cheat things a bit so if I",
    "start": "590880",
    "end": "597630"
  },
  {
    "text": "show you the code for it for the first lambda that I had there you will see",
    "start": "597630",
    "end": "604140"
  },
  {
    "text": "that and all the code by the way I have a link at the end we'll all be provided to you all what's in there it is science",
    "start": "604140",
    "end": "612420"
  },
  {
    "text": "and so you know calling a method in Python it is defining a custom event that you see here which is escalating to",
    "start": "612420",
    "end": "619140"
  },
  {
    "text": "something called the auto responder level to active response and we know that the action is terminated but where",
    "start": "619140",
    "end": "625470"
  },
  {
    "text": "I say that things are a bit too much demo like in these circumstances is that",
    "start": "625470",
    "end": "631130"
  },
  {
    "text": "if you look here you will see that I have the main evaluation parameters they",
    "start": "631130",
    "end": "640770"
  },
  {
    "text": "are out of coded right it's always you know this needs to be this am i and if",
    "start": "640770",
    "end": "646770"
  },
  {
    "text": "it is this am i it should go in one of these subnets and if it is in one of these subnets it essentially will need",
    "start": "646770",
    "end": "652410"
  },
  {
    "text": "to use one of these security groups so it is it is effective but obviously",
    "start": "652410",
    "end": "658050"
  },
  {
    "text": "environments are dynamic right you cannot be expecting to be releasing code every time you create a new security group or something like",
    "start": "658050",
    "end": "663840"
  },
  {
    "text": "that let me go back to the slides so",
    "start": "663840",
    "end": "670490"
  },
  {
    "text": "context in this case was art coded and context is is not everything but it is a",
    "start": "670490",
    "end": "678180"
  },
  {
    "text": "lot when analyzing log information and event information for security purposes",
    "start": "678180",
    "end": "683820"
  },
  {
    "text": "I often show this slide during the",
    "start": "683820",
    "end": "689370"
  },
  {
    "text": "current year to showcase what is the",
    "start": "689370",
    "end": "694400"
  },
  {
    "text": "spectrum of options available to respond",
    "start": "694400",
    "end": "699510"
  },
  {
    "text": "to an event right if you start on the lower left essentially you are aggregating data but not doing much",
    "start": "699510",
    "end": "704670"
  },
  {
    "text": "straight away with it it is still valuable right when you are collating from a CV perspective it is valuable for",
    "start": "704670",
    "end": "711020"
  },
  {
    "text": "things like forensics for example look back see what happened before or to generate aggregate measures for",
    "start": "711020",
    "end": "717080"
  },
  {
    "text": "measuring performance am i information etc but it stands we can it starts",
    "start": "717080",
    "end": "722730"
  },
  {
    "text": "becoming really useful when it starts enriching it because when you in reaching it that's when you are adding",
    "start": "722730",
    "end": "728790"
  },
  {
    "text": "context that you are making things relevant to you if you are simply going to alert on anytime an instance is",
    "start": "728790",
    "end": "736440"
  },
  {
    "text": "launched it's going to become very noisy right probably the false positive rate is going to be quite high and very",
    "start": "736440",
    "end": "741780"
  },
  {
    "text": "quickly will start to be ignored so it's much context as we get around an event",
    "start": "741780",
    "end": "748380"
  },
  {
    "text": "that is generic and generated by either the platform or by syslog or by you know",
    "start": "748380",
    "end": "754080"
  },
  {
    "text": "any other kind of log source the more context that you can add to it the better your response can be and I'd say",
    "start": "754080",
    "end": "763860"
  },
  {
    "text": "that there are a couple of main types of context that you can add one of them",
    "start": "763860",
    "end": "770250"
  },
  {
    "text": "which is static that's example I went through although it was art coded and the other one is situational so it's",
    "start": "770250",
    "end": "777180"
  },
  {
    "text": "more more more varied it while it it depends on a set of circumstances rather",
    "start": "777180",
    "end": "782790"
  },
  {
    "text": "than a set of data that I have stored in some form bit art coded or in a store like Dan dynamodb",
    "start": "782790",
    "end": "790670"
  },
  {
    "text": "I mentioned DynamoDB because that is a very common service that we use to store",
    "start": "790720",
    "end": "799720"
  },
  {
    "text": "that additional metadata with which we enrich events so the code that I'm showing you on screen it's a school that",
    "start": "799720",
    "end": "806319"
  },
  {
    "text": "is actually being used in in with some of our customers and what you see in",
    "start": "806319",
    "end": "811870"
  },
  {
    "text": "there is something that by now you should be if you're not used it before a bit familiar but essentially what it is",
    "start": "811870",
    "end": "817360"
  },
  {
    "text": "doing is creating custom cloud watch event a custom cloud watch event that in",
    "start": "817360",
    "end": "828579"
  },
  {
    "text": "this case is saying you're going to need to alert but more interesting is is that",
    "start": "828579",
    "end": "837459"
  },
  {
    "text": "one which is essentially what what these two snippets do is as soon as you get an",
    "start": "837459",
    "end": "842980"
  },
  {
    "text": "event in this case would be a cloud trial cloud trail or cloud watch what is the first thing that it does is to",
    "start": "842980",
    "end": "848980"
  },
  {
    "text": "enrich it meaning that it will add original data to a native cloud event in",
    "start": "848980",
    "end": "855850"
  },
  {
    "text": "this case the data that we were having was information about let me just backtrack for a second but you know if",
    "start": "855850",
    "end": "862750"
  },
  {
    "text": "you get a security event obviously that needs a response to one thing that is really good is make sure that it gets as",
    "start": "862750",
    "end": "868360"
  },
  {
    "text": "quickly as possible to a person that can evaluate it and take action to deal with it so what you are seeing are scary and",
    "start": "868360",
    "end": "874839"
  },
  {
    "text": "what it does and what the store keeps is a list of account IDs a list of internal",
    "start": "874839",
    "end": "882639"
  },
  {
    "text": "owners from a security from a more general governance perspective and maybe",
    "start": "882639",
    "end": "887980"
  },
  {
    "text": "a couple of secondary contacts and also information about the purpose of the",
    "start": "887980",
    "end": "893170"
  },
  {
    "text": "account and its data classification if I have someone launching an ec2 instance",
    "start": "893170",
    "end": "898540"
  },
  {
    "text": "let's say and it in my sandbox account probably I don't worry too much about it",
    "start": "898540",
    "end": "903790"
  },
  {
    "text": "right it's supposed to be happening if I have someone doing it in an environment that I know that remains fairly static",
    "start": "903790",
    "end": "909790"
  },
  {
    "text": "and that instance is being launched manually by a user that I haven't seen",
    "start": "909790",
    "end": "914800"
  },
  {
    "text": "logging on today gone for a while that is you know higher signal slightly lower noise it is worth of investigating",
    "start": "914800",
    "end": "923389"
  },
  {
    "text": "the end-to-end description of that",
    "start": "923389",
    "end": "929029"
  },
  {
    "text": "enrichment is it's shown in that diagram and so in this case what we are doing is",
    "start": "929029",
    "end": "936949"
  },
  {
    "text": "enriching data that comes from cloud trails you have a set of accounts those",
    "start": "936949",
    "end": "942259"
  },
  {
    "text": "accounts are all set up to aggregate cloud trail logs and in a centralized",
    "start": "942259",
    "end": "949610"
  },
  {
    "text": "bucket and as it gets that cloud as a",
    "start": "949610",
    "end": "954799"
  },
  {
    "text": "new file or a new set of logs get deposited in that bucket you know it",
    "start": "954799",
    "end": "960470"
  },
  {
    "text": "triggers a notification that we launched a series of lambdas and those lambdas have some art art code but they have a",
    "start": "960470",
    "end": "968809"
  },
  {
    "text": "set of heuristics that will evaluate that in event that just came in as",
    "start": "968809",
    "end": "976059"
  },
  {
    "text": "described there now the one at the bottom that's where it becomes more",
    "start": "976059",
    "end": "981110"
  },
  {
    "text": "interesting right because each of those lambdas is also making a request to dynamo or caching data from dynamo that",
    "start": "981110",
    "end": "987439"
  },
  {
    "text": "allows it to enrich the the event and the final decision is made actually just",
    "start": "987439",
    "end": "994220"
  },
  {
    "text": "before step six you know there's a couple of things that happen in there step six the couple things that happen",
    "start": "994220",
    "end": "1001119"
  },
  {
    "text": "is it gets a new event which is by a cloud watch event across someone that event goes to a master assessor that",
    "start": "1001119",
    "end": "1008529"
  },
  {
    "text": "determines is it taking place in an account that I really care about and if so I need to escalate it for the",
    "start": "1008529",
    "end": "1016089"
  },
  {
    "text": "purposes of the demo that I'll do it will be email but obviously there's you know better ways to do it during a real",
    "start": "1016089",
    "end": "1022029"
  },
  {
    "text": "world like integration with your team or your ticketing system and the other one that I'd say that is quite important is",
    "start": "1022029",
    "end": "1028298"
  },
  {
    "text": "to even if it is deemed to be an alert that is not that sensitive to still",
    "start": "1028299",
    "end": "1038339"
  },
  {
    "text": "store it right it could be that something that happens today that I may say that it doesn't no it's not that",
    "start": "1038339",
    "end": "1045519"
  },
  {
    "text": "important I don't need to pay immediate attention to it but you know when looking back it could be that forensically it could be actually useful",
    "start": "1045519",
    "end": "1051520"
  },
  {
    "text": "and represent a piece of a wider puzzle and this brings me to the second part of",
    "start": "1051520",
    "end": "1062529"
  },
  {
    "text": "of the toll to die which is about adapt",
    "start": "1062529",
    "end": "1067630"
  },
  {
    "text": "sometimes you can take a joke too far right and you are familiar with that one",
    "start": "1067630",
    "end": "1073070"
  },
  {
    "text": "that's per dater right and and one thing that he adds was if you remember from that movie is each adapt which",
    "start": "1073070",
    "end": "1082100"
  },
  {
    "text": "environments when required go stealth and when it was the time to bounce so to",
    "start": "1082100",
    "end": "1089059"
  },
  {
    "text": "speak you do so the case that we will",
    "start": "1089059",
    "end": "1098059"
  },
  {
    "text": "walk through next as is it's about precisely that it's about how you can",
    "start": "1098059",
    "end": "1105080"
  },
  {
    "text": "establish situational awareness about something that is happening within the platform how you can adjust your",
    "start": "1105080",
    "end": "1112070"
  },
  {
    "text": "security posture to respond and and if necessary you know be stealthy about it",
    "start": "1112070",
    "end": "1118010"
  },
  {
    "text": "it could be that there are events happening that warrant more you know",
    "start": "1118010",
    "end": "1123620"
  },
  {
    "text": "being more watchful but don't necessarily dictate that you need to intervene directly right so our case is",
    "start": "1123620",
    "end": "1132279"
  },
  {
    "text": "fairly straightforward someone needs to ssh into an instance it",
    "start": "1132279",
    "end": "1138169"
  },
  {
    "text": "still happens sometimes someone it's racist edge finances all right our",
    "start": "1138169",
    "end": "1143539"
  },
  {
    "text": "default operating mode is that we are you know have a number of logging",
    "start": "1143539",
    "end": "1149059"
  },
  {
    "text": "sources enabled namely syslog which is being collated or aggregated in cloud",
    "start": "1149059",
    "end": "1155120"
  },
  {
    "text": "watch logs we have flow logs which is also going to cloud watch logs it goes by default right and we also have clouds",
    "start": "1155120",
    "end": "1161389"
  },
  {
    "text": "rarely enabled the reason why I mention these three is that this gives us visibility at three levels right at the",
    "start": "1161389",
    "end": "1166669"
  },
  {
    "text": "network level the operating system which is log and also at the platform with",
    "start": "1166669",
    "end": "1172039"
  },
  {
    "text": "well trail now under normal operation",
    "start": "1172039",
    "end": "1182110"
  },
  {
    "text": "this is what you know a user who",
    "start": "1182110",
    "end": "1189908"
  },
  {
    "text": "switch window here and minimize that one",
    "start": "1190030",
    "end": "1195790"
  },
  {
    "text": "right I would go I need let's get the",
    "start": "1195790",
    "end": "1201440"
  },
  {
    "text": "first one and don't worry too much about the get",
    "start": "1201440",
    "end": "1208160"
  },
  {
    "text": "logon ticket essentially what that is is just you know simulating a ticketing system that you know grants and is then",
    "start": "1208160",
    "end": "1214970"
  },
  {
    "text": "expecting that I'll all go on to the instance so I get the ticket I have my",
    "start": "1214970",
    "end": "1224600"
  },
  {
    "text": "SSH key and I logged on to my instance it's going to ask me yes I say yes and I",
    "start": "1224600",
    "end": "1235730"
  },
  {
    "text": "am in right so not much there but what",
    "start": "1235730",
    "end": "1242210"
  },
  {
    "text": "happened in the back was quite a few things and I gave one arrow away as soon",
    "start": "1242210",
    "end": "1248480"
  },
  {
    "text": "as I walked down to that instance the instance itself triggered a custom cloud watch event as we know Kirsten called",
    "start": "1248480",
    "end": "1255320"
  },
  {
    "text": "watch events will lead to triggering of a lambda in this case what the lambda is",
    "start": "1255320",
    "end": "1261200"
  },
  {
    "text": "doing is checking if there is a ticket associated with that logon it says hey",
    "start": "1261200",
    "end": "1267350"
  },
  {
    "text": "is this logon all right actually it's checking against the cannery that is in dynamodb and if it comes back saying",
    "start": "1267350",
    "end": "1273890"
  },
  {
    "text": "that yeah it's good you are good to go you know not much happens so what I",
    "start": "1273890",
    "end": "1281000"
  },
  {
    "text": "describe it to you so far you really need to take my word right it's on trust but let's say that's you know the user",
    "start": "1281000",
    "end": "1286310"
  },
  {
    "text": "does what he needs to do and something",
    "start": "1286310",
    "end": "1291350"
  },
  {
    "text": "went wrong in this process no maybe someone was able to get hold of that credential that I just used or it could",
    "start": "1291350",
    "end": "1297020"
  },
  {
    "text": "be that it is myself that I remembered after logging out or I have something else I need to do so let me go back",
    "start": "1297020",
    "end": "1302150"
  },
  {
    "text": "quickly so I go back in this time I've",
    "start": "1302150",
    "end": "1308570"
  },
  {
    "text": "it's quicker I do an LS and a couple other things and the big difference that",
    "start": "1308570",
    "end": "1316220"
  },
  {
    "text": "has happened right now is that I didn't not follow that process that was",
    "start": "1316220",
    "end": "1321290"
  },
  {
    "text": "supposed to be right which is to have a ticket requested that will allow me to get",
    "start": "1321290",
    "end": "1327200"
  },
  {
    "text": "access to the instance so I ideated from what is expected as I",
    "start": "1327200",
    "end": "1335630"
  },
  {
    "text": "deviate we will have a slightly different response very quickly alright",
    "start": "1335630",
    "end": "1346190"
  },
  {
    "text": "so let me walk you through what happens there I log on again I have a custom",
    "start": "1346190",
    "end": "1355010"
  },
  {
    "text": "Claude watch event that just requested",
    "start": "1355010",
    "end": "1360250"
  },
  {
    "text": "centrally to the to the lambda that in turns goes to DynamoDB and asks is this",
    "start": "1361030",
    "end": "1368150"
  },
  {
    "text": "Logan okay yes or no this time the answer is going to be that no it is not",
    "start": "1368150",
    "end": "1373970"
  },
  {
    "text": "okay being not okay means that a few",
    "start": "1373970",
    "end": "1382580"
  },
  {
    "text": "things happen there can you read that",
    "start": "1382580",
    "end": "1393220"
  },
  {
    "text": "how zoom in just in case maybe I",
    "start": "1393220",
    "end": "1401600"
  },
  {
    "text": "shouldn't say van right there we go so you see here that you know as I didn't",
    "start": "1401600",
    "end": "1409580"
  },
  {
    "text": "raise a ticket something is telling me hey there's been a log on and we are not able to track that to an authorized",
    "start": "1409580",
    "end": "1417400"
  },
  {
    "text": "action secondly it is saying I'm going to be more watchful from now onwards I'm",
    "start": "1417400",
    "end": "1424160"
  },
  {
    "text": "going to start subscribing new sets of lambdas and using cloud watch events to",
    "start": "1424160",
    "end": "1431030"
  },
  {
    "text": "subscribe to a series of log files so that I can you know continue to evaluate exactly what's going on here and you see",
    "start": "1431030",
    "end": "1437990"
  },
  {
    "text": "that there is a subscription to var lock secure and another one to flow logs to get a visibility at the network level if",
    "start": "1437990",
    "end": "1445750"
  },
  {
    "text": "by the way the emails that you see before were related to the first time all right which is a.m. I didn't match a",
    "start": "1445750",
    "end": "1452090"
  },
  {
    "text": "sweater sweater so ears what went on",
    "start": "1452090",
    "end": "1460250"
  },
  {
    "text": "we just said logon is not okay if it's not okay I need to do something and the",
    "start": "1460250",
    "end": "1465300"
  },
  {
    "text": "thing that I'm doing is I raise the new custom cloud watch events that's the theme for the day",
    "start": "1465300",
    "end": "1470520"
  },
  {
    "text": "that's eyes I want to enhance my posture I want to be more watchful about what's going on and that additional",
    "start": "1470520",
    "end": "1477240"
  },
  {
    "text": "watchfulness is is doing a number of things but two of them are to do with setting up a new series of lambdas that",
    "start": "1477240",
    "end": "1484800"
  },
  {
    "text": "are subscribing to syslog or part log secure and a second set that is looking",
    "start": "1484800",
    "end": "1491010"
  },
  {
    "text": "into what's happening on the network and",
    "start": "1491010",
    "end": "1497120"
  },
  {
    "text": "in addition besides looking at flow logs more at the VPC network level it also",
    "start": "1497120",
    "end": "1502380"
  },
  {
    "text": "set up a set of flow logs that are just associated with the interfaces for that",
    "start": "1502380",
    "end": "1507720"
  },
  {
    "text": "instance and also add subscribers to it so that it can you know just get a direct feed that only contains data for",
    "start": "1507720",
    "end": "1513900"
  },
  {
    "text": "the instance that I'm interested in now",
    "start": "1513900",
    "end": "1521630"
  },
  {
    "text": "for now everything or the only thing that is happening is that you know",
    "start": "1521990",
    "end": "1527550"
  },
  {
    "text": "someone is here we see from the email notifications that I showed you that a",
    "start": "1527550",
    "end": "1534090"
  },
  {
    "text": "few things happen in the background but nothing has dictated that that I be more",
    "start": "1534090",
    "end": "1540500"
  },
  {
    "text": "direct or more active in my response so let me do something let's say that now I",
    "start": "1540500",
    "end": "1546140"
  },
  {
    "text": "escalate the level of privileges that I have remaining you know being a regular",
    "start": "1546140",
    "end": "1558180"
  },
  {
    "text": "user logging on to an instance is I may be able to tolerate and assess to see if",
    "start": "1558180",
    "end": "1564210"
  },
  {
    "text": "it is just a mistake or if it is something else escalating my privilege to become the",
    "start": "1564210",
    "end": "1569250"
  },
  {
    "text": "owner of that machine to becoming a privilege user to becoming route that is something more concerning and you may",
    "start": "1569250",
    "end": "1577170"
  },
  {
    "text": "hear my keyboard but essentially right now I'm unable to interact with the instance because there's been something",
    "start": "1577170",
    "end": "1582780"
  },
  {
    "text": "that said until now I was willing to just watch but now that you are route actually I need to do something about it",
    "start": "1582780",
    "end": "1588390"
  },
  {
    "text": "and we need to which also gave us a few seconds to get",
    "start": "1588390",
    "end": "1594990"
  },
  {
    "text": "a couple of emails a couple of emails what they are saying is essentially eight there's been a route escalation we're not going to be anymore just",
    "start": "1594990",
    "end": "1601770"
  },
  {
    "text": "watching we are going to do something about it which in this case is about isolating that instance yeah and you see",
    "start": "1601770",
    "end": "1612060"
  },
  {
    "text": "the set of steps that were taken all the way the bottom so API termination enabled so that we can preserve the",
    "start": "1612060",
    "end": "1617220"
  },
  {
    "text": "instance it is not accidentally shut down because we won't use it for forensic purposes we change the security",
    "start": "1617220",
    "end": "1624720"
  },
  {
    "text": "group we don't want that instance anymore to be playing an active role in serving actual production traffic and a",
    "start": "1624720",
    "end": "1631500"
  },
  {
    "text": "few more things have have happened there let me switch back to to my slice right",
    "start": "1631500",
    "end": "1637710"
  },
  {
    "text": "so quick rerun we came to the conclusion that you know it is a serious event",
    "start": "1637710",
    "end": "1643620"
  },
  {
    "text": "right it is a serious event so the actions that I am going to take is first I want to isolate the instance there's a",
    "start": "1643620",
    "end": "1650100"
  },
  {
    "text": "limiter that did just that second I want to deregister that",
    "start": "1650100",
    "end": "1656130"
  },
  {
    "text": "instance from you know al bees and auto-scaling groups and such so that it no longer serves any kind of business",
    "start": "1656130",
    "end": "1663090"
  },
  {
    "text": "purpose you know we we see it as being tainted at this point potentially compromised it's a belt and braces",
    "start": "1663090",
    "end": "1669270"
  },
  {
    "text": "approaches in there right in one hand we are blocking traffic in the second on the other hand we are also deer registering it from load balancers and",
    "start": "1669270",
    "end": "1675450"
  },
  {
    "text": "so on and lastly I won't find out exactly what happened there so I am in the background",
    "start": "1675450",
    "end": "1682350"
  },
  {
    "text": "it is also triggering snapshotting of all the volumes associated with that instance so that we can facilitate you",
    "start": "1682350",
    "end": "1688470"
  },
  {
    "text": "know a bit the life of the forensic investigators auto-scaling at the same",
    "start": "1688470",
    "end": "1695490"
  },
  {
    "text": "time realizes that you know my cluster or my fleet is one down let me launch a",
    "start": "1695490",
    "end": "1700950"
  },
  {
    "text": "new one from what we at this stage seem to be known good and you know everything",
    "start": "1700950",
    "end": "1708540"
  },
  {
    "text": "is is back to normal now this is not the end of it right it is actually the start",
    "start": "1708540",
    "end": "1715550"
  },
  {
    "text": "and I play a couple of shaky jokes with",
    "start": "1715550",
    "end": "1721050"
  },
  {
    "text": "movies right but my my guests also very much involved with a cinematic the industry and all",
    "start": "1721050",
    "end": "1727180"
  },
  {
    "text": "the streaming etc but they do it for real live so I'd like to hand over to Alex my strategy from from Netflix thank",
    "start": "1727180",
    "end": "1736420"
  },
  {
    "text": "you excellent so we talked a little bit about prevention talked a little bit",
    "start": "1736420",
    "end": "1742720"
  },
  {
    "text": "about detection and I'm gonna carry that forward and talk about response which is a topic near and dear to my heart my",
    "start": "1742720",
    "end": "1748660"
  },
  {
    "text": "name is Alex machete and I run the Netflix security intelligence and response team so our team provides",
    "start": "1748660",
    "end": "1753970"
  },
  {
    "text": "security intelligence as well as crisis management and incident response across Netflix and the way that we approach",
    "start": "1753970",
    "end": "1760660"
  },
  {
    "text": "security I don't know if some of you saw the keynote yesterday actually it was interesting to hear so Amazon approaches it you know no sock no so traditional",
    "start": "1760660",
    "end": "1767920"
  },
  {
    "text": "models we have a similar approach and not that approach is really an extension of the Netflix culture and our tech",
    "start": "1767920",
    "end": "1774250"
  },
  {
    "text": "stack so as far as our culture you may have seen the famous Netflix culture deck and we've actually revamped that",
    "start": "1774250",
    "end": "1780070"
  },
  {
    "text": "into a culture memo that's a shameless plug jobs on flexkom slash culture I'll",
    "start": "1780070",
    "end": "1785530"
  },
  {
    "text": "give you a minute to type that into your phones you could go review this and basically this document codifies our belief that you can scale an",
    "start": "1785530",
    "end": "1791650"
  },
  {
    "text": "organization while maintaining an incredibly high talent density and this is a lot of work but the payoff the",
    "start": "1791650",
    "end": "1797350"
  },
  {
    "text": "return on that investment is that you don't then need a lot of prescriptive procedures or policies or controls in",
    "start": "1797350",
    "end": "1804280"
  },
  {
    "text": "place so you don't need to define what a vacation policy is you don't need to define what an expense account looks",
    "start": "1804280",
    "end": "1809500"
  },
  {
    "text": "like you trust your employees to go ahead and enact in the instance of the best the best interests of the company and that extends to the way we approach",
    "start": "1809500",
    "end": "1815320"
  },
  {
    "text": "security so it's not a traditional model we give a lot of power and authority to our individual contributors tour engineers to do what's right to take",
    "start": "1815320",
    "end": "1823120"
  },
  {
    "text": "smart bets on behalf of the company but then you need a good response function there to pick up the pieces when those smart bets don't pay off so that's the",
    "start": "1823120",
    "end": "1829540"
  },
  {
    "text": "first part the culture the second part is our tech stack there are a ton of great talks happening at reinvent right",
    "start": "1829540",
    "end": "1835360"
  },
  {
    "text": "now about how Netflix engineers are our streaming service a lot of the business logic of our streaming service exists in AWS so I encourage you to check those",
    "start": "1835360",
    "end": "1842200"
  },
  {
    "text": "out again our medium tech blog has a list of those I've pinned a list of the other talks to my Twitter account my",
    "start": "1842200",
    "end": "1848770"
  },
  {
    "text": "last name of Twitter so I encourage you to check those out but in sort of broad strokes as far as security response is",
    "start": "1848770",
    "end": "1854680"
  },
  {
    "text": "concerned I think about three main characteristics of our tech stack in AWS one microservices to roughly immutable",
    "start": "1854680",
    "end": "1862220"
  },
  {
    "text": "instances and three ephemeral instances so microservices that means that we've decomposed this large application into",
    "start": "1862220",
    "end": "1868490"
  },
  {
    "text": "micro services that do one particular thing really well so compare that to a traditional server where it might I",
    "start": "1868490",
    "end": "1873799"
  },
  {
    "text": "think about the first UNIX server that my friends helped administer in my high school it was you know it was the mail server",
    "start": "1873799",
    "end": "1879110"
  },
  {
    "text": "it had whole user home directories it had interactive shell it had the web server it had all of the things right and then we had the NT server there was",
    "start": "1879110",
    "end": "1885860"
  },
  {
    "text": "a domain controller it was also the nicest machine we had with the best internet connection so we surf the web on it so if you're doing these all these",
    "start": "1885860",
    "end": "1892399"
  },
  {
    "text": "different activities on a server it can be very hard to determine what is legitimate activity what is sort of gray",
    "start": "1892399",
    "end": "1897860"
  },
  {
    "text": "activity and what is dangerous activity but not so with micro services with those you have a very defined task for",
    "start": "1897860",
    "end": "1904370"
  },
  {
    "text": "each server and that allows you to do forensics much more easily the second thing that helps is is immutable",
    "start": "1904370",
    "end": "1909950"
  },
  {
    "text": "instances and we're not completely there but the idea behind an immutable instance is that you deploy this instance from source in our case we",
    "start": "1909950",
    "end": "1917240"
  },
  {
    "text": "baked a Mis and then it was a Mis them become instances if you've heard about docker and containers is a similar model",
    "start": "1917240",
    "end": "1922850"
  },
  {
    "text": "right you create a container and then you deploy that container and once it's deployed you should not be doing any configuration on that anymore",
    "start": "1922850",
    "end": "1928970"
  },
  {
    "text": "there should be no interactive logins no chef no puppet no changes to that in production if you want to make a change",
    "start": "1928970",
    "end": "1934309"
  },
  {
    "text": "make it change the source and you redeploy so again from a forensics perspective that gives you a very strong baseline that am i that gold image is",
    "start": "1934309",
    "end": "1941750"
  },
  {
    "text": "sort of known good if you trust your build pipeline and you can do a differential analysis on that versus",
    "start": "1941750",
    "end": "1947149"
  },
  {
    "text": "your target and that pops out right away what the changes are that are relevant to look at so that's the immutable",
    "start": "1947149",
    "end": "1952669"
  },
  {
    "text": "aspect the ephemeral aspect is the last bit and that means that these instances don't last very long so you sort of saw",
    "start": "1952669",
    "end": "1958879"
  },
  {
    "text": "there the auto scaling group right you can deploy from this ami deploy these instances they scale up to handle traffic they scale down and traffic's",
    "start": "1958879",
    "end": "1964970"
  },
  {
    "text": "missing if you heard about our chaos program we sort of summarily execute these instances at various times to test",
    "start": "1964970",
    "end": "1970850"
  },
  {
    "text": "resiliency so if these instances don't live very long they don't deviate too much from the baseline and if the whole",
    "start": "1970850",
    "end": "1976730"
  },
  {
    "text": "system is resilient to their failure then as a response team you can be very aggressive in your response actions you",
    "start": "1976730",
    "end": "1982669"
  },
  {
    "text": "know in more traditional models you've probably run into that that sacred cow server with eight years of uptime",
    "start": "1982669",
    "end": "1987680"
  },
  {
    "text": "you know the admins are very proud of that figure but you can't touch it or if you knock it over every minute of",
    "start": "1987680",
    "end": "1992690"
  },
  {
    "text": "downtime costs you your annual salary kind of thing so with these ephemeral instances that's not the case you can be very rough with",
    "start": "1992690",
    "end": "1998300"
  },
  {
    "text": "them you can take them out of circulation as we saw there you can quarantine them for later looks so it's a fun place to do response you'd be much",
    "start": "1998300",
    "end": "2004780"
  },
  {
    "text": "more aggressive in the way that you pursue it so a bit of an aside there on our approach to security today we'll",
    "start": "2004780",
    "end": "2012040"
  },
  {
    "text": "talk about forensics and essentially we're gonna talk about good old-fashioned Linux forensics with an AWS twist there's a whole other layer",
    "start": "2012040",
    "end": "2018550"
  },
  {
    "text": "action that's very interesting working in a dress and that's you know the cloud trailer cloud watch we heard a bit about previously and I would just like to plug",
    "start": "2018550",
    "end": "2025570"
  },
  {
    "text": "the security Jam that's happening right now in the in the park in the jam10 we've got a Netflix created a",
    "start": "2025570",
    "end": "2032050"
  },
  {
    "text": "three-stage capture-the-flag where you guys can actually some hands-on sort of attack defense using the AWS layer but for today traditional",
    "start": "2032050",
    "end": "2039040"
  },
  {
    "text": "Linux looking at how we can do basically dead box forensics and live response at",
    "start": "2039040",
    "end": "2044560"
  },
  {
    "text": "a scalable manner so we'll advance so Before we jump into that exactly we'll talk a little about the setup that you",
    "start": "2044560",
    "end": "2050830"
  },
  {
    "text": "need ahead of time so you need to setup your roles and account sir I am privileged is to enable you to conduct your mission in our case we've got a",
    "start": "2050830",
    "end": "2057490"
  },
  {
    "text": "multi account setup and I think a lot of folks we go in this direction so you could think of that as simple as you",
    "start": "2057490",
    "end": "2062590"
  },
  {
    "text": "might have test and prod in our case you know we've broken prod up and are meaning in more and more to splitting",
    "start": "2062590",
    "end": "2067840"
  },
  {
    "text": "prod into much more granular chunks of risk so the advantage here of using",
    "start": "2067840",
    "end": "2073629"
  },
  {
    "text": "these at this account sort of construct as you get to bucket your risk and and create more release privilege more compartmentalization the downside is",
    "start": "2073630",
    "end": "2080470"
  },
  {
    "text": "there's a little bit more management overhead in that but we've built some tooling and Amazon is working quickly on organizations and things like that to",
    "start": "2080470",
    "end": "2086560"
  },
  {
    "text": "help you manage across multiple accounts so one of those basic management functions is to be able to push I am",
    "start": "2086560",
    "end": "2093040"
  },
  {
    "text": "roles across it so here you'll see for our purposes we'll talk about the the s3",
    "start": "2093040",
    "end": "2098560"
  },
  {
    "text": "prefixes that we use and a couple of the IM roles so we have a friend's account and that again sort of buckets the risk",
    "start": "2098560",
    "end": "2104260"
  },
  {
    "text": "of the forensics roles that have quite a bit of privilege and that forensic account is home to an s3 bucket with two",
    "start": "2104260",
    "end": "2110950"
  },
  {
    "text": "prefixes evidence and trusted as well as an IRS three role that can write into",
    "start": "2110950",
    "end": "2116080"
  },
  {
    "text": "evidence and read from trusted so there's also some stuff in the backend there from evidence where as soon as a file hits that we make a",
    "start": "2116080",
    "end": "2122220"
  },
  {
    "text": "copy into a volt so that basically gives us like a one-way data diode so the s3 I",
    "start": "2122220",
    "end": "2127740"
  },
  {
    "text": "rs3 roll can write evidence and it can't change it so that's how we collect evidence in that s3 bucket the trusted",
    "start": "2127740",
    "end": "2133740"
  },
  {
    "text": "bucket we use two-stage trusted executables configuration files things that we need to trust during our",
    "start": "2133740",
    "end": "2138780"
  },
  {
    "text": "response activities then you'll see in each of the target accounts we have an IR role so this is a fairly privileged",
    "start": "2138780",
    "end": "2144960"
  },
  {
    "text": "role it can do things like snapshot run SSM commands conduct whatever sort of data gathering that we need and that",
    "start": "2144960",
    "end": "2152070"
  },
  {
    "text": "role can only be assumed into bi roles in the forensic count so that's how we main control we maintain control of that",
    "start": "2152070",
    "end": "2157860"
  },
  {
    "text": "role it's a fairly privileged role but you can only assume into it out of the friends account out of the automation tooling that we have in there so based",
    "start": "2157860",
    "end": "2165900"
  },
  {
    "text": "on that setup what can we do with it well first off let's talk dead box forensics so in the good old days right",
    "start": "2165900",
    "end": "2172440"
  },
  {
    "text": "if you wanted to do some dead box forensics you would run down to the data center you pull a drive out of a server",
    "start": "2172440",
    "end": "2177450"
  },
  {
    "text": "hook it up to a write blocker in your lab maybe wait overnight for that to make a bite by by copy and the next day",
    "start": "2177450",
    "end": "2182850"
  },
  {
    "text": "you'd plug your fresh image into a big workstation and you'd grind through to try and extract forensic information so",
    "start": "2182850",
    "end": "2190110"
  },
  {
    "text": "the goal there is again to collect relevant information off of that Drive they might tell you what the adversaries were up to what went wrong fortunately",
    "start": "2190110",
    "end": "2196620"
  },
  {
    "text": "in a SS there's no more right blockers there's no more running of data centers you make an API call and the snapshot has taken for you and this is critical",
    "start": "2196620",
    "end": "2203910"
  },
  {
    "text": "because in in the Amazon environment and Netflix is scale you're not making onesie twosie copies of drives you want",
    "start": "2203910",
    "end": "2210900"
  },
  {
    "text": "to copy 10 50 600 you know thousands of drives at the same time and the APL call",
    "start": "2210900",
    "end": "2216240"
  },
  {
    "text": "lets you do that because it's not blocking it's not happening in parallel you're not waiting for the right blocker to complete you just start making calls",
    "start": "2216240",
    "end": "2221760"
  },
  {
    "text": "and it will tell you when it makes these snapshots are complete so we built some automation around that to scale up that",
    "start": "2221760",
    "end": "2227220"
  },
  {
    "text": "process you can do about that via the console but we've we've elected to lean into lambdas so we have a snapshot",
    "start": "2227220",
    "end": "2233760"
  },
  {
    "text": "lambda in our friends account and you can access that either through some sort of authentication from a user or this",
    "start": "2233760",
    "end": "2239220"
  },
  {
    "text": "could be kicked off automatically from an event you might get an alert or anyone rich but either way it hits this lambda this lambda has the proper iam",
    "start": "2239220",
    "end": "2245730"
  },
  {
    "text": "credentials to assume into the IR role in the target account so it's a little bit of enrichment a little bit of multi",
    "start": "2245730",
    "end": "2251940"
  },
  {
    "text": "account magic that have first you need to figure out where that instance is that you're targeting so you can either pass an arm and Amazon",
    "start": "2251940",
    "end": "2258380"
  },
  {
    "text": "resource number that has sort of a fully-qualified location of that instance which includes the account in the region or or we have some stuff that",
    "start": "2258380",
    "end": "2264950"
  },
  {
    "text": "uses our our back-end tooling to look that up for you if you have only have a partial bit of information so it finds that instance it finds the instances",
    "start": "2264950",
    "end": "2271549"
  },
  {
    "text": "root volume you could also snapshot secondary volumes if you wanted and then it provides that to the snapshot API and",
    "start": "2271549",
    "end": "2276829"
  },
  {
    "text": "says go ahead make me a copy of this so as I said the snapshot API then immediately returns alright I'm making a copy here's what it",
    "start": "2276829",
    "end": "2283160"
  },
  {
    "text": "will be and it's in a sort of a pending State well that's made and you can go ahead and add essentially metadata to",
    "start": "2283160",
    "end": "2288619"
  },
  {
    "text": "that so what we do is we we share that snapshot with our friends Friendly's account because the snapshots been made",
    "start": "2288619",
    "end": "2294410"
  },
  {
    "text": "from the context of the role within the target account so it only is accessible within that target so then we share it",
    "start": "2294410",
    "end": "2299839"
  },
  {
    "text": "back with forensics and that's how we sort of bring it home you don't have to SCP it across anything up to transfer any data you just share the account and",
    "start": "2299839",
    "end": "2306380"
  },
  {
    "text": "it will pop up in there so once we have that created and shared you know sort of",
    "start": "2306380",
    "end": "2312319"
  },
  {
    "text": "then what so then we need to process and this is where it's a little bit more hairy so using cloud watch and the exact",
    "start": "2312319",
    "end": "2319699"
  },
  {
    "text": "manner in which we set up our forensic account which will Ben stand talked about earlier this week we get a stream",
    "start": "2319699",
    "end": "2326150"
  },
  {
    "text": "of the Claude Washington cultural events in forensic account so we can see that the snapshots been created we can tell when it's been completed and we have",
    "start": "2326150",
    "end": "2332209"
  },
  {
    "text": "access to it so essential what that does is kicks off another lambda function called snap process and unfortunately",
    "start": "2332209",
    "end": "2337549"
  },
  {
    "text": "lambdas are unable to mount volumes or so they can't handle the snapshots directly so what we do is we launched",
    "start": "2337549",
    "end": "2343160"
  },
  {
    "text": "from a ami a new instance and during that ec2 launch process we tell it to go",
    "start": "2343160",
    "end": "2348890"
  },
  {
    "text": "ahead and mount that snapshot as a secondary drive so the machine comes up it's got access to the target drive it's",
    "start": "2348890",
    "end": "2355279"
  },
  {
    "text": "got a set of tools on it from the ami and we can send it some commands via a user data that tells it sort of state on",
    "start": "2355279",
    "end": "2361009"
  },
  {
    "text": "what casus is for what actions we wanted to take things like that so then that starts grinding through extracting",
    "start": "2361009",
    "end": "2366799"
  },
  {
    "text": "artifacts and we do that using a Python script that we wrote that essentially",
    "start": "2366799",
    "end": "2372559"
  },
  {
    "text": "leverages Google has a program product called Google rapid response and they",
    "start": "2372559",
    "end": "2378920"
  },
  {
    "text": "wrote a set of Hamel definitions for relevant Forensic Files so we ingest that ml file we go and pick up those",
    "start": "2378920",
    "end": "2384979"
  },
  {
    "text": "files we move that's three enemy tagging with some metadata so at the end of the process the instance tears itself down and",
    "start": "2384979",
    "end": "2390990"
  },
  {
    "text": "you're left with files in s3 so well demo this at the end so another option",
    "start": "2390990",
    "end": "2397410"
  },
  {
    "text": "if you didn't want to do dead box forensics you want to do live response is is potentially faster I would say you",
    "start": "2397410",
    "end": "2404880"
  },
  {
    "text": "know it's certainly noisier so the trade-offs essentially are with the Box forensics you're only hitting the Amazon API layer if the if the attacker the",
    "start": "2404880",
    "end": "2411960"
  },
  {
    "text": "adversary is on the box they can't see any of that so it's fairly stealthy in this case you're gonna go live on the",
    "start": "2411960",
    "end": "2417270"
  },
  {
    "text": "box the advantage that gives you is it gives you access to system state you if you don't want to take a full snapshot",
    "start": "2417270",
    "end": "2422610"
  },
  {
    "text": "you can pick individual files amount when I grab so it's potentially more surgical so in this case similar similar",
    "start": "2422610",
    "end": "2428250"
  },
  {
    "text": "model right you have it either an analyst with a hunch or we have an automated event it's gonna fire off this collection lambda the lambda has the",
    "start": "2428250",
    "end": "2434310"
  },
  {
    "text": "privilege to assume into the target account role and in this case it's going to leverage something called simple server manager SSM so as the sem is a",
    "start": "2434310",
    "end": "2441870"
  },
  {
    "text": "very powerful tool if you have the SSM agents running on your instances then",
    "start": "2441870",
    "end": "2447120"
  },
  {
    "text": "amazon will provide all of the backhaul all of the tasking all the multiplexing and all the sort of status reporting",
    "start": "2447120",
    "end": "2452430"
  },
  {
    "text": "back to basically run arbitrary commands so as a live response tool it's great some of things that we've done to lock",
    "start": "2452430",
    "end": "2459360"
  },
  {
    "text": "that down that powerful tool is you can use an SSM document that will define exactly what that SSM agent is allowed",
    "start": "2459360",
    "end": "2465420"
  },
  {
    "text": "to do so we've defined the document for our purposes that essentially says you're going to go to the trust and",
    "start": "2465420",
    "end": "2470430"
  },
  {
    "text": "bucket you're gonna pull an archive a zip file you can unzip it you're gonna run an entry point script and then from",
    "start": "2470430",
    "end": "2476010"
  },
  {
    "text": "there you know we can do whatever we need to do generally what we do is then rotate files into s3 or we can sometimes",
    "start": "2476010",
    "end": "2482280"
  },
  {
    "text": "we'll run OLS query because that will give us interim information on system state so you're an OS query dump results",
    "start": "2482280",
    "end": "2487950"
  },
  {
    "text": "in s3 dump results and elastic search something like that one note on the IRS",
    "start": "2487950",
    "end": "2492990"
  },
  {
    "text": "three role so initially the way that we approach this was to allow any instance to assume into the IRS three role and",
    "start": "2492990",
    "end": "2500400"
  },
  {
    "text": "the reason one of the other reasons we have the IRS 3 rule is because when you copy when you write a file in s3 it's helpful",
    "start": "2500400",
    "end": "2505740"
  },
  {
    "text": "to do that from a role within the same account because it matches up some of the identifiers but if we allow every",
    "start": "2505740",
    "end": "2511470"
  },
  {
    "text": "instance to assume into that role then we have to give every instance in our environment the assumed role privilege and that was a fairly powerful privilege",
    "start": "2511470",
    "end": "2517950"
  },
  {
    "text": "we didn't really want to give everybody so instead what we do is we have that lambda function there that collect lambda do the assumed role then",
    "start": "2517950",
    "end": "2524830"
  },
  {
    "text": "hit STS for temporary credentials and we pass those credentials as a parameter to the SSM document so you know arguably",
    "start": "2524830",
    "end": "2531730"
  },
  {
    "text": "that's a bit of an anti-pattern passing credentials as parameters but because there are temporary and because",
    "start": "2531730",
    "end": "2536980"
  },
  {
    "text": "of the limited things that the IRS three rule can do we felt that was better than imbuing all of our instances on the edge",
    "start": "2536980",
    "end": "2542320"
  },
  {
    "text": "with assumed role so that's how we handle it for now you know we're still exploring that so yeah the SM role that",
    "start": "2542320",
    "end": "2548740"
  },
  {
    "text": "can then assume into the IRS three role and have access to the buckets that I need to have access to but at the end of",
    "start": "2548740",
    "end": "2553780"
  },
  {
    "text": "the day you still end up with essentially files in s3 so what then so then the next stage is processing and",
    "start": "2553780",
    "end": "2560010"
  },
  {
    "text": "this is this is great because you know whether it's the snapshot or the live",
    "start": "2560010",
    "end": "2565330"
  },
  {
    "text": "response either way you're getting files dropped into s3 in a non-blocking manner",
    "start": "2565330",
    "end": "2570460"
  },
  {
    "text": "so you don't have to wait to complete one instance to move to the next you can do all these things in parallel similarly as soon as files hit s3 as",
    "start": "2570460",
    "end": "2578470"
  },
  {
    "text": "soon as evidence files it has three these artifacts a cloud watch of s3 event rather is generated and can",
    "start": "2578470",
    "end": "2583570"
  },
  {
    "text": "trigger a lambda so then we trigger a dispatch lambda dispatch basically looks",
    "start": "2583570",
    "end": "2588730"
  },
  {
    "text": "at the new object the new object that's just landed in s3 it looks at its metadata it looks at its prefix and it",
    "start": "2588730",
    "end": "2594100"
  },
  {
    "text": "has logic in it that can then pick which parser to send that object to so the",
    "start": "2594100",
    "end": "2599320"
  },
  {
    "text": "simplest way to do it is you just you tag in the metadata you know parser with the name dispatch we'll look at what",
    "start": "2599320",
    "end": "2604990"
  },
  {
    "text": "land is it has available and we'll go ahead and invoke so say if there's just log file right now the syslog file hits evidence dispatch there's okay I see is",
    "start": "2604990",
    "end": "2611950"
  },
  {
    "text": "this tag to the syslog file I have a syslog parser and my lambda inventory so I'm going to invoke that pass it they",
    "start": "2611950",
    "end": "2617950"
  },
  {
    "text": "object and then that that lambda will spin up bring the file into memory process out all the events in our case",
    "start": "2617950",
    "end": "2623470"
  },
  {
    "text": "we process the mount into into JSON because we use another Google product called time sketch so it'll process out",
    "start": "2623470",
    "end": "2629890"
  },
  {
    "text": "all the relevant events put them into an elastic search and then your analyst can come in and timeline that with time scheduler you know look at it as a graph",
    "start": "2629890",
    "end": "2636700"
  },
  {
    "text": "and time sketch so these parsers I think are a very powerful concept and it's an",
    "start": "2636700",
    "end": "2643660"
  },
  {
    "text": "area that we're definitely looking to collaborate on I think you know individuals could write parsers for any number of things any sort of evidence",
    "start": "2643660",
    "end": "2649330"
  },
  {
    "text": "you could think about collecting so you know it could be syslog it could be other logs formats it could be configuration files",
    "start": "2649330",
    "end": "2654670"
  },
  {
    "text": "to be executables you could have a lambda that then sends your executable virustotal or send them to a detonation",
    "start": "2654670",
    "end": "2660820"
  },
  {
    "text": "service or spins up an instance to do some more investigation of what that is so the sky's limit on what these parcels",
    "start": "2660820",
    "end": "2666850"
  },
  {
    "text": "could do so we're working to take some of the work that's gone into plazo and logged a timeline which is an existing",
    "start": "2666850",
    "end": "2672610"
  },
  {
    "text": "for this tool and sort of repurpose that in a lambda environment because again that the advantage this gives us his",
    "start": "2672610",
    "end": "2678100"
  },
  {
    "text": "total scalability you can run as many of these in parallel as your Amazon account will allow essentially so you can",
    "start": "2678100",
    "end": "2683410"
  },
  {
    "text": "process large amounts of data much more quickly so if there's interest there I'd love to hear from folks again looking to",
    "start": "2683410",
    "end": "2688600"
  },
  {
    "text": "collaborate and you know not everyone needs to write the same syslog parser over and over again we could probably do this once as a community and have some",
    "start": "2688600",
    "end": "2695020"
  },
  {
    "text": "sort of open source solution around that so yeah at the end of the day this this",
    "start": "2695020",
    "end": "2700120"
  },
  {
    "text": "gets us into elasticsearch and and into an area where the the analyst can take a look at it so that's the talk and now we",
    "start": "2700120",
    "end": "2709210"
  },
  {
    "text": "can run through a quick demo to show some of that I know could I get your",
    "start": "2709210",
    "end": "2716260"
  },
  {
    "text": "password yeah right now yeah not far off",
    "start": "2716260",
    "end": "2729870"
  },
  {
    "text": "Thanks so let's see if Wi-Fi is up oops",
    "start": "2738450",
    "end": "2747539"
  },
  {
    "text": "this is a video demo I didn't have the stones to this life so so in this demo",
    "start": "2770480",
    "end": "2780210"
  },
  {
    "text": "we're we're actually on an instance in the forensics account we're not using the lambda function the great thing about or the terrible thing about",
    "start": "2780210",
    "end": "2785730"
  },
  {
    "text": "automation is that it's really boring to watch because it sort of happens but these are some of the scripts that we",
    "start": "2785730",
    "end": "2791370"
  },
  {
    "text": "wrote early on to sort of prove this out so here's the the snapshot script and",
    "start": "2791370",
    "end": "2796830"
  },
  {
    "text": "this might be too small but it's basically you know telling you that the various things can do you to find a case you find the instances and then it goes",
    "start": "2796830",
    "end": "2804480"
  },
  {
    "text": "ahead and conducts a snapshot so we're gonna we pick an instance this screen here is spinnaker it's one of the things",
    "start": "2804480",
    "end": "2810000"
  },
  {
    "text": "we use to manage our accounts so we're picking this instance ID in the test account we're gonna go ahead and snapshot that so I'm showing you here",
    "start": "2810000",
    "end": "2817590"
  },
  {
    "text": "that there are no snapshots in the management account you'll notice this is in the upper right there this is not the",
    "start": "2817590",
    "end": "2823170"
  },
  {
    "text": "test account this is the management test account so you'll see magically that these these snapshots will appear and",
    "start": "2823170",
    "end": "2832650"
  },
  {
    "text": "this is something that you got to be in the same the same region so here we go",
    "start": "2832650",
    "end": "2839790"
  },
  {
    "text": "we're not getting the help file this time we're gonna define this is case triple zero quad zero and you can give",
    "start": "2839790",
    "end": "2848760"
  },
  {
    "text": "it a list of instances you can actually give it a list of sort of any number of",
    "start": "2848760",
    "end": "2854580"
  },
  {
    "text": "identifiers and it will resolve those in two and two root volumes for you so again that's not super interesting but",
    "start": "2854580",
    "end": "2862290"
  },
  {
    "text": "basically you can see it taking those those parameters and then going making a",
    "start": "2862290",
    "end": "2867510"
  },
  {
    "text": "few boto calls to to do do the neatly",
    "start": "2867510",
    "end": "2873080"
  },
  {
    "text": "and so this is the net result it's found this is the root volume of that instance",
    "start": "2874040",
    "end": "2879090"
  },
  {
    "text": "and submitted it for a snapshot and we'll pivot back over here and we reload",
    "start": "2879090",
    "end": "2888390"
  },
  {
    "text": "there's the snapshot so snapshot for the case number by dexstar is what we call the the program has now appeared in the",
    "start": "2888390",
    "end": "2894210"
  },
  {
    "text": "management account so now we'll walk through manually what that lambda function does with ec2 launch",
    "start": "2894210",
    "end": "2899330"
  },
  {
    "text": "so basically back onto the same forensics instance running in that account showing you that there's two",
    "start": "2899330",
    "end": "2906320"
  },
  {
    "text": "drives mounted right now so there's the root drive and a secondary I'm gonna take this instance ID pop back over in a",
    "start": "2906320",
    "end": "2913100"
  },
  {
    "text": "console find that you see it's the cert ops box so it's important to make note",
    "start": "2913100",
    "end": "2919430"
  },
  {
    "text": "of the availability zone because not just region it's actually availability zone where these snapshots are where the",
    "start": "2919430",
    "end": "2925070"
  },
  {
    "text": "volume will be created so we create in the same zone as our instance of course",
    "start": "2925070",
    "end": "2930110"
  },
  {
    "text": "you know with the lambda sort of the flip you create the you launch the lamb to whatever zone you need it to to be in",
    "start": "2930110",
    "end": "2935810"
  },
  {
    "text": "and so boom volumes created",
    "start": "2935810",
    "end": "2940540"
  },
  {
    "text": "so now we're going to mount that volume to this instance so we go to the volume we find this volume we just created and",
    "start": "2945790",
    "end": "2955810"
  },
  {
    "text": "we attach it",
    "start": "2955810",
    "end": "2959280"
  },
  {
    "text": "so it's gonna mount up on the f-mount happens pretty quick you can see it it's",
    "start": "2972020",
    "end": "2980300"
  },
  {
    "text": "already in use if this is the stage step over here we'll do the fdisk again",
    "start": "2980300",
    "end": "2987680"
  },
  {
    "text": "you can see now we've got this new drive this is our target drive and we're gonna",
    "start": "2987680",
    "end": "2993530"
  },
  {
    "text": "run the collection script so one of the things that we're working on going forward is more of that differential",
    "start": "2993530",
    "end": "2999260"
  },
  {
    "text": "analysis that I talked about so in that case rather than rather than just mounting this drive and doing the",
    "start": "2999260",
    "end": "3006280"
  },
  {
    "text": "collect Python we would go and find the base ami snapshot so an ami is basically",
    "start": "3006280",
    "end": "3012700"
  },
  {
    "text": "a snapshot wrapped in some metadata so if you find the ami snapshot and you compare it to this target snapshot",
    "start": "3012700",
    "end": "3018610"
  },
  {
    "text": "that's where you get that differential analysis so we could in theory mount both of those up and do essentially a",
    "start": "3018610",
    "end": "3024190"
  },
  {
    "text": "hash deep across the known-good and then do hash deep in audit mode so here you see we mounted it listed out the file",
    "start": "3024190",
    "end": "3031330"
  },
  {
    "text": "and you can see this looks roughly like a root directory of a UNIX box that's what it is so it's about it up now we're",
    "start": "3031330",
    "end": "3039130"
  },
  {
    "text": "going to demo the the collection script",
    "start": "3039130",
    "end": "3042630"
  },
  {
    "text": "so the collection script operates in two different modes we're gonna write in target so you can either run it as a",
    "start": "3049300",
    "end": "3054530"
  },
  {
    "text": "live response scripting around on a target in which case you define the case number and it rips out the artifacts",
    "start": "3054530",
    "end": "3059690"
  },
  {
    "text": "from itself otherwise you can target a specific directory and it treats that as if it's the root directory so that's what we're doing here",
    "start": "3059690",
    "end": "3065120"
  },
  {
    "text": "run in target mode case number again and then you could define additional things",
    "start": "3065120",
    "end": "3072290"
  },
  {
    "text": "or you the amount point and then you could define which artifacts won't only do a subset you could define you know for paucity so this is in sort of quiet",
    "start": "3072290",
    "end": "3079850"
  },
  {
    "text": "mode because otherwise it shows a bunch of my account numbers I didn't want to share so but you can get an idea of time",
    "start": "3079850",
    "end": "3087950"
  },
  {
    "text": "from now so you see some errors here where it's it's skipping various things some of the yeah Mille artifacts aren't",
    "start": "3087950",
    "end": "3095450"
  },
  {
    "text": "actually files so it airs out on those but it's sort of it's copying things in s3 in the background it's threaded so",
    "start": "3095450",
    "end": "3102260"
  },
  {
    "text": "it's doing us in parallel so it runs through pretty quick some interesting nuances around how snapshots work so the",
    "start": "3102260",
    "end": "3108920"
  },
  {
    "text": "the first time you sort of traverse them they get moved into a hotter cache so you get much better performance the",
    "start": "3108920",
    "end": "3114500"
  },
  {
    "text": "second time you run things which doesn't really help particularly with that with forensics but um you know depending on",
    "start": "3114500",
    "end": "3119990"
  },
  {
    "text": "the various states behind the scenes you can you can improve performance with some tweaks so here you'll see this",
    "start": "3119990",
    "end": "3128030"
  },
  {
    "text": "again is a screenshot because I had to skate some things but so we've taken a I think it was a ten or a twenty gigabyte",
    "start": "3128030",
    "end": "3134570"
  },
  {
    "text": "snapshot and we got it down to about three Meg's worth of files 501 total objects so it's a pretty good reduction",
    "start": "3134570",
    "end": "3141080"
  },
  {
    "text": "right if if you believe that these files are the relevant forensic artifacts then you've just knocked that down to a much",
    "start": "3141080",
    "end": "3147050"
  },
  {
    "text": "more manageable set of things to look through so yeah overall that's that's the stuff that we're working on as I",
    "start": "3147050",
    "end": "3154340"
  },
  {
    "text": "said investing more in better parsers investing more in differential analysis",
    "start": "3154340",
    "end": "3159440"
  },
  {
    "text": "to try and pop out that adversary activity from our from our our fleet so",
    "start": "3159440",
    "end": "3164900"
  },
  {
    "text": "Romano if you had anything else so we could take some questions if folks might jump on the mic yeah",
    "start": "3164900",
    "end": "3170740"
  },
  {
    "text": "you're back to one yep dad's much better so the only thing",
    "start": "3184500",
    "end": "3193020"
  },
  {
    "text": "couple of things that I wanted to share with you very briefly the first one is I",
    "start": "3193020",
    "end": "3198260"
  },
  {
    "text": "skipped through it very quickly but the whole code for the cloud watch events",
    "start": "3198260",
    "end": "3204630"
  },
  {
    "text": "orchestration together with lambda and essentially the whole thing that I demoed to you it's it's open sourced",
    "start": "3204630",
    "end": "3211530"
  },
  {
    "text": "essentially so it's under the AWS labs in that repo automated governance simple so if you guys touched it have questions",
    "start": "3211530",
    "end": "3219829"
  },
  {
    "text": "evolve it there's a lot to improve you know to do reach out and lastly lastly",
    "start": "3219829",
    "end": "3229220"
  },
  {
    "text": "just a few more cameras lastly you know more than demos and talking about it I",
    "start": "3229220",
    "end": "3238380"
  },
  {
    "text": "know that you know both great ways of sharing information and wood demos even better but even better than all of that",
    "start": "3238380",
    "end": "3244920"
  },
  {
    "text": "is when you do things by yourself you know you get first tens experience so though expansions we are running at the",
    "start": "3244920",
    "end": "3251010"
  },
  {
    "text": "park the security gem and the gem lounge that is an opportunity for you to try a",
    "start": "3251010",
    "end": "3256050"
  },
  {
    "text": "number of security use cases we also have some special challenges with",
    "start": "3256050",
    "end": "3261240"
  },
  {
    "text": "Netflix you get some sweet wine with it we also have Mozilla as well and a",
    "start": "3261240",
    "end": "3268589"
  },
  {
    "text": "couple other interesting ones is last night we announced a new security product called guard duty so that could",
    "start": "3268589",
    "end": "3274920"
  },
  {
    "text": "be your first opportunity to experiment with guard duty as well we provide all the accounts and infrastructure but you",
    "start": "3274920",
    "end": "3281310"
  },
  {
    "text": "do need to bring a laptop that's the only thing we don't have right with all that being said",
    "start": "3281310",
    "end": "3287190"
  },
  {
    "text": "big thanks to Alex thank you and thank you all for your time we'll be around if you have any questions thank so much",
    "start": "3287190",
    "end": "3292830"
  },
  {
    "text": "[Applause]",
    "start": "3292830",
    "end": "3296190"
  }
]