[
  {
    "start": "0",
    "end": "62000"
  },
  {
    "text": "hello twitch and everybody out there at glad to see back for another episode of happy little api's I have with me again",
    "start": "60",
    "end": "8670"
  },
  {
    "text": "this week the ever large beard he has the better beard that's all I got kind",
    "start": "8670",
    "end": "14219"
  },
  {
    "text": "of last week but over here to my left is Bob Kenny Bob does a little about yourself yeah so for anybody who didn't",
    "start": "14219",
    "end": "22560"
  },
  {
    "text": "hear me do this peel the last time so I'm a scene developer on the API gateway team good with a company for about seven",
    "start": "22560",
    "end": "29789"
  },
  {
    "text": "years specifically on API gateway for about three and a half thanks Allah if",
    "start": "29789",
    "end": "35219"
  },
  {
    "text": "you're new to this stream what we're talking about is a gateway our API is on AWS and the fact that a big eyes should",
    "start": "35219",
    "end": "42420"
  },
  {
    "text": "be calming you shouldn't stress you out so we're trying to tell you all of the way Peggy we can do and how to build you",
    "start": "42420",
    "end": "48510"
  },
  {
    "text": "know best practices for api's on AWS and today we're going to be talking about",
    "start": "48510",
    "end": "53750"
  },
  {
    "text": "securing the front door about you know what it takes to you to lock it down let me go ahead and bring up our shooter",
    "start": "53750",
    "end": "59670"
  },
  {
    "text": "here all right as you can see this is",
    "start": "59670",
    "end": "65158"
  },
  {
    "text": "Billy happy little api's that's my beautiful bug right there today's episode is called one side",
    "start": "65159",
    "end": "73400"
  },
  {
    "text": "today's episode is called building a penal API shut the front door i given",
    "start": "73400",
    "end": "78810"
  },
  {
    "text": "bob a knife and we're gonna jump right into an above last week we built a very",
    "start": "78810",
    "end": "83880"
  },
  {
    "text": "basic kind of kind of stemming up with georgia bill to the week not last week from last episode what Georgia built the",
    "start": "83880",
    "end": "90030"
  },
  {
    "text": "episode before you know we built on weather happened just kinda remind y'all what we're looking at this is what we've",
    "start": "90030",
    "end": "95400"
  },
  {
    "start": "94000",
    "end": "123000"
  },
  {
    "text": "built last time we had a simple client really Arkansas the client was just a webpage doing dick calls and then we had",
    "start": "95400",
    "end": "103200"
  },
  {
    "text": "we were using the API gateway with a lambda function and a dynamo database filled with weather data we wrapped",
    "start": "103200",
    "end": "110130"
  },
  {
    "text": "around that last week it was on cloud watching Amazon x-ray and we talked through debugging",
    "start": "110130",
    "end": "115740"
  },
  {
    "text": "and figuring out bottlenecks and such so greatly this week we're going to talk about what it",
    "start": "115740",
    "end": "122759"
  },
  {
    "text": "looks like to secure that weather and kind of the idea we're going to be talking about today and some some",
    "start": "122759",
    "end": "128850"
  },
  {
    "start": "123000",
    "end": "170000"
  },
  {
    "text": "concepts what they're talking about is what does it look like to secure the client who's making the call to the to",
    "start": "128850",
    "end": "135120"
  },
  {
    "text": "APN gateway what does it look like to secure maybe an external service setting",
    "start": "135120",
    "end": "140430"
  },
  {
    "text": "even an another account or somewhere else who's who wants to push updates to API gateway what about aw swath or pores",
    "start": "140430",
    "end": "149990"
  },
  {
    "text": "one of the things that we see a lot of times are is is developers just banging",
    "start": "149990",
    "end": "155460"
  },
  {
    "text": "their head against the wall when it comes to Korres I mean decks that can be they can be tough so we'll talk a little",
    "start": "155460",
    "end": "160950"
  },
  {
    "text": "bit about that as well so let's kind of break this down but jump in any time but as we're looking at",
    "start": "160950",
    "end": "167970"
  },
  {
    "text": "security one of the first thing when talk about our authorizers and when the",
    "start": "167970",
    "end": "174150"
  },
  {
    "start": "170000",
    "end": "205000"
  },
  {
    "text": "left arises there's really kind of three kinds we're going to look at today and specifically use two of them the first",
    "start": "174150",
    "end": "179700"
  },
  {
    "text": "one is a Cognito authorized and this is built where to allow cognitively Amazon",
    "start": "179700",
    "end": "185640"
  },
  {
    "text": "gateway you can't get went to Lincoln to Cognito to get authorization from Cognos",
    "start": "185640",
    "end": "191250"
  },
  {
    "text": "so a customer or a client can authenticate through Amazon Cognito and then they can authorize there it was on",
    "start": "191250",
    "end": "199020"
  },
  {
    "text": "API gateway using the cogito authorize the second thing we're going to look at",
    "start": "199020",
    "end": "204380"
  },
  {
    "text": "is this idea of an external account we're gonna kind of mock this up to show",
    "start": "204380",
    "end": "209730"
  },
  {
    "start": "205000",
    "end": "244000"
  },
  {
    "text": "you what we're looking at in using and I have authorizer it's just we could across the town",
    "start": "209730",
    "end": "216660"
  },
  {
    "text": "authorization of your resource policies so you get this idea and maybe the resource that we want to talk to her",
    "start": "216660",
    "end": "222600"
  },
  {
    "text": "again gateway is not inside of our A to B as cloud maybe it's in another account or maybe it's off somewhere else so what",
    "start": "222600",
    "end": "229770"
  },
  {
    "text": "did I am authorizer and using resource policies we can kind of list I have BOTS gonna go in more indented that I can't",
    "start": "229770",
    "end": "237239"
  },
  {
    "text": "to talk about it Bob gets to show it so he he's the smart one in the group the",
    "start": "237239",
    "end": "243180"
  },
  {
    "text": "next thing we're kind of show here we're not gonna show an example this but to kind of get an idea is what we call a",
    "start": "243180",
    "end": "249510"
  },
  {
    "start": "244000",
    "end": "295000"
  },
  {
    "text": "custom authorizer and this kind of takes the idea of we can have a lambda within",
    "start": "249510",
    "end": "255660"
  },
  {
    "text": "our account that the API gateway - that can really do kind of any number",
    "start": "255660",
    "end": "260790"
  },
  {
    "text": "of things it's custom logic and so you can reach out to your data center or maybe an external web based service or",
    "start": "260790",
    "end": "268830"
  },
  {
    "text": "even you know custom-made to be as host services host to the inside your account really it's not up to you however you do",
    "start": "268830",
    "end": "275760"
  },
  {
    "text": "that you can respond with yes they're authorized or no they're not based on the custom logic that you that you have",
    "start": "275760",
    "end": "281340"
  },
  {
    "text": "so all three of these authorizers are are things that you can build right into API gateway and you never know second",
    "start": "281340",
    "end": "290400"
  },
  {
    "text": "Eric yeah jump in yeah so I just kind of wanted to make one sort of delineation here so the the first so the first two",
    "start": "290400",
    "end": "297390"
  },
  {
    "text": "that we demonstrated you as a consumer a customer of API gateway wouldn't have to",
    "start": "297390",
    "end": "302400"
  },
  {
    "text": "write any code it's mostly just configuration of the authorization and configuration so for the cogito",
    "start": "302400",
    "end": "308460"
  },
  {
    "text": "authorizer setting up the user pool for authentication and then configuring it in the the custom authorizer you have",
    "start": "308460",
    "end": "316140"
  },
  {
    "text": "far more flexibility to sort of customize how you handle the authentication and as Eric was",
    "start": "316140",
    "end": "321990"
  },
  {
    "text": "mentioning you can integrate it with sort of well any number of any number of third-party services to kind of return",
    "start": "321990",
    "end": "327570"
  },
  {
    "text": "back the response and much like a lot of the integrations with lambda there is a",
    "start": "327570",
    "end": "333090"
  },
  {
    "text": "sort of a well known protocol where the your your lender will receive an event",
    "start": "333090",
    "end": "338910"
  },
  {
    "text": "which will describe the the context for the request and then you reply back with a response which includes any identity",
    "start": "338910",
    "end": "345480"
  },
  {
    "text": "information you might want to include as part of the authentication result as well as a policy that describes the",
    "start": "345480",
    "end": "350790"
  },
  {
    "text": "actions inside of that API that the the user can actually perform jakszyk yeah",
    "start": "350790",
    "end": "357600"
  },
  {
    "text": "thanks for clarifying that so there's so so what you're saying is there's the simple format the divs didn't come to",
    "start": "357600",
    "end": "362760"
  },
  {
    "text": "you and there's seven format that you need to respond in right yeah exactly and that would end that's documented yep",
    "start": "362760",
    "end": "369450"
  },
  {
    "text": "okay all right so the next thing that we're going to kind of discuss a little bit is is a two Bs bath which is a web",
    "start": "369450",
    "end": "376770"
  },
  {
    "start": "373000",
    "end": "399000"
  },
  {
    "text": "application firewall and this is great for the blacklisting of whitelisting Eyed Peas you can do IP range you just",
    "start": "376770",
    "end": "383970"
  },
  {
    "text": "want to keep put in there and Bob's gonna walk to the console on this kind of show you",
    "start": "383970",
    "end": "389060"
  },
  {
    "text": "what this week select so this is kind of a another another good way of protecting the front door of your API gateway and",
    "start": "389060",
    "end": "399050"
  },
  {
    "start": "399000",
    "end": "589000"
  },
  {
    "text": "then the next thing and the last thing we're talk about before we get into to demoing his course and again",
    "start": "399050",
    "end": "404980"
  },
  {
    "text": "cross-origin resource sharing man if you if your developer when you're working with local environments that you're",
    "start": "404980",
    "end": "411320"
  },
  {
    "text": "working with you know product product production environments a course is",
    "start": "411320",
    "end": "416450"
  },
  {
    "text": "tough amazon gateway takes a lot of that and an app starts a wait for you and",
    "start": "416450",
    "end": "421520"
  },
  {
    "text": "allows you to but there's still some some things that you need to do and so but you can help us kind of draw the",
    "start": "421520",
    "end": "427430"
  },
  {
    "text": "line there right yeah so I'd like to describe this as part of our sort of",
    "start": "427430",
    "end": "432440"
  },
  {
    "text": "shared responsibility model where there's certain things that we can do for you and then there's other things",
    "start": "432440",
    "end": "437600"
  },
  {
    "text": "that you as the customer running on top of meet the AKP API gateway would be responsible for so the first thing is is",
    "start": "437600",
    "end": "445790"
  },
  {
    "text": "that if the if the error result is is something that happens inside of API gateway all of that will be handled via",
    "start": "445790",
    "end": "452720"
  },
  {
    "text": "what we call gateway responses and so you would add your custom course headers to your gateway responses to actually",
    "start": "452720",
    "end": "458870"
  },
  {
    "text": "define the the the sort of the error handling there then if you use Sam or",
    "start": "458870",
    "end": "465470"
  },
  {
    "text": "the one-click cours experience from the console we will also create a pre-flight",
    "start": "465470",
    "end": "470690"
  },
  {
    "text": "options request which will be a mock request and so that again API gateway will sort of manage all of that logic",
    "start": "470690",
    "end": "477020"
  },
  {
    "text": "for you you just have to configure it and you're just again specifying the the headers that you're wanting to whitelist",
    "start": "477020",
    "end": "483290"
  },
  {
    "text": "and the methods you and origins you want to waitlist now where it gets tricky is is if you start using the lambda proxy",
    "start": "483290",
    "end": "490160"
  },
  {
    "text": "integration or an HTTP proxy integration where you're calling back to the backend and this is where you can end up in a",
    "start": "490160",
    "end": "496790"
  },
  {
    "text": "situation where you you you yourself have to return back the course headers from your integration and so we'll have",
    "start": "496790",
    "end": "503420"
  },
  {
    "text": "a demonstration of that in our lambda function a little bit later on but that's so when your lambda function is",
    "start": "503420",
    "end": "509780"
  },
  {
    "text": "called and you're using the lander proxy API a gateway doesn't have any ability to override the headers that are",
    "start": "509780",
    "end": "514880"
  },
  {
    "text": "returning back so it is your responsibility as the API owner to make sure that those course headers are",
    "start": "514880",
    "end": "520250"
  },
  {
    "text": "and the same thing is true of the HP proxy but if you're using the non proxy methods you're using the mapping",
    "start": "520250",
    "end": "526610"
  },
  {
    "text": "templates and header definitions you can actually control that inside of the API gateway if that's an option you want to",
    "start": "526610",
    "end": "532399"
  },
  {
    "text": "pursue yeah and I don't point out if if you're here these terms proxy and",
    "start": "532399",
    "end": "538699"
  },
  {
    "text": "integration you're going you kind of scratch your head trying to figure it out I would go back to episode two of",
    "start": "538699",
    "end": "544519"
  },
  {
    "text": "our happy little ap is where we actually talked about what is the difference between API gateways proxy and",
    "start": "544519",
    "end": "550910"
  },
  {
    "text": "integration and specifically for this one a proxy request has made all API",
    "start": "550910",
    "end": "556879"
  },
  {
    "text": "gateway does is wrap some contextual data on the request and send it through to the backend and in the response it",
    "start": "556879",
    "end": "563750"
  },
  {
    "text": "doesn't do anything to the response so that's why that's why you have to do the cores headers because it will do the",
    "start": "563750",
    "end": "570980"
  },
  {
    "text": "neck in and as Bob said when it's an integration then you have a lot more control if you can't get weight level",
    "start": "570980",
    "end": "576860"
  },
  {
    "text": "but if if that's just easy you go back to that episode that will explain a lot so all right well let's you know as much",
    "start": "576860",
    "end": "585019"
  },
  {
    "text": "as people love to hear us talk you probably want to see some code to you so going back to our final idea here",
    "start": "585019",
    "end": "591339"
  },
  {
    "text": "looking at this there's a big difference between what we built last episode which",
    "start": "591339",
    "end": "597050"
  },
  {
    "text": "was an unsecured application was just an application that you you go out to and it works whereas now we want to make",
    "start": "597050",
    "end": "602899"
  },
  {
    "text": "sure people are logged in and in this particular application and we'll kind of",
    "start": "602899",
    "end": "608089"
  },
  {
    "text": "find this later on as well but we're gonna have two options you can either hit it non logged in so on an open end",
    "start": "608089",
    "end": "615410"
  },
  {
    "text": "point for our for our clients to hit where they can just get data back and you haven't authenticated login that our",
    "start": "615410",
    "end": "623629"
  },
  {
    "text": "clients can hit and get weather and then we also have an endpoint that our service is going to hit that Bob's gonna",
    "start": "623629",
    "end": "630379"
  },
  {
    "text": "walk you through so we looked at three different types of endpoints three different type of authentication so Bob",
    "start": "630379",
    "end": "637370"
  },
  {
    "text": "you ready yeah sure I'm gonna go ahead and take over here all right I'll turn it over to you okay so well",
    "start": "637370",
    "end": "646399"
  },
  {
    "start": "641000",
    "end": "701000"
  },
  {
    "text": "first we'll just start off in the API gaming console and we'll give a kind of a brief overview of here",
    "start": "646399",
    "end": "652870"
  },
  {
    "text": "the methods that we actually have configured and I'll go through the Sam template as well but we have here at our",
    "start": "652870",
    "end": "660820"
  },
  {
    "text": "top our original get method which was basically the method that we had configured on in the previous episode",
    "start": "660820",
    "end": "667480"
  },
  {
    "text": "which was just a lambda proxy I'm going to our lambda function which was fetching the data directly out of out of",
    "start": "667480",
    "end": "673990"
  },
  {
    "text": "DynamoDB and then presenting the JSON response on what you can see here so this is again our nan our non",
    "start": "673990",
    "end": "681400"
  },
  {
    "text": "authenticated endpoint where I'm just going for a specific zip code and then",
    "start": "681400",
    "end": "686529"
  },
  {
    "text": "returning back a JSON response when I when I get a valid valid request",
    "start": "686529",
    "end": "692490"
  },
  {
    "text": "additionally we have so that again that one is open so there's no authentication on it whatsoever then we have our",
    "start": "692490",
    "end": "699820"
  },
  {
    "text": "premium API which is going to be configured with the kognito user pools authentication so this ver will require",
    "start": "699820",
    "end": "707110"
  },
  {
    "start": "701000",
    "end": "773000"
  },
  {
    "text": "that a a kognito user is logged into our api are linked user pool in order for",
    "start": "707110",
    "end": "715570"
  },
  {
    "text": "them to actually see the data so I can actually go over here to my browser and try to actually hit the same URL with",
    "start": "715570",
    "end": "722920"
  },
  {
    "text": "premium and what I should see is an unauthorized so this is API gateway",
    "start": "722920",
    "end": "728860"
  },
  {
    "text": "saying like you've not authenticated and because I'm just doing it in a bare browser I don't have any cookie or",
    "start": "728860",
    "end": "735070"
  },
  {
    "text": "session associated with a Covino user so there's no authentication to be had so",
    "start": "735070",
    "end": "740500"
  },
  {
    "text": "that's that that's our premium and then finally we have our admin API which only has a put method so this is a this is",
    "start": "740500",
    "end": "746680"
  },
  {
    "text": "going to be our think about it as like a we have another service that's running somewhere that's actually running our",
    "start": "746680",
    "end": "752980"
  },
  {
    "text": "media logical analysis to actually get our forecasts and is pumping data into",
    "start": "752980",
    "end": "758440"
  },
  {
    "text": "our into our back-end and we're exposing an API for that system to pump our data",
    "start": "758440",
    "end": "763780"
  },
  {
    "text": "into our user application so it has a nice separation of concerns there so",
    "start": "763780",
    "end": "769810"
  },
  {
    "text": "let's take a look at the front-end API that we built and hopefully we'll have some time to actually talk about how we",
    "start": "769810",
    "end": "775720"
  },
  {
    "start": "773000",
    "end": "869000"
  },
  {
    "text": "actually built this front-end but we have a here a really simple front-end where I'm",
    "start": "775720",
    "end": "781059"
  },
  {
    "text": "logged in right now and I'm going to get data I chose this this particular zip",
    "start": "781059",
    "end": "786159"
  },
  {
    "text": "code this happens to me my hometown I'm so high to anybody who might be in for a Merrimack New Hampshire and and so I can",
    "start": "786159",
    "end": "792909"
  },
  {
    "text": "see here sort of the current the current conditions in Merrimack as according to",
    "start": "792909",
    "end": "798249"
  },
  {
    "text": "my database and so this is all just using the public API but it has a nice",
    "start": "798249",
    "end": "803469"
  },
  {
    "text": "front-end it displays a picture so in the but in in the application I we've",
    "start": "803469",
    "end": "809139"
  },
  {
    "text": "got JavaScript code that's actually just calling out to the public endpoint then I can sign in and I've already gotten an",
    "start": "809139",
    "end": "816579"
  },
  {
    "text": "authenticated session so I'll just go ahead and pull that in now that I won't I've authenticated if I go ahead and",
    "start": "816579",
    "end": "821769"
  },
  {
    "text": "pull that same data again or that same zip code again I get the premium data so",
    "start": "821769",
    "end": "828099"
  },
  {
    "text": "I'm actually getting the forecast not only just the current conditions but the premium forecast content that we've",
    "start": "828099",
    "end": "833289"
  },
  {
    "text": "decided to lock behind authentication and so I can then log back out research",
    "start": "833289",
    "end": "840009"
  },
  {
    "text": "again go back to only getting the unauthenticated data and as we demonstrate it inside of our other",
    "start": "840009",
    "end": "845499"
  },
  {
    "text": "browser tab I can't actually get at this data unless I'm actually authenticated with Cognito",
    "start": "845499",
    "end": "851019"
  },
  {
    "text": "and I'll reserve some hopefully we'll have some time and air can go through the kognito configuration that we had",
    "start": "851019",
    "end": "856989"
  },
  {
    "text": "for that set up and as well as the client so now what I wanted to touch on",
    "start": "856989",
    "end": "862119"
  },
  {
    "text": "is well let's jump into the Sam and take a look at what that looks like because there's some interesting things here a",
    "start": "862119",
    "end": "868659"
  },
  {
    "text": "little bit related to making this stuff work with with with cores and as well as",
    "start": "868659",
    "end": "874659"
  },
  {
    "start": "869000",
    "end": "936000"
  },
  {
    "text": "with with JavaScript API so we talked about the short the shared",
    "start": "874659",
    "end": "880599"
  },
  {
    "text": "responsibility model and the the concept that the lambda proxy is going to be",
    "start": "880599",
    "end": "886449"
  },
  {
    "text": "responsible for actually we're turning back the appropriate headers as part of the response I'm into the seat here that",
    "start": "886449",
    "end": "893169"
  },
  {
    "text": "like at my sort of wrapper function that I have inside of my lambda function that wraps all of my responses in JSON in the",
    "start": "893169",
    "end": "900219"
  },
  {
    "text": "JSON proxy response always includes this this access control allow origin which",
    "start": "900219",
    "end": "906159"
  },
  {
    "text": "is sort of the the absolute top level course header that you might be interested in now I've obviously just done star here",
    "start": "906159",
    "end": "913420"
  },
  {
    "text": "I'm still doing development we haven't quite gotten to sort of lack production maybe when I want to lock that down I",
    "start": "913420",
    "end": "918880"
  },
  {
    "text": "can actually put in the correct domain for my actual hosted application but at",
    "start": "918880",
    "end": "924520"
  },
  {
    "text": "least for right now I can just put in star and kind of work through my development environment so that's the",
    "start": "924520",
    "end": "930940"
  },
  {
    "text": "core side on on the lambda but then if I switch over to my Sam template Sam has a",
    "start": "930940",
    "end": "937060"
  },
  {
    "start": "936000",
    "end": "1326000"
  },
  {
    "text": "couple of nice things that make this a little bit easier for some for some classes of problems where I define my",
    "start": "937060",
    "end": "944020"
  },
  {
    "text": "server list API I can actually have this great little property called cores and I can actually define the allow headers as",
    "start": "944020",
    "end": "952060"
  },
  {
    "text": "well as the allow origin for the pre-flight request so Sam will actually",
    "start": "952060",
    "end": "957280"
  },
  {
    "text": "generate those pre-flight options requests for me when we push push the",
    "start": "957280",
    "end": "962560"
  },
  {
    "text": "updates so if I switch back quickly onto the console you can see these option requests that are actually the",
    "start": "962560",
    "end": "969010"
  },
  {
    "text": "things that are being generated and if I go to the integration response and fold",
    "start": "969010",
    "end": "975940"
  },
  {
    "text": "down and go to the header mappings you can see these headers that are getting generated for me on the fly so I have my",
    "start": "975940",
    "end": "982960"
  },
  {
    "text": "access allow control headers but try to find in my Sam template my access allowed control origin which was also",
    "start": "982960",
    "end": "988450"
  },
  {
    "text": "defined in my template and then Sam is actually doing the methods uh so the allowed methods it's actually",
    "start": "988450",
    "end": "994210"
  },
  {
    "text": "determining that based on the methods that are actually defined in my Sam template so if I had that's right sure",
    "start": "994210",
    "end": "1001380"
  },
  {
    "text": "absolutely so if you had a question I'd like to get your take on this the question was does anybody not use the quotes start quote",
    "start": "1001380",
    "end": "1011070"
  },
  {
    "text": "sign I always forget the quote things the quotes start quotes what do you think some people use quote to the star",
    "start": "1011070",
    "end": "1017100"
  },
  {
    "text": "or should we hard code or pass in specific domain names what's your thought on that um so I mean the it kind",
    "start": "1017100",
    "end": "1025260"
  },
  {
    "text": "of depends on whether or not you're building a multi-tenant application so unfortunately the core spec is not really great about sort of allowing",
    "start": "1025260",
    "end": "1031410"
  },
  {
    "text": "multiple domains so it's really kind of one domain or star so if you're hosting",
    "start": "1031410",
    "end": "1037050"
  },
  {
    "text": "a multi domain application then star is kind of like the only option because there's not really great methods for",
    "start": "1037050",
    "end": "1043020"
  },
  {
    "text": "sort of programmatically generating that at least today an API gate",
    "start": "1043020",
    "end": "1048680"
  },
  {
    "text": "that's sort of my answer so it like if you're if you're generating something that's being used in a multi domain",
    "start": "1048680",
    "end": "1054540"
  },
  {
    "text": "multi hosted in bar multi domain hosted environment multi tenant then star is",
    "start": "1054540",
    "end": "1059670"
  },
  {
    "text": "probably unfortunately what you're probably going to end up using but if you're building purpose bill at api's",
    "start": "1059670",
    "end": "1066450"
  },
  {
    "text": "with only one one tenant one domain then absolutely makes sense to actually our",
    "start": "1066450",
    "end": "1072450"
  },
  {
    "text": "code that domain because that's sort of the whole point of cours in the first place okay cool",
    "start": "1072450",
    "end": "1078180"
  },
  {
    "text": "thank you okay so yeah so we're talking about the sort of the the stuff that Sam",
    "start": "1078180",
    "end": "1085350"
  },
  {
    "text": "kind of gives you sort of out of the box and so so yeah so again this gets",
    "start": "1085350",
    "end": "1090690"
  },
  {
    "text": "defined at the API level and so all of my methods were my events that are tied to my server list function inside of Sam",
    "start": "1090690",
    "end": "1097950"
  },
  {
    "text": "basically inherit all of this configuration so when I'm actually defining my methods I actually can just",
    "start": "1097950",
    "end": "1104340"
  },
  {
    "text": "I don't even have to worry about it it set the global it set at the API level all of the all of the methods underneath",
    "start": "1104340",
    "end": "1110550"
  },
  {
    "text": "underneath that inherit all of that configuration and so you see here I have",
    "start": "1110550",
    "end": "1116760"
  },
  {
    "text": "my get leather which is my non premium which is at the root and a get method I have my admin API which only supports a",
    "start": "1116760",
    "end": "1124020"
  },
  {
    "text": "put and uses the AWS I am off and then I have my premium path which is again as",
    "start": "1124020",
    "end": "1130020"
  },
  {
    "text": "well but then it uses the premium user authorizer which is configured down here with our",
    "start": "1130020",
    "end": "1136770"
  },
  {
    "text": "user pool that is also created again inside of this Sam temple okay something",
    "start": "1136770",
    "end": "1142230"
  },
  {
    "text": "are up to there again can you go back into the function so an interesting thing to note here you're using the same",
    "start": "1142230",
    "end": "1147840"
  },
  {
    "text": "code base for all three of these inputs right that is correct okay so you have an HLA is the folder that you do the",
    "start": "1147840",
    "end": "1154620"
  },
  {
    "text": "endpoints on you can you give them the events there so something the nice much of what I see is these people set up you",
    "start": "1154620",
    "end": "1159720"
  },
  {
    "text": "know different different actual folks and inputs and their template whereas you can have multiple events calling the",
    "start": "1159720",
    "end": "1165750"
  },
  {
    "text": "same codebase just changing the path changing how you want them to trigger so",
    "start": "1165750",
    "end": "1171000"
  },
  {
    "text": "good good same structure here and something I wanted to call out yes I mean it kind of like there's obviously",
    "start": "1171000",
    "end": "1176670"
  },
  {
    "text": "gonna be a tipping point where like there's might be too much code in your lambda function and you might want to have some separation of concerns at",
    "start": "1176670",
    "end": "1183780"
  },
  {
    "text": "least for what I was trying to do here was very it was a sort of lightweight and simple particularly the premium and the non",
    "start": "1183780",
    "end": "1190050"
  },
  {
    "text": "premium the code is basically almost the same I can I can literally kind of go over here so the only real difference",
    "start": "1190050",
    "end": "1196560"
  },
  {
    "text": "between the premium and not premium is is the fields that were returning back",
    "start": "1196560",
    "end": "1201840"
  },
  {
    "text": "from dynamo so that it didn't seem like that was a good place to kind of have a separation of a separation of concerns",
    "start": "1201840",
    "end": "1209790"
  },
  {
    "text": "but certainly like the admin API I could see an argument for having like a dedicated lambda function for if you",
    "start": "1209790",
    "end": "1216300"
  },
  {
    "text": "wanted to do that I did I chose not to do that here just so that I could reuse a little bit of code inside of the same",
    "start": "1216300",
    "end": "1222840"
  },
  {
    "text": "lambda function that makes sense Thanks yeah no worries yeah so again some more configuration",
    "start": "1222840",
    "end": "1230550"
  },
  {
    "text": "here for the Cognito user pool so this is again I've kind of punted a little",
    "start": "1230550",
    "end": "1235620"
  },
  {
    "text": "bit here and and sort of done an auto auto confirm so I'm not doing any",
    "start": "1235620",
    "end": "1241260"
  },
  {
    "text": "workflow for confirmation of user where I try to happen click a link and validate the validate their user it's",
    "start": "1241260",
    "end": "1248340"
  },
  {
    "text": "literally just if they sign up they get an accountant immediately they can start using it and that's pretty much it on",
    "start": "1248340",
    "end": "1255750"
  },
  {
    "text": "the Sam side and take a quick look on the rest of the the rest of the the rest",
    "start": "1255750",
    "end": "1261540"
  },
  {
    "text": "of the lambda function so again I'm using the same function here that I were",
    "start": "1261540",
    "end": "1268440"
  },
  {
    "text": "an extension of the same function that I used in the previous episode so I still have all of my x-ray x-ray logging",
    "start": "1268440",
    "end": "1275760"
  },
  {
    "text": "enabled for my function and so I'll be getting traces on that assuming I set my",
    "start": "1275760",
    "end": "1281850"
  },
  {
    "text": "sampling rate high enough and again my guests are basically the same except",
    "start": "1281850",
    "end": "1287820"
  },
  {
    "text": "it's whether or not it's premium or not and that's gonna be based on information and from the request and then my put",
    "start": "1287820",
    "end": "1293910"
  },
  {
    "text": "method is just going to take whatever gets put in and then type that into you type that directly into my directly into",
    "start": "1293910",
    "end": "1301950"
  },
  {
    "text": "my table using using boto I'm not doing any sanitization here obviously that there would be some",
    "start": "1301950",
    "end": "1308760"
  },
  {
    "text": "additional work might need to be done in order to sort of more get this ready for sort of a",
    "start": "1308760",
    "end": "1314510"
  },
  {
    "text": "production rollout but at least burger for our intents and purposes gives us a good idea of of what we might be looking",
    "start": "1314510",
    "end": "1321350"
  },
  {
    "text": "at so yeah so now what I'd like to do is is talk about how we actually set up",
    "start": "1321350",
    "end": "1326539"
  },
  {
    "text": "that that admin API so that that separation of concerns where we have a separate account that's generating data",
    "start": "1326539",
    "end": "1332870"
  },
  {
    "text": "and then pushing it into it pushing it into our API gateway so when you enable",
    "start": "1332870",
    "end": "1337970"
  },
  {
    "text": "AWS I am by default only credentials in the account that actually own the API",
    "start": "1337970",
    "end": "1343520"
  },
  {
    "text": "and actually call consign request and send to that API so if I have another",
    "start": "1343520",
    "end": "1349640"
  },
  {
    "text": "account and I try to execute the try to execute the assigned request with",
    "start": "1349640",
    "end": "1356240"
  },
  {
    "text": "credentials from another account I get this if this very helpful error hopefully people can read it on the",
    "start": "1356240",
    "end": "1361760"
  },
  {
    "text": "stream see if I can zoom in a little bit here so you can see here a helpful error",
    "start": "1361760",
    "end": "1368690"
  },
  {
    "text": "message that's saying that the the user does not the user than I'm using which is from a different account than that",
    "start": "1368690",
    "end": "1374450"
  },
  {
    "text": "owns my API doesn't have permission to access this resource and again this is",
    "start": "1374450",
    "end": "1379820"
  },
  {
    "text": "by default unless you're using credentials inside of the account they're not going to have they're not",
    "start": "1379820",
    "end": "1385520"
  },
  {
    "text": "going to be able to execute assigned AWS requests but recently we launched what",
    "start": "1385520",
    "end": "1393350"
  },
  {
    "text": "we call resource policies for API gateway and so I can actually go over to my API I can click on this resource",
    "start": "1393350",
    "end": "1399679"
  },
  {
    "start": "1399000",
    "end": "1421000"
  },
  {
    "text": "policy tab and then I can attach a policy to my API and then deploy it so",
    "start": "1399679",
    "end": "1406100"
  },
  {
    "text": "this is an operation that does require deployment so if you modify the policy here it does need to be deployed before",
    "start": "1406100",
    "end": "1412340"
  },
  {
    "text": "it will become effective on the actual API and the the language that you use",
    "start": "1412340",
    "end": "1418340"
  },
  {
    "text": "here is is is basically the i.m policy language and you basically will define",
    "start": "1418340",
    "end": "1423620"
  },
  {
    "start": "1421000",
    "end": "1446000"
  },
  {
    "text": "rules that you can set based on either a signed in user or a particular path or",
    "start": "1423620",
    "end": "1430840"
  },
  {
    "text": "parameters in the the request basically anything that you could do from an iamb",
    "start": "1430840",
    "end": "1436010"
  },
  {
    "text": "policy standpoint you can define rules for the resource policy",
    "start": "1436010",
    "end": "1442650"
  },
  {
    "text": "so the important thing to note about the resource policy is that it will be",
    "start": "1442650",
    "end": "1448250"
  },
  {
    "text": "implied in in Union or sorry in",
    "start": "1448250",
    "end": "1453350"
  },
  {
    "text": "intersection with the with the existing policy on the credentials so if your",
    "start": "1453350",
    "end": "1459030"
  },
  {
    "text": "credentials on your account don't allow a specific action on the API but the resource policy does then then or if",
    "start": "1459030",
    "end": "1467460"
  },
  {
    "text": "there's an explicit deny excuse me so if there's an explicit deny in in one of one of the two then that will always",
    "start": "1467460",
    "end": "1473130"
  },
  {
    "text": "override so there there's a long list of sort of policy sort of best practices in",
    "start": "1473130",
    "end": "1481260"
  },
  {
    "text": "terms of like whether or not it's an explicit deny an implicit deny or an",
    "start": "1481260",
    "end": "1486300"
  },
  {
    "text": "explicit allow and so if you ever having an explicit allow then that everything is fine if you don't have an explicit",
    "start": "1486300",
    "end": "1492570"
  },
  {
    "text": "allow then it's an implicit deny and then you kind of like have these spikes out where if there's an explicit denying",
    "start": "1492570",
    "end": "1498630"
  },
  {
    "text": "and it's supposed to allow it's it it can come great conflict anyway but can",
    "start": "1498630",
    "end": "1504300"
  },
  {
    "text": "you blow that up too so we can show policy a little better thank you yep absolutely yeah so so right here now",
    "start": "1504300",
    "end": "1512190"
  },
  {
    "start": "1511000",
    "end": "1551000"
  },
  {
    "text": "I'm literally just allowing this this this user which is the same user that we",
    "start": "1512190",
    "end": "1519630"
  },
  {
    "text": "saw in our error message over here so this is the user whether admin in this account to basically execute anything",
    "start": "1519630",
    "end": "1528470"
  },
  {
    "text": "anything in this API now strictly speaking this is a wild card across all all api's but because the policies",
    "start": "1528470",
    "end": "1535470"
  },
  {
    "text": "associated with this API it does not extend beyond this API so yeah so what I",
    "start": "1535470",
    "end": "1543240"
  },
  {
    "text": "should be able to do now is I should be able to save this policy and then not",
    "start": "1543240",
    "end": "1548460"
  },
  {
    "text": "forgetting to go back and actually deploy it so that it will actually be",
    "start": "1548460",
    "end": "1553590"
  },
  {
    "text": "applied on my stage and then I'll go over here and I'll look at my",
    "start": "1553590",
    "end": "1562549"
  },
  {
    "text": "this is my response there's money okay",
    "start": "1573860",
    "end": "1579419"
  },
  {
    "text": "it seems to have lost my content okay so now what I want to do here is actually",
    "start": "1579419",
    "end": "1585600"
  },
  {
    "text": "like send a message to to my function which is going to update all the fields",
    "start": "1585600",
    "end": "1591570"
  },
  {
    "text": "so I will go back to my non-premium data and grab that and so now all I'm gonna",
    "start": "1591570",
    "end": "1605399"
  },
  {
    "text": "do is construct a message that will send to my all of these I'm having a tool",
    "start": "1605399",
    "end": "1614730"
  },
  {
    "text": "problem here there it is okay it's",
    "start": "1614730",
    "end": "1623370"
  },
  {
    "text": "already there my apologies okay so now I have my I have a a message",
    "start": "1623370",
    "end": "1631200"
  },
  {
    "text": "here which I'm going to send to the server to try to update all of the fields now again I'm not doing any sort",
    "start": "1631200",
    "end": "1636840"
  },
  {
    "text": "of like partial updates or anything so whatever I send is literally gonna get written out so I could potentially update the location name today's",
    "start": "1636840",
    "end": "1644789"
  },
  {
    "text": "conditions tomorrow's conditions I'm only going to touch the the tomorrow's conditions and I will say that like",
    "start": "1644789",
    "end": "1650789"
  },
  {
    "text": "tomorrow is going to be 88 and unclear and so I'll go ahead and send that",
    "start": "1650789",
    "end": "1659100"
  },
  {
    "text": "request and you can see here that I got a very helpful success message from my",
    "start": "1659100",
    "end": "1664350"
  },
  {
    "text": "API it shows me the item that was put into the database and then I can switch back over to my authenticated client",
    "start": "1664350",
    "end": "1671940"
  },
  {
    "start": "1671000",
    "end": "1721000"
  },
  {
    "text": "make sure that I log back in so that I can see that premium content",
    "start": "1671940",
    "end": "1676970"
  },
  {
    "text": "mmm to refresh I can",
    "start": "1682720",
    "end": "1690880"
  },
  {
    "text": "mmm seem to be having a better client die that's just in trying to the zip try",
    "start": "1696490",
    "end": "1708530"
  },
  {
    "text": "a 8 by 130 for they go thing well that's",
    "start": "1708530",
    "end": "1717110"
  },
  {
    "text": "interesting live demos um okay so let's see if we",
    "start": "1717110",
    "end": "1722510"
  },
  {
    "start": "1721000",
    "end": "1746000"
  },
  {
    "text": "can take a look here real quick and see if we can figure out why we might be doing this actually why don't I do a",
    "start": "1722510",
    "end": "1729560"
  },
  {
    "text": "little bit of debugging here and Eric why don't you talk a little bit about the the front-end application and I'll",
    "start": "1729560",
    "end": "1735980"
  },
  {
    "text": "see if I can dive deep here and figure out what's going on all right so I'm gonna jump over here both both",
    "start": "1735980",
    "end": "1744590"
  },
  {
    "text": "Bob and I can fat-fingers sometimes and so it's always fun to try to figure out what we've done wrong there what he",
    "start": "1744590",
    "end": "1750230"
  },
  {
    "start": "1746000",
    "end": "2076000"
  },
  {
    "text": "might in tax that so I'll look at a show on the front end the front end and I",
    "start": "1750230",
    "end": "1755510"
  },
  {
    "text": "don't want to brag but yeah I designed the front end it's pretty amazing but I wanted to show real quick if you're not",
    "start": "1755510",
    "end": "1761330"
  },
  {
    "text": "enough for me with amplify console so I've got the front end of you and with",
    "start": "1761330",
    "end": "1767300"
  },
  {
    "text": "the amplify console I can point it might sit right now at semitone command repo sitting inside of my account I can point",
    "start": "1767300",
    "end": "1775010"
  },
  {
    "text": "the amplified console at that code comment tell that it's view I can set",
    "start": "1775010",
    "end": "1780170"
  },
  {
    "text": "some build settings here that you see and it actually because it recognized that it was a view it needed to set that",
    "start": "1780170",
    "end": "1787400"
  },
  {
    "text": "up and then I can now go through and and that's how I built the front end and so",
    "start": "1787400",
    "end": "1793790"
  },
  {
    "text": "that it every time I commit to commit it and builds out that it builds out the",
    "start": "1793790",
    "end": "1799310"
  },
  {
    "text": "client side what clanked the client side",
    "start": "1799310",
    "end": "1804350"
  },
  {
    "text": "claim so here and I'm gonna see here real quick here you still working on",
    "start": "1804350",
    "end": "1811280"
  },
  {
    "text": "that though but so that's that's a link to that so you can build that you can break down to connect different branches so you can build your staging",
    "start": "1811280",
    "end": "1818270"
  },
  {
    "text": "so this is a great way basically if you're developing you deal with client-side this is a great way to be quick client-side cxe be and so I'm",
    "start": "1818270",
    "end": "1826700"
  },
  {
    "text": "built that out now the second thing I want to talk through my lips that that is when we set up the authorizers",
    "start": "1826700",
    "end": "1833870"
  },
  {
    "text": "there's a couple things that we need to do Sam like he showed you the same template we'll set up all the all the",
    "start": "1833870",
    "end": "1840920"
  },
  {
    "text": "you know the cores it actually created the user pool that we need they created",
    "start": "1840920",
    "end": "1846440"
  },
  {
    "text": "the app client that we need for the user pool but what it doesn't do is set up that fancy login that you saw so if I",
    "start": "1846440",
    "end": "1853730"
  },
  {
    "text": "want to go login I click this and when you'll notice up here at the domain and let me blow that up they can blow up the",
    "start": "1853730",
    "end": "1860179"
  },
  {
    "text": "right areas but you can see that I'm hitting whether done and then it's an",
    "start": "1860179",
    "end": "1866210"
  },
  {
    "text": "off site incognito so this is my these are my authentication domains that I'm",
    "start": "1866210",
    "end": "1871850"
  },
  {
    "text": "using I actually created the weather and I'll say that in just a minute I also had passing in the I'm grabbing the",
    "start": "1871850",
    "end": "1879770"
  },
  {
    "text": "redirect back and he's passing back to my master domain and I'm passing it my",
    "start": "1879770",
    "end": "1885290"
  },
  {
    "text": "client ID so I log in I use a password and then and actually I'll go ahead and",
    "start": "1885290",
    "end": "1891410"
  },
  {
    "text": "do that so you can see this",
    "start": "1891410",
    "end": "1894580"
  },
  {
    "text": "right so sign in here and it takes me back here so now I'm logged in nope",
    "start": "1900049",
    "end": "1906179"
  },
  {
    "text": "don't want to do that and we're good to go now the interesting thing is sample",
    "start": "1906179",
    "end": "1911820"
  },
  {
    "text": "and set all that up yet because not all of this is supported in CloudFormation point yet so what I did to enable this",
    "start": "1911820",
    "end": "1920309"
  },
  {
    "text": "is I'm going to come in and I'm gonna do I'm going to come to first thing we do is talk about app client settings and",
    "start": "1920309",
    "end": "1926159"
  },
  {
    "text": "I'm going to turn on my identity provider and my identity provider is my kognito you use a pool that's the only",
    "start": "1926159",
    "end": "1932909"
  },
  {
    "text": "thing that I've got linked in through this the second thing I'm going to do is I'm going to tell it my sign-in and",
    "start": "1932909",
    "end": "1939270"
  },
  {
    "text": "sign-out URLs now notice I don't you can see if you don't we simply blow this up",
    "start": "1939270",
    "end": "1944630"
  },
  {
    "text": "you'll notice that I've got two URLs this is my test domain I was using cloud",
    "start": "1944630",
    "end": "1950070"
  },
  {
    "text": "9 to build this out so that was my cloud 9 test domain and this is my product production to me so my sign out urls are",
    "start": "1950070",
    "end": "1958470"
  },
  {
    "text": "the same I'll are God didn't take me back there as well the next thing I'm going to do is I'm going to tell that one to use authorized code grant which",
    "start": "1958470",
    "end": "1966360"
  },
  {
    "text": "is what I'm the way I'm doing this and how that works is when my client goes",
    "start": "1966360",
    "end": "1972330"
  },
  {
    "text": "over here when pops over here to be the login that we taught them you saw it's gonna get a code back from Cognito",
    "start": "1972330",
    "end": "1979740"
  },
  {
    "text": "and I'm gonna take my client then takes that code and it hits a token API and",
    "start": "1979740",
    "end": "1986909"
  },
  {
    "text": "any kids it exchanges that out for an Access ID and then that access idea is",
    "start": "1986909",
    "end": "1992669"
  },
  {
    "text": "once passed through and then we can do a forward we don't weren't using scopes in this particular example because of that",
    "start": "1992669",
    "end": "1999419"
  },
  {
    "text": "takes longer than the time we've got here but if we wanted to scope some things we can all that we could do allow",
    "start": "1999419",
    "end": "2004760"
  },
  {
    "text": "aunt and woth scopes I've got them turned on for later purposes but we can turn those on and off so with those set",
    "start": "2004760",
    "end": "2011990"
  },
  {
    "text": "then I then I save it then I go to my domain and with my domain that I can",
    "start": "2011990",
    "end": "2017570"
  },
  {
    "text": "choose I can try different domains I chose whether it happened to be",
    "start": "2017570",
    "end": "2022580"
  },
  {
    "text": "available and then that it and something that once you put that in that's the that's the address that",
    "start": "2022580",
    "end": "2030940"
  },
  {
    "text": "you're gonna you're going to hit and so let me walk you to this again so let me log out here real quick to your log back in you see the address again so we're",
    "start": "2030940",
    "end": "2039580"
  },
  {
    "text": "gonna pass the client ID and we pass a redirect URL and we hit the domain that",
    "start": "2039580",
    "end": "2046900"
  },
  {
    "text": "we suggest and and that that's that's a quick way to build an authentication",
    "start": "2046900",
    "end": "2053800"
  },
  {
    "text": "service and again this goes back to that you know when we looked at our diagram shows you authenticate here and then you",
    "start": "2053800",
    "end": "2061210"
  },
  {
    "text": "authorize a time you don't use a poll but I done so I'm getting real close I'm",
    "start": "2061210",
    "end": "2069460"
  },
  {
    "text": "pretty sure I know what the problem is but I need them yeah they're in there too alright so then what I'm gonna do is I'm",
    "start": "2069460",
    "end": "2074980"
  },
  {
    "text": "gonna go back in and we're gonna go back to the template that Bob was showing and make sure everybody can see this okay",
    "start": "2074980",
    "end": "2081000"
  },
  {
    "start": "2076000",
    "end": "2346000"
  },
  {
    "text": "all right so yeah so one of the things",
    "start": "2081000",
    "end": "2087790"
  },
  {
    "text": "when you go into the authorizer here when you're setting a sudden above walk through the template there and he go put",
    "start": "2087790",
    "end": "2095590"
  },
  {
    "text": "it down to our API that I was just at just from here okay so in the API when I",
    "start": "2095590",
    "end": "2102130"
  },
  {
    "text": "pass my authorizer this is just a large family authorizer the next thing idea is",
    "start": "2102130",
    "end": "2108520"
  },
  {
    "text": "I'm going to get the premium pull user pull arm and so that user pool was",
    "start": "2108520",
    "end": "2114070"
  },
  {
    "text": "created with Sam here okay and then the user pool client was created here ties",
    "start": "2114070",
    "end": "2121240"
  },
  {
    "text": "it together once I have that arm put in place then that Lovelock's it didn't do",
    "start": "2121240",
    "end": "2127300"
  },
  {
    "text": "what happened that's where it ties you're back in application you're your API gateway to this Cognito",
    "start": "2127300",
    "end": "2133690"
  },
  {
    "text": "infrastructure that you've built up so it knows because it knows that the arm of that user pool it knows to use that",
    "start": "2133690",
    "end": "2141190"
  },
  {
    "text": "one we're authenticating we're passing our token on so that's pretty much the meat potatoes of a Cognito authorizer",
    "start": "2141190",
    "end": "2149580"
  },
  {
    "text": "and you can do all you see other types of authorizers here but this is yeah",
    "start": "2149580",
    "end": "2155710"
  },
  {
    "text": "this our building so so on this so here I'm calling you",
    "start": "2155710",
    "end": "2161040"
  },
  {
    "text": "notice that he said I'm directly calling an A to B s I am authorizer so I don't have to build an aw sign",
    "start": "2161040",
    "end": "2166680"
  },
  {
    "text": "that's already built in and then I'm then I'm directly calling this authorizer that we built so watching that we'll",
    "start": "2166680",
    "end": "2175410"
  },
  {
    "text": "build that out but what I've done is I've taken and I've built a Cognito for different applications that I'm doing I",
    "start": "2175410",
    "end": "2181410"
  },
  {
    "text": "basically take this here all the way down and I have just a reusable template",
    "start": "2181410",
    "end": "2187680"
  },
  {
    "text": "I know some of you and I have been on a conversation Twitter over the last weeks or so about building reusable blocks and",
    "start": "2187680",
    "end": "2194310"
  },
  {
    "text": "CloudFormation this is one of those would be good to have in your library if you build a carnita infrastructure you",
    "start": "2194310",
    "end": "2200130"
  },
  {
    "text": "can pass in an application name and change out that you know and use that name in the subs then you've got this",
    "start": "2200130",
    "end": "2207720"
  },
  {
    "text": "and you can reuse it for different apps that you're building out all right so",
    "start": "2207720",
    "end": "2213390"
  },
  {
    "text": "those are those are the two things that I'm going to walk through here and the last thing here I'm going to go into a",
    "start": "2213390",
    "end": "2219870"
  },
  {
    "text": "little more depth on what bob was talking about the the inline code here one things that you may not recognize",
    "start": "2219870",
    "end": "2225960"
  },
  {
    "text": "that you can't pass inline code when you're building a function now this I don't know if this is always the one",
    "start": "2225960",
    "end": "2231930"
  },
  {
    "text": "that I would suggest for all your applications but something that I use periodically based on the application",
    "start": "2231930",
    "end": "2238770"
  },
  {
    "text": "I'm building I've had clients say like we don't we don't want to do a we don't want to do a",
    "start": "2238770",
    "end": "2244410"
  },
  {
    "text": "confirmation of our email or our phone number we simply want them to be if they're signing up who wants bill",
    "start": "2244410",
    "end": "2250620"
  },
  {
    "text": "through and we go and that actually don't suggest that too often but for our demonstration purposes that that works so simply all this is",
    "start": "2250620",
    "end": "2257430"
  },
  {
    "text": "doing is is in the in line when you're building for continuity you can do a sign up laying the function and it fires",
    "start": "2257430",
    "end": "2264510"
  },
  {
    "text": "this function this is you notice it's called the pre sign up and there's several and as you can fire a pre sign",
    "start": "2264510",
    "end": "2270150"
  },
  {
    "text": "up post sign up I think pre login and then they they",
    "start": "2270150",
    "end": "2275790"
  },
  {
    "text": "fire this and you can grab the event you can update the event so in this example",
    "start": "2275790",
    "end": "2281520"
  },
  {
    "text": "we're doing event response auto confirm user and then finally you can do you can change",
    "start": "2281520",
    "end": "2288600"
  },
  {
    "text": "that you can leave the email and everything make sure it's been and then you actually say auto verify phone or",
    "start": "2288600",
    "end": "2294780"
  },
  {
    "text": "whatever you can do email and phone to true this allows you to get by that verification process so I can log in",
    "start": "2294780",
    "end": "2300960"
  },
  {
    "text": "there using them they're able to use it right away alright we're gonna jump back here Bobby",
    "start": "2300960",
    "end": "2310920"
  },
  {
    "text": "let me know what you did there yeah unfortunately there seems to be a",
    "start": "2310920",
    "end": "2316880"
  },
  {
    "text": "interaction with with the Cognito and the the recog nido user pool and the resource policy that I'm having a little",
    "start": "2316880",
    "end": "2324000"
  },
  {
    "text": "problem with and I'm gonna have to cook that to my team wood to make sure that we're doing the right thing but I can at",
    "start": "2324000",
    "end": "2331020"
  },
  {
    "text": "least go back to demonstrating sort of the the update actually taking effect",
    "start": "2331020",
    "end": "2336420"
  },
  {
    "text": "and I'm taking a look at that special okay and then we can talk about the rest",
    "start": "2336420",
    "end": "2343680"
  },
  {
    "text": "of the stuff we wanted to talk about yeah yeah so now you can see that my you",
    "start": "2343680",
    "end": "2349140"
  },
  {
    "start": "2346000",
    "end": "2361000"
  },
  {
    "text": "know I can see that the the the data has been updated with the 88 degree temperature for tomorrow for this",
    "start": "2349140",
    "end": "2354780"
  },
  {
    "text": "location and I I can see that unfortunately I had to remove the the",
    "start": "2354780",
    "end": "2361560"
  },
  {
    "start": "2361000",
    "end": "2406000"
  },
  {
    "text": "resource policy in order for that to for that to work so the the TLDR there is is",
    "start": "2361560",
    "end": "2369510"
  },
  {
    "text": "that there's a there's a policy configuration which I thought I had in place which was not working but",
    "start": "2369510",
    "end": "2376140"
  },
  {
    "text": "unfortunately I'll have to defer that to perhaps a later time so the last thing that we want to come",
    "start": "2376140",
    "end": "2382830"
  },
  {
    "text": "into touch on was was wife and so certainly when you have a public API",
    "start": "2382830",
    "end": "2389760"
  },
  {
    "text": "that has doesn't have any authentication on it there's not a lot of mechanisms for sort of you know shutting the front",
    "start": "2389760",
    "end": "2395250"
  },
  {
    "text": "door so to speak as we were talking about it's the title of the talk suggests but one way that you do have to",
    "start": "2395250",
    "end": "2403590"
  },
  {
    "text": "shut the front door is is what we call laugh or the web access Barbara and so what'd you to",
    "start": "2403590",
    "end": "2411090"
  },
  {
    "start": "2406000",
    "end": "2601000"
  },
  {
    "text": "define rules for evaluation whether it's simple as blocking an IP address or",
    "start": "2411090",
    "end": "2417950"
  },
  {
    "text": "blocking certain class of classes of traffic so what great limiting customers based on IP addresses now unlike a lot",
    "start": "2417950",
    "end": "2426170"
  },
  {
    "text": "of the other features integrated with API gateway you actually define everything in laughs from the laughs",
    "start": "2426170",
    "end": "2432380"
  },
  {
    "text": "console so I've switched over to the laugh console and I'm going to go ahead and configure a web Apple here I have to",
    "start": "2432380",
    "end": "2440240"
  },
  {
    "text": "give my web Apple a name and then I",
    "start": "2440240",
    "end": "2446360"
  },
  {
    "text": "define the region so this is how I scoped down to figuring out what resource I want to do we're running in",
    "start": "2446360",
    "end": "2452990"
  },
  {
    "text": "the Oregon region which then allows me to select API gateway as a resource type",
    "start": "2452990",
    "end": "2458060"
  },
  {
    "text": "or then I can select my REST API and then I have to associate a specific",
    "start": "2458060",
    "end": "2463460"
  },
  {
    "text": "stage and so then at this point then I am able to then configure any number of",
    "start": "2463460",
    "end": "2470990"
  },
  {
    "text": "rules for this where this Apple to actually control so whether that be",
    "start": "2470990",
    "end": "2476980"
  },
  {
    "text": "checking for cross-site scripting configuration or IP mismatches or sequel",
    "start": "2476980",
    "end": "2485270"
  },
  {
    "text": "injections so graph has built a whole bunch of custom rules that will allow you to kind of detect that will detect",
    "start": "2485270",
    "end": "2491660"
  },
  {
    "text": "these kind of problems and reject the traffic before it even hits before it hits the back end so it'll the the",
    "start": "2491660",
    "end": "2497869"
  },
  {
    "text": "clients will get a four or three and you don't get charged for any of the the requests that get rejected due to laughs",
    "start": "2497869",
    "end": "2503810"
  },
  {
    "text": "laughs blocking the request so yeah so if I just want to create a simple",
    "start": "2503810",
    "end": "2510050"
  },
  {
    "text": "condition for an IP block and then I can",
    "start": "2510050",
    "end": "2515720"
  },
  {
    "text": "define either so I I'd be before is currently the only things going to be supported for for API gateway and then I",
    "start": "2515720",
    "end": "2521660"
  },
  {
    "text": "can either do a net mask or an explicit IP so if I literally just want to like block a a specific IP then I can add",
    "start": "2521660",
    "end": "2528890"
  },
  {
    "text": "that range here of course it would help if I actually picked a correct one so let's substitute this one Oh mr. Beeney",
    "start": "2528890",
    "end": "2538960"
  },
  {
    "text": "umm so yeah so if I want to do a specific IP format actually I have to do it as a cider slash 32 and then I can",
    "start": "2538960",
    "end": "2546800"
  },
  {
    "text": "create that and then all of the draft coming from that particular IP address would be blocked going to my API gateway",
    "start": "2546800",
    "end": "2556510"
  },
  {
    "text": "then I just need to review all of those things and then I want to block any",
    "start": "2557050",
    "end": "2563330"
  },
  {
    "text": "requests or at no sir allow that don't match so that's Balter and yeah you can",
    "start": "2563330",
    "end": "2571790"
  },
  {
    "text": "create and confirm and now at this point behind the scenes graph is communicating",
    "start": "2571790",
    "end": "2578780"
  },
  {
    "text": "with api gateway and communicating and saying now my API should behave on this",
    "start": "2578780",
    "end": "2584360"
  },
  {
    "text": "rule no obviously I'm not I'm not actually testing from that 8.8 IP address so I'm not gonna be able to",
    "start": "2584360",
    "end": "2591200"
  },
  {
    "text": "necessarily demonstrate that but that's how you would actually set up an apple for your API so couple of courses for",
    "start": "2591200",
    "end": "2599630"
  },
  {
    "text": "debug but so let's say I match the rule what happens to the request is it does",
    "start": "2599630",
    "end": "2606380"
  },
  {
    "text": "the does the caller get a response or is it just dropped yeah so it gets a 4 or 3",
    "start": "2606380",
    "end": "2611420"
  },
  {
    "text": "responses as if it was none authorized so it basically just tells the cut you know that the caller to go away and and",
    "start": "2611420",
    "end": "2620270"
  },
  {
    "text": "again that 4 or 3 is not it's not charged to 480 anyway so now actually",
    "start": "2620270",
    "end": "2626060"
  },
  {
    "text": "there is a charge associated with using left but there would be no charge associated with the API gateway request",
    "start": "2626060",
    "end": "2632300"
  },
  {
    "text": "that was blocked due to a wife a wife rule evaluating to walk okay so so",
    "start": "2632300",
    "end": "2641230"
  },
  {
    "text": "what's your take on when would I use a laugh when would I use a policy",
    "start": "2641230",
    "end": "2648250"
  },
  {
    "text": "statement resource policy or something else is there there's a guides on that",
    "start": "2648250",
    "end": "2654070"
  },
  {
    "text": "um so yes I mean we have seen so before we had active integration with with with",
    "start": "2654070",
    "end": "2660890"
  },
  {
    "text": "laugh we were seeing a lot of customers doing basically primitive laughs with",
    "start": "2660890",
    "end": "2666290"
  },
  {
    "text": "resource policies and IP conditions and the resource policy that doesn't scale",
    "start": "2666290",
    "end": "2672110"
  },
  {
    "text": "particularly well if you have a very small number IP addresses that you're trying to block",
    "start": "2672110",
    "end": "2677290"
  },
  {
    "text": "that is one you know that that is something that you can do but it does again it does not particularly scale",
    "start": "2677290",
    "end": "2682890"
  },
  {
    "text": "basically my my rubric is is that if you can if you're if you're authenticating",
    "start": "2682890",
    "end": "2688359"
  },
  {
    "text": "so if you're authenticating the request then you can you should be able to do something inside of inside of the policy",
    "start": "2688359",
    "end": "2695680"
  },
  {
    "text": "definitions to actually control that if you don't have anything authentication then then laughs is a great choice or if",
    "start": "2695680",
    "end": "2703300"
  },
  {
    "text": "you have a public API that has a an endpoint that is otherwise unrestricted then then using laughs is a great as a",
    "start": "2703300",
    "end": "2711160"
  },
  {
    "text": "great mechanism for protecting other callers of that API from from a bad actor okay I appreciate you saying",
    "start": "2711160",
    "end": "2719140"
  },
  {
    "text": "rubric instead a rule of thumb I don't like rules of thumb you know that right [Music]",
    "start": "2719140",
    "end": "2724859"
  },
  {
    "text": "we do have a question here and we might take this offline but I'm gonna throw it",
    "start": "2724859",
    "end": "2730359"
  },
  {
    "text": "actually anyway seem to think this little off-topic but going with security says I have an application that users",
    "start": "2730359",
    "end": "2736420"
  },
  {
    "text": "can subscribe to services they should only be able to access files stored in s3 that come with these services right",
    "start": "2736420",
    "end": "2743560"
  },
  {
    "text": "now when they have the URL they can access everything a registered user can access but is that a simple way where I",
    "start": "2743560",
    "end": "2750730"
  },
  {
    "text": "can restrict that so we really going to do is restricting data to an s3 via an",
    "start": "2750730",
    "end": "2758470"
  },
  {
    "text": "API so does that make sense yeah so I mean I guess I guess it depends on where",
    "start": "2758470",
    "end": "2764560"
  },
  {
    "text": "where the credentials being asserted so if if the if you're basically if you're",
    "start": "2764560",
    "end": "2771579"
  },
  {
    "text": "giving the customers like a priest on URL to access the s3 the s3 resources",
    "start": "2771579",
    "end": "2777940"
  },
  {
    "text": "then obviously your application that's generating the pre-sign urls can assert whatever whatever rubric it wants",
    "start": "2777940",
    "end": "2784180"
  },
  {
    "text": "whether it wants to store information in a database that then says that this user",
    "start": "2784180",
    "end": "2789400"
  },
  {
    "text": "should have access to this content and fine you can definitely do that if you are relying on s3 permissions to",
    "start": "2789400",
    "end": "2798069"
  },
  {
    "text": "do that then oftentimes what customers will do and what I've done in sort of",
    "start": "2798069",
    "end": "2803230"
  },
  {
    "text": "personal projects is using prefixes so if you have it you know you can define access to an",
    "start": "2803230",
    "end": "2811099"
  },
  {
    "text": "s3 bucket based on prefix path and so you can say that like that there's certain classes of users or subsection",
    "start": "2811099",
    "end": "2818719"
  },
  {
    "text": "or services that that have files in there and you just define all of the sub",
    "start": "2818719",
    "end": "2823999"
  },
  {
    "text": "paths that the user would have access to in a policy and then you can have your easier ectly access s3 without",
    "start": "2823999",
    "end": "2831079"
  },
  {
    "text": "necessarily having to use it yeah Gateway in between ok well that would be",
    "start": "2831079",
    "end": "2837019"
  },
  {
    "text": "I mean either way you do it just to go back when you do like to please sign URL something like that you never want to",
    "start": "2837019",
    "end": "2843559"
  },
  {
    "text": "route your calling of an s3 object through 3 lambda through your maybe you",
    "start": "2843559",
    "end": "2849019"
  },
  {
    "text": "always want to have a direct direct to talk to the story when you can we were",
    "start": "2849019",
    "end": "2854930"
  },
  {
    "text": "talking about large larger payloads or larger sizes so API gateway has a 10",
    "start": "2854930",
    "end": "2860719"
  },
  {
    "text": "megabyte payload restriction lambda has a 6 megabyte payload restriction so if you're talking about files in that order",
    "start": "2860719",
    "end": "2867229"
  },
  {
    "text": "of magnitude then definitely accessing having your customers access s3 directly",
    "start": "2867229",
    "end": "2872239"
  },
  {
    "text": "via Prasad URL is definitely something that I would recommend that's right",
    "start": "2872239",
    "end": "2877309"
  },
  {
    "text": "ok all right ok what else do you have anything else you",
    "start": "2877309",
    "end": "2882380"
  },
  {
    "text": "want to show on the lab stuff um no I think that was all I wanted to show on the last stuff so I think we're I think",
    "start": "2882380",
    "end": "2889279"
  },
  {
    "text": "we're sort of at the end of what we wanted to show today yeah so yeah please",
    "start": "2889279",
    "end": "2896059"
  },
  {
    "text": "if you have any questions we have a few more minutes for him to jump off here love again so any questions we can have",
    "start": "2896059",
    "end": "2901099"
  },
  {
    "text": "some online if we know all I am said I'm going to go off-topic kid we had a question about since we did talk about",
    "start": "2901099",
    "end": "2908119"
  },
  {
    "text": "been amplified console actually let me let me ask this question will quick witted okay could I serve or I'm Bob",
    "start": "2908119",
    "end": "2917509"
  },
  {
    "text": "let's notice that you stopped the chunk already could I serve jazz files through",
    "start": "2917509",
    "end": "2923109"
  },
  {
    "text": "it'll be a skate wing which which is located behind engine X yeah I'm not",
    "start": "2923109",
    "end": "2930650"
  },
  {
    "text": "sure I completely understand the question so yes if I'm understanding correctly I've got an engine X proxy server can I",
    "start": "2930650",
    "end": "2937910"
  },
  {
    "text": "put Gateway run into next proxy server and that's",
    "start": "2937910",
    "end": "2943160"
  },
  {
    "text": "I'll jump on that Bob correct if I'm wrong but yeah absolutely you can't you to make that gateway as you can point it",
    "start": "2943160",
    "end": "2949070"
  },
  {
    "text": "at anything that has an employment so if your engine acts as if your proxy has that has an in point and you're serving",
    "start": "2949070",
    "end": "2955100"
  },
  {
    "text": "you have something to that you couldn't do it you might find that that is",
    "start": "2955100",
    "end": "2960650"
  },
  {
    "text": "brought up earlier in the chat you might find that with an integration you might",
    "start": "2960650",
    "end": "2965720"
  },
  {
    "text": "be able to get rid of the Internet's proxy for whatever reason you're using it and so and so yeah I did get a",
    "start": "2965720",
    "end": "2975890"
  },
  {
    "text": "request can you put it on Raspberry Pi if that Raspberry Pi has an input that's public data Yankee or public to the",
    "start": "2975890",
    "end": "2984500"
  },
  {
    "text": "innocence publicly as long as it's public routable endpoint we can call",
    "start": "2984500",
    "end": "2989540"
  },
  {
    "text": "into it that's that's exactly correct yes this video is recorded the question",
    "start": "2989540",
    "end": "2995150"
  },
  {
    "text": "is asking are these videos recorded all right all our episodes are recorded can be found on twitch and YouTube so I",
    "start": "2995150",
    "end": "3001930"
  },
  {
    "text": "encourage you to go back and follow them I will answer the my opinion on the",
    "start": "3001930",
    "end": "3007420"
  },
  {
    "text": "amplify the amplify console question to come to the question we got was you know",
    "start": "3007420",
    "end": "3012760"
  },
  {
    "text": "you can do amplify push and then you can also use the amplified console and",
    "start": "3012760",
    "end": "3018160"
  },
  {
    "text": "they're really you're almost time amplifies them an incredible product and I love it we you know I worked at a",
    "start": "3018160",
    "end": "3024820"
  },
  {
    "start": "3021000",
    "end": "3168000"
  },
  {
    "text": "service group and it's tied in having with us and and I you know we use it quite a bit you can use you know amplify",
    "start": "3024820",
    "end": "3032710"
  },
  {
    "text": "you can use Sam they integrate there's a lot of overlap in them and kind of the advice that I give and again the steer",
    "start": "3032710",
    "end": "3039310"
  },
  {
    "text": "Johnson the answer here is if you're coming at it from a front-end developer",
    "start": "3039310",
    "end": "3044670"
  },
  {
    "text": "amplify and the amplify tool set like the CLI a great way to go if you're",
    "start": "3044670",
    "end": "3050860"
  },
  {
    "text": "coming at it from like a back-end developer where you're kind of building your api's and things like that then Sam's the way to go and then you'll find",
    "start": "3050860",
    "end": "3058000"
  },
  {
    "text": "some overlap as well and so and you know amplify depends on Sam and their dose of",
    "start": "3058000",
    "end": "3065709"
  },
  {
    "text": "integration the amplified console however is its own kind of service that allows you to host and in time kind of a",
    "start": "3065709",
    "end": "3074289"
  },
  {
    "text": "quick CI CD for fronting applications so hopefully that helps that's my opinion",
    "start": "3074289",
    "end": "3081150"
  },
  {
    "text": "well I think we're about out of time I would thank Bob thank you so much here I",
    "start": "3081150",
    "end": "3087219"
  },
  {
    "text": "really appreciate it let me bring my slide back up here to let you guys know what's going on so this is what we built",
    "start": "3087219",
    "end": "3093999"
  },
  {
    "text": "today our secure weather application and we had Bob we're going to be checking on",
    "start": "3093999",
    "end": "3100209"
  },
  {
    "text": "what kind of messed up our last part maybe we'll publish that on Twitter later so but if you next week so we",
    "start": "3100209",
    "end": "3108339"
  },
  {
    "text": "talked about shutting the front door but that's that's not always enough sometimes you want to shut the back door",
    "start": "3108339",
    "end": "3113650"
  },
  {
    "text": "in the next episode we're going to be talking about what does that look like how do you validate the API gateway is",
    "start": "3113650",
    "end": "3121299"
  },
  {
    "text": "it is this the right API gate with it's hitting your application through using client certificates",
    "start": "3121299",
    "end": "3127569"
  },
  {
    "text": "we'll discuss the idea of trust but verify so you know someone's authenticated but let's make sure their",
    "start": "3127569",
    "end": "3133179"
  },
  {
    "text": "who want them to be and then we can also protect our back-end through technologies like VPC links and we'll",
    "start": "3133179",
    "end": "3139569"
  },
  {
    "text": "visit throttling again darlings great to protect the backend from you know we",
    "start": "3139569",
    "end": "3145569"
  },
  {
    "text": "talked about it earlier from getting too many requests but it's also good from from getting hammered from like a denial",
    "start": "3145569",
    "end": "3151029"
  },
  {
    "text": "of service or something like that so look forward to seeing you on June 11th same time same place",
    "start": "3151029",
    "end": "3157949"
  },
  {
    "text": "appreciate all all the folks who follow and give us questions and we will see",
    "start": "3157949",
    "end": "3162999"
  },
  {
    "text": "you next time Bob thanks again yeah absolutely see you next time",
    "start": "3162999",
    "end": "3168599"
  }
]