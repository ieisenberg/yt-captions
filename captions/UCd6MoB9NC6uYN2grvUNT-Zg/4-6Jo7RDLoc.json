[
  {
    "text": "hi my name is eugene stampanov i'm a senior database solution architect with aws",
    "start": "719",
    "end": "7200"
  },
  {
    "text": "here at aws i focus on sql server and postgres and today we will talk",
    "start": "7200",
    "end": "13040"
  },
  {
    "text": "about brand new feature that will launch on may 19th of this year and that is rds support for sql server",
    "start": "13040",
    "end": "20800"
  },
  {
    "text": "integration services now integration services together with analysis services and",
    "start": "20800",
    "end": "26960"
  },
  {
    "text": "reporting services have been such an important part of sql server ecosystem that now it is part of many many uh",
    "start": "26960",
    "end": "34960"
  },
  {
    "text": "bi solutions now prior to this launch you could still work with all those",
    "start": "34960",
    "end": "42000"
  },
  {
    "text": "tools but you would have to host them outside of your rds instance so you would have your database workload",
    "start": "42000",
    "end": "50320"
  },
  {
    "text": "on your rds instance but you would have to spin up another ec2 instance and that's where you would host your",
    "start": "50320",
    "end": "57360"
  },
  {
    "text": "ssis your analysis services or reporting services and",
    "start": "57360",
    "end": "62559"
  },
  {
    "text": "obviously that works but it requires an additional additional cost",
    "start": "62559",
    "end": "70000"
  },
  {
    "text": "not only for the underlying hardware but also for the for the separate sql server license and",
    "start": "70000",
    "end": "77439"
  },
  {
    "text": "obviously from the from the cost perspective that is sub-optimal now we aws take our",
    "start": "77439",
    "end": "85040"
  },
  {
    "text": "customers feedback very very seriously and that was our feedback from our customers customers like yourself",
    "start": "85040",
    "end": "91520"
  },
  {
    "text": "that we need ability to be able to host those tools on the rds instance on rds instance",
    "start": "91520",
    "end": "98159"
  },
  {
    "text": "itself and as of may 19th now you can do it",
    "start": "98159",
    "end": "104079"
  },
  {
    "text": "so the agenda for today first we will take a look at some of the prerequisites that this feature comes",
    "start": "104079",
    "end": "110880"
  },
  {
    "text": "with then we will take a look at step-by-step instructions um and we're going to spend",
    "start": "110880",
    "end": "118320"
  },
  {
    "text": "a lot of time on on the console and by the end of it we'll have we'll have a live demo and i",
    "start": "118320",
    "end": "124960"
  },
  {
    "text": "will be coming back to the instructions to the step-by-step instructions as we progressing through",
    "start": "124960",
    "end": "130399"
  },
  {
    "text": "the demo we will end this conversation",
    "start": "130399",
    "end": "137120"
  },
  {
    "text": "with some of the limitations that this feature comes with and again the most of the time we will",
    "start": "137120",
    "end": "143840"
  },
  {
    "text": "spend building the actual working uh proof of concept all right",
    "start": "143840",
    "end": "152319"
  },
  {
    "text": "all right prerequisites um the first one ssis must be enabled in the option group",
    "start": "152560",
    "end": "158879"
  },
  {
    "text": "uh those of you who already worked with native backups or possibly ssrs or possibly watched my previous video that",
    "start": "158879",
    "end": "165680"
  },
  {
    "text": "where i covered reporting services know that all these features first have to be enabled in the option",
    "start": "165680",
    "end": "172480"
  },
  {
    "text": "group and ssis follow this follows the same path that's where you enable it the second",
    "start": "172480",
    "end": "180000"
  },
  {
    "text": "clr enabled flag has to be flipped to one in the parameter group now let's not get",
    "start": "180000",
    "end": "187280"
  },
  {
    "text": "confused here uh clr generally speaking",
    "start": "187280",
    "end": "193920"
  },
  {
    "text": "has very limited support on rds and um on 2017 it's not supported altogether",
    "start": "193920",
    "end": "200879"
  },
  {
    "text": "on 2016 you can only execute safe clr right so this flag",
    "start": "200879",
    "end": "208879"
  },
  {
    "text": "doesn't change those anything about those limitations right it's just a hard requirement for",
    "start": "208879",
    "end": "215760"
  },
  {
    "text": "you to be able to execute ssis on the rds instance itself",
    "start": "215760",
    "end": "222159"
  },
  {
    "text": "all right so we're gonna we're gonna we're gonna flip it to one and the third one ssis",
    "start": "222159",
    "end": "229360"
  },
  {
    "text": "is supported starting with those build numbers so for 2017 standard both standard and",
    "start": "229360",
    "end": "236319"
  },
  {
    "text": "enterprise it is supported starting with version 3223.3",
    "start": "236319",
    "end": "242159"
  },
  {
    "text": "or anything later and for 2016 both standard enterprise it is supported",
    "start": "242159",
    "end": "250000"
  },
  {
    "text": "starting with 5426.0 all later",
    "start": "250000",
    "end": "256079"
  },
  {
    "text": "the fourth bullet point is that rds instance the one that will be hosting",
    "start": "256079",
    "end": "263199"
  },
  {
    "text": "the ssis package has to be adjoined and not only a d joint that active",
    "start": "263199",
    "end": "271360"
  },
  {
    "text": "directory has to be aws managed you cannot join the rds instance with the",
    "start": "271360",
    "end": "279840"
  },
  {
    "text": "self-managed uh active directory and the last",
    "start": "279840",
    "end": "285280"
  },
  {
    "text": "requirement is that s3 integration feature must be enabled on that rds instance and",
    "start": "285280",
    "end": "293360"
  },
  {
    "text": "that's because the way we deploy the ssis packages all goes through s3 very very similar to",
    "start": "293360",
    "end": "300639"
  },
  {
    "text": "the way we work with native backups all right um step by step uh this is",
    "start": "300639",
    "end": "308639"
  },
  {
    "text": "very high level um and first we're going to go ahead and we're going to create the custom",
    "start": "308639",
    "end": "314800"
  },
  {
    "text": "option group where we're going to enable ssis second we're going to create custom parameter group where we're going to",
    "start": "314800",
    "end": "321039"
  },
  {
    "text": "enable clr then we will launch a couple of couple of uh domain join rds instances",
    "start": "321039",
    "end": "330160"
  },
  {
    "text": "and then we will spend some time configuring windows auth",
    "start": "330160",
    "end": "337120"
  },
  {
    "text": "user for the ssis and we will finish the demo with",
    "start": "337120",
    "end": "343919"
  },
  {
    "text": "downloading deploying and executing ssis ss package",
    "start": "343919",
    "end": "351520"
  },
  {
    "text": "with that let's jump straight to the demo",
    "start": "351520",
    "end": "357199"
  },
  {
    "text": "all right we're here on the console uh and before we do anything let's explore",
    "start": "357680",
    "end": "362880"
  },
  {
    "text": "and let's see what i already have in my account so let's start with ec2",
    "start": "362880",
    "end": "370400"
  },
  {
    "text": "and here on ec2 we have two running instances",
    "start": "370400",
    "end": "377440"
  },
  {
    "text": "and the first one is jambox right jambox is nothing but uh essentially empty uh ec2 instance that's",
    "start": "377440",
    "end": "384960"
  },
  {
    "text": "sitting in the in a public subnet where i can have uh rdp access to and i can take full",
    "start": "384960",
    "end": "391199"
  },
  {
    "text": "control over it now i also have my this this dev box and",
    "start": "391199",
    "end": "398639"
  },
  {
    "text": "dev box is another ec2 instance that's now sitting in the private subnet",
    "start": "398639",
    "end": "403840"
  },
  {
    "text": "and that's where i develop all my stuff uh that dev box is loaded with sql server visual studio data tools",
    "start": "403840",
    "end": "411919"
  },
  {
    "text": "um uh everything everything that's with the entire with the entire stack",
    "start": "411919",
    "end": "417280"
  },
  {
    "text": "right now let's go [Music] on rds and",
    "start": "417280",
    "end": "425280"
  },
  {
    "text": "here on rds i don't have anything um essentially we will be launching",
    "start": "425280",
    "end": "433360"
  },
  {
    "text": "a couple of rds instances and that's going to be part of the demo",
    "start": "433360",
    "end": "439199"
  },
  {
    "text": "and on s3",
    "start": "439199",
    "end": "444479"
  },
  {
    "text": "i have two buckets where that will be working with uh first of",
    "start": "444479",
    "end": "450319"
  },
  {
    "text": "all i have ssis packages it's currently it's empty but we will be using this this bucket",
    "start": "450319",
    "end": "457039"
  },
  {
    "text": "and then the second one this adventure work works backup uh bucket where i have dw2017",
    "start": "457039",
    "end": "465840"
  },
  {
    "text": "backup and my ssis package is built against adventure works dw",
    "start": "465840",
    "end": "472319"
  },
  {
    "text": "2017. it's very very simple package but it requires the schema and the data and",
    "start": "472319",
    "end": "479440"
  },
  {
    "text": "that's what we're going to be we're going to be using and also let's take a look at",
    "start": "479440",
    "end": "486560"
  },
  {
    "text": "my directory service",
    "start": "486560",
    "end": "493840"
  },
  {
    "text": "on the directory service i already have my corp2.com microsoft managed",
    "start": "494400",
    "end": "503680"
  },
  {
    "text": "and it's of size standard um those of you who watched my report",
    "start": "503680",
    "end": "509039"
  },
  {
    "text": "and services video it's exactly the same it's exactly the same directory",
    "start": "509039",
    "end": "514640"
  },
  {
    "text": "all right uh with that let's go ahead and let's create",
    "start": "514640",
    "end": "522719"
  },
  {
    "text": "our option group um that's the first requirement and later",
    "start": "522719",
    "end": "528399"
  },
  {
    "text": "we will create our parameter group so here on rds we go",
    "start": "528399",
    "end": "534320"
  },
  {
    "text": "and we go to the options group and we're going to create a group",
    "start": "534320",
    "end": "540320"
  },
  {
    "text": "and let's call it let's call it ssis",
    "start": "542800",
    "end": "549680"
  },
  {
    "text": "enabled we're going to say ssis enabled",
    "start": "549680",
    "end": "559839"
  },
  {
    "text": "we're going to go with sql server enterprise edition and we're going to go with the latest",
    "start": "560959",
    "end": "566480"
  },
  {
    "text": "version create the group here's our ssis enabled let's go to it",
    "start": "566480",
    "end": "573839"
  },
  {
    "text": "and let's add options so the first option we're going to add",
    "start": "573839",
    "end": "580160"
  },
  {
    "text": "is obviously integration services and let's add that immediately",
    "start": "580160",
    "end": "587360"
  },
  {
    "text": "all right it looks like our ssis feature has been enabled and now i want to go ahead and i want to",
    "start": "587360",
    "end": "594000"
  },
  {
    "text": "add one more option and that is ability to work with native backup since",
    "start": "594000",
    "end": "599680"
  },
  {
    "text": "we're going to be working with the adventureworks dw and that's the the backup i showed you",
    "start": "599680",
    "end": "605120"
  },
  {
    "text": "in my three bucket that i showed you earlier we're going to need to enable this feature in our",
    "start": "605120",
    "end": "611200"
  },
  {
    "text": "option group and obviously um native backup requires an im role",
    "start": "611200",
    "end": "617600"
  },
  {
    "text": "that has enough permissions to be able to download and upload stuff from the s3 bucket so that's this",
    "start": "617600",
    "end": "624640"
  },
  {
    "text": "s3 backup and restore role that i have that actually i use for for",
    "start": "624640",
    "end": "632480"
  },
  {
    "text": "all my s3 integration tasks and all right so let's go ahead and",
    "start": "632480",
    "end": "638720"
  },
  {
    "text": "let's immediately add that scroll down all right and now i see that",
    "start": "638720",
    "end": "646000"
  },
  {
    "text": "my ssis enabled custom option group has",
    "start": "646000",
    "end": "651519"
  },
  {
    "text": "native backup and ssis enabled so we just completed the first",
    "start": "651519",
    "end": "657440"
  },
  {
    "text": "requirement and that's custom option group let's go ahead and let's work now on",
    "start": "657440",
    "end": "663519"
  },
  {
    "text": "our parameter group if you remember the second requirement is to have clr enabled flag",
    "start": "663519",
    "end": "671360"
  },
  {
    "text": "set to one in the custom parameter group so let's go ahead and let's create a parameter group",
    "start": "671360",
    "end": "679120"
  },
  {
    "text": "for we're gonna pick sql server enterprise",
    "start": "683040",
    "end": "690480"
  },
  {
    "text": "latest one 14.0 and let's call it clr",
    "start": "690480",
    "end": "698000"
  },
  {
    "text": "enabled and let's have the same description oops",
    "start": "698000",
    "end": "706480"
  },
  {
    "text": "let's create all right it's now clr enabled let's find clr",
    "start": "707200",
    "end": "717440"
  },
  {
    "text": "clr enabled that's the flag and you can see that right now it's set to",
    "start": "717440",
    "end": "723519"
  },
  {
    "text": "zero but allowed values is zero and one and it is modifiable",
    "start": "723519",
    "end": "729519"
  },
  {
    "text": "which means you can flip that so let's go ahead and let's change that",
    "start": "729519",
    "end": "736560"
  },
  {
    "text": "flip that to one and save changes",
    "start": "736880",
    "end": "741680"
  },
  {
    "text": "all right so now it is set to one",
    "start": "743440",
    "end": "749759"
  },
  {
    "text": "clr enabled all right so with that let's go ahead and let's",
    "start": "750880",
    "end": "757120"
  },
  {
    "text": "launch two of our rds instances",
    "start": "757120",
    "end": "762399"
  },
  {
    "text": "we're going to be hosting our ssis package only on one rds instance but the reason",
    "start": "762399",
    "end": "768959"
  },
  {
    "text": "why i want to launch two rds instances because i want to i wanted to show how you built not only",
    "start": "768959",
    "end": "775920"
  },
  {
    "text": "local connection manager connection manager that points to the local box but i also want to develop a package",
    "start": "775920",
    "end": "782639"
  },
  {
    "text": "that have couple instances involved in one of those instances will be remote instance so for that purpose",
    "start": "782639",
    "end": "789440"
  },
  {
    "text": "let's go ahead and let's create",
    "start": "789440",
    "end": "794079"
  },
  {
    "text": "sql server let's go ahead and let's pick the latest",
    "start": "794720",
    "end": "801920"
  },
  {
    "text": "one i'm gonna go with the dev template",
    "start": "801920",
    "end": "807040"
  },
  {
    "text": "database one that's fine i'm gonna give it a master user",
    "start": "807040",
    "end": "815839"
  },
  {
    "text": "and confirm my password",
    "start": "818880",
    "end": "822320"
  },
  {
    "text": "i'm gonna leave my instance size at the default let's increase that to",
    "start": "824399",
    "end": "830959"
  },
  {
    "text": "100 let's disable auto scaling",
    "start": "830959",
    "end": "836399"
  },
  {
    "text": "i am going to leave it as single az default vpc let's deploy that to the",
    "start": "836880",
    "end": "845360"
  },
  {
    "text": "private subnet group i suggest you do the same otherwise that's just a recipe for",
    "start": "845360",
    "end": "851120"
  },
  {
    "text": "disaster and for my security group i'm sorry i'm",
    "start": "851120",
    "end": "856560"
  },
  {
    "text": "gonna pick existing one i have the security group called private sql server security group",
    "start": "856560",
    "end": "864480"
  },
  {
    "text": "where i have my tcp 40 1433 enabled",
    "start": "864480",
    "end": "871839"
  },
  {
    "text": "all right and here we're coming up on the windows auth that's where you enable it",
    "start": "874160",
    "end": "882160"
  },
  {
    "text": "and i have only one um on only one directory which is mycorp2.com",
    "start": "882160",
    "end": "889040"
  },
  {
    "text": "the one we saw earlier and as far as additional configuration",
    "start": "889040",
    "end": "895519"
  },
  {
    "text": "let's find our custom parameter group clr enabled and let's find our custom",
    "start": "895519",
    "end": "904480"
  },
  {
    "text": "option group ssis enabled and everything else i'm just going to",
    "start": "904480",
    "end": "909839"
  },
  {
    "text": "leave it as default i'm just going to disable everything else because it's going to deploy faster",
    "start": "909839",
    "end": "917600"
  },
  {
    "text": "that's the only reason all right so that's going to be",
    "start": "917600",
    "end": "924000"
  },
  {
    "text": "cannot read property directory id interesting let's scroll back",
    "start": "924000",
    "end": "931040"
  },
  {
    "text": "let's browse the directory [Music]",
    "start": "931040",
    "end": "937600"
  },
  {
    "text": "everything looks looks okay let's create again",
    "start": "937600",
    "end": "945360"
  },
  {
    "text": "all right it might be some some browser glitch all right so we are creating",
    "start": "946720",
    "end": "954160"
  },
  {
    "text": "um first rds instance let's go ahead and let's create two as i said",
    "start": "954160",
    "end": "959440"
  },
  {
    "text": "earlier all right and the second instance will be an exact copy of the first one",
    "start": "959440",
    "end": "968560"
  },
  {
    "text": "so let me fly through the screen real",
    "start": "968560",
    "end": "972880"
  },
  {
    "text": "quick",
    "start": "980839",
    "end": "983839"
  },
  {
    "text": "you",
    "start": "995839",
    "end": "997920"
  },
  {
    "text": "all right here we're coming up on the options option group and parameter group and i",
    "start": "1020000",
    "end": "1026079"
  },
  {
    "text": "will pick exactly the same custom parameter group in the option group but not because",
    "start": "1026079",
    "end": "1032798"
  },
  {
    "text": "we're going to be again deploying ssis package to the second instance",
    "start": "1032799",
    "end": "1038640"
  },
  {
    "text": "again we will be deploying the ssis package to the first instance only the reason why i'm picking the",
    "start": "1038640",
    "end": "1045199"
  },
  {
    "text": "custom groups here because i still want that adventure works 2017 dw database to be",
    "start": "1045199",
    "end": "1051039"
  },
  {
    "text": "restored and that the native backup feature is enabled in our ssis option group right so that's",
    "start": "1051039",
    "end": "1058799"
  },
  {
    "text": "the reason why i'm picking uh this option group otherwise i could just i could go with the default ones all",
    "start": "1058799",
    "end": "1065760"
  },
  {
    "text": "right and i am going to disable all the other great features like performance insights",
    "start": "1065760",
    "end": "1072400"
  },
  {
    "text": "and backup and enhanced monitoring and the only reason why i want to deploy that faster and that's",
    "start": "1072400",
    "end": "1078000"
  },
  {
    "text": "that's that's really all all right so create database and that's gonna take that's gonna take",
    "start": "1078000",
    "end": "1084720"
  },
  {
    "text": "a minute so i will pause and i will come back as soon as it's done thank you all right seems like both of",
    "start": "1084720",
    "end": "1092000"
  },
  {
    "text": "our databases database 1 and database 2 are up and running and both of them",
    "start": "1092000",
    "end": "1097120"
  },
  {
    "text": "available so why don't we go ahead connect to them and restore adventureworks",
    "start": "1097120",
    "end": "1105600"
  },
  {
    "text": "dw backup on those instances so the first one let's grab that",
    "start": "1105600",
    "end": "1112400"
  },
  {
    "text": "endpoint",
    "start": "1112400",
    "end": "1115039"
  },
  {
    "text": "let's go to my dev box again if you remember the ec2con dashboard that i",
    "start": "1118640",
    "end": "1124400"
  },
  {
    "text": "showed you i have two boxes the jump box and my development box this is my",
    "start": "1124400",
    "end": "1129440"
  },
  {
    "text": "development box where i have sql server visual studio",
    "start": "1129440",
    "end": "1134880"
  },
  {
    "text": "data tools the entire stack the entire microsoft development stack installed on it",
    "start": "1134880",
    "end": "1140240"
  },
  {
    "text": "so in here here i have management studio so why don't we go ahead",
    "start": "1140240",
    "end": "1146160"
  },
  {
    "text": "and connect to our first endpoint here's database 1 and we're going to use",
    "start": "1146160",
    "end": "1154880"
  },
  {
    "text": "a master user which is sql login to connect to it all right so you see",
    "start": "1154880",
    "end": "1163200"
  },
  {
    "text": "an empty in empty r instance again rds admin is part of our",
    "start": "1163200",
    "end": "1170000"
  },
  {
    "text": "control plane it's always there you have no control over it or visibility into it and because we enabled ssis",
    "start": "1170000",
    "end": "1178400"
  },
  {
    "text": "now you see ssis database show up here and um and and and i hope that makes",
    "start": "1178400",
    "end": "1184960"
  },
  {
    "text": "sense now let's go ahead and open up my script i have a script here",
    "start": "1184960",
    "end": "1191200"
  },
  {
    "text": "that has a restore command so here's the here's the drop database",
    "start": "1191200",
    "end": "1198400"
  },
  {
    "text": "here's the restore command right here we're going to be restoring adventureworks dw2017",
    "start": "1198400",
    "end": "1205679"
  },
  {
    "text": "the back the location of the backup is right here that's my s3 bucket and we're going to",
    "start": "1205679",
    "end": "1213280"
  },
  {
    "text": "restore it with no recovery equals zero so this is double negative",
    "start": "1213280",
    "end": "1219280"
  },
  {
    "text": "essentially we want to restore and we want to recover so we can we can query that database",
    "start": "1219280",
    "end": "1226320"
  },
  {
    "text": "and it's a it's a full backup",
    "start": "1226320",
    "end": "1231200"
  },
  {
    "text": "all right so we just created this job and now let's go ahead and let's connect",
    "start": "1231760",
    "end": "1238480"
  },
  {
    "text": "to the second endpoint",
    "start": "1238480",
    "end": "1242080"
  },
  {
    "text": "let's grab our second endpoint",
    "start": "1244159",
    "end": "1249360"
  },
  {
    "text": "and let's repeat",
    "start": "1249360",
    "end": "1263840"
  },
  {
    "text": "all right this is again instance is identical so let me have new query oops",
    "start": "1264000",
    "end": "1272720"
  },
  {
    "text": "let me grab the restore command",
    "start": "1275039",
    "end": "1280080"
  },
  {
    "text": "and let's execute that all right so it's going to take a minute or two",
    "start": "1282000",
    "end": "1288320"
  },
  {
    "text": "actually let's refresh databases and here we already see adventure works",
    "start": "1288320",
    "end": "1294280"
  },
  {
    "text": "dw2017 it looks like it's available it's not saying restoring and let's",
    "start": "1294280",
    "end": "1300480"
  },
  {
    "text": "refresh the second one and it is also now available here adventurers zw2017",
    "start": "1300480",
    "end": "1308240"
  },
  {
    "text": "so let's go back to my powerpoint",
    "start": "1308240",
    "end": "1312400"
  },
  {
    "text": "let's see where we at",
    "start": "1313520",
    "end": "1319840"
  },
  {
    "text": "here's step-by-step instructions essentially we completed step number one number two",
    "start": "1320159",
    "end": "1327679"
  },
  {
    "text": "in number three so we're almost halfway halfway done so next let's go ahead and",
    "start": "1327679",
    "end": "1334240"
  },
  {
    "text": "let's work on number four where we're gonna configure the windows authenticated user",
    "start": "1334240",
    "end": "1342320"
  },
  {
    "text": "for the ssis all right we're back",
    "start": "1342320",
    "end": "1349440"
  },
  {
    "text": "on our ssms um screen and we just restored",
    "start": "1349440",
    "end": "1356799"
  },
  {
    "text": "adventureworks dw2017 on both of our instances on database 1 and database 2. again repeating myself",
    "start": "1356799",
    "end": "1364400"
  },
  {
    "text": "here we will deploy our ssis package only to one of those instances database 1 for",
    "start": "1364400",
    "end": "1369840"
  },
  {
    "text": "example and database 2 will only be used as a",
    "start": "1369840",
    "end": "1374880"
  },
  {
    "text": "target we will be executing um select statements against database 2",
    "start": "1374880",
    "end": "1380720"
  },
  {
    "text": "and the only reason why i i want to i wanted to launch both of those instances",
    "start": "1380720",
    "end": "1385919"
  },
  {
    "text": "is to be able to demonstrate how you work not only with local connection strings but also with the remote",
    "start": "1385919",
    "end": "1391760"
  },
  {
    "text": "connection strings so everything that we're going to do from now on",
    "start": "1391760",
    "end": "1398240"
  },
  {
    "text": "will involve an instance that will be hosting our ssis package",
    "start": "1398240",
    "end": "1404240"
  },
  {
    "text": "for for this purposes i'm going to completely disconnect from that database to instance database",
    "start": "1404240",
    "end": "1410240"
  },
  {
    "text": "two we done there and um again everything we will be executing",
    "start": "1410240",
    "end": "1417120"
  },
  {
    "text": "from now on will go against database one now",
    "start": "1417120",
    "end": "1422559"
  },
  {
    "text": "um right now we are connected to database one",
    "start": "1422559",
    "end": "1428840"
  },
  {
    "text": "instance as a master user and a master user is sql",
    "start": "1428840",
    "end": "1435440"
  },
  {
    "text": "authenticated user but for the purposes of ssis uh ssis package and being able to",
    "start": "1435440",
    "end": "1443360"
  },
  {
    "text": "execute ssis package we need a windows authenticated user",
    "start": "1443360",
    "end": "1448720"
  },
  {
    "text": "so let's go ahead and let's open up the script that i have",
    "start": "1448720",
    "end": "1457120"
  },
  {
    "text": "and if you remember when we launched our yes instances we joined them",
    "start": "1457120",
    "end": "1464720"
  },
  {
    "text": "with a my corp 2 domain these instances",
    "start": "1464720",
    "end": "1472480"
  },
  {
    "text": "are part of the domain but they at this point have no idea about the user",
    "start": "1472480",
    "end": "1479279"
  },
  {
    "text": "called an admin so why don't we go ahead and we create a login against a database",
    "start": "1479279",
    "end": "1488720"
  },
  {
    "text": "one and let's execute that all right let's go to security and here",
    "start": "1488720",
    "end": "1496960"
  },
  {
    "text": "we have now my corp to slash admin",
    "start": "1496960",
    "end": "1503760"
  },
  {
    "text": "login instance level instance level login",
    "start": "1503760",
    "end": "1508880"
  },
  {
    "text": "all right now obviously when we enable ssis on this instance ssis",
    "start": "1508880",
    "end": "1516080"
  },
  {
    "text": "database has been deployed on the instance and there are very important roles and",
    "start": "1516080",
    "end": "1522720"
  },
  {
    "text": "that is ssis admin and ssis log reader that has been assigned that he had been",
    "start": "1522720",
    "end": "1529679"
  },
  {
    "text": "granted to the master user but again we cannot use",
    "start": "1529679",
    "end": "1534799"
  },
  {
    "text": "master user to execute that as a ssis package because it's a sql authenticated user we need windows authenticated user",
    "start": "1534799",
    "end": "1543120"
  },
  {
    "text": "and um a master user has also been granted ability to",
    "start": "1543120",
    "end": "1548559"
  },
  {
    "text": "assign those two roles to anyone else so this script right here will",
    "start": "1548559",
    "end": "1557039"
  },
  {
    "text": "give those privileges to my corp to slash",
    "start": "1557039",
    "end": "1563679"
  },
  {
    "text": "admin windows account right let's go ahead and let's execute that",
    "start": "1563679",
    "end": "1571840"
  },
  {
    "text": "all right that's been successfully executed and",
    "start": "1571840",
    "end": "1578720"
  },
  {
    "text": "let's go ahead and let's check this out let's go to security",
    "start": "1578720",
    "end": "1585600"
  },
  {
    "text": "and the users and",
    "start": "1585600",
    "end": "1590320"
  },
  {
    "text": "let's go to mapping i am looking for",
    "start": "1591279",
    "end": "1599840"
  },
  {
    "text": "ah let's take a look at the instance",
    "start": "1605760",
    "end": "1609520"
  },
  {
    "text": "level here security",
    "start": "1610840",
    "end": "1615360"
  },
  {
    "text": "user mapping all right so now a user",
    "start": "1618159",
    "end": "1626880"
  },
  {
    "text": "my corp 2 admin has public ssis admin",
    "start": "1626880",
    "end": "1633760"
  },
  {
    "text": "and sss log reader in the database called ssisdb",
    "start": "1633760",
    "end": "1639200"
  },
  {
    "text": "all right so this is great also later if you if you would like to",
    "start": "1639200",
    "end": "1646240"
  },
  {
    "text": "schedule your ssis package and schedule it through sql agent",
    "start": "1646240",
    "end": "1652480"
  },
  {
    "text": "you're gonna need this list of permissions to be uh ad granted",
    "start": "1652480",
    "end": "1658720"
  },
  {
    "text": "so why don't we head and execute this script i'm not gonna read through through the entire script",
    "start": "1658720",
    "end": "1664960"
  },
  {
    "text": "uh all i'm gonna say is it's very well documented here on our website",
    "start": "1664960",
    "end": "1672240"
  },
  {
    "text": "where we give line by line instructions on how to set up windows authenticated",
    "start": "1672240",
    "end": "1677279"
  },
  {
    "text": "user for ssis here's a script where i picked that up it's right here and i include this link",
    "start": "1677279",
    "end": "1685840"
  },
  {
    "text": "in my powerpoint at the very at the very end of the",
    "start": "1685840",
    "end": "1691279"
  },
  {
    "text": "powerpoint um there is there is um",
    "start": "1691279",
    "end": "1697840"
  },
  {
    "text": "there is this first link all right so let's go back to the",
    "start": "1697919",
    "end": "1705440"
  },
  {
    "text": "to the management studio and now essentially we are ready",
    "start": "1705440",
    "end": "1712159"
  },
  {
    "text": "this instance is ready to to to host an ssis package",
    "start": "1712159",
    "end": "1718559"
  },
  {
    "text": "so let's go to visual studio and let's see what we're going to be deploying all",
    "start": "1718559",
    "end": "1724559"
  },
  {
    "text": "right this is a very very simple package um let me do a couple of passes at it",
    "start": "1724559",
    "end": "1732640"
  },
  {
    "text": "and and we're going to we're going to uncover a layer by layer essentially what that",
    "start": "1732640",
    "end": "1738960"
  },
  {
    "text": "does it's very simple it has the flat file as the source it's going to read some",
    "start": "1738960",
    "end": "1745600"
  },
  {
    "text": "text file on the other hand on the other side of the joint",
    "start": "1745600",
    "end": "1750720"
  },
  {
    "text": "it has all adb data source it will be executing a select statement against sql",
    "start": "1750720",
    "end": "1757120"
  },
  {
    "text": "server database then both result sets will be sorted",
    "start": "1757120",
    "end": "1762399"
  },
  {
    "text": "then these sorted results will be used in the merge join",
    "start": "1762399",
    "end": "1768640"
  },
  {
    "text": "and later um the result of the merge join will be inserted against a target",
    "start": "1768640",
    "end": "1775760"
  },
  {
    "text": "database now let me jump back to ssms and let's explore",
    "start": "1775760",
    "end": "1782159"
  },
  {
    "text": "adventureworks dw2017 and couple of tables that we have here",
    "start": "1782159",
    "end": "1788640"
  },
  {
    "text": "so we have a table called fact currency rate",
    "start": "1788640",
    "end": "1796720"
  },
  {
    "text": "and what it is it's very simple table and essentially it's uh",
    "start": "1796720",
    "end": "1803520"
  },
  {
    "text": "what five six columns and the the composite key here is the currency",
    "start": "1803520",
    "end": "1808880"
  },
  {
    "text": "key and the date key it's a fact table and obviously it tracks the change",
    "start": "1808880",
    "end": "1816320"
  },
  {
    "text": "of the exchange rate for a particular currency",
    "start": "1816320",
    "end": "1822960"
  },
  {
    "text": "on a given on a given day right so and it has essentially there",
    "start": "1822960",
    "end": "1829039"
  },
  {
    "text": "are two measures there is the average rate that's daily and then there is the end of the date",
    "start": "1829039",
    "end": "1835440"
  },
  {
    "text": "exchange rate so our ssis package will work",
    "start": "1835440",
    "end": "1842559"
  },
  {
    "text": "against this table now adventure works also has a dimension",
    "start": "1842559",
    "end": "1849360"
  },
  {
    "text": "called dim currency so let's take a look at this and obviously it is also very simple right there's a currency key",
    "start": "1849360",
    "end": "1855919"
  },
  {
    "text": "there's a currency iso code and then there's a currency name now i also put together",
    "start": "1855919",
    "end": "1865440"
  },
  {
    "text": "uh an input file called currency so this currency file",
    "start": "1865440",
    "end": "1875440"
  },
  {
    "text": "have the iso code for the currency it has a date key it has the",
    "start": "1875440",
    "end": "1883440"
  },
  {
    "text": "daily average it has end of the day exchange rate and it has the date time",
    "start": "1883440",
    "end": "1893120"
  },
  {
    "text": "all right so let's go back to the uh to the ssis designer",
    "start": "1893120",
    "end": "1901760"
  },
  {
    "text": "and essentially what we're gonna do we're gonna ingest a flat file this file",
    "start": "1901760",
    "end": "1911120"
  },
  {
    "text": "we will sort it based on the currency code",
    "start": "1911760",
    "end": "1921840"
  },
  {
    "text": "over here we will execute",
    "start": "1922399",
    "end": "1927600"
  },
  {
    "text": "a select query with currency key and currency alternate key against dim",
    "start": "1927600",
    "end": "1933919"
  },
  {
    "text": "currency dimension we're going to again sort both of those",
    "start": "1933919",
    "end": "1939120"
  },
  {
    "text": "result sets and we're going to merge them the reason why i'm merging them is because their currency code",
    "start": "1939120",
    "end": "1949039"
  },
  {
    "text": "comes with the isocurrency code but i need currency key",
    "start": "1949039",
    "end": "1956000"
  },
  {
    "text": "from the dimension called dim currency so essentially what this does it mimics a lookup where",
    "start": "1957840",
    "end": "1965120"
  },
  {
    "text": "there is input file come in and there is a lookup branch that",
    "start": "1965120",
    "end": "1971840"
  },
  {
    "text": "does nothing but a lookup of the currency key based on the currency",
    "start": "1971840",
    "end": "1977039"
  },
  {
    "text": "iso code and it mimics it mimics a daily pull and then the",
    "start": "1977039",
    "end": "1984559"
  },
  {
    "text": "result of this merge join will be inserted against our target database",
    "start": "1984559",
    "end": "1991519"
  },
  {
    "text": "now but here's why i picked this as a ssis package that's a success package i",
    "start": "1991519",
    "end": "1998320"
  },
  {
    "text": "developed long time ago for completely different presentation but the reason why i picked it because it has three connection managers",
    "start": "1998320",
    "end": "2006240"
  },
  {
    "text": "one local flat file and two remote",
    "start": "2006240",
    "end": "2011279"
  },
  {
    "text": "sql server connection managers that are both of them pointing to a remote",
    "start": "2011279",
    "end": "2017600"
  },
  {
    "text": "instances currently and that mimics the",
    "start": "2017600",
    "end": "2025200"
  },
  {
    "text": "the scenario where prior to this launch you were still able to use ssis but you",
    "start": "2025200",
    "end": "2030799"
  },
  {
    "text": "would have to you had to host it outside of your rds instance and we're going to make this package",
    "start": "2030799",
    "end": "2037519"
  },
  {
    "text": "work in a second and again it's going to mimic very well where ssis",
    "start": "2037519",
    "end": "2042799"
  },
  {
    "text": "is running on ec2 outside of your rds but it it's going against rds",
    "start": "2042799",
    "end": "2050320"
  },
  {
    "text": "just as a as a source and the target right but after we",
    "start": "2050320",
    "end": "2057760"
  },
  {
    "text": "deploy this package to one of our rds instances one of these connection managers will",
    "start": "2057760",
    "end": "2064638"
  },
  {
    "text": "turn into a a a connection that points to a local box",
    "start": "2064639",
    "end": "2070158"
  },
  {
    "text": "and another connection manager will turn will remain a a manager that still",
    "start": "2070159",
    "end": "2076000"
  },
  {
    "text": "points to a remote box and and the local file of course will will remain",
    "start": "2076000",
    "end": "2081520"
  },
  {
    "text": "uh a manager that's pointing to a local local flat file all right so",
    "start": "2081520",
    "end": "2088800"
  },
  {
    "text": "let's make it work and let's start with the flat file",
    "start": "2088800",
    "end": "2095760"
  },
  {
    "text": "so right here i have a local flat file and i pointed out",
    "start": "2095760",
    "end": "2103200"
  },
  {
    "text": "earlier i showed you the currency file but let's take a look at the location of",
    "start": "2103200",
    "end": "2108480"
  },
  {
    "text": "this file i put it into in on drive d folder s3",
    "start": "2108480",
    "end": "2114800"
  },
  {
    "text": "now let me go back to my powerpoint and one of the first limitations one of",
    "start": "2114800",
    "end": "2121520"
  },
  {
    "text": "the imp very important limitations that you always need to be aware of",
    "start": "2121520",
    "end": "2127359"
  },
  {
    "text": "that rds is the managed instance so you don't have access to operating system",
    "start": "2127359",
    "end": "2132880"
  },
  {
    "text": "and file system but there is s3 integration feature",
    "start": "2132880",
    "end": "2138320"
  },
  {
    "text": "and that feature essentially unlocks g s3 local folder",
    "start": "2138320",
    "end": "2146079"
  },
  {
    "text": "for for your use so when you enable ssis anything stuff like input files output",
    "start": "2146079",
    "end": "2153440"
  },
  {
    "text": "files any type of the temporary temporary transient files that that you",
    "start": "2153440",
    "end": "2160320"
  },
  {
    "text": "want to create at the runtime all of that stuff has to go on the ds3",
    "start": "2160320",
    "end": "2170560"
  },
  {
    "text": "now um let me go back to my visual studio and and and this is what",
    "start": "2170560",
    "end": "2177200"
  },
  {
    "text": "i've done here even though i'm on ec2 and because i don't want to rebuild this connection manager at the runtime",
    "start": "2177200",
    "end": "2184720"
  },
  {
    "text": "i'm just following the same the same the same convention i created uh my d",
    "start": "2184720",
    "end": "2191680"
  },
  {
    "text": "drive and i created s3 folder and that's where i uh put my currency file on and now",
    "start": "2191680",
    "end": "2199440"
  },
  {
    "text": "after i deployed this ssis package over to the rds uh essentially i wouldn't have to change",
    "start": "2199440",
    "end": "2207440"
  },
  {
    "text": "anything about this connection manager i wouldn't have to build it at the runtime bind it and and all of that fun stuff",
    "start": "2207440",
    "end": "2213680"
  },
  {
    "text": "right all right so enough said about the flat file",
    "start": "2213680",
    "end": "2219200"
  },
  {
    "text": "let me actually go ahead and let me delete all the stuff that i inherited and let's start",
    "start": "2219200",
    "end": "2226839"
  },
  {
    "text": "fresh so all adb source this",
    "start": "2226839",
    "end": "2232560"
  },
  {
    "text": "this source we will be using to execute that lookup query right so let's go ahead and let's create",
    "start": "2232560",
    "end": "2240000"
  },
  {
    "text": "new oledb connection and that oledb connection will use",
    "start": "2240000",
    "end": "2246640"
  },
  {
    "text": "um actually let's go to the console and let's grab",
    "start": "2246640",
    "end": "2253280"
  },
  {
    "text": "an endpoint for database 2 right database 2 is that what we're going to be going",
    "start": "2253280",
    "end": "2260560"
  },
  {
    "text": "against as the remote target",
    "start": "2260560",
    "end": "2264480"
  },
  {
    "text": "database 2.",
    "start": "2265760",
    "end": "2271680"
  },
  {
    "text": "and database 2 it's going to be a remote target so let's go ahead with the sql",
    "start": "2271680",
    "end": "2277599"
  },
  {
    "text": "authentication so i'm going to give it a master username",
    "start": "2277599",
    "end": "2284480"
  },
  {
    "text": "password i'm going to save my password for now",
    "start": "2284480",
    "end": "2290640"
  },
  {
    "text": "and let's pick adventure works and let's test connection",
    "start": "2290640",
    "end": "2297440"
  },
  {
    "text": "connection works and let's save all right",
    "start": "2297440",
    "end": "2306000"
  },
  {
    "text": "adventure works dw all right so here's the adventure adventureworks dw",
    "start": "2306000",
    "end": "2313280"
  },
  {
    "text": "database 2 let's pick a table let's pick a sql",
    "start": "2313280",
    "end": "2320640"
  },
  {
    "text": "command and that command all we're going to do is we're going to",
    "start": "2320640",
    "end": "2326320"
  },
  {
    "text": "pick these two columns we don't even need",
    "start": "2326320",
    "end": "2333040"
  },
  {
    "text": "currency name we just need currency key and the alternate key",
    "start": "2333040",
    "end": "2341838"
  },
  {
    "text": "let's place it here let's preview currency key awesome",
    "start": "2343359",
    "end": "2352320"
  },
  {
    "text": "all right we good here uh let's see the sort sort we're gonna do on the currency",
    "start": "2352320",
    "end": "2359040"
  },
  {
    "text": "alternate key perfect flat file is already functioning",
    "start": "2359040",
    "end": "2364960"
  },
  {
    "text": "and here's we have the external columns the output columns",
    "start": "2364960",
    "end": "2370400"
  },
  {
    "text": "now sort is on the currency iso currency code perfect merge join is seems to be configured",
    "start": "2370400",
    "end": "2379440"
  },
  {
    "text": "properly it's going to be the iso code from the incoming flat file against the currency",
    "start": "2379440",
    "end": "2386480"
  },
  {
    "text": "alternate code of our dimension perfect okay",
    "start": "2386480",
    "end": "2391839"
  },
  {
    "text": "and now let's create another connection manager for the destination now destination is",
    "start": "2391839",
    "end": "2398560"
  },
  {
    "text": "going to be our instance database one and that's going to be the instance that's hosting",
    "start": "2398560",
    "end": "2405839"
  },
  {
    "text": "ssis package so let's go ahead and create new old adb connection",
    "start": "2405839",
    "end": "2413760"
  },
  {
    "text": "let's gonna go ahead and grab the endpoint",
    "start": "2413760",
    "end": "2419520"
  },
  {
    "text": "here's the endpoint",
    "start": "2422079",
    "end": "2425839"
  },
  {
    "text": "let's for now even though we can use both windows or sql for now let's go with the",
    "start": "2434720",
    "end": "2440720"
  },
  {
    "text": "sql server authentication and again we're going to use master user",
    "start": "2440720",
    "end": "2447440"
  },
  {
    "text": "let's pick adventure works let's test connection connection is fine",
    "start": "2450960",
    "end": "2456400"
  },
  {
    "text": "and let's click ok we just created it let's open it up",
    "start": "2456400",
    "end": "2462319"
  },
  {
    "text": "let's see the mappings all right",
    "start": "2462319",
    "end": "2467838"
  },
  {
    "text": "mapping seems to be okay all right so actually now we are ready to",
    "start": "2472319",
    "end": "2478960"
  },
  {
    "text": "execute ssis package from within the visual studio",
    "start": "2478960",
    "end": "2484800"
  },
  {
    "text": "sitting on my development box and again both of those connection managers are",
    "start": "2484800",
    "end": "2490880"
  },
  {
    "text": "the remote connection managers and the flat file that's sitting locally now there is only",
    "start": "2490880",
    "end": "2496720"
  },
  {
    "text": "one thing and that is [Music] and that's the",
    "start": "2496720",
    "end": "2503920"
  },
  {
    "text": "fact table fact currency rate",
    "start": "2506839",
    "end": "2513599"
  },
  {
    "text": "this table right here let's truncate that table because we're going to be inserting",
    "start": "2513599",
    "end": "2519119"
  },
  {
    "text": "our 12 brand new records",
    "start": "2519119",
    "end": "2523838"
  },
  {
    "text": "truncate table i just don't want to violate um any any foreign keys that",
    "start": "2524240",
    "end": "2531440"
  },
  {
    "text": "that might exist here so let's truncate that",
    "start": "2531440",
    "end": "2537040"
  },
  {
    "text": "all right and now let's go back",
    "start": "2537040",
    "end": "2542400"
  },
  {
    "text": "and let's hit start all right it's gonna build it's gonna",
    "start": "2542400",
    "end": "2549119"
  },
  {
    "text": "deploy and here we just it seems like we ingested",
    "start": "2549119",
    "end": "2555359"
  },
  {
    "text": "12 records we look those records up",
    "start": "2555359",
    "end": "2561119"
  },
  {
    "text": "against our rds instance",
    "start": "2561119",
    "end": "2566160"
  },
  {
    "text": "and we inserted those 12 records against our other rds instance",
    "start": "2566160",
    "end": "2574480"
  },
  {
    "text": "but again we just executed it from within the management studio now we need to work and we may need to",
    "start": "2574480",
    "end": "2581839"
  },
  {
    "text": "make that package ready for the deployment and then deploy it on the rds instance",
    "start": "2581839",
    "end": "2589440"
  },
  {
    "text": "all right let me stop that and let's work on a couple of things first",
    "start": "2589440",
    "end": "2595440"
  },
  {
    "text": "of all this lookup source will continue",
    "start": "2595440",
    "end": "2601760"
  },
  {
    "text": "to be a remote instance even after the deployment but this",
    "start": "2601760",
    "end": "2607839"
  },
  {
    "text": "destination connection manager will become local now when you work with ssis",
    "start": "2607839",
    "end": "2616000"
  },
  {
    "text": "on rds if your connection is local you have a choice you can do",
    "start": "2616000",
    "end": "2622880"
  },
  {
    "text": "windows auth or sql os when you're working with the remote con",
    "start": "2622880",
    "end": "2628079"
  },
  {
    "text": "remote instances sql authentication is the only option and obviously when you're working with",
    "start": "2628079",
    "end": "2636000"
  },
  {
    "text": "the sql auth you have two options you can store your credentials",
    "start": "2636000",
    "end": "2641200"
  },
  {
    "text": "with the connection manager itself which would mean that your your credentials will be embedded",
    "start": "2641200",
    "end": "2647760"
  },
  {
    "text": "in the in in in the package um they will be encrypted but but still they will be embedded in in",
    "start": "2647760",
    "end": "2653760"
  },
  {
    "text": "the package um or you can parameterize your connection",
    "start": "2653760",
    "end": "2659520"
  },
  {
    "text": "manager and essentially build and bind it at the runtime",
    "start": "2659520",
    "end": "2664640"
  },
  {
    "text": "all right so for then what i suggest we do for our destination let's go ahead",
    "start": "2664640",
    "end": "2672160"
  },
  {
    "text": "and let's switch to windows authentication since that's an option and for our lookup",
    "start": "2672160",
    "end": "2680319"
  },
  {
    "text": "table we will do we will parameterize and we will pass the password at the",
    "start": "2680319",
    "end": "2688839"
  },
  {
    "text": "runtime all right so let's do that",
    "start": "2688839",
    "end": "2696000"
  },
  {
    "text": "so here's the destination",
    "start": "2700000",
    "end": "2705119"
  },
  {
    "text": "and let's go ahead let's switch to from sql server auth to windows",
    "start": "2705119",
    "end": "2711599"
  },
  {
    "text": "authentication and here's one more very very important point",
    "start": "2711599",
    "end": "2718319"
  },
  {
    "text": "if you choose to use windows auth for the local connection managers you're",
    "start": "2718640",
    "end": "2724240"
  },
  {
    "text": "going to have to specify fully qualified domain name for your server name",
    "start": "2724240",
    "end": "2730240"
  },
  {
    "text": "now what you see right here is not a full qualified domain name this is the endpoint",
    "start": "2730240",
    "end": "2735839"
  },
  {
    "text": "right so the fully qualified domain name for our database 1 instance would be",
    "start": "2735839",
    "end": "2742800"
  },
  {
    "text": "database 1 dot corp 2",
    "start": "2742800",
    "end": "2748480"
  },
  {
    "text": "i'm sorry my corp 2 dot com",
    "start": "2748480",
    "end": "2755119"
  },
  {
    "text": "and let's now test the connection connection is successful and let's go ahead and let's save it",
    "start": "2755680",
    "end": "2765200"
  },
  {
    "text": "but for our lookup which is going against database 2",
    "start": "2766000",
    "end": "2773119"
  },
  {
    "text": "instance let's go ahead well actually it's not",
    "start": "2773119",
    "end": "2778560"
  },
  {
    "text": "here let's go ahead and let's parameterize",
    "start": "2778560",
    "end": "2784480"
  },
  {
    "text": "let's parameterize a password",
    "start": "2784480",
    "end": "2789838"
  },
  {
    "text": "and let's create a new parameter called",
    "start": "2790319",
    "end": "2799359"
  },
  {
    "text": "password uh we will give it a scope of it's going to be a package",
    "start": "2800839",
    "end": "2806960"
  },
  {
    "text": "the scope will be the package at the package level and let's click require it we will",
    "start": "2806960",
    "end": "2812880"
  },
  {
    "text": "require what will require a password password to be provided because otherwise we're not going to be able to",
    "start": "2812880",
    "end": "2819200"
  },
  {
    "text": "to authenticate all right and it doesn't look",
    "start": "2819200",
    "end": "2824560"
  },
  {
    "text": "it likes it and probably the reason is because we have not provided the",
    "start": "2824560",
    "end": "2830319"
  },
  {
    "text": "value for our password",
    "start": "2830319",
    "end": "2836079"
  },
  {
    "text": "parameter so here's the value let's save it let's go back to the data flow",
    "start": "2836079",
    "end": "2843119"
  },
  {
    "text": "and also every time every time you parameterize your connection manager",
    "start": "2843119",
    "end": "2848559"
  },
  {
    "text": "it's trying to work in offline mode so let's uncheck that and now you see a little a little",
    "start": "2848559",
    "end": "2856240"
  },
  {
    "text": "function icon here which means that your connection manager has been parameterized and it's going to be build",
    "start": "2856240",
    "end": "2861359"
  },
  {
    "text": "it at the runtime all right so um again we're preparing the package to be able",
    "start": "2861359",
    "end": "2867119"
  },
  {
    "text": "for us to be able to deploy it we just switched the authentication to windows authentication",
    "start": "2867119",
    "end": "2872800"
  },
  {
    "text": "on the destination side we parameterize the connection manager",
    "start": "2872800",
    "end": "2878559"
  },
  {
    "text": "on the source side and now let me flip back to my powerpoint and there are",
    "start": "2878559",
    "end": "2885280"
  },
  {
    "text": "a couple of more important parts i already mentioned that all input files output files temporary",
    "start": "2885280",
    "end": "2893119"
  },
  {
    "text": "files transient files stuff like this all has to go through the",
    "start": "2893119",
    "end": "2898400"
  },
  {
    "text": "s3 folder on the d drive and essentially there are very two important",
    "start": "2898400",
    "end": "2903680"
  },
  {
    "text": "uh uh ssis properties and one of them is blob temp storage",
    "start": "2903680",
    "end": "2910319"
  },
  {
    "text": "path and another one is buffer temp storage path so we're going to let's make sure that those",
    "start": "2910319",
    "end": "2915520"
  },
  {
    "text": "point to s3 folder and the second one is the this the second",
    "start": "2915520",
    "end": "2921520"
  },
  {
    "text": "limitation which is says that the protection mode for ssis package",
    "start": "2921520",
    "end": "2927119"
  },
  {
    "text": "has to be do not save password so let's go ahead and let's let's make sure that those two are set",
    "start": "2927119",
    "end": "2933280"
  },
  {
    "text": "up properly all right um here",
    "start": "2933280",
    "end": "2940400"
  },
  {
    "text": "these two paths blopdam storage and buffer dam storage",
    "start": "2940400",
    "end": "2947359"
  },
  {
    "text": "are pointing to d s3 folder local folders and then",
    "start": "2947359",
    "end": "2954319"
  },
  {
    "text": "the protection mode let's go to project my ssis pipeline properties",
    "start": "2954319",
    "end": "2964640"
  },
  {
    "text": "or there's it's somewhere here here on the security protection level let's flip that to",
    "start": "2964800",
    "end": "2972800"
  },
  {
    "text": "do not say save sensitive data again this is a hard requirement for you",
    "start": "2973359",
    "end": "2978640"
  },
  {
    "text": "to be able to execute your ssis package on rgs do not save sensitive apply",
    "start": "2978640",
    "end": "2986960"
  },
  {
    "text": "all right all right that was a package level and now",
    "start": "2988000",
    "end": "2995440"
  },
  {
    "text": "i'm sorry that was a project level and now at the package level",
    "start": "2995440",
    "end": "3000880"
  },
  {
    "text": "we should have the same",
    "start": "3000880",
    "end": "3005838"
  },
  {
    "text": "the same setting the the protection level here the protection level",
    "start": "3010000",
    "end": "3016720"
  },
  {
    "text": "we should change that to do not save sensitive all right now uh they should",
    "start": "3017040",
    "end": "3023599"
  },
  {
    "text": "match let's see now if we can build that all right so looks like our build is successful",
    "start": "3023599",
    "end": "3030240"
  },
  {
    "text": "now and we are ready to go ahead and try to upload and deploy this ssis package",
    "start": "3030240",
    "end": "3038960"
  },
  {
    "text": "on rds instance all right let's rebuild we're going to rebuild the solution",
    "start": "3038960",
    "end": "3045760"
  },
  {
    "text": "we're going to pick our is pack and by the way is pack deployment model",
    "start": "3045760",
    "end": "3052160"
  },
  {
    "text": "is the only deployment model that is supported on rds so you cannot take individually you cannot take the dtsx",
    "start": "3052160",
    "end": "3060079"
  },
  {
    "text": "files and deploy them manually ease pack is the only way to go",
    "start": "3060079",
    "end": "3065599"
  },
  {
    "text": "so let me open up another folder",
    "start": "3065599",
    "end": "3070160"
  },
  {
    "text": "and let's grab the is pack so i'm going to copy",
    "start": "3072640",
    "end": "3079440"
  },
  {
    "text": "this file and i'm going to place this file on my",
    "start": "3079440",
    "end": "3085200"
  },
  {
    "text": "desktop and the reason why i want to place it on my desktop",
    "start": "3085200",
    "end": "3091920"
  },
  {
    "text": "is because i want to upload it to my s3 bucket and now hopefully you can",
    "start": "3091920",
    "end": "3099280"
  },
  {
    "text": "understand how all the pieces fit together right we needed the s3 integration",
    "start": "3099280",
    "end": "3105040"
  },
  {
    "text": "because this is the way you deploy ssis package so here's on this iss packages let's go",
    "start": "3105040",
    "end": "3113119"
  },
  {
    "text": "ahead and let's upload our ispac file desktop",
    "start": "3113119",
    "end": "3124880"
  },
  {
    "text": "and let's upload and let's also upload our currency file because that's the",
    "start": "3124880",
    "end": "3130240"
  },
  {
    "text": "flat file that we're going to need to have locally in order to be able to ingest it",
    "start": "3130240",
    "end": "3135280"
  },
  {
    "text": "all right add and let's find it's also i have it on my",
    "start": "3135280",
    "end": "3142160"
  },
  {
    "text": "desktop let's upload that all right so now we have both of these files let's go back to our",
    "start": "3142160",
    "end": "3148400"
  },
  {
    "text": "instance and over here i have a script",
    "start": "3148400",
    "end": "3156078"
  },
  {
    "text": "on the desktop and let's upload and execute all right",
    "start": "3160240",
    "end": "3167440"
  },
  {
    "text": "so this is essentially the script that uploads",
    "start": "3167440",
    "end": "3174640"
  },
  {
    "text": "uh a file from the s3 bucket",
    "start": "3174640",
    "end": "3179760"
  },
  {
    "text": "downloads the file from the s3 bucket down to the rds instance but in order for us to work with those",
    "start": "3179760",
    "end": "3187359"
  },
  {
    "text": "commands with those apis we have to be windows authenticated not sql",
    "start": "3187359",
    "end": "3192880"
  },
  {
    "text": "authenticated and currently we are connected as the master user which is sql authenticated",
    "start": "3192880",
    "end": "3199599"
  },
  {
    "text": "user right so why don't we go ahead and we connect to this engine again but this time we're going",
    "start": "3199599",
    "end": "3206480"
  },
  {
    "text": "to go with windows auth the user obviously is my corp 2 slash",
    "start": "3206480",
    "end": "3212160"
  },
  {
    "text": "admin so let's get connected and now let's open up a new window",
    "start": "3212160",
    "end": "3219359"
  },
  {
    "text": "now we connect it as an admin let's just copy that script",
    "start": "3219359",
    "end": "3226160"
  },
  {
    "text": "and let's close the original one all right so again what this does it's just going",
    "start": "3229280",
    "end": "3235119"
  },
  {
    "text": "to transfer the east pack from our s3 bucket down to",
    "start": "3235119",
    "end": "3240960"
  },
  {
    "text": "the rds instance and then this command will transfer the currency text file",
    "start": "3240960",
    "end": "3247680"
  },
  {
    "text": "from s3 bucket down to the rds so let's execute these two",
    "start": "3247680",
    "end": "3254720"
  },
  {
    "text": "we triggered an exception let me let me zoom in",
    "start": "3254880",
    "end": "3261280"
  },
  {
    "text": "and the exception is that s3 integration feature is not enabled and that does make perfect sense",
    "start": "3263040",
    "end": "3270400"
  },
  {
    "text": "because when we launched our rds instance what we forgot to do what i forgot to do",
    "start": "3270400",
    "end": "3279040"
  },
  {
    "text": "is to enable s3 integration so we go here this is our database one",
    "start": "3279040",
    "end": "3286880"
  },
  {
    "text": "and over here under the managed i am roles we're going",
    "start": "3286880",
    "end": "3293520"
  },
  {
    "text": "to need we're going to need to associate an i am role that has enough permissions to copy and",
    "start": "3293520",
    "end": "3301920"
  },
  {
    "text": "download and upload files against the s3 bucket and uh and that's the feature that that's the",
    "start": "3301920",
    "end": "3308400"
  },
  {
    "text": "s3 integration so let's add this roll and it takes",
    "start": "3308400",
    "end": "3315280"
  },
  {
    "text": "i don't know 10 20 seconds well here here's it's active now all right let's go back",
    "start": "3315440",
    "end": "3322799"
  },
  {
    "text": "let's go back to [Music] our ssms and let's try to repeat",
    "start": "3322799",
    "end": "3330960"
  },
  {
    "text": "all right so both commands both tasks have been created again download",
    "start": "3330960",
    "end": "3338400"
  },
  {
    "text": "download and upload task asynchronous tasks they return as soon as they've been created",
    "start": "3338400",
    "end": "3344160"
  },
  {
    "text": "but then you can monitor the progress of of those tasks by executing this rds fn task status",
    "start": "3344160",
    "end": "3353040"
  },
  {
    "text": "and if you specify null comma zero it's just going to return everything so",
    "start": "3353040",
    "end": "3359440"
  },
  {
    "text": "here's our tasks and that's going to take a minute or two so i'm going to pause",
    "start": "3359440",
    "end": "3367359"
  },
  {
    "text": "it's been about minute and a half so let's execute the status query again and it seems like",
    "start": "3367359",
    "end": "3376000"
  },
  {
    "text": "both of our downloads the download for the um my ssis pipeline",
    "start": "3376000",
    "end": "3382799"
  },
  {
    "text": "is pack and currency text file have been successfully completed",
    "start": "3382799",
    "end": "3389280"
  },
  {
    "text": "so now we're coming up on this next and and essentially the very last task and that is a deployment of the",
    "start": "3389280",
    "end": "3396559"
  },
  {
    "text": "package so let's go ahead and let's create that job",
    "start": "3396559",
    "end": "3402240"
  },
  {
    "text": "all right so task type ssis deploy project has been created",
    "start": "3402240",
    "end": "3407760"
  },
  {
    "text": "and let's monitor the status the task has been created and again",
    "start": "3407760",
    "end": "3412960"
  },
  {
    "text": "that's going to take a minute a minute or so",
    "start": "3412960",
    "end": "3419040"
  },
  {
    "text": "so i'll pause all right that's been about two minutes",
    "start": "3419040",
    "end": "3425359"
  },
  {
    "text": "and if we execute the status command now now we see that we triggered an error",
    "start": "3425359",
    "end": "3431040"
  },
  {
    "text": "all right so the way you debug it essentially you",
    "start": "3431040",
    "end": "3436160"
  },
  {
    "text": "pick up all of the exceptions here in the task info so let's copy that and let's see",
    "start": "3436160",
    "end": "3444480"
  },
  {
    "text": "let me let me parse it a little bit",
    "start": "3444480",
    "end": "3448799"
  },
  {
    "text": "all right so what this says is that deployment has failed",
    "start": "3451119",
    "end": "3459280"
  },
  {
    "text": "because it cannot find the folder for my ssis pipeline and that also",
    "start": "3459280",
    "end": "3466640"
  },
  {
    "text": "makes total sense because we have not created the folder",
    "start": "3466640",
    "end": "3473520"
  },
  {
    "text": "let's create a folder description let's click ok now folder is created",
    "start": "3473520",
    "end": "3481760"
  },
  {
    "text": "let's repeat the task all right task has been created",
    "start": "3481760",
    "end": "3489839"
  },
  {
    "text": "i'm gonna pause and we'll come back in about a minute or two",
    "start": "3492559",
    "end": "3498640"
  },
  {
    "text": "all right it's been about a minute we refreshed the status and now we see that our ssis deployment",
    "start": "3499200",
    "end": "3506720"
  },
  {
    "text": "project has now been successful so we just successfully deployed",
    "start": "3506720",
    "end": "3512640"
  },
  {
    "text": "our ssis package to to",
    "start": "3512640",
    "end": "3518720"
  },
  {
    "text": "to rds instance so here's you can you can see in the object",
    "start": "3518720",
    "end": "3524640"
  },
  {
    "text": "explorer you can see now our package dot dtsx",
    "start": "3524640",
    "end": "3532240"
  },
  {
    "text": "now let's go ahead and let's try to execute but before we go ahead and execute let's",
    "start": "3532240",
    "end": "3538960"
  },
  {
    "text": "cancel out of here let's go ahead and let's configure it first if you remember correctly when we were",
    "start": "3538960",
    "end": "3546079"
  },
  {
    "text": "in our visual studio we said that the connection manager",
    "start": "3546079",
    "end": "3552240"
  },
  {
    "text": "that end up pointing to the local instance is going to have windows integrated",
    "start": "3552240",
    "end": "3557839"
  },
  {
    "text": "authentication connection that's going to point to a remote instance will be parameterized",
    "start": "3557839",
    "end": "3563920"
  },
  {
    "text": "and we created a password parameter right and essentially this this little",
    "start": "3563920",
    "end": "3570160"
  },
  {
    "text": "function icon is the sign that this connection manager has been parameterized",
    "start": "3570160",
    "end": "3575839"
  },
  {
    "text": "so now when we're trying to ex before we try and try to execute it we need to go ahead",
    "start": "3575839",
    "end": "3581040"
  },
  {
    "text": "and provide the value so let's go ahead and",
    "start": "3581040",
    "end": "3586319"
  },
  {
    "text": "let's provide the value for the password so by doing so we essentially",
    "start": "3586319",
    "end": "3595520"
  },
  {
    "text": "[Music] prevented that password being saved within the package itself",
    "start": "3595520",
    "end": "3602640"
  },
  {
    "text": "so we reconfigured the the",
    "start": "3602640",
    "end": "3609200"
  },
  {
    "text": "the the variable and now actually one more thing let's go ahead and check there is",
    "start": "3609200",
    "end": "3615280"
  },
  {
    "text": "there's still our records after our first execution so let's go ahead and let's truncate",
    "start": "3615280",
    "end": "3621359"
  },
  {
    "text": "that and let's make sure before we execute anything let's make sure that we have",
    "start": "3621359",
    "end": "3626960"
  },
  {
    "text": "completely empty table all right so now let's go ahead to the package and let's",
    "start": "3626960",
    "end": "3635599"
  },
  {
    "text": "execute parameter we already populated the value let's click ok here's the message from",
    "start": "3635599",
    "end": "3643200"
  },
  {
    "text": "visual studio saying that the operation the task has been created it's asynchronous call let's say yes",
    "start": "3643200",
    "end": "3650799"
  },
  {
    "text": "that we want to see the report and here we go we have a successful",
    "start": "3650799",
    "end": "3656880"
  },
  {
    "text": "execution of our ssis package all right well let's go back to the",
    "start": "3656880",
    "end": "3664799"
  },
  {
    "text": "um to this query and let's see whether that indeed was a successful",
    "start": "3664799",
    "end": "3671839"
  },
  {
    "text": "pipeline execution and indeed we have we have our 12 records",
    "start": "3671839",
    "end": "3677680"
  },
  {
    "text": "which brings us to the end of our demo but before we close i'd like to go back to our powerpoint",
    "start": "3677680",
    "end": "3683440"
  },
  {
    "text": "and spend a minute uh talking about limitations now you have five bullet points here",
    "start": "3683440",
    "end": "3689200"
  },
  {
    "text": "it is not the entire list you can find the entire list uh following that link down below",
    "start": "3689200",
    "end": "3695680"
  },
  {
    "text": "now every time you talk ssis is a programming environment and every time",
    "start": "3695680",
    "end": "3701040"
  },
  {
    "text": "you talk about limitations of the programming environment in them on the managed platform um",
    "start": "3701040",
    "end": "3707359"
  },
  {
    "text": "you you pretty much can be sure that that list will be substantial so again",
    "start": "3707359",
    "end": "3713440"
  },
  {
    "text": "follow that link you can find the full list uh i'm just going to mention few big ones the first one is the fact",
    "start": "3713440",
    "end": "3721359"
  },
  {
    "text": "on the on the local host you can only work with d slash s3 folder",
    "start": "3721359",
    "end": "3728640"
  },
  {
    "text": "now again for input output files temporary files that's where it all goes you can manage",
    "start": "3728640",
    "end": "3735440"
  },
  {
    "text": "your subfolder structure on the d slash f3 that's that's perfectly fine",
    "start": "3735440",
    "end": "3743520"
  },
  {
    "text": "you can you can absolutely do that but if you manage to place any files outside",
    "start": "3743520",
    "end": "3749119"
  },
  {
    "text": "of that d slash s3 we will be actively looking for those files and we will delete them",
    "start": "3749119",
    "end": "3755440"
  },
  {
    "text": "now the second one do not save password protection mode and we've talked quite a",
    "start": "3755440",
    "end": "3761599"
  },
  {
    "text": "bit about that already now the third one uh currently there is no integration with",
    "start": "3761599",
    "end": "3769440"
  },
  {
    "text": "fsx or maybe a self-managed smb file share so if you have a an input file",
    "start": "3769440",
    "end": "3777039"
  },
  {
    "text": "or maybe an output file then again that local d d slash s3 folder is the",
    "start": "3777039",
    "end": "3784400"
  },
  {
    "text": "only option the fourth limitation is imported and restored in an ssis db database from another",
    "start": "3784400",
    "end": "3791760"
  },
  {
    "text": "instance is not supported and as we already discussed the connection manager against the",
    "start": "3791760",
    "end": "3798079"
  },
  {
    "text": "remote instance can use sql authentication only if you work with a local connection",
    "start": "3798079",
    "end": "3804480"
  },
  {
    "text": "manager then then you can do both you can do sql auth or windows off which brings us to the",
    "start": "3804480",
    "end": "3812799"
  },
  {
    "text": "end of the of this demo i hope that was beneficial i hope now you can see",
    "start": "3812799",
    "end": "3818079"
  },
  {
    "text": "that you can host your ssis packages on rds instance itself and we just",
    "start": "3818079",
    "end": "3823520"
  },
  {
    "text": "demonstrated that and with that i would like to thank every single one of you for finding time",
    "start": "3823520",
    "end": "3830000"
  },
  {
    "text": "to watching that to watch that video and uh we would like i would like to",
    "start": "3830000",
    "end": "3836720"
  },
  {
    "text": "wish you all happy computing from all of us at aws thank you very much",
    "start": "3836720",
    "end": "3844319"
  }
]