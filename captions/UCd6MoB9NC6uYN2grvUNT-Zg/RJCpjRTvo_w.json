[
  {
    "text": "yes can you hear me here",
    "start": "4000",
    "end": "9120"
  },
  {
    "text": "you guys yes so what's your name sir brian brian",
    "start": "9120",
    "end": "17600"
  },
  {
    "text": "o'brien let me see i think i have something for you bro",
    "start": "17600",
    "end": "24160"
  },
  {
    "text": "yes one message what does that mean hi",
    "start": "24160",
    "end": "31199"
  },
  {
    "text": "how are you are you happy yes we are happy let me see to have",
    "start": "31199",
    "end": "38000"
  },
  {
    "text": "people yes to you what's your name",
    "start": "38000",
    "end": "44719"
  },
  {
    "text": "jason thank you jason all right let me see are you happy",
    "start": "44719",
    "end": "52800"
  },
  {
    "text": "good for you okay",
    "start": "52800",
    "end": "59120"
  },
  {
    "text": "let me see what's her name sir",
    "start": "59120",
    "end": "62960"
  },
  {
    "text": "no okay it's a secret okay all right let me find",
    "start": "64400",
    "end": "72560"
  },
  {
    "text": "out who is here oh i think i got something for you john alan of course yes alan",
    "start": "72560",
    "end": "82159"
  },
  {
    "text": "this is for you thank you very much all right you're welcome i think i know you let me",
    "start": "82159",
    "end": "91520"
  },
  {
    "text": "jeffrey yes my friend that's for you jacklyn okay oh",
    "start": "92720",
    "end": "100400"
  },
  {
    "text": "i know you're jeremy yes are you okay are you you're happy too happy happy",
    "start": "100400",
    "end": "106960"
  },
  {
    "text": "everybody let me see we cannot look inside right",
    "start": "106960",
    "end": "112479"
  },
  {
    "text": "all right that's for you all right let me see if i have some more here",
    "start": "112479",
    "end": "118799"
  },
  {
    "text": "oh there's one guy here that i really know",
    "start": "118799",
    "end": "125359"
  },
  {
    "text": "how are you this is for you brother of daniels",
    "start": "125600",
    "end": "133039"
  },
  {
    "text": "okay oh let me see",
    "start": "133280",
    "end": "137680"
  },
  {
    "text": "you sir i know you too young yes this is for you",
    "start": "138319",
    "end": "146319"
  },
  {
    "text": "thank you and the last one it's for me no oh",
    "start": "146319",
    "end": "157360"
  },
  {
    "text": "are you okay how are you doing good right",
    "start": "157360",
    "end": "165519"
  },
  {
    "text": "mark no john no",
    "start": "165519",
    "end": "172319"
  },
  {
    "text": "help me tom thomas thomas yes this is for you",
    "start": "172319",
    "end": "178640"
  },
  {
    "text": "thomas thank you very much all right so",
    "start": "178640",
    "end": "185760"
  },
  {
    "text": "actually i forgot something where is that thing to change the slides",
    "start": "185760",
    "end": "193519"
  },
  {
    "text": "oh all right where is that let me find uh could someone help me here i don't",
    "start": "193680",
    "end": "200879"
  },
  {
    "text": "know where is that thing to change the slides",
    "start": "200879",
    "end": "204959"
  },
  {
    "text": "whoa this is part of the show okay",
    "start": "206560",
    "end": "214239"
  },
  {
    "text": "all right i don't think so",
    "start": "215680",
    "end": "219680"
  },
  {
    "text": "um where is that okay so",
    "start": "220720",
    "end": "228319"
  },
  {
    "text": "who am i i'm the mailman from brazil",
    "start": "235439",
    "end": "243519"
  },
  {
    "text": "my friends why i don't know how to use",
    "start": "246799",
    "end": "254000"
  },
  {
    "text": "this uh i still need the thing i think this is",
    "start": "254000",
    "end": "259120"
  },
  {
    "text": "this big one right okay what have i just done",
    "start": "259120",
    "end": "265520"
  },
  {
    "text": "i have delivered some message right so let's suppose",
    "start": "266800",
    "end": "277040"
  },
  {
    "text": "you are going to return all the message to me at once right everybody together",
    "start": "278240",
    "end": "285840"
  },
  {
    "text": "another question how many hands should i have to receive all the message",
    "start": "285840",
    "end": "293919"
  },
  {
    "text": "at once and more it's not just about receive the message",
    "start": "293919",
    "end": "300800"
  },
  {
    "text": "of the message it's about processing the message and you're gonna like this",
    "start": "300800",
    "end": "308080"
  },
  {
    "text": "how many mailmen should i have to process all the data",
    "start": "308400",
    "end": "314800"
  },
  {
    "text": "for how long and when do i need those moments all of them are",
    "start": "314800",
    "end": "321199"
  },
  {
    "text": "my brothers from brazil the second one is me you can see",
    "start": "321199",
    "end": "330080"
  },
  {
    "text": "yes okay so now that everybody's happy that's the",
    "start": "331199",
    "end": "337840"
  },
  {
    "text": "last session of the day right after this party okay",
    "start": "337840",
    "end": "343440"
  },
  {
    "text": "who am i i'm a solution arctic i work in latin america team",
    "start": "343440",
    "end": "350479"
  },
  {
    "text": "and what we are going to do here in this session we are going to design and build",
    "start": "350479",
    "end": "358319"
  },
  {
    "text": "an application that could handle any volume of message in this session okay so it's a challenge",
    "start": "358319",
    "end": "367360"
  },
  {
    "text": "because i'm gonna do that live so okay let's see okay",
    "start": "367360",
    "end": "374720"
  },
  {
    "text": "what is the scenario super bowl and we are going to have a promotion",
    "start": "374720",
    "end": "382160"
  },
  {
    "text": "who is going to win the game the match and this promotion is going to be based",
    "start": "382160",
    "end": "388960"
  },
  {
    "text": "on sms so i send the sms with the",
    "start": "388960",
    "end": "394160"
  },
  {
    "text": "name of the team that's going to win like teammate or team b okay that's the idea requirement",
    "start": "394160",
    "end": "401039"
  },
  {
    "text": "we cannot lose any message we need to process all the valid",
    "start": "401039",
    "end": "406880"
  },
  {
    "text": "messages we need to log all the invalid message",
    "start": "406880",
    "end": "412319"
  },
  {
    "text": "and errors we need a beautiful dashboard and we're",
    "start": "412319",
    "end": "417599"
  },
  {
    "text": "going to deploy it today and really important we must process out the message",
    "start": "417599",
    "end": "425759"
  },
  {
    "text": "during the event we cannot say the winner is",
    "start": "425759",
    "end": "432160"
  },
  {
    "text": "thomas after one month right it has been the end of the game",
    "start": "432160",
    "end": "439199"
  },
  {
    "text": "okay so who is going to be in the front line it needs to be fast it needs to be",
    "start": "439199",
    "end": "447120"
  },
  {
    "text": "scalable right makes sense okay it needs to be reliable",
    "start": "447120",
    "end": "456240"
  },
  {
    "text": "and i want it simple simple fully managed service",
    "start": "456240",
    "end": "464160"
  },
  {
    "text": "simple queue service awesome sqs right",
    "start": "464160",
    "end": "471280"
  },
  {
    "text": "okay that is the first thing we're gonna add to our architecture",
    "start": "471280",
    "end": "476879"
  },
  {
    "text": "so why sqs because it can handle any volume of data any level throughput",
    "start": "476879",
    "end": "484080"
  },
  {
    "text": "we cannot lose end message and that's why we're going to use sqs",
    "start": "484479",
    "end": "490080"
  },
  {
    "text": "we don't need to spend money up front because we are using it as a service",
    "start": "490160",
    "end": "497360"
  },
  {
    "text": "and here we go we have the sqs in our architecture now we have all the",
    "start": "497440",
    "end": "503360"
  },
  {
    "text": "messages on sqs and now we need to process let's see how it's going to be",
    "start": "503360",
    "end": "509599"
  },
  {
    "text": "so we have many instances many servers",
    "start": "509599",
    "end": "515039"
  },
  {
    "text": "but the question is how many instances do i need to process all the messages",
    "start": "515039",
    "end": "522880"
  },
  {
    "text": "before we before i answer that let's see something interesting",
    "start": "522880",
    "end": "528800"
  },
  {
    "text": "each instance is going to run many threads",
    "start": "528800",
    "end": "534399"
  },
  {
    "text": "why because we want to use as much as we can of each instance",
    "start": "534399",
    "end": "540880"
  },
  {
    "text": "because then we reduce the costs and we increase performance",
    "start": "540880",
    "end": "546959"
  },
  {
    "text": "make sense okay liking okay cool",
    "start": "546959",
    "end": "553839"
  },
  {
    "text": "so we have many threads on uh one instance okay so this is our texture",
    "start": "553839",
    "end": "561440"
  },
  {
    "text": "you have a laser here oh yeah so we have here the workers and each worker with mood",
    "start": "561440",
    "end": "569519"
  },
  {
    "text": "threads awesome but i didn't answer how many instances do we need let's do some mathematic",
    "start": "569519",
    "end": "578240"
  },
  {
    "text": "one instance can run one hundred thousand message per minute how",
    "start": "578240",
    "end": "584000"
  },
  {
    "text": "do i know that because i've been running some tests and i know my application",
    "start": "584000",
    "end": "590160"
  },
  {
    "text": "and i find out that if i use m1x large instance i reach 100 000 masses per minute",
    "start": "590160",
    "end": "597839"
  },
  {
    "text": "i have to run this test and you have to run the stats in your own application you have to understand your application",
    "start": "597839",
    "end": "604160"
  },
  {
    "text": "behavior so 10 instance 1 million message per minute 10 instance 5 million message",
    "start": "604160",
    "end": "613519"
  },
  {
    "text": "in 5 minutes now we know",
    "start": "613519",
    "end": "618959"
  },
  {
    "text": "how many instances we are going to need but let me ask you something do we know",
    "start": "618959",
    "end": "624560"
  },
  {
    "text": "how many messages are we going to receive no right so",
    "start": "624560",
    "end": "633279"
  },
  {
    "text": "what you're going to do is we are going to create a multi-scaling group",
    "start": "633279",
    "end": "639360"
  },
  {
    "text": "that is based on the number of messages visible in the queue",
    "start": "639760",
    "end": "645279"
  },
  {
    "text": "and we are going to set alarm here that says",
    "start": "645279",
    "end": "653279"
  },
  {
    "text": "if the queue has more than 5 million 6 million or any number you want add",
    "start": "653279",
    "end": "659360"
  },
  {
    "text": "more x number of instances so if you receive more message you have more machines if you don't have",
    "start": "659360",
    "end": "666560"
  },
  {
    "text": "too much too many message you don't need those servers",
    "start": "666560",
    "end": "672640"
  },
  {
    "text": "make sense is it okay are you recording yeah oh no",
    "start": "672640",
    "end": "680000"
  },
  {
    "text": "ah youtube you shouldn't do that i think well",
    "start": "680000",
    "end": "687200"
  },
  {
    "text": "anyway so we should then uh",
    "start": "687200",
    "end": "692480"
  },
  {
    "text": "we process the data and what are going to do with that data be polite what are going to do with that",
    "start": "692480",
    "end": "698959"
  },
  {
    "text": "message that we have in our hands we need to save save the message that what",
    "start": "698959",
    "end": "707360"
  },
  {
    "text": "to save the message exactly now we need to save and we need a high",
    "start": "707360",
    "end": "714720"
  },
  {
    "text": "throughput to save because we have many messages arriving so who is going to be the service",
    "start": "714720",
    "end": "722639"
  },
  {
    "text": "that is really awesome for that dynamodb cool",
    "start": "722639",
    "end": "729200"
  },
  {
    "text": "and we're going to have two tables valid votes and valid votes make sense valid votes",
    "start": "729200",
    "end": "735839"
  },
  {
    "text": "to valid vote invalid votes to vote",
    "start": "735839",
    "end": "740959"
  },
  {
    "text": "simple okay so this is our architecture sqs without the message autoscaling",
    "start": "740959",
    "end": "748480"
  },
  {
    "text": "group for the instance and two tables in dynamodb",
    "start": "748480",
    "end": "753600"
  },
  {
    "text": "next we are going to build our dashboard and our dashboard",
    "start": "753600",
    "end": "760880"
  },
  {
    "text": "and yes it's beautiful it was designed by one great architect from amazon you know",
    "start": "760880",
    "end": "770560"
  },
  {
    "text": "okay that's our dashboard uh we're going to deploy it later it's going to be okay so in the",
    "start": "770839",
    "end": "777600"
  },
  {
    "text": "end we're going to have after the dynamodb we're going to have the dashboard reading the message",
    "start": "777600",
    "end": "783760"
  },
  {
    "text": "or the the records or the data from dynamodb and take a look at this green icon over",
    "start": "783760",
    "end": "789839"
  },
  {
    "text": "here it means we're going to use binstalk to deploy it just because it's really good and make",
    "start": "789839",
    "end": "797920"
  },
  {
    "text": "our lives easy okay all right so the benefits",
    "start": "797920",
    "end": "803600"
  },
  {
    "text": "of this architecture let's see i'm ready for any level of throughput",
    "start": "803600",
    "end": "811200"
  },
  {
    "text": "i'm ready for any required sla why because if i need to process all the",
    "start": "811200",
    "end": "816399"
  },
  {
    "text": "data in a short period of time i can add more machines",
    "start": "816399",
    "end": "821920"
  },
  {
    "text": "and low cost because i'm using full managed q service",
    "start": "821920",
    "end": "827519"
  },
  {
    "text": "the infrastructure is based on the required sla and i don't need that infrastructure after the event",
    "start": "827519",
    "end": "834480"
  },
  {
    "text": "right i just stop it and done cool okay",
    "start": "834480",
    "end": "840639"
  },
  {
    "text": "the challenge is i'm going to do this live",
    "start": "840639",
    "end": "847199"
  },
  {
    "text": "i'm going to process 10 million off message in five minutes actually i'm going to process 20 million of the message in 10 minutes",
    "start": "847199",
    "end": "853120"
  },
  {
    "text": "is that okay that's okay okay so that is the challenge so",
    "start": "853120",
    "end": "859519"
  },
  {
    "text": "let's go deep and let's do some code and let's deploy this architecture",
    "start": "859519",
    "end": "866079"
  },
  {
    "text": "let's understand something each thread is going to connect to sqs",
    "start": "866079",
    "end": "872560"
  },
  {
    "text": "then it's going to read up to 10 messages then it's going to validate the message",
    "start": "872560",
    "end": "880800"
  },
  {
    "text": "this is my business logic i just validate if it's a in the right format and that's okay",
    "start": "880800",
    "end": "886560"
  },
  {
    "text": "and i'm going to save as valid or invalid in the dynamodb after that i'm going to delete",
    "start": "886560",
    "end": "893839"
  },
  {
    "text": "the message from the queue okay right uh good thing here as we are using sqs",
    "start": "893839",
    "end": "902399"
  },
  {
    "text": "when i read the message from the the queue it's not visible anymore to the other",
    "start": "902399",
    "end": "908720"
  },
  {
    "text": "workers and i i can set a timeout if i can't process that data on that timeout of",
    "start": "908720",
    "end": "915680"
  },
  {
    "text": "anything happen the message becomes visible again okay right so let's do it let's do this",
    "start": "915680",
    "end": "928399"
  },
  {
    "text": "so now it's the moment that i have to switch to my notebook and let's see if it's working",
    "start": "928399",
    "end": "937519"
  },
  {
    "text": "all right here",
    "start": "937519",
    "end": "943759"
  },
  {
    "text": "a cake here oh i have to push something here they said it's written mac that's it",
    "start": "948880",
    "end": "958079"
  },
  {
    "text": "yes the password everybody knows the beautiful architect",
    "start": "959440",
    "end": "966240"
  },
  {
    "text": "one two three yes one don't you agree",
    "start": "966240",
    "end": "974160"
  },
  {
    "text": "come on okay let me open the poor point here",
    "start": "974240",
    "end": "980240"
  },
  {
    "text": "and let's go step by step and let's see what happened on each step of the",
    "start": "980240",
    "end": "987360"
  },
  {
    "text": "each thread okay first step connect to sqs and then",
    "start": "987360",
    "end": "994639"
  },
  {
    "text": "ready to read up to 10 message so i'm going to move to my eclipse can",
    "start": "994639",
    "end": "1002800"
  },
  {
    "text": "you see okay here as you can see",
    "start": "1002800",
    "end": "1009680"
  },
  {
    "text": "already installed the plugin to eclipsey and i can see all the service",
    "start": "1009680",
    "end": "1016399"
  },
  {
    "text": "right so if i go here on sqs i'm able to see that i",
    "start": "1016399",
    "end": "1023839"
  },
  {
    "text": "have already two cues one for tests and one for production environment let's open this",
    "start": "1023839",
    "end": "1031280"
  },
  {
    "text": "one and i have here some samples right the data the standard id and",
    "start": "1031280",
    "end": "1038720"
  },
  {
    "text": "you can see that i have here around two millimeters this is my queue that i used to to test and",
    "start": "1038720",
    "end": "1046480"
  },
  {
    "text": "dynamo debate tables i have the valid votes and the valid votes and just two others",
    "start": "1046480",
    "end": "1053280"
  },
  {
    "text": "to test awesome okay so let's let's see the code",
    "start": "1053280",
    "end": "1060960"
  },
  {
    "text": "i have two projects the dashboard and this name that i like it the inventor message",
    "start": "1060960",
    "end": "1066720"
  },
  {
    "text": "processor okay so let's see the main class of this project and",
    "start": "1066720",
    "end": "1075600"
  },
  {
    "text": "is that okay to read okay first thing i'm going to get parameters",
    "start": "1077360",
    "end": "1084480"
  },
  {
    "text": "from the environment and this is really important because i'm dealing with many instances",
    "start": "1084480",
    "end": "1090160"
  },
  {
    "text": "and i want to be able to change the behavior of the application when it starts or maybe on the fly so",
    "start": "1090160",
    "end": "1096080"
  },
  {
    "text": "it's important to have phonometers okay one of them is the number of",
    "start": "1096080",
    "end": "1101120"
  },
  {
    "text": "threads okay so here on this line i create and this is java okay",
    "start": "1101120",
    "end": "1108720"
  },
  {
    "text": "i create the uh thread pull off with specific number of threads and",
    "start": "1108720",
    "end": "1114480"
  },
  {
    "text": "after that i just create one loop and for each loop i create",
    "start": "1114480",
    "end": "1120240"
  },
  {
    "text": "my thread right here this is the class that is running the thread okay so let's open this",
    "start": "1120240",
    "end": "1127919"
  },
  {
    "text": "thread and let's see what is happening inside of it the thread has a method called run",
    "start": "1127919",
    "end": "1134640"
  },
  {
    "text": "because it runs exactly walks",
    "start": "1134640",
    "end": "1141440"
  },
  {
    "text": "it depends on the instance right i'm kidding",
    "start": "1141440",
    "end": "1145840"
  },
  {
    "text": "okay so it's really simple don't judge it my code okay",
    "start": "1147440",
    "end": "1152559"
  },
  {
    "text": "please it's just a demonstration so inside the method run i have like an",
    "start": "1152559",
    "end": "1159520"
  },
  {
    "text": "infinite loop and the first thing i do i read the message from the queue",
    "start": "1159520",
    "end": "1164799"
  },
  {
    "text": "and then i process cool so the first thing we have to see here is",
    "start": "1164799",
    "end": "1171280"
  },
  {
    "text": "how i connect to the queue so let's open the service layer",
    "start": "1171280",
    "end": "1176799"
  },
  {
    "text": "i have a service layer and i create right here really simple",
    "start": "1176799",
    "end": "1183280"
  },
  {
    "text": "i'm i'm using profits file locally that is not a good option i could use",
    "start": "1183280",
    "end": "1190480"
  },
  {
    "text": "im roles it's much better but as a demonstration i'm using the properties file okay and",
    "start": "1190480",
    "end": "1197440"
  },
  {
    "text": "then i create this is aws sdk already amazon sdk client with",
    "start": "1197440",
    "end": "1202960"
  },
  {
    "text": "my credentials and i set the end point and take a look another again it's a parameter",
    "start": "1202960",
    "end": "1210320"
  },
  {
    "text": "and this is important we are working with a high volume of message it's application that we want to",
    "start": "1210320",
    "end": "1216559"
  },
  {
    "text": "change the behavior it's important to have parameters here so yeah this is the connection",
    "start": "1216559",
    "end": "1222799"
  },
  {
    "text": "so let's go back to the task and let's see how it reads up to 10",
    "start": "1222799",
    "end": "1229520"
  },
  {
    "text": "message it's really simple i create again this is sdk",
    "start": "1229520",
    "end": "1234559"
  },
  {
    "text": "i create this object receive message request i set the queue name and here",
    "start": "1234559",
    "end": "1242480"
  },
  {
    "text": "i set the max number of message and then simple as that i call",
    "start": "1242480",
    "end": "1249919"
  },
  {
    "text": "the sqs client in the sqls client the method call it receive message",
    "start": "1249919",
    "end": "1255280"
  },
  {
    "text": "and i use the message request and i get the message as a list",
    "start": "1255280",
    "end": "1263120"
  },
  {
    "text": "done i have the message let's see the next step the next step is validate each message",
    "start": "1263120",
    "end": "1271840"
  },
  {
    "text": "so let's go back to the task and process message this is my super complex",
    "start": "1271840",
    "end": "1278880"
  },
  {
    "text": "business logic for each message i just validate if it's a json format",
    "start": "1278880",
    "end": "1287120"
  },
  {
    "text": "and then i save the vote if it's valid or if it's invalid i save as invalid",
    "start": "1287120",
    "end": "1293120"
  },
  {
    "text": "message let's see the next step",
    "start": "1293120",
    "end": "1297679"
  },
  {
    "text": "next step is save as value invalid let's see the code to do that",
    "start": "1298480",
    "end": "1304640"
  },
  {
    "text": "so here i'm going to open the save vote method and here i create",
    "start": "1304640",
    "end": "1311919"
  },
  {
    "text": "a map key value a hash map i fill the map with the json object and",
    "start": "1311919",
    "end": "1319280"
  },
  {
    "text": "really simple this this is my code and this is the sdk i create the the object call it put item request",
    "start": "1319280",
    "end": "1327760"
  },
  {
    "text": "and the parameters are the name of the table and the item and i call the method",
    "start": "1327760",
    "end": "1334320"
  },
  {
    "text": "dynamodb but item done it's there let's see",
    "start": "1334320",
    "end": "1341919"
  },
  {
    "text": "the next step i have to delete for real the message from the queue",
    "start": "1341919",
    "end": "1349919"
  },
  {
    "text": "let's go back to this guy here so i here i save here i",
    "start": "1349919",
    "end": "1355919"
  },
  {
    "text": "save as invalid and at the end if everything is okay i said the message processed",
    "start": "1355919",
    "end": "1362720"
  },
  {
    "text": "and i create the delete message request the queue name the receipt handle each",
    "start": "1362720",
    "end": "1370159"
  },
  {
    "text": "message in the sqs has a receipt as a has id and i use this id",
    "start": "1370159",
    "end": "1375520"
  },
  {
    "text": "to remove it from the queue and i call the method on sqs call it delete message and i use delete",
    "start": "1375520",
    "end": "1381600"
  },
  {
    "text": "request it's done it's ready for class",
    "start": "1381600",
    "end": "1388080"
  },
  {
    "text": "classes in java to do this job okay so let's see",
    "start": "1388080",
    "end": "1396799"
  },
  {
    "text": "how does it work in my machine i'm going to run",
    "start": "1397600",
    "end": "1402960"
  },
  {
    "text": "this class that is the main class but as i'm working in the test environment i'm running it",
    "start": "1402960",
    "end": "1409600"
  },
  {
    "text": "against the queue test so let's run it",
    "start": "1409600",
    "end": "1417840"
  },
  {
    "text": "run it's going to be ready right here so let's see on the web administration too",
    "start": "1418080",
    "end": "1424480"
  },
  {
    "text": "what is happening so here i'm logged in and i have the same two cues we saw",
    "start": "1424480",
    "end": "1431600"
  },
  {
    "text": "at eclipse let's refresh this oops it's reading the wrong queue come",
    "start": "1431600",
    "end": "1437679"
  },
  {
    "text": "on let me change that sorry sorry let's change that because you know",
    "start": "1437679",
    "end": "1445360"
  },
  {
    "text": "let's call it q yes is that correct did you remember",
    "start": "1445360",
    "end": "1452000"
  },
  {
    "text": "thomas did you remember the name of the queue",
    "start": "1452000",
    "end": "1458320"
  },
  {
    "text": "thomas no it's q test you are not listening to me",
    "start": "1458320",
    "end": "1464320"
  },
  {
    "text": "come on qt s is the name of the queue so let's go back here q test let's run again",
    "start": "1464320",
    "end": "1470320"
  },
  {
    "text": "and see why it's important to have parameters hard coded",
    "start": "1470320",
    "end": "1476159"
  },
  {
    "text": "let's see okay here we go q test and we have",
    "start": "1481679",
    "end": "1488480"
  },
  {
    "text": "message in flight because i'm consuming and this number should decrease awesome",
    "start": "1488480",
    "end": "1496320"
  },
  {
    "text": "so the application is ready what is the next step",
    "start": "1496320",
    "end": "1503279"
  },
  {
    "text": "we have to deploy it first let's see another interesting",
    "start": "1505279",
    "end": "1512960"
  },
  {
    "text": "thing about the dashboard the dashboard is just a web application",
    "start": "1512960",
    "end": "1520559"
  },
  {
    "text": "and i as i'm using the plugin on eclipsey i can just do it like this amazon service deployed to",
    "start": "1520559",
    "end": "1528960"
  },
  {
    "text": "unless it being stock and i can choose my environment over there in the cloud",
    "start": "1528960",
    "end": "1534720"
  },
  {
    "text": "and just deploy it i've done this already okay because it takes some time to upload",
    "start": "1534720",
    "end": "1540720"
  },
  {
    "text": "and uh let's see how it is here this is the dashboard okay",
    "start": "1540720",
    "end": "1547919"
  },
  {
    "text": "we're gonna see a little bit more about it about this in a few minutes dashboards here it's run it's green i",
    "start": "1547919",
    "end": "1554400"
  },
  {
    "text": "have url and if i open it here we go okay we're gonna see more about it in a",
    "start": "1554400",
    "end": "1562000"
  },
  {
    "text": "few minutes okay so let's see the steps to deploy",
    "start": "1562000",
    "end": "1567039"
  },
  {
    "text": "all of this you can't see probably why",
    "start": "1567039",
    "end": "1575760"
  },
  {
    "text": "let's go back to the other one let's see",
    "start": "1575760",
    "end": "1580400"
  },
  {
    "text": "wait okay cool so",
    "start": "1582840",
    "end": "1590320"
  },
  {
    "text": "we have to create the queue we already have done that and we have to below the application to",
    "start": "1590320",
    "end": "1596159"
  },
  {
    "text": "s3 i've done that why do i have the application s3",
    "start": "1596159",
    "end": "1601600"
  },
  {
    "text": "because every time a new instance a launch this instance has a bootstrip",
    "start": "1601600",
    "end": "1608159"
  },
  {
    "text": "bootstrap script that downloads the application from s3 it means if i",
    "start": "1608159",
    "end": "1613600"
  },
  {
    "text": "update the application i don't need to update the image or the the the servers i just call on",
    "start": "1613600",
    "end": "1621520"
  },
  {
    "text": "i just call one script and it's done it downloads from the s3 okay right next",
    "start": "1621520",
    "end": "1629520"
  },
  {
    "text": "i have the the image ready with the java environment ready to run and the id is ami something",
    "start": "1629520",
    "end": "1637520"
  },
  {
    "text": "so the next step is let's create this bootstrap script let's see let's see how",
    "start": "1637520",
    "end": "1644720"
  },
  {
    "text": "it is",
    "start": "1644720",
    "end": "1647039"
  },
  {
    "text": "this is the script can you read okay this is just a javascript so i go",
    "start": "1652640",
    "end": "1660399"
  },
  {
    "text": "to the ect user home folder i download the java application from s3 i set",
    "start": "1660399",
    "end": "1668000"
  },
  {
    "text": "the parameters number of threads dynamodb table dynamodb invalid",
    "start": "1668000",
    "end": "1675039"
  },
  {
    "text": "table queue name and i run the application okay this let this",
    "start": "1675039",
    "end": "1682320"
  },
  {
    "text": "line over here i'm just calling the application okay and i'm redirecting the output to a log",
    "start": "1682320",
    "end": "1689200"
  },
  {
    "text": "file just simple as that okay so the script is ready",
    "start": "1689200",
    "end": "1694799"
  },
  {
    "text": "so if this script is ready the next one is create launch configuration what does",
    "start": "1694799",
    "end": "1700880"
  },
  {
    "text": "that mean it means we are going to start to work with autoscaling group",
    "start": "1700880",
    "end": "1706880"
  },
  {
    "text": "the launch configuration defines the kind of instance we want to run the",
    "start": "1706880",
    "end": "1713360"
  },
  {
    "text": "application small micro large",
    "start": "1713360",
    "end": "1719039"
  },
  {
    "text": "right and the image we are going to use so let's",
    "start": "1719039",
    "end": "1725840"
  },
  {
    "text": "see how we can do this using command line",
    "start": "1725840",
    "end": "1731600"
  },
  {
    "text": "yes okay so i have here my history create",
    "start": "1733200",
    "end": "1740720"
  },
  {
    "text": "launch let's see can you can you read this is that okay to",
    "start": "1740720",
    "end": "1746240"
  },
  {
    "text": "read okay so the first thing is aws auto scaling command line",
    "start": "1746240",
    "end": "1752000"
  },
  {
    "text": "the next is create launch configuration the launch configuration name is",
    "start": "1752000",
    "end": "1757360"
  },
  {
    "text": "reinvent lc the neo the nail right no",
    "start": "1757360",
    "end": "1764640"
  },
  {
    "text": "what does that mean lc launch configuration railway and launch configuration",
    "start": "1764640",
    "end": "1770799"
  },
  {
    "text": "instance type m1x large image id that image and my local file with the bootstrap",
    "start": "1770799",
    "end": "1779360"
  },
  {
    "text": "script and the key name i want those mentions",
    "start": "1779360",
    "end": "1784399"
  },
  {
    "text": "instance has because if i need to to access some instance i want to ssh on",
    "start": "1784399",
    "end": "1790799"
  },
  {
    "text": "that specific instance using this key so let's launch it let's execute okay",
    "start": "1790799",
    "end": "1798159"
  },
  {
    "text": "this answer is good okay it's done it's it's there so the next",
    "start": "1798159",
    "end": "1804640"
  },
  {
    "text": "step is let's create the create out the scaling group",
    "start": "1804640",
    "end": "1810960"
  },
  {
    "text": "so aws altis scaling now create out scaling group",
    "start": "1810960",
    "end": "1817760"
  },
  {
    "text": "and ulti scaling group name reinvent asg danielle",
    "start": "1817760",
    "end": "1824559"
  },
  {
    "text": "what is asg well done",
    "start": "1824559",
    "end": "1830080"
  },
  {
    "text": "and launch configuration name the one we just created",
    "start": "1830640",
    "end": "1838240"
  },
  {
    "text": "and now it's really important",
    "start": "1838240",
    "end": "1842720"
  },
  {
    "text": "really really important i'm going to set the mean size to 5 and the max size",
    "start": "1844159",
    "end": "1852000"
  },
  {
    "text": "to 220 it means that right after this command as i have the mean size of five instance",
    "start": "1852000",
    "end": "1859120"
  },
  {
    "text": "the autoscaling group is gonna launch this instance okay so let's run it",
    "start": "1859120",
    "end": "1865919"
  },
  {
    "text": "what okay what are the instances i'm gonna show you and",
    "start": "1868159",
    "end": "1876639"
  },
  {
    "text": "i need one policy that says that when i go up to",
    "start": "1877279",
    "end": "1884799"
  },
  {
    "text": "specific number of messages in the queue i trigger that policy to add more 10 machines",
    "start": "1884799",
    "end": "1893120"
  },
  {
    "text": "so let's create this policy and i have i hope i have it here let's",
    "start": "1893120",
    "end": "1899840"
  },
  {
    "text": "see policy no let me copy from my",
    "start": "1899840",
    "end": "1905279"
  },
  {
    "text": "i have one text here with all the comments because i don't remember all the",
    "start": "1905279",
    "end": "1910640"
  },
  {
    "text": "commands okay don't be angry with me let's see commands",
    "start": "1910640",
    "end": "1918000"
  },
  {
    "text": "to and here good policy",
    "start": "1918000",
    "end": "1924799"
  },
  {
    "text": "okay and the policy the access command says aws out scaling",
    "start": "1926640",
    "end": "1932640"
  },
  {
    "text": "boot scaling policy policy name with this add 10 instance do not forget",
    "start": "1932640",
    "end": "1940240"
  },
  {
    "text": "about this name add an instance and the scaling adjustment is add more 10 and change in the capacity",
    "start": "1940240",
    "end": "1948640"
  },
  {
    "text": "capacity it could be set the exact exact number",
    "start": "1948640",
    "end": "1954000"
  },
  {
    "text": "of instance on the outscaling group but here i'm just adding more 10 machines",
    "start": "1954000",
    "end": "1959440"
  },
  {
    "text": "and of course the autoscaling group name reinvent asg",
    "start": "1959440",
    "end": "1965519"
  },
  {
    "text": "i think it worked let's see so if i'm right",
    "start": "1968000",
    "end": "1974639"
  },
  {
    "text": "we should see i i have two image here running let's refresh this whoa",
    "start": "1974880",
    "end": "1983360"
  },
  {
    "text": "huh yes",
    "start": "1983440",
    "end": "1990080"
  },
  {
    "text": "like it come on come on yeah it's working yeah okay",
    "start": "1990080",
    "end": "1997440"
  },
  {
    "text": "so now but only five instance is not enough let's create the trigger the alarm on",
    "start": "1997440",
    "end": "2004080"
  },
  {
    "text": "cloud watch okay let's create the trigger this is the cloud watch environment",
    "start": "2004080",
    "end": "2010720"
  },
  {
    "text": "i'm going to create a new alarm and i'm going to say sqs",
    "start": "2010720",
    "end": "2017440"
  },
  {
    "text": "and i'm going to choose my queue call it votes and the metric what i want is",
    "start": "2017440",
    "end": "2025600"
  },
  {
    "text": "number of message visible makes sense this name yes and",
    "start": "2025600",
    "end": "2032720"
  },
  {
    "text": "as soon as i click here you can see this chart showing i've i've run some",
    "start": "2032720",
    "end": "2039200"
  },
  {
    "text": "tests today in this morning because i was afraid you know it's live so",
    "start": "2039200",
    "end": "2046080"
  },
  {
    "text": "it worked as you can see the morning it was working so here we have 20 million message",
    "start": "2046080",
    "end": "2053358"
  },
  {
    "text": "okay so let's create the alarm let's call it alarm",
    "start": "2053359",
    "end": "2062000"
  },
  {
    "text": "to add then it's a beautiful name just a description",
    "start": "2062000",
    "end": "2068800"
  },
  {
    "text": "i'm going to remember this of course and i'm going to set here if the queue has",
    "start": "2068800",
    "end": "2075040"
  },
  {
    "text": "more than and take a look at this red line here 2 000 2 million is that correct",
    "start": "2075040",
    "end": "2083358"
  },
  {
    "text": "yes take a look now if i have more than two million",
    "start": "2083359",
    "end": "2090158"
  },
  {
    "text": "messages in the queue i want to out the scaling action and",
    "start": "2090159",
    "end": "2096720"
  },
  {
    "text": "i'm sorry i'm going to reload this page i'm sorry i forgot about it i have to reload okay here's a minute",
    "start": "2096720",
    "end": "2103680"
  },
  {
    "text": "yes great alarm squeeze i'm doing this because you need to remember this",
    "start": "2103680",
    "end": "2108880"
  },
  {
    "text": "that's why i'm doing this twice",
    "start": "2108880",
    "end": "2112160"
  },
  {
    "text": "okay and then so this next okay add 10 instance",
    "start": "2115839",
    "end": "2123839"
  },
  {
    "text": "just description",
    "start": "2123839",
    "end": "2127359"
  },
  {
    "text": "more than two millions and where is the reinvent yeah here we go",
    "start": "2129119",
    "end": "2135920"
  },
  {
    "text": "the group i want is reinvent asg and remember the policy",
    "start": "2135920",
    "end": "2141920"
  },
  {
    "text": "look the policies here add an instance cool so i'm going to create this alarm",
    "start": "2141920",
    "end": "2148960"
  },
  {
    "text": "okay so let's take a look if all the the instances here",
    "start": "2148960",
    "end": "2156400"
  },
  {
    "text": "yeah the five first one is right here i just created the alarm it's gonna trigger in a few minutes",
    "start": "2156400",
    "end": "2163040"
  },
  {
    "text": "let's take a look at the queue if something's happening on this queue right here",
    "start": "2163040",
    "end": "2169119"
  },
  {
    "text": "yes it's really already those five machines i read in the queue okay but",
    "start": "2169680",
    "end": "2176320"
  },
  {
    "text": "it's not that fast take a look just three a little just three millions around about three",
    "start": "2176320",
    "end": "2182800"
  },
  {
    "text": "million message okay let's take a look at the dashboard",
    "start": "2182800",
    "end": "2187839"
  },
  {
    "text": "and let me go back here and be in stock i have the dashboard here this is a good thing",
    "start": "2187839",
    "end": "2193680"
  },
  {
    "text": "here i have my applications and my application is called dashboard and here i have this block this green",
    "start": "2193680",
    "end": "2200400"
  },
  {
    "text": "block here it means i can have one or more environments",
    "start": "2200400",
    "end": "2205520"
  },
  {
    "text": "like development production test development right so i have this one",
    "start": "2205520",
    "end": "2211839"
  },
  {
    "text": "here and it's it's okay it's green let's open",
    "start": "2211839",
    "end": "2216960"
  },
  {
    "text": "it and let's see it's it's just doing uh ajax call let's",
    "start": "2216960",
    "end": "2224560"
  },
  {
    "text": "take a look here if it's working it should change here to the percentage of the votes",
    "start": "2224560",
    "end": "2230960"
  },
  {
    "text": "come on yes it's calling and yes here we go",
    "start": "2230960",
    "end": "2238160"
  },
  {
    "text": "we have the answer here and 50 50. okay cool so this is the dashboard",
    "start": "2238160",
    "end": "2245599"
  },
  {
    "text": "so now while we wait just see if yeah",
    "start": "2245599",
    "end": "2252800"
  },
  {
    "text": "take a look cloud watch rocks",
    "start": "2252800",
    "end": "2258720"
  },
  {
    "text": "okay so while we wait those machines be ready",
    "start": "2259280",
    "end": "2265200"
  },
  {
    "text": "i would like to invite to talk to us about what they are doing with sqs",
    "start": "2265200",
    "end": "2272800"
  },
  {
    "text": "one company call it big data corp and uh they are awesome",
    "start": "2272800",
    "end": "2280320"
  },
  {
    "text": "they are doing pretty good stuff crazy stuff actually and torrent yes please",
    "start": "2280320",
    "end": "2287119"
  },
  {
    "text": "welcome yes thank you very much for coming hello",
    "start": "2287119",
    "end": "2293440"
  },
  {
    "text": "hello okay thank you how are you oh i'm fine okay how is everyone",
    "start": "2293440",
    "end": "2299760"
  },
  {
    "text": "okay so um first just give a little bit of background on our company we found a company about",
    "start": "2299760",
    "end": "2307680"
  },
  {
    "text": "three years ago or so and we were lucky enough that no one's talking about big data so we managed to get the name and get the domain and",
    "start": "2307680",
    "end": "2313760"
  },
  {
    "text": "so on which is a great thing and we've been doing a",
    "start": "2313760",
    "end": "2318800"
  },
  {
    "text": "lot of work with big data since since we were founded and",
    "start": "2318800",
    "end": "2324160"
  },
  {
    "text": "the way we see it big data is a process that runs through data collection data cleaning and so on and so on so on and",
    "start": "2324160",
    "end": "2330240"
  },
  {
    "text": "we develop developed services and products that address each one of these",
    "start": "2330240",
    "end": "2336560"
  },
  {
    "text": "steps that we see in the big data process and we've really over the course of the years leveraged",
    "start": "2336560",
    "end": "2342560"
  },
  {
    "text": "uh existing services existing aws services and services that came up",
    "start": "2342560",
    "end": "2347680"
  },
  {
    "text": "later on uh in order to deliver the this stuff so um",
    "start": "2347680",
    "end": "2355280"
  },
  {
    "text": "i've pretty much covered that uh and i went backwards okay there we go",
    "start": "2355280",
    "end": "2362240"
  },
  {
    "text": "so about a year ago or so one of our customers",
    "start": "2362240",
    "end": "2368960"
  },
  {
    "text": "came up to us and said okay we would like to know we would like for for you to tell us",
    "start": "2368960",
    "end": "2375520"
  },
  {
    "text": "how many e-commerce websites existed in latin america and they wanted",
    "start": "2375520",
    "end": "2381599"
  },
  {
    "text": "to see if they could and and our first reaction was like okay so you guys are the biggest player in e-commerce in latin america and you",
    "start": "2381599",
    "end": "2388000"
  },
  {
    "text": "actually don't know that number how how does that work um but they're like we don't know and we we talked to a lot",
    "start": "2388000",
    "end": "2395440"
  },
  {
    "text": "of people in e-commerce and people are saying you know we have i don't know how much fifty percent of the market seventy percent of marketing",
    "start": "2395440",
    "end": "2401760"
  },
  {
    "text": "like and and we asked them okay so if you have seventy percent of the market what's the size the size of the market how many companies",
    "start": "2401760",
    "end": "2407680"
  },
  {
    "text": "are there you're like well actually we don't know and we're okay but",
    "start": "2407680",
    "end": "2416400"
  },
  {
    "text": "and so we started looking at how we could work in order to answer that question in order to provide them with",
    "start": "2416400",
    "end": "2422400"
  },
  {
    "text": "that information and they said okay so it's not only knowing how many websites are there but",
    "start": "2422400",
    "end": "2427839"
  },
  {
    "text": "we actually want to monitor them on a consistent basis because we want to see they had they have this logo for the",
    "start": "2427839",
    "end": "2434400"
  },
  {
    "text": "product that they sell and we want to see how many people are using our logo how many people are using our products",
    "start": "2434400",
    "end": "2439599"
  },
  {
    "text": "and how you know this tracks over time and how it evolves and so on and so we started looking at the problem",
    "start": "2439599",
    "end": "2446400"
  },
  {
    "text": "from different angles and we said okay so basically what we have to do is build a crawling process that actually visits",
    "start": "2446400",
    "end": "2452000"
  },
  {
    "text": "and monitors these websites and and checks everything but we have to do that in a way that is",
    "start": "2452000",
    "end": "2457920"
  },
  {
    "text": "cost effective and it's pretty dynamic we we needed to do that you know",
    "start": "2457920",
    "end": "2463599"
  },
  {
    "text": "we started out thinking okay so we're gonna do this every three months and once we started looking at how the data behaved we saw okay so we actually",
    "start": "2463599",
    "end": "2470640"
  },
  {
    "text": "need to do this every other week and not every three months and",
    "start": "2470640",
    "end": "2476560"
  },
  {
    "text": "so we started thinking about okay so cost efficient scalable we needed all those things and",
    "start": "2476560",
    "end": "2481920"
  },
  {
    "text": "i said okay i know how we're going to do this i'm going to get my laptop and run it",
    "start": "2481920",
    "end": "2487520"
  },
  {
    "text": "over the weekend in my house and that didn't work out very well and so we",
    "start": "2487520",
    "end": "2493520"
  },
  {
    "text": "said okay so let's try and build something a little bit more robust than that",
    "start": "2493520",
    "end": "2500000"
  },
  {
    "text": "so we grabbed a a an old server that we had in the back of the closet",
    "start": "2500000",
    "end": "2505680"
  },
  {
    "text": "and that didn't work out i said okay let's talk to the aws guys because we've been talking to them for some time",
    "start": "2505680",
    "end": "2512560"
  },
  {
    "text": "um and so and so we started looking at the process and saying okay so what do we need to do this and we",
    "start": "2512560",
    "end": "2519040"
  },
  {
    "text": "started trying out architectures and working on stuff and seeing let's try to do this",
    "start": "2519040",
    "end": "2524800"
  },
  {
    "text": "with databases let's try to do this in several different ways and it it wasn't working out very very well and",
    "start": "2524800",
    "end": "2531680"
  },
  {
    "text": "then i started having these these discussions and we started looking okay so perhaps the best way to go about this",
    "start": "2531680",
    "end": "2537680"
  },
  {
    "text": "and and it was really interesting because we were in a meeting with adi and we left them we were discussing",
    "start": "2537680",
    "end": "2543680"
  },
  {
    "text": "ideas and throwing ideas on the board and we left the meeting and i turned to one of my colleagues and said okay",
    "start": "2543680",
    "end": "2548880"
  },
  {
    "text": "you know maybe we should look at this sqs stuff and at the same time my phone beeped and there's there was this sms from adidas saying",
    "start": "2548880",
    "end": "2555040"
  },
  {
    "text": "you know you really you guys should really look at this sqs stuff so say okay so at least we're on the same page there",
    "start": "2555040",
    "end": "2561119"
  },
  {
    "text": "and we started looking at sqs and we started looking at how we could use sqs to really scale our process because",
    "start": "2561119",
    "end": "2569280"
  },
  {
    "text": "we we we ended up using thousands and thousands of spot instances running",
    "start": "2569280",
    "end": "2574720"
  },
  {
    "text": "thousands and thousands of processes and once you start doing that you really start hitting some limits that you don't",
    "start": "2574720",
    "end": "2580079"
  },
  {
    "text": "see in the real world like there's a limit to the number of some simultaneous connections that you can",
    "start": "2580079",
    "end": "2585680"
  },
  {
    "text": "open up to to databases and this was actually applied to all databases limits on connections to web services",
    "start": "2585680",
    "end": "2592240"
  },
  {
    "text": "and we tried using standard web services to synchronize stuff and and it wasn't working working out very well so we decided okay",
    "start": "2592240",
    "end": "2598640"
  },
  {
    "text": "so sqs provided is a very efficient way to orchestrate our entire process and a very efficient way to",
    "start": "2598640",
    "end": "2605040"
  },
  {
    "text": "actually scale out this process to a massively right to to do all these",
    "start": "2605040",
    "end": "2610319"
  },
  {
    "text": "thousands of images and so on and we also leverage s3 in order to store all the intermediate data that we",
    "start": "2610319",
    "end": "2616960"
  },
  {
    "text": "need to store logs for the processes and so on and we really really use uh spot",
    "start": "2616960",
    "end": "2622800"
  },
  {
    "text": "instances we we love them they keep our costs really low and they really help us out",
    "start": "2622800",
    "end": "2628880"
  },
  {
    "text": "so after a lot of discussion and a lot of coming and going this is the overall architecture that we",
    "start": "2628880",
    "end": "2634800"
  },
  {
    "text": "ended up using so essentially what we have is an orchestrator which is that machine up",
    "start": "2634800",
    "end": "2640160"
  },
  {
    "text": "there on the top which we call the maestro and that's a reserved instance",
    "start": "2640160",
    "end": "2645760"
  },
  {
    "text": "that's running all the time and basically what it does is it initializes the process by uploading",
    "start": "2645760",
    "end": "2650960"
  },
  {
    "text": "everything that we need to crawl into a queue and that's what really gets the process going because from there we have a set of main",
    "start": "2650960",
    "end": "2658400"
  },
  {
    "text": "what we call the main workers which are different processes that run on spot instances",
    "start": "2658400",
    "end": "2663440"
  },
  {
    "text": "they are going to be consuming messages from the queue doing the what we call the basic crawl",
    "start": "2663440",
    "end": "2669280"
  },
  {
    "text": "which is essentially doing the get on the website loading that html code",
    "start": "2669280",
    "end": "2674560"
  },
  {
    "text": "running some basic processing on it and then we started chaining the process with additional cues",
    "start": "2674560",
    "end": "2680560"
  },
  {
    "text": "in order to do additional processing on each step so if i take a website and i identify it as an e-commerce website",
    "start": "2680560",
    "end": "2686720"
  },
  {
    "text": "i'll ship it off to a queue that's going to have another worker attached to it that's going to do some different work",
    "start": "2686720",
    "end": "2692400"
  },
  {
    "text": "on it if i identify it as another type of website i'm going to do something else with it",
    "start": "2692400",
    "end": "2697680"
  },
  {
    "text": "so i'll put it in a different queue and so on and at the end of the the whole process once we have the data set that with",
    "start": "2697680",
    "end": "2704000"
  },
  {
    "text": "the set of data that we need for each individual website we'll put it on a final queue that's",
    "start": "2704000",
    "end": "2709359"
  },
  {
    "text": "basically controlling the true put to the database so that we don't exceed maximum connections or",
    "start": "2709359",
    "end": "2714480"
  },
  {
    "text": "anything like that that's storing the data on a mongodb cluster another very interesting thing",
    "start": "2714480",
    "end": "2720160"
  },
  {
    "text": "that we were able to do with sqs was to create a command and control queue which",
    "start": "2720160",
    "end": "2725520"
  },
  {
    "text": "basically allows us to command and control the entire process we have all of our different spot",
    "start": "2725520",
    "end": "2730880"
  },
  {
    "text": "instances all of our different worker instances listening to this queue and we set up sort of a broadcast system where",
    "start": "2730880",
    "end": "2737839"
  },
  {
    "text": "the domain the the orchestrator can put a message on the queue and each instance will read that message and perform some",
    "start": "2737839",
    "end": "2743760"
  },
  {
    "text": "action based on it and that can be something as simple as reporting their status so that we know how far along a process",
    "start": "2743760",
    "end": "2750079"
  },
  {
    "text": "is going without having to go to the dashboard and seeing how many messages are in",
    "start": "2750079",
    "end": "2755680"
  },
  {
    "text": "flight or still on the queue or as complicated as halting the entire",
    "start": "2755680",
    "end": "2760720"
  },
  {
    "text": "process sometimes as we were doing this we started figuring out that there were times where we need to halt the entire process and",
    "start": "2760720",
    "end": "2767599"
  },
  {
    "text": "go back a couple steps or something like that and that cue allows us to send a message that after a few minutes",
    "start": "2767599",
    "end": "2773200"
  },
  {
    "text": "every single instance we will have read it and will halt their processing and can even shut themselves down so we",
    "start": "2773200",
    "end": "2779760"
  },
  {
    "text": "we were able to build a pretty interesting um control structure relying entirely on a",
    "start": "2779760",
    "end": "2786160"
  },
  {
    "text": "queue which ensures that messages are read ensures that the messages are processed that we don't lose any messages along",
    "start": "2786160",
    "end": "2792319"
  },
  {
    "text": "the way give us all of the benefits that ari told us about at the beginning so we ended up",
    "start": "2792319",
    "end": "2801440"
  },
  {
    "text": "creating a very interesting uh structure there and just to give you an idea of",
    "start": "2801440",
    "end": "2808480"
  },
  {
    "text": "message volumes that we handled this is this is actually um from a couple of maybe a couple of",
    "start": "2808480",
    "end": "2814480"
  },
  {
    "text": "weeks ago or it's just it's a little bit old we've actually increased these numbers a little bit",
    "start": "2814480",
    "end": "2819599"
  },
  {
    "text": "but basically we run this process this entire crawling process every week and the whole process takes about 48 hours",
    "start": "2819599",
    "end": "2826560"
  },
  {
    "text": "to run from start to finish we start off with roughly 10 million messages on our initial queue",
    "start": "2826560",
    "end": "2832720"
  },
  {
    "text": "and each message as its process may generate up to 10 or even sometimes",
    "start": "2832720",
    "end": "2838000"
  },
  {
    "text": "even more additional messages in order to do for us to do additional processing these",
    "start": "2838000",
    "end": "2843040"
  },
  {
    "text": "once again this can be as simple as performing some work on top of the the stuff that we crawled or it can be",
    "start": "2843040",
    "end": "2849359"
  },
  {
    "text": "as complex as you know i need to crawl this again so let's add it back to the queue",
    "start": "2849359",
    "end": "2855359"
  },
  {
    "text": "at the peak processing we actually we're now about to 100 000",
    "start": "2855359",
    "end": "2860640"
  },
  {
    "text": "messages per second that we're processing from these queues so it's a pretty um resource intensive",
    "start": "2860640",
    "end": "2867680"
  },
  {
    "text": "and we're really taxing the queues in terms of getting messages from them and and processing these messages and",
    "start": "2867680",
    "end": "2874400"
  },
  {
    "text": "deleting them from the queues as we go along and so on and so on and the very the interesting thing for",
    "start": "2874400",
    "end": "2880000"
  },
  {
    "text": "us about sqs is that it really gave us a lot of resiliency to this to this distributed process because if",
    "start": "2880000",
    "end": "2886400"
  },
  {
    "text": "anything goes wrong with one of our workers and for any chance and we're relying on spot instances so",
    "start": "2886400",
    "end": "2891839"
  },
  {
    "text": "someone outbids us on the spot instance and the spot instance goes down or something goes wrong along the way the message will simply be put",
    "start": "2891839",
    "end": "2898720"
  },
  {
    "text": "back into the queue and we can process it we can make sure that someone else is going to pick up that message later on",
    "start": "2898720",
    "end": "2904319"
  },
  {
    "text": "and actively process it as we go along so that's a very useful feature for us to",
    "start": "2904319",
    "end": "2911200"
  },
  {
    "text": "to to have because it ensures that we we don't have to worry about you know",
    "start": "2911200",
    "end": "2916880"
  },
  {
    "text": "was my message actually processed did i actually uh do everything that i needed to do along",
    "start": "2916880",
    "end": "2922640"
  },
  {
    "text": "the way in the process so it it really ensures that and for us at least the command and control key was",
    "start": "2922640",
    "end": "2928480"
  },
  {
    "text": "very interesting structure that we've been leveraging on other products on other projects that we've been doing",
    "start": "2928480",
    "end": "2933839"
  },
  {
    "text": "because it really allows us to adjust the processing as we go along it can even be used",
    "start": "2933839",
    "end": "2938960"
  },
  {
    "text": "uh as i was saying to shut down instances or or to shut down some of the workers inside an",
    "start": "2938960",
    "end": "2944079"
  },
  {
    "text": "instance or to fire off new workers inside of an instance that's underused we can really",
    "start": "2944079",
    "end": "2949280"
  },
  {
    "text": "it allows us a very fine grain level of control about what's going on inside each",
    "start": "2949280",
    "end": "2955520"
  },
  {
    "text": "instance um as we go along the process and it really",
    "start": "2955520",
    "end": "2960559"
  },
  {
    "text": "gives us a lot more visibility than simply looking at the dashboard and seeing how many messages are being",
    "start": "2960559",
    "end": "2965760"
  },
  {
    "text": "processed at any given time so it allows us to do that and it's been working very very well",
    "start": "2965760",
    "end": "2975359"
  },
  {
    "text": "um",
    "start": "2975760",
    "end": "2978079"
  },
  {
    "text": "it's stopped working okay",
    "start": "2981599",
    "end": "2987359"
  },
  {
    "text": "do i it's just blinking red okay um",
    "start": "2988480",
    "end": "2996640"
  },
  {
    "text": "i'll take it from there uh so in terms of results that we've been getting we've",
    "start": "2996640",
    "end": "3001920"
  },
  {
    "text": "been as i said we've been running this process since january so about 11 months now and we",
    "start": "3001920",
    "end": "3008079"
  },
  {
    "text": "were actually able to over the course of this time we've managed to process over three petabytes of data and",
    "start": "3008079",
    "end": "3016720"
  },
  {
    "text": "we've visited almost 100 billion different what not different but almost 100 billion web pages a lot of",
    "start": "3016720",
    "end": "3023359"
  },
  {
    "text": "times since we run it weekly we'll visit the same pages over and over again",
    "start": "3023359",
    "end": "3029359"
  },
  {
    "text": "but that's a lot that's a lot of pages and that's a lot of information to be stored we've relied on mongodb",
    "start": "3029359",
    "end": "3036880"
  },
  {
    "text": "to store the data it gave us some flexibility that we",
    "start": "3036880",
    "end": "3042720"
  },
  {
    "text": "didn't find in other solutions we we also leverage a lot of aws services in order to",
    "start": "3042720",
    "end": "3048880"
  },
  {
    "text": "to control the mongodb clusters that we need to process the data and so on and so on but the most important thing for us is",
    "start": "3048880",
    "end": "3055280"
  },
  {
    "text": "that we were actually able to answer to our client how many e-commerce websites were there",
    "start": "3055280",
    "end": "3061119"
  },
  {
    "text": "um what they were doing which products they were selling which services they were using we saw that we didn't need actually to",
    "start": "3061119",
    "end": "3067839"
  },
  {
    "text": "limit ourselves only to e-commerce websites and only to the service that our client was asking us to monitor",
    "start": "3067839",
    "end": "3073520"
  },
  {
    "text": "but we could actually monitor pretty much everything and so we built a very very interesting map of all the web",
    "start": "3073520",
    "end": "3080720"
  },
  {
    "text": "today we're looking at all the websites uh in latin america in terms of what kind of services they're integrated with",
    "start": "3080720",
    "end": "3086960"
  },
  {
    "text": "where they're ho where they're hosted um what kind of technology platform they're using inside their websites and so on",
    "start": "3086960",
    "end": "3093200"
  },
  {
    "text": "and so on and so on so we're able to build a very detailed and very interesting set of data that keeps",
    "start": "3093200",
    "end": "3099599"
  },
  {
    "text": "growing and growing and growing um that that gives us a very very interesting view of the web",
    "start": "3099599",
    "end": "3107520"
  },
  {
    "text": "in latin america which has been tremendous for our client because they've leveraged this in order to increase their sales in",
    "start": "3107520",
    "end": "3113599"
  },
  {
    "text": "order to increase their understanding of the market so it was basically a very very amazing",
    "start": "3113599",
    "end": "3119680"
  },
  {
    "text": "project awesome to work on to use at these words",
    "start": "3119680",
    "end": "3124800"
  },
  {
    "text": "it was awesome okay and that's it i can't go forward so i can't show you",
    "start": "3124800",
    "end": "3130800"
  },
  {
    "text": "the graphs with cost reductions and so on so",
    "start": "3130800",
    "end": "3135838"
  },
  {
    "text": "i can try here okay else no it's frozen i mouse is working",
    "start": "3137359",
    "end": "3145359"
  },
  {
    "text": "okay okay cool some very simple cost estimates",
    "start": "3145359",
    "end": "3152800"
  },
  {
    "text": "um without aws this is obviously ignoring the fact that we would have to buy",
    "start": "3152800",
    "end": "3160079"
  },
  {
    "text": "a thousand twelve hundred servers we used 1200 spot instances on our last run",
    "start": "3160079",
    "end": "3166079"
  },
  {
    "text": "um that would take a lot of money i'm glad we didn't have to do that but",
    "start": "3166079",
    "end": "3171599"
  },
  {
    "text": "that's just our cost estimates based on electricity and what we need in terms of a support",
    "start": "3171599",
    "end": "3177839"
  },
  {
    "text": "team and so on so we managed to get very large cost reductions by leveraging",
    "start": "3177839",
    "end": "3183520"
  },
  {
    "text": "aws services and looking specifically at being able to leverage spot instances and being",
    "start": "3183520",
    "end": "3189920"
  },
  {
    "text": "able to leverage sqs we did some calculations and we believe we've saved about",
    "start": "3189920",
    "end": "3195520"
  },
  {
    "text": "anywhere between 60 and 80 percent of our initial projected costs especially because the sqs guys one",
    "start": "3195520",
    "end": "3201920"
  },
  {
    "text": "month after we started running the service on sqs they reduced the price in half and",
    "start": "3201920",
    "end": "3207280"
  },
  {
    "text": "increase message size they double the message size and they're like yes",
    "start": "3207280",
    "end": "3213040"
  },
  {
    "text": "so good um and so that and once again that that",
    "start": "3213040",
    "end": "3219119"
  },
  {
    "text": "really benefited us in terms of being able to deliver something to our clients in a cost",
    "start": "3219119",
    "end": "3224319"
  },
  {
    "text": "efficient and in a speedy manner that we were we wouldn't be able to do so",
    "start": "3224319",
    "end": "3229599"
  },
  {
    "text": "any other way and okay so once again these these numbers are a",
    "start": "3229599",
    "end": "3236800"
  },
  {
    "text": "little bit old and they keep growing uh over and over they keep growing each week which is",
    "start": "3236800",
    "end": "3244640"
  },
  {
    "text": "at a scary rate but we're at over three petabytes of data over 50 billion web pages that we've",
    "start": "3244640",
    "end": "3251760"
  },
  {
    "text": "visited and parsed and extracted data from and stored we're mapping",
    "start": "3251760",
    "end": "3257680"
  },
  {
    "text": "almost a thousand different services in different technologies and we have over five thousand dimensions on that",
    "start": "3257680",
    "end": "3264880"
  },
  {
    "text": "that can be relevant for segmentation websites that go all the way from you know what kind of website it is and",
    "start": "3264880",
    "end": "3270160"
  },
  {
    "text": "what topic it's talking about all the way down to the product level if you look at e-commerce websites what kind of",
    "start": "3270160",
    "end": "3276160"
  },
  {
    "text": "products are being sold what prices they're charging um what kind of payment methods they accept there's",
    "start": "3276160",
    "end": "3282240"
  },
  {
    "text": "there's a lot of stuff there very interesting data it's been very interesting to look at and it was",
    "start": "3282240",
    "end": "3288000"
  },
  {
    "text": "very useful for a client and that's what i have for you guys",
    "start": "3288000",
    "end": "3293839"
  }
]