[
  {
    "start": "0",
    "end": "170000"
  },
  {
    "text": "thanks everybody for showing up today at the end of what I hope it's been a very",
    "start": "0",
    "end": "5940"
  },
  {
    "text": "productive week for all of you I know this is probably at the last or one of the last sessions you'll be attending so",
    "start": "5940",
    "end": "11070"
  },
  {
    "text": "I very much you appreciate you taking the time to be here as the slide says my name is Todd Golding I'm a partner",
    "start": "11070",
    "end": "17640"
  },
  {
    "text": "Solutions Architect focused on the SAS specialty and last year I did a few in",
    "start": "17640",
    "end": "24300"
  },
  {
    "text": "sessions at reinvent and we really focused more as part of those sessions on sort of a broad set of principles and",
    "start": "24300",
    "end": "31500"
  },
  {
    "text": "SAS sort of objectives and looked at pros and cons of different partitioning schemes and tried to give everybody sort",
    "start": "31500",
    "end": "37950"
  },
  {
    "text": "of a real broad view of the landscape of SAS and for some of the folks I think",
    "start": "37950",
    "end": "43710"
  },
  {
    "text": "that was a really good experience but also we listened to the feedback and I think we decided this year to come back and say could we do something more",
    "start": "43710",
    "end": "49920"
  },
  {
    "text": "targeted could we really do something more focused that looked at a specific SAS implementation and said instead of",
    "start": "49920",
    "end": "57149"
  },
  {
    "text": "sort of discussing the fundamental principles show me a SAS solution that's been built like dig into a single",
    "start": "57149",
    "end": "63989"
  },
  {
    "text": "solution and yes that'll solution will be one example of how you'd build one but I think I might learn more from just",
    "start": "63989",
    "end": "70950"
  },
  {
    "text": "seeing the end-to-end sort of solution and seeing all the pieces connected to wanting to get another and so that is",
    "start": "70950",
    "end": "76530"
  },
  {
    "text": "exactly what we're going to do here today and I hope for all of you that matches what you think you've signed up",
    "start": "76530",
    "end": "82259"
  },
  {
    "text": "for so this will be actually a reference to a solution we've actually built",
    "start": "82259",
    "end": "87900"
  },
  {
    "text": "that's out there that you'll be able at the end of this to go out download and so it will certainly try to be deep as",
    "start": "87900",
    "end": "93720"
  },
  {
    "text": "we can be today here but my hope would be that will sort of give you enough of the framework for what's here that you",
    "start": "93720",
    "end": "99210"
  },
  {
    "text": "can then go out download the solution and there's a 40 page PDF and a bunch of source code and a whole environment you",
    "start": "99210",
    "end": "106259"
  },
  {
    "text": "can install and stand up on your own and then take sort of the knowledge that comes out of this and use this to dive",
    "start": "106259",
    "end": "112290"
  },
  {
    "text": "into that example also just for a little more sort of set the stage here we the",
    "start": "112290",
    "end": "117810"
  },
  {
    "text": "this is a 400 level session so the assumption is you're coming in and you have some orientation some knowledge of",
    "start": "117810",
    "end": "124020"
  },
  {
    "text": "SAS so things like data partitioning and tenant isolation these are not hopefully new concepts to you also we're going to",
    "start": "124020",
    "end": "131370"
  },
  {
    "text": "dig a little bit into the code level we certainly aren't going to back open the IDE we won't have time for that but we are gonna have slides with",
    "start": "131370",
    "end": "137310"
  },
  {
    "text": "some code on them and we're gonna walk some of the sequence of the interaction between the application services to give",
    "start": "137310",
    "end": "142739"
  },
  {
    "text": "you a sense of what this is all about my hope is when you're all done with this that that even if you even if the",
    "start": "142739",
    "end": "149400"
  },
  {
    "text": "example doesn't directly map to your existing solution that this this will be",
    "start": "149400",
    "end": "154680"
  },
  {
    "text": "a foundation that will let you take some of these ideas figure out how to lift them see how they sort of work with the",
    "start": "154680",
    "end": "160290"
  },
  {
    "text": "different AWS services and leverage them to the best your ability and whatever solution you're building on your own so",
    "start": "160290",
    "end": "166409"
  },
  {
    "text": "enough caveats let's dig in a little bit here obviously before we can sort of dig into the implementation we need some",
    "start": "166409",
    "end": "173040"
  },
  {
    "start": "170000",
    "end": "170000"
  },
  {
    "text": "kind of blueprint for what are we really going to build here what are the moving parts of it and sort of establish some",
    "start": "173040",
    "end": "180720"
  },
  {
    "text": "kind of landscape for our discussion so gonna start with thank you clicker that",
    "start": "180720",
    "end": "188909"
  },
  {
    "text": "we have to obviously anything we're gonna do in SAS is going to be a multi-tenant solution right at this",
    "start": "188909",
    "end": "194579"
  },
  {
    "text": "particular multi-tenant solution we're going to look at here is what we'd call a pooled solution in the world of SAS",
    "start": "194579",
    "end": "200190"
  },
  {
    "text": "which means all the infrastructure resources are shared by all the tenants in this environment so when we look at",
    "start": "200190",
    "end": "206519"
  },
  {
    "text": "storage when we look at compute and we look at all the moving parts of this the idea is that all the tenant data is",
    "start": "206519",
    "end": "212489"
  },
  {
    "text": "shared in that environment dynamodb for example when we look into dynamo DB the items and the dynamo DB",
    "start": "212489",
    "end": "218730"
  },
  {
    "text": "tables are going to be all the all the tenants data commingled and so a lot of",
    "start": "218730",
    "end": "224069"
  },
  {
    "text": "the policies in the approach and the strategy we'll take in here will be driven by the fact that we're a pooled",
    "start": "224069",
    "end": "230159"
  },
  {
    "text": "environment if this were siloed or one of the other flavors the dimensions might look a little bit different and",
    "start": "230159",
    "end": "236090"
  },
  {
    "text": "the first step we're going to look at is the onboarding piece of that and for most people this is just hey you go in",
    "start": "236090",
    "end": "242729"
  },
  {
    "text": "you sign up you register but if any of you have poked at SAS a lot you'll find that onboarding ends up being one of the",
    "start": "242729",
    "end": "248940"
  },
  {
    "text": "most intensive parts of a SAS application all if you think about everything that has to get provisioned",
    "start": "248940",
    "end": "255030"
  },
  {
    "text": "by somebody just signing up as a tenant and all the underlying configuration then the setup of a tenant set up of",
    "start": "255030",
    "end": "261539"
  },
  {
    "text": "their identity set up of their policies that's all part of the onboarding experience and we'll see",
    "start": "261539",
    "end": "267050"
  },
  {
    "text": "in a fair amount of time not now a huge chunk of time but a fair amount of time looking at that to get a sense for what",
    "start": "267050",
    "end": "273289"
  },
  {
    "text": "does it mean to autumn autumn ate all that inside a SAS solution inside of AWS once we deal with onboarding and we have",
    "start": "273289",
    "end": "280009"
  },
  {
    "text": "all the bits of that will look at authentication this probably should say authentication and authorization and we're not going to look at just like",
    "start": "280009",
    "end": "286909"
  },
  {
    "text": "what does it mean to authenticate a user I think most people are familiar with identity providers and what it means to authenticate when I when I look at this",
    "start": "286909",
    "end": "294139"
  },
  {
    "text": "this is really more about what does SAS do to authentication how where's it because to me you can't just use vanilla",
    "start": "294139",
    "end": "300770"
  },
  {
    "text": "out-of-the-box identity and just plug it in for SAS you have all kinds of",
    "start": "300770",
    "end": "306139"
  },
  {
    "text": "additional considerations that are overlaid on top of this in fact I did an entire talk this week earlier in fact",
    "start": "306139",
    "end": "311840"
  },
  {
    "text": "for some of you there I hope I warned you then lots of this will overlap with that talk because identity is such a",
    "start": "311840",
    "end": "317690"
  },
  {
    "text": "fundamental part of SAS and in fact you might be surprised that we'll spend as much time on identity as we do in this",
    "start": "317690",
    "end": "323449"
  },
  {
    "text": "talk because identity weaves its way through all the layers of our architecture it affects the way we",
    "start": "323449",
    "end": "328819"
  },
  {
    "text": "implement the app services it affects the way we implement the partitioning you'll see its story all over in here so",
    "start": "328819",
    "end": "335029"
  },
  {
    "text": "yes I didn't want this to be identity talk but it's really hard to talk to about SAS without weaving that into the",
    "start": "335029",
    "end": "340580"
  },
  {
    "text": "discussion finally we will look at ok what does it mean to be a developer and write the actual application services",
    "start": "340580",
    "end": "347900"
  },
  {
    "text": "that are part of this in this case we're we're going to have a application that's decomposed into a series of micro services and we really want to at this",
    "start": "347900",
    "end": "354830"
  },
  {
    "text": "level just say what does it mean as a SAS developer to build a micro service",
    "start": "354830",
    "end": "359900"
  },
  {
    "text": "with that's multi-tenant aware that thinks about all the things that I'm that they have to think about but also",
    "start": "359900",
    "end": "365300"
  },
  {
    "text": "what do we do to make this a good developer experience like for the person writing these services how do we shield",
    "start": "365300",
    "end": "371389"
  },
  {
    "text": "them and hide them away from the details of multi-tenancy so that we're as efficient as we possibly can be so we'll",
    "start": "371389",
    "end": "377900"
  },
  {
    "text": "look at that bit and then obviously we're going to look at storage partitioning as part of this as well like how are we representing data and I",
    "start": "377900",
    "end": "385460"
  },
  {
    "text": "said this is pooled in this case how are we representing pooled multi tenant data and in following with sort of best",
    "start": "385460",
    "end": "391969"
  },
  {
    "text": "practices of micro services each of these services not shown so visually well in this diagram each of these",
    "start": "391969",
    "end": "397159"
  },
  {
    "text": "services are encapsulating access to whatever storage is on the other side of them so we'll look at that",
    "start": "397159",
    "end": "402590"
  },
  {
    "text": "whole experience we'll look at how that's affected by identity and so on and then the bit we'll look at and spend",
    "start": "402590",
    "end": "408470"
  },
  {
    "text": "a fair amount talking about that is another area that gets overlooked is tenant isolation I was doing another",
    "start": "408470",
    "end": "414680"
  },
  {
    "text": "session earlier this week Tuesday and I was in a room full of developers who were SAS developers and I said how many",
    "start": "414680",
    "end": "421190"
  },
  {
    "text": "of you are sort of just relying on authentication as your entire sort of isolation scheme and almost",
    "start": "421190",
    "end": "427520"
  },
  {
    "text": "three-quarters of the room their hand went up like that's the definition for a lot of people like okay I challenged you",
    "start": "427520",
    "end": "432980"
  },
  {
    "text": "at the front door I made sure you were who you were and I know your identity well enough that I'll just be sure and",
    "start": "432980",
    "end": "438320"
  },
  {
    "text": "code that nothing gets crossed that's not enough in a SAS environment really right your customers and your business",
    "start": "438320",
    "end": "445810"
  },
  {
    "text": "really the lifeblood of a saps business demands that you keep really firm",
    "start": "445810",
    "end": "451850"
  },
  {
    "text": "boundaries between your tenants you could imagine what would happen in environment where one of your customers accidentally got access to another",
    "start": "451850",
    "end": "458300"
  },
  {
    "text": "tenants resources or their their data that can be a like a fatal blow for a business so even though it doesn't come",
    "start": "458300",
    "end": "465470"
  },
  {
    "text": "up in a lot more conversation we spend a lot of our time in the universe of SAS talking about what strategies can we have beyond authentication or connected",
    "start": "465470",
    "end": "472940"
  },
  {
    "text": "to authentication that we can use to enforce this isolation between tenants now the last bits here on the slide are",
    "start": "472940",
    "end": "480350"
  },
  {
    "text": "are more about operations and bits of this metrics analysis management billing",
    "start": "480350",
    "end": "486800"
  },
  {
    "text": "I would love to have a bigger chunk of time here and be able to talk about",
    "start": "486800",
    "end": "492350"
  },
  {
    "text": "those as well and great depth but I don't in an hour-long session we can't really dig into all the operational bits",
    "start": "492350",
    "end": "497870"
  },
  {
    "text": "but I want to be sure I say that those are every bit as important as the application bits of this equation and I",
    "start": "497870",
    "end": "504050"
  },
  {
    "text": "would definitely go look at the other talks we have we did another member of my team Judah Bernstein did a whole talk",
    "start": "504050",
    "end": "509060"
  },
  {
    "text": "on like tenet health and tenant metrics earlier this week I did a whole talk on metrics and those bits so don't don't",
    "start": "509060",
    "end": "515360"
  },
  {
    "text": "think those don't carry a lot of weight we just don't have time to dig into a date we'll touch on a little bit but a billing will touch on a little bit of",
    "start": "515360",
    "end": "521719"
  },
  {
    "text": "metering and that's about it okay so what's the stack we built all this with",
    "start": "521720",
    "end": "528380"
  },
  {
    "start": "525000",
    "end": "525000"
  },
  {
    "text": "and there's that it's really hard when you're building a sample and reference application to say how can I find a set",
    "start": "528380",
    "end": "533750"
  },
  {
    "text": "of tools that are somehow gonna resonate with everybody when the audience is so large but we've",
    "start": "533750",
    "end": "538760"
  },
  {
    "text": "tried to pick what we thought was a set of tools at least that would be have a reasonable chance of matching some of what people are doing we leverage",
    "start": "538760",
    "end": "546440"
  },
  {
    "text": "angularjs as our client already probably since euler Jaso you can imagine you",
    "start": "546440",
    "end": "551750"
  },
  {
    "text": "know ember and react and all these other sort of tools are showing up over there so we'll probably have to continue to",
    "start": "551750",
    "end": "557120"
  },
  {
    "text": "introduce new clients to give people an idea what they look like but the client and the angular bits of this actually",
    "start": "557120",
    "end": "564020"
  },
  {
    "text": "are all just deployed on an s3 bucket and following sort of general AWS best",
    "start": "564020",
    "end": "569720"
  },
  {
    "text": "practices for for deployment of a web app the next piece in the puzzle is the",
    "start": "569720",
    "end": "576050"
  },
  {
    "text": "API gateway and there's a specific role the API gateway plays in this implementation that we're gonna dig into",
    "start": "576050",
    "end": "582200"
  },
  {
    "text": "the code of but I also want to say that in general if you're building a SAS solution you should use some kind of",
    "start": "582200",
    "end": "588710"
  },
  {
    "text": "managed gateway as part of your API it doesn't have to be a WSS gateway but in general if you think about what SAS has",
    "start": "588710",
    "end": "595010"
  },
  {
    "text": "to do you should have you often have really serious throttling needs you'll have tenants at different tiers so a",
    "start": "595010",
    "end": "600530"
  },
  {
    "text": "basic tenant should be throttled differently than it in dance 10 it another thing is generally you'll find",
    "start": "600530",
    "end": "606500"
  },
  {
    "text": "yourself exposing some kind of public API to this and you get to rely on the Gateway for issuing keys and doing all",
    "start": "606500",
    "end": "613010"
  },
  {
    "text": "those all the heavy lifting of exposing a public API but in this specific example we leverage this something",
    "start": "613010",
    "end": "619700"
  },
  {
    "text": "called a custom authorizer with the api gateway to add a layer of security at the at the api entry point that was",
    "start": "619700",
    "end": "626839"
  },
  {
    "text": "another layer of security in our solution so we'll dig into what that looks like then on the back end we",
    "start": "626839",
    "end": "634010"
  },
  {
    "text": "basically have a bunch of nodejs Express services and we built this very simple order management system it is not a",
    "start": "634010",
    "end": "640400"
  },
  {
    "text": "meant to be like this very robust you could go ship this order management system kind of product it's to amend to",
    "start": "640400",
    "end": "645860"
  },
  {
    "text": "just include enough services that you could get a sense of what it means to implement a system in this model so",
    "start": "645860",
    "end": "651589"
  },
  {
    "text": "you'll see order management and product management services but then a whole bunch of other services here that are",
    "start": "651589",
    "end": "656750"
  },
  {
    "text": "more about how do you get a tenant on board how do you register them how do you deal with the identity bits of this and you'll see some a lot of these are",
    "start": "656750",
    "end": "662450"
  },
  {
    "text": "using dynamodb and a multi-tenant fashion and these are all deployed in an ECS cluster and",
    "start": "662450",
    "end": "668390"
  },
  {
    "text": "so very classic sort of micro-services model and then this last bit I wasn't sure where to sort of snap it onto the",
    "start": "668390",
    "end": "674930"
  },
  {
    "text": "diagram in a way that was useful but on the we are definitely using a kognito as our into end identity solution and we're",
    "start": "674930",
    "end": "681620"
  },
  {
    "text": "using many parts of Cognito in this solution we're building another solution that is a mirror of this that is",
    "start": "681620",
    "end": "687830"
  },
  {
    "text": "leveraging octa as an identity provider just because we want to convey and and demonstrate that this doesn't have to be",
    "start": "687830",
    "end": "693380"
  },
  {
    "text": "a Cognito solution you get certain nuances out of both kognito you'll get certain nuances out of it with octa we",
    "start": "693380",
    "end": "699740"
  },
  {
    "text": "want to definitely show variety in that respect but today lots of discussion of how kognito was used okay now you go get",
    "start": "699740",
    "end": "710270"
  },
  {
    "start": "706000",
    "end": "706000"
  },
  {
    "text": "this download this you go to the page where you get the QuickStart you run the provisioned environment to",
    "start": "710270",
    "end": "715550"
  },
  {
    "text": "set up the whole environment to run your app what is the underlying infrastructure that's going to get provisioned as part of this experience",
    "start": "715550",
    "end": "721190"
  },
  {
    "text": "well what you're gonna find is that we really like all the quick starts for the most part on AWS our following just a",
    "start": "721190",
    "end": "727430"
  },
  {
    "text": "traditional best practices high availability scalable sort of architectural pattern so you'll see",
    "start": "727430",
    "end": "733910"
  },
  {
    "text": "we've got a V PC and of course it's a multi a-z V PC that so we get these sort of the",
    "start": "733910",
    "end": "740180"
  },
  {
    "text": "high durability of multi AZ and then at the front like we said s3 api gateway and this lambda function that is our our",
    "start": "740180",
    "end": "747770"
  },
  {
    "text": "custom authorizer as the entry points to our environment and then we got a we obviously have to have public in private",
    "start": "747770",
    "end": "753290"
  },
  {
    "text": "subnets it's just part of conforming to best practices so we've got a NAT gateway that is our public subnet and",
    "start": "753290",
    "end": "759800"
  },
  {
    "text": "then that's load balanced into the private subnet that's gonna host all of our actual application services and",
    "start": "759800",
    "end": "765830"
  },
  {
    "text": "finally there's our our app services all running in an e CS cluster auto scaled",
    "start": "765830",
    "end": "773120"
  },
  {
    "text": "and so on so probably any of you been working with AWS for a while seeing this",
    "start": "773120",
    "end": "778250"
  },
  {
    "text": "exact this looks very much like the blueprint of any H a sort of architecture you'd see on top of AWS now",
    "start": "778250",
    "end": "786290"
  },
  {
    "start": "786000",
    "end": "786000"
  },
  {
    "text": "we can start shifting into onboarding and we want to look at two views of onboarding I thought about leaving the",
    "start": "786290",
    "end": "791750"
  },
  {
    "text": "slide out but I think it there's something important it illustrates because it's still not code yet which is where we really want to get to but this",
    "start": "791750",
    "end": "798170"
  },
  {
    "text": "illustrates some important points that I think here which is I'm this is the onboarding experience you'll",
    "start": "798170",
    "end": "803749"
  },
  {
    "text": "see if you just go run the app right so I go out like any other onboarding and process I put my name and I'm other bits",
    "start": "803749",
    "end": "809689"
  },
  {
    "text": "in I tell it a little bit about my sass configuration which tier I am things of that nature I get the success message saying hooray",
    "start": "809689",
    "end": "816679"
  },
  {
    "text": "you're gonna get an email the system emails me and says here's your temporary password go login I go to this system I",
    "start": "816679",
    "end": "823369"
  },
  {
    "text": "log in the system says oh you're a new user go change your password something we've all done a million times but the",
    "start": "823369",
    "end": "829999"
  },
  {
    "text": "reason I put this here is because the code behind this there's if you when you go download the sample you're not gonna",
    "start": "829999",
    "end": "836360"
  },
  {
    "text": "see a bunch of code that's doing all this work because Cognito is doing most of this work for you and so I wanted to",
    "start": "836360",
    "end": "842420"
  },
  {
    "text": "point out the fact that like sending the email that the configuration of mi MFA or not MFA what my password looks like",
    "start": "842420",
    "end": "849410"
  },
  {
    "text": "am I going to be challenged to resupply a password again all of that is orchestrated by Cognito and it's one of",
    "start": "849410",
    "end": "857059"
  },
  {
    "text": "the upsides of that and by the way the other providers have their own way they orchestrate it but the good news is it's not really part of the solution you have",
    "start": "857059",
    "end": "863179"
  },
  {
    "text": "to build a whole lot yourself now let's actually go look and what to see with the services under the hood of that",
    "start": "863179",
    "end": "868910"
  },
  {
    "start": "866000",
    "end": "866000"
  },
  {
    "text": "experience or doing because if you remember at the outset I said hey there's a whole lot to this onboarding",
    "start": "868910",
    "end": "874369"
  },
  {
    "text": "process there's a lot you've got to do here and there's a lot of heavy lifting that you may not be considering let's",
    "start": "874369",
    "end": "879949"
  },
  {
    "text": "talk about it so I push that register button user says success you've registered what's that",
    "start": "879949",
    "end": "886040"
  },
  {
    "text": "doing under the hood well the first step obviously it's going to hit this tenant registration service I have rest entry point with a with a reg on it and now",
    "start": "886040",
    "end": "893629"
  },
  {
    "text": "this tenant registration service is going to be the orchestration of all these moving parts that we have to",
    "start": "893629",
    "end": "898759"
  },
  {
    "text": "create as part of onboarding and there are three major legs of that orchestration part first of all I have",
    "start": "898759",
    "end": "903829"
  },
  {
    "text": "to create the user and the identity footprint of my app so yes you signed up as a user I got to get you in as a user",
    "start": "903829",
    "end": "910519"
  },
  {
    "text": "but I also have to provide a llama can exceed our necessary for all users of",
    "start": "910519",
    "end": "916279"
  },
  {
    "text": "the system that are going to need identity of them themselves the other piece of this I'm going to have to provision is the tenant itself like yet",
    "start": "916279",
    "end": "925249"
  },
  {
    "text": "the tenant is an entirely separate construct we have to configure and setup the tenant and the last piece of that",
    "start": "925249",
    "end": "930829"
  },
  {
    "text": "puzzle will be the actual billing interface so let's walk those three legs and start",
    "start": "930829",
    "end": "936319"
  },
  {
    "text": "with the user and the identities well tenant registration calls our user management service and then that user",
    "start": "936319",
    "end": "942259"
  },
  {
    "text": "management service is going to create all the things needed to both create the user and create the identity profile so",
    "start": "942259",
    "end": "948019"
  },
  {
    "text": "when what that does is the first thing it does is it goes out to Cognito and it says to Cognito",
    "start": "948019",
    "end": "953360"
  },
  {
    "text": "i'm gonna create all the pieces that are needed therefore Cognito support the identity profile I want and there are",
    "start": "953360",
    "end": "958819"
  },
  {
    "text": "lots of pieces of that the first thing I want to point out here is that we're using Cognito in this example as an open",
    "start": "958819",
    "end": "966290"
  },
  {
    "text": "ID connect provider an open ID connect is implemented by tons of providers but there's some real goodness in the open",
    "start": "966290",
    "end": "972829"
  },
  {
    "text": "ID Connect implementation that let us take the traditional notion of sort of",
    "start": "972829",
    "end": "978199"
  },
  {
    "text": "identity and bind to it the notion of tenant identity right because what we really need out of identity isn't just",
    "start": "978199",
    "end": "984410"
  },
  {
    "text": "who you are we have to always know who you are in the context of the tenant you're associated with and that's the",
    "start": "984410",
    "end": "991069"
  },
  {
    "text": "extra piece we're gonna leverage out of open ID connect to make that happen so when they finally get into the hood",
    "start": "991069",
    "end": "996380"
  },
  {
    "text": "of this and you'll see what it's provisioning well the first thing it provisions is a user pool those you haven't used Cognito user pool is just a",
    "start": "996380",
    "end": "1002740"
  },
  {
    "text": "grouping of users and the good part of that user pool is it lets you actually configure policies for each one of those",
    "start": "1002740",
    "end": "1010389"
  },
  {
    "text": "pallets so am i MF am i what's my password policy all those things so what we've decided here is we're provisioning",
    "start": "1010389",
    "end": "1017680"
  },
  {
    "text": "a user pool per tenant so that you can then configure those policies on a tenant by tenant basis the other piece",
    "start": "1017680",
    "end": "1024459"
  },
  {
    "text": "we have to provision here is an identity pool so Cognito requires it has a federated identity model and so you have",
    "start": "1024459",
    "end": "1030428"
  },
  {
    "text": "to bind the user pool to a federated identity then of course we have to actually provision the user who is this",
    "start": "1030429",
    "end": "1036880"
  },
  {
    "text": "user who just signed up who is like the tenant administrative administration user in your system and then the last",
    "start": "1036880",
    "end": "1043390"
  },
  {
    "text": "bit is we have to do these custom claims and this is all related to that open ID Connect open ID Connect has this notion",
    "start": "1043390",
    "end": "1049270"
  },
  {
    "text": "of I have a standard set of claims and then I have this ability to configure custom claims and those custom claims",
    "start": "1049270",
    "end": "1055450"
  },
  {
    "text": "are we're going to put the tenet attributes and that seems like not such an important thing but it's actually a very important thing as we go through",
    "start": "1055450",
    "end": "1061510"
  },
  {
    "text": "the rest of this implementation so in there is tenant ID the role the company the plan you signed up for",
    "start": "1061510",
    "end": "1067779"
  },
  {
    "text": "all those bits are in those custom claims and become a first-class concept in your in your identity solution now",
    "start": "1067779",
    "end": "1074349"
  },
  {
    "text": "most people would think well that's enough you're ready you've got your identity bits but there's another piece of this equation we said we want",
    "start": "1074349",
    "end": "1081969"
  },
  {
    "text": "isolation and the way we're going to get isolation is through I am policies so as",
    "start": "1081969",
    "end": "1087099"
  },
  {
    "text": "part of provisioning this user this tenant we also have to provision all of",
    "start": "1087099",
    "end": "1092169"
  },
  {
    "text": "the policies that are going to be needed for all the types of users so while this",
    "start": "1092169",
    "end": "1097299"
  },
  {
    "text": "looks like a provision a user kind of experience remember its provision a tenants identity profile and this means",
    "start": "1097299",
    "end": "1103869"
  },
  {
    "text": "provisioning policies for every single type of of user you're going to have in",
    "start": "1103869",
    "end": "1108969"
  },
  {
    "text": "the system so once we're done with that we've got that part done now we can shift to ok it's successfully created",
    "start": "1108969",
    "end": "1116070"
  },
  {
    "text": "the other piece we have to think about is we're going to create some mapping between the user and the user pool here",
    "start": "1116070",
    "end": "1122379"
  },
  {
    "text": "and that's the only job of user management storage is to be able to say which user pool is this user with",
    "start": "1122379",
    "end": "1128739"
  },
  {
    "text": "everything else about the user and their profile is stored incognito not in that data that's managed by user",
    "start": "1128739",
    "end": "1135159"
  },
  {
    "text": "management finally tenant identity is created so out here we're going to",
    "start": "1135159",
    "end": "1140529"
  },
  {
    "text": "create one entry in the DynamoDB table that is our tenant it's going to have the tenant ID the plan are they active",
    "start": "1140529",
    "end": "1147549"
  },
  {
    "text": "inactive you can imagine all kinds of additional configuration and policy data related to a tenant here the important",
    "start": "1147549",
    "end": "1153700"
  },
  {
    "text": "concept here to notice is once this is all in place right we're still only gonna have one tenant and so as new",
    "start": "1153700",
    "end": "1159339"
  },
  {
    "text": "users are added for that tenant no tenant is added they're all just bound to that existing tenant that you created",
    "start": "1159339",
    "end": "1165070"
  },
  {
    "text": "in this process and I just wanted to show you quickly because I said these custom attributes these custom claims",
    "start": "1165070",
    "end": "1171399"
  },
  {
    "start": "1168000",
    "end": "1168000"
  },
  {
    "text": "are important this is a snapshot of a screen straight out of Cognito and it just shows you at the end of the process",
    "start": "1171399",
    "end": "1176950"
  },
  {
    "text": "probably hard to read but these are the custom attributes that were created to convey a tenant ID role etc now the last",
    "start": "1176950",
    "end": "1186820"
  },
  {
    "start": "1185000",
    "end": "1185000"
  },
  {
    "text": "step in that trifecta that we couldn't fit on that screen was the billing bit of this and there are going to be three",
    "start": "1186820",
    "end": "1191859"
  },
  {
    "text": "caveats in this talk that I'm going to tell you our code that are not in the downloads you're going to get because",
    "start": "1191859",
    "end": "1197379"
  },
  {
    "text": "these are all areas we're adding but I think are very important for you to think about as you're building associate billing is one of them it's not in the",
    "start": "1197379",
    "end": "1203169"
  },
  {
    "text": "download you're gonna get but I want to show you what it looked like so we've the last leg in this tenant reg",
    "start": "1203169",
    "end": "1209739"
  },
  {
    "text": "is we're gonna go out and we're gonna tell some cue hey provision a tenant now",
    "start": "1209739",
    "end": "1214989"
  },
  {
    "text": "why did we do that in a queue and everything else was in the queue the truth is it all could have been a cue and could have just had general good",
    "start": "1214989",
    "end": "1220480"
  },
  {
    "text": "asynchronous sort of messaging but there's a very specific reason I'm relying and showing a queue here which",
    "start": "1220480",
    "end": "1226389"
  },
  {
    "text": "is when you sign up for a system and you have built that all this provisioning and somebody's gone to all the trouble",
    "start": "1226389",
    "end": "1232389"
  },
  {
    "text": "to sign up and become a tenant your system you don't want to lose them at the billing step so for me I want this",
    "start": "1232389",
    "end": "1237730"
  },
  {
    "text": "to be a very fault tolerant sort of mechanism so I put it in the queue and I say yes I've asked account to be created",
    "start": "1237730",
    "end": "1243700"
  },
  {
    "text": "but if that account doesn't get created for another hour it's not going to affect the overall sort of tenants",
    "start": "1243700",
    "end": "1249249"
  },
  {
    "text": "ability to get in and start using the system so I put that in the queue and then I have a service that will essentially sit there pull the pull the",
    "start": "1249249",
    "end": "1256210"
  },
  {
    "text": "message out of the queue and then it will go to the billing system and say provision that experience and here's",
    "start": "1256210",
    "end": "1262539"
  },
  {
    "text": "where we can say okay if that billing system isn't somehow ready now we can have some kind of retry logic or",
    "start": "1262539",
    "end": "1267850"
  },
  {
    "text": "fallback logic and really make this as robust and sort of fault tolerant it's",
    "start": "1267850",
    "end": "1275409"
  },
  {
    "text": "possibly could be because for most of you billing systems are often an external third-party even if it's",
    "start": "1275409",
    "end": "1281379"
  },
  {
    "text": "internal it's some other system that's often outside of your control so anytime",
    "start": "1281379",
    "end": "1286419"
  },
  {
    "text": "I have an integration with a third party system or an outside source I'm gonna do everything I can to give myself fault",
    "start": "1286419",
    "end": "1292239"
  },
  {
    "text": "tolerance on that boundary okay so we've set up our tenants we've done",
    "start": "1292239",
    "end": "1299889"
  },
  {
    "start": "1295000",
    "end": "1295000"
  },
  {
    "text": "everything to onboard them now we're ready to actually come in and sign in and login as a tenant what's that look",
    "start": "1299889",
    "end": "1305440"
  },
  {
    "text": "like well pretty straightforward you hit the web app now what's not straightforward",
    "start": "1305440",
    "end": "1311230"
  },
  {
    "text": "here is and a lot of diagrams this web app would redirect to the identity provider and you'd immediately let the",
    "start": "1311230",
    "end": "1317139"
  },
  {
    "text": "identity provider handle the off process but we made a choice and I think it's a bit of a controversial choice in our",
    "start": "1317139",
    "end": "1323169"
  },
  {
    "text": "implementation of the sample to say hey we're going to use the user pool per tenant and as part of using user pool",
    "start": "1323169",
    "end": "1329320"
  },
  {
    "text": "per tenant before you can off against Cognito you've got to know what user pool is in because all I have when you",
    "start": "1329320",
    "end": "1334720"
  },
  {
    "text": "login your user ID and a password I don't know what's user pulled off you against and I'm not gonna go look for all of them",
    "start": "1334720",
    "end": "1340360"
  },
  {
    "text": "but the downside of putting this off manager in this cycle here is now I've",
    "start": "1340360",
    "end": "1345430"
  },
  {
    "text": "introduced a point of failure and a point of scale that could be a challenge in my architecture so it's a conscious",
    "start": "1345430",
    "end": "1352390"
  },
  {
    "text": "choice but we may reconsider whether or not that's the best way to go or should we let the identity provider directly be",
    "start": "1352390",
    "end": "1357580"
  },
  {
    "text": "that unit of scale which means we have a different model for how we represent users incognito either way that user",
    "start": "1357580",
    "end": "1364480"
  },
  {
    "text": "manager auth manager says I need to be able to go figure out are you which user pool you're in so I hit the user manager",
    "start": "1364480",
    "end": "1371380"
  },
  {
    "text": "I see look up your user pool if you remember in the early slides we showed that mapping was created and then I go",
    "start": "1371380",
    "end": "1377530"
  },
  {
    "text": "out to kognito and say hey is that user pool out there validates out there obvious not obviously if it's not out",
    "start": "1377530",
    "end": "1383320"
  },
  {
    "text": "there we're gonna come back and indicate hey you you didn't successfully login but assuming you found it then I'm gonna",
    "start": "1383320",
    "end": "1390250"
  },
  {
    "text": "go off you against the the kognito and I'm going to get back based on open ID",
    "start": "1390250",
    "end": "1396040"
  },
  {
    "text": "Connect a JSON web token a jot token and if you remember earlier I'm a obsessed",
    "start": "1396040",
    "end": "1402010"
  },
  {
    "text": "over the fact that we were using Open ID Connect and these claims this jaw token has in it has one token both my user",
    "start": "1402010",
    "end": "1408880"
  },
  {
    "text": "identity and my SAS identity and that's going to now be accessible to all of my services my partitioning and everything",
    "start": "1408880",
    "end": "1415840"
  },
  {
    "text": "else as it flows through the system so well if you said learn nothing else from that diagram focus on that token in the",
    "start": "1415840",
    "end": "1422050"
  },
  {
    "text": "top right cuz that's the outcome we really want now application services I'm",
    "start": "1422050",
    "end": "1430450"
  },
  {
    "start": "1427000",
    "end": "1427000"
  },
  {
    "text": "gonna write an app service I need a product management service that's gonna say go get me all the products out of",
    "start": "1430450",
    "end": "1436930"
  },
  {
    "text": "your catalog right now and I hit that prata so my question is okay a multi-tenant I when I made this",
    "start": "1436930",
    "end": "1442960"
  },
  {
    "text": "slide it's like what's different for me as a developer when I wrote these services and we built him into this sample what was different well the",
    "start": "1442960",
    "end": "1449770"
  },
  {
    "text": "interesting thing is when we wrote the services the whole goal was to say I want these people to write these",
    "start": "1449770",
    "end": "1456340"
  },
  {
    "text": "services if they almost didn't know they were multi-tenant right I'd like them not to be like adding all kinds of code",
    "start": "1456340",
    "end": "1462010"
  },
  {
    "text": "into their solutions to somehow figure out how to resolve a tenant figure out what policy needs to be applied I wanted",
    "start": "1462010",
    "end": "1468100"
  },
  {
    "text": "to make that as straightforward so I'm gonna do little framework II things here to sort of take common",
    "start": "1468100",
    "end": "1473620"
  },
  {
    "text": "concepts that are about multi-tenancy and hide them away from the developer so that mostly they don't have to care",
    "start": "1473620",
    "end": "1479650"
  },
  {
    "text": "about that stuff so let's look at what that means is an example so here I get a request in",
    "start": "1479650",
    "end": "1485260"
  },
  {
    "text": "you'll see that I get the get for my products and in my header of my spear",
    "start": "1485260",
    "end": "1490570"
  },
  {
    "text": "aquestion authorization header nothing special about this it has a bearer token and that bear token is that jaw token",
    "start": "1490570",
    "end": "1497620"
  },
  {
    "text": "we've been I've been obsessing over right it's encrypted but it's in there and it's passed in as part of it in the",
    "start": "1497620",
    "end": "1503650"
  },
  {
    "text": "context of every call and service to service interactions through my app services are all going to use this",
    "start": "1503650",
    "end": "1510190"
  },
  {
    "text": "message as a method as a way of conveying the context of tenant and user as we go through them with one of the",
    "start": "1510190",
    "end": "1517090"
  },
  {
    "text": "key goals of being I don't have to leave the service or go call something else to figure out which tenant you're part of",
    "start": "1517090",
    "end": "1523540"
  },
  {
    "text": "it's all in the header it's all in the token so now I get that and I now I want",
    "start": "1523540",
    "end": "1529120"
  },
  {
    "text": "to just as a developer say hey go get all the items out of it for this particular tenant out of the database but I don't know who you are as a tenant",
    "start": "1529120",
    "end": "1535800"
  },
  {
    "text": "and I don't know what security credentials to call you with right that second part some people don't think of",
    "start": "1535800",
    "end": "1542080"
  },
  {
    "text": "right which is oh I just know a tenant and that's all I need to know no I still want a scoped set of identity security",
    "start": "1542080",
    "end": "1549040"
  },
  {
    "text": "credentials based on our isolation goals that will scope your access that data and make sure no matter what you do you",
    "start": "1549040",
    "end": "1555640"
  },
  {
    "text": "aren't able to see a piece of data you're not supposed to see right so as an example let's say as I just happen to",
    "start": "1555640",
    "end": "1562030"
  },
  {
    "text": "as a developer manually put some tenant ID in and I put in whatever tenant ID I",
    "start": "1562030",
    "end": "1567100"
  },
  {
    "text": "want I can go see anybody's data without any credentials there but if I add the credentials to that equation",
    "start": "1567100",
    "end": "1573190"
  },
  {
    "text": "Eitan no matter what you put in the tenant ID if you're not allowed to see that data you're not only gonna be allowed to get to it so that's the sort",
    "start": "1573190",
    "end": "1580030"
  },
  {
    "text": "of two piece of this puzzle so what we did in this solution which is what every developer probably does is we said let's",
    "start": "1580030",
    "end": "1585580"
  },
  {
    "text": "take this and make some kind of library that is a library that will take care of of sort of managing all these token",
    "start": "1585580",
    "end": "1593050"
  },
  {
    "text": "related things we need to do so and the first one was we just need a tenant ID how do I get a tenant ID well I want",
    "start": "1593050",
    "end": "1599350"
  },
  {
    "text": "them to just be able to say I've got a request hey token manager go figure out what my Tennant ideas so",
    "start": "1599350",
    "end": "1605019"
  },
  {
    "text": "you call this helper function on the token manager it cracks open the request it decodes it it pulls out the tenant ID",
    "start": "1605019",
    "end": "1612309"
  },
  {
    "text": "and it returns that right and that becomes my standard way every way for everybody to get their tenant ID and the",
    "start": "1612309",
    "end": "1617950"
  },
  {
    "text": "truth is in my data access layer if I have one I could embed all of this in the data access layer in a way that the",
    "start": "1617950",
    "end": "1624009"
  },
  {
    "text": "client the service sort of developer wouldn't even know make this call they",
    "start": "1624009",
    "end": "1629169"
  },
  {
    "text": "could just that could all be done in the data access layer that's not true in the implementation that's probably something",
    "start": "1629169",
    "end": "1634389"
  },
  {
    "text": "I'd like to do to make it better the other piece I said you had to have is these credentials and we're going to",
    "start": "1634389",
    "end": "1640149"
  },
  {
    "text": "obsess over these credentials a lot and how you get them but essentially from on the surface here you'll see hey I'll go",
    "start": "1640149",
    "end": "1646509"
  },
  {
    "text": "to the token manager again give it the request and say you give me a set of credentials remember I just have a token",
    "start": "1646509",
    "end": "1651669"
  },
  {
    "text": "I know I want a secret key and an access key that are going to tell me contextually this is what you have to",
    "start": "1651669",
    "end": "1657820"
  },
  {
    "text": "get to this piece of data and so I'll make that call and back will come the credentials and those credentials will",
    "start": "1657820",
    "end": "1664120"
  },
  {
    "text": "be the credentials I use when I go to the database and say get me the give me",
    "start": "1664120",
    "end": "1670149"
  },
  {
    "text": "the items out of my catalog so that's that's the underlying implementation I think you could see how this would be",
    "start": "1670149",
    "end": "1675850"
  },
  {
    "text": "minimally invasive to the developer of the product management service but still be pretty nice in terms of hey there's",
    "start": "1675850",
    "end": "1683649"
  },
  {
    "text": "some good multi-tenant values in there now I wanted to just peek briefly into",
    "start": "1683649",
    "end": "1690429"
  },
  {
    "start": "1687000",
    "end": "1687000"
  },
  {
    "text": "what's in that get credentials from token bits and there's - there's a couple phases to this we're gonna see code multiple times along the way here",
    "start": "1690429",
    "end": "1696700"
  },
  {
    "text": "for this this first one is more about hey how did we just get those credentials back without how the mapping",
    "start": "1696700",
    "end": "1703210"
  },
  {
    "text": "is actually done under the hood so you'll see here this get credentials from token essentially drops in look to",
    "start": "1703210",
    "end": "1709269"
  },
  {
    "text": "the request pulls the authorization header out of the request parses out the token decodes the token and then there's",
    "start": "1709269",
    "end": "1716799"
  },
  {
    "text": "a couple of calls that are made here and these calls are all about our internal calls that we'll break in go into a",
    "start": "1716799",
    "end": "1722230"
  },
  {
    "text": "little more detail on but these calls their goal is to essentially go out to Cognito and say I have a token I need",
    "start": "1722230",
    "end": "1728679"
  },
  {
    "text": "the appropriate credentials that go with it to come back those credentials come back and then those of you that are",
    "start": "1728679",
    "end": "1733840"
  },
  {
    "text": "familiar with no this is just a callback function you see it passed up credentials passed in at the top that's",
    "start": "1733840",
    "end": "1738900"
  },
  {
    "text": "a callback function and then at the end of this function you'll see that I get the results from from making this",
    "start": "1738900",
    "end": "1744990"
  },
  {
    "text": "mapping and I call the callback functions throwing there is sending the results back wish we had a little longer to dig into",
    "start": "1744990",
    "end": "1751140"
  },
  {
    "text": "this one but you get the basic idea here which is this guy's sort of isolated in a way doing that mapping for you that",
    "start": "1751140",
    "end": "1757410"
  },
  {
    "text": "should be reused by everybody and from one spot the other piece of security we",
    "start": "1757410",
    "end": "1764670"
  },
  {
    "start": "1762000",
    "end": "1762000"
  },
  {
    "text": "want to add to this is this custom authorized or I talked about earlier and this is so right now what we looked at",
    "start": "1764670",
    "end": "1771360"
  },
  {
    "text": "was inside the service what were we doing to apply security with the custom",
    "start": "1771360",
    "end": "1776910"
  },
  {
    "text": "authorizer I'm wandering out to an outer the outer edge and I'm saying what am I going to do at the API gateway as",
    "start": "1776910",
    "end": "1782430"
  },
  {
    "text": "another layer of security in my system right it's not that if I get get security at one layer I'm done no matter",
    "start": "1782430",
    "end": "1788490"
  },
  {
    "text": "what I want I would love to put security as many layers as I can so that I get this better sense that my my security",
    "start": "1788490",
    "end": "1794430"
  },
  {
    "text": "isn't gonna fall down on me so what this custom authorizer lets me do is say hey I've got this token coming in it's got",
    "start": "1794430",
    "end": "1800040"
  },
  {
    "text": "all this goodness in it I know who you are as a tenant I know you are as user and I can connect this lamb to call to",
    "start": "1800040",
    "end": "1805590"
  },
  {
    "text": "your API gateway entry points and say hey for these rest entry points I'm going to inspect what's in there and I'm",
    "start": "1805590",
    "end": "1812490"
  },
  {
    "text": "gonna determine which methods you're allowed to get to and which methods you're not allowed to get to and I will",
    "start": "1812490",
    "end": "1817950"
  },
  {
    "text": "control access to your services so you never even get to a service if you're",
    "start": "1817950",
    "end": "1822960"
  },
  {
    "text": "not supposed to be there and if we look inside this this is a the lambda",
    "start": "1822960",
    "end": "1828450"
  },
  {
    "start": "1825000",
    "end": "1825000"
  },
  {
    "text": "function that we implemented it's a snippet of code it's a much bigger chunk of code but you can kind of conceptually see what's going on here the first thing",
    "start": "1828450",
    "end": "1835230"
  },
  {
    "text": "we do is we pull the jot token out of the incoming context from the API",
    "start": "1835230",
    "end": "1841410"
  },
  {
    "text": "gateway and then we construct a policy write a policy is the mechanism we need to convey back to the API gateway what",
    "start": "1841410",
    "end": "1849240"
  },
  {
    "text": "methods are allowed and whether a methods allowed to come through or not allowed to come through and so we construct that and now we inspect the",
    "start": "1849240",
    "end": "1856200"
  },
  {
    "text": "contents of the jaw token and you'll see a line here where we look at the is this jaw token and admin we essentially look",
    "start": "1856200",
    "end": "1863070"
  },
  {
    "text": "to see whether it's an admin and if it is an admin we set the policy to hey all methods allowed anybody can you can",
    "start": "1863070",
    "end": "1869880"
  },
  {
    "text": "access any you want if you're not we constrain it to you can only do gets and you can do",
    "start": "1869880",
    "end": "1876000"
  },
  {
    "text": "one post which is on this users path and then you'll see we do a context succeed and it goes back and that policy is then",
    "start": "1876000",
    "end": "1882780"
  },
  {
    "text": "used by the the API gateway to control access to me if you didn't even have",
    "start": "1882780",
    "end": "1887880"
  },
  {
    "text": "access say you didn't do all the bits under the hood with the token and the mapping that I talked about earlier you",
    "start": "1887880",
    "end": "1893820"
  },
  {
    "text": "could at least include this at in the outer edge as a nice way to say let me at least inspect the token enough to say",
    "start": "1893820",
    "end": "1899730"
  },
  {
    "text": "they can't get through the API unless they're unless they have the right proofs now data partitioning is kind of",
    "start": "1899730",
    "end": "1908940"
  },
  {
    "start": "1905000",
    "end": "1905000"
  },
  {
    "text": "interesting because when I put this together I thought well data partitioning there's going to be a lot to say here is not but data partitioning",
    "start": "1908940",
    "end": "1915090"
  },
  {
    "text": "ends up being not so complicated and it's the interesting parts of data partitioning are more about how we control access to the data than how we",
    "start": "1915090",
    "end": "1922260"
  },
  {
    "text": "actually partition it but just if you look at what we actually implemented in this solution in a pooled model with",
    "start": "1922260",
    "end": "1930480"
  },
  {
    "text": "DynamoDB and a shared table we're essentially going to use the partition key of DynamoDB for each tenant ID so",
    "start": "1930480",
    "end": "1937980"
  },
  {
    "text": "now when we access data we first have to fill out the tenant ID is the partition",
    "start": "1937980",
    "end": "1943080"
  },
  {
    "text": "key and then your your range key will become whatever your prior you know",
    "start": "1943080",
    "end": "1948720"
  },
  {
    "text": "top-level key would have been so in this case product ID now we've also implemented and this is caveat number",
    "start": "1948720",
    "end": "1955920"
  },
  {
    "text": "two this s3 bucket now we we're in the process of adding this to the solution it's not in the version you'll get but",
    "start": "1955920",
    "end": "1962100"
  },
  {
    "text": "you'll see it soon but we're adding s3 bucket with partitioning to show you",
    "start": "1962100",
    "end": "1967200"
  },
  {
    "text": "what it looks like but also because it's kind of nice to add product images to our catalog in a way that you can see that but we also want to show how object",
    "start": "1967200",
    "end": "1973650"
  },
  {
    "text": "tags can be used as a mechanism to partition data in s3 but the",
    "start": "1973650",
    "end": "1978660"
  },
  {
    "text": "partitioning of this is not nearly as important as the fact that you probably put helpers for between each of your",
    "start": "1978660",
    "end": "1985700"
  },
  {
    "text": "each of your storage units that basically hide away the details of of",
    "start": "1985700",
    "end": "1991620"
  },
  {
    "text": "how you're partitioning the data so the best example I could give here is let's say we're using this pooled model for",
    "start": "1991620",
    "end": "1997830"
  },
  {
    "text": "data for this DynamoDB table on the left and tomorrow we said you know what",
    "start": "1997830",
    "end": "2002900"
  },
  {
    "text": "based on our feedback from customers or some operational profile we're seeing we really need that to be siloed data now",
    "start": "2002900",
    "end": "2009440"
  },
  {
    "text": "it can't be pooled we need every tenant to have their own table well in that model I would prefer that the app code",
    "start": "2009440",
    "end": "2015590"
  },
  {
    "text": "itself doesn't somehow and I'll have to go account for the fact that it's silo versus pool I want that to be hidden",
    "start": "2015590",
    "end": "2020990"
  },
  {
    "text": "away by whatever sort of framework our tool or library sits between me and the table itself now this is the code that",
    "start": "2020990",
    "end": "2032030"
  },
  {
    "start": "2029000",
    "end": "2029000"
  },
  {
    "text": "is sort of the second step in acquiring the data we talked about how you get the credentials for the code and that's the",
    "start": "2032030",
    "end": "2037880"
  },
  {
    "text": "first line of this but then now that we have the credentials that come back from that that come back from this callback",
    "start": "2037880",
    "end": "2043340"
  },
  {
    "text": "function what do we actually do to call DynamoDB to get the data from the tenant in that context well the first thing we",
    "start": "2043340",
    "end": "2049010"
  },
  {
    "text": "have to do is populate a set of search parameters pretty straightforward what table were we getting it out of and",
    "start": "2049010",
    "end": "2054560"
  },
  {
    "text": "we're looking for a value where tenant ID equals a specific value that's based on the tenant ID which is a context I",
    "start": "2054560",
    "end": "2060560"
  },
  {
    "text": "already got outside the scope of this function and then the line that seemed so innocuous but as the whole reason",
    "start": "2060560",
    "end": "2067158"
  },
  {
    "text": "this slide exists is this construction of this DynamoDB helper and the DynamoDB",
    "start": "2067159",
    "end": "2072888"
  },
  {
    "text": "helper really just gets constructed and we use it to call the query you'd say why why is that line relevant well that",
    "start": "2072889",
    "end": "2079368"
  },
  {
    "text": "line actually isn't being a huge source of challenge for us when we built the the sample solution because you'll",
    "start": "2079369",
    "end": "2085099"
  },
  {
    "text": "notice the second parameter it takes when I construct it takes these credentials that comes in well we initially started by leveraging all",
    "start": "2085099",
    "end": "2091760"
  },
  {
    "text": "kinds of third-party helpers that are out there for dynamodb and what we found is a lot of those solutions rely on a",
    "start": "2091760",
    "end": "2100099"
  },
  {
    "text": "credentials configuration that sort of leverages the AWS general ways they're like globally configuring your API",
    "start": "2100099",
    "end": "2106369"
  },
  {
    "text": "config and all those other bits and then they just suck it in as the context for the credentials and even when you try to",
    "start": "2106369",
    "end": "2111859"
  },
  {
    "text": "override them with some specific set of credentials you don't successfully override them so you end up with a",
    "start": "2111859",
    "end": "2117530"
  },
  {
    "text": "broader scope than you ever want or you end up with one notion of credentials so we actually had to build our own",
    "start": "2117530",
    "end": "2123580"
  },
  {
    "text": "DynamoDB helper wrapper here around the API with the expressed goal of saying on",
    "start": "2123580",
    "end": "2128599"
  },
  {
    "text": "a call by call basis your reacquiring and reapplying the credentials for every",
    "start": "2128599",
    "end": "2134630"
  },
  {
    "text": "single call and that makes sure you have the scoped access the data that you need I'm hoping",
    "start": "2134630",
    "end": "2139880"
  },
  {
    "text": "there's a better answer this ultimately I or a third-party tool that lets us do what he wants so that it fits more with",
    "start": "2139880",
    "end": "2145579"
  },
  {
    "text": "a known normal what you're doing but that's why all that code exists if you go look at it so I haven't really",
    "start": "2145579",
    "end": "2153859"
  },
  {
    "text": "answered the question I posed at the beginning though which is I said we had identity we have these iam policies but",
    "start": "2153859",
    "end": "2160790"
  },
  {
    "text": "how are those iam policies controlling my access to data so far nothing you've",
    "start": "2160790",
    "end": "2167270"
  },
  {
    "text": "seen in the code would have changed anything about whether you could have just put a different tenant ID in and went and seen somebody else's data and",
    "start": "2167270",
    "end": "2174200"
  },
  {
    "text": "where this gets applied is in the way that you use iam policies that's part one of the problem so let's look at the",
    "start": "2174200",
    "end": "2180829"
  },
  {
    "start": "2178000",
    "end": "2178000"
  },
  {
    "text": "I M policies under the hood of the I and policies that were provision if you remember one of the early slides I",
    "start": "2180829",
    "end": "2186470"
  },
  {
    "text": "provisioned all those ion policies I've pulled one out here and this is just one",
    "start": "2186470",
    "end": "2191569"
  },
  {
    "text": "example of one of the many iam policies that get provisioned for a tenant and I also wanted to convey the idea that",
    "start": "2191569",
    "end": "2197030"
  },
  {
    "text": "Bobby obviously these policies are parole policies so this happens to be a what a",
    "start": "2197030",
    "end": "2202760"
  },
  {
    "text": "read-only on the order table that is used for for a tenant but if I had an",
    "start": "2202760",
    "end": "2208339"
  },
  {
    "text": "admin or a system admin or a different role that prigs would be potentially different but on this one it's read-only",
    "start": "2208339",
    "end": "2214700"
  },
  {
    "text": "and you'll see the actions are constrained to read operations only no write operations and then the real",
    "start": "2214700",
    "end": "2220700"
  },
  {
    "text": "caveat is down in that condition down in the bottom in that condition you'll see that I use leading keys and you'll see",
    "start": "2220700",
    "end": "2227119"
  },
  {
    "text": "it specifically in the leading key it's not so obvious but that's a tenant ID and what that says is whoever's running",
    "start": "2227119",
    "end": "2233420"
  },
  {
    "text": "in the context of this iam policy will only be able to access items that have",
    "start": "2233420",
    "end": "2238640"
  },
  {
    "text": "that leading key value and that's where the IM policy enforces and and controls",
    "start": "2238640",
    "end": "2245210"
  },
  {
    "text": "that cross tenant access now the last",
    "start": "2245210",
    "end": "2252200"
  },
  {
    "start": "2249000",
    "end": "2249000"
  },
  {
    "text": "piece of this sort of isolation and identity puzzle that is being used across to all of this is a piece I sort",
    "start": "2252200",
    "end": "2258740"
  },
  {
    "text": "of left out at the beginning because and it's a nuance that gets lost often in the implementation of this particular",
    "start": "2258740",
    "end": "2265040"
  },
  {
    "text": "solution which is if you think about it at the beginning we configured I am",
    "start": "2265040",
    "end": "2270430"
  },
  {
    "text": "policies and we configured kognito users but there's nothing when you off that",
    "start": "2270430",
    "end": "2276860"
  },
  {
    "text": "suddenly binds that user to an IM role those IM policies just exist out there",
    "start": "2276860",
    "end": "2282470"
  },
  {
    "text": "on their own there's nothing in them in the policy that references the user nothing in the user that references the",
    "start": "2282470",
    "end": "2288980"
  },
  {
    "text": "policy and yet somehow under the hood when we do this the two get bound together so let's look at how that works",
    "start": "2288980",
    "end": "2296330"
  },
  {
    "text": "and by the way if you look in the code of the solution because I didn't write this part of the solution another member",
    "start": "2296330",
    "end": "2301880"
  },
  {
    "text": "of team Judah Bernstein worked on this and in fact I came back to him this exact question like I'm not seeing where that mappings happening and if you look",
    "start": "2301880",
    "end": "2309320"
  },
  {
    "text": "at the user pool when you configured it you configured these custom attributes one of the attributes you configured was",
    "start": "2309320",
    "end": "2314930"
  },
  {
    "text": "role and then when you configured the federated identity you gave it the user pool in the application ID but the",
    "start": "2314930",
    "end": "2321740"
  },
  {
    "text": "really secret sauce of this moment is these role matching rules the role",
    "start": "2321740",
    "end": "2326990"
  },
  {
    "text": "matching rules allow you to configure a matching from an attribute to an actual set of policies and those role matching",
    "start": "2326990",
    "end": "2334700"
  },
  {
    "text": "rules which are enforced and applied by kognito itself are the thing that make",
    "start": "2334700",
    "end": "2340490"
  },
  {
    "text": "this binding that is not so obvious now",
    "start": "2340490",
    "end": "2345890"
  },
  {
    "start": "2345000",
    "end": "2345000"
  },
  {
    "text": "if we look in the code that is the code that underlies this and we were to go back to the provisioning code that it was at the onboarding process here and",
    "start": "2345890",
    "end": "2352130"
  },
  {
    "text": "we looked at where we're creating all those policies this is a snippet of the code you would have seen you see here",
    "start": "2352130",
    "end": "2357980"
  },
  {
    "text": "that I'm defining each of the roles and you'll see basically this sort of expression here where you say the role",
    "start": "2357980",
    "end": "2365060"
  },
  {
    "text": "equals some value in this first top one it looks like it's a system user so if",
    "start": "2365060",
    "end": "2370220"
  },
  {
    "text": "the role is a system user here's the particular role I want it to bind to if the role is a support only user then it",
    "start": "2370220",
    "end": "2378260"
  },
  {
    "text": "binds to this particular role and then there's obviously a whole collection of these that describe these and if you",
    "start": "2378260",
    "end": "2383450"
  },
  {
    "text": "open the Cognito hvi console and you go look in there you can actually see these matching rules so to me something that",
    "start": "2383450",
    "end": "2389800"
  },
  {
    "text": "kognito can do because it has it can bind to i am in a way that's kind of special that gives you a little bit of a",
    "start": "2389800",
    "end": "2395990"
  },
  {
    "text": "with a short-circuit the process the last piece of this is the actual code",
    "start": "2395990",
    "end": "2402830"
  },
  {
    "start": "2399000",
    "end": "2399000"
  },
  {
    "text": "that you you run at runtime that sort of forces this mapping to happen so if you if you",
    "start": "2402830",
    "end": "2408539"
  },
  {
    "text": "remember at the beginning of this we looked at some code that said get credentials from token and I said oh there's a couple of functions in there",
    "start": "2408539",
    "end": "2414690"
  },
  {
    "text": "that translate your ID token into the appropriate security credentials well",
    "start": "2414690",
    "end": "2421109"
  },
  {
    "text": "under the hood of one of those calls is this predict particular call get credentials for identity and this get",
    "start": "2421109",
    "end": "2427349"
  },
  {
    "text": "credentials for identity takes first of all the federated identity pool ID and",
    "start": "2427349",
    "end": "2432749"
  },
  {
    "text": "it just takes your token but inside your token here is your role so the role is",
    "start": "2432749",
    "end": "2440579"
  },
  {
    "text": "that's needed to make this mapping is already in there so then when we get to this kognito API call here which is get",
    "start": "2440579",
    "end": "2447269"
  },
  {
    "text": "credentials for identity and we make that call and we pass in these parameters kognito we'll look inside of",
    "start": "2447269",
    "end": "2453719"
  },
  {
    "text": "it it will see what role you are it'll evaluate those role matching rules and it will find the appropriate policies",
    "start": "2453719",
    "end": "2460799"
  },
  {
    "text": "that are there and it'll construct a new token for you that is a token that is now scoped by the that roles set of",
    "start": "2460799",
    "end": "2467940"
  },
  {
    "text": "policies and just because I think it's",
    "start": "2467940",
    "end": "2473190"
  },
  {
    "start": "2471000",
    "end": "2471000"
  },
  {
    "text": "kind of convoluted I tried to have one last slide that connected all the dots on this right so your service under the",
    "start": "2473190",
    "end": "2478769"
  },
  {
    "text": "hood at some point says get credentials for identity passing that ID token at the top you can see the ID token the",
    "start": "2478769",
    "end": "2485069"
  },
  {
    "text": "cracked open Jason version of that token that has the role that you're interested in then kognito will go to the matching",
    "start": "2485069",
    "end": "2491609"
  },
  {
    "text": "it returns the scope credentials and then eventually you have a secret key in an access key that are there now if you",
    "start": "2491609",
    "end": "2497579"
  },
  {
    "text": "were not using Cognito here you could still map the role to a policy but now",
    "start": "2497579",
    "end": "2504359"
  },
  {
    "text": "you'd use the assumed role API that's out there so now it becomes your job do the assumed role and it goes through",
    "start": "2504359",
    "end": "2510359"
  },
  {
    "text": "this and you'll eventually get back an STS token that is the equivalent of the tensions that we get at the end of this",
    "start": "2510359",
    "end": "2515609"
  },
  {
    "text": "process so again kognito has got some nice little bells and whistles here that make this a little easier but totally",
    "start": "2515609",
    "end": "2521880"
  },
  {
    "text": "achievable outside the context of Cognito as well now everything we've",
    "start": "2521880",
    "end": "2528960"
  },
  {
    "start": "2527000",
    "end": "2527000"
  },
  {
    "text": "talked about so far has been in the context of the server how does the",
    "start": "2528960",
    "end": "2534450"
  },
  {
    "text": "server implement storage how does the server end services because I think that's where most people are focused on",
    "start": "2534450",
    "end": "2539760"
  },
  {
    "text": "terms of how to build all this but there is a multi-tenant sort of universe that we have to think about for the client",
    "start": "2539760",
    "end": "2545700"
  },
  {
    "text": "and I don't want to spend a ton of time on the client but I think it'd also be wrong to leave the client out of this",
    "start": "2545700",
    "end": "2550740"
  },
  {
    "text": "because it plays a role and how does it get how does it deal with identity how does it map it into the implementation but I also think it's very specific to",
    "start": "2550740",
    "end": "2557490"
  },
  {
    "text": "individual applications and even technology stacks you know dotnet java angular are gonna approach this probably",
    "start": "2557490",
    "end": "2564180"
  },
  {
    "text": "slightly differently but you do have to think about hey my a panda specifically this app has one application that is",
    "start": "2564180",
    "end": "2571230"
  },
  {
    "text": "addressing the needs of system users tenant users and all the different variations there's like six I think six",
    "start": "2571230",
    "end": "2578580"
  },
  {
    "text": "or seven variations of users that it has and each one of those has a slightly different experience and we did that on",
    "start": "2578580",
    "end": "2583890"
  },
  {
    "text": "purpose so that you could both see the IAM policies applied but you could also see different flows in the application",
    "start": "2583890",
    "end": "2589920"
  },
  {
    "text": "go on and off based on your privileges so we have an admin experience where",
    "start": "2589920",
    "end": "2594930"
  },
  {
    "text": "somebody can go out and view all that had tenants in the system they can inactivate DIAC sorry deactivating and",
    "start": "2594930",
    "end": "2601920"
  },
  {
    "text": "activate tenants out there and control whether or tenants allowed into the system or not into the system they can",
    "start": "2601920",
    "end": "2607350"
  },
  {
    "text": "create new system users with different sorts of views so you can have a system user sees all tenant data or just",
    "start": "2607350",
    "end": "2613200"
  },
  {
    "text": "somebody who's like read-only and can go out there and maybe is more of a support role kind of things and then we have a",
    "start": "2613200",
    "end": "2618330"
  },
  {
    "text": "tenant admin a tenant admin has a very different experience because tenant admin is allowed to create other tenant users they're allowed to see metrics",
    "start": "2618330",
    "end": "2624960"
  },
  {
    "text": "that are out to configure policies that are not there and then we just have a basic tenant user or somebody who just consumes the application and you can",
    "start": "2624960",
    "end": "2631200"
  },
  {
    "text": "imagine even different roles at that level so what's that look like under the",
    "start": "2631200",
    "end": "2636390"
  },
  {
    "start": "2635000",
    "end": "2635000"
  },
  {
    "text": "covers like how are we applying both security and controlling like the paths through the application well if you're",
    "start": "2636390",
    "end": "2642600"
  },
  {
    "text": "familiar with angularjs L there's no magic here we're essentially want to say hey when we authenticate yes we're",
    "start": "2642600",
    "end": "2649020"
  },
  {
    "text": "interested in what that token is for all our authorization through on the server side but on the client side we still",
    "start": "2649020",
    "end": "2654990"
  },
  {
    "text": "want to pull that token out and pull the data out of that token on for client side use for pieces that we need in the",
    "start": "2654990",
    "end": "2661560"
  },
  {
    "text": "context of the client so here you'll see this game called root scope and root scope and angularjs is just think of it",
    "start": "2661560",
    "end": "2666840"
  },
  {
    "text": "as a global context that I can you reference throughout my application and I you'll see this",
    "start": "2666840",
    "end": "2673380"
  },
  {
    "text": "Okin that comes back response.data token there in that second line that's my bearer token that comes back",
    "start": "2673380",
    "end": "2678870"
  },
  {
    "text": "from this I have to decode that token I use this little module called a jot helper that goes out and decodes it for",
    "start": "2678870",
    "end": "2684570"
  },
  {
    "text": "me and now once it's decoded I can just poke into it and pull out the attributes that are interesting me on the client so",
    "start": "2684570",
    "end": "2690840"
  },
  {
    "text": "I pull out the name because I want to display your name on the screen somewhere and then more importantly I",
    "start": "2690840",
    "end": "2696390"
  },
  {
    "text": "pull out your role and when I pull out your role I'm gonna leverage your role in the app side to control all the paths",
    "start": "2696390",
    "end": "2702390"
  },
  {
    "text": "that you can get to and I don't want to dig on into this one too much because it's so specific to to angular but what",
    "start": "2702390",
    "end": "2711420"
  },
  {
    "start": "2705000",
    "end": "2705000"
  },
  {
    "text": "we did here is say okay now there's a set of policies that determine on the client which paths you can navigate to",
    "start": "2711420",
    "end": "2716880"
  },
  {
    "text": "in which screens you can see in which contexts and so we created this centralized function off the root scope",
    "start": "2716880",
    "end": "2723780"
  },
  {
    "text": "that was is link enabled and what is link enabled does here and if you look at this function it takes a view location and that view location is",
    "start": "2723780",
    "end": "2730890"
  },
  {
    "text": "essentially the path you're trying to navigate to are you trying to get to tenants or users or orders or products what are you trying to navigate to and",
    "start": "2730890",
    "end": "2737580"
  },
  {
    "text": "then says I'm going to go look at your role that I got from the token that came in and evaluate whether or not you are",
    "start": "2737580",
    "end": "2744540"
  },
  {
    "text": "allowed to see that path in the application so here you'll see if you wander down a little bit if you if the",
    "start": "2744540",
    "end": "2750870"
  },
  {
    "text": "view location equals slash tenants I'm gonna go look to see this is a little",
    "start": "2750870",
    "end": "2756750"
  },
  {
    "text": "bit of a helper function because I have to squeeze all this on the screen I'm gonna go look to see if your role actually is compliant with a system user",
    "start": "2756750",
    "end": "2763290"
  },
  {
    "text": "and if it is I'll return true if it's not already and that's how I'll control whether or not that link is there so",
    "start": "2763290",
    "end": "2769800"
  },
  {
    "text": "this is link enabled ends up being referenced in our HTML now so if you get",
    "start": "2769800",
    "end": "2775050"
  },
  {
    "start": "2772000",
    "end": "2772000"
  },
  {
    "text": "all the way out to the HTML side of coding the HTML bits of this and say I've got this link that lets you get to",
    "start": "2775050",
    "end": "2780330"
  },
  {
    "text": "this on the screen now I'm going to use these angular notations like ng-if is just an angular notation for invoking",
    "start": "2780330",
    "end": "2787620"
  },
  {
    "text": "the angular framework to say invoke this if clause and this if function is going to call my is link enabled function that",
    "start": "2787620",
    "end": "2795210"
  },
  {
    "text": "I showed you is just a second ago to say hey here's I'm interested in the slash users path view the slash users of view",
    "start": "2795210",
    "end": "2802680"
  },
  {
    "text": "location is a my allowed based on who I currently am to get to that location and then if I am I'll",
    "start": "2802680",
    "end": "2809400"
  },
  {
    "text": "use this is link active to be able to like deactivator or activate that link I'm less worried",
    "start": "2809400",
    "end": "2816120"
  },
  {
    "text": "about the HTML bits of this and the angular bits of this what I'm really worried about and maybe I could have",
    "start": "2816120",
    "end": "2821460"
  },
  {
    "text": "just presented is this flow that is at the bottom here right really I just want to say whatever technology you're using",
    "start": "2821460",
    "end": "2827570"
  },
  {
    "text": "go out there extract the roll from from their token that comes back to find some",
    "start": "2827570",
    "end": "2834390"
  },
  {
    "text": "process for centralized process hopefully for evaluating somebody's access privileges and then and use",
    "start": "2834390",
    "end": "2840960"
  },
  {
    "text": "whatever mechanism that's the lightest weight mechanism you can in your HTML to to enable and disable that access the",
    "start": "2840960",
    "end": "2847430"
  },
  {
    "text": "most important thing here is whatever I do on the client",
    "start": "2847430",
    "end": "2852650"
  },
  {
    "text": "that's just client's notion of of security it has nothing to do with the",
    "start": "2852650",
    "end": "2858930"
  },
  {
    "text": "server side of security so if somebody somehow implants implement something in the client here and enables a path that",
    "start": "2858930",
    "end": "2865200"
  },
  {
    "text": "they weren't supposed to enable by mistake when that token finally gets to the server side I don't really care",
    "start": "2865200",
    "end": "2870990"
  },
  {
    "text": "about any of that I'm still going to do all those things that we talked about I'm gonna look at the I'm first gonna",
    "start": "2870990",
    "end": "2876060"
  },
  {
    "text": "look at the API gateway level and with the custom authorizer see if your allows through and then even when you get all",
    "start": "2876060",
    "end": "2881820"
  },
  {
    "text": "the way into my service and you try to access some resource I'm gonna use privileges to be able to make sure that",
    "start": "2881820",
    "end": "2888540"
  },
  {
    "text": "you can't get to a resource so this is what I'm saying isolation sort of wanders across this whole experience",
    "start": "2888540",
    "end": "2893760"
  },
  {
    "text": "even when you don't intend for it to potentially third caveat metering is not",
    "start": "2893760",
    "end": "2901440"
  },
  {
    "start": "2898000",
    "end": "2898000"
  },
  {
    "text": "currently in the sample solution last of the caveats metering is being added to",
    "start": "2901440",
    "end": "2906510"
  },
  {
    "text": "that solution right now so we ultimately want to see metering and billing both added and in this s3 partitioning those",
    "start": "2906510",
    "end": "2913440"
  },
  {
    "text": "are the three that are like under development but not released yet um but I still feel like you can't build a SAS",
    "start": "2913440",
    "end": "2919110"
  },
  {
    "text": "system and not talk about metering because metering is at the core of both billing but it's also at the core of a",
    "start": "2919110",
    "end": "2924150"
  },
  {
    "text": "lot of other analytics potentially and so showed a sample here of what the metering sort of solution we're looking",
    "start": "2924150",
    "end": "2929730"
  },
  {
    "text": "at right now and you'll see our functions come in our services are accessed through the API gateway like we",
    "start": "2929730",
    "end": "2935070"
  },
  {
    "text": "said we will then in we are basically instrumenting them with a with a module here could be a agent",
    "start": "2935070",
    "end": "2942359"
  },
  {
    "text": "could be anything you want that is appropriate for your technology and those metering sort of modules are",
    "start": "2942359",
    "end": "2948930"
  },
  {
    "text": "responsible for surfacing the metrics of our system and you'll notice they consult this tenant manager in the",
    "start": "2948930",
    "end": "2955470"
  },
  {
    "text": "middle and that tenant manager has configuration and that's because metering can be tenant specific I kind",
    "start": "2955470",
    "end": "2961380"
  },
  {
    "text": "of specific SLA s for each tenant I can have configuration that will affect your metering experience so these these",
    "start": "2961380",
    "end": "2968309"
  },
  {
    "text": "metering agents have to consult that configuration to determine what to do when their metering your data but",
    "start": "2968309",
    "end": "2973770"
  },
  {
    "text": "essentially after that if I've got some way to surface the metrics now it's just going to go through some mechanism that's going to aggregate that data so",
    "start": "2973770",
    "end": "2981240"
  },
  {
    "text": "I'm gonna go to firehose here I'm gonna go to to aggregate it I'm to collect it put it into redshift and then I'm going",
    "start": "2981240",
    "end": "2987540"
  },
  {
    "text": "to put some billing aggregation piece of this that will actually pull out the metrics that are metrics that are most",
    "start": "2987540",
    "end": "2993000"
  },
  {
    "text": "relevant to the billing environment and push them some billing systems pool so",
    "start": "2993000",
    "end": "2998040"
  },
  {
    "text": "it could be the way but in this case I think it mostly be push will push those metrics to the billing system and then",
    "start": "2998040",
    "end": "3003920"
  },
  {
    "text": "the billing will billing will be able to generate that bit I mostly don't want people to overlook the need for this as",
    "start": "3003920",
    "end": "3010160"
  },
  {
    "text": "part of their implementation now we had",
    "start": "3010160",
    "end": "3015319"
  },
  {
    "start": "3012000",
    "end": "3012000"
  },
  {
    "text": "we wanted to be able to say well we got this system admin experiences tenant admin experience what's the difference between their experiences and so we",
    "start": "3015319",
    "end": "3022040"
  },
  {
    "text": "introduced the kind of a cheesy little dashboard not very not very visually appealing necessarily but it shows you",
    "start": "3022040",
    "end": "3028280"
  },
  {
    "text": "the service healthier so all as the services are all running you'll see a little green chat box this year obviously if the micro services go down",
    "start": "3028280",
    "end": "3034460"
  },
  {
    "text": "you'll see red X here and it was meant included here to say this is a system",
    "start": "3034460",
    "end": "3039829"
  },
  {
    "text": "admins view of Health that's across to all the tenants and then we have these metrics down below which are just how",
    "start": "3039829",
    "end": "3044960"
  },
  {
    "text": "many products how many orders things of that nature that was meant to be hey this is both the system and a tenant",
    "start": "3044960",
    "end": "3050210"
  },
  {
    "text": "admin view and it was a way to sort of show you what would it be what's a different experience potentially like",
    "start": "3050210",
    "end": "3055849"
  },
  {
    "text": "especially on the client as we look at applying different roles but nothing exotic about it just something I wanted",
    "start": "3055849",
    "end": "3061460"
  },
  {
    "text": "to call out because it's an example of something I think you should include in your app now one of the takeaways from",
    "start": "3061460",
    "end": "3068780"
  },
  {
    "start": "3063000",
    "end": "3063000"
  },
  {
    "text": "all of this what are the bits I'd like you to potentially leave with well I hope you realize after you've seen all of this",
    "start": "3068780",
    "end": "3075510"
  },
  {
    "text": "and all the discussion of roles and isolation yet we were supposed to be here to talk generally about",
    "start": "3075510",
    "end": "3080910"
  },
  {
    "text": "architecture for sass and we had all this discussion of identity and and the way that identity gets bound and gets",
    "start": "3080910",
    "end": "3087360"
  },
  {
    "text": "applied as we access data but that is what multi-tenancy is all about right multi tendencies like how do I get 10 a",
    "start": "3087360",
    "end": "3093510"
  },
  {
    "text": "context and how do I appropriate apply it as I access data as I implement my services and all those bits and how do I",
    "start": "3093510",
    "end": "3100200"
  },
  {
    "text": "provision an experience at the beginning of all this that supports all of that it's it's it's it's more fundamental",
    "start": "3100200",
    "end": "3108840"
  },
  {
    "text": "than a lot of people think hopefully also by looking at I am here and see",
    "start": "3108840",
    "end": "3114990"
  },
  {
    "text": "that we use policies especially in a pooled model how we use policies to control scope looked like a powerful",
    "start": "3114990",
    "end": "3120990"
  },
  {
    "text": "construct to you I personally love seeing this and love using this in my multi-tenant solutions because I feel",
    "start": "3120990",
    "end": "3128040"
  },
  {
    "text": "like no matter what a developer does no matter what somebody on the UI does when you finally get down to accessing that",
    "start": "3128040",
    "end": "3134040"
  },
  {
    "text": "resource I'm gonna have some confidence that somebody can't cross a boundary so I'm going to invest the time and energy",
    "start": "3134040",
    "end": "3140550"
  },
  {
    "text": "and building those iam policies I will say as you go service to service the way",
    "start": "3140550",
    "end": "3146580"
  },
  {
    "text": "that you partition is different and because the way you partition is different the way you build those iam",
    "start": "3146580",
    "end": "3151770"
  },
  {
    "text": "policies is also different silo versus pool is different so you have to think about that as you come up with a scheme",
    "start": "3151770",
    "end": "3158160"
  },
  {
    "text": "for building your policies just a general goal I've already beat this one",
    "start": "3158160",
    "end": "3163920"
  },
  {
    "text": "to death but hopefully it's very clear that we want to keep all these details as far away from the developers as we can we just want to write at the app",
    "start": "3163920",
    "end": "3170160"
  },
  {
    "text": "continue to write the app and we don't want to feel like hey because we're in the multi tenant universe suddenly writing an app got way harder no we want",
    "start": "3170160",
    "end": "3177210"
  },
  {
    "text": "to solve these problems solve them right but then mostly just have them be baked into our infrastructure baked into our",
    "start": "3177210",
    "end": "3182610"
  },
  {
    "text": "approach in a way that we can just charge forward and feel good about the fact that the system will support this and then we'll focus more of our energy",
    "start": "3182610",
    "end": "3189090"
  },
  {
    "text": "on scale and how we deal with multi-tenant load and things of that nature those will always be huge",
    "start": "3189090",
    "end": "3194250"
  },
  {
    "text": "operational challenges and part of another talk entirely this one we didn't",
    "start": "3194250",
    "end": "3201180"
  },
  {
    "text": "really hit on a lot but if you notice in here we had a lot of discussion of system users and like you can see all",
    "start": "3201180",
    "end": "3206550"
  },
  {
    "text": "the tenant data and then we talked about tenant users and what does it mean to be a tenant in the system and even within those there",
    "start": "3206550",
    "end": "3212760"
  },
  {
    "text": "are different flavors of those things a lot of people don't even think about a system user when they come in right like they don't think well what is it gonna",
    "start": "3212760",
    "end": "3219360"
  },
  {
    "text": "mean what how should we provision and manage the scope and access of our own people who have to touch the system that",
    "start": "3219360",
    "end": "3226860"
  },
  {
    "text": "becomes like what everything's about the tenant but these system users are more dangerous and have the more potential to",
    "start": "3226860",
    "end": "3232950"
  },
  {
    "text": "do something you don't want them to and they all should be sharing a common approach to how you're enforcing it like",
    "start": "3232950",
    "end": "3238800"
  },
  {
    "text": "just I want system users to have a whole set of iam policies that are just of their policies even though we didn't get",
    "start": "3238800",
    "end": "3249000"
  },
  {
    "text": "to hit on metering here I feel wrong not saying that these are key fundamental",
    "start": "3249000",
    "end": "3254100"
  },
  {
    "text": "concepts to to SAS and if you if you kind of make them an afterthought they",
    "start": "3254100",
    "end": "3259890"
  },
  {
    "text": "often end up being a lot less valuable than they could have been and your billing ends up being a lot less",
    "start": "3259890",
    "end": "3265320"
  },
  {
    "text": "interesting than it could have been I love to see organizations SAS organizations like struggling with what",
    "start": "3265320",
    "end": "3270930"
  },
  {
    "text": "is the right thing we should bill on how can we meet her for that how do we get better view of what tenants are doing in",
    "start": "3270930",
    "end": "3276450"
  },
  {
    "text": "our system I like that to be an early discussion and I want you to sort of put that off until the application features",
    "start": "3276450",
    "end": "3282960"
  },
  {
    "text": "are finally getting rich and then finally I want you to I want you to work",
    "start": "3282960",
    "end": "3289710"
  },
  {
    "text": "multi-tenant we had this very early diagram where we showed onboarding app services storage I don't want you to",
    "start": "3289710",
    "end": "3295650"
  },
  {
    "text": "work that in silos I mean the best solutions to me are ones where somebody says hell we're building a brand-new",
    "start": "3295650",
    "end": "3301260"
  },
  {
    "text": "solution what's your first sprint somebody logs on somebody says write a",
    "start": "3301260",
    "end": "3308220"
  },
  {
    "text": "product to the catalog somebody writes the product to the catalog and then you get the product back out and that's it",
    "start": "3308220",
    "end": "3315270"
  },
  {
    "text": "like that's a great first print do you know how many pieces of this you have to get right to make that work like all",
    "start": "3315270",
    "end": "3320430"
  },
  {
    "text": "those policies have to work can I go verify they can get to it can't get to it how do I resolve the tenant ID in the",
    "start": "3320430",
    "end": "3325590"
  },
  {
    "text": "service how did I resolve those bits I just do that as my first slice then I can start adding all the depth that's",
    "start": "3325590",
    "end": "3331890"
  },
  {
    "text": "needed there and I'm by the way DevOps isn't in this discussion I'd have that I'd make the same comment about DevOps",
    "start": "3331890",
    "end": "3336960"
  },
  {
    "text": "is along that path as well finally resources I promised a link to",
    "start": "3336960",
    "end": "3344770"
  },
  {
    "start": "3340000",
    "end": "3340000"
  },
  {
    "text": "where this is at you can see it's SAS identity in isolation with Amazon Cognito it says identity and isolation I",
    "start": "3344770",
    "end": "3350830"
  },
  {
    "text": "sometimes wonder if we rebranded it because it's truly a full reference SAS implementation with micro services but",
    "start": "3350830",
    "end": "3357070"
  },
  {
    "text": "obviously as you see here from the talk identity and isolation are a big part of that discussion there's also just a",
    "start": "3357070",
    "end": "3363190"
  },
  {
    "text": "source repo and if you want if you do nothing else you can just go down the get the get the PDF out of the repo nice",
    "start": "3363190",
    "end": "3369670"
  },
  {
    "text": "big document there to cover that and then the last one is just general SAS content there's a whole bunch of SAS",
    "start": "3369670",
    "end": "3375760"
  },
  {
    "text": "content out there if you go look at this last link and around all of these topics with a lot more depth around them for",
    "start": "3375760",
    "end": "3381730"
  },
  {
    "text": "especially for the areas we couldn't get into much detail on today and that's it",
    "start": "3381730",
    "end": "3386800"
  },
  {
    "text": "thank you so much [Applause]",
    "start": "3386800",
    "end": "3392659"
  }
]