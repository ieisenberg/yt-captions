[
  {
    "text": "says and we will be discussing today on",
    "start": "1250",
    "end": "6270"
  },
  {
    "text": "how to easily transform compliance to code using eight it was configured configure all's and the rules development kit we will be taking",
    "start": "6270",
    "end": "13290"
  },
  {
    "text": "questions all throughout the webinar so please feel free to post your questions and I will also take time to answer",
    "start": "13290",
    "end": "19740"
  },
  {
    "text": "questions at the end of the session today so please continue to keep those",
    "start": "19740",
    "end": "25199"
  },
  {
    "text": "questions coming through as businesses",
    "start": "25199",
    "end": "30840"
  },
  {
    "text": "continue to scale and grow their cloud environments there is an increasing demand for a scalable mechanism that",
    "start": "30840",
    "end": "36270"
  },
  {
    "text": "ensures cloud resources are adhering to the specific requirements imposed by their businesses secure teams internal",
    "start": "36270",
    "end": "43559"
  },
  {
    "text": "policies or their particular regulators or auditors in this session will learn",
    "start": "43559",
    "end": "49350"
  },
  {
    "text": "how to easily transform compliance to code and automate security so businesses can scale effectively and address",
    "start": "49350",
    "end": "56399"
  },
  {
    "text": "compliance requirements on AWS so today together all of us together we",
    "start": "56399",
    "end": "64260"
  },
  {
    "text": "will dive deep into a Dewar's config service and concepts including managed and custom configure all's will learn",
    "start": "64260",
    "end": "71220"
  },
  {
    "text": "about behavior driven development and how we can use it to better define secure requirements and develop config",
    "start": "71220",
    "end": "76680"
  },
  {
    "text": "rules well I will introduce the rules development kit for config roles and",
    "start": "76680",
    "end": "81990"
  },
  {
    "text": "we'll use that to build custom configure all's using the rules development kit and we'll also together discover best",
    "start": "81990",
    "end": "90390"
  },
  {
    "text": "practices on multi account setup for deploying security controls",
    "start": "90390",
    "end": "96200"
  },
  {
    "text": "so traditionally security operations or setups teams can spend a lot of time",
    "start": "96380",
    "end": "101790"
  },
  {
    "text": "manually managing systems compliance information and proving compliance as sec UPS teams are usually highly",
    "start": "101790",
    "end": "108630"
  },
  {
    "text": "specialized and small in number manually managing and proving compliance is not",
    "start": "108630",
    "end": "113880"
  },
  {
    "text": "scalable in the cloud demonstrating compliance is also traditionally an",
    "start": "113880",
    "end": "119159"
  },
  {
    "text": "annual occurrence which can be quite stressful as teams scurry around for weeks to collect screenshots and produce",
    "start": "119159",
    "end": "125219"
  },
  {
    "text": "documents to validate compliance data does this at all sound familiar well",
    "start": "125219",
    "end": "133130"
  },
  {
    "text": "continuous compliance you never have to manually manage spreadsheets or wait for the dreaded audit period you can visit",
    "start": "133130",
    "end": "139190"
  },
  {
    "text": "you can have visibility of your compliance levels all of the time continuous compliance is the capability",
    "start": "139190",
    "end": "145520"
  },
  {
    "text": "of a security operations team to transform compliance to code deliver",
    "start": "145520",
    "end": "150680"
  },
  {
    "text": "security controls consistently across a doubles accounts at scale and make it",
    "start": "150680",
    "end": "156020"
  },
  {
    "text": "part of the day-to-day and we can have complete transparency of what's running in our a SS environments and we have the",
    "start": "156020",
    "end": "163010"
  },
  {
    "text": "ability to audit and report compliance levels at any time on-demand now this can significantly free up",
    "start": "163010",
    "end": "169760"
  },
  {
    "text": "security operation teams to focus on better defining controls and adopting a dev SEC ops model to iteratively develop",
    "start": "169760",
    "end": "176840"
  },
  {
    "text": "test deploy and continuously deliver security controls so let's dive into",
    "start": "176840",
    "end": "185870"
  },
  {
    "text": "compliance is code and discuss the Edible services imperative to continuous compliance ada will serve a diverse",
    "start": "185870",
    "end": "191420"
  },
  {
    "text": "config and convict roles we'll start with a SS config so anibal's configures",
    "start": "191420",
    "end": "198050"
  },
  {
    "text": "a service that enables you to assess audit and evaluate the configurations of your a SS resources and is avail and",
    "start": "198050",
    "end": "205100"
  },
  {
    "text": "it's available in all regions convict continuously monitors and records your a",
    "start": "205100",
    "end": "210260"
  },
  {
    "text": "doubles resource configurations and allows you to automate the evaluation of recorded configurations against desired",
    "start": "210260",
    "end": "217310"
  },
  {
    "text": "configurations with config you can review changes in configurations and",
    "start": "217310",
    "end": "222530"
  },
  {
    "text": "relationships between a SS resources you can dive into detailed resource configuration histories and determine",
    "start": "222530",
    "end": "229670"
  },
  {
    "text": "your overall compliance against the configuration specified in your internal guidelines we'll jump into some of the",
    "start": "229670",
    "end": "237560"
  },
  {
    "text": "eight of us config concepts now and so firstly the ADA was config service has a",
    "start": "237560",
    "end": "243950"
  },
  {
    "text": "configuration recorder and this detects changes in your resource configurations and captures these changes as",
    "start": "243950",
    "end": "250520"
  },
  {
    "text": "configuration items if you setup the ADA bus config by using the console or the",
    "start": "250520",
    "end": "256489"
  },
  {
    "text": "ADA law CLI ADA was config automatically creates and then starts the configuration recorder for you by",
    "start": "256489",
    "end": "263360"
  },
  {
    "text": "default the configuration recorder records also resources in the region where a doubles",
    "start": "263360",
    "end": "269180"
  },
  {
    "text": "config is running you can also create a customized configuration recorder that records records are only the resource",
    "start": "269180",
    "end": "276590"
  },
  {
    "text": "types that you specify a de juez config",
    "start": "276590",
    "end": "282410"
  },
  {
    "text": "also also creates configuration items whenever it detects a change to a",
    "start": "282410",
    "end": "288200"
  },
  {
    "text": "resource type that it's recording so by definition a configuration item represents a point in time view of the",
    "start": "288200",
    "end": "295970"
  },
  {
    "text": "various attributes of the supported a Dewar's resource that exists in your account so for example if a de was",
    "start": "295970",
    "end": "302360"
  },
  {
    "text": "configured is recording Amazon s3 buckets a Dewar's config creates a configuration item whenever a bucket is",
    "start": "302360",
    "end": "309050"
  },
  {
    "text": "created updated or deleted heddles config currently supports 22 services",
    "start": "309050",
    "end": "314600"
  },
  {
    "text": "and over 60 resource types and these numbers are continually growing so keep",
    "start": "314600",
    "end": "321560"
  },
  {
    "text": "an eye out on that we'll delve into the different components of a configuration configuration item and their importance",
    "start": "321560",
    "end": "328280"
  },
  {
    "text": "a bit later in the session but for now we'll continue on as I",
    "start": "328280",
    "end": "333530"
  },
  {
    "text": "edibles config until your records the changes that occurred to a doubles resources it sends notifications and updated",
    "start": "333530",
    "end": "340940"
  },
  {
    "text": "configuration States through the a there was config delivery channel to the Amazon s3 bucket that you specified when",
    "start": "340940",
    "end": "347780"
  },
  {
    "text": "you configured your delivery channel you can change the settings of your delivery channel the settings that you can modify",
    "start": "347780",
    "end": "355000"
  },
  {
    "text": "the Amazon s3 bucket to which ADA was config sends known configuration",
    "start": "355000",
    "end": "360020"
  },
  {
    "text": "snapshots and configuration history files you can specify how often a DuBose",
    "start": "360020",
    "end": "366200"
  },
  {
    "text": "config delivers configuration snapshots to your Amazon s3 bucket and then lastly",
    "start": "366200",
    "end": "371510"
  },
  {
    "text": "the Amazon SNS topic to which odourless config sends notifications about configuration changes so all of those",
    "start": "371510",
    "end": "378440"
  },
  {
    "text": "three you can specify in your delivery channel it's actually also worth calling out that if you can have you can",
    "start": "378440",
    "end": "385850"
  },
  {
    "text": "actually only have one delivery channel per region her AWS account and",
    "start": "385850",
    "end": "391060"
  },
  {
    "text": "configuring the delivery channel is a must to use data worst config service",
    "start": "391060",
    "end": "397959"
  },
  {
    "text": "now what the delivery channel delivers to us three buckets are known as configuration snapshots a configuration",
    "start": "397959",
    "end": "405199"
  },
  {
    "text": "snapshot is a collection of configuration items for the support and resources that exist in your account and",
    "start": "405199",
    "end": "410800"
  },
  {
    "text": "these configuration snapshots it's a complete picture of the resources that",
    "start": "410800",
    "end": "416029"
  },
  {
    "text": "are being recorded and their configurations the configuration snapshot can actually be really a useful",
    "start": "416029",
    "end": "422149"
  },
  {
    "text": "tool for validating your configuration settings in your AWS account so all the",
    "start": "422149",
    "end": "427309"
  },
  {
    "text": "concepts that I've highlighted in this flow diagram allow you get to review changes in configurations and",
    "start": "427309",
    "end": "433399"
  },
  {
    "text": "relationships between a doubles resources straight out of the box you can dive into detailed resource",
    "start": "433399",
    "end": "439759"
  },
  {
    "text": "configuration histories and determine your overall compliance against the configurations specified in your",
    "start": "439759",
    "end": "445399"
  },
  {
    "text": "internal guidelines all of this significantly simplifies compliance",
    "start": "445399",
    "end": "451639"
  },
  {
    "text": "auditing security analysis change management and operational troubleshooting without you having to do",
    "start": "451639",
    "end": "459019"
  },
  {
    "text": "much at all but just enabling the ADA was config service let's discuss another",
    "start": "459019",
    "end": "466969"
  },
  {
    "text": "important feature of the ADA was config service configure awls config rules give",
    "start": "466969",
    "end": "472399"
  },
  {
    "text": "you the ability to define your compliance requirements in a SS as code giving you Software Defined continuous",
    "start": "472399",
    "end": "479149"
  },
  {
    "text": "compliance with config rules you can verify that existing and newly launched a SS Resources conform to your",
    "start": "479149",
    "end": "485779"
  },
  {
    "text": "organization's security guidelines and best practices no more wasted time manually inspecting cloud resources how",
    "start": "485779",
    "end": "493369"
  },
  {
    "text": "useful is that while a tOA's config continuously tracks the configuration changes that occur amongst your",
    "start": "493369",
    "end": "499669"
  },
  {
    "text": "resources it also continually evaluates your resources as they're created",
    "start": "499669",
    "end": "504769"
  },
  {
    "text": "changed or deleted and checks whether these changes violent and in other conditions that you've defined in one of",
    "start": "504769",
    "end": "510889"
  },
  {
    "text": "your configure all's if a resource violates a rule edibles config Flags the",
    "start": "510889",
    "end": "516258"
  },
  {
    "text": "resource a non-compliant and sends a notification via a double a simple notification service or SNS",
    "start": "516259",
    "end": "523688"
  },
  {
    "text": "animals config provides customizable predefined rules called manage rules to help get you started you can also create",
    "start": "523839",
    "end": "530779"
  },
  {
    "text": "your own custom config rules which represent your ideal configuration settings based on your specific requirements employees by",
    "start": "530779",
    "end": "537860"
  },
  {
    "text": "business internal policies or particular auditors will dive deep into designing",
    "start": "537860",
    "end": "542870"
  },
  {
    "text": "and building a custom configure rule later in this session so stay tuned",
    "start": "542870",
    "end": "548770"
  },
  {
    "text": "we'll look a bit more into the components of a configuration item which",
    "start": "548770",
    "end": "553880"
  },
  {
    "text": "if you remember is a point in time view of the various attributes of a supported and diverse resource that exist in your",
    "start": "553880",
    "end": "560180"
  },
  {
    "text": "account the five components of a configuration item include metadata",
    "start": "560180",
    "end": "566860"
  },
  {
    "text": "which is information about this configuration item such as and the time when the resource item was captured",
    "start": "566860",
    "end": "574000"
  },
  {
    "text": "secondly the attributes of the resource such as resource IDs and tags any",
    "start": "574000",
    "end": "580360"
  },
  {
    "text": "relationships which can describe how the resources related to other resources associated with the account any related",
    "start": "580360",
    "end": "588890"
  },
  {
    "text": "events and lastly the current configurations which is the information",
    "start": "588890",
    "end": "595790"
  },
  {
    "text": "that's returned through a call such as describe or list api of the resource so",
    "start": "595790",
    "end": "602090"
  },
  {
    "text": "the current configurations of a specific resource and thing to note is that it's all in JSON so if you're interested in a",
    "start": "602090",
    "end": "608930"
  },
  {
    "text": "specific part of the configuration you can extract that out so for example if you want to know the tag for this",
    "start": "608930",
    "end": "615800"
  },
  {
    "text": "specific volume you'd be able to extract the tag section of the configuration in",
    "start": "615800",
    "end": "621830"
  },
  {
    "text": "the configuration item cool so now that",
    "start": "621830",
    "end": "627890"
  },
  {
    "text": "we know indeed how what configuration items are let's dive into how custom configure walls work as I mentioned",
    "start": "627890",
    "end": "634070"
  },
  {
    "text": "earlier custom configure walls are rules you develop to represent your ideal configuration settings in your AWS",
    "start": "634070",
    "end": "640040"
  },
  {
    "text": "account you associate each custom rule with an a double slam to function if",
    "start": "640040",
    "end": "646100"
  },
  {
    "text": "you're not familiar with a double slams our edibles lambda lets you run code without provisioning or managing servers",
    "start": "646100",
    "end": "651620"
  },
  {
    "text": "you pay only for the compute time that you consume so there's no charge for",
    "start": "651620",
    "end": "656720"
  },
  {
    "text": "when your code is not running the code you run on a SS lambda is called a lambda function for our case our config",
    "start": "656720",
    "end": "665190"
  },
  {
    "text": "the function will contain the logic that evaluates whether you're a diverse resources can play with the rule each",
    "start": "665190",
    "end": "674130"
  },
  {
    "text": "rule when triggered calls a lambda function there can only be one lambda function per custom rule when the",
    "start": "674130",
    "end": "681270"
  },
  {
    "text": "trigger for a rule occurs a SS config invokes the rules a Dewar's lambda function by publishing an event this",
    "start": "681270",
    "end": "689520"
  },
  {
    "text": "invoking event contains information such as configuration item information and any rule parameters then a double slam",
    "start": "689520",
    "end": "697830"
  },
  {
    "text": "to execute the function by passing the event to the functions handler the",
    "start": "697830",
    "end": "704580"
  },
  {
    "text": "lambda function has a logic you codified to verify a configuration verify the",
    "start": "704580",
    "end": "709680"
  },
  {
    "text": "configuration comply with the expectation so in this logic you can also read any additional metadata of the",
    "start": "709680",
    "end": "716370"
  },
  {
    "text": "configuration item that you need so such as a describe call and then once the",
    "start": "716370",
    "end": "723870"
  },
  {
    "text": "lambda processes this logic and derives the compliance result it returns this result back to the ada bus config",
    "start": "723870",
    "end": "730290"
  },
  {
    "text": "servers via the put evaluations API call which is then displayed on the ADA bus confit console for the resource being",
    "start": "730290",
    "end": "736770"
  },
  {
    "text": "evaluators compliant or non-compliant so this in essence is how the it was config",
    "start": "736770",
    "end": "743130"
  },
  {
    "text": "service and the custom configure all's work one other thing to note is that the",
    "start": "743130",
    "end": "753120"
  },
  {
    "text": "trigger for a custom configure rule can actually be of two kinds configuration",
    "start": "753120",
    "end": "758610"
  },
  {
    "text": "change or a periodic trigger this is essentially the trigger that kicks off",
    "start": "758610",
    "end": "764880"
  },
  {
    "text": "the evaluation process for your custom configure all with configuration change",
    "start": "764880",
    "end": "769980"
  },
  {
    "text": "triggers a doubles config runs evaluations for the rule when certain types of resources a created changed or",
    "start": "769980",
    "end": "775589"
  },
  {
    "text": "deleted with periodic triggers an ableist config runs evaluations for the rule at a frequency that you choose for",
    "start": "775589",
    "end": "782730"
  },
  {
    "text": "example every 24 hours you can choose to have a rule triggering for configuration",
    "start": "782730",
    "end": "787770"
  },
  {
    "text": "changes and periodically if you do choose both a doubles config invokes",
    "start": "787770",
    "end": "793260"
  },
  {
    "text": "your lambda function when it detects a configuration change and also at the frequency that you specify",
    "start": "793260",
    "end": "798780"
  },
  {
    "text": "as I mentioned earlier when the trigger for a rule occurs a doubles config",
    "start": "798780",
    "end": "805080"
  },
  {
    "text": "invokes the rules a double slam to function by publishing an event this",
    "start": "805080",
    "end": "810240"
  },
  {
    "text": "invoking event is what you see here it contains information such as configuration item information and any",
    "start": "810240",
    "end": "817440"
  },
  {
    "text": "rule parameters the n/a level is lambda execute the function by passing the",
    "start": "817440",
    "end": "822840"
  },
  {
    "text": "event to the functions handler the main difference between configuration change",
    "start": "822840",
    "end": "828660"
  },
  {
    "text": "trigger and periodic trigger is the change trigger invoking event is that in",
    "start": "828660",
    "end": "833760"
  },
  {
    "text": "the change trigger in working event the configuration item information will be present but in the periodic time-based",
    "start": "833760",
    "end": "840810"
  },
  {
    "text": "triggers there is actually no configuration item information in the invoking event and this is quite",
    "start": "840810",
    "end": "845940"
  },
  {
    "text": "important when we start to build our own custom configure rules and we'll delve into that later in this session Before",
    "start": "845940",
    "end": "854100"
  },
  {
    "text": "we jump into designing and building configure walls it's best to give a bit of guidance on which trigger types",
    "start": "854100",
    "end": "860130"
  },
  {
    "text": "choose for your custom configure all if a doubles config is tracking the",
    "start": "860130",
    "end": "865290"
  },
  {
    "text": "resource it's best and easiest to choose the configuration change trigger if you",
    "start": "865290",
    "end": "870390"
  },
  {
    "text": "recall a SS config supports 22 services however a SS actually has a lot more",
    "start": "870390",
    "end": "876960"
  },
  {
    "text": "than 22 services yeah so for those services that a doubles config doesn't",
    "start": "876960",
    "end": "882450"
  },
  {
    "text": "support you can use a Pyrrhic trigger in some use cases you may want to use both",
    "start": "882450",
    "end": "889830"
  },
  {
    "text": "periodic trigger and a change trigger you can use both triggers but just note",
    "start": "889830",
    "end": "896670"
  },
  {
    "text": "that this will make your rule logic quite complex so it's usually to keep it",
    "start": "896670",
    "end": "903240"
  },
  {
    "text": "simple it's best to stick with either the configuration changed trigger or the periodic trigger so let's dive into best",
    "start": "903240",
    "end": "912300"
  },
  {
    "text": "practices on how to design a configure all so first we'll start by designing a configure all and then we'll dive right",
    "start": "912300",
    "end": "917760"
  },
  {
    "text": "into building our own custom configure all so security teams and businesses can",
    "start": "917760",
    "end": "925140"
  },
  {
    "text": "define their compliance and secure requirements as technical scenarios in a gherkin like documentation now this is",
    "start": "925140",
    "end": "931620"
  },
  {
    "text": "very handy because it this can form a standardized descriptive mechanism for compliance",
    "start": "931620",
    "end": "938080"
  },
  {
    "text": "rules that are human readable and behavior driven using gherkin like documentation different security teams",
    "start": "938080",
    "end": "944680"
  },
  {
    "text": "can have a common platform to define the security requirements without having to",
    "start": "944680",
    "end": "949959"
  },
  {
    "text": "look at the developed code for the logic at all however developers can actually use the",
    "start": "949959",
    "end": "954970"
  },
  {
    "text": "same document to develop associated test cases this can form the basis of",
    "start": "954970",
    "end": "960250"
  },
  {
    "text": "behavior and test-driven security which is imperative in a modern day security",
    "start": "960250",
    "end": "966310"
  },
  {
    "text": "operations team gherkin documentation is usually have a feature statement to",
    "start": "966310",
    "end": "971320"
  },
  {
    "text": "define the user story for the configure all followed by scenarios and outline every permutation that needs to be",
    "start": "971320",
    "end": "977260"
  },
  {
    "text": "tested given any preconditions and outlining an outcome each of the scenarios can then form a specific test",
    "start": "977260",
    "end": "983830"
  },
  {
    "text": "case let's go through some basis of",
    "start": "983830",
    "end": "989470"
  },
  {
    "text": "writing test cases when writing test cases from each of the gherkin scenarios it's best to follow these guidelines aim",
    "start": "989470",
    "end": "997540"
  },
  {
    "text": "to cover all permutations of inputs neo canario is an Associated test cases you will have educators and it may be a bit",
    "start": "997540",
    "end": "1005130"
  },
  {
    "text": "of an overkill to cover all of the edge cases but for those ones just make comments on the edge cases and why each",
    "start": "1005130",
    "end": "1012089"
  },
  {
    "text": "of those weren't covered secondly keep testing coverage on the test cases",
    "start": "1012089",
    "end": "1018350"
  },
  {
    "text": "thirdly knowing that if you find bugs humans will need to fix it well at least initially anyway so",
    "start": "1018350",
    "end": "1025230"
  },
  {
    "text": "comment wherever needed to make it human readable and lastly use a reasoning",
    "start": "1025230",
    "end": "1030780"
  },
  {
    "text": "approach wherever you can okay let's put everything we've learned into",
    "start": "1030780",
    "end": "1036120"
  },
  {
    "text": "practice using a common example that many of us using a SS would come across ensuring that every I am user in ER a SS",
    "start": "1036120",
    "end": "1043438"
  },
  {
    "text": "account has multi-factor authentication enabled now how do we break that down",
    "start": "1043439",
    "end": "1050130"
  },
  {
    "text": "into a gherkin lag document firstly we have a feature that outlines the user story to enforce strong authentication",
    "start": "1050130",
    "end": "1058020"
  },
  {
    "text": "as a security officer I want to ensure that all I am users have mfa except",
    "start": "1058020",
    "end": "1063240"
  },
  {
    "text": "those users that are whitelisted that is any users that we put into the parameter will be in a whitelist because",
    "start": "1063240",
    "end": "1070970"
  },
  {
    "text": "no MFA is required for those I am users and then here we have defined five",
    "start": "1070970",
    "end": "1077510"
  },
  {
    "text": "scenarios and this may not cover every single Sarah but this essentially is an",
    "start": "1077510",
    "end": "1083179"
  },
  {
    "text": "example to form the foundation on the basis of the Gherkin lag documentation that will drive the test cases first one",
    "start": "1083179",
    "end": "1092890"
  },
  {
    "text": "if the whitelist parameter list is configured and I am user AG under",
    "start": "1092890",
    "end": "1098210"
  },
  {
    "text": "evaluation is in the whitelist to use list then the evaluation is compliant as Noah phase required so if you notice the",
    "start": "1098210",
    "end": "1105500"
  },
  {
    "text": "first few handle the situation where there is a white listed user list",
    "start": "1105500",
    "end": "1111169"
  },
  {
    "text": "parameter configured second scenario if the white listed parameter list is",
    "start": "1111169",
    "end": "1117350"
  },
  {
    "text": "configured and the I am user ID under evaluation is not in the white list it useless but the user does have an MFA",
    "start": "1117350",
    "end": "1123530"
  },
  {
    "text": "attached then the evaluation is compliant as the user has an MFA the",
    "start": "1123530",
    "end": "1131570"
  },
  {
    "text": "third one if the white listed parameter list is configured and the I am user ad under evaluation is not in the white",
    "start": "1131570",
    "end": "1137870"
  },
  {
    "text": "listed user list and the user doesn't have an MFA attached then the evaluation will return on compliant as the user has",
    "start": "1137870",
    "end": "1144919"
  },
  {
    "text": "no MFA the last true scenario is handle the situations where there is no",
    "start": "1144919",
    "end": "1150380"
  },
  {
    "text": "whitelist configured so if the whitelist parameter is not configured with this is",
    "start": "1150380",
    "end": "1156290"
  },
  {
    "text": "number four but the user does have an MFA attached then the evaluation is compliant as the user has an MFA and",
    "start": "1156290",
    "end": "1163210"
  },
  {
    "text": "lastly if the whitelist parameter list is not configured and the user does not",
    "start": "1163210",
    "end": "1168290"
  },
  {
    "text": "have an MFA attached then the evaluation is non compliant as the user has no MFA",
    "start": "1168290",
    "end": "1174790"
  },
  {
    "text": "right now that we have the Gherkin likes Narrows defined let's dive into the code",
    "start": "1174790",
    "end": "1181040"
  },
  {
    "text": "and start to build our custom configure all but before we",
    "start": "1181040",
    "end": "1186890"
  },
  {
    "text": "decoding and blacked introduce you to the rules development kit or idk idk is an open-source software developed by an",
    "start": "1186890",
    "end": "1193730"
  },
  {
    "text": "analyst kind of architect and you can find it on github it is the fastest way to get started writing kind of custom",
    "start": "1193730",
    "end": "1200420"
  },
  {
    "text": "configure walls and the easiest way to develop test and collaborate on rules going forward it's a CLI and that wraps a SS as API is",
    "start": "1200420",
    "end": "1208700"
  },
  {
    "text": "in an easy-to-use high-level command it uses Bosher and boto is the AWS sdk for",
    "start": "1208700",
    "end": "1218420"
  },
  {
    "text": "python which allows paths and developers to write software that make it quite easy to use services such as s3 and ec2",
    "start": "1218420",
    "end": "1227180"
  },
  {
    "text": "in the applications that you write Berto also provides an easy-to-use object-oriented API as well as low-level",
    "start": "1227180",
    "end": "1234650"
  },
  {
    "text": "direct service access so the rek uses this and the Arika also provides a",
    "start": "1234650",
    "end": "1241160"
  },
  {
    "text": "certain level of fault tolerance and staff holding without being too opinionated on how to write rules what",
    "start": "1241160",
    "end": "1246620"
  },
  {
    "text": "rules to write and how to structure accounts networks or security framework but the biggest benefit that the ionic",
    "start": "1246620",
    "end": "1253430"
  },
  {
    "text": "head provides is an actual developer centric workflow and support to note is",
    "start": "1253430",
    "end": "1259760"
  },
  {
    "text": "that the rules development kit is in version 2 so it's an open beta to please feel free to start testing it out start",
    "start": "1259760",
    "end": "1265640"
  },
  {
    "text": "collaborating on that and please feel free to give us feedback on it as well",
    "start": "1265640",
    "end": "1271510"
  },
  {
    "text": "as I just mentioned that I think a promotes a natural development workflow so as you can see here as soon as you",
    "start": "1271510",
    "end": "1278480"
  },
  {
    "text": "set up the developer environment you can use the rek to iteratively write the tests from the go can like scenarios",
    "start": "1278480",
    "end": "1284870"
  },
  {
    "text": "that we just saw write the code do unit testing using the rek deploy in a test account using the",
    "start": "1284870",
    "end": "1291890"
  },
  {
    "text": "RDK debug and continue changing and iterating on the code all of this can be",
    "start": "1291890",
    "end": "1297950"
  },
  {
    "text": "done using the rek making your configurable development a seamless workflow",
    "start": "1297950",
    "end": "1303700"
  },
  {
    "text": "naturally today we will be using the idk to build our configure wall but before we start coding it's a good idea to make",
    "start": "1305170",
    "end": "1311830"
  },
  {
    "text": "some decisions on the goal we wish to achieve this guy Ben trigger and any parameters we wish to highlight and",
    "start": "1311830",
    "end": "1320080"
  },
  {
    "text": "which resource types we want to report evaluations on this is good practice to",
    "start": "1320080",
    "end": "1326010"
  },
  {
    "text": "get all of these things down before you start coding and it's worth noting that new",
    "start": "1326010",
    "end": "1332110"
  },
  {
    "text": "evaluation results can actually be of three types non compliant compliant or not applicable for our purposes on our",
    "start": "1332110",
    "end": "1341680"
  },
  {
    "text": "example of MFA on I am user we've already defined our goals in the Gherkin like documentation in the user story",
    "start": "1341680",
    "end": "1348130"
  },
  {
    "text": "section if you remain the feature section and the rest we've actually",
    "start": "1348130",
    "end": "1353410"
  },
  {
    "text": "identified here so we are using a change trigger on a divorce I am user resource",
    "start": "1353410",
    "end": "1358720"
  },
  {
    "text": "type will have an optional parameter whitelist and user list and evaluations",
    "start": "1358720",
    "end": "1365530"
  },
  {
    "text": "will be done on a SS I am user perfect so let's begin coding so I've got my",
    "start": "1365530",
    "end": "1376330"
  },
  {
    "text": "terminal window open here to access our TK CLA I'm just going to show you how to use the allocate begin with so to",
    "start": "1376330",
    "end": "1383050"
  },
  {
    "text": "initialize our decal run our DK knit as you can see a few things happen it checks the configuration recorder which",
    "start": "1383050",
    "end": "1389110"
  },
  {
    "text": "one to use that I am role to use for the config service whether the service is on",
    "start": "1389110",
    "end": "1395260"
  },
  {
    "text": "etc I'm going to create our rule here so typing the our DK create followed by the",
    "start": "1395260",
    "end": "1400570"
  },
  {
    "text": "rule name as well as the resource types to use and you can see here it's created",
    "start": "1400570",
    "end": "1406000"
  },
  {
    "text": "three files at s dot pi file of PI file and a parameters JSON file the",
    "start": "1406000",
    "end": "1412150"
  },
  {
    "text": "prime-minister JSON file has all the foundational info that we've defined earlier as resource types and the",
    "start": "1412150",
    "end": "1417880"
  },
  {
    "text": "parameter to list the rule or your rule our rule today we'll go into the dot PI",
    "start": "1417880",
    "end": "1423520"
  },
  {
    "text": "file you can see that you're using boto 3 the PI file actually leaves the space",
    "start": "1423520",
    "end": "1430660"
  },
  {
    "text": "where your rule logic will go in the commented out section and then handles all of the undifferentiated heavy",
    "start": "1430660",
    "end": "1437380"
  },
  {
    "text": "lifting such as extracting conflict service",
    "start": "1437380",
    "end": "1443750"
  },
  {
    "text": "events building body of the evaluation and converting API configurations and",
    "start": "1443750",
    "end": "1459550"
  },
  {
    "text": "then most importantly I'll just scroll down here a little bit so you can see",
    "start": "1459550",
    "end": "1467980"
  },
  {
    "text": "putting the evaluations results and the results token back to theta worst config",
    "start": "1470380",
    "end": "1477260"
  },
  {
    "text": "service so all of this is just handled as the scaffolding the last file is the",
    "start": "1477260",
    "end": "1484730"
  },
  {
    "text": "test dot PI file which uses the unit test not testing library for python as you can see it has examples of how to",
    "start": "1484730",
    "end": "1491690"
  },
  {
    "text": "form test cases as well as scaffolding for building dummy invoking events for",
    "start": "1491690",
    "end": "1498110"
  },
  {
    "text": "both change configuration and periodic triggers the last thing to note so I'll",
    "start": "1498110",
    "end": "1507080"
  },
  {
    "text": "get out of this and one thing I'll show you is that you can actually get sample",
    "start": "1507080",
    "end": "1513860"
  },
  {
    "text": "configuration item data from the idk by typing idk sample CI so for our case or",
    "start": "1513860",
    "end": "1520370"
  },
  {
    "text": "type in iOS I am user and you can see here that it has the configuration item",
    "start": "1520370",
    "end": "1528020"
  },
  {
    "text": "information such as a mock user ID and",
    "start": "1528020",
    "end": "1534820"
  },
  {
    "text": "any policies that it has on the IIM user so you can actually use this to create",
    "start": "1534820",
    "end": "1543700"
  },
  {
    "text": "test cases mock test cases for your unit testing so let's dive into writing test",
    "start": "1543700",
    "end": "1551750"
  },
  {
    "text": "cases and this is where test-driven security comes in so we'll start off by deriving unit tests from the Gherkin",
    "start": "1551750",
    "end": "1558350"
  },
  {
    "text": "scenarios that we've developed and then once we have our testing developed we'll",
    "start": "1558350",
    "end": "1563810"
  },
  {
    "text": "go into writing the code as I mentioned earlier that idk uses",
    "start": "1563810",
    "end": "1570250"
  },
  {
    "text": "unit test Mach unit testing which is a library for testing in Python it allows",
    "start": "1570250",
    "end": "1577300"
  },
  {
    "text": "you to replace parts of your system under tests can under test with mock objects and make assertions about how",
    "start": "1577300",
    "end": "1584110"
  },
  {
    "text": "they have been used unit turns don't mock provides a core mock class removing the need to create a host of stubs",
    "start": "1584110",
    "end": "1590470"
  },
  {
    "text": "throughout your test suite after performing an action you can actually make assertions about which methods and",
    "start": "1590470",
    "end": "1595840"
  },
  {
    "text": "attributes were used and arguments that are called with you can also specify return values and set needed attributes",
    "start": "1595840",
    "end": "1602980"
  },
  {
    "text": "in the normal way that you would additionally mob actually provides a patch decorator that handles patching",
    "start": "1602980",
    "end": "1609340"
  },
  {
    "text": "module and class level attributes within the scope of a test along with central for creating unique objects so this is",
    "start": "1609340",
    "end": "1618040"
  },
  {
    "text": "essentially the mock testing file that that will go through here so first is",
    "start": "1618040",
    "end": "1625120"
  },
  {
    "text": "creating a mock fur that I am I am client for AWS the couple of things to",
    "start": "1625120",
    "end": "1631630"
  },
  {
    "text": "highlight here is that we do have to call out the message type whether it's a",
    "start": "1631630",
    "end": "1636820"
  },
  {
    "text": "configuration item change notification or it's a scheduled scheduled",
    "start": "1636820",
    "end": "1643390"
  },
  {
    "text": "notification so based on a configuration item change trigger or a periodic trigger for our purposes it's a",
    "start": "1643390",
    "end": "1649750"
  },
  {
    "text": "configuration item change a notification and then if you can see here we've been",
    "start": "1649750",
    "end": "1656460"
  },
  {
    "text": "we've built out essentially the in then the invoking event the configuration item so putting in the information and",
    "start": "1656460",
    "end": "1664030"
  },
  {
    "text": "that you can use from the sample CDI that I've shown you earlier and then we",
    "start": "1664030",
    "end": "1670090"
  },
  {
    "text": "go into building out each of the test cases based on the Gherkin like scenarios so the first one that I've",
    "start": "1670090",
    "end": "1677230"
  },
  {
    "text": "highlighted here is essentially building out the first and the class of the first",
    "start": "1677230",
    "end": "1685090"
  },
  {
    "text": "test and you can go through this in your own time but essentially I just wanted",
    "start": "1685090",
    "end": "1692710"
  },
  {
    "text": "to call out that each of these scenarios the test cases have been based on the scenarios and that we've built on the",
    "start": "1692710",
    "end": "1699970"
  },
  {
    "text": "Gherkin the thing to highlight is that we do you have to construct the MFA device",
    "start": "1699970",
    "end": "1705380"
  },
  {
    "text": "in our mock unit testing because none of this information will be coming through in the mock test so we'll have to",
    "start": "1705380",
    "end": "1712570"
  },
  {
    "text": "essentially mock all of these out and then here we have the last two scenarios",
    "start": "1712570",
    "end": "1719570"
  },
  {
    "text": "as well where there was no parameter whitelist and essentially it handles the",
    "start": "1719570",
    "end": "1727100"
  },
  {
    "text": "compliance or non-compliance results within the test cases so please feel",
    "start": "1727100",
    "end": "1732440"
  },
  {
    "text": "free to go through this in your own time and the slides will actually be provided",
    "start": "1732440",
    "end": "1737590"
  },
  {
    "text": "after this session so now that we have our rules our test cases defined we are",
    "start": "1737590",
    "end": "1744950"
  },
  {
    "text": "going to jump straight into writing the rule so writing the rule for this is actually quite simple and if you",
    "start": "1744950",
    "end": "1752210"
  },
  {
    "text": "remember we will be writing the rule in the logic section of the PI file in our",
    "start": "1752210",
    "end": "1760040"
  },
  {
    "text": "in in each of the three files that we got from the RTK essentially all I'm",
    "start": "1760040",
    "end": "1766070"
  },
  {
    "text": "doing here is I'm actually getting the resource information from the configuration item which would come",
    "start": "1766070",
    "end": "1771140"
  },
  {
    "text": "through in the invoking event for for this rule and I'm just calling it out",
    "start": "1771140",
    "end": "1777620"
  },
  {
    "text": "here that if a whitelisted user list is there in the valid rule parameters and",
    "start": "1777620",
    "end": "1782810"
  },
  {
    "text": "we've defined valid rule parameters further down if the whitelisted user",
    "start": "1782810",
    "end": "1788870"
  },
  {
    "text": "list is there then essentially we go through the whitelisted user list and they will just be handled as compliant",
    "start": "1788870",
    "end": "1796900"
  },
  {
    "text": "and then if we go further down if an MFA",
    "start": "1796900",
    "end": "1802160"
  },
  {
    "text": "device has been detected and the whitelist the user ID is not in the",
    "start": "1802160",
    "end": "1808730"
  },
  {
    "text": "whitelisted user list so I'll continue to let me just go back a little bit then",
    "start": "1808730",
    "end": "1816200"
  },
  {
    "text": "you can see it's actually non-compliant okay so if they're not in the whitelist I'd use a list and they have no MFA",
    "start": "1816200",
    "end": "1824330"
  },
  {
    "text": "present as defined here then they're not compliant if they have an MFA device present as you can see here then it is",
    "start": "1824330",
    "end": "1830660"
  },
  {
    "text": "compliant and the next section essentially is validating the parameter so all we're",
    "start": "1830660",
    "end": "1839210"
  },
  {
    "text": "just checking here is if you notice AWS user IDs all actually start with a ID a",
    "start": "1839210",
    "end": "1845120"
  },
  {
    "text": "so we have just called it out if it doesn't start with a idea then we're gonna raise a wraith sanera and if the",
    "start": "1845120",
    "end": "1853279"
  },
  {
    "text": "user IDs is actually in not alphanumeric then we're gonna raise another essentially that's us validating our",
    "start": "1853279",
    "end": "1860029"
  },
  {
    "text": "private ah perfect so that's essentially building the body of the test and the",
    "start": "1860029",
    "end": "1865190"
  },
  {
    "text": "rule please feel free to go through this at your own time but why don't we go ahead and actually deploy our config",
    "start": "1865190",
    "end": "1873860"
  },
  {
    "text": "rules so as you can see here I'm on the config rules dashboard this account is",
    "start": "1873860",
    "end": "1879200"
  },
  {
    "text": "not doing so well because there are lots of non-compliant resources essentially this is the config rules landing page on",
    "start": "1879200",
    "end": "1888350"
  },
  {
    "text": "the AWS console so I'm going to go ahead now and use the idk to locally run my",
    "start": "1888350",
    "end": "1899330"
  },
  {
    "text": "unit tests so idk test local and the",
    "start": "1899330",
    "end": "1905179"
  },
  {
    "text": "name of my rule and essentially thankfully all the test cases passed",
    "start": "1905179",
    "end": "1910250"
  },
  {
    "text": "with no errors or failures so that's very good I am going to now deploy so",
    "start": "1910250",
    "end": "1915740"
  },
  {
    "text": "that are using that okay I can also deploy my config rule and as you can see",
    "start": "1915740",
    "end": "1921799"
  },
  {
    "text": "here it's actually using CloudFormation in the backend to deploy in my test",
    "start": "1921799",
    "end": "1927289"
  },
  {
    "text": "environment so I'm just gonna wait here too for my confirmation operation to",
    "start": "1927289",
    "end": "1934100"
  },
  {
    "text": "finish but if I do go into my cloud formation console I can see that it's actually in progress it's created a",
    "start": "1934100",
    "end": "1941840"
  },
  {
    "text": "config rule it's created the lambda it's created the lambda role so it's actually the idk is handling a lot of",
    "start": "1941840",
    "end": "1948889"
  },
  {
    "text": "foundational resource creations for your config rule as well so let's just see",
    "start": "1948889",
    "end": "1957910"
  },
  {
    "text": "what the evaluation result is my role I",
    "start": "1957910",
    "end": "1963370"
  },
  {
    "text": "can see that it's picked up a lot of the I am uses in my account this specific one is actually also non-compliant test",
    "start": "1963370",
    "end": "1972310"
  },
  {
    "text": "user with no I'm afraid if I zip detected so I'm actually going to be picking up this user and finding out",
    "start": "1972310",
    "end": "1978940"
  },
  {
    "text": "this uses user ID and maybe we can put it in the parameter list and we'll",
    "start": "1978940",
    "end": "1985150"
  },
  {
    "text": "exclude it essentially from our evaluation but for by it being in the exception list so let me just do a a",
    "start": "1985150",
    "end": "1995370"
  },
  {
    "text": "double-a CLI command and list the users in my account and I can see the test you",
    "start": "1995370",
    "end": "2003960"
  },
  {
    "text": "see here and this is the user ID so I'm going to take this user ID for this user",
    "start": "2003960",
    "end": "2011450"
  },
  {
    "text": "I'm just going to modify the configure all and put this user ID in the",
    "start": "2011450",
    "end": "2022380"
  },
  {
    "text": "parameter whitelist let's find our rule again and we'll actually reevaluate the",
    "start": "2022380",
    "end": "2033030"
  },
  {
    "text": "configure all so if in the config rule console you can actually go down and",
    "start": "2033030",
    "end": "2038790"
  },
  {
    "text": "click reevaluate which will essentially trigger your rule to reevaluate so if",
    "start": "2038790",
    "end": "2044310"
  },
  {
    "text": "you're impatient like me you'll continue to refresh if we refresh again so we can",
    "start": "2044310",
    "end": "2056639"
  },
  {
    "text": "see now the test user is actually compliant even though there is no faith for this user this user is actually",
    "start": "2056640",
    "end": "2062850"
  },
  {
    "text": "whitelisted perfect so we've gone",
    "start": "2062850",
    "end": "2068310"
  },
  {
    "text": "through the scenario of unit testing and deploying our custom configure all now",
    "start": "2068310",
    "end": "2075690"
  },
  {
    "text": "let's actually come to the scenario of how to handle deploying across multiple",
    "start": "2075690",
    "end": "2081990"
  },
  {
    "text": "accounts now most of us in our organization don't just use the one account we have multiple accounts such",
    "start": "2081990",
    "end": "2088320"
  },
  {
    "text": "as security accounts shared services accounts and obviously Sakura needs to span",
    "start": "2088320",
    "end": "2094128"
  },
  {
    "text": "across all of the different accounts in our environment so what's the best setup",
    "start": "2094129",
    "end": "2099800"
  },
  {
    "text": "for multi account deployments the best",
    "start": "2099800",
    "end": "2105050"
  },
  {
    "text": "thing to note is actually segregated accounts for security operations and security operations applications as you",
    "start": "2105050",
    "end": "2112369"
  },
  {
    "text": "can see here I've got a separate account known as the security operations publisher account or essentially the",
    "start": "2112369",
    "end": "2118970"
  },
  {
    "text": "essential security operation account and this account is where all of my config",
    "start": "2118970",
    "end": "2124790"
  },
  {
    "text": "rule lambdas are housed right this the isolation of the configure all lambdas",
    "start": "2124790",
    "end": "2131900"
  },
  {
    "text": "ensures that we have a tamper-proof environment where only security operations teams have the necessary",
    "start": "2131900",
    "end": "2137900"
  },
  {
    "text": "access to deploy or make changes on the",
    "start": "2137900",
    "end": "2142970"
  },
  {
    "text": "code for the configure all one thing to know and is that there is only one",
    "start": "2142970",
    "end": "2149180"
  },
  {
    "text": "lambda function per configure oh yeah okay and as you can see there are sort",
    "start": "2149180",
    "end": "2155930"
  },
  {
    "text": "of application accounts and in those application accounts we have the config",
    "start": "2155930",
    "end": "2161060"
  },
  {
    "text": "rules for which are associated to each of those lambda functions so essentially",
    "start": "2161060",
    "end": "2167030"
  },
  {
    "text": "I've decoupled my configure all's and my lambda functions of put my lambda functions in a tamper-proof security",
    "start": "2167030",
    "end": "2173720"
  },
  {
    "text": "operations account and all the config rules as you saw previously in the",
    "start": "2173720",
    "end": "2178880"
  },
  {
    "text": "config rule console are essentially sitting and each of the individual application accounts the lambda config",
    "start": "2178880",
    "end": "2190609"
  },
  {
    "text": "rule all the configure all lambdas essentially have a lambda role and in",
    "start": "2190609",
    "end": "2197780"
  },
  {
    "text": "the application accounts within the application accounts the Animus config service has its analyst config service",
    "start": "2197780",
    "end": "2203839"
  },
  {
    "text": "role there is only one lambda I am role this is the role for all the lambda",
    "start": "2203839",
    "end": "2210200"
  },
  {
    "text": "functions in the security operations account as I've mentioned earlier now these are the iam roles that will",
    "start": "2210200",
    "end": "2215420"
  },
  {
    "text": "require to have the appropriate permissions to allow for cross account slammed invitations so let's run through",
    "start": "2215420",
    "end": "2223940"
  },
  {
    "text": "an example of the mechanics if config rule X is triggered the config service invokes the",
    "start": "2223940",
    "end": "2233840"
  },
  {
    "text": "rules associated lambda function from the security operations publisher account via lambda permissions the",
    "start": "2233840",
    "end": "2240440"
  },
  {
    "text": "lambda I am role from the publisher account assumes the config service role in the application account to access a",
    "start": "2240440",
    "end": "2246800"
  },
  {
    "text": "SS resources in the account and runs the evaluation logic in the lambda function",
    "start": "2246800",
    "end": "2252680"
  },
  {
    "text": "for the config rule the lambda role then",
    "start": "2252680",
    "end": "2258380"
  },
  {
    "text": "puts the evaluation results back to the a SS config service let's have a look to",
    "start": "2258380",
    "end": "2267170"
  },
  {
    "text": "see what the permissions need to be for the a diverse config service role which",
    "start": "2267170",
    "end": "2272450"
  },
  {
    "text": "the lambda role will assume so permissions actually include lists and",
    "start": "2272450",
    "end": "2278869"
  },
  {
    "text": "describe resources along with s3 put objects so it can actually pull evaluation information back into s3",
    "start": "2278869",
    "end": "2285560"
  },
  {
    "text": "bucket that you specify s NS public so you can actually notify you when evaluation results changed config pool",
    "start": "2285560",
    "end": "2293150"
  },
  {
    "text": "again to put the evaluations back to the config service config at config list and config describe essentially this is a",
    "start": "2293150",
    "end": "2301190"
  },
  {
    "text": "very long version of means to look like to allow",
    "start": "2301190",
    "end": "2308529"
  },
  {
    "text": "for across the counter all assumption and cross account deployments first",
    "start": "2308529",
    "end": "2313599"
  },
  {
    "text": "scale configure all deployed across multiple accounts CloudFormation stacks you",
    "start": "2313599",
    "end": "2320400"
  },
  {
    "text": "is ax to the one mA account to multiple accounts in you",
    "start": "2322490",
    "end": "2329020"
  },
  {
    "text": "you",
    "start": "2333710",
    "end": "2335770"
  }
]