[
  {
    "text": "hello everyone my name is sarah bhutyani",
    "start": "880",
    "end": "2800"
  },
  {
    "text": "and i'm a senior analytics specialist",
    "start": "2800",
    "end": "4720"
  },
  {
    "text": "solutions architect at aws",
    "start": "4720",
    "end": "6960"
  },
  {
    "text": "today we will learn about athena user",
    "start": "6960",
    "end": "8639"
  },
  {
    "text": "defined functions which are in preview",
    "start": "8639",
    "end": "10639"
  },
  {
    "text": "and see a demo of configuring and",
    "start": "10639",
    "end": "13280"
  },
  {
    "text": "running udfs",
    "start": "13280",
    "end": "14639"
  },
  {
    "text": "we will create a redact udf and use that",
    "start": "14639",
    "end": "17119"
  },
  {
    "text": "in athena queries to mask sensitive",
    "start": "17119",
    "end": "18960"
  },
  {
    "text": "information",
    "start": "18960",
    "end": "21519"
  },
  {
    "text": "so let's look at some of the challenges",
    "start": "24960",
    "end": "26560"
  },
  {
    "text": "without udfs without the support for uds",
    "start": "26560",
    "end": "28880"
  },
  {
    "text": "till now it was difficult to pre",
    "start": "28880",
    "end": "30640"
  },
  {
    "text": "or post process the data users had to do",
    "start": "30640",
    "end": "33360"
  },
  {
    "text": "workarounds around those",
    "start": "33360",
    "end": "35440"
  },
  {
    "text": "another issue was if the data contained",
    "start": "35440",
    "end": "37360"
  },
  {
    "text": "say for example pii columns and they",
    "start": "37360",
    "end": "39360"
  },
  {
    "text": "wanted to redact or mask these columns",
    "start": "39360",
    "end": "42000"
  },
  {
    "text": "the only way was to create a duplicate",
    "start": "42000",
    "end": "43920"
  },
  {
    "text": "table and have the columns loaded with",
    "start": "43920",
    "end": "45840"
  },
  {
    "text": "mask data",
    "start": "45840",
    "end": "47120"
  },
  {
    "text": "this often led to duplication of raw",
    "start": "47120",
    "end": "48879"
  },
  {
    "text": "data",
    "start": "48879",
    "end": "50559"
  },
  {
    "text": "without udf users had to learn and",
    "start": "50559",
    "end": "52719"
  },
  {
    "text": "implement custom code to work on the",
    "start": "52719",
    "end": "54480"
  },
  {
    "text": "data before being available for analysis",
    "start": "54480",
    "end": "56960"
  },
  {
    "text": "via athena queries",
    "start": "56960",
    "end": "60079"
  },
  {
    "text": "udfs are powered by aws lambda and you",
    "start": "61359",
    "end": "63920"
  },
  {
    "text": "can use",
    "start": "63920",
    "end": "64559"
  },
  {
    "text": "the athena federation sdk to author and",
    "start": "64559",
    "end": "66560"
  },
  {
    "text": "define your udfs",
    "start": "66560",
    "end": "68320"
  },
  {
    "text": "udfs support making network calls like",
    "start": "68320",
    "end": "70720"
  },
  {
    "text": "api calls",
    "start": "70720",
    "end": "72000"
  },
  {
    "text": "udfs can be invoked during select or",
    "start": "72000",
    "end": "74400"
  },
  {
    "text": "filter phases or both",
    "start": "74400",
    "end": "76560"
  },
  {
    "text": "you can invoke as many udfs as you want",
    "start": "76560",
    "end": "78799"
  },
  {
    "text": "and attend automatically optimizes your",
    "start": "78799",
    "end": "81040"
  },
  {
    "text": "query by batching together rows",
    "start": "81040",
    "end": "83040"
  },
  {
    "text": "and you only need to focus on your",
    "start": "83040",
    "end": "84799"
  },
  {
    "text": "processing logic",
    "start": "84799",
    "end": "86560"
  },
  {
    "text": "when while athena provides built-in",
    "start": "86560",
    "end": "88479"
  },
  {
    "text": "functions udfs",
    "start": "88479",
    "end": "90079"
  },
  {
    "text": "enables you to perform custom processing",
    "start": "90079",
    "end": "92720"
  },
  {
    "text": "such as compressing and decompressing",
    "start": "92720",
    "end": "94479"
  },
  {
    "text": "data reducting",
    "start": "94479",
    "end": "95600"
  },
  {
    "text": "sensitive information or applying",
    "start": "95600",
    "end": "98000"
  },
  {
    "text": "customized decryptions",
    "start": "98000",
    "end": "101840"
  },
  {
    "text": "udfs help in serverless etl and can",
    "start": "101920",
    "end": "104159"
  },
  {
    "text": "scale easily",
    "start": "104159",
    "end": "105200"
  },
  {
    "text": "entire workflow can be part of one",
    "start": "105200",
    "end": "106799"
  },
  {
    "text": "single sql query as well",
    "start": "106799",
    "end": "108960"
  },
  {
    "text": "you just write your udf once deploy it",
    "start": "108960",
    "end": "111280"
  },
  {
    "text": "once and then you can invoke it as many",
    "start": "111280",
    "end": "113119"
  },
  {
    "text": "times as needed in your athena queries",
    "start": "113119",
    "end": "116079"
  },
  {
    "text": "to deploy a udf you would need to use",
    "start": "116079",
    "end": "117920"
  },
  {
    "text": "athena federation sdk",
    "start": "117920",
    "end": "119920"
  },
  {
    "text": "you would need to clone and install the",
    "start": "119920",
    "end": "121520"
  },
  {
    "text": "sdk then you would need to install the",
    "start": "121520",
    "end": "123360"
  },
  {
    "text": "prerequisites such as apache ma1 or aws",
    "start": "123360",
    "end": "125759"
  },
  {
    "text": "cli",
    "start": "125759",
    "end": "126880"
  },
  {
    "text": "and we have an example udf template",
    "start": "126880",
    "end": "129039"
  },
  {
    "text": "which is provided that you can modify",
    "start": "129039",
    "end": "130800"
  },
  {
    "text": "to include your udf and finally you",
    "start": "130800",
    "end": "133360"
  },
  {
    "text": "build the jar",
    "start": "133360",
    "end": "134160"
  },
  {
    "text": "and then you can deploy the connector",
    "start": "134160",
    "end": "135920"
  },
  {
    "text": "and then last stage is to configure the",
    "start": "135920",
    "end": "137760"
  },
  {
    "text": "connector",
    "start": "137760",
    "end": "138800"
  },
  {
    "text": "which is available in your private",
    "start": "138800",
    "end": "140160"
  },
  {
    "text": "serverless application repository",
    "start": "140160",
    "end": "142239"
  },
  {
    "text": "and once you do that you are ready to",
    "start": "142239",
    "end": "143920"
  },
  {
    "text": "use the udf in your sql queries",
    "start": "143920",
    "end": "146319"
  },
  {
    "text": "we also have the demo later as part of",
    "start": "146319",
    "end": "148319"
  },
  {
    "text": "today's session where",
    "start": "148319",
    "end": "149440"
  },
  {
    "text": "where i will walk you through how to",
    "start": "149440",
    "end": "151360"
  },
  {
    "text": "configure and create a reduct udf",
    "start": "151360",
    "end": "153760"
  },
  {
    "text": "and then we will use it for masking",
    "start": "153760",
    "end": "155519"
  },
  {
    "text": "sensitive information while running",
    "start": "155519",
    "end": "157200"
  },
  {
    "text": "athena queries",
    "start": "157200",
    "end": "160000"
  },
  {
    "text": "let's look at athena udf's code sample",
    "start": "160800",
    "end": "163040"
  },
  {
    "text": "here is an example of how you can call",
    "start": "163040",
    "end": "164959"
  },
  {
    "text": "your udf function in your select and",
    "start": "164959",
    "end": "166800"
  },
  {
    "text": "filter phases of your query statement",
    "start": "166800",
    "end": "169360"
  },
  {
    "text": "there are two udfs in the sample code",
    "start": "169360",
    "end": "171280"
  },
  {
    "text": "here total price and is international",
    "start": "171280",
    "end": "174160"
  },
  {
    "text": "if we look at the athena queries you can",
    "start": "174160",
    "end": "175840"
  },
  {
    "text": "see that the first statement is where we",
    "start": "175840",
    "end": "177680"
  },
  {
    "text": "declare our udf with parameters and",
    "start": "177680",
    "end": "179680"
  },
  {
    "text": "return types",
    "start": "179680",
    "end": "180879"
  },
  {
    "text": "you can see that in this example query",
    "start": "180879",
    "end": "183519"
  },
  {
    "text": "total price udf has been used",
    "start": "183519",
    "end": "185680"
  },
  {
    "text": "in the select clause while udf is",
    "start": "185680",
    "end": "188560"
  },
  {
    "text": "international has been used in the",
    "start": "188560",
    "end": "190239"
  },
  {
    "text": "filter clause of the query",
    "start": "190239",
    "end": "192800"
  },
  {
    "text": "so as you can see ud functionality",
    "start": "192800",
    "end": "194560"
  },
  {
    "text": "provides you with a very powerful way to",
    "start": "194560",
    "end": "196239"
  },
  {
    "text": "define your scalar functions and apply",
    "start": "196239",
    "end": "198239"
  },
  {
    "text": "that to your data set",
    "start": "198239",
    "end": "200400"
  },
  {
    "text": "with that we will jump into the demo",
    "start": "200400",
    "end": "202000"
  },
  {
    "text": "mode and for the demo today what i will",
    "start": "202000",
    "end": "204159"
  },
  {
    "text": "do is i will",
    "start": "204159",
    "end": "205120"
  },
  {
    "text": "use one of the blog post that we have",
    "start": "205120",
    "end": "208720"
  },
  {
    "text": "for creating redux udf and using that",
    "start": "208720",
    "end": "211280"
  },
  {
    "text": "with amazon athena",
    "start": "211280",
    "end": "212720"
  },
  {
    "text": "i will deploy the cloudformation",
    "start": "212720",
    "end": "214159"
  },
  {
    "text": "template from this blog but again you",
    "start": "214159",
    "end": "216080"
  },
  {
    "text": "are free to",
    "start": "216080",
    "end": "217120"
  },
  {
    "text": "use your own development environment for",
    "start": "217120",
    "end": "219440"
  },
  {
    "text": "building this udf",
    "start": "219440",
    "end": "220959"
  },
  {
    "text": "the cloud formation template as part of",
    "start": "220959",
    "end": "222640"
  },
  {
    "text": "this block creates a cloud9 environment",
    "start": "222640",
    "end": "224959"
  },
  {
    "text": "cloud9 is a serverless integrated",
    "start": "224959",
    "end": "227519"
  },
  {
    "text": "development environment which makes it",
    "start": "227519",
    "end": "229120"
  },
  {
    "text": "easy to",
    "start": "229120",
    "end": "229920"
  },
  {
    "text": "monitor and debug your applications and",
    "start": "229920",
    "end": "231680"
  },
  {
    "text": "develop the applications",
    "start": "231680",
    "end": "233200"
  },
  {
    "text": "and what i will do is i will go to the",
    "start": "233200",
    "end": "235040"
  },
  {
    "text": "cloud9 console",
    "start": "235040",
    "end": "236799"
  },
  {
    "text": "where i see that my uh if i go to the",
    "start": "236799",
    "end": "240080"
  },
  {
    "text": "environments here quickly",
    "start": "240080",
    "end": "241519"
  },
  {
    "text": "i see that the cloud9 ide environment",
    "start": "241519",
    "end": "243439"
  },
  {
    "text": "has already been created for me i'll",
    "start": "243439",
    "end": "245040"
  },
  {
    "text": "click on open id",
    "start": "245040",
    "end": "246959"
  },
  {
    "text": "once i click that i will be brought into",
    "start": "246959",
    "end": "249040"
  },
  {
    "text": "this screen and i will see that a",
    "start": "249040",
    "end": "250560"
  },
  {
    "text": "terminal has been populated for me",
    "start": "250560",
    "end": "253040"
  },
  {
    "text": "once i'm on the screen i will basically",
    "start": "253040",
    "end": "254720"
  },
  {
    "text": "go back to the blog and follow the",
    "start": "254720",
    "end": "256320"
  },
  {
    "text": "instructions from the blog",
    "start": "256320",
    "end": "258000"
  },
  {
    "text": "uh so the first step is when you're",
    "start": "258000",
    "end": "259759"
  },
  {
    "text": "creating your id with the aws cloud9 you",
    "start": "259759",
    "end": "262240"
  },
  {
    "text": "need to resize",
    "start": "262240",
    "end": "263520"
  },
  {
    "text": "because by default aws cloud9 comes with",
    "start": "263520",
    "end": "266240"
  },
  {
    "text": "10 gb of disk space and since we will be",
    "start": "266240",
    "end": "268800"
  },
  {
    "text": "using on the development environment for",
    "start": "268800",
    "end": "270960"
  },
  {
    "text": "doing git clone and other things we",
    "start": "270960",
    "end": "272720"
  },
  {
    "text": "might need little bit higher space",
    "start": "272720",
    "end": "274960"
  },
  {
    "text": "so the first step i will go and run this",
    "start": "274960",
    "end": "277440"
  },
  {
    "text": "particular query",
    "start": "277440",
    "end": "280320"
  },
  {
    "text": "so what i will do is i'll copy the",
    "start": "280800",
    "end": "282639"
  },
  {
    "text": "instructions from the blog",
    "start": "282639",
    "end": "284080"
  },
  {
    "text": "for uh doing the resize i already did a",
    "start": "284080",
    "end": "287199"
  },
  {
    "text": "call command here which",
    "start": "287199",
    "end": "288479"
  },
  {
    "text": "got me the file and as a next step i",
    "start": "288479",
    "end": "291280"
  },
  {
    "text": "will go ahead",
    "start": "291280",
    "end": "292240"
  },
  {
    "text": "and run this command which will",
    "start": "292240",
    "end": "294320"
  },
  {
    "text": "basically resize",
    "start": "294320",
    "end": "295520"
  },
  {
    "text": "my cloud9 disk space to 20",
    "start": "295520",
    "end": "298880"
  },
  {
    "text": "gb and once this is done what i can do",
    "start": "298880",
    "end": "302479"
  },
  {
    "text": "is i can issue df-h command",
    "start": "302479",
    "end": "304639"
  },
  {
    "text": "to see that i have the necessary disk",
    "start": "304639",
    "end": "307280"
  },
  {
    "text": "space",
    "start": "307280",
    "end": "307840"
  },
  {
    "text": "created for me i can see that 20gb is",
    "start": "307840",
    "end": "309919"
  },
  {
    "text": "there available for me",
    "start": "309919",
    "end": "311840"
  },
  {
    "text": "as next what i will do is i will",
    "start": "311840",
    "end": "313520"
  },
  {
    "text": "basically follow the blog",
    "start": "313520",
    "end": "314880"
  },
  {
    "text": "and do a git clone of aws query",
    "start": "314880",
    "end": "318000"
  },
  {
    "text": "federation sdk",
    "start": "318000",
    "end": "319600"
  },
  {
    "text": "and once i'm there what i'll do is i'll",
    "start": "319600",
    "end": "321360"
  },
  {
    "text": "do a cd into",
    "start": "321360",
    "end": "323120"
  },
  {
    "text": "aws and as a next step i will just do a",
    "start": "323120",
    "end": "328479"
  },
  {
    "text": "pseudo sphere shown on the profile",
    "start": "328479",
    "end": "332320"
  },
  {
    "text": "and then finally i'll run this",
    "start": "332320",
    "end": "334960"
  },
  {
    "text": "particular command",
    "start": "334960",
    "end": "336080"
  },
  {
    "text": "what this will do is that it will make",
    "start": "336080",
    "end": "338639"
  },
  {
    "text": "sure that it is updating my development",
    "start": "338639",
    "end": "340880"
  },
  {
    "text": "environment and",
    "start": "340880",
    "end": "342240"
  },
  {
    "text": "creating the necessary tools and scripts",
    "start": "342240",
    "end": "344560"
  },
  {
    "text": "which are needed",
    "start": "344560",
    "end": "345600"
  },
  {
    "text": "for doing my udf compilation and",
    "start": "345600",
    "end": "348639"
  },
  {
    "text": "deploying the udf again some of these",
    "start": "348639",
    "end": "352000"
  },
  {
    "text": "steps will require manual intervention",
    "start": "352000",
    "end": "354000"
  },
  {
    "text": "and ask for",
    "start": "354000",
    "end": "354880"
  },
  {
    "text": "a couple of uh commands that you want to",
    "start": "354880",
    "end": "357600"
  },
  {
    "text": "say yes or no",
    "start": "357600",
    "end": "359120"
  },
  {
    "text": "but again you you are you are free to",
    "start": "359120",
    "end": "360800"
  },
  {
    "text": "modify the script and remove that in",
    "start": "360800",
    "end": "362800"
  },
  {
    "text": "case you want to automate the script",
    "start": "362800",
    "end": "364840"
  },
  {
    "text": "early",
    "start": "364840",
    "end": "366080"
  },
  {
    "text": "so looks like i have my cloud9 and",
    "start": "366080",
    "end": "368960"
  },
  {
    "text": "development environment set up the",
    "start": "368960",
    "end": "370639"
  },
  {
    "text": "script has completed and i will go",
    "start": "370639",
    "end": "372800"
  },
  {
    "text": "through",
    "start": "372800",
    "end": "373600"
  },
  {
    "text": "the next set of steps and first thing i",
    "start": "373600",
    "end": "375919"
  },
  {
    "text": "will do is i will run this command which",
    "start": "375919",
    "end": "377759"
  },
  {
    "text": "will",
    "start": "377759",
    "end": "378400"
  },
  {
    "text": "basically source the new variables which",
    "start": "378400",
    "end": "380319"
  },
  {
    "text": "were created by the installation process",
    "start": "380319",
    "end": "383360"
  },
  {
    "text": "without restarting the terminal and then",
    "start": "383360",
    "end": "386000"
  },
  {
    "text": "what i will do is i will uh",
    "start": "386000",
    "end": "387759"
  },
  {
    "text": "expand this aws athena query federation",
    "start": "387759",
    "end": "390960"
  },
  {
    "text": "folder on the left hand side",
    "start": "390960",
    "end": "393199"
  },
  {
    "text": "and i will go into athena udfs",
    "start": "393199",
    "end": "396720"
  },
  {
    "text": "again i will keep going to look into the",
    "start": "396720",
    "end": "399199"
  },
  {
    "text": "main",
    "start": "399199",
    "end": "399759"
  },
  {
    "text": "uh java class",
    "start": "399759",
    "end": "402800"
  },
  {
    "text": "and i can see that i have athena udf",
    "start": "403120",
    "end": "405520"
  },
  {
    "text": "handler.java i will click on double",
    "start": "405520",
    "end": "407680"
  },
  {
    "text": "click on that",
    "start": "407680",
    "end": "408880"
  },
  {
    "text": "and what that does is it brings the code",
    "start": "408880",
    "end": "410639"
  },
  {
    "text": "out here and",
    "start": "410639",
    "end": "412639"
  },
  {
    "text": "if i if i go and look into the code here",
    "start": "412639",
    "end": "416160"
  },
  {
    "text": "i can see that there are already couple",
    "start": "416160",
    "end": "417919"
  },
  {
    "text": "of functions provided",
    "start": "417919",
    "end": "419440"
  },
  {
    "text": "as part of this like compression and",
    "start": "419440",
    "end": "421440"
  },
  {
    "text": "decompress and so on",
    "start": "421440",
    "end": "422880"
  },
  {
    "text": "so what we will do today is that we will",
    "start": "422880",
    "end": "424800"
  },
  {
    "text": "go and add our own",
    "start": "424800",
    "end": "426319"
  },
  {
    "text": "redact function here as part of this",
    "start": "426319",
    "end": "429039"
  },
  {
    "text": "particular class file",
    "start": "429039",
    "end": "430479"
  },
  {
    "text": "so you could uh use our blog and you",
    "start": "430479",
    "end": "433360"
  },
  {
    "text": "could basically copy the function code",
    "start": "433360",
    "end": "435199"
  },
  {
    "text": "and put it in this class",
    "start": "435199",
    "end": "436560"
  },
  {
    "text": "but an easier way would be that we",
    "start": "436560",
    "end": "438560"
  },
  {
    "text": "already have a",
    "start": "438560",
    "end": "439680"
  },
  {
    "text": "java class file created for you and you",
    "start": "439680",
    "end": "442000"
  },
  {
    "text": "can run this call command",
    "start": "442000",
    "end": "443520"
  },
  {
    "text": "which will basically bring that same",
    "start": "443520",
    "end": "445759"
  },
  {
    "text": "java file",
    "start": "445759",
    "end": "446639"
  },
  {
    "text": "and overwrite into the respective folder",
    "start": "446639",
    "end": "449280"
  },
  {
    "text": "so i run this call command it",
    "start": "449280",
    "end": "451280"
  },
  {
    "text": "goes and changes my code and if i go and",
    "start": "451280",
    "end": "454080"
  },
  {
    "text": "look at my code now",
    "start": "454080",
    "end": "455360"
  },
  {
    "text": "i should see that a redact method has",
    "start": "455360",
    "end": "458560"
  },
  {
    "text": "been added here just before the compress",
    "start": "458560",
    "end": "461039"
  },
  {
    "text": "and what it does is basically it will",
    "start": "461039",
    "end": "463039"
  },
  {
    "text": "take a string",
    "start": "463039",
    "end": "464240"
  },
  {
    "text": "or from athena query a column and then",
    "start": "464240",
    "end": "466479"
  },
  {
    "text": "it will",
    "start": "466479",
    "end": "467280"
  },
  {
    "text": "basically mask all the characters of",
    "start": "467280",
    "end": "469120"
  },
  {
    "text": "that particular data set",
    "start": "469120",
    "end": "470800"
  },
  {
    "text": "except the last four characters so",
    "start": "470800",
    "end": "472800"
  },
  {
    "text": "basically if you have ssn and so on and",
    "start": "472800",
    "end": "475039"
  },
  {
    "text": "if you want to only preserve the last",
    "start": "475039",
    "end": "476560"
  },
  {
    "text": "four characters",
    "start": "476560",
    "end": "477840"
  },
  {
    "text": "then you can use this particular redact",
    "start": "477840",
    "end": "479599"
  },
  {
    "text": "method again you are free to",
    "start": "479599",
    "end": "481759"
  },
  {
    "text": "experiment and change this code as",
    "start": "481759",
    "end": "483680"
  },
  {
    "text": "needed but for today's demo we will just",
    "start": "483680",
    "end": "486479"
  },
  {
    "text": "work around with this code so after i",
    "start": "486479",
    "end": "489360"
  },
  {
    "text": "have created",
    "start": "489360",
    "end": "490560"
  },
  {
    "text": "or updated my class file with with the",
    "start": "490560",
    "end": "493680"
  },
  {
    "text": "redux method what i will do is i will",
    "start": "493680",
    "end": "495440"
  },
  {
    "text": "run an ambient clean install on",
    "start": "495440",
    "end": "497759"
  },
  {
    "text": "the aws athena query federation",
    "start": "497759",
    "end": "500000"
  },
  {
    "text": "directory",
    "start": "500000",
    "end": "500800"
  },
  {
    "text": "to make sure that i have the necessary",
    "start": "500800",
    "end": "503199"
  },
  {
    "text": "jobs which are",
    "start": "503199",
    "end": "504479"
  },
  {
    "text": "going to be the dependent jars for",
    "start": "504479",
    "end": "507039"
  },
  {
    "text": "compiling the udf method",
    "start": "507039",
    "end": "509759"
  },
  {
    "text": "all right so this step is completed and",
    "start": "509759",
    "end": "511840"
  },
  {
    "text": "next step is basically",
    "start": "511840",
    "end": "513440"
  },
  {
    "text": "i can now go ahead and build my udf jar",
    "start": "513440",
    "end": "516800"
  },
  {
    "text": "so for that i will just go into the",
    "start": "516800",
    "end": "518880"
  },
  {
    "text": "respective directory",
    "start": "518880",
    "end": "520640"
  },
  {
    "text": "and then i will issue the mvn clean",
    "start": "520640",
    "end": "522640"
  },
  {
    "text": "install command",
    "start": "522640",
    "end": "525599"
  },
  {
    "text": "all right so i can see that my build has",
    "start": "527519",
    "end": "529279"
  },
  {
    "text": "completed and i've got a new version of",
    "start": "529279",
    "end": "531839"
  },
  {
    "text": "my udf jar created out here",
    "start": "531839",
    "end": "534160"
  },
  {
    "text": "i can also check that under the target",
    "start": "534160",
    "end": "536000"
  },
  {
    "text": "directory here",
    "start": "536000",
    "end": "537200"
  },
  {
    "text": "and i can see athena dash udfs has been",
    "start": "537200",
    "end": "539760"
  },
  {
    "text": "created",
    "start": "539760",
    "end": "540800"
  },
  {
    "text": "next up what we are going to do is",
    "start": "540800",
    "end": "542320"
  },
  {
    "text": "basically we are going to publish this",
    "start": "542320",
    "end": "544160"
  },
  {
    "text": "new",
    "start": "544160",
    "end": "545120"
  },
  {
    "text": "jar or the udf method that we added into",
    "start": "545120",
    "end": "548320"
  },
  {
    "text": "our private serverless application",
    "start": "548320",
    "end": "550160"
  },
  {
    "text": "repository and for doing that i will use",
    "start": "550160",
    "end": "552640"
  },
  {
    "text": "one of the tools which is already",
    "start": "552640",
    "end": "554000"
  },
  {
    "text": "provided as part of this",
    "start": "554000",
    "end": "556240"
  },
  {
    "text": "and i will go ahead and do publish i",
    "start": "556240",
    "end": "559680"
  },
  {
    "text": "need to specify an s3 bucket here where",
    "start": "559680",
    "end": "562399"
  },
  {
    "text": "the jar",
    "start": "562399",
    "end": "563040"
  },
  {
    "text": "and the connector code would be copied",
    "start": "563040",
    "end": "565120"
  },
  {
    "text": "for the aws serverless application",
    "start": "565120",
    "end": "567120"
  },
  {
    "text": "repository to retrieve it",
    "start": "567120",
    "end": "568959"
  },
  {
    "text": "so let me put my s3 bucket name here it",
    "start": "568959",
    "end": "571920"
  },
  {
    "text": "name here",
    "start": "571920",
    "end": "573680"
  },
  {
    "text": "and finally i need to provide a name for",
    "start": "573680",
    "end": "575600"
  },
  {
    "text": "this particular connector",
    "start": "575600",
    "end": "576959"
  },
  {
    "text": "udf and in my case i will provide it as",
    "start": "576959",
    "end": "580080"
  },
  {
    "text": "athena dash udfs but you can change it",
    "start": "580080",
    "end": "582320"
  },
  {
    "text": "as per your requirements",
    "start": "582320",
    "end": "584480"
  },
  {
    "text": "i will say yes or because the script",
    "start": "584480",
    "end": "586959"
  },
  {
    "text": "does couple of actions",
    "start": "586959",
    "end": "588560"
  },
  {
    "text": "where it uploads the package connector",
    "start": "588560",
    "end": "590240"
  },
  {
    "text": "to s3 and it uses an",
    "start": "590240",
    "end": "592320"
  },
  {
    "text": "sar bucket policy to grant serverless",
    "start": "592320",
    "end": "595120"
  },
  {
    "text": "application repository access to the",
    "start": "595120",
    "end": "597120"
  },
  {
    "text": "connector coordinator i will say yes",
    "start": "597120",
    "end": "598959"
  },
  {
    "text": "here",
    "start": "598959",
    "end": "601279"
  },
  {
    "text": "and again it asked me for another policy",
    "start": "601279",
    "end": "604000"
  },
  {
    "text": "because it sees that the bucket policy",
    "start": "604000",
    "end": "605680"
  },
  {
    "text": "does not exist so i will say yes",
    "start": "605680",
    "end": "609519"
  },
  {
    "text": "and with that it will add the necessary",
    "start": "609519",
    "end": "611200"
  },
  {
    "text": "market policy",
    "start": "611200",
    "end": "613120"
  },
  {
    "text": "and i see that my udf connector code has",
    "start": "613120",
    "end": "615760"
  },
  {
    "text": "been successfully deployed to the",
    "start": "615760",
    "end": "617360"
  },
  {
    "text": "private serverless application",
    "start": "617360",
    "end": "618800"
  },
  {
    "text": "repository in my account",
    "start": "618800",
    "end": "620720"
  },
  {
    "text": "at the end of this publication process i",
    "start": "620720",
    "end": "622480"
  },
  {
    "text": "can see a console link which has been",
    "start": "622480",
    "end": "624320"
  },
  {
    "text": "provided if i click on that",
    "start": "624320",
    "end": "626560"
  },
  {
    "text": "and i can say open it will open in a new",
    "start": "626560",
    "end": "629519"
  },
  {
    "text": "tab in my browser",
    "start": "629519",
    "end": "631360"
  },
  {
    "text": "and then i should be able to see my",
    "start": "631360",
    "end": "633600"
  },
  {
    "text": "applications i can see that athena user",
    "start": "633600",
    "end": "635519"
  },
  {
    "text": "defined functions",
    "start": "635519",
    "end": "636880"
  },
  {
    "text": "has been created for me and i can also",
    "start": "636880",
    "end": "640240"
  },
  {
    "text": "see it",
    "start": "640240",
    "end": "640720"
  },
  {
    "text": "if i click on my applications i can see",
    "start": "640720",
    "end": "642560"
  },
  {
    "text": "it deployed here",
    "start": "642560",
    "end": "644320"
  },
  {
    "text": "next step is basically to go and",
    "start": "644320",
    "end": "646160"
  },
  {
    "text": "configure this particular application",
    "start": "646160",
    "end": "648800"
  },
  {
    "text": "so for doing that what i will do is i",
    "start": "648800",
    "end": "651200"
  },
  {
    "text": "will go to",
    "start": "651200",
    "end": "652560"
  },
  {
    "text": "my list of available applications under",
    "start": "652560",
    "end": "655040"
  },
  {
    "text": "private applications",
    "start": "655040",
    "end": "656560"
  },
  {
    "text": "that contains ic athena user defined",
    "start": "656560",
    "end": "658560"
  },
  {
    "text": "functions i will click on that",
    "start": "658560",
    "end": "660640"
  },
  {
    "text": "and once i do that it will open a lambda",
    "start": "660640",
    "end": "662560"
  },
  {
    "text": "console and here i can see",
    "start": "662560",
    "end": "664959"
  },
  {
    "text": "that it provides a template and which is",
    "start": "664959",
    "end": "667920"
  },
  {
    "text": "basically a cloud formation template",
    "start": "667920",
    "end": "669519"
  },
  {
    "text": "that this lambda will deploy",
    "start": "669519",
    "end": "671279"
  },
  {
    "text": "as part of the deployment process and on",
    "start": "671279",
    "end": "673440"
  },
  {
    "text": "the left hand side there is a readme",
    "start": "673440",
    "end": "674880"
  },
  {
    "text": "again you can customize this readme in",
    "start": "674880",
    "end": "676560"
  },
  {
    "text": "the code if you need",
    "start": "676560",
    "end": "677760"
  },
  {
    "text": "but basically it talks about various",
    "start": "677760",
    "end": "679360"
  },
  {
    "text": "functions here we did not add a readme",
    "start": "679360",
    "end": "681040"
  },
  {
    "text": "for the reader but you can",
    "start": "681040",
    "end": "682560"
  },
  {
    "text": "add that and once you do that it should",
    "start": "682560",
    "end": "684079"
  },
  {
    "text": "start showing up here",
    "start": "684079",
    "end": "686480"
  },
  {
    "text": "for the secret name uh in our case we",
    "start": "686480",
    "end": "688959"
  },
  {
    "text": "don't have anything on the secrets",
    "start": "688959",
    "end": "690640"
  },
  {
    "text": "manager or credentials to be stored just",
    "start": "690640",
    "end": "692800"
  },
  {
    "text": "enter database dash star",
    "start": "692800",
    "end": "694800"
  },
  {
    "text": "in the function name i will enter it as",
    "start": "694800",
    "end": "696720"
  },
  {
    "text": "custom udf",
    "start": "696720",
    "end": "698160"
  },
  {
    "text": "and then i will keep the rest of the",
    "start": "698160",
    "end": "699519"
  },
  {
    "text": "parameters as default i will hit",
    "start": "699519",
    "end": "701839"
  },
  {
    "text": "i acknowledge and i click on deploy",
    "start": "701839",
    "end": "705920"
  },
  {
    "text": "if i go to the cloud formation template",
    "start": "705920",
    "end": "708079"
  },
  {
    "text": "of page i see that",
    "start": "708079",
    "end": "709760"
  },
  {
    "text": "the user defined functions is still in",
    "start": "709760",
    "end": "712320"
  },
  {
    "text": "progress",
    "start": "712320",
    "end": "713839"
  },
  {
    "text": "i will wait for it to get completed i",
    "start": "713839",
    "end": "715760"
  },
  {
    "text": "will go back to the lambda console i",
    "start": "715760",
    "end": "717760"
  },
  {
    "text": "will hit",
    "start": "717760",
    "end": "718720"
  },
  {
    "text": "refresh here and i see that it has also",
    "start": "718720",
    "end": "721600"
  },
  {
    "text": "created here",
    "start": "721600",
    "end": "723040"
  },
  {
    "text": "so the next step what i will do is i",
    "start": "723040",
    "end": "724480"
  },
  {
    "text": "will go to saved queries on the athena",
    "start": "724480",
    "end": "726560"
  },
  {
    "text": "console",
    "start": "726560",
    "end": "727519"
  },
  {
    "text": "i already have one query saved out here",
    "start": "727519",
    "end": "730000"
  },
  {
    "text": "for the udf",
    "start": "730000",
    "end": "731440"
  },
  {
    "text": "i will use that but you can use a query",
    "start": "731440",
    "end": "734320"
  },
  {
    "text": "that suits your need and on top of your",
    "start": "734320",
    "end": "736320"
  },
  {
    "text": "data sets",
    "start": "736320",
    "end": "737680"
  },
  {
    "text": "for doing the redact operation i'm using",
    "start": "737680",
    "end": "740959"
  },
  {
    "text": "the amazon athena preview functionality",
    "start": "740959",
    "end": "742800"
  },
  {
    "text": "workgroup to run the udf query",
    "start": "742800",
    "end": "745040"
  },
  {
    "text": "this workgroup was created as part of",
    "start": "745040",
    "end": "746800"
  },
  {
    "text": "the cloud formation template",
    "start": "746800",
    "end": "748720"
  },
  {
    "text": "but in case you don't want to use the",
    "start": "748720",
    "end": "750240"
  },
  {
    "text": "template you can always create the",
    "start": "750240",
    "end": "751600"
  },
  {
    "text": "workgroup manually",
    "start": "751600",
    "end": "753440"
  },
  {
    "text": "using the athena console and then use it",
    "start": "753440",
    "end": "755680"
  },
  {
    "text": "and then",
    "start": "755680",
    "end": "756480"
  },
  {
    "text": "easily you can go and click on switch",
    "start": "756480",
    "end": "758720"
  },
  {
    "text": "work group in case you are in primary",
    "start": "758720",
    "end": "760320"
  },
  {
    "text": "work group and you want to move to the",
    "start": "760320",
    "end": "762240"
  },
  {
    "text": "amazon athena preview functionality of",
    "start": "762240",
    "end": "764000"
  },
  {
    "text": "group you can click on search for group",
    "start": "764000",
    "end": "765839"
  },
  {
    "text": "i'm already in this particular work",
    "start": "765839",
    "end": "767360"
  },
  {
    "text": "group so i'll just click",
    "start": "767360",
    "end": "769040"
  },
  {
    "text": "back on the workgroup and click on query",
    "start": "769040",
    "end": "772079"
  },
  {
    "text": "editor",
    "start": "772079",
    "end": "773680"
  },
  {
    "text": "and quickly walking you through the",
    "start": "773680",
    "end": "774880"
  },
  {
    "text": "syntax of this particular query and the",
    "start": "774880",
    "end": "776639"
  },
  {
    "text": "function",
    "start": "776639",
    "end": "777440"
  },
  {
    "text": "basically what we are doing is we are",
    "start": "777440",
    "end": "778880"
  },
  {
    "text": "using using function and defining a",
    "start": "778880",
    "end": "780560"
  },
  {
    "text": "redact method out here",
    "start": "780560",
    "end": "782079"
  },
  {
    "text": "which takes one parameter which is of",
    "start": "782079",
    "end": "784399"
  },
  {
    "text": "typewriter as input and it returns",
    "start": "784399",
    "end": "786720"
  },
  {
    "text": "a response as radical type and in the",
    "start": "786720",
    "end": "789440"
  },
  {
    "text": "lambda function name we are defining",
    "start": "789440",
    "end": "790959"
  },
  {
    "text": "custom udf this is the same function",
    "start": "790959",
    "end": "792720"
  },
  {
    "text": "name that we",
    "start": "792720",
    "end": "793920"
  },
  {
    "text": "defined when we created the udf",
    "start": "793920",
    "end": "797040"
  },
  {
    "text": "connector code and deployed it",
    "start": "797040",
    "end": "798800"
  },
  {
    "text": "and then i'm selecting couple of pi",
    "start": "798800",
    "end": "800720"
  },
  {
    "text": "columns from one of my tables",
    "start": "800720",
    "end": "802480"
  },
  {
    "text": "and then i'm trying to see the redacted",
    "start": "802480",
    "end": "805360"
  },
  {
    "text": "version of the same",
    "start": "805360",
    "end": "806320"
  },
  {
    "text": "using the redact method on top of those",
    "start": "806320",
    "end": "808320"
  },
  {
    "text": "and once i run this i can quickly see",
    "start": "808320",
    "end": "810639"
  },
  {
    "text": "that it gave back a couple of records",
    "start": "810639",
    "end": "812880"
  },
  {
    "text": "here based on my limit 10",
    "start": "812880",
    "end": "814880"
  },
  {
    "text": "and i can see that my redacted version",
    "start": "814880",
    "end": "818639"
  },
  {
    "text": "shows only the last four characters",
    "start": "818639",
    "end": "820639"
  },
  {
    "text": "while the rest of them are already",
    "start": "820639",
    "end": "822000"
  },
  {
    "text": "covered with xxx similarly for phone",
    "start": "822000",
    "end": "824240"
  },
  {
    "text": "number",
    "start": "824240",
    "end": "824720"
  },
  {
    "text": "and redux address so definitely uds can",
    "start": "824720",
    "end": "827920"
  },
  {
    "text": "be a very powerful tool to learn athena",
    "start": "827920",
    "end": "830160"
  },
  {
    "text": "queries",
    "start": "830160",
    "end": "830720"
  },
  {
    "text": "for doing any pre or post processing",
    "start": "830720",
    "end": "832480"
  },
  {
    "text": "logic or doing",
    "start": "832480",
    "end": "834240"
  },
  {
    "text": "uh redacting sensitive information like",
    "start": "834240",
    "end": "836560"
  },
  {
    "text": "we saw in the example demo today",
    "start": "836560",
    "end": "838480"
  },
  {
    "text": "with that thanks everyone for your time",
    "start": "838480",
    "end": "840160"
  },
  {
    "text": "today hope this session was useful",
    "start": "840160",
    "end": "843839"
  }
]