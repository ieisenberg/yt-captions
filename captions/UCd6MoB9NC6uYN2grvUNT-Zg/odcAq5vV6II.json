[
  {
    "text": "[Music]",
    "start": "2200",
    "end": "10040"
  },
  {
    "text": "senior engineer at here at Amazon and welcome to our ongoing series about messaging services I'm coming to live",
    "start": "10040",
    "end": "17250"
  },
  {
    "text": "from Amazon Vancouver which I will prove",
    "start": "17250",
    "end": "21109"
  },
  {
    "text": "there you go there's a view of our Harbor and I'll get out of here and the",
    "start": "23269",
    "end": "28769"
  },
  {
    "text": "camera recover and you can see why I have to keep this closed otherwise I'm going to be a faceless black silhouette",
    "start": "28769",
    "end": "37460"
  },
  {
    "text": "there you go so welcome to a series so today we're going to talk about a",
    "start": "37790",
    "end": "43079"
  },
  {
    "text": "service that is not new the simple notification service which here from",
    "start": "43079",
    "end": "48690"
  },
  {
    "text": "here on in will call SNS thereby saving lots and lots of syllables I've got Sam Dengler on line here with you're here",
    "start": "48690",
    "end": "55260"
  },
  {
    "text": "with me today who is a solution architect in Atlanta now I know what an essay is and I bet you lots of you do",
    "start": "55260",
    "end": "61379"
  },
  {
    "text": "too but maybe somebody doesn't so Sam why don't you tell people what it is you actually do here for us I tend thanks so",
    "start": "61379",
    "end": "68310"
  },
  {
    "text": "so I'm the solutions architect they've bless I've been here for a little over two years now but prior to that I was a",
    "start": "68310",
    "end": "73530"
  },
  {
    "text": "customer for three years so I've been in the shoes of most of our customers and we're working with the services for a",
    "start": "73530",
    "end": "79080"
  },
  {
    "text": "while as an SI my role is to meet with customers and dive deep on their business use cases in order to",
    "start": "79080",
    "end": "85710"
  },
  {
    "text": "understand what their technical challenges are and how we can use into a services to help delight their consumers",
    "start": "85710",
    "end": "92659"
  },
  {
    "text": "so you typically work with them as they're getting into things as they're looking at the products and then",
    "start": "92659",
    "end": "97799"
  },
  {
    "text": "deciding what to do once they're in yeah I get this question quite a bit we there",
    "start": "97799",
    "end": "103079"
  },
  {
    "text": "is no sort of pre sales role here it's people some people are investigating services some are using and looking to",
    "start": "103079",
    "end": "108540"
  },
  {
    "text": "do new things some have been using these services for a while so as essays we sort of enter conversations at all",
    "start": "108540",
    "end": "113939"
  },
  {
    "text": "points and sort of service usage in and knowledge from our customers so now I'm",
    "start": "113939",
    "end": "119820"
  },
  {
    "text": "going to share a sort of a dirty secret it turns out people like Sam the SAS actually know a lot more about the",
    "start": "119820",
    "end": "125100"
  },
  {
    "text": "services the people like me who build them because you know they actually get in there and get their hands dirty and build stuff with them works in the back",
    "start": "125100",
    "end": "131489"
  },
  {
    "text": "rooms you know pouring oil in the and so on so today we're going to talk about SNS and Sam if you flip to the SNS",
    "start": "131489",
    "end": "138640"
  },
  {
    "text": "homescreen they're so simple notification service is a classical",
    "start": "138640",
    "end": "143740"
  },
  {
    "text": "messaging service of what we the flavor we call pub/sub which publish and",
    "start": "143740",
    "end": "150010"
  },
  {
    "text": "subscribe so the way it works is we have it's organized around topics and you",
    "start": "150010",
    "end": "157210"
  },
  {
    "text": "make an SNS topic and then you post messages to the topic and then you can",
    "start": "157210",
    "end": "163209"
  },
  {
    "text": "subscribe things to the topic and the things you can subscribe to the topics include SQS cues lambda functions",
    "start": "163209",
    "end": "171360"
  },
  {
    "text": "arbitrary rest endpoints email via a simple email service mobile push you can",
    "start": "171360",
    "end": "178150"
  },
  {
    "text": "push it up to people's mobile phones and so on so the idea is that you write messages into a topic and then the topic",
    "start": "178150",
    "end": "184840"
  },
  {
    "text": "pushes messages to to a variety of different things it's actually a really popular service and many many of the",
    "start": "184840",
    "end": "191470"
  },
  {
    "text": "other services at AWS are all wired up to automatically send notice SMS",
    "start": "191470",
    "end": "197230"
  },
  {
    "text": "notifications when something happens and so a lot of messages really go through",
    "start": "197230",
    "end": "202480"
  },
  {
    "text": "there now I don't know if you noticed but yesterday there was the thing going around Twitter called AWS drinks where",
    "start": "202480",
    "end": "209830"
  },
  {
    "text": "they talked about bartender drinks for all the different AWS services and there were only a two-four two-four SNS and",
    "start": "209830",
    "end": "215470"
  },
  {
    "text": "the first one was the SNS everybody's up every time someone orders a drink you get a page of duty alert okay fair",
    "start": "215470",
    "end": "222670"
  },
  {
    "text": "enough and that's actually pretty realistic because a lot of people use SNS to send messages when something's gone wrong and it's really easy to set it up to drive",
    "start": "222670",
    "end": "228940"
  },
  {
    "text": "your page here the second one says this is by phone named Chris Gervais and it says the SNS bartender acknowledges that",
    "start": "228940",
    "end": "236350"
  },
  {
    "text": "you've ordered something drinkable two weeks later a giraffe arrives okay I mean yeah yeah you could do that but",
    "start": "236350",
    "end": "242920"
  },
  {
    "text": "doesn't as if you were in the business of delivering giraffes but that's maybe a little on the abstract set okay now",
    "start": "242920",
    "end": "249850"
  },
  {
    "text": "there's one of the custom one one customer that sounds been working with lately and they've got a nice nice application of SNS that we think shows",
    "start": "249850",
    "end": "256630"
  },
  {
    "text": "off some of the finer points and why you if you have a problem might want to use it so Sam",
    "start": "256630",
    "end": "262330"
  },
  {
    "text": "this would be an outfit called play on so you want to about them and what they do yeah so I'm",
    "start": "262330",
    "end": "268760"
  },
  {
    "text": "at this the use case we'll be talking about I wrote a blog on it about last summer if our viewers are interested in",
    "start": "268760",
    "end": "274670"
  },
  {
    "text": "looking at later you plan on sports is it's a company based out of Atlanta Georgia it's a high school sports media",
    "start": "274670",
    "end": "281990"
  },
  {
    "text": "company but is partnered with an organization called the National Federation of high school sports is sort",
    "start": "281990",
    "end": "288020"
  },
  {
    "text": "of the high school sports version of the NCAA for college sports and what we the",
    "start": "288020",
    "end": "293540"
  },
  {
    "text": "company does actually is works with high school students and they will go to the",
    "start": "293540",
    "end": "298580"
  },
  {
    "text": "events and they will operate the cameras they will do the color commentary they'll punch up graphics everything",
    "start": "298580",
    "end": "304490"
  },
  {
    "text": "that you see in production broadcasts of sporting events students do for their own high school sports and then their",
    "start": "304490",
    "end": "310910"
  },
  {
    "text": "broadcast live from this website the NFHS network and what it allows is a",
    "start": "310910",
    "end": "315980"
  },
  {
    "text": "relative's high school sports fans to purchase of subscriptions a monthly subscription like they would with",
    "start": "315980",
    "end": "321790"
  },
  {
    "text": "Netflix or Amazon video and then they can watch the live videos and VOD videos",
    "start": "321790",
    "end": "328450"
  },
  {
    "text": "you know to help follow who you know their children or their relatives and they're interested in the sports so",
    "start": "328450",
    "end": "334730"
  },
  {
    "text": "maybe we could play a video real quick to kind of demonstrate the service to those or as students places",
    "start": "334730",
    "end": "342730"
  },
  {
    "text": "oh hey V folks you got that video",
    "start": "345199",
    "end": "348909"
  },
  {
    "text": "[Music]",
    "start": "351310",
    "end": "354709"
  },
  {
    "text": "[Music]",
    "start": "356960",
    "end": "367199"
  },
  {
    "text": "[Music] [Applause]",
    "start": "375110",
    "end": "380279"
  },
  {
    "text": "cool thanks very much they actually host the video broadcast the video and let",
    "start": "383730",
    "end": "388960"
  },
  {
    "text": "people sign up for it excellent so do you ran into them before they were using SNS maybe talk about you know what",
    "start": "388960",
    "end": "394240"
  },
  {
    "text": "this picture was like when you got in there and how things were working right so um planking has is the sort of",
    "start": "394240",
    "end": "401290"
  },
  {
    "text": "streaming platform behind the net HS network and it's not unlike twitch and the fact that there's many events that",
    "start": "401290",
    "end": "407080"
  },
  {
    "text": "are streamed on the platform a varying audience sizes compared to say like an NBA basketball Paton fewer events with",
    "start": "407080",
    "end": "413560"
  },
  {
    "text": "larger audiences so last year planted tens of thousands of events as you can",
    "start": "413560",
    "end": "418660"
  },
  {
    "text": "imagine this type of a broadcasting model just isn't possible with traditional channels that you would see",
    "start": "418660",
    "end": "424540"
  },
  {
    "text": "in a satellite or cable or dish right and so it has sort of unique despite you traffic patterns especially dealing with",
    "start": "424540",
    "end": "430990"
  },
  {
    "text": "high school scores where there's a large number of high schools and sporting events but actually a small window in",
    "start": "430990",
    "end": "436930"
  },
  {
    "text": "which the sporting events occur after school and sometimes in Saturday's so for example in March I'm playing on",
    "start": "436930",
    "end": "443590"
  },
  {
    "text": "processed over 20,000 hours of video in a month but had a peak of 350 hours of",
    "start": "443590",
    "end": "451000"
  },
  {
    "text": "video processed in just one hour less 2 percent of the total of the month in just one hour right so you could also",
    "start": "451000",
    "end": "456940"
  },
  {
    "text": "imagine that on a Sunday when there's no high school sports going on there's not a lot of streaming and video processing",
    "start": "456940",
    "end": "463600"
  },
  {
    "text": "go on as well so they had a sort of a unique traffic pattern we really saw largely lasticity in the video",
    "start": "463600",
    "end": "469150"
  },
  {
    "text": "processing originally the company built the video streaming platform on ec2 using auto scaling groups for Elastic",
    "start": "469150",
    "end": "475960"
  },
  {
    "text": "Compute however the licensing for the video software was not elastic in the same way so the company was challenged",
    "start": "475960",
    "end": "481960"
  },
  {
    "text": "with higher costs for licensing that then really fit their model so in 2014 a",
    "start": "481960",
    "end": "487150"
  },
  {
    "text": "PlayOn went to reinvent and that's when lambda was introduced and we the company",
    "start": "487150",
    "end": "492550"
  },
  {
    "text": "really saw a connection between the demos on image processing and what they could do with videos using ffmpeg and so",
    "start": "492550",
    "end": "499930"
  },
  {
    "text": "they came away with that and they redesigned their architecture to be a service architecture and and changed the",
    "start": "499930",
    "end": "505660"
  },
  {
    "text": "way that they were publishing their videos so instead of streaming videos using rtmp they're actually publishing",
    "start": "505660",
    "end": "511000"
  },
  {
    "text": "small video segments through OUTFRONT using an accelerated transfer to an s3 bucket when the video eight",
    "start": "511000",
    "end": "518339"
  },
  {
    "text": "second video hit as three it would trigger a lambda function the lambda function would then need to have",
    "start": "518339",
    "end": "524670"
  },
  {
    "text": "multiple video transcoding jobs operated on that small part of video right so",
    "start": "524670",
    "end": "530100"
  },
  {
    "text": "when you're streaming video with the player is based on your bandwidth bandwidth for your network connectivity",
    "start": "530100",
    "end": "536250"
  },
  {
    "text": "used to play the video at different resolutions and so there were a number of operations they would need to perform",
    "start": "536250",
    "end": "542070"
  },
  {
    "text": "on the same eight second video and so it was a really good model for a fan-out pattern so at the time actually though",
    "start": "542070",
    "end": "549089"
  },
  {
    "text": "when lambda was announced you know it's kind of hard to to remember that since it was 2014 but S&S did not initially",
    "start": "549089",
    "end": "555510"
  },
  {
    "text": "support lambda as a target for its subscribers and so initially a land plan",
    "start": "555510",
    "end": "562320"
  },
  {
    "text": "sport solved this problem by having a lambda function to a fan-out to the other land of functions and we can",
    "start": "562320",
    "end": "568290"
  },
  {
    "text": "unroll take a look at this series that you know we got to show code so short code by the way we here there's just no",
    "start": "568290",
    "end": "575519"
  },
  {
    "text": "echo on on the line do you have any other live mics in the room there now",
    "start": "575519",
    "end": "581700"
  },
  {
    "text": "maybe a mute your laptop just to be sure I don't know is that better and yeah I",
    "start": "581700",
    "end": "587070"
  },
  {
    "text": "don't know let's get going okay so so",
    "start": "587070",
    "end": "592079"
  },
  {
    "text": "here's the code that initially that a representative code for that fan-out function right so it's a pretty simple",
    "start": "592079",
    "end": "598020"
  },
  {
    "text": "function we have a list of sort of the downstream lambda functions that need to be executed and this lambda function",
    "start": "598020",
    "end": "604320"
  },
  {
    "text": "essentially receives the s3 event and just loops through those downstream lambda functions invoking them",
    "start": "604320",
    "end": "611520"
  },
  {
    "text": "asynchronously and just passing on the s3 event payload to each of them so it's a it's a pretty simple function now",
    "start": "611520",
    "end": "617670"
  },
  {
    "text": "however had to be called for every execution an s3 event right I see I see you've got invocation type equals event",
    "start": "617670",
    "end": "624300"
  },
  {
    "text": "so that means it's not gonna wait it's just gonna fire and forget that's right and this is just representative their",
    "start": "624300",
    "end": "631199"
  },
  {
    "text": "true code they actually did parallel a secret event invocation to reduce the latency of the lambda function you know",
    "start": "631199",
    "end": "637560"
  },
  {
    "text": "however you can imagine with the number of you know having over nine million second segments within a month you know",
    "start": "637560",
    "end": "643960"
  },
  {
    "text": "even having one limited function executed for each of these can add up over time right hmm got it",
    "start": "643960",
    "end": "651780"
  },
  {
    "text": "so once uh once s Nesta supported a",
    "start": "652080",
    "end": "657460"
  },
  {
    "text": "lambda functions as a target plan was able to sort of a refactor their architecture to take advantage of that",
    "start": "657460",
    "end": "663910"
  },
  {
    "text": "service change so instead of the s3 event triggering a lambda function for the fan-out we were actually able to use",
    "start": "663910",
    "end": "669970"
  },
  {
    "text": "SNS in order to handle that event and fan-out to the other lambda functions so",
    "start": "669970",
    "end": "675370"
  },
  {
    "text": "let's take a look how that changed the code so in fact it eliminated the lambda",
    "start": "675370",
    "end": "680500"
  },
  {
    "text": "function that we just looked at to do the fan-out and let's take a look at how the down stream function changed because",
    "start": "680500",
    "end": "686170"
  },
  {
    "text": "of this initially the lambda function handling the event was just essentially",
    "start": "686170",
    "end": "692290"
  },
  {
    "text": "receiving the same event that the the event the lambda handler did for the s3 event however when s3 will send the",
    "start": "692290",
    "end": "699130"
  },
  {
    "text": "event it wraps the payload the original payload in its own sort of schema and wrapper so just by adding a simple",
    "start": "699130",
    "end": "706540"
  },
  {
    "text": "function that could detect both cases one where the event is coming raw and one where it's wrapped in the SNS we can",
    "start": "706540",
    "end": "712630"
  },
  {
    "text": "handle both past execution paths and that's what this parse event does we're sort of glossing over some of the gory",
    "start": "712630",
    "end": "719170"
  },
  {
    "text": "details and what these functions would actually do but in fact they're calling out to binaries that are included in the",
    "start": "719170",
    "end": "725380"
  },
  {
    "text": "lambda function to do ffmpeg processing and here's another example of where we're actually using media info and",
    "start": "725380",
    "end": "732160"
  },
  {
    "text": "there's a blog actually that covers this and how you can extract metadata from the video segments as well see they're",
    "start": "732160",
    "end": "739810"
  },
  {
    "text": "using ffmpeg I think if ffmpeg didn't exist the whole video industry would collapse everybody seems to use it for",
    "start": "739810",
    "end": "745810"
  },
  {
    "text": "everything yes it's with ffmpeg it's all about the the right combination of options to",
    "start": "745810",
    "end": "751570"
  },
  {
    "text": "accomplish anything and so there win here was they managed to throw away some code I guess yes so there was a couple",
    "start": "751570",
    "end": "759790"
  },
  {
    "text": "of wins here one is they were able to eliminate the fan-out lambda function altogether and so that there's benefits",
    "start": "759790",
    "end": "766060"
  },
  {
    "text": "they are just in code complexity everyone likes to delete code but also as I mentioned in you know we talked",
    "start": "766060",
    "end": "771880"
  },
  {
    "text": "about the number of video hours that were processed in March will as I mentioned every execution caused",
    "start": "771880",
    "end": "777660"
  },
  {
    "text": "the lamb to execution gland is a very inexpensive service but it was still maybe several hundred dollars in order",
    "start": "777660",
    "end": "783210"
  },
  {
    "text": "to include that so there was cost savings as well it also reduced the latency slightly by having not having to",
    "start": "783210",
    "end": "788640"
  },
  {
    "text": "call through an additional eight lambda function to invoke the downstream functions right I would think and",
    "start": "788640",
    "end": "793770"
  },
  {
    "text": "compare it to the video processing and so on the latency of SNS would just like totally vanish from the equation that's",
    "start": "793770",
    "end": "801000"
  },
  {
    "text": "right and then the other advantage is that SMS has its own built-in sense for retrying lambda functions and logging",
    "start": "801000",
    "end": "807420"
  },
  {
    "text": "success and failure which all had to be handled manually within the lambda function originally so there was some",
    "start": "807420",
    "end": "814080"
  },
  {
    "text": "offloading of complexity to other a2s services that have that sort of concepts built into it as well you know that's",
    "start": "814080",
    "end": "820740"
  },
  {
    "text": "actually a good point that's worth mentioning so when when you when you wrote something from SNS to a lamb dart or anything to up to it to sqs to an",
    "start": "820740",
    "end": "827550"
  },
  {
    "text": "arrest endpoint whatever its marked it'll try really hard to deliver it'll keep retrying it'll back off gradually",
    "start": "827550",
    "end": "833940"
  },
  {
    "text": "but it will really give the utmost effort to make sure it goes through I can remember Oh a few months ago when",
    "start": "833940",
    "end": "840720"
  },
  {
    "text": "lambda had a problem had major you know fleet issue and they were failing like 30 percent or 40 percent of their calls",
    "start": "840720",
    "end": "846660"
  },
  {
    "text": "and the people who are going through SNS and other things like step functions basically didn't even notice right",
    "start": "846660",
    "end": "852150"
  },
  {
    "text": "because you know they were just retry a few times and it would get through so you know if in fact you're calling",
    "start": "852150",
    "end": "858260"
  },
  {
    "text": "lambda directly you're probably gonna have to you know do some retrying and",
    "start": "858260",
    "end": "864300"
  },
  {
    "text": "thinking about that the SDK will do some of that for you but but seriously for lambdas that you know you depend on and",
    "start": "864300",
    "end": "870090"
  },
  {
    "text": "in fact message delivery that you depend on you know you really need to have some thought given to retry and one of the",
    "start": "870090",
    "end": "876690"
  },
  {
    "text": "best ways to not have to do that thought is to use SNS because you know it'll get through there no um since the lambda",
    "start": "876690",
    "end": "885120"
  },
  {
    "text": "hasn't been standing still while you've been doing this time since play on we added some new features and in particular filtering I'm wondering and",
    "start": "885120",
    "end": "891600"
  },
  {
    "text": "you know looking at this if filtering would have made their life even easier yes so you know one more optimization in",
    "start": "891600",
    "end": "900000"
  },
  {
    "text": "this um you'll see is that you know we've eliminated the lambda function but still every mess",
    "start": "900000",
    "end": "905510"
  },
  {
    "text": "every video segment that comes through does sms topic has to be handled by every downstream lambda function whether",
    "start": "905510",
    "end": "911720"
  },
  {
    "text": "or not it needs to be processed or not so an example of this is you would you",
    "start": "911720",
    "end": "917150"
  },
  {
    "text": "would be amazed at the video capabilities these high schools there's high schools that use 4k video and then",
    "start": "917150",
    "end": "923420"
  },
  {
    "text": "in other cases you might be in a rural area where you have really low quality its goodness exactly yep",
    "start": "923420",
    "end": "930110"
  },
  {
    "text": "yeah you look at you know twitch in these mobile video broadcasting units",
    "start": "930110",
    "end": "935510"
  },
  {
    "text": "essentially right so the inefficiency here is that each of the lambda function",
    "start": "935510",
    "end": "941090"
  },
  {
    "text": "would need to inspect the event in order to determine whether it should process it or a short-circuit the execution so",
    "start": "941090",
    "end": "947120"
  },
  {
    "text": "there's still some inefficiencies area with the subscription of filtering that came out with SNS if we can put metadata",
    "start": "947120",
    "end": "954110"
  },
  {
    "text": "on the message along with the payload then we can the subscribers themselves can actually Express what messages that",
    "start": "954110",
    "end": "961280"
  },
  {
    "text": "they're interested in based on stream or numeric logic as well as and/or logic to",
    "start": "961280",
    "end": "966350"
  },
  {
    "text": "to create fairly expressive situations in order to handle just the messages",
    "start": "966350",
    "end": "972110"
  },
  {
    "text": "they want to process and decrease the number of these sort of wasteful but is lambda invocations and I guess you know",
    "start": "972110",
    "end": "979790"
  },
  {
    "text": "as an essay one of your jobs is to notice that and call them up and let",
    "start": "979790",
    "end": "984860"
  },
  {
    "text": "them know so they might do that in the future yes you know one of our our leadership principles is invent simplify",
    "start": "984860",
    "end": "990020"
  },
  {
    "text": "we're always sort of looking for opportunities to use the latest services and features and you know lots of times",
    "start": "990020",
    "end": "997250"
  },
  {
    "text": "you know the subscription filtering is a fairly new feature and maybe customers looked at SMS six months ago or a year",
    "start": "997250",
    "end": "1003280"
  },
  {
    "text": "and didn't know that was there so we are constantly revisiting services to you know talk about the newest",
    "start": "1003280",
    "end": "1009310"
  },
  {
    "text": "state-of-the-art and see if there are new use cases that the customer e have can offload complexity to a to s",
    "start": "1009310",
    "end": "1015100"
  },
  {
    "text": "services and really take on that undifferentiated heavy live yeah you know this is an ongoing pattern we see",
    "start": "1015100",
    "end": "1021490"
  },
  {
    "text": "at AWS we really need people like Sam up there because we here in the in the engineering offices will you know finish",
    "start": "1021490",
    "end": "1027610"
  },
  {
    "text": "building a future like message filtering for example and you know ship it and then go out and have beers and be happy",
    "start": "1027610",
    "end": "1033550"
  },
  {
    "text": "about it and somebody's got to make sure that you know people who need this find out about it and so we do press releases and so on but you",
    "start": "1033550",
    "end": "1039740"
  },
  {
    "text": "know the kind of personal contact people like like Sam I offer it is a big deal now you told me you had another interesting demo of a clever setup with",
    "start": "1039740",
    "end": "1047390"
  },
  {
    "text": "SMS and filtering and some other neat stuff yes so um we have another news service that came it's a little bit year",
    "start": "1047390",
    "end": "1054230"
  },
  {
    "text": "old now as part of our um AI services ml service called recognition recognition has several features you know that can",
    "start": "1054230",
    "end": "1061040"
  },
  {
    "text": "do celebrity detection and detect inappropriate material for children the",
    "start": "1061040",
    "end": "1066260"
  },
  {
    "text": "one we're gonna look at right now is something called label detection and so you can give recognition of video I mean",
    "start": "1066260",
    "end": "1072710"
  },
  {
    "text": "excuse me an image you can actually do videos now as re-invent but in this case we're gonna look at an image and we feed",
    "start": "1072710",
    "end": "1078320"
  },
  {
    "text": "that image to recognition and it will come back with a list of labels those are the things or entities that it can",
    "start": "1078320",
    "end": "1083930"
  },
  {
    "text": "detect inside the image using you know machine learning models the AOS has always created learning a sexy future",
    "start": "1083930",
    "end": "1091220"
  },
  {
    "text": "all of a sudden it really is amazing I I'm constantly just excited by what I",
    "start": "1091220",
    "end": "1096920"
  },
  {
    "text": "can do these days as a builder with just a few lines of code it's a great time to Pio I in this example we're showing uh",
    "start": "1096920",
    "end": "1103490"
  },
  {
    "text": "this is one of the sample images that we have and you can see that it's detected some label skateboard sports sports and",
    "start": "1103490",
    "end": "1110600"
  },
  {
    "text": "a confidence that it thinks about those labels so in this case we are is that recognition is ninety-nine point two",
    "start": "1110600",
    "end": "1116420"
  },
  {
    "text": "percent confidence that there's a skateboard in this picture so what we",
    "start": "1116420",
    "end": "1122000"
  },
  {
    "text": "can do actually is let's we can take a look at what this would look like right",
    "start": "1122000",
    "end": "1128450"
  },
  {
    "text": "so if we have images coming into s3 we can have a lambda function that's tied",
    "start": "1128450",
    "end": "1134090"
  },
  {
    "text": "to those events so when it sees a new image dropped into an s3 bucket it can send that image to recognition and come",
    "start": "1134090",
    "end": "1140810"
  },
  {
    "text": "back with a list of confidence values and add those as message attributes to the message going to SNS and so Tim I",
    "start": "1140810",
    "end": "1147800"
  },
  {
    "text": "know these you know from following your blog that you're a big music fan with your song of the day and so it could be",
    "start": "1147800",
    "end": "1153620"
  },
  {
    "text": "a case where we're watching the same s3 bucket heel and I maybe I'm the skateboarding fan and you can say that",
    "start": "1153620",
    "end": "1159890"
  },
  {
    "text": "you only want to see messages where you want to see messages for images that have musicians and then what I would",
    "start": "1159890",
    "end": "1165650"
  },
  {
    "text": "like 8:40 images the key difference here is in the past you would actually have to have multiple topics and push that logic",
    "start": "1165650",
    "end": "1173070"
  },
  {
    "text": "into your lambda function in order to determine one or many topics that you should publish to based on metadata now",
    "start": "1173070",
    "end": "1179160"
  },
  {
    "text": "customers can have one lambda function with one message and as long as the message attributes have a full enough",
    "start": "1179160",
    "end": "1185790"
  },
  {
    "text": "context and the expressions that you can drill it in the subscription filtering are are complete then you can build that",
    "start": "1185790",
    "end": "1192450"
  },
  {
    "text": "into the service yourself and reduce complexity cool enough architecture",
    "start": "1192450",
    "end": "1197580"
  },
  {
    "text": "diagram let's see some code I'm sorry I missed that no enough architecture oh yeah okay cool",
    "start": "1197580",
    "end": "1206640"
  },
  {
    "text": "well let's take a look at what this lambda function looks like and the last ones we were actually looking at a",
    "start": "1206640",
    "end": "1213030"
  },
  {
    "text": "Python code in this case we're gonna look at some new new note 8 codes so lambdaj supports node a justice a couple",
    "start": "1213030",
    "end": "1219240"
  },
  {
    "text": "of months ago has a really nice feature now around a sink and a weight um functionalities in the language that",
    "start": "1219240",
    "end": "1225480"
  },
  {
    "text": "make handling asynchronous processing ended much easier to sort of rock as a developer and so we're demonstrating",
    "start": "1225480",
    "end": "1231720"
  },
  {
    "text": "that with an async event handler for lambda and what we're doing is we're just blowing through the",
    "start": "1231720",
    "end": "1237240"
  },
  {
    "text": "s3 event that's coming so we get a list of records coming from s3 and we're pulling out for each one the bucket name",
    "start": "1237240",
    "end": "1244020"
  },
  {
    "text": "and the key the first thing we're doing is constructing the requests to recognition so recognition if you're",
    "start": "1244020",
    "end": "1250410"
  },
  {
    "text": "using an s3 objects there's a particular schema you can use to put a reference to",
    "start": "1250410",
    "end": "1255419"
  },
  {
    "text": "that object and then we can send it to recognition in order to detect labels on this image and again this is typically",
    "start": "1255419",
    "end": "1262320"
  },
  {
    "text": "where you would see a node a callback function and you know several like depths of you know curly braces but we",
    "start": "1262320",
    "end": "1269010"
  },
  {
    "text": "can really simplify this now by returning a promise which the 8os sdk does for you and just wait on the",
    "start": "1269010",
    "end": "1275040"
  },
  {
    "text": "response from that and so it reads more like synchronous code although it's asynchronous once we have those labels",
    "start": "1275040",
    "end": "1281100"
  },
  {
    "text": "back it's actually going to come in for it's an array actually of hashes that",
    "start": "1281100",
    "end": "1286710"
  },
  {
    "text": "small dictionaries of key value pairs for the labels and the confidence values and so we have just a small function",
    "start": "1286710",
    "end": "1293280"
  },
  {
    "text": "here recognition labels to message attributes that's just going to transform one form",
    "start": "1293280",
    "end": "1298440"
  },
  {
    "text": "to the other and replacing these spaces and the labels with bashes because that's what SNS requires for its its",
    "start": "1298440",
    "end": "1305549"
  },
  {
    "text": "labels it doesn't allow spaces in the keys so once we made that look like it's so sick of the endless chains of",
    "start": "1305549",
    "end": "1311220"
  },
  {
    "text": "callbacks whenever I try and you know you know when I run a computer program read the data process the data you know",
    "start": "1311220",
    "end": "1316799"
  },
  {
    "text": "send the data why do I have to have seven levels of call that nested deep that's that's that's so much nicer you",
    "start": "1316799",
    "end": "1323580"
  },
  {
    "text": "know if it really is for me you know when I get into that situation I constantly wonder why is it so hard for",
    "start": "1323580",
    "end": "1329700"
  },
  {
    "text": "me to Brok and do and this is really a game changer for me using node and I really enjoy actually coding with it now",
    "start": "1329700",
    "end": "1336230"
  },
  {
    "text": "once we get back to message attributes in the format we require for SNS will",
    "start": "1336230",
    "end": "1341250"
  },
  {
    "text": "create another request which has the message body in this case we're just labeling we're just saying what bucket",
    "start": "1341250",
    "end": "1347039"
  },
  {
    "text": "and key the image was detected and we're gonna send all the message attributes",
    "start": "1347039",
    "end": "1352080"
  },
  {
    "text": "that recognition detected if you wanted to you can tell recognition that you only want the top ten labels you have",
    "start": "1352080",
    "end": "1358230"
  },
  {
    "text": "some flexibility in that in this case we're gonna just capture them all and send them and then we're gonna again use",
    "start": "1358230",
    "end": "1364559"
  },
  {
    "text": "that ao8 function in order to publish the message with its attributes and then get a response the other nice aspect of",
    "start": "1364559",
    "end": "1371639"
  },
  {
    "text": "the new functionality in node 8 is it makes it easier to do try catch blocks so I can have all my logic in one try",
    "start": "1371639",
    "end": "1378269"
  },
  {
    "text": "block and catch errors here without having to do that within the the callback functions themselves so let's",
    "start": "1378269",
    "end": "1386580"
  },
  {
    "text": "take a look at what so now we have a message that we're gonna publish with a Tribune's how do we how do we express",
    "start": "1386580",
    "end": "1392309"
  },
  {
    "text": "will be showed in this diagram which is that Tim likes musicians and Sam likes skateboards well what we'll actually do",
    "start": "1392309",
    "end": "1398820"
  },
  {
    "text": "there is we'll use something called a subscription filter and this filter is",
    "start": "1398820",
    "end": "1403830"
  },
  {
    "text": "per subscriber so if Timnath if you're subscribing with your phone and i'm subscribing my phone we can have",
    "start": "1403830",
    "end": "1409860"
  },
  {
    "text": "different subscription filter topics and use the same message topic for inputs so",
    "start": "1409860",
    "end": "1415679"
  },
  {
    "text": "in this case i've expressed a simple filter which is I'm looking for a",
    "start": "1415679",
    "end": "1420779"
  },
  {
    "text": "message attributes with the label musician and I'm looking for a numeric value that's greater than 90",
    "start": "1420779",
    "end": "1427170"
  },
  {
    "text": "the way that go ahead I see the value of",
    "start": "1427170",
    "end": "1432420"
  },
  {
    "text": "the musician there is actually an array there's square brackets what's all that about that's right so the subscription",
    "start": "1432420",
    "end": "1439950"
  },
  {
    "text": "filter policy DSL the domain-specific language also supports Ian's and/or logics so I could actually have multiple",
    "start": "1439950",
    "end": "1447020"
  },
  {
    "text": "key value pairs for expressions and they would be ordered together so you could look for musicians that are greater than",
    "start": "1447020",
    "end": "1454470"
  },
  {
    "text": "90 or equal to 90 in one expression so",
    "start": "1454470",
    "end": "1459780"
  },
  {
    "text": "so let's say we've applied that to a your phone number so that you're subscribed to messages coming into a",
    "start": "1459780",
    "end": "1466380"
  },
  {
    "text": "queue and what we'll do is I saw your post recently on Portishead 90s trip pot",
    "start": "1466380",
    "end": "1471630"
  },
  {
    "text": "which I'm also a fan of so let's send this image to the s3 bucket and see what happens so here for my command line we",
    "start": "1471630",
    "end": "1478440"
  },
  {
    "text": "just have the a2 ss3 command which is going to copy that musician image into a",
    "start": "1478440",
    "end": "1483690"
  },
  {
    "text": "bucket that I'm monitoring with my lambda function and so let's let that happen though so it's a quick copy",
    "start": "1483690",
    "end": "1489750"
  },
  {
    "text": "that's gone to the SMS yeah the lambda function well that was my phone going",
    "start": "1489750",
    "end": "1497340"
  },
  {
    "text": "off and indeed there was oh yeah well you can't see this but trust me there's",
    "start": "1497340",
    "end": "1503880"
  },
  {
    "text": "a text there and it says oh it's the moment the bucket name and the name of",
    "start": "1503880",
    "end": "1509730"
  },
  {
    "text": "the video cool okay all right so so",
    "start": "1509730",
    "end": "1516690"
  },
  {
    "text": "anyway I think this is I really like this feature I think it's a very good example of where we can help customers",
    "start": "1516690",
    "end": "1522420"
  },
  {
    "text": "with the undifferentiated heavy lifting reduce code take on the management of the expressions and how we can deliver",
    "start": "1522420",
    "end": "1529350"
  },
  {
    "text": "this message for to bring value to and delight their customers um the other",
    "start": "1529350",
    "end": "1537960"
  },
  {
    "text": "example I wanted to show and talk about well hold on a sec there we have a question from Simon Walter out there",
    "start": "1537960",
    "end": "1543390"
  },
  {
    "text": "saying how much fan of kanessa Ness actually do and well that turns out to be a big number we've got a a well-known",
    "start": "1543390",
    "end": "1549480"
  },
  {
    "text": "professional sports organization that is doing you know between 5 and 10 million fan outs on particularly things a",
    "start": "1549480",
    "end": "1558120"
  },
  {
    "text": "related question well you know how much volume in SNS do and we've got customers pumping at",
    "start": "1558120",
    "end": "1564130"
  },
  {
    "text": "having topics and had like 200 thousand messages as a second notifications were supposed to call them a second pumped",
    "start": "1564130",
    "end": "1569769"
  },
  {
    "text": "into the topic now fortunately the people who are sending two hundred thousand are not the same people who are fanning out five to ten million because",
    "start": "1569769",
    "end": "1576279"
  },
  {
    "text": "that means everybody in the planet would get one every every few seconds and that probably wouldn't be friendly to the",
    "start": "1576279",
    "end": "1582669"
  },
  {
    "text": "public so great whites if it I could I",
    "start": "1582669",
    "end": "1590620"
  },
  {
    "text": "just wanted to talk about one thing that's coming that I'm excited about related to this topic and it's the fact",
    "start": "1590620",
    "end": "1597010"
  },
  {
    "text": "that in a in the end by the end of q2 and we announce this at the San Francisco summit we're actually going to",
    "start": "1597010",
    "end": "1603639"
  },
  {
    "text": "support lambda functions using SQS as an event source natively so many customers",
    "start": "1603639",
    "end": "1610450"
  },
  {
    "text": "have written polling solutions in the interim but this has been one of the number one requests from customers building service architectures and I was",
    "start": "1610450",
    "end": "1617679"
  },
  {
    "text": "speaking with the customer yesterday that represented sort of this use case where they were going to be dropping",
    "start": "1617679",
    "end": "1622929"
  },
  {
    "text": "data files into an s3 bucket of different sizes and essentially they wanted two different types of queues to",
    "start": "1622929",
    "end": "1628269"
  },
  {
    "text": "handle this one for large sizes in one for small sizes what will be able to do once lambda can talk directly to us sqs",
    "start": "1628269",
    "end": "1635289"
  },
  {
    "text": "queue is truck just like we've showed we can have an s3 event be processed by a",
    "start": "1635289",
    "end": "1640360"
  },
  {
    "text": "lambda function which can transform that and expose the size of that object to an SNS and then have different queues",
    "start": "1640360",
    "end": "1646330"
  },
  {
    "text": "subscribe to those and have sort of fast lanes or slow lanes small lanes big lanes and tight lambda functions to the",
    "start": "1646330",
    "end": "1652779"
  },
  {
    "text": "processing or ECS Fargate or other consumers of that hue and not have to run any sort of Polar's as part of the",
    "start": "1652779",
    "end": "1659620"
  },
  {
    "text": "process yeah yeah that's a win and furthermore you know you draw these these architectural diagrams and they",
    "start": "1659620",
    "end": "1666250"
  },
  {
    "text": "have lots of boxes and arrows on them but it happens pretty fast I mean you folks just just heard you saw him copy",
    "start": "1666250",
    "end": "1672159"
  },
  {
    "text": "that to s3 and you know oh and maybe 10 seconds ish later my phone went off so",
    "start": "1672159",
    "end": "1678010"
  },
  {
    "text": "that actually went through quite a few steps to get there but you know it's it's it's it's it it works fine and and",
    "start": "1678010",
    "end": "1683110"
  },
  {
    "text": "as I said you know it can scale way up so that's cool",
    "start": "1683110",
    "end": "1689279"
  },
  {
    "text": "was there something else you were gonna show us oh I was just gonna do one more mention on sort of debt that thing you",
    "start": "1689279",
    "end": "1695559"
  },
  {
    "text": "mentioned Tim about how we combine how we can create an architecture that looks like this that compute combines our",
    "start": "1695559",
    "end": "1701799"
  },
  {
    "text": "topics and our lambda functions and our Q's and one thing that I like to use is the service application model I have my",
    "start": "1701799",
    "end": "1708039"
  },
  {
    "text": "Sam t-shirt on door Sam the squirrel that represents that and here's an example actually I used to deploy that",
    "start": "1708039",
    "end": "1715119"
  },
  {
    "text": "lambda function that rung rang your phone takes an SMS topic in an s3 bucket as inputs and then I could build my",
    "start": "1715119",
    "end": "1721809"
  },
  {
    "text": "lambda function that has all the the proper it wes security restrictions and can wire it together all in a",
    "start": "1721809",
    "end": "1728850"
  },
  {
    "text": "infrastructures code that I can deploy an update on this part of the pipeline",
    "start": "1728850",
    "end": "1734909"
  },
  {
    "text": "is any of the stuff available on github or somewhere where people can see us yes so the blog that I wrote there is a",
    "start": "1741190",
    "end": "1748129"
  },
  {
    "text": "github example for this it's called the ED West service SMS fan out and again",
    "start": "1748129",
    "end": "1754100"
  },
  {
    "text": "this is showing that sort of trade off with using the fan out versus the SMS and includes the Python functions and",
    "start": "1754100",
    "end": "1760549"
  },
  {
    "text": "CloudFormation templates for to run this in your own account cool okay folks I",
    "start": "1760549",
    "end": "1767450"
  },
  {
    "text": "think we are about at the end of our script here the things we were going to talk about if there are any more",
    "start": "1767450",
    "end": "1773629"
  },
  {
    "text": "questions people want to ask now would be a good time to get them in while you do that I'm going to say that next week",
    "start": "1773629",
    "end": "1780889"
  },
  {
    "text": "we're going to be talking to somebody totally different we're moving from Atlanta to the UK and we will be talking",
    "start": "1780889",
    "end": "1787669"
  },
  {
    "text": "with the BBC British Broadcasting Corporation about some of the extremely",
    "start": "1787669",
    "end": "1793489"
  },
  {
    "text": "high volume messaging applications they're writing how things are flowing around the UK and they had some so when",
    "start": "1793489",
    "end": "1801200"
  },
  {
    "text": "I talked to them about the problems they were trying to solve they weren't the problems I thought they were going to be at all so I had my eyes",
    "start": "1801200",
    "end": "1807169"
  },
  {
    "text": "opened by that application and so check it out and it should be fun okay folks",
    "start": "1807169",
    "end": "1812749"
  },
  {
    "text": "let me just check the question channel one more time and not seeing Andy the",
    "start": "1812749",
    "end": "1819590"
  },
  {
    "text": "other Channel that's fine okay so Sam thanks for the time binky's yeah okay okay folks talk to you",
    "start": "1819590",
    "end": "1828799"
  },
  {
    "text": "next week and we have at least four more of these messaging things in the in the",
    "start": "1828799",
    "end": "1834080"
  },
  {
    "text": "weeks going forward and I hope you'll come back for some of them bye bye",
    "start": "1834080",
    "end": "1838960"
  }
]