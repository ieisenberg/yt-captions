[
  {
    "text": "all righty we'll get started then thank you for joining us today to learn how to save up to 90% and run production",
    "start": "179",
    "end": "6120"
  },
  {
    "text": "workloads on spot happy to be joined by a Nicolas Silva infrastructure leaders if this then that",
    "start": "6120",
    "end": "11309"
  },
  {
    "text": "and will wipe the CIO of Matt box and to introduce myself my name is Boyd",
    "start": "11309",
    "end": "16500"
  },
  {
    "text": "McGee key technical business development for are easy to spot business so today",
    "start": "16500",
    "end": "21600"
  },
  {
    "text": "we're going to go through and I'll get you up to speed really quickly on the fundamentals of spot and then I'm going",
    "start": "21600",
    "end": "27210"
  },
  {
    "text": "to pass it over to will so that he can take us through some of the learnings warts-and-all and how they got to a",
    "start": "27210",
    "end": "32340"
  },
  {
    "text": "point where they can run in production on spot and then I'll go through some of the new tooling that we've got that if",
    "start": "32340",
    "end": "38790"
  },
  {
    "text": "this then that has been capitalizing on over the last 12 months and then Nicolas will come up and take us through the",
    "start": "38790",
    "end": "44940"
  },
  {
    "text": "challenges the good and the bad of how to make use of those tools as well so first and foremost we're here to talk",
    "start": "44940",
    "end": "50910"
  },
  {
    "text": "about ec2 spot and how it can save you up to 90 percent off your ec2 bill but let's not forget it isn't the answer to",
    "start": "50910",
    "end": "57600"
  },
  {
    "text": "all of your questions we do have multiple business models and you know what we like to say is you should be",
    "start": "57600",
    "end": "62910"
  },
  {
    "text": "trying to have a balanced meal it's a matter of having a combination of all three of these business models to get",
    "start": "62910",
    "end": "68040"
  },
  {
    "text": "the absolute most out of ec2 and get the most bang for your buck so quick overview on demand you know pay",
    "start": "68040",
    "end": "75000"
  },
  {
    "text": "for compute it's a set rate once you get it we're never going to take it off you you can run it for as long as you'd like reserved instances an opportunity to to",
    "start": "75000",
    "end": "82080"
  },
  {
    "text": "make a commitment to Amazon and we'll make a commitment back to you that will have that capacity available and we'll also give you a significant discount up",
    "start": "82080",
    "end": "87750"
  },
  {
    "text": "to 70 75 percent and then finally spot spot is our unused ec2 capacity that",
    "start": "87750",
    "end": "94290"
  },
  {
    "text": "where we let the market determine the price and so with spot the rules are relatively simple as I said there is a",
    "start": "94290",
    "end": "100860"
  },
  {
    "text": "minimum price that you're going to pay normally around about 90 percent off and then the market changes based on supply and demand supply is unused on-demand",
    "start": "100860",
    "end": "107909"
  },
  {
    "text": "capacity and the demand is spot customers and then obviously also on-demand customers because they can",
    "start": "107909",
    "end": "113009"
  },
  {
    "text": "shrink that total supply curve the way spot works is you bid on this",
    "start": "113009",
    "end": "118469"
  },
  {
    "text": "capacity okay and the way the bidding mechanism works is very important you never pay more than what you'd bid but",
    "start": "118469",
    "end": "124799"
  },
  {
    "text": "in fact you very rarely pay your bid you pay the prevailing market rate so what that means is if you bid $1 for an",
    "start": "124799",
    "end": "130979"
  },
  {
    "text": "instance and the current market rate is $0.10 you pay 10 cents for that instance okay then if the market rate goes up and",
    "start": "130979",
    "end": "137580"
  },
  {
    "text": "it changes based on the supply and demand mechanism and the price goes up let's say to a dollar and ten cents we",
    "start": "137580",
    "end": "143490"
  },
  {
    "text": "give you a two-minute warning to do whatever you can wrap up your work detach yourself from a load balancer tell your scheduler hey I'm going down",
    "start": "143490",
    "end": "150180"
  },
  {
    "text": "and then we relatively unceremoniously we'll take that server away from you",
    "start": "150180",
    "end": "155540"
  },
  {
    "text": "so one of the most important things to understand about spotting these are sort of I go through the two really important",
    "start": "155540",
    "end": "161160"
  },
  {
    "text": "ninja tips here before you get started with spot the most important thing actually is almost irrelevant from spot",
    "start": "161160",
    "end": "166890"
  },
  {
    "text": "or separate from spot entirely and that's how we deploy capacity and how it makes itself available to our customers so",
    "start": "166890",
    "end": "173900"
  },
  {
    "text": "most people normally will recognize how you've got multiple availability zones that are different clusters of data",
    "start": "173900",
    "end": "179640"
  },
  {
    "text": "centers so pretty quickly you'll work out well they're obviously going to have different supply of unused capacity and",
    "start": "179640",
    "end": "184680"
  },
  {
    "text": "probably a different price point as well okay so that's what we're representing up here we've got 1a 1b 1c so it's a",
    "start": "184680",
    "end": "190470"
  },
  {
    "text": "region that has three availability zones again hopefully you can pretty quickly work out the price is going to be different there and then let's just take",
    "start": "190470",
    "end": "198540"
  },
  {
    "text": "one instance family right c3 hopefully everybody's familiar with the c3 instance class it's a compute intensive",
    "start": "198540",
    "end": "203840"
  },
  {
    "text": "instance family that we want launched several years ago now in that family there's five different sizes and then",
    "start": "203840",
    "end": "211320"
  },
  {
    "text": "those three availability zones each of these markets is completely independent from one another which means the price",
    "start": "211320",
    "end": "218040"
  },
  {
    "text": "that you pay and the availability of these instances is completely independent for spot customers now this",
    "start": "218040",
    "end": "223410"
  },
  {
    "text": "is super important because what I'm going to talk about is this idea that instance flexibility is king when it",
    "start": "223410",
    "end": "228540"
  },
  {
    "text": "comes to leveraging spot in production and certainly going to hear the same thing from from these gentlemen shortly I'm sure",
    "start": "228540",
    "end": "234170"
  },
  {
    "text": "and the reason I raise this at this point this instance flexibility concept is what I'll say to you is you're almost",
    "start": "234170",
    "end": "240510"
  },
  {
    "text": "certainly more instance flexible than you think right now because what a lot of customers will say is no Boyd there's",
    "start": "240510",
    "end": "245850"
  },
  {
    "text": "no way I could use a different instance type I've optimized for c3 for Excel and then I'll say to them well if we go look",
    "start": "245850",
    "end": "252000"
  },
  {
    "text": "at c3 well not that one ignore the targa just spun if we look at c3 8xl in 1b",
    "start": "252000",
    "end": "258299"
  },
  {
    "text": "you'll notice that's actually cheaper than the c3 for excel in 1b because the",
    "start": "258299",
    "end": "263849"
  },
  {
    "text": "price is determined by supply and demand there in the pendant curves so surely surely if I gave you double the compute",
    "start": "263849",
    "end": "271200"
  },
  {
    "text": "double the disk double the memory double the network it's not going to break your application and if it's still a 70 75",
    "start": "271200",
    "end": "277380"
  },
  {
    "text": "percent discount then the cost of running C 3 for Excel is on demand I really hope you're not still going to",
    "start": "277380",
    "end": "282450"
  },
  {
    "text": "sit there and tell me there's no way I'm not instance flexible so when talking about instance flex flexibility remember",
    "start": "282450",
    "end": "288900"
  },
  {
    "text": "significant discounts come along with this so it changes how you should think about flexibility and instances",
    "start": "288900",
    "end": "295100"
  },
  {
    "text": "ok the next book the next super important thing is the fact that I've",
    "start": "295100",
    "end": "301440"
  },
  {
    "text": "already made this point you do not pay your bid you pay the current market rate and so if we do a quick simulation here",
    "start": "301440",
    "end": "308850"
  },
  {
    "text": "we've got one instance the r34 Excel in u.s. East one D running for a week and",
    "start": "308850",
    "end": "314160"
  },
  {
    "text": "we said you know if we bid just a quarter of the on-demand price what would I how many times would I've been",
    "start": "314160",
    "end": "320490"
  },
  {
    "text": "interrupted and what would I have actually paid what would have been the discount that I achieved throughout this period so every time the Green Line",
    "start": "320490",
    "end": "327060"
  },
  {
    "text": "breaks through that black line that was a time when we would have given you a two-minute warning and we would have taken the instance away from you so four",
    "start": "327060",
    "end": "333120"
  },
  {
    "text": "or five times throughout the week you would have been interrupted but you would have gotten a discount of 86% so",
    "start": "333120",
    "end": "338910"
  },
  {
    "text": "pretty compelling discount I'm sure but I have few interruptions that you're going to have to handle well what about",
    "start": "338910",
    "end": "344550"
  },
  {
    "text": "if we did 50% of on demand we paid 50% of on demand hopefully it's pretty obvious the Green Line breaks through it",
    "start": "344550",
    "end": "350010"
  },
  {
    "text": "only once now so one interruption in a week but because we do not pay our bid we pay the prevailing market rate I got",
    "start": "350010",
    "end": "357120"
  },
  {
    "text": "a discount of 85 percent so negligible change in the discount I achieved but I",
    "start": "357120",
    "end": "362460"
  },
  {
    "text": "was able to go down from four or five interruptions to just one final simulation what about if I bid 75% of",
    "start": "362460",
    "end": "369870"
  },
  {
    "text": "the on demand price I can't show you the on demand price because it never went to that price throughout this week but if I",
    "start": "369870",
    "end": "374910"
  },
  {
    "text": "bid 75% of the on demand price not one interruption in the entire week and the",
    "start": "374910",
    "end": "381480"
  },
  {
    "text": "discount was still 85% so the discount didn't change so ninja tip number two no capacity pools",
    "start": "381480",
    "end": "389100"
  },
  {
    "text": "is the first one understand that there are multiple capacity pools and we don't run out of spot we run out of specific",
    "start": "389100",
    "end": "394140"
  },
  {
    "text": "capacity pools from time to time the second ninja tip is just bit around about the on-demand price when you're",
    "start": "394140",
    "end": "399690"
  },
  {
    "text": "getting started you're going to ride out most of the interruptions it's very unlikely to get interrupted particularly",
    "start": "399690",
    "end": "405450"
  },
  {
    "text": "often the price can go above on demand so you could still be interrupted but you're going to ride out any of these small fluctuations and you're going to",
    "start": "405450",
    "end": "411600"
  },
  {
    "text": "get an awesome discount you're going to get a significant discount almost the exact same as you get if you spent a lot",
    "start": "411600",
    "end": "417630"
  },
  {
    "text": "of time working out what's the optimal bidding strategy so just bid the on demand price then last slide before I",
    "start": "417630",
    "end": "424560"
  },
  {
    "text": "hand over hand over to will I want to run you through quickly and this is going to be a recurring theme that we'll",
    "start": "424560",
    "end": "430560"
  },
  {
    "text": "see which is okay so we're going to become instance flexible we understand that what else do I need to do to make",
    "start": "430560",
    "end": "435780"
  },
  {
    "text": "use of spot you need to be stateless you need to be fault tolerant you should be multi",
    "start": "435780",
    "end": "441570"
  },
  {
    "text": "Aisyah possible because that standard ec2 best practice right you should be loosely coupled if at all possible as",
    "start": "441570",
    "end": "446700"
  },
  {
    "text": "well and again these are ec2 best practices these are probably things that you're aspiring to achieve regardless of",
    "start": "446700",
    "end": "452940"
  },
  {
    "text": "whether you're looking at whether you can make use of ec2 spot so all that I'm going to ask you to do once you've gone",
    "start": "452940",
    "end": "458790"
  },
  {
    "text": "and done the fundamentals once you've done the best practice for cloud is introduce some instance flexibility to",
    "start": "458790",
    "end": "464790"
  },
  {
    "text": "make use of spot and with that I'll hand over to will cool thank you",
    "start": "464790",
    "end": "472850"
  },
  {
    "text": "thanks Boyd and thanks for for having me to speak today I my name is will I work",
    "start": "472850",
    "end": "480360"
  },
  {
    "text": "at matte box I'm on the platform team and and Matt box is about adding location to any application so we",
    "start": "480360",
    "end": "489090"
  },
  {
    "text": "make customizable services that that make it easy for developers to add location to their apps",
    "start": "489090",
    "end": "495170"
  },
  {
    "text": "that includes things like maps which help you see the world in stunning detail geocoding or search that helps",
    "start": "495170",
    "end": "502350"
  },
  {
    "text": "you find places and addresses and things like directions which helps you get from point A to point B",
    "start": "502350",
    "end": "509270"
  },
  {
    "text": "all of our tools are delivered as as a developer friendly SDKs and",
    "start": "509270",
    "end": "516469"
  },
  {
    "text": "that can really just drop right into an app and you could start integration really quickly and together our goal is",
    "start": "516470",
    "end": "523680"
  },
  {
    "text": "the the goal with the tools is to help change the way people move around the world we're powering over",
    "start": "523680",
    "end": "530900"
  },
  {
    "text": "55,000 applications ranging from in categories from social",
    "start": "530900",
    "end": "536040"
  },
  {
    "text": "turn up to mobility and some of the biggest brands on the web",
    "start": "536040",
    "end": "541110"
  },
  {
    "text": "with with with over a quarter billion users every month unique users every",
    "start": "541110",
    "end": "546780"
  },
  {
    "text": "month and that number is growing [Music] those brands include The Weather Channel",
    "start": "546780",
    "end": "552900"
  },
  {
    "text": "so they use our SDK to render animated satellite and radar maps and they also",
    "start": "552900",
    "end": "558450"
  },
  {
    "text": "use our search our geo coder to help people find the weather for locations quickly",
    "start": "558450",
    "end": "564080"
  },
  {
    "text": "Airbnb they use us on the web and they use a custom marker to help people see",
    "start": "564080",
    "end": "569430"
  },
  {
    "text": "where property is available to rent CNN helps people understand where news",
    "start": "569430",
    "end": "575460"
  },
  {
    "text": "is happening with it with a custom satellite layer and a custom street map layer that's optimized for data",
    "start": "575460",
    "end": "581220"
  },
  {
    "text": "visualization and finally someone like National Geographic",
    "start": "581220",
    "end": "586730"
  },
  {
    "text": "they have a gorgeous city guides app that helps guide people on walking tours",
    "start": "586730",
    "end": "593400"
  },
  {
    "text": "of the world's most iconic cities so these are a few of our customers that that use matte box and sort of give you",
    "start": "593400",
    "end": "600570"
  },
  {
    "text": "a sense of how they use map box and in order to power these these use cases we we need to process a lot of data so",
    "start": "600570",
    "end": "607910"
  },
  {
    "text": "what we're doing is we're taking data from the quarter bill quarter billion",
    "start": "607910",
    "end": "613380"
  },
  {
    "text": "users who are using our SDK and we're anonymizing that aggregating that data",
    "start": "613380",
    "end": "618570"
  },
  {
    "text": "and snapping it to the road network to identify missing streets to build",
    "start": "618570",
    "end": "624570"
  },
  {
    "text": "traffic profiles so we know where traffic congestion is over time both historic and real-time and so the maps",
    "start": "624570",
    "end": "632820"
  },
  {
    "text": "are made of billions of individual points and we need to aggregate these points and snap",
    "start": "632820",
    "end": "641940"
  },
  {
    "text": "them through a road network so that we have clean smooth lines that that we can",
    "start": "641940",
    "end": "647340"
  },
  {
    "text": "turn into a map or turn into a traffic flow file so those billions of points end up turning into these these loop",
    "start": "647340",
    "end": "655320"
  },
  {
    "text": "very very detailed geometry is that that even go down in this example to the lane the lane level",
    "start": "655320",
    "end": "662250"
  },
  {
    "text": "and we're collecting about 100 million miles worth of data every day so billions of points cleaned up filtered",
    "start": "662250",
    "end": "669420"
  },
  {
    "text": "translates into about a hundred million miles of road network coverage every day so at its core it extends beyond those",
    "start": "669420",
    "end": "677550"
  },
  {
    "text": "those probe points we we work with other types of sensor data as well so at its",
    "start": "677550",
    "end": "683640"
  },
  {
    "text": "core matte box works by taking sensor data that's the data from our SDK data",
    "start": "683640",
    "end": "688710"
  },
  {
    "text": "from vehicles data from satellites drones whatever and processing it into a format that is consumable on our API so",
    "start": "688710",
    "end": "696510"
  },
  {
    "text": "it all starts with with Amazon Kinesis we process that data stream that data",
    "start": "696510",
    "end": "703050"
  },
  {
    "text": "through Kinesis to consumers and those consumers are typically running on a spot fleet or an auto scaling group",
    "start": "703050",
    "end": "711830"
  },
  {
    "text": "so then that data is delivered to our persistence layer so we have our for",
    "start": "711830",
    "end": "717450"
  },
  {
    "text": "persistence we're typically using DynamoDB or s3 and then finally we serve",
    "start": "717450",
    "end": "723000"
  },
  {
    "text": "that data back out that process data we serve that back out using again spot fleet or auto scaling we use route 53",
    "start": "723000",
    "end": "730830"
  },
  {
    "text": "and cloud front to accelerate our optimized load balance to different",
    "start": "730830",
    "end": "736290"
  },
  {
    "text": "regions we're running in ten different regions so talk about that second and and also just to cloud front to",
    "start": "736290",
    "end": "743760"
  },
  {
    "text": "accelerate our API so as far as compute goes our compute",
    "start": "743760",
    "end": "749820"
  },
  {
    "text": "hours in the last year has increased by over a thousand percent compared to the",
    "start": "749820",
    "end": "757110"
  },
  {
    "text": "previous year and we're on track to do over 500 million hours of compute this",
    "start": "757110",
    "end": "764250"
  },
  {
    "text": "year it's pretty pretty massive amount of pretty massive amount of data processing",
    "start": "764250",
    "end": "769530"
  },
  {
    "text": "and that's both on the data processing side and on the API side so whether we're ingesting data and and getting it",
    "start": "769530",
    "end": "776670"
  },
  {
    "text": "ready to serve out or we're actually serving it out to customers like The Weather Channel so despite this this massive amount of",
    "start": "776670",
    "end": "784530"
  },
  {
    "text": "computing our margins actually increased and the way we accomplish this was with a",
    "start": "784530",
    "end": "789990"
  },
  {
    "text": "spot so here's a little look at how that actually looks this is the top graph is",
    "start": "789990",
    "end": "795300"
  },
  {
    "text": "the number of compute hours that that we're doing over this time period I think this is 30 day sorry no this is",
    "start": "795300",
    "end": "801240"
  },
  {
    "text": "like this is three months and meanwhile you see some some punctuation as we're",
    "start": "801240",
    "end": "806910"
  },
  {
    "text": "testing things out but overall are you're not seeing the hockey stick growth curve that you see on the top",
    "start": "806910",
    "end": "812160"
  },
  {
    "text": "graph the bottom graph is the cost what we actually spend so pretty pretty incredible how we're",
    "start": "812160",
    "end": "818519"
  },
  {
    "text": "able to actually increase our margins reduce cogs and optimize using spot",
    "start": "818519",
    "end": "824690"
  },
  {
    "text": "spots really enabling in this case enabling things that us to do this processing it just wouldn't be possible",
    "start": "824690",
    "end": "830339"
  },
  {
    "text": "otherwise you know we wouldn't actually be able to build some of the products that we have without without spot enabling it with",
    "start": "830339",
    "end": "838079"
  },
  {
    "text": "the cost savings so a lot of times is sort of going back to what Boyd was talking about a couple minutes ago a lot",
    "start": "838079",
    "end": "843660"
  },
  {
    "text": "of I get this question a lot you know how much did you have to change about your infrastructure in order to",
    "start": "843660",
    "end": "849990"
  },
  {
    "text": "switch to spot well luckily for us we're sort of born in the cloud we've been using Amazon since 2007 and so we sort",
    "start": "849990",
    "end": "860190"
  },
  {
    "text": "of have evolved as as well as we've gone and we've followed those best practices that that boy has talked about so the",
    "start": "860190",
    "end": "866730"
  },
  {
    "text": "answer is really if whether you're starting something new and building from the ground up or you're",
    "start": "866730",
    "end": "873350"
  },
  {
    "text": "trying to migrate a system to AWS the general rule is to just follow best",
    "start": "873350",
    "end": "879420"
  },
  {
    "text": "general best practices for using ec2 for using AWS and and it makes it much much",
    "start": "879420",
    "end": "885480"
  },
  {
    "text": "easier to use spot instances so those best practices from my perspective are",
    "start": "885480",
    "end": "891890"
  },
  {
    "text": "diversification is critical diversify across availability zones like use those availability zones diversify across",
    "start": "891890",
    "end": "898500"
  },
  {
    "text": "regions this is we do this for not only for diversification purposes but we're running in ten different regions all",
    "start": "898500",
    "end": "904680"
  },
  {
    "text": "around the world for performance you know the latency between here and Australia is not insignificant",
    "start": "904680",
    "end": "912449"
  },
  {
    "text": "so we in order to provide a good quality of service for those customers in Australia we need to have a Sydney",
    "start": "912449",
    "end": "918990"
  },
  {
    "text": "region running but the nice thing about that is also gives us a whole new dimension of diversity and also",
    "start": "918990",
    "end": "925230"
  },
  {
    "text": "diversify the types of instances that you use as Boyd was talking about second one I'll mention is reduce your",
    "start": "925230",
    "end": "932130"
  },
  {
    "text": "cold start time so that means making introducing more statelessness into your",
    "start": "932130",
    "end": "938490"
  },
  {
    "text": "application where possible and simply having your application be able to come to life and start handling requests or",
    "start": "938490",
    "end": "945300"
  },
  {
    "text": "processing data or whatever you're doing make that happen faster and",
    "start": "945300",
    "end": "950510"
  },
  {
    "text": "finally break breaking up large jobs into smaller pieces so so I'll walk",
    "start": "950510",
    "end": "955649"
  },
  {
    "text": "through each of these so we as I mentioned we have those 10 10",
    "start": "955649",
    "end": "961140"
  },
  {
    "text": "isolated regions as more regions come online use those and multiple",
    "start": "961140",
    "end": "966810"
  },
  {
    "text": "availability zones each region has at least two availability zones and the the",
    "start": "966810",
    "end": "973800"
  },
  {
    "text": "markets are are segmented along that dimension so you'll you're going to be",
    "start": "973800",
    "end": "978959"
  },
  {
    "text": "less susceptible to price spikes in the or other types of outages or incidents if you simply",
    "start": "978959",
    "end": "986820"
  },
  {
    "text": "spread your application across multiple availability zones and and multiple instance types as well",
    "start": "986820",
    "end": "993620"
  },
  {
    "text": "spot fleet is a great tool for this you can use this for bidding on on multiple instance types very easily and",
    "start": "993920",
    "end": "1001899"
  },
  {
    "text": "ECS is an incredible tool for this I think if you're thinking about moving an",
    "start": "1001899",
    "end": "1007459"
  },
  {
    "text": "application or building a new application definitely definitely use docker and ACS because it makes that",
    "start": "1007459",
    "end": "1014180"
  },
  {
    "text": "that the challenge of running an application",
    "start": "1014180",
    "end": "1019220"
  },
  {
    "text": "on any type of instance much much easier to overcome so an ECS handles all of the sort of",
    "start": "1019220",
    "end": "1027050"
  },
  {
    "text": "scheduling complexities we built a tool as well in addition to",
    "start": "1027050",
    "end": "1032870"
  },
  {
    "text": "spot fleet we also built a tool that helps us activate a backup on demand",
    "start": "1032870",
    "end": "1039650"
  },
  {
    "text": "capacity so this is mainly for this can be used for data processing on the data processing side of things but we mainly",
    "start": "1039650",
    "end": "1045918"
  },
  {
    "text": "are using this on our API because our API needs to be highly available h a and",
    "start": "1045919",
    "end": "1052150"
  },
  {
    "text": "in order to have it BHA we it always has to be online so basically we built a system that allows",
    "start": "1052150",
    "end": "1058730"
  },
  {
    "text": "us to use the termination notifications that are available from within each spot",
    "start": "1058730",
    "end": "1065059"
  },
  {
    "text": "instance week and detect when when an instance is about to be terminated with a two-minute warning we tagged that",
    "start": "1065059",
    "end": "1071510"
  },
  {
    "text": "instance and then we run a lambda function that does some heuristics over",
    "start": "1071510",
    "end": "1077570"
  },
  {
    "text": "which instances are tagged and we can figure out if we're getting to a point where we need to spin up on demand",
    "start": "1077570",
    "end": "1084380"
  },
  {
    "text": "capacity to to stay online so this is sort of our our absolute backup plan if",
    "start": "1084380",
    "end": "1091190"
  },
  {
    "text": "our spot fleet starts to lose capacity too quickly we we have we can sleep well",
    "start": "1091190",
    "end": "1096380"
  },
  {
    "text": "at night knowing that our on-demand capacity will come in and temporarily backfill at a higher price our spot",
    "start": "1096380",
    "end": "1105380"
  },
  {
    "text": "capacity and the nice thing about this is that when the spikes when a spot interrupts interruption ends we will",
    "start": "1105380",
    "end": "1112910"
  },
  {
    "text": "shut down the more expensive on-demand instances and we'll we'll go back to we'll go back to spot so this is what",
    "start": "1112910",
    "end": "1119630"
  },
  {
    "text": "this looks like is a little animation we got the blue is our spot instances and the the orange is our the on-demand",
    "start": "1119630",
    "end": "1127310"
  },
  {
    "text": "instances and as we lose those spot instances we start up on demand instances and you can see our price our",
    "start": "1127310",
    "end": "1133880"
  },
  {
    "text": "average price in the top left goes up and then as we recover it goes back down",
    "start": "1133880",
    "end": "1139520"
  },
  {
    "text": "our prior Burrage price per hour so this is a tool we've built internally and",
    "start": "1139520",
    "end": "1144980"
  },
  {
    "text": "that's but it's a pretty straightforward thing to do and it's a very very useful",
    "start": "1144980",
    "end": "1151820"
  },
  {
    "text": "technique okay reducing your cold start time this",
    "start": "1151820",
    "end": "1156830"
  },
  {
    "text": "is again ECS is a great tool for this baked baking your software into an ami",
    "start": "1156830",
    "end": "1164530"
  },
  {
    "text": "whatever software you need to load onto your easy to bake that into an ami or",
    "start": "1164530",
    "end": "1170450"
  },
  {
    "text": "better yet a docker a docker image to get that on the instance very fast minimize state so if you can avoid using",
    "start": "1170450",
    "end": "1177770"
  },
  {
    "text": "the disks on the ec2 if possible so a lot of our api is backed by dynamodb",
    "start": "1177770",
    "end": "1185000"
  },
  {
    "text": "it's backed by s3 or Kinesis or something like ElastiCache",
    "start": "1185000",
    "end": "1190300"
  },
  {
    "text": "minimizing state on the instance so that we have more stateless machines this is going to just make your your instance",
    "start": "1190300",
    "end": "1195980"
  },
  {
    "text": "boot time faster and the goal should be to bootstrap in less than 2 minutes because that with that termination",
    "start": "1195980",
    "end": "1201110"
  },
  {
    "text": "notification is if you can get fasten that that's that's even better and once again another plug for UCS you can",
    "start": "1201110",
    "end": "1208670"
  },
  {
    "text": "deploy in seconds instead of minutes with UCS and this has been this this is important when every what every second",
    "start": "1208670",
    "end": "1215360"
  },
  {
    "text": "counts the next the next best practice is breaking up large jobs this applies",
    "start": "1215360",
    "end": "1221870"
  },
  {
    "text": "square this firmly on the data processing side of things not so much on the API side but the data processing",
    "start": "1221870",
    "end": "1228440"
  },
  {
    "text": "side for sure so a lot of people I see have a very long running batch jobs that",
    "start": "1228440",
    "end": "1233780"
  },
  {
    "text": "that can take you know here's one that's like 15 hours right you can run it on an instance it takes going to start to",
    "start": "1233780",
    "end": "1239090"
  },
  {
    "text": "finish it's going to take 15 hours what if you take that same job and you find a way to break it up into",
    "start": "1239090",
    "end": "1244600"
  },
  {
    "text": "smaller chunks and then you can arbitrarily distribute that job across",
    "start": "1244600",
    "end": "1250610"
  },
  {
    "text": "instead of one instance three instances and that reduces your time to five hours",
    "start": "1250610",
    "end": "1257390"
  },
  {
    "text": "you still use you still use the same amount of computing hours but",
    "start": "1257390",
    "end": "1262420"
  },
  {
    "text": "the benefit is that you can iterate faster so if you're working on data processing software you can iterate on",
    "start": "1262420",
    "end": "1269090"
  },
  {
    "text": "that software a lot faster and the you can sort of control how quickly",
    "start": "1269090",
    "end": "1277130"
  },
  {
    "text": "the work gets done so you don't have to wait 15 hours you can have it be done in five hours or one hour if you want you",
    "start": "1277130",
    "end": "1283730"
  },
  {
    "text": "just have to scale up horizontally the other advantage here with short jobs",
    "start": "1283730",
    "end": "1289910"
  },
  {
    "text": "is that it minimizes the blast radius of a failure so let's take that 15 hour job",
    "start": "1289910",
    "end": "1295130"
  },
  {
    "text": "and you look at the failure that occurs where that red line is you're going to",
    "start": "1295130",
    "end": "1300230"
  },
  {
    "text": "lose what 14 and a half hours worth of work and you have to go back to the beginning and start over if you can break up your jobs into",
    "start": "1300230",
    "end": "1308540"
  },
  {
    "text": "smaller pieces you're checkpointing more often and then if you look at what what's lost in this situation it's very",
    "start": "1308540",
    "end": "1315470"
  },
  {
    "text": "very minimal and you can just pick right back up where you where you left off and in the long run it saves even more money",
    "start": "1315470",
    "end": "1321710"
  },
  {
    "text": "so this is just a great architecture and decision just to really drive this point home I wanted to walk through an example",
    "start": "1321710",
    "end": "1327590"
  },
  {
    "text": "of what you know one way we would think about breaking up a file this works with images works with a few other",
    "start": "1327590",
    "end": "1334190"
  },
  {
    "text": "types of files but the easiest one of course is as always as a text file so take a text file with 10 million lines",
    "start": "1334190",
    "end": "1340669"
  },
  {
    "text": "of log messages or something like that and let's say you want to process it in",
    "start": "1340669",
    "end": "1345919"
  },
  {
    "text": "batches of 10,000 lines so you just take the total number of lines divided by",
    "start": "1345919",
    "end": "1350929"
  },
  {
    "text": "10,000 generate an sqs message for each each of those 10,000 lime chunks so that",
    "start": "1350929",
    "end": "1358519"
  },
  {
    "text": "gives you a thousand messages lambda is a great way to actually do that so we have we use lambda we'll send",
    "start": "1358519",
    "end": "1365090"
  },
  {
    "text": "a file to a lambda function have Landa lambda count the lines in a file for example and then have lambda fire off",
    "start": "1365090",
    "end": "1372289"
  },
  {
    "text": "bulk messages into sqs to generate those a thousand messages it's a really nice",
    "start": "1372289",
    "end": "1378409"
  },
  {
    "text": "way to have a sort of a serverless utility for creating those jobs and then",
    "start": "1378409",
    "end": "1385159"
  },
  {
    "text": "once once so a worker actually starts grabs one of those jobs from the queue from the work queue",
    "start": "1385159",
    "end": "1392289"
  },
  {
    "text": "just have them download that they all download the same file it's the only difference is they start reading you",
    "start": "1392289",
    "end": "1398840"
  },
  {
    "text": "know whatever specified line that that has been instructed in the job so everybody has the same file it's just",
    "start": "1398840",
    "end": "1405379"
  },
  {
    "text": "that they're reading different parts of the file and this ends up ends ups allowing you to distribute arbitrarily",
    "start": "1405379",
    "end": "1411700"
  },
  {
    "text": "across a lot more ec2 x' so and then of",
    "start": "1411700",
    "end": "1416779"
  },
  {
    "text": "course deliver the output to s3 any reduce operation that you need to do you can sort of do as a as a final step you",
    "start": "1416779",
    "end": "1423500"
  },
  {
    "text": "know so you're going to end up on with with 10000 outputs or sorry 1000 outputs",
    "start": "1423500",
    "end": "1428990"
  },
  {
    "text": "one for each message sitting on s3 and you can sort of do a reduce operation where you roll that up into to something",
    "start": "1428990",
    "end": "1436789"
  },
  {
    "text": "something final so overall the impact of our usage of spot has been has been",
    "start": "1436789",
    "end": "1444200"
  },
  {
    "text": "pretty incredible between the use of spot fleet and spot",
    "start": "1444200",
    "end": "1449419"
  },
  {
    "text": "swap the tool we built internally as the backup spot and drop shins are are generally pretty rare and",
    "start": "1449419",
    "end": "1456429"
  },
  {
    "text": "where we normally see that fallback being triggered one to two times a month",
    "start": "1456429",
    "end": "1461889"
  },
  {
    "text": "and actually these slides are a little old I think like we haven't seen a spot",
    "start": "1461889",
    "end": "1467570"
  },
  {
    "text": "interruption in quite a long time because we've been running on a lot of distributed instance types",
    "start": "1467570",
    "end": "1473120"
  },
  {
    "text": "most of the time 98% of the time we're running on discounted spot instances and",
    "start": "1473120",
    "end": "1478500"
  },
  {
    "text": "we're seeing 90% savings and easy to costs each month and that's just on our map service alone if you look at all the",
    "start": "1478500",
    "end": "1484860"
  },
  {
    "text": "other services the the savings vary a little bit but 90 90 percent is is pretty typical for what we've been",
    "start": "1484860",
    "end": "1491130"
  },
  {
    "text": "seeing I want to wrap up my segment here with a little bit of a couple cost",
    "start": "1491130",
    "end": "1497730"
  },
  {
    "text": "gotchas especially when it comes to data processing when you get start getting in the hang",
    "start": "1497730",
    "end": "1504240"
  },
  {
    "text": "of using spot and you're used to having really really cheap access to ec2 s you're going to want to run a lot of",
    "start": "1504240",
    "end": "1510030"
  },
  {
    "text": "them and one thing to watch out for is any cost that isn't discounted along with spot",
    "start": "1510030",
    "end": "1516860"
  },
  {
    "text": "that is applied per instance so this is things like little costs that add up",
    "start": "1516860",
    "end": "1523230"
  },
  {
    "text": "like detailed monitoring is one that that we you know it's like oh it's a",
    "start": "1523230",
    "end": "1528830"
  },
  {
    "text": "half a cent per hour on an ec2 sure turn it on we've had it on on every single",
    "start": "1528830",
    "end": "1534060"
  },
  {
    "text": "ec2 in our on our fleet we had it on by default and then when we started running",
    "start": "1534060",
    "end": "1539960"
  },
  {
    "text": "thousands and thousands of instances or doing two million hours worth of computing in a week or a month it adds",
    "start": "1539960",
    "end": "1547710"
  },
  {
    "text": "up very quickly so heads up on those types of costs turn off if you can turn",
    "start": "1547710",
    "end": "1555030"
  },
  {
    "text": "off detailed monitoring because you know you'll end up with a big bill and finally the EBS volumes still still",
    "start": "1555030",
    "end": "1562410"
  },
  {
    "text": "billed at full price on spot so that's that includes instance EBS volumes that you attach to an instance using a like a",
    "start": "1562410",
    "end": "1569910"
  },
  {
    "text": "block mapping block device mapping or even if you're using a UV s route volume",
    "start": "1569910",
    "end": "1575520"
  },
  {
    "text": "those are still charged at full price so think about let's say you have an on-demand instance that you normally get",
    "start": "1575520",
    "end": "1581400"
  },
  {
    "text": "for you know 60 cents an hour if you're getting that for five cents or 10 cents an hour your EBS volumes still going to",
    "start": "1581400",
    "end": "1588180"
  },
  {
    "text": "be full price so watch out if you spin up a thousand instances your EVs bill",
    "start": "1588180",
    "end": "1593340"
  },
  {
    "text": "keep it under control by using instance store that's what we use across the",
    "start": "1593340",
    "end": "1598410"
  },
  {
    "text": "board for both our API and data processing and with that I'll turn it back over to you Boyd thank you for those wondering",
    "start": "1598410",
    "end": "1605940"
  },
  {
    "text": "the EBS root volume if you turn on ten thousand servers and then they get terminated we terminate the EBS volumes",
    "start": "1605940",
    "end": "1612250"
  },
  {
    "text": "for you as well because you don't want you to have to waste time going back and terminating them that's a peculiarities",
    "start": "1612250",
    "end": "1617800"
  },
  {
    "text": "of spot because hopefully wills got you excited about some of the prospects of spots so if you're thinking well what",
    "start": "1617800",
    "end": "1624100"
  },
  {
    "text": "would I do next I've never used spot before I've never had an experience with spot what do I do next what's the first thing I do I've got my phone open right",
    "start": "1624100",
    "end": "1631270"
  },
  {
    "text": "now I'd encourage you to go and google ec2 spot bed advisor okay the spot bid",
    "start": "1631270",
    "end": "1637240"
  },
  {
    "text": "advisor is a tool that we built early last year to help customers discover the instances that suit them and so it's a",
    "start": "1637240",
    "end": "1644440"
  },
  {
    "text": "tool where you can put in the minimum specifications for your application and what would you be willing to pay as a",
    "start": "1644440",
    "end": "1650410"
  },
  {
    "text": "percentage of on-demand and then we'll spit out not only the discount that you would have achieved but also what was",
    "start": "1650410",
    "end": "1655990"
  },
  {
    "text": "the average lifetime of that instance over the last month and last week and that's the two columns that we see here",
    "start": "1655990",
    "end": "1661840"
  },
  {
    "text": "so we're saying it in north California next and I was willing to pay just 50%",
    "start": "1661840",
    "end": "1668830"
  },
  {
    "text": "of on-demand no more than that remember what I bid is not what I pay what I bid is the maximum willing to pay and I said",
    "start": "1668830",
    "end": "1674470"
  },
  {
    "text": "I need a server that has at least four V CPUs and seven gigs of memory well what",
    "start": "1674470",
    "end": "1680470"
  },
  {
    "text": "you can see is there's a whole host that show up is low that meter exceed those specifications what low means is not",
    "start": "1680470",
    "end": "1686740"
  },
  {
    "text": "once during the analysis period would you have been interrupted so we can see there's some low instances showing up",
    "start": "1686740",
    "end": "1693190"
  },
  {
    "text": "for is both month and week okay so when you're thinking about the the workloads that may be suitable for this you're",
    "start": "1693190",
    "end": "1698980"
  },
  {
    "text": "thinking I can handle interruption but I can't handle regular interruption it can't be happening every 20 minutes",
    "start": "1698980",
    "end": "1704470"
  },
  {
    "text": "otherwise my batch job would never finish come and sanity check your thoughts because what you'll find is a lot of spot instances live for a",
    "start": "1704470",
    "end": "1710740"
  },
  {
    "text": "significantly longer time than that and we can see down that mule column all of these loads are showing up there's",
    "start": "1710740",
    "end": "1715960"
  },
  {
    "text": "ninety one ninety one eighty two eighty one and eighty nine percent discount over the on-demand price so when you",
    "start": "1715960",
    "end": "1723070"
  },
  {
    "text": "starting to think how do I get started how do I have a good experience with spot first go around go to the spot bit",
    "start": "1723070",
    "end": "1728560"
  },
  {
    "text": "advisor check it out and then what you'll see is well there could be many and Boyd stood up Aaron",
    "start": "1728560",
    "end": "1734440"
  },
  {
    "text": "and will so as well and told you diversity is so important and so how do I handle that diversity how do I deal",
    "start": "1734440",
    "end": "1739840"
  },
  {
    "text": "with that in an automated fashion because we know that nobody wants to stay up at night you know managing",
    "start": "1739840",
    "end": "1745419"
  },
  {
    "text": "flipping auto-scaling groups and making sure that the right instance is running at the right time",
    "start": "1745419",
    "end": "1750690"
  },
  {
    "text": "before I get to that I just want to quickly show you a version of that tool that you can also run inside your own account so there are many workloads a",
    "start": "1750690",
    "end": "1757779"
  },
  {
    "text": "really good example is Hadoop I mean EMR will restrict you to a single AZ by default and so you might want to run",
    "start": "1757779",
    "end": "1764590"
  },
  {
    "text": "this analysis inside your own account with the specific instances in the specific zone that you're going to launch into and say hey how long would I",
    "start": "1764590",
    "end": "1771789"
  },
  {
    "text": "live for over the last week or month or whatever analysis you want to do and we'll spit out a number that says this",
    "start": "1771789",
    "end": "1778149"
  },
  {
    "text": "is a very friendly picture that I've selected here it says over the last week",
    "start": "1778149",
    "end": "1783179"
  },
  {
    "text": "168 means seven days seven times 24 so not once would any of these instances have been interrupted over the last week",
    "start": "1783179",
    "end": "1790059"
  },
  {
    "text": "had I bet the on-demand price for them you can do that yourself you can run this query inside your own account get",
    "start": "1790059",
    "end": "1795070"
  },
  {
    "text": "very specific so you can start discovering the servers that will work for you",
    "start": "1795070",
    "end": "1800159"
  },
  {
    "text": "so what about handling the complexity of deploying and managing a diverse array",
    "start": "1800159",
    "end": "1805239"
  },
  {
    "text": "of instances last year we launched a tool called spot fleet that was designed to do exactly that I'm sure a lot of you",
    "start": "1805239",
    "end": "1810940"
  },
  {
    "text": "are familiar with Amazon auto scaling groups this is a very similar tool in that you know you don't pay any",
    "start": "1810940",
    "end": "1816909"
  },
  {
    "text": "additional cost to make use of the orchestration service the difference being this was an orchestration tool that was designed from the ground up",
    "start": "1816909",
    "end": "1823269"
  },
  {
    "text": "with spot best practices in mind so you can define the rules that it's going to",
    "start": "1823269",
    "end": "1828460"
  },
  {
    "text": "play by you can set the instances that it should use the AZ's that you use the subnets whatever it is you define the",
    "start": "1828460",
    "end": "1833590"
  },
  {
    "text": "rules and then you can step back and say now go get me a hundred that could be go get me a hundred instances go get me a",
    "start": "1833590",
    "end": "1840279"
  },
  {
    "text": "terabyte of memory go get me a thousand cause whatever you want you can define the rules that it will play by and then",
    "start": "1840279",
    "end": "1847480"
  },
  {
    "text": "pass over responsibilities to discover and deploy that spot capacity for you to it now this doesn't mean you won't get",
    "start": "1847480",
    "end": "1853330"
  },
  {
    "text": "interrupted from time to time you know these are still just standard spot instances that this tool is orchestrating what it does mean is we're",
    "start": "1853330",
    "end": "1859539"
  },
  {
    "text": "going to take responsibility when instruction occurs to go we've lost one of our 10 options let's rebalance one of",
    "start": "1859539",
    "end": "1865059"
  },
  {
    "text": "the remaining nine so we can get back up to the capacity you desire rapidly so",
    "start": "1865059",
    "end": "1870080"
  },
  {
    "text": "we're saying you know stateless system systems that you can handle interruption as long as you recover quickly there's a fantastic tool that's going to work for",
    "start": "1870080",
    "end": "1876080"
  },
  {
    "text": "you very well there's two modes that you could deploy into best price which oh yeah best price is pretty obvious by the",
    "start": "1876080",
    "end": "1883489"
  },
  {
    "text": "name we're going to find the one instance according to our rules it's the cheapest right now and we're going to try and deploy all of the capacity right",
    "start": "1883489",
    "end": "1889730"
  },
  {
    "text": "there so great for you know short-run jobs for batch jobs where you don't mind",
    "start": "1889730",
    "end": "1894859"
  },
  {
    "text": "putting all of your eggs in one basket so you can get the best price now the challenge being if that price goes up",
    "start": "1894859",
    "end": "1901070"
  },
  {
    "text": "and interrupts you you're going to lose all of that capacity at once and so that's why we introduced the diversified deployment pattern the diversified",
    "start": "1901070",
    "end": "1907820"
  },
  {
    "text": "deployment pattern you can think of as just sort of investing you know across a portfolio of stocks and you say here's",
    "start": "1907820",
    "end": "1913039"
  },
  {
    "text": "you know ten instances that I'm willing to use I let's say five instances across two zones that I'm willing to use deploy",
    "start": "1913039",
    "end": "1918470"
  },
  {
    "text": "across all of them that are currently in the money by doing so we're spreading out across multiple supply and demand",
    "start": "1918470",
    "end": "1924350"
  },
  {
    "text": "pools with completely independent price points so the likelihood of multiple pools being interrupted at the same time",
    "start": "1924350",
    "end": "1930649"
  },
  {
    "text": "shrinks drastically so now we're in a position where we might be saying well I'm running a website I can handle",
    "start": "1930649",
    "end": "1935899"
  },
  {
    "text": "losing 10% of my cluster as long as I recover it immediately and by deploying across ten pools that's exactly what's",
    "start": "1935899",
    "end": "1942019"
  },
  {
    "text": "going to happen we're minimizing the blast radius of a spot interruption and we're immediately recovering from that",
    "start": "1942019",
    "end": "1947269"
  },
  {
    "text": "spot interruption and redeploying where other spot instances available we're doing all of that for you you just",
    "start": "1947269",
    "end": "1952489"
  },
  {
    "text": "define the rules at the outset and then we take over that responsibility and do it for you I mean I sort of mentioned",
    "start": "1952489",
    "end": "1959239"
  },
  {
    "text": "this earlier that the array of instances that you'll be willing to use you can give them all a score so that might be",
    "start": "1959239",
    "end": "1964940"
  },
  {
    "text": "hey I can deploy one container and a large so I can deploy two containers on an extra-large it might be I just care",
    "start": "1964940",
    "end": "1971570"
  },
  {
    "text": "about V CPUs go get me 10,000 V CPUs and we'll just set it to that score it could be memory it could be disk it could be",
    "start": "1971570",
    "end": "1977059"
  },
  {
    "text": "some arbitrary metric that you just made up yourself you can apply a custom weighting and then start scaling spot",
    "start": "1977059",
    "end": "1982669"
  },
  {
    "text": "capacity based on what matters to your application we made it super easy",
    "start": "1982669",
    "end": "1990639"
  },
  {
    "text": "I just need to do all of this yourself so it does become a lot right you could",
    "start": "1992040",
    "end": "1998710"
  },
  {
    "text": "end up with multiple options and I think Nicolas will tell us about the the many options that they started with when they began using spot fleet it can become",
    "start": "1998710",
    "end": "2005640"
  },
  {
    "text": "quite a big template and so last year we went out we said we've got to fix that we created a console and the thing I",
    "start": "2005640",
    "end": "2012330"
  },
  {
    "text": "loved about this console from AWS is you can go through define everything the first time in at the end you can say now",
    "start": "2012330",
    "end": "2019410"
  },
  {
    "text": "download the template download the JSON template so go the first time go to the spot console request your spot fleet",
    "start": "2019410",
    "end": "2025470"
  },
  {
    "text": "build it in spot fleet this is a view of the console you can go in there and say so I'm going to pick the M port to",
    "start": "2025470",
    "end": "2031650"
  },
  {
    "text": "extra-large and the c-4 to extra-large I'm going to deploy it just in one easy this is in the the new region in Mumbai",
    "start": "2031650",
    "end": "2038760"
  },
  {
    "text": "I believe to find the rules whatever it may be then you can actually set up this thing called automated bidding as well",
    "start": "2038760",
    "end": "2044040"
  },
  {
    "text": "where we'll just go and it's not that secret right we call it automated bidding all it's doing is we're going to automatically set your bid price to the",
    "start": "2044040",
    "end": "2050398"
  },
  {
    "text": "on-demand price because we go back to what I said earlier that's how you should get started it's really going to be almost almost all the time it's the",
    "start": "2050399",
    "end": "2057090"
  },
  {
    "text": "best strategy for customers I'll tell you one thing the only time that I deviate from that is a recommendation",
    "start": "2057090",
    "end": "2063000"
  },
  {
    "text": "from customers is those that absolutely love interruptions now that may sound really weird but some customers have",
    "start": "2063000",
    "end": "2069030"
  },
  {
    "text": "tasks they've chunked down to just one minute or even less than one minute and so there's one customer from Australia",
    "start": "2069030",
    "end": "2074878"
  },
  {
    "text": "where I grew up and that customer has one-minute tasks so they go and they bid incredibly low there the 25% of",
    "start": "2074879",
    "end": "2081148"
  },
  {
    "text": "on-demand bidder because if they get interrupted 55 minutes into the hour they don't pay for that 55 minutes so if",
    "start": "2081149",
    "end": "2088860"
  },
  {
    "text": "you've got one minute tasks and you're interrupted 55 minutes into the hour you just got 54 jobs done for free now I'm",
    "start": "2088860",
    "end": "2094110"
  },
  {
    "text": "looking to spend a lot of time helping you do that but if you can",
    "start": "2094110",
    "end": "2099630"
  },
  {
    "text": "sew that spot that's the spot flight console that you can go ahead and get get started using you know this is the",
    "start": "2099630",
    "end": "2106330"
  },
  {
    "text": "sort of template you can see we're just going to give you the graph you can pick your instances and then at the end you can go and edit it to whatever the hell",
    "start": "2106330",
    "end": "2112540"
  },
  {
    "text": "you want it to be but that's what spot FLE it's going to do for you it's going to help automate the complexity of being",
    "start": "2112540",
    "end": "2118240"
  },
  {
    "text": "diversified it's going to automate the complexity of following what I've just said it's a spot best practice all you",
    "start": "2118240",
    "end": "2123760"
  },
  {
    "text": "need to do is spend a little bit of time maybe do some benchmarking maybe do some testing and find the instances that work",
    "start": "2123760",
    "end": "2129040"
  },
  {
    "text": "for you and remember when you're doing that benchmarking and testing if it performs ten percent worse but it's a 90",
    "start": "2129040",
    "end": "2135400"
  },
  {
    "text": "percent discount is it worth it almost certainly surely as opposed to having to invoke failing over to on-demand as an",
    "start": "2135400",
    "end": "2142510"
  },
  {
    "text": "example which was a very common pattern back in the old days increasingly the common pattern is failing from one spot",
    "start": "2142510",
    "end": "2149050"
  },
  {
    "text": "instance to another and again go check the spot bid advisor we talked about failing a lot because you do need to be",
    "start": "2149050",
    "end": "2154630"
  },
  {
    "text": "ready for it if you're going to make use of spot it is going to happen at some point but don't convince yourself it's going to happen 10 times a day go check",
    "start": "2154630",
    "end": "2160720"
  },
  {
    "text": "the spot bid advisor sanity check your thoughts and what you'll find is there's a huge number of instances that live four week days weeks months on end",
    "start": "2160720",
    "end": "2168369"
  },
  {
    "text": "without interruption by the way I didn't mention it but if you are googling the spot bid advisor and checking it out",
    "start": "2168369",
    "end": "2173530"
  },
  {
    "text": "media means the average lifetime was greater than two days okay so I showed you lows it's no interruptions over the",
    "start": "2173530",
    "end": "2179590"
  },
  {
    "text": "analysis period median means greater than two days so a huge number of workloads still can probably accept that",
    "start": "2179590",
    "end": "2184900"
  },
  {
    "text": "right so diversification just just one last slide here you know be serious about thinking about diversification so",
    "start": "2184900",
    "end": "2191440"
  },
  {
    "text": "many people want to put that to the side you can put that to the side if you're going to run depth tests and you add environments you cannot put it to the",
    "start": "2191440",
    "end": "2197770"
  },
  {
    "text": "side if you want to run in production consistently and successfully and get that 80 to 90 percent discount you can",
    "start": "2197770",
    "end": "2203680"
  },
  {
    "text": "fail over to on demand as often as you'd like you can do that if you only want to use one instance but I'd encourage you to explore diversification which is why",
    "start": "2203680",
    "end": "2210490"
  },
  {
    "text": "I'm saying it so many times and you're probably getting irritated by it you know select multiple availability",
    "start": "2210490",
    "end": "2216730"
  },
  {
    "text": "zones if you can it's not compulsory again EMR is a really very common use case customers use EMR and spot together",
    "start": "2216730",
    "end": "2223240"
  },
  {
    "text": "all the time we restrict you to a single zone so instead of going across a ZZZ customers will go up and down families",
    "start": "2223240",
    "end": "2229840"
  },
  {
    "text": "they'll say well use the c32 Excel for Excel 8 Excel and hey because spot prices are determined by supply and",
    "start": "2229840",
    "end": "2236210"
  },
  {
    "text": "demand I can use the r32 Excel for Excel and ADA Excel as well because oftentimes",
    "start": "2236210",
    "end": "2242090"
  },
  {
    "text": "the are 3 large is going to be the same price as the C 3 large the prices are not correlated with on demand very few",
    "start": "2242090",
    "end": "2248210"
  },
  {
    "text": "applications are going to break if I give them 4x the memory you asked for so who cares if we give you a little bit of extra resources if you're saving a",
    "start": "2248210",
    "end": "2254660"
  },
  {
    "text": "fortune or you know very common if you're running behind a load balancer this is a very common example you'll say well",
    "start": "2254660",
    "end": "2261020"
  },
  {
    "text": "right now I'm running the C 3 let's say C 4 large now I'm running the C 4 large in my web fleet behind the load balancer",
    "start": "2261020",
    "end": "2267890"
  },
  {
    "text": "and it's stateless I don't want to run like an 8 Excel and a large at the same time because it just seems a little bit scary to put that behind the load",
    "start": "2267890",
    "end": "2274190"
  },
  {
    "text": "balancer and hope that the right requests go to the right places that performs well so instead just go across",
    "start": "2274190",
    "end": "2279980"
  },
  {
    "text": "families you know we can use you know C 3 large M 3 large C for large M for",
    "start": "2279980",
    "end": "2285380"
  },
  {
    "text": "large R 3 large whatever else that may be out there again that the example I",
    "start": "2285380",
    "end": "2291080"
  },
  {
    "text": "made earlier right if you're using C for large today and you think oh yeah but we really like this chipset it performs so",
    "start": "2291080",
    "end": "2296390"
  },
  {
    "text": "well for us the C 3 large performs a little bit worse if it's the difference between failing over two on demand and",
    "start": "2296390",
    "end": "2302690"
  },
  {
    "text": "paying the on-demand price the C for large versus taking that 10% hit and still getting an 80 to 90 percent savings with the C 3 come on to it save",
    "start": "2302690",
    "end": "2311030"
  },
  {
    "text": "some money and with that I'll hand over to Nicklaus",
    "start": "2311030",
    "end": "2316780"
  },
  {
    "text": "Thank You Boyd for having me here my name is nicholas silva i'm the infrastructure lead at if this than that",
    "start": "2321550",
    "end": "2328900"
  },
  {
    "text": "which as you can see our tagline is one connection countless possibilities we",
    "start": "2328900",
    "end": "2334640"
  },
  {
    "text": "let developers and users create connections between different services",
    "start": "2334640",
    "end": "2340420"
  },
  {
    "text": "slack to Facebook Facebook to slack Twitter to Facebook Alexa to Twitter really pretty much anything that you can",
    "start": "2340420",
    "end": "2347030"
  },
  {
    "text": "think of and I'm sure someone will ask you or will us one of you will ask me",
    "start": "2347030",
    "end": "2352580"
  },
  {
    "text": "later about applets oracle has released the name we've picked up the name",
    "start": "2352580",
    "end": "2358430"
  },
  {
    "text": "applets recently and we're calling our we used to call them recipe we're calling them applets now and they're",
    "start": "2358430",
    "end": "2364790"
  },
  {
    "text": "essentially like little mini units of functionality here are some various examples of the types of things that our",
    "start": "2364790",
    "end": "2370730"
  },
  {
    "text": "users and our partners have have created and then allow other users to use",
    "start": "2370730",
    "end": "2376630"
  },
  {
    "text": "we have 43 million applets that have been created over nine million users on",
    "start": "2376630",
    "end": "2382400"
  },
  {
    "text": "our platform 360 different services that we've launched an applet is defined as",
    "start": "2382400",
    "end": "2388220"
  },
  {
    "text": "generally a set of triggers which is like new data on a service and then actions which is posting data to another",
    "start": "2388220",
    "end": "2395270"
  },
  {
    "text": "service saving something to a spreadsheet so we run over a billion",
    "start": "2395270",
    "end": "2400400"
  },
  {
    "text": "actions per month and we check over a billion triggers per day so if there's",
    "start": "2400400",
    "end": "2405590"
  },
  {
    "text": "no new data the action won't fire but we we have a kind of a lot of bandwidth and",
    "start": "2405590",
    "end": "2411349"
  },
  {
    "text": "we have over 80 million service activations we run all of this in one",
    "start": "2411349",
    "end": "2417670"
  },
  {
    "text": "region us east one for availability zones and one DevOps engineer",
    "start": "2417670",
    "end": "2424720"
  },
  {
    "text": "so let's go back to 2014 it was or it",
    "start": "2424720",
    "end": "2429740"
  },
  {
    "text": "was and still is running on Ruby on Rails we had dedicated web instances running our website and we had dedicated",
    "start": "2429740",
    "end": "2435560"
  },
  {
    "text": "worker instances running the the kind of like background processing jobs we the",
    "start": "2435560",
    "end": "2442640"
  },
  {
    "text": "worker instances were configured based on the the size of the instance of C 4 C 3 at",
    "start": "2442640",
    "end": "2451070"
  },
  {
    "text": "that time as C 3 large could run ten workers C 3 8xl could run a hundred",
    "start": "2451070",
    "end": "2457400"
  },
  {
    "text": "workers or whatever it was we were experimenting with spot a little",
    "start": "2457400",
    "end": "2462890"
  },
  {
    "text": "bit we kind of had cut some elastic capacity because we were running at the time where during the day we had more",
    "start": "2462890",
    "end": "2469400"
  },
  {
    "text": "load so we would have a couple auto scaling groups that would kind of like",
    "start": "2469400",
    "end": "2475010"
  },
  {
    "text": "increase capacity then we actually started to depend upon that capacity every day and we were some we would",
    "start": "2475010",
    "end": "2482900"
  },
  {
    "text": "sometimes lose it when we needed it we were saving about on for that pool we were saving about 50% on on-demand based",
    "start": "2482900",
    "end": "2489859"
  },
  {
    "text": "on our bid but we were really vulnerable to market fluctuations and",
    "start": "2489859",
    "end": "2496250"
  },
  {
    "text": "more importantly it just like wasn't working out for us the way that we",
    "start": "2496250",
    "end": "2501319"
  },
  {
    "text": "wanted to so that's where spot fleet came in we launched our worker am i in",
    "start": "2501319",
    "end": "2507140"
  },
  {
    "text": "two spot fleet with a mix of markets and that just like before that ami was",
    "start": "2507140",
    "end": "2512750"
  },
  {
    "text": "configured to scale based on whatever instance type it launched into although I think it was only the c-class",
    "start": "2512750",
    "end": "2519579"
  },
  {
    "text": "eventually we moved all of our workers over to spot fleet management because it was essentially reliable enough to",
    "start": "2519579",
    "end": "2526900"
  },
  {
    "text": "for that type of workload the talking about the batch processing jobs it generally each unit is about a minute so",
    "start": "2526900",
    "end": "2536089"
  },
  {
    "text": "and that's like multiple applets checking the triggers running the actions so that that worked pretty well",
    "start": "2536089",
    "end": "2543950"
  },
  {
    "text": "for us and it was good but it wasn't great we we knew that our infrastructure",
    "start": "2543950",
    "end": "2549470"
  },
  {
    "text": "was was getting kind of old we had these a.m. eyes that were hanging around for a long time when they would boot they",
    "start": "2549470",
    "end": "2557750"
  },
  {
    "text": "would have to fetch all of all the changes in code it was kind of like a clergy chef solo setup that that worked",
    "start": "2557750",
    "end": "2565730"
  },
  {
    "text": "with like a dynamo based deployment system called deploy demo that we had written and that guy had left the",
    "start": "2565730",
    "end": "2571579"
  },
  {
    "text": "company and and it just really wasn't great we knew that we had to like revitalize it but we didn't really",
    "start": "2571579",
    "end": "2578060"
  },
  {
    "text": "know where it was that we wanted to go and that was where we when we basically",
    "start": "2578060",
    "end": "2584060"
  },
  {
    "text": "jumped the ship into into docker or I guess we jumped on to the docker ship so",
    "start": "2584060",
    "end": "2589990"
  },
  {
    "text": "we we worked over 2015 to create docker",
    "start": "2589990",
    "end": "2595940"
  },
  {
    "text": "containers or docker images for all of our various applications and get",
    "start": "2595940",
    "end": "2602210"
  },
  {
    "text": "everything running in that stack and at the same time we were building ami zosyn",
    "start": "2602210",
    "end": "2607700"
  },
  {
    "text": "marathon based kind of container scheduling system that at the time like",
    "start": "2607700",
    "end": "2614079"
  },
  {
    "text": "kubernetes was still kind of new at the end of 2014 and mises marathon was was",
    "start": "2614079",
    "end": "2619849"
  },
  {
    "text": "working it involved a little bit of fiddling but we eventually got kind of a",
    "start": "2619849",
    "end": "2626510"
  },
  {
    "text": "little magical ami that satisfied all of our needs it integrates with our LDAP",
    "start": "2626510",
    "end": "2632370"
  },
  {
    "text": "solution so that we can log into all of them it installs versions of docker that we need amis au s-- marathon and",
    "start": "2632370",
    "end": "2639200"
  },
  {
    "text": "most importantly has a boot flow that looks at the VP see that it's in finds a",
    "start": "2639200",
    "end": "2646650"
  },
  {
    "text": "tag on that V PC then tags itself finds the meso Sleater to connect to and then",
    "start": "2646650",
    "end": "2653850"
  },
  {
    "text": "registers with me Zoe's all autonomously which was important for our",
    "start": "2653850",
    "end": "2659130"
  },
  {
    "text": "use of spot fleet because by this point we had essentially become dependent upon spot fleet to run the amount of workload",
    "start": "2659130",
    "end": "2667380"
  },
  {
    "text": "that we were running I pulled out my phone well or earlier because I wanted",
    "start": "2667380",
    "end": "2673920"
  },
  {
    "text": "to calculate the number of compute hours and we're running about 2500 cores that at",
    "start": "2673920",
    "end": "2680340"
  },
  {
    "text": "any given time so that works out to be just under two million hours per month",
    "start": "2680340",
    "end": "2686340"
  },
  {
    "text": "and about 22 million hours per year of compute so",
    "start": "2686340",
    "end": "2694130"
  },
  {
    "text": "it's a lot and we really would not be able to do it at all without spot just",
    "start": "2694130",
    "end": "2699720"
  },
  {
    "text": "because of the savings we have some reserved instances for zookeeper",
    "start": "2699720",
    "end": "2706530"
  },
  {
    "text": "and for the the most leaders which are set up in a high availability set up the",
    "start": "2706530",
    "end": "2711840"
  },
  {
    "text": "cluster itself of all of the followers is managed entirely by spot fleet we launched it in 48 different availability",
    "start": "2711840",
    "end": "2719550"
  },
  {
    "text": "zones in the US one region we actually tried to launch it more but the spot fleet engineers set an arbitrarily high",
    "start": "2719550",
    "end": "2727640"
  },
  {
    "text": "limit at 50 they didn't think that anybody would want more than 50 different spot pools I think we wanted",
    "start": "2727640",
    "end": "2734160"
  },
  {
    "text": "80 or 70 and we're just like anything we'll run on anything our workers are",
    "start": "2734160",
    "end": "2739710"
  },
  {
    "text": "Ruby on Rails containers they don't care what they're running on really all we needed was network because our our",
    "start": "2739710",
    "end": "2747630"
  },
  {
    "text": "service is so much network dependent the Ruby is memory hungry but really we were",
    "start": "2747630",
    "end": "2753960"
  },
  {
    "text": "network dependent and the the the rest of it was basically handled by me Zoe's",
    "start": "2753960",
    "end": "2762040"
  },
  {
    "text": "we after a while we started to notice some kind of like irregularities with the way that we were",
    "start": "2762040",
    "end": "2769710"
  },
  {
    "text": "being allocated so we looked at the our memory and our CPU usage across the entire cluster pulled some graphs and",
    "start": "2769710",
    "end": "2777040"
  },
  {
    "text": "charts we calculated the maximum number of containers that we could fit into a particular instance how much we were",
    "start": "2777040",
    "end": "2783940"
  },
  {
    "text": "paying on that instance over the last month and essentially",
    "start": "2783940",
    "end": "2789150"
  },
  {
    "text": "kind of like optimized our setup and wound up saving a couple thousand dollars per month just by essentially",
    "start": "2789150",
    "end": "2795310"
  },
  {
    "text": "reducing the number of spot pools that we were in 48 it was great if we lost a",
    "start": "2795310",
    "end": "2800620"
  },
  {
    "text": "spot pool and with that happens like all the time for us because we're utilizing them so heavily we and when I say all",
    "start": "2800620",
    "end": "2807130"
  },
  {
    "text": "the time it's like once a week or something like that we lose a xlviii of our capacity which is nothing",
    "start": "2807130",
    "end": "2812700"
  },
  {
    "text": "me zosyn marathon will reroute the containers to our extra capacity and it like I don't even know I don't even know",
    "start": "2812700",
    "end": "2819880"
  },
  {
    "text": "anymore because I don't bother me it just is all happening in the background but what we wanted to make sure that we",
    "start": "2819880",
    "end": "2827650"
  },
  {
    "text": "were as optimized as possible so then we set instance weights and bid prices based on our custom calculation just",
    "start": "2827650",
    "end": "2834100"
  },
  {
    "text": "like you were saying so the our class is not as useful for us so we actually",
    "start": "2834100",
    "end": "2840310"
  },
  {
    "text": "discounted those we won't pay on-demand prices everything else we're willing to",
    "start": "2840310",
    "end": "2845350"
  },
  {
    "text": "bid on demand price just because we don't what we don't care we we know that we're going to be getting a significant",
    "start": "2845350",
    "end": "2851230"
  },
  {
    "text": "discount and we want the stability over any sort of interruption even though it",
    "start": "2851230",
    "end": "2858130"
  },
  {
    "text": "will happen from time to time we also it's real what one thing that's really nice about spot fleet is that the",
    "start": "2858130",
    "end": "2865140"
  },
  {
    "text": "allocation metrics will be reported to to cloud watch so you can see how many",
    "start": "2865140",
    "end": "2872380"
  },
  {
    "text": "instances are watching how many instances are currently running instances terminated and then I wrote a",
    "start": "2872380",
    "end": "2879700"
  },
  {
    "text": "little bash script - one for measles and one for marathon to basically just collect the metrics from the Marathon",
    "start": "2879700",
    "end": "2887680"
  },
  {
    "text": "leader and then publish that to cloud watch so that we could correlate those graphs and see how many of our total CPU",
    "start": "2887680",
    "end": "2895060"
  },
  {
    "text": "is being allocated to workers and how much of our total memory is being allocated and kind of like correlate",
    "start": "2895060",
    "end": "2901210"
  },
  {
    "text": "those until we get our bin packing strategy kind of like optimized we",
    "start": "2901210",
    "end": "2907660"
  },
  {
    "text": "estimate that we're saving about 75% less than if we were using on-demand part of that is that we build in a",
    "start": "2907660",
    "end": "2914710"
  },
  {
    "text": "buffer so that we can handle a deploy we do marathon based rolling deploys of new",
    "start": "2914710",
    "end": "2920260"
  },
  {
    "text": "containers so we kind of want buffer so that we don't have to continually be taking our service down to a down in",
    "start": "2920260",
    "end": "2926620"
  },
  {
    "text": "capacity to launch new instances but the bin packing certainly helped we were",
    "start": "2926620",
    "end": "2932170"
  },
  {
    "text": "were utilizing our resources way more spot fleet manages our capacity automatically like I said I don't know",
    "start": "2932170",
    "end": "2939640"
  },
  {
    "text": "really when we've got a spot fleet interruption because unless it's super super serious I won't even notice there",
    "start": "2939640",
    "end": "2946960"
  },
  {
    "text": "will just be a little squiggle on the graph of the number of total cores that we have and I don't even know how many",
    "start": "2946960",
    "end": "2954400"
  },
  {
    "text": "instances we have because it could be 200 it could be 400 if we lose some in",
    "start": "2954400",
    "end": "2959530"
  },
  {
    "text": "one kind of class we might our spot fleet the diversified allocator might",
    "start": "2959530",
    "end": "2965170"
  },
  {
    "text": "launch more instances in another class to make up our total requested number of",
    "start": "2965170",
    "end": "2971620"
  },
  {
    "text": "like arbitrary units but the one of the best things is with this entire thing",
    "start": "2971620",
    "end": "2976870"
  },
  {
    "text": "with me this marathon docker and spot fleet is that this infrastructure abstraction has actually freed up our",
    "start": "2976870",
    "end": "2983680"
  },
  {
    "text": "developers to just build the thing that they want to build instead of having to worry about what type of instance it's",
    "start": "2983680",
    "end": "2989980"
  },
  {
    "text": "going to run on how much memory it's going to get our data analytics team is",
    "start": "2989980",
    "end": "2995950"
  },
  {
    "text": "able to launch long-running kind of like pipeline jobs and",
    "start": "2995950",
    "end": "3001160"
  },
  {
    "text": "they run through the night they very rarely ever get interrupted and even when they do they've they've checked",
    "start": "3001160",
    "end": "3007170"
  },
  {
    "text": "pointed them and so they might have lost about an hour's worth of analytics processing but it's it's",
    "start": "3007170",
    "end": "3013320"
  },
  {
    "text": "really not a big deal so thank you yeah fantastic",
    "start": "3013320",
    "end": "3019860"
  },
  {
    "text": "so I mean hopefully there's a an obvious and recurring pattern that you've seen here if you're looking at docker as part",
    "start": "3019860",
    "end": "3026070"
  },
  {
    "text": "of the future of your compute you know two examples where Dockers has drastically",
    "start": "3026070",
    "end": "3031210"
  },
  {
    "text": "reduced the complexity to follow spot best practices it's certainly not just doc raised services you know whether it",
    "start": "3031210",
    "end": "3039200"
  },
  {
    "text": "be micro services data processing you know I mentioned EMR and do many times they've been very popular for a long",
    "start": "3039200",
    "end": "3045680"
  },
  {
    "text": "time really anything that has a resource manager that's able to make use of heterogeneous instances or just go pick",
    "start": "3045680",
    "end": "3053060"
  },
  {
    "text": "ones that are relatively close to the same and put them behind a load balancer and and start saving money but final",
    "start": "3053060",
    "end": "3058460"
  },
  {
    "text": "reminder you know spots one of our business models if you're not making use of it you know in almost every case",
    "start": "3058460",
    "end": "3064790"
  },
  {
    "text": "there should be at least some instances that you can save some money and run on the spot but it's not going to solve",
    "start": "3064790",
    "end": "3070970"
  },
  {
    "text": "everything and there's one big point that the general manager of spot wants me to make before I get off the stage is",
    "start": "3070970",
    "end": "3076100"
  },
  {
    "text": "don't run your databases on spot all right please don't do that please fill",
    "start": "3076100",
    "end": "3083090"
  },
  {
    "text": "in the surveys before you leave or buy the app however it happens they're really valuable in how we think",
    "start": "3083090",
    "end": "3089450"
  },
  {
    "text": "about planning reinvent thanks guys",
    "start": "3089450",
    "end": "3093190"
  }
]