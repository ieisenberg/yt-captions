[
  {
    "text": "my name is Mike Ruiz I'm a Solutions Architect architect irritative the u.s. I work on the partner team I've been",
    "start": "1399",
    "end": "7710"
  },
  {
    "text": "here for about three years I'm here with Alan brown Oh also solution architects on the politie team",
    "start": "7710",
    "end": "13110"
  },
  {
    "text": "I've been to the Amazon for about five years now right we both have extensive experience outside of the Amazon operating",
    "start": "13110",
    "end": "19680"
  },
  {
    "text": "production infrastructures both both on Amazon and in scaled enterprises but",
    "start": "19680",
    "end": "25109"
  },
  {
    "text": "today we're going to talk about anti-patterns and learning through failure so it's probably a good idea to",
    "start": "25109",
    "end": "34170"
  },
  {
    "text": "define an anti-pattern an anti-pattern is an operational practice that's successful in the short term or",
    "start": "34170",
    "end": "41820"
  },
  {
    "text": "intermediate term but are known to AWS experts to lead to false or eventual",
    "start": "41820",
    "end": "48450"
  },
  {
    "text": "fault in production or when challenged with some sort of event and kind of interestingly I work with a lot of",
    "start": "48450",
    "end": "54329"
  },
  {
    "text": "partners talking about best practice where best practice comes from is largely the investigation of",
    "start": "54329",
    "end": "60690"
  },
  {
    "text": "anti-patterns in accounts so we're going to talk about anti-patterns but really this is a conversation about best",
    "start": "60690",
    "end": "65939"
  },
  {
    "text": "practice putting another way best practices are learned and often earn",
    "start": "65939",
    "end": "72600"
  },
  {
    "text": "behaviors so when I have conversations with partners about best practice I'm often challenged where does this come",
    "start": "72600",
    "end": "78360"
  },
  {
    "text": "from I don't actually have that conversation when I'm working with the customer that's had a fault and we're",
    "start": "78360",
    "end": "84210"
  },
  {
    "text": "talking about best practice I think they're pretty convinced of the value and so my job is to really explain the",
    "start": "84210",
    "end": "90720"
  },
  {
    "text": "value of a particular best practice and ideally learning from the behaviors of",
    "start": "90720",
    "end": "96119"
  },
  {
    "text": "others learning from faulting and other people's accounts as opposed to our own that's kind of the ideal outcome here so",
    "start": "96119",
    "end": "102630"
  },
  {
    "text": "that's a lot of what we do kind of put in another way this is the myth of best",
    "start": "102630",
    "end": "107850"
  },
  {
    "text": "practice creation we don't invest back and we don't invent best practice sitting in a park under a blue sky we",
    "start": "107850",
    "end": "115409"
  },
  {
    "text": "both live in Seattle blue skies don't exist anyway so this can't happen but this is not where we come up with the",
    "start": "115409",
    "end": "121170"
  },
  {
    "text": "ideas and notions of best practice this is maybe a more realistic assessment of where we learn about best practices the",
    "start": "121170",
    "end": "128160"
  },
  {
    "text": "folks on the bottom of the screen are investigating best practice thinking about anti-patterns and they're working",
    "start": "128160",
    "end": "133800"
  },
  {
    "text": "if you ever met any of these individuals they spend a lot of time outside of these events working with customers to",
    "start": "133800",
    "end": "139140"
  },
  {
    "text": "try to remove anti patterns from environment so that we don't have those issues that happened without my control",
    "start": "139140",
    "end": "145110"
  },
  {
    "text": "that was an example of a loss of control so we're gonna talk about for anti patterns today these are community",
    "start": "145110",
    "end": "151920"
  },
  {
    "text": "patterns that we see in a lot of partner accounts these are these are anti patterns that we see in customers",
    "start": "151920",
    "end": "157020"
  },
  {
    "text": "accounts and importantly these are anti patterns that lead to real outages for",
    "start": "157020",
    "end": "164070"
  },
  {
    "text": "real customers and in some cases these examples are taken from my own experience or ballons experience as well",
    "start": "164070",
    "end": "170000"
  },
  {
    "text": "so the first thing I pattern we'll talk about is the loss of control and what we mean is the loss of control of an AWS",
    "start": "170000",
    "end": "176610"
  },
  {
    "text": "account that's the domain that we're talking about here's it here's a simple",
    "start": "176610",
    "end": "182100"
  },
  {
    "text": "example of an AWS infrastructure I just called this from a reference architecture website it's really easy to",
    "start": "182100",
    "end": "189030"
  },
  {
    "text": "create these infrastructures by operating the AWS API I can define this infrastructure as code this is a pretty",
    "start": "189030",
    "end": "195720"
  },
  {
    "text": "typical view of an AWS or AWS service or an application hosted on AWS it's really",
    "start": "195720",
    "end": "200730"
  },
  {
    "text": "well designed so this has got private networking this has got network isolation this has got forgotten fault",
    "start": "200730",
    "end": "206850"
  },
  {
    "text": "tolerance built in they might operating the AWS API I can easily create multiple",
    "start": "206850",
    "end": "212640"
  },
  {
    "text": "well architected individual instances of applications I can build and I can build",
    "start": "212640",
    "end": "218190"
  },
  {
    "text": "a business around offering a practice like this so this is an example of the same application delivered over and over",
    "start": "218190",
    "end": "225240"
  },
  {
    "text": "again maybe for multiple customers it could also be different applications in a typical production environment again",
    "start": "225240",
    "end": "231510"
  },
  {
    "text": "that the essential point is this is a well architected application within the application scope there's really nothing",
    "start": "231510",
    "end": "237959"
  },
  {
    "text": "to say about it it's it's designed to best practice how do we actually build",
    "start": "237959",
    "end": "243360"
  },
  {
    "text": "these infrastructures on AWS we operate the AWS API we can up we can",
    "start": "243360",
    "end": "249209"
  },
  {
    "text": "operate the AWS API from anywhere in the world and we cannot that we're authenticated with the service called I",
    "start": "249209",
    "end": "255660"
  },
  {
    "text": "am anybody with a long-term security credential cadential for your account on",
    "start": "255660",
    "end": "261930"
  },
  {
    "text": "my dealer your administrators I'm seriously lose control here it's great",
    "start": "261930",
    "end": "266940"
  },
  {
    "text": "preview anyone with access to a long-term security credential in your",
    "start": "266940",
    "end": "272340"
  },
  {
    "text": "account we often create these on purpose for humans to administer this environment by default they can actually",
    "start": "272340",
    "end": "279000"
  },
  {
    "text": "administer the environment from anywhere in the world as long as they've got a security credential we give these out to people administrators we often see folks",
    "start": "279000",
    "end": "286790"
  },
  {
    "text": "creating long-term security credentials with overly broad or very broad permission sets admin accounts if you",
    "start": "286790",
    "end": "293400"
  },
  {
    "text": "will and we see use of the AWS of route account credentials used in this way so",
    "start": "293400",
    "end": "298710"
  },
  {
    "text": "we generate credentials for the route account this is unrestricted access to the AWS account we often create as we start to",
    "start": "298710",
    "end": "307170"
  },
  {
    "text": "introduce a little bit more best practice or we introduce automation of the account we often create temporary security credentials as well often with",
    "start": "307170",
    "end": "314970"
  },
  {
    "text": "very similar permission sets so admin it's hey I'm gonna make this this credential I can create the credential",
    "start": "314970",
    "end": "321210"
  },
  {
    "text": "it'll last for five minutes it'll last for an hour however long I need my actual automation to a to run the run",
    "start": "321210",
    "end": "327930"
  },
  {
    "text": "time for that it'll use the security credential to perform that task and this starts to give me a little bit of",
    "start": "327930",
    "end": "333420"
  },
  {
    "text": "protection you know at least the security doesn't hang around forever what's the issue long-term security",
    "start": "333420",
    "end": "339720"
  },
  {
    "text": "credentials can end up leaving our control they stick around forever they're given they're given to humans",
    "start": "339720",
    "end": "344910"
  },
  {
    "text": "it's just a bunch of bits they can end up on mobile devices they can end up on thumb drives they can end up checked",
    "start": "344910",
    "end": "352170"
  },
  {
    "text": "into public repositories we put them in temp files we accidentally check all that stuff in Alan wants me to mention",
    "start": "352170",
    "end": "360120"
  },
  {
    "text": "github I didn't want to mention anybody by name but that's where these things can end up and if this is a public",
    "start": "360120",
    "end": "365310"
  },
  {
    "text": "repository somebody can read my credentials out potentially use them and I think you know one of the one of the",
    "start": "365310",
    "end": "371310"
  },
  {
    "text": "things that's worth pointing out yet with these you know may need long-term credentials you tend to forget what",
    "start": "371310",
    "end": "377370"
  },
  {
    "text": "you've got and you know you go into I am and you're doing an audit and you're like I don't know what this does but I'm",
    "start": "377370",
    "end": "383340"
  },
  {
    "text": "kind of too scared to push the delete button on it because you know what are there what if it breaks everything and",
    "start": "383340",
    "end": "389100"
  },
  {
    "text": "and that it creates a barrier to order - and refresh and actually keep in control of these things great and it's extremely",
    "start": "389100",
    "end": "395910"
  },
  {
    "text": "natural and this is kind of a kind of a reoccurring theme with the anti-patterns it's an natural as we approach the platform for",
    "start": "395910",
    "end": "402060"
  },
  {
    "text": "the first time to investigate the platform in the console with a credential like this generate those",
    "start": "402060",
    "end": "407640"
  },
  {
    "text": "credentials operate the API play around at the CLI start to explore automation and they end up sticking around and",
    "start": "407640",
    "end": "414840"
  },
  {
    "text": "becoming persistent temporary security credentials although we may intend for",
    "start": "414840",
    "end": "420450"
  },
  {
    "text": "them to be used by automation can be intercepted by a user so if we have a",
    "start": "420450",
    "end": "426000"
  },
  {
    "text": "build box you generate some temporary credentials those credentials get dropped into a temp file if anybody else",
    "start": "426000",
    "end": "432150"
  },
  {
    "text": "has access to that box or some person in some way gains access to that box again",
    "start": "432150",
    "end": "439920"
  },
  {
    "text": "preview all right I'm gonna quit touching that button an individual can",
    "start": "439920",
    "end": "447180"
  },
  {
    "text": "grab those credentials they're not automation they're a person but they can still use them in the same way whatever those credentials are authorized to do a",
    "start": "447180",
    "end": "453060"
  },
  {
    "text": "person can use them as well unless we're careful to constrain access so what can",
    "start": "453060",
    "end": "459000"
  },
  {
    "text": "happen if an attacker gains access to credentials either the temp tokens the long-term security credentials they can",
    "start": "459000",
    "end": "466230"
  },
  {
    "text": "operate our API just like our automation can just like our administrators can and this is kind of a unique scenario I'm",
    "start": "466230",
    "end": "474270"
  },
  {
    "text": "not aware of a data center environment I spend a lot of time in data centers where the loss of a single token would",
    "start": "474270",
    "end": "482250"
  },
  {
    "text": "simultaneously grant access to operate my applications drop my infrastructure",
    "start": "482250",
    "end": "488360"
  },
  {
    "text": "remove my security policies it's essentially the key to the data center",
    "start": "488360",
    "end": "493530"
  },
  {
    "text": "the key to my backup vaults all of this scoped into a single credential all of",
    "start": "493530",
    "end": "498690"
  },
  {
    "text": "this in a single administrative domain so that's a bad day no problem I",
    "start": "498690",
    "end": "505080"
  },
  {
    "text": "mentioned that this application is actually well architected I'm making backups I'm dropping those backups into",
    "start": "505080",
    "end": "510360"
  },
  {
    "text": "into s3 I've got full audit artifacts I've got cloud trail enabled in my account I know exactly how the API was",
    "start": "510360",
    "end": "516990"
  },
  {
    "text": "operated so potentially at least understand the scope with a vulnerability or the scope of the event",
    "start": "516990",
    "end": "524930"
  },
  {
    "text": "luckily these are all authentic ated with I am and potentially exactly the same security tokens and so those same",
    "start": "525650",
    "end": "533760"
  },
  {
    "text": "attacker after they're done dropping my production application they also remove my backups or if they're nice they just",
    "start": "533760",
    "end": "540300"
  },
  {
    "text": "encrypt my backups and offer to decrypt them they also remove my audit logs and then I've lost everything I've lost my",
    "start": "540300",
    "end": "547680"
  },
  {
    "text": "ability to continue as a going concern so this can happen so in this talk we're",
    "start": "547680",
    "end": "556830"
  },
  {
    "text": "going to talk about anti-patterns that's the anti-pattern loss of control we're going to talk about simple ways to",
    "start": "556830",
    "end": "562110"
  },
  {
    "text": "mitigate ideally simple at least conceptually simple as Alba mentioned",
    "start": "562110",
    "end": "567510"
  },
  {
    "text": "it's difficult to go unpack your production operation even operating production for years we really want to",
    "start": "567510",
    "end": "573420"
  },
  {
    "text": "drive best practice and I am into that production operation that can take a while but there's a simple thing that we",
    "start": "573420",
    "end": "579810"
  },
  {
    "text": "can do it probably would take about the time of the scope of an afternoon for an",
    "start": "579810",
    "end": "585690"
  },
  {
    "text": "AWS to set this up in a dubious expert to set this up but we can create another AWS account credentials are scoped to an",
    "start": "585690",
    "end": "594330"
  },
  {
    "text": "account that's the administrative domain don't put all of your eggs in one basket",
    "start": "594330",
    "end": "600300"
  },
  {
    "text": "don't put your backups and production operations in a single AWS account set up another AWS account with a much more",
    "start": "600300",
    "end": "607050"
  },
  {
    "text": "restrictor credential set this is extremely easy to think of it to reason about nobody can delete anything in this",
    "start": "607050",
    "end": "613529"
  },
  {
    "text": "account right I can have I can have an account a policy associated of that",
    "start": "613529",
    "end": "618750"
  },
  {
    "text": "credential that says that account I can write things to this account but account I cannot delete anything from this",
    "start": "618750",
    "end": "625560"
  },
  {
    "text": "account maybe I don't create a credential that allows anybody delete anything for this account created mutable audit artifacts",
    "start": "625560",
    "end": "632899"
  },
  {
    "text": "set up automation within the account that's authorized to remove backups but I don't have a human that's able to do",
    "start": "632899",
    "end": "638640"
  },
  {
    "text": "that anybody creates a token like that that's a violation so it's a bad day my",
    "start": "638640",
    "end": "646680"
  },
  {
    "text": "credentials are exposed a county goes away I use a credential for B grab my",
    "start": "646680",
    "end": "652980"
  },
  {
    "text": "backup artifacts and recover into a new account C so this was a bad day but ultimately we've been able to recover",
    "start": "652980",
    "end": "659010"
  },
  {
    "text": "from this event and continue as a going concern again this is a cost neutral exercise it takes it's maybe a half a",
    "start": "659010",
    "end": "666300"
  },
  {
    "text": "day of administrative effort I don't need to change anything in account a to make this work I'm going to choose a different bucket that I just",
    "start": "666300",
    "end": "672490"
  },
  {
    "text": "setup and authenticated to flow my backups into overtime you don't have to",
    "start": "672490",
    "end": "679300"
  },
  {
    "text": "read this this is mostly for you guys to take a picture of it if you want to see some people taking the opportunity",
    "start": "679300",
    "end": "685980"
  },
  {
    "text": "overtime we can start to develop more in a more extensive best practices we can audit our accounts we can understand how",
    "start": "687570",
    "end": "694029"
  },
  {
    "text": "it's being used we're definitely going to lock away our AWS root account there's nothing we can do to restrict",
    "start": "694029",
    "end": "699279"
  },
  {
    "text": "that account it's the main reason why we want to discontinue use I can't create a policy that controls how the root",
    "start": "699279",
    "end": "704860"
  },
  {
    "text": "account is used if somebody uses those credentials they're gonna do whatever they need to do I'm going to create individual iam users I'm going to enable",
    "start": "704860",
    "end": "711850"
  },
  {
    "text": "MFA for privileged users if I lose control of the credential at least I've got an MFA enabled I'm going to not I'm",
    "start": "711850",
    "end": "719110"
  },
  {
    "text": "gonna never automate with privileged credentials I'm it's automation I know exactly what it's gonna do want to",
    "start": "719110",
    "end": "724600"
  },
  {
    "text": "define the policy set that matches exactly what that automation is attempting to do I'm gonna enable rotation I don't have the issue of a",
    "start": "724600",
    "end": "732040"
  },
  {
    "text": "credential lasting four years I can interrogate the IAM API understand exactly when credentials were used how",
    "start": "732040",
    "end": "738790"
  },
  {
    "text": "old they are an established probe programmatic rotation of those credentials audit for compliance always",
    "start": "738790",
    "end": "744850"
  },
  {
    "text": "but the main point here if we learn nothing else from this talk I'd like you to consider establishing separate",
    "start": "744850",
    "end": "750880"
  },
  {
    "text": "administrative domains a separate AWS account for the purposes of backup and audit at least and we can extend that",
    "start": "750880",
    "end": "758170"
  },
  {
    "text": "model into dev tests QA and other uses",
    "start": "758170",
    "end": "763110"
  },
  {
    "text": "the second anti-pattern that we want to talk to talk to you today is gaps in control so here's another view of an AWS",
    "start": "765150",
    "end": "774490"
  },
  {
    "text": "a very simplified AWS infrastructure the things on the left hand side of the",
    "start": "774490",
    "end": "779709"
  },
  {
    "text": "screen are ways to operate the AWS API we've got a management console for interactive access we've got tools like",
    "start": "779709",
    "end": "786100"
  },
  {
    "text": "AWS CloudFormation for building environments programmatically defining our infrastructure as code we've got a",
    "start": "786100",
    "end": "792040"
  },
  {
    "text": "variety of AWS SDKs for integration into your own tooling or into partner tooling of course we've got the AWS CLI we use",
    "start": "792040",
    "end": "799510"
  },
  {
    "text": "that operate the AWS aw we're gonna operate the API and on the back end we can develop our controls and",
    "start": "799510",
    "end": "806280"
  },
  {
    "text": "our compliance automation using services like AWS cloud trail cloud trail is a free service you turn it on it'll give",
    "start": "806280",
    "end": "812340"
  },
  {
    "text": "you an art a not an artifact every single API call exactly who did something in your account when and from",
    "start": "812340",
    "end": "818970"
  },
  {
    "text": "where AWS config gives us a point in time inventory of our account examples",
    "start": "818970",
    "end": "825300"
  },
  {
    "text": "here so what we've got here is an example of a cloud trail log this is just the top bit this is what we get",
    "start": "825300",
    "end": "833130"
  },
  {
    "text": "with this we get the username we get the account ID we get the service used we",
    "start": "833130",
    "end": "840750"
  },
  {
    "text": "get the region it it occurred in we get the source IP address where the where the audit are where this where this a",
    "start": "840750",
    "end": "846710"
  },
  {
    "text": "call was made from which IP address we have more data in the in the body config",
    "start": "846710",
    "end": "853830"
  },
  {
    "text": "is awesome as well this gives me a point in time inventory it's a snapshot of my inventory in AWS again I've operated",
    "start": "853830",
    "end": "859890"
  },
  {
    "text": "data centers for some number of years some people would even say decades I don't like to think about it too much",
    "start": "859890",
    "end": "866180"
  },
  {
    "text": "and an inventory in a data center is an",
    "start": "866180",
    "end": "871680"
  },
  {
    "text": "exercise that spans weeks and it gives me a mostly accurate view of what's",
    "start": "871680",
    "end": "878760"
  },
  {
    "text": "running in that data center except for those 200 service you didn't find yeah I I either find extra servers which is",
    "start": "878760",
    "end": "884940"
  },
  {
    "text": "always even more disconcerting than not finding all of them of like where did these extra servers come from I find 99%",
    "start": "884940",
    "end": "891510"
  },
  {
    "text": "of my tapes which is pretty good unless I want to do a recovery in AWS config",
    "start": "891510",
    "end": "896610"
  },
  {
    "text": "config gives me a point in time snapshot I can make continual snapshots and they can build compliance frameworks using",
    "start": "896610",
    "end": "902160"
  },
  {
    "text": "these two tools and that's what folks in AWS should be doing and frequently do do",
    "start": "902160",
    "end": "909200"
  },
  {
    "text": "so here's an example of the compliance automation that we can start to build into our into our environment",
    "start": "909290",
    "end": "916080"
  },
  {
    "text": "this is an example security route through policy this is essentially a firewall policy it's pretty good-looking",
    "start": "916080",
    "end": "923310"
  },
  {
    "text": "I've got it I've got a protocol specified tcp i've got an input the",
    "start": "923310",
    "end": "929310"
  },
  {
    "text": "source IP to find the ports are port 22 this is ssh that looks pretty good",
    "start": "929310",
    "end": "936240"
  },
  {
    "text": "except for that number so instead of restricting this access from one host I",
    "start": "936240",
    "end": "942820"
  },
  {
    "text": "restrict access to about 5% of the internet so it's pretty close so as long",
    "start": "942820",
    "end": "948190"
  },
  {
    "text": "as we trust 5% of the internet this was a good rule the nice thing though is this rule will",
    "start": "948190",
    "end": "953560"
  },
  {
    "text": "appear in kit both config and contrail after it's been enforced and so I can write some simple compliance automation",
    "start": "953560",
    "end": "959740"
  },
  {
    "text": "to look for rules like this I can look for / 0 / 0 is probably a violation of",
    "start": "959740",
    "end": "965200"
  },
  {
    "text": "my security policy and I can detect that and alert on it and folks often do this is something that's really hard to see",
    "start": "965200",
    "end": "971230"
  },
  {
    "text": "with your eyes but it's pretty easy to see with compliance automation here's an",
    "start": "971230",
    "end": "977290"
  },
  {
    "text": "example of a security policy that somebody in this room wrote in order to",
    "start": "977290",
    "end": "983080"
  },
  {
    "text": "deliberately avoid his own detection rules at 3 o'clock in the morning",
    "start": "983080",
    "end": "989530"
  },
  {
    "text": "because I really really I mean sorry this person the anonymous person really really really wanted to use RDP and he",
    "start": "989530",
    "end": "997210"
  },
  {
    "text": "knew his own compliance automation was gonna kick in and not allowed to use RDP so he wrote a rule that would avoid his own compliance checks this has got a",
    "start": "997210",
    "end": "1003900"
  },
  {
    "text": "well-formed IP address with the proper slash 32 that's the right number there but instead of calling out an IP",
    "start": "1003900",
    "end": "1009870"
  },
  {
    "text": "protocol which would be too obvious I'll just pick any and instead of calling out the RDP port I'm going to use 33 88 and",
    "start": "1009870",
    "end": "1016020"
  },
  {
    "text": "33-19 either which appear on my detection logic so we're all good as long as I remember to revert this in the",
    "start": "1016020",
    "end": "1021780"
  },
  {
    "text": "morning which it didn't as long as we remember to revert this in the morning we're good to go so this is an example",
    "start": "1021780",
    "end": "1028680"
  },
  {
    "text": "of a configuration that's actually hard it's hard to spot with automation I wrote the automation so I know what",
    "start": "1028680",
    "end": "1035850"
  },
  {
    "text": "it's gonna say and I know how to avoid it other folks can see the same stuff but it's pretty easy to spot visually if",
    "start": "1035850",
    "end": "1042569"
  },
  {
    "text": "I had another person looking at this they say Mike why did you write this rule tell me the truth",
    "start": "1042570",
    "end": "1049260"
  },
  {
    "text": "I would say because I really really really needed to log into that box",
    "start": "1049260",
    "end": "1057050"
  },
  {
    "text": "so that that's what's wrong with that picture so let's drop over into s/3 s/3",
    "start": "1059190",
    "end": "1065350"
  },
  {
    "text": "is another thing that it's hard to automate the checks for compliance and I think Alan has a few comments on this",
    "start": "1065350",
    "end": "1071440"
  },
  {
    "text": "yeah you know I think this is the scenario where if you follow any news about the cloud for the last six months",
    "start": "1071440",
    "end": "1078100"
  },
  {
    "text": "what you would have is the template of the news article that says company X has",
    "start": "1078100",
    "end": "1083290"
  },
  {
    "text": "leaked n terabytes in a public s3 bucket and these are some of the most like",
    "start": "1083290",
    "end": "1088840"
  },
  {
    "text": "these are the some of the simplest control gaps where we go I have an X three buckets I have a policy on it but",
    "start": "1088840",
    "end": "1095200"
  },
  {
    "text": "at one time I just needed to like get access to a count where I didn't want to set the bucket policy because I am is",
    "start": "1095200",
    "end": "1101890"
  },
  {
    "text": "super hard and the back of policy was super hard and I couldn't be bothered to figure it out I just made a public and then kind of finish what I was doing and",
    "start": "1101890",
    "end": "1108430"
  },
  {
    "text": "moved on with my life and you know this is a this is a very common control gap",
    "start": "1108430",
    "end": "1113680"
  },
  {
    "text": "and again this is one of those ones where you'd say that automation would solve it but in a lot of cases that's",
    "start": "1113680",
    "end": "1120490"
  },
  {
    "text": "not enough again you also need in a lot of cases humans to take a look what's going on with things like buckets where",
    "start": "1120490",
    "end": "1127720"
  },
  {
    "text": "there's ambiguity about was this meant to be public was this not meant to be public and having you know both",
    "start": "1127720",
    "end": "1134050"
  },
  {
    "text": "automation that says something weird happened here and a person asking why did you do this weird thing right in a",
    "start": "1134050",
    "end": "1142240"
  },
  {
    "text": "similar situation exists for other AWS objects you know we can define pretty tight security grooves for things like",
    "start": "1142240",
    "end": "1147970"
  },
  {
    "text": "ec2 but I can add in he and I that's in a public units associated with the",
    "start": "1147970",
    "end": "1153640"
  },
  {
    "text": "public network gain access temporarily so lots of complex rules and lots of complex features in AWS that enable lots",
    "start": "1153640",
    "end": "1160990"
  },
  {
    "text": "of complex authorization process and kind of the point is need a human to decide if this should be public or not",
    "start": "1160990",
    "end": "1167650"
  },
  {
    "text": "should really use tagging but also we need automation to look at more than a",
    "start": "1167650",
    "end": "1172780"
  },
  {
    "text": "single hard artifact a single change in the API is not going to be sufficient to",
    "start": "1172780",
    "end": "1177790"
  },
  {
    "text": "tell me if s3 is public or not right this is a whole flow chart this is a simplified view of the policy so if I've",
    "start": "1177790",
    "end": "1184390"
  },
  {
    "text": "got checking looking at individual events that may be insufficient to tell me if this is if this is open or closed",
    "start": "1184390",
    "end": "1191700"
  },
  {
    "text": "so let's take another view at our initials our initials I set up here and this time we're going to try to identify",
    "start": "1191700",
    "end": "1197470"
  },
  {
    "text": "some gaps in our automation that we might have become a little bit overconfident with the first thing to",
    "start": "1197470",
    "end": "1204370"
  },
  {
    "text": "note and it's really important is that things on the right hand side of the screen are happen after changes have",
    "start": "1204370",
    "end": "1212169"
  },
  {
    "text": "been made to the environment these are essentially post facto controls",
    "start": "1212169",
    "end": "1217480"
  },
  {
    "text": "automation so I can open the environment I can make an s3 bucket public and cloud",
    "start": "1217480",
    "end": "1224889"
  },
  {
    "text": "trail will tell me about this and if I'm parsing the the logic correctly config",
    "start": "1224889",
    "end": "1231179"
  },
  {
    "text": "but in the intermediate period it's actually open and vulnerable and so if",
    "start": "1231179",
    "end": "1236889"
  },
  {
    "text": "somebody's trying to do something expediently they're trying to you know open up access to a bucket they can grab",
    "start": "1236889",
    "end": "1241929"
  },
  {
    "text": "the data out of it and then our automation will clamp down later so it's retrospective so what can we do",
    "start": "1241929",
    "end": "1251649"
  },
  {
    "text": "to start closing these gaps the first thing that I would that I would consider and recommend and this is a highlight of",
    "start": "1251649",
    "end": "1258309"
  },
  {
    "text": "this talk is take advantage of the experience AWS has in operating this environment on behalf of a large number",
    "start": "1258309",
    "end": "1265360"
  },
  {
    "text": "of customers and a large number of partners and that is augment AWS config",
    "start": "1265360",
    "end": "1271149"
  },
  {
    "text": "with AWS manage rules which we've written that are informed by the",
    "start": "1271149",
    "end": "1276580"
  },
  {
    "text": "experience of helping folks eliminate anti-patterns from their environments so this is a feature called Vantage rules",
    "start": "1276580",
    "end": "1282100"
  },
  {
    "text": "for free config and it has rules for things like checking if an s3 bucket is public so take advantage of the s3",
    "start": "1282100",
    "end": "1289029"
  },
  {
    "text": "knowledge or the s3 knowledge that our support engineers have that the s3 team has if the solutions architects have and",
    "start": "1289029",
    "end": "1295179"
  },
  {
    "text": "that we've embedded in these these managed rules will keep them up to date as a service changes and of another",
    "start": "1295179",
    "end": "1302169"
  },
  {
    "text": "issue I'm also consider eventing to a service like sqs and eventing lambda for custom",
    "start": "1302169",
    "end": "1307869"
  },
  {
    "text": "logic to revert changes so lambda can we can use lambda to investigate a change",
    "start": "1307869",
    "end": "1313210"
  },
  {
    "text": "if we decide it's not compliant we can use lambda 2 to revert that change immediately so that will close our",
    "start": "1313210",
    "end": "1319119"
  },
  {
    "text": "window of vulnerability as opposed to alerting somebody that some things a",
    "start": "1319119",
    "end": "1324220"
  },
  {
    "text": "minute we can use lambda to make that change and put it back we can also use a",
    "start": "1324220",
    "end": "1330049"
  },
  {
    "text": "service like Amazon may see Amazon Macy is going to look inside of your s3 bucket look at the objects therein and",
    "start": "1330049",
    "end": "1336260"
  },
  {
    "text": "use machine learning to try to figure out what kind of data might might exist there so I've operated environments that",
    "start": "1336260",
    "end": "1341809"
  },
  {
    "text": "had petabytes of storage in s3 and over a long period of time we started to accumulate data and it became very",
    "start": "1341809",
    "end": "1347090"
  },
  {
    "text": "difficult to understand like what exactly was there aside from the problem if it's public or not what it what is",
    "start": "1347090",
    "end": "1352610"
  },
  {
    "text": "the data actually represent a Mazon Macy helps you understand that and it also helps you understand how it's being accessed and if that's compliant with",
    "start": "1352610",
    "end": "1358730"
  },
  {
    "text": "your stack so this is another way to kind of use AWS expertise to help me operate the environment in a safe way",
    "start": "1358730",
    "end": "1366970"
  },
  {
    "text": "this is really boring but you should really consider change control change",
    "start": "1366970",
    "end": "1374240"
  },
  {
    "text": "control has been around forever it's probably not news some folks get really",
    "start": "1374240",
    "end": "1379370"
  },
  {
    "text": "excited when they come to AWS and may think you don't have to do it but this is the only way to make sure changes",
    "start": "1379370",
    "end": "1386270"
  },
  {
    "text": "don't go into production right so the stuff on the right hand side school as it is happens afterwards there's a",
    "start": "1386270",
    "end": "1393380"
  },
  {
    "text": "there's a gap of 10 to 15 minutes in some cases before we detect the change and then there would be another gap",
    "start": "1393380",
    "end": "1398419"
  },
  {
    "text": "before we decide to do something about it change control another pair of eyeballs looking at these changes is",
    "start": "1398419",
    "end": "1405230"
  },
  {
    "text": "essential it's an essential component of your infrastructure how can we do that we can do that in a lot of different ways we'll talk about in the next",
    "start": "1405230",
    "end": "1411110"
  },
  {
    "text": "section using AWS CloudFormation to automate my stack I can run AWS CloudFormation and find",
    "start": "1411110",
    "end": "1417530"
  },
  {
    "text": "out what sorts of changes are going to be made and then have another approver to cite it that's an OK thing to check",
    "start": "1417530",
    "end": "1423470"
  },
  {
    "text": "into production we can also absolutely automate the controls over here change control no longer needs to be an",
    "start": "1423470",
    "end": "1429049"
  },
  {
    "text": "entirely manual process all of this stuff is described with code check that code in check it on the front end using",
    "start": "1429049",
    "end": "1436100"
  },
  {
    "text": "very similar logic that you would check it on the back end intercept those changes on the front end as well while",
    "start": "1436100",
    "end": "1443210"
  },
  {
    "text": "we're at it I don't know if you missed it maybe don't use that AWS management console to manage in production",
    "start": "1443210",
    "end": "1448940"
  },
  {
    "text": "operation it's another anti-pattern that we see very frequently and we'll talk about in the next section a little bit",
    "start": "1448940",
    "end": "1454000"
  },
  {
    "text": "the AWS management console is a great tool for discovery using the AWS management credential with",
    "start": "1454000",
    "end": "1460039"
  },
  {
    "text": "an admin credential using them the management console with an admin credential is a fantastic way to learn",
    "start": "1460039",
    "end": "1465740"
  },
  {
    "text": "about AWS it's also a fantastic way to break all your automation and make sure nothing works I'm so consider",
    "start": "1465740",
    "end": "1472760"
  },
  {
    "text": "discontinuing the use of manual automation especially or manual control",
    "start": "1472760",
    "end": "1477830"
  },
  {
    "text": "of the AWS environment using the console or using the CLI oh it's a little bit more defensible for a significant",
    "start": "1477830",
    "end": "1484760"
  },
  {
    "text": "operation and actually I'm fairly adamantly opposed to using the console even for read-only access with one",
    "start": "1484760",
    "end": "1490850"
  },
  {
    "text": "exception that we'll talk about at the very end so consider removing that and this over to Alan to talk about the the",
    "start": "1490850",
    "end": "1498770"
  },
  {
    "text": "utility of Auditors yes we've made the point a lot yeah that automation is",
    "start": "1498770",
    "end": "1504980"
  },
  {
    "text": "great but when you automate your automating things that you know about and the one truth and the you in the",
    "start": "1504980",
    "end": "1511640"
  },
  {
    "text": "universe while the three taxes death and the third one is that you only what you know and you don't know what you don't",
    "start": "1511640",
    "end": "1517549"
  },
  {
    "text": "know automation and understanding watching to automate what then what's the next thing you've gotta fix is",
    "start": "1517549",
    "end": "1526360"
  },
  {
    "text": "teaching knowing I've got a gap I've closed that gap what is the next gap and",
    "start": "1526360",
    "end": "1533059"
  },
  {
    "text": "there will always be a next gap it doesn't matter what environments you running it doesn't matter where you run",
    "start": "1533059",
    "end": "1538460"
  },
  {
    "text": "your servers whether it's in the cloud whether it's your data center it's irrelevant there will always be a next",
    "start": "1538460",
    "end": "1544850"
  },
  {
    "text": "gap and having a continual process of audits understanding what changed what",
    "start": "1544850",
    "end": "1550279"
  },
  {
    "text": "didn't change why I changed is key to identifying that next gap security",
    "start": "1550279",
    "end": "1558950"
  },
  {
    "text": "operation security operations is also essential it's it's it's important understand that we don't actually mean",
    "start": "1558950",
    "end": "1564169"
  },
  {
    "text": "individual named people that have the function of auditor in your environment we mean that an individual has the has",
    "start": "1564169",
    "end": "1570890"
  },
  {
    "text": "the task of audit so this is a repeatable reoccurring thing we need to",
    "start": "1570890",
    "end": "1575899"
  },
  {
    "text": "continually audit our environment we need to have folks that are responsible for security operations in AWS doesn't",
    "start": "1575899",
    "end": "1581480"
  },
  {
    "text": "mean it doesn't mean that that's their only job but at least we have some named individuals performing that function in",
    "start": "1581480",
    "end": "1587179"
  },
  {
    "text": "our environment and then finally partner applications so we can be really confident that we've",
    "start": "1587179",
    "end": "1594080"
  },
  {
    "text": "got proper change control proper automation we're auditing everything but we're gonna verify that the that the",
    "start": "1594080",
    "end": "1601070"
  },
  {
    "text": "artifacts that we have in place are actually doing that doing what we think I'll go back to that loss of control",
    "start": "1601070",
    "end": "1610360"
  },
  {
    "text": "seriously in complete automation partner applications can be configured to probe",
    "start": "1610360",
    "end": "1616490"
  },
  {
    "text": "our buckets probe our assets they can be configured to download the list of",
    "start": "1616490",
    "end": "1622160"
  },
  {
    "text": "external IP address that exists in our account and then test them to make sure that our security rules are actually",
    "start": "1622160",
    "end": "1627590"
  },
  {
    "text": "being enforced some partner examples would be like dome 9 cloud shelter BOTS",
    "start": "1627590",
    "end": "1634809"
  },
  {
    "text": "folks like that so the active penetration testing partner applications",
    "start": "1634809",
    "end": "1640190"
  },
  {
    "text": "can also reach into our account and augment if I want to get started with cloud trail I like the idea of using",
    "start": "1640190",
    "end": "1646130"
  },
  {
    "text": "cloud trail to build a compliance automation stack partner applications can help me get started with that as well so here's the here's the site to",
    "start": "1646130",
    "end": "1654260"
  },
  {
    "text": "take a picture of so the anti-pattern is a reliance on incomplete controls",
    "start": "1654260",
    "end": "1659570"
  },
  {
    "text": "automation best practices that we want to go to pretty simple to start to use",
    "start": "1659570",
    "end": "1665120"
  },
  {
    "text": "manage rules right away we'll talk about canary events in a bit but we also want",
    "start": "1665120",
    "end": "1670429"
  },
  {
    "text": "to use external tests and tools for validation trust the verified make sure that we know what we're doing audit about audit to verify compliance",
    "start": "1670429",
    "end": "1676970"
  },
  {
    "text": "audit as an essential component remains an essential component in AWS see a little under investment there we want to",
    "start": "1676970",
    "end": "1684320"
  },
  {
    "text": "add manual check points prior to pushing changes again we it doesn't do us a lot",
    "start": "1684320",
    "end": "1690260"
  },
  {
    "text": "of good to have a super fancy controls automation stack if I'm pushing changes in there's a there's a 10 to 15 minute",
    "start": "1690260",
    "end": "1696740"
  },
  {
    "text": "lag and there's an author's like there's a gap for folks to hop in there so automate everything but mind the gaps",
    "start": "1696740",
    "end": "1704559"
  },
  {
    "text": "next section is on automating outages the third anti-pattern that we can speak",
    "start": "1704770",
    "end": "1710720"
  },
  {
    "text": "to you today so as we discussed we can easily automate our entire deployment",
    "start": "1710720",
    "end": "1716840"
  },
  {
    "text": "using CloudFormation similar tooling cork terraform puppet ansible chef salt",
    "start": "1716840",
    "end": "1723930"
  },
  {
    "text": "can keep going but we can define our infrastructure as code and folks often",
    "start": "1723930",
    "end": "1728980"
  },
  {
    "text": "do it folks approach the platform that the usual transition is console automation and CLI automation that may",
    "start": "1728980",
    "end": "1735370"
  },
  {
    "text": "be reaching for a tool like cloud formation or terraform to start building automation this is a very simple",
    "start": "1735370",
    "end": "1742450"
  },
  {
    "text": "environment again with simplified diagrams just to kind of illustrate the point so we can scale in or odd where you can scale in or scale out",
    "start": "1742450",
    "end": "1749020"
  },
  {
    "text": "automatically using auto scaling groups or AWS native services like cloud",
    "start": "1749020",
    "end": "1754030"
  },
  {
    "text": "planned and cloud front that give us that elasticity in our environment so here we've got a simple environment",
    "start": "1754030",
    "end": "1759430"
  },
  {
    "text": "route 53:4 name resolution that's going to point to a load balancer an active load balancer though we've got some ec2",
    "start": "1759430",
    "end": "1766060"
  },
  {
    "text": "instances registered with the load balancer to handle load only one in this case we've got a nice simple environment we've got an RDS master database server",
    "start": "1766060",
    "end": "1773410"
  },
  {
    "text": "it's the EM can on the bottom and on the right hand side we've got some static static content distribution with Cod",
    "start": "1773410",
    "end": "1779740"
  },
  {
    "text": "front in and pointing at resources in an Amazon s3 bucket so pretty",
    "start": "1779740",
    "end": "1785560"
  },
  {
    "text": "straightforward okay just make you sure",
    "start": "1785560",
    "end": "1791580"
  },
  {
    "text": "so we can start to contemplate using automation we can start to contemplate Bluegreen deployments this is a good",
    "start": "1791580",
    "end": "1797890"
  },
  {
    "text": "this is a solid practice this is the idea that I'm gonna stand up a new web application server test it to make sure",
    "start": "1797890",
    "end": "1804370"
  },
  {
    "text": "it's working properly then introduce that to the load balancer and remove the",
    "start": "1804370",
    "end": "1810040"
  },
  {
    "text": "original instance right so this is a great way to push new code into production I've got a brand new artifact tested make sure it works before",
    "start": "1810040",
    "end": "1817720"
  },
  {
    "text": "flipping traffic over to it however if everything's in the same CloudFormation template that the original green boxes",
    "start": "1817720",
    "end": "1823770"
  },
  {
    "text": "what can happen is we accidentally drop our database server at the same time we get rid of our webserver it's typically",
    "start": "1823770",
    "end": "1829780"
  },
  {
    "text": "not a great idea that's typically not intentional to get rid of our stateless and stateful infrastructure at the same",
    "start": "1829780",
    "end": "1836500"
  },
  {
    "text": "time similarly we can use AWS auto scaling groups to scale out our web",
    "start": "1836500",
    "end": "1843010"
  },
  {
    "text": "infrastructure we can scale in we can scale out we can test that we can make sure it works fine on a wednesday",
    "start": "1843010",
    "end": "1848290"
  },
  {
    "text": "afternoon when the sun is shining we go home for the weekend come in a Monday morning",
    "start": "1848290",
    "end": "1854020"
  },
  {
    "text": "we had scaled in over the weekend we don't have as much load we come in Monday morning we don't have those boxes",
    "start": "1854020",
    "end": "1860020"
  },
  {
    "text": "that we failed to scale out some change happened something in our environment changed such that it made it possible to",
    "start": "1860020",
    "end": "1866470"
  },
  {
    "text": "scale out so two different ways that we can end up with automated outages I don't have enough servers here to handle",
    "start": "1866470",
    "end": "1873220"
  },
  {
    "text": "the load this is an outage from the customers perspective here's kind of",
    "start": "1873220",
    "end": "1879730"
  },
  {
    "text": "everything in one slide we've got a blued appointment we may have static or hard coded addresses we've got a mix of",
    "start": "1879730",
    "end": "1885760"
  },
  {
    "text": "manually operated and automation in our environment that's we're intending to do",
    "start": "1885760",
    "end": "1891010"
  },
  {
    "text": "blue we're tending to do green we end up with something more like grey we're not quite sure which production application",
    "start": "1891010",
    "end": "1896830"
  },
  {
    "text": "is using which database we can end up with multiple databases in our environment sure nobody in this room has",
    "start": "1896830",
    "end": "1902230"
  },
  {
    "text": "this problem but with AWS it's easy to build applications it's easy to build software it's easy to copy data around",
    "start": "1902230",
    "end": "1909580"
  },
  {
    "text": "and it's easy to get everything a little bit out of step and it can be difficult",
    "start": "1909580",
    "end": "1914830"
  },
  {
    "text": "to operate in that case so blue green",
    "start": "1914830",
    "end": "1919960"
  },
  {
    "text": "gray so what can we do about this pretty simple steps as we're approaching",
    "start": "1919960",
    "end": "1925690"
  },
  {
    "text": "automation we need to start using automation we need to start using tools like cloud trail I'm sorry cloud",
    "start": "1925690",
    "end": "1931929"
  },
  {
    "text": "formation but a lot of services will start with the word cloud what should we",
    "start": "1931929",
    "end": "1937240"
  },
  {
    "text": "do we should decoupled the infrastructure into stacks based on the responsibilities the function of that",
    "start": "1937240",
    "end": "1943210"
  },
  {
    "text": "piece of the application and any requirements around persistence so what",
    "start": "1943210",
    "end": "1948730"
  },
  {
    "text": "does that look like in practice with confirmation I can make stacks individually to find",
    "start": "1948730",
    "end": "1953830"
  },
  {
    "text": "stacks and use different stacks for different parts of my application and then manage them independently I can",
    "start": "1953830",
    "end": "1960940"
  },
  {
    "text": "still link these together into a logical application this is still these these stacks are called nested in the idiom of",
    "start": "1960940",
    "end": "1966910"
  },
  {
    "text": "Confirmation our partner tooling uses different phrases to describe this exact same concept but what I've done is I",
    "start": "1966910",
    "end": "1974530"
  },
  {
    "text": "decoupled web server administration of the administration of the infrastructure",
    "start": "1974530",
    "end": "1979720"
  },
  {
    "text": "web servers like to scale in and scale out a lot I'd like to replace the code there I'd like to do Bluegreen deployments I don't",
    "start": "1979720",
    "end": "1985809"
  },
  {
    "text": "often have to may do that same type of work my database here so what we see is folks",
    "start": "1985809",
    "end": "1990860"
  },
  {
    "text": "building a confirmation template with everything in it running that confirmation template for a year of longer and then somebody comes along and",
    "start": "1990860",
    "end": "1997970"
  },
  {
    "text": "naively drops the stack right so I lose my I lose everything in that case and so",
    "start": "1997970",
    "end": "2004360"
  },
  {
    "text": "in this model we're going to carve out functional components and especially the stateful components in two separate",
    "start": "2004360",
    "end": "2011020"
  },
  {
    "text": "administrative domains so this concept of administrative domain but here we mean application function so here's a",
    "start": "2011020",
    "end": "2019720"
  },
  {
    "text": "way that we can use conformation here's how confirmation works in this model I've carved out everything into",
    "start": "2019720",
    "end": "2024880"
  },
  {
    "text": "individual stacks my web administrator or the infrastructure the DevOps person",
    "start": "2024880",
    "end": "2030610"
  },
  {
    "text": "in charge of my web tier is going to edit a template they save it they run a",
    "start": "2030610",
    "end": "2036040"
  },
  {
    "text": "native they run a to DES confirmation to develop a change set based on the change",
    "start": "2036040",
    "end": "2041260"
  },
  {
    "text": "I just made I view the change set and this is where we have an idea maybe another person is going to view the",
    "start": "2041260",
    "end": "2047590"
  },
  {
    "text": "change set not the person that made the change but another person is going to validate that that's a good change to",
    "start": "2047590",
    "end": "2052780"
  },
  {
    "text": "make in the production environment and critically that my web application update doesn't say anything about a",
    "start": "2052780",
    "end": "2060100"
  },
  {
    "text": "database right there shouldn't be any need may be an object pointing to the database that we're not going to replace",
    "start": "2060100",
    "end": "2066490"
  },
  {
    "text": "the database as part of this function and then when we're all ready we're comfortable with the changes that are",
    "start": "2066490",
    "end": "2071830"
  },
  {
    "text": "made and lots of partner tooling has exactly the same type of concept of like a pre-flight check what sort of things",
    "start": "2071830",
    "end": "2077620"
  },
  {
    "text": "will happen then we go ahead and execute the change and I use this this icon",
    "start": "2077620",
    "end": "2083050"
  },
  {
    "text": "directly out of our manual mainly because I like the idea that confirmation is a little crane by doing",
    "start": "2083050",
    "end": "2088120"
  },
  {
    "text": "things but the confirmation then gets to work and updates to stack and updates the state machine that describes our",
    "start": "2088120",
    "end": "2094690"
  },
  {
    "text": "application on our behalf so here's our",
    "start": "2094690",
    "end": "2100420"
  },
  {
    "text": "friendly AWS management console the ADA based management console lives in a",
    "start": "2100420",
    "end": "2106960"
  },
  {
    "text": "universe of managed services intended to help me automate my production environments if I use these at the same",
    "start": "2106960",
    "end": "2113890"
  },
  {
    "text": "time if I use the management console at the same time that I use CloudFormation in the same account I can end up in with",
    "start": "2113890",
    "end": "2120370"
  },
  {
    "text": "problems that's case maybe confirmation just doesn't work worst case I scope in database assets",
    "start": "2120370",
    "end": "2127930"
  },
  {
    "text": "persistent stateful assets and into the confirmation scope and I start automating outages so the anti pattern",
    "start": "2127930",
    "end": "2137710"
  },
  {
    "text": "is incomplete automation and testing decouples stateful and stateless infrastructure management automation",
    "start": "2137710",
    "end": "2144369"
  },
  {
    "text": "don't automate these with the same exact we can use the same tool but we're not",
    "start": "2144369",
    "end": "2149380"
  },
  {
    "text": "going to use the same configuration for stateless and stateful infrastructure we want to limit and I can't emphasize this",
    "start": "2149380",
    "end": "2155440"
  },
  {
    "text": "enough limit interactive access to infrastructure we don't want Mike",
    "start": "2155440",
    "end": "2160480"
  },
  {
    "text": "logging in at three o'clock in the morning to make a change that the you then forgets to undo if nothing else",
    "start": "2160480",
    "end": "2167290"
  },
  {
    "text": "this is going to mess up our compliance infrastructure how can we get to that we're gonna define and enforce a tagging",
    "start": "2167290",
    "end": "2172900"
  },
  {
    "text": "policy most assets in AWS can be tagged they can be tagged with a tag like version number of the application and we",
    "start": "2172900",
    "end": "2180280"
  },
  {
    "text": "can check that version number in our cloud trail artifacts map that to our CMDB and make sure that this was a",
    "start": "2180280",
    "end": "2185559"
  },
  {
    "text": "change that is associated with it with a valid version of my app ideally that's",
    "start": "2185559",
    "end": "2193240"
  },
  {
    "text": "gonna help us catch folks making changes outside of our automation implement blue",
    "start": "2193240",
    "end": "2198640"
  },
  {
    "text": "green and rolling updates put new infrastructure online check that it's healthy before you put traffic on it",
    "start": "2198640",
    "end": "2204520"
  },
  {
    "text": "that's all that means rolling updates is a kind of another method to get there test infrastructure",
    "start": "2204520",
    "end": "2211780"
  },
  {
    "text": "and automation and non production environments this again is that conversation around administrative",
    "start": "2211780",
    "end": "2217359"
  },
  {
    "text": "domains if I define my entire environment with CloudFormation I can make another environment with",
    "start": "2217359",
    "end": "2222430"
  },
  {
    "text": "Confirmation make sure that all these changes are doing exactly what I want before I go ahead and roll that into",
    "start": "2222430",
    "end": "2228010"
  },
  {
    "text": "production I won't say the word administrative domain ever again do you guys are okay with that I think",
    "start": "2228010",
    "end": "2235150"
  },
  {
    "text": "we get the point Allen will hand it over to you oh you want to operate the beaker",
    "start": "2235150",
    "end": "2242200"
  },
  {
    "text": "so is it Harry it's a little touchy okay so those of you in the room who work for",
    "start": "2242200",
    "end": "2249549"
  },
  {
    "text": "an MSP or were involved with your MSP is ordered to the AWS manager",
    "start": "2249549",
    "end": "2254740"
  },
  {
    "text": "program would have seen control as part of that that says you don't have backups",
    "start": "2254740",
    "end": "2260320"
  },
  {
    "text": "unless they're tested and the reason that comes about is because I once experienced Schrodinger's backup it's a",
    "start": "2260320",
    "end": "2266920"
  },
  {
    "text": "bit of physics background if you're not aware what Schrodinger references oh and Schrodinger in 1935 said that you know",
    "start": "2266920",
    "end": "2274900"
  },
  {
    "text": "he came up with a super elegant thought experiment that had something to do quantum mechanics you don't care the",
    "start": "2274900",
    "end": "2280600"
  },
  {
    "text": "point is there was a cat in a box and if a random thing happened the cat was either dead or alive and unless you open the box you couldn't tell so unless you",
    "start": "2280600",
    "end": "2287380"
  },
  {
    "text": "measured what happened you couldn't tell so how does this apply to the world we're in well I've got this",
    "start": "2287380",
    "end": "2296020"
  },
  {
    "text": "infrastructure this application it's an easy-to instance it has a bunch of EBS",
    "start": "2296020",
    "end": "2302380"
  },
  {
    "text": "volumes on it that I keep my database saw or I have some persistent storage on",
    "start": "2302380",
    "end": "2307720"
  },
  {
    "text": "that I need to keep backed up because that's my business is the data all I",
    "start": "2307720",
    "end": "2313150"
  },
  {
    "text": "have a database and I'm using EBS snapshots to back it up I turn it on off",
    "start": "2313150",
    "end": "2318490"
  },
  {
    "text": "before I do the backup all right don't because hafen does that automation actually work our CD scripts are great",
    "start": "2318490",
    "end": "2325890"
  },
  {
    "text": "unless they never work and you know then I do a bunch of snapshots using the",
    "start": "2325890",
    "end": "2333490"
  },
  {
    "text": "laser and I create a back a bunch of slapshot snapshots over time or I'm using the native tools and pushing that",
    "start": "2333490",
    "end": "2339790"
  },
  {
    "text": "stuff directly to s3 and I'm done right I'm making backups I can look my CTO in",
    "start": "2339790",
    "end": "2346090"
  },
  {
    "text": "the face and go listen we've got backups we're all good but the problem that we",
    "start": "2346090",
    "end": "2354580"
  },
  {
    "text": "run into is the schrödinger's backup we have a random event that may or may not",
    "start": "2354580",
    "end": "2361510"
  },
  {
    "text": "fire at any point in time the ultimate definition of an outage or a disaster is that it may or may not ever strike you",
    "start": "2361510",
    "end": "2367869"
  },
  {
    "text": "and it's may or may not ever trigger some kind of a recovery and after we're",
    "start": "2367869",
    "end": "2375850"
  },
  {
    "text": "done recovering we may or may not have a living application why is that well my",
    "start": "2375850",
    "end": "2382300"
  },
  {
    "text": "most personal recent example is restore dattaji Zed from s3 because I was using",
    "start": "2382300",
    "end": "2387430"
  },
  {
    "text": "my sequel backup and pulled it onto the box and man that copy was quick and I hadn't done Ellis -",
    "start": "2387430",
    "end": "2396010"
  },
  {
    "text": "I led just a normal LS it was there and I tore ends up do you know did the whole Horan's app thing and man that was super",
    "start": "2396010",
    "end": "2403030"
  },
  {
    "text": "quick and it was just still tons of storage on this like this is going to well until I looked into some details",
    "start": "2403030",
    "end": "2410740"
  },
  {
    "text": "and realized that a zero kilobyte backup is just an inode and my database is not",
    "start": "2410740",
    "end": "2418000"
  },
  {
    "text": "just an inode that's useless and then I went in my history back and there were tons of files in there and I hadn't been",
    "start": "2418000",
    "end": "2425020"
  },
  {
    "text": "billed for any of them in like three months because they were all zero and what you know we do when we back up an",
    "start": "2425020",
    "end": "2432730"
  },
  {
    "text": "environment we have a jump box and you know that jump box manages the security remains between my account that you know",
    "start": "2432730",
    "end": "2439210"
  },
  {
    "text": "I pushed the stuff into another account and it has a disk on it and I copy the backup onto the disk and then I tore it",
    "start": "2439210",
    "end": "2445660"
  },
  {
    "text": "up and then I push it except that one day where I was messing our security groups and broke its ability to access",
    "start": "2445660",
    "end": "2451750"
  },
  {
    "text": "s3 and the disk filled up and I never alerted on it now this is all a lesson",
    "start": "2451750",
    "end": "2457750"
  },
  {
    "text": "in my own dirty that's not what I want you to take away from Schrodinger's back",
    "start": "2457750",
    "end": "2463240"
  },
  {
    "text": "up is not about doing silly things that break backups because anybody who's managed to mess a tape library can tell",
    "start": "2463240",
    "end": "2469180"
  },
  {
    "text": "you it never ever works we know this we're prepared for this the 99% of the",
    "start": "2469180",
    "end": "2475540"
  },
  {
    "text": "tapes that we found will always be there the problem that comes in is when we don't ever test them so the mantra that",
    "start": "2475540",
    "end": "2483910"
  },
  {
    "text": "I then that I install in every partner and customer I talk to is a backup is",
    "start": "2483910",
    "end": "2489370"
  },
  {
    "text": "just data until you test it you do not have backups unless you're doing some",
    "start": "2489370",
    "end": "2495940"
  },
  {
    "text": "kind of testing no testing doesn't mean restoring a massively complicated",
    "start": "2495940",
    "end": "2501900"
  },
  {
    "text": "environment every time you run a backup you know I've managed billion row tables",
    "start": "2501900",
    "end": "2507850"
  },
  {
    "text": "in databases you can't just restore that it's not practical but what you can do is go",
    "start": "2507850",
    "end": "2514300"
  },
  {
    "text": "I am restore I'm backing up files are they getting bigger every day no backup",
    "start": "2514300",
    "end": "2520180"
  },
  {
    "text": "in the anything useful has ever gotten smaller and if it is you're doing it wrong so",
    "start": "2520180",
    "end": "2526260"
  },
  {
    "text": "are my backups getting bigger every day ah I am am i saving zero files or size",
    "start": "2526260",
    "end": "2532710"
  },
  {
    "text": "files we have a number of EBS volumes and EBS snapshots going up and am i",
    "start": "2532710",
    "end": "2539700"
  },
  {
    "text": "trimming the oldest ones and I'm actually deleting them using tools like cloud trail to identify these things and",
    "start": "2539700",
    "end": "2546119"
  },
  {
    "text": "go okay I know I'm deleting files from two weeks ago that automation didn't break I have things to delete I didn't",
    "start": "2546119",
    "end": "2553260"
  },
  {
    "text": "run the delete and zero things happened testing and and ensuring that your",
    "start": "2553260",
    "end": "2558869"
  },
  {
    "text": "database exists so that you're at least you know I talked about databases but let's be honest that's where this happens this does not happen on",
    "start": "2558869",
    "end": "2565859"
  },
  {
    "text": "unimportant files never you could always find your mail",
    "start": "2565859",
    "end": "2570930"
  },
  {
    "text": "from two years ago that critical database never so it's really important",
    "start": "2570930",
    "end": "2577560"
  },
  {
    "text": "to think back to what makes sense around a backup more than just going okay I",
    "start": "2577560",
    "end": "2583320"
  },
  {
    "text": "have a restore process and then we test that an application you know that takes time and that takes discipline and that",
    "start": "2583320",
    "end": "2589080"
  },
  {
    "text": "takes a lot of operational excellence to do today you could go and write some super simple lamda code that checks the",
    "start": "2589080",
    "end": "2596340"
  },
  {
    "text": "size of your backups and tells you when yesterday is bigger than today or the",
    "start": "2596340",
    "end": "2602820"
  },
  {
    "text": "same size and that size is zero so the",
    "start": "2602820",
    "end": "2610050"
  },
  {
    "text": "anti-pattern nante pattern schrödinger's backup and tested",
    "start": "2610050",
    "end": "2615390"
  },
  {
    "text": "unvalidated backups with even the simplest allocation the best way to",
    "start": "2615390",
    "end": "2620430"
  },
  {
    "text": "manage IRS's automate your backups but monitor the automation continually and a",
    "start": "2620430",
    "end": "2626850"
  },
  {
    "text": "depth it means ensuring that you're doing sensical things and you're checking the",
    "start": "2626850",
    "end": "2633359"
  },
  {
    "text": "most sensitive things about it and very often you want to use the most native",
    "start": "2633359",
    "end": "2640590"
  },
  {
    "text": "tools for a problem EBS snapshots are phenomenally good for backing up most things except live and",
    "start": "2640590",
    "end": "2647820"
  },
  {
    "text": "hot databases don't do it just it doesn't work you can't snapshot alive and hot database it",
    "start": "2647820",
    "end": "2654570"
  },
  {
    "text": "we'll be inconsistent if you've worked at databases you know this to be true I promise you it is use the native tools",
    "start": "2654570",
    "end": "2660600"
  },
  {
    "text": "and monitor how those native tools are working the last point I'll make is as",
    "start": "2660600",
    "end": "2666840"
  },
  {
    "text": "you walk out of this room somebody will turn to someone else and go we're only worried about the backup thing we replicate and I'll tell you",
    "start": "2666840",
    "end": "2674190"
  },
  {
    "text": "what the problem of replication is it's when LM planning to update the password",
    "start": "2674190",
    "end": "2679800"
  },
  {
    "text": "of some users in LDAP directory on a global infrastructure he needed to you",
    "start": "2679800",
    "end": "2686010"
  },
  {
    "text": "know he was asked that was in a specific place needed all their password reset cool so he wrote some a script that",
    "start": "2686010",
    "end": "2693120"
  },
  {
    "text": "interface with the LDAP directory and updated it except you forgot the where clause and that kind of sucks because",
    "start": "2693120",
    "end": "2699870"
  },
  {
    "text": "you wouldn't believe how quickly that change replicated to every copy of the LDAP directory and ruined everything",
    "start": "2699870",
    "end": "2708840"
  },
  {
    "text": "and we didn't have good backups I'd",
    "start": "2708840",
    "end": "2714210"
  },
  {
    "text": "actually suggested having everybody's password be password would be a relief for our IT operation that helped us for",
    "start": "2714210",
    "end": "2720000"
  },
  {
    "text": "at least a little while yeah listen the computers logged in perfectly yeah",
    "start": "2720000",
    "end": "2726440"
  },
  {
    "text": "so how do we establish best practice in our environment we've gone through a four let's call them classic anti",
    "start": "2727310",
    "end": "2734790"
  },
  {
    "text": "patterns and we talked about best practices that we could use to solve those particular use cases there are",
    "start": "2734790",
    "end": "2740910"
  },
  {
    "text": "more anti patterns that exist in the wild these are the ones that I see most frequently I've worked with about 150",
    "start": "2740910",
    "end": "2748080"
  },
  {
    "text": "AWS partners this in the last year either directly or indirectly and investigating infrastructures and these",
    "start": "2748080",
    "end": "2753870"
  },
  {
    "text": "are the ones that bubble up most often as findings so how can we get the best",
    "start": "2753870",
    "end": "2759180"
  },
  {
    "text": "practice in our environment I think we need to understand that it's a journey we need to identify the best practices",
    "start": "2759180",
    "end": "2765780"
  },
  {
    "text": "we want to learn from mistakes and we ideally want to learn from the mistakes of other people like Alan I'm a basket",
    "start": "2765780",
    "end": "2774690"
  },
  {
    "text": "case for learning yeah we want to use fa Q's the people like Alan right you know",
    "start": "2774690",
    "end": "2780300"
  },
  {
    "text": "in a bad mood in the middle of the night we want to use troubleshooting guides we want to use back emitter recovery steps",
    "start": "2780300",
    "end": "2786060"
  },
  {
    "text": "we want to think about these things before we deploy it's often much more difficult to fix things after we put it into production",
    "start": "2786060",
    "end": "2792200"
  },
  {
    "text": "we want to continually test our assumptions we want to do things like trial recoveries we want to do things",
    "start": "2792200",
    "end": "2799290"
  },
  {
    "text": "like Dr exercises we don't need to get obsessive about automation for these things we can do them manually and there",
    "start": "2799290",
    "end": "2805500"
  },
  {
    "text": "can be very revealing we can do wargaming this is something that I talked with partners and customers a lot",
    "start": "2805500",
    "end": "2811740"
  },
  {
    "text": "about we can absolutely automate fully automate our entire recovery stack lots",
    "start": "2811740",
    "end": "2816810"
  },
  {
    "text": "of people are there but it's often very very instructional to sit down at a",
    "start": "2816810",
    "end": "2821880"
  },
  {
    "text": "round table with our ops staff maybe with our our chief of security and just",
    "start": "2821880",
    "end": "2828090"
  },
  {
    "text": "toss out a scenario what would happen if we lost control of our route credentials in our primary account and then we'll",
    "start": "2828090",
    "end": "2835290"
  },
  {
    "text": "see maybe the room gets a little quiet start to think through things somebody",
    "start": "2835290",
    "end": "2840360"
  },
  {
    "text": "goes up mm-hmm maybe maybe that and then you know maybe somebody goes white maybe somebody runs",
    "start": "2840360",
    "end": "2846660"
  },
  {
    "text": "out of the room these are the most these are the best kind of wargaming scenarios when somebody goes and realizes some things they should do immediately but we",
    "start": "2846660",
    "end": "2853620"
  },
  {
    "text": "can we can test our assumptions and we can wargame we don't need to get to the",
    "start": "2853620",
    "end": "2858690"
  },
  {
    "text": "automation right away and we can even do this iteratively we can do you know wargame every quarter where we sit and",
    "start": "2858690",
    "end": "2864600"
  },
  {
    "text": "have a scenario that we walk through we let me do a paper exercise very instructional but we're gonna reassess",
    "start": "2864600",
    "end": "2871860"
  },
  {
    "text": "frequently the big the biggest takeaway is AWS changes we enhance the service we",
    "start": "2871860",
    "end": "2879540"
  },
  {
    "text": "had a thousand feature or major service releases in 2016 I don't know what the number is in 2017 and oftentimes we're",
    "start": "2879540",
    "end": "2888360"
  },
  {
    "text": "delivering services designed to help you with these problematic use cases with these anti-patterns you can schedule",
    "start": "2888360",
    "end": "2895950"
  },
  {
    "text": "periodic architecture reviews with AWS solutions architects so AWS architects are incented and trained to help you",
    "start": "2895950",
    "end": "2903930"
  },
  {
    "text": "identify these anti-patterns and to help you to help you identify best practices that we can use prioritize based on risk",
    "start": "2903930",
    "end": "2912000"
  },
  {
    "text": "or prioritize based on cost or ideally both and ideally give you pass for",
    "start": "2912000",
    "end": "2917580"
  },
  {
    "text": "remediation that may be cost neutral maybe save you a budget cost in the environment maybe relatively easy to deploy but",
    "start": "2917580",
    "end": "2924660"
  },
  {
    "text": "could save you from having a bad day so use those but use those facilities we",
    "start": "2924660",
    "end": "2933270"
  },
  {
    "text": "have a service called trusted advisor so use AWS services trusted advisor is available on the console and I will",
    "start": "2933270",
    "end": "2939869"
  },
  {
    "text": "admit it's a useful console service so maybe authenticate yourself to use AWS trusted advisor and nothing else on",
    "start": "2939869",
    "end": "2946410"
  },
  {
    "text": "the console log in and take a look at it AWS trusted advisor performs automation",
    "start": "2946410",
    "end": "2952320"
  },
  {
    "text": "the machine learning in your account looking for anti-patterns it's looking for a lot of the stuff that we discussed",
    "start": "2952320",
    "end": "2957540"
  },
  {
    "text": "today it's looking for opportunities for fault tolerance it's gonna identify risks in terms of security it also talks",
    "start": "2957540",
    "end": "2965850"
  },
  {
    "text": "about things that we didn't get to today we don't have time to get through to ways to you know optimize for performance and add up anti patterns",
    "start": "2965850",
    "end": "2971460"
  },
  {
    "text": "that didn't is the availability of performance like taking advantages and do instance types it's also going to",
    "start": "2971460",
    "end": "2977940"
  },
  {
    "text": "make recommendations around cost optimization so again these are AWS best practices that we learn from helping",
    "start": "2977940",
    "end": "2984960"
  },
  {
    "text": "customers have success on the platform we embed those we code those up and we",
    "start": "2984960",
    "end": "2989970"
  },
  {
    "text": "drive them into trusted advisor and we expose that on the console it's also available via an API which is how I",
    "start": "2989970",
    "end": "2995880"
  },
  {
    "text": "recommend you use trusted advisor use partners that use partner solutions",
    "start": "2995880",
    "end": "3001970"
  },
  {
    "text": "designed for security and compliance so if what I talk today about cloud trail",
    "start": "3001970",
    "end": "3007280"
  },
  {
    "text": "and config was a little new to you we've got partners that are expert in these areas I mentioned some of them earlier",
    "start": "3007280",
    "end": "3013540"
  },
  {
    "text": "partners can help you look at your cloud trail partners can help you look at config make sense of those and define",
    "start": "3013540",
    "end": "3019850"
  },
  {
    "text": "compliance policies around them partners can do external penetration testing to validate our assumptions about the",
    "start": "3019850",
    "end": "3025850"
  },
  {
    "text": "environment we can keep that up to date and partners have a vast array of services designed to help you operate",
    "start": "3025850",
    "end": "3033080"
  },
  {
    "text": "your AWS environment securely and efficiency take advantage of those and",
    "start": "3033080",
    "end": "3039550"
  },
  {
    "text": "then finally I want to introduce I think this is pretty well known but I really want to talk about AWS well architected",
    "start": "3039550",
    "end": "3046550"
  },
  {
    "text": "this is a collection of best practices that we've published in a series of five",
    "start": "3046550",
    "end": "3052460"
  },
  {
    "text": "white papers where we where we investigate your operation those kind of",
    "start": "3052460",
    "end": "3058329"
  },
  {
    "text": "the detailed runtime operation of your AWS environment things like you're not using you know are you using the root",
    "start": "3058329",
    "end": "3063579"
  },
  {
    "text": "account as well as do you have a relationship with the support entity at AWS so kind of more operational things",
    "start": "3063579",
    "end": "3069959"
  },
  {
    "text": "56 questions embedded in that white paper take a look at them read them",
    "start": "3069959",
    "end": "3075029"
  },
  {
    "text": "there's a lot of best practices that we recommend and then we go into detail and",
    "start": "3075029",
    "end": "3080410"
  },
  {
    "text": "kind of some of the supporting white papers AWS solutions architects are trained and incentive to perform well",
    "start": "3080410",
    "end": "3086380"
  },
  {
    "text": "architected reviews with you we want to engage with you we'll walk you through these 56",
    "start": "3086380",
    "end": "3092650"
  },
  {
    "text": "questions and we'll help you build a prioritized list of things to fix in your environment this is something we",
    "start": "3092650",
    "end": "3098949"
  },
  {
    "text": "desperately want to do please reach out through your partner developer manager or your account rep and we'd love to",
    "start": "3098949",
    "end": "3105099"
  },
  {
    "text": "perform this exercise with you and with that thank you that's our presentation",
    "start": "3105099",
    "end": "3110589"
  },
  {
    "text": "today we will be at the [Applause]",
    "start": "3110589",
    "end": "3120789"
  }
]