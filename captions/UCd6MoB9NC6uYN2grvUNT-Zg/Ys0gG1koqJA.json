[
  {
    "start": "0",
    "end": "38000"
  },
  {
    "text": "hi good afternoon welcome to reinvent my name is Jeff Lyon this is Andrew Kiggins",
    "start": "0",
    "end": "5460"
  },
  {
    "text": "we'd like to talk to you today about defending against DDoS attacks there is no Q&A for this session but Andrew and I",
    "start": "5460",
    "end": "12090"
  },
  {
    "text": "will be available at the AWS security booth afterwards for any questions that you might have so we'd like to get",
    "start": "12090",
    "end": "19140"
  },
  {
    "text": "started by talking a little bit about the threat landscape and some of the more common attacks that we see on AWS from there we're going to move into a",
    "start": "19140",
    "end": "25769"
  },
  {
    "text": "discussion of the mitigations that we use to defend AWS infrastructure and",
    "start": "25769",
    "end": "31740"
  },
  {
    "text": "then we're going to talk about architecture that you can employ to take advantage of some of the mitigation that we've built so some information that's",
    "start": "31740",
    "end": "41250"
  },
  {
    "start": "38000",
    "end": "38000"
  },
  {
    "text": "useful going into this presentation is a basic understanding of DDoS attacks IP based protocols in the OSI model it's",
    "start": "41250",
    "end": "49410"
  },
  {
    "text": "also useful to have an understanding of architecting on AWS using services like ec2 VPC you'll be and edge services like",
    "start": "49410",
    "end": "58410"
  },
  {
    "text": "cloud front and route 53 and lastly it's good to have a basic understanding of",
    "start": "58410",
    "end": "64739"
  },
  {
    "text": "reading packet captured with Wireshark because later in the presentation we're going to take a deep dive into some of the attack so we're gonna be using peak",
    "start": "64739",
    "end": "70920"
  },
  {
    "text": "apps in that process so let's focus on some of the common attacks if you've",
    "start": "70920",
    "end": "77759"
  },
  {
    "start": "77000",
    "end": "77000"
  },
  {
    "text": "read the news a lot you see a lot of headlines and sometimes it can look kind of scary headlines like criminal",
    "start": "77759",
    "end": "83850"
  },
  {
    "text": "extortion DDoS attacks are more powerful mega attacks on the rise DDoS reflection",
    "start": "83850",
    "end": "91380"
  },
  {
    "text": "attacks and then there's this one if you attended the keynote this morning",
    "start": "91380",
    "end": "96390"
  },
  {
    "text": "you noticed Andy said the cloud is the new normal well according into this headline 200 to 400 gigabit DDoS attacks",
    "start": "96390",
    "end": "103079"
  },
  {
    "text": "are the new normal but that's not what we're seeing well they do occur we see that the",
    "start": "103079",
    "end": "108869"
  },
  {
    "text": "average attack is just over a gigabit and this is well within our ability to handle within our infrastructure and",
    "start": "108869",
    "end": "115110"
  },
  {
    "text": "some of the architectural best practices that we're going to discuss we also see that the average attack is about 39",
    "start": "115110",
    "end": "122520"
  },
  {
    "text": "minutes that's interesting because that's long enough for an attacker to cause an impact to your application but",
    "start": "122520",
    "end": "130170"
  },
  {
    "text": "not necessarily long enough for you to be engaged do a root cause analysis and then drive resolution of any impact to your",
    "start": "130170",
    "end": "136830"
  },
  {
    "text": "availability and lastly we see that 85% of attacks are directly targeting the",
    "start": "136830",
    "end": "143490"
  },
  {
    "text": "network or the service infrastructure and for that reason we want to focus in",
    "start": "143490",
    "end": "149850"
  },
  {
    "text": "those areas with a lot of the mitigations that we've built so despite",
    "start": "149850",
    "end": "155550"
  },
  {
    "start": "154000",
    "end": "154000"
  },
  {
    "text": "all the different reflection attacks and different vectors you hear about in the media we'd like to focus on DDoS attacks",
    "start": "155550",
    "end": "162060"
  },
  {
    "text": "in terms of three basic categories first volumetric attacks or layer three",
    "start": "162060",
    "end": "167850"
  },
  {
    "text": "attacks these are attacks that attempt to impact the availability of an",
    "start": "167850",
    "end": "173070"
  },
  {
    "text": "application by congesting the network with more traffic than it's able to handle similarly there's state",
    "start": "173070",
    "end": "180570"
  },
  {
    "text": "exhaustion attacks these attacks can also be large in volume but are more",
    "start": "180570",
    "end": "186630"
  },
  {
    "text": "targeted towards abusing the protocol and stressing the ability of servers IPS",
    "start": "186630",
    "end": "193560"
  },
  {
    "text": "is firewalls and load balancers to prevent them from being able to handle new connections unless frequently we see",
    "start": "193560",
    "end": "200940"
  },
  {
    "text": "application layer DDoS attacks these are attacks whereby the attacker attempts to",
    "start": "200940",
    "end": "206370"
  },
  {
    "text": "emulate real user traffic and exhaust for resources of the application so I'd",
    "start": "206370",
    "end": "212520"
  },
  {
    "start": "211000",
    "end": "211000"
  },
  {
    "text": "like you to take a look at this pie chart you're gonna see it again throughout the presentation because we're using it as a bread crumb and what",
    "start": "212520",
    "end": "219120"
  },
  {
    "text": "that means in the upper right hand side of the screen you're going to see a green slice or a yellow slice or a blue",
    "start": "219120",
    "end": "225000"
  },
  {
    "text": "slice or a combination of the three and we're using that to indicate whether an architectural best practice or a",
    "start": "225000",
    "end": "231150"
  },
  {
    "text": "mitigation best applies to volumetric attacks State exhaustion attacks or application layer",
    "start": "231150",
    "end": "237690"
  },
  {
    "text": "attacks so by large the most common",
    "start": "237690",
    "end": "243000"
  },
  {
    "text": "attack that we see today is the SSCP reflection attack these are attacks that",
    "start": "243000",
    "end": "248459"
  },
  {
    "text": "can be large in volume but luckily are also very easy to detect because they have a clear signature some other",
    "start": "248459",
    "end": "256380"
  },
  {
    "text": "volumetric attacks that we see are ntp reflection attacks DNS reflection attacks charge in attacks in less",
    "start": "256380",
    "end": "263729"
  },
  {
    "text": "frequently SNMP reflection attacks you'll notice and you'll want to take",
    "start": "263729",
    "end": "268850"
  },
  {
    "text": "note for later discussion all of these are on the UDP protocol in terms of",
    "start": "268850",
    "end": "275060"
  },
  {
    "text": "state exhaustion TCP syn floods have always been pretty common and we continue to see that they're common to",
    "start": "275060",
    "end": "281120"
  },
  {
    "text": "this day and lastly application layer attacks you may be familiar with attacks",
    "start": "281120",
    "end": "286880"
  },
  {
    "text": "like HTTP GET floods slow loris attacks these attacks to remain common but the",
    "start": "286880",
    "end": "293960"
  },
  {
    "text": "new trend that we're seeing is DNS query floods and this is a little bit different from a DNS reflection attack",
    "start": "293960",
    "end": "300050"
  },
  {
    "text": "in that it's not a reflection it's not a DNS payload it's actually a legitimate",
    "start": "300050",
    "end": "305690"
  },
  {
    "text": "seeming request from an actual user or appears to be from an actual user but in",
    "start": "305690",
    "end": "310940"
  },
  {
    "text": "fact they can be malicious and targeting the ability of a DNS server to serve legitimate users so I want to focus a",
    "start": "310940",
    "end": "320720"
  },
  {
    "start": "319000",
    "end": "319000"
  },
  {
    "text": "little bit on volumetric attacks specifically UDP amplification these are",
    "start": "320720",
    "end": "326240"
  },
  {
    "text": "somewhat easy to launch and the way that they work is an attacker who wants to impact the availability of a network or",
    "start": "326240",
    "end": "332150"
  },
  {
    "text": "application can spoof the IP address of their victim spoofed requests are then",
    "start": "332150",
    "end": "337970"
  },
  {
    "text": "sent to what's known as a reflector a reflector is a regular server on the internet hosting DNS SSDP and TP and so",
    "start": "337970",
    "end": "346700"
  },
  {
    "text": "forth and these are often unwitting participants in the attack and what that",
    "start": "346700",
    "end": "353720"
  },
  {
    "text": "means is say that the attacker sends a small request to the reflector the reflector will then respond oftentimes",
    "start": "353720",
    "end": "360289"
  },
  {
    "text": "with an amplification that's much larger than an that initial request so",
    "start": "360289",
    "end": "367100"
  },
  {
    "start": "365000",
    "end": "365000"
  },
  {
    "text": "depending on the amplification attack for the specific vector it has what we call an amplification factor the",
    "start": "367100",
    "end": "375200"
  },
  {
    "text": "amplification factor can be thirty times the size of the request or as large as",
    "start": "375200",
    "end": "381400"
  },
  {
    "text": "556 times the size of the request and so what that means in basic terms is if the",
    "start": "381400",
    "end": "387320"
  },
  {
    "text": "attacker sends one gigabit of traffic it's possible that these reflectors could unwittingly respond with 30",
    "start": "387320",
    "end": "394430"
  },
  {
    "text": "gigabits of traffic 500 gigabits attack gigabits of traffic",
    "start": "394430",
    "end": "399860"
  },
  {
    "text": "luckily we've not seen that occur yet but these are possibilities if the attacker finds enough reflectors in",
    "start": "399860",
    "end": "406039"
  },
  {
    "text": "order to cause these reflections and we also see sometimes that DDoS attacks",
    "start": "406039",
    "end": "412520"
  },
  {
    "start": "409000",
    "end": "409000"
  },
  {
    "text": "occur with multiple vectors sometimes the attacker will send an SS TP flood in",
    "start": "412520",
    "end": "418009"
  },
  {
    "text": "ntp flood a DNS flood but sometimes they'll also do a combination of these",
    "start": "418009",
    "end": "423169"
  },
  {
    "text": "attacks so let's take a look at an example in this particular example over",
    "start": "423169",
    "end": "429169"
  },
  {
    "text": "a period of time an attacker first tried an SNMP amplification was able to",
    "start": "429169",
    "end": "436250"
  },
  {
    "text": "generate a little bit of traffic but not too much later we see some UDP fragments",
    "start": "436250",
    "end": "441979"
  },
  {
    "text": "and another SSDP reflection attack but",
    "start": "441979",
    "end": "447650"
  },
  {
    "text": "it wasn't until later that the attacker tried an SS DP reflection attack in conjunction with an ntp reflection",
    "start": "447650",
    "end": "454039"
  },
  {
    "text": "attack and was successful in generating a much larger volume of traffic and the",
    "start": "454039",
    "end": "461479"
  },
  {
    "text": "interesting thing is that all of this occurred over the course of 6 hours and so what that means is if you were paying",
    "start": "461479",
    "end": "468349"
  },
  {
    "text": "attention to your network traffic you may have noticed the attack initially SNMP amplification and had a period of",
    "start": "468349",
    "end": "475520"
  },
  {
    "text": "about five or six hours in order to respond in order to put your resources on standby begin scaling your",
    "start": "475520",
    "end": "480979"
  },
  {
    "text": "application or taking other defensive measures so now let's take a look at the",
    "start": "480979",
    "end": "486259"
  },
  {
    "text": "mitigations that we use on AWS so when you're in your own data center the",
    "start": "486259",
    "end": "493370"
  },
  {
    "start": "489000",
    "end": "489000"
  },
  {
    "text": "infrastructure and the security remains your responsibility this means in a DDoS",
    "start": "493370",
    "end": "499580"
  },
  {
    "text": "context that you have some options you can scale to absorb additional traffic",
    "start": "499580",
    "end": "505330"
  },
  {
    "text": "you can deploy DDoS mitigation hardware or you can use the DDoS mitigation",
    "start": "505330",
    "end": "510860"
  },
  {
    "text": "service but when you move to the cloud we take responsibility for providing a",
    "start": "510860",
    "end": "517310"
  },
  {
    "text": "secure stable and DDoS resilient infrastructure so before there were DDoS",
    "start": "517310",
    "end": "525529"
  },
  {
    "start": "522000",
    "end": "522000"
  },
  {
    "text": "mitigation a DDoS attack had the potential to impact the availability of",
    "start": "525529",
    "end": "530569"
  },
  {
    "text": "your application so then came DDoS mitigation services",
    "start": "530569",
    "end": "536540"
  },
  {
    "start": "533000",
    "end": "533000"
  },
  {
    "text": "with these services which operate by a variety of different methods you have the ability to offload your traffic to a",
    "start": "536540",
    "end": "544100"
  },
  {
    "text": "third-party network who specialize in DDoS mitigation these companies could then scrub the traffic and return only",
    "start": "544100",
    "end": "550939"
  },
  {
    "text": "clean traffic to your network or application the challenge here is that",
    "start": "550939",
    "end": "556910"
  },
  {
    "text": "that can cause additional latency and that can also be noticeable in some cases by your users so at AWS we wanted",
    "start": "556910",
    "end": "567739"
  },
  {
    "start": "564000",
    "end": "564000"
  },
  {
    "text": "to think about how to address the DDoS problem and the first thing that we did was build services to be resilient by",
    "start": "567739",
    "end": "574639"
  },
  {
    "text": "design so let's take a look at what that means in the case of Amazon CloudFront",
    "start": "574639",
    "end": "581689"
  },
  {
    "text": "or elastic load balancing for example we primarily only want TCP traffic that",
    "start": "581689",
    "end": "588769"
  },
  {
    "text": "means that a lot of these reflection attacks the DNS reflection the SSCP reflection ntp reflection we can just",
    "start": "588769",
    "end": "596749"
  },
  {
    "text": "drop those on the floor cloud front an elastic load balancing will not accept that traffic it will not be carried to",
    "start": "596749",
    "end": "602749"
  },
  {
    "text": "your application with Amazon route 53",
    "start": "602749",
    "end": "610249"
  },
  {
    "text": "it's slightly different we need both UDP and TCP traffic DNS is primarily a UDP",
    "start": "610249",
    "end": "617059"
  },
  {
    "text": "service but we also use TCP in case of failover so what that means is instead",
    "start": "617059",
    "end": "623959"
  },
  {
    "text": "of just arbitrarily dropping one protocol or another we need to look at the header if that traffic or those",
    "start": "623959",
    "end": "631459"
  },
  {
    "text": "requests are not valid DNS requests we also want to drop that traffic and we do",
    "start": "631459",
    "end": "637639"
  },
  {
    "text": "not want route 53 to process that traffic so when we started building DDoS",
    "start": "637639",
    "end": "645259"
  },
  {
    "start": "642000",
    "end": "642000"
  },
  {
    "text": "mitigation systems specifically for Amazon or specifically for AWS we",
    "start": "645259",
    "end": "651019"
  },
  {
    "text": "thought about this and we said we don't want to cause any additional latency for our users we don't want these systems to",
    "start": "651019",
    "end": "656119"
  },
  {
    "text": "be noticeable for our users so we built them to be always in line and this means that regardless of whether there's a",
    "start": "656119",
    "end": "661970"
  },
  {
    "text": "DDoS attack they're always inspecting traffic and always making decisions as to whether traffic needs to be",
    "start": "661970",
    "end": "668810"
  },
  {
    "text": "dropped we built these on commodity hardware and the reason that we did that",
    "start": "668810",
    "end": "674600"
  },
  {
    "text": "was twofold one we wanted to take advantage of advances in commodity",
    "start": "674600",
    "end": "680120"
  },
  {
    "text": "hardware and as that hardware scaled be able to scale with the growth of the cloud",
    "start": "680120",
    "end": "686290"
  },
  {
    "text": "additionally we wanted to be able to quickly iterate on that platform and",
    "start": "686290",
    "end": "691389"
  },
  {
    "text": "implement new mitigations when we learned more about the threat environment a couple other benefits of",
    "start": "691389",
    "end": "699589"
  },
  {
    "text": "doing this is it provides us with a low MTTR or mean time to resolve and what that",
    "start": "699589",
    "end": "705050"
  },
  {
    "text": "means is that when an attack occurs we can very quickly make a decision to mitigate the attack and all of this",
    "start": "705050",
    "end": "711860"
  },
  {
    "text": "occurs the inspection or mitigation in a matter of microseconds which is not",
    "start": "711860",
    "end": "716930"
  },
  {
    "text": "noticeable to users so what do these systems do exactly the first thing is a",
    "start": "716930",
    "end": "724820"
  },
  {
    "start": "719000",
    "end": "719000"
  },
  {
    "text": "matter of basic hygiene this means that there's certain types of traffic bad IP checksums invalid tcp flag combinations",
    "start": "724820",
    "end": "732380"
  },
  {
    "text": "that we know are not valid our customers never expect to receive them and we want",
    "start": "732380",
    "end": "738230"
  },
  {
    "text": "to drop that traffic and we will beyond that it's not always clear an elevation",
    "start": "738230",
    "end": "746839"
  },
  {
    "start": "742000",
    "end": "742000"
  },
  {
    "text": "in traffic doesn't mean always a DDoS attack sometimes an elevation in traffic",
    "start": "746839",
    "end": "752089"
  },
  {
    "text": "is a flash crowd or some other formal legitimate traffic for example we have",
    "start": "752089",
    "end": "758180"
  },
  {
    "text": "customers who may decide that they need to push a software update and need to do it quickly that can look exactly like a DDoS attack",
    "start": "758180",
    "end": "764899"
  },
  {
    "text": "if you're just looking at the traffic so our first objective is to make sure that",
    "start": "764899",
    "end": "770300"
  },
  {
    "text": "we do not impact our customers legitimate traffic so what we've done is",
    "start": "770300",
    "end": "775459"
  },
  {
    "text": "we've implemented packet prioritization so for every packet that comes across these systems we score that packet in",
    "start": "775459",
    "end": "784300"
  },
  {
    "text": "addition we have an understanding of what is normal on AWS what does normal",
    "start": "784300",
    "end": "789949"
  },
  {
    "text": "traffic look like and we also know when there's a deviation from the mean based on that deviation",
    "start": "789949",
    "end": "797110"
  },
  {
    "text": "we're able to assign a priority a",
    "start": "797110",
    "end": "801300"
  },
  {
    "start": "802000",
    "end": "802000"
  },
  {
    "text": "priority isn't simply traffic is bad or traffic is good or traffic should be",
    "start": "802350",
    "end": "808480"
  },
  {
    "text": "dropped rather to gradient it's a sliding scale and what that means is",
    "start": "808480",
    "end": "814270"
  },
  {
    "text": "traffic relatively speaking is more or less suspicious than the next traffic",
    "start": "814270",
    "end": "821580"
  },
  {
    "text": "and we need to prioritize it accordingly so if you look at this example you'll",
    "start": "821580",
    "end": "827230"
  },
  {
    "text": "see that some of these bands of traffic we've identified with a user icon and what that means is we believe that that",
    "start": "827230",
    "end": "834490"
  },
  {
    "text": "traffic is most likely legitimate customer traffic and we do not want to drop that traffic in the event of a DDoS",
    "start": "834490",
    "end": "841510"
  },
  {
    "text": "attack we're going to give that traffic priority and make sure that that traffic continues to flow then you'll see a",
    "start": "841510",
    "end": "848320"
  },
  {
    "text": "small amount of traffic running along the bottom of this chart and you'll see that we labeled it with the DDoS icon that's low priority traffic and normally",
    "start": "848320",
    "end": "856660"
  },
  {
    "text": "it sits well below our normal traffic diurnal 's the reason that's interesting is unlike a lot of different get off",
    "start": "856660",
    "end": "864400"
  },
  {
    "text": "some mitigation methods that are available today we don't need to make an immediate decision to drop traffic just",
    "start": "864400",
    "end": "871150"
  },
  {
    "text": "because we think it might be DDoS instead we can wait and make that decision based on whether we feel that",
    "start": "871150",
    "end": "878560"
  },
  {
    "text": "there's a threat to our infrastructure so in this particular example there's no threat to our infrastructure we're going",
    "start": "878560",
    "end": "884620"
  },
  {
    "text": "to continue serving that traffic what that does is allows us to avoid false positives and allows us to implement or",
    "start": "884620",
    "end": "892210"
  },
  {
    "text": "engage mitigation when we need it the most so beyond just mitigating DDoS",
    "start": "892210",
    "end": "898750"
  },
  {
    "text": "attacks we want some additional options of what to do with the traffic if it",
    "start": "898750",
    "end": "904090"
  },
  {
    "text": "becomes heavier than we expected part of this we have to understand what is the",
    "start": "904090",
    "end": "909280"
  },
  {
    "text": "destination of our traffic for services like ec2 ELB these have well-defined IP",
    "start": "909280",
    "end": "915790"
  },
  {
    "text": "addresses and it's very easy for us to say if an attack is against a specific IP we know that the target was a certain",
    "start": "915790",
    "end": "922900"
  },
  {
    "text": "instance if you've seen the tech meteor read the news a lot you may have noticed",
    "start": "922900",
    "end": "929110"
  },
  {
    "text": "ipv4 addresses are in short supply that means that for a shared service with a global footprint if we",
    "start": "929110",
    "end": "937220"
  },
  {
    "text": "want to make this service available to over a million AWS customers we need a way to conserve IP space but still be",
    "start": "937220",
    "end": "944779"
  },
  {
    "text": "able to identify what is our target so what we've done is for any cloud print",
    "start": "944779",
    "end": "950690"
  },
  {
    "text": "distribution we'll use in this example we've assigned a unique set of IP addresses and based on that unique set",
    "start": "950690",
    "end": "957440"
  },
  {
    "text": "of IP addresses we can identify our targets so in the case of a DDoS attack",
    "start": "957440",
    "end": "966699"
  },
  {
    "text": "that allows us to identify the distribution and gives us some new options for what to do to mitigate that",
    "start": "966699",
    "end": "973490"
  },
  {
    "text": "attack this same philosophy is extensible to other services for example",
    "start": "973490",
    "end": "979370"
  },
  {
    "text": "route 53 so in many cases when there's",
    "start": "979370",
    "end": "985190"
  },
  {
    "start": "982000",
    "end": "982000"
  },
  {
    "text": "an attack and it arrives at a specific edge location it makes sense just for us",
    "start": "985190",
    "end": "990980"
  },
  {
    "text": "to mitigate that attack and no further action is required but sometimes we find",
    "start": "990980",
    "end": "998360"
  },
  {
    "text": "it beneficial to isolate the target to a specific location works in multiple specific locations and when we do that",
    "start": "998360",
    "end": "1007589"
  },
  {
    "text": "it often makes sense to vacate that location meaning that we'll stop serving legitimate traffic from a location",
    "start": "1007589",
    "end": "1014380"
  },
  {
    "text": "that's under DDoS risk and sometimes the",
    "start": "1014380",
    "end": "1019990"
  },
  {
    "text": "best idea for us is to disperse the traffic and that makes it so that in an individual location handles only a",
    "start": "1019990",
    "end": "1026890"
  },
  {
    "text": "smaller amount of that particular DDoS attack and it reduces the risk to those",
    "start": "1026890",
    "end": "1032650"
  },
  {
    "text": "non targeted customers so now I'd like to pass the presentation to Andrew",
    "start": "1032650",
    "end": "1039010"
  },
  {
    "text": "Kagan's he's going to talk about some architecture best practices that you can employ on AWS to make the use of the",
    "start": "1039010",
    "end": "1046030"
  },
  {
    "text": "mitigations that we've built thanks Jeff so oh there we published off-white paper",
    "start": "1046030",
    "end": "1052900"
  },
  {
    "text": "last year talking about the best practices that you could use to build resilient applications on top of AWS and",
    "start": "1052900",
    "end": "1060490"
  },
  {
    "text": "that's great that last things that you can do of course I want to show you today the we air own",
    "start": "1060490",
    "end": "1066310"
  },
  {
    "text": "dog food the services that we build use the same set of bait best practices and",
    "start": "1066310",
    "end": "1073180"
  },
  {
    "text": "I want to coach some of the things that we're going to dig into in terms of that I'm going to go through the attacks and",
    "start": "1073180",
    "end": "1079480"
  },
  {
    "text": "the volumetric all the way to the application layer just as Jeff has talked about so the first thing we're",
    "start": "1079480",
    "end": "1087820"
  },
  {
    "text": "going to talk about is a volumetric attack and obviously that's the largest attacks we see and it's also the most",
    "start": "1087820",
    "end": "1094060"
  },
  {
    "text": "popular attack ten reasons the first thing is that it's cheap any mood affect",
    "start": "1094060",
    "end": "1102970"
  },
  {
    "text": "credit cards can go in one draw boat in the dark corners of the internet find themselves a botnet and launch an attack",
    "start": "1102970",
    "end": "1109300"
  },
  {
    "text": "it's really really simple the script caddies do it you can see some of the kids that play the games do it it's very",
    "start": "1109300",
    "end": "1115960"
  },
  {
    "text": "very simple it doesn't require any sophistication and - an infrastructure",
    "start": "1115960",
    "end": "1121600"
  },
  {
    "text": "that doesn't have the rate measure in place it can be effective but I want to show you things that we do and things",
    "start": "1121600",
    "end": "1126970"
  },
  {
    "text": "you can do to take care of that and obviously it's one of the larger attack",
    "start": "1126970",
    "end": "1132730"
  },
  {
    "text": "vectors seen out in the wild this is a",
    "start": "1132730",
    "end": "1138490"
  },
  {
    "start": "1136000",
    "end": "1136000"
  },
  {
    "text": "DDoS attack we saw against cloud front very recently and there's a couple of interesting things about this first of",
    "start": "1138490",
    "end": "1145240"
  },
  {
    "text": "all it's a mixed attack it takes it uses",
    "start": "1145240",
    "end": "1150460"
  },
  {
    "text": "two attack vectors which is becoming more and more common and this in that timeframe that Jeff is talking about and",
    "start": "1150460",
    "end": "1157840"
  },
  {
    "text": "the reason the typical starting to use two vectors is if it's just one vector then the signature for that attack",
    "start": "1157840",
    "end": "1164760"
  },
  {
    "text": "sticks out like a sore thumb and you can identify it very very quickly so what",
    "start": "1164760",
    "end": "1169780"
  },
  {
    "text": "they're trying to do is make it that little bit harder for the mitigators to",
    "start": "1169780",
    "end": "1175030"
  },
  {
    "text": "actually put the mitigations in place and to take the attack as we'll talk",
    "start": "1175030",
    "end": "1180670"
  },
  {
    "text": "about in a minute those reasons that this had no impact today excess is a mechanism that's used",
    "start": "1180670",
    "end": "1187350"
  },
  {
    "text": "to gauge the performance of any CDN there's a number of large CD ends out",
    "start": "1187350",
    "end": "1193540"
  },
  {
    "text": "there and this shows us that this particular attack had no effect on CloudFront why not the DNS",
    "start": "1193540",
    "end": "1202399"
  },
  {
    "text": "reflection the UDP flood our UDP attacks CloudFront only accepts HTP traffic over",
    "start": "1202399",
    "end": "1210350"
  },
  {
    "text": "TCP therefore it gets dropped that's really good news if you're a cloud front",
    "start": "1210350",
    "end": "1216980"
  },
  {
    "text": "user because as you know the we cloud front is charged does not deal with",
    "start": "1216980",
    "end": "1222440"
  },
  {
    "text": "inbound traffic so not only is it going to take care of your DDoS it's free zoom",
    "start": "1222440",
    "end": "1229399"
  },
  {
    "text": "but it doesn't like free good I won't",
    "start": "1229399",
    "end": "1234919"
  },
  {
    "text": "dig into the the actual attacks themselves all a bit just to give you a little idea about the signatures this is",
    "start": "1234919",
    "end": "1240889"
  },
  {
    "text": "a Wireshark we grab the pcap of the attack we have with a lot of visibility",
    "start": "1240889",
    "end": "1246320"
  },
  {
    "text": "tools internally that we've built that we can dig into the tag there's often these zero deer tags brand new vectors",
    "start": "1246320",
    "end": "1252470"
  },
  {
    "text": "so we want to starts to go and grab a capture of that attack for the older members of the audience its ethereal you",
    "start": "1252470",
    "end": "1258980"
  },
  {
    "text": "remember that for the young bears is Wireshark and the key point here is that",
    "start": "1258980",
    "end": "1264710"
  },
  {
    "text": "these reflection attacks have a very strong signature that we can use to our",
    "start": "1264710",
    "end": "1271700"
  },
  {
    "text": "advantage because it's reflected it's coming from a real server dealing with real traffic",
    "start": "1271700",
    "end": "1280240"
  },
  {
    "text": "therefore has to be in a recognized port therefore SSDP",
    "start": "1280240",
    "end": "1285320"
  },
  {
    "text": "that port is 1900 always so when we see it pour 1900 and our IP header and it's",
    "start": "1285320",
    "end": "1295399"
  },
  {
    "text": "got an HTTP payload and it's over UDP we can identify that immediately so if your",
    "start": "1295399",
    "end": "1302090"
  },
  {
    "text": "application is a web server or you're relying on route 53 for your DNS",
    "start": "1302090",
    "end": "1308840"
  },
  {
    "text": "infrastructure it's simply not going to accept that traffic this traffic is",
    "start": "1308840",
    "end": "1314679"
  },
  {
    "text": "specifically for a point point connections it's used for discovery so",
    "start": "1314679",
    "end": "1320929"
  },
  {
    "text": "there's really no reason why you should accept that traffic next one on what",
    "start": "1320929",
    "end": "1327230"
  },
  {
    "text": "talk about is NTP NTP slightly different because you used to synchronize servers therefore",
    "start": "1327230",
    "end": "1333780"
  },
  {
    "text": "you can't simply stop that coming in otherwise your server is going to drift out of synchronization with everywhere",
    "start": "1333780",
    "end": "1340110"
  },
  {
    "text": "so you've got to leave that port open but it does come on a well-known port",
    "start": "1340110",
    "end": "1345270"
  },
  {
    "text": "port one two three but the tail in this one is the payload the peel wood is",
    "start": "1345270",
    "end": "1355530"
  },
  {
    "text": "what's called mon gate list and why is that important well it's not the normal use of NTP NTP sends a very small packet",
    "start": "1355530",
    "end": "1363200"
  },
  {
    "text": "requesting a timestamp gets a very small one back when NTP was developed with our",
    "start": "1363200",
    "end": "1370830"
  },
  {
    "text": "world be really good to have this debug facility where we can request that the server tell us the last four hundred",
    "start": "1370830",
    "end": "1378440"
  },
  {
    "text": "requests well that's really good for debugging but it's also a really good amplification technique so when you see",
    "start": "1378440",
    "end": "1387030"
  },
  {
    "text": "that gate list it's actually identify someone trying to use a reflection if you happen to you have NTP servers",
    "start": "1387030",
    "end": "1394080"
  },
  {
    "text": "please turn that off that makes my job a lot easier so it's got a very Jeff",
    "start": "1394080",
    "end": "1401820"
  },
  {
    "text": "mention plication fight to the 500 and it was the most popular the most popular",
    "start": "1401820",
    "end": "1409350"
  },
  {
    "text": "DDoS attack what we are seeing now is that that's dropping off in favor of the",
    "start": "1409350",
    "end": "1414510"
  },
  {
    "text": "SSDP and that is because the NTP servers are starting to shut down that hole and it's all about you know cat-and-mouse",
    "start": "1414510",
    "end": "1421020"
  },
  {
    "text": "the DDoS attackers come up with something new you know we close down that they come up with the next thing and DNS again stole",
    "start": "1421020",
    "end": "1429120"
  },
  {
    "text": "very popular simply because of the number of DNS resolvers that are out",
    "start": "1429120",
    "end": "1434549"
  },
  {
    "text": "there again strong signature source port 53 large payload the DNS response now",
    "start": "1434549",
    "end": "1443700"
  },
  {
    "text": "what works in our favor here especially when we are building route 53 defenses is the set of DNS resolvers is very well",
    "start": "1443700",
    "end": "1452610"
  },
  {
    "text": "known and to the credit they're also very well behaved",
    "start": "1452610",
    "end": "1458000"
  },
  {
    "text": "so by using a combination of heuristics around how those requests are made",
    "start": "1458000",
    "end": "1464730"
  },
  {
    "text": "and the constrained IP space we can very very quickly get rid of reflection",
    "start": "1464730",
    "end": "1472260"
  },
  {
    "text": "attacks because they tend to make DNS resolvers misbehave and straight-up DNS",
    "start": "1472260",
    "end": "1478530"
  },
  {
    "text": "floods because they're not coming from the normal set of IP addresses so that",
    "start": "1478530",
    "end": "1484110"
  },
  {
    "text": "allows us to give exceptionally high protection to route 53 and obviously for",
    "start": "1484110",
    "end": "1491310"
  },
  {
    "text": "your application when you're configuring your own DNS resolver there's only going to be a handful of them at most and",
    "start": "1491310",
    "end": "1498810"
  },
  {
    "text": "we'll talk a lot a bit later on about how you can use VPC in Ackles to make sure that any other DNS traffic coming",
    "start": "1498810",
    "end": "1505830"
  },
  {
    "text": "in simply not accepted you're just simply reducing the surface area there's",
    "start": "1505830",
    "end": "1511590"
  },
  {
    "text": "others out there rep v1 if anybody's are really a long memory with that one the",
    "start": "1511590",
    "end": "1517800"
  },
  {
    "start": "1512000",
    "end": "1512000"
  },
  {
    "text": "original routing protocols of the Internet believe it or not they're still routers out there and they do have this",
    "start": "1517800",
    "end": "1523740"
  },
  {
    "text": "vulnerability that allows you to have an amplification attack we saw one fairly recently but luckily there are very very",
    "start": "1523740",
    "end": "1530970"
  },
  {
    "text": "few again it has that well-known poor we all know and peel wood so we can take",
    "start": "1530970",
    "end": "1536160"
  },
  {
    "text": "that out very very quickly similarly the fathers of the internet does there are lists of UNIX decided",
    "start": "1536160",
    "end": "1542640"
  },
  {
    "text": "that what we need is another debug tool called charge and that will generate a stream of traffic you just have to turn",
    "start": "1542640",
    "end": "1549420"
  },
  {
    "text": "that off on your servers and we'll make that one go away so if you can help me out without into that be really good",
    "start": "1549420",
    "end": "1554450"
  },
  {
    "text": "SNMP is a tricky one and SNMP isn't gonna get turned off any in that time",
    "start": "1554450",
    "end": "1559980"
  },
  {
    "text": "soon but there's good ways we can deal with that too although the amplification is quite large most SNMP agents are on",
    "start": "1559980",
    "end": "1571050"
  },
  {
    "text": "network devices they're deep in the network so it's actually quite difficult for the attackers to find hosts or",
    "start": "1571050",
    "end": "1580020"
  },
  {
    "text": "servers that they can take advantage of additionally with SN MVP SNMP v3 there's",
    "start": "1580020",
    "end": "1586260"
  },
  {
    "text": "authentication so that's not something we see very often and typically the numbers aren't very high so that's good",
    "start": "1586260",
    "end": "1591950"
  },
  {
    "text": "the common themes are as udp-based it's got a strong signature it's not coming",
    "start": "1591950",
    "end": "1598230"
  },
  {
    "text": "where we expect and the payload is unusual and that combination makes these volumetric attacks very easy to identify",
    "start": "1598230",
    "end": "1605070"
  },
  {
    "text": "and very easy to mitigate now when the",
    "start": "1605070",
    "end": "1611760"
  },
  {
    "text": "other ways we can deal with volumetric facts is basically up the scary 200 400",
    "start": "1611760",
    "end": "1619530"
  },
  {
    "text": "gigabyte axe that the media Lake are not the reality the reality is down in the",
    "start": "1619530",
    "end": "1624870"
  },
  {
    "text": "single-digit gigabits a simple scaling architecture will deal with that",
    "start": "1624870",
    "end": "1632480"
  },
  {
    "text": "using ELB with auto scaling you see two instances behind them will actually more",
    "start": "1632480",
    "end": "1638130"
  },
  {
    "text": "pop a lot of DDoS attacks without having tip and any other mitigations if you",
    "start": "1638130",
    "end": "1645840"
  },
  {
    "text": "couple this with route 53 the story becomes even better so the way this",
    "start": "1645840",
    "end": "1651480"
  },
  {
    "start": "1646000",
    "end": "1646000"
  },
  {
    "text": "works says when a user is wanting to reach your ELB instance maybe you've got an application and this behind your ELB",
    "start": "1651480",
    "end": "1657240"
  },
  {
    "text": "and your users are making their DNS query to find out where you live if it",
    "start": "1657240",
    "end": "1663090"
  },
  {
    "text": "was to route 53 route 53 is going to",
    "start": "1663090",
    "end": "1668520"
  },
  {
    "text": "validate the state of your instances now I hit a white player these instances are not easy to instances per se that the",
    "start": "1668520",
    "end": "1676110"
  },
  {
    "text": "actual component parts of the elastic load balancer and wrote 53 is going to",
    "start": "1676110",
    "end": "1682919"
  },
  {
    "text": "go around all the servers that make up that and validate their health and that's great because if everything is",
    "start": "1682919",
    "end": "1688620"
  },
  {
    "text": "healthy the user has got a selection of IP addresses that they can go and fetch the data from under a DDoS or any",
    "start": "1688620",
    "end": "1697410"
  },
  {
    "text": "actually any other condition that might impact that server it could be a noted power outage what have you wrote 53 is",
    "start": "1697410",
    "end": "1703950"
  },
  {
    "text": "going to take that the instance is going to fill the health check wrote 53 is",
    "start": "1703950",
    "end": "1710280"
  },
  {
    "text": "going to automatically take out of the pool so your users are only going to be",
    "start": "1710280",
    "end": "1717390"
  },
  {
    "text": "directed to lose here healthy ELB instances and that's really handy because one of the things we do see is",
    "start": "1717390",
    "end": "1723179"
  },
  {
    "text": "that dearest attackers can be quite lazy they go or the gravel all the IP addresses they get an IP address and the",
    "start": "1723179",
    "end": "1730200"
  },
  {
    "text": "driller and they could be there for 15-20 minutes until they notice that that",
    "start": "1730200",
    "end": "1735400"
  },
  {
    "text": "instance right P is actually no longer serving any kind of traffic so we can take advantage of that because you were",
    "start": "1735400",
    "end": "1740530"
  },
  {
    "text": "surprised how much mitigations and actions you can take within that window so this is quite a good technique and",
    "start": "1740530",
    "end": "1748710"
  },
  {
    "start": "1748000",
    "end": "1748000"
  },
  {
    "text": "our best practices we talk about minimizing the surface area the reason",
    "start": "1748710",
    "end": "1756040"
  },
  {
    "text": "behind that is for these volumetric attacks if they can't find you or they don't of a we in or you're blocking the",
    "start": "1756040",
    "end": "1763090"
  },
  {
    "text": "traffic is not going to impact and the",
    "start": "1763090",
    "end": "1768670"
  },
  {
    "text": "best ways are doing that I take an advantage of the PCs which gives a couple of mechanisms security grips and",
    "start": "1768670",
    "end": "1776400"
  },
  {
    "start": "1770000",
    "end": "1770000"
  },
  {
    "text": "network hackles and you both work slightly differently PPC is the default",
    "start": "1776400",
    "end": "1782260"
  },
  {
    "text": "environment for your ec2 instances now so if you're if you're spending up new ec2 instances they automatically fall",
    "start": "1782260",
    "end": "1787780"
  },
  {
    "text": "into a V PC and the security groups on that V PC will deny everything you then",
    "start": "1787780",
    "end": "1798429"
  },
  {
    "text": "specify what traffic you want to a low-end knackles are the other way",
    "start": "1798429",
    "end": "1803710"
  },
  {
    "text": "around knackles by default let everything in then you can pick and choose what you",
    "start": "1803710",
    "end": "1810280"
  },
  {
    "text": "want to stop for a very handy for like blacklisting there are certain customers out there who know which attackers are",
    "start": "1810280",
    "end": "1819640"
  },
  {
    "text": "coming after them the no bad behaved clients and you can use knackles to stop",
    "start": "1819640",
    "end": "1825580"
  },
  {
    "text": "that kind of behavior so want to walk through how you would set this up and",
    "start": "1825580",
    "end": "1833020"
  },
  {
    "text": "there's a couple other nuances here so here's a very simple application I've got my web app server and enhanced of",
    "start": "1833020",
    "end": "1839590"
  },
  {
    "text": "our SQL back-end that's from fetching my data from but what I'm gonna do is I'm gonna split out the various traffic for",
    "start": "1839590",
    "end": "1848830"
  },
  {
    "text": "my users I've got a front-end eeob and they're gonna load bounce across my",
    "start": "1848830",
    "end": "1854800"
  },
  {
    "text": "one web app servers and I'm going to open up 80 and 443 - except my HTTP I'm",
    "start": "1854800",
    "end": "1863320"
  },
  {
    "text": "a HTTP traffic but I'm not gonna forward on on the same ports if I do a port mapping to et et",
    "start": "1863320",
    "end": "1875820"
  },
  {
    "text": "even if the Daedelus attacker comes after my way back having discovered the",
    "start": "1875820",
    "end": "1880929"
  },
  {
    "text": "IP and there's the various papers out there whom one may do that they're going to assume I'm serving in port 80 or 443",
    "start": "1880929",
    "end": "1888779"
  },
  {
    "text": "so if they try to attack my way about server directly they're gonna have no",
    "start": "1888779",
    "end": "1894009"
  },
  {
    "text": "joy whatsoever so that's a little bit obfuscation and then I can wrap those",
    "start": "1894009",
    "end": "1900789"
  },
  {
    "text": "both in separate security groups and I can tighten down my security group",
    "start": "1900789",
    "end": "1907029"
  },
  {
    "text": "policy to make sure that the only accept traffic from where they expect the next",
    "start": "1907029",
    "end": "1912909"
  },
  {
    "text": "thing is my management know simply best practice to separate out your management",
    "start": "1912909",
    "end": "1918249"
  },
  {
    "text": "and new years of data so that there's various scenarios whereby your user data",
    "start": "1918249",
    "end": "1923320"
  },
  {
    "text": "may make it hard to get insurances if you've separated out your management traffic that means you can always get in",
    "start": "1923320",
    "end": "1930190"
  },
  {
    "text": "and manage your instance and in this case what allows us to do is of separate security group policies for those two",
    "start": "1930190",
    "end": "1937809"
  },
  {
    "text": "data streams and then of course I don't know is different there may be valid",
    "start": "1937809",
    "end": "1943509"
  },
  {
    "text": "reasons where we create outbound connections to download new software",
    "start": "1943509",
    "end": "1948519"
  },
  {
    "text": "raid upgrades have a pull down new data but typically the places we're going to",
    "start": "1948519",
    "end": "1956070"
  },
  {
    "text": "are not the police's our users are coming from so we want a different policy to deal with that and here's a",
    "start": "1956070",
    "end": "1961659"
  },
  {
    "text": "couple of examples this is for the ELB and they'll be basically says I'll accept traffic for every from everywhere",
    "start": "1961659",
    "end": "1968940"
  },
  {
    "start": "1962000",
    "end": "1962000"
  },
  {
    "text": "that may not be the keys for you if you can tighten down that policy and see well actually I only accept from this",
    "start": "1968940",
    "end": "1976690"
  },
  {
    "text": "set of clients that's even better because you've reduced the amount of surface area similarly we're only",
    "start": "1976690",
    "end": "1983830"
  },
  {
    "text": "accepting from 18 443 so any kind of random attack if we think back to how",
    "start": "1983830",
    "end": "1991090"
  },
  {
    "text": "they reflection attacks work although they came from a source port 1 2 3 4 ntp",
    "start": "1991090",
    "end": "1997659"
  },
  {
    "text": "the tip I have a very very wide range of destination ports so we can take",
    "start": "1997659",
    "end": "2004440"
  },
  {
    "text": "advantage of that as well and just make sure that only the ports that we need can be accessed and then in the outbound",
    "start": "2004440",
    "end": "2012150"
  },
  {
    "text": "that's the destination of our web app server and the web app server we do",
    "start": "2012150",
    "end": "2017460"
  },
  {
    "text": "something similar we make sure that we only accept traffic from the bastion host there's proxying our end own",
    "start": "2017460",
    "end": "2024810"
  },
  {
    "text": "management connection or the ELB that means no and so that's really handy to",
    "start": "2024810",
    "end": "2031650"
  },
  {
    "text": "have that and then the destinations obvi for the open that and then the MySQL we",
    "start": "2031650",
    "end": "2038640"
  },
  {
    "text": "can do something very similar with the knackles this is exactly the same sort of thing but we have to turn that upside",
    "start": "2038640",
    "end": "2043860"
  },
  {
    "start": "2039000",
    "end": "2039000"
  },
  {
    "text": "down and we have to have that default deny rule if we just put a lower lower low in then by default everything's",
    "start": "2043860",
    "end": "2050159"
  },
  {
    "text": "alone so that default deny rule at the end is the one that stops anything other",
    "start": "2050160",
    "end": "2056639"
  },
  {
    "text": "than what we've explicitly specified so",
    "start": "2056640",
    "end": "2062720"
  },
  {
    "text": "using those techniques we can apply them and have applied them to or near WS",
    "start": "2062720",
    "end": "2068700"
  },
  {
    "text": "services we're a very large number of aged locations a very large number of",
    "start": "2068700",
    "end": "2075629"
  },
  {
    "text": "regions and we use the service and the scalability of the service by having",
    "start": "2075630",
    "end": "2081840"
  },
  {
    "text": "multiple servers for our route 53 multiple points of presence multiple",
    "start": "2081840",
    "end": "2087270"
  },
  {
    "text": "ingress paths to spread the attacks and also give us resiliency we also have any",
    "start": "2087270",
    "end": "2096510"
  },
  {
    "text": "cast and we'll talk a little bit more on that in a moment go front very early similar ways that our CDN",
    "start": "2096510",
    "end": "2102660"
  },
  {
    "text": "that's the main purpose so has a likely relative low latency by caching and",
    "start": "2102660",
    "end": "2108540"
  },
  {
    "text": "doing minimal latency routing to the nearest edge location to serve traffic",
    "start": "2108540",
    "end": "2113580"
  },
  {
    "text": "but beyond that as Jeff was saying we have a capability to disperse an attack",
    "start": "2113580",
    "end": "2119010"
  },
  {
    "text": "so hypothetically if you have a hundred gigabit attack that's worrying but few",
    "start": "2119010",
    "end": "2128280"
  },
  {
    "text": "spec take that 100 gig attack and spread it over 50 edge locations it's only a 2gig",
    "start": "2128280",
    "end": "2134609"
  },
  {
    "text": "attack in those edge locations so we can do traffic engineering to spread that traffic around additionally because",
    "start": "2134609",
    "end": "2142880"
  },
  {
    "text": "content is self served as close to the request as possible any localized DDoS",
    "start": "2142880",
    "end": "2149400"
  },
  {
    "text": "attacks will have no impact in other areas ELB you know the term says all the",
    "start": "2149400",
    "end": "2158400"
  },
  {
    "text": "silastic would bounce is to skills so by setting up your roster skilling it's",
    "start": "2158400",
    "end": "2164579"
  },
  {
    "text": "naturally going to scale up to any kind of incoming traffic be a flash trade or",
    "start": "2164579",
    "end": "2169650"
  },
  {
    "text": "a DDoS that's all built in and furthermore as resiliency you can specify that you want your EOB across",
    "start": "2169650",
    "end": "2176160"
  },
  {
    "text": "multiple availability zones giving your zones not just a DDoS bit - any kind of fear your condition in the network as I",
    "start": "2176160",
    "end": "2184500"
  },
  {
    "start": "2183000",
    "end": "2183000"
  },
  {
    "text": "mentioned global presence 11 regions 53 age locations spread throughout the",
    "start": "2184500",
    "end": "2189540"
  },
  {
    "text": "world each of those age locations and regions has multiple very large pipes",
    "start": "2189540",
    "end": "2198510"
  },
  {
    "text": "out to the internet people Alaska's ok",
    "start": "2198510",
    "end": "2204150"
  },
  {
    "text": "so you've got this really great infrastructure you've got this really you know you've got this good anycast that's great what happens if someone can",
    "start": "2204150",
    "end": "2211470"
  },
  {
    "text": "affect the actual transit paper itself for your question well it's very",
    "start": "2211470",
    "end": "2217290"
  },
  {
    "text": "unlikely that a DDoS attack can simultaneously affect more than one I",
    "start": "2217290",
    "end": "2224990"
  },
  {
    "text": "think the worst we've ever seen is maybe two so that means we always have the",
    "start": "2224990",
    "end": "2230700"
  },
  {
    "text": "capability of serving the traffic multiple points of entry multiple points of exit as I mentioned this a CDN it's",
    "start": "2230700",
    "end": "2240990"
  },
  {
    "text": "only going to accept foul and requests garbage traffic garbage put two calls",
    "start": "2240990",
    "end": "2247579"
  },
  {
    "text": "garbage requests they're never going to make it back to your origin simply not",
    "start": "2247579",
    "end": "2253200"
  },
  {
    "text": "going to see them or be charged for them ELB handles TCP therefore the same story",
    "start": "2253200",
    "end": "2261630"
  },
  {
    "text": "applies all that UDP traffic all those volumetric attacks but never gonna make it through an ELB Road",
    "start": "2261630",
    "end": "2271700"
  },
  {
    "text": "53 has some additional capabilities built in there when you use recursive",
    "start": "2271700",
    "end": "2277160"
  },
  {
    "text": "DNS to find the IP address of your destination Road 53 is gonna give",
    "start": "2277160",
    "end": "2283940"
  },
  {
    "text": "multiple ways of finding that information and we'll talk about Ober more detail or that means if something",
    "start": "2283940",
    "end": "2290750"
  },
  {
    "text": "goes wrong with one of those authoritative servers there's many other",
    "start": "2290750",
    "end": "2295910"
  },
  {
    "text": "ways to find them out and finally as I mentioned ELB spreads across",
    "start": "2295910",
    "end": "2301040"
  },
  {
    "text": "availability zone which is simply a good resiliency story so let's talk about this good I find this interesting the",
    "start": "2301040",
    "end": "2309230"
  },
  {
    "start": "2305000",
    "end": "2305000"
  },
  {
    "text": "first thing that happens when you make a dns request as it trickles up through the recursive resolvers is it has to",
    "start": "2309230",
    "end": "2317330"
  },
  {
    "text": "find out who has the information so wrote 53 is going to give it multiple",
    "start": "2317330",
    "end": "2323540"
  },
  {
    "text": "choices and and the way this works is again we give four mechanisms of or 4c",
    "start": "2323540",
    "end": "2333380"
  },
  {
    "text": "names that can be used to resolve this one in each of these four top-level domains one is your dot u K 1 and a 1",
    "start": "2333380",
    "end": "2340730"
  },
  {
    "text": "and org and when it's boiling calms over",
    "start": "2340730",
    "end": "2346060"
  },
  {
    "text": "and what that means is if there's any impact in there then there's still",
    "start": "2346060",
    "end": "2355670"
  },
  {
    "text": "always three more additionally because we use anycast if we have a failure in",
    "start": "2355670",
    "end": "2362450"
  },
  {
    "text": "one server someone else is going to pick it up and then beneath that we've got",
    "start": "2362450",
    "end": "2370190"
  },
  {
    "text": "multiple servers serving that we use a technique called shuffle sharding to make sure that nor to customers share",
    "start": "2370190",
    "end": "2377510"
  },
  {
    "text": "the same IP space so that gives us additional protection in a resiliency",
    "start": "2377510",
    "end": "2382730"
  },
  {
    "text": "and many edge locations where we can serve that request out-of-state",
    "start": "2382730",
    "end": "2389810"
  },
  {
    "text": "exhaustion so this is the one that's kind of interesting from a different aspect",
    "start": "2389810",
    "end": "2396670"
  },
  {
    "text": "security mechanisms and the vases are there to stop the bad guys getting in",
    "start": "2397559",
    "end": "2403630"
  },
  {
    "text": "and that that takes may forms be firewalls be IPS ease or DDoS related",
    "start": "2403630",
    "end": "2410170"
  },
  {
    "text": "devices and one of the things on those devices you want to make sure of if",
    "start": "2410170",
    "end": "2417039"
  },
  {
    "text": "something happens to that device you don't want to completely attack so if",
    "start": "2417039",
    "end": "2423279"
  },
  {
    "text": "there's a failure in your device you don't want to feel shut so these devices typically have the capability to be",
    "start": "2423279",
    "end": "2429069"
  },
  {
    "text": "configured to fail open so if there's a device failure goes into field open mode",
    "start": "2429069",
    "end": "2434470"
  },
  {
    "text": "and your customer traffic isn't affected which is ideal under normal",
    "start": "2434470",
    "end": "2440260"
  },
  {
    "text": "circumstances however the DDoS attackers",
    "start": "2440260",
    "end": "2445900"
  },
  {
    "text": "know this and they want to take advantage of it so a common attack technique is to launch one of these",
    "start": "2445900",
    "end": "2453730"
  },
  {
    "text": "attack types NIC and it can be a send flooding by an IP flag and what they're trying to do is Overlord your security",
    "start": "2453730",
    "end": "2460569"
  },
  {
    "text": "device make it feel I'm going to feel open because once they've done that your",
    "start": "2460569",
    "end": "2468250"
  },
  {
    "text": "infrastructure is then vulnerable to exploitation 's exfiltration x' login",
    "start": "2468250",
    "end": "2474819"
  },
  {
    "text": "break-ins so this is something that we're seeing more and more commonly will see a DDoS attack but underneath what",
    "start": "2474819",
    "end": "2483160"
  },
  {
    "text": "they're actually trying to do is break into your application cross-site scripting whoever happens to be and also",
    "start": "2483160",
    "end": "2490210"
  },
  {
    "text": "of course the operators see this very large detail DDoS attack and it tends to",
    "start": "2490210",
    "end": "2495970"
  },
  {
    "text": "drag their attention so something that were very very aware of how does it work",
    "start": "2495970",
    "end": "2501099"
  },
  {
    "start": "2501000",
    "end": "2501000"
  },
  {
    "text": "so this is a send flood attack that we saw fairly recently and as you can see",
    "start": "2501099",
    "end": "2506440"
  },
  {
    "text": "it's just repetitive sin sin sin sin appropriate for LA Vegas I suppose now",
    "start": "2506440",
    "end": "2513220"
  },
  {
    "text": "what we've built into Wireshark here is we've actually annotated some of this and built in some additional matrix that",
    "start": "2513220",
    "end": "2519549"
  },
  {
    "text": "we built in and what this is telling us that we saw these large number of sin attacks and our hardware device returned",
    "start": "2519549",
    "end": "2527500"
  },
  {
    "text": "the sin cookie for them send flood attacks are relatively simple to defeat with the",
    "start": "2527500",
    "end": "2537849"
  },
  {
    "text": "rape mechanisms there's two really great techniques for the field defeating sin",
    "start": "2537849",
    "end": "2544150"
  },
  {
    "text": "flood attacks and cookies and send proxies and if you get it right you can",
    "start": "2544150",
    "end": "2549219"
  },
  {
    "text": "take them out so let's look a little bit how this works so here we've a client",
    "start": "2549219",
    "end": "2555640"
  },
  {
    "text": "and that client is connecting to CloudFront it doesn't have to be close front and we've got a DDoS mitigation",
    "start": "2555640",
    "end": "2563349"
  },
  {
    "text": "system in there and what that does is it uses a combination of sin proxy TCP",
    "start": "2563349",
    "end": "2570849"
  },
  {
    "text": "proxy and send cookies to handle the attack under normal circumstances what's",
    "start": "2570849",
    "end": "2576729"
  },
  {
    "text": "going to happen is a valid hi it's gonna come with a sin requesting the start of",
    "start": "2576729",
    "end": "2583089"
  },
  {
    "text": "the TCP three-way handshake within the send cookie it goes back to the source because turned around as an",
    "start": "2583089",
    "end": "2591849"
  },
  {
    "text": "ACK comes back we validate the cookie and we establish the connection to the back end of course there's a lot of",
    "start": "2591849",
    "end": "2598209"
  },
  {
    "text": "downside to this on the DDoS mitigation system we have to handle two connections",
    "start": "2598209",
    "end": "2603400"
  },
  {
    "text": "the incoming and the outgoing and we have to handle that cookie which is",
    "start": "2603400",
    "end": "2608650"
  },
  {
    "text": "encrypted so there's a lot about CPU burning there to handle these cookies I'll talk about that in a minute in the",
    "start": "2608650",
    "end": "2616599"
  },
  {
    "text": "attack scenario a send comes and they're usually spoofed because they're very easy to spoof so we've end the send",
    "start": "2616599",
    "end": "2623589"
  },
  {
    "text": "cookie with the pass it back but because it's spoofed there's never any response",
    "start": "2623589",
    "end": "2628930"
  },
  {
    "text": "but at this stage we haven't wasted a connection and the backend server hasn't",
    "start": "2628930",
    "end": "2636819"
  },
  {
    "text": "had even seen it so only valid connections are handled to the back-end server which can then be optimized for",
    "start": "2636819",
    "end": "2642880"
  },
  {
    "text": "its workload for the DDoS mitigation system or something performing this",
    "start": "2642880",
    "end": "2648940"
  },
  {
    "text": "function we have talked to my store two things we're up to optimize for a large connection table and a heavy CPU load to",
    "start": "2648940",
    "end": "2656259"
  },
  {
    "text": "handle those cookies and we do on our dealers mitigation system but there's really nothing stopping you if you can't",
    "start": "2656259",
    "end": "2662979"
  },
  {
    "start": "2661000",
    "end": "2661000"
  },
  {
    "text": "use cloud phone or or this particular tiny could set this up with engine eggs put it onto one of the large compute",
    "start": "2662979",
    "end": "2668680"
  },
  {
    "text": "machines and employ the connection table to do some very similar functions so",
    "start": "2668680",
    "end": "2674050"
  },
  {
    "text": "although this is a technique week that we use for protecting cloud front wrote 53 and so on is something that you can",
    "start": "2674050",
    "end": "2681160"
  },
  {
    "text": "set up for yourselves moving up the stack the application layer this is kind",
    "start": "2681160",
    "end": "2690400"
  },
  {
    "text": "of tricky because application lead attacks are very carefully crafted they",
    "start": "2690400",
    "end": "2696910"
  },
  {
    "text": "require more work on the part of the attacker because they really want it to",
    "start": "2696910",
    "end": "2702400"
  },
  {
    "text": "look like regular traffic they're trying to make it as hard as possible to detect that advise and HTTP is the obvious",
    "start": "2702400",
    "end": "2711250"
  },
  {
    "text": "example just repeated get floods they could be a DNA so it could be anything else that I faked your particular",
    "start": "2711250",
    "end": "2717010"
  },
  {
    "text": "application this is one we saw against route 53 it was a very very large query",
    "start": "2717010",
    "end": "2724869"
  },
  {
    "text": "flood of valid queries there was nothing wrong with the queries spread across 34",
    "start": "2724869",
    "end": "2731859"
  },
  {
    "text": "of education's almost 60% of our fleet it was in some of the largest attacks",
    "start": "2731859",
    "end": "2738339"
  },
  {
    "text": "that have been seen but the mechanisms that I talked about earlier knowing what our traffic looks like knowing what the",
    "start": "2738339",
    "end": "2744670"
  },
  {
    "text": "sources are allows us to see exactly what that traffic looks like we know how",
    "start": "2744670",
    "end": "2751630"
  },
  {
    "text": "many queries and we know what types of queries we typically get and we can",
    "start": "2751630",
    "end": "2757359"
  },
  {
    "text": "identify that using heuristics of how that little difference between what a",
    "start": "2757359",
    "end": "2762400"
  },
  {
    "text": "regular traffic and this attack is to take advantage of the priority queuing",
    "start": "2762400",
    "end": "2767770"
  },
  {
    "text": "and drop that traffic net effect was no there was no impact on the route 53",
    "start": "2767770",
    "end": "2773910"
  },
  {
    "text": "response time during the course of this attack and eventually the attacker gave",
    "start": "2773910",
    "end": "2779170"
  },
  {
    "text": "up it's that interesting but actually seeing fewer and fewer route 53 attacks no I'm not quite sure whether this",
    "start": "2779170",
    "end": "2786430"
  },
  {
    "text": "because of changing tactics or or whether they just get bored so when you're thinking about that you",
    "start": "2786430",
    "end": "2794000"
  },
  {
    "text": "want to look at where the vulnerable parts of your architecture are and this",
    "start": "2794000",
    "end": "2800450"
  },
  {
    "text": "is something we look very carefully at those facilities that you can use to",
    "start": "2800450",
    "end": "2806090"
  },
  {
    "text": "protect add additional layers of protection geo restriction is something that's available cloud front but it's",
    "start": "2806090",
    "end": "2813320"
  },
  {
    "text": "something that you can equally do with carefully-crafted security groups",
    "start": "2813320",
    "end": "2819160"
  },
  {
    "text": "slowloris is a well-known attack tape we take care of that and close front but",
    "start": "2819160",
    "end": "2824900"
  },
  {
    "text": "nginx has more plugins that will do the same job and of course we've heard",
    "start": "2824900",
    "end": "2830870"
  },
  {
    "text": "yesterday we announced a wife as part of cloud front offering though so that's",
    "start": "2830870",
    "end": "2836000"
  },
  {
    "text": "something you can take advantage of again the same capabilities are available in the Amazon Marketplace",
    "start": "2836000",
    "end": "2842000"
  },
  {
    "text": "there's a wide variety of commercial wife solutions that have this capability as well so if cloak front isn't",
    "start": "2842000",
    "end": "2848660"
  },
  {
    "text": "something that suits your application there are many other solutions if you want to do the work yourself you can",
    "start": "2848660",
    "end": "2854060"
  },
  {
    "text": "take advantage of things like nginx and Lua so there's many solutions out there that will help solve this problem and this",
    "start": "2854060",
    "end": "2862670"
  },
  {
    "start": "2861000",
    "end": "2861000"
  },
  {
    "text": "would be a way that you could build up an architecture using the best practices I've got a web server the DDoS attack",
    "start": "2862670",
    "end": "2870170"
  },
  {
    "text": "comes so the first thing I'm going to do is scale up my back-end instances to handle the Lord I can put in elby's and",
    "start": "2870170",
    "end": "2878540"
  },
  {
    "text": "WAAFs and I can take cloud front and put it in front taking advantage of our",
    "start": "2878540",
    "end": "2884170"
  },
  {
    "text": "dedicated mitigation hardware and the key takeaway there is we want to put in",
    "start": "2884170",
    "end": "2889550"
  },
  {
    "text": "multiple layers there's no one solution to all the DDoS attacks be the",
    "start": "2889550",
    "end": "2897620"
  },
  {
    "text": "volumetric the stateful the application layer and I guarantee that as quickly as",
    "start": "2897620",
    "end": "2903530"
  },
  {
    "text": "we plug those holes the attackers are wanting to come up with something new they're poking it what's the next",
    "start": "2903530",
    "end": "2909380"
  },
  {
    "text": "protocol we can take advantage of it's very lucrative for them we want to make",
    "start": "2909380",
    "end": "2915680"
  },
  {
    "text": "sure it's not look at if for them so I've done all that right we've set up our architecture I'm doing best",
    "start": "2915680",
    "end": "2921530"
  },
  {
    "text": "practices I've got my men today shion's you want to talk about what happens if",
    "start": "2921530",
    "end": "2927470"
  },
  {
    "text": "under attack I've seen an attack coming I've got my customer this isn't what I expected how'd that take care of it and",
    "start": "2927470",
    "end": "2933740"
  },
  {
    "text": "I'm gonna hand this bike to Jeff because Jeff runs the team that takes care of this kind of thing thank you so",
    "start": "2933740",
    "end": "2941030"
  },
  {
    "text": "customers frequently ask us ok that's great but what do I do when I'm actually under attack like many things",
    "start": "2941030",
    "end": "2948880"
  },
  {
    "start": "2947000",
    "end": "2947000"
  },
  {
    "text": "preparation is key if we can address DDoS attacks before they occur then as a",
    "start": "2948880",
    "end": "2955190"
  },
  {
    "text": "customer you can be better prepared for the attack and for protecting your availability one",
    "start": "2955190",
    "end": "2962450"
  },
  {
    "text": "resource which is tremendously valuable is your account team specifically the Solutions Architect a Solutions",
    "start": "2962450",
    "end": "2969290"
  },
  {
    "text": "Architect can understand your specific use case and help you build a DDoS Brazilian architecture in order to",
    "start": "2969290",
    "end": "2976490"
  },
  {
    "text": "protect your availability by mitigating DDoS attacks we also provide some",
    "start": "2976490",
    "end": "2981680"
  },
  {
    "text": "self-service tools to allow you to do this yourself in the AWS security center we provide a white paper called",
    "start": "2981680",
    "end": "2988730"
  },
  {
    "text": "AWS best practices for DDoS resiliency it includes many of the reference",
    "start": "2988730",
    "end": "2994250"
  },
  {
    "text": "architectures and best practices that Andrew just discussed we also have the",
    "start": "2994250",
    "end": "3000339"
  },
  {
    "text": "AWS security blog recently we made a post discussing VPC and reducing attack",
    "start": "3000339",
    "end": "3006099"
  },
  {
    "text": "surface that post has a lot of the reference security groups referenced",
    "start": "3006099",
    "end": "3012010"
  },
  {
    "text": "knackles in order to allow you to implement this yourself it's essentially a step-by-step guide beyond that what",
    "start": "3012010",
    "end": "3020800"
  },
  {
    "text": "happens when you're actually under attack preparation has failed and you still need support for this we recommend",
    "start": "3020800",
    "end": "3027730"
  },
  {
    "text": "AWS support specifically business or enterprise here the business tier is",
    "start": "3027730",
    "end": "3034470"
  },
  {
    "text": "tremendously useful because it includes support by phone chat or email it's also",
    "start": "3034470",
    "end": "3040810"
  },
  {
    "text": "a great value if you require the fastest possible response time you can opt for",
    "start": "3040810",
    "end": "3046510"
  },
  {
    "text": "enterprise support and this is also going to provide you with a dedicated Technical Account Manager or tan the TAM",
    "start": "3046510",
    "end": "3053320"
  },
  {
    "text": "not only understands your business understands your use case but can help drive rapid resolution of",
    "start": "3053320",
    "end": "3060660"
  },
  {
    "text": "cases where you're under attack or any other issue that you're having with your application information that you're",
    "start": "3060660",
    "end": "3068530"
  },
  {
    "start": "3067000",
    "end": "3067000"
  },
  {
    "text": "going to want to provide us frankly as much information as you have about that attack the instances the IP addresses",
    "start": "3068530",
    "end": "3075580"
  },
  {
    "text": "the load balancers CloudFront distributions route 53 whatever it is",
    "start": "3075580",
    "end": "3081070"
  },
  {
    "text": "that you know is being targeted let us know so that we can drive a faster resolution let us know what regions are",
    "start": "3081070",
    "end": "3087700"
  },
  {
    "text": "being targeted or where these resources exist in AWS regions let us know when the attacks started the different",
    "start": "3087700",
    "end": "3093700"
  },
  {
    "text": "vectors are you already aware of what type of traffic it is and can you help us contrast that against your known good",
    "start": "3093700",
    "end": "3100450"
  },
  {
    "text": "traffic also let us know if you know the specific source of the attack maybe you",
    "start": "3100450",
    "end": "3106480"
  },
  {
    "text": "have a list of IP addresses that are contributing to the attack these are things that we can find out with tools",
    "start": "3106480",
    "end": "3111610"
  },
  {
    "text": "that we've built but if you already have this information it allows us to act much more quickly and lastly Intel or",
    "start": "3111610",
    "end": "3118510"
  },
  {
    "text": "intelligence let us know anything you know about the attack or the attacker maybe you've received a threat or you",
    "start": "3118510",
    "end": "3125080"
  },
  {
    "text": "know who the perpetrator of this attack is and that helps us understand some",
    "start": "3125080",
    "end": "3131110"
  },
  {
    "text": "things like if we've seen this type of attack or we've seen this threat before in the past we might already have a",
    "start": "3131110",
    "end": "3136990"
  },
  {
    "text": "clear idea of the signature and what type of volumes they're capable of so",
    "start": "3136990",
    "end": "3144400"
  },
  {
    "start": "3143000",
    "end": "3143000"
  },
  {
    "text": "for this information in other information about security on AWS features guidance and our compliance",
    "start": "3144400",
    "end": "3150430"
  },
  {
    "text": "initiatives you can check the AWS security Center at aws.amazon.com slash security and that concludes our",
    "start": "3150430",
    "end": "3158830"
  },
  {
    "text": "presentation I'd like to thank you for coming if you haven't already downloaded the app please do so please submit a",
    "start": "3158830",
    "end": "3164650"
  },
  {
    "text": "evaluation that's very useful to us and don't forget to check out Nate dies presentation on AWS laughs this Friday",
    "start": "3164650",
    "end": "3171850"
  },
  {
    "text": "at 9 a.m.",
    "start": "3171850",
    "end": "3174240"
  }
]