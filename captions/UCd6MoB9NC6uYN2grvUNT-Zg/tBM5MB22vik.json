[
  {
    "start": "0",
    "end": "17000"
  },
  {
    "text": "hi everybody thank you for being here today our obsession say is moving mission-critical",
    "start": "0",
    "end": "5910"
  },
  {
    "text": "applications from one region that multi-region active active and before going further this is the largest",
    "start": "5910",
    "end": "11790"
  },
  {
    "text": "reinvent yet and we've had more sessions or breakouts to choose from and thank you very much for choosing ours today",
    "start": "11790",
    "end": "17180"
  },
  {
    "start": "17000",
    "end": "17000"
  },
  {
    "text": "here's some things to expect from this session today we're going to talk about the architecture and how we deliver services across regions for AWS we're",
    "start": "17180",
    "end": "24960"
  },
  {
    "text": "going to talk about when do you make the decision of moving from one region to multi region and we're also going to",
    "start": "24960",
    "end": "30720"
  },
  {
    "text": "talk about some applications and services that already exist that help you move from one region of multi region",
    "start": "30720",
    "end": "36660"
  },
  {
    "text": "active active and I'm very happy today to have Sony Playstation here with us as well so we have Dustin and Alex who are",
    "start": "36660",
    "end": "43530"
  },
  {
    "text": "both senior principal or principal engineers on Sony interactive entertainment and they're responsible",
    "start": "43530",
    "end": "49170"
  },
  {
    "text": "for delivering the experience behind PlayStation and PlayStation Network so let's talk a little bit about global",
    "start": "49170",
    "end": "56699"
  },
  {
    "text": "infrastructure for AWS I know we all know what a region is but small look quickly at this we have 14 regions",
    "start": "56699",
    "end": "62820"
  },
  {
    "text": "globally today and for more coming in the next year and I want look just at",
    "start": "62820",
    "end": "68460"
  },
  {
    "text": "the Virginia region just to kind of see what it looks like so in Virginia we have five AZ's or",
    "start": "68460",
    "end": "76619"
  },
  {
    "start": "73000",
    "end": "73000"
  },
  {
    "text": "availability zones and these are all connected through a high-speed network and in our talk last year we are a",
    "start": "76619",
    "end": "84990"
  },
  {
    "text": "couple years ago we disclosed as 25 terabits per second between AZ's so we're used to operating at a very high",
    "start": "84990",
    "end": "90960"
  },
  {
    "text": "bandwidth high availability model and inside of it easy is it multiple or",
    "start": "90960",
    "end": "96990"
  },
  {
    "text": "single data centers so you can get high availability applications just by deploying than that model alone and it's",
    "start": "96990",
    "end": "104460"
  },
  {
    "text": "up to you you can choose how you deploy your apps whether it's single AZ or multi Z based on your requirements",
    "start": "104460",
    "end": "111770"
  },
  {
    "text": "and here's some region wide services that you can leverage existing today across the entire region and these",
    "start": "112820",
    "end": "119250"
  },
  {
    "text": "services are already delivered across multiple AZ's so Amazon s3",
    "start": "119250",
    "end": "126258"
  },
  {
    "text": "EFS are NFS file system is across all AZ's",
    "start": "126740",
    "end": "132349"
  },
  {
    "text": "our ds4 database are no sequel offering dynamodb and also others",
    "start": "133610",
    "end": "141080"
  },
  {
    "text": "so when do you choose multi region so as an Enterprise Architect here AWS we talk",
    "start": "141110",
    "end": "147780"
  },
  {
    "text": "to enterprises who run their own data centers already they're used to operating maybe you know multiple dcs",
    "start": "147780",
    "end": "153209"
  },
  {
    "text": "and they say hey i've always run more than one that means i need more than one region right and you know it may or may",
    "start": "153209",
    "end": "159270"
  },
  {
    "text": "not be the case so here's some cases that we see for patterns to decide on go into multi region you may want to lower",
    "start": "159270",
    "end": "166860"
  },
  {
    "start": "160000",
    "end": "160000"
  },
  {
    "text": "latency to a specific subset of customers so for example us-based customers get service from us-based",
    "start": "166860",
    "end": "172590"
  },
  {
    "text": "regions and it depends on the geographic that they're coming from they get service from local regions there may be",
    "start": "172590",
    "end": "178650"
  },
  {
    "text": "requirements for data sovereignty that keep data within a specific country or area and when you place data into a",
    "start": "178650",
    "end": "186300"
  },
  {
    "text": "region we don't move data out unless you specifically move the data and another",
    "start": "186300",
    "end": "191880"
  },
  {
    "text": "reason that we see some companies have requirements for separating data up to several hundred miles away from one",
    "start": "191880",
    "end": "197790"
  },
  {
    "text": "another and this could also solve for that so I won't talk about some existing",
    "start": "197790",
    "end": "203310"
  },
  {
    "text": "multi-region services to help you move from existing single region of multi-regional so this includes services",
    "start": "203310",
    "end": "210510"
  },
  {
    "text": "like route 53 from managed DNS s3 using cross region replication",
    "start": "210510",
    "end": "216320"
  },
  {
    "text": "RDS with multi region database replication as well and more such as EBS",
    "start": "216320",
    "end": "222030"
  },
  {
    "text": "snapshot replication and ami replication so with route 53 we support health",
    "start": "222030",
    "end": "228209"
  },
  {
    "start": "225000",
    "end": "225000"
  },
  {
    "text": "checks where you can send traffic to healthy environments latency based routing which controls the ability to",
    "start": "228209",
    "end": "234900"
  },
  {
    "text": "say a user gets routed to the region closest to them regardless of where they are globally you can get tighter with",
    "start": "234900",
    "end": "241019"
  },
  {
    "text": "geo DNS and say anything from this specific country or region gets routed to this end point if you need to and a",
    "start": "241019",
    "end": "248370"
  },
  {
    "text": "round robin and this serviced out of 68 pops or points of presence globally today and that's constantly increasing",
    "start": "248370",
    "end": "254040"
  },
  {
    "text": "and route 53 works with non AWS endpoints as well so you can use it with",
    "start": "254040",
    "end": "259169"
  },
  {
    "text": "your existing environment if it's on prim here's topology what it looks like with",
    "start": "259169",
    "end": "264630"
  },
  {
    "start": "262000",
    "end": "262000"
  },
  {
    "text": "this setup we talked about so we example net and on a health check if infrastructure is not healthy we can",
    "start": "264630",
    "end": "271860"
  },
  {
    "text": "route traffic to a static website for example on s3 that says traffic's under heavy load right now or come back later",
    "start": "271860",
    "end": "278099"
  },
  {
    "text": "and assuming it passes health check what we're doing here is we have two regions we have throught one and fraud - and you",
    "start": "278099",
    "end": "284249"
  },
  {
    "text": "can split with weighted round robin to say 95% of Lowood lands on fraud one",
    "start": "284249",
    "end": "289499"
  },
  {
    "text": "where five percents on fraud - so for example if you're going from one to two you don't want us necessarily split",
    "start": "289499",
    "end": "295469"
  },
  {
    "text": "traffic in half because you might not know what the situation's going to be on the other side yet so this allows you to easily test",
    "start": "295469",
    "end": "302330"
  },
  {
    "text": "with s3 cross region replication when you've read an object to an s3 bucket",
    "start": "302330",
    "end": "307919"
  },
  {
    "start": "303000",
    "end": "303000"
  },
  {
    "text": "you can have a target bucket that the object is replicated to and that could be in the same region it could be in a",
    "start": "307919",
    "end": "313979"
  },
  {
    "text": "different account if you need to for compliance reasons and it can also be across the world in another region another bucket and what what I think's",
    "start": "313979",
    "end": "323189"
  },
  {
    "text": "fascinating on this is we managed this for you in the backend you don't have to worry about any logic to move data",
    "start": "323189",
    "end": "328919"
  },
  {
    "text": "between s3 buckets this is all done automatically in the backend via WS and the data class it doesn't have to be s3",
    "start": "328919",
    "end": "336659"
  },
  {
    "text": "standard it can be s3 standard on one side and infrequent access on the other so you have two decisions on how you",
    "start": "336659",
    "end": "342419"
  },
  {
    "text": "want to place data and what storage class and you can also transition s3 ownership between accounts as well",
    "start": "342419",
    "end": "348930"
  },
  {
    "text": "because you can write to an account that's outside of yours if you have to and with RDS cross region replication",
    "start": "348930",
    "end": "356639"
  },
  {
    "start": "354000",
    "end": "354000"
  },
  {
    "text": "you can move data closer to endpoints so for example you have a master database residing in u.s. East and have read",
    "start": "356639",
    "end": "362669"
  },
  {
    "text": "replicas across the world to enhance the user experience that's closer to their area of the world",
    "start": "362669",
    "end": "368810"
  },
  {
    "text": "and you can also promote read replicas to masters as well so if you have a",
    "start": "368810",
    "end": "374069"
  },
  {
    "text": "failure in one region you can easily promote and keep running and again it's",
    "start": "374069",
    "end": "379319"
  },
  {
    "text": "a Tagus managed service so it's kind of what it looks like so you have a master database in let's say Virginia with",
    "start": "379319",
    "end": "386399"
  },
  {
    "text": "replicas across the world and it's very very easy to deploy this and again we do the heavy lifting",
    "start": "386399",
    "end": "392060"
  },
  {
    "text": "and there's many existing resources that you",
    "start": "392060",
    "end": "398069"
  },
  {
    "text": "guys can rely on right it's not you don't have to recreate the process as you go down this like there's many",
    "start": "398069",
    "end": "403530"
  },
  {
    "text": "before you have taken this journey we have many existing pages on reference",
    "start": "403530",
    "end": "408810"
  },
  {
    "text": "architecture you can refer to and we have white papers and documents and a vast ecosystem and something else so I",
    "start": "408810",
    "end": "415080"
  },
  {
    "text": "wanted to point out all AWS customers have solutions architects like me regardless of your level you know a",
    "start": "415080",
    "end": "421350"
  },
  {
    "text": "personal account you have an essay you can talk to you so please leverage the a diverse resources who are here to help",
    "start": "421350",
    "end": "427080"
  },
  {
    "text": "you with this process so we we talked about the architectural",
    "start": "427080",
    "end": "433590"
  },
  {
    "text": "background and we saw some theory on how you can do it and it's with my honor I'd",
    "start": "433590",
    "end": "438690"
  },
  {
    "text": "like to bring out Sony to talk about how they've actually done this journey for the PlayStation Network moving from one",
    "start": "438690",
    "end": "443970"
  },
  {
    "text": "region to multi region active active [Music]",
    "start": "443970",
    "end": "454440"
  },
  {
    "text": "[Applause] [Music] [Applause] [Music]",
    "start": "454440",
    "end": "502130"
  },
  {
    "text": "now starting at $2.99 so did you all see that great deal",
    "start": "502130",
    "end": "508100"
  },
  {
    "text": "nothing to peddle can't be prices like that you love Apple and Amazon so when",
    "start": "508100",
    "end": "514700"
  },
  {
    "text": "you buy one you're basically funding us to hang us directly to our pockets so who",
    "start": "514700",
    "end": "520789"
  },
  {
    "text": "are we I'm Alex I'm drunk if entertainment yeah so we work for Sony",
    "start": "520789",
    "end": "526580"
  },
  {
    "text": "Entertainment we do a lot of cool stuff and I wanted to share with you our active act this story kind of give you",
    "start": "526580",
    "end": "534680"
  },
  {
    "text": "some background about this our team in particular in the San Francisco office we started out as a very small team with",
    "start": "534680",
    "end": "541130"
  },
  {
    "start": "538000",
    "end": "538000"
  },
  {
    "text": "the really large responsibility we ran like pretty much like a start-up we were accentuate less than 10 core",
    "start": "541130",
    "end": "547730"
  },
  {
    "text": "people working on the new ps3 store and the user bases are a really huge they're",
    "start": "547730",
    "end": "554300"
  },
  {
    "text": "already used to using the PlayStation Store on the ps3 and on the Vita and we",
    "start": "554300",
    "end": "559400"
  },
  {
    "text": "want to really increase our presence and increase digital sales we want to have a online web store all these things and we",
    "start": "559400",
    "end": "566720"
  },
  {
    "text": "really relied on quick iterations on AWS it was super important to have quick",
    "start": "566720",
    "end": "572090"
  },
  {
    "text": "iterations of changes or architecture to make sure we scaled out to the user base that we had to deal with so some of the",
    "start": "572090",
    "end": "577670"
  },
  {
    "text": "things we do so for example we do social features so for example we have friend search we have your Activity Feed so",
    "start": "577670",
    "end": "585860"
  },
  {
    "text": "basically think of it as a kinda like a hybrid of like Facebook Twitter those kind of things and we provide services",
    "start": "585860",
    "end": "591320"
  },
  {
    "text": "when you play a game when you make friends if you earn a trophy you get to",
    "start": "591320",
    "end": "596570"
  },
  {
    "text": "share it on PSN also we have communities so we recently released this on mobile",
    "start": "596570",
    "end": "602210"
  },
  {
    "text": "and it lets you build your own game forums yep share committees with other",
    "start": "602210",
    "end": "608390"
  },
  {
    "text": "users for video we do things like Amazon video services we sell video with the",
    "start": "608390",
    "end": "614750"
  },
  {
    "text": "stream video to the console we do live streaming television to the console to",
    "start": "614750",
    "end": "621170"
  },
  {
    "text": "laptops very cool stuff and like I've mentioned we do store and",
    "start": "621170",
    "end": "627460"
  },
  {
    "text": "one real cool thing really cool slide here is a it's the year of VR and",
    "start": "627460",
    "end": "634490"
  },
  {
    "text": "PlayStation VR is slated to be one of the most popular VR systems out there and we're we're on onboard on that so",
    "start": "634490",
    "end": "641790"
  },
  {
    "text": "can I tell you what was going on with us when we started the store was lot like",
    "start": "641790",
    "end": "646949"
  },
  {
    "start": "644000",
    "end": "644000"
  },
  {
    "text": "this low resolution aggressive and then it was pretty bad then we transformed it into a very interactive digital store",
    "start": "646949",
    "end": "654060"
  },
  {
    "text": "and to allow games to really showcase what they have and what was cool is when we did do is that we did deliver it and",
    "start": "654060",
    "end": "660810"
  },
  {
    "text": "you know the execs were saying okay you guys did a great job why don't you know do some services for the ps4 and that's",
    "start": "660810",
    "end": "666269"
  },
  {
    "text": "what our team got to be privileged to work on so ps4 launch give you kind of",
    "start": "666269",
    "end": "672389"
  },
  {
    "text": "perspective of how we have to deal with scale is that we had 1 million users at once day one hour one we have to be able",
    "start": "672389",
    "end": "679620"
  },
  {
    "text": "to manage that kind of scale and we have designed for many different use cases at scale so all that social aspect",
    "start": "679620",
    "end": "685370"
  },
  {
    "text": "all the the commerce aspect all those things had to be done at a large scale for large user traffic spikes so now",
    "start": "685370",
    "end": "693899"
  },
  {
    "text": "that we did that we are evolving so if you think about our architecture phases this is a very typical of companies is",
    "start": "693899",
    "end": "701160"
  },
  {
    "start": "697000",
    "end": "697000"
  },
  {
    "text": "that you start with a proof-of-concept you want to scale it you want optimize it and then eventually you want to make it highly available and eventually you",
    "start": "701160",
    "end": "707730"
  },
  {
    "text": "want make it more efficient but talk about let's talk about highly available today so next stuff to make highly",
    "start": "707730",
    "end": "713310"
  },
  {
    "start": "712000",
    "end": "712000"
  },
  {
    "text": "available so there's a lot of ways to define highly available for us those multi region active active was what",
    "start": "713310",
    "end": "719790"
  },
  {
    "text": "highly available was for our team and that really raises our key questions for example how does one move such a large",
    "start": "719790",
    "end": "727019"
  },
  {
    "text": "set of critical apps so apps that are providing experiences for the store for",
    "start": "727019",
    "end": "732240"
  },
  {
    "text": "interacting with gamers all these have to be moved with hundreds of terabytes of live data had to be moved how do we",
    "start": "732240",
    "end": "739170"
  },
  {
    "text": "are taking every aspect of this to allow for it to be multi region active actor that introduces race conditions all",
    "start": "739170",
    "end": "745230"
  },
  {
    "text": "these kind of different things we had to account for and how do we do this without affecting users we don't want to",
    "start": "745230",
    "end": "750720"
  },
  {
    "text": "say hey guys you're not gonna have PSN for a week while we're doing this we need to make sure that it's done without",
    "start": "750720",
    "end": "756660"
  },
  {
    "text": "them noticing and keep in mind that this user impact is more than just for the gamer at home but also the game",
    "start": "756660",
    "end": "762630"
  },
  {
    "text": "publishers they they are also expecting our services to be live all the time so the question is where do we even start",
    "start": "762630",
    "end": "768850"
  },
  {
    "text": "with this I think Alex will have a good explanation of how you can build your",
    "start": "768850",
    "end": "774370"
  },
  {
    "text": "step-by-step process in migrating a bunch of apps Thank You Dustin",
    "start": "774370",
    "end": "780930"
  },
  {
    "text": "for performing folks right so we decided to start with most important at this",
    "start": "780930",
    "end": "786820"
  },
  {
    "text": "point I'm applications you're probably thinking that I'm gonna do what a lot of",
    "start": "786820",
    "end": "792250"
  },
  {
    "text": "folks do just give you a recipe you know how to design a system so it will can be",
    "start": "792250",
    "end": "797610"
  },
  {
    "text": "scaled and deployed in like 100 regions and then we be highly scalable I'm gonna",
    "start": "797610",
    "end": "805630"
  },
  {
    "text": "do it and the reason is it's kind of a tough problem it's actually really hard to cover it and even in one-hour",
    "start": "805630",
    "end": "812050"
  },
  {
    "text": "sessions there are too many moving pieces also every single application is different we have our use cases you saw",
    "start": "812050",
    "end": "818079"
  },
  {
    "text": "right how many things we do some companies the only one thing we do multiple things so there are different",
    "start": "818079",
    "end": "824320"
  },
  {
    "text": "use cases different applications my analogy usually let's say we're talking about the car if you buy a commuter car",
    "start": "824320",
    "end": "830440"
  },
  {
    "text": "it will be some I mean it's probably will be something reliable not very expensive if you want to go to a",
    "start": "830440",
    "end": "836350"
  },
  {
    "text": "racetrack right you want a sports car and then if you're a professional racer like you have one car will be a good",
    "start": "836350",
    "end": "843730"
  },
  {
    "text": "choice for you right you're not gonna race Formula One and Honda right I hope",
    "start": "843730",
    "end": "849490"
  },
  {
    "text": "you will not cool on the same page now so the first question",
    "start": "849490",
    "end": "856649"
  },
  {
    "text": "what does it mean to be multi-regional dashing doesn't kind of said that okay yeah we decided active active it wasn't",
    "start": "856649",
    "end": "864699"
  },
  {
    "text": "easy for us to decide to be honest with you originally and then just because you",
    "start": "864699",
    "end": "871540"
  },
  {
    "text": "know diversity means different people different opinions so some people said",
    "start": "871540",
    "end": "876760"
  },
  {
    "text": "active standby is good good enough right if there's a problem we just shoot the",
    "start": "876760",
    "end": "881949"
  },
  {
    "text": "traffic done some people said active active is the way to go no also pretty",
    "start": "881949",
    "end": "887860"
  },
  {
    "text": "pretty fair another another way thing to think about how do we replicate data right if first",
    "start": "887860",
    "end": "896680"
  },
  {
    "text": "some you I am hopefully someone at the end our soft state stalks anyone",
    "start": "896680",
    "end": "902070"
  },
  {
    "text": "yeah so you know right we use of state pattern where you stateless pattern",
    "start": "902070",
    "end": "908279"
  },
  {
    "text": "there is data involved so we need to figure out how to replicate data we have",
    "start": "908279",
    "end": "913950"
  },
  {
    "text": "multiple storages also failover I should be automated should it be manual all",
    "start": "913950",
    "end": "920279"
  },
  {
    "text": "those questions and there are many more questions actually so after some very",
    "start": "920279",
    "end": "925950"
  },
  {
    "text": "lousy discussions no one got hurt during them but we decided that we came",
    "start": "925950",
    "end": "934500"
  },
  {
    "text": "to some kind of agreement we decided that we should be able to lose one of",
    "start": "934500",
    "end": "939750"
  },
  {
    "start": "936000",
    "end": "936000"
  },
  {
    "text": "anything which means we should be able to lose one server one availability zone",
    "start": "939750",
    "end": "945060"
  },
  {
    "text": "one region right something very simple it's not complicated if you think about",
    "start": "945060",
    "end": "951330"
  },
  {
    "text": "it but we decided okay here's our guiding principle and if you stick to them we will be able to",
    "start": "951330",
    "end": "957260"
  },
  {
    "text": "attack the system or look at the system and figure out how we can move pieces without without breaking the principle",
    "start": "957260",
    "end": "965390"
  },
  {
    "text": "so now things uncertainty phase we have multiple micro",
    "start": "965390",
    "end": "972209"
  },
  {
    "text": "and macro services some applications are monolithic applications I know the",
    "start": "972209",
    "end": "978390"
  },
  {
    "text": "pattern is go micro services it's not that easy right we have legacy those apps we can just remove them rewrite",
    "start": "978390",
    "end": "986250"
  },
  {
    "text": "them it's hard it takes time we needed to do something some services are stateless",
    "start": "986250",
    "end": "991950"
  },
  {
    "text": "some some of you soft states stateful yeah we had stateful services",
    "start": "991950",
    "end": "998209"
  },
  {
    "text": "shame on us but we did so also another catch those",
    "start": "998209",
    "end": "1005180"
  },
  {
    "text": "applications they depend on multiple technologies behind the thing there are databases involved messaging queues all",
    "start": "1005180",
    "end": "1012020"
  },
  {
    "text": "the things some of them I'm not original by design and some are not right it's",
    "start": "1012020",
    "end": "1017240"
  },
  {
    "text": "it's our it's reality and then documentation right it's a standard",
    "start": "1017240",
    "end": "1023089"
  },
  {
    "text": "state almost out of date so we have to",
    "start": "1023089",
    "end": "1028550"
  },
  {
    "text": "figure out how to just even how do we find what is a what should we move how",
    "start": "1028550",
    "end": "1034639"
  },
  {
    "text": "should we move it what is the scope of work what do we do with inventory so it",
    "start": "1034639",
    "end": "1041058"
  },
  {
    "start": "1040000",
    "end": "1040000"
  },
  {
    "text": "gives us the thing gives you an idea you can see that like we really have it on",
    "start": "1041059",
    "end": "1048199"
  },
  {
    "text": "Cassandra usage we use SQ as ready stuff k3 so so our cloud and solar sorry and",
    "start": "1048199",
    "end": "1053350"
  },
  {
    "text": "bunch of other things and some I didn't mention because it will be just too much on one slide so we have all of this and",
    "start": "1053350",
    "end": "1061669"
  },
  {
    "text": "bunch of micro services and services talking to those things and then after",
    "start": "1061669",
    "end": "1067789"
  },
  {
    "text": "we went through the list we ask okay what is not original by design we have",
    "start": "1067789",
    "end": "1073820"
  },
  {
    "start": "1071000",
    "end": "1071000"
  },
  {
    "text": "so many things should be easy to move right and then mastery right",
    "start": "1073820",
    "end": "1079210"
  },
  {
    "text": "multi-regional nice cassandra another multi-regional thing huh Apache Kafka you see it's kind of",
    "start": "1079210",
    "end": "1087590"
  },
  {
    "text": "occupied holes wide so you can guess that that's it even with Kafka we will we it it",
    "start": "1087590",
    "end": "1097070"
  },
  {
    "text": "didn't work for us right like in the way it is right now available as an open",
    "start": "1097070",
    "end": "1102409"
  },
  {
    "text": "source we had to do some customizations to make it work for our use cases",
    "start": "1102409",
    "end": "1108220"
  },
  {
    "text": "right so stages of grief and you want heard about it alright",
    "start": "1108220",
    "end": "1115990"
  },
  {
    "start": "1109000",
    "end": "1109000"
  },
  {
    "text": "denial can be true right let's check it again so we checked it again",
    "start": "1115990",
    "end": "1122919"
  },
  {
    "text": "reality is an interesting thing it doesn't change when you want anger yeah right so the idea was that a",
    "start": "1122919",
    "end": "1131299"
  },
  {
    "text": "couple years ago I called everyone hey guys we want to go multi-regional yeah",
    "start": "1131299",
    "end": "1136309"
  },
  {
    "text": "please when you design when you develop things make sure we can easily move it",
    "start": "1136309",
    "end": "1141769"
  },
  {
    "text": "there's a human nature unfortunately when you say something when you want",
    "start": "1141769",
    "end": "1147470"
  },
  {
    "text": "something to happen but when there is nothing pushing you right it's not usually it's not going to",
    "start": "1147470",
    "end": "1153889"
  },
  {
    "text": "happen it's a big problem with all component approach you can design really",
    "start": "1153889",
    "end": "1159619"
  },
  {
    "text": "good beautiful system and then when you start implementing it sometimes you do some hacks sometimes you don't have time",
    "start": "1159619",
    "end": "1166610"
  },
  {
    "text": "sometimes you need to do really really quick hotfix and then you forget to remove it and then you ended up with",
    "start": "1166610",
    "end": "1173510"
  },
  {
    "text": "something that not actually it's not a component component you will have components anymore you have this mess so",
    "start": "1173510",
    "end": "1181690"
  },
  {
    "text": "and then what's actually interesting even my code you know when we moved it",
    "start": "1181690",
    "end": "1189230"
  },
  {
    "text": "to multiple regions I found the bargain it just can you imagine it's crazy right",
    "start": "1189230",
    "end": "1195200"
  },
  {
    "text": "yeah I couldn't believe it until I fixed it",
    "start": "1195200",
    "end": "1200290"
  },
  {
    "text": "yeah good thing was we have a good monitoring so we we caught it early but",
    "start": "1200290",
    "end": "1206270"
  },
  {
    "text": "it is what it is so another stage maybe we do active standby",
    "start": "1206270",
    "end": "1213080"
  },
  {
    "text": "maybe we should review our guidelines maybe it just might be to hurt",
    "start": "1213080",
    "end": "1219970"
  },
  {
    "text": "maybe maybe we just cannot do it at all right active active is only for us you",
    "start": "1219970",
    "end": "1227720"
  },
  {
    "text": "know big companies with huge budgets and Google some like huge ones",
    "start": "1227720",
    "end": "1234820"
  },
  {
    "text": "but finally we go to acceptance the acceptance is right we have all of it",
    "start": "1234820",
    "end": "1241370"
  },
  {
    "text": "and then we have six months right doesn't matter what we think we need to do it and",
    "start": "1241370",
    "end": "1248169"
  },
  {
    "text": "whatever it what it tells us it older that we cannot just put things together",
    "start": "1248169",
    "end": "1254990"
  },
  {
    "start": "1249000",
    "end": "1249000"
  },
  {
    "text": "you know magically and move it and put it in different regions and then it somehow works right it's not going to",
    "start": "1254990",
    "end": "1261799"
  },
  {
    "text": "happen even if we wanted really hard it doesn't it just things don't work that",
    "start": "1261799",
    "end": "1267980"
  },
  {
    "text": "way and then we just need to start thinking we need to start thinking about it and thinking what we should do and we",
    "start": "1267980",
    "end": "1276260"
  },
  {
    "text": "come up with several ideas first migrate migrate services to technology",
    "start": "1276260",
    "end": "1282679"
  },
  {
    "text": "which is multi-regional by design like pretty obvious your databases multi-regional your stateless you good",
    "start": "1282679",
    "end": "1289669"
  },
  {
    "text": "or probably you try to write cases and there's another another solution",
    "start": "1289669",
    "end": "1296559"
  },
  {
    "text": "let's somehow make the underlying technology multi-regional which could be even harder in some cases like making",
    "start": "1296559",
    "end": "1304090"
  },
  {
    "text": "MySQL multi-regional active active master master sounds like a challenge [Music]",
    "start": "1304090",
    "end": "1309990"
  },
  {
    "text": "also right we have all the things services micro services macro services",
    "start": "1309990",
    "end": "1317649"
  },
  {
    "start": "1310000",
    "end": "1310000"
  },
  {
    "text": "technical all those technologies we have infrastructure that we need to do it's",
    "start": "1317649",
    "end": "1322899"
  },
  {
    "text": "not infrastructure piece that we need to do how do we even schedule this thing right how do we figure out what steps we",
    "start": "1322899",
    "end": "1330130"
  },
  {
    "text": "should make and it's worth it should be done no matter what and then I we had to",
    "start": "1330130",
    "end": "1337270"
  },
  {
    "text": "somehow figure it out and then also it's kind of optimization problem if you I",
    "start": "1337270",
    "end": "1344350"
  },
  {
    "text": "mean well we we not managers we software engineers so we approached it as optimization problem right how do we",
    "start": "1344350",
    "end": "1350260"
  },
  {
    "text": "schedule things like a multi-threaded application so it can complete in the",
    "start": "1350260",
    "end": "1356169"
  },
  {
    "text": "fastest possible way and also we wanted machine to help us so the reason we",
    "start": "1356169",
    "end": "1361450"
  },
  {
    "text": "wanted machine to help us is because when I was originally asked what should go first I said write this up and that",
    "start": "1361450",
    "end": "1368590"
  },
  {
    "text": "up because they use Cassandra and I was wrong and I was wrong because machine",
    "start": "1368590",
    "end": "1373870"
  },
  {
    "text": "later said that I was wrong and I had to had to admit me again to denial I went through another five",
    "start": "1373870",
    "end": "1381220"
  },
  {
    "text": "stages so how did we do it I spent quite a time talking to people",
    "start": "1381220",
    "end": "1387460"
  },
  {
    "text": "like an hour like asking hey guys like managers how do you do it right you",
    "start": "1387460",
    "end": "1392950"
  },
  {
    "text": "should be doing it every single day then when I got desperate I used the last resort Stack Overflow",
    "start": "1392950",
    "end": "1399179"
  },
  {
    "text": "yeah nothing right maybe I was using different my words I don't know I",
    "start": "1399179",
    "end": "1406090"
  },
  {
    "text": "couldn't find anything and then I thought oh it said like a graph problem do you remember yesterday I said on",
    "start": "1406090",
    "end": "1412539"
  },
  {
    "text": "Monday that friends finder it's not a graph problem and but that is how come",
    "start": "1412539",
    "end": "1418120"
  },
  {
    "text": "it doesn't look like a graph problem so it is and we used an alpha J database",
    "start": "1418120",
    "end": "1425440"
  },
  {
    "text": "really good one open source one you'll see why to help us to solve this puzzle",
    "start": "1425440",
    "end": "1431350"
  },
  {
    "text": "so whiny of a J its graph engine and we're dealing with a graph you'll see",
    "start": "1431350",
    "end": "1437120"
  },
  {
    "text": "why in a minute there's a choral language quite powerful can do magical",
    "start": "1437120",
    "end": "1442160"
  },
  {
    "text": "things especially if you use Stack Overflow and Google sometimes yeses can",
    "start": "1442160",
    "end": "1449660"
  },
  {
    "text": "be populated programmatically and it's really important and also okay it can show us something we don't",
    "start": "1449660",
    "end": "1459710"
  },
  {
    "text": "expect it actually helped us how can we use it so well very very simple right we",
    "start": "1459710",
    "end": "1465500"
  },
  {
    "text": "need to create a model come up with the model identify nodes and relations and",
    "start": "1465500",
    "end": "1470750"
  },
  {
    "text": "then how do we do it by in this example nodes our micro services and pieces of",
    "start": "1470750",
    "end": "1477680"
  },
  {
    "text": "technology and then we can use tracing to find all the relations right we can use Zipkin open tracing it can help you",
    "start": "1477680",
    "end": "1485600"
  },
  {
    "text": "to to see that application a talking-to application B and then they both talking",
    "start": "1485600",
    "end": "1492230"
  },
  {
    "text": "to me because Sandra and know now the way it just run code analyzer it's not",
    "start": "1492230",
    "end": "1498170"
  },
  {
    "text": "really a code analyzer will not help you might but it might help you to just",
    "start": "1498170",
    "end": "1503510"
  },
  {
    "text": "double check and then last resort talking to people this one is unreliable",
    "start": "1503510",
    "end": "1509230"
  },
  {
    "text": "if it's really big it you'll spend a lot of time so maybe to double check but",
    "start": "1509230",
    "end": "1514580"
  },
  {
    "text": "sometimes when you cannot apply any of those where you you'll have to do it right sometimes even engineers will have",
    "start": "1514580",
    "end": "1521600"
  },
  {
    "text": "to talk to people again and then you generate this graph run chorus and then",
    "start": "1521600",
    "end": "1528500"
  },
  {
    "text": "it will it gives you the answer so example some example notes users",
    "start": "1528500",
    "end": "1535660"
  },
  {
    "start": "1531000",
    "end": "1531000"
  },
  {
    "text": "technology Cassandra Redis in this simple example and then the kid could let's say we have a simple property",
    "start": "1535660",
    "end": "1541430"
  },
  {
    "text": "multi-regional true/false server serious applications let's say they can be stateless true/false and different ages",
    "start": "1541430",
    "end": "1549260"
  },
  {
    "text": "like usage patterns what's it's read write and so if we take it we can create",
    "start": "1549260",
    "end": "1555980"
  },
  {
    "start": "1555000",
    "end": "1555000"
  },
  {
    "text": "the simple definition it's near 4j you'll see it later you can download it you can make a photo yeah",
    "start": "1555980",
    "end": "1563070"
  },
  {
    "text": "wait but there is this is language that you",
    "start": "1563070",
    "end": "1568590"
  },
  {
    "text": "can use and then when you run it never J gonna give you that thing and then it",
    "start": "1568590",
    "end": "1573870"
  },
  {
    "start": "1571000",
    "end": "1571000"
  },
  {
    "text": "shows you in this example PlayStation 4 talking to app 3 and f1 which took into",
    "start": "1573870",
    "end": "1579720"
  },
  {
    "text": "AB 2 and then up to talking to Commerce Cassandra cluster in this example and f1",
    "start": "1579720",
    "end": "1585210"
  },
  {
    "text": "talking to Redis our blue Cassandra is Marcos multi-regional our radius marked",
    "start": "1585210",
    "end": "1591510"
  },
  {
    "text": "is not multi-regional and then it's very simple it's very nice I was looked like",
    "start": "1591510",
    "end": "1598260"
  },
  {
    "text": "that something like this look scary in the beginning but not that bad honestly so",
    "start": "1598260",
    "end": "1606350"
  },
  {
    "text": "we ran another quarry so this disk worried what it does it finds all the",
    "start": "1606350",
    "end": "1613290"
  },
  {
    "text": "notes all the applications it depends only on multi-regional technology right this parameter is important you can tune",
    "start": "1613290",
    "end": "1620490"
  },
  {
    "text": "it if you say - it will show you something that depends on one or multi-regional and so on if you run it",
    "start": "1620490",
    "end": "1626340"
  },
  {
    "text": "on the graph it gives you that thing right so both depends only on Cassandra so",
    "start": "1626340",
    "end": "1633720"
  },
  {
    "text": "we're good so what did what did we do next we had to validate that our",
    "start": "1633720",
    "end": "1639750"
  },
  {
    "text": "multi-regional technology actually work I mean people say yes but",
    "start": "1639750",
    "end": "1645710"
  },
  {
    "text": "does it how do we know and figure out what to do with not multi-regional ones and then after we do it we can move",
    "start": "1645710",
    "end": "1653910"
  },
  {
    "text": "services in the following order and as a magical quarry it just sorts",
    "start": "1653910",
    "end": "1658970"
  },
  {
    "text": "applications per number of non multi-regional technologies and the idea is that we just went from from up",
    "start": "1658970",
    "end": "1667050"
  },
  {
    "text": "towards the bottom and moved one by one that's what we did actually so how did we validate stuff our main database is",
    "start": "1667050",
    "end": "1674730"
  },
  {
    "text": "Cassandra we use it a lot and it was a lot of unknowns will it work",
    "start": "1674730",
    "end": "1679790"
  },
  {
    "text": "how about performance will will we see any degradation",
    "start": "1679790",
    "end": "1685549"
  },
  {
    "text": "Cassandra is eventually consistent database how ventually is",
    "start": "1686210",
    "end": "1691360"
  },
  {
    "text": "what will be the latencies and your roadblocks what kind of roadblocks because and they're always there and we",
    "start": "1691360",
    "end": "1699460"
  },
  {
    "text": "knew that Netflix did it and they doing it on a double years they tested it the",
    "start": "1699460",
    "end": "1705280"
  },
  {
    "text": "way I did it it was quite simple there are 1 million poorest 1 million inserts they put it in Cassandra they waited 500",
    "start": "1705280",
    "end": "1713230"
  },
  {
    "text": "milliseconds somehow I didn't know how but exactly 500 milliseconds later read it and they say in all records were",
    "start": "1713230",
    "end": "1720370"
  },
  {
    "text": "successfully right so they said we're good well send some questions and we had",
    "start": "1720370",
    "end": "1727210"
  },
  {
    "text": "to answer should we just trust Netflix results should we",
    "start": "1727210",
    "end": "1733169"
  },
  {
    "text": "know yeah good we should not I mean we shouldn't we",
    "start": "1733169",
    "end": "1738910"
  },
  {
    "text": "should not probably cuz at the different use cases for this to give you one example this is a today or tomorrow talk",
    "start": "1738910",
    "end": "1745870"
  },
  {
    "text": "about how they move from classic to be pieces right there's some issues that",
    "start": "1745870",
    "end": "1750970"
  },
  {
    "text": "they probably gonna face or faced and another question is the experiment even",
    "start": "1750970",
    "end": "1757570"
  },
  {
    "text": "applicable right and as the last one and we do better and we can definitely can",
    "start": "1757570",
    "end": "1764440"
  },
  {
    "text": "our strategy was simple I'm going to use production data production load I want to simulate disruption we want to know",
    "start": "1764440",
    "end": "1770980"
  },
  {
    "start": "1765000",
    "end": "1765000"
  },
  {
    "text": "exactly what happens when Cassandra's cannot talk to each other we want to track replication latencies I want to",
    "start": "1770980",
    "end": "1777250"
  },
  {
    "text": "know exactly how long does it take to for a message to go from one region to another region to a third region right",
    "start": "1777250",
    "end": "1783460"
  },
  {
    "text": "and what happens when there's a conflict and I want to see what's gonna happen when we lose mutations when we write and",
    "start": "1783460",
    "end": "1791429"
  },
  {
    "text": "unfortunately we had to modify it Cassandra and if you're actually interested in how we did it there's a",
    "start": "1791429",
    "end": "1797200"
  },
  {
    "text": "talk on YouTube from Cassandra summit like those really in deep how we did it but high-level overview we took",
    "start": "1797200",
    "end": "1804130"
  },
  {
    "start": "1802000",
    "end": "1802000"
  },
  {
    "text": "production Cassandra's fetch those the data from it and we put it on a three then we used in gesture which fetch data",
    "start": "1804130",
    "end": "1812760"
  },
  {
    "text": "will be random from different regions who put them in Kafka white Kafka because we use Kafka it was available",
    "start": "1812760",
    "end": "1819460"
  },
  {
    "text": "and then we can if you do it you can use Kafka to later",
    "start": "1819460",
    "end": "1824530"
  },
  {
    "text": "all this data you can control it could be will be controlled experiment you know insert rate you can do reads you",
    "start": "1824530",
    "end": "1831430"
  },
  {
    "text": "can do wherever you want you can do multiple threads and you can do it you can do same experiment multiple times",
    "start": "1831430",
    "end": "1837870"
  },
  {
    "text": "later when we're ready to run it we just use the Kafka read then thing we called",
    "start": "1837870",
    "end": "1845770"
  },
  {
    "text": "read write loader to put some data on a test cluster this cluster was modified",
    "start": "1845770",
    "end": "1851080"
  },
  {
    "text": "so it was writing oops it was writing some metrics to Amazon",
    "start": "1851080",
    "end": "1858010"
  },
  {
    "text": "Keaney this fire hose which was delivering them to s3 right and later when we ended up after multiple test",
    "start": "1858010",
    "end": "1866200"
  },
  {
    "text": "runs we ended up was a lot of data sitting on necessary data was very simple like mutation why I write from s",
    "start": "1866200",
    "end": "1873790"
  },
  {
    "text": "under server B and it took that many milliseconds and data size was now there was another",
    "start": "1873790",
    "end": "1880420"
  },
  {
    "text": "field which showed us how much data we transfer it it's like that and later from s3 it's really easy to actually be",
    "start": "1880420",
    "end": "1889000"
  },
  {
    "text": "a spark and the EMR to crunch data so it gave us as ants something like that so",
    "start": "1889000",
    "end": "1895810"
  },
  {
    "text": "this one it's a graph it shows your latencies its experiment with a disruption disruption we modified",
    "start": "1895810",
    "end": "1903040"
  },
  {
    "text": "security group so it has the traffic between two regions you see replication latencies and then",
    "start": "1903040",
    "end": "1909820"
  },
  {
    "text": "the reason you see this square is because they it took some time right we waited for an hour and then once we open",
    "start": "1909820",
    "end": "1917170"
  },
  {
    "text": "it up data go to replicated so how about things that I'm not multi-regional by",
    "start": "1917170",
    "end": "1923560"
  },
  {
    "text": "design we gave teams two options actually if it's critical to users users",
    "start": "1923560",
    "end": "1928840"
  },
  {
    "text": "experience it must be redesigned if not critical like bad jobs so there are",
    "start": "1928840",
    "end": "1935950"
  },
  {
    "text": "several options active passive is fine if we can actually restore it really fast master/slave fine as well and use",
    "start": "1935950",
    "end": "1945310"
  },
  {
    "text": "Kafka that's what we recommended but it was up to the teams because actually team now's the best what's good for",
    "start": "1945310",
    "end": "1952210"
  },
  {
    "text": "their application it's really hard to dictated and then here's another example",
    "start": "1952210",
    "end": "1957810"
  },
  {
    "text": "solar example pre active active a very simple standard architecture indexer",
    "start": "1957810",
    "end": "1964800"
  },
  {
    "text": "solar master its or 3.0 so you can see that we use replicators and then read",
    "start": "1964800",
    "end": "1970230"
  },
  {
    "text": "replicas and then applications on applications talking to read replicas a",
    "start": "1970230",
    "end": "1975270"
  },
  {
    "text": "simple design everyone knows it so now simple active active right we take that",
    "start": "1975270",
    "end": "1982080"
  },
  {
    "text": "thing and then we just use replicator to replicate on another side one choice if you don't have time it",
    "start": "1982080",
    "end": "1990810"
  },
  {
    "text": "will work if you can rebuild indexer really fast another one requires a little bit more work now you we can we",
    "start": "1990810",
    "end": "1999360"
  },
  {
    "text": "offer it like to put Kafka in between a change design drastically but it allows",
    "start": "1999360",
    "end": "2005900"
  },
  {
    "text": "to do bi-directional replication using copy you can now index from both regions and insert it in your indexes so that's",
    "start": "2005900",
    "end": "2015350"
  },
  {
    "text": "just two examples we had many more examples we had MySQL we had",
    "start": "2015350",
    "end": "2021340"
  },
  {
    "text": "many things actually that we go through but it gives you like Justin a idea how",
    "start": "2021340",
    "end": "2028070"
  },
  {
    "text": "you can approach the problem and then you're probably wondering I will missing something and you think",
    "start": "2028070",
    "end": "2034270"
  },
  {
    "text": "anything with me anything I forgot to mention no all right we're done so",
    "start": "2034270",
    "end": "2041960"
  },
  {
    "text": "infrastructure right we cannot just deploy it if you don't have anything in",
    "start": "2041960",
    "end": "2047750"
  },
  {
    "text": "other region you cannot just drop stuff there it just doesn't work that way and that's not gonna cover this important",
    "start": "2047750",
    "end": "2053929"
  },
  {
    "text": "part yes magical infrastructures let's throw in the cloud it will work that's how it",
    "start": "2053929",
    "end": "2060290"
  },
  {
    "text": "works right guys all right so what we want to do is decompose and recompose our infrastructure from one region and",
    "start": "2060290",
    "end": "2066730"
  },
  {
    "text": "recompose in the other region right so we want to do is first break our infrastructure up into mobile parts this",
    "start": "2066730",
    "end": "2073158"
  },
  {
    "text": "is kind of a typical architecture that you may see you have your different layers you have your private something",
    "start": "2073159",
    "end": "2081020"
  },
  {
    "text": "that is your public sometimes you're not down tear your inbound here you have your data tier your caching here and",
    "start": "2081020",
    "end": "2087440"
  },
  {
    "text": "your clients interact via some entry point and case maybe an EOB in this case",
    "start": "2087440",
    "end": "2093710"
  },
  {
    "text": "so this is very typical so what we what do",
    "start": "2093710",
    "end": "2098780"
  },
  {
    "text": "we need to build in the other region it's very typical stuff the private some not those subnets and we want to build the BPC subnets all the network",
    "start": "2098780",
    "end": "2107260"
  },
  {
    "text": "rules all the in a gateways and that egress all these do we need to build and",
    "start": "2107260",
    "end": "2113320"
  },
  {
    "text": "that's very easy so key point about that is that",
    "start": "2113320",
    "end": "2118930"
  },
  {
    "start": "2118000",
    "end": "2118000"
  },
  {
    "text": "building infrastructure that we decided that we had to make it fully automated",
    "start": "2118930",
    "end": "2124550"
  },
  {
    "text": "our previous infrastructure was built very organically as our use cases came",
    "start": "2124550",
    "end": "2130700"
  },
  {
    "text": "along but now that we're going to be building multiple regions we have to make sure that we could quickly stamp out into region 2 region 3 region 5 10",
    "start": "2130700",
    "end": "2138620"
  },
  {
    "text": "11 - but the point is it had to be infrastructure as code we would not",
    "start": "2138620",
    "end": "2144350"
  },
  {
    "text": "allow it to be built by hand and there were some questions like there's some key decisions that we had",
    "start": "2144350",
    "end": "2150230"
  },
  {
    "text": "to make was how do we do cross regional communication do we use the PN's do we go over the Internet how are you",
    "start": "2150230",
    "end": "2155330"
  },
  {
    "text": "supposed to do that do we do it for every piece of the infrastructure do we do it for their apps to do with our data",
    "start": "2155330",
    "end": "2160400"
  },
  {
    "text": "a little some key decisions we have to make and the big question is do the",
    "start": "2160400",
    "end": "2166190"
  },
  {
    "text": "infrastructure has to match exactly what building active-active should region to look a lot like region one should be",
    "start": "2166190",
    "end": "2172790"
  },
  {
    "text": "completely different should there would be some so comfortable middle ground and like I said the first one it was",
    "start": "2172790",
    "end": "2178640"
  },
  {
    "text": "basically organically grown so you know the second region should be a blueprint",
    "start": "2178640",
    "end": "2183710"
  },
  {
    "text": "for every new region so we have to find some kind of comfortable middle ground to have them communicate and that would get still monitored in the same way and",
    "start": "2183710",
    "end": "2189440"
  },
  {
    "text": "build the same way so we have to do some compromises there the next phase that we had to do was",
    "start": "2189440",
    "end": "2195980"
  },
  {
    "text": "manage the data data is the key moving point out the other infrastructure your core network there you have to move your",
    "start": "2195980",
    "end": "2202460"
  },
  {
    "text": "data and there's some key questions about how we're gonna replicate data so Alex went over some scenarios but the",
    "start": "2202460",
    "end": "2209720"
  },
  {
    "text": "communication between it how are we gonna do it so one way was let's let's punch a hole we have our data in a",
    "start": "2209720",
    "end": "2216560"
  },
  {
    "start": "2212000",
    "end": "2212000"
  },
  {
    "text": "private subnet maybe you punch a hole throw a VPN and communicate the region - there's some advantages to doing that",
    "start": "2216560",
    "end": "2224660"
  },
  {
    "text": "depending on reviews case it may be the way to go so for example set a VPN on the cart with our particular current",
    "start": "2224660",
    "end": "2230900"
  },
  {
    "text": "network architecture was actually very easy it wasn't that difficult to do it was very straightforward to do it was",
    "start": "2230900",
    "end": "2237380"
  },
  {
    "text": "also secure and because only our dark traffic will be going over nothing can",
    "start": "2237380",
    "end": "2242690"
  },
  {
    "text": "look at it don't know man the middle and we could really trust the communication channel and then also manage these data",
    "start": "2242690",
    "end": "2248930"
  },
  {
    "text": "nodes is pretty straightforward we don't have to think about you know the what kind of IP a particular node has it's",
    "start": "2248930",
    "end": "2254420"
  },
  {
    "text": "all taken care of there's low lower operation overhead we have to create new scripts to manage it should be about the",
    "start": "2254420",
    "end": "2260390"
  },
  {
    "text": "same but there's some serious consum the concert that we're really limited limited on throughput to pay how much",
    "start": "2260390",
    "end": "2267280"
  },
  {
    "text": "data you're creating it could quickly saturate a VPN something that we saw and",
    "start": "2267280",
    "end": "2274030"
  },
  {
    "text": "depending on what you're doing and maybe doesn't make sense and then also when you scale with more applications now you",
    "start": "2274030",
    "end": "2279980"
  },
  {
    "text": "won't have a fixed set of VPNs you can use if you add new applications maybe it works for you today but maybe tomorrow",
    "start": "2279980",
    "end": "2286760"
  },
  {
    "text": "you're adding 10 new applications you know it may not work so it's something to keep in mind the second phase again",
    "start": "2286760",
    "end": "2293720"
  },
  {
    "text": "this same face is another option is that maybe you go replication over Yuna's with public IPs so basically move your",
    "start": "2293720",
    "end": "2300830"
  },
  {
    "text": "database into a publicly accessible area and then how to communicate over SSL",
    "start": "2300830",
    "end": "2306080"
  },
  {
    "text": "some secure channel to the other region over the world over the Internet and it's there's some really good things",
    "start": "2306080",
    "end": "2313310"
  },
  {
    "text": "here right so some of the pros and cons here is that now you're not Network constrained you can have petabytes of",
    "start": "2313310",
    "end": "2319370"
  },
  {
    "text": "data being replicated look at the similar to the experiment that that I was talking about and then",
    "start": "2319370",
    "end": "2326510"
  },
  {
    "text": "you don't have to worry about adding new applications you're just gonna do it just naturally and then you've already created this very open communication",
    "start": "2326510",
    "end": "2333230"
  },
  {
    "text": "channel between your day basis you don't to worry about having to create new VPN so new things that do handle your",
    "start": "2333230",
    "end": "2340100"
  },
  {
    "text": "traffic load but the serious cons are the operation overhead there's a lot of things you have to do to make this",
    "start": "2340100",
    "end": "2346040"
  },
  {
    "text": "happen for example the Cassandra example is that you have to make sure that each node has an elastic IP that they're",
    "start": "2346040",
    "end": "2353000"
  },
  {
    "text": "aware of each other in multiple regions there's a lot more operational orchestration that has to happen to make",
    "start": "2353000",
    "end": "2359000"
  },
  {
    "text": "it work and another thing is that the internode security must exist you have to make",
    "start": "2359000",
    "end": "2365600"
  },
  {
    "text": "sure that the data channel is truly secure and that nobody can be just listen in the middle so that's some",
    "start": "2365600",
    "end": "2371060"
  },
  {
    "text": "technologies may not allow this I think in some cases you do have to even create some kind of secure proxy to make it happen and then we need it also an app",
    "start": "2371060",
    "end": "2379150"
  },
  {
    "start": "2377000",
    "end": "2377000"
  },
  {
    "text": "tier and caching strategy how do we want to manage how apps talk between regions",
    "start": "2379150",
    "end": "2384200"
  },
  {
    "text": "we took a very simple approach we said you know what how about we just don't have apps across regions well we make",
    "start": "2384200",
    "end": "2390950"
  },
  {
    "text": "sure that app from region one does not talk to database in region two or micro-service a in region one doesn't",
    "start": "2390950",
    "end": "2397610"
  },
  {
    "text": "talk to micro service B and region two so that's what we chose we said",
    "start": "2397610",
    "end": "2403580"
  },
  {
    "text": "connected within one region only and they'll call the databases or applications and then why why we this is",
    "start": "2403580",
    "end": "2409610"
  },
  {
    "text": "business isolation was was essential to make sure that our favorite cases were predictable and included the files with",
    "start": "2409610",
    "end": "2416600"
  },
  {
    "text": "the domains are up is if you imagine having another region is more than twice the work you have to monitor a lot more",
    "start": "2416600",
    "end": "2422000"
  },
  {
    "text": "why add complexity when you don't have to in our case we said you know we want to be able to monitor it and make sure",
    "start": "2422000",
    "end": "2428720"
  },
  {
    "text": "that we can know exactly what is happening at all times and we can really debug things when we really have to our",
    "start": "2428720",
    "end": "2436280"
  },
  {
    "start": "2436000",
    "end": "2436000"
  },
  {
    "text": "client writing very simple called the NS to see where do you want to go sticking them by the idea and then",
    "start": "2436280",
    "end": "2443720"
  },
  {
    "text": "caught it a different region very simple very easy to know where a particular user is if you're from this country go",
    "start": "2443720",
    "end": "2449360"
  },
  {
    "text": "to this region you're in this other country go into this region so let's go here so predictable had to",
    "start": "2449360",
    "end": "2456830"
  },
  {
    "text": "be very predictable stick to routing user customer complained we should know what region to hit we can now know that",
    "start": "2456830",
    "end": "2462800"
  },
  {
    "text": "our failure zone is isolate between one region we can then track down what the",
    "start": "2462800",
    "end": "2467810"
  },
  {
    "text": "problem was and figure out what's going on and you know basically the state",
    "start": "2467810",
    "end": "2473120"
  },
  {
    "text": "that's maintained we just say ok now that we have use your sticky region it's fine the data is replicated in our data",
    "start": "2473120",
    "end": "2479300"
  },
  {
    "text": "tier and that's gonna be managing the state and then if we do that we just you",
    "start": "2479300",
    "end": "2484760"
  },
  {
    "text": "know house tailor services all magic happens and the user is fine doesn't matter what reason they are they're sticky and we're",
    "start": "2484760",
    "end": "2491070"
  },
  {
    "text": "able to do some form of percentage based around this based off likely depending on what country we can put into southern",
    "start": "2491070",
    "end": "2496740"
  },
  {
    "text": "region we can know generally how many users are going to what part so let's say we're putting it all",
    "start": "2496740",
    "end": "2503310"
  },
  {
    "text": "together so one key thing is that you should have",
    "start": "2503310",
    "end": "2508620"
  },
  {
    "start": "2505000",
    "end": "2505000"
  },
  {
    "text": "make sure yourself for design is capable of multi-regional deployments and this is your typical",
    "start": "2508620",
    "end": "2514910"
  },
  {
    "text": "software architecture yet the API business logic data access you know everyone has the same design you know",
    "start": "2514910",
    "end": "2521160"
  },
  {
    "text": "it's nothing special and but I want to focus on two key components is the data",
    "start": "2521160",
    "end": "2527340"
  },
  {
    "text": "access and the configuration so real when I said that you know",
    "start": "2527340",
    "end": "2532710"
  },
  {
    "text": "multi-regional deployments that they had to have application patterns like this where",
    "start": "2532710",
    "end": "2538280"
  },
  {
    "text": "application one couldn't talk to region two this application can talk to this",
    "start": "2538280",
    "end": "2544230"
  },
  {
    "text": "database and we want to make sure that within a region the apps can talk to",
    "start": "2544230",
    "end": "2549450"
  },
  {
    "text": "each other and within a region the application can talk to a database so",
    "start": "2549450",
    "end": "2555360"
  },
  {
    "text": "how do we achieve this so this comes down to the way we manage our configuration",
    "start": "2555360",
    "end": "2560990"
  },
  {
    "start": "2560000",
    "end": "2560000"
  },
  {
    "text": "for example you know an application configuration to a database could look",
    "start": "2560990",
    "end": "2566220"
  },
  {
    "text": "very much like this for example we could have our application whose wants to talk to Cassandra seeds is talking to a set",
    "start": "2566220",
    "end": "2571680"
  },
  {
    "text": "of IPs and I think a naive approach would be to just have no multiple configs per region so you can say my",
    "start": "2571680",
    "end": "2578220"
  },
  {
    "text": "apps that are deployed to region 1 are gonna have this kind of configuration I've started deployed three and two gonna have this configuration that could",
    "start": "2578220",
    "end": "2585420"
  },
  {
    "text": "work but you know that actually creates a lot of complexity right so now what's going to happen is that you have to manage two separate types of deployments",
    "start": "2585420",
    "end": "2592440"
  },
  {
    "text": "two different bills potentially weird kinds of ways of configuring your application and it's gonna be quickly",
    "start": "2592440",
    "end": "2598710"
  },
  {
    "text": "make your deployments infinitely more complex so what did we do what if we",
    "start": "2598710",
    "end": "2605880"
  },
  {
    "text": "implemented some kind of basic form of central configuration or a way to look up the things within a region when you",
    "start": "2605880",
    "end": "2612060"
  },
  {
    "text": "need them so for example let's say we have some kind of region local DB so where are my",
    "start": "2612060",
    "end": "2617670"
  },
  {
    "text": "Saunders seeds okay I'll tell you it is these IPS and then",
    "start": "2617670",
    "end": "2622720"
  },
  {
    "text": "your application can know so now your your region is telling you what your application needs to do and in our case",
    "start": "2622720",
    "end": "2629380"
  },
  {
    "text": "what we did was that we basically use in route 53 in a lot of places for internal",
    "start": "2629380",
    "end": "2636040"
  },
  {
    "text": "lookups for our applications so for example I can ask for some DNS name saying Cassandra seeds 1 and then that",
    "start": "2636040",
    "end": "2643150"
  },
  {
    "text": "configurations the same in my application in region 1 versus the same configuration in region 2 and then the",
    "start": "2643150",
    "end": "2650650"
  },
  {
    "text": "route 53 is configured in each one to talk to tell the application where the Cassandra seeds are and the same thing",
    "start": "2650650",
    "end": "2657609"
  },
  {
    "text": "can apply to all your different micro-services so for example of micro-service B needs to talk to micro",
    "start": "2657609",
    "end": "2664240"
  },
  {
    "text": "service C as opposed to putting a load balancer name inside the configuration",
    "start": "2664240",
    "end": "2670060"
  },
  {
    "text": "you would then reference that short DNS short name and then has brought 53 tell",
    "start": "2670060",
    "end": "2676180"
  },
  {
    "text": "you exactly where to go within your region what this really does is create this really great isolation within the",
    "start": "2676180",
    "end": "2681730"
  },
  {
    "text": "application so it doesn't need to talk about ok so then a result like that so the key",
    "start": "2681730",
    "end": "2689260"
  },
  {
    "start": "2687000",
    "end": "2687000"
  },
  {
    "text": "thing about the simplified software configuration is to make sure that the application contains some kind of",
    "start": "2689260",
    "end": "2695800"
  },
  {
    "text": "context switch the infrastructure manages so for example should have data center is she have endpoint shortening",
    "start": "2695800",
    "end": "2701890"
  },
  {
    "text": "resolution so we can know what database to talk to you what microcircuits to talk to you it should have some kind of",
    "start": "2701890",
    "end": "2707410"
  },
  {
    "text": "environment it should also has some database connection details and this is what is very essential for the",
    "start": "2707410",
    "end": "2713950"
  },
  {
    "text": "application to behave correctly and so basically context is very responsible for the infrastructure itself I mean",
    "start": "2713950",
    "end": "2720520"
  },
  {
    "text": "it's responsible for the infrastructure is responsible for how the application behaves based off of if it's in the",
    "start": "2720520",
    "end": "2726460"
  },
  {
    "text": "certain region or how it supposed to behave if you have dev environments in both regions so we did this through a lot of the",
    "start": "2726460",
    "end": "2733000"
  },
  {
    "text": "build automation and so the it's basically context driven so",
    "start": "2733000",
    "end": "2738910"
  },
  {
    "start": "2738000",
    "end": "2738000"
  },
  {
    "text": "in terms of infrastructure is code we use terraform to do this whoa ok let's",
    "start": "2738910",
    "end": "2744490"
  },
  {
    "text": "get back so new regions have to be built with automation so what I've been said that before is that every reason had to",
    "start": "2744490",
    "end": "2750550"
  },
  {
    "text": "be a blueprint for the next one which meant that we can never hand create anything so what we did was basically",
    "start": "2750550",
    "end": "2756520"
  },
  {
    "text": "focus on spec based infrastructure so what we did was we",
    "start": "2756520",
    "end": "2762190"
  },
  {
    "text": "specified every micro service and this would then repeat into terraform and then this would then dry with how the",
    "start": "2762190",
    "end": "2767950"
  },
  {
    "text": "infrastructure was built and so we had an internal tool that was basically a internal tool and a DSL that which",
    "start": "2767950",
    "end": "2774940"
  },
  {
    "text": "basically could manage our Sony specific domain knowledge for our micro service",
    "start": "2774940",
    "end": "2780220"
  },
  {
    "text": "so Marc micro services so each micro service had a definition a specification that then would then generate a",
    "start": "2780220",
    "end": "2786700"
  },
  {
    "text": "terraform something to be fed into tariff one to build the infrastructure for that micro service for example let's",
    "start": "2786700",
    "end": "2794890"
  },
  {
    "text": "say and that required Cassandra and SNS well this would the specification that",
    "start": "2794890",
    "end": "2800890"
  },
  {
    "text": "we had would then be able to generate something that would create security groups reports nine one six zero or",
    "start": "2800890",
    "end": "2806970"
  },
  {
    "text": "these ports from seven one nine nine seven nine nine to build an SNS well the EOB and all the infrastructure needed to",
    "start": "2806970",
    "end": "2812740"
  },
  {
    "text": "support that micro services micro service so we have a strongly different micro services that let it so we can",
    "start": "2812740",
    "end": "2818050"
  },
  {
    "text": "just really just print out all our different infrastructure for all of our different micro services so it was a",
    "start": "2818050",
    "end": "2825400"
  },
  {
    "start": "2825000",
    "end": "2825000"
  },
  {
    "text": "database automation like I said what we chose was to actually go the route of",
    "start": "2825400",
    "end": "2831180"
  },
  {
    "text": "moving our private databases our database in our private subnet into a",
    "start": "2831180",
    "end": "2836380"
  },
  {
    "text": "public subnet so that we can not be network constrained and we used ansible",
    "start": "2836380",
    "end": "2841660"
  },
  {
    "text": "to do a lot of this automation it was responsible for creating moving our",
    "start": "2841660",
    "end": "2847420"
  },
  {
    "text": "applications to public subnet giving it a IPs managing our know list and",
    "start": "2847420",
    "end": "2855000"
  },
  {
    "text": "that's what we did with that and manage our whitelisting between our two regions so you can imagine now that we're",
    "start": "2855000",
    "end": "2860620"
  },
  {
    "text": "talking over the internet you have to make sure that our nodes can only talk with each other and so with that we were",
    "start": "2860620",
    "end": "2867910"
  },
  {
    "text": "able to make sure we filled in that security constraint it also was talk of",
    "start": "2867910",
    "end": "2874480"
  },
  {
    "text": "managing certificates in SSL and that was key in our Cassandra",
    "start": "2874480",
    "end": "2879970"
  },
  {
    "text": "deployments and also our solar deployments and all that and another thing is now that you have another",
    "start": "2879970",
    "end": "2885190"
  },
  {
    "start": "2883000",
    "end": "2883000"
  },
  {
    "text": "region that is turning is key and we have to make sure that we can monitor it and know where any any problems would",
    "start": "2885190",
    "end": "2893740"
  },
  {
    "text": "happen so we use graph on it which is here and what's key here is that the",
    "start": "2893740",
    "end": "2899110"
  },
  {
    "start": "2898000",
    "end": "2898000"
  },
  {
    "text": "proper tagging we should know what any metric where it's coming from and how to",
    "start": "2899110",
    "end": "2904630"
  },
  {
    "text": "aggregate it so we can show those pretty graphs English fauna so part of the context of all the applications like how",
    "start": "2904630",
    "end": "2909910"
  },
  {
    "text": "much before was the region and with this region we're able to attach this to all",
    "start": "2909910",
    "end": "2915220"
  },
  {
    "text": "of our logs and give this context to our log so that we can then build our proper",
    "start": "2915220",
    "end": "2920230"
  },
  {
    "text": "graph so we know where any problem exists so these region tags are added and we can just be plugged into any",
    "start": "2920230",
    "end": "2926110"
  },
  {
    "text": "modern every choice we use but the father we use the fauna we also use some Splunk and then some of the key metrics",
    "start": "2926110",
    "end": "2934300"
  },
  {
    "text": "to always be watching for and like for our case was the data replication was actually super key to look at for",
    "start": "2934300",
    "end": "2941350"
  },
  {
    "text": "example in our data replication hints to Cassandra was a key metric to see if something was going",
    "start": "2941350",
    "end": "2947740"
  },
  {
    "text": "wrong seconds behind master minus QL was another one Kafka just how many messages",
    "start": "2947740",
    "end": "2952900"
  },
  {
    "text": "that are in and out that you've been processing these are all key to figuring out if there's any problems going on in",
    "start": "2952900",
    "end": "2959740"
  },
  {
    "text": "your little reader deployment so what here it's putting it all together so",
    "start": "2959740",
    "end": "2965280"
  },
  {
    "start": "2963000",
    "end": "2963000"
  },
  {
    "text": "here we always started with one region we're monitoring it we have our applications in the public some that we",
    "start": "2965280",
    "end": "2973660"
  },
  {
    "text": "have our database in the private subnets and this is a we're gonna go multi-regional so now let's see what we",
    "start": "2973660",
    "end": "2979840"
  },
  {
    "text": "want to do we first spin up the terraform our second region with the",
    "start": "2979840",
    "end": "2984900"
  },
  {
    "text": "infrastructure that we want so the infrastructure doesn't match exactly we have our database available over a",
    "start": "2984900",
    "end": "2991300"
  },
  {
    "text": "public subnet and it doesn't match exactly like our first one but it's a lot more scalable to deploy this and we",
    "start": "2991300",
    "end": "3000420"
  },
  {
    "text": "deploy our databases we test this that make sure that the deployment automation works and then we",
    "start": "3000420",
    "end": "3007980"
  },
  {
    "text": "replicate so after we replicate we do what alice was mentioning we started measuring and production data to make",
    "start": "3007980",
    "end": "3014760"
  },
  {
    "text": "sure that our data replication was sufficient that we could manage any kind of connection disruption so we monitor",
    "start": "3014760",
    "end": "3022610"
  },
  {
    "text": "that and then we let a catch up and then we then deploy our applications that we",
    "start": "3022610",
    "end": "3029180"
  },
  {
    "text": "need we run full testing on that side not exposing customers to that",
    "start": "3029180",
    "end": "3034510"
  },
  {
    "text": "to that tier and we basically let the customers still talk to region one and",
    "start": "3034510",
    "end": "3040190"
  },
  {
    "text": "then we just monitor then what we do is then we configure our",
    "start": "3040190",
    "end": "3048080"
  },
  {
    "text": "DNS and our consoles to really to reference DNS and then route traffic",
    "start": "3048080",
    "end": "3054520"
  },
  {
    "text": "accordingly so with this AV each step of the way we're modern each aspect so what",
    "start": "3054520",
    "end": "3061010"
  },
  {
    "text": "we do is we layer on the different pieces we layer on first our infrastructure we then test each part of",
    "start": "3061010",
    "end": "3067400"
  },
  {
    "text": "that we put our data on we test each piece of that we then deploy applications test the functionality that",
    "start": "3067400",
    "end": "3073670"
  },
  {
    "text": "we give a little bit of users to the second region make sure that their experience is fine and then we go full",
    "start": "3073670",
    "end": "3080210"
  },
  {
    "text": "50/50 and that's just the simple way of just layering on the the different",
    "start": "3080210",
    "end": "3085490"
  },
  {
    "text": "pieces of your multi-regional deployment so then you know exactly what you're delivering is a quality",
    "start": "3085490",
    "end": "3092950"
  },
  {
    "text": "so some lessons learned so some lessons learned from this or this so",
    "start": "3092950",
    "end": "3098890"
  },
  {
    "start": "3098000",
    "end": "3098000"
  },
  {
    "text": "data synchronization is super critical so the thing is that is the number one",
    "start": "3098890",
    "end": "3104120"
  },
  {
    "text": "thing you have to do it is the dependency that every application that has to do have to do that",
    "start": "3104120",
    "end": "3110440"
  },
  {
    "text": "when you build your dependency map just start with that first and then from there it should make sense so you use",
    "start": "3110440",
    "end": "3116390"
  },
  {
    "text": "the graph technique that Alex showed and then it will show you the path of how to go multi-regional or what apps to deploy",
    "start": "3116390",
    "end": "3122990"
  },
  {
    "text": "first the second has always run your own benchmarking so there's so much data out there like for the devil Netflix did the",
    "start": "3122990",
    "end": "3129320"
  },
  {
    "text": "benchmarking all these different companies have done their benchmarking Guber and you know if this really will",
    "start": "3129320",
    "end": "3135110"
  },
  {
    "text": "good for them but is it good for everybody probably not it's not good depending on your use case you should always run your own benchmarking it",
    "start": "3135110",
    "end": "3140780"
  },
  {
    "text": "takes a little bit more time but it's completely necessary and also don't allow legacy to control what",
    "start": "3140780",
    "end": "3148910"
  },
  {
    "text": "your next region should look like it should always be some healthy don't let how you build things in the past to find",
    "start": "3148910",
    "end": "3155810"
  },
  {
    "text": "how you build things in the future don't make make sure that your new regions don't have to match exactly make sure",
    "start": "3155810",
    "end": "3162350"
  },
  {
    "text": "that you build exactly be perfect design to allow you to build multiple regions",
    "start": "3162350",
    "end": "3167840"
  },
  {
    "text": "afterwards applications always have to be context driven never let your applications decide who",
    "start": "3167840",
    "end": "3175340"
  },
  {
    "text": "they're talking to always have the infrastructure tell you that and depending on your data load across",
    "start": "3175340",
    "end": "3181340"
  },
  {
    "text": "regional VPNs may work are a case it didn't we saturated VPNs rather quickly so we decided to go you know add some",
    "start": "3181340",
    "end": "3188390"
  },
  {
    "text": "complexity to our system and then move away from VPNs so we're hiring we're",
    "start": "3188390",
    "end": "3195110"
  },
  {
    "text": "doing a lot of cool stuff go here this is a will go to either my or Alex's",
    "start": "3195110",
    "end": "3200480"
  },
  {
    "text": "LinkedIn so be feel free to friend us we're doing a lot of cool stuff a lot of hands-on things multi region as well as",
    "start": "3200480",
    "end": "3207230"
  },
  {
    "text": "things are going Walter reader with all their applications so yeah thank you very much I appreciate",
    "start": "3207230",
    "end": "3213530"
  },
  {
    "text": "all your time [Applause]",
    "start": "3213530",
    "end": "3218650"
  }
]