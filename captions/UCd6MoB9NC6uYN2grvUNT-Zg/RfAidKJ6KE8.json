[
  {
    "text": "cool uh hello everybody so uh welcome to uh MBL 302 where we'll be talking about",
    "start": "2399",
    "end": "9280"
  },
  {
    "text": "how Flipboard has scaled a mobile web app to 100 million clients and and what we're going to do beyond that so let's",
    "start": "9280",
    "end": "15599"
  },
  {
    "text": "go get go ahead and get started so I'm I'm Joey Parsons uh I'm the head of operations at Flipboard uh previously I",
    "start": "15599",
    "end": "22199"
  },
  {
    "text": "was at clout building out the the Big Data infrastructure that powers the clout score I was at Sugar CRM where I",
    "start": "22199",
    "end": "28000"
  },
  {
    "text": "helped build out like our our SAS on demand uh on demand platform and also at uh",
    "start": "28000",
    "end": "33120"
  },
  {
    "text": "Rackspace in their very early days back before the cloud when it was just managed hosting so um really excited",
    "start": "33120",
    "end": "39040"
  },
  {
    "text": "here to to talk to you about uh what we've got going on in terms of the cloud usage at Flipboard so full disclosure",
    "start": "39040",
    "end": "47199"
  },
  {
    "text": "I've been at Flipboard for two months I I just joined pretty recently you know taking this speaking engagement was",
    "start": "47199",
    "end": "52840"
  },
  {
    "text": "actually a lot of fun because it made me really have to go deep with everybody on the entire operations and engineer team",
    "start": "52840",
    "end": "59399"
  },
  {
    "text": "and and really kind of you know learn about everything that happened over the three years of history at Flipboard and",
    "start": "59399",
    "end": "65119"
  },
  {
    "text": "why we are where we are today so I'll I'll I'll be sharing a lot of the personal stories that that I learned",
    "start": "65119",
    "end": "71240"
  },
  {
    "text": "from them that that really kind of shape what you know what we've got going on so how many Flipboard users do we have in",
    "start": "71240",
    "end": "77360"
  },
  {
    "text": "the audience exciting very cool so for for those of you guys that don't know what",
    "start": "77360",
    "end": "83400"
  },
  {
    "text": "Flipboard is we we are a we are basically building the world's best personal magazine we we work on pretty",
    "start": "83400",
    "end": "89920"
  },
  {
    "text": "pretty much every device whether it's a phone or tablet we just recently migrated our magazines to the web so the",
    "start": "89920",
    "end": "95960"
  },
  {
    "text": "infrastructure for all of this has evolved greatly over time you know as the operating systems for those devices",
    "start": "95960",
    "end": "101799"
  },
  {
    "text": "have become more robust and just the hardware behind them has allowed us to do a lot more on the device side",
    "start": "101799",
    "end": "108600"
  },
  {
    "text": "so we work with a variety of like the top brands in the world so not only do we not only do we injust the content",
    "start": "108600",
    "end": "115159"
  },
  {
    "text": "that they provide but we also crawl you know the crawl the web and and grab RSS",
    "start": "115159",
    "end": "120240"
  },
  {
    "text": "feeds and different you know just content out there to help create like an immersive beautiful experience of of",
    "start": "120240",
    "end": "125840"
  },
  {
    "text": "content from around the web we also take social signals from a",
    "start": "125840",
    "end": "130920"
  },
  {
    "text": "lot of the you know top social networks out there and pull that information in and build recommendations for you so",
    "start": "130920",
    "end": "136720"
  },
  {
    "text": "that you can have you know the best experience for",
    "start": "136720",
    "end": "140799"
  },
  {
    "text": "you so what do you end up with you end up with a you know you end up with a set of magazines that are tailored for",
    "start": "142120",
    "end": "147840"
  },
  {
    "text": "specific subjects and categories that you can choose to create your own Flipboard earlier this year we actually",
    "start": "147840",
    "end": "153400"
  },
  {
    "text": "launched the ability to anybody to create their own magazines right basically you can flip content from within Flipboard into your own magazine",
    "start": "153400",
    "end": "160080"
  },
  {
    "text": "or with our bookmarket you can flip you know directly from from any web page on the internet and just earlier this week",
    "start": "160080",
    "end": "165920"
  },
  {
    "text": "we actually launched shopping so you can actually flip content for sale into your own magazine to build kind of a shopping",
    "start": "165920",
    "end": "172200"
  },
  {
    "text": "catalog and you can actually integrate that within your you know within a Flipboard magazine we launch with Banana",
    "start": "172200",
    "end": "178040"
  },
  {
    "text": "Republic eBay and Levis just earlier this week you know to accomplish that",
    "start": "178040",
    "end": "183680"
  },
  {
    "text": "task so you know there's there's a lot of infrastructure from you know from the API that serves that content you know",
    "start": "184760",
    "end": "190760"
  },
  {
    "text": "the batch processing engine that we have that builds the recommendations and then all the Serv and and and and basically",
    "start": "190760",
    "end": "197640"
  },
  {
    "text": "creates all the services that we've created and it didn't happen overnight and it wasn't easy you know but we made",
    "start": "197640",
    "end": "202959"
  },
  {
    "text": "a bet since day one on Amazon web services that they were going to be the the partner that we needed to be able to",
    "start": "202959",
    "end": "208319"
  },
  {
    "text": "scale our growth and not only you know we don't just use ec2 or S3 and Bill service on top of",
    "start": "208319",
    "end": "214000"
  },
  {
    "text": "that we actually use a lot of the the value ad you know services that Amazon provides so let's go ahead and get started so you know the the the the the",
    "start": "214000",
    "end": "222159"
  },
  {
    "text": "reason for this talk is to kind of talk about what makes you know mobile apps different than web apps right you know",
    "start": "222159",
    "end": "228159"
  },
  {
    "text": "there's you know a lot of very kind of uh you know things that make sense like",
    "start": "228159",
    "end": "233840"
  },
  {
    "text": "like Wi-Fi versus slow connectivity right you know we we have users all over the globe so you know having the the the",
    "start": "233840",
    "end": "240280"
  },
  {
    "text": "co the kind of closest point of presence to them and to to be able to uh to serve the content quickly is incredibly",
    "start": "240280",
    "end": "246599"
  },
  {
    "text": "important you know and there's variances in bandwidth in in all the global carriers every mobile device or tablet",
    "start": "246599",
    "end": "253040"
  },
  {
    "text": "has has has a local cache you know and and you should use this aggressively to be able to control your behavior during",
    "start": "253040",
    "end": "258799"
  },
  {
    "text": "latency one of the things that we did early on at Flipboard is we architected our service so that we could experience",
    "start": "258799",
    "end": "265280"
  },
  {
    "text": "15 minutes of downtime on the server side and not have any user B user experience in the actual app so we cash",
    "start": "265280",
    "end": "271840"
  },
  {
    "text": "a lot of data so you can continue flipping and continue reading and continue looking at content even if our backend service is down and that saved",
    "start": "271840",
    "end": "278639"
  },
  {
    "text": "our ass quite a few times so it's it was it was an architecture decision that we made early on that really helped us out",
    "start": "278639",
    "end": "284280"
  },
  {
    "text": "there so then you know these are also like I said earlier these These are incredibly fast devices you can do a lot",
    "start": "284280",
    "end": "290360"
  },
  {
    "text": "of computation on the actual device so you know what people might assume that",
    "start": "290360",
    "end": "295440"
  },
  {
    "text": "with Flipboard the entire layout it's generated on the server side and then we're basically just displaying that",
    "start": "295440",
    "end": "301080"
  },
  {
    "text": "content on the on the local side we actually you know we actually the the computations around layout actually",
    "start": "301080",
    "end": "306960"
  },
  {
    "text": "happen on on the actual device because every device is different and we also do some interesting things with our ads to",
    "start": "306960",
    "end": "313039"
  },
  {
    "text": "where the ads aren't automatically injected from the server side they're actually you know you know on on the",
    "start": "313039",
    "end": "318360"
  },
  {
    "text": "device and and the logic for how they get injected within your foot feed actually happens through",
    "start": "318360",
    "end": "323639"
  },
  {
    "text": "there so one of the ways that we're going to kind of uh phrase this talk today is",
    "start": "323639",
    "end": "329520"
  },
  {
    "text": "we're going to take you through you know some very distinct stages of how Flipboard grew the first stage I'm going",
    "start": "329520",
    "end": "334600"
  },
  {
    "text": "to talk about is kind of like the Prototype stage this is where we went from zero to one million users you know this was this was the very early on days",
    "start": "334600",
    "end": "341319"
  },
  {
    "text": "of footboard when we just were on the iPad right um and you know there's a cute little magazine about babies that",
    "start": "341319",
    "end": "347720"
  },
  {
    "text": "you know that kind of demonstrate where we were at that point so in order to kind of get things out really quickly we",
    "start": "347720",
    "end": "354160"
  },
  {
    "text": "had you know a pretty simple stack we had a very monolithic you know rails application that handled basically",
    "start": "354160",
    "end": "360280"
  },
  {
    "text": "everything every every single service request that came to the server side it was it was completely in rails uh we",
    "start": "360280",
    "end": "365680"
  },
  {
    "text": "used RDS um and we also use mongodb and we heavily cached things in mcache and",
    "start": "365680",
    "end": "371000"
  },
  {
    "text": "at that point we were just using es2 S3 and RDS at that point so uh you know very limited use of Amazon but we were",
    "start": "371000",
    "end": "377560"
  },
  {
    "text": "actually you know starting to kind of really build our tooling and and understand how it could really help us this was three years ago so you know",
    "start": "377560",
    "end": "383759"
  },
  {
    "text": "there there were there there wasn't a lot of um instrumentation that we could just grab and begin using and also so",
    "start": "383759",
    "end": "389880"
  },
  {
    "text": "you know we were launching a new company right you know we we we didn't have a lot of time to invest in a bunch of",
    "start": "389880",
    "end": "395080"
  },
  {
    "text": "different services and we just needed to get something out the door to see how people would use it so the initial launch night um like I",
    "start": "395080",
    "end": "403319"
  },
  {
    "text": "said before we we we only launched on the iPad you know we were one of the first kind of like you know Flagship",
    "start": "403319",
    "end": "408800"
  },
  {
    "text": "applications on the iPad and that initial launch night was actually pretty interesting so you know we submitted the",
    "start": "408800",
    "end": "416039"
  },
  {
    "text": "app to the App Store you know it got pre-approved and everybody just sat around for that time we're going to be",
    "start": "416039",
    "end": "421080"
  },
  {
    "text": "like okay let's push the button let's go let's launch it right now so we launched the app and uh at that point the only",
    "start": "421080",
    "end": "427879"
  },
  {
    "text": "metrics that we had in the entire system were cloudwatch right so we're watching the cloudwatch metrics as you know as",
    "start": "427879",
    "end": "433800"
  },
  {
    "text": "things start happening you know we see a few users roll in you know starts you know tens of users start rolling in and",
    "start": "433800",
    "end": "439680"
  },
  {
    "text": "then start hundreds of users start rolling in and everybody's really excited the company's you like really stoked everybody's you know cheering",
    "start": "439680",
    "end": "445360"
  },
  {
    "text": "drinking having a good time and you know suddenly all those met all those CPU metrics on all those machines that we're",
    "start": "445360",
    "end": "451520"
  },
  {
    "text": "looking at just start spiking and everybody's like crap what do we do so we immediately just start spinning out",
    "start": "451520",
    "end": "457440"
  },
  {
    "text": "more rails nodes right like let's get some more stuff out there we need some more we need some more you know capacity to be able to handle the amount of",
    "start": "457440",
    "end": "463400"
  },
  {
    "text": "traffic that we're getting and it was it was a good thing right we wanted that amount of traffic but you know we couldn't just handle it and suddenly as",
    "start": "463400",
    "end": "469479"
  },
  {
    "text": "we're you know using our deploy to tool to kind of uh get things out there we run into like the the ec2 max limit that",
    "start": "469479",
    "end": "476120"
  },
  {
    "text": "that our account had been you know and and you know this is the evening this is like you know 8 or 900",
    "start": "476120",
    "end": "481800"
  },
  {
    "text": "p.m. three years ago Amazon support probably wasn't as uh as robust as it as now and uh like crap we know we simply",
    "start": "481800",
    "end": "488840"
  },
  {
    "text": "cannot spin up some more instances so you know we file a support ticket we're waiting for things to get back to us um",
    "start": "488840",
    "end": "494680"
  },
  {
    "text": "and at that exact same time you know we're also ingesting content from Twitter and Facebook suddenly they start",
    "start": "494680",
    "end": "500879"
  },
  {
    "text": "rate limiting us right we can't we simply can't you know grab as much data as we as we need to to be able to",
    "start": "500879",
    "end": "507479"
  },
  {
    "text": "service our users uh and it ended up being kind of kind of a STI sticky situation right we had we hadn't you",
    "start": "507479",
    "end": "513080"
  },
  {
    "text": "know we planned kind of you know what we could do in an event that you know we got a lot of traffic but we didn't think there some of like the logistics around",
    "start": "513080",
    "end": "519399"
  },
  {
    "text": "the partners that we're working with and the provider that we're working with that that could have really helped that out so we made a call that that night to",
    "start": "519399",
    "end": "526519"
  },
  {
    "text": "just basically say okay we've got to we've got to basically rate limit the amount of users that we're allowing on",
    "start": "526519",
    "end": "532920"
  },
  {
    "text": "the service so one of the other really good things that we did from day one is we built kind of a governor into the",
    "start": "532920",
    "end": "538640"
  },
  {
    "text": "into thec application right so we have a single service on on the server side that basically says continue to allow",
    "start": "538640",
    "end": "545920"
  },
  {
    "text": "this app to work or or or don't let it work you know don't allow new registration so um our our head iOS",
    "start": "545920",
    "end": "552920"
  },
  {
    "text": "engineer built something so that you know you get you get a someone would come to the app and even though we were",
    "start": "552920",
    "end": "558320"
  },
  {
    "text": "like fully launched we wanted people to come in you know we wanted them just to put their email address in and we'd",
    "start": "558320",
    "end": "563440"
  },
  {
    "text": "start like you know slowly letting them in come in first first come first serve by sending them an email and saying you",
    "start": "563440",
    "end": "568839"
  },
  {
    "text": "know ahead and join the service but if we hadn't done that right if if we had just let it let it let it be as as you",
    "start": "568839",
    "end": "575560"
  },
  {
    "text": "know unable to spin up new nodes we couldn't handle the service we couldn't we couldn't hit Facebook and Twitter you",
    "start": "575560",
    "end": "580640"
  },
  {
    "text": "know everybody would have had a really really bad user experience from their first day with Flipboard so you know",
    "start": "580640",
    "end": "586440"
  },
  {
    "text": "having that governor in there and building kind of like your fail safe so that you know if if the server side is",
    "start": "586440",
    "end": "592040"
  },
  {
    "text": "down was was really important for us you know from night one so so like I said you know things that",
    "start": "592040",
    "end": "599360"
  },
  {
    "text": "we should have done you know we we we should have made sure that we could have provisioned the capacity that we needed to it would have been a simple call to",
    "start": "599360",
    "end": "605279"
  },
  {
    "text": "Amazon you know a few days beforehand saying you know we know we we may need to launch a thousand nodes right we may",
    "start": "605279",
    "end": "610959"
  },
  {
    "text": "need to we may need to expand our capacity you know pretty drastically and you know not thinking beforehand was was",
    "start": "610959",
    "end": "616399"
  },
  {
    "text": "a mistake on our part and also making sure that you know your external Partners definitely understand the volumes that you'd be ACC accessing them",
    "start": "616399",
    "end": "623120"
  },
  {
    "text": "should your application actually take off like it should so other L other challenges that we had is you know like",
    "start": "623120",
    "end": "629320"
  },
  {
    "text": "I said before we had one big monolithic application right you know if if one",
    "start": "629320",
    "end": "634600"
  },
  {
    "text": "piece of that was wasn't performing well the entire system you know suffered so",
    "start": "634600",
    "end": "639760"
  },
  {
    "text": "uh it's it's one of the things I'll talk to in about our next thing and we had little to no insight into performance you know like like like I was saying you",
    "start": "639760",
    "end": "645920"
  },
  {
    "text": "know we were watching CPU graphs it's not actually a good representation of what's happening on the end user side right we we actually needed to be",
    "start": "645920",
    "end": "651959"
  },
  {
    "text": "measuring latency looking at looking at the looking at the better results from like the the elb that we were using um",
    "start": "651959",
    "end": "658880"
  },
  {
    "text": "and and we were just beginning to to build out our tooling for ec2 you know even though we wanted to spin up a th notes it wasn't as easy as it should",
    "start": "658880",
    "end": "665279"
  },
  {
    "text": "have been you know even even if even if Amazon had granted us immediately the ability to spin up a thousand notes it",
    "start": "665279",
    "end": "670600"
  },
  {
    "text": "would it would have been a chore on our side and we we still had a lot of manual processes at that point and we had no Central centralized logging you know we",
    "start": "670600",
    "end": "677079"
  },
  {
    "text": "had no way to detect errors you know we were just kind of you know everybody flipping through the app making sure it works but not really understanding what",
    "start": "677079",
    "end": "683399"
  },
  {
    "text": "was happening on the back end so you know that was that was a a pretty quick a pretty quick uh you know",
    "start": "683399",
    "end": "690720"
  },
  {
    "text": "era in the flip war time and we got to we got to one million users pretty quickly I mean thankfully and uh let's",
    "start": "690720",
    "end": "696800"
  },
  {
    "text": "talk about the the next kind of things that we did there so at that point um nothing against",
    "start": "696800",
    "end": "704800"
  },
  {
    "text": "rails or or anything like that we decided to kind of you know fully shift",
    "start": "704800",
    "end": "709839"
  },
  {
    "text": "to Java I think it it was it was more kind of tailored to the to the to the staff that we had in place and and more",
    "start": "709839",
    "end": "715839"
  },
  {
    "text": "kind of geared you know a lot of us had a lot of experience with with the jbm and it was all about you know building",
    "start": "715839",
    "end": "722000"
  },
  {
    "text": "towards what we knew could serve the the capacity that we needed to um and also at that point uh we added on cloudfront",
    "start": "722000",
    "end": "729440"
  },
  {
    "text": "right obviously we have clients from all over the globe I you know everybody's you know everybody had iPads from around",
    "start": "729440",
    "end": "734800"
  },
  {
    "text": "the globe and um we needed to take advantage of of all the different point of presences from s with with cloudfront",
    "start": "734800",
    "end": "741440"
  },
  {
    "text": "to be able to serve up a lot of the content that we that you get in Flipboard right so you know when you're flipping through Flipboard and you're",
    "start": "741440",
    "end": "747000"
  },
  {
    "text": "seeing you know different pictures and stuff like that you know a lot of that's coming from cloudfront so architecture changes uh",
    "start": "747000",
    "end": "754920"
  },
  {
    "text": "not only did we switch to uh Mo mostly like jvm related Services we actually",
    "start": "754920",
    "end": "760240"
  },
  {
    "text": "just broke everything up into microservices right you know this this handles like URL shortening this handles",
    "start": "760240",
    "end": "766680"
  },
  {
    "text": "content processing this actually Services the API you know and we were able to really kind of like U really",
    "start": "766680",
    "end": "774320"
  },
  {
    "text": "build out different different different scale profiles for each of those things so instead of just spin sping up a",
    "start": "774320",
    "end": "779360"
  },
  {
    "text": "thousand you know rails nodes you know we were able to kind of tailor the the the actual uh the machine type and you",
    "start": "779360",
    "end": "787600"
  },
  {
    "text": "know the the scale of it individually obviously we moved all of our image content uh to cloudfront um",
    "start": "787600",
    "end": "796000"
  },
  {
    "text": "and then we moved our primary data store to to mySQL using Amazon's RDS so um you",
    "start": "796000",
    "end": "802519"
  },
  {
    "text": "know all of the information that we need to have that we can't lose that you know",
    "start": "802519",
    "end": "808320"
  },
  {
    "text": "we can't regenerate simply by recrawling the web or you know sifting through this the social signals goes into RDS this is",
    "start": "808320",
    "end": "815560"
  },
  {
    "text": "like you know user account information oh off the information new that that's that's kind of like you know we simply",
    "start": "815560",
    "end": "820839"
  },
  {
    "text": "cannot lose that information and and we're betting on RDS and we still are for that information to uh to to to",
    "start": "820839",
    "end": "826920"
  },
  {
    "text": "persist and you know we began really instrumenting um it's actually a wrong",
    "start": "826920",
    "end": "832000"
  },
  {
    "text": "thing but uh it's it was a a complex system of bash and and local ruik scripts to to be to kind of build out",
    "start": "832000",
    "end": "839519"
  },
  {
    "text": "our uh all of our uh all of our our our tooling around",
    "start": "839519",
    "end": "845519"
  },
  {
    "text": "ec2 and then we started focusing on instrumentation right you know one of the challenges that we had early on is that we didn't have centralized logging",
    "start": "845519",
    "end": "851880"
  },
  {
    "text": "uh we started implementing CIS log NG going to a central log host uh building out metrics I think this is when we",
    "start": "851880",
    "end": "857880"
  },
  {
    "text": "began you know initially using uh graphite and and monitoring followed suits so not just relying on cloudwatch",
    "start": "857880",
    "end": "864320"
  },
  {
    "text": "monitors but actually relying on you know a different system that can you know measure things at a different",
    "start": "864320",
    "end": "869959"
  },
  {
    "text": "level uh so so one of the one of the really interesting things that I actually found that was interesting when",
    "start": "869959",
    "end": "875120"
  },
  {
    "text": "I first joined Flipboard uh so instead of using you know at that at that point",
    "start": "875120",
    "end": "880320"
  },
  {
    "text": "we weren't using puppet but instead of you know heavily investing in in puppet and and um and and using like you puppet",
    "start": "880320",
    "end": "888000"
  },
  {
    "text": "TV or or you know using chef and and all the information they get for for their cmdb the guys actually built out a full",
    "start": "888000",
    "end": "895680"
  },
  {
    "text": "CNB using simple DB so uh just a very simple a simple store that keeps all of",
    "start": "895680",
    "end": "903000"
  },
  {
    "text": "the information about every host that we have within Amazon so I'll take you through some through some of the fields",
    "start": "903000",
    "end": "908480"
  },
  {
    "text": "this was from like a a test open tsdb um implementation that I was doing when I first joined so you know you have the",
    "start": "908480",
    "end": "915160"
  },
  {
    "text": "host and that's basically your your instance ID in Amazon uh the name of the the name of the host um the owner this",
    "start": "915160",
    "end": "922000"
  },
  {
    "text": "this is this is really good for us internally so you know if it's a production system it's probably owned by",
    "start": "922000",
    "end": "927240"
  },
  {
    "text": "Ops right you know we we do have some systems that are owned by Engineers within production but most of the most",
    "start": "927240",
    "end": "932720"
  },
  {
    "text": "of the production systems are owned by Ops but you know these can be owned by developers that way we know like who",
    "start": "932720",
    "end": "937880"
  },
  {
    "text": "owns the system and and who's responsible for it should we you know should we have any problems um the",
    "start": "937880",
    "end": "943759"
  },
  {
    "text": "service right we can we can easily take things we've instrumented a lot of the systems all the all the microservices to",
    "start": "943759",
    "end": "950560"
  },
  {
    "text": "have a flag to either be in service or out of service uh this this act automatically takes nodes out of",
    "start": "950560",
    "end": "956360"
  },
  {
    "text": "monitoring takes them out of ha proxy uh and we build you know those Services regularly to make sure that we're",
    "start": "956360",
    "end": "962319"
  },
  {
    "text": "respecting that flag uh the Ami we want to be able to know the Ami that was initially used to spin this up uh the",
    "start": "962319",
    "end": "969360"
  },
  {
    "text": "type of the type of actual instance that it is uh the location you know um knowing exactly where it's at the and",
    "start": "969360",
    "end": "975800"
  },
  {
    "text": "and then we start getting into a little bit of the uh like kind of like the Flipboard glue so you know we built out",
    "start": "975800",
    "end": "981160"
  },
  {
    "text": "kind of a roll in a subclass mechanism so you know you can have a particular",
    "start": "981160",
    "end": "987000"
  },
  {
    "text": "type of machine or particular type of U of of service and then we have different",
    "start": "987000",
    "end": "993600"
  },
  {
    "text": "like subclasses within that service that do separate thing so it's kind of like our little hierarchy in terms of how we",
    "start": "993600",
    "end": "1000480"
  },
  {
    "text": "organize and then we have groups I I'll get into why groups are important to us later but we map groups to uh we map we",
    "start": "1000480",
    "end": "1009000"
  },
  {
    "text": "we somewhat map groups to actual regions as well but I'll get to that a little bit later and then produ like pools we",
    "start": "1009000",
    "end": "1014759"
  },
  {
    "text": "have production pools we have Dev pools we have you know uh staging pools beta pools and and these kind of uh segregate",
    "start": "1014759",
    "end": "1022000"
  },
  {
    "text": "different services so that we understand which environment that they're in and which they what they should talk to and obviously like public and private IPS",
    "start": "1022000",
    "end": "1028600"
  },
  {
    "text": "right um so some of some of the interesting tooling that we you know we've built around this is that you know",
    "start": "1028600",
    "end": "1034079"
  },
  {
    "text": "we we can a lot all of our tools start with FL that's one thing that I'll talk I'll I'll talk a little bit about we",
    "start": "1034079",
    "end": "1040120"
  },
  {
    "text": "name everything beginning with FL and these are a little bit you know uh a little bit different but basically this is our our Flipboard instance describe",
    "start": "1040120",
    "end": "1047720"
  },
  {
    "text": "script so you're passing it in the the rooll flip the pool production group",
    "start": "1047720",
    "end": "1054480"
  },
  {
    "text": "service or group zero the service that it's in which is in it's in service and then the owner of Ops so basically I",
    "start": "1054480",
    "end": "1061400"
  },
  {
    "text": "want to see everything that has the role flip that's in production that's in group zero that's in service that that's owned by my team and basically we get",
    "start": "1061400",
    "end": "1068880"
  },
  {
    "text": "back this one node and we get all the information about it right there so it's a really kind of powerful thing that I",
    "start": "1068880",
    "end": "1074280"
  },
  {
    "text": "I'll show you a little bit uh of of of how this uh helps us out but like I said before it it Powers our monitoring it",
    "start": "1074280",
    "end": "1080960"
  },
  {
    "text": "Powers ha proxy it basically Powers everything that we do on the operation side at",
    "start": "1080960",
    "end": "1087360"
  },
  {
    "text": "Flipboard so um one of the things that happened I I guess it was about two years ago in November uh like right",
    "start": "1087559",
    "end": "1094440"
  },
  {
    "text": "around this time we launched the iPhone so the iPhone was a huge launch for us",
    "start": "1094440",
    "end": "1101039"
  },
  {
    "text": "right you know we're going from we're going from just simply the iPad you know not like you know the iPad tablet hasn't",
    "start": "1101039",
    "end": "1106559"
  },
  {
    "text": "like proliferated around to everybody but you know two years ago a lot of people were using iPhones um and it was",
    "start": "1106559",
    "end": "1112559"
  },
  {
    "text": "it was it was something that we knew that we'd have to to really kind of uh plan for and scale for but we were also",
    "start": "1112559",
    "end": "1118760"
  },
  {
    "text": "doing two other big things that at that same time we actually um launched our",
    "start": "1118760",
    "end": "1124200"
  },
  {
    "text": "our feature cover stories which is basically a a feed of a magazine of all",
    "start": "1124200",
    "end": "1129520"
  },
  {
    "text": "the other magazines and recommendations for you directly within Flipboard so it",
    "start": "1129520",
    "end": "1135039"
  },
  {
    "text": "was a big kind of new piece of uh new piece of logic that we have with in the application and we Al also launched hbas",
    "start": "1135039",
    "end": "1140960"
  },
  {
    "text": "that night as well which was powering the the cover stories uh magazine so it was a huge night right and uh you know",
    "start": "1140960",
    "end": "1147280"
  },
  {
    "text": "we we looked at everything that could have gone wrong with hbas everything that could have gone wrong with cover stories and you know really kind of made",
    "start": "1147280",
    "end": "1153679"
  },
  {
    "text": "sure that this would be you know a successful launch but as everybody knows here things happen right there's",
    "start": "1153679",
    "end": "1160000"
  },
  {
    "text": "something that you weren't thinking about something that you didn't fully test something will I mean Pro you know",
    "start": "1160000",
    "end": "1165159"
  },
  {
    "text": "probably will go wrong uh and and with us you know same kind of thing happened it was you know in the evening everybody",
    "start": "1165159",
    "end": "1171240"
  },
  {
    "text": "was really excited you know we're going to the iPhone you know everybody's playing with it on their phone you push",
    "start": "1171240",
    "end": "1176360"
  },
  {
    "text": "the button and and it's out there um and suddenly we just start seeing you know all all of our all of our monitors start",
    "start": "1176360",
    "end": "1182320"
  },
  {
    "text": "just blowing up you know metrics are you know flying off the roof and um you know",
    "start": "1182320",
    "end": "1188000"
  },
  {
    "text": "the story that everybody told tells me is that you know it was you know 3:00 in the morning you know we're noticing some",
    "start": "1188000",
    "end": "1193720"
  },
  {
    "text": "significant issues in MySQL right like RDS is just like backed up we don't understand what's going on you know",
    "start": "1193720",
    "end": "1199880"
  },
  {
    "text": "we're we're we're looking at a bunch of different queries and you know we just realize we can't handle the capacity",
    "start": "1199880",
    "end": "1205080"
  },
  {
    "text": "right you know we're using just kind of a simple like master and and read replica at that point um and the really",
    "start": "1205080",
    "end": "1210640"
  },
  {
    "text": "cool thing about this is that you know the guys had to come up with the solution so they built sharding in just a few hours and you know buil building",
    "start": "1210640",
    "end": "1217240"
  },
  {
    "text": "sharding is is is a chore in itself but building like a sharding system and and",
    "start": "1217240",
    "end": "1223080"
  },
  {
    "text": "and not having to worry too much about you know MySQL configuration and and get",
    "start": "1223080",
    "end": "1228360"
  },
  {
    "text": "things right there and leveraging what we could with RDS was was really important for us to be able to to push",
    "start": "1228360",
    "end": "1233440"
  },
  {
    "text": "through that evening the crazy thing though is that charting didn't actually even matter we actually had just one bad",
    "start": "1233440",
    "end": "1238960"
  },
  {
    "text": "query that our CTO at the time noticed and and he's like oh fix the query and then the performance went great again so",
    "start": "1238960",
    "end": "1245440"
  },
  {
    "text": "but I the the the good story is is that you know with with RDS we were actually able to you know build out a charting",
    "start": "1245440",
    "end": "1252159"
  },
  {
    "text": "mechanism that we still use today uh that you know came came about in a very kind of like scary way but you know we",
    "start": "1252159",
    "end": "1259320"
  },
  {
    "text": "we were able to get through it um and and and come up with a a very cool solution that we could scale with through",
    "start": "1259320",
    "end": "1265520"
  },
  {
    "text": "time so uh let's talk about scaling fast from from 10 million to 100 million",
    "start": "1265520",
    "end": "1271240"
  },
  {
    "text": "users uh one of the reasons that we actually you know grew so quickly is",
    "start": "1271240",
    "end": "1276320"
  },
  {
    "text": "because we launched on Android unfortunately I don't have a really good story about Android because that one actually kind of went you know very very",
    "start": "1276320",
    "end": "1282480"
  },
  {
    "text": "smoothly so you know we learned over time and we we got better with um with what we were doing and you know we're",
    "start": "1282480",
    "end": "1288880"
  },
  {
    "text": "we're a few million away from being able to to claim that 100 million user Mark right now which is which is a pretty",
    "start": "1288880",
    "end": "1294080"
  },
  {
    "text": "exciting time at Flipboard so but uh as you can see our stack has drastically changed at this",
    "start": "1294080",
    "end": "1300520"
  },
  {
    "text": "point and it's kind of cut off on the side but uh you know pretty much a lot",
    "start": "1300520",
    "end": "1305799"
  },
  {
    "text": "of jvm Base stack you know we're running had dup running elastic search uh running hbas uh we do Rus for a little",
    "start": "1305799",
    "end": "1313039"
  },
  {
    "text": "bit of uh a little bit of redus um we started integrating puppet you know we we we realized that you know a lot of",
    "start": "1313039",
    "end": "1319880"
  },
  {
    "text": "the things that we were kind of hacking together not only were you know somewhat problematic but at the same time new",
    "start": "1319880",
    "end": "1325000"
  },
  {
    "text": "people coming in you know it was really hard to kind of get up to speed and and try to figure out you know how to take",
    "start": "1325000",
    "end": "1330440"
  },
  {
    "text": "things to the next level uh we used log stash um to to basically you know look",
    "start": "1330440",
    "end": "1335559"
  },
  {
    "text": "at our ha proxy logs look at and and and turn those into metrics we also use it for for you know um like uh counting out",
    "start": "1335559",
    "end": "1343240"
  },
  {
    "text": "errors shipping that information to elastic search that we so we can search through it uh and then we also brought in storm Kafka and uh Cabana as as the",
    "start": "1343240",
    "end": "1351000"
  },
  {
    "text": "elastic search viewer so um in terms of architecture",
    "start": "1351000",
    "end": "1356039"
  },
  {
    "text": "changes you know we we focus pretty heavily on instrument instrumentation so",
    "start": "1356039",
    "end": "1362039"
  },
  {
    "text": "um like like I was saying before uh looking at CPU graphs isn't exactly like the the best thing in the world right",
    "start": "1362039",
    "end": "1368520"
  },
  {
    "text": "you want to understand how all of your services are fitting together the one really cool thing is that we pretty much",
    "start": "1368520",
    "end": "1374000"
  },
  {
    "text": "use ha proxy between every single tier of our service so every sing single you know web service that we provide whether",
    "start": "1374000",
    "end": "1380279"
  },
  {
    "text": "it's external or internally to ourselves is going through ha proxy ha proxy has really really good logs to where you can",
    "start": "1380279",
    "end": "1386840"
  },
  {
    "text": "see the time that it took for an action to complete you can see the amount of retries that it took and that information works really well you know",
    "start": "1386840",
    "end": "1393480"
  },
  {
    "text": "flowing into uh flowing into U into log stash and actually turning into metrics",
    "start": "1393480",
    "end": "1399720"
  },
  {
    "text": "and we actually also have direct to graphite writers from almost every single application in our system so you",
    "start": "1399720",
    "end": "1406080"
  },
  {
    "text": "know we're looking at you know how long did take for an h-based put to take to",
    "start": "1406080",
    "end": "1411600"
  },
  {
    "text": "you know against a particular a particular cluster take right and those are important kind of things when you're",
    "start": "1411600",
    "end": "1417919"
  },
  {
    "text": "actually looking at you know how your service is scaling and and how it's performing uh we started building out",
    "start": "1417919",
    "end": "1423720"
  },
  {
    "text": "our our pipeline of batch processing using Hadoop uh so a lot of the recommendations and and different things",
    "start": "1423720",
    "end": "1428760"
  },
  {
    "text": "that we're powering out there are all using Hadoop uh we started building on our pipe time pipeline of realtime",
    "start": "1428760",
    "end": "1433799"
  },
  {
    "text": "processing uh using storm and and kofka is kind of the delivering system into storm but uh a lot of things like our",
    "start": "1433799",
    "end": "1440400"
  },
  {
    "text": "usage metrics that come from our users and um just general things that we need in a",
    "start": "1440400",
    "end": "1446400"
  },
  {
    "text": "more real-time sense are are flowing through storm and then we also had a keen focus on you know using",
    "start": "1446400",
    "end": "1452000"
  },
  {
    "text": "appropriately sized E2 Ines I can't even tell you how important this is uh you",
    "start": "1452000",
    "end": "1458120"
  },
  {
    "text": "know when when when when you're growing really quickly and and you have to scale out to to kind of um to to to service",
    "start": "1458120",
    "end": "1465240"
  },
  {
    "text": "your to service your users you know you're you're just Hardware at it right you're you're like I need this I need another like thousand nodes to be able",
    "start": "1465240",
    "end": "1472240"
  },
  {
    "text": "to to handle this burst that we're going to have this this next day right but um you you you really kind of need to to",
    "start": "1472240",
    "end": "1479559"
  },
  {
    "text": "take a step back and say you know am I using the appropriately sized instance to to kind of get the best bang for my",
    "start": "1479559",
    "end": "1485520"
  },
  {
    "text": "buck and the best performance for my buck for uh for what we're doing so um",
    "start": "1485520",
    "end": "1491159"
  },
  {
    "text": "one one of the one of the funny things and it kind of ties into uh kind kind of ties into puppet is that you know a lot",
    "start": "1491159",
    "end": "1496880"
  },
  {
    "text": "of our ha proxy instances we were actually running M1 larges on and the reason why we were running M1 larges is",
    "start": "1496880",
    "end": "1502360"
  },
  {
    "text": "because you know puppet's got a thick client right it it it can you know when it when it runs regularly it can it can have a significant impact and we were",
    "start": "1502360",
    "end": "1508760"
  },
  {
    "text": "actually seeing on all of our ha proxy nodes every 30 minutes a brief little Spike that was actually having an end",
    "start": "1508760",
    "end": "1515279"
  },
  {
    "text": "user impact because that brief little Spike was slowing down the systems that basically talk all everything internally",
    "start": "1515279",
    "end": "1521360"
  },
  {
    "text": "and everything externally so actually fixing that up and moving all of those",
    "start": "1521360",
    "end": "1526440"
  },
  {
    "text": "to actually like M1 mediums and M1 Smalls are actually was actually a really good cost-saving thing and and",
    "start": "1526440",
    "end": "1532360"
  },
  {
    "text": "really kind of helped us out to to understand how we scale it and we do that for you know periodically through",
    "start": "1532360",
    "end": "1538039"
  },
  {
    "text": "every single one of our services we we look at it we look at the new instance types that Amazon's released and make",
    "start": "1538039",
    "end": "1544000"
  },
  {
    "text": "sure that we're actually you know utilizing to the best of our abilities at at a certain performance uh at at a",
    "start": "1544000",
    "end": "1550159"
  },
  {
    "text": "certain kind of uh uh us usage scale that we're using the right things and then obviously moving off bash scripts",
    "start": "1550159",
    "end": "1556000"
  },
  {
    "text": "and our Ruby scripts and and and and getting towards puppet um so one one of the one of the really",
    "start": "1556000",
    "end": "1563480"
  },
  {
    "text": "cool things that we do is we do a lot of instrumentation from our actual mobile apps so we have a single endpoint that",
    "start": "1563480",
    "end": "1570080"
  },
  {
    "text": "basically takes in these metrics that the mobile apps actually create and and and pipes them into graphite so you know",
    "start": "1570080",
    "end": "1576880"
  },
  {
    "text": "here you can see this these are this is the iPhone 5 launch time so this is the amount of time that it actually takes",
    "start": "1576880",
    "end": "1582520"
  },
  {
    "text": "for the mobile app to open up on on on an iPhone so it's a really good thing",
    "start": "1582520",
    "end": "1588159"
  },
  {
    "text": "for us to look at because if that first experience of someone clicking on the Flipboard icon from their Flipboard icon",
    "start": "1588159",
    "end": "1596039"
  },
  {
    "text": "and you know suddenly it takes like 30 seconds to load after we've done our new release either on the back end or on the",
    "start": "1596039",
    "end": "1602159"
  },
  {
    "text": "actual client we actually know there's a problem and we instrument a ton of different things throughout the actual",
    "start": "1602159",
    "end": "1607279"
  },
  {
    "text": "app like you know how long it takes for like an actual flip to happen how long it takes to pull up content how long it takes for to get things back down from",
    "start": "1607279",
    "end": "1614080"
  },
  {
    "text": "the CDN so it's actually a really good metric and you can actually see you know we had we had a bit of an incident where",
    "start": "1614080",
    "end": "1620559"
  },
  {
    "text": "you know things for just a short period of time there were jumping to 8 seconds and that actually has a substantial end user effect and you know just that few",
    "start": "1620559",
    "end": "1627399"
  },
  {
    "text": "seconds if that's the first time the users used your app and they're not fully engaged and they don't fully love Flipboard you know that could be a lost",
    "start": "1627399",
    "end": "1633919"
  },
  {
    "text": "user right there and that could be you know at our scale that could be a significant amount of you know new users",
    "start": "1633919",
    "end": "1639200"
  },
  {
    "text": "that are just kind of going away so it's really important not only to instrument what you have on the server side but",
    "start": "1639200",
    "end": "1645480"
  },
  {
    "text": "actually to really instrument what you can do on the client side within within uh within within the operating system",
    "start": "1645480",
    "end": "1651600"
  },
  {
    "text": "that you're working with so let's let's talk a little bit about one one of the reasons that's",
    "start": "1651600",
    "end": "1657799"
  },
  {
    "text": "important and and and why I wanted to show that previous slide is uh what we do in terms of our deploys",
    "start": "1657799",
    "end": "1666640"
  },
  {
    "text": "so one one thing you can do is you can always deploy everything at once right you know you could basically just push",
    "start": "1666640",
    "end": "1672720"
  },
  {
    "text": "your code out there hope for the best not understand what could go wrong um",
    "start": "1672720",
    "end": "1678080"
  },
  {
    "text": "and and and and kind of you know shoot from the hip which is something people do but uh we made a conscious decision",
    "start": "1678080",
    "end": "1683840"
  },
  {
    "text": "early on that anytime we Deploy on the server side we're going to deploy in groups right so our even numbered groups",
    "start": "1683840",
    "end": "1690640"
  },
  {
    "text": "are actually in us east1 our odd numbered groups are in us e1d where we're currently in a couple availability",
    "start": "1690640",
    "end": "1696200"
  },
  {
    "text": "zones so what we do is that we will actually deploy to group zero first",
    "start": "1696200",
    "end": "1702600"
  },
  {
    "text": "right we want to see how the application performs with you know a certain subset of our users hitting it to ensure that",
    "start": "1702600",
    "end": "1708720"
  },
  {
    "text": "it's actually going well right and and we can actually correlate that to like that that you know the the metrics that",
    "start": "1708720",
    "end": "1714559"
  },
  {
    "text": "we get from both the client and the server side so I'll show you how we how we do it from the server side um using",
    "start": "1714559",
    "end": "1720320"
  },
  {
    "text": "cloudwatch metrics is is is really good so what I failed to mentioned early on is that everything pretty much sits",
    "start": "1720320",
    "end": "1725399"
  },
  {
    "text": "behind an elb right uh it's used for SSL termination it's basically what proxies down to all the ha proxies that proxy",
    "start": "1725399",
    "end": "1731720"
  },
  {
    "text": "down to all the other services so uh you can actually get some really great information out of cloudwatch metrics",
    "start": "1731720",
    "end": "1736880"
  },
  {
    "text": "right one one of my my favorite ones is counting the the rate of 500 errors or five 5xx errors as they call it uh and",
    "start": "1736880",
    "end": "1742960"
  },
  {
    "text": "there's also great latency graphs in there so this is actually um a deploy that we did to group zero and you can",
    "start": "1742960",
    "end": "1750440"
  },
  {
    "text": "see kind of um you know the the rate of 500s coming across here and you know it's it's pretty uh pretty pretty even",
    "start": "1750440",
    "end": "1757640"
  },
  {
    "text": "pretty pretty stagnant you know nothing crazy to going on but suddenly we did this deploy and that's the the vert",
    "start": "1757640",
    "end": "1763159"
  },
  {
    "text": "vertical black line that you see there and our 500 just jumped right if we deployed to every single service or",
    "start": "1763159",
    "end": "1769760"
  },
  {
    "text": "across all the groups at that point we would have had a down service right you know there would have been a lot of you know bad there would have been a lot of",
    "start": "1769760",
    "end": "1776240"
  },
  {
    "text": "uh bad experiences on the phone side so you know it's it's it's really",
    "start": "1776240",
    "end": "1782080"
  },
  {
    "text": "important to be able to on your infrastructure side be able to deploy in groups so that you can understand like the ramifications of what you're doing",
    "start": "1782080",
    "end": "1788519"
  },
  {
    "text": "so this is the the next slide on here um this is basically tooing to the the next logical group group one and you can see",
    "start": "1788519",
    "end": "1795720"
  },
  {
    "text": "that you know after after we noticed that that uh after we noticed that blip",
    "start": "1795720",
    "end": "1801120"
  },
  {
    "text": "we know we we make sure and made sure and fixed the issue and then and then continued on with our push so what we do",
    "start": "1801120",
    "end": "1807200"
  },
  {
    "text": "is you know we'll deploy zeros we'll deploy ones and then you know after that after we feel things are pretty good",
    "start": "1807200",
    "end": "1812320"
  },
  {
    "text": "we'll batch deploy through through the rest of them just to ensure that you know we get the release out there",
    "start": "1812320",
    "end": "1817600"
  },
  {
    "text": "quickly uh one one one tool that we use pretty heavily here is is graphite or are a lot of you guys graphite",
    "start": "1817600",
    "end": "1824240"
  },
  {
    "text": "users yeah yeah so um graphite's a a really good tool because you have a a",
    "start": "1824240",
    "end": "1829880"
  },
  {
    "text": "bunch of different um there's a bunch of different producers for graphite right uh We've written some of our own um we",
    "start": "1829880",
    "end": "1836919"
  },
  {
    "text": "do a lot of stuff coming through storm uh we do a lot of stuff coming from log stash directly into statsd that pipes",
    "start": "1836919",
    "end": "1842720"
  },
  {
    "text": "into graphite uh and this is just kind of like our our very simple uh graphite setup that we have at at Flipboard and",
    "start": "1842720",
    "end": "1849480"
  },
  {
    "text": "and basically one one of the key things to scaling it in in AWS is that you've got to use multiple nodes and and and",
    "start": "1849480",
    "end": "1855480"
  },
  {
    "text": "the more discs you can put behind it the better right graphite's a very dis intensive uh dis intensive application",
    "start": "1855480",
    "end": "1861960"
  },
  {
    "text": "and be able to be able to access your metrics and write a lot of metrics is uh is is is pretty important to be able to",
    "start": "1861960",
    "end": "1867720"
  },
  {
    "text": "uh actually understand and quantify what what's going on in terms of your uh your infrastructure",
    "start": "1867720",
    "end": "1874440"
  },
  {
    "text": "so if anybody wants to talk to me about this afterwards feel free but uh you know we use pretty much stock graphite",
    "start": "1874440",
    "end": "1880279"
  },
  {
    "text": "and it's uh it's it's it's done really well for us so we actually consume millions of metrics on on on a per 15sec",
    "start": "1880279",
    "end": "1886880"
  },
  {
    "text": "basis in graphite so these are metrics coming from our servers these are metrics being fed into into graphite",
    "start": "1886880",
    "end": "1892559"
  },
  {
    "text": "from cloudwatch there's actually a really great open source project out there called AWS to graph to to or",
    "start": "1892559",
    "end": "1898039"
  },
  {
    "text": "cloudwatch to graphite that'll basically go to uh you put in your your API secret keys and it'll go out to cloudwatch pull",
    "start": "1898039",
    "end": "1905080"
  },
  {
    "text": "down all your metrics and then pipe them directly into graphite so uh we we love cloudwatch but being able to correlate",
    "start": "1905080",
    "end": "1911279"
  },
  {
    "text": "it with all of the other metrics that we have in our system is is pretty important for us to be able to do you know you know cation Cor coration",
    "start": "1911279",
    "end": "1917519"
  },
  {
    "text": "between what's happening on our stack so we we pull in millions of metrics and and this is kind of the thing that I",
    "start": "1917519",
    "end": "1923840"
  },
  {
    "text": "that I wanted to talk about in terms of a correlating things so this is a this",
    "start": "1923840",
    "end": "1929279"
  },
  {
    "text": "is a d3js using cubism and it's basically each one of these each one of",
    "start": "1929279",
    "end": "1935159"
  },
  {
    "text": "these U horizontal lines is a horizon graph within within D3 and basically it",
    "start": "1935159",
    "end": "1941519"
  },
  {
    "text": "measures the amount of latency between different tiers in our stack and dis",
    "start": "1941519",
    "end": "1947120"
  },
  {
    "text": "plays them as as a as a horizon graph so there's a really cool there's a really cool uh JavaScript plam called cubism",
    "start": "1947120",
    "end": "1953799"
  },
  {
    "text": "that can take a bunch of these Horizon graphs and stack them up against time so that you can see across your stack you",
    "start": "1953799",
    "end": "1960200"
  },
  {
    "text": "know what's exactly performing poorly so you know that that Top Line there is our actual like external elb latency right",
    "start": "1960200",
    "end": "1968000"
  },
  {
    "text": "so this is this is the This is the End user effect of everything that's this is the end effect of everything that's",
    "start": "1968000",
    "end": "1973080"
  },
  {
    "text": "happening within our system and how long those requests are be are taking taken taking when an end user requests them",
    "start": "1973080",
    "end": "1978720"
  },
  {
    "text": "from their actual device and each one of those other pieces are different uh",
    "start": "1978720",
    "end": "1984440"
  },
  {
    "text": "different like web services that we have and then the the darker colors are actual our data stores so you know you",
    "start": "1984440",
    "end": "1990000"
  },
  {
    "text": "can see that you know as as with Horizon graphs the darker the line gets the the",
    "start": "1990000",
    "end": "1995120"
  },
  {
    "text": "worse the service is so you can see the the the vertical line on the right there",
    "start": "1995120",
    "end": "2000399"
  },
  {
    "text": "at at the top it's you know it says 12:33 p.m. so at 12:33 p.m. this was the",
    "start": "2000399",
    "end": "2005840"
  },
  {
    "text": "the millisecond latency across all of those pieces so one of one of the most important things for us you",
    "start": "2005840",
    "end": "2011960"
  },
  {
    "text": "know when you get pag in the middle of the night and you're like you know you know what what piece of my what piece of my environment is actually you",
    "start": "2011960",
    "end": "2018200"
  },
  {
    "text": "know doing poorly and you know you can actually correlate different events you",
    "start": "2018200",
    "end": "2023440"
  },
  {
    "text": "can correlate across your entire stack you know what's actually happening so you know if if that Top Line had simply",
    "start": "2023440",
    "end": "2029919"
  },
  {
    "text": "gone red and I noticed that it correlated to an event that happened near the bottom there I would know to",
    "start": "2029919",
    "end": "2035519"
  },
  {
    "text": "look at that data store and say that's the pro that's the place I need to look in order to affect up the chain of what's exactly happening so you know we",
    "start": "2035519",
    "end": "2042080"
  },
  {
    "text": "we try to organize this in terms of the stack to understand you know what exactly is happening at the top and how that correlates to all the events that",
    "start": "2042080",
    "end": "2048358"
  },
  {
    "text": "are happening on the bottom and we actually do a lot of monitoring uh like via cloudwatch right",
    "start": "2048359",
    "end": "2054118"
  },
  {
    "text": "now uh and we directly send those things into pager Duty so not only do we do we",
    "start": "2054119",
    "end": "2059200"
  },
  {
    "text": "monitor everything through our own monitoring system and then and then have some uh some some metrics off graphite",
    "start": "2059200",
    "end": "2064520"
  },
  {
    "text": "but we actually you know take advantage of of some of the things that we can do with um with uh with with Cloud watch",
    "start": "2064520",
    "end": "2071158"
  },
  {
    "text": "especially with RDS so you know one of the best the best place obviously to get metrics about what's going on with an",
    "start": "2071159",
    "end": "2076358"
  },
  {
    "text": "RDS is directly from graphite so this is something that or some directly from cloudwatch so this is uh our our one of",
    "start": "2076359",
    "end": "2083158"
  },
  {
    "text": "our one one of our database replicas having like high replication lag so that means that we're probably you know very",
    "start": "2083159",
    "end": "2088800"
  },
  {
    "text": "much oversubscribed on on the master piece in terms of Rights because the replica can't keep up so you know that",
    "start": "2088800",
    "end": "2094878"
  },
  {
    "text": "this is a signal you know maybe we need some more poops or um or or or or move this to more of like a move this to more",
    "start": "2094879",
    "end": "2101960"
  },
  {
    "text": "of a uh like a scaled out approach so but yeah it's pretty cool because you can integrate directly into pag your",
    "start": "2101960",
    "end": "2107640"
  },
  {
    "text": "duty just stick an email address in there and it'll send an alert and it'll send the clears and and clear things out",
    "start": "2107640",
    "end": "2113440"
  },
  {
    "text": "properly so some of the some of the kind of grand lessons that we've learned to kind of this point",
    "start": "2113440",
    "end": "2120240"
  },
  {
    "text": "so on on the operation side in in my opinion you never want to do every you",
    "start": "2120240",
    "end": "2126400"
  },
  {
    "text": "never want to kind of build everything that you possibly can like when you're when you're making a bet on Amazon you",
    "start": "2126400",
    "end": "2131960"
  },
  {
    "text": "know it's it's it makes things simpler to actually use their services so you",
    "start": "2131960",
    "end": "2137320"
  },
  {
    "text": "know using RDS using red shift using uh Route 53 for DNS it's uh it's actually",
    "start": "2137320",
    "end": "2142599"
  },
  {
    "text": "saved us a lot of time and a lot of heartache and we can actually focus on building a great application and building something that scales uh using",
    "start": "2142599",
    "end": "2149480"
  },
  {
    "text": "ssds were applicable um our most of our most of our h-based clusters are using ssds most of our elastic search clusters",
    "start": "2149480",
    "end": "2156119"
  },
  {
    "text": "are using ssds s our graphite host for using ssds anything that's like you know significantly uh significantly um heavy",
    "start": "2156119",
    "end": "2164800"
  },
  {
    "text": "on the disio side you got you've got to use ssds because it'll make such a significant difference in terms of your scale I know that they may cost a bit",
    "start": "2164800",
    "end": "2171000"
  },
  {
    "text": "more but it it really does make a huge difference in terms of like the end user experience uh and and then understanding",
    "start": "2171000",
    "end": "2177240"
  },
  {
    "text": "your scale and your needs going forward and investing in in in reserved instances so um pretty much you know the",
    "start": "2177240",
    "end": "2183640"
  },
  {
    "text": "majority of our the majority of our environment had been on demand in es and and and we were paying a significant",
    "start": "2183640",
    "end": "2188720"
  },
  {
    "text": "amount of money to Amazon every month without without really kind of um you know trying to figure out how we could",
    "start": "2188720",
    "end": "2194960"
  },
  {
    "text": "um save a bit of money and and and make better uses of our resources so you know",
    "start": "2194960",
    "end": "2200079"
  },
  {
    "text": "we we we've heavily invested in in reserved instances to to keep our costs lower and uh we've actually really",
    "start": "2200079",
    "end": "2206359"
  },
  {
    "text": "invested in in three years so what we've seen is that you know if you invest in in in the kind of like the three-year",
    "start": "2206359",
    "end": "2211599"
  },
  {
    "text": "time cycle the payback's actually nine months right so you know you're you're not going to you you know the the",
    "start": "2211599",
    "end": "2217359"
  },
  {
    "text": "instances that that that we buy over a three-year cycle for the most part are you know the the paybacks actually 9",
    "start": "2217359",
    "end": "2223240"
  },
  {
    "text": "months and you know it's drastically reduced our service costs but you know you also kind of need to allow for",
    "start": "2223240",
    "end": "2229400"
  },
  {
    "text": "flexibility and you know because your needs are going to change right you know the types of instances that you're going to buy and the the types of U the types",
    "start": "2229400",
    "end": "2236200"
  },
  {
    "text": "of usage that you're going to have could could kind of drastically change over time so you know we keep we keep you know a significant amount of on demand",
    "start": "2236200",
    "end": "2242440"
  },
  {
    "text": "instances out there so that we can you know really really kind of U play with things that we need",
    "start": "2242440",
    "end": "2248040"
  },
  {
    "text": "to uh so here's kind of like a a laundry list of all the Amazon technologies that we use um obviously cloudfront R 53 E2",
    "start": "2248040",
    "end": "2256400"
  },
  {
    "text": "S3 red shift uh we do a lot of our bi and analytics through red shift and it's actually you know going out and building",
    "start": "2256400",
    "end": "2263040"
  },
  {
    "text": "out your whole kind of bi infrastructure is is a really difficult thing and and and and our data Engineers really love",
    "start": "2263040",
    "end": "2269079"
  },
  {
    "text": "red ship and it's it's it's made things really simple on them RDS is our primary data store we use Simple DB for you know",
    "start": "2269079",
    "end": "2275599"
  },
  {
    "text": "um like the the configuration management database that I was showing earlier we heavily use sqs I think you know we're",
    "start": "2275599",
    "end": "2282119"
  },
  {
    "text": "in the hundreds of billions uh hundreds of billions of uh of messages that we",
    "start": "2282119",
    "end": "2288000"
  },
  {
    "text": "push through there on a monthly basis uh it basically handles kind of like how we crawl right like U as as as as we crawl",
    "start": "2288000",
    "end": "2295839"
  },
  {
    "text": "our crawlers are picking up messages off off of sqs and figuring out what to do next um we've started using elasticas a",
    "start": "2295839",
    "end": "2302560"
  },
  {
    "text": "little bit for for redus and uh we like where that's going uh we we use we run a",
    "start": "2302560",
    "end": "2307720"
  },
  {
    "text": "lot of M cach on our own but uh we're really liking what's what's happening with the the elastic cach service and",
    "start": "2307720",
    "end": "2313040"
  },
  {
    "text": "then Cloud watch right this is this is probably one of the most important things in terms of monitoring and kind of understanding understanding uh where",
    "start": "2313040",
    "end": "2319280"
  },
  {
    "text": "your needs are so where do we go from here what happens when we hit 100 million users",
    "start": "2319280",
    "end": "2325160"
  },
  {
    "text": "like what's what's what's beyond that uh a few of the things that we're that we actually really need to do is you know",
    "start": "2325160",
    "end": "2331240"
  },
  {
    "text": "better use Autos scale groups you know we we provision things as we need them we provision things when we know that",
    "start": "2331240",
    "end": "2336560"
  },
  {
    "text": "we're going to need them we're very we're very cyclical with our with with people using Flipboard a lot of the a",
    "start": "2336560",
    "end": "2342280"
  },
  {
    "text": "lot of the a lot of things happen after people get off work you know at the end of the day before they go to bed when",
    "start": "2342280",
    "end": "2348280"
  },
  {
    "text": "they wake up those are like our highest ESS times so we understand that we need to be over-provisioned at those points",
    "start": "2348280",
    "end": "2353400"
  },
  {
    "text": "um and but we don't do it automatically right we we we actually need to really invest in Autos scale groups and and and",
    "start": "2353400",
    "end": "2358800"
  },
  {
    "text": "blend in some spot instances there in there as well so that we can uh better kind of like you know from from kind of",
    "start": "2358800",
    "end": "2365000"
  },
  {
    "text": "a cost perspective understand and um better utilize our resources Predictive Analytics um we get obviously we get a",
    "start": "2365000",
    "end": "2372599"
  },
  {
    "text": "lot of signals right we get a lot of signals from both our users and our and and our metric system in terms of like",
    "start": "2372599",
    "end": "2378680"
  },
  {
    "text": "how how our servers are performing you know I really like uh a lot of the things that like like grock's doing in",
    "start": "2378680",
    "end": "2384400"
  },
  {
    "text": "terms of uh building out um like predictive platforms to understand problems before they actually happen",
    "start": "2384400",
    "end": "2390040"
  },
  {
    "text": "right like as as you start seeing things things seeing things go a little bit wrong or using like Hol winter algorithms against graphite",
    "start": "2390040",
    "end": "2397040"
  },
  {
    "text": "um is is is something that we're going to heavily invested in automated remediation right as as you know that",
    "start": "2397040",
    "end": "2402400"
  },
  {
    "text": "things are about to go down or going to have problems if you if you have a certain run book that you execute every",
    "start": "2402400",
    "end": "2408000"
  },
  {
    "text": "time why would you have a human run it right you should you should invest in actually uh weeding those things",
    "start": "2408000",
    "end": "2413520"
  },
  {
    "text": "automatically and then always you know a heavy heavy focus on making sure we're using the right instance types uh we we",
    "start": "2413520",
    "end": "2420560"
  },
  {
    "text": "we uh we had the privilege of playing with some of the the C3 instances before they came out and we're actually really",
    "start": "2420560",
    "end": "2426560"
  },
  {
    "text": "excited about the workload that those that those things can use to be able to help us out um in the future a lot of",
    "start": "2426560",
    "end": "2432560"
  },
  {
    "text": "our recommendations a lot of our things where we have short amount of like um",
    "start": "2432560",
    "end": "2438119"
  },
  {
    "text": "like transing information that's there for just a little bit that would would really be benefit from using the ssds",
    "start": "2438119",
    "end": "2443800"
  },
  {
    "text": "and in the higher computations it's going to be really important to us and then taking advantage of new AWS",
    "start": "2443800",
    "end": "2449079"
  },
  {
    "text": "products right uh they're they're constantly coming out with new things that uh that that are really beneficial and and we made some choices really",
    "start": "2449079",
    "end": "2455240"
  },
  {
    "text": "early on to to build some of our infrastructure and you know it's it it would have helped us a little bit um to",
    "start": "2455240",
    "end": "2461560"
  },
  {
    "text": "have those things earlier but you know go going back and reinvestigating across the entire stack what we can use better",
    "start": "2461560",
    "end": "2468319"
  },
  {
    "text": "uh and take that load off of our operations team so that we can uh focus on continuing to build things out so the",
    "start": "2468319",
    "end": "2474520"
  },
  {
    "text": "unknown's exciting uh the magazine into the wild but uh we're really excited about you know what we can do to make",
    "start": "2474520",
    "end": "2481400"
  },
  {
    "text": "the the end user experience constantly better how we can low lower that like that launch time that takes how we can",
    "start": "2481400",
    "end": "2487040"
  },
  {
    "text": "lower every single action that happens with the application and it all comes down to really building out metrics and",
    "start": "2487040",
    "end": "2492520"
  },
  {
    "text": "really building out an infrastructure that you can grow with so that's it for now",
    "start": "2492520",
    "end": "2501760"
  },
  {
    "text": "questions",
    "start": "2502280",
    "end": "2505280"
  }
]