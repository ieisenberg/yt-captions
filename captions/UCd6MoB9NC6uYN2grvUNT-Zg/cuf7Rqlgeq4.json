[
  {
    "text": "okay so let's start yeah welcome this is",
    "start": "350",
    "end": "9090"
  },
  {
    "text": "thomas i'm jonathan we're both from the 80 s opsworks team and we're here to",
    "start": "9090",
    "end": "14250"
  },
  {
    "text": "talk a little bit about some more advanced cookbook development and chef",
    "start": "14250",
    "end": "19650"
  },
  {
    "text": "integration and then we want to show you a couple of interesting demos so I have",
    "start": "19650",
    "end": "27029"
  },
  {
    "text": "a little bit of a cold I hope you can understand me alright so what we're going to cover today is we're going to",
    "start": "27029",
    "end": "32099"
  },
  {
    "text": "talk about how we embed chef and ops works quickly as a primer to make sure everybody is up to date on that and then",
    "start": "32099",
    "end": "38940"
  },
  {
    "text": "we will look into some more advanced chef integration features like roles",
    "start": "38940",
    "end": "44239"
  },
  {
    "text": "Burke shelf and so on in order to explain to you how you can leverage community cookbooks to really quickly",
    "start": "44239",
    "end": "52460"
  },
  {
    "text": "bring basically every kind of software on top of ops words and running on ec2",
    "start": "52460",
    "end": "57859"
  },
  {
    "text": "Thomas will then show you how you can do cookbook development with Test Kitchen and debug cookbooks if you in a really",
    "start": "57859",
    "end": "65010"
  },
  {
    "text": "test drive development develop them and then we will talk about some more automation that you can do on top of ops",
    "start": "65010",
    "end": "70229"
  },
  {
    "text": "works with the SDKs so first how does chef work in ops works and what are the",
    "start": "70229",
    "end": "78090"
  },
  {
    "text": "differences to chef server those this is a typical question we get and that's why I want to quickly explain this again so",
    "start": "78090",
    "end": "85310"
  },
  {
    "text": "in opsworks you model things in stacks and layers so you have basically for",
    "start": "85310",
    "end": "90479"
  },
  {
    "text": "every project you usually have a stack and then you have within the stack different layers like yellow pencil Leia",
    "start": "90479",
    "end": "96350"
  },
  {
    "text": "application layer database layer and so on and then for every layer you define",
    "start": "96350",
    "end": "102049"
  },
  {
    "text": "behavior and ops works has like to kind of components that take care of the",
    "start": "102049",
    "end": "107130"
  },
  {
    "text": "actual provisioning on ec2 of this and then of the actual on instance integration for the own instance",
    "start": "107130",
    "end": "112409"
  },
  {
    "text": "integration part and the the provisioning run we use chef so if you",
    "start": "112409",
    "end": "118110"
  },
  {
    "text": "think of it it is there is on the one hand the opsworks back-end that takes care of talking to ec to lb v pc",
    "start": "118110",
    "end": "125680"
  },
  {
    "text": "EBS and II IPS and all of those things so you tell us basically this is how my system should look like this is my model",
    "start": "125680",
    "end": "131860"
  },
  {
    "text": "in terms of I want to have a stack with three layers five instances in the",
    "start": "131860",
    "end": "137020"
  },
  {
    "text": "application server layer of those types with those kind of volumes and so on and the objects back end then integrates",
    "start": "137020",
    "end": "142990"
  },
  {
    "text": "with all those API is to make this happen once you actually want to want to do something on a machine on an instance",
    "start": "142990",
    "end": "149130"
  },
  {
    "text": "we talking to the ops works agent which is a piece of software that is running on your instance and managed by us and",
    "start": "149130",
    "end": "156790"
  },
  {
    "text": "that is doing the actual chef Ron so what we do in the back and we generate the command that is embodied in JSON I",
    "start": "156790",
    "end": "164200"
  },
  {
    "text": "will talk a little bit about this in a moment and then we we send it down to the instance the instances then",
    "start": "164200",
    "end": "169600"
  },
  {
    "text": "executing the actual chef Ron and then it is uploading the log and the status run and send it back to the backend",
    "start": "169600",
    "end": "175959"
  },
  {
    "text": "system so the back end in the UI for example you can now see oh the chef Ron succeed at the deployment worked fine",
    "start": "175959",
    "end": "182650"
  },
  {
    "text": "and this is the output so this is how we integrate if you if you look at it and compared with with a typical chef server",
    "start": "182650",
    "end": "189730"
  },
  {
    "text": "setup then it's slightly different so both of us we use the actual client execution engine sous-chef client in our",
    "start": "189730",
    "end": "195850"
  },
  {
    "text": "case we run in zero mode the big difference is the backend so in chef server usually have chefs over with the",
    "start": "195850",
    "end": "202239"
  },
  {
    "text": "chefs of API is of course a knob source we have our own back up our own back-end that is a highly available highly",
    "start": "202239",
    "end": "208930"
  },
  {
    "text": "reliable system that but it doesn't implement the chefs / AP is right we",
    "start": "208930",
    "end": "214390"
  },
  {
    "text": "generate a JSON we send it down to the machine then we execute at locally that",
    "start": "214390",
    "end": "220750"
  },
  {
    "text": "has a couple of implications and in terms of the integration that we're going to talk about but mostly it mimics",
    "start": "220750",
    "end": "226600"
  },
  {
    "text": "perfectly fine a chef environment for you we provide chef 1110 as the the",
    "start": "226600",
    "end": "233260"
  },
  {
    "text": "latest chef version that we support we also have a couple of older chef versions that you can choose from we",
    "start": "233260",
    "end": "239410"
  },
  {
    "text": "have also a couple of built-in convenience cookbooks for standard layers like if you want to use rails or",
    "start": "239410",
    "end": "245560"
  },
  {
    "text": "PHP or my sequel and so on you can like get going within minutes but you can override and customize all of those and",
    "start": "245560",
    "end": "251049"
  },
  {
    "text": "you can extend them those are really just they're so to get you started quickly the power of objects comes from",
    "start": "251049",
    "end": "256299"
  },
  {
    "text": "the the automation and the customization because and override extend those and we will",
    "start": "256299",
    "end": "261449"
  },
  {
    "text": "see in a second how you can take a community cookbook and make it perfectly running fine on unops works one another",
    "start": "261449",
    "end": "269129"
  },
  {
    "text": "big difference to chef server is the push versus pull model so in a chef server world you typically have your",
    "start": "269129",
    "end": "275370"
  },
  {
    "text": "notes pull every couple of minutes from your chef server to see if there are any changes I should apply wherein opsworks",
    "start": "275370",
    "end": "281069"
  },
  {
    "text": "the back and automatically whenever you change your system or your requested employment we generate this command and",
    "start": "281069",
    "end": "287310"
  },
  {
    "text": "push it down to the machine so within seconds it's being executed and reported back which allows you to too much",
    "start": "287310",
    "end": "292620"
  },
  {
    "text": "cleaner thing to do deployments and other like synchronous actions on top of",
    "start": "292620",
    "end": "298050"
  },
  {
    "text": "that and all of those kind of actions we model its lifecycle events and those lifecycle events are also something that",
    "start": "298050",
    "end": "304440"
  },
  {
    "text": "is special ops works and we will have a look at them now so objects has five",
    "start": "304440",
    "end": "310409"
  },
  {
    "text": "kind of life cycle events and those are the general types of commands we generate we we generate them whenever",
    "start": "310409",
    "end": "317879"
  },
  {
    "text": "something happens and then for all of those you can register your own chef recipes to run so let's look at the first one the first one is called setup",
    "start": "317879",
    "end": "324750"
  },
  {
    "text": "we generated whenever you first provision machine like you you tell us to please boot the machine for me we",
    "start": "324750",
    "end": "331949"
  },
  {
    "text": "provision it on ec2 we booted and installs the agent and then the first thing it does is it executed this command usually you would install your",
    "start": "331949",
    "end": "339900"
  },
  {
    "text": "dependencies and software here like you would install apache and PHP if you have any PHP web server you would install",
    "start": "339900",
    "end": "346380"
  },
  {
    "text": "Tomcat and Java if you have a Java Web so the things you want to do once at the initial bootstrapping then once the",
    "start": "346380",
    "end": "354180"
  },
  {
    "text": "server is done with that there is the the so called configure event and that's very interest in my case in my opinion",
    "start": "354180",
    "end": "360389"
  },
  {
    "text": "like the most important one because that really allows you to do orchestration",
    "start": "360389",
    "end": "365430"
  },
  {
    "text": "and service discovery and head so to speak right so what happens is this fires whenever there is a state change",
    "start": "365430",
    "end": "370889"
  },
  {
    "text": "to your system like you're bringing in a new instance or you're taking one out own instance died and is being replaced so whenever like the the this is my",
    "start": "370889",
    "end": "378240"
  },
  {
    "text": "system this consists of those many servers if that changes either because you explicitly changed it or because all",
    "start": "378240",
    "end": "384449"
  },
  {
    "text": "the healing auto scaling kicked in we generate we fire this to all other machines in the same stack so they can",
    "start": "384449",
    "end": "390630"
  },
  {
    "text": "now respond to that and say okay do I need to respond the state change like a trivial example might be you're booting up a new",
    "start": "390630",
    "end": "396440"
  },
  {
    "text": "application server hey the load balancer should know about this and start serving traffic to this the database server",
    "start": "396440",
    "end": "401990"
  },
  {
    "text": "maybe should add an ACL allowing this application server to connect so usually",
    "start": "401990",
    "end": "407330"
  },
  {
    "text": "you use that to make sure all my confirmations up-to-date like my application server needs to still use the correct database like I discover",
    "start": "407330",
    "end": "413060"
  },
  {
    "text": "within this recipe with in this event I run recipes that make sure my database confirmation files up to date or my the",
    "start": "413060",
    "end": "420410"
  },
  {
    "text": "config file that tells my my web service where is the API of the back and service to use like what is the IP address of",
    "start": "420410",
    "end": "426410"
  },
  {
    "text": "the load balancer for example and in the end you can really discover all the machines within this and that's how you",
    "start": "426410",
    "end": "431900"
  },
  {
    "text": "usually use that and we will look at a couple of examples on how to use chef search together with that in a second",
    "start": "431900",
    "end": "437290"
  },
  {
    "text": "the next event is called the deploy event so that is fired when you explicitly deploy your software where",
    "start": "437290",
    "end": "443570"
  },
  {
    "text": "the UI or API or CLI it's also part of setup because usually as a customer you",
    "start": "443570",
    "end": "448580"
  },
  {
    "text": "want your application server to be up and ready and deployed when it boots so",
    "start": "448580",
    "end": "453590"
  },
  {
    "text": "that's that can sometimes be a little bit confusing so it's included in the set up event and you can of course",
    "start": "453590",
    "end": "459410"
  },
  {
    "text": "customize this to do your own kind of deployment so objects has a couple of standard ways to deploy like pulling",
    "start": "459410",
    "end": "464570"
  },
  {
    "text": "from from git or svn source or taking an artifact from s3 but you can of course",
    "start": "464570",
    "end": "469630"
  },
  {
    "text": "take your own recipe that does an rsync a call or fetches something from ftp",
    "start": "469630",
    "end": "476240"
  },
  {
    "text": "servers or whatever then there is the unemploy event which is probably the one",
    "start": "476240",
    "end": "481400"
  },
  {
    "text": "that people use the least it's it's generated whenever you delete an application and they're running servers",
    "start": "481400",
    "end": "487070"
  },
  {
    "text": "that have this on that so basically you pull it pull it back from the app from the server so imagine you have a handful",
    "start": "487070",
    "end": "494060"
  },
  {
    "text": "of application service you're running a couple of different PHP web web server web apps on it and then you you're",
    "start": "494060",
    "end": "500510"
  },
  {
    "text": "deleting one of them so you wanted to be moved and from all of them yeah usually",
    "start": "500510",
    "end": "505760"
  },
  {
    "text": "usually not not very often used but still if you if you have that use case very usable of course and the last one",
    "start": "505760",
    "end": "511760"
  },
  {
    "text": "is the shutdown event so we fire this whenever you terminate a machine we don't immediately terminate it on ec2 we",
    "start": "511760",
    "end": "519229"
  },
  {
    "text": "actually generate this lifecycle event to the machine and we tell all the others that this machine is no longer part of your system so that machine can",
    "start": "519230",
    "end": "526040"
  },
  {
    "text": "now like do things like flush any file systems before you actually terminate or tell",
    "start": "526040",
    "end": "531880"
  },
  {
    "text": "for example if you have some kind of mesh network tell the other notes that you're no longer available or like make make a CBS snapshot before you actually",
    "start": "531880",
    "end": "539050"
  },
  {
    "text": "terminate and so on so this is a very useful one especially for if you have like stateful servers and then for all",
    "start": "539050",
    "end": "545680"
  },
  {
    "text": "of those events you can actually override them and see what are the built-in cook recipes for every layer so",
    "start": "545680",
    "end": "552850"
  },
  {
    "text": "in this example here we have a custom layer and then you can see what are the built-in recipes for each of each of the",
    "start": "552850",
    "end": "560670"
  },
  {
    "text": "lifecycle events you could register your own so that is what you can use in order to to extend opsworks and the general",
    "start": "560670",
    "end": "567340"
  },
  {
    "text": "idea is that we first run the built-in recipes and then we're running yours in case of the built-in layers the built-in",
    "start": "567340",
    "end": "574570"
  },
  {
    "text": "recipes are doing a lot you can override extend those or you say actually that's too much too much like the built-in",
    "start": "574570",
    "end": "580480"
  },
  {
    "text": "magic for me what you can instead due to just take a custom layer which is basically like a blank layer and apart",
    "start": "580480",
    "end": "588400"
  },
  {
    "text": "from very minimal setup and what we do is then you can only run your recipes and extend it this way so that's like",
    "start": "588400",
    "end": "594580"
  },
  {
    "text": "the primer of how is opsworks using chef now let's look at a couple of more advanced techniques in particular search",
    "start": "594580",
    "end": "602280"
  },
  {
    "text": "roles data bags & Bourke shelf which if you take a community cookbook most most",
    "start": "602280",
    "end": "607480"
  },
  {
    "text": "of them will use this in a way of another so search goes back to this",
    "start": "607480",
    "end": "612940"
  },
  {
    "text": "service discovery idea that i mentioned right like in within my recipe i need to discover other resources a typical use",
    "start": "612940",
    "end": "618700"
  },
  {
    "text": "case again my app server needs to know where my database servers are in this example i'm looking for a node like",
    "start": "618700",
    "end": "624970"
  },
  {
    "text": "that's the the chef's were in that sense for an instance with the particular name",
    "start": "624970",
    "end": "630430"
  },
  {
    "text": "web one where i can use for regular expression like all of the those that start with the name web and then you get",
    "start": "630430",
    "end": "637660"
  },
  {
    "text": "your getting back those nodes and you can use them in the writ and the remaining of the recipe in order to like get their IP address for example so in",
    "start": "637660",
    "end": "643360"
  },
  {
    "text": "the next example here i'm looking for all the notes with the role PHP app",
    "start": "643360",
    "end": "650020"
  },
  {
    "text": "server i get the first one and then i get the IP address in order to for example edit to my to my list of",
    "start": "650020",
    "end": "655480"
  },
  {
    "text": "load-balanced servers we expose within the search everything you would expect of a tip to instance like IP addresses DNS names",
    "start": "655480",
    "end": "662460"
  },
  {
    "text": "the AZ the region like is it in a VPC or not all of those kind of typical things",
    "start": "662460",
    "end": "668250"
  },
  {
    "text": "what you won't find in a search is attributes that are generated within on",
    "start": "668250",
    "end": "674140"
  },
  {
    "text": "other instances because this information is only available in the back and it's jen has pushed down to the instances but the syntax is exactly the chef search",
    "start": "674140",
    "end": "680860"
  },
  {
    "text": "syntax it is actually chef search just an incline mode so that's how officers",
    "start": "680860",
    "end": "686830"
  },
  {
    "text": "integrates that you may have noticed actually that I already mentioned roles so object is met is mapping the layers",
    "start": "686830",
    "end": "694120"
  },
  {
    "text": "to chef rolled so you can if a cookbook is making use of a role you just need to make sure that you have a layer that is",
    "start": "694120",
    "end": "699790"
  },
  {
    "text": "named the same way and then they're just mapped one to one against each other so",
    "start": "699790",
    "end": "704950"
  },
  {
    "text": "in this case we're taking the built-in PHP f layer and it's exposed to chef",
    "start": "704950",
    "end": "710230"
  },
  {
    "text": "search as a role so all your your PHP app servers will come up if you look for",
    "start": "710230",
    "end": "715690"
  },
  {
    "text": "the role PHP app server the the other thing that that people usually use with",
    "start": "715690",
    "end": "722860"
  },
  {
    "text": "cuticle books on general with more advanced cookbooks are data bags so the idea is I have some information and I",
    "start": "722860",
    "end": "729460"
  },
  {
    "text": "don't want to have it stored in my cookbook because probably there are some like credentials in there how do you do",
    "start": "729460",
    "end": "735700"
  },
  {
    "text": "that in opsworks the the clients had a p.i is actually for the chef client is actually just the normal syntax the only",
    "start": "735700",
    "end": "742780"
  },
  {
    "text": "thing you have to do is now how do i expose it to the server because there is no chef server right so what you do is you define some custom json in this",
    "start": "742780",
    "end": "750190"
  },
  {
    "text": "example I have to data bags defined and you put it in the in the custom JSON on the stack or you could actually do it",
    "start": "750190",
    "end": "755740"
  },
  {
    "text": "also on the custom Jason for deployment and then it would be available within the chef Ron so here we have an example",
    "start": "755740",
    "end": "761620"
  },
  {
    "text": "where we're defining a username and a password to access my sequel and we put",
    "start": "761620",
    "end": "766870"
  },
  {
    "text": "it in the custom JSON and then within the recipe I can just use the data bag item API that you that everybody who's",
    "start": "766870",
    "end": "773710"
  },
  {
    "text": "using chef would you should be familiar with and then access the the username and the password of course the question",
    "start": "773710",
    "end": "781360"
  },
  {
    "text": "that probably a lot of you have is how do I use encrypted data backs right so",
    "start": "781360",
    "end": "787240"
  },
  {
    "text": "in chef server there's this feature where you can upload an encrypted data back so you don't store it actually in",
    "start": "787240",
    "end": "792520"
  },
  {
    "text": "clear text with with the sheriff's and because there is no such chef server knobs works with there is not a",
    "start": "792520",
    "end": "798100"
  },
  {
    "text": "one-to-one mapping for that but they're a couple of ways so you basically solve the same problem the first one is you",
    "start": "798100",
    "end": "803740"
  },
  {
    "text": "you have used application environment variables and I will explain this a little bit in a sec the other ternity",
    "start": "803740",
    "end": "810070"
  },
  {
    "text": "vis you basically encrypt your JSON you upload it to s3 and then within the recipe you download it from there and decrypt it and probably the nicest",
    "start": "810070",
    "end": "817630"
  },
  {
    "text": "solution as long as you're just using other edibles resources is to use IM",
    "start": "817630",
    "end": "823360"
  },
  {
    "text": "instance profiles so I am instance profiles allow you actually to totally not manage credentials at all by saying",
    "start": "823360",
    "end": "830320"
  },
  {
    "text": "when I launched an instance I give it a certain associated with a certain IM role that has permissions for example to",
    "start": "830320",
    "end": "836170"
  },
  {
    "text": "access DynamoDB or s3 or SQ s or what have you and then the instances if as",
    "start": "836170",
    "end": "842470"
  },
  {
    "text": "long as you can request the credentials from the hypervisor basically from the metadata service and they being",
    "start": "842470",
    "end": "848620"
  },
  {
    "text": "refreshed and revoked every couple of hours so you actually don't have to to manage any credentials at all what if",
    "start": "848620",
    "end": "856060"
  },
  {
    "text": "you have actually to manage credentials because you're using some third party so we recently launched a feature called",
    "start": "856060",
    "end": "861250"
  },
  {
    "text": "application environment variables the this feature allows you to define arbitrary key value pairs for every",
    "start": "861250",
    "end": "868029"
  },
  {
    "text": "application so in this example we have a payment provider user and we have the payment provider password actually mark",
    "start": "868029",
    "end": "875830"
  },
  {
    "text": "the password is protected that means that it's right only value for the API and you I so I can only write I can",
    "start": "875830",
    "end": "882100"
  },
  {
    "text": "never retrieve it again via the vapi which is fairly useful for like critical",
    "start": "882100",
    "end": "887320"
  },
  {
    "text": "things like passwords or any credentials and then they're exposed as environment where I bolts for the application so in",
    "start": "887320",
    "end": "894430"
  },
  {
    "text": "this in this snippet I have a ruby application but the same holds true for all application types we support and",
    "start": "894430",
    "end": "899680"
  },
  {
    "text": "within the custom recipes you could also access this to of course and it's",
    "start": "899680",
    "end": "905110"
  },
  {
    "text": "exposes environment variables so I access the environment hash here to get",
    "start": "905110",
    "end": "910300"
  },
  {
    "text": "the payment provide a user and the payment provide a password and then I can like pass this to my to my payment wait gateway class and they scan can use",
    "start": "910300",
    "end": "917560"
  },
  {
    "text": "this to make authentic a to request to my payment gateway for example another",
    "start": "917560",
    "end": "923530"
  },
  {
    "text": "important integration with chef is Berk shelf also supports Burke shelf if you like",
    "start": "923530",
    "end": "929029"
  },
  {
    "text": "tick a certain setting on your stack you basically say I want to manage have back shelf be managed by objects which means",
    "start": "929029",
    "end": "934279"
  },
  {
    "text": "if you have a Berks file in your custom cookbooks officeworks will will like",
    "start": "934279",
    "end": "939500"
  },
  {
    "text": "recognize that and then do a bookshelf run before it does the actual chef Ron we support basically any any chef any",
    "start": "939500",
    "end": "946100"
  },
  {
    "text": "books Berkshire version there is because you can free from like the finite we",
    "start": "946100",
    "end": "953120"
  },
  {
    "text": "ship a couple of precompiled versions just to make the installation faster so we have like pre-compiled versions for the latest stable versions of Berk shelf",
    "start": "953120",
    "end": "959649"
  },
  {
    "text": "but you can use any version what will happen is that once we check out your",
    "start": "959649",
    "end": "965839"
  },
  {
    "text": "book repository we recognize there's the books while we run work shelf so all the dependencies will be will be pulled down",
    "start": "965839",
    "end": "971480"
  },
  {
    "text": "and then we will do the actual chef Ron so a Berks burkesville has like a config",
    "start": "971480",
    "end": "977660"
  },
  {
    "text": "file or like a source file that defines what I dependencies especially for using community cookbooks this allows you to",
    "start": "977660",
    "end": "983269"
  },
  {
    "text": "like not deal with all the their dependencies and the dependencies of your dependencies and so on and and make",
    "start": "983269",
    "end": "988670"
  },
  {
    "text": "sure you you're pinning the versions of what you use this is a little bit more",
    "start": "988670",
    "end": "993949"
  },
  {
    "text": "complicated example where I first define the API to use probably for the majority of you you want to use the official",
    "start": "993949",
    "end": "999889"
  },
  {
    "text": "bookshelf API but in theory you could use your own private internal API endpoints that are only available within",
    "start": "999889",
    "end": "1005500"
  },
  {
    "text": "your VPC for example and then I'm finding I want to use the apt cookbook I want to use some cookbooks and a",
    "start": "1005500",
    "end": "1012040"
  },
  {
    "text": "specific version or specific a git branch or specific tag and so on so bookshelf lets you really pin down the",
    "start": "1012040",
    "end": "1018730"
  },
  {
    "text": "dependencies and the cool thing is it will download them and then download the dependencies of your dependencies and so on so so you basically just say oh",
    "start": "1018730",
    "end": "1024610"
  },
  {
    "text": "somebody already wrote a cookbook for that particular problem I want to use it in that version and make that use so",
    "start": "1024610",
    "end": "1032650"
  },
  {
    "text": "let's do exactly that let's go to the chef community site called supermarket let's look for Jenkins Jenkins is an",
    "start": "1032650",
    "end": "1039640"
  },
  {
    "text": "open source CI server and if you look closely they have the instructions on",
    "start": "1039640",
    "end": "1045520"
  },
  {
    "text": "how to use that with Burke shelf it's probably hard to read for you for you on the back but what it basically says is",
    "start": "1045520",
    "end": "1051190"
  },
  {
    "text": "put this on your Burke's file and then you can actually already have the",
    "start": "1051190",
    "end": "1056799"
  },
  {
    "text": "cookbooks available and make use of them so what do I need to do if you want to use Jenkins with opsworks the first thing is",
    "start": "1056799",
    "end": "1064240"
  },
  {
    "text": "you need to create a custom cookbook repository where you put this file in the other thing is you need to create a",
    "start": "1064240",
    "end": "1070450"
  },
  {
    "text": "custom layer in this case i called it Jenkins master and then you need to define what should it do right and what",
    "start": "1070450",
    "end": "1077860"
  },
  {
    "text": "you do is it should run the Jenkins master recipe so this recipe is within the the Jenkins cookbook that I pulled",
    "start": "1077860",
    "end": "1083410"
  },
  {
    "text": "down so the guys who wrote the Jenkins cookbook they defined the recipe is",
    "start": "1083410",
    "end": "1088420"
  },
  {
    "text": "called master and so I add this to the setup lifecycle event of this layer two mates to say whenever I boot the machine",
    "start": "1088420",
    "end": "1095550"
  },
  {
    "text": "in this layer please run this recipe and this recipe happens to install Jenkins in master mode for me and we will see in",
    "start": "1095550",
    "end": "1104620"
  },
  {
    "text": "a couple later on of how this actually works and we'll look at a couple of real life running Jenkins servers before we",
    "start": "1104620",
    "end": "1111400"
  },
  {
    "text": "do this I will hand over to Thomas and Thomas will share you okay now that we use a community cookbooks how will do we",
    "start": "1111400",
    "end": "1116650"
  },
  {
    "text": "pick it up from here and develop our own cookbooks and debug a cookbook if there are any issues thank you very much so hi",
    "start": "1116650",
    "end": "1124840"
  },
  {
    "text": "I'm Thomas and I will talk about the cookbook development part so as Johnson",
    "start": "1124840",
    "end": "1130720"
  },
  {
    "text": "said like you know we build up on the Jenkins communicable and what we actually find out this is not enough",
    "start": "1130720",
    "end": "1135929"
  },
  {
    "text": "because that community cookbook hard codes Jenkins to be running on port 8080",
    "start": "1135929",
    "end": "1141700"
  },
  {
    "text": "and let's assume you're on a conference and you actually want to have access to your Jenkins server and you're not",
    "start": "1141700",
    "end": "1147190"
  },
  {
    "text": "really sure if that port is open on a conference wireless web so you want to have some some boxing forum and that's",
    "start": "1147190",
    "end": "1155080"
  },
  {
    "text": "what we're going to do so usually if you develop a cookbook in opsworks you probably start having something already",
    "start": "1155080",
    "end": "1161800"
  },
  {
    "text": "or you start from scratch and you implement some basic version or a change of that you push a change to as three or",
    "start": "1161800",
    "end": "1168580"
  },
  {
    "text": "whatever kind of you pull your cookbook form in opsworks and then you either stop an instance if it already was",
    "start": "1168580",
    "end": "1174550"
  },
  {
    "text": "running and not working for some reason and you start a new instance and that instant setup is done you go for the",
    "start": "1174550",
    "end": "1180610"
  },
  {
    "text": "logs and check whether it's finally doing what you want the problem is that that workflow is not very very fast",
    "start": "1180610",
    "end": "1187809"
  },
  {
    "text": "right it takes a couple of minutes to go through that workflow one that can be really tedious especially if you make as many",
    "start": "1187809",
    "end": "1192860"
  },
  {
    "text": "I process I do so you don't want to do that you can be a teeny tiny bit faster",
    "start": "1192860",
    "end": "1198380"
  },
  {
    "text": "if you don't stop instances and start instances again but you actually have call the update cookbooks hook we have",
    "start": "1198380",
    "end": "1205309"
  },
  {
    "text": "an ops works so this just triggers an event on the machines that is not part",
    "start": "1205309",
    "end": "1210950"
  },
  {
    "text": "of the standard lifecycle events so you can outside of the lifecycle events to get any other kind of events or subset",
    "start": "1210950",
    "end": "1217250"
  },
  {
    "text": "or run any any subset of recipes on any subset of instances so you would just",
    "start": "1217250",
    "end": "1222710"
  },
  {
    "text": "kind of up do the update cookbooks on your machine and then we trigger an special event or trigger a special one",
    "start": "1222710",
    "end": "1230960"
  },
  {
    "text": "list so that makes your process a little faster but in the end it's not like kind of is not snappy right so for that",
    "start": "1230960",
    "end": "1237620"
  },
  {
    "text": "reason there's two workflows most people use one is developed directly on that",
    "start": "1237620",
    "end": "1245000"
  },
  {
    "text": "instance and the other one which is a lot better even using Test Kitchen I will explain so how to develop on the",
    "start": "1245000",
    "end": "1253520"
  },
  {
    "text": "instance you log into the instance you ssh to your machine and what you have there is if you're rude you have access",
    "start": "1253520",
    "end": "1259130"
  },
  {
    "text": "to the objects agency Li which is a little web around our agent that allows",
    "start": "1259130",
    "end": "1264710"
  },
  {
    "text": "you to one specific commands on the machines and one command would be listing the last events that very",
    "start": "1264710",
    "end": "1271970"
  },
  {
    "text": "trigger on the machines so if I would put in objects agency Li list it would retrieve me the latest events that are",
    "start": "1271970",
    "end": "1278780"
  },
  {
    "text": "f1 on the machine and you see the time stone when they have ruined one and what kind of event that was so you see like",
    "start": "1278780",
    "end": "1284900"
  },
  {
    "text": "kind of standard lifecycle events like set up configure execute recipes is like kind of one out of like kind of out of",
    "start": "1284900",
    "end": "1291410"
  },
  {
    "text": "the life cycle so like one specific action you have triggered on the machines deploy and three config events",
    "start": "1291410",
    "end": "1297049"
  },
  {
    "text": "after that so you probably like kind of dig into one of the events because you found out that kind of your configures not really working and what you can do",
    "start": "1297049",
    "end": "1304160"
  },
  {
    "text": "then is you can also use the client or the objects agency lie to get the jason",
    "start": "1304160",
    "end": "1310910"
  },
  {
    "text": "that was the input to that lifecycle event so you can figure out what was the input because probably that input should",
    "start": "1310910",
    "end": "1317900"
  },
  {
    "text": "have been handled different or something so we can figure out what happened on the machine and then you would actually",
    "start": "1317900",
    "end": "1323270"
  },
  {
    "text": "go and do the dirty work and you would change into opt anywhere objects current which is the folder of",
    "start": "1323270",
    "end": "1328789"
  },
  {
    "text": "the current agent version that is running on your machine and inside you have a couple of full days and the",
    "start": "1328789",
    "end": "1335630"
  },
  {
    "text": "interesting one for you is the site minus cookbooks because this is the one the place where we put your cookbooks",
    "start": "1335630",
    "end": "1342140"
  },
  {
    "text": "you specify an OPS works so you would change into that folder and do a change there and after you have done that",
    "start": "1342140",
    "end": "1348770"
  },
  {
    "text": "change you would use the CLI again to rerun for instance a setup or you would",
    "start": "1348770",
    "end": "1354679"
  },
  {
    "text": "rerun a specific time stem of an event and what you would see immediately on the machine is and that's a nice part so",
    "start": "1354679",
    "end": "1360590"
  },
  {
    "text": "you don't have to wait for locks to be uploaded and all of that you would immediately see the agent working and taking that Jason input from that",
    "start": "1360590",
    "end": "1368210"
  },
  {
    "text": "specific time stem and we want the recipe and so you could figure out whether it like kind of if your type was",
    "start": "1368210",
    "end": "1373490"
  },
  {
    "text": "going off that actually suffix or your change really works so as a recap you",
    "start": "1373490",
    "end": "1379159"
  },
  {
    "text": "just need to find the specific specific location so opt a dress up so X current side cookbooks there's where your stuff",
    "start": "1379159",
    "end": "1385280"
  },
  {
    "text": "is and then you do the more VI or whatever you like to change your stuff",
    "start": "1385280",
    "end": "1391580"
  },
  {
    "text": "on the machine you would rerun the event and if you're using it actually and not",
    "start": "1391580",
    "end": "1396710"
  },
  {
    "text": "as three four instances you also on that machine actually could get to git commit and get pushed and update your cookbooks",
    "start": "1396710",
    "end": "1403030"
  },
  {
    "text": "the thing is all of that is really really fast and nice the problem is it's not really how you develop eight it's",
    "start": "1403030",
    "end": "1409970"
  },
  {
    "text": "like kind of its really Hecky on the machines and all of this so I don't know you probably happen in a couple of talks",
    "start": "1409970",
    "end": "1416090"
  },
  {
    "text": "or have heard that before infrastructure as code right so I think we can agree on that is true and this is what you should",
    "start": "1416090",
    "end": "1422210"
  },
  {
    "text": "do but every Co divide for application or your developers white replication is",
    "start": "1422210",
    "end": "1427520"
  },
  {
    "text": "like it has tests and so you also should test your infrastructure and for such as",
    "start": "1427520",
    "end": "1433159"
  },
  {
    "text": "co great makes all sense to test your infrastructure about how I pic test kitchen for that demo there's obviously",
    "start": "1433159",
    "end": "1439370"
  },
  {
    "text": "other tools are there test kitchen itself is a test honest tool that helps you execute your code on multiple",
    "start": "1439370",
    "end": "1446809"
  },
  {
    "text": "different platforms in isolation and always on a pristine environment and because of that the workflow for Test",
    "start": "1446809",
    "end": "1453860"
  },
  {
    "text": "Kitchen looks like that so it starts by destroying everything you have right so that you don't have anything that is",
    "start": "1453860",
    "end": "1459049"
  },
  {
    "text": "somehow weird and changes like the behavior based on pre-existing configuration or something",
    "start": "1459049",
    "end": "1465440"
  },
  {
    "text": "it's a good thing to destroy everything info then it creates that that",
    "start": "1465440",
    "end": "1471650"
  },
  {
    "text": "environment you actually run in your tests against you don't have to run that against ec2 instances we can also in",
    "start": "1471650",
    "end": "1477500"
  },
  {
    "text": "that against docker or vagrant or different other environments then",
    "start": "1477500",
    "end": "1485150"
  },
  {
    "text": "there's a converged step in as the next step in the workflow which basically does the chevron for you then there's a",
    "start": "1485150",
    "end": "1492320"
  },
  {
    "text": "setup you step in that workflow that's not to be confused with the object set up it only sets up the test environment",
    "start": "1492320",
    "end": "1499220"
  },
  {
    "text": "in Test Kitchen and then there's the actual test that you want so very late and all that and that's a very fry step",
    "start": "1499220",
    "end": "1506150"
  },
  {
    "text": "and after test if one at Test Kitchen destroys all your machines again that's",
    "start": "1506150",
    "end": "1512030"
  },
  {
    "text": "a standard workflow so how do you configure Test Kitchen it's really easy",
    "start": "1512030",
    "end": "1517190"
  },
  {
    "text": "you have llamo file you put in your cookbook and then you select the driver asset there's multiple drivers you can",
    "start": "1517190",
    "end": "1525530"
  },
  {
    "text": "use you can run that against dr. I said and plainly see two and so on and so on and there's also different provision is",
    "start": "1525530",
    "end": "1530570"
  },
  {
    "text": "like from my demo and the very early draft we are doing on the Test Kitchen",
    "start": "1530570",
    "end": "1536450"
  },
  {
    "text": "apso Explorer we hopefully release you I actually take the provision of shell not a chef you might be a little bit",
    "start": "1536450",
    "end": "1543860"
  },
  {
    "text": "surprised about that but I will tell you in a second why and how and then I have to configure buzzer buzzer is basically",
    "start": "1543860",
    "end": "1550540"
  },
  {
    "text": "the framework around different different",
    "start": "1550540",
    "end": "1555590"
  },
  {
    "text": "test frameworks again so that's nothing you have to remember or know but",
    "start": "1555590",
    "end": "1560750"
  },
  {
    "text": "basically there's diff assess kitchen you can run different test frameworks i will use bets that you can also do",
    "start": "1560750",
    "end": "1567610"
  },
  {
    "text": "service back in any other test framework and now we come to the interesting part",
    "start": "1567610",
    "end": "1573620"
  },
  {
    "text": "you specify which platforms again against the test should one so you can have multiple platforms in years so i",
    "start": "1573620",
    "end": "1581090"
  },
  {
    "text": "want to have my my test of my cookbook one against Emma's on Linux against the",
    "start": "1581090",
    "end": "1587360"
  },
  {
    "text": "older bunt in the new ubuntu to make sure that this is for my company works across all the operating systems my comp",
    "start": "1587360",
    "end": "1593940"
  },
  {
    "text": "supporting and then you define the sweets and you give the suite of Maine in that case really brilliant default",
    "start": "1593940",
    "end": "1600450"
  },
  {
    "text": "right and you provide the one list which you want to test and what Test Kitchen",
    "start": "1600450",
    "end": "1607440"
  },
  {
    "text": "now is doing it is multiplying all the different combination of sweets I have one here and it will multiply with all",
    "start": "1607440",
    "end": "1613320"
  },
  {
    "text": "the different platforms you have provided so how do we actually start",
    "start": "1613320",
    "end": "1619200"
  },
  {
    "text": "that you would go to your command line in your cookbook and you say that can have kitchen tests on your machine and",
    "start": "1619200",
    "end": "1624470"
  },
  {
    "text": "it will go through the whole life cycle so destroying whatever you have creating new machines converging setting up one",
    "start": "1624470",
    "end": "1632490"
  },
  {
    "text": "your test and destroy again as this then is again as long as the life cycle I've",
    "start": "1632490",
    "end": "1637740"
  },
  {
    "text": "showed you before you probably don't use that workflow and called kitchen test you probably call kitchen converter set",
    "start": "1637740",
    "end": "1645210"
  },
  {
    "text": "up whatever to get kitchen as far as this so you have won your books on the",
    "start": "1645210",
    "end": "1650909"
  },
  {
    "text": "machines and then you void your test or change the test and only call kitchen verify and the cool thing is about",
    "start": "1650909",
    "end": "1656820"
  },
  {
    "text": "anything you one there or call there it's supportive access so you can say I want a one kitchen verify ubuntu and it",
    "start": "1656820",
    "end": "1665009"
  },
  {
    "text": "only would run the platforms ubuntu but not amazon linux or you can say kitchen",
    "start": "1665009",
    "end": "1670379"
  },
  {
    "text": "verify client and it brought only one the test suites that have client as part of their name and even better you have",
    "start": "1670379",
    "end": "1679259"
  },
  {
    "text": "the minus c flag which stands for concurrency and you can say how many tests should be one concurrent so if you",
    "start": "1679259",
    "end": "1686429"
  },
  {
    "text": "want that again segment on your local machine you probably don't want it like on that against fifty different machines",
    "start": "1686429",
    "end": "1692039"
  },
  {
    "text": "at the same time because you let that will explode but the cool thing is that there's the clone and we see objects where you can actually run all the tests",
    "start": "1692039",
    "end": "1697500"
  },
  {
    "text": "at once so where does the extra tests kill so if that is roughly your cookbook",
    "start": "1697500",
    "end": "1704190"
  },
  {
    "text": "why'd you have attributes your recipes you have templates on all of that so you would create a new folder their test and a subfolder integration which is",
    "start": "1704190",
    "end": "1711450"
  },
  {
    "text": "expected by Test Kitchen and then you would have the kitchen Yama fire I showed you earlier and the kitchen",
    "start": "1711450",
    "end": "1719399"
  },
  {
    "text": "kitchen would then look up in that test integration full there for full layers",
    "start": "1719399",
    "end": "1724529"
  },
  {
    "text": "that equal the sweet name you are defined in the yellow file so that case default and again there's",
    "start": "1724529",
    "end": "1731580"
  },
  {
    "text": "another folder that then defines which kind of test and why a mensch one so in that case i said i will use bets that's",
    "start": "1731580",
    "end": "1739110"
  },
  {
    "text": "a testing framework for bash it's really simple and you can verify that unix pro programs behave as expected and inside",
    "start": "1739110",
    "end": "1747270"
  },
  {
    "text": "that one so finally there's where your test gifts so there i have a test file that just checks where the h top is",
    "start": "1747270",
    "end": "1753450"
  },
  {
    "text": "installed on all my machines because i really don't want to use top and i don't",
    "start": "1753450",
    "end": "1759090"
  },
  {
    "text": "know i need that so how does the extra tests look like it's really really simple you give it a name and for that",
    "start": "1759090",
    "end": "1766020"
  },
  {
    "text": "one it's probably enough to just call which edge top and you expect that the exit code is equal to zero because then",
    "start": "1766020",
    "end": "1773640"
  },
  {
    "text": "you know it's there so let's switch to the demo and it's so easy I just need to",
    "start": "1773640",
    "end": "1783450"
  },
  {
    "text": "press the right button and okay you can see here the object interface I have two stacks defined and I have created once",
    "start": "1783450",
    "end": "1791580"
  },
  {
    "text": "tag that is called test kitchen demo and it has a specific stack ID and if I now",
    "start": "1791580",
    "end": "1797160"
  },
  {
    "text": "switch to my sublime text takes this is the kitchen Yama fire i'm using so i'm",
    "start": "1797160",
    "end": "1803970"
  },
  {
    "text": "using the objects driver i'm using the same stack idea you have seen just right now I have the provision of shell these",
    "start": "1803970",
    "end": "1809910"
  },
  {
    "text": "platforms and what I'm trying to do is a set the Jenkins community cookbook is",
    "start": "1809910",
    "end": "1816240"
  },
  {
    "text": "putting Jenkins or is running Jenkins on port 8080 so what I'm trying to do is have a proxy info on base like an affine",
    "start": "1816240",
    "end": "1823710"
  },
  {
    "text": "and Xbox you informed so I wrote that really tiny recipe here and what I want",
    "start": "1823710",
    "end": "1830010"
  },
  {
    "text": "to do now is write the test for that you could argue I should have written the test before but I don't know what is",
    "start": "1830010",
    "end": "1835530"
  },
  {
    "text": "enough in that case so how would these tests look like so i have a test fool",
    "start": "1835530",
    "end": "1840930"
  },
  {
    "text": "that the integration folder jenkins helper because that's how my speed is called right inside i have bets and",
    "start": "1840930",
    "end": "1847400"
  },
  {
    "text": "there's the actual jenkins test so that one is really simple again it will check whether the jenkins status is",
    "start": "1847400",
    "end": "1854799"
  },
  {
    "text": "providing x equals zero and also if the output of the command is something with",
    "start": "1854799",
    "end": "1859849"
  },
  {
    "text": "Jenkins running it looks a little quirky here as the output via Slee is different",
    "start": "1859849",
    "end": "1865429"
  },
  {
    "text": "on the different linux is because that's why we have different Linux is so that stuff is a little different and then the",
    "start": "1865429",
    "end": "1872899"
  },
  {
    "text": "other test would be the actual test whether the proxy is working so because that's what I want to know right and I",
    "start": "1872899",
    "end": "1880099"
  },
  {
    "text": "will check for the HP status code so i curl against localhost and i will check whether areas a 200 and as it could be",
    "start": "1880099",
    "end": "1888139"
  },
  {
    "text": "any thing providing the 200 i'm also checking for whether the Jenkins tag",
    "start": "1888139",
    "end": "1893269"
  },
  {
    "text": "appears with the white version I expect to be there so that's all I have to avoid as code to have that being just",
    "start": "1893269",
    "end": "1901129"
  },
  {
    "text": "written at driven so if i call now kitchen verify as the machines are already vain i just can call that",
    "start": "1901129",
    "end": "1907609"
  },
  {
    "text": "concurrent and you can see it is running that test against different bond tues",
    "start": "1907609",
    "end": "1914449"
  },
  {
    "text": "and the amazon milks instance I have so going back to the stack that's the three",
    "start": "1914449",
    "end": "1922159"
  },
  {
    "text": "instances i have read and it is running the test and you see it tested and so",
    "start": "1922159",
    "end": "1927589"
  },
  {
    "text": "what he's doing it's a little like kind of collects persia now because it's running confirm but as you can see like",
    "start": "1927589",
    "end": "1934129"
  },
  {
    "text": "kind of all the tests are green everything is working so my cookbooks work i can prove you that this is also",
    "start": "1934129",
    "end": "1940849"
  },
  {
    "text": "kind of my cookbooks would be broken so i logged into one of the of the Amazon minute one of these right and i have UTC",
    "start": "1940849",
    "end": "1950059"
  },
  {
    "text": "in it d jenkins status so that guy's",
    "start": "1950059",
    "end": "1955429"
  },
  {
    "text": "running so that was what i was checking for way and I can also do stop and kill",
    "start": "1955429",
    "end": "1961549"
  },
  {
    "text": "a guy and if I go now back and say like I let's see if my cookbooks are working obviously I messed not busy cookbooks",
    "start": "1961549",
    "end": "1967039"
  },
  {
    "text": "but on the machine versus status you should see the Amazon looks one failing",
    "start": "1967039",
    "end": "1973629"
  },
  {
    "text": "so he's now uploading the new version of the test in the case there was a change",
    "start": "1973629",
    "end": "1979129"
  },
  {
    "text": "so removing the test running the test and you see boom so that test was",
    "start": "1979129",
    "end": "1984679"
  },
  {
    "text": "failing so something what was my cookbook should be broken off in that case I just messed this machine",
    "start": "1984679",
    "end": "1990909"
  },
  {
    "text": "ok that's it's a farm and I'm switching back to slides and hand over to Johnson",
    "start": "1990909",
    "end": "1999409"
  },
  {
    "text": "again ok thank you so Thomas showed us",
    "start": "1999409",
    "end": "2004450"
  },
  {
    "text": "how we can develop cookbooks debug them and have a little bit faster dev test cycle what are other things that you can",
    "start": "2004450",
    "end": "2011890"
  },
  {
    "text": "do with Oxford are to really like like speed up your your development process so how can you automate opsworks so",
    "start": "2011890",
    "end": "2019269"
  },
  {
    "text": "absurd actually is very easy to automate because everything that you see in the in the UI is exposed by an API so the UI",
    "start": "2019269",
    "end": "2026200"
  },
  {
    "text": "is actually just an API client that means you can take the CLI of the SDKs and just automate everything you know",
    "start": "2026200",
    "end": "2034000"
  },
  {
    "text": "every workflow you see in the UI so a typical example that that people are",
    "start": "2034000",
    "end": "2040179"
  },
  {
    "text": "setting up would be something like that right like a deployment pipeline and continuous deployment system so imagine",
    "start": "2040179",
    "end": "2046299"
  },
  {
    "text": "you're using a github or any other provider to host your source code and what you want to do is whenever I commit",
    "start": "2046299",
    "end": "2051790"
  },
  {
    "text": "I want a CI server in my example it's going to be Jenkins because we have the the cookbooks nicely set up for that",
    "start": "2051790",
    "end": "2057970"
  },
  {
    "text": "take the code run my tests and if the tests are green deploy to ops works and opsworks then takes my code and push the",
    "start": "2057970",
    "end": "2064270"
  },
  {
    "text": "down to the ec2 instance so how would you do that with officers the ingredients are actually all there right",
    "start": "2064270",
    "end": "2069790"
  },
  {
    "text": "so what I need is I need this step from Jenkins telling opsworks please deploy",
    "start": "2069790",
    "end": "2074980"
  },
  {
    "text": "my code so what I need is a small snippet for this example we chose the",
    "start": "2074980",
    "end": "2082330"
  },
  {
    "text": "the Ruby SDK but obviously every other of the SDKs will work fine too we removed a little bit of the code but I",
    "start": "2082330",
    "end": "2088960"
  },
  {
    "text": "will show you in a second the actual code and the Machine it's not a lot more than this right what we're doing here is we it's part of the it's being put in",
    "start": "2088960",
    "end": "2096490"
  },
  {
    "text": "the machine as part of the of the ship of the chef's initial provisioning so it's actually a chef template and you",
    "start": "2096490",
    "end": "2103359"
  },
  {
    "text": "see that in the second line waisay own instance ID equals and then there is some templating that's a chef template",
    "start": "2103359",
    "end": "2108880"
  },
  {
    "text": "that inserts the the instance ID of the machine here so so that within the script I know okay that's my identity",
    "start": "2108880",
    "end": "2115500"
  },
  {
    "text": "then i'm using the sdk to query what is actually the stack that belongs to this",
    "start": "2115500",
    "end": "2120520"
  },
  {
    "text": "instance so they have the stack ID and then i use the stack of it to you to curry all the",
    "start": "2120520",
    "end": "2126550"
  },
  {
    "text": "applications that are that are available on this stack and I'm filtering it for",
    "start": "2126550",
    "end": "2131920"
  },
  {
    "text": "the one that matches the job name so this is something that Jenkins provides you as an environment rival within",
    "start": "2131920",
    "end": "2138670"
  },
  {
    "text": "within running a job the name of the job you're actually running which will map to the application name in ops works",
    "start": "2138670",
    "end": "2145710"
  },
  {
    "text": "because that's how the cookbook sets it up so once we have the application then here we just basically just do a",
    "start": "2145710",
    "end": "2152530"
  },
  {
    "text": "deployment right so we calling the obsolete deployment for this stack this",
    "start": "2152530",
    "end": "2157720"
  },
  {
    "text": "application and then there is some some code in between that I omitted that is filtering the instances to only show the",
    "start": "2157720",
    "end": "2164050"
  },
  {
    "text": "instances are actually online you might might also just submit that and deploy to all of them that usually also works",
    "start": "2164050",
    "end": "2171580"
  },
  {
    "text": "fine and then I say I want to deploy and I'm also adding a comment that tells ok this is the Jenkins built built ID again",
    "start": "2171580",
    "end": "2178270"
  },
  {
    "text": "provided by the by Jenkins and based on the commit get to commit ID again provided by Jenkins so this script you",
    "start": "2178270",
    "end": "2185980"
  },
  {
    "text": "would add to Jenkins as a deploy hook as please run this after you're finished running the test and then it would take",
    "start": "2185980",
    "end": "2194050"
  },
  {
    "text": "it will take my my app and deploy it actually if you if you're interested in",
    "start": "2194050",
    "end": "2199270"
  },
  {
    "text": "something like that you don't have to write it yourself for a lot of the typical CI server so if you're using Travis CI or coach abaayo or get up",
    "start": "2199270",
    "end": "2208540"
  },
  {
    "text": "actually also has a built-in deployment hook to ops works or snap CI or like something like Jenkins like i just",
    "start": "2208540",
    "end": "2213580"
  },
  {
    "text": "showed they are they actually all have existing provider so you can just in there you is configure them to",
    "start": "2213580",
    "end": "2219520"
  },
  {
    "text": "automatically deploy to ops works after the tests of finished Orion and github case after every commit you could deploy",
    "start": "2219520",
    "end": "2226030"
  },
  {
    "text": "to ops works directly so this is 1 11 demo that I want to show you that I will",
    "start": "2226030",
    "end": "2231520"
  },
  {
    "text": "show in a second the other one is also something that you probably if you have a large fleet of running servers that is",
    "start": "2231520",
    "end": "2238120"
  },
  {
    "text": "very useful is just think back a couple of weeks ago when the when when bash the",
    "start": "2238120",
    "end": "2244420"
  },
  {
    "text": "shell had a big security vulnerability arete like you probably ask yourself okay how many of my servers are vulnerable right do we have any",
    "start": "2244420",
    "end": "2250150"
  },
  {
    "text": "instances that running an outdated version of bash would it be cool if I had the ability to type command past the stop switch stack ID",
    "start": "2250150",
    "end": "2257740"
  },
  {
    "text": "and then get the output of all of all the instances right that sounds like a very useful feature and you can actually",
    "start": "2257740",
    "end": "2263050"
  },
  {
    "text": "very easily implement it yourself so in this example we we have a small script",
    "start": "2263050",
    "end": "2268210"
  },
  {
    "text": "called ops run you give it a stack ID you give it a command to run it will show you of every instance in this stack",
    "start": "2268210",
    "end": "2274090"
  },
  {
    "text": "the output again the code is not it's not too scary I hope we will see this",
    "start": "2274090",
    "end": "2282970"
  },
  {
    "text": "live in a second but basically what we're doing here is we're retrieving the stack we're getting all the instance in",
    "start": "2282970",
    "end": "2288790"
  },
  {
    "text": "the stack we're only interested in the instances that are online and again we're just using the public SDK with the",
    "start": "2288790",
    "end": "2296320"
  },
  {
    "text": "a in this case the API call described instances of a certain stack ID and then we're creating a deployment to where we",
    "start": "2296320",
    "end": "2303550"
  },
  {
    "text": "pass out this script that we let the UI that the CLI pass to us and here we're",
    "start": "2303550",
    "end": "2309850"
  },
  {
    "text": "just pulling the the API to say please wait until this deployment is finished",
    "start": "2309850",
    "end": "2315850"
  },
  {
    "text": "and once it's finished with pacing the output on the screen the only part",
    "start": "2315850",
    "end": "2321880"
  },
  {
    "text": "there's a little bit tricky here is like how do i execute the script and get the output nicely we have like a very small",
    "start": "2321880",
    "end": "2327760"
  },
  {
    "text": "kind of simple solution that works fine but you can extend that very easily so",
    "start": "2327760",
    "end": "2333940"
  },
  {
    "text": "what we have here is a cookbook that we're running in that case where we are creating a script on the machine this is",
    "start": "2333940",
    "end": "2340690"
  },
  {
    "text": "actually the script that you just passed and then we're executing the script and capturing the output we have some funny",
    "start": "2340690",
    "end": "2346090"
  },
  {
    "text": "markers here to be able then to parse the output between and then display it on the UN in the on the screen right and",
    "start": "2346090",
    "end": "2354430"
  },
  {
    "text": "that's about it right so let's see that in action so if we switch back to our",
    "start": "2354430",
    "end": "2361330"
  },
  {
    "text": "screen here Thomas showed you that we actually have two stacks so there is also this other stack where we use the",
    "start": "2361330",
    "end": "2368320"
  },
  {
    "text": "community cookbooks to boot two instances and added a PHP server instance so I have the the Jenkinses",
    "start": "2368320",
    "end": "2373420"
  },
  {
    "text": "over here where the Jenkins server the layout actually is just running our",
    "start": "2373420",
    "end": "2378820"
  },
  {
    "text": "community cookbook so if you look on the recipes we see that we're running the Jenkins master and then we're running",
    "start": "2378820",
    "end": "2384760"
  },
  {
    "text": "this Jenkins helper script a cookbook the Thomas just showed you installs the proxy and it actually also",
    "start": "2384760",
    "end": "2391150"
  },
  {
    "text": "installs this deployment helper and then we have a simple PHP instance with a PHP application so if I go to the Jenkins",
    "start": "2391150",
    "end": "2398950"
  },
  {
    "text": "server there it is like I we booted it before otherwise we will be waiting a couple of minutes and we wanted to spare",
    "start": "2398950",
    "end": "2404980"
  },
  {
    "text": "you that so the application already was auto created and registered and what I",
    "start": "2404980",
    "end": "2411310"
  },
  {
    "text": "can do right now is I can go over to the to github and I can just make a change",
    "start": "2411310",
    "end": "2417970"
  },
  {
    "text": "on the end the code let's do something",
    "start": "2417970",
    "end": "2425530"
  },
  {
    "text": "like very simple just to show that if I commit and github the change will be",
    "start": "2425530",
    "end": "2432040"
  },
  {
    "text": "automatically deployed to the machines so if I go to the stack and to my PHP server like obviously this change is not",
    "start": "2432040",
    "end": "2438340"
  },
  {
    "text": "there yet but it will be in a couple of seconds because Jenkins will now pick up",
    "start": "2438340",
    "end": "2443500"
  },
  {
    "text": "this change so probably we will see soon a billet as soon as Jenkins will figure",
    "start": "2443500",
    "end": "2449290"
  },
  {
    "text": "out somebody committed to get up Jenkins will pull the code run the tests which are non-existent in my example and then",
    "start": "2449290",
    "end": "2456340"
  },
  {
    "text": "as soon as they're okay execute the deployment so the other thing that let",
    "start": "2456340",
    "end": "2464200"
  },
  {
    "text": "me just yeah verify that everything worked fine the other thing that I want to show is this remote command execution right so here we have the the small ops",
    "start": "2464200",
    "end": "2474400"
  },
  {
    "text": "front script that I showed you I pass it a stack ID and in this case I pass it a small snippet of bash code that will",
    "start": "2474400",
    "end": "2481540"
  },
  {
    "text": "evaluate if my bash shell is vulnerable to this security problem or not",
    "start": "2481540",
    "end": "2488910"
  },
  {
    "text": "basically by trying to see if i can define functions with additional return values afterwards so I'm executing this",
    "start": "2488910",
    "end": "2496600"
  },
  {
    "text": "what it will do is again will create the deployment well well wait for the output",
    "start": "2496600",
    "end": "2502060"
  },
  {
    "text": "and then pate and look at the output if I go now back to to my stack and opsworks I should see that there are now",
    "start": "2502060",
    "end": "2508600"
  },
  {
    "text": "two deployments being executed one is being executed by the kitchen user which",
    "start": "2508600",
    "end": "2514360"
  },
  {
    "text": "is the the IM user my CL is using and that is executing this basically passing",
    "start": "2514360",
    "end": "2521860"
  },
  {
    "text": "this code we let me just so so it called the just crater deployment to pass this as the payload and then the other deployment is",
    "start": "2521860",
    "end": "2529180"
  },
  {
    "text": "Jenkins actually triggering than the normal deployment so this is Jenkins",
    "start": "2529180",
    "end": "2534250"
  },
  {
    "text": "deploying to my PHP 7 you can see here the comments that we looked and read the bill tidy and the committee ID so both",
    "start": "2534250",
    "end": "2540849"
  },
  {
    "text": "of those deployment were triggered by the tools and should be hopefully done within a couple of seconds the reason",
    "start": "2540849",
    "end": "2548920"
  },
  {
    "text": "why the 80s user here is a little bit looks a little bit interesting is because Jenkins is using the IM instance",
    "start": "2548920",
    "end": "2555369"
  },
  {
    "text": "profiles that i mentioned so i booted the jenkins instance with a profile that allows it to use the objects API so you",
    "start": "2555369",
    "end": "2561339"
  },
  {
    "text": "can see here actually the ec2 instance ID of the the instance that is running that is using the the office works API",
    "start": "2561339",
    "end": "2570059"
  },
  {
    "text": "so let's check if the output is done so if we if we see we see here that both of",
    "start": "2570059",
    "end": "2575559"
  },
  {
    "text": "my servers are not vulnerable because they were they have already the security",
    "start": "2575559",
    "end": "2580930"
  },
  {
    "text": "updates installed if we look at how this ups run script looks like as you can see",
    "start": "2580930",
    "end": "2587650"
  },
  {
    "text": "it's actually not not long not a lot longer than what I showed you so it's",
    "start": "2587650",
    "end": "2592839"
  },
  {
    "text": "really simple obviously it doesn't do a lot of error handling it doesn't do a lot of special case handling and so on but what what I want to show you here is",
    "start": "2592839",
    "end": "2599470"
  },
  {
    "text": "really with 50 lines of code I can have a remote a strip that execute commands",
    "start": "2599470",
    "end": "2605650"
  },
  {
    "text": "on all my servers you could filter very easily add filtering by layering I think filtering by AZ or region or like",
    "start": "2605650",
    "end": "2612579"
  },
  {
    "text": "execute commands in in different ways and so on an aggregate that and use that fork and some some kind of reporting and",
    "start": "2612579",
    "end": "2620190"
  },
  {
    "text": "hopefully by now if I go back to my PHP server we see that it automatically",
    "start": "2620190",
    "end": "2625900"
  },
  {
    "text": "deployed my change through my CD pipeline yeah so this is with really a",
    "start": "2625900",
    "end": "2634839"
  },
  {
    "text": "couple of lines of code you can automate opsworks you can build your own tools on top of that and and really like improve",
    "start": "2634839",
    "end": "2642010"
  },
  {
    "text": "your your process and end speed it up so",
    "start": "2642010",
    "end": "2647500"
  },
  {
    "text": "with that we're basically at an end what I wanted to call out is that if you're",
    "start": "2647500",
    "end": "2652569"
  },
  {
    "text": "interested in ops works and learning more there too and events tomorrow that you might be interested in so at about 3pm there will",
    "start": "2652569",
    "end": "2661310"
  },
  {
    "text": "be a couple of our developers at the developer launch so that means if you have any in-depth questions if you want",
    "start": "2661310",
    "end": "2666890"
  },
  {
    "text": "to like go with us through your architecture discuss any any particular things feel free to just pop up and we",
    "start": "2666890",
    "end": "2672980"
  },
  {
    "text": "will be there we will also be all day today and tomorrow and Friday obviously at the erequest booth at the developer",
    "start": "2672980",
    "end": "2680050"
  },
  {
    "text": "sort deployment management section also there is a talk at 4pm tomorrow from the",
    "start": "2680050",
    "end": "2686750"
  },
  {
    "text": "a book and Phil skies they're going to talk about how they are using ops works in production and we'll talk about their",
    "start": "2686750",
    "end": "2692450"
  },
  {
    "text": "experiences and and what worked for them what didn't work and and basically convey their experiences and last but at",
    "start": "2692450",
    "end": "2699260"
  },
  {
    "text": "least we're of course we'll have a Q&A outside in the hallway also you can",
    "start": "2699260",
    "end": "2704840"
  },
  {
    "text": "visit at the boost if you're interested and please give us feedback this session",
    "start": "2704840",
    "end": "2710420"
  },
  {
    "text": "is f 301 so we're very very eager to hear what we could do better and hear what you guys have to say about office",
    "start": "2710420",
    "end": "2716750"
  },
  {
    "text": "works so thank you very much",
    "start": "2716750",
    "end": "2720280"
  }
]