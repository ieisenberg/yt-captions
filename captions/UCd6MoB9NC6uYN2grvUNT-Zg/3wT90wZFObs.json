[
  {
    "start": "0",
    "end": "31000"
  },
  {
    "text": "[Music]",
    "start": "650",
    "end": "1010"
  },
  {
    "text": "[Applause]",
    "start": "1010",
    "end": "4088"
  },
  {
    "text": "[Music]",
    "start": "4960",
    "end": "11059"
  },
  {
    "text": "thank you",
    "start": "11059",
    "end": "12960"
  },
  {
    "text": "hi there my name is deshelen",
    "start": "12960",
    "end": "15839"
  },
  {
    "text": "I am a cloud support engineer in the",
    "start": "15839",
    "end": "18180"
  },
  {
    "text": "analytics profile at AWS office in Cape",
    "start": "18180",
    "end": "21240"
  },
  {
    "text": "Town South Africa",
    "start": "21240",
    "end": "23220"
  },
  {
    "text": "today I'll show you how to troubleshoot",
    "start": "23220",
    "end": "25320"
  },
  {
    "text": "and resolve low started space in your",
    "start": "25320",
    "end": "27420"
  },
  {
    "text": "Amazon open search service domain",
    "start": "27420",
    "end": "30000"
  },
  {
    "text": "let's get started",
    "start": "30000",
    "end": "31920"
  },
  {
    "start": "31000",
    "end": "127000"
  },
  {
    "text": "your Amazon open search service domain",
    "start": "31920",
    "end": "34380"
  },
  {
    "text": "has certain storage space requirements",
    "start": "34380",
    "end": "36719"
  },
  {
    "text": "for processing workloads a cluster block",
    "start": "36719",
    "end": "39420"
  },
  {
    "text": "exception error can occur when your open",
    "start": "39420",
    "end": "41940"
  },
  {
    "text": "site service domain has run out of",
    "start": "41940",
    "end": "43980"
  },
  {
    "text": "storage space in this video I'll show",
    "start": "43980",
    "end": "46739"
  },
  {
    "text": "you four different scenarios where you",
    "start": "46739",
    "end": "48780"
  },
  {
    "text": "might need to resolve low storage space",
    "start": "48780",
    "end": "50579"
  },
  {
    "text": "and then show you how to troubleshoot",
    "start": "50579",
    "end": "52920"
  },
  {
    "text": "the issues scenario 1 increase the size",
    "start": "52920",
    "end": "56280"
  },
  {
    "text": "of the domain's Amazon elastic Block",
    "start": "56280",
    "end": "58620"
  },
  {
    "text": "store volumes you can also add more",
    "start": "58620",
    "end": "61440"
  },
  {
    "text": "cluster nodes to the open search service",
    "start": "61440",
    "end": "63420"
  },
  {
    "text": "domain",
    "start": "63420",
    "end": "64559"
  },
  {
    "text": "after logging into the AWS Management",
    "start": "64559",
    "end": "66960"
  },
  {
    "text": "console navigate to the open search",
    "start": "66960",
    "end": "69240"
  },
  {
    "text": "console and choose the domain that is",
    "start": "69240",
    "end": "71340"
  },
  {
    "text": "run out of storage space",
    "start": "71340",
    "end": "74420"
  },
  {
    "text": "choose the edit button in the cluster",
    "start": "76500",
    "end": "78840"
  },
  {
    "text": "configuration tab on the domain page",
    "start": "78840",
    "end": "82380"
  },
  {
    "text": "under data nodes increase the EBS",
    "start": "82380",
    "end": "85320"
  },
  {
    "text": "started size per node value as required",
    "start": "85320",
    "end": "87900"
  },
  {
    "text": "this value is limited by the minimum and",
    "start": "87900",
    "end": "90780"
  },
  {
    "text": "maximum values as stated below the Box",
    "start": "90780",
    "end": "93960"
  },
  {
    "text": "these limits are determined by the",
    "start": "93960",
    "end": "96060"
  },
  {
    "text": "instance types being used",
    "start": "96060",
    "end": "98220"
  },
  {
    "text": "after this value is increased scroll",
    "start": "98220",
    "end": "101100"
  },
  {
    "text": "down and choose save changes",
    "start": "101100",
    "end": "103380"
  },
  {
    "text": "this initiates a blue-green deployment",
    "start": "103380",
    "end": "106500"
  },
  {
    "text": "because these deployments can put the",
    "start": "106500",
    "end": "108479"
  },
  {
    "text": "domain under increased stress be sure to",
    "start": "108479",
    "end": "111000"
  },
  {
    "text": "do this at a time when load is minimal",
    "start": "111000",
    "end": "112920"
  },
  {
    "text": "on the cluster",
    "start": "112920",
    "end": "114420"
  },
  {
    "text": "refer to metrics such as jvm memory",
    "start": "114420",
    "end": "116820"
  },
  {
    "text": "pressure and CPU utilization to make",
    "start": "116820",
    "end": "119159"
  },
  {
    "text": "sure that they are within suggested",
    "start": "119159",
    "end": "120720"
  },
  {
    "text": "ranges",
    "start": "120720",
    "end": "123259"
  },
  {
    "text": "scenario 2 scale out the open search",
    "start": "123560",
    "end": "126540"
  },
  {
    "text": "domain horizontally by adding more data",
    "start": "126540",
    "end": "129179"
  },
  {
    "start": "127000",
    "end": "173000"
  },
  {
    "text": "nodes",
    "start": "129179",
    "end": "129959"
  },
  {
    "text": "after logging into the AWS Management",
    "start": "129959",
    "end": "132360"
  },
  {
    "text": "console navigate to the open search",
    "start": "132360",
    "end": "134520"
  },
  {
    "text": "console and choose the demand that is",
    "start": "134520",
    "end": "136379"
  },
  {
    "text": "run out to storage space",
    "start": "136379",
    "end": "139520"
  },
  {
    "text": "choose the edit button in the cluster",
    "start": "141599",
    "end": "143819"
  },
  {
    "text": "configuration tab on the domain page",
    "start": "143819",
    "end": "146760"
  },
  {
    "text": "under data nodes increase the number of",
    "start": "146760",
    "end": "149220"
  },
  {
    "text": "nodes value as required this number must",
    "start": "149220",
    "end": "152580"
  },
  {
    "text": "be between 1 and 80.",
    "start": "152580",
    "end": "155099"
  },
  {
    "text": "after this value is increased scroll",
    "start": "155099",
    "end": "157680"
  },
  {
    "text": "down and choose save changes this",
    "start": "157680",
    "end": "160680"
  },
  {
    "text": "initiates a blue-green deployment the",
    "start": "160680",
    "end": "163319"
  },
  {
    "text": "factors mentioned previously about",
    "start": "163319",
    "end": "164819"
  },
  {
    "text": "configuration changes still apply here",
    "start": "164819",
    "end": "169080"
  },
  {
    "text": "scenario 3 reduce the amount of data",
    "start": "169080",
    "end": "172200"
  },
  {
    "text": "stored in your domain",
    "start": "172200",
    "end": "174000"
  },
  {
    "start": "173000",
    "end": "246000"
  },
  {
    "text": "note that it's the best practice to take",
    "start": "174000",
    "end": "176099"
  },
  {
    "text": "a manual snapshot before you do this",
    "start": "176099",
    "end": "179400"
  },
  {
    "text": "after logging into the AWS Management",
    "start": "179400",
    "end": "181620"
  },
  {
    "text": "console navigate to the open search",
    "start": "181620",
    "end": "183720"
  },
  {
    "text": "console and choose the domain that has",
    "start": "183720",
    "end": "186000"
  },
  {
    "text": "run out to storage space",
    "start": "186000",
    "end": "189200"
  },
  {
    "text": "select the kibana URL and navigate to OS",
    "start": "189780",
    "end": "192780"
  },
  {
    "text": "dashboards or kibana Dev tools after",
    "start": "192780",
    "end": "195239"
  },
  {
    "text": "Authentication",
    "start": "195239",
    "end": "196620"
  },
  {
    "text": "in this Example The Domain doesn't have",
    "start": "196620",
    "end": "199080"
  },
  {
    "text": "fine-grained access control enabled and",
    "start": "199080",
    "end": "201420"
  },
  {
    "text": "the domain is being accessed from an IP",
    "start": "201420",
    "end": "203640"
  },
  {
    "text": "address that has been allowed listed",
    "start": "203640",
    "end": "206819"
  },
  {
    "text": "list the indices in the domain by",
    "start": "206819",
    "end": "208980"
  },
  {
    "text": "running cat indices",
    "start": "208980",
    "end": "211980"
  },
  {
    "text": "delete the required indices by using the",
    "start": "211980",
    "end": "214500"
  },
  {
    "text": "delete API",
    "start": "214500",
    "end": "217260"
  },
  {
    "text": "or documents within an index can also be",
    "start": "217260",
    "end": "220560"
  },
  {
    "text": "deleted to free up space by using the",
    "start": "220560",
    "end": "222900"
  },
  {
    "text": "delete by query API",
    "start": "222900",
    "end": "225540"
  },
  {
    "text": "another option is to reduce the replica",
    "start": "225540",
    "end": "227940"
  },
  {
    "text": "count for indices in the domain",
    "start": "227940",
    "end": "230459"
  },
  {
    "text": "you can do this by reducing the number",
    "start": "230459",
    "end": "232500"
  },
  {
    "text": "of replica setting for certain indices",
    "start": "232500",
    "end": "234780"
  },
  {
    "text": "as required",
    "start": "234780",
    "end": "236519"
  },
  {
    "text": "note that it's a best practice to have",
    "start": "236519",
    "end": "238980"
  },
  {
    "text": "at least one replica shot because this",
    "start": "238980",
    "end": "241200"
  },
  {
    "text": "can improve the domain's fault tolerance",
    "start": "241200",
    "end": "245060"
  },
  {
    "start": "246000",
    "end": "421000"
  },
  {
    "text": "update your cluster sharding strategy so",
    "start": "246120",
    "end": "248819"
  },
  {
    "text": "that shards are evenly distributed",
    "start": "248819",
    "end": "250860"
  },
  {
    "text": "across all nodes",
    "start": "250860",
    "end": "253500"
  },
  {
    "text": "after logging into the AWS Management",
    "start": "253500",
    "end": "255900"
  },
  {
    "text": "console navigate to the open search",
    "start": "255900",
    "end": "258419"
  },
  {
    "text": "console and choose the domain that is",
    "start": "258419",
    "end": "260699"
  },
  {
    "text": "run out of storage space",
    "start": "260699",
    "end": "263840"
  },
  {
    "text": "in this case we might see that total",
    "start": "268199",
    "end": "270780"
  },
  {
    "text": "fees based on the cluster is not zero",
    "start": "270780",
    "end": "273000"
  },
  {
    "text": "but the minimum free space is this is a",
    "start": "273000",
    "end": "275940"
  },
  {
    "text": "good indication that shards are not",
    "start": "275940",
    "end": "277680"
  },
  {
    "text": "distributed evenly on this domain",
    "start": "277680",
    "end": "280259"
  },
  {
    "text": "select the kibana URL and navigate to OS",
    "start": "280259",
    "end": "283259"
  },
  {
    "text": "dashboards or Cubana Dev tools after",
    "start": "283259",
    "end": "286080"
  },
  {
    "text": "Authentication",
    "start": "286080",
    "end": "287460"
  },
  {
    "text": "in this Example The Domain does not have",
    "start": "287460",
    "end": "289680"
  },
  {
    "text": "fine grained Access Control enabled and",
    "start": "289680",
    "end": "292199"
  },
  {
    "text": "the domain is being accessed from an IP",
    "start": "292199",
    "end": "294300"
  },
  {
    "text": "address that has been allowed listed",
    "start": "294300",
    "end": "296639"
  },
  {
    "text": "look at the allocation of shards within",
    "start": "296639",
    "end": "298919"
  },
  {
    "text": "the nodes in the domain by running cat",
    "start": "298919",
    "end": "300720"
  },
  {
    "text": "allocation",
    "start": "300720",
    "end": "301979"
  },
  {
    "text": "you'll see a skew in disk percent",
    "start": "301979",
    "end": "303900"
  },
  {
    "text": "between the different data nodes in the",
    "start": "303900",
    "end": "306240"
  },
  {
    "text": "domain",
    "start": "306240",
    "end": "307020"
  },
  {
    "text": "list the indices to see the number of",
    "start": "307020",
    "end": "309060"
  },
  {
    "text": "primary shards as well as the store size",
    "start": "309060",
    "end": "311340"
  },
  {
    "text": "per index in the domain by running cat",
    "start": "311340",
    "end": "314160"
  },
  {
    "text": "indices",
    "start": "314160",
    "end": "315479"
  },
  {
    "text": "the number of primary shots per index in",
    "start": "315479",
    "end": "317820"
  },
  {
    "text": "the domain should be a multiple of the",
    "start": "317820",
    "end": "319800"
  },
  {
    "text": "number of available data nodes",
    "start": "319800",
    "end": "322139"
  },
  {
    "text": "if this is the case then the shards are",
    "start": "322139",
    "end": "324780"
  },
  {
    "text": "distributed evenly across the data nodes",
    "start": "324780",
    "end": "327180"
  },
  {
    "text": "in the domain",
    "start": "327180",
    "end": "328560"
  },
  {
    "text": "I delete the size of the indices and the",
    "start": "328560",
    "end": "331139"
  },
  {
    "text": "domain will be around the same size if",
    "start": "331139",
    "end": "333720"
  },
  {
    "text": "this is the case then storage will be",
    "start": "333720",
    "end": "335759"
  },
  {
    "text": "equally distributed per data node in the",
    "start": "335759",
    "end": "338280"
  },
  {
    "text": "domain",
    "start": "338280",
    "end": "339300"
  },
  {
    "text": "there are two ways to be sure that the",
    "start": "339300",
    "end": "341160"
  },
  {
    "text": "number of primary shots is a multiple of",
    "start": "341160",
    "end": "343199"
  },
  {
    "text": "the data nodes in the domain",
    "start": "343199",
    "end": "345419"
  },
  {
    "text": "change the number of primary shards in",
    "start": "345419",
    "end": "347639"
  },
  {
    "text": "the domain so that it is a multiple of",
    "start": "347639",
    "end": "349919"
  },
  {
    "text": "the number of data nodes in the domain",
    "start": "349919",
    "end": "351840"
  },
  {
    "text": "you can do this by creating a new",
    "start": "351840",
    "end": "354000"
  },
  {
    "text": "destination index with the required",
    "start": "354000",
    "end": "355979"
  },
  {
    "text": "primary shot count and then making use",
    "start": "355979",
    "end": "358620"
  },
  {
    "text": "of the re-index API to copy the source",
    "start": "358620",
    "end": "361680"
  },
  {
    "text": "index to the new index and then delete",
    "start": "361680",
    "end": "364020"
  },
  {
    "text": "the old index",
    "start": "364020",
    "end": "367160"
  },
  {
    "text": "or repeat the steps provided from",
    "start": "379880",
    "end": "382500"
  },
  {
    "text": "Scenario 2 to change the number of data",
    "start": "382500",
    "end": "384840"
  },
  {
    "text": "nodes in the domain so that it is a",
    "start": "384840",
    "end": "386880"
  },
  {
    "text": "multiple of the number of primary shots",
    "start": "386880",
    "end": "388860"
  },
  {
    "text": "that are seen within the indices in the",
    "start": "388860",
    "end": "391139"
  },
  {
    "text": "domain lastly to be sure that indices",
    "start": "391139",
    "end": "394020"
  },
  {
    "text": "are on the same size within the domain",
    "start": "394020",
    "end": "396120"
  },
  {
    "text": "use the rollover API for data streams or",
    "start": "396120",
    "end": "399360"
  },
  {
    "text": "indexed aliases so that new indices are",
    "start": "399360",
    "end": "402060"
  },
  {
    "text": "created when certain thresholds are met",
    "start": "402060",
    "end": "404160"
  },
  {
    "text": "such as number of documents or index",
    "start": "404160",
    "end": "407400"
  },
  {
    "text": "size",
    "start": "407400",
    "end": "409639"
  },
  {
    "text": "so now you know how to troubleshoot and",
    "start": "413639",
    "end": "416220"
  },
  {
    "text": "resolve low storage space in your Amazon",
    "start": "416220",
    "end": "418259"
  },
  {
    "text": "open search service domain",
    "start": "418259",
    "end": "422060"
  },
  {
    "start": "421000",
    "end": "437000"
  },
  {
    "text": "thanks for watching and happy cloud",
    "start": "423000",
    "end": "424979"
  },
  {
    "text": "computing from all of us here at AWS",
    "start": "424979",
    "end": "428410"
  },
  {
    "text": "[Applause]",
    "start": "428410",
    "end": "430160"
  },
  {
    "text": "[Music]",
    "start": "430160",
    "end": "433329"
  },
  {
    "text": "[Music]",
    "start": "435370",
    "end": "438550"
  }
]