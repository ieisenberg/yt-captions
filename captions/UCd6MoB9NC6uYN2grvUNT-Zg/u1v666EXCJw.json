[
  {
    "start": "0",
    "end": "42000"
  },
  {
    "text": "hello everyone",
    "start": "560",
    "end": "1760"
  },
  {
    "text": "welcome to this quick video on insert",
    "start": "1760",
    "end": "4160"
  },
  {
    "text": "update delete on s3 with amazon athena",
    "start": "4160",
    "end": "7120"
  },
  {
    "text": "and apache iceberg",
    "start": "7120",
    "end": "9679"
  },
  {
    "text": "if you are building your data lake on",
    "start": "9679",
    "end": "11360"
  },
  {
    "text": "amazon s3",
    "start": "11360",
    "end": "12799"
  },
  {
    "text": "one question that you may have",
    "start": "12799",
    "end": "14639"
  },
  {
    "text": "is",
    "start": "14639",
    "end": "15519"
  },
  {
    "text": "can i run insert update delete",
    "start": "15519",
    "end": "17039"
  },
  {
    "text": "transactions and asset transactions on",
    "start": "17039",
    "end": "19680"
  },
  {
    "text": "object storage",
    "start": "19680",
    "end": "21439"
  },
  {
    "text": "the answer is yes",
    "start": "21439",
    "end": "23359"
  },
  {
    "text": "athena iceberg integration provides you",
    "start": "23359",
    "end": "26240"
  },
  {
    "text": "a very simple way to run crud operations",
    "start": "26240",
    "end": "29920"
  },
  {
    "text": "on s3",
    "start": "29920",
    "end": "31920"
  },
  {
    "text": "this is ramkumar noted i'm a senior",
    "start": "31920",
    "end": "34000"
  },
  {
    "text": "solutions architect with aws focusing on",
    "start": "34000",
    "end": "36640"
  },
  {
    "text": "analytics services",
    "start": "36640",
    "end": "38320"
  },
  {
    "text": "today we'll be taking a look at this",
    "start": "38320",
    "end": "40239"
  },
  {
    "text": "option in detail",
    "start": "40239",
    "end": "42640"
  },
  {
    "start": "42000",
    "end": "89000"
  },
  {
    "text": "amazon athena",
    "start": "42640",
    "end": "44480"
  },
  {
    "text": "is a service that makes it easy to",
    "start": "44480",
    "end": "46800"
  },
  {
    "text": "analyze data directly in amazon s3",
    "start": "46800",
    "end": "49680"
  },
  {
    "text": "and various other storage systems using",
    "start": "49680",
    "end": "51920"
  },
  {
    "text": "standard sql",
    "start": "51920",
    "end": "54079"
  },
  {
    "text": "athena is serverless so there is no",
    "start": "54079",
    "end": "56480"
  },
  {
    "text": "infrastructure to set up or manage",
    "start": "56480",
    "end": "59680"
  },
  {
    "text": "and you pay",
    "start": "59680",
    "end": "61120"
  },
  {
    "text": "only for the queries you run and save up",
    "start": "61120",
    "end": "63680"
  },
  {
    "text": "to 30 to 90 percentage by compressing",
    "start": "63680",
    "end": "66799"
  },
  {
    "text": "partitioning and converting your data",
    "start": "66799",
    "end": "69040"
  },
  {
    "text": "into columnar formats",
    "start": "69040",
    "end": "71600"
  },
  {
    "text": "think athena uses ansi sql for querying",
    "start": "71600",
    "end": "74159"
  },
  {
    "text": "with support for parquet csv json avro",
    "start": "74159",
    "end": "78000"
  },
  {
    "text": "and other standard data formats",
    "start": "78000",
    "end": "80799"
  },
  {
    "text": "athena scales automatically",
    "start": "80799",
    "end": "82960"
  },
  {
    "text": "running queries in parallel so results",
    "start": "82960",
    "end": "85119"
  },
  {
    "text": "are fast even with large data sets and",
    "start": "85119",
    "end": "88159"
  },
  {
    "text": "complex queries",
    "start": "88159",
    "end": "90079"
  },
  {
    "start": "89000",
    "end": "162000"
  },
  {
    "text": "apache iceberg",
    "start": "90079",
    "end": "91840"
  },
  {
    "text": "is an open table format for very large",
    "start": "91840",
    "end": "95280"
  },
  {
    "text": "analytic data sets",
    "start": "95280",
    "end": "97360"
  },
  {
    "text": "iceberg manages large collection of",
    "start": "97360",
    "end": "99840"
  },
  {
    "text": "files and tables",
    "start": "99840",
    "end": "101759"
  },
  {
    "text": "and it supports modern analytical data",
    "start": "101759",
    "end": "104079"
  },
  {
    "text": "lake operations such as record level",
    "start": "104079",
    "end": "106560"
  },
  {
    "text": "insert update delete and time travel",
    "start": "106560",
    "end": "108799"
  },
  {
    "text": "queries",
    "start": "108799",
    "end": "110079"
  },
  {
    "text": "amazon athena announced as a",
    "start": "110079",
    "end": "112079"
  },
  {
    "text": "transactions a new capability that adds",
    "start": "112079",
    "end": "115200"
  },
  {
    "text": "write delete update and time travel",
    "start": "115200",
    "end": "118320"
  },
  {
    "text": "operations to athena's sql data",
    "start": "118320",
    "end": "120719"
  },
  {
    "text": "manipulation language using apache",
    "start": "120719",
    "end": "123439"
  },
  {
    "text": "iceberg",
    "start": "123439",
    "end": "124719"
  },
  {
    "text": "at the time of this recording that is",
    "start": "124719",
    "end": "126159"
  },
  {
    "text": "december 2021 this feature is in preview",
    "start": "126159",
    "end": "130479"
  },
  {
    "text": "athena as a transactions",
    "start": "130479",
    "end": "132560"
  },
  {
    "text": "enables multiple concurrent users to",
    "start": "132560",
    "end": "134959"
  },
  {
    "text": "make",
    "start": "134959",
    "end": "136000"
  },
  {
    "text": "reliable",
    "start": "136000",
    "end": "137120"
  },
  {
    "text": "role level modifications to their amazon",
    "start": "137120",
    "end": "139680"
  },
  {
    "text": "s3 data from athena's console",
    "start": "139680",
    "end": "143280"
  },
  {
    "text": "api",
    "start": "143280",
    "end": "144319"
  },
  {
    "text": "and odbc and jdbc drivers",
    "start": "144319",
    "end": "147760"
  },
  {
    "text": "athena asset transactions are compatible",
    "start": "147760",
    "end": "150400"
  },
  {
    "text": "with other services and engines such as",
    "start": "150400",
    "end": "153360"
  },
  {
    "text": "amazon emr",
    "start": "153360",
    "end": "154800"
  },
  {
    "text": "apache spark or other tools that",
    "start": "154800",
    "end": "157200"
  },
  {
    "text": "supports apache iceberg table format",
    "start": "157200",
    "end": "160720"
  },
  {
    "text": "let's see this in action",
    "start": "160720",
    "end": "162560"
  },
  {
    "start": "162000",
    "end": "582000"
  },
  {
    "text": "i went to edibles management console",
    "start": "162560",
    "end": "165200"
  },
  {
    "text": "here you can see that there are two",
    "start": "165200",
    "end": "166480"
  },
  {
    "text": "different csv files",
    "start": "166480",
    "end": "168319"
  },
  {
    "text": "which is where my data is residing",
    "start": "168319",
    "end": "170720"
  },
  {
    "text": "and that's in this s3 bucket",
    "start": "170720",
    "end": "173599"
  },
  {
    "text": "and for the demonstration purpose i'm",
    "start": "173599",
    "end": "176000"
  },
  {
    "text": "using a sporting event ticket data",
    "start": "176000",
    "end": "179040"
  },
  {
    "text": "and for me to read that what i've done",
    "start": "179040",
    "end": "180800"
  },
  {
    "text": "is i went ahead and catalogued that in",
    "start": "180800",
    "end": "182800"
  },
  {
    "text": "glue data catalog so here you can see",
    "start": "182800",
    "end": "184640"
  },
  {
    "text": "that it is pointing to the same location",
    "start": "184640",
    "end": "187599"
  },
  {
    "text": "and it has a structure to it it has nine",
    "start": "187599",
    "end": "190159"
  },
  {
    "text": "different columns",
    "start": "190159",
    "end": "191599"
  },
  {
    "text": "id sporting event id and so and so forth",
    "start": "191599",
    "end": "194000"
  },
  {
    "text": "and then a ticket price",
    "start": "194000",
    "end": "196080"
  },
  {
    "text": "and it has around 14 million records in",
    "start": "196080",
    "end": "198080"
  },
  {
    "text": "it",
    "start": "198080",
    "end": "199040"
  },
  {
    "text": "let's go to athena",
    "start": "199040",
    "end": "200959"
  },
  {
    "text": "so here the first thing that we'll be",
    "start": "200959",
    "end": "202640"
  },
  {
    "text": "doing is creating an iceberg table",
    "start": "202640",
    "end": "206799"
  },
  {
    "text": "now it's it's a typical ddl statement",
    "start": "206799",
    "end": "209840"
  },
  {
    "text": "for creating a table the only difference",
    "start": "209840",
    "end": "212239"
  },
  {
    "text": "that you would see here is the table",
    "start": "212239",
    "end": "214319"
  },
  {
    "text": "type as i spur so that's that's a change",
    "start": "214319",
    "end": "218400"
  },
  {
    "text": "that we have included here",
    "start": "218400",
    "end": "220319"
  },
  {
    "text": "so i'll go ahead and create this table",
    "start": "220319",
    "end": "223280"
  },
  {
    "text": "the next thing that we are going to do",
    "start": "223280",
    "end": "225040"
  },
  {
    "text": "is loading the data",
    "start": "225040",
    "end": "227519"
  },
  {
    "text": "from",
    "start": "227519",
    "end": "228319"
  },
  {
    "text": "the csv files that we had which is",
    "start": "228319",
    "end": "230080"
  },
  {
    "text": "nothing but",
    "start": "230080",
    "end": "231120"
  },
  {
    "text": "the data catalog entry of sporting event",
    "start": "231120",
    "end": "234959"
  },
  {
    "text": "ticket",
    "start": "234959",
    "end": "235920"
  },
  {
    "text": "so that's a table name that we have",
    "start": "235920",
    "end": "237200"
  },
  {
    "text": "given the data catalog that's where our",
    "start": "237200",
    "end": "239120"
  },
  {
    "text": "csv files are residing",
    "start": "239120",
    "end": "241120"
  },
  {
    "text": "we are moving that data into the new",
    "start": "241120",
    "end": "243680"
  },
  {
    "text": "iceberg table that we have created",
    "start": "243680",
    "end": "247280"
  },
  {
    "text": "okay",
    "start": "249519",
    "end": "250799"
  },
  {
    "text": "the",
    "start": "250799",
    "end": "251680"
  },
  {
    "text": "query is complete let's go ahead and",
    "start": "251680",
    "end": "253680"
  },
  {
    "text": "verify the counts this is the",
    "start": "253680",
    "end": "257280"
  },
  {
    "text": "i'll go ahead and run the select count",
    "start": "257280",
    "end": "259359"
  },
  {
    "text": "star from",
    "start": "259359",
    "end": "261040"
  },
  {
    "text": "both souls and the target",
    "start": "261040",
    "end": "263280"
  },
  {
    "text": "so if you look at",
    "start": "263280",
    "end": "265040"
  },
  {
    "text": "the count from the source so this is the",
    "start": "265040",
    "end": "267440"
  },
  {
    "text": "sporting event ticket",
    "start": "267440",
    "end": "269120"
  },
  {
    "text": "so the source counters",
    "start": "269120",
    "end": "271680"
  },
  {
    "text": "uh",
    "start": "271680",
    "end": "273479"
  },
  {
    "text": "14.9 million records that's what is the",
    "start": "273479",
    "end": "276400"
  },
  {
    "text": "the count from the source",
    "start": "276400",
    "end": "278160"
  },
  {
    "text": "and let's take a look at the",
    "start": "278160",
    "end": "280800"
  },
  {
    "text": "target which is the iceberg table that",
    "start": "280800",
    "end": "283360"
  },
  {
    "text": "we just created",
    "start": "283360",
    "end": "285120"
  },
  {
    "text": "okay",
    "start": "285120",
    "end": "286000"
  },
  {
    "text": "that has exact same number",
    "start": "286000",
    "end": "287840"
  },
  {
    "text": "which is 14.9 million records",
    "start": "287840",
    "end": "290880"
  },
  {
    "text": "the advantage of using athena and",
    "start": "290880",
    "end": "293040"
  },
  {
    "text": "iceberg integration",
    "start": "293040",
    "end": "294840"
  },
  {
    "text": "is that even though the data is still in",
    "start": "294840",
    "end": "298000"
  },
  {
    "text": "s3",
    "start": "298000",
    "end": "299440"
  },
  {
    "text": "you can treat as if you are working on a",
    "start": "299440",
    "end": "302320"
  },
  {
    "text": "database where you can run asset",
    "start": "302320",
    "end": "304720"
  },
  {
    "text": "transactions you can run",
    "start": "304720",
    "end": "306479"
  },
  {
    "text": "updates deletes and even you can go and",
    "start": "306479",
    "end": "309360"
  },
  {
    "text": "run time travel queries now let's take a",
    "start": "309360",
    "end": "311520"
  },
  {
    "text": "look at that so for that",
    "start": "311520",
    "end": "313680"
  },
  {
    "text": "i will",
    "start": "313680",
    "end": "314880"
  },
  {
    "text": "specifically pick a record so here i'm",
    "start": "314880",
    "end": "317520"
  },
  {
    "text": "going to pick a record which has id",
    "start": "317520",
    "end": "320560"
  },
  {
    "text": "equal to",
    "start": "320560",
    "end": "322320"
  },
  {
    "text": "this number right",
    "start": "322320",
    "end": "325120"
  },
  {
    "text": "here you can see that for this record",
    "start": "325120",
    "end": "327120"
  },
  {
    "text": "the ticket price is 36.2",
    "start": "327120",
    "end": "331360"
  },
  {
    "text": "now let's go ahead and update this",
    "start": "331360",
    "end": "334320"
  },
  {
    "text": "into ticket price as hundred",
    "start": "334320",
    "end": "338919"
  },
  {
    "text": "now even at this point the data is still",
    "start": "340800",
    "end": "342960"
  },
  {
    "text": "residing in s3 and you are able to run",
    "start": "342960",
    "end": "346000"
  },
  {
    "text": "an update query directly on s3",
    "start": "346000",
    "end": "349680"
  },
  {
    "text": "okay looks like the update went through",
    "start": "349680",
    "end": "352320"
  },
  {
    "text": "let's quickly validate that",
    "start": "352320",
    "end": "354479"
  },
  {
    "text": "let's go ahead and run",
    "start": "354479",
    "end": "356319"
  },
  {
    "text": "select star for the same query",
    "start": "356319",
    "end": "360400"
  },
  {
    "text": "okay",
    "start": "362479",
    "end": "363680"
  },
  {
    "text": "so now you can see that",
    "start": "363680",
    "end": "366240"
  },
  {
    "text": "the for the same record the ticket price",
    "start": "366240",
    "end": "368960"
  },
  {
    "text": "is updated to 100.",
    "start": "368960",
    "end": "372160"
  },
  {
    "text": "now the interesting part here is",
    "start": "372479",
    "end": "374880"
  },
  {
    "text": "be able to run a time travel query",
    "start": "374880",
    "end": "377919"
  },
  {
    "text": "to check",
    "start": "377919",
    "end": "379520"
  },
  {
    "text": "what was the the value for this",
    "start": "379520",
    "end": "382000"
  },
  {
    "text": "particular record",
    "start": "382000",
    "end": "385120"
  },
  {
    "text": "maybe five minutes back",
    "start": "385120",
    "end": "387280"
  },
  {
    "text": "let's go ahead and check that out",
    "start": "387280",
    "end": "390400"
  },
  {
    "text": "so here you can see that",
    "start": "390880",
    "end": "392800"
  },
  {
    "text": "five minutes back the value for ticket",
    "start": "392800",
    "end": "395440"
  },
  {
    "text": "price is 36.2",
    "start": "395440",
    "end": "398479"
  },
  {
    "text": "here in this select query we saw that it",
    "start": "398479",
    "end": "400240"
  },
  {
    "text": "is 100",
    "start": "400240",
    "end": "401360"
  },
  {
    "text": "and",
    "start": "401360",
    "end": "402319"
  },
  {
    "text": "this select query where we are giving an",
    "start": "402319",
    "end": "404400"
  },
  {
    "text": "interval of current timestamp minus 5",
    "start": "404400",
    "end": "406880"
  },
  {
    "text": "minutes you can see that it was 36.2 so",
    "start": "406880",
    "end": "410639"
  },
  {
    "text": "you have an ability to go back in time",
    "start": "410639",
    "end": "413520"
  },
  {
    "text": "and figure out what was the value for a",
    "start": "413520",
    "end": "416000"
  },
  {
    "text": "specific record",
    "start": "416000",
    "end": "418880"
  },
  {
    "text": "at any given point in time",
    "start": "418880",
    "end": "421440"
  },
  {
    "text": "you can be very specific about",
    "start": "421440",
    "end": "423680"
  },
  {
    "text": "the the time stamp or time frame as well",
    "start": "423680",
    "end": "426240"
  },
  {
    "text": "for example you can use something like",
    "start": "426240",
    "end": "427919"
  },
  {
    "text": "this where you can say that i want to",
    "start": "427919",
    "end": "430319"
  },
  {
    "text": "select the data",
    "start": "430319",
    "end": "432479"
  },
  {
    "text": "as of this time stamp",
    "start": "432479",
    "end": "434720"
  },
  {
    "text": "were id equal to this",
    "start": "434720",
    "end": "437360"
  },
  {
    "text": "so let's let's see what we have there",
    "start": "437360",
    "end": "441038"
  },
  {
    "text": "okay then again you can see that going",
    "start": "442080",
    "end": "444639"
  },
  {
    "text": "back five minutes",
    "start": "444639",
    "end": "446639"
  },
  {
    "text": "as well as a specific time stamp where i",
    "start": "446639",
    "end": "449199"
  },
  {
    "text": "travel back to",
    "start": "449199",
    "end": "450880"
  },
  {
    "text": "a timestamp which i was which i was sure",
    "start": "450880",
    "end": "453520"
  },
  {
    "text": "that the update did not happen at that",
    "start": "453520",
    "end": "455039"
  },
  {
    "text": "point in time i was able to see that the",
    "start": "455039",
    "end": "457520"
  },
  {
    "text": "ticket price is still 36.2",
    "start": "457520",
    "end": "461440"
  },
  {
    "text": "what we're going to do next is delete a",
    "start": "461440",
    "end": "463840"
  },
  {
    "text": "set of records from this table",
    "start": "463840",
    "end": "466879"
  },
  {
    "text": "but before we delete let's go ahead and",
    "start": "466879",
    "end": "469199"
  },
  {
    "text": "do a count star",
    "start": "469199",
    "end": "472240"
  },
  {
    "text": "to see how many records are there with",
    "start": "472240",
    "end": "474080"
  },
  {
    "text": "seat level four",
    "start": "474080",
    "end": "476240"
  },
  {
    "text": "let's go ahead and run this query",
    "start": "476240",
    "end": "478560"
  },
  {
    "text": "right",
    "start": "478560",
    "end": "479759"
  },
  {
    "text": "here you can see that it has",
    "start": "479759",
    "end": "483400"
  },
  {
    "text": "1.4 million records",
    "start": "483400",
    "end": "486240"
  },
  {
    "text": "with seat level s4",
    "start": "486240",
    "end": "488240"
  },
  {
    "text": "now we are going to run a delete for all",
    "start": "488240",
    "end": "490800"
  },
  {
    "text": "of those 1.4 million records",
    "start": "490800",
    "end": "493840"
  },
  {
    "text": "let's run that delete",
    "start": "493840",
    "end": "496639"
  },
  {
    "text": "okay the query is successful so here",
    "start": "496639",
    "end": "498800"
  },
  {
    "text": "again you can see that",
    "start": "498800",
    "end": "500479"
  },
  {
    "text": "you you still have your data on s3 and",
    "start": "500479",
    "end": "502639"
  },
  {
    "text": "you are able to run",
    "start": "502639",
    "end": "504080"
  },
  {
    "text": "a delete transaction on the data which",
    "start": "504080",
    "end": "507360"
  },
  {
    "text": "is sitting on s3",
    "start": "507360",
    "end": "509360"
  },
  {
    "text": "let's go and verify whether the delete",
    "start": "509360",
    "end": "512000"
  },
  {
    "text": "has actually went and deleted all the",
    "start": "512000",
    "end": "513760"
  },
  {
    "text": "records that we wanted to delete",
    "start": "513760",
    "end": "517120"
  },
  {
    "text": "okay the query is complete here you can",
    "start": "517120",
    "end": "519518"
  },
  {
    "text": "see that now when we did a select uh",
    "start": "519519",
    "end": "522320"
  },
  {
    "text": "count star",
    "start": "522320",
    "end": "523599"
  },
  {
    "text": "with seat level four we have zero record",
    "start": "523599",
    "end": "525920"
  },
  {
    "text": "so that means the delete query was",
    "start": "525920",
    "end": "527760"
  },
  {
    "text": "successful and it was able to delete all",
    "start": "527760",
    "end": "529839"
  },
  {
    "text": "the records with seat level four",
    "start": "529839",
    "end": "532399"
  },
  {
    "text": "now here again we have the option of",
    "start": "532399",
    "end": "534800"
  },
  {
    "text": "going back in time",
    "start": "534800",
    "end": "536399"
  },
  {
    "text": "and selecting",
    "start": "536399",
    "end": "538320"
  },
  {
    "text": "the records right for example if i want",
    "start": "538320",
    "end": "540720"
  },
  {
    "text": "to go ahead and run a query time travel",
    "start": "540720",
    "end": "543440"
  },
  {
    "text": "query",
    "start": "543440",
    "end": "545839"
  },
  {
    "text": "where i want to do a count star from",
    "start": "545920",
    "end": "548640"
  },
  {
    "text": "ticket data",
    "start": "548640",
    "end": "550399"
  },
  {
    "text": "with current timestamp minus interval as",
    "start": "550399",
    "end": "553440"
  },
  {
    "text": "last 2 minutes",
    "start": "553440",
    "end": "555360"
  },
  {
    "text": "ideally i should be getting that",
    "start": "555360",
    "end": "558000"
  },
  {
    "text": "1.4 million records back",
    "start": "558000",
    "end": "562519"
  },
  {
    "text": "there you go",
    "start": "565600",
    "end": "566880"
  },
  {
    "text": "we have that 1.4 million records if i",
    "start": "566880",
    "end": "569839"
  },
  {
    "text": "time travel",
    "start": "569839",
    "end": "571360"
  },
  {
    "text": "back to two minutes",
    "start": "571360",
    "end": "573440"
  },
  {
    "text": "i had these many records with seat level",
    "start": "573440",
    "end": "576399"
  },
  {
    "text": "4.",
    "start": "576399",
    "end": "577760"
  },
  {
    "text": "so that's how powerful it is",
    "start": "577760",
    "end": "579760"
  },
  {
    "text": "when we use athena and iceberg together",
    "start": "579760",
    "end": "582800"
  },
  {
    "start": "582000",
    "end": "617000"
  },
  {
    "text": "here is what we discussed in this video",
    "start": "582800",
    "end": "585360"
  },
  {
    "text": "we created an iceberg table in athena",
    "start": "585360",
    "end": "588880"
  },
  {
    "text": "inserted data into it",
    "start": "588880",
    "end": "590959"
  },
  {
    "text": "then we updated and deleted a few",
    "start": "590959",
    "end": "593040"
  },
  {
    "text": "records using simple dmls",
    "start": "593040",
    "end": "595839"
  },
  {
    "text": "and all of this data is sitting on s3",
    "start": "595839",
    "end": "599600"
  },
  {
    "text": "then we also tried time travel queries",
    "start": "599600",
    "end": "603839"
  },
  {
    "text": "back to a few minutes",
    "start": "603839",
    "end": "605519"
  },
  {
    "text": "as well as based on a specific time",
    "start": "605519",
    "end": "607680"
  },
  {
    "text": "stamp",
    "start": "607680",
    "end": "609360"
  },
  {
    "text": "hope you enjoyed this video thank you",
    "start": "609360",
    "end": "614120"
  }
]