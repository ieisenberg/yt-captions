[
  {
    "start": "0",
    "end": "90000"
  },
  {
    "text": "this is the second video showing how to",
    "start": "960",
    "end": "4120"
  },
  {
    "text": "use verified permissions with Amazon",
    "start": "4120",
    "end": "6640"
  },
  {
    "text": "Cognito to authenticate and authorize",
    "start": "6640",
    "end": "9320"
  },
  {
    "text": "user access to apis hosted on API",
    "start": "9320",
    "end": "13839"
  },
  {
    "text": "Gateway I'm Julian Lovelock and I'm the",
    "start": "13839",
    "end": "16600"
  },
  {
    "text": "product manager for Amazon verified",
    "start": "16600",
    "end": "19880"
  },
  {
    "text": "permissions the API gway quick start",
    "start": "19880",
    "end": "22560"
  },
  {
    "text": "wizard is a great way to bootstrap your",
    "start": "22560",
    "end": "25720"
  },
  {
    "text": "application and generate the schema and",
    "start": "25720",
    "end": "28599"
  },
  {
    "text": "policies in AP",
    "start": "28599",
    "end": "30840"
  },
  {
    "text": "it gets you started with the most common",
    "start": "30840",
    "end": "32920"
  },
  {
    "text": "policy type role-based Access",
    "start": "32920",
    "end": "37120"
  },
  {
    "text": "Control in the first video we used the",
    "start": "37120",
    "end": "40440"
  },
  {
    "text": "wizard to create Cedar policies for each",
    "start": "40440",
    "end": "43680"
  },
  {
    "text": "group within a Cognito user pool the",
    "start": "43680",
    "end": "47480"
  },
  {
    "text": "policies determined which of the apis",
    "start": "47480",
    "end": "50600"
  },
  {
    "text": "hosted on API Gateway members of the",
    "start": "50600",
    "end": "53520"
  },
  {
    "text": "group were permitted to call those apis",
    "start": "53520",
    "end": "57640"
  },
  {
    "text": "were represented as actions in in the",
    "start": "57640",
    "end": "60160"
  },
  {
    "text": "Ceda",
    "start": "60160",
    "end": "61840"
  },
  {
    "text": "schema if you haven't already watched",
    "start": "61840",
    "end": "64239"
  },
  {
    "text": "that video then it's definitely worth",
    "start": "64239",
    "end": "66600"
  },
  {
    "text": "taking the 18 minutes and 12 seconds to",
    "start": "66600",
    "end": "69640"
  },
  {
    "text": "do so as we will be building on many of",
    "start": "69640",
    "end": "72400"
  },
  {
    "text": "the concepts we introduced",
    "start": "72400",
    "end": "75080"
  },
  {
    "text": "there in this video you will learn how",
    "start": "75080",
    "end": "78200"
  },
  {
    "text": "to augment the role based access control",
    "start": "78200",
    "end": "81079"
  },
  {
    "text": "or arbac policies generated by quick",
    "start": "81079",
    "end": "84600"
  },
  {
    "text": "start to add attribute based conditions",
    "start": "84600",
    "end": "88240"
  },
  {
    "text": "or aack",
    "start": "88240",
    "end": "90880"
  },
  {
    "text": "so let's pick up where we left off I'm",
    "start": "90880",
    "end": "93799"
  },
  {
    "text": "using Postman to submit requests",
    "start": "93799",
    "end": "96920"
  },
  {
    "text": "initially to Cognito in order to get an",
    "start": "96920",
    "end": "100600"
  },
  {
    "text": "ID and an access token and in the prior",
    "start": "100600",
    "end": "103600"
  },
  {
    "text": "video I showed you how to set up Cognito",
    "start": "103600",
    "end": "106159"
  },
  {
    "text": "to do this so when I click send what I",
    "start": "106159",
    "end": "109960"
  },
  {
    "text": "get back is an access token and an ID",
    "start": "109960",
    "end": "113360"
  },
  {
    "text": "token and in this video we're going to",
    "start": "113360",
    "end": "115320"
  },
  {
    "text": "focus on using the ID token because it",
    "start": "115320",
    "end": "118280"
  },
  {
    "text": "comes with the attribute that I want to",
    "start": "118280",
    "end": "120719"
  },
  {
    "text": "use to qualify the",
    "start": "120719",
    "end": "122880"
  },
  {
    "text": "permissions now I'm going to take this",
    "start": "122880",
    "end": "124880"
  },
  {
    "text": "ID token and I'm going to copy it into a",
    "start": "124880",
    "end": "128800"
  },
  {
    "text": "useful little site called",
    "start": "128800",
    "end": "131520"
  },
  {
    "text": "jtms and that's going to decode the",
    "start": "131520",
    "end": "134160"
  },
  {
    "text": "token for me and if we look at the",
    "start": "134160",
    "end": "136519"
  },
  {
    "text": "contents of that token we can see that",
    "start": "136519",
    "end": "139280"
  },
  {
    "text": "it is a token for",
    "start": "139280",
    "end": "141840"
  },
  {
    "text": "Julian and Julian is a member of the",
    "start": "141840",
    "end": "145160"
  },
  {
    "text": "Cognito Group",
    "start": "145160",
    "end": "147560"
  },
  {
    "text": "Employee and we also have a custom",
    "start": "147560",
    "end": "150360"
  },
  {
    "text": "attribute called position which we'll",
    "start": "150360",
    "end": "152519"
  },
  {
    "text": "get to using",
    "start": "152519",
    "end": "154720"
  },
  {
    "text": "later just one little thing to be aware",
    "start": "154720",
    "end": "157400"
  },
  {
    "text": "of to make sure those attributes in",
    "start": "157400",
    "end": "159720"
  },
  {
    "text": "particular the custom attributes are",
    "start": "159720",
    "end": "161319"
  },
  {
    "text": "coming back in your ID token when you",
    "start": "161319",
    "end": "164519"
  },
  {
    "text": "set up your Cognito user",
    "start": "164519",
    "end": "167200"
  },
  {
    "text": "pool make sure when you create the app",
    "start": "167200",
    "end": "172720"
  },
  {
    "text": "integration app",
    "start": "172720",
    "end": "174640"
  },
  {
    "text": "client you have the authorization code",
    "start": "174640",
    "end": "178879"
  },
  {
    "text": "Grant",
    "start": "178879",
    "end": "180400"
  },
  {
    "text": "enabled and also within the rewrite",
    "start": "180400",
    "end": "184200"
  },
  {
    "text": "permissions that for any custom",
    "start": "184200",
    "end": "186400"
  },
  {
    "text": "attributes that you want to come back",
    "start": "186400",
    "end": "188319"
  },
  {
    "text": "within the ID token you have the read",
    "start": "188319",
    "end": "190959"
  },
  {
    "text": "and the write",
    "start": "190959",
    "end": "192599"
  },
  {
    "text": "selected now let's create a policy store",
    "start": "192599",
    "end": "195560"
  },
  {
    "text": "for the policies that are going to",
    "start": "195560",
    "end": "197280"
  },
  {
    "text": "govern access to my apis and again we",
    "start": "197280",
    "end": "200920"
  },
  {
    "text": "did this in fair amount of detail in the",
    "start": "200920",
    "end": "203120"
  },
  {
    "text": "first video so I'm going to run through",
    "start": "203120",
    "end": "204519"
  },
  {
    "text": "it fairly quickly going to select this",
    "start": "204519",
    "end": "207120"
  },
  {
    "text": "as my setup option click next",
    "start": "207120",
    "end": "210599"
  },
  {
    "text": "picked my pet store API and my",
    "start": "210599",
    "end": "212879"
  },
  {
    "text": "deployment stage import my",
    "start": "212879",
    "end": "215599"
  },
  {
    "text": "apis go next pick my policy not my",
    "start": "215599",
    "end": "220439"
  },
  {
    "text": "policy store my user PLL and note this",
    "start": "220439",
    "end": "223319"
  },
  {
    "text": "time I'm going to use the identity token",
    "start": "223319",
    "end": "226439"
  },
  {
    "text": "not the access",
    "start": "226439",
    "end": "228120"
  },
  {
    "text": "token um that user pool has a single",
    "start": "228120",
    "end": "230920"
  },
  {
    "text": "group called employees I'm going to say",
    "start": "230920",
    "end": "233280"
  },
  {
    "text": "that anyone in the employee group can",
    "start": "233280",
    "end": "235640"
  },
  {
    "text": "call all of my apis click next and",
    "start": "235640",
    "end": "239200"
  },
  {
    "text": "create my policy store and I can watch",
    "start": "239200",
    "end": "242000"
  },
  {
    "text": "that",
    "start": "242000",
    "end": "244439"
  },
  {
    "text": "deploy so once the authorizer has",
    "start": "244840",
    "end": "247480"
  },
  {
    "text": "deployed and then come back into API",
    "start": "247480",
    "end": "250519"
  },
  {
    "text": "Gateway and I attach that authorizer to",
    "start": "250519",
    "end": "253720"
  },
  {
    "text": "each of my apis and I've already",
    "start": "253720",
    "end": "256239"
  },
  {
    "text": "attached it to the other",
    "start": "256239",
    "end": "257759"
  },
  {
    "text": "apis uh and now I'll do the last one",
    "start": "257759",
    "end": "260199"
  },
  {
    "text": "which is attaching it to the pets post",
    "start": "260199",
    "end": "263800"
  },
  {
    "text": "API select my",
    "start": "263800",
    "end": "266360"
  },
  {
    "text": "authorizer",
    "start": "266360",
    "end": "267919"
  },
  {
    "text": "save and deploy my API back to my pet",
    "start": "267919",
    "end": "272120"
  },
  {
    "text": "store Dev",
    "start": "272120",
    "end": "273680"
  },
  {
    "text": "stage one small Point worthy of note is",
    "start": "273680",
    "end": "277360"
  },
  {
    "text": "that by default API Gateway enables",
    "start": "277360",
    "end": "281240"
  },
  {
    "text": "authorization caching uh 120 seconds",
    "start": "281240",
    "end": "284919"
  },
  {
    "text": "which basically means that you'll have",
    "start": "284919",
    "end": "286840"
  },
  {
    "text": "to wait 2 minutes before any changes",
    "start": "286840",
    "end": "290240"
  },
  {
    "text": "that you make in your policies impact",
    "start": "290240",
    "end": "293000"
  },
  {
    "text": "the authorization",
    "start": "293000",
    "end": "295960"
  },
  {
    "text": "decisions and I can check that this is",
    "start": "296080",
    "end": "298639"
  },
  {
    "text": "all working as expected by coming back",
    "start": "298639",
    "end": "301720"
  },
  {
    "text": "grabbing my ID token for Julian who as",
    "start": "301720",
    "end": "306120"
  },
  {
    "text": "we know is an",
    "start": "306120",
    "end": "308080"
  },
  {
    "text": "employee coming across into",
    "start": "308080",
    "end": "311240"
  },
  {
    "text": "Postman copying that token into the",
    "start": "311240",
    "end": "315759"
  },
  {
    "text": "request to call the pet store API to",
    "start": "315759",
    "end": "319360"
  },
  {
    "text": "post pets hitting send and the response",
    "start": "319360",
    "end": "323240"
  },
  {
    "text": "that I get indicates that yes I am",
    "start": "323240",
    "end": "325919"
  },
  {
    "text": "permitted to make that API call",
    "start": "325919",
    "end": "329800"
  },
  {
    "start": "329000",
    "end": "519000"
  },
  {
    "text": "okay so far so good so what everything",
    "start": "329800",
    "end": "331720"
  },
  {
    "text": "we've covered thus far we covered in the",
    "start": "331720",
    "end": "334240"
  },
  {
    "text": "first video the only difference being",
    "start": "334240",
    "end": "336520"
  },
  {
    "text": "this time we're using an ID",
    "start": "336520",
    "end": "338560"
  },
  {
    "text": "token but what I want to now show you is",
    "start": "338560",
    "end": "341400"
  },
  {
    "text": "how do I update my policies to be able",
    "start": "341400",
    "end": "346720"
  },
  {
    "text": "to reference that custom attribute so",
    "start": "346720",
    "end": "350560"
  },
  {
    "text": "firstly when I created that policy store",
    "start": "350560",
    "end": "353440"
  },
  {
    "text": "in the first place we created a schema",
    "start": "353440",
    "end": "356840"
  },
  {
    "text": "so let's just go take a look at that",
    "start": "356840",
    "end": "358400"
  },
  {
    "text": "quickly",
    "start": "358400",
    "end": "360400"
  },
  {
    "text": "we can see that within that",
    "start": "360400",
    "end": "362680"
  },
  {
    "text": "schema as part of the definition of the",
    "start": "362680",
    "end": "365600"
  },
  {
    "text": "user entity type because I referenced an",
    "start": "365600",
    "end": "369400"
  },
  {
    "text": "ID token all of the attributes from that",
    "start": "369400",
    "end": "373639"
  },
  {
    "text": "user pool were created as attributes of",
    "start": "373639",
    "end": "377440"
  },
  {
    "text": "this entity type user",
    "start": "377440",
    "end": "380520"
  },
  {
    "text": "including our custom position",
    "start": "380520",
    "end": "385759"
  },
  {
    "text": "attribute so I can now reference that",
    "start": "385759",
    "end": "388560"
  },
  {
    "text": "attribute within my",
    "start": "388560",
    "end": "391199"
  },
  {
    "text": "policy so let's come across into the",
    "start": "391199",
    "end": "393560"
  },
  {
    "text": "policies and edit my policies",
    "start": "393560",
    "end": "396639"
  },
  {
    "text": "so the wizard created a single policy",
    "start": "396639",
    "end": "399720"
  },
  {
    "text": "for me which essentially says any user",
    "start": "399720",
    "end": "403440"
  },
  {
    "text": "who is part of the employee group can",
    "start": "403440",
    "end": "406000"
  },
  {
    "text": "call any of these",
    "start": "406000",
    "end": "407680"
  },
  {
    "text": "apis but I want to carve out one of",
    "start": "407680",
    "end": "410240"
  },
  {
    "text": "these apis and limit it to users who are",
    "start": "410240",
    "end": "414520"
  },
  {
    "text": "not only in the employee group but also",
    "start": "414520",
    "end": "417599"
  },
  {
    "text": "have the manager position",
    "start": "417599",
    "end": "420160"
  },
  {
    "text": "how do I do that well I split this into",
    "start": "420160",
    "end": "423199"
  },
  {
    "text": "two",
    "start": "423199",
    "end": "424560"
  },
  {
    "text": "policies I'm going to remove I'm going",
    "start": "424560",
    "end": "426919"
  },
  {
    "text": "to copy the policy for Simplicity I'm",
    "start": "426919",
    "end": "428759"
  },
  {
    "text": "going to remove the post pets",
    "start": "428759",
    "end": "433400"
  },
  {
    "text": "action from this General policy which",
    "start": "433560",
    "end": "437680"
  },
  {
    "text": "applies to anyone who is an",
    "start": "437680",
    "end": "441000"
  },
  {
    "text": "employee and I'm going to create a",
    "start": "441000",
    "end": "443720"
  },
  {
    "text": "second",
    "start": "443720",
    "end": "445479"
  },
  {
    "text": "policy that is",
    "start": "445479",
    "end": "447560"
  },
  {
    "text": "specific to post pet",
    "start": "447560",
    "end": "451000"
  },
  {
    "text": "action and that policy says that any",
    "start": "451000",
    "end": "455000"
  },
  {
    "text": "user who is an employee can call Post",
    "start": "455000",
    "end": "458479"
  },
  {
    "text": "pets",
    "start": "458479",
    "end": "459879"
  },
  {
    "text": "API if I when they have a custom",
    "start": "459879",
    "end": "464560"
  },
  {
    "text": "attribute with a value for",
    "start": "464560",
    "end": "467599"
  },
  {
    "text": "position and the value of that position",
    "start": "467599",
    "end": "470680"
  },
  {
    "text": "is",
    "start": "470680",
    "end": "471639"
  },
  {
    "text": "manager in other words this policy says",
    "start": "471639",
    "end": "474479"
  },
  {
    "text": "that",
    "start": "474479",
    "end": "476159"
  },
  {
    "text": "only",
    "start": "476159",
    "end": "477919"
  },
  {
    "text": "managers can",
    "start": "477919",
    "end": "480120"
  },
  {
    "text": "call Post pets apis well to be pantic it",
    "start": "480120",
    "end": "485199"
  },
  {
    "text": "doesn't say that only managers can call",
    "start": "485199",
    "end": "487039"
  },
  {
    "text": "Post pets apis because it's not aware as",
    "start": "487039",
    "end": "489560"
  },
  {
    "text": "to whether there might be another policy",
    "start": "489560",
    "end": "491120"
  },
  {
    "text": "out there but what it does know is that",
    "start": "491120",
    "end": "493599"
  },
  {
    "text": "managers can call Post pets",
    "start": "493599",
    "end": "498280"
  },
  {
    "text": "API if we now come back to postman and",
    "start": "503520",
    "end": "508199"
  },
  {
    "text": "resubmit our API call request on behalf",
    "start": "508199",
    "end": "511960"
  },
  {
    "text": "of Julian who remember is an assistant",
    "start": "511960",
    "end": "515680"
  },
  {
    "text": "not a",
    "start": "515680",
    "end": "518000"
  },
  {
    "text": "manager now that request is blocked",
    "start": "518880",
    "end": "522640"
  },
  {
    "start": "519000",
    "end": "621000"
  },
  {
    "text": "because Julian's the value for Julian",
    "start": "522640",
    "end": "525959"
  },
  {
    "text": "for that attribute of position is",
    "start": "525959",
    "end": "529720"
  },
  {
    "text": "assistant but I got great news for",
    "start": "529720",
    "end": "531560"
  },
  {
    "text": "Julian he is about to get a promotion",
    "start": "531560",
    "end": "535080"
  },
  {
    "text": "it's pretty exciting so let's go promote",
    "start": "535080",
    "end": "537760"
  },
  {
    "text": "Julian and we'll do that that by going",
    "start": "537760",
    "end": "540920"
  },
  {
    "text": "into",
    "start": "540920",
    "end": "543440"
  },
  {
    "text": "Cognito and changing the value of his",
    "start": "543440",
    "end": "547399"
  },
  {
    "text": "position",
    "start": "547399",
    "end": "548519"
  },
  {
    "text": "attribute it really is as easy as that",
    "start": "548519",
    "end": "551800"
  },
  {
    "text": "to get a",
    "start": "551800",
    "end": "553360"
  },
  {
    "text": "promotion so I'm going to",
    "start": "553360",
    "end": "556279"
  },
  {
    "text": "edit custom",
    "start": "556279",
    "end": "558399"
  },
  {
    "text": "position and set that to",
    "start": "558399",
    "end": "561800"
  },
  {
    "text": "manager congratulations Julian very well",
    "start": "561800",
    "end": "565240"
  },
  {
    "text": "deserved now I'm going to come back into",
    "start": "565240",
    "end": "568399"
  },
  {
    "text": "Postman",
    "start": "568399",
    "end": "570480"
  },
  {
    "text": "and resubmit my login request and that's",
    "start": "570480",
    "end": "574480"
  },
  {
    "text": "going to return a new ID token and when",
    "start": "574480",
    "end": "579079"
  },
  {
    "text": "I look at this ID",
    "start": "579079",
    "end": "581480"
  },
  {
    "text": "token I would expect to see the new",
    "start": "581480",
    "end": "585519"
  },
  {
    "text": "attribute of manager reflected in the",
    "start": "585519",
    "end": "591279"
  },
  {
    "text": "claims and sure enough Julian is now a",
    "start": "591279",
    "end": "596399"
  },
  {
    "text": "manager so if I now use this D",
    "start": "596399",
    "end": "600640"
  },
  {
    "text": "token to submit a request to call the",
    "start": "600640",
    "end": "605399"
  },
  {
    "text": "Post pets",
    "start": "605399",
    "end": "608120"
  },
  {
    "text": "API sure enough now Julian has access to",
    "start": "611760",
    "end": "615519"
  },
  {
    "text": "the post pets API in his lofty position",
    "start": "615519",
    "end": "619120"
  },
  {
    "text": "as a",
    "start": "619120",
    "end": "620440"
  },
  {
    "text": "manager that's it for this video thank",
    "start": "620440",
    "end": "622720"
  },
  {
    "start": "621000",
    "end": "668000"
  },
  {
    "text": "you very much for taking the time to",
    "start": "622720",
    "end": "624560"
  },
  {
    "text": "watch it hopefully it was instructive",
    "start": "624560",
    "end": "626880"
  },
  {
    "text": "just as a little recap of what we did we",
    "start": "626880",
    "end": "629519"
  },
  {
    "text": "showed today how you can from within",
    "start": "629519",
    "end": "632399"
  },
  {
    "text": "Amazon verified",
    "start": "632399",
    "end": "633880"
  },
  {
    "text": "permissions deploy a Lambda authorizer",
    "start": "633880",
    "end": "637279"
  },
  {
    "text": "into API Gateway which will call the",
    "start": "637279",
    "end": "640399"
  },
  {
    "text": "Amazon verified permissions policy store",
    "start": "640399",
    "end": "643320"
  },
  {
    "text": "to evaluate a set of policies to",
    "start": "643320",
    "end": "645360"
  },
  {
    "text": "determine whether a user is permitted to",
    "start": "645360",
    "end": "647600"
  },
  {
    "text": "make a call on a specific",
    "start": "647600",
    "end": "649880"
  },
  {
    "text": "API and we showed how you can modify",
    "start": "649880",
    "end": "652560"
  },
  {
    "text": "that policy to consider not just the",
    "start": "652560",
    "end": "654880"
  },
  {
    "text": "group membership of the user but also",
    "start": "654880",
    "end": "658399"
  },
  {
    "text": "attribute values for that",
    "start": "658399",
    "end": "660440"
  },
  {
    "text": "user thank you very much hopefully we'll",
    "start": "660440",
    "end": "663760"
  },
  {
    "text": "do more videos and you'll tune in to",
    "start": "663760",
    "end": "665480"
  },
  {
    "text": "watch those goodbye",
    "start": "665480",
    "end": "669399"
  }
]