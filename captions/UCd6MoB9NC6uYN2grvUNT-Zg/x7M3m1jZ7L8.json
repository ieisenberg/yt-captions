[
  {
    "start": "0",
    "end": "153000"
  },
  {
    "text": "all right well good morning everybody and welcome I think we're ready to go ahead and get started so today we're",
    "start": "979",
    "end": "7080"
  },
  {
    "text": "gonna be talking about building HPC clusters is code in the almost infinite cloud my name's Nathan I lead a team of",
    "start": "7080",
    "end": "13469"
  },
  {
    "text": "large solution architects on the public sector side here at AWS and I'm going to be joined shortly by my co-presenter",
    "start": "13469",
    "end": "19920"
  },
  {
    "text": "Gabriel who's the hep cloud facility project manager at Fermilab so",
    "start": "19920",
    "end": "27529"
  },
  {
    "text": "expectations for the session we're gonna talk a little bit about why customers are using AWS for HPC leveraging spot",
    "start": "27529",
    "end": "35070"
  },
  {
    "text": "for big compute at low cost and accelerating deployment with automated and managed services most of the talk is",
    "start": "35070",
    "end": "42059"
  },
  {
    "text": "going to be around the infrastructure and operation side of deploying Kuster clusters rather than doing the compute",
    "start": "42059",
    "end": "49200"
  },
  {
    "text": "work inside of them so a quick agenda I'm gonna talk briefly about why AV OS",
    "start": "49200",
    "end": "55800"
  },
  {
    "text": "for HPC and some of the tools and techniques you can use to automate cluster deployment and make things",
    "start": "55800",
    "end": "61379"
  },
  {
    "text": "faster and more agile my co-presenter is gonna talk about some of their successes lessons learned and some of the very",
    "start": "61379",
    "end": "67020"
  },
  {
    "text": "cool things they do and then we've got a really brief demo of one of the tools that you can take advantage of on the",
    "start": "67020",
    "end": "72510"
  },
  {
    "text": "platform so first a little bit of nomenclature there's a couple of terms",
    "start": "72510",
    "end": "79290"
  },
  {
    "text": "here HPC becomes kind of an overloaded term right that becomes a blanket for a few things but there's actually a couple",
    "start": "79290",
    "end": "84570"
  },
  {
    "text": "different types of workloads we'll talk about on the left is HPC sometimes called cluster computing these workloads",
    "start": "84570",
    "end": "90750"
  },
  {
    "text": "tend to be characterized by workloads that have more internode communication so they're sensitive to latency they",
    "start": "90750",
    "end": "97860"
  },
  {
    "text": "tend to use larger instances and take advantage of features to control latency on the platform like using placement",
    "start": "97860",
    "end": "103500"
  },
  {
    "text": "groups to optimize networking they also tend to use a smaller number of larger",
    "start": "103500",
    "end": "108509"
  },
  {
    "text": "instance sizes and sometimes we'll split the workload and run multiple clusters",
    "start": "108509",
    "end": "114600"
  },
  {
    "text": "to kind of try to parallelize it and take advantage of the horizontal scaling on the right we have HTC workloads high",
    "start": "114600",
    "end": "120540"
  },
  {
    "text": "throughput computing sometimes called grid computing HTC workloads are characterized by less internode",
    "start": "120540",
    "end": "127229"
  },
  {
    "text": "communication so sometimes you'll hear them called pleasingly parallel they can often take advantage of",
    "start": "127229",
    "end": "133330"
  },
  {
    "text": "multiple different instance sizes which can become important for leveraging spot and they tend to scale out horizontally",
    "start": "133330",
    "end": "138790"
  },
  {
    "text": "very well which makes them an excellent fit for the platform to be able to take advantage of our scale so briefly why 8",
    "start": "138790",
    "end": "147910"
  },
  {
    "text": "vs 4 HPC or some reasons customers are moving their HPC and HTC workloads to AWS first is is time to research so HPC",
    "start": "147910",
    "end": "157780"
  },
  {
    "start": "153000",
    "end": "153000"
  },
  {
    "text": "and HTC jobs tend to be ephemeral you take a data set you run a set of calculations you get results maybe you",
    "start": "157780",
    "end": "164110"
  },
  {
    "text": "go back and modify your parameters and rerun maybe you go gather more experimental data but what that means is",
    "start": "164110",
    "end": "169690"
  },
  {
    "text": "the jobs are a bursty and often unpredictable central eyeties goal in many organizations is to maximize the",
    "start": "169690",
    "end": "175750"
  },
  {
    "text": "utilization of the cluster this graph looks great when you end the cluster and you have to justify that it's being used",
    "start": "175750",
    "end": "180910"
  },
  {
    "text": "and that that investment is paying off for whoever bought at your research organization or your business you know",
    "start": "180910",
    "end": "186640"
  },
  {
    "text": "hundred percent utilization means no wasted capacity right but what ends up happening is in many organizations the",
    "start": "186640",
    "end": "193810"
  },
  {
    "text": "job queue becomes the buffer and this this graph represents human behavior not necessarily the performance of an actual",
    "start": "193810",
    "end": "199600"
  },
  {
    "text": "job scheduling algorithm but the idea is for a lot of organizations the jobs build up because the cluster is",
    "start": "199600",
    "end": "206380"
  },
  {
    "text": "scheduled and you're just going to have to wait until the clusters free to run your job but in the cloud environment we",
    "start": "206380",
    "end": "214000"
  },
  {
    "text": "can work around this issue right in the cloud environment you pay for what you use and you can just request more",
    "start": "214000",
    "end": "219280"
  },
  {
    "text": "resources so you can run jobs faster because like from a computer spective",
    "start": "219280",
    "end": "224770"
  },
  {
    "text": "you pay for ec2 instances by the hour so 10,000 instances for an hour or a",
    "start": "224770",
    "end": "231489"
  },
  {
    "text": "thousand instances for 10 hours it's the same price for the compute so if your job scales horizontally you can just",
    "start": "231489",
    "end": "238150"
  },
  {
    "text": "scale out and run it faster or run multiple jobs in parallel there's not necessarily a penalty for doing that you",
    "start": "238150",
    "end": "243670"
  },
  {
    "text": "don't have to wait in line anymore and at the end of the day when the jobs are done you terminate those resources and",
    "start": "243670",
    "end": "249519"
  },
  {
    "text": "don't pay for them nobody has to justify a very expensive cluster that's sitting idle so another reason is innovation and",
    "start": "249519",
    "end": "260320"
  },
  {
    "start": "256000",
    "end": "256000"
  },
  {
    "text": "performance so a lot of these clusters and grids this hardware is a it's very expensive big upfront capital",
    "start": "260320",
    "end": "266890"
  },
  {
    "text": "investment and the customers we talked to can't upgrade them very often they're",
    "start": "266890",
    "end": "272050"
  },
  {
    "text": "sort of the old joke that you know your computer is obsolete by the time you buy it and get it home from the store but",
    "start": "272050",
    "end": "277300"
  },
  {
    "text": "with the rate of advancement of compute technology there's still some truth to that so in AWS we're constantly launching new",
    "start": "277300",
    "end": "284530"
  },
  {
    "text": "features and products that you can get access to your right away rather than having to wait till the hardware expires and we buy new hardware that gets you",
    "start": "284530",
    "end": "291310"
  },
  {
    "text": "the advantages within technology hopefully you all have got to see the keynotes you know lots of new compute",
    "start": "291310",
    "end": "296530"
  },
  {
    "text": "technologies released this week f1 instance types with FPGA is Right elastic GPUs to be able to have GPU",
    "start": "296530",
    "end": "302890"
  },
  {
    "text": "computing to instances and those sorts of things are available now and there were upgrades to a lot of the instance families that improve their performance",
    "start": "302890",
    "end": "310710"
  },
  {
    "start": "310000",
    "end": "310000"
  },
  {
    "text": "another reason is scalability and flexibility once you've bought a cluster",
    "start": "310710",
    "end": "315850"
  },
  {
    "text": "if we're talking about a physical cluster or an organization it can be difficult to reconfigure it if you need",
    "start": "315850",
    "end": "321490"
  },
  {
    "text": "to make it larger if you need to resize the nodes maybe you should wish you had larger individual nodes that can quickly",
    "start": "321490",
    "end": "327550"
  },
  {
    "text": "become a procurement problem if you need to configure the cluster for a different job type a lot of organizations I talked",
    "start": "327550",
    "end": "333760"
  },
  {
    "text": "to that means literally wheeling rats around Andry cabling things to reconfigure the cluster for a different",
    "start": "333760",
    "end": "338830"
  },
  {
    "text": "type of job in some cases but in this environment it's much easier to do that because you can take care of take",
    "start": "338830",
    "end": "344800"
  },
  {
    "text": "advantage of some of the automation we're going to talk about shortly to redeploy the cluster in the configuration you need you need a small",
    "start": "344800",
    "end": "351310"
  },
  {
    "text": "cluster deploy a small cluster you need a large cluster deploy a large cluster and my co-presenter is going to talk about some very large clusters or grids",
    "start": "351310",
    "end": "357910"
  },
  {
    "text": "that they run to handle some of their compute workloads data becomes another",
    "start": "357910",
    "end": "364060"
  },
  {
    "text": "reason that people are moving or close to AWS now that can seem counterintuitive a lot of people say",
    "start": "364060",
    "end": "369520"
  },
  {
    "text": "well taking advantage of the cloud computing the hard part is I have to get my data there well the good news is we have some services to help take care of",
    "start": "369520",
    "end": "375700"
  },
  {
    "text": "that right on the screen here we've got snowball ruggedized sand appliance that's the older snowball of course we",
    "start": "375700",
    "end": "381310"
  },
  {
    "text": "released the new snowball edge or announced the new snowball edge rather if you have data that you're moving back",
    "start": "381310",
    "end": "388000"
  },
  {
    "text": "and forth frequently Direct Connect can be a great solution for that dedicated low latency connectivity between you and",
    "start": "388000",
    "end": "393970"
  },
  {
    "text": "AWS facilities to be able to move data I can fourth reliably and quickly but",
    "start": "393970",
    "end": "399500"
  },
  {
    "text": "the well and don't want to forget only about snow or snowmobile which was a",
    "start": "399500",
    "end": "404960"
  },
  {
    "text": "pretty cool one the other day but the aside from having ways to move your data",
    "start": "404960",
    "end": "412280"
  },
  {
    "text": "back and forth to AWS once your data is in AWS it becomes easier to share so say",
    "start": "412280",
    "end": "417410"
  },
  {
    "text": "if you're a public sector research organization and your datasets are useful to other organizations you want to be able to share them once it's in",
    "start": "417410",
    "end": "423980"
  },
  {
    "text": "AWS it's very easy for you to do that and in that vein we have a lot of open",
    "start": "423980",
    "end": "429470"
  },
  {
    "text": "data projects we call them that are datasets that are available freely on",
    "start": "429470",
    "end": "435080"
  },
  {
    "text": "AWS for you to be able to use so for example the no and NEXRAD Doppler radar datasets and the thousand genomes",
    "start": "435080",
    "end": "440990"
  },
  {
    "text": "project and there are many more that you can go look up that you can access today to run your own calculations on if you",
    "start": "440990",
    "end": "446510"
  },
  {
    "text": "feel like it so we talked about kind of a variety of ways that eight of us can",
    "start": "446510",
    "end": "452780"
  },
  {
    "text": "help save cost on HPC and HDC workloads paying for what you use versus having to",
    "start": "452780",
    "end": "458450"
  },
  {
    "text": "pay out front pay up front for Hardware improving value by offering your options",
    "start": "458450",
    "end": "464780"
  },
  {
    "text": "and reducing time to results right offering managed services that allow you to give up undifferentiated heavy",
    "start": "464780",
    "end": "471470"
  },
  {
    "text": "lifting so you spend less of your time maintaining the cluster and more of your time hopefully doing research and of",
    "start": "471470",
    "end": "477680"
  },
  {
    "text": "course 57 price reduction since 2006 I think we're up to with the most recent",
    "start": "477680",
    "end": "482750"
  },
  {
    "text": "round over the last couple of weeks so the cost of the platform continues to go down versus increasing like some",
    "start": "482750",
    "end": "487850"
  },
  {
    "text": "platforms do but when we talked about doing HPC and HTC workloads affordably",
    "start": "487850",
    "end": "493150"
  },
  {
    "text": "often we need to talk about spot so the",
    "start": "493150",
    "end": "498920"
  },
  {
    "start": "496000",
    "end": "496000"
  },
  {
    "text": "spot market allows customers to bid on unused ec2 capacity that's in the market",
    "start": "498920",
    "end": "505060"
  },
  {
    "text": "you choose so spot looks on market prices the idea is you choose a bid price and your bid price is the maximum",
    "start": "505060",
    "end": "512000"
  },
  {
    "text": "that you'll ever pay for those resources but what you actually pay is the market price as long as your bid is higher than",
    "start": "512000",
    "end": "517700"
  },
  {
    "text": "the market price you get the instances you request it if the market price goes above your bid you get a two-minute",
    "start": "517700",
    "end": "523370"
  },
  {
    "text": "warning to shut down cleanly and then we take those instances back if you do get",
    "start": "523370",
    "end": "528560"
  },
  {
    "text": "preempted we don't charge you for the partial hour you ran you'll only pay four full hours that you had use of the instances so",
    "start": "528560",
    "end": "535880"
  },
  {
    "text": "there's there's a lot of sessions on spot I'm going to give you a really quick rundown kind of visually here in",
    "start": "535880",
    "end": "541760"
  },
  {
    "text": "this chart that to me makes it a little clearer than some of the ways it gets explained so in this in this kind of",
    "start": "541760",
    "end": "547640"
  },
  {
    "text": "basic example that we're doing with round numbers there are nine customers that have put in requests for spot",
    "start": "547640",
    "end": "553910"
  },
  {
    "text": "instances here and they've put in various bid prices from a dollar an hour all the way down to five cents an hour",
    "start": "553910",
    "end": "559910"
  },
  {
    "text": "which is a pretty wide spread but it makes an easy example and then there's five of these instances so it's per type",
    "start": "559910",
    "end": "567080"
  },
  {
    "text": "per zone so there's five of these instances available in whatever mythical zone that these users have put this request in what'll happen is those bid",
    "start": "567080",
    "end": "573980"
  },
  {
    "text": "prices will get sorted by bid price if there's five instances available the",
    "start": "573980",
    "end": "579260"
  },
  {
    "text": "five will get allocated to the five highest bid prices the market price becomes the cheapest one that got an",
    "start": "579260",
    "end": "584390"
  },
  {
    "text": "instance in this case twenty cents an hour so everybody pays twenty cents an hour even if you bid $1 an hour you're",
    "start": "584390",
    "end": "589970"
  },
  {
    "text": "going to pay twenty cents an hour because that's the going rate for the instance type if another instance were to come available and get allocated to",
    "start": "589970",
    "end": "596480"
  },
  {
    "text": "customer number six market price would go down to eighteen cents an hour and everybody'd start paying eighteen cents",
    "start": "596480",
    "end": "601640"
  },
  {
    "text": "from there on so to help you make",
    "start": "601640",
    "end": "606650"
  },
  {
    "start": "605000",
    "end": "605000"
  },
  {
    "text": "intelligent decisions about how to come up with a bid for your spot instances we",
    "start": "606650",
    "end": "612140"
  },
  {
    "text": "released a tool a while back called spot bid advisor and actually this is on the website anybody can get to this right",
    "start": "612140",
    "end": "617930"
  },
  {
    "text": "now you don't even have to have an account to go see the spot that advisor and what it shows you is for a particular region in a particular OS",
    "start": "617930",
    "end": "625640"
  },
  {
    "text": "type you can see up at the top some of the selections we've made here to filter it shows you what the kind of percentage",
    "start": "625640",
    "end": "632270"
  },
  {
    "text": "chance of being outbid at a particular bid is it works on the idea of a bid strategy where you excuse me where you",
    "start": "632270",
    "end": "639740"
  },
  {
    "text": "did a portion will be on demand price so in this example here we said all right well we're gonna you know if the on demand price is a dollar we're gonna bid",
    "start": "639740",
    "end": "646340"
  },
  {
    "text": "$0.50 basically setting 50% of the on demand price and it shows you in columns",
    "start": "646340",
    "end": "652150"
  },
  {
    "text": "instance types that meet our filter criteria we set up there for the number of B CPUs in the amount of memory the",
    "start": "652150",
    "end": "658220"
  },
  {
    "text": "amount of savings you actually would have paid calculated over I believe the last week",
    "start": "658220",
    "end": "663330"
  },
  {
    "text": "and the frequency of being outbid over the month and we over the previous month in previous week basically showing you",
    "start": "663330",
    "end": "669700"
  },
  {
    "text": "how often over the last month what I have had some of the instances preempted and you can see for the types up top",
    "start": "669700",
    "end": "676180"
  },
  {
    "text": "that was fairly low for the types down below there's more contention for those resources so it'd be more frequent for",
    "start": "676180",
    "end": "682240"
  },
  {
    "text": "those if you needed those specific types you may want to choose a strategy where you go to 75% of all on-demand or kind",
    "start": "682240",
    "end": "687850"
  },
  {
    "text": "of whatever pricing makes sense for your organization so getting more into the",
    "start": "687850",
    "end": "693730"
  },
  {
    "start": "692000",
    "end": "692000"
  },
  {
    "text": "automation side of things as promised is spot fleet so spot fleet is a way to",
    "start": "693730",
    "end": "699730"
  },
  {
    "text": "build fleets of spot instances without having to put in a bunch of requests for individual types and individual zones so",
    "start": "699730",
    "end": "706990"
  },
  {
    "text": "the the idea of spot slate and this becomes really good for grid computing type flavor workloads is that you choose",
    "start": "706990",
    "end": "714820"
  },
  {
    "text": "a metric on the types of instances some easy built-in ones are the amount of memory the amount of CPU whatever your",
    "start": "714820",
    "end": "720820"
  },
  {
    "text": "particular workloads constrained on additionally in what's shown in this example here is you can come up with your own weighting that's may be set by",
    "start": "720820",
    "end": "727480"
  },
  {
    "text": "actually benchmarking the instance types with your workload you create a weighting for all of the instance types",
    "start": "727480",
    "end": "733089"
  },
  {
    "text": "or use memory storage whichever is most relevant and you skip the slide you",
    "start": "733089",
    "end": "739089"
  },
  {
    "text": "wanted and then you set a target so you can see in the second one down there the target capacity for that fleet has been",
    "start": "739089",
    "end": "745060"
  },
  {
    "text": "set for a hundred so it's going to try to come up with a hundred points of whatever metric you chose whether that",
    "start": "745060",
    "end": "751089"
  },
  {
    "text": "was memory CPUs or in this case a custom weighting of different instance types for their actual performance on the",
    "start": "751089",
    "end": "756160"
  },
  {
    "text": "actual workload and it will automatically schedule those resources so a newer feature we released for this",
    "start": "756160",
    "end": "763089"
  },
  {
    "text": "fairly recently is auto scaling for spot fleet so you can now also auto scale a spot fleet and tell it to scale up using",
    "start": "763089",
    "end": "769810"
  },
  {
    "text": "those same using those same metrics and constraints you gave it based on save",
    "start": "769810",
    "end": "776080"
  },
  {
    "text": "the size of a job cube or something like that right to be able to schedule more or less resources as time goes on",
    "start": "776080",
    "end": "783580"
  },
  {
    "text": "one other note I want to mention on spot fleet that I think makes it interesting it has two kind of scheduling algorithms one is designed for least cost it'll",
    "start": "783580",
    "end": "791470"
  },
  {
    "text": "favor whatever spot instance prices are cheapest relative to your waiting the",
    "start": "791470",
    "end": "797160"
  },
  {
    "text": "other is that it can try to distribute them across all about at all of the valid types so you might want to use the",
    "start": "797160",
    "end": "804270"
  },
  {
    "text": "least cost at least cost is your priority but if you're looking for more stability and predictability you can ask",
    "start": "804270",
    "end": "809640"
  },
  {
    "text": "it to schedule across a lighted a lot of different types of instances so that if there's the a spike in the market price",
    "start": "809640",
    "end": "815790"
  },
  {
    "text": "of a particular type of instance it'll have less of an effect on your total workload so getting into the topic of",
    "start": "815790",
    "end": "824910"
  },
  {
    "text": "the talk we're going to talk a little bit about clusters talk a little bit about clusters this code so we've talked",
    "start": "824910",
    "end": "831510"
  },
  {
    "text": "a lot about why each AWS is great for HPC and HDC type workloads but a lot of",
    "start": "831510",
    "end": "837510"
  },
  {
    "text": "that value depends on taking advantage of automation so when we talk about the",
    "start": "837510",
    "end": "842520"
  },
  {
    "text": "ability to resize your cluster well that means redeploying your cluster which means to really do that effectively you",
    "start": "842520",
    "end": "847680"
  },
  {
    "text": "need to be able to automate it see that you can do it rapidly right these aren't things that you probably want to be doing manually on a large scale you're",
    "start": "847680",
    "end": "853920"
  },
  {
    "text": "gonna be wasting a lot of effort so the good news is that is hopefully you know",
    "start": "853920",
    "end": "859410"
  },
  {
    "text": "after being here for a week right any of this is really designed for automation everything in AWS is an API everything",
    "start": "859410",
    "end": "865920"
  },
  {
    "text": "becomes available in an automated fashion to your most things become available in an automated fashion to you so now we're going to talk about some",
    "start": "865920",
    "end": "872340"
  },
  {
    "text": "different types of automation that are available you can take advantage of and I'm not gonna read the bullet points to you about where we're going but we'll",
    "start": "872340",
    "end": "880080"
  },
  {
    "text": "start from kind of the bottom more custom options where you're going to build your own automation using our api's up to the higher levels of",
    "start": "880080",
    "end": "886770"
  },
  {
    "text": "automation where maybe going all the way to the point where you want a managed service where you don't have to do anything you can just you know enter",
    "start": "886770",
    "end": "893190"
  },
  {
    "text": "your your data transforms and requirements so at the very bottom the",
    "start": "893190",
    "end": "899400"
  },
  {
    "text": "kind of most basic level as our api's almost all of our services have an API and the easiest way to access those is",
    "start": "899400",
    "end": "905370"
  },
  {
    "text": "through our set of SDKs popular languages like Python net Ruby in the",
    "start": "905370",
    "end": "910680"
  },
  {
    "text": "bottom right corner additionally you can take advantage of if you're a shell junkie you can take advantage of the CLI",
    "start": "910680",
    "end": "915810"
  },
  {
    "text": "tools and handle it that way and some plugins from some popular IDE tools kind",
    "start": "915810",
    "end": "921330"
  },
  {
    "text": "of in the bottom center there that you can take advantage of so heading up a level from using the API",
    "start": "921330",
    "end": "929100"
  },
  {
    "start": "925000",
    "end": "925000"
  },
  {
    "text": "is in the SDKs you've got Cod formation so cloud formation is a tool that lets",
    "start": "929100",
    "end": "934590"
  },
  {
    "text": "you it lets you create templates that describe AWS infrastructure that",
    "start": "934590",
    "end": "941280"
  },
  {
    "text": "CloudFormation will deploy on your behalf this is really where the idea of infrastructure as code came from and",
    "start": "941280",
    "end": "946290"
  },
  {
    "text": "where we use that term most frequently so with cloud formation you create a",
    "start": "946290",
    "end": "951660"
  },
  {
    "text": "template you describe resources and you tell it to create them the example I've gone on screen here is actually a test",
    "start": "951660",
    "end": "957990"
  },
  {
    "text": "one on the top layer and the bottom one is a little demo I put together that creates a enterprise networking underlay",
    "start": "957990",
    "end": "965130"
  },
  {
    "text": "of EPC some subnets to meet say maybe an organization's requirement for network topology and here's a little bit of a",
    "start": "965130",
    "end": "973470"
  },
  {
    "text": "look if you haven't messed with it of what a cloud formation template looks like actually fairly recently a little",
    "start": "973470",
    "end": "979950"
  },
  {
    "text": "bit before the conference we released an update the cloud formation that a lot of customers asked us for which was support",
    "start": "979950",
    "end": "986370"
  },
  {
    "text": "for gamal templates by default for years CloudFormation did JSON templates some users didn't like those prefer Gamal",
    "start": "986370",
    "end": "992640"
  },
  {
    "text": "wanted easier commenting so now we support amel we also have added support",
    "start": "992640",
    "end": "998010"
  },
  {
    "text": "for class cross stack references which make it easier to do like a common pattern I see with a lot of customers",
    "start": "998010",
    "end": "1004460"
  },
  {
    "text": "are saying well I want to do like in that last slide I want to create a base template that describes a mandatory",
    "start": "1004460",
    "end": "1010550"
  },
  {
    "text": "networking thing maybe central IT says the network needs to look like this and it needs to have these firewalls here and that sort of thing and then I want",
    "start": "1010550",
    "end": "1016550"
  },
  {
    "text": "to be able to create additional templates that I run on top of that that schedule other resources to sit on top of that network or you know kind of a",
    "start": "1016550",
    "end": "1023240"
  },
  {
    "text": "base stack cross deck references allow you to expose outputs from one stack and use them as inputs to the other so you",
    "start": "1023240",
    "end": "1029360"
  },
  {
    "text": "can effectively stack stack stack on top of one another to be able to do those kinds of architectures so next we'll",
    "start": "1029360",
    "end": "1039650"
  },
  {
    "text": "talk about EMR elastic MapReduce EMR is kind of unfortunately named because it's",
    "start": "1039650",
    "end": "1044990"
  },
  {
    "text": "not just MapReduce what it really is is it's it's the Hadoop ecosystem as a managed service so EMR has support for",
    "start": "1044990",
    "end": "1053870"
  },
  {
    "text": "tools like spark 2 like hive tools like pig that a lot of",
    "start": "1053870",
    "end": "1059990"
  },
  {
    "text": "you may be using for some of your data processing today monitoring tools like ganglia built in you can actually see",
    "start": "1059990",
    "end": "1065929"
  },
  {
    "text": "some of the options that are built here and this just quick demo cluster I threw together you get a good screenshot for me to show you what it looks like so if",
    "start": "1065929",
    "end": "1072380"
  },
  {
    "text": "your workload fits something that can be done in Hadoop EMR can be a great way take advantage of that without having to",
    "start": "1072380",
    "end": "1077779"
  },
  {
    "text": "actually do the hard part of managing a Hadoop cluster yourself so announced",
    "start": "1077779",
    "end": "1085190"
  },
  {
    "start": "1083000",
    "end": "1083000"
  },
  {
    "text": "earlier this week is AWS batch I'm not going to spend a lot of time on it but just really quickly to describe what it",
    "start": "1085190",
    "end": "1091610"
  },
  {
    "text": "does to you or does for you AWS batch lets you configure jobs and",
    "start": "1091610",
    "end": "1097429"
  },
  {
    "text": "job queues write your compute jobs it acts as the job scheduler and it also",
    "start": "1097429",
    "end": "1102559"
  },
  {
    "text": "provisions the infrastructure on your behalf so you can create jobs you can create multiple job queues you can set",
    "start": "1102559",
    "end": "1108590"
  },
  {
    "text": "priorities on those queues and you can send them out to execute on say ec2 spot",
    "start": "1108590",
    "end": "1113899"
  },
  {
    "text": "instances for an example so another tool",
    "start": "1113899",
    "end": "1119809"
  },
  {
    "text": "that's been around for a while this is actually a software open source software we offer is called CFM cluster CFN",
    "start": "1119809",
    "end": "1126500"
  },
  {
    "text": "cluster the CF n parts short for cloud formation right so what's EF n cluster does is it uses cloud formation to roll",
    "start": "1126500",
    "end": "1134179"
  },
  {
    "text": "out a couple of common types of cluster architectures from the command line it's",
    "start": "1134179",
    "end": "1139490"
  },
  {
    "text": "actually a Python tool that's available out of github and we're gonna demo this a little bit later I'll show you how",
    "start": "1139490",
    "end": "1144559"
  },
  {
    "text": "quick it is to throw together a basic cluster and schedule a basic job with CFM cluster another popular product that",
    "start": "1144559",
    "end": "1153679"
  },
  {
    "text": "we see a lot of customers use is all sis flights also supply tis a partner product that's available in marketplace",
    "start": "1153679",
    "end": "1160309"
  },
  {
    "text": "it is you launch effectively the master node for marketplace and then it goes",
    "start": "1160309",
    "end": "1165320"
  },
  {
    "text": "out and schedules the compute nodes part of why I think it's it's popular one that's it's offered at no cost",
    "start": "1165320",
    "end": "1171230"
  },
  {
    "text": "also Stowe's paid support options but they offer this for free to use out of the marketplace the other side is it",
    "start": "1171230",
    "end": "1177980"
  },
  {
    "text": "comes pre-loaded with a lot of popular scientific applications that users enjoy not having to go install them themselves",
    "start": "1177980",
    "end": "1183620"
  },
  {
    "text": "so that may be an option for you as well and finally as we get to the top",
    "start": "1183620",
    "end": "1189840"
  },
  {
    "text": "in our in our partner ecosystem there's a lot of great HPC partners some of the",
    "start": "1189840",
    "end": "1195630"
  },
  {
    "text": "ones on the slide here offer software products to help you do HPC and HDC type",
    "start": "1195630",
    "end": "1200640"
  },
  {
    "text": "workloads on AWS some of them are actually managed partners that run on AWS but they offer a more managed",
    "start": "1200640",
    "end": "1206940"
  },
  {
    "text": "experience where you don't have to run the infrastructure they'll handle it for you and with that I'm going to get out",
    "start": "1206940",
    "end": "1214140"
  },
  {
    "text": "of the way and let my co-presenter talk about some of the cool work they're doing so I'll talk about some of the",
    "start": "1214140",
    "end": "1229230"
  },
  {
    "text": "services that we have used from the list that Nate and has discussed before at",
    "start": "1229230",
    "end": "1234540"
  },
  {
    "text": "the Fermi National Accelerator Laboratory what we do we run scientific workflows for high energy physics the",
    "start": "1234540",
    "end": "1241920"
  },
  {
    "text": "laboratory is the leading particle physics laboratory in in the US and it's",
    "start": "1241920",
    "end": "1247650"
  },
  {
    "text": "funded by the Department of Energy we have about a hundred petabytes of data on tape and our computing is following",
    "start": "1247650",
    "end": "1257550"
  },
  {
    "text": "the paradigm of house rapid computing that Natan was describing before and essentially we had two types of",
    "start": "1257550",
    "end": "1263850"
  },
  {
    "text": "application one is the data analysis where we have data in files and an",
    "start": "1263850",
    "end": "1269790"
  },
  {
    "text": "application runs for five to twenty four hours and produces something else or we",
    "start": "1269790",
    "end": "1275010"
  },
  {
    "text": "have Monte Carlo generation so we simulate particles that come out of our detectors and produce some some output",
    "start": "1275010",
    "end": "1281880"
  },
  {
    "text": "and so those also run tight to 24 hours typically we have strong collaborations",
    "start": "1281880",
    "end": "1287640"
  },
  {
    "text": "with international laboratories such as a CERN and the Large Hadron Collider was in the spotlight in 2012 you might",
    "start": "1287640",
    "end": "1295290"
  },
  {
    "text": "remember the discovery of the Higgs boson and in 2013 we got a Nobel Prize for that and Fermilab is the leading",
    "start": "1295290",
    "end": "1302820"
  },
  {
    "text": "institution for one of the two experiments running there one of actually for running there and if the",
    "start": "1302820",
    "end": "1308910"
  },
  {
    "text": "compact muon solenoid or CMS why are we",
    "start": "1308910",
    "end": "1314010"
  },
  {
    "text": "evolving our infrastructure well if you look at the top left",
    "start": "1314010",
    "end": "1319570"
  },
  {
    "text": "you have a measure or you know a visual representation of the performance of the",
    "start": "1319570",
    "end": "1325509"
  },
  {
    "text": "LHC the Large Hadron Collider over the years and while we are in this well",
    "start": "1325509",
    "end": "1334840"
  },
  {
    "text": "while we are in the of course 2015 to 2019 run and we foresee to gather about",
    "start": "1334840",
    "end": "1341619"
  },
  {
    "text": "a hundred and sixty petabytes of data well when we go ten years from now we",
    "start": "1341619",
    "end": "1347320"
  },
  {
    "text": "were asked to design a system to ingest the two exabyte of data per year which",
    "start": "1347320",
    "end": "1352509"
  },
  {
    "text": "to me is very scary and so how do we do this right we have to consider capacity",
    "start": "1352509",
    "end": "1358779"
  },
  {
    "text": "cost and elasticity and of course when we then start to analyze this to tepa to exabyte of data that we gather every",
    "start": "1358779",
    "end": "1365619"
  },
  {
    "text": "year the analysis will not be steady state it will follow peaks and valleys",
    "start": "1365619",
    "end": "1372460"
  },
  {
    "text": "like you see on the bottom right that will follow holidays conference",
    "start": "1372460",
    "end": "1378639"
  },
  {
    "text": "schedules etc etc so where do we go and of course the top right tells you that",
    "start": "1378639",
    "end": "1384099"
  },
  {
    "text": "in order to do this cost effectively the cloud may actually be the right solution for us and in fact the leaders of our",
    "start": "1384099",
    "end": "1392470"
  },
  {
    "text": "field this is what they recommend for us that they recommend in fact to to start",
    "start": "1392470",
    "end": "1397869"
  },
  {
    "text": "partnerships with industries and this is what we started to do with with Amazon and we started to work on a project",
    "start": "1397869",
    "end": "1406929"
  },
  {
    "text": "called the high energy physics cloud or head cloud facility which is a portal to",
    "start": "1406929",
    "end": "1413080"
  },
  {
    "text": "a diverse set of the backend resources that allow us to scale to the needs of",
    "start": "1413080",
    "end": "1420369"
  },
  {
    "text": "the community for pretty much all the workflows that that are important and of",
    "start": "1420369",
    "end": "1427840"
  },
  {
    "start": "1427000",
    "end": "1427000"
  },
  {
    "text": "course we have our architecture but what's the basic idea is that we want to add resources from cloud",
    "start": "1427840",
    "end": "1434639"
  },
  {
    "text": "high-performance computers grids which are statically federated clusters",
    "start": "1434639",
    "end": "1440890"
  },
  {
    "text": "we can share resources are also locker resources into a central pool of",
    "start": "1440890",
    "end": "1446110"
  },
  {
    "text": "resources and as I mentioned we are starting from Amazon the leader in the",
    "start": "1446110",
    "end": "1452230"
  },
  {
    "text": "market to do this but of course when you start then doing the real work then you",
    "start": "1452230",
    "end": "1457990"
  },
  {
    "text": "realize that there are quite a few integration challenges and I mentioned a",
    "start": "1457990",
    "end": "1463420"
  },
  {
    "text": "few here and in my talk I will talk about these ones in more detail to give",
    "start": "1463420",
    "end": "1468610"
  },
  {
    "text": "you an idea what we had to face to integrate our scientific workflows and",
    "start": "1468610",
    "end": "1474280"
  },
  {
    "text": "the first one is how do we integrate provisioning and as I mentioned we want to create an overlay batch system so you",
    "start": "1474280",
    "end": "1480550"
  },
  {
    "text": "see our user on the top left that submits jobs to a scheduler and and then",
    "start": "1480550",
    "end": "1486070"
  },
  {
    "text": "on the bottom on the top left there is what we call a front-end let me see if I",
    "start": "1486070",
    "end": "1494110"
  },
  {
    "text": "can use a pointer here so you see a",
    "start": "1494110",
    "end": "1500380"
  },
  {
    "text": "front-end here that looks at the number of jobs that are being submitted and and",
    "start": "1500380",
    "end": "1505810"
  },
  {
    "text": "then sorry this is not yeah and tells",
    "start": "1505810",
    "end": "1512380"
  },
  {
    "text": "this component which is also based on on Condor which is a best system to do the",
    "start": "1512380",
    "end": "1518620"
  },
  {
    "text": "provisioning of resources based on the number that the front-end the scene of",
    "start": "1518620",
    "end": "1524500"
  },
  {
    "text": "jobs that have been submitted here and of course resources are provisioned that great sites the local resources high",
    "start": "1524500",
    "end": "1530650"
  },
  {
    "text": "performance computer data of course also clouds and what is submitted to the",
    "start": "1530650",
    "end": "1535780"
  },
  {
    "text": "cloud is a request to instantiate a virtual machine with a piece of Condor",
    "start": "1535780",
    "end": "1541330"
  },
  {
    "text": "that will in fact report back to a central manager on the top right and",
    "start": "1541330",
    "end": "1547530"
  },
  {
    "text": "more and more resources will be accumulated there and then with a match",
    "start": "1547530",
    "end": "1553060"
  },
  {
    "text": "making algorithm the scheduling of the jobs to resources will be negotiated of",
    "start": "1553060",
    "end": "1561940"
  },
  {
    "text": "course you need to do this containing costs and in this example we ran about 3",
    "start": "1561940",
    "end": "1568210"
  },
  {
    "text": "million jobs for the CMS use case when you think about containing cost",
    "start": "1568210",
    "end": "1574140"
  },
  {
    "text": "Amazon provides a great way of doing that through the spot market that Natan was discussing before but you need to be",
    "start": "1574140",
    "end": "1580800"
  },
  {
    "text": "sure that your workflows and your applications can actually sustain an",
    "start": "1580800",
    "end": "1586380"
  },
  {
    "text": "interaction of service so a preemption in our case the preemption was not too",
    "start": "1586380",
    "end": "1591420"
  },
  {
    "text": "bad we had two point five million jobs that were never preempted but still you know four hundred thousand where and so the",
    "start": "1591420",
    "end": "1598350"
  },
  {
    "text": "question is what algorithm or what strategy do you use in your big team to",
    "start": "1598350",
    "end": "1605790"
  },
  {
    "text": "make sure that you minimize preemption and you optimize cost and so we at the",
    "start": "1605790",
    "end": "1612480"
  },
  {
    "text": "time we didn't have the spot adviser the spot bill advisor and so what we did was",
    "start": "1612480",
    "end": "1619860"
  },
  {
    "text": "to in fact select on the bottom left a set of possible strategies from bid the",
    "start": "1619860",
    "end": "1625920"
  },
  {
    "text": "minimum storytelling ever seen to bid on demand price to bid a fraction of",
    "start": "1625920",
    "end": "1631620"
  },
  {
    "text": "on-demand rise to other more advanced and dynamic bidding strategies and then",
    "start": "1631620",
    "end": "1639570"
  },
  {
    "text": "we took the price history that Amazon",
    "start": "1639570",
    "end": "1644820"
  },
  {
    "text": "provides and we ran Monte Carlo analysis ordered and so we say we have a five",
    "start": "1644820",
    "end": "1650130"
  },
  {
    "text": "hours job suppose that we want to run this in a week can I actually find a",
    "start": "1650130",
    "end": "1656130"
  },
  {
    "text": "window of time of five hours where my job finishes and doesn't need to restart all over again",
    "start": "1656130",
    "end": "1661620"
  },
  {
    "text": "what is the bidding strategy that optimizes my chance of success and",
    "start": "1661620",
    "end": "1668610"
  },
  {
    "text": "minimizes my cost and we did old analysis and in the end for us it turns",
    "start": "1668610",
    "end": "1674070"
  },
  {
    "text": "out that bidding at 25 percent of on-demand is the best solution rather",
    "start": "1674070",
    "end": "1679860"
  },
  {
    "text": "than even being more adaptive or dynamic with the bidding strategy and then of",
    "start": "1679860",
    "end": "1685890"
  },
  {
    "start": "1685000",
    "end": "1685000"
  },
  {
    "text": "course you have to think okay but I'm used to running at lotta resources or at",
    "start": "1685890",
    "end": "1691350"
  },
  {
    "text": "my my clusters friends at universities and other laboratories but if the",
    "start": "1691350",
    "end": "1697440"
  },
  {
    "text": "performance of the application really the same and so what we did was running",
    "start": "1697440",
    "end": "1702919"
  },
  {
    "text": "benchmarks on the various types of machines to try to select a number of",
    "start": "1702919",
    "end": "1709309"
  },
  {
    "text": "machine types that in fact were similar in performance to the ones that we were used to and on the Left we ran a",
    "start": "1709309",
    "end": "1719629"
  },
  {
    "text": "benchmark that simulated particles top and and I've talked articles which is very similar to what then we would be",
    "start": "1719629",
    "end": "1726230"
  },
  {
    "text": "doing and on the right we were doing some other type of benchmarks and in the",
    "start": "1726230",
    "end": "1733220"
  },
  {
    "text": "end the there is a range of types of",
    "start": "1733220",
    "end": "1739249"
  },
  {
    "text": "resources that meet our needs and this is very important because in order to",
    "start": "1739249",
    "end": "1746179"
  },
  {
    "text": "reach high scale you hit you have to bid on all different markets so if you if we",
    "start": "1746179",
    "end": "1752960"
  },
  {
    "text": "found that only a few resource types were actually performant then we",
    "start": "1752960",
    "end": "1758690"
  },
  {
    "text": "wouldn't have been able to reach the scale of 60,000 cores like we did later on and of course then we did also the",
    "start": "1758690",
    "end": "1766899"
  },
  {
    "text": "benchmarks of data ingress and egress through forestry we in fact later on we",
    "start": "1766899",
    "end": "1773899"
  },
  {
    "text": "reached 12 gigabit per second of connection to to our cloud so then we",
    "start": "1773899",
    "end": "1782749"
  },
  {
    "text": "ran these three million jobs and we could do a histogram of the time that",
    "start": "1782749",
    "end": "1792379"
  },
  {
    "text": "the application took to run and we did that on a resource type by a resource",
    "start": "1792379",
    "end": "1798440"
  },
  {
    "text": "type basis and so the peak there is about four to five hours and this is a",
    "start": "1798440",
    "end": "1805580"
  },
  {
    "text": "very good plot that tells us that the performance of the resource types at at",
    "start": "1805580",
    "end": "1811100"
  },
  {
    "text": "Amazon you know is consistent so we don't see anything for example on the on the right right so all of our",
    "start": "1811100",
    "end": "1817279"
  },
  {
    "text": "applications more or less finish within four hours a summer actually faster they finish before and you know this is a",
    "start": "1817279",
    "end": "1824419"
  },
  {
    "text": "great consistency that is offered to us by Amazon now the width of the distribution is has more to do with the",
    "start": "1824419",
    "end": "1833590"
  },
  {
    "text": "the fact that these are Montecarlo applications and so each one start with a different seed and produce different",
    "start": "1833590",
    "end": "1839290"
  },
  {
    "text": "results rather than the variation in time of performance of the actual",
    "start": "1839290",
    "end": "1846100"
  },
  {
    "text": "instances although the two attacks are convoluted but you know this is gave us",
    "start": "1846100",
    "end": "1853210"
  },
  {
    "text": "a lot of confidence that this is a good direction for us now of course we need to be able to be secure on on the cloud",
    "start": "1853210",
    "end": "1861850"
  },
  {
    "text": "and we use the same baseline configuration that we use for our onsite",
    "start": "1861850",
    "end": "1868510"
  },
  {
    "text": "resources and so we've developed a mechanism to take what we call a worker node configuration and then package it",
    "start": "1868510",
    "end": "1878020"
  },
  {
    "text": "in an HTML visualization format and send",
    "start": "1878020",
    "end": "1883600"
  },
  {
    "text": "it to Amazon so that the same security controls that we have locally also apply on the cloud and this is now automated",
    "start": "1883600",
    "end": "1890740"
  },
  {
    "text": "so that if we change if the baseline we can actually very quickly import a new",
    "start": "1890740",
    "end": "1896010"
  },
  {
    "text": "golden image to Amazon the other thing that is very important to consider is",
    "start": "1896010",
    "end": "1902650"
  },
  {
    "text": "that we run hundreds of jobs and in fact",
    "start": "1902650",
    "end": "1911170"
  },
  {
    "text": "thousands of jobs on the cloud and these do not run in a vacuum they depend on",
    "start": "1911170",
    "end": "1916270"
  },
  {
    "text": "other services in order to run and one of the services that we depend on is in",
    "start": "1916270",
    "end": "1921970"
  },
  {
    "text": "fact data distribution for software and for calibration constants which we",
    "start": "1921970",
    "end": "1927700"
  },
  {
    "text": "implement using a web data caching system based on squid so the idea is",
    "start": "1927700",
    "end": "1934930"
  },
  {
    "text": "that we have the software repositories at Fermilab Brookhaven other",
    "start": "1934930",
    "end": "1940120"
  },
  {
    "text": "laboratories around the country and when the application starts on the grid or in",
    "start": "1940120",
    "end": "1945640"
  },
  {
    "text": "fact on the cloud it talks to a local squid server that then redirects to to",
    "start": "1945640",
    "end": "1951190"
  },
  {
    "text": "Fermilab - to get software and then the software is cached the servers at the",
    "start": "1951190",
    "end": "1956350"
  },
  {
    "text": "suite servers and then the machines so that then the ramp-up is is very quick",
    "start": "1956350",
    "end": "1961720"
  },
  {
    "text": "and we have very good solid with this however when you run 60,000",
    "start": "1961720",
    "end": "1967760"
  },
  {
    "text": "jobs at the same time you need about 60 HT machines to run the switch servers in",
    "start": "1967760",
    "end": "1975410"
  },
  {
    "text": "our case and you don't want to run these 50 machines 24 by 7 if you only run a",
    "start": "1975410",
    "end": "1982340"
  },
  {
    "text": "few jobs you ramp down and then you run rampant and then you run down so the way",
    "start": "1982340",
    "end": "1988130"
  },
  {
    "text": "we did this was using auto scaling and deploying the whole infrastructure with",
    "start": "1988130",
    "end": "1993950"
  },
  {
    "text": "cloud formation which is what Nathan was was discussing before and so what we did we had suite servers that were part of",
    "start": "1993950",
    "end": "2002260"
  },
  {
    "text": "an auto scaling group of course we had them in different availability zones and the auto scaling group was ramping up",
    "start": "2002260",
    "end": "2010000"
  },
  {
    "text": "the number of instances of squids depending on metrics that were defined in the cloud watch and in this case for",
    "start": "2010000",
    "end": "2018310"
  },
  {
    "text": "example we were ramping up when the aggregate amount of the network traffic",
    "start": "2018310",
    "end": "2023530"
  },
  {
    "text": "from from the switch servers was above a certain threshold so that as we were",
    "start": "2023530",
    "end": "2029470"
  },
  {
    "text": "initiating more more jobs we could have more and more speed instantiated however the jobs were always talking to",
    "start": "2029470",
    "end": "2038230"
  },
  {
    "text": "the same elastic load balancer to talk to the squid backends and in fact they",
    "start": "2038230",
    "end": "2044440"
  },
  {
    "text": "were talking to it through route 53 what the jobs had to do we are essentially",
    "start": "2044440",
    "end": "2049929"
  },
  {
    "text": "knowing what availability zone they were in and then using route 53 they would",
    "start": "2049930",
    "end": "2054940"
  },
  {
    "text": "talk to the load balancer into one of the speed servers depending on how many we had now of course we run this jobs",
    "start": "2054940",
    "end": "2063429"
  },
  {
    "start": "2061000",
    "end": "2061000"
  },
  {
    "text": "but we need the ability of moving the data so as I said we are expecting to",
    "start": "2063430",
    "end": "2068500"
  },
  {
    "text": "have 160 petabytes in five years and then exabytes in ten years we use the",
    "start": "2068500",
    "end": "2075100"
  },
  {
    "text": "energy science network which connects the Fermilab at a hundred and thirty gigabits to the rest of the network it's",
    "start": "2075100",
    "end": "2081929"
  },
  {
    "text": "it's a network for science for non classified research and",
    "start": "2081930",
    "end": "2088589"
  },
  {
    "text": "and it's funded by the Department of Energy and yes net has three peering",
    "start": "2088589",
    "end": "2095039"
  },
  {
    "text": "points with with Amazon and in fact when we started this in 2014 one was the",
    "start": "2095039",
    "end": "2101789"
  },
  {
    "text": "recently upgraded to a hundred gigabit connection and this is why we could then",
    "start": "2101789",
    "end": "2106799"
  },
  {
    "text": "easily get 12 plus gigabit per second of data ingress and egress and to keep this",
    "start": "2106799",
    "end": "2113759"
  },
  {
    "text": "cost effective for us Amazon has introduced the concept of a",
    "start": "2113759",
    "end": "2119640"
  },
  {
    "text": "data egress waiver so Amazon of course charges for for data grass because they",
    "start": "2119640",
    "end": "2125460"
  },
  {
    "text": "pay internet providers and of course on how the cost needs to be recuperated so",
    "start": "2125460",
    "end": "2130650"
  },
  {
    "text": "in our case the network is paid for by the Department of Energy so Amazon",
    "start": "2130650",
    "end": "2136469"
  },
  {
    "text": "doesn't need to make a profit on us and so they have decided to pass the discount on us and give us up to a 15%",
    "start": "2136469",
    "end": "2145890"
  },
  {
    "text": "of discount where the transfer charges are at or below the 15% of the total",
    "start": "2145890",
    "end": "2151650"
  },
  {
    "text": "cost and this really makes makes it cost-effective for us and so when we",
    "start": "2151650",
    "end": "2160049"
  },
  {
    "text": "think of data movement and data storage then we can employ a couple of",
    "start": "2160049",
    "end": "2165839"
  },
  {
    "text": "strategies to actually move the data back one strategy is on the top right",
    "start": "2165839",
    "end": "2172440"
  },
  {
    "text": "cartoon and is well you had jobs that run they analyze delete or in this case",
    "start": "2172440",
    "end": "2178529"
  },
  {
    "text": "they are Monte Carlo so they produce some data and then they want to transfer the data back to to local storage",
    "start": "2178529",
    "end": "2183619"
  },
  {
    "text": "Fermilab has to study a responsibility of the data so we must transfer the data back now there is only so much that the",
    "start": "2183619",
    "end": "2192539"
  },
  {
    "text": "storage elements at Fermilab can take so if we run hundreds of thousands or you",
    "start": "2192539",
    "end": "2198390"
  },
  {
    "text": "know tens of thousands of nodes some will probably have to wait in queue until all the data has been transferred",
    "start": "2198390",
    "end": "2205319"
  },
  {
    "text": "for the other jobs so what happens there you have virtual machines that are in a",
    "start": "2205319",
    "end": "2210509"
  },
  {
    "text": "queue to transfer data and you pay for the virtual machines on the other hand on the bottom right you have a different",
    "start": "2210509",
    "end": "2217799"
  },
  {
    "text": "strategy you have a lot of of jobs that are ready to store the data",
    "start": "2217799",
    "end": "2224299"
  },
  {
    "text": "you can use the highly parallel architecture of a street to store the",
    "start": "2224299",
    "end": "2229380"
  },
  {
    "text": "data all at the same time and then later on asynchronously you can transfer the",
    "start": "2229380",
    "end": "2235319"
  },
  {
    "text": "data from s3 all the way back tuning your bandwidth to whatever you have now",
    "start": "2235319",
    "end": "2240450"
  },
  {
    "text": "in this case though you pay for the data in a stream right so there is a sweet",
    "start": "2240450",
    "end": "2245730"
  },
  {
    "text": "spot that depends actually on the number of jobs and the bandwidth that you have between s3 and your site and in fact for",
    "start": "2245730",
    "end": "2253349"
  },
  {
    "text": "one of our customers CMS we did the top right and for another one a nutrient",
    "start": "2253349",
    "end": "2258630"
  },
  {
    "text": "experiment called Nova with in the bottom right and then of course you need",
    "start": "2258630",
    "end": "2264450"
  },
  {
    "text": "to monitor we have integrated our monitoring solutions that our",
    "start": "2264450",
    "end": "2271819"
  },
  {
    "text": "experimenters are used to with with the Amazon infrastructure so that we have",
    "start": "2271819",
    "end": "2278210"
  },
  {
    "text": "systems based on graph Anna that can show what's going on on on the overall",
    "start": "2278210",
    "end": "2284670"
  },
  {
    "text": "system that we have grids cloud and HPC and and then we have accounting that",
    "start": "2284670",
    "end": "2289799"
  },
  {
    "text": "also gives us an idea of the cost of the various instances that we have now that",
    "start": "2289799",
    "end": "2296520"
  },
  {
    "text": "use cases that we had I mentioned to we we had three use cases so on the top",
    "start": "2296520",
    "end": "2302069"
  },
  {
    "text": "left we had what we call the nutrient experiments studies one of the particles",
    "start": "2302069",
    "end": "2307619"
  },
  {
    "text": "that we study a very elusive particle called neutrino which interacts very",
    "start": "2307619",
    "end": "2313200"
  },
  {
    "text": "rarely with matter on the bottom we had CMS that I I talked about a lot",
    "start": "2313200",
    "end": "2318809"
  },
  {
    "text": "this was the Monte Carlo simulation of events and then we had another one now",
    "start": "2318809",
    "end": "2324150"
  },
  {
    "text": "this was also this is an experiment that is associated with LIGO that recently",
    "start": "2324150",
    "end": "2329760"
  },
  {
    "text": "discovered the gravitational waves you probably have heard in the in the news",
    "start": "2329760",
    "end": "2335640"
  },
  {
    "text": "and this is again another use case that tries to identify a",
    "start": "2335640",
    "end": "2343930"
  },
  {
    "text": "a signal from the sky and correlate the signal from the gravitational wave",
    "start": "2343930",
    "end": "2350380"
  },
  {
    "text": "detectors so that then everybody can observe that point of the sky that",
    "start": "2350380",
    "end": "2357490"
  },
  {
    "text": "region of the sky and try to correlate the signal from the gravitational waves with the signals from the",
    "start": "2357490",
    "end": "2363310"
  },
  {
    "text": "electromagnetic signature that we have from the supernova or whatever the event was now I'll be talking about the bottom",
    "start": "2363310",
    "end": "2371170"
  },
  {
    "text": "one which is the one where we achieved the highest scale and this is a picture",
    "start": "2371170",
    "end": "2376780"
  },
  {
    "text": "of the detector this is at CERN in in Geneva and well you can see the scale",
    "start": "2376780",
    "end": "2382240"
  },
  {
    "text": "when we do simulation all of this we need to simulate particles that ran through the the detector and how would",
    "start": "2382240",
    "end": "2392950"
  },
  {
    "text": "the detector see this particle and you have some visual representation some event display so-called in the the",
    "start": "2392950",
    "end": "2400270"
  },
  {
    "text": "bottom I said we we run about three million jobs for a total of 50 million",
    "start": "2400270",
    "end": "2406090"
  },
  {
    "text": "hours and the throughput or what we call that the bed put which includes the",
    "start": "2406090",
    "end": "2411850"
  },
  {
    "text": "preemption was you know maybe less than 10 percent so lines then 10 percent of",
    "start": "2411850",
    "end": "2418030"
  },
  {
    "text": "our jobs were in the end of our total computation was affected by the preemption which again was due to all",
    "start": "2418030",
    "end": "2425500"
  },
  {
    "text": "the studies we had done on on the bidding strategies etc data and this is",
    "start": "2425500",
    "end": "2432370"
  },
  {
    "text": "you know that if you want a victory plot it shows that after we started our",
    "start": "2432370",
    "end": "2437950"
  },
  {
    "text": "initial phases of tests we could go a ramp up to in fact about 58,000 slots",
    "start": "2437950",
    "end": "2445030"
  },
  {
    "text": "and on the bottom you see that we instantiated 10,000 VMs now all the",
    "start": "2445030",
    "end": "2450820"
  },
  {
    "text": "colors are the different resource types that we have used in Amazon and the fact",
    "start": "2450820",
    "end": "2457480"
  },
  {
    "text": "that we were really building on all these different markets was the key for us to be able to achieve that scale",
    "start": "2457480",
    "end": "2463600"
  },
  {
    "text": "without being able to bid on all of the markets you wouldn't have being able to",
    "start": "2463600",
    "end": "2470140"
  },
  {
    "text": "to achieve 60,000 course and and then of course you can start looking at these trends a bit more in",
    "start": "2470140",
    "end": "2476890"
  },
  {
    "text": "detail you know if you look from February first we were a bit more more stable and we were bidding always at the",
    "start": "2476890",
    "end": "2484450"
  },
  {
    "text": "same amount and so the peaks and valleys are really reaction of the market to to",
    "start": "2484450",
    "end": "2494110"
  },
  {
    "text": "the bidding so you see that there are trends day after day of different types of it",
    "start": "2494110",
    "end": "2501940"
  },
  {
    "text": "did not happen in in the spot market and we are affected bit since we always be",
    "start": "2501940",
    "end": "2507370"
  },
  {
    "text": "the same amount we will have more resources or less resources depending on the on the market and if you look at the",
    "start": "2507370",
    "end": "2513640"
  },
  {
    "text": "February 7 it was the weekend around that time you see that it becomes lighter so probably the big companies or",
    "start": "2513640",
    "end": "2521710"
  },
  {
    "text": "you know the big financial companies were not bidding that much on the spot market at that point or at least this is",
    "start": "2521710",
    "end": "2528400"
  },
  {
    "text": "our interpretation now the impact that this had on our community was huge so we",
    "start": "2528400",
    "end": "2535390"
  },
  {
    "text": "could see an increase of 25 percent of the global capacity of CMS computing and",
    "start": "2535390",
    "end": "2542140"
  },
  {
    "text": "as you can see on the left by running on Amazon and if you look at the number of jobs that were actually done it's a huge",
    "start": "2542140",
    "end": "2549010"
  },
  {
    "text": "peak on top of all the resources that we actually have which is you know of the order of 200,000 cores now costs so we",
    "start": "2549010",
    "end": "2557800"
  },
  {
    "start": "2556000",
    "end": "2556000"
  },
  {
    "text": "did a cost comparison between on premises and the cloud and you know you",
    "start": "2557800",
    "end": "2563080"
  },
  {
    "text": "see the pie chart is our breakdown of costs and this includes of course the",
    "start": "2563080",
    "end": "2569320"
  },
  {
    "text": "cost of the node with some amortization power network the salaries which is a big part and you know when we sum it up",
    "start": "2569320",
    "end": "2576340"
  },
  {
    "text": "we get to about one cent or slightly less per hour however this assumes a hundred percent",
    "start": "2576340",
    "end": "2584560"
  },
  {
    "text": "utilization which is never the case because when you have IOU don't use the resource a hundred percent you have",
    "start": "2584560",
    "end": "2590560"
  },
  {
    "text": "maybe a 90 percent 85 percent of the utilization which is what Natan was talking about before so if we compare",
    "start": "2590560",
    "end": "2597850"
  },
  {
    "text": "this cost with what we got on Amazon which was one point four cents per and in the case of Nova which had a",
    "start": "2597850",
    "end": "2605200"
  },
  {
    "text": "larger memory footprint so they had higher higher virtual machine",
    "start": "2605200",
    "end": "2610510"
  },
  {
    "text": "requirements it was three cents but so if we compare the one sands and and",
    "start": "2610510",
    "end": "2616330"
  },
  {
    "text": "consider that the utilization in fact maybe ninety percent that is very very close to the one point four cents that",
    "start": "2616330",
    "end": "2622600"
  },
  {
    "text": "we could actually achieve the benchmark showed that in fact the performance is",
    "start": "2622600",
    "end": "2627670"
  },
  {
    "text": "essentially the same so our ability to provision 60,000 cores in maybe one hour",
    "start": "2627670",
    "end": "2632980"
  },
  {
    "text": "is at a cost that is essentially the same is really key for us to start the",
    "start": "2632980",
    "end": "2639130"
  },
  {
    "text": "bursting on on resources such as the cloud and fulfill the needs of our",
    "start": "2639130",
    "end": "2645730"
  },
  {
    "text": "community and of course I mean we didn't do this in an isolation with thanked",
    "start": "2645730",
    "end": "2651820"
  },
  {
    "text": "Amazon and all sort of other stakeholders and collaborators here so",
    "start": "2651820",
    "end": "2659050"
  },
  {
    "start": "2658000",
    "end": "2658000"
  },
  {
    "text": "with this I terminate my part and I pass it back to Nathan so really really brief",
    "start": "2659050",
    "end": "2675520"
  },
  {
    "text": "demo we're gonna run through here this is so we're gonna demo or I'm gonna demo the CFM cluster tool that we talked",
    "start": "2675520",
    "end": "2684580"
  },
  {
    "text": "about earlier like I said there's a lot I think this one is one that was interesting to me this is going to be a",
    "start": "2684580",
    "end": "2693010"
  },
  {
    "text": "what I like to call a cooking show demo so the whole deployment that I'm gonna show here in the video I'll start here",
    "start": "2693010",
    "end": "2699100"
  },
  {
    "text": "just a second was about 22 minutes I think grand total to actually being able",
    "start": "2699100",
    "end": "2704800"
  },
  {
    "text": "to kind of deploy deploy a small cluster and do a hello world with all the automation starting from scratch including installing the software tour",
    "start": "2704800",
    "end": "2711070"
  },
  {
    "text": "at the whole kind of run through it what I've done is condense that down into about a four and a half minute speed run",
    "start": "2711070",
    "end": "2716130"
  },
  {
    "text": "so no I don't actually type this fast but we'll go ahead and run it and I'll",
    "start": "2716130",
    "end": "2721240"
  },
  {
    "text": "narrate for you so this is a Python tool we're gonna start with a clean Python environment and install it from scratch",
    "start": "2721240",
    "end": "2727060"
  },
  {
    "text": "and I'm going to pick the right version of Python again",
    "start": "2727060",
    "end": "2732770"
  },
  {
    "text": "you can insult your pip you can install it through easy install for folks that work with Python those are pretty",
    "start": "2732770",
    "end": "2738230"
  },
  {
    "text": "standard tools to install Python packages it's also available on github I'm Mario W it's labs github it's going",
    "start": "2738230",
    "end": "2744500"
  },
  {
    "text": "to install some packages and some dependencies and we're going to run a quick built-in configure I skipped over",
    "start": "2744500",
    "end": "2751250"
  },
  {
    "text": "access key and secret key because those are already in my environmental variables I click the region picked a",
    "start": "2751250",
    "end": "2756920"
  },
  {
    "text": "SSH key picked a V PC that's actually just the default default B PC in my account",
    "start": "2756920",
    "end": "2762290"
  },
  {
    "text": "pick a subnet I just randomly picked them on the floor and the configuration",
    "start": "2762290",
    "end": "2767510"
  },
  {
    "text": "parts done so we'll do is we'll go edit that config file when you run that configuration through the tool it actually puts it a fake file on your",
    "start": "2767510",
    "end": "2773570"
  },
  {
    "text": "home directory and we can look at some of the options that are built into that configuration file V PC settings etc the",
    "start": "2773570",
    "end": "2782920"
  },
  {
    "text": "configuration is an easy way to get started you can go very deep in the configuration file if you want to specify details and we ship with the",
    "start": "2782920",
    "end": "2790730"
  },
  {
    "text": "package in the longest URL ever a an",
    "start": "2790730",
    "end": "2798109"
  },
  {
    "text": "example configuration file that shows you what a lot of the options are these are also available in the documentation",
    "start": "2798109",
    "end": "2803240"
  },
  {
    "text": "so you can see things R you can like specify some of the security group rules you may want or other security parameters for the cluster and now we'll",
    "start": "2803240",
    "end": "2810770"
  },
  {
    "text": "go back and we'll hit create so I mentioned before CFM cluster is kind of",
    "start": "2810770",
    "end": "2816170"
  },
  {
    "text": "named for CFM as sometimes our abbreviation for cloud formation cloud formation creates resources based on",
    "start": "2816170",
    "end": "2823040"
  },
  {
    "text": "templates on your behalf CF n cluster uses a cloud formation template but it also uses some extra services around",
    "start": "2823040",
    "end": "2828470"
  },
  {
    "text": "that to help monitor it and deploy it and it uses this command line tool so",
    "start": "2828470",
    "end": "2834619"
  },
  {
    "text": "that you don't have to take so CloudFormation you can enter parameters on a template you can parameterize things like how many nodes you want etc",
    "start": "2834619",
    "end": "2841990"
  },
  {
    "text": "this has a lot of parameters so what's really been done here is to schedule some of the other things outside the",
    "start": "2841990",
    "end": "2847160"
  },
  {
    "text": "template and to schedule some of the parameters on your path we're using the Python script that wraps around it that",
    "start": "2847160",
    "end": "2852440"
  },
  {
    "text": "makes that a little bit easier to get started so you don't have to mess with the raw CloudFormation script and it's",
    "start": "2852440",
    "end": "2858440"
  },
  {
    "text": "going to go ahead and run so this portion to give you a real sense of time here took probably about 15 minutes or",
    "start": "2858440",
    "end": "2865369"
  },
  {
    "text": "so execute before it was finished I course condensed it down to about a minute for demo so clusters launched nodes are",
    "start": "2865369",
    "end": "2871910"
  },
  {
    "text": "launched I'm gonna copy out that IP and let's SSH to our master node don't steal",
    "start": "2871910",
    "end": "2878930"
  },
  {
    "text": "my key so here's our master node so for",
    "start": "2878930",
    "end": "2886370"
  },
  {
    "text": "the sake of demonstration I'm gonna schedule a really simple job let's just let's just create a shell script that",
    "start": "2886370",
    "end": "2891770"
  },
  {
    "text": "we'll use as our job I'm going to paste in three beautiful lines just just wait 30 seconds and print a HelloWorld with",
    "start": "2891770",
    "end": "2897830"
  },
  {
    "text": "the host name of the node that executed and we will submit it to the queue and",
    "start": "2897830",
    "end": "2904090"
  },
  {
    "text": "there's a couple of different scheduling engines that are available by default it's sge so that's what I'm using here",
    "start": "2904090",
    "end": "2911350"
  },
  {
    "text": "and it's been submitted and we'll wait a couple of seconds and do a key stat and",
    "start": "2911350",
    "end": "2917600"
  },
  {
    "text": "we'll see that it's running one lonely slot and we will wait not quite a full",
    "start": "2917600",
    "end": "2926510"
  },
  {
    "text": "30 seconds because I condensed this a little bit more and we'll see our output",
    "start": "2926510",
    "end": "2931240"
  },
  {
    "text": "probably in a couple seconds here",
    "start": "2931600",
    "end": "2935500"
  },
  {
    "text": "[Music]",
    "start": "2939380",
    "end": "2942599"
  },
  {
    "text": "Hugh's empty jobs finished and I will very slowly type out the name of the",
    "start": "2944950",
    "end": "2951400"
  },
  {
    "text": "output file and we'll get her up put",
    "start": "2951400",
    "end": "2955529"
  },
  {
    "text": "there we go hello world from our from our execution note and I didn't show it",
    "start": "2957780",
    "end": "2967420"
  },
  {
    "text": "here but basically to to tear down the cluster is simply a see if in clustered",
    "start": "2967420",
    "end": "2974010"
  },
  {
    "text": "delete I believe and it'll tear the whole thing back down shut it down and",
    "start": "2974010",
    "end": "2979450"
  },
  {
    "text": "you're finished so thank date you out so dope that was",
    "start": "2979450",
    "end": "2987910"
  },
  {
    "text": "all thank you I'm gonna jump off stage we'll hang out in the back or out in the hallway if anybody's got questions and",
    "start": "2987910",
    "end": "2993700"
  },
  {
    "text": "thanks for all coming out so late on the last day of the conference",
    "start": "2993700",
    "end": "2998640"
  }
]