[
  {
    "text": "we used to work together but we don't anymore but we still run the Seattle AWS architects and engineers Meetup",
    "start": "149",
    "end": "6060"
  },
  {
    "text": "we have about 2,500 members in this Meetup and we're celebrating our fifth year anniversary in January so if you",
    "start": "6060",
    "end": "13049"
  },
  {
    "text": "happen to be in Seattle in January come hang out with us and help us celebrate that so we come to you today with",
    "start": "13049",
    "end": "19740"
  },
  {
    "text": "diverse experience I have about 25 years of software development architecture and",
    "start": "19740",
    "end": "26609"
  },
  {
    "text": "engineering experience as well as security experience and I've done a",
    "start": "26609",
    "end": "31800"
  },
  {
    "text": "number of different things in the realm of software architecture including financial systems for capital one back",
    "start": "31800",
    "end": "37200"
  },
  {
    "text": "office systems for Nordstrom architected a SAS IOT solution those are just some",
    "start": "37200",
    "end": "42660"
  },
  {
    "text": "examples some software development experience I have I also have a number of security certifications if any of you",
    "start": "42660",
    "end": "49950"
  },
  {
    "text": "are familiar with the sans GX PN it's an advanced pen testing certification actually just got this last week it's",
    "start": "49950",
    "end": "56640"
  },
  {
    "text": "very challenging but I don't just have certifications I have real-world experience in security and it started",
    "start": "56640",
    "end": "63239"
  },
  {
    "text": "when I ran my own company of part of the whenever and now was a software consulting business and I would have",
    "start": "63239",
    "end": "68939"
  },
  {
    "text": "security breaches and incidents and I didn't have anyone to help me I just figure it out I didn't know what to do",
    "start": "68939",
    "end": "74220"
  },
  {
    "text": "sometimes I had to figure out how the malware got immersed systems and solve those problems so now what I really like",
    "start": "74220",
    "end": "80040"
  },
  {
    "text": "to do is help other people with their security so the past few years have been",
    "start": "80040",
    "end": "85770"
  },
  {
    "text": "focusing primarily on cloud security I really got into this because I looked at the cloud and based on my experience as",
    "start": "85770",
    "end": "91650"
  },
  {
    "text": "I thought well some people can be more secure in the cloud potentially but you have to configure things correctly if",
    "start": "91650",
    "end": "98460"
  },
  {
    "text": "you don't configure things correctly you could have problems and that's what we're gonna talk to you about here today",
    "start": "98460",
    "end": "104329"
  },
  {
    "text": "so now I run my own software consulting business sorry it's cloud security consulting",
    "start": "104329",
    "end": "109740"
  },
  {
    "text": "business called second sight lab and I help people with cloud security consulting training and pen testing this",
    "start": "109740",
    "end": "117030"
  },
  {
    "text": "past year I was teaching for SANS Institute and I still have some good friends that teach there some of them in the cloud would talk to the cloud",
    "start": "117030",
    "end": "122939"
  },
  {
    "text": "security architecture and operations class but next year on teaching my own classes writing my own classes that are",
    "start": "122939",
    "end": "128310"
  },
  {
    "text": "gonna be a little bit different and they're really geared at helping developers and security people work together better like",
    "start": "128310",
    "end": "133760"
  },
  {
    "text": "we're doing here on Sage today so I'm Colby so as Terry said we've known each other for about four years and we were",
    "start": "133760",
    "end": "140269"
  },
  {
    "text": "on the community group together and have worked together I actually started life as a physical chemist and so I started",
    "start": "140269",
    "end": "147439"
  },
  {
    "text": "in chemistry got really tired of chemistry and so liked the technology side of it and went into consulting",
    "start": "147439",
    "end": "152950"
  },
  {
    "text": "started using AWS and got passionate about that and it was able to move",
    "start": "152950",
    "end": "158090"
  },
  {
    "text": "through a few different jobs currently I work at zip whip we're so we're startup based out of Seattle we provide landline",
    "start": "158090",
    "end": "164599"
  },
  {
    "text": "and toll free texting services for businesses to be able to communicate with their customers and as Terry said",
    "start": "164599",
    "end": "172639"
  },
  {
    "text": "you know just talk is this kind of gonna be about things that we've learned and done over the years with building stuff",
    "start": "172639",
    "end": "179180"
  },
  {
    "text": "on Amazon okay so as we said we're gonna",
    "start": "179180",
    "end": "185720"
  },
  {
    "text": "talk to you about red team versus blue team on AWS and if you're not familiar with those terms the red team is a team",
    "start": "185720",
    "end": "191930"
  },
  {
    "text": "that usually works inside of a company and simulates tax attacks on company",
    "start": "191930",
    "end": "197329"
  },
  {
    "text": "systems it tries to find ways to break in and traverse a network and find security gaps in holes and that team",
    "start": "197329",
    "end": "204470"
  },
  {
    "text": "helps the blue team who is the defensive team the team that sets up the defenses the security controls on the network and",
    "start": "204470",
    "end": "211190"
  },
  {
    "text": "on the applications and tries to defend the environment and there's a saying that offense informs defense so the",
    "start": "211190",
    "end": "218480"
  },
  {
    "text": "offensive team is going to attack the systems and would be based on what they find the blue team is going to make",
    "start": "218480",
    "end": "223970"
  },
  {
    "text": "adjustments to secure the environment you may have also heard the term pen testing and just to get this out of the",
    "start": "223970",
    "end": "230359"
  },
  {
    "text": "way penetration testing or pen testing is usually done by an external company that comes in and tests the environment",
    "start": "230359",
    "end": "236659"
  },
  {
    "text": "sometimes this is required for PCI compliance or otherwise and some people",
    "start": "236659",
    "end": "241730"
  },
  {
    "text": "debate what these terms mean for our purposes today we're kind of just talking about an attacker versus a",
    "start": "241730",
    "end": "248480"
  },
  {
    "text": "defender and so for today I am going to be the stealthy ninja on the screen I'm",
    "start": "248480",
    "end": "254030"
  },
  {
    "text": "gonna go into the account and I'm gonna try to attack it and see if I can get through and steal some of your data and",
    "start": "254030",
    "end": "259940"
  },
  {
    "text": "Colby's gonna be Superman he's gonna come in and save the day he's going to show you how to fix the problems that I",
    "start": "259940",
    "end": "265610"
  },
  {
    "text": "find so let's just get this out of the way whenever you're doing standard pen",
    "start": "265610",
    "end": "272720"
  },
  {
    "text": "testing one of the goals when the on-premises environment is to get domain",
    "start": "272720",
    "end": "277790"
  },
  {
    "text": "admin and what this means is the ultimate achievement of a pen tester is to get administrative credentials on the",
    "start": "277790",
    "end": "285080"
  },
  {
    "text": "domain administrator because what does that mean that means I can go in I can create myself accounts I can basically",
    "start": "285080",
    "end": "290810"
  },
  {
    "text": "give myself permission to anyone anything in your environment and do whatever I want so in the cloud we're calling this cloud",
    "start": "290810",
    "end": "298070"
  },
  {
    "text": "admin and if you get cloud administrator credentials you've given your cloud",
    "start": "298070",
    "end": "303350"
  },
  {
    "text": "administrator full credentials to everything in your account I want to get those credentials because then I can do",
    "start": "303350",
    "end": "308990"
  },
  {
    "text": "anything I want in your account but if I was able to do that this would be a",
    "start": "308990",
    "end": "314540"
  },
  {
    "text": "really boring talk because that's pretty much game over right and there's actually a company that faced this",
    "start": "314540",
    "end": "320060"
  },
  {
    "text": "problem you may have heard of called code spaces and I like to say it's the company that got deleted because what",
    "start": "320060",
    "end": "326540"
  },
  {
    "text": "happened was an attacker got their credentials demanded some money so give me some money or I'm going to you do bad",
    "start": "326540",
    "end": "332840"
  },
  {
    "text": "things in your account and they said no and so then the attacker proceeded to delete everything they had in our cloud",
    "start": "332840",
    "end": "338630"
  },
  {
    "text": "they hosted code and files for other companies and all their customers data was deleted and they went out of",
    "start": "338630",
    "end": "344510"
  },
  {
    "text": "business so instead of talking about that we want to do something a little more interesting",
    "start": "344510",
    "end": "350300"
  },
  {
    "text": "we're gonna go on a treasure hunt we're gonna search for very treasure so your data is like your treasure it's like",
    "start": "350300",
    "end": "356570"
  },
  {
    "text": "your gold right so the thing that you're trying to protect in your account it's what's really valuable to you most of the time this is the goal of attackers",
    "start": "356570",
    "end": "362870"
  },
  {
    "text": "to go in and get some data and steal it as you've seen in many of the security breaches that have been in the news",
    "start": "362870",
    "end": "368960"
  },
  {
    "text": "recently and in order to attack your account and get this data I'm not going",
    "start": "368960",
    "end": "375380"
  },
  {
    "text": "to use standard pen testing tool so you may have heard of Metasploit or perish tool empire and there's actually I have",
    "start": "375380",
    "end": "381230"
  },
  {
    "text": "some friends that work for Rhino security up in Seattle and we created a cool tool called PACU and I like to say",
    "start": "381230",
    "end": "388610"
  },
  {
    "text": "it's the Metasploit of AWS right it has functions you can use to try to get into the account but we're gonna use a",
    "start": "388610",
    "end": "394250"
  },
  {
    "text": "different methodology it's called living off the land what this means is I'm not going to use any tools other",
    "start": "394250",
    "end": "400270"
  },
  {
    "text": "the ones that are already existing in your account the things that your developers and your DevOps people are using I'm gonna use those tools and",
    "start": "400270",
    "end": "406840"
  },
  {
    "text": "leverage them to traverse and get through your account and your network and figure out how I can get out at your",
    "start": "406840",
    "end": "411910"
  },
  {
    "text": "data and steal it so before we dive in",
    "start": "411910",
    "end": "416919"
  },
  {
    "text": "we're gonna kind of go over some background how we set things up so we treated this as if we had our manager",
    "start": "416919",
    "end": "422650"
  },
  {
    "text": "asked us this goes start to point stuff on AWS we spun up a brand new AWS account we had a single user made base",
    "start": "422650",
    "end": "430120"
  },
  {
    "text": "VPC and defaults so we left it as vanilla as possible we then realized",
    "start": "430120",
    "end": "435340"
  },
  {
    "text": "what we want to deploy some type of web application so we search for some tutorials we found elastic Beanstalk",
    "start": "435340",
    "end": "440830"
  },
  {
    "text": "tutorial with wordpress we followed that tutorial all the way through so this is on Amazon's website and then also",
    "start": "440830",
    "end": "447520"
  },
  {
    "text": "because server list is fun and new we decided to do some of those server lists and we have databases so why not serve a",
    "start": "447520",
    "end": "453759"
  },
  {
    "text": "listen databases so we looked up a tutorial on using lambda with relational database service so RDS and running that",
    "start": "453759",
    "end": "461199"
  },
  {
    "text": "inside of your V PC and so again we just followed that tutorial exactly for how it was written and didn't do anything",
    "start": "461199",
    "end": "467440"
  },
  {
    "text": "extra with the account okay so in this",
    "start": "467440",
    "end": "472930"
  },
  {
    "text": "case let's say that you were trying to be secure and you set up some users but you did not give them full",
    "start": "472930",
    "end": "478150"
  },
  {
    "text": "administrative access you gave them read-only credentials I want to get a hold of some of those credentials and",
    "start": "478150",
    "end": "484060"
  },
  {
    "text": "see what I can do with them and even though they're read-only they may be able to help me out so you may know this",
    "start": "484060",
    "end": "490360"
  },
  {
    "text": "but the credentials when you use Amazon credentials are stored in a file on a",
    "start": "490360",
    "end": "495969"
  },
  {
    "text": "laptop and they're in plain text and so if I can get on to someone's laptop I",
    "start": "495969",
    "end": "501699"
  },
  {
    "text": "can grab those credentials and start using them there's a number of different ways again this is kind of outside the",
    "start": "501699",
    "end": "507580"
  },
  {
    "text": "room what we're talking about here today but standard pentesting teak techniques for getting in there and getting those credentials I'll just give you a couple",
    "start": "507580",
    "end": "514630"
  },
  {
    "text": "examples I could send your developer a phishing email say free ticket to read",
    "start": "514630",
    "end": "521349"
  },
  {
    "text": "event or something you know and then I could go in there and I could try to get them to click on that email and grab",
    "start": "521349",
    "end": "527020"
  },
  {
    "text": "those credentials by some sort of malware I could also set up a drive-by download site you could try to trick",
    "start": "527020",
    "end": "532540"
  },
  {
    "text": "them into going to my site and getting some our and their machine that way or I could just be really nice",
    "start": "532540",
    "end": "538389"
  },
  {
    "text": "and try to use some social engineering and say can I borrow your keys there's a",
    "start": "538389",
    "end": "543430"
  },
  {
    "text": "number of different ways that you can get at credentials on a machine so let's say I got those credentials what can I",
    "start": "543430",
    "end": "549250"
  },
  {
    "text": "do with them so the first thing I want to do is I want to know where your data is and I",
    "start": "549250",
    "end": "555010"
  },
  {
    "text": "want to know where your important data is now I've worked for a lot of financial organizations and I've worked with a lot of PII data or you know",
    "start": "555010",
    "end": "561750"
  },
  {
    "text": "protected data that you don't want someone to get at and I know that a lot of times this type of data is short",
    "start": "561750",
    "end": "567040"
  },
  {
    "text": "stored in a database that's transactional or a relational database and typically this is where I'm gonna",
    "start": "567040",
    "end": "574600"
  },
  {
    "text": "find data like that so I'm gonna start there and using those credentials that are just read-only",
    "start": "574600",
    "end": "580209"
  },
  {
    "text": "I can run this query here and I can say show me all of the RDS databases in this",
    "start": "580209",
    "end": "585579"
  },
  {
    "text": "account and then I can look at the information about those databases the metadata and I can try to figure out",
    "start": "585579",
    "end": "591760"
  },
  {
    "text": "which one I want to attack in this case Colby it was really nice and he named one of the databases the super-secret dB",
    "start": "591760",
    "end": "599170"
  },
  {
    "text": "so let's see what's in that one so what",
    "start": "599170",
    "end": "604300"
  },
  {
    "text": "are the controls that I have to get through to get to this database there's a few of them there are some network",
    "start": "604300",
    "end": "610180"
  },
  {
    "text": "controls the first thing I have to get through is the network access control lists that are associated with subnets",
    "start": "610180",
    "end": "616660"
  },
  {
    "text": "that that this database is located in so what I can do is like in query the",
    "start": "616660",
    "end": "622029"
  },
  {
    "text": "subnets associated with this database and I find - and I can look at those and",
    "start": "622029",
    "end": "627490"
  },
  {
    "text": "I can use that subnet ID to go examine the network access control lists the",
    "start": "627490",
    "end": "633250"
  },
  {
    "text": "network access control lists are going to define the traffic that is allowed in or out of the subnet in which these",
    "start": "633250",
    "end": "639850"
  },
  {
    "text": "database database resides so as you can see here we have a series of rules and in the case of a network access control",
    "start": "639850",
    "end": "646269"
  },
  {
    "text": "list the first rule that it matches will apply we have some ingress rules and we",
    "start": "646269",
    "end": "651850"
  },
  {
    "text": "have some egress rules meaning inbound and outbound and in both cases the first rule allows site or blog 0.0 no 0 - 0 /",
    "start": "651850",
    "end": "660190"
  },
  {
    "text": "0 which means anywhere on the internet on any protocol to get into the subnet",
    "start": "660190",
    "end": "666240"
  },
  {
    "text": "so this is a default that comes with subnets on AWS and if you have a developer deploying their code and the",
    "start": "666240",
    "end": "672970"
  },
  {
    "text": "resources they may just go with the defaults and so in this case I know that from here on out I don't have to worry",
    "start": "672970",
    "end": "678610"
  },
  {
    "text": "about those subnets or those network access control lists because they're wide open anything in this subnet can that is in",
    "start": "678610",
    "end": "685750"
  },
  {
    "text": "the subnet can talk to this database so the next thing I have to get through are",
    "start": "685750",
    "end": "691689"
  },
  {
    "text": "the security groups right so now I have a database name and its associated with",
    "start": "691689",
    "end": "698560"
  },
  {
    "text": "a particular security group ID so I can go get that from the database and I can plug it into this query right here and I",
    "start": "698560",
    "end": "704079"
  },
  {
    "text": "can say show me the information about the security group that's associated with this database and what I find here",
    "start": "704079",
    "end": "709899"
  },
  {
    "text": "is that this security group allows access inbound on port 3306 which tells me it's probably my sequel right and I",
    "start": "709899",
    "end": "717310"
  },
  {
    "text": "can see that it is anything in the site or block one seven two three one zero zero slash 16 is allowed to talk to my",
    "start": "717310",
    "end": "724389"
  },
  {
    "text": "database okay so I need to figure out what is in that particular site or block",
    "start": "724389",
    "end": "729850"
  },
  {
    "text": "that can talk to this database so how can I use this information well I can",
    "start": "729850",
    "end": "735699"
  },
  {
    "text": "look for V pcs and subnets maybe that are assigned to this particular slider block to try to figure out and lucky for",
    "start": "735699",
    "end": "742959"
  },
  {
    "text": "me I do query the V pcs and I use this header block as you can see here and I",
    "start": "742959",
    "end": "748089"
  },
  {
    "text": "find out that the entire V PC is allowed to talk to my database on 3306",
    "start": "748089",
    "end": "753759"
  },
  {
    "text": "anything in this database okay so now",
    "start": "753759",
    "end": "760480"
  },
  {
    "text": "what I want to do is I want to find out okay I know anything can talk to this database but the the thing that is",
    "start": "760480",
    "end": "767199"
  },
  {
    "text": "talking to this database needs outbound access on port 3306 so let me see if I can figure out what",
    "start": "767199",
    "end": "772629"
  },
  {
    "text": "is talking to this database that might help me and I can look here in query on port 3306 outbound in this V PC and I",
    "start": "772629",
    "end": "780939"
  },
  {
    "text": "find another security group so probably what's in this security group has permission to talk to this database",
    "start": "780939",
    "end": "789029"
  },
  {
    "text": "alright so I know there's probably likely some compute resource maybe lambda or Fargate or maybe an ec2",
    "start": "789149",
    "end": "795670"
  },
  {
    "text": "instance so I'm going to query those and I'm to see if any of them are using the security group and of course I find one",
    "start": "795670",
    "end": "801180"
  },
  {
    "text": "here this is a lambda function his name create table records and read and it's",
    "start": "801180",
    "end": "806370"
  },
  {
    "text": "based off of that tutorial that Kobe showed you and here's where it gets interesting so when we were first",
    "start": "806370",
    "end": "813060"
  },
  {
    "text": "playing around with this trying to figure out what what we're going to show you and what we're going to attack I did a query of the lambda function you can",
    "start": "813060",
    "end": "819810"
  },
  {
    "text": "use this function called get function and it'll give you a whole bunch of information and one of the values in",
    "start": "819810",
    "end": "824970"
  },
  {
    "text": "there is called code ok ssin and this gives you back a URL and what I noticed",
    "start": "824970",
    "end": "830700"
  },
  {
    "text": "was when I went to this URL I didn't have to have you know any credentials I",
    "start": "830700",
    "end": "836730"
  },
  {
    "text": "wasn't logged into my account and I could get to it I also send it to Kobe I texted over to him to see if he could",
    "start": "836730",
    "end": "841920"
  },
  {
    "text": "get to and he could and so this is a time-based URL you don't even need credentials in the account to see this",
    "start": "841920",
    "end": "848970"
  },
  {
    "text": "and this is by design it's how it works so if I can get access and read this information then I can use this URL to",
    "start": "848970",
    "end": "856110"
  },
  {
    "text": "go and what does it show me it shows me the code for the lambda function and how is this useful",
    "start": "856110",
    "end": "861180"
  },
  {
    "text": "there's a lot of ways if I can see your code there's a lot of ways this useful I can look for vulnerabilities or",
    "start": "861180",
    "end": "866730"
  },
  {
    "text": "configuration problems I can look for programming errors but in this case I see a file here called RDS underscore",
    "start": "866730",
    "end": "873990"
  },
  {
    "text": "can big hmm RDS what could be in this file oh it's database username and password",
    "start": "873990",
    "end": "882510"
  },
  {
    "text": "don't do this it's really bad so you",
    "start": "882510",
    "end": "888030"
  },
  {
    "text": "should never put your secrets in your code right because if someone gets out your code they can get your secrets now",
    "start": "888030",
    "end": "893640"
  },
  {
    "text": "I can use these credentials and I can log into this database even though I only had read-only access so how am I",
    "start": "893640",
    "end": "901020"
  },
  {
    "text": "gonna do that well if I try to use this limited function it's gonna be a little tricky because this these files I don't",
    "start": "901020",
    "end": "906750"
  },
  {
    "text": "really have access to them I don't have write access to the account so skin me a little challenging so I'm gonna think of",
    "start": "906750",
    "end": "912690"
  },
  {
    "text": "another way to get in here first of all I need to get into an instance that has",
    "start": "912690",
    "end": "918080"
  },
  {
    "text": "access to the Internet I need to find something I can attack and get in that way so I can query your",
    "start": "918080",
    "end": "924180"
  },
  {
    "text": "account see all the ec2 instances that have a public IP or a public dns name and that might give me a clue as to what",
    "start": "924180",
    "end": "931320"
  },
  {
    "text": "can get into and once I get in there I can find some instances now I need to find out if these particular instances",
    "start": "931320",
    "end": "937710"
  },
  {
    "text": "that I want to get into have access to our database now you may know this but when you deploy a security group if you",
    "start": "937710",
    "end": "944550"
  },
  {
    "text": "don't specify any outbound rules by default there will be a rule in that security group that says 0.0.0.0 slash",
    "start": "944550",
    "end": "952050"
  },
  {
    "text": "zero on any port that means that whatever resource you assign this",
    "start": "952050",
    "end": "957240"
  },
  {
    "text": "security group to can talk outbound to anything else so I'm gonna hope that in this account you had some people that",
    "start": "957240",
    "end": "963540"
  },
  {
    "text": "just use those default rules and set me up some security groups around some instance with some public internet",
    "start": "963540",
    "end": "969540"
  },
  {
    "text": "access that I can use to get at this database and sure enough I found a whole list of security groups that have this",
    "start": "969540",
    "end": "975090"
  },
  {
    "text": "default out that rule and one of them is associated with one of those instances",
    "start": "975090",
    "end": "980670"
  },
  {
    "text": "and when I go to that instance I find out hey this is a WordPress website great how does that help me well now",
    "start": "980670",
    "end": "989250"
  },
  {
    "text": "what I'm gonna do is we're going back into kind of the land of standard pen testing and what a pen tester or a red",
    "start": "989250",
    "end": "994500"
  },
  {
    "text": "teamer will do as they will scan your externally exposed assets for example in",
    "start": "994500",
    "end": "999720"
  },
  {
    "text": "this case a WordPress website looking for vulnerabilities looking for CVS",
    "start": "999720",
    "end": "1005030"
  },
  {
    "text": "looking for problems in the code that they can exploit and what I can do is once I find one of these vulnerabilities",
    "start": "1005030",
    "end": "1010400"
  },
  {
    "text": "only takes one then I can get onto that system I can upload my code I can use",
    "start": "1010400",
    "end": "1016670"
  },
  {
    "text": "those database credentials that I stole earlier I can grab the data from the database I can just publish it to a",
    "start": "1016670",
    "end": "1023030"
  },
  {
    "text": "public web page and then I can scrape it and steal it right and so this is what I",
    "start": "1023030",
    "end": "1029089"
  },
  {
    "text": "may try to do and so there are a number of ways that you could attack these systems I'll just give you an example I",
    "start": "1029089",
    "end": "1034310"
  },
  {
    "text": "we did this target RSA and I talked about how in a previous test I was able",
    "start": "1034310",
    "end": "1039650"
  },
  {
    "text": "to get into a website that had a file upload field and it was you know not",
    "start": "1039650",
    "end": "1046160"
  },
  {
    "text": "properly sanitized so I could upload any code I wanted and then I could change",
    "start": "1046160",
    "end": "1051380"
  },
  {
    "text": "the code and so lo and behold after that talk there came a new CVE came out and",
    "start": "1051380",
    "end": "1057260"
  },
  {
    "text": "WordPress that is related that says hey if you don't properly or you had a",
    "start": "1057260",
    "end": "1062990"
  },
  {
    "text": "control that was not properly anat eyes that allowed someone to get in there and upload a file and change something on that WordPress website so",
    "start": "1062990",
    "end": "1069580"
  },
  {
    "text": "all I need to do is find any published known grilling abilities that you haven't patched appropriately or any",
    "start": "1069580",
    "end": "1075970"
  },
  {
    "text": "sort of code flaw to getting to that website so in summary what have I done I",
    "start": "1075970",
    "end": "1081540"
  },
  {
    "text": "stole some keys I did some recon on your environment to find out what was in",
    "start": "1081540",
    "end": "1088600"
  },
  {
    "text": "there what I might attack what kind of resources were there what I might leverage and then I found some database",
    "start": "1088600",
    "end": "1094420"
  },
  {
    "text": "credentials cool got those I exploited a web server and then that web server was",
    "start": "1094420",
    "end": "1100480"
  },
  {
    "text": "allowed to by you know poor Network programming rules I was able to get at database get the data out and then",
    "start": "1100480",
    "end": "1108100"
  },
  {
    "text": "exfiltrate it from the environment and so we have a number of problems here we have you know read-only permissions to",
    "start": "1108100",
    "end": "1115060"
  },
  {
    "text": "the whole entire account we have single-factor credentials meaning no MFA a wide open network we have secrets in",
    "start": "1115060",
    "end": "1122980"
  },
  {
    "text": "code and more and now Colby's gonna tell you how to fix it so wow I did a bad job",
    "start": "1122980",
    "end": "1129510"
  },
  {
    "text": "so let's go through and talk about the all the different ways we can leverage",
    "start": "1129510",
    "end": "1134580"
  },
  {
    "text": "EWS tools to make it better so to begin with everything I'm gonna talk about it's all built into AWS I'm not gonna",
    "start": "1134580",
    "end": "1140410"
  },
  {
    "text": "use anything special I was gonna go through and talk through some different tools first thing is protecting",
    "start": "1140410",
    "end": "1146260"
  },
  {
    "text": "credentials right Terry was able to get a set of creds so they're the biggest and easiest way to do this is user training protect your users teach their",
    "start": "1146260",
    "end": "1152920"
  },
  {
    "text": "users how to identify phishing campaigns how to handle credential they shouldn't be sharing them even if it's a read-only",
    "start": "1152920",
    "end": "1159250"
  },
  {
    "text": "credential as we just showed they're powerful and so you shouldn't be sharing those password policies and rotation is",
    "start": "1159250",
    "end": "1166810"
  },
  {
    "text": "important right so terry was able to use those creds I mean we created those creds and she used them over three",
    "start": "1166810",
    "end": "1172270"
  },
  {
    "text": "months you know I never rotated them once and so during those three months she could have kept going back in and",
    "start": "1172270",
    "end": "1178060"
  },
  {
    "text": "continued exfilling data from our account require MFA right there was no",
    "start": "1178060",
    "end": "1183100"
  },
  {
    "text": "MFA here so once Terry had those credentials she had all the auth pieces she there was no extra piece needed",
    "start": "1183100",
    "end": "1189360"
  },
  {
    "text": "require frequent real especially to sensitive parts of your application or your infrastructure so that those",
    "start": "1189360",
    "end": "1196390"
  },
  {
    "text": "credentials are getting a refresh and you know I'll go through some examples of this and then as you saw I put creds",
    "start": "1196390",
    "end": "1202480"
  },
  {
    "text": "in code I followed a tutorial that told me to do that you know we need to protect against that AWS has a tool that",
    "start": "1202480",
    "end": "1209710"
  },
  {
    "text": "we can leverage in with get called get secrets which we'll go through and actually scan as a pre-commit hook for",
    "start": "1209710",
    "end": "1215830"
  },
  {
    "text": "AWS credentials by default and you can actually write your own reg X's because those are delightful or right and",
    "start": "1215830",
    "end": "1223140"
  },
  {
    "text": "integrating them yourself right so you're just an example a Python script where we have you know the boto 3",
    "start": "1223140",
    "end": "1229660"
  },
  {
    "text": "session coming online we have a set of creds in there I go try to check in the file it doesn't let me so you can roll",
    "start": "1229660",
    "end": "1236020"
  },
  {
    "text": "this out to your developers just as that final sanity check to make sure credentials aren't being uploaded to get",
    "start": "1236020",
    "end": "1241920"
  },
  {
    "text": "and you're protecting them there so let's talk about I am so this is how she",
    "start": "1241920",
    "end": "1250120"
  },
  {
    "text": "made you know did the main compromise so how can I protect about this so again",
    "start": "1250120",
    "end": "1255130"
  },
  {
    "text": "I'm not gonna do an I am top 10 talk I'm just gonna go over a few points that you know we've deemed important and",
    "start": "1255130",
    "end": "1261010"
  },
  {
    "text": "methodologies that can help you do a bunch of things really easily that we've found useful but you know there's a",
    "start": "1261010",
    "end": "1267820"
  },
  {
    "text": "bunch of great I am top 10 talks out there and I recommend everybody to listen to them because they're all good but the big thing that I'm gonna focus",
    "start": "1267820",
    "end": "1274840"
  },
  {
    "text": "on it's gonna be roles least privilege and segregation of duties and I'm gonna",
    "start": "1274840",
    "end": "1280120"
  },
  {
    "text": "leverage roles to get me the last one for free ok so I'm gonna create a user",
    "start": "1280120",
    "end": "1285340"
  },
  {
    "text": "and this user is gonna have the most minimum amount of permissions possible literally they can manage themselves and",
    "start": "1285340",
    "end": "1291430"
  },
  {
    "text": "I am NOT is it you know they can set an mfa token they can't do anything else",
    "start": "1291430",
    "end": "1296740"
  },
  {
    "text": "and so we're gonna go through and set these permissions up and so I'm gonna go through and show you this gambol to set",
    "start": "1296740",
    "end": "1303310"
  },
  {
    "text": "this up so we're gonna give them some permissions you know the first ones are just kind of some iam console",
    "start": "1303310",
    "end": "1308320"
  },
  {
    "text": "permissions it's gonna allow the user to view enough information so they can get into I am and actually see themselves",
    "start": "1308320",
    "end": "1314520"
  },
  {
    "text": "we're gonna let them get the password policy because we just said we're gonna set a password policy so we gotta make sure they can get that and apply it I'm",
    "start": "1314520",
    "end": "1321460"
  },
  {
    "text": "and then again we'll let them list all the users you probably could refine that but this will let them find themselves",
    "start": "1321460",
    "end": "1326500"
  },
  {
    "text": "in the list pretty easily so this one's pretty generic this is just to kind of get the console to work",
    "start": "1326500",
    "end": "1332640"
  },
  {
    "text": "from there we're gonna lock them down so I'm gonna give them only a very small set of privileges and it's literally",
    "start": "1332640",
    "end": "1339309"
  },
  {
    "text": "just privileges to change their I am account permission alright they're not their permissions but just change their",
    "start": "1339309",
    "end": "1344799"
  },
  {
    "text": "I am account important thing is I'm not gonna let them change their permissions okay so they can set their password",
    "start": "1344799",
    "end": "1350440"
  },
  {
    "text": "change their password SSH keys to use some of the code star tools and different things like this but we're",
    "start": "1350440",
    "end": "1357250"
  },
  {
    "text": "gonna use a special tag and I am so you know this is a cool feature I don't know if anybody's using this but we're gonna",
    "start": "1357250",
    "end": "1362770"
  },
  {
    "text": "leverage this I am tag that effectively when you log in it pulls in your user information so our team that's managing",
    "start": "1362770",
    "end": "1371110"
  },
  {
    "text": "I am only has to create one set of templates to apply to all users because when you log in it assumes your identity",
    "start": "1371110",
    "end": "1378580"
  },
  {
    "text": "and so that's that AWS colon username so we've limited who you know who you can",
    "start": "1378580",
    "end": "1384460"
  },
  {
    "text": "actually change the next piece is we're gonna do some MFA stuff okay we're gonna",
    "start": "1384460",
    "end": "1390850"
  },
  {
    "text": "let the user add MFA and we're only gonna let them add MFA okay we've",
    "start": "1390850",
    "end": "1396399"
  },
  {
    "text": "decided you know for us we found that we don't want them to delete it so the problem is is if you let them delete MFA",
    "start": "1396399",
    "end": "1402789"
  },
  {
    "text": "if someone were to compromise a set of credentials they could go in and remove the MFA and now you don't have it",
    "start": "1402789",
    "end": "1408100"
  },
  {
    "text": "anymore this also lets you separate your IAM and your user control team from the",
    "start": "1408100",
    "end": "1413289"
  },
  {
    "text": "team that's actually using AWS they have to initiate you know a ticket with your IT or something like that have the MFA",
    "start": "1413289",
    "end": "1420429"
  },
  {
    "text": "removed you have two parties there's some type of ticketing of tracking system in place so it gives you some",
    "start": "1420429",
    "end": "1426580"
  },
  {
    "text": "good practices on how to handle that okay so this user is gonna have like I",
    "start": "1426580",
    "end": "1431710"
  },
  {
    "text": "said very little to no permissions at all beyond setting passwords and enrolling themselves then we're gonna",
    "start": "1431710",
    "end": "1438640"
  },
  {
    "text": "add one final role to the ability to the user that's the ability to assume set",
    "start": "1438640",
    "end": "1443710"
  },
  {
    "text": "roles okay and we're gonna require some special things with this so we're gonna",
    "start": "1443710",
    "end": "1449950"
  },
  {
    "text": "create a bunch of rules and these roles are gonna be very limited scope rules right your network admin",
    "start": "1449950",
    "end": "1455660"
  },
  {
    "text": "you know kubernetes admin what we know whatever tool and scope these down we're",
    "start": "1455660",
    "end": "1460760"
  },
  {
    "text": "gonna require MFA to assume these roles so they're gonna have to have a two-factor off into this and then we're",
    "start": "1460760",
    "end": "1466820"
  },
  {
    "text": "also gonna put some time Bush constraints around these roles so these you know more sensitive roles are gonna",
    "start": "1466820",
    "end": "1472220"
  },
  {
    "text": "have a lot less time that they're gonna be able to be assumed than some of the other ones and so your user now comes in",
    "start": "1472220",
    "end": "1478610"
  },
  {
    "text": "they have this default set of credentials the ones that Terry compromised but they can't do anything you know sites changed the user's",
    "start": "1478610",
    "end": "1485300"
  },
  {
    "text": "password that you don't require MFA to assume any privilege and so we've protected the roles there we're the",
    "start": "1485300",
    "end": "1492170"
  },
  {
    "text": "leverage that secured a token system so we're gonna get back a temporary set of credentials that we can then use to do",
    "start": "1492170",
    "end": "1497900"
  },
  {
    "text": "our action but the important piece here is now is all those credentials are temporary they all have some sort of",
    "start": "1497900",
    "end": "1504050"
  },
  {
    "text": "expiration associated with that so we can actually then define you know your",
    "start": "1504050",
    "end": "1509210"
  },
  {
    "text": "network admin has 15 minutes of access and they have to re off we have a in and you're better protecting that network",
    "start": "1509210",
    "end": "1515960"
  },
  {
    "text": "and so you're able to require frequent re off a lot easier with this leveraging",
    "start": "1515960",
    "end": "1521840"
  },
  {
    "text": "the MFA or integrating with any type of off source that you want so what does",
    "start": "1521840",
    "end": "1527150"
  },
  {
    "text": "this actually look like so here's the same command to Terry ran against the account so I have my default set of",
    "start": "1527150",
    "end": "1533570"
  },
  {
    "text": "credentials as a user all I can do is manage myself and I tried to describe the RDS instances and I get not act hey",
    "start": "1533570",
    "end": "1541370"
  },
  {
    "text": "I can't access it I don't have the right I created a secure read-only role that",
    "start": "1541370",
    "end": "1546530"
  },
  {
    "text": "does let me read the account first set amount of time I assume it the important thing though is I required MFA to assume",
    "start": "1546530",
    "end": "1553370"
  },
  {
    "text": "that role so I assume in to it I have my second factor of off and can get into it I'll get back instead of temporary",
    "start": "1553370",
    "end": "1559970"
  },
  {
    "text": "credentials the key there is a our temporary we get at back an expiration time on when those credentials are no",
    "start": "1559970",
    "end": "1566150"
  },
  {
    "text": "longer valid we even leverage those credentials run the command I get the things back these",
    "start": "1566150",
    "end": "1571970"
  },
  {
    "text": "credentials are going to expire they're no longer will work after a set amount of time and then we have to read off and",
    "start": "1571970",
    "end": "1577430"
  },
  {
    "text": "so we're not just sitting around for months on end sitting there for someone to exploit once they're done they're",
    "start": "1577430",
    "end": "1583400"
  },
  {
    "text": "done so that lets us go through and manage the credentials we can also be",
    "start": "1583400",
    "end": "1589520"
  },
  {
    "text": "Proactive and monitoring this credentials so I'm assuming everybody in the room we use AWS uses cloud trail",
    "start": "1589520",
    "end": "1594950"
  },
  {
    "text": "you should cuz new accounts have it down by default now so cloud trail is gonna monitor all of those API actions for us",
    "start": "1594950",
    "end": "1602450"
  },
  {
    "text": "and so we'll be able to see what all of our users are doing okay we can monitor",
    "start": "1602450",
    "end": "1607730"
  },
  {
    "text": "them all the nice thing is like a lot of Amazon's services these go into some type of event stream that event stream",
    "start": "1607730",
    "end": "1613850"
  },
  {
    "text": "we can subscribe to and we can do stuff with it and so we can create lambda functions that watch for certain types",
    "start": "1613850",
    "end": "1619790"
  },
  {
    "text": "of actions and so we can actually respond back whether that be paging some type of on-call team sending a slack",
    "start": "1619790",
    "end": "1627110"
  },
  {
    "text": "message or actually doing some auto remediation against it to fix itself so",
    "start": "1627110",
    "end": "1632270"
  },
  {
    "text": "you're in real-time responding you can also build profiles of her users if you know that your team shouldn't be",
    "start": "1632270",
    "end": "1638390"
  },
  {
    "text": "deploying servers outside of work hours you can program this into a lot of your functionality and see what's happening",
    "start": "1638390",
    "end": "1644600"
  },
  {
    "text": "and taking place you know you the attacker you know is gonna be doing stuff at different times",
    "start": "1644600",
    "end": "1649670"
  },
  {
    "text": "and you can slowly see what's going on there there's also let you track users that have permissions to things they",
    "start": "1649670",
    "end": "1655310"
  },
  {
    "text": "shouldn't have access to you'd let you track did you remove that users ability to do certain actions once they change",
    "start": "1655310",
    "end": "1662090"
  },
  {
    "text": "teams and so we have those there but it's important that we can subscribe to this and then we can get into that more",
    "start": "1662090",
    "end": "1667520"
  },
  {
    "text": "real-time Blue Team type effective responding to the events as they happen",
    "start": "1667520",
    "end": "1673360"
  },
  {
    "text": "okay so that's our I am the next is secret so I messed up really bad on",
    "start": "1673360",
    "end": "1679310"
  },
  {
    "text": "secrets I mean she haven't been plain text so we're gonna talk about secret management now Amazon released AWS",
    "start": "1679310",
    "end": "1685550"
  },
  {
    "text": "secrets manager we're not going to talk about that that tools designed more for an RDS type application it's a great",
    "start": "1685550",
    "end": "1691790"
  },
  {
    "text": "tool we're gonna focus on ec2 parameter store for secrets when using these just",
    "start": "1691790",
    "end": "1698030"
  },
  {
    "text": "look at what use case works better for you in the example that we're using this one works a little bit better for us so",
    "start": "1698030",
    "end": "1704390"
  },
  {
    "text": "easy to parameter stores a secure location for us to store things anything from key value stores to secrets it's",
    "start": "1704390",
    "end": "1713240"
  },
  {
    "text": "all controlled access wise by iam so we can manage who can access it and who",
    "start": "1713240",
    "end": "1718550"
  },
  {
    "text": "can't and so we can set things up the nice things is also integrates tightly with kms so we can encrypt the data that sits",
    "start": "1718550",
    "end": "1726110"
  },
  {
    "text": "inside of it which is perfect for secrets so what we can do is we can actually then also take it one step",
    "start": "1726110",
    "end": "1731600"
  },
  {
    "text": "further since its I am and do segregation of duties we can build rules that let database administrators seed",
    "start": "1731600",
    "end": "1738590"
  },
  {
    "text": "credentials into the store lets them encrypt it but doesn't let them pull data out we then can roll out instances",
    "start": "1738590",
    "end": "1745340"
  },
  {
    "text": "that have roles attached to them that has the ability to pull credentials out and also decrypt it and so we're able to",
    "start": "1745340",
    "end": "1752600"
  },
  {
    "text": "this control that and what's nice we control it two levels at the parameter level and then also the ability to",
    "start": "1752600",
    "end": "1758150"
  },
  {
    "text": "leverage the kms keys for encryption and decryption and so we can actually protect the credentials and know what's",
    "start": "1758150",
    "end": "1765799"
  },
  {
    "text": "going on here the other nice thing is because using I am all of the actions are tracked in cloud trail so we can",
    "start": "1765799",
    "end": "1771530"
  },
  {
    "text": "watch what's happening so if credentials are being seeded at weird times in the night when you know you're DBAs aren't",
    "start": "1771530",
    "end": "1777950"
  },
  {
    "text": "online or your ITR you know team is online doing that you can respond",
    "start": "1777950",
    "end": "1783260"
  },
  {
    "text": "accordingly you can also track what instances are getting secrets out so you can track and say ok well that instance",
    "start": "1783260",
    "end": "1789140"
  },
  {
    "text": "no longer needs a secret we need to adjust those iam rules in order to make sure that instance really is acting",
    "start": "1789140",
    "end": "1795380"
  },
  {
    "text": "under the most minimum amount of permissions possible for it to do its job so again just an example of what",
    "start": "1795380",
    "end": "1801260"
  },
  {
    "text": "this looks like so left sides the file Terry showed you right it's got the password in it the right side is the new",
    "start": "1801260",
    "end": "1806870"
  },
  {
    "text": "file no passwords in it and it's pretty minimal amount of work to get this set up there's Python it's only three lines of",
    "start": "1806870",
    "end": "1813590"
  },
  {
    "text": "code for us to set this up so we just call into the parameter store we can pull the data out and you leverage it",
    "start": "1813590",
    "end": "1819830"
  },
  {
    "text": "for our application and use it and if we look at the AWS console it's there and based off your console access you can",
    "start": "1819830",
    "end": "1825830"
  },
  {
    "text": "either see or not see the credential so it's also nice is for those people that are using IT teams to see you know store",
    "start": "1825830",
    "end": "1832940"
  },
  {
    "text": "secrets they have a console that they can go in and do this so the encryptions managed by KMS we get all the nice KMS",
    "start": "1832940",
    "end": "1839539"
  },
  {
    "text": "features of key rotation in the backend you know that come for free with that that we don't have to to manage so to do",
    "start": "1839539",
    "end": "1846530"
  },
  {
    "text": "this is fairly minimal amount of work it's not a lot of extra code then we're able to make this quick change and now",
    "start": "1846530",
    "end": "1853309"
  },
  {
    "text": "she no longer has the database secret especially with you know let's discovering you know that lambda link is",
    "start": "1853309",
    "end": "1859240"
  },
  {
    "text": "public for a set amount of time you know so people can't go in and download that",
    "start": "1859240",
    "end": "1865230"
  },
  {
    "text": "so now let's discuss some more of the monitoring side of things so those are those previous ones cover some of the",
    "start": "1865230",
    "end": "1871570"
  },
  {
    "text": "proactive stuff we can do let's talk about more of the reactive stuff to do so for monitoring the big one that we",
    "start": "1871570",
    "end": "1877180"
  },
  {
    "text": "can start leveraging is guard duty so who in the room uses guard duty right",
    "start": "1877180",
    "end": "1882550"
  },
  {
    "text": "it's an awesome tool we released I think last year at Raymond and so guard duty is gonna analyze BPC flow logs DNS logs",
    "start": "1882550",
    "end": "1890050"
  },
  {
    "text": "and your cloud trail logs and kind of build a profile on your account of actual usage and then start alerting",
    "start": "1890050",
    "end": "1897280"
  },
  {
    "text": "based off of anomalies outside of that regular usage it also has a set of heuristics programmed into it that it",
    "start": "1897280",
    "end": "1903970"
  },
  {
    "text": "will watch for like brute-force attempts and things like that it learns your account for the first 30",
    "start": "1903970",
    "end": "1910180"
  },
  {
    "text": "days and then after there it builds a profile that's really interesting so it learns your account for the first 30 days so don't do it we did and set up an",
    "start": "1910180",
    "end": "1917080"
  },
  {
    "text": "account and don't log into it for 30 days because on 31 days guard duty lets",
    "start": "1917080",
    "end": "1922780"
  },
  {
    "text": "you know that something's going on that's not right so you have that again",
    "start": "1922780",
    "end": "1928060"
  },
  {
    "text": "for monitoring with guard duty it's like all the rest of the tools there's an event stream that you can subscribe to",
    "start": "1928060",
    "end": "1933550"
  },
  {
    "text": "so you can watch the guard duty alerts come off and then do actions against those whether that's just simple paging",
    "start": "1933550",
    "end": "1939930"
  },
  {
    "text": "posting to slack or actually building some type of remediation process in order to handle the exploit other",
    "start": "1939930",
    "end": "1948100"
  },
  {
    "text": "monitoring as we talked about is look at cloud trail DPC flow logs are a good",
    "start": "1948100",
    "end": "1953200"
  },
  {
    "text": "tool to make sure you know where all your traffic's going you know you should see profiles that look correct AWS",
    "start": "1953200",
    "end": "1960280"
  },
  {
    "text": "configs an awesome tool to watch your account watch make sure no changes are taking place and either rollback or",
    "start": "1960280",
    "end": "1966130"
  },
  {
    "text": "alert you based off that and then some non AWS monitoring thing you know make sure you ship your logs you're watching",
    "start": "1966130",
    "end": "1972550"
  },
  {
    "text": "your logs securely backing those logs up they're gonna have information for you that you can work on and then leverage",
    "start": "1972550",
    "end": "1978790"
  },
  {
    "text": "any type of automated remediation as possible so those of you who haven't used guard duty this is the guard duty",
    "start": "1978790",
    "end": "1984700"
  },
  {
    "text": "console just for everybody to see so here's what's going on there",
    "start": "1984700",
    "end": "1989710"
  },
  {
    "text": "it builds these profiles and it shows a lot of really cool information you know",
    "start": "1989710",
    "end": "1995380"
  },
  {
    "text": "by default it's gonna track like SSH brute-force attacks so you actually get to see how many people are trying to get",
    "start": "1995380",
    "end": "2001500"
  },
  {
    "text": "into your stuff it's really makes it a really good point for why you don't publicly expose SSH",
    "start": "2001500",
    "end": "2007860"
  },
  {
    "text": "it'll help find if there's crypto mining type actions taking place in the account which is a fun exploit if anybody's had",
    "start": "2007860",
    "end": "2013559"
  },
  {
    "text": "their account compromised for that one they rack up bills real quick and you can watch those things again alert",
    "start": "2013559",
    "end": "2019740"
  },
  {
    "text": "blackhole those instances for forensics later or just delete them and get rid of them as needed",
    "start": "2019740",
    "end": "2027230"
  },
  {
    "text": "AWS just have some tools to to handle like CDE actions so this is if you're",
    "start": "2027710",
    "end": "2034440"
  },
  {
    "text": "not using a mutable infrastructure they have a system manager which will go through and let you patch your systems",
    "start": "2034440",
    "end": "2041340"
  },
  {
    "text": "through a very nice automated method and so you can have it you know create profiles and documents that go through",
    "start": "2041340",
    "end": "2048470"
  },
  {
    "text": "and patch the systems again this works the same way that parameter store works where I am controls all of the access to",
    "start": "2048470",
    "end": "2055470"
  },
  {
    "text": "this so you can do two party type creation of those documents and make sure you understand what's going into those and then limiting which instances",
    "start": "2055470",
    "end": "2062339"
  },
  {
    "text": "can talk to which things storing secrets in the parameter store so that you can leverage those later we can also",
    "start": "2062339",
    "end": "2068280"
  },
  {
    "text": "leverage AWS inspector to scan our account and what's nice is again like I've said a few times now is there's an",
    "start": "2068280",
    "end": "2074429"
  },
  {
    "text": "event stream that we can subscribe to that we can trigger system manager calls out of so we can actually use inspector",
    "start": "2074429",
    "end": "2081480"
  },
  {
    "text": "to trigger our auto updates to patch our system if you're running immutable infrastructure the system manager ones",
    "start": "2081480",
    "end": "2088290"
  },
  {
    "text": "probably not as important to you but inspector can trigger a role of all your",
    "start": "2088290",
    "end": "2093720"
  },
  {
    "text": "instances if you're running immutable and bring on new patched up-to-date instances so that you're protected there",
    "start": "2093720",
    "end": "2099930"
  },
  {
    "text": "and so again these two tools are here and available for people to run and",
    "start": "2099930",
    "end": "2105150"
  },
  {
    "text": "really protect their systems and be more proactive so as Terry scanning the environment trying to find those TVs and",
    "start": "2105150",
    "end": "2111540"
  },
  {
    "text": "those exploits we have something in the background running the whole time scanning and protecting our own assets",
    "start": "2111540",
    "end": "2116940"
  },
  {
    "text": "in order to make sure that pair you can't get the data off",
    "start": "2116940",
    "end": "2122510"
  },
  {
    "text": "the other problem we ran into is protecting external facing resources",
    "start": "2123109",
    "end": "2128579"
  },
  {
    "text": "right so terry was able to exploit wordpress which is a fun one to exploit so there's a whole suite of tools and",
    "start": "2128579",
    "end": "2135780"
  },
  {
    "text": "some cool things here that we can do that's actually very straightforward and very simple so here we get CloudFront",
    "start": "2135780",
    "end": "2141539"
  },
  {
    "text": "this is kind of the core of what we have running here and CloudFront is amazon CDN and in front of cloud front set",
    "start": "2141539",
    "end": "2148200"
  },
  {
    "text": "shield so we get some DDoS protection so that someone can't just DDoS the account cause overflows are weird things to",
    "start": "2148200",
    "end": "2154470"
  },
  {
    "text": "happen but we can also attack on whack the Web Application Firewall so we can",
    "start": "2154470",
    "end": "2160020"
  },
  {
    "text": "protect against those sequel injections cross-site scripting actions we can auto",
    "start": "2160020",
    "end": "2165270"
  },
  {
    "text": "block any type of nefarious IP address that exists these are auto-updating black lists we can create our own black",
    "start": "2165270",
    "end": "2172289"
  },
  {
    "text": "lists so that IPS that are hitting our system at rates that are not acceptable they can get auto blacklisted for",
    "start": "2172289",
    "end": "2178549"
  },
  {
    "text": "permanent or sets amount of time and we can turn those on and so that provides a nice layer of separation it also",
    "start": "2178549",
    "end": "2186119"
  },
  {
    "text": "separates your infrastructure from the internet because this is all handled through secure networking on Amazon side",
    "start": "2186119",
    "end": "2192059"
  },
  {
    "text": "and so people aren't actually hitting directly to your infrastructure they're going through some layers some proxy",
    "start": "2192059",
    "end": "2198089"
  },
  {
    "text": "layers the other tool that people don't tend to think about and really we didn't think about until we were diving more on",
    "start": "2198089",
    "end": "2204329"
  },
  {
    "text": "this is ELB ELB is actually a fairly decent security tool it provides a layer",
    "start": "2204329",
    "end": "2209789"
  },
  {
    "text": "of separation it only does one thing it just load balances the traffic coming in and only load balances the traffic you",
    "start": "2209789",
    "end": "2216210"
  },
  {
    "text": "want coming in and so leveraging ELB to protect your infrastructure also you know adds that extra layer of separation",
    "start": "2216210",
    "end": "2223230"
  },
  {
    "text": "between your infrastructure and the public internet and so that's a it's an easy tool to use also so now with",
    "start": "2223230",
    "end": "2232020"
  },
  {
    "text": "network architecture okay and so the other thing that we saw is Terry had the",
    "start": "2232020",
    "end": "2238380"
  },
  {
    "text": "ability to pivot pretty badly within our setup and so we have some network architecture guidelines that we didn't",
    "start": "2238380",
    "end": "2244680"
  },
  {
    "text": "follow you know we have this you know your traditional three-tier architecture model where you're really trying to",
    "start": "2244680",
    "end": "2250289"
  },
  {
    "text": "protect your database layers so that your front-end layers aren't ever talking to them directly we also like to introduce archetype",
    "start": "2250289",
    "end": "2257050"
  },
  {
    "text": "architecture really limit the access between those layers whether that be knackles or security groups or firewall",
    "start": "2257050",
    "end": "2263170"
  },
  {
    "text": "rules of some sort so that things are only talking to what they need to talk to and then finally we need to probably",
    "start": "2263170",
    "end": "2269560"
  },
  {
    "text": "limit outbound traffic so that things that don't need to talk to the internet don't talk to the Internet I mean it's",
    "start": "2269560",
    "end": "2275140"
  },
  {
    "text": "not needed and so we can protect things there so here's a picture of our",
    "start": "2275140",
    "end": "2281110"
  },
  {
    "text": "original architecture we had wide-open knackles way wide open as you saw there",
    "start": "2281110",
    "end": "2286780"
  },
  {
    "text": "was a zeros all over the place right security groups I mean I set it up not like pretending like I didn't know",
    "start": "2286780",
    "end": "2293080"
  },
  {
    "text": "networking so I just white listed what was easy was my V PC subnet right that should be safe that's my network right",
    "start": "2293080",
    "end": "2299590"
  },
  {
    "text": "and so we were able to see the security groups allowed the whole fulls of e PC cider out of that there was a lot of a",
    "start": "2299590",
    "end": "2307600"
  },
  {
    "text": "lateral transition and a lot of movement that was able to take place she was able to go from services that I thought were",
    "start": "2307600",
    "end": "2314140"
  },
  {
    "text": "only talking to each other to services I didn't know could talk to each other by taking the WordPress site directly to the database so this is not a good",
    "start": "2314140",
    "end": "2320740"
  },
  {
    "text": "architecture it's pretty wide open and you know fairly easy to get around we",
    "start": "2320740",
    "end": "2325900"
  },
  {
    "text": "also let all outbound traffic so I wasn't protecting anything going out right I was letting it all come out of",
    "start": "2325900",
    "end": "2331660"
  },
  {
    "text": "the network and not doing anything so we can go to a better architecture though and really try to fit into this three",
    "start": "2331660",
    "end": "2338320"
  },
  {
    "text": "layer network architecture so we're just a three layer but we all know WordPress doesn't really fit a three layer",
    "start": "2338320",
    "end": "2344470"
  },
  {
    "text": "architecture very well because it's presentation application the same layer but we can still kind of fit it in here",
    "start": "2344470",
    "end": "2350230"
  },
  {
    "text": "and protect things so here what we've done is set up three distinct subnets and had very strong knackles between all",
    "start": "2350230",
    "end": "2358060"
  },
  {
    "text": "of them and in that case the front-end subnet the first time that was only allowed to talk to the second one and",
    "start": "2358060",
    "end": "2364210"
  },
  {
    "text": "vice versa the second subnet was only allowed to talk to the database layer and the",
    "start": "2364210",
    "end": "2370390"
  },
  {
    "text": "front-end layer and then our database layer was only allowing traffic inbound to it from the application layer the",
    "start": "2370390",
    "end": "2376240"
  },
  {
    "text": "middle layer here we also cleaned up our security groups so as opposed to just",
    "start": "2376240",
    "end": "2381640"
  },
  {
    "text": "allowing all traffic from the V PC we trusted only traffic from specific",
    "start": "2381640",
    "end": "2386980"
  },
  {
    "text": "security groups and so our RDS database for WordPress only allow traffic from the WordPress",
    "start": "2386980",
    "end": "2392890"
  },
  {
    "text": "security group I was the only thing that could take place there our RDS database",
    "start": "2392890",
    "end": "2398020"
  },
  {
    "text": "the super-secret DB only allow traffic from the lambda security group so the",
    "start": "2398020",
    "end": "2403270"
  },
  {
    "text": "WordPress site was no longer able to access directly to the super-secret DB we had knackles in place protecting it",
    "start": "2403270",
    "end": "2410500"
  },
  {
    "text": "we had security groups in place protecting it to make sure things couldn't get back there and so we were",
    "start": "2410500",
    "end": "2415690"
  },
  {
    "text": "able to really limit the amount of pivoting that could take place in the account the other thing we've done is",
    "start": "2415690",
    "end": "2421360"
  },
  {
    "text": "we've blocked internet so a lot of the Amazon resources don't need internet because uh all of the loading and all",
    "start": "2421360",
    "end": "2428860"
  },
  {
    "text": "the stuff happens behind the scenes in Amazon's infrastructure lambdas in the subnet don't need internet access RDS",
    "start": "2428860",
    "end": "2435970"
  },
  {
    "text": "databases don't need internet access so we cut off internet access to a lot of",
    "start": "2435970",
    "end": "2441490"
  },
  {
    "text": "those resources so that they're not able to exfil data directly and really minimize and locked it down and now if",
    "start": "2441490",
    "end": "2448540"
  },
  {
    "text": "we turn on V PC full locks we should see things only behaving this way we can then monitor those react to those and",
    "start": "2448540",
    "end": "2456070"
  },
  {
    "text": "say okay these things are talking they shouldn't be talking and be able to respond pretty quickly to those types of",
    "start": "2456070",
    "end": "2462400"
  },
  {
    "text": "incidents all right so what have we",
    "start": "2462400",
    "end": "2467440"
  },
  {
    "text": "shown you today we have shown you that attackers can use the same tools that",
    "start": "2467440",
    "end": "2472510"
  },
  {
    "text": "your DevOps teams are using those are very powerful tools and they allow you to do a lot of really cool things",
    "start": "2472510",
    "end": "2477910"
  },
  {
    "text": "if attackers can get your credentials they can do those cool things to the cloud api's can really help you map out",
    "start": "2477910",
    "end": "2485860"
  },
  {
    "text": "what is in the account and what you can attack and how its configured and that information is very useful for us",
    "start": "2485860",
    "end": "2492070"
  },
  {
    "text": "hackers who's trying to figure out how they can get at your data and how they can get at your systems then we showed",
    "start": "2492070",
    "end": "2498550"
  },
  {
    "text": "you that read-only access seems innocuous right but it can be very powerful it can give me a lot of",
    "start": "2498550",
    "end": "2503860"
  },
  {
    "text": "information as to how I can attack your account and then finally the wide open",
    "start": "2503860",
    "end": "2509830"
  },
  {
    "text": "networks are a very powerful tool for an attacker they make it very easy to",
    "start": "2509830",
    "end": "2515380"
  },
  {
    "text": "traverse the network and to jump from one system to another called pivoting and so showed you",
    "start": "2515380",
    "end": "2520500"
  },
  {
    "text": "you can do some of that if the network is misconfigured then from the blue team perspective restrict access minimize the",
    "start": "2520500",
    "end": "2527700"
  },
  {
    "text": "amount of stuff people can get to and have those lock down you know to the bare minimum amount of rules automate",
    "start": "2527700",
    "end": "2534150"
  },
  {
    "text": "the deployments we talked about a lot of Auto remediation the more you run automation the less likely you're gonna",
    "start": "2534150",
    "end": "2539910"
  },
  {
    "text": "introduce some type of human error drift into the config and if it's all automated you can just keep running it",
    "start": "2539910",
    "end": "2545190"
  },
  {
    "text": "over and over and over again to make sure your configuration stays the same architecture networks to minimize open",
    "start": "2545190",
    "end": "2551609"
  },
  {
    "text": "ports for pivoting so make sure that things can only talk to things that you",
    "start": "2551609",
    "end": "2557130"
  },
  {
    "text": "want them to talk to you we're not able to cross boundaries where we don't walk boundaries crossed protect your secrets",
    "start": "2557130",
    "end": "2563700"
  },
  {
    "text": "don't embed them in code just because I store that lambda function in an encrypted s3 bucket with a kms key that",
    "start": "2563700",
    "end": "2570210"
  },
  {
    "text": "I manage you know lambda creates a leak that's good for a certain amount of time protect your secrets don't put them",
    "start": "2570210",
    "end": "2576359"
  },
  {
    "text": "there there's tools available it's not difficult to start implementing and leveraging those tools to pull those",
    "start": "2576359",
    "end": "2581670"
  },
  {
    "text": "secret's out securely okay and then monitor everything Amazon has a ton of",
    "start": "2581670",
    "end": "2587280"
  },
  {
    "text": "monitoring tools built into it a ton of event-driven ability with the event streams that you can subscribe to and",
    "start": "2587280",
    "end": "2594030"
  },
  {
    "text": "then auto remediate a lot of those actions and so monitor everything and make sure it's all out there so we just",
    "start": "2594030",
    "end": "2602099"
  },
  {
    "text": "both want to thank you all for coming to our talk you can reach terry on twitter at terry ridicul or me at kholby Alan",
    "start": "2602099",
    "end": "2609740"
  },
  {
    "text": "we're here to answer any questions that you guys have and thank you again",
    "start": "2609740",
    "end": "2616190"
  },
  {
    "text": "there are a couple mics",
    "start": "2623430",
    "end": "2626970"
  },
  {
    "text": "[Music]",
    "start": "2645920",
    "end": "2658489"
  },
  {
    "text": "here we go here we go here we go here we go here we go here we go here we go here",
    "start": "2676380",
    "end": "2686519"
  },
  {
    "text": "we go here we go here we go here we go here we go here we go",
    "start": "2686519",
    "end": "2694089"
  },
  {
    "text": "well as a security receiving only allow",
    "start": "2699660",
    "end": "2704180"
  },
  {
    "text": "so knackles would let you do more refined pathing like your router where",
    "start": "2704810",
    "end": "2710370"
  },
  {
    "text": "you can write a route that's broader but then with the knackles you can refine that route in fact of legally lying",
    "start": "2710370",
    "end": "2715920"
  },
  {
    "text": "parts of that subnet through to different parts of your infrastructure",
    "start": "2715920",
    "end": "2721910"
  },
  {
    "text": "yep",
    "start": "2742750",
    "end": "2745750"
  },
  {
    "text": "the ec2 instance being exfiltrated but it didn't have access this is Jerry the",
    "start": "2756400",
    "end": "2763809"
  },
  {
    "text": "database was protected now no he set up",
    "start": "2763809",
    "end": "2769990"
  },
  {
    "text": "security groups Knowles to block access to that so that lonely that security group from the land I could only talk",
    "start": "2769990",
    "end": "2776309"
  },
  {
    "text": "yeah and the other one so that's already had the laugh in front of it and other security controls woman yeah",
    "start": "2776309",
    "end": "2784619"
  },
  {
    "text": "yeah so you know that was a problem we came up with once and you know",
    "start": "2803940",
    "end": "2809520"
  },
  {
    "text": "effectively what we did is we wrote as tight of knackles as we could right so we and so you can so I mean what you",
    "start": "2809520",
    "end": "2816869"
  },
  {
    "text": "have to do is it's a gamble right you have to subscribe to the IP list make sure that you can respond fast enough",
    "start": "2816869",
    "end": "2822510"
  },
  {
    "text": "that if something changes it doesn't break something so I mean it is an issue and it's a concern and you know it's",
    "start": "2822510",
    "end": "2829140"
  },
  {
    "text": "something that you you have to discover for your application what works the best just just want to repeat that question",
    "start": "2829140",
    "end": "2835470"
  },
  {
    "text": "really quickly if you didn't hear it the question is about some of the aid abuse services that require internet access",
    "start": "2835470",
    "end": "2840539"
  },
  {
    "text": "and yes you do need to look at those on a case-by-case basis and decide if you want to use those those services that",
    "start": "2840539",
    "end": "2847079"
  },
  {
    "text": "are required to traverse the internet but in some cases some of these services don't actually go over the internet they",
    "start": "2847079",
    "end": "2852329"
  },
  {
    "text": "stay within the AWS network so you can decide if that's okay or not but it is it is it does make things challenging I",
    "start": "2852329",
    "end": "2857789"
  },
  {
    "text": "was just working with one of those the other day and talking to someone it AWS you know about these changing IP",
    "start": "2857789",
    "end": "2863069"
  },
  {
    "text": "addresses yeah right yes yeah I expect",
    "start": "2863069",
    "end": "2871680"
  },
  {
    "text": "more of those VPC end points are on the way",
    "start": "2871680",
    "end": "2875299"
  },
  {
    "text": "well so that's where I think immutability and automation become a",
    "start": "2894380",
    "end": "2899510"
  },
  {
    "text": "bigger player and that is you know whether using cloud formation or terraform they're designed to be ran",
    "start": "2899510",
    "end": "2905960"
  },
  {
    "text": "over and over and over so you're reversing any drift that's happened and then cloud formation what last week",
    "start": "2905960",
    "end": "2912110"
  },
  {
    "text": "released the drift feature now so it scans your account and like will identify drift actions and then you can",
    "start": "2912110",
    "end": "2918920"
  },
  {
    "text": "subscribe to those or in the case of terraform just terraform apply over and over again you know that's a lot of what",
    "start": "2918920",
    "end": "2925460"
  },
  {
    "text": "we do is just reapply the same templates over and over and I'll back out a lot of those changes that's also though where",
    "start": "2925460",
    "end": "2931850"
  },
  {
    "text": "you start really having to be careful with scoping the credentials is to make sure that you know the users are only",
    "start": "2931850",
    "end": "2938360"
  },
  {
    "text": "have access to the things they actually need access to versus larger scopes so",
    "start": "2938360",
    "end": "2943540"
  },
  {
    "text": "just for those who couldn't hear I want to repeat that again there's a question is what do you do with you know people who have broad access an account how you",
    "start": "2943540",
    "end": "2949850"
  },
  {
    "text": "deal with that ideally we want to scope that down but actually wrote a paper on this topic balancing innovation and",
    "start": "2949850",
    "end": "2956540"
  },
  {
    "text": "security and AWS and you have kind of the upfront model where you're trying to",
    "start": "2956540",
    "end": "2962270"
  },
  {
    "text": "block things and sometimes the security team doesn't have a control over that so the other side is the reactionary and",
    "start": "2962270",
    "end": "2967700"
  },
  {
    "text": "you can use tools like you know Prowler or other tools that will scan your environment neccessity that will scan",
    "start": "2967700",
    "end": "2973700"
  },
  {
    "text": "AWS looking for problems so it was just a matter of you know using those scanning tools after the fact if you",
    "start": "2973700",
    "end": "2978950"
  },
  {
    "text": "can't kind of get in front of people there's a lot of tools out there",
    "start": "2978950",
    "end": "2984370"
  },
  {
    "text": "well so she stole the users so the question is is how do you protect because okay so in the example here you",
    "start": "2999540",
    "end": "3006630"
  },
  {
    "text": "had to have set a credentials assume the role right so how do you protect and get someone using those credentials to do something well that's was in the example",
    "start": "3006630",
    "end": "3013440"
  },
  {
    "text": "as those credentials couldn't do anything right they could only change your password so the most damage that",
    "start": "3013440",
    "end": "3018480"
  },
  {
    "text": "Terry could do their point is change my account password you know because that's",
    "start": "3018480",
    "end": "3023670"
  },
  {
    "text": "all those credentials allowed she'd have to have the multi-factor authentication method to be able to assume the role",
    "start": "3023670",
    "end": "3029100"
  },
  {
    "text": "into a privilege so yes she would still get a hold of cred she could still do a few things like change password but",
    "start": "3029100",
    "end": "3035100"
  },
  {
    "text": "because we've required someone else to remove MFA she can't go remove my MFA and she can't read anything in the couch",
    "start": "3035100",
    "end": "3042630"
  },
  {
    "text": "so she can't even go through and find out what roles could I assume she can only say oh I can change a password or",
    "start": "3042630",
    "end": "3049380"
  },
  {
    "text": "change your name or change your SSH key and so that I mean there's still a",
    "start": "3049380",
    "end": "3055380"
  },
  {
    "text": "little risk there but because we protect it off required the MFA for the other pieces that we you know we have that",
    "start": "3055380",
    "end": "3063450"
  },
  {
    "text": "protected off yeah right because if you",
    "start": "3063450",
    "end": "3072300"
  },
  {
    "text": "want to like deal with building ec2 instance we have a role that's easy to admin that's the only role that can",
    "start": "3072300",
    "end": "3077520"
  },
  {
    "text": "build instances you have to MFA into that because it's easy to admin we say you can only have that rule for 15",
    "start": "3077520",
    "end": "3083190"
  },
  {
    "text": "minutes right so even at that so even if you were to steal them she's gonna only steal them for a very very short period",
    "start": "3083190",
    "end": "3089310"
  },
  {
    "text": "of time and that's configurable cuz I know like when developers are using em I pay that so you want to make you have to",
    "start": "3089310",
    "end": "3096450"
  },
  {
    "text": "kind of balance out at that time frame yes that's why you know generally with like read-only type things you know",
    "start": "3096450",
    "end": "3102720"
  },
  {
    "text": "developers are allowed to have that for 4-6 hours no look they're workday versus",
    "start": "3102720",
    "end": "3108869"
  },
  {
    "text": "you know an administrator set of credentials you requiring it off fairly frequently but in an administrators",
    "start": "3108869",
    "end": "3114510"
  },
  {
    "text": "gonna be the type of person to be a little more conscientious of that and hopefully deal with it yeah",
    "start": "3114510",
    "end": "3122000"
  },
  {
    "text": "so the question is sometimes use VPC endpoints and that they limit the",
    "start": "3144859",
    "end": "3150349"
  },
  {
    "text": "traffic to things you know within a particular VPC but then what if those won't exist what do you do in that case",
    "start": "3150349",
    "end": "3158049"
  },
  {
    "text": "DynamoDB I think dynamodb has V PC endpoints now that's pretty new but yeah and it's a choice that you have to make",
    "start": "3158440",
    "end": "3165469"
  },
  {
    "text": "and so one of the problems with cloud is people rush to cloud and they don't understand the security controls right",
    "start": "3165469",
    "end": "3170779"
  },
  {
    "text": "so you should make conscious decisions we're going to use this service this service has appropriate security controls and we're going to configure it",
    "start": "3170779",
    "end": "3177799"
  },
  {
    "text": "properly and I definitely will be into Capital One we definitely went through and looked at every single resource who",
    "start": "3177799",
    "end": "3183319"
  },
  {
    "text": "said does it have internet does it require internet access or can we lock it down within a V PC and we are",
    "start": "3183319",
    "end": "3188599"
  },
  {
    "text": "actually one of the companies pushing for security of s3 buckets I mean one of the reasons they came out with VC",
    "start": "3188599",
    "end": "3194269"
  },
  {
    "text": "endpoints so yeah you have to consciously make those decisions about what these services are allowing and if",
    "start": "3194269",
    "end": "3200509"
  },
  {
    "text": "that's okay with you according to your security policies yeah otherwise you",
    "start": "3200509",
    "end": "3205729"
  },
  {
    "text": "just have to you have the traffic going over the network you make sure it's encrypted over the network you make sure",
    "start": "3205729",
    "end": "3211910"
  },
  {
    "text": "it's authenticated and and you allow that to traverse the internet if you choose to do that",
    "start": "3211910",
    "end": "3218890"
  },
  {
    "text": "Oh going from different and councilors definitely a new service I think it was announced last year event called private",
    "start": "3236770",
    "end": "3242770"
  },
  {
    "text": "link and you can set up endpoints between accounts some similar to a V PC endpoint I should have mentioned that",
    "start": "3242770",
    "end": "3248170"
  },
  {
    "text": "just now and you can set up MPs with secure access and define what can access",
    "start": "3248170",
    "end": "3253180"
  },
  {
    "text": "that between accounts and there's also something called V PC peering if you want to peer to different accounts and",
    "start": "3253180",
    "end": "3258970"
  },
  {
    "text": "allow them to talk to each other over the Amazon network b pc peering will do that for you",
    "start": "3258970",
    "end": "3265109"
  },
  {
    "text": "so the question is is there any best practice for MFA in your pipeline I",
    "start": "3283490",
    "end": "3288510"
  },
  {
    "text": "don't I've never seen it published but I but you can definitely put MFA if you set up your Jenkins server to use Active",
    "start": "3288510",
    "end": "3294840"
  },
  {
    "text": "Directory to log in you can definitely associate that with these third-party services that enforce MFA that way",
    "start": "3294840",
    "end": "3300359"
  },
  {
    "text": "before someone logs in to run a job to deploy something they have to use MFA to get into that and you can also put MFA",
    "start": "3300359",
    "end": "3306960"
  },
  {
    "text": "on your github repo or whatever sort of source code repository you have so there's definitely ways you can use MFA",
    "start": "3306960",
    "end": "3314070"
  },
  {
    "text": "for that yeah so in that case you tend to run your Jenkins server in AWS give it a role and minimal set of permissions",
    "start": "3314070",
    "end": "3320820"
  },
  {
    "text": "or run multiple masters that can do different things then you protect the Jenkins servers or CID CI CD servers",
    "start": "3320820",
    "end": "3328740"
  },
  {
    "text": "with MFA so that people it's only limited not people can get into them there's not really an easy way to inject",
    "start": "3328740",
    "end": "3335910"
  },
  {
    "text": "I mean you could probably build a mechanism with a gate that requires an input of an MFA to do an assumed role",
    "start": "3335910",
    "end": "3342030"
  },
  {
    "text": "type of a thing but in that case it's generally easier to protect the Jenkins servers and lock those down put",
    "start": "3342030",
    "end": "3349590"
  },
  {
    "text": "everything in front of them and then give them a role to do the actions and then run multiple Jenkins",
    "start": "3349590",
    "end": "3354869"
  },
  {
    "text": "servers to minimize your role carry over",
    "start": "3354869",
    "end": "3359930"
  },
  {
    "text": "so you've got a situation where some of these systems are fairly Byzantine and",
    "start": "3359930",
    "end": "3366180"
  },
  {
    "text": "arcane and you think you've locked everything down and gone through all the best practices but you know there's some",
    "start": "3366180",
    "end": "3373230"
  },
  {
    "text": "little pesky part that didn't have all the knackles applied to it etc etc so my",
    "start": "3373230",
    "end": "3378359"
  },
  {
    "text": "question is what is your recommended belt-and-suspenders approach for how do",
    "start": "3378359",
    "end": "3384359"
  },
  {
    "text": "I catch it when somebody gets past all of this clever stuff that I've done and",
    "start": "3384359",
    "end": "3389450"
  },
  {
    "text": "things start to happen in the background how do I set up cloud watch alarms that yeah that will alert me before terrible",
    "start": "3389450",
    "end": "3397410"
  },
  {
    "text": "things happen so I actually wrote a paper the one I was mentioning on",
    "start": "3397410",
    "end": "3405050"
  },
  {
    "text": "security and innovation one of the things I did in there basically looked for blocked Network",
    "start": "3405050",
    "end": "3410440"
  },
  {
    "text": "deny traffic because if you think about denied traffic should have never happened right because if things are",
    "start": "3410440",
    "end": "3417260"
  },
  {
    "text": "configured correctly this should only be hanging allowed and so you can look for something that's hitting denied traffic",
    "start": "3417260",
    "end": "3423800"
  },
  {
    "text": "you can also use guard duty like could we mention to look for anomalous behavior in your account for example on",
    "start": "3423800",
    "end": "3431119"
  },
  {
    "text": "the network if you have people who are allowed to make network changes I'm not sure if this is what you mean but",
    "start": "3431119",
    "end": "3436340"
  },
  {
    "text": "there's a tool that we use called dome nine a capital one and it would monitor your account and if someone created",
    "start": "3436340",
    "end": "3443030"
  },
  {
    "text": "rules that were out of compliance it would flip it back in three minutes so there's a lot of tools out there that can help you with your configuration",
    "start": "3443030",
    "end": "3449869"
  },
  {
    "text": "monitoring as well yeah I think it's the big thing is you know if you think you",
    "start": "3449869",
    "end": "3455180"
  },
  {
    "text": "have it locked down is turn off flow logs and look for denies watch that pattern I mean AWS publishes kibana",
    "start": "3455180",
    "end": "3461630"
  },
  {
    "text": "dashboards for you to be able to visualize it nicely write your own and just start looking at it I mean you know",
    "start": "3461630",
    "end": "3468440"
  },
  {
    "text": "what it should do and so when things are starting to do things they shouldn't do it's gonna start standing out but it",
    "start": "3468440",
    "end": "3473660"
  },
  {
    "text": "does takes some time I mean that what's the downside to it is that's why a tool like guard duties pretty he's pretty",
    "start": "3473660",
    "end": "3479570"
  },
  {
    "text": "slick because it learns and will kind of build a profile for you right off the bat and then be able to alert and the",
    "start": "3479570",
    "end": "3489320"
  },
  {
    "text": "other thing is we really learn like you know we had a small team I watched a very small convene we didn't try to do",
    "start": "3489320",
    "end": "3495980"
  },
  {
    "text": "everything out the gate we just tried to create that pipeline so we could monitor and then as we learned like oh that person did something we didn't want them",
    "start": "3495980",
    "end": "3502280"
  },
  {
    "text": "to do we can go back into that pipeline and build it in or if you don't have access to the pipeline or maybe you have",
    "start": "3502280",
    "end": "3507619"
  },
  {
    "text": "some utterly mediation or alerting on the back end so it's a continually iterative iterative process as you learn",
    "start": "3507619",
    "end": "3513380"
  },
  {
    "text": "what people are doing and what they shouldn't be doing there's also a cool tool and I am if you have users where",
    "start": "3513380",
    "end": "3520040"
  },
  {
    "text": "you can go look at what they've accessed in a last period of time and you can see if someone's doing something they shouldn't or they have a lot of",
    "start": "3520040",
    "end": "3526280"
  },
  {
    "text": "permissions they're not using you want to remove them I think there's like four tabs when you go look at that user and I am you can check that out as well",
    "start": "3526280",
    "end": "3534490"
  },
  {
    "text": "awesome thank you guys again so you're",
    "start": "3537520",
    "end": "3581150"
  },
  {
    "text": "talking about tea out of AWS though right so here if you're outside of AWC",
    "start": "3581150",
    "end": "3588319"
  },
  {
    "text": "on the challenge because you don't have the keys outside or the roles outside of eight of us right so you're gonna have",
    "start": "3588319",
    "end": "3594319"
  },
  {
    "text": "to think about some sort of authentication mechanism and I would really suggest if you're in a company",
    "start": "3594319",
    "end": "3600349"
  },
  {
    "text": "that use Active Directory if possible instead of those developer keys because if you think about it when someone",
    "start": "3600349",
    "end": "3606170"
  },
  {
    "text": "leaves the company you want to be able to quickly shut down their access anyone with those keys can use those credentials when just an Active",
    "start": "3606170",
    "end": "3612829"
  },
  {
    "text": "Directory you can quickly shut them down or if they move roles you could change them so if you're within a company and",
    "start": "3612829",
    "end": "3618319"
  },
  {
    "text": "you have Active Directory I would say use that if you're not using Active Directory if you're using especially if",
    "start": "3618319",
    "end": "3624319"
  },
  {
    "text": "you're using a SAS application make sure you have per device or per user credentials don't just have one API key",
    "start": "3624319",
    "end": "3630790"
  },
  {
    "text": "and there's a really good standard that's come out for authentication that",
    "start": "3630790",
    "end": "3636290"
  },
  {
    "text": "I like called Fido F I do and it really talks about like for example your your authenticating from a cell phone or",
    "start": "3636290",
    "end": "3642710"
  },
  {
    "text": "something like that not just cell phone but it's a really good authentication standard to take a",
    "start": "3642710",
    "end": "3647720"
  },
  {
    "text": "look at",
    "start": "3647720",
    "end": "3650109"
  },
  {
    "text": "yeah I would say take a look at Fido if you can and just you know if you if",
    "start": "3655150",
    "end": "3662000"
  },
  {
    "text": "you're in a company using Active Directory but if you have a third-party service or you know you're gonna want to",
    "start": "3662000",
    "end": "3667099"
  },
  {
    "text": "look at I like phyto because you really have a private identity that authenticates to",
    "start": "3667099",
    "end": "3673849"
  },
  {
    "text": "the service and only that identity has their keys I actually looked at an authentication service that a company",
    "start": "3673849",
    "end": "3680329"
  },
  {
    "text": "was acquiring and it had you know kind of a different model where it had administrators administrating keys I'm",
    "start": "3680329",
    "end": "3685880"
  },
  {
    "text": "like well if anyone if any two people can get that credential you can't count on that being identity for that user so",
    "start": "3685880",
    "end": "3691190"
  },
  {
    "text": "you want to get in that mindset and phyto has some really good recommendations in that case thank you",
    "start": "3691190",
    "end": "3699980"
  },
  {
    "text": "everybody",
    "start": "3699980",
    "end": "3702220"
  }
]