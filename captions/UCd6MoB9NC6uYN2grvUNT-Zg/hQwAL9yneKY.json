[
  {
    "start": "0",
    "end": "32000"
  },
  {
    "text": "so hello uh are you guys here on the back",
    "start": "2159",
    "end": "8080"
  },
  {
    "text": "okay so hello everyone my name is andre fatala i'm a research and development manager",
    "start": "8080",
    "end": "15120"
  },
  {
    "text": "in magazine visa and today we are going to talk about uh product recommendation systems based",
    "start": "15120",
    "end": "23199"
  },
  {
    "text": "on the graph database thank you",
    "start": "23199",
    "end": "31359"
  },
  {
    "text": "i will start talking a little bit about our company magazine louisa uh and i need to explain something here",
    "start": "31359",
    "end": "38559"
  },
  {
    "start": "32000",
    "end": "32000"
  },
  {
    "text": "that magazine is not a paper magazine it's just a old-fashioned way to",
    "start": "38559",
    "end": "44399"
  },
  {
    "text": "name it stores in brazil our company is 58 years old",
    "start": "44399",
    "end": "51920"
  },
  {
    "text": "now and is the one of the largest applies with a chance in brazil it's",
    "start": "51920",
    "end": "59520"
  },
  {
    "text": "focused in the middle and low middle incoming classes there and magazine louisa",
    "start": "59520",
    "end": "68240"
  },
  {
    "text": "has more than 530 stores there are physical stores eight",
    "start": "68240",
    "end": "73360"
  },
  {
    "text": "distribution centers more than 23 000",
    "start": "73360",
    "end": "78479"
  },
  {
    "text": "employees and one base with 23 million customers and magazine visa",
    "start": "78479",
    "end": "86240"
  },
  {
    "text": "has a strong multi-channel strategy in brazil",
    "start": "86240",
    "end": "92560"
  },
  {
    "text": "so but we are here to talk about uh recommendation systems and we just start",
    "start": "92880",
    "end": "101200"
  },
  {
    "text": "developed bobby that's the name of our project in the beginning of this year after",
    "start": "101200",
    "end": "108079"
  },
  {
    "text": "we realized that we can just get and grab a lot of information",
    "start": "108079",
    "end": "114399"
  },
  {
    "text": "about another project that we released that there where that is a social commerce",
    "start": "114399",
    "end": "122079"
  },
  {
    "text": "the social commerce we just able people to create and publish stores",
    "start": "122079",
    "end": "128879"
  },
  {
    "text": "inside social networks like facebook and rcoot and people can chose",
    "start": "128879",
    "end": "136640"
  },
  {
    "text": "up to 60 products and insert in their stores and publish it in this social networks",
    "start": "136640",
    "end": "144239"
  },
  {
    "text": "and uh we just came up with idea of grab all this data collect it",
    "start": "144239",
    "end": "151120"
  },
  {
    "text": "insert in the database and try to identify some specific behaviors",
    "start": "151120",
    "end": "157760"
  },
  {
    "text": "in this database and for that we we just choose to do",
    "start": "157760",
    "end": "164319"
  },
  {
    "text": "this using graphs",
    "start": "164319",
    "end": "170800"
  },
  {
    "start": "170000",
    "end": "170000"
  },
  {
    "text": "first of all talking about recommendation systems the main idea is that that",
    "start": "170800",
    "end": "178480"
  },
  {
    "text": "in magazine louisa will have a huge inventory with more than 5 000 products",
    "start": "178480",
    "end": "185120"
  },
  {
    "text": "items that uh when come someone come to our website wants to buy",
    "start": "185120",
    "end": "192080"
  },
  {
    "text": "something specifically like a light tv or a blu-ray player",
    "start": "192080",
    "end": "197280"
  },
  {
    "text": "and we need to identify this behavior it try to help this specific",
    "start": "197280",
    "end": "204959"
  },
  {
    "text": "user to hit their goal by trying to recommend this type of",
    "start": "204959",
    "end": "210560"
  },
  {
    "text": "products so and in the recommended systems uh the main idea is to provide",
    "start": "210560",
    "end": "217440"
  },
  {
    "text": "information and items the like to be interest to a person and that is our main goal",
    "start": "217440",
    "end": "225440"
  },
  {
    "text": "with bob and here we are going to explain how we",
    "start": "225440",
    "end": "234560"
  },
  {
    "text": "collect store do some queries and analyze this data",
    "start": "234560",
    "end": "241760"
  },
  {
    "text": "and to collect and store this data to store we chosen a",
    "start": "241760",
    "end": "248400"
  },
  {
    "text": "graph database that is more a natural way to think about uh how to start this",
    "start": "248400",
    "end": "255200"
  },
  {
    "text": "type of behaviors because we can get uh some objects or things and nodes",
    "start": "255200",
    "end": "263680"
  },
  {
    "text": "and create relationship between these things so the idea the idea is to",
    "start": "263680",
    "end": "270240"
  },
  {
    "text": "get a person and create an edge to connect this person to a product",
    "start": "270240",
    "end": "275440"
  },
  {
    "text": "uh using the action that use the user did with the sprouts like",
    "start": "275440",
    "end": "282240"
  },
  {
    "text": "uh viewed some product page uh about a latch v or add the product to",
    "start": "282240",
    "end": "288240"
  },
  {
    "text": "cart that's why we use the graph database so uh i don't know if you guys are",
    "start": "288240",
    "end": "295120"
  },
  {
    "text": "familiar with your graphs but the main idea is to",
    "start": "295120",
    "end": "300400"
  },
  {
    "text": "create the relationship between nodes by you connecting ads and",
    "start": "300400",
    "end": "308720"
  },
  {
    "text": "now we are you're going to go deeper in the technology part and hannah to introduce",
    "start": "309199",
    "end": "315600"
  },
  {
    "text": "your graph stack so let's start talking about",
    "start": "315600",
    "end": "322720"
  },
  {
    "text": "the technology that we use our graph stack is based on open source technologies",
    "start": "322720",
    "end": "329199"
  },
  {
    "text": "and we use lots of languages mainly python and java",
    "start": "329199",
    "end": "334720"
  },
  {
    "text": "our graph database is titan titan is developed and maintained by the aurelius team it is a company",
    "start": "334720",
    "end": "341919"
  },
  {
    "text": "focused on graph products titan is open source and is free to use even for commercial",
    "start": "341919",
    "end": "348639"
  },
  {
    "text": "usage so it is good for us it's a distributed graph database so it scales",
    "start": "348639",
    "end": "356000"
  },
  {
    "start": "353000",
    "end": "353000"
  },
  {
    "text": "a lot it can work up to two billion of edges in a graph",
    "start": "356000",
    "end": "361759"
  },
  {
    "text": "titan is a vertex centric graph database so you always need a",
    "start": "361759",
    "end": "368400"
  },
  {
    "text": "starting point to start the traversal on the graph so it's basically for otp queries",
    "start": "368400",
    "end": "374479"
  },
  {
    "text": "and we'll talk about later global graph operations and titan has native integration with",
    "start": "374479",
    "end": "380639"
  },
  {
    "text": "the tinker pop stack so you can use any technology that is part of the tinker pop stack",
    "start": "380639",
    "end": "387280"
  },
  {
    "text": "such as gremlin that will talk in the next slides when working with titan you can choose a",
    "start": "387280",
    "end": "393600"
  },
  {
    "text": "storage layer like hbase berkeley db or cassandra",
    "start": "393600",
    "end": "398960"
  },
  {
    "text": "in our case we decide to go with cassandra mainly because we can have high",
    "start": "398960",
    "end": "404560"
  },
  {
    "text": "availability without a single point of failure so this is the main reason that we chose",
    "start": "404560",
    "end": "410400"
  },
  {
    "text": "cassandra over hbase also cassandra has elastic scalability",
    "start": "410400",
    "end": "416240"
  },
  {
    "text": "this is very important because we started with low traffic and then with the loads going up we",
    "start": "416240",
    "end": "422720"
  },
  {
    "text": "just start adding more nodes to the cluster titan has a good caching layer so it can",
    "start": "422720",
    "end": "431039"
  },
  {
    "text": "speed up the queries and has built-in replication this is also very important",
    "start": "431039",
    "end": "438160"
  },
  {
    "start": "438000",
    "end": "438000"
  },
  {
    "text": "so i'm going to show you the flow it's pretty simple how how do we store the user's data",
    "start": "438160",
    "end": "444400"
  },
  {
    "text": "whatever there is an interaction of a user with a product on the website the magazine luizes",
    "start": "444400",
    "end": "451599"
  },
  {
    "text": "sends a request server side to our api this request is received by our",
    "start": "451599",
    "end": "458639"
  },
  {
    "text": "last load balancing and sent to one of the instances that are running",
    "start": "458639",
    "end": "465280"
  },
  {
    "text": "our api so each instance has a titan",
    "start": "465280",
    "end": "470319"
  },
  {
    "text": "graph running and titan gets these sorry titan gets these regrets and",
    "start": "470319",
    "end": "478080"
  },
  {
    "text": "saves the interactions on the storage layer in graph rewards we our graph model is",
    "start": "478080",
    "end": "484960"
  },
  {
    "start": "481000",
    "end": "481000"
  },
  {
    "text": "basically this a person can create a session",
    "start": "484960",
    "end": "490479"
  },
  {
    "text": "this session is created in a channel like a physical store or the website",
    "start": "490479",
    "end": "497680"
  },
  {
    "text": "so because magazine louisa is a multi-channel company and",
    "start": "497680",
    "end": "504639"
  },
  {
    "text": "a session interacts with an item with a product and we built a scoring system for that",
    "start": "504639",
    "end": "510560"
  },
  {
    "text": "here so whenever a user views a product we add one point to the score when he",
    "start": "510560",
    "end": "518320"
  },
  {
    "text": "adds a product to the cart we add more 13 points and when he buys the product wet we add",
    "start": "518320",
    "end": "525360"
  },
  {
    "text": "31 points",
    "start": "525360",
    "end": "528560"
  },
  {
    "text": "so uh as i said uh the idea of create this those graph and",
    "start": "532959",
    "end": "539519"
  },
  {
    "text": "the points for through the interactions is to try to identify the interest of our",
    "start": "539519",
    "end": "546399"
  },
  {
    "text": "users and some specific products are category and here we are going to explain how",
    "start": "546399",
    "end": "554480"
  },
  {
    "text": "we are using this the data collected to do recommendations in our website and",
    "start": "554480",
    "end": "561920"
  },
  {
    "text": "magazine visa has around 15 million use",
    "start": "561920",
    "end": "566959"
  },
  {
    "text": "visitors per month and something like uh 200 millions page views per",
    "start": "566959",
    "end": "573040"
  },
  {
    "text": "month so that's is the volume of the the track that you need to handle",
    "start": "573040",
    "end": "578720"
  },
  {
    "text": "with your system to just to write the the interactions and",
    "start": "578720",
    "end": "585600"
  },
  {
    "text": "to deliver some recommendations in original your cassandra cluster uh",
    "start": "585600",
    "end": "594160"
  },
  {
    "start": "594000",
    "end": "594000"
  },
  {
    "text": "so we started create some base recommendations",
    "start": "594160",
    "end": "599360"
  },
  {
    "text": "as you guys can see in a lot of e-commerce players like amazon best buy target",
    "start": "599360",
    "end": "606560"
  },
  {
    "text": "and these basic recommendations allow us to create some uh derivations",
    "start": "606560",
    "end": "613040"
  },
  {
    "text": "and in the type of recommendations that we are using in our website so",
    "start": "613040",
    "end": "620320"
  },
  {
    "text": "uh here's we have uh like a draw diagram to to explain some these basic",
    "start": "620320",
    "end": "627200"
  },
  {
    "text": "recommendations one of those is the hopeful design also field and we get the",
    "start": "627200",
    "end": "633040"
  },
  {
    "text": "xbox uh 306 to explain so when someone access the",
    "start": "633040",
    "end": "640320"
  },
  {
    "text": "xbox and after the next the page view is on the xbox one the gta",
    "start": "640320",
    "end": "646959"
  },
  {
    "text": "5 controller are the past three and who bought the zeitan also bought",
    "start": "646959",
    "end": "654160"
  },
  {
    "text": "something like uh someone can buy the xbox and the game",
    "start": "654160",
    "end": "659519"
  },
  {
    "text": "the dta and a controller we identify all those those behaviors",
    "start": "659519",
    "end": "666800"
  },
  {
    "text": "uh another type of recommend the base recommendation is bought after view some items so",
    "start": "666959",
    "end": "672640"
  },
  {
    "text": "the customer just see the the xbox but choose the best three",
    "start": "672640",
    "end": "680880"
  },
  {
    "text": "and here we start doing some uh derivations like the upsell and when someone is inside the swim the",
    "start": "680880",
    "end": "689360"
  },
  {
    "text": "viewing the xbox 306 and you can say hey we have a new version now is the xbox",
    "start": "689360",
    "end": "696000"
  },
  {
    "text": "one why not to buy this this product and now we're going to talk about how to",
    "start": "696000",
    "end": "704079"
  },
  {
    "start": "700000",
    "end": "700000"
  },
  {
    "text": "query the graphs to grab those recommendations",
    "start": "704079",
    "end": "708880"
  },
  {
    "text": "for graph traversals we use a language called gremling is anyone here familiar with grammarly",
    "start": "711120",
    "end": "717600"
  },
  {
    "text": "oh first time i see someone so gremlin is actually a groovy domain specific",
    "start": "717600",
    "end": "724639"
  },
  {
    "start": "724000",
    "end": "724000"
  },
  {
    "text": "language designed for graph traverses it's pretty",
    "start": "724639",
    "end": "730480"
  },
  {
    "text": "easy to learn extremely easy it has a great community it this part is very important for us in",
    "start": "730480",
    "end": "738160"
  },
  {
    "text": "our department whenever we are choosing a technology we see it has a good community so we can",
    "start": "738160",
    "end": "744800"
  },
  {
    "text": "learn more it sees that it's more stable uh language is another point and this is",
    "start": "744800",
    "end": "751519"
  },
  {
    "text": "part of the tinker pop stack so it works with any database that",
    "start": "751519",
    "end": "756560"
  },
  {
    "text": "implements the blueprints api and so if we decide to move",
    "start": "756560",
    "end": "762560"
  },
  {
    "text": "our database to neo4j or ndb or any other graph database that works",
    "start": "762560",
    "end": "768959"
  },
  {
    "text": "with tinkerpop we don't lose all of our scripts and everything that we made",
    "start": "768959",
    "end": "776560"
  },
  {
    "text": "so i'm going to show you now how easy rambling needs to to carry the graph this is a really",
    "start": "776560",
    "end": "783200"
  },
  {
    "text": "small graph for example we have six vertices and a few edges connecting them and",
    "start": "783200",
    "end": "790320"
  },
  {
    "text": "we want to know which people view the product and the product in question would be the first one on the left",
    "start": "790320",
    "end": "796399"
  },
  {
    "text": "that is the letter v 42 inches so translated to grambling it would be like",
    "start": "796399",
    "end": "802560"
  },
  {
    "text": "this g dot v4 dot in view it so explaining step by step g is the graph",
    "start": "802560",
    "end": "809600"
  },
  {
    "text": "instance that that we have v4 gets the starting point like i said when",
    "start": "809600",
    "end": "816079"
  },
  {
    "text": "working with titan we always need the starting point and four would be the id of this verse this",
    "start": "816079",
    "end": "823600"
  },
  {
    "text": "vertex and then we get the incoming vertices with edge label",
    "start": "823600",
    "end": "829920"
  },
  {
    "text": "viewed so describe it is pretty simple which finishes here and the rest of the graph",
    "start": "829920",
    "end": "836160"
  },
  {
    "text": "is not touched so even if you had a huge graph with billions of edges it would be",
    "start": "836160",
    "end": "844240"
  },
  {
    "text": "pretty fast because we wouldn't touch the the entire graph only the the starting point and what's",
    "start": "844240",
    "end": "850880"
  },
  {
    "text": "around here and now a slightly more complex example",
    "start": "850880",
    "end": "856079"
  },
  {
    "text": "it's still pretty easy it's actually a base recommendation",
    "start": "856079",
    "end": "861920"
  },
  {
    "text": "we're gonna get the products that were viewed after viewing the first one so who viewed also viewed",
    "start": "861920",
    "end": "869440"
  },
  {
    "text": "like the the last example we got the starting point then the people who viewed the zeitung",
    "start": "869440",
    "end": "876240"
  },
  {
    "text": "and after that for each person we get the outcome vertices we've had to label",
    "start": "876240",
    "end": "882160"
  },
  {
    "text": "view it and if you see the second product the lcd tv",
    "start": "882160",
    "end": "888800"
  },
  {
    "text": "42 inches uh is touched by two different edges so",
    "start": "888800",
    "end": "893920"
  },
  {
    "text": "we could infer in a recommendation that this is a more relevant product and would be on the top of the list this",
    "start": "893920",
    "end": "900880"
  },
  {
    "text": "is a simple example when working with production in production a product can have up to five",
    "start": "900880",
    "end": "909360"
  },
  {
    "text": "hundred thousand connections so we can get user for information",
    "start": "909360",
    "end": "915120"
  },
  {
    "text": "i'm going to show you now how do we manage to to pre-process those recommendations as",
    "start": "915760",
    "end": "922079"
  },
  {
    "start": "916000",
    "end": "916000"
  },
  {
    "text": "i said in production we have lots of edges and this can't be calculated in real",
    "start": "922079",
    "end": "927199"
  },
  {
    "text": "time so we pre-process those base recommendations to use them later for creating the",
    "start": "927199",
    "end": "934480"
  },
  {
    "text": "personalized ones so once or twice a day depends on the",
    "start": "934480",
    "end": "940079"
  },
  {
    "text": "volume of traffic for each product the the web application dispatches a task",
    "start": "940079",
    "end": "946079"
  },
  {
    "text": "to simple kiwi service the sqs with the product id that must be",
    "start": "946079",
    "end": "952839"
  },
  {
    "text": "processed whenever a spot instance is available it gets the task from the queue",
    "start": "952839",
    "end": "959360"
  },
  {
    "text": "and start calculating all those base recommendations who viewed also view the hobart also bought",
    "start": "959360",
    "end": "965920"
  },
  {
    "text": "and then create shortcuts between those the vertices like product a",
    "start": "965920",
    "end": "973040"
  },
  {
    "text": "we create a shortcut edge to product that b like also viewed and then when we need",
    "start": "973040",
    "end": "979839"
  },
  {
    "text": "to to get those recommendations it's pretty fast and all the logs that are produced in",
    "start": "979839",
    "end": "986000"
  },
  {
    "text": "this process we send the letter to s3 so so we can analyze later",
    "start": "986000",
    "end": "993759"
  },
  {
    "text": "so another type of approach that we are using on using our graph is to do some",
    "start": "995759",
    "end": "1002880"
  },
  {
    "text": "personalizing emails and here we have something really cool to say because",
    "start": "1002880",
    "end": "1008639"
  },
  {
    "text": "uh before we create the bobby our crm department is not able to do",
    "start": "1008639",
    "end": "1015199"
  },
  {
    "text": "this type of emails on our uh e-commerce so",
    "start": "1015199",
    "end": "1020800"
  },
  {
    "text": "we then and your goal our goal is to bring our customers back",
    "start": "1020800",
    "end": "1027360"
  },
  {
    "text": "to buy some product uh using the the behavior that we get and",
    "start": "1027360",
    "end": "1033280"
  },
  {
    "text": "start and uh for those emails we we just used some actually",
    "start": "1033280",
    "end": "1041199"
  },
  {
    "text": "we sent some emails based on some behaviors that a product has uh price dropped that",
    "start": "1041199",
    "end": "1048319"
  },
  {
    "text": "it's something really cool because in brazil we saw a lot of players send emails with a coupons count",
    "start": "1048319",
    "end": "1056720"
  },
  {
    "text": "to bring the users back and buy a product and we are able to just re",
    "start": "1056720",
    "end": "1063440"
  },
  {
    "text": "store information that the price that he sees the the when they came to the",
    "start": "1063440",
    "end": "1070559"
  },
  {
    "text": "our website and after this with the the the price of this product has a",
    "start": "1070559",
    "end": "1076080"
  },
  {
    "text": "chain we can send the email and says hey now the the product is cheaper what i",
    "start": "1076080",
    "end": "1082720"
  },
  {
    "text": "think come back and buy its product another one is uh abundant product on cart it's",
    "start": "1082720",
    "end": "1091120"
  },
  {
    "start": "1088000",
    "end": "1088000"
  },
  {
    "text": "really used on the market and visit many similar products when we",
    "start": "1091120",
    "end": "1097600"
  },
  {
    "text": "can identify identify that some user want to buy a specific type of the tv",
    "start": "1097600",
    "end": "1105200"
  },
  {
    "text": "a 32-inch tv and send imei with a lot of similar products and try to bring this",
    "start": "1105200",
    "end": "1113440"
  },
  {
    "text": "user back to the website so here we have the the technical part",
    "start": "1113440",
    "end": "1120720"
  },
  {
    "text": "the architecture of the email sending personalized image engine is pretty much the same as the email",
    "start": "1120720",
    "end": "1127200"
  },
  {
    "text": "preprocessing and we developed a separate application",
    "start": "1127200",
    "end": "1132240"
  },
  {
    "text": "for the email sanding and that is connected to bob api but it actually could be connect to",
    "start": "1132240",
    "end": "1138320"
  },
  {
    "text": "any recommendation system so whenever there's an interaction of a",
    "start": "1138320",
    "end": "1144559"
  },
  {
    "text": "user and a product the bob api sends a notification to our mail manager saying hey this user is",
    "start": "1144559",
    "end": "1152160"
  },
  {
    "text": "on the website and he's viewing a product and it works like a ping to to say to the",
    "start": "1152160",
    "end": "1160480"
  },
  {
    "text": "mail manager hey the user is still on the website so after about 24",
    "start": "1160480",
    "end": "1165520"
  },
  {
    "text": "hours the mail manager gets those users that that stop navigating on the the site",
    "start": "1165520",
    "end": "1172720"
  },
  {
    "text": "and decides whether he should it should send a personalized email or not he checks if",
    "start": "1172720",
    "end": "1179679"
  },
  {
    "text": "the user has accepted to receive emails if he has already received an email in the last",
    "start": "1179679",
    "end": "1186000"
  },
  {
    "text": "few days and if all conditions are satisfied a task is then dispatched to the sqs",
    "start": "1186000",
    "end": "1192480"
  },
  {
    "text": "containing the customer id and it stays in the queue until spot instance gets this",
    "start": "1192480",
    "end": "1198160"
  },
  {
    "text": "pro to process the processing starts with deciding which email template is",
    "start": "1198160",
    "end": "1205360"
  },
  {
    "text": "the best for this user if it is a price drop email a abandoned product on",
    "start": "1205360",
    "end": "1211840"
  },
  {
    "text": "cart or if it is an interest email and then it goes to the bob api",
    "start": "1211840",
    "end": "1219200"
  },
  {
    "text": "and gets the products that are related to this recommendation after that it goes to magazine louise's",
    "start": "1219200",
    "end": "1225919"
  },
  {
    "text": "api to get the up-to-date price title and inscription and image",
    "start": "1225919",
    "end": "1230960"
  },
  {
    "text": "it renders the email and then sends through amazon ses the amazon email",
    "start": "1230960",
    "end": "1237200"
  },
  {
    "text": "simple email service and again all the logs are then synced to amazon s3",
    "start": "1237200",
    "end": "1249840"
  },
  {
    "text": "uh at this point we see how to collect it and uh how you using to query in the",
    "start": "1249919",
    "end": "1257120"
  },
  {
    "text": "graphs to do recommendations and one so important part that we have",
    "start": "1257120",
    "end": "1263840"
  },
  {
    "text": "is the idea to provide to our business uh department to get",
    "start": "1263840",
    "end": "1270159"
  },
  {
    "text": "information about our users inside this graph and use to do some uh",
    "start": "1270159",
    "end": "1277679"
  },
  {
    "text": "some type of actions based on our strategy in the business so",
    "start": "1277679",
    "end": "1284240"
  },
  {
    "text": "uh after start the recommendations we just uh sit down and think about hey",
    "start": "1284240",
    "end": "1290240"
  },
  {
    "text": "we need to provide this type of analytics inside this graph",
    "start": "1290240",
    "end": "1295440"
  },
  {
    "text": "and to to provide the e-commerce to find some good things inside our graphs",
    "start": "1295440",
    "end": "1302480"
  },
  {
    "text": "and he start using faunus and henato is going to explain",
    "start": "1302480",
    "end": "1308960"
  },
  {
    "text": "this yeah uh i told you that titan needs to have a starting point and is",
    "start": "1308960",
    "end": "1316240"
  },
  {
    "text": "used for oil oil-to-peak kerberos and not for global graphite analytics or global graph operations",
    "start": "1316240",
    "end": "1322640"
  },
  {
    "text": "so when you need to traverse the entire graph remember remember that titanium funnels",
    "start": "1322640",
    "end": "1328960"
  },
  {
    "text": "are designed to work if with huge graphs so build an edge graph that can fit in",
    "start": "1328960",
    "end": "1335600"
  },
  {
    "text": "the memory of a single machine so when you need to traverse the entire graph",
    "start": "1335600",
    "end": "1340640"
  },
  {
    "text": "you we use a tool called phonos funnels actually works on top of hadoop",
    "start": "1340640",
    "end": "1348880"
  },
  {
    "start": "1346000",
    "end": "1346000"
  },
  {
    "text": "i'd say that it would be something like hive for graphs and so it provides the",
    "start": "1348880",
    "end": "1356400"
  },
  {
    "text": "inputs and output formats to work with our graph you we can import a graph from neo4j and",
    "start": "1356400",
    "end": "1362720"
  },
  {
    "text": "then do something and set the output form to to titan this is very cool",
    "start": "1362720",
    "end": "1370480"
  },
  {
    "text": "and it runs on top of hadoop that i think on the bdt track everyone is is",
    "start": "1370480",
    "end": "1376880"
  },
  {
    "text": "familiar with and in this case we use the amazon emr for that",
    "start": "1376880",
    "end": "1383600"
  },
  {
    "start": "1383000",
    "end": "1383000"
  },
  {
    "text": "so i'm going to show a very simple example again so we want to know the average age of all vertices with",
    "start": "1383919",
    "end": "1392240"
  },
  {
    "text": "all people on the graph that would be all vertices with element type equals to person and the script in",
    "start": "1392240",
    "end": "1399360"
  },
  {
    "text": "grammarly would be like this when we execute this query it's sent to",
    "start": "1399360",
    "end": "1405919"
  },
  {
    "text": "phonos funnels convert these to map reduce functions that are later run on the emr",
    "start": "1405919",
    "end": "1414080"
  },
  {
    "text": "and then it comes back with the results and presents to the user so this is pretty easy because you don't",
    "start": "1414080",
    "end": "1420240"
  },
  {
    "text": "have to worry about the much about the emr about configuring",
    "start": "1420240",
    "end": "1425440"
  },
  {
    "text": "the the map and reduce functions this is very easy and it can run run",
    "start": "1425440",
    "end": "1432559"
  },
  {
    "text": "processing in very very large graphs with as more results",
    "start": "1432559",
    "end": "1438559"
  },
  {
    "start": "1438000",
    "end": "1438000"
  },
  {
    "text": "i'm going to say about our backup process that we actually use the node to",
    "start": "1438640",
    "end": "1444480"
  },
  {
    "text": "snapshot utility of cassandra so every night we run",
    "start": "1444480",
    "end": "1449600"
  },
  {
    "text": "node 2 snapshot on all machines of the cluster and then we get the result and send to",
    "start": "1449600",
    "end": "1455360"
  },
  {
    "text": "amazon s3 and whenever is needed we just get from the bucket and run the recover utility",
    "start": "1455360",
    "end": "1464159"
  },
  {
    "text": "this is the big picture of our infrastructure uh fatal is gonna explain you now yeah as",
    "start": "1464480",
    "end": "1470640"
  },
  {
    "text": "you guys can see is not a rocket size you use some service from an aws",
    "start": "1470640",
    "end": "1475840"
  },
  {
    "text": "that uh now you are able to to do this this type of recommendations",
    "start": "1475840",
    "end": "1482480"
  },
  {
    "text": "uh we are using the ec2 the sqs the less cache s3 for logs",
    "start": "1482480",
    "end": "1489760"
  },
  {
    "text": "and uh we are using a spot instance without scaling that is pretty cool for",
    "start": "1489760",
    "end": "1496159"
  },
  {
    "text": "us because we can consume all the the masses in sqs really quickly and",
    "start": "1496159",
    "end": "1504320"
  },
  {
    "text": "are closed in our cassandra cluster using the the the ec2",
    "start": "1504320",
    "end": "1511760"
  },
  {
    "text": "largest instance that we have in brazil",
    "start": "1511760",
    "end": "1517120"
  },
  {
    "start": "1517000",
    "end": "1517000"
  },
  {
    "text": "so unfortunately we don't have ssd instance",
    "start": "1517200",
    "end": "1523520"
  },
  {
    "text": "or clusters in our region yet",
    "start": "1523520",
    "end": "1529840"
  },
  {
    "text": "so uh as hannah says with founders we can run so huge queries",
    "start": "1530480",
    "end": "1537120"
  },
  {
    "text": "inside our graphs and now you know a lot more about",
    "start": "1537120",
    "end": "1542320"
  },
  {
    "text": "our graph and we have some metrics like we have a 0.43 millions magazine visa",
    "start": "1542320",
    "end": "1549120"
  },
  {
    "text": "identifiers customers more than 50 000 nodes of",
    "start": "1549120",
    "end": "1554840"
  },
  {
    "text": "products 9 million total nodes",
    "start": "1554840",
    "end": "1559919"
  },
  {
    "text": "350 000 million of total ads and we started until now uh",
    "start": "1560159",
    "end": "1566960"
  },
  {
    "text": "7 000 uh i'm sorry uh 700 gigs of data",
    "start": "1566960",
    "end": "1573520"
  },
  {
    "text": "since july when you just launched or our recommendation systems",
    "start": "1573520",
    "end": "1580159"
  },
  {
    "text": "in production and uh we are already have peaks of",
    "start": "1580159",
    "end": "1586960"
  },
  {
    "text": "uh 20 000 weeds per second in the cassandra cluster",
    "start": "1586960",
    "end": "1592559"
  },
  {
    "text": "so and we know that result matters and",
    "start": "1593200",
    "end": "1598880"
  },
  {
    "text": "before the bob our website using another solution a huge player in the market and i'm not",
    "start": "1599679",
    "end": "1607440"
  },
  {
    "text": "going to say the name and we compare these two solutions a lot",
    "start": "1607440",
    "end": "1613679"
  },
  {
    "text": "since march and uh we get some really cool results like we are our",
    "start": "1613679",
    "end": "1620320"
  },
  {
    "text": "time to respond for a recommendation is ten times faster than this this huge guy and",
    "start": "1620320",
    "end": "1628480"
  },
  {
    "text": "we reduce the cost of of our recommendation solution in sixth",
    "start": "1628480",
    "end": "1635279"
  },
  {
    "start": "1635000",
    "end": "1635000"
  },
  {
    "text": "person and we've compared that the fee that we need to pay to this the the the player",
    "start": "1635279",
    "end": "1644799"
  },
  {
    "text": "so and here we have uh a really cool graph with",
    "start": "1644799",
    "end": "1651360"
  },
  {
    "text": "uh a revenue of just off the recommendations",
    "start": "1651360",
    "end": "1657520"
  },
  {
    "text": "and here in the last december we started doing recommendations in magazine luiza website with the solution",
    "start": "1657520",
    "end": "1665039"
  },
  {
    "text": "a in march or our first bobby test is",
    "start": "1665039",
    "end": "1670640"
  },
  {
    "text": "just doing some recommendations in some slots in the the website",
    "start": "1670640",
    "end": "1678480"
  },
  {
    "text": "and for natalie in may we need to turn off the bobby for two",
    "start": "1678960",
    "end": "1685200"
  },
  {
    "text": "weeks and we can see the the results in the avenue about the recommendations it's a pretty",
    "start": "1685200",
    "end": "1691919"
  },
  {
    "text": "cool for us because we need to just to",
    "start": "1691919",
    "end": "1698240"
  },
  {
    "text": "prove in the our company that we have a really good uh product and we need to",
    "start": "1698240",
    "end": "1704480"
  },
  {
    "text": "take the place of the solution a a huge guy and uh in september bob",
    "start": "1704480",
    "end": "1711760"
  },
  {
    "text": "take place in the our website based on the re the the results that we get compare",
    "start": "1711760",
    "end": "1717840"
  },
  {
    "text": "these lots of the the recommendations and uh here is the final results we increase in",
    "start": "1717840",
    "end": "1725520"
  },
  {
    "text": "109 percent the revenue of recommendations inside our website",
    "start": "1725520",
    "end": "1730960"
  },
  {
    "text": "changing the the the solutions so and here uh we have some",
    "start": "1730960",
    "end": "1738480"
  },
  {
    "start": "1735000",
    "end": "1735000"
  },
  {
    "text": "our next steps but we have to work with bob yeah so",
    "start": "1738480",
    "end": "1745520"
  },
  {
    "text": "the first thing that we want to do uh in the next step that we're taking is use the phones",
    "start": "1745520",
    "end": "1752640"
  },
  {
    "text": "to propose pre-process the recommendations remove all the the data architecture of spot instances",
    "start": "1752640",
    "end": "1760399"
  },
  {
    "text": "because in our benchmarks pre-processing all the products at the same time using",
    "start": "1760399",
    "end": "1766720"
  },
  {
    "text": "phones and hadoop is is actually faster than keep processing this on demand so we",
    "start": "1766720",
    "end": "1774159"
  },
  {
    "text": "could process twice a day in about one hour all the products",
    "start": "1774159",
    "end": "1781279"
  },
  {
    "text": "we want to use some algorithms to identify communities in the graph",
    "start": "1781279",
    "end": "1786640"
  },
  {
    "text": "this is a very cool thing that we didn't started yet and we want to replicate our cassandra",
    "start": "1786640",
    "end": "1794080"
  },
  {
    "text": "cluster to another region so if there's a problem with the brazilian region we can just",
    "start": "1794080",
    "end": "1800240"
  },
  {
    "text": "change the end points to the to the us so we we could use this for a disaster recovery plan",
    "start": "1800240",
    "end": "1809840"
  },
  {
    "text": "so that's it uh if you guys have some questions there is a microphone in the",
    "start": "1810559",
    "end": "1817440"
  },
  {
    "text": "aisle here and thank you",
    "start": "1817440",
    "end": "1832320"
  }
]