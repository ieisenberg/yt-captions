[
  {
    "start": "0",
    "end": "63000"
  },
  {
    "text": "all right good afternoon everybody's back from lunch oh maybe not everybody",
    "start": "4160",
    "end": "9200"
  },
  {
    "text": "this is uh incident response in the cloud i'm don bailey i'm a principal geek with the aws security team my day job is protecting customers in aws",
    "start": "9200",
    "end": "15920"
  },
  {
    "text": "itself and i'm greg roth i'm with the aws identity and access management team",
    "start": "15920",
    "end": "23039"
  },
  {
    "text": "so we'll be talking about incident response in the cloud if we ask ourselves why we should care about this first of all security doesn't stop",
    "start": "23359",
    "end": "30560"
  },
  {
    "text": "at compliance you may be checking off all the boxes but there's probably something that might happen within your environment and",
    "start": "30560",
    "end": "36160"
  },
  {
    "text": "you'll want to go and look at that and that might not be covered by a compliance checklist however some people do have a compliance",
    "start": "36160",
    "end": "41920"
  },
  {
    "text": "requirement to actually implement an incident response plan so there's a good reason to care about that the knowledge that you gain here",
    "start": "41920",
    "end": "47680"
  },
  {
    "text": "today will help you react to any sort of incidents within an aws environment and",
    "start": "47680",
    "end": "52719"
  },
  {
    "text": "provide you with the agility to continue to provide the availability of your service to a customer",
    "start": "52719",
    "end": "58079"
  },
  {
    "text": "stuff happens and it's pretty good to prep for those types of things and i hear that prepping is fashionable",
    "start": "58079",
    "end": "64239"
  },
  {
    "start": "63000",
    "end": "105000"
  },
  {
    "text": "so what we'll be covering today will be incident response in general as well as ir versus the cloud we'll",
    "start": "64239",
    "end": "71040"
  },
  {
    "text": "talk about incident response with regards to aws best practices we'll talk about some prerequisite",
    "start": "71040",
    "end": "77840"
  },
  {
    "text": "knowledge that you should have and certainly some things that you should be paying attention to turning on and leveraging we'll also go through an",
    "start": "77840",
    "end": "83520"
  },
  {
    "text": "incident management life cycle specific to an aws concern uh we'll look at some indicators that",
    "start": "83520",
    "end": "88560"
  },
  {
    "text": "might lead you towards an incident and actually having to perform incident response we'll go over",
    "start": "88560",
    "end": "93920"
  },
  {
    "text": "a couple example incidents and we'll talk about ir workflows associated with those we'll give some tips we'll mention some tools and we'll",
    "start": "93920",
    "end": "100640"
  },
  {
    "text": "also point you to some other ir resources",
    "start": "100640",
    "end": "104719"
  },
  {
    "start": "105000",
    "end": "136000"
  },
  {
    "text": "so when we're talking about incident response we usually have a number of different goals that we're trying to achieve",
    "start": "106079",
    "end": "111439"
  },
  {
    "text": "in the process of responding to an incident we want to establish control then determine what what impact that",
    "start": "111439",
    "end": "117600"
  },
  {
    "text": "particular incident has we want to recover get back to a known good state we want to investigate the root cause of",
    "start": "117600",
    "end": "122799"
  },
  {
    "text": "that and ideally we want to learn from that and go forward you want to think about first aid or firefighting or crime scene",
    "start": "122799",
    "end": "128800"
  },
  {
    "text": "investigation but we're going to we're going to gear that towards amazon web services today",
    "start": "128800",
    "end": "135599"
  },
  {
    "text": "so when folks are thinking about incident response but thinking about it in the context of amazon web services greg what should they be",
    "start": "137120",
    "end": "143840"
  },
  {
    "text": "thinking about so be aware that well many of the things that you'll do when you're responding to",
    "start": "143840",
    "end": "149760"
  },
  {
    "text": "an incident with say a single server in an on-prem environment are similar and directly translate there",
    "start": "149760",
    "end": "156800"
  },
  {
    "text": "are some additional considerations that you're going to want to think about when you're responding to an event in a cloud",
    "start": "156800",
    "end": "163440"
  },
  {
    "text": "environment and there are some new tools that you have to work with",
    "start": "163440",
    "end": "168640"
  },
  {
    "text": "a lot of the configuration that defines the topology of your application is different and you have the advantage",
    "start": "168640",
    "end": "175920"
  },
  {
    "text": "of it being programmatically accessible easy to query easy to script so there are many things that you can do",
    "start": "175920",
    "end": "182319"
  },
  {
    "text": "in a cloud environment that are actually harder to do elsewhere and you also want to understand that",
    "start": "182319",
    "end": "188400"
  },
  {
    "start": "186000",
    "end": "231000"
  },
  {
    "text": "incident response within aws is not just about your ec2 instances not just about your amazon s3 objects",
    "start": "188400",
    "end": "194560"
  },
  {
    "text": "far from it there's a few other things that you're going to have to pay attention to right yep so in addition to the ec2 instances",
    "start": "194560",
    "end": "200319"
  },
  {
    "text": "and the s3 objects that you might think about right at the beginning pay attention to the rest of your configuration",
    "start": "200319",
    "end": "207120"
  },
  {
    "text": "any beanstalk applications you might be running any identities that are used to access",
    "start": "207120",
    "end": "212799"
  },
  {
    "text": "resources in your environment as well as the overall configuration the policies that span multiple services",
    "start": "212799",
    "end": "219519"
  },
  {
    "text": "and we're really focusing more on the configuration that spans multiple services although we will",
    "start": "219519",
    "end": "225680"
  },
  {
    "text": "talk to you a bit more about some things that are unique about responding to ec2 instances as well and just like in",
    "start": "225680",
    "end": "232239"
  },
  {
    "start": "231000",
    "end": "386000"
  },
  {
    "text": "the previous talk with intrusion detection in the cloud we mentioned a lot of prerequisite knowledge that we expect our customers to have when",
    "start": "232239",
    "end": "237599"
  },
  {
    "text": "they're going to be investigating an incident specific to their database environment so to condense that down to about two",
    "start": "237599",
    "end": "243040"
  },
  {
    "text": "minutes we hope you're all already using aws identity and access management",
    "start": "243040",
    "end": "248080"
  },
  {
    "text": "in particular if you were to have a credential exposure you will be a lot happier if",
    "start": "248080",
    "end": "254560"
  },
  {
    "text": "that credential has some amount of leased privilege applied to it and least privilege is hard we know that",
    "start": "254560",
    "end": "261359"
  },
  {
    "text": "but getting at least a baseline amount of least privilege and ensuring that",
    "start": "261359",
    "end": "266400"
  },
  {
    "text": "things that do not need the ability to change your security configuration your policies don't have them will save you a lot of",
    "start": "266400",
    "end": "272720"
  },
  {
    "text": "headaches and make recovery that much easier you'll want to think about roles for ec2 and consider using it",
    "start": "272720",
    "end": "280800"
  },
  {
    "text": "when you're running your application from ec2 instances that will give you the advantage of",
    "start": "280800",
    "end": "286240"
  },
  {
    "text": "individually auditable credentials that are rotated for you with no effort on your part multiple times a day",
    "start": "286240",
    "end": "292800"
  },
  {
    "text": "many customers struggle to rotate credentials annually roles for ec2 does it multiple times a day",
    "start": "292800",
    "end": "299440"
  },
  {
    "text": "multi-factor authentication is something that we always recommend passwords are not the greatest and",
    "start": "299440",
    "end": "306080"
  },
  {
    "text": "they are often mishandled multi-factor authentication can completely exclude",
    "start": "306080",
    "end": "311680"
  },
  {
    "text": "that class of problem when you're responding to an incident you're going to want logs",
    "start": "311680",
    "end": "317360"
  },
  {
    "text": "and you can't read the logs that you don't have turn on aws cloudtrail it's one slider in the",
    "start": "317360",
    "end": "323600"
  },
  {
    "text": "console enter a bucket name and you're done can't emphasize enough the importance of",
    "start": "323600",
    "end": "329199"
  },
  {
    "text": "having logs rather than guessing what happened similar story with s3 versioning so",
    "start": "329199",
    "end": "338560"
  },
  {
    "text": "you can't restore the backups that you don't have s3 has a feature called versioning where you can tell it that it",
    "start": "338560",
    "end": "345680"
  },
  {
    "text": "should retain objects that were deleted and then deletion becomes just removing a pointer",
    "start": "345680",
    "end": "350800"
  },
  {
    "text": "you can access old versions by using the described version apis",
    "start": "350800",
    "end": "356000"
  },
  {
    "text": "and if you go that route you can even opt to require mfa to remove a version you can also protect",
    "start": "356000",
    "end": "362960"
  },
  {
    "text": "yourself from inadvertent deletion inadvertent overwrite and along with the least privileged",
    "start": "362960",
    "end": "370080"
  },
  {
    "text": "comments earlier you want to not actually give anyone the ability to call the delete version api",
    "start": "370080",
    "end": "376080"
  },
  {
    "text": "bucket logging again you can't review the logs that you didn't ask us",
    "start": "376080",
    "end": "381440"
  },
  {
    "text": "to keep turn on bucket logging if you have data in s3 that you care about yeah it's important to understand",
    "start": "381440",
    "end": "387199"
  },
  {
    "start": "386000",
    "end": "470000"
  },
  {
    "text": "that this talk is not about announcing a new time machine that we've built to help you with incident response",
    "start": "387199",
    "end": "392720"
  },
  {
    "text": "instead we'd like you to use the time machine we already built so what else do we need well we assume that you also have people",
    "start": "392720",
    "end": "399120"
  },
  {
    "text": "tools and a plan associated with incident response and it's probably going to be a good idea to have those things in place",
    "start": "399120",
    "end": "405520"
  },
  {
    "text": "before you actually incur an incident i don't want to just develop it on the fly maybe not",
    "start": "405520",
    "end": "413280"
  },
  {
    "text": "but let's talk about an incident management life cycle specific to aws so you may already have an incident",
    "start": "413280",
    "end": "418800"
  },
  {
    "text": "response plan and you're trying to figure out how do i talk to aws about my concerns and responding to",
    "start": "418800",
    "end": "424080"
  },
  {
    "text": "incidents with within my aws infrastructure well just within your existing ir plan you'll probably want to categorize your",
    "start": "424080",
    "end": "430400"
  },
  {
    "text": "incident whether it's a performance related issue whether it's a security concern whether it's a traffic related concern and you want to categorize that first",
    "start": "430400",
    "end": "436639"
  },
  {
    "text": "and then determine the impact and determine whether or not it's something that aws support is required to help you with if it's",
    "start": "436639",
    "end": "441919"
  },
  {
    "text": "something that you cannot handle yourself you should absolutely engage aws support we're your one-stop shop for",
    "start": "441919",
    "end": "447759"
  },
  {
    "text": "helping you through any number of different concerns security related or otherwise open up a support case aw support then",
    "start": "447759",
    "end": "454000"
  },
  {
    "text": "engages internally subject matter experts on your particular concern to help you resolve that particular issue",
    "start": "454000",
    "end": "459199"
  },
  {
    "text": "recover and get back to a known good state resolve that and then learn from that going forward if there are things that we need to do better to help you",
    "start": "459199",
    "end": "465440"
  },
  {
    "text": "we'll do that and if there are things that you'll need to do better you'll get to incorporate that as well",
    "start": "465440",
    "end": "470479"
  },
  {
    "text": "so what are some things that we're going to look for that may lead us towards having to go and investigate something as an incident",
    "start": "470479",
    "end": "477280"
  },
  {
    "text": "so there was a whole talk about two hours ago about detecting incidents that is not this talk however it's worth",
    "start": "477280",
    "end": "485440"
  },
  {
    "text": "reiterating that there are a number of important notifications that aws may send you",
    "start": "485440",
    "end": "491520"
  },
  {
    "text": "for example there are scenarios where we may notice that a credential associated with",
    "start": "491520",
    "end": "497360"
  },
  {
    "text": "your account is posted more publicly than you might want and those notifications don't help you",
    "start": "497360",
    "end": "503440"
  },
  {
    "text": "if you spam filter them so please ensure that we have updated security contact information which you",
    "start": "503440",
    "end": "509199"
  },
  {
    "text": "can find in your account settings and actually read those notifications similarly you may be notified if we see",
    "start": "509199",
    "end": "516320"
  },
  {
    "text": "one of your ec2 instances behaving in ways that you might not want it to",
    "start": "516320",
    "end": "521680"
  },
  {
    "text": "and then of course if you were to notice a credential or an identity in your account that you",
    "start": "521680",
    "end": "527600"
  },
  {
    "text": "don't have a reason to be there if you were to notice the use of resources that wasn't expected",
    "start": "527600",
    "end": "533760"
  },
  {
    "text": "or if you're actually reading your logs and you see things in the logs that you didn't",
    "start": "533760",
    "end": "539040"
  },
  {
    "text": "expect that's a indicator that you might want to dig deeper check out the latest version of sec 402 which",
    "start": "539040",
    "end": "547040"
  },
  {
    "text": "should be on youtube and if not there's last year's version for a whole lot more about detecting",
    "start": "547040",
    "end": "553279"
  },
  {
    "text": "incidents and so and so",
    "start": "553279",
    "end": "559760"
  },
  {
    "text": "let's walk through one of the scenarios that might happen you might discover that your aws",
    "start": "559760",
    "end": "566480"
  },
  {
    "text": "credentials your access key and secret are posted publicly say to a source repository",
    "start": "566480",
    "end": "573120"
  },
  {
    "text": "maybe it went to some exciting destinations without you and all you got were some ec2 instances",
    "start": "573120",
    "end": "579200"
  },
  {
    "text": "what do you do then well first of all i'm going to have a stern talking to to the intern and the project that he",
    "start": "579200",
    "end": "585360"
  },
  {
    "text": "decided he was going to post on github that had my aws credentials in it and after we get done with that i'm going to go talk to that",
    "start": "585360",
    "end": "591760"
  },
  {
    "text": "source code repository and i'm going to delete that file and then i'm going to talk to every search engine on the planet and ask them",
    "start": "591760",
    "end": "597600"
  },
  {
    "text": "to delete their cache so that that's not on the internet anymore and then we're done right hmm so that's actually a mistake that we've",
    "start": "597600",
    "end": "604320"
  },
  {
    "text": "seen multiple times you do not remove sensitive information from the internet you do not",
    "start": "604320",
    "end": "609440"
  },
  {
    "text": "try to erase credentials that were exposed you rotate them and we'll walk through how you do that",
    "start": "609440",
    "end": "616839"
  },
  {
    "text": "safely but before you get started in rotating your credentials take a step back for a",
    "start": "616839",
    "end": "622079"
  },
  {
    "start": "617000",
    "end": "676000"
  },
  {
    "text": "moment and think about what you're doing so that you avoid making the problem worse so the first thing that you're going to",
    "start": "622079",
    "end": "628640"
  },
  {
    "text": "want to do is figure out what level of access was associated with the credential that you just discovered",
    "start": "628640",
    "end": "634640"
  },
  {
    "text": "you're also going to want to think about the trade-offs between the availability of the application that those credentials are part of",
    "start": "634640",
    "end": "641600"
  },
  {
    "text": "and trade that off against the confidentiality and integrity requirements of data that those credentials have access to read or",
    "start": "641600",
    "end": "648880"
  },
  {
    "text": "modify and this is where having a plan and having thought about this in advance really helps you",
    "start": "648880",
    "end": "654640"
  },
  {
    "text": "it's much better not to be making those hard decisions at three in the morning and then once you have a handle on that",
    "start": "654640",
    "end": "661200"
  },
  {
    "text": "ideally from the plan that you already wrote you're going to want to take some immediate steps to stop the bleeding",
    "start": "661200",
    "end": "667760"
  },
  {
    "text": "and limit immediate further damage and once you have immediate mitigations in place you'll clean up the mess",
    "start": "667760",
    "end": "676160"
  },
  {
    "start": "676000",
    "end": "744000"
  },
  {
    "text": "so let's talk about how you actually determine the level of access there's a spectrum on aws credentials",
    "start": "676959",
    "end": "684800"
  },
  {
    "text": "the worst case is root credentials which are the credentials associated with your account",
    "start": "684800",
    "end": "690880"
  },
  {
    "text": "trusted advisor actually tells you if you have root credentials that's a finding you're not supposed to have them we",
    "start": "690880",
    "end": "696880"
  },
  {
    "text": "recommend eliminating them im user credentials you want to look at the policy on the credential",
    "start": "696880",
    "end": "704320"
  },
  {
    "text": "to tell you what level of access it has and when you're looking at that you're going to want to look at that from the mindset of it really doesn't like that",
    "start": "704320",
    "end": "710800"
  },
  {
    "text": "slide configuration integrity and confidentiality so what resources those",
    "start": "710800",
    "end": "716560"
  },
  {
    "text": "credentials have access to and you'll want to think about how important is the data how important is",
    "start": "716560",
    "end": "722079"
  },
  {
    "text": "it that the application remain up and are there parts of the application that we can edit and so the slide that we just skipped",
    "start": "722079",
    "end": "729440"
  },
  {
    "text": "again was a link to the sec 402 security config script that actually will",
    "start": "729440",
    "end": "736079"
  },
  {
    "text": "retrieve a full list of credentials in your account you can use that to help you figure out where that credential",
    "start": "736079",
    "end": "741600"
  },
  {
    "text": "that may have been exposed was attached oh this time it's useful okay so access",
    "start": "741600",
    "end": "748079"
  },
  {
    "start": "744000",
    "end": "901000"
  },
  {
    "text": "policy language you're looking at the policy on the user whose credential was just exposed and",
    "start": "748079",
    "end": "754480"
  },
  {
    "text": "again we're hoping this is a user and not a root account there's a whole talk on the aws access",
    "start": "754480",
    "end": "759680"
  },
  {
    "text": "policy language the really short summary is that the way policy evaluation in aws",
    "start": "759680",
    "end": "764959"
  },
  {
    "text": "works is there are a bunch of statements each policy is one or more statements",
    "start": "764959",
    "end": "770160"
  },
  {
    "text": "and access to an aws api is allowed if there is at least one statement that",
    "start": "770160",
    "end": "775519"
  },
  {
    "text": "matches the request that says effect allow and there are exactly zero statements that say affect deny so",
    "start": "775519",
    "end": "783920"
  },
  {
    "text": "denies when if they are present and you need at least one allow",
    "start": "783920",
    "end": "789279"
  },
  {
    "text": "each statement actually is made up of five components there's the principal which is either",
    "start": "789279",
    "end": "794800"
  },
  {
    "text": "the user that the policy is attached to or in the case of a resource policy like an s3 bucket policy will be explicitly",
    "start": "794800",
    "end": "802320"
  },
  {
    "text": "present in the policy an action which might be something like s3 get object it's a specific aws api",
    "start": "802320",
    "end": "810240"
  },
  {
    "text": "action of star is bad it means anything action of s3 colon star",
    "start": "810240",
    "end": "815760"
  },
  {
    "text": "is less bad it means anything in s3 action of i am colon star is really bad",
    "start": "815760",
    "end": "821040"
  },
  {
    "text": "it means can change all the policies anyway there's also a resource field that can",
    "start": "821040",
    "end": "826240"
  },
  {
    "text": "say this bucket that bucket often the resource field will be star that's not unusual",
    "start": "826240",
    "end": "832000"
  },
  {
    "text": "conditions are used to further scope down policy say for example that it only applies to calls made over ssl or",
    "start": "832000",
    "end": "839360"
  },
  {
    "text": "applies only from a particular network range and then the effect is either allow or deny which tells us what to do",
    "start": "839360",
    "end": "845199"
  },
  {
    "text": "when the statement matches our policy language is very very powerful but we promise you that it's",
    "start": "845199",
    "end": "850320"
  },
  {
    "text": "less complex and more deterministic than palm reading it's deterministic it's just challenging",
    "start": "850320",
    "end": "856240"
  },
  {
    "text": "sometimes so when you're looking at these policies you're going to be wanting to pay a lot",
    "start": "856240",
    "end": "862399"
  },
  {
    "text": "of attention to the effect of the credential that may have been exposed on the integrity of your configuration",
    "start": "862399",
    "end": "868959"
  },
  {
    "text": "write access within the identity and access management product is something that you're definitely going to want to pay close attention to",
    "start": "868959",
    "end": "875680"
  },
  {
    "text": "that's things like user creation or put policy which can change other policies in the system",
    "start": "875680",
    "end": "882480"
  },
  {
    "text": "changes to ec2 security groups changes to ec2 keys changes to policy and other services",
    "start": "882720",
    "end": "888800"
  },
  {
    "text": "like s3 put bucket policy these are things that will cause you to have to look more carefully at the",
    "start": "888800",
    "end": "894639"
  },
  {
    "text": "configuration if you were to have them these abilities on a credential that was exposed",
    "start": "894639",
    "end": "901680"
  },
  {
    "start": "901000",
    "end": "988000"
  },
  {
    "text": "so now that we have some understanding of the level of access that was on this credential",
    "start": "902160",
    "end": "907279"
  },
  {
    "text": "we move on to coming up with a plan and in some order you will want to revoke",
    "start": "907279",
    "end": "913600"
  },
  {
    "text": "any privileged access this is where your application might ordinarily",
    "start": "913600",
    "end": "918720"
  },
  {
    "text": "have some advanced functionality or some administrative features that you might be able to safely turn off while you're",
    "start": "918720",
    "end": "924639"
  },
  {
    "text": "responding to the rest of the incident and you know you may only have part of the",
    "start": "924639",
    "end": "929759"
  },
  {
    "text": "application where the availability is critical if that's the case turn off everything you can safely turn off",
    "start": "929759",
    "end": "936560"
  },
  {
    "text": "you may want to revoke outstanding temporary security credentials potentially invalidate the credentials",
    "start": "936560",
    "end": "942160"
  },
  {
    "text": "that were exposed immediately potentially wait a bit longer let's talk about revoking privileged",
    "start": "942160",
    "end": "948480"
  },
  {
    "text": "access so you've determined that you've got a user whose credential was exposed you've",
    "start": "948480",
    "end": "954160"
  },
  {
    "text": "looked through the policies on the user let's say you find a number of them and to do that you're going to go",
    "start": "954160",
    "end": "959680"
  },
  {
    "text": "into the identity and access management console you'll click on the users on the left you'll click on the",
    "start": "959680",
    "end": "965600"
  },
  {
    "text": "actual user and there's a policy section you'll see a list of the policies that are on the user and on the groups",
    "start": "965600",
    "end": "971279"
  },
  {
    "text": "sometimes people will find that they don't want to edit the policies that were in use on",
    "start": "971279",
    "end": "976320"
  },
  {
    "text": "the running system either to preserve them as evidence for later or to make their changes more reversible",
    "start": "976320",
    "end": "983360"
  },
  {
    "text": "in case they break something at three in the morning and so the safest thing you can do at this point is add an additional policy",
    "start": "983360",
    "end": "990639"
  },
  {
    "start": "988000",
    "end": "1052000"
  },
  {
    "text": "and you just click add policy you'll get the policy generator and you might either attach a policy",
    "start": "990639",
    "end": "996399"
  },
  {
    "text": "that blocks all access to iam or you might set a policy that blocks",
    "start": "996399",
    "end": "1001440"
  },
  {
    "text": "all access except to s3 like the policy that we have on screen you'll see here we're using the not",
    "start": "1001440",
    "end": "1007360"
  },
  {
    "text": "action version of action to specifically deny everything other than s3 and we generally don't recommend",
    "start": "1007360",
    "end": "1013680"
  },
  {
    "text": "that people use this as an approach to generating policies for their production environment but this is in response to",
    "start": "1013680",
    "end": "1020240"
  },
  {
    "text": "this is something that you might reply might apply in the middle of an incident it's hard",
    "start": "1020240",
    "end": "1025438"
  },
  {
    "text": "to manage policies with effect deny they tend to cause problems for you you can't override them anywhere else they",
    "start": "1025439",
    "end": "1032160"
  },
  {
    "text": "are the exception there is no undenied the access that was denied over here",
    "start": "1032160",
    "end": "1037199"
  },
  {
    "text": "and so don't don't typically apply broad deny statements but for short periods of time when you're",
    "start": "1037199",
    "end": "1043438"
  },
  {
    "text": "responding to a potentially exposed credential it can be useful it isn't putting the genie back in the bottle but it's",
    "start": "1043439",
    "end": "1050000"
  },
  {
    "text": "telling the genie to behave a bit so in validating credentials you",
    "start": "1050000",
    "end": "1056480"
  },
  {
    "start": "1052000",
    "end": "1136000"
  },
  {
    "text": "actually have two options you can either disable a credential or you can delete it",
    "start": "1056480",
    "end": "1062720"
  },
  {
    "text": "the difference is reversibility if you disable a credential you can go in and re-enable it so for",
    "start": "1062720",
    "end": "1069120"
  },
  {
    "text": "example if you disabled a credential that you then learned was on a production server that you have no",
    "start": "1069120",
    "end": "1074240"
  },
  {
    "text": "access to and the guy who knows the password for that server is on a plan you can re-enable it and make the",
    "start": "1074240",
    "end": "1081360"
  },
  {
    "text": "trade-offs of do you want it on do you want it off you know it's out there what's the risk",
    "start": "1081360",
    "end": "1086559"
  },
  {
    "text": "deletion is final so once you're sure that nothing was using the credential you do actually want to delete it",
    "start": "1086559",
    "end": "1092880"
  },
  {
    "text": "so that someone doesn't inadvertently turn back on a credential that was known to be exposed",
    "start": "1092880",
    "end": "1099039"
  },
  {
    "text": "you'll want to provision new credentials for authorized usage you'll want to deploy the new credentials and the order",
    "start": "1099039",
    "end": "1106000"
  },
  {
    "text": "that you take the above actions in depends on whether you're willing to take some downtime or whether you're less worried about",
    "start": "1106000",
    "end": "1112559"
  },
  {
    "text": "potential exposure of the data in this scenario and you want to proceed more carefully",
    "start": "1112559",
    "end": "1118320"
  },
  {
    "text": "one other thing that's worth noting is when you're provisioning new credentials it's helpful to actually create a whole",
    "start": "1118320",
    "end": "1123679"
  },
  {
    "text": "new identity it helps you separate access that happened before the exposure during the exposure",
    "start": "1123679",
    "end": "1130320"
  },
  {
    "text": "and after the exposure in that your audit logs will tell you that it's the new identity",
    "start": "1130320",
    "end": "1136960"
  },
  {
    "start": "1136000",
    "end": "1186000"
  },
  {
    "text": "after you've done all this and you're back in the situation where you're starting to regain control of",
    "start": "1136960",
    "end": "1143600"
  },
  {
    "text": "the incident you're going to want to do a deeper dive start to figure out what's wrong look at what changed best case scenario",
    "start": "1143600",
    "end": "1152000"
  },
  {
    "text": "cliotrail logs our wonderful resource here the configuration reports either from",
    "start": "1152000",
    "end": "1157520"
  },
  {
    "text": "the tools that we talked about in sec 402 or the new aws config service look at",
    "start": "1157520",
    "end": "1163679"
  },
  {
    "text": "the diffs there less ideally run a report now look at what changed when",
    "start": "1163679",
    "end": "1169520"
  },
  {
    "text": "many aws apis report a change timestamp that can give you some pointers on when",
    "start": "1169520",
    "end": "1175679"
  },
  {
    "text": "changes were made you can build a timeline with respect to when the credential was exposed and what changed afterwards",
    "start": "1175679",
    "end": "1184400"
  },
  {
    "text": "you'll also then want to lock any credentials that might have become exposed this is a sample of a cloudtrail log",
    "start": "1184400",
    "end": "1190880"
  },
  {
    "start": "1186000",
    "end": "1286000"
  },
  {
    "text": "with a bunch of things pulled out to make it fit on a slide in red you'll see an access key id so",
    "start": "1190880",
    "end": "1196720"
  },
  {
    "text": "you might look through your cloudtrail logs for any actions that happened under the access key id that the secret",
    "start": "1196720",
    "end": "1203120"
  },
  {
    "text": "for which was publicly exposed this particular entry was a user creation",
    "start": "1203120",
    "end": "1209679"
  },
  {
    "text": "and let's talk about where access might persist so new users might be created new",
    "start": "1209679",
    "end": "1216320"
  },
  {
    "text": "credentials might be put on existing users for example if you have a programmatic",
    "start": "1216320",
    "end": "1222480"
  },
  {
    "text": "use only identity that has access keys deployed make sure that it doesn't suddenly have",
    "start": "1222480",
    "end": "1228400"
  },
  {
    "text": "a login profile which is a username and password your web servers are unlikely to be logging into the",
    "start": "1228400",
    "end": "1234720"
  },
  {
    "text": "management console and again x 509 certificates there are multiple",
    "start": "1234720",
    "end": "1239840"
  },
  {
    "text": "credential types make sure that every credential on every identity in the account was actually supposed to be there roles",
    "start": "1239840",
    "end": "1247280"
  },
  {
    "text": "are a great resource for cross account access it also means that they're a great way to set up cross account access",
    "start": "1247280",
    "end": "1253360"
  },
  {
    "text": "so you'll want to look at the trust policies on roles and ensure that they're not configured to allow access to other",
    "start": "1253360",
    "end": "1259280"
  },
  {
    "text": "accounts and you'll want to look at resource policies for resources that you're worried about",
    "start": "1259280",
    "end": "1265760"
  },
  {
    "text": "you may want to look for temporary credentials and turn them off and you may want to look at things like ec2 instances that are",
    "start": "1265760",
    "end": "1272240"
  },
  {
    "text": "configured for roles for ec2 where we are delivering credentials to the ec2 instance make sure those are instances that you",
    "start": "1272240",
    "end": "1278640"
  },
  {
    "text": "expect to be running and not ones that someone else started so what if there are temporary credentials that have been",
    "start": "1278640",
    "end": "1284159"
  },
  {
    "text": "generated and they might be out there so once you turn off",
    "start": "1284159",
    "end": "1289679"
  },
  {
    "start": "1286000",
    "end": "1327000"
  },
  {
    "text": "an exposed credential it's possible that there are still outstanding temporary credentials",
    "start": "1289679",
    "end": "1295200"
  },
  {
    "text": "the sts get session token and the get federation token apis",
    "start": "1295200",
    "end": "1300559"
  },
  {
    "text": "provide temporary security credentials that are good for up to 36 hours assume role provides credentials",
    "start": "1300559",
    "end": "1306880"
  },
  {
    "text": "that are good up for up to one hour you should look at the cloudtrail logs for any signs of these having been",
    "start": "1306880",
    "end": "1312720"
  },
  {
    "text": "created if you followed our earlier advice about creating a completely new identity then",
    "start": "1312720",
    "end": "1318559"
  },
  {
    "text": "this is less of an issue just drop a policy that blocks all axes from the old identity and you're done",
    "start": "1318559",
    "end": "1324080"
  },
  {
    "text": "if you're not in a situation where you can do that revocation is worth paying attention to",
    "start": "1324080",
    "end": "1330000"
  },
  {
    "start": "1327000",
    "end": "1347000"
  },
  {
    "text": "this is an example of a cloudtrail log showing temporary security credentials",
    "start": "1330000",
    "end": "1335840"
  },
  {
    "text": "and you can see here the access key right up at the top is the one that i was worried about the one at the bottom is the one that",
    "start": "1335840",
    "end": "1342080"
  },
  {
    "text": "was actually created and you can see this is a get session token call",
    "start": "1342080",
    "end": "1347840"
  },
  {
    "start": "1347000",
    "end": "1384000"
  },
  {
    "text": "if you're not in a position to completely block access to the identity that had a credential exposure",
    "start": "1348960",
    "end": "1355280"
  },
  {
    "text": "you can put a policy like this one on it that blocks all access taken using temporary",
    "start": "1355280",
    "end": "1360880"
  },
  {
    "text": "credentials that were issued before a certain point in time in this case ones before yeah i guess",
    "start": "1360880",
    "end": "1367120"
  },
  {
    "text": "that's tomorrow and you'll be a little bit careful when applying this policy to roles",
    "start": "1367120",
    "end": "1373520"
  },
  {
    "text": "if roles for ec2 has not yet delivered new credentials this will block all access from an instance until",
    "start": "1373520",
    "end": "1380559"
  },
  {
    "text": "it picks up new credentials after you think you've got the situation",
    "start": "1380559",
    "end": "1387440"
  },
  {
    "text": "under control you think you've completely regained control of the account you'll want to keep watching your logs",
    "start": "1387440",
    "end": "1393760"
  },
  {
    "text": "and ideally there are no signs of continuing access if there are then repeat the process see",
    "start": "1393760",
    "end": "1400480"
  },
  {
    "text": "what credentials exposed go through the steps again eventually you should be in a situation where you're no longer seeing",
    "start": "1400480",
    "end": "1406559"
  },
  {
    "text": "unauthorized access so let's talk a little bit about ec2",
    "start": "1406559",
    "end": "1411760"
  },
  {
    "start": "1409000",
    "end": "1672000"
  },
  {
    "text": "instances those that might be exhibiting a behavior that is undesired the first thing that we're going to do",
    "start": "1411760",
    "end": "1417440"
  },
  {
    "text": "with ec2 instances that might show up or again be behaving in a manner that",
    "start": "1417440",
    "end": "1423360"
  },
  {
    "text": "we're not too crazy about is preserving configuration data so we want to preserve information about the instance such as its amazon machine",
    "start": "1423360",
    "end": "1431039"
  },
  {
    "text": "image id the security groups associated with it all the names that have been used for that when those were when those things were",
    "start": "1431039",
    "end": "1436799"
  },
  {
    "text": "created anything that's configuration information about that particular instance so you can use the aws api to",
    "start": "1436799",
    "end": "1443039"
  },
  {
    "text": "dump this information you can also take screenshots by going into the aws management console you'll want to take notes make sure that",
    "start": "1443039",
    "end": "1448880"
  },
  {
    "text": "you document all along the way now the next thing that we'll do is isolate the instance we'll do that by changing the running instances security group to",
    "start": "1448880",
    "end": "1455039"
  },
  {
    "text": "something that's much more restrictive than its existing security group and then we'll inventory associated credentials with that",
    "start": "1455039",
    "end": "1461200"
  },
  {
    "text": "ec2 instance if we can constrain or disable those credentials we will and we'll do that in the manner that we",
    "start": "1461200",
    "end": "1466480"
  },
  {
    "text": "previously discussed with regards to identity access management credentials now moving on we want to determine the",
    "start": "1466480",
    "end": "1472799"
  },
  {
    "text": "actual impact of this ec2 instance and what it's been doing and determine what it might actually have been connecting to or what it may be",
    "start": "1472799",
    "end": "1479520"
  },
  {
    "text": "what it may have uh transitive uh trust to and so we'll revisit all the associated",
    "start": "1479520",
    "end": "1484720"
  },
  {
    "text": "credentials again evaluating the scope to determine if those credentials have access to other services but we're not",
    "start": "1484720",
    "end": "1490240"
  },
  {
    "text": "just talking about aws credentials at this point anything that's on the actual instance whether it's in configurations usernames",
    "start": "1490240",
    "end": "1496240"
  },
  {
    "text": "passwords uh and it and it's talking to other services we'll want to make sure that we're looking for those inventorying",
    "start": "1496240",
    "end": "1501919"
  },
  {
    "text": "those again make make sure that you're preserving data all of this information along the way now security group inheritance is",
    "start": "1501919",
    "end": "1507520"
  },
  {
    "text": "something to pay attention to here as well you can you can provision access to a security group by calling out another",
    "start": "1507520",
    "end": "1513120"
  },
  {
    "text": "security group and saying this security group b is allowed access to security group a if the instance that we're targeting is",
    "start": "1513120",
    "end": "1519840"
  },
  {
    "text": "in security group b and has access to security group a we're going to want we're going to want to actually revoke that access and ensure",
    "start": "1519840",
    "end": "1526400"
  },
  {
    "text": "that security security group b no longer has access to security group a or we're going to want to inventory all",
    "start": "1526400",
    "end": "1533279"
  },
  {
    "text": "the instances that are in the new the security group that has provisioned access to determine if there's an expansion of the scope of our",
    "start": "1533279",
    "end": "1539120"
  },
  {
    "text": "investigation we'll also want to look at the nature of the application on the ec2 instance we want to we want to",
    "start": "1539120",
    "end": "1544400"
  },
  {
    "text": "understand what data sets uh it's been interacting with what services that it interacts with uh this is",
    "start": "1544400",
    "end": "1549520"
  },
  {
    "text": "not just again aws services ec2 services uh we want to know anything that's been interacting with on the internet",
    "start": "1549520",
    "end": "1556559"
  },
  {
    "text": "did i cover that last bit too oh again continue to preserve all the data that you're gathering here so let's talk about",
    "start": "1556559",
    "end": "1562960"
  },
  {
    "text": "recovering when we're trying to recover from this type of concern we want to launch a new ec2",
    "start": "1562960",
    "end": "1569039"
  },
  {
    "text": "instance but we don't want to place it back where that previous instance was just yet we actually wanted to launch it from a known good amazon machine image",
    "start": "1569039",
    "end": "1575760"
  },
  {
    "text": "or a snapshot we want that to be within a limited access security group at this point we're not going to put it back",
    "start": "1575760",
    "end": "1581279"
  },
  {
    "text": "into production just yet and any new credentials that we're going to provision for this new ec2 instance they should be roles and why should we",
    "start": "1581279",
    "end": "1587360"
  },
  {
    "text": "be using roles at this point so you're already in the scenario where you have reason to believe the credentials",
    "start": "1587360",
    "end": "1594000"
  },
  {
    "text": "that were on the instance may no longer be trusted and the time that you get to configure",
    "start": "1594000",
    "end": "1599600"
  },
  {
    "text": "roles for ec2 is when you're launching a new instance so this is the easiest point in time to",
    "start": "1599600",
    "end": "1604799"
  },
  {
    "text": "launch the new instance with a role and by running it under a role you ensure that you get a separate auditable",
    "start": "1604799",
    "end": "1611039"
  },
  {
    "text": "identity for that instance separate credentials that get rotated frequently and",
    "start": "1611039",
    "end": "1616159"
  },
  {
    "text": "you may be in the situation now where the credentials that were on this instance were also on other instances",
    "start": "1616159",
    "end": "1622000"
  },
  {
    "text": "and now you have to go update them all over the place save yourself the hassle there and why am i patching wasn't this fun",
    "start": "1622000",
    "end": "1628000"
  },
  {
    "text": "don't i want to repeat the process no we would rather not repeat this particular process so let's make sure that we get it patched",
    "start": "1628000",
    "end": "1633760"
  },
  {
    "text": "up to date check for any associated software public advisories as well just because you've done the patching process",
    "start": "1633760",
    "end": "1639200"
  },
  {
    "text": "just because you've run whether it's yum update apt-get upgrade etc that's not just enough you need to go",
    "start": "1639200",
    "end": "1645200"
  },
  {
    "text": "out and understand what application will this was this ec2 instance running can i find more information about that on the",
    "start": "1645200",
    "end": "1650559"
  },
  {
    "text": "internet is there a public advisory right now associated with my particular application are there mitigations and workarounds",
    "start": "1650559",
    "end": "1655679"
  },
  {
    "text": "that i should be applying at this point once you feel that you've gotten that to a pretty good warm fuzzy state you're",
    "start": "1655679",
    "end": "1661120"
  },
  {
    "text": "still going to want to run a vulnerability scanner against this ec2 instance make sure that we've got everything known good taken care of and",
    "start": "1661120",
    "end": "1667200"
  },
  {
    "text": "then we'll push it to production before after we've gotten all of those best practices taken care of",
    "start": "1667200",
    "end": "1672880"
  },
  {
    "text": "now this is the work that you assign to the intern this is going down and figuring out what actually happened go back to that suspect instance and",
    "start": "1673919",
    "end": "1680399"
  },
  {
    "text": "perhaps you can actually divide and conquer so while you've got somebody that's working on the recovery operations you might have somebody else working on the investigation",
    "start": "1680399",
    "end": "1686720"
  },
  {
    "text": "uh we don't necessarily assume that everybody has uh more than a two-man incident response team but uh it might help to actually",
    "start": "1686720",
    "end": "1693679"
  },
  {
    "text": "get a couple of divide and conquer things going go back to the suspect instance take a snapshot of it",
    "start": "1693679",
    "end": "1699039"
  },
  {
    "text": "or you can log into it for the purposes of gathering data you can use on the instance tools you want to minimize that as much as possible",
    "start": "1699039",
    "end": "1705840"
  },
  {
    "text": "and generally you want to do most of your analysis off instance use off instance analysis mechanisms to identify",
    "start": "1705840",
    "end": "1710960"
  },
  {
    "text": "the most recent activity try and pinpoint what actually happened so you're going to look into application",
    "start": "1710960",
    "end": "1716000"
  },
  {
    "text": "logs you'll look into directories for suspect behavior or data and then you'll want to develop a timeline of activity actions",
    "start": "1716000",
    "end": "1722320"
  },
  {
    "text": "also any ip addresses and try and tie those ip addresses to known good actors or people that um that you don't know to",
    "start": "1722320",
    "end": "1729200"
  },
  {
    "text": "understand who might have been actor interacting with this ec2 instance it's important to understand that you know at",
    "start": "1729200",
    "end": "1734480"
  },
  {
    "text": "this point all of the data that you're gathering again you need to be preserving it you'll want to go back to that and reference it as you're investigating",
    "start": "1734480",
    "end": "1740960"
  },
  {
    "text": "and so what i want to do now is just shut down the instance right no kill it get it off the internet do not do not shut down the instance",
    "start": "1740960",
    "end": "1748240"
  },
  {
    "text": "because there's interesting things that we can do with that instance again snapshotting is one is one mechanism to",
    "start": "1748240",
    "end": "1753360"
  },
  {
    "text": "gain access to at least the disk and then start performing forensics off instance but you can actually uh you can actually",
    "start": "1753360",
    "end": "1758960"
  },
  {
    "text": "interact with the instance and grab memory from it so move the instance to a different restricted security group",
    "start": "1758960",
    "end": "1764000"
  },
  {
    "text": "uh you want to securely copy over a tool for actual extraction of the memory such as the linux memory extraction kernel",
    "start": "1764000",
    "end": "1769440"
  },
  {
    "text": "module you can dump that memory to disk and actually securely copy it off for off instance analysis",
    "start": "1769440",
    "end": "1775039"
  },
  {
    "text": "or you can actually and that's one way to do it but there's there's actually a cleaner way that requires you to do less interaction",
    "start": "1775039",
    "end": "1781440"
  },
  {
    "text": "with the actual disk and certainly less commands that may interact with the data that you're gathering and keeps it more",
    "start": "1781440",
    "end": "1786640"
  },
  {
    "text": "intact and that's the network stream the actual memory uh across back to another instance so edit edit the actual security group",
    "start": "1786640",
    "end": "1793120"
  },
  {
    "text": "associated with that instance now it's isolated but we're going to edit it but we're going to allow forensic instance",
    "start": "1793120",
    "end": "1798720"
  },
  {
    "text": "access so a specific port from a specific ip or security group and then for",
    "start": "1798720",
    "end": "1804559"
  },
  {
    "text": "building or excuse me for grabbing memory and performing analysis on it later you",
    "start": "1804559",
    "end": "1809840"
  },
  {
    "text": "may have to perform um some some preparation of your actual tools so creating an actual pre-built",
    "start": "1809840",
    "end": "1815200"
  },
  {
    "text": "memory profile from a known good instance so take the same amazon machine image that that instance uh know was was",
    "start": "1815200",
    "end": "1821600"
  },
  {
    "text": "misbehaving from launch and launch an instance of that amazon machine image and now you're going to build all of your tools and",
    "start": "1821600",
    "end": "1826960"
  },
  {
    "text": "your your memory profiles from that clean instance and use that for your analysis so here's a screenshot of in this case",
    "start": "1826960",
    "end": "1834320"
  },
  {
    "text": "we've got our intern instance which has been misbehaving and we decided that we're going to go and look at that right now",
    "start": "1834320",
    "end": "1840399"
  },
  {
    "text": "it's got an open security group if you look at that security group it's allowing http https",
    "start": "1840399",
    "end": "1846000"
  },
  {
    "text": "so it looks like it's serving a web server and we'll want to change the security group isolating the instance so we'll change",
    "start": "1846000",
    "end": "1851440"
  },
  {
    "start": "1847000",
    "end": "1859000"
  },
  {
    "text": "it to an isolated security group in this in this case there's no inbound no outbound traffic to that security group",
    "start": "1851440",
    "end": "1859039"
  },
  {
    "text": "now the target instance is still running but now it's isolated so you can see that the security group has changed from what was an open security group it says",
    "start": "1861039",
    "end": "1867279"
  },
  {
    "text": "it's isolated now we've looked at the rules no inbound no outbound let's go look at",
    "start": "1867279",
    "end": "1872480"
  },
  {
    "text": "a forensics instance it's actually an instance that's built from the same amazon machine image which is a known good public amazon",
    "start": "1872480",
    "end": "1878799"
  },
  {
    "text": "machine image but we're actually going to build tools that are on it specifically for building a memory profile for for",
    "start": "1878799",
    "end": "1884640"
  },
  {
    "text": "dumping memory and performing analysis with it note the ip address of the forensics instance we're going to need that to add",
    "start": "1884640",
    "end": "1890799"
  },
  {
    "text": "to the isolated security group so we'll go back to the isolated security group again it has no inbound",
    "start": "1890799",
    "end": "1897600"
  },
  {
    "start": "1894000",
    "end": "1919000"
  },
  {
    "text": "no outbound rules we'll add a specific rule that allows all traffic but only from the ip address or forensics instance",
    "start": "1897600",
    "end": "1906480"
  },
  {
    "text": "then we want to make sure that we have connectivity to the target instance so our forensics instance can still target",
    "start": "1906480",
    "end": "1911600"
  },
  {
    "text": "our or still reach our target instance or the intern instance so we'll ping that guy looks like we're getting pretty good round trip times",
    "start": "1911600",
    "end": "1919278"
  },
  {
    "text": "the instance not the intern copy over in insmod a linux memory extraction kernel",
    "start": "1919360",
    "end": "1924640"
  },
  {
    "text": "module in this case we'll want to we'll want to build a memory profile specific to",
    "start": "1924640",
    "end": "1929840"
  },
  {
    "text": "uh specific to the actual uh linux linux version and so uh this is an example of actually",
    "start": "1929840",
    "end": "1936320"
  },
  {
    "text": "copying over first our linux uh our linux memory extraction tool uh lime if you're not familiar with it is a",
    "start": "1936320",
    "end": "1942399"
  },
  {
    "text": "very simple mechanism for basically loading a kernel module and dumping memory whether it's to a file or actually over a network",
    "start": "1942399",
    "end": "1949519"
  },
  {
    "text": "so we ins mod that we've got we've got it streaming memory on port 444 we're going to use a very complex",
    "start": "1949519",
    "end": "1955760"
  },
  {
    "text": "and um and but tried and trusted mechanism called netcat to pull our memory over to the forensics",
    "start": "1955760",
    "end": "1961360"
  },
  {
    "text": "instance so we'll netcat to intern we'll stream the memory straight over uh to a local file on the forensics",
    "start": "1961360",
    "end": "1967200"
  },
  {
    "text": "instance now again there's some preparation that we'll have to we'll have to make",
    "start": "1967200",
    "end": "1972960"
  },
  {
    "start": "1969000",
    "end": "2039000"
  },
  {
    "text": "for the purposes of doing actual memory analysis so we'll build a memory profile from the same amazon machine image the same linux",
    "start": "1972960",
    "end": "1980080"
  },
  {
    "text": "version we're going to be building the memory profile because we need we need the same kernel structures and debug",
    "start": "1980080",
    "end": "1986159"
  },
  {
    "text": "debug symbols for the purposes of actually doing memory analysis and in this case we're using volatility to actually do",
    "start": "1986159",
    "end": "1992320"
  },
  {
    "text": "the memory analysis and you can see here that we've built our profile and it's available to",
    "start": "1992320",
    "end": "1998320"
  },
  {
    "text": "volatility for the purposes of doing analysis against a memory profile from another in this case ubuntu linux instance",
    "start": "1998320",
    "end": "2005840"
  },
  {
    "text": "now that we have the memory that's over onto our forensics instance we can use volatility to pull things out of that and find out",
    "start": "2006320",
    "end": "2012240"
  },
  {
    "text": "what's going on in this case we're doing a dump of processes there's a there's a tree based version of that that allows you to see both parent and",
    "start": "2012240",
    "end": "2019039"
  },
  {
    "text": "child processes so if we look at that we can actually see we've got ssh we've got bash we've got sudo and we've got ins mod that actually",
    "start": "2019039",
    "end": "2025679"
  },
  {
    "text": "is us having performed or logged into the actual instance and actually performing the ins mod of",
    "start": "2025679",
    "end": "2031120"
  },
  {
    "text": "our linux kernel for extraction of memory and that's expected everything else though we're going to want to pay",
    "start": "2031120",
    "end": "2036559"
  },
  {
    "text": "attention to right and do a little bit more investigation now if we have an intern who's decided",
    "start": "2036559",
    "end": "2041679"
  },
  {
    "start": "2039000",
    "end": "2072000"
  },
  {
    "text": "that they're going to turn off their bash history such as setting their hist file to zero or setting his file to devnull",
    "start": "2041679",
    "end": "2046960"
  },
  {
    "text": "and they think that they're going to get away with that nope we can actually get their bash history out of memory so we'll use volatility and we'll actually",
    "start": "2046960",
    "end": "2052638"
  },
  {
    "text": "extract the bash history commands out of memory and in this case you can see there's somebody that's actually logged into",
    "start": "2052639",
    "end": "2057919"
  },
  {
    "text": "that instance they've run an upgrade of the actual operating system they've rebooted it and then you can see the last three commands",
    "start": "2057919",
    "end": "2063599"
  },
  {
    "text": "which are the commands that we ran changing to the temp directory doing an ls and ends modding the linux",
    "start": "2063599",
    "end": "2068638"
  },
  {
    "text": "memory extraction kernel module there are other things that we can do",
    "start": "2068639",
    "end": "2074000"
  },
  {
    "start": "2072000",
    "end": "2101000"
  },
  {
    "text": "with memory analysis such as looking at uh interfaces and looking at the ip addresses associated with those again we're doing",
    "start": "2074000",
    "end": "2079520"
  },
  {
    "text": "this all off of the instance we're doing all this investigation separate from interaction with the instance the minimal interaction that we had",
    "start": "2079520",
    "end": "2085280"
  },
  {
    "text": "was to actually grab the memory extract it get it back to a good place that we can actually inspect it we can also check for rogue modules so",
    "start": "2085280",
    "end": "2091599"
  },
  {
    "text": "volatility has an example of looking for linux kernel modules that would be associated with a rootkit and",
    "start": "2091599",
    "end": "2096960"
  },
  {
    "text": "in this case we don't have any so maybe the intern just made some mistakes and there hasn't been anything else going on now we can also do",
    "start": "2096960",
    "end": "2103760"
  },
  {
    "start": "2101000",
    "end": "2198000"
  },
  {
    "text": "disk analysis so we created that snapshot from the instance uh we did that by snapshotting the",
    "start": "2103760",
    "end": "2109359"
  },
  {
    "text": "instances volume now we can create a volume from that snapshot and we can launch our forensics instance or a new a new",
    "start": "2109359",
    "end": "2116079"
  },
  {
    "text": "instance for installing other types of forensics tools such as sleuthkit or autopsy there are publicly available community",
    "start": "2116079",
    "end": "2122320"
  },
  {
    "text": "amazon machine images that have uh forensics tools such as sift and then we'll attach that volume the snapshot of",
    "start": "2122320",
    "end": "2128079"
  },
  {
    "text": "volume we'll attach it to a forensics instance and we'll dd all the information from that to an image because images are much",
    "start": "2128079",
    "end": "2133760"
  },
  {
    "text": "more much more comfortable to work with with a number of different tools so why don't you just just hold those tools right on the instance that's having the problem",
    "start": "2133760",
    "end": "2140000"
  },
  {
    "text": "why go through all this work again we want to we want to minimize our interaction with the instance that's been exhibiting",
    "start": "2140000",
    "end": "2145839"
  },
  {
    "text": "suspect behavior we want to do all of our analysis off instance such that we're not manipulating anything and impacting our",
    "start": "2145839",
    "end": "2152560"
  },
  {
    "text": "our ability to investigate so we'll create a hash of that image we'll copy it to",
    "start": "2152560",
    "end": "2157920"
  },
  {
    "text": "another volume for our purposes of working we don't want to work off the original image right we want to make sure that we're working off of a copy of",
    "start": "2157920",
    "end": "2164079"
  },
  {
    "text": "that now if we want to do that in a traditional environment such as back home and on premise or you know",
    "start": "2164079",
    "end": "2170000"
  },
  {
    "text": "in the kitchen i don't care you can have s3 actually ship it to you on a disk so use aws import export to get your",
    "start": "2170000",
    "end": "2176079"
  },
  {
    "text": "data back to you in a box we're pretty good at shipping things in a box right here and if you want to you can also download it",
    "start": "2176079",
    "end": "2181839"
  },
  {
    "text": "download it would mean that you're going to spend time waiting for the bits to actually stream to wherever your location is or you can just analyze",
    "start": "2181839",
    "end": "2187920"
  },
  {
    "text": "everything right there again if you build an analysis instance within the aws environment you can attach the image to",
    "start": "2187920",
    "end": "2193599"
  },
  {
    "text": "that analysis instance and start performing your disk analysis faster and cheaper so let's talk about",
    "start": "2193599",
    "end": "2201839"
  },
  {
    "start": "2198000",
    "end": "2288000"
  },
  {
    "text": "um finding out that there's more instances running in a region that you didn't expect there to be",
    "start": "2201839",
    "end": "2206960"
  },
  {
    "text": "maybe you're using you know the handy-dandy script that we had in the last talk that would tell you",
    "start": "2206960",
    "end": "2212000"
  },
  {
    "text": "whenever you had greater than zero charges in any of the regions other than u.s regions etc uh you've got that alert you go and you",
    "start": "2212000",
    "end": "2218400"
  },
  {
    "text": "find out that you have a bunch of ec2 instances again you want to you want to isolate any unwanted ec2 instances",
    "start": "2218400",
    "end": "2224720"
  },
  {
    "text": "get those to an isolated security group if we're talking about resources such as more objects in a bucket than you",
    "start": "2224720",
    "end": "2230960"
  },
  {
    "text": "expected or maybe more people downloading an object that you didn't expect was public",
    "start": "2230960",
    "end": "2236320"
  },
  {
    "text": "if we're talking about objects tied to an open bubble bucket you'll want to ackle those appropriately and make sure that you",
    "start": "2236320",
    "end": "2242480"
  },
  {
    "text": "check any of the bucket logs associated with that you also want to review nearby cloudtrail events particularly any",
    "start": "2242480",
    "end": "2248720"
  },
  {
    "text": "relevant api calls the credentials associated with this particular issue so if we're looking at the",
    "start": "2248720",
    "end": "2254079"
  },
  {
    "text": "cloudtrail events and we see uh aws key ids we're going we want to investigate all of those key",
    "start": "2254079",
    "end": "2259839"
  },
  {
    "text": "ids understand who they belong to and what the what the scope of those credentials are as well",
    "start": "2259839",
    "end": "2265599"
  },
  {
    "text": "and terminate any unwanted instances you don't want to continue to rack up the bill however retain snapshots for analysis storage is",
    "start": "2265599",
    "end": "2272720"
  },
  {
    "text": "cheap and you can actually use those later on to understand what actually happened similarly if you have unwanted objects",
    "start": "2272720",
    "end": "2278240"
  },
  {
    "text": "that showed up in s3 bucket that was more open than you expected you'll want to save those and review those later",
    "start": "2278240",
    "end": "2284320"
  },
  {
    "text": "back them up but don't forget to document all the metadata along the way",
    "start": "2284320",
    "end": "2289680"
  },
  {
    "start": "2288000",
    "end": "2348000"
  },
  {
    "text": "and what happens if the intern decides he's going to go on a delete tear in s3 well you were using bucket",
    "start": "2289680",
    "end": "2295520"
  },
  {
    "text": "versioning right absolutely okay so then you've got all of your old objects and you just use the",
    "start": "2295520",
    "end": "2301839"
  },
  {
    "text": "s3 copy to copy the previous version back and then you're good to go bucket logging that's turned on you can",
    "start": "2301839",
    "end": "2308079"
  },
  {
    "text": "tell exactly what happened and review those logs mfa delete",
    "start": "2308079",
    "end": "2314480"
  },
  {
    "text": "is an option if you want to make it even harder for objects that you care deeply about to",
    "start": "2314480",
    "end": "2319520"
  },
  {
    "text": "be erased and another thing that you can look into is s3 lifecycle configuration can be",
    "start": "2319520",
    "end": "2326079"
  },
  {
    "text": "used as the way that you manage your data retention so that none of the credentials that you have out there actually have the",
    "start": "2326079",
    "end": "2331839"
  },
  {
    "text": "permissions to delete things and again these are the mechanisms that we have for you to recover basically go",
    "start": "2331839",
    "end": "2337440"
  },
  {
    "text": "back in time and restore things if you haven't turned these things on and you're not making use of these and",
    "start": "2337440",
    "end": "2342560"
  },
  {
    "text": "you'd like another option i suggest buying a used delorean and installing a flux capacitor",
    "start": "2342560",
    "end": "2348960"
  },
  {
    "start": "2348000",
    "end": "2388000"
  },
  {
    "text": "so support if you have an issue that you're dealing with and you need to engage us you need some assistance feel free to reach out to aws support we're your one",
    "start": "2349119",
    "end": "2355520"
  },
  {
    "text": "stop shop for any of your concerns security related or otherwise and if we can't immediately",
    "start": "2355520",
    "end": "2360640"
  },
  {
    "text": "help you via our immediate support we will have run books we'll have training that",
    "start": "2360640",
    "end": "2365760"
  },
  {
    "text": "ensures that people are engaging subject matter experts internally to assist you also pay attention to our",
    "start": "2365760",
    "end": "2371680"
  },
  {
    "text": "security best practices we pointed out a bunch of those at the beginning of the talk however we have white papers that",
    "start": "2371680",
    "end": "2378400"
  },
  {
    "text": "specifically talk about the tactics to each and every service all the best practices that you should be doing for those as well as monitoring",
    "start": "2378400",
    "end": "2385359"
  },
  {
    "text": "auditing alerting and incident response specific to those services aws security related resources check out",
    "start": "2385359",
    "end": "2391440"
  },
  {
    "text": "the blog we post uh interesting things there and in one case we've actually posted an entire lengthy",
    "start": "2391440",
    "end": "2396640"
  },
  {
    "text": "blog post about how to deal with an identity access management credential exposure and to actually recover from that",
    "start": "2396640",
    "end": "2404880"
  },
  {
    "start": "2404000",
    "end": "2424000"
  },
  {
    "text": "and if you have any questions you can always reach out to the aws security team at aws security act everyone got these urls",
    "start": "2404880",
    "end": "2411040"
  },
  {
    "text": "don't worry the slides will be available later absolutely what are some other talks that they should have already gone to or",
    "start": "2411040",
    "end": "2416079"
  },
  {
    "text": "that they should do today the talks that you've probably already missed are up here you can catch them on youtube given that we're getting",
    "start": "2416079",
    "end": "2421599"
  },
  {
    "text": "towards the end of the day thursday also external resources for incident",
    "start": "2421599",
    "end": "2427280"
  },
  {
    "start": "2424000",
    "end": "2460000"
  },
  {
    "text": "response particularly for those people that are still in the process of finding people training people building capabilities",
    "start": "2427280",
    "end": "2434079"
  },
  {
    "text": "building tools and developing an incident response plan should check out the sands reading room on incident response a lot of great",
    "start": "2434079",
    "end": "2439359"
  },
  {
    "text": "information there and as people are building more information they're targeting it towards cloud environments so you're getting a",
    "start": "2439359",
    "end": "2444720"
  },
  {
    "text": "lot of great information from more people in the public with regards to incident response first for training you",
    "start": "2444720",
    "end": "2451920"
  },
  {
    "text": "can go to conferences specific to incident response and insert of course maintains a lot of documentation on incident",
    "start": "2451920",
    "end": "2457119"
  },
  {
    "text": "management particularly in developing an incident response plan so what do you want everybody to",
    "start": "2457119",
    "end": "2462160"
  },
  {
    "start": "2460000",
    "end": "2493000"
  },
  {
    "text": "understand today so if you do anything when you go back to your hotel room tonight go in turn cloudtrail on it's really",
    "start": "2462160",
    "end": "2469599"
  },
  {
    "text": "one slider in the console enter a bucket name you will thank yourself later the la you want those logs similarly",
    "start": "2469599",
    "end": "2477440"
  },
  {
    "text": "you can't restore backups that you don't have either turn on versioning take snapshots",
    "start": "2477440",
    "end": "2483760"
  },
  {
    "text": "it's incredibly useful to be able to go back in time either to reconstruct a timeline of what went",
    "start": "2483760",
    "end": "2489040"
  },
  {
    "text": "wrong or just to get back the data that was deleted accidentally we highly suggest that you take all the",
    "start": "2489040",
    "end": "2495839"
  },
  {
    "text": "recommendations within this particular talk as well as the external resources again make sure that you have the people",
    "start": "2495839",
    "end": "2501119"
  },
  {
    "text": "the tools and the plan in place you'll want that sooner rather than later and if you have another 20 minutes",
    "start": "2501119",
    "end": "2506880"
  },
  {
    "text": "stop using root credentials please use reasonable least privilege that way",
    "start": "2506880",
    "end": "2513440"
  },
  {
    "start": "2509000",
    "end": "2543000"
  },
  {
    "text": "you don't have to track down policy changes that may have been made and don't forget to practice you don't actually have to have a real",
    "start": "2513440",
    "end": "2519359"
  },
  {
    "text": "incident in order to actually experience what it takes to so i should practice uploading my credentials to a public repository",
    "start": "2519359",
    "end": "2525599"
  },
  {
    "text": "probably not okay i guess i could practice what i would do if they were there without putting them there that's",
    "start": "2525599",
    "end": "2531680"
  },
  {
    "text": "right thanks a lot thanks for showing up we really appreciate you showing up and make sure that you give us feedback",
    "start": "2531680",
    "end": "2537119"
  },
  {
    "text": "we'll be outside in the q a area for questions thanks",
    "start": "2537119",
    "end": "2544960"
  }
]