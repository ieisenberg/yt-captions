[
  {
    "start": "0",
    "end": "162000"
  },
  {
    "text": "hello All right Cool Hello everyone My name is Jeremy and I uh do reliability",
    "start": "73439",
    "end": "78799"
  },
  {
    "text": "at Netflix and I'm here today to tell you about how we do our operations which",
    "start": "78799",
    "end": "84240"
  },
  {
    "text": "I put in air quotes because you'll see later it's not exactly traditional ops So questions for you guys How many of",
    "start": "84240",
    "end": "90400"
  },
  {
    "text": "you have at your company a release engineer a QA department or use Chef or",
    "start": "90400",
    "end": "95600"
  },
  {
    "text": "Pup to manage your systems awesome So Netflix has none of",
    "start": "95600",
    "end": "101439"
  },
  {
    "text": "those This is not We're The Clicker isn't doing its thing here There we go",
    "start": "101720",
    "end": "107920"
  },
  {
    "text": "Okay How many of you do upwards of a 100 releases a day cool So Netflix does do that",
    "start": "107920",
    "end": "115200"
  },
  {
    "text": "Uh this is what Netflix looks like For those of you who may not know we're a online video streaming service to let",
    "start": "115200",
    "end": "120479"
  },
  {
    "text": "you watch what you want when you want to where you want to Uh we have 30 million customers and uh all over the world",
    "start": "120479",
    "end": "127840"
  },
  {
    "text": "United States UK Canada the Nordics And uh this is the Netflix way",
    "start": "127840",
    "end": "133840"
  },
  {
    "text": "So I'm going to start by telling you a little bit about our philosophies that sort of drive our decisions and then I'm going to get into the weeds about how we",
    "start": "133840",
    "end": "140480"
  },
  {
    "text": "actually do things So you know we try to build for three We believe in automation We try to automate everything Uh and I'm",
    "start": "140480",
    "end": "147280"
  },
  {
    "text": "going to tell you a whole lot about how we bake our images and all of that For those of you taking pictures of the",
    "start": "147280",
    "end": "152400"
  },
  {
    "text": "slides they'll all be available later So you don't have to do that if you don't want to Uh so here's some philos quick",
    "start": "152400",
    "end": "159040"
  },
  {
    "text": "cartoon about philosophy All right Good So like I said",
    "start": "159040",
    "end": "164560"
  },
  {
    "text": "we like to automate everything We believe in automation Uh application startup configuration deployment all of",
    "start": "164560",
    "end": "171599"
  },
  {
    "text": "that stuff So all right uh we also automate building of our images We do not use ad",
    "start": "171599",
    "end": "178400"
  },
  {
    "text": "hoc tools We uh use uh automation to build fully baked images that we launch",
    "start": "178400",
    "end": "183680"
  },
  {
    "text": "And I'll tell you a little bit more about that later Okay This thing is totally",
    "start": "183680",
    "end": "189959"
  },
  {
    "text": "not uh this thing is driving me crazy Okay",
    "start": "189959",
    "end": "196080"
  },
  {
    "text": "here we go Uh so we also believe that shared state should be in a shared",
    "start": "196080",
    "end": "201599"
  },
  {
    "text": "service and uh data in on if you are going to store some data on an instance we make sure that it's always on another",
    "start": "201599",
    "end": "208200"
  },
  {
    "text": "instance We try to build for three So when we start out we try to build we use three availability zones and we have",
    "start": "208200",
    "end": "215040"
  },
  {
    "text": "everybody launch all their stuff in three availability zones by default And so we make sure everybody's building their software to do that Uh we also run",
    "start": "215040",
    "end": "222720"
  },
  {
    "text": "a serviceoriented architecture So uh this is mission control If you're not familiar the way mission control works",
    "start": "222720",
    "end": "228480"
  },
  {
    "text": "is every one of those screens is backed up by an entire room of people Serviceoriented architecture very similar We have a lot of different uh",
    "start": "228480",
    "end": "235480"
  },
  {
    "text": "applications and they all talk to each other via well-defined rest interfaces and so each team can independently",
    "start": "235480",
    "end": "242000"
  },
  {
    "text": "manage their own service Uh so we are highly aligned and loosely coupled as we like to say Uh so",
    "start": "242000",
    "end": "250159"
  },
  {
    "text": "each team gets to build their service They publish their API the other teams can use their API They don't have to you",
    "start": "250159",
    "end": "256239"
  },
  {
    "text": "know work figure out okay we're going to do this we're going to do this And a little bit later I'll tell you how we manage handling the fact that the teams",
    "start": "256239",
    "end": "263199"
  },
  {
    "text": "don't have to talk to each other about how often they're going to call each other's APIs So some of the advantages",
    "start": "263199",
    "end": "268479"
  },
  {
    "text": "that we have are easier autoscaling because we can just autoscale services that need to be scaled at the time Uh",
    "start": "268479",
    "end": "273919"
  },
  {
    "text": "it's easier for capacity planning because we can kind of each service has its own uh sort of model of capacity uh",
    "start": "273919",
    "end": "281440"
  },
  {
    "text": "we can identify problematic code paths more easily because we don't have a monolithic app and a couple of other",
    "start": "281440",
    "end": "288080"
  },
  {
    "text": "benefits there So uh we also believe in what we call freedom and responsibility So developers deploy when they want",
    "start": "288080",
    "end": "295120"
  },
  {
    "text": "where they want whenever they want to Uh they also manage their own capacity and",
    "start": "295120",
    "end": "300320"
  },
  {
    "text": "we page them at 4 in the morning if their stuff breaks and then they have to fix it So each team has to operate their",
    "start": "300320",
    "end": "306000"
  },
  {
    "text": "own service independently Now we give them help my team is sort of the central team and we sort of give them best",
    "start": "306000",
    "end": "312080"
  },
  {
    "text": "practices and help them out once in a while but for the most part they're operating their own stuff So another uh big underlying",
    "start": "312080",
    "end": "319759"
  },
  {
    "text": "philosophy of our is uh that all the system choices assume something is going to fail So we try to build everything so",
    "start": "319759",
    "end": "326400"
  },
  {
    "text": "that if something fails it's not going to be a problem I'll tell you a little bit later about the monkeys that we use to make sure that's the case",
    "start": "326400",
    "end": "333759"
  },
  {
    "text": "Here's the monkey theory that we simulate what's going to go wrong and we find failures before they actually happen I'll tell you more about that",
    "start": "333759",
    "end": "339520"
  },
  {
    "text": "later too So how do we actually do this we started by building ourselves",
    "start": "339520",
    "end": "345199"
  },
  {
    "text": "essentially a global platform as a service Uh we built our own Java platform Uh at the very least if you're",
    "start": "345199",
    "end": "352320"
  },
  {
    "text": "a developer all you have to do is check in your code and it will and an machine",
    "start": "352320",
    "end": "358080"
  },
  {
    "text": "image will come out that runs that code on the web if you're building a web service which most people are So that's",
    "start": "358080",
    "end": "364639"
  },
  {
    "text": "the minimum you can do You can dive a lot deeper into that I'll tell you about that in a sec But essentially what we've",
    "start": "364639",
    "end": "369919"
  },
  {
    "text": "done is built a pass that supports all these",
    "start": "369919",
    "end": "373759"
  },
  {
    "text": "features Okay so this thing is come on clickers There we go Okay so ads",
    "start": "375080",
    "end": "382160"
  },
  {
    "text": "provides that stuff They provide instances IPs hardware load balancers you know regions zones all that sort of",
    "start": "382160",
    "end": "388880"
  },
  {
    "text": "stuff And then our platform provides Oh my",
    "start": "388880",
    "end": "394680"
  },
  {
    "text": "god Okay All right Oh",
    "start": "394680",
    "end": "400360"
  },
  {
    "text": "my I don't even know what's going on here Okay So this is what our base AMI",
    "start": "400360",
    "end": "405919"
  },
  {
    "text": "looks like And I'll tell you more about how that works So like I said you only have to put in your one file Uh does",
    "start": "405919",
    "end": "411440"
  },
  {
    "text": "this thing have a pointer i don't know if it does but you can see there all the war file is the only thing you have to put in And so this is This is what our",
    "start": "411440",
    "end": "420400"
  },
  {
    "text": "platform provides Uh this is the Netflix platform All the green things are open sourced Uh we hope to open source more",
    "start": "420400",
    "end": "426639"
  },
  {
    "text": "of them as we go forward We'd ideally like to have the entire platform open source so everybody can run our platform",
    "start": "426639",
    "end": "431919"
  },
  {
    "text": "because this benefits us because then we get the the benefits of everybody using it everybody driving it in the same",
    "start": "431919",
    "end": "437639"
  },
  {
    "text": "direction things like that So like I said we believe in open sourcing Here's the timeline of when",
    "start": "437639",
    "end": "444240"
  },
  {
    "text": "we've open sourced uh mostly it's actually been almost exactly a year since we started open sourcing our stuff",
    "start": "444240",
    "end": "450560"
  },
  {
    "text": "and we've got a ton of things out and a ton of activity and it's wonderful Lots of watchers We've even had some outside",
    "start": "450560",
    "end": "456319"
  },
  {
    "text": "commits We even get commits from former employees who go to new companies take the tools with them and then commit",
    "start": "456319",
    "end": "462479"
  },
  {
    "text": "patches back to us which is awesome So let me tell you real quickly about some of our platform Uh we have discovery",
    "start": "462479",
    "end": "469120"
  },
  {
    "start": "464000",
    "end": "571000"
  },
  {
    "text": "which is open source as Eureka which is what we use to find our instances things can register with it so that everything",
    "start": "469120",
    "end": "475840"
  },
  {
    "text": "else knows where to find it We have uh entry points open source as EDA which lets us do queries and find out about",
    "start": "475840",
    "end": "482319"
  },
  {
    "text": "our infrastructure It also has an API which I'll tell you about in a little bit that other machines can use to query",
    "start": "482319",
    "end": "488720"
  },
  {
    "text": "the state of Amazon uh of our systems We have our internal web service which is",
    "start": "488720",
    "end": "494160"
  },
  {
    "text": "like our internal load balancer It essentially directs traffic in an intelligent way So if you're trying to",
    "start": "494160",
    "end": "499599"
  },
  {
    "text": "hit a service it'll make sure to go to the one that's in your zone before going outside your zone Things like that The",
    "start": "499599",
    "end": "505599"
  },
  {
    "text": "geoloccation library Wow I don't know what's wrong",
    "start": "505599",
    "end": "510960"
  },
  {
    "text": "with this thing but",
    "start": "510960",
    "end": "514520"
  },
  {
    "text": "okay good At least it's not me All right here we go So here's the example of the",
    "start": "517120",
    "end": "522399"
  },
  {
    "text": "a the REST API for entry points You can It's as simple as that uh some examples",
    "start": "522399",
    "end": "527920"
  },
  {
    "text": "of what you can do with it You can see those queries down at the bottom are more complex but they do some fairly powerful things and uh these are really",
    "start": "527920",
    "end": "534720"
  },
  {
    "text": "useful for us when we're running all the instances we are because sometimes you know you got to find an instance somewhere or and you don't know which",
    "start": "534720",
    "end": "541040"
  },
  {
    "text": "ASG to look in So this really helps us out Uh we also have uh configuration",
    "start": "541040",
    "end": "548279"
  },
  {
    "text": "zookeeper logging which is uh recently released and uh we have a couple of things that",
    "start": "548279",
    "end": "554320"
  },
  {
    "text": "we use to keep it secure as well So we have uh we built a service that does key management which uh is uh very similar",
    "start": "554320",
    "end": "561279"
  },
  {
    "text": "to the feature that Amazon recently released Uh that way we don't have to keep keys on boxes because that's one of",
    "start": "561279",
    "end": "567120"
  },
  {
    "text": "our essential rules is we don't keep Amazon keys on boxes We check them out instead And uh and then we have uh some",
    "start": "567120",
    "end": "574399"
  },
  {
    "start": "571000",
    "end": "717000"
  },
  {
    "text": "libraries for data storage for Cassandra PM sdnx We also have EV cache which is",
    "start": "574399",
    "end": "581279"
  },
  {
    "text": "our uh wrapper for memcache and also some proxies",
    "start": "581279",
    "end": "587000"
  },
  {
    "text": "So there we go Speaking of data what do we do with all of our data we store it",
    "start": "587000",
    "end": "593760"
  },
  {
    "text": "We store it in caches and in Cassandra and an RDS Oh my god this thing is driving me",
    "start": "593760",
    "end": "600320"
  },
  {
    "text": "crazy",
    "start": "600320",
    "end": "603320"
  },
  {
    "text": "What was that don't push Go ahead and try it",
    "start": "605440",
    "end": "612600"
  },
  {
    "text": "Nothing there Okay This is our Cassandra architecture Uh if you look closely",
    "start": "613720",
    "end": "619839"
  },
  {
    "text": "you'll see the way we divide our keys is we use pum to make sure that the keys are split out across the regions so that",
    "start": "619839",
    "end": "625600"
  },
  {
    "text": "each chunk of data lives in all three regions And that way if any one region disappears we still have two chunks two",
    "start": "625600",
    "end": "632079"
  },
  {
    "text": "copies of that data left so that Cassandra can keep writing can keep reading and it can keep running",
    "start": "632079",
    "end": "638640"
  },
  {
    "text": "Why do we choose Cassandra because it has it favors availability over consistency writes over reads Also",
    "start": "638640",
    "end": "645519"
  },
  {
    "text": "because we're mainly a Java shop We have lots of other languages but we know Java well and it was open source with support",
    "start": "645519",
    "end": "652320"
  },
  {
    "text": "Uh so this is a little bit about uh we have PUM which is a really great tool if you're using Cassandra It really helps",
    "start": "652320",
    "end": "659040"
  },
  {
    "text": "with the administration panes of Cassandra It divides things uh around um",
    "start": "659040",
    "end": "665440"
  },
  {
    "text": "the ring when you're trying to lay it out you can grow and shrink the ring using it etc And then we have SDNX which",
    "start": "665440",
    "end": "671600"
  },
  {
    "text": "is our uh our Cassandra accessing library and it does some pretty intelligent things about uh how it",
    "start": "671600",
    "end": "678720"
  },
  {
    "text": "reaches you know which Cassandra is it going to request information for Here's some examples of uh some of our tools",
    "start": "678720",
    "end": "685440"
  },
  {
    "text": "that we use So those represent our Cassandra rings We have uh 50 I think of them right yeah 50 rings Uh so this is a",
    "start": "685440",
    "end": "692560"
  },
  {
    "text": "representation of them there Uh this is how we can create we have some guies on",
    "start": "692560",
    "end": "697760"
  },
  {
    "text": "top of that that we can use to create column families very easily and uh so this is that",
    "start": "697760",
    "end": "703519"
  },
  {
    "text": "representation again split by region so you can see how the uh data is divided",
    "start": "703519",
    "end": "708880"
  },
  {
    "text": "roughly uh and it's also we split it globally and if you want to learn a whole lot more about Cassandra we have",
    "start": "708880",
    "end": "714320"
  },
  {
    "text": "an entire talk on Cassandra and Netflix later on today So what we also have the",
    "start": "714320",
    "end": "719600"
  },
  {
    "start": "717000",
    "end": "895000"
  },
  {
    "text": "tools that we've created and the tools are really what let us our developers get done what they need to get done Uh",
    "start": "719600",
    "end": "725680"
  },
  {
    "text": "you how many of you are familiar with Asgard used by the presidential campaign",
    "start": "725680",
    "end": "731279"
  },
  {
    "text": "uh that's kind of cool This is kind of what it does It get it this is the",
    "start": "731279",
    "end": "736720"
  },
  {
    "text": "Netflix model of doing things We so we have the the things that Amazon provides like the autoscaling groups and the",
    "start": "736720",
    "end": "742639"
  },
  {
    "text": "launch configurations and the elastic load balancers and then Asgard sits on top of that basically and creates",
    "start": "742639",
    "end": "749200"
  },
  {
    "text": "clusters and uh creates applications and things like that And what it also does",
    "start": "749200",
    "end": "754399"
  },
  {
    "text": "is it lets us do deployments So for example let's say we're going to deploy the API front end We have a cluster of",
    "start": "754399",
    "end": "760720"
  },
  {
    "text": "machines uh that are running it And uh this was talked about in the keynote this morning So this is great It means that I can go quicker uh we do red black",
    "start": "760720",
    "end": "767839"
  },
  {
    "text": "deployments So we'll bring up a new cluster of the of the new code It'll be all a whole new cluster on the side The",
    "start": "767839",
    "end": "775200"
  },
  {
    "text": "traffic will be turned on on both Then we'll turn off the traffic on the old cluster and then we'll wait overnight or",
    "start": "775200",
    "end": "783200"
  },
  {
    "text": "whatever and come back in the morning and we'll see hey this cluster is great Everything's working There doesn't seem",
    "start": "783200",
    "end": "789040"
  },
  {
    "text": "to be any problems And so we destroy the old cluster We just delete all those instances and then we have the new cluster and everything's happy and good",
    "start": "789040",
    "end": "796399"
  },
  {
    "text": "Now of course sometimes code doesn't work as you expect So we've got your old code running We bring up the new cluster",
    "start": "796399",
    "end": "803440"
  },
  {
    "text": "Oh things aren't looking so good because we got both you know traffic going to both Uh we turn off the traffic to the",
    "start": "803440",
    "end": "808720"
  },
  {
    "text": "old one and now things are really bad So we know that there's a problem And so we can very quickly switch back the traffic",
    "start": "808720",
    "end": "814720"
  },
  {
    "text": "to the old cluster and now we're happy again because we're not serving that bad traffic And then we just destroy that",
    "start": "814720",
    "end": "821399"
  },
  {
    "text": "cluster And so I actually am going to do that right now Uh so this is uh this is actually our",
    "start": "821399",
    "end": "828959"
  },
  {
    "text": "version of Asgard Uh this is my team software And so uh what I'm going to do",
    "start": "828959",
    "end": "834639"
  },
  {
    "text": "is I'm going to tell it to create a new cluster here of uh one instance of a medium",
    "start": "834639",
    "end": "841519"
  },
  {
    "text": "size And so it's going to create the the thing here And you can see it's uh right here It's telling you what's going on",
    "start": "842440",
    "end": "848959"
  },
  {
    "text": "It's telling you how long it's been It's giving you the whole log And I'll come back to that in a little bit and we can",
    "start": "848959",
    "end": "854720"
  },
  {
    "text": "check out how that went So here's some other screenshots of Asgard Uh this is our list of",
    "start": "854720",
    "end": "862240"
  },
  {
    "text": "applications We have 400 plus different applications running Uh each one",
    "start": "862240",
    "end": "867360"
  },
  {
    "text": "independently managed Uh this is our list of autoscaling groups We have over",
    "start": "867360",
    "end": "873920"
  },
  {
    "text": "600 different autoscaling groups running right now I just checked it this morning I think it was 642 And uh so these are",
    "start": "873920",
    "end": "880720"
  },
  {
    "text": "the different groups And so we use a lot of autoscaling groups because then our traffic goes uh or our cluster sizes",
    "start": "880720",
    "end": "886959"
  },
  {
    "text": "change with our traffic And I'll show you a little bit more about that later Uh so here's that screen I just showed",
    "start": "886959",
    "end": "892320"
  },
  {
    "text": "you with the red black deployment So what we've basically done is moved the granularity from the",
    "start": "892320",
    "end": "899120"
  },
  {
    "text": "instance to the cluster We've moved it up We don't worry about independent instances If one instance is doing",
    "start": "899120",
    "end": "905440"
  },
  {
    "text": "something wrong we just delete it If it happens again and again we might dive in and figure out okay why is it doing",
    "start": "905440",
    "end": "911839"
  },
  {
    "text": "doing this again and again it's probably a software issue But if it just happens occasionally and it's looks like a",
    "start": "911839",
    "end": "917120"
  },
  {
    "text": "hardware issue we just ignore it because that's Amazon's problem not ours So this is uh what we've done We've we've lifted",
    "start": "917120",
    "end": "923839"
  },
  {
    "text": "that abstraction one layer So I told you earlier that we do",
    "start": "923839",
    "end": "928880"
  },
  {
    "text": "fully baked machine images We don't use ad hoc tools We don't use Chef or Puppet or anything like that And this is sort",
    "start": "928880",
    "end": "935760"
  },
  {
    "text": "of a comparison of the two This is the traditional model up at the top where you would take a generic AMI then you would install some uh packages onto it",
    "start": "935760",
    "end": "942880"
  },
  {
    "text": "from your repository or a public repository and have a running image whereas we don't do that So what we do",
    "start": "942880",
    "end": "950240"
  },
  {
    "text": "oh my okay there we go So what we do do is uh we have this pipeline basically",
    "start": "950240",
    "end": "956240"
  },
  {
    "text": "for building our machine images or actually this is for our app bundles Uh so you check in your code and uh Jenkins",
    "start": "956240",
    "end": "962959"
  },
  {
    "text": "pretty much takes care of the rest using uh you know Ant and Ivy and it checks it and does runs the tests make sure",
    "start": "962959",
    "end": "969839"
  },
  {
    "text": "everything works and builds out an image creating an app bundle So what we have is we have the uh the base image uh we",
    "start": "969839",
    "end": "977040"
  },
  {
    "text": "have the foundation AMI and the base AMI and what we have are snapshots of these",
    "start": "977040",
    "end": "982720"
  },
  {
    "text": "uh EBS snapshots and we have a bakery So we have a set of instances and what they'll do is they'll attach an in uh",
    "start": "982720",
    "end": "988560"
  },
  {
    "text": "one of these snapshots run some you know run the scripts to configure them and get them ready to go take a snapshot of",
    "start": "988560",
    "end": "994880"
  },
  {
    "text": "that EBS and then that becomes our new master image Uh and then once that's done we",
    "start": "994880",
    "end": "1001120"
  },
  {
    "text": "have we're ready for baking our app We do this process every couple of weeks where we update the base image The base",
    "start": "1001120",
    "end": "1007519"
  },
  {
    "text": "image includes uh libraries that everybody uses So it includes you know Java it includes Python couple of the",
    "start": "1007519",
    "end": "1014399"
  },
  {
    "text": "main libraries things like that Uh any security updates that need to go in any OS updates etc So every couple of weeks",
    "start": "1014399",
    "end": "1020959"
  },
  {
    "text": "we do that and then baking an application looks very similar We have",
    "start": "1020959",
    "end": "1026000"
  },
  {
    "text": "the base AMI it gets mounted onto the bakery Then the uh we mount up one of",
    "start": "1026000",
    "end": "1032480"
  },
  {
    "text": "these snapshots that's available Then uh the packages are pulled from our internal repo and uh I'll show you a",
    "start": "1032480",
    "end": "1039438"
  },
  {
    "text": "little bit the build that uh script that does that Uh so it pulls in installs the applications puts it onto the uh EBS",
    "start": "1039439",
    "end": "1047038"
  },
  {
    "text": "volume We snap snapshot that off and then we're basically ready to go So we",
    "start": "1047039",
    "end": "1052080"
  },
  {
    "text": "have a ready to launch app I showed you this earlier This is our uh our base uh image and uh you can",
    "start": "1052080",
    "end": "1061280"
  },
  {
    "text": "do whatever you want to it You can uh change out your Java interpretation if you want You can do what my team does",
    "start": "1061280",
    "end": "1067919"
  },
  {
    "text": "and make it not Java at all Like I said before you can dive as deep into it as you want and configure that base image",
    "start": "1067919",
    "end": "1074480"
  },
  {
    "text": "to do exactly what you needed to do But we've made it simple so that if you don't want to do that as a developer or",
    "start": "1074480",
    "end": "1080880"
  },
  {
    "text": "you don't feel like you have the skills to do it you don't have to The minimum work for a developer is just checking in",
    "start": "1080880",
    "end": "1086240"
  },
  {
    "text": "code So let's flip back over here to the to the screen here and see how things are",
    "start": "1086240",
    "end": "1092720"
  },
  {
    "start": "1088000",
    "end": "1599000"
  },
  {
    "text": "going So it looks like uh this finished So we'll go back here And so",
    "start": "1092720",
    "end": "1099039"
  },
  {
    "text": "now you can see what we have is we have two uh autoscaling groups here We have the new one and we have the old one So",
    "start": "1099039",
    "end": "1105440"
  },
  {
    "text": "now all I have to do is go in here and disable the old one And luckily this is in test and I",
    "start": "1105440",
    "end": "1111039"
  },
  {
    "text": "happen to know what this one does and disabling it won't actually do anything So normally this is the point where you would be watching whatever logs you have",
    "start": "1111039",
    "end": "1118000"
  },
  {
    "text": "or whatever to know whether your system is doing the right thing In this particular case I don't have to but so",
    "start": "1118000",
    "end": "1124000"
  },
  {
    "text": "now you can see that uh this one here is disabled There's no traffic going to this machine All the traffic is now",
    "start": "1124000",
    "end": "1130480"
  },
  {
    "text": "going over here Uh my next step would be to delete the this cluster but I'm not going to do that because I do need to",
    "start": "1130480",
    "end": "1136880"
  },
  {
    "text": "make sure that there's no problems with that uh later on So this is the uh Jenkins confi uh or sorry the yeah the",
    "start": "1136880",
    "end": "1144000"
  },
  {
    "text": "Jenkins uh build job and so you can see here I can kick off you can the history",
    "start": "1144000",
    "end": "1150840"
  },
  {
    "text": "here excuse me uh and uh we can configure uh the project",
    "start": "1150840",
    "end": "1157880"
  },
  {
    "text": "here So this is the configuration",
    "start": "1157880",
    "end": "1163400"
  },
  {
    "text": "Uh down here we have uh the the details and uh if you're familiar with Jenkins",
    "start": "1163400",
    "end": "1170000"
  },
  {
    "text": "and this will all make a lot of sense to you and if you're not then it probably won't Uh but you can come up and ask me",
    "start": "1170000",
    "end": "1175840"
  },
  {
    "text": "about all of this later I just wanted to show it to you real quick So that's it That was the I've just launched uh",
    "start": "1175840",
    "end": "1181600"
  },
  {
    "text": "assuming I had built a new version of the code I just launched a new version of the code and that's all it took And to get that new version all I had to do",
    "start": "1181600",
    "end": "1188160"
  },
  {
    "text": "was check the code in uh Jenkins will automatically build So that's how we had the uh the build history there That's",
    "start": "1188160",
    "end": "1194320"
  },
  {
    "text": "pretty much every time someone checks in code it builds a new machine image with that code Uh you can configure Jenkins",
    "start": "1194320",
    "end": "1200000"
  },
  {
    "text": "to then bake an image or not Uh ours is autobaked So basically you check in your",
    "start": "1200000",
    "end": "1205520"
  },
  {
    "text": "code and you come back to it uh 10 minutes later and you can you're ready to launch it into test So I told you",
    "start": "1205520",
    "end": "1212880"
  },
  {
    "text": "earlier about the monkey theory We like to simulate things that go wrong Uh here's a list of the Simeon army The",
    "start": "1212880",
    "end": "1218559"
  },
  {
    "text": "yellow ones are ones that don't exist yet but we hope soon exist Uh we do uh",
    "start": "1218559",
    "end": "1223600"
  },
  {
    "text": "have the chaos monkey which you've probably heard of Kills random instances We do do this in production People ask",
    "start": "1223600",
    "end": "1229679"
  },
  {
    "text": "that all the time Yes it happens in production all the time killing real production instances Uh we also have the",
    "start": "1229679",
    "end": "1235360"
  },
  {
    "text": "chaos gorilla which kills an entire zone zone We also do that in production Uh",
    "start": "1235360",
    "end": "1240559"
  },
  {
    "text": "we're actually going to be do that doing that in a couple of weeks for the second time And so we do this to",
    "start": "1240559",
    "end": "1248080"
  },
  {
    "text": "make sure that we can handle region outages And this is what uh lets us handle region Yeah Had to go the first",
    "start": "1248080",
    "end": "1254880"
  },
  {
    "text": "time It actually went very well the first time Uh there was no noticeable impact to customers Uh which uh made us",
    "start": "1254880",
    "end": "1261360"
  },
  {
    "text": "really happy Uh but that test was a little contrived because it was the first one and we allowed some teams to",
    "start": "1261360",
    "end": "1267280"
  },
  {
    "text": "move early and things like that Uh so this time we're doing a more complete test where we're just shutting",
    "start": "1267280",
    "end": "1272640"
  },
  {
    "text": "everything down And oh if you want to hear more about the Simeon army there's also a",
    "start": "1272640",
    "end": "1278080"
  },
  {
    "text": "talk on that later today in the afternoon Uh so you can hear all about the Simeon army and everything all the",
    "start": "1278080",
    "end": "1284000"
  },
  {
    "text": "different Simeians Uh yeah So that one would basically be",
    "start": "1284000",
    "end": "1289679"
  },
  {
    "text": "the one that goes through and sort of it's the self-healing kind of thing where you find uh an instance that's",
    "start": "1289679",
    "end": "1296480"
  },
  {
    "text": "maybe needs a little you know needs something that that right now a developer would have to go in and run by",
    "start": "1296480",
    "end": "1302000"
  },
  {
    "text": "hand to fix something So uh making those into little modules scripts that can be",
    "start": "1302000",
    "end": "1307440"
  },
  {
    "text": "run so the doctor can detect what's broken and just fix it without the developer having to do so Sorry that you",
    "start": "1307440",
    "end": "1316679"
  },
  {
    "text": "Do I prefer to destroy uh bad instances instead of fix them yes Yes We tend to",
    "start": "1318240",
    "end": "1323760"
  },
  {
    "text": "just destroy bad instances instead of fixing uh the bad ones because we we always assume at first that it's a",
    "start": "1323760",
    "end": "1329520"
  },
  {
    "text": "hardware problem If it comes back then we'll start diving into it to see if it's a software problem",
    "start": "1329520",
    "end": "1336919"
  },
  {
    "text": "Uh so this is for um software problems not hardware problems Uh so that would be for",
    "start": "1337200",
    "end": "1343520"
  },
  {
    "text": "detected issues that require configuration software configuration So things that we've already identified",
    "start": "1343520",
    "end": "1349039"
  },
  {
    "text": "previously where we've written small scripts to fix them So after we so we have this",
    "start": "1349039",
    "end": "1356000"
  },
  {
    "text": "environment where everybody can deploy whenever they want to and they don't have to coordinate with anybody else So",
    "start": "1356000",
    "end": "1362880"
  },
  {
    "text": "how do we keep track of it all what do we do uh we have monitoring and alerting systems So this is our monitoring system",
    "start": "1362880",
    "end": "1369679"
  },
  {
    "text": "Atlas Uh this is a sample graph Those green bars represent when the system detected something bad happened which",
    "start": "1369679",
    "end": "1376240"
  },
  {
    "text": "you as a human can do very easily You can look at that graph and you know exactly where the bad things happened It's a lot harder for a computer to do",
    "start": "1376240",
    "end": "1382640"
  },
  {
    "text": "that but our system is that's basically what it does And so you can actually create alerts off of that This is an",
    "start": "1382640",
    "end": "1388720"
  },
  {
    "text": "alert config Uh I don't expect you to be able to read the whole thing but the important thing to notice in here is",
    "start": "1388720",
    "end": "1394480"
  },
  {
    "text": "essentially anything that you can make a graph of you can make an alert from So you can tell it every time one of those",
    "start": "1394480",
    "end": "1401039"
  },
  {
    "text": "green bars exists send an alert And then we have our uh you can even tune your alerts So",
    "start": "1401039",
    "end": "1407520"
  },
  {
    "text": "we have a whole system that uh lets you tune the alerts Uh the green and that top graph there the blue represents",
    "start": "1407520",
    "end": "1413280"
  },
  {
    "text": "actual and the green represents the band of the alert that you configured Uh the bottom one has changed that",
    "start": "1413280",
    "end": "1419360"
  },
  {
    "text": "representation to show you how far away from actual the band is And what that",
    "start": "1419360",
    "end": "1424480"
  },
  {
    "text": "does is it lets you tune the band to be as tight as possible for the normal curve of your graph so that your alerts",
    "start": "1424480",
    "end": "1431360"
  },
  {
    "text": "are the most accurate And so this is really powerful tool Lets you tune the alerts Uh then this is the alert system",
    "start": "1431360",
    "end": "1438960"
  },
  {
    "text": "Oh that font looks didn't work Oh well Uh you can see here uh on the left side",
    "start": "1438960",
    "end": "1444240"
  },
  {
    "text": "are the different tools that we use to create uh that are they're basically the metrics collectors Uh so we have uh our",
    "start": "1444240",
    "end": "1451120"
  },
  {
    "text": "alerting system which actually pushes things right into the alert gateway Uh we also have app dynamics which has an",
    "start": "1451120",
    "end": "1456799"
  },
  {
    "text": "API that we pull from look for things that are bad and then push those as alerts into the system Uh other teams",
    "start": "1456799",
    "end": "1462400"
  },
  {
    "text": "can write their own agents other services have their own APIs and it all gets collected into that central alert",
    "start": "1462400",
    "end": "1468840"
  },
  {
    "text": "gateway The alert gateway is then uh the place that makes decisions about is this",
    "start": "1468840",
    "end": "1474400"
  },
  {
    "text": "high severity low severity Uh if it's high severity we're going to page you If it's low we're going to send you an",
    "start": "1474400",
    "end": "1479520"
  },
  {
    "text": "email Uh it also is the place where we're going to add the functionality to say okay I got three minor alerts That's",
    "start": "1479520",
    "end": "1486000"
  },
  {
    "text": "bad Independently they're okay but the three together is a bad thing So I'm going to create a new highle",
    "start": "1486000",
    "end": "1492279"
  },
  {
    "text": "alert Uh this is another part of Asgard This is the task list That's another way",
    "start": "1492279",
    "end": "1498159"
  },
  {
    "text": "that people can know what's going on This is the list of all of the running tasks in the last couple of minutes Uh",
    "start": "1498159",
    "end": "1503279"
  },
  {
    "text": "we also have a much deeper history on those tasks They all got pushed into a system we call Kronos uh which not only",
    "start": "1503279",
    "end": "1509520"
  },
  {
    "text": "te gets all the tea uh tasks from Asgard but it also gets uh things updates of",
    "start": "1509520",
    "end": "1516000"
  },
  {
    "text": "changes throughout the system from everywhere Our ultimate goal is to have 100% coverage to have every team pushing",
    "start": "1516000",
    "end": "1522720"
  },
  {
    "text": "everything that changes in production into this system So we have a complete timeline However even if it's even",
    "start": "1522720",
    "end": "1529120"
  },
  {
    "text": "though it's not totally complete right now it's still super useful especially during outages uh we can go through uh",
    "start": "1529120",
    "end": "1534960"
  },
  {
    "text": "this system and say what changed at the exact minute that everything went to hell and you go and look and you say oh",
    "start": "1534960",
    "end": "1541840"
  },
  {
    "text": "this person changed this you call them up you say hey your change seem to have broken everything they can back it out",
    "start": "1541840",
    "end": "1547200"
  },
  {
    "text": "or tell you why it's important to keep moving forward but at least it gives us that tool to find out what's changing",
    "start": "1547200",
    "end": "1553480"
  },
  {
    "text": "when because that's what's really important when you have this continuous delivery that's divided amongst all",
    "start": "1553480",
    "end": "1558799"
  },
  {
    "text": "these different people is it's it's a way for developers to communicate each other through code",
    "start": "1558799",
    "end": "1564919"
  },
  {
    "text": "basically We also have a whole separate data collection pipeline Uh and there's",
    "start": "1564919",
    "end": "1570480"
  },
  {
    "text": "a talk on this one as well So you can uh hear that later on this afternoon But basically the collection comes in uh it",
    "start": "1570480",
    "end": "1577279"
  },
  {
    "text": "goes through map produce It goes to Anu uh which is open source and then uh it goes into",
    "start": "1577279",
    "end": "1583640"
  },
  {
    "text": "hive Uh so we do uh 63 billion messages a day through that infrastructure So you",
    "start": "1583640",
    "end": "1589600"
  },
  {
    "text": "can see this is the graph of how many messages are being sent through that logging pipeline Uh so now I want to just tell",
    "start": "1589600",
    "end": "1596799"
  },
  {
    "text": "you about some of our uh best practices Uh one of our best best practices is our incident reviews Uh we",
    "start": "1596799",
    "end": "1604640"
  },
  {
    "start": "1599000",
    "end": "1671000"
  },
  {
    "text": "use uh this very human element to keep things running smoothly We make sure",
    "start": "1604640",
    "end": "1609679"
  },
  {
    "text": "that our incident reviews are people actually like to attend them They're not for placing blame We make sure that",
    "start": "1609679",
    "end": "1615760"
  },
  {
    "text": "everyone knows we're not here to place blame We're here to find out what went wrong and figure out how we can do things better And I think that's the",
    "start": "1615760",
    "end": "1621760"
  },
  {
    "text": "most important part is that socialization of the fact that this is a good thing not a bad thing So people",
    "start": "1621760",
    "end": "1627360"
  },
  {
    "text": "actually want to come so they can get answers to these questions work with the other teams to figure out what went",
    "start": "1627360",
    "end": "1632679"
  },
  {
    "text": "wrong Uh we also have as I mentioned before some best practices for our data We keep uh everything in multiple",
    "start": "1632679",
    "end": "1639720"
  },
  {
    "text": "a divide uh we try to you know one copy in all three zones per region So if",
    "start": "1639720",
    "end": "1645600"
  },
  {
    "text": "we're keeping things in one region it'll be there If it's in two regions there's actually six copies Uh taking frequent",
    "start": "1645600",
    "end": "1651799"
  },
  {
    "text": "snapshots and no secret keys Uh some if you went to the security talk yesterday",
    "start": "1651799",
    "end": "1657600"
  },
  {
    "text": "you uh you'll know why that's really really important because that's the number one breach of security that",
    "start": "1657600",
    "end": "1663600"
  },
  {
    "text": "happens in Amazon is that lost credential and somebody messing with your Amazon stuff because they got your",
    "start": "1663600",
    "end": "1669760"
  },
  {
    "text": "master keys Uh we also use autoscaling I talked about this before So we do not",
    "start": "1669760",
    "end": "1675360"
  },
  {
    "start": "1671000",
    "end": "1707000"
  },
  {
    "text": "our main goal is not for saving money It happens to be a really nice side effect but uh the main goal is reliability We",
    "start": "1675360",
    "end": "1682320"
  },
  {
    "text": "use autoscaling to make sure that the uh every cluster is growing uh to meet its demands Uh you can see there the the",
    "start": "1682320",
    "end": "1690000"
  },
  {
    "text": "traffic peaks how the clusters have grown Uh you can see the deployment there that spike of this is a graph of",
    "start": "1690000",
    "end": "1696080"
  },
  {
    "text": "instance count Uh and that graph is when a deployment a major deployment was done So you can see that we're scaling",
    "start": "1696080",
    "end": "1701679"
  },
  {
    "text": "basically from uh you know an entire we're doubling essentially throughout the day Another tool that we use is uh this",
    "start": "1701679",
    "end": "1709760"
  },
  {
    "start": "1707000",
    "end": "1750000"
  },
  {
    "text": "usage tool and this actually helps us figure out if uh we're doing something",
    "start": "1709760",
    "end": "1715039"
  },
  {
    "text": "bad because if our usage suddenly goes way up then probably we've deployed some",
    "start": "1715039",
    "end": "1720640"
  },
  {
    "text": "code or done something that is affecting our usage and that's probably a bad thing operationally that we may not",
    "start": "1720640",
    "end": "1726880"
  },
  {
    "text": "notice any other way we're gonna notice it because we're suddenly using a lot more resources to do the same",
    "start": "1726880",
    "end": "1732520"
  },
  {
    "text": "work Uh we also go uh oh yeah question",
    "start": "1732520",
    "end": "1738399"
  },
  {
    "text": "I'm sorry I couldn't hear you Daily resolution uh the usage uh data is actually um I think less than that I",
    "start": "1738399",
    "end": "1744799"
  },
  {
    "text": "think it's hourly but this graph here is uh daily because it's compressed it's a couple months",
    "start": "1744799",
    "end": "1750200"
  },
  {
    "start": "1750000",
    "end": "1814000"
  },
  {
    "text": "there Uh we also do multiszone as I told you before we try to split everything across at least three zones Uh in test",
    "start": "1750200",
    "end": "1757360"
  },
  {
    "text": "we tend to use two zones just to uh you know save on costs Uh and then uh some of the",
    "start": "1757360",
    "end": "1763200"
  },
  {
    "text": "benefits of those zones is they're loosely connected They're basically phys different physical data centers So they have low latency between them and uh",
    "start": "1763200",
    "end": "1770480"
  },
  {
    "text": "regional uptime guarantee We also go uh multi-reion So",
    "start": "1770480",
    "end": "1775760"
  },
  {
    "text": "we run uh one set of infrastructure in US east and another in EU west to serve",
    "start": "1775760",
    "end": "1781440"
  },
  {
    "text": "our European customers which uh give them not only low latency but it gives us redundancy as well because if there's",
    "start": "1781440",
    "end": "1788640"
  },
  {
    "text": "a problem in US east we isolate it and so our European customers aren't affected and vice versa Uh we hope to",
    "start": "1788640",
    "end": "1795120"
  },
  {
    "text": "get to a point soon where we can actually if there's a problem in one region shift all the traffic over to the",
    "start": "1795120",
    "end": "1800159"
  },
  {
    "text": "other region so that customers can keep going We're not quite there yet And of course they just added a new region Uh",
    "start": "1800159",
    "end": "1807679"
  },
  {
    "text": "so we try to leverage multi-reion Oh yeah",
    "start": "1807679",
    "end": "1812600"
  },
  {
    "start": "1814000",
    "end": "1868000"
  },
  {
    "text": "Have we had any instances where we went down as a result of AWS issues uh yeah",
    "start": "1814559",
    "end": "1819760"
  },
  {
    "text": "there was the outage on um uh June 29th that uh took us out but that was mostly",
    "start": "1819760",
    "end": "1826080"
  },
  {
    "text": "our fault We had a software bug Uh we um there was another issue Let's see I mean",
    "start": "1826080",
    "end": "1834559"
  },
  {
    "text": "uh if you go you know what if you go to Adrian's talk he actually talks about the different outages and what their exact causes were the summary of it is",
    "start": "1834559",
    "end": "1842880"
  },
  {
    "text": "sometimes yes but it's usually our fault because we didn't plan properly we there",
    "start": "1842880",
    "end": "1847919"
  },
  {
    "text": "should be no case of Amazon outage that can completely take us out if there is that means that it's really our fault",
    "start": "1847919",
    "end": "1853840"
  },
  {
    "text": "because we didn't really plan that well is kind of our philosophy about that uh",
    "start": "1853840",
    "end": "1858880"
  },
  {
    "text": "so going multi-reion I like to say 100% uptime is theoretically possible But you would basically need infinite money to",
    "start": "1858880",
    "end": "1864480"
  },
  {
    "text": "do it So you know it's probably just theoretical Uh and then the last thing",
    "start": "1864480",
    "end": "1869679"
  },
  {
    "start": "1868000",
    "end": "1965000"
  },
  {
    "text": "that we use is what we call the circuit breakers Uh this is just open sourced uh Monday I think as hyster Uh what this",
    "start": "1869679",
    "end": "1876720"
  },
  {
    "text": "does this is sort of the key that allows us to have these loosely uh coupled APIs",
    "start": "1876720",
    "end": "1884000"
  },
  {
    "text": "So what this does is it monitors how well your downstream connections are performing and then it can cut off uh",
    "start": "1884000",
    "end": "1891440"
  },
  {
    "text": "requests to that downstream if it's appearing to be overloaded or running slowly or something like that Uh it it",
    "start": "1891440",
    "end": "1899519"
  },
  {
    "text": "helps so that one service can't destroy another one Uh it also helps so that you",
    "start": "1899519",
    "end": "1904640"
  },
  {
    "text": "as a service don't destroy your downstreams Uh and it also helps avoid thundering herd problems So uh the",
    "start": "1904640",
    "end": "1911279"
  },
  {
    "text": "Thundering Herd problem for those who don't know is when you have a service that goes down when it comes back up everybody's going to hit it at once",
    "start": "1911279",
    "end": "1917279"
  },
  {
    "text": "because they have these backed up requests that could take it down again And so you get this flapping up and down",
    "start": "1917279",
    "end": "1922799"
  },
  {
    "text": "for a while until everything settles out By using the circuit breakers we get to avoid that because each individual",
    "start": "1922799",
    "end": "1927919"
  },
  {
    "text": "instance has its own circuit breakers and does its own monitoring And so each one will back off at its own rate uh",
    "start": "1927919",
    "end": "1934880"
  },
  {
    "text": "depending on how successful it can be And so each instance when a service comes back will be successful at",
    "start": "1934880",
    "end": "1940480"
  },
  {
    "text": "different times and smooth out that thundering herd curve So this uh yeah is this like",
    "start": "1940480",
    "end": "1946720"
  },
  {
    "text": "throttling or it's yeah the question is is this like throttling yes it's kind of like throttling but each individual",
    "start": "1946720",
    "end": "1952960"
  },
  {
    "text": "instead of a global throttle it's every individual instance throttling itself so it doesn't hurt other things So it's",
    "start": "1952960",
    "end": "1959840"
  },
  {
    "text": "sort of flipped that model around Yeah is auto",
    "start": "1959840",
    "end": "1966240"
  },
  {
    "start": "1965000",
    "end": "2020000"
  },
  {
    "text": "If we have a thundering herd uh issue can we autoscale to avoid it sort of Uh",
    "start": "1966240",
    "end": "1971360"
  },
  {
    "text": "autoscaling still takes time You still have to wait for your instance to launch and boot and be ready to go Uh some",
    "start": "1971360",
    "end": "1977279"
  },
  {
    "text": "applications take 20 plus minutes to start up because they have to load a lot of data into their cache to begin So",
    "start": "1977279",
    "end": "1983600"
  },
  {
    "text": "autoscaling sort of helps with that problem but it doesn't solve the instantaneous problem",
    "start": "1983600",
    "end": "1990320"
  },
  {
    "text": "Uh so just a quick reminder again uh Netflix is uh a lot of it is open sourced Uh it's on our GitHub",
    "start": "1990320",
    "end": "1997559"
  },
  {
    "text": "github.com/netflix or netflix.github.com either one Uh also uh we are hiring So",
    "start": "1997559",
    "end": "2004000"
  },
  {
    "text": "if you're interested we have a booth in the uh uh the show floor over there So if you like what you hear Uh and also",
    "start": "2004000",
    "end": "2011279"
  },
  {
    "text": "we're definitely interested in your feedback Your feedback is what makes these talks better So please let us know And uh as I mentioned there's a couple",
    "start": "2011279",
    "end": "2017519"
  },
  {
    "text": "more Netflix talks today",
    "start": "2017519",
    "end": "2021039"
  }
]