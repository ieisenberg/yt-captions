[
  {
    "start": "0",
    "end": "202000"
  },
  {
    "text": "uh my name is Rob Alexander and uh welcome to my talk on VPC",
    "start": "440",
    "end": "6960"
  },
  {
    "text": "Design This is the fourth year that we've been doing this talk how many of you have seen this before been to this",
    "start": "10160",
    "end": "15799"
  },
  {
    "text": "one couple good thank you appreciate you coming back uh there is new stuff don't worry um but we always start with this",
    "start": "15799",
    "end": "23519"
  },
  {
    "text": "slide and that's because this talk is based upon uh practical design we see",
    "start": "23519",
    "end": "30640"
  },
  {
    "text": "working out in the wild in production workloads with our customers we kind of distill those down every year and find",
    "start": "30640",
    "end": "36800"
  },
  {
    "text": "kind of the best designs we see working uh where customers are doing interesting things with VPC and that's what this",
    "start": "36800",
    "end": "42680"
  },
  {
    "text": "talk is all about so do try these at home this is nothing theoretical here I",
    "start": "42680",
    "end": "48000"
  },
  {
    "text": "will also point out that uh I do read all your feedback and the overwhelming feedback last year was more designs uh",
    "start": "48000",
    "end": "57120"
  },
  {
    "text": "less screenshots of router configurations so you'll notice we uh we crank down the uh the the level from 400",
    "start": "57120",
    "end": "64600"
  },
  {
    "text": "to 300 uh that is directly due to less screenshots of router configurations so please uh give me",
    "start": "64600",
    "end": "72159"
  },
  {
    "text": "feedback again let me know if I got the porge right and we'll uh we'll correct for next year if I if I didn't get it",
    "start": "72159",
    "end": "77479"
  },
  {
    "text": "quite right so it's 300 level talk but I don't spend a lot of time talking about",
    "start": "77479",
    "end": "83200"
  },
  {
    "text": "uh the basics so if you don't know what a route table is in VPC you don't know the difference between a security group",
    "start": "83200",
    "end": "88640"
  },
  {
    "text": "and knle you don't know what Direct Connect is don't know what in their Gateway is or why you would want one um",
    "start": "88640",
    "end": "95280"
  },
  {
    "text": "there's a few talks for you that you might want to watch in advance so these two uh will give you a firm grounding uh",
    "start": "95280",
    "end": "101920"
  },
  {
    "text": "you can listen and uh hopefully get back and uh and catch up on the things that uh you might not have caught the first",
    "start": "101920",
    "end": "108000"
  },
  {
    "text": "time around so when I first started this talk",
    "start": "108000",
    "end": "114320"
  },
  {
    "text": "four years ago uh it was mostly about why you would even want one of these things uh customers were like why do I",
    "start": "114320",
    "end": "120840"
  },
  {
    "text": "want to go into vbc what is it good for that has quickly changed these are",
    "start": "120840",
    "end": "126920"
  },
  {
    "text": "more of my conversations today is how do I build something like this so we are going to get to that and that's what",
    "start": "126920",
    "end": "132680"
  },
  {
    "text": "this talk is about it's getting from one to this but first you have to start with",
    "start": "132680",
    "end": "139040"
  },
  {
    "text": "one so you know a VPC a virtual private cloud is your isolated container your",
    "start": "139040",
    "end": "145280"
  },
  {
    "text": "own private Network within AWS where you define all the networking that goes into",
    "start": "145280",
    "end": "150400"
  },
  {
    "text": "it and upon creation the one big decision you have to make is you have to choose what IP space to allocate it to",
    "start": "150400",
    "end": "156519"
  },
  {
    "text": "it a cider block to designate for all the resources that you're going to launch in that VPC so that cider's fixed",
    "start": "156519",
    "end": "163080"
  },
  {
    "text": "on VPC creation and you can't change it after after you uh designate it so the",
    "start": "163080",
    "end": "168280"
  },
  {
    "text": "biggest is sl16 all the way down to sl28 and I always recommend go big go as big",
    "start": "168280",
    "end": "174120"
  },
  {
    "text": "as you can uh if there is not a reason for you not to go to sl6 do SL 16 if you're worried",
    "start": "174120",
    "end": "182040"
  },
  {
    "text": "about wasting IP space don't I've never had a customer come back to me and say I",
    "start": "182040",
    "end": "187760"
  },
  {
    "text": "wish I would have made that VPC smaller the opposite however it happens way too",
    "start": "187760",
    "end": "195400"
  },
  {
    "text": "much so just a few guidelines on that IP space design so a few",
    "start": "197319",
    "end": "206680"
  },
  {
    "start": "202000",
    "end": "202000"
  },
  {
    "text": "recommendations clicker is not behaving so plan for expansion you know if you're",
    "start": "206680",
    "end": "211959"
  },
  {
    "text": "not going into uh if you're only going into one region think about other regions when you're thinking about your",
    "start": "211959",
    "end": "217080"
  },
  {
    "text": "space and make sure it's still going to make sense with other regions in play absolutely consider future connectivity",
    "start": "217080",
    "end": "223840"
  },
  {
    "text": "to your corporate networks other partner networks any kind of external connectivity you might be in have that",
    "start": "223840",
    "end": "230080"
  },
  {
    "text": "in mind when you're designing your IP space and make sure you're not overlapping that's just asking for headache down the road that you don't",
    "start": "230080",
    "end": "238239"
  },
  {
    "text": "need so the next thing after the space after the the VPC space is you got to you got to carve out some subnets so",
    "start": "238280",
    "end": "244760"
  },
  {
    "text": "subnets are availability Zone specific VPC is a region-wide construct subnets",
    "start": "244760",
    "end": "249799"
  },
  {
    "text": "are a specific make sure you distribute your IP space equally across all az's if",
    "start": "249799",
    "end": "256880"
  },
  {
    "text": "you're in a region that has three or more azs make sure you plan for that so even though you might only be going day",
    "start": "256880",
    "end": "262440"
  },
  {
    "text": "one into two azs save that equal distribution of Ip space for at least three azs I promise you in a year or two",
    "start": "262440",
    "end": "270080"
  },
  {
    "text": "you will want that space maybe even a few months depending on how you go you know each a has its own resource pool so",
    "start": "270080",
    "end": "278039"
  },
  {
    "text": "for example if you're in the spot Market that's a whole another Market over there that you're not taking advantage of in",
    "start": "278039",
    "end": "283639"
  },
  {
    "text": "that third a so plan for it so what about subnets how big how many should I",
    "start": "283639",
    "end": "291639"
  },
  {
    "text": "have well not this many and again this is not uncommon um",
    "start": "292880",
    "end": "300880"
  },
  {
    "text": "you know I I spent many years in in in Enterprise it and we used subnets as a",
    "start": "300880",
    "end": "306960"
  },
  {
    "text": "unit of deployment and a unit of isolation this is very common and uh the tools that you have available to you in",
    "start": "306960",
    "end": "313320"
  },
  {
    "text": "VPC are much richer and much more give you a lot more functionality than a",
    "start": "313320",
    "end": "318400"
  },
  {
    "text": "subnet so if you do this if you do one subnet for application and across Three",
    "start": "318400",
    "end": "324880"
  },
  {
    "text": "A's you are going to have at least one person with their full-time job of managing your IP space and it's just not",
    "start": "324880",
    "end": "332240"
  },
  {
    "start": "334000",
    "end": "334000"
  },
  {
    "text": "necessary so these are my recommendations for VPC subnet",
    "start": "334039",
    "end": "339319"
  },
  {
    "text": "design the first thing is that traditional switching limitations and the reason that you might have done that in your own data center don't apply here",
    "start": "339319",
    "end": "345680"
  },
  {
    "text": "there a virtual network uh there's no performance impact for having thousands and thousands and thousands of instances",
    "start": "345680",
    "end": "351639"
  },
  {
    "text": "in a single subnet uh there's no art broadcast domain you're not going to have any of those limitations in VPC so",
    "start": "351639",
    "end": "359680"
  },
  {
    "text": "I always advise consider large mixed use subnets don't use them as isolation",
    "start": "359680",
    "end": "365360"
  },
  {
    "text": "containers make sure you have a d very large diverse uh ability to pull from",
    "start": "365360",
    "end": "370400"
  },
  {
    "text": "IPS and you're not constraining one subnet because this is the subnet for app a and you run out of IPs over there",
    "start": "370400",
    "end": "377120"
  },
  {
    "text": "but you can't pull IPS from another subnet because that subnet is for uh application B it's just it's not",
    "start": "377120",
    "end": "383039"
  },
  {
    "text": "necessary in VPC use security groups instead to enforce isolation you know by",
    "start": "383039",
    "end": "388479"
  },
  {
    "text": "default you get to start with 500 security groups in a VPC that's much more robust ability to isolate things",
    "start": "388479",
    "end": "396319"
  },
  {
    "text": "than subnets and then tags for grouping resources you know tags can drive cost",
    "start": "396319",
    "end": "401720"
  },
  {
    "text": "allocation C they they can drive very fine grained permissions and controls through identity and access management",
    "start": "401720",
    "end": "408280"
  },
  {
    "text": "or IM IM you can't get that out of subnets so what do you use subnets for",
    "start": "408280",
    "end": "415280"
  },
  {
    "text": "you use subnets as containers for routing policy that's really really what my primary recommendation is think of",
    "start": "415280",
    "end": "422160"
  },
  {
    "text": "them as containers for routing policy and we'll talk about what that means and if you don't know what I mean",
    "start": "422160",
    "end": "427879"
  },
  {
    "start": "426000",
    "end": "426000"
  },
  {
    "text": "about when I say performance in thousands and thousands of instances in a single subnet and why that doesn't",
    "start": "427879",
    "end": "433479"
  },
  {
    "text": "matter with VPC please go watch this talk net 401 will give you a really good under the hood perspective of how VPC",
    "start": "433479",
    "end": "441039"
  },
  {
    "text": "really works so here's a good uh starter home",
    "start": "441039",
    "end": "448360"
  },
  {
    "text": "uh this will this will work for 80% of you for both starting and and a long way",
    "start": "448360",
    "end": "455800"
  },
  {
    "text": "into the future uh have many very large and complicated customers using a very similar uh subnet design in a in a",
    "start": "455800",
    "end": "462879"
  },
  {
    "text": "single uh VPC and those of you that uh you can see here sl22 give you a thousand in your",
    "start": "462879",
    "end": "469520"
  },
  {
    "text": "public a little over a thousand and the sl20 will give you a little over 4,000",
    "start": "469520",
    "end": "474879"
  },
  {
    "text": "that just this distribution means you have about 50,000 IPS to left over for future expansion so it's a good start",
    "start": "474879",
    "end": "481360"
  },
  {
    "text": "but we're actually going to start with three subnets per a because I do want to focus on that point about routing policy",
    "start": "481360",
    "end": "487680"
  },
  {
    "text": "so I'm G to have I have three different routing policies for this VPC so a",
    "start": "487680",
    "end": "494599"
  },
  {
    "text": "subnet dedicated to each one of those routing policies and we'll go through what that means so I took my advice and I put a",
    "start": "494599",
    "end": "501240"
  },
  {
    "text": "sl6 on this VPC the first routing policy well the",
    "start": "501240",
    "end": "506879"
  },
  {
    "text": "first is to point out that by default all the subnets in a VPC can talk to each other so it's a flat Network it's a",
    "start": "506879",
    "end": "513518"
  },
  {
    "text": "star there's like a virtual router that is represented in each subnet by this1 address which is handed out by the VPC",
    "start": "513519",
    "end": "520760"
  },
  {
    "text": "DHCP server uh and that every route table by default will have this local route that facilitates that routing",
    "start": "520760",
    "end": "527160"
  },
  {
    "text": "within the subnets uh that that route is uh put there by default and it's it's you cannot uh manipulate",
    "start": "527160",
    "end": "535120"
  },
  {
    "text": "it so the first of my Subnet policies is I'm G to have a public subnet so",
    "start": "536480",
    "end": "541880"
  },
  {
    "text": "anything I deploy in this public subnet is automatically going to get a public IP I'm going to create an internet",
    "start": "541880",
    "end": "548160"
  },
  {
    "text": "gateway an igw this is a a logical construct that allows and facilitates",
    "start": "548160",
    "end": "553959"
  },
  {
    "text": "the egress and Ingress of traffic into the VPC so just attaching the igw doesn't mean that automatically you've",
    "start": "553959",
    "end": "560519"
  },
  {
    "text": "you know opened up your VPC to public traffic it just gives the uh facilitation of that what you also have",
    "start": "560519",
    "end": "566560"
  },
  {
    "text": "to do is provide a route to the igw which you see there so your default route now is pointing to the",
    "start": "566560",
    "end": "573000"
  },
  {
    "text": "igw and with that and public IPS instances in that uh subnet can now",
    "start": "573240",
    "end": "578720"
  },
  {
    "text": "egress out the internet gateway and out to public networks and depending upon their uh Security Group and network AAL",
    "start": "578720",
    "end": "585720"
  },
  {
    "text": "configuration they can also be be reached from the",
    "start": "585720",
    "end": "590399"
  },
  {
    "text": "outside now my routing policy for my bottom subnet is very",
    "start": "591320",
    "end": "596760"
  },
  {
    "text": "different I want that bottom subnet to only be private IPS no public IPS and",
    "start": "596760",
    "end": "602279"
  },
  {
    "text": "and no routes to public networks so it's going to be tied into my corporate Network later so I'm going to create a",
    "start": "602279",
    "end": "608279"
  },
  {
    "text": "virtual uh private Gateway a vgw you see represented there at the bottom and",
    "start": "608279",
    "end": "613360"
  },
  {
    "text": "that's going to be a termination Point later for things like uh VPN tunnels or direct connect",
    "start": "613360",
    "end": "619079"
  },
  {
    "text": "connections and so you see there I have uh added a route for my corporate cider block that represents my corporate",
    "start": "619079",
    "end": "624760"
  },
  {
    "text": "Network and that is directed towards this virtual private Gateway so everything private is now directed there",
    "start": "624760",
    "end": "630839"
  },
  {
    "text": "to reach those external networks and then my third routing Pro uh routing",
    "start": "630839",
    "end": "636120"
  },
  {
    "text": "policy is the Subnet in the middle which is kind of a hybrid so it's also a private subnet so everything in there",
    "start": "636120",
    "end": "641680"
  },
  {
    "text": "has private IPS but we also want to facilitate those instances and resources",
    "start": "641680",
    "end": "647160"
  },
  {
    "text": "in the subnets to be able to reach public networks so how do you do",
    "start": "647160",
    "end": "652880"
  },
  {
    "text": "that well the first question is why would you do that why would you want that why would you want private",
    "start": "652880",
    "end": "657920"
  },
  {
    "text": "resources to reach outside side and and there's a lot of reasons and some of them might not be as obvious as others",
    "start": "657920",
    "end": "663880"
  },
  {
    "text": "the first one is AWS API end points so if you're making any API calls from instances in the subnets whether that's",
    "start": "663880",
    "end": "670959"
  },
  {
    "text": "you know autoscaling calls or moving Enis or trying to reach uh AWS Public",
    "start": "670959",
    "end": "676240"
  },
  {
    "text": "Services like S3 or Kinesis",
    "start": "676240",
    "end": "681440"
  },
  {
    "text": "Lambda SNS those are all public Regional resources that exist on the public",
    "start": "681440",
    "end": "687959"
  },
  {
    "text": "network so you have to be able to get out of the VPC to be able to talk to those endpoints and same with thirdparty Services any any software platforms or",
    "start": "687959",
    "end": "695639"
  },
  {
    "text": "pass or SAS platforms that you might use obviously exist outside your",
    "start": "695639",
    "end": "700920"
  },
  {
    "text": "VPC so the traditional way to do this is to deploy a natat instance so this is a",
    "start": "700920",
    "end": "706120"
  },
  {
    "text": "ec2 instance that it's providing Network address translation so it has a public I",
    "start": "706120",
    "end": "711360"
  },
  {
    "text": "IP and fronts those instances that are only private IPS",
    "start": "711360",
    "end": "716720"
  },
  {
    "text": "translates and allows them to egress out out and you facilitate that in the routing table by pointing your route to",
    "start": "716720",
    "end": "723240"
  },
  {
    "text": "the actual natat instance itself the instance itself to be able to get",
    "start": "723240",
    "end": "729000"
  },
  {
    "text": "out the problem with that is is scaling is that you know as your traffic",
    "start": "732480",
    "end": "737800"
  },
  {
    "text": "increases and your requirements to get out through this natat instance it's a single point of failure it has a",
    "start": "737800",
    "end": "743720"
  },
  {
    "text": "dedicated amount of bandwidth so uh it's it's not scaling it's a single e to2 and",
    "start": "743720",
    "end": "749199"
  },
  {
    "text": "eventually you're going to you're going to burn the thing up so how do we do scalable and available",
    "start": "749199",
    "end": "756360"
  },
  {
    "text": "net so this is a first set of requirements we're going to go through a number of these requirements as we go",
    "start": "756360",
    "end": "761519"
  },
  {
    "text": "through our different designs so this is the first one we public subnets uh for resources uh are reachable from the",
    "start": "761519",
    "end": "767519"
  },
  {
    "text": "internet we have private subnets with egress only access to public networks we want scalable available Nat and for now",
    "start": "767519",
    "end": "774600"
  },
  {
    "text": "we're dealing with just one adabs account one region and uh one",
    "start": "774600",
    "end": "780839"
  },
  {
    "text": "bpc so back to the natat on fire um you know we used to have all these",
    "start": "781360",
    "end": "786800"
  },
  {
    "text": "complicated ways to uh deploy multiple net instances adjust route tables to go",
    "start": "786800",
    "end": "792199"
  },
  {
    "text": "between them and and facilitate some kind of uh High availability with ec2 based net",
    "start": "792199",
    "end": "799079"
  },
  {
    "text": "instances fortunately uh late last year we launched The Knack Gateway which is",
    "start": "799120",
    "end": "804959"
  },
  {
    "text": "uh pretty much from an object's perspective a dropin replacement for the for the N uh instance uh you point your",
    "start": "804959",
    "end": "812519"
  },
  {
    "text": "routes to it the same it takes an EIP elastic IP a public IP address so from",
    "start": "812519",
    "end": "818560"
  },
  {
    "text": "uh you know the design perspective it looks like an ad instance but underneath the hood there's a lot more going on",
    "start": "818560",
    "end": "825839"
  },
  {
    "text": "here that makes the N Gateway special I'd like to just point out a few things so why why would you use a Nat Gateway",
    "start": "825839",
    "end": "832240"
  },
  {
    "start": "830000",
    "end": "830000"
  },
  {
    "text": "over a Nat instance um you know most of us know how not works uh private comes",
    "start": "832240",
    "end": "838880"
  },
  {
    "text": "in with a source IP import the that instance Source NS that so it replaces that Source IP with its own public IP",
    "start": "838880",
    "end": "846720"
  },
  {
    "text": "that's all well and good the tricky part is that Source uh Port because that has to be unique when you're talking to",
    "start": "846720",
    "end": "855360"
  },
  {
    "text": "networks out so if you have for example",
    "start": "855360",
    "end": "860720"
  },
  {
    "text": "lots of instances going out and trying to get a security update that has the same endpoint out there the same",
    "start": "860720",
    "end": "867040"
  },
  {
    "text": "destination port and IP address your Source Port has to be unique it has to",
    "start": "867040",
    "end": "872759"
  },
  {
    "text": "be unique connection for every single one so as you have more and more and more connections going out to the same",
    "start": "872759",
    "end": "879240"
  },
  {
    "text": "destinations every time you're opening a new connection on the N instance it's having to check its",
    "start": "879240",
    "end": "885680"
  },
  {
    "text": "table choose a new unique Source port and in a very Atomic and transactional Way open that connection and make sure",
    "start": "885680",
    "end": "892480"
  },
  {
    "text": "that that Source Port is unique um you know this is you know quite a Sim",
    "start": "892480",
    "end": "899360"
  },
  {
    "text": "a similar problem with a database um but databases work in milliseconds this needs to work in",
    "start": "899360",
    "end": "906120"
  },
  {
    "text": "microseconds so the traditional uh you know scaling for that instance has been",
    "start": "906120",
    "end": "912120"
  },
  {
    "text": "to vertically scale it keep everything in memory keep it fast keep everything in",
    "start": "912120",
    "end": "917560"
  },
  {
    "text": "microseconds uh but horizontal scaling of of n instances has been very",
    "start": "917560",
    "end": "922920"
  },
  {
    "text": "difficult and so that's where n Gateway comes in we applied some very Innovative engineering to to address this problem",
    "start": "922920",
    "end": "930680"
  },
  {
    "text": "of horizontal scale for natat so natat Gateway is a fully horizontally scale uh",
    "start": "930680",
    "end": "936839"
  },
  {
    "text": "has full replication of connection State and uh is highly available",
    "start": "936839",
    "end": "943720"
  },
  {
    "text": "so so there we are we drop in the that Gateway and there are a few requirements",
    "start": "948199",
    "end": "954240"
  },
  {
    "text": "it's not like an igw or vgw where it's a a VPC wide service you deploy a that Gateway in a specific availability Zone",
    "start": "954240",
    "end": "962440"
  },
  {
    "text": "it's highly available and fault tolerant for that availability zone so you still need that internet gateway you still",
    "start": "962440",
    "end": "969519"
  },
  {
    "text": "need separate subnets to be able to define the routing policy to use that net Gateway it requires an elastic IP",
    "start": "969519",
    "end": "976279"
  },
  {
    "text": "assigned to it so it has a public address and it's uh each each neet",
    "start": "976279",
    "end": "981560"
  },
  {
    "text": "Gateway is burstable to 10 gig of of bandwidth",
    "start": "981560",
    "end": "986759"
  },
  {
    "text": "today so it actually appears as a elastic network interface in your subnet",
    "start": "987519",
    "end": "992560"
  },
  {
    "text": "when you create this net Gateway but you'll notice there's no security group assigned to it it's because you can",
    "start": "992560",
    "end": "998440"
  },
  {
    "text": "assign a security group to net Gateway so how do you secure access if you want to be very restrictive about who can",
    "start": "998440",
    "end": "1003759"
  },
  {
    "text": "actually use the net Gateway how would you do that so the first thing is Network acles they still apply so if",
    "start": "1003759",
    "end": "1010360"
  },
  {
    "text": "you're doing some coar grain control and the subnet access itself those will still apply to get to the net Gateway",
    "start": "1010360",
    "end": "1018079"
  },
  {
    "text": "the second thing is is what I've been harping on is use routing policy so have subnets like we have that are that have",
    "start": "1018079",
    "end": "1025640"
  },
  {
    "text": "a route table signed to them that allows them to use the N Gateway versus Sub",
    "start": "1025640",
    "end": "1030760"
  },
  {
    "text": "Nets that don't and the third one is really the key one so uh use security groups to",
    "start": "1030760",
    "end": "1038199"
  },
  {
    "text": "restrict outbound so I find most customers don't ever mess with their outbound rules on their security groups",
    "start": "1038199",
    "end": "1045079"
  },
  {
    "text": "and by default if you create a new Security Group your outbound is open to all traffic so you see there you know",
    "start": "1045079",
    "end": "1052000"
  },
  {
    "text": "destination for everything Port range for everything that's the default VPC Security Group so what I recommend",
    "start": "1052000",
    "end": "1058280"
  },
  {
    "text": "is having dedicated so your default change it make it only rfc1918 space make it only the",
    "start": "1058280",
    "end": "1066679"
  },
  {
    "text": "space within your VPC you know if if you're doing a lot of uh of other network connectivity other networks and",
    "start": "1066679",
    "end": "1072880"
  },
  {
    "text": "stuff this might look a little different but the default here is I put my outbound only to my VP VPC CER it only",
    "start": "1072880",
    "end": "1080039"
  },
  {
    "text": "so they can only talk to stuff in the VPC and then I create a separate Nat enable VPC security group that then",
    "start": "1080039",
    "end": "1087159"
  },
  {
    "text": "enables them to go anywhere so that gives uh the default now is much more locked",
    "start": "1087159",
    "end": "1095000"
  },
  {
    "text": "down so you can do this you can have one Knack Gateway and multiple azs uh using",
    "start": "1096120",
    "end": "1101679"
  },
  {
    "text": "that that Gateway but as I said before it's an it's an AZ specific uh",
    "start": "1101679",
    "end": "1107400"
  },
  {
    "text": "deployment so for real availability if that something ever happened in that a you would have lost all possible that",
    "start": "1107400",
    "end": "1114600"
  },
  {
    "text": "functionality in your VPC so we always recommend to deploy One n Gateway per",
    "start": "1114600",
    "end": "1121720"
  },
  {
    "text": "ay o sorry you'll get the slides later",
    "start": "1121720",
    "end": "1127000"
  },
  {
    "start": "1123000",
    "end": "1123000"
  },
  {
    "text": "too fast to take the picture uh so pros and cons of an that Gateway so Pros a dropin replacement",
    "start": "1127000",
    "end": "1133600"
  },
  {
    "text": "from that Gateway I mean for that instance is it's very easy to migrate you just update right route table you",
    "start": "1133600",
    "end": "1139840"
  },
  {
    "text": "can even migrate the EIP over if you want to be consistent the only caveat is that obviously you're going to lose any",
    "start": "1139840",
    "end": "1145480"
  },
  {
    "text": "open connections that are that are open at the time that you do the cut over it's fully managed it's highly available",
    "start": "1145480",
    "end": "1151799"
  },
  {
    "text": "and fault tolerant scalable at 10 gig and it supports VPC flow log so you can",
    "start": "1151799",
    "end": "1157480"
  },
  {
    "text": "monitor and track all all of the network traffic that's going through the Gateway",
    "start": "1157480",
    "end": "1163240"
  },
  {
    "text": "on the con side uh there's no higher level functions it just does natat so",
    "start": "1163240",
    "end": "1168480"
  },
  {
    "text": "those of you that are pulling that instances that are doing things like IPS or UTM or any kind of URL filtering or",
    "start": "1168480",
    "end": "1174480"
  },
  {
    "text": "packet inspection you know more the high level security functions that's not the KN n Gateway so you know we have lots of",
    "start": "1174480",
    "end": "1180679"
  },
  {
    "text": "partners that offer those uh features in their natat instances along with providing that so whether that's you",
    "start": "1180679",
    "end": "1186600"
  },
  {
    "text": "know our sofos or foret or you know we have all a whole range of partners that",
    "start": "1186600",
    "end": "1192039"
  },
  {
    "text": "provide uh security appliances that do these high level functions and as I mentioned you can't uh associate",
    "start": "1192039",
    "end": "1197480"
  },
  {
    "text": "Security Group so here we are we got we have our one",
    "start": "1197480",
    "end": "1203080"
  },
  {
    "text": "bpc and now we're moving on to our next one where we have an internal only corporate It app uh that we want to",
    "start": "1203080",
    "end": "1209559"
  },
  {
    "text": "connect to our internal corporate network over uh IPC",
    "start": "1209559",
    "end": "1214760"
  },
  {
    "text": "tunnels so what are what are the considerations when we're talking about multiple V vpcs when you start moving",
    "start": "1214760",
    "end": "1220080"
  },
  {
    "text": "into one two three 10 100 vpcs what should you be thinking about and why",
    "start": "1220080",
    "end": "1225799"
  },
  {
    "text": "would you want to do that and why not one big VPC and um my first question back to you",
    "start": "1225799",
    "end": "1234159"
  },
  {
    "text": "whenever I'm ask that from a customer is well why not one adabs account because those two go hand inand um as soon as",
    "start": "1234159",
    "end": "1241039"
  },
  {
    "text": "you have more than one account you have more than one VPC so there are a few things that go with",
    "start": "1241039",
    "end": "1248280"
  },
  {
    "text": "both having multiple accounts and multiple and and multiple vpcs and the first one is blast radius so if you have",
    "start": "1248280",
    "end": "1253960"
  },
  {
    "text": "one VPC and you have thousands of developers uh um somebody's going to",
    "start": "1253960",
    "end": "1259320"
  },
  {
    "text": "step on each other's toes you know IM am allows you to give very fine grained",
    "start": "1259320",
    "end": "1264480"
  },
  {
    "text": "resource control over who can do what in your VPC but you cannot IIM API limits",
    "start": "1264480",
    "end": "1270799"
  },
  {
    "text": "right so if for example you have one misbehaving app that Browns out your",
    "start": "1270799",
    "end": "1276919"
  },
  {
    "text": "throttling limits on ec2 describe calls um that affects everyone else so there",
    "start": "1276919",
    "end": "1282279"
  },
  {
    "text": "is a certain level of blast radius that you must consider uh when you're putting resources in a VPC",
    "start": "1282279",
    "end": "1290039"
  },
  {
    "text": "oh this thing is gonna drive me crazy here's another very good reason to",
    "start": "1293720",
    "end": "1299279"
  },
  {
    "text": "have both multiple accounts and multiple vpcs it's probably the best reason out",
    "start": "1299279",
    "end": "1306440"
  },
  {
    "text": "there if you're not doing that come talk to me same with this one you know",
    "start": "1307039",
    "end": "1312760"
  },
  {
    "text": "Regulatory and compliance reasons keep them a separate account separate resources",
    "start": "1312760",
    "end": "1320039"
  },
  {
    "text": "this is also another very common one so With Disaster Recovery separate region and separate account so you have all of",
    "start": "1321000",
    "end": "1328200"
  },
  {
    "text": "your data replicated to a different uh a different region for disaster recovery",
    "start": "1328200",
    "end": "1333679"
  },
  {
    "text": "and in case there's some kind of compromise in your account in your production that compromise cannot affect",
    "start": "1333679",
    "end": "1339919"
  },
  {
    "text": "your Disaster Recovery because it's all in a separate account separate VPC completely",
    "start": "1339919",
    "end": "1345840"
  },
  {
    "text": "isolated and then we do things a little fancier to illustrate you know where where we go with more vpcs and",
    "start": "1345840",
    "end": "1354640"
  },
  {
    "text": "more accounts so here we have uh you know an account and VPC per business",
    "start": "1354640",
    "end": "1362600"
  },
  {
    "text": "unit and we're sending all the application logs S3 access logs elb logs",
    "start": "1362679",
    "end": "1368200"
  },
  {
    "text": "out of these accounts and these vpcs from these business units you know they're able to manage their own bottom",
    "start": "1368200",
    "end": "1374679"
  },
  {
    "text": "line have cost visibility and get their own bill because they have their own own account but we're sending all of their",
    "start": "1374679",
    "end": "1381960"
  },
  {
    "text": "you know digital exhaust to a separate account you know things like AWS config",
    "start": "1381960",
    "end": "1387720"
  },
  {
    "text": "also to track all the changes within their vpcs so if somebody changes a security group or changes an internet",
    "start": "1387720",
    "end": "1393039"
  },
  {
    "text": "gateway Alters a route table you're going to know about it cloud trail to monitor all of their API calls is the",
    "start": "1393039",
    "end": "1399000"
  },
  {
    "text": "audit log of all their API calls and then VPC flow logs again so that you know all the traffic that's going in and",
    "start": "1399000",
    "end": "1404520"
  },
  {
    "text": "out of their vpcs all this stuff is going to another account and another VPC",
    "start": "1404520",
    "end": "1409960"
  },
  {
    "text": "dedicated to logging to auditing and Analysis of this data so we might have EMR in there during uh you know map",
    "start": "1409960",
    "end": "1417080"
  },
  {
    "text": "reduce jobs to reduce this data might have Amazon red shift doing you know data warehousing of this data for for",
    "start": "1417080",
    "end": "1423720"
  },
  {
    "text": "quering and analytics and then of course S3 has the as the storage back",
    "start": "1423720",
    "end": "1431240"
  },
  {
    "text": "end so now we've gone through some of the reasons why that you would consider multiple vpcs let's let's dive back into",
    "start": "1431559",
    "end": "1438240"
  },
  {
    "text": "our private app so this is the one we showed before where we have uh only a private connection to corporate network",
    "start": "1438240",
    "end": "1446039"
  },
  {
    "text": "over an IPC tunnel but the application in there",
    "start": "1446039",
    "end": "1451240"
  },
  {
    "text": "wants to make heavy use of S3 is a primary data store so how do we",
    "start": "1451240",
    "end": "1456600"
  },
  {
    "text": "facilitate in a private only VPC access to a public resource",
    "start": "1456600",
    "end": "1463400"
  },
  {
    "text": "like S3 so our next round is design requirements so VPN connectivity to",
    "start": "1463400",
    "end": "1469880"
  },
  {
    "text": "private only VPC no egress in the VPC to public networks so no public IPS",
    "start": "1469880",
    "end": "1475559"
  },
  {
    "text": "whatsoever private IP access that Amazon S3 uh very content specific uh egress",
    "start": "1475559",
    "end": "1481840"
  },
  {
    "text": "control access control so we control exactly what goes out of the VPC be able to filter it and one AWS account one VPC",
    "start": "1481840",
    "end": "1489279"
  },
  {
    "text": "one region still so by default if you didn't do anything else this is the the route that",
    "start": "1489279",
    "end": "1494399"
  },
  {
    "text": "you would take to facilitate that connectivity you know you have to go down down in your data center all the way out your data Center's public border",
    "start": "1494399",
    "end": "1500720"
  },
  {
    "text": "back around to the region and that's obviously it's not an ideal way to go um",
    "start": "1500720",
    "end": "1506440"
  },
  {
    "text": "fortunately we have VPC endpoints which",
    "start": "1506440",
    "end": "1511840"
  },
  {
    "text": "are there we go uh to meet exactly this requirement to provide private IP connectivity to",
    "start": "1512159",
    "end": "1519120"
  },
  {
    "text": "AWS services in this case S3 so VPC endpoints there's no internet",
    "start": "1519120",
    "end": "1524559"
  },
  {
    "text": "gateway required there's no natat you're not using public IPS it's free and you have very robust",
    "start": "1524559",
    "end": "1530320"
  },
  {
    "text": "access control and it's private IP connectivity to",
    "start": "1530320",
    "end": "1535080"
  },
  {
    "start": "1535000",
    "end": "1535000"
  },
  {
    "text": "S3 so here's a example of creating a s3m point and assigning it to a subnet so",
    "start": "1535360",
    "end": "1540679"
  },
  {
    "text": "this is the CLI you'll notice you actually tell it what route table you",
    "start": "1540679",
    "end": "1546799"
  },
  {
    "text": "want so there we are and it creates the route for you so you see the destination",
    "start": "1547880",
    "end": "1553240"
  },
  {
    "text": "is a prefix list and the target is the endpoint itself and we'll we'll talk a little bit in a minute about what a",
    "start": "1553240",
    "end": "1559200"
  },
  {
    "text": "prefix list is and to give an example here's here's a a subnet that does have an internet",
    "start": "1559200",
    "end": "1565360"
  },
  {
    "text": "gateway what would happen if you created and assigned a VPC end point to this one",
    "start": "1565360",
    "end": "1570480"
  },
  {
    "text": "here you have your default route is the in Gateway but you're still using the prefix list for S3 for the service to",
    "start": "1570480",
    "end": "1577000"
  },
  {
    "text": "access S3 that's obviously a more specific route for S3 so that's going to be used over the internet gateway for S3",
    "start": "1577000",
    "end": "1584360"
  },
  {
    "text": "in that region if you accessed S3 in another region uh that endpoint is only for this region in this case Us West 2",
    "start": "1584360",
    "end": "1591679"
  },
  {
    "text": "uh so you would use the internet gateway to go to another region to access S3 and what if you had uh a knack",
    "start": "1591679",
    "end": "1598600"
  },
  {
    "text": "Gateway so uh if you already had a default route out of The Knack Gateway it's actually really important that you",
    "start": "1598600",
    "end": "1604559"
  },
  {
    "text": "that you also add the VPC endpoint to that private subnet because otherwise",
    "start": "1604559",
    "end": "1610000"
  },
  {
    "text": "you're funneling all of your S3 traffic through the Knack Gateway and if you know the Knack Gateway it's charged on",
    "start": "1610000",
    "end": "1616279"
  },
  {
    "text": "you know the data transfer rates through that that Gateway so uh the vpcm point is not it's private IP so uh it's a it's",
    "start": "1616279",
    "end": "1623120"
  },
  {
    "text": "a cost decision there to to add a VPC inpoint to subnets that are using natat",
    "start": "1623120",
    "end": "1628960"
  },
  {
    "text": "to get out of the out of the out of the VPC so prefix lists are uh an",
    "start": "1628960",
    "end": "1634640"
  },
  {
    "text": "abstraction so they basically represent the entire public IP space of S3 in the",
    "start": "1634640",
    "end": "1640240"
  },
  {
    "text": "region and so all you need to do is reference the prefix list and it will figure out what the actual backend IPS",
    "start": "1640240",
    "end": "1646559"
  },
  {
    "text": "and this solved know a lot of headaches that customers had before in trying to keep track of what actually uh consisted",
    "start": "1646559",
    "end": "1653840"
  },
  {
    "text": "of S3 IP space so obviously those those ranges change all the time in the back",
    "start": "1653840",
    "end": "1659480"
  },
  {
    "text": "end but all you have to do is reference the prefix list and you can use them in your",
    "start": "1659480",
    "end": "1665080"
  },
  {
    "text": "outbound Security Group rules so similarly to how I advised with the KN Gateway you can do the same thing to",
    "start": "1665080",
    "end": "1670519"
  },
  {
    "text": "restrict access to the vpcm point so you can say uh only certain instances in the",
    "start": "1670519",
    "end": "1676240"
  },
  {
    "text": "subnet even though the subnet itself s has a route to the vpcm point you can apply a security group to instances to",
    "start": "1676240",
    "end": "1682320"
  },
  {
    "text": "restrict them uh outbound to be able to use the vpcm point by referencing the",
    "start": "1682320",
    "end": "1687760"
  },
  {
    "text": "prefix list and here's the fine grain access control I mentioned so there's multiple",
    "start": "1687760",
    "end": "1694279"
  },
  {
    "start": "1689000",
    "end": "1689000"
  },
  {
    "text": "stages you can be able to to apply policies to control egress out of your",
    "start": "1694279",
    "end": "1699799"
  },
  {
    "text": "VPC so the first one is I can apply an i IM policy to the vpcm point itself that",
    "start": "1699799",
    "end": "1705679"
  },
  {
    "text": "says uh it can be detailed as users and groups amount of content specific",
    "start": "1705679",
    "end": "1711559"
  },
  {
    "text": "objects in this case I've gone pretty generic which is a specific bucket so you can only use this VPC endpoint to go",
    "start": "1711559",
    "end": "1718080"
  },
  {
    "text": "out to specific bucket so I apply it to the endpoint and it's only for get and put",
    "start": "1718080",
    "end": "1726200"
  },
  {
    "text": "and so uh instances that have that are in that uh route that have the route to",
    "start": "1726200",
    "end": "1732000"
  },
  {
    "text": "the VPC in point are allowed to get out if they are going to that bucket",
    "start": "1732000",
    "end": "1739398"
  },
  {
    "text": "so that's on the endpoint itself but I can also apply a policy on the bucket so you have it on both ends now the bucket",
    "start": "1739960",
    "end": "1746880"
  },
  {
    "text": "can say only specific vpcm points or only specific vpcs can talk to",
    "start": "1746880",
    "end": "1753600"
  },
  {
    "text": "me so here we check and make sure that it's coming from a very specific vpcm point and if it is then you're allowed",
    "start": "1754760",
    "end": "1761960"
  },
  {
    "text": "access to the bucket so multiple stages of Access Control",
    "start": "1761960",
    "end": "1768519"
  },
  {
    "text": "so just to recap real quick so you have the route table that gives the subnet the resources in the subnet itself again",
    "start": "1768519",
    "end": "1774279"
  },
  {
    "text": "subnet defines routing policy gives access to the vpcm point",
    "start": "1774279",
    "end": "1779919"
  },
  {
    "text": "the second is the policy on the endpoint itself that says what you can what can go out of this VPC through this inpoint",
    "start": "1779919",
    "end": "1785600"
  },
  {
    "text": "to access what resources in S3 the third thing is the bucket policy itself which says who can access this and then the",
    "start": "1785600",
    "end": "1792600"
  },
  {
    "text": "fourth is the security groups so multiple stages",
    "start": "1792600",
    "end": "1799279"
  },
  {
    "start": "1797000",
    "end": "1797000"
  },
  {
    "text": "so we'll just give a little endpoints in action here so we create a backups bucket for all these internet apps so",
    "start": "1799279",
    "end": "1805120"
  },
  {
    "text": "that they can push those up to S3 but we have a compliance application which has more fine grain requirements",
    "start": "1805120",
    "end": "1811960"
  },
  {
    "text": "around what can go out and so we create a separate endpoint for them so you can",
    "start": "1811960",
    "end": "1817519"
  },
  {
    "text": "create multiple endpoints uh and have different policies on these endpoints on a on a VPC the Restriction is that you",
    "start": "1817519",
    "end": "1826159"
  },
  {
    "text": "can only have in a route table one route to uh S3 so that prefix L you can't have",
    "start": "1826159",
    "end": "1833200"
  },
  {
    "text": "multiple ones so for example uh if I wanted to add more buckets I wouldn't be",
    "start": "1833200",
    "end": "1840120"
  },
  {
    "text": "creating new endpoints for these subnets because they already have a route to an endpoint so instead I would have to",
    "start": "1840120",
    "end": "1846440"
  },
  {
    "text": "alter the policy itself to allow access to these additional",
    "start": "1846440",
    "end": "1852360"
  },
  {
    "text": "buckets so pros and cons of of the endpoints so secure highly scalable",
    "start": "1852440",
    "end": "1858039"
  },
  {
    "start": "1853000",
    "end": "1853000"
  },
  {
    "text": "highly available access to S3 you don't have to worry about scaling it or bandwidth fine gain control of",
    "start": "1858039",
    "end": "1865880"
  },
  {
    "text": "access to the content in S3 from the VPC you can control which vpcs which endpoints can access which buckets and",
    "start": "1865880",
    "end": "1873240"
  },
  {
    "text": "there's no public IPS required it's all all Source IPS accessing ss3 are kept",
    "start": "1873240",
    "end": "1878320"
  },
  {
    "text": "private private your private IPS from your VPC um negatives so cons uh if you do",
    "start": "1878320",
    "end": "1885200"
  },
  {
    "text": "restrict an S3 bucket to specific VPC or or specific VPC endpoint you can't use",
    "start": "1885200",
    "end": "1891600"
  },
  {
    "text": "the S3 console anymore to manage S3 I hope that's obvious why but uh the",
    "start": "1891600",
    "end": "1897240"
  },
  {
    "text": "console doesn't run your VPC so as soon as you put that policy out there you will go into the ads Management console",
    "start": "1897240",
    "end": "1903440"
  },
  {
    "text": "and you'll get a nice big error uh and you need to enable uh DNS um that",
    "start": "1903440",
    "end": "1908799"
  },
  {
    "text": "doesn't mean you can't use your own DNS if you do you just need to Ford it on to the Amazon uh ec2 VPC DNS because we got",
    "start": "1908799",
    "end": "1916320"
  },
  {
    "text": "to resolve those prefix lists all right so we got two down",
    "start": "1916320",
    "end": "1922919"
  },
  {
    "text": "what's next so this is the part where uh this",
    "start": "1922919",
    "end": "1930360"
  },
  {
    "text": "usually happens you know the the easy deployment",
    "start": "1930360",
    "end": "1937120"
  },
  {
    "text": "methodology of vpcs the ability to spin them up very fast do projects do tests",
    "start": "1937120",
    "end": "1942600"
  },
  {
    "text": "and then actually deploy applications and connect them back into uh your corporate Networks you're going to have",
    "start": "1942600",
    "end": "1949679"
  },
  {
    "text": "a lot of epcs very fast and um and and while that Dynamic nature of",
    "start": "1949679",
    "end": "1955320"
  },
  {
    "text": "vpcs is a great feature you know adding IPC tunnels",
    "start": "1955320",
    "end": "1960919"
  },
  {
    "text": "bringing in new networks propagating those into your corporate Network making Change Control in your network border uh",
    "start": "1960919",
    "end": "1966440"
  },
  {
    "text": "these are impactful changes um and when they're coming rapid fire like this your network uh Engineers are not going to be",
    "start": "1966440",
    "end": "1972760"
  },
  {
    "text": "happy with you so let's to emphasize you know just the the what's involved in just one of",
    "start": "1972760",
    "end": "1979639"
  },
  {
    "text": "these VPN connections let's zoom in on one of these and see what is a real hapn to VPC",
    "start": "1979639",
    "end": "1987200"
  },
  {
    "text": "connectivity looks like so every time you create a VPN connection to a",
    "start": "1987200",
    "end": "1993240"
  },
  {
    "text": "VPC it's two tunnels so that's a redundancy on our end so one tunnel will",
    "start": "1993240",
    "end": "1998519"
  },
  {
    "text": "will land in a separate availability zones and that will connect down to one",
    "start": "1998519",
    "end": "2004360"
  },
  {
    "text": "of your customer gateways so this is your VPN device ter ating the tunnels on your end now to provide ha on your end you're",
    "start": "2004360",
    "end": "2011919"
  },
  {
    "text": "going to want two customer",
    "start": "2011919",
    "end": "2015158"
  },
  {
    "text": "gateways come on so that you can have redundancy on your end so now we've got four tunnels so",
    "start": "2017120",
    "end": "2024559"
  },
  {
    "text": "four tunnels are involved in each",
    "start": "2024559",
    "end": "2028000"
  },
  {
    "text": "connection and then bgp please don't do static routes always Dynamic always bgp",
    "start": "2031919",
    "end": "2039320"
  },
  {
    "text": "um and this is the arrangement when you when you connect to us we advertise down our ASN and the CER block that comprises",
    "start": "2039320",
    "end": "2046240"
  },
  {
    "text": "the VPC itself you advertise up uh your your network so your internal",
    "start": "2046240",
    "end": "2052118"
  },
  {
    "text": "corporate Network what also comes down um from",
    "start": "2052119",
    "end": "2057359"
  },
  {
    "text": "us this work are meds so multi-exit discriminators so this is a way for bgp",
    "start": "2057639",
    "end": "2064919"
  },
  {
    "text": "to for us to influence the routes that come down to you so we use those in our VPN as a service that backs the",
    "start": "2064919",
    "end": "2071878"
  },
  {
    "text": "vgw uh to tell you which tunnel we're going to prefer so you need to make sure",
    "start": "2071879",
    "end": "2076919"
  },
  {
    "text": "and honor those when they come down and you can do the same to us so if you want us to prefer if you want your traffic to",
    "start": "2076919",
    "end": "2082118"
  },
  {
    "text": "prefer one cgw over the other you can do the same you can send up to us either meds or you can send up as path",
    "start": "2082119",
    "end": "2088720"
  },
  {
    "text": "prepending to to favor one side of the other and then obviously you would read",
    "start": "2088720",
    "end": "2094839"
  },
  {
    "text": "vertise the VPC cers that you're learning from uh the VPC into your internal Network through whatever igp",
    "start": "2094839",
    "end": "2101359"
  },
  {
    "text": "protocol you might be using on your corporate Network all",
    "start": "2101359",
    "end": "2108880"
  },
  {
    "text": "right so we're starting to stress out your network pipes we're starting to really stress out your network operations",
    "start": "2110079",
    "end": "2116960"
  },
  {
    "text": "team and all these things are accessing common shared services that exists on your corporate Network whether that's",
    "start": "2116960",
    "end": "2123160"
  },
  {
    "text": "DNS or directory Services logging monitoring security common data sources",
    "start": "2123160",
    "end": "2128839"
  },
  {
    "text": "all that's coming down so our next set of requirements is",
    "start": "2128839",
    "end": "2134720"
  },
  {
    "start": "2133000",
    "end": "2133000"
  },
  {
    "text": "to fix this situation so how do we centralize n network connectivity so we're not being so impactful to our",
    "start": "2134720",
    "end": "2140240"
  },
  {
    "text": "network teams centralize the management security and the common service access give account owners some kind of",
    "start": "2140240",
    "end": "2147680"
  },
  {
    "text": "control and freedom over their own uh VPC resources but still have centralized",
    "start": "2147680",
    "end": "2153040"
  },
  {
    "text": "uh security control over that access and now we're moving into many aw accounts many vpcs still one",
    "start": "2153040",
    "end": "2161319"
  },
  {
    "text": "region so this model is a hub and spoke with peering so we are going to",
    "start": "2164200",
    "end": "2169319"
  },
  {
    "text": "facilitate this by moving those uh common shared services up into a hub VPC",
    "start": "2169319",
    "end": "2175520"
  },
  {
    "text": "so this shared services VPC that you see here and then all of the spoke vpcs will",
    "start": "2175520",
    "end": "2181839"
  },
  {
    "text": "be peered through VPC peering so this is a onetoone relationship between a spoke",
    "start": "2181839",
    "end": "2187319"
  },
  {
    "text": "and the Hub that facilitates private connectivity between",
    "start": "2187319",
    "end": "2192359"
  },
  {
    "text": "vpcs and you'll notice the shared services VPC is the only one that has uh a Consolidated connection down to your",
    "start": "2192359",
    "end": "2198640"
  },
  {
    "text": "corporate Network and it's also the only one that has any egress to the public network so the igw and the VPC endpoint",
    "start": "2198640",
    "end": "2205599"
  },
  {
    "text": "they're all only in the shared services vpcs the spokes are completely",
    "start": "2205599",
    "end": "2211680"
  },
  {
    "text": "isolated so let's zoom in on on on the shared services Hub and one of the spokes to see how it works so here we",
    "start": "2215680",
    "end": "2223000"
  },
  {
    "text": "see the establishment of the peering connection itself so this is a API call where both sides have to agree so you",
    "start": "2223000",
    "end": "2228800"
  },
  {
    "text": "send it to each other and you both thumbs up that facilitates the creation of appearing connection that doesn't",
    "start": "2228800",
    "end": "2234400"
  },
  {
    "text": "mean everything can start talking to each other all of a sudden what it does mean is you can now start creating",
    "start": "2234400",
    "end": "2239520"
  },
  {
    "text": "routing rules that reference the puring connection so you'll see here I create a",
    "start": "2239520",
    "end": "2245640"
  },
  {
    "text": "private route table on the on the spoke that says I want to reference the shared",
    "start": "2245640",
    "end": "2250720"
  },
  {
    "text": "services subnet through the peering connection you can be as specific as you",
    "start": "2250720",
    "end": "2255800"
  },
  {
    "text": "want you don't have to say the entire VPC through the route so you can take this down to a sl32 and that means that",
    "start": "2255800",
    "end": "2262640"
  },
  {
    "text": "your spoke would only be able to talk to a single host in that over that puring connection but on the other end we give",
    "start": "2262640",
    "end": "2270040"
  },
  {
    "text": "the shared services VPC access to the entire VPC space of the spoke so now",
    "start": "2270040",
    "end": "2276880"
  },
  {
    "text": "these two can actually route between each other all private IP connectivity between the two",
    "start": "2276880",
    "end": "2283079"
  },
  {
    "start": "2283000",
    "end": "2283000"
  },
  {
    "text": "vpcs but what about if I want to reach down from the spoke into my corporate Network I can add a route for that so",
    "start": "2284520",
    "end": "2291359"
  },
  {
    "text": "I've done that here to reference the peering connection because that's the direction of my corporate",
    "start": "2291359",
    "end": "2296838"
  },
  {
    "text": "network but when I actually try to do that the Hub VPC is going to see traffic",
    "start": "2297200",
    "end": "2303560"
  },
  {
    "text": "trying to egress that's not part of its Network and it's going to drop it and that's that's by",
    "start": "2303560",
    "end": "2309640"
  },
  {
    "text": "Design so you can't have a transitive relationship with VPC peering so I can't be peered with something and then reach",
    "start": "2309640",
    "end": "2317079"
  },
  {
    "text": "other things that that VPC is connected to whether that's uh exterior networks or other spoke vpc's or the vgw or the",
    "start": "2317079",
    "end": "2326000"
  },
  {
    "text": "igw or the VPC endpoint all of those are transitive relationships all I can do with a peering connection is talk to the",
    "start": "2326000",
    "end": "2332960"
  },
  {
    "text": "actual CER space in that bpc that I'm peered with",
    "start": "2332960",
    "end": "2338240"
  },
  {
    "text": "but what if we do want to facilitate that kind of uh connectivity what are our options",
    "start": "2338240",
    "end": "2344440"
  },
  {
    "text": "there so probably the most common uh initial is to deploy a centralized proxy",
    "start": "2345319",
    "end": "2351240"
  },
  {
    "text": "so a lot of customers they're they already have centralized proxies for a lot of their outbound access and they'll",
    "start": "2351240",
    "end": "2358040"
  },
  {
    "text": "deploy a centralized proxy layer up into their shared services VPC and will",
    "start": "2358040",
    "end": "2363680"
  },
  {
    "text": "provide you know htps connectivity to facilitate this in to-end kind of communication so how would that work so",
    "start": "2363680",
    "end": "2371200"
  },
  {
    "text": "here we have uh internal elb deployed into the shared services VPC backed by proxy",
    "start": "2371200",
    "end": "2377880"
  },
  {
    "text": "Fleet and this is this is not a transparent proxy so this is not inline",
    "start": "2377880",
    "end": "2383079"
  },
  {
    "text": "this would be explicit proxy so you would have to actually configure your your endpoints your instances or devices",
    "start": "2383079",
    "end": "2390040"
  },
  {
    "text": "to use the proxy for HTTP communication so here you see it going across the Ping connection uh to the lb and hitting a",
    "start": "2390040",
    "end": "2399319"
  },
  {
    "text": "resource in that VPC that can now use the vgw and down to your corporate",
    "start": "2399319",
    "end": "2405160"
  },
  {
    "text": "Network and similarly to use egress out of the internet and this proxy can be a",
    "start": "2405160",
    "end": "2410319"
  },
  {
    "text": "centralized source of of URL filtering and determining what content can and can",
    "start": "2410319",
    "end": "2415520"
  },
  {
    "text": "not go out so it's a centralized resource for all https traffic and you see here the proxy is",
    "start": "2415520",
    "end": "2421760"
  },
  {
    "text": "the only one that has all the routes to all these resources so let's zoom in and see like",
    "start": "2421760",
    "end": "2429119"
  },
  {
    "start": "2429000",
    "end": "2429000"
  },
  {
    "text": "what this how this is actually configured and you'll see here that I'm I'm building up layers um but keep in",
    "start": "2429119",
    "end": "2435480"
  },
  {
    "text": "mind that star Network so by default everything is flat everything can talk to each other so all these layers that",
    "start": "2435480",
    "end": "2441119"
  },
  {
    "text": "I'm representing uh are determined on security groups routing policy and network accles to actually form these",
    "start": "2441119",
    "end": "2450400"
  },
  {
    "text": "layers so first we've got an internal elb so it's all private IPS and that's",
    "start": "2450599",
    "end": "2456440"
  },
  {
    "text": "the destination for my proxy backing it are is the actual instances that are performing the",
    "start": "2456440",
    "end": "2461760"
  },
  {
    "text": "proxying functions so these can be you know whe whether it's open source squid or a third- party uh vendor that you're",
    "start": "2461760",
    "end": "2468560"
  },
  {
    "text": "using to do your proxying those are behind the elb and they are the only ones that have public IPS and they are the only ones",
    "start": "2468560",
    "end": "2475079"
  },
  {
    "text": "that have a route to the internet gateway and so the private subnet uh in",
    "start": "2475079",
    "end": "2482319"
  },
  {
    "text": "the spoke vpcs you can actually use security groups across peers now so that",
    "start": "2482319",
    "end": "2488119"
  },
  {
    "text": "actually wasn't possible until uh this year is to share security groups across a across a peer relationship so the elb",
    "start": "2488119",
    "end": "2496000"
  },
  {
    "text": "itself could have a security group of spoke to say these spoke resources can",
    "start": "2496000",
    "end": "2501680"
  },
  {
    "text": "use me and are able to access",
    "start": "2501680",
    "end": "2506078"
  },
  {
    "text": "theb and similarly for accessing public resources",
    "start": "2510480",
    "end": "2518240"
  },
  {
    "text": "go same for using the vpcm point and finally administrating it so",
    "start": "2519760",
    "end": "2527560"
  },
  {
    "text": "operations staff uh back on your corporate Network they're going to have to land on something in that shared services VPC so something like a Bastion",
    "start": "2527560",
    "end": "2534400"
  },
  {
    "text": "host administrative host that they land on that they they can then jump on to",
    "start": "2534400",
    "end": "2539599"
  },
  {
    "text": "Spokes or any any perod relationship but they can also use the",
    "start": "2539599",
    "end": "2545280"
  },
  {
    "text": "proxy so if you want to facilitate for example uh S3 connectivity private S3 connectivity through your vpcs through",
    "start": "2545280",
    "end": "2551880"
  },
  {
    "text": "the shared services VPC you can certainly do that and so those devices can be configured to use the proxy in",
    "start": "2551880",
    "end": "2559160"
  },
  {
    "text": "your shared services and uh out they go so a few to-dos on the shared",
    "start": "2559160",
    "end": "2565359"
  },
  {
    "start": "2563000",
    "end": "2563000"
  },
  {
    "text": "services Hub um make sure you're using imim to control you know I talked about",
    "start": "2565359",
    "end": "2571920"
  },
  {
    "text": "uh these teams owning their own VPC having their own account but you got to make sure sure that they can't alter the",
    "start": "2571920",
    "end": "2577880"
  },
  {
    "text": "design that you've put in place so you got to make sure they can't tear down the peering relationship or put a igw on",
    "start": "2577880",
    "end": "2584440"
  },
  {
    "text": "their VPC so all of the high blast radius uh Network specific API calls you",
    "start": "2584440",
    "end": "2589839"
  },
  {
    "text": "need to make sure you're locking those down so create netop netops uh roles and",
    "start": "2589839",
    "end": "2595119"
  },
  {
    "text": "and make sure you you apply these roles to every one of your accounts so that your network operations teams are the",
    "start": "2595119",
    "end": "2600520"
  },
  {
    "text": "only ones that can jump in there assume that role and make Network related VPC changes uh there's a link there for for",
    "start": "2600520",
    "end": "2606599"
  },
  {
    "text": "we now have managed um roles so there's one for network uh administrators which",
    "start": "2606599",
    "end": "2612440"
  },
  {
    "text": "means it's a managed policy which means AWS is responsible for keeping it updated so as we release new network",
    "start": "2612440",
    "end": "2618720"
  },
  {
    "text": "related features and products that policy will automatically be updated so take a look at that we've talked about",
    "start": "2618720",
    "end": "2625880"
  },
  {
    "text": "cloud trail config and VPC flow logs make sure you're making use of those to track everything that's going on in all",
    "start": "2625880",
    "end": "2632240"
  },
  {
    "text": "your vpcs so quick procon on this one so we're",
    "start": "2632240",
    "end": "2639760"
  },
  {
    "start": "2636000",
    "end": "2636000"
  },
  {
    "text": "minimizing on premises Network changes by uh you know consolidating down to a fixed number of pipes up into uh the",
    "start": "2639760",
    "end": "2646760"
  },
  {
    "text": "region we've reduced latency and the cost of cloud applications because we've moved those shared services up they're",
    "start": "2646760",
    "end": "2652760"
  },
  {
    "text": "no longer having to come down to your corporate Network to to access them all uh We've provided spoke accounts control",
    "start": "2652760",
    "end": "2658839"
  },
  {
    "text": "over their own resources um but we have centralized control of everything that's",
    "start": "2658839",
    "end": "2664240"
  },
  {
    "text": "coming out of them with the proxy and the security groups are working across all the peers so that we're uh securing",
    "start": "2664240",
    "end": "2669800"
  },
  {
    "text": "the traffic on the con side for the Hub and spoke uh obviously you're managing",
    "start": "2669800",
    "end": "2675280"
  },
  {
    "text": "the cost uh and the management of of the actual proxy so all those instances that",
    "start": "2675280",
    "end": "2681440"
  },
  {
    "text": "comprise the actual proxy are your responsibility I mentioned it's not a transparent proxy so you're having to do",
    "start": "2681440",
    "end": "2687559"
  },
  {
    "text": "the configuration to point everything to that proxy to use it for https it's restricted to L7 to",
    "start": "2687559",
    "end": "2694359"
  },
  {
    "text": "https uh and we point out the no transitive networking and the peering data transfer cost so there is a cost to",
    "start": "2694359",
    "end": "2701359"
  },
  {
    "text": "use peering one cent a gig and so if you're doing very significant data transfers between peered vpcs you want",
    "start": "2701359",
    "end": "2708119"
  },
  {
    "text": "to pay attention to that traffic and and figure out whether the peering makes sense for",
    "start": "2708119",
    "end": "2714200"
  },
  {
    "text": "you all right so here we got multiple hubs you know you have maybe a Dev Hub",
    "start": "2715680",
    "end": "2721440"
  },
  {
    "text": "and maybe have a prod Hub but it's not limited to uh just that might have a data services Hub that might be tied in",
    "start": "2721440",
    "end": "2729559"
  },
  {
    "text": "but they can be connected to each other you know peering is very flexible and it can also be dynamic so it's something",
    "start": "2729559",
    "end": "2734720"
  },
  {
    "text": "that I don't think is quite Apparent at first blush with peering but you can have um you know it's just an API call",
    "start": "2734720",
    "end": "2740680"
  },
  {
    "text": "to establish connectivity between two vpcs so you might have a deployment use case where you have a promotion of data",
    "start": "2740680",
    "end": "2747800"
  },
  {
    "text": "from one environment to another and traditionally these environments wouldn't be connected but programmatically you could just issue a",
    "start": "2747800",
    "end": "2753520"
  },
  {
    "text": "VPC pering connection connect them up trans for the data tear down the",
    "start": "2753520",
    "end": "2758880"
  },
  {
    "text": "connection but now we've got uh we've got your next hot mobile app in one of",
    "start": "2761200",
    "end": "2767040"
  },
  {
    "text": "these spokes so we're going to zoom in on this one spoke and the",
    "start": "2767040",
    "end": "2772440"
  },
  {
    "text": "Hub so we have this mobile mobile app and this is what I'm calling hybrid",
    "start": "2772440",
    "end": "2778359"
  },
  {
    "text": "serverless which I'm trademarking um and uh this is I I'm seeing this more",
    "start": "2778359",
    "end": "2785160"
  },
  {
    "text": "and more where you have a PRI private VPC the resources in there that have no igw all private uh but you're using uh",
    "start": "2785160",
    "end": "2793000"
  },
  {
    "text": "public AWS resources to provide a front into the resources in the VPC so for",
    "start": "2793000",
    "end": "2798079"
  },
  {
    "text": "example uh Amazon API Gateway is providing a landing point for your",
    "start": "2798079",
    "end": "2803280"
  },
  {
    "text": "mobile apis and it's providing strong authentication and it's providing",
    "start": "2803280",
    "end": "2808359"
  },
  {
    "text": "metering and uh it also provides access to Lambda functions Lambda can reach",
    "start": "2808359",
    "end": "2814240"
  },
  {
    "text": "inside your VPC so Lambda can privately access your VPC it does that by creating an elastic",
    "start": "2814240",
    "end": "2820319"
  },
  {
    "text": "network interface that the function then uses to access you know the the the interface itself has a private IP from",
    "start": "2820319",
    "end": "2826800"
  },
  {
    "text": "your VPC and it uses that to access resources uh in your VPC privately so",
    "start": "2826800",
    "end": "2832319"
  },
  {
    "text": "there's no Public Access here so here we're accessing you know we",
    "start": "2832319",
    "end": "2839119"
  },
  {
    "text": "have a a backing store of Amazon Aurora uh deployed into this VPC for the mobile",
    "start": "2839119",
    "end": "2844720"
  },
  {
    "text": "app to use and that works great but what doesn't work is the new",
    "start": "2844720",
    "end": "2850599"
  },
  {
    "text": "functionality that we want to launch which depends upon Legacy applications that are still back in your data center",
    "start": "2850599",
    "end": "2856720"
  },
  {
    "text": "back home so this is very common where customers are you know advancing the",
    "start": "2856720",
    "end": "2862520"
  },
  {
    "text": "their mobile application at at a certain Pace releasing new features but they have dependency on Legacy applications",
    "start": "2862520",
    "end": "2869079"
  },
  {
    "text": "they can do this build these things up in the cloud and still be able to reach back to uh Legacy apps and make use of",
    "start": "2869079",
    "end": "2877079"
  },
  {
    "text": "the data that's still on your corporate Network how do you do this you know we've already talked about transitive",
    "start": "2877079",
    "end": "2882920"
  },
  {
    "text": "not",
    "start": "2882920",
    "end": "2885119"
  },
  {
    "text": "working so here we go we got all these spokes now that have requirements to",
    "start": "2888559",
    "end": "2894119"
  },
  {
    "text": "have end to-end layer three connectivity so no longer just proxy high level layer",
    "start": "2894119",
    "end": "2899240"
  },
  {
    "text": "seven we want end to end connectivity and we've also got some other regions out there that are growing",
    "start": "2899240",
    "end": "2905680"
  },
  {
    "text": "we'd like to bring them into the fold so now we move on to VPC mass",
    "start": "2905680",
    "end": "2911880"
  },
  {
    "text": "transit so here's our requirements now so now we want to again we're centralizing and minimizing the network",
    "start": "2911880",
    "end": "2918359"
  },
  {
    "text": "connections but now we want to allow in to-end routing Min minimal operational overhead",
    "start": "2918359",
    "end": "2925680"
  },
  {
    "text": "and we want to Leverage The AWS network with many AWS accounts many vpcs in many",
    "start": "2925680",
    "end": "2932559"
  },
  {
    "text": "regions so this is where we're going bring in a concept of a Transit VPC and a Transit VPC is dedicated to just",
    "start": "2932799",
    "end": "2941838"
  },
  {
    "text": "that facilitating connectivity between networks so we keep it as simple as",
    "start": "2941920",
    "end": "2948799"
  },
  {
    "text": "possible all that's going in here are dedicated ec2 based routing devices that",
    "start": "2948799",
    "end": "2955119"
  },
  {
    "text": "are going to be responsible for maintaining VPN tunnels to a lot of different networks and facilitating the",
    "start": "2955119",
    "end": "2960760"
  },
  {
    "text": "communication between all of them um there's no other resources in the transit VPC we keep it simple just has a",
    "start": "2960760",
    "end": "2966839"
  },
  {
    "text": "default route to to an igw and no other resources in the VPC",
    "start": "2966839",
    "end": "2972680"
  },
  {
    "text": "that are depending upon pointing to these things and then we start adding spokes",
    "start": "2972680",
    "end": "2979240"
  },
  {
    "text": "to them and the spokes are dead simple they're just pointing a default route out to their",
    "start": "2979240",
    "end": "2985559"
  },
  {
    "text": "vgw it's kind of turning the model on your head because you know these ec2",
    "start": "2985559",
    "end": "2991079"
  },
  {
    "text": "based VPN devices are basically as acting as customer gateways but in this model it's the reverse they're not",
    "start": "2991079",
    "end": "2997119"
  },
  {
    "text": "really the client they're The Hub so as we add more and more Spokes",
    "start": "2997119",
    "end": "3003960"
  },
  {
    "text": "and this is again all bgp all Dynamic routing we're learning all these networks and these",
    "start": "3003960",
    "end": "3010920"
  },
  {
    "text": "centralized uh Transit routers are facilitating inin connectivity between all the",
    "start": "3010920",
    "end": "3017240"
  },
  {
    "text": "spokes and we can do the same for bringing in external networks we just land the VPN tunnels",
    "start": "3017240",
    "end": "3023559"
  },
  {
    "text": "and connect them directly to the these uh Transit",
    "start": "3023559",
    "end": "3028720"
  },
  {
    "text": "routers and and and it's you know as I mentioned in the proxy these are now centralized uh uh methods for traffic",
    "start": "3029680",
    "end": "3036920"
  },
  {
    "text": "control for security and",
    "start": "3036920",
    "end": "3040240"
  },
  {
    "text": "filtering so if this sounds like something you're actually interested in uh the solution Builder team at AWS has",
    "start": "3043720",
    "end": "3050760"
  },
  {
    "text": "actually built uh a solution for Transit VPC and we're going to talk a little bit about how how that works so there's a",
    "start": "3050760",
    "end": "3057359"
  },
  {
    "text": "cloud formation template that sets all of this up for you uh it's based off the",
    "start": "3057359",
    "end": "3062400"
  },
  {
    "text": "Cisco cloud services router so the CSR uh which is a full stack virtualized ASR",
    "start": "3062400",
    "end": "3067680"
  },
  {
    "text": "so there all all the features of your of your Hardware ASR uh but with a byol pay",
    "start": "3067680",
    "end": "3073240"
  },
  {
    "text": "as you go license mod and the cloud information stack for",
    "start": "3073240",
    "end": "3078280"
  },
  {
    "text": "Transit VPC launch it and in the template all you have to",
    "start": "3078280",
    "end": "3086319"
  },
  {
    "text": "do is choose what bandwidth you want So at the low end is two with 500 megabytes",
    "start": "3086319",
    "end": "3091760"
  },
  {
    "text": "megabits excuse me uh per router all the way up to 4.5 gigabits per second per",
    "start": "3091760",
    "end": "3099440"
  },
  {
    "text": "router so it creates that Transit VPC for you deploys them with eips uh assigns um carrier Network space",
    "start": "3101359",
    "end": "3109920"
  },
  {
    "text": "to it so this is not RFC 1918 space it's um shared access space",
    "start": "3109920",
    "end": "3117359"
  },
  {
    "text": "and then it has a very cool automation to be able to actually start creating your uh Transit connections so spoke",
    "start": "3118240",
    "end": "3127760"
  },
  {
    "text": "connections you see it very simple all we have is igw Route and it uses S3 for",
    "start": "3128040",
    "end": "3133559"
  },
  {
    "text": "storing configuration so we have a route to a vpcm point and how do we do availability for",
    "start": "3133559",
    "end": "3141119"
  },
  {
    "start": "3138000",
    "end": "3138000"
  },
  {
    "text": "these things so I'm sure you're wondering like obvious you have centralized routers that are not responsible for all this communication",
    "start": "3141119",
    "end": "3146480"
  },
  {
    "text": "between all these spokes we use ec2 auto recovery so if you're not familiar with this feature uh this is all driven by a",
    "start": "3146480",
    "end": "3153680"
  },
  {
    "text": "a status check alarm called status check failed system so this is a cloudwatch metric that is a a summation of a bunch",
    "start": "3153680",
    "end": "3160839"
  },
  {
    "text": "of ec2 related health checks that are rolled up into this one single metric that say what the health of the",
    "start": "3160839",
    "end": "3166839"
  },
  {
    "text": "underlying host its power its networking its software everything about that that physical host hosting your instance um",
    "start": "3166839",
    "end": "3174599"
  },
  {
    "text": "and what you can do do is set when the alarm is triggered on",
    "start": "3174599",
    "end": "3180280"
  },
  {
    "text": "that metric if it fails you can trigger to recover the instance which means it will be migrated to new hardware",
    "start": "3180280",
    "end": "3187359"
  },
  {
    "text": "automatically and it will retain all the characteristics of that instance from private IPS to the Enis that are on",
    "start": "3187359",
    "end": "3194319"
  },
  {
    "text": "there to the EBS volumes that were mounted all the way to the instance ID itself so it is identical um and this is",
    "start": "3194319",
    "end": "3200480"
  },
  {
    "text": "supported on all the instance types you see there with EBS only it's dependent upon uh BS storage to facilitate the",
    "start": "3200480",
    "end": "3209119"
  },
  {
    "text": "migration so how do you add a Spoke so this is all driven by tagging so you go",
    "start": "3209319",
    "end": "3215160"
  },
  {
    "text": "to the vgw of the spoke you add this tag that says Transit VPC spoke equals true",
    "start": "3215160",
    "end": "3221880"
  },
  {
    "text": "there's a Lambda function out there that's running every minute that Cycles through all of your accounts and all",
    "start": "3221880",
    "end": "3227000"
  },
  {
    "text": "your regions to check for this tag on a VPC that does not have VPN",
    "start": "3227000",
    "end": "3233599"
  },
  {
    "text": "connections already so it finds that tag it builds the necessary VPN",
    "start": "3233599",
    "end": "3239720"
  },
  {
    "text": "connections so it creates your cgws if it needs to the customer gateways creates the VPN connection it bundles",
    "start": "3239720",
    "end": "3245960"
  },
  {
    "text": "that up into XML file and encrypts that and stores that on",
    "start": "3245960",
    "end": "3251200"
  },
  {
    "text": "S3 which triggers another Lambda function by putting that object onto",
    "start": "3251200",
    "end": "3257640"
  },
  {
    "text": "S3 launches a Cisco configuration takes that configuration uh puts it into",
    "start": "3258359",
    "end": "3263799"
  },
  {
    "text": "something Cisco friendly and then actually uses the same private access it Lambda access so it creates an",
    "start": "3263799",
    "end": "3271440"
  },
  {
    "text": "eni has permissions to SSH into your Transit routers and pushes that configuration into the csrs",
    "start": "3271440",
    "end": "3277839"
  },
  {
    "text": "automatically So within a matter of minutes those networks are connected the tunnels come up bgp shared everybody's",
    "start": "3277839",
    "end": "3286640"
  },
  {
    "text": "happy and you can also use uh there's some knobs and dials in there to be able",
    "start": "3288000",
    "end": "3293240"
  },
  {
    "text": "to do route influencing so um if you want a preferred route between your uh",
    "start": "3293240",
    "end": "3300040"
  },
  {
    "text": "between your csrs uh you can do that too so by default they're active active which is fine if you're stateless but if",
    "start": "3300040",
    "end": "3306880"
  },
  {
    "text": "you're doing something like if the csrs are also going to do Nat or if they're going to do stateful file Walling or",
    "start": "3306880",
    "end": "3313200"
  },
  {
    "text": "anything that needs to maintain State and not have asymmetric routing uh then you'll want to look into this",
    "start": "3313200",
    "end": "3319359"
  },
  {
    "text": "feature so this again just representing all the tunnels here",
    "start": "3319359",
    "end": "3326119"
  },
  {
    "text": "is driven by a tag that you put on the vgw so you put a tag that says preferred",
    "start": "3326119",
    "end": "3332000"
  },
  {
    "text": "path equals csr1 or",
    "start": "3332000",
    "end": "3335640"
  },
  {
    "text": "csr2 that will again drive a configuration",
    "start": "3337960",
    "end": "3343119"
  },
  {
    "text": "change to prefer one or the",
    "start": "3343240",
    "end": "3347359"
  },
  {
    "text": "other and I promise this is my only router configuration screenshot",
    "start": "3349720",
    "end": "3355599"
  },
  {
    "start": "3350000",
    "end": "3350000"
  },
  {
    "text": "I just wanted to show you that this is what it does it just automatically adds a path prepending in there uh to",
    "start": "3355599",
    "end": "3361119"
  },
  {
    "text": "influence that route so this was from the CSR 2 which is the one you didn't want to prefer so it it it doubles up on",
    "start": "3361119",
    "end": "3367520"
  },
  {
    "text": "the buffer so that is going to be uh obviously less preferred and applies that route map to that",
    "start": "3367520",
    "end": "3376039"
  },
  {
    "text": "neighbor I think it's finally dying and the same as for removing",
    "start": "3378319",
    "end": "3384440"
  },
  {
    "text": "spokes so all you have to do is change that tag either false or blank it out or whatever that that polar is going to be",
    "start": "3384440",
    "end": "3391200"
  },
  {
    "text": "running every minute and checking the state of that tag and it will tear down that connection push the new configuration",
    "start": "3391200",
    "end": "3397720"
  },
  {
    "text": "that has removed those connections Cisco configurator Lambda function will launch and it will reconfigure your routers for",
    "start": "3397720",
    "end": "3404319"
  },
  {
    "text": "you automatically so it's fun stuff it's uh",
    "start": "3404319",
    "end": "3409599"
  },
  {
    "text": "I encourage you to check it out it's fun to play with it's really easy to launch the template and get running and and start figuring out if if it's going to",
    "start": "3409599",
    "end": "3415520"
  },
  {
    "text": "work for your uh multi VPC configuration all right so here we go we",
    "start": "3415520",
    "end": "3421119"
  },
  {
    "text": "got it looks very similar to The Hub and spoke but now it's all L3 so this is all driven by uh tunneling VP uh IPC tunnels",
    "start": "3421119",
    "end": "3429559"
  },
  {
    "text": "into these centralized routers uh and and bgp driving all the dynamic routing between all of the various networks so",
    "start": "3429559",
    "end": "3436520"
  },
  {
    "text": "you can go everywhere you can go from your branch to a spoke you can go from a spoke to another",
    "start": "3436520",
    "end": "3443119"
  },
  {
    "text": "spoke you can go spoke to your to the Internet so full in to",
    "start": "3443119",
    "end": "3450400"
  },
  {
    "text": "end so now we're starting to get there so we're bringing in uh that",
    "start": "3452280",
    "end": "3459039"
  },
  {
    "text": "second region also into our Transit we're representing here that you can run a Transit Hub in each region or you can",
    "start": "3459039",
    "end": "3465920"
  },
  {
    "text": "move other regions over and have spokes you know it's completely up to you how you want to run the transit",
    "start": "3465920",
    "end": "3472880"
  },
  {
    "text": "VPC and you know where you want your point of consolidation to be and I just point",
    "start": "3473799",
    "end": "3479359"
  },
  {
    "text": "out here that we're also running in a full mesh between Transit hubs two different regions over the AWS",
    "start": "3479359",
    "end": "3486280"
  },
  {
    "text": "Network so real quick pros and cons of the transit VPC so IND in routing",
    "start": "3486280",
    "end": "3491960"
  },
  {
    "start": "3487000",
    "end": "3487000"
  },
  {
    "text": "Central Transit routers can perform higher level functions they're a central point of of control for you uh the spoke",
    "start": "3491960",
    "end": "3498520"
  },
  {
    "text": "V gws are dead simple and they're ha by default this minimizes on permis",
    "start": "3498520",
    "end": "3503599"
  },
  {
    "text": "networking changes because you're not changing anything about your connectivity to the transit VPC all the really Dynamic stuff you're launching",
    "start": "3503599",
    "end": "3509960"
  },
  {
    "text": "all these new vpcs that's all H happening in the transit VPC itself uh and it can minimize cost if",
    "start": "3509960",
    "end": "3516799"
  },
  {
    "text": "you're already doing this and you can offload this function from you know purchasing new networking gear or",
    "start": "3516799",
    "end": "3522160"
  },
  {
    "text": "something for a Colo instead you can move this up into a Transit VPC uh on the on the con side we see availability",
    "start": "3522160",
    "end": "3529280"
  },
  {
    "text": "and management of the transit router is up to you we talked a little bit about the availability the licensing cost of Cisco",
    "start": "3529280",
    "end": "3537079"
  },
  {
    "text": "and uh the cost of the data transfer is important to uh point out because everything Transit related is going over",
    "start": "3537079",
    "end": "3542799"
  },
  {
    "text": "the igw so it's all internet out so for example if you're going from transit to",
    "start": "3542799",
    "end": "3548640"
  },
  {
    "text": "spoke or spoke to transit to home each one of those is is internet outstep so",
    "start": "3548640",
    "end": "3553799"
  },
  {
    "text": "you need to pay attention to your uh data transfer",
    "start": "3553799",
    "end": "3558599"
  },
  {
    "text": "costs so if everyone's okay I'm running low on time I didn't I didn't realize how the this was going to go I've got",
    "start": "3559960",
    "end": "3566079"
  },
  {
    "text": "one more section take about five minutes um but I'll try to blow through it um so",
    "start": "3566079",
    "end": "3573440"
  },
  {
    "text": "this is just bringing in direct connect to this",
    "start": "3573440",
    "end": "3577359"
  },
  {
    "text": "picture and more regions so we want to use an existing private Network that we",
    "start": "3579200",
    "end": "3584880"
  },
  {
    "text": "have so we have an NLS Network we don't want to use the internet anymore to connect our regions we take advantage of",
    "start": "3584880",
    "end": "3590039"
  },
  {
    "text": "this pre-existing Network and we want to bring in more regions",
    "start": "3590039",
    "end": "3595520"
  },
  {
    "text": "so dedicated scalable network connectivity to ads leverage our existing corporate",
    "start": "3595520",
    "end": "3600760"
  },
  {
    "text": "Network predictable latency in many many many many regions many many accounts many",
    "start": "3600760",
    "end": "3607838"
  },
  {
    "text": "vpcs so Transit VPC with direct connect this works perfectly fine uh and there's",
    "start": "3609079",
    "end": "3614240"
  },
  {
    "text": "actually um you know a cool little feature here with what we're calling it a detached vgw and",
    "start": "3614240",
    "end": "3620640"
  },
  {
    "text": "for those of you that are the um VPC hackers in the crowd uh you will noodle on this one tonight",
    "start": "3620640",
    "end": "3627200"
  },
  {
    "text": "to figure out what else you can do to play with this one so this is a cool one uh you can use a vgw without actually",
    "start": "3627200",
    "end": "3632720"
  },
  {
    "text": "being attached to a VPC I don't know if you ever tried that but you can so if I",
    "start": "3632720",
    "end": "3637920"
  },
  {
    "text": "tag this thing with the transit tag the transit router is going to build up tunnels to this vgw now right now it's",
    "start": "3637920",
    "end": "3646440"
  },
  {
    "text": "one-sided there's nothing else attached to the vgw but you can attach a private Direct",
    "start": "3646440",
    "end": "3652960"
  },
  {
    "text": "Connect interface to it so now on one side you've got the private virtual interface for Direct",
    "start": "3652960",
    "end": "3659599"
  },
  {
    "text": "Connect attached this vgw on the other side you have your VPN tunnels into your csrs so all the bgb propagation is going",
    "start": "3659599",
    "end": "3666400"
  },
  {
    "text": "to happen and facilitate through this like free floating life raft of of",
    "start": "3666400",
    "end": "3671920"
  },
  {
    "text": "network connectivity that's not attached to a VPC so um this scales up to about a gigabit of",
    "start": "3671920",
    "end": "3679760"
  },
  {
    "text": "flow so if you're doing multiple G gigabits you can create more of these but if you're doing you know like tens",
    "start": "3679760",
    "end": "3684920"
  },
  {
    "text": "and 20s 30 40 gigabits of traffic over Direct Connect you don't want to do this",
    "start": "3684920",
    "end": "3690079"
  },
  {
    "text": "um you want to go a more traditional route um which is you know setting up the private direct connect directly into",
    "start": "3690079",
    "end": "3696880"
  },
  {
    "text": "the vgw attached to the transit VPC and then running tunnels over direct",
    "start": "3696880",
    "end": "3703280"
  },
  {
    "text": "connects so you can do this privately like this so here we're representing the tunnels from your on permis VPN devices",
    "start": "3703280",
    "end": "3710319"
  },
  {
    "text": "directly into the CSR Transit routers or you can also do it over",
    "start": "3710319",
    "end": "3715680"
  },
  {
    "text": "public it's up to you there's pluses and minuses on both so with public you're obviously it's a public network",
    "start": "3715680",
    "end": "3723119"
  },
  {
    "text": "now and you're getting all of AWS public IP space advertised down to you and you",
    "start": "3724920",
    "end": "3730960"
  },
  {
    "text": "also have to secure that on your side you don't have to treat it like a public network so you'll have firewalls and",
    "start": "3730960",
    "end": "3736760"
  },
  {
    "text": "such there we go n security layers on your side because it is a public network um but you can still facilitate the",
    "start": "3736760",
    "end": "3743400"
  },
  {
    "text": "tunnels across the direct connect connection it's private dedicated bandwidth and you'll just be terminating",
    "start": "3743400",
    "end": "3749680"
  },
  {
    "text": "those tunnel tunnels on the public eips of the transit routers instead of uh of the private",
    "start": "3749680",
    "end": "3755799"
  },
  {
    "text": "IPS uh the advantage of the public is that once in in the US once you connect",
    "start": "3755799",
    "end": "3762480"
  },
  {
    "text": "in in one direct connect location with a public Direct Connect interface you get access to all the AWS regions so if you",
    "start": "3762480",
    "end": "3769200"
  },
  {
    "text": "were running Transit hubs in multiple regions through this single connection and here we represent it in the equinex",
    "start": "3769200",
    "end": "3775200"
  },
  {
    "text": "in Chicago to the new US east region is where you're directly direct connected into so you obviously have access to",
    "start": "3775200",
    "end": "3782599"
  },
  {
    "text": "your regions uh all your vpcs in that region but you would also have",
    "start": "3782599",
    "end": "3788480"
  },
  {
    "text": "access to the remote regions if this click would ever work so you'd be able to VPN and it would still be all over",
    "start": "3790039",
    "end": "3797119"
  },
  {
    "text": "AWS private Network you would not be able to do that with a private Direct Connect fif private Direct Connect",
    "start": "3797119",
    "end": "3803359"
  },
  {
    "text": "interfaces can only be connected to vpcs in the same region that you're direct connected",
    "start": "3803359",
    "end": "3809559"
  },
  {
    "text": "into I'll skip this it's going to be homework for you later there's a really good Deep dive uh",
    "start": "3809839",
    "end": "3815920"
  },
  {
    "text": "if you want to go to all the details of direct connect mvpns net",
    "start": "3815920",
    "end": "3821760"
  },
  {
    "text": "402 and just real quickly I mean hooking up an existing MLS like ipvpn network uh",
    "start": "3821799",
    "end": "3828400"
  },
  {
    "text": "to a region is is dead simple most of your providers they're already in our Direct Connect locations that adabs",
    "start": "3828400",
    "end": "3834960"
  },
  {
    "text": "region is already a point of presence on their Global Cloud so all it is is facilitating uh adding that new pop to",
    "start": "3834960",
    "end": "3842400"
  },
  {
    "text": "your existing ipvpn you know calling up your provider and saying Hey I want to add uswest to I want to add to the",
    "start": "3842400",
    "end": "3849520"
  },
  {
    "text": "network because you know you're facilit they're facilitating all the routing you're having that relationship with",
    "start": "3849520",
    "end": "3855319"
  },
  {
    "text": "their PE routers in each of your locations and they just bring in that new network onto your vrf representing",
    "start": "3855319",
    "end": "3862279"
  },
  {
    "text": "your cloud and now you've got all of the the CER blocks from uh the adus region",
    "start": "3862279",
    "end": "3868319"
  },
  {
    "text": "so uh same with bringing in multiple locations here we have Chicago and",
    "start": "3868319",
    "end": "3874680"
  },
  {
    "text": "London the only thing to watch out for is as your MLS Cloud gets to a certain size there are some limits so there is a",
    "start": "3874680",
    "end": "3882279"
  },
  {
    "text": "100 Route Max in the VPC route table so if you have many many points of presence",
    "start": "3882279",
    "end": "3887960"
  },
  {
    "text": "on your Ms Cloud uh you're going to need to get your provider to either summarize those down to nice and clean uh smaller",
    "start": "3887960",
    "end": "3894200"
  },
  {
    "text": "routes or advertise a direct a default route to you um because 100 is is a hard limit for us in the VPC route",
    "start": "3894200",
    "end": "3901960"
  },
  {
    "text": "table and then you're obviously going to be seeing our uh our ASN coming in from",
    "start": "3901960",
    "end": "3907160"
  },
  {
    "text": "different locations so you're gonna have to do things like uh bgp as override uh to make sure there's not any bgp Loops",
    "start": "3907160",
    "end": "3913720"
  },
  {
    "text": "when you're bringing in multiple regions all right so pros of using direct",
    "start": "3913720",
    "end": "3918839"
  },
  {
    "text": "connect with Transit VPC private network no internet dependencies predictable latencies because you have that",
    "start": "3918839",
    "end": "3924400"
  },
  {
    "text": "dedicated bandwidth those dedicated links into the regions and uh access to public networks",
    "start": "3924400",
    "end": "3930640"
  },
  {
    "text": "over of all US regions over single US based direct con connection on the negative uh you know you're getting all",
    "start": "3930640",
    "end": "3937760"
  },
  {
    "text": "of our public IP space you might not want all that so you might be having to do some filtering on what you get from",
    "start": "3937760",
    "end": "3943359"
  },
  {
    "text": "us as far as public network announcements um and then the 100 Route limit we just talked about and obviously",
    "start": "3943359",
    "end": "3949640"
  },
  {
    "text": "the cost of a provider Network and of all these direct conect connections",
    "start": "3949640",
    "end": "3955400"
  },
  {
    "text": "all right so we finally got to the big picture thank you very much for your time sorry I ran a little bit over I",
    "start": "3955400",
    "end": "3960680"
  },
  {
    "text": "really appreciate please give me feedback thank you",
    "start": "3960680",
    "end": "3966599"
  }
]