[
  {
    "start": "0",
    "end": "73000"
  },
  {
    "text": "all right wake up you guys that front of",
    "start": "1550",
    "end": "7500"
  },
  {
    "text": "the party last night yeah looks like it so yeah really happen for all you guys",
    "start": "7500",
    "end": "13380"
  },
  {
    "text": "to be here I'm excited I'm excited you guys came to learn about networking at 10:00 a.m. at after the party so I'm I'm",
    "start": "13380",
    "end": "18720"
  },
  {
    "text": "honored by you guys so I'm Nick Matthews I'm a Solutions Architect I do a lot of",
    "start": "18720",
    "end": "24539"
  },
  {
    "text": "to spend a lot of time with customers and our partners working on network architectures and things like that so",
    "start": "24539",
    "end": "29939"
  },
  {
    "text": "today we'll be talking about connecting mini V pcs we've also got Vicente up",
    "start": "29939",
    "end": "35160"
  },
  {
    "text": "here he's going to join us later and talk a little about his use case so let's get into it man this talk is about",
    "start": "35160",
    "end": "42120"
  },
  {
    "text": "many V pcs so what does that mean you know when I talk to customers like you know one of the usually one of the",
    "start": "42120",
    "end": "48329"
  },
  {
    "text": "first questions I have to ask is like you know how many V pcs do you have sometimes it's one so if I'm just three what do think you're gonna be in a year",
    "start": "48329",
    "end": "54239"
  },
  {
    "text": "is it 20s and 30s a 500 years a thousand because you might start off with 10 then you have 20 and you figure how that goes",
    "start": "54239",
    "end": "60719"
  },
  {
    "text": "and then before you know it you got hundreds and you know it's sort of an interesting problem to go try to work on",
    "start": "60719",
    "end": "67020"
  },
  {
    "text": "and try to solve so that's that's the that's the topic for today is like you got a lot of BBC's what do you do so",
    "start": "67020",
    "end": "73490"
  },
  {
    "start": "73000",
    "end": "73000"
  },
  {
    "text": "let's start off with virtual private cloud VPC hopefully you guys know this is a foreigner level session so this is",
    "start": "73490",
    "end": "79409"
  },
  {
    "text": "my only teaching slide but they say a virtual private cloud is your closely",
    "start": "79409",
    "end": "85710"
  },
  {
    "text": "resembles your traditional network and we do it in the cloud right so that's that's mostly true",
    "start": "85710",
    "end": "91590"
  },
  {
    "text": "so if you know I've been doing a lot of networked engineering a lot of customer orkut Xers those kinds of things this is what pretty standard sort of premises",
    "start": "91590",
    "end": "98759"
  },
  {
    "text": "network looks like so you might have two data centers you might have sort of you know fibre between them you apply you",
    "start": "98759",
    "end": "104700"
  },
  {
    "text": "have some sort of wide area network or when maybe do it some MPLS but it's VPN going on so if you turn this into V PC",
    "start": "104700",
    "end": "113009"
  },
  {
    "text": "and 80s stuff it mostly fits right so we can still do VPN the the private fibre",
    "start": "113009",
    "end": "119549"
  },
  {
    "text": "sort of turns into V PC peering we'd put things into instances we connect the LAN",
    "start": "119549",
    "end": "124950"
  },
  {
    "text": "in through Atos Direct Connect and this is a mostly one-to-one sort of equivalency but there are some",
    "start": "124950",
    "end": "132209"
  },
  {
    "text": "differences so what are some of the differences with VP C's so we say it's resembles a you know",
    "start": "132209",
    "end": "139080"
  },
  {
    "start": "133000",
    "end": "133000"
  },
  {
    "text": "traditional data center but how many you guys created a you know a data center in seconds it doesn't happen right you can",
    "start": "139080",
    "end": "147360"
  },
  {
    "text": "go into the console and just keep clicking and you've now you've got like ten data centers like that doesn't happen on premises although if you do like we probably ought to hire you so",
    "start": "147360",
    "end": "155730"
  },
  {
    "text": "it's really easy to create VP C's another component is the access models so back in a prior life I used to walk",
    "start": "155730",
    "end": "162630"
  },
  {
    "text": "around in data centers I had my Cisco blue console cable and you know I could probably plug into customers routers and",
    "start": "162630",
    "end": "168630"
  },
  {
    "text": "do stuff I would never do that because it's totally wrong but I could probably do that but there was inside that datacenter there was not like a single",
    "start": "168630",
    "end": "175110"
  },
  {
    "text": "access credential that got me access to everything in the data center like I'm pretty sure that mostly because those people don't talk to each other",
    "start": "175110",
    "end": "180900"
  },
  {
    "text": "very well it's like the storage people on or whatever but there was no single credential that would get you access to everything in that data center and a V",
    "start": "180900",
    "end": "188070"
  },
  {
    "text": "PC you have a root account the root account has access to everything that's why we had to be very very careful with that root account and so that's a",
    "start": "188070",
    "end": "194820"
  },
  {
    "text": "difference one of the things is ownership so who are my network people in the room pretty good portion but",
    "start": "194820",
    "end": "202650"
  },
  {
    "text": "there's a lot of people that aren't network people that are creating networks so developers land business folks application people and they're",
    "start": "202650",
    "end": "209580"
  },
  {
    "text": "coming and they're trying to figure out how networking works and so you may end up with a scenario where those guys just",
    "start": "209580",
    "end": "214620"
  },
  {
    "text": "want their own network or end up creating their own networks and that's a difference as well because that typically doesn't happen on premises so",
    "start": "214620",
    "end": "222900"
  },
  {
    "text": "you know one of the components here that we're going to talk about is mini V pcs and this usually comes up because",
    "start": "222900",
    "end": "228390"
  },
  {
    "start": "223000",
    "end": "223000"
  },
  {
    "text": "there's a prior conversation at the customer right so there's this sort of divide that I see it's it's a gradient",
    "start": "228390",
    "end": "235620"
  },
  {
    "text": "more than a binary sort of option but do I want to have really big accounts in V",
    "start": "235620",
    "end": "240750"
  },
  {
    "text": "PCs and get sort of granular there or do want to have lots of lots of accounts with maybe their own V pcs and so",
    "start": "240750",
    "end": "246480"
  },
  {
    "text": "there's there's a couple of things what we're gonna walk through real quick so if you do those sort of large approach you know there's less infrastructure",
    "start": "246480",
    "end": "252450"
  },
  {
    "text": "there's less networks you know less accounts to set up you know obviously more on the other side whenever you",
    "start": "252450",
    "end": "258510"
  },
  {
    "text": "start getting into controlling that environment you're going to talk a lot more about Identity and Access",
    "start": "258510",
    "end": "263640"
  },
  {
    "text": "Management you know reducing roles making sure you know you're going to doing a lot of tagging you know resource restriction and controlling a lot of",
    "start": "263640",
    "end": "270550"
  },
  {
    "text": "things within that VPC because you know it's sort of a big shared environment so those are some of the things you're gonna be looking at and the the case",
    "start": "270550",
    "end": "278409"
  },
  {
    "text": "where you have lots of little V PCs or lots of accounts you know it's really more infrastructure related so it's more",
    "start": "278409",
    "end": "283900"
  },
  {
    "text": "about VPNs Direct Connect you're probably one set up some standards so that like your public subnets and your",
    "start": "283900",
    "end": "289780"
  },
  {
    "text": "private subnets have some sort of routing thing you've agreed to otherwise",
    "start": "289780",
    "end": "295000"
  },
  {
    "text": "you can run in some trouble there so you may want to think about automation and standardization there the billing you",
    "start": "295000",
    "end": "300849"
  },
  {
    "text": "know as a component here - right so in the one V PC the billing might be",
    "start": "300849",
    "end": "306400"
  },
  {
    "text": "complex there might be multiple organizations using the same thing so it's be very careful the tags those",
    "start": "306400",
    "end": "311560"
  },
  {
    "text": "kinds of things if you have lots of accounts you know each person has their own account that it's pretty easy to do",
    "start": "311560",
    "end": "316629"
  },
  {
    "text": "that you know the billing so that's that may be one component and then we can just sort of the security and blast",
    "start": "316629",
    "end": "322389"
  },
  {
    "text": "radius components which is you know what happens if that one account maybe the developer writes of for loop and just",
    "start": "322389",
    "end": "329319"
  },
  {
    "text": "forgets to do it right and just floods the API right then your production",
    "start": "329319",
    "end": "334599"
  },
  {
    "text": "people can't use the API either so then okay well let's put out development in production you get to this blast radius",
    "start": "334599",
    "end": "340330"
  },
  {
    "text": "sort of scenario as well as some of the security concerns it's like I said like the root key scares people sometimes so",
    "start": "340330",
    "end": "346930"
  },
  {
    "text": "you just be very careful with that and sometimes that's easier to manage with lots of accounts are lots of epcs so",
    "start": "346930",
    "end": "353800"
  },
  {
    "text": "well the way I usually break this down for customers there's obviously a lot of sort of ins and outs here so what I what",
    "start": "353800",
    "end": "361150"
  },
  {
    "text": "I usually sort of summarize this down is is if you if you are if you are a policy and sort of a you know access person the",
    "start": "361150",
    "end": "368319"
  },
  {
    "text": "larger bbc's are probably closer to what you're going to be good at me I'm a network guy I'm an infrastructure guy so",
    "start": "368319",
    "end": "374319"
  },
  {
    "text": "I'm totally biased here I spend a lot of time with infrastructure and network people so they they're comfortable that",
    "start": "374319",
    "end": "379900"
  },
  {
    "text": "they like building lots of networks and that's just something they've they've got sort of culture of and they know how to do so they they sort of go on this",
    "start": "379900",
    "end": "386259"
  },
  {
    "text": "orange path here of you know lots of accounts and those types of things so there's no there's no right or wrong",
    "start": "386259",
    "end": "391990"
  },
  {
    "text": "here like I said it's a gradient of sort of decisions but if you end up going",
    "start": "391990",
    "end": "397089"
  },
  {
    "text": "down the path of like one really large V PC this talks not we're gonna do much for",
    "start": "397089",
    "end": "402550"
  },
  {
    "text": "you because it pretty much already covered all the stuff you need to know if you have one V PC so you know there's",
    "start": "402550",
    "end": "409360"
  },
  {
    "text": "a lot of other sessions here this is sort of just for resource for reference most of these sessions have already",
    "start": "409360",
    "end": "414790"
  },
  {
    "start": "414000",
    "end": "414000"
  },
  {
    "text": "happened but you know go and think about you know other approaches here there's some security concerns there's",
    "start": "414790",
    "end": "420280"
  },
  {
    "text": "networking concerns a lot of ways to sort of think about this this V PC an",
    "start": "420280",
    "end": "425290"
  },
  {
    "text": "account sort of approach so what we're going to do here is we're going to focus",
    "start": "425290",
    "end": "431110"
  },
  {
    "text": "on a couple things one is you know we're really comparing things here because there's if you came here looking for",
    "start": "431110",
    "end": "437200"
  },
  {
    "text": "like the magic answer there is no magic answer it's it's design right so design is always taking trade-offs figure out",
    "start": "437200",
    "end": "443470"
  },
  {
    "text": "what's gonna be right for you and so that's really we're gonna you know plan on doing here we're focusing",
    "start": "443470",
    "end": "448510"
  },
  {
    "text": "on a couple thing one scale right because we're thinking towards hundreds of EPCs towards tens of gigabytes and",
    "start": "448510",
    "end": "454510"
  },
  {
    "text": "hundreds of gigabits of throughput at some point right what does that look like connecting V pcs and multiple sorts",
    "start": "454510",
    "end": "460540"
  },
  {
    "text": "of scenarios and when we start thinking about scale we also anything about automation so what does automation look",
    "start": "460540",
    "end": "466000"
  },
  {
    "text": "like so there's a couple different design patterns we're really gonna spend some time on we're gonna talk about the",
    "start": "466000",
    "end": "471310"
  },
  {
    "text": "transit vbc you know I think every session I've gone to so far people come up to the front they go tell me how the",
    "start": "471310",
    "end": "477430"
  },
  {
    "text": "transit UVC works or tell me about this so we're gonna get through a lot of that stuff today and there's two components to it there's sort of the transit BBC",
    "start": "477430",
    "end": "483880"
  },
  {
    "text": "there's also a component with firewalls we're gonna talk about how what does",
    "start": "483880",
    "end": "489010"
  },
  {
    "text": "this look like if you're using Direct Connect how does that impacted now we're going to talk about shared services models so if you have some sort of",
    "start": "489010",
    "end": "495250"
  },
  {
    "text": "shared service you want to share it to mini V pcs what does that look like and then also we're gonna talk about multi",
    "start": "495250",
    "end": "500830"
  },
  {
    "text": "region things so this is sort of like the blueprint of what we're gonna go down so let's get into it so this is",
    "start": "500830",
    "end": "508330"
  },
  {
    "start": "507000",
    "end": "507000"
  },
  {
    "text": "sort of our starting point right up here we've got VPN we've got Direct Connect coming into our green environment where",
    "start": "508330",
    "end": "515200"
  },
  {
    "text": "we've got a development and a production V PC so you know in this case just for the simplicity of talking about options",
    "start": "515200",
    "end": "521289"
  },
  {
    "text": "I've put both PPN and Direct Connect up there you know but this would be a highly available network you know so",
    "start": "521289",
    "end": "528130"
  },
  {
    "text": "this is this is sort of our starting point this is pretty simple this is where a lot of customers are at you know if you've got two VPN tunnels",
    "start": "528130",
    "end": "534550"
  },
  {
    "text": "or to VPN connections which is actually four tunnels helpful Direct Connect you",
    "start": "534550",
    "end": "539560"
  },
  {
    "text": "know connections in here and then I don't know then the blue group joins us the blue group they've got four V pcs so",
    "start": "539560",
    "end": "547990"
  },
  {
    "start": "543000",
    "end": "543000"
  },
  {
    "text": "they've got maybe two lines of business now you know things are starting to look a little less clean you know there's a",
    "start": "547990",
    "end": "555670"
  },
  {
    "text": "lot of connections here so you know I was talking with a customer this week where they said you know every time we",
    "start": "555670",
    "end": "561070"
  },
  {
    "text": "add a VPN connection we have to open a ticket with a networking team and they just either out of laziness or",
    "start": "561070",
    "end": "567160"
  },
  {
    "text": "contractual reasons that takes 45 days for them to do anything and so like you",
    "start": "567160",
    "end": "574029"
  },
  {
    "text": "don't want to add like we're all about agility and scale and you don't want to wait 45 days for a VPN connection so",
    "start": "574029",
    "end": "579940"
  },
  {
    "text": "that's and there's a lot of them too so some networking here's really like tunnels a lot of them don't and so you",
    "start": "579940",
    "end": "586660"
  },
  {
    "text": "would like less tunnels in a lot of cases as well let's let's talk about connecting these things because because",
    "start": "586660",
    "end": "591820"
  },
  {
    "start": "589000",
    "end": "589000"
  },
  {
    "text": "right now when these guys want to talk to each other it's going back on premises whether you're using a VPN or",
    "start": "591820",
    "end": "597880"
  },
  {
    "text": "Direct Connect you know it's going to some other device just to do for these things to talk so the you know obviously",
    "start": "597880",
    "end": "604990"
  },
  {
    "text": "vbc peering is a good idea there so let's connect let's just say we want to connect development production so well",
    "start": "604990",
    "end": "611200"
  },
  {
    "text": "that's gonna look like is we're gonna have three vbc peering connections right but then they go yeah you know actually",
    "start": "611200",
    "end": "617620"
  },
  {
    "text": "the whole blue environment really wants to talk to each other so what does that look like okay well that's just another four period connections still pretty",
    "start": "617620",
    "end": "625360"
  },
  {
    "text": "simple so if you're in the sixty PC stage you know this still makes sense",
    "start": "625360",
    "end": "630480"
  },
  {
    "text": "but what if we go beyond that what does it look like so we just we got the the",
    "start": "630480",
    "end": "637240"
  },
  {
    "text": "pink guys they just came up and the blue guys add is more stuff so now we're now",
    "start": "637240",
    "end": "642579"
  },
  {
    "text": "we're looking at other problems we've got a lot more things to add a lot more connections how is this how we scale",
    "start": "642579",
    "end": "648160"
  },
  {
    "text": "these things and so the sort of main option that we're using right now for this problem is the transit V PC so the",
    "start": "648160",
    "end": "655360"
  },
  {
    "text": "transit vbc is basically a centralization point where we've got some VPN instances and they do this or",
    "start": "655360",
    "end": "661360"
  },
  {
    "text": "the east/west and all the connectivity for this so essentially once you add a V PC to the transit V PC",
    "start": "661360",
    "end": "668110"
  },
  {
    "text": "has access to every other VPC right so what are some of the Bennett's here so",
    "start": "668110",
    "end": "674709"
  },
  {
    "start": "673000",
    "end": "673000"
  },
  {
    "text": "essential ization is a component right les tunnels easier for me to go manage that that pair of devices also scale so",
    "start": "674709",
    "end": "683529"
  },
  {
    "text": "VPN with its Goods and Bad's when the good part of VPN is it's really scalable you can do thousands of them and well",
    "start": "683529",
    "end": "689980"
  },
  {
    "text": "they work everywhere VPN works over regions and accounts and different networks so it's it's highly scalable as",
    "start": "689980",
    "end": "697690"
  },
  {
    "text": "well as you know is inter region so obviously we have had pretty exciting announcement this week about BBC peering in a region which yes that was exciting",
    "start": "697690",
    "end": "706089"
  },
  {
    "text": "to be there for that announcement so that actually has reduced the requirement for transit BBC a bit and",
    "start": "706089",
    "end": "712120"
  },
  {
    "text": "we'll get into like what that actually means but sometimes it's also about just being familiar you know like I've still got",
    "start": "712120",
    "end": "718120"
  },
  {
    "text": "like Cisco commands like on my fingers in my mechanical brain that it just can't get out some people like",
    "start": "718120",
    "end": "723399"
  },
  {
    "text": "continuing to do that so some people like what they know and that's you know one benefit as well we're gonna talk",
    "start": "723399",
    "end": "729880"
  },
  {
    "text": "about security a little bit and how firewalls get inserted so transit we V PC tends to be a pretty dominant",
    "start": "729880",
    "end": "735390"
  },
  {
    "text": "deployment model for firewalls and then also encryption we like encryption we like security and so it's a good way to",
    "start": "735390",
    "end": "741940"
  },
  {
    "text": "do things like encrypt over Direct Connect and encryption everywhere so there's there's sort of two components",
    "start": "741940",
    "end": "748779"
  },
  {
    "text": "we're gonna talk about around transit PPC the first one is the architecture so I'm gonna speak generally about how this",
    "start": "748779",
    "end": "754360"
  },
  {
    "text": "thing is built what the sort of theories and why we made these decisions and then we're gonna go out later into the",
    "start": "754360",
    "end": "761019"
  },
  {
    "text": "transit BBC automation that a OS built so we're gonna start off sorta more with the theory and the architecture so first",
    "start": "761019",
    "end": "768040"
  },
  {
    "text": "we start with V PC with the internet gateway pretty basic we we have to",
    "start": "768040",
    "end": "773170"
  },
  {
    "text": "availability zones subnet is specific to an availability zone so we create a subnet in each one we put a VPN instance",
    "start": "773170",
    "end": "780730"
  },
  {
    "text": "in each subnet pretty straight forward from there what we do is is let's add a",
    "start": "780730",
    "end": "787449"
  },
  {
    "start": "785000",
    "end": "785000"
  },
  {
    "text": "spoke to this so what we're going to do is create a VPN connection from one of these boxes so that VPN connection for",
    "start": "787449",
    "end": "795040"
  },
  {
    "text": "the purposes of you know this presentation and there's already too many lines everywhere so the VPN",
    "start": "795040",
    "end": "800980"
  },
  {
    "text": "connection when you create a VPN action actually has two VPN tunnels served time I draw a line up here it's actually two so keep that in mind when",
    "start": "800980",
    "end": "808060"
  },
  {
    "text": "we started out with VPN tunnel count for the rest of the presentation I'm just gonna sort of ignore that over that VPN",
    "start": "808060",
    "end": "814180"
  },
  {
    "text": "connection we're gonna run BGP that's doing our dynamic routing updates and from there we're able to propagate the",
    "start": "814180",
    "end": "822010"
  },
  {
    "text": "routes from that we advertise from this VPN instance into different subnets so on each route table you have the option",
    "start": "822010",
    "end": "829780"
  },
  {
    "text": "to basically propagate routes from the vgw it's basically a checkbox and so when",
    "start": "829780",
    "end": "835570"
  },
  {
    "text": "you do that when you look at the routing table you'll see now we've got a route to the 10.0 / 16 network which is in",
    "start": "835570",
    "end": "841960"
  },
  {
    "text": "this case the transit BBC and it says that it was propagated and the route is to the vgw",
    "start": "841960",
    "end": "847240"
  },
  {
    "text": "so the good part of this is that no matter what happens to those tunnels that route doesn't change the route",
    "start": "847240",
    "end": "853960"
  },
  {
    "text": "still points to the vgw it's highly available so that's a really important important component of why",
    "start": "853960",
    "end": "859330"
  },
  {
    "text": "we're using the Virtual Private gateway here so the V GW by default is going to",
    "start": "859330",
    "end": "865240"
  },
  {
    "text": "advertise the the V PC side arranged so in this case is the 10.1 / 16 and then",
    "start": "865240",
    "end": "870520"
  },
  {
    "text": "the good part here is actually this looks exactly like what you would do on premises so I just gave you the VPN like",
    "start": "870520",
    "end": "876610"
  },
  {
    "text": "primer but from the purposes of the Virtual Private Gateway it has no idea that we're doing some sort of funky",
    "start": "876610",
    "end": "882190"
  },
  {
    "text": "transit vbc thing right it thinks the transit V PC is a customer gateway it probably thinks it's on-premises or",
    "start": "882190",
    "end": "887530"
  },
  {
    "text": "something but effectively we're not doing anything different with a VPN we're using built-in functionality which",
    "start": "887530",
    "end": "894070"
  },
  {
    "text": "actually one of the nice things about this is that if this is not your V PC this is maybe the developer or someone",
    "start": "894070",
    "end": "900310"
  },
  {
    "text": "else's V PC you're using totally native services and there's nothing in there so",
    "start": "900310",
    "end": "905589"
  },
  {
    "text": "it's very easy for them to sort of have this demarcation of yeah whatever's on the other side that vgw I don't care I don't to manage it I",
    "start": "905589",
    "end": "912040"
  },
  {
    "text": "don't to do anything so that's that's a nice component so let's add another one",
    "start": "912040",
    "end": "917770"
  },
  {
    "text": "so we create a VPN connection to the other instance then let's add another",
    "start": "917770",
    "end": "922780"
  },
  {
    "text": "spoke so when we add another spoke we're gonna create two more VPN connections to the virtual private gateway so full mesh",
    "start": "922780",
    "end": "929470"
  },
  {
    "text": "basically inside of that we're gonna have a route to the vgw and",
    "start": "929470",
    "end": "935390"
  },
  {
    "text": "case you really don't need that 10.0 / 16 they really just need to know how the other spoke so for simplicity we're just",
    "start": "935390",
    "end": "942200"
  },
  {
    "text": "going to show that the 10.1 round from there the the VPN instances were going",
    "start": "942200",
    "end": "948290"
  },
  {
    "text": "to basically route to each other so in packets come over the vgw they will be",
    "start": "948290",
    "end": "953360"
  },
  {
    "text": "sent to the other spoke and you can control what gets advertised from these",
    "start": "953360",
    "end": "958640"
  },
  {
    "text": "transit VPC instances so that allows you to do some control by default we're just",
    "start": "958640",
    "end": "965060"
  },
  {
    "text": "going to assume for the rest of presentation basically that the Virtual Private Gateway we advertise is everything it receives so this can all",
    "start": "965060",
    "end": "973520"
  },
  {
    "text": "be used for the internet so some people want to centralized internet connectivity you can do that what do you do there well we just have the the",
    "start": "973520",
    "end": "981560"
  },
  {
    "text": "transit PPC advertising default route and now we can make that work and you",
    "start": "981560",
    "end": "986720"
  },
  {
    "text": "know one of the common questions I get is you know why don't you just use VPC peering it seems a lot easier than VPN",
    "start": "986720",
    "end": "992630"
  },
  {
    "start": "989000",
    "end": "989000"
  },
  {
    "text": "and it's faster and all that sort of stuff so let's let's find out why not so",
    "start": "992630",
    "end": "997790"
  },
  {
    "text": "we're gonna create a V PC parent connection from the spoke v pcs to the transit V PC and the spoke V PC we're",
    "start": "997790",
    "end": "1005050"
  },
  {
    "text": "gonna create a route basically we'll just gonna try to emulate that last slide and we're going to have a default",
    "start": "1005050",
    "end": "1010060"
  },
  {
    "text": "route to the peering connection so in this scenario it just says if if you",
    "start": "1010060",
    "end": "1015490"
  },
  {
    "text": "wanna go the internet go over the peering connection and they'll figure it out later well that doesn't work so in this case",
    "start": "1015490",
    "end": "1021670"
  },
  {
    "text": "the destination IP address is the Internet when that packet gets routed within that transit V PC it says like",
    "start": "1021670",
    "end": "1029770"
  },
  {
    "text": "hey I need to go to I don't know 54 dot something where do I go",
    "start": "1029770",
    "end": "1035290"
  },
  {
    "text": "well it says will that be the internet this doesn't work that is that is what we would call transitive routing and so",
    "start": "1035290",
    "end": "1043390"
  },
  {
    "text": "effectively if you want to think about sort of a theorem I don't know if this is a law but it's a theorem at least",
    "start": "1043390",
    "end": "1049420"
  },
  {
    "text": "that if what the way to define transitive routing is either the source",
    "start": "1049420",
    "end": "1055210"
  },
  {
    "text": "or the destination for every packet needs to be a network interface in the local V PC so in this case I'm coming in",
    "start": "1055210",
    "end": "1062650"
  },
  {
    "text": "over V PC peering and trying to go out the internet neither one of those is a network interface in the V PC",
    "start": "1062650",
    "end": "1069280"
  },
  {
    "text": "that means no bueno which is Spanish for not routing so yeah you have to worry",
    "start": "1069280",
    "end": "1077140"
  },
  {
    "text": "about that so change of routing us that's one of the reasons why were you doing this so if we go back and we take a look at this with the VPN ones up",
    "start": "1077140",
    "end": "1083799"
  },
  {
    "start": "1082000",
    "end": "1082000"
  },
  {
    "text": "happening is we've got the VPN connection the next addition is the Internet it goes to the vgw vgw terminates the",
    "start": "1083799",
    "end": "1090730"
  },
  {
    "text": "tunnel on the VPN instance and so it lands on the you know the VPN essence",
    "start": "1090730",
    "end": "1095919"
  },
  {
    "text": "here from there the VPN instance is going to afford it to the Internet in this case the source IP address or the",
    "start": "1095919",
    "end": "1101350"
  },
  {
    "text": "source is the network interface of that VPN instance so now we're winnow again",
    "start": "1101350",
    "end": "1106390"
  },
  {
    "text": "we're now forwarding so that's that sort of why we're using VPN so let's take a",
    "start": "1106390",
    "end": "1112450"
  },
  {
    "start": "1112000",
    "end": "1112000"
  },
  {
    "text": "look at you know most of time when I talk to networking to do about something I explain it you say very nice and they",
    "start": "1112450",
    "end": "1117730"
  },
  {
    "text": "go how does it break so let's find out in this case we're gonna break one of the VPN tunnels either because something",
    "start": "1117730",
    "end": "1124510"
  },
  {
    "text": "on the ATS side broke for that tunnel or someone missed configure the tunnel something happened on that that one tunnel",
    "start": "1124510",
    "end": "1129870"
  },
  {
    "text": "what is up happening here is there's some protocols there decades old dead",
    "start": "1129870",
    "end": "1135730"
  },
  {
    "text": "peer detection which runs on VPN it's on by default and BGP has their keeper",
    "start": "1135730",
    "end": "1141730"
  },
  {
    "text": "lives so from a type of timer perspective we're gonna understand that and sort of one of the nice things here",
    "start": "1141730",
    "end": "1147549"
  },
  {
    "text": "is that we're also not using any sort of proprietary failover stuff this is decades-old networking protocols and as I discussed",
    "start": "1147549",
    "end": "1156190"
  },
  {
    "text": "earlier the route inside the spoke VPC points to the vgw that VW route will automatically switch",
    "start": "1156190",
    "end": "1162850"
  },
  {
    "text": "over to the other tunnel so you don't have to do anything in the spoke VPC which is really important so let's take",
    "start": "1162850",
    "end": "1169659"
  },
  {
    "text": "another let's break something else let's kill let's kill an instance things always fail right so instance fails what",
    "start": "1169659",
    "end": "1177039"
  },
  {
    "text": "happens so both those tunnels go down and again the the spoke VP sees again",
    "start": "1177039",
    "end": "1182679"
  },
  {
    "text": "they're gonna have timers so the both those timers should detect that failure within 30 seconds as those the default",
    "start": "1182679",
    "end": "1189460"
  },
  {
    "text": "BGP timers and the default dead peer detection timers so that's on by default it's just there and that's going to work",
    "start": "1189460",
    "end": "1195940"
  },
  {
    "text": "so that's that's a really nice availability kind of concept for for AJ I've",
    "start": "1195940",
    "end": "1201789"
  },
  {
    "start": "1201000",
    "end": "1201000"
  },
  {
    "text": "want to connect on premises to this what do we do there's a few options so the",
    "start": "1201789",
    "end": "1208600"
  },
  {
    "text": "the first sort of more so obvious one is just do a VPN over the Internet we can also say well look man I don't",
    "start": "1208600",
    "end": "1215409"
  },
  {
    "text": "really like the internet but much I want to do Direct Connect I want it to be private ok old Tyrone tunnels over",
    "start": "1215409",
    "end": "1221139"
  },
  {
    "text": "Direct Connect and then we've also got this sort of this wonky thing called detached vgw and you hear this a lot",
    "start": "1221139",
    "end": "1228220"
  },
  {
    "text": "about the transit VPC specifically so let's dig into these options a little bit so the first one is going over the",
    "start": "1228220",
    "end": "1235479"
  },
  {
    "start": "1234000",
    "end": "1234000"
  },
  {
    "text": "Internet so in this case we've got our same topology we've got some on premises data center stuff and you just create",
    "start": "1235479",
    "end": "1241690"
  },
  {
    "text": "tunnels and you terminate them on a router or firewall or whatever you like on premises so that's pretty",
    "start": "1241690",
    "end": "1247779"
  },
  {
    "text": "straightforward the reasons you want to do this is we want to see on a pretty simple allows you to sort of really control that tunnel because it's",
    "start": "1247779",
    "end": "1254169"
  },
  {
    "text": "terminating on a device you have full control over it also gives you the functionality if you want to do some",
    "start": "1254169",
    "end": "1259239"
  },
  {
    "text": "other some other options for the tunneling so if you want to do GRE like an unencrypted tunnel potentially for",
    "start": "1259239",
    "end": "1265090"
  },
  {
    "text": "higher performance or if you want to use something like the the Cisco dmvpn to do is sort of a multi-point VPN you have",
    "start": "1265090",
    "end": "1271359"
  },
  {
    "text": "options of how that tunnel works but it is manually configured and operated right and it that tunnel also has to",
    "start": "1271359",
    "end": "1278080"
  },
  {
    "text": "terminate at one place or you create more tunnels if you want to terminate more places and that depend upon where",
    "start": "1278080",
    "end": "1283869"
  },
  {
    "text": "the traffic's trying to go that you know it could be a challenge for a Direct Connect I'll walk you through direct",
    "start": "1283869",
    "end": "1289269"
  },
  {
    "start": "1287000",
    "end": "1287000"
  },
  {
    "text": "Knittle bit the first step is figure out which direct connect location you want to be in from there we have some sort of",
    "start": "1289269",
    "end": "1295090"
  },
  {
    "text": "way of getting to that location so that could be at least fiber that could be a partner network you could already be in",
    "start": "1295090",
    "end": "1300460"
  },
  {
    "text": "that so if you're already in Equinix and we're in Equinix and all you needs a cross connect either way you figure out",
    "start": "1300460",
    "end": "1306460"
  },
  {
    "text": "how to get to that direct connect location through sort of networking you",
    "start": "1306460",
    "end": "1311979"
  },
  {
    "text": "put a device there that's going to do the BGP and VLAN components of Direct Connect you would create a virtual",
    "start": "1311979",
    "end": "1318220"
  },
  {
    "text": "private gateway attached to your V PC and then the last step is creating a",
    "start": "1318220",
    "end": "1324460"
  },
  {
    "text": "private virtual interface or a private if from there then you just create ahnold's so if when we think about this",
    "start": "1324460",
    "end": "1331720"
  },
  {
    "text": "design it's great because if you want to encrypt over Direct Connect this is a great way to do that so you're",
    "start": "1331720",
    "end": "1338170"
  },
  {
    "text": "using a private circuit you're getting predictable latency those types of things you can also again since you have",
    "start": "1338170",
    "end": "1344320"
  },
  {
    "text": "control of those tunnels to use alternative tunnels like giri and dmvpn but again we're still mostly manually",
    "start": "1344320",
    "end": "1349930"
  },
  {
    "text": "touching and operating this thing so let's take that same use case here we've",
    "start": "1349930",
    "end": "1355420"
  },
  {
    "start": "1353000",
    "end": "1353000"
  },
  {
    "text": "figured out our Direct Connect location we've got a device doing that stuff this time we're gonna create a virtual",
    "start": "1355420",
    "end": "1360820"
  },
  {
    "text": "private gateway we're not going to attach it to anything we just literally do to go to a virtual private gateway create new you've now created attached",
    "start": "1360820",
    "end": "1368200"
  },
  {
    "text": "vgw from there and your Direct Connect configuration you create a private",
    "start": "1368200",
    "end": "1374350"
  },
  {
    "text": "virtual interface to that virtual private gateway so it just looks like a normal again from Direct Connect they",
    "start": "1374350",
    "end": "1380440"
  },
  {
    "text": "have no idea what's attached or not it looks the same now one one note here and this has been a recent addition is",
    "start": "1380440",
    "end": "1385780"
  },
  {
    "text": "direct connect gateway requires you to attach it so this is not compatible with",
    "start": "1385780",
    "end": "1391300"
  },
  {
    "text": "Direct Connect gateway so there so then what we do is now we create VPN",
    "start": "1391300",
    "end": "1399010"
  },
  {
    "text": "connection from our VPN Asus's to the detach PGW why is would you want to do this well",
    "start": "1399010",
    "end": "1405250"
  },
  {
    "text": "what's sort of nice about this is now you can sort of consider on-premises is just another spoke so from a design",
    "start": "1405250",
    "end": "1413890"
  },
  {
    "text": "perspective it's nice and consistent right so it looks the same when we get into the automation components you know",
    "start": "1413890",
    "end": "1419890"
  },
  {
    "text": "it's a lot usually automate this because we're not doing sort of one-offs you know it's automated in the case of",
    "start": "1419890",
    "end": "1426310"
  },
  {
    "text": "our transit VPC another advantage is once the the traffic comes off this the",
    "start": "1426310",
    "end": "1432130"
  },
  {
    "text": "VPN instances on to the virtual private gateway and it goes on to the direct connect network the direct connect after",
    "start": "1432130",
    "end": "1439000"
  },
  {
    "text": "Direct Connect is your it's your it's your network so you can sort of fan that out to multiple locations all that type",
    "start": "1439000",
    "end": "1445330"
  },
  {
    "text": "of stuff so allows you to sort of fan-out out connections and the VPN termination happens closer to us you",
    "start": "1445330",
    "end": "1451120"
  },
  {
    "text": "know and further away from our premises so you can sort of go multiple places but you know if you if you do care about",
    "start": "1451120",
    "end": "1456790"
  },
  {
    "text": "encrypting your Wang connections this is would be unencrypted after it leaves the virtual private gateway so let's let's",
    "start": "1456790",
    "end": "1465010"
  },
  {
    "text": "take into automation a little bit this is sort of the cool part so if you're not familiar with cloud for me it's a service that we have that allows",
    "start": "1465010",
    "end": "1471280"
  },
  {
    "text": "you to do things like infrastructure is code essentially it's a big JSON or Yambol document that describes what your",
    "start": "1471280",
    "end": "1478030"
  },
  {
    "text": "architecture or your configuration should be so in this case we go back to",
    "start": "1478030",
    "end": "1483490"
  },
  {
    "start": "1481000",
    "end": "1481000"
  },
  {
    "text": "our sort of hub in this case we put Cisco Cloud Services routers or CSRs the",
    "start": "1483490",
    "end": "1489550"
  },
  {
    "text": "CSR is if you know Cisco IOS it's that in a ec2 instance it's available off of",
    "start": "1489550",
    "end": "1496120"
  },
  {
    "text": "marketplace or you can do you can talk to a Cisco people and get your own license we call that bring your own",
    "start": "1496120",
    "end": "1501460"
  },
  {
    "text": "license or BYO l you know one of the reasons why we chose Cisco for this",
    "start": "1501460",
    "end": "1506860"
  },
  {
    "text": "automation solution is that they inside their operating system they have support for virtual routing forwarding or brf's",
    "start": "1506860",
    "end": "1513520"
  },
  {
    "text": "which handles a special VPN case of duplicate addresses which we'll get into",
    "start": "1513520",
    "end": "1519760"
  },
  {
    "text": "that a little bit as well so let's talk about this automation looks like so",
    "start": "1519760",
    "end": "1525850"
  },
  {
    "text": "first off you have your CloudFormation template you can choose a speed and feed run it in the region of your choice from",
    "start": "1525850",
    "end": "1532810"
  },
  {
    "text": "there it's going to create what we showed earlier by default is going to use a 100 dot 64 which is a carrier",
    "start": "1532810",
    "end": "1538930"
  },
  {
    "text": "grade nat sort of special IP space you can change that it's going to create an s3 bucket so that's where we're going to",
    "start": "1538930",
    "end": "1545890"
  },
  {
    "text": "store our VPN configuration it's also going to create an s3 endpoint so that we can access that s3 bucket privately",
    "start": "1545890",
    "end": "1552190"
  },
  {
    "text": "and create the route so we can get there as well we had talked about killing instances before you can now do easy to",
    "start": "1552190",
    "end": "1560200"
  },
  {
    "text": "auto recovery so Auto recovery means if that instance fails we detect that failure at an ec2 level then whenever we",
    "start": "1560200",
    "end": "1567460"
  },
  {
    "text": "detect that we will boot it back up and start again so we added a little additional H a to our previous you know",
    "start": "1567460",
    "end": "1574300"
  },
  {
    "text": "scenario so what does it look like to add a spoke so in this case what we do",
    "start": "1574300",
    "end": "1581110"
  },
  {
    "text": "is we put a tag on the Virtual Private Gateway so when you create the CloudFormation template you can specify",
    "start": "1581110",
    "end": "1586120"
  },
  {
    "text": "what you want that tag to be so in this case the default one is transit v bc you know spoke equals true what happens is",
    "start": "1586120",
    "end": "1593500"
  },
  {
    "text": "there's a lambda a time lambda running every minute looking for that when it sees that it goes oh looks like we got",
    "start": "1593500",
    "end": "1599860"
  },
  {
    "text": "another spoke so it creates a VPN connection for that vgw from there it takes that",
    "start": "1599860",
    "end": "1605290"
  },
  {
    "text": "VPN configuration and puts in an s3 bucket on that s3 bucket we're using key",
    "start": "1605290",
    "end": "1611620"
  },
  {
    "text": "management system Edo's KMS so kms is doing server-side encryption on that bucket to make sure you know good",
    "start": "1611620",
    "end": "1618610"
  },
  {
    "text": "security practices we're encrypting things are important like VPN configurations from there the s3 bucket",
    "start": "1618610",
    "end": "1623980"
  },
  {
    "text": "there's a lambda watching at s3 bucket for changes when it detects the changes it downloads those configurations and",
    "start": "1623980",
    "end": "1630100"
  },
  {
    "text": "uses basically a Python thing to basically send those commands down to",
    "start": "1630100",
    "end": "1636160"
  },
  {
    "text": "both of the routers so there's a security group that allows that lambda function to securely communicate with",
    "start": "1636160",
    "end": "1642490"
  },
  {
    "text": "those instances so in this case the CSRs have now been given the configuration for the VPN and presto magic",
    "start": "1642490",
    "end": "1649780"
  },
  {
    "text": "we've got VPN connections and all we did was put a tag on it so this is really attractive because now people that don't",
    "start": "1649780",
    "end": "1656440"
  },
  {
    "text": "know networking you just tell them one thing like put this tag on it poof magic network connections so that's",
    "start": "1656440",
    "end": "1663280"
  },
  {
    "text": "that's a really nice benefit if we want to remove this book for whatever reason looks pretty similar we just change that",
    "start": "1663280",
    "end": "1670120"
  },
  {
    "text": "tag from true to false so let the time delay no function is also looking for that so it sees that change knows what",
    "start": "1670120",
    "end": "1676510"
  },
  {
    "text": "configuration you have goes to lambda says hey go delete all the configuration and then this the csrs will delete those",
    "start": "1676510",
    "end": "1683440"
  },
  {
    "text": "VPN configuration so just in Reverse if you want to do this to another region so",
    "start": "1683440",
    "end": "1690520"
  },
  {
    "text": "if you got a VP T in another region that you would want to add to this all you have to do is just tag it",
    "start": "1690520",
    "end": "1697420"
  },
  {
    "text": "so the lambda function looks across all the regions and automatically does that so that one we're good we don't have to",
    "start": "1697420",
    "end": "1703570"
  },
  {
    "text": "do anything sort extra work there if you want to this in another account there's",
    "start": "1703570",
    "end": "1708820"
  },
  {
    "text": "a few steps we're gonna have to take so in this scenario the lambda is going to run in the the spoke account and there's",
    "start": "1708820",
    "end": "1716470"
  },
  {
    "text": "three things we have to do one is we have to setup that that vgw polar that lambda function we need to allow a",
    "start": "1716470",
    "end": "1722020"
  },
  {
    "text": "bucket access so it can access the bucket in the other region and it also needs to add allow kms access so the",
    "start": "1722020",
    "end": "1729910"
  },
  {
    "text": "first step here is is doing the polar so the way this works is with there's a separate cloud formation",
    "start": "1729910",
    "end": "1736000"
  },
  {
    "text": "but you can run and the spoke account and that spoke account is essentially sets up the lamda sets up the timing",
    "start": "1736000",
    "end": "1743200"
  },
  {
    "text": "looking for the tag you know those types of things the next one is allowing bucket access",
    "start": "1743200",
    "end": "1749380"
  },
  {
    "text": "so we need to make sure that our s3 bucket allows this thing to function to put things in there so there's a few",
    "start": "1749380",
    "end": "1756340"
  },
  {
    "start": "1756000",
    "end": "1756000"
  },
  {
    "text": "ways to do that so this is just an example what the example code looks like you basically add another account in",
    "start": "1756340",
    "end": "1764200"
  },
  {
    "text": "your s3 bucket policy optionally when you set up the CloudFormation template",
    "start": "1764200",
    "end": "1769930"
  },
  {
    "text": "the first time the main template you can specify up to one other account that you want to add as a spoke if you do that",
    "start": "1769930",
    "end": "1776140"
  },
  {
    "text": "this happens sort of automatically as well for kms kms needs write access to",
    "start": "1776140",
    "end": "1783940"
  },
  {
    "text": "this bucket so you add another account ID to your key policy and again same",
    "start": "1783940",
    "end": "1790900"
  },
  {
    "start": "1785000",
    "end": "1785000"
  },
  {
    "text": "thing if if you want to do this that it's set up you can allow one other account and the CloudFormation template",
    "start": "1790900",
    "end": "1796660"
  },
  {
    "text": "and do that otherwise you can go edit this this key policy so we've done those",
    "start": "1796660",
    "end": "1802660"
  },
  {
    "text": "three steps presto magic we've got V pcs running in another account right so",
    "start": "1802660",
    "end": "1809650"
  },
  {
    "text": "let's talk security a little bit so I know this conference I've had a lot of conversations about you know firewalls",
    "start": "1809650",
    "end": "1814810"
  },
  {
    "text": "and inspection and how how do you do that in the transit V PC so let's take a look at putting firewalls there instead",
    "start": "1814810",
    "end": "1821560"
  },
  {
    "text": "of VPN as this is doing routing so you know first the first thing is like why",
    "start": "1821560",
    "end": "1828040"
  },
  {
    "start": "1825000",
    "end": "1825000"
  },
  {
    "text": "and we asked that a lot you know because just because you can doesn't mean you should it's sort of a",
    "start": "1828040",
    "end": "1834040"
  },
  {
    "text": "you know a lot of the questions I get with customers around they have firewalls and you know the cloud in",
    "start": "1834040",
    "end": "1839590"
  },
  {
    "text": "general so you know my opinion is that there's probably a lot of people who went to a database to get away from",
    "start": "1839590",
    "end": "1846250"
  },
  {
    "text": "their firewalls so you know operational things you're doing with your firewalls are actually important so just because",
    "start": "1846250",
    "end": "1852430"
  },
  {
    "text": "the technology works you also make sure your operations in your automation because you know we're just gonna be back in that same thing where you know",
    "start": "1852430",
    "end": "1858520"
  },
  {
    "text": "you put in a change and now the firewall engineer takes 45 days to make a security change instead of the network",
    "start": "1858520",
    "end": "1864310"
  },
  {
    "text": "guy and so be careful about that sort of thing but the types of customer use cases I'm seeing for",
    "start": "1864310",
    "end": "1870050"
  },
  {
    "text": "or maybe abs is considered like an untrusted data center maybe it's for bursting or whatever reason or they just",
    "start": "1870050",
    "end": "1875750"
  },
  {
    "text": "don't trust ATS yet so they want to put a firewall and inspect everything that",
    "start": "1875750",
    "end": "1882860"
  },
  {
    "text": "usually goes away after time by the way they tend to trust us as they start users meeting us more there's also compliance requirements",
    "start": "1882860",
    "end": "1889340"
  },
  {
    "text": "around intrusion detection intrusion prevention sometimes contractual sometimes security controls",
    "start": "1889340",
    "end": "1894520"
  },
  {
    "text": "there's also security organizations really like like next-gen firewall and",
    "start": "1894520",
    "end": "1901130"
  },
  {
    "text": "application level policy inspection those types of things sometimes that's the requirement as well you know once",
    "start": "1901130",
    "end": "1907880"
  },
  {
    "text": "you start doing this you if you've got 100 V pcs you probably don't want a hundred firewalls so like how do you",
    "start": "1907880",
    "end": "1914600"
  },
  {
    "text": "centralize that and it also helps you get more visibility sometimes when you centralize that too so this that's why this tends to be a",
    "start": "1914600",
    "end": "1920510"
  },
  {
    "text": "pretty common pattern so if you go back to our diagram now we've replaced the VPN it's this is with firewalls and it's",
    "start": "1920510",
    "end": "1928550"
  },
  {
    "start": "1922000",
    "end": "1922000"
  },
  {
    "text": "mostly the same one of the big differences is that firewalls are stateful that's sort of like their whole",
    "start": "1928550",
    "end": "1934429"
  },
  {
    "text": "purpose so what you want to do is do a s path prepend on the firewall so that one",
    "start": "1934429",
    "end": "1940340"
  },
  {
    "text": "of the firewalls is a more preferred route you can do that with the routers as well if you like you know determinism",
    "start": "1940340",
    "end": "1946100"
  },
  {
    "text": "and knowing which in your routers is active passive both firewalls it's a basically a requirement so let's talk",
    "start": "1946100",
    "end": "1953750"
  },
  {
    "start": "1953000",
    "end": "1953000"
  },
  {
    "text": "about some issues here too right so there's this issue of duplicate tunnel addresses so like I said that's one of the reasons why we chose to see its are",
    "start": "1953750",
    "end": "1960020"
  },
  {
    "text": "for the transit PPC so if we take a look at this a little bit deeper when we create the VPN connection there's a VPN",
    "start": "1960020",
    "end": "1966920"
  },
  {
    "text": "configuration that gets pushed down to the firewall to create the VPN connection if we look inside this guy",
    "start": "1966920",
    "end": "1972429"
  },
  {
    "text": "we'll see something like this so this is just example Palo Alto configuration so",
    "start": "1972429",
    "end": "1979520"
  },
  {
    "text": "up top and below we've got a 169 dot 254 address it's a slash 30 point-to-point",
    "start": "1979520",
    "end": "1985480"
  },
  {
    "text": "that address is randomly generated by the Virtual Private Gateway so that's",
    "start": "1985480",
    "end": "1991400"
  },
  {
    "text": "good we don't to do any work but let's create the other VPN connection now to the other vgw that vgw doesn't know",
    "start": "1991400",
    "end": "1997670"
  },
  {
    "text": "anything about the other vgw they don't talk they're separate so he also randomly generates a config",
    "start": "1997670",
    "end": "2004029"
  },
  {
    "text": "raishin and in this case we roll the dice and we got unlucky the both of these V GWS gave us the same address so",
    "start": "2004029",
    "end": "2011619"
  },
  {
    "text": "they're both expecting us use one six nine two two fifty 4.45 to ten so now",
    "start": "2011619",
    "end": "2017169"
  },
  {
    "text": "we've got options we could we could just try again we could delete that VPN configuration and just create a new one",
    "start": "2017169",
    "end": "2024039"
  },
  {
    "text": "roll the dice and hope for something better the way the math works house is sort of",
    "start": "2024039",
    "end": "2029379"
  },
  {
    "text": "interesting it's the birthday problem your statistics person so there's three hundred sixty six unique birthdays at",
    "start": "2029379",
    "end": "2036239"
  },
  {
    "text": "more than I think about twenty two people in the room someone's gonna share a birthday so I'm pretty sure some of",
    "start": "2036239",
    "end": "2041320"
  },
  {
    "text": "you guys share birthdays but the same math applies here and basically somewhere mathematically speaking",
    "start": "2041320",
    "end": "2047919"
  },
  {
    "text": "someone were like eight to ten VP sees you have about a 50% chance of getting overlapping address on a new VPN",
    "start": "2047919",
    "end": "2054429"
  },
  {
    "text": "configuration so firewalls typically don't support duplicate addresses on",
    "start": "2054429",
    "end": "2060908"
  },
  {
    "text": "their interfaces so I've got some good news maybe six weeks ago or so we sort",
    "start": "2060909",
    "end": "2068710"
  },
  {
    "start": "2063000",
    "end": "2063000"
  },
  {
    "text": "of quietly announced this feature to define your own tunnel address on your VPN configuration so in here you can",
    "start": "2068710",
    "end": "2075010"
  },
  {
    "text": "assign both the inside Sider for both tunnels that allows you to define your",
    "start": "2075010",
    "end": "2080679"
  },
  {
    "text": "own address now you do have to do some basic IP management to make sure that you're not giving yourself the same address twice but you do have the",
    "start": "2080679",
    "end": "2087368"
  },
  {
    "text": "control to create your own addresses on the VPN configurations this also applies if you're doing lots of VPNs back on",
    "start": "2087369",
    "end": "2093669"
  },
  {
    "text": "premises so if you have like one big router that has a VPN configuration too and I've I've seen it with customers",
    "start": "2093669",
    "end": "2099039"
  },
  {
    "text": "that have VPNs to hundreds of e pcs if you take that approach because you're one of the people that likes tunnels",
    "start": "2099039",
    "end": "2104829"
  },
  {
    "text": "this also it makes that life easier for on-premises VPN cool so there's another",
    "start": "2104829",
    "end": "2112000"
  },
  {
    "start": "2110000",
    "end": "2110000"
  },
  {
    "text": "approach here that that we see is okay well why are we using the virtual private gateway can I just put another",
    "start": "2112000",
    "end": "2117490"
  },
  {
    "text": "VPN instance in the spoke VPC and do VPN there and the answer is yes you can do it but it works a little bit differently",
    "start": "2117490",
    "end": "2124299"
  },
  {
    "text": "so in this case we put a VPN instance and each of the spoke fee pcs and what",
    "start": "2124299",
    "end": "2130299"
  },
  {
    "text": "we've done is we've created a route table entry to the network interface of that instance now you could you know",
    "start": "2130299",
    "end": "2137680"
  },
  {
    "text": "run multiple instances and and there's some other high availability tricks around you know moving the network",
    "start": "2137680",
    "end": "2142960"
  },
  {
    "text": "interfaces or moving routes but we're not really gonna get into that but you'll need to figure that out as part",
    "start": "2142960",
    "end": "2148300"
  },
  {
    "text": "of this so you know this is good for you know to get you even more control",
    "start": "2148300",
    "end": "2153730"
  },
  {
    "text": "because now you know you don't wait on the vgw and you have full control that instance and you can do whatever you",
    "start": "2153730",
    "end": "2158980"
  },
  {
    "text": "want you can do all sorts of tunneling you can also do other functions like firewalls so you can put firewalls in",
    "start": "2158980",
    "end": "2165849"
  },
  {
    "text": "the spoke VP C's but now now we're managing things right like ATS likes to",
    "start": "2165849",
    "end": "2172599"
  },
  {
    "text": "have managed services customers like managed services what I've found so now I've got to manage these instances or",
    "start": "2172599",
    "end": "2178180"
  },
  {
    "text": "firewalls in each V PC so you want to think very carefully about how you're going to do that automation is important",
    "start": "2178180",
    "end": "2184300"
  },
  {
    "text": "right but you know one of the things I said before is if this is not your V PC",
    "start": "2184300",
    "end": "2189609"
  },
  {
    "text": "you know if this is developer you've now put an instance in there V PC you know like man I don't want an instance of my",
    "start": "2189609",
    "end": "2195369"
  },
  {
    "text": "V PC that's not mine it's yours and I don't like it so it's you know it's not",
    "start": "2195369",
    "end": "2200650"
  },
  {
    "text": "native it's a little bit more intrusive than that V PC but you know if the way if you figure out the policy you can",
    "start": "2200650",
    "end": "2205960"
  },
  {
    "text": "sort of make that stuff work and one of other things you want to think about is how you gonna get routes into those",
    "start": "2205960",
    "end": "2211089"
  },
  {
    "text": "routing tables so if there's a default route it sort of makes sense but if you're doing some sort of BGP we no",
    "start": "2211089",
    "end": "2216730"
  },
  {
    "text": "longer have that sort of convenient checkbox feature to propagate routes so that makes a little bit more challenging",
    "start": "2216730",
    "end": "2222339"
  },
  {
    "text": "if you have sort of complex routing requirements that need to go to this this instance near V PC so we've got",
    "start": "2222339",
    "end": "2230170"
  },
  {
    "text": "another sort of design here around this so if we expand this out a little bit and maybe we've got multiple",
    "start": "2230170",
    "end": "2235210"
  },
  {
    "text": "availability zones and what we're gonna do here is we're gonna put a firewall or an instance in every availability zone",
    "start": "2235210",
    "end": "2240910"
  },
  {
    "text": "or potentially every subnet depending upon what you want to do and what we do is then do a full mesh VPN configuration",
    "start": "2240910",
    "end": "2247540"
  },
  {
    "text": "for all these guys so why would you do something crazy like this so in you also",
    "start": "2247540",
    "end": "2253420"
  },
  {
    "text": "have the routes pointing to each network interface but it's it's really scalable right like there's no limit Tommy like",
    "start": "2253420",
    "end": "2259720"
  },
  {
    "text": "instances you can have in this like just go crazy there the tunnels like I said tunnels are highly scalable so you can",
    "start": "2259720",
    "end": "2265869"
  },
  {
    "text": "do that if you have a firewall or innocence in each availability zone",
    "start": "2265869",
    "end": "2271690"
  },
  {
    "text": "then you know if you lose one of those then you lose one availability zones hopefully you're running applications",
    "start": "2271690",
    "end": "2276970"
  },
  {
    "text": "that can support that level of failover if not this you know may have some issues for you but if you've got it you",
    "start": "2276970",
    "end": "2282579"
  },
  {
    "text": "know applicational will failover you can lose one or one of these and it should just route around it should be",
    "start": "2282579",
    "end": "2288460"
  },
  {
    "text": "fine from application perspective you know some of the other component you want to think about is ganas centralized",
    "start": "2288460",
    "end": "2294520"
  },
  {
    "text": "management and overhead you know if you're choosing a sort of solution that",
    "start": "2294520",
    "end": "2300819"
  },
  {
    "text": "uses this type of design they typically have that but you do want to sort of keep that in mind the negatives are if",
    "start": "2300819",
    "end": "2307480"
  },
  {
    "text": "you guys pay for firewalls you guys know that it's typically by the box so now we've got lots of boxes so we've",
    "start": "2307480",
    "end": "2313150"
  },
  {
    "text": "increased our licensing costs another one is just sort of like the high management overhead right like I said",
    "start": "2313150",
    "end": "2318640"
  },
  {
    "text": "managed services are nice when we can use those and the route propagations still a problem I do want to get a shout",
    "start": "2318640",
    "end": "2324160"
  },
  {
    "text": "out here - - Barracuda because they actually just changed their licensing model to be bandwidth based so that box",
    "start": "2324160",
    "end": "2329440"
  },
  {
    "text": "based licensing is not there so it's a nice little feature to help out so let's",
    "start": "2329440",
    "end": "2335020"
  },
  {
    "text": "talk about the rest of the ecosystem so I talked about Barracuda there's some other folks you know obviously we took we chose the Cisco CSR when we built",
    "start": "2335020",
    "end": "2341260"
  },
  {
    "start": "2336000",
    "end": "2336000"
  },
  {
    "text": "this solution out so there's a lot of folks here that do sort of more routing based functionality using the vgw so if",
    "start": "2341260",
    "end": "2349390"
  },
  {
    "text": "they're using our VPN product as the spoke and there's a bunch of people doing firewalls - so this whole group of",
    "start": "2349390",
    "end": "2356619"
  },
  {
    "text": "folks but effectively you know really anyone that's doing both bgp and VPN and they could support that to our virtual",
    "start": "2356619",
    "end": "2362980"
  },
  {
    "text": "private gateway it really could be anybody if there's some other logo that I missed here and there's another sort",
    "start": "2362980",
    "end": "2370240"
  },
  {
    "text": "of group of people that are doing this instance based sort of transit VPC and",
    "start": "2370240",
    "end": "2375730"
  },
  {
    "text": "and this is basically anyone can just do tunnels because just instances with tunnels will join each other right so if",
    "start": "2375730",
    "end": "2382300"
  },
  {
    "text": "we then we can actually classify these further by the law of automation so I'm",
    "start": "2382300",
    "end": "2387579"
  },
  {
    "text": "going to start with the folks that what I would do consider like continuous automation so this is sort of the transit VPC where you know you're",
    "start": "2387579",
    "end": "2393520"
  },
  {
    "text": "getting tags and you're seeing it and things just sort of happen automatically so these folks in orange are sort of on",
    "start": "2393520",
    "end": "2399970"
  },
  {
    "text": "that there's these other folks in blue that you know they have a confirmation template to spin up",
    "start": "2399970",
    "end": "2405430"
  },
  {
    "text": "sort of your first transit vbc but then usually you have to do something per spoke manually or some clicking is",
    "start": "2405430",
    "end": "2410859"
  },
  {
    "text": "involved and then you know all the folks in green is basically sort of they may",
    "start": "2410859",
    "end": "2416319"
  },
  {
    "text": "have some tools or it may be sort of do-it-yourself but like I said anyway they can do like BGP and and tunneling",
    "start": "2416319",
    "end": "2421480"
  },
  {
    "text": "and VPN can build a transit VPC but then it's really about the automation component cool so I got bored I made the",
    "start": "2421480",
    "end": "2433839"
  },
  {
    "text": "cool animation but let's let's talk about the cost scale that type of stuff",
    "start": "2433839",
    "end": "2439319"
  },
  {
    "text": "let's go that's another question I get a lot of so let's dig in a little bit there so this is our transit vbc let's",
    "start": "2439319",
    "end": "2446500"
  },
  {
    "start": "2444000",
    "end": "2444000"
  },
  {
    "text": "go down so per spoke there's a charge per VPN connection so there's two VPN",
    "start": "2446500",
    "end": "2453640"
  },
  {
    "text": "connections in this this design so double the hourly cost per spoke there's",
    "start": "2453640",
    "end": "2459550"
  },
  {
    "text": "also the egress charge to the transit vbc there is also aggress at the transit",
    "start": "2459550",
    "end": "2469089"
  },
  {
    "text": "busey itself so traffic that's either going back on premises over VPN or Direct Connect or out to the spokes",
    "start": "2469089",
    "end": "2476079"
  },
  {
    "text": "coming maybe from there so there's some transit charges there inside the transit vbc itself there's obviously the ec2",
    "start": "2476079",
    "end": "2482710"
  },
  {
    "text": "charges of those two instances and any may be licensing costs or you can also use open source but that's there as well",
    "start": "2482710",
    "end": "2489720"
  },
  {
    "text": "if we take a look at some of the performance I work really closely with a",
    "start": "2489720",
    "end": "2495040"
  },
  {
    "start": "2492000",
    "end": "2492000"
  },
  {
    "text": "Cisco team so they helped give me some of these numbers and testing they've done on their platform so this is",
    "start": "2495040",
    "end": "2501660"
  },
  {
    "text": "basically what you'd expect from a performance perspective mostly for reference I don't expect really anyone",
    "start": "2501660",
    "end": "2507309"
  },
  {
    "text": "to memorize this but do you want to call out one thing is that the packet sizes for this are you know basically perfect",
    "start": "2507309",
    "end": "2514059"
  },
  {
    "text": "packets you know 1,500 1,400 byte packets so if you're not sitting those that you may not get these numbers so",
    "start": "2514059",
    "end": "2520329"
  },
  {
    "text": "let's dig in a little bit there so we got our familiar nice strands of DBC again basically from a security",
    "start": "2520329",
    "end": "2526720"
  },
  {
    "start": "2521000",
    "end": "2521000"
  },
  {
    "text": "perspective we really recommend using security groups inside the V PC that's going to save bandwidth costs and make",
    "start": "2526720",
    "end": "2533410"
  },
  {
    "text": "your life a little simpler if you can each spoke it's gonna have to VPN to VPN",
    "start": "2533410",
    "end": "2540150"
  },
  {
    "text": "configurations and so each VPN tunnel itself can do about one and a quarter",
    "start": "2540150",
    "end": "2546359"
  },
  {
    "text": "gigs roughly you know you might get more you might get less depending on packet size if you have more than 100 V pcs",
    "start": "2546359",
    "end": "2554850"
  },
  {
    "text": "you're gonna run into routing table limitations because by default each spoke V PC advertises its site or range",
    "start": "2554850",
    "end": "2561510"
  },
  {
    "text": "and it gets really tight out to everyone else so at 100 V pcs you'll need to",
    "start": "2561510",
    "end": "2566850"
  },
  {
    "text": "change that routing so you can customize that or you could just create another pod of transit bbc's each of these CSRs",
    "start": "2566850",
    "end": "2575490"
  },
  {
    "text": "or VPN instances and this is basically true across everyone on that slide I had with the pretty colors and stuff",
    "start": "2575490",
    "end": "2581160"
  },
  {
    "text": "everyone's somewhere between about one to three gigabits per second depending upon packet size so sort of think about",
    "start": "2581160",
    "end": "2587670"
  },
  {
    "text": "that as you think scaling out as well for high-performance applications that",
    "start": "2587670",
    "end": "2593760"
  },
  {
    "text": "maybe that bandwidth limit seems low you can still use UPC peering right you can still do that for direct connectivity",
    "start": "2593760",
    "end": "2599660"
  },
  {
    "text": "you know maybe on a one-off perspective so that's still pretty easy to do it",
    "start": "2599660",
    "end": "2605280"
  },
  {
    "text": "makes it more manageable and you know sort of on an EDA basis alright but",
    "start": "2605280",
    "end": "2611010"
  },
  {
    "text": "we're talking we're still thinking like hundreds and thousands of e pcs what we do now because some of these limits don't seem that high well we just make",
    "start": "2611010",
    "end": "2618960"
  },
  {
    "start": "2617000",
    "end": "2617000"
  },
  {
    "text": "more so you have one transit EVC great another one you know when you do this",
    "start": "2618960",
    "end": "2625020"
  },
  {
    "text": "you probably want and this could be multi region this could be in the same region you know one thing you want to",
    "start": "2625020",
    "end": "2630510"
  },
  {
    "text": "think about also here is you probably use different tags so by default your movies the same tag so you really want",
    "start": "2630510",
    "end": "2636570"
  },
  {
    "text": "to have you want have different tags for",
    "start": "2636570",
    "end": "2642810"
  },
  {
    "text": "different transit PBC's so think about that and then to get east-west connectivity between these things you",
    "start": "2642810",
    "end": "2648210"
  },
  {
    "text": "know just create some tunnels between between them and that's sort of how that you can scale that out cool so that's",
    "start": "2648210",
    "end": "2657420"
  },
  {
    "text": "what I've got on transit BBC's you know obviously it took me a while to sort of get there it's pretty complex but",
    "start": "2657420",
    "end": "2662460"
  },
  {
    "text": "obviously there's lot of value there so let's talk about Direct Connect because a different sort of way to think about",
    "start": "2662460",
    "end": "2667740"
  },
  {
    "text": "this so here what we've got is on-premises on the line we've got our sort of VP sees on the",
    "start": "2667740",
    "end": "2674220"
  },
  {
    "start": "2669000",
    "end": "2669000"
  },
  {
    "text": "right we've chosen our Direct Connect location we've got a customer router as an ADA best router so this is pretty",
    "start": "2674220",
    "end": "2680880"
  },
  {
    "text": "simple right so basically for each PPC you create a private virtual interface for Biff",
    "start": "2680880",
    "end": "2686280"
  },
  {
    "text": "that's a VLAN and a BGP peering session you can get up to 50 virtual interfaces",
    "start": "2686280",
    "end": "2692339"
  },
  {
    "text": "on a single port for that's for one in 10 gig direct connects for just the",
    "start": "2692339",
    "end": "2698010"
  },
  {
    "text": "purposes of good practice we're gonna make this highly available and you know we're gonna create two more virtual",
    "start": "2698010",
    "end": "2703230"
  },
  {
    "text": "interfaces to each Virtual Private gateway and there's a there's actually a lot more sessions like Steve Seymour has",
    "start": "2703230",
    "end": "2708540"
  },
  {
    "text": "a deep dive on Direct Connect and VPN if you're really curious about how this works and how you set this up there's there's a lot more information on that but we're gonna focus on the scale here",
    "start": "2708540",
    "end": "2715770"
  },
  {
    "text": "so for that physical port get you to 50 virtual interfaces which translates to 50 v pcs there's also that physical port",
    "start": "2715770",
    "end": "2724859"
  },
  {
    "start": "2723000",
    "end": "2723000"
  },
  {
    "text": "is 50 so we also have a feature called link aggregation or lag so you can link aggregate up to four links per Direct",
    "start": "2724859",
    "end": "2733410"
  },
  {
    "text": "Connect so that now multiplies by the 50 so that's now at 200 so that's a little",
    "start": "2733410",
    "end": "2739170"
  },
  {
    "text": "trick to get you higher than that so you you may want to think about that as in terms of your bandwidth do you prefer to",
    "start": "2739170",
    "end": "2744750"
  },
  {
    "text": "one gig ports that both have 50 or 110 gig board that has 50 you know you can do some math there and figure out what",
    "start": "2744750",
    "end": "2751170"
  },
  {
    "text": "your requirements are and then we've got this new thing called you recognize gateway which actually makes this better",
    "start": "2751170",
    "end": "2756770"
  },
  {
    "start": "2753000",
    "end": "2753000"
  },
  {
    "text": "so the ones starting point that at this point we have to talk about is it needs",
    "start": "2756770",
    "end": "2762000"
  },
  {
    "text": "to be in the same account so that is what you need to think about but from here what we do is we created Direct",
    "start": "2762000",
    "end": "2767970"
  },
  {
    "text": "Connect gateway we create one virtual interface from each of our routers and then we attach those vgw to the direct",
    "start": "2767970",
    "end": "2775200"
  },
  {
    "text": "connect gateway so this scales up pretty high you right now when it launched to",
    "start": "2775200",
    "end": "2780569"
  },
  {
    "text": "think it was 30 but now it's 10 so you can you can launch up to 10 virtual private gateways per Direct Connect",
    "start": "2780569",
    "end": "2787859"
  },
  {
    "text": "gateway so that's that's nice and scalable if your accounts and the math all works out the right way we have 50",
    "start": "2787859",
    "end": "2794280"
  },
  {
    "text": "virtual interfaces so I can go to 50 Direct Connect gateways those Direct Connect gateways can each scale out to",
    "start": "2794280",
    "end": "2800280"
  },
  {
    "text": "10 V pcs so that gets you to 500 on a single physical port so that's a",
    "start": "2800280",
    "end": "2805590"
  },
  {
    "text": "it's a big increase in we're pretty happy about that so direct next gateway is pretty exciting it also works",
    "start": "2805590",
    "end": "2812040"
  },
  {
    "start": "2811000",
    "end": "2811000"
  },
  {
    "text": "multiple regions so multi-region connectivity you create a couple V B C's in another region you just do the same",
    "start": "2812040",
    "end": "2817260"
  },
  {
    "text": "thing you attach the Virtual Private Gateway with a little fast so it looks basically the same so this is really",
    "start": "2817260",
    "end": "2823800"
  },
  {
    "text": "nice so now you can connect if you have Direct Connect in one location you can now connect privately all over the world",
    "start": "2823800",
    "end": "2830540"
  },
  {
    "text": "pretty awesome so let's talk about shared services so shared services vb c",
    "start": "2830540",
    "end": "2836730"
  },
  {
    "start": "2836000",
    "end": "2836000"
  },
  {
    "text": "s are pretty common i see these these typically have workloads like maybe a Microsoft ad server or maybe you've got",
    "start": "2836730",
    "end": "2844140"
  },
  {
    "text": "a DevOps toolset that you really like or maybe you've got a logging and monitoring server security services",
    "start": "2844140",
    "end": "2849690"
  },
  {
    "text": "those kinds of things and what we typically see here is you know BBC peering so you create all those things",
    "start": "2849690",
    "end": "2856890"
  },
  {
    "text": "in one V PC you do vb c peering to all of your application or spoke TB sees it",
    "start": "2856890",
    "end": "2862770"
  },
  {
    "text": "mostly works you know there are a couple challenges with it so in this case we've got we're back to sort of our 5e PCs and",
    "start": "2862770",
    "end": "2870420"
  },
  {
    "start": "2865000",
    "end": "2865000"
  },
  {
    "text": "we've got our shared services there's a couple things that we can approve here so first off is you're pretty much",
    "start": "2870420",
    "end": "2876120"
  },
  {
    "text": "allowing full V PC configuration between the two so it's a pretty blunt instrument in terms of routing you can",
    "start": "2876120",
    "end": "2882120"
  },
  {
    "text": "get more specific with your route tables and those kinds of things but you're basically you're basically allowing both bbc's to talk to each other if you just",
    "start": "2882120",
    "end": "2889410"
  },
  {
    "text": "want to talk to one service it's a little bit inefficient there as well do many developers in the room okay okay I",
    "start": "2889410",
    "end": "2897330"
  },
  {
    "text": "won't say anything mean but if our developers I don't know just accepted",
    "start": "2897330",
    "end": "2902940"
  },
  {
    "text": "the defaults on all their V pcs and we have duplicate addresses we actually",
    "start": "2902940",
    "end": "2908130"
  },
  {
    "text": "can't peer these things anymore so that that can become a challenge whenever you",
    "start": "2908130",
    "end": "2913140"
  },
  {
    "text": "want create some sort of shared resource unless you really really like NAT you know you can double mat and all that",
    "start": "2913140",
    "end": "2918480"
  },
  {
    "text": "sort of stuff yeah I've heard a little snicker yeah thanks I think people have tried that before and then also if we're",
    "start": "2918480",
    "end": "2925590"
  },
  {
    "text": "thinking scale we can only really go up to 125 for this so after 125 V pcs",
    "start": "2925590",
    "end": "2932280"
  },
  {
    "text": "either we need to duplicate this shared services V PC or we need to start using Internet connectivity or something like",
    "start": "2932280",
    "end": "2938700"
  },
  {
    "text": "that so we launched this week a feature called private link so we really said a",
    "start": "2938700",
    "end": "2944610"
  },
  {
    "text": "couple weeks ago and that was for a two best services so for like the ec2 API our load balancing API etc but what's",
    "start": "2944610",
    "end": "2951180"
  },
  {
    "text": "interesting now is that for customers and partners you can create your own endpoint in your own VB C's so the way",
    "start": "2951180",
    "end": "2957540"
  },
  {
    "text": "this works is up top we've got sort of in this case what we're gonna call the shared services VP see we've got some sort of resource in",
    "start": "2957540",
    "end": "2965100"
  },
  {
    "text": "this case let's just call it an API because it's sort of simple to visualize and down in the bottom we've got our",
    "start": "2965100",
    "end": "2971040"
  },
  {
    "text": "spoke so what we do is we put a network load balancer in front of these these API servers that's going to do our load",
    "start": "2971040",
    "end": "2977130"
  },
  {
    "text": "balancing we associate that network load balancer with an endpoint service so in",
    "start": "2977130",
    "end": "2982980"
  },
  {
    "text": "this network load balancer also gets a single IP address per availability zone so that's sort of nice if you like the",
    "start": "2982980",
    "end": "2988140"
  },
  {
    "text": "virtual IP concept from here we create the endpoint and those IP addresses just",
    "start": "2988140",
    "end": "2993810"
  },
  {
    "text": "sort of magically show up and the other VPC and so and these use addresses from",
    "start": "2993810",
    "end": "3000440"
  },
  {
    "text": "that that spoke VP sees cider range so in this case we're 172 16 up top we're",
    "start": "3000440",
    "end": "3005990"
  },
  {
    "text": "10.1 on the bottom the IP addresses are in the 10.1 space they just pull sort of",
    "start": "3005990",
    "end": "3011150"
  },
  {
    "text": "random address there but it's a local IP address so you know what one thing and",
    "start": "3011150",
    "end": "3016250"
  },
  {
    "text": "the way this sort of works is that you know it's unidirectional access so the spoke BBC is allowed to request the",
    "start": "3016250",
    "end": "3023060"
  },
  {
    "text": "client VPC and obviously you know responses as part of the TCP connection come back but things up top can't",
    "start": "3023060",
    "end": "3028640"
  },
  {
    "text": "initiate connections down to the bottom so that's good from a security services because if someone gets control of my",
    "start": "3028640",
    "end": "3034640"
  },
  {
    "text": "API server they can't do anything to all my spokes which is different than BBC peering so that's nice from a security",
    "start": "3034640",
    "end": "3041240"
  },
  {
    "text": "perspective one of the other advantages here is if we've got sort of another spoke maybe our kind developers created",
    "start": "3041240",
    "end": "3047869"
  },
  {
    "text": "another VPC and they also created 10.1 / 16 this works so you don't have to worry",
    "start": "3047869",
    "end": "3054170"
  },
  {
    "text": "about it because it's unidirectional sort of functionality this just works so",
    "start": "3054170",
    "end": "3059200"
  },
  {
    "text": "you know you can do overlapping addresses with this service so that's nice and you can see in this case I",
    "start": "3059200",
    "end": "3065660"
  },
  {
    "text": "randomly chose some other addresses for this 10.1 just to show that you know there's some randomness there but the",
    "start": "3065660",
    "end": "3070670"
  },
  {
    "text": "way this actually works is inside that VPC you'll get basically a DNS name for",
    "start": "3070670",
    "end": "3075920"
  },
  {
    "text": "this service and in each V PC that DNS name is going to resolve to those IP addresses in s spoke V PC so I'm going",
    "start": "3075920",
    "end": "3082670"
  },
  {
    "text": "to API example.com it's going to resolve to ten dot one dot two or whatever is",
    "start": "3082670",
    "end": "3088040"
  },
  {
    "text": "something in my local V PC so it's split horizon DNS so that's the way that functionality actually works so this",
    "start": "3088040",
    "end": "3096980"
  },
  {
    "text": "also scales out to thousands of V pcs so again this is the same thing we're using for our services so the ec2 API as you",
    "start": "3096980",
    "end": "3104570"
  },
  {
    "text": "can imagine helps thousands of customers do that and you've now got the same scalability when you build services so",
    "start": "3104570",
    "end": "3112070"
  },
  {
    "text": "there's also a design for this using the transit V PC so I see this fairly often and just sort of like we made our",
    "start": "3112070",
    "end": "3119180"
  },
  {
    "text": "on-premises Network look like a spoke we can also make the shared services just a spoke so again it just sort of works",
    "start": "3119180",
    "end": "3124940"
  },
  {
    "text": "you'll have to worry too much just one note I do see some people wanting to put the shared services UPC inside the",
    "start": "3124940",
    "end": "3131000"
  },
  {
    "text": "transit vbc I tend not to prefer that simply because it changes the the access",
    "start": "3131000",
    "end": "3136400"
  },
  {
    "text": "model you now have to worry about routing to local network interfaces and you're now back in the game of shifting",
    "start": "3136400",
    "end": "3142430"
  },
  {
    "text": "routes and shifting network interfaces those kinds of things so this is really the model I I prefer but like I said man",
    "start": "3142430",
    "end": "3149060"
  },
  {
    "text": "I'm just just my opinion man so let's compare this compared to some of these",
    "start": "3149060",
    "end": "3154160"
  },
  {
    "start": "3152000",
    "end": "3152000"
  },
  {
    "text": "options so probably link is really sort of the place you should be starting so if you can provide services through",
    "start": "3154160",
    "end": "3160430"
  },
  {
    "text": "private link it's a better way to do this but it is unidirectional does use",
    "start": "3160430",
    "end": "3165829"
  },
  {
    "text": "our network load balancers so those are sort of dependencies that you need to think about but you know if you got overlapping addresses it's really handy",
    "start": "3165829",
    "end": "3172280"
  },
  {
    "text": "to do that BBC peering is sort of you know it's still there it's still solid it still works",
    "start": "3172280",
    "end": "3177500"
  },
  {
    "text": "but you know think about the scale there and think about that security and for the transit vbc you know it's still",
    "start": "3177500",
    "end": "3184099"
  },
  {
    "text": "fairly complicated so you know you're paying a lot it's operationally more",
    "start": "3184099",
    "end": "3189619"
  },
  {
    "text": "complex than both of these but you know if you really like to transfer BBC it's",
    "start": "3189619",
    "end": "3195109"
  },
  {
    "text": "an easy way to continue doing shared services so just fits in that model pretty cleanly all right let's talk",
    "start": "3195109",
    "end": "3202069"
  },
  {
    "text": "about mental regions right so this one actually got pretty simple this is my favorite slide",
    "start": "3202069",
    "end": "3207490"
  },
  {
    "text": "because it was really simple you can you can peer multiple regions now right that's great and it just just sort of",
    "start": "3207490",
    "end": "3215290"
  },
  {
    "text": "works I mean it's encrypted so we do some some pretty cool encryption things on the back end to make the the VPC peering",
    "start": "3215290",
    "end": "3223329"
  },
  {
    "text": "work so it's encrypted runs across our backbone so it just again it just works",
    "start": "3223329",
    "end": "3230200"
  },
  {
    "text": "if we compare some of the other inner region options that we talked about you",
    "start": "3230200",
    "end": "3235390"
  },
  {
    "start": "3231000",
    "end": "3231000"
  },
  {
    "text": "know direct connect gateway is great you know it was just for direct connect so if you're especially if you're in the same account it makes sense to go do",
    "start": "3235390",
    "end": "3242380"
  },
  {
    "text": "that for global connectivity for in a region peering yeah we still may have",
    "start": "3242380",
    "end": "3248200"
  },
  {
    "text": "that challenge around the fact that it's it's one-to-one but you know with all",
    "start": "3248200",
    "end": "3253329"
  },
  {
    "text": "the customer conversations I've had this week about it it's usually for like replication or a very specific use case so you may not have the requirement to",
    "start": "3253329",
    "end": "3260349"
  },
  {
    "text": "have like many to one v pc p-- earrings but it's really depend upon your your architecture and you know transit vbc a",
    "start": "3260349",
    "end": "3267549"
  },
  {
    "text": "lot of people are using the transit V PC for this today still works if you want",
    "start": "3267549",
    "end": "3274000"
  },
  {
    "text": "to you can also do it over cross region peering so you could create a cross region peering and then do VPN over that",
    "start": "3274000",
    "end": "3279460"
  },
  {
    "text": "if you really want to maybe if you want control of your keys or something like that but you know we've got a pretty",
    "start": "3279460",
    "end": "3285220"
  },
  {
    "text": "secure key story so I'm really I really hope people are using in a region peering and Direct Connect gateway here",
    "start": "3285220",
    "end": "3292829"
  },
  {
    "text": "so this is a slide I I really like so",
    "start": "3292829",
    "end": "3297839"
  },
  {
    "text": "this is so this is sort of how I usually walk down the customer conversation in terms of scale so you know between like",
    "start": "3297839",
    "end": "3305410"
  },
  {
    "text": "1 and 5 V pcs like I said most of stuff at the beginning you know really covered what you need to know it will it works",
    "start": "3305410",
    "end": "3311650"
  },
  {
    "text": "right it's pretty simple it's pretty easy to understand it's really when you start getting over that it's you know",
    "start": "3311650",
    "end": "3317319"
  },
  {
    "text": "that's when you so we're not talking about automation that's when you start what I'm talking about again it like maybe 10 to 15 v pcs that's where we run",
    "start": "3317319",
    "end": "3323049"
  },
  {
    "text": "into that duplicate address problem we start running some complexities there at",
    "start": "3323049",
    "end": "3328569"
  },
  {
    "text": "50 that's where we tend to start hitting some of our limits so that's the default",
    "start": "3328569",
    "end": "3333609"
  },
  {
    "text": "route and peering limit so you know you can get that raised up to 100",
    "start": "3333609",
    "end": "3339589"
  },
  {
    "text": "as well 50 50 50 VCS is also where we're gonna start thinking about Direct Connect gateway so that we can you know",
    "start": "3339589",
    "end": "3345710"
  },
  {
    "text": "start fanning out our virtual interfaces a little bit after 50 then we get to 100",
    "start": "3345710",
    "end": "3351739"
  },
  {
    "text": "or so at a hundred we have to start thinking about that route limitation so that's the amount of both either static",
    "start": "3351739",
    "end": "3358579"
  },
  {
    "text": "or dynamic routes that you can have in a V PC like I said the transit you see automatically advertises it to everyone",
    "start": "3358579",
    "end": "3364549"
  },
  {
    "text": "so at 100 pcs we need to go customize that either we might want to advertise like the entire RFC 1918 range or we",
    "start": "3364549",
    "end": "3371930"
  },
  {
    "text": "might want to advertise a default route out of the transit BBC so that you know we don't overrun that route limit 125",
    "start": "3371930",
    "end": "3380180"
  },
  {
    "text": "that's where BBC peering that's the maximum for any given V PC so after that",
    "start": "3380180",
    "end": "3386690"
  },
  {
    "text": "we may have to start either using private link or start using or duplicating services or using the",
    "start": "3386690",
    "end": "3392059"
  },
  {
    "text": "internet and at 200 that's where you know maybe we did a four by lag so",
    "start": "3392059",
    "end": "3397969"
  },
  {
    "text": "that's sort of our virtual interface limit at that point so it said Nick you told me you were to talk about thousands",
    "start": "3397969",
    "end": "3404150"
  },
  {
    "text": "of V pcs okay let's do it the answer is straightforward but not",
    "start": "3404150",
    "end": "3409809"
  },
  {
    "text": "use the internet right the internet is inherently scalable and there's there's",
    "start": "3409809",
    "end": "3416210"
  },
  {
    "text": "a couple tips here you know so because it's really about security once you start going over the internet there's a",
    "start": "3416210",
    "end": "3421849"
  },
  {
    "text": "couple hints here so secure protocols so use SSH you know use use TLS use secure",
    "start": "3421849",
    "end": "3430609"
  },
  {
    "text": "protocols make sure the authentication is strong as well so don't use passwords please use the access use the the",
    "start": "3430609",
    "end": "3438019"
  },
  {
    "text": "certificates and keys as part of this so that we don't have leaked passwords a",
    "start": "3438019",
    "end": "3443799"
  },
  {
    "text": "bastion host or a very common sort of approach here essentially for what that is is basically an instance that is open",
    "start": "3443799",
    "end": "3450440"
  },
  {
    "text": "to the Internet but it's sort of your jump post so you can sort of control that a little more tightly and allow that access to your resources and that",
    "start": "3450440",
    "end": "3457549"
  },
  {
    "text": "Bastion host is just on the internet you can do that private link is also a really good option here because of",
    "start": "3457549",
    "end": "3463039"
  },
  {
    "text": "because again because of the scale of thousands so that's one of the reasons why we really like that feature cool so",
    "start": "3463039",
    "end": "3469640"
  },
  {
    "text": "let's let's talk a couple little tips and tricks it's a little bit of a little detail here so I guess I've",
    "start": "3469640",
    "end": "3477290"
  },
  {
    "text": "been Network guy for a while you know I spent a lot of time with customers historically that we're buying hardware and they go like okay well do I need the",
    "start": "3477290",
    "end": "3484850"
  },
  {
    "text": "3 or the 6 for the 9 or the 12 version of this thing like what's my network bandwidth going to be and you know 7",
    "start": "3484850",
    "end": "3491480"
  },
  {
    "text": "years because that's how long our hardware lasts so I need to figure out what our network bandwidth it's gonna be you know I'm gonna spend months and",
    "start": "3491480",
    "end": "3497060"
  },
  {
    "text": "months looking at this and price comparison and you have to do that anymore like stuff changes like you can you can",
    "start": "3497060",
    "end": "3504320"
  },
  {
    "text": "we bill you by the second now so you can just test it out try it see if it doesn't work you know we also released",
    "start": "3504320",
    "end": "3509450"
  },
  {
    "text": "like a bunch of features here - you know this week so things change pretty often so even just the recommendations I give",
    "start": "3509450",
    "end": "3516080"
  },
  {
    "text": "for this type of network architecture they seem to be changing every six months right we're releasing new",
    "start": "3516080",
    "end": "3521750"
  },
  {
    "text": "features partners releasing new features scales changing and so like trying to",
    "start": "3521750",
    "end": "3527060"
  },
  {
    "text": "create like the perfect custom architecture that's gonna get you through the cloud for the next seven",
    "start": "3527060",
    "end": "3532160"
  },
  {
    "text": "years is waste of time so really try to focus on you know probably the next year",
    "start": "3532160",
    "end": "3538010"
  },
  {
    "text": "year and a half or so depending upon your requirements and don't be afraid to sort of mix and match these things -",
    "start": "3538010",
    "end": "3543740"
  },
  {
    "text": "right like these are just recommendations so like segmenting out and also combining these things right so",
    "start": "3543740",
    "end": "3550310"
  },
  {
    "text": "you could say well this for this environment may I use trans people see this environment maybe I use inter region peer in a private link like",
    "start": "3550310",
    "end": "3555860"
  },
  {
    "text": "that's okay like you don't have to choose one of these things and testing",
    "start": "3555860",
    "end": "3561230"
  },
  {
    "text": "texting is testing super important and then you need to mix and match these things up - cool so this is mostly for",
    "start": "3561230",
    "end": "3569360"
  },
  {
    "start": "3568000",
    "end": "3568000"
  },
  {
    "text": "reference I'm gonna skip that this is how you can customize some of these",
    "start": "3569360",
    "end": "3574400"
  },
  {
    "start": "3572000",
    "end": "3572000"
  },
  {
    "text": "things there's some lambda functions and then you can use tags and some use cases",
    "start": "3574400",
    "end": "3579710"
  },
  {
    "text": "you can order your customization - so this isn't day let's so we didn't really",
    "start": "3579710",
    "end": "3585710"
  },
  {
    "text": "talk to me a customer use case so Vicente is gonna talk about hit what they're doing and how they customize it",
    "start": "3585710",
    "end": "3591260"
  },
  {
    "text": "oh thank you very much Nick hi everyone the same to the Luke I work for it a network engineering team at Zendesk",
    "start": "3591260",
    "end": "3597500"
  },
  {
    "text": "where most of my job is make sure that packets move fast from A to B without any laws and also in a cost-effective",
    "start": "3597500",
    "end": "3604310"
  },
  {
    "text": "way so for those of you how any people knows end a seer well that's",
    "start": "3604310",
    "end": "3610070"
  },
  {
    "text": "great so for those of you who don't know I'm inviting you to check our website we are a company that builds software for",
    "start": "3610070",
    "end": "3616700"
  },
  {
    "text": "customer for better customer relationship so check out our website and sign up for a trial so coming back",
    "start": "3616700",
    "end": "3623750"
  },
  {
    "text": "in 2015 this is how our internal backbone looked like we are we were a",
    "start": "3623750",
    "end": "3629750"
  },
  {
    "text": "traditional network internet shop at that time we've run data centers in",
    "start": "3629750",
    "end": "3635180"
  },
  {
    "text": "United States and Europe and we relied on multiple VPLS providers to interconnect",
    "start": "3635180",
    "end": "3640430"
  },
  {
    "text": "all of them and we also deploy BGP so we could ensure high availability between those tunnels so early in 2016 we",
    "start": "3640430",
    "end": "3649310"
  },
  {
    "text": "deployed our first V PC in Amazon and the way that we choose to interconnect",
    "start": "3649310",
    "end": "3654560"
  },
  {
    "text": "this V PC down to our existing network was by using the manage VPN over Internet and public peering and the main",
    "start": "3654560",
    "end": "3661250"
  },
  {
    "text": "reason of that is that Zendesk pretty much wasn't asking you know not loves each other so we already rely on",
    "start": "3661250",
    "end": "3667490"
  },
  {
    "text": "Internet to serve our product to our customers so why not also make sure that our machine to machine Talk can also use",
    "start": "3667490",
    "end": "3674330"
  },
  {
    "text": "the Internet and to ensure that we were high available we deployed the best practice that AWS folks already covered",
    "start": "3674330",
    "end": "3681230"
  },
  {
    "text": "in some of our older talk so we've basically run - Fargo spur data center and active standby mode this end up with",
    "start": "3681230",
    "end": "3688580"
  },
  {
    "text": "16 IPSec tunnels into this model but only four are active and we have to play with BGP prepend and local preference to",
    "start": "3688580",
    "end": "3695600"
  },
  {
    "text": "ensure that the BGP is matching the network topology so this thing worked very well and later on that year we said",
    "start": "3695600",
    "end": "3703220"
  },
  {
    "text": "well let's do an other VPC let's deploy our application closer to our customers somewhere else in the globe so things",
    "start": "3703220",
    "end": "3710900"
  },
  {
    "text": "start getting a little bit more complex here and most because when we create a new V PC with this model it requires",
    "start": "3710900",
    "end": "3718160"
  },
  {
    "text": "configuration changes in all the existing environments right and this is a big risk and it also we need to ensure",
    "start": "3718160",
    "end": "3725930"
  },
  {
    "text": "that those new V pcs talk to each other and around that time there was no V PC peer in the cross region so we had to",
    "start": "3725930",
    "end": "3733070"
  },
  {
    "text": "deploy ec2 VPN instances and now you can just replace these by V PC period but",
    "start": "3733070",
    "end": "3738680"
  },
  {
    "text": "you will still net heap need to interconnect this down to the rest of your network so again things",
    "start": "3738680",
    "end": "3745369"
  },
  {
    "text": "started working very well we are a fast-growing company so early this year this is how we start looking like so we",
    "start": "3745369",
    "end": "3751730"
  },
  {
    "text": "had four V pcs all of those tunnels and things started getting very complicated",
    "start": "3751730",
    "end": "3756770"
  },
  {
    "text": "especially when we were creating new environments right so make mention that",
    "start": "3756770",
    "end": "3761839"
  },
  {
    "text": "sometimes you have like 45 days delay on setting up new V pcs we never got that",
    "start": "3761839",
    "end": "3767900"
  },
  {
    "text": "far but we still have a little bit a lot of trouble doing that and it was time",
    "start": "3767900",
    "end": "3773839"
  },
  {
    "text": "for designing something and thinking of something else so our proposed solution here was to build a location agnostic",
    "start": "3773839",
    "end": "3780710"
  },
  {
    "text": "Network and also make this network simple and cost-effective for older people to join this so this network",
    "start": "3780710",
    "end": "3787430"
  },
  {
    "text": "should provide ipv4 and ipv6 with encryption right in full mesh topology",
    "start": "3787430",
    "end": "3793190"
  },
  {
    "text": "it needs to support on-premises data centers and multi cloud providers scalable for growth we wanted to",
    "start": "3793190",
    "end": "3799490"
  },
  {
    "text": "describe our whole network stack as code so we could fully automate bootstrap in",
    "start": "3799490",
    "end": "3805490"
  },
  {
    "text": "our rescaling and eventually self-healing in case something goes wrong and we also run kubernetes in",
    "start": "3805490",
    "end": "3810980"
  },
  {
    "text": "production at Zendesk and this is also before eks okay so we name this project",
    "start": "3810980",
    "end": "3818060"
  },
  {
    "text": "Medusa and the reason is that all of the tunnels that we were handling is it reminds the curly hair of Medusa so how",
    "start": "3818060",
    "end": "3824960"
  },
  {
    "text": "our network looks like today so we deploy what make presented is shared services VPC",
    "start": "3824960",
    "end": "3830420"
  },
  {
    "text": "where we have something like LDAP master or service discovery things and we",
    "start": "3830420",
    "end": "3836240"
  },
  {
    "text": "deploy cisco co-stars as dmvpn hubs so if you're not familiar what dmvpn is",
    "start": "3836240",
    "end": "3842210"
  },
  {
    "text": "it's basically a protocol suite to include an IPSec JRE in a jarppi and internal BGP and I'll show you how this",
    "start": "3842210",
    "end": "3848930"
  },
  {
    "text": "thing works so let's say we want to connect our datacenter to this model so",
    "start": "3848930",
    "end": "3854240"
  },
  {
    "text": "our data center would apply to routers running iOS XE and we configure them in",
    "start": "3854240",
    "end": "3860150"
  },
  {
    "text": "a vanilla Cisco - Cisco dmvpn and the configuration at the hubs one minute",
    "start": "3860150",
    "end": "3866510"
  },
  {
    "text": "okay we're short on time so I'll try again real fast here so the configuration at hubs does never change",
    "start": "3866510",
    "end": "3872599"
  },
  {
    "text": "it's everything and let's say that we're now connecting a V PC this is the secret sauce of our",
    "start": "3872599",
    "end": "3879259"
  },
  {
    "text": "solution here so we deploy what we call the Medusa routers the Medusa router is a Linux box",
    "start": "3879259",
    "end": "3884720"
  },
  {
    "text": "and we've deployed the easing to an Audi scaling group and we've set up some open",
    "start": "3884720",
    "end": "3889729"
  },
  {
    "text": "source software that represent VPN stack and we also have some custom Python code",
    "start": "3889729",
    "end": "3895549"
  },
  {
    "text": "to propagate those BGP routes that we learn from the network to AWS routing table some of the motivations that we",
    "start": "3895549",
    "end": "3903079"
  },
  {
    "text": "have it's mostly because this is very portable so we can make this work whatever it runs Linux and let's say",
    "start": "3903079",
    "end": "3910190"
  },
  {
    "text": "that this V PC needs to talk to my data center now the way it works is spoke a sends a packet to spoke B through the",
    "start": "3910190",
    "end": "3917059"
  },
  {
    "text": "hub the hub will send a redirect message back to spoke a and say hey you should better build a direct tunnel to spoke B",
    "start": "3917059",
    "end": "3923720"
  },
  {
    "text": "so further communication will take the direct path and let's say we're now one to scale NV pcs using the dmvpn model",
    "start": "3923720",
    "end": "3931670"
  },
  {
    "text": "this is how it looks initially when they come online but as the traffic converges we now build those dynamic yellow",
    "start": "3931670",
    "end": "3938869"
  },
  {
    "text": "tunnels and as you can see we have multiple tunnels from one V PC to the order so they can also load balancing",
    "start": "3938869",
    "end": "3945559"
  },
  {
    "text": "across it so the way that we deployed is in Zendesk we are a big fan of hashing",
    "start": "3945559",
    "end": "3951200"
  },
  {
    "text": "for terraform so everything is automated in Hashi Corp we also leverage Packer",
    "start": "3951200",
    "end": "3956479"
  },
  {
    "text": "for building a custom ami where we have all of our open source daemons configured in the Linux box and to build",
    "start": "3956479",
    "end": "3963589"
  },
  {
    "text": "a new V PC we require six parameters so you can just input those six parameters hit terraform apply enter and wait like",
    "start": "3963589",
    "end": "3970519"
  },
  {
    "text": "five minutes your V PC will be up and running all connect to the rest so the",
    "start": "3970519",
    "end": "3975559"
  },
  {
    "text": "deployment state is around this is we're in progress of moving from legacy to the new one some of the performance tasks",
    "start": "3975559",
    "end": "3982489"
  },
  {
    "text": "that we run we could increase almost ten times the true put compared to the",
    "start": "3982489",
    "end": "3987769"
  },
  {
    "text": "legacy model using manage V PC VP M sorry and if you're doing this at",
    "start": "3987769",
    "end": "3993049"
  },
  {
    "text": "home there are some challenges here you will need an iPad or a lambda solution to give an ID turn out an x IP if you're",
    "start": "3993049",
    "end": "4001599"
  },
  {
    "text": "reaching the route table limit of a hundred you will want to advertise all",
    "start": "4001599",
    "end": "4006880"
  },
  {
    "text": "the RFC 1918 routes and stay tuned at early next year because we intend to",
    "start": "4006880",
    "end": "4013930"
  },
  {
    "text": "open source this tack and also write a blog article in the battery detail so thank you very much for your time okay",
    "start": "4013930",
    "end": "4024670"
  },
  {
    "text": "all right well we're just gonna skip through the rest of the slides here went a little bit over on time so yeah thank",
    "start": "4024670",
    "end": "4031720"
  },
  {
    "text": "everybody we'll take questions up here up front and thank you for coming",
    "start": "4031720",
    "end": "4037079"
  }
]