[
  {
    "start": "0",
    "end": "23000"
  },
  {
    "text": "all right everybody welcome to my talk here migrating the League of Legends",
    "start": "0",
    "end": "5190"
  },
  {
    "text": "platform and the AWS cloud I appreciate everyone coming and spending their first session with me here at the gaming track",
    "start": "5190",
    "end": "11450"
  },
  {
    "text": "this is a exciting time to talk about a project we did started maybe a little",
    "start": "11450",
    "end": "17010"
  },
  {
    "text": "bit over a year ago and then kind of go through the results about how how we got to where we're at today so before we get",
    "start": "17010",
    "end": "23730"
  },
  {
    "start": "23000",
    "end": "23000"
  },
  {
    "text": "started a little bit about myself my name is Rob Cameron I'm a senior infrastructure engineer here at Riot",
    "start": "23730",
    "end": "28980"
  },
  {
    "text": "Games this is not unfortunately my first job I've been doing this for over 15 years and network security and systems",
    "start": "28980",
    "end": "35130"
  },
  {
    "text": "my primary focus I'm originally from Detroit so friends Detroiters out there welcome as well",
    "start": "35130",
    "end": "40910"
  },
  {
    "text": "also used to write books primarily around security products it was a really",
    "start": "40910",
    "end": "46200"
  },
  {
    "text": "fun and exciting time but now I take all that time to write code for me starting",
    "start": "46200",
    "end": "52379"
  },
  {
    "text": "in the industry many many years ago my very first job was working in a Security",
    "start": "52379",
    "end": "57629"
  },
  {
    "text": "Operations Center where we did management of firewalls for various customers so I had two jobs when I first",
    "start": "57629",
    "end": "63840"
  },
  {
    "text": "started there you know just getting start in the industry they sat me down and showed me this reporting server where they collected logs from all these",
    "start": "63840",
    "end": "70080"
  },
  {
    "text": "customers they were like okay your first job is every day this folder fills up and then you have to come in in the",
    "start": "70080",
    "end": "75960"
  },
  {
    "text": "morning and drag these files into this other folder and that seemed really ridiculous because you know even though",
    "start": "75960",
    "end": "82439"
  },
  {
    "text": "this was a long time ago we had the ability to automatically copy files so my second task was to build firewalls in",
    "start": "82439",
    "end": "90180"
  },
  {
    "text": "the Detroit area we had something called the automotive Network exchange which every customer a provider to the big the",
    "start": "90180",
    "end": "95970"
  },
  {
    "text": "automotive companies had to have a checkpoint firewall so we'd have to take sit down build you know whatever type of",
    "start": "95970",
    "end": "101970"
  },
  {
    "text": "UNIX flavor or Windows NT the customers want and I would spend about on eight hours a day changing disks moving around and I asked",
    "start": "101970",
    "end": "109259"
  },
  {
    "text": "like hey you know this is really repetitive can't I just automate it they're like no you can't do it because we build by the hour so please at least",
    "start": "109259",
    "end": "115380"
  },
  {
    "text": "take 8 to 10 hours to do this so after doing that for a couple of years and eventually again going out and deploying",
    "start": "115380",
    "end": "121350"
  },
  {
    "text": "those I really got passionate about automation for me I think of automation and infrastructure as like a symphony",
    "start": "121350",
    "end": "127799"
  },
  {
    "text": "you start off with a few tools kicking off some different tasks whether it's deploying hosts or",
    "start": "127799",
    "end": "133380"
  },
  {
    "text": "configuring systems and then ultimately all of the different players in the orchestra come together and it makes",
    "start": "133380",
    "end": "139170"
  },
  {
    "text": "just you know ultimately a beautiful sound to have something deployed I'm sure we've all been to that point where",
    "start": "139170",
    "end": "144240"
  },
  {
    "text": "we used to go and install systems by floppy or CD nowadays again I could literally right now if do a demo and",
    "start": "144240",
    "end": "151380"
  },
  {
    "text": "launched a thousand servers in every region in AWS in the world and maybe hit a couple buttons so I think we've come a",
    "start": "151380",
    "end": "157410"
  },
  {
    "text": "long way and it's really exciting to see that also love League of Legends hope maybe there's some fans here with it as",
    "start": "157410",
    "end": "162960"
  },
  {
    "text": "well mr. crapper most different regions and why it's because I really give a crap",
    "start": "162960",
    "end": "169560"
  },
  {
    "text": "about our compliers so what are we trying to solve here of course there's",
    "start": "169560",
    "end": "175170"
  },
  {
    "text": "an end game but for us League of Legends started nearly around seven eight years ago and then we had",
    "start": "175170",
    "end": "182790"
  },
  {
    "text": "hope that somebody would play it and then literally overnight you know the players and the CCU or concurrent user",
    "start": "182790",
    "end": "190050"
  },
  {
    "text": "count ramped up and just shot through the roof and people were just scratching their head and they're like we've got to",
    "start": "190050",
    "end": "195630"
  },
  {
    "text": "get servers everywhere all the time and so for years we were just deploying servers you know by hand and then",
    "start": "195630",
    "end": "202110"
  },
  {
    "text": "through some automation and then eventually had datacenter locations all around the world and this was great",
    "start": "202110",
    "end": "207990"
  },
  {
    "text": "just because we were able to reach the players and meet their capacity then the problem came is now we have all of these",
    "start": "207990",
    "end": "213810"
  },
  {
    "text": "weird servers all over the place different sets of automation different tooling we need to clean this up and",
    "start": "213810",
    "end": "219870"
  },
  {
    "text": "make this more operate able for the long run so that way we can most importantly get more features to the players as fast",
    "start": "219870",
    "end": "225930"
  },
  {
    "text": "as possible for those of you who don't know League of Legends has done a two-week release cycle for some time and",
    "start": "225930",
    "end": "232770"
  },
  {
    "text": "what we want to do is always release new features new capabilities into the game and by having to manage and you know get",
    "start": "232770",
    "end": "239430"
  },
  {
    "text": "a server in some location it definitely makes it very hard for us to do that and so we wanted to take what is a league of",
    "start": "239430",
    "end": "247770"
  },
  {
    "start": "246000",
    "end": "246000"
  },
  {
    "text": "Legends shard which is a geographically geographical you specifically set",
    "start": "247770",
    "end": "253080"
  },
  {
    "text": "location for players and this is done for a few reasons one may be some local",
    "start": "253080",
    "end": "258359"
  },
  {
    "text": "laws around how we need to get content into us into a location and the number two is most importantly is getting the",
    "start": "258359",
    "end": "264390"
  },
  {
    "text": "platform and the game servers as close to the players possible league of Legends is a MOBA",
    "start": "264390",
    "end": "269720"
  },
  {
    "text": "game where we have to have ten players playing very rapidly together and then the lower the latency the better the",
    "start": "269720",
    "end": "275840"
  },
  {
    "text": "experience we have some locations such as in Korea where it's all sub ten milliseconds it makes me wish I lived in",
    "start": "275840",
    "end": "282349"
  },
  {
    "text": "Korea because that'd be a great plant gaming experience and then some locations like in the United States",
    "start": "282349",
    "end": "287509"
  },
  {
    "text": "which is very geographically diverse and so we have a league of target latency",
    "start": "287509",
    "end": "293030"
  },
  {
    "text": "for around 60 milliseconds and that will give you your best player experience I can always tell you that lower is better",
    "start": "293030",
    "end": "299080"
  },
  {
    "text": "but the average at least giving everybody an equal share experience I think is very important so the shard",
    "start": "299080",
    "end": "305330"
  },
  {
    "text": "consists of three main categories here one which we'll be talking about primarily today is the platform now the",
    "start": "305330",
    "end": "311840"
  },
  {
    "text": "platform a very creative name is basically all of the services you would use to get into the game logging in",
    "start": "311840",
    "end": "318979"
  },
  {
    "text": "chatting with other players doing matchmaking end of game statistics all these key things come together in the",
    "start": "318979",
    "end": "325370"
  },
  {
    "text": "platform and then most of that is a monolithic set of processes and packages",
    "start": "325370",
    "end": "330380"
  },
  {
    "text": "and so that became a bit of a pain and when to migrate and manage and we'll talk about how we did that the other",
    "start": "330380",
    "end": "336380"
  },
  {
    "text": "part is is that to get players features more rapidly making changes to large code bases that could cause bugs could",
    "start": "336380",
    "end": "342530"
  },
  {
    "text": "cause issues is a huge issue for a huge problem for us so we've migrated many of the services over into micro services",
    "start": "342530",
    "end": "349310"
  },
  {
    "text": "and then we use something called the our cluster or which is the riot container engine this is a custom set of different",
    "start": "349310",
    "end": "355880"
  },
  {
    "text": "tools and capabilities and if you'd like to learn more about that on the riot engineering blog just google that we",
    "start": "355880",
    "end": "362210"
  },
  {
    "text": "have multiple blogs about talking about that architecture and how it all came together and what it does for us and then last and to me most importantly we",
    "start": "362210",
    "end": "369860"
  },
  {
    "text": "have the game servers where the players actually play the game so after logging in picking that they want to play a",
    "start": "369860",
    "end": "375020"
  },
  {
    "text": "match they'll get assigned a game server and then you're shot over and logged into to that match and then again like",
    "start": "375020",
    "end": "382880"
  },
  {
    "text": "generally those are very simple to manage the biggest challenge is how do we get them into a very specific location so players can have the best",
    "start": "382880",
    "end": "389630"
  },
  {
    "text": "possible experience now for Riot we're a global company and we like to think of",
    "start": "389630",
    "end": "395900"
  },
  {
    "text": "players all over the world and treat them as equals and so it doesn't matter if you're in Russia and fear in China if you're in",
    "start": "395900",
    "end": "402770"
  },
  {
    "text": "Latin America South we want you to play the game and have a good time with your friends and then also you know give you",
    "start": "402770",
    "end": "409070"
  },
  {
    "text": "the best possible experience so what we don't want to do is if you're playing in North America for example since we're",
    "start": "409070",
    "end": "414260"
  },
  {
    "text": "here we'll just keep the geography a little easier put all of the servers in Portland which is actually something we",
    "start": "414260",
    "end": "420530"
  },
  {
    "text": "originally did originally it was a great idea because we had data center space and very easy to do the problem was if",
    "start": "420530",
    "end": "427370"
  },
  {
    "text": "you were in New York your explainer expirience is not going to be very fun so we've centrally located all of the",
    "start": "427370",
    "end": "433370"
  },
  {
    "text": "the servers for North America particularly around the game servers over in the Chicago area and this gives",
    "start": "433370",
    "end": "440210"
  },
  {
    "text": "players about an equal latency now on this map we see three different colors one being red or the riot regions these",
    "start": "440210",
    "end": "447800"
  },
  {
    "text": "are all regions that are controlled by us so I'm one of the folks who would able to maintain build and and support",
    "start": "447800",
    "end": "455060"
  },
  {
    "text": "these areas the other two regions are our partner companies one being green ax which is primarily in Southeast Asia and",
    "start": "455060",
    "end": "461180"
  },
  {
    "text": "we do a code maintain maintenance with them primarily they're run everything I would say 80 to 90 percent but will",
    "start": "461180",
    "end": "466970"
  },
  {
    "text": "often assist on various things or changes that come down the pipeline and then last we have China certainly last",
    "start": "466970",
    "end": "474590"
  },
  {
    "text": "and certainly not least and this is run by our parent company Tencent so for",
    "start": "474590",
    "end": "480410"
  },
  {
    "text": "them we would simply ship the code to them on the regular regular release schedule and they would maintain all the",
    "start": "480410",
    "end": "485420"
  },
  {
    "text": "backend systems they do a great job of sharing how all of that works none of which I will share today but very easy",
    "start": "485420",
    "end": "492530"
  },
  {
    "text": "for us to manage because we simply to ship them code now for launching a shard",
    "start": "492530",
    "end": "499690"
  },
  {
    "start": "497000",
    "end": "497000"
  },
  {
    "text": "this is a huge Herculean task the problem you know isn't necessarily just",
    "start": "499690",
    "end": "505670"
  },
  {
    "text": "technical it's also integrating with all the various teams at Riot we have the concept of tonal ownership so if we spin",
    "start": "505670",
    "end": "512539"
  },
  {
    "text": "up a team that wants to make the new feature who creatively call it foo and they want to pick using Scala and you",
    "start": "512540",
    "end": "518900"
  },
  {
    "text": "know some old version of Java or something crazy you know maybe that's not crazy enough they have the total right to do that and then they have the",
    "start": "518900",
    "end": "525530"
  },
  {
    "text": "timeline about how they want to deploy it and this is great because that team has the ability to take that code",
    "start": "525530",
    "end": "531020"
  },
  {
    "text": "maintain it love it do whatever they want to it to provide player feature and are totally given",
    "start": "531020",
    "end": "536570"
  },
  {
    "text": "control of that situation and if it goes down or has an issue they're the ones who are going to take that on call the",
    "start": "536570",
    "end": "542300"
  },
  {
    "text": "problem then being is that you have dozens of teams doing a lot of different things and how they want to do it based upon their time schedules and this is",
    "start": "542300",
    "end": "549410"
  },
  {
    "text": "just the reality of how riot works but I again love it because players are we",
    "start": "549410",
    "end": "554450"
  },
  {
    "text": "focused on players we can do what we need to to get them working but we need to get those all aligned so initially",
    "start": "554450",
    "end": "559760"
  },
  {
    "text": "here as we're going to build an environment we had to manage the configuration for each location",
    "start": "559760",
    "end": "566080"
  },
  {
    "text": "primarily all of the platform servers were managed through a chef and being",
    "start": "566080",
    "end": "571100"
  },
  {
    "text": "Riot we had a customized it a little bit which to get it to the workflow we'd want so we call that Merlin so if you",
    "start": "571100",
    "end": "576470"
  },
  {
    "text": "hear chef Romero and throughout the talk consider them somewhat equal in how they work so when we launch a shard somebody",
    "start": "576470",
    "end": "583790"
  },
  {
    "text": "would go in and configure all the various properties about how the shard would work you know certain values for",
    "start": "583790",
    "end": "589460"
  },
  {
    "text": "the currency whatnot this could be thousands of different individual tasks so someone would look at another an old",
    "start": "589460",
    "end": "595610"
  },
  {
    "text": "shard and then manually copy those over this inside of my minds you know kind of hurts a bit because obviously humans",
    "start": "595610",
    "end": "602480"
  },
  {
    "text": "unfortunately make mistakes things can happen where a shard is misconfigured and then ultimately in the end the",
    "start": "602480",
    "end": "607910"
  },
  {
    "text": "player is the one who suffers from it so this was something of a focus that we wanted to be able to fix throughout this",
    "start": "607910",
    "end": "613490"
  },
  {
    "text": "process the next part was how do we manage when we're managing that configuration you know how can we get",
    "start": "613490",
    "end": "620480"
  },
  {
    "text": "people to actually utilize it words very simple for them to contribute back to it so instead of calling me or calling",
    "start": "620480",
    "end": "626210"
  },
  {
    "text": "someone else and say hey can you update this value how do we get them to do that and keep it very simple for that process",
    "start": "626210",
    "end": "632180"
  },
  {
    "text": "the other part and I use this antiquated picture of a system here is we'd have to",
    "start": "632180",
    "end": "637400"
  },
  {
    "text": "take servers you know pick out a build get them shipped to a location rack stack cabled all of those various things",
    "start": "637400",
    "end": "644120"
  },
  {
    "text": "I mean this is not something particularly new however when you're",
    "start": "644120",
    "end": "649700"
  },
  {
    "text": "doing it against that geographic map you might have at boxes stuck in customs you",
    "start": "649700",
    "end": "655010"
  },
  {
    "text": "might have a language barrier of how to rack and stack and cable it and that would just be a lot of effort for us to",
    "start": "655010",
    "end": "661520"
  },
  {
    "text": "have to do so it was very tough and how would we be able to utilize a different service and of course",
    "start": "661520",
    "end": "667410"
  },
  {
    "text": "to talk about how we use a lot utilized AWS to get into various regions without the rack stack attack strategy here and",
    "start": "667410",
    "end": "674160"
  },
  {
    "text": "then lastly because people are people we needed a way to herd the cats and",
    "start": "674160",
    "end": "679529"
  },
  {
    "text": "wrangle those humans together to get a more streamlined process originally a shard launch could take up to nine",
    "start": "679529",
    "end": "685709"
  },
  {
    "text": "months to do which is pretty intense so you have to coordinate across all these various teams making features getting",
    "start": "685709",
    "end": "692459"
  },
  {
    "text": "them to come in and do validation getting them to ensure that what they want is set up and works the correct operating system packages whatever that",
    "start": "692459",
    "end": "700290"
  },
  {
    "text": "to me was a huge part of the the process here and getting that shard up and up and running so outside of just solving",
    "start": "700290",
    "end": "707250"
  },
  {
    "text": "code launching instances or hosts we need to manage people and come up with a process for that fortunately we had",
    "start": "707250",
    "end": "713910"
  },
  {
    "text": "another member on our team Richard who was able to do and manage that process because for people that may not have",
    "start": "713910",
    "end": "719699"
  },
  {
    "text": "been the best thing for me to automate when we initially started launching we",
    "start": "719699",
    "end": "725069"
  },
  {
    "start": "721000",
    "end": "721000"
  },
  {
    "text": "sat down and had some whiteboard discussions we were like how hard can this be we'll have a VP see we'll like connect",
    "start": "725069",
    "end": "732000"
  },
  {
    "text": "it to our LAN like have some apps and have some databases no big deal and this was a good thing to",
    "start": "732000",
    "end": "739529"
  },
  {
    "text": "go through initially because more importantly than anything else is you know our rights a large organization we",
    "start": "739529",
    "end": "746459"
  },
  {
    "text": "want to be able to get everyone on the same page and be very clear what we're doing and what our intentions are and so",
    "start": "746459",
    "end": "751740"
  },
  {
    "text": "going through various cycles of how to do things I think is really important it lets different people who have voices",
    "start": "751740",
    "end": "757560"
  },
  {
    "text": "around what they want to see get involved and it gives us time to ensure that the final design is going to be",
    "start": "757560",
    "end": "762870"
  },
  {
    "text": "important and for me a great really good takeaway is you know if you're working in AWS it's extremely simple to build",
    "start": "762870",
    "end": "768779"
  },
  {
    "text": "just about any possible topology you can imagine yeah take some time and like invest in testing and looking at what's",
    "start": "768779",
    "end": "775319"
  },
  {
    "text": "best for your environment the worst thing you want to do is like yeah this looks good you know first diagram let's",
    "start": "775319",
    "end": "781410"
  },
  {
    "text": "launch it because in the long run you're gonna have to pay the price or the pain for that tech debt if it's not the",
    "start": "781410",
    "end": "786449"
  },
  {
    "text": "actual right solution so after do going through this type of process around hey",
    "start": "786449",
    "end": "792029"
  },
  {
    "text": "what are we doing and what does the subnet look like we got very creative and spit up split up into front-end and",
    "start": "792029",
    "end": "798120"
  },
  {
    "text": "back-end services and then of course a database of that here it sounded really good at the time but",
    "start": "798120",
    "end": "804990"
  },
  {
    "text": "ultimately this was not the direction we chose to go for us again the iteration",
    "start": "804990",
    "end": "810120"
  },
  {
    "text": "process is very important for us that riots so kind of explaining why three subnets is may not be enough or may be",
    "start": "810120",
    "end": "816180"
  },
  {
    "text": "too much I think was really valuable for us one important part here is that the",
    "start": "816180",
    "end": "821640"
  },
  {
    "text": "the Direct Connect is a huge valuable service for us here at riot the platform",
    "start": "821640",
    "end": "826800"
  },
  {
    "text": "is just one of many different products that sit inside of AWS and so what we want to have is when access to various",
    "start": "826800",
    "end": "833400"
  },
  {
    "text": "services such as logging or telemetry being able to do troubleshooting and",
    "start": "833400",
    "end": "839580"
  },
  {
    "text": "access into the hosts various things like that so using Direct Connect it was critical for this project very easy for",
    "start": "839580",
    "end": "846690"
  },
  {
    "text": "us to set up and manage and we'll go over some of the caveats who ran into through this project now we've kind of",
    "start": "846690",
    "end": "854190"
  },
  {
    "text": "decided what we need to deal with and some of the challenges will have both technical and people but you know in the",
    "start": "854190",
    "end": "863610"
  },
  {
    "text": "end again it's very easy to sit down and an AWS console click some buttons and boom look I have servers call your mom",
    "start": "863610",
    "end": "869820"
  },
  {
    "text": "tell you about it like tell her about it's so exciting but in the end it's not about today it's about tomorrow it's",
    "start": "869820",
    "end": "875220"
  },
  {
    "text": "about next to the next day how are we gonna really end up managing this infrastructure is the really important question so um I've been using AWS since",
    "start": "875220",
    "end": "885200"
  },
  {
    "start": "881000",
    "end": "881000"
  },
  {
    "text": "too long honestly no just refer very long time and one of the things that I've really loved about it is it's",
    "start": "885200",
    "end": "891090"
  },
  {
    "text": "really it's all driven through an API architecture so when you're using the AWS console that's the same api's you",
    "start": "891090",
    "end": "897960"
  },
  {
    "text": "can use to do just about whatever you want and outside of the API is you can the console there's also a great AWS CLI",
    "start": "897960",
    "end": "905220"
  },
  {
    "text": "command suite you can use that literally has every possible capability or if not every capability almost all of them you",
    "start": "905220",
    "end": "912210"
  },
  {
    "text": "know new capabilities come out and sometimes they're not immediately available but it's amazing to be able to",
    "start": "912210",
    "end": "917310"
  },
  {
    "text": "do that to use it but we knew that building this coming forward you managing through the console for you",
    "start": "917310",
    "end": "923640"
  },
  {
    "text": "know building and deploying shards wasn't a positive experience for us because there's a lot of clicking and you know people make mistakes we also",
    "start": "923640",
    "end": "931080"
  },
  {
    "text": "looked at the AWS CLI and potentially using things like bash thing to be able to build out an",
    "start": "931080",
    "end": "936330"
  },
  {
    "text": "environment for us this was a very important thing to review with various folks in the team while folks like",
    "start": "936330",
    "end": "943230"
  },
  {
    "text": "people like myself have been using AWS since you know was first available not everyone else was really understand that",
    "start": "943230",
    "end": "949649"
  },
  {
    "text": "what the capabilities were what you could do inside of it so being able to iterate over from starting with some basic bash templates",
    "start": "949649",
    "end": "956100"
  },
  {
    "text": "and looking at how that works looking at you know the command line tool sets looking at the the interface",
    "start": "956100",
    "end": "961800"
  },
  {
    "text": "was great and then we also dangled in front of ourselves we're all smart software people we potentially could",
    "start": "961800",
    "end": "967589"
  },
  {
    "text": "write this these tools ourselves which is also always in my opinion a very dangerous thing to say because again",
    "start": "967589",
    "end": "974190"
  },
  {
    "text": "it's not about today it's always about tomorrow and for us tomorrow is always about the player so if we make some",
    "start": "974190",
    "end": "979290"
  },
  {
    "text": "garbage tools or things that aren't going to work for us we're gonna pay that price in the long run so with",
    "start": "979290",
    "end": "986490"
  },
  {
    "start": "985000",
    "end": "985000"
  },
  {
    "text": "managing the infrastructure we had a few different tenants that we wanted to be able to cover first and most importantly",
    "start": "986490",
    "end": "991620"
  },
  {
    "text": "for us is treating that configuration as code we want every change that we're going to do to be able to be tracked",
    "start": "991620",
    "end": "997490"
  },
  {
    "text": "tracked down to who did it track down to why it was done and being able to have",
    "start": "997490",
    "end": "1002779"
  },
  {
    "text": "also people contribute back to that code while managing all of this infrastructure is very exciting and fun",
    "start": "1002779",
    "end": "1008209"
  },
  {
    "text": "sometimes when you're working with the developer you want them to be able to express how they want to see something",
    "start": "1008209",
    "end": "1014000"
  },
  {
    "text": "and while we can talk about it in whiteboard you know honestly for me code is the ultimate source of truth because",
    "start": "1014000",
    "end": "1020029"
  },
  {
    "text": "it has a definition of how it works it has something where people can read about it and understand track it and",
    "start": "1020029",
    "end": "1025490"
  },
  {
    "text": "it's an experience that they they can enjoy to go through so instead of having somebody call me and say oh we need two",
    "start": "1025490",
    "end": "1031490"
  },
  {
    "text": "more of these servers hey how about you just do a pull request and then make that change on your own and that you",
    "start": "1031490",
    "end": "1037400"
  },
  {
    "text": "know simplify it's a process for ultimately the long term support of this infrastructure at riot we have revolving",
    "start": "1037400",
    "end": "1043790"
  },
  {
    "text": "teams so this was my second there's my third project over at riot and when",
    "start": "1043790",
    "end": "1049429"
  },
  {
    "text": "we're doing that I may go on in three months to work on another project based upon what my skill sets are needed so as",
    "start": "1049429",
    "end": "1055250"
  },
  {
    "text": "we have people that rotate inside of teams and out of teams we want something that no in one individual can own but",
    "start": "1055250",
    "end": "1061640"
  },
  {
    "text": "it's more owned by the organization and so the harder we make that the harder it is to support it early again in Mike",
    "start": "1061640",
    "end": "1068750"
  },
  {
    "text": "I used to jump and hey what do you need like let's build this this tool in this environment and it was great because we",
    "start": "1068750",
    "end": "1075440"
  },
  {
    "text": "got everything done and everyone was really happy except for me who would get the call after call after call to be",
    "start": "1075440",
    "end": "1080750"
  },
  {
    "text": "able to maintain some crazy script or some crazy tool or some weird albatross design that could barely get off the",
    "start": "1080750",
    "end": "1086690"
  },
  {
    "text": "ground and so I want something that you know again I can move on do a lot of the things and then other people can come in",
    "start": "1086690",
    "end": "1092390"
  },
  {
    "text": "and be able to take on that support so this is all great when we're thinking about just AWS or any sort of cloud",
    "start": "1092390",
    "end": "1099530"
  },
  {
    "text": "provider but there are regions where using AWS may not be a positive",
    "start": "1099530",
    "end": "1104960"
  },
  {
    "text": "experience for us and that's not specific because of AWS it's specific because where we need to place servers",
    "start": "1104960",
    "end": "1110450"
  },
  {
    "text": "so a league of legends is hugely popular for example in Vietnam and that's somewhere where the closest AWS region",
    "start": "1110450",
    "end": "1118130"
  },
  {
    "text": "to us a Singapore and while it's somewhat geographically close it's definitely in my opinion very far away",
    "start": "1118130",
    "end": "1124100"
  },
  {
    "text": "and so those are locations where we're gonna have to do bare-metal deploys and that's something that there's just no",
    "start": "1124100",
    "end": "1129770"
  },
  {
    "text": "other way around doing that and so while we're building this toolset I would love to say a hundred percent you know we can",
    "start": "1129770",
    "end": "1136010"
  },
  {
    "text": "only use AWS like it solves every need it just may not be possible so we didn't want to use the tool say like AWS CLI",
    "start": "1136010",
    "end": "1142480"
  },
  {
    "text": "that would be very specific to that environment we wanted something that would empower us to use AWS but also to",
    "start": "1142480",
    "end": "1149660"
  },
  {
    "text": "be able to you know potentially use other cloud providers as different regions show up and I'm sure there'll be some cool announcements coming out this",
    "start": "1149660",
    "end": "1156170"
  },
  {
    "text": "week but no spoilers because I don't know them but you know again like for",
    "start": "1156170",
    "end": "1161540"
  },
  {
    "text": "example Google compute engine has a location in Taiwan which is something that could be beneficial to us those are",
    "start": "1161540",
    "end": "1167450"
  },
  {
    "text": "things we want to be able to take advantage of it and the most importantly again this isn't about me this isn't about our team this isn't about riot",
    "start": "1167450",
    "end": "1173990"
  },
  {
    "text": "this is about the player so if I have to do this and I'm going to increase the amount of time it takes to launch a shard it's that's bad for the player and",
    "start": "1173990",
    "end": "1181490"
  },
  {
    "text": "that's not what riot is all about so we want the ability to very quickly ship and make changes as needed so if I make",
    "start": "1181490",
    "end": "1186950"
  },
  {
    "text": "a tool pipeline that takes you know five days to do a change we don't know if it works it's not a win for us and so how",
    "start": "1186950",
    "end": "1193610"
  },
  {
    "text": "do we take all of that and and build all of these these tenants together and do our tool sets so the first thing we",
    "start": "1193610",
    "end": "1199760"
  },
  {
    "text": "looked at was how do we build a.m. eyes build images and this may seem you know",
    "start": "1199760",
    "end": "1205100"
  },
  {
    "text": "a bit strange because you know honestly there's a lot of positive you know publicly available supported a.m. eyes",
    "start": "1205100",
    "end": "1210200"
  },
  {
    "text": "from different providers riot particularly uses CentOS for most of our Linux infrastructure and of course we do",
    "start": "1210200",
    "end": "1216500"
  },
  {
    "text": "use some windows for our game servers which is not particularly applicable to this but we wanted a way to build a very",
    "start": "1216500",
    "end": "1223550"
  },
  {
    "text": "customized ami that was designed exactly how we would be able to use it in a bare-metal environment and previously we",
    "start": "1223550",
    "end": "1231290"
  },
  {
    "text": "used to have a tool called rims or riot image management service I'm sure your companies you all you may name them",
    "start": "1231290",
    "end": "1237020"
  },
  {
    "text": "something based upon the company name so everything begins with our look much like our cluster and so when we did that",
    "start": "1237020",
    "end": "1243200"
  },
  {
    "text": "we had a workflow that people understood how we build images and we required very customized images unfortunately",
    "start": "1243200",
    "end": "1249200"
  },
  {
    "text": "sometimes we couldn't run the latest up-to-date CentOS or the latest up-to-date Windows so we needed a",
    "start": "1249200",
    "end": "1254360"
  },
  {
    "text": "pipeline to be able to do that we started playing and ultimately ended up using Packer for this process although a",
    "start": "1254360",
    "end": "1260660"
  },
  {
    "text": "few of my team members who shall not be named did build some images by hand which made me very sad building this",
    "start": "1260660",
    "end": "1266300"
  },
  {
    "text": "process allowed us to have our configuration for our images as code a lot of other people to see what we were doing if someone had a strange or a",
    "start": "1266300",
    "end": "1273530"
  },
  {
    "text": "legacy script and they needed to adult put into the build environment to set some kernel settings or whatnot is very",
    "start": "1273530",
    "end": "1279080"
  },
  {
    "text": "easy for them to contribute back into it ultimately this started with building the awsm eyes for this project but we",
    "start": "1279080",
    "end": "1287179"
  },
  {
    "text": "use it also for building some VMware environments VirtualBox for testing and then for our new imaging system we use",
    "start": "1287179",
    "end": "1293960"
  },
  {
    "text": "Canonical's moss and so also they have a pipeline to build images for that what's also great is outside of just our",
    "start": "1293960",
    "end": "1300800"
  },
  {
    "text": "infrastructure platform team other teams also started using Packer for their needs and this is really for my opinion",
    "start": "1300800",
    "end": "1309590"
  },
  {
    "text": "where the wins happen is now we have an not only a tool but an ecosystem of collaboration so if you're working on",
    "start": "1309590",
    "end": "1315950"
  },
  {
    "text": "something that maybe IT infrastructure for engineering I want you know their idea is to be able to come out in their",
    "start": "1315950",
    "end": "1322550"
  },
  {
    "text": "best practices to come out so I can use them I want to share mine with them and then ultimately in the end we build this",
    "start": "1322550",
    "end": "1328309"
  },
  {
    "text": "very strong environment where we have a severe set of supportable tools and then ultimately maybe the you know people in",
    "start": "1328309",
    "end": "1334700"
  },
  {
    "text": "IT could work on this and structure we could go work a 90 whatever it may be while this tool was great",
    "start": "1334700",
    "end": "1339860"
  },
  {
    "text": "again there is no magic silver bullet for solving problems we did have some initial challenges around how our build",
    "start": "1339860",
    "end": "1346370"
  },
  {
    "text": "pipeline worked most of our build pipeline is done through a docker Jenkins system which was a bit of a pain",
    "start": "1346370",
    "end": "1352190"
  },
  {
    "text": "to get set up for doing virtualization and virtualized builds so we had to set up separate build servers with just",
    "start": "1352190",
    "end": "1357830"
  },
  {
    "text": "traditional bare metal Jenkins and get all that configured and ready to go and then building Windows images was a",
    "start": "1357830",
    "end": "1365300"
  },
  {
    "text": "bit of a pain as well we have finally worked out that process for all of these different build targets which is awesome but again no tools",
    "start": "1365300",
    "end": "1373310"
  },
  {
    "text": "without its warts and for managing the infrastructure being also fans of Hoshi",
    "start": "1373310",
    "end": "1378560"
  },
  {
    "text": "Corp stuff we ended up going with terraform after looking at some different tools such as cloud formation",
    "start": "1378560",
    "end": "1383660"
  },
  {
    "text": "salt cloud foundation I forget the name of it for us again",
    "start": "1383660",
    "end": "1390800"
  },
  {
    "text": "definitely not without its warts but we wanted that process where developers who come in make changes and say I want",
    "start": "1390800",
    "end": "1397010"
  },
  {
    "text": "these different types of servers or this different class I want to be able to have a certain instance count that we're",
    "start": "1397010",
    "end": "1402320"
  },
  {
    "text": "gonna be ramping up a new feature and then ultimately have one repository for all our deployments so it doesn't matter",
    "start": "1402320",
    "end": "1408140"
  },
  {
    "text": "what shard where you're fit on to that map or which AWS region we're simply customizing an environment",
    "start": "1408140",
    "end": "1413720"
  },
  {
    "text": "file with a few different variables which is which is great for us ultimately this has been a very strongly",
    "start": "1413720",
    "end": "1419030"
  },
  {
    "text": "adopted tool within riot much like Packer we do use it primarily for AWS",
    "start": "1419030",
    "end": "1424100"
  },
  {
    "text": "but we also contribute it back to an open source plugin that we use for Canonical's mas to be able to do imaging",
    "start": "1424100",
    "end": "1430340"
  },
  {
    "text": "the benefit there is if you're familiar with doing it in AWS which a lot of folks were picking up and using mas was",
    "start": "1430340",
    "end": "1436970"
  },
  {
    "text": "very easy for it and also built our own pipeline around that as well the warts which I talked a bit about and we'll",
    "start": "1436970",
    "end": "1443750"
  },
  {
    "text": "talk a little bit more about the state and a few coming slides it's managing the state for terraform has a defined",
    "start": "1443750",
    "end": "1449870"
  },
  {
    "text": "configuration it's saved state of what it thinks it should be and then the ultimate state or truth which is what",
    "start": "1449870",
    "end": "1455930"
  },
  {
    "text": "AWS says getting all those things to agree you know during its life cycle if terraform wasn't always positive I think",
    "start": "1455930",
    "end": "1462440"
  },
  {
    "text": "we started in version zero 4 or 0.4 and then now 0.8 or 9 it wasn't as good in the",
    "start": "1462440",
    "end": "1470080"
  },
  {
    "text": "earlier days and some of the problems we had one of my favorites were is developers like how we're gonna make",
    "start": "1470080",
    "end": "1475600"
  },
  {
    "text": "some changes no big deal we ran our build job and then unfortunately our entire environment was destroyed and it",
    "start": "1475600",
    "end": "1482260"
  },
  {
    "text": "was a sad time good news was it wasn't production I was happy it happened before production because I don't want to hurt",
    "start": "1482260",
    "end": "1487540"
  },
  {
    "text": "players that way but let's just say it was a very busy day and in the long run",
    "start": "1487540",
    "end": "1492970"
  },
  {
    "text": "when you design out in architecture I've never written a piece of code where the next day I didn't think I could do",
    "start": "1492970",
    "end": "1499030"
  },
  {
    "text": "something better the same thing with terraform you might come up with some different design challenges some different things you want to do",
    "start": "1499030",
    "end": "1504720"
  },
  {
    "text": "maintaining that in the long run could definitely be an issue so upfront experiment test different things out",
    "start": "1504720",
    "end": "1511150"
  },
  {
    "text": "feel what's best for you you probably won't always get it right because things you know requirements change but think",
    "start": "1511150",
    "end": "1517810"
  },
  {
    "text": "about that very heavily before you get started with the environment of using terraform so for the workflow of",
    "start": "1517810",
    "end": "1524320"
  },
  {
    "start": "1522000",
    "end": "1522000"
  },
  {
    "text": "infrastructure it all starts with code this is where we define what the",
    "start": "1524320",
    "end": "1530380"
  },
  {
    "text": "environment looks like in terraform this includes services from the base V PC Direct Connect VPN gateways for direct",
    "start": "1530380",
    "end": "1537340"
  },
  {
    "text": "connects instances EO B's the whole whole ball of yarn and so when we're",
    "start": "1537340",
    "end": "1543730"
  },
  {
    "text": "building that out we want to have that as our base component most people at riot they're on",
    "start": "1543730",
    "end": "1549580"
  },
  {
    "text": "the engineering side have some level of coding and so they're familiar with the workflow of using git and you know",
    "start": "1549580",
    "end": "1555040"
  },
  {
    "text": "submitting pull requests and the whole thing so with that we had a base infrastructure we defined in code and",
    "start": "1555040",
    "end": "1561130"
  },
  {
    "text": "then we would do a get pole review process and so this was just for hey",
    "start": "1561130",
    "end": "1566590"
  },
  {
    "text": "human are you making a mistake is there a potential issue here we go through and then validate it by doing an automated",
    "start": "1566590",
    "end": "1573790"
  },
  {
    "text": "tool testing set and then ultimately apply it this was done after the",
    "start": "1573790",
    "end": "1579010"
  },
  {
    "text": "deletion of that shard one day so it was very helpful to come back and revisit this but I think again it's important to",
    "start": "1579010",
    "end": "1586360"
  },
  {
    "text": "have all of those steps covered for your process here and as I mentioned in the terraform state there's code the known",
    "start": "1586360",
    "end": "1593560"
  },
  {
    "start": "1590000",
    "end": "1590000"
  },
  {
    "text": "state and the true state these are things that you need to manage as you're going through the process so if somebody",
    "start": "1593560",
    "end": "1599020"
  },
  {
    "text": "comes in and manages and changes as a server in the true state or an AWS ultimately when",
    "start": "1599020",
    "end": "1605200"
  },
  {
    "text": "terraform applies it's gonna like this instance types wrong I'm just gonna delete it and go through that so this",
    "start": "1605200",
    "end": "1611170"
  },
  {
    "text": "was something I would say Oh for 0.4 0.6 was very painful but ultimately in the",
    "start": "1611170",
    "end": "1616450"
  },
  {
    "text": "end you know we did you know the new versions have definitely helped working this out but when you're doing this this",
    "start": "1616450",
    "end": "1621970"
  },
  {
    "text": "is something you just I want you to be very aware of like what your code is what the known state is and what the true state is the known state is stored",
    "start": "1621970",
    "end": "1628360"
  },
  {
    "text": "in a JSON file very easy to update and review if you have any questions around it we store ours and s3 for the to",
    "start": "1628360",
    "end": "1636970"
  },
  {
    "text": "ensure that it's there and we don't lose the state as well as being able to have a packet back end encryption crypt that",
    "start": "1636970",
    "end": "1642250"
  },
  {
    "text": "environment has been great for us and then anybody can use the tools all over the world and then terraform has a state",
    "start": "1642250",
    "end": "1648610"
  },
  {
    "start": "1647000",
    "end": "1647000"
  },
  {
    "text": "inheritance architecture where I could define multiple repos and I just simplified this to say like I want to",
    "start": "1648610",
    "end": "1653890"
  },
  {
    "text": "have my infrastructure my BBC subnets that has various outputs such as VP CID",
    "start": "1653890",
    "end": "1659110"
  },
  {
    "text": "7 that ID and then in the next repo say defining just web servers I could import from there and then let's say I'm",
    "start": "1659110",
    "end": "1665170"
  },
  {
    "text": "building a elby's I could import from there and then have information across it this was something it's not",
    "start": "1665170",
    "end": "1670720"
  },
  {
    "text": "necessarily clear in the documentation to do but I highly recommend it so that way if I have a database nerd or admin",
    "start": "1670720",
    "end": "1678160"
  },
  {
    "text": "who's coming in and wants to make a change they're not going to delete the entire BBC and every everything so",
    "start": "1678160",
    "end": "1683740"
  },
  {
    "text": "breaking that out as much as possible as definitely suggested there's a book terraform up and running I think it's sub $20 it covers a lot of this that the",
    "start": "1683740",
    "end": "1690910"
  },
  {
    "text": "documentation does not cover in just a few examples in terraform this is called",
    "start": "1690910",
    "end": "1696430"
  },
  {
    "text": "HCl or Hoshi Corp language it's just like a derivative of JSON how I can define what it instances are in this",
    "start": "1696430",
    "end": "1702970"
  },
  {
    "text": "case it's a V PC I go ahead and provide some variables these are all filled in through variable files and then",
    "start": "1702970",
    "end": "1709720"
  },
  {
    "text": "ultimately create output artifacts so I can share different in different environments in this case the V PC ID a",
    "start": "1709720",
    "end": "1715330"
  },
  {
    "text": "site or block for the BBC sharing outputs is very simple to do share as",
    "start": "1715330",
    "end": "1720730"
  },
  {
    "text": "much as possible definitely recommend going through and doing that as you're building the environment and then lastly",
    "start": "1720730",
    "end": "1727060"
  },
  {
    "start": "1726000",
    "end": "1726000"
  },
  {
    "text": "just talking about meant about using variables everything as much as tokenized as much as possible so we were",
    "start": "1727060",
    "end": "1733330"
  },
  {
    "text": "building environment we're literally just editing a configuration file to be able to define what all of the different values",
    "start": "1733330",
    "end": "1739570"
  },
  {
    "text": "are we also heavily use tags and if you're not using tags and ADA WS shame on you a very powerful feature that",
    "start": "1739570",
    "end": "1746950"
  },
  {
    "text": "almost every tool can look into in utilize so you could define exactly if I",
    "start": "1746950",
    "end": "1752230"
  },
  {
    "text": "want to look up a shard I can just simply have a few tags based on searching and then bring up the exact instances or whatever I need to for it",
    "start": "1752230",
    "end": "1759790"
  },
  {
    "text": "so when using terraform definitely as much as possible tokenize everything make it very easy to change and optimize",
    "start": "1759790",
    "end": "1766080"
  },
  {
    "text": "we did this so that way we could do a build environment where we can have a test new revisions all the time and tear",
    "start": "1766080",
    "end": "1772330"
  },
  {
    "text": "it down so things like delete you know the discs whatnot or do termination",
    "start": "1772330",
    "end": "1778080"
  },
  {
    "text": "global termination protection turning it off and on to make it very easy for that",
    "start": "1778080",
    "end": "1783360"
  },
  {
    "start": "1783000",
    "end": "1783000"
  },
  {
    "text": "we did a few extensions to terraform we have a bit of a strange DNS",
    "start": "1783360",
    "end": "1788980"
  },
  {
    "text": "infrastructure again kind of comes off for a legacy so we use power DNS for that we modified power DNS the built-in",
    "start": "1788980",
    "end": "1795940"
  },
  {
    "text": "plug-in to be able to support JWT authentication we did this primarily because power DNS has a singular API key",
    "start": "1795940",
    "end": "1802780"
  },
  {
    "text": "or at least our deployment did so now we have a better way to be able to use authentication to manage DNS infrastructure the same thing with f5s",
    "start": "1802780",
    "end": "1810580"
  },
  {
    "text": "some environments we have that fives as edge load balancers and then this would allow us to build up instances create",
    "start": "1810580",
    "end": "1816460"
  },
  {
    "text": "the VIPs for them auto populate the servers everything like that so it's a very streamlined process similar to an",
    "start": "1816460",
    "end": "1824320"
  },
  {
    "text": "ELB and then lastly we ended up contributing back to a maas provider wood for building images and building",
    "start": "1824320",
    "end": "1830740"
  },
  {
    "text": "environments like that very simple to do very very easy to extend terraform we",
    "start": "1830740",
    "end": "1837100"
  },
  {
    "text": "ultimately ended up canning power DNS and f5 due to a bug in terraform where",
    "start": "1837100",
    "end": "1842500"
  },
  {
    "text": "it would reorder a list and then always delete and recreate the servers which would create player pain and downtime",
    "start": "1842500",
    "end": "1847690"
  },
  {
    "text": "and we don't want that so we ended up caning that and built separate tools to manage those different processes and",
    "start": "1847690",
    "end": "1854680"
  },
  {
    "start": "1854000",
    "end": "1854000"
  },
  {
    "text": "mentioning tools for me I am unfortunately the guy who always like I can write that which is really fun until",
    "start": "1854680",
    "end": "1861640"
  },
  {
    "text": "you have to maintain at 6 or 9 months later and you're really bored with it so whenever you're trying to choose which to",
    "start": "1861640",
    "end": "1866740"
  },
  {
    "text": "to build we could have definitely built our own terraform and/or a packer type of tools I would rather contribute back to tools",
    "start": "1866740",
    "end": "1873220"
  },
  {
    "text": "that exist and make a stronger ecosystem it's very easy to do that today in",
    "start": "1873220",
    "end": "1878470"
  },
  {
    "text": "today's world with things like github or bitbucket so definitely always suggest that when all else fails and you cannot",
    "start": "1878470",
    "end": "1884290"
  },
  {
    "text": "find a tool that meets your needs or more importantly meets the needs of how your organization works which i think is",
    "start": "1884290",
    "end": "1889300"
  },
  {
    "text": "the secret of automation then that's when you want to look into it and then look at committing into specific tools",
    "start": "1889300",
    "end": "1895890"
  },
  {
    "text": "for a lot of our tooling at riot we use golang and even for some back-end micro",
    "start": "1895890",
    "end": "1901809"
  },
  {
    "start": "1896000",
    "end": "1896000"
  },
  {
    "text": "services golang does not officially endorse riot just what they'll in share",
    "start": "1901809",
    "end": "1906880"
  },
  {
    "text": "but we definitely endorse them and love using the tool sets for it things we use it for simple command-line tools micro",
    "start": "1906880",
    "end": "1916809"
  },
  {
    "text": "services which are focused on being able to work with the players and then using various sidecars which are you know",
    "start": "1916809",
    "end": "1922570"
  },
  {
    "text": "processes that are used for monitoring we have a generic sidecar which we've created so it's very simple if you have",
    "start": "1922570",
    "end": "1928030"
  },
  {
    "text": "a REST API you define a little bit of JSON and automatically you can manage or monitor all of your environments with",
    "start": "1928030",
    "end": "1934720"
  },
  {
    "text": "that type of toolset super powerful for us ultimately for this project we made a",
    "start": "1934720",
    "end": "1940720"
  },
  {
    "text": "few different tools to solve our issues here one being managing the chef data bags and or Merlin data bags as I",
    "start": "1940720",
    "end": "1945970"
  },
  {
    "text": "mentioned but instead of doing that by hand we define those in a JSON type of object and then a tool echo will go",
    "start": "1945970",
    "end": "1952510"
  },
  {
    "text": "through read it and then set and configure everything in our Merlin systems if you're not familiar with",
    "start": "1952510",
    "end": "1957880"
  },
  {
    "text": "League of Legends Ecco is a character who has the ability to travel back in time so if you're about to die you can just zip back and not be dead which is a",
    "start": "1957880",
    "end": "1965350"
  },
  {
    "text": "good strategy in the game not to die and so it's the boy who shattered time and so we used his name here unfortunately",
    "start": "1965350",
    "end": "1972520"
  },
  {
    "text": "not not a good choice because then if you're searching for Ecco you see every Ecco bug and not these tools but very",
    "start": "1972520",
    "end": "1977620"
  },
  {
    "text": "very cool at the time when we were doing it maybe they may be working too hard that night the same thing for the f5",
    "start": "1977620",
    "end": "1983590"
  },
  {
    "text": "VIPs we managed all of that through Ecco edge which just again reads the AWS tags",
    "start": "1983590",
    "end": "1988960"
  },
  {
    "text": "we'll go ahead and configure the VIPs for you very quick to do it's not something we need to update all the time",
    "start": "1988960",
    "end": "1994030"
  },
  {
    "text": "and then lastly a similar process for dns read the tags configure the DNS",
    "start": "1994030",
    "end": "1999270"
  },
  {
    "text": "we asked to make sure everything's configured correctly all right now to the meat or the interesting stuff here",
    "start": "1999270",
    "end": "2005390"
  },
  {
    "text": "the architecture that we ultimately went with for the platform here what we have",
    "start": "2005390",
    "end": "2011030"
  },
  {
    "text": "is a generic design that kind of shows what we would build in a specific AWS",
    "start": "2011030",
    "end": "2016100"
  },
  {
    "text": "region a region may contain one or more platforms that always depends on what",
    "start": "2016100",
    "end": "2021770"
  },
  {
    "text": "the players needs are for that location and then for the platform's we have a",
    "start": "2021770",
    "end": "2027440"
  },
  {
    "text": "shared set of tools which includes things like chef servers DNS and whatnot will go up at over there and then also",
    "start": "2027440",
    "end": "2034220"
  },
  {
    "text": "when we're launching a platform I do not want the I've launched it and the players are logging in and it melts down",
    "start": "2034220",
    "end": "2039890"
  },
  {
    "text": "time that is a sad time we do not want that players are very excited when these things happen we didn't ever want to",
    "start": "2039890",
    "end": "2046550"
  },
  {
    "text": "have an experience where they get in and then it doesn't work and then we're down for six hours pulling our hair out I have definitely done that at other",
    "start": "2046550",
    "end": "2052639"
  },
  {
    "text": "places I am NOT a fan of that so we also have an ability to load tests to shard and a platform to make sure everything's",
    "start": "2052640",
    "end": "2058940"
  },
  {
    "text": "going to work for us and so we do that with some mock game servers and test clients which will explain all of this",
    "start": "2058940",
    "end": "2064490"
  },
  {
    "text": "interconnects to the riot LAN over direct connects so different platforms can talk to them each other as needed",
    "start": "2064490",
    "end": "2069919"
  },
  {
    "text": "and then we have the production game servers which are located regionally wherever is the best for the player our",
    "start": "2069919",
    "end": "2075470"
  },
  {
    "text": "cluster which is typically done in metal we're looking at moving in that into AWS as well and then the Internet of course",
    "start": "2075470",
    "end": "2082398"
  },
  {
    "text": "which because you have to get to the game if you're not familiar riot also builds its own global LAN or global",
    "start": "2082399",
    "end": "2088220"
  },
  {
    "text": "internet called riot direct also on the ride engineering blog many discussions around it and we that is used to give",
    "start": "2088220",
    "end": "2095120"
  },
  {
    "text": "lowest latency and access for players and all of this comes together to make the architecture for which we built the",
    "start": "2095120",
    "end": "2101840"
  },
  {
    "start": "2101000",
    "end": "2101000"
  },
  {
    "text": "shared services I was very very creative this day a non unfortunately creative as I won a we named the thing echo we call",
    "start": "2101840",
    "end": "2108920"
  },
  {
    "text": "this the tools VP see you feel free to use that no copyright and then this is",
    "start": "2108920",
    "end": "2114050"
  },
  {
    "text": "just a shared set of services that the shard is able to utilize DNS because we use our custom DNS infrastructure ntp",
    "start": "2114050",
    "end": "2121160"
  },
  {
    "text": "because time sync is super critical for messaging and validating everything is connected together our shaft slash",
    "start": "2121160",
    "end": "2127160"
  },
  {
    "text": "Merlyn devices we split these across multiple V PC subnets to provide resiliency",
    "start": "2127160",
    "end": "2132740"
  },
  {
    "text": "and then also provide a simple proxy solution for services to get in and out",
    "start": "2132740",
    "end": "2137810"
  },
  {
    "text": "to the Internet were applicable the platform this is where we break apart",
    "start": "2137810",
    "end": "2144350"
  },
  {
    "text": "all of our platform services we brought like services together into subnets and",
    "start": "2144350",
    "end": "2149630"
  },
  {
    "text": "then this made it simpler for managed management and for people to identify how things looked we could have done it",
    "start": "2149630",
    "end": "2155360"
  },
  {
    "text": "and sort of cut this any which way but ultimately managing security groups between different subnets was a lot",
    "start": "2155360",
    "end": "2161150"
  },
  {
    "text": "easier managing this logically for how we used to manage it makes a lot of sense for us there was additional",
    "start": "2161150",
    "end": "2168020"
  },
  {
    "text": "breakout here and some secrets and how we do things we can't lift the veil too",
    "start": "2168020",
    "end": "2173180"
  },
  {
    "text": "much just do because we want to provide players the best ability and no security security vulnerability is a great",
    "start": "2173180",
    "end": "2178340"
  },
  {
    "text": "security talk later from riot as well so that's something that you'd want to do when this was pen tested this became the",
    "start": "2178340",
    "end": "2186290"
  },
  {
    "text": "most secure riot platform ever and that's something I was really proud of",
    "start": "2186290",
    "end": "2191390"
  },
  {
    "text": "and happy to do done through AWS security groups done through the additional auditing that can be done",
    "start": "2191390",
    "end": "2196730"
  },
  {
    "text": "through the configuration and code for me I never want to have players leak information leaked or passwords or any",
    "start": "2196730",
    "end": "2202880"
  },
  {
    "text": "of that those shenanigans that people apparently love to do so after the pen test rights most secure platforms very",
    "start": "2202880",
    "end": "2209990"
  },
  {
    "text": "happy and proud with how we achieve that this also connects back to the tools VPC so we can get all of those various",
    "start": "2209990",
    "end": "2215930"
  },
  {
    "text": "services we could have built this into the platform but we wanted just how we built the system to be able to take",
    "start": "2215930",
    "end": "2221900"
  },
  {
    "text": "tools and break that out into a different methodology of how we're building it so we build tools VPC we",
    "start": "2221900",
    "end": "2227150"
  },
  {
    "text": "build our a.m. eyes below their configurations that it becomes our anchor and then platforms can come and",
    "start": "2227150",
    "end": "2232700"
  },
  {
    "text": "go as needed because platforms may need to move based upon AWS region availability so unfortunately we we",
    "start": "2232700",
    "end": "2242030"
  },
  {
    "start": "2239000",
    "end": "2239000"
  },
  {
    "text": "didn't decide very well on using our cider blocks and how we defined everything so originally we decided on a",
    "start": "2242030",
    "end": "2247820"
  },
  {
    "text": "slash 22 and then carved that up and then we had some issues where we lost EBS volumes and then the concern was",
    "start": "2247820",
    "end": "2254480"
  },
  {
    "text": "well we our databases are going to go down players gonna be sad so we ended up employing a different H a database",
    "start": "2254480",
    "end": "2262130"
  },
  {
    "text": "solution and that requires multiple lbs alb took 8 IPS and then after one",
    "start": "2262130",
    "end": "2269370"
  },
  {
    "text": "database I think we ate up in our entire IP space so again when you're designing this try to design for the future",
    "start": "2269370",
    "end": "2275850"
  },
  {
    "text": "because otherwise you're gonna have to go back and retrofit additional bbc's or additional environments we're possible",
    "start": "2275850",
    "end": "2281580"
  },
  {
    "text": "we could have used services like Aurora or other AWS services like RDS again",
    "start": "2281580",
    "end": "2287100"
  },
  {
    "text": "unfortunately because we're deploying to both AWS and bare metal regions we wanted to provide a agnostic solution to",
    "start": "2287100",
    "end": "2293100"
  },
  {
    "text": "solve that so again when deciding on how to build all of this out please take the time to decide upfront this led to some",
    "start": "2293100",
    "end": "2300300"
  },
  {
    "text": "additional VPC work inside a terraform and then also the effort to bring up each shard that we had already launched",
    "start": "2300300",
    "end": "2306810"
  },
  {
    "text": "back so it's all in a consistent state we didn't expect at first for having",
    "start": "2306810",
    "end": "2312390"
  },
  {
    "text": "these EBS issues we only had a few in the beginning and have not had any sense but of course it's on the production",
    "start": "2312390",
    "end": "2318030"
  },
  {
    "text": "databases of course it's the most painful point you know these things happen I don't particularly know how but",
    "start": "2318030",
    "end": "2324120"
  },
  {
    "text": "it always seems to do that now when",
    "start": "2324120",
    "end": "2330300"
  },
  {
    "start": "2330000",
    "end": "2330000"
  },
  {
    "text": "bringing up that environment I want to be damn sure it's gonna work so through terraform we procedurally",
    "start": "2330300",
    "end": "2337380"
  },
  {
    "text": "generate a load testing harness to be able to test anywhere from 10,000 to a",
    "start": "2337380",
    "end": "2342960"
  },
  {
    "text": "million-plus concurrent user base this uses a Java library that we have to be",
    "start": "2342960",
    "end": "2349020"
  },
  {
    "text": "able to go through as if a player we're logging in you know get match information go to the store all the",
    "start": "2349020",
    "end": "2354990"
  },
  {
    "text": "player type of actions and then go into a game now that process does not",
    "start": "2354990",
    "end": "2360360"
  },
  {
    "text": "actually play a game nor win it just simulates that it's in a game but we want to test that ramp up so if we open",
    "start": "2360360",
    "end": "2366600"
  },
  {
    "text": "a shard say after maintenance and then we go from zero players you know to ten to a hundred to two hundred thousand we",
    "start": "2366600",
    "end": "2372720"
  },
  {
    "text": "want to ensure that process of very smooth and there's no surprises because the worst thing is again we've all",
    "start": "2372720",
    "end": "2378120"
  },
  {
    "text": "played games that launched and have had issues these things happen and knock on wood they don't happen to us but I'm",
    "start": "2378120",
    "end": "2383430"
  },
  {
    "text": "sure sure will happen again sometime we want to validate it as much as possible by going through the load testing in we",
    "start": "2383430",
    "end": "2390150"
  },
  {
    "text": "launch the subnet a through Y so 25 subnets we do this because as we're",
    "start": "2390150",
    "end": "2395370"
  },
  {
    "text": "doing the temp connection testing we were generating so many different TCP connection that it became very stressful on the AWS",
    "start": "2395370",
    "end": "2402930"
  },
  {
    "text": "NAT gateways and so then this led to test failing and then you know losing time on compute and costing additional",
    "start": "2402930",
    "end": "2409470"
  },
  {
    "text": "money so we just spread it as wide as possible to build for building and launching this with terraform I think it",
    "start": "2409470",
    "end": "2416010"
  },
  {
    "text": "took it takes maybe five to ten minutes at the most or really whatever time it takes for me to go to get a coffee and",
    "start": "2416010",
    "end": "2422340"
  },
  {
    "text": "come back and it's done by the time I come back and then boom the load test harness is up and running I'm able to",
    "start": "2422340",
    "end": "2428190"
  },
  {
    "text": "tweak how many subnets and how many nodes per subnet very simply and then by",
    "start": "2428190",
    "end": "2433410"
  },
  {
    "text": "modifying a configuration file so then once handing it off to other platform engineers I'm like hey change this from",
    "start": "2433410",
    "end": "2439380"
  },
  {
    "text": "a 5 to a 6 or a 2 to a 3 go ahead and run this Jenkins job it'll build out the environment kick off the tests and then",
    "start": "2439380",
    "end": "2446490"
  },
  {
    "text": "if they want to stop and start the tests because again issue issues can happen we don't have to rebuild this every time we",
    "start": "2446490",
    "end": "2452850"
  },
  {
    "text": "just have a simple script stop start load environment which simply stops the instances or starts them accordingly and",
    "start": "2452850",
    "end": "2459120"
  },
  {
    "text": "then it'll come back up and pull its configuration so that was amazing for us to do this also connects back into the",
    "start": "2459120",
    "end": "2465150"
  },
  {
    "text": "tools VPC but does not connect into the platform it has another process to get through that which will show here in a",
    "start": "2465150",
    "end": "2471210"
  },
  {
    "text": "moment and then gaming isn't gaming without a game server and so we wanted",
    "start": "2471210",
    "end": "2476790"
  },
  {
    "start": "2472000",
    "end": "2472000"
  },
  {
    "text": "to be able to mock that up and build that an environment the reality is a lot of the environments we had had predict",
    "start": "2476790",
    "end": "2482490"
  },
  {
    "text": "existing bare metal production game servers which players were already playing on and so we don't want to",
    "start": "2482490",
    "end": "2488310"
  },
  {
    "text": "eliminate their opportunity to play or eliminate the opportunity to scale on a weekend where we launched a new feature",
    "start": "2488310",
    "end": "2493730"
  },
  {
    "text": "so we spin up our own game servers these are all done with Windows we built this",
    "start": "2493730",
    "end": "2499230"
  },
  {
    "text": "Windows image using Packer and then simply spin it up it does not run actually the game code and you know the",
    "start": "2499230",
    "end": "2505170"
  },
  {
    "text": "bots don't play it or anything although that would sound very fun to do it just simulates a player goes into a game or",
    "start": "2505170",
    "end": "2510780"
  },
  {
    "text": "ten players go into a game they run for a period of time between 20 to 40 minutes and then the game server",
    "start": "2510780",
    "end": "2517170"
  },
  {
    "text": "you know the game ends bots win and Lou or the processes win and lose and then",
    "start": "2517170",
    "end": "2522390"
  },
  {
    "text": "ultimately the end of game stats are sent back to the platform what's nice",
    "start": "2522390",
    "end": "2527880"
  },
  {
    "text": "about this is as we were testing it we could scale and do differ dimensions that we couldn't do before",
    "start": "2527880",
    "end": "2533300"
  },
  {
    "text": "because before we had to buy the Game Servers rack stack we're gonna only pick so many due to you know costing or how",
    "start": "2533300",
    "end": "2539540"
  },
  {
    "text": "many racks we can get into space we're able to do new dimensions and new testing on this and so through doing",
    "start": "2539540",
    "end": "2545270"
  },
  {
    "text": "that it was ultimately able allowed allowed us to optimize the platform give us the best possible experience for the",
    "start": "2545270",
    "end": "2551750"
  },
  {
    "text": "player and reducing the amount of game servers reducing the amount of instances",
    "start": "2551750",
    "end": "2557090"
  },
  {
    "text": "in the platform but right sizing it to have the right type of server so instead of buying all of the same server",
    "start": "2557090",
    "end": "2562340"
  },
  {
    "text": "shipping it somewhere and then maybe having a server over utilized or underutilized we're able to right-size",
    "start": "2562340",
    "end": "2567950"
  },
  {
    "text": "everything in the environment and this was a quick win that was very you know",
    "start": "2567950",
    "end": "2573130"
  },
  {
    "text": "obvious maybe after the fact but not expected so the way we can ensure everything would be working",
    "start": "2573130",
    "end": "2578420"
  },
  {
    "text": "appropriately for the player we do a lot of our load testing environments in a similar manner now and so that allows us",
    "start": "2578420",
    "end": "2584480"
  },
  {
    "text": "to test and determine what type of server we're going to or utilize in the future or how we're going to do the",
    "start": "2584480",
    "end": "2590150"
  },
  {
    "text": "testing so this was a fun win that you know unfortunately but we didn't expect",
    "start": "2590150",
    "end": "2595369"
  },
  {
    "text": "but we're very grateful to have now again I mentioned connecting into with",
    "start": "2595369",
    "end": "2601190"
  },
  {
    "start": "2598000",
    "end": "2598000"
  },
  {
    "text": "Direct Connect as being critical for us I can't stress this enough because we have data centers all over",
    "start": "2601190",
    "end": "2607100"
  },
  {
    "text": "the world we want to be able to ensure that we have connectivity to them some legacy services some shared services for",
    "start": "2607100",
    "end": "2614840"
  },
  {
    "text": "so for things like if you're doing a transfer between region a to region B that's a service that wouldn't be it's",
    "start": "2614840",
    "end": "2621290"
  },
  {
    "text": "specific to one different shard it's something that maybe in a centralized data center or multiple data centers so",
    "start": "2621290",
    "end": "2626780"
  },
  {
    "text": "connecting into the Ryde direct LAN was critical for this we used a minimum of",
    "start": "2626780",
    "end": "2632210"
  },
  {
    "text": "two 10 gig links to more than that we'll say so like maybe four or six",
    "start": "2632210",
    "end": "2637520"
  },
  {
    "text": "we hope there's a special announcement later for a hundred gig link I don't know if that will happen but anyways we",
    "start": "2637520",
    "end": "2643040"
  },
  {
    "text": "can still do link aggregation for it this was a huge win for us because again we're able to plug in the way this works",
    "start": "2643040",
    "end": "2649609"
  },
  {
    "text": "if you have not used this feature is you have a physical link that exists in some sort of data center location so you get",
    "start": "2649609",
    "end": "2655910"
  },
  {
    "text": "a cross connect between a riot or not a riot but maybe would all work Araya between your router and the AWS router",
    "start": "2655910",
    "end": "2662270"
  },
  {
    "text": "and then that will provision that if different inter face physically the connection and then",
    "start": "2662270",
    "end": "2667290"
  },
  {
    "text": "for each VPC you would go ahead and spin up your own VLAN in their face and be",
    "start": "2667290",
    "end": "2672840"
  },
  {
    "text": "able to connect that back to a VPN gateway at the beginning it seems a little bit strange but once you go",
    "start": "2672840",
    "end": "2679290"
  },
  {
    "text": "through the workflow we found it quite easy to do so maybe there's 2 to 4 to 6 10 gig links but that could be shared",
    "start": "2679290",
    "end": "2686160"
  },
  {
    "text": "across 20 30 different V pcs and it was very flexible for us to do and then",
    "start": "2686160",
    "end": "2691560"
  },
  {
    "text": "connecting between the AWS routers and then our routers not only do we use BGP",
    "start": "2691560",
    "end": "2699180"
  },
  {
    "text": "to do announcement so if we choose to move our subnet it's very easy to move but it also supports the protocol called",
    "start": "2699180",
    "end": "2704550"
  },
  {
    "text": "BFD or bi-directional forward detection this is basically a little echo message that's sent between the routers back and",
    "start": "2704550",
    "end": "2710760"
  },
  {
    "text": "forth at a sub-second rate so you can know if that route connection fails instead of the protocol connection so",
    "start": "2710760",
    "end": "2717630"
  },
  {
    "text": "BGP uses TCP you can take in a 30 or more seconds to figure out the connections down players are sad sad",
    "start": "2717630",
    "end": "2724230"
  },
  {
    "text": "faced or not being able to play the game and have a good time BFD is able to very quickly detect it we did run into some",
    "start": "2724230",
    "end": "2730230"
  },
  {
    "text": "issues where we were overloading the links and then due to that we lost BFD messages we did enable end up enabling",
    "start": "2730230",
    "end": "2737880"
  },
  {
    "text": "some coifs or quality of service to prevent that from happening but we had you know a peak flow some new features",
    "start": "2737880",
    "end": "2743850"
  },
  {
    "text": "something came out players are going crazy they're logging in and then platform drops and because we lost bgp",
    "start": "2743850",
    "end": "2749490"
  },
  {
    "text": "link we lost the routes to that different environment so we'll have a few more comments on that towards the",
    "start": "2749490",
    "end": "2755910"
  },
  {
    "text": "end of end of the deck so our load testing flow we want to experience this",
    "start": "2755910",
    "end": "2761280"
  },
  {
    "start": "2756000",
    "end": "2756000"
  },
  {
    "text": "as if we were players coming into this platform we start with our load test harness as we kind of described earlier",
    "start": "2761280",
    "end": "2766860"
  },
  {
    "text": "in the slides that goes out Amazon's AWS internet gateway to the Amazon Internet",
    "start": "2766860",
    "end": "2772110"
  },
  {
    "text": "backbone and to wherever they connect into the Internet this ultimately goes over the public Internet to riot direct",
    "start": "2772110",
    "end": "2779040"
  },
  {
    "text": "to be able to test doing DDoS mitigation and other secret sauce we use there to ensure players don't get disconnected",
    "start": "2779040",
    "end": "2785520"
  },
  {
    "text": "from games that goes through our load balancing edge which then goes over the direct connect which then goes through",
    "start": "2785520",
    "end": "2791100"
  },
  {
    "text": "our VPC so when we launched this we know exactly how this will work we can talk",
    "start": "2791100",
    "end": "2796710"
  },
  {
    "text": "to riot get there information talk to the riot load-balancing team get their information and have no surprises when",
    "start": "2796710",
    "end": "2802890"
  },
  {
    "text": "we launch this and we can even test it two to three four times what we would expect from a you know day or a peak or",
    "start": "2802890",
    "end": "2809580"
  },
  {
    "text": "even through a new feature launch so we know exactly how every level this will work and then in the end what's gonna",
    "start": "2809580",
    "end": "2815280"
  },
  {
    "text": "happen is when those bad times or you know intense play times occur each one of these teams is familiar with what's",
    "start": "2815280",
    "end": "2821250"
  },
  {
    "text": "gonna happen to their equipment there's not going to be a surprise so if I see a peak of traffic they've already seen it",
    "start": "2821250",
    "end": "2826470"
  },
  {
    "text": "before during this load testing process which is very critical for us lastly",
    "start": "2826470",
    "end": "2833550"
  },
  {
    "start": "2832000",
    "end": "2832000"
  },
  {
    "text": "here around AWS I've never seen a tool a service a system that didn't have issues",
    "start": "2833550",
    "end": "2839450"
  },
  {
    "text": "you know these things can happen and I just want to provide some key challenges we ran into ultimately we resolved we",
    "start": "2839450",
    "end": "2846270"
  },
  {
    "text": "mentioned the lost VPN gateways this is primarily done through BFD messages being stuck or being lost that was a",
    "start": "2846270",
    "end": "2853350"
  },
  {
    "text": "particular issue for us we also ran into an issue where the bgp connection went down between our routers and that and",
    "start": "2853350",
    "end": "2859710"
  },
  {
    "text": "the VPN gateways ultimately what we had to do was detach the VPN gateway from",
    "start": "2859710",
    "end": "2864900"
  },
  {
    "text": "the VPC and reattach it and then it ended up restoring it something on the back end and AWS aside it wasn't",
    "start": "2864900",
    "end": "2872250"
  },
  {
    "text": "particularly a big deal for us to do but it was just more of the hour or so to kind of figure out what happened to that",
    "start": "2872250",
    "end": "2878370"
  },
  {
    "text": "VPN gateway ultimately Amazon support was very helpful for this and they got into the routers on their side and",
    "start": "2878370",
    "end": "2884280"
  },
  {
    "text": "figured it all out but if you run into these types of issues detaching and reattaching definitely can help out it",
    "start": "2884280",
    "end": "2891630"
  },
  {
    "text": "takes maybe a minute to do so there could be a service interruption but if your service is already down it doesn't hurt to try it a couple typical AWS or",
    "start": "2891630",
    "end": "2900060"
  },
  {
    "text": "really virtualization things instances got stuck or lost this can happen for a",
    "start": "2900060",
    "end": "2905190"
  },
  {
    "text": "variety of reasons so again I don't know it always happens in the beginning initially we ran some database servers",
    "start": "2905190",
    "end": "2911760"
  },
  {
    "text": "some back-end application API apps they would get stuck we're unable to communicate with them so just stopping",
    "start": "2911760",
    "end": "2918990"
  },
  {
    "text": "or restarting them helped in some instances we had to terminate or have AWS do hard termination for them you",
    "start": "2918990",
    "end": "2925350"
  },
  {
    "text": "know these things happen so be prepared for it never have one server that does everything we certainly didn't that was",
    "start": "2925350",
    "end": "2930390"
  },
  {
    "text": "very helpful for us so no service outages from at managing and scaling instances like I mentioned",
    "start": "2930390",
    "end": "2936329"
  },
  {
    "text": "initially we launched shards that were a bit too big for their typical CC you put",
    "start": "2936329",
    "end": "2941760"
  },
  {
    "text": "over time we're able to refactor that and ultimately reduce the number of instances that we have in the environment what I love about AWS is",
    "start": "2941760",
    "end": "2948210"
  },
  {
    "text": "again like none of this as free as nothing ever is they definitely want to work with you to get the right size optimization so we",
    "start": "2948210",
    "end": "2954359"
  },
  {
    "text": "that we did a lot of that and that helped us not only on a costing perspective but also on a scaling and",
    "start": "2954359",
    "end": "2960150"
  },
  {
    "text": "management perspective now we have a very good understanding of what everything looks like so we work through that initially when doing load tests we",
    "start": "2960150",
    "end": "2967470"
  },
  {
    "text": "not only test riots edge out the load balancers but we also test e/l bees inside of the bbc's for this is for some",
    "start": "2967470",
    "end": "2974940"
  },
  {
    "text": "back-end services we had issues where we're going from zero to a million players the EBL bees wouldn't scale up",
    "start": "2974940",
    "end": "2980790"
  },
  {
    "text": "fast enough we worked with AWS and a few of their architects to be able to solve this problem that was awesome process to",
    "start": "2980790",
    "end": "2987510"
  },
  {
    "text": "go through and then we just kind of found that if we're going to do some testing we wanted to be able to pre-warm them as we're needing to scale that was",
    "start": "2987510",
    "end": "2994890"
  },
  {
    "text": "a particular again easy process no issues now we have some scripts and tools to be able to help with that we",
    "start": "2994890",
    "end": "3001099"
  },
  {
    "text": "mentioned the flapping Direct Connect switch occurred to the BFD very fun process I've done a lot of work and",
    "start": "3001099",
    "end": "3007730"
  },
  {
    "text": "networking so I'm very grateful to have that knowledge but it's amazing to see AWS support all of these deep networking",
    "start": "3007730",
    "end": "3014720"
  },
  {
    "text": "capabilities you know things like ipv6 as well that'll come out so it's good to be able to have you know not only bf BGP",
    "start": "3014720",
    "end": "3020780"
  },
  {
    "text": "types of connections but also BFD so also recommend always using that and then lastly as occurs we lost some EBS",
    "start": "3020780",
    "end": "3028670"
  },
  {
    "text": "volumes in the beginning unfortunately again those run high-end production databases and it was a very sad time we",
    "start": "3028670",
    "end": "3034849"
  },
  {
    "text": "had no service outages because of it we ended up implementing an H a DB solution from scale Ark did it to be able to",
    "start": "3034849",
    "end": "3041329"
  },
  {
    "text": "solve this problem again to be able to be a cloud or platform agnostic ultimately these things happen and again",
    "start": "3041329",
    "end": "3047809"
  },
  {
    "text": "unfortunately only happened really in the beginning so after all this after",
    "start": "3047809",
    "end": "3053210"
  },
  {
    "text": "nearly nine months of work blood sweat and tears what are the results here so from a terraform perspective this is not",
    "start": "3053210",
    "end": "3060440"
  },
  {
    "start": "3057000",
    "end": "3057000"
  },
  {
    "text": "current to today but within the last month over 1,800 commits that repository this comes through I",
    "start": "3060440",
    "end": "3067210"
  },
  {
    "text": "believe up around 25 different contributors to be able to contribute back into it and then nearly 400 poll",
    "start": "3067210",
    "end": "3075369"
  },
  {
    "text": "requests that have been done through that so as we work with each different team they're able to request and make the changes that they want for me this",
    "start": "3075369",
    "end": "3082300"
  },
  {
    "text": "was a big win I just hate the manual process of email Rob or email Joe and",
    "start": "3082300",
    "end": "3087340"
  },
  {
    "text": "then we'll go through and do this thing forget that let's get rid of the people it's get rid of humans and these things that they can make mistakes on so this",
    "start": "3087340",
    "end": "3094150"
  },
  {
    "text": "the terraform management and then ultimately the Packer management the numbers are much less interesting but this was a huge success for us so",
    "start": "3094150",
    "end": "3101440"
  },
  {
    "text": "building that workflow through manual code changes through dr. Jenkins validation and application huge win I",
    "start": "3101440",
    "end": "3109119"
  },
  {
    "text": "cannot recommend that enough lastly on the instances size here on the left we",
    "start": "3109119",
    "end": "3115119"
  },
  {
    "text": "see the servers and what their how many servers we'd have physically and we'll just break this down and say a small",
    "start": "3115119",
    "end": "3121060"
  },
  {
    "text": "into a large shard so these are the amount of devices we'd have to ship racks tack power care love 4 on the",
    "start": "3121060",
    "end": "3129520"
  },
  {
    "text": "right the number of instances we're able to trim down a large shard by almost 100 nodes which is huge for us and again in",
    "start": "3129520",
    "end": "3136840"
  },
  {
    "text": "locations where we have bare metal we now have a better scaling mechanism to determine how we can build that shard",
    "start": "3136840",
    "end": "3142270"
  },
  {
    "text": "out and reduce the number of nodes for it and then on the small side the difference is not that much just because",
    "start": "3142270",
    "end": "3148270"
  },
  {
    "text": "we have a lot of redundancy built in and so really for us we didn't were able to",
    "start": "3148270",
    "end": "3154420"
  },
  {
    "text": "able to reduce that under 100 which as of yet but hopefully in the future if we look at some different scaling",
    "start": "3154420",
    "end": "3159490"
  },
  {
    "text": "techniques or as we move to micro services and then time the the ultimate",
    "start": "3159490",
    "end": "3165220"
  },
  {
    "text": "you know friend slash battle that you're gonna have in life before again taking up to 9 months to launch a shard once",
    "start": "3165220",
    "end": "3172540"
  },
  {
    "text": "the machine and the or the team that's or that would do these types of migrations we can now do these types of migrations and changes in a month or",
    "start": "3172540",
    "end": "3178690"
  },
  {
    "text": "less which is a 9x difference I did the math and so this not only comes down to",
    "start": "3178690",
    "end": "3185440"
  },
  {
    "text": "technology which again I think Tech is in my opinion very easy it's a valid a table you can ensure you can do",
    "start": "3185440",
    "end": "3191260"
  },
  {
    "text": "experiments you know Tech has no feelings into it it's just really being able to align all the teams to go",
    "start": "3191260",
    "end": "3196330"
  },
  {
    "text": "through do their validation really the tech enabled that by doing able to do poll requests reviews the",
    "start": "3196330",
    "end": "3202250"
  },
  {
    "text": "centralized configuration management through echo all of that to me was a huge win very very proud of that so I",
    "start": "3202250",
    "end": "3210380"
  },
  {
    "text": "would like to thank Richard who who had done a lot of work on that and then some new folks who have come over to take over that task for me I'd rather do all",
    "start": "3210380",
    "end": "3217339"
  },
  {
    "text": "the tech stuff I was just really Herculean task to get everybody together so we've come to the end of my talk",
    "start": "3217339",
    "end": "3223430"
  },
  {
    "text": "today we have a few minutes for questions so if you would like to line up at the mics or I'll hang out a bit",
    "start": "3223430",
    "end": "3228710"
  },
  {
    "text": "outside after for me you know a couple really good takeaways is in automation",
    "start": "3228710",
    "end": "3234670"
  },
  {
    "text": "so this is something I've worked on for the last four or five years across different companies I don't care what",
    "start": "3234670",
    "end": "3240319"
  },
  {
    "text": "tool it is I don't care what it does I don't care how cool and hip it is there is never a silver bullet and how that",
    "start": "3240319",
    "end": "3246109"
  },
  {
    "text": "works for me it's about finding a tool that aligns with your environment that aligns with how people think in your",
    "start": "3246109",
    "end": "3251210"
  },
  {
    "text": "organization and what can be consumed so whether it's ansible chef puppet terraform packer whatever the thing",
    "start": "3251210",
    "end": "3256910"
  },
  {
    "text": "that's about to come out tomorrow is just find some that aligns with your environment and then too as your",
    "start": "3256910",
    "end": "3263150"
  },
  {
    "text": "whatever you're doing take a lot of time upfront to just test make some mistakes because you want to make those mistakes",
    "start": "3263150",
    "end": "3269420"
  },
  {
    "text": "before you go into production and so have those arguments have those you know fist fights or hard discussions and then",
    "start": "3269420",
    "end": "3276200"
  },
  {
    "text": "before you go into production just make sure that you're very confident in your design the worst thing you do is you can",
    "start": "3276200",
    "end": "3282260"
  },
  {
    "text": "do in my opinion is make something like it looks good thumbs up let's ship it and then what you just decided upon it's",
    "start": "3282260",
    "end": "3287930"
  },
  {
    "text": "going to cause you a year or more of tech debt and pain and that's pain like I'm happy to take on as an engineer",
    "start": "3287930",
    "end": "3293150"
  },
  {
    "text": "that's paint I never want to give to my players so ultimately thank you for spending your morning with me this is my",
    "start": "3293150",
    "end": "3299210"
  },
  {
    "text": "favorite project at riot totally loved working on it and happy to go with some",
    "start": "3299210",
    "end": "3304339"
  },
  {
    "text": "questions here we want to go first",
    "start": "3304339",
    "end": "3309520"
  },
  {
    "text": "I'll go first hey thanks a lot of great information and you talk question I had",
    "start": "3309680",
    "end": "3315200"
  },
  {
    "text": "was did you guys look at containerization at all of the kubernetes or you mentioned docker",
    "start": "3315200",
    "end": "3321890"
  },
  {
    "text": "earlier at Olivia's er yep yeah so so we have the right container engine or our",
    "start": "3321890",
    "end": "3327380"
  },
  {
    "text": "cluster that was originally built with its own customs got roller called admiral we are moving",
    "start": "3327380",
    "end": "3333050"
  },
  {
    "text": "that over into DCOs in the long run ultimately let's say it's two three",
    "start": "3333050",
    "end": "3339020"
  },
  {
    "text": "years from now when I come and give this talk all of these services will be in micro services and that will make the",
    "start": "3339020",
    "end": "3344810"
  },
  {
    "text": "process of maintaining and managing this a lot easier",
    "start": "3344810",
    "end": "3349510"
  },
  {
    "text": "great thank you no problem about your use cases for Packer versus chef sure so",
    "start": "3349930",
    "end": "3359150"
  },
  {
    "text": "in the chef's side we do have chef and I believe we're running currently chef 12 we have a layer on top of that which we",
    "start": "3359150",
    "end": "3366530"
  },
  {
    "text": "call Merlin and how we build the prep the packages and whatnot ultimately I think just because some of the",
    "start": "3366530",
    "end": "3371900"
  },
  {
    "text": "frustrations with that that kind of led to chef having a bad taste in the organization and people were very big on",
    "start": "3371900",
    "end": "3378650"
  },
  {
    "text": "packer and Hoshi Corp and so it just became I think like the new hot thing to be able to solve it I think if we went",
    "start": "3378650",
    "end": "3383960"
  },
  {
    "text": "with a pure chef solution it could have solved the problem a lot easier but we had some projects to kick that off but",
    "start": "3383960",
    "end": "3389570"
  },
  {
    "text": "unfortunately just due to the sour taste the shaft it didn't work out for us you guys are kind of deprecated chef so chef",
    "start": "3389570",
    "end": "3396170"
  },
  {
    "text": "we still use I think ultimately the deprecation of Chef will occur once everything is fully micro service dealt",
    "start": "3396170",
    "end": "3402170"
  },
  {
    "text": "out thanks yep hello hey thanks Rob great talk thank you what",
    "start": "3402170",
    "end": "3408080"
  },
  {
    "text": "do you guys do for monitoring observability between all those services",
    "start": "3408080",
    "end": "3413240"
  },
  {
    "text": "sure so we have our own data pipeline that we built to be able to collect all of our metrics and then we graph them I",
    "start": "3413240",
    "end": "3419090"
  },
  {
    "text": "believe through graph on ax and then we have a service called Loris we had a time where everything ended with owe us",
    "start": "3419090",
    "end": "3424670"
  },
  {
    "text": "so alert us we'll be able to monitor that and give us information and send that over to page or duty ultimately and",
    "start": "3424670",
    "end": "3430010"
  },
  {
    "text": "then let us know what's happening I think it's taken years for us to get the right metrics and to validate everything",
    "start": "3430010",
    "end": "3435620"
  },
  {
    "text": "but now for the platform I can say like we know that thing inside and out and how it'll work and then the micro services world it's",
    "start": "3435620",
    "end": "3441860"
  },
  {
    "text": "way easier to even be able to solve that problem but it uses the same pipeline that we have inside a riot Thanks so I'm",
    "start": "3441860",
    "end": "3448640"
  },
  {
    "text": "assuming I read your high level architecture diagram correctly it looks like you're not running any of the actual game servers enable yes is that",
    "start": "3448640",
    "end": "3455150"
  },
  {
    "text": "just due to geography or there any other reasons for that geography and then some concern around virtualization and its",
    "start": "3455150",
    "end": "3461810"
  },
  {
    "text": "timing capabilities ultimately we did test them and run games and played and it worked fine we",
    "start": "3461810",
    "end": "3467640"
  },
  {
    "text": "probably played maybe 50 games in that way I don't believe there's any issue and riot why it wouldn't work but for us",
    "start": "3467640",
    "end": "3473550"
  },
  {
    "text": "really having the geography as close to the player and then connecting into the riot direct backbone was the biggest win for us in that case thanks a lot yep",
    "start": "3473550",
    "end": "3480740"
  },
  {
    "text": "yeah yeah thanks thanks for your time today so you talked a little bit about how you decided to skip the manage",
    "start": "3480740",
    "end": "3487980"
  },
  {
    "text": "database services like Aurora and RDS to deliver a more consistent experience can",
    "start": "3487980",
    "end": "3493440"
  },
  {
    "text": "you talk a little bit more about how you ended up architecting your database solution if you rolled it yourself if that's behind the veil of secrecy then",
    "start": "3493440",
    "end": "3500010"
  },
  {
    "text": "that's fine it's a bit secret but we'll say we use the tool from scale arc which provides a",
    "start": "3500010",
    "end": "3505320"
  },
  {
    "text": "Mis you spin up and then provides the load balancing services okay cool thank you no problem happy to answer the two more questions",
    "start": "3505320",
    "end": "3511680"
  },
  {
    "text": "but just to let everybody know in a minute and a half we have to vacate the room so the next team can come in go",
    "start": "3511680",
    "end": "3517440"
  },
  {
    "text": "ahead my questions about testing strategies when you were building out packer and terraform were you able to",
    "start": "3517440",
    "end": "3524430"
  },
  {
    "text": "apply any test-driven development or automated testing or what strategies did you use ultimately in the beginning it",
    "start": "3524430",
    "end": "3533250"
  },
  {
    "text": "was all manually done but ultimately we have an ability with a build pipeline to build our image load it up an image and",
    "start": "3533250",
    "end": "3539370"
  },
  {
    "text": "then do some testing to ensure it works correctly so like manually after it's Bill in the pipeline",
    "start": "3539370",
    "end": "3545690"
  },
  {
    "text": "initially manually but now we have that step automated so the Packer pipeline will build launch the instance it'll",
    "start": "3545690",
    "end": "3551250"
  },
  {
    "text": "connect to it via SSH do some various tests and then ensure that it's working for us I can say it could be better hey",
    "start": "3551250",
    "end": "3557220"
  },
  {
    "text": "thank you yep last question I wanted to ask if based off your experiences with terraform if",
    "start": "3557220",
    "end": "3563850"
  },
  {
    "text": "you could go back and use something else would you and I'm happy to take my answer offline so I would say I would",
    "start": "3563850",
    "end": "3571140"
  },
  {
    "text": "love to explore different toolsets terraform did work very well for us but now that we have experienced it you know",
    "start": "3571140",
    "end": "3577320"
  },
  {
    "text": "greatly the good in the bad there are some folks who are looking at potential alternatives for us in the long run I",
    "start": "3577320",
    "end": "3582960"
  },
  {
    "text": "would say making that change in these environments would be very tough to do just given we have the workflows but",
    "start": "3582960",
    "end": "3588600"
  },
  {
    "text": "that's an area I'm very interested in exploring really and so for someone coming in fresh who isn't using anything",
    "start": "3588600",
    "end": "3594660"
  },
  {
    "text": "like that do you think Tara forms the way to go that absolutely if I had to pick one tool right now and all these from the ones",
    "start": "3594660",
    "end": "3600420"
  },
  {
    "text": "I'm familiar with terraform would be the way to go and for me the big win is the code you write for AWS obviously cannot",
    "start": "3600420",
    "end": "3607589"
  },
  {
    "text": "be used in Azure or bare metal but the tool set that they have in the pipe and the way that they have plug-in model",
    "start": "3607589",
    "end": "3613650"
  },
  {
    "text": "today in 11 I would totally go with it so definitely check out the book terraform up and running I did not write",
    "start": "3613650",
    "end": "3619529"
  },
  {
    "text": "it in order to get a cut of it but I think it's a great book to get started on thank you yep all right thanks",
    "start": "3619529",
    "end": "3624569"
  },
  {
    "text": "everybody enjoy the rest of your time here [Applause]",
    "start": "3624569",
    "end": "3630289"
  }
]