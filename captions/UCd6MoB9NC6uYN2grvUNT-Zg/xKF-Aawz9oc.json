[
  {
    "start": "0",
    "end": "95000"
  },
  {
    "text": "welcome and thank you for attending this session on scaling to millions of requests with elastic load balancing",
    "start": "4560",
    "end": "9760"
  },
  {
    "text": "i'm spencer dillard i'm the senior product manager with aws focusing on elastic load balancing today",
    "start": "9760",
    "end": "16080"
  },
  {
    "text": "we're going to cover the basics of elb we're going to talk a little bit about example use cases with elastic load balancing",
    "start": "16080",
    "end": "22720"
  },
  {
    "text": "and some best practices for testing and evaluating elb how many of those in the room currently",
    "start": "22720",
    "end": "28800"
  },
  {
    "text": "use elastic load balancing all right that's great to see thank you",
    "start": "28800",
    "end": "34960"
  },
  {
    "text": "finally i'll turn it over to kwaja shams and brett george with nasa jpl to discover",
    "start": "34960",
    "end": "40800"
  },
  {
    "text": "their case how they used elb how they used aws and how they delivered one of the largest traffic events",
    "start": "40800",
    "end": "47520"
  },
  {
    "text": "in nasa's history that was covered in the keynote this morning but covered in more detail here how they",
    "start": "47520",
    "end": "52640"
  },
  {
    "text": "architected their solution what worked and let them cover in detail how they went about it",
    "start": "52640",
    "end": "59840"
  },
  {
    "text": "elastic load balancing can be used in both ec2 and in vpc applications when you use it in vpc you have",
    "start": "64799",
    "end": "71520"
  },
  {
    "text": "additional option of creating an internal load balancer and you can add and remove security groups",
    "start": "71520",
    "end": "77759"
  },
  {
    "text": "how many of you are using elb and vpc today really curious what the growth is okay a",
    "start": "77759",
    "end": "82880"
  },
  {
    "text": "lot of people great so we'll cover a little bit more of some of the vpc applications",
    "start": "82880",
    "end": "88479"
  },
  {
    "text": "later in the presentation we wanted to talk a little bit about and",
    "start": "88479",
    "end": "93680"
  },
  {
    "text": "a lot of what we'll cover today is how elp scales up how does it handle traffic how does it adapt what makes it elastic and help give a",
    "start": "93680",
    "end": "100479"
  },
  {
    "start": "95000",
    "end": "95000"
  },
  {
    "text": "little better understanding of what's happening underneath the hood as you're running your application what is it doing to scale and meet the needs",
    "start": "100479",
    "end": "107040"
  },
  {
    "text": "of your application it relies on dns for scaling for those of you who are using elb today",
    "start": "107040",
    "end": "113280"
  },
  {
    "text": "are probably aware of that as resources are made available to your application",
    "start": "113280",
    "end": "118320"
  },
  {
    "text": "there are more ip addresses added to dns we'll cover that in some detail but it's completely dependent on dns to",
    "start": "118320",
    "end": "125360"
  },
  {
    "text": "be able to provide the changing elasticity the changing resources that are allocated to your load balancer",
    "start": "125360",
    "end": "132959"
  },
  {
    "text": "when you use a single load balancer it can span availability zones so it is a",
    "start": "135440",
    "end": "140560"
  },
  {
    "text": "regional entity you create a load balancer it can support one or more availability zones in a region",
    "start": "140560",
    "end": "147040"
  },
  {
    "text": "you can ensure that you need to have instances available in the zones that you enable so if you enable two zones you should",
    "start": "147040",
    "end": "153599"
  },
  {
    "text": "have instances running in those zones otherwise you really can have a false sense of confidence about the",
    "start": "153599",
    "end": "159040"
  },
  {
    "text": "availability that elb is providing if you enable three zones but have instances running in one we see a lot of people who",
    "start": "159040",
    "end": "166080"
  },
  {
    "text": "think that that is giving them availability when when really they're still at risk because their application is really only",
    "start": "166080",
    "end": "171440"
  },
  {
    "text": "running in one zone so it's important that as you think about uh elb providing that availability and that elasticity",
    "start": "171440",
    "end": "177920"
  },
  {
    "text": "that you also design your application to be able to work well in that context to be able to run across multiple",
    "start": "177920",
    "end": "183040"
  },
  {
    "text": "availability zones",
    "start": "183040",
    "end": "185840"
  },
  {
    "text": "elb supports both layer 4 and layer 7 load balancing this is one of the areas that we've seen",
    "start": "191599",
    "end": "196640"
  },
  {
    "text": "a lot of confusion on that people think it is a pure http layer 7 load balancer in reality elb",
    "start": "196640",
    "end": "202159"
  },
  {
    "text": "supports layer 4 either straight tcp load balancing or with ssl",
    "start": "202159",
    "end": "207360"
  },
  {
    "text": "offloading still layer 4 or layer 7. when you use layer 7 load balancing it",
    "start": "207360",
    "end": "213599"
  },
  {
    "text": "can be http or https and the load balancer is essentially terminating the request at that point",
    "start": "213599",
    "end": "219120"
  },
  {
    "text": "when it does so it adds headers for the exported 4 and you can use sticky sessions through",
    "start": "219120",
    "end": "224720"
  },
  {
    "text": "a cookie-based implementation",
    "start": "224720",
    "end": "228640"
  },
  {
    "text": "one of the the key things that we've seen a lot of growth in elb in and a lot of usage and i'm also curious how people are",
    "start": "230799",
    "end": "236000"
  },
  {
    "text": "using it for this is really to offload ssl and to leverage elb to provide",
    "start": "236000",
    "end": "243120"
  },
  {
    "text": "the computational support for ssl decryption and in some cases re-encryption and we're seeing that be a really huge",
    "start": "243120",
    "end": "249599"
  },
  {
    "text": "use case for elb and for people trying to reduce the cost of their applications and shift the burden of ssl decryption",
    "start": "249599",
    "end": "255920"
  },
  {
    "text": "onto elb again i'm going to do a little quick survey how many people are using the ssl aspects of elb today all right",
    "start": "255920",
    "end": "264160"
  },
  {
    "text": "decent sampling there probably about a quarter that's about what we've seen overall",
    "start": "264160",
    "end": "270160"
  },
  {
    "text": "one of the key points of elb is that it's integrated with a number of the aws services and applications it's really",
    "start": "272880",
    "end": "279199"
  },
  {
    "text": "intended to be simple it's intended to be very easy to use and lets you use all of aws that makes sense in the",
    "start": "279199",
    "end": "286240"
  },
  {
    "text": "context of eob so as you use elb the aws management console provides",
    "start": "286240",
    "end": "292560"
  },
  {
    "text": "nearly complete support for everything you can do with your load balancer allows you to change",
    "start": "292560",
    "end": "298080"
  },
  {
    "text": "listeners to add instances remove instances add zones change your ssl certificate control the",
    "start": "298080",
    "end": "305039"
  },
  {
    "text": "ciphers and policy and protocols that are presented to ssl clients gives you full control",
    "start": "305039",
    "end": "310400"
  },
  {
    "text": "over the application of course you can still use the command line tools the api the sdks all of that is available but",
    "start": "310400",
    "end": "317919"
  },
  {
    "text": "the console has really grown a lot in the past year to provide pretty full support for all the features of elb",
    "start": "317919",
    "end": "325840"
  },
  {
    "text": "a really key feature of eob is that you get out of the box a number of features through cloudwatch to",
    "start": "327520",
    "end": "332800"
  },
  {
    "text": "be able to understand how your load balancer is behaving how your application is behaving specifically some of the key metrics",
    "start": "332800",
    "end": "339520"
  },
  {
    "text": "that eob provides are latency of your backend instances so what is the response time of your",
    "start": "339520",
    "end": "345680"
  },
  {
    "text": "instances how are they responding are they overloaded are they underweighted and responding too fast",
    "start": "345680",
    "end": "351680"
  },
  {
    "text": "maybe you can reduce capacity it also provides the request count how many successful",
    "start": "351680",
    "end": "357360"
  },
  {
    "text": "either tcp connections and responses or http request response have been",
    "start": "357360",
    "end": "362639"
  },
  {
    "text": "completed as well as http error codes and status codes so you really can get a pretty good",
    "start": "362639",
    "end": "367840"
  },
  {
    "text": "overview of your overall health of your application through the load balancer including how many healthy or unhealthy instances",
    "start": "367840",
    "end": "374960"
  },
  {
    "text": "are currently running behind the load balancer all of that is available through cloudwatch today",
    "start": "374960",
    "end": "381520"
  },
  {
    "text": "when you create an elb there is a hosted zone that is created with route53 this allows you to create an alias to",
    "start": "381520",
    "end": "388000"
  },
  {
    "text": "your load balancer so if you need zone apex or root domain support you can use route53 for that it also",
    "start": "388000",
    "end": "395360"
  },
  {
    "text": "you can use a c name which is how historically most users have done it is to create a c name to the load",
    "start": "395360",
    "end": "400720"
  },
  {
    "text": "balancer's dns name but you don't have to if you prefer route 53 and use the alias feature",
    "start": "400720",
    "end": "407360"
  },
  {
    "text": "you get a couple of added benefits of clients not having to get the c name and then re-resolve that",
    "start": "407360",
    "end": "412400"
  },
  {
    "text": "slightly better response time in terms of that cycle and you get added benefits of route 53",
    "start": "412400",
    "end": "417440"
  },
  {
    "text": "features such as latency based routing being able to stream together multiple regions in one domain",
    "start": "417440",
    "end": "423759"
  },
  {
    "text": "a number of features that come with the route 53 integration",
    "start": "423759",
    "end": "428160"
  },
  {
    "start": "428000",
    "end": "428000"
  },
  {
    "text": "while you can directly register instances with elastic load balancing really one of the key features that",
    "start": "429759",
    "end": "435680"
  },
  {
    "text": "customers use very heavily is auto scaling auto scaling makes it just super simple to be",
    "start": "435680",
    "end": "441680"
  },
  {
    "text": "able to ensure that you have the capacity for your application to be able to ensure that your application has enough instances that",
    "start": "441680",
    "end": "448639"
  },
  {
    "text": "they're not overloaded to be able to scale up and down and really makes it simple for you to do nothing more than define your auto",
    "start": "448639",
    "end": "455360"
  },
  {
    "text": "scaling group register it with an elb and off you go your application is running",
    "start": "455360",
    "end": "461759"
  },
  {
    "text": "finally there's im support for your ssl certificates so you can upload your ssl certificates",
    "start": "463680",
    "end": "469440"
  },
  {
    "text": "and private keys through the aws console or through the iam tools directly",
    "start": "469440",
    "end": "474479"
  },
  {
    "text": "when you do so you can apply them and add and remove certificates to your load balancer update them through the console really",
    "start": "474479",
    "end": "481520"
  },
  {
    "text": "makes it very easy to keep them updated be able to apply updates easily without a lot of effort",
    "start": "481520",
    "end": "492319"
  },
  {
    "text": "so a couple of architectures that are common with elastic load balancing walk through a few",
    "start": "492319",
    "end": "497680"
  },
  {
    "start": "497000",
    "end": "497000"
  },
  {
    "text": "and then some of these will be covered in greater detail with how nasa and jpl used elb",
    "start": "497680",
    "end": "502800"
  },
  {
    "text": "when you use it in ec2 or in vpc you can enable multiple availability zones one of the easiest",
    "start": "502800",
    "end": "509599"
  },
  {
    "text": "ways is to use auto scaling and let autoscaling launch instances again with with eob so those instances in those",
    "start": "509599",
    "end": "516560"
  },
  {
    "text": "groups could be auto scaled",
    "start": "516560",
    "end": "521839"
  },
  {
    "text": "it really makes it very simple to add and remove zones so if you want to move out of one zone for whatever reason",
    "start": "521919",
    "end": "527279"
  },
  {
    "text": "switch to another go from three zones to two very simple change to add and remove a zone",
    "start": "527279",
    "end": "534240"
  },
  {
    "text": "and vpc the behavior is essentially the same but in vpc there's a slight total",
    "start": "534240",
    "end": "539360"
  },
  {
    "text": "difference that you register subnets so you're specifying the subnet that load balancer will put",
    "start": "539360",
    "end": "546000"
  },
  {
    "text": "an interface into that subnet it can still be public facing but one of the advantages of epc and",
    "start": "546000",
    "end": "552000"
  },
  {
    "text": "this came out earlier this year is the ability to use internal load balancers which enables an architecture",
    "start": "552000",
    "end": "557360"
  },
  {
    "text": "more like this that is shown where you may have a public-facing load balancer and that load balancer is open to either",
    "start": "557360",
    "end": "563920"
  },
  {
    "text": "the internet or it may even be open only to a subgroup of cider blocks maybe open to just your",
    "start": "563920",
    "end": "570880"
  },
  {
    "text": "home office for example but the internal load balancer has no public ip it only has private ip",
    "start": "570880",
    "end": "577040"
  },
  {
    "text": "addresses and can only be reached from within your vpc from within your subnets so a common application that we're",
    "start": "577040",
    "end": "583200"
  },
  {
    "text": "seeing more and more and was a very heavily requested feature from customers was the ability",
    "start": "583200",
    "end": "588959"
  },
  {
    "text": "to do internal load balancing so that you really can tear your architecture but still make it",
    "start": "588959",
    "end": "594959"
  },
  {
    "text": "very easy to use auto scaling to scale up back-end services",
    "start": "594959",
    "end": "599839"
  },
  {
    "start": "601000",
    "end": "601000"
  },
  {
    "text": "whenever elb is talking to its back ends it will always use the private ipe address of your instances",
    "start": "601680",
    "end": "608800"
  },
  {
    "text": "so i want to walk through a couple of what happens when elb scales explain a little bit about the strategies what it does to add capacity",
    "start": "612160",
    "end": "619279"
  },
  {
    "text": "to your load balancer and how that works and then in a minute we'll talk about some testing strategies how does this",
    "start": "619279",
    "end": "625360"
  },
  {
    "text": "behavior affect your application how does it affect how you think about architecting your solution",
    "start": "625360",
    "end": "632560"
  },
  {
    "text": "so when you first create a load balancer there's an initial amount of capacity that's allocated so in this diagram the black area",
    "start": "632560",
    "end": "639360"
  },
  {
    "text": "basically shows the ip address that's currently in dns and the resources that have been allocated so there's a certain default",
    "start": "639360",
    "end": "645600"
  },
  {
    "text": "level of allocation of capacity when you first create the load balancer what happens after that depends on your",
    "start": "645600",
    "end": "651279"
  },
  {
    "text": "traffic and it depends on time and there's fundamentally two dimensions that we're looking at to decide",
    "start": "651279",
    "end": "656320"
  },
  {
    "text": "when to scale up down out or in and elb can take any of those actions so",
    "start": "656320",
    "end": "661760"
  },
  {
    "text": "scaling out is essentially horizontal adding more ip addresses scaling in reducing ip addresses",
    "start": "661760",
    "end": "667360"
  },
  {
    "text": "but we may also scale to higher performing instances or lower performing instances and nodes to make sure that we have the",
    "start": "667360",
    "end": "674240"
  },
  {
    "text": "right capacity for your application at that point in time so when you first create an eob for",
    "start": "674240",
    "end": "679440"
  },
  {
    "text": "example you might have capacity in each zone that you've enabled so in this case we've added two zones",
    "start": "679440",
    "end": "684560"
  },
  {
    "text": "and an initial capacity is allocated as more traffic comes to your load balancer",
    "start": "684560",
    "end": "689839"
  },
  {
    "text": "new ip addresses will be added to the dns record it's important to note and something that a lot of people i think",
    "start": "689839",
    "end": "694880"
  },
  {
    "text": "have had a little bit of a challenge with is that that old capacity doesn't",
    "start": "694880",
    "end": "700800"
  },
  {
    "text": "doesn't immediately go away in fact clients can continue hitting the old ip addresses for a period of time",
    "start": "700800",
    "end": "706800"
  },
  {
    "text": "because elb really tries to do everything it can to make sure that that traffic gets to your application uh historically one of the things that",
    "start": "706800",
    "end": "712720"
  },
  {
    "text": "we had a lot of feedback on was that it scaled too rapidly from the point of view of moving ip addresses around within say an",
    "start": "712720",
    "end": "720320"
  },
  {
    "text": "hour and it was too rapid for some applications so we made a number of changes over the past year to really change this and that capacity",
    "start": "720320",
    "end": "726720"
  },
  {
    "text": "could be around for hours depending on your traffic and your clients it could be around for days but we're really trying to make sure the",
    "start": "726720",
    "end": "732639"
  },
  {
    "text": "traffic gets to your application so at this point eob has scaled it scaled up",
    "start": "732639",
    "end": "737839"
  },
  {
    "text": "and it's put two new ip addresses in dns as identified by the black areas on there the yellow is still running still around",
    "start": "737839",
    "end": "745040"
  },
  {
    "text": "able to handle traffic this gives us an extra added boost so that at moments of scaling",
    "start": "745040",
    "end": "750079"
  },
  {
    "text": "eob doesn't go from one set of resources to a completely different it's really adding capacity and then",
    "start": "750079",
    "end": "756000"
  },
  {
    "text": "eventually the the older capacity will be removed from the load balancer",
    "start": "756000",
    "end": "761519"
  },
  {
    "text": "as traffic continues to flow into the load balancer we'll continue to add more capacity this",
    "start": "761519",
    "end": "766880"
  },
  {
    "text": "again can be scaling up or scaling out the ip addresses will keep getting reflected in the dns record",
    "start": "766880",
    "end": "773120"
  },
  {
    "text": "so it's really critical that as you build your applications there are a couple of factors that come into play the dns",
    "start": "773120",
    "end": "779360"
  },
  {
    "text": "record has a 60 second ttl a time to live so clients that cache dns permanently",
    "start": "779360",
    "end": "786160"
  },
  {
    "text": "can have a very bad experience with elb that's part of the reason why we leave that old capacity around is to reduce",
    "start": "786160",
    "end": "792240"
  },
  {
    "text": "the risk of this happening but as we do that the dns record gets updated with a 60 second ttl",
    "start": "792240",
    "end": "798959"
  },
  {
    "text": "clients need to re-resolve to take advantage of this new capacity it's less of an issue in the real world",
    "start": "798959",
    "end": "804959"
  },
  {
    "text": "but it is an issue especially in synthetic testing where a lot of these things come into play when you're trying to test and evaluate",
    "start": "804959",
    "end": "811519"
  },
  {
    "text": "the load balancer",
    "start": "811519",
    "end": "815839"
  },
  {
    "text": "so as the load balancer goes on as your traffic subsides that old capacity will eventually be",
    "start": "817360",
    "end": "822480"
  },
  {
    "text": "removed and you may be at four i p addresses you could be at two there's really not a limit per se as to",
    "start": "822480",
    "end": "828800"
  },
  {
    "text": "what the ip addresses could be returned the dns record will return up to eight ip addresses today",
    "start": "828800",
    "end": "835199"
  },
  {
    "text": "so clients can try to connect to another one if for some reason they can't connect to one of the eight that are returned but",
    "start": "835199",
    "end": "841279"
  },
  {
    "text": "there may be many more than eight behind your load balancer at any point in time it really depends on what's happened to your traffic",
    "start": "841279",
    "end": "849120"
  },
  {
    "start": "852000",
    "end": "852000"
  },
  {
    "text": "so there's a lot of different applications and patterns that we see in customers so",
    "start": "852399",
    "end": "857760"
  },
  {
    "text": "one of the things we did was take a snapshot of a couple of customer applications and we really wanted to kind of give an",
    "start": "857760",
    "end": "864160"
  },
  {
    "text": "example of what they experience the types of traffic patterns that work really well with elb",
    "start": "864160",
    "end": "869519"
  },
  {
    "text": "so for example a very fairly common application and we've changed all the values to",
    "start": "869519",
    "end": "874800"
  },
  {
    "text": "protect customers identities and put them on a similar scale but basically very consistent traffic",
    "start": "874800",
    "end": "881199"
  },
  {
    "text": "patterns this is really easy for elastic load balancing fundamentally what it has to provide is making sure that any node any ip",
    "start": "881199",
    "end": "888720"
  },
  {
    "text": "address that's been allocated is running it's responsible for replacing any node that has a problem or fails",
    "start": "888720",
    "end": "895360"
  },
  {
    "text": "putting it back in service and ensuring your application continues running a very straightforward application a lot",
    "start": "895360",
    "end": "901760"
  },
  {
    "text": "not a lot of need for auto scaling day to day uh tends to be more about auto scaling to ensure that",
    "start": "901760",
    "end": "907360"
  },
  {
    "text": "there's a certain number of instances running and the load balancer is really just handling the traffic pretty seamlessly",
    "start": "907360",
    "end": "912560"
  },
  {
    "text": "in these cases",
    "start": "912560",
    "end": "915199"
  },
  {
    "text": "so an alternate pattern that we see quite often too is kind of the nine to five type pattern customers that every day are scaling up",
    "start": "919199",
    "end": "925920"
  },
  {
    "text": "their traffic is increasing at eight or nine in the morning it's ramping up every morning and then it con continues throughout the day",
    "start": "925920",
    "end": "933360"
  },
  {
    "text": "and then eventually starts declining and repeats the next day uh we have a lot of customers in this case uh elb handles it really well this is",
    "start": "933360",
    "end": "941440"
  },
  {
    "text": "over a period of hours that these ramps are increasing very normal pattern and the load",
    "start": "941440",
    "end": "947440"
  },
  {
    "text": "balancer will generally scale down fairly conservatively to protect against this type of pattern",
    "start": "947440",
    "end": "954079"
  },
  {
    "text": "for those who may have used it two three years ago we scaled a lot more aggressively and there were some issues here",
    "start": "954079",
    "end": "959600"
  },
  {
    "text": "another area of feedback that we had was really making it more stable in terms of the capacity we",
    "start": "959600",
    "end": "964720"
  },
  {
    "text": "allocate and less impactful when you have these daily cycles and we've really seen a had good",
    "start": "964720",
    "end": "970959"
  },
  {
    "text": "feedback so far that the the changes we made to adjust the scaling really have fit the applications",
    "start": "970959",
    "end": "976160"
  },
  {
    "text": "much better that people are running and finally we see cases where there are",
    "start": "976160",
    "end": "981440"
  },
  {
    "text": "spikes in scaling this is still okay this is still a matter of an hour two type of scaling big increase",
    "start": "981440",
    "end": "989600"
  },
  {
    "text": "for example an email goes out and it's a gradual ramp up in traffic this works really well with the load",
    "start": "989600",
    "end": "995360"
  },
  {
    "text": "balancer it can scale up roughly at about uh 20 percent increase",
    "start": "995360",
    "end": "1000639"
  },
  {
    "text": "in traffic every five to 10 minutes is no problem for for the load balancer",
    "start": "1000639",
    "end": "1006000"
  },
  {
    "text": "in a case where the load balancer is less of a good fit and i think it's important people understand what you can do in these cases and nasa",
    "start": "1006000",
    "end": "1013279"
  },
  {
    "text": "will cover some of these aspects as well the load balancer will have a",
    "start": "1013279",
    "end": "1019440"
  },
  {
    "text": "a massive spike for example a concert and we see this type of scenario decently often an email or tweet goes out for a concert",
    "start": "1019440",
    "end": "1026959"
  },
  {
    "text": "and the load balancer and the application goes from 100 requests a minute to",
    "start": "1026959",
    "end": "1032000"
  },
  {
    "text": "a million requests a minute and it does so in 30 seconds that's a little harder case and when",
    "start": "1032000",
    "end": "1038558"
  },
  {
    "text": "you're planning for that type of application there's a couple of things you can do so one of the easiest solutions is if",
    "start": "1038559",
    "end": "1044000"
  },
  {
    "text": "it's if it's highly casual content you should definitely consider looking at putting cloudfront",
    "start": "1044000",
    "end": "1049280"
  },
  {
    "text": "in front of the elb and using eob as a custom origin is one of the easiest solutions to providing that that type of a solution",
    "start": "1049280",
    "end": "1056160"
  },
  {
    "text": "uh alternatively if you know that you're gonna some that type of message is going out you can drive traffic",
    "start": "1056160",
    "end": "1061440"
  },
  {
    "text": "to your load balancer and cause it to scale up and be ready for that traffic when it comes",
    "start": "1061440",
    "end": "1067840"
  },
  {
    "text": "so finally walking through a couple of considerations as you test and evaluate your load balancer",
    "start": "1070640",
    "end": "1076240"
  },
  {
    "text": "a key part is the ramp up time as we went through in the scaling approach and what elb does to scale the",
    "start": "1076240",
    "end": "1083120"
  },
  {
    "text": "load balancer will add capacity and it does that by monitoring the traffic to your load balancer",
    "start": "1083120",
    "end": "1088160"
  },
  {
    "text": "so roughly over a five minute window it's looking at how much traffic has gone through has it breached the threshold at which",
    "start": "1088160",
    "end": "1094400"
  },
  {
    "text": "we need to scale and if so it initiates a scaling activity this takes a little bit of time",
    "start": "1094400",
    "end": "1100240"
  },
  {
    "text": "and it can take anywhere from five to ten minutes to scale up each step so if you are testing or evaluating the",
    "start": "1100240",
    "end": "1106559"
  },
  {
    "text": "load balancer if you bought a hardware load balancer a common practice might be to suddenly throw a million requests at it",
    "start": "1106559",
    "end": "1112160"
  },
  {
    "text": "and see if it can handle it it's a very different approach with eob you want to ramp that up over time to",
    "start": "1112160",
    "end": "1118000"
  },
  {
    "text": "get to what you expect your steady state to be your application is going to also you",
    "start": "1118000",
    "end": "1123120"
  },
  {
    "text": "would want to do that to drive the traffic so your load balancer is ready when you flip it to your domain and are ready to use it in production",
    "start": "1123120",
    "end": "1130960"
  },
  {
    "text": "typically you want to use a factor of about an increase of 20 every five minutes is sufficient for it to continue to scale",
    "start": "1130960",
    "end": "1138480"
  },
  {
    "text": "and that's really a general guideline the performance will differ if you're using ssl",
    "start": "1138480",
    "end": "1143600"
  },
  {
    "text": "if you're offloading if you do not have persistent connections there's a number of factors so when",
    "start": "1143600",
    "end": "1148720"
  },
  {
    "text": "you're testing it's important to find out the right balance there for your application and your types of clients",
    "start": "1148720",
    "end": "1155600"
  },
  {
    "text": "as we covered a minute ago the initial allocation of capacity to your load balancer may not be right for your application",
    "start": "1157200",
    "end": "1163360"
  },
  {
    "text": "it'll scale up over time but if you leave that load balancer alone if you just create it and you walk",
    "start": "1163360",
    "end": "1168720"
  },
  {
    "text": "away and two weeks later you decide to run your load test it may have scaled down because there was no traffic for a week or two",
    "start": "1168720",
    "end": "1175280"
  },
  {
    "text": "that's going to be a generally a poor experience if you then turn around and throw a million requests at it so you need to both come ramp up your",
    "start": "1175280",
    "end": "1182480"
  },
  {
    "text": "traffic and also if you're going to test it test it within a day or so of when you've created it otherwise it",
    "start": "1182480",
    "end": "1188559"
  },
  {
    "text": "may have scaled down from the initial allocation",
    "start": "1188559",
    "end": "1193840"
  },
  {
    "text": "a key point in your testing is to make sure you understand how your clients are testing we see a lot of cases where people are",
    "start": "1194720",
    "end": "1200799"
  },
  {
    "text": "frustrated or confused because they did a load test and it was one or two clients",
    "start": "1200799",
    "end": "1206240"
  },
  {
    "text": "that were sending hundreds of thousands of requests and they didn't they weren't resolving dns and it was only say two clients",
    "start": "1206240",
    "end": "1213679"
  },
  {
    "text": "uh a very common problem here is uh older java based applications that made by default have the dns caching",
    "start": "1213679",
    "end": "1221280"
  },
  {
    "text": "set to permanent when you do that essentially the load balancer is scaling up it's trying to add more resources add",
    "start": "1221280",
    "end": "1227200"
  },
  {
    "text": "more resources but as it is the clients keep using the same original resources that were allocated",
    "start": "1227200",
    "end": "1233120"
  },
  {
    "text": "they're not adapting as the load balancer has adapted so it's really important that you figure out how to test",
    "start": "1233120",
    "end": "1238559"
  },
  {
    "text": "with distributed clients multiple clients and that those clients are re-resolving dns",
    "start": "1238559",
    "end": "1244240"
  },
  {
    "text": "one of the really effective strategies that's been used heavily with elb is something called bees with machine",
    "start": "1244240",
    "end": "1250320"
  },
  {
    "text": "guns that's an open source python based solution we use it ourselves as well for some testing",
    "start": "1250320",
    "end": "1256320"
  },
  {
    "text": "it's very effective at being able to launch a number of instances use them to throw traffic at a load balancer ramp it",
    "start": "1256320",
    "end": "1261760"
  },
  {
    "text": "up have some control and do a really good job of simulating a fairly real world experience",
    "start": "1261760",
    "end": "1268559"
  },
  {
    "text": "these with machine guns it's a very odd name i didn't name it i think it was the chicago tribune if",
    "start": "1272400",
    "end": "1277840"
  },
  {
    "text": "i'm not mistaken that came up with it uh and it's on github as well but it's really really solid application for",
    "start": "1277840",
    "end": "1284240"
  },
  {
    "text": "people to use it in fact there is a cloud formation template uh that is available on the cloudformation site that",
    "start": "1284240",
    "end": "1290960"
  },
  {
    "text": "lets you fire up a visa machine gun stack and point it at a url in a few minutes so you can really get",
    "start": "1290960",
    "end": "1296799"
  },
  {
    "text": "up and running very easily as you're doing your testing and evaluation it's obviously important to",
    "start": "1296799",
    "end": "1302799"
  },
  {
    "start": "1300000",
    "end": "1300000"
  },
  {
    "text": "monitor your environment it's important to make sure you know how you're doing you can use cloudwatch for that and you can continue",
    "start": "1302799",
    "end": "1309679"
  },
  {
    "text": "to monitor both the load balancer and your application instances throughout your test",
    "start": "1309679",
    "end": "1314880"
  },
  {
    "text": "i'm going to wrap up and turn over to brett and quaja to go through nasa's use case nasa jpl",
    "start": "1314880",
    "end": "1321840"
  },
  {
    "text": "thanks spencer thanks all right so my name is kwaja this is",
    "start": "1323919",
    "end": "1330559"
  },
  {
    "text": "brett we're from the nasa jet propulsion laboratory and we're going to talk about the landing night and the video streaming",
    "start": "1330559",
    "end": "1336159"
  },
  {
    "text": "solution that we put in place uh essentially just a little bit of a background curiosity",
    "start": "1336159",
    "end": "1341440"
  },
  {
    "text": "is a one-ton rover that we're about to land on the surface of mars and we knew that the world was going to",
    "start": "1341440",
    "end": "1347120"
  },
  {
    "text": "be excited and watching us but we didn't exactly know how much capacity we needed we anticipated our traffic to be",
    "start": "1347120",
    "end": "1352960"
  },
  {
    "text": "anywhere from 200 gigabits per second to over a terabit per second and it was a tough uh environment",
    "start": "1352960",
    "end": "1358400"
  },
  {
    "text": "situation for us to be in because we didn't want to go and start provisioning more capacity than we really needed but we",
    "start": "1358400",
    "end": "1363440"
  },
  {
    "text": "also didn't want to have infinite capacity or virtually limitless capacity at our disposal so with that in mind we worked very",
    "start": "1363440",
    "end": "1369679"
  },
  {
    "text": "closely with folks at amazon uh and the engineers at jpl the most",
    "start": "1369679",
    "end": "1375600"
  },
  {
    "text": "important part of this story is that we had two weeks to deploy the solution to come up with",
    "start": "1375600",
    "end": "1380960"
  },
  {
    "text": "build design test and deploy the solution because we wanted to have another streaming outlet for us and within two weeks",
    "start": "1380960",
    "end": "1387360"
  },
  {
    "text": "multiple engineers at amazon worked with us as well as",
    "start": "1387360",
    "end": "1392400"
  },
  {
    "text": "engineers at nasa including myself and brett so folks like jamie kinney and miles ward helped us",
    "start": "1392400",
    "end": "1397520"
  },
  {
    "text": "significantly in designing this architecture and putting us out there and we're going to take you through what this architecture is about today",
    "start": "1397520",
    "end": "1404559"
  },
  {
    "text": "but before that we want to get into what we were trying to accomplish we were trying to accomplish elbs on steroids we",
    "start": "1404559",
    "end": "1410080"
  },
  {
    "text": "wanted to get to terabits per second of traffic and we wanted to have a horizontally scalable application that can sustain you know",
    "start": "1410080",
    "end": "1416400"
  },
  {
    "text": "hundreds of gigabits per second and to do that we use some tools ralph 53",
    "start": "1416400",
    "end": "1421440"
  },
  {
    "text": "for instance so ralph 53 allows us to get some very neat features to actually put albs on steroids first of",
    "start": "1421440",
    "end": "1428159"
  },
  {
    "text": "all with weighted round robin support in ralph 33 were allowed to use multiple elbs across",
    "start": "1428159",
    "end": "1434240"
  },
  {
    "text": "even multiple regions if he wanted to so if you wanted to you could have",
    "start": "1434240",
    "end": "1440080"
  },
  {
    "text": "an elb in the east coast an elb in san francisco and eob and pdx which is oregon as well as an elb in ireland in tokyo",
    "start": "1440080",
    "end": "1449200"
  },
  {
    "text": "in australia and you can connect all of those together with weighted round robins such that if an entire continent",
    "start": "1449200",
    "end": "1454960"
  },
  {
    "text": "goes down you can rapidly update your route 350 configurations and take the out the regions that have their",
    "start": "1454960",
    "end": "1461600"
  },
  {
    "text": "suffering outages completely out of the picture within a matter of 60 seconds we also can use route 53 to",
    "start": "1461600",
    "end": "1469440"
  },
  {
    "text": "use latency-based routing which means that users from virginia when they resolve the dns entry",
    "start": "1469440",
    "end": "1474880"
  },
  {
    "text": "they get directed to an elb in the east coast when users in la resolve the same dns",
    "start": "1474880",
    "end": "1480799"
  },
  {
    "text": "entry they get directed to data centers in san francisco and more importantly a lot of people around the internet are actually",
    "start": "1480799",
    "end": "1487600"
  },
  {
    "text": "combining the weighted round robin and elastic and the latency based routing to come up with",
    "start": "1487600",
    "end": "1493120"
  },
  {
    "text": "some very powerful solutions to augment what the alb can do for you",
    "start": "1493120",
    "end": "1499039"
  },
  {
    "text": "we also used cloud formation very extensively when you start having a very complex",
    "start": "1499200",
    "end": "1504559"
  },
  {
    "text": "architecture it's very helpful for us to be able to express that complex architecture succinctly and be able to",
    "start": "1504559",
    "end": "1510240"
  },
  {
    "text": "deploy that entire architecture with a click of a single button it's also very nice for us to be able to",
    "start": "1510240",
    "end": "1516159"
  },
  {
    "text": "clean up those instances uh cleanly and brett will go into a little bit more details on that",
    "start": "1516159",
    "end": "1522320"
  },
  {
    "text": "and even more importantly it's important for us to understand the differences between the regions and the availability zones it's more for us",
    "start": "1522320",
    "end": "1528640"
  },
  {
    "text": "to understand that each availability zone is isolated it's fault isolated so that",
    "start": "1528640",
    "end": "1534000"
  },
  {
    "text": "if you an elb is actually a highly available service that spans across multiple",
    "start": "1534000",
    "end": "1539120"
  },
  {
    "text": "availability zones so if in case an entire a z goes down you can still",
    "start": "1539120",
    "end": "1545200"
  },
  {
    "text": "automatically stop your instances in a in the particular az and still service your request to the users without letting them feel any",
    "start": "1545200",
    "end": "1551360"
  },
  {
    "text": "outage and then with route 3 we're actually able to do multi-region mission critical applications",
    "start": "1551360",
    "end": "1557760"
  },
  {
    "text": "yeah so um i'm going to go ahead and go into the detail about how we actually implemented the solution using all these technologies we just",
    "start": "1557760",
    "end": "1563840"
  },
  {
    "text": "talked about i know this is mostly a talk about elastic load balancers and",
    "start": "1563840",
    "end": "1569200"
  },
  {
    "text": "you know their function and their usefulness but it's really hard to talk about just them isolating or working by themselves",
    "start": "1569200",
    "end": "1574960"
  },
  {
    "text": "because i'm sure you all know we tend to use elastic load balancers as part of a complete solution so i'm going to go into how we use that",
    "start": "1574960",
    "end": "1581520"
  },
  {
    "text": "a little bit of a backing up a little bit um kwaja mentioned that we had two weeks to work on this is actually a little bit",
    "start": "1581520",
    "end": "1587200"
  },
  {
    "text": "less than that um probably more like a week and a like maybe a day or two yeah there you go and on top of that",
    "start": "1587200",
    "end": "1595600"
  },
  {
    "text": "this is a completely new arena for us so this whole video streaming solution we hadn't done that before none of us",
    "start": "1595600",
    "end": "1600640"
  },
  {
    "text": "really had experience so we had amazing help from jamie kinney and miles ward",
    "start": "1600640",
    "end": "1605840"
  },
  {
    "text": "amazon they're great guys they helped us out and we got all that done within a week not to toot our own horn but i think",
    "start": "1605840",
    "end": "1611520"
  },
  {
    "text": "it's testimony to the fact of like how easy the tools were to use and just how successful we were at being able to use",
    "start": "1611520",
    "end": "1616559"
  },
  {
    "text": "those tools quickly as somebody who had never really used them before so the problem that we were facing is",
    "start": "1616559",
    "end": "1623039"
  },
  {
    "text": "that we knew we wanted to deliver this video streaming to the public but we had no idea one how",
    "start": "1623039",
    "end": "1628480"
  },
  {
    "text": "many how much traffic we would have we just had no way to estimate this two we again not having the experience",
    "start": "1628480",
    "end": "1635760"
  },
  {
    "text": "to do this we we knew that we had to be able to scale dynamically going back to the",
    "start": "1635760",
    "end": "1641760"
  },
  {
    "text": "point of not knowing how many people are going to view this and it's important to note that we have to scale up as well as scale down",
    "start": "1641760",
    "end": "1647919"
  },
  {
    "text": "because right at the peak of the curiosity landing everybody tuned in to our system and then right after we were done you",
    "start": "1647919",
    "end": "1653919"
  },
  {
    "text": "know within a few hours you know we tailored off to almost having you know very little traffic yeah and actually",
    "start": "1653919",
    "end": "1659039"
  },
  {
    "text": "you're gonna see that um so what i'm gonna do is i'm gonna talk about the details of the actual uh implementation go over some of the uh tools that we use",
    "start": "1659039",
    "end": "1666080"
  },
  {
    "text": "and how we tested our solution and then actually talk about how it actually ended up working out and",
    "start": "1666080",
    "end": "1671520"
  },
  {
    "text": "you'll see some of the graphs it's pretty extreme how traffic spiked and just tailed off i mean it's kind of to be expected you",
    "start": "1671520",
    "end": "1677120"
  },
  {
    "text": "know people were mostly concerned about the seven minutes of terror although how many of you had like an entire day landing event party",
    "start": "1677120",
    "end": "1683440"
  },
  {
    "text": "at your place anybody at one person um yeah so most people were tuned in for",
    "start": "1683440",
    "end": "1690000"
  },
  {
    "text": "that one particular moment and rightfully so is the most exciting part um so our solution was comprised of at the",
    "start": "1690000",
    "end": "1696799"
  },
  {
    "text": "very bottom uh adobe flash media servers uh ec2 instances deployed into a few different",
    "start": "1696799",
    "end": "1702480"
  },
  {
    "start": "1699000",
    "end": "1699000"
  },
  {
    "text": "availability zones in a few different regions uh us west one and two u.s east and also in europe",
    "start": "1702480",
    "end": "1710640"
  },
  {
    "text": "these these servers were basically receiving video that was being pushed out to them from our wirecast",
    "start": "1710640",
    "end": "1716320"
  },
  {
    "text": "stream and they would be they would be acting as the origin video servers",
    "start": "1716320",
    "end": "1722398"
  },
  {
    "text": "so on top of that we would deploy cloud formation stacks um the reason i kind of have cloudformation stacks being a separate",
    "start": "1722480",
    "end": "1728399"
  },
  {
    "text": "thing here is that you can think about elbs being they essentially are the backbone of our solution they actually are what made it",
    "start": "1728399",
    "end": "1734320"
  },
  {
    "text": "possible but cloud formation is the glue that held everything together that allowed us to integrate all these services together and actually allow us",
    "start": "1734320",
    "end": "1741120"
  },
  {
    "text": "to deploy these uh stacks of cache nodes you know easily and quickly into",
    "start": "1741120",
    "end": "1747039"
  },
  {
    "text": "as many availability zones and regions as we wanted so we would deploy a stack into availability zone at the very bottom of",
    "start": "1747039",
    "end": "1753840"
  },
  {
    "text": "that stack was a layer of nginx cache nodes uh these nginx cache nodes would",
    "start": "1753840",
    "end": "1760080"
  },
  {
    "text": "reference uh one of the flash media servers and actually that diagram's not entirely accurate it would um oh",
    "start": "1760080",
    "end": "1766240"
  },
  {
    "text": "sorry it's not entirely accurate the the tier one cache would actually",
    "start": "1766240",
    "end": "1771520"
  },
  {
    "text": "reference um multiple uh flash media server instances but what it would do is it would prefer",
    "start": "1771520",
    "end": "1777679"
  },
  {
    "text": "the instances that are in its own region just to provide locality",
    "start": "1777679",
    "end": "1783039"
  },
  {
    "text": "on top of that we had a second layer of nginx cache this one would be much larger the first layer",
    "start": "1783039",
    "end": "1788799"
  },
  {
    "text": "only had a few nodes serving as the cache on the second layer there was actually up to 40",
    "start": "1788799",
    "end": "1795279"
  },
  {
    "text": "cache nodes so it was kind of a fan out caching scheme and these were actually part of an auto",
    "start": "1795279",
    "end": "1800480"
  },
  {
    "text": "scale group so we had it configurable but we generally set the auto scale",
    "start": "1800480",
    "end": "1806240"
  },
  {
    "text": "parameters so that it would be the minimum of 40 and a maximum of 40 so that we just wanted 40 nodes in the stack and",
    "start": "1806240",
    "end": "1812640"
  },
  {
    "text": "if one of them went down autoscale group would replace it automatically without us having to worry about it",
    "start": "1812640",
    "end": "1817679"
  },
  {
    "text": "and then these nodes referred to the tier one cache nodes which then in turn return",
    "start": "1817679",
    "end": "1822720"
  },
  {
    "text": "reference the adobe flash media servers and as uh spencer was already talking",
    "start": "1822720",
    "end": "1829279"
  },
  {
    "text": "about elastic load balancers were what actually were routing all the traffic to that second layer of cache",
    "start": "1829279",
    "end": "1834399"
  },
  {
    "text": "nodes one thing to mention and you'll see this in the in the graphs about the traffic",
    "start": "1834399",
    "end": "1840320"
  },
  {
    "text": "we actually had to have them pre-warm some elastic load balancers for us so what that means is that slow ramp up to get them ready to",
    "start": "1840320",
    "end": "1846880"
  },
  {
    "text": "accept a high volume of traffic because we knew come landing event that we were going to get",
    "start": "1846880",
    "end": "1852399"
  },
  {
    "text": "us a huge influx of traffic so we didn't really have time to have like this gradual ramp up naturally uh and they were we were able",
    "start": "1852399",
    "end": "1858559"
  },
  {
    "text": "to work with them and actually get that taken care of then finally route 53 was the final level so when we deploy",
    "start": "1858559",
    "end": "1864720"
  },
  {
    "text": "a cloud formation stack um the elastic load balancer would then be attached to an alias in route 53 and",
    "start": "1864720",
    "end": "1872399"
  },
  {
    "text": "given and we use weighted round robin so it'd be given a weight that was proportional to the stacks ability to handle traffic so",
    "start": "1872399",
    "end": "1880320"
  },
  {
    "text": "that way traffic was routed fairly between all of the different stacks that route 43 knew about",
    "start": "1880320",
    "end": "1886159"
  },
  {
    "text": "and once we had the cloud formation stack up and working deploying it into another region or availability was",
    "start": "1886159",
    "end": "1891519"
  },
  {
    "text": "as simple as a click of a few clicks of a mouse um you know then boom we just launch it",
    "start": "1891519",
    "end": "1896720"
  },
  {
    "text": "into us west 1b and we actually did this multiple times um",
    "start": "1896720",
    "end": "1901840"
  },
  {
    "text": "during the during the actual landing day event um cloudwatch proved very useful",
    "start": "1901840",
    "end": "1909519"
  },
  {
    "start": "1906000",
    "end": "1906000"
  },
  {
    "text": "uh while we were doing a lot of our testing and actually even while we were monitoring it during the landing day event it really",
    "start": "1909519",
    "end": "1916480"
  },
  {
    "text": "it provides an amazing easy to use uh tool of just being able to watch your",
    "start": "1916480",
    "end": "1922480"
  },
  {
    "text": "traffic um and being able to aggregate that traffic using different metrics and also to be notified if something goes wrong and get",
    "start": "1922480",
    "end": "1928799"
  },
  {
    "text": "a text message on your phone if your elastic load bouncer or your instances have gone down yeah so we could use it to actually",
    "start": "1928799",
    "end": "1934559"
  },
  {
    "text": "monitor how like an inelastic load bouncer group was performing um using the web console we could",
    "start": "1934559",
    "end": "1940159"
  },
  {
    "text": "visually inspect how these different types of ec2 instances autoscale groups and elbs were",
    "start": "1940159",
    "end": "1945840"
  },
  {
    "text": "performing and like quasi just mentioned there were alarms that we could set we didn't actually take advantage of that because",
    "start": "1945840",
    "end": "1952240"
  },
  {
    "text": "well we were kind of glued to our seat watching these charts the graphs as they were happening live",
    "start": "1952240",
    "end": "1957679"
  },
  {
    "text": "just ready to act if we needed to but going forward this is an extremely valuable tool that we definitely wish we",
    "start": "1957679",
    "end": "1963279"
  },
  {
    "text": "could have in the short time stand taking better advantage of so for benchmarking obviously we didn't",
    "start": "1963279",
    "end": "1969200"
  },
  {
    "start": "1967000",
    "end": "1967000"
  },
  {
    "text": "want to go into the landing event called turkey uh you know we we we're pretty sure it was going to work but we wanted to prove",
    "start": "1969200",
    "end": "1974480"
  },
  {
    "text": "to ourselves before the event that it could actually handle the traffic that we wanted and we were shooting for",
    "start": "1974480",
    "end": "1980080"
  },
  {
    "text": "about 25 gigabits per second per stack that we deployed we partnered with soasta who actually",
    "start": "1980080",
    "end": "1986480"
  },
  {
    "text": "specializes at uh testing at scale uh your distributed solutions or your",
    "start": "1986480",
    "end": "1993360"
  },
  {
    "text": "website or whatever else you want throughout it so what we did is we worked with them to test an individual stack",
    "start": "1993360",
    "end": "1999440"
  },
  {
    "text": "and just have them throw a ton of traffic at it and see how that would work now it wasn't just any old traffic we",
    "start": "1999440",
    "end": "2004720"
  },
  {
    "text": "actually came up with a script that each of their worker nodes would run that more or less simulated um a client",
    "start": "2004720",
    "end": "2010720"
  },
  {
    "text": "requesting four second chunks every four seconds um so using that we're actually",
    "start": "2010720",
    "end": "2016640"
  },
  {
    "text": "very successfully showed that this one stack that we designed was actually capable of handling more than 25",
    "start": "2016640",
    "end": "2022320"
  },
  {
    "text": "gigabits per second so we more than hit our mark um and is extremely successful and we were obviously very happy and",
    "start": "2022320",
    "end": "2028159"
  },
  {
    "text": "that gave us the confidence to go forward and actually do this on landing day and we also did a little bit of float",
    "start": "2028159",
    "end": "2033440"
  },
  {
    "text": "testing on our own before we went um directly to soasta so there's a lot of tools available to you to test your own",
    "start": "2033440",
    "end": "2039440"
  },
  {
    "text": "infrastructure so bees and machine guns that spencer mentioned but also jmeter is a very helpful tool in you know generating a ton of load",
    "start": "2039440",
    "end": "2046399"
  },
  {
    "text": "and just slowing that towards your elbs and just to see how it performs you can also set it up so that it ramps",
    "start": "2046399",
    "end": "2052240"
  },
  {
    "text": "up slowly uh so that it actually simulates the real uh use cases that you have in your applications yeah and also worth",
    "start": "2052240",
    "end": "2058480"
  },
  {
    "text": "mentioning um while we were doing this testing we were able to kill nodes within that auto scale group",
    "start": "2058480",
    "end": "2063919"
  },
  {
    "text": "and just watch how the traffic fluctuated and to compensate for that um and this is really effective um the",
    "start": "2063919",
    "end": "2070800"
  },
  {
    "text": "autoscale group was able to get new nodes online within like a minute after the old ones died and there's two",
    "start": "2070800",
    "end": "2075839"
  },
  {
    "text": "things actually that are happening there we had a very aggressive health monitoring policy on our elb so as nodes were becoming unhealthy as",
    "start": "2075839",
    "end": "2082638"
  },
  {
    "text": "soon as we go in and terminate a node the elb would stop getting the",
    "start": "2082639",
    "end": "2088079"
  },
  {
    "text": "health responses back from the node and it'll automatically stop routing traffic in that direction so it's a very seamless transition for",
    "start": "2088079",
    "end": "2094079"
  },
  {
    "text": "us to just kill a node and maybe you know lose a couple of requests that was handling at the time but then",
    "start": "2094079",
    "end": "2099839"
  },
  {
    "text": "immediately after that within a second or two elb will stop routing traffic towards that node",
    "start": "2099839",
    "end": "2105760"
  },
  {
    "text": "so this is the results these are graphs that i took basically screenshots of cloud watch",
    "start": "2105760",
    "end": "2110800"
  },
  {
    "start": "2108000",
    "end": "2108000"
  },
  {
    "text": "graphs from after the landing day event i'm not really sure what that anomaly is right there on the left",
    "start": "2110800",
    "end": "2117200"
  },
  {
    "text": "but in general if we look through all these uh different graphs you can see a pretty huge peak in traffic around the",
    "start": "2117200",
    "end": "2124320"
  },
  {
    "text": "landing time which was if i can convert from utc to pacific time",
    "start": "2124320",
    "end": "2130160"
  },
  {
    "text": "2012 10 31 um so you can see we had a few like this",
    "start": "2130160",
    "end": "2136480"
  },
  {
    "text": "was 25 gigabits per second of live traffic 10 gigabits 40 gigabits 26.6 gigabits so all in",
    "start": "2136480",
    "end": "2143040"
  },
  {
    "text": "total this is just in us east this gave us 110 gigabits per second of traffic at a peak",
    "start": "2143040",
    "end": "2149520"
  },
  {
    "text": "um we don't know how many live viewers total or how many live unique viewers total",
    "start": "2149520",
    "end": "2154800"
  },
  {
    "text": "or maybe we do have that number but um we do know that we had at least 120 000",
    "start": "2154800",
    "end": "2159920"
  },
  {
    "text": "concurrent viewers at one time um that's assuming that they all watch the highest quality video stream which is probably",
    "start": "2159920",
    "end": "2165200"
  },
  {
    "text": "not the case um and here you can see how the actual fms the flash media server origin nodes were",
    "start": "2165200",
    "end": "2172800"
  },
  {
    "text": "impacted so you know when we have 40 gigabytes um or 40 gigabits per second of traffic",
    "start": "2172800",
    "end": "2179119"
  },
  {
    "text": "hitting the tier 2 cache it's only about 42 megabits per second on the actual flash media server so it",
    "start": "2179119",
    "end": "2185599"
  },
  {
    "text": "worked really really well in terms of getting that traffic just efficiently and not",
    "start": "2185599",
    "end": "2191200"
  },
  {
    "text": "bogging down our servers at each level and this is one of the other us east",
    "start": "2191200",
    "end": "2196560"
  },
  {
    "text": "flash media server origins um so yeah this is our this is our solution uh this is what we came up",
    "start": "2196560",
    "end": "2202240"
  },
  {
    "text": "with in about it was a week and a half um it was very useful i think we learned a lot from it",
    "start": "2202240",
    "end": "2207599"
  },
  {
    "text": "we was a very pleasant experience i would say um yeah it was just it was a great",
    "start": "2207599",
    "end": "2213200"
  },
  {
    "text": "learning experience and uh one other thing to touch on is cloud front which i think quadra can",
    "start": "2213200",
    "end": "2218880"
  },
  {
    "text": "right we also use the elbs extensively uh behind uh cloudfront so we had a lot of static",
    "start": "2218880",
    "end": "2224800"
  },
  {
    "text": "content on our site on the mars site that we were serving directly from s3 but at the same time there's a little",
    "start": "2224800",
    "end": "2230079"
  },
  {
    "text": "bit of dynamic content that was also coming from the elb so we used cloudfront",
    "start": "2230079",
    "end": "2235920"
  },
  {
    "start": "2233000",
    "end": "2233000"
  },
  {
    "text": "behaviors to route specific urls towards the elbs to handle our dynamic content",
    "start": "2235920",
    "end": "2241359"
  },
  {
    "text": "while routing all the static content back to s3 so it works really well to actually use the cloudform behaviors as a caching",
    "start": "2241359",
    "end": "2247680"
  },
  {
    "text": "layer and you can set up different behaviors for each type of your url",
    "start": "2247680",
    "end": "2253119"
  },
  {
    "text": "which work nicely right and i would say that uh you know there's a",
    "start": "2253119",
    "end": "2259520"
  },
  {
    "text": "lot of documentation available online there's a lot of support in the community for elbs and there's a lot of case studies that you can",
    "start": "2259520",
    "end": "2265119"
  },
  {
    "text": "reference to inspire your next solution the one thing at jpl that's actually",
    "start": "2265119",
    "end": "2270720"
  },
  {
    "text": "empowered us uh top down is uh is that there's support from every level of management for us to build innovative",
    "start": "2270720",
    "end": "2276960"
  },
  {
    "text": "solutions with cloud computing our cto tom soderstrom in the audience here has been supporting the cloud computing work and envisioning",
    "start": "2276960",
    "end": "2283760"
  },
  {
    "text": "what cloud computing can do for us over the last four years as well as every developer including",
    "start": "2283760",
    "end": "2289040"
  },
  {
    "text": "brett and myself have been working hard and tirelessly to deploy the latest solutions onto the cloud where we",
    "start": "2289040",
    "end": "2296000"
  },
  {
    "text": "see it fit so that's been our secret to our success and uh you know we look forward to deploying",
    "start": "2296000",
    "end": "2303520"
  },
  {
    "text": "even more applications at this point we'll take any questions that you might have in the audience",
    "start": "2303520",
    "end": "2310079"
  },
  {
    "text": "yes oh sorry cost effectiveness um",
    "start": "2310839",
    "end": "2317599"
  },
  {
    "text": "sure uh tom do you want to say something about cost-effective discovery",
    "start": "2317839",
    "end": "2322960"
  },
  {
    "text": "um our live video streaming solution actually ended up being very cost effective for us because we didn't have to sign a contract with the vendor",
    "start": "2323440",
    "end": "2330960"
  },
  {
    "text": "uh pre-provisioning capacity we didn't have to say we're going to scale to 200 gigabits per second or terabit",
    "start": "2330960",
    "end": "2336000"
  },
  {
    "text": "per second please give us this much capacity which is a very typical in with some of the content distribution networks",
    "start": "2336000",
    "end": "2341760"
  },
  {
    "text": "um we were actually able to you know basically pay for the exactly the amount of bandwidth that we used",
    "start": "2341760",
    "end": "2347119"
  },
  {
    "text": "and there wasn't a charge for having you know using more bandwidth at a given time uh and then shrinking down there was",
    "start": "2347119",
    "end": "2352800"
  },
  {
    "text": "basically charge for the total number of bytes transferred so at one point if you were transferring one gigabit per second and",
    "start": "2352800",
    "end": "2358079"
  },
  {
    "text": "then the next point we were transferring 500 gigabits per second it would have costed us exactly the same depending on the total number of bytes",
    "start": "2358079",
    "end": "2364320"
  },
  {
    "text": "that were transferred so this made a very effective cost model for us furthermore the way that brett designed his cloud formation stacks everything is",
    "start": "2364320",
    "end": "2370720"
  },
  {
    "text": "parameterized so each of these stacks has a parameter for how big you want the layer one and layer two caching servers",
    "start": "2370720",
    "end": "2375920"
  },
  {
    "text": "to be so when the you know when the rush was over when things calmed down",
    "start": "2375920",
    "end": "2381040"
  },
  {
    "text": "brett basically took off all the really large el um cloud formation stacks and then deployed",
    "start": "2381040",
    "end": "2387359"
  },
  {
    "text": "a very small cloud formation stack uh that is basically serving the rest of the traffic from here on out",
    "start": "2387359",
    "end": "2393280"
  },
  {
    "text": "and it allowed us to very cleanly you know remove all of the infrastructure and then",
    "start": "2393280",
    "end": "2398400"
  },
  {
    "text": "deploy the exact same infrastructure at least the exact same template but just in a smaller more compact and more economical setting",
    "start": "2398400",
    "end": "2406640"
  },
  {
    "text": "got a question",
    "start": "2406640",
    "end": "2411838"
  },
  {
    "text": "well for me it was a learning experience but no i think quagmire can speak better today it's the ultimate flexibility that",
    "start": "2417680",
    "end": "2423760"
  },
  {
    "text": "you get if you've got a custom application there's a lot of solutions available by the way for streaming uh cloudfront also does an incredible job",
    "start": "2423760",
    "end": "2429280"
  },
  {
    "text": "of streaming but if you have a custom application um which you want full control over",
    "start": "2429280",
    "end": "2434800"
  },
  {
    "text": "and you want to be able to dynamically you know put your origin servers behind different regions and have ultimate",
    "start": "2434800",
    "end": "2441359"
  },
  {
    "text": "mission critical availability this works out really nicely for us the cost effectiveness was the other aspect that we had compared to the",
    "start": "2441359",
    "end": "2447280"
  },
  {
    "text": "traditional cdns because this is really a pay-per-use model remember if you want to do 100 terabits per",
    "start": "2447280",
    "end": "2453280"
  },
  {
    "text": "second of traffic can you imagine how long it will take you to set up a contract with a cloud with a content distribution network",
    "start": "2453280",
    "end": "2459680"
  },
  {
    "text": "given that you have like an amazon account you can just go in and provision this capacity set up like a form",
    "start": "2459680",
    "end": "2464880"
  },
  {
    "text": "form online that says hey can you please pre-war my load balancer and all sudden you're done you're ready to go you're not dealing with you know",
    "start": "2464880",
    "end": "2471440"
  },
  {
    "text": "con the pricing negotiations with contracts and legalities you're set and ready to go as soon as",
    "start": "2471440",
    "end": "2476880"
  },
  {
    "text": "you want to uh in the back yeah i can't really see",
    "start": "2476880",
    "end": "2495838"
  },
  {
    "text": "so this was the uh so we're basically doing http streaming so the clients would come up and they would say",
    "start": "2501920",
    "end": "2507839"
  },
  {
    "text": "please give me the next four seconds of traffic uh and then they would just keep doing this repeatedly it's basically http",
    "start": "2507839",
    "end": "2513280"
  },
  {
    "text": "uh you know pulled requests saying hey can i have the next four seconds can i have the next four seconds and so on so the users who went to one of these",
    "start": "2513280",
    "end": "2520000"
  },
  {
    "text": "failed machines that we might have killed dynamically would basically at the worst case scenario experience like a second",
    "start": "2520000",
    "end": "2526000"
  },
  {
    "text": "of jitter because the media player on their end will just retry their request right and most of the time these media",
    "start": "2526000",
    "end": "2532319"
  },
  {
    "text": "players have buffered enough such that if the request failed they would actually seamlessly go back and get it again",
    "start": "2532319",
    "end": "2537839"
  },
  {
    "text": "from the other server without even letting the user know that's something nefarious that transpired in the middle",
    "start": "2537839",
    "end": "2544640"
  },
  {
    "text": "what's that oh uh there so can you repeat your question actually",
    "start": "2547359",
    "end": "2555119"
  },
  {
    "text": "no not that we've heard of so the question was that did the user see any 404s and the answer is no because the",
    "start": "2556800",
    "end": "2563760"
  },
  {
    "text": "users downloaded the main page and the main page had a jwp uh player that was then basically going and behind",
    "start": "2563760",
    "end": "2569920"
  },
  {
    "text": "the scenes fetching all the frames as necessary so the jwt player basically encapsulated the logic and the user experience of you",
    "start": "2569920",
    "end": "2576400"
  },
  {
    "text": "know get it fetching the frames and so on waiting for that one guy to step forward and be like hey i got a 404.",
    "start": "2576400",
    "end": "2584160"
  },
  {
    "text": "yes sir",
    "start": "2584160",
    "end": "2593838"
  },
  {
    "text": "oh so you mean like as far as who has access to like maybe launch a stack into a region",
    "start": "2607040",
    "end": "2612160"
  },
  {
    "text": "uh we use iam credentials i think like this is the most common access pattern for uh aws um obviously i was kind of given",
    "start": "2612160",
    "end": "2619359"
  },
  {
    "text": "godlike control over the the uh the deployment or at least that particular account for the time being",
    "start": "2619359",
    "end": "2626000"
  },
  {
    "text": "because you know i needed to be able to start up what i need to start up stop what i needed to stop um but in general those those",
    "start": "2626000",
    "end": "2631920"
  },
  {
    "text": "credentials are kind of highly guarded so if that's your question right and and",
    "start": "2631920",
    "end": "2637200"
  },
  {
    "text": "so basically how do we control access uh uh you know because this is a complex environment we had video streaming",
    "start": "2637200",
    "end": "2642560"
  },
  {
    "text": "solutions we had content management systems we had static content dynamic content and a lot of different teams working on all of",
    "start": "2642560",
    "end": "2648400"
  },
  {
    "text": "this uh brett did maintain godlike permission and so did one other person in",
    "start": "2648400",
    "end": "2653440"
  },
  {
    "text": "uh in my team but i think your question can also be phrased who had access to screw everything up",
    "start": "2653440",
    "end": "2658960"
  },
  {
    "text": "right um even though we have uh we maintain godlike privileges we are very judicious with the use of im",
    "start": "2658960",
    "end": "2664560"
  },
  {
    "text": "credentials right so there are people we uh who for whom we have generated just cloud front i",
    "start": "2664560",
    "end": "2670480"
  },
  {
    "text": "am keys there are people for whom we have generated just ec2 launching capabilities and there are people from whom we have um",
    "start": "2670480",
    "end": "2676880"
  },
  {
    "text": "you know given auto scaling privileges and cloud formation privileges so a random person working on a cms using",
    "start": "2676880",
    "end": "2682160"
  },
  {
    "text": "the same account does not actually have access to bring down brett's cloud formation and if you weren't you really should",
    "start": "2682160",
    "end": "2687520"
  },
  {
    "text": "have been using your own iem credentials that had very limited access but you know clear last minute uh details there but for",
    "start": "2687520",
    "end": "2694640"
  },
  {
    "text": "operational efficiency and for for real but mission critical operations it is imperative to use im credentials to",
    "start": "2694640",
    "end": "2700640"
  },
  {
    "text": "actually limit the amount of access it's also good practice right because you want to limit the exposure in case any of these",
    "start": "2700640",
    "end": "2705760"
  },
  {
    "text": "credentials are lost so yeah we you want to be very judicious with how you use the root iem credentials",
    "start": "2705760",
    "end": "2713920"
  },
  {
    "text": "sorry oh actually yeah let's help you guys",
    "start": "2714720",
    "end": "2720078"
  },
  {
    "text": "right we had i don't remember the exact number but we had multiple load bouncers um warmed up",
    "start": "2725040",
    "end": "2732640"
  },
  {
    "text": "per availability zone per region so we had about a dozen load balancers that were pre-warmed",
    "start": "2732640",
    "end": "2737839"
  },
  {
    "text": "uh but they didn't have a cloud formation um temp uh stack connected to them right so",
    "start": "2737839",
    "end": "2743760"
  },
  {
    "text": "we would provision the stack attach to the load balancer attach the load balancer rafter 3 and then register it into route 250 as a cname yeah and",
    "start": "2743760",
    "end": "2750560"
  },
  {
    "text": "the way that worked is that we would actually as a parameter to the cloud formation template we would pass in the load",
    "start": "2750560",
    "end": "2756000"
  },
  {
    "text": "balancer that we wanted it to attach to so that was a little bit of manual control over that",
    "start": "2756000",
    "end": "2761680"
  },
  {
    "text": "right and our our strategy was by the way if we ran through the 12 uh pre-provision uh",
    "start": "2761680",
    "end": "2767839"
  },
  {
    "text": "load balancers we would be calling our premium support line and saying hey you know once we add nine you know we've only got three more to go",
    "start": "2767839",
    "end": "2774400"
  },
  {
    "text": "uh we'll be calling our premium support line getting the elb guys on the line to uh you know pre more more capacity as",
    "start": "2774400",
    "end": "2781280"
  },
  {
    "text": "needed that's what we verify with the testing",
    "start": "2781280",
    "end": "2787680"
  },
  {
    "text": "with sewasta we tested an individual stack with just one load balancer to see how big each stack could get yeah",
    "start": "2787680",
    "end": "2796240"
  },
  {
    "text": "yes sir um we didn't have that happen so we",
    "start": "2796240",
    "end": "2802720"
  },
  {
    "text": "didn't have that happen but we had an operational plan so uh we used ralph 53 with weighted",
    "start": "2802720",
    "end": "2808079"
  },
  {
    "text": "round robin so if we noticed that a particular load balancer was misbehaving or let's say a region was going down or an az was going down",
    "start": "2808079",
    "end": "2814400"
  },
  {
    "text": "we would basically just go the plan was to go to route 53 and take that load",
    "start": "2814400",
    "end": "2820480"
  },
  {
    "text": "balancer out of service so that when the rafter 3 dns resolution is happening it's not advertising this load balancer to",
    "start": "2820480",
    "end": "2826480"
  },
  {
    "text": "anybody else what was that",
    "start": "2826480",
    "end": "2831839"
  },
  {
    "text": "well so here's the thing the whole stack is there but you can cut the stack from the production just by updating",
    "start": "2832800",
    "end": "2838800"
  },
  {
    "text": "your route 33 record right so as soon as you update the rest of the record we can leave the stack running to go diagnose what actually",
    "start": "2838800",
    "end": "2845200"
  },
  {
    "text": "happened right well we can just deploy a new stack",
    "start": "2845200",
    "end": "2851280"
  },
  {
    "text": "probably against a different load balancer right yeah but we would do our analysis",
    "start": "2851280",
    "end": "2856319"
  },
  {
    "text": "we'll try to understand what actually happened at this point you know we could we could uh basically deploy the load mount so that's actually one of the beauties of",
    "start": "2856319",
    "end": "2862079"
  },
  {
    "text": "cloud computing is that you know you can just replicate your environment again from production to staging to development",
    "start": "2862079",
    "end": "2867839"
  },
  {
    "text": "and then from production to back to staging if something goes wrong and just replace it right away right",
    "start": "2867839",
    "end": "2874480"
  },
  {
    "text": "so we um for rochester we're using ttls of 60 60 seconds now",
    "start": "2879760",
    "end": "2886559"
  },
  {
    "text": "we're assuming that the you know intermediate caching is well behaved i'm not sure how long it would take elb",
    "start": "2886559",
    "end": "2893119"
  },
  {
    "text": "to to beef up its its capacity but that really depends on",
    "start": "2893119",
    "end": "2898240"
  },
  {
    "text": "the pre-warming arrangements that you might have had",
    "start": "2898240",
    "end": "2901838"
  },
  {
    "text": "so it was scaling uh basically they would let us know we would over scale it to make sure it's really",
    "start": "2913119",
    "end": "2919040"
  },
  {
    "text": "good um",
    "start": "2919040",
    "end": "2929839"
  },
  {
    "text": "right that's right",
    "start": "2941680",
    "end": "2957680"
  },
  {
    "text": "yeah it's scaling up and adding more instances and adding more resources",
    "start": "2957680",
    "end": "2963039"
  },
  {
    "text": "it can be multiple it can also move to different instance types so that's lots of different ways we can",
    "start": "2963520",
    "end": "2968880"
  },
  {
    "text": "use resources there from a customer's perspective that whole process seems to be automated and then you know for special arrangements we can",
    "start": "2968880",
    "end": "2974800"
  },
  {
    "text": "you know pre-warm them if uh you know we know that at this time we're gonna hit this kind of traffic",
    "start": "2974800",
    "end": "2979920"
  },
  {
    "text": "and so on we have 30 seconds left so i think we're gonna have to hold questions and uh if any of you guys want to come talk",
    "start": "2979920",
    "end": "2985920"
  },
  {
    "text": "to us about our solution afterwards feel free come find us and talk we'll be around all day today all day it might be another",
    "start": "2985920",
    "end": "2991440"
  },
  {
    "text": "so feel free to come by and talk to us you want to talk about this just a few follow-ups uh so some",
    "start": "2991440",
    "end": "2997680"
  },
  {
    "text": "documentation links i doubt that anybody's going to manage to copy that in the next 15 seconds",
    "start": "2997680",
    "end": "3004880"
  },
  {
    "text": "but it will be on slideshare so you can refer to that thank you please do fill out an evaluation form we want to get feedback on on all the",
    "start": "3004880",
    "end": "3011119"
  },
  {
    "text": "sessions and how we did and what you'd like to hear more of and that is it if you want to talk to me",
    "start": "3011119",
    "end": "3017040"
  },
  {
    "text": "specifically about elb i'll be at the booth between 1 and 3 30 today so thank you for your time thanks guys",
    "start": "3017040",
    "end": "3027520"
  }
]