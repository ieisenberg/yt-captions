[
  {
    "text": "good afternoon thank you for coming to our session I hope you've been having a great day here at",
    "start": "4240",
    "end": "9719"
  },
  {
    "text": "reinvent um obviously you might be having a little bit of difficulty with my accent so if you want to come and",
    "start": "9719",
    "end": "15839"
  },
  {
    "text": "watch it in YouTube after a few reruns of Braveheart that's probably fine um as you know there's a q session",
    "start": "15839",
    "end": "23560"
  },
  {
    "text": "uh I will be outside later on for QA I'd also point you out the security booth",
    "start": "23560",
    "end": "28760"
  },
  {
    "text": "the cloud front edge service or ask a expert down in the uh the main",
    "start": "28760",
    "end": "35040"
  },
  {
    "text": "exhibition Hall my name's Andrew kiggins I'm a development manager in Edge",
    "start": "35040",
    "end": "41600"
  },
  {
    "text": "services and my team's focus on anti-dos technology I'm joined today by Adrian",
    "start": "41600",
    "end": "48399"
  },
  {
    "text": "nuubi CTO of Crown Peak a longtime AWS technology",
    "start": "48399",
    "end": "55239"
  },
  {
    "text": "partner availability is one of a W's top",
    "start": "55719",
    "end": "62600"
  },
  {
    "text": "priorities dos has the potential to impact that",
    "start": "62600",
    "end": "69280"
  },
  {
    "text": "availability and if you've got no defense in place even a small Doos can",
    "start": "69280",
    "end": "76720"
  },
  {
    "text": "have a significant impact on that availability So today we're going to",
    "start": "76720",
    "end": "82479"
  },
  {
    "text": "look at some techniques and resources that are available in AWS and with other",
    "start": "82479",
    "end": "87640"
  },
  {
    "text": "technologies that you can employ to build a Dos resilient",
    "start": "87640",
    "end": "94119"
  },
  {
    "text": "service we'll briefly look at the landscape this year in the last 12 months what we've seen in the Dos",
    "start": "96159",
    "end": "103880"
  },
  {
    "text": "area then we're going to look at specific techniques and ways that you can build a",
    "start": "103880",
    "end": "109600"
  },
  {
    "text": "resilient service we'll look at some reference",
    "start": "109600",
    "end": "115360"
  },
  {
    "text": "architectures against specific dos attacks and then I'm going to hand over to",
    "start": "115360",
    "end": "121280"
  },
  {
    "text": "Adrian who's going to walk us through a real life attack where Crown Peak",
    "start": "121280",
    "end": "127240"
  },
  {
    "text": "defended a customer based in",
    "start": "127240",
    "end": "130879"
  },
  {
    "text": "AWS so where are we from last",
    "start": "133480",
    "end": "138360"
  },
  {
    "text": "year dos falls into two broad categories",
    "start": "139319",
    "end": "144400"
  },
  {
    "text": "infrastructure and application layer attacks infrastructure attacks",
    "start": "144400",
    "end": "150560"
  },
  {
    "text": "Target layer three and layer four your network and transportation",
    "start": "150560",
    "end": "156280"
  },
  {
    "text": "layers they're not trying to take down your servers they're not trying to destroy your firewalls what they're",
    "start": "156280",
    "end": "162920"
  },
  {
    "text": "trying to do is make it impossible to serve",
    "start": "162920",
    "end": "168720"
  },
  {
    "text": "traffic infrastructures level attacks you may",
    "start": "168720",
    "end": "174239"
  },
  {
    "text": "have heard of in the Press 100 gbits 200 gbits 400 gbits",
    "start": "174239",
    "end": "181680"
  },
  {
    "text": "that's not the norm in fact it's handly unlike you you'll see any kind of attack",
    "start": "181680",
    "end": "187040"
  },
  {
    "text": "the average attack size is just under 1 gbit half the attacks are 500 megabits",
    "start": "187040",
    "end": "195480"
  },
  {
    "text": "or less that's actually quite manageable it is however the predominant",
    "start": "195480",
    "end": "203519"
  },
  {
    "text": "attack type just under 80% why is that they're really easy to launch",
    "start": "203519",
    "end": "211439"
  },
  {
    "text": "anybody with a credit card in many cases their parents credit card can launch a DS attack just go out",
    "start": "211439",
    "end": "219959"
  },
  {
    "text": "pull out your credit card rent a botet by the hour this is your third maybe your",
    "start": "219959",
    "end": "226319"
  },
  {
    "text": "fourth day in Las Vegas by now you should be very suspicious of things that you rent by the",
    "start": "226319",
    "end": "233920"
  },
  {
    "text": "hour of course the other type of attack application L attacks make up the",
    "start": "234599",
    "end": "240159"
  },
  {
    "text": "remaining 20% or so predominantly these attacks Target",
    "start": "240159",
    "end": "246720"
  },
  {
    "text": "Port 80 443 HTTP web servers it doesn't mean you don't get",
    "start": "246720",
    "end": "252159"
  },
  {
    "text": "them in sntp servers nntp FTP they're all valid applications they've got",
    "start": "252159",
    "end": "257880"
  },
  {
    "text": "internet ports that are open but they're more complex attacks",
    "start": "257880",
    "end": "263840"
  },
  {
    "text": "they're harder to launch so your script kitties typically don't do that it",
    "start": "263840",
    "end": "269240"
  },
  {
    "text": "typically needs a little bit of information about the application they've identified resources weak links",
    "start": "269240",
    "end": "277120"
  },
  {
    "text": "that are vulnerable to Dos another thing we've been seeing is",
    "start": "277120",
    "end": "282800"
  },
  {
    "text": "multi Vector attacks where multiple attack vectors are being launched",
    "start": "282800",
    "end": "288120"
  },
  {
    "text": "simultaneously you have a sin flood against your application you've got a reflection against your DNS",
    "start": "288120",
    "end": "295360"
  },
  {
    "text": "infrastructure they're harder to launch they're also harder to defend it's harder to get the analytics of what",
    "start": "295360",
    "end": "301759"
  },
  {
    "text": "exactly is going on and you've got to put in multiple mitigations to defend",
    "start": "301759",
    "end": "308400"
  },
  {
    "text": "it amplifications very popular last year still very popular ntp and these are an order of",
    "start": "308400",
    "end": "316479"
  },
  {
    "text": "size still a very large player but again we're starting to see ssdp as flavor of",
    "start": "316479",
    "end": "322520"
  },
  {
    "text": "the month something that's popped up quite recently and has being used",
    "start": "322520",
    "end": "327840"
  },
  {
    "text": "extensively there's also some new attack types coming along call these hit and run",
    "start": "327840",
    "end": "333319"
  },
  {
    "text": "attacks they appear fairly high volume and then they",
    "start": "333319",
    "end": "338720"
  },
  {
    "text": "disappear you think you're done and they appear again and then they go away and you're never quite sure whether the",
    "start": "338720",
    "end": "345880"
  },
  {
    "text": "attacks over and they're going after the human factor if these things are lasting for two and 3 days that's significant",
    "start": "345880",
    "end": "353120"
  },
  {
    "text": "stress on The Operators maybe there's handoffs in there shift changes there",
    "start": "353120",
    "end": "358280"
  },
  {
    "text": "can be loss of context as operators get tired they start to make",
    "start": "358280",
    "end": "363919"
  },
  {
    "text": "mistakes the other thing we've been seeing is Dos used as a smoke screen",
    "start": "363919",
    "end": "369880"
  },
  {
    "text": "everybody's really worried about this massive dos attack that we're experiencing and they don't notice the P",
    "start": "369880",
    "end": "376560"
  },
  {
    "text": "password cracking or the cross- site scripting attack going on",
    "start": "376560",
    "end": "382080"
  },
  {
    "text": "underneath let's very quickly run through what these attacks look",
    "start": "382080",
    "end": "387759"
  },
  {
    "text": "like infrastru Ure attacks are going after your protocols your routers your",
    "start": "388120",
    "end": "394639"
  },
  {
    "text": "firewalls your Transit links the sin flood attack is taking advantage of a",
    "start": "394639",
    "end": "401960"
  },
  {
    "text": "Nuance of the TCP protocol a standard TCP connection has a source and a",
    "start": "401960",
    "end": "408560"
  },
  {
    "text": "destination you initiate it with hinding a sin the recipient responds with a sin Act and the Nuance here is that when",
    "start": "408560",
    "end": "415520"
  },
  {
    "text": "that happens it takes a small amount of memory in the connection",
    "start": "415520",
    "end": "421199"
  },
  {
    "text": "table the connections are completed and in due course the connection gets torn down all is good in a sin flood attack",
    "start": "421199",
    "end": "430039"
  },
  {
    "text": "the sin comes the sin act responded to the memory is allocated in the connection table but the connection is",
    "start": "430039",
    "end": "437160"
  },
  {
    "text": "never completed so as the attack continues you slowly fill up the",
    "start": "437160",
    "end": "443560"
  },
  {
    "text": "connection table and eventually the valid request can't",
    "start": "443560",
    "end": "450120"
  },
  {
    "text": "be honored UDP floods and in this case we're going to look at an amplification",
    "start": "450120",
    "end": "456360"
  },
  {
    "text": "attack with a common mechanism like using ntp server similarly you have an attacker and a",
    "start": "456360",
    "end": "462440"
  },
  {
    "text": "victim and there's a third part here you have an application device a reflector",
    "start": "462440",
    "end": "468159"
  },
  {
    "text": "in this case it's an ntp server ntp is a feature that allows you",
    "start": "468159",
    "end": "473280"
  },
  {
    "text": "to request a large amount of data called mon list you send a small packet 64",
    "start": "473280",
    "end": "481159"
  },
  {
    "text": "bytes and you get a 2 and a half th000 by packet back that means when the",
    "start": "481159",
    "end": "488639"
  },
  {
    "text": "attacker spoofs the victim's Source IP that response packet is going back to",
    "start": "488639",
    "end": "494879"
  },
  {
    "text": "the victim not to the attacker so by using that amplification mechanism and a botet you can generate",
    "start": "494879",
    "end": "502800"
  },
  {
    "text": "an very large amount of traffic towards the victim and DNS s n",
    "start": "502800",
    "end": "510520"
  },
  {
    "text": "ssdp have similar of amplification",
    "start": "510520",
    "end": "515560"
  },
  {
    "text": "vulnerabilities at the application layer flood style attacks are still common and",
    "start": "515560",
    "end": "522240"
  },
  {
    "text": "the difficulty here is that often they're well crafted it's difficult to differentiate between the Dos",
    "start": "522240",
    "end": "529880"
  },
  {
    "text": "traffic and the regular traffic and when those floods come",
    "start": "529880",
    "end": "536160"
  },
  {
    "text": "in then your server becomes open overwhelmed you can't handle the number",
    "start": "536160",
    "end": "541600"
  },
  {
    "text": "of connections and the valid users can't be",
    "start": "541600",
    "end": "547040"
  },
  {
    "text": "served one way of exploiting the HTTP protocol is by using slow loris now if",
    "start": "547040",
    "end": "553079"
  },
  {
    "text": "you do a Wiki search what you find is this really cute little mammal big eyes",
    "start": "553079",
    "end": "559360"
  },
  {
    "text": "and it looks fairly innocuous it also has really big sharp",
    "start": "559360",
    "end": "565800"
  },
  {
    "text": "teeth and it's highly toxic apparently it's got toxic elow or something and that's kind of what this is it's it's",
    "start": "565800",
    "end": "572680"
  },
  {
    "text": "this very small attack and it plays out its characters bit by bit and it",
    "start": "572680",
    "end": "579680"
  },
  {
    "text": "exploits the fact that HTTP will allow you to hold that connection open so as",
    "start": "579680",
    "end": "585040"
  },
  {
    "text": "it gets played out over a long period of time valid users can't get a",
    "start": "585040",
    "end": "592480"
  },
  {
    "text": "connection so what do we do how are we going to mitigate this well the first thing you have to",
    "start": "592480",
    "end": "598760"
  },
  {
    "text": "think about is you don't know the volume it could be a 15 megabyte attack it could be a 10 GB",
    "start": "598760",
    "end": "606000"
  },
  {
    "text": "attack you may not know the vectors and you may not know the target so having a flexible response with defense and depth",
    "start": "606000",
    "end": "614480"
  },
  {
    "text": "that you can scale up in response to the attack is vitally important and we're going to look at some techniques that allow us to do",
    "start": "614480",
    "end": "621120"
  },
  {
    "text": "this you want to minimize the surface area give them less to",
    "start": "621120",
    "end": "626880"
  },
  {
    "text": "hit you want to know your traffic one customer's traffic is very different from another's customer's traffic and if",
    "start": "626880",
    "end": "633360"
  },
  {
    "text": "you can figure out what your traffic looks like under normal circumstances you can figure out what it looks like",
    "start": "633360",
    "end": "639560"
  },
  {
    "text": "under an attack and then you can um you can get rid of the um bad",
    "start": "639560",
    "end": "647360"
  },
  {
    "text": "traffic if you know what the good stuff looks like you want to be able to scale scaling buys you a lot of things it",
    "start": "647360",
    "end": "654160"
  },
  {
    "text": "means you can absorb very quick spikes and you put the onus on the attack or",
    "start": "654160",
    "end": "660320"
  },
  {
    "text": "respond some resources can't be scaled maybe it's a expensive resource",
    "start": "660320",
    "end": "666920"
  },
  {
    "text": "maybe it's a database monolithic database so you've got to pay particular attention to those weak",
    "start": "666920",
    "end": "673399"
  },
  {
    "text": "links also trying to plan when you're under",
    "start": "673399",
    "end": "678519"
  },
  {
    "text": "attack is very very hard so planning in advance is very very",
    "start": "678519",
    "end": "685480"
  },
  {
    "text": "important so let's look at these individual things minimizing your surface",
    "start": "686720",
    "end": "694639"
  },
  {
    "text": "area if there's servers that don't need a public",
    "start": "695079",
    "end": "700360"
  },
  {
    "text": "interface don't make them public hide them in the back where they're not",
    "start": "700360",
    "end": "707279"
  },
  {
    "text": "reachable if there's resources that you're really not bothered about during",
    "start": "707279",
    "end": "712600"
  },
  {
    "text": "the Dos attack maybe it's a system that only gets used once a month don't expend resources on it it's",
    "start": "712600",
    "end": "719240"
  },
  {
    "text": "it's more for your operators to Monitor and watch out for for the things you do need to expose",
    "start": "719240",
    "end": "727680"
  },
  {
    "text": "make them difficult to find if you've got multiple",
    "start": "727680",
    "end": "733320"
  },
  {
    "text": "applications spread them out on different IP addresses because then if an attacker",
    "start": "733320",
    "end": "739800"
  },
  {
    "text": "can find your FTP server it won't have the same address as your web server so",
    "start": "739800",
    "end": "745720"
  },
  {
    "text": "we can't make that connection Amazon",
    "start": "745720",
    "end": "751199"
  },
  {
    "text": "VPC has features that lend themselves very well to this here I've got a we've",
    "start": "751199",
    "end": "757199"
  },
  {
    "text": "got a web application server with a mySQL database back end first thing I want to do is put them in a private",
    "start": "757199",
    "end": "765560"
  },
  {
    "text": "subnet inside my VPC that",
    "start": "765560",
    "end": "770720"
  },
  {
    "text": "means externally they're not visible the IP addresses that those have are not",
    "start": "770720",
    "end": "776839"
  },
  {
    "text": "reachable the next thing I want to do is segment my Ingress",
    "start": "776839",
    "end": "782600"
  },
  {
    "text": "points and here we've separated out the administration plane the user plane and",
    "start": "782600",
    "end": "788839"
  },
  {
    "text": "my external access the user traffic comes in through",
    "start": "788839",
    "end": "794360"
  },
  {
    "text": "the elb and hits the web server and here you'll notice that in the",
    "start": "794360",
    "end": "800959"
  },
  {
    "text": "elb we've changed the port so while your typical web traffic is coming in on 0",
    "start": "800959",
    "end": "807800"
  },
  {
    "text": "this web traffic's actually being served out of 8080 so even if someone does get into my",
    "start": "807800",
    "end": "813040"
  },
  {
    "text": "VPC somehow the ports not where they're going to expect it to be my admin",
    "start": "813040",
    "end": "819040"
  },
  {
    "text": "traffic I'm putting through a separate server and my outbound traffic is",
    "start": "819040",
    "end": "824399"
  },
  {
    "text": "handled by the KN device why is that important what this lets me do is set up",
    "start": "824399",
    "end": "831639"
  },
  {
    "text": "different security groups according to the needs of those connections so I can constrain what type",
    "start": "831639",
    "end": "838839"
  },
  {
    "text": "of user what subnets what geolocations can actually get in to my",
    "start": "838839",
    "end": "846519"
  },
  {
    "text": "application Route 53 and cloudfront give us some other advantages",
    "start": "848360",
    "end": "855519"
  },
  {
    "text": "under normal circumstances I use Route 53 to discover my cloudfront distribution if cloudfront hasn't cashed",
    "start": "855519",
    "end": "862639"
  },
  {
    "text": "it I send it to my origin and I get my content in Route 50 three if I set up an",
    "start": "862639",
    "end": "869920"
  },
  {
    "text": "elas with a c name instead of an IP address when the attacker tries to",
    "start": "869920",
    "end": "876600"
  },
  {
    "text": "discover where the traffic's going he's only going to get as far as",
    "start": "876600",
    "end": "883360"
  },
  {
    "text": "Cloud front and as we talk about later cloudfront is really good at heavy lifting and something that's you can",
    "start": "883360",
    "end": "890639"
  },
  {
    "text": "really take advantage of in ad dos scenario the next thing is understanding",
    "start": "890639",
    "end": "896759"
  },
  {
    "text": "normal behavior and this is around the levels the traffic patterns the dial",
    "start": "896759",
    "end": "901920"
  },
  {
    "text": "waves that you see in your application it also means understanding",
    "start": "901920",
    "end": "907720"
  },
  {
    "text": "where your spikes are when do you get your resource do you have a lot of flash crowds do you have a very steady",
    "start": "907720",
    "end": "914279"
  },
  {
    "text": "level of traffic knowing what they are and when they come allows you to respond",
    "start": "914279",
    "end": "920480"
  },
  {
    "text": "you can spot the abnormalities and further if you know what the normal levels are you can alarm",
    "start": "920480",
    "end": "926959"
  },
  {
    "text": "when they become abnormal if you do experience a Dos attack you",
    "start": "926959",
    "end": "933079"
  },
  {
    "text": "have the data should you need to engage with law enforcement you can review that data to improve your",
    "start": "933079",
    "end": "941440"
  },
  {
    "text": "resiliency Cloud watch monitors a large number of metrics by understanding your",
    "start": "941440",
    "end": "948759"
  },
  {
    "text": "data you can set alarms that are going to advise you when things go out of",
    "start": "948759",
    "end": "954199"
  },
  {
    "text": "range now hold this thought because this is one of the points that Adrian's going",
    "start": "954199",
    "end": "959519"
  },
  {
    "text": "to address and it's very important the next thing is",
    "start": "959519",
    "end": "965600"
  },
  {
    "text": "scalability skillability is great you can scale up when the attack",
    "start": "965600",
    "end": "973639"
  },
  {
    "text": "comes so that you don't need those resources spun up all the",
    "start": "973639",
    "end": "979600"
  },
  {
    "text": "time if they're correctly deployed across multiple areas multiple",
    "start": "980000",
    "end": "985959"
  },
  {
    "text": "regions as well as making your dos resilience very",
    "start": "985959",
    "end": "992079"
  },
  {
    "text": "strong it gives you a lot of resiliences in face of disaster be It software failures Hardware failures so there's a",
    "start": "992079",
    "end": "998199"
  },
  {
    "text": "side benefit there it makes the attacker work harder",
    "start": "998199",
    "end": "1004000"
  },
  {
    "text": "attackers are generally lazy they're going to go after the low hanging fruit if you make it harder for the attacker they're going to be less incented to",
    "start": "1004000",
    "end": "1010680"
  },
  {
    "text": "come after you an attack it gives you flexibility both at",
    "start": "1010680",
    "end": "1016560"
  },
  {
    "text": "the instance level where you can scale your capacity and at the network level that you can take advantage of really",
    "start": "1016560",
    "end": "1023399"
  },
  {
    "text": "large pipes and multiple pipes coming into your application",
    "start": "1023399",
    "end": "1029959"
  },
  {
    "text": "moreover if you scale automatically when the attack comes it gives you a little bit of breathing room to dig in and look",
    "start": "1029959",
    "end": "1037520"
  },
  {
    "text": "and see what's happening in the attack to see if you need to take other measures now there is an elephant in the",
    "start": "1037520",
    "end": "1042918"
  },
  {
    "text": "room you may or may not have spotted it here what does this cost",
    "start": "1042919",
    "end": "1049080"
  },
  {
    "text": "I'm going to defer that to Adrian who give you very real numbers of what it",
    "start": "1049080",
    "end": "1054880"
  },
  {
    "text": "cost to defend a Dos attack in the Amazon",
    "start": "1054880",
    "end": "1062280"
  },
  {
    "text": "infrastructure so how do we scale so here we see the user coming in",
    "start": "1063000",
    "end": "1069400"
  },
  {
    "text": "comes throughout 53 H the lb and goes to the web server life is",
    "start": "1069400",
    "end": "1076200"
  },
  {
    "text": "good when the Dos attack comes we may have to scale up our backend",
    "start": "1076200",
    "end": "1081600"
  },
  {
    "text": "instances we can choose larger instances or we can spread them out",
    "start": "1081600",
    "end": "1087480"
  },
  {
    "text": "using lots of smaller instances what works for your application you have to decide for",
    "start": "1087480",
    "end": "1093799"
  },
  {
    "text": "yourselves both are applicable it's a very application specific thing we can",
    "start": "1093799",
    "end": "1099039"
  },
  {
    "text": "also scale up elb is going to take off that load for us as well but really we want to push that scrubbing out as far",
    "start": "1099039",
    "end": "1107280"
  },
  {
    "text": "as possible and by using cloudfront Route 53 we can take a lot of that off I'm",
    "start": "1107280",
    "end": "1115320"
  },
  {
    "text": "going to cover exactly what cloudfront will do for us it suffice to say a lot",
    "start": "1115320",
    "end": "1120400"
  },
  {
    "text": "of this traffic the Dos traffic bounces off in",
    "start": "1120400",
    "end": "1128280"
  },
  {
    "text": "scaling Amazon has a Liv regions those regions have really fat",
    "start": "1128280",
    "end": "1135080"
  },
  {
    "text": "pipes out to the internet that just comes with the",
    "start": "1135080",
    "end": "1141039"
  },
  {
    "text": "architecture if one of those pipes is down we still have resiliency we've got two other ways in we guarantee",
    "start": "1141640",
    "end": "1150080"
  },
  {
    "text": "availability if a living's not enough we leverage ed services 52 Edge locations",
    "start": "1151120",
    "end": "1157200"
  },
  {
    "text": "similar multiple transits multiple resiliency Cloud front also has some",
    "start": "1157200",
    "end": "1163280"
  },
  {
    "text": "other nice features we're serving your HTTP traffic",
    "start": "1163280",
    "end": "1170559"
  },
  {
    "text": "but that's all we're going to serve HTTP traffic runs over TCP so any",
    "start": "1171120",
    "end": "1177159"
  },
  {
    "text": "of these UDP amplification attacks they're simply taken off the table by moving out to",
    "start": "1177159",
    "end": "1184280"
  },
  {
    "text": "cloudfront you make cloudfront do the heavy lifting invalid object requests Hulk",
    "start": "1184280",
    "end": "1190520"
  },
  {
    "text": "attacks malformed requests they're just not going to be served and they're never going to hit the",
    "start": "1190520",
    "end": "1197000"
  },
  {
    "text": "origin with the georestriction feature if you're mostly serving out of a North",
    "start": "1197360",
    "end": "1202919"
  },
  {
    "text": "America for example you can restrict the regions that that traffic's accepted",
    "start": "1202919",
    "end": "1209280"
  },
  {
    "text": "from Route 53 has resiliency built in with any casting and Shuffle",
    "start": "1209280",
    "end": "1216400"
  },
  {
    "text": "sharding any Casting means your request is going to be served from the nearest location if that location's down you're",
    "start": "1216400",
    "end": "1223720"
  },
  {
    "text": "automatically going to be served at the next nearest location with Shuffle sharding",
    "start": "1223720",
    "end": "1229400"
  },
  {
    "text": "it means skipped on a bit sorry about that shuffle sharding means that any hosted",
    "start": "1229400",
    "end": "1235640"
  },
  {
    "text": "zones are not going to serve by the same set of servers that means any impact on",
    "start": "1235640",
    "end": "1241480"
  },
  {
    "text": "one hosted Z is not going to pack the next one there's going to be points in your",
    "start": "1241480",
    "end": "1249039"
  },
  {
    "text": "application that may be weak they may only request I'll handle a certain",
    "start": "1249039",
    "end": "1254559"
  },
  {
    "text": "number of requests per second you want to put additional measure in place to",
    "start": "1254559",
    "end": "1259600"
  },
  {
    "text": "protect those such as rate limiting controlling the access if we put the correct AOS and security groups in that",
    "start": "1259600",
    "end": "1266600"
  },
  {
    "text": "gives us some coverage but we can complement that by putting specific rate limits and access controls for those",
    "start": "1266600",
    "end": "1273480"
  },
  {
    "text": "servers for those applications and it's going to make sure that our legitimate",
    "start": "1273480",
    "end": "1279120"
  },
  {
    "text": "users are prioritized and get availability one way of doing this is by",
    "start": "1279120",
    "end": "1286559"
  },
  {
    "text": "using a web application firewall now web application fire is predominantly a security device so one of the foremost",
    "start": "1286559",
    "end": "1294080"
  },
  {
    "text": "things that you want is the old to top 10 your vulnerability scanners your ability to eliminate cross- site",
    "start": "1294080",
    "end": "1300480"
  },
  {
    "text": "scripting so that's kind of table Stakes other things you want are the ability to rate",
    "start": "1300480",
    "end": "1306880"
  },
  {
    "text": "limit Blacklist some applications you know who the good actors are you know who the Bad actors are take that off the",
    "start": "1306880",
    "end": "1314000"
  },
  {
    "text": "table by black listing them and white listing them we talked about autoscaling you",
    "start": "1314000",
    "end": "1320360"
  },
  {
    "text": "don't want to put in a choke point so by having native autoscaling in",
    "start": "1320360",
    "end": "1326120"
  },
  {
    "text": "your wa application it allows you to scale with your elbs and your autoscaling",
    "start": "1326120",
    "end": "1333400"
  },
  {
    "text": "instances finally a learning engine built into the Waf if you know what the",
    "start": "1333400",
    "end": "1339200"
  },
  {
    "text": "good traffic is and many wafs have an ability to learn that traffic what page sequences are being hit what URLs are",
    "start": "1339200",
    "end": "1346360"
  },
  {
    "text": "common which parameters are used use for specific Pages they can then filter out",
    "start": "1346360",
    "end": "1352320"
  },
  {
    "text": "the requests that aren't good these things can all be deployed in",
    "start": "1352320",
    "end": "1359320"
  },
  {
    "text": "ec2 and they're available for the Amazon Marketplace we've got 15 different",
    "start": "1359320",
    "end": "1365919"
  },
  {
    "text": "options out there you have to evaluate the one that works for your application",
    "start": "1365919",
    "end": "1371000"
  },
  {
    "text": "there's a number of different payment models bring your license pay as you go again very application specific",
    "start": "1371000",
    "end": "1379679"
  },
  {
    "text": "this is how we deploy the WAFF best practices and and in this scenario wa",
    "start": "1379840",
    "end": "1384960"
  },
  {
    "text": "could be an ha proxy it could be caching engine and they all work in the same models you have front-end load balancers",
    "start": "1384960",
    "end": "1391480"
  },
  {
    "text": "to spread the load across the WAFF and then an elb to spread across your web",
    "start": "1391480",
    "end": "1397400"
  },
  {
    "text": "services you want to separate the management and the application traffic so that as those waffs or H proxies",
    "start": "1397400",
    "end": "1404919"
  },
  {
    "text": "scale up the configuration plane automatically download the correct",
    "start": "1404919",
    "end": "1411120"
  },
  {
    "text": "configuration number of other mechanisms that you can employ ha proxies varnish",
    "start": "1411120",
    "end": "1417159"
  },
  {
    "text": "if you got Apache you can use mod security there's a number of good sessions on the web track I was just at",
    "start": "1417159",
    "end": "1423279"
  },
  {
    "text": "one earlier on 204 there's a 301 session where they go into these in more detail",
    "start": "1423279",
    "end": "1428320"
  },
  {
    "text": "and talk about varnish and engine X highly recommend you getting those on YouTube Unfortunately they were earlier",
    "start": "1428320",
    "end": "1434720"
  },
  {
    "text": "on so if you missed them you have to catch them on YouTube I want to very quickly now talk about",
    "start": "1434720",
    "end": "1442320"
  },
  {
    "text": "how these mechanisms can be used to respond to individual dos attacks and",
    "start": "1442320",
    "end": "1449480"
  },
  {
    "text": "UDP flood is a very common one as your user comes in he's hitting your web",
    "start": "1449480",
    "end": "1455559"
  },
  {
    "text": "traffic H your web server when you get a Dos hitting the",
    "start": "1455559",
    "end": "1461760"
  },
  {
    "text": "web server first thing you want to do is make sure you've got a security group",
    "start": "1461760",
    "end": "1467679"
  },
  {
    "text": "inside your V PC that allows you to restrict the traffic with an elb in front we can push",
    "start": "1467679",
    "end": "1475279"
  },
  {
    "text": "that traffic further out elb doesn't support UDP so the elb is simply going",
    "start": "1475279",
    "end": "1481559"
  },
  {
    "text": "to discard any UDP traffic pushing out further to",
    "start": "1481559",
    "end": "1487840"
  },
  {
    "text": "cloudfront allows you to take advantage of the CDN by taking that large geod dispersion",
    "start": "1487840",
    "end": "1495840"
  },
  {
    "text": "taking available of the very diffused nature of how we can take these very large attacks and spread them over a",
    "start": "1495840",
    "end": "1501600"
  },
  {
    "text": "large number of edge locations and drop that traffic sin flood a little bit different",
    "start": "1501600",
    "end": "1508919"
  },
  {
    "text": "the user traffic hits the web server and when the Dos traffic comes in again we put in a security group with the",
    "start": "1508919",
    "end": "1515200"
  },
  {
    "text": "restrictions Maybe by geolocation maybe we know the source IPS maybe we know um",
    "start": "1515200",
    "end": "1520840"
  },
  {
    "text": "who the good actors are again we put an elb in front of it now this is slightly",
    "start": "1520840",
    "end": "1526279"
  },
  {
    "text": "different because the elb in this case is going to terminate those sin connections obviously the ones that are",
    "start": "1526279",
    "end": "1533399"
  },
  {
    "text": "not valid won't complete and they're never going to get passed on to the back end if Cloud fronts in front of it again",
    "start": "1533399",
    "end": "1541640"
  },
  {
    "text": "those sin floods are simply going to be discarded HTTP floods application",
    "start": "1541640",
    "end": "1551240"
  },
  {
    "text": "layer when the HT when the Dos comes the first thing we want to do is use our",
    "start": "1551640",
    "end": "1557200"
  },
  {
    "text": "Auto scaling to absorb put a security group around",
    "start": "1557200",
    "end": "1562640"
  },
  {
    "text": "simple best practices but then we want to employ the sandwich with the elb at",
    "start": "1562640",
    "end": "1568880"
  },
  {
    "text": "the front the WAFF or the ha proxy maybe a caching layer based on varnish and a",
    "start": "1568880",
    "end": "1574960"
  },
  {
    "text": "Neil be in the back end Again by pushing out to the cloud front we can make Cloud",
    "start": "1574960",
    "end": "1580159"
  },
  {
    "text": "front do the heavy lifting so it's simply taken off the",
    "start": "1580159",
    "end": "1585919"
  },
  {
    "text": "table so in a nutshell",
    "start": "1585919",
    "end": "1590240"
  },
  {
    "text": "take use vpcs takes a lot of it off the table allows you to control the traffic coming",
    "start": "1591640",
    "end": "1598679"
  },
  {
    "text": "in and out new feature private DNS just launched by the Route 53",
    "start": "1598679",
    "end": "1605720"
  },
  {
    "text": "team using that those servers inside your VPC are",
    "start": "1605720",
    "end": "1612640"
  },
  {
    "text": "only discoverable where you want them to be so they can't even be found",
    "start": "1612640",
    "end": "1620158"
  },
  {
    "text": "take advantage of cloud front uh Cloud watch with its monitoring and alerting so that you know when things are going",
    "start": "1620399",
    "end": "1627919"
  },
  {
    "text": "abnormal use elbs to terminate distribute the load and take advantage",
    "start": "1627919",
    "end": "1633120"
  },
  {
    "text": "of Auto scaling let cloudfront do the heavy",
    "start": "1633120",
    "end": "1639080"
  },
  {
    "text": "lifting it's a CDN that's what they're built for diffusing the traffic",
    "start": "1639080",
    "end": "1644120"
  },
  {
    "text": "spreading it across those 50 locations so that really scary 400 100 GB attack",
    "start": "1644120",
    "end": "1649360"
  },
  {
    "text": "that we saw if you divide that down by 52 you get seven and some change",
    "start": "1649360",
    "end": "1655799"
  },
  {
    "text": "suddenly that's not such a bad number 400 that's really scary 7 GB attacks",
    "start": "1655799",
    "end": "1662120"
  },
  {
    "text": "that's manageable Route 53 make sure you're always discoverable a lot of the attacks Target",
    "start": "1662120",
    "end": "1669360"
  },
  {
    "text": "your DNS infrastructure go to the",
    "start": "1669360",
    "end": "1675200"
  },
  {
    "text": "marketplace see if Waf is the right solution ha proxy caching",
    "start": "1675200",
    "end": "1681360"
  },
  {
    "text": "Solutions and plan plan in advance know how you're going to respond",
    "start": "1681360",
    "end": "1687679"
  },
  {
    "text": "know the things that you need to monitor know how you're going to engage we have a resource page on the",
    "start": "1687679",
    "end": "1695760"
  },
  {
    "text": "security website for a lot of this information plus additional links that you can get a deeper understanding of",
    "start": "1695760",
    "end": "1702679"
  },
  {
    "text": "some of these individual things that I've spoken about are up there engage with your time your account",
    "start": "1702679",
    "end": "1710039"
  },
  {
    "text": "team for more information and now I'm going to hand over to Adrien is's going to tell you",
    "start": "1710039",
    "end": "1717360"
  },
  {
    "text": "how this works in reality all",
    "start": "1717360",
    "end": "1722840"
  },
  {
    "text": "right okay um first and most important announcement I know everybody's thinking about party time I guarantee we'll be",
    "start": "1726600",
    "end": "1733120"
  },
  {
    "text": "done by 6:15 um as um",
    "start": "1733120",
    "end": "1738559"
  },
  {
    "text": "as Andrew mentioned uh we've been uh uh pleased to be a a an Amazon web services partner for many years for those of you",
    "start": "1738559",
    "end": "1745080"
  },
  {
    "text": "who aren't familiar with with crown Peak we are uh a cloud-based web content",
    "start": "1745080",
    "end": "1750880"
  },
  {
    "text": "management uh service so our customers use uh Crown Peak to manage hundreds",
    "start": "1750880",
    "end": "1757360"
  },
  {
    "text": "sometimes thousands of websites uh around the world in in more languages than you could possibly",
    "start": "1757360",
    "end": "1762679"
  },
  {
    "text": "imagine and as you can see um many of our customers are drawn from verticals such as Pharmacy ticals Healthcare",
    "start": "1762679",
    "end": "1770000"
  },
  {
    "text": "Financial Services uh public sector utilities and so in addition to the the",
    "start": "1770000",
    "end": "1777080"
  },
  {
    "text": "concerns they have around Regulatory Compliance information security data protection they are all very",
    "start": "1777080",
    "end": "1783679"
  },
  {
    "text": "high-profile uh industry sectors for dos type attacks so I'm going to tell you a",
    "start": "1783679",
    "end": "1790000"
  },
  {
    "text": "couple of stories um I'm going to tell you uh one story uh about how we worked",
    "start": "1790000",
    "end": "1795600"
  },
  {
    "text": "with Amazon to design and then prove to ourselves that we had an infrastructure",
    "start": "1795600",
    "end": "1802279"
  },
  {
    "text": "that we could manage on behalf of our customers that could withstand uh pretty serious dos uh type attacks and then I'm",
    "start": "1802279",
    "end": "1810799"
  },
  {
    "text": "going to tell you a story uh about when we actually happen to have the opportunity to test that in the real",
    "start": "1810799",
    "end": "1816960"
  },
  {
    "text": "world so before I get into the uh um the planning and the testing big giant",
    "start": "1816960",
    "end": "1822960"
  },
  {
    "text": "disclaimer everybody that uses Amazon web services signs up to follow the terms and conditions of the services",
    "start": "1822960",
    "end": "1829240"
  },
  {
    "text": "agreement and the services agreement includes the Amazon acceptable use policy it's a big long document but",
    "start": "1829240",
    "end": "1835600"
  },
  {
    "text": "basically the headline for this talk is you better not Mount dos attacks you better not Mount uh vulnerability",
    "start": "1835600",
    "end": "1842399"
  },
  {
    "text": "attacks otherwise we'll chop you off at the knees so before attempting to put any of this into practice uh if you do",
    "start": "1842399",
    "end": "1851240"
  },
  {
    "text": "even consider doing any kind of specific dods testing I encourage you to reach out to Amazon and explain what you plan",
    "start": "1851240",
    "end": "1858760"
  },
  {
    "text": "to do and secure permission otherwise it'll be the cheapest month after you do that that you've ever had with",
    "start": "1858760",
    "end": "1865159"
  },
  {
    "text": "Amazon so let me tell you a little bit about the the configuration that we built for our testing effort and um some",
    "start": "1865159",
    "end": "1872399"
  },
  {
    "text": "very very common technologies that you see in in use uh around Amazon and Andrews mentioned so first of all Route",
    "start": "1872399",
    "end": "1879240"
  },
  {
    "text": "53 um one of the things that that we do with Route 53 some of our customers",
    "start": "1879240",
    "end": "1884519"
  },
  {
    "text": "choose to host their own DNS we host DNS for some of our custom customers regardless of who's hosting the domain",
    "start": "1884519",
    "end": "1891279"
  },
  {
    "text": "name that's the public facing uh domain name for the website we always Alias",
    "start": "1891279",
    "end": "1896440"
  },
  {
    "text": "that to a Route 53 configuration that's effectively an internal courtesy domain and we do everything behind that that",
    "start": "1896440",
    "end": "1903200"
  },
  {
    "text": "enables us to respond very quickly and make changes in real time if we feel we have to without having to work with a",
    "start": "1903200",
    "end": "1910760"
  },
  {
    "text": "customer and manage a DNS change in potentially a very challenging situation Cloud front great",
    "start": "1910760",
    "end": "1918360"
  },
  {
    "text": "um everybody knows about um the value of the cloud front distribution to",
    "start": "1918360",
    "end": "1923399"
  },
  {
    "text": "distribute static assets but there are two factors about cloudfront that are particularly relevant to building",
    "start": "1923399",
    "end": "1928519"
  },
  {
    "text": "defenses against OS attacks number one it's a massively diffused service around the world so any kind of attack is",
    "start": "1928519",
    "end": "1935919"
  },
  {
    "text": "immediately spread around the planet and for those of you who uh haven't attended the cloudfront uh talks that reinvent",
    "start": "1935919",
    "end": "1943080"
  },
  {
    "text": "this week it also does some very Nifty Things with pooling TCP connections so",
    "start": "1943080",
    "end": "1948279"
  },
  {
    "text": "if you have websites that are highly Dynamic that are making calls into jsps or aspx Pages or other forms of dynamic",
    "start": "1948279",
    "end": "1954880"
  },
  {
    "text": "content the ability to reuse TCP connections takes a lot of load off the",
    "start": "1954880",
    "end": "1960320"
  },
  {
    "text": "backend servers and that's very very important when you're dealing with a Dos situation elastic load balancing also a",
    "start": "1960320",
    "end": "1967360"
  },
  {
    "text": "critical part of uh any dos defense um I would point out uh a couple things one",
    "start": "1967360",
    "end": "1973440"
  },
  {
    "text": "is um and it's not actually on this slide um Amazon made a change last year they introduced something called cross",
    "start": "1973440",
    "end": "1979240"
  },
  {
    "text": "Zone load balancing learn it love it live it um what it does is in",
    "start": "1979240",
    "end": "1987000"
  },
  {
    "text": "the days before crossone load balancing um Amazon used DNS to hand references to",
    "start": "1987000",
    "end": "1993840"
  },
  {
    "text": "the instances behind the low balancer and for clients that would cash DNS that often resulted in uneven patterns of",
    "start": "1993840",
    "end": "2001200"
  },
  {
    "text": "traffic behind the low balancer and uneven loading of the instances it also made your DNS service very very",
    "start": "2001200",
    "end": "2008519"
  },
  {
    "text": "significant vulnerability point during a Dos attack cross Zone load balancing allows the load balancer itself to",
    "start": "2008519",
    "end": "2015600"
  },
  {
    "text": "monitor the health of the in instances behind it and ensures that traffic is",
    "start": "2015600",
    "end": "2020679"
  },
  {
    "text": "always uh perfectly balanced and if you're adding and removing instances very very quickly you really really want",
    "start": "2020679",
    "end": "2027120"
  },
  {
    "text": "to have it turned on so for those of you who have had elbs in production for some time go back and turn on Cross load",
    "start": "2027120",
    "end": "2033600"
  },
  {
    "text": "balancing for all of them and when you're spinning new elbs up make sure you check the box because it's off by",
    "start": "2033600",
    "end": "2040159"
  },
  {
    "text": "default the other thing um you should also be paying attention to is if you're using um elb health checks to monitor",
    "start": "2040159",
    "end": "2047039"
  },
  {
    "text": "the health of your instances make sure you're setting a long enough grace period for the instance to actually come up and become alive otherwise you'll",
    "start": "2047039",
    "end": "2053398"
  },
  {
    "text": "find yourself in a situation where your EB is terminating your instances before they've even come into service and",
    "start": "2053399",
    "end": "2058760"
  },
  {
    "text": "that's a good way to head into a brick wall really quickly um and the last thing I would say is autoscaling um if you're building",
    "start": "2058760",
    "end": "2067878"
  },
  {
    "text": "um autoscaling with specific regard for dos I've seen a lot of autoscaling",
    "start": "2067879",
    "end": "2073320"
  },
  {
    "text": "configurations built using CPU load as a matric in my opinion uh in my opinion the best",
    "start": "2073320",
    "end": "2080158"
  },
  {
    "text": "evidence of Dos is an increase in the number of inbound HTTP requests so the best alarm to set for your scaling group",
    "start": "2080159",
    "end": "2088878"
  },
  {
    "text": "is the network in metric and I would also encourage you to scale up quickly",
    "start": "2088879",
    "end": "2094200"
  },
  {
    "text": "and Decay slowly in our configurations we scale up two or four at a time but when we scale down we only scale down",
    "start": "2094200",
    "end": "2100839"
  },
  {
    "text": "one at a time because as Andrew mentioned out hit and run is very common and if you've scaled up to defend against an attack you don't want to",
    "start": "2100839",
    "end": "2106359"
  },
  {
    "text": "destroy all that infrastructure very quickly and then have to scale it all back up again when they come",
    "start": "2106359",
    "end": "2111640"
  },
  {
    "text": "running so our test plan uh was built around um many many different uh types",
    "start": "2111640",
    "end": "2118520"
  },
  {
    "text": "of attack uh some of the slow attacks that Andrew mentioned where you make a fast request a slow read sometimes you",
    "start": "2118520",
    "end": "2125079"
  },
  {
    "text": "make a slow request um other attacks where we made a a request and",
    "start": "2125079",
    "end": "2130200"
  },
  {
    "text": "disappeared and just left the server waiting to serve a response to a client that no longer was around uh we also did",
    "start": "2130200",
    "end": "2137480"
  },
  {
    "text": "a lot of uh legitimate traffic testing which actually turned out to be a really good uh thing as as I'll tell you in a",
    "start": "2137480",
    "end": "2144000"
  },
  {
    "text": "minute and uh for those of you uh who might be familiar with Hulk I just uh learned the the acronym for Hulk is HTTP",
    "start": "2144000",
    "end": "2151359"
  },
  {
    "text": "ultimate or unbelievably large King basically it's a way of spinning up lots",
    "start": "2151359",
    "end": "2157119"
  },
  {
    "text": "and lots and lots of request threads with an attempt to exhaust the resources of the server very quickly so these were",
    "start": "2157119",
    "end": "2162400"
  },
  {
    "text": "the types of testings uh that we did we set up sometimes hundreds of Agents as",
    "start": "2162400",
    "end": "2168000"
  },
  {
    "text": "attack vectors all of which were multi-threaded and each of tests we ran for at least three hours uh because we",
    "start": "2168000",
    "end": "2175520"
  },
  {
    "text": "wanted to make sure that any kind of results we were seeing we could sustain over time because dos attacks are not",
    "start": "2175520",
    "end": "2181040"
  },
  {
    "text": "often shortlived events and we also made sure that we cooled down because we didn't want any subsequent tests to be",
    "start": "2181040",
    "end": "2187839"
  },
  {
    "text": "in its results by a successful response to a previous test and as Andrew was mentioning earlier we're seeing median",
    "start": "2187839",
    "end": "2195240"
  },
  {
    "text": "uh attack rates of the order of half a gigabit a second so um we wanted to go",
    "start": "2195240",
    "end": "2200359"
  },
  {
    "text": "for 10x uh the median so these were the kind of test parameters we set up and",
    "start": "2200359",
    "end": "2206280"
  },
  {
    "text": "here are the results that we got in our in our testing we were very impressed with",
    "start": "2206280",
    "end": "2213880"
  },
  {
    "text": "ourselves um here's a here's a graph from cloudwatch it shows um instances",
    "start": "2213880",
    "end": "2219119"
  },
  {
    "text": "scaling up you can see the Steep scale up gradient and the more shallow Decay gradient this is exactly what we wanted",
    "start": "2219119",
    "end": "2224960"
  },
  {
    "text": "to see fast scale up uh slow scale down and we actually set our scale up",
    "start": "2224960",
    "end": "2231040"
  },
  {
    "text": "thresholds to have our instances even though we weren't using CPU load as the",
    "start": "2231040",
    "end": "2236880"
  },
  {
    "text": "uh Cloud watch alarm we wanted to make sure we were getting value out of our instances so we were looking to get an 80% 90% utilization rate and we got that",
    "start": "2236880",
    "end": "2245760"
  },
  {
    "text": "and uh we had set ourselves the goal of being able to serve around about a million requests a minute and we were able to get that as well so at this",
    "start": "2245760",
    "end": "2253200"
  },
  {
    "text": "point in the game we are very impressed with ourselves and we are ready to handle",
    "start": "2253200",
    "end": "2259240"
  },
  {
    "text": "anything you know up to 10 times what what the industry says is the norm so the next part of the",
    "start": "2259240",
    "end": "2265440"
  },
  {
    "text": "presentation if my wife ever uh watches this on YouTube which I don't think is ever going to happen because she's not",
    "start": "2265440",
    "end": "2271839"
  },
  {
    "text": "in the technology business this the subtitle of this section is honey this is why I never called you from where",
    "start": "2271839",
    "end": "2277480"
  },
  {
    "text": "ever I was in that night in April I travel a lot for uh for my",
    "start": "2277480",
    "end": "2283560"
  },
  {
    "text": "business I travel spend all my time um working with customers and one of the",
    "start": "2283560",
    "end": "2289000"
  },
  {
    "text": "things that that Andrew mentioned is you really need to be aware of what normal is in your environment and set alarms",
    "start": "2289000",
    "end": "2295160"
  },
  {
    "text": "for when normal isn't happening so I got off the plane um One Night in April and",
    "start": "2295160",
    "end": "2302480"
  },
  {
    "text": "the first thing that I do when I get off a plane is I turn my phone on and I want to see whether or not there any Cloud",
    "start": "2302480",
    "end": "2308000"
  },
  {
    "text": "watch alarms going off and this evening believe me something was not right in",
    "start": "2308000",
    "end": "2315119"
  },
  {
    "text": "Toyland and in the taxi from the airport uh to the hotel I was able to uh take a",
    "start": "2315119",
    "end": "2322400"
  },
  {
    "text": "look and see what was going on which by the way uh we're all in with Amazon it's fantastic because it basically means I",
    "start": "2322400",
    "end": "2328040"
  },
  {
    "text": "can monitor and manage my environment wherever I am on the planet I don't have to be in my office I don't have to be in",
    "start": "2328040",
    "end": "2333920"
  },
  {
    "text": "my data center I don't have to be on the end of a VPN connection very very important in this particular",
    "start": "2333920",
    "end": "2340240"
  },
  {
    "text": "scenario and um so what was actually happening was uh I identified uh this is",
    "start": "2340240",
    "end": "2347040"
  },
  {
    "text": "a particular Crown Peak customer also a Sofer as a service provider very high",
    "start": "2347040",
    "end": "2352240"
  },
  {
    "text": "visibility and they have a conference in Vegas every year they have over 15,000",
    "start": "2352240",
    "end": "2357440"
  },
  {
    "text": "attendees plus supplies so in actual fact bigger than reinvent this year and",
    "start": "2357440",
    "end": "2362920"
  },
  {
    "text": "uh this they were they were getting unbelievable amounts of traffic on their",
    "start": "2362920",
    "end": "2367960"
  },
  {
    "text": "public facing web servers on the eve of their National user conference and they use their National user conference just",
    "start": "2367960",
    "end": "2374240"
  },
  {
    "text": "like Amazon to announce new products new Services the website is a very integral part of uh of their presentation and",
    "start": "2374240",
    "end": "2381200"
  },
  {
    "text": "being a software as a service they have a credibility issue because they need to make sure that they can provide highly",
    "start": "2381200",
    "end": "2387079"
  },
  {
    "text": "available services to to their customers they in the healthcare industry I didn't know it then but what",
    "start": "2387079",
    "end": "2394319"
  },
  {
    "text": "I was witnessing at that time was the beginning of uh pretty Monumental dos attack it was quite unusual in that all",
    "start": "2394319",
    "end": "2402319"
  },
  {
    "text": "of the requests coming in were 100% legitimate URLs um so we couldn't filter out",
    "start": "2402319",
    "end": "2409480"
  },
  {
    "text": "anything in terms of random traffic and we were getting attacks from over 100,000 hosts around the world North",
    "start": "2409480",
    "end": "2415319"
  },
  {
    "text": "Korea Estonia Lithuania China Russia um South America",
    "start": "2415319",
    "end": "2422400"
  },
  {
    "text": "but 60% of the traffic was coming from inside the United States and at the peak of the attack we were sustaining uh",
    "start": "2422400",
    "end": "2429119"
  },
  {
    "text": "around about 86 million concurrent connections into our infrastructure so I'm going to walk you",
    "start": "2429119",
    "end": "2435280"
  },
  {
    "text": "through very quickly the timeline and what actually happened and some of the",
    "start": "2435280",
    "end": "2440680"
  },
  {
    "text": "changes that we made while the attack was taking place so 10:30 uh in the",
    "start": "2440680",
    "end": "2448000"
  },
  {
    "text": "morning Pacific time uh was when our first Cloud watch alarms went off and",
    "start": "2448000",
    "end": "2453319"
  },
  {
    "text": "traffic went up dramatically and what we observed was that um the initial log",
    "start": "2453319",
    "end": "2460000"
  },
  {
    "text": "analysis showed that essentially the attacker was dereferencing DNS and attacking IP addresses directly so we",
    "start": "2460000",
    "end": "2467079"
  },
  {
    "text": "went in behind the scenes behind our courtesy domain in Route 53 rearranged",
    "start": "2467079",
    "end": "2472480"
  },
  {
    "text": "things and um defended against that attack pretty successfully cut the traffic out immediately those IP",
    "start": "2472480",
    "end": "2478800"
  },
  {
    "text": "addresses were no longer serving any traffic so at that point we breathed a sigh of relief in our ignorance and",
    "start": "2478800",
    "end": "2485359"
  },
  {
    "text": "decided that things were going to be okay after all which they were until 6:24 in the",
    "start": "2485359",
    "end": "2491319"
  },
  {
    "text": "evening and the attack came back and it came back with a vengeance targeting cames and the traffic was going up very",
    "start": "2491319",
    "end": "2497319"
  },
  {
    "text": "very dramatically I'll show you a chart later on to show you how quickly it ramped",
    "start": "2497319",
    "end": "2503200"
  },
  {
    "text": "up so we looked at the traffic and we realized that there were a couple of",
    "start": "2503200",
    "end": "2509280"
  },
  {
    "text": "things that we could do um as immediate mitigations and at the same time I was",
    "start": "2509280",
    "end": "2515839"
  },
  {
    "text": "on the phone with the c IO of this company and one of the things you realize about Adidas attack is very",
    "start": "2515839",
    "end": "2521680"
  },
  {
    "text": "early on you have a seminal moment and the seminal moment is am I going to lay",
    "start": "2521680",
    "end": "2527920"
  },
  {
    "text": "down and die or am I going to step up and so he and I made a gentleman's",
    "start": "2527920",
    "end": "2535160"
  },
  {
    "text": "agreement um we agreed that we were going to step up because our reputation was on the line as our service provider",
    "start": "2535160",
    "end": "2541280"
  },
  {
    "text": "to him his reputation as a service provider to to his customers so we basically agreed that we would um split",
    "start": "2541280",
    "end": "2550359"
  },
  {
    "text": "the cost of essentially going to the mat and our agreement our handshake",
    "start": "2550359",
    "end": "2556319"
  },
  {
    "text": "agreement was in the order of tens of thousands of dollars so we decided that we would go",
    "start": "2556319",
    "end": "2562319"
  },
  {
    "text": "forward and make some changes I'll tell you what a couple of the changes were um the first thing we did is we realized",
    "start": "2562319",
    "end": "2568240"
  },
  {
    "text": "because all the traffic was a lot of the traffic was coming from outside the United States but this particular",
    "start": "2568240",
    "end": "2573680"
  },
  {
    "text": "customer only served us customers from some I work with uh federal agencies um",
    "start": "2573680",
    "end": "2580079"
  },
  {
    "text": "we had some firewall rules that we knew were battle tested and would only emit us-based traffic um for those of you who",
    "start": "2580079",
    "end": "2587280"
  },
  {
    "text": "have been with Amazon a long time ha proxy was the go-to best practice solution before elb really um came to",
    "start": "2587280",
    "end": "2594040"
  },
  {
    "text": "the table we had also been talking to the FBI and the FBI was very clear that",
    "start": "2594040",
    "end": "2599520"
  },
  {
    "text": "they wanted as much information as possible to analyze after the attack so we inserted a waft sandwich behind our",
    "start": "2599520",
    "end": "2607119"
  },
  {
    "text": "Route 53 configuration and scaled up uh some ha",
    "start": "2607119",
    "end": "2612520"
  },
  {
    "text": "Proxes with these firewall rules because we knew that would drop 40% of the traffic at the front door and we also",
    "start": "2612520",
    "end": "2618520"
  },
  {
    "text": "knew that we would be able to get a lot of logging information for the FBI who would now become my new best",
    "start": "2618520",
    "end": "2625280"
  },
  {
    "text": "friends the other thing that we also did is we intentionally broke our autoscaling",
    "start": "2625280",
    "end": "2631480"
  },
  {
    "text": "configuration autoscaling has triggers for when I scale up and another trigger for when I scale down we changed our",
    "start": "2631480",
    "end": "2637800"
  },
  {
    "text": "scale down trigger to make it much much much higher than the scale up trigger what that meant was we would scale up",
    "start": "2637800",
    "end": "2644520"
  },
  {
    "text": "properly as more traffic came in but we would never hit the threshold that made us scale down so our instances would",
    "start": "2644520",
    "end": "2650880"
  },
  {
    "text": "grow and never Decay and the reason we did that is because when you when autoscale scales down an instance and",
    "start": "2650880",
    "end": "2657119"
  },
  {
    "text": "terminates an instance the cloud watch information associated with instance is lost and we wanted to preserve that",
    "start": "2657119",
    "end": "2663520"
  },
  {
    "text": "again for the FBI so we put our game face on Let",
    "start": "2663520",
    "end": "2669760"
  },
  {
    "text": "battle commence and we had the configuration in place by about 1: in the morning I'm giving updates every",
    "start": "2669760",
    "end": "2676000"
  },
  {
    "text": "hour to the board of directors at our customer and the arms race begins Amazon scales up our attackers scale up Amazon",
    "start": "2676000",
    "end": "2683200"
  },
  {
    "text": "scales up some more our attackers scale up some more and this continued until around about 7",
    "start": "2683200",
    "end": "2691440"
  },
  {
    "text": "in the evening on on the second day and at this time um we had around about 17",
    "start": "2691440",
    "end": "2698000"
  },
  {
    "text": "or 18 C3 8X large ha proxies deployed we had 30 35 um M3 large web",
    "start": "2698000",
    "end": "2706400"
  },
  {
    "text": "servers because all the traffic was legitimate and all of the US traffic was",
    "start": "2706400",
    "end": "2712000"
  },
  {
    "text": "accessing Dynamic Pages it was coming straight through Cloud front and hitting the uh scaled uh web server Farm",
    "start": "2712000",
    "end": "2719119"
  },
  {
    "text": "behind but at 7:00 in the evening what happened was really cool because we",
    "start": "2719119",
    "end": "2724960"
  },
  {
    "text": "scaled up and the bad guys didn't scale up anymore we were sustaining at this point",
    "start": "2724960",
    "end": "2731000"
  },
  {
    "text": "86 million concurrent connections um we measured the traffic uh we were pretty impressed with",
    "start": "2731000",
    "end": "2736960"
  },
  {
    "text": "ourselves that we could deal with 5 gbits a second which is um uh 20x or uh",
    "start": "2736960",
    "end": "2743119"
  },
  {
    "text": "10x the industry median but at this point we were dealing with 20 gbits a second of sustained uh traffic uh",
    "start": "2743119",
    "end": "2750760"
  },
  {
    "text": "through the Amazon infrastructure so something like 40x uh the industry median",
    "start": "2750760",
    "end": "2757079"
  },
  {
    "text": "but the bad guys ran out of gas so we were serving our customers website between you know one and 3",
    "start": "2757079",
    "end": "2765200"
  },
  {
    "text": "seconds and this continued they hammered us and hammered us and hammered us and then at 2:00 they gave up and they went",
    "start": "2765200",
    "end": "2773960"
  },
  {
    "text": "home so this is the timeline of the attack uh you can see the first uh",
    "start": "2773960",
    "end": "2779040"
  },
  {
    "text": "attack the IP specific one you can see how quickly the second attack wrapped up ramped up when they came back you can",
    "start": "2779040",
    "end": "2785559"
  },
  {
    "text": "see uh this is a sound of the instances that that we scaled up in the the web server Farm uh behind the ha proxy",
    "start": "2785559",
    "end": "2792400"
  },
  {
    "text": "sandwich behind cloudfront behind Route 53 and then you can see uh when they gave up and went",
    "start": "2792400",
    "end": "2799119"
  },
  {
    "text": "home so we got some some great um feedback",
    "start": "2799119",
    "end": "2805960"
  },
  {
    "text": "from from our customer but Andrew mentioned that I would talk about cost so uh I don't want to go too long um",
    "start": "2805960",
    "end": "2813680"
  },
  {
    "text": "I've told you the story I've told you about the traffic I've told you about the um the number of instances we scaled up",
    "start": "2813680",
    "end": "2819400"
  },
  {
    "text": "how long the attack left um would anyone care to Hazard a guess how much this cost us in direct Amazon Serv service",
    "start": "2819400",
    "end": "2828760"
  },
  {
    "text": "fees $88,000 anyone",
    "start": "2829720",
    "end": "2834640"
  },
  {
    "text": "else 1,500 bucks",
    "start": "2835520",
    "end": "2841480"
  },
  {
    "text": "so was it worth it to go to the mat and scale up and defend our customer against",
    "start": "2841480",
    "end": "2846920"
  },
  {
    "text": "an attack like this there's no doubt in my mind and the the the the coolest",
    "start": "2846920",
    "end": "2853119"
  },
  {
    "text": "thing about 3 hours into into the attack on one of the conference calls one of the uh Senior Systems Engineers on the",
    "start": "2853119",
    "end": "2861280"
  },
  {
    "text": "the customers it team who uh was having a little bit of a u anxiety said you",
    "start": "2861280",
    "end": "2869160"
  },
  {
    "text": "know what maybe if if we can't deal with this in Amazon maybe we should bring this into our own Data Center and the",
    "start": "2869160",
    "end": "2875079"
  },
  {
    "text": "CIO said to him and he had worked in a very large financial institution uh",
    "start": "2875079",
    "end": "2880160"
  },
  {
    "text": "before coming to to this company he said you know what based on my experience before if we were in our own data center",
    "start": "2880160",
    "end": "2886040"
  },
  {
    "text": "we'd have been dead eight hours ago so with that I'll leave you uh uh",
    "start": "2886040",
    "end": "2892480"
  },
  {
    "text": "with some uh some encouragement to go and think about this and put this into practice in your own data centers thank",
    "start": "2892480",
    "end": "2897520"
  },
  {
    "text": "you very much",
    "start": "2897520",
    "end": "2900800"
  }
]