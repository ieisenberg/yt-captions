[
  {
    "start": "0",
    "end": "80000"
  },
  {
    "text": "let's try that again so session name is",
    "start": "1610",
    "end": "8429"
  },
  {
    "text": "seed for five my name is Henrik Johansen I'm a principal solution architect and",
    "start": "8429",
    "end": "13620"
  },
  {
    "text": "compton' p.m. for a SS security and compliance so as I said today we're",
    "start": "13620",
    "end": "20310"
  },
  {
    "text": "gonna talk a little bit about secured automation how you can use certain tools to set up simple remediation function",
    "start": "20310",
    "end": "26609"
  },
  {
    "text": "how you can use surveillance infrastructure to automate a lot of the things that you either do manual today",
    "start": "26609",
    "end": "33149"
  },
  {
    "text": "or that you probably might not do at all so we're gonna go through different",
    "start": "33149",
    "end": "38670"
  },
  {
    "text": "scenarios we're gonna do a little bit of primer talk about why we want to do",
    "start": "38670",
    "end": "44640"
  },
  {
    "text": "secured automation a little bit about what your guardrails and then we're gonna go into the code if",
    "start": "44640",
    "end": "50129"
  },
  {
    "text": "you do not like code if you do not like Python and if you think python is a snake you have an opportunity to leave",
    "start": "50129",
    "end": "57329"
  },
  {
    "text": "no one's gonna be mad at except you if you don't leave so and we have a couple of takeaways first off all the demos",
    "start": "57329",
    "end": "65430"
  },
  {
    "text": "here will be available as open source going to be released under one of these two github repos the we already have a",
    "start": "65430",
    "end": "72720"
  },
  {
    "text": "couple of examples there but check out later I'll try and get them out as soon",
    "start": "72720",
    "end": "78240"
  },
  {
    "text": "as possible so why do we want to do",
    "start": "78240",
    "end": "83310"
  },
  {
    "start": "80000",
    "end": "80000"
  },
  {
    "text": "secure automation well reliability we want to reduce the risk of making",
    "start": "83310",
    "end": "89549"
  },
  {
    "text": "mistakes you wanna make sure that everything runs as it should every time humans make mistakes it's nothing",
    "start": "89549",
    "end": "96630"
  },
  {
    "text": "strange about that it could be anything from clicking wrong button or just typing in the wrong answer or simply not",
    "start": "96630",
    "end": "103560"
  },
  {
    "text": "noticing things we also want to avoid giving humans too much access if there",
    "start": "103560",
    "end": "109950"
  },
  {
    "text": "is something that we can remediate using automation that means that we don't need a human to touch any of that data we can",
    "start": "109950",
    "end": "116579"
  },
  {
    "text": "simply extract human from the calculation and have something do that much faster much more reliable and",
    "start": "116579",
    "end": "124640"
  },
  {
    "text": "consistent it's also efficiency we have multiple accounts how many",
    "start": "124640",
    "end": "130569"
  },
  {
    "text": "people in here have multiple accounts that they run pretty much everyone a",
    "start": "130569",
    "end": "136420"
  },
  {
    "text": "couple we don't and if you're gonna do this manually across multiple accounts",
    "start": "136420",
    "end": "141880"
  },
  {
    "text": "you need to track all the information but you also need to keep credentials around you need to log on to all the different accounts even if you do that",
    "start": "141880",
    "end": "148060"
  },
  {
    "text": "using command line it's still a tedious task that has higher error rates",
    "start": "148060",
    "end": "154200"
  },
  {
    "text": "scalability all your customers or all your users are gonna use all the",
    "start": "157110",
    "end": "164230"
  },
  {
    "text": "different automation tools that are available through AWS they get access to auto scaling group they get access to",
    "start": "164230",
    "end": "170320"
  },
  {
    "text": "all those keyring features they can say that they have infinite scale infinite amount of changes you have to do that -",
    "start": "170320",
    "end": "176830"
  },
  {
    "text": "if you don't scale with your business units they will outrun you or you're",
    "start": "176830",
    "end": "181840"
  },
  {
    "text": "gonna become the breaking point and you don't want to be the blocker as an example try putting yourself in",
    "start": "181840",
    "end": "189519"
  },
  {
    "text": "this situation you're gonna try and click the same icon thousand times at 3:00 a.m. on a Monday and now ask",
    "start": "189519",
    "end": "198130"
  },
  {
    "text": "yourself during those ten thousand times when did icon change and now you did on",
    "start": "198130",
    "end": "204910"
  },
  {
    "text": "Tuesday again this is an extremely tedious task it's has a high error rate",
    "start": "204910",
    "end": "210730"
  },
  {
    "text": "because you don't know when that icon changed you don't know if you actually click thousand times or 999 times and",
    "start": "210730",
    "end": "219269"
  },
  {
    "text": "you most likely don't want to do it on Tuesday again we can also tie secure",
    "start": "219269",
    "end": "226360"
  },
  {
    "start": "224000",
    "end": "224000"
  },
  {
    "text": "automation to other functions like for example compliance a couple of key key items here though I said when we do",
    "start": "226360",
    "end": "232660"
  },
  {
    "text": "secure donation on compliance for example we want to retrieve information automatically always focus on the",
    "start": "232660",
    "end": "239890"
  },
  {
    "text": "evidence don't focus on the controls focus on the evidence what is it that we want to extract because you're most",
    "start": "239890",
    "end": "245170"
  },
  {
    "text": "likely going to have multiple different types of frameworks you're gonna follow multiple regulations and you want to say",
    "start": "245170",
    "end": "250570"
  },
  {
    "text": "instead of saying I wanna satisfy control three point four you want to say that I want to discover whether or not",
    "start": "250570",
    "end": "256299"
  },
  {
    "text": "what my password policies because that password policy can be used for three point four it can be used for another",
    "start": "256299",
    "end": "261430"
  },
  {
    "text": "framework and a lot of work but once you have that password policy you can use it multiple times in",
    "start": "261430",
    "end": "267370"
  },
  {
    "text": "many frameworks and you don't have to run everything multiple times it's a",
    "start": "267370",
    "end": "272770"
  },
  {
    "text": "good way to save resources good way to save space in your code repo but also run everything more efficiency in being",
    "start": "272770",
    "end": "279450"
  },
  {
    "text": "also once you've done that I said map it to specific controls might be the multiple controls and frameworks a lot",
    "start": "279450",
    "end": "286330"
  },
  {
    "text": "of these frameworks have the same controls that's why I focus on the evidence not on the control also when",
    "start": "286330",
    "end": "293260"
  },
  {
    "text": "you do reporting on the different frameworks don't just focus on the what don't just focus on here's my password",
    "start": "293260",
    "end": "299200"
  },
  {
    "text": "policy you also need to report why and how this is especially important for",
    "start": "299200",
    "end": "304990"
  },
  {
    "text": "auditors they wanted to see how did you satisfy this control how did you get the information that says that you have this",
    "start": "304990",
    "end": "311440"
  },
  {
    "text": "password policy so all this when you work with any material that's going to go out to regulate this order auditors",
    "start": "311440",
    "end": "316990"
  },
  {
    "text": "whatever it could be always include how you satisfy the control as well also",
    "start": "316990",
    "end": "323590"
  },
  {
    "text": "enable your compliance team they are actually your friends let them have access to the tools if you build a",
    "start": "323590",
    "end": "330100"
  },
  {
    "text": "secure automation that is used for compliance reporting give them access to it because it's just reporting",
    "start": "330100",
    "end": "335950"
  },
  {
    "text": "information they're not changing anything they're just extracting information from the account that you have just a number",
    "start": "335950",
    "end": "343120"
  },
  {
    "text": "of other things that you also get you get detection you get alerting remediation and countermeasures forensics you can implement whatever you",
    "start": "343120",
    "end": "349060"
  },
  {
    "text": "want in these steps into your secure automation scripts if you don't want any of them you don't have to but always",
    "start": "349060",
    "end": "356590"
  },
  {
    "text": "look at how can you make this better so instead of just enabling something what else can you do out of these things can",
    "start": "356590",
    "end": "362650"
  },
  {
    "text": "you detect some bills it might be part of a larger attack so when you do",
    "start": "362650",
    "end": "369910"
  },
  {
    "start": "368000",
    "end": "368000"
  },
  {
    "text": "testing and test these kind of incidence response scenarios it's always good to",
    "start": "369910",
    "end": "375900"
  },
  {
    "text": "test and make sure to actually do what they do generate the issue that's the",
    "start": "375900",
    "end": "381940"
  },
  {
    "text": "best way of testing you can do it in theory as much you want to but unless you actually tested it in real life or",
    "start": "381940",
    "end": "386950"
  },
  {
    "text": "tested it against something you're never going to know if it actually works of course use test accounts don't test this",
    "start": "386950",
    "end": "393010"
  },
  {
    "text": "in production not a good idea try to scenario sources account types the",
    "start": "393010",
    "end": "398650"
  },
  {
    "text": "reason for that is that information looks differently depending on where it come from so if you for example get a",
    "start": "398650",
    "end": "404230"
  },
  {
    "text": "JSON input where you're trying to extract username that user name field is going to look different if you're using",
    "start": "404230",
    "end": "409780"
  },
  {
    "text": "an IM user or Federative user so always test with different scenarios based on",
    "start": "409780",
    "end": "415660"
  },
  {
    "text": "what it is that you're testing and it might not always be practical to",
    "start": "415660",
    "end": "422140"
  },
  {
    "text": "generate issue a you might not want to touch the real data you can't generate something",
    "start": "422140",
    "end": "427870"
  },
  {
    "text": "automatically or you can't generate something manually other ways you can do this actually Traverse event samples if",
    "start": "427870",
    "end": "434410"
  },
  {
    "text": "you're using carwash events we actually have a website that lists a ton of",
    "start": "434410",
    "end": "439420"
  },
  {
    "text": "different event samples for the different services so if you want to test something that is generated about s3 we have a sample event for s3 that",
    "start": "439420",
    "end": "448120"
  },
  {
    "text": "you can just use any inject into your lambda function and this is the same for all the services then just use a lender",
    "start": "448120",
    "end": "455830"
  },
  {
    "text": "Testament in the lambda test event years enter all the JSON information that you have and you can take the JSON",
    "start": "455830",
    "end": "462310"
  },
  {
    "text": "information that we provide us a testament to just modify it to your use case if you want to test against an s3 bucket that you own simply change the",
    "start": "462310",
    "end": "469480"
  },
  {
    "text": "name of in the sample event your s3 bucket and again use the samples that we",
    "start": "469480",
    "end": "474520"
  },
  {
    "text": "have available another primary one to talk about this guardrails we definitely",
    "start": "474520",
    "end": "481090"
  },
  {
    "start": "476000",
    "end": "476000"
  },
  {
    "text": "want to avoid making the attackers job easier and we can do that by not having",
    "start": "481090",
    "end": "486220"
  },
  {
    "text": "guardrails we just do it faster than the attacker probably what we mean with guardrails is that let's say you have a",
    "start": "486220",
    "end": "492400"
  },
  {
    "text": "scenario where someone is trying to attack a server and you automatically isolate that server on the network you",
    "start": "492400",
    "end": "498370"
  },
  {
    "text": "apply a denies security group and I SEL",
    "start": "498370",
    "end": "503710"
  },
  {
    "text": "and completely I see a tunnel network rip it out of outer scaling group it's",
    "start": "503710",
    "end": "509380"
  },
  {
    "text": "good that server can't go anywhere and it's not been touched on the server you can do forensics and everything the",
    "start": "509380",
    "end": "514810"
  },
  {
    "text": "problem is that what happens if either is wrong in the script or if that attacker start jumping to all your",
    "start": "514810",
    "end": "520960"
  },
  {
    "text": "servers it's really easy and fast to nuke yourself so make sure that you have",
    "start": "520960",
    "end": "526000"
  },
  {
    "text": "guardrails so for example if if one server gets ripped out never take out more than X percent of",
    "start": "526000",
    "end": "532090"
  },
  {
    "text": "the service as long as you can handle that or if you start disabling I am users make sure you're not disabling",
    "start": "532090",
    "end": "538150"
  },
  {
    "text": "yourself as well so implement the guardrails where you need to to prevent the new yourself framework if you ever",
    "start": "538150",
    "end": "547900"
  },
  {
    "text": "heard my talk before or any open talks I always talk about frameworks there's a",
    "start": "547900",
    "end": "553390"
  },
  {
    "text": "reason for that don't just fix and forget a good example is I have a demo out there for chouchou",
    "start": "553390",
    "end": "559390"
  },
  {
    "text": "if someone disables couch I'll enable it again awesome super easy super fast it's one single API or command-line the",
    "start": "559390",
    "end": "566710"
  },
  {
    "text": "problem is that if you just enable shower gel if someone disables it you've no idea what happened but I used to",
    "start": "566710",
    "end": "573430"
  },
  {
    "text": "compare it with you have a break-in in your house during the night and you go down and lock the door and go back to",
    "start": "573430",
    "end": "578530"
  },
  {
    "text": "bed you have no idea that he's actually sitting there et or breakfast cereal at the bread table with your keys in the",
    "start": "578530",
    "end": "584800"
  },
  {
    "text": "hand you got a do your friend six we got to do investigation see what happened",
    "start": "584800",
    "end": "590320"
  },
  {
    "text": "who was it how do I prevent it again does he have the keys do I need to disable those keys they need to create",
    "start": "590320",
    "end": "596170"
  },
  {
    "text": "new keys so I need to alert someone else always always have a multi-step remediation process don't just enable",
    "start": "596170",
    "end": "603310"
  },
  {
    "text": "and disable standardization matters follow the same principle as much as you",
    "start": "603310",
    "end": "610690"
  },
  {
    "text": "can and as often as you can it's really easy to create a ton of different scripts one of different features and",
    "start": "610690",
    "end": "617380"
  },
  {
    "text": "then when you try to troubleshoot them you no idea what to go to try and follow the same standard if you can use managed",
    "start": "617380",
    "end": "625480"
  },
  {
    "text": "services and/or machine learning or AI where possible if you haven't gone by Damacy boost talk to the Damacy team do",
    "start": "625480",
    "end": "633100"
  },
  {
    "text": "that instead of you trying to find certain data so instead of you trying to",
    "start": "633100",
    "end": "638110"
  },
  {
    "text": "rummage through all your s3 data to find personal data use the managed services",
    "start": "638110",
    "end": "643960"
  },
  {
    "text": "that are specified to do that same thing with investigating party logs we have a ton of services and partners out there",
    "start": "643960",
    "end": "650320"
  },
  {
    "text": "that can do this we just leased car duty check it out they can go through the",
    "start": "650320",
    "end": "656350"
  },
  {
    "text": "cloud shell data same thing of Maci and trigger these kind of alerts automatically",
    "start": "656350",
    "end": "662359"
  },
  {
    "text": "and then limits and alerts are good together and what we mean by that is that if you hit any kind of service limit or if you hit a certain threshold",
    "start": "662359",
    "end": "669049"
  },
  {
    "text": "on your remediation make sure you learn all time and you should always be learning even if it is a simple thing",
    "start": "669049",
    "end": "676040"
  },
  {
    "text": "like enabling shower gel if you enable cloud shell thousand times and you don't know about it you have a problem and",
    "start": "676040",
    "end": "683480"
  },
  {
    "start": "683000",
    "end": "683000"
  },
  {
    "text": "what do we mean with frameworks I mean this is just an example of how to create a remediation framework we have a",
    "start": "683480",
    "end": "689989"
  },
  {
    "text": "different section so we have our initiation section react how do you react to the event it seek lavish events config rule may see guard duty whatever",
    "start": "689989",
    "end": "698449"
  },
  {
    "text": "that server can be log parsing it could be something you written yourself how do you react to it",
    "start": "698449",
    "end": "703720"
  },
  {
    "text": "second thing trigger how do you trigger an event what is it that you want to trigger how do you learn from what",
    "start": "703720",
    "end": "710809"
  },
  {
    "text": "happened if you ran a secure donation or something how do you take whatever information you got from that automation",
    "start": "710809",
    "end": "717230"
  },
  {
    "text": "feature and put it back in the chain so if it happens again you know that it's happened again you know that it's",
    "start": "717230",
    "end": "723919"
  },
  {
    "text": "happened before you know that that user did it again and it could be some simple thing as he just doesn't know what to do",
    "start": "723919",
    "end": "729709"
  },
  {
    "text": "but that doesn't mean that it should be okay if you have to disable that user because it doesn't know what to do",
    "start": "729709",
    "end": "735860"
  },
  {
    "text": "that's better than him making everything public and then we'll go into the actual",
    "start": "735860",
    "end": "741079"
  },
  {
    "text": "ectric execution of the script with multiple steps there as well we have for example our priority action what's the most important thing that we need to do",
    "start": "741079",
    "end": "747290"
  },
  {
    "text": "what is the first thing we need to do whenever something happens this could be",
    "start": "747290",
    "end": "753410"
  },
  {
    "text": "a resource server the service likely in cloud trail case first thing you want to do when you work on disable shower gel",
    "start": "753410",
    "end": "759730"
  },
  {
    "text": "enable flower gel because you want that trace now we do have captured always-on",
    "start": "759730",
    "end": "765079"
  },
  {
    "text": "by default if we go to the region but you want to have that centralized character logging as well forensics has",
    "start": "765079",
    "end": "772850"
  },
  {
    "text": "this happened before who was involved is it the same person this can also be",
    "start": "772850",
    "end": "777949"
  },
  {
    "text": "based on the last event which is logging so if this has happened before you can use that in your script to see has the",
    "start": "777949",
    "end": "784879"
  },
  {
    "text": "user disabled captured before by mistake or maliciously countermeasures and we're going to talk about countermeasures in",
    "start": "784879",
    "end": "790939"
  },
  {
    "text": "the demos later what can you do when you find happen when something happens like for example disabling access keys a very easy and",
    "start": "790939",
    "end": "798699"
  },
  {
    "text": "effective way of preventing someone from doing something again could also be isolating the instance so on alerting",
    "start": "798699",
    "end": "806680"
  },
  {
    "text": "this is also actually a couple of the demos today how do we alert users that something is happening how do you alert",
    "start": "806680",
    "end": "812529"
  },
  {
    "text": "our teams what is the preferred way how many people in here using some sort of",
    "start": "812529",
    "end": "818199"
  },
  {
    "text": "chat function for your operational team or your security team like slack chime",
    "start": "818199",
    "end": "823310"
  },
  {
    "text": "[Music] decent ones yeah how many people use",
    "start": "823310",
    "end": "828939"
  },
  {
    "text": "that during active ongoing investigations like if you have a red team event or something like that couple",
    "start": "828939",
    "end": "835629"
  },
  {
    "text": "cool there's a ton of stuff that you can do with alerting very easy using for",
    "start": "835629",
    "end": "841660"
  },
  {
    "text": "example web hooks using email integration you can set it up into a remedy system by sending an email you",
    "start": "841660",
    "end": "848980"
  },
  {
    "text": "can send it to a HTTP endpoint using lambda function so it's very easy to tie",
    "start": "848980",
    "end": "853990"
  },
  {
    "text": "into a tie the lambda function elimination function directly into your alerting and remediation soil tracking",
    "start": "853990",
    "end": "860350"
  },
  {
    "text": "systems you can either do it directly from carwash events and finally logging",
    "start": "860350",
    "end": "866410"
  },
  {
    "text": "if you have a central system like a ticket system whatever use it integrate",
    "start": "866410",
    "end": "871990"
  },
  {
    "text": "with them as well same thing with alerting cities with logging or simply create your own login database it's not",
    "start": "871990",
    "end": "878139"
  },
  {
    "text": "it doesn't hurt to have a login database for the actual remediation features as well that helps actually when you're",
    "start": "878139",
    "end": "884380"
  },
  {
    "text": "trying to create and run the countermeasures and also when you're on the forensics pieces just to have a",
    "start": "884380",
    "end": "889990"
  },
  {
    "text": "simple Dynamo table where you don't need to store everything you just need to store the core information like for example what users have done this before",
    "start": "889990",
    "end": "897160"
  },
  {
    "text": "and when did they do it okay let's go",
    "start": "897160",
    "end": "903430"
  },
  {
    "text": "into some code first of all since it actually is Thursday quick throwback",
    "start": "903430",
    "end": "908800"
  },
  {
    "text": "Thursday the old repos I mentioned there we have a couple of scripts that we talked about last year quick update on",
    "start": "908800",
    "end": "915819"
  },
  {
    "text": "some of them there are more key the sea-ice benchmark we have a bunch of bug fixes one that I definitely want to",
    "start": "915819",
    "end": "921160"
  },
  {
    "text": "mention is we have an outer limit a script in there which is basically and it's a Miata I am",
    "start": "921160",
    "end": "926390"
  },
  {
    "text": "user to your account it's gonna automatically create virtual MFA token unassigned to the user we recently had",
    "start": "926390",
    "end": "933710"
  },
  {
    "text": "an update to that so we also have a self-service feature for that now so when the user gets the MFA token",
    "start": "933710",
    "end": "940100"
  },
  {
    "text": "assigned to them they can actually go in and we request the string themselves so",
    "start": "940100",
    "end": "945260"
  },
  {
    "text": "you don't even need to call helpless there is no human involvement whatsoever beside them requesting their own C token",
    "start": "945260",
    "end": "954110"
  },
  {
    "text": "for a virtual MFA so if you interested in that take a look at that script it's",
    "start": "954110",
    "end": "960020"
  },
  {
    "text": "kind of cool we also have a bunch of new features coming out for some of the scripts here so I would add a box if you",
    "start": "960020",
    "end": "966620"
  },
  {
    "text": "can if you're using github often just put in the watch to see what happens on",
    "start": "966620",
    "end": "971810"
  },
  {
    "text": "that repo so a couple of demos so the",
    "start": "971810",
    "end": "978050"
  },
  {
    "text": "first one we're gonna talk about and show a little bit about is serverless secure automation without the code what",
    "start": "978050",
    "end": "984650"
  },
  {
    "text": "can we do without coding so in this case the problem is that we need to in a",
    "start": "984650",
    "end": "990290"
  },
  {
    "text": "excuse me we need to be able to initiate a chain of event when an activity happens that is very sensitive to us and",
    "start": "990290",
    "end": "997070"
  },
  {
    "text": "when it is detected so how do we alert for example multiple teams as quickly as possible how do we take multiple actions",
    "start": "997070",
    "end": "1003580"
  },
  {
    "text": "without having to build and maintain a state and tasks system fairly common questions we have from customers so I",
    "start": "1003580",
    "end": "1009850"
  },
  {
    "text": "get at least how do we create something without having to build all the code around it so there is no code",
    "start": "1009850",
    "end": "1021810"
  },
  {
    "text": "would it be super clear security automation is not the same as Python no",
    "start": "1022630",
    "end": "1028069"
  },
  {
    "text": "Java whatever hip name came out last week it's all about the process and the",
    "start": "1028070",
    "end": "1035300"
  },
  {
    "text": "mentality so one thing that are definitely want to see is how many people have used carwash events for more",
    "start": "1035300",
    "end": "1041030"
  },
  {
    "text": "than just triggering a Python script couple so with cowboy events you can get",
    "start": "1041030",
    "end": "1052760"
  },
  {
    "start": "1052000",
    "end": "1052000"
  },
  {
    "text": "a lot more so it is driven by API activity as an example it does only and",
    "start": "1052760",
    "end": "1059180"
  },
  {
    "text": "this is important to know it captures read and write events so it doesn't capture certain sort it captures write",
    "start": "1059180",
    "end": "1067640"
  },
  {
    "text": "events and some read events so it doesn't capture for example the list events they get demands describe events",
    "start": "1067640",
    "end": "1073210"
  },
  {
    "text": "but it does capture anything that will change anything and all the update scripts and anything that has a",
    "start": "1073210",
    "end": "1079520"
  },
  {
    "text": "significant danger yes there will be risk with for example list events because they also are hints of something",
    "start": "1079520",
    "end": "1086630"
  },
  {
    "text": "going on this is where other services comes in like guard duty like may see to",
    "start": "1086630",
    "end": "1091820"
  },
  {
    "text": "detect user sort of view bad user behavior over time the thing here is",
    "start": "1091820",
    "end": "1098420"
  },
  {
    "text": "that it does support a large amount of features so this is a current list of",
    "start": "1098420",
    "end": "1103760"
  },
  {
    "text": "supported services that you can ingest data from into cloud shell essentially anything that's supported by cloud shell",
    "start": "1103760",
    "end": "1110060"
  },
  {
    "text": "is supported by how much events and that means that anytime you do anything in these services you can put that into",
    "start": "1110060",
    "end": "1117080"
  },
  {
    "text": "cloud coverage events also important to know is is not just api's so for example",
    "start": "1117080",
    "end": "1123320"
  },
  {
    "text": "if you start out ec2 instance or if you take a snapshot of an EBS volume you",
    "start": "1123320",
    "end": "1128480"
  },
  {
    "text": "don't have to write any code or anything like that it's predefined as an input event so anytime that happens you can",
    "start": "1128480",
    "end": "1134600"
  },
  {
    "text": "trigger off your chain of events you can also say that anytime at your state changes on ECS or an instance launch",
    "start": "1134600",
    "end": "1143480"
  },
  {
    "text": "under an instance termination you can automatically just select those events and don't have to write anything there",
    "start": "1143480",
    "end": "1150650"
  },
  {
    "start": "1150000",
    "end": "1150000"
  },
  {
    "text": "are a couple of things to know when it comes to even patterns if you have event patterns they",
    "start": "1150650",
    "end": "1156360"
  },
  {
    "text": "have to contain all the fields listed in the pattern so if you add something that you want to look for and you had",
    "start": "1156360",
    "end": "1161850"
  },
  {
    "text": "multiple event patterns in there all of them has to match the real event so you can't add a bunch of different types of",
    "start": "1161850",
    "end": "1168510"
  },
  {
    "text": "event into the same commercial bands and think that it's gonna match one of them there is an exception we're going to talk about that but all of them have to",
    "start": "1168510",
    "end": "1175440"
  },
  {
    "text": "match also they have to match exactly it's case by case there's no",
    "start": "1175440",
    "end": "1181560"
  },
  {
    "text": "normalization so it's you can't use application over case as you wish there",
    "start": "1181560",
    "end": "1187110"
  },
  {
    "text": "has to be exact it follows the JSON strings JSON rules when it comes to",
    "start": "1187110",
    "end": "1192570"
  },
  {
    "text": "quotes numbers etc and numbers are exact numbers as well so it's three hundred",
    "start": "1192570",
    "end": "1198000"
  },
  {
    "text": "three hundred point two zero and three hundred two is not the same thing it is exact string matching but it allows us",
    "start": "1198000",
    "end": "1206400"
  },
  {
    "start": "1204000",
    "end": "1204000"
  },
  {
    "text": "to write our own custom ruling of what we want to capture so for example I want to capture anything that is a state",
    "start": "1206400",
    "end": "1212100"
  },
  {
    "text": "change it needs to - so anytime something goes in the pending mode I want to trigger off an alert and this is",
    "start": "1212100",
    "end": "1218220"
  },
  {
    "text": "just a simple one we can also say that pending but we can also say that anything that happens with these",
    "start": "1218220",
    "end": "1224220"
  },
  {
    "text": "resources should trigger off an alert because there might be a secret server that you have so anytime someone does",
    "start": "1224220",
    "end": "1230520"
  },
  {
    "text": "anything with them you want to know about it and in this case you can actually use an or say plan so if you",
    "start": "1230520",
    "end": "1236640"
  },
  {
    "text": "have for example multiple resources one of the resource need to match it doesn't have to match all of them the only time",
    "start": "1236640",
    "end": "1242910"
  },
  {
    "text": "is that you cannot have multiple main topics but you can have multiple resource events you can also say that",
    "start": "1242910",
    "end": "1252210"
  },
  {
    "text": "anytime an API call happens by this specific user I want to trigger off an event and we",
    "start": "1252210",
    "end": "1258870"
  },
  {
    "text": "actually have a use case later on so you can be very specific so you don't have to say anytime an API I can't API event",
    "start": "1258870",
    "end": "1266430"
  },
  {
    "text": "happens and the reason for that is that that's gonna happen a lot everything you do in AWS is gonna be an",
    "start": "1266430",
    "end": "1272490"
  },
  {
    "text": "API event so you really don't want to say that anytime an API event happens shoot off some lambda functions that's",
    "start": "1272490",
    "end": "1279480"
  },
  {
    "text": "gonna be a little bit of waste of resources you can also have multiple targets and this is where some of the",
    "start": "1279480",
    "end": "1286800"
  },
  {
    "start": "1283000",
    "end": "1283000"
  },
  {
    "text": "power comes in so if you do wanna shoot off a lambda script or by any kind of blemish a Python node whatever it is you can",
    "start": "1286800",
    "end": "1292890"
  },
  {
    "text": "easily do that and you can shoot off to lambda scripts so for example when you're testing out something okay add",
    "start": "1292890",
    "end": "1299040"
  },
  {
    "text": "you dump event it will just dump the full event because you want to see what else comes out of there but also run",
    "start": "1299040",
    "end": "1304290"
  },
  {
    "text": "your actual script on it you can also say I'm gonna send this data to an SNS topic or I want to send",
    "start": "1304290",
    "end": "1310800"
  },
  {
    "text": "it to a Canisius stream or specific lambda you have a lot of different",
    "start": "1310800",
    "end": "1316200"
  },
  {
    "text": "things here one of the cool thing is that you can also send directly to SSM automation so for example if something",
    "start": "1316200",
    "end": "1321360"
  },
  {
    "text": "happens in ec2 instance kick off an SSM event to do or rather if inspector",
    "start": "1321360",
    "end": "1327300"
  },
  {
    "text": "discovers that you have you fail your inspector report and yet you find",
    "start": "1327300",
    "end": "1335190"
  },
  {
    "text": "patches missing or bugs kick off an SSM event and automatically patch that instance and you don't have to write any",
    "start": "1335190",
    "end": "1342660"
  },
  {
    "text": "kind of state management or anything you can just use it straight through clever stunts and again multiple events you can",
    "start": "1342660",
    "end": "1350550"
  },
  {
    "text": "also choose what you want to send there so you can say send the whole event that comes in or you can just extract certain",
    "start": "1350550",
    "end": "1356160"
  },
  {
    "text": "information that you want so how can we",
    "start": "1356160",
    "end": "1361650"
  },
  {
    "text": "use this in our other scripts first of all to see its live user activity",
    "start": "1361650",
    "end": "1367170"
  },
  {
    "text": "tracking for ir scenarios so the problem statement is that when we have at a Red Team event or real liar scenario we need",
    "start": "1367170",
    "end": "1373950"
  },
  {
    "start": "1369000",
    "end": "1369000"
  },
  {
    "text": "to know what that suspected use is doing in the real time and this is so we can follow a response playbook about when to",
    "start": "1373950",
    "end": "1380070"
  },
  {
    "text": "disable user with minimal risks is security and availability for a server so we basically want to see what is the",
    "start": "1380070",
    "end": "1385950"
  },
  {
    "text": "dude doing when something goes bad and we can do that trigger for for example may see it finds a bad actor or suspect",
    "start": "1385950",
    "end": "1394110"
  },
  {
    "text": "a bad actor or it could be cow jealous or God do you find something that is suspicious or it could just be that you",
    "start": "1394110",
    "end": "1400290"
  },
  {
    "text": "stop seeing weird things then you log and you want to know okay what is happening here actually then you find that bad user so you want to track",
    "start": "1400290",
    "end": "1407040"
  },
  {
    "text": "everything is does but you don't want to wait for cow shell to get delivered to s3 bucket",
    "start": "1407040",
    "end": "1413450"
  },
  {
    "text": "so how can you check what's going on as close to real-time as possible and how can we integrate with our existing tools",
    "start": "1415100",
    "end": "1420830"
  },
  {
    "text": "so I mentioned earlier who is using slack for example how can we integrate with slack what's happening highlight",
    "start": "1420830",
    "end": "1428059"
  },
  {
    "text": "always use approved communication channel for sensitive competent don't send sensitive information to open",
    "start": "1428059",
    "end": "1434240"
  },
  {
    "text": "communication channel whatever it is make sure it's encrypted make sure it's secure approved by your security team so",
    "start": "1434240",
    "end": "1444309"
  },
  {
    "text": "let's see if we can do a demo so we have evil Bob if Bob is here I hope it's not",
    "start": "1444549",
    "end": "1451429"
  },
  {
    "text": "evil Bob so we shall see if our script",
    "start": "1451429",
    "end": "1463700"
  },
  {
    "text": "is actually working",
    "start": "1463700",
    "end": "1466268"
  },
  {
    "text": "or if we have a bug unit",
    "start": "1474149",
    "end": "1477709"
  },
  {
    "text": "so in this case the only thing we're doing is that we're trying to run a",
    "start": "1488480",
    "end": "1493730"
  },
  {
    "text": "create user so let's do that this way as",
    "start": "1493730",
    "end": "1500450"
  },
  {
    "text": "well you want to create a user that's",
    "start": "1500450",
    "end": "1509000"
  },
  {
    "text": "called oops just to",
    "start": "1509000",
    "end": "1516820"
  },
  {
    "text": "and in this case we already have this user and what's going on in the",
    "start": "1520800",
    "end": "1528210"
  },
  {
    "text": "background is that we're actually tracking everything that is happening with that specific user and we'll see if",
    "start": "1528210",
    "end": "1534090"
  },
  {
    "text": "there actually works now what my network is acting up a little bit this is the",
    "start": "1534090",
    "end": "1542640"
  },
  {
    "text": "joy of live demos",
    "start": "1542640",
    "end": "1545570"
  },
  {
    "text": "so this is my snack channel and suddenly",
    "start": "1550960",
    "end": "1556330"
  },
  {
    "text": "everything that that user ran popped up in the slack channel so this script is",
    "start": "1556330",
    "end": "1562150"
  },
  {
    "text": "actually not doing anything except its tracking user information and then",
    "start": "1562150",
    "end": "1568000"
  },
  {
    "text": "pushing it straight out to a snack Channel and the reason for that is that we want to see for example in this case",
    "start": "1568000",
    "end": "1573640"
  },
  {
    "text": "we can see that user activity tracker alert it's by our specific e ir user and we can see that it has we can see the",
    "start": "1573640",
    "end": "1582040"
  },
  {
    "text": "user name it has which principle idea is access key these are of course all demo keys what type of user it is we can see",
    "start": "1582040",
    "end": "1590530"
  },
  {
    "text": "that it's the rement user tracker what account it is here comes the important",
    "start": "1590530",
    "end": "1596080"
  },
  {
    "text": "things that we can see that it actually had a specific source IP we can see",
    "start": "1596080",
    "end": "1601150"
  },
  {
    "text": "where it's from we can see what it's trying to run so in this case we saw that it's trying to run the API create",
    "start": "1601150",
    "end": "1607150"
  },
  {
    "text": "user and we saw that it's trying to run create a user called test2 now this is",
    "start": "1607150",
    "end": "1613870"
  },
  {
    "text": "super easy on memory we have a oops we actually have that's why it was",
    "start": "1613870",
    "end": "1618940"
  },
  {
    "text": "running I just didn't see it we can also send that to chime so we can send it to",
    "start": "1618940",
    "end": "1624400"
  },
  {
    "text": "any kind of channel that we have approved in our system and if we're following these it's very easy to see",
    "start": "1624400",
    "end": "1630970"
  },
  {
    "text": "that if this used to suddenly start creating other users it's not to create other access keys we can see that and we",
    "start": "1630970",
    "end": "1637750"
  },
  {
    "text": "can add those new users so now we saw that he created tests to we can take that user and start a separate tracker",
    "start": "1637750",
    "end": "1644320"
  },
  {
    "text": "or just add to the same tracker and the reason for this is that we don't want to go in and just disable the user we want",
    "start": "1644320",
    "end": "1650710"
  },
  {
    "text": "to see what's going on so now we have a near real-time tracker of anything that is a change update event for anything",
    "start": "1650710",
    "end": "1657280"
  },
  {
    "text": "going on in the AWS account that we choose to and this is a very simple",
    "start": "1657280",
    "end": "1663340"
  },
  {
    "text": "script all it does is actually",
    "start": "1663340",
    "end": "1669900"
  },
  {
    "text": "oops actually just change this one",
    "start": "1673400",
    "end": "1677690"
  },
  {
    "text": "it's a simple script that just takes a number of web hooks from the different systems so for example if you use slack",
    "start": "1682380",
    "end": "1688210"
  },
  {
    "text": "slack as an easy way to create a slack app where you can choose to enable a web hook which is essentially a",
    "start": "1688210",
    "end": "1693640"
  },
  {
    "text": "pre-specified HTTP URL it should be as URL that you can use in your lambda",
    "start": "1693640",
    "end": "1699220"
  },
  {
    "text": "functions to just post a message which is a JSON message and you can populate",
    "start": "1699220",
    "end": "1704500"
  },
  {
    "text": "that JSON message with whatever you want and that's automatically going to be populated to dispatch channel and we can",
    "start": "1704500",
    "end": "1709600"
  },
  {
    "text": "actually use exactly the same for time no matter what the tool is you can use a web hook for remedy if you want to",
    "start": "1709600",
    "end": "1716530"
  },
  {
    "text": "create a ticket for it whatever it is that you want to create you can just use easy HTTP requests to reach out to a",
    "start": "1716530",
    "end": "1723370"
  },
  {
    "text": "different system when we create these functions though we have a couple of options we want to do so in this case the script that is available it asks us",
    "start": "1723370",
    "end": "1731140"
  },
  {
    "text": "do we want to use chime okay we wanna use time okay what's a web hook parameter for China do we only use slack",
    "start": "1731140",
    "end": "1736630"
  },
  {
    "text": "what's the slack web parameter do you wanna use SNS for alerts and we can send emails with all the information so",
    "start": "1736630",
    "end": "1742980"
  },
  {
    "text": "anything that you want to ask create a Spanish create a script that's moment we've used a framework set up everything",
    "start": "1742980",
    "end": "1749380"
  },
  {
    "text": "is options in that framework take control of what is the input but it's output that you want to do we can add a",
    "start": "1749380",
    "end": "1756250"
  },
  {
    "start": "1755000",
    "end": "1755000"
  },
  {
    "text": "feature for example whitelisting the reason for that is that some accounts might be if you use this for an",
    "start": "1756250",
    "end": "1761380"
  },
  {
    "text": "automatic discovery feature like Maisie or god guard duty we might wanna have a white listing function so we can say",
    "start": "1761380",
    "end": "1767380"
  },
  {
    "text": "that I want to track everything but if it's this account because these are our CI CD pipeline account or whatever it is we know that there are noisy accounts",
    "start": "1767380",
    "end": "1773770"
  },
  {
    "text": "they're just gonna create a bunch of unnecessary drift on on the alerting system so one like whitelist them this",
    "start": "1773770",
    "end": "1781210"
  },
  {
    "text": "is super easy to add as parameters in your script so you can add a barclays",
    "start": "1781210",
    "end": "1786880"
  },
  {
    "text": "feature I would say though that be very careful when you add white lists this is a reverse guardrail because what if",
    "start": "1786880",
    "end": "1794140"
  },
  {
    "text": "someone does take over your account what if someone does use the CI CD account but we can add simple users here we can",
    "start": "1794140",
    "end": "1802150"
  },
  {
    "text": "also add them as parameters to the actual lambda functions so it's very easy to change the update when you have",
    "start": "1802150",
    "end": "1808150"
  },
  {
    "text": "new users so another piece that we wanna highlight in the script is that make",
    "start": "1808150",
    "end": "1813280"
  },
  {
    "start": "1809000",
    "end": "1809000"
  },
  {
    "text": "sure you extract the information that you need so I mentioned early that all the different impediments have",
    "start": "1813280",
    "end": "1818680"
  },
  {
    "text": "different information so in this case for example it might contain an error code and it might contain an error",
    "start": "1818680",
    "end": "1825100"
  },
  {
    "text": "message and the reason for that is that if the user is running something it might contain he might not have been",
    "start": "1825100",
    "end": "1830980"
  },
  {
    "text": "successful in running it so if it was unsuccessful the error message will actually be posted in a different way",
    "start": "1830980",
    "end": "1836860"
  },
  {
    "text": "than it would if it was successful because it weren't any error message done so you have to add features where",
    "start": "1836860",
    "end": "1842800"
  },
  {
    "text": "you say if this exists then you add it if not ignore it or set us a default value but make sure that you have proper",
    "start": "1842800",
    "end": "1849670"
  },
  {
    "text": "error handling for every information that you collect in it couple of other",
    "start": "1849670",
    "end": "1855160"
  },
  {
    "start": "1853000",
    "end": "1853000"
  },
  {
    "text": "items capture critical information if this is a root user you might want to",
    "start": "1855160",
    "end": "1860170"
  },
  {
    "text": "have a different alert system so for example you can have a script that runs that anytime a root user is being used",
    "start": "1860170",
    "end": "1866559"
  },
  {
    "text": "to run commands shoot off information to your slack channel say that somebody's doing something and the reason for that",
    "start": "1866559",
    "end": "1873580"
  },
  {
    "text": "is that certain accounts are very sensitive it also is because in some case if you implement remediation kind",
    "start": "1873580",
    "end": "1879429"
  },
  {
    "text": "of features and countermeasures you can implement the same remediation for all",
    "start": "1879429",
    "end": "1884590"
  },
  {
    "text": "the accounts so for example you might not be able to implement deny policy on a root account so if it's whitelisted do",
    "start": "1884590",
    "end": "1891670"
  },
  {
    "text": "this if it's a root account make sure you have a different process for it also don't overdo it I said earlier that",
    "start": "1891670",
    "end": "1897840"
  },
  {
    "start": "1894000",
    "end": "1894000"
  },
  {
    "text": "always make sure you have your countermeasures in this case for example we have our standard we have a priority",
    "start": "1897840",
    "end": "1903670"
  },
  {
    "text": "we have alerting forensics and logging but in this case the actual priority is the alert and it is the forensics and it",
    "start": "1903670",
    "end": "1910390"
  },
  {
    "text": "is the logging because it's basically are sending messages to a stack channel but the fact that is doing that",
    "start": "1910390",
    "end": "1916330"
  },
  {
    "text": "continuously means that we don't have to do all the other steps on it so don't overdo what you're trying to do also one",
    "start": "1916330",
    "end": "1923140"
  },
  {
    "text": "important thing is that in case you want to in some cases when you implement remediation even if it is a whitelist",
    "start": "1923140",
    "end": "1929230"
  },
  {
    "text": "account you might want alert on it you might not want to do our disable on it but you might want to you still wanna",
    "start": "1929230",
    "end": "1934300"
  },
  {
    "text": "alert on it and adapt the data so this is basically the message function so for example if it is a root account we want",
    "start": "1934300",
    "end": "1941050"
  },
  {
    "text": "to add additional information and say that this is Rubicam high alert DEFCON 5 if you have multiple",
    "start": "1941050",
    "end": "1950220"
  },
  {
    "text": "multiple information in for example the the API star running we're gonna have different information going in so at",
    "start": "1950220",
    "end": "1956260"
  },
  {
    "text": "that all the time to what it is that you're actually measuring and send the correct message for it one item especially here is that don't",
    "start": "1956260",
    "end": "1963640"
  },
  {
    "text": "store actually two items here one is minimize the amount of external libraries you have to use so for example",
    "start": "1963640",
    "end": "1969700"
  },
  {
    "text": "if you writing in Python there's a awesome module when you try to reach out to external systems called requests when",
    "start": "1969700",
    "end": "1978550"
  },
  {
    "text": "you want to do HTTP requests it's really easy to use the problem is that requires an external module in this case you can",
    "start": "1978550",
    "end": "1985420"
  },
  {
    "text": "just use URL Lib too which is a much more easier it's included already you don't have to install extra modules so",
    "start": "1985420",
    "end": "1991330"
  },
  {
    "text": "when you want to deploy the script you simply deploy the actual script without having to package it up first so always trying to make it as easy to",
    "start": "1991330",
    "end": "1997360"
  },
  {
    "text": "use as possible and easy to distribute second thing here think it's for me the",
    "start": "1997360",
    "end": "2003510"
  },
  {
    "text": "second thing here like I said don't store anything locally so in this case",
    "start": "2003510",
    "end": "2008850"
  },
  {
    "text": "we have to use the web hook parameter we love parameter store how many people",
    "start": "2008850",
    "end": "2015090"
  },
  {
    "text": "have looked at parameter store couple awesome so if you want to store sensitive information like a web hook",
    "start": "2015090",
    "end": "2021660"
  },
  {
    "text": "URL because you don't want to share that URL with everyone use an external source where you can store it securely so",
    "start": "2021660",
    "end": "2027360"
  },
  {
    "text": "parameter store is a feature under ec2 because it's part of the SSM family but",
    "start": "2027360",
    "end": "2033450"
  },
  {
    "text": "it's a way to store configuration information where you can choose to store it encrypted you can use kms to",
    "start": "2033450",
    "end": "2039300"
  },
  {
    "text": "encrypt the actual value and then give the kms key to the lambda function you",
    "start": "2039300",
    "end": "2045150"
  },
  {
    "text": "can also use I am integration so that when the lambda function is the only one that can read the web hook and you can",
    "start": "2045150",
    "end": "2051210"
  },
  {
    "text": "use custom kms you just use that the default one but don't store it in the script look at parameter store it's",
    "start": "2051210",
    "end": "2057120"
  },
  {
    "text": "absolutely amazing for secure automation and this is how you trigger it so I",
    "start": "2057120",
    "end": "2063060"
  },
  {
    "text": "mentioned earlier the this is exactly the same as you saw earlier it's basically a cowboy's event where we just",
    "start": "2063060",
    "end": "2069300"
  },
  {
    "text": "say user identity has to be in this case raymond user tracking key item here case",
    "start": "2069300",
    "end": "2076770"
  },
  {
    "text": "sensitive I did the same mistake myself table show you for half an hour until",
    "start": "2076770",
    "end": "2082280"
  },
  {
    "text": "have a large case on one of the letters and then our alerts then one alert to",
    "start": "2082280",
    "end": "2089629"
  },
  {
    "text": "send multiple alerts here you have the slack channel we have a chime message and we have an SNS topic that is being",
    "start": "2089630",
    "end": "2095990"
  },
  {
    "text": "sent as an email you can set up whatever type of alerting you want these third",
    "start": "2095990",
    "end": "2101780"
  },
  {
    "text": "one we want to see is exposed keys remediation using trusted advisor so how many people have exposed their keys on",
    "start": "2101780",
    "end": "2109630"
  },
  {
    "text": "exposed keys is it's a huge security risk putting it on github you can guarantee that someone else has picked",
    "start": "2109750",
    "end": "2115970"
  },
  {
    "text": "it up before you have they are being monitored continuously they are also being monitored by us previously might",
    "start": "2115970",
    "end": "2123200"
  },
  {
    "text": "have seen that we sent email if you found you found your keys on github we actually integrated that with trusted",
    "start": "2123200",
    "end": "2128330"
  },
  {
    "text": "advisor trusted advisor is available for people business support or enterprise support so you will need business around",
    "start": "2128330",
    "end": "2134750"
  },
  {
    "text": "the first support but it is a really effective tool for using something like this and trusted advisor is fully",
    "start": "2134750",
    "end": "2140180"
  },
  {
    "text": "integrated with CalPERS events so how do we detect and handle expose Keys how do",
    "start": "2140180",
    "end": "2145190"
  },
  {
    "text": "we prevent interference with our CSE to pipeline how do we ensure the right keeps them notified more or less the",
    "start": "2145190",
    "end": "2150530"
  },
  {
    "text": "same as previously but with the addition that now it's really sensitive because now we don't have a suspected user we actually have an exposed user a couple",
    "start": "2150530",
    "end": "2158990"
  },
  {
    "start": "2158000",
    "end": "2158000"
  },
  {
    "text": "of items shared responsibility new tools like trust advisor is a lot of extra",
    "start": "2158990",
    "end": "2164210"
  },
  {
    "text": "text reference to your website this to describe liability TLDR you need to secure resources just because we will",
    "start": "2164210",
    "end": "2171290"
  },
  {
    "text": "send you notification that your keys are exposed that's not mean that we have ownership of security expert of handling",
    "start": "2171290",
    "end": "2177080"
  },
  {
    "text": "that you are responsible for your keys we do not guarantee that we will detect your keys on github or other version",
    "start": "2177080",
    "end": "2183290"
  },
  {
    "text": "control sources you need to make sure you cover that yourself so quick demo",
    "start": "2183290",
    "end": "2189050"
  },
  {
    "text": "and to be clear I will not publish my",
    "start": "2189050",
    "end": "2196070"
  },
  {
    "text": "keys on github I was considering it but advise not to",
    "start": "2196070",
    "end": "2203280"
  },
  {
    "text": "so the work way we're gonna do this essentially is that we're gonna create an access key we're gonna simulate",
    "start": "2203280",
    "end": "2209230"
  },
  {
    "text": "exposure using trust advisor the way we simulate exposure is that I have the exact error message we actually do have",
    "start": "2209230",
    "end": "2216160"
  },
  {
    "text": "that on the website so I mentioned earlier we have the site with all the sample events so this is actually posted",
    "start": "2216160",
    "end": "2222550"
  },
  {
    "text": "as a sample events with the information from trust advisor when you expose your keys so in this case it's fairly easy",
    "start": "2222550",
    "end": "2230680"
  },
  {
    "text": "we're gonna create access keys there they are now active and so in this case",
    "start": "2230680",
    "end": "2238930"
  },
  {
    "text": "I walk through it simple we create our access keys the new ones we thence fired",
    "start": "2238930",
    "end": "2244540"
  },
  {
    "text": "off the land event using the simulated information basically exactly the same information that you will get from",
    "start": "2244540",
    "end": "2250030"
  },
  {
    "text": "trusted advisor and right after that our keys are now inactive and we're sad",
    "start": "2250030",
    "end": "2255400"
  },
  {
    "text": "because we can no longer use them super easy demo not that exciting the cool",
    "start": "2255400",
    "end": "2261520"
  },
  {
    "text": "part is what can you do with it so if you look at the actual code here we still have our white listing features",
    "start": "2261520",
    "end": "2268170"
  },
  {
    "text": "I would HIGHLY advise against using white listing feature on exposed keys",
    "start": "2268170",
    "end": "2273450"
  },
  {
    "text": "even though it might be your CI CD pipeline it still has high high risk of",
    "start": "2273450",
    "end": "2279900"
  },
  {
    "text": "well if I said like this you have to weigh which is best your CI CD pipeline stopped working or",
    "start": "2279900",
    "end": "2286770"
  },
  {
    "text": "your keys are on the Internet evil Bob will be pick quick on picking them up",
    "start": "2286770",
    "end": "2292920"
  },
  {
    "text": "this script actually has a number of different features that you can do because there's different scenarios of",
    "start": "2292920",
    "end": "2298090"
  },
  {
    "text": "example do we want to block the user or do we just want to disable the keys block the use it means to do we want to",
    "start": "2298090",
    "end": "2304300"
  },
  {
    "text": "block everything that user can do just to be extra sure that that user hasn't done anything do you want to delete the",
    "start": "2304300",
    "end": "2311500"
  },
  {
    "text": "key so just in make them inactive the really important thing to note here is that if you when we find keys on github",
    "start": "2311500",
    "end": "2318040"
  },
  {
    "text": "we will actually implement a couple of security features on your account so once someone has their access keys",
    "start": "2318040",
    "end": "2324460"
  },
  {
    "text": "exposed on github we actually will prevent you from creating your ec2 instances and this is just to protect",
    "start": "2324460",
    "end": "2329620"
  },
  {
    "text": "yourself so no one will take those keys and spin off 10 2010 Excel servers to do",
    "start": "2329620",
    "end": "2335500"
  },
  {
    "text": "some combining it is not financially sound to do so the only way you can lift that",
    "start": "2335500",
    "end": "2341980"
  },
  {
    "text": "block is to delete the access key that was exposed once you delete that it will automatically be revoked and you can",
    "start": "2341980",
    "end": "2347680"
  },
  {
    "text": "start creating ec2 instances again making them inactive does not constitute deleting them and the block will still",
    "start": "2347680",
    "end": "2354070"
  },
  {
    "text": "be in place but in case you want to make them inactive you can do that as a choice we also have a choice here do you",
    "start": "2354070",
    "end": "2360790"
  },
  {
    "text": "want to deny for example temporary credentials why do you want to do that well if I found keys the first thing I'm gonna do is create a bunch of different",
    "start": "2360790",
    "end": "2367060"
  },
  {
    "text": "temporary credentials that I can use instead of my actual keys because now even though this key might not have",
    "start": "2367060",
    "end": "2373420"
  },
  {
    "text": "access to anything else I can create shadow copies of temporary credentials and you might not track those in your",
    "start": "2373420",
    "end": "2379390"
  },
  {
    "text": "login so you might want to create so this has actually a feature the script",
    "start": "2379390",
    "end": "2385000"
  },
  {
    "text": "to disable temporary keys as well so if you enable that it's just gonna",
    "start": "2385000",
    "end": "2390280"
  },
  {
    "text": "implement the block policy for that but it's not gonna affect anything else on the account one really important thing",
    "start": "2390280",
    "end": "2396850"
  },
  {
    "text": "here is that do you want to remediate suspected level so exposed keys have multiple levels one is come from I can't",
    "start": "2396850",
    "end": "2403000"
  },
  {
    "text": "remember this exactly but confirmed so basically it's either we've seen the keys out there we've seen usage of the",
    "start": "2403000",
    "end": "2408970"
  },
  {
    "text": "keys or we've seen the keys out there but we haven't seen anyone use them yet and the third one is that we haven't",
    "start": "2408970",
    "end": "2414400"
  },
  {
    "text": "seen the keys on github but we've seen unusual suspected behavior that we think",
    "start": "2414400",
    "end": "2419890"
  },
  {
    "text": "that they have been exposed so this is a suspected level this doesn't mean that",
    "start": "2419890",
    "end": "2425380"
  },
  {
    "text": "the keys are exposed on a version control but it's just that the behavior random reminds of that so we have a",
    "start": "2425380",
    "end": "2432070"
  },
  {
    "text": "feature I have a feature in the script it says the one remediate is suspect the level as well and these are the types of",
    "start": "2432070",
    "end": "2439240"
  },
  {
    "text": "choices you have to do when you create these kind of scripts because they are the guardrails as well I can't tell you",
    "start": "2439240",
    "end": "2445690"
  },
  {
    "text": "how many times the suspected level will happen versus a real confirmed case but what if it does and then whether or not",
    "start": "2445690",
    "end": "2454210"
  },
  {
    "text": "you wanna store historical data for forensics the cool thing about trusted advisor is this wall is that when you",
    "start": "2454210",
    "end": "2459970"
  },
  {
    "start": "2457000",
    "end": "2457000"
  },
  {
    "text": "get these kind of alerts you actually get a case ID with it and that goes into the alert that comes in there and you",
    "start": "2459970",
    "end": "2465790"
  },
  {
    "text": "can actually use that case ID on the the dashboard for your AWS console so",
    "start": "2465790",
    "end": "2472550"
  },
  {
    "text": "actually get so if you have exposed keys you can call support and refer to that case ID and you have a much faster",
    "start": "2472550",
    "end": "2478850"
  },
  {
    "text": "process of it and then the same thing as usual what kind of information we want",
    "start": "2478850",
    "end": "2485450"
  },
  {
    "text": "we have still or is this route because route can also create access keys a separate access key so if this is route",
    "start": "2485450",
    "end": "2492050"
  },
  {
    "text": "defcon5 the important thing here is that if it is route or actually don't don't",
    "start": "2492050",
    "end": "2499940"
  },
  {
    "start": "2498000",
    "end": "2498000"
  },
  {
    "text": "store sensitive data and code remember to check the important info because if",
    "start": "2499940",
    "end": "2506060"
  },
  {
    "text": "this is route we can't implement usage a knife so we can't put a complete use it",
    "start": "2506060",
    "end": "2512390"
  },
  {
    "text": "deny on the route account so that's why we have to adapt our script and adapt our process because the second thing is",
    "start": "2512390",
    "end": "2518420"
  },
  {
    "text": "that if you don't have proper fairly error handling you should keep my fail and then someday you have a lot of",
    "start": "2518420",
    "end": "2524480"
  },
  {
    "text": "failures running but the keys are still out there and then very simple forensics",
    "start": "2524480",
    "end": "2530450"
  },
  {
    "text": "example in this case previously it was simply that we found these keys before",
    "start": "2530450",
    "end": "2535640"
  },
  {
    "text": "and they're out in the world now Allison",
    "start": "2535640",
    "end": "2541130"
  },
  {
    "start": "2540000",
    "end": "2540000"
  },
  {
    "text": "said don't forget the temporary credentials if you have a temporary credential deny policy basically you said yes on that one we can say that",
    "start": "2541130",
    "end": "2547490"
  },
  {
    "text": "okay and a policy saying that any temporary credential that was issued before right now it's gonna be denied",
    "start": "2547490",
    "end": "2553880"
  },
  {
    "text": "it's a super simple case of just deny everything that you created temporary initials or most cases the way they used",
    "start": "2553880",
    "end": "2560660"
  },
  {
    "text": "in production you will simply create new ones but any temperature and so that was created by a malicious actor we want to",
    "start": "2560660",
    "end": "2567710"
  },
  {
    "text": "make sure we disable everything and as I said simple logging in this case we",
    "start": "2567710",
    "end": "2572780"
  },
  {
    "start": "2570000",
    "end": "2570000"
  },
  {
    "text": "exposed like username event time expose key whatever it could be that we want to capture put it in a dynamo table and",
    "start": "2572780",
    "end": "2578090"
  },
  {
    "text": "this is what we use to see has these keys being exposed before why do you want to see something like that well if",
    "start": "2578090",
    "end": "2583670"
  },
  {
    "text": "it's a simple user a simple user but if it's a user that that exposed the keys",
    "start": "2583670",
    "end": "2589280"
  },
  {
    "text": "and this is the second time this happens you might want to have a little sidebar with that user so it's important to know",
    "start": "2589280",
    "end": "2595850"
  },
  {
    "text": "if something has a repeated event or if it's a first time offense and the same",
    "start": "2595850",
    "end": "2600980"
  },
  {
    "text": "as before sin directly to our users and make sure in this case we have a different kind of",
    "start": "2600980",
    "end": "2606200"
  },
  {
    "text": "message because it's a key that is exposed so I would HIGHLY advise on creating multiple web hooks so you have",
    "start": "2606200",
    "end": "2612349"
  },
  {
    "text": "a web hook that represent what it is that you're trying to do that way it's easier to see in the Lord directly what",
    "start": "2612349",
    "end": "2617690"
  },
  {
    "text": "it is that happened the next case and the next time most going to be released",
    "start": "2617690",
    "end": "2623630"
  },
  {
    "text": "is auto remediate world accessible as 3 buckets using Macy so how many people",
    "start": "2623630",
    "end": "2629509"
  },
  {
    "text": "have accidentally opened an s3 bucket filled world how many people did not",
    "start": "2629509",
    "end": "2635480"
  },
  {
    "text": "tell their boss that they accidentally open eyes 3 market problem statement is",
    "start": "2635480",
    "end": "2641089"
  },
  {
    "text": "very easy admins with high enough AWS im permissions can accidentally open up an s3 bucket it happens",
    "start": "2641089",
    "end": "2648549"
  },
  {
    "text": "how do but the thing is always that how do we do still allow public buckets for",
    "start": "2648549",
    "end": "2653749"
  },
  {
    "text": "long sensitive data we actually have a lot of artists out there that should be open because they use for web services",
    "start": "2653749",
    "end": "2659299"
  },
  {
    "text": "they used for download areas for users there's publicly open buckets is not",
    "start": "2659299",
    "end": "2664999"
  },
  {
    "text": "wrong publicly open buckets with PII is wrong but there is a great distinction",
    "start": "2664999",
    "end": "2670700"
  },
  {
    "text": "there so how do we automatically remediate that when it's sensitive or regulated data or how do we ensure that",
    "start": "2670700",
    "end": "2676069"
  },
  {
    "text": "right teams get notified well so when you work with multiple systems you have to also work with multiple state so for",
    "start": "2676069",
    "end": "2681380"
  },
  {
    "start": "2678000",
    "end": "2678000"
  },
  {
    "text": "example in this case identifying classify might not be suitable for your secured automation but it's an awesome",
    "start": "2681380",
    "end": "2687140"
  },
  {
    "text": "feature from Maisie Maisie has a functionality of automatically find PII back buckets with PII data and that is",
    "start": "2687140",
    "end": "2695420"
  },
  {
    "text": "open to the world you can set up these queries to automatically kick off an alert when that is discovered and send",
    "start": "2695420",
    "end": "2701539"
  },
  {
    "text": "that alert directly to a lambda function or rather send that to carwash events in cloud which events will actually trigger",
    "start": "2701539",
    "end": "2707509"
  },
  {
    "text": "off a learning function with the full the information from the Macy bucket amaze event and that's gonna include for",
    "start": "2707509",
    "end": "2713329"
  },
  {
    "text": "example risk level which individual files it found what what type of data",
    "start": "2713329",
    "end": "2720230"
  },
  {
    "text": "says is PII it's gonna say this is we found two MX cards in one text file",
    "start": "2720230",
    "end": "2725809"
  },
  {
    "text": "hidden it within the depth of whatever but at this bucket happen to be world readable so now those two files are also",
    "start": "2725809",
    "end": "2731480"
  },
  {
    "text": "called readable and the new slam that you actually evaluate and fix the things there's",
    "start": "2731480",
    "end": "2737200"
  },
  {
    "start": "2736000",
    "end": "2736000"
  },
  {
    "text": "other methods that you can do this with you don't have to use Maci you can set up for example a config rule that will",
    "start": "2737200",
    "end": "2743200"
  },
  {
    "text": "simply run through all your buckets you look for these events I can tell you if it's easier but you can also say that we",
    "start": "2743200",
    "end": "2750400"
  },
  {
    "text": "don't want to have any bucket doesn't matter we don't what it is we don't want to have any buckets in this account to",
    "start": "2750400",
    "end": "2756369"
  },
  {
    "text": "be world readable then you can just run it in config rule because it doesn't matter if it's PII or if it's your cat",
    "start": "2756369",
    "end": "2761740"
  },
  {
    "text": "photos just disable anything that is well readable we can run it in cloud wash events using a timer",
    "start": "2761740",
    "end": "2767500"
  },
  {
    "text": "time stamp instead of a event-based as well but the case you don't get the data",
    "start": "2767500",
    "end": "2772599"
  },
  {
    "text": "classification information so and just",
    "start": "2772599",
    "end": "2783279"
  },
  {
    "text": "an example on the the previous one where we had exposed keys is that you can see",
    "start": "2783279",
    "end": "2791440"
  },
  {
    "text": "that there's different automations those are different message types we don't have all the AP items happening but we",
    "start": "2791440",
    "end": "2799089"
  },
  {
    "text": "do see that we have a information saying that the automatic action taken on the actual access keys were we just",
    "start": "2799089",
    "end": "2805960"
  },
  {
    "text": "inactivated the keys so when you send the alert in this from the previous demo when you send this kind of a large also",
    "start": "2805960",
    "end": "2812049"
  },
  {
    "text": "include the action taken so just don't send hey we found access keys and freaked everyone out say also that we",
    "start": "2812049",
    "end": "2819009"
  },
  {
    "text": "also net inactivated them or we delete the active keys and they have a little less readout so",
    "start": "2819009",
    "end": "2828720"
  },
  {
    "text": "oh sorry yeah this one we're actually gonna run manually so I mentioned earlier that we have multiple ways of",
    "start": "2834390",
    "end": "2839880"
  },
  {
    "text": "triggering this and I want to actually show you how to run it manually so this",
    "start": "2839880",
    "end": "2844920"
  },
  {
    "text": "is the Lambert console this is the new lambda console if you haven't gone into",
    "start": "2844920",
    "end": "2850950"
  },
  {
    "text": "lambda today take a look at it guess",
    "start": "2850950",
    "end": "2857010"
  },
  {
    "text": "what it was a surprise to me as well so in lambda you can actually configure",
    "start": "2857010",
    "end": "2863880"
  },
  {
    "text": "test events and here you can add all the information that you get from the actual",
    "start": "2863880",
    "end": "2871110"
  },
  {
    "text": "event and you can see that we have for example in my bucket we have two text files so this is actually a real event",
    "start": "2871110",
    "end": "2876870"
  },
  {
    "text": "from when I simulated the event using Macy so you can just create whatever you",
    "start": "2876870",
    "end": "2884280"
  },
  {
    "text": "want and to add it as a test event we also have our buckets where we see",
    "start": "2884280",
    "end": "2889500"
  },
  {
    "text": "permissions we have there's a real bucket it's a demo bucket it has public access yes for lists and read and in",
    "start": "2889500",
    "end": "2898470"
  },
  {
    "text": "this case they see we're just gonna fire off the actual mase event and this is the actual Macy alert that is taken from",
    "start": "2898470",
    "end": "2904560"
  },
  {
    "text": "a real case it went green which is",
    "start": "2904560",
    "end": "2910080"
  },
  {
    "text": "always good when you stand in front of people so in this case it sends a larger",
    "start": "2910080",
    "end": "2915390"
  },
  {
    "text": "time in a sense a larger slack same thing as always and when i refresh my page is no longer public this is",
    "start": "2915390",
    "end": "2925140"
  },
  {
    "text": "actually how easy it is the thing that you need to remember though is that in this case there's two two ways that you",
    "start": "2925140",
    "end": "2934680"
  },
  {
    "text": "can actually make a bucket public you can do it on the ACL or you can do it in",
    "start": "2934680",
    "end": "2940110"
  },
  {
    "text": "a policy so in this case it didn't remove this business because it was a denied policy but what if we change this",
    "start": "2940110",
    "end": "2946770"
  },
  {
    "text": "to allow instead and now suddenly we have a public bucket policy so when you",
    "start": "2946770",
    "end": "2953190"
  },
  {
    "text": "do these kind of configure also and configure and make sure you look at multiple places because there are",
    "start": "2953190",
    "end": "2958290"
  },
  {
    "text": "multiple ways of making something bad that said can simply run the same script",
    "start": "2958290",
    "end": "2965370"
  },
  {
    "text": "again which would have happened upon detection and it's gonna clean up",
    "start": "2965370",
    "end": "2971010"
  },
  {
    "text": "everything so if both of them have been active immediately it would have cleaned up both and if you also saw that we had",
    "start": "2971010",
    "end": "2977400"
  },
  {
    "text": "a big yellow spot saying public this is also new feature we have an s3 so if you do make a pub a bucket public by",
    "start": "2977400",
    "end": "2984360"
  },
  {
    "text": "accident it's quite hard to say that I did not notice the s3 console will",
    "start": "2984360",
    "end": "2990570"
  },
  {
    "text": "actually show you all the buckets that are public with a big yellow icon saying public that was the clearest one we",
    "start": "2990570",
    "end": "2997680"
  },
  {
    "text": "could find and same thing as before",
    "start": "2997680",
    "end": "3002870"
  },
  {
    "text": "oops we have our learning the key here",
    "start": "3002870",
    "end": "3009650"
  },
  {
    "text": "on the open bucket alert is that we found a AB oculis public see we can make",
    "start": "3009650",
    "end": "3016460"
  },
  {
    "text": "this a little bigger in the event here and in the alert we sent out we actually",
    "start": "3016460",
    "end": "3022940"
  },
  {
    "text": "included the risk score so this is information coming from AC directly saying that this has a risk score of 8",
    "start": "3022940",
    "end": "3029060"
  },
  {
    "text": "based on the fact that you had to AMEX card in a public readable SD file it is",
    "start": "3029060",
    "end": "3035510"
  },
  {
    "text": "a risk score and a DLP risk score it gives you information that we found unencrypted credit card numbers it has a",
    "start": "3035510",
    "end": "3043400"
  },
  {
    "text": "severe - of high we had a bucket fail region info we also included here what",
    "start": "3043400",
    "end": "3049730"
  },
  {
    "text": "was taken what was happening in the script so in this case we did an automatic remediation we removed from",
    "start": "3049730",
    "end": "3055880"
  },
  {
    "text": "the ACL we removed two permissions they were making it publicly available one was for reading the ACL I'm almost",
    "start": "3055880",
    "end": "3062300"
  },
  {
    "text": "reading the data we also removed the policy and since we ran it twice in the",
    "start": "3062300",
    "end": "3068810"
  },
  {
    "text": "second case we also removed the s3 bucket policy that will change from",
    "start": "3068810",
    "end": "3074720"
  },
  {
    "text": "denied to allow so make sure that you send the information about what's actually happening when you send those",
    "start": "3074720",
    "end": "3080750"
  },
  {
    "text": "kind of alerts and same as previously we have the exact same information in our Maisie channel and if you look at",
    "start": "3080750",
    "end": "3093130"
  },
  {
    "text": "so encode highlights here again white list with s3 it's more likely that you",
    "start": "3094099",
    "end": "3100199"
  },
  {
    "start": "3095000",
    "end": "3095000"
  },
  {
    "text": "want to white list buckets just because they're our buckets it should be white listed so if you run these two clash",
    "start": "3100199",
    "end": "3105299"
  },
  {
    "text": "events have a way to write this down you don't want to have a tag on the bucket saying white least okay or public bucket",
    "start": "3105299",
    "end": "3112259"
  },
  {
    "text": "okay because if it is an attacker it's kind of easy to detect that goes for",
    "start": "3112259",
    "end": "3118979"
  },
  {
    "text": "anything so in this case just as an example I created a key called tracker with a md5 hash and then the five hash",
    "start": "3118979",
    "end": "3127019"
  },
  {
    "text": "is just it's just an md5 or approved but have a way to tag what is approved and",
    "start": "3127019",
    "end": "3132839"
  },
  {
    "text": "it could be something else it could be a dynamo table this just a simple example because it's visible also do you wanna",
    "start": "3132839",
    "end": "3140099"
  },
  {
    "text": "remediate readable or writable these are also important things because if it is a for example a public website you want to",
    "start": "3140099",
    "end": "3147869"
  },
  {
    "text": "have readable but you definitely don't want to have writable because you don't want other people go in and updating your website but choose how you want to",
    "start": "3147869",
    "end": "3157499"
  },
  {
    "text": "do it if it is sensitive information you might not want to have anything that is well read that is available to everyone and then whether or not you want to do",
    "start": "3157499",
    "end": "3164279"
  },
  {
    "text": "just ACL or bucket policies bucket policies are of course more it's easier",
    "start": "3164279",
    "end": "3170549"
  },
  {
    "text": "to make a mistake because it's a bucket policy we have a lot of tools to make it easy for you but it is still easier than",
    "start": "3170549",
    "end": "3176519"
  },
  {
    "text": "just clicking a button saying that make this public same thing gathering event",
    "start": "3176519",
    "end": "3182579"
  },
  {
    "text": "information from the other services that you get from widely support in this case",
    "start": "3182579",
    "end": "3188880"
  },
  {
    "start": "3186000",
    "end": "3186000"
  },
  {
    "text": "we use tagging and just get the tags and compare them you could use parameter store dynamodb whatever it is I would",
    "start": "3188880",
    "end": "3195630"
  },
  {
    "text": "highly recommend using parameter store just because it's it's a really easy way of using this kind of data when you go",
    "start": "3195630",
    "end": "3203819"
  },
  {
    "text": "through the list remember there are multiple ways that you can do it a CLS and policies ACLs",
    "start": "3203819",
    "end": "3209190"
  },
  {
    "text": "are super easy because you basically is looking for all users if you have all users in there that means that everyone",
    "start": "3209190",
    "end": "3215009"
  },
  {
    "text": "can read it at least read or write if you don't have that active it's not going to show up at all so it's very",
    "start": "3215009",
    "end": "3221609"
  },
  {
    "text": "easy to detect the trickier part is on when you have a bucket policy in this",
    "start": "3221609",
    "end": "3228300"
  },
  {
    "text": "case we're looking for a principle that says star so basically any time anyone can do something and it has allow so if",
    "start": "3228300",
    "end": "3238200"
  },
  {
    "text": "it's a deny we find by that we can put a deny on everyone that that's perfectly fine but at any time we see an allow and",
    "start": "3238200",
    "end": "3246270"
  },
  {
    "text": "the principle is star we don't care if it's list read whatever it is we know that someone made something public to",
    "start": "3246270",
    "end": "3252240"
  },
  {
    "text": "everyone and we want to deny that and finally we want to have a alert on that",
    "start": "3252240",
    "end": "3258570"
  },
  {
    "text": "of course as well this is actually how easy it is to set up remediation for s3 buckets it's a simple partial script or",
    "start": "3258570",
    "end": "3266430"
  },
  {
    "text": "Python script that you can just trigger on a timely basis on change on detection",
    "start": "3266430",
    "end": "3271500"
  },
  {
    "text": "of PII data whatever it is there should never be a open bucket by accident the",
    "start": "3271500",
    "end": "3278880"
  },
  {
    "text": "last one we'll talk about is multi-account remediation hi we had a handle up raised on how many people had up multiple accounts quite a",
    "start": "3278880",
    "end": "3285420"
  },
  {
    "text": "lot so the state may is that we have multiple accounts and we want to enable remediation for all of them so super",
    "start": "3285420",
    "end": "3294090"
  },
  {
    "text": "quick demo",
    "start": "3294090",
    "end": "3296630"
  },
  {
    "text": "and this is the world's most boring demo",
    "start": "3301300",
    "end": "3306420"
  },
  {
    "text": "we want to stop shower gel and we're gonna enable it again and I'm actually",
    "start": "3307290",
    "end": "3312760"
  },
  {
    "text": "gonna switch back and show while this is running the way to do this when we deal",
    "start": "3312760",
    "end": "3322810"
  },
  {
    "start": "3320000",
    "end": "3320000"
  },
  {
    "text": "in multiple accounts is that we want to use a new feature called flaubert eventbus this allows you to send similar",
    "start": "3322810",
    "end": "3329110"
  },
  {
    "text": "to cloud shells and multiple send events to from multiple accounts into a central account the only way the only thing we",
    "start": "3329110",
    "end": "3338170"
  },
  {
    "text": "have to do there is that in the target account monitor account we have to in the monitoring account we have to allow",
    "start": "3338170",
    "end": "3344650"
  },
  {
    "text": "the lambda function to assume role because it's going to assume a role in a different account and then we want to",
    "start": "3344650",
    "end": "3351070"
  },
  {
    "start": "3349000",
    "end": "3349000"
  },
  {
    "text": "create a rule in the monitor account saying that anything that has to do with cloud shell we want to send an alert on",
    "start": "3351070",
    "end": "3358920"
  },
  {
    "text": "and this is exactly what happened here we see now that shower gel was stored it",
    "start": "3358920",
    "end": "3364450"
  },
  {
    "text": "stopped and now it's starting and that's not as cool but the cool thing is that everything here is on the the target",
    "start": "3364450",
    "end": "3371590"
  },
  {
    "text": "account and if I see the lambda functions we have in there it's empty we",
    "start": "3371590",
    "end": "3376930"
  },
  {
    "text": "don't have any lambda functions in the account to be monitoring it's completely empty the only thing we do have is",
    "start": "3376930",
    "end": "3383400"
  },
  {
    "text": "actual watch event bus that's the only alert we have so we're sorry and in a",
    "start": "3383400",
    "end": "3389190"
  },
  {
    "text": "campus event that targets a bus so we don't need to distribute our lambda function to do remediation we can simply",
    "start": "3389190",
    "end": "3396370"
  },
  {
    "text": "setup them to send the message to a central account so the way we do this is",
    "start": "3396370",
    "end": "3403630"
  },
  {
    "start": "3403000",
    "end": "3403000"
  },
  {
    "text": "we create a rule in the master security account saying that anytime we get stop",
    "start": "3403630",
    "end": "3409750"
  },
  {
    "text": "logging this is exactly the same as if you do it in your own account the difference is that now we are crucial to",
    "start": "3409750",
    "end": "3415180"
  },
  {
    "text": "get the account information in the alert so once we get the account information we have three steps swim policy",
    "start": "3415180",
    "end": "3421240"
  },
  {
    "text": "credential remediate step one we want to create a one assumer role",
    "start": "3421240",
    "end": "3426910"
  },
  {
    "start": "3423000",
    "end": "3423000"
  },
  {
    "text": "when you assume a role make sure you always implement the roll policy because we want to have as",
    "start": "3426910",
    "end": "3433050"
  },
  {
    "text": "least privileged as possible and you can actually say that when I assume the role this is the policy I want to use I don't",
    "start": "3433050",
    "end": "3438420"
  },
  {
    "text": "care that I can do more on your side this is the only thing I want to do so you assume it's least privileged as",
    "start": "3438420",
    "end": "3444360"
  },
  {
    "text": "possible we can also say that in this case I'm looking if the source is cloud shell and the event is stop logging I",
    "start": "3444360",
    "end": "3450510"
  },
  {
    "text": "want to do this policy I can set up multiple types of events here so I have",
    "start": "3450510",
    "end": "3456420"
  },
  {
    "text": "the same function for all my events except to get the credentials assume",
    "start": "3456420",
    "end": "3462210"
  },
  {
    "start": "3460000",
    "end": "3460000"
  },
  {
    "text": "credentials in the role step 3 fix it we start the cow shell and in all",
    "start": "3462210",
    "end": "3469650"
  },
  {
    "text": "of these cases as you can see with the boater client we actually add access key and access key token and this is",
    "start": "3469650",
    "end": "3475650"
  },
  {
    "text": "information we got when we assume the role step 4 so this is about as hard as",
    "start": "3475650",
    "end": "3484080"
  },
  {
    "text": "it is to do a multi account strategy you assume a role you get the credentials",
    "start": "3484080",
    "end": "3489480"
  },
  {
    "text": "and you fix it there's no need to do say that multi account is hard when you do",
    "start": "3489480",
    "end": "3495360"
  },
  {
    "text": "remediation with eventbus it's as easy s as you set up for your own account the",
    "start": "3495360",
    "end": "3500670"
  },
  {
    "text": "only thing you need to do is get the credentials and then run everything against the target account you have to do one left extra step set up the event",
    "start": "3500670",
    "end": "3507630"
  },
  {
    "text": "bus in the master account same thing you did with top job so the general",
    "start": "3507630",
    "end": "3514020"
  },
  {
    "start": "3512000",
    "end": "3512000"
  },
  {
    "text": "takeaways use guardrails if you use remediation don't nuke yourself not a good idea and if you do don't tell them",
    "start": "3514020",
    "end": "3520830"
  },
  {
    "text": "you use my scripts learn from others OSS there's a ton of open-source out there",
    "start": "3520830",
    "end": "3526700"
  },
  {
    "text": "you don't have to use them but use them to learn look at what you have there and",
    "start": "3526700",
    "end": "3531780"
  },
  {
    "text": "see how you can modify it for your own systems always review the code test test tests multi-account strategy is not an",
    "start": "3531780",
    "end": "3540360"
  },
  {
    "text": "excuse not to automate it is extremely easy to do remediation now with a",
    "start": "3540360",
    "end": "3545580"
  },
  {
    "text": "multi-channel strategy and then tied into established communication systems",
    "start": "3545580",
    "end": "3551130"
  },
  {
    "text": "if secure so when you set up alerting use whatever inner system you have use whatever chat systems you have if you",
    "start": "3551130",
    "end": "3557250"
  },
  {
    "text": "have an IRL process tie your automation into that ire process don't reinvent the wheel don't tell your IR team that OH",
    "start": "3557250",
    "end": "3564000"
  },
  {
    "text": "away you have to go to this and this in this console just send the information to them it's not that hard to do",
    "start": "3564000",
    "end": "3569790"
  },
  {
    "text": "actually you can just use the web hook and they have everything they need and they don't need to adapt to you a couple",
    "start": "3569790",
    "end": "3576960"
  },
  {
    "text": "of other open-source project I just like to share those it's a bunch of star threat response loud clap custodian",
    "start": "3576960",
    "end": "3582090"
  },
  {
    "text": "security monkey Fido both from Netflix clouds bloodstream alert depending what",
    "start": "3582090",
    "end": "3588030"
  },
  {
    "text": "you want to do there's a ton of different systems that you can look at stream alert is awesome for for the",
    "start": "3588030",
    "end": "3594090"
  },
  {
    "text": "scattering information from multiple sources and sharing it out you can use stream alert in your systems as well",
    "start": "3594090",
    "end": "3599370"
  },
  {
    "text": "same thing with like threat response and clasp lloyd is that they have a lot of",
    "start": "3599370",
    "end": "3605100"
  },
  {
    "text": "different systems on line depending what you want to do if you want to do for example memory capture go checkout",
    "start": "3605100",
    "end": "3610140"
  },
  {
    "text": "threat response on their sites cloud custodian is by Capital One their release a hold remediation framework out",
    "start": "3610140",
    "end": "3616680"
  },
  {
    "text": "there you don't have to use it if you don't like to but learn from it it's a really good framework same thing with a",
    "start": "3616680",
    "end": "3622050"
  },
  {
    "text": "security monkey and Fido so check out everything that is out there if you have a secure donation project repo please let me know I want",
    "start": "3622050",
    "end": "3629850"
  },
  {
    "text": "to know I would love to add more things to this page just send me a note send me",
    "start": "3629850",
    "end": "3635040"
  },
  {
    "text": "an email and go up here talk to me after I want to know what you're doing as I said code will be available all the",
    "start": "3635040",
    "end": "3643770"
  },
  {
    "text": "sessions are going to be on YouTube after since this is Lily holding you from beer or your favorite cocktail go",
    "start": "3643770",
    "end": "3650460"
  },
  {
    "text": "out on YouTube after and check out some of the other sessions there's a really cool stuff out there that has to do with insert response shadow - I am policy",
    "start": "3650460",
    "end": "3658830"
  },
  {
    "text": "ninja it's a really cool session if you want to learn more how to deal with I am and different I am policies and then",
    "start": "3658830",
    "end": "3665730"
  },
  {
    "text": "using lambda as difference scenarios for your secure or nation otherwise thank",
    "start": "3665730",
    "end": "3671760"
  },
  {
    "text": "you so much for coming and enjoy party",
    "start": "3671760",
    "end": "3676310"
  }
]