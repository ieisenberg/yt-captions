[
  {
    "text": "- [Instructor] In this video segment,",
    "start": "810",
    "end": "2370"
  },
  {
    "text": "I am going to show you",
    "start": "2370",
    "end": "3659"
  },
  {
    "text": "how custom policy checks feature",
    "start": "3660",
    "end": "6330"
  },
  {
    "text": "of IAM Access Analyzer can be leveraged",
    "start": "6330",
    "end": "10281"
  },
  {
    "text": "to enforce security standards,",
    "start": "10281",
    "end": "13080"
  },
  {
    "text": "as defined by the customer security teams.",
    "start": "13080",
    "end": "16049"
  },
  {
    "text": "IAM Access Analyzer provides tools",
    "start": "16050",
    "end": "19199"
  },
  {
    "text": "that simplify permissions management",
    "start": "19200",
    "end": "21600"
  },
  {
    "text": "by making it easy for organizations",
    "start": "21600",
    "end": "24411"
  },
  {
    "text": "to set, verify, and refine permissions.",
    "start": "24411",
    "end": "28486"
  },
  {
    "text": "Oftentimes, security teams\ndelegate the responsibility",
    "start": "28486",
    "end": "33210"
  },
  {
    "text": "to authoring access\npolicies for applications",
    "start": "33210",
    "end": "36809"
  },
  {
    "text": "to development teams.",
    "start": "36810",
    "end": "38550"
  },
  {
    "text": "In order to ensure that the\nsecurity standards are met,",
    "start": "38550",
    "end": "42300"
  },
  {
    "text": "the security teams review the policies",
    "start": "42300",
    "end": "44745"
  },
  {
    "text": "before being rolled into production.",
    "start": "44745",
    "end": "47820"
  },
  {
    "text": "The policy reviews are manual",
    "start": "47820",
    "end": "50370"
  },
  {
    "text": "and require comprehensive\nknowledge of IAM policies,",
    "start": "50370",
    "end": "54360"
  },
  {
    "text": "especially when the policies\nare long and complex.",
    "start": "54360",
    "end": "58560"
  },
  {
    "text": "This process slows down innovation",
    "start": "58560",
    "end": "61500"
  },
  {
    "text": "and keeps the security teams away from",
    "start": "61500",
    "end": "63660"
  },
  {
    "text": "focusing on high value tasks.",
    "start": "63660",
    "end": "66545"
  },
  {
    "text": "IAM Access Analyzer provides policy checks",
    "start": "66545",
    "end": "70920"
  },
  {
    "text": "that help validate your IAM policies.",
    "start": "70920",
    "end": "74100"
  },
  {
    "text": "These include basic policy checks",
    "start": "74100",
    "end": "76740"
  },
  {
    "text": "that validate your policy",
    "start": "76740",
    "end": "78630"
  },
  {
    "text": "against policy grammar\nand AWS best practices.",
    "start": "78630",
    "end": "83009"
  },
  {
    "text": "You can view policy\nvalidation check findings",
    "start": "83010",
    "end": "86010"
  },
  {
    "text": "that include security warnings,\nerrors, general warnings,",
    "start": "86010",
    "end": "91010"
  },
  {
    "text": "and suggestions for your policy",
    "start": "92010",
    "end": "94650"
  },
  {
    "text": "using the ValidatePolicy API.",
    "start": "94650",
    "end": "97293"
  },
  {
    "text": "While ValidatePolicy API\nperforms over 100 checks",
    "start": "98732",
    "end": "103650"
  },
  {
    "text": "based on AWS security standards,",
    "start": "103650",
    "end": "106410"
  },
  {
    "text": "you can now run custom policy checks",
    "start": "106410",
    "end": "108930"
  },
  {
    "text": "based on your security standards.",
    "start": "108930",
    "end": "111630"
  },
  {
    "text": "The new custom policy checks feature",
    "start": "111630",
    "end": "114360"
  },
  {
    "text": "uses automated reasoning to ensure that",
    "start": "114360",
    "end": "116826"
  },
  {
    "text": "access policies written\nin the IAM policy language",
    "start": "116826",
    "end": "121597"
  },
  {
    "text": "don't grant unintentional access",
    "start": "121597",
    "end": "124380"
  },
  {
    "text": "and meet your security requirements.",
    "start": "124380",
    "end": "126990"
  },
  {
    "text": "You can run custom policy checks",
    "start": "126990",
    "end": "129360"
  },
  {
    "text": "on identity and resource based policies.",
    "start": "129360",
    "end": "133590"
  },
  {
    "text": "The CheckNoNewAccess API\nchecks if new access is allowed",
    "start": "133590",
    "end": "138480"
  },
  {
    "text": "for an updated policy when\ncompared to a reference policy,",
    "start": "138480",
    "end": "143040"
  },
  {
    "text": "and returns a pass or fail response.",
    "start": "143040",
    "end": "146549"
  },
  {
    "text": "When policies pass the checks,",
    "start": "146550",
    "end": "148530"
  },
  {
    "text": "you can make policy\nupdates with confidence.",
    "start": "148530",
    "end": "151200"
  },
  {
    "text": "If policies fail,",
    "start": "151200",
    "end": "152819"
  },
  {
    "text": "IAM Access Analyzer provides\nadditional information",
    "start": "152820",
    "end": "156630"
  },
  {
    "text": "so that developers can debug\nand fix the access policy.",
    "start": "156630",
    "end": "160560"
  },
  {
    "text": "You can run this check\nwhen you edit a policy",
    "start": "160560",
    "end": "163500"
  },
  {
    "text": "using the AWS Command Line Interface,",
    "start": "163500",
    "end": "166560"
  },
  {
    "text": "IAM Access Analyzer API,",
    "start": "166560",
    "end": "169020"
  },
  {
    "text": "or JSON Policy Editor in the IAM console.",
    "start": "169020",
    "end": "173160"
  },
  {
    "text": "So what is a reference policy?",
    "start": "173160",
    "end": "175560"
  },
  {
    "text": "Developers often start with\nmore permissive policies",
    "start": "175560",
    "end": "179280"
  },
  {
    "text": "and refine them over time\ntowards least privileged.",
    "start": "179280",
    "end": "182910"
  },
  {
    "text": "With CheckNoNewAccess,",
    "start": "182910",
    "end": "185130"
  },
  {
    "text": "you can now compare two\nversions of a policy",
    "start": "185130",
    "end": "188100"
  },
  {
    "text": "to confirm that the new version",
    "start": "188100",
    "end": "189870"
  },
  {
    "text": "is not more permissive\nthan the old version.",
    "start": "189870",
    "end": "192690"
  },
  {
    "text": "So here a reference policy",
    "start": "192690",
    "end": "195390"
  },
  {
    "text": "is the previous version of the policy.",
    "start": "195390",
    "end": "197643"
  },
  {
    "text": "Alternately, security teams\nor application architects",
    "start": "198540",
    "end": "202722"
  },
  {
    "text": "may define soft security\npermission boundaries",
    "start": "202722",
    "end": "206640"
  },
  {
    "text": "for application access.",
    "start": "206640",
    "end": "208620"
  },
  {
    "text": "For example, there may\nbe a sensitive resource",
    "start": "208620",
    "end": "211793"
  },
  {
    "text": "that you may want to restrict\naccess to certain principles",
    "start": "211793",
    "end": "216420"
  },
  {
    "text": "and define a reference policy",
    "start": "216420",
    "end": "218670"
  },
  {
    "text": "that restricts access\nto sensitive resources.",
    "start": "218670",
    "end": "222273"
  },
  {
    "text": "Please note that reference policies",
    "start": "222273",
    "end": "225599"
  },
  {
    "text": "are intended to be used\nin policy checks only",
    "start": "225600",
    "end": "229170"
  },
  {
    "text": "and should not be used for access control.",
    "start": "229170",
    "end": "232140"
  },
  {
    "text": "Let's see this in action.",
    "start": "232140",
    "end": "233523"
  },
  {
    "text": "Let's look at the first scenario.",
    "start": "235230",
    "end": "237060"
  },
  {
    "text": "The developer has an existing policy",
    "start": "237060",
    "end": "240420"
  },
  {
    "text": "where s3PutObject action is allowed",
    "start": "240420",
    "end": "244127"
  },
  {
    "text": "on my-sensitive-bucket objects.",
    "start": "244127",
    "end": "247680"
  },
  {
    "text": "The developer made\nadjustments to the policy",
    "start": "247680",
    "end": "251069"
  },
  {
    "text": "where a list of actions,\nincluding s3:PutObject",
    "start": "251070",
    "end": "255510"
  },
  {
    "text": "and s3:GetObjects are allowed",
    "start": "255510",
    "end": "258299"
  },
  {
    "text": "on my-sensitive-bucket resource.",
    "start": "258300",
    "end": "261299"
  },
  {
    "text": "Let's perform the custom policy check",
    "start": "261300",
    "end": "264030"
  },
  {
    "text": "by passing the initial policy",
    "start": "264030",
    "end": "266430"
  },
  {
    "text": "as the existing policy document",
    "start": "266430",
    "end": "268919"
  },
  {
    "text": "and the updated policy as\nthe new policy document",
    "start": "268920",
    "end": "272329"
  },
  {
    "text": "to the CheckNoNewAccess API,",
    "start": "272329",
    "end": "275520"
  },
  {
    "text": "along with the policy\ntype as identity policy.",
    "start": "275520",
    "end": "279473"
  },
  {
    "text": "Since the updated policy\nhad an additional action,",
    "start": "279473",
    "end": "283530"
  },
  {
    "text": "custom policy check fails.",
    "start": "283530",
    "end": "285570"
  },
  {
    "text": "The response includes the statement ID",
    "start": "285570",
    "end": "289500"
  },
  {
    "text": "of the policy statement that\ncaused the check to fail.",
    "start": "289500",
    "end": "292650"
  },
  {
    "text": "It also returns a statement index",
    "start": "292650",
    "end": "294990"
  },
  {
    "text": "to help identify the reason\nfor the check failure.",
    "start": "294990",
    "end": "297843"
  },
  {
    "text": "Let's move to the second scenario.",
    "start": "300420",
    "end": "302580"
  },
  {
    "text": "I have an S3 bucket",
    "start": "302580",
    "end": "303930"
  },
  {
    "text": "that holds sensitive data\ncalled my-sensitive-bucket.",
    "start": "303930",
    "end": "307919"
  },
  {
    "text": "Since permissions to S3\nresources may be granted",
    "start": "307920",
    "end": "310980"
  },
  {
    "text": "via identity and resource policies,",
    "start": "310980",
    "end": "314460"
  },
  {
    "text": "security teams may want",
    "start": "314460",
    "end": "315780"
  },
  {
    "text": "to review changes to\nboth these policy types.",
    "start": "315780",
    "end": "318960"
  },
  {
    "text": "The first reference policy,",
    "start": "318960",
    "end": "320406"
  },
  {
    "text": "an identity based policy\nis built to restrict a list",
    "start": "320407",
    "end": "324450"
  },
  {
    "text": "of actions on objects in my S3 bucket",
    "start": "324450",
    "end": "328816"
  },
  {
    "text": "with an allow all for all\nactions and resources.",
    "start": "328816",
    "end": "333816"
  },
  {
    "text": "A reference policy helps ensure",
    "start": "334980",
    "end": "336900"
  },
  {
    "text": "that a particular combination\nof actions, resources,",
    "start": "336900",
    "end": "340500"
  },
  {
    "text": "and conditions is not\nallowed in a environment.",
    "start": "340500",
    "end": "344073"
  },
  {
    "text": "I have created two\nseparate identity policies",
    "start": "345131",
    "end": "348480"
  },
  {
    "text": "for demonstration.",
    "start": "348480",
    "end": "349950"
  },
  {
    "text": "The first policy has two statements.",
    "start": "349950",
    "end": "352560"
  },
  {
    "text": "The first giving wide access\nto a set of S3 actions",
    "start": "352560",
    "end": "357240"
  },
  {
    "text": "to all resources.",
    "start": "357240",
    "end": "359250"
  },
  {
    "text": "The second giving PutObject access",
    "start": "359250",
    "end": "362670"
  },
  {
    "text": "to the objects in my-sensitive-bucket.",
    "start": "362670",
    "end": "365670"
  },
  {
    "text": "Let's perform the custom policy\ncheck by passing this policy",
    "start": "365670",
    "end": "369510"
  },
  {
    "text": "to the new policy document parameter",
    "start": "369510",
    "end": "371970"
  },
  {
    "text": "of the check-no-new-access API",
    "start": "371970",
    "end": "374520"
  },
  {
    "text": "against the reference policy we created.",
    "start": "374520",
    "end": "377160"
  },
  {
    "text": "As two statements in our policy,",
    "start": "377160",
    "end": "379230"
  },
  {
    "text": "granted access to my sensitive resources,",
    "start": "379230",
    "end": "382410"
  },
  {
    "text": "the policy check failed.",
    "start": "382410",
    "end": "384270"
  },
  {
    "text": "When there are multiple statements",
    "start": "384270",
    "end": "385830"
  },
  {
    "text": "that cause a check to fail,",
    "start": "385830",
    "end": "387419"
  },
  {
    "text": "the check written only one\nstatement ID at a time.",
    "start": "387420",
    "end": "391050"
  },
  {
    "text": "The recommendation is",
    "start": "391050",
    "end": "392280"
  },
  {
    "text": "that you fix the statement\nhighlighted in the reason",
    "start": "392280",
    "end": "395010"
  },
  {
    "text": "and rerun the check until it passes.",
    "start": "395010",
    "end": "397443"
  },
  {
    "text": "Let's look at another policy.",
    "start": "398700",
    "end": "400470"
  },
  {
    "text": "This policy allows get, put",
    "start": "400470",
    "end": "402780"
  },
  {
    "text": "and delete object actions on\nnonsensitive bucket objects.",
    "start": "402780",
    "end": "407455"
  },
  {
    "text": "Let's perform the policy check",
    "start": "407455",
    "end": "409319"
  },
  {
    "text": "for this policy against\nour reference policy.",
    "start": "409320",
    "end": "412890"
  },
  {
    "text": "As expected, the check passes",
    "start": "412890",
    "end": "415470"
  },
  {
    "text": "as this policy did not grant access",
    "start": "415470",
    "end": "417785"
  },
  {
    "text": "to my-sensitive-bucket resources.",
    "start": "417785",
    "end": "421274"
  },
  {
    "text": "Now let's switch gears",
    "start": "421274",
    "end": "423539"
  },
  {
    "text": "and see how resource-based\npolicies can be checked",
    "start": "423540",
    "end": "426690"
  },
  {
    "text": "for unintentional access\nto our sensitive resources.",
    "start": "426690",
    "end": "430920"
  },
  {
    "text": "We have a reference\npolicy that allows access",
    "start": "430920",
    "end": "434730"
  },
  {
    "text": "to this resource to a\nspecific set of principles.",
    "start": "434730",
    "end": "438240"
  },
  {
    "text": "In this case, to my privileged roles.",
    "start": "438240",
    "end": "441300"
  },
  {
    "text": "In the first statement, we\nspecify the role principles",
    "start": "441300",
    "end": "444780"
  },
  {
    "text": "as a principle in a resource-based policy.",
    "start": "444780",
    "end": "448370"
  },
  {
    "text": "In the second statement, we\ncreate a broad permission policy",
    "start": "448370",
    "end": "453370"
  },
  {
    "text": "that uses the AWS\nprinciple ARN condition key",
    "start": "453450",
    "end": "457950"
  },
  {
    "text": "to narrow access to my privileged roles.",
    "start": "457950",
    "end": "461310"
  },
  {
    "text": "For demonstration, I created\na resource-based policy",
    "start": "461310",
    "end": "465210"
  },
  {
    "text": "that allows GIT object\naction on my-sensitive-bucket",
    "start": "465210",
    "end": "469802"
  },
  {
    "text": "to all AWS principles.",
    "start": "469803",
    "end": "473280"
  },
  {
    "text": "Let's run the policy check\nfor the bucket policy",
    "start": "473280",
    "end": "477330"
  },
  {
    "text": "for non-privileged rules\nagainst the reference policy",
    "start": "477330",
    "end": "481620"
  },
  {
    "text": "with the policy type of resource policy.",
    "start": "481620",
    "end": "484889"
  },
  {
    "text": "And as expected, since\nmy policy granted access",
    "start": "484890",
    "end": "488499"
  },
  {
    "text": "to principles other than\nprivileged roles, the check failed.",
    "start": "488499",
    "end": "493353"
  },
  {
    "text": "Let's look at the second API\nfor custom policy checks.",
    "start": "494400",
    "end": "498272"
  },
  {
    "text": "CheckAccessNotGranted.",
    "start": "498273",
    "end": "500820"
  },
  {
    "text": "Using this API, you can check to ensure",
    "start": "500820",
    "end": "503760"
  },
  {
    "text": "that specific IAM actions are\nnot allowed by your policy.",
    "start": "503760",
    "end": "508760"
  },
  {
    "text": "For example, you want to ensure",
    "start": "508860",
    "end": "510990"
  },
  {
    "text": "that developers are not\ngranting permissions",
    "start": "510990",
    "end": "514229"
  },
  {
    "text": "to delete a sensitive bucket\nor drop database resources.",
    "start": "514230",
    "end": "518370"
  },
  {
    "text": "You can run this check when you create",
    "start": "518370",
    "end": "520529"
  },
  {
    "text": "or edit a policy using the AWS CLI or API.",
    "start": "520530",
    "end": "525530"
  },
  {
    "text": "Let's look at this API in action.",
    "start": "525930",
    "end": "528183"
  },
  {
    "text": "Here's one of the identity policies",
    "start": "529454",
    "end": "532079"
  },
  {
    "text": "that we created earlier\nwith two statements.",
    "start": "532080",
    "end": "535350"
  },
  {
    "text": "The first one, allowing all\nS3 actions on all resources.",
    "start": "535350",
    "end": "540120"
  },
  {
    "text": "And the second statement,\nallowing PutObject action",
    "start": "540120",
    "end": "543785"
  },
  {
    "text": "on my-sensitive-bucket objects.",
    "start": "543785",
    "end": "546810"
  },
  {
    "text": "Now let's run the\ncheck-access-not-granted check",
    "start": "546810",
    "end": "550860"
  },
  {
    "text": "on this policy with deleteBucket\nas my restricted action",
    "start": "550860",
    "end": "555860"
  },
  {
    "text": "and policy-type as identity policy.",
    "start": "556740",
    "end": "559773"
  },
  {
    "text": "Here, the policy check failed",
    "start": "560610",
    "end": "563595"
  },
  {
    "text": "because allow all S3 bucket actions",
    "start": "563595",
    "end": "567629"
  },
  {
    "text": "allowed the deleteBucket action,",
    "start": "567630",
    "end": "571200"
  },
  {
    "text": "which was the restricted action.",
    "start": "571200",
    "end": "572913"
  },
  {
    "text": "To recap, in addition to validate policy,",
    "start": "574350",
    "end": "577589"
  },
  {
    "text": "Access Analyzer now\nsupports automated reasoning",
    "start": "577590",
    "end": "581358"
  },
  {
    "text": "powered custom policy\nchecks with two new sets",
    "start": "581358",
    "end": "585600"
  },
  {
    "text": "of API, CheckNoNewAccess\nand CheckAccessNotGranted.",
    "start": "585600",
    "end": "589623"
  },
  {
    "text": "Security teams can run custom\npolicy checks for accurate",
    "start": "591510",
    "end": "595440"
  },
  {
    "text": "and efficient analysis\nof modified policies.",
    "start": "595440",
    "end": "599160"
  },
  {
    "text": "Policy checks can be\nembedded in CICD pipelines so",
    "start": "599160",
    "end": "603060"
  },
  {
    "text": "that checks can be run against\npolicies without having",
    "start": "603060",
    "end": "606240"
  },
  {
    "text": "to deploy the policies.",
    "start": "606240",
    "end": "607950"
  },
  {
    "text": "In addition, developers\ncan run custom policies",
    "start": "607950",
    "end": "610980"
  },
  {
    "text": "from their local development environments",
    "start": "610980",
    "end": "613260"
  },
  {
    "text": "and get fast feedback.",
    "start": "613260",
    "end": "614940"
  },
  {
    "text": "You can find examples\nfor reference policies",
    "start": "614940",
    "end": "618210"
  },
  {
    "text": "and learn how to set up and\nrun a custom policy check",
    "start": "618210",
    "end": "621510"
  },
  {
    "text": "for new access in the Access Analyzer",
    "start": "621510",
    "end": "624630"
  },
  {
    "text": "custom policy check samples repository.",
    "start": "624630",
    "end": "628320"
  },
  {
    "text": "You can find the link in the description.",
    "start": "628320",
    "end": "631170"
  },
  {
    "text": "Thank you.",
    "start": "631170",
    "end": "632003"
  }
]