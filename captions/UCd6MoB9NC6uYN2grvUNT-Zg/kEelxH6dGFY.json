[
  {
    "text": "yes my name is Andres ha jockeys I'm a Solutions Architect based out of London",
    "start": "30",
    "end": "6080"
  },
  {
    "text": "but as you can probably tell from my accent I'm not originally from the UK before joining Amazon I was in Athens",
    "start": "6080",
    "end": "12929"
  },
  {
    "text": "where I was the co-founder of a Greek startup together with us today we also",
    "start": "12929",
    "end": "18180"
  },
  {
    "text": "have Chris Pitchford from news UK and news UK is running WordPress at scale so",
    "start": "18180",
    "end": "24689"
  },
  {
    "text": "I'm sure there are some very valuable learnings that Chris is going to share with us today who is running WordPress",
    "start": "24689",
    "end": "32610"
  },
  {
    "text": "today can you serve your hands okay quite a few people well if you aren't maybe you're here because you want to",
    "start": "32610",
    "end": "38309"
  },
  {
    "text": "learn what's the fastest way to get started but essentially as your website is growing you're probably interested to",
    "start": "38309",
    "end": "45149"
  },
  {
    "text": "save on costs spend less money for infrastructure so how do we make our",
    "start": "45149",
    "end": "50390"
  },
  {
    "text": "WordPress installation as efficient as possible and also give our end users the",
    "start": "50390",
    "end": "55800"
  },
  {
    "text": "best possible experience and of course this is AWS we invent so many people are",
    "start": "55800",
    "end": "62280"
  },
  {
    "text": "interested in scalability but WordPress was only designed originally to run on a",
    "start": "62280",
    "end": "68159"
  },
  {
    "text": "single host so what kind of architectures do we need to put in place we want to highlight some pitfalls some",
    "start": "68159",
    "end": "76770"
  },
  {
    "text": "common mistakes and also give you very specific configuration details so that",
    "start": "76770",
    "end": "81810"
  },
  {
    "text": "you can go back and implement those architecture straight away without the trial and error later on Chris is going",
    "start": "81810",
    "end": "87750"
  },
  {
    "text": "to give us a good idea of what is required to empower a whole organization with rapid deployment tools for",
    "start": "87750",
    "end": "95159"
  },
  {
    "text": "WordPress to be able to launch new websites very quickly we have from",
    "start": "95159",
    "end": "101490"
  },
  {
    "text": "microsites to very complex large websites and before we go any further",
    "start": "101490",
    "end": "109079"
  },
  {
    "text": "let's make sure everyone is familiar with the basic structure of WordPress we're going to refer to that during this",
    "start": "109079",
    "end": "115020"
  },
  {
    "text": "talk so it's important so let's start with the WP config file this is where",
    "start": "115020",
    "end": "120119"
  },
  {
    "text": "WordPress stores all the basic configuration things like the database endpoint and their credentials then the",
    "start": "120119",
    "end": "127350"
  },
  {
    "text": "admin folder holds the application code for the administrative portion of the",
    "start": "127350",
    "end": "132480"
  },
  {
    "text": "website this is what allows your editors to add new content and we have the wp-content",
    "start": "132480",
    "end": "139110"
  },
  {
    "text": "folder this is for everything that is not part of the WordPress distribution",
    "start": "139110",
    "end": "144690"
  },
  {
    "text": "but is user defined so for example we have the plugins there there's a",
    "start": "144690",
    "end": "151920"
  },
  {
    "text": "plethora of plugins out there it would allow you to extend WordPress all of a sudden you don't just have a website but",
    "start": "151920",
    "end": "158160"
  },
  {
    "text": "you can have an e-commerce platform or a collaboration tool for your organization and then we have the themes in this",
    "start": "158160",
    "end": "166709"
  },
  {
    "text": "folder we are storing sets of template files that give us full control over the",
    "start": "166709",
    "end": "172110"
  },
  {
    "text": "user interface we can customize it completely and then we have the uploads",
    "start": "172110",
    "end": "177750"
  },
  {
    "text": "folder for all the media files for example images that the contributors of",
    "start": "177750",
    "end": "182970"
  },
  {
    "text": "the website uploads to associated with specific posts this is stored by default",
    "start": "182970",
    "end": "188340"
  },
  {
    "text": "on the local file system we're going to see later on how this is a problem and a challenge when we want to do auto scaling and finally we have the includes",
    "start": "188340",
    "end": "196470"
  },
  {
    "text": "folder this is where WordPress stores the core libraries the the core assets",
    "start": "196470",
    "end": "202110"
  },
  {
    "text": "that come with a wordpress distribution so how do we get started",
    "start": "202110",
    "end": "208110"
  },
  {
    "text": "and just to give some context let me give you a fictional story let's imagine",
    "start": "208110",
    "end": "213840"
  },
  {
    "text": "that a friend of mine of mine back in London a few years ago up in the Greek restaurant and today he has a chain of",
    "start": "213840",
    "end": "221940"
  },
  {
    "text": "restaurants and an e-commerce platform and it's all based his online presence it's all always based on WordPress but",
    "start": "221940",
    "end": "229590"
  },
  {
    "text": "initially he just needed a single server and he asked my help I was a bit lazy so",
    "start": "229590",
    "end": "236690"
  },
  {
    "text": "instead of installing everything on my own I visited the AWS marketplace and I",
    "start": "236690",
    "end": "243600"
  },
  {
    "text": "saw that there are numerous offerings from third parties those offerings are in the form of a a Mis Amazon machine",
    "start": "243600",
    "end": "250049"
  },
  {
    "text": "images and I picked one of those and I",
    "start": "250049",
    "end": "255120"
  },
  {
    "text": "launched an ec2 instance just in a few minutes and this came pre-installed with a patsy my sequel WordPress it was ready",
    "start": "255120",
    "end": "262169"
  },
  {
    "text": "to go the only thing that I had to do was to attach an elastic address to that and then I used route 53",
    "start": "262169",
    "end": "269970"
  },
  {
    "text": "to register the domain name and point it to my server the initial decision I had",
    "start": "269970",
    "end": "278639"
  },
  {
    "text": "to take was what kind of instance types should I use and in this particular case initially such a low traffic website I",
    "start": "278639",
    "end": "286020"
  },
  {
    "text": "went for the t2 instance t2 instances are very cost efficient for such a",
    "start": "286020",
    "end": "291210"
  },
  {
    "text": "workload if you're doing anything a bit more substantial and m3 instance it's",
    "start": "291210",
    "end": "297270"
  },
  {
    "text": "probably more suitable for that stable workload it has more capacity and your",
    "start": "297270",
    "end": "302430"
  },
  {
    "text": "case might be different depending on the complexity of the plugins that you have installed for WordPress the size of your",
    "start": "302430",
    "end": "308340"
  },
  {
    "text": "database you might have different requirements and one day my friend",
    "start": "308340",
    "end": "313950"
  },
  {
    "text": "called me his website was not functioning turns out that the ec2 instance due to hardware failure was",
    "start": "313950",
    "end": "320130"
  },
  {
    "text": "terminated luckily I had set up backups automated backups so I was able to",
    "start": "320130",
    "end": "326070"
  },
  {
    "text": "restore the website very quickly and here you can see my checklist in order to be able to recover a wordpress",
    "start": "326070",
    "end": "332700"
  },
  {
    "text": "website of course you need a way to restore the operating system all the packages WordPress and the configuration",
    "start": "332700",
    "end": "339479"
  },
  {
    "text": "that is all part of the ami that I used but then we have more dynamic content we",
    "start": "339479",
    "end": "345810"
  },
  {
    "text": "need a recent backup of the database and the wp-content folder remember this is",
    "start": "345810",
    "end": "351030"
  },
  {
    "text": "where we store all the themes the plugins and the user uploads you can use",
    "start": "351030",
    "end": "357720"
  },
  {
    "text": "a wordpress plugin for that there are plugins that will create a zip file and store it on s3 but I wanted a slightly",
    "start": "357720",
    "end": "365970"
  },
  {
    "text": "more efficient way so what I did was that I added an EBS volume and I created",
    "start": "365970",
    "end": "372930"
  },
  {
    "text": "symbolic links for everything that is dynamic everything that changes after I launched my ami things like the my",
    "start": "372930",
    "end": "380370"
  },
  {
    "text": "sequel folder and the wp-content folder perhaps even the config file if you plan",
    "start": "380370",
    "end": "386190"
  },
  {
    "text": "to change this often now in the scenario of failure of my ec2 instance I can",
    "start": "386190",
    "end": "392760"
  },
  {
    "text": "simply launch a replacement node from the same ami and I can reattach the EBS",
    "start": "392760",
    "end": "398789"
  },
  {
    "text": "volume and the elastic IP address and the website works again I can either even",
    "start": "398789",
    "end": "404830"
  },
  {
    "text": "fully automate this process with some help from auto-scaling and a simple script that is",
    "start": "404830",
    "end": "411370"
  },
  {
    "text": "not the only failure case scenario VBS volume itself can fail or we can always",
    "start": "411370",
    "end": "418120"
  },
  {
    "text": "have the human error for example my friend login into the admin panel accidentally deleting some files that's",
    "start": "418120",
    "end": "424900"
  },
  {
    "text": "why we also need to have backups into Westray and this takes the form of EBS",
    "start": "424900",
    "end": "430030"
  },
  {
    "text": "snapshots now EBS snapshots are very cost efficient because there are incremental backups so we only store the",
    "start": "430030",
    "end": "437800"
  },
  {
    "text": "blocks that have changed since the previous backup and the restaurant of my",
    "start": "437800",
    "end": "446590"
  },
  {
    "text": "friend was a great success so very quickly I observed some performance",
    "start": "446590",
    "end": "452260"
  },
  {
    "text": "issues especially on Fridays when many people are looking for a restaurant for the weekend before migrating to a larger",
    "start": "452260",
    "end": "460090"
  },
  {
    "text": "instance which is very easy to perform I wanted to make sure that I was making the most of what I already had so I read",
    "start": "460090",
    "end": "469090"
  },
  {
    "text": "some conflicting advice on the internet on how to optimize Apache and my sequel",
    "start": "469090",
    "end": "474940"
  },
  {
    "text": "I also had some ebooks for my Kindle with subjects to be honest I spent too",
    "start": "474940",
    "end": "480820"
  },
  {
    "text": "much time doing micro optimizations and I'm not an expert on this I'm not even sure I got it right that's why I'm very",
    "start": "480820",
    "end": "487300"
  },
  {
    "text": "keen to come tomorrow to watch the session with that topic how to optimize your web server on AWS it's at 11 o",
    "start": "487300",
    "end": "494530"
  },
  {
    "text": "clock at the same room but in the meantime there are a lot of other things",
    "start": "494530",
    "end": "500170"
  },
  {
    "text": "we can do architectural changes changes that can have a significant impact and",
    "start": "500170",
    "end": "506050"
  },
  {
    "text": "those changes are not supported by WordPress out of the box we will need to use some plug-in there are plenty of",
    "start": "506050",
    "end": "513159"
  },
  {
    "text": "solutions out there I will highlight a specific plugin it's called w3 total",
    "start": "513160",
    "end": "518380"
  },
  {
    "text": "cache it's not the only possible solution and it has some limitations",
    "start": "518380",
    "end": "523810"
  },
  {
    "text": "later on Chris from New York is going to explain why they develop their own plugins but this is a plug-in that we've",
    "start": "523810",
    "end": "531100"
  },
  {
    "text": "seen in you in various production environments at our customers so the first thing I want",
    "start": "531100",
    "end": "538940"
  },
  {
    "text": "to do and we saw as three before in the context of backups but s3 is a lot more",
    "start": "538940",
    "end": "544370"
  },
  {
    "text": "than that we can store all our static assets on a string things like the",
    "start": "544370",
    "end": "549650"
  },
  {
    "text": "JavaScript files the CSS files and the images and we can then serve them",
    "start": "549650",
    "end": "555410"
  },
  {
    "text": "directly from s 3 s 3 will act as highly available and scalable hosting solution",
    "start": "555410",
    "end": "561380"
  },
  {
    "text": "for those static assets by doing so we are reducing the load on our web server",
    "start": "561380",
    "end": "567560"
  },
  {
    "text": "maybe we can save money by using a smaller instance it is also a very",
    "start": "567560",
    "end": "572870"
  },
  {
    "text": "important step to achieve a stateless architecture we're going to see later on",
    "start": "572870",
    "end": "577970"
  },
  {
    "text": "why this is a prerequisite before we can do auto scaling and I want to highlight",
    "start": "577970",
    "end": "585950"
  },
  {
    "text": "a common mistake here you could install something like s3 FS s 3 FS is an open",
    "start": "585950",
    "end": "592400"
  },
  {
    "text": "source tool it is useful in some scenarios but a s 3 FS is trying to",
    "start": "592400",
    "end": "599330"
  },
  {
    "text": "emulate a file system on top of s3 and s3 is a web service so this works over",
    "start": "599330",
    "end": "606290"
  },
  {
    "text": "HTTP so there is some overhead there but the biggest problem is not that the biggest problem is that with this",
    "start": "606290",
    "end": "612560"
  },
  {
    "text": "architecture we are actually not offloading serving of static assets to s3 we are storing them on s3 yes but",
    "start": "612560",
    "end": "619580"
  },
  {
    "text": "it's still the web server that will fetch those and serve them to our end users instead we want to use a wordpress",
    "start": "619580",
    "end": "627800"
  },
  {
    "text": "plugin that will integrate properly into s3 and what do I mean by that I mean",
    "start": "627800",
    "end": "635690"
  },
  {
    "text": "that the plug-in is going to use the API of s3 to store the assets directly there",
    "start": "635690",
    "end": "641510"
  },
  {
    "text": "instead of the local file system and then when we produce the HTML output for",
    "start": "641510",
    "end": "648680"
  },
  {
    "text": "our end users any reference in inside the HTML code on static assets like",
    "start": "648680",
    "end": "656630"
  },
  {
    "text": "images will have this format it will have the prefix of the s3 bucket and",
    "start": "656630",
    "end": "662270"
  },
  {
    "text": "point and then the path and the object name like this my browser's of my end-users",
    "start": "662270",
    "end": "670259"
  },
  {
    "text": "are going to fetch this object directly from a stay which is what I wanted to achieve and w3 total cache that I",
    "start": "670259",
    "end": "676980"
  },
  {
    "text": "mentioned before is such a plug-in that I can do that",
    "start": "676980",
    "end": "681139"
  },
  {
    "text": "next we want to to have as quickly a quick loading for our page as possible",
    "start": "682759",
    "end": "688910"
  },
  {
    "text": "one thing we can do to improve this is to take advantage of the browser's local",
    "start": "688910",
    "end": "694889"
  },
  {
    "text": "cache so a returning visitor who has already downloaded the CSS file should",
    "start": "694889",
    "end": "701879"
  },
  {
    "text": "not have to redownload it every time the the web page is visited and how does the",
    "start": "701879",
    "end": "710069"
  },
  {
    "text": "browser know for how long to cast an object we can dictate that by returning",
    "start": "710069",
    "end": "715350"
  },
  {
    "text": "the right HTTP headers with our responses things like the cache control",
    "start": "715350",
    "end": "720389"
  },
  {
    "text": "header and the expires header we can implement that at the webserver level",
    "start": "720389",
    "end": "726689"
  },
  {
    "text": "either by customizing the big host configuration or by using a HT Access",
    "start": "726689",
    "end": "731970"
  },
  {
    "text": "file a more elegant way is to use a suitable WordPress plug-in and then the",
    "start": "731970",
    "end": "739170"
  },
  {
    "text": "same HTTP headers are useful also in a different context when using Amazon",
    "start": "739170",
    "end": "745439"
  },
  {
    "text": "CloudFront to serve either static or dynamic content it's the same headers that dictate for how long should Amazon",
    "start": "745439",
    "end": "753480"
  },
  {
    "text": "CloudFront cast those objects closer to the end users at the eight locations an",
    "start": "753480",
    "end": "760470"
  },
  {
    "text": "Amazon CloudFront can serve Casa bull but also non castable content and of",
    "start": "760470",
    "end": "766319"
  },
  {
    "text": "course the benefit is larger when we have castable content but for non castable content Amazon CloudFront is",
    "start": "766319",
    "end": "772290"
  },
  {
    "text": "going to perform network level optimizations to deliver the content more quickly to our end users if you",
    "start": "772290",
    "end": "779309"
  },
  {
    "text": "want to understand more about how this works there is a recording on our YouTube channel from last year's session",
    "start": "779309",
    "end": "786660"
  },
  {
    "text": "with the title dynamic content acceleration",
    "start": "786660",
    "end": "791120"
  },
  {
    "text": "but essentially what we are saying is that we want to share the whole website through cloud front and cloud front can",
    "start": "791710",
    "end": "799330"
  },
  {
    "text": "have multiple origins in this case we will have an s3 bucket for the static content and an ec2 instance for the",
    "start": "799330",
    "end": "806230"
  },
  {
    "text": "dynamic content and we're going to configure different rules we call them cloud from behaviour it's",
    "start": "806230",
    "end": "813610"
  },
  {
    "text": "cloud from behavior depends on a specific path pattern and dictates where",
    "start": "813610",
    "end": "819760"
  },
  {
    "text": "to fetch a particular object from and also how to treat things like cookies and hey TTP headers in practice you",
    "start": "819760",
    "end": "829030"
  },
  {
    "text": "might want to have a separate distribution for your static assets and you might want to set up multiple",
    "start": "829030",
    "end": "836200"
  },
  {
    "text": "aliases to the same distribution multiple subdomains that point to the same assets the reason for that is that",
    "start": "836200",
    "end": "843550"
  },
  {
    "text": "most browsers will place a limit on the number of concurrent downloads you can have from a single host name but if we",
    "start": "843550",
    "end": "851650"
  },
  {
    "text": "spread our requests to multiple subdomains we can have a higher",
    "start": "851650",
    "end": "857020"
  },
  {
    "text": "throughput which will result in a better experience for our individuals and this",
    "start": "857020",
    "end": "864490"
  },
  {
    "text": "is an example configuration that you need to set up to serve the whole website through CloudFront this is this",
    "start": "864490",
    "end": "872860"
  },
  {
    "text": "works for WordPress out-of-the-box but depending on the plugins you might have installed you will need to extend this",
    "start": "872860",
    "end": "880170"
  },
  {
    "text": "it will have the access to the slides so I will just highlight some specific more",
    "start": "880170",
    "end": "886090"
  },
  {
    "text": "interesting bits here so here on the on the left you can see the static content",
    "start": "886090",
    "end": "891910"
  },
  {
    "text": "configuration here I'm living more or less the default values but for the",
    "start": "891910",
    "end": "900040"
  },
  {
    "text": "query strings I'm going to forward them through CloudFront now these are static assets why do we need query strings they",
    "start": "900040",
    "end": "906550"
  },
  {
    "text": "don't accept any parameters the reason is that if we imagine that we have a CSS",
    "start": "906550",
    "end": "912160"
  },
  {
    "text": "file and we want to modify this our problem is that this is already cast",
    "start": "912160",
    "end": "917800"
  },
  {
    "text": "both at the browsers and on clouds we can add a version identifier",
    "start": "917800",
    "end": "925910"
  },
  {
    "text": "parameter this has no functionality at all but now both for the browser and for",
    "start": "925910",
    "end": "931520"
  },
  {
    "text": "cloud front it's a new file so this how we introduce a change and solve that",
    "start": "931520",
    "end": "937070"
  },
  {
    "text": "problem when it comes to cookies and headers they don't affect in any way how",
    "start": "937070",
    "end": "943640"
  },
  {
    "text": "s3 is going to serve a particular object so we don't need cookies and headers that's why I have them disabled if I",
    "start": "943640",
    "end": "951110"
  },
  {
    "text": "would enable them and because the headers can have many different values",
    "start": "951110",
    "end": "956470"
  },
  {
    "text": "CloudFront would treat all those as separate versions would cast them separately so the casting efficiency",
    "start": "956470",
    "end": "963020"
  },
  {
    "text": "would be much lower a lot more requests would have to go back to the origin instead of being served directly from",
    "start": "963020",
    "end": "970040"
  },
  {
    "text": "the edge locations of CloudFront and for dynamic content I'm gonna make a",
    "start": "970040",
    "end": "976460"
  },
  {
    "text": "distinction for the login page and the admin folder here I want to enforce the",
    "start": "976460",
    "end": "982430"
  },
  {
    "text": "use of HTTP for security reasons and when it comes to cookies and headers I'm",
    "start": "982430",
    "end": "988610"
  },
  {
    "text": "gonna keep things very simple and whitelist all of the headers and cookies I am NOT very interested here in castle",
    "start": "988610",
    "end": "994970"
  },
  {
    "text": "this is a very dynamic portion of the website and very personalized maybe I",
    "start": "994970",
    "end": "1000310"
  },
  {
    "text": "have some plugins that depend on a header I want to make sure that I have maximum compatibility here but it's a",
    "start": "1000310",
    "end": "1007420"
  },
  {
    "text": "very different story for the front-end anything else at the dynamic here I care",
    "start": "1007420",
    "end": "1013240"
  },
  {
    "text": "a lot about the caching efficiency so I will only whitelist specific cookies",
    "start": "1013240",
    "end": "1018810"
  },
  {
    "text": "only the cookies that vary the output of WordPress any cookies that are used by",
    "start": "1018810",
    "end": "1025569"
  },
  {
    "text": "third-party solutions for example if I'm using a cookie for my analytics I don't",
    "start": "1025570",
    "end": "1031120"
  },
  {
    "text": "want to send that back to the origin through cloud front and when it comes to",
    "start": "1031120",
    "end": "1036730"
  },
  {
    "text": "headers again the same principle I will only allow specific headers that I'm interested in and here you can see in my",
    "start": "1036730",
    "end": "1043480"
  },
  {
    "text": "example I have white listed for headers the cloud front protocol header and the",
    "start": "1043480",
    "end": "1051550"
  },
  {
    "text": "device detection headers let's see why we need those and how we can use those so we are serving portions",
    "start": "1051550",
    "end": "1059480"
  },
  {
    "text": "of our website potentially both via HTTP or HTTPS so some pages are loaded we",
    "start": "1059480",
    "end": "1066980"
  },
  {
    "text": "have different protocols we want to cast those as different versions because when",
    "start": "1066980",
    "end": "1073070"
  },
  {
    "text": "I load the page through HTTP I cannot mix the protocols so also my HTML code",
    "start": "1073070",
    "end": "1080060"
  },
  {
    "text": "will be different will load any JavaScript files also through HTTP that's why I want to cast those",
    "start": "1080060",
    "end": "1085640"
  },
  {
    "text": "separately even if it's the same page and then we are terminating the HTTPS",
    "start": "1085640",
    "end": "1091970"
  },
  {
    "text": "tunnel at the edge location instead of our web server this has significant",
    "start": "1091970",
    "end": "1098990"
  },
  {
    "text": "benefits especially if I have many users connecting through HTTPS I'm terminating all those tunnels at CloudFront of",
    "start": "1098990",
    "end": "1106730"
  },
  {
    "text": "course I can still have a second tunnel between CloudFront and my origin to have",
    "start": "1106730",
    "end": "1112430"
  },
  {
    "text": "end-to-end encryption but this is a very efficient way of doing that because we",
    "start": "1112430",
    "end": "1118100"
  },
  {
    "text": "serve SSL traffic through cloud front we need to upload our own custom SSL",
    "start": "1118100",
    "end": "1124190"
  },
  {
    "text": "certificates and we have two options for that with cloud front one is to take advantage of the sni protocol and the",
    "start": "1124190",
    "end": "1132080"
  },
  {
    "text": "other is to use the dedicated IP option both are equal in terms of security but",
    "start": "1132080",
    "end": "1139130"
  },
  {
    "text": "sni comes without any extra cost the drawback is that it's not compatible",
    "start": "1139130",
    "end": "1145430"
  },
  {
    "text": "with older browsers of course if the only users that visit your website",
    "start": "1145430",
    "end": "1151280"
  },
  {
    "text": "through HTTPS are your administrators the administrators of the website I'm sure you can tell them to use modern",
    "start": "1151280",
    "end": "1156980"
  },
  {
    "text": "browsers so you don't have any problem here otherwise if you have many users",
    "start": "1156980",
    "end": "1162200"
  },
  {
    "text": "with as yourself perhaps you have an e-commerce plug-in and you have any commerce solution then you do care about",
    "start": "1162200",
    "end": "1168950"
  },
  {
    "text": "having compatibility with all the browsers and then the other three",
    "start": "1168950",
    "end": "1176090"
  },
  {
    "text": "headers yeah there's the the device detection",
    "start": "1176090",
    "end": "1182029"
  },
  {
    "text": "headers are useful in a different scenario I want to tailor the experience for",
    "start": "1182029",
    "end": "1187970"
  },
  {
    "text": "people that come through different devices mobile devices tablets and I can",
    "start": "1187970",
    "end": "1192980"
  },
  {
    "text": "of course use client-side logic for example I can use css3 media queries to",
    "start": "1192980",
    "end": "1199190"
  },
  {
    "text": "make the output my graphical user interface more readable in smaller screens in mobile phones but there will",
    "start": "1199190",
    "end": "1207169"
  },
  {
    "text": "be scenarios where I want to use server-side logic to modify also the HTML code here going back to our story",
    "start": "1207169",
    "end": "1215600"
  },
  {
    "text": "with that restaurant you can see how my friend has the tendency to upload very large images and those would give a very",
    "start": "1215600",
    "end": "1223100"
  },
  {
    "text": "poor experience to the mobile device users I want to customize the output to",
    "start": "1223100",
    "end": "1229250"
  },
  {
    "text": "serve a different file depending on the device so here's how I built that I",
    "start": "1229250",
    "end": "1237190"
  },
  {
    "text": "customized the template of WordPress to",
    "start": "1237580",
    "end": "1243080"
  },
  {
    "text": "introduce some conditional logic that will modify the HTML output depending on",
    "start": "1243080",
    "end": "1249049"
  },
  {
    "text": "the cloud from device type headers these are three device type headers one for",
    "start": "1249049",
    "end": "1254840"
  },
  {
    "text": "desktop one for tablet one for mobile and they take a true or false value so",
    "start": "1254840",
    "end": "1261049"
  },
  {
    "text": "based on that I can build my customization and those headers will",
    "start": "1261049",
    "end": "1266419"
  },
  {
    "text": "take their value depending on the user agent header of the browser you could of",
    "start": "1266419",
    "end": "1274070"
  },
  {
    "text": "course use the user agent header directly the problem is that the user agent header has many different",
    "start": "1274070",
    "end": "1279620"
  },
  {
    "text": "potential values so this is much more efficient from a caching point of view",
    "start": "1279620",
    "end": "1286000"
  },
  {
    "text": "the next thing I want to do is an infrastructure one I want to move the database off my web server I am",
    "start": "1287139",
    "end": "1293809"
  },
  {
    "text": "separating web and database now those two workloads do not antagonize for the",
    "start": "1293809",
    "end": "1300110"
  },
  {
    "text": "same shared set of shared resources but also I can optimize my selection of",
    "start": "1300110",
    "end": "1306500"
  },
  {
    "text": "instance types maybe I need to have memory optimized stands like an r3 for my database it",
    "start": "1306500",
    "end": "1313919"
  },
  {
    "text": "will benefit from more rum instead the web server may be CPU bound and would",
    "start": "1313919",
    "end": "1320249"
  },
  {
    "text": "benefit from c3 instance of course for the database you probably want to use",
    "start": "1320249",
    "end": "1326129"
  },
  {
    "text": "the relational database service RDS and take advantage of all the efficiency so",
    "start": "1326129",
    "end": "1331289"
  },
  {
    "text": "that you don't have to manage the database engine on a day to day basis just be aware that if you're using the",
    "start": "1331289",
    "end": "1338489"
  },
  {
    "text": "WordPress multi-site this is the functionality that WordPress has to support multiple web sites from a single",
    "start": "1338489",
    "end": "1345839"
  },
  {
    "text": "installation you're adding nine tables every time you're adding a new website",
    "start": "1345839",
    "end": "1350899"
  },
  {
    "text": "if you have hundreds of web sites you will have maybe thousands of tables in",
    "start": "1350899",
    "end": "1356399"
  },
  {
    "text": "your database just be aware that if you're using RDS with magnetic storage you shouldn't have more than a thousand",
    "start": "1356399",
    "end": "1363479"
  },
  {
    "text": "tables and if you're using provisioned I ops you can have up to 10,000 tables the",
    "start": "1363479",
    "end": "1370919"
  },
  {
    "text": "reason is that if you have more than those you can affect negatively the the",
    "start": "1370919",
    "end": "1377159"
  },
  {
    "text": "ability of the RDS database to perform crash recovery in a timely manner in",
    "start": "1377159",
    "end": "1384089"
  },
  {
    "text": "some occasions you could use the SSD back instances storage the gp2 storage",
    "start": "1384089",
    "end": "1389879"
  },
  {
    "text": "depending on the size you might have enough capacity to perform cross a recovery in a fast manner but this is",
    "start": "1389879",
    "end": "1397080"
  },
  {
    "text": "something that you should test depending on the number of tables you have next",
    "start": "1397080",
    "end": "1402839"
  },
  {
    "text": "because WordPress is a read heavy application we can use an in-memory caching solution to store the results of",
    "start": "1402839",
    "end": "1410899"
  },
  {
    "text": "commonly requested queries so if I have database queries that are perhaps expensive and are very frequent I don't",
    "start": "1410899",
    "end": "1418830"
  },
  {
    "text": "need to go back to the database all the time I can store the result in something like memcache D memcache D is an open",
    "start": "1418830",
    "end": "1427440"
  },
  {
    "text": "source caching solution that stores the results in RAM so we can give a better",
    "start": "1427440",
    "end": "1434219"
  },
  {
    "text": "experience to our end users because we respond quicker to database queries and also we are reducing the load on the",
    "start": "1434219",
    "end": "1441119"
  },
  {
    "text": "database you can install mmm Cassidy on your web server or even",
    "start": "1441119",
    "end": "1448920"
  },
  {
    "text": "better you can take advantage of elastic casts which is a service that is fully managed and gives you the ability to",
    "start": "1448920",
    "end": "1454500"
  },
  {
    "text": "launch new clusters very easily WordPress itself does not support mine Cassidy well this is why we need to",
    "start": "1454500",
    "end": "1461220"
  },
  {
    "text": "install plugins like the w3 total cache plugin that i mentioned earlier going",
    "start": "1461220",
    "end": "1471180"
  },
  {
    "text": "back to our story my friend now added an e-commerce plugin and started selling",
    "start": "1471180",
    "end": "1476910"
  },
  {
    "text": "Greek wines to the whole world it was now important that his website would be highly available any disruption",
    "start": "1476910",
    "end": "1484500"
  },
  {
    "text": "would be in potential revenue loss so I adapted his architecture with that",
    "start": "1484500",
    "end": "1490650"
  },
  {
    "text": "objective in mind I introduced a second web server in a different availability",
    "start": "1490650",
    "end": "1496710"
  },
  {
    "text": "zone and I place those behind the elastic load balancing service I used",
    "start": "1496710",
    "end": "1503850"
  },
  {
    "text": "auto scaling not to scale at this point in time but just to make sure that I have a fixed number of healthy instances",
    "start": "1503850",
    "end": "1511620"
  },
  {
    "text": "always running and then I configured elastic load balancing health checks so",
    "start": "1511620",
    "end": "1518160"
  },
  {
    "text": "that any problematic instance is not sent traffic while the problem persists",
    "start": "1518160",
    "end": "1523580"
  },
  {
    "text": "now s3 that I'm using for my static assets and the elastic load balancing service itself are designed to be highly",
    "start": "1523580",
    "end": "1530490"
  },
  {
    "text": "available out of the box usually when",
    "start": "1530490",
    "end": "1535530"
  },
  {
    "text": "you go from one server to multiple servers there are a few questions to ask about your application the first thing",
    "start": "1535530",
    "end": "1542400"
  },
  {
    "text": "is how does this web application handle user sessions where does it store them",
    "start": "1542400",
    "end": "1547530"
  },
  {
    "text": "if it stores them on the local file system you can imagine that server 1 and server 2 now have different information",
    "start": "1547530",
    "end": "1554520"
  },
  {
    "text": "about my users they are not in sync luckily when it comes to WordPress this",
    "start": "1554520",
    "end": "1560550"
  },
  {
    "text": "is not a problem because WordPress is pretty much stateless it relies a lot on cookies to store state information for",
    "start": "1560550",
    "end": "1568770"
  },
  {
    "text": "example it has an authentication cookie that is valid dates against the database if you have installed any plugins that",
    "start": "1568770",
    "end": "1575940"
  },
  {
    "text": "don't follow this model perhaps they are using the native PHP sessions then you might need",
    "start": "1575940",
    "end": "1581220"
  },
  {
    "text": "to think about this problem for example you might want to move that into dynamo DB outside of your web server there is a",
    "start": "1581220",
    "end": "1588570"
  },
  {
    "text": "PHP session handle for dynamodb that you can download and install when it comes",
    "start": "1588570",
    "end": "1594930"
  },
  {
    "text": "to user uploads I have the exact same question where are they stored and by default WordPress stores them on the",
    "start": "1594930",
    "end": "1601680"
  },
  {
    "text": "local file system if I am an administrator and I upload an image it will end up in one of the two servers",
    "start": "1601680",
    "end": "1607770"
  },
  {
    "text": "that's a problem but luckily we have already moved that workload to s3 which is a shared",
    "start": "1607770",
    "end": "1614580"
  },
  {
    "text": "resource for all the web servers so that's not a problem as well the other",
    "start": "1614580",
    "end": "1620730"
  },
  {
    "text": "challenge that I might have is how do I maintain the same version of code and configuration on all my web servers",
    "start": "1620730",
    "end": "1628340"
  },
  {
    "text": "later on I'm going to show a simple approach by using a lasting Beanstalk to solve that problem",
    "start": "1628340",
    "end": "1635090"
  },
  {
    "text": "then for my database I also need high availability there so what I'm gonna do",
    "start": "1636620",
    "end": "1642660"
  },
  {
    "text": "is I'm gonna upgrade my RDS instance to be a multi AG one now RDS is going to",
    "start": "1642660",
    "end": "1649020"
  },
  {
    "text": "maintain synchronously replicated instance in a different availability",
    "start": "1649020",
    "end": "1655440"
  },
  {
    "text": "zone and there will be an automatic failover if there is an issue with a primary node when it comes to elastic",
    "start": "1655440",
    "end": "1663390"
  },
  {
    "text": "cache elastic ass is going to automatically replace individual nodes that might fail it's also a good",
    "start": "1663390",
    "end": "1670800"
  },
  {
    "text": "practice to have multiple cached nodes and spread them to different",
    "start": "1670800",
    "end": "1675930"
  },
  {
    "text": "availability zones and you can do that with the flexible node placement feature of elastic ass",
    "start": "1675930",
    "end": "1684350"
  },
  {
    "text": "now my friend going back to our story with a restaurant learned about online",
    "start": "1687280",
    "end": "1692630"
  },
  {
    "text": "marketing tools and those would drive spikes of traffic to his website so I",
    "start": "1692630",
    "end": "1700190"
  },
  {
    "text": "needed to again optimize the architecture I have done all the hard",
    "start": "1700190",
    "end": "1706520"
  },
  {
    "text": "work already I have a stateless architecture for my web servers so I can use auto scaling so that for example",
    "start": "1706520",
    "end": "1713750"
  },
  {
    "text": "when there is high CPU utilization we will trigger an alarm automatically and",
    "start": "1713750",
    "end": "1720830"
  },
  {
    "text": "that will initiate an auto scaling event that will add for example two more web",
    "start": "1720830",
    "end": "1727790"
  },
  {
    "text": "servers and those will be automatically attached behind the elastic load balancing service the opposite will",
    "start": "1727790",
    "end": "1735559"
  },
  {
    "text": "happen when I have low CPU utilization which is a great way to save cost",
    "start": "1735559",
    "end": "1740660"
  },
  {
    "text": "because I'm will only use the resources that I really need at any given point in time next I might need to scale the",
    "start": "1740660",
    "end": "1751640"
  },
  {
    "text": "database to prepare for those spikes I can of course increase the size of my",
    "start": "1751640",
    "end": "1756890"
  },
  {
    "text": "RDS instance I can upgrade it or I can use more storage or faster storage with",
    "start": "1756890",
    "end": "1764000"
  },
  {
    "text": "provisioned I ops for example but remember that WordPress is a read heavy",
    "start": "1764000",
    "end": "1770540"
  },
  {
    "text": "application so slightly more efficient way to scale my database is to add more",
    "start": "1770540",
    "end": "1776299"
  },
  {
    "text": "nodes read replicas and read replicas",
    "start": "1776299",
    "end": "1781549"
  },
  {
    "text": "are not supported by WordPress out of the box so you will need to install a plug-in there is a plugin called hyper",
    "start": "1781549",
    "end": "1788000"
  },
  {
    "text": "DB the only problem with hyper DB is that there is an incompatibility between",
    "start": "1788000",
    "end": "1794780"
  },
  {
    "text": "hyper DB and the w3 total cache plugin I mentioned before there is a naming class",
    "start": "1794780",
    "end": "1801049"
  },
  {
    "text": "they both rely on a file that is called DB dot PHP but this is something that",
    "start": "1801049",
    "end": "1807020"
  },
  {
    "text": "you can tweak the code a bit to make it work so how it looks I can add one RDS",
    "start": "1807020",
    "end": "1815659"
  },
  {
    "text": "read replica or more to scale my capacity to serve read kind of traffic now what's",
    "start": "1815659",
    "end": "1826720"
  },
  {
    "text": "the easiest way to launch such an architecture I always prefer to use elastic Beanstalk when it fits the",
    "start": "1826720",
    "end": "1832780"
  },
  {
    "text": "framework and in the case of WordPress it pretty much does how but how would",
    "start": "1832780",
    "end": "1838120"
  },
  {
    "text": "the elastic Beanstalk help us well most probably you're going to introduce change your website is not",
    "start": "1838120",
    "end": "1844929"
  },
  {
    "text": "going to be cast in stone you might want to develop your own themes or your own",
    "start": "1844929",
    "end": "1850150"
  },
  {
    "text": "plugins or maybe not you might simply install new plugins once in a while or perform upgrades for WordPress to",
    "start": "1850150",
    "end": "1858520"
  },
  {
    "text": "minimize risk you will need at least two environments one for staging and one the production environment you will perform",
    "start": "1858520",
    "end": "1865360"
  },
  {
    "text": "changes first on the staging environment and then on production elastic Beanstalk makes it very easy for",
    "start": "1865360",
    "end": "1871780"
  },
  {
    "text": "you to launch such environments it hides a lot of the complexity that is required to do that on your own",
    "start": "1871780",
    "end": "1879059"
  },
  {
    "text": "it will also help us manage different versions of the application and decide",
    "start": "1879059",
    "end": "1885250"
  },
  {
    "text": "when we want to push to the staging environment or to production and let me",
    "start": "1885250",
    "end": "1890950"
  },
  {
    "text": "give you an example first of all let me tell you how you would upload the application to elastic",
    "start": "1890950",
    "end": "1896830"
  },
  {
    "text": "Beanstalk you need to create a zip file that includes the application code and",
    "start": "1896830",
    "end": "1902470"
  },
  {
    "text": "also you will need to create a PHP a config file WP config dot PHP and you",
    "start": "1902470",
    "end": "1911080"
  },
  {
    "text": "upload it to elastic Beanstalk an elastic Beanstalk will handle all the details of deploying that into your web",
    "start": "1911080",
    "end": "1916690"
  },
  {
    "text": "servers the best practice here because you want to push exactly the same",
    "start": "1916690",
    "end": "1922570"
  },
  {
    "text": "application version to multiple environments is to make your configuration file environment agnostic",
    "start": "1922570",
    "end": "1929789"
  },
  {
    "text": "this means that you shouldn't hard code details like the database endpoint because this will be different on your",
    "start": "1929789",
    "end": "1936789"
  },
  {
    "text": "staging and your production environment one way to solve this problem is to use",
    "start": "1936789",
    "end": "1942120"
  },
  {
    "text": "environmental variables and in the case of elastic Beanstalk when you use RDS it",
    "start": "1942120",
    "end": "1947950"
  },
  {
    "text": "already pre-populates those variables that you see on the screen and",
    "start": "1947950",
    "end": "1954220"
  },
  {
    "text": "here is an example of how you would introduce change how you would for example install a new plugin so you have",
    "start": "1954220",
    "end": "1962000"
  },
  {
    "text": "a staging environment that has maybe a single instance to save cost and your elastic load balanced infrastructure for",
    "start": "1962000",
    "end": "1970640"
  },
  {
    "text": "your production environment you will install the plugin first on the staging",
    "start": "1970640",
    "end": "1976160"
  },
  {
    "text": "environment typically when you install a new plugin it results in some database",
    "start": "1976160",
    "end": "1981350"
  },
  {
    "text": "changes but also it might create some files on the local file system so that",
    "start": "1981350",
    "end": "1988340"
  },
  {
    "text": "is a problem we need to capture those file system changes so we create a new",
    "start": "1988340",
    "end": "1993620"
  },
  {
    "text": "zip file and you see I color-coded them red and yellow so we have the version",
    "start": "1993620",
    "end": "1999530"
  },
  {
    "text": "two now as a zip file and we can push that to the production environment",
    "start": "1999530",
    "end": "2005940"
  },
  {
    "text": "as a last step we will still need to visit the administrative panel and",
    "start": "2005940",
    "end": "2012900"
  },
  {
    "text": "trigger those database updates so this is a very simple way to handle change",
    "start": "2012900",
    "end": "2019740"
  },
  {
    "text": "and I'm gonna hand over to Chris who's gonna share with you the details of you",
    "start": "2019740",
    "end": "2026470"
  },
  {
    "text": "know how do you do that in a more sophisticated fashion in a large-scale",
    "start": "2026470",
    "end": "2031470"
  },
  {
    "text": "switch it on that side there we go awesome sorry good stuff Oh actually yes I'm Chris",
    "start": "2056040",
    "end": "2063898"
  },
  {
    "text": "pictures from news UK on the lead platform owner for Amazon services inside the digital estate news UK when",
    "start": "2063899",
    "end": "2072450"
  },
  {
    "text": "I'm publishing house republished for national newspapers in the UK The Times in the Sun probably most well-known set",
    "start": "2072450",
    "end": "2080540"
  },
  {
    "text": "in a division we managed the websites there's many websites there's the trifle",
    "start": "2080540",
    "end": "2086669"
  },
  {
    "text": "sites but we also have a number of other corporate sites microsites and and of",
    "start": "2086669",
    "end": "2092100"
  },
  {
    "text": "varying scales and we're looking to use wordpress more and more as we go forward",
    "start": "2092100",
    "end": "2097650"
  },
  {
    "text": "as a flexible content management system so traditionally is UK uses large",
    "start": "2097650",
    "end": "2104820"
  },
  {
    "text": "systems we have a team of developers work on this exclusively to power our title websites teams of about 30 30",
    "start": "2104820",
    "end": "2112320"
  },
  {
    "text": "developers and testers they know the ins and outs of our large system so spent years working with them lots of time",
    "start": "2112320",
    "end": "2118860"
  },
  {
    "text": "invested these systems they're complicated for them it's difficult to",
    "start": "2118860",
    "end": "2124230"
  },
  {
    "text": "introducing these features something as trivial as say a questionnaire doesn't fit well inside our own master CMS",
    "start": "2124230",
    "end": "2130950"
  },
  {
    "text": "systems and it's they try and add them and if something goes wrong it can be",
    "start": "2130950",
    "end": "2136830"
  },
  {
    "text": "catastrophic we have to roll back and it can be weeks through our release process to get certain new code with repaired",
    "start": "2136830",
    "end": "2143400"
  },
  {
    "text": "and bring the feature back online so we're looking at WordPress WordPress",
    "start": "2143400",
    "end": "2148680"
  },
  {
    "text": "developers the web everywhere most of our developers are also do WordPress which is a useful thing and it's it",
    "start": "2148680",
    "end": "2155580"
  },
  {
    "text": "works so well for micro sites anyone can run a wordpress single instance and with",
    "start": "2155580",
    "end": "2160980"
  },
  {
    "text": "great results the fit one side AWS this is a problem I'm a cynical sysadmin so",
    "start": "2160980",
    "end": "2166140"
  },
  {
    "text": "I'd really don't trust it I've fought for years to keep WordPress outside news UK so it's a bit of a turnaround that me",
    "start": "2166140",
    "end": "2171780"
  },
  {
    "text": "are talking about how we've adopted it we want to round on AWS clearly what I",
    "start": "2171780",
    "end": "2179490"
  },
  {
    "text": "would be talking about anything else sing about solutions you know you can stay right away we're not happy when",
    "start": "2179490",
    "end": "2185430"
  },
  {
    "text": "anything that's a single point of failure we've in pass we've done a lot of lift and shift work we've taken systems that have",
    "start": "2185430",
    "end": "2192869"
  },
  {
    "text": "physical boxes we've taken VMware tin and we've moved them into the cloud and this includes systems similar to WordPress it's half a job but it's it's",
    "start": "2192869",
    "end": "2200039"
  },
  {
    "text": "not utilizing the power of of Amazon's web services I like cloud solutions from the ground up horizontal scaling",
    "start": "2200039",
    "end": "2206880"
  },
  {
    "text": "absolute requirement you know did if a product is 10 users today something might go viral and it's a million users",
    "start": "2206880",
    "end": "2212819"
  },
  {
    "text": "tomorrow we need to be able to work and we have to be able to guarantee that we're able to cope with these with these",
    "start": "2212819",
    "end": "2218190"
  },
  {
    "text": "loads unexpected downtime is a bugbear of mine invariably systems if they have",
    "start": "2218190",
    "end": "2225539"
  },
  {
    "text": "single points of failure they fail at 3:00 in the morning or 4:30 on a Friday it's just the way things seem to work",
    "start": "2225539",
    "end": "2231239"
  },
  {
    "text": "for me and there's not much fun so that's what that's what our drive was how can we come and get WordPress up and",
    "start": "2231239",
    "end": "2237450"
  },
  {
    "text": "running utilizing one of these great toys that Amazon give us so plug into",
    "start": "2237450",
    "end": "2243029"
  },
  {
    "text": "the dedica they're the trickiest things we have to deal with on a day to day basis terrible for auto-scaling things",
    "start": "2243029",
    "end": "2249779"
  },
  {
    "text": "change file systems they they update bits of PHP code that they don't own and",
    "start": "2249779",
    "end": "2255450"
  },
  {
    "text": "they change database schemas and they're hard to keep track off as you mentioned those clashes between Nate with naming",
    "start": "2255450",
    "end": "2262380"
  },
  {
    "text": "files will conflict with other ones stored config conflicts it's just sometimes a bit of a pain in the ass so",
    "start": "2262380",
    "end": "2270890"
  },
  {
    "text": "there's the issues we have is we tend to scale a lot we're quite a cyclical site we're very busy doing the day and we're",
    "start": "2270890",
    "end": "2277170"
  },
  {
    "text": "silent during the night but then again we're quite busy when it comes to editorial workflow so maybe at 3:00 in",
    "start": "2277170",
    "end": "2283499"
  },
  {
    "text": "the morning editorial will launch a new feature on a site and they'll turn on a plug-in and that's going to screw things up because in the morning when we scale",
    "start": "2283499",
    "end": "2289739"
  },
  {
    "text": "up the databases referring to a plugin that's no longer available auto-scaling instances it's bad so roll backs as well",
    "start": "2289739",
    "end": "2298410"
  },
  {
    "text": "when something goes wrong how do we recover if a plug-in has upgraded itself as part of a installation and we've gone",
    "start": "2298410",
    "end": "2304559"
  },
  {
    "text": "to a new platform unzipping a stored zip file what happens if we need to go back to an older version will the older",
    "start": "2304559",
    "end": "2309869"
  },
  {
    "text": "version support the updated schema in the database or is it going to throw some 500 errors and we're gonna get problems brought to by users so we",
    "start": "2309869",
    "end": "2317160"
  },
  {
    "text": "thought long and hard about this and we're being willing me neither I still think there's there's",
    "start": "2317160",
    "end": "2322560"
  },
  {
    "text": "rune for us to improve but we pick the plugins very carefully we vet them and we give the users and menu of plugins so",
    "start": "2322560",
    "end": "2330660"
  },
  {
    "text": "we check that these plugins conform to certain best practices we use WordPress in VIP if you know how to WordPress VIP",
    "start": "2330660",
    "end": "2337110"
  },
  {
    "text": "it's a it's a particularly good or possibly expensive platform but they have quite a nice coding standard and",
    "start": "2337110",
    "end": "2342450"
  },
  {
    "text": "this invariably is to allow plugins to work on there and they're sort of cloud offering as well so we use that as the",
    "start": "2342450",
    "end": "2347970"
  },
  {
    "text": "basis for our tests and our and our scrutiny to make sure that plugins",
    "start": "2347970",
    "end": "2353550"
  },
  {
    "text": "behave themselves writing data to the local file system why are you doing that you know that data is going to go in the bin moment we scale down so we have",
    "start": "2353550",
    "end": "2360240"
  },
  {
    "text": "automated testing to pick out these things started off sounds terrible it",
    "start": "2360240",
    "end": "2365310"
  },
  {
    "text": "started off as grep you know can we look for certain functions what are you doing where the F writes and it's a piece inside the PHP code why are you doing",
    "start": "2365310",
    "end": "2371520"
  },
  {
    "text": "that what's it for what's the motivation is it temporary is it going to be cleaned up afterwards is it going to hemorrhage disk space bits and pieces",
    "start": "2371520",
    "end": "2377160"
  },
  {
    "text": "like that these are things that we try and pick out automatically so this this",
    "start": "2377160",
    "end": "2382620"
  },
  {
    "text": "is our our approach to sort looking at plugins common configuration is another",
    "start": "2382620",
    "end": "2388320"
  },
  {
    "text": "serious component we hate hard-coded values hard-coded values that means",
    "start": "2388320",
    "end": "2394110"
  },
  {
    "text": "someone can leave an old value in there if you're rolling back is the rollback values still good for now if we go back",
    "start": "2394110",
    "end": "2400410"
  },
  {
    "text": "to a version that was released last week terrible idea so we try to dynamically set values we calculate values from",
    "start": "2400410",
    "end": "2406980"
  },
  {
    "text": "things like cloud formation and and dynamic information information that's",
    "start": "2406980",
    "end": "2412980"
  },
  {
    "text": "tied to the environment that we're running and iam credentials are fantastic so we've seen as you mentioned",
    "start": "2412980",
    "end": "2418020"
  },
  {
    "text": "some of the plugins that allow you to store assets on s3 they'll ask you for an AWS key why they're asking you for an",
    "start": "2418020",
    "end": "2424230"
  },
  {
    "text": "AWS key surely the role that the ec2 instance is running in contains all the information you need to connect to s3",
    "start": "2424230",
    "end": "2430260"
  },
  {
    "text": "and upload content but also possibly retrieve the content if it needs to do work on it later so we've got our hands",
    "start": "2430260",
    "end": "2438210"
  },
  {
    "text": "dirty in the past we've patched open products and we're working to get these patches pushed back upstream so we've",
    "start": "2438210",
    "end": "2444690"
  },
  {
    "text": "taken some standard AWS plugins and we've forced them to support session",
    "start": "2444690",
    "end": "2450120"
  },
  {
    "text": "tokens and roles so they no longer ask us for credentials they merely know what the credentials are going to be and they",
    "start": "2450120",
    "end": "2455250"
  },
  {
    "text": "rotate as quite in the estate and that's that's a key thing I think from that I think it's safe to say don't be too scared of",
    "start": "2455250",
    "end": "2462160"
  },
  {
    "text": "getting your hands dirty if a plugin doesn't do what you want if it doesn't feel like it's kind of compatible getting there see if you can improve it and release it back to the community so",
    "start": "2462160",
    "end": "2470220"
  },
  {
    "text": "our release process is the scariest part of what we do it scares me we have an",
    "start": "2470220",
    "end": "2475510"
  },
  {
    "text": "enterprise system we use anthill and mainly gets up as well to keep our code",
    "start": "2475510",
    "end": "2480550"
  },
  {
    "text": "and it's a fantastic solution it's push your button and the release has happened we go through various environments or",
    "start": "2480550",
    "end": "2486430"
  },
  {
    "text": "stages we go from UAT testing day of si staging and then our Ponte production",
    "start": "2486430",
    "end": "2491560"
  },
  {
    "text": "and we make heavy use of cloud formation to try and ensure that the environments",
    "start": "2491560",
    "end": "2497050"
  },
  {
    "text": "are the same if we do something on the staging environment when we replay it is it going to be exactly the same on the production environment or will it be",
    "start": "2497050",
    "end": "2502630"
  },
  {
    "text": "different does it matter that the staging environment maybe only has one WordPress server running because it's",
    "start": "2502630",
    "end": "2509230"
  },
  {
    "text": "such low load but in production we have eight because we're under heavy load all the time does that will that make a difference to the release process so we",
    "start": "2509230",
    "end": "2515590"
  },
  {
    "text": "have a lot of testing goes into that we had rolling forwards and rolling back",
    "start": "2515590",
    "end": "2520890"
  },
  {
    "text": "that's quite a quite an important thing each of our websites is wrapped around",
    "start": "2520890",
    "end": "2528250"
  },
  {
    "text": "the deploy of a lump of code it's a pleasure today to hear about code deploy because we've been doing something",
    "start": "2528250",
    "end": "2534460"
  },
  {
    "text": "similar in-house for a long time and one of the things I'll be taking away from from reinvent is that we need to move",
    "start": "2534460",
    "end": "2540430"
  },
  {
    "text": "its code deploy so I'm pleased about that but it's we store all of our code",
    "start": "2540430",
    "end": "2546190"
  },
  {
    "text": "at the moment inside this very similarly to ask it be installed inside files that are retained on on s3 storage this is",
    "start": "2546190",
    "end": "2554110"
  },
  {
    "text": "great for wrong forwards but we for the rollback process we also need to bear in mind backups of databases so unlike our",
    "start": "2554110",
    "end": "2561760"
  },
  {
    "text": "large content management systems that we use to power the titles at the moment where we do have because it's in-house",
    "start": "2561760",
    "end": "2567580"
  },
  {
    "text": "code we have rollback functionality in the code if you if we need to go back to the old version here's the undo process",
    "start": "2567580",
    "end": "2573250"
  },
  {
    "text": "in WordPress we don't we have a recovery process it went wrong let's restore to a point in time that drives us with failed",
    "start": "2573250",
    "end": "2580000"
  },
  {
    "text": "quickly we want to know that the website isn't working as soon as possible after the release but it means that we're also",
    "start": "2580000",
    "end": "2585400"
  },
  {
    "text": "practicing our disaster recovery processes at the same time if we have a release that happens and say there's a scrub",
    "start": "2585400",
    "end": "2591970"
  },
  {
    "text": "with some CSS and some text is overflowing we treat that as a disaster so the disaster recovery process is to",
    "start": "2591970",
    "end": "2598780"
  },
  {
    "text": "build a new system we build it using the database snapshots with the assets and held inside s3 and we get the service up",
    "start": "2598780",
    "end": "2604810"
  },
  {
    "text": "and running as quickly as possible we also use CDN so we're a big use of CDN",
    "start": "2604810",
    "end": "2611410"
  },
  {
    "text": "so the solution we have has to sit neatly with with the variety we use we",
    "start": "2611410",
    "end": "2616540"
  },
  {
    "text": "don't use cloud fronts at the moment we want to use cloud front and I'm hoping we're going to be able to soon but URLs",
    "start": "2616540",
    "end": "2624400"
  },
  {
    "text": "don't always point to live solutions if we want to replicate something the same thing that effects the CDN also affects",
    "start": "2624400",
    "end": "2631360"
  },
  {
    "text": "replication if we take all of our data inside our production environment what's going to happen to the URLs so the",
    "start": "2631360",
    "end": "2637840"
  },
  {
    "text": "developers wants us want to implement a new feature they need live data but they",
    "start": "2637840",
    "end": "2643000"
  },
  {
    "text": "need it in a test environment it doesn't work if all the links still point to WWE my site comm so this is a challenge we",
    "start": "2643000",
    "end": "2649720"
  },
  {
    "text": "have how do we solve this problem and allow us to move the data between environments and keep things up and",
    "start": "2649720",
    "end": "2655000"
  },
  {
    "text": "running in other things around s3 buckets we can't have an s3 bucket per installation that's hugely wasteful we",
    "start": "2655000",
    "end": "2661770"
  },
  {
    "text": "we one of our we have many accounts and we are running out of buckets all the China so it's a waste I'm not keen on it",
    "start": "2661770",
    "end": "2669360"
  },
  {
    "text": "so CloudFormation with it solves a lot",
    "start": "2669360",
    "end": "2676540"
  },
  {
    "text": "of our testing problems it really does it means we can replicate environments we can replicate from s3 storage from a",
    "start": "2676540",
    "end": "2683170"
  },
  {
    "text": "known unknown good version and we can we can use snapshots of databases and",
    "start": "2683170",
    "end": "2688600"
  },
  {
    "text": "support back and point of time for a live content all of our URLs on our site and this sounds very against the grain",
    "start": "2688600",
    "end": "2695050"
  },
  {
    "text": "but they're all slight relative and that negates the problem with the hostname so this as well as allowing us to then move",
    "start": "2695050",
    "end": "2702160"
  },
  {
    "text": "between environments we can bring it back into testing we can bring them back into staging it also allows us to test",
    "start": "2702160",
    "end": "2708040"
  },
  {
    "text": "individual components of our environments so in the case where we're using the CDN the CDN obviously would",
    "start": "2708040",
    "end": "2713770"
  },
  {
    "text": "provide www we can go to the origin which may be an e lb or we can go to an",
    "start": "2713770",
    "end": "2719350"
  },
  {
    "text": "individual box and all of the links and all of the content they all still working exactly the same way it's the same look and feel so we have a",
    "start": "2719350",
    "end": "2725920"
  },
  {
    "text": "problem with a cache layer with a CDN layer with a load balancer layer if there's something wrong with SSL we can",
    "start": "2725920",
    "end": "2732310"
  },
  {
    "text": "track it down and we can keep the site working and gives us a nice clean view it also lets us do some interesting things with backups because if all of",
    "start": "2732310",
    "end": "2739180"
  },
  {
    "text": "the URLs are sight relative we can scrape them and keep them somewhere as a backup and we can scrape them from any",
    "start": "2739180",
    "end": "2744850"
  },
  {
    "text": "point in the stack and retain that information so we built something called",
    "start": "2744850",
    "end": "2750160"
  },
  {
    "text": "the Apache Rooter that helps us use s3 buckets it's the Apache which is an",
    "start": "2750160",
    "end": "2756130"
  },
  {
    "text": "in-house protocol Alsop which we were developing for about 18 months now and this helped us facilitate some of these",
    "start": "2756130",
    "end": "2761890"
  },
  {
    "text": "problems it it kind of sounds like it's been done a million times why we want in",
    "start": "2761890",
    "end": "2768040"
  },
  {
    "text": "trying to do it all over again but there are some nice benefits one of the key",
    "start": "2768040",
    "end": "2774220"
  },
  {
    "text": "things we have is during a release process if we want the whole site to be configured through an API this is comes",
    "start": "2774220",
    "end": "2780040"
  },
  {
    "text": "down to the infrastructure as code sort of idea we want the web routing to to work from a code perspective so you have",
    "start": "2780040",
    "end": "2786940"
  },
  {
    "text": "an API to configure how traffic is going to reach our service and this is particularly important when we have stacked websites so we might have WWV x",
    "start": "2786940",
    "end": "2795250"
  },
  {
    "text": "co uk but w give a little time so qatar UK / red box which exists is a wordpress",
    "start": "2795250",
    "end": "2801700"
  },
  {
    "text": "site so we use the route that directs traffic into our different environments and we use this API to place WordPress",
    "start": "2801700",
    "end": "2809290"
  },
  {
    "text": "in these individual locations and this is good because it means we can actually take a WordPress site and move it to a different folder and we can do this",
    "start": "2809290",
    "end": "2815440"
  },
  {
    "text": "through the API rather than having to mess around inside WordPress it integrates really well with CDNs so we",
    "start": "2815440",
    "end": "2821680"
  },
  {
    "text": "can have further caching capabilities we can flush the site we have a flush name",
    "start": "2821680",
    "end": "2826930"
  },
  {
    "text": "so if somebody says all this page look stale just browse to flush dot The Times that could eat UK and that page will be",
    "start": "2826930",
    "end": "2832990"
  },
  {
    "text": "refreshed not be refreshed inside ElastiCache with with objects I'll be flushed inside say Akamai's or CDN or",
    "start": "2832990",
    "end": "2839980"
  },
  {
    "text": "varnish or whatever cash in there we have it gets propagated through our network and it gets flushed and refreshed as quickly as possible and we",
    "start": "2839980",
    "end": "2845920"
  },
  {
    "text": "can also share us three buckets and this is critical so in a situation where say for example we had 100 gig of assets",
    "start": "2845920",
    "end": "2852130"
  },
  {
    "text": "held inside s3 storage we don't want to move all these assets into a new IT bucket or",
    "start": "2852130",
    "end": "2857540"
  },
  {
    "text": "into a staging bucket so what we have is a tiered approach we know it s3 will scale infinitely so what we will do is",
    "start": "2857540",
    "end": "2864410"
  },
  {
    "text": "our uit environment will try and collect an object from a UAE bucket and if it's not there it will go to the production",
    "start": "2864410",
    "end": "2869780"
  },
  {
    "text": "bucket so UAT can play with live content in a read-only view but any new content",
    "start": "2869780",
    "end": "2875599"
  },
  {
    "text": "always goes into the UAE bucket so it's isolated and we can Trash the UAE bucket and they can start again so they can",
    "start": "2875599",
    "end": "2882170"
  },
  {
    "text": "replay from a known point in time from a database backup and prevent from the production s3 content and they can mix",
    "start": "2882170",
    "end": "2887750"
  },
  {
    "text": "mix and match as they go along so that's quite useful feature there's other other",
    "start": "2887750",
    "end": "2893000"
  },
  {
    "text": "fringe benefits as one this goes against what what was said earlier on and that is we do serve s3 objects through Apache",
    "start": "2893000",
    "end": "2898700"
  },
  {
    "text": "but we do that because we're paranoid and because we use a paywall solution so",
    "start": "2898700",
    "end": "2905030"
  },
  {
    "text": "our publications are behind subscription when this means we don't want assets to be available readily directly from s3 so",
    "start": "2905030",
    "end": "2912800"
  },
  {
    "text": "we have two ways of doing this we proxy it through our web servers but we also sign URLs so the URL to the links to the",
    "start": "2912800",
    "end": "2921650"
  },
  {
    "text": "s3 assets are signed so that they're only valid for a specific length of time when you has three so that's a facility",
    "start": "2921650",
    "end": "2927920"
  },
  {
    "text": "that s3 offers and we utilize that as well other things it does in integrates with Tomcat other PHP and rails applications",
    "start": "2927920",
    "end": "2934670"
  },
  {
    "text": "so it's it's kind of a generic at all but the last thing that's absolutely fantastic is the ability to to scrape",
    "start": "2934670",
    "end": "2941359"
  },
  {
    "text": "the sites that any asset that are live any objects that are served can be scraped and pushed on to s3 storage and",
    "start": "2941359",
    "end": "2947809"
  },
  {
    "text": "at a moment's notice we can say sir from s3 which means we can turn the web",
    "start": "2947809",
    "end": "2953809"
  },
  {
    "text": "servers off if there for example compromised not that we get hacked too often and we can continue to serve a",
    "start": "2953809",
    "end": "2960230"
  },
  {
    "text": "copy of the sites and we're working on a project which is of akin to time machine",
    "start": "2960230",
    "end": "2965750"
  },
  {
    "text": "so we can actually version the data that's held inside the bucket and we can go back so if the compromise happens at",
    "start": "2965750",
    "end": "2971990"
  },
  {
    "text": "12:00 p.m. we can go back to what the website was like at 10:00 a.m. and that's a really useful feature for for",
    "start": "2971990",
    "end": "2978950"
  },
  {
    "text": "business continuity rather than disaster recovery we're not recovering the service but we're keeping the lights on just the same so we're",
    "start": "2978950",
    "end": "2985339"
  },
  {
    "text": "hoping to open sources as well so we'll see how that goes through the lawyers but a patch in and varnish and probably",
    "start": "2985339",
    "end": "2992269"
  },
  {
    "text": "nginx if I can get round to it so yeah that's that's how you do it it's the main things take waste don't be afraid",
    "start": "2992269",
    "end": "2998719"
  },
  {
    "text": "to get messy get inside plugins and nail them down because the plugins will be the things that wreck your infrastructure so that's yeah that's",
    "start": "2998719",
    "end": "3007089"
  },
  {
    "text": "that's what we're doing thank you thank",
    "start": "3007089",
    "end": "3014529"
  },
  {
    "text": "you Chris some next steps some interesting topics that you might want to attend after that if you want to take",
    "start": "3014529",
    "end": "3021099"
  },
  {
    "text": "it to the next level with deployments and Bluegreen deployments and tools like",
    "start": "3021099",
    "end": "3026229"
  },
  {
    "text": "elastic beam soaking opsworks these sessions might be interesting thank you very much I will be outside for questions if anybody has questions",
    "start": "3026229",
    "end": "3032679"
  },
  {
    "text": "for me very happy to take it thank you very much",
    "start": "3032679",
    "end": "3037439"
  }
]