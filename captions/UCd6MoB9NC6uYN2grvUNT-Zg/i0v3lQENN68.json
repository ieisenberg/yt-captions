[
  {
    "start": "0",
    "end": "15000"
  },
  {
    "text": "my name is Michael I'm an Operations",
    "start": "0",
    "end": "2760"
  },
  {
    "text": "engineer at wave we're a fin tech",
    "start": "2760",
    "end": "5640"
  },
  {
    "text": "company here in Toronto building",
    "start": "5640",
    "end": "8130"
  },
  {
    "text": "services for small businesses things",
    "start": "8130",
    "end": "9960"
  },
  {
    "text": "like payroll invoicing payments",
    "start": "9960",
    "end": "12000"
  },
  {
    "text": "accounting that type of thing",
    "start": "12000",
    "end": "15679"
  },
  {
    "start": "15000",
    "end": "36000"
  },
  {
    "text": "so a while back we were tasked with",
    "start": "16049",
    "end": "19020"
  },
  {
    "text": "building a data Lake for our company I",
    "start": "19020",
    "end": "21960"
  },
  {
    "text": "kind of went into that process with a",
    "start": "21960",
    "end": "23970"
  },
  {
    "text": "whole bunch of questions what is a data",
    "start": "23970",
    "end": "25740"
  },
  {
    "text": "Lake all this stuff and coming out of it",
    "start": "25740",
    "end": "28439"
  },
  {
    "text": "I still have a bunch of questions so",
    "start": "28439",
    "end": "30289"
  },
  {
    "text": "it's a pretty vague term that you hear a",
    "start": "30289",
    "end": "33059"
  },
  {
    "text": "lot these days",
    "start": "33059",
    "end": "35510"
  },
  {
    "text": "but in our case it really meant",
    "start": "35930",
    "end": "38610"
  },
  {
    "text": "aggregating data from all of our",
    "start": "38610",
    "end": "40530"
  },
  {
    "text": "applications into one place where we",
    "start": "40530",
    "end": "43680"
  },
  {
    "text": "could use it for other things so this",
    "start": "43680",
    "end": "46230"
  },
  {
    "text": "was a challenge for us at wave for a few",
    "start": "46230",
    "end": "48570"
  },
  {
    "text": "different reasons",
    "start": "48570",
    "end": "50300"
  },
  {
    "text": "we have over 350 databases spread across",
    "start": "50300",
    "end": "54210"
  },
  {
    "text": "40-plus RDS instances so this is",
    "start": "54210",
    "end": "58710"
  },
  {
    "text": "supporting multiple applications I think",
    "start": "58710",
    "end": "61230"
  },
  {
    "text": "we're at around 35 applications we have",
    "start": "61230",
    "end": "64739"
  },
  {
    "text": "a combination of my sequel and Postgres",
    "start": "64739",
    "end": "67729"
  },
  {
    "text": "and those are sharded some of the",
    "start": "67729",
    "end": "70560"
  },
  {
    "text": "applications have charted databases some",
    "start": "70560",
    "end": "72540"
  },
  {
    "text": "are uncharted so that's where you'd see",
    "start": "72540",
    "end": "74420"
  },
  {
    "text": "we might have four RDS instances with 16",
    "start": "74420",
    "end": "78390"
  },
  {
    "text": "logical databases on them that lets us",
    "start": "78390",
    "end": "80220"
  },
  {
    "text": "scale out by spinning up some new nodes",
    "start": "80220",
    "end": "82650"
  },
  {
    "text": "and then moving the data across we chose",
    "start": "82650",
    "end": "87630"
  },
  {
    "text": "s3 for the data lake as kind of a lowest",
    "start": "87630",
    "end": "90420"
  },
  {
    "text": "common denominator for our data so once",
    "start": "90420",
    "end": "94290"
  },
  {
    "text": "it's there it can be loaded into",
    "start": "94290",
    "end": "95880"
  },
  {
    "text": "redshift for our bi team to do their",
    "start": "95880",
    "end": "99360"
  },
  {
    "text": "analytics work kind of like the last",
    "start": "99360",
    "end": "100920"
  },
  {
    "text": "talk it's available for our ml team to",
    "start": "100920",
    "end": "104220"
  },
  {
    "text": "do their machine learning building their",
    "start": "104220",
    "end": "106950"
  },
  {
    "text": "models and doing the training and you",
    "start": "106950",
    "end": "110100"
  },
  {
    "text": "know in the future we want to look at",
    "start": "110100",
    "end": "111450"
  },
  {
    "text": "things like Athena and s3 select which",
    "start": "111450",
    "end": "114630"
  },
  {
    "text": "give us even more opportunities for",
    "start": "114630",
    "end": "117710"
  },
  {
    "text": "analytics on our data one of the",
    "start": "117710",
    "end": "121320"
  },
  {
    "text": "requirements was that we needed to dump",
    "start": "121320",
    "end": "123119"
  },
  {
    "text": "these databases every night at a minimum",
    "start": "123119",
    "end": "127210"
  },
  {
    "text": "and we do full database dumps it's not",
    "start": "127210",
    "end": "129459"
  },
  {
    "text": "kind of an incremental thing some of our",
    "start": "129459",
    "end": "132970"
  },
  {
    "text": "applications or some of the things we",
    "start": "132970",
    "end": "134890"
  },
  {
    "text": "want to do with the data require even",
    "start": "134890",
    "end": "137260"
  },
  {
    "text": "more frequent access so we have some",
    "start": "137260",
    "end": "138819"
  },
  {
    "text": "that dump multiple times a day and",
    "start": "138819",
    "end": "141010"
  },
  {
    "text": "that's for things like fraud detection",
    "start": "141010",
    "end": "142480"
  },
  {
    "text": "and that type of thing and then we have",
    "start": "142480",
    "end": "145540"
  },
  {
    "text": "a privacy policy with our users which",
    "start": "145540",
    "end": "147910"
  },
  {
    "text": "says if you close your account after 60",
    "start": "147910",
    "end": "150640"
  },
  {
    "text": "days we're going to delete everything",
    "start": "150640",
    "end": "152160"
  },
  {
    "text": "and that includes everything in the data",
    "start": "152160",
    "end": "154660"
  },
  {
    "text": "Lake which introduced some interesting",
    "start": "154660",
    "end": "156400"
  },
  {
    "text": "challenges so you might say why not glue",
    "start": "156400",
    "end": "161680"
  },
  {
    "start": "159000",
    "end": "215000"
  },
  {
    "text": "right this is Amazon's",
    "start": "161680",
    "end": "163380"
  },
  {
    "text": "kind of Native ETL solution it sounds",
    "start": "163380",
    "end": "166450"
  },
  {
    "text": "like it's built for this and that was",
    "start": "166450",
    "end": "168790"
  },
  {
    "text": "what we thought when we first started",
    "start": "168790",
    "end": "170319"
  },
  {
    "text": "this process - we ran into some issues",
    "start": "170319",
    "end": "174160"
  },
  {
    "text": "when we first started experimenting with",
    "start": "174160",
    "end": "176110"
  },
  {
    "text": "it particularly around our Postgres",
    "start": "176110",
    "end": "179019"
  },
  {
    "text": "databases these I think these have been",
    "start": "179019",
    "end": "183099"
  },
  {
    "text": "resolved but they were kind of a blocker",
    "start": "183099",
    "end": "186250"
  },
  {
    "text": "for us at that point so we kind of moved",
    "start": "186250",
    "end": "188290"
  },
  {
    "text": "on with another solution our team also",
    "start": "188290",
    "end": "191260"
  },
  {
    "text": "really didn't have a whole lot of",
    "start": "191260",
    "end": "192430"
  },
  {
    "text": "expertise with spark which is the",
    "start": "192430",
    "end": "194709"
  },
  {
    "text": "underlying technology for a - AWS glue",
    "start": "194709",
    "end": "199380"
  },
  {
    "text": "with that said we're probably going to",
    "start": "199380",
    "end": "201609"
  },
  {
    "text": "continue to look at it in the future you",
    "start": "201609",
    "end": "204040"
  },
  {
    "text": "know what can it do for us you can also",
    "start": "204040",
    "end": "205510"
  },
  {
    "text": "run it off of s3 right so you can pull",
    "start": "205510",
    "end": "207639"
  },
  {
    "text": "data from there and use it to transform",
    "start": "207639",
    "end": "209470"
  },
  {
    "text": "so we're definitely keeping our eye on",
    "start": "209470",
    "end": "211870"
  },
  {
    "text": "it and gonna do some more experiments",
    "start": "211870",
    "end": "213430"
  },
  {
    "text": "with it so what does the architecture",
    "start": "213430",
    "end": "217600"
  },
  {
    "start": "215000",
    "end": "249000"
  },
  {
    "text": "look like for the the tools that we've",
    "start": "217600",
    "end": "219310"
  },
  {
    "text": "built to do this kind of as mentioned we",
    "start": "219310",
    "end": "223120"
  },
  {
    "text": "have a certain set of tools that we do",
    "start": "223120",
    "end": "225100"
  },
  {
    "text": "so we use AWS lambda as well as cloud",
    "start": "225100",
    "end": "229690"
  },
  {
    "text": "formation the database migration service",
    "start": "229690",
    "end": "232930"
  },
  {
    "text": "or DMS SNS which really is just kind of",
    "start": "232930",
    "end": "237760"
  },
  {
    "text": "a message bus for the events that come",
    "start": "237760",
    "end": "240040"
  },
  {
    "text": "out of DMS and we also use terraform and",
    "start": "240040",
    "end": "243609"
  },
  {
    "text": "I'll get into why we use both terraform",
    "start": "243609",
    "end": "245620"
  },
  {
    "text": "and cloud formation in a little bit",
    "start": "245620",
    "end": "249750"
  },
  {
    "text": "so I'm not sure how well anyone can see",
    "start": "250670",
    "end": "253170"
  },
  {
    "text": "this but it was kind of our initial",
    "start": "253170",
    "end": "255390"
  },
  {
    "text": "design of the system the end result came",
    "start": "255390",
    "end": "260459"
  },
  {
    "text": "out pretty similar to this but had a few",
    "start": "260459",
    "end": "262500"
  },
  {
    "text": "changes that I'll get into so the way it",
    "start": "262500",
    "end": "265139"
  },
  {
    "text": "works is you take cloud watch events",
    "start": "265139",
    "end": "267210"
  },
  {
    "text": "which you can set up on a schedule right",
    "start": "267210",
    "end": "269370"
  },
  {
    "text": "so you can set it with a cron expression",
    "start": "269370",
    "end": "271430"
  },
  {
    "text": "that kicks off a lambda that lambda can",
    "start": "271430",
    "end": "275760"
  },
  {
    "text": "create the cloud formation stack for all",
    "start": "275760",
    "end": "279389"
  },
  {
    "text": "the DMS resources that we need and",
    "start": "279389",
    "end": "281690"
  },
  {
    "text": "register DMS can register with SNS which",
    "start": "281690",
    "end": "286860"
  },
  {
    "text": "gives us information like the DMS",
    "start": "286860",
    "end": "289800"
  },
  {
    "text": "instances created the task is ready to",
    "start": "289800",
    "end": "292650"
  },
  {
    "text": "go a task is completed that type of",
    "start": "292650",
    "end": "294900"
  },
  {
    "text": "thing",
    "start": "294900",
    "end": "297050"
  },
  {
    "text": "logging all goes to cloud watch logs and",
    "start": "297050",
    "end": "300919"
  },
  {
    "text": "we kind of subscribe to that SNS topic",
    "start": "300919",
    "end": "304940"
  },
  {
    "text": "to also see when a task is completed we",
    "start": "304940",
    "end": "308010"
  },
  {
    "text": "can do some cleanup so that was the",
    "start": "308010",
    "end": "310590"
  },
  {
    "text": "initial design it was kind of we thought",
    "start": "310590",
    "end": "312180"
  },
  {
    "text": "we'd use one lambda that would kind of",
    "start": "312180",
    "end": "314070"
  },
  {
    "text": "handle all of these events but when we",
    "start": "314070",
    "end": "317640"
  },
  {
    "text": "actually got into the weeds we we kind",
    "start": "317640",
    "end": "319500"
  },
  {
    "text": "of ended up breaking it up a little bit",
    "start": "319500",
    "end": "320970"
  },
  {
    "text": "differently so we ended up with three",
    "start": "320970",
    "end": "323370"
  },
  {
    "start": "321000",
    "end": "371000"
  },
  {
    "text": "lambdas the first one is called the art",
    "start": "323370",
    "end": "325950"
  },
  {
    "text": "creator so this is kind of similar to",
    "start": "325950",
    "end": "328350"
  },
  {
    "text": "the first part on the slide and we",
    "start": "328350",
    "end": "331169"
  },
  {
    "text": "actually end up with one of these for",
    "start": "331169",
    "end": "332729"
  },
  {
    "text": "every database that we're dumping so",
    "start": "332729",
    "end": "334530"
  },
  {
    "text": "we've got like I said 350 plus databases",
    "start": "334530",
    "end": "338760"
  },
  {
    "text": "so you end up with actually 350",
    "start": "338760",
    "end": "340710"
  },
  {
    "text": "different lambda functions they're all",
    "start": "340710",
    "end": "342090"
  },
  {
    "text": "spun out of the same thing so that takes",
    "start": "342090",
    "end": "345120"
  },
  {
    "text": "a cloud watch event on a cron which",
    "start": "345120",
    "end": "348300"
  },
  {
    "text": "triggers the lambda that lambda creates",
    "start": "348300",
    "end": "351300"
  },
  {
    "text": "the cloud formation stack which includes",
    "start": "351300",
    "end": "354030"
  },
  {
    "text": "the DMS instance the DMS tasks and the",
    "start": "354030",
    "end": "357510"
  },
  {
    "text": "s3 target endpoint for DMS and it also",
    "start": "357510",
    "end": "361470"
  },
  {
    "text": "registers the tasks to that SNS topic",
    "start": "361470",
    "end": "364770"
  },
  {
    "text": "that already exists which just says when",
    "start": "364770",
    "end": "368700"
  },
  {
    "text": "I have an event send it over here",
    "start": "368700",
    "end": "372080"
  },
  {
    "start": "371000",
    "end": "402000"
  },
  {
    "text": "the second lamb that we have is quite",
    "start": "372560",
    "end": "374330"
  },
  {
    "text": "simple and it really it's called the",
    "start": "374330",
    "end": "376490"
  },
  {
    "text": "manager it just listens to those events",
    "start": "376490",
    "end": "380330"
  },
  {
    "text": "on the SNS topic when it sees one the",
    "start": "380330",
    "end": "384020"
  },
  {
    "text": "lambda spins up and checks what what",
    "start": "384020",
    "end": "387410"
  },
  {
    "text": "event it is and some of the payload that",
    "start": "387410",
    "end": "389180"
  },
  {
    "text": "comes with it if it was the task has",
    "start": "389180",
    "end": "391940"
  },
  {
    "text": "been created and is ready to go it just",
    "start": "391940",
    "end": "394610"
  },
  {
    "text": "calls back out to DMS via the API and",
    "start": "394610",
    "end": "397520"
  },
  {
    "text": "says okay start your DMS tasks and start",
    "start": "397520",
    "end": "399710"
  },
  {
    "text": "dumping the data and then the final",
    "start": "399710",
    "end": "404360"
  },
  {
    "start": "402000",
    "end": "477000"
  },
  {
    "text": "lambda that we have we ended up calling",
    "start": "404360",
    "end": "405650"
  },
  {
    "text": "it the Reaper this just runs every",
    "start": "405650",
    "end": "408710"
  },
  {
    "text": "minute with the same same way that",
    "start": "408710",
    "end": "412280"
  },
  {
    "text": "things start with the cloud watch events",
    "start": "412280",
    "end": "414160"
  },
  {
    "text": "so when that runs it does two things it",
    "start": "414160",
    "end": "417560"
  },
  {
    "text": "looks for any failed cloud formation",
    "start": "417560",
    "end": "420889"
  },
  {
    "text": "stacks that are part of our data project",
    "start": "420889",
    "end": "423460"
  },
  {
    "text": "if it finds those it just cleans them up",
    "start": "423460",
    "end": "426260"
  },
  {
    "text": "as if they exist and the next night we",
    "start": "426260",
    "end": "429620"
  },
  {
    "text": "try and run this again it would kind of",
    "start": "429620",
    "end": "431300"
  },
  {
    "text": "run into the naming collision and",
    "start": "431300",
    "end": "433010"
  },
  {
    "text": "wouldn't work so we need to make sure we",
    "start": "433010",
    "end": "434389"
  },
  {
    "text": "clean those up in addition it queries",
    "start": "434389",
    "end": "437270"
  },
  {
    "text": "out to DMS via the API and looks for the",
    "start": "437270",
    "end": "442130"
  },
  {
    "text": "tasks that have completed which means",
    "start": "442130",
    "end": "443840"
  },
  {
    "text": "all of the data has been moved out of",
    "start": "443840",
    "end": "445460"
  },
  {
    "text": "RDS and into s3 when it finds those",
    "start": "445460",
    "end": "449539"
  },
  {
    "text": "completed tasks it basically parses out",
    "start": "449539",
    "end": "454180"
  },
  {
    "text": "the metrics that DMS has for it so",
    "start": "454180",
    "end": "457190"
  },
  {
    "text": "things like how many tables have been",
    "start": "457190",
    "end": "459610"
  },
  {
    "text": "transferred and completed were there any",
    "start": "459610",
    "end": "462410"
  },
  {
    "text": "failures how much data was moved that",
    "start": "462410",
    "end": "466520"
  },
  {
    "text": "type of thing",
    "start": "466520",
    "end": "467240"
  },
  {
    "text": "parses that out sends it to cloud watch",
    "start": "467240",
    "end": "469789"
  },
  {
    "text": "logs and then when that's complete it",
    "start": "469789",
    "end": "472669"
  },
  {
    "text": "just deletes the CloudFormation stack",
    "start": "472669",
    "end": "476770"
  },
  {
    "start": "477000",
    "end": "559000"
  },
  {
    "text": "so if you're familiar with terraform and",
    "start": "478570",
    "end": "481690"
  },
  {
    "text": "CloudFormation you might be wondering",
    "start": "481690",
    "end": "483130"
  },
  {
    "text": "why are we using both of these right",
    "start": "483130",
    "end": "486180"
  },
  {
    "text": "terraform is kind of the main tool that",
    "start": "486180",
    "end": "488260"
  },
  {
    "text": "we use that wave to manage most of our",
    "start": "488260",
    "end": "490990"
  },
  {
    "text": "AWS infrastructure so that's kind of our",
    "start": "490990",
    "end": "493660"
  },
  {
    "text": "go-to if we're building something new",
    "start": "493660",
    "end": "495280"
  },
  {
    "text": "we're looking at how we can do it with",
    "start": "495280",
    "end": "496840"
  },
  {
    "text": "terraform but when we were looking at",
    "start": "496840",
    "end": "499540"
  },
  {
    "text": "how to build something like this that",
    "start": "499540",
    "end": "501580"
  },
  {
    "text": "kind of spins up these stacks of",
    "start": "501580",
    "end": "503410"
  },
  {
    "text": "resources on a repeated basis and",
    "start": "503410",
    "end": "506440"
  },
  {
    "text": "they're ephemeral right they they come",
    "start": "506440",
    "end": "508660"
  },
  {
    "text": "up at night and then they go down again",
    "start": "508660",
    "end": "511320"
  },
  {
    "text": "terraform has a bunch of extra",
    "start": "511320",
    "end": "514950"
  },
  {
    "text": "management that you need to do so you",
    "start": "514950",
    "end": "516729"
  },
  {
    "text": "need to have the remote state for each",
    "start": "516729",
    "end": "519130"
  },
  {
    "text": "stack that you built and kind of move",
    "start": "519130",
    "end": "522340"
  },
  {
    "text": "those pieces around CloudFormation has",
    "start": "522340",
    "end": "525430"
  },
  {
    "text": "all this kind of built in so you get a",
    "start": "525430",
    "end": "527860"
  },
  {
    "text": "cloud formation stack that's that's all",
    "start": "527860",
    "end": "530860"
  },
  {
    "text": "you really need you don't need to store",
    "start": "530860",
    "end": "533290"
  },
  {
    "text": "anything in s3 or somewhere else so that",
    "start": "533290",
    "end": "536170"
  },
  {
    "text": "made a lot of sense for us and then",
    "start": "536170",
    "end": "538240"
  },
  {
    "text": "there were a couple of resources that",
    "start": "538240",
    "end": "539830"
  },
  {
    "text": "terraform didn't support so DMS it's a",
    "start": "539830",
    "end": "544630"
  },
  {
    "text": "really nice service from AWS but I think",
    "start": "544630",
    "end": "547330"
  },
  {
    "text": "it's not as popular as a lot of them so",
    "start": "547330",
    "end": "549220"
  },
  {
    "text": "terraform just hasn't built out the full",
    "start": "549220",
    "end": "550900"
  },
  {
    "text": "support so things like DMS event",
    "start": "550900",
    "end": "552760"
  },
  {
    "text": "subscriptions you just can't do with",
    "start": "552760",
    "end": "554320"
  },
  {
    "text": "terraform without kind of building it",
    "start": "554320",
    "end": "557110"
  },
  {
    "text": "yourself",
    "start": "557110",
    "end": "559470"
  },
  {
    "text": "so if I if one of our developers is",
    "start": "560670",
    "end": "563970"
  },
  {
    "text": "launching a new app and we want to move",
    "start": "563970",
    "end": "566730"
  },
  {
    "text": "the data that that's going to be there",
    "start": "566730",
    "end": "568459"
  },
  {
    "text": "from RDS into s3 all we really need to",
    "start": "568459",
    "end": "572399"
  },
  {
    "text": "do as a team is do some terraform",
    "start": "572399",
    "end": "574290"
  },
  {
    "text": "configuration so I need to configure",
    "start": "574290",
    "end": "578699"
  },
  {
    "text": "remote state to just read some data",
    "start": "578699",
    "end": "580470"
  },
  {
    "text": "about our various functions and things",
    "start": "580470",
    "end": "582630"
  },
  {
    "text": "like that so that's a pretty simple",
    "start": "582630",
    "end": "586069"
  },
  {
    "text": "pointed at the at the bucket that stores",
    "start": "586069",
    "end": "588839"
  },
  {
    "text": "the terraform state and give it the key",
    "start": "588839",
    "end": "592579"
  },
  {
    "start": "592000",
    "end": "606000"
  },
  {
    "text": "then we need to instantiate our module",
    "start": "592970",
    "end": "596449"
  },
  {
    "text": "there's not really anything custom to",
    "start": "596449",
    "end": "599160"
  },
  {
    "text": "the application here we're just passing",
    "start": "599160",
    "end": "600959"
  },
  {
    "text": "through some variables so it's pretty",
    "start": "600959",
    "end": "604170"
  },
  {
    "text": "straightforward",
    "start": "604170",
    "end": "604980"
  },
  {
    "text": "and then we need we already have RDS",
    "start": "604980",
    "end": "609060"
  },
  {
    "text": "modules for Postgres for my sequel for",
    "start": "609060",
    "end": "611850"
  },
  {
    "text": "sharded for uncharted databases so we",
    "start": "611850",
    "end": "614850"
  },
  {
    "text": "just need to make a few more",
    "start": "614850",
    "end": "616050"
  },
  {
    "text": "modifications to that so if we don't",
    "start": "616050",
    "end": "618720"
  },
  {
    "text": "have read replicas we need them we don't",
    "start": "618720",
    "end": "621600"
  },
  {
    "text": "we don't this project doesn't pull data",
    "start": "621600",
    "end": "625410"
  },
  {
    "text": "from our production databases right",
    "start": "625410",
    "end": "627060"
  },
  {
    "text": "because it does do a lot of reads it",
    "start": "627060",
    "end": "628649"
  },
  {
    "text": "could impact performance so you need to",
    "start": "628649",
    "end": "630569"
  },
  {
    "text": "use it on read replicas and you also",
    "start": "630569",
    "end": "633779"
  },
  {
    "text": "need to say I want to create DMS",
    "start": "633779",
    "end": "636149"
  },
  {
    "text": "endpoints that's basically what tells it",
    "start": "636149",
    "end": "637920"
  },
  {
    "text": "okay we want to pull this data out and",
    "start": "637920",
    "end": "641180"
  },
  {
    "text": "then again we pass through a few more",
    "start": "641180",
    "end": "643649"
  },
  {
    "text": "variables but it's pretty simple if you",
    "start": "643649",
    "end": "646649"
  },
  {
    "text": "want to customize the schedule or things",
    "start": "646649",
    "end": "648420"
  },
  {
    "text": "like that that's just a few more",
    "start": "648420",
    "end": "649860"
  },
  {
    "text": "variables that you you pass through",
    "start": "649860",
    "end": "654199"
  },
  {
    "start": "654000",
    "end": "683000"
  },
  {
    "text": "so once we had built this and got things",
    "start": "655120",
    "end": "658439"
  },
  {
    "text": "you know things were working but we",
    "start": "658439",
    "end": "661480"
  },
  {
    "text": "didn't really have a lot of insight into",
    "start": "661480",
    "end": "662649"
  },
  {
    "text": "what was going on on a nightly basis",
    "start": "662649",
    "end": "665110"
  },
  {
    "text": "right you spin up a cloud formation",
    "start": "665110",
    "end": "667209"
  },
  {
    "text": "stack and then you delete it all the",
    "start": "667209",
    "end": "669459"
  },
  {
    "text": "resources are created and then deleted",
    "start": "669459",
    "end": "672749"
  },
  {
    "text": "so you need a way to to keep an eye on",
    "start": "672749",
    "end": "675850"
  },
  {
    "text": "things kind of even when those resources",
    "start": "675850",
    "end": "679899"
  },
  {
    "text": "don't exist in AWS anymore so we use a",
    "start": "679899",
    "end": "684430"
  },
  {
    "start": "683000",
    "end": "752000"
  },
  {
    "text": "couple of tools I think they're all",
    "start": "684430",
    "end": "686139"
  },
  {
    "text": "vendors here data dog we use heavily at",
    "start": "686139",
    "end": "688660"
  },
  {
    "text": "Wave so that's one data dog gets all of",
    "start": "688660",
    "end": "693069"
  },
  {
    "text": "the AWS cloud watch metrics",
    "start": "693069",
    "end": "695589"
  },
  {
    "text": "automatically just sucks those all in so",
    "start": "695589",
    "end": "698620"
  },
  {
    "text": "here's an example of what our read",
    "start": "698620",
    "end": "700269"
  },
  {
    "text": "replicas look like when this process",
    "start": "700269",
    "end": "703089"
  },
  {
    "text": "kicks off every night so you can see it",
    "start": "703089",
    "end": "705999"
  },
  {
    "text": "around one o'clock is one thing start it",
    "start": "705999",
    "end": "709180"
  },
  {
    "text": "takes a while for the CloudFormation",
    "start": "709180",
    "end": "710439"
  },
  {
    "text": "stacks to spin up for the DMS instances",
    "start": "710439",
    "end": "713589"
  },
  {
    "text": "to be created so you can see it around",
    "start": "713589",
    "end": "716920"
  },
  {
    "text": "115 things kind of go a little nuts each",
    "start": "716920",
    "end": "721269"
  },
  {
    "text": "of these colors is really just a",
    "start": "721269",
    "end": "723610"
  },
  {
    "text": "different read replicas that we have so",
    "start": "723610",
    "end": "726399"
  },
  {
    "text": "you can kind of see some are active for",
    "start": "726399",
    "end": "729009"
  },
  {
    "text": "a short period of time we have some down",
    "start": "729009",
    "end": "730929"
  },
  {
    "text": "here at the bottom that are running for",
    "start": "730929",
    "end": "732370"
  },
  {
    "text": "hours those are our biggest databases",
    "start": "732370",
    "end": "734649"
  },
  {
    "text": "right it takes a decent amount of time",
    "start": "734649",
    "end": "736779"
  },
  {
    "text": "to suck all the data out of them so this",
    "start": "736779",
    "end": "740319"
  },
  {
    "text": "gives us some insight into what what",
    "start": "740319",
    "end": "742389"
  },
  {
    "text": "impact this is having on our systems and",
    "start": "742389",
    "end": "745899"
  },
  {
    "text": "just what's going on behind the scenes",
    "start": "745899",
    "end": "747879"
  },
  {
    "text": "obviously there's a lot more data in",
    "start": "747879",
    "end": "749980"
  },
  {
    "text": "there as well we also use Summa logic",
    "start": "749980",
    "end": "754480"
  },
  {
    "start": "752000",
    "end": "825000"
  },
  {
    "text": "which is another great tool so earlier I",
    "start": "754480",
    "end": "758679"
  },
  {
    "text": "mentioned the Reaper parses out the DMS",
    "start": "758679",
    "end": "761519"
  },
  {
    "text": "metrics from their API and logs it to",
    "start": "761519",
    "end": "765939"
  },
  {
    "text": "cloud watch logs",
    "start": "765939",
    "end": "767009"
  },
  {
    "text": "once it's in cloud watch logs in other",
    "start": "767009",
    "end": "769420"
  },
  {
    "text": "lambda sends that over to Summa logic",
    "start": "769420",
    "end": "771309"
  },
  {
    "text": "where we can do all sorts of analysis on",
    "start": "771309",
    "end": "773980"
  },
  {
    "text": "the logs parse you know metrics out",
    "start": "773980",
    "end": "776350"
  },
  {
    "text": "parse fields out and build out queries",
    "start": "776350",
    "end": "779559"
  },
  {
    "text": "save queries for our teams or dashboards",
    "start": "779559",
    "end": "782139"
  },
  {
    "text": "like this one so this is at a high level",
    "start": "782139",
    "end": "784480"
  },
  {
    "text": "view what we can do with that",
    "start": "784480",
    "end": "787259"
  },
  {
    "text": "we can see were there any replication",
    "start": "787259",
    "end": "790000"
  },
  {
    "text": "failures how much total kind of data",
    "start": "790000",
    "end": "793360"
  },
  {
    "text": "volume was moved in in the last day so",
    "start": "793360",
    "end": "795819"
  },
  {
    "text": "the top four here are kind of on a daily",
    "start": "795819",
    "end": "798430"
  },
  {
    "text": "basis how many tables were pulled out of",
    "start": "798430",
    "end": "801880"
  },
  {
    "text": "RDS and in test three how many tables",
    "start": "801880",
    "end": "804579"
  },
  {
    "text": "failed right so DMS can have errors",
    "start": "804579",
    "end": "806759"
  },
  {
    "text": "reading a table so we can see were there",
    "start": "806759",
    "end": "809920"
  },
  {
    "text": "any failures there so we can go fix that",
    "start": "809920",
    "end": "811810"
  },
  {
    "text": "up and then below you get kind of the",
    "start": "811810",
    "end": "814300"
  },
  {
    "text": "same view but over the last week just to",
    "start": "814300",
    "end": "817240"
  },
  {
    "text": "to kind of see are there any trends of",
    "start": "817240",
    "end": "819279"
  },
  {
    "text": "things are starting to go wrong so those",
    "start": "819279",
    "end": "823120"
  },
  {
    "text": "are two great tools that we have any",
    "start": "823120",
    "end": "826540"
  },
  {
    "start": "825000",
    "end": "836000"
  },
  {
    "text": "large project like this I think you're",
    "start": "826540",
    "end": "828880"
  },
  {
    "text": "going to run into some unforeseen issues",
    "start": "828880",
    "end": "832420"
  },
  {
    "text": "and some things you weren't really",
    "start": "832420",
    "end": "834160"
  },
  {
    "text": "expecting so I'm just going to run",
    "start": "834160",
    "end": "836139"
  },
  {
    "start": "836000",
    "end": "905000"
  },
  {
    "text": "through a couple of those so if you've",
    "start": "836139",
    "end": "838449"
  },
  {
    "text": "used AWS much at all you'll you're",
    "start": "838449",
    "end": "841180"
  },
  {
    "text": "probably familiar with their service",
    "start": "841180",
    "end": "842649"
  },
  {
    "text": "limits right a lot of times these are in",
    "start": "842649",
    "end": "845050"
  },
  {
    "text": "place for your own good but we",
    "start": "845050",
    "end": "847870"
  },
  {
    "text": "definitely hit a bunch on this one we",
    "start": "847870",
    "end": "850839"
  },
  {
    "text": "had to upgrade or get the limits",
    "start": "850839",
    "end": "853209"
  },
  {
    "text": "increased a bunch of them for DMS I",
    "start": "853209",
    "end": "855189"
  },
  {
    "text": "think the default was like 10 or 20",
    "start": "855189",
    "end": "858160"
  },
  {
    "text": "instances and we needed hundreds of them",
    "start": "858160",
    "end": "861399"
  },
  {
    "text": "so the endpoints the tasks the instances",
    "start": "861399",
    "end": "864130"
  },
  {
    "text": "and avenge subscripts we kind of",
    "start": "864130",
    "end": "867819"
  },
  {
    "text": "expected that right that was you know",
    "start": "867819",
    "end": "869680"
  },
  {
    "text": "DMS was a large part of this the other",
    "start": "869680",
    "end": "871329"
  },
  {
    "text": "two we kind of caught us by surprise a",
    "start": "871329",
    "end": "873759"
  },
  {
    "text": "little bit CloudFormation stacks was",
    "start": "873759",
    "end": "876579"
  },
  {
    "text": "another limit we had and again we needed",
    "start": "876579",
    "end": "880269"
  },
  {
    "text": "hundreds of CloudFormation stacks which",
    "start": "880269",
    "end": "882360"
  },
  {
    "text": "previous to this we were running maybe",
    "start": "882360",
    "end": "884380"
  },
  {
    "text": "20 or 30 and now we're spinning up 300 a",
    "start": "884380",
    "end": "887290"
  },
  {
    "text": "night and cloud watch event rules was",
    "start": "887290",
    "end": "891160"
  },
  {
    "text": "another one that surprised me I'm not",
    "start": "891160",
    "end": "892420"
  },
  {
    "text": "sure why but you can only have I think a",
    "start": "892420",
    "end": "895779"
  },
  {
    "text": "hundred by default but these were all",
    "start": "895779",
    "end": "898300"
  },
  {
    "text": "pumped up by AWS no problem for us",
    "start": "898300",
    "end": "902970"
  },
  {
    "text": "figuring out how to size the DMS",
    "start": "904330",
    "end": "907210"
  },
  {
    "start": "905000",
    "end": "936000"
  },
  {
    "text": "instances appropriately took some time",
    "start": "907210",
    "end": "910000"
  },
  {
    "text": "you're really balancing how much you're",
    "start": "910000",
    "end": "911770"
  },
  {
    "text": "paying for the incidence versus how much",
    "start": "911770",
    "end": "913660"
  },
  {
    "text": "time it takes to dump an entire database",
    "start": "913660",
    "end": "916620"
  },
  {
    "text": "our time limit was kind of we wanted",
    "start": "916620",
    "end": "919090"
  },
  {
    "text": "everything done within three hours",
    "start": "919090",
    "end": "920350"
  },
  {
    "text": "because our bi team needs to kick off",
    "start": "920350",
    "end": "923200"
  },
  {
    "text": "their process to load it from s3 into",
    "start": "923200",
    "end": "925960"
  },
  {
    "text": "redshift they need to know when they can",
    "start": "925960",
    "end": "927970"
  },
  {
    "text": "can run that so really if anything was",
    "start": "927970",
    "end": "930730"
  },
  {
    "text": "taking longer than three hours we wanted",
    "start": "930730",
    "end": "932650"
  },
  {
    "text": "to bump up the incident size and then on",
    "start": "932650",
    "end": "935920"
  },
  {
    "text": "the other side of things DMS bills you",
    "start": "935920",
    "end": "938890"
  },
  {
    "start": "936000",
    "end": "962000"
  },
  {
    "text": "on an hourly basis for the instance so",
    "start": "938890",
    "end": "943480"
  },
  {
    "text": "ec2 recently or not so recently anymore",
    "start": "943480",
    "end": "947140"
  },
  {
    "text": "but they switch to per minute billing",
    "start": "947140",
    "end": "948970"
  },
  {
    "text": "which is awesome so we've asked the DMS",
    "start": "948970",
    "end": "951670"
  },
  {
    "text": "team to do the same just because we have",
    "start": "951670",
    "end": "953980"
  },
  {
    "text": "some smaller databases we spin them up",
    "start": "953980",
    "end": "955870"
  },
  {
    "text": "for three minutes and we pay for an hour",
    "start": "955870",
    "end": "957580"
  },
  {
    "text": "so you're just kind of balancing costs",
    "start": "957580",
    "end": "959710"
  },
  {
    "text": "on both sides and then there you know",
    "start": "959710",
    "end": "964660"
  },
  {
    "start": "962000",
    "end": "1036000"
  },
  {
    "text": "DMS is a awesome service does great for",
    "start": "964660",
    "end": "967240"
  },
  {
    "text": "us but you still run into things like",
    "start": "967240",
    "end": "970200"
  },
  {
    "text": "tasks says it's ready but it's not able",
    "start": "970200",
    "end": "973450"
  },
  {
    "text": "to connect to the database so it just",
    "start": "973450",
    "end": "975100"
  },
  {
    "text": "kind of hangs there the DMS events that",
    "start": "975100",
    "end": "979060"
  },
  {
    "text": "we kind of diagrammed out earlier we",
    "start": "979060",
    "end": "983380"
  },
  {
    "text": "expected them to be a little bit more",
    "start": "983380",
    "end": "985000"
  },
  {
    "text": "granular so you can get information like",
    "start": "985000",
    "end": "987010"
  },
  {
    "text": "this task is completed but it doesn't",
    "start": "987010",
    "end": "990520"
  },
  {
    "text": "tell you anything about was it",
    "start": "990520",
    "end": "991570"
  },
  {
    "text": "successful that it failed so that's",
    "start": "991570",
    "end": "994330"
  },
  {
    "text": "where we kind of switch gears into",
    "start": "994330",
    "end": "995860"
  },
  {
    "text": "instead of just reacting to the event we",
    "start": "995860",
    "end": "998440"
  },
  {
    "text": "query out to the API to get more of that",
    "start": "998440",
    "end": "1000960"
  },
  {
    "text": "information and then DMS rate-limiting",
    "start": "1000960",
    "end": "1004230"
  },
  {
    "text": "so if you go back to the data dog slide",
    "start": "1004230",
    "end": "1008180"
  },
  {
    "text": "you might notice that things are kind of",
    "start": "1008180",
    "end": "1010470"
  },
  {
    "text": "spinning up over let's say from one",
    "start": "1010470",
    "end": "1012870"
  },
  {
    "text": "o'clock to 2 o'clock when we first tried",
    "start": "1012870",
    "end": "1016380"
  },
  {
    "text": "spinning up 350 DMS instances at the",
    "start": "1016380",
    "end": "1019350"
  },
  {
    "text": "same time and then starting those tasks",
    "start": "1019350",
    "end": "1021660"
  },
  {
    "text": "we hit rate-limiting which is built into",
    "start": "1021660",
    "end": "1023700"
  },
  {
    "text": "the DMS service so really we just need",
    "start": "1023700",
    "end": "1027420"
  },
  {
    "text": "to add some math of the terraform and",
    "start": "1027420",
    "end": "1030120"
  },
  {
    "text": "kind of",
    "start": "1030120",
    "end": "1030890"
  },
  {
    "text": "spin things up kind of over that our to",
    "start": "1030890",
    "end": "1033530"
  },
  {
    "text": "to get get around that so that's about",
    "start": "1033530",
    "end": "1037850"
  },
  {
    "start": "1036000",
    "end": "1193000"
  },
  {
    "text": "it for this it's been working well for",
    "start": "1037850",
    "end": "1040550"
  },
  {
    "text": "us for I think at least the last six",
    "start": "1040550",
    "end": "1043819"
  },
  {
    "text": "months or so our bi team is fully using",
    "start": "1043820",
    "end": "1047930"
  },
  {
    "text": "this data it's being loaded into into",
    "start": "1047930",
    "end": "1049880"
  },
  {
    "text": "redshift it's been an adventure figuring",
    "start": "1049880",
    "end": "1053450"
  },
  {
    "text": "it all out so if there's any any",
    "start": "1053450",
    "end": "1055730"
  },
  {
    "text": "questions",
    "start": "1055730",
    "end": "1057730"
  },
  {
    "text": "great thank you Michael yeah yeah so",
    "start": "1057730",
    "end": "1060020"
  },
  {
    "text": "questions there we go",
    "start": "1060020",
    "end": "1064450"
  },
  {
    "text": "hi what format do the databases get",
    "start": "1065900",
    "end": "1069290"
  },
  {
    "text": "dumped into s3 yeah so DMS right now we",
    "start": "1069290",
    "end": "1074300"
  },
  {
    "text": "use it and dump it just as plain CSV",
    "start": "1074300",
    "end": "1077030"
  },
  {
    "text": "into s3 they are I believe or I'm not",
    "start": "1077030",
    "end": "1082070"
  },
  {
    "text": "sure if they've added or it's it's kind",
    "start": "1082070",
    "end": "1083930"
  },
  {
    "text": "of on its way we've talked to them about",
    "start": "1083930",
    "end": "1085370"
  },
  {
    "text": "getting park' format but for now CSV our",
    "start": "1085370",
    "end": "1090530"
  },
  {
    "text": "main use case right now is getting it",
    "start": "1090530",
    "end": "1092059"
  },
  {
    "text": "into redshift so they have the redshift",
    "start": "1092059",
    "end": "1094160"
  },
  {
    "text": "load command I can kind of just pull",
    "start": "1094160",
    "end": "1095750"
  },
  {
    "text": "that in",
    "start": "1095750",
    "end": "1098050"
  },
  {
    "text": "yeah I'm curious why you decided to use",
    "start": "1103580",
    "end": "1106730"
  },
  {
    "text": "sumo logic for queries and dashboarding",
    "start": "1106730",
    "end": "1109909"
  },
  {
    "text": "why didn't you use data dog as you were",
    "start": "1109909",
    "end": "1113389"
  },
  {
    "text": "using that for other news case yes so we",
    "start": "1113389",
    "end": "1117259"
  },
  {
    "text": "sumo logic was kind of chosen not just",
    "start": "1117259",
    "end": "1120679"
  },
  {
    "text": "for this but we use it all over the",
    "start": "1120679",
    "end": "1122480"
  },
  {
    "text": "place for all of our application logs we",
    "start": "1122480",
    "end": "1124309"
  },
  {
    "text": "just get everything into there so I know",
    "start": "1124309",
    "end": "1127909"
  },
  {
    "text": "data dog has their logging now but sumo",
    "start": "1127909",
    "end": "1131090"
  },
  {
    "text": "logic is where it all is right now for",
    "start": "1131090",
    "end": "1132499"
  },
  {
    "text": "us so we're using the same tool",
    "start": "1132499",
    "end": "1135909"
  },
  {
    "text": "could you elaborate a bit what kind of",
    "start": "1137840",
    "end": "1140539"
  },
  {
    "text": "cloud watch events triggered the lambda",
    "start": "1140539",
    "end": "1143000"
  },
  {
    "text": "and what programming framework are using",
    "start": "1143000",
    "end": "1145610"
  },
  {
    "text": "in the lambda itself so most of like the",
    "start": "1145610",
    "end": "1151700"
  },
  {
    "text": "the lambdas that are triggered during",
    "start": "1151700",
    "end": "1153440"
  },
  {
    "text": "the to kick off the process those are",
    "start": "1153440",
    "end": "1156049"
  },
  {
    "text": "just you can do cloud watch events",
    "start": "1156049",
    "end": "1158480"
  },
  {
    "text": "sket I think they're called schedule of",
    "start": "1158480",
    "end": "1160130"
  },
  {
    "text": "cloud watch events so it's a cloud watch",
    "start": "1160130",
    "end": "1162950"
  },
  {
    "text": "event that you just give it a cron kind",
    "start": "1162950",
    "end": "1166460"
  },
  {
    "text": "of a cron and tell it what to kick off",
    "start": "1166460",
    "end": "1168409"
  },
  {
    "text": "at that time sorry what was a o for",
    "start": "1168409",
    "end": "1174980"
  },
  {
    "text": "lambda",
    "start": "1174980",
    "end": "1175429"
  },
  {
    "text": "yeah we're not really using a framework",
    "start": "1175429",
    "end": "1178750"
  },
  {
    "text": "we we package it up with service",
    "start": "1178750",
    "end": "1184220"
  },
  {
    "text": "application model so we use that to",
    "start": "1184220",
    "end": "1186289"
  },
  {
    "text": "publish but it's just a couple simple",
    "start": "1186289",
    "end": "1189289"
  },
  {
    "text": "Python functions yeah yeah",
    "start": "1189289",
    "end": "1193898"
  }
]