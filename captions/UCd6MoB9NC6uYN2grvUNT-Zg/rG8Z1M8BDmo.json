[
  {
    "start": "0",
    "end": "77000"
  },
  {
    "text": "hi guys my name is firkin i'm the co-founder and CTO of bebo and today we're gonna be talking about how we",
    "start": "30",
    "end": "6140"
  },
  {
    "text": "handle growth and manage the thousands of servers and really it was Johnny Johnny was joined us after he graduated",
    "start": "6140",
    "end": "13200"
  },
  {
    "text": "from eighth grade and he basically kind of slowly got started learning some languages and things like that and",
    "start": "13200",
    "end": "19080"
  },
  {
    "text": "earlier this year we went from two senior Ops guys down to zero and we turned to Johnny and said hey Johnny",
    "start": "19080",
    "end": "24689"
  },
  {
    "text": "want to learn opps and right in the middle of our scaling in our growth he's like alright let's go and today he's",
    "start": "24689",
    "end": "29939"
  },
  {
    "text": "gonna tell you about how he did it and kind of what some of those processes were about awesome thank you first of",
    "start": "29939",
    "end": "39600"
  },
  {
    "text": "all hi I'm Johnny icer kind just mentioned I'm 16 years old now I started",
    "start": "39600",
    "end": "46649"
  },
  {
    "text": "when I was middle school as a few years ago actually not allowed to be in a casino so I'm only I was escorted here",
    "start": "46649",
    "end": "53039"
  },
  {
    "text": "for this talk and Johnny be incredible at the my closer closer yeah there we go I was escorted here for this talk and",
    "start": "53039",
    "end": "59280"
  },
  {
    "text": "I'm yes koi dried out after so I'm gonna talk slowly get all the details in as",
    "start": "59280",
    "end": "66119"
  },
  {
    "text": "for con mentioned I'm the director of operations for Bebo that's Ben I'm very",
    "start": "66119",
    "end": "71970"
  },
  {
    "text": "proud of that fact it's been a few months and I'm gonna tell you what that means for us a little bit of backstory",
    "start": "71970",
    "end": "79080"
  },
  {
    "start": "77000",
    "end": "77000"
  },
  {
    "text": "on me this was me in eighth grade this was right when I started I was just a",
    "start": "79080",
    "end": "85860"
  },
  {
    "text": "little kid I got a summer internship with bebo after reaching out to the CEO and I went",
    "start": "85860",
    "end": "94860"
  },
  {
    "text": "through a fair amount of a learning curve I started making very basic HTML",
    "start": "94860",
    "end": "99900"
  },
  {
    "text": "Javascript little web apps for the company but quickly moved into working on our node.js back-end learned Python",
    "start": "99900",
    "end": "108090"
  },
  {
    "text": "golang Java all these other things scaling up becoming a developer for them",
    "start": "108090",
    "end": "114470"
  },
  {
    "text": "and then of course sometime later our two senior ops engineers left the",
    "start": "114470",
    "end": "122460"
  },
  {
    "text": "company and we were left in a state where we didn't have anyone um Sofer Khan turned to me and he made me he",
    "start": "122460",
    "end": "128610"
  },
  {
    "text": "asked me this question hey Johnny you want to be a sysadmin suddenly um terrifying question I knew",
    "start": "128610",
    "end": "137970"
  },
  {
    "text": "nothing about this base had no idea what I was gonna be doing but I said sure why",
    "start": "137970",
    "end": "142980"
  },
  {
    "text": "not I'll figure it out as I go that's what I done so far we're a streaming company we",
    "start": "142980",
    "end": "150360"
  },
  {
    "text": "ingest video and the that means that the metric that we quantify ourselves on is the amount of minutes that are streamed",
    "start": "150360",
    "end": "156600"
  },
  {
    "text": "on our platform this is a chart of our growth in that metric over about three",
    "start": "156600",
    "end": "161610"
  },
  {
    "text": "months and you can see straight up it's a rapid growth we went from zero to a",
    "start": "161610",
    "end": "168360"
  },
  {
    "text": "little over a million three minutes every day in less than three months and",
    "start": "168360",
    "end": "173700"
  },
  {
    "text": "then this part right here is where I joined so I joined just when we were on",
    "start": "173700",
    "end": "179370"
  },
  {
    "text": "the uptick became ops here and had to deal with this enormous scaling up of our company this was the issue I'm gonna",
    "start": "179370",
    "end": "186570"
  },
  {
    "text": "talk to you guys today about how I fixed this how I managed this as I mentioned",
    "start": "186570",
    "end": "193140"
  },
  {
    "start": "191000",
    "end": "191000"
  },
  {
    "text": "bebo is a streaming company we quantify ourselves based on the amount of minutes",
    "start": "193140",
    "end": "199110"
  },
  {
    "text": "that are streamed what's that actually me what's our product hour our goal is",
    "start": "199110",
    "end": "204120"
  },
  {
    "text": "to bring eSports to every gamer we eSports is this lofty field that we see",
    "start": "204120",
    "end": "209280"
  },
  {
    "text": "of professionals who play video games and make enormous amounts of money off",
    "start": "209280",
    "end": "214830"
  },
  {
    "text": "of it streaming their video but the majority of gamers the lower tier can't",
    "start": "214830",
    "end": "220709"
  },
  {
    "text": "actually access that it's not something that person a normal person can do so we",
    "start": "220709",
    "end": "226140"
  },
  {
    "text": "looked at things that we've done in the past just as people when I was a kid I played soccer when Furukawa was younger",
    "start": "226140",
    "end": "232440"
  },
  {
    "text": "he was in Little League and that was such a fun experience that was what sports are to us it's just like",
    "start": "232440",
    "end": "238920"
  },
  {
    "text": "recreational league you're with your friends there's no stakes there's no money but it's just kind of fun and we want to",
    "start": "238920",
    "end": "245220"
  },
  {
    "text": "bring that to eSports so we want to bring recreational eSports into the world and the key there is that social",
    "start": "245220",
    "end": "252799"
  },
  {
    "text": "competition the thing that makes competition fun is having a rifle in my opinion it's seeing someone you're great",
    "start": "252799",
    "end": "258739"
  },
  {
    "text": "friends with them but on the field you're gonna ruin them and we want to",
    "start": "258739",
    "end": "264169"
  },
  {
    "text": "bring that into gaming that's totally present in gaming but what's a way we can bring that into the competitive scene for younger people and for not",
    "start": "264169",
    "end": "271669"
  },
  {
    "text": "just younger people but less experienced people so our thesis here is that social is a",
    "start": "271669",
    "end": "278990"
  },
  {
    "text": "big part of competition the reason competition is fun is you have someone you're competing against",
    "start": "278990",
    "end": "284240"
  },
  {
    "text": "it's a league you're competing against other people you see yourself throw and you bring others down the same time it's",
    "start": "284240",
    "end": "290030"
  },
  {
    "text": "fun and the way we provide that in bebo is through video video is the glue of",
    "start": "290030",
    "end": "297949"
  },
  {
    "text": "our product it's one thing to play a video game and know that oh someone on",
    "start": "297949",
    "end": "303470"
  },
  {
    "text": "the other side of the world is playing a game - and your scores are gonna be matched up or something",
    "start": "303470",
    "end": "308479"
  },
  {
    "text": "you don't really care as much but when you can see the person when you can see the person you're competing against in",
    "start": "308479",
    "end": "314840"
  },
  {
    "text": "real time live I'm playing this person right now and I'm winning or I'm losing",
    "start": "314840",
    "end": "320150"
  },
  {
    "text": "they can make fun of me I can make fun of them that's a total social experience that's really fun to feel so video is",
    "start": "320150",
    "end": "328159"
  },
  {
    "text": "the glue if video is the glue we talk",
    "start": "328159",
    "end": "333770"
  },
  {
    "text": "about from the engineering perspective how do we ingest this video and how do we deliver it we need to both take video",
    "start": "333770",
    "end": "339680"
  },
  {
    "text": "in from every competitor and then stream it out to multiple viewers potentially",
    "start": "339680",
    "end": "346240"
  },
  {
    "text": "it's the way at we think about problems is first thing you always have to set out is the requirements before",
    "start": "346240",
    "end": "351560"
  },
  {
    "start": "347000",
    "end": "347000"
  },
  {
    "text": "you even start thinking about what its gonna look like decide what are you trying to solve because once you have",
    "start": "351560",
    "end": "356990"
  },
  {
    "text": "that down you can build the right product so what are the requirements for ingesting this video the first step is",
    "start": "356990",
    "end": "364940"
  },
  {
    "text": "it has to be very low latency we quantify this as 50 milliseconds or less and that's crucial for us I'll talk",
    "start": "364940",
    "end": "373880"
  },
  {
    "text": "about that more in a minute the next thing in justice requirement is that gamers are everywhere we have users",
    "start": "373880",
    "end": "380989"
  },
  {
    "text": "throughout United States all throughout Europe giant pool in Korea and then Latin America as well but they're really",
    "start": "380989",
    "end": "388009"
  },
  {
    "text": "global so if we want someone in Korea to be able to fight someone in North Kerala",
    "start": "388009",
    "end": "393439"
  },
  {
    "text": "for Nia or Carolina we need to have super low latency and it needs to be everywhere",
    "start": "393439",
    "end": "399069"
  },
  {
    "text": "next thing is that gamers when they play they just play for a long amount of time I don't know",
    "start": "399069",
    "end": "404809"
  },
  {
    "text": "finish your gamers but when I play I play for hours and hours and hours on end and that's kind of the norm so we",
    "start": "404809",
    "end": "412909"
  },
  {
    "text": "need to be able to handle not just a lot of video fast from everywhere we need to have it super stable you can't lose that",
    "start": "412909",
    "end": "419899"
  },
  {
    "text": "connection at any point so one of the so",
    "start": "419899",
    "end": "424939"
  },
  {
    "start": "422000",
    "end": "422000"
  },
  {
    "text": "I'm gonna dig in on some of these now latency why is low latency matter it",
    "start": "424939",
    "end": "430279"
  },
  {
    "text": "really has to be less than 50 milliseconds in our case the first",
    "start": "430279",
    "end": "435649"
  },
  {
    "text": "reason for that is that we do live tracking and scoring via computer vision on the video so the video comes in to",
    "start": "435649",
    "end": "441979"
  },
  {
    "text": "our servers and we use computer vision to detect in-game events and we use that to score who's winning in a head-to-head",
    "start": "441979",
    "end": "448219"
  },
  {
    "text": "match for crank David talked about this here back on Monday you can if you want more details you can watch that I'm not",
    "start": "448219",
    "end": "455269"
  },
  {
    "text": "gonna go too deep into that part of our stack because we have so many more other interesting things to talk about but for",
    "start": "455269",
    "end": "463489"
  },
  {
    "text": "that reason it has to be super real if you are playing a game and minutes later you get your score it's really awesome",
    "start": "463489",
    "end": "470089"
  },
  {
    "text": "few live it doesn't feel like you're head-to-head it's not quite as fun of the experience that little dainty",
    "start": "470089",
    "end": "477279"
  },
  {
    "text": "crucial for this live pain experience i when I'm playing a game against someone",
    "start": "477279",
    "end": "482659"
  },
  {
    "text": "and we're in the same room I can kill them in the game or beat them in whatever we're playing and I can see",
    "start": "482659",
    "end": "487879"
  },
  {
    "text": "them go ah I lost you can see an immediate reaction there's no reason we can't do that over the Internet as well",
    "start": "487879",
    "end": "493849"
  },
  {
    "text": "that's where the world is going so recreating that live playing experience is absolutely crucial",
    "start": "493849",
    "end": "501389"
  },
  {
    "text": "this is a screenshot of a very popular game sure some many of you recognize for",
    "start": "501389",
    "end": "508270"
  },
  {
    "text": "tonight and these are the pieces of information that we actually grabbed",
    "start": "508270",
    "end": "513490"
  },
  {
    "text": "from that frame and used to score so you can see on the bottom there's health there's two health bars we need to know",
    "start": "513490",
    "end": "520810"
  },
  {
    "text": "those so we can kind of tell where you are how close are you to losing or dying there's your inventory which is what",
    "start": "520810",
    "end": "527139"
  },
  {
    "text": "items do you have how likely are you to be the other person given the items that you guys both have and then there's some",
    "start": "527139",
    "end": "533139"
  },
  {
    "text": "game stats so that's how deep into the game aren't you how many people are left how many people have you killed",
    "start": "533139",
    "end": "538420"
  },
  {
    "text": "stuff like that that let's just overall get figure out how you rank as a player",
    "start": "538420",
    "end": "543880"
  },
  {
    "text": "and Matthew was other people who were at the same skill level and predict who's gonna win this is a graph of a diagram",
    "start": "543880",
    "end": "554529"
  },
  {
    "text": "of all of the regions that AWS is in as of a few days ago it's also a diagram of",
    "start": "554529",
    "end": "560680"
  },
  {
    "text": "where all of our players are uh-huh we're in every region available to us because we need to be close to these",
    "start": "560680",
    "end": "567550"
  },
  {
    "text": "people we are everywhere every availability zone every region so I",
    "start": "567550",
    "end": "575079"
  },
  {
    "start": "575000",
    "end": "575000"
  },
  {
    "text": "mentioned that when you play you play for long amounts of time I want to",
    "start": "575079",
    "end": "580329"
  },
  {
    "text": "quantify this a little bit the average game session on our platform is well over three hours that's three hours of",
    "start": "580329",
    "end": "587110"
  },
  {
    "text": "continuous video being streamed that we can't have an interruption during now that's the average there's definitely a",
    "start": "587110",
    "end": "593769"
  },
  {
    "text": "lot of outliers that are going up into the eight nine sometimes even ten hour range and that's a long amount of time",
    "start": "593769",
    "end": "599949"
  },
  {
    "text": "for you to maintain a single video stream so stability is crucial here and",
    "start": "599949",
    "end": "607410"
  },
  {
    "text": "with that stability comes the knowledge that we have enormous spikes in our",
    "start": "607410",
    "end": "612910"
  },
  {
    "text": "traffic one thing that we do is we run synchronous in real world events so",
    "start": "612910",
    "end": "618490"
  },
  {
    "text": "these are tournaments we know when these are happening and we know that every time we have a",
    "start": "618490",
    "end": "624649"
  },
  {
    "text": "term at three say at 2:30 we're gonna see an enormous ramp up in users because",
    "start": "624649",
    "end": "630350"
  },
  {
    "text": "everyone's getting ready for the tournament everyone's coming online and then right after the tournament everyone will drop off",
    "start": "630350",
    "end": "636110"
  },
  {
    "text": "there's our traffic patterns are enormous enormous spikes the other thing",
    "start": "636110",
    "end": "642379"
  },
  {
    "text": "about that is many of our audience are kids they're in school I mean is that",
    "start": "642379",
    "end": "647899"
  },
  {
    "text": "for the majority of the day they can't play video games I can't tell you video games at school but at 310 school gets",
    "start": "647899",
    "end": "654680"
  },
  {
    "text": "out everyone heads home boom immediately everyone's getting it online everyone's playing for tonight and we need to",
    "start": "654680",
    "end": "660949"
  },
  {
    "text": "expect that enormous spike so we need to be able to handle spikes in traffic",
    "start": "660949",
    "end": "665990"
  },
  {
    "text": "without compromising the stability of our platform animosity gamer rage huh",
    "start": "665990",
    "end": "673939"
  },
  {
    "text": "it's become a hallowed name in our company because gamers debt very unhappy",
    "start": "673939",
    "end": "679850"
  },
  {
    "text": "when something breaks in the middle of their game a lot of times like I said they're in these real tournaments you're",
    "start": "679850",
    "end": "685730"
  },
  {
    "text": "in the middle of competition your head-to-head your second or first place if suddenly you look over and you see that beer broke your points aren't being",
    "start": "685730",
    "end": "691999"
  },
  {
    "text": "counted and you lost because of that you're furious and gamers are all about",
    "start": "691999",
    "end": "697999"
  },
  {
    "text": "getting in the game and they're super high-energy super high excitement so this rage amplifies very fast you never",
    "start": "697999",
    "end": "705589"
  },
  {
    "text": "want to make a user unhappy but with gamers especially they get very very unhappy so with all these problems in",
    "start": "705589",
    "end": "712939"
  },
  {
    "text": "mind what did we do the first thing well once we have a",
    "start": "712939",
    "end": "719029"
  },
  {
    "text": "problem you got to make a solution um so the first way we did this was we do the",
    "start": "719029",
    "end": "725240"
  },
  {
    "start": "720000",
    "end": "720000"
  },
  {
    "text": "ingest of the video and the video detection on the edge so we don't send all the video to some central region",
    "start": "725240",
    "end": "731600"
  },
  {
    "text": "where we process it every region has edge locations that ingest all the video there and do all the detection on the",
    "start": "731600",
    "end": "739279"
  },
  {
    "text": "region the next part that we had to build was automated scaling so we don't scale up",
    "start": "739279",
    "end": "746070"
  },
  {
    "text": "or down as humans for these tournaments or for these expected spikes at the end",
    "start": "746070",
    "end": "751290"
  },
  {
    "text": "of the day we have software that does it for us and this I'll talk about that",
    "start": "751290",
    "end": "756690"
  },
  {
    "text": "more in a little bit but what this software essentially does is it's gonna bring up new instances when we expect or",
    "start": "756690",
    "end": "762840"
  },
  {
    "text": "in the middle of high traffic high load situations and then it will quickly ramp",
    "start": "762840",
    "end": "768120"
  },
  {
    "text": "down because otherwise we'll be stuck at these high high marks and to be wasting",
    "start": "768120",
    "end": "774180"
  },
  {
    "text": "just money and the last thing and this ties into the stability part of it is we",
    "start": "774180",
    "end": "781260"
  },
  {
    "text": "need to have direct connectivity when you're have these long running streams any additional hop in the network layer",
    "start": "781260",
    "end": "788130"
  },
  {
    "text": "is a potential case for failure so we connect users directly to the box that",
    "start": "788130",
    "end": "793500"
  },
  {
    "text": "is ingesting their video there's no proxy nor anything which allows us to",
    "start": "793500",
    "end": "798980"
  },
  {
    "text": "maintain longer higher quality streams so I have set out this what the problem",
    "start": "798980",
    "end": "805410"
  },
  {
    "text": "is what the solution is I'm gonna show you what it actually looks like so here we have a challenger they're playing a",
    "start": "805410",
    "end": "812880"
  },
  {
    "start": "809000",
    "end": "809000"
  },
  {
    "text": "game they're streaming on our platform we use WebRTC as our video video",
    "start": "812880",
    "end": "819120"
  },
  {
    "text": "communication framework so WebRTC stands for web real-time communication it has a",
    "start": "819120",
    "end": "826590"
  },
  {
    "text": "bunch of benefits it's usable in a bunch of different scenarios and delivers high",
    "start": "826590",
    "end": "832050"
  },
  {
    "text": "quality video very fast and we ingest this video on the server using t-shirt gstreamer again amazing an amazing tool",
    "start": "832050",
    "end": "840000"
  },
  {
    "text": "it's a video framework that builds pipelines and it's incredibly extensible",
    "start": "840000",
    "end": "845310"
  },
  {
    "text": "we use it for a bunch of different things on the video side and it's an amazing tool I leave at bat",
    "start": "845310",
    "end": "851820"
  },
  {
    "text": "and once gstreamer has this video we do the detection by sending the stage maker",
    "start": "851820",
    "end": "857430"
  },
  {
    "text": "so gstreamer takes one frame every second of normally a 60 or 30 frames per",
    "start": "857430",
    "end": "862950"
  },
  {
    "text": "second stream and it takes this frame here it's an image now and it sends this",
    "start": "862950",
    "end": "868800"
  },
  {
    "text": "frame to Amazon see driver where we do detection to the oh did a killer happen here oh did you",
    "start": "868800",
    "end": "874709"
  },
  {
    "text": "die here oh did some other event happen like maybe you're in some special place we need to do some other action and it",
    "start": "874709",
    "end": "880829"
  },
  {
    "text": "sends all this data into the rest of our stack to contribute to our scoring while",
    "start": "880829",
    "end": "886860"
  },
  {
    "text": "the video is streaming we actually want to keep that video around so asynchronously we take this live video",
    "start": "886860",
    "end": "894300"
  },
  {
    "text": "and we chunk it into two to three second chunks and we ship that to s3 the reason",
    "start": "894300",
    "end": "901170"
  },
  {
    "text": "for this is in the future we might want to show that video players after they play the game might want to watch how",
    "start": "901170",
    "end": "907709"
  },
  {
    "text": "they did and watch how their opponent did and stripping it straight to s3 in these chunks allows for immediate HLS",
    "start": "907709",
    "end": "913740"
  },
  {
    "text": "streaming so we have the live component and then we have immediate history so we",
    "start": "913740",
    "end": "920339"
  },
  {
    "text": "can watch it in the future one of the other beauties of using WebRTC and",
    "start": "920339",
    "end": "925709"
  },
  {
    "text": "gstreamer together is it's not just where you can push to you can actually pull from it as well so if you're",
    "start": "925709",
    "end": "931889"
  },
  {
    "text": "playing a game and your opponent wants to watch your video they can pull directly from GStreamer using WebRTC and",
    "start": "931889",
    "end": "938190"
  },
  {
    "text": "display it in their app and this is not just one viewer this is potentially end",
    "start": "938190",
    "end": "944250"
  },
  {
    "text": "users and it's super light on the server because this isn't decoding Andry encoding the video it's",
    "start": "944250",
    "end": "951600"
  },
  {
    "text": "actually just relaying it through with in WebRTC Mg sure we've gotten pretty",
    "start": "951600",
    "end": "958800"
  },
  {
    "text": "high quality using this we can consistently do 1080p 60fps streams",
    "start": "958800",
    "end": "963930"
  },
  {
    "text": "which is on the upper end we wanted to use 4k haven't quite gotten there yet",
    "start": "963930",
    "end": "969000"
  },
  {
    "text": "but 1080 60 is our average video quality",
    "start": "969000",
    "end": "976279"
  },
  {
    "text": "so let's talk more about this in Bound video web park you see I mentioned it a",
    "start": "976279",
    "end": "981899"
  },
  {
    "start": "978000",
    "end": "978000"
  },
  {
    "text": "few times but it's an amazing tool one of the benefits of it is that it's a web framework what this means is that it's",
    "start": "981899",
    "end": "988889"
  },
  {
    "text": "not just we can use it in frame in the browser we can also use it on mobile so",
    "start": "988889",
    "end": "994110"
  },
  {
    "text": "it's supported both iOS and Android most modern browsers we can use it on consoles a lot of",
    "start": "994110",
    "end": "1000970"
  },
  {
    "text": "gamers don't you don't pay em PC they play on Xbox or Playstation or some other switch I think is here somewhere",
    "start": "1000970",
    "end": "1008650"
  },
  {
    "text": "and we can web they all support WebRTC so we can actually do the video encoding",
    "start": "1008650",
    "end": "1014710"
  },
  {
    "text": "and inject and sending using this one framework across all these different platforms it's also on desktop so we use",
    "start": "1014710",
    "end": "1022420"
  },
  {
    "text": "it in a desktop app that we've built and it's beautiful because we can just use the same codebase across all these",
    "start": "1022420",
    "end": "1028150"
  },
  {
    "text": "different systems I refer to GM earlier",
    "start": "1028150",
    "end": "1033790"
  },
  {
    "text": "as our video framework I'm gonna call it here actually our video router it takes in all this video and the beauty of it",
    "start": "1033790",
    "end": "1040780"
  },
  {
    "text": "is it's credibly extensible so we've built custom GStreamer libraries and",
    "start": "1040780",
    "end": "1045850"
  },
  {
    "text": "plugins and all these things on top of it that allow us to do all these things",
    "start": "1045850",
    "end": "1051190"
  },
  {
    "text": "that we want with video that's splitting off into WebRTC back into s3 chunking and sage maker all happens in one",
    "start": "1051190",
    "end": "1059440"
  },
  {
    "text": "pipeline it's incredibly useful tool it's open source - you should check it out if you're interested in video at all",
    "start": "1059440",
    "end": "1064510"
  },
  {
    "text": "and lastly we went with tcp-based video this is somewhat of a different decision",
    "start": "1064510",
    "end": "1073480"
  },
  {
    "text": "than most people most people use UDP video the reason we went for a TCP in",
    "start": "1073480",
    "end": "1078550"
  },
  {
    "text": "this case which is supporting WebRTC is we noticed slightly longer latency but",
    "start": "1078550",
    "end": "1086050"
  },
  {
    "text": "the it's possible that the benefit of TCP is that when you drop a packet or",
    "start": "1086050",
    "end": "1091360"
  },
  {
    "text": "there's a issue sending that video we can retry and the video doesn't stutter",
    "start": "1091360",
    "end": "1096400"
  },
  {
    "text": "as much so we generally saw a better video quality using TCP talked about",
    "start": "1096400",
    "end": "1102490"
  },
  {
    "text": "getting the video in let's talk about sandies video out to the different places so I've talked about this uh viewers pulling this live feed the",
    "start": "1102490",
    "end": "1111040"
  },
  {
    "text": "beauty here really is this relays we used to before we use WebRTC we went",
    "start": "1111040",
    "end": "1116710"
  },
  {
    "text": "with an rtmp based approach and we had to decode and then Rhian code all the video on the server there was a major",
    "start": "1116710",
    "end": "1124060"
  },
  {
    "text": "issue with this first of all that the video quality got lesser every time and second of all it was really heavy on",
    "start": "1124060",
    "end": "1130090"
  },
  {
    "text": "the CPU of the box we could have maybe one or two people on an instance and when you have thousands expected during",
    "start": "1130090",
    "end": "1136960"
  },
  {
    "text": "peak hours you can't do that you can't have that you can't have two people per box and",
    "start": "1136960",
    "end": "1143549"
  },
  {
    "text": "thousands of boxes to maintain any cost efficiency since they can pull it though",
    "start": "1143549",
    "end": "1150520"
  },
  {
    "text": "WebRTC if shreelane and it's much lighter on the client and it's real-time detection this is very much real time I",
    "start": "1150520",
    "end": "1158020"
  },
  {
    "text": "don't member the exactly and see stats but seen it for cons presentation the end to end you send this video up from",
    "start": "1158020",
    "end": "1165760"
  },
  {
    "text": "the client the person gets a kill in game and then you see the action being of action in the app very fast and stage",
    "start": "1165760",
    "end": "1173350"
  },
  {
    "text": "maker allows to do that it's great tool and then this async recording for the future so this is the three places we",
    "start": "1173350",
    "end": "1179890"
  },
  {
    "text": "send the video out to for different reasons all through the beauty of WebRTC GStreamer and some smart engineering so",
    "start": "1179890",
    "end": "1189070"
  },
  {
    "text": "we've laid out a pretty good designs pretty solid have gone through a fair amount of the requirements how do we",
    "start": "1189070",
    "end": "1194590"
  },
  {
    "text": "actually make this happen so what's it look like in our production environment first thing we're gonna talk",
    "start": "1194590",
    "end": "1201549"
  },
  {
    "text": "about is we made this project called Stark this is my child I love this",
    "start": "1201549",
    "end": "1207730"
  },
  {
    "text": "project it's the biggest thing I've worked on it for the past couple months and it's our autoscaler so this is that",
    "start": "1207730",
    "end": "1214059"
  },
  {
    "text": "project that will scale instances up and down according to use and we built this",
    "start": "1214059",
    "end": "1219309"
  },
  {
    "text": "custom this so again when we're thinking about how to fix our problem we got to talk about what are the requirements",
    "start": "1219309",
    "end": "1224710"
  },
  {
    "text": "here so the requirements for Stark the first of them is it has to be a hundred percent automated 100 percent robot is",
    "start": "1224710",
    "end": "1231700"
  },
  {
    "text": "your percent human we echoed that phrase a lot the reason for this is we first",
    "start": "1231700",
    "end": "1236860"
  },
  {
    "text": "started it was 99 percent robot we had systems like that and one percent human",
    "start": "1236860",
    "end": "1242049"
  },
  {
    "text": "every once in a while someone would have to go in and type a command and make a process go all the way through we're",
    "start": "1242049",
    "end": "1248230"
  },
  {
    "text": "real at but I realized if you're doing that once a day and you have a hundred users sudden you get to hundreds of",
    "start": "1248230",
    "end": "1254200"
  },
  {
    "text": "thousands of users yes it's taking more and more of your time anything that a human does actually robot will be able to do scale",
    "start": "1254200",
    "end": "1261029"
  },
  {
    "text": "much better anything as human we have to remove from the entire process we went",
    "start": "1261029",
    "end": "1267029"
  },
  {
    "text": "super deep on this in fact there were times that we would bring up a whole",
    "start": "1267029",
    "end": "1272039"
  },
  {
    "text": "system it would take be an entire vbc or entire region it would take a long time",
    "start": "1272039",
    "end": "1277409"
  },
  {
    "text": "300 cent automated and it's very end there be one little thing that's different I would have to SSH on to a",
    "start": "1277409",
    "end": "1283230"
  },
  {
    "text": "box run the command or something and if I had to do that I would delete the entire thing start over if I have to do",
    "start": "1283230",
    "end": "1289590"
  },
  {
    "text": "that human action it's wrong we need to make that a robot action instead the",
    "start": "1289590",
    "end": "1295649"
  },
  {
    "text": "next thing that Stark does is we do philosophy based auto-scaling this is a really cool feature that very",
    "start": "1295649",
    "end": "1302519"
  },
  {
    "text": "proud of home basically what it means is that we don't go off of how many users",
    "start": "1302519",
    "end": "1308070"
  },
  {
    "text": "are on we go off of the rate of change of how fast our users joining so if we normally have say 100 users joining in",
    "start": "1308070",
    "end": "1315809"
  },
  {
    "text": "an hour if we noticed that suddenly there's 200-300 thousand users join in",
    "start": "1315809",
    "end": "1320850"
  },
  {
    "text": "an hour that means not only obviously our stack our load is going up we need to comp in over compensate for the next",
    "start": "1320850",
    "end": "1327749"
  },
  {
    "text": "we need to overshoot for the next iteration so we'll bring up even more than we think we need just in case this",
    "start": "1327749",
    "end": "1333080"
  },
  {
    "text": "continues and this goes both ways this is predictive as well so we look",
    "start": "1333080",
    "end": "1340049"
  },
  {
    "text": "over past history we look at oh at 310 every day we have these spikes that",
    "start": "1340049",
    "end": "1345690"
  },
  {
    "text": "means at 310 every day or at 3 every day we should start scaling up and we see oh every day at 5 or 6 their parents",
    "start": "1345690",
    "end": "1352470"
  },
  {
    "text": "realized they're playing for tonight for the past few hours they the kids need to stop playing games they go do their homework we have this giant drop-off we",
    "start": "1352470",
    "end": "1359700"
  },
  {
    "text": "can analyze this and starkville analyzes pattern notice oh at 5 we can start",
    "start": "1359700",
    "end": "1364830"
  },
  {
    "text": "scaling down a bit a little bit more aggressively so as to save money and last thing is problems need to fix",
    "start": "1364830",
    "end": "1371580"
  },
  {
    "text": "ourself themselves since we're in 15 different V pcs if there's a problem in",
    "start": "1371580",
    "end": "1376919"
  },
  {
    "text": "what in a motor pool and someone has to go in and fix it if this is happening multiple times a day if there's",
    "start": "1376919",
    "end": "1383039"
  },
  {
    "text": "happening late at night someone's not around a problem we can't just happen so the",
    "start": "1383039",
    "end": "1388860"
  },
  {
    "text": "way we design Starck is that it needs to be able to take issue boxes or issues in",
    "start": "1388860",
    "end": "1395010"
  },
  {
    "text": "our architecture and compensate for them I'll talk about that more a little bit in detail in another slide there's a few",
    "start": "1395010",
    "end": "1403800"
  },
  {
    "text": "constraints that we had while talking about thinking about how do we build Starck we always need an available server I",
    "start": "1403800",
    "end": "1410370"
  },
  {
    "text": "mean is we can never be under provision ever if a user tries to stream if the",
    "start": "1410370",
    "end": "1415740"
  },
  {
    "text": "user tries to use our app and they see loading or they play and they see that they've caught their kills or scored in",
    "start": "1415740",
    "end": "1421590"
  },
  {
    "text": "a track that they're very unhappy this ties back to that gamer rage I was talking about earlier",
    "start": "1421590",
    "end": "1427350"
  },
  {
    "text": "they are infuriated we can't ever have not we can never have not enough servers",
    "start": "1427350",
    "end": "1433490"
  },
  {
    "text": "my video is very fragile so we can't accidentally scale down cue heavily if",
    "start": "1433490",
    "end": "1440040"
  },
  {
    "text": "we accidentally stop a instance that has video going to it the connection drops",
    "start": "1440040",
    "end": "1445110"
  },
  {
    "text": "it's hard to reconnect that without any issues they could have some killer play one of the biggest streamers could come",
    "start": "1445110",
    "end": "1451800"
  },
  {
    "text": "online at that moment and get 20 kills some crazy thing and if we miss it because we scaled down too fast we're",
    "start": "1451800",
    "end": "1459360"
  },
  {
    "text": "gonna be in trouble and lastly this is kind of a softer constraint this was",
    "start": "1459360",
    "end": "1464820"
  },
  {
    "text": "only me um we had one engineer on this which meant that we had to do it right",
    "start": "1464820",
    "end": "1471450"
  },
  {
    "text": "we had to figure out all the problems on the onset and we had to have this",
    "start": "1471450",
    "end": "1477450"
  },
  {
    "text": "automation we had to make this code deployable we had to have good revision history we have tests there was very",
    "start": "1477450",
    "end": "1483630"
  },
  {
    "text": "little leeway so this is the overall",
    "start": "1483630",
    "end": "1488940"
  },
  {
    "start": "1487000",
    "end": "1487000"
  },
  {
    "text": "bird's-eye view architecture of stark it lives on an ec2 instance within a VDC",
    "start": "1488940",
    "end": "1494640"
  },
  {
    "text": "and it manages three different states of boxes the first is healthy these boxes",
    "start": "1494640",
    "end": "1500370"
  },
  {
    "text": "are healthy boxes in a SS standards so they're running in a OS ec2 console",
    "start": "1500370",
    "end": "1507500"
  },
  {
    "text": "they're passing all their status checks and the actual service health check is passing as well for",
    "start": "1507500",
    "end": "1513280"
  },
  {
    "text": "the next is full are instances report",
    "start": "1513280",
    "end": "1518500"
  },
  {
    "text": "helpful they are if they can take more load or not and if they're full we don't want to out traffic to them we want to",
    "start": "1518500",
    "end": "1524200"
  },
  {
    "text": "categorize that as a separate type of box then lastly unhealthy for whatever",
    "start": "1524200",
    "end": "1529300"
  },
  {
    "text": "reason these boxes are not happy they're not playing nice maybe their service",
    "start": "1529300",
    "end": "1534370"
  },
  {
    "text": "health check is Pat isn't passing their load on the box CPU is too high they're",
    "start": "1534370",
    "end": "1539710"
  },
  {
    "text": "not reaching reachable in AWS it could be a number of things but whatever it is these are the three in types of",
    "start": "1539710",
    "end": "1547360"
  },
  {
    "text": "instances that we need to think about and care about from starts perspective so what exactly does stark do and its",
    "start": "1547360",
    "end": "1555550"
  },
  {
    "start": "1552000",
    "end": "1552000"
  },
  {
    "text": "normal iteration the first thing it's going to do is it's going to fetch the ec2 and the health state this consists",
    "start": "1555550",
    "end": "1562870"
  },
  {
    "text": "of a bottle of three described instances call as well as reading from external",
    "start": "1562870",
    "end": "1568930"
  },
  {
    "text": "data source as to the service health check I'll talk about that more in a minute",
    "start": "1568930",
    "end": "1573990"
  },
  {
    "text": "next is main goal is route traffic to healthy instances and only healthy instances healthiness is mean I can take",
    "start": "1573990",
    "end": "1581800"
  },
  {
    "text": "another user I can do more operations if it's not that we don't want to send more traffic to it and last managed scalene",
    "start": "1581800",
    "end": "1589090"
  },
  {
    "text": "object if a healthy box goes to a full state we need to bring up more healthy boxes if a full box goes to a healthy",
    "start": "1589090",
    "end": "1595630"
  },
  {
    "text": "state they gonna slow it down a little bit we have a little bit more than we need so what this looks like in a",
    "start": "1595630",
    "end": "1603700"
  },
  {
    "start": "1601000",
    "end": "1601000"
  },
  {
    "text": "workflow the actual workflow that start goes through looks like this we use sed which is a database key value",
    "start": "1603700",
    "end": "1611350"
  },
  {
    "text": "store with watches and some other nice features and we store all the instance",
    "start": "1611350",
    "end": "1617590"
  },
  {
    "text": "of the sorry the service health state in that database star reads from that and",
    "start": "1617590",
    "end": "1623050"
  },
  {
    "text": "that's how it determines how healthy an instance is and it reads from the AWS ap is this mannequin this is an ec2 but it",
    "start": "1623050",
    "end": "1629920"
  },
  {
    "text": "also is route 53 as start manages to routing and create some deletes DNS records - it's sending all this",
    "start": "1629920",
    "end": "1639120"
  },
  {
    "text": "information in the Stark and one Stark has it it's going to do an action it's",
    "start": "1639120",
    "end": "1644170"
  },
  {
    "text": "going to write it's going do an action to ec2 or about 53 an easy cure this would mean starting up or",
    "start": "1644170",
    "end": "1650690"
  },
  {
    "text": "stopping or terminating an instance in grab three to three this would mean creative deleting a DNS record so I",
    "start": "1650690",
    "end": "1660170"
  },
  {
    "start": "1658000",
    "end": "1658000"
  },
  {
    "text": "mentioned that start gets this ec2 state information what's that what's the actual information that we care about here the first is its state so this is",
    "start": "1660170",
    "end": "1668900"
  },
  {
    "text": "is it running as it stopped is a terminating we need to know this obviously we don't want to route traffic",
    "start": "1668900",
    "end": "1674180"
  },
  {
    "text": "to a box that he doesn't may be running in any code that doesn't make any sense and then minutiae here is that there's a",
    "start": "1674180",
    "end": "1682370"
  },
  {
    "text": "pending states we need to know if it's going from a if we're creating a box we",
    "start": "1682370",
    "end": "1687650"
  },
  {
    "text": "need to know if we're stopping the box the reason this matters is when we're",
    "start": "1687650",
    "end": "1692990"
  },
  {
    "text": "doing our logic it's possible for an instance to take more time than one iteration of this of start will take to",
    "start": "1692990",
    "end": "1699740"
  },
  {
    "text": "complete its action there's a inherit race condition thereof if you start",
    "start": "1699740",
    "end": "1705020"
  },
  {
    "text": "creating five boxes and in the next iteration you see oh there's no boxes that are healthy create five more next",
    "start": "1705020",
    "end": "1711290"
  },
  {
    "text": "iteration oh create five more suddenly you've 3x how many you actually want to create because you're not compensating",
    "start": "1711290",
    "end": "1716570"
  },
  {
    "text": "for the boxes that are in the middle of an action they're not they're pending this applies between all state changes",
    "start": "1716570",
    "end": "1723320"
  },
  {
    "text": "in ec2 and lastly there's some meta information we need to know the public",
    "start": "1723320",
    "end": "1728660"
  },
  {
    "text": "IP address or the private IP address of an instance house we're going to create DNS records that route to it we need to",
    "start": "1728660",
    "end": "1734720"
  },
  {
    "text": "know some tags as well that we put on the instance that tell us what software is running and other information that we",
    "start": "1734720",
    "end": "1740360"
  },
  {
    "text": "use there once it has this eg - state we",
    "start": "1740360",
    "end": "1745850"
  },
  {
    "start": "1743000",
    "end": "1743000"
  },
  {
    "text": "need to determine the actual health of the instance the way it does that we run all of our code in docker containers and",
    "start": "1745850",
    "end": "1751730"
  },
  {
    "text": "we leverage the docker health checks on the instance so Stark will pull the",
    "start": "1751730",
    "end": "1756800"
  },
  {
    "text": "docker he'll checks of every instance of every sort of every container running on every instance",
    "start": "1756800",
    "end": "1761840"
  },
  {
    "text": "and report a full state this gives us not just is it healthy or not this gives",
    "start": "1761840",
    "end": "1767179"
  },
  {
    "text": "us some more information so capacity and load how full are we can we be stopped",
    "start": "1767179",
    "end": "1772700"
  },
  {
    "text": "some services they can be stopped even if they have a user on them they'll reconnect perfectly there's no problem",
    "start": "1772700",
    "end": "1778789"
  },
  {
    "text": "some can we want to leave that in the application realm they can decide decisions like that and then we take",
    "start": "1778789",
    "end": "1786289"
  },
  {
    "text": "these ec2 status checks in and we merge these two pieces of information if either one of these is failing if the",
    "start": "1786289",
    "end": "1792230"
  },
  {
    "text": "box is terminated but status checks your reporting healthy it's an unhealthy box if a container isn't running that we",
    "start": "1792230",
    "end": "1798590"
  },
  {
    "text": "expect to be but the instance is running it's an unhealthy box and lastly is DNS",
    "start": "1798590",
    "end": "1804860"
  },
  {
    "text": "for each ability since Starck creates DNS records pointing to every instance we monitor these DNS records and ping",
    "start": "1804860",
    "end": "1810890"
  },
  {
    "text": "them to make sure that we can always get in contact with every instance if we can't again on any of these three that's",
    "start": "1810890",
    "end": "1818210"
  },
  {
    "text": "an unhealthy case we need to mark this box is unhealthy I mentioned a few times",
    "start": "1818210",
    "end": "1824480"
  },
  {
    "start": "1822000",
    "end": "1822000"
  },
  {
    "text": "Starck does Riley I creates DNS records there's two layers of routing we do the",
    "start": "1824480",
    "end": "1831200"
  },
  {
    "text": "first of them is we do latency based routing to the region this is a future",
    "start": "1831200",
    "end": "1836779"
  },
  {
    "text": "in route 53 highly recommend just great feature but it basically means that will",
    "start": "1836779",
    "end": "1841909"
  },
  {
    "text": "create a DNS record pointing to a set of instances and route 53 will handle the",
    "start": "1841909",
    "end": "1848750"
  },
  {
    "text": "latency based routing to make sure you get to the post aspossible region close as possible availability zone via",
    "start": "1848750",
    "end": "1855470"
  },
  {
    "text": "latency once you've decided it once you're routed to one region there's a",
    "start": "1855470",
    "end": "1860779"
  },
  {
    "text": "brand a multi-value feature in grab 53 again we leveraged a lot of their tools",
    "start": "1860779",
    "end": "1866980"
  },
  {
    "text": "and that will make sure that we route you to a different box we don't want to have 10 people go live at the same time",
    "start": "1866980",
    "end": "1873049"
  },
  {
    "text": "and they all go to one instance and that instance gets overblown and it goes down and suddenly their ear adage of",
    "start": "1873049",
    "end": "1879350"
  },
  {
    "text": "different instances and we just have this collapsing effect across the entire region we need to make sure that we load",
    "start": "1879350",
    "end": "1885710"
  },
  {
    "text": "balanced randomly is how we we need to do this we need to also be",
    "start": "1885710",
    "end": "1892419"
  },
  {
    "text": "doing direct connection so we're doing this without any proxy this is all via",
    "start": "1892419",
    "end": "1898960"
  },
  {
    "text": "DNS and route 53 so I'll show you now kind of how that looks from the DNS",
    "start": "1898960",
    "end": "1904120"
  },
  {
    "text": "perspective so the first thing we're gonna create is we're going to create a video comm a record in route 53 V here's",
    "start": "1904120",
    "end": "1913840"
  },
  {
    "start": "1905000",
    "end": "1905000"
  },
  {
    "text": "for video it's the it's our ingest record this is where everyone is going to stream their video to when we have",
    "start": "1913840",
    "end": "1923500"
  },
  {
    "text": "video ingest servers in u.s. West one we use the AWS short names in our naming",
    "start": "1923500",
    "end": "1928960"
  },
  {
    "text": "schema so this video comm creates the latency based record to us W one dot V u",
    "start": "1928960",
    "end": "1935470"
  },
  {
    "text": "SW 1 V dot V will calm this means anyone in North Carolina will route here",
    "start": "1935470",
    "end": "1941380"
  },
  {
    "text": "because there's no others at this time everyone we're out here though and then this u SW want V Gore comm is a multi",
    "start": "1941380",
    "end": "1948789"
  },
  {
    "text": "value answer pointing to different instances this diagram there's only one healthy instance there could be as many",
    "start": "1948789",
    "end": "1954429"
  },
  {
    "text": "as you imagine and we name these instances off of the short name if typeof instance it is and then the",
    "start": "1954429",
    "end": "1961390"
  },
  {
    "text": "timestamp of when it was created copy you go calm as that is our website",
    "start": "1961390",
    "end": "1966690"
  },
  {
    "text": "so what happens when you create a second region say we spin up servers in Latin",
    "start": "1966690",
    "end": "1972970"
  },
  {
    "text": "America SAE one South Paulo we create SAE one video comm we have that pointing",
    "start": "1972970",
    "end": "1981100"
  },
  {
    "text": "as a multi-value answer to the one healthy and since that's their sae one the 5 6 7 8 w calm",
    "start": "1981100",
    "end": "1990490"
  },
  {
    "text": "so say one of you is here we're in Las Vegas and you want to use our platform",
    "start": "1990490",
    "end": "1996530"
  },
  {
    "text": "we have this person in Las Vegas what's the path that they go to get to a server",
    "start": "1996530",
    "end": "2002940"
  },
  {
    "text": "they're gonna go this way so they're connect they're gonna connect to Vida bebo calm as their video ingest",
    "start": "2002940",
    "end": "2010030"
  },
  {
    "text": "endpoint that's going to route them to the closest location but Las Vegas is",
    "start": "2010030",
    "end": "2017050"
  },
  {
    "text": "closest the closer to California than it is the south hallow unless you have some very strange network conditions so",
    "start": "2017050",
    "end": "2023470"
  },
  {
    "text": "you're gonna be ratted to us West one once you're there you'll be routed to the one healthy instance and since each",
    "start": "2023470",
    "end": "2029110"
  },
  {
    "text": "of these is DNS only this is only one connection this is direct connectivity straight to the box so once we have",
    "start": "2029110",
    "end": "2039460"
  },
  {
    "start": "2037000",
    "end": "2037000"
  },
  {
    "text": "instances they're healthy we know how they're healthy we know how to reach them some of them are gonna start",
    "start": "2039460",
    "end": "2045370"
  },
  {
    "text": "getting full we're gonna have users connect to them we need to actually scale up or scale down in that case so",
    "start": "2045370",
    "end": "2050740"
  },
  {
    "text": "how to start do the scaling one thing we noticed while building this is that",
    "start": "2050740",
    "end": "2056470"
  },
  {
    "text": "creating an instance takes a lot longer than it does to start an instance in our",
    "start": "2056470",
    "end": "2061510"
  },
  {
    "text": "test we saw that being a difference of as much as two minutes versus ten seconds taking two minutes to scale up",
    "start": "2061510",
    "end": "2068320"
  },
  {
    "text": "in our case is not an option we have users coming on it we like not being",
    "start": "2068320",
    "end": "2074290"
  },
  {
    "text": "available for 10 seconds means that you're losing up to 100 users potentially 10 seconds is a much more",
    "start": "2074290",
    "end": "2080740"
  },
  {
    "text": "reasonable benchmark and we can do to that velocity based scale-up were kind of prepared before as well so",
    "start": "2080740",
    "end": "2088240"
  },
  {
    "text": "how do we fix this there's two parameters that Starck takes into account when it does its scaling logic",
    "start": "2088240",
    "end": "2093610"
  },
  {
    "text": "the first of them is the minimum healthy this is the core pool that Stark is",
    "start": "2093610",
    "end": "2099220"
  },
  {
    "text": "trying to keep of healthy instances this could be one it could be two before could be hundreds but this is how many",
    "start": "2099220",
    "end": "2105580"
  },
  {
    "text": "Stark is always going to make sure it keeps this many healthy instances ready for users to router",
    "start": "2105580",
    "end": "2112000"
  },
  {
    "text": "the second frame is a little more interesting this one's min sculpt this is how many boxes we're gonna keep that",
    "start": "2112000",
    "end": "2119290"
  },
  {
    "text": "we're healthy but then we stop them the reason we're stopping them is they're a lot cheaper we don't pay for",
    "start": "2119290",
    "end": "2124510"
  },
  {
    "text": "the running hours there's still some overhead of like discs ten there's a",
    "start": "2124510",
    "end": "2130510"
  },
  {
    "text": "small amount of cost but they're much cheaper than healthy instances that are running we can keep this around as a",
    "start": "2130510",
    "end": "2137170"
  },
  {
    "text": "reserve pool and they're much faster to start once they start though they're they'll immediately go into a healthy",
    "start": "2137170",
    "end": "2142569"
  },
  {
    "text": "state so using these two parameters we can adequately configure a cluster to",
    "start": "2142569",
    "end": "2149050"
  },
  {
    "text": "have always have healthy instances and then in rare cases where we have large",
    "start": "2149050",
    "end": "2154329"
  },
  {
    "text": "spikes or in our case very common cases where you have large spikes we can compensate and last is velocity based",
    "start": "2154329",
    "end": "2162160"
  },
  {
    "text": "scaling I think I mentioned this a little bit before but this is one of the most awesome features of stark this is",
    "start": "2162160",
    "end": "2169599"
  },
  {
    "text": "this rate of change feature and this has the predictive scaling built into it",
    "start": "2169599",
    "end": "2175589"
  },
  {
    "text": "between these three features we have next next no downtime I'll give you some",
    "start": "2175589",
    "end": "2182500"
  },
  {
    "text": "exact numbers on that at the end of this so now this is how we talked about",
    "start": "2182500",
    "end": "2189400"
  },
  {
    "text": "earlier there's a healthy the unhealthy the full we're gonna add in the full and the stopped instance into this diagram",
    "start": "2189400",
    "end": "2195670"
  },
  {
    "text": "and how stark thinks about them so if there's a full instance that say there's two in this region that means that stark",
    "start": "2195670",
    "end": "2203500"
  },
  {
    "text": "isn't gonna route any traffic to it's gonna delete the DNS records that point to it then there's full of theirs for",
    "start": "2203500",
    "end": "2209829"
  },
  {
    "text": "healthy instances in this example these ones are happy it's all all green all",
    "start": "2209829",
    "end": "2215410"
  },
  {
    "text": "smiley faces everything's great gravity's gonna be routed to them this",
    "start": "2215410",
    "end": "2220750"
  },
  {
    "text": "doesn't mean that they're empty it's not full versus empty it's kind of a thing",
    "start": "2220750",
    "end": "2225819"
  },
  {
    "text": "that we had to get over in our heads but some of these boxes could be 60% full but they're reporting it they can still",
    "start": "2225819",
    "end": "2232119"
  },
  {
    "text": "take on more load then there's these pending instances I talked about they have a two-minute",
    "start": "2232119",
    "end": "2239369"
  },
  {
    "text": "timeout so if a box is we've said to create a box and it's taken more than two minutes something's not quite right",
    "start": "2239369",
    "end": "2246000"
  },
  {
    "text": "with this box if we've said to stop this box and it's taken more than two minutes this is unexpected this is an outlier",
    "start": "2246000",
    "end": "2252869"
  },
  {
    "text": "this is not something we want to have in our stack which is designed to be very real time so if it's more than two",
    "start": "2252869",
    "end": "2258450"
  },
  {
    "text": "minutes we just terminate the instance we've delayed DNS records to make sure it's unwrapped it's completely gone then",
    "start": "2258450",
    "end": "2265740"
  },
  {
    "text": "there's this stop spool as a baseline we keep our half of the healthy number around this obviously changes via",
    "start": "2265740",
    "end": "2273869"
  },
  {
    "text": "velocity based scaling in some cases this whole catapult way higher and then it's also configurable if you need a",
    "start": "2273869",
    "end": "2280140"
  },
  {
    "text": "different baseline because different clusters need different things and",
    "start": "2280140",
    "end": "2285150"
  },
  {
    "text": "lastly there's these unhealthy boxes they also have a two-minute timeout the box cannot become healthy within two",
    "start": "2285150",
    "end": "2291299"
  },
  {
    "text": "minutes straight to the chopper terminate it",
    "start": "2291299",
    "end": "2296059"
  },
  {
    "start": "2296000",
    "end": "2296000"
  },
  {
    "text": "so some details on how stark is created how it's written it's written in Python",
    "start": "2296520",
    "end": "2301950"
  },
  {
    "text": "3 uses the bottom of 3 SDK to communicate with ec2 and wrap 53:8 OSAP",
    "start": "2301950",
    "end": "2309450"
  },
  {
    "text": "is it runs in a docker container all of our code runs as docker containers big",
    "start": "2309450",
    "end": "2315300"
  },
  {
    "text": "fan of docker at Bebo and it's installed by terraform every visual terraform is a",
    "start": "2315300",
    "end": "2322140"
  },
  {
    "text": "great tool that we use to bring up our region's automatically so this is how we automated this region skaila",
    "start": "2322140",
    "end": "2328440"
  },
  {
    "text": "this region creation process and if the only the only thing that terraform",
    "start": "2328440",
    "end": "2334860"
  },
  {
    "text": "really does is create an instance install Starke on it and let's Stark run Starck brings up the some of the rest of",
    "start": "2334860",
    "end": "2342450"
  },
  {
    "text": "our architecture I realize I was defusing pick it up all of it some uh-huh so how did we do but we've",
    "start": "2342450",
    "end": "2351780"
  },
  {
    "text": "been using this for a few months now Starck manages not just our video ingest but all of our architecture across our",
    "start": "2351780",
    "end": "2358890"
  },
  {
    "text": "dev staging and production environments so how did this how's it go",
    "start": "2358890",
    "end": "2364170"
  },
  {
    "text": "let's see some results right now we ingest 30 terabytes of video every day",
    "start": "2364170",
    "end": "2369950"
  },
  {
    "text": "this is across 15 regions and this is",
    "start": "2369950",
    "end": "2375210"
  },
  {
    "text": "star daily ingest via this strategy this is for us a very low number still we",
    "start": "2375210",
    "end": "2381030"
  },
  {
    "text": "want to scale this up quite a bit more as our company grows but it's not an",
    "start": "2381030",
    "end": "2386070"
  },
  {
    "text": "unimpressive metric we're in 15 regions worldwide I believe that's all the ones",
    "start": "2386070",
    "end": "2392790"
  },
  {
    "text": "that are available to us right now bahrain maybe one or two and we'll go to",
    "start": "2392790",
    "end": "2399180"
  },
  {
    "text": "more as more gamers pop up there lastly we've had an 83% cost reduction by",
    "start": "2399180",
    "end": "2405510"
  },
  {
    "text": "employing Stark in our stack previously we had a different auto scale software that we've gone through a few deviations",
    "start": "2405510",
    "end": "2412200"
  },
  {
    "text": "on we had humans predicting oh we know that determines gonna start at 3 that's",
    "start": "2412200",
    "end": "2417690"
  },
  {
    "text": "scale up at 2:30 manually people would forget scale down afterwards we'd waste",
    "start": "2417690",
    "end": "2423360"
  },
  {
    "text": "exorbitant amounts of money every day but by using this automated infrastructure we're able to achieve all",
    "start": "2423360",
    "end": "2429390"
  },
  {
    "text": "these results in terms of connectivity so this is this DNS route en route 53",
    "start": "2429390",
    "end": "2436530"
  },
  {
    "start": "2432000",
    "end": "2432000"
  },
  {
    "text": "stuff I mentioned earlier we have around 50 milliseconds of latency for majority",
    "start": "2436530",
    "end": "2441630"
  },
  {
    "text": "for the vast majority of our users this is greater than 94% of course there's",
    "start": "2441630",
    "end": "2448350"
  },
  {
    "text": "always some weird person who's in the middle of nowhere barely has dial-up or something um they have more than 50",
    "start": "2448350",
    "end": "2455040"
  },
  {
    "text": "millisecond this is 50 millisecond end-to-end so that's I do an action on my computer someone across the world or someone",
    "start": "2455040",
    "end": "2461640"
  },
  {
    "text": "watching sees this action happen we have",
    "start": "2461640",
    "end": "2466650"
  },
  {
    "text": "sorry we have that's the one second for that live end to end we have less than 50 milliseconds of latency connecting to",
    "start": "2466650",
    "end": "2472200"
  },
  {
    "text": "our servers this less than one second is pretty good this means that if I do an",
    "start": "2472200",
    "end": "2480120"
  },
  {
    "text": "action you'll see it now so it's a little hard to have a conversation that way but you can definitely have a",
    "start": "2480120",
    "end": "2487020"
  },
  {
    "text": "synchronous social experience that way and then 92 percent of our users are",
    "start": "2487020",
    "end": "2493290"
  },
  {
    "text": "routed to the closest VPC to them again there's always edge cases there is people who have VPNs on or some strange",
    "start": "2493290",
    "end": "2500310"
  },
  {
    "text": "set up so it's not 100% but most of these numbers we can attribute to the",
    "start": "2500310",
    "end": "2506580"
  },
  {
    "text": "first and third number we can tribute to grab 53 their features are create on",
    "start": "2506580",
    "end": "2511890"
  },
  {
    "text": "this front they're being able to notice how it goes up which region I should go to all that works great in terms of",
    "start": "2511890",
    "end": "2520500"
  },
  {
    "start": "2520000",
    "end": "2520000"
  },
  {
    "text": "reliability this was a screenshot of our other name our monitoring platform one",
    "start": "2520500",
    "end": "2528360"
  },
  {
    "text": "year ago today well this week since-- was in November to the 2017 we had 20",
    "start": "2528360",
    "end": "2534120"
  },
  {
    "text": "different downtime incidents in the five day span it's in the full seven days that was 38 minutes of critical downtime",
    "start": "2534120",
    "end": "2541050"
  },
  {
    "text": "critical here meaning that users were entirely unable to use our platform",
    "start": "2541050",
    "end": "2546750"
  },
  {
    "text": "this is a screenshot of the same metric over the past month and a half on all Stark related infrastructure we've had",
    "start": "2546750",
    "end": "2552450"
  },
  {
    "text": "no down time incidents due to stark adequately provisioning for load I",
    "start": "2552450",
    "end": "2558930"
  },
  {
    "text": "remember this is in addition to an 83% cost cost reductions so it's not that is just spinning up hundreds more servers",
    "start": "2558930",
    "end": "2565590"
  },
  {
    "text": "than it needs this is intelligent scaling talking more about that",
    "start": "2565590",
    "end": "2571050"
  },
  {
    "text": "intelligent scallion this is cross avenue it's a three hour period one of",
    "start": "2571050",
    "end": "2577619"
  },
  {
    "text": "our in one of our busiest regions we had 1,000 servers peak this isn't it users",
    "start": "2577619",
    "end": "2583050"
  },
  {
    "text": "this is amount of servers that we have and there's something like 20 users per server so we have a little bit over",
    "start": "2583050",
    "end": "2592470"
  },
  {
    "text": "1,000 servers at peak in this one region alone it's how we got to thousands of",
    "start": "2592470",
    "end": "2597690"
  },
  {
    "text": "servers every day as per the name of this talk and 200 at the lower end and",
    "start": "2597690",
    "end": "2604490"
  },
  {
    "start": "2603000",
    "end": "2603000"
  },
  {
    "text": "all of this scaling from that 200 lower bound to this greater than 1000 upper",
    "start": "2604490",
    "end": "2610950"
  },
  {
    "text": "bound happens in less than 20 minutes this is due to that velocity base this",
    "start": "2610950",
    "end": "2615990"
  },
  {
    "text": "is due to having those stops instances but this is proof that very quickly we",
    "start": "2615990",
    "end": "2621420"
  },
  {
    "text": "can 5xr instances in a given region and this more than as you saw a zero",
    "start": "2621420",
    "end": "2628260"
  },
  {
    "text": "downtime this more than adequately handlers our case last thing I want to",
    "start": "2628260",
    "end": "2634440"
  },
  {
    "text": "say is a stark we use it for our video ingest it's just a great tool in general",
    "start": "2634440",
    "end": "2639510"
  },
  {
    "text": "will be open sourcing it on our github in coming weeks check it out there github Home Depot",
    "start": "2639510",
    "end": "2645990"
  },
  {
    "text": "pretty easy to remember we're gonna be open sourcing it try it let us know if",
    "start": "2645990",
    "end": "2652230"
  },
  {
    "text": "it if what you think just bound to be issues but we want to make this a product we can share with community",
    "start": "2652230",
    "end": "2659390"
  },
  {
    "text": "forgot them had a few thoughts you wanted to share now gonna stand to him mmm-hmm thanks Johnny",
    "start": "2659390",
    "end": "2665359"
  },
  {
    "start": "2660000",
    "end": "2660000"
  },
  {
    "text": "so I just have some general thoughts around some of the things that we went through",
    "start": "2665359",
    "end": "2671810"
  },
  {
    "text": "so basically for us software has replaced departments before Johnny started on ops we had a traditional ops",
    "start": "2676990",
    "end": "2682119"
  },
  {
    "text": "team kind of looking at servers we previously had our own data center and what we've realized is if we treat those",
    "start": "2682119",
    "end": "2687849"
  },
  {
    "text": "problems like software problems we're able to kind of tackle them differently and so we've taken a QA team or ops team",
    "start": "2687849",
    "end": "2693220"
  },
  {
    "text": "we've wrapped it up into software engineering and we approach the problem in the same way we create requirements",
    "start": "2693220",
    "end": "2698800"
  },
  {
    "text": "we put our code in github we tag it we deploy it we kind of have to go out we",
    "start": "2698800",
    "end": "2704170"
  },
  {
    "text": "can revert back and pretty much across the board in every department our company in marketing and Finance we put",
    "start": "2704170",
    "end": "2709420"
  },
  {
    "text": "uh software engineer there and we've basically solved all problems that asked off for problems we find talent in",
    "start": "2709420",
    "end": "2716500"
  },
  {
    "text": "unique places so we found Johnny Johnny you know ran into one of our guys was interested in what we're doing",
    "start": "2716500",
    "end": "2721990"
  },
  {
    "text": "spent time at her company we have other people that would be non-standard hires at most places and what we've done is",
    "start": "2721990",
    "end": "2728290"
  },
  {
    "text": "we're willing to give people a chance we have this concept of a green team we basically for a group of people that may",
    "start": "2728290",
    "end": "2734260"
  },
  {
    "text": "not have the resume or their credentials but they're really interested in startups they want to build software and",
    "start": "2734260",
    "end": "2739660"
  },
  {
    "text": "you know I got started really young I was I worked at a con when I was fifteen just like kind of Johnny and for me was",
    "start": "2739660",
    "end": "2745780"
  },
  {
    "text": "just like I was really passionate about this I really just wanted to build things and I don't know you can find talent and unique spots and for us it's",
    "start": "2745780",
    "end": "2753010"
  },
  {
    "text": "more important to be passionate about what you're doing you're gonna get better output you're gonna be more interested and you're actually gonna go",
    "start": "2753010",
    "end": "2758230"
  },
  {
    "text": "find the creative solutions that we need to scale up our team is small we're less than ten total engineers and so each",
    "start": "2758230",
    "end": "2763990"
  },
  {
    "text": "person is responsible for a lot and they got to approach it creatively and so when you find people that are passionate I'm really interested in they really",
    "start": "2763990",
    "end": "2771040"
  },
  {
    "text": "really want to do this and that to me is like how do you get that person and put them in your company and lastly infrastructure has become",
    "start": "2771040",
    "end": "2777820"
  },
  {
    "text": "ridiculously easy I mean Amazon everything that they're releasing everything that we're working with it's no longer hey go get a rack go buy a",
    "start": "2777820",
    "end": "2785500"
  },
  {
    "text": "server go wire it up it's couple clicks couple buttons and I mean everything we've been able to put together it's",
    "start": "2785500",
    "end": "2791710"
  },
  {
    "text": "just I'm constantly fascinated by how fast things have gotten and I remember ten years ago and how slow it was and",
    "start": "2791710",
    "end": "2798520"
  },
  {
    "text": "you know oh man scale and you're breaking and you don't have the kind of resources and now pretty much everything",
    "start": "2798520",
    "end": "2804220"
  },
  {
    "text": "is there and I would kind of go out and kind of find that and so those are just my thoughts I think Johnny wanted to",
    "start": "2804220",
    "end": "2810130"
  },
  {
    "text": "finish yeah last thing I wanted to say this is",
    "start": "2810130",
    "end": "2816619"
  },
  {
    "text": "my first talk first my conference that I'm speaking at tell me how I did haha",
    "start": "2816619",
    "end": "2822650"
  },
  {
    "start": "2821000",
    "end": "2821000"
  },
  {
    "text": "you can text this number if you want just give you some general feedback you'll have to you can um keep in touch",
    "start": "2822650",
    "end": "2829369"
  },
  {
    "text": "you know and that's it thank you for listening to us we're gonna take",
    "start": "2829369",
    "end": "2835340"
  },
  {
    "text": "questions now you lot you learn never to",
    "start": "2835340",
    "end": "2840740"
  },
  {
    "text": "put your phone number on the screen again after that it's a Google Voice so",
    "start": "2840740",
    "end": "2846109"
  },
  {
    "text": "we're taking hello there we go so we're",
    "start": "2846109",
    "end": "2851390"
  },
  {
    "text": "taking questions to slide out are there questions up in slide oh now here we go you're lots of questions so can you kind",
    "start": "2851390",
    "end": "2860510"
  },
  {
    "text": "of explain how you're different than twitch how you're you don't do what search does you enhance it to its",
    "start": "2860510",
    "end": "2865609"
  },
  {
    "text": "experience to talk a little bit about that yeah so basically twitch what their goal is entertainment you play this",
    "start": "2865609",
    "end": "2870920"
  },
  {
    "text": "video game you want to have other people watch with you and follow along your journey but we created was recreational",
    "start": "2870920",
    "end": "2876380"
  },
  {
    "text": "eSports think about it like Little League or kind of intramurals and right now eSports has grown a lot it's gotten",
    "start": "2876380",
    "end": "2881810"
  },
  {
    "text": "hyped and really they focused on the top like the thousand pro players in the pro scene and then you're playing the game",
    "start": "2881810",
    "end": "2887630"
  },
  {
    "text": "there's nobody in the middle when you think about other sports like basketball it's not NBA in your backyard you have",
    "start": "2887630",
    "end": "2893750"
  },
  {
    "text": "literally you have high school you have college of intramurals you have 24-hour Fitness you have rec leagues so all of",
    "start": "2893750",
    "end": "2899900"
  },
  {
    "text": "that is kind of what we looked at for eSports and our job is not for you to broadcast a thousands of viewers if you",
    "start": "2899900",
    "end": "2905390"
  },
  {
    "text": "play competitively and your opponents or your friends can watch you kind of compete in that and so that's how we're",
    "start": "2905390",
    "end": "2910460"
  },
  {
    "text": "different than Twitch uh how do you synchronize players to play on the same game so we don't we actually let you",
    "start": "2910460",
    "end": "2916490"
  },
  {
    "text": "play whenever you want the idea is you can play in your bedroom and you can start asynchronously we use time",
    "start": "2916490",
    "end": "2921589"
  },
  {
    "text": "shifting and kind of a little bit of intelligence around video and saying okay you started at minute one and you",
    "start": "2921589",
    "end": "2926599"
  },
  {
    "text": "started at minutes three and we're gonna make it feel like it happened at the same time and so we actually wanted everybody you know to play on their own",
    "start": "2926599",
    "end": "2933290"
  },
  {
    "text": "time and not have to wait around and say hey okay are you ready you're not ready are you ready you're not ready and we",
    "start": "2933290",
    "end": "2938420"
  },
  {
    "text": "found out that this was one of the biggest problems of some of the other some of the other companies that were",
    "start": "2938420",
    "end": "2944090"
  },
  {
    "text": "I solved the same problem is organization forfeiting people are not showing up and we basically took all",
    "start": "2944090",
    "end": "2949310"
  },
  {
    "text": "that friction away ec2 is inexpensive but a thousand",
    "start": "2949310",
    "end": "2954440"
  },
  {
    "text": "servers that ends up getting it can get costly how do you monetize how do you make money how do you pay for this so we",
    "start": "2954440",
    "end": "2960710"
  },
  {
    "text": "don't really make money today but the company has a long history so in the mid-2000s people was a social network",
    "start": "2960710",
    "end": "2966440"
  },
  {
    "text": "that was like the myspace of Europe and it was sold to AOL for about 850 billion I'm sorry 850 million 950 billion not a",
    "start": "2966440",
    "end": "2974060"
  },
  {
    "text": "bit of better number but and Michael birch who started the original Bebo set up our company as an ideal lab where we",
    "start": "2974060",
    "end": "2980450"
  },
  {
    "text": "get to construct a team and build different ideas and what we do is you know we get to come up with an idea we",
    "start": "2980450",
    "end": "2986390"
  },
  {
    "text": "get to build it and scale it and try to get millions of users on it if it doesn't work out we go back to the drawing board we keep the team together",
    "start": "2986390",
    "end": "2992540"
  },
  {
    "text": "we keep the learnings in-house and we kind of keep going in micro funds the company and our goal is to basically",
    "start": "2992540",
    "end": "2998030"
  },
  {
    "text": "reach a mass of users and then figure out monetization strategies there currently for this product we're looking",
    "start": "2998030",
    "end": "3003940"
  },
  {
    "text": "at you know a $10 a month subscription product kind of similar to how parents pay for a little league they'll be",
    "start": "3003940",
    "end": "3009160"
  },
  {
    "text": "paying for this kind of organized eSport process so it'll be free-to-play but then there'll be some there'll be some",
    "start": "3009160",
    "end": "3014500"
  },
  {
    "text": "opportunities to kind of get into different competitions and tournaments by paying ten bucks a month what stops people from just playing a video of",
    "start": "3014500",
    "end": "3021760"
  },
  {
    "text": "ninja playing a game and claiming those stats for themselves so gamers are tricky and they're sneaky and they try",
    "start": "3021760",
    "end": "3027610"
  },
  {
    "text": "to do everything we actually inject ourselves into the game so we know what's running and what's happening so",
    "start": "3027610",
    "end": "3033610"
  },
  {
    "text": "we're basically on the on the windows clients and the Xbox clients we get ourselves into the game and we can kind",
    "start": "3033610",
    "end": "3039130"
  },
  {
    "text": "of see exactly what's going on and make sure you're playing the game and we use computer vision and some machine",
    "start": "3039130",
    "end": "3044170"
  },
  {
    "text": "learning for some anti-cheat items so we can kind of detect abnormalities of gameplay and figure that out and we're",
    "start": "3044170",
    "end": "3050020"
  },
  {
    "text": "very aggressive policy we find if you're cheating wants you off the platform forever got a nice big red button on our",
    "start": "3050020",
    "end": "3055180"
  },
  {
    "text": "desk that we just press so you don't want to mess around with us and now what about orchestration for release",
    "start": "3055180",
    "end": "3060370"
  },
  {
    "text": "deployments and rollbacks with Stark how does that work so we have a small script that basically works with Stark",
    "start": "3060370",
    "end": "3067360"
  },
  {
    "text": "it's all using docker we use docker hub and tagging so we roll out to a small",
    "start": "3067360",
    "end": "3072730"
  },
  {
    "text": "percentage of instances if we don't detect any abnormalities we let it go to the rest of the if we detect abnormalities we basically",
    "start": "3072730",
    "end": "3079400"
  },
  {
    "text": "pulled those machines out of the pool and we add you know the next machines in place and your favorite game to play",
    "start": "3079400",
    "end": "3086859"
  },
  {
    "text": "currently on fortnight and a little bit of Call of Duty but historically probably FIFA or Madden is kind of where",
    "start": "3086859",
    "end": "3093049"
  },
  {
    "text": "I've been most of my time excellent well thank you very much please run applause",
    "start": "3093049",
    "end": "3098089"
  },
  {
    "text": "for a great talk in a few minutes we'll have Robin Hood giving some insight on",
    "start": "3098089",
    "end": "3104029"
  },
  {
    "text": "their infrastructure kicking off in five minutes",
    "start": "3104029",
    "end": "3109000"
  }
]