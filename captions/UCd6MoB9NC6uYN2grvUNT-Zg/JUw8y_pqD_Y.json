[
  {
    "start": "0",
    "end": "135000"
  },
  {
    "text": "hey everybody thank you for showing up today um show of hands how many of you",
    "start": "1640",
    "end": "8240"
  },
  {
    "text": "are running what you would consider to be a non-trivial workload on AWS okay",
    "start": "8240",
    "end": "15559"
  },
  {
    "text": "good so do you suspect that if you were just able to speed up the network a",
    "start": "15559",
    "end": "21760"
  },
  {
    "text": "little bit that you could get through your workload faster or show your customers a better experience using your",
    "start": "21760",
    "end": "28759"
  },
  {
    "text": "product okay if you if you feel that way then this talk is for you my name is",
    "start": "28759",
    "end": "35079"
  },
  {
    "text": "Becky Weiss I'm an engineer on the ec2 networking team and this talk is about",
    "start": "35079",
    "end": "41920"
  },
  {
    "text": "networking on ac2 when you're not messing around all right so when we talk about",
    "start": "41920",
    "end": "47680"
  },
  {
    "text": "speeding up the network what are we talking about exactly well you know many people think of a fast Network and they",
    "start": "47680",
    "end": "54520"
  },
  {
    "text": "think of the number of gigabits per second they think of fat pipes and we do offer a to 10 gigabits per second um",
    "start": "54520",
    "end": "63199"
  },
  {
    "text": "full bisection bandwidth between our instances and I'll get to that but you know there are other components here as",
    "start": "63199",
    "end": "68600"
  },
  {
    "text": "well there's um low latency for fast turnaround of your request response and",
    "start": "68600",
    "end": "74720"
  },
  {
    "text": "not only low latency but getting that latency predictably low and we're going to talk about how you can do all of",
    "start": "74720",
    "end": "82640"
  },
  {
    "text": "those well this sounds really great are you the kind of workload that needs your",
    "start": "82640",
    "end": "89320"
  },
  {
    "text": "network enhanced um so really the question is whether your network iio bound so the various kinds of workloads",
    "start": "89320",
    "end": "97000"
  },
  {
    "text": "do have characteristics that should make you start thinking about speeding up the",
    "start": "97000",
    "end": "102759"
  },
  {
    "text": "network um anything you think of uh high performance Computing HPC workloads from",
    "start": "102759",
    "end": "109040"
  },
  {
    "text": "the science and engineering domain these will typically spin up lots and lots of nodes in a cluster and communication",
    "start": "109040",
    "end": "115960"
  },
  {
    "text": "between these nodes is key to a performant workload um large data transfers anything that's very chatty a",
    "start": "115960",
    "end": "123200"
  },
  {
    "text": "lot of request response if any of these sound like your workload you should definitely be thinking Network when",
    "start": "123200",
    "end": "129039"
  },
  {
    "text": "you're talking about making it perform as well as as well as it possibly",
    "start": "129039",
    "end": "134120"
  },
  {
    "text": "can so then what are we going to talk about today this I I'll just tell you right now that this talk is going to be",
    "start": "134120",
    "end": "139599"
  },
  {
    "start": "135000",
    "end": "135000"
  },
  {
    "text": "very practical focused very how-to focused it's really about getting the",
    "start": "139599",
    "end": "144879"
  },
  {
    "text": "network to be faster and there's a couple Concepts that we're going to talk about here that these are the things",
    "start": "144879",
    "end": "151239"
  },
  {
    "text": "that you need to know about if you're going to make your network faster so the first one um something called placement",
    "start": "151239",
    "end": "157239"
  },
  {
    "text": "groups uh this basically tells us at ec2 when you're running your ec2 instances",
    "start": "157239",
    "end": "163720"
  },
  {
    "text": "that you are interested in having bandwidth and latency optimized among",
    "start": "163720",
    "end": "168840"
  },
  {
    "text": "these instances we'll talk about how to do that we're also going to talk about enhanced networking with srov this is a",
    "start": "168840",
    "end": "175319"
  },
  {
    "text": "feature that we released last year it's all about getting that packet per second",
    "start": "175319",
    "end": "180480"
  },
  {
    "text": "up by driving per packet processing time down and I'm going to talk about why",
    "start": "180480",
    "end": "187200"
  },
  {
    "text": "what's so enhanced about enhanced networking and then how to make sure that you have it turned on when you",
    "start": "187200",
    "end": "192799"
  },
  {
    "text": "should um and as a Common Thread throughout all of this is the virtual",
    "start": "192799",
    "end": "198480"
  },
  {
    "text": "private cloud or VPC um all uh everything that I'm going",
    "start": "198480",
    "end": "203680"
  },
  {
    "text": "to talk about today enhanced networking uh requires you to be running your ec2",
    "start": "203680",
    "end": "208840"
  },
  {
    "text": "instances in a VPC and for those of you who don't know a VPC is a sec is a",
    "start": "208840",
    "end": "214400"
  },
  {
    "text": "secure logically isolated your unit of the cloud that has many of the many of",
    "start": "214400",
    "end": "222480"
  },
  {
    "text": "the me a lot of the network configuration that you might do in your own data center you can do in a VPC",
    "start": "222480",
    "end": "229720"
  },
  {
    "text": "except it's all virtual so it's often easier and more flexible but I will bring up these Concepts as they become",
    "start": "229720",
    "end": "236439"
  },
  {
    "text": "as they become relevant just know that everything that we're talking about here are essentially VPC",
    "start": "236439",
    "end": "244519"
  },
  {
    "text": "features okay so first thing you need to know about when you're serious about the network is there are various instance",
    "start": "244840",
    "end": "252439"
  },
  {
    "text": "types you should be looking at so as you know ec2 offers instances all along the",
    "start": "252439",
    "end": "259000"
  },
  {
    "text": "price performance Spectrum we're going to talk about instances at the high end of the price performance Spectrum the",
    "start": "259000",
    "end": "265520"
  },
  {
    "text": "ones that support enhanced networking there are three different instance families that support enhanced",
    "start": "265520",
    "end": "272000"
  },
  {
    "text": "networking with 14 instance types across those families and each of these F I'm going",
    "start": "272000",
    "end": "277639"
  },
  {
    "text": "to quickly go through these families each of them is optimized for a par for",
    "start": "277639",
    "end": "283320"
  },
  {
    "text": "particular kinds of work there was actually a deep dive it was sdd 406 Deep",
    "start": "283320",
    "end": "288440"
  },
  {
    "text": "dive into ec2 instances if you missed it it'll be recorded and you can watch it",
    "start": "288440",
    "end": "293759"
  },
  {
    "text": "later and if this kind of pequs your curiosity about not only these instance types but the other ones that we offer",
    "start": "293759",
    "end": "299080"
  },
  {
    "text": "that I'm not going to be talking about I would highly recommend that you go and check out that",
    "start": "299080",
    "end": "304320"
  },
  {
    "text": "talk all right so the first of our families here that support enhan networking is the compute optimized uh",
    "start": "304320",
    "end": "310280"
  },
  {
    "start": "306000",
    "end": "306000"
  },
  {
    "text": "compute optimized basically you're doing rocket science on the instances lots of complex calculations on our instances um",
    "start": "310280",
    "end": "317680"
  },
  {
    "text": "any kind of like big science or engineering workloads any kind of distributed analytics these are you know",
    "start": "317680",
    "end": "324240"
  },
  {
    "text": "this is our best price compute Performance Point of all of our ec2 and",
    "start": "324240",
    "end": "329720"
  },
  {
    "text": "instances I have some specs up here then we have the R3 which are the",
    "start": "329720",
    "end": "335800"
  },
  {
    "start": "334000",
    "end": "334000"
  },
  {
    "text": "memory optimized instances so anything you have that would benefit from a",
    "start": "335800",
    "end": "341160"
  },
  {
    "text": "really large memory footprint um you want to be looking at r3s for these so think high performance databases",
    "start": "341160",
    "end": "348720"
  },
  {
    "text": "distributed in memory caches you know all of these things all of these things do better with more memory so uh R3 is",
    "start": "348720",
    "end": "355960"
  },
  {
    "text": "definitely what you want to be uh considering for these and then finally we have the io optimized I2 instances",
    "start": "355960",
    "end": "364560"
  },
  {
    "start": "361000",
    "end": "361000"
  },
  {
    "text": "these have our best random I/O performance across all of our instance types anything that's hitting the disc",
    "start": "364560",
    "end": "370960"
  },
  {
    "text": "hard these are the instance types to look at uh so no SQL DBS like or",
    "start": "370960",
    "end": "376160"
  },
  {
    "text": "Cassandra um cluster file systems well file system that means hitting the dis",
    "start": "376160",
    "end": "381759"
  },
  {
    "text": "uh these are the instance types you would look at if you look here you see that their instant stor is um instant",
    "start": "381759",
    "end": "388520"
  },
  {
    "text": "storage a lot of a lot one or two or four or eight large",
    "start": "388520",
    "end": "393639"
  },
  {
    "text": "ssds of course you can use elastic Block store and EBS in addition to this but um",
    "start": "393639",
    "end": "400400"
  },
  {
    "text": "these these instances have some powerful discs okay so enough about instance",
    "start": "400400",
    "end": "406039"
  },
  {
    "text": "types so these are the instance types you need to be thinking about uh for the rest of this talk um I'm going to",
    "start": "406039",
    "end": "411800"
  },
  {
    "text": "quickly go through uh what placement groups are uh and we'll do sort of a",
    "start": "411800",
    "end": "417039"
  },
  {
    "text": "how-to for how to use them all right now first of all what a",
    "start": "417039",
    "end": "422680"
  },
  {
    "text": "placement group is so a placement group is a hint to us at ec2 when you're launching the",
    "start": "422680",
    "end": "428759"
  },
  {
    "text": "instances I want the network optimized between these instances and I'll show you when you can't when it when it's a",
    "start": "428759",
    "end": "435080"
  },
  {
    "text": "good idea to use placement groups when it's not a good idea to use placement groups and how you set this whole thing",
    "start": "435080",
    "end": "440639"
  },
  {
    "text": "up but first kind of by way of explanation I have up here a hypothetical",
    "start": "440639",
    "end": "446840"
  },
  {
    "text": "VPC that you might create this is a modern to expert mode VPC here and I'm",
    "start": "446840",
    "end": "452080"
  },
  {
    "text": "just I just wanted to kind of quickly go through the concepts here that are relevant to placement groups so I have",
    "start": "452080",
    "end": "459000"
  },
  {
    "text": "uh two availability zones pictured here an orange one and a purple one the",
    "start": "459000",
    "end": "464039"
  },
  {
    "text": "orange one is Us East onea and the purple one is Us East 1C um availability",
    "start": "464039",
    "end": "469680"
  },
  {
    "text": "zones as many of you know each of our 11 regions is divided into multiple",
    "start": "469680",
    "end": "474879"
  },
  {
    "text": "availability zones now availability zones are designed to be physically separate and isolated from one another's",
    "start": "474879",
    "end": "481479"
  },
  {
    "text": "failures and you can see how this would be a very useful tool for building your own high availability Services because",
    "start": "481479",
    "end": "488520"
  },
  {
    "text": "you will want to be running instances in different availability zones so that they are isolated from one another's",
    "start": "488520",
    "end": "496000"
  },
  {
    "text": "failures um but I have just two of the several availability zones in Us East",
    "start": "496000",
    "end": "501479"
  },
  {
    "text": "one pictured here um and I have and now a subnet within your VPC is a logically",
    "start": "501479",
    "end": "508319"
  },
  {
    "text": "isolated group group grouped by cider range of uh Network addresses in there",
    "start": "508319",
    "end": "514200"
  },
  {
    "text": "now you notice I have three instances in Us East 1A instance one instance two instance three and in fact the expert",
    "start": "514200",
    "end": "520120"
  },
  {
    "text": "mode thing here is instance two is actually in both of those subnets and that's fine because I can attach multiple network interfaces to that",
    "start": "520120",
    "end": "526920"
  },
  {
    "text": "instance but yeah so I have my two subnets in uh Us East",
    "start": "526920",
    "end": "532160"
  },
  {
    "text": "1A and this is your subnets on placement groups um so a placement group so you",
    "start": "532160",
    "end": "539240"
  },
  {
    "text": "know our our availability zones they're pretty large our data centers are large",
    "start": "539240",
    "end": "544480"
  },
  {
    "text": "you know when you ask us to launch an instance we find Your Capacity somewhere in the data center and",
    "start": "544480",
    "end": "552760"
  },
  {
    "text": "we we start your instance for you now placement group now as many of you know and the re probably many of you are here",
    "start": "552760",
    "end": "560360"
  },
  {
    "text": "because you're the kind of person who knows that Network performance is dependent on a lot of physical factors",
    "start": "560360",
    "end": "567680"
  },
  {
    "text": "so placement groups are kind of one of these areas where the realities of physical networking kind kind of invade",
    "start": "567680",
    "end": "576000"
  },
  {
    "text": "this nice virtual world that we've created for you so placement groups placement groups if you really cared",
    "start": "576000",
    "end": "582480"
  },
  {
    "text": "about bandwidth and latency between instances 1 two and three you would launch them into a placement group",
    "start": "582480",
    "end": "587920"
  },
  {
    "text": "together and we at Amazon were when choosing where to place your instances",
    "start": "587920",
    "end": "593120"
  },
  {
    "text": "on our physical hosts in our data center would place them in physical proximity to one another um to optimize for these",
    "start": "593120",
    "end": "600800"
  },
  {
    "text": "things okay so now I'm going to show you how to use these things just by way of setup I'm showing you a screenshot of my",
    "start": "600800",
    "end": "607399"
  },
  {
    "start": "604000",
    "end": "604000"
  },
  {
    "text": "AWS console those are the subnets that you saw in the other picture we're going to launch everything into subnet 1A that",
    "start": "607399",
    "end": "613480"
  },
  {
    "text": "was one of the ones in Us East one is subnet yeah subnet a one of the ones that we launch into US East 1A um I",
    "start": "613480",
    "end": "621079"
  },
  {
    "text": "could have launched into both of my Us East 1A subnets but just for the sake of Simplicity I'm going to be launching",
    "start": "621079",
    "end": "626320"
  },
  {
    "text": "into one subnet okay and then since throughout this talk we're going to be they're",
    "start": "626320",
    "end": "632640"
  },
  {
    "start": "630000",
    "end": "630000"
  },
  {
    "text": "going to be showing a lot of run instances calls so I'm just going to go through some of the basic parameters just so you're not confused about what",
    "start": "632640",
    "end": "638839"
  },
  {
    "text": "what we're doing here um this is a run instances call",
    "start": "638839",
    "end": "644279"
  },
  {
    "text": "without a playme this a normal vanilla run instances call um you can see I'm using the AWS command line interface uh",
    "start": "644279",
    "end": "652920"
  },
  {
    "text": "I'm running it on Windows uh we all you can you can get it from aws.amazon.com we have versions for all the major",
    "start": "652920",
    "end": "659600"
  },
  {
    "text": "operating systems um so this is the AWS command line interface and I'll go",
    "start": "659600",
    "end": "665040"
  },
  {
    "text": "through a couple parameters with you right now um so first there's the Ami the Amazon machine image um this is an",
    "start": "665040",
    "end": "672760"
  },
  {
    "text": "identifier of an Ami now I'll I'll just say that the choice of this Ami is",
    "start": "672760",
    "end": "678519"
  },
  {
    "text": "significant and deliberate but I'm not going to explain it yet I'll explain it later when we talk about enhanced networking um so just trust me this is",
    "start": "678519",
    "end": "685440"
  },
  {
    "text": "an awesome Army to be using for this all right next thing is that um the instance",
    "start": "685440",
    "end": "691600"
  },
  {
    "text": "type that we're using is going to be a C3 uh I'm saying a c38 extra large here remember that's one of the C3 compute",
    "start": "691600",
    "end": "698560"
  },
  {
    "text": "optimized uh instance types and um again that choice is significant this is an",
    "start": "698560",
    "end": "703680"
  },
  {
    "text": "enhanced networking instance instance type other parameters here subnet ID is",
    "start": "703680",
    "end": "708800"
  },
  {
    "text": "what you think Security Group ID also what you think security groups are how",
    "start": "708800",
    "end": "713959"
  },
  {
    "text": "you authorize Ingress and egress traffic to your instances from only the the",
    "start": "713959",
    "end": "719360"
  },
  {
    "text": "addresses you want and not from the addresses you don't want and I have an SSH key so that I can SSH into my",
    "start": "719360",
    "end": "725600"
  },
  {
    "text": "instances and I'm asking for two instances because what I'm going to do is I'm going to Ping between them I'm going to show you how it looks not in a",
    "start": "725600",
    "end": "732440"
  },
  {
    "text": "placement group and then I'm going to show you how it looks in a placement group oh okay one thing I should mention",
    "start": "732440",
    "end": "739000"
  },
  {
    "text": "yeah there's going to be numbers you're all grown-ups here um your mileage may vary cuz you know again it's uh physical",
    "start": "739000",
    "end": "746519"
  },
  {
    "text": "Network networking is subject to a lot of physical factors and the important",
    "start": "746519",
    "end": "752040"
  },
  {
    "text": "part here is the relative difference you know if you went home and tried this you would see you would see a good relative",
    "start": "752040",
    "end": "758240"
  },
  {
    "text": "difference you might not get the exact same numbers that I did this is something that I did once not according",
    "start": "758240",
    "end": "763279"
  },
  {
    "text": "to any scientific method at all than anybody be proud of all right so I launched my two instances and I ping",
    "start": "763279",
    "end": "769760"
  },
  {
    "text": "between them and you can see that my average roundtrip time I got 167 micros seconds and that's that's all right you",
    "start": "769760",
    "end": "775920"
  },
  {
    "text": "know that's pretty good all right can we do better all right so using the AWS command line",
    "start": "775920",
    "end": "782760"
  },
  {
    "text": "interface I'm going to create a placement group here uh to create a placement group I need to name it so I",
    "start": "782760",
    "end": "787880"
  },
  {
    "text": "give it a super creative name networking test placement group um the strategy parameter needs to be set to Cluster so",
    "start": "787880",
    "end": "794720"
  },
  {
    "text": "don't worry about that parameter set it to Cluster and then I can describe it back to me and it says there's your placement group it's",
    "start": "794720",
    "end": "801040"
  },
  {
    "text": "available here's a screenshot of the AWS console with exactly the same thing um",
    "start": "801040",
    "end": "806279"
  },
  {
    "start": "804000",
    "end": "804000"
  },
  {
    "text": "there it is this is the ec2 console there it is it says it's available so it's available so let's use it so this",
    "start": "806279",
    "end": "814639"
  },
  {
    "start": "814000",
    "end": "814000"
  },
  {
    "text": "is the same run instances call that I showed you before except one new parameter I'm naming my placement group",
    "start": "814639",
    "end": "822279"
  },
  {
    "text": "so I'm launching two instances into this placement group and what EC what we at ec2 are going to do is in our data",
    "start": "822279",
    "end": "828880"
  },
  {
    "text": "center your instances are actually going to be physically close to one another in our data center so what do I see when I",
    "start": "828880",
    "end": "836399"
  },
  {
    "text": "ping between them I see 99 micros and that's that's that's a lot better than 167 micros so great all right so what do",
    "start": "836399",
    "end": "844639"
  },
  {
    "text": "you need to know to use these things uh back home well the first thing you need to know is that placement groups do not",
    "start": "844639",
    "end": "850560"
  },
  {
    "text": "span availability zones now if you think about it you can kind of Reason out why this would be the case the idea of a",
    "start": "850560",
    "end": "856519"
  },
  {
    "text": "placement Group which is getting your instances physically close together to optimize for Network performance is",
    "start": "856519",
    "end": "863759"
  },
  {
    "text": "completely antithetical to the idea of availability zones which are by Design",
    "start": "863759",
    "end": "869279"
  },
  {
    "text": "physically separate from one another so you know so either one or the other having cake and eat it uh you",
    "start": "869279",
    "end": "876720"
  },
  {
    "text": "don't do that um so you don't have your placement group span availability zones all right and placement groups placement",
    "start": "876720",
    "end": "884320"
  },
  {
    "text": "groups are only for certain instance types this one you don't need to worry about as much because if you're serious",
    "start": "884320",
    "end": "890360"
  },
  {
    "text": "about networking you're going to be using enhanced networking instance types and all of those instance types are",
    "start": "890360",
    "end": "898360"
  },
  {
    "text": "supported for PL placement group so you don't have to worry about that the other thing that you need to know about this",
    "start": "898360",
    "end": "903519"
  },
  {
    "text": "is that you can't after the fact take a running instance that's not in a",
    "start": "903519",
    "end": "908600"
  },
  {
    "text": "placement group or that's in some other placement group and move it into a placement group if you need to do this",
    "start": "908600",
    "end": "914600"
  },
  {
    "text": "your best recourse is to create an Ami off of your running instance terminate",
    "start": "914600",
    "end": "920759"
  },
  {
    "text": "it and then relaunch it from that Ami into a placement group if you really needed to do that okay so let's do a",
    "start": "920759",
    "end": "928079"
  },
  {
    "text": "couple let's talk about a few best practices to maximize your chances of success with placement groups so the key",
    "start": "928079",
    "end": "934079"
  },
  {
    "text": "thing about the key thing about being successful using placement groups is making sure that we have the",
    "start": "934079",
    "end": "940600"
  },
  {
    "text": "capacity to honor your request and what I mean by that is you know if you forget",
    "start": "940600",
    "end": "946240"
  },
  {
    "text": "placement groups for a minute and think of you know spinning up a bunch of instances in an availability Zone where",
    "start": "946240",
    "end": "951800"
  },
  {
    "text": "our availability zones are pretty vast you know that capacity can come from anywhere in our availability zones which",
    "start": "951800",
    "end": "957360"
  },
  {
    "text": "will help you you know which which will help us honor your request and have the capacity for it now availabil uh uh",
    "start": "957360",
    "end": "966199"
  },
  {
    "text": "placement groups if you launch if you launch a",
    "start": "966199",
    "end": "972000"
  },
  {
    "text": "bunch of instances in a placement group leave them alone and come back you know a week later and try to launch a whole",
    "start": "972000",
    "end": "978240"
  },
  {
    "text": "lot more instances in that same placement Group Well now we're kind of constrained as to where we can choose",
    "start": "978240",
    "end": "984480"
  },
  {
    "text": "capacity for those instances from and um you can launch instances into a",
    "start": "984480",
    "end": "990920"
  },
  {
    "text": "placement Group after the fact but your chances of getting an insufficient capacity error are a bit higher if you",
    "start": "990920",
    "end": "997920"
  },
  {
    "text": "do that because we don't have the entire availability Zone to choose from for your instances anymore so it follows",
    "start": "997920",
    "end": "1004560"
  },
  {
    "text": "from that that if you have a horizontally scalable web service one that is one that you're always elastically scaling up and scaling down",
    "start": "1004560",
    "end": "1012600"
  },
  {
    "text": "placement groups might not be what you're looking for for these um",
    "start": "1012600",
    "end": "1018240"
  },
  {
    "text": "similarly along along similar lines um it is possible to launch heterogenous",
    "start": "1018240",
    "end": "1024280"
  },
  {
    "text": "instance types into a placement group nothing's going to stop you in fact I'm going to do it later in this talk um but",
    "start": "1024280",
    "end": "1030199"
  },
  {
    "text": "your chances of us being able to honor your request us being able to have the capacity for your request they are",
    "start": "1030199",
    "end": "1036480"
  },
  {
    "text": "definitely improved if you use homogeneous instance types if all of your instances are the same instance",
    "start": "1036480",
    "end": "1042000"
  },
  {
    "text": "types okay that's enough about placement groups let's talk about enhanced",
    "start": "1042000",
    "end": "1048160"
  },
  {
    "text": "networking so remember how I said that that uh Amy that Amazon machine image that I was",
    "start": "1048160",
    "end": "1054240"
  },
  {
    "text": "using before was great and just trust me it's great well I'm going to talk about why it's so great right now um one thing",
    "start": "1054240",
    "end": "1061280"
  },
  {
    "text": "about enhanced networking if you're running on those instance types I showed you you might already be using it and I'm going to I'm going to tell you how",
    "start": "1061280",
    "end": "1067120"
  },
  {
    "text": "to find out if you are and what to do about it if you're not but first let me let me sort of give you a high level",
    "start": "1067120",
    "end": "1074039"
  },
  {
    "text": "overview of what the big deal is here so a big determinant of latency between",
    "start": "1074039",
    "end": "1080400"
  },
  {
    "start": "1077000",
    "end": "1077000"
  },
  {
    "text": "your instances is how fast each packet gets processed on the way out of your",
    "start": "1080400",
    "end": "1087120"
  },
  {
    "text": "instance through our physical host and onto the network um enhanced networking the name",
    "start": "1087120",
    "end": "1092600"
  },
  {
    "text": "of the game there is take is bringing down that per packet processing time and",
    "start": "1092600",
    "end": "1097919"
  },
  {
    "text": "bringing it predictably down so a full discussion of uh the architecture of",
    "start": "1097919",
    "end": "1103480"
  },
  {
    "text": "single root iio virtualization or srio is outside the scope of this talk but I do want give you some kind of mental",
    "start": "1103480",
    "end": "1110640"
  },
  {
    "text": "picture sort of a mental picture of what's going on here because that'll really help you grock why things are",
    "start": "1110640",
    "end": "1117240"
  },
  {
    "text": "faster while your packets are moving faster with enhanced networking than without so you think about think about a",
    "start": "1117240",
    "end": "1124280"
  },
  {
    "text": "non-enhanced networking instance okay so this is a very crude diagram of what",
    "start": "1124280",
    "end": "1129960"
  },
  {
    "start": "1125000",
    "end": "1125000"
  },
  {
    "text": "happens to packets on a normal ec2 instance so you got your instance it's purple because you're fancy you have two",
    "start": "1129960",
    "end": "1136919"
  },
  {
    "text": "elastic network interfaces attached to actually most of you have only one network interface attached to it but in a VPC you can do multiple network",
    "start": "1136919",
    "end": "1144000"
  },
  {
    "text": "interfaces um these are virtual Nicks um the operating system on your instance",
    "start": "1144000",
    "end": "1149520"
  },
  {
    "text": "when it wants to send packets out on the network it sends them to these virtual",
    "start": "1149520",
    "end": "1154799"
  },
  {
    "text": "nycks now what happens to the packets next well of course your instance is",
    "start": "1154799",
    "end": "1159919"
  },
  {
    "text": "running on a physical host in our data center and those packets come off of your instance onto a virtualization",
    "start": "1159919",
    "end": "1167360"
  },
  {
    "text": "layer in softare Ware on our physical host now that means that processing the",
    "start": "1167360",
    "end": "1174320"
  },
  {
    "text": "packets takes CPU cycles and it's efficient but it is certainly below line rate um also because it is in software",
    "start": "1174320",
    "end": "1182240"
  },
  {
    "text": "running on CPU Cycles it's subject to the vagaries of os thread scheduling which means it's going to be very",
    "start": "1182240",
    "end": "1187480"
  },
  {
    "text": "variable also and I'm going to show you a picture in a couple slides that really drives that point home but it it goes",
    "start": "1187480",
    "end": "1193960"
  },
  {
    "text": "through this efficient but software virtualization layer and then off of our",
    "start": "1193960",
    "end": "1199200"
  },
  {
    "text": "physical host to wherever you're sending your packets so contrast this with the",
    "start": "1199200",
    "end": "1205799"
  },
  {
    "text": "an sov picture and again we got very this is a very crude schematic diagram here again just with the with the",
    "start": "1205799",
    "end": "1212039"
  },
  {
    "text": "intention of giving you a mental image here so when you're running an enhanced",
    "start": "1212039",
    "end": "1217919"
  },
  {
    "text": "networking instance with SRI basically our Network device is divided into a physical function and a",
    "start": "1217919",
    "end": "1224360"
  },
  {
    "text": "virtual function this virtual function is exposed directly to your instance has a lightweight pcie function",
    "start": "1224360",
    "end": "1231919"
  },
  {
    "text": "with limited configurability um and in your instance this looks like",
    "start": "1231919",
    "end": "1237039"
  },
  {
    "text": "something it looks like something called a virtual function driver the Salient Point here is that",
    "start": "1237039",
    "end": "1242880"
  },
  {
    "text": "when instance when your operating system sends traffic out of its eth zero and",
    "start": "1242880",
    "end": "1248000"
  },
  {
    "text": "eth1 those packets have a direct line to our physical Network device and then go",
    "start": "1248000",
    "end": "1253480"
  },
  {
    "text": "out off where they're going they do not go through this virtualization layer anymore so that should give you you an",
    "start": "1253480",
    "end": "1258880"
  },
  {
    "text": "idea of that should give you an idea of why things are faster and why there's a lot less variability in um in how fast",
    "start": "1258880",
    "end": "1265799"
  },
  {
    "text": "your packets get off your device now I want to point out one thing about this picture here which is that this virtual",
    "start": "1265799",
    "end": "1271559"
  },
  {
    "text": "function driver that's exposed to your that's exposed to your instance this is a specialized driver in otherwi in other",
    "start": "1271559",
    "end": "1278679"
  },
  {
    "text": "words the operating system on your instance your Ami needs to know about this like it's not transparent to your",
    "start": "1278679",
    "end": "1284840"
  },
  {
    "text": "to your instance furthermore ec2 needs to know that you're doing this",
    "start": "1284840",
    "end": "1290520"
  },
  {
    "text": "because this is a very different hookup than what you saw in the prior slide and so there's kind of two halves to this",
    "start": "1290520",
    "end": "1295880"
  },
  {
    "text": "and both of the halves sort of need to be playing ball in order to have enhanced networking turned on there's the half in your instance and we're",
    "start": "1295880",
    "end": "1302600"
  },
  {
    "text": "going to talk about how you do that and then there's the ec2 half of the picture and we're going to talk about how you do",
    "start": "1302600",
    "end": "1308320"
  },
  {
    "text": "that all right but before I talk about how to do all of these awesome things that you're going to do let's let's look",
    "start": "1308320",
    "end": "1315000"
  },
  {
    "text": "at um this picture really drives home why you care about this so um orange is",
    "start": "1315000",
    "end": "1320120"
  },
  {
    "text": "without enhanced networking purple is with enhanced networking this is a logari the Y AIS is logarithmic scale um",
    "start": "1320120",
    "end": "1327120"
  },
  {
    "text": "an engineer in our team did some short interval uh ping tests between instances",
    "start": "1327120",
    "end": "1333120"
  },
  {
    "text": "and in Amazon we're often we you know it's important to us to measure the performance of our services at the at",
    "start": "1333120",
    "end": "1339159"
  },
  {
    "text": "the outlier percentiles at the 99th per but not just of the 99th percentile the 99.9th percentile and the 100th",
    "start": "1339159",
    "end": "1346320"
  },
  {
    "text": "percentile like so what we have years percentiles tp0 that's the fastest",
    "start": "1346320",
    "end": "1352000"
  },
  {
    "text": "packet on your system the happiest packet in the world the tp50 the median packet uh 99 99.9 100 the slowest packet",
    "start": "1352000",
    "end": "1361919"
  },
  {
    "text": "on your system and you can see that when you're using enhanced networking these bounds between your your slowest packet",
    "start": "1361919",
    "end": "1367720"
  },
  {
    "text": "and your fastest packet are actually pretty tight whereas with with whereas",
    "start": "1367720",
    "end": "1372960"
  },
  {
    "text": "with um when you're not using enhanced networking there's you know that slow packets going to outlier slow package",
    "start": "1372960",
    "end": "1380000"
  },
  {
    "text": "it's going to be slow okay is this thing on it might",
    "start": "1380000",
    "end": "1387000"
  },
  {
    "text": "already be so if you are if you're running the right instance types the",
    "start": "1387000",
    "end": "1392279"
  },
  {
    "text": "ones that I showed you before and you're running one of the newest Amazon amies then you can sleep for the next 10",
    "start": "1392279",
    "end": "1399720"
  },
  {
    "text": "minutes of this talk because you don't even need to think about enhanced networking it's already on for you and you didn't need to do anything",
    "start": "1399720",
    "end": "1407200"
  },
  {
    "text": "now I recognize that many of you are running older amies or custom amies and",
    "start": "1407200",
    "end": "1413440"
  },
  {
    "text": "maybe you're not sure even though you're running the you're maybe running the right instance type you're not sure",
    "start": "1413440",
    "end": "1419240"
  },
  {
    "text": "whether you have enhanced networking on or you know you don't and you want it on so I'm going to show you what you can do",
    "start": "1419240",
    "end": "1424360"
  },
  {
    "text": "about that okay so the first remember I said",
    "start": "1424360",
    "end": "1429799"
  },
  {
    "start": "1428000",
    "end": "1428000"
  },
  {
    "text": "that there's uh it takes two to tango with this enhanced networking feature you need it on on the both the instance",
    "start": "1429799",
    "end": "1436000"
  },
  {
    "text": "and you need ec2 to be aware of it well so let's first talk about the",
    "start": "1436000",
    "end": "1441640"
  },
  {
    "text": "instance half of it so on uh on Linux you can go and use the use eth Tool uh",
    "start": "1441640",
    "end": "1447760"
  },
  {
    "text": "eth tool will show show will tell you what driver it's using on the right hand",
    "start": "1447760",
    "end": "1454080"
  },
  {
    "text": "side you'll see that it's using Intel 10 gabit ethernet uh virtual function that's what that's what that gazon type",
    "start": "1454080",
    "end": "1460679"
  },
  {
    "text": "business stands for um and that means that your instance thinks it's running",
    "start": "1460679",
    "end": "1466320"
  },
  {
    "text": "with enhanced networking and that's good you see something about vif or virtual interface um then it's not yet but no",
    "start": "1466320",
    "end": "1473600"
  },
  {
    "text": "fears you can do something about it here's the analogous picture on Windows on Windows you can see what drivers are",
    "start": "1473600",
    "end": "1480240"
  },
  {
    "text": "being used for your network adapter um I have the I have the device manager up here and I'm looking under network",
    "start": "1480240",
    "end": "1486559"
  },
  {
    "text": "adapter if it says Intel 82599 virtual function driver then you're good to go",
    "start": "1486559",
    "end": "1491720"
  },
  {
    "text": "if it says anything else then you're not okay so that's what you do on",
    "start": "1491720",
    "end": "1499480"
  },
  {
    "text": "that's what you do to see if you're running with enhanced networking let's say you go onto your instances because you're running a custom Ami or whatnot",
    "start": "1499480",
    "end": "1506000"
  },
  {
    "text": "and you you it look it looks like you're not running with enhanced networking on but you'd like it on well what are the",
    "start": "1506000",
    "end": "1512039"
  },
  {
    "text": "criteria here so I already talked about I already talked about the C3 R3 and I2 instance types that you need to be that",
    "start": "1512039",
    "end": "1519159"
  },
  {
    "text": "you need to be uh running 14 instance types and all you also um for amies uh",
    "start": "1519159",
    "end": "1527120"
  },
  {
    "text": "many as many of you know we offer two types of amies country and western hvm and uh PV par",
    "start": "1527120",
    "end": "1534000"
  },
  {
    "text": "virtualized um and you have to be using the hvm virtualization type uh for this",
    "start": "1534000",
    "end": "1540720"
  },
  {
    "text": "um there's minimum required kernel versions and uh driver versions I have",
    "start": "1540720",
    "end": "1545760"
  },
  {
    "text": "those up here and really what we were doing before was uh or what we're about to do is getting your getting your",
    "start": "1545760",
    "end": "1553399"
  },
  {
    "text": "getting your driver installed so I'm going to show you I'm going to show you an example of I'm going to show you",
    "start": "1553399",
    "end": "1558760"
  },
  {
    "start": "1555000",
    "end": "1555000"
  },
  {
    "text": "examples both for Amazon Linux and for Windows of instances that don't have enhanced networking on and we're going",
    "start": "1558760",
    "end": "1564039"
  },
  {
    "text": "to turn it on for them so I'm going to start with Amazon Linux I'm going to use a I'm going to use an Ami from uh 2012",
    "start": "1564039",
    "end": "1571480"
  },
  {
    "text": "from the stone ages before many of you were born and this is a uh this is an",
    "start": "1571480",
    "end": "1576520"
  },
  {
    "text": "hvm on me so I'm satisfying that checkbox and I'm going to launch it I'm going to launch it into C3 instance um",
    "start": "1576520",
    "end": "1584600"
  },
  {
    "text": "let's make it support enhanced networking it doesn't out of the box let's make it support it",
    "start": "1584600",
    "end": "1589840"
  },
  {
    "text": "all right well so I start my instance and I ask ec2 this is how you ask ec2",
    "start": "1589840",
    "end": "1595799"
  },
  {
    "text": "whether this instance is supporting enhanced networking it's an instance attribute so I do this describe instance",
    "start": "1595799",
    "end": "1601919"
  },
  {
    "text": "attribute sov net support it responds to my uh responds to my query but it",
    "start": "1601919",
    "end": "1607760"
  },
  {
    "text": "doesn't tell me anything about SRI OB that's its way of telling me that it's off",
    "start": "1607760",
    "end": "1613840"
  },
  {
    "text": "okay um so Amazon Linux is actually is pretty easy I SSH onto my instance",
    "start": "1613840",
    "end": "1619799"
  },
  {
    "text": "telling me something about an it's telling me something about updating I go and do my OS",
    "start": "1619799",
    "end": "1625799"
  },
  {
    "text": "update and uh then I reboot my instance and uh that's about it I could get back onto my instance and do a mod info on",
    "start": "1625799",
    "end": "1633440"
  },
  {
    "text": "isgb evf that that's the driver you wanted and I would see that it is now there um not shown here other disos of",
    "start": "1633440",
    "end": "1641440"
  },
  {
    "text": "Linux um these are all actually documented on uh aws.amazon.com just",
    "start": "1641440",
    "end": "1646640"
  },
  {
    "text": "look for enabling enhanced Network working on Linux and you'll find the steps for whatever distribution you're interested",
    "start": "1646640",
    "end": "1652520"
  },
  {
    "text": "in all right let me just show you the analogous steps on Windows right quick so on Windows we're going to do uh we're",
    "start": "1652520",
    "end": "1658960"
  },
  {
    "text": "going to do something exactly analogous um we're going to go to Intel we're",
    "start": "1658960",
    "end": "1664360"
  },
  {
    "text": "going to get the driver it says it's an exie but it's actually a zip so you can copy it to a zip and then extract the",
    "start": "1664360",
    "end": "1671080"
  },
  {
    "text": "files and then uh you know there's many ways to add something to your Windows driver store I'm using uh plug-and-play",
    "start": "1671080",
    "end": "1677080"
  },
  {
    "text": "utility P&P util and adding it to my Windows driver store and great my my",
    "start": "1677080",
    "end": "1683640"
  },
  {
    "text": "windows instance is ready to party here all right now as you remember that",
    "start": "1683640",
    "end": "1690279"
  },
  {
    "text": "was half the picture that's the picture in your instance so now we're going to do the ec2 half of the picture and",
    "start": "1690279",
    "end": "1696919"
  },
  {
    "text": "whether you're using enhanced networking or not is governed by an instance attribute called sov net support we",
    "start": "1696919",
    "end": "1703120"
  },
  {
    "text": "asked we asked our non-enhanced networking instance about it a while ago and it didn't say anything anything so",
    "start": "1703120",
    "end": "1709720"
  },
  {
    "text": "we're going to turn it on you can write that attribute but you can only write it when your instance is stopped now this",
    "start": "1709720",
    "end": "1715799"
  },
  {
    "text": "is the easy case EBS elastic Block store backed instances you can stop and restart them and uh that's what we're",
    "start": "1715799",
    "end": "1722760"
  },
  {
    "text": "going to do here instant store backed instances are a different story you cannot stop them and I'm actually going to talk about what you can do about your",
    "start": "1722760",
    "end": "1728799"
  },
  {
    "text": "instant store backed instances in a little bit so I stopped my instance in preparation for turning on enhanced",
    "start": "1728799",
    "end": "1735519"
  },
  {
    "text": "networking now I turn it on and so I'm going and writing this attribute it's a modify instance",
    "start": "1735519",
    "end": "1741679"
  },
  {
    "text": "attribute sov net support simple uh in case you're wondering is there a",
    "start": "1741679",
    "end": "1747080"
  },
  {
    "text": "complicated sovet support there is not you said this value to simple um and",
    "start": "1747080",
    "end": "1752120"
  },
  {
    "text": "something you need to know here this is a point of no return this cannot be undone which means before you go and do",
    "start": "1752120",
    "end": "1758159"
  },
  {
    "text": "this make sure that the instance half of this is actually in place that you",
    "start": "1758159",
    "end": "1763240"
  },
  {
    "text": "actually did install this driver because if you do this and you don't in your instance isn't ready to play ball with",
    "start": "1763240",
    "end": "1768559"
  },
  {
    "text": "enhanced networking well it's not going to work with that second picture I showed you and you're not going to have connectivity to your instance and you",
    "start": "1768559",
    "end": "1775200"
  },
  {
    "text": "know well now you're hosed so don't be hosed okay and then I'm going to uh",
    "start": "1775200",
    "end": "1781480"
  },
  {
    "text": "restart my instance and now if I ask ec2 whether this instance is running with enhanced",
    "start": "1781480",
    "end": "1787279"
  },
  {
    "text": "networking you see that it's saying srov net support the value is simple and it's on so we're done",
    "start": "1787279",
    "end": "1794279"
  },
  {
    "text": "here okay but that was for EBS backed instances what about about what about if you have an instance store backed",
    "start": "1794279",
    "end": "1800200"
  },
  {
    "text": "instance well there's just an additional step you need to do there so you do all those steps to update your OS and get",
    "start": "1800200",
    "end": "1806320"
  },
  {
    "text": "the right driver and then since you're not going to be able to stop this instance to turn",
    "start": "1806320",
    "end": "1811720"
  },
  {
    "text": "it on you're going to have to terminate and relaunch and in order to terminate and relaunch you're going to need to",
    "start": "1811720",
    "end": "1816799"
  },
  {
    "text": "create an Ami from your running instance that's outside the scope of this talk but it's not that bad and it's you know",
    "start": "1816799",
    "end": "1822679"
  },
  {
    "text": "it's in our documentation how you go about doing this and then you're in the same camp as those of you who have a",
    "start": "1822679",
    "end": "1828559"
  },
  {
    "text": "custom Ami on which you would like you would like to just enable it for enhanced networking so if you have a",
    "start": "1828559",
    "end": "1835559"
  },
  {
    "text": "custom Ami like maybe you were created it off your instance store backed instance or maybe you just have a custom",
    "start": "1835559",
    "end": "1840799"
  },
  {
    "text": "Ami um first take an instance that's running that Ami do the needful updates",
    "start": "1840799",
    "end": "1846720"
  },
  {
    "text": "that I showed you uh verify that they're in place and then you can then you can",
    "start": "1846720",
    "end": "1852080"
  },
  {
    "text": "create an Ami and register it as register it with ec2 telling ec2 that",
    "start": "1852080",
    "end": "1857320"
  },
  {
    "text": "this Ami of yours supports enhanced networking and and what and I I have the command the uh command line interface",
    "start": "1857320",
    "end": "1863880"
  },
  {
    "text": "command here to do that and um thenceforth all of the instances that",
    "start": "1863880",
    "end": "1870600"
  },
  {
    "text": "you launch against that Ami are going to be running with enhanced networking on so then you can stop thinking about it",
    "start": "1870600",
    "end": "1876320"
  },
  {
    "text": "after that okay so I just made a lot of uh",
    "start": "1876320",
    "end": "1881760"
  },
  {
    "text": "great claims about how awesome this thing is and how you go about turning it on and you know I wanted to show you",
    "start": "1881760",
    "end": "1888840"
  },
  {
    "text": "some results so you know of course what I could have done is I could have brought up a bunch of instances and you",
    "start": "1888840",
    "end": "1894200"
  },
  {
    "text": "know run some net per tests between them especially like the net perf request response tests but you know I was",
    "start": "1894200",
    "end": "1899840"
  },
  {
    "text": "thinking I don't know probably none of you are in the business of offering net perf as a service this isn't this isn't",
    "start": "1899840",
    "end": "1906559"
  },
  {
    "text": "the metric you care about right you're using I don't know actually we have a lot of customers probably somebody is running net perf as a service but",
    "start": "1906559",
    "end": "1913960"
  },
  {
    "text": "um what you really care about here you you we using networking as a means to",
    "start": "1913960",
    "end": "1919279"
  },
  {
    "text": "some other end like you have some other metric that you care about how many transactions per second how many you",
    "start": "1919279",
    "end": "1924639"
  },
  {
    "text": "know how many calculations per second whatever it is that you care about and I wanted to sort of show you a demo where",
    "start": "1924639",
    "end": "1931279"
  },
  {
    "text": "I'm actually measuring on that output thing and showing it getting better with enhanced networking I'm going to go into a bit of",
    "start": "1931279",
    "end": "1938039"
  },
  {
    "text": "detail about how I actually uh set up this test workload and the reason I'm doing this is that I would highly",
    "start": "1938039",
    "end": "1945760"
  },
  {
    "text": "encourage each of you when you go home home to devise a test workload that you",
    "start": "1945760",
    "end": "1951679"
  },
  {
    "text": "know models your real workload in the interesting ways in the relevant ways",
    "start": "1951679",
    "end": "1957840"
  },
  {
    "text": "and try something like this and I'm going to show you how you can run a test workload pretty painlessly you know this",
    "start": "1957840",
    "end": "1963960"
  },
  {
    "text": "is one of the places where the AWS Cloud really shines you know spinning up a bunch of instances trying something and",
    "start": "1963960",
    "end": "1970320"
  },
  {
    "text": "then throwing them all away so I'm going to show you how to you know some tips for sort of measuring for launching",
    "start": "1970320",
    "end": "1976200"
  },
  {
    "text": "things easily um in the hopes that you can you can take this home and try it at home and see if",
    "start": "1976200",
    "end": "1982519"
  },
  {
    "text": "enhanced networking helps you get more out of those metrics that you actually care",
    "start": "1982519",
    "end": "1988720"
  },
  {
    "text": "about okay so here's the setup of My Demo um so enhanced networking really thingss when you're running it um when",
    "start": "1988720",
    "end": "1995480"
  },
  {
    "start": "1990000",
    "end": "1990000"
  },
  {
    "text": "you're using it for either an endtoend configuration or an end to1 configuration end to end configuration",
    "start": "1995480",
    "end": "2002039"
  },
  {
    "text": "maybe you're spinning up a bunch of nodes and you're sort of communicating among all of them in a mesh this is an",
    "start": "2002039",
    "end": "2007799"
  },
  {
    "text": "to one configuration I'm going to run one host running a mongod DB in the",
    "start": "2007799",
    "end": "2013760"
  },
  {
    "text": "Middle with a bunch of clients around it wailing on it and I want to know how many rights can all of these clients",
    "start": "2013760",
    "end": "2019720"
  },
  {
    "text": "wailing on it together can get through um my choice of this workload was",
    "start": "2019720",
    "end": "2025840"
  },
  {
    "text": "actually completely arbitrary I was I was mostly optimizing on ease of setup I'm quite convinced that if you choose",
    "start": "2025840",
    "end": "2032080"
  },
  {
    "text": "whatever it is that matters to you um you would see similar results on that",
    "start": "2032080",
    "end": "2037399"
  },
  {
    "text": "actual output metric that you care about but this is the one that I chose here well so mongod DV I looked at my",
    "start": "2037399",
    "end": "2043639"
  },
  {
    "text": "instance types I want you know they going to do a lot of disio because it's a u nosql document database so I'm going",
    "start": "2043639",
    "end": "2051240"
  },
  {
    "text": "to treat myself to an i28 extra large here now in point of fact for this stupid test workload that I've set up is",
    "start": "2051240",
    "end": "2057480"
  },
  {
    "text": "probably Overkill but you know I decided to have some fun over",
    "start": "2057480",
    "end": "2062919"
  },
  {
    "text": "here okay so I'm actually going to show you what this test workload does um again it's super stupid like I'm going",
    "start": "2063520",
    "end": "2070000"
  },
  {
    "text": "to have these clients they're going to be spinning in a tight Loop and each iteration of the loop they're going to",
    "start": "2070000",
    "end": "2075560"
  },
  {
    "text": "uh pick a random number from a large random number range they're going to",
    "start": "2075560",
    "end": "2080720"
  },
  {
    "text": "they're going to query the they have a connection to the mongodb they're going to do a read looking for that key they",
    "start": "2080720",
    "end": "2087599"
  },
  {
    "text": "either find it or they don't if they find it they're going to write it back with some attribute update and if they",
    "start": "2087599",
    "end": "2092839"
  },
  {
    "text": "don't find it they're going to insert a value and again not a very meaningful work but I want to see if I have these",
    "start": "2092839",
    "end": "2099359"
  },
  {
    "text": "clients wailing on my database instance how many rights are they getting through and you see the final line here is this",
    "start": "2099359",
    "end": "2104800"
  },
  {
    "text": "ad right statistic that I'm going to show you later because I want to actually count how many of these rights",
    "start": "2104800",
    "end": "2110200"
  },
  {
    "text": "I'm getting through across all of my clients and each of my clients is",
    "start": "2110200",
    "end": "2115560"
  },
  {
    "text": "running this script I start with one client run it for a couple minutes five minutes two 5 minutes three 5 minutes",
    "start": "2115560",
    "end": "2123240"
  },
  {
    "text": "and all the way up till 20 till I Tire of the Enterprise um so",
    "start": "2123240",
    "end": "2129640"
  },
  {
    "text": "okay so I'm going to make use of Amazon cloudwatch for my metrics cuz again I",
    "start": "2130000",
    "end": "2135800"
  },
  {
    "text": "really want this test like this test workload is not my product this is not what helps my customers I want to do",
    "start": "2135800",
    "end": "2140880"
  },
  {
    "text": "this quickly and painlessly and so I don't want to spend a lot I don't want to burn a lot of time writing scripts or",
    "start": "2140880",
    "end": "2148680"
  },
  {
    "text": "scripts to get onto my instances collect the metrics aggregate them you know show them to me I want cloudwatch to do the",
    "start": "2148680",
    "end": "2154960"
  },
  {
    "text": "work for me many of you are familiar with the cloudwatch metrics that come with your ec2 instances um seven",
    "start": "2154960",
    "end": "2162280"
  },
  {
    "text": "cloudwatch metrics that you get by default for free at 5 Minute granularity various system counters like CPU",
    "start": "2162280",
    "end": "2168560"
  },
  {
    "text": "utilization dis IO Network IO well cloudwatch also lets you write custom",
    "start": "2168560",
    "end": "2174960"
  },
  {
    "text": "metrics and that is what we're going to do here so this is a function every time I run every every",
    "start": "2174960",
    "end": "2182760"
  },
  {
    "text": "every one of my iterations through that tight Loop I'm just a cloudwatch traffic and aggregate statistics so you know I",
    "start": "2182760",
    "end": "2189880"
  },
  {
    "text": "increase my sample count number of samples in this Bunch by one by one I increment my sum by the the value",
    "start": "2189880",
    "end": "2196520"
  },
  {
    "text": "minimum and maximum updated exactly the way you think and then once every minute",
    "start": "2196520",
    "end": "2202400"
  },
  {
    "text": "I will call put metric data to cloudwatch this is a custom metric that",
    "start": "2202400",
    "end": "2207720"
  },
  {
    "text": "I have creatively named right time and I'm using a dimension run ID because I",
    "start": "2207720",
    "end": "2213359"
  },
  {
    "text": "run this a couple times and I want to see the results just for the run that I did and then I clear out my aggregate",
    "start": "2213359",
    "end": "2221000"
  },
  {
    "text": "statistics and see you in a minute okay so that's what it does",
    "start": "2221000",
    "end": "2226200"
  },
  {
    "text": "um I also want to show you how I'm launching the client instances because again one of my priorities here is that this test workload be really painless um",
    "start": "2226200",
    "end": "2235400"
  },
  {
    "start": "2227000",
    "end": "2227000"
  },
  {
    "text": "and exactly what I don't want to do is have to spin up 20 client instances and go either manually or via script have to",
    "start": "2235400",
    "end": "2243119"
  },
  {
    "text": "like interact with each of them and give them credentials and make them start running this script and do all of this",
    "start": "2243119",
    "end": "2248760"
  },
  {
    "text": "stuff I don't want to waste my time with this so I'm going to show you a couple features of uh the Run instances call",
    "start": "2248760",
    "end": "2254359"
  },
  {
    "text": "that helps you make this stuff pretty painless so you probably recognize a lot of these parameters from what we've been",
    "start": "2254359",
    "end": "2259440"
  },
  {
    "text": "doing um previous parts of this talk um I'm going to point out the new ones to",
    "start": "2259440",
    "end": "2265720"
  },
  {
    "text": "you I'm going to ask for cloudwatch detailed monitoring this is not about that custom metric that we're going to",
    "start": "2265720",
    "end": "2271359"
  },
  {
    "text": "do this is about the uh ec2 system counters uh I want one minute metrics",
    "start": "2271359",
    "end": "2276560"
  },
  {
    "text": "for these um these in uh in the northern Virginia region it's Three Buck 50 per instance",
    "start": "2276560",
    "end": "2283119"
  },
  {
    "text": "per month for these uh to get these turned on at 1 minute granularity that custom metric in Northern Virginia was",
    "start": "2283119",
    "end": "2288640"
  },
  {
    "text": "uh was uh 50 cents per metric month in other words you might be spending more on toothpaste um so um so I turn on my",
    "start": "2288640",
    "end": "2298839"
  },
  {
    "text": "cloudwatch monitoring because we'll be looking at those in a little in a minute or two um I also it's important to me",
    "start": "2298839",
    "end": "2305240"
  },
  {
    "text": "not to have to interact with these instances after they start running so I'm using this user data file parameter",
    "start": "2305240",
    "end": "2311480"
  },
  {
    "text": "this is a Nifty feature if you don't know about it passing it a file it begins with a shebang it's in one of the",
    "start": "2311480",
    "end": "2317839"
  },
  {
    "text": "common scripting languages I'm using bash um and what happens if you specify that is your instance boots up and",
    "start": "2317839",
    "end": "2325119"
  },
  {
    "text": "starts executing whatever is in that file as root so um it's going I'm going to show you what's uh in that file is",
    "start": "2325119",
    "end": "2332880"
  },
  {
    "text": "nothing that fancy what it does is it installs a bunch of uh prere prerequisites it goes to S3 that's the",
    "start": "2332880",
    "end": "2339079"
  },
  {
    "start": "2334000",
    "end": "2334000"
  },
  {
    "text": "AWS command line interface that it's using here it goes to S3 gets that client test script you were looking at a",
    "start": "2339079",
    "end": "2344839"
  },
  {
    "text": "couple minutes ago from an S3 bucket that I have called networking test and then go go go it starts running this it",
    "start": "2344839",
    "end": "2350800"
  },
  {
    "text": "starts running this script and that's all I didn't have to interact with my instances to make it do that now you",
    "start": "2350800",
    "end": "2356079"
  },
  {
    "text": "might be wondering well hey that's downloading something from S3 but you",
    "start": "2356079",
    "end": "2361200"
  },
  {
    "text": "didn't give your instance any credentials how do you do that well this is another um I'm actually going to",
    "start": "2361200",
    "end": "2366400"
  },
  {
    "text": "award myself a badge of security best practices right on up in here not only do I not want to deal with Distributing",
    "start": "2366400",
    "end": "2372560"
  },
  {
    "text": "credentials to my um instances but that's also it's also a bad idea for the",
    "start": "2372560",
    "end": "2378720"
  },
  {
    "text": "reasons that you think um so I'm going to I'm going to launch my instances in something called an I am role I am",
    "start": "2378720",
    "end": "2384960"
  },
  {
    "text": "stands for identity and access management this is the security best practice if you need to give your instance permission to do things on",
    "start": "2384960",
    "end": "2391520"
  },
  {
    "text": "behalf of your AWS account you use the principle of leas privilege you give it an I am roll that has permission to do",
    "start": "2391520",
    "end": "2399760"
  },
  {
    "text": "exactly what you want it to be able to do and no more and I'm going to show you exactly the content of this thing um and",
    "start": "2399760",
    "end": "2407680"
  },
  {
    "text": "you'll notice here that I don't actually have an SSH key on these instances because I don't need it I'm not going to",
    "start": "2407680",
    "end": "2413640"
  },
  {
    "text": "be interacting with these instances at all I'm going to launch them they're going to run my test cloudwatch is going to aggregate all the metrics for me and",
    "start": "2413640",
    "end": "2419720"
  },
  {
    "text": "I'm just going to watch the numbers roll in so my I am roll real quick I have a",
    "start": "2419720",
    "end": "2425880"
  },
  {
    "text": "policy governing cloud watch because that script's going to be uh putting metrics up at Cloud watch and I have a",
    "start": "2425880",
    "end": "2433200"
  },
  {
    "text": "um I have a policy governing S3 and for S3 I allow retrieving objects only from",
    "start": "2433200",
    "end": "2439680"
  },
  {
    "text": "my bucket and for cloudwatch I allow only calling put metric data my instance has",
    "start": "2439680",
    "end": "2445079"
  },
  {
    "text": "those permissions and no others and I didn't have to give it any Keys which just makes my test workload a lot a lot",
    "start": "2445079",
    "end": "2451960"
  },
  {
    "text": "more painless so I run my test I just want to show you how I can read back my metrics from cloud watch there's not",
    "start": "2451960",
    "end": "2457880"
  },
  {
    "start": "2453000",
    "end": "2453000"
  },
  {
    "text": "much to this the metric that I care about is that sample count metric which incremented by one each time I went",
    "start": "2457880",
    "end": "2463880"
  },
  {
    "text": "through my tight Loop cloudwatch has been aggregating these for me and I want to know across all of my client",
    "start": "2463880",
    "end": "2471720"
  },
  {
    "text": "instances that I was running how what's the sample count each minute there's a bunch of parameters here that should be",
    "start": "2471720",
    "end": "2476960"
  },
  {
    "text": "fairly explanatory uh the name space for my metric the metric itself the Run ID",
    "start": "2476960",
    "end": "2482839"
  },
  {
    "text": "that I care about in a start time and an end time and I want the sample count statistic other statistics available are",
    "start": "2482839",
    "end": "2488920"
  },
  {
    "text": "sum minimum maximum average these all do what you think but the one I care about is how many of those Righttime statistic",
    "start": "2488920",
    "end": "2495960"
  },
  {
    "text": "data points were reported every minute so you ready for some results here's the",
    "start": "2495960",
    "end": "2501119"
  },
  {
    "text": "result um the number of Righttime sample count statistics purple is with enhanced",
    "start": "2501119",
    "end": "2506359"
  },
  {
    "start": "2502000",
    "end": "2502000"
  },
  {
    "text": "networking uh orange is without and you can see is I have a just a few client",
    "start": "2506359",
    "end": "2511400"
  },
  {
    "text": "instances this looks like a pretty linear scale network is probably not my problem here um",
    "start": "2511400",
    "end": "2517800"
  },
  {
    "text": "but then as you start getting up into this 678 now you see things start to get crowded I start not you know adding more",
    "start": "2517800",
    "end": "2524319"
  },
  {
    "text": "client instances doesn't doesn't necessarily do me that much better um",
    "start": "2524319",
    "end": "2530480"
  },
  {
    "text": "and you see what this picture is telling me is this picture is telling me that because I have enhanced networking on",
    "start": "2530480",
    "end": "2537920"
  },
  {
    "text": "I'm actually able to get more of these rights through and this suggests to me that the problem really was how many",
    "start": "2537920",
    "end": "2543000"
  },
  {
    "text": "packets I could get onto and off my database host now I'm going to show you the same picture",
    "start": "2543000",
    "end": "2549400"
  },
  {
    "text": "same same picture told a slightly different way so this is the ec2 metric",
    "start": "2549400",
    "end": "2555720"
  },
  {
    "text": "remember I turn these on at one minute granularity and I'm launching a new instance every minute that's why you see a continuous graph not a discret graph",
    "start": "2555720",
    "end": "2563520"
  },
  {
    "text": "um this is the this is the one minute sum statistic of dis write bytes in other words how many how many bytes was",
    "start": "2563520",
    "end": "2570920"
  },
  {
    "text": "I writing to disk on my database host every minute now I'm showing you this it",
    "start": "2570920",
    "end": "2576880"
  },
  {
    "text": "looks very similar to the other picture but I'm showing you this because this is this is the one I care about right cuz I",
    "start": "2576880",
    "end": "2583480"
  },
  {
    "text": "I'm paying for this fancy instance type that has you know that has you it's IO",
    "start": "2583480",
    "end": "2590079"
  },
  {
    "text": "optimized so I'm paying for all this great IO performance but that's kind of moot if something else is getting in the",
    "start": "2590079",
    "end": "2596520"
  },
  {
    "text": "way of me fully utilizing it so you can see that this you know this fancy instance with its fancy SSD drives that",
    "start": "2596520",
    "end": "2603800"
  },
  {
    "text": "I'm paying for I'm making it work harder for me cuz I get the the network out of the way there and this is you know this",
    "start": "2603800",
    "end": "2610960"
  },
  {
    "text": "is kind of the Crux of of why you should care about this cuz enhanced networking is going to help you get the network out",
    "start": "2610960",
    "end": "2617400"
  },
  {
    "text": "of the critical path that keeps you from fully utilizing some resource that you're paying for so with just a few",
    "start": "2617400",
    "end": "2624480"
  },
  {
    "text": "minutes left I'm going to quickly just recap what we talked about today uh we talked about placement group uh we",
    "start": "2624480",
    "end": "2631200"
  },
  {
    "text": "talked about placement groups placement groups what it is it's something that you specify when you're running",
    "start": "2631200",
    "end": "2637319"
  },
  {
    "text": "instances a hint to us about where physically to place your instances to optimize for bandwidth and latency among",
    "start": "2637319",
    "end": "2643839"
  },
  {
    "text": "them you got to use them in the same availability Zone because availability zones are physically separate and placement groups means physically",
    "start": "2643839",
    "end": "2651280"
  },
  {
    "text": "close enhanced networking with srov remember we're not your packets are no longer going through this virtualization",
    "start": "2651280",
    "end": "2658200"
  },
  {
    "text": "layer and therefore we are getting you uh a very good packet per second rate",
    "start": "2658200",
    "end": "2664119"
  },
  {
    "text": "and very consistently good and I showed you you know how you see if you're using it and what to what to do if you're not",
    "start": "2664119",
    "end": "2670720"
  },
  {
    "text": "but you would like to um and then finally just the you know I gave you",
    "start": "2670720",
    "end": "2676119"
  },
  {
    "start": "2675000",
    "end": "2675000"
  },
  {
    "text": "some tips on uh how to painlessly model workloads in the AWS Cloud because you",
    "start": "2676119",
    "end": "2681880"
  },
  {
    "text": "know in my opinion the you know the AWS Cloud really shines here you know the agility of being able to easily spin up",
    "start": "2681880",
    "end": "2689000"
  },
  {
    "text": "a test workload you saw I had almost no fancy machine I had no fancy Machinery there running my test workload and I was",
    "start": "2689000",
    "end": "2695760"
  },
  {
    "text": "able to show why I was able to do more with the resources that I was paying for",
    "start": "2695760",
    "end": "2701359"
  },
  {
    "text": "that I cared about than I was without and I really do hope that you go home",
    "start": "2701359",
    "end": "2706640"
  },
  {
    "text": "and and that you try this you know I was trying it with enhanced Network and with",
    "start": "2706640",
    "end": "2711680"
  },
  {
    "text": "networking and without because you know that's what this talk is about but I do hope that you try this with different",
    "start": "2711680",
    "end": "2716800"
  },
  {
    "text": "instance types and you know make sure that you're getting the most out of these resources that you're paying for",
    "start": "2716800",
    "end": "2722200"
  },
  {
    "text": "especially you know those of you those of you you know with serious workloads",
    "start": "2722200",
    "end": "2727280"
  },
  {
    "text": "using kind of the higher end resources and yeah and that's it serious",
    "start": "2727280",
    "end": "2732359"
  },
  {
    "text": "networking for serious workloads thank you so much for listening",
    "start": "2732359",
    "end": "2739760"
  }
]