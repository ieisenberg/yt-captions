[
  {
    "start": "0",
    "end": "56000"
  },
  {
    "text": "- [Dave] My name is Dave Siederer. I'm a Senior Specialist\nSolutions architect for EC2 Mac here at AWS.",
    "start": "3960",
    "end": "10860"
  },
  {
    "text": "Today, I am here to show you\nhow to spin up an EC2 Mac, connect to it, and ensure that it is enrolled\nin mobile device management.",
    "start": "10860",
    "end": "19380"
  },
  {
    "text": "And we'll be using a Jamf cloud server for today's demonstration. So to start with, let's\ngo to the EC2 section",
    "start": "19380",
    "end": "27150"
  },
  {
    "text": "of the AWS console, which I have pulled up right here. So there's a few ways I can get to that.",
    "start": "27150",
    "end": "32820"
  },
  {
    "text": "Obviously I've been here before, so it's actually in my\nmost recently visited. I've also selected this as a favorite,",
    "start": "32820",
    "end": "39600"
  },
  {
    "text": "and it's up at this bar here. But let's say you're coming in\nwithout having done anything,",
    "start": "39600",
    "end": "44610"
  },
  {
    "text": "we can actually just search EC2 in here, and it'll take us to the same place. If you do ever want to set\nthat favor in the top bar too,",
    "start": "44610",
    "end": "52590"
  },
  {
    "text": "just a click on that\nlittle star will do that.",
    "start": "52590",
    "end": "55443"
  },
  {
    "start": "56000",
    "end": "92000"
  },
  {
    "text": "So here we are in the EC2 console. In order to use EC2 Mac instances,",
    "start": "57690",
    "end": "63989"
  },
  {
    "text": "physical Apple hardware\nis required to run macOS. If you'd like to take a look, actually,",
    "start": "63990",
    "end": "69450"
  },
  {
    "text": "this is an EC2 Mac instance\nin all of its glory and that includes the\ngreenboard at the bottom,",
    "start": "69450",
    "end": "76799"
  },
  {
    "text": "which is what's called AWS Nitro. That is providing storage, networking,",
    "start": "76800",
    "end": "81900"
  },
  {
    "text": "and more over the wire over\nThunderbolt to that Mac Mini. And the black box at the right,",
    "start": "81900",
    "end": "88440"
  },
  {
    "text": "there is actually a robot finger\nthat operates the Mac Mini. So let's take a look at\nwhat it takes to launch",
    "start": "88440",
    "end": "96270"
  },
  {
    "text": "and connect to our Mac Mini. First, I mentioned this\nis a dedicated host, so we're going to go to the left here",
    "start": "96270",
    "end": "103140"
  },
  {
    "text": "under Instances to Dedicated Hosts. Next, I'm going to click this",
    "start": "103140",
    "end": "109410"
  },
  {
    "text": "Allocate Dedicated Host button here. I've got no dedicated hosts here yet, so clicking this button",
    "start": "109410",
    "end": "115409"
  },
  {
    "text": "or the one in the middle will\ntake you to the same place, and here is where we can name our host.",
    "start": "115410",
    "end": "120750"
  },
  {
    "text": "So we'll call this Demo Mac. Next is the instance family,",
    "start": "120750",
    "end": "125940"
  },
  {
    "text": "and this is how you\nselect what type of Mac that you would like. We have a few different ones.",
    "start": "125940",
    "end": "131910"
  },
  {
    "text": "Not all instances are\navailable in all regions.",
    "start": "131910",
    "end": "135213"
  },
  {
    "text": "To take a look at what's\navailable during our demo today, we have a mac1 instance, which is an X86 Mac Mini\nwith 32 gigs of RAM,",
    "start": "136920",
    "end": "145110"
  },
  {
    "text": "a mac2 instance, which is an M1 Mac Mini with 16 gigabytes of RAM,",
    "start": "145110",
    "end": "150450"
  },
  {
    "text": "the max2-m1ultra, specifically for demanding applications.",
    "start": "150450",
    "end": "155880"
  },
  {
    "text": "This is a Mac Studio with\n128 gigabytes of RAM. The mac2-m2 has 24 gigs,",
    "start": "155880",
    "end": "163230"
  },
  {
    "text": "and the m2pro here finally has 32. It's important of course\nto select the right type",
    "start": "163230",
    "end": "169650"
  },
  {
    "text": "of instance for your workload. For today's, let's work with a mac2-m2.",
    "start": "169650",
    "end": "174903"
  },
  {
    "text": "So the instance type drop down, there is actually only one option.",
    "start": "176280",
    "end": "180650"
  },
  {
    "text": "This is the max2-m2.metal, and that .metal is there to remind you that these instances are bare metal.",
    "start": "182151",
    "end": "189810"
  },
  {
    "text": "You have access to all of\nthe underlying compute power within an EC2 Mac instance,",
    "start": "189810",
    "end": "195150"
  },
  {
    "text": "and that's useful to do\na whole lot of things, including things like\ntype two virtualization. Next, we're going to choose\nour availability zone.",
    "start": "195150",
    "end": "203099"
  },
  {
    "text": "And this may vary depending\non of course your region.",
    "start": "203100",
    "end": "208100"
  },
  {
    "text": "I'm going to select us-west-2a\nfor our demo to start. If there are no M2 Macs\navailable in us-west-2a,",
    "start": "208140",
    "end": "215250"
  },
  {
    "text": "we're going to receive an error message that will let us know where\nwe can go looking for them.",
    "start": "215250",
    "end": "220620"
  },
  {
    "text": "So three check boxes here. One part of that process involves ensuring",
    "start": "220620",
    "end": "227160"
  },
  {
    "text": "that this image is going\non to a dedicated host. So auto-placement means that as long",
    "start": "227160",
    "end": "233910"
  },
  {
    "text": "as this host is available, I don't necessarily need to specify which host is going to get\nour instance in the end.",
    "start": "233910",
    "end": "240780"
  },
  {
    "text": "So I'm going to enable\nthat for today's demo. Host recovery and host maintenance are not supported for EC2 Mac instances.",
    "start": "240780",
    "end": "248403"
  },
  {
    "text": "I'll point out a few other things here. Quantity, this is possible\nto do as a single operation",
    "start": "249660",
    "end": "255390"
  },
  {
    "text": "for multiple dedicated hosts. Once you've done this, you can actually take a\nlook under this triangle,",
    "start": "255390",
    "end": "262139"
  },
  {
    "text": "CLI commands. If you wanted to do the same operation without having to go through the web,",
    "start": "262140",
    "end": "268320"
  },
  {
    "text": "here is the AWS CLI\ncommand in which to do so.",
    "start": "268320",
    "end": "272733"
  },
  {
    "text": "One very important part before we click Allocate\nis going to be billing,",
    "start": "274050",
    "end": "280050"
  },
  {
    "text": "and billing starts when we click Allocate. Billing ends when we release the host",
    "start": "280050",
    "end": "286470"
  },
  {
    "text": "from the dedicated host list. The software license\nagreement for macOS specifies",
    "start": "286470",
    "end": "292200"
  },
  {
    "text": "that a minimum of 24 hours be required when a Mac Mini is leased, which includes the dedicated\nhost allocation here.",
    "start": "292200",
    "end": "299610"
  },
  {
    "text": "So once you take your Mac, it's\nnot possible to give it back for 24 hours, from that second on,",
    "start": "299610",
    "end": "306090"
  },
  {
    "text": "it's possible to release\nthat host and stop billing. So I'm going to click Allocate here.",
    "start": "306090",
    "end": "312060"
  },
  {
    "text": "And I mentioned there's an error if I was looking in a place\nthat didn't have capacity.",
    "start": "314100",
    "end": "319699"
  },
  {
    "text": "So I'm going to go back up\nhere, and just as guided, change my availability zone to 2B or 2C.",
    "start": "319699",
    "end": "325790"
  },
  {
    "text": "So let's try 2B now and click\nAllocate. And there we go.",
    "start": "325790",
    "end": "330790"
  },
  {
    "start": "329000",
    "end": "776000"
  },
  {
    "text": "We have our host, so we have a Mac. As a mental model, one way to think about this\nis that now we have a Mac,",
    "start": "330960",
    "end": "338520"
  },
  {
    "text": "a physical Mac in our hands\nthat's not configured, it's not connected to anything. We just have a Mac.",
    "start": "338520",
    "end": "344820"
  },
  {
    "text": "In order to start that, and of course do anything\nuseful with that Mac, we're going to need to\nstart an instance on it.",
    "start": "344820",
    "end": "352830"
  },
  {
    "text": "So let's go to instances\nin the left side here, under Instances,",
    "start": "352830",
    "end": "358053"
  },
  {
    "text": "and we're going to click\nLaunch Instances on the right because we don't have any",
    "start": "359280",
    "end": "363530"
  },
  {
    "text": "in this list of course already. And let's give this a very,",
    "start": "364740",
    "end": "370169"
  },
  {
    "text": "we can give this a similar\nname, Demo Mac Instance.",
    "start": "370170",
    "end": "375170"
  },
  {
    "text": "Next, we're going to go down to the Amazon Machine\nImage Picker here, or AMI.",
    "start": "376740",
    "end": "382500"
  },
  {
    "text": "AMIs are a bit unique because when it comes to macOS, imaging is not really a supported method",
    "start": "382500",
    "end": "388800"
  },
  {
    "text": "of configuration on classic machines. However, in the cloud,",
    "start": "388800",
    "end": "394710"
  },
  {
    "text": "imaging is something that\nis not only supported, but can be used to drastically\ndecrease start times",
    "start": "394710",
    "end": "402150"
  },
  {
    "text": "when it comes to complex programs, things like Xcode or\nother IDEs that take a lot",
    "start": "402150",
    "end": "409680"
  },
  {
    "text": "of space and time to install\nand get started with. What we're going to do today though",
    "start": "409680",
    "end": "415500"
  },
  {
    "text": "is use one of the Amazon Vended AMIs. So under Quick Start here,\nI'm gonna click macOS.",
    "start": "415500",
    "end": "422943"
  },
  {
    "text": "And here there's a dropdown\nfor Amazon Machine Image. And this is, I've got\na couple choices here. Sonoma, Ventura, Monterey.",
    "start": "424230",
    "end": "431280"
  },
  {
    "text": "It gives us the last three\nmost recent versions, and it is possible to go back\nto other versions by searching",
    "start": "431280",
    "end": "438840"
  },
  {
    "text": "through the AMI list on another page. Let's do Sonoma here.",
    "start": "438840",
    "end": "444060"
  },
  {
    "text": "And very importantly, there\nis an architecture drop down. And this right now as it is is set to X86,",
    "start": "444060",
    "end": "452490"
  },
  {
    "text": "which is mac1.metal instances only. I'm going to change this\nfrom Mac to Mac-Arm,",
    "start": "452490",
    "end": "460230"
  },
  {
    "text": "and that means that this image is made to start up the ARM-based Macs.",
    "start": "460230",
    "end": "465360"
  },
  {
    "text": "So I've got a mac2-m2\nthat we have allocated. We'll keep that selected, and next,",
    "start": "465360",
    "end": "471660"
  },
  {
    "text": "we're gonna go to key pair. In order to connect to this Mac, the image does not come\npreset with a password,",
    "start": "471660",
    "end": "479400"
  },
  {
    "text": "but the default user account\ndoes have an SSH key pair. So it's possible to connect",
    "start": "479400",
    "end": "485699"
  },
  {
    "text": "and of course perform additional\noperations once connected. So we will give this a\nkey here, use that one.",
    "start": "485700",
    "end": "493712"
  },
  {
    "text": "And next, under Network Settings, we're gonna take a look specifically here",
    "start": "495000",
    "end": "500190"
  },
  {
    "text": "at the firewall or security groups. Specifically, we want to\nmake sure that we're able",
    "start": "500190",
    "end": "507090"
  },
  {
    "text": "to access this Mac once it comes up. So I do have some existing security groups",
    "start": "507090",
    "end": "515540"
  },
  {
    "text": "which have this rule, but we're gonna just\ncreate it here to show. Remember, once you\ncreate the security group",
    "start": "515790",
    "end": "522810"
  },
  {
    "text": "under this dropdown, you can actually go to Select\nExisting from here on out. That way you don't end up with\nLaunch Wizard 27 over time.",
    "start": "522810",
    "end": "530550"
  },
  {
    "text": "So I'm gonna have allow SSH traffic from, and I only want to be my IP.",
    "start": "530550",
    "end": "536190"
  },
  {
    "text": "We're gonna make sure\nthat no other IP needs to communicate with this Mac right now.",
    "start": "536190",
    "end": "541949"
  },
  {
    "text": "So I'm just gonna take port 22 and make sure that my local IP",
    "start": "541950",
    "end": "547470"
  },
  {
    "text": "is the only one able to access that. Next step is storage,",
    "start": "547470",
    "end": "553139"
  },
  {
    "text": "and I'm gonna click the\nAdvanced link right here. And next, I'm gonna click the\ntriangle next to volume 1.",
    "start": "553140",
    "end": "562080"
  },
  {
    "text": "This is gonna give us some\ndetails on the boot volume and how performant that will be.",
    "start": "562080",
    "end": "569040"
  },
  {
    "text": "Let's make a little change here. We're gonna increase our IOPS to 10,000",
    "start": "569040",
    "end": "574920"
  },
  {
    "text": "and our throughput to 400. This is not exact,",
    "start": "574920",
    "end": "580139"
  },
  {
    "text": "but it can be similar to the way that the built-in EC2 Mac,\nthe SSD built into a Mac.",
    "start": "580140",
    "end": "587630"
  },
  {
    "text": "This setup specifically gives\nus a bit more performance and is closer in performance\nto the built-in SSD",
    "start": "595046",
    "end": "601889"
  },
  {
    "text": "of the Mac Mini itself. So next, we're going to go to\nAdvanced Details down here.",
    "start": "601890",
    "end": "608760"
  },
  {
    "text": "Click the triangle to disclose, and there are a lot of advanced details. We won't be going over\nevery single one here,",
    "start": "608760",
    "end": "615569"
  },
  {
    "text": "but we will highlight a\nfew very important ones that are going to be\nused in our project here.",
    "start": "615570",
    "end": "622380"
  },
  {
    "text": "So first, IAM instance profile. This allows your EC2 Mac instance",
    "start": "622380",
    "end": "629399"
  },
  {
    "text": "to access other AWS resources. In our example,",
    "start": "629400",
    "end": "634830"
  },
  {
    "text": "we're going to be accessing\nan AWS Secrets Manager secret,",
    "start": "634830",
    "end": "639830"
  },
  {
    "text": "which contains some\ncredentials for an API. And in order to do so,",
    "start": "640020",
    "end": "645900"
  },
  {
    "text": "this Mac needs the rights to read that. So I have an instance profile created,",
    "start": "645900",
    "end": "651570"
  },
  {
    "text": "and we do have templates for this as well. So this will ensure that when\nI start this Mac instance,",
    "start": "651570",
    "end": "656760"
  },
  {
    "text": "it will be able to read the password, the credentials that are\nrequired to hit the API",
    "start": "656760",
    "end": "664200"
  },
  {
    "text": "and perform MDM enrollment. Scrolling down just a bit here, there is a very important dropdown here",
    "start": "664200",
    "end": "671430"
  },
  {
    "text": "because the instant will not start if this is not selected. You will receive an error,\nand that is tenancy.",
    "start": "671430",
    "end": "677763"
  },
  {
    "text": "Under here, this needs to\nbe set to dedicated host in order to work with EC2 Mac.",
    "start": "679140",
    "end": "685533"
  },
  {
    "text": "Since in the last step, I had turned on that auto-placement, I don't need to do anything else.",
    "start": "686370",
    "end": "692519"
  },
  {
    "text": "This will automatically say okay, I have a mac2-m2.metal, this is going to start\nthat instance on it.",
    "start": "692520",
    "end": "699870"
  },
  {
    "text": "If I didn't do that, I\ncould go to target host by, host ID, or host resource group,",
    "start": "699870",
    "end": "704910"
  },
  {
    "text": "which is used with AWS License Manager and can be covered in depth",
    "start": "704910",
    "end": "711930"
  },
  {
    "text": "moreso on our blog when\nit comes to auto-scaling.",
    "start": "711930",
    "end": "716313"
  },
  {
    "text": "So scrolling down just a bit more. This is the last thing\nI did want to point out,",
    "start": "718650",
    "end": "725730"
  },
  {
    "text": "which is the user data field. This is, very simply, a script that runs\nduring the boot process.",
    "start": "725730",
    "end": "732779"
  },
  {
    "text": "It's the last script that runs during the boot process of an EC2 Mac. So this allows you to do things\npreset, certain operations,",
    "start": "732780",
    "end": "740760"
  },
  {
    "text": "automate certain things, and do so just by\npasting in a shell script",
    "start": "740760",
    "end": "746730"
  },
  {
    "text": "rather than any remote\nconfiguration to start.",
    "start": "746730",
    "end": "751730"
  },
  {
    "text": "So for this particular instance, we're not going to use\nthe user data field, and we'll be doing some of\nthe operations manually.",
    "start": "754530",
    "end": "762363"
  },
  {
    "text": "So here we go, we're\ngonna launch our instance. And we'll see just for a moment,",
    "start": "763710",
    "end": "769200"
  },
  {
    "text": "we've gone from blue to green. So we've initiated the\nlaunch of our instance here,",
    "start": "769200",
    "end": "775053"
  },
  {
    "start": "776000",
    "end": "808000"
  },
  {
    "text": "and let's take a look at that. The instance is right now\ngoing through a period of time",
    "start": "777990",
    "end": "785330"
  },
  {
    "text": "that the status check\nis set to initializing. An EC2 Mac instance on average\ntakes about six to 20 minutes",
    "start": "785730",
    "end": "791580"
  },
  {
    "text": "to boot depending on\nof course the contents of the image itself.",
    "start": "791580",
    "end": "796623"
  },
  {
    "text": "So as it's happening, let's take a look at\nwhat else we've set up in order to get our EC2 Mac\ninstance enrolled into MDM.",
    "start": "798270",
    "end": "805893"
  },
  {
    "start": "808000",
    "end": "857000"
  },
  {
    "text": "There'll be a link in the\ndescription to this GitHub repo. But right here, this\nis for Enroll EC2 Mac,",
    "start": "809040",
    "end": "816990"
  },
  {
    "text": "and what we've done is\nset up our credentials.",
    "start": "816990",
    "end": "821253"
  },
  {
    "text": "So I have a secret in AWS Secrets Manager, and we'll take a look.",
    "start": "822120",
    "end": "827190"
  },
  {
    "text": "Let's take a look in\nthere and see our secret.",
    "start": "827190",
    "end": "829490"
  },
  {
    "text": "Actually, my secret is\nin a different region. So let's see my secret in that region.",
    "start": "833130",
    "end": "839550"
  },
  {
    "text": "So these are credentials, and they cannot be retrieved",
    "start": "839550",
    "end": "847029"
  },
  {
    "text": "without an account that\nhas the rights to do so. These are also encoded with a\nhardware encryption key too.",
    "start": "849361",
    "end": "857390"
  },
  {
    "start": "857000",
    "end": "998000"
  },
  {
    "text": "What we're going to do\nafterwards is actually go in and go through our steps for AMI setup.",
    "start": "858000",
    "end": "865743"
  },
  {
    "text": "So we're going to connect\nto our EC2 Mac instance, set a password, enable screen sharing,",
    "start": "866610",
    "end": "873090"
  },
  {
    "text": "and run the setup routine\nfor Enroll EC2 Mac.",
    "start": "873090",
    "end": "876783"
  },
  {
    "text": "Let's take a look at our\ninstance status here. I can click this to refresh.",
    "start": "881190",
    "end": "889353"
  },
  {
    "text": "And it looks like our EC2 Mac instance is ready to be connected to. So next, let's click Connect here,",
    "start": "893280",
    "end": "900123"
  },
  {
    "text": "and we're going to,\nfor this demonstration, use the SSH client in order to connect. We're also going to make a small change",
    "start": "901080",
    "end": "908340"
  },
  {
    "text": "to the SSH line in order to\ngive us access also to the GUI. So let's open up our terminal here.",
    "start": "908340",
    "end": "915070"
  },
  {
    "text": "And from here, we're going to\npaste in our example command.",
    "start": "917730",
    "end": "922023"
  },
  {
    "text": "And I am using Amazon Q right now, which already knows what I\ntypically do in my commands.",
    "start": "923790",
    "end": "930750"
  },
  {
    "text": "In this particular case, it is actually predicting the next thing that I'm going to introduce,",
    "start": "930750",
    "end": "936240"
  },
  {
    "text": "which is the concept of redirecting ports. Since we're going to SSH\ninto this particular Mac",
    "start": "936240",
    "end": "942870"
  },
  {
    "text": "over port 22, we do need port 5900 in\norder to perform VNC tasks",
    "start": "942870",
    "end": "950930"
  },
  {
    "text": "or use Apple Remote\nDesktop or screen sharing. So we're going to use that\nredirect that's a part of SSH",
    "start": "951900",
    "end": "959910"
  },
  {
    "text": "by doing this dash -L and redirecting port 5900\nto local host port 5900.",
    "start": "959910",
    "end": "966933"
  },
  {
    "text": "Let's get connected. Since this is our first time connecting, we will need to verify\nour fingerprint here.",
    "start": "968190",
    "end": "974613"
  },
  {
    "text": "And we are connected to our\nEC2 Mac instance right now. So to start with, we will\nneed access to the GUI",
    "start": "975930",
    "end": "985709"
  },
  {
    "text": "to perform our MDM enrollment. So we're gonna go up to...",
    "start": "985710",
    "end": "991880"
  },
  {
    "start": "998000",
    "end": "1236000"
  },
  {
    "text": "So to get connected to the GUI, we can follow our AMI setup guide here.",
    "start": "998580",
    "end": "1006200"
  },
  {
    "text": "First, we're going to\nneed to set a password, and then enable screen sharing",
    "start": "1006200",
    "end": "1012770"
  },
  {
    "text": "in order to connect to the GUI itself. So I'm gonna take this line, and I'm going to make a change of course",
    "start": "1012770",
    "end": "1019580"
  },
  {
    "text": "to the actual password itself to match what is in my AWS\nSecrets Manager secret.",
    "start": "1019580",
    "end": "1027459"
  },
  {
    "text": "And I'm gonna have this\nclear the screen afterwards.",
    "start": "1036680",
    "end": "1039293"
  },
  {
    "text": "There we go, we have\naactivated screen sharing and set a password for the\ndefault EC2 dash user account.",
    "start": "1041990",
    "end": "1049790"
  },
  {
    "text": "So now that we have that,\nwe're going to get connected",
    "start": "1049790",
    "end": "1052590"
  },
  {
    "text": "with the Apple screen sharing app. And I'm going to use this command, open vnc://localhost:5900",
    "start": "1055215",
    "end": "1063940"
  },
  {
    "text": "because I've got that\nport that is forwarded to my local Mac here. Let's do that.",
    "start": "1064010",
    "end": "1069770"
  },
  {
    "text": "That is going to open up\nthe screen sharing app and give us a prompt to\nconnect with our credentials.",
    "start": "1071017",
    "end": "1076970"
  },
  {
    "text": "And just click Sign In here. We're going to do the\nstandard screen sharing type, which is most trouble-free\nin testing, continue here.",
    "start": "1076970",
    "end": "1085763"
  },
  {
    "text": "So now we are connected remotely\nto our EC2 Mac instance,",
    "start": "1086840",
    "end": "1091840"
  },
  {
    "text": "and we're at a login window. So we've set that password just a moment ago in the terminal.",
    "start": "1093290",
    "end": "1100010"
  },
  {
    "text": "We're going to use that\npassword to log in here. So we've got our Mac Mini.",
    "start": "1100010",
    "end": "1106700"
  },
  {
    "text": "Let's make sure that\nthis is fully on screen. We are connected to our Mac Mini,",
    "start": "1106700",
    "end": "1110783"
  },
  {
    "text": "we're connected to our Mac Mini, and we are next going to go into the utilities folder.",
    "start": "1111830",
    "end": "1119600"
  },
  {
    "text": "I can use the Go menu to get there here or Command + Shift + U.",
    "start": "1119600",
    "end": "1124013"
  },
  {
    "text": "And in a stunning twist of fate, we're actually going to be\ngoing back into the terminal.",
    "start": "1125270",
    "end": "1130560"
  },
  {
    "text": "On our remote machine, we're going to run a few\ncommands to make sure that Enroll EC2 Mac is configured.",
    "start": "1132020",
    "end": "1138683"
  },
  {
    "text": "Then we're going to set\nit up with its permissions and do what we need to do to make sure that any other instances launched",
    "start": "1139520",
    "end": "1146150"
  },
  {
    "text": "will be launched automatically,\nincluding this enrollment. So first, what we'll need to do",
    "start": "1146150",
    "end": "1153960"
  },
  {
    "text": "is set our auto-login because in order for enrollment\nto happen automatically,",
    "start": "1155690",
    "end": "1161270"
  },
  {
    "text": "we will need the user itself to log in automatically as well.",
    "start": "1161270",
    "end": "1166703"
  },
  {
    "text": "So we're gonna change this\nautomatically login to EC2 user, we'll use the password",
    "start": "1168830",
    "end": "1174110"
  },
  {
    "text": "that we've set up both times there. First, I'm going to be running a command",
    "start": "1174110",
    "end": "1179360"
  },
  {
    "text": "that's going to set the region for our secret, since this particular Mac is\nbeing launched in US West 2,",
    "start": "1179360",
    "end": "1186049"
  },
  {
    "text": "but my secret is in US East 1, we do need to let the script know that. So we're going to use this defaults right",
    "start": "1186050",
    "end": "1192740"
  },
  {
    "text": "and set that region for us here. Next, I'm going to use a pair of commands to download the script\ndirectly from GitHub,",
    "start": "1192740",
    "end": "1200720"
  },
  {
    "text": "and also to set the\nscript to be executable.",
    "start": "1200720",
    "end": "1204923"
  },
  {
    "text": "So here I've got a curl command that is bringing down the script itself.",
    "start": "1205940",
    "end": "1212270"
  },
  {
    "text": "And then I'm doing this chmod command and adding X, which is executable. I'll click Return there.",
    "start": "1212270",
    "end": "1219529"
  },
  {
    "text": "It's a fairly small script\nso it doesn't take too long to download, especially via AWS lines.",
    "start": "1219530",
    "end": "1225293"
  },
  {
    "text": "So next, we need to run our\nscript and get it set up.",
    "start": "1226190",
    "end": "1230242"
  },
  {
    "text": "So here, if we're following along here,",
    "start": "1231620",
    "end": "1233813"
  },
  {
    "text": "we do have the secret itself. This has been set already.",
    "start": "1237470",
    "end": "1243470"
  },
  {
    "text": "So next up we're going to\nuse this here, terminal, type the following command,",
    "start": "1243470",
    "end": "1249260"
  },
  {
    "text": "and we're going to use osascript with a setup flag.",
    "start": "1249260",
    "end": "1254423"
  },
  {
    "text": "The first thing it does is check if its credentials are\navailable and able to be used. Then it'll install this launch agent",
    "start": "1255710",
    "end": "1262850"
  },
  {
    "text": "and go through a short setup routine. It's gonna give us a few prompts. This is the first one, we\nneed to allow osascript",
    "start": "1262850",
    "end": "1269420"
  },
  {
    "text": "to control system events. And one more is accessibility.",
    "start": "1269420",
    "end": "1274550"
  },
  {
    "text": "So let's go here and scroll down. Here's our accessibility\non the right side here.",
    "start": "1274550",
    "end": "1281480"
  },
  {
    "text": "And I just need to flip the\nswitch next to osascript and give this our password one more time.",
    "start": "1281480",
    "end": "1288410"
  },
  {
    "text": "After a moment, it does take\na moment to finish its tests and pre-installation of any software,",
    "start": "1288410",
    "end": "1294653"
  },
  {
    "text": "it will give us this prompt here that the first run is\nsuccessfully prepared.",
    "start": "1296390",
    "end": "1301850"
  },
  {
    "text": "So what that means, first, it is very important to click OK here. Otherwise the script will actually go back",
    "start": "1301850",
    "end": "1308750"
  },
  {
    "text": "through its first run instead. This actually does change\nthe launch agent itself.",
    "start": "1308750",
    "end": "1316580"
  },
  {
    "text": "So I'll click OK. Next, before I do anything next,",
    "start": "1316580",
    "end": "1321950"
  },
  {
    "text": "I can close out of terminal as well. I'm going to take an image of\nthis Mac so that the next Mac",
    "start": "1321950",
    "end": "1330350"
  },
  {
    "start": "1324000",
    "end": "1443000"
  },
  {
    "text": "that I start will automatically enroll without any of these steps. So back to the AWS console.",
    "start": "1330350",
    "end": "1339200"
  },
  {
    "text": "We're gonna go back to EC2 again. I'll use my favorite in the\nupper left to get there.",
    "start": "1339200",
    "end": "1344303"
  },
  {
    "text": "And next, we're gonna go to our instance, click on the instance\nitself, and go to Actions,",
    "start": "1345170",
    "end": "1351683"
  },
  {
    "text": "Image and Templates, Create Image. This image does need a name",
    "start": "1352550",
    "end": "1358640"
  },
  {
    "text": "and it cannot be modified after creation. However of course an image can be copied",
    "start": "1358640",
    "end": "1362880"
  },
  {
    "text": "across availability zones across regions to where it needs to go as well. So let's call this Demo Mac.",
    "start": "1363742",
    "end": "1370313"
  },
  {
    "text": "And we've got two options\nhere. One is no reboot. This is something to keep in mind",
    "start": "1374840",
    "end": "1381840"
  },
  {
    "text": "that may be useful during testing. It's not necessarily\nadvisable in production, but with EC2 Mac instances,",
    "start": "1384526",
    "end": "1391220"
  },
  {
    "text": "it's possible to kick off and\ncompletely take this image without causing the Mac at the\nother end to have to restart.",
    "start": "1391220",
    "end": "1398722"
  },
  {
    "text": "Of course that does come with some caveats that there are going to be some caches that haven't been cleared yet.",
    "start": "1399620",
    "end": "1406190"
  },
  {
    "text": "Your image may be a bit\nlarger than it needs to be because of those sort of things.",
    "start": "1406190",
    "end": "1410423"
  },
  {
    "text": "The other checkbox here\nis delete on termination, which means right now, by default,",
    "start": "1411590",
    "end": "1417260"
  },
  {
    "text": "when I make my instance, it\nmakes a volume alongside of it,",
    "start": "1417260",
    "end": "1422260"
  },
  {
    "text": "and when I terminate my instance, it's got this checkbox already enabled. That means it's going to get rid",
    "start": "1422360",
    "end": "1427490"
  },
  {
    "text": "of that particular image as well. That doesn't affect the\nactual underlying AMI,",
    "start": "1427490",
    "end": "1434659"
  },
  {
    "text": "the Amazon Machine Image\nlike we're making here. It would only apply to that specific instance's\nversion of the drive.",
    "start": "1434660",
    "end": "1443123"
  },
  {
    "start": "1443000",
    "end": "1670000"
  },
  {
    "text": "So I'm going to leave delete\non termination enabled here, and I'm also going to\nleave no reboot enabled",
    "start": "1444170",
    "end": "1450740"
  },
  {
    "text": "as we just did a moment ago. I'm gonna click Create Image here,",
    "start": "1450740",
    "end": "1455049"
  },
  {
    "text": "and right now, the system\nis now creating the AMI from this Demo Mac instance.",
    "start": "1458600",
    "end": "1465503"
  },
  {
    "text": "All the important things that we did, giving the permissions to the\nscript and making sure that that user is automatically logging in,",
    "start": "1466400",
    "end": "1473539"
  },
  {
    "text": "those things are carried over in this AMI. On the next Mac that this launch is on,",
    "start": "1473540",
    "end": "1480380"
  },
  {
    "text": "none of what we needed\nto do would be done. We would actually just take this AMI.",
    "start": "1480380",
    "end": "1486472"
  },
  {
    "text": "And let's take a look at\nwhat that would look like. Here's our image.",
    "start": "1487430",
    "end": "1493190"
  },
  {
    "text": "At the moment, it is pending, until this image is available,",
    "start": "1493190",
    "end": "1498650"
  },
  {
    "text": "it will not be available. So let's take a look\nat our EC2 Mac instance that's running right now.",
    "start": "1498650",
    "end": "1504880"
  },
  {
    "text": "Since our image has started already, it's basically frozen in time. So from here, I can use\nthis instance normally.",
    "start": "1505730",
    "end": "1514400"
  },
  {
    "text": "And that will not have an effect on the image that it's creating.",
    "start": "1514400",
    "end": "1519529"
  },
  {
    "text": "In order to get this enrolled\nimmediately and automated, let's just log out and log back in.",
    "start": "1519530",
    "end": "1527540"
  },
  {
    "text": "So log out EC2 User. We don't have to reopen\nwindows when logging back in. Doesn't matter, and once more,",
    "start": "1527540",
    "end": "1535163"
  },
  {
    "text": "what I'm going to do is take my hands completely off the keyboard and mouse, and we're going to watch this\nparticular instance enroll.",
    "start": "1536090",
    "end": "1544133"
  },
  {
    "text": "So it opens up System Settings. This actually is calling the Jamf API",
    "start": "1546860",
    "end": "1551900"
  },
  {
    "text": "and receiving a computer\ninvitation authorization in order to get this enrolled,",
    "start": "1551900",
    "end": "1557480"
  },
  {
    "text": "creates a profile from there, and automates all of the\nactions that it takes to ensure",
    "start": "1557480",
    "end": "1563179"
  },
  {
    "text": "that that profile makes it\ndown to the EC2 Mac instance and is given privileges to manage it.",
    "start": "1563180",
    "end": "1570590"
  },
  {
    "text": "So in that time, that was\nthe enrollment itself.",
    "start": "1570590",
    "end": "1575590"
  },
  {
    "text": "I can actually go back\ninto System Settings now under Privacy and Security,",
    "start": "1575960",
    "end": "1580970"
  },
  {
    "text": "and way at the bottom here, Profiles. This is gonna show me\nwhat's been coming down. You can see my Mac is being supervised",
    "start": "1580970",
    "end": "1587480"
  },
  {
    "text": "and managed by my test portal here. Got not only my MDM profile, but also additional profiles\nfrom Jamf that are coming down.",
    "start": "1587480",
    "end": "1596150"
  },
  {
    "text": "And as the Jamf recon occurs on cue,",
    "start": "1596150",
    "end": "1600877"
  },
  {
    "text": "additional profiles will arrive as well, such as this restrictions profile. We can close out of here.",
    "start": "1602390",
    "end": "1608570"
  },
  {
    "text": "And now let's take a\nlook in our Jamf console at this particular instance.",
    "start": "1608570",
    "end": "1613580"
  },
  {
    "text": "So here I am loading\nup the EC2 Mac instance in my Jamf Pro console to take a look",
    "start": "1613580",
    "end": "1619730"
  },
  {
    "text": "at the manageability of that. So it's got all of its information.",
    "start": "1619730",
    "end": "1623872"
  },
  {
    "text": "Specifically, it is supervised. So this will ensure that it is able to receive privileged\ncommands from the MDM side.",
    "start": "1624830",
    "end": "1631913"
  },
  {
    "text": "The MDM capability is yes\nand it is user-approved. So this allows us to do anything via MDM",
    "start": "1633350",
    "end": "1641269"
  },
  {
    "text": "that we can do to any other\nuser-initiated enrollment or profile-based enrollment.",
    "start": "1641270",
    "end": "1646730"
  },
  {
    "text": "This also does give us full\ndetails on the hardware and of course the opportunity to include extension attributes",
    "start": "1646730",
    "end": "1653390"
  },
  {
    "text": "like the EC2 host ID for example. This is an extension\nattribute that was written",
    "start": "1653390",
    "end": "1658670"
  },
  {
    "text": "to give us that information. Also have a few here\nat instance ID, region, and whether this is an\nEC2 Mac instance or not.",
    "start": "1658670",
    "end": "1666563"
  },
  {
    "text": "I use that for a smart group specifically. But there's our Mac, our managed EC2 Mac",
    "start": "1667610",
    "end": "1673400"
  },
  {
    "start": "1670000",
    "end": "1870000"
  },
  {
    "text": "managed by Jamf via MDM automatically. Let's take a look at what it\ntakes to add a second one.",
    "start": "1673400",
    "end": "1679613"
  },
  {
    "text": "We're going to do something very similar. We're going to add another dedicated host.",
    "start": "1680510",
    "end": "1684620"
  },
  {
    "text": "Do the same mac2-m2, and we'll call this Demo Enroll.",
    "start": "1688160",
    "end": "1694193"
  },
  {
    "text": "And we'll give it availability zone. We'll have that match to 2B. And same thing as before,\nauto-placement on,",
    "start": "1696860",
    "end": "1703910"
  },
  {
    "text": "and I'm making sure the\nrecovery and maintenance are off because they'll give\nus an error otherwise.",
    "start": "1703910",
    "end": "1708280"
  },
  {
    "text": "We have our new host. Now we're going to go to our AMIs. The image has an available status now,",
    "start": "1709610",
    "end": "1716750"
  },
  {
    "text": "so that means we are able to\nlaunch up our instance from it.",
    "start": "1716750",
    "end": "1720323"
  },
  {
    "text": "So we'll call this Demo Enroll.",
    "start": "1723080",
    "end": "1724763"
  },
  {
    "text": "And we've got our instance\ntype already filled in here. I'll use the same key\npair in order to log in.",
    "start": "1728150",
    "end": "1733700"
  },
  {
    "text": "But for this particular\ndemo, I won't be logging in. We'll actually just watch that\narrive in the Jamf portal.",
    "start": "1733700",
    "end": "1743320"
  },
  {
    "text": "I'm gonna set this to\nthe same security group I created with the previous step. I don't need to configure my storage",
    "start": "1743450",
    "end": "1749750"
  },
  {
    "text": "because that's already been done. And the two very important steps here. Number one, the IAM instance profile.",
    "start": "1749750",
    "end": "1756980"
  },
  {
    "text": "I'm going to need to make sure that this Mac has access to that secret. None of the credentials for the Jamf API",
    "start": "1756980",
    "end": "1765620"
  },
  {
    "text": "or for the Mac instance\nitself are saved locally. The credentials as a part of this",
    "start": "1765620",
    "end": "1771049"
  },
  {
    "text": "are saved in either AWS Secrets Manager, or optionally, AWS Systems\nManager Parameter Store.",
    "start": "1771050",
    "end": "1777650"
  },
  {
    "text": "And of course I do need to make the very important tenancy pick here.",
    "start": "1777650",
    "end": "1783380"
  },
  {
    "text": "So we're going to set\nthat to dedicated host. We've got our auto-placement on,",
    "start": "1783380",
    "end": "1788600"
  },
  {
    "text": "and now we're going to\nlaunch our instance.",
    "start": "1788600",
    "end": "1791903"
  },
  {
    "text": "The difference here is though we're not going to\nconnect to this instance. This will take another six to 20 minutes",
    "start": "1793640",
    "end": "1798980"
  },
  {
    "text": "to initialize and get started. We're going to take a\nlook at our Jamf console",
    "start": "1798980",
    "end": "1804560"
  },
  {
    "text": "as that is happening. It looks like our EC2 Mac\ninstance is good to go.",
    "start": "1804560",
    "end": "1809600"
  },
  {
    "text": "Now it will take another minute or so for the Mac to go\nthrough the enrollment process as we saw,",
    "start": "1809600",
    "end": "1815360"
  },
  {
    "text": "and for the Jamf console to show that, it does take a recon. So let's go over to our\nJamf console in Safari here,",
    "start": "1815360",
    "end": "1824183"
  },
  {
    "text": "and we're going to refresh. And it looks like we have\nour Mac already enrolled",
    "start": "1825657",
    "end": "1830659"
  },
  {
    "text": "two minutes ago. This is the new Mac that is\nenrolled into our Jamf instance.",
    "start": "1830660",
    "end": "1836210"
  },
  {
    "text": "This is receiving the\nsame profiles as the last, and also does retain\nthose same capabilities.",
    "start": "1836210",
    "end": "1842660"
  },
  {
    "text": "So it is still supervised, it\nis still user-approved, MDM,",
    "start": "1842660",
    "end": "1847660"
  },
  {
    "text": "and able to take those commands. And that's going from\nzero to an enrolled in MDM",
    "start": "1848390",
    "end": "1854117"
  },
  {
    "text": "EC2 Mac instance in just a few steps. Thank you so much for joining me.",
    "start": "1854117",
    "end": "1859250"
  },
  {
    "text": "Thank you so much for listening. Have a wonderful day, and\nmany happy instances to you.",
    "start": "1859250",
    "end": "1865163"
  }
]